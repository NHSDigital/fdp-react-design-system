{
  "version": 3,
  "sources": ["../../src/behaviours/conditionalRevealUtil.ts"],
  "sourcesContent": ["// Shared utility for conditional reveal behaviour across controls (radios, checkboxes)\n// Pattern: each input's conditional content element has id `${input.id}-conditional`.\n\nexport interface ConditionalConfig {\n  inputSelector: string;\n  hiddenClass: string;\n  container: HTMLElement;\n  eventName: string;\n  exclusive?: boolean; // radios hide others\n}\n\nexport interface ConditionalHandles { detach: () => void }\n\nexport function attachConditionalReveals(cfg: ConditionalConfig): ConditionalHandles {\n  const inputs = Array.from(cfg.container.querySelectorAll<HTMLInputElement>(cfg.inputSelector));\n  if (!inputs.length) return { detach: () => {} };\n\n  const update = () => {\n    if (cfg.exclusive) {\n      inputs.forEach(i => {\n        const cond = document.getElementById(i.id + '-conditional');\n        if (cond) {\n          cond.classList.add(cfg.hiddenClass);\n          i.setAttribute('aria-expanded', 'false');\n        }\n      });\n    }\n    inputs.forEach(i => {\n      const cond = document.getElementById(i.id + '-conditional');\n      if (cond) {\n        const show = i.checked;\n        cond.classList.toggle(cfg.hiddenClass, !show);\n        i.setAttribute('aria-expanded', show ? 'true' : 'false');\n      }\n    });\n  };\n\n  const handleChange = () => {\n    update();\n    cfg.container.dispatchEvent(new CustomEvent(cfg.eventName, { bubbles: true }));\n  };\n\n  inputs.forEach(i => {\n    i.addEventListener('change', handleChange);\n    const cond = document.getElementById(i.id + '-conditional');\n    if (cond && !i.hasAttribute('aria-controls')) i.setAttribute('aria-controls', i.id + '-conditional');\n  });\n  update();\n  return { detach() { inputs.forEach(i => i.removeEventListener('change', handleChange)); } };\n}\n"],
  "mappings": "AAaO,SAAS,yBAAyB,KAA4C;AACnF,QAAM,SAAS,MAAM,KAAK,IAAI,UAAU,iBAAmC,IAAI,aAAa,CAAC;AAC7F,MAAI,CAAC,OAAO,OAAQ,QAAO,EAAE,QAAQ,MAAM;AAAA,EAAC,EAAE;AAE9C,QAAM,SAAS,MAAM;AACnB,QAAI,IAAI,WAAW;AACjB,aAAO,QAAQ,OAAK;AAClB,cAAM,OAAO,SAAS,eAAe,EAAE,KAAK,cAAc;AAC1D,YAAI,MAAM;AACR,eAAK,UAAU,IAAI,IAAI,WAAW;AAClC,YAAE,aAAa,iBAAiB,OAAO;AAAA,QACzC;AAAA,MACF,CAAC;AAAA,IACH;AACA,WAAO,QAAQ,OAAK;AAClB,YAAM,OAAO,SAAS,eAAe,EAAE,KAAK,cAAc;AAC1D,UAAI,MAAM;AACR,cAAM,OAAO,EAAE;AACf,aAAK,UAAU,OAAO,IAAI,aAAa,CAAC,IAAI;AAC5C,UAAE,aAAa,iBAAiB,OAAO,SAAS,OAAO;AAAA,MACzD;AAAA,IACF,CAAC;AAAA,EACH;AAEA,QAAM,eAAe,MAAM;AACzB,WAAO;AACP,QAAI,UAAU,cAAc,IAAI,YAAY,IAAI,WAAW,EAAE,SAAS,KAAK,CAAC,CAAC;AAAA,EAC/E;AAEA,SAAO,QAAQ,OAAK;AAClB,MAAE,iBAAiB,UAAU,YAAY;AACzC,UAAM,OAAO,SAAS,eAAe,EAAE,KAAK,cAAc;AAC1D,QAAI,QAAQ,CAAC,EAAE,aAAa,eAAe,EAAG,GAAE,aAAa,iBAAiB,EAAE,KAAK,cAAc;AAAA,EACrG,CAAC;AACD,SAAO;AACP,SAAO,EAAE,SAAS;AAAE,WAAO,QAAQ,OAAK,EAAE,oBAAoB,UAAU,YAAY,CAAC;AAAA,EAAG,EAAE;AAC5F;",
  "names": []
}
