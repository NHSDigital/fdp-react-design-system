{
  "version": 3,
  "sources": ["../../src/behaviours/radiosBehaviour.ts"],
  "sourcesContent": ["// Behaviour layer for Radios component (progressive enhancement)\n// Mirrors keyboard navigation and conditional reveal logic from React implementation.\n\nimport { attachConditionalReveals } from './conditionalRevealUtil';\n\ninterface RadiosBehaviourHandles { detach: () => void }\n\ninterface BehaviourContainer extends HTMLElement { __nhsRadiosBehaviour?: RadiosBehaviourHandles }\n\nfunction enhanceRadiosContainer(container: BehaviourContainer): RadiosBehaviourHandles {\n  const inputs: HTMLInputElement[] = Array.from(container.querySelectorAll('input.nhsuk-radios__input[type=\"radio\"][name]'));\n  const name = inputs[0]?.name;\n  if (!name) return { detach: () => {} };\n\n  const handleKeyDown = (e: KeyboardEvent) => {\n    if (!['ArrowDown','ArrowUp','ArrowLeft','ArrowRight'].includes(e.key)) return;\n    const enabled = inputs.filter(i => !i.disabled);\n    const current = enabled.indexOf(e.target as HTMLInputElement);\n    if (current === -1) return;\n    e.preventDefault();\n    let nextIndex = current;\n    if (e.key === 'ArrowDown' || e.key === 'ArrowRight') nextIndex = (current + 1) % enabled.length;\n    else nextIndex = (current - 1 + enabled.length) % enabled.length;\n    const next = enabled[nextIndex];\n    if (next && next !== e.target) {\n      next.focus();\n      if (!next.checked) {\n        next.click();\n      }\n    }\n  };\n\n  const conditionalHandles = attachConditionalReveals({\n    inputSelector: 'input.nhsuk-radios__input[type=\"radio\"][name=\"' + name + '\"]',\n    hiddenClass: 'nhsuk-radios__conditional--hidden',\n    container,\n    eventName: 'nhs:radios:change',\n    exclusive: true,\n  });\n\n  inputs.forEach(i => {\n    i.addEventListener('keydown', handleKeyDown);\n    // conditional change handling covered by shared utility\n  });\n  // Initial conditional state handled by utility\n\n  return {\n    detach() {\n      inputs.forEach(i => {\n        i.removeEventListener('keydown', handleKeyDown);\n        // no direct change listener to remove (handled by utility)\n      });\n      conditionalHandles.detach();\n    }\n  };\n}\n\nexport function initRadios(scope: ParentNode = document) {\n  const containers = Array.from(scope.querySelectorAll<BehaviourContainer>('.nhsuk-radios'));\n  containers.forEach(c => {\n    if (!c.__nhsRadiosBehaviour) {\n      c.__nhsRadiosBehaviour = enhanceRadiosContainer(c);\n    }\n  });\n}\n\nexport function detachRadios(scope: ParentNode = document) {\n  const containers = Array.from(scope.querySelectorAll<BehaviourContainer>('.nhsuk-radios'));\n  containers.forEach(c => { c.__nhsRadiosBehaviour?.detach(); delete c.__nhsRadiosBehaviour; });\n}\n\n// Auto init on DOM ready\nif (typeof window !== 'undefined') {\n  // @ts-ignore\n  if (!window.__nhsInitRadios) {\n    // @ts-ignore\n  window.__nhsInitRadios = initRadios;\n  // @ts-ignore\n  window.__nhsDetachRadios = detachRadios;\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', () => initRadios());\n    } else {\n      initRadios();\n    }\n  }\n}\n"],
  "mappings": "AAGA,SAAS,gCAAgC;AAMzC,SAAS,uBAAuB,WAAuD;AATvF;AAUE,QAAM,SAA6B,MAAM,KAAK,UAAU,iBAAiB,+CAA+C,CAAC;AACzH,QAAM,QAAO,YAAO,CAAC,MAAR,mBAAW;AACxB,MAAI,CAAC,KAAM,QAAO,EAAE,QAAQ,MAAM;AAAA,EAAC,EAAE;AAErC,QAAM,gBAAgB,CAAC,MAAqB;AAC1C,QAAI,CAAC,CAAC,aAAY,WAAU,aAAY,YAAY,EAAE,SAAS,EAAE,GAAG,EAAG;AACvE,UAAM,UAAU,OAAO,OAAO,OAAK,CAAC,EAAE,QAAQ;AAC9C,UAAM,UAAU,QAAQ,QAAQ,EAAE,MAA0B;AAC5D,QAAI,YAAY,GAAI;AACpB,MAAE,eAAe;AACjB,QAAI,YAAY;AAChB,QAAI,EAAE,QAAQ,eAAe,EAAE,QAAQ,aAAc,cAAa,UAAU,KAAK,QAAQ;AAAA,QACpF,cAAa,UAAU,IAAI,QAAQ,UAAU,QAAQ;AAC1D,UAAM,OAAO,QAAQ,SAAS;AAC9B,QAAI,QAAQ,SAAS,EAAE,QAAQ;AAC7B,WAAK,MAAM;AACX,UAAI,CAAC,KAAK,SAAS;AACjB,aAAK,MAAM;AAAA,MACb;AAAA,IACF;AAAA,EACF;AAEA,QAAM,qBAAqB,yBAAyB;AAAA,IAClD,eAAe,mDAAmD,OAAO;AAAA,IACzE,aAAa;AAAA,IACb;AAAA,IACA,WAAW;AAAA,IACX,WAAW;AAAA,EACb,CAAC;AAED,SAAO,QAAQ,OAAK;AAClB,MAAE,iBAAiB,WAAW,aAAa;AAAA,EAE7C,CAAC;AAGD,SAAO;AAAA,IACL,SAAS;AACP,aAAO,QAAQ,OAAK;AAClB,UAAE,oBAAoB,WAAW,aAAa;AAAA,MAEhD,CAAC;AACD,yBAAmB,OAAO;AAAA,IAC5B;AAAA,EACF;AACF;AAEO,SAAS,WAAW,QAAoB,UAAU;AACvD,QAAM,aAAa,MAAM,KAAK,MAAM,iBAAqC,eAAe,CAAC;AACzF,aAAW,QAAQ,OAAK;AACtB,QAAI,CAAC,EAAE,sBAAsB;AAC3B,QAAE,uBAAuB,uBAAuB,CAAC;AAAA,IACnD;AAAA,EACF,CAAC;AACH;AAEO,SAAS,aAAa,QAAoB,UAAU;AACzD,QAAM,aAAa,MAAM,KAAK,MAAM,iBAAqC,eAAe,CAAC;AACzF,aAAW,QAAQ,OAAK;AApE1B;AAoE4B,YAAE,yBAAF,mBAAwB;AAAU,WAAO,EAAE;AAAA,EAAsB,CAAC;AAC9F;AAGA,IAAI,OAAO,WAAW,aAAa;AAEjC,MAAI,CAAC,OAAO,iBAAiB;AAE7B,WAAO,kBAAkB;AAEzB,WAAO,oBAAoB;AACzB,QAAI,SAAS,eAAe,WAAW;AACrC,eAAS,iBAAiB,oBAAoB,MAAM,WAAW,CAAC;AAAA,IAClE,OAAO;AACL,iBAAW;AAAA,IACb;AAAA,EACF;AACF;",
  "names": []
}
