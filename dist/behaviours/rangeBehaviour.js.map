{
  "version": 3,
  "sources": ["../../src/behaviours/rangeBehaviour.ts"],
  "sourcesContent": ["// Behaviour layer for range input variant (progressive enhancement)\n// Keeps displayed current value (and data attribute) in sync as the user drags.\n\ninterface RangeBehaviourHandles {\n\tdetach: () => void;\n}\ninterface RangeInput extends HTMLInputElement {\n\t__nhsRangeBehaviour?: RangeBehaviourHandles;\n}\n\nfunction enhanceRangeInput(input: RangeInput): RangeBehaviourHandles {\n\tconst wrapper = input.closest(\".nhsuk-input-range-wrapper\");\n\tconst currentValueEl = wrapper?.querySelector<HTMLElement>(\n\t\t\".nhsuk-input-range-current-value strong\"\n\t);\n\n\tconst update = () => {\n\t\tconst val = input.value;\n\t\tinput.setAttribute(\"data-current-value\", val);\n\t\tif (currentValueEl) currentValueEl.textContent = val;\n\t};\n\n\tconst listener = () => {\n\t\tupdate();\n\t\tinput.dispatchEvent(new CustomEvent(\"nhs:range:update\", { bubbles: true }));\n\t};\n\tinput.addEventListener(\"input\", listener);\n\t// Initialize\n\tupdate();\n\n\treturn {\n\t\tdetach() {\n\t\t\tinput.removeEventListener(\"input\", listener);\n\t\t},\n\t};\n}\n\nexport function initRanges(scope: ParentNode = document) {\n\tconst inputs = Array.from(\n\t\tscope.querySelectorAll<RangeInput>(\n\t\t\t\"input.nhsuk-input--range[data-current-value]\"\n\t\t)\n\t);\n\tinputs.forEach((inp) => {\n\t\tif (!inp.__nhsRangeBehaviour) {\n\t\t\tinp.__nhsRangeBehaviour = enhanceRangeInput(inp);\n\t\t}\n\t});\n}\n\nexport function detachRanges(scope: ParentNode = document) {\n\tconst inputs = Array.from(\n\t\tscope.querySelectorAll<RangeInput>(\n\t\t\t\"input.nhsuk-input--range[data-current-value]\"\n\t\t)\n\t);\n\tinputs.forEach((inp) => {\n\t\tinp.__nhsRangeBehaviour?.detach();\n\t\tdelete inp.__nhsRangeBehaviour;\n\t});\n}\n\nif (typeof window !== \"undefined\") {\n\t// @ts-ignore\n\tif (!window.__nhsInitRanges) {\n\t\t// @ts-ignore\n\t\twindow.__nhsInitRanges = initRanges;\n\t\t// @ts-ignore\n\t\twindow.__nhsDetachRanges = detachRanges;\n\t\tif (document.readyState === \"loading\") {\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", () => initRanges());\n\t\t} else {\n\t\t\tinitRanges();\n\t\t}\n\t}\n}\n"],
  "mappings": "AAUA,SAAS,kBAAkB,OAA0C;AACpE,QAAM,UAAU,MAAM,QAAQ,4BAA4B;AAC1D,QAAM,iBAAiB,mCAAS;AAAA,IAC/B;AAAA;AAGD,QAAM,SAAS,MAAM;AACpB,UAAM,MAAM,MAAM;AAClB,UAAM,aAAa,sBAAsB,GAAG;AAC5C,QAAI,eAAgB,gBAAe,cAAc;AAAA,EAClD;AAEA,QAAM,WAAW,MAAM;AACtB,WAAO;AACP,UAAM,cAAc,IAAI,YAAY,oBAAoB,EAAE,SAAS,KAAK,CAAC,CAAC;AAAA,EAC3E;AACA,QAAM,iBAAiB,SAAS,QAAQ;AAExC,SAAO;AAEP,SAAO;AAAA,IACN,SAAS;AACR,YAAM,oBAAoB,SAAS,QAAQ;AAAA,IAC5C;AAAA,EACD;AACD;AAEO,SAAS,WAAW,QAAoB,UAAU;AACxD,QAAM,SAAS,MAAM;AAAA,IACpB,MAAM;AAAA,MACL;AAAA,IACD;AAAA,EACD;AACA,SAAO,QAAQ,CAAC,QAAQ;AACvB,QAAI,CAAC,IAAI,qBAAqB;AAC7B,UAAI,sBAAsB,kBAAkB,GAAG;AAAA,IAChD;AAAA,EACD,CAAC;AACF;AAEO,SAAS,aAAa,QAAoB,UAAU;AAC1D,QAAM,SAAS,MAAM;AAAA,IACpB,MAAM;AAAA,MACL;AAAA,IACD;AAAA,EACD;AACA,SAAO,QAAQ,CAAC,QAAQ;AAxDzB;AAyDE,cAAI,wBAAJ,mBAAyB;AACzB,WAAO,IAAI;AAAA,EACZ,CAAC;AACF;AAEA,IAAI,OAAO,WAAW,aAAa;AAElC,MAAI,CAAC,OAAO,iBAAiB;AAE5B,WAAO,kBAAkB;AAEzB,WAAO,oBAAoB;AAC3B,QAAI,SAAS,eAAe,WAAW;AACtC,eAAS,iBAAiB,oBAAoB,MAAM,WAAW,CAAC;AAAA,IACjE,OAAO;AACN,iBAAW;AAAA,IACZ;AAAA,EACD;AACD;",
  "names": []
}
