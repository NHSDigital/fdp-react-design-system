{
  "version": 3,
  "sources": ["../../src/behaviours/rangeBehaviour.ts"],
  "sourcesContent": ["// Behaviour layer for range input variant (progressive enhancement)\n// Keeps displayed current value (and data attribute) in sync as the user drags.\n\ninterface RangeBehaviourHandles { detach: () => void }\ninterface RangeInput extends HTMLInputElement { __nhsRangeBehaviour?: RangeBehaviourHandles }\n\nfunction enhanceRangeInput(input: RangeInput): RangeBehaviourHandles {\n  const wrapper = input.closest('.nhsuk-input-range-wrapper');\n  const currentValueEl = wrapper?.querySelector<HTMLElement>('.nhsuk-input-range-current-value strong');\n\n  const update = () => {\n    const val = input.value;\n    input.setAttribute('data-current-value', val);\n    if (currentValueEl) currentValueEl.textContent = val;\n  };\n\n  const listener = () => { update(); input.dispatchEvent(new CustomEvent('nhs:range:update', { bubbles: true })); };\n  input.addEventListener('input', listener);\n  // Initialize\n  update();\n\n  return { detach() { input.removeEventListener('input', listener); } };\n}\n\nexport function initRanges(scope: ParentNode = document) {\n  const inputs = Array.from(scope.querySelectorAll<RangeInput>('input.nhsuk-input--range[data-current-value]'));\n  inputs.forEach(inp => {\n    if (!inp.__nhsRangeBehaviour) {\n      inp.__nhsRangeBehaviour = enhanceRangeInput(inp);\n    }\n  });\n}\n\nexport function detachRanges(scope: ParentNode = document) {\n  const inputs = Array.from(scope.querySelectorAll<RangeInput>('input.nhsuk-input--range[data-current-value]'));\n  inputs.forEach(inp => {\n    inp.__nhsRangeBehaviour?.detach();\n    delete inp.__nhsRangeBehaviour;\n  });\n}\n\nif (typeof window !== 'undefined') {\n  // @ts-ignore\n  if (!window.__nhsInitRanges) {\n    // @ts-ignore\n  window.__nhsInitRanges = initRanges;\n  // @ts-ignore\n  window.__nhsDetachRanges = detachRanges;\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', () => initRanges());\n    } else {\n      initRanges();\n    }\n  }\n}\n"],
  "mappings": "AAMA,SAAS,kBAAkB,OAA0C;AACnE,QAAM,UAAU,MAAM,QAAQ,4BAA4B;AAC1D,QAAM,iBAAiB,mCAAS,cAA2B;AAE3D,QAAM,SAAS,MAAM;AACnB,UAAM,MAAM,MAAM;AAClB,UAAM,aAAa,sBAAsB,GAAG;AAC5C,QAAI,eAAgB,gBAAe,cAAc;AAAA,EACnD;AAEA,QAAM,WAAW,MAAM;AAAE,WAAO;AAAG,UAAM,cAAc,IAAI,YAAY,oBAAoB,EAAE,SAAS,KAAK,CAAC,CAAC;AAAA,EAAG;AAChH,QAAM,iBAAiB,SAAS,QAAQ;AAExC,SAAO;AAEP,SAAO,EAAE,SAAS;AAAE,UAAM,oBAAoB,SAAS,QAAQ;AAAA,EAAG,EAAE;AACtE;AAEO,SAAS,WAAW,QAAoB,UAAU;AACvD,QAAM,SAAS,MAAM,KAAK,MAAM,iBAA6B,8CAA8C,CAAC;AAC5G,SAAO,QAAQ,SAAO;AACpB,QAAI,CAAC,IAAI,qBAAqB;AAC5B,UAAI,sBAAsB,kBAAkB,GAAG;AAAA,IACjD;AAAA,EACF,CAAC;AACH;AAEO,SAAS,aAAa,QAAoB,UAAU;AACzD,QAAM,SAAS,MAAM,KAAK,MAAM,iBAA6B,8CAA8C,CAAC;AAC5G,SAAO,QAAQ,SAAO;AAnCxB;AAoCI,cAAI,wBAAJ,mBAAyB;AACzB,WAAO,IAAI;AAAA,EACb,CAAC;AACH;AAEA,IAAI,OAAO,WAAW,aAAa;AAEjC,MAAI,CAAC,OAAO,iBAAiB;AAE7B,WAAO,kBAAkB;AAEzB,WAAO,oBAAoB;AACzB,QAAI,SAAS,eAAe,WAAW;AACrC,eAAS,iBAAiB,oBAAoB,MAAM,WAAW,CAAC;AAAA,IAClE,OAAO;AACL,iBAAW;AAAA,IACb;AAAA,EACF;AACF;",
  "names": []
}
