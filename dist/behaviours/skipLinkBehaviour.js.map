{
  "version": 3,
  "sources": ["../../src/behaviours/skipLinkBehaviour.ts"],
  "sourcesContent": ["/**\n * Skip link progressive enhancement behaviour.\n * Attaches a click handler to focus target content and provide temporary focus styles.\n * Safe to import in the browser; no SSR side effects.\n */\nexport function initSkipLinks(scope: ParentNode = document) {\n  if (typeof window === 'undefined' || typeof document === 'undefined') return;\n\n  const handleSkipLinkClick = (event: Event) => {\n    const target = event.currentTarget as HTMLAnchorElement;\n    const targetId = target.getAttribute('href');\n    if (!targetId || !targetId.startsWith('#')) return;\n\n    const targetElement = document.querySelector(targetId);\n    if (!targetElement) return;\n\n    // Ensure focusability\n    const hadTabIndex = targetElement.hasAttribute('tabindex');\n    if (!hadTabIndex) targetElement.setAttribute('tabindex', '-1');\n\n    (targetElement as HTMLElement).focus();\n    targetElement.classList.add('nhsuk-skip-link-focused-element');\n\n    const timeoutId = window.setTimeout(() => {\n      targetElement.classList.remove('nhsuk-skip-link-focused-element');\n      if (!hadTabIndex && targetElement.getAttribute('tabindex') === '-1') {\n        targetElement.removeAttribute('tabindex');\n      }\n    }, 3000);\n\n  // @ts-ignore - attach for cleanup on the element instance\n    (target as any).__nhsSkipLinkTimeout = timeoutId;\n  };\n\n  const links = scope.querySelectorAll('.nhsuk-skip-link');\n  links.forEach((link) => {\n    const el = link as HTMLElement & { __nhsSkipLinkHandler?: (e: Event) => void };\n    // Avoid double-binding if init called multiple times\n    if (!el.__nhsSkipLinkHandler) {\n      el.addEventListener('click', handleSkipLinkClick);\n      el.__nhsSkipLinkHandler = handleSkipLinkClick;\n    }\n    el.setAttribute('data-enhanced', 'true');\n  });\n}\n\nexport function detachSkipLinks(scope: ParentNode = document) {\n  if (typeof window === 'undefined' || typeof document === 'undefined') return;\n  const links = scope.querySelectorAll('.nhsuk-skip-link');\n  links.forEach((link) => {\n    const el = link as HTMLElement & {\n      __nhsSkipLinkTimeout?: number;\n      __nhsSkipLinkHandler?: (e: Event) => void;\n    };\n    const timeoutId = el.__nhsSkipLinkTimeout;\n    if (timeoutId && window.clearTimeout) window.clearTimeout(timeoutId);\n    if (el.__nhsSkipLinkHandler) {\n      el.removeEventListener('click', el.__nhsSkipLinkHandler);\n      delete el.__nhsSkipLinkHandler;\n    }\n    el.removeAttribute('data-enhanced');\n  });\n}\n"],
  "mappings": "AAKO,SAAS,cAAc,QAAoB,UAAU;AAC1D,MAAI,OAAO,WAAW,eAAe,OAAO,aAAa,YAAa;AAEtE,QAAM,sBAAsB,CAAC,UAAiB;AAC5C,UAAM,SAAS,MAAM;AACrB,UAAM,WAAW,OAAO,aAAa,MAAM;AAC3C,QAAI,CAAC,YAAY,CAAC,SAAS,WAAW,GAAG,EAAG;AAE5C,UAAM,gBAAgB,SAAS,cAAc,QAAQ;AACrD,QAAI,CAAC,cAAe;AAGpB,UAAM,cAAc,cAAc,aAAa,UAAU;AACzD,QAAI,CAAC,YAAa,eAAc,aAAa,YAAY,IAAI;AAE7D,IAAC,cAA8B,MAAM;AACrC,kBAAc,UAAU,IAAI,iCAAiC;AAE7D,UAAM,YAAY,OAAO,WAAW,MAAM;AACxC,oBAAc,UAAU,OAAO,iCAAiC;AAChE,UAAI,CAAC,eAAe,cAAc,aAAa,UAAU,MAAM,MAAM;AACnE,sBAAc,gBAAgB,UAAU;AAAA,MAC1C;AAAA,IACF,GAAG,GAAI;AAGP,IAAC,OAAe,uBAAuB;AAAA,EACzC;AAEA,QAAM,QAAQ,MAAM,iBAAiB,kBAAkB;AACvD,QAAM,QAAQ,CAAC,SAAS;AACtB,UAAM,KAAK;AAEX,QAAI,CAAC,GAAG,sBAAsB;AAC5B,SAAG,iBAAiB,SAAS,mBAAmB;AAChD,SAAG,uBAAuB;AAAA,IAC5B;AACA,OAAG,aAAa,iBAAiB,MAAM;AAAA,EACzC,CAAC;AACH;AAEO,SAAS,gBAAgB,QAAoB,UAAU;AAC5D,MAAI,OAAO,WAAW,eAAe,OAAO,aAAa,YAAa;AACtE,QAAM,QAAQ,MAAM,iBAAiB,kBAAkB;AACvD,QAAM,QAAQ,CAAC,SAAS;AACtB,UAAM,KAAK;AAIX,UAAM,YAAY,GAAG;AACrB,QAAI,aAAa,OAAO,aAAc,QAAO,aAAa,SAAS;AACnE,QAAI,GAAG,sBAAsB;AAC3B,SAAG,oBAAoB,SAAS,GAAG,oBAAoB;AACvD,aAAO,GAAG;AAAA,IACZ;AACA,OAAG,gBAAgB,eAAe;AAAA,EACpC,CAAC;AACH;",
  "names": []
}
