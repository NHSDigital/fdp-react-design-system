{"version":3,"file":"index-CKdN4v41.js","sources":["../src/behaviours/buttonBehaviour.ts","../src/behaviours/conditionalRevealUtil.ts","../src/behaviours/radiosBehaviour.ts","../src/behaviours/rangeBehaviour.ts","../src/behaviours/characterCountBehaviour.ts","../src/behaviours/checkboxesBehaviour.ts","../src/behaviours/headerBehaviour.ts","../src/behaviours/skipLinkBehaviour.ts","../src/behaviours/index.ts"],"sourcesContent":["// Behaviour layer for Button component\n// This file encapsulates stateful / interactive logic that can be reused across\n// frameworks (React, Nunjucks-enhanced HTML with progressive enhancement, plain JS)\n// without tying to a rendering library.\n\nexport interface ButtonBehaviourOptions {\n  preventDoubleClick?: boolean;\n  onClick?: (ev: MouseEvent) => void;\n}\n\nexport interface ButtonBehaviourHandles {\n  attach: (el: HTMLElement) => void;\n  detach: () => void;\n}\n\n/**\n * Provides progressive enhancement behaviour for buttons / links that use\n * data-module=\"nhs-button\". Mirrors logic in the React implementation so that\n * SSR + static HTML + Nunjucks macros remain consistent.\n */\nexport function createButtonBehaviour(options: ButtonBehaviourOptions = {}): ButtonBehaviourHandles {\n  let el: HTMLElement | null = null;\n  const { preventDoubleClick, onClick } = options;\n  let processingTimeout: number | null = null;\n\n  const handleClick = (e: MouseEvent) => {\n    if (preventDoubleClick) {\n      if (el?.getAttribute('data-processing') === 'true') {\n        e.preventDefault();\n        return;\n      }\n      el?.setAttribute('data-processing', 'true');\n      processingTimeout = window.setTimeout(() => {\n        el?.removeAttribute('data-processing');\n        processingTimeout = null;\n      }, 1000);\n    }\n    onClick?.(e);\n  };\n\n  const handleKeyDown = (e: KeyboardEvent) => {\n    if (!el) return;\n    // Space triggers click when role=button on anchor\n    if (e.key === ' ' && el.tagName === 'A') {\n      e.preventDefault();\n      el.click();\n    }\n  };\n\n  return {\n    attach(element: HTMLElement) {\n      el = element;\n      el.addEventListener('click', handleClick);\n      el.addEventListener('keydown', handleKeyDown);\n    },\n    detach() {\n      if (!el) return;\n      el.removeEventListener('click', handleClick);\n      el.removeEventListener('keydown', handleKeyDown);\n      if (processingTimeout) window.clearTimeout(processingTimeout);\n      el = null;\n    }\n  };\n}\n\n// Auto-init pattern (optional, guarded for multiple executions)\nexport function initButtons(scope: ParentNode = document) {\n  const nodes = Array.from(scope.querySelectorAll<HTMLElement>('[data-module=\"nhs-button\"][data-prevent-double-click]'));\n  nodes.forEach(node => {\n    // Extend node with opaque symbol property for idempotence\n    interface BehaviourNode extends HTMLElement { __nhsButtonBehaviour?: ButtonBehaviourHandles }\n    const n = node as BehaviourNode;\n    if (!n.__nhsButtonBehaviour) {\n      const behaviour = createButtonBehaviour({ preventDoubleClick: true });\n      behaviour.attach(n);\n      n.__nhsButtonBehaviour = behaviour;\n    }\n  });\n}\n\nexport function detachButtons(scope: ParentNode = document) {\n  const nodes = Array.from(scope.querySelectorAll<HTMLElement>('[data-module=\"nhs-button\"][data-prevent-double-click]'));\n  nodes.forEach(node => {\n    interface BehaviourNode extends HTMLElement { __nhsButtonBehaviour?: ButtonBehaviourHandles }\n    const n = node as BehaviourNode;\n    if (n.__nhsButtonBehaviour) { n.__nhsButtonBehaviour.detach(); delete n.__nhsButtonBehaviour; }\n  });\n}\n\n// Provide a global init hook when running in browser environment\nif (typeof window !== 'undefined') {\n  // @ts-ignore\n  if (!window.__nhsInitButtons) {\n    // @ts-ignore\n  window.__nhsInitButtons = initButtons;\n  // @ts-ignore\n  window.__nhsDetachButtons = detachButtons;\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', () => initButtons());\n    } else {\n      initButtons();\n    }\n  }\n}\n","// Shared utility for conditional reveal behaviour across controls (radios, checkboxes)\n// Pattern: each input's conditional content element has id `${input.id}-conditional`.\n\nexport interface ConditionalConfig {\n  inputSelector: string;\n  hiddenClass: string;\n  container: HTMLElement;\n  eventName: string;\n  exclusive?: boolean; // radios hide others\n}\n\nexport interface ConditionalHandles { detach: () => void }\n\nexport function attachConditionalReveals(cfg: ConditionalConfig): ConditionalHandles {\n  const inputs = Array.from(cfg.container.querySelectorAll<HTMLInputElement>(cfg.inputSelector));\n  if (!inputs.length) return { detach: () => {} };\n\n  const update = () => {\n    if (cfg.exclusive) {\n      inputs.forEach(i => {\n        const cond = document.getElementById(i.id + '-conditional');\n        if (cond) {\n          cond.classList.add(cfg.hiddenClass);\n          i.setAttribute('aria-expanded', 'false');\n        }\n      });\n    }\n    inputs.forEach(i => {\n      const cond = document.getElementById(i.id + '-conditional');\n      if (cond) {\n        const show = i.checked;\n        cond.classList.toggle(cfg.hiddenClass, !show);\n        i.setAttribute('aria-expanded', show ? 'true' : 'false');\n      }\n    });\n  };\n\n  const handleChange = () => {\n    update();\n    cfg.container.dispatchEvent(new CustomEvent(cfg.eventName, { bubbles: true }));\n  };\n\n  inputs.forEach(i => {\n    i.addEventListener('change', handleChange);\n    const cond = document.getElementById(i.id + '-conditional');\n    if (cond && !i.hasAttribute('aria-controls')) i.setAttribute('aria-controls', i.id + '-conditional');\n  });\n  update();\n  return { detach() { inputs.forEach(i => i.removeEventListener('change', handleChange)); } };\n}\n","// Behaviour layer for Radios component (progressive enhancement)\n// Mirrors keyboard navigation and conditional reveal logic from React implementation.\n\nimport { attachConditionalReveals } from './conditionalRevealUtil.js';\n\ninterface RadiosBehaviourHandles { detach: () => void }\n\ninterface BehaviourContainer extends HTMLElement { __nhsRadiosBehaviour?: RadiosBehaviourHandles }\n\nfunction enhanceRadiosContainer(container: BehaviourContainer): RadiosBehaviourHandles {\n  const inputs: HTMLInputElement[] = Array.from(container.querySelectorAll('input.nhsuk-radios__input[type=\"radio\"][name]'));\n  const name = inputs[0]?.name;\n  if (!name) return { detach: () => {} };\n\n  const handleKeyDown = (e: KeyboardEvent) => {\n    if (!['ArrowDown','ArrowUp','ArrowLeft','ArrowRight'].includes(e.key)) return;\n    const enabled = inputs.filter(i => !i.disabled);\n    const current = enabled.indexOf(e.target as HTMLInputElement);\n    if (current === -1) return;\n    e.preventDefault();\n    let nextIndex = current;\n    if (e.key === 'ArrowDown' || e.key === 'ArrowRight') nextIndex = (current + 1) % enabled.length;\n    else nextIndex = (current - 1 + enabled.length) % enabled.length;\n    const next = enabled[nextIndex];\n    if (next && next !== e.target) {\n      next.focus();\n      if (!next.checked) {\n        next.click();\n      }\n    }\n  };\n\n  const conditionalHandles = attachConditionalReveals({\n    inputSelector: 'input.nhsuk-radios__input[type=\"radio\"][name=\"' + name + '\"]',\n    hiddenClass: 'nhsuk-radios__conditional--hidden',\n    container,\n    eventName: 'nhs:radios:change',\n    exclusive: true,\n  });\n\n  inputs.forEach(i => {\n    i.addEventListener('keydown', handleKeyDown);\n    // conditional change handling covered by shared utility\n  });\n  // Initial conditional state handled by utility\n\n  return {\n    detach() {\n      inputs.forEach(i => {\n        i.removeEventListener('keydown', handleKeyDown);\n        // no direct change listener to remove (handled by utility)\n      });\n      conditionalHandles.detach();\n    }\n  };\n}\n\nexport function initRadios(scope: ParentNode = document) {\n  const containers = Array.from(scope.querySelectorAll<BehaviourContainer>('.nhsuk-radios'));\n  containers.forEach(c => {\n    if (!c.__nhsRadiosBehaviour) {\n      c.__nhsRadiosBehaviour = enhanceRadiosContainer(c);\n    }\n  });\n}\n\nexport function detachRadios(scope: ParentNode = document) {\n  const containers = Array.from(scope.querySelectorAll<BehaviourContainer>('.nhsuk-radios'));\n  containers.forEach(c => { c.__nhsRadiosBehaviour?.detach(); delete c.__nhsRadiosBehaviour; });\n}\n\n// Auto init on DOM ready\nif (typeof window !== 'undefined') {\n  // @ts-ignore\n  if (!window.__nhsInitRadios) {\n    // @ts-ignore\n  window.__nhsInitRadios = initRadios;\n  // @ts-ignore\n  window.__nhsDetachRadios = detachRadios;\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', () => initRadios());\n    } else {\n      initRadios();\n    }\n  }\n}\n","// Behaviour layer for range input variant (progressive enhancement)\n// Keeps displayed current value (and data attribute) in sync as the user drags.\n\ninterface RangeBehaviourHandles {\n\tdetach: () => void;\n}\ninterface RangeInput extends HTMLInputElement {\n\t__nhsRangeBehaviour?: RangeBehaviourHandles;\n}\n\nfunction enhanceRangeInput(input: RangeInput): RangeBehaviourHandles {\n\tconst wrapper = input.closest(\".nhsuk-input-range-wrapper\");\n\tconst currentValueEl = wrapper?.querySelector<HTMLElement>(\n\t\t\".nhsuk-input-range-current-value strong\"\n\t);\n\n\tconst update = () => {\n\t\tconst val = input.value;\n\t\tinput.setAttribute(\"data-current-value\", val);\n\t\tif (currentValueEl) currentValueEl.textContent = val;\n\t};\n\n\tconst listener = () => {\n\t\tupdate();\n\t\tinput.dispatchEvent(new CustomEvent(\"nhs:range:update\", { bubbles: true }));\n\t};\n\tinput.addEventListener(\"input\", listener);\n\t// Initialize\n\tupdate();\n\n\treturn {\n\t\tdetach() {\n\t\t\tinput.removeEventListener(\"input\", listener);\n\t\t},\n\t};\n}\n\nexport function initRanges(scope: ParentNode = document) {\n\tconst inputs = Array.from(\n\t\tscope.querySelectorAll<RangeInput>(\n\t\t\t\"input.nhsuk-input--range[data-current-value]\"\n\t\t)\n\t);\n\tinputs.forEach((inp) => {\n\t\tif (!inp.__nhsRangeBehaviour) {\n\t\t\tinp.__nhsRangeBehaviour = enhanceRangeInput(inp);\n\t\t}\n\t});\n}\n\nexport function detachRanges(scope: ParentNode = document) {\n\tconst inputs = Array.from(\n\t\tscope.querySelectorAll<RangeInput>(\n\t\t\t\"input.nhsuk-input--range[data-current-value]\"\n\t\t)\n\t);\n\tinputs.forEach((inp) => {\n\t\tinp.__nhsRangeBehaviour?.detach();\n\t\tdelete inp.__nhsRangeBehaviour;\n\t});\n}\n\nif (typeof window !== \"undefined\") {\n\t// @ts-ignore\n\tif (!window.__nhsInitRanges) {\n\t\t// @ts-ignore\n\t\twindow.__nhsInitRanges = initRanges;\n\t\t// @ts-ignore\n\t\twindow.__nhsDetachRanges = detachRanges;\n\t\tif (document.readyState === \"loading\") {\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", () => initRanges());\n\t\t} else {\n\t\t\tinitRanges();\n\t\t}\n\t}\n}\n","// Behaviour layer for CharacterCount component (progressive enhancement)\n// Mirrors logic from React version for static/Nunjucks HTML.\n\ninterface CharacterCountHandles { detach: () => void }\ninterface CharacterCountRoot extends HTMLElement { __nhsCharacterCount?: CharacterCountHandles }\n\nfunction enhanceCharacterCount(root: CharacterCountRoot): CharacterCountHandles {\n  const textarea = root.querySelector<HTMLTextAreaElement>('textarea');\n  const message = root.querySelector<HTMLElement>('.nhsuk-character-count__message, .nhsuk-hint');\n  if (!textarea || !message) return { detach: () => {} };\n\n  const maxLength = Number(root.getAttribute('data-maxlength')) || undefined;\n  const maxWords = Number(root.getAttribute('data-maxwords')) || undefined;\n  const threshold = Number(root.getAttribute('data-threshold')) || 0;\n  const limit = maxLength || maxWords || 0;\n\n  const unit = maxWords ? 'word' : 'character';\n  const unitPlural = maxWords ? 'words' : 'characters';\n\n  function countValue(val: string): number {\n    if (maxWords) {\n      const t = val.trim();\n      if (!t) return 0;\n      return t.split(/\\s+/).length;\n    }\n    return val.length;\n  }\n\n  function update() {\n  const text = textarea!.value;\n    const current = countValue(text);\n    const remaining = limit - current;\n    const thresholdCount = Math.floor(limit * (threshold / 100));\n    const showCount = current >= thresholdCount || current > limit;\n    const isOver = current > limit;\n    let msg: string;\n    if (!showCount) {\n      msg = `You can enter up to ${limit} ${limit === 1 ? unit : unitPlural}`;\n    } else if (isOver) {\n      const over = Math.abs(remaining);\n      msg = `You have ${over} ${over === 1 ? unit : unitPlural} too many`;\n    } else {\n      msg = `You have ${remaining} ${remaining === 1 ? unit : unitPlural} remaining`;\n    }\n  message!.textContent = msg;\n  // Toggle error styling\n  message!.classList.toggle('nhsuk-error-message', isOver);\n  if (isOver) textarea!.setAttribute('aria-invalid', 'true'); else textarea!.removeAttribute('aria-invalid');\n    // Dispatch event\n    root.dispatchEvent(new CustomEvent('nhs:character-count:update', { bubbles: true, detail: { current, remaining, isOverLimit: isOver } }));\n  }\n\n  const handler = () => update();\n  textarea!.addEventListener('input', handler);\n  update();\n\n  return { detach() { textarea!.removeEventListener('input', handler); } };\n}\n\nexport function initCharacterCounts(scope: ParentNode = document) {\n  const roots = Array.from(scope.querySelectorAll<CharacterCountRoot>('[data-module=\"nhsuk-character-count\"]'));\n  roots.forEach(r => { if (!r.__nhsCharacterCount) r.__nhsCharacterCount = enhanceCharacterCount(r); });\n}\n\nexport function detachCharacterCounts(scope: ParentNode = document) {\n  const roots = Array.from(scope.querySelectorAll<CharacterCountRoot>('[data-module=\"nhsuk-character-count\"]'));\n  roots.forEach(r => { r.__nhsCharacterCount?.detach(); delete r.__nhsCharacterCount; });\n}\n\nif (typeof window !== 'undefined') {\n  // @ts-ignore\n  if (!window.__nhsInitCharacterCounts) {\n    // @ts-ignore\n  window.__nhsInitCharacterCounts = initCharacterCounts;\n  // @ts-ignore\n  window.__nhsDetachCharacterCounts = detachCharacterCounts;\n    if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', () => initCharacterCounts()); else initCharacterCounts();\n  }\n}\n","// Behaviour for Checkboxes using shared conditional reveal utility\nimport { attachConditionalReveals } from \"./conditionalRevealUtil.js\";\n\ninterface CheckboxesHandles {\n\tdetach: () => void;\n}\ninterface CheckboxesContainer extends HTMLElement {\n\t__nhsCheckboxesBehaviour?: CheckboxesHandles;\n}\n\nfunction enhance(container: CheckboxesContainer): CheckboxesHandles {\n\treturn attachConditionalReveals({\n\t\tinputSelector: 'input.nhsuk-checkboxes__input[type=\"checkbox\"]',\n\t\thiddenClass: \"nhsuk-checkboxes__conditional--hidden\",\n\t\tcontainer,\n\t\teventName: \"nhs:checkboxes:change\",\n\t});\n}\n\nexport function initCheckboxes(scope: ParentNode = document) {\n\tconst groups = Array.from(\n\t\tscope.querySelectorAll<CheckboxesContainer>(\".nhsuk-checkboxes\")\n\t);\n\tgroups.forEach((g) => {\n\t\tif (!g.__nhsCheckboxesBehaviour) g.__nhsCheckboxesBehaviour = enhance(g);\n\t});\n}\n\nexport function detachCheckboxes(scope: ParentNode = document) {\n\tconst groups = Array.from(\n\t\tscope.querySelectorAll<CheckboxesContainer>(\".nhsuk-checkboxes\")\n\t);\n\tgroups.forEach((g) => {\n\t\tg.__nhsCheckboxesBehaviour?.detach();\n\t\tdelete g.__nhsCheckboxesBehaviour;\n\t});\n}\n\nif (typeof window !== \"undefined\") {\n\t// @ts-ignore\n\tif (!window.__nhsInitCheckboxes) {\n\t\t// @ts-ignore\n\t\twindow.__nhsInitCheckboxes = initCheckboxes;\n\t\t// @ts-ignore\n\t\twindow.__nhsDetachCheckboxes = detachCheckboxes;\n\t\tif (document.readyState === \"loading\")\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", () => initCheckboxes());\n\t\telse initCheckboxes();\n\t}\n}\n","/**\n * Header behaviour: progressive enhancement for navigation overflow & dropdown toggle.\n * Works on markup produced by Header (client) or HeaderServer (server) variants.\n */\ninterface HeaderBehaviourInstance {\n\troot: HTMLElement;\n\tdestroy(): void;\n}\n\nconst HEADER_SELECTOR = \".nhsuk-header\";\nconst NAV_CONTAINER_SELECTOR = \".nhsuk-header__navigation-container\";\nconst NAV_LIST_SELECTOR = \".nhsuk-header__navigation-list\";\nconst DROPDOWN_MENU_CLASS = \"nhsuk-header__dropdown-menu\";\nconst DROPDOWN_LIST_CLASS = \"nhsuk-header__dropdown-list\";\nconst MORE_ITEM_CLASS = \"nhsuk-header__navigation-item--more\";\nconst NAV_ITEM_SELECTOR =\n\t\".nhsuk-header__navigation-item:not(.\" + MORE_ITEM_CLASS + \")\";\n\nconst DEBOUNCE_MS = 150;\n\nfunction debounce<T extends (...args: any[]) => void>(\n\tfn: T,\n\twait = DEBOUNCE_MS\n) {\n\tlet t: number | undefined;\n\treturn (...args: Parameters<T>) => {\n\t\tif (t) window.clearTimeout(t);\n\t\tt = window.setTimeout(() => fn(...args), wait);\n\t};\n}\n\nexport function initHeaders(\n\tscope: ParentNode = document\n): HeaderBehaviourInstance[] {\n\tif (typeof window === \"undefined\") return [];\n\tconst headers = Array.from(\n\t\tscope.querySelectorAll<HTMLElement>(HEADER_SELECTOR)\n\t);\n\treturn headers\n\t\t.map(enhanceHeader)\n\t\t.filter(Boolean) as HeaderBehaviourInstance[];\n}\n\nexport function detachHeaders(scope: ParentNode = document) {\n\tconst headers = scope.querySelectorAll<HTMLElement>(HEADER_SELECTOR) || [];\n\theaders.forEach((h) => {\n\t\tconst inst = (h as any)._nhsHeaderInstance as\n\t\t\t| HeaderBehaviourInstance\n\t\t\t| undefined;\n\t\tinst?.destroy();\n\t});\n}\n\nfunction enhanceHeader(root: HTMLElement): HeaderBehaviourInstance | null {\n\tif ((root as any)._nhsHeaderInstance) return (root as any)._nhsHeaderInstance;\n\troot.setAttribute(\"data-enhancing\", \"header\");\n\tconst navContainer = root.querySelector<HTMLElement>(NAV_CONTAINER_SELECTOR);\n\tconst navList = root.querySelector<HTMLUListElement>(NAV_LIST_SELECTOR);\n\tif (!navContainer || !navList) return null;\n\n\t// Adapt server fallback dropdown (all items inside dropdown) back into primary list for measurement\n\tconst serverDropdown = root.querySelector<HTMLElement>(\n\t\t`.${DROPDOWN_MENU_CLASS}[data-ssr-overflow=\"true\"]`\n\t);\n\tif (serverDropdown) {\n\t\tconst list = serverDropdown.querySelector(`.${DROPDOWN_LIST_CLASS}`);\n\t\tif (list) {\n\t\t\tconst items = Array.from(list.children) as HTMLLIElement[];\n\t\t\tnavList.innerHTML = \"\";\n\t\t\titems.forEach((li) => {\n\t\t\t\tli.className = li.className\n\t\t\t\t\t.replace(\n\t\t\t\t\t\t\"nhsuk-header__dropdown-item--current\",\n\t\t\t\t\t\t\"nhsuk-header__navigation-item--current\"\n\t\t\t\t\t)\n\t\t\t\t\t.replace(\n\t\t\t\t\t\t\"nhsuk-header__dropdown-item\",\n\t\t\t\t\t\t\"nhsuk-header__navigation-item\"\n\t\t\t\t\t);\n\t\t\t\tconst link = li.querySelector(\"a\");\n\t\t\t\tif (link)\n\t\t\t\t\tlink.className = link.className.replace(\n\t\t\t\t\t\t\"nhsuk-header__dropdown-link\",\n\t\t\t\t\t\t\"nhsuk-header__navigation-link\"\n\t\t\t\t\t);\n\t\t\t\tnavList.appendChild(li);\n\t\t\t});\n\t\t\tserverDropdown.remove();\n\t\t}\n\t}\n\n\t// Capture original items (exclude potential more item)\n\tlet originalItemsHTML = Array.from(\n\t\tnavList.querySelectorAll<HTMLLIElement>(NAV_ITEM_SELECTOR)\n\t).map((li) => li.outerHTML);\n\tif (!originalItemsHTML.length) return null;\n\n\tlet moreLi: HTMLLIElement | null = null;\n\tlet dropdownMenu: HTMLDivElement | null = null;\n\tlet dropdownList: HTMLUListElement | null = null;\n\tlet open = false;\n\n\tfunction buildMore() {\n\t\tif (moreLi) return;\n\t\tmoreLi = document.createElement(\"li\");\n\t\tmoreLi.className = `nhsuk-header__navigation-item ${MORE_ITEM_CLASS}`;\n\t\tconst btn = document.createElement(\"button\");\n\t\tbtn.type = \"button\";\n\t\tbtn.className = \"nhsuk-header__navigation-button\";\n\t\tbtn.id = \"toggle-more-menu\";\n\t\tbtn.setAttribute(\"aria-expanded\", \"false\");\n\t\tbtn.setAttribute(\"aria-controls\", \"nhsuk-header-overflow-menu\");\n\t\tbtn.innerHTML =\n\t\t\t'<span>More</span><svg class=\"nhsuk-icon nhsuk-icon__chevron-down\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z\"/></svg>';\n\t\tbtn.addEventListener(\"click\", toggle);\n\t\tmoreLi.appendChild(btn);\n\t}\n\n\tfunction ensureDropdown() {\n\t\tif (dropdownMenu) return;\n\t\tdropdownMenu = document.createElement(\"div\");\n\t\tdropdownMenu.className = DROPDOWN_MENU_CLASS;\n\t\tdropdownMenu.hidden = true;\n\t\tdropdownMenu.id = \"nhsuk-header-overflow-menu\";\n\t\tdropdownList = document.createElement(\"ul\");\n\t\tdropdownList.className = DROPDOWN_LIST_CLASS;\n\t\tdropdownMenu.appendChild(dropdownList);\n\t\troot.appendChild(dropdownMenu);\n\t}\n\n\tfunction close() {\n\t\tif (!open) return;\n\t\topen = false;\n\t\tif (dropdownMenu) dropdownMenu.hidden = true;\n\t\tconst btn = moreLi?.querySelector(\"button\");\n\t\tbtn?.setAttribute(\"aria-expanded\", \"false\");\n\t}\n\tfunction openMenu() {\n\t\tif (open) return;\n\t\topen = true;\n\t\tif (dropdownMenu) dropdownMenu.hidden = false;\n\t\tconst btn = moreLi?.querySelector(\"button\");\n\t\tbtn?.setAttribute(\"aria-expanded\", \"true\");\n\t}\n\tfunction toggle() {\n\t\topen ? close() : openMenu();\n\t}\n\n\tfunction cloneToDropdown(li: HTMLLIElement) {\n\t\tconst clone = li.cloneNode(true) as HTMLLIElement;\n\t\tclone.className = clone.className\n\t\t\t.replace(\n\t\t\t\t\"nhsuk-header__navigation-item--current\",\n\t\t\t\t\"nhsuk-header__dropdown-item--current\"\n\t\t\t)\n\t\t\t.replace(\"nhsuk-header__navigation-item\", \"nhsuk-header__dropdown-item\");\n\t\tconst link = clone.querySelector(\"a\");\n\t\tif (link) link.className = \"nhsuk-header__dropdown-link\";\n\t\treturn clone;\n\t}\n\n\tfunction measureWidths(): number[] {\n\t\tconst measureUl = document.createElement(\"ul\");\n\t\tmeasureUl.className = \"nhsuk-header__navigation-list\";\n\t\tmeasureUl.style.cssText =\n\t\t\t\"position:absolute;visibility:hidden;left:-9999px;top:0;display:flex;flex-wrap:nowrap;\";\n\t\tmeasureUl.innerHTML = originalItemsHTML.join(\"\");\n\t\tdocument.body.appendChild(measureUl);\n\t\tconst w = Array.from(measureUl.children).map(\n\t\t\t(li) => (li as HTMLElement).offsetWidth\n\t\t);\n\t\tdocument.body.removeChild(measureUl);\n\t\treturn w;\n\t}\n\n\tfunction distribute() {\n\t\tclose();\n\t\tif (!navList) return;\n\t\troot.dataset.headerDistStart = String(Date.now());\n\t\tconst widths = measureWidths();\n\t\troot.dataset.headerLastCalc = root.dataset.headerDistStart;\n\t\tif (!widths.length) return;\n\t\tif (!navContainer) return; // safety\n\t\tconst containerWidth = navContainer.offsetWidth;\n\t\tif (containerWidth <= 0) return;\n\n\t\tconst mobile = window.innerWidth < 768;\n\t\tconst gutterSize = mobile ? 16 : 32;\n\t\tconst availableContainerWidth = containerWidth - gutterSize * 2;\n\t\tconst moreButtonReserve = mobile ? 72 : 100;\n\n\t\tnavList.innerHTML = \"\";\n\t\tnavList.style.display = \"flex\";\n\t\tnavList.style.flexWrap = \"nowrap\";\n\t\tif (dropdownMenu) {\n\t\t\tdropdownMenu.hidden = true;\n\t\t\tdropdownList!.innerHTML = \"\";\n\t\t}\n\n\t\t// Restore original items for baseline (so width comparisons are accurate)\n\t\tnavList.innerHTML = originalItemsHTML.join(\"\");\n\t\tconst realScrollWidth = navList.scrollWidth;\n\t\troot.dataset.headerRealScroll = String(realScrollWidth);\n\t\troot.dataset.headerAvail = String(availableContainerWidth);\n\t\tconst fits = realScrollWidth <= availableContainerWidth - 4;\n\t\t// console.log(\"[headerBehaviour] distribute:measure\", {\n\t\t// \tmobile,\n\t\t// \titemCount: widths.length,\n\t\t// \tcontainerWidth,\n\t\t// \tavailableContainerWidth,\n\t\t// \trealScrollWidth,\n\t\t// \tfits,\n\t\t// \ttotalWidth,\n\t\t// });\n\t\tif (fits) {\n\t\t\tif (dropdownMenu) {\n\t\t\t\tdropdownMenu.remove();\n\t\t\t\tdropdownMenu = null;\n\t\t\t\tdropdownList = null;\n\t\t\t}\n\t\t\troot.dataset.headerOverflow = \"none\";\n\t\t\treturn;\n\t\t}\n\n\t\tbuildMore();\n\t\tensureDropdown();\n\t\tconst availableForItems = availableContainerWidth - moreButtonReserve;\n\t\tlet running = 0;\n\t\tlet fitCount = 0;\n\t\tfor (let i = 0; i < widths.length; i++) {\n\t\t\tif (running + widths[i] <= availableForItems) {\n\t\t\t\trunning += widths[i];\n\t\t\t\tfitCount = i + 1;\n\t\t\t} else break;\n\t\t}\n\t\t// If all items fit even after reserving space for the potential More button, don't show it.\n\t\tif (fitCount === widths.length) {\n\t\t\t// Clean up any previous dropdown/more button artifacts\n\t\t\tif (dropdownMenu) {\n\t\t\t\tdropdownMenu.remove();\n\t\t\t\tdropdownMenu = null;\n\t\t\t\tdropdownList = null;\n\t\t\t}\n\t\t\tmoreLi = null; // allow rebuild later if needed\n\t\t\tnavList.innerHTML = originalItemsHTML.join(\"\");\n\t\t\troot.dataset.headerOverflow = \"none\";\n\t\t\troot.classList.remove(\"nhsuk-header--nav-overflow-active\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure at least one item stays visible when overflow occurs\n\t\tfitCount = Math.max(1, fitCount);\n\t\tnavList.innerHTML = \"\";\n\t\tfor (let i = 0; i < fitCount; i++) {\n\t\t\tnavList.insertAdjacentHTML(\"beforeend\", originalItemsHTML[i]);\n\t\t}\n\t\tnavList.appendChild(moreLi!);\n\t\tfor (let i = fitCount; i < originalItemsHTML.length; i++) {\n\t\t\tconst temp = document.createElement(\"div\");\n\t\t\ttemp.innerHTML = originalItemsHTML[i];\n\t\t\tconst li = temp.firstElementChild as HTMLLIElement | null;\n\t\t\tif (!li) continue;\n\t\t\tdropdownList!.appendChild(cloneToDropdown(li));\n\t\t}\n\t\tconst postScroll = navList.scrollWidth;\n\t\troot.dataset.headerPostScroll = String(postScroll);\n\t\troot.dataset.headerOverflow = \"active\";\n\t\troot.classList.add(\"nhsuk-header--nav-overflow-active\");\n\t}\n\n\t// Observe external (React) re-renders that replace the navigation list contents and re-apply overflow.\n\tlet internalMutation = false;\n\tconst observer = new MutationObserver((mutations) => {\n\t\tif (internalMutation) return;\n\t\tif (mutations.some((m) => m.type === \"childList\")) {\n\t\t\tconst currentItems = Array.from(\n\t\t\t\tnavList.querySelectorAll<HTMLLIElement>(NAV_ITEM_SELECTOR)\n\t\t\t);\n\t\t\tif (\n\t\t\t\tcurrentItems.length &&\n\t\t\t\tcurrentItems.length !== originalItemsHTML.length\n\t\t\t) {\n\t\t\t\toriginalItemsHTML = currentItems.map((li) => li.outerHTML);\n\t\t\t}\n\t\t\trequestAnimationFrame(guardedDistribute);\n\t\t}\n\t});\n\tobserver.observe(navList, { childList: true });\n\n\tfunction guardedDistribute() {\n\t\tinternalMutation = true;\n\t\ttry {\n\t\t\tdistribute();\n\t\t} finally {\n\t\t\tsetTimeout(() => {\n\t\t\t\tinternalMutation = false;\n\t\t\t}, 0);\n\t\t}\n\t}\n\tconst handleKey = (e: KeyboardEvent) => {\n\t\tif (e.key === \"Escape\") close();\n\t};\n\tconst handleDocClick = (e: MouseEvent) => {\n\t\tif (open && !root.contains(e.target as Node)) close();\n\t};\n\tconst handleResize = debounce(guardedDistribute, 150);\n\twindow.addEventListener(\"resize\", handleResize);\n\twindow.addEventListener(\"orientationchange\", handleResize);\n\tdocument.addEventListener(\"keydown\", handleKey);\n\tdocument.addEventListener(\"mousedown\", handleDocClick);\n\trequestAnimationFrame(guardedDistribute);\n\n\tconst instance: HeaderBehaviourInstance = {\n\t\troot,\n\t\tdestroy() {\n\t\t\twindow.removeEventListener(\"resize\", handleResize);\n\t\t\twindow.removeEventListener(\"orientationchange\", handleResize);\n\t\t\tdocument.removeEventListener(\"keydown\", handleKey);\n\t\t\tdocument.removeEventListener(\"mousedown\", handleDocClick);\n\t\t\tobserver.disconnect();\n\t\t\tclose();\n\t\t},\n\t};\n\troot.classList.add(\"nhsuk-header--enhanced\");\n\t(root as any)._nhsHeaderInstance = instance;\n\treturn instance;\n}\n","/**\n * Skip link progressive enhancement behaviour.\n * Attaches a click handler to focus target content and provide temporary focus styles.\n * Safe to import in the browser; no SSR side effects.\n */\nexport function initSkipLinks(scope: ParentNode = document) {\n  if (typeof window === 'undefined' || typeof document === 'undefined') return;\n\n  const handleSkipLinkClick = (event: Event) => {\n    const target = event.currentTarget as HTMLAnchorElement;\n    const targetId = target.getAttribute('href');\n    if (!targetId || !targetId.startsWith('#')) return;\n\n    const targetElement = document.querySelector(targetId);\n    if (!targetElement) return;\n\n    // Ensure focusability\n    const hadTabIndex = targetElement.hasAttribute('tabindex');\n    if (!hadTabIndex) targetElement.setAttribute('tabindex', '-1');\n\n    (targetElement as HTMLElement).focus();\n    targetElement.classList.add('nhsuk-skip-link-focused-element');\n\n    const timeoutId = window.setTimeout(() => {\n      targetElement.classList.remove('nhsuk-skip-link-focused-element');\n      if (!hadTabIndex && targetElement.getAttribute('tabindex') === '-1') {\n        targetElement.removeAttribute('tabindex');\n      }\n    }, 3000);\n\n  // @ts-ignore - attach for cleanup on the element instance\n    (target as any).__nhsSkipLinkTimeout = timeoutId;\n  };\n\n  const links = scope.querySelectorAll('.nhsuk-skip-link');\n  links.forEach((link) => {\n    const el = link as HTMLElement & { __nhsSkipLinkHandler?: (e: Event) => void };\n    // Avoid double-binding if init called multiple times\n    if (!el.__nhsSkipLinkHandler) {\n      el.addEventListener('click', handleSkipLinkClick);\n      el.__nhsSkipLinkHandler = handleSkipLinkClick;\n    }\n    el.setAttribute('data-enhanced', 'true');\n  });\n}\n\nexport function detachSkipLinks(scope: ParentNode = document) {\n  if (typeof window === 'undefined' || typeof document === 'undefined') return;\n  const links = scope.querySelectorAll('.nhsuk-skip-link');\n  links.forEach((link) => {\n    const el = link as HTMLElement & {\n      __nhsSkipLinkTimeout?: number;\n      __nhsSkipLinkHandler?: (e: Event) => void;\n    };\n    const timeoutId = el.__nhsSkipLinkTimeout;\n    if (timeoutId && window.clearTimeout) window.clearTimeout(timeoutId);\n    if (el.__nhsSkipLinkHandler) {\n      el.removeEventListener('click', el.__nhsSkipLinkHandler);\n      delete el.__nhsSkipLinkHandler;\n    }\n    el.removeAttribute('data-enhanced');\n  });\n}\n","// Behaviour layer aggregate exports\n// Additional behaviours should be registered here for initAll()\nexport {\n\tcreateButtonBehaviour,\n\tinitButtons,\n\tdetachButtons,\n} from \"./buttonBehaviour.js\";\nexport { initRadios, detachRadios } from \"./radiosBehaviour.js\";\nexport { initRanges, detachRanges } from \"./rangeBehaviour.js\";\nexport {\n\tinitCharacterCounts,\n\tdetachCharacterCounts,\n} from \"./characterCountBehaviour.js\";\nexport { initCheckboxes, detachCheckboxes } from \"./checkboxesBehaviour.js\";\nexport { initHeaders, detachHeaders } from \"./headerBehaviour.js\";\nexport { initSkipLinks, detachSkipLinks } from \"./skipLinkBehaviour.js\";\n\nimport { initButtons, detachButtons } from \"./buttonBehaviour.js\";\nimport { initRadios, detachRadios } from \"./radiosBehaviour.js\";\nimport { initRanges, detachRanges } from \"./rangeBehaviour.js\";\nimport {\n\tinitCharacterCounts,\n\tdetachCharacterCounts,\n} from \"./characterCountBehaviour.js\";\nimport { initCheckboxes, detachCheckboxes } from \"./checkboxesBehaviour.js\";\nimport { initHeaders, detachHeaders } from \"./headerBehaviour.js\";\nimport { initSkipLinks, detachSkipLinks } from \"./skipLinkBehaviour.js\";\n\nexport function initAll(scope: ParentNode = document) {\n\tinitButtons(scope);\n\tinitRadios(scope);\n\tinitRanges(scope);\n\tinitCharacterCounts(scope);\n\tinitCheckboxes(scope);\n\tinitHeaders(scope);\n\tinitSkipLinks(scope);\n\t// Future: conditional reveals generalisation util.\n}\n\nexport function teardownAll(scope: ParentNode = document) {\n\tdetachButtons(scope);\n\tdetachRadios(scope);\n\tdetachRanges(scope);\n\tdetachCharacterCounts(scope);\n\tdetachCheckboxes(scope);\n\tdetachHeaders(scope);\n\tdetachSkipLinks(scope);\n}\n\n// Auto init hook (opt-in via data attribute in future if needed)\nif (typeof window !== \"undefined\") {\n\t// @ts-ignore\n\tif (!window.__nhsInitAllBehaviours) {\n\t\t// @ts-ignore\n\t\twindow.__nhsInitAllBehaviours = initAll;\n\t\t// @ts-ignore\n\t\twindow.__nhsTeardownAllBehaviours = teardownAll;\n\t\t// Auto run after DOM ready\n\t\tif (document.readyState === \"loading\") {\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", () => initAll());\n\t\t} else {\n\t\t\tinitAll();\n\t\t}\n\t}\n}\n"],"names":["createButtonBehaviour","options","el","preventDoubleClick","onClick","processingTimeout","handleClick","e","handleKeyDown","element","initButtons","scope","node","n","behaviour","detachButtons","attachConditionalReveals","cfg","inputs","update","i","cond","show","handleChange","enhanceRadiosContainer","container","name","enabled","current","nextIndex","next","conditionalHandles","initRadios","c","detachRadios","enhanceRangeInput","input","currentValueEl","val","listener","initRanges","inp","detachRanges","enhanceCharacterCount","root","textarea","message","maxLength","maxWords","threshold","limit","unit","unitPlural","countValue","t","text","remaining","thresholdCount","showCount","isOver","msg","over","handler","initCharacterCounts","r","detachCharacterCounts","enhance","initCheckboxes","g","detachCheckboxes","HEADER_SELECTOR","NAV_CONTAINER_SELECTOR","NAV_LIST_SELECTOR","DROPDOWN_MENU_CLASS","DROPDOWN_LIST_CLASS","MORE_ITEM_CLASS","NAV_ITEM_SELECTOR","DEBOUNCE_MS","debounce","fn","wait","args","initHeaders","enhanceHeader","detachHeaders","h","navContainer","navList","serverDropdown","list","items","li","link","originalItemsHTML","moreLi","dropdownMenu","dropdownList","open","buildMore","btn","toggle","ensureDropdown","close","openMenu","cloneToDropdown","clone","measureWidths","measureUl","w","distribute","widths","containerWidth","mobile","availableContainerWidth","moreButtonReserve","realScrollWidth","availableForItems","running","fitCount","temp","postScroll","internalMutation","observer","mutations","m","currentItems","guardedDistribute","handleKey","handleDocClick","handleResize","instance","initSkipLinks","handleSkipLinkClick","event","target","targetId","targetElement","hadTabIndex","timeoutId","detachSkipLinks","initAll","teardownAll"],"mappings":"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"}