(function(x,E){typeof exports=="object"&&typeof module<"u"?E(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],E):(x=typeof globalThis<"u"?globalThis:x||self,E(x.NHSFDPDesignSystem={},x.React,x.ReactDOM))})(this,(function(x,E,hb){"use strict";function mb(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const K=mb(E);function pb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Oa={exports:{}},ki={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu;function gb(){if(mu)return ki;mu=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:s,ref:i!==void 0?i:null,props:a}}return ki.Fragment=t,ki.jsx=n,ki.jsxs=n,ki}var Ti={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pu;function bb(){return pu||(pu=1,process.env.NODE_ENV!=="production"&&(function(){function e(H){if(H==null)return null;if(typeof H=="function")return H.$$typeof===P?null:H.displayName||H.name||null;if(typeof H=="string")return H;switch(H){case h:return"Fragment";case b:return"Profiler";case g:return"StrictMode";case v:return"Suspense";case j:return"SuspenseList";case _:return"Activity"}if(typeof H=="object")switch(typeof H.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),H.$$typeof){case y:return"Portal";case T:return(H.displayName||"Context")+".Provider";case w:return(H._context.displayName||"Context")+".Consumer";case S:var U=H.render;return H=H.displayName,H||(H=U.displayName||U.name||"",H=H!==""?"ForwardRef("+H+")":"ForwardRef"),H;case N:return U=H.displayName||null,U!==null?U:e(H.type)||"Memo";case M:U=H._payload,H=H._init;try{return e(H(U))}catch{}}return null}function t(H){return""+H}function n(H){try{t(H);var U=!1}catch{U=!0}if(U){U=console;var z=U.error,ie=typeof Symbol=="function"&&Symbol.toStringTag&&H[Symbol.toStringTag]||H.constructor.name||"Object";return z.call(U,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",ie),t(H)}}function r(H){if(H===h)return"<>";if(typeof H=="object"&&H!==null&&H.$$typeof===M)return"<...>";try{var U=e(H);return U?"<"+U+">":"<...>"}catch{return"<...>"}}function i(){var H=k.A;return H===null?null:H.getOwner()}function a(){return Error("react-stack-top-frame")}function s(H){if(C.call(H,"key")){var U=Object.getOwnPropertyDescriptor(H,"key").get;if(U&&U.isReactWarning)return!1}return H.key!==void 0}function l(H,U){function z(){F||(F=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",U))}z.isReactWarning=!0,Object.defineProperty(H,"key",{get:z,configurable:!0})}function u(){var H=e(this.type);return I[H]||(I[H]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),H=this.props.ref,H!==void 0?H:null}function c(H,U,z,ie,W,le,je,de){return z=le.ref,H={$$typeof:p,type:H,key:U,props:le,_owner:W},(z!==void 0?z:null)!==null?Object.defineProperty(H,"ref",{enumerable:!1,get:u}):Object.defineProperty(H,"ref",{enumerable:!1,value:null}),H._store={},Object.defineProperty(H._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(H,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(H,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:je}),Object.defineProperty(H,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:de}),Object.freeze&&(Object.freeze(H.props),Object.freeze(H)),H}function d(H,U,z,ie,W,le,je,de){var fe=U.children;if(fe!==void 0)if(ie)if(L(fe)){for(ie=0;ie<fe.length;ie++)f(fe[ie]);Object.freeze&&Object.freeze(fe)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(fe);if(C.call(U,"key")){fe=e(H);var Q=Object.keys(U).filter(function(he){return he!=="key"});ie=0<Q.length?"{key: someKey, "+Q.join(": ..., ")+": ...}":"{key: someKey}",Y[fe+ie]||(Q=0<Q.length?"{"+Q.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ie,fe,Q,fe),Y[fe+ie]=!0)}if(fe=null,z!==void 0&&(n(z),fe=""+z),s(U)&&(n(U.key),fe=""+U.key),"key"in U){z={};for(var ae in U)ae!=="key"&&(z[ae]=U[ae])}else z=U;return fe&&l(z,typeof H=="function"?H.displayName||H.name||"Unknown":H),c(H,fe,le,W,i(),z,je,de)}function f(H){typeof H=="object"&&H!==null&&H.$$typeof===p&&H._store&&(H._store.validated=1)}var m=E,p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),T=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),P=Symbol.for("react.client.reference"),k=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,C=Object.prototype.hasOwnProperty,L=Array.isArray,D=console.createTask?console.createTask:function(){return null};m={react_stack_bottom_frame:function(H){return H()}};var F,I={},$=m.react_stack_bottom_frame.bind(m,a)(),ee=D(r(a)),Y={};Ti.Fragment=h,Ti.jsx=function(H,U,z,ie,W){var le=1e4>k.recentlyCreatedOwnerStacks++;return d(H,U,z,!1,ie,W,le?Error("react-stack-top-frame"):$,le?D(r(H)):ee)},Ti.jsxs=function(H,U,z,ie,W){var le=1e4>k.recentlyCreatedOwnerStacks++;return d(H,U,z,!0,ie,W,le?Error("react-stack-top-frame"):$,le?D(r(H)):ee)}})()),Ti}var gu;function yb(){return gu||(gu=1,process.env.NODE_ENV==="production"?Oa.exports=gb():Oa.exports=bb()),Oa.exports}var o=yb(),mo={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var bu;function vb(){return bu||(bu=1,(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var a="",s=0;s<arguments.length;s++){var l=arguments[s];l&&(a=i(a,r(l)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var s="";for(var l in a)t.call(a,l)&&a[l]&&(s=i(s,l));return s}function i(a,s){return s?a?a+" "+s:a+s:a}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(mo)),mo.exports}var _b=vb();const xe=pb(_b),xb=({text:e,href:t,openInNewWindow:n=!1,className:r,...i})=>{const a=xe("nhsuk-action-link__link",r);return o.jsx("div",{className:"nhsuk-action-link",children:o.jsxs("a",{className:a,href:t,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,...i,children:[o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right-circle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"36",height:"36",children:[o.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),o.jsx("path",{d:"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"})]}),o.jsx("span",{className:"nhsuk-action-link__text",children:e})]})})},po=({ariaLabel:e="Account",items:t=[],className:n,variant:r="default"})=>{if(!t||t.length===0)return null;const i=a=>{const s=a.icon?o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__user",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",role:"img","aria-label":a.icon===!0?"User":void 0,children:o.jsx("path",{d:"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z"})}):null,l=a.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:a.html}}):a.text,u=o.jsxs(o.Fragment,{children:[s,l]});return a.href?o.jsx("a",{className:"nhsuk-account__link nhsuk-header__account-link",href:a.href,children:u}):a.action?o.jsx("form",{className:"nhsuk-account__form",action:a.action,method:a.method||"post",children:o.jsx("button",{className:"nhsuk-account__button",type:"submit",role:"button",children:u})}):o.jsx("span",{children:u})};return o.jsx("nav",{className:xe("nhsuk-account",{"nhsuk-account--white":r==="white"},n),"aria-label":e,children:o.jsx("ul",{className:"nhsuk-account__list",children:t.map((a,s)=>a&&o.jsx("li",{className:xe("nhsuk-account__item nhsuk-header__account-item",a.className),children:i(a)},s))})})};var go=(e=>(e.Primary="primary",e.Secondary="secondary",e.Reverse="reverse",e.Warning="warning",e.Login="login",e.Metric="metric",e))(go||{}),bo=(e=>(e.Small="small",e.Default="default",e.Large="large",e))(bo||{});function wb(e){const t=e.variant||"primary",n=e.size||"default",r=!!e.fullWidth,i=["nhs-aria-button",`nhs-aria-button--${t}`,n!=="default"?`nhs-aria-button--${n}`:"",r?"nhs-aria-button--full-width":"",e.className||""].filter(Boolean).join(" ");return{tag:e.href?"a":"button",classes:i,data:{module:"nhs-button"},attrs:e.href?{href:e.href,role:"button"}:{type:"button"},preventDoubleClick:!!e.preventDoubleClick}}const{forwardRef:Sb,useCallback:er,useState:yo}=K;function Cb(e,t){const{children:n,variant:r=go.Primary,size:i=bo.Default,fullWidth:a=!1,className:s="",preventDoubleClick:l=!1,...u}=e,[c,d]=yo(!1),[f,m]=yo(!1),[p,y]=yo(!1),h=wb({variant:r,size:i,fullWidth:a,className:s,preventDoubleClick:l,href:"href"in u?u.href:void 0}),g="disabled"in u?u.disabled:u["aria-disabled"]==="true",b={...c&&{"data-pressed":"true"},...f&&{"data-hovered":"true"},...p&&{"data-focused":"true"},...g&&{"data-disabled":"true"}},w=er(()=>!g&&d(!0),[g]),T=er(()=>d(!1),[]),S=er(()=>!g&&m(!0),[g]),v=er(()=>{m(!1),d(!1)},[]),j=er(()=>y(!0),[]),N=er(()=>y(!1),[]),M=er(fe=>{fe.key===" "&&("href"in u||fe.currentTarget.getAttribute("role")==="button")&&(fe.preventDefault(),fe.currentTarget.click())},[u]),_=er(fe=>{if(l){const Q=fe.currentTarget;if(Q.getAttribute("data-processing")==="true"){fe.preventDefault();return}Q.setAttribute("data-processing","true"),setTimeout(()=>{Q.removeAttribute("data-processing")},1e3)}},[l]);if("href"in u&&u.href){const{id:fe,style:Q,title:ae,["aria-label"]:he,["aria-describedby"]:q,["aria-labelledby"]:me,tabIndex:ce,...B}=u,R=u;return o.jsx("a",{ref:t,href:R.href,target:R.target,rel:R.rel,className:h.classes,role:"button",draggable:"false","data-module":"nhs-button",...b,...l&&{"data-prevent-double-click":"true"},...B,onKeyDown:ne=>{R.onKeyDown?.(ne),M(ne)},onClick:ne=>{R.onClick?.(ne),_(ne)},onMouseDown:ne=>{R.onMouseDown?.(ne),w()},onMouseUp:ne=>{R.onMouseUp?.(ne),T()},onMouseEnter:ne=>{R.onMouseEnter?.(ne),S()},onMouseLeave:ne=>{R.onMouseLeave?.(ne),v()},onFocus:ne=>{R.onFocus?.(ne),j()},onBlur:ne=>{R.onBlur?.(ne),N()},"aria-disabled":R["aria-disabled"],...R["aria-disabled"]==="true"&&{tabIndex:-1},id:fe,style:Q,title:ae,"aria-label":he,"aria-describedby":q,"aria-labelledby":me,tabIndex:ce,children:n})}const{id:P,style:k,title:C,["aria-label"]:L,["aria-describedby"]:D,["aria-labelledby"]:F,tabIndex:I,name:$,value:ee,form:Y,formAction:H,formEncType:U,formMethod:z,formNoValidate:ie,formTarget:W,autoFocus:le,...je}=u,de=u;return o.jsx("button",{ref:t,type:de.type||"button",disabled:de.disabled,className:h.classes,"data-module":"nhs-button",...b,...l&&{"data-prevent-double-click":"true"},...de.disabled&&{"aria-disabled":"true"},...je,onKeyDown:fe=>{de.onKeyDown?.(fe),M(fe)},onClick:fe=>{de.onClick?.(fe),_(fe)},onMouseDown:fe=>{de.onMouseDown?.(fe),w()},onMouseUp:fe=>{de.onMouseUp?.(fe),T()},onMouseEnter:fe=>{de.onMouseEnter?.(fe),S()},onMouseLeave:fe=>{de.onMouseLeave?.(fe),v()},onFocus:fe=>{de.onFocus?.(fe),j()},onBlur:fe=>{de.onBlur?.(fe),N()},id:P,style:k,title:C,"aria-label":L,"aria-describedby":D,"aria-labelledby":F,tabIndex:I,name:$,value:ee,form:Y,formAction:H,formEncType:U,formMethod:z,formNoValidate:ie,formTarget:W,autoFocus:le,children:n})}const xt=Sb(Cb);xt.displayName="Button";const Ra=({text:e="Back",html:t,href:n="#",className:r,element:i="a",onClick:a,...s})=>{const l=xe("nhsuk-back-link",r),u=xe("nhsuk-back-link__link"),c=()=>o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:o.jsx("path",{d:"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"})}),t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e]});return o.jsx("div",{className:l,children:i==="button"?o.jsx("button",{className:u,onClick:a,type:"button",...s,children:c()}):o.jsx("a",{className:u,href:n,...s,children:c()})})};function kb(e){const{color:t="default",noBorder:n,closable:r,disabled:i,className:a}=e;return{classes:["nhsuk-tag",t!=="default"?`nhsuk-tag--${t}`:"",n?"nhsuk-tag--no-border":"",r?"nhsuk-tag--closable":"",i?"nhsuk-tag--disabled":"",a||""].filter(Boolean).join(" "),showClose:!!r,disabled:!!i}}const Ye=({text:e,html:t,children:n,color:r="default",noBorder:i=!1,closable:a=!1,onClose:s,disabled:l=!1,className:u,...c})=>{const d=kb({color:r,noBorder:i,closable:a,disabled:l,className:u}),f=m=>{m.preventDefault(),m.stopPropagation(),!l&&s&&s()};return o.jsxs("strong",{className:d.classes,...c,children:[n||(t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e),a&&o.jsx("button",{type:"button",className:"nhsuk-tag__close",onClick:f,disabled:l,"aria-label":"Remove",title:"Remove",children:"Ã—"})]})},yu=({id:e,name:t,checked:n,defaultChecked:r=!1,disabled:i=!1,value:a="true",hint:s,errorMessage:l,className:u,children:c,onChange:d,onBlur:f,onFocus:m,attributes:p,...y})=>{const[h,g]=E.useState(r),b=n!==void 0,w=b?n:h;E.useEffect(()=>{b||g(r)},[r,b]);const T=M=>{const _=M.target.checked;b||g(_),d?.(_,M)},S=s?`${e}-hint`:void 0,v=l?`${e}-error`:void 0,j=[S,v].filter(Boolean).join(" ")||void 0,N=xe("nhsuk-form-group",{"nhsuk-form-group--error":!!l},u);return o.jsx("div",{className:N,...y,children:o.jsx("div",{className:"nhsuk-checkboxes",children:o.jsxs("div",{className:"nhsuk-checkboxes__item",children:[o.jsx("input",{className:"nhsuk-checkboxes__input",id:e,name:t||e,type:"checkbox",value:a,checked:w,disabled:i,onChange:T,onBlur:f,onFocus:m,"aria-describedby":j,...p}),o.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:e,children:c}),s&&o.jsx("div",{id:S,className:"nhsuk-checkboxes__hint",children:s}),l&&o.jsxs("div",{id:v,className:"nhsuk-error-message nhsuk-checkboxes__error",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]})]})})})};yu.displayName="Checkbox";function vu(e){const n=(e.type||"text")==="range";return{classes:["nhsuk-input",e.hasError?"nhsuk-input--error":"",n?"nhsuk-input--range":"",!n&&e.width&&e.width!=="full"?`nhsuk-input--width-${e.width}`:"",e.className||""].filter(Boolean).join(" "),isRange:n}}const Ha=({id:e,name:t,type:n="text",value:r,defaultValue:i,placeholder:a,disabled:s=!1,readOnly:l=!1,required:u=!1,hasError:c=!1,describedBy:d,className:f,width:m="full",inputMode:p,autoComplete:y,maxLength:h,minLength:g,pattern:b,step:w,min:T,max:S,showValueLabels:v=!1,showCurrentValue:j=!1,valueLabels:N,onChange:M,onBlur:_,onFocus:P,onKeyDown:k,...C})=>{const[L,D]=E.useState(r||i||(n==="range"?T||"0":""));E.useEffect(()=>{r!==void 0&&D(r)},[r]);const F=W=>{const le=W.target;D(le.value),("type"in W&&W.nativeEvent||W.type==="keydown")&&M?.(W)},{classes:I,isRange:$}=vu({type:n,hasError:c,width:m,className:f}),ee=r!==void 0,Y={id:e,name:t,type:n,placeholder:a,disabled:s,readOnly:l,required:u,"aria-describedby":d,inputMode:p,autoComplete:y,maxLength:h,minLength:g,pattern:b,step:w,min:T,max:S,onChange:F,onBlur:_,onFocus:P,onKeyDown:W=>{if($&&/[0-9]/.test(W.key)){const le=(L?.toString()||"")+W.key;W.target.value=le,F(W)}k?.(W)},...C},H=!ee&&i!==void 0?{defaultValue:i}:{},U=ee?{value:r}:{},z=()=>o.jsx("input",{className:I,...U,...H,"data-current-value":L,...Y}),ie=$?o.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[v&&o.jsxs("div",{className:"nhsuk-input-range-labels",children:[o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:N?.min||T||"0"}),z(),o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:N?.max||S||"100"})]}),!v&&z(),j&&o.jsx("div",{className:"nhsuk-input-range-current-value",children:o.jsxs("span",{className:"nhsuk-input-range-current-label",children:[N?.current||"Current value:"," ",o.jsx("strong",{children:L})]})})]}):null;return $?ie:o.jsx("input",{className:I,id:e,name:t,type:n,value:r,...r===void 0&&i!==void 0?{defaultValue:i}:{},placeholder:a,disabled:s,readOnly:l,required:u,"aria-describedby":d,inputMode:p,autoComplete:y,maxLength:h,minLength:g,pattern:b,step:w,min:T,max:S,onChange:M,onBlur:_,onFocus:P,onKeyDown:k,...C})};function Tb(e){const t=e.size||"m",n=["nhsuk-label",t!=="m"?`nhsuk-label--${t}`:"",e.className||""].filter(Boolean).join(" ");return{tag:e.isPageHeading?"h1":"label",classes:n,size:t,htmlFor:e.isPageHeading?void 0:e.htmlFor,isPageHeading:!!e.isPageHeading}}const za=({htmlFor:e,className:t,isPageHeading:n=!1,size:r="m",children:i,...a})=>{const s=Tb({size:r,isPageHeading:n,className:t,htmlFor:e}),l=s.tag;return o.jsx(l,{className:s.classes,htmlFor:s.htmlFor,...a,children:n?o.jsx("label",{className:"nhsuk-label-wrapper",htmlFor:e,children:i}):i})};function Nb(e){const t=["nhsuk-fieldset",e.className||""].filter(Boolean).join(" "),n=e.legend?["nhsuk-fieldset__legend",e.legend.size?`nhsuk-fieldset__legend--${e.legend.size}`:"",e.legend.className||""].filter(Boolean).join(" "):void 0;return{fieldsetClasses:t,legendClasses:n,legendIsPageHeading:!!e.legend?.isPageHeading,describedBy:e.describedBy}}const Ua=({children:e,legend:t,className:n,describedBy:r,...i})=>{const a=Nb({className:n,describedBy:r,legend:t?{size:t.size,className:t.className,isPageHeading:t.isPageHeading}:void 0}),s=()=>{const l=t?.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:t.html}}):t?.text;return a.legendIsPageHeading?o.jsx("h1",{className:"nhsuk-fieldset__heading",children:l}):l};return o.jsxs("fieldset",{className:a.fieldsetClasses,"aria-describedby":a.describedBy,...i,children:[t&&(t.text||t.html)&&o.jsx("legend",{className:a.legendClasses,children:s()}),e]})};function jb(e){const t=["nhsuk-checkboxes",e.small?"nhsuk-checkboxes--small":"",e.className||""].filter(Boolean).join(" "),n=["nhsuk-form-group",e.hasError?"nhsuk-form-group--error":""].filter(Boolean).join(" ");return{classes:t,formGroupClasses:n}}const _u=({items:e,name:t,idPrefix:n,legend:r,isPageHeading:i=!1,legendSize:a="l",hint:s,errorMessage:l,className:u="",small:c=!1,onChange:d,fieldsetAttributes:f,attributes:m,...p})=>{const[y,h]=E.useState(e.filter(M=>M.checked).map(M=>M.value)),g=n||t,b=s?`${g}-hint`:void 0,w=l?`${g}-error`:void 0,T=[b,w].filter(Boolean).join(" ")||void 0,S=(M,_)=>{let P;_?P=[...y,M]:P=y.filter(k=>k!==M),h(P),d?.(P)},v=()=>e.map((M,_)=>{const P=`${g}-${_+1}`,k=`${P}-conditional`,C=y.includes(M.value),L=M.disabled||!1;return o.jsxs("div",{className:"nhsuk-checkboxes__item",children:[o.jsx("input",{className:"nhsuk-checkboxes__input",id:P,name:t,type:"checkbox",value:M.value,checked:C,disabled:L,onChange:D=>S(M.value,D.target.checked),"aria-describedby":M.hint?`${P}-hint`:T,...M.conditional&&{"aria-controls":k,"aria-expanded":C?"true":"false"},...M.attributes}),o.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:P,children:M.text}),M.hint&&o.jsx("div",{id:`${P}-hint`,className:"nhsuk-checkboxes__hint",children:M.hint}),M.conditional&&o.jsx("div",{className:xe("nhsuk-checkboxes__conditional",{"nhsuk-checkboxes__conditional--hidden":!C}),id:k,children:typeof M.conditional=="object"&&M.conditional!==null&&"label"in M.conditional&&"id"in M.conditional&&"name"in M.conditional?o.jsxs("div",{style:{marginTop:"16px"},children:[M.conditional.label&&o.jsx(za,{htmlFor:M.conditional.id,children:M.conditional.label}),o.jsx(Ha,{...M.conditional})]}):M.conditional})]},M.value)}),{classes:j,formGroupClasses:N}=jb({small:c,className:u,hasError:!!l});return o.jsx("div",{className:N,...m,...p,children:o.jsxs(Ua,{legend:r?{text:r,isPageHeading:i,size:a}:void 0,describedBy:T,...f,children:[s&&o.jsx("div",{id:b,className:"nhsuk-hint",children:s}),l&&o.jsxs("div",{id:w,className:"nhsuk-error-message",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]}),o.jsx("div",{className:j,children:v()})]})})};_u.displayName="Checkboxes";function Db(e){const t=e.resize??"vertical";return{classes:["nhsuk-textarea",e.hasError?"nhsuk-textarea--error":"",t!=="vertical"?`nhsuk-textarea--resize-${t}`:"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}const xu=({id:e,name:t,value:n,defaultValue:r,placeholder:i,disabled:a=!1,readOnly:s=!1,required:l=!1,hasError:u=!1,describedBy:c,className:d,rows:f=5,cols:m,maxLength:p,minLength:y,wrap:h="soft",resize:g="vertical",autoComplete:b,spellCheck:w,onChange:T,onBlur:S,onFocus:v,onKeyDown:j,...N})=>{const{classes:M,describedBy:_}=Db({hasError:u,resize:g,className:d,describedBy:c});return o.jsx("textarea",{className:M,id:e,name:t,value:n,defaultValue:r,placeholder:i,disabled:a,readOnly:s,required:l,"aria-describedby":_,rows:f,cols:m,maxLength:p,minLength:y,wrap:h,autoComplete:b,spellCheck:w,onChange:T,onBlur:S,onFocus:v,onKeyDown:j,...N})};function Mb(e){return{classes:["nhsuk-hint",e.className||""].filter(Boolean).join(" "),id:e.id}}const vo=({id:e,className:t,children:n,...r})=>{const i=Mb({id:e,className:t});return o.jsx("div",{className:i.classes,id:i.id,...r,children:n})},Pb=({id:e,maxLength:t,maxWords:n,threshold:r=75,name:i,value:a,defaultValue:s,rows:l,className:u,countMessage:c,onCountChange:d,onChange:f,...m})=>{const p=a??s??"",[y,h]=E.useState(p),[g,b]=E.useState(0),[w,T]=E.useState(!1),[S,v]=E.useState(!1),j=E.useCallback(C=>n?C.trim()===""?0:C.trim().split(/\s+/).length:C.length,[n]);E.useEffect(()=>{const C=j(y),L=t||n||0,D=L-C,F=Math.floor(L*(r/100));b(D),T(C>L),v(C>=F||C>L),d&&d(C,D)},[y,t,n,r,j,d]);const N=C=>{const L=C.target.value;h(L),f&&f(C)},M=()=>{const C=t||n||0,L=n?"word":"character",D=n?"words":"characters";if(!S)return`You can enter up to ${C} ${C===1?L:D}`;if(w){const F=Math.abs(g);return`You have ${F} ${F===1?L:D} too many`}else return`You have ${g} ${g===1?L:D} remaining`},_=xe("nhsuk-character-count",u),P=xe("nhsuk-character-count__message",{"nhsuk-character-count__message--disabled":!S,"nhsuk-error-message":w},c?.classes),k=xe("nhsuk-js-character-count",{"nhsuk-textarea--error":w});return o.jsxs("div",{className:_,"data-module":"nhsuk-character-count","data-maxlength":t,"data-maxwords":n,"data-threshold":r,"data-testid":"character-count",children:[o.jsx(xu,{id:e,name:i,value:a!==void 0?y:void 0,defaultValue:a===void 0?s??y:void 0,rows:l,className:k,onChange:N,"aria-describedby":`${e}-info`,"aria-invalid":w||void 0,...m}),o.jsx(vo,{id:`${e}-info`,className:P,role:"status","aria-live":"polite",children:M()})]})};function Ib(e){return{classes:["nhsuk-select",e.hasError?"nhsuk-select--error":"",e.className||""].filter(Boolean).join(" ")}}const wu=({value:e,disabled:t=!1,selected:n=!1,className:r,children:i,...a})=>{const s=xe("nhsuk-select__option",r);return o.jsx("option",{className:s,value:e,disabled:t,...a,children:i})},Ni=({id:e,name:t,ariaLabel:n,value:r,defaultValue:i,disabled:a=!1,required:s=!1,hasError:l=!1,describedBy:u,className:c,multiple:d=!1,size:f,autoComplete:m,options:p,children:y,onChange:h,onBlur:g,onFocus:b,...w})=>{const{classes:T}=Ib({hasError:l,className:c}),S=()=>p?p.map((j,N)=>o.jsx("option",{value:j.value,disabled:j.disabled,"data-initial-selected":j.selected||void 0,children:j.text},`${j.value}-${N}`)):null,v=i===void 0&&r===void 0&&p?p.find(j=>j.selected)?.value:void 0;return o.jsx("select",{className:T,id:e,name:t,"aria-label":n,value:r,defaultValue:i!==void 0?i:v,disabled:a,required:s,"aria-describedby":u,multiple:d,size:f,autoComplete:m,onChange:h,onBlur:g,onFocus:b,...w,children:y||S()})};Ni.Option=wu;function Fb(e){return{classes:["nhsuk-radios",e.hasError?"nhsuk-radios--error":"",e.size==="small"?"nhsuk-radios--small":"",e.inline?"nhsuk-radios--inline":"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}function Su(e,{variant:t,selectedValue:n,enableBehaviourAttr:r,handleChange:i,handleBlur:a,handleFocus:s,handleKeyDown:l,itemsRef:u,InputComponent:c}){const{onChange:d,onBlur:f,onFocus:m,...p}=e,{name:y,hasError:h=!1,describedBy:g,className:b,size:w="normal",inline:T=!1,options:S,...v}=p,{classes:j,describedBy:N}=Fb({hasError:h,size:w,inline:T,className:b,describedBy:g});return o.jsx(Ua,{children:o.jsx("div",{className:j,...v,...r?{"data-nhs-behaviour":"radios"}:{},children:S.map((M,_)=>{const P=`${y}-${_}`,k=M.conditional?`${P}-conditional`:void 0,C=n===M.value;return o.jsxs("div",{className:"nhsuk-radios__item",children:[o.jsx("input",{className:"nhsuk-radios__input",id:P,name:y,type:"radio",value:M.value,disabled:M.disabled,...t==="client"?{checked:C,onChange:i,onBlur:a,onFocus:s,onKeyDown:l,ref:L=>{L&&u&&(u.current[_]=L)}}:{defaultChecked:C,"data-nhs-radios-input":!0},"aria-describedby":N}),o.jsx("label",{className:"nhsuk-radios__label",htmlFor:P,children:M.text}),M.hint&&o.jsx("div",{className:"nhsuk-radios__hint",children:M.hint}),M.conditional&&o.jsx("div",{className:xe("nhsuk-radios__conditional",{"nhsuk-radios__conditional--hidden":!C}),id:k,...t==="server"?{"data-nhs-radios-conditional":!0}:{},children:typeof M.conditional=="object"&&M.conditional!==null&&"label"in M.conditional&&"id"in M.conditional&&"name"in M.conditional?o.jsxs("div",{style:{marginTop:"16px"},children:[M.conditional.label&&o.jsx(za,{htmlFor:M.conditional.id,children:M.conditional.label}),o.jsx(c,{...M.conditional})]}):M.conditional})]},M.value)})})})}const $b=({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:i,...a})=>{const[s,l]=E.useState(e||t||""),u=E.useRef([]),c=E.useRef(s),d=p=>{const y=p.target.value;y!==c.current&&(c.current=y,l(y),n?.(p))},f=p=>{i?.(p)},m=E.useCallback(p=>{const{key:y}=p;if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(y))return;p.preventDefault();const h=u.current.filter(T=>T&&!T.disabled),g=h.indexOf(p.currentTarget);if(g===-1)return;let b=g;["ArrowDown","ArrowRight"].includes(y)?b=(g+1)%h.length:["ArrowUp","ArrowLeft"].includes(y)&&(b=(g-1+h.length)%h.length);const w=h[b];w&&(w.focus(),w.checked||w.click())},[]);return Su({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:i,...a},{variant:"client",selectedValue:s,enableBehaviourAttr:!1,handleChange:d,handleBlur:r,handleFocus:f,handleKeyDown:m,itemsRef:u,InputComponent:Ha})};function Lb(e){const{id:t,name:n,type:r="text",value:i,defaultValue:a,placeholder:s,disabled:l=!1,readOnly:u=!1,required:c=!1,hasError:d=!1,describedBy:f,className:m,width:p="full",inputMode:y,autoComplete:h,maxLength:g,minLength:b,pattern:w,step:T,min:S,max:v,showValueLabels:j=!1,showCurrentValue:N=!1,valueLabels:M,onChange:_,onBlur:P,onFocus:k,onKeyDown:C,...L}=e,{classes:D,isRange:F}=vu({type:r,hasError:d,width:p,className:m}),I={id:t,name:n,type:r,placeholder:s,disabled:l,readOnly:u,required:c,"aria-describedby":f,inputMode:y,autoComplete:h,maxLength:g,minLength:b,pattern:w,step:T,min:S,max:v,...L};if(F){const $=i??a??(typeof S<"u"?String(S):"0"),ee=o.jsx("input",{className:D,...i!==void 0?{value:i}:{},...i===void 0&&a!==void 0?{defaultValue:a}:{},"data-current-value":$,...I});return o.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[j?o.jsxs("div",{className:"nhsuk-input-range-labels",children:[o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:M?.min||S||"0"}),ee,o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:M?.max||v||"100"})]}):ee,N&&o.jsx("div",{className:"nhsuk-input-range-current-value",children:o.jsxs("span",{className:"nhsuk-input-range-current-label",children:[M?.current||"Current value:"," ",o.jsx("strong",{children:$})]})})]})}return o.jsx("input",{className:D,...i!==void 0?{value:i}:{},...i===void 0&&a!==void 0?{defaultValue:a}:{},...I})}const Ab=({value:e,defaultValue:t,...n})=>{const r=e||t||"";return Su({value:e,defaultValue:t,...n},{variant:"server",selectedValue:r,enableBehaviourAttr:!0,InputComponent:Lb})};var tr=(e=>(e.OneQuarter="one-quarter",e.OneThird="one-third",e.OneHalf="one-half",e.TwoThirds="two-thirds",e.ThreeQuarters="three-quarters",e.Full="full",e))(tr||{}),Cu=(e=>(e.Mobile="mobile",e.Tablet="tablet",e.Desktop="desktop",e.LargeDesktop="large-desktop",e))(Cu||{}),ku=(e=>(e.Left="left",e.Right="right",e))(ku||{}),Tu=(e=>(e.Left="left",e.Center="center",e.Right="right",e))(Tu||{});const _o=({children:e,className:t,fluid:n=!1,maxWidth:r,style:i,...a})=>{const s=xe({"nhsuk-width-container":!n,"nhsuk-width-container-fluid":n},t),l=r?{maxWidth:r,...i||{}}:i;return o.jsx("div",{className:s,style:l,...a,children:e})},nr=({children:e,className:t,style:n,...r})=>{const i=xe("nhsuk-grid-row",t);return o.jsx("div",{className:i,style:n,...r,children:e})},Wr=({children:e,width:t=tr.Full,mobileWidth:n,tabletWidth:r,desktopWidth:i,start:a,className:s,forceWidth:l=!1,style:u,align:c,...d})=>{const f=xe({[`nhsuk-grid-column-${t}`]:!l,[`nhsuk-u-${t}`]:l,[`nhsuk-u-${n}-mobile`]:!!n,[`nhsuk-u-${r}-tablet`]:!!r,[`nhsuk-u-${i}-desktop`]:!!i,[`nhsuk-grid-column-start-${a}`]:a&&a>=1&&a<=7,...c?{[`nhsuk-grid-align-${c}`]:!0}:{}},s);return o.jsx("div",{className:f,style:u,...d,children:e})},Wa=({children:e,className:t,style:n,...r})=>{const a=E.Children.toArray(e)[0],s=E.isValidElement(a)&&(a.type===nr||typeof a.props=="object"&&a.props&&"className"in a.props&&typeof a.props.className=="string"&&a.props.className.includes("nhsuk-grid-row"));return o.jsx(_o,{className:t,style:n,...r,children:s?e:o.jsx(nr,{children:e})})},Eb=({children:e,type:t="bullet",size:n="medium",border:r=!1,className:i,role:a,as:s,...l})=>{const u=s||(t==="number"?"ol":"ul"),c=xe("nhsuk-list",{"nhsuk-list--bullet":t==="bullet","nhsuk-list--number":t==="number","nhsuk-list--none":t==="none","nhsuk-list--border":r,[`nhsuk-list--${n}`]:n!=="medium"},i);return o.jsx(u,{className:c,role:a,...l,children:e})},Bb=({children:e,className:t,...n})=>{const r=xe("nhsuk-list__item",t);return o.jsx("li",{className:r,...n,children:e})},Nu=Eb;Nu.Item=Bb;const Ob=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const i=["nhsuk-spacing-utilities",e&&"nhsuk-spacing-utilities--debug",t].filter(Boolean).join(" ");return o.jsx("div",{className:i,...r,children:n})},Rb={margin:e=>`nhsuk-u-margin-${e}`,marginTop:e=>`nhsuk-u-margin-top-${e}`,marginRight:e=>`nhsuk-u-margin-right-${e}`,marginBottom:e=>`nhsuk-u-margin-bottom-${e}`,marginLeft:e=>`nhsuk-u-margin-left-${e}`,padding:e=>`nhsuk-u-padding-${e}`,paddingTop:e=>`nhsuk-u-padding-top-${e}`,paddingRight:e=>`nhsuk-u-padding-right-${e}`,paddingBottom:e=>`nhsuk-u-padding-bottom-${e}`,paddingLeft:e=>`nhsuk-u-padding-left-${e}`,marginResponsive:e=>`nhsuk-u-margin-responsive-${e}`,marginTopResponsive:e=>`nhsuk-u-margin-top-responsive-${e}`,marginRightResponsive:e=>`nhsuk-u-margin-right-responsive-${e}`,marginBottomResponsive:e=>`nhsuk-u-margin-bottom-responsive-${e}`,marginLeftResponsive:e=>`nhsuk-u-margin-left-responsive-${e}`,paddingResponsive:e=>`nhsuk-u-padding-responsive-${e}`,paddingTopResponsive:e=>`nhsuk-u-padding-top-responsive-${e}`,paddingRightResponsive:e=>`nhsuk-u-padding-right-responsive-${e}`,paddingBottomResponsive:e=>`nhsuk-u-padding-bottom-responsive-${e}`,paddingLeftResponsive:e=>`nhsuk-u-padding-left-responsive-${e}`},Hb=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const i=["nhsuk-width-utilities",e&&"nhsuk-width-utilities--debug",t].filter(Boolean).join(" ");return o.jsx("div",{className:i,...r,children:n})},zb={width:e=>`nhsuk-u-width-${e}`,widthTablet:e=>`nhsuk-u-width-${e}-tablet`},Ub=["full","three-quarters","two-thirds","one-half","one-third","one-quarter"],xo=({as:e="main",size:t="default",className:n,children:r,...i})=>{const a=["nhsuk-main-wrapper",t==="large"&&"nhsuk-main-wrapper--l",t==="small"&&"nhsuk-main-wrapper--s",n].filter(Boolean).join(" ");return o.jsx(e,{className:a,...i,children:r})};function Wb(e){switch(e){case"xxl":case"xl":return 1;case"l":return 2;case"m":return 3;case"s":return 4;case"xs":return 5;default:return 2}}function Vb(e){const t=e.level??Wb(e.size),n=["nhsuk-heading",e.size?`nhsuk-heading--${e.size}`:"",e.className||""].filter(Boolean).join(" "),r=e.marginBottom?{marginBottom:e.marginBottom}:void 0;return{tag:`h${t}`,classes:n,style:r}}const yn=({level:e,className:t,text:n,html:r,children:i,size:a,marginBottom:s,...l})=>{const u=Vb({level:e,size:a,className:t,marginBottom:s}),c=i||(r?o.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n);return E.createElement(u.tag,{className:u.classes,style:u.style,...l},c)};function Gb(e){return{classes:["nhsuk-error-message",e.className||""].filter(Boolean).join(" "),id:e.id,visuallyHiddenText:e.visuallyHiddenText??"Error:"}}const wo=({id:e,className:t,visuallyHiddenText:n="Error:",children:r,...i})=>{const a=Gb({id:e,className:t,visuallyHiddenText:n});return o.jsxs("span",{className:a.classes,id:a.id,...i,children:[o.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[a.visuallyHiddenText," "]}),r]})},Yb=({titleText:e="There is a problem",titleHtml:t,descriptionText:n,descriptionHtml:r,errorList:i,className:a,children:s,...l})=>{const u=E.useRef(null);E.useEffect(()=>{u.current&&u.current.focus()},[]);const c=xe("nhsuk-error-summary",a),d=()=>t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,f=()=>r?o.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n,m=p=>{const y=p.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:p.html}}):p.text;return p.href?o.jsx("a",{href:p.href,...p.attributes,children:y}):y};return o.jsxs("div",{ref:u,className:c,"aria-labelledby":"error-summary-title",role:"alert",tabIndex:-1,"data-module":"nhsuk-error-summary",...l,children:[o.jsx("h2",{className:"nhsuk-error-summary__title",id:"error-summary-title",children:d()}),o.jsxs("div",{className:"nhsuk-error-summary__body",children:[s&&o.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:s}),!s&&(n||r)&&o.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:f()}),o.jsx("ul",{className:"nhsuk-list nhsuk-error-summary__list",role:"list",children:i.map((p,y)=>o.jsx("li",{children:m(p)},y))})]})]})},qb=({id:e,className:t,items:n,namePrefix:r,values:i={},fieldset:a,hint:s,errorMessage:l,onChange:u,...c})=>{const[d,f]=E.useState(()=>({day:i.day||"",month:i.month||"",year:i.year||""})),[m,p]=E.useState({}),y=F=>F%4===0&&F%100!==0||F%400===0,h=(F,I)=>{const $=[31,28,31,30,31,30,31,31,30,31,30,31];return F===2&&y(I)?29:$[F-1]},g=(F,I,$)=>{if(!F)return;if(!/^\d+$/.test(F))return"Day must be a number";const ee=parseInt(F,10);if(ee<1||ee>31)return"Day must be between 1 and 31";if(I&&$){const Y=parseInt(I,10),H=parseInt($,10);if(!isNaN(Y)&&!isNaN(H)&&Y>=1&&Y<=12){const U=h(Y,H);if(ee>U)return`${["January","February","March","April","May","June","July","August","September","October","November","December"][Y-1]} ${H} only has ${U} days`}}},b=F=>{if(!F)return;if(!/^\d+$/.test(F))return"Month must be a number";const I=parseInt(F,10);if(I<1||I>12)return"Month must be between 1 and 12"},w=F=>{if(!F)return;if(!/^\d+$/.test(F))return"Year must be a number";const I=parseInt(F,10),$=new Date().getFullYear();if(I<1900||I>$+10)return`Year must be between 1900 and ${$+10}`},T=(F,I,$)=>{if(!F||!I||!$)return;const ee=parseInt(F,10),Y=parseInt(I,10),H=parseInt($,10);if(isNaN(ee)||isNaN(Y)||isNaN(H)||Y<1||Y>12||H<1900)return;const U=h(Y,H);ee<1||ee>U},S=E.useCallback((F,I)=>{const $={...d,[F]:I};f($),u&&u($)},[d,u]),v=E.useCallback(F=>{const I=d[F];let $;if(F==="day")$=g(I,d.month,d.year);else if(F==="month"){if($=b(I),!$&&d.day){const ee=g(d.day,I,d.year);p(Y=>({...Y,day:ee}))}}else if(F==="year"&&($=w(I),!$&&d.day&&d.month)){const ee=g(d.day,d.month,I);p(Y=>({...Y,day:ee}))}if(p(ee=>({...ee,[F]:$})),d.day&&d.month&&d.year){const ee=T(F==="day"?I:d.day,F==="month"?I:d.month,F==="year"?I:d.year);ee&&p(Y=>({...Y,day:ee}))}},[d,g,b,w,T]),j=E.useMemo(()=>[{name:"day",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"month",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"year",classes:"nhsuk-input--width-4",inputmode:"numeric",pattern:"[0-9]*"}],[]),N=n||j;let M=a?.describedBy||"";const _=s?`${e}-hint`:"",P=l?`${e}-error`:"";_&&(M=M?`${M} ${_}`:_),P&&(M=M?`${M} ${P}`:P);const k=Object.values(m).some(F=>F),C=xe("nhsuk-form-group",{"nhsuk-form-group--error":l||k}),L=xe("nhsuk-date-input",t),D=()=>o.jsxs(o.Fragment,{children:[s&&o.jsx(vo,{id:_,className:s.classes,children:s.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:s.html}}):s.text}),l&&o.jsx(wo,{id:P,className:l.classes,children:l.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text}),Object.entries(m).map(([F,I])=>I?o.jsxs(wo,{id:`${e}-${F}-error`,className:"nhsuk-error-message",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",I]},`${F}-error`):null),o.jsx("div",{className:L,id:e,"data-testid":"date-input",...c,children:N.map(F=>{const I=F.id||`${e}-${F.name}`,$=r?`${r}[${F.name}]`:F.name,ee=F.label||F.name.charAt(0).toUpperCase()+F.name.slice(1),Y=m[F.name],H=d[F.name]||"";let U=M;if(Y){const z=`${e}-${F.name}-error`;U=U?`${U} ${z}`:z}return o.jsxs("div",{className:"nhsuk-date-input__item",children:[o.jsx(za,{htmlFor:I,className:"nhsuk-date-input__label",children:ee}),o.jsx(Ha,{id:I,name:$,value:H,className:xe("nhsuk-date-input__input",F.classes,{"nhsuk-input--error":Y}),inputMode:F.inputmode,autoComplete:F.autocomplete,pattern:F.pattern,"aria-describedby":U||void 0,hasError:!!Y,onChange:z=>S(F.name,z.target.value),onBlur:()=>v(F.name)})]},F.name)})})]});return o.jsx("div",{className:C,children:a?o.jsx(Ua,{className:a.classes,legend:a.legend?{text:a.legend}:void 0,describedBy:M||void 0,children:D()}):D()})},ju={animation:{AnimationDurationFast:"150ms",AnimationDurationNormal:"300ms",AnimationDurationSlow:"500ms",AnimationEasingEaseIn:"cubic-bezier(0.4, 0, 1, 1)",AnimationEasingEaseOut:"cubic-bezier(0, 0, 0.2, 1)",AnimationEasingEaseInOut:"cubic-bezier(0.4, 0, 0.2, 1)",AnimationEasingBounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},transition:{TransitionButtonDefault:"background-color 300ms cubic-bezier(0, 0, 0.2, 1)",TransitionButtonShadow:"box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionInputFocus:"border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionCardHover:"border-color 300ms cubic-bezier(0, 0, 0.2, 1)"},border:{BorderWidthDefault:"1px",BorderWidthFormElement:"2px",BorderWidthFormElementError:"4px",BorderWidthCardBottom:"4px",BorderWidthPanel:"4px",BorderWidthTableHeader:"2px",BorderWidthTableCell:"1px",BorderRadiusNone:"0px",BorderRadiusSmall:"4px",BorderRadiusMedium:"8px",BorderRadiusLarge:"12px",BorderColorDefault:"#d8dde0",BorderColorForm:"#4c6272",BorderColorCard:"#d8dde0",BorderColorCardHover:"#aeb7bd",BorderColorError:"#d5281b"},color:{ColorPrimaryBlue:"#005eb8",ColorPrimaryWhite:"#ffffff",ColorPrimaryBlack:"#212b32",ColorPrimaryGreen:"#007f3b",ColorPrimaryPurple:"#330072",ColorPrimaryDarkPink:"#7c2855",ColorPrimaryRed:"#d5281b",ColorPrimaryYellow:"#ffeb3b",ColorSecondaryPaleYellow:"#fff9c4",ColorSecondaryWarmYellow:"#ffb81c",ColorSecondaryOrange:"#ed8b00",ColorSecondaryAquaGreen:"#00a499",ColorSecondaryPink:"#ae2573",ColorGrey1:"#4c6272",ColorGrey2:"#768692",ColorGrey3:"#aeb7bd",ColorGrey4:"#d8dde0",ColorGrey5:"#f0f4f5",ColorTextPrimary:"#212b32",ColorTextSecondary:"#4c6272",ColorTextReverse:"#ffffff",ColorTextPrint:"#212b32",ColorLinkDefault:"#005eb8",ColorLinkHover:"#7c2855",ColorLinkActive:"#003087",ColorLinkVisited:"#330072",ColorFocusBackground:"#ffeb3b",ColorFocusText:"#212b32",ColorBorderDefault:"#d8dde0",ColorBorderSecondary:"#ffffff33",ColorError:"#d5281b",ColorFormBorder:"#4c6272",ColorFormBackground:"#ffffff",ColorButtonPrimaryBackground:"#007f3b",ColorButtonPrimaryText:"#ffffff",ColorButtonPrimaryHover:"#006530",ColorButtonPrimaryActive:"#004021",ColorButtonPrimaryShadow:"#004021",ColorButtonSecondaryBackground:"#00000000",ColorButtonSecondaryBackgroundSolid:"#ffffff",ColorButtonSecondaryBorder:"#005eb8",ColorButtonSecondaryText:"#005eb8",ColorButtonSecondaryHover:"#d9e5f2",ColorButtonSecondaryActive:"#c7daf0",ColorButtonSecondaryShadow:"#005eb8",ColorButtonReverseBackground:"#ffffff",ColorButtonReverseText:"#212b32",ColorButtonReverseHover:"#d9dde0",ColorButtonReverseActive:"#b3bcc2",ColorButtonReverseShadow:"#b3bcc2",ColorButtonWarningBackground:"#d5281b",ColorButtonWarningHover:"#aa2016",ColorButtonWarningActive:"#6a140e",ColorButtonWarningShadow:"#6a140e",ColorButtonLoginBackground:"#005eb8",ColorButtonLoginHover:"#004b93",ColorButtonLoginActive:"#002f5c",ColorButtonLoginShadow:"#002f5c"},component:{ComponentButtonPaddingMobileVertical:"8px",ComponentButtonPaddingMobileHorizontal:"16px",ComponentButtonPaddingDesktopVertical:"12px",ComponentButtonPaddingDesktopHorizontal:"16px",ComponentButtonShadowSize:"4px",ComponentFormInputMinHeight:"40px",ComponentFormInputPadding:"4px",ComponentFormCheckboxSize:"40px",ComponentFormCheckboxLabelPadding:"12px",ComponentCardPaddingMobile:"16px",ComponentCardPaddingDesktop:"32px",ComponentCardHeadingMargin:"16px",ComponentPanelPaddingMobile:"20px",ComponentPanelPaddingDesktop:"28px",ComponentBreadcrumbChevronMarginLeft:"9px",ComponentBreadcrumbChevronMarginRight:"2px",ComponentBreadcrumbPaddingTopMobile:"16px",ComponentBreadcrumbPaddingTopDesktop:"24px",ComponentSummaryListCellPaddingVertical:"8px",ComponentSummaryListCellPaddingHorizontal:"24px",ComponentSummaryListRowMargin:"16px",ComponentSpread:"4px",ComponentBlur:"4px",ComponentLink:"4px",ComponentDetails:"8px",ComponentExpander:"4px",ComponentPagination:"16px"},button:{ButtonPrimaryBackgroundDefault:"#007f3b",ButtonPrimaryBackgroundHover:"#006530",ButtonPrimaryBackgroundActive:"#004021",ButtonPrimaryBackgroundDisabled:"#d8dde0",ButtonPrimaryTextDefault:"#ffffff",ButtonPrimaryTextDisabled:"#768692",ButtonPrimaryBorderDefault:"#00000000",ButtonPrimaryBorderFocus:"#ffeb3b",ButtonSecondaryBackgroundDefault:"#00000000",ButtonSecondaryBackgroundSolid:"#ffffff",ButtonSecondaryBackgroundHover:"#d9e5f2",ButtonSecondaryBackgroundActive:"#c7daf0",ButtonSecondaryTextDefault:"#005eb8",ButtonSecondaryBorderDefault:"#005eb8",ButtonSpacingPaddingVerticalMobile:"8px",ButtonSpacingPaddingHorizontalMobile:"16px",ButtonSpacingPaddingVerticalDesktop:"12px",ButtonSpacingPaddingHorizontalDesktop:"16px",ButtonBorderWidth:"2px",ButtonBorderRadius:"4px",ButtonShadowSize:"4px",ButtonTypographyWeight:"600"},card:{CardBackgroundDefault:"#ffffff",CardBorderDefault:"#d8dde0",CardBorderHover:"#aeb7bd",CardBorderBottom:"#f0f4f5",CardTextHeading:"#212b32",CardTextDescription:"#212b32",CardTextLink:"#005eb8",CardSpacingPaddingMobile:"16px",CardSpacingPaddingDesktop:"32px",CardSpacingHeadingMargin:"16px",CardBorderWidthDefault:"1px",CardBorderWidthBottom:"4px",CardShadowDefault:"none",CardShadowHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},form:{FormInputBackgroundDefault:"#ffffff",FormInputBackgroundFocus:"#ffffff",FormInputBackgroundDisabled:"#d8dde0",FormInputBackgroundError:"#ffffff",FormInputBorderDefault:"#4c6272",FormInputBorderFocus:"#ffeb3b",FormInputBorderError:"#d5281b",FormInputBorderDisabled:"#aeb7bd",FormInputTextDefault:"#212b32",FormInputTextPlaceholder:"#4c6272",FormInputTextDisabled:"#768692",FormLabelTextDefault:"#212b32",FormLabelTextRequired:"#ffffff",FormLabelTypographyWeight:"600",FormErrorTextDefault:"#d5281b",FormErrorTypographyWeight:"600",FormHintTextDefault:"#4c6272",FormSpacingInputPadding:"4px",FormSpacingInputMinHeight:"40px",FormSpacingCheckboxSize:"40px",FormSpacingCheckboxLabelPadding:"12px",FormBorderWidthDefault:"2px",FormBorderWidthError:"4px",FormBorderRadius:"0px"},size:{SizeIconSmall:"16px",SizeIconMedium:"18px",SizeIconLarge:"24px",SizeIconExtraLarge:"32px",SizeIconNhsDefault:"34px",SizeFormControlSmall:"32px",SizeFormControlMedium:"40px",SizeFormControlLarge:"48px",SizeFormInputWidthXs:"5.4ex",SizeFormInputWidthSm:"7.2ex",SizeFormInputWidthMd:"9ex",SizeFormInputWidthLg:"10.8ex",SizeFormInputWidthXl:"20ex",SizeFormInputWidth2xl:"38ex",SizeFormInputWidth3xl:"56ex",SizeButtonMinHeightMobile:"44px",SizeButtonMinHeightDesktop:"40px"},layout:{LayoutContainerMaxWidth:"1020px",LayoutColumnFull:"100%",LayoutColumnHalf:"50%",LayoutColumnThird:"33.333%",LayoutColumnQuarter:"25%",LayoutColumnActions:"20%"},breakpoint:{BreakpointMobile:"320px",BreakpointTablet:"641px",BreakpointDesktop:"1025px",BreakpointLargeDesktop:"1280px"},grid:{GridPageWidth:"960px",GridGutter:"32px",GridGutterHalf:"16px"},state:{StateErrorBackground:"#d5281b",StateErrorBorder:"#d5281b",StateErrorText:"#ffffff",StateSuccessBackground:"#007f3b",StateSuccessBorder:"#007f3b",StateSuccessText:"#ffffff",StateWarningBackground:"#ffeb3b",StateWarningBorder:"#ffeb3b",StateWarningText:"#212b32",StateInfoBackground:"#005eb8",StateInfoBorder:"#005eb8",StateInfoText:"#ffffff",StateDisabledBackground:"#d8dde0",StateDisabledBorder:"#aeb7bd",StateDisabledText:"#768692"},shadow:{ShadowButtonDefault:"0 4px 0 #004021",ShadowButtonSecondary:"0 4px 0 #005eb8",ShadowButtonWarning:"0 4px 0 #6a140e",ShadowButtonFocus:"0 4px 0 #ffeb3b",ShadowCardDefault:"none",ShadowCardHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},"focus-outline":{FocusOutlineWidth:"4px",FocusOutlineOffset:"0px",FocusOutlineStyle:"solid"},"focus-shadow":{FocusShadowInput:"0 0 0 3px #ffeb3b",FocusShadowButton:"0 0 0 3px #ffeb3b"},elevation:{ElevationNone:"none",ElevationLow:"0 1px 3px rgba(0, 0, 0, 0.12)",ElevationMedium:"0 2px 6px rgba(0, 0, 0, 0.16)",ElevationHigh:"0 4px 12px rgba(0, 0, 0, 0.20)"},spacing:{Spacing0:"0",Spacing1:"4px",Spacing2:"8px",Spacing3:"16px",Spacing4:"24px",Spacing5:"32px",Spacing6:"40px",Spacing7:"48px",Spacing8:"56px",Spacing9:"64px"},"spacing-responsive":{SpacingResponsive0Mobile:"0",SpacingResponsive0Tablet:"0",SpacingResponsive1Mobile:"4px",SpacingResponsive1Tablet:"4px",SpacingResponsive2Mobile:"8px",SpacingResponsive2Tablet:"8px",SpacingResponsive3Mobile:"8px",SpacingResponsive3Tablet:"16px",SpacingResponsive4Mobile:"16px",SpacingResponsive4Tablet:"24px",SpacingResponsive5Mobile:"24px",SpacingResponsive5Tablet:"32px",SpacingResponsive6Mobile:"32px",SpacingResponsive6Tablet:"40px",SpacingResponsive7Mobile:"40px",SpacingResponsive7Tablet:"48px",SpacingResponsive8Mobile:"48px",SpacingResponsive8Tablet:"56px",SpacingResponsive9Mobile:"56px",SpacingResponsive9Tablet:"64px"},font:{FontFamilyBase:"Frutiger W01",FontFamilyFallback:"Arial, Helvetica, sans-serif",FontFamilyPrint:"sans-serif",FontWeightNormal:"400",FontWeightBold:"600",FontWeightLight:"400",FontSize14Mobile:"12px",FontSize14Tablet:"14px",FontSize14Print:"12pt",FontSize16Mobile:"14px",FontSize16Tablet:"16px",FontSize16Print:"12pt",FontSize19Mobile:"16px",FontSize19Tablet:"19px",FontSize19Print:"13pt",FontSize22Mobile:"19px",FontSize22Tablet:"22px",FontSize22Print:"15pt",FontSize26Mobile:"22px",FontSize26Tablet:"26px",FontSize26Print:"17pt",FontSize36Mobile:"27px",FontSize36Tablet:"36px",FontSize36Print:"20pt",FontSize48Mobile:"33px",FontSize48Tablet:"48px",FontSize48Print:"24pt",FontSizeBase:"16px",FontLineHeightBase:"24px"},headings:{xl:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},l:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},m:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},s:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xs:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}}},paragraphs:{body:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bodyLarge:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},bodySmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ledeText:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},ledeTextSmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}}}},Du=E.createContext(ju),Xb=({children:e,theme:t={}})=>{const n={...ju,...t};return o.jsx(Du.Provider,{value:n,children:e})},Kb=()=>{const e=E.useContext(Du);if(!e)throw new Error("useNHSTheme must be used within an NHSThemeProvider");return e};function Jb(){return`
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 400;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff") format("woff");
	}
	
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 600;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff") format("woff");
	}
  `}function Zb(){if(typeof document>"u"||document.getElementById("nhs-fonts"))return;const e=document.createElement("style");e.id="nhs-fonts",e.textContent=Jb(),document.head.appendChild(e)}const Qb=({children:e,theme:t})=>(E.useEffect(()=>{Zb()},[]),o.jsx(Xb,{theme:t,children:e}));function ey(e,{variant:t,isClient:n,menuOpen:r=!1,showMoreButton:i=!1,visibleItems:a,dropdownVisible:s,toggleMenu:l,navContainerRef:u,navListRef:c,searchNode:d}){const{className:f,logo:m={},service:p={},serviceName:y,organisation:h,search:g,account:b,navigation:w,containerClasses:T,variant:S="default",attributes:v={},maxVisibleItems:j,responsiveNavigation:N=!0,...M}=e,_={...p,text:p?.text??y};"maxVisibleItems"in M&&delete M.maxVisibleItems;const P=_.href&&!m.href||_.href&&_.href===m.href,k=P?_.href:m.href,C=xe("nhsuk-header",{"nhsuk-header--organisation":S==="organisation"||h,"nhsuk-header--white":S==="white"},f),L=xe("nhsuk-header__container",T),D=xe("nhsuk-header__navigation",{"nhsuk-header__navigation--white":w?.white,"nhsuk-header__navigation--justified":w?.justified},w?.className),F=()=>o.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":m.ariaLabel||"NHS",children:[o.jsx("title",{children:m.ariaLabel||"NHS"}),o.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),I=()=>m.src?o.jsx("img",{className:"nhsuk-header__organisation-logo",src:m.src,width:"280",alt:m.ariaLabel||"NHS"}):F(),$=()=>h?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"nhsuk-header__organisation-name",children:[h.name,h.split&&o.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",h.split]})]}),h.descriptor&&o.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:h.descriptor})]}):null,ee=(U,z)=>U?z?o.jsx("a",{className:"nhsuk-header__service-name",href:z,children:U}):o.jsx("span",{className:"nhsuk-header__service-name",children:U}):null,Y=U=>U.active||U.current?o.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:U.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:U.html}}):U.text}):U.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:U.html}}):U.text,H=()=>o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})});return w?.items,o.jsxs("header",{className:C,role:"banner","data-module":"nhsuk-header",...v,...M,children:[o.jsxs("div",{className:L,children:[o.jsxs("div",{className:"nhsuk-header__service",children:[k?o.jsxs("a",{className:"nhsuk-header__service-logo",href:k,children:[I(),$(),P&&ee(_.text)]}):o.jsxs(o.Fragment,{children:[I(),$(),P&&ee(_.text)]}),_.text&&!P&&ee(_.text,_.href)]}),d??null,o.jsx(po,{...b,variant:S==="white"?"white":"default"})]}),w&&w.items&&w.items.length>0&&o.jsx("nav",{className:D,"aria-label":w.ariaLabel||"Menu",children:o.jsx("div",{className:xe("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--initializing":n&&t==="client","nhsuk-header__navigation-container--ssr":!n},T),ref:u,children:o.jsxs("ul",{className:"nhsuk-header__navigation-list",ref:c,children:[(w?.items||[]).map((U,z)=>o.jsx("li",{className:xe("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":U.active||U.current,"nhsuk-header__navigation-item--hidden":i&&a!==void 0&&z>=(a??0)},U.className),...U.attributes||{},children:o.jsx("a",{className:"nhsuk-header__navigation-link",href:U.href,...U.active||U.current?{"aria-current":U.current?"page":"true"}:{},children:Y(U)})},z)),i&&a!==void 0&&o.jsx("li",{className:"nhsuk-header__navigation-item nhsuk-header__navigation-item--more",children:o.jsxs("button",{className:"nhsuk-header__navigation-button",id:"toggle-more-menu",type:"button","aria-haspopup":"true","aria-expanded":r?"true":"false","aria-controls":"nhsuk-header-more-menu",onClick:l,children:[o.jsx("span",{children:"More"}),H()]})})]})})}),n&&w&&w.items&&w.items.length>0&&r&&s&&o.jsx("div",{className:"nhsuk-header__dropdown-menu",hidden:!s,id:"nhsuk-header-more-menu",children:o.jsx("ul",{className:"nhsuk-header__dropdown-list",children:w.items.slice(a??0).map((U,z)=>o.jsx("li",{className:xe("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":U.active||U.current}),children:o.jsx("a",{className:"nhsuk-header__dropdown-link",href:U.href,...U.active||U.current?{"aria-current":U.current?"page":"true"}:{},onClick:()=>{l?.()},children:Y(U)})},`overflow-${(a??0)+z}`))})}),t==="server"]})}const Mu=({mode:e="form",action:t="/search",method:n="get",name:r="q",value:i,placeholder:a="Search",visuallyHiddenLabel:s="Search the NHS website",visuallyHiddenButton:l="Search",className:u,disabled:c=!1,callbacks:d={},isLoading:f=!1,showResults:m=!1,results:p=[],formAttributes:y={},inputAttributes:h={},buttonAttributes:g={},preventDefaultSubmit:b=!1,debounceMs:w=300,minQueryLength:T=1})=>{const[S,v]=E.useState(""),[j,N]=E.useState(!1),M=E.useRef(void 0),_=E.useRef(null),P=E.useRef(null),k=e==="controlled"&&i!==void 0,C=k?i:S,L=E.useCallback(ie=>{M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{d.onChange&&ie.length>=T&&d.onChange(ie)},w)},[d.onChange,w,T]),D=E.useCallback(ie=>{const W=ie.target.value;k||v(W),e!=="form"&&L(W)},[k,e,L]),F=E.useCallback(ie=>{const W=C.trim(),le={query:W,timestamp:Date.now(),formData:new FormData(ie.currentTarget)};e==="controlled"||e==="hybrid"&&b?(ie.preventDefault(),d.onSearch&&W.length>=T&&d.onSearch(le)):e==="hybrid"&&d.onSearch&&W.length>=T&&d.onSearch(le)},[e,C,d.onSearch,b,T]),I=E.useCallback(()=>{N(!0),d.onFocus?.()},[d.onFocus]),$=E.useCallback(()=>{N(!1),d.onBlur?.()},[d.onBlur]),ee=E.useCallback(()=>{k||v(""),d.onClear?.(),P.current?.focus()},[k,d.onClear]);E.useEffect(()=>()=>{M.current&&clearTimeout(M.current)},[]);const Y=()=>o.jsx("svg",{className:xe("nhsuk-icon nhsuk-icon__search",{"nhsuk-icon__search--loading":f}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"})}),H=()=>o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsxs("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[o.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416",repeatCount:"indefinite"})]})}),U=()=>!C||e==="form"?null:o.jsx("button",{type:"button",className:"nhsuk-header__search-clear",onClick:ee,"aria-label":"Clear search",children:o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__close",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z"})})}),z=()=>!m||!p.length||!j?null:o.jsx("div",{className:"nhsuk-header__search-results",role:"listbox",children:p.map(ie=>o.jsx("div",{className:"nhsuk-header__search-result",role:"option",children:ie.href?o.jsxs("a",{href:ie.href,className:"nhsuk-header__search-result-link",children:[o.jsx("span",{className:"nhsuk-header__search-result-title",children:ie.title}),ie.description&&o.jsx("span",{className:"nhsuk-header__search-result-description",children:ie.description})]}):o.jsxs("button",{type:"button",className:"nhsuk-header__search-result-button",onClick:()=>d.onSearch?.({query:ie.title,timestamp:Date.now()}),children:[o.jsx("span",{className:"nhsuk-header__search-result-title",children:ie.title}),ie.description&&o.jsx("span",{className:"nhsuk-header__search-result-description",children:ie.description})]})},ie.id))});return o.jsxs("div",{className:xe("nhsuk-header__search",u,{"nhsuk-header__search--controlled":e==="controlled","nhsuk-header__search--hybrid":e==="hybrid","nhsuk-header__search--loading":f,"nhsuk-header__search--focused":j,"nhsuk-header__search--has-results":m&&p.length>0}),children:[o.jsxs("form",{ref:_,className:"nhsuk-header__search-form",id:"search",action:e!=="controlled"?t:void 0,method:e!=="controlled"?n:void 0,role:"search",onSubmit:F,...y,children:[o.jsx("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field",children:s}),o.jsxs("div",{className:"nhsuk-header__search-input-wrapper",children:[o.jsx("input",{ref:P,className:"nhsuk-header__search-input nhsuk-input",id:"search-field",name:e!=="controlled"?r:void 0,type:"search",placeholder:a,autoComplete:"off",value:C,onChange:D,onFocus:I,onBlur:$,disabled:c||f,...m&&p.length>0?{"aria-expanded":!0,"aria-haspopup":"listbox"}:{},...h}),U()]}),o.jsxs("button",{className:"nhsuk-header__search-submit",type:"submit",disabled:c||f||e!=="form"&&C.length<T,...g,children:[f?H():Y(),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:f?"Searching...":l})]})]}),z()]})},Va=({className:e,logo:t={},service:n={},organisation:r,search:i,account:a,navigation:s,containerClasses:l,variant:u="default",attributes:c={},...d})=>{const[f,m]=E.useState(!1),[p,y]=E.useState(!1),[h,g]=E.useState(s?.items?.length||0),[b,w]=E.useState(!1),[T,S]=E.useState(!1),v=E.useRef(null),j=E.useRef(null),N=E.useRef(!1);E.useEffect(()=>{typeof window>"u"||S(!0)},[]),E.useEffect(()=>{if(typeof document>"u")return;const k=C=>{C.key==="Escape"&&f&&m(!1)};if(f)return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[f]);const M=E.useRef(null),_=E.useCallback(()=>{if(!T||!s?.items||s.items.length===0||N.current)return;const k=v.current,C=j.current;if(!k||!C)return;N.current=!0,k.classList.add("nhsuk-header__navigation-container--measuring");const L=k.clientWidth,D=Array.from(C.children);if(!D.length){k.classList.remove("nhsuk-header__navigation-container--measuring"),N.current=!1;return}if(M.current==null){const W=document.createElement("button");W.type="button",W.className="nhsuk-header__navigation-button nhsuk-header__navigation-button--prototype",W.style.position="absolute",W.style.visibility="hidden",W.style.pointerEvents="none",W.innerHTML="<span>More</span>",k.appendChild(W),M.current=W.getBoundingClientRect().width||104,k.removeChild(W)}const F=M.current+16;let I=0,$=0;const ee=window.getComputedStyle(k),Y=parseFloat(ee.paddingLeft)||0,H=parseFloat(ee.paddingRight)||0;let U=Y+H;for(const W of D){const le=W.getBoundingClientRect().width;if(I+le+F+U>L)break;I+=le,$+=1}const z=$<s.items.length,ie=z?$:s.items.length;y(W=>W===z?W:z),g(W=>W===ie?W:ie),k.classList.remove("nhsuk-header__navigation-container--measuring"),N.current=!1},[T,s?.items]);E.useEffect(()=>{if(!T)return;const k=v.current;if(!k)return;let C=null;const L=()=>{C==null&&(C=window.requestAnimationFrame(()=>{C=null,_()}))};_();const D=new ResizeObserver(()=>L());return D.observe(k),j.current&&D.observe(j.current),()=>{C!=null&&window.cancelAnimationFrame(C),D.disconnect()}},[T,_]),E.useEffect(()=>{T&&_()},[s?.items?.length,T,_]);const P=k=>{k&&(k.preventDefault(),k.stopPropagation());const C=!f;m(C),w(C)};return ey({className:e,logo:t,service:n,organisation:r,search:i,account:a,navigation:s,containerClasses:l,variant:u,attributes:c,...d},{variant:"client",isClient:T,menuOpen:f,showMoreButton:p,visibleItems:h,dropdownVisible:b,toggleMenu:P,navContainerRef:v,navListRef:j,searchNode:i?o.jsx(Mu,{...i}):null})};function ty(e,{variant:t,isClient:n}){const{className:r,logo:i={},service:a={},serviceName:s,organisation:l,account:u,navigation:c,containerClasses:d,variant:f="default",attributes:m={},maxVisibleItems:p,responsiveNavigation:y=!0,...h}=e;"maxVisibleItems"in h&&delete h.maxVisibleItems;const g={...a,text:a?.text??s},b=g.href&&!i.href||g.href&&g.href===i.href,w=b?g.href:i.href,T=xe("nhsuk-header",{"nhsuk-header--organisation":f==="organisation"||l,"nhsuk-header--white":f==="white"},r),S=xe("nhsuk-header__container",d),v=xe("nhsuk-header__navigation",{"nhsuk-header__navigation--white":c?.white,"nhsuk-header__navigation--justified":c?.justified},c?.className),j=()=>o.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":i.ariaLabel||"NHS",children:[o.jsx("title",{children:i.ariaLabel||"NHS"}),o.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),N=()=>i.src?o.jsx("img",{className:"nhsuk-header__organisation-logo",src:i.src,width:"280",alt:i.ariaLabel||"NHS"}):j(),M=()=>l?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"nhsuk-header__organisation-name",children:[l.name,l.split&&o.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",l.split]})]}),l.descriptor&&o.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:l.descriptor})]}):null,_=(D,F)=>D?F?o.jsx("a",{className:"nhsuk-header__service-name",href:F,children:D}):o.jsx("span",{className:"nhsuk-header__service-name",children:D}):null,P=D=>D.active||D.current?o.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:D.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:D.html}}):D.text}):D.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:D.html}}):D.text,k=c?.items&&!y,C=k?[]:c?.items,L=k?c.items:[];return o.jsxs("header",{className:T,role:"banner","data-module":"nhsuk-header",...m,...h,children:[o.jsxs("div",{className:S,children:[o.jsxs("div",{className:"nhsuk-header__service",children:[w?o.jsxs("a",{className:"nhsuk-header__service-logo",href:w,children:[N(),M(),b&&_(g.text)]}):o.jsxs(o.Fragment,{children:[N(),M(),b&&_(g.text)]}),g.text&&!b&&_(g.text,g.href)]}),o.jsx(po,{...u,variant:f==="white"?"white":"default"})]}),c&&c.items&&c.items.length>0&&o.jsx("nav",{className:v,"aria-label":c.ariaLabel||"Menu",children:o.jsx("div",{className:xe("nhsuk-header_navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--ssr":!n},d),children:o.jsx("ul",{className:"nhsuk-header__navigation-list",children:(C||[]).map((D,F)=>o.jsx("li",{className:xe("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":D.active||D.current},D.className),...D.attributes||{},children:o.jsx("a",{className:"nhsuk-header__navigation-link",href:D.href,...D.active||D.current?{"aria-current":D.current?"page":"true"}:{},children:P(D)})},F))})})}),k&&L.length>0&&o.jsx("div",{className:"nhsuk-header__dropdown-menu","data-ssr-overflow":"true",children:o.jsx("ul",{className:"nhsuk-header__dropdown-list",children:L.map((D,F)=>o.jsx("li",{className:xe("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":D.active||D.current}),children:o.jsx("a",{className:"nhsuk-header__dropdown-link",href:D.href,...D.active||D.current?{"aria-current":D.current?"page":"true"}:{},children:P(D)})},`overflow-server-${F}`))})})]})}const ny=e=>ty(e,{variant:"server",isClient:!1}),Pu=({heading:e,headingLevel:t=1,headingClasses:n="",text:r,html:i,imageURL:a,containerClasses:s="",classes:l="",children:u,...c})=>{const d=["nhsuk-hero",a&&e?"nhsuk-hero--image nhsuk-hero--image-description":"",a&&!e?"nhsuk-hero--image":"",l].filter(Boolean).join(" "),f=["nhsuk-width-container",s,a?"":"nhsuk-hero--border"].filter(Boolean).join(" "),m=["nhsuk-hero__heading",n,!u&&!r&&!i?"nhsuk-u-margin-bottom-0":""].filter(Boolean).join(" "),p=u||e||r||i,y=()=>{if(!e)return null;const h={className:m};switch(t){case 1:return o.jsx("h1",{...h,children:e});case 2:return o.jsx("h2",{...h,children:e});case 3:return o.jsx("h3",{...h,children:e});case 4:return o.jsx("h4",{...h,children:e});case 5:return o.jsx("h5",{...h,children:e});case 6:return o.jsx("h6",{...h,children:e});default:return o.jsx("h1",{...h,children:e})}};return o.jsxs("section",{className:d,style:a?{backgroundImage:`url('${a}')`}:void 0,role:"banner",...c,children:[a&&o.jsx("div",{className:"nhsuk-hero__overlay",children:p&&o.jsx("div",{className:f,children:o.jsx("div",{className:"nhsuk-grid-row",children:o.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:o.jsxs("div",{className:"nhsuk-hero-content",children:[y(),u||(i?o.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):r?o.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null),o.jsx("span",{className:"nhsuk-hero__arrow","aria-hidden":"true"})]})})})})}),!a&&p&&o.jsx("div",{className:f,children:o.jsx("div",{className:"nhsuk-grid-row",children:o.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:o.jsxs("div",{className:"nhsuk-hero__wrapper",children:[y(),u||(i?o.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):r?o.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null)]})})})})]})};Pu.displayName="Hero";const So=({className:e,links:t=[],linksColumn2:n,linksColumn3:r,metaLinks:i,copyright:a="Â© NHS England",containerClasses:s,attributes:l={},style:u,footerStyle:c,containerStyle:d})=>{const f=(p,y=!1)=>o.jsx("li",{className:xe("nhsuk-footer__list-item",{"nhsuk-footer-default__list-item":y}),children:o.jsx("a",{className:"nhsuk-footer__list-item-link",href:p.URL,target:p.newWindow?"_blank":void 0,rel:p.newWindow?"noopener noreferrer":void 0,children:p.label})},`${p.URL}-${p.label}`),m=!!(n||r);return o.jsx("footer",{role:"contentinfo",...l,style:{...l?.style,...u},children:o.jsxs("div",{className:"nhsuk-footer-container",children:[o.jsxs("div",{className:xe("nhsuk-width-container",s),style:d,children:[o.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Support links"}),o.jsx("div",{className:xe("nhsuk-footer",e),style:c,children:m?o.jsxs(o.Fragment,{children:[t.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:t.map(p=>f(p))}),n&&n.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:n.map(p=>f(p))}),r&&r.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:r.map(p=>f(p))}),i&&i.length>0&&o.jsx("ul",{className:"nhsuk-footer__list nhsuk-footer__meta",children:i.map(p=>f(p))})]}):o.jsxs("ul",{className:"nhsuk-footer__list",children:[t.map(p=>f(p,!0)),(n||[]).map(p=>f(p,!0)),(r||[]).map(p=>f(p,!0)),(i||[]).map(p=>f(p,!0))]})}),!m&&o.jsx("div",{children:o.jsx("p",{className:"nhsuk-footer__copyright",children:a})})]}),m&&o.jsx("div",{className:"nhsuk-width-container",children:o.jsx("div",{children:o.jsx("p",{className:"nhsuk-footer__copyright",children:a})})})]})})};function Ga(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ry(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Co(e){let t,n,r;e.length!==2?(t=Ga,n=(l,u)=>Ga(e(l),u),r=(l,u)=>e(l)-u):(t=e===Ga||e===ry?e:iy,n=e,r=e);function i(l,u,c=0,d=l.length){if(c<d){if(t(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<0?c=f+1:d=f}while(c<d)}return c}function a(l,u,c=0,d=l.length){if(c<d){if(t(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<=0?c=f+1:d=f}while(c<d)}return c}function s(l,u,c=0,d=l.length){const f=i(l,u,c,d-1);return f>c&&r(l[f-1],u)>-r(l[f],u)?f-1:f}return{left:i,center:s,right:a}}function iy(){return 0}function ay(e){return e===null?NaN:+e}const sy=Co(Ga).right;Co(ay).center;function Iu(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Fu extends Map{constructor(t,n=cy){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get($u(this,t))}has(t){return super.has($u(this,t))}set(t,n){return super.set(oy(this,t),n)}delete(t){return super.delete(ly(this,t))}}function $u({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function oy({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function ly({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function cy(e){return e!==null&&typeof e=="object"?e.valueOf():e}const uy=Math.sqrt(50),dy=Math.sqrt(10),fy=Math.sqrt(2);function Ya(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=uy?10:a>=dy?5:a>=fy?2:1;let l,u,c;return i<0?(c=Math.pow(10,-i)/s,l=Math.round(e*c),u=Math.round(t*c),l/c<e&&++l,u/c>t&&--u,c=-c):(c=Math.pow(10,i)*s,l=Math.round(e/c),u=Math.round(t/c),l*c<e&&++l,u*c>t&&--u),u<l&&.5<=n&&n<2?Ya(e,t,n*2):[l,u,c]}function hy(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,s]=r?Ya(t,e,n):Ya(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(s<0)for(let c=0;c<l;++c)u[c]=(a-c)/-s;else for(let c=0;c<l;++c)u[c]=(a-c)*s;else if(s<0)for(let c=0;c<l;++c)u[c]=(i+c)/-s;else for(let c=0;c<l;++c)u[c]=(i+c)*s;return u}function ko(e,t,n){return t=+t,e=+e,n=+n,Ya(e,t,n)[2]}function To(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?ko(t,e,n):ko(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function my(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function qa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Lu=Symbol("implicit");function Au(){var e=new Fu,t=[],n=[],r=Lu;function i(a){let s=e.get(a);if(s===void 0){if(r!==Lu)return r;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Fu;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Au(t,n).unknown(r)},qa.apply(i,arguments),i}function Eu(){var e=Au().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,s,l=!1,u=0,c=0,d=.5;delete e.unknown;function f(){var m=t().length,p=i<r,y=p?i:r,h=p?r:i;a=(h-y)/Math.max(1,m-u+c*2),l&&(a=Math.floor(a)),y+=(h-y-a*(m-u))*d,s=a*(1-u),l&&(y=Math.round(y),s=Math.round(s));var g=my(m).map(function(b){return y+a*b});return n(p?g.reverse():g)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,l=!0,f()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(u=Math.min(1,c=+m),f()):u},e.paddingInner=function(m){return arguments.length?(u=Math.min(1,m),f()):u},e.paddingOuter=function(m){return arguments.length?(c=+m,f()):c},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return Eu(t(),[r,i]).round(l).paddingInner(u).paddingOuter(c).align(d)},qa.apply(f(),arguments)}function No(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ji(){}var Di=.7,Xa=1/Di,Vr="\\s*([+-]?\\d+)\\s*",Mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",py=/^#([0-9a-f]{3,8})$/,gy=new RegExp(`^rgb\\(${Vr},${Vr},${Vr}\\)$`),by=new RegExp(`^rgb\\(${vn},${vn},${vn}\\)$`),yy=new RegExp(`^rgba\\(${Vr},${Vr},${Vr},${Mi}\\)$`),vy=new RegExp(`^rgba\\(${vn},${vn},${vn},${Mi}\\)$`),_y=new RegExp(`^hsl\\(${Mi},${vn},${vn}\\)$`),xy=new RegExp(`^hsla\\(${Mi},${vn},${vn},${Mi}\\)$`),Ou={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};No(ji,Pi,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ru,formatHex:Ru,formatHex8:wy,formatHsl:Sy,formatRgb:Hu,toString:Hu});function Ru(){return this.rgb().formatHex()}function wy(){return this.rgb().formatHex8()}function Sy(){return Gu(this).formatHsl()}function Hu(){return this.rgb().formatRgb()}function Pi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=py.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?zu(t):n===3?new Ot(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ka(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ka(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gy.exec(e))?new Ot(t[1],t[2],t[3],1):(t=by.exec(e))?new Ot(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yy.exec(e))?Ka(t[1],t[2],t[3],t[4]):(t=vy.exec(e))?Ka(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_y.exec(e))?Vu(t[1],t[2]/100,t[3]/100,1):(t=xy.exec(e))?Vu(t[1],t[2]/100,t[3]/100,t[4]):Ou.hasOwnProperty(e)?zu(Ou[e]):e==="transparent"?new Ot(NaN,NaN,NaN,0):null}function zu(e){return new Ot(e>>16&255,e>>8&255,e&255,1)}function Ka(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ot(e,t,n,r)}function Cy(e){return e instanceof ji||(e=Pi(e)),e?(e=e.rgb(),new Ot(e.r,e.g,e.b,e.opacity)):new Ot}function jo(e,t,n,r){return arguments.length===1?Cy(e):new Ot(e,t,n,r??1)}function Ot(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}No(Ot,jo,Bu(ji,{brighter(e){return e=e==null?Xa:Math.pow(Xa,e),new Ot(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Di:Math.pow(Di,e),new Ot(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ot(yr(this.r),yr(this.g),yr(this.b),Ja(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Uu,formatHex:Uu,formatHex8:ky,formatRgb:Wu,toString:Wu}));function Uu(){return`#${vr(this.r)}${vr(this.g)}${vr(this.b)}`}function ky(){return`#${vr(this.r)}${vr(this.g)}${vr(this.b)}${vr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wu(){const e=Ja(this.opacity);return`${e===1?"rgb(":"rgba("}${yr(this.r)}, ${yr(this.g)}, ${yr(this.b)}${e===1?")":`, ${e})`}`}function Ja(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vr(e){return e=yr(e),(e<16?"0":"")+e.toString(16)}function Vu(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mn(e,t,n,r)}function Gu(e){if(e instanceof mn)return new mn(e.h,e.s,e.l,e.opacity);if(e instanceof ji||(e=Pi(e)),!e)return new mn;if(e instanceof mn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,l=a-i,u=(a+i)/2;return l?(t===a?s=(n-r)/l+(n<r)*6:n===a?s=(r-t)/l+2:s=(t-n)/l+4,l/=u<.5?a+i:2-a-i,s*=60):l=u>0&&u<1?0:s,new mn(s,l,u,e.opacity)}function Ty(e,t,n,r){return arguments.length===1?Gu(e):new mn(e,t,n,r??1)}function mn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}No(mn,Ty,Bu(ji,{brighter(e){return e=e==null?Xa:Math.pow(Xa,e),new mn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Di:Math.pow(Di,e),new mn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ot(Do(e>=240?e-240:e+120,i,r),Do(e,i,r),Do(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new mn(Yu(this.h),Za(this.s),Za(this.l),Ja(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ja(this.opacity);return`${e===1?"hsl(":"hsla("}${Yu(this.h)}, ${Za(this.s)*100}%, ${Za(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Yu(e){return e=(e||0)%360,e<0?e+360:e}function Za(e){return Math.max(0,Math.min(1,e||0))}function Do(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Mo=e=>()=>e;function Ny(e,t){return function(n){return e+n*t}}function jy(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Dy(e){return(e=+e)==1?qu:function(t,n){return n-t?jy(t,n,e):Mo(isNaN(t)?n:t)}}function qu(e,t){var n=t-e;return n?Ny(e,n):Mo(isNaN(e)?t:e)}const Xu=(function e(t){var n=Dy(t);function r(i,a){var s=n((i=jo(i)).r,(a=jo(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),c=qu(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=l(d),i.b=u(d),i.opacity=c(d),i+""}}return r.gamma=e,r})(1);function My(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Py(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Iy(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Fo(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(l){for(s=0;s<r;++s)a[s]=i[s](l);return a}}function Fy(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Qa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function $y(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Fo(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Po=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Io=new RegExp(Po.source,"g");function Ly(e){return function(){return e}}function Ay(e){return function(t){return e(t)+""}}function Ey(e,t){var n=Po.lastIndex=Io.lastIndex=0,r,i,a,s=-1,l=[],u=[];for(e=e+"",t=t+"";(r=Po.exec(e))&&(i=Io.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,u.push({i:s,x:Qa(r,i)})),n=Io.lastIndex;return n<t.length&&(a=t.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?u[0]?Ay(u[0].x):Ly(t):(t=u.length,function(c){for(var d=0,f;d<t;++d)l[(f=u[d]).i]=f.x(c);return l.join("")})}function Fo(e,t){var n=typeof t,r;return t==null||n==="boolean"?Mo(t):(n==="number"?Qa:n==="string"?(r=Pi(t))?(t=r,Xu):Ey:t instanceof Pi?Xu:t instanceof Date?Fy:Py(t)?My:Array.isArray(t)?Iy:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?$y:Qa)(e,t)}function By(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Oy(e){return function(){return e}}function Ry(e){return+e}var Ku=[0,1];function Gr(e){return e}function $o(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Oy(isNaN(t)?NaN:.5)}function Hy(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function zy(e,t,n){var r=e[0],i=e[1],a=t[0],s=t[1];return i<r?(r=$o(i,r),a=n(s,a)):(r=$o(r,i),a=n(a,s)),function(l){return a(r(l))}}function Uy(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=$o(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(l){var u=sy(e,l,1,r)-1;return a[u](i[u](l))}}function Ju(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wy(){var e=Ku,t=Ku,n=Fo,r,i,a,s=Gr,l,u,c;function d(){var m=Math.min(e.length,t.length);return s!==Gr&&(s=Hy(e[0],e[m-1])),l=m>2?Uy:zy,u=c=null,f}function f(m){return m==null||isNaN(m=+m)?a:(u||(u=l(e.map(r),t,n)))(r(s(m)))}return f.invert=function(m){return s(i((c||(c=l(t,e.map(r),Qa)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,Ry),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),n=By,d()},f.clamp=function(m){return arguments.length?(s=m?!0:Gr,d()):s!==Gr},f.interpolate=function(m){return arguments.length?(n=m,d()):n},f.unknown=function(m){return arguments.length?(a=m,f):a},function(m,p){return r=m,i=p,d()}}function Zu(){return Wy()(Gr,Gr)}function Vy(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function es(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Yr(e){return e=es(Math.abs(e)),e?e[1]:NaN}function Gy(e,t){return function(n,r){for(var i=n.length,a=[],s=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[s=(s+1)%e.length];return a.reverse().join(t)}}function Yy(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var qy=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ts(e){if(!(t=qy.exec(e)))throw new Error("invalid format: "+e);var t;return new Lo({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ts.prototype=Lo.prototype;function Lo(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Lo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xy(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Qu;function Ky(e,t){var n=es(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Qu=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+es(e,Math.max(0,t+a-1))[0]}function ed(e,t){var n=es(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const td={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Vy,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ed(e*100,t),r:ed,s:Ky,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nd(e){return e}var rd=Array.prototype.map,id=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Jy(e){var t=e.grouping===void 0||e.thousands===void 0?nd:Gy(rd.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?nd:Yy(rd.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"âˆ’":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function c(f){f=ts(f);var m=f.fill,p=f.align,y=f.sign,h=f.symbol,g=f.zero,b=f.width,w=f.comma,T=f.precision,S=f.trim,v=f.type;v==="n"?(w=!0,v="g"):td[v]||(T===void 0&&(T=12),S=!0,v="g"),(g||m==="0"&&p==="=")&&(g=!0,m="0",p="=");var j=h==="$"?n:h==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",N=h==="$"?r:/[%p]/.test(v)?s:"",M=td[v],_=/[defgprs%]/.test(v);T=T===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function P(k){var C=j,L=N,D,F,I;if(v==="c")L=M(k)+L,k="";else{k=+k;var $=k<0||1/k<0;if(k=isNaN(k)?u:M(Math.abs(k),T),S&&(k=Xy(k)),$&&+k==0&&y!=="+"&&($=!1),C=($?y==="("?y:l:y==="-"||y==="("?"":y)+C,L=(v==="s"?id[8+Qu/3]:"")+L+($&&y==="("?")":""),_){for(D=-1,F=k.length;++D<F;)if(I=k.charCodeAt(D),48>I||I>57){L=(I===46?i+k.slice(D+1):k.slice(D))+L,k=k.slice(0,D);break}}}w&&!g&&(k=t(k,1/0));var ee=C.length+k.length+L.length,Y=ee<b?new Array(b-ee+1).join(m):"";switch(w&&g&&(k=t(Y+k,Y.length?b-L.length:1/0),Y=""),p){case"<":k=C+k+L+Y;break;case"=":k=C+Y+k+L;break;case"^":k=Y.slice(0,ee=Y.length>>1)+C+k+L+Y.slice(ee);break;default:k=Y+C+k+L;break}return a(k)}return P.toString=function(){return f+""},P}function d(f,m){var p=c((f=ts(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Yr(m)/3)))*3,h=Math.pow(10,-y),g=id[8+y/3];return function(b){return p(h*b)+g}}return{format:c,formatPrefix:d}}var ns,ad,sd;Zy({thousands:",",grouping:[3],currency:["$",""]});function Zy(e){return ns=Jy(e),ad=ns.format,sd=ns.formatPrefix,ns}function Qy(e){return Math.max(0,-Yr(Math.abs(e)))}function ev(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yr(t)/3)))*3-Yr(Math.abs(e)))}function tv(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Yr(t)-Yr(e))+1}function nv(e,t,n,r){var i=To(e,t,n),a;switch(r=ts(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=ev(i,s))&&(r.precision=a),sd(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=tv(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Qy(i))&&(r.precision=a-(r.type==="%")*2);break}}return ad(r)}function rv(e){var t=e.domain;return e.ticks=function(n){var r=t();return hy(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return nv(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,s=r[i],l=r[a],u,c,d=10;for(l<s&&(c=s,s=l,l=c,c=i,i=a,a=c);d-- >0;){if(c=ko(s,l,n),c===u)return r[i]=s,r[a]=l,t(r);if(c>0)s=Math.floor(s/c)*c,l=Math.ceil(l/c)*c;else if(c<0)s=Math.ceil(s*c)/c,l=Math.floor(l*c)/c;else break;u=c}return e},e}function rs(){var e=Zu();return e.copy=function(){return Ju(e,rs())},qa.apply(e,arguments),rv(e)}function iv(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),e[n]=t.floor(i),e[r]=t.ceil(a),e}const Ao=new Date,Eo=new Date;function yt(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),l=i.ceil(a);return a-s<l-a?s:l},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,l)=>{const u=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return u;let c;do u.push(c=new Date(+a)),t(a,l),e(a);while(c<a&&a<s);return u},i.filter=a=>yt(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!a(s););else for(;--l>=0;)for(;t(s,1),!a(s););}),n&&(i.count=(a,s)=>(Ao.setTime(+a),Eo.setTime(+s),e(Ao),e(Eo),Math.floor(n(Ao,Eo))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const is=yt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);is.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?yt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):is),is.range;const Rn=1e3,tn=Rn*60,Hn=tn*60,zn=Hn*24,Bo=zn*7,od=zn*30,Oo=zn*365,qr=yt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Rn)},(e,t)=>(t-e)/Rn,e=>e.getUTCSeconds());qr.range;const Ro=yt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Rn)},(e,t)=>{e.setTime(+e+t*tn)},(e,t)=>(t-e)/tn,e=>e.getMinutes());Ro.range,yt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*tn)},(e,t)=>(t-e)/tn,e=>e.getUTCMinutes()).range;const Ho=yt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Rn-e.getMinutes()*tn)},(e,t)=>{e.setTime(+e+t*Hn)},(e,t)=>(t-e)/Hn,e=>e.getHours());Ho.range,yt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Hn)},(e,t)=>(t-e)/Hn,e=>e.getUTCHours()).range;const Ii=yt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*tn)/zn,e=>e.getDate()-1);Ii.range;const zo=yt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zn,e=>e.getUTCDate()-1);zo.range,yt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zn,e=>Math.floor(e/zn)).range;function _r(e){return yt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*tn)/Bo)}const as=_r(0),ss=_r(1),av=_r(2),sv=_r(3),Xr=_r(4),ov=_r(5),lv=_r(6);as.range,ss.range,av.range,sv.range,Xr.range,ov.range,lv.range;function xr(e){return yt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Bo)}const ld=xr(0),os=xr(1),cv=xr(2),uv=xr(3),Kr=xr(4),dv=xr(5),fv=xr(6);ld.range,os.range,cv.range,uv.range,Kr.range,dv.range,fv.range;const Fi=yt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Fi.range,yt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()).range;const Un=yt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Un.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),Un.range;const wr=yt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());wr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),wr.range;function hv(e,t,n,r,i,a){const s=[[qr,1,Rn],[qr,5,5*Rn],[qr,15,15*Rn],[qr,30,30*Rn],[a,1,tn],[a,5,5*tn],[a,15,15*tn],[a,30,30*tn],[i,1,Hn],[i,3,3*Hn],[i,6,6*Hn],[i,12,12*Hn],[r,1,zn],[r,2,2*zn],[n,1,Bo],[t,1,od],[t,3,3*od],[e,1,Oo]];function l(c,d,f){const m=d<c;m&&([c,d]=[d,c]);const p=f&&typeof f.range=="function"?f:u(c,d,f),y=p?p.range(c,+d+1):[];return m?y.reverse():y}function u(c,d,f){const m=Math.abs(d-c)/f,p=Co(([,,g])=>g).right(s,m);if(p===s.length)return e.every(To(c/Oo,d/Oo,f));if(p===0)return is.every(Math.max(To(c,d,f),1));const[y,h]=s[m/s[p-1][2]<s[p][2]/m?p-1:p];return y.every(h)}return[l,u]}const[mv,pv]=hv(Un,Fi,as,Ii,Ho,Ro);function Uo(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Wo(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $i(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function gv(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,s=e.shortDays,l=e.months,u=e.shortMonths,c=Li(i),d=Ai(i),f=Li(a),m=Ai(a),p=Li(s),y=Ai(s),h=Li(l),g=Ai(l),b=Li(u),w=Ai(u),T={a:$,A:ee,b:Y,B:H,c:null,d:md,e:md,f:Ov,g:Xv,G:Jv,H:Av,I:Ev,j:Bv,L:pd,m:Rv,M:Hv,p:U,q:z,Q:xd,s:wd,S:zv,u:Uv,U:Wv,V:Vv,w:Gv,W:Yv,x:null,X:null,y:qv,Y:Kv,Z:Zv,"%":_d},S={a:ie,A:W,b:le,B:je,c:null,d:bd,e:bd,f:n_,g:f_,G:m_,H:Qv,I:e_,j:t_,L:yd,m:r_,M:i_,p:de,q:fe,Q:xd,s:wd,S:a_,u:s_,U:o_,V:l_,w:c_,W:u_,x:null,X:null,y:d_,Y:h_,Z:p_,"%":_d},v={a:P,A:k,b:C,B:L,c:D,d:fd,e:fd,f:Iv,g:dd,G:ud,H:hd,I:hd,j:jv,L:Pv,m:Nv,M:Dv,p:_,q:Tv,Q:$v,s:Lv,S:Mv,u:xv,U:wv,V:Sv,w:_v,W:Cv,x:F,X:I,y:dd,Y:ud,Z:kv,"%":Fv};T.x=j(n,T),T.X=j(r,T),T.c=j(t,T),S.x=j(n,S),S.X=j(r,S),S.c=j(t,S);function j(Q,ae){return function(he){var q=[],me=-1,ce=0,B=Q.length,R,ne,pe;for(he instanceof Date||(he=new Date(+he));++me<B;)Q.charCodeAt(me)===37&&(q.push(Q.slice(ce,me)),(ne=cd[R=Q.charAt(++me)])!=null?R=Q.charAt(++me):ne=R==="e"?" ":"0",(pe=ae[R])&&(R=pe(he,ne)),q.push(R),ce=me+1);return q.push(Q.slice(ce,me)),q.join("")}}function N(Q,ae){return function(he){var q=$i(1900,void 0,1),me=M(q,Q,he+="",0),ce,B;if(me!=he.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(ae&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(ce=Wo($i(q.y,0,1)),B=ce.getUTCDay(),ce=B>4||B===0?os.ceil(ce):os(ce),ce=zo.offset(ce,(q.V-1)*7),q.y=ce.getUTCFullYear(),q.m=ce.getUTCMonth(),q.d=ce.getUTCDate()+(q.w+6)%7):(ce=Uo($i(q.y,0,1)),B=ce.getDay(),ce=B>4||B===0?ss.ceil(ce):ss(ce),ce=Ii.offset(ce,(q.V-1)*7),q.y=ce.getFullYear(),q.m=ce.getMonth(),q.d=ce.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),B="Z"in q?Wo($i(q.y,0,1)).getUTCDay():Uo($i(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(B+5)%7:q.w+q.U*7-(B+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,Wo(q)):Uo(q)}}function M(Q,ae,he,q){for(var me=0,ce=ae.length,B=he.length,R,ne;me<ce;){if(q>=B)return-1;if(R=ae.charCodeAt(me++),R===37){if(R=ae.charAt(me++),ne=v[R in cd?ae.charAt(me++):R],!ne||(q=ne(Q,he,q))<0)return-1}else if(R!=he.charCodeAt(q++))return-1}return q}function _(Q,ae,he){var q=c.exec(ae.slice(he));return q?(Q.p=d.get(q[0].toLowerCase()),he+q[0].length):-1}function P(Q,ae,he){var q=p.exec(ae.slice(he));return q?(Q.w=y.get(q[0].toLowerCase()),he+q[0].length):-1}function k(Q,ae,he){var q=f.exec(ae.slice(he));return q?(Q.w=m.get(q[0].toLowerCase()),he+q[0].length):-1}function C(Q,ae,he){var q=b.exec(ae.slice(he));return q?(Q.m=w.get(q[0].toLowerCase()),he+q[0].length):-1}function L(Q,ae,he){var q=h.exec(ae.slice(he));return q?(Q.m=g.get(q[0].toLowerCase()),he+q[0].length):-1}function D(Q,ae,he){return M(Q,t,ae,he)}function F(Q,ae,he){return M(Q,n,ae,he)}function I(Q,ae,he){return M(Q,r,ae,he)}function $(Q){return s[Q.getDay()]}function ee(Q){return a[Q.getDay()]}function Y(Q){return u[Q.getMonth()]}function H(Q){return l[Q.getMonth()]}function U(Q){return i[+(Q.getHours()>=12)]}function z(Q){return 1+~~(Q.getMonth()/3)}function ie(Q){return s[Q.getUTCDay()]}function W(Q){return a[Q.getUTCDay()]}function le(Q){return u[Q.getUTCMonth()]}function je(Q){return l[Q.getUTCMonth()]}function de(Q){return i[+(Q.getUTCHours()>=12)]}function fe(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var ae=j(Q+="",T);return ae.toString=function(){return Q},ae},parse:function(Q){var ae=N(Q+="",!1);return ae.toString=function(){return Q},ae},utcFormat:function(Q){var ae=j(Q+="",S);return ae.toString=function(){return Q},ae},utcParse:function(Q){var ae=N(Q+="",!0);return ae.toString=function(){return Q},ae}}}var cd={"-":"",_:" ",0:"0"},wt=/^\s*\d+/,bv=/^%/,yv=/[\\^$*+?|[\]().{}]/g;function Ve(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function vv(e){return e.replace(yv,"\\$&")}function Li(e){return new RegExp("^(?:"+e.map(vv).join("|")+")","i")}function Ai(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function _v(e,t,n){var r=wt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function xv(e,t,n){var r=wt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function wv(e,t,n){var r=wt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Sv(e,t,n){var r=wt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Cv(e,t,n){var r=wt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ud(e,t,n){var r=wt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function dd(e,t,n){var r=wt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function kv(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Tv(e,t,n){var r=wt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Nv(e,t,n){var r=wt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function fd(e,t,n){var r=wt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function jv(e,t,n){var r=wt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function hd(e,t,n){var r=wt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Dv(e,t,n){var r=wt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Mv(e,t,n){var r=wt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Pv(e,t,n){var r=wt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Iv(e,t,n){var r=wt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Fv(e,t,n){var r=bv.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $v(e,t,n){var r=wt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Lv(e,t,n){var r=wt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function md(e,t){return Ve(e.getDate(),t,2)}function Av(e,t){return Ve(e.getHours(),t,2)}function Ev(e,t){return Ve(e.getHours()%12||12,t,2)}function Bv(e,t){return Ve(1+Ii.count(Un(e),e),t,3)}function pd(e,t){return Ve(e.getMilliseconds(),t,3)}function Ov(e,t){return pd(e,t)+"000"}function Rv(e,t){return Ve(e.getMonth()+1,t,2)}function Hv(e,t){return Ve(e.getMinutes(),t,2)}function zv(e,t){return Ve(e.getSeconds(),t,2)}function Uv(e){var t=e.getDay();return t===0?7:t}function Wv(e,t){return Ve(as.count(Un(e)-1,e),t,2)}function gd(e){var t=e.getDay();return t>=4||t===0?Xr(e):Xr.ceil(e)}function Vv(e,t){return e=gd(e),Ve(Xr.count(Un(e),e)+(Un(e).getDay()===4),t,2)}function Gv(e){return e.getDay()}function Yv(e,t){return Ve(ss.count(Un(e)-1,e),t,2)}function qv(e,t){return Ve(e.getFullYear()%100,t,2)}function Xv(e,t){return e=gd(e),Ve(e.getFullYear()%100,t,2)}function Kv(e,t){return Ve(e.getFullYear()%1e4,t,4)}function Jv(e,t){var n=e.getDay();return e=n>=4||n===0?Xr(e):Xr.ceil(e),Ve(e.getFullYear()%1e4,t,4)}function Zv(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ve(t/60|0,"0",2)+Ve(t%60,"0",2)}function bd(e,t){return Ve(e.getUTCDate(),t,2)}function Qv(e,t){return Ve(e.getUTCHours(),t,2)}function e_(e,t){return Ve(e.getUTCHours()%12||12,t,2)}function t_(e,t){return Ve(1+zo.count(wr(e),e),t,3)}function yd(e,t){return Ve(e.getUTCMilliseconds(),t,3)}function n_(e,t){return yd(e,t)+"000"}function r_(e,t){return Ve(e.getUTCMonth()+1,t,2)}function i_(e,t){return Ve(e.getUTCMinutes(),t,2)}function a_(e,t){return Ve(e.getUTCSeconds(),t,2)}function s_(e){var t=e.getUTCDay();return t===0?7:t}function o_(e,t){return Ve(ld.count(wr(e)-1,e),t,2)}function vd(e){var t=e.getUTCDay();return t>=4||t===0?Kr(e):Kr.ceil(e)}function l_(e,t){return e=vd(e),Ve(Kr.count(wr(e),e)+(wr(e).getUTCDay()===4),t,2)}function c_(e){return e.getUTCDay()}function u_(e,t){return Ve(os.count(wr(e)-1,e),t,2)}function d_(e,t){return Ve(e.getUTCFullYear()%100,t,2)}function f_(e,t){return e=vd(e),Ve(e.getUTCFullYear()%100,t,2)}function h_(e,t){return Ve(e.getUTCFullYear()%1e4,t,4)}function m_(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Kr(e):Kr.ceil(e),Ve(e.getUTCFullYear()%1e4,t,4)}function p_(){return"+0000"}function _d(){return"%"}function xd(e){return+e}function wd(e){return Math.floor(+e/1e3)}var Jr,Sd;g_({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function g_(e){return Jr=gv(e),Sd=Jr.format,Jr.parse,Jr.utcFormat,Jr.utcParse,Jr}function b_(e){return new Date(e)}function y_(e){return e instanceof Date?+e:+new Date(+e)}function Cd(e,t,n,r,i,a,s,l,u,c){var d=Zu(),f=d.invert,m=d.domain,p=c(".%L"),y=c(":%S"),h=c("%I:%M"),g=c("%I %p"),b=c("%a %d"),w=c("%b %d"),T=c("%B"),S=c("%Y");function v(j){return(u(j)<j?p:l(j)<j?y:s(j)<j?h:a(j)<j?g:r(j)<j?i(j)<j?b:w:n(j)<j?T:S)(j)}return d.invert=function(j){return new Date(f(j))},d.domain=function(j){return arguments.length?m(Array.from(j,y_)):m().map(b_)},d.ticks=function(j){var N=m();return e(N[0],N[N.length-1],j??10)},d.tickFormat=function(j,N){return N==null?v:c(N)},d.nice=function(j){var N=m();return(!j||typeof j.range!="function")&&(j=t(N[0],N[N.length-1],j??10)),j?m(iv(N,j)):d},d.copy=function(){return Ju(d,Cd(e,t,n,r,i,a,s,l,u,c))},d}function Vo(){return qa.apply(Cd(mv,pv,Un,Fi,as,Ii,Ho,Ro,qr,Sd).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function v_({task:e,scale:t,onTaskClick:n,onTaskDoubleClick:r,isSelected:i=!1,taskIndex:a,tabIndex:s=-1,onFocus:l,"aria-label":u}){const c=E.useRef(null),[d,f]=E.useState(!1),[m,p]=E.useState(!1),y=t(e.start),h=t(e.end),g=Math.max(h-y,20),b=()=>{if(e.color)return e.color;switch(e.priority){case"high":return"#d5281b";case"medium":return"#005eb8";case"low":return"#007f3b";default:return"#005eb8"}},w=e.progress?g*e.progress/100:0,T=()=>{n?.(e)},S=()=>{r?.(e)},v=C=>{C.key==="Enter"?(C.preventDefault(),T()):C.key===" "&&(C.preventDefault(),S())},j=()=>{f(!0)},N=()=>{f(!1)},M=()=>{p(!0),l?.()},_=()=>{p(!1)},P=["gantt-task-bar",d&&"gantt-task-bar--pressed",(m||i)&&"gantt-task-bar--focused",e.priority&&`gantt-task-bar--priority-${e.priority}`,i&&"gantt-task-bar--selected",e.type&&`gantt-task-bar--type-${e.type}`].filter(Boolean).join(" "),k={"--task-left":`${y}px`,"--task-width":`${g}px`,"--task-color":b(),left:`${y}px`,width:`${g}px`,backgroundColor:b()};return o.jsxs("div",{role:"button",tabIndex:s,ref:c,"data-task-index":a,className:P,style:k,onClick:T,onDoubleClick:S,onKeyDown:v,onMouseDown:j,onMouseUp:N,onFocus:M,onBlur:_,"aria-label":u||`${i?"Selected: ":""}${e.title}: ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.priority?`, priority ${e.priority}`:""}${e.progress?`, ${e.progress}% complete`:""}`,"aria-describedby":`task-${e.id}-details`,children:[o.jsx("span",{className:"task-title",children:e.title}),e.progress!==void 0&&o.jsx("div",{className:"task-progress",style:{width:`${w}px`}}),o.jsx("span",{id:`task-${e.id}-details`,className:"sr-only",children:`Task: ${e.title}, from ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.progress?`, ${e.progress}% complete`:""}${e.priority?`, priority: ${e.priority}`:""}`})]})}function __({viewStart:e,viewEnd:t,dateCount:n}){const r=[];for(let p=e.getTime();p<=t.getTime();p+=864e5)r.push(new Date(p));const a=new Date;a.setHours(0,0,0,0);const[s,l]=E.useState(-1),u=E.useRef(null),c=p=>{if(p.key==="ArrowLeft"){p.preventDefault();const y=Math.max(0,s===-1?0:s-1);l(y),m(y)}else if(p.key==="ArrowRight"){p.preventDefault();const y=Math.min(r.length-1,s===-1?0:s+1);l(y),m(y)}else if(p.key==="ArrowDown")p.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .timeline-container"):null)?.focus();else if(p.key==="Home")p.preventDefault(),l(0),m(0);else if(p.key==="End"){p.preventDefault();const y=r.length-1;l(y),m(y)}},d=p=>{if(p.key==="ArrowDown")p.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .resource-label"):null)?.focus();else if(p.key==="ArrowRight"){p.preventDefault();const y=u.current;y&&y.focus()}},f=()=>{s===-1&&(l(0),setTimeout(()=>m(0),0))},m=p=>{const y=u.current?.querySelector(`[data-date-index="${p}"]`);y&&y.focus()};return o.jsxs("div",{className:"gantt-header",role:"row","aria-rowindex":1,children:[o.jsx("div",{className:"header-resource",role:"columnheader","aria-colindex":1,tabIndex:0,"aria-label":"Resource column header",onKeyDown:d,children:"Resources"}),o.jsx("div",{ref:u,className:"header-timeline",role:"columnheader","aria-colindex":2,"aria-colspan":n,"aria-label":`Timeline from ${e.toLocaleDateString()} to ${t.toLocaleDateString()}. Use arrow keys to navigate between dates`,tabIndex:0,onKeyDown:c,onFocus:f,children:r.map((p,y)=>{const h=p.getTime()===a.getTime(),g=s===y;return o.jsx("div",{"data-date-index":y,className:`date-column ${h?"today":""} ${g?"focused":""}`,tabIndex:g?0:-1,role:"button","aria-label":`${p.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}${h?" (Today)":""}`,onFocus:()=>l(y),onKeyDown:c,children:p.toLocaleDateString("en-GB",{day:"numeric",month:"short"})},y)})})]})}function x_({resource:e,tasks:t,scale:n,onTaskClick:r,onTaskDoubleClick:i,rowIndex:a,dateCount:s}){const[l,u]=E.useState(!1),[c,d]=E.useState(-1),f=E.useRef(null);E.useEffect(()=>{l&&c>=0&&t.length>0&&setTimeout(()=>{f.current?.querySelector(`[data-task-index="${c}"]`)?.focus()},0)},[l,c,t.length]);const m=h=>{if(h.key==="ArrowLeft"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(h.key==="ArrowRight"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!l){switch(h.key){case"ArrowUp":h.preventDefault(),a===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-timeline"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+1}"] .timeline-container`):null)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+3}"] .timeline-container`):null)?.focus();break;case"ArrowLeft":h.preventDefault(),f.current?.closest(".gantt-row")?.querySelector(".resource-label")?.focus();break;case"Enter":t.length>0&&(h.preventDefault(),u(!0),d(0));break}return}switch(h.key){case"ArrowLeft":h.preventDefault();const g=Math.max(0,c-1);d(g),f.current?.querySelector(`[data-task-index="${g}"]`)?.focus();break;case"ArrowRight":h.preventDefault();const w=Math.min(t.length-1,c+1);d(w),f.current?.querySelector(`[data-task-index="${w}"]`)?.focus();break;case"Enter":h.preventDefault(),c>=0&&r?.(t[c]);break;case" ":h.preventDefault(),c>=0&&i?.(t[c]);break;case"Escape":h.preventDefault(),u(!1),d(-1),f.current?.focus();break}},p=h=>{switch(h.key){case"ArrowUp":h.preventDefault(),a===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-resource"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+1}"] .resource-label`):null)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+3}"] .resource-label`):null)?.focus();break;case"ArrowRight":h.preventDefault(),f.current?.focus();break}},y=h=>{l&&d(h)};return o.jsxs("div",{className:"gantt-row",role:"row","aria-rowindex":a+2,children:[o.jsx("div",{className:"resource-label",role:"gridcell","aria-colindex":1,tabIndex:0,"aria-label":`Resource: ${e.label}`,onKeyDown:p,children:e.label}),o.jsx("div",{ref:f,className:`timeline-container ${l?"timeline-active":""}`,role:"gridcell","aria-colindex":2,"aria-colspan":s,tabIndex:0,"aria-label":`Timeline for ${e.label} with ${t.length} task${t.length!==1?"s":""}. Press Enter to activate task navigation, then use arrow keys to navigate, Enter to select, Space to activate, Escape to exit`,onKeyDown:m,onFocus:()=>{l||d(-1)},children:t.map((h,g)=>o.jsx(v_,{task:h,scale:n,onTaskClick:r,onTaskDoubleClick:i,isSelected:l&&c===g,taskIndex:g,tabIndex:l&&c===g?0:-1,onFocus:()=>y(g)},h.id))})]})}function w_({resources:e,tasks:t=[],viewStart:n,viewEnd:r,onTaskClick:i,onTaskDoubleClick:a}){const s=E.useRef(null),[l,u]=E.useState(800),c=E.useMemo(()=>{if(n instanceof Date)return isNaN(n.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):n;const h=new Date(n);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):h},[n]),d=E.useMemo(()=>{if(r instanceof Date)return isNaN(r.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):r;const h=new Date(r);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):h},[r]),f=E.useMemo(()=>Math.ceil((d.getTime()-c.getTime())/864e5)+1,[c,d]);E.useEffect(()=>{if(!s.current||typeof window>"u")return;const h=typeof ResizeObserver<"u"?ResizeObserver:void 0;if(!h)return;const g=new h(b=>{const w=b[0];w&&u(Math.max(w.contentRect.width-220,400))});return g.observe(s.current),()=>g.disconnect()},[]);const m=E.useMemo(()=>Vo().domain([c,d]).range([0,l]),[c,d,l]),p=E.useMemo(()=>{const h=new Map;return t.forEach(g=>{const b=h.get(g.resourceId)||[];b.push(g),h.set(g.resourceId,b)}),h},[t]),y=h=>{if(h.target===h.currentTarget)switch(h.key){case"ArrowDown":h.preventDefault(),typeof document<"u"&&s.current?.querySelector(".gantt-row .resource-label")?.focus();break;case"Home":h.preventDefault(),typeof document<"u"&&s.current?.querySelector(".header-resource")?.focus();break}};return o.jsxs("div",{className:"gantt-chart",role:"grid","aria-label":"Gantt Chart showing resource scheduling and task timelines","aria-rowcount":e.length+1,"aria-colcount":f+1,"aria-description":"Use arrow keys to navigate cells, Tab to cycle through tasks in timeline rows or dates in header, Enter to select task, Space to activate task, Alt+arrows to scroll the grid, Shift+arrows to scroll timeline rows",tabIndex:0,onKeyDown:y,children:[o.jsx(__,{viewStart:c,viewEnd:d,dateCount:f}),o.jsx("div",{ref:s,className:"gantt-grid",role:"rowgroup","aria-label":"Gantt chart data rows",tabIndex:0,onKeyDown:h=>{h.key==="ArrowLeft"&&h.altKey?(h.preventDefault(),s.current?.scrollBy({left:-50,behavior:"smooth"})):h.key==="ArrowRight"&&h.altKey?(h.preventDefault(),s.current?.scrollBy({left:50,behavior:"smooth"})):h.key==="ArrowUp"&&h.altKey?(h.preventDefault(),s.current?.scrollBy({top:-50,behavior:"smooth"})):h.key==="ArrowDown"&&h.altKey&&(h.preventDefault(),s.current?.scrollBy({top:50,behavior:"smooth"}))},children:e.map((h,g)=>o.jsx(x_,{resource:h,tasks:p.get(h.id)||[],scale:m,onTaskClick:i,onTaskDoubleClick:a,rowIndex:g,dateCount:f},h.id))})]})}const ls=({children:e,href:t,active:n=!1,attributes:r={}})=>o.jsx("li",{className:"nhsuk-breadcrumb__item",children:n?o.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",...r,children:e}):o.jsx("a",{className:"nhsuk-breadcrumb__link",href:t,...r,children:e})}),kd=({items:e=[],children:t,classes:n,labelText:r="Breadcrumb",href:i,text:a,reverse:s=!1,attributes:l={}})=>{const u=()=>t?E.Children.toArray(t).filter(g=>E.isValidElement(g)&&(g.type===ls||g.type?.displayName==="BreadcrumbItem")).map(g=>({text:typeof g.props.children=="string"?g.props.children:String(g.props.children),href:g.props.href,active:g.props.active,attributes:g.props.attributes})):[],c=()=>t?u():i&&a?[{href:i,text:a}]:e,d=()=>{const h=c();if(h&&h.length>0){const g=h.slice().reverse().find(b=>b.href&&!b.active);if(g)return{href:g.href,text:g.text}}return{text:"Home"}},f=c(),m=d(),p=xe("nhsuk-breadcrumb",{"nhsuk-breadcrumb--reverse":s},n),y=r;return o.jsxs("nav",{className:p,"aria-label":y,role:"navigation",...l,children:[o.jsx("ol",{className:"nhsuk-breadcrumb__list",role:"list",children:t?E.Children.map(t,(h,g)=>E.isValidElement(h)&&(h.type===ls||h.type?.displayName==="BreadcrumbItem")?E.cloneElement(h,{key:g}):null):f?.filter(h=>h.active||!!h.href).map((h,g)=>o.jsx("li",{className:"nhsuk-breadcrumb__item",role:"listitem",children:h.active?o.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",role:"text",...h.attributes||{},children:h.text}):o.jsx("a",{className:"nhsuk-breadcrumb__link",href:h.href,role:"link",...h.attributes||{},children:h.text})},g))}),m.href&&o.jsx("p",{className:"nhsuk-breadcrumb__back",children:o.jsxs("a",{className:"nhsuk-breadcrumb__backlink",href:m.href,role:"link","aria-label":`Back to ${m.text}`,...e.length>0?e[e.length-1]?.attributes||{}:{},children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Back to Â "}),m.text]})})]})};kd.Item=ls,ls.displayName="BreadcrumbItem";const Go=({text:e="Skip to main content",href:t="#maincontent",classes:n,attributes:r={}})=>{const[i,a]=E.useState(!1);E.useEffect(()=>{a(!0)},[]),E.useEffect(()=>{if(typeof window>"u"||typeof document>"u"||!document.querySelector||!document.querySelectorAll)return;const l=u=>{const c=u.target,d=c.getAttribute("href");if(d&&d.startsWith("#")){const f=typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(d):null;if(f){f.hasAttribute("tabindex")||f.setAttribute("tabindex","-1"),f.focus(),f.classList.add("nhsuk-skip-link-focused-element");const m=window.setTimeout(()=>{f.classList.remove("nhsuk-skip-link-focused-element"),f.getAttribute("tabindex")==="-1"&&f.removeAttribute("tabindex")},3e3);c.__nhsSkipLinkTimeout=m}}};try{const u=document.querySelectorAll(".nhsuk-skip-link");return u.forEach(c=>{c.addEventListener("click",l)}),()=>{try{u.forEach(c=>{c.removeEventListener("click",l);const d=c.__nhsSkipLinkTimeout;d&&window.clearTimeout&&window.clearTimeout(d)})}catch(c){console.warn("SkipLink cleanup error:",c)}}}catch(u){return console.warn("SkipLink initialization error:",u),()=>{}}},[i]);const s=xe("nhsuk-skip-link",n);return o.jsx("a",{className:s,href:t,"data-module":"nhsuk-skip-link","data-enhanced":i?"true":"false",...r,children:e})},S_=({previousUrl:e,previousPage:t,nextUrl:n,nextPage:r,classes:i,attributes:a={}})=>{const s=xe("nhsuk-pagination",i);return o.jsx("nav",{className:s,role:"navigation","aria-label":"Pagination",...a,children:o.jsxs("ul",{className:"nhsuk-list nhsuk-pagination__list",children:[e&&t&&o.jsx("li",{className:"nhsuk-pagination-item--previous",children:o.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--prev",href:e,children:[o.jsx("span",{className:"nhsuk-pagination__title",children:"Previous"}),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),o.jsx("span",{className:"nhsuk-pagination__page",children:t}),o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{d:"M4.1 12.3l2.7 3c.2.2.5.2.7 0 .1-.1.1-.2.1-.3v-2h11c.6 0 1-.4 1-1s-.4-1-1-1h-11V9c0-.2-.1-.4-.3-.5h-.2c-.1 0-.3.1-.4.2l-2.7 3c0 .2 0 .4.1.6z"})})]})}),n&&r&&o.jsx("li",{className:"nhsuk-pagination-item--next",children:o.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--next",href:n,children:[o.jsx("span",{className:"nhsuk-pagination__title",children:"Next"}),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),o.jsx("span",{className:"nhsuk-pagination__page",children:r}),o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{d:"M19.6 11.66l-2.73-3A.51.51 0 0 0 16 9v2H5a1 1 0 0 0 0 2h11v2a.5.5 0 0 0 .32.46.39.39 0 0 0 .18 0 .52.52 0 0 0 .37-.16l2.73-3a.5.5 0 0 0 0-.64z"})})]})})]})})},C_=({items:e,classes:t,ariaLabel:n="Pages in this guide",attributes:r={}})=>{const i=xe("nhsuk-contents-list",t),a=(s,l)=>s.current?o.jsx("li",{className:"nhsuk-contents-list__item","aria-current":"page",...s.attributes||{},children:o.jsx("span",{className:"nhsuk-contents-list__current",children:s.text})},l):o.jsx("li",{className:"nhsuk-contents-list__item",children:o.jsx("a",{className:"nhsuk-contents-list__link",href:s.href,...s.attributes||{},children:s.text})},l);return o.jsxs("nav",{className:i,role:"navigation","aria-label":n,...r,children:[o.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Contents"}),o.jsx("ol",{className:"nhsuk-contents-list__list",children:e.map((s,l)=>a(s,l))})]})},Yo=E.forwardRef(({variant:e="default",heading:t,headingHtml:n,headingLevel:r=2,headingClasses:i,description:a,descriptionHtml:s,href:l,imgURL:u,imgAlt:c,...d},f)=>{const m=["nhsuk-card",e==="clickable"&&"nhsuk-card--clickable",e==="secondary"&&"nhsuk-card--secondary",e==="feature"&&"nhsuk-card--feature",d.className].filter(Boolean).join(" "),p=["nhsuk-card__content",e==="feature"&&"nhsuk-card__content--feature",e==="primary"&&"nhsuk-card__content--primary",e==="secondary"&&"nhsuk-card__content--secondary"].filter(Boolean).join(" "),y=["nhsuk-card__heading",e==="feature"&&"nhsuk-card__heading--feature",i].filter(Boolean).join(" "),h=()=>{if(n)return o.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const w=()=>l&&e!=="feature"?o.jsx("a",{className:"nhsuk-card__link",href:l,children:t}):t;return o.jsx(yn,{level:r,className:y,children:w()})},g=()=>d.children?d.children:s?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):a?o.jsx("p",{className:"nhsuk-card__description",children:a}):null,b=()=>e!=="primary"?null:o.jsxs("svg",{className:"nhsuk-icon",xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27","aria-hidden":"true",focusable:"false",children:[o.jsx("circle",{cx:"13.333",cy:"13.333",r:"13.333",fill:""}),o.jsxs("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2.667",children:[o.jsx("path",{d:"M15.438 13l-3.771 3.771"}),o.jsx("path",{d:"M11.667 9.229L15.438 13"})]})]});return o.jsxs("div",{...d,className:m,ref:f,children:[u&&o.jsx("img",{className:"nhsuk-card__img",src:u,alt:c||""}),o.jsxs("div",{className:p,children:[h(),g(),b()]})]})});Yo.displayName="Card";const k_=({className:e,children:t,"data-testid":n,id:r})=>{const i=["nhsuk-card-group",e].filter(Boolean).join(" ");return o.jsx("ul",{className:i,"data-testid":n,id:r,children:t})},T_=({className:e,children:t,"data-testid":n})=>{const r=["nhsuk-card-group__item",e].filter(Boolean).join(" ");return o.jsx("li",{className:r,"data-testid":n,children:t})},N_=({type:e,heading:t,headingHtml:n,headingLevel:r=3,headingClasses:i,description:a,descriptionHtml:s,className:l,children:u,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":m,"aria-describedby":p})=>{const y=["nhsuk-care-card",`nhsuk-care-card--${e}`,l].filter(Boolean).join(" "),h=["nhsuk-care-card__heading",i].filter(Boolean).join(" "),g=()=>{if(n)return o.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const w={"non-urgent":"Non-urgent advice:",urgent:"Urgent advice:",emergency:"Immediate action required:"}[e],T=o.jsxs("span",{role:"text",children:[o.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[w," "]}),t]});return o.jsx(yn,{level:r,className:h,children:T})},b=()=>u||(s?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):a?o.jsx("p",{className:"nhsuk-care-card__text",children:a}):null);return o.jsxs("div",{className:y,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":m,"aria-describedby":p,children:[o.jsxs("div",{className:"nhsuk-care-card__heading-container",children:[g(),o.jsx("span",{className:"nhsuk-care-card__arrow","aria-hidden":"true"})]}),o.jsx("div",{className:"nhsuk-care-card__content",children:b()})]})},Td=({id:e,className:t,headingText:n,headingHtml:r,headingLevel:i=2,bodyText:a,bodyHtml:s,children:l,...u})=>{const c=xe("nhsuk-panel",t),d=()=>!n&&!r&&!l?null:r?o.jsx(yn,{level:i,className:"nhsuk-panel__heading",html:r,marginBottom:"var(--panel-heading-margin, 24px)"}):n?o.jsx(yn,{level:i,className:"nhsuk-panel__heading",text:n,marginBottom:"var(--panel-heading-margin, 24px)"}):null,f=()=>l?o.jsx("div",{className:"nhsuk-panel__body",children:l}):s?o.jsx("div",{className:"nhsuk-panel__body",dangerouslySetInnerHTML:{__html:s}}):a?o.jsx("div",{className:"nhsuk-panel__body",children:o.jsx("p",{children:a})}):null;return o.jsxs("div",{className:c,id:e,...u,children:[d(),f()]})},j_=({text:e,html:t,children:n,className:r,...i})=>{const a=xe("nhsuk-inset-text",r),s=()=>n||(t?o.jsx("div",{dangerouslySetInnerHTML:{__html:t}}):e?o.jsx("p",{children:e}):null);return o.jsx("div",{className:a,...i,children:s()})},D_=({items:e,noBorder:t=!1,className:n,...r})=>{const i=xe("nhsuk-summary-list",{"nhsuk-summary-list--no-border":t},n),a=l=>l.children?l.children:l.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text?l.text:null,s=l=>!l||!l.items.length?null:o.jsx("dd",{className:"nhsuk-summary-list__actions",children:o.jsx("ul",{className:"nhsuk-summary-list__actions-list",children:l.items.map((u,c)=>o.jsx("li",{className:"nhsuk-summary-list__actions-list-item",children:o.jsxs("a",{href:u.href,className:"nhsuk-link",...u.attributes,children:[a(u),u.visuallyHiddenText&&o.jsx("span",{className:"nhsuk-u-visually-hidden",children:u.visuallyHiddenText})]})},c))})});return o.jsx("div",{className:"nhsuk-summary-list-container",children:o.jsx("dl",{className:i,...r,children:e.map((l,u)=>o.jsxs("div",{className:"nhsuk-summary-list__row",children:[o.jsx("dt",{className:"nhsuk-summary-list__key",children:a(l.key)}),o.jsx("dd",{className:"nhsuk-summary-list__value",children:a(l.value)}),s(l.actions)]},u))})})},Ei={current:null},M_=()=>{if(Ei.current)return Ei.current;try{Ei.current=require("prismjs");try{require("prismjs/components/prism-typescript")}catch{}try{require("prismjs/components/prism-tsx")}catch{}try{require("prismjs/components/prism-json")}catch{}}catch{Ei.current=null}return Ei.current},P_=e=>{const t=[{regex:/\b(import|from|export|const|let|var|return|if|else|for|while|switch|case|break|new|throw|try|catch|finally|class|extends|implements|interface|type|as|async|await|function)\b/g,cls:"kw"},{regex:/(['"`])(?:\\.|(?!\1).)*\1/g,cls:"str"},{regex:/\/\*[^]*?\*\/|\/\/.*$/gm,cls:"com"},{regex:/\b([0-9]+(?:\.[0-9]+)?)\b/g,cls:"num"}];let n=e;return t.forEach(r=>{n=n.replace(r.regex,i=>`<span class="nhsuk-code-${r.cls}">${i}</span>`)}),n},cs=(e,t,n)=>{if(n||!t)return e;const r=M_();if(r&&r.languages){const i=r.languages[t]?t:r.languages.typescript&&(t==="ts"||t==="tsx"||t==="typescript")?"typescript":r.languages.json&&t==="json"?"json":void 0;if(i)try{return r.highlight(e,r.languages[i],i)}catch{}}return P_(e)},I_=({rows:e,head:t,caption:n,captionSize:r,firstCellIsHeader:i=!1,responsive:a=!1,heading:s,headingLevel:l=3,panel:u=!1,panelClasses:c,tableClasses:d,classes:f,attributes:m,"data-testid":p,columns:y,data:h,visuallyHiddenCaption:g=!1})=>{const b=`nhsuk-table__caption ${r?`nhsuk-table__caption--${r}`:""}`.trim(),w=xe("nhsuk-table",{"nhsuk-table-responsive":a},d),T=xe(f),S=(_,P)=>{const k=xe("nhsuk-table__header",{[`nhsuk-table__header--${_.format}`]:_.format},_.classes),C={scope:"col",..._.colspan&&{colSpan:_.colspan},..._.rowspan&&{rowSpan:_.rowspan},...a&&{role:"columnheader"},..._.attributes};let L;if(_.node!=null)L=o.jsx(o.Fragment,{children:_.node});else if(_.html)L=o.jsx("span",{dangerouslySetInnerHTML:{__html:_.html}});else if(_.code!=null){const D=Array.isArray(_.code),F=D?_.code.join(`
`):_.code,I=D||F.includes(`
`),$={className:xe("nhsuk-table__code",_.codeClassName,{"nhsuk-table__code--block":I,"nhsuk-table__code--inline":!I}),..._.codeLanguage?{"data-language":_.codeLanguage}:{}},ee=cs(F,_.codeLanguage);L=I?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...$,dangerouslySetInnerHTML:{__html:ee}})}):o.jsx("code",{...$,dangerouslySetInnerHTML:{__html:ee}})}else L=_.text;return o.jsx("th",{className:k,...C,children:L},P)},v=(_,P,k)=>{const C=i&&k||_.rowHeader,L=xe(C?"nhsuk-table__header":"nhsuk-table__cell",{[`nhsuk-table__${C?"header":"cell"}--${_.format}`]:_.format},_.classes),D={...C&&{scope:"row"},..._.colspan&&{colSpan:_.colspan},..._.rowspan&&{rowSpan:_.rowspan},...a&&{role:C?"rowheader":"cell",..._.header&&{"data-label":_.header}},..._.attributes};let F;if(_.node!=null)F=o.jsx(o.Fragment,{children:_.node});else if(_.html)F=o.jsx("span",{dangerouslySetInnerHTML:{__html:_.html}});else if(_.code!=null){const ee=Array.isArray(_.code),Y=ee?_.code.join(`
`):_.code,H=ee||Y.includes(`
`),U={className:xe("nhsuk-table__code",_.codeClassName,{"nhsuk-table__code--block":H,"nhsuk-table__code--inline":!H}),..._.codeLanguage?{"data-language":_.codeLanguage}:{}},z=cs(Y,_.codeLanguage,_.disableHighlight);F=H?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...U,dangerouslySetInnerHTML:{__html:z}})}):o.jsx("code",{...U,dangerouslySetInnerHTML:{__html:z}})}else F=_.text;const I=o.jsxs(o.Fragment,{children:[a&&_.header&&o.jsxs("span",{className:"nhsuk-table-responsive__heading","aria-hidden":"true",children:[_.header," "]}),F]}),$=C?"th":"td";return o.jsx($,{className:L,...D,children:I},P)};let j=t,N=e;!j&&y&&y.length&&(j=y.map(_=>({text:_.title,format:_.format,classes:_.headerClasses,attributes:_.headerAttributes}))),!N&&y&&h&&h.length&&(N=h.map((_,P)=>y.map(k=>{const C=k.accessor?k.accessor(_,P):_[k.key];let L={format:k.format,classes:k.cellClasses,attributes:k.cellAttributes};if(k.rowHeader&&(L.rowHeader=!0),k.render){const D=k.render(C,_,P,k);return D==null||typeof D=="boolean"?{...L,text:""}:typeof D=="string"||typeof D=="number"?{...L,text:String(D)}:{...L,...D}}return{...L,text:C!=null?String(C):""}})));const M=()=>o.jsxs("table",{className:w,...a&&{role:"table"},...m,...p&&{"data-testid":p},children:[n&&o.jsx("caption",{className:xe(b,g&&"nhsuk-u-visually-hidden"),children:n}),j&&j.length>0&&o.jsx("thead",{className:"nhsuk-table__head",...a&&{role:"rowgroup"},children:o.jsx("tr",{...a&&{role:"row"},children:j.map((_,P)=>S(_,P))})}),o.jsx("tbody",{className:"nhsuk-table__body",children:N&&N.map((_,P)=>o.jsx("tr",{className:"nhsuk-table__row",...a&&{role:"row"},children:_.map((k,C)=>v(k,C,C===0))},P))})]});return u?o.jsxs(Td,{className:c,children:[s&&o.jsx(yn,{level:l,className:"nhsuk-table__heading-tab",children:s}),M()]}):T?o.jsx("div",{className:T,children:M()}):M()},F_=({children:e,size:t,className:n})=>{const r=xe("nhsuk-table__caption",t&&`nhsuk-table__caption--${t}`,n);return o.jsx("caption",{className:r,children:e})},Nd=({responsive:e,className:t,children:n,...r})=>{const i=e?{role:"row"}:{};return o.jsx("tr",{className:t,...i,...r,children:n})},jd=({text:e,html:t,node:n,code:r,codeLanguage:i,codeClassName:a,disableHighlight:s,format:l,classes:u,colspan:c,rowspan:d,attributes:f,responsive:m,as:p="th"})=>{const y=xe("nhsuk-table__header",{[`nhsuk-table__header--${l}`]:l},u),h={scope:"col",...c&&{colSpan:c},...d&&{rowSpan:d},...m&&{role:"columnheader"},...f};let g;if(n!=null)g=o.jsx(o.Fragment,{children:n});else if(t)g=o.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const w=Array.isArray(r),T=w?r.join(`
`):r,S=w||T.includes(`
`),v={className:xe("nhsuk-table__code",a,{"nhsuk-table__code--block":S,"nhsuk-table__code--inline":!S}),...i?{"data-language":i}:{}},j=cs(T,i,s);g=S?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...v,dangerouslySetInnerHTML:{__html:j}})}):o.jsx("code",{...v,dangerouslySetInnerHTML:{__html:j}})}else g=e;const b=p;return o.jsx(b,{className:y,...h,children:g})},$_=({text:e,html:t,node:n,code:r,codeLanguage:i,codeClassName:a,disableHighlight:s,format:l,classes:u,colspan:c,rowspan:d,attributes:f,responsive:m,rowHeader:p})=>{const y=!!p,h=y?"th":"td",g=xe(y?"nhsuk-table__header":"nhsuk-table__cell",l&&`nhsuk-table__${y?"header":"cell"}--${l}`,u),b={...c&&{colSpan:c},...d&&{rowSpan:d},...y&&{scope:"row"},...m&&{role:y?"rowheader":"cell"},...f};let w;if(n!=null)w=o.jsx(o.Fragment,{children:n});else if(t)w=o.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const T=Array.isArray(r),S=T?r.join(`
`):r,v=T||S.includes(`
`),j={className:xe("nhsuk-table__code",a,{"nhsuk-table__code--block":v,"nhsuk-table__code--inline":!v}),...i?{"data-language":i}:{}},N=cs(S,i,s);w=v?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...j,dangerouslySetInnerHTML:{__html:N}})}):o.jsx("code",{...j,dangerouslySetInnerHTML:{__html:N}})}else w=e;return o.jsx(h,{className:g,...b,children:w})},_n=I_;_n.Caption=F_,_n.BodyRow=Nd,_n.HeaderCell=jd,_n.Cell=$_;let Dd=!1,Md=!1;Object.defineProperty(_n,"Row",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!Dd&&(console.warn("Table.Row is deprecated. Use Table.BodyRow instead."),Dd=!0),Nd}}),Object.defineProperty(_n,"TH",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!Md&&(console.warn("Table.TH is deprecated. Use Table.HeaderCell instead."),Md=!0),jd}});const L_=E.forwardRef(({items:e,defaultActiveTab:t,activeTab:n,onTabChange:r,onTabFocus:i,onTabListBlur:a,onEscape:s,autoActivate:l=!0,className:u,id:c,"data-testid":d,...f},m)=>{const p=n!==void 0,[y,h]=E.useState(()=>t||e[0]?.id||""),g=p?n:y,b=E.useRef(null),w=E.useRef(new Map),T=E.useCallback(P=>{p||h(P),r?.(P)},[p,r]),S=E.useCallback(P=>{i?.(P),l&&T(P)},[i,l,T]),v=E.useCallback((P,k)=>{const C=e.filter(F=>!F.disabled).map(F=>F.id),L=C.indexOf(k);let D=null;switch(P.key){case"ArrowLeft":D=L>0?L-1:C.length-1;break;case"ArrowRight":D=L<C.length-1?L+1:0;break;case"Home":D=0;break;case"End":D=C.length-1;break;case"Escape":P.preventDefault(),s?.();return;default:return}if(D!==null){P.preventDefault();const F=C[D],I=w.current.get(F);I&&(I.focus(),S(F))}},[e,S,s]),j=E.useCallback((P,k)=>{k?w.current.set(P,k):w.current.delete(P)},[]),N=E.useCallback(P=>{const k=w.current.get(P);k&&k.focus()},[]);E.useImperativeHandle(m,()=>({focusTab:N,getActiveTab:()=>g,getTabListElement:()=>b.current}),[N,g]);const M=E.useCallback(P=>{const k=P.relatedTarget;b.current?.contains(k)||a?.()},[a]),_=xe("nhsuk-tabs",u);return o.jsxs("div",{className:_,id:c,"data-testid":d,...f,children:[o.jsx("h2",{className:"nhsuk-tabs__title",children:"Contents"}),o.jsx("div",{className:"nhsuk-tabs__list-container",ref:b,children:o.jsx("ul",{className:"nhsuk-tabs__list",role:"tablist",onBlur:M,children:e.map(P=>{const k=P.id===g,C=P.disabled,L=xe("nhsuk-tabs__list-item",{"nhsuk-tabs__list-item--selected":k,"nhsuk-tabs__list-item--disabled":C});return o.jsx("li",{className:L,role:"presentation",children:o.jsx("button",{ref:D=>j(P.id,D),className:"nhsuk-tabs__tab",role:"tab","aria-selected":k,"aria-controls":`${P.id}-panel`,id:`${P.id}-tab`,tabIndex:k?0:-1,disabled:C,onClick:()=>!C&&T(P.id),onKeyDown:D=>!C&&v(D,P.id),onFocus:()=>!C&&S(P.id),...P.attributes,children:P.label})},P.id)})})}),e.map(P=>{const k=P.id===g;return o.jsx("div",{className:"nhsuk-tabs__panel",role:"tabpanel","aria-labelledby":`${P.id}-tab`,id:`${P.id}-panel`,hidden:!k,children:P.content},P.id)})]})}),Pd=E.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:i=!1,className:a="",id:s,children:l,...u},c)=>{const d=["nhsuk-details",a].filter(Boolean).join(" "),f=t?o.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):o.jsx("span",{className:"nhsuk-details__summary-text",children:e});let m;return l?m=l:r?m=o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(m=n),o.jsxs("details",{ref:c,id:s,className:d,open:i,...u,children:[o.jsx("summary",{className:"nhsuk-details__summary",tabIndex:0,children:f}),o.jsx("div",{className:"nhsuk-details__text",children:m})]})});Pd.displayName="Details";const Id=E.forwardRef(({title:e,type:t,items:n,hidePrefix:r=!1,headingLevel:i=3,className:a,...s},l)=>{const u=["nhsuk-do-dont-list"];a&&u.push(a);const c=["nhsuk-list",t==="tick"?"nhsuk-list--tick":"nhsuk-list--cross"],d=()=>t==="cross"?o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:[o.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),o.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]}):o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})}),f=p=>t==="cross"&&!r?`do not ${p}`:p,m=()=>o.jsx(yn,{level:i,className:"nhsuk-do-dont-list__label",text:e});return o.jsxs("div",{ref:l,className:u.join(" "),...s,children:[m(),o.jsx("div",{className:"nhsuk-do-dont-list__content--feature",children:o.jsx("ul",{className:c.join(" "),role:"list",children:n.map((p,y)=>o.jsxs("li",{children:[d(),f(p.item)]},y))})})]})});Id.displayName="DoDontList";const Fd=E.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:i=!1,className:a="",id:s,children:l,...u},c)=>{const d=["nhsuk-expander",a].filter(Boolean).join(" "),f=t?o.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):o.jsx("span",{className:"nhsuk-details__summary-text",children:e});let m;return l?m=l:r?m=o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(m=n),o.jsxs("details",{ref:c,id:s,className:d,open:i,...u,children:[o.jsx("summary",{className:"nhsuk-details__summary",children:f}),o.jsx("div",{className:"nhsuk-details__text",children:m})]})});Fd.displayName="Expander";const $d=E.forwardRef(({items:e,idPrefix:t="task-list",className:n,...r},i)=>{const a=["nhsuk-task-list",n].filter(Boolean).join(" "),s=(l,u)=>{const c=u+1,d=`${t}-${c}-hint`,f=`${t}-${c}-status`,m=!!l.href,p=["nhsuk-task-list__item",m&&"nhsuk-task-list__item--with-link",l.classes].filter(Boolean).join(" "),y=[l.hint&&d,f].filter(Boolean).join(" ");return o.jsx(A_,{item:l,itemClasses:p,hasLink:m,hintId:d,statusId:f,ariaDescribedBy:y},u)};return o.jsx("ul",{ref:i,className:a,...r,children:e.map(s)})}),A_=({item:e,itemClasses:t,hasLink:n,hintId:r,statusId:i,ariaDescribedBy:a})=>{const s=()=>{const c=e.title.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:e.title.html}}):e.title.text,d=[n?"nhsuk-task-list__link":"",e.title.classes].filter(Boolean).join(" ");return n?o.jsx("a",{className:d,href:e.href,"aria-describedby":a,children:c}):o.jsx("div",{className:e.title.classes||"",children:c})},l=()=>e.hint?e.hint.html?o.jsx("div",{id:r,className:"nhsuk-task-list__hint",dangerouslySetInnerHTML:{__html:e.hint.html}}):o.jsx("div",{id:r,className:"nhsuk-task-list__hint",children:e.hint.text}):null,u=()=>{const c=["nhsuk-task-list__status",e.status.classes].filter(Boolean).join(" ");let d;return e.status.tag?d=o.jsx(Ye,{...e.status.tag}):e.status.html?d=o.jsx("span",{dangerouslySetInnerHTML:{__html:e.status.html}}):d=e.status.text,o.jsx("div",{className:c,id:i,children:d})};return o.jsxs("li",{className:t,children:[o.jsxs("div",{className:"nhsuk-task-list__name-and-hint",children:[s(),l()]}),u()]})};$d.displayName="TaskList";const E_=({heading:e,headingLevel:t=3,text:n,html:r,children:i,className:a,...s})=>{const l=/important/i.test(e),u=()=>i||(r?o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n?o.jsx("p",{children:n}):null),c=["nhsuk-warning-callout",a].filter(Boolean).join(" "),d=`h${t}`;return o.jsxs("div",{className:c,...s,children:[E.createElement(d,{className:"nhsuk-warning-callout__label"},l?o.jsxs(o.Fragment,{children:[e,o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"})]}):o.jsxs("span",{role:"text",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Important: "}),e]})),u()]})},B_=({src:e,alt:t,caption:n,sizes:r,srcset:i,className:a,...s})=>{const l=["nhsuk-image",a].filter(Boolean).join(" ");return o.jsxs("figure",{className:l,...s,children:[o.jsx("img",{className:"nhsuk-image__img",src:e,alt:t,...r&&i?{sizes:r,srcSet:i}:{}}),n&&o.jsx("figcaption",{className:"nhsuk-image__caption",dangerouslySetInnerHTML:{__html:n}})]})},O_=({dateRange:e,onPrev:t,onNext:n,onToday:r,density:i,onDensityChange:a,a11yMode:s,onA11yModeChange:l})=>o.jsxs("div",{className:"nhs-slot-matrix__toolbar",role:"group","aria-label":"Slot matrix controls",children:[o.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[o.jsx(xt,{variant:"secondary",size:"small",onClick:t,"aria-label":"Previous date range",children:"Prev"}),o.jsx(xt,{variant:"secondary",size:"small",onClick:r,"aria-label":"Jump to today",children:"Today"}),o.jsx(xt,{variant:"secondary",size:"small",onClick:n,"aria-label":"Next date range",children:"Next"}),o.jsxs("span",{className:"nhs-slot-matrix__toolbar-daterange","aria-live":"polite",children:[e.start.toDateString()," â€“ ",e.end.toDateString()]})]}),o.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[o.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-density-select",children:"Density"}),o.jsx(Ni,{id:"slot-matrix-density-select",name:"slot-matrix-density",ariaLabel:"Change density",value:i,onChange:u=>a?.(u.target.value),options:[{value:"comfortable",text:"Comfortable"},{value:"compact",text:"Compact"}]}),o.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-mode-select",children:"Mode"}),o.jsx(Ni,{id:"slot-matrix-mode-select",name:"slot-matrix-mode",ariaLabel:"Change accessibility mode",value:s,onChange:u=>l?.(u.target.value),options:[{value:"grid",text:"Grid"},{value:"list",text:"List"}]})]})]}),R_=({items:e,orientation:t="horizontal"})=>o.jsx("div",{className:`nhs-slot-matrix__legend nhs-slot-matrix__legend--${t}`,role:"list","aria-label":"Slot legend",children:e.map(n=>o.jsx("div",{role:"listitem",className:"nhs-slot-matrix__legend-item",children:o.jsx(Ye,{color:H_(n.status),text:n.label})},n.status))});function H_(e){switch(e){case"available":return"green";case"full":return"grey";case"overbook":return"orange";case"held":return"yellow";case"blocked":return"grey";default:return"default"}}const z_=({slots:e,sessions:t,value:n,defaultValue:r,onChange:i,selectionMode:a="single",a11yMode:s,className:l,style:u,getSlotAriaLabel:c,toolbar:d,enableDefaultToolbar:f=!0,legendItems:m,enableDefaultLegend:p=!0,legendPlacement:y="bottom",onA11yModeChange:h})=>{const[g,b]=E.useState("grid"),w=s||g,[T,S]=E.useState(r||[]),v=n??T,j=E.useMemo(()=>{const D=new Set;return e.forEach(F=>D.add(new Date(F.start).getTime())),Array.from(D).sort((F,I)=>F-I)},[e]),N=E.useMemo(()=>{const D={};return e.forEach(F=>{const I=new Date(F.start).getTime();D[I]||(D[I]={});const $=F.capacity-F.booked-(F.held||0);D[I][F.sessionId]={slot:F,remaining:$}}),D},[e]),M=E.useCallback(D=>{if(a==="single"){const F=[D.id];n||S(F),i?.(F,{lastAction:"select"})}else{const F=v.includes(D.id),I=F?v.filter($=>$!==D.id):[...v,D.id];n||S(I),i?.(I,{lastAction:F?"deselect":"select"})}},[a,v,n,i]),_=E.useMemo(()=>m||(p?Array.from(new Set(e.map(F=>F.status))).map(F=>({status:F,label:F.charAt(0).toUpperCase()+F.slice(1)})):void 0),[m,p,e]),P=_?o.jsx(R_,{items:_,orientation:y==="left"||y==="right"?"vertical":"horizontal"}):null,k=D=>{s||b(D),h?.(D)},C=d||(f?o.jsx(O_,{dateRange:{start:new Date,end:new Date},density:"comfortable",a11yMode:w,onA11yModeChange:k}):null),L=o.jsx("div",{style:u,className:xe(l),children:o.jsx(Wa,{className:xe("nhs-slot-matrix-grid-wrapper"),children:o.jsx(nr,{children:o.jsx(Wr,{width:tr.Full,children:o.jsxs("div",{className:"nhs-slot-matrix",children:[C,y==="top"&&P,o.jsx("ul",{"aria-label":"Appointment slots list",children:e.map(D=>o.jsx("li",{children:o.jsxs("button",{type:"button",onClick:()=>M(D),"aria-pressed":v.includes(D.id),children:[Bi(new Date(D.start))," â€“ ",Bi(new Date(D.end))," (",D.status,")"]})},D.id))}),y==="bottom"&&P]})})})})});return w==="list"?L:o.jsx("div",{style:u,className:xe(l),children:o.jsx(Wa,{className:xe("nhs-slot-matrix-grid-wrapper"),children:o.jsx(nr,{children:o.jsx(Wr,{width:tr.Full,children:o.jsxs("div",{className:"nhs-slot-matrix",children:[C,y==="top"&&P,o.jsxs("div",{role:"grid","aria-rowcount":j.length+1,"aria-colcount":t.length+1,children:[o.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[o.jsx("div",{role:"columnheader","aria-label":"Timebands",className:"nhs-slot-matrix__timeband-header"}),t.map(D=>o.jsx("div",{role:"columnheader","aria-label":`Session ${D.specialty}`,className:"nhs-slot-matrix__session-header",children:D.specialty},D.id))]}),j.map(D=>o.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[o.jsx("div",{role:"rowheader",className:"nhs-slot-matrix__timeband-header","aria-label":Bi(new Date(D)),children:Bi(new Date(D))}),t.map(F=>{const I=N[D]?.[F.id];if(!I)return o.jsx("div",{role:"gridcell",className:"nhs-slot-matrix__cell","aria-disabled":"true"},F.id);const{slot:$,remaining:ee}=I,Y=v.includes($.id),H=c?c($):`Slot ${Bi(new Date($.start))} ${$.status}${ee===0?" full":""}`;return o.jsx("button",{type:"button",role:"gridcell","data-status":$.status,className:xe("nhs-slot-matrix__cell",Y&&"nhs-slot-matrix__cell--selected"),"aria-label":H,"aria-selected":Y||void 0,onClick:()=>M($),children:ee>0?`${ee} left`:"Full"},$.id)})]},D))]}),y==="bottom"&&P]})})})})})};function Ld(e){return e<10?`0${e}`:`${e}`}function Bi(e){return`${Ld(e.getHours())}:${Ld(e.getMinutes())}`}const Ad=({title:e,value:t,subtitle:n,variant:r="default",href:i,className:a="",ariaLabel:s,...l})=>{const u=["nhs-fdp-summary-card",`nhs-fdp-summary-card--${r}`,a].filter(Boolean).join(" "),c=o.jsxs(o.Fragment,{children:[o.jsx(yn,{level:3,className:"nhs-fdp-summary-card__title",children:e}),o.jsx("p",{className:"nhs-fdp-summary-card__value",children:t}),n&&o.jsx("p",{className:"nhs-fdp-summary-card__subtitle",children:n})]});return i?o.jsx("a",{className:`${u} nhs-fdp-summary-card--clickable`,href:i,"aria-label":s||`${e}: ${t}`,...l,children:c}):o.jsx("div",{className:u,"aria-label":s,...l,children:c})},U_=({cards:e,className:t="",...n})=>{const r=["nhs-fdp-dashboard-summary-grid",t].filter(Boolean).join(" ");return o.jsx("div",{className:r,...n,children:o.jsx(Wa,{children:o.jsx(nr,{children:e.map((i,a)=>o.jsx(Wr,{width:tr.OneQuarter,className:"nhs-fdp-dashboard-summary-grid__column","data-card-index":a,children:o.jsx(Ad,{...i})},a))})})})},Ed=E.forwardRef(({data:e,columns:t,sortConfig:n,onSort:r,selectedRowIndex:i,onRowSelect:a,id:s,testId:l,ariaLabel:u,ariaLabelledby:c,ariaDescribedby:d,className:f,tableClassName:m,bordered:p=!1,striped:y=!1,responsive:h=!1,tableType:g="default"},b)=>{const w=E.useRef(null),T=E.useRef(null),S=E.useRef(null);E.useImperativeHandle(b,()=>w.current,[]);const[v,j]=E.useState(0),[N,M]=E.useState(0),[_,P]=E.useState("headers"),[k,C]=E.useState("browse"),L=t.length,D=e.length,F=E.useMemo(()=>!n||n.length===0?e:[...e].sort((z,ie)=>{for(const{key:W,direction:le}of n){const je=z[W],de=ie[W];if(je==null&&de==null)continue;if(je==null)return 1;if(de==null)return-1;let fe=0;if(typeof je=="number"&&typeof de=="number"?fe=je-de:fe=String(je).localeCompare(String(de)),fe!==0)return le==="asc"?fe:-fe}return 0}),[e,n]),I=E.useCallback((z,ie)=>{setTimeout(()=>{const W=w.current?.querySelector(`tbody tr:nth-child(${z+1}) td:nth-child(${ie+1})`);W&&(W.focus(),typeof W.scrollIntoView=="function"&&W.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),$=E.useCallback(z=>{setTimeout(()=>{const ie=w.current?.querySelector(`th:nth-child(${z+1})`);ie&&(ie.focus(),typeof ie.scrollIntoView=="function"&&ie.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),ee=E.useCallback(z=>{r?.(z)},[r]),Y=E.useCallback(z=>{a?.(z)},[a]),H=E.useCallback(z=>{const{key:ie}=z;switch(ie){case"Enter":if(z.preventDefault(),_==="headers"&&k==="browse")C("navigate"),$(N);else if(_==="headers"&&k==="navigate"){const W=t[N];W&&ee(W.key)}else _==="cells"&&k==="browse"?(C("navigate"),I(v,N)):_==="cells"&&k==="navigate"&&Y(v);break;case"Escape":z.preventDefault(),(_==="headers"&&k==="navigate"||_==="cells"&&k==="navigate")&&C("browse");break;case"ArrowLeft":if(z.preventDefault(),k==="navigate"||k==="browse"&&_==="headers"){if(_==="headers"){const W=Math.max(0,N-1);M(W),$(W)}else if(_==="cells"){const W=Math.max(0,N-1);M(W),I(v,W)}}break;case"ArrowRight":if(z.preventDefault(),k==="navigate"||k==="browse"&&_==="headers"){if(_==="headers"){const W=Math.min(L-1,N+1);M(W),$(W)}else if(_==="cells"){const W=Math.min(L-1,N+1);M(W),I(v,W)}}break;case"ArrowUp":if(z.preventDefault(),_==="cells"){if(k==="browse"){const W=Math.max(0,v-1);j(W),I(W,0),M(0)}else if(k==="navigate")if(v>0){const W=v-1;j(W),I(W,N)}else P("headers"),C("browse"),$(N)}break;case"ArrowDown":if(z.preventDefault(),_==="headers"&&k==="browse")P("cells"),j(0),M(0),I(0,0);else if(_==="cells"){const W=D-1;if(k==="browse"){const le=Math.min(W,v+1);j(le),I(le,0),M(0)}else if(k==="navigate"&&v<W){const le=v+1;j(le),I(le,N)}}break;case"Home":z.preventDefault(),_==="headers"?(M(0),$(0)):_==="cells"&&(z.ctrlKey?(j(0),M(0),I(0,0)):(M(0),I(v,0)));break;case"End":if(z.preventDefault(),_==="headers"){const W=L-1;M(W),$(W)}else if(_==="cells")if(z.ctrlKey){const W=D-1,le=L-1;j(W),M(le),I(W,le)}else{const W=L-1;M(W),I(v,W)}break;case" ":if(z.preventDefault(),_==="headers"&&k==="navigate"){const W=t[N];W&&ee(W.key)}else _==="cells"&&k==="navigate"&&Y(v);break}},[_,k,N,v,L,D,t,I,$,ee,Y]);E.useEffect(()=>{const z=w.current;if(z)return z.addEventListener("keydown",H),()=>z.removeEventListener("keydown",H)},[H]);const U=xe("nhsuk-table",m,{"nhsuk-table--responsive":h,"nhsuk-table--bordered":p,"nhsuk-table--striped":y,"nhsuk-table--compact":g==="compact"},f);return o.jsxs("table",{ref:w,className:U,id:s,"data-testid":l,role:"grid","aria-label":u,"aria-labelledby":c,"aria-describedby":d,tabIndex:0,children:[o.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:o.jsx("tr",{ref:T,role:"row",children:t.map((z,ie)=>{const W=n?.find(de=>de.key===z.key),le=!!W,je=_==="headers"&&N===ie;return o.jsx("th",{className:xe("sortable-header",{"sortable-header--focused":je}),role:"columnheader",tabIndex:je?0:-1,onClick:()=>ee(z.key),onKeyDown:de=>{(de.key==="Enter"||de.key===" ")&&(de.preventDefault(),ee(z.key))},"aria-sort":le?W?.direction==="asc"?"ascending":"descending":"none",children:o.jsxs("div",{className:"header-content",children:[o.jsx("span",{className:"header-label",children:z.label}),le&&o.jsxs("span",{className:"sort-indicator","aria-hidden":"true",children:[n&&n.length>1&&o.jsx("span",{className:"sort-priority",children:n.findIndex(de=>de.key===z.key)+1}),o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",className:"sort-arrow",children:W?.direction==="asc"?o.jsx("path",{d:"M6 2L2 8h8L6 2z"}):o.jsx("path",{d:"M6 10L2 4h8L6 10z"})})]})]})},z.key)})})}),o.jsx("tbody",{ref:S,className:"nhsuk-table__body",role:"rowgroup",children:F.map((z,ie)=>{const W=i===ie,le=_==="cells"&&v===ie;return o.jsx("tr",{role:"row",className:xe("data-row",{"data-row--selected":W,"data-row--focused":le}),"aria-selected":W,children:t.map((je,de)=>{const fe=je.tableRenderer?je.tableRenderer(z):je.render?je.render(z):z[je.key],Q=_==="cells"&&v===ie&&N===de,ae=()=>typeof fe=="boolean"?o.jsxs(o.Fragment,{children:[o.jsx("span",{"aria-hidden":"true",children:fe?"âœ“":"âœ—"}),o.jsx("span",{className:"sr-only",children:fe?"Yes":"No"})]}):String(fe??"");return o.jsx("td",{role:"gridcell",className:xe("data-cell",{"data-cell--focused":Q}),tabIndex:Q?0:-1,onClick:()=>Y(ie),children:ae()},je.key)})},ie)})})]})});Ed.displayName="AriaDataGrid";const Bd=({sortConfig:e,columns:t,onSortChange:n,className:r="",emptyDescription:i="No sorting applied",activeDescription:a,showReset:s=!0,showHelp:l=!0,disabled:u=!1,ariaLabel:c="Sort configuration",ariaDescribedBy:d})=>{const f=E.useRef(null),m=E.useRef(null),p=E.useRef(null),y=E.useCallback((_,P)=>{u||(m.current=P,_.dataTransfer.effectAllowed="move",_.dataTransfer.setData("text/plain",P))},[u]),h=E.useCallback((_,P)=>{u||m.current===P||(_.preventDefault(),_.dataTransfer.dropEffect="move",p.current=P)},[u]),g=E.useCallback((_,P)=>{if(u)return;_.preventDefault();const k=m.current;if(!k||k===P)return;const C=e.findIndex(D=>D.key===k),L=e.findIndex(D=>D.key===P);if(C!==-1&&L!==-1){const D=[...e],[F]=D.splice(C,1);D.splice(L,0,F),n(D)}m.current=null,p.current=null},[u,e,n]),b=E.useCallback(()=>{m.current=null,p.current=null},[]),w=E.useCallback(_=>{const P=t.find(k=>k.key===_);return P?P.label:_},[t]),T=E.useCallback(_=>["red","orange","blue","aqua-green","grey"][_]||"grey",[]),S=E.useCallback(_=>{if(u)return;const P=e.map(k=>k.key===_?{...k,direction:k.direction==="asc"?"desc":"asc"}:k);n(P)},[e,n,u]),v=E.useCallback(_=>{if(u)return;const P=e.filter(k=>k.key!==_);n(P)},[e,n,u]),j=E.useCallback(()=>{u||n([])},[n,u]),N=()=>{if(e.length===0)return i;if(a)return a;const _=e.map((P,k)=>{const C=P.direction==="asc"?"ascending":"descending";return`${k+1}. ${w(P.key)} (${C})`});if(_.length===1)return`Sorted by: ${_[0]}`;if(_.length===2)return`Sorted by: ${_.join(" and ")}`;{const P=_.pop();return`Sorted by: ${_.join(", ")}, and ${P}`}},M=E.useMemo(()=>{const _=["sort-description"];return l&&_.push("sort-help"),d&&_.push(d),_.join(" ")},[l,d]);return e.length===0?o.jsxs("div",{className:`sort-status-control ${r}`,children:[o.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:i}),l&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]}):o.jsxs("div",{className:`sort-status-control ${r}`,children:[o.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:N()}),o.jsxs("div",{className:"sort-status-container",children:[o.jsx("div",{ref:f,className:"sort-status-control__tags",role:"list","aria-label":c,"aria-describedby":M,children:e.map((_,P)=>o.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",draggable:!u,onDragStart:k=>y(k,_.key),onDragOver:k=>h(k,_.key),onDrop:k=>g(k,_.key),onDragEnd:b,onClick:()=>S(_.key),style:{cursor:u?"default":"pointer"},title:u?"":`Click to toggle sort direction. Currently ${_.direction==="asc"?"ascending":"descending"}`,"data-key":_.key,children:o.jsx(Ye,{color:T(P),className:"sort-status-control__tag",closable:!0,onClose:()=>v(_.key),disabled:u,children:o.jsxs("div",{className:"sort-status-control__tag-content",children:[o.jsx("div",{className:"sort-status-control__drag-handle",title:"Drag to reorder",children:"â‹®â‹®"}),o.jsx("div",{className:`sort-status-control__priority-badge sort-priority sort-priority--priority-${P+1}`,children:P+1}),o.jsx("span",{className:"sort-status-control__tag-label",children:w(_.key)}),o.jsx("button",{type:"button",className:"sort-status-control__direction-button",onClick:k=>{k.stopPropagation(),S(_.key)},disabled:u,"aria-label":`Toggle sort direction for ${w(_.key)}. Currently ${_.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:o.jsx("span",{className:`sort-status-control__direction-icon sort-status-control__direction-icon--${_.direction}`,children:o.jsx("svg",{className:`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${_.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})})})]})})},_.key))}),s&&o.jsx("div",{className:"sort-status-control__actions",children:o.jsx(xt,{variant:"secondary",onClick:j,disabled:u,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})})]}),l&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]})};function W_(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const i=[...e.selectedRows];return i[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:i};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:a}=t.payload,s=new Array(a).fill(!1),l=new Array(a).fill(null),u=new Array(a).fill([]);for(let c=0;c<Math.min(e.tabLoadingStates.length,a);c++)s[c]=e.tabLoadingStates[c],l[c]=e.tabErrors[c],u[c]=e.selectedRows[c];return{...e,tabLoadingStates:s,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}const us=E.forwardRef(function(t,n){const{dataConfig:r={},tabPanels:i,selectedIndex:a,onTabChange:s,onGlobalRowSelectionChange:l,ariaLabel:u,ariaDescription:c,className:d="",disabled:f=!1,orientation:m="horizontal",id:p,isLoading:y=!1,loadingComponent:h,error:g=null,errorComponent:b,"data-testid":w,actions:T,actionsMinGap:S=16,forceActionsAbove:v=!1}=t,N=E.useRef(p||`aria-tabs-datagrid-${Math.random().toString(36).slice(2,9)}`).current,M=typeof c=="string"&&c.trim()!==""&&!/\s/.test(c),_=`${N}-description`,P=`${N}-navigation-help`,{dataComparator:k=(A,X)=>JSON.stringify(A)===JSON.stringify(X),filterFunction:C=A=>A,booleanRenderer:L=A=>A?"âœ“":"âœ—"}=r||{},D=a!==void 0,F=a??0,[I,$]=E.useState({focusArea:"tabs",focusedTabIndex:F,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}),ee=E.useMemo(()=>({selectedIndex:F,tabLoadingStates:new Array(i.length).fill(!1),tabErrors:new Array(i.length).fill(null),sortConfig:[],selectedRows:new Array(i.length).fill([]),globalSelectedRowData:null,filters:void 0}),[F]),[Y,H]=E.useReducer(W_,ee);E.useEffect(()=>{const A=Y.tabLoadingStates.length,X=i.length;A!==X&&H({type:"ADJUST_ARRAYS",payload:{newLength:X}})},[i.length]),E.useEffect(()=>{D&&H({type:"SET_SELECTED_INDEX",payload:F})},[F,D]),E.useEffect(()=>{$(A=>({...A,focusArea:"tabs",focusedTabIndex:Y.selectedIndex,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}))},[Y.selectedIndex]),E.useEffect(()=>{l&&l(Y.globalSelectedRowData)},[Y.globalSelectedRowData,l]);const U=E.useCallback((A,X)=>k(A,X),[k]),z=E.useCallback(A=>{A>=0&&A<i.length&&!i[A].disabled&&(H({type:"SET_SELECTED_INDEX",payload:A}),$(X=>({...X,focusedTabIndex:A,focusArea:"tabs"})),s?.(A))},[i,s]),ie=E.useRef(!1),W=E.useCallback((A,X)=>{if(!X?.force&&!ie.current&&A===0){ie.current=!0;return}ie.current=!0,setTimeout(()=>{const te=le.current[A],re=te?.parentElement;if(te&&re){const Z=te.offsetLeft,se=te.offsetWidth,be=re.clientWidth,_e=Z-be/2+se/2;try{re.scrollTo({left:Math.max(0,_e),behavior:"smooth"})}catch{te.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}}else process.env.SILENCE_SCROLL_DEBUG||console.debug("[AriaTabsDataGrid] Missing elements for scroll",{tabElementExists:!!te,tabListElementExists:!!re})},50)},[]),le=E.useRef([]),je=E.useRef([]),de=E.useCallback((A,X)=>{const te=Y.sortConfig||[],re=te.find(be=>be.key===X);let Z;re?re.direction==="asc"?Z=te.map(be=>be.key===X?{...be,direction:"desc"}:be):Z=te.filter(be=>be.key!==X):Z=[...te,{key:X,direction:"asc"}],H({type:"SET_SORT",payload:Z}),i[A].onSort?.(X)},[Y.sortConfig,i]),fe=E.useCallback(A=>{setTimeout(()=>{const X=document.querySelector(`[data-tab-panel="${Y.selectedIndex}"] th:nth-child(${A+1})`);X&&X.focus()},0)},[Y.selectedIndex]),Q=E.useCallback(A=>L(A),[L]),ae=E.useCallback((A,X)=>{setTimeout(()=>{const te=document.querySelector(`[data-tab-panel="${Y.selectedIndex}"] tbody tr:nth-child(${A+1}) td:nth-child(${X+1})`);te&&te.focus()},0)},[Y.selectedIndex]);E.useEffect(()=>{I.isGridActive&&(I.focusArea==="headers"?setTimeout(()=>{fe(I.focusedHeaderIndex)},0):I.focusArea==="cells"&&setTimeout(()=>{ae(I.focusedRowIndex,I.focusedColumnIndex)},0))},[I.focusArea,I.isGridActive,I.focusedHeaderIndex,I.focusedRowIndex,I.focusedColumnIndex,fe,ae]),E.useEffect(()=>{W(Y.selectedIndex)},[Y.selectedIndex,W]);const he=E.useCallback((A,X)=>{const{key:te}=A,re=i[Y.selectedIndex],Z=re?.columns.length||0;switch(te){case"ArrowLeft":A.preventDefault();const se=Math.max(0,X-1);$(we=>({...we,focusedHeaderIndex:se})),fe(se);break;case"ArrowRight":A.preventDefault();const be=Math.min(Z-1,X+1);$(we=>({...we,focusedHeaderIndex:be})),fe(be);break;case"ArrowUp":A.preventDefault(),$(we=>({...we,focusArea:"tabs",focusedTabIndex:Y.selectedIndex})),W(Y.selectedIndex),le.current[Y.selectedIndex]?.focus();break;case"ArrowDown":A.preventDefault(),$(we=>({...we,focusArea:"cells",focusedRowIndex:0,focusedColumnIndex:X,isGridActive:!0}));break;case"Home":A.preventDefault(),$(we=>({...we,focusedHeaderIndex:0})),fe(0);break;case"End":A.preventDefault();const _e=Z-1;$(we=>({...we,focusedHeaderIndex:_e})),fe(_e);break;case"Enter":case" ":A.preventDefault();const Te=re?.columns[X]?.key;Te&&de(Y.selectedIndex,Te);break}},[i,Y.selectedIndex,de,$,fe,ae,le]),q=E.useCallback((A,X,te)=>{const{key:re}=A,Z=i[Y.selectedIndex],se=Z?.data.length||0,be=Z?.columns.length||0;switch(re){case"ArrowUp":if(A.preventDefault(),X===0)$(ye=>({...ye,focusArea:"headers",focusedHeaderIndex:te,isGridActive:!1})),fe(te);else{const ye=X-1;$($e=>({...$e,focusedRowIndex:ye})),ae(ye,te)}break;case"ArrowDown":A.preventDefault();const _e=Math.min(se-1,X+1);$(ye=>({...ye,focusedRowIndex:_e})),ae(_e,te);break;case"ArrowLeft":A.preventDefault();const Te=Math.max(0,te-1);$(ye=>({...ye,focusedColumnIndex:Te})),ae(X,Te);break;case"ArrowRight":A.preventDefault();const we=Math.min(be-1,te+1);$(ye=>({...ye,focusedColumnIndex:we})),ae(X,we);break;case"Home":A.preventDefault(),A.ctrlKey?($(ye=>({...ye,focusedRowIndex:0,focusedColumnIndex:0})),ae(0,0)):($(ye=>({...ye,focusedColumnIndex:0})),ae(X,0));break;case"End":if(A.preventDefault(),A.ctrlKey){const ye=se-1,$e=be-1;$(ze=>({...ze,focusedRowIndex:ye,focusedColumnIndex:$e})),ae(ye,$e)}else{const ye=be-1;$($e=>({...$e,focusedColumnIndex:ye})),ae(X,ye)}break;case"Enter":case" ":if(A.preventDefault(),Z&&Z.data[X]){const ye=Z.data.some(at=>"ews_data"in at)?C(Z.data,Y.filters):Z.data,$e=Y.sortConfig;let ze=ye;if($e&&$e.length>0&&(ze=[...ye].sort((at,Ue)=>{for(const{key:Qe,direction:ln}of $e){let Et=at[Qe],Ft=Ue[Qe];const st=Z.columns.find(Jn=>Jn.key===Qe);if(st?.tableRenderer?(Et=st.tableRenderer(at),Ft=st.tableRenderer(Ue)):st?.render&&(Et=st.render(at),Ft=st.render(Ue)),Et==null&&Ft==null)continue;if(Et==null)return ln==="asc"?-1:1;if(Ft==null)return ln==="asc"?1:-1;let ft=0;if(typeof Et=="number"&&typeof Ft=="number"?ft=Et-Ft:ft=String(Et).localeCompare(String(Ft),void 0,{numeric:!0,sensitivity:"base"}),ft!==0)return ln==="asc"?ft:-ft}return 0})),ze[X]){const at=ze[X],Qe=Y.globalSelectedRowData&&U(Y.globalSelectedRowData,at)?null:at;H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:Qe})}}break}},[i,Y.selectedIndex,Y.filters,Y.sortConfig,C,U,H,$,fe,ae]),me=E.useCallback((A,X)=>C(A,X),[C]);if(E.useImperativeHandle(n,()=>({selectTab:A=>{A>=0&&A<i.length&&(H({type:"SET_SELECTED_INDEX",payload:A}),s?.(A))},refreshData:A=>{console.log("Refreshing data for tab:",A??"all")},exportData:A=>{const X=A??Y.selectedIndex,te=i[X];return te?te.data:[]},getSelectedRows:A=>Y.globalSelectedRowData?[]:[],clearSelection:A=>{H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:null})},applyFilters:A=>{H({type:"SET_FILTERS",payload:A})}}),[Y.selectedIndex,Y.selectedRows,i,s]),y)return o.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--loading ${d}`,"data-testid":w,children:h||o.jsx("div",{className:"aria-tabs-datagrid__loading",children:o.jsx("div",{className:"nhsuk-spinner",role:"status","aria-label":"Loading data",children:o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Loading..."})})})});if(g)return o.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--error ${d}`,"data-testid":w,children:b||o.jsxs("div",{className:"aria-tabs-datagrid__error",role:"alert",children:[o.jsx("h3",{className:"nhsuk-error-summary__title",children:"Error loading data"}),o.jsx("p",{children:g})]})});const ce=E.useRef(null),B=E.useRef(null),R=E.useRef(null),[ne,pe]=E.useState(!0);E.useEffect(()=>{if(!T){pe(!1);return}if(v){pe(!1);return}function A(){if(!ce.current||!B.current||!R.current)return;const re=ce.current.clientWidth,Z=Array.from(B.current.querySelectorAll(":scope > .aria-tabs-datagrid__tab")),se=Z.reduce((we,ye)=>we+ye.offsetWidth,0),be=R.current.offsetWidth,_e=Math.max(8*(Z.length-1),0),Te=se+_e+be+S<=re;pe(Te)}const X=requestAnimationFrame(()=>A()),te=new ResizeObserver(()=>A());return ce.current&&te.observe(ce.current),B.current&&te.observe(B.current),()=>{cancelAnimationFrame(X),te.disconnect()}},[T,S,v,i.length]);const ue=R,oe=E.useCallback(()=>ue.current?Array.from(ue.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(A=>!A.hasAttribute("disabled")):[],[]),O=E.useCallback(A=>{const X=oe();if(!X.length)return;const te=Math.max(0,Math.min(A,X.length-1));X[te].focus(),$(re=>({...re,focusArea:"actions",focusedActionIndex:te}))},[oe]),V=E.useCallback(()=>O(0),[O]),G=E.useCallback((A,X)=>{const{key:te}=A,re=i.length-1;switch(te){case"ArrowUp":{T&&!ne&&(A.preventDefault(),V());break}case"ArrowLeft":{A.preventDefault();const Z=X>0?X-1:re;z(Z),W(Z),le.current[Z]?.focus();break}case"ArrowRight":{if(A.preventDefault(),X===re&&T&&ne){V();return}const Z=X<re?X+1:0;z(Z),W(Z),le.current[Z]?.focus();break}case"ArrowDown":{A.preventDefault(),$(Z=>({...Z,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));break}case"Home":{A.preventDefault(),z(0),W(0),le.current[0]?.focus();break}case"End":{A.preventDefault(),z(re),W(re),le.current[re]?.focus();break}case"Enter":case" ":{A.preventDefault(),z(X);break}case"Tab":{!A.shiftKey&&X===re&&T&&ne&&V();break}}},[i.length,z,W,T,ne,V]),J=E.useCallback(A=>{const{key:X}=A,te=oe();if(!te.length)return;const re=te.findIndex(Z=>Z===document.activeElement);switch(X){case"ArrowLeft":{if(ne)if(re>0)A.preventDefault(),O(re-1);else{A.preventDefault();const Z=i.length-1;z(Z),W(Z),le.current[Z]?.focus(),$(se=>({...se,focusArea:"tabs",focusedTabIndex:Z}))}break}case"ArrowRight":{ne&&(re<te.length-1?(A.preventDefault(),O(re+1)):(A.preventDefault(),z(0),W(0),le.current[0]?.focus(),$(Z=>({...Z,focusArea:"tabs",focusedTabIndex:0}))));break}case"ArrowDown":{if(ne)A.preventDefault(),$(Z=>({...Z,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));else{A.preventDefault();const Z=Y.selectedIndex;le.current[Z]?.focus(),$(se=>({...se,focusArea:"tabs",focusedTabIndex:Z}))}break}}},[oe,ne,O,i.length,z,W,Y.selectedIndex]);return o.jsxs("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--${m} ${d}`,id:p,"data-testid":w,ref:ce,children:[c&&!M&&o.jsx("div",{id:_,className:"nhsuk-u-visually-hidden",children:c}),o.jsx("div",{className:"aria-tabs-datagrid__navigation-help sr-only",id:P,children:"Keyboard navigation: Use Tab to move between tabs and grid. Arrow keys navigate within tabs and grid cells. Enter activates tabs and sorts columns. Arrow Down from tabs moves to table headers. Arrow Down from headers moves to table cells. Use Arrow keys to navigate between cells."}),o.jsx(Bd,{sortConfig:Y.sortConfig||[],columns:i.flatMap(A=>A.columns.map(X=>({key:X.key,label:X.label}))).filter((A,X,te)=>te.findIndex(re=>re.key===A.key)===X),onSortChange:A=>{H({type:"SET_SORT",payload:A})},ariaLabel:"Data grid sort configuration"}),T&&!ne&&o.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above",ref:R,role:"toolbar","aria-label":"Additional actions",onKeyDown:J,children:T}),o.jsxs("div",{className:`aria-tabs-datagrid__tabs-wrapper ${ne?"aria-tabs-datagrid__tabs-wrapper--inline-actions":""}`,children:[o.jsx("div",{role:"tablist","aria-label":u,"aria-describedby":c?M?c:_:P,"aria-orientation":m,className:"aria-tabs-datagrid__tabs",ref:B,children:i.map((A,X)=>{const te=X===Y.selectedIndex,re=A.disabled||f;return o.jsxs("button",{role:"tab",id:`tab-${A.id}`,"aria-controls":`panel-${A.id}`,"aria-selected":te,"aria-disabled":re,tabIndex:te?0:-1,ref:Z=>{le.current[X]=Z},onClick:()=>z(X),onKeyDown:Z=>G(Z,X),disabled:re,className:["aria-tabs-datagrid__tab",te?"aria-tabs-datagrid__tab--selected":"",re?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[o.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:A.label}),Y.tabLoadingStates[X]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),Y.tabErrors[X]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},A.id)})}),T&&ne&&o.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline",ref:R,role:"toolbar","aria-label":"Additional actions",onKeyDown:J,children:T})]}),i.map((A,X)=>{const te=X===Y.selectedIndex;return o.jsx("div",{role:"tabpanel",id:`panel-${A.id}`,"aria-labelledby":`tab-${A.id}`,tabIndex:0,hidden:!te,ref:re=>{je.current[X]=re},className:`aria-tabs-datagrid__panel ${A.className||""}`,"data-tab-panel":X,children:te&&(()=>{const re=A.data.some(se=>"ews_data"in se)?me(A.data,Y.filters):A.data,Z=E.useMemo(()=>{const se=Y.sortConfig;return!se||se.length===0?re:[...re].sort((be,_e)=>{for(const{key:Te,direction:we}of se){let ye=be[Te],$e=_e[Te];const ze=A.columns.find(Ue=>Ue.key===Te);if(ze?.tableRenderer?(ye=ze.tableRenderer(be),$e=ze.tableRenderer(_e)):ze?.render&&(ye=ze.render(be),$e=ze.render(_e)),ye==null&&$e==null)continue;if(ye==null)return 1;if($e==null)return-1;let at=0;if(typeof ye=="number"&&typeof $e=="number"?at=ye-$e:typeof ye=="boolean"&&typeof $e=="boolean"?at=ye===$e?0:ye?1:-1:at=String(ye).localeCompare(String($e),void 0,{numeric:!0,sensitivity:"base"}),at!==0)return we==="asc"?at:-at}return 0})},[re,Y.sortConfig,A.columns]);return o.jsxs("table",{className:"nhsuk-table aria-tabs-datagrid__grid",role:"grid","aria-label":A.ariaLabel,"aria-describedby":A.ariaDescription?`panel-${A.id}-description`:void 0,children:[A.ariaDescription&&o.jsx("caption",{className:"nhsuk-u-visually-hidden",id:`panel-${A.id}-description`,children:A.ariaDescription}),o.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:o.jsx("tr",{role:"row",children:A.columns.map((se,be)=>{const _e=Y.sortConfig?.find(ye=>ye.key===se.key),Te=!!_e,we=I.focusArea==="headers"&&I.focusedHeaderIndex===be;return o.jsx("th",{className:`sortable-header ${we?"sortable-header--focused":""} ${Te?"sortable-header--sorted":""}`,role:"columnheader",tabIndex:we?0:-1,onClick:()=>de(X,se.key),onKeyDown:ye=>he(ye,be),"aria-sort":Te?_e?.direction==="asc"?"ascending":"descending":"none",children:o.jsxs("div",{className:"header-content",children:[o.jsx("span",{className:"header-label",children:se.label}),o.jsxs("div",{className:`sort-indicator-container ${Te?`sort-indicator--${_e?.direction}`:""}`,children:[Y.sortConfig&&Y.sortConfig.length>0&&Y.sortConfig.findIndex(ye=>ye.key===se.key)!==-1&&o.jsx("span",{className:`sort-priority sort-priority--priority-${Y.sortConfig.findIndex(ye=>ye.key===se.key)+1}`,"data-priority":Y.sortConfig.findIndex(ye=>ye.key===se.key)+1,title:`Sort priority: ${Y.sortConfig.findIndex(ye=>ye.key===se.key)+1}`,children:Y.sortConfig.findIndex(ye=>ye.key===se.key)+1}),Te&&o.jsx("svg",{className:`nhsuk-icon sort-arrow sort-arrow--${_e?.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})]})]})},se.key)})})}),o.jsx("tbody",{className:"nhsuk-table__body",role:"rowgroup",children:Z.map((se,be)=>{const _e=Y.globalSelectedRowData&&U(Y.globalSelectedRowData,se),Te=I.focusArea==="cells"&&I.focusedRowIndex===be;return o.jsx("tr",{role:"row",className:`data-row ${_e?"data-row--selected":""} ${Te?"data-row--focused":""}`,"aria-selected":_e,children:A.columns.map((we,ye)=>{const $e=se[we.key];let ze;we.tableRenderer?ze=we.tableRenderer(se):we.render?ze=we.render(se):ze=$e;const at=I.focusArea==="cells"&&I.focusedRowIndex===be&&I.focusedColumnIndex===ye,Ue=()=>{if(we.customRenderer){const Qe=we.customRenderer($e,se);return o.jsx("span",{className:"data-cell__custom","data-custom-rendered":"true",children:Qe})}return typeof $e=="boolean"&&ze===$e?o.jsxs(o.Fragment,{children:[Q($e),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:$e?"Yes":"No"})]}):E.isValidElement(ze)||typeof ze!="object"?ze??"":ze};return o.jsx("td",{role:"gridcell",className:`data-cell ${at?"data-cell--focused":""}`,tabIndex:at?0:-1,onClick:()=>{const ln=Y.globalSelectedRowData&&U(Y.globalSelectedRowData,se)?null:se;H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:ln})},onKeyDown:Qe=>q(Qe,be,ye),children:Ue()},we.key)})},be)})})]})})()},A.id)})]})}),ds={asc:"â†‘",desc:"â†“"},V_=e=>[...e].sort((t,n)=>t.priority-n.priority);function qo(e){return e.map((t,n)=>({...t,priority:n}))}function G_(e){return e.length>0?Math.max(...e.map(t=>t.priority)):-1}function Y_(e,t){const n=t.find(r=>r.id===e);return n?n.priority>0:!1}function q_(e,t){const n=t.find(i=>i.id===e),r=G_(t);return n?n.priority<r:!1}const X_=({sortConfig:e,onSortChange:t,className:n="",emptyDescription:r="No sorting applied",activeDescription:i,showReset:a=!0,showHelp:s=!0,disabled:l=!1,ariaLabel:u="Sort configuration",ariaDescribedBy:c})=>{const d=E.useMemo(()=>V_(e),[e]),f=E.useCallback(w=>{if(l)return;const T=e.map(S=>S.id===w?{...S,direction:S.direction==="asc"?"desc":"asc"}:S);t(T)},[e,t,l]),m=E.useCallback(w=>{if(l)return;const T=e.findIndex(v=>v.id===w);if(T<=0)return;const S=[...e];[S[T],S[T-1]]=[S[T-1],S[T]],t(qo(S))},[e,t,l]),p=E.useCallback(w=>{if(l)return;const T=e.findIndex(v=>v.id===w);if(T>=e.length-1||T===-1)return;const S=[...e];[S[T],S[T+1]]=[S[T+1],S[T]],t(qo(S))},[e,t,l]),y=E.useCallback(w=>{if(l)return;const T=e.filter(S=>S.id!==w);t(qo(T))},[e,t,l]),h=E.useCallback(()=>{l||t([])},[t,l]),g=()=>{if(e.length===0)return r;if(i)return i;const w=d.map((T,S)=>{const v=T.direction==="asc"?"ascending":"descending";return`${S+1}. ${T.label} (${v})`});if(w.length===1)return`Sorted by: ${w[0]}`;if(w.length===2)return`Sorted by: ${w.join(" and ")}`;{const T=w.pop();return`Sorted by: ${w.join(", ")}, and ${T}`}},b=E.useMemo(()=>{const w=["sort-description"];return s&&w.push("sort-help"),c&&w.push(c),w.join(" ")},[s,c]);return e.length===0?o.jsx("div",{className:`sort-status-control sort-status-control--empty ${n}`,children:o.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:g()})}):o.jsxs("div",{className:`sort-status-control ${n}`,children:[o.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:g()}),o.jsxs("div",{className:"sort-status-control__tags",role:"list","aria-label":u,"aria-describedby":b,children:[o.jsx("div",{className:"sort-status-control__tags-label",children:"Current sorting:"}),d.map(w=>o.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",children:o.jsx(Ye,{text:"",color:"blue",className:"sort-status-control__tag",closable:!0,onClose:()=>y(w.id),disabled:l,children:o.jsxs("div",{className:"sort-status-control__tag-content",children:[o.jsx("span",{className:"sort-status-control__tag-priority",children:w.priority+1}),o.jsx("span",{className:"sort-status-control__tag-label",children:w.label}),o.jsx("button",{type:"button",className:"sort-status-control__tag-direction",onClick:()=>f(w.id),disabled:l,"aria-label":`Toggle sort direction for ${w.label}. Currently ${w.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:w.direction==="asc"?ds.asc:ds.desc}),o.jsxs("div",{className:"sort-status-control__tag-actions",children:[o.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>m(w.id),disabled:l||!Y_(w.id,e),"aria-label":`Move ${w.label} sort up in priority`,title:"Move up in priority",children:"â–²"}),o.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>p(w.id),disabled:l||!q_(w.id,e),"aria-label":`Move ${w.label} sort down in priority`,title:"Move down in priority",children:"â–¼"})]})]})})},w.id))]}),a&&o.jsx("div",{className:"sort-status-control__actions",children:o.jsx(xt,{variant:"secondary",onClick:h,disabled:l,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})}),s&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsxs("small",{children:["Click ",ds.asc,"/",ds.desc," to toggle ascending/descending. Use â–²/â–¼ to change sort priority. Click Ã— to remove a sort."]})})]})},fs=(e,t)=>t.map(n=>({id:n.id,label:n.label,data:n.filter?n.filter(e):e,columns:n.columns.map(r=>({key:r.key,label:r.label,render:r.render,customRenderer:r.customRenderer})),sortConfig:n.sortConfig,ariaLabel:n.ariaLabel||`${n.label} Data Grid`,ariaDescription:n.ariaDescription||`Data grid showing ${n.label.toLowerCase()}`,className:n.className,disabled:n.disabled})),Xo=[{value:!0,icon:o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"100%",height:"34",children:o.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})})},{value:!1,icon:o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"100%",height:"34",children:[o.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),o.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]})}],K_=(e,t)=>!e||!t?e===t:e.name&&e.bed_name&&t.name&&t.bed_name?e.name===t.name&&e.bed_name===t.bed_name:JSON.stringify(e)===JSON.stringify(t),J_=(e,t)=>t?e.filter(n=>{if(t.ewsScoreRange){const[r,i]=t.ewsScoreRange;if(n.ews_score<r||n.ews_score>i)return!1}return!(t.wards&&t.wards.length>0&&!t.wards.includes(n.ward_name)||t.specialties&&t.specialties.length>0&&!t.specialties.includes(n.speciality)||t.dischargeStatuses&&t.dischargeStatuses.length>0&&!t.dischargeStatuses.includes(n.early_discharge_notification)||t.avpuLevels&&t.avpuLevels.length>0&&!t.avpuLevels.includes(n.ews_data.avpu)||t.medicallyOptimised!==null&&t.medicallyOptimised!==void 0&&n.medically_optimised!==t.medicallyOptimised||t.fastTrack!==null&&t.fastTrack!==void 0&&n.fast_track!==t.fastTrack)}):e,Z_=e=>{if(typeof e=="boolean"){const n=Xo.find(r=>r.value===e);return n?n.icon:null}const t=Xo.find(n=>n.value===e);return t?t.icon:String(e)},Q_=e=>`${e.name}-${e.bed_name}`,ex=()=>({overview:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"bed_name",label:"Bed"},{key:"ews_score",label:"EWS Score"},{key:"speciality",label:"Specialty"},{key:"consultant",label:"Consultant"}],vitals:[{key:"name",label:"Patient Name"},{key:"ews_score",label:"EWS Score"},{key:"respiratory_rate_bpm",label:"Respiratory Rate",render:e=>e.ews_data.respiratory_rate_bpm},{key:"sp02",label:"SpO2 %",render:e=>e.ews_data.sp02},{key:"temperature",label:"Temperature Â°C",render:e=>e.ews_data.temperature},{key:"systolic_bp",label:"Systolic BP",render:e=>e.ews_data.systolic_bp},{key:"heart_rate",label:"Heart Rate",render:e=>e.ews_data.heart_rate},{key:"avpu",label:"AVPU",render:e=>e.ews_data.avpu.toUpperCase()}],discharge:[{key:"name",label:"Patient Name"},{key:"anticipated_discharge_date",label:"Anticipated Discharge",render:e=>new Date(e.anticipated_discharge_date).toLocaleDateString()},{key:"early_discharge_notification",label:"Discharge Status"},{key:"medically_optimised",label:"Medically Optimised"},{key:"criteria_to_reside",label:"Criteria to Reside"},{key:"fast_track",label:"Fast Track"},{key:"transport_status",label:"Transport Status"},{key:"pathway",label:"Pathway"}],logistics:[{key:"name",label:"Patient Name"},{key:"ward_name",label:"Ward"},{key:"room_name",label:"Room"},{key:"bed_name",label:"Bed"},{key:"bed_type",label:"Bed Type"},{key:"transport_booking",label:"Transport Booked"},{key:"transport_mobility",label:"Transport Type"},{key:"district_nurse_referral",label:"District Nurse"},{key:"equipment",label:"Equipment"}]}),tx=e=>{const t=ex();return[{id:"overview",label:"Patient Overview",data:e,columns:t.overview,ariaLabel:"Patient Overview Data Grid",ariaDescription:"Overview of all patients with basic information"},{id:"vitals",label:"Vital Signs & EWS",data:e,columns:t.vitals,sortConfig:[{key:"ews_score",direction:"desc"},{key:"name",direction:"asc"},{key:"ward_name",direction:"asc"}],ariaLabel:"Patient Vital Signs Data Grid",ariaDescription:"Patient vital signs and Early Warning Scores"},{id:"discharge",label:"Discharge Planning",data:e.filter(n=>n.anticipated_discharge_date),columns:t.discharge,sortConfig:[{key:"anticipated_discharge_date",direction:"asc"},{key:"discharge_status",direction:"desc"}],ariaLabel:"Discharge Planning Data Grid",ariaDescription:"Patient discharge planning and status information"},{id:"logistics",label:"Bed Management",data:e,columns:t.logistics,sortConfig:[{key:"ward_name",direction:"asc"}],ariaLabel:"Bed Management Data Grid",ariaDescription:"Patient location and logistics information"}]},Od={dataComparator:K_,filterFunction:J_,booleanRenderer:Z_,getDataId:Q_};function Rd(e,t,n){const{primaryField:r,secondaryFields:i=[],badges:a=[],hiddenFields:s=[],getPriority:l,getVariant:u,fieldRenderers:c={},classPrefix:d="adaptive-card"}=n,f=t.find(T=>T.key===r),m=f?.cardRenderer?f.cardRenderer(e):f?.render?f.render(e):e[r||"name"]||"Untitled",p=()=>i.filter(S=>!s.includes(S)&&e[S]).slice(0,3).map(S=>{const v=t.find(_=>_.key===S),j=e[S],N=c[S]?c[S](j,e):v?.cardRenderer?v.cardRenderer(e):v?.render?v.render(e):j;return`${v?.label||S}: ${N}`}).join(" â€¢ "),y=()=>a.length===0?null:a.filter(T=>e[T.fieldKey]!==void 0).map(T=>{const S=e[T.fieldKey],v=T.render?T.render(S,e):S;return`<span class="nhsuk-tag ${nx(T,S)}">${v}</span>`}).join(""),h=()=>u?u(e):l?.(e)==="high"?"primary":"default",g=y(),b=p(),w=g?`${b}${g?`<div class="adaptive-card__badges">${g}</div>`:""}`:b;return{variant:h(),heading:String(m),descriptionHtml:w,className:`adaptive-card ${d}`,"aria-label":`Record for ${m}`}}function nx(e,t){const n=e.className||"adaptive-card__badge";if(e.fieldKey==="ews_score"||e.fieldKey.includes("score")){const r=Number(t);return r>=7?`${n} nhsuk-tag--red`:r>=3?`${n} nhsuk-tag--yellow`:`${n} nhsuk-tag--green`}if(e.fieldKey==="priority"){const r=String(t).toLowerCase();if(r==="high")return`${n} nhsuk-tag--red`;if(r==="medium")return`${n} nhsuk-tag--yellow`;if(r==="low")return`${n} nhsuk-tag--green`}if(e.fieldKey==="status"){const r=String(t).toLowerCase();if(r==="urgent"||r==="critical")return`${n} nhsuk-tag--red`;if(r==="pending"||r==="warning")return`${n} nhsuk-tag--yellow`;if(r==="completed"||r==="success")return`${n} nhsuk-tag--green`}switch(e.color){case"primary":return`${n} nhsuk-tag--blue`;case"secondary":return`${n} nhsuk-tag--grey`;case"success":return`${n} nhsuk-tag--green`;case"warning":return`${n} nhsuk-tag--yellow`;case"danger":return`${n} nhsuk-tag--red`;default:return n}}const rx={primaryField:"name",secondaryFields:["id","description","status"],badges:[{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],hiddenFields:[],getPriority:e=>e.priority||"medium",getStatus:e=>e.status||"active",getVariant:e=>e.priority==="high"?"primary":"default",fieldRenderers:{},classPrefix:"adaptive-card--generic"},Ko=({data:e,columns:t,onSelect:n,onAction:r,priority:i="medium",status:a="active"})=>{const s=e.name,l=e.age,u=e.ward_name,c=e.bed_name,d=e.ews_score,f=e.speciality,m=e.consultant;return o.jsxs("div",{className:`healthcare-card healthcare-card--patient healthcare-card--${i} healthcare-card--${a}`,onClick:()=>n?.(e),role:"button",tabIndex:0,"aria-label":`Patient record for ${s}, Age ${l}, Ward ${u}, Bed ${c}`,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__identity",children:[o.jsx("h3",{className:"healthcare-card__patient-name",children:s}),o.jsxs("p",{className:"healthcare-card__age-info",children:[o.jsx("span",{className:"healthcare-card__label",children:"Age: "}),o.jsx("span",{className:"healthcare-card__value",children:l})]})]}),o.jsx("div",{className:"healthcare-card__badges",children:d!==void 0&&o.jsxs(Ye,{color:ax(Hd(d)),className:"healthcare-card__alert",children:["EWS: ",d]})})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Ward"}),o.jsx("dd",{children:u})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Bed"}),o.jsx("dd",{children:c})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Specialty"}),o.jsx("dd",{children:f})]}),o.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--prominent",children:[o.jsx("dt",{children:"Consultant"}),o.jsx("dd",{children:m})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(xt,{variant:"secondary",className:"healthcare-card__action",onClick:p=>{p.stopPropagation(),r?.("view-notes",e)},children:"Notes"}),o.jsx(xt,{variant:"secondary",className:"healthcare-card__action",onClick:p=>{p.stopPropagation(),r?.("view-vitals",e)},children:"Vitals"}),o.jsx(xt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:p=>{p.stopPropagation(),r?.("view-full",e)},children:"View Full Record"})]})]})},Jo=({data:e,onAction:t})=>o.jsxs("div",{className:"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__time-info",children:[o.jsx("h3",{className:"healthcare-card__time",children:new Date(e.appointment_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),o.jsx("p",{className:"healthcare-card__type",children:e.appointment_type})]}),o.jsxs("div",{className:"healthcare-card__badges",children:[o.jsx(Ye,{color:sx(e.status||"active"),className:"healthcare-card__status",children:(e.status||"active").charAt(0).toUpperCase()+(e.status||"active").slice(1)}),o.jsxs(Ye,{color:"grey",className:"healthcare-card__duration",children:[e.duration||"30"," min"]})]})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Patient"}),o.jsx("dd",{children:e.patient_name})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Consultant"}),o.jsx("dd",{children:e.consultant})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Location"}),o.jsx("dd",{children:e.location})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(xt,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),o.jsx(xt,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Reschedule"})]})]}),Zo=({data:e,onAction:t})=>o.jsxs("div",{className:"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__medication-info",children:[o.jsx("h3",{className:"healthcare-card__medication-name",children:e.medication}),o.jsxs("p",{className:"healthcare-card__dose",children:[e.dose," â€¢ ",e.frequency]})]}),o.jsxs("div",{className:"healthcare-card__badges",children:[o.jsx(Ye,{color:"blue",className:"healthcare-card__route",children:e.route}),e.next_due&&o.jsxs(Ye,{color:"red",className:"healthcare-card__warning",children:["Due: ",new Date(e.next_due).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Patient"}),o.jsx("dd",{children:e.patient_name})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Prescriber"}),o.jsx("dd",{children:e.prescriber})]}),e.allergies&&o.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--urgent",children:[o.jsx("dt",{children:"Allergies"}),o.jsx("dd",{children:e.allergies})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(xt,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),o.jsx(xt,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Adjust Dose"})]})]}),Qo=({data:e,onSelect:t,onAction:n,priority:r="medium"})=>{const i=e.name,a=e.ews_score,s=e.ews_data?.respiratory_rate_bpm,l=e.ews_data?.sp02,u=e.ews_data?.temperature,c=e.ews_data?.systolic_bp,d=e.ews_data?.heart_rate,f=e.ews_data?.avpu;return o.jsxs("div",{className:`healthcare-card healthcare-card--vitals healthcare-card--${r}`,onClick:()=>t?.(e),role:"button",tabIndex:0,"aria-label":`Vital signs for ${i}, EWS Score ${a}`,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__vitals-summary",children:[o.jsx("h3",{className:"healthcare-card__patient-name",children:i}),a!==void 0&&o.jsxs("p",{className:`healthcare-card__ews-score healthcare-card__ews-score--${ix(a)}`,children:["EWS: ",a]})]}),o.jsx("div",{className:"healthcare-card__badges",children:f&&o.jsxs(Ye,{color:"blue",className:"healthcare-card__avpu",children:["AVPU: ",f.toUpperCase()]})})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("div",{className:"healthcare-card__vitals-grid",children:[s!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Respiratory Rate"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[s," bpm"]})]}),l!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"SpO2"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[l,"%"]})]}),u!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Temperature"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[u,"Â°C"]})]}),c!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Systolic BP"}),o.jsx("span",{className:"healthcare-card__vital-value",children:c})]}),d!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Heart Rate"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[d," bpm"]})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(xt,{variant:"secondary",className:"healthcare-card__action",onClick:m=>{m.stopPropagation(),n?.("view-trend",e)},children:"Trend"}),o.jsx(xt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:m=>{m.stopPropagation(),n?.("record-new",e)},children:"Record New"})]})]})};function Hd(e){const t=typeof e=="string"?parseInt(e,10):e;return t>=7?"critical":t>=5?"high":t>=3?"medium":"low"}function ix(e){return Hd(e)}function ax(e){switch(e){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"grey";default:return"grey"}}function sx(e){switch(e.toLowerCase()){case"active":return"blue";case"pending":return"orange";case"completed":return"green";case"cancelled":return"grey";default:return"blue"}}const ox=[{fieldKey:"ews_score",render:e=>`EWS: ${e}`,className:"adaptive-card__ews-badge",color:"default"},{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],zd=e=>e.ews_score&&Number(e.ews_score)>=7?"high":e.ews_score&&Number(e.ews_score)>=3?"medium":e.priority==="high"||e.status==="urgent"?"high":e.priority==="low"?"low":"medium",Ud={name:"healthcare",defaultCardConfig:{primaryField:"name",secondaryFields:["nhs_number","ward","condition","consultant"],badges:ox,hiddenFields:[],getPriority:zd,getStatus:e=>{if(e.status){const t=e.status.toLowerCase();if(["active","pending","completed","cancelled","urgent"].includes(t))return t}return"active"},getVariant:e=>zd(e)==="high"||e.status==="urgent"?"primary":"default",fieldRenderers:{nhs_number:e=>e?`NHS: ${e}`:"",ews_score:e=>{const t=Number(e),n=t>=7?"HIGH":t>=3?"MEDIUM":"LOW";return`EWS: ${e} (${n})`},age:(e,t)=>t.dob?`${new Date().getFullYear()-new Date(t.dob).getFullYear()}y`:e?`${e}y`:""},classPrefix:"adaptive-card--healthcare"},cssImport:"./HealthcareCardTemplates.scss",cardTemplates:{patient:(e,t,n)=>{const r=n.getPriority?.(e)||"medium",i=n.getStatus?.(e)||"active",a=i==="urgent"?"active":i;return o.jsx(Ko,{data:e,columns:t,priority:r,status:a,onSelect:s=>console.log("Patient selected:",s),onAction:(s,l)=>console.log("Patient action:",s,l)})},appointment:(e,t,n)=>{const r=n.getStatus?.(e)||"pending",i=r==="urgent"?"pending":r;return o.jsx(Jo,{data:e,columns:t,status:i,onSelect:a=>console.log("Appointment selected:",a),onAction:(a,s)=>console.log("Appointment action:",a,s)})},medication:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return o.jsx(Zo,{data:e,columns:t,priority:r,onSelect:i=>console.log("Medication selected:",i),onAction:(i,a)=>console.log("Medication action:",i,a)})},vitals:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return o.jsx(Qo,{data:e,columns:t,priority:r,onSelect:i=>console.log("Vitals selected:",i),onAction:(i,a)=>console.log("Vitals action:",i,a)})}},fieldTypes:{isNHSNumber:e=>typeof e=="string"&&/^\d{3}\s?\d{3}\s?\d{4}$/.test(e.replace(/\s/g,"")),isEWSScore:e=>typeof e=="number"&&e>=0&&e<=20,isMedicalDate:e=>typeof e=="string"&&!isNaN(Date.parse(e))}};function Wd(e){return{primaryField:e?.primaryField||"name",secondaryFields:e?.secondaryFields||[],badges:e?.badgeFields?.map(t=>({fieldKey:t,className:"adaptive-card__badge"}))||[],hiddenFields:e?.hiddenFields||[],cardTemplate:e?.cardTemplate?(t,n,r)=>e.cardTemplate(t,n):void 0,classPrefix:"adaptive-card--generic"}}function Vd(e){if(!e||e.length===0)return!1;const t=e[0];return t.ews_score!==void 0||t.nhs_number!==void 0||t.patient_name!==void 0||t.ward!==void 0||t.consultant!==void 0}function lx(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const i=[...e.selectedRows];return i[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:i};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:a}=t.payload,s=new Array(a).fill(!1),l=new Array(a).fill(null),u=new Array(a).fill([]);for(let c=0;c<Math.min(e.tabLoadingStates.length,a);c++)s[c]=e.tabLoadingStates[c],l[c]=e.tabErrors[c],u[c]=e.selectedRows[c];return{...e,tabLoadingStates:s,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}function cx(e,t){const[n,r]=E.useState("cards");return E.useEffect(()=>{if(t){r(t);return}const i=()=>{const a=window.innerWidth;a<e.mobile?r("cards"):a<e.desktop?r("hybrid"):r("table")};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[e,t]),n}function ux(e){return!e||typeof e!="object"?null:e.appointment_type||e.appointment_time||e.clinic?"appointment":e.medication_name||e.medication||e.dose||e.frequency?"medication":e.ews_score!==void 0||e.respiratory_rate!==void 0||e.spo2!==void 0||e.temperature!==void 0||e.systolic_bp!==void 0||e.heart_rate!==void 0?"vitals":e.name||e.patient_name||e.nhs_number||e.ward||e.bed?"patient":null}function dx(e,t,n,r){const i=r?{...r.defaultCardConfig,...n}:{...rx,...n};if(r&&r.cardTemplates){const a=ux(e);if(a&&r.cardTemplates[a]){const s=r.cardTemplates[a](e,t,i);if(s)return{variant:"default",children:s}}}return i.cardTemplate&&i.cardTemplate(e,t,i),Rd(e,t,i)}const el=({breakpoints:e={mobile:768,tablet:1024,desktop:1200},forceLayout:t,cardConfig:n={},experimental:r={},enableAdvancedSorting:i=!1,topActions:a,bottomActions:s,gridActions:l,forceGridActionsAbove:u,tabPanels:c,dataConfig:d,selectedIndex:f,onTabChange:m,ariaLabel:p="Data grid",ariaDescription:y,orientation:h="horizontal",id:g,disabled:b=!1,className:w,...T})=>{const S=cx(e,t),v=f!==void 0,j=f??0,N=E.useMemo(()=>{if(c.some(V=>V.data&&V.data.length>0&&Vd(V.data))){const V=Wd(n);return{...Ud.defaultCardConfig,...V}}else return Wd(n)},[n,c]),M=E.useMemo(()=>c.some(V=>V.data&&V.data.length>0&&Vd(V.data))?Ud:void 0,[c]),_=E.useMemo(()=>({selectedIndex:j,tabLoadingStates:new Array(c.length).fill(!1),tabErrors:new Array(c.length).fill(null),sortConfig:[],selectedRows:new Array(c.length).fill([]),globalSelectedRowData:null,filters:void 0}),[j,c.length]),[P,k]=E.useReducer(lx,_),C=E.useRef([]),L=E.useRef([]),D=E.useRef([]),F=E.useRef(null),[I,$]=E.useState({focusArea:"tabs",focusedTabIndex:0,focusedCardIndex:0,selectedCardIndex:-1,isGridActive:!1,focusedCardElementIndex:0,cardElements:[],isCardNavigationActive:!1,gridColumns:1,gridRows:1,cardSortConfig:null,focusedSortControlIndex:0,isSortControlsActive:!1}),ee=E.useCallback(O=>{if(!O.current)return{columns:1,rows:0};const V=O.current,G=V.querySelectorAll(".aria-tabs-datagrid-adaptive__card-wrapper");if(G.length===0)return{columns:1,rows:0};const J=V.offsetWidth,X=G[0].offsetWidth,te=Math.floor(J/X)||1,re=Math.ceil(G.length/te);return{columns:te,rows:re}},[]),Y=E.useCallback((O,V)=>({row:Math.floor(O/V),col:O%V}),[]),H=E.useCallback((O,V,G)=>O*G+V,[]),U=E.useCallback((O,V,G,J)=>{const{row:A,col:X}=Y(O,J);let te=A,re=X;switch(V){case"up":te=Math.max(0,A-1);break;case"down":te=Math.min(Math.floor((G-1)/J),A+1);break;case"left":re=Math.max(0,X-1);break;case"right":re=Math.min(J-1,X+1);break}const Z=H(te,re,J);return Math.min(Z,G-1)},[Y,H]);E.useEffect(()=>{I.isCardNavigationActive&&I.focusedCardElementIndex>=0&&I.cardElements.length>0&&setTimeout(()=>{const O=I.cardElements[I.focusedCardElementIndex];O&&(O.element.focus(),O.element.scrollIntoView({block:"nearest",behavior:"smooth"}))},0)},[I.isCardNavigationActive,I.focusedCardElementIndex,I.cardElements.length]),E.useEffect(()=>{const O=()=>{if(S==="cards"&&F.current){const{columns:J,rows:A}=ee(F);$(X=>({...X,gridColumns:J,gridRows:A}))}},V=setTimeout(O,200),G=()=>{setTimeout(O,100)};return window.addEventListener("resize",G),()=>{clearTimeout(V),window.removeEventListener("resize",G)}},[S,c,ee]),E.useEffect(()=>{const O=P.tabLoadingStates.length,V=c.length;O!==V&&k({type:"ADJUST_ARRAYS",payload:{newLength:V}})},[c.length,P.tabLoadingStates.length]),E.useEffect(()=>{v&&f!==P.selectedIndex&&k({type:"SET_SELECTED_INDEX",payload:f})},[v,f,P.selectedIndex]);const z=E.useCallback(O=>{O>=0&&O<c.length&&!c[O].disabled&&(k({type:"SET_SELECTED_INDEX",payload:O}),m?.(O))},[c,m]),ie=E.useCallback(O=>{console.log("Card selected:",O),k({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:O})},[]),W=E.useCallback(O=>{const V=L.current[O];V&&(V.focus(),V.scrollIntoView({block:"nearest",behavior:"smooth"}))},[]),le=E.useCallback(O=>{const V=L.current[O];if(!V)return[];const G=['button:not([disabled]):not([aria-hidden="true"])','a[href]:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','select:not([disabled]):not([aria-hidden="true"])','textarea:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])','.healthcare-card__detail[tabindex]:not([tabindex="-1"])',".healthcare-card__action:not([disabled])",".tag:not([disabled])"].join(", "),J=V.querySelectorAll(G);return Array.from(J).map((A,X)=>({id:A.id||`card-${O}-element-${X}`,element:A,label:A.getAttribute("aria-label")||A.textContent?.trim()||A.getAttribute("title")||`Element ${X+1}`,type:A.tagName.toLowerCase()==="button"?"button":A.tagName.toLowerCase()==="a"?"link":["input","select","textarea"].includes(A.tagName.toLowerCase())?"input":"generic"}))},[]),je=E.useRef(null),de=E.useCallback(O=>{const V=je.current;if(!V)return;const G=document.createElement("div");G.setAttribute("aria-live","polite"),G.setAttribute("aria-atomic","true"),G.className="sr-only",G.textContent=O,V.appendChild(G),setTimeout(()=>{V.contains(G)&&V.removeChild(G)},1e3)},[]),fe=E.useCallback(O=>{const V=O.filter(J=>J.sortable!==!1),G=[{value:"",label:"Sort by..."}];return V.forEach(J=>{const A=J.label||J.key;J.key==="name"?G.push({value:`${J.key}-asc`,label:`${A} (A-Z)`},{value:`${J.key}-desc`,label:`${A} (Z-A)`}):J.key==="ews_score"||J.key.includes("score")?G.push({value:`${J.key}-desc`,label:`${A} (High-Low)`},{value:`${J.key}-asc`,label:`${A} (Low-High)`}):J.key==="age"||J.key.includes("date")||J.key.includes("time")?G.push({value:`${J.key}-desc`,label:`${A} (Oldest-Youngest)`},{value:`${J.key}-asc`,label:`${A} (Youngest-Oldest)`}):G.push({value:`${J.key}-asc`,label:`${A} (A-Z)`},{value:`${J.key}-desc`,label:`${A} (Z-A)`})}),G},[]),Q=E.useCallback((O,V)=>V?[...O].sort((G,J)=>{const A=G[V.key],X=J[V.key];if(A==null&&X==null)return 0;if(A==null)return 1;if(X==null)return-1;const te=Number(A),re=Number(X);if(!isNaN(te)&&!isNaN(re))return V.direction==="asc"?te-re:re-te;const Z=String(A).toLowerCase(),se=String(X).toLowerCase(),be=Z.localeCompare(se);return V.direction==="asc"?be:-be}):O,[]),ae=E.useCallback(O=>{if(!O){$(Z=>({...Z,cardSortConfig:null})),de("Card sorting cleared");return}const[V,G]=O.split("-"),J={key:V,direction:G};$(Z=>({...Z,cardSortConfig:J}));const te=c[P.selectedIndex]?.columns.find(Z=>Z.key===V)?.label||V;de(`Cards sorted by ${te} in ${G==="asc"?"ascending":"descending"} order`)},[c,P.selectedIndex,de]),he=E.useCallback(O=>{const J=c[P.selectedIndex]?.columns.find(X=>X.key===O.key)?.label||O.key,A=O.direction==="asc"?"ascending":"descending";return`${J} (${A})`},[c,P.selectedIndex]),q=E.useCallback(O=>{const V=c[P.selectedIndex];if(i){const G=P.sortConfig;return!G||G.length===0?O:[...O].sort((J,A)=>{for(const{key:X,direction:te}of G){let re=J[X],Z=A[X];const se=V?.columns.find($e=>$e.key===X);if(se?.cardRenderer?(re=se.cardRenderer(J),Z=se.cardRenderer(A)):se?.render&&(re=se.render(J),Z=se.render(A)),re==null&&Z==null)continue;if(re==null)return te==="asc"?-1:1;if(Z==null)return te==="asc"?1:-1;const be=Number(re),_e=Number(Z);if(!isNaN(be)&&!isNaN(_e)){const $e=be-_e;if($e!==0)return te==="asc"?$e:-$e;continue}const Te=String(re).toLowerCase(),we=String(Z).toLowerCase(),ye=Te.localeCompare(we);if(ye!==0)return te==="asc"?ye:-ye}return 0})}else return Q(O,I.cardSortConfig)},[i,P.sortConfig,I.cardSortConfig,Q,c,P.selectedIndex]),me=E.useCallback((O,V)=>{const G=le(O),J=G[V];if(J){J.element.scrollIntoView({block:"nearest",behavior:"smooth"});const A=`Focused on ${J.label}, ${J.type} ${V+1} of ${G.length} within card`;de(A)}},[le,de]),ce=E.useCallback(O=>{C.current[O]?.focus()},[]),B=E.useCallback(()=>{const O=D.current[0];if(!O)return[];const V=['select:not([disabled]):not([aria-hidden="true"])','button:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])'].join(", "),G=O.querySelectorAll(V);return Array.from(G)},[]),R=E.useCallback(O=>{if(O===0){const V=D.current[0],G=V?.querySelector(".sort-controls-row");if(G){G.setAttribute("tabindex","-1"),G.focus();const A=`Sort controls group with ${B().length} interactive elements. Press Enter or Space to begin navigating controls.`;de(A)}else V&&V.focus()}else{const V=B(),G=O-1,J=V[G];if(J){J.focus();const A=J.tagName.toLowerCase()==="select",X=J.tagName.toLowerCase()==="button",te=A?"dropdown":X?"button":"control",re=A?". Use Space key to open dropdown":"",Z=`${te} ${G+1} of ${V.length}${re}`;de(Z)}}},[B,de]),ne=E.useCallback((O,V)=>{const{key:G}=O,J=c[P.selectedIndex],A=J?.data.length||0;if(G==="ArrowLeft"&&O.shiftKey){O.preventDefault(),O.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(G==="ArrowRight"&&O.shiftKey){O.preventDefault(),O.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!I.isCardNavigationActive){switch(G){case"ArrowUp":if(O.preventDefault(),V===0)$(Z=>({...Z,focusArea:"sort-controls",focusedSortControlIndex:0,isSortControlsActive:!1})),R(0);else{const Z=U(V,"up",A,I.gridColumns);Z!==V&&($(se=>({...se,focusedCardIndex:Z})),W(Z),de(`Moved to card ${Z+1} of ${A}`))}break;case"ArrowDown":O.preventDefault();const X=U(V,"down",A,I.gridColumns);X!==V&&($(Z=>({...Z,focusedCardIndex:X})),W(X),de(`Moved to card ${X+1} of ${A}`));break;case"ArrowLeft":O.preventDefault();const te=U(V,"left",A,I.gridColumns);te!==V?($(Z=>({...Z,focusedCardIndex:te})),W(te),de(`Moved to card ${te+1} of ${A}`)):P.selectedIndex>0&&(k({type:"SET_SELECTED_INDEX",payload:P.selectedIndex-1}),$(Z=>({...Z,focusArea:"tabs"})),setTimeout(()=>ce(P.selectedIndex-1),0));break;case"ArrowRight":O.preventDefault();const re=U(V,"right",A,I.gridColumns);re!==V?($(Z=>({...Z,focusedCardIndex:re})),W(re),de(`Moved to card ${re+1} of ${A}`)):P.selectedIndex<c.length-1&&(k({type:"SET_SELECTED_INDEX",payload:P.selectedIndex+1}),$(Z=>({...Z,focusArea:"tabs"})),setTimeout(()=>ce(P.selectedIndex+1),0));break;case"Enter":if(J?.data[V]){O.preventDefault(),$(se=>({...se,selectedCardIndex:V}));const Z=le(V);Z.length>0?($(se=>({...se,focusArea:"card",isCardNavigationActive:!0,focusedCardElementIndex:0,cardElements:Z,selectedCardIndex:V})),de(`Card ${V+1} selected and navigation activated. ${Z.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`)):de(`Card ${V+1} selected.`)}break;case" ":if(J?.data[V]){O.preventDefault(),$(se=>({...se,selectedCardIndex:se.selectedCardIndex===V?-1:V}));const Z=I.selectedCardIndex===V;de(`Card ${V+1} ${Z?"deselected":"selected"}.`)}break}return}switch(G){case"ArrowUp":case"ArrowLeft":O.preventDefault();const X=Math.max(0,I.focusedCardElementIndex-1);$(se=>({...se,focusedCardElementIndex:X})),me(V,X);break;case"ArrowDown":case"ArrowRight":O.preventDefault();const te=Math.min(I.cardElements.length-1,I.focusedCardElementIndex+1);$(se=>({...se,focusedCardElementIndex:te})),me(V,te);break;case"Enter":O.preventDefault();const re=I.cardElements[I.focusedCardElementIndex];re&&(re.element.click(),de(`Activated ${re.label}`));break;case" ":O.preventDefault();const Z=I.cardElements[I.focusedCardElementIndex];if(Z){const se=new MouseEvent("dblclick",{bubbles:!0});Z.element.dispatchEvent(se),de(`Double-clicked ${Z.label}`)}break;case"Escape":O.preventDefault(),$(se=>({...se,focusArea:"cards",isCardNavigationActive:!1,focusedCardElementIndex:0,cardElements:[]})),setTimeout(()=>W(V),0),de("Exited card navigation, returned to card level");break;case"Home":O.preventDefault(),I.cardElements.length>0&&($(se=>({...se,focusedCardElementIndex:0})),me(V,0));break;case"End":if(O.preventDefault(),I.cardElements.length>0){const se=I.cardElements.length-1;$(be=>({...be,focusedCardElementIndex:se})),me(V,se)}break}},[I,P.selectedIndex,c,ie,W,ce,$,le,me,de]),pe=E.useCallback(O=>{const V=C.current[O],G=V?.parentElement;if(!V||!G){console.log("Tab or container not found for mobile scroll");return}const J=V.getBoundingClientRect(),A=G.getBoundingClientRect();J.left>=A.left&&J.right<=A.right||(console.log("Tab not visible, scrolling into view (mobile)"),V.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[]),ue=E.useCallback((O,V)=>{if(S!=="cards")return;const{key:G}=O;switch(G){case"ArrowLeft":O.preventDefault();const J=V>0?V-1:c.length-1;z(J),$(re=>({...re,focusedTabIndex:J})),C.current[J]?.focus(),pe(J);break;case"ArrowRight":O.preventDefault();const A=V<c.length-1?V+1:0;z(A),$(re=>({...re,focusedTabIndex:A})),C.current[A]?.focus(),pe(A);break;case"ArrowDown":O.preventDefault();const X=c[P.selectedIndex];X&&X.columns&&X.columns.length>0?($(re=>({...re,focusArea:"sort-controls",focusedSortControlIndex:0})),R(0)):($(re=>({...re,focusArea:"cards",focusedCardIndex:0})),W(0));break;case"Home":O.preventDefault(),z(0),$(re=>({...re,focusedTabIndex:0})),C.current[0]?.focus(),pe(0);break;case"End":O.preventDefault();const te=c.length-1;z(te),$(re=>({...re,focusedTabIndex:te})),C.current[te]?.focus(),pe(te);break;case"Enter":case" ":O.preventDefault(),z(V);break}},[c.length,z,S,W,$,pe]),oe=E.useCallback((O,V)=>{if(S!=="cards")return;const{key:G}=O,J=c[P.selectedIndex];if(V===0&&!I.isSortControlsActive){switch(G){case"ArrowUp":O.preventDefault(),$(X=>({...X,focusArea:"tabs",isSortControlsActive:!1})),ce(P.selectedIndex);break;case"ArrowDown":O.preventDefault(),J?.data&&J.data.length>0&&($(X=>({...X,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),W(0));break;case"Enter":case" ":O.preventDefault();const A=B();if(A.length>0){$(te=>({...te,isSortControlsActive:!0,focusedSortControlIndex:1})),R(1);const X=`Entered sort controls navigation mode. ${A.length} controls available. Use arrow keys to navigate between controls.`;de(X)}break;case"Escape":O.preventDefault(),$(X=>({...X,isSortControlsActive:!1,focusArea:"tabs"})),ce(P.selectedIndex);break}return}if(I.isSortControlsActive){const X=B().length;switch(G){case"ArrowLeft":O.preventDefault();const te=I.focusedSortControlIndex>1?I.focusedSortControlIndex-1:X;$(Z=>({...Z,focusedSortControlIndex:te})),R(te);break;case"ArrowRight":O.preventDefault();const re=I.focusedSortControlIndex<X?I.focusedSortControlIndex+1:1;$(Z=>({...Z,focusedSortControlIndex:re})),R(re);break;case"ArrowDown":if(O.preventDefault(),I.isSortControlsActive){const Z=I.focusedSortControlIndex<X?I.focusedSortControlIndex+1:1;$(se=>({...se,focusedSortControlIndex:Z})),R(Z)}else J?.data&&J.data.length>0&&($(Z=>({...Z,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),W(0));break;case"ArrowUp":O.preventDefault(),$(Z=>({...Z,isSortControlsActive:!1,focusArea:"sort-controls"})),R(0);break;case"Escape":O.preventDefault(),$(Z=>({...Z,isSortControlsActive:!1,focusArea:"sort-controls",focusedSortControlIndex:0})),R(0);break}}},[S,c,P.selectedIndex,I.isSortControlsActive,I.focusedSortControlIndex,R,ce,W,$,de]);if(S==="cards"){const O=c[P.selectedIndex];return o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${w||""}`,children:[o.jsxs("div",{className:"aria-tabs-datagrid-adaptive__header",children:[o.jsx("div",{role:"tablist","aria-label":p,"aria-describedby":`${y||""} ${g?`${g}-navigation-help`:""}`.trim(),"aria-orientation":h,className:"aria-tabs-datagrid__tabs",children:c.map((V,G)=>{const J=G===P.selectedIndex,A=V.disabled||b;return o.jsxs("button",{role:"tab",id:`tab-${V.id}`,"aria-controls":`panel-${V.id}`,"aria-selected":J,"aria-disabled":A,tabIndex:J?0:-1,ref:X=>{C.current[G]=X},onClick:()=>z(G),onKeyDown:X=>ue(X,G),disabled:A,className:["aria-tabs-datagrid__tab",J?"aria-tabs-datagrid__tab--selected":"",A?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[o.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:V.label}),P.tabLoadingStates[G]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),P.tabErrors[G]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},V.id)})}),a&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions",children:a})]}),O&&O.columns&&o.jsx(o.Fragment,{children:i?o.jsx(Bd,{sortConfig:P.sortConfig||[],columns:O.columns.map(V=>({key:V.key,label:V.label})),onSortChange:V=>{k({type:"SET_SORT",payload:V})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls"}):o.jsx("div",{className:"aria-tabs-datagrid-adaptive__sort-controls",role:"region","aria-label":"Sort controls",tabIndex:I.focusArea==="sort-controls"?0:-1,ref:V=>{D.current[0]=V},onKeyDown:V=>oe(V,0),children:o.jsxs("div",{className:"sort-controls-row",children:[o.jsxs("div",{className:"sort-select-container",children:[o.jsx("label",{htmlFor:`card-sort-${O.id}`,className:"sort-label",children:"Sort cards by"}),o.jsx(Ni,{id:`card-sort-${O.id}`,name:`card-sort-${O.id}`,value:I.cardSortConfig?`${I.cardSortConfig.key}-${I.cardSortConfig.direction}`:"",onChange:V=>ae(V.target.value),className:"sort-select",children:fe(O.columns).map(V=>o.jsx("option",{value:V.value,children:V.label},V.value))})]}),I.cardSortConfig&&o.jsxs("div",{className:"sort-indicator",role:"status","aria-live":"polite",children:[o.jsxs("span",{className:"sort-indicator-text",children:["Sorted by ",he(I.cardSortConfig)]}),o.jsx(xt,{variant:"secondary",size:"small",onClick:()=>ae(""),"aria-label":"Clear card sorting",className:"sort-clear-button",children:"Clear"})]})]})})}),o.jsx("div",{ref:F,className:"aria-tabs-datagrid-adaptive__cards",role:"grid","aria-label":`${O?.label||"Data"} cards in ${I.gridRows} rows and ${I.gridColumns} columns`,"aria-rowcount":I.gridRows,"aria-colcount":I.gridColumns,id:`panel-${O?.id}`,"aria-labelledby":`tab-${O?.id}`,children:q(O?.data||[]).map((V,G)=>{const J=I.selectedCardIndex===G,A=I.focusedCardIndex===G&&I.focusArea==="cards",X=I.focusedCardIndex===G&&I.focusArea==="card"&&I.isCardNavigationActive,te=G===0&&I.focusArea!=="cards",re=A||te,Z=Y(G,I.gridColumns);if(n.cardTemplate){const _e=n.cardTemplate(V,O.columns);return o.jsx("div",{role:"row","aria-rowindex":Z.row+1,className:"aria-tabs-datagrid-adaptive__row",children:o.jsx("div",{ref:Te=>{L.current[G]=Te},className:["aria-tabs-datagrid-adaptive__card-wrapper",J?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",A?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",X?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":Z.col+1,"aria-selected":J,"aria-expanded":X,"aria-description":X?`Card navigation active. ${I.cardElements.length} interactive elements available.`:void 0,tabIndex:re?0:-1,onClick:()=>{$(Te=>({...Te,selectedCardIndex:Te.selectedCardIndex===G?-1:G})),ie(V)},onKeyDown:Te=>ne(Te,G),onFocus:()=>{$(Te=>Te.isCardNavigationActive?Te:Te.focusedCardIndex!==G||Te.focusArea!=="cards"?{...Te,focusedCardIndex:G,focusArea:"cards"}:Te)},children:_e})},`card-${G}`)}const se=dx(V,O.columns,N,M),be=[se.className||"",J?"aria-tabs-datagrid-adaptive__card--selected":"",A?"aria-tabs-datagrid-adaptive__card--focused":"",X?"aria-tabs-datagrid-adaptive__card--card-navigation":""].filter(Boolean).join(" ");return o.jsx("div",{role:"row","aria-rowindex":Z.row+1,className:"aria-tabs-datagrid-adaptive__row",children:o.jsx("div",{className:["aria-tabs-datagrid-adaptive__card-wrapper",J?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",A?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",X?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":Z.col+1,"aria-selected":J,"aria-expanded":X,onKeyDown:_e=>{_e.key==="Enter"&&(_e.preventDefault(),$(Te=>({...Te,selectedCardIndex:G}))),ne(_e,G)},children:o.jsx(Yo,{...se,ref:_e=>{L.current[G]=_e},className:be,"aria-label":`${se["aria-label"]||se.heading}. ${X?`Card navigation active with ${I.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.`:"Press Enter to navigate within card elements."}`,tabIndex:re?0:-1,onClick:()=>{$(_e=>({..._e,selectedCardIndex:_e.selectedCardIndex===G?-1:G})),ie(V)},onKeyDown:_e=>ne(_e,G),onFocus:()=>{I.isCardNavigationActive||$(_e=>_e.focusedCardIndex!==G||_e.focusArea!=="cards"?{..._e,focusedCardIndex:G,focusArea:"cards",focusedCardElementIndex:0,cardElements:[]}:_e)}})})},`card-${G}`)})}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s}),o.jsx("div",{ref:je,className:"aria-tabs-datagrid-adaptive__announcements","aria-hidden":"true",style:{position:"fixed",top:"-1px",left:"-1px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0,padding:0,margin:0}})]})}return S==="hybrid"?o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${w||""}`,children:[a&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:a}),o.jsx(us,{tabPanels:c,dataConfig:d,ariaLabel:p,ariaDescription:y,orientation:h,id:g,disabled:b,selectedIndex:f,onTabChange:m,className:"aria-tabs-datagrid-adaptive__table--hybrid",actions:l,forceActionsAbove:u,...T}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s})]}):o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${w||""}`,children:[a&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:a}),o.jsx(us,{tabPanels:c,dataConfig:d,ariaLabel:p,ariaDescription:y,orientation:h,id:g,disabled:b,selectedIndex:f,onTabChange:m,actions:l,forceActionsAbove:u,...T}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s})]})},Gd=e=>{const t=Xo.find(n=>n.value===e);return t?t.icon:null},fx={ecommerce:{name:"E-commerce",description:"Product catalogs with pricing, inventory, and ratings",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.priceRange){const[r,i]=t.priceRange,a=n.discountedPrice||n.price;if(a<r||a>i)return!1}return!(t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.inStock!==void 0&&n.inStock!==t.inStock||t.minRating!==void 0&&n.rating<t.minRating||t.tags&&t.tags.length>0&&!t.tags.some(r=>n.tags.includes(r)))}):e,booleanRenderer:e=>Gd(e),getDataId:e=>`ecommerce-${e.id}`},createTabs:e=>fs(e,[{id:"all-products",label:"All Products",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Price",render:n=>n.discountedPrice?`$${n.price.toFixed(2)} â†’ $${n.discountedPrice.toFixed(2)}`:`$${n.price.toFixed(2)}`},{key:"inStock",label:"Availability"},{key:"category",label:"Category"},{key:"rating",label:"Rating",render:n=>`${n.rating}/5 (${n.reviews} reviews)`}],ariaLabel:"All Products Grid",ariaDescription:"Complete product catalog with pricing and availability"},{id:"on-sale",label:"On Sale",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Original Price",render:n=>`$${n.price.toFixed(2)}`},{key:"discountedPrice",label:"Sale Price",render:n=>`$${n.discountedPrice?.toFixed(2)||"N/A"}`},{key:"discount",label:"Discount",render:n=>n.discountedPrice?`${((n.price-n.discountedPrice)/n.price*100).toFixed(0)}% OFF`:"N/A"}],filter:n=>n.filter(r=>r.discountedPrice!==void 0),ariaLabel:"Sale Products Grid",ariaDescription:"Products currently on sale with discounted pricing"},{id:"high-rated",label:"Top Rated",columns:[{key:"name",label:"Product Name"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.rating>=4),sortConfig:[{key:"rating",direction:"desc"}],ariaLabel:"Top Rated Products Grid",ariaDescription:"Highest rated products with 4+ star ratings"}])},financial:{name:"Financial",description:"Transaction data with amounts, categories, and statuses",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.dateRange){const[r,i]=t.dateRange;if(n.date<r||n.date>i)return!1}if(t.amountRange){const[r,i]=t.amountRange;if(Math.abs(n.amount)<r||Math.abs(n.amount)>i)return!1}return!(t.types&&t.types.length>0&&!t.types.includes(n.type)||t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.pending!==void 0&&n.pending!==t.pending)}):e,booleanRenderer:e=>Gd(e),getDataId:e=>`financial-${e.id}`},createTabs:e=>fs(e,[{id:"all-transactions",label:"All Transactions",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"},{key:"pending",label:"Status"}],sortConfig:[{key:"date",direction:"desc"}],ariaLabel:"All Transactions Grid",ariaDescription:"Complete transaction history with amounts and categories"},{id:"credits",label:"Credits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`+$${n.amount.toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="credit"),ariaLabel:"Credit Transactions Grid",ariaDescription:"Incoming payments and credits only"},{id:"debits",label:"Debits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`-$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="debit"),ariaLabel:"Debit Transactions Grid",ariaDescription:"Outgoing payments and charges only"},{id:"pending",label:"Pending",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"type",label:"Type"}],filter:n=>n.filter(r=>r.pending),ariaLabel:"Pending Transactions Grid",ariaDescription:"Transactions awaiting processing"}])}},Yd=(e,t)=>{const n=fx[e];return{dataConfig:n.dataConfig,tabPanels:n.createTabs(t)}},qd=[{name:"Sarah Johnson",age:34,ews_data:{respiratory_rate_bpm:16,sp02:98,temperature:36.8,systolic_bp:140,heart_rate:82,avpu:"alert"},ews_score:3,ward_name:"Cardiology",room_name:"Room A",bed_name:"A-1",bed_type:"bed",admin_note:"Hypertension monitoring",pathway:"Standard",speciality:"Cardiology",consultant:"Dr. Smith",local_authority:"NHS Trust",early_discharge_notification:"not_required",needs_based_assessment:!1,medically_optimised:!0,criteria_to_reside:!0,date_medically_optimised:"2024-01-15",anticipated_discharge_date:"2024-01-18",dru_suitability:!1,optica_planned_discharge_date:"2024-01-18",optica_date_confirmed:"2024-01-16",dsum:null,medications_tta:"None required",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!1,initial_therapy_contact:"",equipment:"None",district_nurse_referral:!1},{name:"Michael Chen",age:67,ews_data:{respiratory_rate_bpm:20,sp02:94,temperature:37.2,systolic_bp:160,heart_rate:95,avpu:"alert"},ews_score:7,ward_name:"Surgery",room_name:"Room B",bed_name:"B-3",bed_type:"bed",admin_note:"Post-operative monitoring",pathway:"Surgical",speciality:"General Surgery",consultant:"Dr. Johnson",local_authority:"NHS Trust",early_discharge_notification:"due",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!0,date_medically_optimised:"2024-01-17",anticipated_discharge_date:"2024-01-20",dru_suitability:!0,optica_planned_discharge_date:"2024-01-20",optica_date_confirmed:"2024-01-16",dsum:"Complex discharge",medications_tta:"Pain management",transport_booking:!0,transport_status:"In Progress",transport_date:"2024-01-20",transport_mobility:"Wheelchair",fast_track:!1,initial_therapy_contact:"2024-01-17",equipment:"Walking frame",district_nurse_referral:!0},{name:"Emma Thompson",age:28,ews_data:{respiratory_rate_bpm:24,sp02:90,temperature:38.5,systolic_bp:110,heart_rate:105,avpu:"alert"},ews_score:5,ward_name:"Respiratory",room_name:"Room C",bed_name:"C-2",bed_type:"bed",admin_note:"Pneumonia treatment",pathway:"Respiratory",speciality:"Respiratory Medicine",consultant:"Dr. Williams",local_authority:"NHS Trust",early_discharge_notification:"overdue",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!1,date_medically_optimised:"",anticipated_discharge_date:"2024-01-22",dru_suitability:!1,optica_planned_discharge_date:"2024-01-22",optica_date_confirmed:"",dsum:null,medications_tta:"Antibiotics",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!0,initial_therapy_contact:"",equipment:"Oxygen",district_nurse_referral:!1}],hx=[{id:"appt-001",appointment_time:"2024-01-18T09:00:00Z",patient_name:"Sarah Johnson",appointment_type:"Cardiology Consultation",consultant:"Dr. Smith",location:"Clinic Room 3",duration:30,status:"pending"},{id:"appt-002",appointment_time:"2024-01-18T10:30:00Z",patient_name:"Michael Davis",appointment_type:"Post-op Follow-up",consultant:"Dr. Johnson",location:"Surgery Ward",duration:15,status:"active"},{id:"appt-003",appointment_time:"2024-01-18T14:00:00Z",patient_name:"Emma Thompson",appointment_type:"Respiratory Assessment",consultant:"Dr. Wilson",location:"Emergency Department",duration:45,status:"pending"}],mx=[{id:"med-001",medication:"Amlodipine",dose:"5mg",frequency:"Once daily",route:"Oral",next_due:"2024-01-18T08:00:00Z",prescriber:"Dr. Smith",patient_name:"Sarah Johnson",allergies:null,priority:"medium"},{id:"med-002",medication:"Morphine",dose:"10mg",frequency:"Every 4 hours",route:"IV",next_due:"2024-01-18T10:00:00Z",prescriber:"Dr. Johnson",patient_name:"Michael Davis",allergies:"Codeine allergy",priority:"high"},{id:"med-003",medication:"Salbutamol",dose:"2 puffs",frequency:"As needed",route:"Inhaled",next_due:"2024-01-18T12:00:00Z",prescriber:"Dr. Wilson",patient_name:"Emma Thompson",allergies:null,priority:"high"}],px=[{id:"vitals-001",patient_name:"Sarah Johnson",recorded_time:"2024-01-18T07:30:00Z",temperature:36.8,blood_pressure:"140/90",heart_rate:82,respiratory_rate:16,oxygen_saturation:98,ews_score:3,priority:"medium"},{id:"vitals-002",patient_name:"Michael Davis",recorded_time:"2024-01-18T08:15:00Z",temperature:37.2,blood_pressure:"130/85",heart_rate:98,respiratory_rate:20,oxygen_saturation:95,ews_score:7,priority:"high"},{id:"vitals-003",patient_name:"Emma Thompson",recorded_time:"2024-01-18T09:00:00Z",temperature:38.5,blood_pressure:"110/70",heart_rate:105,respiratory_rate:24,oxygen_saturation:90,ews_score:9,priority:"high"}],Xd=[{id:"PROD001",name:"Wireless Headphones",price:199.99,discountedPrice:149.99,inStock:!0,category:"Electronics",rating:4.5,reviews:1247,tags:["wireless","bluetooth","premium"]},{id:"PROD002",name:"Running Shoes",price:129.99,inStock:!0,category:"Sports",rating:4.8,reviews:892,tags:["running","athletic","comfortable"]},{id:"PROD003",name:"Coffee Maker",price:89.99,discountedPrice:59.99,inStock:!1,category:"Kitchen",rating:4.2,reviews:456,tags:["kitchen","coffee","appliance"]},{id:"PROD004",name:"Smartphone Case",price:24.99,inStock:!0,category:"Accessories",rating:4,reviews:234,tags:["protection","mobile","durable"]}],Kd=[{id:"TXN001",date:new Date("2024-01-15"),amount:2500,type:"credit",category:"Salary",description:"Monthly salary payment",accountId:"ACC001",pending:!1,recurring:!0},{id:"TXN002",date:new Date("2024-01-14"),amount:89.5,type:"debit",category:"Groceries",description:"Supermarket shopping",accountId:"ACC001",pending:!1,recurring:!1},{id:"TXN003",date:new Date("2024-01-16"),amount:1200,type:"debit",category:"Rent",description:"Monthly rent payment",accountId:"ACC001",pending:!0,recurring:!0},{id:"TXN004",date:new Date("2024-01-13"),amount:150,type:"credit",category:"Refund",description:"Product return refund",accountId:"ACC001",pending:!1,recurring:!1}],Jd=[{id:"LEAD001",companyName:"Tech Solutions Inc",contactPerson:"John Smith",email:"john@techsolutions.com",status:"qualified",value:5e4,lastContact:new Date("2024-01-15"),source:"Website",isHotLead:!0},{id:"LEAD002",companyName:"Global Industries",contactPerson:"Maria Garcia",email:"maria@globalind.com",status:"contacted",value:25e3,lastContact:new Date("2024-01-14"),source:"Referral",isHotLead:!1},{id:"LEAD003",companyName:"StartupXYZ",contactPerson:"Alex Johnson",email:"alex@startupxyz.com",status:"new",value:15e3,lastContact:new Date("2024-01-16"),source:"Cold Call",isHotLead:!0}],gx={dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>!(t.status&&!t.status.includes(n.status)||t.minValue&&n.value<t.minValue||t.hotLeadsOnly&&!n.isHotLead)):e,booleanRenderer:e=>o.jsx("span",{style:{color:e?"#dc2626":"#6b7280",fontWeight:e?"bold":"normal"},children:e?"ðŸ”¥ Hot Lead":"ðŸ“‹ Standard"}),getDataId:e=>`business-${e.id}`},bx=()=>[{id:"patients",label:"Patients",data:qd,columns:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Records",ariaDescription:"Healthcare patient management with EWS monitoring",cardTemplate:(e,t)=>o.jsx(Ko,{data:e,columns:t,onSelect:n=>console.log("Selected patient:",n),onAction:(n,r)=>console.log("Patient action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})},{id:"appointments",label:"Appointments",data:hx,columns:[{key:"appointment_time",label:"Time"},{key:"patient_name",label:"Patient"},{key:"appointment_type",label:"Type"},{key:"consultant",label:"Consultant"}],ariaLabel:"Patient Appointments",ariaDescription:"Scheduled appointments and consultations",cardTemplate:(e,t)=>o.jsx(Jo,{data:e,columns:t,onSelect:n=>console.log("Selected appointment:",n),onAction:(n,r)=>console.log("Appointment action:",n,r),status:e.status})},{id:"medications",label:"Medications",data:mx,columns:[{key:"medication",label:"Medication"},{key:"dose",label:"Dose"},{key:"frequency",label:"Frequency"},{key:"next_due",label:"Next Due"}],ariaLabel:"Patient Medications",ariaDescription:"Medication administration and scheduling",cardTemplate:(e,t)=>o.jsx(Zo,{data:e,columns:t,onSelect:n=>console.log("Selected medication:",n),onAction:(n,r)=>console.log("Medication action:",n,r),priority:e.priority})},{id:"vitals",label:"Vital Signs",data:px,columns:[{key:"patient_name",label:"Patient"},{key:"recorded_time",label:"Time"},{key:"temperature",label:"Temperature"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Vital Signs",ariaDescription:"Patient vital signs monitoring and EWS scores",cardTemplate:(e,t)=>o.jsx(Qo,{data:e,columns:t,onSelect:n=>console.log("Selected vitals:",n),onAction:(n,r)=>console.log("Vitals action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})}],yx=()=>{const[e,t]=E.useState("healthcare"),n=E.useMemo(()=>({healthcare:{title:"Healthcare Workflow Management",description:"Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals",dataConfig:Od,tabPanels:bx(),data:qd},ecommerce:{title:"E-commerce Product Catalog",description:"Product management with pricing and inventory",...Yd("ecommerce",Xd),data:Xd},financial:{title:"Financial Transaction Dashboard",description:"Banking and financial data management",...Yd("financial",Kd),data:Kd},business:{title:"Sales Lead Management",description:"Custom CRM configuration with business logic",dataConfig:gx,tabPanels:fs(Jd,[{id:"all-leads",label:"All Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"status",label:"Status"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"isHotLead",label:"Priority"}],ariaLabel:"All Sales Leads Grid",ariaDescription:"Complete sales pipeline with lead information"},{id:"hot-leads",label:"Hot Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"lastContact",label:"Last Contact",render:i=>i.lastContact.toLocaleDateString()}],filter:i=>i.filter(a=>a.isHotLead),sortConfig:[{key:"value",direction:"desc"}],ariaLabel:"Hot Leads Grid",ariaDescription:"High-priority leads requiring immediate attention"},{id:"pipeline",label:"Active Pipeline",columns:[{key:"companyName",label:"Company"},{key:"status",label:"Status"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"source",label:"Source"}],filter:i=>i.filter(a=>["contacted","qualified"].includes(a.status)),ariaLabel:"Active Pipeline Grid",ariaDescription:"Leads currently in the sales pipeline"}]),data:Jd}}),[]),r=n[e];return o.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"AriaTabsDataGrid - Comprehensive Demo"}),o.jsx("p",{style:{fontSize:"1.1rem",color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:"This demo showcases the component's versatility across different domains: healthcare, e-commerce, financial services, and custom business applications. Each configuration demonstrates domain-specific data operations, custom renderers, and specialized filtering logic."}),o.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:Object.keys(n).map(i=>o.jsx(xt,{variant:e===i?"primary":"secondary",onClick:()=>t(i),style:{textTransform:"capitalize"},children:i},i))}),o.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem"},children:[o.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"0.5rem",color:"#1e293b"},children:r.title}),o.jsx("p",{style:{color:"#64748b",marginBottom:"1rem"},children:r.description}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.9rem"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Data Records:"})," ",r.data.length]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Tab Panels:"})," ",r.tabPanels.length]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Features:"})," ",["Row Selection","Custom Filtering","Domain-Specific Renderers","Keyboard Navigation","ARIA Compliance"].join(", ")]})]})]})]}),o.jsx(us,{dataConfig:r.dataConfig,tabPanels:r.tabPanels,ariaLabel:`${r.title} Data Grid`,ariaDescription:`Interactive data grid for ${r.description.toLowerCase()}`}),o.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f1f5f9",borderRadius:"0.5rem",border:"1px solid #cbd5e1"},children:[o.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#334155"},children:"Implementation Details"}),o.jsxs("div",{style:{display:"grid",gap:"1rem",fontSize:"0.9rem"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Current Mode:"})," ",e," configuration"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Data Operations:"})," Custom comparator, filter function, and boolean renderer"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Architecture:"})," Generic core with domain-specific plugins and factory helpers"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"State Management:"})," Global row selection with data-object persistence"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Accessibility:"})," Full ARIA support with dynamic labels and descriptions"]})]})]})]})},tl=e=>o.jsx(_o,{...e}),vx=({children:e,pageTitle:t,pageHeadingProps:n,columnWidth:r=tr.TwoThirds,mainWrapperSize:i,skipLinkProps:a,headerProps:s,footerProps:l,service:u,navigation:c,search:d,account:f,organisation:m,logo:p,className:y,...h})=>{const g={service:u,navigation:c,search:d,account:f,organisation:m,logo:p,...s};return o.jsxs(o.Fragment,{children:[o.jsx(Go,{...a}),o.jsx(Va,{...g}),o.jsx(tl,{className:y,...h,children:o.jsx(xo,{size:i,children:o.jsx(nr,{children:o.jsxs(Wr,{width:r,children:[t&&o.jsx(yn,{size:"l",...n,children:t}),e]})})})}),o.jsx(So,{...l})]})},_x=({children:e,title:t,pageHeadingProps:n,columnWidth:r=tr.TwoThirds,mainWrapperSize:i="small",skipLinkProps:a,headerProps:s,footerProps:l,backLinkProps:u,serviceName:c,serviceHref:d,logo:f,className:m,...p})=>{const y={service:{text:c,href:d},logo:f,navigation:void 0,search:void 0,account:void 0,...s};return o.jsxs(o.Fragment,{children:[o.jsx(Go,{...a}),o.jsx(Va,{...y}),o.jsxs(tl,{className:m,...p,children:[u&&o.jsx(Ra,{...u}),o.jsx(xo,{size:i,children:o.jsx(nr,{children:o.jsxs(Wr,{width:r,children:[t&&o.jsx(yn,{style:{marginTop:"3rem"},size:"l",...n,children:t}),e]})})})]}),o.jsx(So,{...l})]})},Zd=({text:e="Next",html:t,href:n="#",className:r,element:i="a",onClick:a,...s})=>{const l=xe("nhsuk-back-link",r),u=xe("nhsuk-back-link__link"),c=()=>o.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:o.jsx("path",{d:"M15.5 12c0 .3-.1.5-.3.7l-5 5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4L13.1 12 8.8 7.7c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l5 5c.2.2.3.4.3.7z"})})]});return o.jsx("div",{className:l,children:i==="button"?o.jsx("button",{className:u,type:"button",onClick:a,...s,children:c()}):o.jsx("a",{className:u,href:n,...s,children:c()})})};Zd.displayName="ForwardLink";const Zr=Object.freeze({small:320,smallMax:767,medium:768,large:1025,xlarge:1200,xxlarge:1440});function Qd(){return typeof window>"u"?Zr.small:window.innerWidth||document.documentElement.clientWidth||0}function nl(){const[e,t]=K.useState(Qd());K.useEffect(()=>{if(typeof window>"u")return;const a=()=>t(Qd());return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const n=K.useCallback(a=>e>=Zr[a],[e]),r=K.useCallback(a=>e<Zr[a],[e]),i=K.useCallback((a,s)=>e>=Zr[a]&&e<Zr[s],[e]);return{width:e,up:n,down:r,between:i,values:Zr}}function xx(e){const{width:t,values:n}=nl();let r=e.base;const i=["small","medium","large","xlarge","xxlarge"];for(const a of i){const s=n[a];t>=s&&e[a]!==void 0&&(r=e[a])}return r}function ef(e={}){const{enabled:t=!0,paramSelected:n="nsv",paramDrill:r="nsvDrill"}=e,[i,a]=K.useState(()=>typeof window>"u"||!t?void 0:new URLSearchParams(window.location.search).get(n)),[s,l]=K.useState(()=>typeof window>"u"||!t?!1:new URLSearchParams(window.location.search).get(r)==="1");return K.useEffect(()=>{if(!t||typeof window>"u")return;const u=new URLSearchParams(window.location.search);i?u.set(n,String(i)):u.delete(n),u.set(r,s?"1":"0");const c=`${window.location.pathname}?${u.toString()}${window.location.hash}`;window.history.replaceState(null,"",c)},[i,s,t,n,r]),{selectedId:i,setSelectedId:a,drilledIn:s,setDrilledIn:l}}const wx=({className:e})=>o.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{fill:"currentColor",d:"M10.7 3.3a1 1 0 0 1 0 1.4L7.41 8l3.3 3.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 0Z"})}),Sx=({className:e})=>o.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{fill:"currentColor",d:"M5.3 12.7a1 1 0 0 1 0-1.4L8.59 8l-3.3-3.3a1 1 0 0 1 1.42-1.4l4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.42 0Z"})});function tf(e){const{items:t,selectedId:n,defaultSelectedId:r,onSelectionChange:i,renderItemContent:a,renderContent:s,renderSecondaryContent:l,forceLayout:u,animated:c=!0,backLabel:d="Back",nextLabel:f="Next",isLoading:m=!1,emptyState:p,a11y:y,className:h,getId:g=ge=>ge.id,orientation:b="vertical",autoEnableThirdColumn:w=!0,onDrillChange:T,navigationInstructions:S="Use arrow keys to navigate, Enter to open.",initialFocus:v="first",skipFocusOnSelect:j=!1,skipAnnouncements:N=!1,onFocusChange:M,syncUrl:_=!1,urlParamSelected:P="nsv",urlParamDrill:k="nsvDrill",urlSyncDebounceMs:C=0,lazySecondary:L=!1,navFooter:D,collapsibleNav:F=!1,navInitiallyCollapsed:I=!1,onNavCollapseChange:$,collapseToggleLabelShow:ee="Show navigation",collapseToggleLabelHide:Y="Hide navigation",collapseToggleIconShow:H,collapseToggleIconHide:U,persistNavCollapsed:z,navCollapsedStorageKey:ie="nsvCollapsed",navCollapsedUrlParam:W="nsvCollapsed",autoContentHeader:le,contentHeaderLevel:je=2,renderContentHeader:de,contentSubheader:fe,secondarySubheader:Q}=e,{up:ae}=nl(),[he,q]=K.useState(!1);K.useEffect(()=>{q(!0)},[]);const me=he&&ae("medium"),ce=he&&ae("xlarge");let B;u?B=u:me?B="two-column":B="list",!u&&w&&l&&ce&&(B="three-column");const R=ef({enabled:_,paramSelected:P,paramDrill:k}),[ne,pe]=K.useState(()=>R.selectedId!==void 0?R.selectedId:r),ue=n!==void 0?n:ne,oe=t.find(ge=>g(ge)===ue),[O,V]=K.useState(void 0);K.useEffect(()=>{if(ue===void 0)return;V(ue);const ge=setTimeout(()=>V(void 0),220);return()=>clearTimeout(ge)},[ue]);const G=K.useRef(null),J=K.useRef(null),A=K.useRef(null),X=K.useRef(null),[te,re]=K.useState(()=>({contentIndex:0,secondaryIndex:0})),[Z,se]=K.useState(()=>"nav"),[be,_e]=K.useState(0),Te=()=>[X.current,J.current,A.current].filter(Boolean),we=ge=>{const De=Te(),ve=Math.max(0,Math.min(ge,De.length-1));De[ve]?.focus(),_e(ve)},ye=K.useCallback(ge=>ge?Array.from(ge.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(ve=>!ve.hasAttribute("disabled")&&ve.tabIndex!==-1):[],[]),$e=K.useCallback(ge=>{const De=ye(J.current);if(!De.length){J.current?.focus();return}const ve=Math.max(0,Math.min(ge,De.length-1)),Le=De[ve];Le.focus(),setTimeout(()=>{document.activeElement!==Le&&(Le.focus(),setTimeout(()=>{document.activeElement!==Le&&Le.click()},10))},10),re(We=>({...We,contentIndex:ve}));const et=We=>{We.key==="Escape"&&(We.preventDefault(),We.stopPropagation(),J.current?.focus(),Le.removeEventListener("keydown",et))};De.forEach(We=>{const qe=We._escapeHandler;qe&&We.removeEventListener("keydown",qe)}),Le._escapeHandler=et,Le.addEventListener("keydown",et)},[ye]),ze=K.useCallback(ge=>{const De=ye(A.current);if(!De.length){A.current?.focus();return}const ve=Math.max(0,Math.min(ge,De.length-1)),Le=De[ve];Le.focus(),setTimeout(()=>{document.activeElement!==Le&&(Le.focus(),setTimeout(()=>{document.activeElement!==Le&&Le.click()},10))},10),re(We=>({...We,secondaryIndex:ve}));const et=We=>{We.key==="Escape"&&(We.preventDefault(),We.stopPropagation(),A.current?.focus(),Le.removeEventListener("keydown",et))};De.forEach(We=>{const qe=We._escapeHandler;qe&&We.removeEventListener("keydown",qe)}),Le._escapeHandler=et,Le.addEventListener("keydown",et)},[ye]),at=ge=>{if(ge.defaultPrevented)return;const De=ge.key,ve=ge.target,Le=!!bt.current&&bt.current.contains(ve),et=!!J.current&&J.current.contains(ve),We=!!A.current&&A.current.contains(ve),qe=!!A.current,On=ve===X.current||ve===J.current||ve===A.current,Qt=Ue&&(B==="list"||B==="cards"),br=et&&!!ve.closest(".nhs-navigation-split-view__header");if(Z==="containers"&&On){if(De==="ArrowRight"){ge.preventDefault();const Ee=Te(),Xe=Math.min(Ee.length-1,be+1);we(Xe);return}if(De==="ArrowLeft"){ge.preventDefault();const Ee=Math.max(0,be-1);we(Ee);return}if(De==="Home"){ge.preventDefault(),we(0);return}if(De==="End"){ge.preventDefault(),we(Te().length-1);return}if(De==="Enter"||De===" "){if(ge.preventDefault(),ve===X.current){if(se("nav"),bt.current){const Ee=Array.from(bt.current.querySelectorAll("[data-nav-item]"));(Ee[rt>=0?rt:0]||Ee[0])?.focus()}}else ve===J.current?(se("content"),$e(te.contentIndex)):ve===A.current&&(se("secondary"),ze(te.secondaryIndex));return}return}if(De==="Escape"){if(Z==="content"||Z==="secondary"){if(et||We){if(ge.preventDefault(),se("nav"),bt.current){const Xe=Array.from(bt.current.querySelectorAll("[data-nav-item]"))[rt>=0?rt:0];setTimeout(()=>Xe?.focus(),10)}}else if((ve===J.current||ve===A.current)&&(ge.preventDefault(),se("nav"),bt.current)){const Xe=Array.from(bt.current.querySelectorAll("[data-nav-item]"))[rt>=0?rt:0];setTimeout(()=>Xe?.focus(),10)}}return}if(De==="Enter"||De===" "){if(ve.matches('button, a, input, select, textarea, [role="button"], [role="link"], [role="tab"]'))return;if(ve===J.current&&Z==="content"){ge.preventDefault(),ge.stopPropagation(),ye(J.current).length>0&&setTimeout(()=>{$e(te.contentIndex)},50);return}if(ve===A.current&&Z==="secondary"){ge.preventDefault(),ge.stopPropagation(),ye(A.current).length>0&&setTimeout(()=>{ze(te.secondaryIndex)},50);return}}if(Qt&&br&&!On&&(De==="ArrowRight"||De==="ArrowLeft")){const Ee=ye(J.current).filter(Xe=>Xe.closest(".nhs-navigation-split-view__header"));if(Ee.length>1){const Xe=Ee.indexOf(ve);if(Xe>=0){const Ea=(Xe+(De==="ArrowRight"?1:-1)+Ee.length)%Ee.length;ge.preventDefault(),Ee[Ea].focus();return}}}if(De==="ArrowRight"){if(Le||Z==="nav"){ge.preventDefault(),se("content"),setTimeout(()=>J.current?.focus(),10);return}if(et||Z==="content"){qe&&(ge.preventDefault(),se("secondary"),setTimeout(()=>A.current?.focus(),10));return}}if(De==="ArrowLeft"){if(We||Z==="secondary"){ge.preventDefault(),se("content"),setTimeout(()=>J.current?.focus(),10);return}if(et||Z==="content"){if(ge.preventDefault(),se("nav"),bt.current){const Xe=Array.from(bt.current.querySelectorAll("[data-nav-item]"))[rt>=0?rt:0];setTimeout(()=>Xe?.focus(),10)}return}}if(De==="Home"&&!Le&&(ge.preventDefault(),se("nav"),bt.current)){const Ee=Array.from(bt.current.querySelectorAll("[data-nav-item]")),Xe=Ee[rt>=0?rt:0]||Ee[0];setTimeout(()=>Xe?.focus(),10)}if(De==="End"){const Ee=qe?A.current:J.current;Ee&&!Ee.contains(ve)&&(ge.preventDefault(),qe?(se("secondary"),setTimeout(()=>A.current?.focus(),10)):(se("content"),setTimeout(()=>J.current?.focus(),10)))}if(De==="ArrowDown"||De==="ArrowUp"){if(ve===J.current&&De==="ArrowDown"){ge.preventDefault(),ye(J.current).length>0&&$e(0);return}if(ve===A.current&&De==="ArrowDown"){ge.preventDefault(),ye(A.current).length>0&&ze(0);return}if(et){const Ee=ye(J.current);if(Ee.length){ge.preventDefault();const Xe=De==="ArrowDown"?1:-1,fn=(te.contentIndex+Xe+Ee.length)%Ee.length;$e(fn)}}else if(We){const Ee=ye(A.current);if(Ee.length){ge.preventDefault();const Xe=De==="ArrowDown"?1:-1,fn=(te.secondaryIndex+Xe+Ee.length)%Ee.length;ze(fn)}}}},Ue=!!oe&&(B==="list"||B==="cards"),Qe=K.useMemo(()=>le===void 0?{mobile:!0,tablet:!1,desktop:!1}:le===!0?{mobile:!0,tablet:!0,desktop:!0}:le===!1?{mobile:!1,tablet:!1,desktop:!1}:{mobile:le.mobile!==void 0?le.mobile:!0,tablet:le.tablet||!1,desktop:le.desktop||!1},[le]),ln=he&&ae("medium")&&!ae("xlarge"),Et=he&&ae("xlarge"),Ft=!!l,st=B==="three-column",[ft,Jn]=K.useState(!1);K.useEffect(()=>{st&&ft&&Jn(!1)},[st,ft]),K.useEffect(()=>{ft&&!st&&(se("secondary"),_e(2),setTimeout(()=>{A.current?.focus()},50))},[ft,st]),K.useEffect(()=>{!ft&&!st&&Z==="secondary"&&(se("content"),_e(1),setTimeout(()=>{J.current?.focus()},50))},[ft,st,Z]);const Or=!!oe&&(Ue&&Qe.mobile||!Ue&&ln&&Qe.tablet||!Ue&&Et&&Qe.desktop)||Ft&&!st,Fa=`h${je}`,Rr=oe?K.createElement(Fa,{style:{marginLeft:Ue?32:0,marginRight:Ue?32:0}},oe.label):null,xi=Ue?"mobile":ln?"tablet":"desktop",$a=Ft&&!st&&!ft,Hr=Ue&&Qe.mobile?o.jsx(Ra,{element:"button",text:d,style:{marginRight:16},onClick:()=>mr(void 0,void 0)}):void 0,zr=$a?o.jsx(Zd,{element:"button",text:f,onClick:()=>{Jn(!0)}}):void 0,La=!st&&ft?o.jsx(Ra,{element:"button",text:d,style:{marginRight:16},onClick:()=>Jn(!1)}):void 0,du=K.useMemo(()=>{if(!Or||!oe)return null;if(de)return de({item:oe,detailActive:Ue,context:xi,backLink:Hr,defaultHeading:Rr});const ge=oe&&fe?typeof fe=="function"?fe(oe):fe:null;return o.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[La||Hr,o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:[Rr,ge&&o.jsx("div",{className:"nhs-navigation-split-view__subheader",children:ge})]})]}),zr&&o.jsx("div",{style:{marginLeft:"auto"},children:zr})]})},[Or,oe,de,Ue,xi,Hr,La,Rr,zr,fe]);K.useEffect(()=>{if(!_)return;const ge=B==="three-column";let De=!1;const ve=()=>{De||(R.selectedId!==ue&&R.setSelectedId(ue),R.drilledIn!==ge&&R.setDrilledIn(ge))};if(C&&C>0){const Le=setTimeout(ve,C);return()=>{De=!0,clearTimeout(Le)}}else ve()},[_,R,ue,B,C]),K.useEffect(()=>{if(!_)return;const ge=()=>{const De=new URLSearchParams(window.location.search),ve=De.get(P);De.get(k),pe(ve===null?void 0:ve)};return window.addEventListener("popstate",ge),()=>window.removeEventListener("popstate",ge)},[_,P,k,u,l]);const Ur=K.useRef(0),cn=K.useRef(null),mr=K.useCallback((ge,De)=>{ge!==ue&&(n===void 0&&pe(ge),i?.(ge,De))},[n,i,ue]);K.useEffect(()=>{if(!j&&Ue&&J.current){const ge=setTimeout(()=>J.current?.focus(),30);return()=>clearTimeout(ge)}},[Ue,ue,j]);const bt=K.useRef(null),[rt,un]=K.useState(()=>v==="first"?0:-1);K.useEffect(()=>{if(rt<0||!bt.current)return;const De=Array.from(bt.current.querySelectorAll("[data-nav-item]"))[rt];if(De){document.activeElement!==De&&De.focus(),Ur.current=rt;const ve=t[rt];M?.(ve?g(ve):void 0,ve,rt)}},[rt,t,M,g]);const fu=ge=>{const De=b==="vertical"?"ArrowDown":"ArrowRight",ve=b==="vertical"?"ArrowUp":"ArrowLeft";if(ge.key==="ArrowRight"&&b==="vertical"){ge.preventDefault(),ft?(se("secondary"),setTimeout(()=>{A.current?.focus()},10)):(se("content"),setTimeout(()=>{J.current?.focus()},10));return}if(ge.key===De)ge.preventDefault(),un(Le=>Math.min(t.length-1,Le+1));else if(ge.key===ve)ge.preventDefault(),un(Le=>Math.max(0,Le-1));else if(ge.key==="Home")ge.preventDefault(),un(0);else if(ge.key==="End")ge.preventDefault(),un(t.length-1);else if(ge.key==="Enter"||ge.key===" "){ge.preventDefault();const Le=t[rt];Le&&!Le.disabled&&mr(g(Le),Le)}else if(ge.key.length===1&&/[a-z0-9]/i.test(ge.key)){cn.current||(cn.current={buffer:"",last:0});const Le=Date.now(),et=700,We=ge.key.toLowerCase();Le-cn.current.last>et?cn.current.buffer=We:cn.current.buffer+=We,cn.current.last=Le;let qe=cn.current.buffer;const On=qe.split("").every(fn=>fn===qe[0]),Qt=t.map(fn=>String(fn.label||"").toLowerCase());let br=0;rt>=0&&(br=(rt+1)%t.length);let Ee;const Xe=(fn,Ea)=>{const gn=t.length;for(let uo=0;uo<gn;uo++){const fo=(br+uo)%gn;if(!t[fo].disabled&&Qt[fo].startsWith(fn))return fo}};On&&qe.length>1?Ee=Xe(qe[0]):(Ee=Xe(qe),Ee===void 0&&qe.length>1&&(Ee=Xe(qe[qe.length-1]),Ee!==void 0&&cn.current&&(cn.current.buffer=qe[qe.length-1]))),Ee!==void 0&&un(Ee)}},hu=K.useMemo(()=>{if(z&&(z==="url"||z==="both")&&typeof window<"u"){const De=new URLSearchParams(window.location.search).get(W);if(De==="1")return!0;if(De==="0")return!1}if(z&&(z==="localStorage"||z==="both")&&typeof window<"u")try{const ge=window.localStorage.getItem(ie);if(ge==="1")return!0;if(ge==="0")return!1}catch{}return I},[z,I,ie,W]),[dn,co]=K.useState(hu);K.useEffect(()=>{$?.(dn)},[dn,$]);const pr=K.useCallback(()=>{me&&F&&co(ge=>!ge)},[me,F]);K.useEffect(()=>{if(z&&!(typeof window>"u")){if(z==="localStorage"||z==="both")try{window.localStorage.setItem(ie,dn?"1":"0")}catch{}if(z==="url"||z==="both"){const ge=new URLSearchParams(window.location.search);ge.set(W,dn?"1":"0");const De=`${window.location.pathname}?${ge.toString()}${window.location.hash}`;window.history.replaceState(null,"",De)}}},[dn,z,ie,W]);const wi=["nhs-navigation-split-view",c?"nhs-navigation-split-view--animated":"",Ue?"nhs-navigation-split-view--detail-active":"",B==="three-column"?"nhs-navigation-split-view--three-column":"",F&&me&&dn?"nhs-navigation-split-view--nav-collapsed":"",h].filter(Boolean).join(" "),gr=K.useRef(null);K.useEffect(()=>{if(!N&&gr.current){const ge=oe?`Selected ${oe.label}`:"Selection cleared";gr.current.textContent=ge}},[oe,N]),K.useEffect(()=>{!Ue&&ue==null&&bt.current&&bt.current.querySelectorAll("[data-nav-item]")[Ur.current]?.focus()},[Ue,ue]);const $t=B==="three-column",[Aa,ub]=K.useState(!1);K.useEffect(()=>{$t&&!Aa&&ub(!0)},[$t,Aa]);const _t=K.useRef($t);K.useEffect(()=>{_t.current!==$t&&(T?.($t),_t.current=$t)},[$t,T]);const Zn=()=>{if(B==="cards")return o.jsxs("ul",{className:"nhs-navigation-split-view__cards",role:"listbox","aria-activedescendant":ue?String(ue):void 0,children:[t.map(ve=>{const Le=g(ve),et=Le===ue;return o.jsx("li",{className:"nhs-navigation-split-view__card-item",role:"option","aria-selected":et,children:o.jsxs("button",{id:String(Le),type:"button",className:"nhs-navigation-split-view__card","data-selected":et||void 0,"data-disabled":ve.disabled||void 0,disabled:ve.disabled,onClick:()=>!ve.disabled&&mr(Le,ve),children:[ve.icon&&o.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:ve.icon}),o.jsx("span",{className:"nhs-navigation-split-view__item-label",children:ve.label}),ve.description&&o.jsx("span",{className:"nhs-navigation-split-view__item-description",children:ve.description}),a?.(ve),ve.badge!==void 0&&o.jsx("span",{className:"nhs-navigation-split-view__badge",children:ve.badge})]})},Le)}),t.length===0&&!m&&o.jsx("li",{className:"nhs-navigation-split-view__card-item","aria-disabled":"true",children:p||o.jsx("div",{style:{padding:16},children:"No items"})})]});const ge="nsv-nav-instructions",De=K.useMemo(()=>K.memo(({item:ve,idx:Le,selected:et,focused:We})=>{const qe=g(ve),On=ve.disabled?{"aria-disabled":!0,tabIndex:-1}:{tabIndex:We?0:-1,onClick:()=>{Ur.current=Le,mr(qe,ve)},onKeyDown:Qt=>{(Qt.key==="Enter"||Qt.key===" ")&&(Qt.preventDefault(),Ur.current=Le,mr(qe,ve))}};return o.jsxs("li",{id:String(qe),"data-nav-item":!0,className:"nhs-navigation-split-view__list-item nhs-navigation-split-view__item-button",role:"option","aria-selected":et,"aria-current":et?"true":void 0,"data-selected":et||void 0,"data-disabled":ve.disabled||void 0,...On,children:[ve.icon&&o.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:ve.icon}),o.jsxs("span",{className:"nhs-navigation-split-view__item-content",children:[o.jsx("span",{className:"nhs-navigation-split-view__item-label",children:ve.label}),ve.description&&o.jsx("span",{className:"nhs-navigation-split-view__item-description",children:ve.description}),a?.(ve)]}),ve.badge!==void 0&&o.jsx("span",{className:"nhs-navigation-split-view__badge",children:ve.badge})]})}),[g,mr,a]);return o.jsxs(o.Fragment,{children:[o.jsxs("ul",{ref:bt,className:"nhs-navigation-split-view__list",onKeyDown:fu,role:"listbox","aria-label":"Navigation items","aria-describedby":ge,"aria-activedescendant":ue?String(ue):void 0,children:[t.map((ve,Le)=>o.jsx(De,{item:ve,idx:Le,selected:g(ve)===ue,focused:Le===rt||rt===-1&&Le===0&&v==="first","data-just-selected":g(ve)===O?"true":void 0},g(ve))),t.length===0&&!m&&o.jsx("li",{className:"nhs-navigation-split-view__list-item","aria-disabled":"true",children:p||o.jsx("div",{style:{padding:16},children:"No items"})})]}),o.jsx("div",{id:ge,style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:S})]})};return o.jsx("div",{ref:G,className:wi,"aria-label":y?.rootLabel,"data-layout":B,onKeyDown:at,children:o.jsxs("div",{className:"nhs-navigation-split-view__body",children:[o.jsxs("div",{className:"nhs-navigation-split-view__panes","data-active-detail":Ue||void 0,style:{transform:Ue?"translateX(-100%)":void 0},children:[o.jsxs("div",{ref:X,className:"nhs-navigation-split-view__nav-pane",role:"navigation","aria-label":y?.navigationLabel||"Items","data-collapsed":dn||void 0,tabIndex:0,children:[F&&me&&o.jsx("div",{className:"nhs-navigation-split-view__nav-collapse",children:o.jsx("button",{type:"button",onClick:pr,className:"nhs-navigation-split-view__nav-collapse-btn","aria-label":dn?ee:Y,title:dn?ee:Y,children:dn?H||o.jsx(Sx,{}):U||o.jsx(wx,{})})}),o.jsx("div",{className:"nhs-navigation-split-view__nav-scroll",children:Zn()}),D&&o.jsx("div",{className:"nhs-navigation-split-view__nav-footer",role:"contentinfo",children:D})]}),o.jsxs("div",{ref:J,className:"nhs-navigation-split-view__content-pane",role:"region","aria-label":y?.contentLabel||"Content","data-has-selection":!!oe||void 0,tabIndex:0,style:{display:ft&&!st?"none":void 0},children:[Or&&o.jsx("div",{className:"nhs-navigation-split-view__header",children:du}),o.jsx("div",{className:"nhs-navigation-split-view__content-inner",style:{padding:32,flex:1},children:s(oe)})]}),B==="three-column"&&(!L||Aa)||ft&&!st?o.jsx("div",{ref:A,className:"nhs-navigation-split-view__secondary-pane",role:"region","aria-label":y?.secondaryContentLabel||"Secondary",tabIndex:0,children:o.jsxs("div",{className:"nhs-navigation-split-view__secondary-inner",style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[ft&&!st&&o.jsx("div",{className:"nhs-navigation-split-view__header",children:o.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[La,o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:o.jsx("h2",{style:{marginLeft:0,marginRight:0},children:oe&&typeof oe=="object"&&"label"in oe?oe.label:String(oe)})})]})})}),oe&&Q&&o.jsx("div",{className:"nhs-navigation-split-view__secondary-header",style:{padding:"16px 32px",borderBottom:"1px solid var(--nsplit-divider)"},children:typeof Q=="function"?Q(oe):Q}),o.jsx("div",{style:{padding:32,flex:1,minWidth:0},children:l?.(oe)})]})}):null]}),o.jsx("div",{ref:gr,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"}}),o.jsx("div",{"aria-live":"polite",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:$t?"Expanded to three column layout":"In two column layout"})]})})}tf.displayName="NavigationSplitView";const Cx=typeof window<"u"&&window.document?K.useLayoutEffect:K.useEffect,nf=(e,t,n,r)=>e==null||Number.isNaN(e)?r:Math.min(n,Math.max(t,e)),kx=({item:e,maxLines:t,enableDrilldown:n,onExpand:r,isActive:i,topLaneIndex:a})=>{const{ariaLabel:s}=e,l=`${e._pxLeft}px`,u=`${e._pxWidth}px`,c=`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${a})`,d=Math.floor(e._startFraction)+2,f=Math.max(1,Math.round(e._spanColumns)),m=n&&e.childItems&&e.childItems.length>0,p=h=>{m&&(h.preventDefault(),r?.(e))},y=m?{role:"button",tabIndex:0,"aria-haspopup":"dialog","aria-expanded":i||!1,onClick:p,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&p(h),h.key==="Escape"&&i&&p(h)}}:{};return o.jsxs("div",{className:xe("nhsuk-product-roadmap__item",m&&"nhsuk-product-roadmap__item--expandable",i&&"nhsuk-product-roadmap__item--active"),style:{left:l,width:u,top:c,"--item-height":t},role:"gridcell","aria-label":s,"aria-colindex":d,"aria-colspan":f,...y,children:[o.jsx("div",{className:"nhsuk-product-roadmap__item-bg","aria-hidden":"true"}),o.jsxs("div",{className:"nhsuk-product-roadmap__item-content",children:[o.jsx("span",{className:"nhsuk-product-roadmap__item-title",children:e.title}),m&&o.jsx("span",{className:xe("nhsuk-product-roadmap__item-expander",i&&"nhsuk-product-roadmap__item-expander--open"),"aria-hidden":"true"})]})]})},rf=E.memo(({dateHeadings:e,categories:t,columnWidthPx:n=400,itemMaxLines:r=2,className:i,ariaLabel:a="Product roadmap",enableDrilldown:s=!1,onToggleItem:l,drilldownMode:u="overlay",...c})=>{const[d,f]=E.useState(()=>new Set),[m,p]=E.useState(()=>new Set),y=E.useRef(new Set),h=E.useCallback(C=>d.has(C),[d]),g=E.useCallback(C=>{f(L=>{const D=new Set(L);return D.has(C.id)?(D.delete(C.id),p(F=>{const I=new Set(F);return I.add(C.id),I}),setTimeout(()=>p(F=>{const I=new Set(F);return I.delete(C.id),I}),240),l?.(C.id,!1)):(D.add(C.id),l?.(C.id,!0)),D})},[l]);Cx(()=>{if(u!=="inline"||!s||typeof document>"u")return;const C=[];if(d.forEach(I=>{y.current.has(I)||C.push(I)}),y.current=new Set(d),!C.length)return;const L=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1,D=C.map(I=>`.nhsuk-product-roadmap__inline-children[data-parent="${I}"] .nhsuk-product-roadmap__inline-child`).join(","),F=Array.from(document.querySelectorAll(D));if(F.length){if(L){F.forEach(I=>{I.style.opacity="1",I.style.transform="translateY(0)"});return}Promise.resolve().then(()=>CC).then(I=>{(I.gsap||I.default||I).to(F,{opacity:1,y:0,duration:.32,ease:"power2.out",stagger:.05})}).catch(()=>{F.forEach(I=>{I.style.opacity="1",I.style.transform="translateY(0)"})})}},[d,u,s]);const b=E.useCallback(()=>{d.size&&f(new Set)},[d]),w=xe("nhsuk-product-roadmap",i),T=nf(n,120,1200,400),S=nf(r,1,6,2),v=E.useMemo(()=>e.map(C=>new Date(C+" 01")),[e]),j=E.useMemo(()=>{if(v.length===0){const D=new Date;return[D,D]}const C=new Date(v[0]),L=Fi.offset(new Date(v[v.length-1]),1);return[C,L]},[v]),N=E.useMemo(()=>Vo().domain(j).range([0,v.length*T]),[j,v.length,T]),M=E.useCallback(C=>{if(C.startDate){const Y=new Date(C.startDate),H=new Date(C.endDate??C.startDate);H<Y&&H.setTime(Y.getTime());const U=N(Y),z=Fi.offset(new Date(H),1);let ie=N(z);Number.isFinite(ie)||(ie=U+T);const W=Math.max(T*.25,ie-U),le=U/T,je=W/T;return{...C,_pxLeft:U,_pxWidth:W,_startFraction:le,_spanColumns:je}}const L=C.date??1,D=C.dateOffset??0,F=C.length??1,I=C.partialLength??1,$=L-1+D,ee=F-1+I;return{...C,_pxLeft:$*T,_pxWidth:ee*T,_startFraction:$,_spanColumns:ee}},[N,T]),_=E.useMemo(()=>t.map(C=>{const D=C.roadmapItems.map(I=>{const $=!I.childItems&&I.children?{...I,childItems:I.children}:{...I};return M($)}).sort((I,$)=>I._pxLeft!==$._pxLeft?I._pxLeft-$._pxLeft:$._pxWidth-I._pxWidth),F=[];return D.forEach(I=>{const $=I._pxLeft,ee=I._pxLeft+I._pxWidth;let Y=F.findIndex(H=>H<=$);Y===-1&&(Y=F.length,F.push(0)),F[Y]=ee,I.verticalPosition=Y+1}),{...C,roadmapItems:D,_laneCount:F.length}}),[t,M]),P=E.useMemo(()=>_.map(C=>C._laneCount||1),[_]),k=E.useMemo(()=>`var(--category-width) ${e.map(()=>"var(--column-width)").join(" ")}`,[e]);return o.jsxs("div",{className:w,style:{"--column-width":`${T}px`,gridTemplateColumns:k},role:"grid","aria-label":a,"aria-colcount":e.length+1,"aria-rowcount":_.length+1,...c,children:[o.jsxs("div",{className:"nhsuk-product-roadmap__header-row",role:"row","aria-rowindex":1,children:[o.jsx("div",{className:"nhsuk-product-roadmap__header-cell",role:"columnheader","aria-colindex":1,children:o.jsx("span",{className:"nhsuk-visually-hidden",children:"Category"})}),e.map((C,L)=>o.jsx("div",{className:"nhsuk-product-roadmap__date-heading",role:"columnheader","aria-colindex":L+2,children:C},`${C}-${L}`))]}),_.map((C,L)=>{const D=L+2,F=P[L];let I,$=0,ee=[];s&&u==="inline"&&(ee=C.roadmapItems.filter(z=>h(z.id)&&z.childItems&&z.childItems.length).map(z=>({id:z.id,lane:z.verticalPosition||1,count:z.childItems.length})).sort((z,ie)=>z.lane-ie.lane),$=ee.reduce((z,ie)=>z+ie.count,0));const Y=F+$;I=`calc((${Y} * var(--roadmap-item-block-height)) + (max(0, ${Y} - 1) * var(--roadmap-row-gap)))`;const H={};let U=0;return ee.forEach(z=>{U+=z.count,H[z.lane+1]=U}),o.jsxs("div",{className:"nhsuk-product-roadmap__row",role:"row","aria-rowindex":D,children:[o.jsx("div",{className:"nhsuk-product-roadmap__category-cell",role:"rowheader","aria-colindex":1,children:C.heading}),o.jsx("div",{className:"nhsuk-product-roadmap__items-row",style:{gridColumn:`2 / span ${e.length}`,height:I},children:o.jsx("div",{className:"nhsuk-product-roadmap__items-layer",children:C.roadmapItems.map((z,ie)=>{const W=(z.verticalPosition||1)-1,le=ee.filter(Q=>Q.lane-1<W).reduce((Q,ae)=>Q+ae.count,0),je=W+le,de=h(z.id),fe=m.has(z.id);return o.jsxs(E.Fragment,{children:[o.jsx(kx,{item:z,maxLines:S,enableDrilldown:s,onExpand:g,isActive:de,topLaneIndex:je,laneOffset:le}),s&&u==="inline"&&(de||fe)&&z.childItems&&o.jsx("div",{"data-parent":z.id,className:"nhsuk-product-roadmap__inline-children","aria-label":`${z.title} child tasks`,children:z.childItems.map((Q,ae)=>{const he="calc(var(--roadmap-item-block-height) * 0.75)";let q=z._pxLeft,me=z._pxWidth;if(Q.startDate){const R=new Date(Q.startDate);let ne=Q.endDate?new Date(Q.endDate):new Date(R);ne<R&&(ne=new Date(R));const pe=new Date(ne);pe.setDate(pe.getDate()+1);const ue=N(R);let oe=N(pe);(!Number.isFinite(oe)||oe<=ue)&&(oe=ue+6),q=ue,me=Math.max(6,oe-ue)}const B=je+1+ae;return o.jsxs("div",{className:xe("nhsuk-product-roadmap__inline-child",Q.status&&`nhsuk-product-roadmap__inline-child--status-${Q.status}`,!de&&fe&&"nhsuk-product-roadmap__inline-child--collapsing"),style:{left:`${q}px`,width:`${me}px`,top:`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${B})`,height:he,opacity:de?0:void 0,transform:de?"translateY(-6px)":void 0},children:[o.jsx("div",{className:"nhsuk-product-roadmap__inline-child-bg"}),o.jsx("div",{className:"nhsuk-product-roadmap__inline-child-content",children:Q.title})]},Q.id??ae)})})]},z.id??ie)})})})]},`${C.heading}-${L}`)}),s&&u==="overlay"&&d.size===1&&(()=>{const C=Array.from(d)[0],L=t.flatMap(D=>D.roadmapItems).find(D=>D.id===C);return!L||!L.childItems?null:o.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-overlay",role:"dialog","aria-modal":"true","aria-label":`${L.title} details`,children:[o.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-panel",children:[o.jsxs("header",{className:"nhsuk-product-roadmap__drilldown-header",children:[o.jsx("h3",{className:"nhsuk-product-roadmap__drilldown-title",children:L.title}),o.jsx("button",{type:"button",className:"nhsuk-product-roadmap__drilldown-close",onClick:b,"aria-label":"Close details",children:"Ã—"})]}),o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-content",children:L.content}),o.jsx("ul",{className:"nhsuk-product-roadmap__drilldown-children",children:L.childItems.map((D,F)=>o.jsxs("li",{className:"nhsuk-product-roadmap__drilldown-child",children:[o.jsx("strong",{className:"nhsuk-product-roadmap__drilldown-child-title",children:D.title}),D.content&&o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-child-content",children:D.content})]},D.id??F))})]}),o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-backdrop",onClick:b,"aria-hidden":"true"})]})})()]})});rf.displayName="ProductRoadmap";function af(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=af(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function hs(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=af(e))&&(r&&(r+=" "),r+=t);return r}function St(e){return function(){return e}}const rl=Math.PI,il=2*rl,Sr=1e-6,Tx=il-Sr;function sf(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Nx(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return sf;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class jx{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?sf:Nx(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,u=r-t,c=i-n,d=s-t,f=l-n,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(m>Sr)if(!(Math.abs(f*u-c*d)>Sr)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-s,y=i-l,h=u*u+c*c,g=p*p+y*y,b=Math.sqrt(h),w=Math.sqrt(m),T=a*Math.tan((rl-Math.acos((h+m-g)/(2*b*w)))/2),S=T/w,v=T/b;Math.abs(S-1)>Sr&&this._append`L${t+S*d},${n+S*f}`,this._append`A${a},${a},0,0,${+(f*p>d*y)},${this._x1=t+v*u},${this._y1=n+v*c}`}}arc(t,n,r,i,a,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),c=t+l,d=n+u,f=1^s,m=s?i-a:a-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Sr||Math.abs(this._y1-d)>Sr)&&this._append`L${c},${d}`,r&&(m<0&&(m=m%il+il),m>Tx?this._append`A${r},${r},0,1,${f},${t-l},${n-u}A${r},${r},0,1,${f},${this._x1=c},${this._y1=d}`:m>Sr&&this._append`A${r},${r},0,${+(m>=rl)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function of(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new jx(t)}function lf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cf(e){this._context=e}cf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function uf(e){return new cf(e)}function df(e){return e[0]}function ff(e){return e[1]}function hf(e,t){var n=St(!0),r=null,i=uf,a=null,s=of(l);e=typeof e=="function"?e:e===void 0?df:St(e),t=typeof t=="function"?t:t===void 0?ff:St(t);function l(u){var c,d=(u=lf(u)).length,f,m=!1,p;for(r==null&&(a=i(p=s())),c=0;c<=d;++c)!(c<d&&n(f=u[c],c,u))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+e(f,c,u),+t(f,c,u));if(p)return a=null,p+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:St(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:St(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:St(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),l):r},l}function al(e,t,n){var r=null,i=St(!0),a=null,s=uf,l=null,u=of(c);e=typeof e=="function"?e:e===void 0?df:St(+e),t=typeof t=="function"?t:St(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?ff:St(+n);function c(f){var m,p,y,h=(f=lf(f)).length,g,b=!1,w,T=new Array(h),S=new Array(h);for(a==null&&(l=s(w=u())),m=0;m<=h;++m){if(!(m<h&&i(g=f[m],m,f))===b)if(b=!b)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=m-1;y>=p;--y)l.point(T[y],S[y]);l.lineEnd(),l.areaEnd()}b&&(T[m]=+e(g,m,f),S[m]=+t(g,m,f),l.point(r?+r(g,m,f):T[m],n?+n(g,m,f):S[m]))}if(w)return l=null,w+""||null}function d(){return hf().defined(i).curve(s).context(a)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:St(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:St(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:St(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:St(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:St(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:St(+f),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:St(!!f),c):i},c.curve=function(f){return arguments.length?(s=f,a!=null&&(l=s(a)),c):s},c.context=function(f){return arguments.length?(f==null?a=l=null:l=s(a=f),c):a},c}function mf(e){return e<0?-1:1}function pf(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),l=(a*i+s*r)/(r+i);return(mf(a)+mf(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function gf(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function sl(e,t,n){var r=e._x0,i=e._y0,a=e._x1,s=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,i+l*t,a-l,s-l*n,a,s)}function ms(e){this._context=e}ms.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sl(this,this._t0,gf(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,sl(this,gf(this,n=pf(this,e,t)),n);break;default:sl(this,this._t0,n=pf(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},Object.create(ms.prototype).point=function(e,t){ms.prototype.point.call(this,t,e)};function ps(e){return new ms(e)}function Dx(e,t,n){const r=Iu(e,t);return Vo().domain(r).range(n)}function bf(e,t,n){const[r,i]=Iu(e,t);if(!(Number.isFinite(r)&&Number.isFinite(i)))return rs().domain([0,0]).range(n);let s;if(r<=0)s=Math.min(0,r);else{const u=i-r,c=(u>0?u:r)*.1;s=Math.max(0,r-c),s===r&&(s=Math.max(0,r*.9))}const l=i??0;return rs().domain([s,l]).nice().range(n)}function ol(e,t,n,r){const i=hf().x(t).y(n);return r?.smooth!==!1&&i.curve(ps),i(e)??""}function Mx(e={}){const t=K.useRef(null),n=K.useMemo(()=>({top:e.top??16,right:e.right??16,bottom:e.bottom??32,left:e.left??48}),[e.bottom,e.left,e.right,e.top]),[r,i]=K.useState({width:0,height:0});K.useLayoutEffect(()=>{if(!t.current)return;const l=new ResizeObserver(u=>{for(const c of u){const{width:d,height:f}=c.contentRect;i({width:d,height:f})}});return l.observe(t.current),()=>l.disconnect()},[]);const a=Math.max(0,r.width-n.left-n.right),s=Math.max(0,r.height-n.top-n.bottom);return{width:r.width,height:r.height,innerWidth:a,innerHeight:s,margin:n,ref:t}}const yf=K.createContext(null);function rr(){return K.useContext(yf)}const vf=({height:e=240,margin:t,width:n,className:r="fdp-chart",children:i,role:a="group",ariaLabel:s})=>{const l=Mx(t),u={height:e,position:"relative"};return n!==void 0&&(u.width=typeof n=="number"?`${n}px`:n),o.jsx("div",{ref:l.ref,className:r,style:u,role:a,"aria-label":s,children:o.jsx(yf.Provider,{value:l,children:i})})},ll=K.createContext(null),Cr=()=>K.useContext(ll),_f=({series:e,innerWidth:t,innerHeight:n,parseX:r,children:i,xTickCount:a=6,yTickCount:s=5,yDomain:l,xPadding:u,yPadding:c,yBottomGapPx:d})=>{const f=rr(),m=t??f?.innerWidth??0,p=n??f?.innerHeight??0,y=K.useMemo(()=>e.flatMap(v=>v.data),[e]),h=K.useCallback(v=>{if(r)return r(v);const j=v.x;return j instanceof Date?j:new Date(j)},[r]),g=u??6,b=c??6,w=K.useMemo(()=>Dx(y,h,[g,Math.max(0,m-g)]),[y,h,m,g]),T=K.useMemo(()=>{const v=Math.max(0,d??0),j=Math.max(0,p-(b+v));if(l){const N=bf([],M=>M.y,[j,b]);return N.domain(l),N}return bf(y,N=>N.y,[j,b])},[y,p,l,b,d]),S=K.useMemo(()=>({xScale:w,yScale:T,getXTicks:(v=a)=>w.ticks(v),getYTicks:(v=s)=>T.ticks(v)}),[w,T,a,s]);return o.jsx(ll.Provider,{value:S,children:i})},cl=({type:e,scale:t,tickCount:n,tickValues:r,formatTick:i,label:a,offset:s,className:l,minLabelSpacing:u,maxTickLabelLength:c,autoMinLabelSpacing:d=e==="x",labelAngle:f=0,allowLabelWrap:m=!0,tickFormatPreset:p,showZeroAxisBreak:y=!1,zeroAxisBreakGapPx:h=32,zeroAxisBreakTickBufferPx:g=12})=>{const b=Cr(),w=rr(),T=t||(e==="x"?b?.xScale:b?.yScale),S=n??(e==="x"?6:5),v=typeof i=="function",j=K.useMemo(()=>{if(v||!p)return;const _=P=>new Intl.DateTimeFormat(void 0,P);switch(p){case"dayShortMonth":return P=>{const k=P instanceof Date?P:new Date(P);return`${k.getDate()}
${_({month:"short"}).format(k)}`};case"dayShortMonthYear":return P=>{const k=P instanceof Date?P:new Date(P);return`${k.getDate()}
${_({month:"short"}).format(k)} ${k.getFullYear()}`};case"shortMonth":return P=>{const k=P instanceof Date?P:new Date(P);return _({month:"short"}).format(k)};case"shortMonthYear":return P=>{const k=P instanceof Date?P:new Date(P);return`${_({month:"short"}).format(k)} ${k.getFullYear()}`};case"hourMinute":return P=>{const k=P instanceof Date?P:new Date(P);return _({hour:"2-digit",minute:"2-digit"}).format(k)};default:return}},[v,p]);let N=v?i:j||(_=>String(_));const M=K.useMemo(()=>r&&Array.isArray(r)?r:T?typeof T.ticks=="function"?T.ticks(S):T.domain?T.domain():[]:[],[T,S,r]);if(e==="x"&&!v&&!p&&M.length&&M.every(_=>_ instanceof Date)){const _=M[0],P=M[M.length-1],k=P.getTime()-_.getTime(),C=24*3600*1e3,L=365*C,D=_.getFullYear()===P.getFullYear(),F=new Intl.DateTimeFormat(void 0,{month:"short"});if(k<2*C){const I=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"});N=$=>I.format($)}else if(k<32*C)N=I=>{const $=I;return`${$.getDate()} ${F.format($)}`};else if(k<L&&D)N=I=>F.format(I);else if(k<2*L){const I=new Set;N=$=>{const ee=$,Y=ee.getMonth();return I.has(Y)||I.add(Y),`${F.format(ee)} ${ee.getFullYear()}`}}else N=I=>String(I.getFullYear())}if(!T||!w)return null;if(e==="x"){const _=s??w.innerHeight,P=typeof T.bandwidth=="function",k=P?T.bandwidth():0,C=F=>{const I=T(F);return P?I+k/2:I};let L=u??0;if(d&&u==null){const F=M.map($=>N($).replace(/\n.*/g,"")),I=F.length?F.reduce(($,ee)=>$+ee.length,0)/F.length:0;L=Math.max(12,Math.round(I*6+4))}const D=K.useMemo(()=>{if(r&&Array.isArray(r)||L<=0)return M;const F=[];let I=-1/0;for(const $ of M){const ee=C($);ee-I>=L&&(F.push($),I=ee)}return F},[M,T,L,r,P,k]);return o.jsxs("g",{className:["fdp-axis","fdp-axis--x",l].filter(Boolean).join(" "),transform:`translate(0,${_})`,fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[o.jsx("line",{x1:0,x2:w.innerWidth,y1:0,y2:0,stroke:"currentColor"}),D.map((F,I)=>{const $=N(F),ee=c&&$.length>c?$.slice(0,Math.max(1,c-1))+"â€¦":$,Y=m?ee.split(/\n/):[ee.replace(/\n/g," ")],H=f<0?"end":f>0?"start":"middle";return o.jsxs("g",{transform:`translate(${C(F)},0)`,children:[o.jsx("line",{y2:6,stroke:"currentColor"}),o.jsxs("text",{y:9,textAnchor:H,className:"fdp-axis__tick",dominantBaseline:"hanging",transform:f?`rotate(${f})`:void 0,fontFamily:"inherit",children:[Y.map((U,z)=>o.jsx("tspan",{x:0,dy:z===0?0:"1.1em",children:U},z)),ee!==$&&o.jsx("title",{children:$})]})]},F?.toString?.()||I)})]})}return o.jsxs("g",{className:["fdp-axis","fdp-axis--y",l].filter(Boolean).join(" "),fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[(()=>{if(!y)return o.jsx("line",{x1:0,x2:0,y1:0,y2:w.innerHeight,stroke:"currentColor"});const _=Math.max(6,h),P=Math.max(0,w.innerHeight-_);return o.jsx("line",{x1:0,x2:0,y1:0,y2:P,stroke:"currentColor"})})(),M.map((_,P)=>{const k=N(_),C=c&&k.length>c?k.slice(0,Math.max(1,c-1))+"â€¦":k,L=m?C.split(/\n/):[C.replace(/\n/g," ")];if(y){const D=Math.max(6,h),F=Math.max(0,w.innerHeight-D),I=T(_),$=Math.max(0,g);if(I>F-$)return null}return o.jsxs("g",{transform:`translate(0,${T(_)})`,children:[o.jsx("line",{x2:-6,stroke:"currentColor"}),o.jsxs("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:[L.map((D,F)=>o.jsx("tspan",{x:-9,dy:F===0?0:"1.1em",children:D},F)),C!==k&&o.jsx("title",{children:k})]})]},_?.toString?.()||P)}),y&&(()=>{const _=Math.max(6,h),P=w.innerHeight,C=Math.max(0,P-_),L=C+_/2,D=Math.max(3,Math.min(8,Math.round(_*.18))),F=Math.max(3,Math.min(6,Math.floor(_/(2*D))||3)),I=-D*F;let $=`M0,${I}`;for(let H=0;H<F;H++)$+=` l-4,${D} l4,${D}`;const ee=L+I-2,Y=L-I+2;return o.jsxs("g",{children:[o.jsx("line",{x1:0,x2:0,y1:C,y2:ee,stroke:"currentColor",strokeDasharray:"2 2"}),o.jsx("g",{transform:`translate(0,${L})`,"aria-hidden":"true",children:o.jsx("path",{d:$,stroke:"currentColor",strokeLinecap:"square",fill:"none"})}),o.jsx("line",{x1:0,x2:0,y1:Y,y2:P,stroke:"currentColor",strokeDasharray:"2 2"}),o.jsx("g",{transform:`translate(0,${P})`,children:o.jsx("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:"0"})})]})})(),a&&o.jsx("text",{transform:"rotate(-90)",x:-w.innerHeight/2,y:-w.margin.left+12,textAnchor:"middle",className:"fdp-axis__label",fontFamily:"inherit",children:a})]})},xf=({axis:e="y",tickCount:t,stroke:n="var(--fdp-chart-grid,#e5e5e5)",dasharray:r="2 4",className:i,showZeroAxisBreak:a=!1,zeroAxisBreakGapPx:s=32,zeroAxisBreakTickBufferPx:l=12})=>{const u=Cr(),c=rr();if(!u||!c)return null;const d=e==="y"?u.getYTicks(t):u.getXTicks(t);return o.jsxs("g",{className:["fdp-grid",i].filter(Boolean).join(" "),children:[e==="y"&&d.map((f,m)=>{const p=u.yScale(f);if(a){const y=Math.max(6,s),h=Math.max(0,c.innerHeight-y),g=Math.max(0,l);if(p>h-g)return null}return o.jsx("line",{x1:0,x2:c.innerWidth,y1:p,y2:p,stroke:n,strokeDasharray:r},m)}),e==="x"&&d.map((f,m)=>o.jsx("line",{y1:0,y2:c.innerHeight,x1:u.xScale(f),x2:u.xScale(f),stroke:n,strokeDasharray:r},m))]})},Oi={color:{"data-viz":{$type:"color",categorical:{1:{$value:"{color.primary.blue}",$description:"Series 1 â€“ NHS Blue (brand core)"},2:{$value:"#41B6E6",$description:"Series 2 â€“ NHS Light Blue (new)"},3:{$value:"{color.secondary.aqua-green}",$description:"Series 3 â€“ NHS Aqua Green (existing)"},4:{$value:"#78BE20",$description:"Series 4 â€“ NHS Light Green (new)"},5:{$value:"{color.primary.green}",$description:"Series 5 â€“ NHS Green (existing)"},6:{$value:"{color.secondary.warm-yellow}",$description:"Series 6 â€“ NHS Warm Yellow (existing; distinct from focus yellow)"},7:{$value:"#ED4F00",$description:"Series 7 â€“ NHS Tangerine (new; warmer/deeper than existing orange)"},8:{$value:"{color.secondary.pink}",$description:"Series 8 â€“ NHS Pink (existing)"},9:{$value:"#E317AA",$description:"Series 9 â€“ NHS Bright Pink (new vivid accent)"},10:{$value:"#880FB8",$description:"Series 10 â€“ NHS Light Purple (new mid purple)"},11:{$value:"{color.primary.purple}",$description:"Series 11 â€“ NHS Purple (existing dark purple)"},12:{$value:"#9A6324",$description:"Series 12 â€“ NHS Brown (new; earth neutral)"}},neutral:{comparison:{$value:"{color.grey.1}",$description:"Neutral comparison series (optional)"}},region:{$comment:"Fixed colours for NHS geographical regions; prefer stable mapping for maps. London colour updated (#78BE21 â€“ light green).","north-east":{$value:"{color.primary.blue}",$description:"North East â€“ NHS Blue"},"north-west":{$value:"#41B6E6",$description:"North West â€“ NHS Light Blue"},"east-of-england":{$value:"{color.primary.purple}",$description:"East of England â€“ NHS Purple"},midlands:{$value:"{color.secondary.pink}",$description:"Midlands â€“ NHS Pink"},london:{$value:"#78BE21",$description:"London â€“ NHS Light Green (new)"},"south-west":{$value:"#FAE100",$description:"South West â€“ NHS Yellow variant (new)"},"south-east":{$value:"#ed8b00",$description:"South East â€“ NHS Orange (existing base orange)"}},severity:{$comment:"Semantic severity / alert colours (light background ramp â†’ critical).",low:{$value:"{color.secondary.pale-yellow}",$description:"Low severity â€“ pale yellow background"},moderate:{$value:"{color.secondary.warm-yellow}",$description:"Moderate severity â€“ warm yellow"},high:{$value:"{color.secondary.orange}",$description:"High severity â€“ orange"},critical:{$value:"{color.primary.red}",$description:"Critical severity â€“ red"}},"org-level":{$comment:"Organisational level semantic colours (stable NHS brand mappings).",trust:{$value:"{color.primary.blue}",$description:"Trust â€“ NHS Blue"},ambulance:{$value:"{color.primary.green}",$description:"Ambulance â€“ NHS Green"},icb:{$value:"{color.primary.dark-pink}",$description:"ICB â€“ NHS Dark Pink"},region:{$value:"{color.primary.purple}",$description:"Region â€“ NHS Purple"}},stroke:{$comment:"Automatic contrast stroke colours for overlays / borders. Light fills get dark stroke; dark fills get white stroke.",categorical:{1:{$value:"#ffffff",$description:"Stroke for series 1 (blue)"},2:{$value:"#212b32",$description:"Stroke for series 2 (light blue)"},3:{$value:"#212b32",$description:"Stroke for series 3 (aqua green)"},4:{$value:"#212b32",$description:"Stroke for series 4 (light green)"},5:{$value:"#ffffff",$description:"Stroke for series 5 (green)"},6:{$value:"#212b32",$description:"Stroke for series 6 (warm yellow)"},7:{$value:"#ffffff",$description:"Stroke for series 7 (tangerine)"},8:{$value:"#ffffff",$description:"Stroke for series 8 (pink)"},9:{$value:"#ffffff",$description:"Stroke for series 9 (bright pink)"},10:{$value:"#ffffff",$description:"Stroke for series 10 (light purple)"},11:{$value:"#ffffff",$description:"Stroke for series 11 (purple)"},12:{$value:"#ffffff",$description:"Stroke for series 12 (brown)"}},region:{$comment:"Region stroke colours derived from fill colours: dark fills lightened ~35%; light fills darkened ~25% for consistent contrast without defaulting to pure white/black.","north-east":{$value:"#5996D1",$description:"Stroke for North East (blue lightened 35%)"},"north-west":{$value:"#3189AD",$description:"Stroke for North West (light blue darkened 25%)"},"east-of-england":{$value:"#7A59A3",$description:"Stroke for East of England (purple lightened 35%)"},midlands:{$value:"#CA71A4",$description:"Stroke for Midlands (pink lightened 35%)"},london:{$value:"#5A8F19",$description:"Stroke for London (light green darkened 25%)"},"south-west":{$value:"#BCA900",$description:"Stroke for South West (yellow darkened 25%)"},"south-east":{$value:"#B26800",$description:"Stroke for South East (orange darkened 25%)"}},severity:{$comment:"Contrast strokes for severity colours (light backgrounds use dark stroke; dark backgrounds use white).",low:{$value:"#212b32",$description:"Stroke for low severity (pale yellow fill)"},moderate:{$value:"#212b32",$description:"Stroke for moderate severity (warm yellow fill)"},high:{$value:"#212b32",$description:"Stroke for high severity (orange fill)"},critical:{$value:"#ffffff",$description:"Stroke for critical severity (red fill)"}},"org-level":{$comment:"Contrast strokes for organisational level colours (all dark brand fills so white stroke for consistency).",trust:{$value:"#ffffff",$description:"Stroke for trust (blue fill)"},ambulance:{$value:"#ffffff",$description:"Stroke for ambulance (green fill)"},icb:{$value:"#ffffff",$description:"Stroke for ICB (dark pink fill)"},region:{$value:"#ffffff",$description:"Stroke for region (purple fill)"}}},spc:{$comment:"SPC (Statistical Process Control) semantic variation colours aligned to SPCChart.scss and SPCIcons.",improvement:{$value:"#00B0F0",$description:"SPC special cause improvement (favourable)"},concern:{$value:"#E46C0A",$description:"SPC special cause concern (deteriorating)"},"no-judgement":{$value:"#490092",$description:"SPC special cause (no directional judgement)"},"common-cause":{$value:"#A6A6A6",$description:"SPC common cause (baseline variation)"},"assurance-pass":{$value:"#00823B",$description:"SPC assurance pass indicator (process capable)"},"assurance-fail":{$value:"#DA291C",$description:"SPC assurance fail indicator (process not capable)"},gradient:{$comment:"Opacity stops for SPC icon gradient wash (applied top-left -> bottom-right). Consumers build gradients using these opacities + base colour.",stop:{"start-opacity":{$value:"0.18",$description:"Start stop opacity (0%) for classic variant wash"},"mid-opacity":{$value:"0.06",$description:"Mid stop opacity (~65-75%)"},"end-opacity":{$value:"0",$description:"End stop opacity (100%)"},"triangle-start-opacity":{$value:"0.18",$description:"Start opacity for triangle variants (kept aligned)"},"triangle-mid-opacity":{$value:"0.06",$description:"Mid opacity for triangle variants"},"triangle-end-opacity":{$value:"0",$description:"End opacity for triangle variants"}}},stroke:{$comment:"Contrast stroke colours for SPC variation fills.",improvement:{$value:"#000000",$description:"Stroke for improvement points"},concern:{$value:"#000000",$description:"Stroke for concern points"},"no-judgement":{$value:"#000000",$description:"Stroke for no-judgement points"},"common-cause":{$value:"#ffffff",$description:"Stroke for common cause points"},"assurance-pass":{$value:"#000000",$description:"Stroke for assurance pass points"},"assurance-fail":{$value:"#000000",$description:"Stroke for assurance fail points"}}}}}},gs={color:{primary:{$type:"color",blue:{$value:"#005eb8",$description:"NHS Blue - Primary brand color"},"blue-active":{$value:"#002f5c",$description:"NHS Active Blue (50% shade) â€“ alias of button/login active; promoted for general reuse"},white:{$value:"#ffffff",$description:"NHS White"},black:{$value:"#212b32",$description:"NHS Black"},green:{$value:"#007f3b",$description:"NHS Green"},purple:{$value:"#330072",$description:"NHS Purple"},"dark-pink":{$value:"#7c2855",$description:"NHS Dark Pink"},red:{$value:"#d5281b",$description:"NHS Red"},"light-purple":{$value:"#880FB8",$description:"NHS Light Purple (data viz promoted)"},yellow:{$value:"#ffeb3b",$description:"NHS Yellow"}},secondary:{$type:"color","pale-yellow":{$value:"#fff9c4",$description:"NHS Pale Yellow"},"warm-yellow":{$value:"#ffb81c",$description:"NHS Warm Yellow"},"region-yellow":{$value:"#FAE100",$description:"NHS Region Yellow (maps)"},orange:{$value:"#ed8b00",$description:"NHS Orange"},tangerine:{$value:"#ED4F00",$description:"NHS Tangerine (data viz promoted)"},"aqua-green":{$value:"#00a499",$description:"NHS Aqua Green"},"light-blue":{$value:"#41B6E6",$description:"NHS Light Blue (data viz promoted)"},pink:{$value:"#ae2573",$description:"NHS Pink"},"bright-pink":{$value:"#E317AA",$description:"NHS Bright Pink (data viz promoted)"},"light-green":{$value:"#78BE20",$description:"NHS Light Green (data viz promoted)"},brown:{$value:"#9A6324",$description:"NHS Brown (data viz promoted neutral)"}},grey:{1:{$value:"#4c6272",$description:"NHS Grey 1 - Darkest grey"},2:{$value:"#768692",$description:"NHS Grey 2 - Darker grey"},3:{$value:"#aeb7bd",$description:"NHS Grey 3 - Medium grey"},4:{$value:"#d8dde0",$description:"NHS Grey 4 - Light grey"},5:{$value:"#f0f4f5",$description:"NHS Grey 5 - Lightest grey"},$type:"color"},accessibility:{$type:"color",$comment:"Accessibility-oriented color tokens. Includes CVD-safe pairs and Okabeâ€“Ito colors. Use these for positive/negative semantics and colour-blindâ€“friendly defaults.","okabe-ito":{green:{$value:"#009E73",$description:"Okabeâ€“Ito green (CVD-safe) â€“ recommended positive"},vermillion:{$value:"#D55E00",$description:"Okabeâ€“Ito vermillion / redâ€“orange (CVD-safe) â€“ recommended negative"}},"cvd-safe":{blue:{$value:"#1f77b4",$description:"CVD-safe blue (pairs with orange); widely used in Matplotlib/Tableau sets"},orange:{$value:"#ff7f0e",$description:"CVD-safe orange (pairs with blue)"}},positive:{$value:"{color.accessibility.okabe-ito.green}",$description:"Accessibility semantic alias â€“ positive"},negative:{$value:"{color.accessibility.okabe-ito.vermillion}",$description:"Accessibility semantic alias â€“ negative"}}}},Px=["#005eb8","#0072ce","#41b6e6","#00a499","#7c2855","#330072","#d5281b","#ffb81c","#fae100","#4c6272","#768692","#aeb7bd"];let ul=null,dl=null,fl=null,wf="optimized";function Ix(){const e={color:{...gs.color,...Oi.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!a)return;const s=a.$value||a.value;if(typeof s=="string"&&/^\{.+\}$/.test(s))return t(s.slice(1,-1),i);if(typeof s=="string")return s},n=[];try{for(let r=1;r<=12;r++){const i=`color.data-viz.categorical.${r}`,a=t(i);if(!a)throw new Error(`Missing token ${i}`);n.push(a)}return n}catch{return Px}}function Fx(){return ul||(ul=Ix()),ul}function $x(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.trim());return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function hl(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Lx(e,t,n){const r=hl(e),i=hl(t),a=hl(n),s=r*.4124+i*.3576+a*.1805,l=r*.2126+i*.7152+a*.0722,u=r*.0193+i*.1192+a*.9505;return{x:s*100,y:l*100,z:u*100}}function Ax(e,t,n){let s=e/95.047,l=t/100,u=n/108.883;const c=d=>d>.008856?Math.cbrt(d):7.787*d+16/116;return s=c(s),l=c(l),u=c(u),{L:116*l-16,a:500*(s-l),b:200*(l-u)}}function Sf(e){const t=$x(e);if(!t)return null;const n=Lx(t.r,t.g,t.b);return Ax(n.x,n.y,n.z)}function Cf(e,t){const n=e.L-t.L,r=e.a-t.a,i=e.b-t.b;return Math.sqrt(n*n+r*r+i*i)}function Ex(){const e=Fx();if(e.length<=2)return e.slice();const t=e.map(s=>Sf(s));let n=0,r=-1;for(let s=0;s<e.length;s++){const l=t[s];if(!l)continue;let u=0,c=0;for(let f=0;f<e.length;f++)s!==f&&t[f]&&(u+=Cf(l,t[f]),c++);const d=u/Math.max(1,c);d>r&&(r=d,n=s)}const i=new Set(e.map((s,l)=>l)),a=[];for(a.push(n),i.delete(n);i.size;){let s=Array.from(i)[0],l=-1;for(const u of i){const c=t[u];if(!c)continue;let d=1/0;for(const f of a){const m=t[f];if(m){const p=Cf(c,m);p<d&&(d=p)}}d>l&&(l=d,s=u)}a.push(s),i.delete(s)}return a.map(s=>e[s])}function Bx(){return dl||(dl=Ex()),dl}function Ox(e,t,n){const r=(e+16)/116,i=t/500+r,a=r-n/200,s=d=>{const f=d*d*d;return f>.008856?f:(d-16/116)/7.787},l=s(i)*95.047,u=s(r)*100,c=s(a)*108.883;return{X:l,Y:u,Z:c}}function Rx(e,t,n){e/=100,t/=100,n/=100;let r=e*3.2406+t*-1.5372+n*-.4986,i=e*-.9689+t*1.8758+n*.0415,a=e*.0557+t*-.204+n*1.057;const s=l=>l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055;return r=Math.min(1,Math.max(0,s(r))),i=Math.min(1,Math.max(0,s(i))),a=Math.min(1,Math.max(0,s(a))),{r:Math.round(r*255),g:Math.round(i*255),b:Math.round(a*255)}}function Hx(e,t,n){return`#${[e,t,n].map(r=>r.toString(16).padStart(2,"0")).join("")}`}function zx(e,t){const n=Sf(e);if(!n)return e;const r=Math.min(100,Math.max(0,n.L+t)),{X:i,Y:a,Z:s}=Ox(r,n.a,n.b),l=Rx(i,a,s);return Hx(l.r,l.g,l.b)}function Ux(){const e=Bx(),n=[12,-12,24,-24].map(i=>e.map(a=>zx(a,i))),r=[...e];return n.forEach(i=>r.push(...i)),r}function Wx(){return(!fl||Vx())&&(fl=Ux(),kf=wf),fl}let kf=null;function Vx(){return kf!==wf}function xn(e){const t=Wx();return t[e%t.length]}let Qr=null,Ri=null,Hi=null,zi=null;function Gx(){const e=Oi?.color?.["data-viz"]?.stroke;if(e){const t=e.categorical||{};Qr=[];for(let a=1;a<=12;a++){const s=t[String(a)]?.$value||t[String(a)]?.value;Qr.push(typeof s=="string"?s:"#212b32")}const n=e.region||{};Ri={},Object.keys(n).forEach(a=>{const s=n[a]?.$value||n[a]?.value;typeof s=="string"&&(Ri[a]=s)});const r=e.severity||{},i=e["org-level"]||{};zi={},Object.keys(i).forEach(a=>{const s=i[a]?.$value||i[a]?.value;typeof s=="string"&&(zi[a]=s)}),Hi={},Object.keys(r).forEach(a=>{const s=r[a]?.$value||r[a]?.value;typeof s=="string"&&(Hi[a]=s)})}}function bs(){(!Qr||!Ri||!Hi||!zi)&&Gx()}function kr(e){return bs(),Qr?Qr[e%Qr.length]:"#212b32"}function Yx(e){return bs(),Ri?Ri[e]:void 0}function ys(e,t){return Yx(e)||kr(t)}const ml=["low","moderate","high","critical"];let pl=null;function qx(){const e={color:{...gs.color,...Oi.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!a)return;const s=a.$value||a.value;return typeof s=="string"&&/^\{.+\}$/.test(s)?t(s.slice(1,-1),i):typeof s=="string"?s:void 0},n={};return ml.forEach(r=>{const i=t(`color.data-viz.severity.${r}`);i&&(n[r]=i)}),n}function Tf(){return pl||(pl=qx()),pl}function Xx(e){return Tf()[e.toLowerCase()]}function Kx(e,t){return Xx(e)||Tf()[ml[t%ml.length]]||xn(t)}function Jx(e){return bs(),Hi?Hi[e]:void 0}function Zx(e,t){return Jx(e)||kr(t)}const gl=["trust","ambulance","icb","region"];let bl=null;function Qx(){const e={color:{...gs.color,...Oi.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!a)return;const s=a.$value||a.value;return typeof s=="string"&&/^\{.+\}$/.test(s)?t(s.slice(1,-1),i):typeof s=="string"?s:void 0},n={};return gl.forEach(r=>{const i=t(`color.data-viz.org-level.${r}`);i&&(n[r]=i)}),n}function Nf(){return bl||(bl=Qx()),bl}function e1(e){return Nf()[e.toLowerCase()]}function t1(e,t){return e1(e)||Nf()[gl[t%gl.length]]||xn(t)}function n1(e){return bs(),zi?zi[e]:void 0}function r1(e,t){return n1(e)||kr(t)}let yl=null;const i1=["north-east","north-west","east-of-england","midlands","london","south-west","south-east"];function a1(e){return e.trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function s1(){const e={color:{...gs.color,...Oi.color}},t=(i,a=new Set)=>{if(a.has(i))return;a.add(i);const s=i.split(".").reduce((u,c)=>u?u[c]:void 0,e);if(!s)return;const l=s.$value||s.value;return typeof l=="string"&&/^\{.+\}$/.test(l)?t(l.slice(1,-1),a):typeof l=="string"?l:void 0},n={},r=[];return i1.forEach(i=>{const a=t(`color.data-viz.region.${i}`);a?n[i]=a:r.push(i)}),process.env.NODE_ENV!=="production"&&(Object.keys(n).length===0?console.warn("[DataViz] Region colour tokens unresolved  falling back to categorical colours."):r.length&&console.warn(`[DataViz] Missing region colour tokens: ${r.join(", ")}.`)),n}function o1(){return yl||(yl=s1()),yl}function l1(e){return o1()[a1(e)]}function ei(e,t){return l1(e)||xn(t)}const jf=K.createContext(null),Ui=()=>K.useContext(jf),c1=({initialHiddenIds:e=[],children:t,hiddenIds:n,onChange:r})=>{const[i,a]=K.useState(()=>new Set(e)),s=n!==void 0,l=K.useMemo(()=>s?new Set(n):i,[s,n,i]),u=K.useCallback(d=>{s||a(new Set(d)),r?.(Array.from(d))},[s,r]),c=K.useMemo(()=>({hiddenIds:l,isHidden:d=>l.has(d),toggle:d=>{const f=new Set(l);f.has(d)?f.delete(d):f.add(d),u(f)},showOnly:d=>{u(new Set)},showAll:()=>u(new Set),setHidden:d=>u(new Set(Array.isArray(d)?d:Array.from(d)))}),[l,u]);return o.jsx(jf.Provider,{value:c,children:t})},Df=K.createContext(null),Wn=()=>K.useContext(Df),Mf=({children:e,maxDistance:t=40,wrapAround:n=!1})=>{const r=Cr(),i=Ui(),[a,s]=K.useState(null),l=K.useRef(new Map),[u,c]=K.useState([]),d=K.useCallback((N,M)=>{l.current.set(N,M)},[]),f=K.useCallback(N=>{l.current.delete(N)},[]),m=K.useCallback((N,M)=>{if(!r)return;const{xScale:_,yScale:P}=r;let k=null,C=1/0;l.current.forEach((L,D)=>{L.forEach((F,I)=>{const $=_(F.x),ee=P(F.y),Y=$-N,H=ee-M,U=Math.sqrt(Y*Y+H*H);U<C&&(C=U,k={seriesId:D,index:I,x:F.x,y:F.y,clientX:$,clientY:ee})})}),k&&C<=t?s(k):s(null)},[r,t]),p=K.useCallback(()=>s(null),[]);K.useEffect(()=>{if(!a){c([]);return}if(!r)return;const{xScale:N,yScale:M}=r,_=[];l.current.forEach((P,k)=>{P.forEach((C,L)=>{(a.x instanceof Date&&C.x instanceof Date?C.x.getTime()===a.x.getTime():C.x===a.x)&&_.push({seriesId:k,index:L,x:C.x,y:C.y,clientX:N(C.x),clientY:M(C.y)})})}),_.sort((P,k)=>P.seriesId.localeCompare(k.seriesId)),c(_)},[a,r]);const y=K.useCallback(N=>{if(!a)return;const M=l.current.get(a.seriesId);if(!M)return;let _=a.index+N;if(_<0||_>=M.length){if(!n)return;_=(_+M.length)%M.length}const P=M[_];if(!r)return;const{xScale:k,yScale:C}=r;s({seriesId:a.seriesId,index:_,x:P.x,y:P.y,clientX:k(P.x),clientY:C(P.y)})},[a,r,n]),h=K.useCallback(N=>{let M=Array.from(l.current.keys());if(i&&(M=M.filter($=>!i.isHidden($))),M.length===0)return;if(!a){const $=M[0],ee=l.current.get($);if(!ee||!r)return;const{xScale:Y,yScale:H}=r,U=ee[0];s({seriesId:$,index:0,x:U.x,y:U.y,clientX:Y(U.x),clientY:H(U.y)});return}const _=M.indexOf(a.seriesId);if(_===-1)return;let P=_+N;if(P<0||P>=M.length){if(!n)return;P=(P+M.length)%M.length}const k=M[P],C=l.current.get(k);if(!C||!r)return;const L=Math.min(a.index,C.length-1),D=C[L],{xScale:F,yScale:I}=r;s({seriesId:k,index:L,x:D.x,y:D.y,clientX:F(D.x),clientY:I(D.y)})},[a,r,n,i]),g=K.useCallback(()=>{let N=Array.from(l.current.keys());if(i&&(N=N.filter(L=>!i.isHidden(L))),N.length===0)return;const M=a?a.seriesId:N[0],_=l.current.get(M);if(!_||_.length===0||!r)return;const P=_[0],{xScale:k,yScale:C}=r;s({seriesId:M,index:0,x:P.x,y:P.y,clientX:k(P.x),clientY:C(P.y)})},[a,r,i]),b=K.useCallback(()=>{let N=Array.from(l.current.keys());if(i&&(N=N.filter(D=>!i.isHidden(D))),N.length===0)return;const M=a?a.seriesId:N[0],_=l.current.get(M);if(!_||_.length===0||!r)return;const P=_.length-1,k=_[P],{xScale:C,yScale:L}=r;s({seriesId:M,index:P,x:k.x,y:k.y,clientX:C(k.x),clientY:L(k.y)})},[a,r,i]),w=K.useCallback(()=>y(1),[y]),T=K.useCallback(()=>y(-1),[y]),S=K.useCallback(()=>h(1),[h]),v=K.useCallback(()=>h(-1),[h]),j=K.useMemo(()=>({focused:a,setFocused:s,aggregated:u,focusNearest:m,clear:p,registerSeries:d,unregisterSeries:f,focusNextPoint:w,focusPrevPoint:T,focusNextSeries:S,focusPrevSeries:v,focusFirstPoint:g,focusLastPoint:b}),[a,u,m,p,d,f,w,T,S,v,g,b]);return o.jsx(Df.Provider,{value:j,children:e})},Pf=({series:e,seriesIndex:t,palette:n,showPoints:r,focusablePoints:i,focusIndex:a,parseX:s,visibilityMode:l="remove",strokeWidth:u=1,smooth:c=!0,gradientFillId:d,colors:f})=>{const m=Cr();if(!m)return null;const{xScale:p,yScale:y}=m,g=Ui()?.isHidden(e.id)??!1,b=g&&l==="fade";if(g&&l==="remove")return null;const w=Wn();K.useEffect(()=>{if(!w)return;const M=e.data.map(_=>({x:s(_),y:_.y}));return w.registerSeries(e.id,M),()=>w.unregisterSeries(e.id)},[w,e.id,e.data,s]);const T=K.useMemo(()=>ol(e.data,M=>p(s(M)),M=>y(M.y),{smooth:c}),[e.data,p,y,s,c]),S=K.useMemo(()=>{if(!e.data.length)return"";const[M]=y.domain(),_=al().x(P=>p(s(P))).y0(()=>y(M)).y1(P=>y(P.y));return c&&_.curve(ps),_(e.data)||""},[e.data,p,y,s,c]),v=f&&f[t],j=e.color||v||(n==="region"?ei(e.id,t):xn(t)),N=n==="region"?ys(e.id,t):kr(t);return o.jsxs("g",{className:"fdp-line-series","data-series":e.id,opacity:b?.25:1,"aria-hidden":b?!0:void 0,children:[d&&o.jsx("path",{d:S,fill:`url(#${d})`,stroke:"none",role:"presentation",className:"fdp-line-series__gradient"}),o.jsx("path",{d:T,fill:"none",stroke:j,strokeWidth:u,role:"presentation"}),r&&e.data.map((M,_)=>{const P=p(s(M)),k=y(M.y),C=i?0:-1,L=!b&&(i&&_===a||w?.focused?.seriesId===e.id&&w.focused.index===_),D=()=>{w&&!b&&w.setFocused({seriesId:e.id,index:_,x:s(M),y:M.y,clientX:P,clientY:k})},F=()=>{w&&w.focused?.seriesId===e.id&&w.focused.index===_&&w.clear()};return o.jsx("circle",{cx:P,cy:k,r:L?5:3.5,stroke:L?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":N,strokeWidth:L?2:1,fill:L?"var(--nhs-fdp-color-grey-3, #aeb7bd)":j,className:"fdp-line-point",tabIndex:b?-1:C,"aria-label":`${e.label||e.id} ${s(M).toDateString()} value ${M.y}`,"data-series":e.id,"data-index":_,onMouseEnter:D,onFocus:D,onMouseLeave:F,onBlur:F},_)})]})},u1=({polite:e=!0,format:t})=>{const n=Wn(),[r,i]=K.useState(""),a=K.useRef("");return K.useEffect(()=>{if(!n?.focused)return;const{focused:s,aggregated:l}=n;let u;if(l&&l.length>1){const c=l.map(f=>`${f.seriesId} ${f.y}`).join("; ");u=`${s.x instanceof Date?s.x.toDateString():String(s.x)} â€“ ${c}`}else u=t?t({seriesId:s.seriesId,x:s.x,y:s.y,index:s.index}):d1(s.seriesId,s.x,s.y,s.index);if(u!==a.current){a.current=u,i("");const c=setTimeout(()=>i(u),10);return()=>clearTimeout(c)}},[n?.focused,t]),o.jsx("div",{"aria-live":e?"polite":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,margin:-1,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",border:0},children:r})};function d1(e,t,n,r){const i=t instanceof Date?t.toDateString():String(t);return`Series ${e}, point ${r+1}, ${i}, value ${n}`}const f1=()=>{const e=Wn(),t=rr();if(!e||!t||!e.focused)return null;const{focused:n,aggregated:r}=e,{innerWidth:i,innerHeight:a}=t,s=Math.min(Math.max(n.clientX,0),i),l=Math.min(Math.max(n.clientY,0),a),u=s+8,c=l-8,d=r.length>1,f=n.x instanceof Date?n.x.toDateString():String(n.x),m=d?f:`${f} â€¢ ${n.y}`,p=/\d+$/.exec(n.seriesId||""),y=p?parseInt(p[0],10)-1:0,h=xn(y>=0?y:0)||"#005eb8",g="var(--nhs-fdp-color-primary-yellow,#ffeb3b)";return o.jsxs("g",{className:"fdp-tooltip-layer",pointerEvents:"none",children:[o.jsx("circle",{cx:s,cy:l,r:7,fill:"none",stroke:g,strokeWidth:3}),o.jsx("circle",{cx:s,cy:l,r:5,fill:"#000",stroke:g,strokeWidth:1.5}),o.jsx("circle",{cx:s,cy:l,r:2.5,fill:h,stroke:"#fff",strokeWidth:.5}),d?(()=>{const w=r.map(N=>`${N.seriesId}: ${N.y}`),T=[m,...w],S=T.reduce((N,M)=>Math.max(N,M.length),0),v=Math.max(90,S*6.2+16),j=16*T.length+8;return o.jsxs("g",{children:[o.jsx("rect",{x:u,y:c-j,rx:4,ry:4,width:v,height:j,fill:"#212b32",opacity:.92}),T.map((N,M)=>o.jsx("text",{x:u+8,y:c-j+6+16*(M+.7),fill:"#fff",fontSize:12,children:N},M))]})})():o.jsxs("g",{children:[o.jsx("rect",{x:u,y:c-24,rx:4,ry:4,width:Math.max(60,m.length*6.2),height:24,fill:"#212b32",opacity:.92}),o.jsx("text",{x:u+8,y:c-8,fill:"#fff",fontSize:12,children:m})]})]})},h1=({items:e,palette:t="categorical",direction:n="row",interactive:r=!1,adjustStrokeForWhiteBackground:i=!0,hiddenIds:a,defaultHiddenIds:s=[],onVisibilityChange:l,formatAnnouncement:u})=>{const c=Ui(),d=!!(c&&!r&&!l&&a===void 0),f=r||d,m=e||[],p=a!==void 0,[y,h]=K.useState(new Set(s)),g=p?new Set(a):y,[b,w]=K.useState(""),T=S=>{if(d&&c){const C=c.isHidden(S);c.toggle(S);const D=m.find(I=>I.id===S)?.label||S,F=u?u(S,C,D):`${D} ${C?"shown":"hidden"}`;w(F);return}if(!f)return;const v=new Set(g),j=v.has(S);j?v.delete(S):v.add(S),p||h(v);const N=m.filter(C=>!v.has(C.id)).map(C=>C.id),M=Array.from(v);l?.(N,M);const P=m.find(C=>C.id===S)?.label||S,k=u?u(S,j,P):`${P} ${j?"shown":"hidden"}`;w(k)};return o.jsxs("div",{className:"fdp-legend-wrapper",children:[o.jsx("ul",{className:`fdp-legend fdp-legend--${n}`,children:m.map((S,v)=>{const j=S.palette||t,N=S.color||(j==="region"?ei(S.id,v):j==="severity"?Kx(S.id,v):j==="org-level"?t1(S.id,v):xn(v));let M=S.stroke||(j==="region"?ys(S.id,v):j==="severity"?Zx(S.id,v):j==="org-level"?r1(S.id,v):kr(v));if(i&&M){const k=M.trim().toLowerCase();(k==="#fff"||k==="#ffffff"||k==="white"||/^rgb\(\s*255\s*,\s*255\s*,\s*255\s*\)$/.test(k))&&(M="#212b32")}const _=d&&c?c.isHidden(S.id):g.has(S.id),P=f?{"aria-pressed":!_,"aria-label":`${S.label} (${_?"show":"hide"})`,onClick:()=>T(S.id)}:{"aria-label":S.label};return o.jsxs("li",{className:`fdp-legend__item${_?" fdp-legend__item--hidden":""}`,children:[o.jsx("button",{type:"button",className:"fdp-legend__swatch",style:{backgroundColor:N,backgroundImage:S.patternDataUrl?`url(${S.patternDataUrl})`:void 0,backgroundSize:S.patternDataUrl?"auto":void 0,borderColor:M},...P}),o.jsx("span",{className:"fdp-legend__label",children:S.label})]},S.id)})}),f&&o.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite","aria-atomic":"true",children:b})]})},m1=({series:e,seriesIndex:t,palette:n,parseX:r,areaOnly:i=!1,visibilityMode:a="remove",baselineY:s=0,smooth:l=!0,stacked:u,gradientFill:c=!0,colors:d})=>{const f=Cr();if(!f)return null;const{xScale:m,yScale:p}=f,h=Ui()?.isHidden(e.id)??!1,g=h&&a==="fade";if(h&&a==="remove")return null;const b=Wn();K.useEffect(()=>{if(!b)return;const N=e.data.map(M=>({x:r(M),y:M.y}));return b.registerSeries(e.id,N),()=>b.unregisterSeries(e.id)},[b,e.id,e.data,r]);const w=d&&d[t],T=e.color||w||(n==="region"?ei(e.id,t):xn(t)),S=K.useMemo(()=>u&&u.length===e.data.length?ol(e.data,N=>m(r(N)),N=>{const M=e.data.indexOf(N);return p(u[M].y1)},{smooth:l}):ol(e.data,N=>m(r(N)),N=>p(N.y),{smooth:l}),[e.data,u,m,p,r,l]),v=K.useMemo(()=>{if(u&&u.length===e.data.length){const k=al().x(C=>m(r(C))).y0((C,L)=>p(u[L].y0)).y1((C,L)=>p(u[L].y1));return l&&k.curve(ps),k(e.data)||""}const[N,M]=p.domain();let _=s;_<N?_=N:_>M&&(_=M);const P=al().x(k=>m(r(k))).y0(()=>p(_)).y1(k=>p(k.y));return l&&P.curve(ps),P(e.data)||""},[e.data,u,m,p,r,s,l]),j=K.useId();return o.jsxs("g",{className:"fdp-area-series","data-series":e.id,opacity:g?.25:1,"aria-hidden":g?!0:void 0,children:[c&&o.jsx("defs",{children:o.jsxs("linearGradient",{id:j,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:T,stopOpacity:.25}),o.jsx("stop",{offset:"100%",stopColor:T,stopOpacity:0})]})}),o.jsx("path",{className:"fdp-area-series__fill",d:v,fill:c?`url(#${j})`:T,...c?{}:{fillOpacity:.25},stroke:"none"}),!i&&o.jsx("path",{d:S,fill:"none",stroke:T,strokeWidth:1})]})},p1=({series:e,seriesIndex:t,seriesCount:n,palette:r,parseX:i,focusable:a=!0,widthFactor:s=.8,groupGap:l=2,barWidth:u,adaptive:c=!1,adaptiveGroupOccupancy:d=.9,visibilityMode:f="remove",colorMode:m="series",allSeries:p,stacked:y,gapRatio:h=.15,minBarWidth:g,gradientFill:b=!0,gradientStrokeMatch:w=!0,opacity:T=1,fadedOpacity:S=.25,flatFillOpacity:v=1,colors:j})=>{const N=Math.max(0,h),M=Cr(),_=rr();if(!M||!_)return null;const{xScale:P,yScale:k}=M,L=Ui()?.isHidden(e.id)??!1,D=L&&f==="fade";if(L&&f==="remove")return null;const F=Wn();K.useEffect(()=>{if(!F)return;const Q=e.data.map(ae=>({x:i(ae),y:ae.y}));return F.registerSeries(e.id,Q),()=>F.unregisterSeries(e.id)},[F,e.id,e.data,i]);const I=typeof P.bandwidth=="function",$=I?P.bandwidth():void 0,ee=K.useMemo(()=>{if($!=null)return $;const Q=p&&p.length?p:[e],ae=[];Q.forEach(ce=>{ce.data.forEach(B=>{const R=P(i(B));Number.isFinite(R)&&ae.push(R)})});const he=ae.sort((ce,B)=>ce-B);if(he.length<=1)return 40;const q=[];for(let ce=1;ce<he.length;ce++)q.push(he[ce]-he[ce-1]);return q.sort((ce,B)=>ce-B),(q[Math.floor(q.length/2)]||40)*s},[e.data,p,P,i,s,$]),{basePerBar:Y}=K.useMemo(()=>{if(I){const he=ee,q=Math.max(1,(he-l*(n-1))/n),me=e.barWidth??u;let ce=me?Math.min(me,he):q;if(c){const B=he*Math.min(1,Math.max(.05,d)),R=Math.max(1,(B-l*(n-1))/n);ce=me?Math.min(ce,R):R}return{basePerBar:ce}}const Q=e.barWidth??u,ae=Math.max(1,(ee-l*(n-1))/n);if(c){const he=p&&p.length?p:[e],q=[];he.forEach(pe=>pe.data.forEach(ue=>{const oe=P(i(ue));Number.isFinite(oe)&&q.push(oe)})),q.sort((pe,ue)=>pe-ue);const me=[];for(let pe=1;pe<q.length;pe++)me.push(q[pe]-q[pe-1]);me.sort((pe,ue)=>pe-ue);const B=(me[Math.floor(me.length/2)]||ee)*Math.min(1,Math.max(.05,d)),R=Math.max(1,(B-l*(n-1))/n);return{basePerBar:Q?Math.min(Q,R):R}}return Q?{basePerBar:Math.min(Q,ae)}:{basePerBar:ae}},[I,ee,l,n,u,e.barWidth,c,d,p,P,i]),H=K.useMemo(()=>{if(I)return[];const Q=[];return(p&&p.length?p:[e]).forEach(he=>he.data.forEach(q=>{const me=P(i(q));Number.isFinite(me)&&Q.push(me)})),Q.sort((he,q)=>he-q),Array.from(new Set(Q))},[I,p,e,P,i]),U=K.useMemo(()=>{if(I)return[];if(!H.length)return[];if(H.length===1)return[{center:H[0],left:0,right:_.innerWidth}];const Q=[];for(let ae=0;ae<H.length;ae++){const he=H[ae],q=ae===0?0:(H[ae-1]+he)/2,me=ae===H.length-1?_.innerWidth:(he+H[ae+1])/2;Q.push({center:he,left:Math.max(0,q),right:Math.min(_.innerWidth,me)})}return Q},[I,H,_.innerWidth]),z=K.useMemo(()=>{if(I||!U.length)return;const Q=Math.min(1,Math.max(.05,s)),ae=U.map(B=>Math.max(2,B.right-B.left)),he=ae.map(B=>Math.max(2,Math.min(B-1,B*Q)));let q=Math.min(...he);if(g)if(n<=1){const B=Math.min(...ae.map(R=>R-1));B>=g&&q<g&&(q=Math.min(B,g))}else{const B=Math.min(...ae.map(ne=>ne-1)),R=g*n+(n-1)*(g*N);R<=B&&q<R&&(q=R)}if(n<=1)return g&&q<g&&ae.every(R=>R>=g)?{groupWidth:g,barWidth:g}:{groupWidth:q,barWidth:q};let me=q/(n+(n-1)*N);return me<1&&(me=1),g&&me<g&&g*n+(n-1)*(g*N)<=q&&(me=g),{groupWidth:me*n+(n-1)*(me*N),barWidth:me}},[I,U,s,n,N,g]),ie=j&&j[t]?j[t]:void 0,W=e.color||ie||(r==="region"?ei(e.id,t):xn(t)),le=r==="region"?ys(e.id,t):kr(t),je=w&&(e.color||ie)?W:le,de=Number.isFinite(k(0))?k(0):k.range()[0],fe=K.useId();return y&&y.length===e.data.length?o.jsxs("g",{className:"fdp-bar-series fdp-bar-series--stacked","data-series":e.id,opacity:D?S:T,"aria-hidden":D?!0:void 0,children:[b&&o.jsx("defs",{children:o.jsxs("linearGradient",{id:fe,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:W,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:W,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:W,stopOpacity:.06})]})}),e.data.map((Q,ae)=>{const he=i(Q),q=P(I?Q.x:he);let me,ce;if(I)me=ee,ce=q;else{const G=U.find(J=>Math.abs(J.center-q)<.5);if(!G||!z)me=Y,ce=q-Y/2;else{const{groupWidth:J}=z;me=J;let A=q-J/2;A<G.left&&(A=G.left),A+J>G.right&&(A=Math.max(G.left,G.right-J)),ce=A}}const B=y[ae],R=k(B.y0),ne=k(B.y1),pe=Math.min(R,ne),ue=Math.abs(ne-R)||1;if(!I&&g&&me<g){const G=U.find(J=>Math.abs(J.center-q)<.5);if(G){const J=Math.max(2,G.right-G.left-1),A=Math.min(J,g);A>me&&(me=A,ce=Math.max(G.left,Math.min(G.right-me,q-me/2)))}}const oe=!D&&F?.focused?.seriesId===e.id&&F.focused.index===ae,O=()=>{!F||D||F.setFocused({seriesId:e.id,index:ae,x:he,y:B.y1-B.y0,clientX:ce+me/2,clientY:pe})},V=()=>{F?.focused?.seriesId===e.id&&F.focused.index===ae&&F.clear()};return o.jsx("rect",{x:ce,y:pe,width:me,height:ue,fill:b?`url(#${fe})`:W,...b?{}:{fillOpacity:v},stroke:oe?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":b&&w?W:void 0,strokeWidth:oe?2:1,className:"fdp-bar fdp-bar--stacked",tabIndex:D||!a?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${he instanceof Date?he.toDateString():he} value ${B.y1-B.y0}`,onMouseEnter:O,onFocus:O,onMouseLeave:V,onBlur:V},ae)})]}):o.jsxs("g",{className:"fdp-bar-series","data-series":e.id,opacity:D?S:T,"aria-hidden":D?!0:void 0,children:[b&&o.jsxs("defs",{children:[m==="series"&&o.jsxs("linearGradient",{id:fe,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:W,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:W,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:W,stopOpacity:.06})]}),m==="category"&&e.data.map((Q,ae)=>{const q=j&&j[ae]||(r==="region"?ei(String(Q.x),ae):xn(ae)),me=`${fe}-${ae}`;return o.jsxs("linearGradient",{id:me,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:q,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:q,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:q,stopOpacity:.06})]},me)})]}),e.data.map((Q,ae)=>{const he=i(Q),q=P(I?Q.x:he);let me,ce;if(I){const te=ee;if(n<=1)ce=te,me=q;else{ce=Math.max(1,te/(n+(n-1)*N));const re=ce*N,Z=ce*n+re*(n-1);me=q+(te-Z)/2+t*(ce+re)}}else{const te=U.find(re=>re.center===q);if(!te||!z)ce=Y,me=q-Y/2,g&&ce<g&&(ce=g,me=q-ce/2);else{const{barWidth:re}=z;ce=re;const Z=n>1?re*N:0,se=ce*n+Z*(n-1);let be=q-se/2;be<te.left&&(be=te.left),be+se>te.right&&(be=Math.max(te.left,te.right-se)),me=be+t*(ce+Z)}if(g&&ce<g){const re=U.find(Z=>Math.abs(Z.center-q)<.5);if(re){const Z=Math.max(2,re.right-re.left-1),se=Math.min(Z,g);if(se>ce)if(n<=1)ce=se,me=Math.max(re.left,Math.min(re.right-ce,q-ce/2));else{const be=se*N,_e=se*n+be*(n-1);if(_e<=re.right-re.left-1){ce=se;const Te=_e;let we=q-Te/2;we<re.left&&(we=re.left),we+Te>re.right&&(we=Math.max(re.left,re.right-Te)),me=we+t*(ce+be)}}}}}const B=me+ce/2,R=k(Q.y),ne=Math.min(de,R),pe=Math.abs(de-R),ue=!D&&F?.focused?.seriesId===e.id&&F.focused.index===ae,oe=()=>{!F||D||F.setFocused({seriesId:e.id,index:ae,x:he,y:Q.y,clientX:B,clientY:R})},O=()=>{F?.focused?.seriesId===e.id&&F.focused.index===ae&&F.clear()},V=m==="category"&&j?j[ae]:void 0,G=m==="category"?V||(r==="region"?ei(String(Q.x),ae):xn(ae)):W,J=m==="category"?`${fe}-${ae}`:fe,A=b&&w?G:m==="category"?r==="region"?ys(String(Q.x),ae):kr(ae):je,X=ue?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":A||G;return o.jsx("rect",{x:me,y:ne,width:ce,height:pe||1,fill:b?`url(#${J})`:G,...b?{}:{fillOpacity:v},stroke:X,strokeWidth:ue?2:1,className:"fdp-bar",tabIndex:D||!a?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${he instanceof Date?he.toDateString():he} value ${Q.y}`,onMouseEnter:oe,onFocus:oe,onMouseLeave:O,onBlur:O},ae)})]})},g1=({series:e,innerWidth:t,innerHeight:n,paddingInner:r=.1,paddingOuter:i=.05,children:a,yTickCount:s=5})=>{const l=rr(),u=t??l?.innerWidth??0,c=n??l?.innerHeight??0,d=K.useMemo(()=>e.flatMap(g=>g.data),[e]),f=K.useMemo(()=>{const g=new Set;return d.forEach(b=>g.add(b.x)),Array.from(g)},[d]),m=K.useMemo(()=>Math.max(0,...d.map(g=>g.y)),[d]),p=K.useMemo(()=>Eu().domain(f).range([0,u]).paddingInner(r).paddingOuter(i),[f,u,r,i]),y=K.useMemo(()=>rs().domain([0,m]).nice().range([c,0]),[m,c]),h=K.useMemo(()=>({xScale:p,yScale:y,getXTicks:()=>f,getYTicks:(g=s)=>y.ticks(g)}),[p,y,f,s]);return o.jsx(ll.Provider,{value:h,children:a})},b1=({title:e,description:t,source:n,table:r,className:i,id:a,message:s="Interactive chart loadingâ€¦",forceFallback:l=!1})=>{const u=K.useId(),c=a||u,d=t?`${c}-desc`:void 0,f=n?`${c}-src`:void 0,m=typeof window<"u"&&!l;return o.jsxs("figure",{id:c,className:hs("fdp-chart fdp-chart--noscript",i),"aria-labelledby":`${c}-title`,"aria-describedby":hs(d,f),"data-component":"ChartNoScript",children:[o.jsx("header",{className:"fdp-chart__header",children:o.jsx("h3",{id:`${c}-title`,className:"fdp-chart__title",children:e})}),t&&o.jsx("p",{id:d,className:"fdp-chart__description",children:t}),!m&&o.jsx("div",{className:"fdp-chart__loading",role:"status","aria-live":"polite",children:s}),o.jsxs("div",{className:"fdp-chart__fallback",role:"group","aria-label":e,children:[o.jsx("noscript",{children:o.jsx("div",{className:"fdp-chart__noscript-wrapper",children:o.jsx(_n,{...r})})}),o.jsx("div",{className:"fdp-chart__table","data-fallback-table":!0,children:o.jsx(_n,{...r})})]}),n&&o.jsx("figcaption",{className:"fdp-chart__caption",children:n&&o.jsxs("small",{id:f,className:"fdp-chart__source",children:["Source: ",n]})})]})},y1=({selector:e="figure.fdp-chart",onEnhanced:t,delay:n=0,children:r})=>{const i=K.useRef(null);return K.useEffect(()=>{const a=i.current;if(!a)return;const s=()=>{const l=Array.from(a.querySelectorAll(e));if(l.length===0)return;const u=[];l.forEach(c=>{c.classList.contains("fdp-chart--enhanced")||(c.classList.add("fdp-chart--enhanced"),u.push(c))}),u.length&&t&&t(u)};if(n>0){if(typeof window>"u")return;const l=window.setTimeout(s,n);return()=>window.clearTimeout(l)}s()},[e,t,n]),o.jsx("div",{ref:i,children:r})},If=({label:e,value:t,unit:n,delta:r,status:i="neutral",variant:a="default",subtitle:s,metadata:l,trendData:u,loading:c=!1,error:d,valueFormatter:f,className:m,style:p,id:y,announceDelta:h=!0,visual:g})=>{const b=K.useId(),w=y||b,T=`${w}-label`,S=`${w}-value`,v=`${w}-delta`,j=typeof t=="number"&&!Number.isNaN(t),N=c?"â€”":d?"":j?f?f(t):t.toLocaleString():t;let M,_="",P="";if(r&&!c&&!d){M=r.direction||(r.value>0?"up":r.value<0?"down":"neutral");const k=Math.abs(r.value),C=M==="up"?`+${k}`:M==="down"?`-${k}`:"0",L=r.isPercent?"%":"";if(_=`${C}${L}`,r.ariaLabel)P=r.ariaLabel;else{const D=r.invert?M==="down":M==="up";P=`${M==="neutral"?"no change":M==="up"?"up":"down"} ${k}${L}${M==="neutral"?"":D?" (improvement)":" (worse)"}`}}return o.jsx("div",{className:hs("fdp-metric-card",a&&`fdp-metric-card--${a}`,i&&`fdp-metric-card--status-${i}`,c&&"fdp-metric-card--loading",d&&"fdp-metric-card--error",m),style:p,role:"group","aria-labelledby":T,"data-component":"MetricCard",children:o.jsxs("div",{className:"fdp-metric-card__inner",children:[o.jsxs("div",{className:"fdp-metric-card__header",children:[o.jsx("h3",{id:T,className:"fdp-metric-card__label",children:e}),l&&o.jsx("div",{className:"fdp-metric-card__metadata",children:l})]}),o.jsxs("div",{className:"fdp-metric-card__content",children:[o.jsxs("div",{className:"fdp-metric-card__value-section",children:[o.jsx("div",{id:S,className:"fdp-metric-card__value",children:c?o.jsx("div",{className:"fdp-metric-card__skeleton","aria-hidden":"true",children:o.jsx("div",{className:"fdp-metric-card__skeleton-line fdp-metric-card__skeleton-line--value"})}):d?o.jsx("div",{className:"fdp-metric-card__error",role:"alert",children:d}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"fdp-metric-card__number",children:N}),n&&o.jsx("span",{className:"fdp-metric-card__unit",children:n})]})}),s&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__subtitle",children:s})]}),r&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__delta-section",children:o.jsxs("div",{id:v,"aria-label":P,className:hs("fdp-metric-card__delta",M&&`fdp-metric-card__delta--${M}`),children:[o.jsx("span",{className:"fdp-metric-card__delta-value",children:_}),r.period&&o.jsx("span",{className:"fdp-metric-card__delta-period",children:r.period})]})}),u&&u.length>0&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__trend","aria-hidden":"true"})]}),g&&!d&&o.jsx("div",{className:"fdp-metric-card__visual","aria-hidden":"true",children:g}),h&&r&&!r.ariaLabel&&!c&&!d&&o.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite",children:P})]})})};let vl=null;try{vl=require("@fergusbisset/nhs-fdp-design-system/dist/js/tokens.json")?.color?.["data-viz"]?.spc||null}catch{}const Ke=(e,t)=>{if(!vl)return t;const n=e.split(".");let r=vl;for(const a of n){if(r==null)break;r=r[a]}const i=r;return i==null?t:typeof i=="string"||typeof i=="number"?String(i):i.$value!=null?String(i.$value):i.value!=null?String(i.value):t},vs=()=>({start:Ke("gradient.stop.start-opacity","0.12"),mid:Ke("gradient.stop.mid-opacity","0.03"),end:Ke("gradient.stop.end-opacity","0"),triStart:Ke("gradient.stop.triangle-start-opacity",Ke("gradient.stop.start-opacity","0.12")),triMid:Ke("gradient.stop.triangle-mid-opacity",Ke("gradient.stop.mid-opacity","0.03")),triEnd:Ke("gradient.stop.triangle-end-opacity",Ke("gradient.stop.end-opacity","0"))});var Dt=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(Dt||{}),Be=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(Be||{}),Pe=(e=>(e.Improvement="improvement",e.Concern="concern",e.Neither="neither",e.Suppressed="suppressed",e))(Pe||{}),Vn=(e=>(e.SinglePoint="single_point",e.TwoSigma="two_sigma",e.Shift="shift",e.Trend="trend",e))(Vn||{});const _l=["single_point","two_sigma","shift","trend"];_l.reduce((e,t,n)=>(e[t]=n+1,e),{});const v1={single_point:"Single point beyond process limit",two_sigma:"Two of three beyond 2Ïƒ on one side",shift:"Sustained shift (run)",trend:"Monotonic trend"},_1={single_point:"point",two_sigma:"cluster",shift:"sustained",trend:"sustained"},Ff=_l.reduce((e,t,n)=>(e[t]={id:t,rank:n+1,label:v1[t],category:_1[t],participatesInRanking:!0},e),{});_l.map(e=>Ff[e]);var Lt=(e=>(e.Up="up",e.Down="down",e))(Lt||{}),Mt=(e=>(e.SinglePointAbove="single_above",e.SinglePointBelow="single_below",e.TwoOfThreeAbove="two_of_three_above",e.TwoOfThreeBelow="two_of_three_below",e.FourOfFiveAbove="four_of_five_above",e.FourOfFiveBelow="four_of_five_below",e.ShiftHigh="shift_high",e.ShiftLow="shift_low",e.TrendIncreasing="trend_inc",e.TrendDecreasing="trend_dec",e.FifteenInnerThird="fifteen_inner_third",e))(Mt||{}),ut=(e=>(e.Pass="pass",e.Fail="fail",e.None="none",e))(ut||{}),nn=(e=>(e.Shift="shift",e.Trend="trend",e.Point="point",e))(nn||{}),_s=(e=>(e.Legacy="legacy",e.DirectionalFirst="directional_first",e))(_s||{}),$f=(e=>(e.None="none",e.SqlRankingV26a="sql_ranking_v2_6a",e))($f||{}),ti=(e=>(e.Upwards="Upwards",e.Downwards="Downwards",e.Same="Same",e))(ti||{}),Lf=(e=>(e.Sql="sql",e.Conflict="conflict",e))(Lf||{}),Wi=(e=>(e.ImprovementValueBeforePruning="improvementValueBeforePruning",e.ConcernValueBeforePruning="concernValueBeforePruning",e))(Wi||{});const ni={singlePointUp:{tooltip:"Single point above upper control limit",narration:"Single point beyond a control limit"},singlePointDown:{tooltip:"Single point below lower control limit",narration:"Single point beyond a control limit"},twoOfThreeUp:{tooltip:"Two of three points beyond +2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},twoOfThreeDown:{tooltip:"Two of three points beyond -2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},fourOfFiveUp:{tooltip:"Four of five points beyond +1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},fourOfFiveDown:{tooltip:"Four of five points beyond -1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},shiftUp:{tooltip:"Shift: run of points above centre line",narration:"Shift (run on one side of mean)"},shiftDown:{tooltip:"Shift: run of points below centre line",narration:"Shift (run on one side of mean)"},trendUp:{tooltip:"Trend: consecutive increasing points",narration:"Trend (consecutive increases)"},trendDown:{tooltip:"Trend: consecutive decreasing points",narration:"Trend (consecutive decreases)"}};function xs(e){if(!e)return[];const t=[];return e.specialCauseSinglePointUp&&t.push("singlePointUp"),e.specialCauseSinglePointDown&&t.push("singlePointDown"),e.specialCauseTwoOfThreeUp&&t.push("twoOfThreeUp"),e.specialCauseTwoOfThreeDown&&t.push("twoOfThreeDown"),e.specialCauseFourOfFiveUp&&t.push("fourOfFiveUp"),e.specialCauseFourOfFiveDown&&t.push("fourOfFiveDown"),e.specialCauseShiftUp&&t.push("shiftUp"),e.specialCauseShiftDown&&t.push("shiftDown"),e.specialCauseTrendUp&&t.push("trendUp"),e.specialCauseTrendDown&&t.push("trendDown"),t}function ws(e){switch(e){case Pe.Improvement:return"Improvement signal";case Pe.Concern:return"Concern signal";case Pe.Neither:return"Common cause variation";case Pe.Suppressed:return null;default:return null}}function Af(e){switch(e){case ut.Pass:return"Target met";case ut.Fail:return"Target not met";default:return null}}function x1(e,t,n){if(e==null||!Number.isFinite(t)||t<=0)return null;const r=Math.abs((n-e)/t);return r<1?"Within 1Ïƒ":r<2?"Between 1â€“2Ïƒ":r<3?"Between 2â€“3Ïƒ":"Beyond 3Ïƒ"}const pn={improvement:{token:"var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",hex:"#00B0F0"},concern:{token:"var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",hex:"#E46C0A"},neither:{token:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",hex:"#A6A6A6"},suppressed:{token:"var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",hex:"#490092"}};function Ef(e){return e?pn[e]?.token??pn.neither.token:pn.neither.token}function w1(e){return e?pn[e]?.hex??pn.neither.hex:pn.neither.hex}var Tr=(e=>(e.Pass="pass",e.Fail="fail",e.Uncertain="uncertain",e))(Tr||{});const S1={pass:"#00B0F0",fail:"#E46C0A",uncertain:"#A6A6A6"},C1={pass:"P",fail:"F",uncertain:"?"};var ot=(e=>(e.HigherIsBetter="higher_is_better",e.LowerIsBetter="lower_is_better",e.ContextDependent="context_dependent",e))(ot||{}),Fe=(e=>(e.Higher="higher",e.Lower="lower",e))(Fe||{}),Rt=(e=>(e.Improving="improving",e.Deteriorating="deteriorating",e.No_Judgement="no_judgement",e.None="none",e))(Rt||{}),Se=(e=>(e.SpecialCauseImproving="special_cause_improving",e.SpecialCauseDeteriorating="special_cause_deteriorating",e.CommonCause="common_cause",e.SpecialCauseNoJudgement="special_cause_no_judgement",e))(Se||{});const k1=e=>{const t=e.replace("#",""),n=parseInt(t.slice(0,2),16)/255,r=parseInt(t.slice(2,4),16)/255,i=parseInt(t.slice(4,6),16)/255,a=[n,r,i].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*a[0]+.7152*a[1]+.0722*a[2]<.55?"#ffffff":"#212b32"},Ss={special_cause_deteriorating:{hex:pn.concern.hex,judgement:"deteriorating",label:"Special Cause (Deteriorating)",description:"Deteriorating variation detected (special cause) relative to baseline."},special_cause_improving:{hex:pn.improvement.hex,judgement:"improving",label:"Special Cause (Improving)",description:"Improving variation detected (special cause) relative to baseline."},common_cause:{hex:pn.neither.hex,judgement:"none",label:"Common Cause",description:"Common cause variation only â€“ no special cause detected."},special_cause_no_judgement:{hex:pn.suppressed.hex,judgement:"no_judgement",label:"Special Cause (No Judgement)",description:"Special cause detected without assigning improving/deteriorating judgement."}};Object.values(Ss).forEach(e=>{e.text||(e.text=k1(e.hex))});const Bf=e=>Ss[e],xl=e=>Ss[e].judgement||"none",Of={special:{higher:[{cx:77.5,cy:158.5},{cx:114,cy:175},{cx:150.5,cy:158.5},{cx:188,cy:125},{cx:225,cy:137}],lower:[{cx:77.5,cy:139.5},{cx:114,cy:124.5},{cx:150.5,cy:139.5},{cx:188,cy:175.5},{cx:224.5,cy:162}]},common:[{cx:76.5,cy:149.5},{cx:113,cy:179.5},{cx:149.5,cy:117},{cx:187,cy:171},{cx:223.5,cy:158}]};function T1(e,t){let n;return e==="common_cause"?n=Of.common:n=Of.special[t==="lower"?"lower":"higher"],n.map(r=>({...r}))}var Ht=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(Ht||{}),Re=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(Re||{}),Oe=(e=>(e.ImprovementHigh="ImprovementHigh",e.ImprovementLow="ImprovementLow",e.ConcernHigh="ConcernHigh",e.ConcernLow="ConcernLow",e.NeitherHigh="NeitherHigh",e.NeitherLow="NeitherLow",e.CommonCause="CommonCause",e))(Oe||{}),nt=(e=>(e.SinglePoint="SinglePoint",e.TwoSigma="TwoSigma",e.Shift="Shift",e.Trend="Trend",e))(nt||{}),Nr=(e=>(e.Upwards="Upwards",e.Downwards="Downwards",e.Same="Same",e))(Nr||{}),wn=(e=>(e.Up="Up",e.Down="Down",e))(wn||{}),ri=(e=>(e.Improvement="Improvement",e.Concern="Concern",e))(ri||{}),ii=(e=>(e.SqlPrimeThenRule="SqlPrimeThenRule",e.PreferImprovement="PreferImprovement",e.RuleHierarchy="RuleHierarchy",e))(ii||{}),Tt=(e=>(e.FavourableSide="FavourableSide",e.CrossingAfterFavourable="CrossingAfterFavourable",e.ExtremeFavourable="ExtremeFavourable",e.FirstFavourable="FirstFavourable",e.LongestFavourable="LongestFavourable",e.LastFavourable="LastFavourable",e.UnfavourableSide="UnfavourableSide",e.CrossingAfterUnfavourable="CrossingAfterUnfavourable",e.ExtremeUnfavourable="ExtremeUnfavourable",e.FirstUnfavourable="FirstUnfavourable",e.LongestUnfavourable="LongestUnfavourable",e.LastUnfavourable="LastUnfavourable",e))(Tt||{}),Gn=(e=>(e.Off="Off",e.AutoWhenConflict="AutoWhenConflict",e.Always="Always",e))(Gn||{});const ir={[nt.SinglePoint]:1,[nt.TwoSigma]:2,[nt.Shift]:3,[nt.Trend]:4},Rf=3.267,N1=2.66,Hf=.2777;function Ie(e){return typeof e=="number"&&!Number.isNaN(e)}function ai(e){return e.reduce((t,n)=>t+n,0)/(e.length||1)}function zf(e,t){const n=new Array(e.length).fill(null);let r=null;for(let i=0;i<e.length;i++){const a=e[i];if(!(t[i]||!Ie(a))){if(r!==null){const s=e[r];Ie(s)&&(n[i]=Math.abs(a-s))}r=i}}return n}function Uf(e,t){const n=e.filter(Ie);if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=n.slice();if(t){const a=ai(r),s=Rf*a;r=r.filter(l=>l<=s)}const i=ai(r);return{mrMean:i,mrUcl:Rf*i}}function Wf(e,t){if(!Ie(e)||!Ie(t))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=N1*t,r=2/3*n,i=1/3*n;return{upperProcessLimit:e+n,lowerProcessLimit:e-n,upperTwoSigma:e+r,lowerTwoSigma:e-r,upperOneSigma:e+i,lowerOneSigma:e-i}}function j1(e,t,n,r){if(e===Ht.T){const f=t.map(M=>Ie(M)&&M>0?Math.pow(M,Hf):null),m=zf(f,n),p=Uf(m,r),y=f.filter((M,_)=>!n[_]&&Ie(M)),h=y.length?ai(y):NaN,g=Wf(h,p.mrMean),b=M=>Ie(M)&&M>0?Math.pow(M,1/Hf):null,w=Ie(g.upperProcessLimit)?b(g.upperProcessLimit):null,T=Ie(g.lowerProcessLimit)&&g.lowerProcessLimit>0?b(g.lowerProcessLimit):null,S=Ie(g.upperTwoSigma)?b(g.upperTwoSigma):null,v=Ie(g.lowerTwoSigma)&&g.lowerTwoSigma>0?b(g.lowerTwoSigma):null,j=Ie(g.upperOneSigma)?b(g.upperOneSigma):null,N=Ie(g.lowerOneSigma)&&g.lowerOneSigma>0?b(g.lowerOneSigma):null;return{mean:Ie(h)&&h>0?b(h):null,mr:m,mrMean:p.mrMean,mrUcl:p.mrUcl,upperProcessLimit:w,lowerProcessLimit:T,upperTwoSigma:S,lowerTwoSigma:v,upperOneSigma:j,lowerOneSigma:N}}if(e===Ht.G){const f=t.filter((k,C)=>!n[C]&&Ie(k)),m=f.length?ai(f):NaN,p=Ie(m)?1/(m+1):NaN,y=k=>{if(!Ie(p)||p<=0||p>=1)return NaN;const C=Math.ceil(Math.log(1-k)/Math.log(1-p))-1;return Math.max(0,C)},h=.00135,g=1-.00135,b=.02275,w=1-.02275,T=.158655,S=1-.158655,v=y(g),j=y(h),N=y(w),M=y(b),_=y(S),P=y(T);return{mean:Ie(m)?m:null,mr:new Array(t.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:Ie(v)?v:null,lowerProcessLimit:Ie(j)?j:null,upperTwoSigma:Ie(N)?N:null,lowerTwoSigma:Ie(M)?M:null,upperOneSigma:Ie(_)?_:null,lowerOneSigma:Ie(P)?P:null}}if(e!==Ht.XmR)return{mean:NaN,mr:new Array(t.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const i=zf(t,n),a=i.filter(Ie),s=a.length?ai(a):NaN,l=Ie(s)?3.267*s:NaN;let u=NaN;{const f=t.reduce((m,p,y)=>{if(n[y]||!Ie(p))return m;if(!r)return m.push(p),m;const h=i[y];return(h===null||!Ie(l)||Ie(h)&&h<=l)&&m.push(p),m},[]);u=f.length?ai(f):NaN}const c=Uf(i,r),d=Wf(u,c.mrMean);return{mean:u,mr:i,mrMean:c.mrMean,mrUcl:c.mrUcl,...d}}function D1(e,t){const n=e.map((u,c)=>c).filter(u=>!e[u].ghost&&Ie(e[u].value)),r=u=>e[u],i=t.shiftPoints,a=t.trendPoints;let s=[],l=[];for(const u of n){const c=r(u);if(!Ie(c.mean)||!Ie(c.value)?(s=[],l=[]):c.value>c.mean?(s.push(u),l=[]):c.value<c.mean?(l.push(u),s=[]):(s=[],l=[]),s.length>=i)for(const d of s)r(d).shiftUp=!0;if(l.length>=i)for(const d of l)r(d).shiftDown=!0}for(let u=0;u<=n.length-3;u++){const d=n.slice(u,u+3).map(r);if(!d.every(S=>Ie(S.value)&&Ie(S.mean)))continue;const f=d[0].mean,m=d.every(S=>S.value>f),p=d.every(S=>S.value<f);if(!m&&!p)continue;const y=d[0].upperTwoSigma??1/0,h=d[0].lowerTwoSigma??-1/0,g=d[0].upperProcessLimit??1/0,b=d[0].lowerProcessLimit??-1/0,w=d.filter(S=>t.twoSigmaIncludeAboveThree?S.value>y:S.value>y&&S.value<=g),T=d.filter(S=>t.twoSigmaIncludeAboveThree?S.value<h:S.value<h&&S.value>=b);m&&w.length>=2&&w.forEach(S=>S.twoSigmaUp=!0),p&&T.length>=2&&T.forEach(S=>S.twoSigmaDown=!0)}if(t.enableFourOfFiveRule)for(let u=0;u<=n.length-5;u++){const d=n.slice(u,u+5).map(r);if(!d.every(w=>Ie(w.value)&&Ie(w.mean)))continue;const f=d[0].mean,m=d.every(w=>w.value>f),p=d.every(w=>w.value<f);if(!m&&!p)continue;const y=d[0].upperOneSigma??1/0,h=d[0].lowerOneSigma??-1/0,g=d.filter(w=>w.value>y),b=d.filter(w=>w.value<h);m&&g.length>=4&&g.forEach(w=>w.fourOfFiveUp=!0),p&&b.length>=4&&b.forEach(w=>w.fourOfFiveDown=!0)}for(let u=0;u<=n.length-a;u++){const c=n.slice(u,u+a),d=c.map(r);if(!d.every(p=>Ie(p.value)))continue;let f=!0,m=!0;for(let p=1;p<d.length&&(d[p].value>d[p-1].value||(f=!1),d[p].value<d[p-1].value||(m=!1),!(!f&&!m));p++);f&&c.forEach(p=>r(p).trendUp=!0),m&&c.forEach(p=>r(p).trendDown=!0)}}function Vf(e){const t=[],n=[];e.singlePointUp&&t.push({id:nt.SinglePoint,rank:ir[nt.SinglePoint]}),e.singlePointDown&&n.push({id:nt.SinglePoint,rank:ir[nt.SinglePoint]}),e.twoSigmaUp&&t.push({id:nt.TwoSigma,rank:ir[nt.TwoSigma]}),e.twoSigmaDown&&n.push({id:nt.TwoSigma,rank:ir[nt.TwoSigma]}),e.shiftUp&&t.push({id:nt.Shift,rank:ir[nt.Shift]}),e.shiftDown&&n.push({id:nt.Shift,rank:ir[nt.Shift]}),e.trendUp&&t.push({id:nt.Trend,rank:ir[nt.Trend]}),e.trendDown&&n.push({id:nt.Trend,rank:ir[nt.Trend]});const r=t.reduce((s,l)=>Math.max(s,l.rank),0),i=n.reduce((s,l)=>Math.max(s,l.rank),0),a=r>i?Nr.Upwards:i>r?Nr.Downwards:Nr.Same;return{up:t,dn:n,upMax:r,dnMax:i,primeDirection:a}}function Gf(e,t){const n=t===Re.Up?e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp:t===Re.Down?e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown:!1,r=t===Re.Up?e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown:t===Re.Down?e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp:!1;return{aligned:n,opposite:r}}function Yf(e,t,n,r=!1,i,a,s=!1){const{up:l,dn:u,upMax:c,dnMax:d,primeDirection:f}=Vf(e);e.primeDirection=f;const m=e.specialCauseImprovementValue,p=e.specialCauseConcernValue;e.specialCauseImprovementValue!==null&&e.specialCauseConcernValue!==null&&M1({row:e,metric:t,metricConflictRule:n,preferImprovementWhenConflict:r,preferTrendWhenConflict:s,primeDirection:f,conflictStrategy:i,ruleHierarchy:a}),t===Re.Up?e.variationIcon=e.specialCauseImprovementValue!==null?Oe.ImprovementHigh:e.specialCauseConcernValue!==null?Oe.ConcernLow:Oe.CommonCause:t===Re.Down?e.variationIcon=e.specialCauseImprovementValue!==null?Oe.ImprovementLow:e.specialCauseConcernValue!==null?Oe.ConcernHigh:Oe.CommonCause:e.variationIcon=Oe.CommonCause;const y=e.specialCauseImprovementValue!==null?wn.Up:e.specialCauseConcernValue!==null?wn.Down:void 0,h=y===wn.Up?c:y===wn.Down?d:Math.max(c,d);e.primeRank=h||void 0;const g=y===wn.Up?l.find(b=>b.rank===h):y===wn.Down?u.find(b=>b.rank===h):void 0;return e.primeRuleId=g?.id,{originalImprovement:m,originalConcern:p}}function M1(e){const{row:t,metric:n,metricConflictRule:r,preferImprovementWhenConflict:i,preferTrendWhenConflict:a,primeDirection:s=t.primeDirection??Nr.Same,conflictStrategy:l,ruleHierarchy:u}=e;if(a&&t.specialCauseImprovementValue!==null&&t.specialCauseConcernValue!==null){const d=!!t.trendUp,f=!!t.trendDown;if(n===Re.Up){if(d&&!f){t.specialCauseConcernValue=null;return}if(!d&&f){t.specialCauseImprovementValue=null;return}}else if(n===Re.Down){if(f&&!d){t.specialCauseConcernValue=null;return}if(!f&&d){t.specialCauseImprovementValue=null;return}}}const c=i?ii.PreferImprovement:l??ii.SqlPrimeThenRule;if(c===ii.PreferImprovement){n===Re.Up?t.specialCauseConcernValue=null:n===Re.Down&&(t.specialCauseImprovementValue=null);return}if(c===ii.RuleHierarchy){const d=u??[nt.Trend,nt.Shift,nt.TwoSigma,nt.SinglePoint],{up:f,dn:m}=Vf(t);for(const p of d){const y=f.some(g=>g.id===p),h=m.some(g=>g.id===p);if(y&&!h){n===Re.Up?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null;return}if(h&&!y){n===Re.Up?t.specialCauseImprovementValue=null:t.specialCauseConcernValue=null;return}if(y&&h){(n===Re.Up||n===Re.Down)&&(r===ri.Improvement?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null);return}}}s===Nr.Upwards?n===Re.Up?t.specialCauseConcernValue=null:n===Re.Down&&(t.specialCauseImprovementValue=null):s===Nr.Downwards?n===Re.Up?t.specialCauseImprovementValue=null:n===Re.Down&&(t.specialCauseConcernValue=null):r===ri.Improvement?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null}var wl=(e=>(e.Up="Up",e.Down="Down",e))(wl||{});function P1(e){return e>0?1:e<0?-1:0}function I1(e){const t=P1(e);if(t>0)return"Above";if(t<0)return"Below"}function qf(e){const t=[],n=(s,l,u)=>({segStart:s,segSide:l,minV:u,maxV:u,maxAbsDelta:0}),r=(s,l,u,c,d)=>({minV:Math.min(u,s),maxV:Math.max(c,s),maxAbsDelta:Math.max(d,l)}),i=(s,l,u,c,d,f,m,p)=>{s.push({trendDirection:p,start:l,end:u,side:c,minValue:d,maxValue:f,maxAbsDeltaFromMean:m})};let a=0;for(;a<e.length;){const s=e[a];if(!s||s.value==null||s.ghost||!s.trendUp&&!s.trendDown){a++;continue}const l=s.trendUp?"Up":s.trendDown?"Down":void 0;let u=a,c=a;for(;c<e.length;c++){const b=e[c];if(!b||b.value==null||b.ghost||!(l==="Up"?b.trendUp:b.trendDown))break}const d=c-1,f=[];let m,p,y=1/0,h=-1/0,g=0;for(let b=u;b<=d;b++){const w=e[b];if(w.value==null)continue;const T=w.value-(w.mean??0),S=I1(T);if(!S){m!==void 0&&(i(f,m,b-1,p,y,h,g,l),m=void 0,p=void 0,y=1/0,h=-1/0,g=0);continue}if(m===void 0)({segStart:m,segSide:p,minV:y,maxV:h,maxAbsDelta:g}=(()=>{const v=n(b,S,w.value);return{segStart:v.segStart,segSide:v.segSide,minV:v.minV,maxV:v.maxV,maxAbsDelta:Math.abs(T)}})());else if(S!==p)i(f,m,b-1,p,y,h,g,l),{segStart:m,segSide:p,minV:y,maxV:h,maxAbsDelta:g}=(()=>{const v=n(b,S,w.value);return{segStart:v.segStart,segSide:v.segSide,minV:v.minV,maxV:v.maxV,maxAbsDelta:Math.abs(T)}})();else{const v=r(w.value,Math.abs(T),y,h,g);y=v.minV,h=v.maxV,g=v.maxAbsDelta}}m!==void 0&&i(f,m,d,p,y,h,g,l),t.push({trendDirection:l,start:u,end:d,segments:f}),a=d+1}return t}function F1(e){if(e===Re.Up)return"Above";if(e===Re.Down)return"Below"}function $1(e){if(e)return e==="Above"?"Below":"Above"}function Xf(e,t){const n=t.strategy??Tt.CrossingAfterFavourable,r=F1(t.metricImprovement),i=$1(r),a=[];for(const s of e){if(!r){if(n===Tt.ExtremeFavourable||n===Tt.CrossingAfterFavourable){const l=s.segments;if(l.length===0)continue;let u=l[0];for(const c of l)c.maxAbsDeltaFromMean>u.maxAbsDeltaFromMean&&(u=c);a.push(u)}continue}if(n===Tt.FavourableSide){a.push(...s.segments.filter(l=>l.side===r));continue}if(n===Tt.UnfavourableSide){a.push(...s.segments.filter(l=>l.side===i));continue}if(n===Tt.CrossingAfterFavourable){const l=s.segments;let u;for(let c=0;c<l.length;c++){const d=l[c];if(d.side===r&&c>0&&l[c-1].side!==r){u=d;break}}if(!u){const c=l.filter(d=>d.side===r);c.length>0&&(u=c.reduce((d,f)=>f.end-f.start>d.end-d.start?f:d,c[0]))}u&&a.push(u);continue}if(n===Tt.CrossingAfterUnfavourable){const l=s.segments;let u;for(let c=0;c<l.length;c++){const d=l[c];if(d.side===i&&c>0&&l[c-1].side!==i){u=d;break}}if(!u){const c=l.filter(d=>d.side===i);c.length>0&&(u=c.reduce((d,f)=>f.end-f.start>d.end-d.start?f:d,c[0]))}u&&a.push(u);continue}if(n===Tt.ExtremeFavourable){const l=s.segments.filter(c=>c.side===r);if(l.length===0)continue;const u=l.reduce((c,d)=>d.maxAbsDeltaFromMean>c.maxAbsDeltaFromMean?d:c);a.push(u);continue}if(n===Tt.ExtremeUnfavourable){const l=s.segments.filter(c=>c.side===i);if(l.length===0)continue;const u=l.reduce((c,d)=>d.maxAbsDeltaFromMean>c.maxAbsDeltaFromMean?d:c);a.push(u);continue}if(n===Tt.FirstFavourable){const l=s.segments.find(u=>u.side===r);l&&a.push(l);continue}if(n===Tt.FirstUnfavourable){const l=s.segments.find(u=>u.side===i);l&&a.push(l);continue}if(n===Tt.LongestFavourable){const l=s.segments.filter(c=>c.side===r);if(l.length===0)continue;const u=l.reduce((c,d)=>d.end-d.start>c.end-c.start?d:c);a.push(u);continue}if(n===Tt.LongestUnfavourable){const l=s.segments.filter(c=>c.side===i);if(l.length===0)continue;const u=l.reduce((c,d)=>d.end-d.start>c.end-c.start?d:c);a.push(u);continue}if(n===Tt.LastFavourable){const l=s.segments.filter(u=>u.side===r);if(l.length===0)continue;a.push(l[l.length-1]);continue}if(n===Tt.LastUnfavourable){const l=s.segments.filter(u=>u.side===i);if(l.length===0)continue;a.push(l[l.length-1]);continue}}return a}var Ct=(e=>(e.Common="Common",e.Improvement="Improvement",e.Concern="Concern",e.NoJudgement="NoJudgement",e))(Ct||{}),si=(e=>(e.Ungated="Ungated",e.Gated="Gated",e))(si||{});function L1(e){const t=!!(e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp),n=!!(e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown);return{upAny:t,downAny:n}}function Sl(e,t){const n=t.metricImprovement,r=t.trendVisualMode??"Ungated",i=t.enableNeutralNoJudgement??!0;return e.map(a=>{if(!a||a.value==null||a.ghost)return"Common";const{upAny:s,downAny:l}=L1(a);if(s&&l)return"Improvement";switch(a.variationIcon){case Oe.ImprovementHigh:case Oe.ImprovementLow:return"Improvement";case Oe.ConcernHigh:case Oe.ConcernLow:return"Concern";case Oe.NeitherHigh:case Oe.NeitherLow:{if(r==="Ungated"&&n!==Re.Neither){if(s&&!l)return n===Re.Up?"Improvement":"Concern";if(l&&!s)return n===Re.Down?"Improvement":"Concern"}return i?"NoJudgement":"Common"}default:return"Common"}})}function A1(e,t,n){const r=n?.mode??"Disabled";if(!e.length)return[];let i=Sl(e,{metricImprovement:t,trendVisualMode:si.Ungated,enableNeutralNoJudgement:!0});if(r!=="RecalcCrossing"||t===Re.Neither)return i;const a=Math.max(0,n?.preWindow??2),s=Math.max(0,n?.postWindow??3),l=n?.prePolarity??"Opposite",u=(f,m)=>{if(f<0||f>=i.length)return;const p=i[f];(p===Ct.Common||p===Ct.NoJudgement)&&(i[f]=m)},c=f=>{if(f==null)return null;const m=e.reduce((y,h)=>(h.partitionId===f&&typeof h.value=="number"&&!h.ghost&&y.push(h.value),y),[]);return m.length?m.reduce((y,h)=>y+h,0)/m.length:null},d=Array.isArray(n?.boundaryIndices)&&n.boundaryIndices.length?n.boundaryIndices.slice().filter(f=>Number.isFinite(f)):e.reduce((f,m,p)=>{if(p===0)return f;const y=e[p-1];return y&&m&&m.partitionId!==y.partitionId&&f.push(p),f},[]);for(const f of d){const m=e[f-1],p=e[f];if(!m||!p)continue;let y=f-1;for(;y-1>=0&&e[y-1]&&e[y-1].partitionId===m.partitionId;)y--;let h=f;for(;h+1<e.length&&e[h+1]&&e[h+1].partitionId===p.partitionId;)h++;let g=null;for(let j=f-1;j>=0;j--){const N=e[j];if(N.partitionId!==m.partitionId)break;if(typeof N.mean=="number"){g=N.mean;break}}let b=null;for(let j=f;j<e.length;j++){const N=e[j];if(N.partitionId!==p.partitionId)break;if(typeof N.mean=="number"){b=N.mean;break}}if(g==null&&(g=c(m.partitionId??null)),b==null&&(b=c(p.partitionId??null)),g==null||b==null)continue;const w=b-g,T=t===Re.Up?w>0:w<0,S=T?Ct.Improvement:Ct.Concern,v=l==="Same"?S:T?Ct.Concern:Ct.Improvement;for(let j=1;j<=a;j++){const N=f-j;if(N<y)break;u(N,v)}for(let j=0;j<s;j++){const N=f+j;if(N>h)break;u(N,S)}}return i}function Kf(e){if(!e)return{};if(typeof e=="object"&&("minimumPoints"in e||"shiftPoints"in e||"trendPoints"in e))return e;const t=e,n={};if(t.thresholds){const r=t.thresholds;r.minimumPoints!=null&&(n.minimumPoints=r.minimumPoints),r.shiftPoints!=null&&(n.shiftPoints=r.shiftPoints),r.trendPoints!=null&&(n.trendPoints=r.trendPoints),r.excludeMovingRangeOutliers!=null&&(n.excludeMovingRangeOutliers=r.excludeMovingRangeOutliers)}if(t.eligibility&&t.eligibility.chartLevel!=null&&(n.chartLevelEligibility=t.eligibility.chartLevel),t.parity&&(t.parity.trendAcrossPartitions!=null&&(n.trendAcrossPartitions=t.parity.trendAcrossPartitions),t.parity.twoSigmaIncludeAboveThree!=null&&(n.twoSigmaIncludeAboveThree=t.parity.twoSigmaIncludeAboveThree),t.parity.enableFourOfFiveRule!=null&&(n.enableFourOfFiveRule=t.parity.enableFourOfFiveRule)),t.conflict&&(t.conflict.preferImprovementWhenConflict!=null&&(n.preferImprovementWhenConflict=t.conflict.preferImprovementWhenConflict),t.conflict.preferTrendWhenConflict!=null&&(n.preferTrendWhenConflict=t.conflict.preferTrendWhenConflict),t.conflict.strategy!=null&&(n.conflictStrategy=t.conflict.strategy),t.conflict.ruleHierarchy!=null&&(n.ruleHierarchy=t.conflict.ruleHierarchy),t.conflict.metricRuleOnTie!=null&&(n.metricConflictRule=t.conflict.metricRuleOnTie)),t.trend?.segmentation){const r=t.trend.segmentation;r.mode!=null&&(n.trendSegmentationMode=r.mode),r.favourableSegmentation!=null&&(n.trendFavourableSegmentation=r.favourableSegmentation),r.strategy!=null&&(n.trendSegmentationStrategy=r.strategy),r.dominatesHighlightedWindow!=null&&(n.trendDominatesHighlightedWindow=r.dominatesHighlightedWindow)}return n}function Cl(e){const{chartType:t,metricImprovement:n,data:r}=e,i=Kf(e.settings),a={minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:ri.Improvement,trendAcrossPartitions:!1,twoSigmaIncludeAboveThree:!1,enableFourOfFiveRule:!1,preferImprovementWhenConflict:!1,conflictStrategy:ii.SqlPrimeThenRule,ruleHierarchy:void 0,chartLevelEligibility:!1,trendFavourableSegmentation:!1,trendSegmentationMode:Gn.Off,trendSegmentationStrategy:Tt.CrossingAfterUnfavourable,trendDominatesHighlightedWindow:!1,...i},s=i?.trendSegmentationMode||(i?.trendFavourableSegmentation===!0?Gn.Always:i?.trendFavourableSegmentation===!1?Gn.Off:a.trendSegmentationMode),l=r.map((h,g)=>({rowId:g+1,x:h.x,value:Ie(h.value)?h.value:null,ghost:!!h.ghost,baseline:!!h.baseline,target:Ie(h.target)?h.target:null})),u=[];let c=[];for(const h of l)h.baseline&&c.length&&(u.push(c),c=[]),c.push(h);c.length&&u.push(c);const d=[],f=(a.trendFavourableSegmentation||s!==Gn.Off)&&!a.preferImprovementWhenConflict,m=l.filter(h=>!h.ghost&&Ie(h.value)).length,p=!!a.chartLevelEligibility&&m>=a.minimumPoints;let y=0;for(const h of u){y++;const g=h.map(v=>v.value),b=h.map(v=>v.ghost),w=j1(t,g,b,!!a.excludeMovingRangeOutliers),T=h.map((v,j)=>{const N=!v.ghost&&Ie(v.value)?g.slice(0,j+1).filter((_,P)=>!b[P]&&Ie(_)).length:0,M=p?!0:N>=a.minimumPoints;return{rowId:v.rowId,x:v.x,value:Ie(v.value)?v.value:null,ghost:v.ghost,partitionId:y,pointRank:N,mean:(M||p)&&Ie(w.mean)?w.mean:null,upperProcessLimit:M||p?w.upperProcessLimit:null,lowerProcessLimit:M||p?w.lowerProcessLimit:null,upperTwoSigma:M||p?w.upperTwoSigma:null,lowerTwoSigma:M||p?w.lowerTwoSigma:null,upperOneSigma:M||p?w.upperOneSigma:null,lowerOneSigma:M||p?w.lowerOneSigma:null,singlePointUp:!1,singlePointDown:!1,twoSigmaUp:!1,twoSigmaDown:!1,fourOfFiveUp:!1,fourOfFiveDown:!1,shiftUp:!1,shiftDown:!1,trendUp:!1,trendDown:!1,specialCauseImprovementValue:null,specialCauseConcernValue:null,variationIcon:Oe.CommonCause}});for(const v of T)v.ghost||!Ie(v.value)||v.mean===null||(Ie(v.upperProcessLimit)&&v.value>v.upperProcessLimit&&(v.singlePointUp=!0),Ie(v.lowerProcessLimit)&&v.value<v.lowerProcessLimit&&(v.singlePointDown=!0));D1(T,{shiftPoints:a.shiftPoints,trendPoints:a.trendPoints,twoSigmaIncludeAboveThree:!!a.twoSigmaIncludeAboveThree,enableFourOfFiveRule:!!a.enableFourOfFiveRule}),f&&(v=>{const j=v.some(k=>(k.singlePointUp||k.twoSigmaUp||k.shiftUp||k.trendUp)&&(k.singlePointDown||k.twoSigmaDown||k.shiftDown||k.trendDown));if(s===Gn.Off||s===Gn.AutoWhenConflict&&!j)return;const N=qf(v),M=Xf(N,{metricImprovement:n,strategy:a.trendSegmentationStrategy}),_=new Set,P=new Set;for(const k of M)for(let C=k.start;C<=k.end;C++)k.trendDirection===wl.Up?_.add(C):P.add(C);v.forEach((k,C)=>{k.trendUp=_.has(C)?k.trendUp:!1,k.trendDown=P.has(C)?k.trendDown:!1,a.trendDominatesHighlightedWindow&&(_.has(C)?(k.singlePointDown=!1,k.twoSigmaDown=!1,k.shiftDown=!1):P.has(C)&&(k.singlePointUp=!1,k.twoSigmaUp=!1,k.shiftUp=!1))})})(T);for(const v of T){if(v.ghost||!Ie(v.value)||v.mean===null){d.push(v);continue}const{aligned:j,opposite:N}=Gf(v,n);if(v.specialCauseImprovementValue=j?v.value:null,v.specialCauseConcernValue=N?v.value:null,n===Re.Neither){const M=v.singlePointUp||v.twoSigmaUp||v.shiftUp||v.trendUp,_=v.singlePointDown||v.twoSigmaDown||v.shiftDown||v.trendDown;v.variationIcon=M?Oe.NeitherHigh:_?Oe.NeitherLow:Oe.CommonCause}else Yf(v,n,a.metricConflictRule,a.preferImprovementWhenConflict===!0,a.conflictStrategy,a.ruleHierarchy,a.preferTrendWhenConflict===!0);d.push(v)}}if(a.trendAcrossPartitions){const h=d.map((g,b)=>({idx:b,r:g})).filter(({r:g})=>!g.ghost&&Ie(g.value));if(h.length>=a.trendPoints)for(let g=0;g<=h.length-a.trendPoints;g++){const b=h.slice(g,g+a.trendPoints).map(v=>v.idx),w=b.map(v=>d[v]);if(!w.every(v=>Ie(v.value)))continue;let T=!0,S=!0;for(let v=1;v<w.length&&(w[v].value>w[v-1].value||(T=!1),w[v].value<w[v-1].value||(S=!1),!(!T&&!S));v++);T&&b.forEach(v=>d[v].trendUp=!0),S&&b.forEach(v=>d[v].trendDown=!0)}}if(a.trendAcrossPartitions){if(f){const h=d.some(g=>(g.singlePointUp||g.twoSigmaUp||g.shiftUp||g.trendUp)&&(g.singlePointDown||g.twoSigmaDown||g.shiftDown||g.trendDown));if(s===Gn.Always||s===Gn.AutoWhenConflict&&h){const g=qf(d),b=Xf(g,{metricImprovement:n,strategy:a.trendSegmentationStrategy}),w=new Set,T=new Set;for(const S of b)for(let v=S.start;v<=S.end;v++)S.trendDirection===wl.Up?w.add(v):T.add(v);d.forEach((S,v)=>{S.trendUp=w.has(v)?S.trendUp:!1,S.trendDown=T.has(v)?S.trendDown:!1,a.trendDominatesHighlightedWindow&&(w.has(v)?(S.singlePointDown=!1,S.twoSigmaDown=!1,S.shiftDown=!1):T.has(v)&&(S.singlePointUp=!1,S.twoSigmaUp=!1,S.shiftUp=!1))})}}for(const h of d){if(h.ghost||!Ie(h.value)||h.mean===null||n===Re.Neither)continue;const{aligned:g,opposite:b}=Gf(h,n);h.specialCauseImprovementValue=g?h.value:null,h.specialCauseConcernValue=b?h.value:null,Yf(h,n,a.metricConflictRule,a.preferImprovementWhenConflict===!0,a.conflictStrategy,a.ruleHierarchy,a.preferTrendWhenConflict===!0)}}return{rows:d}}function kl(e,t){const n=Cl(e),r=Sl(n.rows,{metricImprovement:e.metricImprovement,trendVisualMode:t?.trendVisualMode??si.Ungated,enableNeutralNoJudgement:t?.enableNeutralNoJudgement??!0}),i=t?.boundaryWindows;if(!i||i.mode!=="RecalcCrossing")return{rows:n.rows,visuals:r};const a=i.directionOverride??e.metricImprovement,s=A1(n.rows,a,i),l=r.map((u,c)=>{const d=s[c];if(u===Ct.Common||u===Ct.NoJudgement){if(d===Ct.Improvement)return Ct.Improvement;if(d===Ct.Concern)return Ct.Concern}return u});return{rows:n.rows,visuals:l}}var Jf=(e=>(e.None="none",e.RecalcCrossingShift="recalc-crossing-shift",e.RecalcCrossingTrend="recalc-crossing-trend",e.RecalcCrossingTwoSigma="recalc-crossing-two-sigma",e.RecalculationsRecalculated="recalculations-recalculated",e.BaselinesRecalculated="baselines-recalculated",e))(Jf||{});function E1(e,t,n){const r=n?.trendVisualMode??si.Ungated,i=n?.enableNeutralNoJudgement??!0,a=Array.isArray(e.data)?e.data.map((f,m)=>f?.baseline?m:-1).filter(f=>f>=0):[];let s;switch(t){case"recalc-crossing-shift":{s={mode:"RecalcCrossing",preWindow:2,postWindow:4,prePolarity:"Same",boundaryIndices:a};break}case"recalc-crossing-trend":{s={mode:"RecalcCrossing",preWindow:1,postWindow:5,prePolarity:"Same",boundaryIndices:a};break}case"recalc-crossing-two-sigma":{s={mode:"RecalcCrossing",preWindow:1,postWindow:1,prePolarity:"Same",boundaryIndices:a};break}case"baselines-recalculated":s={mode:"RecalcCrossing",preWindow:0,postWindow:0,prePolarity:"Same",directionOverride:e.metricImprovement,boundaryIndices:a};break;case"recalculations-recalculated":case"none":default:s=void 0}const{rows:l,visuals:u}=kl(e,{trendVisualMode:r,enableNeutralNoJudgement:i,boundaryWindows:s});let c=u.slice(),d=a.length?a[0]:-1;if(d<0){for(let f=1;f<l.length;f++)if(l[f].partitionId!==l[f-1].partitionId){d=f;break}}return(t==="recalculations-recalculated"||t==="baselines-recalculated")&&d>0&&(c[d-1]=Ct.Common),{rows:l,visuals:c}}const Zf=Object.freeze({minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:ri.Improvement,trendAcrossPartitions:!0,twoSigmaIncludeAboveThree:!0,chartLevelEligibility:!0});function B1(e){return{...Zf,...e??{}}}var vt=(e=>(e.Concern="concern",e.Improvement="improvement",e.NoJudgement="noJudgement",e.Common="common",e))(vt||{}),ar=(e=>(e.Classic="classic",e.Triangle="triangle",e.TriangleWithRun="triangleWithRun",e))(ar||{}),Vi=(e=>(e.Direction="direction",e.Polarity="polarity",e))(Vi||{});const Qf=e=>{const t=()=>{globalThis.__spcIconDeprecationEmitted||(console.warn("[SPCVariationIcon] Deprecated payload shape detected. Migrate to { variationIcon, improvementDirection, specialCauseNeutral?, trend? }."),globalThis.__spcIconDeprecationEmitted=!0)};if(e.variationIcon!==void 0){const s=e;let l;s.improvementDirection!==void 0?l=s.improvementDirection===Re.Up?ot.HigherIsBetter:s.improvementDirection===Re.Down?ot.LowerIsBetter:ot.ContextDependent:s.polarity&&(l=s.polarity);let u;const c=s.variationIcon;if(c===Pe.Improvement||c===Pe.Concern||c===Pe.Neither||c===Pe.Suppressed)c===Pe.Improvement?u=Se.SpecialCauseImproving:c===Pe.Concern?u=Se.SpecialCauseDeteriorating:c===Pe.Neither?u=Se.CommonCause:u=Se.SpecialCauseNoJudgement;else switch(s.variationIcon){case Oe.ImprovementHigh:case Oe.ImprovementLow:u=Se.SpecialCauseImproving;break;case Oe.ConcernHigh:case Oe.ConcernLow:u=Se.SpecialCauseDeteriorating;break;case Oe.NeitherHigh:case Oe.NeitherLow:u=s.specialCauseNeutral?Se.SpecialCauseNoJudgement:Se.CommonCause;break;case Oe.CommonCause:u=Se.CommonCause;break;default:u=Se.SpecialCauseNoJudgement;break}let d=s.trend;return d||(u===Se.SpecialCauseImproving?d=l===ot.LowerIsBetter?Fe.Lower:Fe.Higher:u===Se.SpecialCauseDeteriorating?d=l===ot.LowerIsBetter?Fe.Higher:Fe.Lower:u===Se.SpecialCauseNoJudgement?s.highSideSignal&&!s.lowSideSignal?d=Fe.Higher:s.lowSideSignal&&!s.highSideSignal?d=Fe.Lower:d=Fe.Higher:d=Fe.Higher),{state:u,direction:d,polarity:l??ot.ContextDependent}}if(e.state!==void 0){t();const s=e;let l=s.trend;return!l&&(s.state===Se.SpecialCauseImproving||s.state===Se.SpecialCauseDeteriorating)&&s.polarity&&(s.state===Se.SpecialCauseImproving?l=s.polarity===ot.LowerIsBetter?Fe.Lower:Fe.Higher:l=s.polarity===ot.LowerIsBetter?Fe.Higher:Fe.Lower),l||(s.state===Se.SpecialCauseImproving?l=Fe.Higher:s.state===Se.SpecialCauseDeteriorating?l=Fe.Lower:l=Fe.Higher),{state:s.state,direction:l,polarity:s.polarity??ot.ContextDependent}}const n=e;t();const i={[Rt.Improving]:Se.SpecialCauseImproving,[Rt.Deteriorating]:Se.SpecialCauseDeteriorating,[Rt.No_Judgement]:Se.SpecialCauseNoJudgement,[Rt.None]:Se.CommonCause}[n.judgement];let a;return n.judgement===Rt.Improving?a=n.polarity===ot.LowerIsBetter?Fe.Lower:Fe.Higher:n.judgement===Rt.Deteriorating?a=n.polarity===ot.LowerIsBetter?Fe.Higher:Fe.Lower:a=n.trend??Fe.Higher,{state:i,direction:a,polarity:n.polarity}};function eh(e,t){const{state:n,direction:r,polarity:i}=Qf(e),a=xl(n),s=r===Fe.Higher?"above":"below",l=r===Fe.Higher?"upwards":"downwards",u=(()=>{switch(i){case ot.HigherIsBetter:return"For this measure, higher values are better.";case ot.LowerIsBetter:return"For this measure, lower values are better.";default:return"Direction of improvement is context dependent."}})();return[(()=>{switch(a){case Rt.Improving:return`Special cause improvement: recent data show a sustained run ${s} the mean (unlikely due to random variation).`;case Rt.Deteriorating:return`Special cause deterioration: recent data show a sustained run ${s} the mean (unlikely due to random variation).`;case Rt.No_Judgement:return`Special cause detected (no value judgement): recent data show a change in level, trending ${l}.`;case Rt.None:default:return"Common cause variation: points vary randomly around the mean; no special cause detected."}})(),u,null,null,null,null,null].filter(Boolean).join(" ")}const Tl=(e,t,n,r,i,a)=>o.jsxs("defs",{children:[r&&o.jsxs("filter",{id:t,filterUnits:"objectBoundingBox",children:[o.jsx("feGaussianBlur",{stdDeviation:"3"}),o.jsx("feOffset",{dx:"0",dy:"15",result:"blur"}),o.jsx("feFlood",{floodColor:"rgb(150,150,150)",floodOpacity:"1"}),o.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),i&&o.jsx("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:a.map(s=>o.jsx("stop",{offset:s.offset,stopColor:e,stopOpacity:parseFloat(s.opacity)},s.offset))})]}),Nl=({data:e,size:t=44,ariaLabel:n,showLetter:r=!0,dropShadow:i=!0,gradientWash:a=!1,variant:s=ar.Classic,runLength:l=0,letterMode:u=Vi.Polarity,letterOverride:c,...d})=>{const f=E.useId(),m=E.useId(),{start:p,mid:y,end:h,triStart:g,triMid:b,triEnd:w}=vs(),{state:T,direction:S,polarity:v}=E.useMemo(()=>Qf(e),[e]),j=E.useMemo(()=>Bf(T),[T]),N=E.useMemo(()=>xl(T),[T]),M=N===Rt.Improving||N===Rt.Deteriorating;let _="";r&&M&&(u===Vi.Polarity?v===ot.HigherIsBetter?_="H":v===ot.LowerIsBetter?_="L":_="":_=S===Fe.Higher?"H":"L"),c!==void 0&&(_=c);const P=T!==Se.CommonCause,k=T===Se.SpecialCauseNoJudgement,C=Ke("common-cause","#A6A6A6"),L=P?j.hex:C,D=E.useMemo(()=>T1(T,S),[T,S]),F=n||`${j.label}${_?S===Fe.Higher?" â€“ Higher":" â€“ Lower":""}`,I=eh(e);if(s===ar.TriangleWithRun){const U=[[150,90],[100,190],[200,190]],z=[[150,140+100/2],[150-100/2,140-100/2],[150+100/2,140-100/2]];let ie=null;T===Se.SpecialCauseImproving||T===Se.SpecialCauseDeteriorating?ie=o.jsx("polygon",{points:(S===Fe.Higher?U:z).map(me=>me.join(",")).join(" "),fill:j.hex,stroke:j.hex,strokeWidth:6,transform:S===Fe.Higher?"translate(0, -8)":"translate(0, 15)"}):T===Se.SpecialCauseNoJudgement&&(ie=o.jsx("polygon",{points:S===Fe.Higher?U.map(me=>me.join(",")).join(" "):z.map(me=>me.join(",")).join(" "),fill:j.hex,stroke:j.hex,strokeWidth:6,transform:S===Fe.Higher?"translate(0,-7)":"translate(0,14)"}));const W=Math.max(0,Math.min(5,Math.floor(l||0))),le=T===Se.CommonCause?160:S===Fe.Higher?220:70,je=10,de=26,fe=150-2*de,Q=T===Se.SpecialCauseImproving?Ke("improvement","#00B0F0"):T===Se.SpecialCauseDeteriorating?Ke("concern","#E46C0A"):C,ae=Array.from({length:5}).map((me,ce)=>{const R=(T===Se.SpecialCauseImproving||T===Se.SpecialCauseDeteriorating)&&ce>=5-W?Q:C;return o.jsx("circle",{cx:fe+ce*de,cy:le,r:je,fill:R,stroke:R,strokeWidth:1},ce)}),he=Tl(j.hex,f,m,i,a,[{offset:"0%",opacity:g},{offset:"75%",opacity:b},{offset:"100%",opacity:w}]),q=T===Se.CommonCause||S===Fe.Higher?"translate(0,-10)":"translate(0,25)";return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":F,"aria-description":I,...d,children:[he,o.jsx("circle",{stroke:"none",fill:a?`url(#${m})`:"#ffffff",...i?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:j.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),o.jsxs("g",{transform:q,children:[ie,_&&o.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:64,x:"150",y:S===Fe.Higher?155:145,textAnchor:"middle",dominantBaseline:"middle",children:_}),ae]})]})}if(s===ar.Triangle){const U=[[150,75],[75,225],[225,225]],z=[[150,150+150/2],[150-150/2,150-150/2],[150+150/2,150-150/2]],ie=[[150-150/2,150+150/2],[150+150/2,150+150/2]];let W=null;T===Se.SpecialCauseImproving||T===Se.SpecialCauseDeteriorating?W=o.jsx("polygon",{points:(S===Fe.Higher?U:z).map(je=>je.join(",")).join(" "),fill:j.hex,stroke:j.hex,strokeWidth:8,transform:S===Fe.Higher?"translate(0, -10)":"translate(0, 10)"}):T===Se.SpecialCauseNoJudgement?W=o.jsx("polygon",{points:S===Fe.Higher?U.map(je=>je.join(",")).join(" "):z.map(je=>je.join(",")).join(" "),fill:j.hex,stroke:j.hex,strokeWidth:8,transform:S===Fe.Higher?"translate(0, -15)":"translate(0, 15)"}):T===Se.CommonCause&&(W=o.jsx("line",{x1:ie[0][0],y1:ie[0][1],x2:ie[1][0],y2:ie[1][1],stroke:j.hex,strokeWidth:32,strokeLinecap:"square",transform:"translate(0, -75)"}));const le=Tl(j.hex,f,m,i,a,[{offset:"0%",opacity:g},{offset:"65%",opacity:b},{offset:"100%",opacity:w}]);return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":F,"aria-description":I,...d,children:[le,o.jsx("circle",{stroke:"none",fill:a?`url(#${m})`:"#ffffff",...i?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:j.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),W,_&&(T===Se.SpecialCauseImproving||T===Se.SpecialCauseDeteriorating)&&o.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:100,x:"150",y:S===Fe.Higher?"170":"140",textAnchor:"middle",dominantBaseline:"middle",children:_})]})}const $=Tl(j.hex,f,m,i,a,[{offset:"0%",opacity:p},{offset:"65%",opacity:y},{offset:"100%",opacity:h}]);return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":F,"aria-description":I,...d,children:[$,o.jsx("circle",{stroke:"none",fill:a?`url(#${m})`:"#ffffff",...i?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:j.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),_&&o.jsx("text",{fill:j.hex,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,transform:"translate(86.67, 54) scale(0.5, 0.5)",textAnchor:"end",children:o.jsx("tspan",{x:"120",y:S===Fe.Lower?"340":"155",children:_})}),k?o.jsx("path",{"aria-hidden":"true",fillRule:"evenodd",stroke:"none",fill:j.hex,...S===Fe.Lower?{transform:"rotate(90 150 150)"}:{transform:"translate(-5 0) rotate(0 150 150)"},d:"M 90.26,185.42 L 149.31,126.37 127.44,104.51 209.81,90.66 195.96,173.02 174.09,151.16 115.05,210.2 90.26,185.42 Z M 90.26,185.42"}):o.jsxs(o.Fragment,{children:[D.length===5&&o.jsx("path",{"aria-hidden":"true",fill:"none",stroke:C,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9,d:`M ${D.map(ee=>`${ee.cx} ${ee.cy}`).join(" L ")}`}),D.map((ee,Y)=>{const U=Y>=D.length-2&&P?L:C,z=U;return o.jsx("circle",{stroke:z,strokeWidth:2,strokeMiterlimit:10,fill:U,cx:ee.cx,cy:ee.cy,r:16},Y)})]})]})};Nl.displayName="SPCVariationIcon";const O1={xs:{height:24,pointR:2,stroke:1},sm:{height:32,pointR:3,stroke:1},md:{height:44,pointR:4,stroke:1}};function R1(e,t){return!t||e.length<=t?e:e.slice(e.length-t)}function H1(e){const t=e.filter(s=>typeof s.value=="number");if(!t.length)return{mean:null,latestValue:null,latestIndex:null};const n=t.reduce((s,l)=>s+l.value,0)/t.length,r=[...e].reverse().findIndex(s=>s.value!=null),i=r>=0?e.length-1-r:null,a=i!=null?e[i].value:null;return{mean:n,latestValue:a,latestIndex:i}}function z1(e){switch(e){case Se.SpecialCauseImproving:return Ke("improvement","#00B0F0");case Se.SpecialCauseDeteriorating:return Ke("concern","#E46C0A");case Se.SpecialCauseNoJudgement:return Ke("no-judgement","#490092");case Se.CommonCause:return Ke("common-cause","#A6A6A6");default:return Ke("common-cause","#A6A6A6")}}const th=({data:e,windowSize:t,minPointsForSignals:n=13,showMean:r=!0,showLimits:i=!0,showLimitBand:a=!0,showInnerBands:s=!1,showLatestMarker:l=!0,showStateGlyph:u=!0,variationState:c,autoClassify:d=!1,metricImprovement:f,gradientWash:m=!1,size:p="sm",ariaLabel:y,className:h,onPointClick:g,onClassification:b,maxPoints:w,thinningStrategy:T="stride",colorPointsBySignal:S=!0,centerLine:v,controlLimits:j,sigmaBands:N,pointSignals:M,pointNeutralSpecialCause:_})=>{const P=f,k=E.useMemo(()=>R1(e,t),[e,t]),C=E.useMemo(()=>H1(k),[k]),L=O1[p],D=Math.max(k.length*6,60),F=L.height,I=4,$=2,ee=E.useMemo(()=>(e?.length??0)-(k?.length??0),[e?.length,k?.length]),H=k.filter(O=>O.value!=null).map(O=>O.value),U=v??C.mean,z=E.useMemo(()=>{if(U==null)return null;const O=[];if(N?.upperOne!=null&&O.push(Math.abs(N.upperOne-U)),N?.lowerOne!=null&&O.push(Math.abs(U-N.lowerOne)),O.length)return O.reduce((G,J)=>G+J,0)/O.length;const V=[];return j?.upper!=null&&V.push(Math.abs(j.upper-U)/3),j?.lower!=null&&V.push(Math.abs(U-j.lower)/3),V.length?V.reduce((G,J)=>G+J,0)/V.length:null},[N?.upperOne,N?.lowerOne,j?.upper,j?.lower,U]),ie=E.useMemo(()=>{if(z!=null||!H.length||U==null||H.length<2)return null;const O=[];for(let G=1;G<H.length;G++){const J=H[G-1],A=H[G];J!=null&&A!=null&&O.push(Math.abs(A-J))}return O.length?O.reduce((G,J)=>G+J,0)/O.length/1.128:null},[z,H.join(","),U]),W=z??ie,le=E.useMemo(()=>{if(!i)return null;if(j)return j;if(U==null||W==null)return null;const O=3*W;return{lower:U-O,upper:U+O}},[i,U,W,j?.lower,j?.upper]),je=E.useMemo(()=>{if(c)return{state:c,firedRules:[],mean:C.mean,stdDev:W};if(!d||!W||W===0||U==null||C.latestValue==null)return{state:Se.CommonCause,firedRules:[],mean:C.mean,stdDev:W};const O=[],V=C.latestValue,G=j?.upper??(W!=null&&U!=null?U+3*W:null),J=j?.lower??(W!=null&&U!=null?U-3*W:null);G!=null&&J!=null&&(V>G||V<J)&&O.push("point-beyond-3sigma");const A=H.slice(-8);if(A.length===8){const Z=A.every(be=>be>U),se=A.every(be=>be<U);(Z||se)&&O.push("eight-point-run")}const X=H.slice(-5);if(X.length===5){const Z=X.every((Te,we,ye)=>we===0||Te>=ye[we-1]),se=X.every((Te,we,ye)=>we===0||Te<=ye[we-1]),be=N?.upperOne??(W!=null&&U!=null?U+W:null),_e=N?.lowerOne??(W!=null&&U!=null?U-W:null);Z&&be!=null&&X[X.length-1]>be&&O.push("five-point-trend"),se&&_e!=null&&X[X.length-1]<_e&&O.push("five-point-trend")}const te=H.slice(-3);if(te.length===3&&(W!=null||N)){const Z=N?.upperTwo??(U!=null&&W!=null?U+2*W:null),se=N?.lowerTwo??(U!=null&&W!=null?U-2*W:null);if(Z!=null&&se!=null){const be=te.filter(Te=>Te>Z).length,_e=te.filter(Te=>Te<se).length;be>=2&&O.push("two-of-three-near-limit"),_e>=2&&O.push("two-of-three-near-limit")}}let re=Se.CommonCause;if(O.includes("point-beyond-3sigma")?re=V>U?Se.SpecialCauseImproving:Se.SpecialCauseDeteriorating:(O.includes("eight-point-run")||O.includes("five-point-trend")||O.includes("two-of-three-near-limit"))&&(re=H[H.length-1]>U?Se.SpecialCauseImproving:Se.SpecialCauseDeteriorating),d&&!c&&O.length===1&&O[0]==="point-beyond-3sigma"){const Z=H.slice(-9,-1);if(Z.length>=5){const se=Z.filter(_e=>_e>U).length,be=Z.filter(_e=>_e<U).length;se>0&&be>0&&(re=Se.SpecialCauseNoJudgement)}}return{state:re,firedRules:O,mean:U,stdDev:W,side:C.latestValue!=null&&U!=null?C.latestValue>U?"above":"below":void 0}},[c,d,W,U,C.latestValue,H.join(",")]);E.useEffect(()=>{d&&!c&&b&&b(je)},[je,d,c,b]);const de=je.state,fe=z1(de),Q=O=>{const V=k.filter(X=>X.value!=null);if(!V.length)return F/2;const G=V.map(X=>X.value);le&&(le.lower!=null&&G.push(le.lower),le.upper!=null&&G.push(le.upper));const J=Math.min(...G),A=Math.max(...G);return J===A?F/2:F-(O-J)/(A-J)*(F-$*2)-$},ae=E.useMemo(()=>{if(!w||k.length<=w)return k.map((te,re)=>re);if(T==="stride"){const te=Math.max(2,w),re=(k.length-1)/(te-1),Z=new Set;for(let se=0;se<te;se++)Z.add(Math.round(se*re));return Z.add(k.length-1),Array.from(Z).sort((se,be)=>se-be)}const O=k.map((te,re)=>({i:re,v:te.value}));function V(te,re,Z){const se=te.i,be=te.v??0,_e=re.i,Te=re.v??0,we=Z.i,ye=Z.v??0,$e=Math.abs((ye-Te)*se-(we-_e)*be+we*Te-ye*_e),ze=Math.hypot(ye-Te,we-_e);return ze===0?0:$e/ze}function G(te,re){if(te.length<=2)return te;let Z=-1,se=-1;for(let be=1;be<te.length-1;be++){const _e=V(te[be],te[0],te[te.length-1]);_e>Z&&(Z=_e,se=be)}if(Z>re){const be=G(te.slice(0,se+1),re),_e=G(te.slice(se),re);return[...be.slice(0,-1),..._e]}return[te[0],te[te.length-1]]}let J=.1,A=O;for(let te=0;te<8&&(A=G(O,J),!(A.length<=w));te++)J*=1.6;const X=new Set(A.map(te=>te.i));return X.add(0),X.add(k.length-1),Array.from(X).sort((te,re)=>te-re)},[k,w,T]),he=E.useMemo(()=>ae.map(O=>k[O]),[ae,k]),q=E.useMemo(()=>{let O="";return he.forEach((V,G)=>{if(V.value==null)return;const J=Q(V.value),A=G/(he.length-1||1)*(D-I*2)+I;O+=O?` L ${A} ${J}`:`M ${A} ${J}`}),O},[he,D]),me=C.latestIndex??-1,ce=le,B=vs(),R=E.useMemo(()=>`spc-spark-wash-${Math.random().toString(36).slice(2)}`,[k.length,m]),ne=k.length>=(n||0),pe=y||"SPC sparkline",ue=(()=>{if(!de)return;const O=P===Be.Up?ot.HigherIsBetter:P===Be.Down?ot.LowerIsBetter:ot.ContextDependent,V={variationIcon:de===Se.SpecialCauseImproving?"improvement":de===Se.SpecialCauseDeteriorating?"concern":de===Se.SpecialCauseNoJudgement?"none":"neither",trend:P===Be.Up?Fe.Higher:Fe.Lower,polarity:O};try{return eh(V)}catch{return}})(),oe=E.useMemo(()=>{if(!ne)return 10;const O=[...k].reverse().filter(G=>G.value!=null).slice(0,6).map(G=>Q(G.value));return O.length&&O.reduce((G,J)=>G+J,0)/O.length<F/2?F:10},[k,ne,F]);return o.jsxs("svg",{role:"img","aria-label":pe,"aria-description":ue,width:D,height:F,className:h,viewBox:`0 0 ${D} ${F}`,children:[m&&o.jsxs(o.Fragment,{children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:R,x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:fe,stopOpacity:Number(B.start)}),o.jsx("stop",{offset:"60%",stopColor:fe,stopOpacity:Number(B.mid)}),o.jsx("stop",{offset:"100%",stopColor:fe,stopOpacity:Number(B.end)})]})}),o.jsx("rect",{x:0,y:0,width:D,height:F,fill:`url(#${R})`})]}),ce&&ce.lower!=null&&ce.upper!=null&&o.jsxs(o.Fragment,{children:[a&&o.jsx("rect",{x:0,y:Math.min(Q(ce.upper),Q(ce.lower)),width:D,height:Math.abs(Q(ce.upper)-Q(ce.lower)),fill:fe,fillOpacity:.08}),o.jsx("line",{x1:0,x2:D,y1:Q(ce.lower),y2:Q(ce.lower),stroke:fe,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),o.jsx("line",{x1:0,x2:D,y1:Q(ce.upper),y2:Q(ce.upper),stroke:fe,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),N&&s&&o.jsxs(o.Fragment,{children:[N.lowerTwo!=null&&o.jsx("line",{x1:0,x2:D,y1:Q(N.lowerTwo),y2:Q(N.lowerTwo),stroke:fe,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1}),N.lowerOne!=null&&o.jsx("line",{x1:0,x2:D,y1:Q(N.lowerOne),y2:Q(N.lowerOne),stroke:fe,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),N.upperOne!=null&&o.jsx("line",{x1:0,x2:D,y1:Q(N.upperOne),y2:Q(N.upperOne),stroke:fe,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),N.upperTwo!=null&&o.jsx("line",{x1:0,x2:D,y1:Q(N.upperTwo),y2:Q(N.upperTwo),stroke:fe,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1})]})]}),r&&C.mean!=null&&o.jsx("line",{x1:0,x2:D,y1:Q(C.mean),y2:Q(C.mean),stroke:Ke("common-cause","#A6A6A6"),strokeWidth:1,strokeDasharray:"2,2"}),o.jsx("path",{d:q,fill:"none",stroke:Ke("common-cause","#A6A6A6"),strokeWidth:L.stroke,strokeLinecap:"round"}),ae.map((O,V)=>{const G=k[O];if(!G||G.value==null)return null;const J=Q(G.value),A=V/(he.length-1||1)*(D-I*2)+I,te=(O===me&&l?L.pointR+1:L.pointR)-.5;let re=Ke("common-cause","#A6A6A6");if(S){const Z=M?.[ee+O];if(Z==="improvement")re=Ke("improvement","#00B0F0");else if(Z==="concern")re=Ke("concern","#E46C0A");else if(_?.[ee+O])re=Ke("no-judgement","#490092");else if(U!=null){const be=G.value,_e=j?.upper??(W!=null?U+3*W:null),Te=j?.lower??(W!=null?U-3*W:null);_e!=null&&be>_e?re=Ke("improvement","#00B0F0"):Te!=null&&be<Te?re=Ke("concern","#E46C0A"):re=Ke("common-cause","#A6A6A6")}else re=Ke("common-cause","#A6A6A6")}return o.jsx("circle",{cx:A,cy:J,r:te,fill:re,stroke:"none",strokeWidth:0,onClick:g?()=>g(O,G):void 0,style:g?{cursor:"pointer"}:void 0,"data-index":O,"data-signal-colour":S?re:void 0},O)}),u&&ne&&de&&de!==Se.CommonCause&&P&&o.jsx("text",{x:D-4,y:oe,textAnchor:"end",fontSize:12,fontWeight:"bold",fill:fe,"data-glyph-pos":oe<F/2?"top":"bottom",children:P===Be.Up?"H":"L"})]})};th.displayName="SPCSpark";const Ce=e=>typeof e=="number"&&Number.isFinite(e),U1=e=>e.reduce((t,n)=>t+n,0),Sn=e=>e.length?U1(e)/e.length:NaN;function nh(e,t){const n=new Array(e.length).fill(null);let r=null;for(let i=0;i<e.length;i++){const a=e[i];if(!t[i]&&Ce(a)){if(r!==null){const s=e[r];n[i]=Ce(s)?Math.abs(a-s):null}r=i}}return n}function rh(e,t){const n=e.filter(a=>Ce(a));if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=Sn(n),i=3.267*r;if(t){const a=n.filter(s=>s<=i);a.length&&a.length!==n.length&&(r=Sn(a),i=3.267*r)}return{mrMean:r,mrUcl:i}}function W1(e,t){if(!Ce(e)||!Ce(t))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=2.66,r=2/3*n,i=1/3*n;return{upperProcessLimit:e+n*t,lowerProcessLimit:e-n*t,upperTwoSigma:e+r*t,lowerTwoSigma:e-r*t,upperOneSigma:e+i*t,lowerOneSigma:e-i*t}}const V1=.2777,G1=3.6,Y1=e=>Ce(e)&&e>=0?Math.pow(e,V1):null,jr=e=>Ce(e)&&e>=0?Math.pow(e,G1):null;function q1(e,t){return!(e>0&&e<1)||!(t>0&&t<1)?NaN:Math.log(1-e)/Math.log(1-t)}const oi={one:{low:.1586552539,high:.8413447461},two:{low:.0227501319,high:.9772498681},three:{low:.001349898,high:.998650102}};function X1(e){if(!Ce(e)||e<0)return{cl:null,lcl:null,ucl:null,oneLow:null,oneHigh:null,twoLow:null,twoHigh:null};const t=1/(e+1),n=d=>q1(d,t)-1,r=n(.5),i=Math.max(0,n(oi.three.low)),a=n(oi.three.high),s=Math.max(0,n(oi.one.low)),l=n(oi.one.high),u=Math.max(0,n(oi.two.low)),c=n(oi.two.high);return{cl:r,lcl:i,ucl:a,oneLow:s,oneHigh:l,twoLow:u,twoHigh:c}}function K1(e,t,n){const r=e.map(M=>Ce(M)?Y1(M):null),i=nh(r,t),{mrMean:a}=rh(i,!!n),s=r.filter((M,_)=>!t[_]&&Ce(M)),l=s.length?Sn(s):NaN;if(!Ce(l)||!Ce(a))return{center:null,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null,mr:i,mrMean:null,mrUcl:null};const u=2.66,c=2/3*u,d=1/3*u,f=l+u*a,m=l-u*a,p=l+c*a,y=l-c*a,h=l+d*a,g=l-d*a,b=jr(l),w=jr(f),T=m<=0?null:jr(m),S=jr(h),v=g<=0?null:jr(g),j=jr(p),N=y<=0?null:jr(y);return{center:b??null,upperProcessLimit:w??null,lowerProcessLimit:T??null,upperTwoSigma:j??null,lowerTwoSigma:N??null,upperOneSigma:S??null,lowerOneSigma:v??null,mr:i,mrMean:a,mrUcl:Ce(a)?3.267*a:null}}function J1(e){const{metricImprovement:t,capabilityMode:n,value:r,mean:i,upperProcessLimit:a,lowerProcessLimit:s,target:l}=e,u=c=>typeof c=="number"&&Number.isFinite(c);return!u(r)||i===null||!u(l)?ut.None:n&&u(a)&&u(s)?t===Be.Up?u(s)&&s>l?ut.Pass:u(a)&&a<l?ut.Fail:ut.None:t===Be.Down?u(a)&&a<l?ut.Pass:u(s)&&s>l?ut.Fail:ut.None:ut.None:t===Be.Down?r<=l?ut.Pass:ut.Fail:t===Be.Up?r>=l?ut.Pass:ut.Fail:ut.None}function Z1(e,t){const{W:n,minGap:r,minDeltaSigma:i,scoreThreshold:a,isShiftUpAt:s,isShiftDownAt:l,isTrendUpAt:u,isTrendDownAt:c,isSingleUpAt:d,isSingleDownAt:f}=t,m=[];let p=0;for(let y=0;y<e.length;y++){const h=e[y];y>0&&e[y-1].partitionId!==h.partitionId&&(p=y);const g=y>0&&s(y-1),b=y>0&&l(y-1),w=y>0&&u(y-1),T=y>0&&c(y-1),S=y>0&&d(y-1),v=y>0&&f(y-1),j=s(y),N=l(y),M=u(y),_=c(y),P=d(y),k=f(y),C=[];j&&!g&&C.push({reason:nn.Shift,index:y}),N&&!b&&C.push({reason:nn.Shift,index:y}),M&&!w&&C.push({reason:nn.Trend,index:y}),_&&!T&&C.push({reason:nn.Trend,index:y}),P&&!S&&C.push({reason:nn.Point,index:y}),k&&!v&&C.push({reason:nn.Point,index:y});for(const L of C){if(L.index-p<r)continue;const D=Math.max(0,L.index-n),F=L.index-1;if(F-D+1<n)continue;const I=L.index,$=L.index+n-1;if($>=e.length)continue;const ee=e.slice(D,F+1).map(q=>q.value).filter(q=>typeof q=="number"&&Number.isFinite(q)),Y=e.slice(I,$+1).map(q=>q.value).filter(q=>typeof q=="number"&&Number.isFinite(q));if(ee.length<n||Y.length<n)continue;const H=e[L.index];let U=null;if(typeof H.upperProcessLimit=="number"&&typeof H.mean=="number"){const q=H.upperProcessLimit-H.mean;q>0&&(U=q/3)}if(!U||U<=0)continue;const z=Sn(ee),ie=Sn(Y),W=ie-z;if(Math.abs(W)<i*U)continue;const je=e.slice(I,$+1).filter(q=>q.variationIcon===Pe.Concern).length;if(je>1)continue;const de=q=>{const me=Sn(q);return q.length?q.reduce((ce,B)=>ce+(B-me)*(B-me),0)/q.length:0},fe=de(ee),Q=de(Y);let ae=L.reason===nn.Shift?90:L.reason===nn.Trend?70:60;if(Q<fe&&(ae+=10),ae-=je*15,ae<a)continue;const he=m.find(q=>q.index===L.index);if(he){const q=me=>me===nn.Shift?3:me===nn.Trend?2:1;(q(L.reason)>q(he.reason)||ae>he.score)&&(he.reason=L.reason,he.score=ae,he.deltaMean=W,he.oldMean=z,he.newMean=ie,he.window=[I,$])}else m.push({index:L.index,reason:L.reason,score:ae,deltaMean:W,oldMean:z,newMean:ie,window:[I,$]})}}return m.sort((y,h)=>y.index-h.index),m}function jl(){const e=globalThis;if(typeof e.__SPC_PHASE4_STRICT<"u")return!!e.__SPC_PHASE4_STRICT;if(typeof process<"u"){const t=process?.env?.SPC_PHASE4_STRICT;if(typeof t<"u"){const n=String(t).toLowerCase();if(n==="1"||n==="true")return!0;if(n==="0"||n==="false")return!1}}return!0}var Cn=(e=>(e.Info="info",e.Warning="warning",e.Error="error",e))(Cn||{}),Cs=(e=>(e.Config="config",e.Data="data",e.Limits="limits",e.SpecialCause="special_cause",e.Baseline="baseline",e.Logic="logic",e.Target="target",e.Ghost="ghost",e.Partition="partition",e))(Cs||{}),ks=(e=>(e.UnknownChartType="unknown_chart_type",e.InsufficientPointsGlobal="insufficient_points_global",e.VariationConflictRow="variation_conflict_row",e.NullValuesExcluded="null_values_excluded",e.TargetIgnoredRareEvent="target_ignored_rare_event",e.GhostRowsRareEvent="ghost_rows_rare_event",e.InsufficientPointsPartition="insufficient_points_partition",e.BaselineWithSpecialCause="baseline_with_special_cause",e.PartitionCapApplied="partition_cap_applied",e.GlobalCapApplied="global_cap_applied",e))(ks||{});function Q1(e){const t=[];let n=[];for(const r of e)r.baseline&&n.length&&(t.push(n),n=[]),n.push(r);return n.length&&t.push(n),t}function ew(e,t,n){const r=t.autoRecalculateShiftLength||t.specialCauseShiftPoints||6;if(e.length<r*2)return;const i=e.map((d,f)=>({idx:f,value:d.value})).filter(d=>Ce(d.value));if(i.length<r*2)return;const a=n===Be.Up||n===Be.Neither,s=n===Be.Down;function l(d,f){const m=i.slice(d,f).map(p=>p.value);return m.length?Sn(m):NaN}let u=null;if(i.length>1){const d=[];for(let m=1;m<i.length;m++)d.push(Math.abs(i[m].value-i[m-1].value));const f=Sn(d);Ce(f)&&f>0&&(u=f*(2.66/3))}if(!u||u<=0)return;const c=t.autoRecalculateDeltaSigma??.5;for(let d=r;d<=i.length-r;d++){const f=d-r,m=l(f,d),p=l(d,d+r);if(!Ce(m)||!Ce(p))continue;const h=(p-m)/u;if(!(a?h>=c:s?-h>=c:Math.abs(h)>=c))continue;const b=i.slice(d,d+r).map(S=>S.value);if(!(a?b.every(S=>S>m):s?b.every(S=>S<m):b.every(S=>a?S>m:S<m)))continue;const T=i[d].idx;e[T].baseline||(e[T].baseline=!0);return}}function ih(e){if(!e)return{};const t=e,n=e,r=n.rules??{},i=n.precedence??{},a=n.thresholds??{},s=n.warnings??{},l=n.rareEvent??{},u=n.capability??{},c=n.grace??{},d=n.baselineSuggest??{},f=n.autoRecalc??{},m=c.emergingEnabled??n.emergingGraceEnabled??t.emergingGraceEnabled??t.emergingDirectionGrace,p=r.collapseWeakerClusterRules??n.collapseWeakerClusterRules??t.collapseWeakerClusterRules??t.collapseClusterRules;if(jl()){if(t.emergingDirectionGrace!==void 0)throw new Error("[spc][phase4] emergingDirectionGrace is no longer supported. Use settings.grace.emergingEnabled.");if(t.collapseClusterRules!==void 0)throw new Error("[spc][phase4] collapseClusterRules is no longer supported. Use settings.rules.collapseWeakerClusterRules.")}const y=globalThis;!jl()&&t.emergingDirectionGrace!==void 0&&n.emergingGraceEnabled===void 0&&c.emergingEnabled===void 0&&!y.__spc_warn_emergingDirectionGrace&&(y.__spc_warn_emergingDirectionGrace=!0,console.warn("[spc] emergingDirectionGrace is deprecated; use grace.emergingEnabled")),!jl()&&t.collapseClusterRules!==void 0&&r.collapseWeakerClusterRules===void 0&&n.collapseWeakerClusterRules===void 0&&!y.__spc_warn_collapseClusterRules&&(y.__spc_warn_collapseClusterRules=!0,console.warn("[spc] collapseClusterRules is deprecated; use rules.collapseWeakerClusterRules"));const h=w=>{const T={};for(const S of Object.keys(w)){const v=w[S];v!==void 0&&(T[S]=v)}return T},g=h({excludeMovingRangeOutliers:l.excludeMovingRangeOutliers??t.excludeMovingRangeOutliers,specialCauseShiftPoints:r.shiftPoints??t.specialCauseShiftPoints,specialCauseTrendPoints:r.trendPoints??t.specialCauseTrendPoints,enableFourOfFiveRule:r.fourOfFiveEnabled??t.enableFourOfFiveRule,enableFifteenInInnerThirdRule:r.fifteenInnerThirdEnabled??t.enableFifteenInInnerThirdRule,collapseWeakerClusterRules:p??t.collapseWeakerClusterRules,precedenceStrategy:i.strategy??t.precedenceStrategy,conflictPrecedenceMode:i.conflictMode??t.conflictPrecedenceMode,minimumPoints:a.minimumPoints??t.minimumPoints,minimumPointsPartition:a.minimumPointsPartition??t.minimumPointsPartition,maximumPointsPartition:a.maximumPointsPartition??t.maximumPointsPartition,maximumPoints:a.maximumPoints??t.maximumPoints,transitionBufferPoints:a.transitionBufferPoints??t.transitionBufferPoints,minimumPointsWarning:s.minimumPointsWarning??t.minimumPointsWarning,pointConflictWarning:s.pointConflictWarning??t.pointConflictWarning,variationIconConflictWarning:s.variationIconConflictWarning??t.variationIconConflictWarning,nullValueWarning:s.nullValueWarning??t.nullValueWarning,targetSuppressedWarning:s.targetSuppressedWarning??t.targetSuppressedWarning,ghostOnRareEventWarning:s.ghostOnRareEventWarning??t.ghostOnRareEventWarning,partitionSizeWarnings:s.partitionSizeWarnings??t.partitionSizeWarnings,baselineSpecialCauseWarning:s.baselineSpecialCauseWarning??t.baselineSpecialCauseWarning,maximumPointsWarnings:s.maximumPointsWarnings??t.maximumPointsWarnings,assuranceCapabilityMode:u.assuranceCapabilityMode??t.assuranceCapabilityMode,emergingGraceEnabled:m,emergingDirectionGrace:m,baselineSuggest:d.enabled??t.baselineSuggest,baselineSuggestMinDeltaSigma:d.minDeltaSigma??t.baselineSuggestMinDeltaSigma,baselineSuggestStabilityPoints:d.stabilityPoints??t.baselineSuggestStabilityPoints,baselineSuggestMinGap:d.minGap??t.baselineSuggestMinGap,baselineSuggestScoreThreshold:d.scoreThreshold??t.baselineSuggestScoreThreshold,autoRecalculateAfterShift:f.enabled??t.autoRecalculateAfterShift,autoRecalculateShiftLength:f.shiftLength??t.autoRecalculateShiftLength,autoRecalculateDeltaSigma:f.deltaSigma??t.autoRecalculateDeltaSigma}),b={...g,...h(t)};if(m!==void 0&&(b.emergingGraceEnabled=m,b.grace={...b.grace,emergingEnabled:m}),g.collapseWeakerClusterRules!==void 0){const w=g.collapseWeakerClusterRules;b.collapseWeakerClusterRules=w,b.rules={...b.rules,collapseWeakerClusterRules:w}}return h(b)}function ah(e){const{chartType:t,metricImprovement:n,data:r,settings:i={}}=e,a=ih(i),s={excludeMovingRangeOutliers:!1,specialCauseShiftPoints:6,specialCauseTrendPoints:6,enableFourOfFiveRule:!1,minimumPoints:13,minimumPointsWarning:!1,minimumPointsPartition:12,maximumPointsPartition:null,maximumPoints:null,variationIconConflictWarning:!0,nullValueWarning:!0,targetSuppressedWarning:!0,ghostOnRareEventWarning:!0,partitionSizeWarnings:!0,baselineSpecialCauseWarning:!0,maximumPointsWarnings:!0,assuranceCapabilityMode:!0,baselineSuggest:!1,baselineSuggestMinDeltaSigma:.5,baselineSuggestStabilityPoints:5,baselineSuggestMinGap:12,baselineSuggestScoreThreshold:50,precedenceStrategy:_s.DirectionalFirst,emergingDirectionGrace:!1,rules:{},grace:{},...a};if(!Array.isArray(r))throw new Error("data must be an array of rows");const l=r.map((g,b)=>({rowId:b+1,x:g.x,value:Ce(g.value)?g.value:null,ghost:!!g.ghost,baseline:!!g.baseline,target:Ce(g.target)?g.target:null}));if(a?.autoRecalculateAfterShift)try{ew(l,a,n)}catch{}const u=Q1(l),c=[],d=[],m=l.filter(g=>!g.ghost&&Ce(g.value)).length>=(s.minimumPoints??13);let p=0;const y={};for(const g of u){p++;const b=g.map(C=>C.value),w=g.map(C=>C.ghost);let T=new Array(b.length).fill(null),S=NaN,v=NaN,j=NaN,N={upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};if(t==="XmR"){T=nh(b,w);const C=b.filter((D,F)=>!w[F]&&Ce(D));S=C.length?Sn(C):NaN;const L=rh(T,!!s.excludeMovingRangeOutliers);v=L.mrMean,j=L.mrUcl,N=W1(S,v)}else if(t==="T"){const C=K1(b,w,!!s.excludeMovingRangeOutliers);T=C.mr,v=C.mrMean??NaN,j=C.mrUcl??NaN,S=C.center??NaN,N={upperProcessLimit:C.upperProcessLimit,lowerProcessLimit:C.lowerProcessLimit,upperTwoSigma:C.upperTwoSigma,lowerTwoSigma:C.lowerTwoSigma,upperOneSigma:C.upperOneSigma,lowerOneSigma:C.lowerOneSigma}}else if(t==="G"){const C=b.filter((F,I)=>!w[I]&&Ce(F)),L=C.length?Sn(C):NaN,D=X1(L);S=D.cl??NaN,N={upperProcessLimit:D.ucl,lowerProcessLimit:D.lcl,upperTwoSigma:D.twoHigh,lowerTwoSigma:D.twoLow,upperOneSigma:D.oneHigh,lowerOneSigma:D.oneLow},T=new Array(b.length).fill(null),v=NaN,j=NaN}else d.push({code:"unknown_chart_type",category:"config",severity:"error",message:`Unknown ChartType '${t}' â€“ supported: XmR, T, G.`,context:{chartType:t}});const M=g.map((C,L)=>{const D=!C.ghost&&Ce(C.value)?b.slice(0,L+1).filter((ee,Y)=>!w[Y]&&Ce(ee)).length:0,F=m,I=F?N:{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};return{rowId:C.rowId,x:C.x,value:Ce(C.value)?C.value:null,ghost:C.ghost,partitionId:p,pointRank:D,mean:F&&Ce(S)?S:null,mr:Ce(T[L])?T[L]:null,mrMean:F&&Ce(v)?v:null,mrUcl:F&&Ce(j)?j:null,upperProcessLimit:Ce(I.upperProcessLimit)?I.upperProcessLimit:null,lowerProcessLimit:Ce(I.lowerProcessLimit)?I.lowerProcessLimit:null,upperTwoSigma:Ce(I.upperTwoSigma)?I.upperTwoSigma:null,lowerTwoSigma:Ce(I.lowerTwoSigma)?I.lowerTwoSigma:null,upperOneSigma:Ce(I.upperOneSigma)?I.upperOneSigma:null,lowerOneSigma:Ce(I.lowerOneSigma)?I.lowerOneSigma:null,target:Ce(C.target)?C.target:null,specialCauseFifteenInnerThird:!1,specialCauseSinglePointUp:!1,specialCauseSinglePointDown:!1,specialCauseTwoOfThreeUp:!1,specialCauseTwoOfThreeDown:!1,specialCauseFourOfFiveUp:!1,specialCauseFourOfFiveDown:!1,specialCauseShiftUp:!1,specialCauseShiftDown:!1,specialCauseTrendUp:!1,specialCauseTrendDown:!1,variationIcon:Pe.Suppressed,assuranceIcon:ut.None,upperBaseline:F&&Ce(S)?S:null,lowerBaseline:F&&Ce(S)?S:null,movingRangeHighPointValue:F&&Ce(j)?j:null,ghostValue:C.ghost&&Ce(C.value)?C.value:null,ghostFlag:!!C.ghost,specialCauseImprovementValue:null,specialCauseConcernValue:null,specialCauseNeitherValue:null,ruleTags:[]}});y[p]=M.filter(C=>!C.ghost&&Ce(C.value)).length;const _=s.specialCauseShiftPoints??6,P=s.specialCauseTrendPoints??6,k=[];for(let C=0;C<M.length;C++){const L=M[C],D=L.value;if(!L.ghost&&Ce(D)&&k.push(C),!(Ce(L.mean)&&Ce(L.upperProcessLimit)&&Ce(L.lowerProcessLimit))||L.ghost||!Ce(D)){c.push(L);continue}L.specialCauseSinglePointUp=Ce(L.upperProcessLimit)?D>L.upperProcessLimit:!1,L.specialCauseSinglePointDown=Ce(L.lowerProcessLimit)?D<L.lowerProcessLimit:!1,c.push(L)}if(k.length){const C=F=>M[F];let L=[],D=[];for(const F of k){const I=C(F);if(!Ce(I.mean)||!Ce(I.value)){L=[],D=[];continue}if(I.value>I.mean?(L.push(F),D=[]):I.value<I.mean?(D.push(F),L=[]):(L=[],D=[]),L.length>=_)for(const $ of L){const ee=C($);ee.specialCauseShiftUp=!0}if(D.length>=_)for(const $ of D){const ee=C($);ee.specialCauseShiftDown=!0}}for(let F=0;F<=k.length-3;F++){const $=k.slice(F,F+3).map(C);if(!$.every(de=>Ce(de.mean)&&Ce(de.value)))continue;const ee=$[0].mean,Y=$.every(de=>de.value>ee),H=$.every(de=>de.value<ee);if(!Y&&!H)continue;const U=$[0].upperTwoSigma??1/0,z=$[0].lowerTwoSigma??-1/0,ie=$[0].upperProcessLimit??1/0,W=$[0].lowerProcessLimit??-1/0,le=$.filter(de=>de.value>U&&de.value<=ie),je=$.filter(de=>de.value<z&&de.value>=W);if(Y&&le.length>=2)for(const de of le)de.specialCauseTwoOfThreeUp=!0;if(H&&je.length>=2)for(const de of je)de.specialCauseTwoOfThreeDown=!0}if(s.enableFourOfFiveRule)for(let F=0;F<=k.length-5;F++){const $=k.slice(F,F+5).map(C);if(!$.every(ie=>Ce(ie.mean)&&Ce(ie.value)))continue;const ee=$[0].mean;if(!$.every(ie=>ie.value>ee)&&!$.every(ie=>ie.value<ee))continue;const Y=$[0].upperOneSigma??1/0,H=$[0].lowerOneSigma??-1/0,U=$.filter(ie=>ie.value>Y),z=$.filter(ie=>ie.value<H);if($.every(ie=>ie.value>ee)&&U.length>=4)for(const ie of U)ie.specialCauseFourOfFiveUp=!0;if($.every(ie=>ie.value<ee)&&z.length>=4)for(const ie of z)ie.specialCauseFourOfFiveDown=!0}for(let F=0;F<=k.length-P;F++){const I=k.slice(F,F+P),$=I.map(C);if(!$.every(H=>Ce(H.value)))continue;let ee=!0,Y=!0;for(let H=1;H<$.length&&($[H].value>$[H-1].value||(ee=!1),$[H].value<$[H-1].value||(Y=!1),!(!ee&&!Y));H++);if(ee)for(const H of I){const U=C(H);U.specialCauseTrendUp=!0}if(Y)for(const H of I){const U=C(H);U.specialCauseTrendDown=!0}}if(s.enableFifteenInInnerThirdRule){let F=[];for(const I of k){const $=C(I);if(!Ce($.value)||!Ce($.mean)||!Ce($.upperOneSigma)||!Ce($.lowerOneSigma)){F=[];continue}if(!($.value<$.upperOneSigma&&$.value>$.lowerOneSigma)){F=[];continue}if(F.push(I),F.length>=15){const Y=F.map(C),H=Y.some(z=>z.value>z.mean),U=Y.some(z=>z.value<z.mean);if(H&&U)for(const z of F)C(z).specialCauseFifteenInnerThird=!0}}}}if(s.maximumPointsPartition&&Number.isFinite(s.maximumPointsPartition)){const C=s.maximumPointsPartition;let L=0;for(const D of c.filter(F=>F.partitionId===p))!D.ghost&&Ce(D.value)&&L++,L>C&&(D.mean=D.upperProcessLimit=D.lowerProcessLimit=null,D.upperTwoSigma=D.lowerTwoSigma=D.upperOneSigma=D.lowerOneSigma=null)}}for(const g of c){if(g.ruleTags&&g.ruleTags.length)continue;const b=[];g.specialCauseShiftUp&&b.push(Mt.ShiftHigh),g.specialCauseShiftDown&&b.push(Mt.ShiftLow),g.specialCauseTrendUp&&b.push(Mt.TrendIncreasing),g.specialCauseTrendDown&&b.push(Mt.TrendDecreasing),g.specialCauseSinglePointUp&&b.push(Mt.SinglePointAbove),g.specialCauseSinglePointDown&&b.push(Mt.SinglePointBelow),g.specialCauseTwoOfThreeUp&&b.push(Mt.TwoOfThreeAbove),g.specialCauseTwoOfThreeDown&&b.push(Mt.TwoOfThreeBelow),g.specialCauseFourOfFiveUp&&b.push(Mt.FourOfFiveAbove),g.specialCauseFourOfFiveDown&&b.push(Mt.FourOfFiveBelow),g.specialCauseFifteenInnerThird&&b.push(Mt.FifteenInnerThird),b.length&&(g.ruleTags=b)}for(let g=0;g<c.length;g++){const b=c[g];if(Object.prototype.hasOwnProperty.call(b,Wi.ImprovementValueBeforePruning)||Object.defineProperty(b,Wi.ImprovementValueBeforePruning,{get(){return b.originalSpecialCauseImprovementValue??null},enumerable:!1,configurable:!0}),Object.prototype.hasOwnProperty.call(b,Wi.ConcernValueBeforePruning)||Object.defineProperty(b,Wi.ConcernValueBeforePruning,{get(){return b.originalSpecialCauseConcernValue??null},enumerable:!1,configurable:!0}),b.ghost||!Ce(b.value)||b.mean===null){b.variationIcon=Pe.Suppressed;continue}const w=b.value>b.mean,T=b.value<b.mean;s.rules?.collapseWeakerClusterRules&&(b.specialCauseTwoOfThreeUp&&b.specialCauseFourOfFiveUp&&(b.specialCauseTwoOfThreeUp=!1),b.specialCauseTwoOfThreeDown&&b.specialCauseFourOfFiveDown&&(b.specialCauseTwoOfThreeDown=!1));const S=b.specialCauseTrendUp&&w,v=b.specialCauseTrendDown&&T,j=b.specialCauseSinglePointUp||b.specialCauseTwoOfThreeUp||s.enableFourOfFiveRule&&b.specialCauseFourOfFiveUp||b.specialCauseShiftUp||S,N=b.specialCauseSinglePointDown||b.specialCauseTwoOfThreeDown||s.enableFourOfFiveRule&&b.specialCauseFourOfFiveDown||b.specialCauseShiftDown||v;let M=!1;if(s.precedenceStrategy===_s.DirectionalFirst&&(s.grace?.emergingEnabled||s.emergingGraceEnabled||s.emergingDirectionGrace)){const P=s.specialCauseTrendPoints||6;if(P>1&&!(b.specialCauseTrendUp||b.specialCauseTrendDown)){const k=P-1,C=[];for(let L=g;L>=0&&C.length<k;L--){const D=c[L];!D.ghost&&Ce(D.value)&&D.mean!==null&&C.unshift(D)}if(C.length===k){let L=!0;for(let D=1;D<C.length&&L;D++)n===Be.Up?C[D].value>C[D-1].value||(L=!1):n===Be.Down&&C[D].value<C[D-1].value||(L=!1);M=L}}}if(s.precedenceStrategy===_s.DirectionalFirst){const k=n===Be.Up?j:n===Be.Down?N:!1,C=n===Be.Up?N:n===Be.Down?j:!1;k&&!C?b.variationIcon=Pe.Improvement:C&&!k?b.variationIcon=M?Pe.Neither:Pe.Concern:k&&C?b.variationIcon=M||b.specialCauseTrendUp||b.specialCauseTrendDown?Pe.Improvement:Pe.Neither:b.variationIcon=Pe.Neither}else n===Be.Up?b.variationIcon=j?Pe.Improvement:N?Pe.Concern:Pe.Neither:n===Be.Down?b.variationIcon=N?Pe.Improvement:j?Pe.Concern:Pe.Neither:b.variationIcon=Pe.Neither;const _=j||N;if(b.specialCauseImprovementValue=_&&b.variationIcon===Pe.Improvement?b.value:null,b.specialCauseConcernValue=_&&b.variationIcon===Pe.Concern?b.value:null,b.specialCauseNeitherValue=_&&b.variationIcon===Pe.Neither?b.value:null,s.conflictPrecedenceMode===$f.SqlRankingV26a&&b.specialCauseImprovementValue!==null&&b.specialCauseConcernValue!==null){const P=[];b.specialCauseSinglePointUp&&P.push({id:Vn.SinglePoint,rank:1,side:Lt.Up}),b.specialCauseSinglePointDown&&P.push({id:Vn.SinglePoint,rank:1,side:Lt.Down}),b.specialCauseTwoOfThreeUp&&P.push({id:Vn.TwoSigma,rank:2,side:Lt.Up}),b.specialCauseTwoOfThreeDown&&P.push({id:Vn.TwoSigma,rank:2,side:Lt.Down}),b.specialCauseShiftUp&&P.push({id:Vn.Shift,rank:3,side:Lt.Up}),b.specialCauseShiftDown&&P.push({id:Vn.Shift,rank:3,side:Lt.Down}),b.specialCauseTrendUp&&P.push({id:Vn.Trend,rank:4,side:Lt.Up}),b.specialCauseTrendDown&&P.push({id:Vn.Trend,rank:4,side:Lt.Down});const k=P.filter(Y=>Y.side===Lt.Up).reduce((Y,H)=>Math.max(Y,H.rank),0),C=P.filter(Y=>Y.side===Lt.Down).reduce((Y,H)=>Math.max(Y,H.rank),0);let L;k>C?L=ti.Upwards:C>k?L=ti.Downwards:L=ti.Same;const D=b.specialCauseImprovementValue,F=b.specialCauseConcernValue;L===ti.Upwards?n===Be.Up?b.specialCauseConcernValue=null:n===Be.Down&&(b.specialCauseImprovementValue=null):L===ti.Downwards?n===Be.Up?b.specialCauseImprovementValue=null:n===Be.Down&&(b.specialCauseConcernValue=null):b.variationIcon===Pe.Improvement?b.specialCauseConcernValue=null:b.variationIcon===Pe.Concern?b.specialCauseImprovementValue=null:b.specialCauseConcernValue=null,b.specialCauseImprovementValue!==null&&b.specialCauseConcernValue===null?b.variationIcon=Pe.Improvement:b.specialCauseConcernValue!==null&&b.specialCauseImprovementValue===null?b.variationIcon=Pe.Concern:b.specialCauseImprovementValue===null&&b.specialCauseConcernValue===null&&(b.variationIcon=Pe.Neither);const I=b.specialCauseImprovementValue!==null?Lt.Up:b.specialCauseConcernValue!==null?Lt.Down:void 0,$=I===Lt.Up?k:I===Lt.Down?C:Math.max(k,C),ee=P.find(Y=>Y.rank===$&&(!I||Y.side===I));b.conflictPrimeDirection=L,b.conflictResolved=!0,b.conflictResolvedRank=$||void 0,ee&&(b.conflictResolvedByRuleId=ee.id),b.pruningMode=Lf.Conflict,b.originalSpecialCauseImprovementValue=D,b.originalSpecialCauseConcernValue=F}{const P=l[b.rowId-1],k=J1({metricImprovement:n,capabilityMode:s.assuranceCapabilityMode,value:b.value,mean:b.mean,upperProcessLimit:b.upperProcessLimit,lowerProcessLimit:b.lowerProcessLimit,target:Ce(P?.target)?P.target:null});b.assuranceIcon=k}}if((s.minimumPointsWarning??!1)&&!m){const g=l.filter(b=>!b.ghost&&Ce(b.value)).length;d.push({code:"insufficient_points_global",category:"data",severity:"warning",message:`Only ${g} non-ghost points available; minimum required is ${s.minimumPoints}. Limits and icons suppressed.`,context:{available:g,minimumRequired:s.minimumPoints}})}if(s.variationIconConflictWarning)for(const g of c)g.variationIcon===Pe.Improvement&&(g.specialCauseSinglePointUp||g.specialCauseTwoOfThreeUp||s.enableFourOfFiveRule&&g.specialCauseFourOfFiveUp||g.specialCauseShiftUp||g.specialCauseTrendUp)&&(g.specialCauseSinglePointDown||g.specialCauseTwoOfThreeDown||s.enableFourOfFiveRule&&g.specialCauseFourOfFiveDown||g.specialCauseShiftDown||g.specialCauseTrendDown)&&d.push({code:"variation_conflict_row",category:"logic",severity:"warning",message:`Row ${g.rowId}: simultaneous high/low special-cause signals â€“ variation icon may be ambiguous.`,context:{rowId:g.rowId}});if(s.maximumPoints&&Number.isFinite(s.maximumPoints)){const g=s.maximumPoints;let b=0;for(const w of c)!w.ghost&&Ce(w.value)&&b++,b>g&&(w.mean=w.upperProcessLimit=w.lowerProcessLimit=null,w.upperTwoSigma=w.lowerTwoSigma=w.upperOneSigma=w.lowerOneSigma=null)}if(s.nullValueWarning&&(t===Dt.XmR||t===Dt.G)){const g=l.filter(b=>!b.ghost&&(b.value===null||b.value===void 0||!Ce(b.value))).length;g&&d.push({code:"null_values_excluded",category:"data",severity:"info",message:`${g} null/missing value(s) excluded from calculations.`,context:{nullCount:g}})}if(s.targetSuppressedWarning&&(t===Dt.T||t===Dt.G)&&l.some(b=>Ce(b.target))&&d.push({code:"target_ignored_rare_event",category:"target",severity:"info",message:`Targets provided are ignored for ${t} charts in this port.`,context:{chartType:t}}),s.ghostOnRareEventWarning&&(t===Dt.T||t===Dt.G)){const g=l.filter(b=>b.ghost).length;g&&d.push({code:"ghost_rows_rare_event",category:"ghost",severity:"info",message:`${g} ghost row(s) supplied for rare-event chart (${t}); verify intent.`,context:{chartType:t,ghostCount:g}})}if(s.partitionSizeWarnings&&Object.entries(y).forEach(([g,b])=>{b<s.minimumPointsPartition&&d.push({code:"insufficient_points_partition",category:"partition",severity:"warning",message:`Partition ${g} has only ${b} non-ghost point(s); below recommended ${s.minimumPointsPartition}.`,context:{partitionId:Number(g),count:b,minimum:s.minimumPointsPartition}})}),s.baselineSpecialCauseWarning){const g=[];c.forEach(b=>{l[b.rowId-1].baseline&&(b.specialCauseSinglePointUp||b.specialCauseSinglePointDown||b.specialCauseTwoOfThreeUp||b.specialCauseTwoOfThreeDown||b.specialCauseFourOfFiveUp||b.specialCauseFourOfFiveDown||b.specialCauseShiftUp||b.specialCauseShiftDown||b.specialCauseTrendUp||b.specialCauseTrendDown)&&g.push(b.rowId)}),g.length&&d.push({code:"baseline_with_special_cause",category:"baseline",severity:"warning",message:`Baseline set with special-cause present at row(s): ${g.join(", ")}.`,context:{rows:g}})}s.maximumPointsWarnings&&(s.maximumPointsPartition&&Number.isFinite(s.maximumPointsPartition)&&d.push({code:"partition_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after ${s.maximumPointsPartition} non-ghost points per partition.`,context:{cap:s.maximumPointsPartition}}),s.maximumPoints&&Number.isFinite(s.maximumPoints)&&d.push({code:"global_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after global cap of ${s.maximumPoints} non-ghost points.`,context:{cap:s.maximumPoints}}));let h;if(s.baselineSuggest){const g=s.baselineSuggestStabilityPoints,b=s.baselineSuggestMinGap,w=s.baselineSuggestMinDeltaSigma,T=s.baselineSuggestScoreThreshold;h=Z1(c.map(v=>({value:v.value,partitionId:v.partitionId,variationIcon:v.variationIcon,mean:v.mean,upperProcessLimit:v.upperProcessLimit})),{W:g,minGap:b,minDeltaSigma:w,scoreThreshold:T,isShiftUpAt:v=>!!c[v].specialCauseShiftUp,isShiftDownAt:v=>!!c[v].specialCauseShiftDown,isTrendUpAt:v=>!!c[v].specialCauseTrendUp,isTrendDownAt:v=>!!c[v].specialCauseTrendDown,isSingleUpAt:v=>!!c[v].specialCauseSinglePointUp,isSingleDownAt:v=>!!c[v].specialCauseSinglePointDown}).map(v=>({index:v.index,reason:v.reason,score:v.score,deltaMean:v.deltaMean,oldMean:v.oldMean,newMean:v.newMean,window:v.window}))}return{rows:c,warnings:d,...h?{suggestedBaselines:h}:{}}}function sh(e,t){return e==="improvement"?Se.SpecialCauseImproving:e==="concern"?Se.SpecialCauseDeteriorating:e==="suppressed"||e==="neither"&&t?Se.SpecialCauseNoJudgement:e==="neither"?Se.CommonCause:null}function tw(e,t){return e==="improvement"||e==="concern"||e==="suppressed"||e==="neither"&&!!t}function nw(e){const t=e.replace("#","");return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function oh(e){const{values:t,x:n,chartType:r=Dt.XmR,metricImprovement:i=Be.Neither,showLimits:a=!0,showLimitBand:s=!1,showInnerBands:l=!1,showMean:u=!1,autoClassify:c=!0}=e,d=K.useMemo(()=>{const v=[];for(let j=0;j<t.length;j++)v.push({x:n?.[j],value:t[j]});return v},[t,n]),f=K.useMemo(()=>{try{const v=d.map((j,N)=>({x:j.x??N,value:j.value}));return ah({chartType:r,metricImprovement:i,data:v,settings:{}})}catch{return null}},[d,r,i]),m=K.useMemo(()=>{const v=f?.rows;if(!v||v.length===0)return null;for(let j=v.length-1;j>=0;j--){const N=v[j];if(N&&N.value!=null&&!N.ghost)return N}return v[v.length-1]??null},[f]),p=K.useMemo(()=>{const v=f?.rowsRepresentative??f?.rows;if(!v||!Array.isArray(v)||v.length===0)return null;const j=v[v.length-1];return sh(j?.variationIcon,(j?.specialCauseNeitherValue??null)!=null)},[f]),y=K.useMemo(()=>m?.mean??null,[m]),h=K.useMemo(()=>{if(!m)return null;const v=m?.lowerProcessLimit??null,j=m?.upperProcessLimit??null;return v==null&&j==null?null:{lower:v,upper:j}},[m]),g=K.useMemo(()=>m?{upperOne:m?.upperOneSigma??null,upperTwo:m?.upperTwoSigma??null,lowerOne:m?.lowerOneSigma??null,lowerTwo:m?.lowerTwoSigma??null}:null,[m]),b=K.useMemo(()=>{const v=f?.rows;if(!(!v||v.length===0))return v.map(j=>{const N=!!j?.specialCauseSinglePointUp||!!j?.specialCauseTwoOfThreeUp||!!j?.specialCauseFourOfFiveUp||!!j?.specialCauseShiftUp||!!j?.specialCauseTrendUp,M=!!j?.specialCauseSinglePointDown||!!j?.specialCauseTwoOfThreeDown||!!j?.specialCauseFourOfFiveDown||!!j?.specialCauseShiftDown||!!j?.specialCauseTrendDown;switch(i){case Be.Up:return N?"improvement":M?"concern":"neither";case Be.Down:return M?"improvement":N?"concern":"neither";case Be.Neither:default:return"neither"}})},[f,i]),w=K.useMemo(()=>{const v=f?.rows;if(!(!v||v.length===0))return v.map(j=>!!j?.specialCauseNeitherValue)},[f]),T=K.useMemo(()=>{let v=null;if(m&&m.value!=null&&!m.ghost){const L=m.variationIcon,D=(m?.specialCauseNeitherValue??null)!=null;p===Se.SpecialCauseNoJudgement?v=tw(L,D)?Se.SpecialCauseNoJudgement:Se.CommonCause:v=sh(L,D)??Se.CommonCause}const j=v??Se.CommonCause,N=Ss[j].hex,[M,_,P]=nw(N),k=vs();return{"--fdp-metric-card-bg":`linear-gradient(180deg, rgba(${M}, ${_}, ${P}, ${k.start}) 0%, rgba(${M}, ${_}, ${P}, ${k.mid}) 50%, rgba(${M}, ${_}, ${P}, ${k.end}) 100%)`,"--fdp-metric-card-accent":N}},[m,p]);return{sparkProps:K.useMemo(()=>({data:d,showMean:u,showLimits:a,showLimitBand:s,showInnerBands:l,metricImprovement:i,centerLine:y,controlLimits:h,sigmaBands:g,pointSignals:b,pointNeutralSpecialCause:w,variationState:p??void 0,autoClassify:!!(c&&!p),onClassification:()=>{}}),[d,u,a,s,l,i,c,p,y,h?.lower,h?.upper,g?.upperOne,g?.upperTwo,g?.lowerOne,g?.lowerTwo,b?.length,w?.length]),metricCardStyle:T,latestState:p}}function lh(e){if(e==null)return;const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.valueOf())?void 0:t}function rw(e,t,n){const r=new Array(e),i=new Date(t);for(let a=0;a<e;a++)switch(r[a]=new Date(i),n){case"hourly":i.setHours(i.getHours()+1);break;case"daily":i.setDate(i.getDate()+1);break;case"weekly":i.setDate(i.getDate()+7);break;case"monthly":i.setMonth(i.getMonth()+1);break;case"quarterly":i.setMonth(i.getMonth()+3);break;case"annually":i.setFullYear(i.getFullYear()+1);break}return r}function iw(e,t){const n=e.filter(Boolean);if(n.length<2)return t;const r=[];for(let u=1;u<n.length;u++)r.push(n[u].getTime()-n[u-1].getTime());const i=r.sort((u,c)=>u-c),a=i[Math.floor(i.length/2)],s=3600*1e3,l=24*s;return a<=2*s?"hourly":a<=2*l?"daily":a<=10*l?"weekly":a<=45*l?"monthly":a<=120*l?"quarterly":"annually"}function ch(e,t){if(e)try{switch(t){case"hourly":return new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"}).format(e);case"daily":return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e);case"weekly":return`Week of ${new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}`;case"monthly":return new Intl.DateTimeFormat(void 0,{month:"short",year:"numeric"}).format(e);case"quarterly":return`Q${Math.floor(e.getMonth()/3)+1} ${e.getFullYear()}`;case"annually":return`${e.getFullYear()}`;default:return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}}catch{return}}function aw(e,t,n,r="0-100"){if(t)return t;if(n)return n;const i=e.filter(l=>l!=null);if(!i.length)return;const a=Math.min(...i),s=Math.max(...i);if(r==="0-1"){if(a>=0&&s<=1&&s>0)return"%"}else if(a>=0&&s<=100&&s>0)return"%"}function sw(e,t,n=1){switch(e||t){case"hourly":return n===1?"last hour":`last ${n} hours`;case"daily":return n===1?"last day":`last ${n} days`;case"weekly":return n===1?"last week":`last ${n} weeks`;case"monthly":return n===1?"last month":`last ${n} months`;case"quarterly":return n===1?"last quarter":`last ${n} quarters`;case"annually":return n===1?"last year":`last ${n} years`;default:return"previous"}}function uh(e){const{values:t,dates:n,intervalHint:r,startDate:i,providedUnit:a,defaultUnit:s,autoValue:l=!0,autoDelta:u=!0,autoMetadata:c=!0,deltaConfig:d}=e,f=t.map(_=>typeof _=="number"?_:_==null?null:Number(_));let m=-1;for(let _=f.length-1;_>=0;_--)if(f[_]!=null){m=_;break}let p=(n||[]).map(lh);if(!p.some(Boolean)){const _=lh(i);_&&r?p=rw(f.length,_,r):p=new Array(f.length).fill(void 0)}const h=iw(p,r),g=aw(f,a,s,e.percentHeuristic),b=l&&m>=0&&f[m]!=null?f[m]:void 0,w={strategy:"previous",n:1,absolute:!0,skipNulls:!0,...d||{}};function T(){if(m<0)return-1;if(w.strategy==="previous"||w.strategy==="n-points"){let L=m-(w.strategy==="previous"?1:Math.max(1,w.n||1));if(!w.skipNulls)return L;for(let D=L;D>=0;D--)if(f[D]!=null)return D;return-1}const _=p[m];if(!_)return-1;const P=new Date(_);P.setFullYear(P.getFullYear()-1);let k=-1,C=1/0;for(let L=0;L<p.length;L++){const D=p[L];if(!D||f[L]==null)continue;const F=Math.abs(D.getTime()-P.getTime());F<C&&(C=F,k=L)}return k}const S=T(),v=S>=0?f[S]:null;let j;if(u&&b!=null&&v!=null){const _=b-v,P=w.absolute!==!1,k=P?_:v===0?0:_/Math.abs(v)*100;j={value:Number.isFinite(k)?Number(k.toFixed(2)):0,isPercent:P?g==="%":!0,period:`vs ${sw(h,r,w.strategy==="n-points"?Math.max(1,w.n||1):1)}`}}const N=m>=0?p[m]:void 0,M=c&&ch(N,h)?`Latest: ${ch(N,h)}`:void 0;return{value:b,unit:g,delta:j,metadata:M,latestDate:N,frequency:h}}const ow=({sparkData:e,direction:t=Be.Neither,showMean:n=!1,showLimits:r=!0,showLimitBand:i=!1,showInnerBands:a=!1,autoClassify:s=!0,maxPoints:l,autoValue:u=!0,autoDelta:c=!0,autoMetadata:d=!0,defaultUnit:f,intervalHint:m,startDate:p,deltaConfig:y,...h})=>{const g=oh({values:e.map(N=>N.value??null),metricImprovement:t,showLimits:r,showLimitBand:i,showInnerBands:a,showMean:n,autoClassify:s}),b=o.jsx(th,{...g.sparkProps,maxPoints:l}),w=K.useMemo(()=>uh({values:e.map(N=>typeof N.value=="number"?N.value:null),dates:e.map(N=>N.date),intervalHint:m,startDate:p,providedUnit:h.unit,defaultUnit:f,autoValue:u,autoDelta:c,autoMetadata:d,deltaConfig:y}),[e,m,p,h.unit,f,u,c,d,y]),T=u&&w.value!=null?w.value:h.value,S=c&&w.delta?w.delta:h.delta,v=w.unit||h.unit,j=d&&w.metadata?w.metadata:h.metadata;return o.jsx(If,{...h,value:T,unit:v,delta:S,metadata:j,visual:b,style:g.metricCardStyle})},dh=({engineRows:e,limits:t,pointDescriber:n,measureName:r,measureUnit:i,dateFormatter:a,enableNeutralNoJudgement:s=!0,showTrendGatingExplanation:l=!0})=>{const u=Wn(),c=rr(),[d,f]=K.useState(null),[m,p]=K.useState(!1),y=K.useRef(null);K.useEffect(()=>{if(u){if(u.focused&&(f(u.focused),y.current&&(cancelAnimationFrame(y.current),y.current=null)),!u.focused&&!m){const oe=requestAnimationFrame(()=>{f(null),y.current=null});y.current=oe}return()=>{y.current&&(cancelAnimationFrame(y.current),y.current=null)}}},[u,u?.focused,m]);const h=u&&(u.focused||(m?d:null)||d),[g,b]=K.useState(!1);K.useEffect(()=>{const oe=requestAnimationFrame(()=>b(!0));return()=>cancelAnimationFrame(oe)},[h?.index]);const w=c?.innerWidth??0,T=c?.innerHeight??0,S=h?Math.min(Math.max(h.clientX,0),w):0,v=h?Math.min(Math.max(h.clientY,0),T):0,j=c?.ref?.current||void 0;if(!h)return null;const N=e?.[h.index],_=xs(N?{specialCauseSinglePointUp:!!N.rules.singlePoint.up,specialCauseSinglePointDown:!!N.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!N.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!N.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!N.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!N.rules.fourOfFive.down,specialCauseShiftUp:!!N.rules.shift.up,specialCauseShiftDown:!!N.rules.shift.down,specialCauseTrendUp:!!N.rules.trend.up,specialCauseTrendDown:!!N.rules.trend.down}:null).map(oe=>({id:oe,label:ni[oe].tooltip})),P=h.x instanceof Date?h.x:new Date(h.x),k=a?a(P):P.toDateString(),C=i?`${i}`:"",L=r||C?`${h.y}${C?""+C:" "}${r?" "+r:""}`:`${h.y}`,D=ws(N?.classification?.variation),F=Af(N?.classification?.assurance),I=x1(t.mean??null,t.sigma,h.y),$=n?n(h.index,{x:h.x,y:h.y}):void 0,ee=D||F||I,Y=N?.rules.trend.up||N?.rules.trend.down,H=N?.classification?.variation===Pe.Neither&&Y,U=l&&H?"Trend detected (monotonic run) â€“ held neutral until values cross onto the favourable side of the mean.":null,z=_.length>0,ie=N&&"primeDirection"in N?N.primeDirection:void 0,W=N&&"primeRuleId"in N?N.primeRuleId:void 0,le=s&&N?.classification?.variation===Pe.Neither&&z,je="var(--nhs-fdp-color-primary-yellow, #ffeb3b)",de=Ef(N?.classification?.variation),fe=6.2,ae=[$||"",`${k} â€¢ ${L}`].filter(Boolean).reduce((oe,O)=>Math.max(oe,O.length*fe+32),0),he=200,q=440,me=Math.min(q,Math.max(he,ae));let ce=S+12,R=(c.margin?.top??0)+v+16;ce+me>w&&(ce=S- -60-me),ce<0&&(ce=Math.max(0,w-me));const ne=h?`spc-tooltip-${h.index}`:"spc-tooltip",pe=typeof h.index=="number"?h.index:NaN,ue=j?hb.createPortal(o.jsx("div",{id:ne,className:"fdp-spc-tooltip fdp-spc-tooltip-portal"+(g?" is-visible":""),style:{position:"absolute",left:ce,top:R,width:me,maxWidth:q,zIndex:10,pointerEvents:"auto",userSelect:"none"},role:"tooltip","aria-live":"polite","aria-hidden":g?"false":"true","data-floating":!0,"data-placement":ce+me+12>w?"left":"right",onPointerEnter:()=>{p(!0),y.current&&(cancelAnimationFrame(y.current),y.current=null)},onPointerLeave:()=>{if(p(!1),!u?.focused){const oe=requestAnimationFrame(()=>{f(null),y.current=null});y.current=oe}},children:o.jsxs("div",{className:"fdp-spc-tooltip__body",children:[o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--point",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Point"})}),o.jsxs("div",{className:"fdp-spc-tooltip__primary-line",children:["Index: ",pe]})]}),o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--date",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Date"})}),o.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:k})]}),o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--value",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Value"})}),o.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:L})]}),ee&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--signals",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Signals"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Signals",children:D?.toLowerCase().includes("concern")?o.jsx(Ye,{text:D,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):D?.toLowerCase().includes("improvement")?o.jsx(Ye,{text:D,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):le?o.jsx(Ye,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):D?o.jsx(Ye,{text:D,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null})]}),F&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--assurance",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Assurance"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:(()=>{const oe=F.toLowerCase(),V=!(oe.includes("not met")||oe.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(oe);return o.jsx(Ye,{text:F,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${V?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${F}`})})()})]}),I&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--limits",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Control Limits & Sigma"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:o.jsx(Ye,{text:(()=>{const oe=I.toLowerCase();return oe.startsWith("within 1")?"â‰¤1Ïƒ":oe.startsWith("1â€“2")?"1â€“2Ïƒ":oe.startsWith("2â€“3")?"2â€“3Ïƒ":oe.startsWith(">3")?">3Ïƒ":I})(),color:I.includes(">3")?"orange":I.includes("2â€“3")?"yellow":"grey","aria-label":`Sigma zone: ${I}`,className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--zone"})})]}),U&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--gating","data-gating":!0,children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Trend gating"})}),o.jsx("div",{className:"fdp-spc-tooltip__explanation","aria-live":"off",children:U})]}),z&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Special cause"})}),o.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",children:_.map(({id:oe,label:O})=>{const V=String(oe),J=V===Mt.TrendIncreasing||V===Mt.TrendDecreasing?"fdp-spc-tag--trend":le?"fdp-spc-tag--no-judgement":D?D.toLowerCase().includes("concern")?"fdp-spc-tag--concern":D.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common";return o.jsx(Ye,{text:O,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${J}`,"data-rule-id":V},V)})}),ie&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",style:{marginTop:16},children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",style:{marginBottom:6},children:o.jsx("strong",{children:"Prime Direction"})}),(()=>{const oe=le?"fdp-spc-tag--no-judgement":D?D.toLowerCase().includes("concern")?"fdp-spc-tag--concern":D.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",O=`${ie}${W?` (${W})`:""}`;return o.jsx(Ye,{text:O,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${oe}`,"aria-label":`Prime direction ${ie}${W?` via ${W}`:""}`})})()]})]})]})}),j):null;return o.jsxs("g",{className:"fdp-tooltip-layer fdp-spc-tooltip",pointerEvents:"none","aria-hidden":"true",children:[o.jsx("circle",{cx:S,cy:v,r:7,fill:"none",stroke:je,strokeWidth:3}),o.jsx("circle",{cx:S,cy:v,r:5,fill:"#000",stroke:je,strokeWidth:1.5}),o.jsx("circle",{cx:S,cy:v,r:2.5,fill:de,stroke:"#fff",strokeWidth:.5}),ue]})},Dl=({status:e,size:t=44,ariaLabel:n,dropShadow:r=!0,colourOverride:i,gradientWash:a=!1,letterOverride:s,showTrendLines:l=!0,...u})=>{const c=E.useId(),d=E.useId(),{start:f,mid:m,end:p}=vs(),y=i||S1[e],h=(s||C1[e]).slice(0,2),g=n||`Assurance ${e}`;return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":g,...u,children:[o.jsxs("defs",{children:[r&&o.jsxs("filter",{id:c,filterUnits:"objectBoundingBox",children:[o.jsx("feGaussianBlur",{stdDeviation:"3"}),o.jsx("feOffset",{dx:"-1",dy:"15",result:"blur"}),o.jsx("feFlood",{floodColor:"rgb(166,166,166)",floodOpacity:"1"}),o.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),a&&o.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:y,stopOpacity:parseFloat(f)}),o.jsx("stop",{offset:"65%",stopColor:y,stopOpacity:parseFloat(m)}),o.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:parseFloat(p)})]})]}),o.jsx("circle",{stroke:"none",fill:a?`url(#${d})`:"#ffffff",...r?{filter:`url(#${c})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("text",{fill:y,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,x:0,y:0,transform:"translate(121.01, 32) scale(0.5, 0.5)",textAnchor:"middle",children:o.jsx("tspan",{x:60,y:184,children:h})}),l&&o.jsxs(o.Fragment,{children:[e===Tr.Fail?o.jsx("path",{id:"fail-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 33,143 L 268,143"}):e===Tr.Uncertain?o.jsx("path",{id:"uncertain-line",stroke:"rgb(166, 166, 166)",strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"16.5,10",strokeDashoffset:0,fill:"none",d:"M 36,174 L 266,174"}):o.jsx("path",{id:"pass-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 48,204 L 254,204"}),o.jsx("path",{id:"data-sparkline",stroke:"rgb(166, 166, 166)",strokeWidth:12,strokeMiterlimit:12,fill:"none",d:"M 59.9,187.91 C 72.79,171.72 87.33,158.06 104.4,157.83 121.91,158.58 140.94,187.85 153.4,189.91 164.1,192.12 163.78,171.38 169.17,170.53 172.87,169.55 174.88,187.45 184.94,189.24 197,191.86 230.54,184.47 239.01,185.9"}),o.jsx("circle",{stroke:y,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"})]})]})};Dl.displayName="SPCAssuranceIcon";function lw(e,t=!0){if(!e?.length)return[];const n=[...e];if(t){for(let a=1;a<n.length-1;a++)n[a]===vt.Common&&n[a-1]===n[a+1]&&n[a-1]!==vt.Common&&(n[a]=n[a-1]);let i=0;for(;i<n.length;){const a=n[i];let s=i+1;for(;s<n.length&&n[s]===a;)s++;s-i===1&&a!==vt.Common&&(n[i]=vt.Common),i=s}}const r=[];if(n.length){let i=0;for(let a=1;a<=n.length;a++)if(a===n.length||n[a]!==n[i]){const s=n[i],l=a-1,u=l-i+1;(s===vt.Common||u>=2)&&r.push({start:i,end:l,category:s}),i=a}}return r}const cw=({engineRows:e,measureName:t,measureUnit:n,onSignalFocus:r})=>{const i=Wn(),a=i?.focused??null,s=a?.index??null,l=typeof s=="number"&&e?e[s]:null,u=K.useMemo(()=>l?xs({specialCauseSinglePointUp:!!l.rules.singlePoint.up,specialCauseSinglePointDown:!!l.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!l.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!l.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!l.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!l.rules.fourOfFive.down,specialCauseShiftUp:!!l.rules.shift.up,specialCauseShiftDown:!!l.rules.shift.down,specialCauseTrendUp:!!l.rules.trend.up,specialCauseTrendDown:!!l.rules.trend.down}):[],[l]),c=K.useMemo(()=>Array.from(new Set(u.map(h=>ni[h]?.narration).filter(Boolean))),[u]),d=l?ws(l.classification?.variation):null,f=l?Af(l.classification?.assurance):null,m=u.length>0,p=l?l.classification?.variation===Pe.Neither&&m:!1,y=K.useRef(null);return K.useEffect(()=>{if(!r||!a||l==null)return;const h=`${a.seriesId}:${a.index}`;if(y.current!==h){y.current=h;try{r({index:a.index,x:a.x,y:a.y,row:l,rules:u})}catch{}}},[a?.seriesId,a?.index,a?.x,a?.y,l,u,r]),o.jsxs("div",{className:"fdp-spc-inspector",role:"region","aria-label":"Signals inspector","data-testid":"spc-signals-inspector",children:[o.jsxs("div",{className:"fdp-spc-inspector__header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsx("strong",{children:"Signals inspector"}),o.jsx("div",{className:"fdp-spc-inspector__nav","aria-hidden":!i,children:i&&o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{i.focused?i.focusPrevPoint():i.focusFirstPoint()},"aria-label":"Previous point",children:"â—€"}),o.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{i.focused?i.focusNextPoint():i.focusFirstPoint()},"aria-label":"Next point",children:"â–¶"})]})})]}),!l||!a?o.jsx("p",{className:"fdp-spc-inspector__empty",children:"No point selected."}):o.jsxs("div",{className:"fdp-spc-inspector__body",children:[o.jsxs("div",{className:"fdp-spc-inspector__summary",style:{display:"flex",gap:16,flexWrap:"wrap"},children:[o.jsxs("span",{children:[o.jsx("strong",{children:"Point:"})," ",a.index+1]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Value:"})," ",a.y,n?` ${n}`:"",t?` ${t}`:""]})]}),(d||p||f)&&o.jsx("div",{className:"fdp-spc-inspector__signals",style:{marginTop:8},children:o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[d?.toLowerCase().includes("concern")?o.jsx(Ye,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):d?.toLowerCase().includes("improvement")?o.jsx(Ye,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):p?o.jsx(Ye,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):d?o.jsx(Ye,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null,f&&(()=>{const h=f.toLowerCase(),b=!(h.includes("not met")||h.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(h);return o.jsx(Ye,{text:f,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${b?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${f}`})})()]})}),o.jsxs("div",{className:"fdp-spc-inspector__rules",style:{marginTop:8},children:[o.jsx("strong",{children:"Special cause:"}),o.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:4},children:u.length===0?o.jsx("span",{children:" None"}):u.map(h=>{const g=String(h),w=g===Mt.TrendIncreasing||g===Mt.TrendDecreasing?"fdp-spc-tag--trend":p?"fdp-spc-tag--no-judgement":d?d.toLowerCase().includes("concern")?"fdp-spc-tag--concern":d.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",T=ni[h]?.tooltip||g;return o.jsx(Ye,{text:T,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${w}`,"data-rule-id":g,title:ni[h]?.tooltip},g)})})]}),c.length>0&&o.jsxs("div",{className:"fdp-spc-inspector__narration",style:{marginTop:8},children:[o.jsx("strong",{children:"Summary:"})," ",c.join("; ")]})]})]})};function uw(e){const{rows:t}=Cl(e),n=kl(e);return{rows:t,visuals:n.visuals}}var li=(e=>(e.Slope="slope",e.Neutral="neutral",e.Extend="extend",e))(li||{}),Ml=(e=>(e.Ungated="ungated",e.Gated="gated",e))(Ml||{});function dw(e){const{ui:t,input:n,engine:r,container:i,a11y:a,visualsEngine:s,meta:l,data:u,ariaLabel:c,height:d,showZones:f,showPoints:m,announceFocus:p,className:y,unit:h,targets:g,baselines:b,ghosts:w,settings:T,chartType:S,metricImprovement:v,gradientSequences:j,sequenceTransition:N,processLineWidth:M,showPartitionMarkers:_,showWarningsPanel:P,warningsFilter:k,enableNeutralNoJudgement:C,showTrendGatingExplanation:L,trendVisualMode:D,alwaysShowZeroY:F,alwaysShowHundredY:I,percentScale:$,showTrendStartMarkers:ee,showFirstFavourableCrossMarkers:Y,showTrendBridgeOverlay:H,showSignalsInspector:U,onSignalFocus:z,showIcons:ie,showEmbeddedIcon:W,embeddedIconVariant:le,embeddedIconRunLength:je,showFocusIndicator:de,visualsScenario:fe,visualsEngineSettings:Q,source:ae,narrationContext:he,highlightOutOfControl:q}=e;process.env.NODE_ENV!=="production"&&(!n&&(g!==void 0||b!==void 0||w!==void 0)&&console.warn("SPCChart: Flat input props (targets/baselines/ghosts) are deprecated. Use input={{ data, targets, baselines, ghosts }} instead."),!r&&T!==void 0&&console.warn("SPCChart: Flat engine prop 'settings' is deprecated. Use engine={{ chartType, metricImprovement, settings }}."),!i&&(d!==void 0||y!==void 0)&&console.warn("SPCChart: Consider grouped container props. Use container={{ height, className }}."),!a&&(c!==void 0||p!==void 0||he!==void 0||h!==void 0)&&console.warn("SPCChart: Consider grouped accessibility props. Use a11y={{ label, announceFocus, narrationContext, unit }}."),!s&&(fe!==void 0||Q!==void 0)&&console.warn("SPCChart: Consider grouped visuals engine props. Use visualsEngine={{ scenario, settings }}."),t?.visuals===void 0&&(f!==void 0||m!==void 0)&&console.warn("SPCChart: Visual toggles should be grouped. Use ui={{ visuals: { showZones, showPoints } }}."),t?.visuals?.rules===void 0&&q!==void 0&&console.warn("SPCChart: Prefer grouped rules toggle. Use ui={{ visuals: { rules: { highlightOutOfControl } } }}."),!l&&ae!==void 0&&console.warn("SPCChart: Consider grouped meta. Use meta={{ source }}."));const me=n?.data??u??[],ce=n?.targets??g,B=n?.baselines??b,R=n?.ghosts??w,ne=r?.chartType??S??Dt.XmR,pe=r?.metricImprovement??v??Be.Neither,ue=r?.settings??T,oe=r?.autoRecalc,O=t?.axes?.alwaysShowZeroY??F??!0,V=t?.axes?.alwaysShowHundredY??I??!1,G=t?.axes?.percentScale??$??!1,J=t?.visuals?.gradientSequences??j??!1,A=t?.visuals?.sequenceTransition??N??"slope",X=t?.visuals?.processLineWidth??M??2,te=t?.visuals?.trend?.visualMode??D??"ungated",re=t?.visuals?.trend?.showGatingExplanation??L??!0,Z=t?.visuals?.rules?.enableNeutralNoJudgement??C??!0,se=t?.visuals?.rules?.enableRules??e.enableRules??!0,be=t?.visuals?.showZones,_e=t?.visuals?.showPoints,Te=t?.visuals?.rules?.highlightOutOfControl,we=i?.height,ye=i?.className,$e=a?.label,ze=a?.unit,at=a?.narrationContext,Ue=s?.scenario,Qe=s?.settings,ln=l?.source,Et=t?.overlays?.partitionMarkers??_??!1,Ft=t?.overlays?.trendStartMarkers??ee??!1,st=t?.overlays?.firstFavourableCrossMarkers??Y??!1,ft=t?.overlays?.trendBridge??H??!1,Jn=t?.inspector?.show??U??!1,lo=t?.inspector?.onFocus??z,Or=t?.warnings?.show??P??!1,Fa=t?.warnings?.filter??k,Rr=t?.icons?.show??ie??!1,xi=t?.icons?.embedded?.show??W??!0,$a=t?.icons?.embedded?.variant??le??ar.Classic,Hr=t?.icons?.embedded?.runLength??je,zr=t?.overlays?.focusIndicator??de??!0;return{effData:me,effTargets:ce,effBaselines:B,effGhosts:R,effChartTypeCore:ne,effMetricImprovementCore:pe,effEngineSettings:ue,effEngineAutoRecalc:oe,effHeight:we,effClassName:ye,effAriaLabel:$e,effUnit:ze,effNarrationContext:at,effShowZones:be,effShowPoints:_e,effHighlightOutOfControl:Te,effVisualsScenario:Ue,effVisualsEngineSettings:Qe,effSource:ln,effAlwaysShowZeroY:O,effAlwaysShowHundredY:V,effPercentScale:G,effGradientSequences:J,effSequenceTransition:A,effProcessLineWidth:X,effTrendVisualMode:te,effShowTrendGatingExplanation:re,effEnableNeutralNoJudgement:Z,effEnableRules:se,effShowPartitionMarkers:Et,effShowTrendStartMarkers:Ft,effShowFirstFavourableCrossMarkers:st,effShowTrendBridgeOverlay:ft,effShowSignalsInspector:Jn,effOnSignalFocus:lo,effShowWarningsPanel:Or,effWarningsFilter:Fa,effShowIcons:Rr,effShowEmbeddedIcon:xi,effEmbeddedIconVariant:$a,effEmbeddedIconRunLength:Hr,effShowFocusIndicator:zr}}function fw(e,t){if(!e?.length||t.chartType!==Ht.XmR)return null;const n=Math.max(2,Math.floor(t.shiftLength??6)),r=[];for(let p=0;p<e.length;p++){const y=e[p],h=y.value;y?.ghost||typeof h=="number"&&Number.isFinite(h)&&r.push({idx:p,value:h})}if(r.length<n*2)return null;let i=0,a=0;for(let p=1;p<r.length;p++)i+=Math.abs(r[p].value-r[p-1].value),a++;if(a===0)return null;const l=i/a*(2.66/3);if(!Number.isFinite(l)||l<=0)return null;const u=Math.max(0,t.deltaSigma??.5),c=t.metricImprovement===Re.Up,d=t.metricImprovement===Re.Down,f=(()=>{for(let p=e.length-1;p>=0;p--)if(e[p]?.baseline)return p;return-1})();function m(p,y){let h=0,g=0;for(let b=p;b<y;b++)h+=r[b].value,g++;return g?h/g:NaN}for(let p=n;p<=r.length-n;p++){const y=m(p-n,p),h=m(p,p+n);if(!Number.isFinite(y)||!Number.isFinite(h))continue;const g=h-y,b=g/l;let w=!1,T=!1;if(c?(w=b>=u,T=!0):d?(w=-b>=u,T=!1):(w=Math.abs(b)>=u,T=g>0),!w)continue;const S=N=>T?N>y:N<y;let v=!0;for(let N=p;N<p+n;N++)if(!S(r[N].value)){v=!1;break}if(!v)continue;const j=r[p].idx;if(!(t.minGap&&f>=0&&j-f<t.minGap))return j}return null}function hw(e,t){const n=fw(e,t);return n==null?e.slice():e.map((r,i)=>i===n?{...r,baseline:!0}:r)}let mw=0;const fh=({data:e,ariaLabel:t="SPC chart",height:n=260,showZones:r=!0,showPoints:i=!0,announceFocus:a=!1,className:s,unit:l,highlightOutOfControl:u=!0,chartType:c=Dt.XmR,metricImprovement:d=Be.Neither,enableRules:f=!0,showIcons:m=!1,showEmbeddedIcon:p=!0,embeddedIconVariant:y=ar.Classic,embeddedIconRunLength:h,targets:g,baselines:b,ghosts:w,settings:T,narrationContext:S,gradientSequences:v=!1,sequenceTransition:j=li.Slope,processLineWidth:N=2,showWarningsPanel:M=!1,warningsFilter:_,enableNeutralNoJudgement:P=!0,showTrendGatingExplanation:k=!0,trendVisualMode:C=Ml.Ungated,disableTrendSideGating:L,source:D,alwaysShowZeroY:F=!0,alwaysShowHundredY:I=!1,percentScale:$=!1,showPartitionMarkers:ee=!1,showTrendStartMarkers:Y=!1,showFirstFavourableCrossMarkers:H=!1,showTrendBridgeOverlay:U=!1,showSignalsInspector:z=!1,onSignalFocus:ie,visualsScenario:W=Jf.None,showFocusIndicator:le=!0,visualsEngineSettings:je,ui:de,input:fe,engine:Q,container:ae,a11y:he,visualsEngine:q,meta:me})=>{const ce=K.useCallback(Ne=>String(Ne).replace(/^spc_warning_code\.?/i,"").replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(Ge=>Ge.length?Ge[0].toUpperCase()+Ge.slice(1):Ge).join(" "),[]),B=K.useCallback(Ne=>String(Ne).replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(ke=>ke.length?ke[0].toUpperCase()+ke.slice(1):ke).join(" "),[]);process.env.NODE_ENV!=="production"&&L!==void 0&&console.warn("SPCChart: 'disableTrendSideGating' prop is deprecated and ignored (trend side gating always enabled).");const{effData:R,effTargets:ne,effBaselines:pe,effGhosts:ue,effChartTypeCore:oe,effMetricImprovementCore:O,effEngineSettings:V,effAlwaysShowZeroY:G,effAlwaysShowHundredY:J,effPercentScale:A,effGradientSequences:X,effSequenceTransition:te,effProcessLineWidth:re,effTrendVisualMode:Z,effShowTrendGatingExplanation:se,effEnableNeutralNoJudgement:be,effEnableRules:_e,effShowPartitionMarkers:Te,effShowTrendStartMarkers:we,effShowFirstFavourableCrossMarkers:ye,effShowTrendBridgeOverlay:$e,effShowSignalsInspector:ze,effOnSignalFocus:at,effShowWarningsPanel:Ue,effWarningsFilter:Qe,effShowIcons:ln,effShowEmbeddedIcon:Et,effEmbeddedIconVariant:Ft,effEmbeddedIconRunLength:st,effShowFocusIndicator:ft,effHeight:Jn,effClassName:lo,effAriaLabel:Or,effUnit:Fa,effNarrationContext:Rr,effShowZones:xi,effShowPoints:$a,effHighlightOutOfControl:Hr,effVisualsScenario:zr,effVisualsEngineSettings:La,effSource:du,effEngineAutoRecalc:Ur}=dw({data:e,targets:g,baselines:b,ghosts:w,settings:T,chartType:c,metricImprovement:d,enableRules:f,gradientSequences:v,sequenceTransition:j,processLineWidth:N,showPartitionMarkers:ee,showWarningsPanel:M,warningsFilter:_,enableNeutralNoJudgement:P,showTrendGatingExplanation:k,trendVisualMode:C,alwaysShowZeroY:F,alwaysShowHundredY:I,percentScale:$,showTrendStartMarkers:Y,showFirstFavourableCrossMarkers:H,showTrendBridgeOverlay:U,showSignalsInspector:z,onSignalFocus:ie,showIcons:m,showEmbeddedIcon:p,embeddedIconVariant:y,embeddedIconRunLength:h,showFocusIndicator:le,ui:de,input:fe,engine:Q,container:ae,a11y:he,visualsEngine:q,meta:me}),cn=Or??t,mr=Jn??n,bt=lo??s,rt=Fa??l,un=Rr??S,fu=xi??r,hu=$a??i,dn=Hr??u,co=zr??W,pr=La??je,wi=du??D,gr=K.useMemo(()=>R.map((Ne,ke)=>({x:Ne.x,value:Ne.y,target:ne?.[ke]??void 0,baseline:pe?.[ke]??void 0,ghost:ue?.[ke]??void 0})),[R,ne,pe,ue]),$t=K.useMemo(()=>{try{const Ne=Ur;return Ne?.enabled?hw(gr,{chartType:oe,metricImprovement:O,shiftLength:Ne.shiftLength,deltaSigma:Ne.deltaSigma,minGap:Ne.minGap}):gr}catch{return gr}},[gr,Ur,oe,O]),Aa=K.useMemo(()=>{try{const Ne=V?.minimumPointsPartition??V?.minimumPoints,ke={};typeof Ne=="number"&&!isNaN(Ne)&&(ke.minimumPoints=Ne,$t.filter(Ae=>!Ae.ghost&&typeof Ae.value=="number").length>=Ne&&(ke.chartLevelEligibility=!0)),V?.enableFourOfFiveRule!=null&&(ke.enableFourOfFiveRule=!!V.enableFourOfFiveRule),pr&&Object.assign(ke,pr);const Ge=tt=>{switch(tt){case Dt.XmR:return Ht.XmR;case Dt.T:return Ht.T;case Dt.G:return Ht.G;default:return Ht.XmR}},ht=tt=>{switch(tt){case Be.Up:return Re.Up;case Be.Down:return Re.Down;default:return Re.Neither}},Me={chartType:Ge(oe),metricImprovement:ht(O),data:$t,settings:Object.keys(ke).length?ke:void 0},{visuals:bn}=E1(Me,co,{trendVisualMode:Z===Ml.Ungated?si.Ungated:si.Gated,enableNeutralNoJudgement:be});return bn||[]}catch{return[]}},[$t,oe,O,Z,be,V,co,pr]),_t=K.useMemo(()=>{try{const Ne=V?.minimumPointsPartition??V?.minimumPoints,ke={};typeof Ne=="number"&&!isNaN(Ne)&&(ke.minimumPoints=Ne,$t.filter(hn=>!hn.ghost&&typeof hn.value=="number").length>=Ne&&(ke.chartLevelEligibility=!0)),V?.enableFourOfFiveRule!=null&&(ke.enableFourOfFiveRule=!!V.enableFourOfFiveRule),pr&&Object.assign(ke,pr);const Ge=Ae=>{switch(Ae){case Dt.XmR:return Ht.XmR;case Dt.T:return Ht.T;case Dt.G:return Ht.G;default:return Ht.XmR}},ht=Ae=>{switch(Ae){case Be.Up:return Re.Up;case Be.Down:return Re.Down;default:return Re.Neither}},Me={chartType:Ge(oe),metricImprovement:ht(O),data:$t,settings:Object.keys(ke).length?ke:void 0},{rows:bn}=uw(Me),tt=Ae=>{switch(Ae){case Oe.ImprovementHigh:case Oe.ImprovementLow:return Pe.Improvement;case Oe.ConcernHigh:case Oe.ConcernLow:return Pe.Concern;case Oe.NeitherHigh:case Oe.NeitherLow:return Pe.Neither;case Oe.CommonCause:default:return Pe.Neither}};return bn.map((Ae,hn)=>({data:{value:Ae.value,ghost:!!Ae.ghost},partition:{id:Ae.partitionId},limits:{mean:Ae.mean,ucl:Ae.upperProcessLimit,lcl:Ae.lowerProcessLimit,oneSigma:{upper:Ae.upperOneSigma,lower:Ae.lowerOneSigma},twoSigma:{upper:Ae.upperTwoSigma,lower:Ae.lowerTwoSigma}},rules:{singlePoint:{up:!!Ae.singlePointUp,down:!!Ae.singlePointDown},twoOfThree:{up:!!Ae.twoSigmaUp,down:!!Ae.twoSigmaDown},fourOfFive:{up:!!Ae.fourOfFiveUp,down:!!Ae.fourOfFiveDown},shift:{up:!!Ae.shiftUp,down:!!Ae.shiftDown},trend:{up:!!Ae.trendUp,down:!!Ae.trendDown}},classification:{variation:tt(Ae.variationIcon),neutralSpecialCauseValue:Ae.variationIcon===Oe.NeitherHigh||Ae.variationIcon===Oe.NeitherLow?Ae.specialCauseImprovementValue??Ae.specialCauseConcernValue??1:null,assurance:void 0},target:$t[hn]?.target??null}))}catch{return null}},[$t,oe,O,V,pr])||null,Zn=(_t||[]).slice().reverse().find(Ne=>Ne.limits.mean!=null),ge=Zn?.limits.mean??null,De=K.useMemo(()=>{const Ne=[];try{const ke=_t,Ge=V?.minimumPoints??13,ht=V?.minimumPointsPartition??12;if(ke&&ke.length){const Me=ke.filter(tt=>!tt.data.ghost&&tt.data.value!=null).length;Me<Ge&&Ne.push({code:ks.InsufficientPointsGlobal,severity:Cn.Warning,category:Cs.Data,message:"Not enough non-ghost points to compute stable limits/icons.",context:{nonGhostCount:Me,minimumPoints:Ge}});const bn=new Map;for(const tt of ke){const Ae=tt.partition.id??0,hn=bn.get(Ae)||{size:0,nonGhost:0};hn.size+=1,!tt.data.ghost&&tt.data.value!=null&&(hn.nonGhost+=1),bn.set(Ae,hn)}for(const[tt,Ae]of bn)Ae.nonGhost>0&&Ae.nonGhost<ht&&Ne.push({code:ks.InsufficientPointsPartition,severity:Cn.Warning,category:Cs.Partition,message:"A partition/baseline segment has too few points for recommended stability.",context:{partitionId:tt,nonGhostCount:Ae.nonGhost,minimumPointsPartition:ht}})}}catch{}return Ne},[_t,V?.minimumPoints,V?.minimumPointsPartition]),ve=K.useMemo(()=>De.length?Qe?De.filter(Ne=>!(Qe.severities&&Ne.severity&&!Qe.severities.includes(Ne.severity)||Qe.categories&&Ne.category&&!Qe.categories.includes(Ne.category)||Qe.codes&&!Qe.codes.includes(Ne.code))):De:[],[De,Qe]),[Le,et]=K.useState(""),We=K.useRef("");K.useEffect(()=>{if(!Ue){We.current!==""&&(We.current="",et(""));return}const Ne=ve.length;if(!Ne){const Me="Diagnostics: no warnings.";Me!==We.current&&(We.current=Me,et(Me));return}const ke={error:ve.filter(Me=>Me.severity===Cn.Error).length,warning:ve.filter(Me=>Me.severity===Cn.Warning).length,info:ve.filter(Me=>Me.severity===Cn.Info).length},Ge=[];ke.error&&Ge.push(`${ke.error} error${ke.error===1?"":"s"}`),ke.warning&&Ge.push(`${ke.warning} warning${ke.warning===1?"":"s"}`),ke.info&&Ge.push(`${ke.info} info`);const ht=`Diagnostics updated: ${Ne} warning${Ne===1?"":"s"} (${Ge.join(", ")}).`;ht!==We.current&&(We.current=ht,et(ht))},[Ue,ve]);const qe=Zn?.limits.ucl??null,On=Zn?.limits.lcl??null,Qt=Zn?.limits.oneSigma.upper??null,br=Zn?.limits.oneSigma.lower??null,Ee=Zn?.limits.twoSigma.upper??null,Xe=Zn?.limits.twoSigma.lower??null,fn=ge!=null&&Qt!=null?Math.abs(Qt-ge):0,Ea=K.useMemo(()=>[{id:"process",data:R,color:"#A6A6A6"}],[R]),gn=K.useMemo(()=>{if(A){const Me=R.map(Ae=>Ae.y),bn=Math.max(100,...Me),tt=Math.min(0,...Me);return[tt<0?tt:0,bn>100?bn:100]}const ke=[...R.map(Me=>Me.y)];if([ge,qe,On,Qt,br,Ee,Xe].forEach(Me=>{Me!=null&&ke.push(Me)}),ne&&ne.forEach(Me=>{typeof Me=="number"&&!isNaN(Me)&&ke.push(Me)}),!ke.length)return;let Ge=Math.min(...ke),ht=Math.max(...ke);return G&&(Ge=Math.min(0,Ge)),J&&(ht=Math.max(100,ht)),[Ge,ht]},[R,ge,qe,On,Qt,br,Ee,Xe,ne,G,J,A]),TC=K.useMemo(()=>{try{if(!gn||gn.length<2)return!1;const Ne=Math.min(gn[0],gn[1]),ke=Math.max(gn[0],gn[1]);return!(0>=Ne&&0<=ke)}catch{return!1}},[gn])?128+40:0,NC=K.useMemo(()=>{const Ne=ke=>{const Ge=ke.filter(Me=>typeof Me=="number"&&!isNaN(Me));if(!Ge.length)return null;const ht=Ge[0];return Ge.every(Me=>Me===ht)?ht:null};if(_t&&_t.length){const ke=Ne(_t.map(Ge=>Ge.target));if(ke!=null)return ke}return ne&&ne.length?Ne(ne):null},[_t,ne]),jC=K.useMemo(()=>{const Ne=R.map(ke=>ke.x);return uh({values:R.map(ke=>ke.y),dates:Ne,providedUnit:rt||un?.measureUnit,percentHeuristic:"0-1",autoValue:!1,autoDelta:!1,autoMetadata:!1})},[R,rt,un?.measureUnit]),ho=rt??un?.measureUnit??jC.unit,DC=K.useMemo(()=>ho?{...un||{},measureUnit:ho}:un,[un,ho]),MC=K.useMemo(()=>{if(!_t)return[];const Ne=[];for(let ke=1;ke<_t.length;ke++)_t[ke].partition.id!==_t[ke-1].partition.id&&Ne.push(ke);return Ne},[_t]),PC=K.useMemo(()=>{if(!Et||!_t?.length)return null;const Ne=_t,ke=V?.minimumPoints??13;if(Ne.filter(en=>!en.data.ghost&&en.data.value!=null).length<ke)return null;let ht=-1;for(let en=Ne.length-1;en>=0;en--){const Qn=Ne[en];if(Qn&&Qn.data.value!=null&&!Qn.data.ghost){ht=en;break}}if(ht===-1)return null;const Me=Ne[ht],tt=Me.classification?.variation,Ae=Me.classification?.assurance,hn=tt===Pe.Neither&&!!Me.classification?.neutralSpecialCauseValue,IC=Ae===ut.Pass?Tr.Pass:Ae===ut.Fail?Tr.Fail:Tr.Uncertain;let Bt;if(tt===Pe.Suppressed){const en=!!Me.rules.singlePoint.up,Qn=!!Me.rules.singlePoint.down;O===Be.Up?en?Bt=Fe.Higher:Qn&&(Bt=Fe.Lower):O===Be.Down?Qn?Bt=Fe.Lower:en&&(Bt=Fe.Higher):Bt=Fe.Higher}else if(tt===Pe.Neither&&hn){const en=Me.rules.singlePoint.up||Me.rules.twoOfThree.up||Me.rules.fourOfFive.up||Me.rules.shift.up||Me.rules.trend.up,Qn=Me.rules.singlePoint.down||Me.rules.twoOfThree.down||Me.rules.fourOfFive.down||Me.rules.shift.down||Me.rules.trend.down;en&&!Qn?Bt=Fe.Higher:Qn&&!en?Bt=Fe.Lower:Bt=Fe.Higher}let Ba;O===Be.Up?Ba=ot.HigherIsBetter:O===Be.Down?Ba=ot.LowerIsBetter:Ba=ot.ContextDependent;const Si=80,db=Me.rules.singlePoint.up||Me.rules.twoOfThree.up||Me.rules.fourOfFive.up||Me.rules.shift.up||Me.rules.trend.up,fb=Me.rules.singlePoint.down||Me.rules.twoOfThree.down||Me.rules.fourOfFive.down||Me.rules.shift.down||Me.rules.trend.down;let Ci=Oe.CommonCause;return tt===Pe.Improvement?Ci=Oe.ImprovementHigh:tt===Pe.Concern?Ci=Oe.ConcernHigh:tt===Pe.Neither&&(hn?Bt===Fe.Lower||fb&&!db?Ci=Oe.NeitherLow:Ci=Oe.NeitherHigh:Ci=Oe.CommonCause),o.jsxs("div",{style:{display:"flex",gap:12,marginRight:16},children:[o.jsx("div",{className:"fdp-spc-chart__embedded-icon","data-variation":String(tt),"data-trend-raw":Bt?String(Bt):"none","data-trend":Bt?String(Bt):"none","data-polarity":String(Ba??"unknown"),style:{width:Si,height:Si},children:o.jsx(Nl,{dropShadow:!1,data:{variationIcon:Ci,improvementDirection:O,polarity:Ba,specialCauseNeutral:hn,highSideSignal:db,lowSideSignal:fb,...Bt?{trend:Bt}:{}},letterMode:O===Be.Neither?Vi.Direction:Vi.Polarity,size:Si,variant:Ft,runLength:Ft===ar.TriangleWithRun?st:void 0})}),o.jsx("div",{className:"fdp-spc-chart__embedded-assurance-icon","data-assurance":String(Ae),style:{width:Si,height:Si},children:o.jsx(Dl,{status:IC,size:Si,dropShadow:!1})})]},`embedded-icon-${ht}`)},[Et,_t,O,V?.minimumPoints,Ft,st]);return o.jsxs("div",{className:bt?`fdp-spc-chart-wrapper ${bt}`:"fdp-spc-chart-wrapper",children:[Et&&o.jsx("div",{className:"fdp-spc-chart__top-row",style:{display:"flex",justifyContent:"flex-end",marginBottom:4},children:PC}),o.jsx(vf,{height:mr,ariaLabel:cn,margin:{bottom:48,left:56,right:16,top:12},className:void 0,children:o.jsx(_f,{series:Ea,yDomain:gn,yBottomGapPx:TC,children:o.jsx(pw,{series:Ea,showPoints:hu,announceFocus:a,limits:{mean:ge,ucl:qe,lcl:On,sigma:fn,onePos:Qt,oneNeg:br,twoPos:Ee,twoNeg:Xe},showZones:fu,highlightOutOfControl:dn,engineRows:_t,uniformTarget:NC,visualCategories:Aa,enableRules:_e,showIcons:ln,narrationContext:DC,gradientSequences:X,sequenceTransition:te,processLineWidth:re,effectiveUnit:ho,partitionMarkers:Te?MC:[],ariaLabel:cn,enableNeutralNoJudgement:be,showTrendGatingExplanation:se,metricImprovement:O,showTrendStartMarkers:we,showFirstFavourableCrossMarkers:ye,showTrendBridgeOverlay:$e,showSignalsInspector:ze,onSignalFocus:at,showFocusIndicator:ft})})}),wi&&o.jsx("div",{className:"fdp-spc-chart__source","aria-label":"Chart data source",children:typeof wi=="string"?o.jsxs("small",{children:["Source: ",wi]}):wi}),Ue&&Le&&o.jsx("div",{"data-testid":"spc-diagnostics-live","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:0,overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",border:0},children:Le}),Ue&&ve.length>0&&o.jsxs("div",{className:"fdp-spc-chart__warnings",role:"region","aria-label":"SPC diagnostics",children:[o.jsx("p",{className:"fdp-spc-chart__warnings-heading",children:"Diagnostics"}),o.jsx(_n,{firstCellIsHeader:!1,panel:!1,responsive:!1,head:[{text:"Severity"},{text:"Category"},{text:"Code"},{text:"Details"}],rows:ve.map(Ne=>{let ke="grey";return Ne.severity===Cn.Error?ke="red":Ne.severity===Cn.Warning?ke="orange":Ne.severity===Cn.Info&&(ke="blue"),[{node:o.jsx(Ye,{color:ke,text:(Ne.severity?String(Ne.severity):"Info").replace(/^[a-z]/,Ge=>Ge.toUpperCase())}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--severity"},{node:Ne.category?o.jsx(Ye,{color:"purple",text:B(Ne.category)}):o.jsx("span",{className:"fdp-spc-chart__warning-empty",children:"â€“"}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--category"},{node:o.jsx(Ye,{color:"grey",text:ce(Ne.code)}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--code"},{node:o.jsxs("div",{className:"fdp-spc-chart__warning-message",children:[o.jsx("span",{children:Ne.message}),Ne.context&&Object.keys(Ne.context).length>0&&o.jsxs("details",{className:"fdp-spc-chart__warning-context",style:{marginTop:4},children:[o.jsx("summary",{children:"context"}),o.jsx("pre",{children:JSON.stringify(Ne.context,null,2)})]})]}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--message"}]}),classes:"fdp-spc-chart__warnings-table-wrapper",tableClasses:"fdp-spc-chart__warnings-table"})]})]})},pw=({series:e,showPoints:t,announceFocus:n,limits:r,showZones:i,highlightOutOfControl:a,engineRows:s,enableRules:l,showIcons:u,narrationContext:c,gradientSequences:d,sequenceTransition:f,processLineWidth:m,effectiveUnit:p,partitionMarkers:y,ariaLabel:h,metricImprovement:g,enableNeutralNoJudgement:b=!0,showTrendGatingExplanation:w=!0,showTrendStartMarkers:T=!1,showFirstFavourableCrossMarkers:S=!1,showTrendBridgeOverlay:v=!1,showSignalsInspector:j=!1,onSignalFocus:N,visualCategories:M,uniformTarget:_,showFocusIndicator:P=!1})=>{const k=Cr(),C=rr();if(!k)return null;const{xScale:L,yScale:D}=k,F=K.useRef("spc-seq-"+ ++mw),I=Wn(),$=e[0]?.data||[],ee=K.useMemo(()=>{if(!r.ucl&&!r.lcl)return new Set;const B=new Set;return $.forEach((R,ne)=>{typeof r.ucl=="number"&&R.y>r.ucl&&B.add(ne),typeof r.lcl=="number"&&R.y<r.lcl&&B.add(ne)}),B},[r.ucl,r.lcl,$]),Y=K.useMemo(()=>{if(!s||!s.length)return null;const B=[];return s.forEach((R,ne)=>{const pe=R.classification.variation===Pe.Concern||R.classification.variation===Pe.Improvement||!!R.classification.neutralSpecialCauseValue,ue=!!R.rules.singlePoint.up||!!R.rules.twoOfThree.up||!!R.rules.fourOfFive.up||!!R.rules.shift.up||!!R.rules.trend.up,oe=!!R.rules.singlePoint.down||!!R.rules.twoOfThree.down||!!R.rules.fourOfFive.down||!!R.rules.shift.down||!!R.rules.trend.down;B[ne]={variation:R.classification.variation,assurance:R.classification.assurance,special:pe,concern:R.classification.variation===Pe.Concern,improvement:R.classification.variation===Pe.Improvement,trendUp:!!R.rules.trend.up,trendDown:!!R.rules.trend.down,upAny:ue,downAny:oe,neutralSpecial:!!R.classification.neutralSpecialCauseValue,shiftUp:!!R.rules.shift.up,shiftDown:!!R.rules.shift.down,twoOfThreeUp:!!R.rules.twoOfThree.up,twoOfThreeDown:!!R.rules.twoOfThree.down,fourOfFiveUp:!!R.rules.fourOfFive.up,fourOfFiveDown:!!R.rules.fourOfFive.down,partitionId:R.partition.id??null}}),B},[s]),H=K.useMemo(()=>(M||[]).map(B=>B===Ct.Improvement?vt.Improvement:B===Ct.Concern?vt.Concern:B===Ct.NoJudgement?vt.NoJudgement:vt.Common),[M]),U=K.useMemo(()=>!d||!H.length?[]:lw(H,!0),[d,H,h]),z=K.useMemo(()=>$.map(B=>L(B.x instanceof Date?B.x:new Date(B.x))),[$,L]),ie=L.range()[1],W=K.useMemo(()=>{if(!s||!s.length)return null;let B=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY;if(s.forEach((G,J)=>{G.rules.trend.up&&(B=Math.min(B,J)),G.rules.trend.down&&(R=Math.min(R,J))}),!Number.isFinite(B)&&!Number.isFinite(R))return null;const ne=B<=R,pe=ne?wn.Up:wn.Down,ue=ne?B:R,oe=G=>g==null||g===Be.Neither||G==null||typeof G.data.value!="number"||typeof G.limits.mean!="number"?!1:pe===wn.Up?g===Be.Up?G.data.value>G.limits.mean:G.data.value<G.limits.mean:g===Be.Down?G.data.value<G.limits.mean:G.data.value>G.limits.mean;let O=null;for(let G=ue;G<s.length;G++){const J=s[G];if(!(ne?!!J.rules.trend.up:!!J.rules.trend.down))break;if(oe(J)){O=G;break}}let V=!1;if(O!=null){let G=0;for(let J=O;J<s.length;J++){const A=s[J];if(!(ne?!!A.rules.trend.up:!!A.rules.trend.down))break;oe(A)&&G++}V=G>=2}return{direction:pe,detectedAt:ue,firstFavourableCrossAt:O,persistedAcrossMean:V}},[s,g]),le=K.useMemo(()=>{if(!s||!s.length)return null;const B=R=>{const ne=[];let pe=null,ue=null;for(let oe=0;oe<s.length;oe++){const O=s[oe],V=R(O),G=typeof V=="number"&&!isNaN(V)?V:null;if(G==null){pe!==null&&ue!=null&&(ne.push({x1:z[pe],x2:z[oe-1],y:D(ue)}),pe=null,ue=null);continue}if(pe===null){pe=oe,ue=G;continue}ue!=null&&Math.abs(G-ue)<=1e-9||(ue!=null&&ne.push({x1:z[pe],x2:z[oe-1],y:D(ue)}),pe=oe,ue=G)}return pe!==null&&ue!=null&&ne.push({x1:z[pe],x2:z[s.length-1],y:D(ue)}),ne};return{mean:B(R=>R.limits.mean??null),ucl:B(R=>R.limits.ucl??null),lcl:B(R=>R.limits.lcl??null),onePos:B(R=>R.limits.oneSigma.upper??null),oneNeg:B(R=>R.limits.oneSigma.lower??null),twoPos:B(R=>R.limits.twoSigma.upper??null),twoNeg:B(R=>R.limits.twoSigma.lower??null)}},[s,z,D]),je=K.useMemo(()=>U.length?o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:`${F.current}-grad-common`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.28}),o.jsx("stop",{offset:"70%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.12}),o.jsx("stop",{offset:"100%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.045})]}),U.map((B,R)=>{const ne=`${F.current}-grad-${R}`;let pe,ue=.28,oe=.12,O=.045;switch(B.category){case vt.Concern:pe="var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",ue=.28,oe=.12,O=.045;break;case vt.Improvement:pe="var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",ue=.26,oe=.11,O=.045;break;case vt.NoJudgement:pe="var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",ue=.26,oe=.11,O=.045;break;default:pe="var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)"}return o.jsxs("linearGradient",{id:ne,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:pe,stopOpacity:ue}),o.jsx("stop",{offset:"70%",stopColor:pe,stopOpacity:oe}),o.jsx("stop",{offset:"100%",stopColor:pe,stopOpacity:O})]},ne)})]}):null,[U]),de=K.useMemo(()=>{if(!U.length)return null;const[B]=D.domain(),R=D(B),ne=U.map((pe,ue)=>{const{start:oe,end:O,category:V}=pe;if(oe<0||O>=z.length||oe>O)return null;const G=z[oe],J=z[O];let A="";if(V===vt.Common){const X=ue>0?U[ue-1]:null,te=ue<U.length-1?U[ue+1]:null,re=X?z[X.end]:0,Z=X?D($[X.end].y):R,se=te?z[te.start]:ie,be=te?D($[te.start].y):R;A=`M ${re} ${R}`,A+=` L ${re} ${Z}`;for(let _e=oe;_e<=O;_e++)A+=` L ${z[_e]} ${D($[_e].y)}`;A+=` L ${se} ${be}`,A+=` L ${se} ${R} Z`}else{const X=ue>0?U[ue-1]:null,te=ue<U.length-1?U[ue+1]:null,re=X&&X.category!==vt.Common,Z=te&&te.category!==vt.Common,se=D($[oe].y),be=D($[O].y);let _e=G,Te=J;if(re){const we=z[X.end],ye=D($[X.end].y),$e=$[oe].y-$[X.end].y;f===li.Slope&&$e>0?(A=`M ${we} ${ye} L ${G} ${se}`,_e=we):(A=`M ${G} ${R} L ${G} ${se}`,_e=G)}else A=`M ${G} ${R} L ${G} ${se}`;for(let we=oe+1;we<=O;we++)A+=` L ${z[we]} ${D($[we].y)}`;if(A+=` L ${J} ${be}`,Z){const we=z[te.start],ye=D($[te.start].y),$e=$[te.start].y-$[O].y;(f===li.Slope&&$e<=0||f===li.Extend)&&(A+=` L ${we} ${ye}`,Te=we)}if(A+=` L ${Te} ${R}`,A+=` L ${_e} ${R} Z`,f===li.Neutral&&re){const we=z[X.end],ye=D($[X.end].y),$e=o.jsx("path",{d:`M ${we} ${R} L ${we} ${ye} L ${G} ${se} L ${G} ${R} Z`,fill:`url(#${F.current}-grad-common)`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-wedge-${ue}`);return o.jsxs("g",{children:[$e,o.jsx("path",{d:A,fill:`url(#${F.current}-grad-${ue})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${ue}`)]},`seq-group-${ue}`)}}return o.jsx("path",{d:A,fill:`url(#${F.current}-grad-${ue})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${ue}`)}).filter(Boolean);return o.jsx("g",{className:"fdp-spc__sequence-bgs",children:ne})},[U,z,ie,D,$,f]),fe=K.useMemo(()=>{if(!c?.timeframe&&$.length>=2){const B=$.map(O=>O.x instanceof Date?O.x:new Date(O.x)),R=new Date(Math.min(...B.map(O=>O.getTime()))),ne=new Date(Math.max(...B.map(O=>O.getTime()))),pe=Math.round((ne.getTime()-R.getTime())/864e5)||0;if(pe<14)return`The chart shows a timeframe of ${pe+1} days`;const ue=Math.round(pe/7);return ue<20?`The chart shows a timeframe of ${ue} weeks`:`The chart shows a timeframe of ${(ne.getFullYear()-R.getFullYear())*12+(ne.getMonth()-R.getMonth())+1} months`}if(c?.timeframe)return`The chart shows a timeframe of ${c.timeframe}`},[c?.timeframe,$]),Q=B=>{const R=B%10,ne=B%100;return R===1&&ne!==11?`${B}st`:R===2&&ne!==12?`${B}nd`:R===3&&ne!==13?`${B}rd`:`${B}th`},ae=B=>`${Q(B.getDate())} ${B.toLocaleString("en-GB",{month:"long"})}, ${B.getFullYear()}`,he=B=>({specialCauseSinglePointUp:!!B?.rules.singlePoint.up,specialCauseSinglePointDown:!!B?.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!B?.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!B?.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!B?.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!B?.rules.fourOfFive.down,specialCauseShiftUp:!!B?.rules.shift.up,specialCauseShiftDown:!!B?.rules.shift.down,specialCauseTrendUp:!!B?.rules.trend.up,specialCauseTrendDown:!!B?.rules.trend.down}),q=K.useCallback(({index:B,x:R,y:ne})=>{const pe=s?.[B],ue=R instanceof Date?R:new Date(R),oe=ae(ue),O=c?.measureUnit?` ${c.measureUnit}`:"",V=c?.measureName?` ${c.measureName}`:"";if(!pe)return`General summary is: ${fe?fe+". ":""}Point ${B+1}, ${oe}, ${ne}${O}${V}`;const G=ws(pe.classification?.variation)||"Variation",J=xs(he(pe)),A=J.length?` Rules: ${[...new Set(J.map(te=>ni[te].narration))].join("; ")}.`:" No special cause rules.",X=[];return c?.measureName&&X.push(`Measure: ${c.measureName}.`),c?.datasetContext&&X.push(`${c.datasetContext}.`),c?.organisation&&X.push(`Organisation: ${c.organisation}.`),c?.additionalNote&&X.push(c.additionalNote),["General summary is:",...X,`Point ${B+1} recorded on `,oe+",",`with a value of ${ne} ${O}${V}`,G+".",A].join(" ").replace(/\s+/g," ").trim()},[s,c,fe]),me=K.useCallback((B,R)=>s?.[B]?q({index:B,seriesId:"process",x:R.x instanceof Date?R.x:new Date(R.x),y:R.y}).replace(/^General summary is:\s*/,"").replace(/^Point \d+\s*/,""):void 0,[s,q]),ce=K.useMemo(()=>{try{const B=typeof D?.domain=="function"?D.domain():void 0;if(!B||!Array.isArray(B)||B.length<2)return!1;const R=Math.min(B[0],B[1]),ne=Math.max(B[0],B[1]);return!(0>=R&&0<=ne)}catch{return!1}},[D]);return o.jsx(Mf,{children:o.jsxs("div",{className:"fdp-spc-chart",role:"group","aria-label":"Statistical process control chart","aria-roledescription":"chart",children:[o.jsx("svg",{width:k.xScale.range()[1]+56+16,height:k.yScale.range()[0]+12+48,role:"img",children:o.jsxs("g",{transform:"translate(56,12)",children:[o.jsx(cl,{type:"x"}),o.jsx(cl,{type:"y",showZeroAxisBreak:ce,zeroAxisBreakGapPx:32,zeroAxisBreakTickBufferPx:40}),o.jsx(xf,{axis:"y",showZeroAxisBreak:ce,zeroAxisBreakGapPx:32,zeroAxisBreakTickBufferPx:40}),je,de,y.map((B,R)=>{const ne=$[B];if(!ne)return null;const pe=L(ne.x instanceof Date?ne.x:new Date(ne.x));return o.jsx("line",{x1:pe,x2:pe,y1:0,y2:D.range()[0],stroke:"#555",strokeDasharray:"4 4",strokeWidth:1,"aria-hidden":"true",className:"fdp-spc__partition-marker"},`partition-marker-${R}`)}),le?.mean.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__cl-group",children:[le.mean.map((B,R)=>o.jsx("line",{className:"fdp-spc__cl",x1:B.x1,x2:B.x2,y1:B.y,y2:B.y},`mean-${R}`)),le.mean.map((B,R)=>{if(R===le.mean.length-1)return null;const ne=le.mean[R+1];if(!ne||B.y===ne.y)return null;const ue=Math.max(4,ne.x1-B.x2||0)*.5,oe=`M ${B.x2},${B.y} C ${B.x2+ue},${B.y} ${ne.x1-ue},${ne.y} ${ne.x1},${ne.y}`;return o.jsx("path",{className:"fdp-spc__cl fdp-spc__cl-join",d:oe,fill:"none"},`mean-join-${R}`)})]}):null,_!=null&&o.jsx(o.Fragment,{}),le?.ucl.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--ucl",children:[le.ucl.map((B,R)=>o.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--ucl",x1:B.x1,x2:B.x2,y1:B.y,y2:B.y,strokeWidth:2},`ucl-${R}`)),le.ucl.map((B,R)=>{if(R===le.ucl.length-1)return null;const ne=le.ucl[R+1];if(!ne||B.y===ne.y)return null;const ue=Math.max(4,ne.x1-B.x2||0)*.5,oe=`M ${B.x2},${B.y} C ${B.x2+ue},${B.y} ${ne.x1-ue},${ne.y} ${ne.x1},${ne.y}`;return o.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--ucl fdp-spc__limit-join",d:oe,fill:"none",strokeWidth:2},`ucl-join-${R}`)})]}):null,le?.lcl.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--lcl",children:[le.lcl.map((B,R)=>o.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--lcl",x1:B.x1,x2:B.x2,y1:B.y,y2:B.y,strokeWidth:2},`lcl-${R}`)),le.lcl.map((B,R)=>{if(R===le.lcl.length-1)return null;const ne=le.lcl[R+1];if(!ne||B.y===ne.y)return null;const ue=Math.max(4,ne.x1-B.x2||0)*.5,oe=`M ${B.x2},${B.y} C ${B.x2+ue},${B.y} ${ne.x1-ue},${ne.y} ${ne.x1},${ne.y}`;return o.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--lcl fdp-spc__limit-join",d:oe,fill:"none",strokeWidth:2},`lcl-join-${R}`)})]}):null,_!=null&&o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__target-group",children:[o.jsx("line",{className:"fdp-spc__target","data-testid":"spc-target-line",x1:0,x2:L.range()[1],y1:D(_),y2:D(_),strokeWidth:2.5}),o.jsxs("text",{"data-testid":"spc-target-label",x:L.range()[0]-7,y:D(_)-5,textAnchor:"start",className:"fdp-spc__target-label",fontSize:12,children:["Target ",_," ",p||c?.measureUnit||""]})]}),i&&le&&le.mean.length>0&&o.jsxs(o.Fragment,{children:[le.onePos.map((B,R)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos1",x1:B.x1,x2:B.x2,y1:B.y,y2:B.y,"aria-hidden":"true",strokeWidth:2},`onePos-${R}`)),le.oneNeg.map((B,R)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg1",x1:B.x1,x2:B.x2,y1:B.y,y2:B.y,"aria-hidden":"true",strokeWidth:2},`oneNeg-${R}`)),le.twoPos.map((B,R)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos2",x1:B.x1,x2:B.x2,y1:B.y,y2:B.y,"aria-hidden":"true",strokeWidth:2},`twoPos-${R}`)),le.twoNeg.map((B,R)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg2",x1:B.x1,x2:B.x2,y1:B.y,y2:B.y,"aria-hidden":"true",strokeWidth:2},`twoNeg-${R}`))]}),W&&(T||S||v)&&(()=>{const B=W.detectedAt,R=W.firstFavourableCrossAt,ne=$[B]?L($[B].x instanceof Date?$[B].x:new Date($[B].x)):null,pe=$[B]?D($[B].y):null,ue=R!=null&&$[R]?L($[R].x instanceof Date?$[R].x:new Date($[R].x)):null,oe=R!=null&&$[R]?D($[R].y):null;return o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__trend-overlays",children:[v&&ne!=null&&pe!=null&&ue!=null&&oe!=null&&o.jsx("line",{x1:ne,y1:pe,x2:ue,y2:oe,stroke:"#888",strokeDasharray:"4 4",strokeWidth:2,children:o.jsx("title",{children:"Trend bridge: start to first favourable-side point"})}),T&&ne!=null&&pe!=null&&o.jsx("circle",{cx:ne,cy:pe,r:6,fill:"white",stroke:"#555",strokeWidth:2,children:o.jsx("title",{children:"Trend start (run reached N)"})}),S&&ue!=null&&oe!=null&&o.jsx("circle",{cx:ue,cy:oe,r:5,fill:"#555",children:o.jsx("title",{children:"First favourable-side inclusion"})})]})})(),o.jsx(Pf,{series:e[0],seriesIndex:0,palette:"categorical",showPoints:!1,focusablePoints:!1,focusIndex:-1,parseX:B=>B.x instanceof Date?B.x:new Date(B.x),smooth:!1,strokeWidth:m}),t&&$.map((B,R)=>{const ne=L(B.x instanceof Date?B.x:new Date(B.x)),pe=D(B.y),ue=ee.has(R),oe=Y?.[R],O=H[R],V=O===vt.Improvement,G=O===vt.Concern,J=O===vt.NoJudgement,A=["fdp-spc__point",ue&&a?"fdp-spc__point--ooc":null,l&&G?"fdp-spc__point--sc-concern":null,l&&V?"fdp-spc__point--sc-improvement":null,l&&b&&J?"fdp-spc__point--sc-no-judgement":null,oe?.assurance===ut.Pass?"fdp-spc__point--assurance-pass":null,oe?.assurance===ut.Fail?"fdp-spc__point--assurance-fail":null].filter(Boolean).join(" "),X=I?.focused?.index===R;return o.jsx("circle",{cx:ne,cy:pe,r:5,className:A,"data-variation":oe?.variation,"data-assurance":oe?.assurance,"aria-label":h,...X?{"aria-describedby":`spc-tooltip-${R}`}:{}},R)}),P&&j&&I?.focused&&(()=>{const B=I.focused,R=typeof B.index=="number"?B.index:-1;if(R<0||!$[R])return null;const ne=L($[R].x instanceof Date?$[R].x:new Date($[R].x)),pe=D($[R].y),ue="var(--nhs-fdp-color-primary-yellow, #ffeb3b)";return o.jsxs("g",{className:"fdp-spc__focus-indicator","aria-hidden":"true",children:[o.jsx("circle",{cx:ne,cy:pe,r:7,fill:"none",stroke:ue,strokeWidth:3}),o.jsx("circle",{cx:ne,cy:pe,r:5,fill:"#000",stroke:ue,strokeWidth:1.5}),o.jsx("circle",{cx:ne,cy:pe,r:2.5,fill:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stroke:"#fff",strokeWidth:.5})]})})(),u&&l&&Y&&$.map((B,R)=>{const ne=Y[R];if(!ne||!(ne.concern||ne.improvement))return null;const pe=L(B.x instanceof Date?B.x:new Date(B.x)),ue=D(B.y);let oe=ue-10;const O=12,V=D.range()[0]-4;oe<O&&(oe=Math.min(ue+16,V));const G=L.range()[1],J=Math.min(Math.max(pe,0),G-0);return o.jsx("text",{x:J,y:oe,textAnchor:"middle",className:`fdp-spc__icon ${ne.concern?"fdp-spc__icon--concern":"fdp-spc__icon--improvement"}`,"aria-hidden":"true",children:ne.concern?"!":"â˜…"},`icon-${R}`)}),C&&o.jsx(gw,{width:L.range()[1],height:D.range()[0]}),!j&&o.jsx(dh,{engineRows:s,limits:{mean:r.mean,sigma:r.sigma},pointDescriber:me,measureName:c?.measureName,measureUnit:c?.measureUnit,dateFormatter:B=>ae(B),enableNeutralNoJudgement:b,showTrendGatingExplanation:w})]})}),j&&o.jsx("div",{style:{marginTop:8},children:o.jsx(cw,{engineRows:s,measureName:c?.measureName,measureUnit:p||c?.measureUnit,onSignalFocus:N})}),n&&o.jsx(u1,{format:B=>q({...B,x:B.x instanceof Date?B.x:new Date(B.x)})})]})})},gw=({width:e,height:t})=>{const n=Wn();return n?o.jsx("rect",{className:"fdp-spc__interaction-layer",width:e,height:t,fill:"transparent",tabIndex:0,"aria-label":"Interactive chart area. Use arrow keys to move between points.",onMouseMove:r=>{const a=r.currentTarget.getBoundingClientRect(),s=r.clientX-a.left,l=r.clientY-a.top;n.focusNearest(s,l)},onMouseLeave:()=>n.clear(),onKeyDown:r=>{switch(r.key){case"ArrowRight":n.focusNextPoint(),r.preventDefault();break;case"ArrowLeft":n.focusPrevPoint(),r.preventDefault();break;case"ArrowDown":n.focusNextSeries(),r.preventDefault();break;case"ArrowUp":n.focusPrevSeries(),r.preventDefault();break;case"Home":n.focusFirstPoint(),r.preventDefault();break;case"End":n.focusLastPoint(),r.preventDefault();break}},style:{cursor:"crosshair"}}):null},bw=Object.freeze(Object.defineProperty({__proto__:null,AssuranceIcon:ut,BaselineSuggestionReason:nn,ChartType:Ht,Icons:Object.freeze(Object.defineProperty({__proto__:null,AssuranceResult:Tr,Direction:Fe,MetricPolarity:ot,SPCAssuranceIcon:Dl,SPCVariationIcon:Nl,VariationJudgement:Rt,VariationState:Se,getVariationColour:Bf,getVariationTrend:xl},Symbol.toStringTag,{value:"Module"})),ImprovementDirection:Re,PARITY_V26:Zf,RULE_METADATA:Ff,SPCChart:fh,SPCTooltipOverlay:dh,SpcEmbeddedIconVariant:ar,SpcVisualCategory:Ct,SpcWarningCategory:Cs,SpcWarningCode:ks,SpcWarningSeverity:Cn,VARIATION_COLOR_TOKENS:pn,VariationIcon:Oe,buildSpc:ah,buildSpcV26a:Cl,buildSpcV26aWithVisuals:kl,computeSpcVisualCategories:Sl,extractRuleIds:xs,getVariationColorHex:w1,getVariationColorToken:Ef,normaliseSpcSettings:ih,normaliseSpcSettingsV2:Kf,ruleGlossary:ni,variationLabel:ws,withParityV26:B1},Symbol.toStringTag,{value:"Module"})),hh="150ms",mh="300ms",ph="500ms",gh="cubic-bezier(0.4, 0, 1, 1)",bh="cubic-bezier(0, 0, 0.2, 1)",yh="cubic-bezier(0.4, 0, 0.2, 1)",vh="cubic-bezier(0.68, -0.55, 0.265, 1.55)",_h="background-color 300ms cubic-bezier(0, 0, 0.2, 1)",xh="box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",wh="border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",Sh="border-color 300ms cubic-bezier(0, 0, 0.2, 1)",Ch="1px",kh="2px",Th="4px",Nh="4px",jh="4px",Dh="2px",Mh="1px",Ph="0px",Ih="4px",Fh="8px",$h="12px",Pl="#d8dde0",Il="#4c6272",Fl="#d8dde0",$l="#aeb7bd",Ll="#d5281b",Al="#005eb8",El="#ffffff",Bl="#212b32",Ol="#007f3b",Rl="#330072",Hl="#7c2855",zl="#d5281b",Ul="#ffeb3b",Wl="#fff9c4",Vl="#ffb81c",Gl="#ed8b00",Yl="#00a499",ql="#ae2573",Xl="#4c6272",Kl="#768692",Jl="#aeb7bd",Zl="#d8dde0",Ql="#f0f4f5",Lh="#212b32",Ah="#4c6272",Eh="#ffffff",Bh="#212b32",Oh="#005eb8",Rh="#7c2855",Hh="#003087",zh="#330072",Uh="#ffeb3b",Wh="#212b32",Vh="#d8dde0",Gh="#ffffff33",Yh="#d5281b",qh="#4c6272",Xh="#ffffff",Kh="#007f3b",Jh="#ffffff",Zh="#006530",Qh="#004021",em="#004021",tm="#00000000",nm="#ffffff",rm="#005eb8",im="#005eb8",am="#d9e5f2",sm="#c7daf0",om="#005eb8",lm="#ffffff",cm="#212b32",um="#d9dde0",dm="#b3bcc2",fm="#b3bcc2",hm="#d5281b",mm="#aa2016",pm="#6a140e",gm="#6a140e",bm="#005eb8",ym="#004b93",vm="#002f5c",_m="#002f5c",xm="8px",wm="16px",Sm="12px",Cm="16px",km="4px",Tm="40px",Nm="4px",jm="40px",Dm="12px",Mm="16px",Pm="32px",Im="16px",Fm="20px",$m="28px",Lm="9px",Am="2px",Em="16px",Bm="24px",Om="8px",Rm="24px",Hm="16px",zm="4px",Um="4px",Wm="4px",Vm="8px",Gm="4px",Ym="16px",qm="#007f3b",Xm="#006530",Km="#004021",Jm="#d8dde0",Zm="#ffffff",Qm="#768692",ep="#00000000",tp="#ffeb3b",np="#00000000",rp="#ffffff",ip="#d9e5f2",ap="#c7daf0",sp="#005eb8",op="#005eb8",ec="8px",tc="16px",nc="12px",rc="16px",lp="2px",cp="4px",up="4px",dp="600",fp="#ffffff",hp="#d8dde0",mp="#aeb7bd",pp="#f0f4f5",gp="#212b32",bp="#212b32",yp="#005eb8",ic="16px",ac="32px",sc="16px",vp="1px",_p="4px",xp="none",wp="0 2px 4px rgba(0, 0, 0, 0.1)",Sp="#ffffff",Cp="#ffffff",kp="#d8dde0",Tp="#ffffff",Np="#4c6272",jp="#ffeb3b",Dp="#d5281b",Mp="#aeb7bd",Pp="#212b32",Ip="#4c6272",Fp="#768692",$p="#212b32",Lp="#ffffff",Ap="600",Ep="#d5281b",Bp="600",Op="#4c6272",oc="4px",lc="40px",cc="40px",uc="12px",Rp="2px",Hp="4px",zp="0px",Up="16px",Wp="18px",Vp="24px",Gp="32px",Yp="34px",qp="32px",Xp="40px",Kp="48px",Jp="5.4ex",Zp="7.2ex",Qp="9ex",eg="10.8ex",tg="20ex",ng="38ex",rg="56ex",ig="44px",ag="40px",sg="1020px",og="100%",lg="50%",cg="33.333%",ug="25%",dg="20%",fg="320px",hg="641px",mg="1025px",pg="1280px",gg="960px",bg="32px",yg="16px",vg="#d5281b",_g="#d5281b",xg="#ffffff",wg="#007f3b",Sg="#007f3b",Cg="#ffffff",kg="#ffeb3b",Tg="#ffeb3b",Ng="#212b32",jg="#005eb8",Dg="#005eb8",Mg="#ffffff",Pg="#d8dde0",Ig="#aeb7bd",Fg="#768692",$g="0 4px 0 #004021",Lg="0 4px 0 #005eb8",Ag="0 4px 0 #6a140e",Eg="0 4px 0 #ffeb3b",Bg="none",Og="0 2px 4px rgba(0, 0, 0, 0.1)",Rg="4px",Hg="0px",zg="solid",Ug="0 0 0 3px #ffeb3b",Wg="0 0 0 3px #ffeb3b",Vg="none",Gg="0 1px 3px rgba(0, 0, 0, 0.12)",Yg="0 2px 6px rgba(0, 0, 0, 0.16)",qg="0 4px 12px rgba(0, 0, 0, 0.20)",dc="0",fc="4px",hc="8px",mc="16px",pc="24px",gc="32px",bc="40px",yc="48px",vc="56px",_c="64px",Ts="0",Ns="0",js="4px",Ds="4px",Ms="8px",Ps="8px",Is="8px",Fs="16px",$s="16px",Ls="24px",As="24px",Es="32px",Bs="32px",Os="40px",Rs="40px",Hs="48px",zs="48px",Us="56px",Ws="56px",Vs="64px",Gi="Frutiger W01",Yi="Arial, Helvetica, sans-serif",qi="sans-serif",Xi="400",Ki="600",Ji="400",Zi="12px",Qi="14px",ea="12pt",ta="14px",na="16px",ra="12pt",ia="16px",aa="19px",sa="13pt",oa="19px",la="22px",ca="15pt",ua="22px",da="26px",fa="17pt",ha="27px",ma="36px",pa="20pt",ga="33px",ba="48px",ya="24pt",Gs="16px",Ys="24px",kn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},Tn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Nn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},jn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Dn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Mn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Pn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},In={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Fn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},$n={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},yw=Object.freeze(Object.defineProperty({__proto__:null,AnimationDurationFast:hh,AnimationDurationNormal:mh,AnimationDurationSlow:ph,AnimationEasingBounce:vh,AnimationEasingEaseIn:gh,AnimationEasingEaseInOut:yh,AnimationEasingEaseOut:bh,BorderColorCard:Fl,BorderColorCardHover:$l,BorderColorDefault:Pl,BorderColorError:Ll,BorderColorForm:Il,BorderRadiusLarge:$h,BorderRadiusMedium:Fh,BorderRadiusNone:Ph,BorderRadiusSmall:Ih,BorderWidthCardBottom:Nh,BorderWidthDefault:Ch,BorderWidthFormElement:kh,BorderWidthFormElementError:Th,BorderWidthPanel:jh,BorderWidthTableCell:Mh,BorderWidthTableHeader:Dh,BreakpointDesktop:mg,BreakpointLargeDesktop:pg,BreakpointMobile:fg,BreakpointTablet:hg,ButtonBorderRadius:cp,ButtonBorderWidth:lp,ButtonPrimaryBackgroundActive:Km,ButtonPrimaryBackgroundDefault:qm,ButtonPrimaryBackgroundDisabled:Jm,ButtonPrimaryBackgroundHover:Xm,ButtonPrimaryBorderDefault:ep,ButtonPrimaryBorderFocus:tp,ButtonPrimaryTextDefault:Zm,ButtonPrimaryTextDisabled:Qm,ButtonSecondaryBackgroundActive:ap,ButtonSecondaryBackgroundDefault:np,ButtonSecondaryBackgroundHover:ip,ButtonSecondaryBackgroundSolid:rp,ButtonSecondaryBorderDefault:op,ButtonSecondaryTextDefault:sp,ButtonShadowSize:up,ButtonSpacingPaddingHorizontalDesktop:rc,ButtonSpacingPaddingHorizontalMobile:tc,ButtonSpacingPaddingVerticalDesktop:nc,ButtonSpacingPaddingVerticalMobile:ec,ButtonTypographyWeight:dp,CardBackgroundDefault:fp,CardBorderBottom:pp,CardBorderDefault:hp,CardBorderHover:mp,CardBorderWidthBottom:_p,CardBorderWidthDefault:vp,CardShadowDefault:xp,CardShadowHover:wp,CardSpacingHeadingMargin:sc,CardSpacingPaddingDesktop:ac,CardSpacingPaddingMobile:ic,CardTextDescription:bp,CardTextHeading:gp,CardTextLink:yp,ColorBorderDefault:Vh,ColorBorderSecondary:Gh,ColorButtonLoginActive:vm,ColorButtonLoginBackground:bm,ColorButtonLoginHover:ym,ColorButtonLoginShadow:_m,ColorButtonPrimaryActive:Qh,ColorButtonPrimaryBackground:Kh,ColorButtonPrimaryHover:Zh,ColorButtonPrimaryShadow:em,ColorButtonPrimaryText:Jh,ColorButtonReverseActive:dm,ColorButtonReverseBackground:lm,ColorButtonReverseHover:um,ColorButtonReverseShadow:fm,ColorButtonReverseText:cm,ColorButtonSecondaryActive:sm,ColorButtonSecondaryBackground:tm,ColorButtonSecondaryBackgroundSolid:nm,ColorButtonSecondaryBorder:rm,ColorButtonSecondaryHover:am,ColorButtonSecondaryShadow:om,ColorButtonSecondaryText:im,ColorButtonWarningActive:pm,ColorButtonWarningBackground:hm,ColorButtonWarningHover:mm,ColorButtonWarningShadow:gm,ColorError:Yh,ColorFocusBackground:Uh,ColorFocusText:Wh,ColorFormBackground:Xh,ColorFormBorder:qh,ColorGrey1:Xl,ColorGrey2:Kl,ColorGrey3:Jl,ColorGrey4:Zl,ColorGrey5:Ql,ColorLinkActive:Hh,ColorLinkDefault:Oh,ColorLinkHover:Rh,ColorLinkVisited:zh,ColorPrimaryBlack:Bl,ColorPrimaryBlue:Al,ColorPrimaryDarkPink:Hl,ColorPrimaryGreen:Ol,ColorPrimaryPurple:Rl,ColorPrimaryRed:zl,ColorPrimaryWhite:El,ColorPrimaryYellow:Ul,ColorSecondaryAquaGreen:Yl,ColorSecondaryOrange:Gl,ColorSecondaryPaleYellow:Wl,ColorSecondaryPink:ql,ColorSecondaryWarmYellow:Vl,ColorTextPrimary:Lh,ColorTextPrint:Bh,ColorTextReverse:Eh,ColorTextSecondary:Ah,ComponentBlur:Um,ComponentBreadcrumbChevronMarginLeft:Lm,ComponentBreadcrumbChevronMarginRight:Am,ComponentBreadcrumbPaddingTopDesktop:Bm,ComponentBreadcrumbPaddingTopMobile:Em,ComponentButtonPaddingDesktopHorizontal:Cm,ComponentButtonPaddingDesktopVertical:Sm,ComponentButtonPaddingMobileHorizontal:wm,ComponentButtonPaddingMobileVertical:xm,ComponentButtonShadowSize:km,ComponentCardHeadingMargin:Im,ComponentCardPaddingDesktop:Pm,ComponentCardPaddingMobile:Mm,ComponentDetails:Vm,ComponentExpander:Gm,ComponentFormCheckboxLabelPadding:Dm,ComponentFormCheckboxSize:jm,ComponentFormInputMinHeight:Tm,ComponentFormInputPadding:Nm,ComponentLink:Wm,ComponentPagination:Ym,ComponentPanelPaddingDesktop:$m,ComponentPanelPaddingMobile:Fm,ComponentSpread:zm,ComponentSummaryListCellPaddingHorizontal:Rm,ComponentSummaryListCellPaddingVertical:Om,ComponentSummaryListRowMargin:Hm,ElevationHigh:qg,ElevationLow:Gg,ElevationMedium:Yg,ElevationNone:Vg,FocusOutlineOffset:Hg,FocusOutlineStyle:zg,FocusOutlineWidth:Rg,FocusShadowButton:Wg,FocusShadowInput:Ug,FontFamilyBase:Gi,FontFamilyFallback:Yi,FontFamilyPrint:qi,FontLineHeightBase:Ys,FontSize14Mobile:Zi,FontSize14Print:ea,FontSize14Tablet:Qi,FontSize16Mobile:ta,FontSize16Print:ra,FontSize16Tablet:na,FontSize19Mobile:ia,FontSize19Print:sa,FontSize19Tablet:aa,FontSize22Mobile:oa,FontSize22Print:ca,FontSize22Tablet:la,FontSize26Mobile:ua,FontSize26Print:fa,FontSize26Tablet:da,FontSize36Mobile:ha,FontSize36Print:pa,FontSize36Tablet:ma,FontSize48Mobile:ga,FontSize48Print:ya,FontSize48Tablet:ba,FontSizeBase:Gs,FontWeightBold:Ki,FontWeightLight:Ji,FontWeightNormal:Xi,FormBorderRadius:zp,FormBorderWidthDefault:Rp,FormBorderWidthError:Hp,FormErrorTextDefault:Ep,FormErrorTypographyWeight:Bp,FormHintTextDefault:Op,FormInputBackgroundDefault:Sp,FormInputBackgroundDisabled:kp,FormInputBackgroundError:Tp,FormInputBackgroundFocus:Cp,FormInputBorderDefault:Np,FormInputBorderDisabled:Mp,FormInputBorderError:Dp,FormInputBorderFocus:jp,FormInputTextDefault:Pp,FormInputTextDisabled:Fp,FormInputTextPlaceholder:Ip,FormLabelTextDefault:$p,FormLabelTextRequired:Lp,FormLabelTypographyWeight:Ap,FormSpacingCheckboxLabelPadding:uc,FormSpacingCheckboxSize:cc,FormSpacingInputMinHeight:lc,FormSpacingInputPadding:oc,GridGutter:bg,GridGutterHalf:yg,GridPageWidth:gg,HeadingsNhsukHeadingL:Tn,HeadingsNhsukHeadingM:Nn,HeadingsNhsukHeadingS:jn,HeadingsNhsukHeadingXl:kn,HeadingsNhsukHeadingXs:Dn,LayoutColumnActions:dg,LayoutColumnFull:og,LayoutColumnHalf:lg,LayoutColumnQuarter:ug,LayoutColumnThird:cg,LayoutContainerMaxWidth:sg,ParagraphsBody:Mn,ParagraphsBodyLarge:Pn,ParagraphsBodySmall:In,ParagraphsLedeText:Fn,ParagraphsLedeTextSmall:$n,ShadowButtonDefault:$g,ShadowButtonFocus:Eg,ShadowButtonSecondary:Lg,ShadowButtonWarning:Ag,ShadowCardDefault:Bg,ShadowCardHover:Og,SizeButtonMinHeightDesktop:ag,SizeButtonMinHeightMobile:ig,SizeFormControlLarge:Kp,SizeFormControlMedium:Xp,SizeFormControlSmall:qp,SizeFormInputWidth2xl:ng,SizeFormInputWidth3xl:rg,SizeFormInputWidthLg:eg,SizeFormInputWidthMd:Qp,SizeFormInputWidthSm:Zp,SizeFormInputWidthXl:tg,SizeFormInputWidthXs:Jp,SizeIconExtraLarge:Gp,SizeIconLarge:Vp,SizeIconMedium:Wp,SizeIconNhsDefault:Yp,SizeIconSmall:Up,Spacing0:dc,Spacing1:fc,Spacing2:hc,Spacing3:mc,Spacing4:pc,Spacing5:gc,Spacing6:bc,Spacing7:yc,Spacing8:vc,Spacing9:_c,SpacingResponsive0Mobile:Ts,SpacingResponsive0Tablet:Ns,SpacingResponsive1Mobile:js,SpacingResponsive1Tablet:Ds,SpacingResponsive2Mobile:Ms,SpacingResponsive2Tablet:Ps,SpacingResponsive3Mobile:Is,SpacingResponsive3Tablet:Fs,SpacingResponsive4Mobile:$s,SpacingResponsive4Tablet:Ls,SpacingResponsive5Mobile:As,SpacingResponsive5Tablet:Es,SpacingResponsive6Mobile:Bs,SpacingResponsive6Tablet:Os,SpacingResponsive7Mobile:Rs,SpacingResponsive7Tablet:Hs,SpacingResponsive8Mobile:zs,SpacingResponsive8Tablet:Us,SpacingResponsive9Mobile:Ws,SpacingResponsive9Tablet:Vs,StateDisabledBackground:Pg,StateDisabledBorder:Ig,StateDisabledText:Fg,StateErrorBackground:vg,StateErrorBorder:_g,StateErrorText:xg,StateInfoBackground:jg,StateInfoBorder:Dg,StateInfoText:Mg,StateSuccessBackground:wg,StateSuccessBorder:Sg,StateSuccessText:Cg,StateWarningBackground:kg,StateWarningBorder:Tg,StateWarningText:Ng,TransitionButtonDefault:_h,TransitionButtonShadow:xh,TransitionCardHover:Sh,TransitionInputFocus:wh},Symbol.toStringTag,{value:"Module"})),vw=(e,t)=>({fontSize:e.mobile,marginBottom:t.mobile,"@media (min-width: 768px)":{fontSize:e.tablet,marginBottom:t.tablet},"@media print":{fontSize:e.print||e.tablet}}),_w=({children:e,className:t="",style:n={}})=>o.jsx("h1",{className:t,style:{fontFamily:kn.fontFamily,fontWeight:kn.fontWeight,fontSize:kn.fontSize.mobile,lineHeight:kn.lineHeight,marginTop:kn.marginTop,marginBottom:kn.marginBottom.mobile,...n},children:e}),xw=({children:e,className:t="",style:n={}})=>o.jsx("h2",{className:t,style:{fontFamily:Tn.fontFamily,fontWeight:Tn.fontWeight,fontSize:Tn.fontSize.mobile,lineHeight:Tn.lineHeight,marginTop:Tn.marginTop,marginBottom:Tn.marginBottom.mobile,...n},children:e}),ww=({children:e,className:t="",style:n={}})=>o.jsx("h3",{className:t,style:{fontFamily:Nn.fontFamily,fontWeight:Nn.fontWeight,fontSize:Nn.fontSize.mobile,lineHeight:Nn.lineHeight,marginTop:Nn.marginTop,marginBottom:Nn.marginBottom.mobile,...n},children:e}),Sw=({children:e,className:t="",style:n={}})=>o.jsx("h4",{className:t,style:{fontFamily:jn.fontFamily,fontWeight:jn.fontWeight,fontSize:jn.fontSize.mobile,lineHeight:jn.lineHeight,marginTop:jn.marginTop,marginBottom:jn.marginBottom.mobile,...n},children:e}),Cw=({children:e,className:t="",style:n={}})=>o.jsx("h5",{className:t,style:{fontFamily:Dn.fontFamily,fontWeight:Dn.fontWeight,fontSize:Dn.fontSize.mobile,lineHeight:Dn.lineHeight,marginTop:Dn.marginTop,marginBottom:Dn.marginBottom.mobile,...n},children:e}),kw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:Mn.fontFamily,fontWeight:Mn.fontWeight,fontSize:Mn.fontSize.mobile,lineHeight:Mn.lineHeight,marginTop:Mn.marginTop,marginBottom:Mn.marginBottom.mobile,...n},children:e}),Tw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:Pn.fontFamily,fontWeight:Pn.fontWeight,fontSize:Pn.fontSize.mobile,lineHeight:Pn.lineHeight,marginTop:Pn.marginTop,marginBottom:Pn.marginBottom.mobile,...n},children:e}),Nw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:In.fontFamily,fontWeight:In.fontWeight,fontSize:In.fontSize.mobile,lineHeight:In.lineHeight,marginTop:In.marginTop,marginBottom:In.marginBottom.mobile,...n},children:e}),jw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:Fn.fontFamily,fontWeight:Fn.fontWeight,fontSize:Fn.fontSize.mobile,lineHeight:Fn.lineHeight,marginTop:Fn.marginTop,marginBottom:Fn.marginBottom.mobile,...n},children:e}),Dw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:$n.fontFamily,fontWeight:$n.fontWeight,fontSize:$n.fontSize.mobile,lineHeight:$n.lineHeight,marginTop:$n.marginTop,marginBottom:$n.marginBottom.mobile,...n},children:e}),Mw=()=>E.useMemo(()=>yw,[]),Pw=()=>E.useMemo(()=>({BorderColorDefault:Pl,BorderColorForm:Il,BorderColorCard:Fl,BorderColorCardHover:$l,BorderColorError:Ll,ColorPrimaryBlue:Al,ColorPrimaryWhite:El,ColorPrimaryBlack:Bl,ColorPrimaryGreen:Ol,ColorPrimaryPurple:Rl,ColorPrimaryDarkPink:Hl,ColorPrimaryRed:zl,ColorPrimaryYellow:Ul,ColorSecondaryPaleYellow:Wl,ColorSecondaryWarmYellow:Vl,ColorSecondaryOrange:Gl,ColorSecondaryAquaGreen:Yl,ColorSecondaryPink:ql,ColorGrey1:Xl,ColorGrey2:Kl,ColorGrey3:Jl,ColorGrey4:Zl,ColorGrey5:Ql}),[]),Iw=()=>E.useMemo(()=>({Spacing0:dc,Spacing1:fc,Spacing2:hc,Spacing3:mc,Spacing4:pc,Spacing5:gc,Spacing6:bc,Spacing7:yc,Spacing8:vc,Spacing9:_c}),[]),Fw=()=>E.useMemo(()=>({Mobile:{Size14:Zi,Size16:ta,Size19:ia,Size22:oa,Size26:ua,Size36:ha,Size48:ga},Tablet:{Size14:Qi,Size16:na,Size19:aa,Size22:la,Size26:da,Size36:ma,Size48:ba},Print:{Size14:ea,Size16:ra,Size19:sa,Size22:ca,Size26:fa,Size36:pa,Size48:ya},Family:{Base:Gi,Fallback:Yi,Print:qi},Weight:{Normal:Xi,Bold:Ki,Light:Ji},Base:{Size:Gs,LineHeight:Ys},FontFamilyBase:Gi,FontFamilyFallback:Yi,FontFamilyPrint:qi,FontWeightNormal:Xi,FontWeightBold:Ki,FontWeightLight:Ji,FontSize14Mobile:Zi,FontSize14Tablet:Qi,FontSize14Print:ea,FontSize16Mobile:ta,FontSize16Tablet:na,FontSize16Print:ra,FontSize19Mobile:ia,FontSize19Tablet:aa,FontSize19Print:sa,FontSize22Mobile:oa,FontSize22Tablet:la,FontSize22Print:ca,FontSize26Mobile:ua,FontSize26Tablet:da,FontSize26Print:fa,FontSize36Mobile:ha,FontSize36Tablet:ma,FontSize36Print:pa,FontSize48Mobile:ga,FontSize48Tablet:ba,FontSize48Print:ya,FontSizeBase:Gs,FontLineHeightBase:Ys}),[]),$w=()=>E.useMemo(()=>({Mobile:{Size0:Ts,Size1:js,Size2:Ms,Size3:Is,Size4:$s,Size5:As,Size6:Bs,Size7:Rs,Size8:zs,Size9:Ws},Tablet:{Size0:Ns,Size1:Ds,Size2:Ps,Size3:Fs,Size4:Ls,Size5:Es,Size6:Os,Size7:Hs,Size8:Us,Size9:Vs},SpacingResponsive0Mobile:Ts,SpacingResponsive0Tablet:Ns,SpacingResponsive1Mobile:js,SpacingResponsive1Tablet:Ds,SpacingResponsive2Mobile:Ms,SpacingResponsive2Tablet:Ps,SpacingResponsive3Mobile:Is,SpacingResponsive3Tablet:Fs,SpacingResponsive4Mobile:$s,SpacingResponsive4Tablet:Ls,SpacingResponsive5Mobile:As,SpacingResponsive5Tablet:Es,SpacingResponsive6Mobile:Bs,SpacingResponsive6Tablet:Os,SpacingResponsive7Mobile:Rs,SpacingResponsive7Tablet:Hs,SpacingResponsive8Mobile:zs,SpacingResponsive8Tablet:Us,SpacingResponsive9Mobile:Ws,SpacingResponsive9Tablet:Vs}),[]),Lw=()=>E.useMemo(()=>({ButtonSpacingPaddingVerticalMobile:ec,ButtonSpacingPaddingHorizontalMobile:tc,ButtonSpacingPaddingVerticalDesktop:nc,ButtonSpacingPaddingHorizontalDesktop:rc,CardSpacingPaddingMobile:ic,CardSpacingPaddingDesktop:ac,CardSpacingHeadingMargin:sc,FormSpacingInputPadding:oc,FormSpacingInputMinHeight:lc,FormSpacingCheckboxSize:cc,FormSpacingCheckboxLabelPadding:uc}),[]),Aw=()=>E.useMemo(()=>({xl:kn,l:Tn,m:Nn,s:jn,xs:Dn}),[]),Ew=()=>E.useMemo(()=>({body:Mn,bodyLarge:Pn,bodySmall:In,ledeText:Fn,ledeTextSmall:$n}),[]),Bw=()=>E.useMemo(()=>({headings:{xl:kn,l:Tn,m:Nn,s:jn,xs:Dn},paragraphs:{body:Mn,bodyLarge:Pn,bodySmall:In,ledeText:Fn,ledeTextSmall:$n},fonts:{family:{base:Gi,fallback:Yi,print:qi},weight:{normal:Xi,bold:Ki,light:Ji},sizes:{mobile:{size14:Zi,size16:ta,size19:ia,size22:oa,size26:ua,size36:ha,size48:ga},tablet:{size14:Qi,size16:na,size19:aa,size22:la,size26:da,size36:ma,size48:ba},print:{size14:ea,size16:ra,size19:sa,size22:ca,size26:fa,size36:pa,size48:ya}}}}),[]);function Ow(e={}){const{initialLayout:t=void 0,fallbackLayout:n="two-column"}=e,[r,i]=K.useState(t),a=K.useCallback(()=>i("three-column"),[]),s=K.useCallback(()=>i(u=>u==="three-column"?n:u),[n]),l=K.useCallback(()=>i(u=>u==="three-column"?n:"three-column"),[n]);return{forceLayout:r,setLayout:i,drillIn:a,drillOut:s,toggle:l,isDrilledIn:r==="three-column"}}const xc={fontPath:"https://assets.nhs.uk/fonts/",includeFontFace:!0,useFallbacks:!0,fontWeights:[400,600]},At={normal:{woff2:"FrutigerLTW01-55Roman.woff2",woff:"FrutigerLTW01-55Roman.woff",ttf:"FrutigerLTW01-55Roman.ttf",eot:"FrutigerLTW01-55Roman.eot"},bold:{woff2:"FrutigerLTW01-65Bold.woff2",woff:"FrutigerLTW01-65Bold.woff",ttf:"FrutigerLTW01-65Bold.ttf",eot:"FrutigerLTW01-65Bold.eot"}};function Rw(e={}){const{fontPath:t,fontWeights:n}={...xc,...e},r=[];return n?.includes(400)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 400;
  src: url("${t}${At.normal.eot}?#iefix") format("eot"),
       url("${t}${At.normal.woff2}") format("woff2"),
       url("${t}${At.normal.woff}") format("woff"),
       url("${t}${At.normal.ttf}") format("truetype");
  src: url("${t}${At.normal.eot}");
}`),n?.includes(600)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 600;
  src: url("${t}${At.bold.eot}?#iefix") format("eot"),
       url("${t}${At.bold.woff2}") format("woff2"),
       url("${t}${At.bold.woff}") format("woff"),
       url("${t}${At.bold.ttf}") format("truetype");
  src: url("${t}${At.bold.eot}");
}`),r.join(`
`)}function Hw(e={}){if(typeof document>"u")return;const{fontPath:t,fontWeights:n}={...xc,...e};[...n?.includes(400)?[{href:`${t}${At.normal.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${At.normal.woff}`,as:"font",type:"font/woff"}]:[],...n?.includes(600)?[{href:`${t}${At.bold.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${At.bold.woff}`,as:"font",type:"font/woff"}]:[]].forEach(i=>{const a=document.createElement("link");a.rel="preload",a.href=i.href,a.as=i.as,a.type=i.type,a.crossOrigin="anonymous",document.head.appendChild(a)})}const zw='"Frutiger W01", Arial, Helvetica, sans-serif',Uw="Arial, Helvetica, sans-serif";async function Ww(){if(typeof document>"u"||!document.fonts)return!1;try{return await document.fonts.load('1em "Frutiger W01"'),document.fonts.check('1em "Frutiger W01"')}catch{return!1}}function Yn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xg(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Yt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ci={duration:.5,overwrite:!1,delay:0},wc,Nt,it,rn=1e8,Je=1/rn,Sc=Math.PI*2,Vw=Sc/4,Gw=0,Kg=Math.sqrt,Yw=Math.cos,qw=Math.sin,kt=function(t){return typeof t=="string"},dt=function(t){return typeof t=="function"},qn=function(t){return typeof t=="number"},Cc=function(t){return typeof t>"u"},Ln=function(t){return typeof t=="object"},zt=function(t){return t!==!1},kc=function(){return typeof window<"u"},qs=function(t){return dt(t)||kt(t)},Jg=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Pt=Array.isArray,Tc=/(?:-?\.?\d|\.)+/gi,Zg=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ui=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Nc=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Qg=/[+-]=-?[.\d]+/,e0=/[^,'"\[\]\s]+/gi,Xw=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,lt,An,jc,Dc,qt={},Xs={},t0,n0=function(t){return(Xs=fi(t,qt))&&Vt},Mc=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},va=function(t,n){return!n&&console.warn(t)},r0=function(t,n){return t&&(qt[t]=n)&&Xs&&(Xs[t]=n)||qt},_a=function(){return 0},Kw={suppressEvents:!0,isStart:!0,kill:!1},Ks={suppressEvents:!0,kill:!1},Jw={suppressEvents:!0},Pc={},sr=[],Ic={},i0,Xt={},Fc={},a0=30,Js=[],$c="",Lc=function(t){var n=t[0],r,i;if(Ln(n)||dt(n)||(t=[t]),!(r=(n._gsap||{}).harness)){for(i=Js.length;i--&&!Js[i].targetTest(n););r=Js[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new $0(t[i],r)))||t.splice(i,1);return t},Dr=function(t){return t._gsap||Lc(sn(t))[0]._gsap},s0=function(t,n,r){return(r=t[n])&&dt(r)?t[n]():Cc(r)&&t.getAttribute&&t.getAttribute(n)||r},Ut=function(t,n){return(t=t.split(",")).forEach(n)||t},mt=function(t){return Math.round(t*1e5)/1e5||0},gt=function(t){return Math.round(t*1e7)/1e7||0},di=function(t,n){var r=n.charAt(0),i=parseFloat(n.substr(2));return t=parseFloat(t),r==="+"?t+i:r==="-"?t-i:r==="*"?t*i:t/i},Zw=function(t,n){for(var r=n.length,i=0;t.indexOf(n[i])<0&&++i<r;);return i<r},Zs=function(){var t=sr.length,n=sr.slice(0),r,i;for(Ic={},sr.length=0,r=0;r<t;r++)i=n[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},Ac=function(t){return!!(t._initted||t._startAt||t.add)},o0=function(t,n,r,i){sr.length&&!Nt&&Zs(),t.render(n,r,!!(Nt&&n<0&&Ac(t))),sr.length&&!Nt&&Zs()},l0=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(e0).length<2?n:kt(t)?t.trim():t},c0=function(t){return t},Kt=function(t,n){for(var r in n)r in t||(t[r]=n[r]);return t},Qw=function(t){return function(n,r){for(var i in r)i in n||i==="duration"&&t||i==="ease"||(n[i]=r[i])}},fi=function(t,n){for(var r in n)t[r]=n[r];return t},u0=function e(t,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(t[r]=Ln(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},Qs=function(t,n){var r={},i;for(i in t)i in n||(r[i]=t[i]);return r},xa=function(t){var n=t.parent||lt,r=t.keyframes?Qw(Pt(t.keyframes)):Kt;if(zt(t.inherit))for(;n;)r(t,n.vars.defaults),n=n.parent||n._dp;return t},eS=function(t,n){for(var r=t.length,i=r===n.length;i&&r--&&t[r]===n[r];);return r<0},d0=function(t,n,r,i,a){var s=t[i],l;if(a)for(l=n[a];s&&s[a]>l;)s=s._prev;return s?(n._next=s._next,s._next=n):(n._next=t[r],t[r]=n),n._next?n._next._prev=n:t[i]=n,n._prev=s,n.parent=n._dp=t,n},eo=function(t,n,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var a=n._prev,s=n._next;a?a._next=s:t[r]===n&&(t[r]=s),s?s._prev=a:t[i]===n&&(t[i]=a),n._next=n._prev=n.parent=null},or=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Mr=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},tS=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},Ec=function(t,n,r,i){return t._startAt&&(Nt?t._startAt.revert(Ks):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,i))},nS=function e(t){return!t||t._ts&&e(t.parent)},f0=function(t){return t._repeat?hi(t._tTime,t=t.duration()+t._rDelay)*t:0},hi=function(t,n){var r=Math.floor(t=gt(t/n));return t&&r===t?r-1:r},to=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},no=function(t){return t._end=gt(t._start+(t._tDur/Math.abs(t._ts||t._rts||Je)||0))},ro=function(t,n){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=gt(r._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),no(t),r._dirty||Mr(r,t)),t},h0=function(t,n){var r;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(r=to(t.rawTime(),n),(!n._dur||Sa(0,n.totalDuration(),r)-n._tTime>Je)&&n.render(r,!0)),Mr(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-Je}},En=function(t,n,r,i){return n.parent&&or(n),n._start=gt((qn(r)?r:r||t!==lt?an(t,r,n):t._time)+n._delay),n._end=gt(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),d0(t,n,"_first","_last",t._sort?"_start":0),Bc(n)||(t._recent=n),i||h0(t,n),t._ts<0&&ro(t,t._tTime),t},m0=function(t,n){return(qt.ScrollTrigger||Mc("scrollTrigger",n))&&qt.ScrollTrigger.create(n,t)},p0=function(t,n,r,i,a){if(Yc(t,n,a),!t._initted)return 1;if(!r&&t._pt&&!Nt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&i0!==Zt.frame)return sr.push(t),t._lazy=[a,i],1},rS=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Bc=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},iS=function(t,n,r,i){var a=t.ratio,s=n<0||!n&&(!t._start&&rS(t)&&!(!t._initted&&Bc(t))||(t._ts<0||t._dp._ts<0)&&!Bc(t))?0:1,l=t._rDelay,u=0,c,d,f;if(l&&t._repeat&&(u=Sa(0,t._tDur,n),d=hi(u,l),t._yoyo&&d&1&&(s=1-s),d!==hi(t._tTime,l)&&(a=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==a||Nt||i||t._zTime===Je||!n&&t._zTime){if(!t._initted&&p0(t,n,i,r,u))return;for(f=t._zTime,t._zTime=n||(r?Je:0),r||(r=n&&!f),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=u,c=t._pt;c;)c.r(s,c.d),c=c._next;n<0&&Ec(t,n,r,!0),t._onUpdate&&!r&&Jt(t,"onUpdate"),u&&t._repeat&&!r&&t.parent&&Jt(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===s&&(s&&or(t,1),!r&&!Nt&&(Jt(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},aS=function(t,n,r){var i;if(r>n)for(i=t._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>n)return i;i=i._next}else for(i=t._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<n)return i;i=i._prev}},mi=function(t,n,r,i){var a=t._repeat,s=gt(n)||0,l=t._tTime/t._tDur;return l&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=a?a<0?1e10:gt(s*(a+1)+t._rDelay*a):s,l>0&&!i&&ro(t,t._tTime=t._tDur*l),t.parent&&no(t),r||Mr(t.parent,t),t},g0=function(t){return t instanceof jt?Mr(t):mi(t,t._dur)},sS={_start:0,endTime:_a,totalDuration:_a},an=function e(t,n,r){var i=t.labels,a=t._recent||sS,s=t.duration()>=rn?a.endTime(!1):t._dur,l,u,c;return kt(n)&&(isNaN(n)||n in i)?(u=n.charAt(0),c=n.substr(-1)==="%",l=n.indexOf("="),u==="<"||u===">"?(l>=0&&(n=n.replace(/=/,"")),(u==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0)*(c?(l<0?a:r).totalDuration()/100:1)):l<0?(n in i||(i[n]=s),i[n]):(u=parseFloat(n.charAt(l-1)+n.substr(l+1)),c&&r&&(u=u/100*(Pt(r)?r[0]:r).totalDuration()),l>1?e(t,n.substr(0,l-1),r)+u:s+u)):n==null?s:+n},wa=function(t,n,r){var i=qn(n[1]),a=(i?2:1)+(t<2?0:1),s=n[a],l,u;if(i&&(s.duration=n[1]),s.parent=r,t){for(l=s,u=r;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=zt(u.vars.inherit)&&u.parent;s.immediateRender=zt(l.immediateRender),t<2?s.runBackwards=1:s.startAt=n[a-1]}return new pt(n[0],s,n[a+1])},lr=function(t,n){return t||t===0?n(t):n},Sa=function(t,n,r){return r<t?t:r>n?n:r},It=function(t,n){return!kt(t)||!(n=Xw.exec(t))?"":n[1]},oS=function(t,n,r){return lr(r,function(i){return Sa(t,n,i)})},Oc=[].slice,b0=function(t,n){return t&&Ln(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&Ln(t[0]))&&!t.nodeType&&t!==An},lS=function(t,n,r){return r===void 0&&(r=[]),t.forEach(function(i){var a;return kt(i)&&!n||b0(i,1)?(a=r).push.apply(a,sn(i)):r.push(i)})||r},sn=function(t,n,r){return it&&!n&&it.selector?it.selector(t):kt(t)&&!r&&(jc||!gi())?Oc.call((n||Dc).querySelectorAll(t),0):Pt(t)?lS(t,r):b0(t)?Oc.call(t,0):t?[t]:[]},Rc=function(t){return t=sn(t)[0]||va("Invalid scope")||{},function(n){var r=t.current||t.nativeElement||t;return sn(n,r.querySelectorAll?r:r===t?va("Invalid scope")||Dc.createElement("div"):t)}},y0=function(t){return t.sort(function(){return .5-Math.random()})},v0=function(t){if(dt(t))return t;var n=Ln(t)?t:{each:t},r=Pr(n.ease),i=n.from||0,a=parseFloat(n.base)||0,s={},l=i>0&&i<1,u=isNaN(i)||l,c=n.axis,d=i,f=i;return kt(i)?d=f={center:.5,edges:.5,end:1}[i]||0:!l&&u&&(d=i[0],f=i[1]),function(m,p,y){var h=(y||n).length,g=s[h],b,w,T,S,v,j,N,M,_;if(!g){if(_=n.grid==="auto"?0:(n.grid||[1,rn])[1],!_){for(N=-rn;N<(N=y[_++].getBoundingClientRect().left)&&_<h;);_<h&&_--}for(g=s[h]=[],b=u?Math.min(_,h)*d-.5:i%_,w=_===rn?0:u?h*f/_-.5:i/_|0,N=0,M=rn,j=0;j<h;j++)T=j%_-b,S=w-(j/_|0),g[j]=v=c?Math.abs(c==="y"?S:T):Kg(T*T+S*S),v>N&&(N=v),v<M&&(M=v);i==="random"&&y0(g),g.max=N-M,g.min=M,g.v=h=(parseFloat(n.amount)||parseFloat(n.each)*(_>h?h-1:c?c==="y"?h/_:_:Math.max(_,h/_))||0)*(i==="edges"?-1:1),g.b=h<0?a-h:a,g.u=It(n.amount||n.each)||0,r=r&&h<0?P0(r):r}return h=(g[m]-g.min)/g.max||0,gt(g.b+(r?r(h):h)*g.v)+g.u}},Hc=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var i=gt(Math.round(parseFloat(r)/t)*t*n);return(i-i%1)/n+(qn(r)?0:It(r))}},_0=function(t,n){var r=Pt(t),i,a;return!r&&Ln(t)&&(i=r=t.radius||rn,t.values?(t=sn(t.values),(a=!qn(t[0]))&&(i*=i)):t=Hc(t.increment)),lr(n,r?dt(t)?function(s){return a=t(s),Math.abs(a-s)<=i?a:s}:function(s){for(var l=parseFloat(a?s.x:s),u=parseFloat(a?s.y:0),c=rn,d=0,f=t.length,m,p;f--;)a?(m=t[f].x-l,p=t[f].y-u,m=m*m+p*p):m=Math.abs(t[f]-l),m<c&&(c=m,d=f);return d=!i||c<=i?t[d]:s,a||d===s||qn(s)?d:d+It(s)}:Hc(t))},x0=function(t,n,r,i){return lr(Pt(t)?!n:r===!0?!!(r=0):!i,function(){return Pt(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(n-t+r*.99))/r)*r*i)/i})},cS=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduce(function(a,s){return s(a)},i)}},uS=function(t,n){return function(r){return t(parseFloat(r))+(n||It(r))}},dS=function(t,n,r){return S0(t,n,0,1,r)},w0=function(t,n,r){return lr(r,function(i){return t[~~n(i)]})},fS=function e(t,n,r){var i=n-t;return Pt(t)?w0(t,e(0,t.length),n):lr(r,function(a){return(i+(a-t)%i)%i+t})},hS=function e(t,n,r){var i=n-t,a=i*2;return Pt(t)?w0(t,e(0,t.length-1),n):lr(r,function(s){return s=(a+(s-t)%a)%a||0,t+(s>i?a-s:s)})},Ca=function(t){for(var n=0,r="",i,a,s,l;~(i=t.indexOf("random(",n));)s=t.indexOf(")",i),l=t.charAt(i+7)==="[",a=t.substr(i+7,s-i-7).match(l?e0:Tc),r+=t.substr(n,i-n)+x0(l?a:+a[0],l?0:+a[1],+a[2]||1e-5),n=s+1;return r+t.substr(n,t.length-n)},S0=function(t,n,r,i,a){var s=n-t,l=i-r;return lr(a,function(u){return r+((u-t)/s*l||0)})},mS=function e(t,n,r,i){var a=isNaN(t+n)?0:function(p){return(1-p)*t+p*n};if(!a){var s=kt(t),l={},u,c,d,f,m;if(r===!0&&(i=1)&&(r=null),s)t={p:t},n={p:n};else if(Pt(t)&&!Pt(n)){for(d=[],f=t.length,m=f-2,c=1;c<f;c++)d.push(e(t[c-1],t[c]));f--,a=function(y){y*=f;var h=Math.min(m,~~y);return d[h](y-h)},r=n}else i||(t=fi(Pt(t)?[]:{},t));if(!d){for(u in n)Vc.call(l,t,u,"get",n[u]);a=function(y){return Kc(y,l)||(s?t.p:t)}}}return lr(r,a)},C0=function(t,n,r){var i=t.labels,a=rn,s,l,u;for(s in i)l=i[s]-n,l<0==!!r&&l&&a>(l=Math.abs(l))&&(u=s,a=l);return u},Jt=function(t,n,r){var i=t.vars,a=i[n],s=it,l=t._ctx,u,c,d;if(a)return u=i[n+"Params"],c=i.callbackScope||t,r&&sr.length&&Zs(),l&&(it=l),d=u?a.apply(c,u):a.call(c),it=s,d},ka=function(t){return or(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Nt),t.progress()<1&&Jt(t,"onInterrupt"),t},pi,k0=[],T0=function(t){if(t)if(t=!t.name&&t.default||t,kc()||t.headless){var n=t.name,r=dt(t),i=n&&!r&&t.init?function(){this._props=[]}:t,a={init:_a,render:Kc,add:Vc,kill:MS,modifier:DS,rawVars:0},s={targetTest:0,get:0,getSetter:Xc,aliases:{},register:0};if(gi(),t!==i){if(Xt[n])return;Kt(i,Kt(Qs(t,a),s)),fi(i.prototype,fi(a,Qs(t,s))),Xt[i.prop=n]=i,t.targetTest&&(Js.push(i),Pc[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}r0(n,i),t.register&&t.register(Vt,i,Wt)}else k0.push(t)},Ze=255,Ta={aqua:[0,Ze,Ze],lime:[0,Ze,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ze],navy:[0,0,128],white:[Ze,Ze,Ze],olive:[128,128,0],yellow:[Ze,Ze,0],orange:[Ze,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ze,0,0],pink:[Ze,192,203],cyan:[0,Ze,Ze],transparent:[Ze,Ze,Ze,0]},zc=function(t,n,r){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(r-n)*t*6:t<.5?r:t*3<2?n+(r-n)*(2/3-t)*6:n)*Ze+.5|0},N0=function(t,n,r){var i=t?qn(t)?[t>>16,t>>8&Ze,t&Ze]:0:Ta.black,a,s,l,u,c,d,f,m,p,y;if(!i){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Ta[t])i=Ta[t];else if(t.charAt(0)==="#"){if(t.length<6&&(a=t.charAt(1),s=t.charAt(2),l=t.charAt(3),t="#"+a+a+s+s+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return i=parseInt(t.substr(1,6),16),[i>>16,i>>8&Ze,i&Ze,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),i=[t>>16,t>>8&Ze,t&Ze]}else if(t.substr(0,3)==="hsl"){if(i=y=t.match(Tc),!n)u=+i[0]%360/360,c=+i[1]/100,d=+i[2]/100,s=d<=.5?d*(c+1):d+c-d*c,a=d*2-s,i.length>3&&(i[3]*=1),i[0]=zc(u+1/3,a,s),i[1]=zc(u,a,s),i[2]=zc(u-1/3,a,s);else if(~t.indexOf("="))return i=t.match(Zg),r&&i.length<4&&(i[3]=1),i}else i=t.match(Tc)||Ta.transparent;i=i.map(Number)}return n&&!y&&(a=i[0]/Ze,s=i[1]/Ze,l=i[2]/Ze,f=Math.max(a,s,l),m=Math.min(a,s,l),d=(f+m)/2,f===m?u=c=0:(p=f-m,c=d>.5?p/(2-f-m):p/(f+m),u=f===a?(s-l)/p+(s<l?6:0):f===s?(l-a)/p+2:(a-s)/p+4,u*=60),i[0]=~~(u+.5),i[1]=~~(c*100+.5),i[2]=~~(d*100+.5)),r&&i.length<4&&(i[3]=1),i},j0=function(t){var n=[],r=[],i=-1;return t.split(cr).forEach(function(a){var s=a.match(ui)||[];n.push.apply(n,s),r.push(i+=s.length+1)}),n.c=r,n},D0=function(t,n,r){var i="",a=(t+i).match(cr),s=n?"hsla(":"rgba(",l=0,u,c,d,f;if(!a)return t;if(a=a.map(function(m){return(m=N0(m,n,1))&&s+(n?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),r&&(d=j0(t),u=r.c,u.join(i)!==d.c.join(i)))for(c=t.replace(cr,"1").split(ui),f=c.length-1;l<f;l++)i+=c[l]+(~u.indexOf(l)?a.shift()||s+"0,0,0,0)":(d.length?d:a.length?a:r).shift());if(!c)for(c=t.split(cr),f=c.length-1;l<f;l++)i+=c[l]+a[l];return i+c[f]},cr=(function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Ta)e+="|"+t+"\\b";return new RegExp(e+")","gi")})(),pS=/hsl[a]?\(/,M0=function(t){var n=t.join(" "),r;if(cr.lastIndex=0,cr.test(n))return r=pS.test(n),t[1]=D0(t[1],r),t[0]=D0(t[0],r,j0(t[1])),!0},Na,Zt=(function(){var e=Date.now,t=500,n=33,r=e(),i=r,a=1e3/240,s=a,l=[],u,c,d,f,m,p,y=function h(g){var b=e()-i,w=g===!0,T,S,v,j;if((b>t||b<0)&&(r+=b-n),i+=b,v=i-r,T=v-s,(T>0||w)&&(j=++f.frame,m=v-f.time*1e3,f.time=v=v/1e3,s+=T+(T>=a?4:a-T),S=1),w||(u=c(h)),S)for(p=0;p<l.length;p++)l[p](v,m,j,g)};return f={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(g){return m/(1e3/(g||60))},wake:function(){t0&&(!jc&&kc()&&(An=jc=window,Dc=An.document||{},qt.gsap=Vt,(An.gsapVersions||(An.gsapVersions=[])).push(Vt.version),n0(Xs||An.GreenSockGlobals||!An.gsap&&An||{}),k0.forEach(T0)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&f.sleep(),c=d||function(g){return setTimeout(g,s-f.time*1e3+1|0)},Na=1,y(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(u),Na=0,c=_a},lagSmoothing:function(g,b){t=g||1/0,n=Math.min(b||33,t)},fps:function(g){a=1e3/(g||240),s=f.time*1e3+a},add:function(g,b,w){var T=b?function(S,v,j,N){g(S,v,j,N),f.remove(T)}:g;return f.remove(g),l[w?"unshift":"push"](T),gi(),T},remove:function(g,b){~(b=l.indexOf(g))&&l.splice(b,1)&&p>=b&&p--},_listeners:l},f})(),gi=function(){return!Na&&Zt.wake()},He={},gS=/^[\d.\-M][\d.\-,\s]/,bS=/["']/g,yS=function(t){for(var n={},r=t.substr(1,t.length-3).split(":"),i=r[0],a=1,s=r.length,l,u,c;a<s;a++)u=r[a],l=a!==s-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),n[i]=isNaN(c)?c.replace(bS,"").trim():+c,i=u.substr(l+1).trim();return n},vS=function(t){var n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n);return t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)},_S=function(t){var n=(t+"").split("("),r=He[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[yS(n[1])]:vS(t).split(",").map(l0)):He._CE&&gS.test(t)?He._CE("",t):r},P0=function(t){return function(n){return 1-t(1-n)}},I0=function e(t,n){for(var r=t._first,i;r;)r instanceof jt?e(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?e(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},Pr=function(t,n){return t&&(dt(t)?t:He[t]||_S(t))||n},Ir=function(t,n,r,i){r===void 0&&(r=function(u){return 1-n(1-u)}),i===void 0&&(i=function(u){return u<.5?n(u*2)/2:1-n((1-u)*2)/2});var a={easeIn:n,easeOut:r,easeInOut:i},s;return Ut(t,function(l){He[l]=qt[l]=a,He[s=l.toLowerCase()]=r;for(var u in a)He[s+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=He[l+"."+u]=a[u]}),a},F0=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},Uc=function e(t,n,r){var i=n>=1?n:1,a=(r||(t?.3:.45))/(n<1?n:1),s=a/Sc*(Math.asin(1/i)||0),l=function(d){return d===1?1:i*Math.pow(2,-10*d)*qw((d-s)*a)+1},u=t==="out"?l:t==="in"?function(c){return 1-l(1-c)}:F0(l);return a=Sc/a,u.config=function(c,d){return e(t,c,d)},u},Wc=function e(t,n){n===void 0&&(n=1.70158);var r=function(s){return s?--s*s*((n+1)*s+n)+1:0},i=t==="out"?r:t==="in"?function(a){return 1-r(1-a)}:F0(r);return i.config=function(a){return e(t,a)},i};Ut("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;Ir(e+",Power"+(n-1),t?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})}),He.Linear.easeNone=He.none=He.Linear.easeIn,Ir("Elastic",Uc("in"),Uc("out"),Uc()),(function(e,t){var n=1/t,r=2*n,i=2.5*n,a=function(l){return l<n?e*l*l:l<r?e*Math.pow(l-1.5/t,2)+.75:l<i?e*(l-=2.25/t)*l+.9375:e*Math.pow(l-2.625/t,2)+.984375};Ir("Bounce",function(s){return 1-a(1-s)},a)})(7.5625,2.75),Ir("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),Ir("Circ",function(e){return-(Kg(1-e*e)-1)}),Ir("Sine",function(e){return e===1?1:-Yw(e*Vw)+1}),Ir("Back",Wc("in"),Wc("out"),Wc()),He.SteppedEase=He.steps=qt.SteppedEase={config:function(t,n){t===void 0&&(t=1);var r=1/t,i=t+(n?0:1),a=n?1:0,s=1-Je;return function(l){return((i*Sa(0,s,l)|0)+a)*r}}},ci.ease=He["quad.out"],Ut("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return $c+=e+","+e+"Params,"});var $0=function(t,n){this.id=Gw++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:s0,this.set=n?n.getSetter:Xc},ja=(function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,mi(this,+n.duration,1,1),this.data=n.data,it&&(this._ctx=it,it.data.push(this)),Na||Zt.wake()}var t=e.prototype;return t.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},t.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},t.totalDuration=function(r){return arguments.length?(this._dirty=0,mi(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(r,i){if(gi(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(ro(this,r),!a._dp||a.parent||h0(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&En(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Je||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),o0(this,r,i)),this},t.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+f0(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},t.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+f0(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(r,i){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*a,i):this._repeat?hi(this._tTime,a)+1:1},t.timeScale=function(r,i){if(!arguments.length)return this._rts===-Je?0:this._rts;if(this._rts===r)return this;var a=this.parent&&this._ts?to(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Je?0:this._rts,this.totalTime(Sa(-Math.abs(this._delay),this.totalDuration(),a),i!==!1),no(this),tS(this)},t.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(gi(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Je&&(this._tTime-=Je)))),this):this._ps},t.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&En(i,this,r-this._delay),this}return this._start},t.endTime=function(r){return this._start+(zt(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?to(i.rawTime(r),this):this._tTime:this._tTime},t.revert=function(r){r===void 0&&(r=Jw);var i=Nt;return Nt=r,Ac(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Nt=i,this},t.globalTime=function(r){for(var i=this,a=arguments.length?r:i.rawTime();i;)a=i._start+a/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):a},t.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,g0(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,g0(this),i?this.time(i):this}return this._rDelay},t.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},t.seek=function(r,i){return this.totalTime(an(this,r),zt(i))},t.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,zt(i)),this._dur||(this._zTime=-Je),this},t.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},t.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},t.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Je:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Je,this},t.isActive=function(){var r=this.parent||this._dp,i=this._start,a;return!!(!r||this._ts&&this._initted&&r.isActive()&&(a=r.rawTime(!0))>=i&&a<this.endTime(!0)-Je)},t.eventCallback=function(r,i,a){var s=this.vars;return arguments.length>1?(i?(s[r]=i,a&&(s[r+"Params"]=a),r==="onUpdate"&&(this._onUpdate=i)):delete s[r],this):s[r]},t.then=function(r){var i=this;return new Promise(function(a){var s=dt(r)?r:c0,l=function(){var c=i.then;i.then=null,dt(s)&&(s=s(i))&&(s.then||s===i)&&(i.then=c),a(s),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?l():i._prom=l})},t.kill=function(){ka(this)},e})();Kt(ja.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Je,_prom:0,_ps:!1,_rts:1});var jt=(function(e){Xg(t,e);function t(r,i){var a;return r===void 0&&(r={}),a=e.call(this,r)||this,a.labels={},a.smoothChildTiming=!!r.smoothChildTiming,a.autoRemoveChildren=!!r.autoRemoveChildren,a._sort=zt(r.sortChildren),lt&&En(r.parent||lt,Yn(a),i),r.reversed&&a.reverse(),r.paused&&a.paused(!0),r.scrollTrigger&&m0(Yn(a),r.scrollTrigger),a}var n=t.prototype;return n.to=function(i,a,s){return wa(0,arguments,this),this},n.from=function(i,a,s){return wa(1,arguments,this),this},n.fromTo=function(i,a,s,l){return wa(2,arguments,this),this},n.set=function(i,a,s){return a.duration=0,a.parent=this,xa(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new pt(i,a,an(this,s),1),this},n.call=function(i,a,s){return En(this,pt.delayedCall(0,i,a),s)},n.staggerTo=function(i,a,s,l,u,c,d){return s.duration=a,s.stagger=s.stagger||l,s.onComplete=c,s.onCompleteParams=d,s.parent=this,new pt(i,s,an(this,u)),this},n.staggerFrom=function(i,a,s,l,u,c,d){return s.runBackwards=1,xa(s).immediateRender=zt(s.immediateRender),this.staggerTo(i,a,s,l,u,c,d)},n.staggerFromTo=function(i,a,s,l,u,c,d,f){return l.startAt=s,xa(l).immediateRender=zt(l.immediateRender),this.staggerTo(i,a,l,u,c,d,f)},n.render=function(i,a,s){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=i<=0?0:gt(i),f=this._zTime<0!=i<0&&(this._initted||!c),m,p,y,h,g,b,w,T,S,v,j,N;if(this!==lt&&d>u&&i>=0&&(d=u),d!==this._tTime||s||f){if(l!==this._time&&c&&(d+=this._time-l,i+=this._time-l),m=d,S=this._start,T=this._ts,b=!T,f&&(c||(l=this._zTime),(i||!a)&&(this._zTime=i)),this._repeat){if(j=this._yoyo,g=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(g*100+i,a,s);if(m=gt(d%g),d===u?(h=this._repeat,m=c):(v=gt(d/g),h=~~v,h&&h===v&&(m=c,h--),m>c&&(m=c)),v=hi(this._tTime,g),!l&&this._tTime&&v!==h&&this._tTime-v*g-this._dur<=0&&(v=h),j&&h&1&&(m=c-m,N=1),h!==v&&!this._lock){var M=j&&v&1,_=M===(j&&h&1);if(h<v&&(M=!M),l=M?0:d%c?c:d,this._lock=1,this.render(l||(N?0:gt(h*g)),a,!c)._lock=0,this._tTime=d,!a&&this.parent&&Jt(this,"onRepeat"),this.vars.repeatRefresh&&!N&&(this.invalidate()._lock=1),l&&l!==this._time||b!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,_&&(this._lock=2,l=M?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!N&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;I0(this,N)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(w=aS(this,gt(l),gt(m)),w&&(d-=m-(m=w._start))),this._tTime=d,this._time=m,this._act=!T,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,l=0),!l&&d&&!a&&!v&&(Jt(this,"onStart"),this._tTime!==d))return this;if(m>=l&&i>=0)for(p=this._first;p;){if(y=p._next,(p._act||m>=p._start)&&p._ts&&w!==p){if(p.parent!==this)return this.render(i,a,s);if(p.render(p._ts>0?(m-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(m-p._start)*p._ts,a,s),m!==this._time||!this._ts&&!b){w=0,y&&(d+=this._zTime=-Je);break}}p=y}else{p=this._last;for(var P=i<0?i:m;p;){if(y=p._prev,(p._act||P<=p._end)&&p._ts&&w!==p){if(p.parent!==this)return this.render(i,a,s);if(p.render(p._ts>0?(P-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(P-p._start)*p._ts,a,s||Nt&&Ac(p)),m!==this._time||!this._ts&&!b){w=0,y&&(d+=this._zTime=P?-Je:Je);break}}p=y}}if(w&&!a&&(this.pause(),w.render(m>=l?0:-Je)._zTime=m>=l?1:-1,this._ts))return this._start=S,no(this),this.render(i,a,s);this._onUpdate&&!a&&Jt(this,"onUpdate",!0),(d===u&&this._tTime>=this.totalDuration()||!d&&l)&&(S===this._start||Math.abs(T)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(d===u&&this._ts>0||!d&&this._ts<0)&&or(this,1),!a&&!(i<0&&!l)&&(d||l||!u)&&(Jt(this,d===u&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(i,a){var s=this;if(qn(a)||(a=an(this,a,i)),!(i instanceof ja)){if(Pt(i))return i.forEach(function(l){return s.add(l,a)}),this;if(kt(i))return this.addLabel(i,a);if(dt(i))i=pt.delayedCall(0,i);else return this}return this!==i?En(this,i,a):this},n.getChildren=function(i,a,s,l){i===void 0&&(i=!0),a===void 0&&(a=!0),s===void 0&&(s=!0),l===void 0&&(l=-rn);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof pt?a&&u.push(c):(s&&u.push(c),i&&u.push.apply(u,c.getChildren(!0,a,s)))),c=c._next;return u},n.getById=function(i){for(var a=this.getChildren(1,1,1),s=a.length;s--;)if(a[s].vars.id===i)return a[s]},n.remove=function(i){return kt(i)?this.removeLabel(i):dt(i)?this.killTweensOf(i):(i.parent===this&&eo(this,i),i===this._recent&&(this._recent=this._last),Mr(this))},n.totalTime=function(i,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=gt(Zt.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),e.prototype.totalTime.call(this,i,a),this._forcing=0,this):this._tTime},n.addLabel=function(i,a){return this.labels[i]=an(this,a),this},n.removeLabel=function(i){return delete this.labels[i],this},n.addPause=function(i,a,s){var l=pt.delayedCall(0,a||_a,s);return l.data="isPause",this._hasPause=1,En(this,l,an(this,i))},n.removePause=function(i){var a=this._first;for(i=an(this,i);a;)a._start===i&&a.data==="isPause"&&or(a),a=a._next},n.killTweensOf=function(i,a,s){for(var l=this.getTweensOf(i,s),u=l.length;u--;)ur!==l[u]&&l[u].kill(i,a);return this},n.getTweensOf=function(i,a){for(var s=[],l=sn(i),u=this._first,c=qn(a),d;u;)u instanceof pt?Zw(u._targets,l)&&(c?(!ur||u._initted&&u._ts)&&u.globalTime(0)<=a&&u.globalTime(u.totalDuration())>a:!a||u.isActive())&&s.push(u):(d=u.getTweensOf(l,a)).length&&s.push.apply(s,d),u=u._next;return s},n.tweenTo=function(i,a){a=a||{};var s=this,l=an(s,i),u=a,c=u.startAt,d=u.onStart,f=u.onStartParams,m=u.immediateRender,p,y=pt.to(s,Kt({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:a.duration||Math.abs((l-(c&&"time"in c?c.time:s._time))/s.timeScale())||Je,onStart:function(){if(s.pause(),!p){var g=a.duration||Math.abs((l-(c&&"time"in c?c.time:s._time))/s.timeScale());y._dur!==g&&mi(y,g,0,1).render(y._time,!0,!0),p=1}d&&d.apply(y,f||[])}},a));return m?y.render(0):y},n.tweenFromTo=function(i,a,s){return this.tweenTo(a,Kt({startAt:{time:an(this,i)}},s))},n.recent=function(){return this._recent},n.nextLabel=function(i){return i===void 0&&(i=this._time),C0(this,an(this,i))},n.previousLabel=function(i){return i===void 0&&(i=this._time),C0(this,an(this,i),1)},n.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Je)},n.shiftChildren=function(i,a,s){s===void 0&&(s=0);for(var l=this._first,u=this.labels,c;l;)l._start>=s&&(l._start+=i,l._end+=i),l=l._next;if(a)for(c in u)u[c]>=s&&(u[c]+=i);return Mr(this)},n.invalidate=function(i){var a=this._first;for(this._lock=0;a;)a.invalidate(i),a=a._next;return e.prototype.invalidate.call(this,i)},n.clear=function(i){i===void 0&&(i=!0);for(var a=this._first,s;a;)s=a._next,this.remove(a),a=s;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Mr(this)},n.totalDuration=function(i){var a=0,s=this,l=s._last,u=rn,c,d,f;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-i:i));if(s._dirty){for(f=s.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>u&&s._sort&&l._ts&&!s._lock?(s._lock=1,En(s,l,d-l._delay,1)._lock=0):u=d,d<0&&l._ts&&(a-=d,(!f&&!s._dp||f&&f.smoothChildTiming)&&(s._start+=d/s._ts,s._time-=d,s._tTime-=d),s.shiftChildren(-d,!1,-1/0),u=0),l._end>a&&l._ts&&(a=l._end),l=c;mi(s,s===lt&&s._time>a?s._time:a,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(i){if(lt._ts&&(o0(lt,to(i,lt)),i0=Zt.frame),Zt.frame>=a0){a0+=Yt.autoSleep||120;var a=lt._first;if((!a||!a._ts)&&Yt.autoSleep&&Zt._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||Zt.sleep()}}},t})(ja);Kt(jt.prototype,{_lock:0,_hasPause:0,_forcing:0});var xS=function(t,n,r,i,a,s,l){var u=new Wt(this._pt,t,n,0,1,R0,null,a),c=0,d=0,f,m,p,y,h,g,b,w;for(u.b=r,u.e=i,r+="",i+="",(b=~i.indexOf("random("))&&(i=Ca(i)),s&&(w=[r,i],s(w,t,n),r=w[0],i=w[1]),m=r.match(Nc)||[];f=Nc.exec(i);)y=f[0],h=i.substring(c,f.index),p?p=(p+1)%5:h.substr(-5)==="rgba("&&(p=1),y!==m[d++]&&(g=parseFloat(m[d-1])||0,u._pt={_next:u._pt,p:h||d===1?h:",",s:g,c:y.charAt(1)==="="?di(g,y)-g:parseFloat(y)-g,m:p&&p<4?Math.round:0},c=Nc.lastIndex);return u.c=c<i.length?i.substring(c,i.length):"",u.fp=l,(Qg.test(i)||b)&&(u.e=0),this._pt=u,u},Vc=function(t,n,r,i,a,s,l,u,c,d){dt(i)&&(i=i(a||0,t,s));var f=t[n],m=r!=="get"?r:dt(f)?c?t[n.indexOf("set")||!dt(t["get"+n.substr(3)])?n:"get"+n.substr(3)](c):t[n]():f,p=dt(f)?c?TS:B0:qc,y;if(kt(i)&&(~i.indexOf("random(")&&(i=Ca(i)),i.charAt(1)==="="&&(y=di(m,i)+(It(m)||0),(y||y===0)&&(i=y))),!d||m!==i||Gc)return!isNaN(m*i)&&i!==""?(y=new Wt(this._pt,t,n,+m||0,i-(m||0),typeof f=="boolean"?jS:O0,0,p),c&&(y.fp=c),l&&y.modifier(l,this,t),this._pt=y):(!f&&!(n in t)&&Mc(n,i),xS.call(this,t,n,m,i,p,u||Yt.stringFilter,c))},wS=function(t,n,r,i,a){if(dt(t)&&(t=Da(t,a,n,r,i)),!Ln(t)||t.style&&t.nodeType||Pt(t)||Jg(t))return kt(t)?Da(t,a,n,r,i):t;var s={},l;for(l in t)s[l]=Da(t[l],a,n,r,i);return s},L0=function(t,n,r,i,a,s){var l,u,c,d;if(Xt[t]&&(l=new Xt[t]).init(a,l.rawVars?n[t]:wS(n[t],i,a,s,r),r,i,s)!==!1&&(r._pt=u=new Wt(r._pt,a,t,0,1,l.render,l,0,l.priority),r!==pi))for(c=r._ptLookup[r._targets.indexOf(a)],d=l._props.length;d--;)c[l._props[d]]=u;return l},ur,Gc,Yc=function e(t,n,r){var i=t.vars,a=i.ease,s=i.startAt,l=i.immediateRender,u=i.lazy,c=i.onUpdate,d=i.runBackwards,f=i.yoyoEase,m=i.keyframes,p=i.autoRevert,y=t._dur,h=t._startAt,g=t._targets,b=t.parent,w=b&&b.data==="nested"?b.vars.targets:g,T=t._overwrite==="auto"&&!wc,S=t.timeline,v,j,N,M,_,P,k,C,L,D,F,I,$;if(S&&(!m||!a)&&(a="none"),t._ease=Pr(a,ci.ease),t._yEase=f?P0(Pr(f===!0?a:f,ci.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!S&&!!i.runBackwards,!S||m&&!i.stagger){if(C=g[0]?Dr(g[0]).harness:0,I=C&&i[C.prop],v=Qs(i,Pc),h&&(h._zTime<0&&h.progress(1),n<0&&d&&l&&!p?h.render(-1,!0):h.revert(d&&y?Ks:Kw),h._lazy=0),s){if(or(t._startAt=pt.set(g,Kt({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!h&&zt(u),startAt:null,delay:0,onUpdate:c&&function(){return Jt(t,"onUpdate")},stagger:0},s))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(Nt||!l&&!p)&&t._startAt.revert(Ks),l&&y&&n<=0&&r<=0){n&&(t._zTime=n);return}}else if(d&&y&&!h){if(n&&(l=!1),N=Kt({overwrite:!1,data:"isFromStart",lazy:l&&!h&&zt(u),immediateRender:l,stagger:0,parent:b},v),I&&(N[C.prop]=I),or(t._startAt=pt.set(g,N)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(Nt?t._startAt.revert(Ks):t._startAt.render(-1,!0)),t._zTime=n,!l)e(t._startAt,Je,Je);else if(!n)return}for(t._pt=t._ptCache=0,u=y&&zt(u)||u&&!y,j=0;j<g.length;j++){if(_=g[j],k=_._gsap||Lc(g)[j]._gsap,t._ptLookup[j]=D={},Ic[k.id]&&sr.length&&Zs(),F=w===g?j:w.indexOf(_),C&&(L=new C).init(_,I||v,t,F,w)!==!1&&(t._pt=M=new Wt(t._pt,_,L.name,0,1,L.render,L,0,L.priority),L._props.forEach(function(ee){D[ee]=M}),L.priority&&(P=1)),!C||I)for(N in v)Xt[N]&&(L=L0(N,v,t,F,_,w))?L.priority&&(P=1):D[N]=M=Vc.call(t,_,N,"get",v[N],F,w,0,i.stringFilter);t._op&&t._op[j]&&t.kill(_,t._op[j]),T&&t._pt&&(ur=t,lt.killTweensOf(_,D,t.globalTime(n)),$=!t.parent,ur=0),t._pt&&u&&(Ic[k.id]=1)}P&&H0(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!$,m&&n<=0&&S.render(rn,!0,!0)},SS=function(t,n,r,i,a,s,l,u){var c=(t._pt&&t._ptCache||(t._ptCache={}))[n],d,f,m,p;if(!c)for(c=t._ptCache[n]=[],m=t._ptLookup,p=t._targets.length;p--;){if(d=m[p][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return Gc=1,t.vars[n]="+=0",Yc(t,l),Gc=0,u?va(n+" not eligible for reset"):1;c.push(d)}for(p=c.length;p--;)f=c[p],d=f._pt||f,d.s=(i||i===0)&&!a?i:d.s+(i||0)+s*d.c,d.c=r-d.s,f.e&&(f.e=mt(r)+It(f.e)),f.b&&(f.b=d.s+It(f.b))},CS=function(t,n){var r=t[0]?Dr(t[0]).harness:0,i=r&&r.aliases,a,s,l,u;if(!i)return n;a=fi({},n);for(s in i)if(s in a)for(u=i[s].split(","),l=u.length;l--;)a[u[l]]=a[s];return a},kS=function(t,n,r,i){var a=n.ease||i||"power1.inOut",s,l;if(Pt(n))l=r[t]||(r[t]=[]),n.forEach(function(u,c){return l.push({t:c/(n.length-1)*100,v:u,e:a})});else for(s in n)l=r[s]||(r[s]=[]),s==="ease"||l.push({t:parseFloat(t),v:n[s],e:a})},Da=function(t,n,r,i,a){return dt(t)?t.call(n,r,i,a):kt(t)&&~t.indexOf("random(")?Ca(t):t},A0=$c+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",E0={};Ut(A0+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return E0[e]=1});var pt=(function(e){Xg(t,e);function t(r,i,a,s){var l;typeof i=="number"&&(a.duration=i,i=a,a=null),l=e.call(this,s?i:xa(i))||this;var u=l.vars,c=u.duration,d=u.delay,f=u.immediateRender,m=u.stagger,p=u.overwrite,y=u.keyframes,h=u.defaults,g=u.scrollTrigger,b=u.yoyoEase,w=i.parent||lt,T=(Pt(r)||Jg(r)?qn(r[0]):"length"in i)?[r]:sn(r),S,v,j,N,M,_,P,k;if(l._targets=T.length?Lc(T):va("GSAP target "+r+" not found. https://gsap.com",!Yt.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=p,y||m||qs(c)||qs(d)){if(i=l.vars,S=l.timeline=new jt({data:"nested",defaults:h||{},targets:w&&w.data==="nested"?w.vars.targets:T}),S.kill(),S.parent=S._dp=Yn(l),S._start=0,m||qs(c)||qs(d)){if(N=T.length,P=m&&v0(m),Ln(m))for(M in m)~A0.indexOf(M)&&(k||(k={}),k[M]=m[M]);for(v=0;v<N;v++)j=Qs(i,E0),j.stagger=0,b&&(j.yoyoEase=b),k&&fi(j,k),_=T[v],j.duration=+Da(c,Yn(l),v,_,T),j.delay=(+Da(d,Yn(l),v,_,T)||0)-l._delay,!m&&N===1&&j.delay&&(l._delay=d=j.delay,l._start+=d,j.delay=0),S.to(_,j,P?P(v,_,T):0),S._ease=He.none;S.duration()?c=d=0:l.timeline=0}else if(y){xa(Kt(S.vars.defaults,{ease:"none"})),S._ease=Pr(y.ease||i.ease||"none");var C=0,L,D,F;if(Pt(y))y.forEach(function(I){return S.to(T,I,">")}),S.duration();else{j={};for(M in y)M==="ease"||M==="easeEach"||kS(M,y[M],j,y.easeEach);for(M in j)for(L=j[M].sort(function(I,$){return I.t-$.t}),C=0,v=0;v<L.length;v++)D=L[v],F={ease:D.e,duration:(D.t-(v?L[v-1].t:0))/100*c},F[M]=D.v,S.to(T,F,C),C+=F.duration;S.duration()<c&&S.to({},{duration:c-S.duration()})}}c||l.duration(c=S.duration())}else l.timeline=0;return p===!0&&!wc&&(ur=Yn(l),lt.killTweensOf(T),ur=0),En(w,Yn(l),a),i.reversed&&l.reverse(),i.paused&&l.paused(!0),(f||!c&&!y&&l._start===gt(w._time)&&zt(f)&&nS(Yn(l))&&w.data!=="nested")&&(l._tTime=-Je,l.render(Math.max(0,-d)||0)),g&&m0(Yn(l),g),l}var n=t.prototype;return n.render=function(i,a,s){var l=this._time,u=this._tDur,c=this._dur,d=i<0,f=i>u-Je&&!d?u:i<Je?0:i,m,p,y,h,g,b,w,T,S;if(!c)iS(this,i,a,s);else if(f!==this._tTime||!i||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(m=f,T=this.timeline,this._repeat){if(h=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(h*100+i,a,s);if(m=gt(f%h),f===u?(y=this._repeat,m=c):(g=gt(f/h),y=~~g,y&&y===g?(m=c,y--):m>c&&(m=c)),b=this._yoyo&&y&1,b&&(S=this._yEase,m=c-m),g=hi(this._tTime,h),m===l&&!s&&this._initted&&y===g)return this._tTime=f,this;y!==g&&(T&&this._yEase&&I0(T,b),this.vars.repeatRefresh&&!b&&!this._lock&&m!==h&&this._initted&&(this._lock=s=1,this.render(gt(h*y),!0).invalidate()._lock=0))}if(!this._initted){if(p0(this,d?i:m,s,a,f))return this._tTime=0,this;if(l!==this._time&&!(s&&this.vars.repeatRefresh&&y!==g))return this;if(c!==this._dur)return this.render(i,a,s)}if(this._tTime=f,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=w=(S||this._ease)(m/c),this._from&&(this.ratio=w=1-w),!l&&f&&!a&&!g&&(Jt(this,"onStart"),this._tTime!==f))return this;for(p=this._pt;p;)p.r(w,p.d),p=p._next;T&&T.render(i<0?i:T._dur*T._ease(m/this._dur),a,s)||this._startAt&&(this._zTime=i),this._onUpdate&&!a&&(d&&Ec(this,i,a,s),Jt(this,"onUpdate")),this._repeat&&y!==g&&this.vars.onRepeat&&!a&&this.parent&&Jt(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(d&&!this._onUpdate&&Ec(this,i,!0,!0),(i||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&or(this,1),!a&&!(d&&!l)&&(f||l||b)&&(Jt(this,f===u?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),e.prototype.invalidate.call(this,i)},n.resetTo=function(i,a,s,l,u){Na||Zt.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||Yc(this,c),d=this._ease(c/this._dur),SS(this,i,a,s,l,d,c,u)?this.resetTo(i,a,s,l,1):(ro(this,0),this.parent||d0(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(i,a){if(a===void 0&&(a="all"),!i&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?ka(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Nt),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(i,a,ur&&ur.vars.overwrite!==!0)._first||ka(this),this.parent&&s!==this.timeline.totalDuration()&&mi(this,this._dur*this.timeline._tDur/s,0,1),this}var l=this._targets,u=i?sn(i):l,c=this._ptLookup,d=this._pt,f,m,p,y,h,g,b;if((!a||a==="all")&&eS(l,u))return a==="all"&&(this._pt=0),ka(this);for(f=this._op=this._op||[],a!=="all"&&(kt(a)&&(h={},Ut(a,function(w){return h[w]=1}),a=h),a=CS(l,a)),b=l.length;b--;)if(~u.indexOf(l[b])){m=c[b],a==="all"?(f[b]=a,y=m,p={}):(p=f[b]=f[b]||{},y=a);for(h in y)g=m&&m[h],g&&((!("kill"in g.d)||g.d.kill(h)===!0)&&eo(this,g,"_pt"),delete m[h]),p!=="all"&&(p[h]=1)}return this._initted&&!this._pt&&d&&ka(this),this},t.to=function(i,a){return new t(i,a,arguments[2])},t.from=function(i,a){return wa(1,arguments)},t.delayedCall=function(i,a,s,l){return new t(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:a,onReverseComplete:a,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:l})},t.fromTo=function(i,a,s){return wa(2,arguments)},t.set=function(i,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new t(i,a)},t.killTweensOf=function(i,a,s){return lt.killTweensOf(i,a,s)},t})(ja);Kt(pt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Ut("staggerTo,staggerFrom,staggerFromTo",function(e){pt[e]=function(){var t=new jt,n=Oc.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var qc=function(t,n,r){return t[n]=r},B0=function(t,n,r){return t[n](r)},TS=function(t,n,r,i){return t[n](i.fp,r)},NS=function(t,n,r){return t.setAttribute(n,r)},Xc=function(t,n){return dt(t[n])?B0:Cc(t[n])&&t.setAttribute?NS:qc},O0=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},jS=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},R0=function(t,n){var r=n._pt,i="";if(!t&&n.b)i=n.b;else if(t===1&&n.e)i=n.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*t):Math.round((r.s+r.c*t)*1e4)/1e4)+i,r=r._next;i+=n.c}n.set(n.t,n.p,i,n)},Kc=function(t,n){for(var r=n._pt;r;)r.r(t,r.d),r=r._next},DS=function(t,n,r,i){for(var a=this._pt,s;a;)s=a._next,a.p===i&&a.modifier(t,n,r),a=s},MS=function(t){for(var n=this._pt,r,i;n;)i=n._next,n.p===t&&!n.op||n.op===t?eo(this,n,"_pt"):n.dep||(r=1),n=i;return!r},PS=function(t,n,r,i){i.mSet(t,n,i.m.call(i.tween,r,i.mt),i)},H0=function(t){for(var n=t._pt,r,i,a,s;n;){for(r=n._next,i=a;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:s)?n._prev._next=n:a=n,(n._next=i)?i._prev=n:s=n,n=r}t._pt=a},Wt=(function(){function e(n,r,i,a,s,l,u,c,d){this.t=r,this.s=a,this.c=s,this.p=i,this.r=l||O0,this.d=u||this,this.set=c||qc,this.pr=d||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(r,i,a){this.mSet=this.mSet||this.set,this.set=PS,this.m=r,this.mt=a,this.tween=i},e})();Ut($c+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Pc[e]=1}),qt.TweenMax=qt.TweenLite=pt,qt.TimelineLite=qt.TimelineMax=jt,lt=new jt({sortChildren:!1,defaults:ci,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Yt.stringFilter=M0;var Fr=[],io={},IS=[],z0=0,FS=0,Jc=function(t){return(io[t]||IS).map(function(n){return n()})},Zc=function(){var t=Date.now(),n=[];t-z0>2&&(Jc("matchMediaInit"),Fr.forEach(function(r){var i=r.queries,a=r.conditions,s,l,u,c;for(l in i)s=An.matchMedia(i[l]).matches,s&&(u=1),s!==a[l]&&(a[l]=s,c=1);c&&(r.revert(),u&&n.push(r))}),Jc("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),z0=t,Jc("matchMedia"))},U0=(function(){function e(n,r){this.selector=r&&Rc(r),this.data=[],this._r=[],this.isReverted=!1,this.id=FS++,n&&this.add(n)}var t=e.prototype;return t.add=function(r,i,a){dt(r)&&(a=i,i=r,r=dt);var s=this,l=function(){var c=it,d=s.selector,f;return c&&c!==s&&c.data.push(s),a&&(s.selector=Rc(a)),it=s,f=i.apply(s,arguments),dt(f)&&s._r.push(f),it=c,s.selector=d,s.isReverted=!1,f};return s.last=l,r===dt?l(s,function(u){return s.add(null,u)}):r?s[r]=l:l},t.ignore=function(r){var i=it;it=null,r(this),it=i},t.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof e?r.push.apply(r,i.getTweens()):i instanceof pt&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(r,i){var a=this;if(r?(function(){for(var l=a.getTweens(),u=a.data.length,c;u--;)c=a.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,f){return f.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),u=a.data.length;u--;)c=a.data[u],c instanceof jt?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof pt)&&c.revert&&c.revert(r);a._r.forEach(function(d){return d(r,a)}),a.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),i)for(var s=Fr.length;s--;)Fr[s].id===this.id&&Fr.splice(s,1)},t.revert=function(r){this.kill(r||{})},e})(),$S=(function(){function e(n){this.contexts=[],this.scope=n,it&&it.data.push(this)}var t=e.prototype;return t.add=function(r,i,a){Ln(r)||(r={matches:r});var s=new U0(0,a||this.scope),l=s.conditions={},u,c,d;it&&!s.selector&&(s.selector=it.selector),this.contexts.push(s),i=s.add("onMatch",i),s.queries=r;for(c in r)c==="all"?d=1:(u=An.matchMedia(r[c]),u&&(Fr.indexOf(s)<0&&Fr.push(s),(l[c]=u.matches)&&(d=1),u.addListener?u.addListener(Zc):u.addEventListener("change",Zc)));return d&&i(s,function(f){return s.add(null,f)}),this},t.revert=function(r){this.kill(r||{})},t.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},e})(),ao={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(i){return T0(i)})},timeline:function(t){return new jt(t)},getTweensOf:function(t,n){return lt.getTweensOf(t,n)},getProperty:function(t,n,r,i){kt(t)&&(t=sn(t)[0]);var a=Dr(t||{}).get,s=r?c0:l0;return r==="native"&&(r=""),t&&(n?s((Xt[n]&&Xt[n].get||a)(t,n,r,i)):function(l,u,c){return s((Xt[l]&&Xt[l].get||a)(t,l,u,c))})},quickSetter:function(t,n,r){if(t=sn(t),t.length>1){var i=t.map(function(d){return Vt.quickSetter(d,n,r)}),a=i.length;return function(d){for(var f=a;f--;)i[f](d)}}t=t[0]||{};var s=Xt[n],l=Dr(t),u=l.harness&&(l.harness.aliases||{})[n]||n,c=s?function(d){var f=new s;pi._pt=0,f.init(t,r?d+r:d,pi,0,[t]),f.render(1,f),pi._pt&&Kc(1,pi)}:l.set(t,u);return s?c:function(d){return c(t,u,r?d+r:d,l,1)}},quickTo:function(t,n,r){var i,a=Vt.to(t,Kt((i={},i[n]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),s=function(u,c,d){return a.resetTo(n,u,c,d)};return s.tween=a,s},isTweening:function(t){return lt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Pr(t.ease,ci.ease)),u0(ci,t||{})},config:function(t){return u0(Yt,t||{})},registerEffect:function(t){var n=t.name,r=t.effect,i=t.plugins,a=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach(function(l){return l&&!Xt[l]&&!qt[l]&&va(n+" effect requires "+l+" plugin.")}),Fc[n]=function(l,u,c){return r(sn(l),Kt(u||{},a),c)},s&&(jt.prototype[n]=function(l,u,c){return this.add(Fc[n](l,Ln(u)?u:(c=u)&&{},this),c)})},registerEase:function(t,n){He[t]=Pr(n)},parseEase:function(t,n){return arguments.length?Pr(t,n):He},getById:function(t){return lt.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var r=new jt(t),i,a;for(r.smoothChildTiming=zt(t.smoothChildTiming),lt.remove(r),r._dp=0,r._time=r._tTime=lt._time,i=lt._first;i;)a=i._next,(n||!(!i._dur&&i instanceof pt&&i.vars.onComplete===i._targets[0]))&&En(r,i,i._start-i._delay),i=a;return En(lt,r,0),r},context:function(t,n){return t?new U0(t,n):it},matchMedia:function(t){return new $S(t)},matchMediaRefresh:function(){return Fr.forEach(function(t){var n=t.conditions,r,i;for(i in n)n[i]&&(n[i]=!1,r=1);r&&t.revert()})||Zc()},addEventListener:function(t,n){var r=io[t]||(io[t]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(t,n){var r=io[t],i=r&&r.indexOf(n);i>=0&&r.splice(i,1)},utils:{wrap:fS,wrapYoyo:hS,distribute:v0,random:x0,snap:_0,normalize:dS,getUnit:It,clamp:oS,splitColor:N0,toArray:sn,selector:Rc,mapRange:S0,pipe:cS,unitize:uS,interpolate:mS,shuffle:y0},install:n0,effects:Fc,ticker:Zt,updateRoot:jt.updateRoot,plugins:Xt,globalTimeline:lt,core:{PropTween:Wt,globals:r0,Tween:pt,Timeline:jt,Animation:ja,getCache:Dr,_removeLinkedListItem:eo,reverting:function(){return Nt},context:function(t){return t&&it&&(it.data.push(t),t._ctx=it),it},suppressOverwrites:function(t){return wc=t}}};Ut("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return ao[e]=pt[e]}),Zt.add(jt.updateRoot),pi=ao.to({},{duration:0});var LS=function(t,n){for(var r=t._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},AS=function(t,n){var r=t._targets,i,a,s;for(i in n)for(a=r.length;a--;)s=t._ptLookup[a][i],s&&(s=s.d)&&(s._pt&&(s=LS(s,i)),s&&s.modifier&&s.modifier(n[i],t,r[a],i))},Qc=function(t,n){return{name:t,headless:1,rawVars:1,init:function(i,a,s){s._onInit=function(l){var u,c;if(kt(a)&&(u={},Ut(a,function(d){return u[d]=1}),a=u),n){u={};for(c in a)u[c]=n(a[c]);a=u}AS(l,a)}}}},Vt=ao.registerPlugin({name:"attr",init:function(t,n,r,i,a){var s,l,u;this.tween=r;for(s in n)u=t.getAttribute(s)||"",l=this.add(t,"setAttribute",(u||0)+"",n[s],i,a,0,0,s),l.op=s,l.b=u,this._props.push(s)},render:function(t,n){for(var r=n._pt;r;)Nt?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",headless:1,init:function(t,n){for(var r=n.length;r--;)this.add(t,r,t[r]||0,n[r],0,0,0,0,0,1)}},Qc("roundProps",Hc),Qc("modifiers"),Qc("snap",_0))||ao;pt.version=jt.version=Vt.version="3.13.0",t0=1,kc()&&gi();var ES=He.Power0,BS=He.Power1,OS=He.Power2,RS=He.Power3,HS=He.Power4,zS=He.Linear,US=He.Quad,WS=He.Cubic,VS=He.Quart,GS=He.Quint,YS=He.Strong,qS=He.Elastic,XS=He.Back,KS=He.SteppedEase,JS=He.Bounce,ZS=He.Sine,QS=He.Expo,eC=He.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var W0,dr,bi,eu,$r,V0,tu,tC=function(){return typeof window<"u"},Xn={},Lr=180/Math.PI,yi=Math.PI/180,vi=Math.atan2,G0=1e8,nu=/([A-Z])/g,nC=/(left|right|width|margin|padding|x)/i,rC=/[\s,\(]\S/,Bn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ru=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},iC=function(t,n){return n.set(n.t,n.p,t===1?n.e:Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},aC=function(t,n){return n.set(n.t,n.p,t?Math.round((n.s+n.c*t)*1e4)/1e4+n.u:n.b,n)},sC=function(t,n){var r=n.s+n.c*t;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},Y0=function(t,n){return n.set(n.t,n.p,t?n.e:n.b,n)},q0=function(t,n){return n.set(n.t,n.p,t!==1?n.b:n.e,n)},oC=function(t,n,r){return t.style[n]=r},lC=function(t,n,r){return t.style.setProperty(n,r)},cC=function(t,n,r){return t._gsap[n]=r},uC=function(t,n,r){return t._gsap.scaleX=t._gsap.scaleY=r},dC=function(t,n,r,i,a){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(a,s)},fC=function(t,n,r,i,a){var s=t._gsap;s[n]=r,s.renderTransform(a,s)},ct="transform",Gt=ct+"Origin",hC=function e(t,n){var r=this,i=this.target,a=i.style,s=i._gsap;if(t in Xn&&a){if(this.tfm=this.tfm||{},t!=="transform")t=Bn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return r.tfm[l]=Kn(i,l)}):this.tfm[t]=s.x?s[t]:Kn(i,t),t===Gt&&(this.tfm.zOrigin=s.zOrigin);else return Bn.transform.split(",").forEach(function(l){return e.call(r,l,n)});if(this.props.indexOf(ct)>=0)return;s.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Gt,n,"")),t=ct}(a||n)&&this.props.push(t,n,a[t])},X0=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},mC=function(){var t=this.props,n=this.target,r=n.style,i=n._gsap,a,s;for(a=0;a<t.length;a+=3)t[a+1]?t[a+1]===2?n[t[a]](t[a+2]):n[t[a]]=t[a+2]:t[a+2]?r[t[a]]=t[a+2]:r.removeProperty(t[a].substr(0,2)==="--"?t[a]:t[a].replace(nu,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)i[s]=this.tfm[s];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),a=tu(),(!a||!a.isStart)&&!r[ct]&&(X0(r),i.zOrigin&&r[Gt]&&(r[Gt]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},K0=function(t,n){var r={target:t,props:[],revert:mC,save:hC};return t._gsap||Vt.core.getCache(t),n&&t.style&&t.nodeType&&n.split(",").forEach(function(i){return r.save(i)}),r},J0,iu=function(t,n){var r=dr.createElementNS?dr.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):dr.createElement(t);return r&&r.style?r:dr.createElement(t)},on=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(nu,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,_i(n)||n,1)||""},Z0="O,Moz,ms,Ms,Webkit".split(","),_i=function(t,n,r){var i=n||$r,a=i.style,s=5;if(t in a&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(Z0[s]+t in a););return s<0?null:(s===3?"ms":s>=0?Z0[s]:"")+t},au=function(){tC()&&window.document&&(W0=window,dr=W0.document,bi=dr.documentElement,$r=iu("div")||{style:{}},iu("div"),ct=_i(ct),Gt=ct+"Origin",$r.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",J0=!!_i("perspective"),tu=Vt.core.reverting,eu=1)},Q0=function(t){var n=t.ownerSVGElement,r=iu("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=t.cloneNode(!0),a;i.style.display="block",r.appendChild(i),bi.appendChild(r);try{a=i.getBBox()}catch{}return r.removeChild(i),bi.removeChild(r),a},eb=function(t,n){for(var r=n.length;r--;)if(t.hasAttribute(n[r]))return t.getAttribute(n[r])},tb=function(t){var n,r;try{n=t.getBBox()}catch{n=Q0(t),r=1}return n&&(n.width||n.height)||r||(n=Q0(t)),n&&!n.width&&!n.x&&!n.y?{x:+eb(t,["x","cx","x1"])||0,y:+eb(t,["y","cy","y1"])||0,width:0,height:0}:n},nb=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&tb(t))},Ar=function(t,n){if(n){var r=t.style,i;n in Xn&&n!==Gt&&(n=ct),r.removeProperty?(i=n.substr(0,2),(i==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(i==="--"?n:n.replace(nu,"-$1").toLowerCase())):r.removeAttribute(n)}},fr=function(t,n,r,i,a,s){var l=new Wt(t._pt,n,r,0,1,s?q0:Y0);return t._pt=l,l.b=i,l.e=a,t._props.push(r),l},rb={deg:1,rad:1,turn:1},pC={grid:1,flex:1},hr=function e(t,n,r,i){var a=parseFloat(r)||0,s=(r+"").trim().substr((a+"").length)||"px",l=$r.style,u=nC.test(n),c=t.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(u?"Width":"Height"),f=100,m=i==="px",p=i==="%",y,h,g,b;if(i===s||!a||rb[i]||rb[s])return a;if(s!=="px"&&!m&&(a=e(t,n,r,"px")),b=t.getCTM&&nb(t),(p||s==="%")&&(Xn[n]||~n.indexOf("adius")))return y=b?t.getBBox()[u?"width":"height"]:t[d],mt(p?a/y*f:a/100*y);if(l[u?"width":"height"]=f+(m?s:i),h=i!=="rem"&&~n.indexOf("adius")||i==="em"&&t.appendChild&&!c?t:t.parentNode,b&&(h=(t.ownerSVGElement||{}).parentNode),(!h||h===dr||!h.appendChild)&&(h=dr.body),g=h._gsap,g&&p&&g.width&&u&&g.time===Zt.time&&!g.uncache)return mt(a/g.width*f);if(p&&(n==="height"||n==="width")){var w=t.style[n];t.style[n]=f+i,y=t[d],w?t.style[n]=w:Ar(t,n)}else(p||s==="%")&&!pC[on(h,"display")]&&(l.position=on(t,"position")),h===t&&(l.position="static"),h.appendChild($r),y=$r[d],h.removeChild($r),l.position="absolute";return u&&p&&(g=Dr(h),g.time=Zt.time,g.width=h[d]),mt(m?y*a/f:y&&a?f/y*a:0)},Kn=function(t,n,r,i){var a;return eu||au(),n in Bn&&n!=="transform"&&(n=Bn[n],~n.indexOf(",")&&(n=n.split(",")[0])),Xn[n]&&n!=="transform"?(a=Pa(t,i),a=n!=="transformOrigin"?a[n]:a.svg?a.origin:oo(on(t,Gt))+" "+a.zOrigin+"px"):(a=t.style[n],(!a||a==="auto"||i||~(a+"").indexOf("calc("))&&(a=so[n]&&so[n](t,n,r)||on(t,n)||s0(t,n)||(n==="opacity"?1:0))),r&&!~(a+"").trim().indexOf(" ")?hr(t,n,a,r)+r:a},gC=function(t,n,r,i){if(!r||r==="none"){var a=_i(n,t,1),s=a&&on(t,a,1);s&&s!==r?(n=a,r=s):n==="borderColor"&&(r=on(t,"borderTopColor"))}var l=new Wt(this._pt,t.style,n,0,1,R0),u=0,c=0,d,f,m,p,y,h,g,b,w,T,S,v;if(l.b=r,l.e=i,r+="",i+="",i.substring(0,6)==="var(--"&&(i=on(t,i.substring(4,i.indexOf(")")))),i==="auto"&&(h=t.style[n],t.style[n]=i,i=on(t,n)||i,h?t.style[n]=h:Ar(t,n)),d=[r,i],M0(d),r=d[0],i=d[1],m=r.match(ui)||[],v=i.match(ui)||[],v.length){for(;f=ui.exec(i);)g=f[0],w=i.substring(u,f.index),y?y=(y+1)%5:(w.substr(-5)==="rgba("||w.substr(-5)==="hsla(")&&(y=1),g!==(h=m[c++]||"")&&(p=parseFloat(h)||0,S=h.substr((p+"").length),g.charAt(1)==="="&&(g=di(p,g)+S),b=parseFloat(g),T=g.substr((b+"").length),u=ui.lastIndex-T.length,T||(T=T||Yt.units[n]||S,u===i.length&&(i+=T,l.e+=T)),S!==T&&(p=hr(t,n,h,T)||0),l._pt={_next:l._pt,p:w||c===1?w:",",s:p,c:b-p,m:y&&y<4||n==="zIndex"?Math.round:0});l.c=u<i.length?i.substring(u,i.length):""}else l.r=n==="display"&&i==="none"?q0:Y0;return Qg.test(i)&&(l.e=0),this._pt=l,l},ib={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},bC=function(t){var n=t.split(" "),r=n[0],i=n[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(t=r,r=i,i=t),n[0]=ib[r]||r,n[1]=ib[i]||i,n.join(" ")},yC=function(t,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,i=r.style,a=n.u,s=r._gsap,l,u,c;if(a==="all"||a===!0)i.cssText="",u=1;else for(a=a.split(","),c=a.length;--c>-1;)l=a[c],Xn[l]&&(u=1,l=l==="transformOrigin"?Gt:ct),Ar(r,l);u&&(Ar(r,ct),s&&(s.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Pa(r,1),s.uncache=1,X0(i)))}},so={clearProps:function(t,n,r,i,a){if(a.data!=="isFromStart"){var s=t._pt=new Wt(t._pt,n,r,0,0,yC);return s.u=i,s.pr=-10,s.tween=a,t._props.push(r),1}}},Ma=[1,0,0,1,0,0],ab={},sb=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},ob=function(t){var n=on(t,ct);return sb(n)?Ma:n.substr(7).match(Zg).map(mt)},su=function(t,n){var r=t._gsap||Dr(t),i=t.style,a=ob(t),s,l,u,c;return r.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,a=[u.a,u.b,u.c,u.d,u.e,u.f],a.join(",")==="1,0,0,1,0,0"?Ma:a):(a===Ma&&!t.offsetParent&&t!==bi&&!r.svg&&(u=i.display,i.display="block",s=t.parentNode,(!s||!t.offsetParent&&!t.getBoundingClientRect().width)&&(c=1,l=t.nextElementSibling,bi.appendChild(t)),a=ob(t),u?i.display=u:Ar(t,"display"),c&&(l?s.insertBefore(t,l):s?s.appendChild(t):bi.removeChild(t))),n&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},ou=function(t,n,r,i,a,s){var l=t._gsap,u=a||su(t,!0),c=l.xOrigin||0,d=l.yOrigin||0,f=l.xOffset||0,m=l.yOffset||0,p=u[0],y=u[1],h=u[2],g=u[3],b=u[4],w=u[5],T=n.split(" "),S=parseFloat(T[0])||0,v=parseFloat(T[1])||0,j,N,M,_;r?u!==Ma&&(N=p*g-y*h)&&(M=S*(g/N)+v*(-h/N)+(h*w-g*b)/N,_=S*(-y/N)+v*(p/N)-(p*w-y*b)/N,S=M,v=_):(j=tb(t),S=j.x+(~T[0].indexOf("%")?S/100*j.width:S),v=j.y+(~(T[1]||T[0]).indexOf("%")?v/100*j.height:v)),i||i!==!1&&l.smooth?(b=S-c,w=v-d,l.xOffset=f+(b*p+w*h)-b,l.yOffset=m+(b*y+w*g)-w):l.xOffset=l.yOffset=0,l.xOrigin=S,l.yOrigin=v,l.smooth=!!i,l.origin=n,l.originIsAbsolute=!!r,t.style[Gt]="0px 0px",s&&(fr(s,l,"xOrigin",c,S),fr(s,l,"yOrigin",d,v),fr(s,l,"xOffset",f,l.xOffset),fr(s,l,"yOffset",m,l.yOffset)),t.setAttribute("data-svg-origin",S+" "+v)},Pa=function(t,n){var r=t._gsap||new $0(t);if("x"in r&&!n&&!r.uncache)return r;var i=t.style,a=r.scaleX<0,s="px",l="deg",u=getComputedStyle(t),c=on(t,Gt)||"0",d,f,m,p,y,h,g,b,w,T,S,v,j,N,M,_,P,k,C,L,D,F,I,$,ee,Y,H,U,z,ie,W,le;return d=f=m=h=g=b=w=T=S=0,p=y=1,r.svg=!!(t.getCTM&&nb(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(i[ct]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[ct]!=="none"?u[ct]:"")),i.scale=i.rotate=i.translate="none"),N=su(t,r.svg),r.svg&&(r.uncache?(ee=t.getBBox(),c=r.xOrigin-ee.x+"px "+(r.yOrigin-ee.y)+"px",$=""):$=!n&&t.getAttribute("data-svg-origin"),ou(t,$||c,!!$||r.originIsAbsolute,r.smooth!==!1,N)),v=r.xOrigin||0,j=r.yOrigin||0,N!==Ma&&(k=N[0],C=N[1],L=N[2],D=N[3],d=F=N[4],f=I=N[5],N.length===6?(p=Math.sqrt(k*k+C*C),y=Math.sqrt(D*D+L*L),h=k||C?vi(C,k)*Lr:0,w=L||D?vi(L,D)*Lr+h:0,w&&(y*=Math.abs(Math.cos(w*yi))),r.svg&&(d-=v-(v*k+j*L),f-=j-(v*C+j*D))):(le=N[6],ie=N[7],H=N[8],U=N[9],z=N[10],W=N[11],d=N[12],f=N[13],m=N[14],M=vi(le,z),g=M*Lr,M&&(_=Math.cos(-M),P=Math.sin(-M),$=F*_+H*P,ee=I*_+U*P,Y=le*_+z*P,H=F*-P+H*_,U=I*-P+U*_,z=le*-P+z*_,W=ie*-P+W*_,F=$,I=ee,le=Y),M=vi(-L,z),b=M*Lr,M&&(_=Math.cos(-M),P=Math.sin(-M),$=k*_-H*P,ee=C*_-U*P,Y=L*_-z*P,W=D*P+W*_,k=$,C=ee,L=Y),M=vi(C,k),h=M*Lr,M&&(_=Math.cos(M),P=Math.sin(M),$=k*_+C*P,ee=F*_+I*P,C=C*_-k*P,I=I*_-F*P,k=$,F=ee),g&&Math.abs(g)+Math.abs(h)>359.9&&(g=h=0,b=180-b),p=mt(Math.sqrt(k*k+C*C+L*L)),y=mt(Math.sqrt(I*I+le*le)),M=vi(F,I),w=Math.abs(M)>2e-4?M*Lr:0,S=W?1/(W<0?-W:W):0),r.svg&&($=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!sb(on(t,ct)),$&&t.setAttribute("transform",$))),Math.abs(w)>90&&Math.abs(w)<270&&(a?(p*=-1,w+=h<=0?180:-180,h+=h<=0?180:-180):(y*=-1,w+=w<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-d)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+s,r.y=f-((r.yPercent=f&&(!n&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-f)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+s,r.z=m+s,r.scaleX=mt(p),r.scaleY=mt(y),r.rotation=mt(h)+l,r.rotationX=mt(g)+l,r.rotationY=mt(b)+l,r.skewX=w+l,r.skewY=T+l,r.transformPerspective=S+s,(r.zOrigin=parseFloat(c.split(" ")[2])||!n&&r.zOrigin||0)&&(i[Gt]=oo(c)),r.xOffset=r.yOffset=0,r.force3D=Yt.force3D,r.renderTransform=r.svg?_C:J0?lb:vC,r.uncache=0,r},oo=function(t){return(t=t.split(" "))[0]+" "+t[1]},lu=function(t,n,r){var i=It(n);return mt(parseFloat(n)+parseFloat(hr(t,"x",r+"px",i)))+i},vC=function(t,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,lb(t,n)},Er="0deg",Ia="0px",Br=") ",lb=function(t,n){var r=n||this,i=r.xPercent,a=r.yPercent,s=r.x,l=r.y,u=r.z,c=r.rotation,d=r.rotationY,f=r.rotationX,m=r.skewX,p=r.skewY,y=r.scaleX,h=r.scaleY,g=r.transformPerspective,b=r.force3D,w=r.target,T=r.zOrigin,S="",v=b==="auto"&&t&&t!==1||b===!0;if(T&&(f!==Er||d!==Er)){var j=parseFloat(d)*yi,N=Math.sin(j),M=Math.cos(j),_;j=parseFloat(f)*yi,_=Math.cos(j),s=lu(w,s,N*_*-T),l=lu(w,l,-Math.sin(j)*-T),u=lu(w,u,M*_*-T+T)}g!==Ia&&(S+="perspective("+g+Br),(i||a)&&(S+="translate("+i+"%, "+a+"%) "),(v||s!==Ia||l!==Ia||u!==Ia)&&(S+=u!==Ia||v?"translate3d("+s+", "+l+", "+u+") ":"translate("+s+", "+l+Br),c!==Er&&(S+="rotate("+c+Br),d!==Er&&(S+="rotateY("+d+Br),f!==Er&&(S+="rotateX("+f+Br),(m!==Er||p!==Er)&&(S+="skew("+m+", "+p+Br),(y!==1||h!==1)&&(S+="scale("+y+", "+h+Br),w.style[ct]=S||"translate(0, 0)"},_C=function(t,n){var r=n||this,i=r.xPercent,a=r.yPercent,s=r.x,l=r.y,u=r.rotation,c=r.skewX,d=r.skewY,f=r.scaleX,m=r.scaleY,p=r.target,y=r.xOrigin,h=r.yOrigin,g=r.xOffset,b=r.yOffset,w=r.forceCSS,T=parseFloat(s),S=parseFloat(l),v,j,N,M,_;u=parseFloat(u),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,u+=d),u||c?(u*=yi,c*=yi,v=Math.cos(u)*f,j=Math.sin(u)*f,N=Math.sin(u-c)*-m,M=Math.cos(u-c)*m,c&&(d*=yi,_=Math.tan(c-d),_=Math.sqrt(1+_*_),N*=_,M*=_,d&&(_=Math.tan(d),_=Math.sqrt(1+_*_),v*=_,j*=_)),v=mt(v),j=mt(j),N=mt(N),M=mt(M)):(v=f,M=m,j=N=0),(T&&!~(s+"").indexOf("px")||S&&!~(l+"").indexOf("px"))&&(T=hr(p,"x",s,"px"),S=hr(p,"y",l,"px")),(y||h||g||b)&&(T=mt(T+y-(y*v+h*N)+g),S=mt(S+h-(y*j+h*M)+b)),(i||a)&&(_=p.getBBox(),T=mt(T+i/100*_.width),S=mt(S+a/100*_.height)),_="matrix("+v+","+j+","+N+","+M+","+T+","+S+")",p.setAttribute("transform",_),w&&(p.style[ct]=_)},xC=function(t,n,r,i,a){var s=360,l=kt(a),u=parseFloat(a)*(l&&~a.indexOf("rad")?Lr:1),c=u-i,d=i+c+"deg",f,m;return l&&(f=a.split("_")[1],f==="short"&&(c%=s,c!==c%(s/2)&&(c+=c<0?s:-s)),f==="cw"&&c<0?c=(c+s*G0)%s-~~(c/s)*s:f==="ccw"&&c>0&&(c=(c-s*G0)%s-~~(c/s)*s)),t._pt=m=new Wt(t._pt,n,r,i,c,iC),m.e=d,m.u="deg",t._props.push(r),m},cb=function(t,n){for(var r in n)t[r]=n[r];return t},wC=function(t,n,r){var i=cb({},r._gsap),a="perspective,force3D,transformOrigin,svgOrigin",s=r.style,l,u,c,d,f,m,p,y;i.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),s[ct]=n,l=Pa(r,1),Ar(r,ct),r.setAttribute("transform",c)):(c=getComputedStyle(r)[ct],s[ct]=n,l=Pa(r,1),s[ct]=c);for(u in Xn)c=i[u],d=l[u],c!==d&&a.indexOf(u)<0&&(p=It(c),y=It(d),f=p!==y?hr(r,u,c,y):parseFloat(c),m=parseFloat(d),t._pt=new Wt(t._pt,l,u,f,m-f,ru),t._pt.u=y||0,t._props.push(u));cb(l,i)};Ut("padding,margin,Width,Radius",function(e,t){var n="Top",r="Right",i="Bottom",a="Left",s=(t<3?[n,r,i,a]:[n+a,n+r,i+r,i+a]).map(function(l){return t<2?e+l:"border"+l+e});so[t>1?"border"+e:e]=function(l,u,c,d,f){var m,p;if(arguments.length<4)return m=s.map(function(y){return Kn(l,y,c)}),p=m.join(" "),p.split(m[0]).length===5?m[0]:p;m=(d+"").split(" "),p={},s.forEach(function(y,h){return p[y]=m[h]=m[h]||m[(h-1)/2|0]}),l.init(u,p,f)}});var cu={name:"css",register:au,targetTest:function(t){return t.style&&t.nodeType},init:function(t,n,r,i,a){var s=this._props,l=t.style,u=r.vars.startAt,c,d,f,m,p,y,h,g,b,w,T,S,v,j,N,M;eu||au(),this.styles=this.styles||K0(t),M=this.styles.props,this.tween=r;for(h in n)if(h!=="autoRound"&&(d=n[h],!(Xt[h]&&L0(h,n,r,i,t,a)))){if(p=typeof d,y=so[h],p==="function"&&(d=d.call(r,i,t,a),p=typeof d),p==="string"&&~d.indexOf("random(")&&(d=Ca(d)),y)y(this,t,h,d,r)&&(N=1);else if(h.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(h)+"").trim(),d+="",cr.lastIndex=0,cr.test(c)||(g=It(c),b=It(d)),b?g!==b&&(c=hr(t,h,c,b)+b):g&&(d+=g),this.add(l,"setProperty",c,d,i,a,0,0,h),s.push(h),M.push(h,0,l[h]);else if(p!=="undefined"){if(u&&h in u?(c=typeof u[h]=="function"?u[h].call(r,i,t,a):u[h],kt(c)&&~c.indexOf("random(")&&(c=Ca(c)),It(c+"")||c==="auto"||(c+=Yt.units[h]||It(Kn(t,h))||""),(c+"").charAt(1)==="="&&(c=Kn(t,h))):c=Kn(t,h),m=parseFloat(c),w=p==="string"&&d.charAt(1)==="="&&d.substr(0,2),w&&(d=d.substr(2)),f=parseFloat(d),h in Bn&&(h==="autoAlpha"&&(m===1&&Kn(t,"visibility")==="hidden"&&f&&(m=0),M.push("visibility",0,l.visibility),fr(this,l,"visibility",m?"inherit":"hidden",f?"inherit":"hidden",!f)),h!=="scale"&&h!=="transform"&&(h=Bn[h],~h.indexOf(",")&&(h=h.split(",")[0]))),T=h in Xn,T){if(this.styles.save(h),p==="string"&&d.substring(0,6)==="var(--"&&(d=on(t,d.substring(4,d.indexOf(")"))),f=parseFloat(d)),S||(v=t._gsap,v.renderTransform&&!n.parseTransform||Pa(t,n.parseTransform),j=n.smoothOrigin!==!1&&v.smooth,S=this._pt=new Wt(this._pt,l,ct,0,1,v.renderTransform,v,0,-1),S.dep=1),h==="scale")this._pt=new Wt(this._pt,v,"scaleY",v.scaleY,(w?di(v.scaleY,w+f):f)-v.scaleY||0,ru),this._pt.u=0,s.push("scaleY",h),h+="X";else if(h==="transformOrigin"){M.push(Gt,0,l[Gt]),d=bC(d),v.svg?ou(t,d,0,j,0,this):(b=parseFloat(d.split(" ")[2])||0,b!==v.zOrigin&&fr(this,v,"zOrigin",v.zOrigin,b),fr(this,l,h,oo(c),oo(d)));continue}else if(h==="svgOrigin"){ou(t,d,1,j,0,this);continue}else if(h in ab){xC(this,v,h,m,w?di(m,w+d):d);continue}else if(h==="smoothOrigin"){fr(this,v,"smooth",v.smooth,d);continue}else if(h==="force3D"){v[h]=d;continue}else if(h==="transform"){wC(this,d,t);continue}}else h in l||(h=_i(h)||h);if(T||(f||f===0)&&(m||m===0)&&!rC.test(d)&&h in l)g=(c+"").substr((m+"").length),f||(f=0),b=It(d)||(h in Yt.units?Yt.units[h]:g),g!==b&&(m=hr(t,h,c,b)),this._pt=new Wt(this._pt,T?v:l,h,m,(w?di(m,w+f):f)-m,!T&&(b==="px"||h==="zIndex")&&n.autoRound!==!1?sC:ru),this._pt.u=b||0,g!==b&&b!=="%"&&(this._pt.b=c,this._pt.r=aC);else if(h in l)gC.call(this,t,h,c,w?w+d:d);else if(h in t)this.add(t,h,c||t[h],w?w+d:d,i,a);else if(h!=="parseTransform"){Mc(h,d);continue}T||(h in l?M.push(h,0,l[h]):typeof t[h]=="function"?M.push(h,2,t[h]()):M.push(h,1,c||t[h])),s.push(h)}}N&&H0(this)},render:function(t,n){if(n.tween._time||!tu())for(var r=n._pt;r;)r.r(t,r.d),r=r._next;else n.styles.revert()},get:Kn,aliases:Bn,getSetter:function(t,n,r){var i=Bn[n];return i&&i.indexOf(",")<0&&(n=i),n in Xn&&n!==Gt&&(t._gsap.x||Kn(t,"x"))?r&&V0===r?n==="scale"?uC:cC:(V0=r||{})&&(n==="scale"?dC:fC):t.style&&!Cc(t.style[n])?oC:~n.indexOf("-")?lC:Xc(t,n)},core:{_removeProperty:Ar,_getMatrix:su}};Vt.utils.checkPrefix=_i,Vt.core.getStyleSaver=K0,(function(e,t,n,r){var i=Ut(e+","+t+","+n,function(a){Xn[a]=1});Ut(t,function(a){Yt.units[a]="deg",ab[a]=1}),Bn[i[13]]=e+","+t,Ut(r,function(a){var s=a.split(":");Bn[s[1]]=i[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),Ut("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){Yt.units[e]="px"}),Vt.registerPlugin(cu);var uu=Vt.registerPlugin(cu)||Vt,SC=uu.core.Tween;const CC=Object.freeze(Object.defineProperty({__proto__:null,Back:XS,Bounce:JS,CSSPlugin:cu,Circ:eC,Cubic:WS,Elastic:qS,Expo:QS,Linear:zS,Power0:ES,Power1:BS,Power2:OS,Power3:RS,Power4:HS,Quad:US,Quart:VS,Quint:GS,Sine:ZS,SteppedEase:KS,Strong:YS,TimelineLite:jt,TimelineMax:jt,TweenLite:pt,TweenMax:SC,default:uu,gsap:uu},Symbol.toStringTag,{value:"Module"}));x.Account=po,x.ActionLink=xb,x.AdaptiveDataGrid=el,x.AnimationDurationFast=hh,x.AnimationDurationNormal=mh,x.AnimationDurationSlow=ph,x.AnimationEasingBounce=vh,x.AnimationEasingEaseIn=gh,x.AnimationEasingEaseInOut=yh,x.AnimationEasingEaseOut=bh,x.AppointmentCard=Jo,x.AreaSeriesPrimitive=m1,x.AriaDataGrid=Ed,x.AriaTabsDataGrid=us,x.AriaTabsDataGridAdaptive=el,x.Axis=cl,x.BackLink=Ra,x.BandScalesProvider=g1,x.BarSeriesPrimitive=p1,x.BorderColorCard=Fl,x.BorderColorCardHover=$l,x.BorderColorDefault=Pl,x.BorderColorError=Ll,x.BorderColorForm=Il,x.BorderRadiusLarge=$h,x.BorderRadiusMedium=Fh,x.BorderRadiusNone=Ph,x.BorderRadiusSmall=Ih,x.BorderWidthCardBottom=Nh,x.BorderWidthDefault=Ch,x.BorderWidthFormElement=kh,x.BorderWidthFormElementError=Th,x.BorderWidthPanel=jh,x.BorderWidthTableCell=Mh,x.BorderWidthTableHeader=Dh,x.Breadcrumb=kd,x.Breakpoint=Cu,x.BreakpointDesktop=mg,x.BreakpointLargeDesktop=pg,x.BreakpointMobile=fg,x.BreakpointTablet=hg,x.Button=xt,x.ButtonBorderRadius=cp,x.ButtonBorderWidth=lp,x.ButtonPrimaryBackgroundActive=Km,x.ButtonPrimaryBackgroundDefault=qm,x.ButtonPrimaryBackgroundDisabled=Jm,x.ButtonPrimaryBackgroundHover=Xm,x.ButtonPrimaryBorderDefault=ep,x.ButtonPrimaryBorderFocus=tp,x.ButtonPrimaryTextDefault=Zm,x.ButtonPrimaryTextDisabled=Qm,x.ButtonSecondaryBackgroundActive=ap,x.ButtonSecondaryBackgroundDefault=np,x.ButtonSecondaryBackgroundHover=ip,x.ButtonSecondaryBackgroundSolid=rp,x.ButtonSecondaryBorderDefault=op,x.ButtonSecondaryTextDefault=sp,x.ButtonShadowSize=up,x.ButtonSize=bo,x.ButtonSpacingPaddingHorizontalDesktop=rc,x.ButtonSpacingPaddingHorizontalMobile=tc,x.ButtonSpacingPaddingVerticalDesktop=nc,x.ButtonSpacingPaddingVerticalMobile=ec,x.ButtonTypographyWeight=dp,x.ButtonVariant=go,x.Card=Yo,x.CardBackgroundDefault=fp,x.CardBorderBottom=pp,x.CardBorderDefault=hp,x.CardBorderHover=mp,x.CardBorderWidthBottom=_p,x.CardBorderWidthDefault=vp,x.CardGroup=k_,x.CardGroupItem=T_,x.CardShadowDefault=xp,x.CardShadowHover=wp,x.CardSpacingHeadingMargin=sc,x.CardSpacingPaddingDesktop=ac,x.CardSpacingPaddingMobile=ic,x.CardTextDescription=bp,x.CardTextHeading=gp,x.CardTextLink=yp,x.CareCard=N_,x.CharacterCount=Pb,x.ChartEnhancer=y1,x.ChartNoScript=b1,x.ChartRoot=vf,x.Checkbox=yu,x.Checkboxes=_u,x.ColorBorderDefault=Vh,x.ColorBorderSecondary=Gh,x.ColorButtonLoginActive=vm,x.ColorButtonLoginBackground=bm,x.ColorButtonLoginHover=ym,x.ColorButtonLoginShadow=_m,x.ColorButtonPrimaryActive=Qh,x.ColorButtonPrimaryBackground=Kh,x.ColorButtonPrimaryHover=Zh,x.ColorButtonPrimaryShadow=em,x.ColorButtonPrimaryText=Jh,x.ColorButtonReverseActive=dm,x.ColorButtonReverseBackground=lm,x.ColorButtonReverseHover=um,x.ColorButtonReverseShadow=fm,x.ColorButtonReverseText=cm,x.ColorButtonSecondaryActive=sm,x.ColorButtonSecondaryBackground=tm,x.ColorButtonSecondaryBackgroundSolid=nm,x.ColorButtonSecondaryBorder=rm,x.ColorButtonSecondaryHover=am,x.ColorButtonSecondaryShadow=om,x.ColorButtonSecondaryText=im,x.ColorButtonWarningActive=pm,x.ColorButtonWarningBackground=hm,x.ColorButtonWarningHover=mm,x.ColorButtonWarningShadow=gm,x.ColorError=Yh,x.ColorFocusBackground=Uh,x.ColorFocusText=Wh,x.ColorFormBackground=Xh,x.ColorFormBorder=qh,x.ColorGrey1=Xl,x.ColorGrey2=Kl,x.ColorGrey3=Jl,x.ColorGrey4=Zl,x.ColorGrey5=Ql,x.ColorLinkActive=Hh,x.ColorLinkDefault=Oh,x.ColorLinkHover=Rh,x.ColorLinkVisited=zh,x.ColorPrimaryBlack=Bl,x.ColorPrimaryBlue=Al,x.ColorPrimaryDarkPink=Hl,x.ColorPrimaryGreen=Ol,x.ColorPrimaryPurple=Rl,x.ColorPrimaryRed=zl,x.ColorPrimaryWhite=El,x.ColorPrimaryYellow=Ul,x.ColorSecondaryAquaGreen=Yl,x.ColorSecondaryOrange=Gl,x.ColorSecondaryPaleYellow=Wl,x.ColorSecondaryPink=ql,x.ColorSecondaryWarmYellow=Vl,x.ColorTextPrimary=Lh,x.ColorTextPrint=Bh,x.ColorTextReverse=Eh,x.ColorTextSecondary=Ah,x.Column=Wr,x.ColumnAlign=Tu,x.ComponentBlur=Um,x.ComponentBreadcrumbChevronMarginLeft=Lm,x.ComponentBreadcrumbChevronMarginRight=Am,x.ComponentBreadcrumbPaddingTopDesktop=Bm,x.ComponentBreadcrumbPaddingTopMobile=Em,x.ComponentButtonPaddingDesktopHorizontal=Cm,x.ComponentButtonPaddingDesktopVertical=Sm,x.ComponentButtonPaddingMobileHorizontal=wm,x.ComponentButtonPaddingMobileVertical=xm,x.ComponentButtonShadowSize=km,x.ComponentCardHeadingMargin=Im,x.ComponentCardPaddingDesktop=Pm,x.ComponentCardPaddingMobile=Mm,x.ComponentDetails=Vm,x.ComponentExpander=Gm,x.ComponentFormCheckboxLabelPadding=Dm,x.ComponentFormCheckboxSize=jm,x.ComponentFormInputMinHeight=Tm,x.ComponentFormInputPadding=Nm,x.ComponentLink=Wm,x.ComponentPagination=Ym,x.ComponentPanelPaddingDesktop=$m,x.ComponentPanelPaddingMobile=Fm,x.ComponentSpread=zm,x.ComponentSummaryListCellPaddingHorizontal=Rm,x.ComponentSummaryListCellPaddingVertical=Om,x.ComponentSummaryListRowMargin=Hm,x.Container=_o,x.ContentsList=C_,x.DEFAULT_FONT_CONFIG=xc,x.DashboardSummaryGrid=U_,x.DateInput=qb,x.Details=Pd,x.DoDontList=Id,x.ElevationHigh=qg,x.ElevationLow=Gg,x.ElevationMedium=Yg,x.ElevationNone=Vg,x.ErrorMessage=wo,x.ErrorSummary=Yb,x.Expander=Fd,x.FRUTIGER_FONT_FILES=At,x.Fieldset=Ua,x.Float=ku,x.FocusOutlineOffset=Hg,x.FocusOutlineStyle=zg,x.FocusOutlineWidth=Rg,x.FocusShadowButton=Wg,x.FocusShadowInput=Ug,x.FontFamilyBase=Gi,x.FontFamilyFallback=Yi,x.FontFamilyPrint=qi,x.FontLineHeightBase=Ys,x.FontSize14Mobile=Zi,x.FontSize14Print=ea,x.FontSize14Tablet=Qi,x.FontSize16Mobile=ta,x.FontSize16Print=ra,x.FontSize16Tablet=na,x.FontSize19Mobile=ia,x.FontSize19Print=sa,x.FontSize19Tablet=aa,x.FontSize22Mobile=oa,x.FontSize22Print=ca,x.FontSize22Tablet=la,x.FontSize26Mobile=ua,x.FontSize26Print=fa,x.FontSize26Tablet=da,x.FontSize36Mobile=ha,x.FontSize36Print=pa,x.FontSize36Tablet=ma,x.FontSize48Mobile=ga,x.FontSize48Print=ya,x.FontSize48Tablet=ba,x.FontSizeBase=Gs,x.FontWeightBold=Ki,x.FontWeightLight=Ji,x.FontWeightNormal=Xi,x.Footer=So,x.FormBorderRadius=zp,x.FormBorderWidthDefault=Rp,x.FormBorderWidthError=Hp,x.FormErrorTextDefault=Ep,x.FormErrorTypographyWeight=Bp,x.FormHintTextDefault=Op,x.FormInputBackgroundDefault=Sp,x.FormInputBackgroundDisabled=kp,x.FormInputBackgroundError=Tp,x.FormInputBackgroundFocus=Cp,x.FormInputBorderDefault=Np,x.FormInputBorderDisabled=Mp,x.FormInputBorderError=Dp,x.FormInputBorderFocus=jp,x.FormInputTextDefault=Pp,x.FormInputTextDisabled=Fp,x.FormInputTextPlaceholder=Ip,x.FormLabelTextDefault=$p,x.FormLabelTextRequired=Lp,x.FormLabelTypographyWeight=Ap,x.FormSpacingCheckboxLabelPadding=uc,x.FormSpacingCheckboxSize=cc,x.FormSpacingInputMinHeight=lc,x.FormSpacingInputPadding=oc,x.GanttChart=w_,x.Grid=Wa,x.GridGutter=bg,x.GridGutterHalf=yg,x.GridLines=xf,x.GridPageWidth=gg,x.GridWidth=tr,x.Header=Va,x.HeaderSSR=ny,x.HeaderSearch=Mu,x.HeaderStatic=Va,x.Heading=yn,x.HeadingsNhsukHeadingL=Tn,x.HeadingsNhsukHeadingM=Nn,x.HeadingsNhsukHeadingS=jn,x.HeadingsNhsukHeadingXl=kn,x.HeadingsNhsukHeadingXs=Dn,x.Hero=Pu,x.Hint=vo,x.Images=B_,x.Input=Ha,x.InsetText=j_,x.Label=za,x.LayoutColumnActions=dg,x.LayoutColumnFull=og,x.LayoutColumnHalf=lg,x.LayoutColumnQuarter=ug,x.LayoutColumnThird=cg,x.LayoutContainerMaxWidth=sg,x.Legend=h1,x.LineScalesProvider=_f,x.LineSeriesPrimitive=Pf,x.List=Nu,x.MainWrapper=xo,x.MedicationCard=Zo,x.MetricCard=If,x.NHSBodyText=kw,x.NHSBodyTextLarge=Tw,x.NHSBodyTextSmall=Nw,x.NHSHeading1=_w,x.NHSHeading2=xw,x.NHSHeading3=ww,x.NHSHeading4=Sw,x.NHSHeading5=Cw,x.NHSLedeText=jw,x.NHSLedeTextSmall=Dw,x.NHSThemeProvider=Qb,x.NHS_FALLBACK_FONT_STACK=Uw,x.NHS_FONT_STACK=zw,x.NavigationSplitView=tf,x.PageTemplate=vx,x.Pagination=S_,x.Panel=Td,x.ParagraphsBody=Mn,x.ParagraphsBodyLarge=Pn,x.ParagraphsBodySmall=In,x.ParagraphsLedeText=Fn,x.ParagraphsLedeTextSmall=$n,x.PatientCard=Ko,x.ProductRoadmap=rf,x.Radios=$b,x.RadiosServer=Ab,x.ResponsiveDataGrid=el,x.ResponsiveDataGridDemo=yx,x.Row=nr,x.SPC=bw,x.SPCChart=fh,x.SPCMetricCard=ow,x.Select=Ni,x.SelectOption=wu,x.ShadowButtonDefault=$g,x.ShadowButtonFocus=Eg,x.ShadowButtonSecondary=Lg,x.ShadowButtonWarning=Ag,x.ShadowCardDefault=Bg,x.ShadowCardHover=Og,x.SizeButtonMinHeightDesktop=ag,x.SizeButtonMinHeightMobile=ig,x.SizeFormControlLarge=Kp,x.SizeFormControlMedium=Xp,x.SizeFormControlSmall=qp,x.SizeFormInputWidth2xl=ng,x.SizeFormInputWidth3xl=rg,x.SizeFormInputWidthLg=eg,x.SizeFormInputWidthMd=Qp,x.SizeFormInputWidthSm=Zp,x.SizeFormInputWidthXl=tg,x.SizeFormInputWidthXs=Jp,x.SizeIconExtraLarge=Gp,x.SizeIconLarge=Vp,x.SizeIconMedium=Wp,x.SizeIconNhsDefault=Yp,x.SizeIconSmall=Up,x.SkipLink=Go,x.SlotMatrix=z_,x.SortStatusControl=X_,x.Spacing0=dc,x.Spacing1=fc,x.Spacing2=hc,x.Spacing3=mc,x.Spacing4=pc,x.Spacing5=gc,x.Spacing6=bc,x.Spacing7=yc,x.Spacing8=vc,x.Spacing9=_c,x.SpacingResponsive0Mobile=Ts,x.SpacingResponsive0Tablet=Ns,x.SpacingResponsive1Mobile=js,x.SpacingResponsive1Tablet=Ds,x.SpacingResponsive2Mobile=Ms,x.SpacingResponsive2Tablet=Ps,x.SpacingResponsive3Mobile=Is,x.SpacingResponsive3Tablet=Fs,x.SpacingResponsive4Mobile=$s,x.SpacingResponsive4Tablet=Ls,x.SpacingResponsive5Mobile=As,x.SpacingResponsive5Tablet=Es,x.SpacingResponsive6Mobile=Bs,x.SpacingResponsive6Tablet=Os,x.SpacingResponsive7Mobile=Rs,x.SpacingResponsive7Tablet=Hs,x.SpacingResponsive8Mobile=zs,x.SpacingResponsive8Tablet=Us,x.SpacingResponsive9Mobile=Ws,x.SpacingResponsive9Tablet=Vs,x.SpacingUtilities=Ob,x.StateDisabledBackground=Pg,x.StateDisabledBorder=Ig,x.StateDisabledText=Fg,x.StateErrorBackground=vg,x.StateErrorBorder=_g,x.StateErrorText=xg,x.StateInfoBackground=jg,x.StateInfoBorder=Dg,x.StateInfoText=Mg,x.StateSuccessBackground=wg,x.StateSuccessBorder=Sg,x.StateSuccessText=Cg,x.StateWarningBackground=kg,x.StateWarningBorder=Tg,x.StateWarningText=Ng,x.SummaryCard=Ad,x.SummaryList=D_,x.Table=_n,x.Tabs=L_,x.Tag=Ye,x.TaskList=$d,x.Textarea=xu,x.TooltipOverlay=f1,x.TooltipProvider=Mf,x.TransactionalPageTemplate=_x,x.TransitionButtonDefault=_h,x.TransitionButtonShadow=xh,x.TransitionCardHover=Sh,x.TransitionInputFocus=wh,x.VisibilityProvider=c1,x.VitalsCard=Qo,x.WIDTH_FRACTIONS=Ub,x.WarningCallout=E_,x.WidthContainer=tl,x.WidthUtilities=Hb,x.checkFrutigerLoaded=Ww,x.createGenericTabsConfig=fs,x.createTCHTabsConfig=tx,x.generateFrutigerFontFace=Rw,x.getResponsiveStyles=vw,x.getSpacingClass=Rb,x.getWidthClass=zb,x.preloadFrutigerFonts=Hw,x.tchDataConfig=Od,x.useColors=Pw,x.useComponentSpacing=Lw,x.useNHSHeadings=Aw,x.useNHSParagraphs=Ew,x.useNHSTheme=Kb,x.useNHSTypographySystem=Bw,x.useNavigationSplitDrill=Ow,x.useNavigationSplitUrlSync=ef,x.useNhsFdpBreakpoints=nl,x.useResponsiveSpacing=$w,x.useResponsiveValue=xx,x.useSpacing=Iw,x.useSpc=oh,x.useTokens=Mw,x.useTypography=Fw,Object.defineProperty(x,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.js.map
