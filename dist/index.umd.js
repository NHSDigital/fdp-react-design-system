(function(S,A){typeof exports=="object"&&typeof module<"u"?A(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],A):(S=typeof globalThis<"u"?globalThis:S||self,A(S.NHSFDPDesignSystem={},S.React,S.ReactDOM))})(this,(function(S,A,$x){"use strict";function Bx(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}const ne=Bx(A);function zx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eo={exports:{}},vs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f;function Ox(){if($f)return vs;$f=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return vs.Fragment=e,vs.jsx=n,vs.jsxs=n,vs}var _s={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf;function Hx(){return Bf||(Bf=1,process.env.NODE_ENV!=="production"&&(function(){function t(T){if(T==null)return null;if(typeof T=="function")return T.$$typeof===k?null:T.displayName||T.name||null;if(typeof T=="string")return T;switch(T){case m:return"Fragment";case w:return"Profiler";case y:return"StrictMode";case b:return"Suspense";case _:return"SuspenseList";case x:return"Activity"}if(typeof T=="object")switch(typeof T.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),T.$$typeof){case g:return"Portal";case j:return(T.displayName||"Context")+".Provider";case M:return(T._context.displayName||"Context")+".Consumer";case v:var K=T.render;return T=T.displayName,T||(T=K.displayName||K.name||"",T=T!==""?"ForwardRef("+T+")":"ForwardRef"),T;case N:return K=T.displayName||null,K!==null?K:t(T.type)||"Memo";case C:K=T._payload,T=T._init;try{return t(T(K))}catch{}}return null}function e(T){return""+T}function n(T){try{e(T);var K=!1}catch{K=!0}if(K){K=console;var O=K.error,B=typeof Symbol=="function"&&Symbol.toStringTag&&T[Symbol.toStringTag]||T.constructor.name||"Object";return O.call(K,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",B),e(T)}}function r(T){if(T===m)return"<>";if(typeof T=="object"&&T!==null&&T.$$typeof===C)return"<...>";try{var K=t(T);return K?"<"+K+">":"<...>"}catch{return"<...>"}}function i(){var T=F.A;return T===null?null:T.getOwner()}function s(){return Error("react-stack-top-frame")}function o(T){if(D.call(T,"key")){var K=Object.getOwnPropertyDescriptor(T,"key").get;if(K&&K.isReactWarning)return!1}return T.key!==void 0}function l(T,K){function O(){L||(L=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",K))}O.isReactWarning=!0,Object.defineProperty(T,"key",{get:O,configurable:!0})}function c(){var T=t(this.type);return E[T]||(E[T]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),T=this.props.ref,T!==void 0?T:null}function u(T,K,O,B,J,$,R,H){return O=$.ref,T={$$typeof:h,type:T,key:K,props:$,_owner:J},(O!==void 0?O:null)!==null?Object.defineProperty(T,"ref",{enumerable:!1,get:c}):Object.defineProperty(T,"ref",{enumerable:!1,value:null}),T._store={},Object.defineProperty(T._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(T,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(T,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:R}),Object.defineProperty(T,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:H}),Object.freeze&&(Object.freeze(T.props),Object.freeze(T)),T}function d(T,K,O,B,J,$,R,H){var q=K.children;if(q!==void 0)if(B)if(P(q)){for(B=0;B<q.length;B++)f(q[B]);Object.freeze&&Object.freeze(q)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(q);if(D.call(K,"key")){q=t(T);var V=Object.keys(K).filter(function(fe){return fe!=="key"});B=0<V.length?"{key: someKey, "+V.join(": ..., ")+": ...}":"{key: someKey}",ee[q+B]||(V=0<V.length?"{"+V.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,B,q,V,q),ee[q+B]=!0)}if(q=null,O!==void 0&&(n(O),q=""+O),o(K)&&(n(K.key),q=""+K.key),"key"in K){O={};for(var re in K)re!=="key"&&(O[re]=K[re])}else O=K;return q&&l(O,typeof T=="function"?T.displayName||T.name||"Unknown":T),u(T,q,$,J,i(),O,R,H)}function f(T){typeof T=="object"&&T!==null&&T.$$typeof===h&&T._store&&(T._store.validated=1)}var p=A,h=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),j=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),k=Symbol.for("react.client.reference"),F=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=Object.prototype.hasOwnProperty,P=Array.isArray,I=console.createTask?console.createTask:function(){return null};p={react_stack_bottom_frame:function(T){return T()}};var L,E={},z=p.react_stack_bottom_frame.bind(p,s)(),G=I(r(s)),ee={};_s.Fragment=m,_s.jsx=function(T,K,O,B,J){var $=1e4>F.recentlyCreatedOwnerStacks++;return d(T,K,O,!1,B,J,$?Error("react-stack-top-frame"):z,$?I(r(T)):G)},_s.jsxs=function(T,K,O,B,J){var $=1e4>F.recentlyCreatedOwnerStacks++;return d(T,K,O,!0,B,J,$?Error("react-stack-top-frame"):z,$?I(r(T)):G)}})()),_s}var zf;function Rx(){return zf||(zf=1,process.env.NODE_ENV==="production"?eo.exports=Ox():eo.exports=Hx()),eo.exports}var a=Rx(),ic={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Of;function Ux(){return Of||(Of=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(s=i(s,r(l)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var l in s)e.call(s,l)&&s[l]&&(o=i(o,l));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(ic)),ic.exports}var Wx=Ux();const Ee=zx(Wx),Gx=({text:t,href:e,openInNewWindow:n=!1,className:r,...i})=>{const s=Ee("nhsuk-action-link__link",r);return a.jsx("div",{className:"nhsuk-action-link",children:a.jsxs("a",{className:s,href:e,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,...i,children:[a.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right-circle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"36",height:"36",children:[a.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"})]}),a.jsx("span",{className:"nhsuk-action-link__text",children:t})]})})},sc=({ariaLabel:t="Account",items:e=[],className:n,variant:r="default"})=>{if(!e||e.length===0)return null;const i=s=>{const o=s.icon?a.jsx("svg",{className:"nhsuk-icon nhsuk-icon__user",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",role:"img","aria-label":s.icon===!0?"User":void 0,children:a.jsx("path",{d:"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z"})}):null,l=s.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:s.html}}):s.text,c=a.jsxs(a.Fragment,{children:[o,l]});return s.href?a.jsx("a",{className:"nhsuk-account__link nhsuk-header__account-link",href:s.href,children:c}):s.action?a.jsx("form",{className:"nhsuk-account__form",action:s.action,method:s.method||"post",children:a.jsx("button",{className:"nhsuk-account__button",type:"submit",role:"button",children:c})}):a.jsx("span",{children:c})};return a.jsx("nav",{className:Ee("nhsuk-account",{"nhsuk-account--white":r==="white"},n),"aria-label":t,children:a.jsx("ul",{className:"nhsuk-account__list",children:e.map((s,o)=>s&&a.jsx("li",{className:Ee("nhsuk-account__item nhsuk-header__account-item",s.className),children:i(s)},o))})})};var ac=(t=>(t.Primary="primary",t.Secondary="secondary",t.Reverse="reverse",t.Warning="warning",t.Login="login",t.Metric="metric",t))(ac||{}),oc=(t=>(t.Small="small",t.Default="default",t.Large="large",t))(oc||{});function Yx(t){const e=t.variant||"primary",n=t.size||"default",r=!!t.fullWidth,i=["nhs-aria-button",`nhs-aria-button--${e}`,n!=="default"?`nhs-aria-button--${n}`:"",r?"nhs-aria-button--full-width":"",t.className||""].filter(Boolean).join(" ");return{tag:t.href?"a":"button",classes:i,data:{module:"nhs-button"},attrs:t.href?{href:t.href,role:"button"}:{type:"button"},preventDoubleClick:!!t.preventDoubleClick}}const{forwardRef:Vx,useCallback:Ar,useState:lc}=ne;function Zx(t,e){const{children:n,variant:r=ac.Primary,size:i=oc.Default,fullWidth:s=!1,className:o="",preventDoubleClick:l=!1,...c}=t,[u,d]=lc(!1),[f,p]=lc(!1),[h,g]=lc(!1),m=Yx({variant:r,size:i,fullWidth:s,className:o,preventDoubleClick:l,href:"href"in c?c.href:void 0}),y="disabled"in c?c.disabled:c["aria-disabled"]==="true",w={...u&&{"data-pressed":"true"},...f&&{"data-hovered":"true"},...h&&{"data-focused":"true"},...y&&{"data-disabled":"true"}},M=Ar(()=>!y&&d(!0),[y]),j=Ar(()=>d(!1),[]),v=Ar(()=>!y&&p(!0),[y]),b=Ar(()=>{p(!1),d(!1)},[]),_=Ar(()=>g(!0),[]),N=Ar(()=>g(!1),[]),C=Ar(q=>{q.key===" "&&("href"in c||q.currentTarget.getAttribute("role")==="button")&&(q.preventDefault(),q.currentTarget.click())},[c]),x=Ar(q=>{if(l){const V=q.currentTarget;if(V.getAttribute("data-processing")==="true"){q.preventDefault();return}V.setAttribute("data-processing","true"),setTimeout(()=>{V.removeAttribute("data-processing")},1e3)}},[l]);if("href"in c&&c.href){const{id:q,style:V,title:re,["aria-label"]:fe,["aria-describedby"]:X,["aria-labelledby"]:se,tabIndex:ue,..._e}=c,be=c;return a.jsx("a",{ref:e,href:be.href,target:be.target,rel:be.rel,className:m.classes,role:"button",draggable:"false","data-module":"nhs-button",...w,...l&&{"data-prevent-double-click":"true"},..._e,onKeyDown:Q=>{be.onKeyDown?.(Q),C(Q)},onClick:Q=>{be.onClick?.(Q),x(Q)},onMouseDown:Q=>{be.onMouseDown?.(Q),M()},onMouseUp:Q=>{be.onMouseUp?.(Q),j()},onMouseEnter:Q=>{be.onMouseEnter?.(Q),v()},onMouseLeave:Q=>{be.onMouseLeave?.(Q),b()},onFocus:Q=>{be.onFocus?.(Q),_()},onBlur:Q=>{be.onBlur?.(Q),N()},"aria-disabled":be["aria-disabled"],...be["aria-disabled"]==="true"&&{tabIndex:-1},id:q,style:V,title:re,"aria-label":fe,"aria-describedby":X,"aria-labelledby":se,tabIndex:ue,children:n})}const{id:k,style:F,title:D,["aria-label"]:P,["aria-describedby"]:I,["aria-labelledby"]:L,tabIndex:E,name:z,value:G,form:ee,formAction:T,formEncType:K,formMethod:O,formNoValidate:B,formTarget:J,autoFocus:$,...R}=c,H=c;return a.jsx("button",{ref:e,type:H.type||"button",disabled:H.disabled,className:m.classes,"data-module":"nhs-button",...w,...l&&{"data-prevent-double-click":"true"},...H.disabled&&{"aria-disabled":"true"},...R,onKeyDown:q=>{H.onKeyDown?.(q),C(q)},onClick:q=>{H.onClick?.(q),x(q)},onMouseDown:q=>{H.onMouseDown?.(q),M()},onMouseUp:q=>{H.onMouseUp?.(q),j()},onMouseEnter:q=>{H.onMouseEnter?.(q),v()},onMouseLeave:q=>{H.onMouseLeave?.(q),b()},onFocus:q=>{H.onFocus?.(q),_()},onBlur:q=>{H.onBlur?.(q),N()},id:k,style:F,title:D,"aria-label":P,"aria-describedby":I,"aria-labelledby":L,tabIndex:E,name:z,value:G,form:ee,formAction:T,formEncType:K,formMethod:O,formNoValidate:B,formTarget:J,autoFocus:$,children:n})}const Et=Vx(Zx);Et.displayName="Button";const Ai=({text:t="Back",html:e,href:n="#",className:r,element:i="a",onClick:s,...o})=>{const l=Ee("nhsuk-back-link",r),c=Ee("nhsuk-back-link__link"),u=()=>a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:a.jsx("path",{d:"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"})}),e?a.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t]});return a.jsx("div",{className:l,children:i==="button"?a.jsx("button",{className:c,onClick:s,type:"button",...o,children:u()}):a.jsx("a",{className:c,href:n,...o,children:u()})})};function qx(t){const{color:e="default",noBorder:n,closable:r,disabled:i,className:s}=t;return{classes:["nhsuk-tag",e!=="default"?`nhsuk-tag--${e}`:"",n?"nhsuk-tag--no-border":"",r?"nhsuk-tag--closable":"",i?"nhsuk-tag--disabled":"",s||""].filter(Boolean).join(" "),showClose:!!r,disabled:!!i}}const pt=({text:t,html:e,children:n,color:r="default",noBorder:i=!1,closable:s=!1,onClose:o,disabled:l=!1,className:c,...u})=>{const d=qx({color:r,noBorder:i,closable:s,disabled:l,className:c}),f=p=>{p.preventDefault(),p.stopPropagation(),!l&&o&&o()};return a.jsxs("strong",{className:d.classes,...u,children:[n||(e?a.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t),s&&a.jsx("button",{type:"button",className:"nhsuk-tag__close",onClick:f,disabled:l,"aria-label":"Remove",title:"Remove",children:"Ã—"})]})},Hf=({id:t,name:e,checked:n,defaultChecked:r=!1,disabled:i=!1,value:s="true",hint:o,errorMessage:l,className:c,children:u,onChange:d,onBlur:f,onFocus:p,attributes:h,...g})=>{const[m,y]=A.useState(r),w=n!==void 0,M=w?n:m;A.useEffect(()=>{w||y(r)},[r,w]);const j=C=>{const x=C.target.checked;w||y(x),d?.(x,C)},v=o?`${t}-hint`:void 0,b=l?`${t}-error`:void 0,_=[v,b].filter(Boolean).join(" ")||void 0,N=Ee("nhsuk-form-group",{"nhsuk-form-group--error":!!l},c);return a.jsx("div",{className:N,...g,children:a.jsx("div",{className:"nhsuk-checkboxes",children:a.jsxs("div",{className:"nhsuk-checkboxes__item",children:[a.jsx("input",{className:"nhsuk-checkboxes__input",id:t,name:e||t,type:"checkbox",value:s,checked:M,disabled:i,onChange:j,onBlur:f,onFocus:p,"aria-describedby":_,...h}),a.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:t,children:u}),o&&a.jsx("div",{id:v,className:"nhsuk-checkboxes__hint",children:o}),l&&a.jsxs("div",{id:b,className:"nhsuk-error-message nhsuk-checkboxes__error",children:[a.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]})]})})})};Hf.displayName="Checkbox";function Rf(t){const n=(t.type||"text")==="range";return{classes:["nhsuk-input",t.hasError?"nhsuk-input--error":"",n?"nhsuk-input--range":"",!n&&t.width&&t.width!=="full"?`nhsuk-input--width-${t.width}`:"",t.className||""].filter(Boolean).join(" "),isRange:n}}const to=({id:t,name:e,type:n="text",value:r,defaultValue:i,placeholder:s,disabled:o=!1,readOnly:l=!1,required:c=!1,hasError:u=!1,describedBy:d,className:f,width:p="full",inputMode:h,autoComplete:g,maxLength:m,minLength:y,pattern:w,step:M,min:j,max:v,showValueLabels:b=!1,showCurrentValue:_=!1,valueLabels:N,onChange:C,onBlur:x,onFocus:k,onKeyDown:F,...D})=>{const[P,I]=A.useState(r||i||(n==="range"?j||"0":""));A.useEffect(()=>{r!==void 0&&I(r)},[r]);const L=J=>{const $=J.target;I($.value),("type"in J&&J.nativeEvent||J.type==="keydown")&&C?.(J)},{classes:E,isRange:z}=Rf({type:n,hasError:u,width:p,className:f}),G=r!==void 0,ee={id:t,name:e,type:n,placeholder:s,disabled:o,readOnly:l,required:c,"aria-describedby":d,inputMode:h,autoComplete:g,maxLength:m,minLength:y,pattern:w,step:M,min:j,max:v,onChange:L,onBlur:x,onFocus:k,onKeyDown:J=>{if(z&&/[0-9]/.test(J.key)){const $=(P?.toString()||"")+J.key;J.target.value=$,L(J)}F?.(J)},...D},T=!G&&i!==void 0?{defaultValue:i}:{},K=G?{value:r}:{},O=()=>a.jsx("input",{className:E,...K,...T,"data-current-value":P,...ee}),B=z?a.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[b&&a.jsxs("div",{className:"nhsuk-input-range-labels",children:[a.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:N?.min||j||"0"}),O(),a.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:N?.max||v||"100"})]}),!b&&O(),_&&a.jsx("div",{className:"nhsuk-input-range-current-value",children:a.jsxs("span",{className:"nhsuk-input-range-current-label",children:[N?.current||"Current value:"," ",a.jsx("strong",{children:P})]})})]}):null;return z?B:a.jsx("input",{className:E,id:t,name:e,type:n,value:r,...r===void 0&&i!==void 0?{defaultValue:i}:{},placeholder:s,disabled:o,readOnly:l,required:c,"aria-describedby":d,inputMode:h,autoComplete:g,maxLength:m,minLength:y,pattern:w,step:M,min:j,max:v,onChange:C,onBlur:x,onFocus:k,onKeyDown:F,...D})};function Xx(t){const e=t.size||"m",n=["nhsuk-label",e!=="m"?`nhsuk-label--${e}`:"",t.className||""].filter(Boolean).join(" ");return{tag:t.isPageHeading?"h1":"label",classes:n,size:e,htmlFor:t.isPageHeading?void 0:t.htmlFor,isPageHeading:!!t.isPageHeading}}const no=({htmlFor:t,className:e,isPageHeading:n=!1,size:r="m",children:i,...s})=>{const o=Xx({size:r,isPageHeading:n,className:e,htmlFor:t}),l=o.tag;return a.jsx(l,{className:o.classes,htmlFor:o.htmlFor,...s,children:n?a.jsx("label",{className:"nhsuk-label-wrapper",htmlFor:t,children:i}):i})};function Jx(t){const e=["nhsuk-fieldset",t.className||""].filter(Boolean).join(" "),n=t.legend?["nhsuk-fieldset__legend",t.legend.size?`nhsuk-fieldset__legend--${t.legend.size}`:"",t.legend.className||""].filter(Boolean).join(" "):void 0;return{fieldsetClasses:e,legendClasses:n,legendIsPageHeading:!!t.legend?.isPageHeading,describedBy:t.describedBy}}const ro=({children:t,legend:e,className:n,describedBy:r,...i})=>{const s=Jx({className:n,describedBy:r,legend:e?{size:e.size,className:e.className,isPageHeading:e.isPageHeading}:void 0}),o=()=>{const l=e?.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:e.html}}):e?.text;return s.legendIsPageHeading?a.jsx("h1",{className:"nhsuk-fieldset__heading",children:l}):l};return a.jsxs("fieldset",{className:s.fieldsetClasses,"aria-describedby":s.describedBy,...i,children:[e&&(e.text||e.html)&&a.jsx("legend",{className:s.legendClasses,children:o()}),t]})};function Kx(t){const e=["nhsuk-checkboxes",t.small?"nhsuk-checkboxes--small":"",t.className||""].filter(Boolean).join(" "),n=["nhsuk-form-group",t.hasError?"nhsuk-form-group--error":""].filter(Boolean).join(" ");return{classes:e,formGroupClasses:n}}const Uf=({items:t,name:e,idPrefix:n,legend:r,isPageHeading:i=!1,legendSize:s="l",hint:o,errorMessage:l,className:c="",small:u=!1,onChange:d,fieldsetAttributes:f,attributes:p,...h})=>{const[g,m]=A.useState(t.filter(C=>C.checked).map(C=>C.value)),y=n||e,w=o?`${y}-hint`:void 0,M=l?`${y}-error`:void 0,j=[w,M].filter(Boolean).join(" ")||void 0,v=(C,x)=>{let k;x?k=[...g,C]:k=g.filter(F=>F!==C),m(k),d?.(k)},b=()=>t.map((C,x)=>{const k=`${y}-${x+1}`,F=`${k}-conditional`,D=g.includes(C.value),P=C.disabled||!1;return a.jsxs("div",{className:"nhsuk-checkboxes__item",children:[a.jsx("input",{className:"nhsuk-checkboxes__input",id:k,name:e,type:"checkbox",value:C.value,checked:D,disabled:P,onChange:I=>v(C.value,I.target.checked),"aria-describedby":C.hint?`${k}-hint`:j,...C.conditional&&{"aria-controls":F,"aria-expanded":D?"true":"false"},...C.attributes}),a.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:k,children:C.text}),C.hint&&a.jsx("div",{id:`${k}-hint`,className:"nhsuk-checkboxes__hint",children:C.hint}),C.conditional&&a.jsx("div",{className:Ee("nhsuk-checkboxes__conditional",{"nhsuk-checkboxes__conditional--hidden":!D}),id:F,children:typeof C.conditional=="object"&&C.conditional!==null&&"label"in C.conditional&&"id"in C.conditional&&"name"in C.conditional?a.jsxs("div",{style:{marginTop:"16px"},children:[C.conditional.label&&a.jsx(no,{htmlFor:C.conditional.id,children:C.conditional.label}),a.jsx(to,{...C.conditional})]}):C.conditional})]},C.value)}),{classes:_,formGroupClasses:N}=Kx({small:u,className:c,hasError:!!l});return a.jsx("div",{className:N,...p,...h,children:a.jsxs(ro,{legend:r?{text:r,isPageHeading:i,size:s}:void 0,describedBy:j,...f,children:[o&&a.jsx("div",{id:w,className:"nhsuk-hint",children:o}),l&&a.jsxs("div",{id:M,className:"nhsuk-error-message",children:[a.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]}),a.jsx("div",{className:_,children:b()})]})})};Uf.displayName="Checkboxes";function Qx(t){const e=t.resize??"vertical";return{classes:["nhsuk-textarea",t.hasError?"nhsuk-textarea--error":"",e!=="vertical"?`nhsuk-textarea--resize-${e}`:"",t.className||""].filter(Boolean).join(" "),describedBy:t.describedBy}}const Wf=({id:t,name:e,value:n,defaultValue:r,placeholder:i,disabled:s=!1,readOnly:o=!1,required:l=!1,hasError:c=!1,describedBy:u,className:d,rows:f=5,cols:p,maxLength:h,minLength:g,wrap:m="soft",resize:y="vertical",autoComplete:w,spellCheck:M,onChange:j,onBlur:v,onFocus:b,onKeyDown:_,...N})=>{const{classes:C,describedBy:x}=Qx({hasError:c,resize:y,className:d,describedBy:u});return a.jsx("textarea",{className:C,id:t,name:e,value:n,defaultValue:r,placeholder:i,disabled:s,readOnly:o,required:l,"aria-describedby":x,rows:f,cols:p,maxLength:h,minLength:g,wrap:m,autoComplete:w,spellCheck:M,onChange:j,onBlur:v,onFocus:b,onKeyDown:_,...N})};function ev(t){return{classes:["nhsuk-hint",t.className||""].filter(Boolean).join(" "),id:t.id}}const cc=({id:t,className:e,children:n,...r})=>{const i=ev({id:t,className:e});return a.jsx("div",{className:i.classes,id:i.id,...r,children:n})},tv=({id:t,maxLength:e,maxWords:n,threshold:r=75,name:i,value:s,defaultValue:o,rows:l,className:c,countMessage:u,onCountChange:d,onChange:f,...p})=>{const h=s??o??"",[g,m]=A.useState(h),[y,w]=A.useState(0),[M,j]=A.useState(!1),[v,b]=A.useState(!1),_=A.useCallback(D=>n?D.trim()===""?0:D.trim().split(/\s+/).length:D.length,[n]);A.useEffect(()=>{const D=_(g),P=e||n||0,I=P-D,L=Math.floor(P*(r/100));w(I),j(D>P),b(D>=L||D>P),d&&d(D,I)},[g,e,n,r,_,d]);const N=D=>{const P=D.target.value;m(P),f&&f(D)},C=()=>{const D=e||n||0,P=n?"word":"character",I=n?"words":"characters";if(!v)return`You can enter up to ${D} ${D===1?P:I}`;if(M){const L=Math.abs(y);return`You have ${L} ${L===1?P:I} too many`}else return`You have ${y} ${y===1?P:I} remaining`},x=Ee("nhsuk-character-count",c),k=Ee("nhsuk-character-count__message",{"nhsuk-character-count__message--disabled":!v,"nhsuk-error-message":M},u?.classes),F=Ee("nhsuk-js-character-count",{"nhsuk-textarea--error":M});return a.jsxs("div",{className:x,"data-module":"nhsuk-character-count","data-maxlength":e,"data-maxwords":n,"data-threshold":r,"data-testid":"character-count",children:[a.jsx(Wf,{id:t,name:i,value:s!==void 0?g:void 0,defaultValue:s===void 0?o??g:void 0,rows:l,className:F,onChange:N,"aria-describedby":`${t}-info`,"aria-invalid":M||void 0,...p}),a.jsx(cc,{id:`${t}-info`,className:k,role:"status","aria-live":"polite",children:C()})]})};function nv(t){return{classes:["nhsuk-select",t.hasError?"nhsuk-select--error":"",t.className||""].filter(Boolean).join(" ")}}const Gf=({value:t,disabled:e=!1,selected:n=!1,className:r,children:i,...s})=>{const o=Ee("nhsuk-select__option",r);return a.jsx("option",{className:o,value:t,disabled:e,...s,children:i})},ws=({id:t,name:e,ariaLabel:n,value:r,defaultValue:i,disabled:s=!1,required:o=!1,hasError:l=!1,describedBy:c,className:u,multiple:d=!1,size:f,autoComplete:p,options:h,children:g,onChange:m,onBlur:y,onFocus:w,...M})=>{const{classes:j}=nv({hasError:l,className:u}),v=()=>h?h.map((_,N)=>a.jsx("option",{value:_.value,disabled:_.disabled,"data-initial-selected":_.selected||void 0,children:_.text},`${_.value}-${N}`)):null,b=i===void 0&&r===void 0&&h?h.find(_=>_.selected)?.value:void 0;return a.jsx("select",{className:j,id:t,name:e,"aria-label":n,value:r,defaultValue:i!==void 0?i:b,disabled:s,required:o,"aria-describedby":c,multiple:d,size:f,autoComplete:p,onChange:m,onBlur:y,onFocus:w,...M,children:g||v()})};ws.Option=Gf;function rv(t){return{classes:["nhsuk-radios",t.hasError?"nhsuk-radios--error":"",t.size==="small"?"nhsuk-radios--small":"",t.inline?"nhsuk-radios--inline":"",t.className||""].filter(Boolean).join(" "),describedBy:t.describedBy}}function Yf(t,{variant:e,selectedValue:n,enableBehaviourAttr:r,handleChange:i,handleBlur:s,handleFocus:o,handleKeyDown:l,itemsRef:c,InputComponent:u}){const{onChange:d,onBlur:f,onFocus:p,...h}=t,{name:g,hasError:m=!1,describedBy:y,className:w,size:M="normal",inline:j=!1,options:v,...b}=h,{classes:_,describedBy:N}=rv({hasError:m,size:M,inline:j,className:w,describedBy:y});return a.jsx(ro,{children:a.jsx("div",{className:_,...b,...r?{"data-nhs-behaviour":"radios"}:{},children:v.map((C,x)=>{const k=`${g}-${x}`,F=C.conditional?`${k}-conditional`:void 0,D=n===C.value;return a.jsxs("div",{className:"nhsuk-radios__item",children:[a.jsx("input",{className:"nhsuk-radios__input",id:k,name:g,type:"radio",value:C.value,disabled:C.disabled,...e==="client"?{checked:D,onChange:i,onBlur:s,onFocus:o,onKeyDown:l,ref:P=>{P&&c&&(c.current[x]=P)}}:{defaultChecked:D,"data-nhs-radios-input":!0},"aria-describedby":N}),a.jsx("label",{className:"nhsuk-radios__label",htmlFor:k,children:C.text}),C.hint&&a.jsx("div",{className:"nhsuk-radios__hint",children:C.hint}),C.conditional&&a.jsx("div",{className:Ee("nhsuk-radios__conditional",{"nhsuk-radios__conditional--hidden":!D}),id:F,...e==="server"?{"data-nhs-radios-conditional":!0}:{},children:typeof C.conditional=="object"&&C.conditional!==null&&"label"in C.conditional&&"id"in C.conditional&&"name"in C.conditional?a.jsxs("div",{style:{marginTop:"16px"},children:[C.conditional.label&&a.jsx(no,{htmlFor:C.conditional.id,children:C.conditional.label}),a.jsx(u,{...C.conditional})]}):C.conditional})]},C.value)})})})}const iv=({value:t,defaultValue:e,onChange:n,onBlur:r,onFocus:i,...s})=>{const[o,l]=A.useState(t||e||""),c=A.useRef([]),u=A.useRef(o),d=h=>{const g=h.target.value;g!==u.current&&(u.current=g,l(g),n?.(h))},f=h=>{i?.(h)},p=A.useCallback(h=>{const{key:g}=h;if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(g))return;h.preventDefault();const m=c.current.filter(j=>j&&!j.disabled),y=m.indexOf(h.currentTarget);if(y===-1)return;let w=y;["ArrowDown","ArrowRight"].includes(g)?w=(y+1)%m.length:["ArrowUp","ArrowLeft"].includes(g)&&(w=(y-1+m.length)%m.length);const M=m[w];M&&(M.focus(),M.checked||M.click())},[]);return Yf({value:t,defaultValue:e,onChange:n,onBlur:r,onFocus:i,...s},{variant:"client",selectedValue:o,enableBehaviourAttr:!1,handleChange:d,handleBlur:r,handleFocus:f,handleKeyDown:p,itemsRef:c,InputComponent:to})};function sv(t){const{id:e,name:n,type:r="text",value:i,defaultValue:s,placeholder:o,disabled:l=!1,readOnly:c=!1,required:u=!1,hasError:d=!1,describedBy:f,className:p,width:h="full",inputMode:g,autoComplete:m,maxLength:y,minLength:w,pattern:M,step:j,min:v,max:b,showValueLabels:_=!1,showCurrentValue:N=!1,valueLabels:C,onChange:x,onBlur:k,onFocus:F,onKeyDown:D,...P}=t,{classes:I,isRange:L}=Rf({type:r,hasError:d,width:h,className:p}),E={id:e,name:n,type:r,placeholder:o,disabled:l,readOnly:c,required:u,"aria-describedby":f,inputMode:g,autoComplete:m,maxLength:y,minLength:w,pattern:M,step:j,min:v,max:b,...P};if(L){const z=i??s??(typeof v<"u"?String(v):"0"),G=a.jsx("input",{className:I,...i!==void 0?{value:i}:{},...i===void 0&&s!==void 0?{defaultValue:s}:{},"data-current-value":z,...E});return a.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[_?a.jsxs("div",{className:"nhsuk-input-range-labels",children:[a.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:C?.min||v||"0"}),G,a.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:C?.max||b||"100"})]}):G,N&&a.jsx("div",{className:"nhsuk-input-range-current-value",children:a.jsxs("span",{className:"nhsuk-input-range-current-label",children:[C?.current||"Current value:"," ",a.jsx("strong",{children:z})]})})]})}return a.jsx("input",{className:I,...i!==void 0?{value:i}:{},...i===void 0&&s!==void 0?{defaultValue:s}:{},...E})}const av=({value:t,defaultValue:e,...n})=>{const r=t||e||"";return Yf({value:t,defaultValue:e,...n},{variant:"server",selectedValue:r,enableBehaviourAttr:!0,InputComponent:sv})};var Er=(t=>(t.OneQuarter="one-quarter",t.OneThird="one-third",t.OneHalf="one-half",t.TwoThirds="two-thirds",t.ThreeQuarters="three-quarters",t.Full="full",t))(Er||{}),Vf=(t=>(t.Mobile="mobile",t.Tablet="tablet",t.Desktop="desktop",t.LargeDesktop="large-desktop",t))(Vf||{}),Zf=(t=>(t.Left="left",t.Right="right",t))(Zf||{}),qf=(t=>(t.Left="left",t.Center="center",t.Right="right",t))(qf||{});const uc=({children:t,className:e,fluid:n=!1,maxWidth:r,style:i,...s})=>{const o=Ee({"nhsuk-width-container":!n,"nhsuk-width-container-fluid":n},e),l=r?{maxWidth:r,...i||{}}:i;return a.jsx("div",{className:o,style:l,...s,children:t})},gr=({children:t,className:e,style:n,align:r,rowGap:i,...s})=>{const o=Ee("nhsuk-grid-row",r?`nhsuk-grid-row-align-${r}`:void 0,e);return a.jsx("div",{className:o,style:n,...s,children:t})},Ei=({children:t,width:e=Er.Full,mobileWidth:n,tabletWidth:r,desktopWidth:i,start:s,className:o,forceWidth:l=!1,style:c,align:u,...d})=>{const f=Ee({[`nhsuk-grid-column-${e}`]:!l,[`nhsuk-u-${e}`]:l,[`nhsuk-u-${n}-mobile`]:!!n,[`nhsuk-u-${r}-tablet`]:!!r,[`nhsuk-u-${i}-desktop`]:!!i,[`nhsuk-grid-column-start-${s}`]:s&&s>=1&&s<=7,...u?{[`nhsuk-grid-align-${u}`]:!0}:{}},o);return a.jsx("div",{className:f,style:c,...d,children:t})},io=({children:t,className:e,style:n,rowGap:r=8,...i})=>{const s=A.Children.toArray(t),o=s[0],l=A.isValidElement(o)&&(o.type===gr||typeof o.props=="object"&&o.props&&"className"in o.props&&typeof o.props.className=="string"&&o.props.className.includes("nhsuk-grid-row")),c=typeof r=="number"?`${r}px`:r;let u=t;if(l)u=s.map((d,f)=>{if(!A.isValidElement(d))return d;const p=d,h=p.props||{},g=typeof h.className=="string"?h.className:"";if(!(p.type===gr||g.includes("nhsuk-grid-row")))return d;const y=h.rowGap,w=y!==void 0?typeof y=="number"?`${y}px`:y:c,M=f===0?void 0:w;if(!M)return d;const j={...h.style||{},marginTop:M};return A.cloneElement(p,{style:j})});else{const d={marginTop:void 0};u=a.jsx(gr,{style:d,children:t})}return a.jsx(uc,{className:e,style:n,...i,children:u})},ov=({children:t,type:e="bullet",size:n="medium",border:r=!1,className:i,role:s,as:o,...l})=>{const c=o||(e==="number"?"ol":"ul"),u=Ee("nhsuk-list",{"nhsuk-list--bullet":e==="bullet","nhsuk-list--number":e==="number","nhsuk-list--none":e==="none","nhsuk-list--border":r,[`nhsuk-list--${n}`]:n!=="medium"},i);return a.jsx(c,{className:u,role:s,...l,children:t})},lv=({children:t,className:e,...n})=>{const r=Ee("nhsuk-list__item",e);return a.jsx("li",{className:r,...n,children:t})},Xf=ov;Xf.Item=lv;const cv=({debug:t=!1,className:e,children:n,...r})=>{if(!n)return null;const i=["nhsuk-spacing-utilities",t&&"nhsuk-spacing-utilities--debug",e].filter(Boolean).join(" ");return a.jsx("div",{className:i,...r,children:n})},uv={margin:t=>`nhsuk-u-margin-${t}`,marginTop:t=>`nhsuk-u-margin-top-${t}`,marginRight:t=>`nhsuk-u-margin-right-${t}`,marginBottom:t=>`nhsuk-u-margin-bottom-${t}`,marginLeft:t=>`nhsuk-u-margin-left-${t}`,padding:t=>`nhsuk-u-padding-${t}`,paddingTop:t=>`nhsuk-u-padding-top-${t}`,paddingRight:t=>`nhsuk-u-padding-right-${t}`,paddingBottom:t=>`nhsuk-u-padding-bottom-${t}`,paddingLeft:t=>`nhsuk-u-padding-left-${t}`,marginResponsive:t=>`nhsuk-u-margin-responsive-${t}`,marginTopResponsive:t=>`nhsuk-u-margin-top-responsive-${t}`,marginRightResponsive:t=>`nhsuk-u-margin-right-responsive-${t}`,marginBottomResponsive:t=>`nhsuk-u-margin-bottom-responsive-${t}`,marginLeftResponsive:t=>`nhsuk-u-margin-left-responsive-${t}`,paddingResponsive:t=>`nhsuk-u-padding-responsive-${t}`,paddingTopResponsive:t=>`nhsuk-u-padding-top-responsive-${t}`,paddingRightResponsive:t=>`nhsuk-u-padding-right-responsive-${t}`,paddingBottomResponsive:t=>`nhsuk-u-padding-bottom-responsive-${t}`,paddingLeftResponsive:t=>`nhsuk-u-padding-left-responsive-${t}`},dv=({debug:t=!1,className:e,children:n,...r})=>{if(!n)return null;const i=["nhsuk-width-utilities",t&&"nhsuk-width-utilities--debug",e].filter(Boolean).join(" ");return a.jsx("div",{className:i,...r,children:n})},fv={width:t=>`nhsuk-u-width-${t}`,widthTablet:t=>`nhsuk-u-width-${t}-tablet`},hv=["full","three-quarters","two-thirds","one-half","one-third","one-quarter"],dc=({as:t="main",size:e="default",className:n,children:r,...i})=>{const s=["nhsuk-main-wrapper",e==="large"&&"nhsuk-main-wrapper--l",e==="small"&&"nhsuk-main-wrapper--s",n].filter(Boolean).join(" ");return a.jsx(t,{className:s,...i,children:r})};function pv(t){switch(t){case"xxl":case"xl":return 1;case"l":return 2;case"m":return 3;case"s":return 4;case"xs":return 5;default:return 2}}function mv(t){const e=t.level??pv(t.size),n=["nhsuk-heading",t.size?`nhsuk-heading--${t.size}`:"",t.className||""].filter(Boolean).join(" "),r=t.marginBottom?{marginBottom:t.marginBottom}:void 0;return{tag:`h${e}`,classes:n,style:r}}const Un=({level:t,className:e,text:n,html:r,children:i,size:s,marginBottom:o,...l})=>{const c=mv({level:t,size:s,className:e,marginBottom:o}),u=i||(r?a.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n);return A.createElement(c.tag,{className:c.classes,style:c.style,...l},u)};function gv(t){return{classes:["nhsuk-error-message",t.className||""].filter(Boolean).join(" "),id:t.id,visuallyHiddenText:t.visuallyHiddenText??"Error:"}}const fc=({id:t,className:e,visuallyHiddenText:n="Error:",children:r,...i})=>{const s=gv({id:t,className:e,visuallyHiddenText:n});return a.jsxs("span",{className:s.classes,id:s.id,...i,children:[a.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[s.visuallyHiddenText," "]}),r]})},yv=({titleText:t="There is a problem",titleHtml:e,descriptionText:n,descriptionHtml:r,errorList:i,className:s,children:o,...l})=>{const c=A.useRef(null);A.useEffect(()=>{c.current&&c.current.focus()},[]);const u=Ee("nhsuk-error-summary",s),d=()=>e?a.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t,f=()=>r?a.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n,p=h=>{const g=h.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:h.html}}):h.text;return h.href?a.jsx("a",{href:h.href,...h.attributes,children:g}):g};return a.jsxs("div",{ref:c,className:u,"aria-labelledby":"error-summary-title",role:"alert",tabIndex:-1,"data-module":"nhsuk-error-summary",...l,children:[a.jsx("h2",{className:"nhsuk-error-summary__title",id:"error-summary-title",children:d()}),a.jsxs("div",{className:"nhsuk-error-summary__body",children:[o&&a.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:o}),!o&&(n||r)&&a.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:f()}),a.jsx("ul",{className:"nhsuk-list nhsuk-error-summary__list",role:"list",children:i.map((h,g)=>a.jsx("li",{children:p(h)},g))})]})]})},bv=({id:t,className:e,items:n,namePrefix:r,values:i={},fieldset:s,hint:o,errorMessage:l,onChange:c,...u})=>{const[d,f]=A.useState(()=>({day:i.day||"",month:i.month||"",year:i.year||""})),[p,h]=A.useState({}),g=L=>L%4===0&&L%100!==0||L%400===0,m=(L,E)=>{const z=[31,28,31,30,31,30,31,31,30,31,30,31];return L===2&&g(E)?29:z[L-1]},y=(L,E,z)=>{if(!L)return;if(!/^\d+$/.test(L))return"Day must be a number";const G=parseInt(L,10);if(G<1||G>31)return"Day must be between 1 and 31";if(E&&z){const ee=parseInt(E,10),T=parseInt(z,10);if(!isNaN(ee)&&!isNaN(T)&&ee>=1&&ee<=12){const K=m(ee,T);if(G>K)return`${["January","February","March","April","May","June","July","August","September","October","November","December"][ee-1]} ${T} only has ${K} days`}}},w=L=>{if(!L)return;if(!/^\d+$/.test(L))return"Month must be a number";const E=parseInt(L,10);if(E<1||E>12)return"Month must be between 1 and 12"},M=L=>{if(!L)return;if(!/^\d+$/.test(L))return"Year must be a number";const E=parseInt(L,10),z=new Date().getFullYear();if(E<1900||E>z+10)return`Year must be between 1900 and ${z+10}`},j=(L,E,z)=>{if(!L||!E||!z)return;const G=parseInt(L,10),ee=parseInt(E,10),T=parseInt(z,10);if(isNaN(G)||isNaN(ee)||isNaN(T)||ee<1||ee>12||T<1900)return;const K=m(ee,T);G<1||G>K},v=A.useCallback((L,E)=>{const z={...d,[L]:E};f(z),c&&c(z)},[d,c]),b=A.useCallback(L=>{const E=d[L];let z;if(L==="day")z=y(E,d.month,d.year);else if(L==="month"){if(z=w(E),!z&&d.day){const G=y(d.day,E,d.year);h(ee=>({...ee,day:G}))}}else if(L==="year"&&(z=M(E),!z&&d.day&&d.month)){const G=y(d.day,d.month,E);h(ee=>({...ee,day:G}))}if(h(G=>({...G,[L]:z})),d.day&&d.month&&d.year){const G=j(L==="day"?E:d.day,L==="month"?E:d.month,L==="year"?E:d.year);G&&h(ee=>({...ee,day:G}))}},[d,y,w,M,j]),_=A.useMemo(()=>[{name:"day",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"month",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"year",classes:"nhsuk-input--width-4",inputmode:"numeric",pattern:"[0-9]*"}],[]),N=n||_;let C=s?.describedBy||"";const x=o?`${t}-hint`:"",k=l?`${t}-error`:"";x&&(C=C?`${C} ${x}`:x),k&&(C=C?`${C} ${k}`:k);const F=Object.values(p).some(L=>L),D=Ee("nhsuk-form-group",{"nhsuk-form-group--error":l||F}),P=Ee("nhsuk-date-input",e),I=()=>a.jsxs(a.Fragment,{children:[o&&a.jsx(cc,{id:x,className:o.classes,children:o.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:o.html}}):o.text}),l&&a.jsx(fc,{id:k,className:l.classes,children:l.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text}),Object.entries(p).map(([L,E])=>E?a.jsxs(fc,{id:`${t}-${L}-error`,className:"nhsuk-error-message",children:[a.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",E]},`${L}-error`):null),a.jsx("div",{className:P,id:t,"data-testid":"date-input",...u,children:N.map(L=>{const E=L.id||`${t}-${L.name}`,z=r?`${r}[${L.name}]`:L.name,G=L.label||L.name.charAt(0).toUpperCase()+L.name.slice(1),ee=p[L.name],T=d[L.name]||"";let K=C;if(ee){const O=`${t}-${L.name}-error`;K=K?`${K} ${O}`:O}return a.jsxs("div",{className:"nhsuk-date-input__item",children:[a.jsx(no,{htmlFor:E,className:"nhsuk-date-input__label",children:G}),a.jsx(to,{id:E,name:z,value:T,className:Ee("nhsuk-date-input__input",L.classes,{"nhsuk-input--error":ee}),inputMode:L.inputmode,autoComplete:L.autocomplete,pattern:L.pattern,"aria-describedby":K||void 0,hasError:!!ee,onChange:O=>v(L.name,O.target.value),onBlur:()=>b(L.name)})]},L.name)})})]});return a.jsx("div",{className:D,children:s?a.jsx(ro,{className:s.classes,legend:s.legend?{text:s.legend}:void 0,describedBy:C||void 0,children:I()}):I()})},Jf={animation:{AnimationDurationFast:"150ms",AnimationDurationNormal:"300ms",AnimationDurationSlow:"500ms",AnimationEasingEaseIn:"cubic-bezier(0.4, 0, 1, 1)",AnimationEasingEaseOut:"cubic-bezier(0, 0, 0.2, 1)",AnimationEasingEaseInOut:"cubic-bezier(0.4, 0, 0.2, 1)",AnimationEasingBounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},transition:{TransitionButtonDefault:"background-color 300ms cubic-bezier(0, 0, 0.2, 1)",TransitionButtonShadow:"box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionInputFocus:"border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionCardHover:"border-color 300ms cubic-bezier(0, 0, 0.2, 1)"},border:{BorderWidthDefault:"1px",BorderWidthFormElement:"2px",BorderWidthFormElementError:"4px",BorderWidthCardBottom:"4px",BorderWidthPanel:"4px",BorderWidthTableHeader:"2px",BorderWidthTableCell:"1px",BorderRadiusNone:"0px",BorderRadiusSmall:"4px",BorderRadiusMedium:"8px",BorderRadiusLarge:"12px",BorderColorDefault:"#d8dde0",BorderColorForm:"#4c6272",BorderColorCard:"#d8dde0",BorderColorCardHover:"#aeb7bd",BorderColorError:"#d5281b"},color:{ColorPrimaryBlue:"#005eb8",ColorPrimaryWhite:"#ffffff",ColorPrimaryBlack:"#212b32",ColorPrimaryGreen:"#007f3b",ColorPrimaryPurple:"#330072",ColorPrimaryDarkPink:"#7c2855",ColorPrimaryRed:"#d5281b",ColorPrimaryYellow:"#ffeb3b",ColorSecondaryPaleYellow:"#fff9c4",ColorSecondaryWarmYellow:"#ffb81c",ColorSecondaryOrange:"#ed8b00",ColorSecondaryAquaGreen:"#00a499",ColorSecondaryPink:"#ae2573",ColorGrey1:"#4c6272",ColorGrey2:"#768692",ColorGrey3:"#aeb7bd",ColorGrey4:"#d8dde0",ColorGrey5:"#f0f4f5",ColorTextPrimary:"#212b32",ColorTextSecondary:"#4c6272",ColorTextReverse:"#ffffff",ColorTextPrint:"#212b32",ColorLinkDefault:"#005eb8",ColorLinkHover:"#7c2855",ColorLinkActive:"#003087",ColorLinkVisited:"#330072",ColorFocusBackground:"#ffeb3b",ColorFocusText:"#212b32",ColorBorderDefault:"#d8dde0",ColorBorderSecondary:"#ffffff33",ColorError:"#d5281b",ColorFormBorder:"#4c6272",ColorFormBackground:"#ffffff",ColorButtonPrimaryBackground:"#007f3b",ColorButtonPrimaryText:"#ffffff",ColorButtonPrimaryHover:"#006530",ColorButtonPrimaryActive:"#004021",ColorButtonPrimaryShadow:"#004021",ColorButtonSecondaryBackground:"#00000000",ColorButtonSecondaryBackgroundSolid:"#ffffff",ColorButtonSecondaryBorder:"#005eb8",ColorButtonSecondaryText:"#005eb8",ColorButtonSecondaryHover:"#d9e5f2",ColorButtonSecondaryActive:"#c7daf0",ColorButtonSecondaryShadow:"#005eb8",ColorButtonReverseBackground:"#ffffff",ColorButtonReverseText:"#212b32",ColorButtonReverseHover:"#d9dde0",ColorButtonReverseActive:"#b3bcc2",ColorButtonReverseShadow:"#b3bcc2",ColorButtonWarningBackground:"#d5281b",ColorButtonWarningHover:"#aa2016",ColorButtonWarningActive:"#6a140e",ColorButtonWarningShadow:"#6a140e",ColorButtonLoginBackground:"#005eb8",ColorButtonLoginHover:"#004b93",ColorButtonLoginActive:"#002f5c",ColorButtonLoginShadow:"#002f5c"},component:{ComponentButtonPaddingMobileVertical:"8px",ComponentButtonPaddingMobileHorizontal:"16px",ComponentButtonPaddingDesktopVertical:"12px",ComponentButtonPaddingDesktopHorizontal:"16px",ComponentButtonShadowSize:"4px",ComponentFormInputMinHeight:"40px",ComponentFormInputPadding:"4px",ComponentFormCheckboxSize:"40px",ComponentFormCheckboxLabelPadding:"12px",ComponentCardPaddingMobile:"16px",ComponentCardPaddingDesktop:"32px",ComponentCardHeadingMargin:"16px",ComponentPanelPaddingMobile:"20px",ComponentPanelPaddingDesktop:"28px",ComponentBreadcrumbChevronMarginLeft:"9px",ComponentBreadcrumbChevronMarginRight:"2px",ComponentBreadcrumbPaddingTopMobile:"16px",ComponentBreadcrumbPaddingTopDesktop:"24px",ComponentSummaryListCellPaddingVertical:"8px",ComponentSummaryListCellPaddingHorizontal:"24px",ComponentSummaryListRowMargin:"16px",ComponentSpread:"4px",ComponentBlur:"4px",ComponentLink:"4px",ComponentDetails:"8px",ComponentExpander:"4px",ComponentPagination:"16px"},button:{ButtonPrimaryBackgroundDefault:"#007f3b",ButtonPrimaryBackgroundHover:"#006530",ButtonPrimaryBackgroundActive:"#004021",ButtonPrimaryBackgroundDisabled:"#d8dde0",ButtonPrimaryTextDefault:"#ffffff",ButtonPrimaryTextDisabled:"#768692",ButtonPrimaryBorderDefault:"#00000000",ButtonPrimaryBorderFocus:"#ffeb3b",ButtonSecondaryBackgroundDefault:"#00000000",ButtonSecondaryBackgroundSolid:"#ffffff",ButtonSecondaryBackgroundHover:"#d9e5f2",ButtonSecondaryBackgroundActive:"#c7daf0",ButtonSecondaryTextDefault:"#005eb8",ButtonSecondaryBorderDefault:"#005eb8",ButtonSpacingPaddingVerticalMobile:"8px",ButtonSpacingPaddingHorizontalMobile:"16px",ButtonSpacingPaddingVerticalDesktop:"12px",ButtonSpacingPaddingHorizontalDesktop:"16px",ButtonBorderWidth:"2px",ButtonBorderRadius:"4px",ButtonShadowSize:"4px",ButtonTypographyWeight:"600"},card:{CardBackgroundDefault:"#ffffff",CardBorderDefault:"#d8dde0",CardBorderHover:"#aeb7bd",CardBorderBottom:"#f0f4f5",CardTextHeading:"#212b32",CardTextDescription:"#212b32",CardTextLink:"#005eb8",CardSpacingPaddingMobile:"16px",CardSpacingPaddingDesktop:"32px",CardSpacingHeadingMargin:"16px",CardBorderWidthDefault:"1px",CardBorderWidthBottom:"4px",CardShadowDefault:"none",CardShadowHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},form:{FormInputBackgroundDefault:"#ffffff",FormInputBackgroundFocus:"#ffffff",FormInputBackgroundDisabled:"#d8dde0",FormInputBackgroundError:"#ffffff",FormInputBorderDefault:"#4c6272",FormInputBorderFocus:"#ffeb3b",FormInputBorderError:"#d5281b",FormInputBorderDisabled:"#aeb7bd",FormInputTextDefault:"#212b32",FormInputTextPlaceholder:"#4c6272",FormInputTextDisabled:"#768692",FormLabelTextDefault:"#212b32",FormLabelTextRequired:"#ffffff",FormLabelTypographyWeight:"600",FormErrorTextDefault:"#d5281b",FormErrorTypographyWeight:"600",FormHintTextDefault:"#4c6272",FormSpacingInputPadding:"4px",FormSpacingInputMinHeight:"40px",FormSpacingCheckboxSize:"40px",FormSpacingCheckboxLabelPadding:"12px",FormBorderWidthDefault:"2px",FormBorderWidthError:"4px",FormBorderRadius:"0px"},size:{SizeIconSmall:"16px",SizeIconMedium:"18px",SizeIconLarge:"24px",SizeIconExtraLarge:"32px",SizeIconNhsDefault:"34px",SizeFormControlSmall:"32px",SizeFormControlMedium:"40px",SizeFormControlLarge:"48px",SizeFormInputWidthXs:"5.4ex",SizeFormInputWidthSm:"7.2ex",SizeFormInputWidthMd:"9ex",SizeFormInputWidthLg:"10.8ex",SizeFormInputWidthXl:"20ex",SizeFormInputWidth2xl:"38ex",SizeFormInputWidth3xl:"56ex",SizeButtonMinHeightMobile:"44px",SizeButtonMinHeightDesktop:"40px"},layout:{LayoutContainerMaxWidth:"1020px",LayoutColumnFull:"100%",LayoutColumnHalf:"50%",LayoutColumnThird:"33.333%",LayoutColumnQuarter:"25%",LayoutColumnActions:"20%"},breakpoint:{BreakpointMobile:"320px",BreakpointTablet:"641px",BreakpointDesktop:"1025px",BreakpointLargeDesktop:"1280px"},grid:{GridPageWidth:"960px",GridGutter:"32px",GridGutterHalf:"16px"},state:{StateErrorBackground:"#d5281b",StateErrorBorder:"#d5281b",StateErrorText:"#ffffff",StateSuccessBackground:"#007f3b",StateSuccessBorder:"#007f3b",StateSuccessText:"#ffffff",StateWarningBackground:"#ffeb3b",StateWarningBorder:"#ffeb3b",StateWarningText:"#212b32",StateInfoBackground:"#005eb8",StateInfoBorder:"#005eb8",StateInfoText:"#ffffff",StateDisabledBackground:"#d8dde0",StateDisabledBorder:"#aeb7bd",StateDisabledText:"#768692"},shadow:{ShadowButtonDefault:"0 4px 0 #004021",ShadowButtonSecondary:"0 4px 0 #005eb8",ShadowButtonWarning:"0 4px 0 #6a140e",ShadowButtonFocus:"0 4px 0 #ffeb3b",ShadowCardDefault:"none",ShadowCardHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},"focus-outline":{FocusOutlineWidth:"4px",FocusOutlineOffset:"0px",FocusOutlineStyle:"solid"},"focus-shadow":{FocusShadowInput:"0 0 0 3px #ffeb3b",FocusShadowButton:"0 0 0 3px #ffeb3b"},elevation:{ElevationNone:"none",ElevationLow:"0 1px 3px rgba(0, 0, 0, 0.12)",ElevationMedium:"0 2px 6px rgba(0, 0, 0, 0.16)",ElevationHigh:"0 4px 12px rgba(0, 0, 0, 0.20)"},spacing:{Spacing0:"0",Spacing1:"4px",Spacing2:"8px",Spacing3:"16px",Spacing4:"24px",Spacing5:"32px",Spacing6:"40px",Spacing7:"48px",Spacing8:"56px",Spacing9:"64px"},"spacing-responsive":{SpacingResponsive0Mobile:"0",SpacingResponsive0Tablet:"0",SpacingResponsive1Mobile:"4px",SpacingResponsive1Tablet:"4px",SpacingResponsive2Mobile:"8px",SpacingResponsive2Tablet:"8px",SpacingResponsive3Mobile:"8px",SpacingResponsive3Tablet:"16px",SpacingResponsive4Mobile:"16px",SpacingResponsive4Tablet:"24px",SpacingResponsive5Mobile:"24px",SpacingResponsive5Tablet:"32px",SpacingResponsive6Mobile:"32px",SpacingResponsive6Tablet:"40px",SpacingResponsive7Mobile:"40px",SpacingResponsive7Tablet:"48px",SpacingResponsive8Mobile:"48px",SpacingResponsive8Tablet:"56px",SpacingResponsive9Mobile:"56px",SpacingResponsive9Tablet:"64px"},font:{FontFamilyBase:"Frutiger W01",FontFamilyFallback:"Arial, Helvetica, sans-serif",FontFamilyPrint:"sans-serif",FontWeightNormal:"400",FontWeightBold:"600",FontWeightLight:"400",FontSize14Mobile:"12px",FontSize14Tablet:"14px",FontSize14Print:"12pt",FontSize16Mobile:"14px",FontSize16Tablet:"16px",FontSize16Print:"12pt",FontSize19Mobile:"16px",FontSize19Tablet:"19px",FontSize19Print:"13pt",FontSize22Mobile:"19px",FontSize22Tablet:"22px",FontSize22Print:"15pt",FontSize26Mobile:"22px",FontSize26Tablet:"26px",FontSize26Print:"17pt",FontSize36Mobile:"27px",FontSize36Tablet:"36px",FontSize36Print:"20pt",FontSize48Mobile:"33px",FontSize48Tablet:"48px",FontSize48Print:"24pt",FontSizeBase:"16px",FontLineHeightBase:"24px"},headings:{xl:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},l:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},m:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},s:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xs:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}}},paragraphs:{body:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bodyLarge:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},bodySmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ledeText:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},ledeTextSmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}}}},Kf=A.createContext(Jf),xv=({children:t,theme:e={}})=>{const n={...Jf,...e};return a.jsx(Kf.Provider,{value:n,children:t})},vv=()=>{const t=A.useContext(Kf);if(!t)throw new Error("useNHSTheme must be used within an NHSThemeProvider");return t};function _v(){return`
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 400;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff") format("woff");
	}
	
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 600;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff") format("woff");
	}
  `}function wv(){if(typeof document>"u"||document.getElementById("nhs-fonts"))return;const t=document.createElement("style");t.id="nhs-fonts",t.textContent=_v(),document.head.appendChild(t)}const Sv=({children:t,theme:e})=>(A.useEffect(()=>{wv()},[]),a.jsx(xv,{theme:e,children:t})),kv="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1MTIiIGhlaWdodD0iMTEzIiAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgaWQ9ImZkcGxvZ28iPgogICAgPHJlY3QgaWQ9ImZkcGxvZ28tcmVjdGFuZ2xlIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigzMiwgOTUsIDE3MikiIHg9IjIuNyIgeT0iLTAuMDMiIHdpZHRoPSIxNDQuMSIgaGVpZ2h0PSI1OC4wNSIgLz4KICAgIDxwYXRoIGlkPSJmZHBsb2dvLWJlemllciIgc3Ryb2tlPSJub25lIiBmaWxsPSJyZ2IoMjU0LCAyNTQsIDI1NCkiIGQ9Ik0gNjAuNjEsNS42IEwgNTAuNjYsNTIuMzEgMzUuMDYsNTIuMzEgMjUuMjQsMTkuOTkgMjUuMTEsMTkuOTkgMTguNTgsNTIuMzEgNi43NCw1Mi4zMSAxNi43Nyw1LjYgMzIuNDMsNS42IDQyLjA1LDM3Ljk5IDQyLjE4LDM3Ljk5IDQ4Ljc3LDUuNiA2MC42MSw1LjYgWiBNIDYwLjYxLDUuNiIgLz4KICAgIDxwYXRoIGlkPSJmZHBsb2dvLWJlemllcjIiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDEwNS4yNiw1LjYgTCA5NS41MSw1Mi4zMSA4Mi45NCw1Mi4zMSA4Ny4xMSwzMi4zIDcyLjI0LDMyLjMgNjguMDcsNTIuMzEgNTUuNDksNTIuMzEgNjUuMjUsNS42IDc3LjgyLDUuNiA3NC4xMywyMy40NyA4OC45OSwyMy40NyA5Mi42OSw1LjYgMTA1LjI2LDUuNiBaIE0gMTA1LjI2LDUuNiIgLz4KICAgIDxwYXRoIGlkPSJmZHBsb2dvLWJlemllcjMiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDE0MS4zOCw2Ljg3IEwgMTM4LjM1LDE2LjE3IEMgMTM1LjkyLDE1LjA0IDEzMi42MywxNC4wNCAxMjcuOTksMTQuMDQgMTIzLjAyLDE0LjA0IDExOC45OCwxNC43NyAxMTguOTgsMTguNTIgMTE4Ljk4LDI1LjE0IDEzNy4yLDIyLjY3IDEzNy4yLDM2Ljg1IDEzNy4yLDQ5Ljc3IDEyNS4xNyw1My4xMiAxMTQuMjcsNTMuMTIgMTA5LjQzLDUzLjEyIDEwMy44NSw1MS45NyA5OS43NSw1MC43IEwgMTAyLjcxLDQxLjIgQyAxMDUuMTksNDIuOCAxMTAuMTcsNDMuODggMTE0LjI3LDQzLjg4IDExOC4xOCw0My44OCAxMjQuMjksNDMuMTQgMTI0LjI5LDM4LjMyIDEyNC4yOSwzMC44MyAxMDYuMDYsMzMuNjQgMTA2LjA2LDIwLjQ2IDEwNi4wNiw4LjQyIDExNi42OSw0LjggMTI2Ljk4LDQuOCAxMzIuNzcsNC44IDEzOC4yMSw1LjQxIDE0MS4zOCw2Ljg3IFogTSAxNDEuMzgsNi44NyIgLz4KICAgIAogICAgPHRleHQgIGZpbGw9InJnYigzNSwgMzEsIDMyKSIgZm9udC1mYW1pbHk9IkZydXRpZ2VyTFRQcm8tQm9sZCwgJ0ZydXRpZ2VyIExUIFBybycsIHNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSJib2xkIiBmb250LXNpemU9IjQwIiB4PSIwIiB5PSI2NC44OSI+PHRzcGFuIHg9IjAiIHk9IjEwMi44OSI+RmVkZXJhdGVkIERhdGEgUGxhdGZvcm08L3RzcGFuPjwvdGV4dD4KPC9zdmc+Cg==",Cv="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyOTAiIGhlaWdodD0iMTU1IiAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgaWQ9ImZkcHR3b2xpbmUiPgogICAgPHJlY3QgaWQ9ImZkcHR3b2xpbmUtcmVjdGFuZ2xlIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigzMiwgOTUsIDE3MikiIHg9IjIuNyIgeT0iLTAuMDMiIHdpZHRoPSIxNDQuMSIgaGVpZ2h0PSI1OC4wNSIgLz4KICAgIDxwYXRoIGlkPSJmZHB0d29saW5lLWJlemllciIgc3Ryb2tlPSJub25lIiBmaWxsPSJyZ2IoMjU0LCAyNTQsIDI1NCkiIGQ9Ik0gNjAuNjEsNS42IEwgNTAuNjYsNTIuMzEgMzUuMDYsNTIuMzEgMjUuMjQsMTkuOTkgMjUuMTEsMTkuOTkgMTguNTgsNTIuMzEgNi43NCw1Mi4zMSAxNi43Nyw1LjYgMzIuNDMsNS42IDQyLjA1LDM3Ljk5IDQyLjE4LDM3Ljk5IDQ4Ljc3LDUuNiA2MC42MSw1LjYgWiBNIDYwLjYxLDUuNiIgLz4KICAgIDxwYXRoIGlkPSJmZHB0d29saW5lLWJlemllcjIiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDEwNS4yNiw1LjYgTCA5NS41MSw1Mi4zMSA4Mi45NCw1Mi4zMSA4Ny4xMSwzMi4zIDcyLjI0LDMyLjMgNjguMDcsNTIuMzEgNTUuNDksNTIuMzEgNjUuMjUsNS42IDc3LjgyLDUuNiA3NC4xMywyMy40NyA4OC45OSwyMy40NyA5Mi42OSw1LjYgMTA1LjI2LDUuNiBaIE0gMTA1LjI2LDUuNiIgLz4KICAgIDxwYXRoIGlkPSJmZHB0d29saW5lLWJlemllcjMiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDE0MS4zOCw2Ljg3IEwgMTM4LjM1LDE2LjE3IEMgMTM1LjkyLDE1LjA0IDEzMi42MywxNC4wNCAxMjcuOTksMTQuMDQgMTIzLjAyLDE0LjA0IDExOC45OCwxNC43NyAxMTguOTgsMTguNTIgMTE4Ljk4LDI1LjE0IDEzNy4yLDIyLjY3IDEzNy4yLDM2Ljg1IDEzNy4yLDQ5Ljc3IDEyNS4xNyw1My4xMiAxMTQuMjcsNTMuMTIgMTA5LjQzLDUzLjEyIDEwMy44NSw1MS45NyA5OS43NSw1MC43IEwgMTAyLjcxLDQxLjIgQyAxMDUuMTksNDIuOCAxMTAuMTcsNDMuODggMTE0LjI3LDQzLjg4IDExOC4xOCw0My44OCAxMjQuMjksNDMuMTQgMTI0LjI5LDM4LjMyIDEyNC4yOSwzMC44MyAxMDYuMDYsMzMuNjQgMTA2LjA2LDIwLjQ2IDEwNi4wNiw4LjQyIDExNi42OSw0LjggMTI2Ljk4LDQuOCAxMzIuNzcsNC44IDEzOC4yMSw1LjQxIDE0MS4zOCw2Ljg3IFogTSAxNDEuMzgsNi44NyIgLz4KICAgIDx0ZXh0ICBmaWxsPSJyZ2IoMzUsIDMxLCAzMikiIGZvbnQtZmFtaWx5PSJGcnV0aWdlckxUUHJvLUJvbGQsICdGcnV0aWdlciBMVCBQcm8nLCBzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iYm9sZCIgZm9udC1zaXplPSI0MCIgeD0iMCIgeT0iNjQuODkiPjx0c3BhbiB4PSIwIiB5PSIxMDIuODkiPkZlZGVyYXRlZCBEYXRhIAo8L3RzcGFuPjx0c3BhbiB4PSIwIiB5PSIxNTAuODkiPlBsYXRmb3JtPC90c3Bhbj48L3RleHQ+Cjwvc3ZnPgo=",Nv="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyOTAiIGhlaWdodD0iMTU1IiB4bWw6c3BhY2U9InByZXNlcnZlIiBpZD0iZmRwdHdvbGluZWludmVyc2UiPgoJPHJlY3QgaWQ9ImZkcHR3b2xpbmVpbnZlcnNlLXJlY3RhbmdsZSIgc3Ryb2tlPSJub25lIiBmaWxsPSJyZ2IoMzIsIDk1LCAxNzIpIiB4PSIyLjciIHk9Ii0wLjAzIiB3aWR0aD0iMTQ0LjEiIGhlaWdodD0iNTguMDUiIC8+Cgk8cGF0aCBpZD0iZmRwdHdvbGluZWludmVyc2UtYmV6aWVyIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigyNTQsIDI1NCwgMjU0KSIgZD0iTSA2MC42MSw1LjYgTCA1MC42Niw1Mi4zMSAzNS4wNiw1Mi4zMSAyNS4yNCwxOS45OSAyNS4xMSwxOS45OSAxOC41OCw1Mi4zMSA2Ljc0LDUyLjMxIDE2Ljc3LDUuNiAzMi40Myw1LjYgNDIuMDUsMzcuOTkgNDIuMTgsMzcuOTkgNDguNzcsNS42IDYwLjYxLDUuNiBaIE0gNjAuNjEsNS42IiAvPgoJPHBhdGggaWQ9ImZkcHR3b2xpbmVpbnZlcnNlLWJlemllcjIiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDEwNS4yNiw1LjYgTCA5NS41MSw1Mi4zMSA4Mi45NCw1Mi4zMSA4Ny4xMSwzMi4zIDcyLjI0LDMyLjMgNjguMDcsNTIuMzEgNTUuNDksNTIuMzEgNjUuMjUsNS42IDc3LjgyLDUuNiA3NC4xMywyMy40NyA4OC45OSwyMy40NyA5Mi42OSw1LjYgMTA1LjI2LDUuNiBaIE0gMTA1LjI2LDUuNiIgLz4KCTxwYXRoIGlkPSJmZHB0d29saW5laW52ZXJzZS1iZXppZXIzIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigyNTQsIDI1NCwgMjU0KSIgZD0iTSAxNDEuMzgsNi44NyBMIDEzOC4zNSwxNi4xNyBDIDEzNS45MiwxNS4wNCAxMzIuNjMsMTQuMDQgMTI3Ljk5LDE0LjA0IDEyMy4wMiwxNC4wNCAxMTguOTgsMTQuNzcgMTE4Ljk4LDE4LjUyIDExOC45OCwyNS4xNCAxMzcuMiwyMi42NyAxMzcuMiwzNi44NSAxMzcuMiw0OS43NyAxMjUuMTcsNTMuMTIgMTE0LjI3LDUzLjEyIDEwOS40Myw1My4xMiAxMDMuODUsNTEuOTcgOTkuNzUsNTAuNyBMIDEwMi43MSw0MS4yIEMgMTA1LjE5LDQyLjggMTEwLjE3LDQzLjg4IDExNC4yNyw0My44OCAxMTguMTgsNDMuODggMTI0LjI5LDQzLjE0IDEyNC4yOSwzOC4zMiAxMjQuMjksMzAuODMgMTA2LjA2LDMzLjY0IDEwNi4wNiwyMC40NiAxMDYuMDYsOC40MiAxMTYuNjksNC44IDEyNi45OCw0LjggMTMyLjc3LDQuOCAxMzguMjEsNS40MSAxNDEuMzgsNi44NyBaIE0gMTQxLjM4LDYuODciIC8+Cgk8dGV4dCBmaWxsPSJyZ2IoMjU0LCAyNTQsIDI1NCkiIGZvbnQtZmFtaWx5PSJGcnV0aWdlckxUUHJvLUJvbGQsICdGcnV0aWdlciBMVCBQcm8nLCBzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iYm9sZCIgZm9udC1zaXplPSI0MCIgeD0iMCIgeT0iNjQuODkiPgoJCTx0c3BhbiB4PSIwIiB5PSIxMDIuODkiPgoJCQlGZWRlcmF0ZWQgRGF0YQoJCTwvdHNwYW4+CgkJPHRzcGFuIHg9IjAiIHk9IjE1MC44OSI+CgkJCVBsYXRmb3JtCgkJPC90c3Bhbj4KCTwvdGV4dD4KPC9zdmc+Cg==",Mv="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1MTIiIGhlaWdodD0iMTEzIiAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgaWQ9ImZkcGxvZ29pbnZlcnNlIj4KICAgIDxyZWN0IGlkPSJmZHBsb2dvaW52ZXJzZS1yZWN0YW5nbGUiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiB4PSIyLjciIHk9Ii0wLjAzIiB3aWR0aD0iMTQ0LjEiIGhlaWdodD0iNTguMDUiIC8+CiAgICA8ZyBpZD0iZmRwbG9nb2ludmVyc2UtZ3JvdXAiPgogICAgICAgIDxwYXRoIGlkPSJmZHBsb2dvaW52ZXJzZS1iZXppZXIzIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigwLCA5NCwgMTg0KSIgZD0iTSAxNDEuMzgsNi44NyBMIDEzOC4zNSwxNi4xNyBDIDEzNS45MiwxNS4wNCAxMzIuNjMsMTQuMDQgMTI3Ljk5LDE0LjA0IDEyMy4wMiwxNC4wNCAxMTguOTgsMTQuNzcgMTE4Ljk4LDE4LjUyIDExOC45OCwyNS4xNCAxMzcuMiwyMi42NyAxMzcuMiwzNi44NSAxMzcuMiw0OS43NyAxMjUuMTcsNTMuMTIgMTE0LjI3LDUzLjEyIDEwOS40Myw1My4xMiAxMDMuODUsNTEuOTcgOTkuNzUsNTAuNyBMIDEwMi43MSw0MS4yIEMgMTA1LjE5LDQyLjggMTEwLjE3LDQzLjg4IDExNC4yNyw0My44OCAxMTguMTgsNDMuODggMTI0LjI5LDQzLjE0IDEyNC4yOSwzOC4zMiAxMjQuMjksMzAuODMgMTA2LjA2LDMzLjY0IDEwNi4wNiwyMC40NiAxMDYuMDYsOC40MiAxMTYuNjksNC44IDEyNi45OCw0LjggMTMyLjc3LDQuOCAxMzguMjEsNS40MSAxNDEuMzgsNi44NyBaIE0gMTQxLjM4LDYuODciIC8+CiAgICAgICAgPHBhdGggaWQ9ImZkcGxvZ29pbnZlcnNlLWJlemllcjIiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDAsIDk0LCAxODQpIiBkPSJNIDEwNS4yNiw1LjYgTCA5NS41MSw1Mi4zMSA4Mi45NCw1Mi4zMSA4Ny4xMSwzMi4zIDcyLjI0LDMyLjMgNjguMDcsNTIuMzEgNTUuNDksNTIuMzEgNjUuMjUsNS42IDc3LjgyLDUuNiA3NC4xMywyMy40NyA4OC45OSwyMy40NyA5Mi42OSw1LjYgMTA1LjI2LDUuNiBaIE0gMTA1LjI2LDUuNiIgLz4KICAgICAgICA8cGF0aCBpZD0iZmRwbG9nb2ludmVyc2UtYmV6aWVyIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigwLCA5NCwgMTg0KSIgZD0iTSA2MC42MSw1LjYgTCA1MC42Niw1Mi4zMSAzNS4wNiw1Mi4zMSAyNS4yNCwxOS45OSAyNS4xMSwxOS45OSAxOC41OCw1Mi4zMSA2Ljc0LDUyLjMxIDE2Ljc3LDUuNiAzMi40Myw1LjYgNDIuMDUsMzcuOTkgNDIuMTgsMzcuOTkgNDguNzcsNS42IDYwLjYxLDUuNiBaIE0gNjAuNjEsNS42IiAvPgogICAgPC9nPgogICAgCiAgICA8dGV4dCAgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBmb250LWZhbWlseT0iRnJ1dGlnZXJMVFByby1Cb2xkLCAnRnJ1dGlnZXIgTFQgUHJvJywgc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZvbnQtc2l6ZT0iNDAiIHg9IjAiIHk9IjY0Ljg5Ij48dHNwYW4geD0iMCIgeT0iMTAyLjg5Ij5GZWRlcmF0ZWQgRGF0YSBQbGF0Zm9ybTwvdHNwYW4+PC90ZXh0Pgo8L3N2Zz4K",jv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='357'%20height='114'%20xml:space='preserve'%20id='fdpgraphic'%3e%3cdefs%3e%3clinearGradient%20id='fdpgraphic-gradient-rectangle2'%20x1='113.66'%20y1='27.99'%20x2='0.02'%20y2='27.99'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0'%20stop-color='rgb(96,%20178,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.51'%20stop-color='rgb(34,%2094,%20172)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdpgraphic-gradient2-clip'%20x1='243.8'%20y1='28.5'%20x2='113.64'%20y2='28.5'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(4,%20150,%2071)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.64'%20stop-color='rgb(51,%20159,%20112)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(98,%20167,%20153)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdpgraphic-gradient4-bezier4'%20x1='357.05'%20y1='85.21'%20x2='243.44'%20y2='85.21'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(214,%20203,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.86'%20stop-color='rgb(234,%20229,%20240)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(255,%20255,%20255)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cg%20id='fdpgraphic-group3'%3e%3cg%20id='fdpgraphic-squareGroup'%3e%3crect%20id='fdpgraphic-rectangle'%20stroke='none'%20fill='rgb(34,%2094,%20172)'%20x='0.02'%20y='0.49'%20width='113.6'%20height='113.6'%20/%3e%3crect%20id='fdpgraphic-rectangle2'%20stroke='none'%20fill='url(%23fdpgraphic-gradient-rectangle2)'%20x='0'%20y='0'%20width='113.65'%20height='56'%20/%3e%3c/g%3e%3cg%20id='fdpgraphic-hexagonGroup'%3e%3cpath%20id='fdpgraphic-polygon'%20stroke='none'%20fill='rgb(73,%20160,%20152)'%20d='M%20146.15,-0%20L%20211.25,0%20243.8,57.03%20211.25,114.06%20146.15,114.06%20113.6,57.03%20146.15,-0%20Z%20M%20146.15,-0'%20/%3e%3cg%20id='fdpgraphic-hexagon'%3e%3cpath%20id='fdpgraphic-clip'%20stroke='none'%20fill='url(%23fdpgraphic-gradient2-clip)'%20d='M%20146.18,-0%20L%20113.64,57%20243.8,57%20211.26,-0%20146.18,-0%20Z%20M%20146.18,-0'%20/%3e%3c/g%3e%3c/g%3e%3cg%20id='fdpgraphic-circleGroup'%3e%3ccircle%20id='fdpgraphic-oval'%20stroke='none'%20fill='rgb(214,%20203,%20226)'%20cx='300.25'%20cy='56.8'%20r='56.8'%20/%3e%3cpath%20id='fdpgraphic-bezier4'%20stroke='none'%20fill='url(%23fdpgraphic-gradient4-bezier4)'%20d='M%20300.25,56.8%20L%20243.45,56.8%20C%20243.45,88.18%20268.88,113.61%20300.25,113.61%20L%20300.25,113.61%20C%20331.62,113.61%20357.05,88.18%20357.05,56.8%20L%20357.05,56.8%20300.25,56.8%20Z%20M%20300.25,56.8'%20/%3e%3c/g%3e%3cpath%20id='fdpgraphic-bezier5'%20stroke='rgb(217,%20216,%20216)'%20stroke-width='2.49'%20stroke-miterlimit='2.49'%20fill='none'%20d='M%2054.9,56.9%20L%20301.64,56.9'%20/%3e%3c/g%3e%3c/svg%3e",Tv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='393'%20height='47'%20xml:space='preserve'%20id='fdplockuplogo'%3e%3cdefs%3e%3clinearGradient%20id='fdplockuplogo-gradient-rectangle2'%20x1='45.65'%20y1='11.5'%20x2='0.01'%20y2='11.5'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0'%20stop-color='rgb(96,%20178,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.51'%20stop-color='rgb(34,%2094,%20172)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdplockuplogo-gradient2-clip'%20x1='98.8'%20y1='12'%20x2='45.64'%20y2='12'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(4,%20150,%2071)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.64'%20stop-color='rgb(51,%20159,%20112)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(98,%20167,%20153)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdplockuplogo-gradient4-bezier4'%20x1='145.05'%20y1='34.96'%20x2='98.45'%20y2='34.96'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(214,%20203,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.86'%20stop-color='rgb(234,%20229,%20240)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(255,%20255,%20255)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cpath%20id='fdplockuplogo-bezier7'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20157.2,1.11%20L%20168.06,1.11%20184.85,34.06%20184.97,34.06%20184.97,1.11%20193.43,1.11%20193.43,45.17%20182.64,45.17%20165.78,12.22%20165.66,12.22%20165.66,45.17%20157.2,45.17%20157.2,1.11%20Z%20M%20157.2,1.11'%20/%3e%3cpath%20id='fdplockuplogo-bezier8'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20200.37,1.11%20L%20209.21,1.11%20209.21,18.91%20226.88,18.91%20226.88,1.11%20235.72,1.11%20235.72,45.17%20226.88,45.17%20226.88,25.85%20209.21,25.85%20209.21,45.17%20200.37,45.17%20200.37,1.11%20Z%20M%20200.37,1.11'%20/%3e%3cpath%20id='fdplockuplogo-bezier9'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20267.78,9.19%20C%20265,7.99%20261.91,7.29%20258.81,7.29%20255.78,7.29%20251.87,8.62%20251.87,13.42%20251.87,21.05%20271.19,17.84%20271.19,32.61%20271.19,42.27%20263.55,45.93%20254.65,45.93%20249.85,45.93%20247.7,45.3%20243.35,44.22%20L%20244.17,36.27%20C%20247.2,37.91%20250.67,38.98%20254.14,38.98%20257.49,38.98%20261.97,37.28%20261.97,33.3%20261.97,24.91%20242.65,28.38%20242.65,13.79%20242.65,3.95%20250.29,0.35%20258.06,0.35%20261.84,0.35%20265.38,0.85%20268.6,1.93%20L%20267.78,9.19%20Z%20M%20267.78,9.19'%20/%3e%3cpath%20id='fdplockuplogo-bezier10'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20287.4,1.11%20L%20311.89,1.11%20311.89,8.05%20296.23,8.05%20296.23,18.91%20311.13,18.91%20311.13,25.85%20296.23,25.85%20296.23,45.17%20287.4,45.17%20287.4,1.11%20Z%20M%20287.4,1.11'%20/%3e%3cpath%20id='fdplockuplogo-bezier11'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20327.66,38.23%20L%20332.59,38.23%20C%20339.97,38.23%20347.11,32.73%20347.11,23.14%20347.11,13.54%20339.97,8.05%20332.59,8.05%20L%20327.66,8.05%20327.66,38.23%20Z%20M%20318.82,1.1%20L%20330.88,1.1%20C%20344.39,1.1%20356.32,5.65%20356.32,23.14%20356.32,40.63%20344.39,45.17%20330.88,45.17%20L%20318.82,45.17%20318.82,1.1%20Z%20M%20318.82,1.1'%20/%3e%3cpath%20id='fdplockuplogo-bezier12'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20372.09,21.5%20L%20375.19,21.5%20C%20379.61,21.5%20383.58,20.04%20383.58,14.93%20383.58,9.82%20379.73,8.05%20375.19,8.05%20L%20372.09,8.05%20372.09,21.5%20Z%20M%20363.26,1.11%20L%20374.43,1.11%20C%20384.03,1.11%20392.8,3.88%20392.8,14.43%20392.8,24.72%20385.29,28.44%20375.82,28.44%20L%20372.09,28.44%20372.09,45.17%20363.26,45.17%20363.26,1.11%20Z%20M%20363.26,1.11'%20/%3e%3cg%20id='fdplockuplogo-group3'%3e%3cg%20id='fdplockuplogo-squareGroup'%3e%3crect%20id='fdplockuplogo-rectangle'%20stroke='none'%20fill='rgb(34,%2094,%20172)'%20x='0.02'%20y='0.49'%20width='45.6'%20height='46.6'%20/%3e%3crect%20id='fdplockuplogo-rectangle2'%20stroke='none'%20fill='url(%23fdplockuplogo-gradient-rectangle2)'%20x='0'%20y='0'%20width='45.65'%20height='23'%20/%3e%3c/g%3e%3cg%20id='fdplockuplogo-hexagonGroup'%3e%3cpath%20id='fdplockuplogo-polygon'%20stroke='none'%20fill='rgb(73,%20160,%20152)'%20d='M%2058.9,-0%20L%2085.5,-0%2098.8,23.53%2085.5,47.06%2058.9,47.06%2045.6,23.53%2058.9,-0%20Z%20M%2058.9,-0'%20/%3e%3cg%20id='fdplockuplogo-hexagon'%3e%3cpath%20id='fdplockuplogo-clip'%20stroke='none'%20fill='url(%23fdplockuplogo-gradient2-clip)'%20d='M%2058.93,-0%20L%2045.64,24%2098.8,24%2085.51,-0%2058.93,-0%20Z%20M%2058.93,-0'%20/%3e%3c/g%3e%3c/g%3e%3cg%20id='fdplockuplogo-circleGroup'%3e%3cg%20id='fdplockuplogo-group'%3e%3ccircle%20id='fdplockuplogo-oval'%20stroke='none'%20fill='rgb(214,%20203,%20226)'%20cx='121.75'%20cy='23.3'%20r='23.3'%20/%3e%3cpath%20id='fdplockuplogo-bezier4'%20stroke='none'%20fill='url(%23fdplockuplogo-gradient4-bezier4)'%20d='M%20121.75,23.3%20L%2098.45,23.3%20C%2098.45,36.17%20108.88,46.61%20121.75,46.61%20L%20121.75,46.61%20C%20134.62,46.61%20145.05,36.17%20145.05,23.3%20L%20145.05,23.3%20121.75,23.3%20Z%20M%20121.75,23.3'%20/%3e%3c/g%3e%3c/g%3e%3cpath%20id='fdplockuplogo-bezier5'%20stroke='rgb(217,%20216,%20216)'%20stroke-width='1'%20stroke-miterlimit='2.49'%20fill='none'%20d='M%2022.3,23.48%20L%20122.54,23.48'%20/%3e%3c/g%3e%3c/svg%3e",Dv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='393'%20height='47'%20xml:space='preserve'%20id='fdplockuplogoinverted'%3e%3cdefs%3e%3clinearGradient%20id='fdplockuplogoinverted-gradient-rectangle2'%20x1='45.65'%20y1='11.5'%20x2='0.01'%20y2='11.5'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0'%20stop-color='rgb(96,%20178,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.51'%20stop-color='rgb(34,%2094,%20172)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdplockuplogoinverted-gradient2-clip'%20x1='98.8'%20y1='12'%20x2='45.64'%20y2='12'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(4,%20150,%2071)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.64'%20stop-color='rgb(51,%20159,%20112)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(98,%20167,%20153)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdplockuplogoinverted-gradient4-bezier4'%20x1='145.05'%20y1='34.96'%20x2='98.45'%20y2='34.96'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(214,%20203,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.86'%20stop-color='rgb(234,%20229,%20240)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(255,%20255,%20255)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cpath%20id='fdplockuplogoinverted-bezier7'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20157.2,1.11%20L%20168.06,1.11%20184.85,34.06%20184.97,34.06%20184.97,1.11%20193.43,1.11%20193.43,45.17%20182.64,45.17%20165.78,12.22%20165.66,12.22%20165.66,45.17%20157.2,45.17%20157.2,1.11%20Z%20M%20157.2,1.11'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier8'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20200.37,1.11%20L%20209.21,1.11%20209.21,18.91%20226.88,18.91%20226.88,1.11%20235.72,1.11%20235.72,45.17%20226.88,45.17%20226.88,25.85%20209.21,25.85%20209.21,45.17%20200.37,45.17%20200.37,1.11%20Z%20M%20200.37,1.11'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier9'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20267.78,9.19%20C%20265,7.99%20261.91,7.29%20258.81,7.29%20255.78,7.29%20251.87,8.62%20251.87,13.42%20251.87,21.05%20271.19,17.84%20271.19,32.61%20271.19,42.27%20263.55,45.93%20254.65,45.93%20249.85,45.93%20247.7,45.3%20243.35,44.22%20L%20244.17,36.27%20C%20247.2,37.91%20250.67,38.98%20254.14,38.98%20257.49,38.98%20261.97,37.28%20261.97,33.3%20261.97,24.91%20242.65,28.38%20242.65,13.79%20242.65,3.95%20250.29,0.35%20258.06,0.35%20261.84,0.35%20265.38,0.85%20268.6,1.93%20L%20267.78,9.19%20Z%20M%20267.78,9.19'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier10'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20287.4,1.11%20L%20311.89,1.11%20311.89,8.05%20296.23,8.05%20296.23,18.91%20311.13,18.91%20311.13,25.85%20296.23,25.85%20296.23,45.17%20287.4,45.17%20287.4,1.11%20Z%20M%20287.4,1.11'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier11'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20327.66,38.23%20L%20332.59,38.23%20C%20339.97,38.23%20347.11,32.73%20347.11,23.14%20347.11,13.54%20339.97,8.05%20332.59,8.05%20L%20327.66,8.05%20327.66,38.23%20Z%20M%20318.82,1.1%20L%20330.88,1.1%20C%20344.39,1.1%20356.32,5.65%20356.32,23.14%20356.32,40.63%20344.39,45.17%20330.88,45.17%20L%20318.82,45.17%20318.82,1.1%20Z%20M%20318.82,1.1'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier12'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20372.09,21.5%20L%20375.19,21.5%20C%20379.61,21.5%20383.58,20.04%20383.58,14.93%20383.58,9.82%20379.73,8.05%20375.19,8.05%20L%20372.09,8.05%20372.09,21.5%20Z%20M%20363.26,1.11%20L%20374.43,1.11%20C%20384.03,1.11%20392.8,3.88%20392.8,14.43%20392.8,24.72%20385.29,28.44%20375.82,28.44%20L%20372.09,28.44%20372.09,45.17%20363.26,45.17%20363.26,1.11%20Z%20M%20363.26,1.11'%20/%3e%3cg%20id='fdplockuplogoinverted-group3'%3e%3cg%20id='fdplockuplogoinverted-squareGroup'%3e%3crect%20id='fdplockuplogoinverted-rectangle'%20stroke='none'%20fill='rgb(34,%2094,%20172)'%20x='0.02'%20y='0.49'%20width='45.6'%20height='46.6'%20/%3e%3crect%20id='fdplockuplogoinverted-rectangle2'%20stroke='none'%20fill='url(%23fdplockuplogoinverted-gradient-rectangle2)'%20x='0'%20y='0'%20width='45.65'%20height='23'%20/%3e%3c/g%3e%3cg%20id='fdplockuplogoinverted-hexagonGroup'%3e%3cpath%20id='fdplockuplogoinverted-polygon'%20stroke='none'%20fill='rgb(73,%20160,%20152)'%20d='M%2058.9,-0%20L%2085.5,-0%2098.8,23.53%2085.5,47.06%2058.9,47.06%2045.6,23.53%2058.9,-0%20Z%20M%2058.9,-0'%20/%3e%3cg%20id='fdplockuplogoinverted-hexagon'%3e%3cpath%20id='fdplockuplogoinverted-clip'%20stroke='none'%20fill='url(%23fdplockuplogoinverted-gradient2-clip)'%20d='M%2058.93,-0%20L%2045.64,24%2098.8,24%2085.51,-0%2058.93,-0%20Z%20M%2058.93,-0'%20/%3e%3c/g%3e%3c/g%3e%3cg%20id='fdplockuplogoinverted-circleGroup'%3e%3cg%20id='fdplockuplogoinverted-group'%3e%3ccircle%20id='fdplockuplogoinverted-oval'%20stroke='none'%20fill='rgb(214,%20203,%20226)'%20cx='121.75'%20cy='23.3'%20r='23.3'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier4'%20stroke='none'%20fill='url(%23fdplockuplogoinverted-gradient4-bezier4)'%20d='M%20121.75,23.3%20L%2098.45,23.3%20C%2098.45,36.17%20108.88,46.61%20121.75,46.61%20L%20121.75,46.61%20C%20134.62,46.61%20145.05,36.17%20145.05,23.3%20L%20145.05,23.3%20121.75,23.3%20Z%20M%20121.75,23.3'%20/%3e%3c/g%3e%3c/g%3e%3cpath%20id='fdplockuplogoinverted-bezier5'%20stroke='rgb(217,%20216,%20216)'%20stroke-width='1'%20stroke-miterlimit='2.49'%20fill='none'%20d='M%2022.3,23.48%20L%20122.54,23.48'%20/%3e%3c/g%3e%3c/svg%3e";var so=(t=>(t.NHS="nhs",t.FDP="fdp",t))(so||{}),ao=(t=>(t.Full="full",t.Graphic="graphic",t.Inverse="inverse",t.TwoLine="twoLine",t.TwoLineInverse="twoLineInverse",t.Compact="compact",t.CompactInverted="compactInverted",t))(ao||{});const Qf={nhs:{},fdp:{full:{brand:"fdp",variant:"full",src:kv,ariaLabel:"FDP"},graphic:{brand:"fdp",variant:"graphic",src:jv,ariaLabel:"FDP"},inverse:{brand:"fdp",variant:"inverse",src:Mv,ariaLabel:"FDP"},twoLine:{brand:"fdp",variant:"twoLine",src:Cv,ariaLabel:"FDP"},twoLineInverse:{brand:"fdp",variant:"twoLineInverse",src:Nv,ariaLabel:"FDP"},compact:{brand:"fdp",variant:"compact",src:Tv,ariaLabel:"FDP"},compactInverted:{brand:"fdp",variant:"compactInverted",src:Dv,ariaLabel:"FDP"}}};function hc(t,e="full"){return Qf[t]?.[e]}function Iv(t,{variant:e,isClient:n,menuOpen:r=!1,showMoreButton:i=!1,visibleItems:s,dropdownVisible:o,toggleMenu:l,navContainerRef:c,navListRef:u,searchNode:d,brand:f}){const{className:p,logo:h={},service:g={},serviceName:m,organisation:y,search:w,account:M,navigation:j,containerClasses:v,variant:b="default",attributes:_={},fullWidth:N=!1,maxVisibleItems:C,responsiveNavigation:x=!0,logoVariant:k=ao.Full,logoVariant:F,...D}=t,P={...g,text:g?.text??m};"maxVisibleItems"in D&&delete D.maxVisibleItems;const I=P.href&&!h.href||P.href&&P.href===h.href,L=I?P.href:h.href,z=f??(typeof document>"u"?"nhs":document.documentElement.getAttribute("data-brand")==="fdp"?"fdp":"nhs"),G=Ee("nhsuk-header",{"nhsuk-header--organisation":b==="organisation"||y,"nhsuk-header--white":b==="white"},p),ee=Ee("nhsuk-header__container",{"nhsuk-header__container--full-width":N&&z==="nhs"},v),T=Ee("nhsuk-header__navigation",{"nhsuk-header__navigation--white":j?.white,"nhsuk-header__navigation--justified":j?.justified},j?.className),K=()=>a.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":h.ariaLabel||"NHS",children:[a.jsx("title",{children:h.ariaLabel||"NHS"}),a.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),O=()=>{if(h.src)return a.jsx("img",{className:"nhsuk-header__organisation-logo",src:h.src,width:"280",alt:h.ariaLabel||(z==="fdp"?"FDP":"NHS")});if(z==="fdp"){const H=hc(so.FDP,k);if(H?.src)return a.jsx("img",{className:"nhsuk-header__organisation-logo",src:H.src,"data-logo-variant":k,width:"280",alt:H.ariaLabel||"FDP"})}return K()},B=()=>y?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"nhsuk-header__organisation-name",children:[y.name,y.split&&a.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",y.split]})]}),y.descriptor&&a.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:y.descriptor})]}):null,J=(H,q)=>H?q?a.jsx("a",{className:"nhsuk-header__service-name",href:q,children:H}):a.jsx("span",{className:"nhsuk-header__service-name",children:H}):null,$=H=>H.active||H.current?a.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:H.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:H.html}}):H.text}):H.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:H.html}}):H.text,R=()=>a.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:a.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})});return j?.items,a.jsxs("header",{className:G,role:"banner","data-module":"nhsuk-header",..._,...D,children:[a.jsxs("div",{className:ee,children:[a.jsxs("div",{className:"nhsuk-header__service",children:[L?a.jsxs("a",{className:"nhsuk-header__service-logo",href:L,children:[O(),B(),I&&J(P.text)]}):a.jsxs(a.Fragment,{children:[O(),B(),I&&J(P.text)]}),P.text&&!I&&J(P.text,P.href)]}),d??null,a.jsx(sc,{...M,variant:b==="white"?"white":"default"})]}),j&&j.items&&j.items.length>0&&a.jsx("nav",{className:T,"aria-label":j.ariaLabel||"Menu",children:a.jsx("div",{className:Ee("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--initializing":n&&e==="client","nhsuk-header__navigation-container--ssr":!n},v),ref:c,children:a.jsxs("ul",{className:"nhsuk-header__navigation-list",ref:u,children:[(j?.items||[]).map((H,q)=>a.jsx("li",{className:Ee("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":H.active||H.current,"nhsuk-header__navigation-item--hidden":i&&s!==void 0&&q>=(s??0)},H.className),...H.attributes||{},children:a.jsx("a",{className:"nhsuk-header__navigation-link",href:H.href,...H.active||H.current?{"aria-current":H.current?"page":"true"}:{},children:$(H)})},q)),i&&s!==void 0&&a.jsx("li",{className:"nhsuk-header__navigation-item nhsuk-header__navigation-item--more",children:a.jsxs("button",{className:"nhsuk-header__navigation-button",id:"toggle-more-menu",type:"button","aria-haspopup":"true","aria-expanded":r?"true":"false","aria-controls":"nhsuk-header-more-menu",onClick:l,children:[a.jsx("span",{children:"More"}),R()]})})]})})}),n&&j&&j.items&&j.items.length>0&&r&&o&&a.jsx("div",{className:"nhsuk-header__dropdown-menu",hidden:!o,id:"nhsuk-header-more-menu",children:a.jsx("ul",{className:"nhsuk-header__dropdown-list",children:j.items.slice(s??0).map((H,q)=>a.jsx("li",{className:Ee("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":H.active||H.current}),children:a.jsx("a",{className:"nhsuk-header__dropdown-link",href:H.href,...H.active||H.current?{"aria-current":H.current?"page":"true"}:{},onClick:()=>{l?.()},children:$(H)})},`overflow-${(s??0)+q}`))})}),e==="server"]})}const pc=A.createContext(void 0);function Lv({brand:t="nhs",scope:e="document",children:n}){const[r,i]=A.useState(t);A.useEffect(()=>{i(t)},[t]),A.useEffect(()=>{if(e==="document")return document.documentElement.setAttribute("data-brand",r),()=>{}},[r,e]);const s=A.useMemo(()=>({brand:r,setBrand:i}),[r]);return e==="local"?a.jsx(pc.Provider,{value:s,children:a.jsx("div",{"data-brand":r,children:n})}):a.jsx(pc.Provider,{value:s,children:n})}function eh(){const t=A.useContext(pc);if(!t)throw new Error("useBrand must be used within BrandThemeProvider");return t}const th=({mode:t="form",action:e="/search",method:n="get",name:r="q",value:i,placeholder:s="Search",visuallyHiddenLabel:o="Search the NHS website",visuallyHiddenButton:l="Search",className:c,disabled:u=!1,callbacks:d={},isLoading:f=!1,showResults:p=!1,results:h=[],formAttributes:g={},inputAttributes:m={},buttonAttributes:y={},preventDefaultSubmit:w=!1,debounceMs:M=300,minQueryLength:j=1})=>{const[v,b]=A.useState(""),[_,N]=A.useState(!1),C=A.useRef(void 0),x=A.useRef(null),k=A.useRef(null),F=t==="controlled"&&i!==void 0,D=F?i:v,P=A.useCallback(B=>{C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{d.onChange&&B.length>=j&&d.onChange(B)},M)},[d.onChange,M,j]),I=A.useCallback(B=>{const J=B.target.value;F||b(J),t!=="form"&&P(J)},[F,t,P]),L=A.useCallback(B=>{const J=D.trim(),$={query:J,timestamp:Date.now(),formData:new FormData(B.currentTarget)};t==="controlled"||t==="hybrid"&&w?(B.preventDefault(),d.onSearch&&J.length>=j&&d.onSearch($)):t==="hybrid"&&d.onSearch&&J.length>=j&&d.onSearch($)},[t,D,d.onSearch,w,j]),E=A.useCallback(()=>{N(!0),d.onFocus?.()},[d.onFocus]),z=A.useCallback(()=>{N(!1),d.onBlur?.()},[d.onBlur]),G=A.useCallback(()=>{F||b(""),d.onClear?.(),k.current?.focus()},[F,d.onClear]);A.useEffect(()=>()=>{C.current&&clearTimeout(C.current)},[]);const ee=()=>a.jsx("svg",{className:Ee("nhsuk-icon nhsuk-icon__search",{"nhsuk-icon__search--loading":f}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:a.jsx("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"})}),T=()=>a.jsx("svg",{className:"nhsuk-icon nhsuk-icon__spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:a.jsxs("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[a.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"}),a.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416",repeatCount:"indefinite"})]})}),K=()=>!D||t==="form"?null:a.jsx("button",{type:"button",className:"nhsuk-header__search-clear",onClick:G,"aria-label":"Clear search",children:a.jsx("svg",{className:"nhsuk-icon nhsuk-icon__close",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:a.jsx("path",{d:"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z"})})}),O=()=>!p||!h.length||!_?null:a.jsx("div",{className:"nhsuk-header__search-results",role:"listbox",children:h.map(B=>a.jsx("div",{className:"nhsuk-header__search-result",role:"option",children:B.href?a.jsxs("a",{href:B.href,className:"nhsuk-header__search-result-link",children:[a.jsx("span",{className:"nhsuk-header__search-result-title",children:B.title}),B.description&&a.jsx("span",{className:"nhsuk-header__search-result-description",children:B.description})]}):a.jsxs("button",{type:"button",className:"nhsuk-header__search-result-button",onClick:()=>d.onSearch?.({query:B.title,timestamp:Date.now()}),children:[a.jsx("span",{className:"nhsuk-header__search-result-title",children:B.title}),B.description&&a.jsx("span",{className:"nhsuk-header__search-result-description",children:B.description})]})},B.id))});return a.jsxs("div",{className:Ee("nhsuk-header__search",c,{"nhsuk-header__search--controlled":t==="controlled","nhsuk-header__search--hybrid":t==="hybrid","nhsuk-header__search--loading":f,"nhsuk-header__search--focused":_,"nhsuk-header__search--has-results":p&&h.length>0}),children:[a.jsxs("form",{ref:x,className:"nhsuk-header__search-form",id:"search",action:t!=="controlled"?e:void 0,method:t!=="controlled"?n:void 0,role:"search",onSubmit:L,...g,children:[a.jsx("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field",children:o}),a.jsxs("div",{className:"nhsuk-header__search-input-wrapper",children:[a.jsx("input",{ref:k,className:"nhsuk-header__search-input nhsuk-input",id:"search-field",name:t!=="controlled"?r:void 0,type:"search",placeholder:s,autoComplete:"off",value:D,onChange:I,onFocus:E,onBlur:z,disabled:u||f,...p&&h.length>0?{"aria-expanded":!0,"aria-haspopup":"listbox"}:{},...m}),K()]}),a.jsxs("button",{className:"nhsuk-header__search-submit",type:"submit",disabled:u||f||t!=="form"&&D.length<j,...y,children:[f?T():ee(),a.jsx("span",{className:"nhsuk-u-visually-hidden",children:f?"Searching...":l})]})]}),O()]})},oo=({className:t,logo:e={},service:n={},organisation:r,search:i,account:s,navigation:o,containerClasses:l,variant:c="default",attributes:u={},...d})=>{const[f,p]=A.useState(!1),[h,g]=A.useState(!1),[m,y]=A.useState(o?.items?.length||0),[w,M]=A.useState(!1),[j,v]=A.useState(!1),b=A.useRef(null),_=A.useRef(null),N=A.useRef(!1);A.useEffect(()=>{typeof window>"u"||v(!0)},[]),A.useEffect(()=>{if(typeof document>"u")return;const D=P=>{P.key==="Escape"&&f&&p(!1)};if(f)return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[f]);const C=A.useRef(null),x=A.useCallback(()=>{if(!j||!o?.items||o.items.length===0||N.current)return;const D=b.current,P=_.current;if(!D||!P)return;N.current=!0,D.classList.add("nhsuk-header__navigation-container--measuring");const I=D.clientWidth,L=Array.from(P.children);if(!L.length){D.classList.remove("nhsuk-header__navigation-container--measuring"),N.current=!1;return}if(C.current==null){const $=document.createElement("button");$.type="button",$.className="nhsuk-header__navigation-button nhsuk-header__navigation-button--prototype",$.style.position="absolute",$.style.visibility="hidden",$.style.pointerEvents="none",$.innerHTML="<span>More</span>",D.appendChild($),C.current=$.getBoundingClientRect().width||104,D.removeChild($)}const E=C.current+16;let z=0,G=0;const ee=window.getComputedStyle(D),T=parseFloat(ee.paddingLeft)||0,K=parseFloat(ee.paddingRight)||0;let O=T+K;for(const $ of L){const R=$.getBoundingClientRect().width;if(z+R+E+O>I)break;z+=R,G+=1}const B=G<o.items.length,J=B?G:o.items.length;g($=>$===B?$:B),y($=>$===J?$:J),D.classList.remove("nhsuk-header__navigation-container--measuring"),N.current=!1},[j,o?.items]);A.useEffect(()=>{if(!j)return;const D=b.current;if(!D)return;let P=null;const I=()=>{P==null&&(P=window.requestAnimationFrame(()=>{P=null,x()}))};x();const L=new ResizeObserver(()=>I());return L.observe(D),_.current&&L.observe(_.current),()=>{P!=null&&window.cancelAnimationFrame(P),L.disconnect()}},[j,x]),A.useEffect(()=>{j&&x()},[o?.items?.length,j,x]);const k=D=>{D&&(D.preventDefault(),D.stopPropagation());const P=!f;p(P),M(P)},F=(()=>{try{return eh()}catch{return}})();return Iv({className:t,logo:e,service:n,organisation:r,search:i,account:s,navigation:o,containerClasses:l,variant:c,attributes:u,...d},{variant:"client",isClient:j,menuOpen:f,showMoreButton:h,visibleItems:m,dropdownVisible:w,toggleMenu:k,navContainerRef:b,navListRef:_,searchNode:i?a.jsx(th,{...i}):null,brand:F?.brand})};function Av(t,{isClient:e,brand:n}){const{className:r,logo:i={},service:s={},serviceName:o,organisation:l,account:c,navigation:u,containerClasses:d,variant:f="default",attributes:p={},maxVisibleItems:h,responsiveNavigation:g=!0,logoVariant:m=ao.Full,...y}=t;"maxVisibleItems"in y&&delete y.maxVisibleItems;const w={...s,text:s?.text??o},M=w.href&&!i.href||w.href&&w.href===i.href,j=M?w.href:i.href,v=Ee("nhsuk-header",{"nhsuk-header--organisation":f==="organisation"||l,"nhsuk-header--white":f==="white"},r),b=Ee("nhsuk-header__container",d),_=Ee("nhsuk-header__navigation",{"nhsuk-header__navigation--white":u?.white,"nhsuk-header__navigation--justified":u?.justified},u?.className),N=n==="fdp"?"fdp":"nhs",C=()=>a.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":i.ariaLabel||"NHS",children:[a.jsx("title",{children:i.ariaLabel||"NHS"}),a.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),x=()=>{if(i.src)return a.jsx("img",{className:"nhsuk-header__organisation-logo",src:i.src,width:"280",alt:i.ariaLabel||(N==="fdp"?"FDP":"NHS")});if(N==="fdp"){const I=hc(so.FDP,m);if(I?.src)return a.jsx("img",{className:"nhsuk-header__organisation-logo",src:I.src,"data-logo-variant":m,width:"280",alt:I.ariaLabel||"FDP"})}return C()},k=()=>l?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"nhsuk-header__organisation-name",children:[l.name,l.split&&a.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",l.split]})]}),l.descriptor&&a.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:l.descriptor})]}):null,F=(I,L)=>I?L?a.jsx("a",{className:"nhsuk-header__service-name",href:L,children:I}):a.jsx("span",{className:"nhsuk-header__service-name",children:I}):null,D=I=>I.active||I.current?a.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:I.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:I.html}}):I.text}):I.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:I.html}}):I.text;return a.jsx(a.Fragment,{children:a.jsxs("header",{className:v,role:"banner","data-module":"nhsuk-header",...p,...y,children:[a.jsxs("div",{className:b,children:[a.jsxs("div",{className:"nhsuk-header__service",children:[j?a.jsxs("a",{className:"nhsuk-header__service-logo",href:j,children:[x(),k(),M&&F(w.text)]}):a.jsxs(a.Fragment,{children:[x(),k(),M&&F(w.text)]}),w.text&&!M&&F(w.text,w.href)]}),a.jsx(sc,{...c,variant:f==="white"?"white":"default"})]}),u&&u.items&&u.items.length>0&&a.jsx("nav",{className:_,"aria-label":u.ariaLabel||"Menu","data-ssr-hydrating":"true",children:a.jsx("div",{className:Ee("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--ssr":!e},d),children:a.jsx("ul",{className:"nhsuk-header__navigation-list",children:u.items.map((I,L)=>a.jsx("li",{className:Ee("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":I.active||I.current},I.className),...I.attributes||{},children:a.jsx("a",{className:"nhsuk-header__navigation-link",href:I.href,...I.active||I.current?{"aria-current":I.current?"page":"true"}:{},children:D(I)})},L))})})}),!1]})})}const Ev=t=>{const e=t.attributes?.["data-brand"];return Av(t,{isClient:!1,brand:e==="fdp"||e==="nhs"?e:void 0})},nh=({heading:t,headingLevel:e=1,headingClasses:n="",text:r,html:i,imageURL:s,containerClasses:o="",classes:l="",children:c,...u})=>{const d=["nhsuk-hero",s&&t?"nhsuk-hero--image nhsuk-hero--image-description":"",s&&!t?"nhsuk-hero--image":"",l].filter(Boolean).join(" "),f=["nhsuk-width-container",o,s?"":"nhsuk-hero--border"].filter(Boolean).join(" "),p=["nhsuk-hero__heading",n,!c&&!r&&!i?"nhsuk-u-margin-bottom-0":""].filter(Boolean).join(" "),h=c||t||r||i,g=()=>{if(!t)return null;const m={className:p};switch(e){case 1:return a.jsx("h1",{...m,children:t});case 2:return a.jsx("h2",{...m,children:t});case 3:return a.jsx("h3",{...m,children:t});case 4:return a.jsx("h4",{...m,children:t});case 5:return a.jsx("h5",{...m,children:t});case 6:return a.jsx("h6",{...m,children:t});default:return a.jsx("h1",{...m,children:t})}};return a.jsxs("section",{className:d,style:s?{backgroundImage:`url('${s}')`}:void 0,role:"banner",...u,children:[s&&a.jsx("div",{className:"nhsuk-hero__overlay",children:h&&a.jsx("div",{className:f,children:a.jsx("div",{className:"nhsuk-grid-row",children:a.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:a.jsxs("div",{className:"nhsuk-hero-content",children:[g(),c||(i?a.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):r?a.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null),a.jsx("span",{className:"nhsuk-hero__arrow","aria-hidden":"true"})]})})})})}),!s&&h&&a.jsx("div",{className:f,children:a.jsx("div",{className:"nhsuk-grid-row",children:a.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:a.jsxs("div",{className:"nhsuk-hero__wrapper",children:[g(),c||(i?a.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):r?a.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null)]})})})})]})};nh.displayName="Hero";const mc=({className:t,links:e=[],linksColumn2:n,linksColumn3:r,metaLinks:i,copyright:s="Â© NHS England",containerClasses:o,attributes:l={},style:c,footerStyle:u,containerStyle:d})=>{const f=(h,g=!1)=>a.jsx("li",{className:Ee("nhsuk-footer__list-item",{"nhsuk-footer-default__list-item":g}),children:a.jsx("a",{className:"nhsuk-footer__list-item-link",href:h.URL,target:h.newWindow?"_blank":void 0,rel:h.newWindow?"noopener noreferrer":void 0,children:h.label})},`${h.URL}-${h.label}`),p=!!(n||r);return a.jsx("footer",{role:"contentinfo",...l,style:{...l?.style,...c},children:a.jsxs("div",{className:"nhsuk-footer-container",children:[a.jsxs("div",{className:Ee("nhsuk-width-container",o),style:d,children:[a.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Support links"}),a.jsx("div",{className:Ee("nhsuk-footer",t),style:u,children:p?a.jsxs(a.Fragment,{children:[e.length>0&&a.jsx("ul",{className:"nhsuk-footer__list",children:e.map(h=>f(h))}),n&&n.length>0&&a.jsx("ul",{className:"nhsuk-footer__list",children:n.map(h=>f(h))}),r&&r.length>0&&a.jsx("ul",{className:"nhsuk-footer__list",children:r.map(h=>f(h))}),i&&i.length>0&&a.jsx("ul",{className:"nhsuk-footer__list nhsuk-footer__meta",children:i.map(h=>f(h))})]}):a.jsxs("ul",{className:"nhsuk-footer__list",children:[e.map(h=>f(h,!0)),(n||[]).map(h=>f(h,!0)),(r||[]).map(h=>f(h,!0)),(i||[]).map(h=>f(h,!0))]})}),!p&&a.jsx("div",{children:a.jsx("p",{className:"nhsuk-footer__copyright",children:s})})]}),p&&a.jsx("div",{className:"nhsuk-width-container",children:a.jsx("div",{children:a.jsx("p",{className:"nhsuk-footer__copyright",children:s})})})]})})};function lo(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Pv(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gc(t){let e,n,r;t.length!==2?(e=lo,n=(l,c)=>lo(t(l),c),r=(l,c)=>t(l)-c):(e=t===lo||t===Pv?t:Fv,n=t,r=t);function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=i(l,c,u,d-1);return f>u&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:i,center:o,right:s}}function Fv(){return 0}function $v(t){return t===null?NaN:+t}const Bv=gc(lo).right;gc($v).center;function rh(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class ih extends Map{constructor(e,n=Hv){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(sh(this,e))}has(e){return super.has(sh(this,e))}set(e,n){return super.set(zv(this,e),n)}delete(e){return super.delete(Ov(this,e))}}function sh({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function zv({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Ov({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Hv(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Rv=Math.sqrt(50),Uv=Math.sqrt(10),Wv=Math.sqrt(2);function co(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Rv?10:s>=Uv?5:s>=Wv?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?co(t,e,n*2):[l,c,u]}function Gv(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?co(e,t,n):co(t,e,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function yc(t,e,n){return e=+e,t=+t,n=+n,co(t,e,n)[2]}function bc(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?yc(e,t,n):yc(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Yv(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function uo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const ah=Symbol("implicit");function oh(){var t=new ih,e=[],n=[],r=ah;function i(s){let o=t.get(s);if(o===void 0){if(r!==ah)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new ih;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return oh(e,n).unknown(r)},uo.apply(i,arguments),i}function lh(){var t=oh().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var p=e().length,h=i<r,g=h?i:r,m=h?r:i;s=(m-g)/Math.max(1,p-c+u*2),l&&(s=Math.floor(s)),g+=(m-g-s*(p-c))*d,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var y=Yv(p).map(function(w){return g+s*w});return n(h?y.reverse():y)}return t.domain=function(p){return arguments.length?(e(p),f()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(p){return arguments.length?(l=!!p,f()):l},t.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),f()):c},t.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},t.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},t.copy=function(){return lh(e(),[r,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},uo.apply(f(),arguments)}function xc(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ch(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ss(){}var ks=.7,fo=1/ks,Pi="\\s*([+-]?\\d+)\\s*",Cs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vv=/^#([0-9a-f]{3,8})$/,Zv=new RegExp(`^rgb\\(${Pi},${Pi},${Pi}\\)$`),qv=new RegExp(`^rgb\\(${Vn},${Vn},${Vn}\\)$`),Xv=new RegExp(`^rgba\\(${Pi},${Pi},${Pi},${Cs}\\)$`),Jv=new RegExp(`^rgba\\(${Vn},${Vn},${Vn},${Cs}\\)$`),Kv=new RegExp(`^hsl\\(${Cs},${Vn},${Vn}\\)$`),Qv=new RegExp(`^hsla\\(${Cs},${Vn},${Vn},${Cs}\\)$`),uh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xc(Ss,Ns,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:dh,formatHex:dh,formatHex8:e_,formatHsl:t_,formatRgb:fh,toString:fh});function dh(){return this.rgb().formatHex()}function e_(){return this.rgb().formatHex8()}function t_(){return yh(this).formatHsl()}function fh(){return this.rgb().formatRgb()}function Ns(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Vv.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?hh(e):n===3?new fn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ho(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ho(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Zv.exec(t))?new fn(e[1],e[2],e[3],1):(e=qv.exec(t))?new fn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Xv.exec(t))?ho(e[1],e[2],e[3],e[4]):(e=Jv.exec(t))?ho(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Kv.exec(t))?gh(e[1],e[2]/100,e[3]/100,1):(e=Qv.exec(t))?gh(e[1],e[2]/100,e[3]/100,e[4]):uh.hasOwnProperty(t)?hh(uh[t]):t==="transparent"?new fn(NaN,NaN,NaN,0):null}function hh(t){return new fn(t>>16&255,t>>8&255,t&255,1)}function ho(t,e,n,r){return r<=0&&(t=e=n=NaN),new fn(t,e,n,r)}function n_(t){return t instanceof Ss||(t=Ns(t)),t?(t=t.rgb(),new fn(t.r,t.g,t.b,t.opacity)):new fn}function vc(t,e,n,r){return arguments.length===1?n_(t):new fn(t,e,n,r??1)}function fn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}xc(fn,vc,ch(Ss,{brighter(t){return t=t==null?fo:Math.pow(fo,t),new fn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ks:Math.pow(ks,t),new fn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new fn(ti(this.r),ti(this.g),ti(this.b),po(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ph,formatHex:ph,formatHex8:r_,formatRgb:mh,toString:mh}));function ph(){return`#${ni(this.r)}${ni(this.g)}${ni(this.b)}`}function r_(){return`#${ni(this.r)}${ni(this.g)}${ni(this.b)}${ni((isNaN(this.opacity)?1:this.opacity)*255)}`}function mh(){const t=po(this.opacity);return`${t===1?"rgb(":"rgba("}${ti(this.r)}, ${ti(this.g)}, ${ti(this.b)}${t===1?")":`, ${t})`}`}function po(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ti(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ni(t){return t=ti(t),(t<16?"0":"")+t.toString(16)}function gh(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Wn(t,e,n,r)}function yh(t){if(t instanceof Wn)return new Wn(t.h,t.s,t.l,t.opacity);if(t instanceof Ss||(t=Ns(t)),!t)return new Wn;if(t instanceof Wn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new Wn(o,l,c,t.opacity)}function i_(t,e,n,r){return arguments.length===1?yh(t):new Wn(t,e,n,r??1)}function Wn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}xc(Wn,i_,ch(Ss,{brighter(t){return t=t==null?fo:Math.pow(fo,t),new Wn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ks:Math.pow(ks,t),new Wn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new fn(_c(t>=240?t-240:t+120,i,r),_c(t,i,r),_c(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Wn(bh(this.h),mo(this.s),mo(this.l),po(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=po(this.opacity);return`${t===1?"hsl(":"hsla("}${bh(this.h)}, ${mo(this.s)*100}%, ${mo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function bh(t){return t=(t||0)%360,t<0?t+360:t}function mo(t){return Math.max(0,Math.min(1,t||0))}function _c(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const wc=t=>()=>t;function s_(t,e){return function(n){return t+n*e}}function a_(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function o_(t){return(t=+t)==1?xh:function(e,n){return n-e?a_(e,n,t):wc(isNaN(e)?n:e)}}function xh(t,e){var n=e-t;return n?s_(t,n):wc(isNaN(t)?e:t)}const vh=(function t(e){var n=o_(e);function r(i,s){var o=n((i=vc(i)).r,(s=vc(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),u=xh(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r})(1);function l_(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function c_(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function u_(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Cc(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function d_(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function go(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function f_(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Cc(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Sc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kc=new RegExp(Sc.source,"g");function h_(t){return function(){return t}}function p_(t){return function(e){return t(e)+""}}function m_(t,e){var n=Sc.lastIndex=kc.lastIndex=0,r,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(r=Sc.exec(t))&&(i=kc.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:go(r,i)})),n=kc.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?p_(c[0].x):h_(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Cc(t,e){var n=typeof e,r;return e==null||n==="boolean"?wc(e):(n==="number"?go:n==="string"?(r=Ns(e))?(e=r,vh):m_:e instanceof Ns?vh:e instanceof Date?d_:c_(e)?l_:Array.isArray(e)?u_:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?f_:go)(t,e)}function g_(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function y_(t){return function(){return t}}function b_(t){return+t}var _h=[0,1];function Fi(t){return t}function Nc(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:y_(isNaN(e)?NaN:.5)}function x_(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function v_(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=Nc(i,r),s=n(o,s)):(r=Nc(r,i),s=n(s,o)),function(l){return s(r(l))}}function __(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Nc(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(l){var c=Bv(t,l,1,r)-1;return s[c](i[c](l))}}function wh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function w_(){var t=_h,e=_h,n=Cc,r,i,s,o=Fi,l,c,u;function d(){var p=Math.min(t.length,e.length);return o!==Fi&&(o=x_(t[0],t[p-1])),l=p>2?__:v_,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?s:(c||(c=l(t.map(r),e,n)))(r(o(p)))}return f.invert=function(p){return o(i((u||(u=l(e,t.map(r),go)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,b_),d()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),n=g_,d()},f.clamp=function(p){return arguments.length?(o=p?!0:Fi,d()):o!==Fi},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(s=p,f):s},function(p,h){return r=p,i=h,d()}}function Sh(){return w_()(Fi,Fi)}function S_(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function yo(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function $i(t){return t=yo(Math.abs(t)),t?t[1]:NaN}function k_(t,e){return function(n,r){for(var i=n.length,s=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function C_(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var N_=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bo(t){if(!(e=N_.exec(t)))throw new Error("invalid format: "+t);var e;return new Mc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}bo.prototype=Mc.prototype;function Mc(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Mc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function M_(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var kh;function j_(t,e){var n=yo(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(kh=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+yo(t,Math.max(0,e+s-1))[0]}function Ch(t,e){var n=yo(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Nh={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:S_,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ch(t*100,e),r:Ch,s:j_,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Mh(t){return t}var jh=Array.prototype.map,Th=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function T_(t){var e=t.grouping===void 0||t.thousands===void 0?Mh:k_(jh.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Mh:C_(jh.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"âˆ’":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=bo(f);var p=f.fill,h=f.align,g=f.sign,m=f.symbol,y=f.zero,w=f.width,M=f.comma,j=f.precision,v=f.trim,b=f.type;b==="n"?(M=!0,b="g"):Nh[b]||(j===void 0&&(j=12),v=!0,b="g"),(y||p==="0"&&h==="=")&&(y=!0,p="0",h="=");var _=m==="$"?n:m==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",N=m==="$"?r:/[%p]/.test(b)?o:"",C=Nh[b],x=/[defgprs%]/.test(b);j=j===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function k(F){var D=_,P=N,I,L,E;if(b==="c")P=C(F)+P,F="";else{F=+F;var z=F<0||1/F<0;if(F=isNaN(F)?c:C(Math.abs(F),j),v&&(F=M_(F)),z&&+F==0&&g!=="+"&&(z=!1),D=(z?g==="("?g:l:g==="-"||g==="("?"":g)+D,P=(b==="s"?Th[8+kh/3]:"")+P+(z&&g==="("?")":""),x){for(I=-1,L=F.length;++I<L;)if(E=F.charCodeAt(I),48>E||E>57){P=(E===46?i+F.slice(I+1):F.slice(I))+P,F=F.slice(0,I);break}}}M&&!y&&(F=e(F,1/0));var G=D.length+F.length+P.length,ee=G<w?new Array(w-G+1).join(p):"";switch(M&&y&&(F=e(ee+F,ee.length?w-P.length:1/0),ee=""),h){case"<":F=D+F+P+ee;break;case"=":F=D+ee+F+P;break;case"^":F=ee.slice(0,G=ee.length>>1)+D+F+P+ee.slice(G);break;default:F=ee+D+F+P;break}return s(F)}return k.toString=function(){return f+""},k}function d(f,p){var h=u((f=bo(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor($i(p)/3)))*3,m=Math.pow(10,-g),y=Th[8+g/3];return function(w){return h(m*w)+y}}return{format:u,formatPrefix:d}}var xo,Dh,Ih;D_({thousands:",",grouping:[3],currency:["$",""]});function D_(t){return xo=T_(t),Dh=xo.format,Ih=xo.formatPrefix,xo}function I_(t){return Math.max(0,-$i(Math.abs(t)))}function L_(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($i(e)/3)))*3-$i(Math.abs(t)))}function A_(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,$i(e)-$i(t))+1}function E_(t,e,n,r){var i=bc(t,e,n),s;switch(r=bo(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=L_(i,o))&&(r.precision=s),Ih(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=A_(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=I_(i))&&(r.precision=s-(r.type==="%")*2);break}}return Dh(r)}function P_(t){var e=t.domain;return t.ticks=function(n){var r=e();return Gv(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return E_(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],l=r[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=i,i=s,s=u);d-- >0;){if(u=yc(o,l,n),u===c)return r[i]=o,r[s]=l,e(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function vo(){var t=Sh();return t.copy=function(){return wh(t,vo())},uo.apply(t,arguments),P_(t)}function F_(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}const jc=new Date,Tc=new Date;function zt(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},i.filter=s=>zt(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(jc.setTime(+s),Tc.setTime(+o),t(jc),t(Tc),Math.floor(n(jc,Tc))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const _o=zt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);_o.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?zt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):_o),_o.range;const yr=1e3,Pn=yr*60,br=Pn*60,xr=br*24,Dc=xr*7,Lh=xr*30,Ic=xr*365,Bi=zt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*yr)},(t,e)=>(e-t)/yr,t=>t.getUTCSeconds());Bi.range;const Lc=zt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*yr)},(t,e)=>{t.setTime(+t+e*Pn)},(t,e)=>(e-t)/Pn,t=>t.getMinutes());Lc.range,zt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Pn)},(t,e)=>(e-t)/Pn,t=>t.getUTCMinutes()).range;const Ac=zt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*yr-t.getMinutes()*Pn)},(t,e)=>{t.setTime(+t+e*br)},(t,e)=>(e-t)/br,t=>t.getHours());Ac.range,zt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*br)},(t,e)=>(e-t)/br,t=>t.getUTCHours()).range;const Ms=zt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Pn)/xr,t=>t.getDate()-1);Ms.range;const Ec=zt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xr,t=>t.getUTCDate()-1);Ec.range,zt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xr,t=>Math.floor(t/xr)).range;function ri(t){return zt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Pn)/Dc)}const wo=ri(0),So=ri(1),$_=ri(2),B_=ri(3),zi=ri(4),z_=ri(5),O_=ri(6);wo.range,So.range,$_.range,B_.range,zi.range,z_.range,O_.range;function ii(t){return zt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Dc)}const Ah=ii(0),ko=ii(1),H_=ii(2),R_=ii(3),Oi=ii(4),U_=ii(5),W_=ii(6);Ah.range,ko.range,H_.range,R_.range,Oi.range,U_.range,W_.range;const js=zt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());js.range,zt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()).range;const vr=zt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());vr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:zt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}),vr.range;const si=zt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());si.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:zt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}),si.range;function G_(t,e,n,r,i,s){const o=[[Bi,1,yr],[Bi,5,5*yr],[Bi,15,15*yr],[Bi,30,30*yr],[s,1,Pn],[s,5,5*Pn],[s,15,15*Pn],[s,30,30*Pn],[i,1,br],[i,3,3*br],[i,6,6*br],[i,12,12*br],[r,1,xr],[r,2,2*xr],[n,1,Dc],[e,1,Lh],[e,3,3*Lh],[t,1,Ic]];function l(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),g=h?h.range(u,+d+1):[];return p?g.reverse():g}function c(u,d,f){const p=Math.abs(d-u)/f,h=gc(([,,y])=>y).right(o,p);if(h===o.length)return t.every(bc(u/Ic,d/Ic,f));if(h===0)return _o.every(Math.max(bc(u,d,f),1));const[g,m]=o[p/o[h-1][2]<o[h][2]/p?h-1:h];return g.every(m)}return[l,c]}const[Y_,V_]=G_(vr,js,wo,Ms,Ac,Lc);function Pc(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Fc(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ts(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Z_(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Ds(i),d=Is(i),f=Ds(s),p=Is(s),h=Ds(o),g=Is(o),m=Ds(l),y=Is(l),w=Ds(c),M=Is(c),j={a:z,A:G,b:ee,B:T,c:null,d:zh,e:zh,f:y2,g:M2,G:T2,H:p2,I:m2,j:g2,L:Oh,m:b2,M:x2,p:K,q:O,Q:Yh,s:Vh,S:v2,u:_2,U:w2,V:S2,w:k2,W:C2,x:null,X:null,y:N2,Y:j2,Z:D2,"%":Gh},v={a:B,A:J,b:$,B:R,c:null,d:Rh,e:Rh,f:E2,g:W2,G:Y2,H:I2,I:L2,j:A2,L:Uh,m:P2,M:F2,p:H,q,Q:Yh,s:Vh,S:$2,u:B2,U:z2,V:O2,w:H2,W:R2,x:null,X:null,y:U2,Y:G2,Z:V2,"%":Gh},b={a:k,A:F,b:D,B:P,c:I,d:$h,e:$h,f:u2,g:Fh,G:Ph,H:Bh,I:Bh,j:a2,L:c2,m:s2,M:o2,p:x,q:i2,Q:f2,s:h2,S:l2,u:Q_,U:e2,V:t2,w:K_,W:n2,x:L,X:E,y:Fh,Y:Ph,Z:r2,"%":d2};j.x=_(n,j),j.X=_(r,j),j.c=_(e,j),v.x=_(n,v),v.X=_(r,v),v.c=_(e,v);function _(V,re){return function(fe){var X=[],se=-1,ue=0,_e=V.length,be,Q,Ge;for(fe instanceof Date||(fe=new Date(+fe));++se<_e;)V.charCodeAt(se)===37&&(X.push(V.slice(ue,se)),(Q=Eh[be=V.charAt(++se)])!=null?be=V.charAt(++se):Q=be==="e"?" ":"0",(Ge=re[be])&&(be=Ge(fe,Q)),X.push(be),ue=se+1);return X.push(V.slice(ue,se)),X.join("")}}function N(V,re){return function(fe){var X=Ts(1900,void 0,1),se=C(X,V,fe+="",0),ue,_e;if(se!=fe.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(re&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(ue=Fc(Ts(X.y,0,1)),_e=ue.getUTCDay(),ue=_e>4||_e===0?ko.ceil(ue):ko(ue),ue=Ec.offset(ue,(X.V-1)*7),X.y=ue.getUTCFullYear(),X.m=ue.getUTCMonth(),X.d=ue.getUTCDate()+(X.w+6)%7):(ue=Pc(Ts(X.y,0,1)),_e=ue.getDay(),ue=_e>4||_e===0?So.ceil(ue):So(ue),ue=Ms.offset(ue,(X.V-1)*7),X.y=ue.getFullYear(),X.m=ue.getMonth(),X.d=ue.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),_e="Z"in X?Fc(Ts(X.y,0,1)).getUTCDay():Pc(Ts(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(_e+5)%7:X.w+X.U*7-(_e+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,Fc(X)):Pc(X)}}function C(V,re,fe,X){for(var se=0,ue=re.length,_e=fe.length,be,Q;se<ue;){if(X>=_e)return-1;if(be=re.charCodeAt(se++),be===37){if(be=re.charAt(se++),Q=b[be in Eh?re.charAt(se++):be],!Q||(X=Q(V,fe,X))<0)return-1}else if(be!=fe.charCodeAt(X++))return-1}return X}function x(V,re,fe){var X=u.exec(re.slice(fe));return X?(V.p=d.get(X[0].toLowerCase()),fe+X[0].length):-1}function k(V,re,fe){var X=h.exec(re.slice(fe));return X?(V.w=g.get(X[0].toLowerCase()),fe+X[0].length):-1}function F(V,re,fe){var X=f.exec(re.slice(fe));return X?(V.w=p.get(X[0].toLowerCase()),fe+X[0].length):-1}function D(V,re,fe){var X=w.exec(re.slice(fe));return X?(V.m=M.get(X[0].toLowerCase()),fe+X[0].length):-1}function P(V,re,fe){var X=m.exec(re.slice(fe));return X?(V.m=y.get(X[0].toLowerCase()),fe+X[0].length):-1}function I(V,re,fe){return C(V,e,re,fe)}function L(V,re,fe){return C(V,n,re,fe)}function E(V,re,fe){return C(V,r,re,fe)}function z(V){return o[V.getDay()]}function G(V){return s[V.getDay()]}function ee(V){return c[V.getMonth()]}function T(V){return l[V.getMonth()]}function K(V){return i[+(V.getHours()>=12)]}function O(V){return 1+~~(V.getMonth()/3)}function B(V){return o[V.getUTCDay()]}function J(V){return s[V.getUTCDay()]}function $(V){return c[V.getUTCMonth()]}function R(V){return l[V.getUTCMonth()]}function H(V){return i[+(V.getUTCHours()>=12)]}function q(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var re=_(V+="",j);return re.toString=function(){return V},re},parse:function(V){var re=N(V+="",!1);return re.toString=function(){return V},re},utcFormat:function(V){var re=_(V+="",v);return re.toString=function(){return V},re},utcParse:function(V){var re=N(V+="",!0);return re.toString=function(){return V},re}}}var Eh={"-":"",_:" ",0:"0"},Ut=/^\s*\d+/,q_=/^%/,X_=/[\\^$*+?|[\]().{}]/g;function dt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function J_(t){return t.replace(X_,"\\$&")}function Ds(t){return new RegExp("^(?:"+t.map(J_).join("|")+")","i")}function Is(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function K_(t,e,n){var r=Ut.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Q_(t,e,n){var r=Ut.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function e2(t,e,n){var r=Ut.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function t2(t,e,n){var r=Ut.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function n2(t,e,n){var r=Ut.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Ph(t,e,n){var r=Ut.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Fh(t,e,n){var r=Ut.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function r2(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function i2(t,e,n){var r=Ut.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function s2(t,e,n){var r=Ut.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function $h(t,e,n){var r=Ut.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function a2(t,e,n){var r=Ut.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Bh(t,e,n){var r=Ut.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function o2(t,e,n){var r=Ut.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function l2(t,e,n){var r=Ut.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function c2(t,e,n){var r=Ut.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function u2(t,e,n){var r=Ut.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function d2(t,e,n){var r=q_.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function f2(t,e,n){var r=Ut.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function h2(t,e,n){var r=Ut.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function zh(t,e){return dt(t.getDate(),e,2)}function p2(t,e){return dt(t.getHours(),e,2)}function m2(t,e){return dt(t.getHours()%12||12,e,2)}function g2(t,e){return dt(1+Ms.count(vr(t),t),e,3)}function Oh(t,e){return dt(t.getMilliseconds(),e,3)}function y2(t,e){return Oh(t,e)+"000"}function b2(t,e){return dt(t.getMonth()+1,e,2)}function x2(t,e){return dt(t.getMinutes(),e,2)}function v2(t,e){return dt(t.getSeconds(),e,2)}function _2(t){var e=t.getDay();return e===0?7:e}function w2(t,e){return dt(wo.count(vr(t)-1,t),e,2)}function Hh(t){var e=t.getDay();return e>=4||e===0?zi(t):zi.ceil(t)}function S2(t,e){return t=Hh(t),dt(zi.count(vr(t),t)+(vr(t).getDay()===4),e,2)}function k2(t){return t.getDay()}function C2(t,e){return dt(So.count(vr(t)-1,t),e,2)}function N2(t,e){return dt(t.getFullYear()%100,e,2)}function M2(t,e){return t=Hh(t),dt(t.getFullYear()%100,e,2)}function j2(t,e){return dt(t.getFullYear()%1e4,e,4)}function T2(t,e){var n=t.getDay();return t=n>=4||n===0?zi(t):zi.ceil(t),dt(t.getFullYear()%1e4,e,4)}function D2(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+dt(e/60|0,"0",2)+dt(e%60,"0",2)}function Rh(t,e){return dt(t.getUTCDate(),e,2)}function I2(t,e){return dt(t.getUTCHours(),e,2)}function L2(t,e){return dt(t.getUTCHours()%12||12,e,2)}function A2(t,e){return dt(1+Ec.count(si(t),t),e,3)}function Uh(t,e){return dt(t.getUTCMilliseconds(),e,3)}function E2(t,e){return Uh(t,e)+"000"}function P2(t,e){return dt(t.getUTCMonth()+1,e,2)}function F2(t,e){return dt(t.getUTCMinutes(),e,2)}function $2(t,e){return dt(t.getUTCSeconds(),e,2)}function B2(t){var e=t.getUTCDay();return e===0?7:e}function z2(t,e){return dt(Ah.count(si(t)-1,t),e,2)}function Wh(t){var e=t.getUTCDay();return e>=4||e===0?Oi(t):Oi.ceil(t)}function O2(t,e){return t=Wh(t),dt(Oi.count(si(t),t)+(si(t).getUTCDay()===4),e,2)}function H2(t){return t.getUTCDay()}function R2(t,e){return dt(ko.count(si(t)-1,t),e,2)}function U2(t,e){return dt(t.getUTCFullYear()%100,e,2)}function W2(t,e){return t=Wh(t),dt(t.getUTCFullYear()%100,e,2)}function G2(t,e){return dt(t.getUTCFullYear()%1e4,e,4)}function Y2(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Oi(t):Oi.ceil(t),dt(t.getUTCFullYear()%1e4,e,4)}function V2(){return"+0000"}function Gh(){return"%"}function Yh(t){return+t}function Vh(t){return Math.floor(+t/1e3)}var Hi,Zh;Z2({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Z2(t){return Hi=Z_(t),Zh=Hi.format,Hi.parse,Hi.utcFormat,Hi.utcParse,Hi}function q2(t){return new Date(t)}function X2(t){return t instanceof Date?+t:+new Date(+t)}function qh(t,e,n,r,i,s,o,l,c,u){var d=Sh(),f=d.invert,p=d.domain,h=u(".%L"),g=u(":%S"),m=u("%I:%M"),y=u("%I %p"),w=u("%a %d"),M=u("%b %d"),j=u("%B"),v=u("%Y");function b(_){return(c(_)<_?h:l(_)<_?g:o(_)<_?m:s(_)<_?y:r(_)<_?i(_)<_?w:M:n(_)<_?j:v)(_)}return d.invert=function(_){return new Date(f(_))},d.domain=function(_){return arguments.length?p(Array.from(_,X2)):p().map(q2)},d.ticks=function(_){var N=p();return t(N[0],N[N.length-1],_??10)},d.tickFormat=function(_,N){return N==null?b:u(N)},d.nice=function(_){var N=p();return(!_||typeof _.range!="function")&&(_=e(N[0],N[N.length-1],_??10)),_?p(F_(N,_)):d},d.copy=function(){return wh(d,qh(t,e,n,r,i,s,o,l,c,u))},d}function $c(){return uo.apply(qh(Y_,V_,vr,js,wo,Ms,Ac,Lc,Bi,Zh).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function J2({task:t,scale:e,onTaskClick:n,onTaskDoubleClick:r,isSelected:i=!1,taskIndex:s,tabIndex:o=-1,onFocus:l,"aria-label":c}){const u=A.useRef(null),[d,f]=A.useState(!1),[p,h]=A.useState(!1),g=e(t.start),m=e(t.end),y=Math.max(m-g,20),w=()=>{if(t.color)return t.color;switch(t.priority){case"high":return"#d5281b";case"medium":return"#005eb8";case"low":return"#007f3b";default:return"#005eb8"}},M=t.progress?y*t.progress/100:0,j=()=>{n?.(t)},v=()=>{r?.(t)},b=D=>{D.key==="Enter"?(D.preventDefault(),j()):D.key===" "&&(D.preventDefault(),v())},_=()=>{f(!0)},N=()=>{f(!1)},C=()=>{h(!0),l?.()},x=()=>{h(!1)},k=["gantt-task-bar",d&&"gantt-task-bar--pressed",(p||i)&&"gantt-task-bar--focused",t.priority&&`gantt-task-bar--priority-${t.priority}`,i&&"gantt-task-bar--selected",t.type&&`gantt-task-bar--type-${t.type}`].filter(Boolean).join(" "),F={"--task-left":`${g}px`,"--task-width":`${y}px`,"--task-color":w(),left:`${g}px`,width:`${y}px`,backgroundColor:w()};return a.jsxs("div",{role:"button",tabIndex:o,ref:u,"data-task-index":s,className:k,style:F,onClick:j,onDoubleClick:v,onKeyDown:b,onMouseDown:_,onMouseUp:N,onFocus:C,onBlur:x,"aria-label":c||`${i?"Selected: ":""}${t.title}: ${t.start.toLocaleDateString()} to ${t.end.toLocaleDateString()}${t.priority?`, priority ${t.priority}`:""}${t.progress?`, ${t.progress}% complete`:""}`,"aria-describedby":`task-${t.id}-details`,children:[a.jsx("span",{className:"task-title",children:t.title}),t.progress!==void 0&&a.jsx("div",{className:"task-progress",style:{width:`${M}px`}}),a.jsx("span",{id:`task-${t.id}-details`,className:"sr-only",children:`Task: ${t.title}, from ${t.start.toLocaleDateString()} to ${t.end.toLocaleDateString()}${t.progress?`, ${t.progress}% complete`:""}${t.priority?`, priority: ${t.priority}`:""}`})]})}function K2({viewStart:t,viewEnd:e,dateCount:n}){const r=[];for(let h=t.getTime();h<=e.getTime();h+=864e5)r.push(new Date(h));const s=new Date;s.setHours(0,0,0,0);const[o,l]=A.useState(-1),c=A.useRef(null),u=h=>{if(h.key==="ArrowLeft"){h.preventDefault();const g=Math.max(0,o===-1?0:o-1);l(g),p(g)}else if(h.key==="ArrowRight"){h.preventDefault();const g=Math.min(r.length-1,o===-1?0:o+1);l(g),p(g)}else if(h.key==="ArrowDown")h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .timeline-container"):null)?.focus();else if(h.key==="Home")h.preventDefault(),l(0),p(0);else if(h.key==="End"){h.preventDefault();const g=r.length-1;l(g),p(g)}},d=h=>{if(h.key==="ArrowDown")h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .resource-label"):null)?.focus();else if(h.key==="ArrowRight"){h.preventDefault();const g=c.current;g&&g.focus()}},f=()=>{o===-1&&(l(0),setTimeout(()=>p(0),0))},p=h=>{const g=c.current?.querySelector(`[data-date-index="${h}"]`);g&&g.focus()};return a.jsxs("div",{className:"gantt-header",role:"row","aria-rowindex":1,children:[a.jsx("div",{className:"header-resource",role:"columnheader","aria-colindex":1,tabIndex:0,"aria-label":"Resource column header",onKeyDown:d,children:"Resources"}),a.jsx("div",{ref:c,className:"header-timeline",role:"columnheader","aria-colindex":2,"aria-colspan":n,"aria-label":`Timeline from ${t.toLocaleDateString()} to ${e.toLocaleDateString()}. Use arrow keys to navigate between dates`,tabIndex:0,onKeyDown:u,onFocus:f,children:r.map((h,g)=>{const m=h.getTime()===s.getTime(),y=o===g;return a.jsx("div",{"data-date-index":g,className:`date-column ${m?"today":""} ${y?"focused":""}`,tabIndex:y?0:-1,role:"button","aria-label":`${h.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}${m?" (Today)":""}`,onFocus:()=>l(g),onKeyDown:u,children:h.toLocaleDateString("en-GB",{day:"numeric",month:"short"})},g)})})]})}function Q2({resource:t,tasks:e,scale:n,onTaskClick:r,onTaskDoubleClick:i,rowIndex:s,dateCount:o}){const[l,c]=A.useState(!1),[u,d]=A.useState(-1),f=A.useRef(null);A.useEffect(()=>{l&&u>=0&&e.length>0&&setTimeout(()=>{f.current?.querySelector(`[data-task-index="${u}"]`)?.focus()},0)},[l,u,e.length]);const p=m=>{if(m.key==="ArrowLeft"&&m.shiftKey){m.preventDefault(),m.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(m.key==="ArrowRight"&&m.shiftKey){m.preventDefault(),m.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!l){switch(m.key){case"ArrowUp":m.preventDefault(),s===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-timeline"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${s+1}"] .timeline-container`):null)?.focus();break;case"ArrowDown":m.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${s+3}"] .timeline-container`):null)?.focus();break;case"ArrowLeft":m.preventDefault(),f.current?.closest(".gantt-row")?.querySelector(".resource-label")?.focus();break;case"Enter":e.length>0&&(m.preventDefault(),c(!0),d(0));break}return}switch(m.key){case"ArrowLeft":m.preventDefault();const y=Math.max(0,u-1);d(y),f.current?.querySelector(`[data-task-index="${y}"]`)?.focus();break;case"ArrowRight":m.preventDefault();const M=Math.min(e.length-1,u+1);d(M),f.current?.querySelector(`[data-task-index="${M}"]`)?.focus();break;case"Enter":m.preventDefault(),u>=0&&r?.(e[u]);break;case" ":m.preventDefault(),u>=0&&i?.(e[u]);break;case"Escape":m.preventDefault(),c(!1),d(-1),f.current?.focus();break}},h=m=>{switch(m.key){case"ArrowUp":m.preventDefault(),s===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-resource"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${s+1}"] .resource-label`):null)?.focus();break;case"ArrowDown":m.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${s+3}"] .resource-label`):null)?.focus();break;case"ArrowRight":m.preventDefault(),f.current?.focus();break}},g=m=>{l&&d(m)};return a.jsxs("div",{className:"gantt-row",role:"row","aria-rowindex":s+2,children:[a.jsx("div",{className:"resource-label",role:"gridcell","aria-colindex":1,tabIndex:0,"aria-label":`Resource: ${t.label}`,onKeyDown:h,children:t.label}),a.jsx("div",{ref:f,className:`timeline-container ${l?"timeline-active":""}`,role:"gridcell","aria-colindex":2,"aria-colspan":o,tabIndex:0,"aria-label":`Timeline for ${t.label} with ${e.length} task${e.length!==1?"s":""}. Press Enter to activate task navigation, then use arrow keys to navigate, Enter to select, Space to activate, Escape to exit`,onKeyDown:p,onFocus:()=>{l||d(-1)},children:e.map((m,y)=>a.jsx(J2,{task:m,scale:n,onTaskClick:r,onTaskDoubleClick:i,isSelected:l&&u===y,taskIndex:y,tabIndex:l&&u===y?0:-1,onFocus:()=>g(y)},m.id))})]})}function ew({resources:t,tasks:e=[],viewStart:n,viewEnd:r,onTaskClick:i,onTaskDoubleClick:s}){const o=A.useRef(null),[l,c]=A.useState(800),u=A.useMemo(()=>{if(n instanceof Date)return isNaN(n.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):n;const m=new Date(n);return isNaN(m.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):m},[n]),d=A.useMemo(()=>{if(r instanceof Date)return isNaN(r.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):r;const m=new Date(r);return isNaN(m.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):m},[r]),f=A.useMemo(()=>Math.ceil((d.getTime()-u.getTime())/864e5)+1,[u,d]);A.useEffect(()=>{if(!o.current||typeof window>"u")return;const m=typeof ResizeObserver<"u"?ResizeObserver:void 0;if(!m)return;const y=new m(w=>{const M=w[0];M&&c(Math.max(M.contentRect.width-220,400))});return y.observe(o.current),()=>y.disconnect()},[]);const p=A.useMemo(()=>$c().domain([u,d]).range([0,l]),[u,d,l]),h=A.useMemo(()=>{const m=new Map;return e.forEach(y=>{const w=m.get(y.resourceId)||[];w.push(y),m.set(y.resourceId,w)}),m},[e]),g=m=>{if(m.target===m.currentTarget)switch(m.key){case"ArrowDown":m.preventDefault(),typeof document<"u"&&o.current?.querySelector(".gantt-row .resource-label")?.focus();break;case"Home":m.preventDefault(),typeof document<"u"&&o.current?.querySelector(".header-resource")?.focus();break}};return a.jsxs("div",{className:"gantt-chart",role:"grid","aria-label":"Gantt Chart showing resource scheduling and task timelines","aria-rowcount":t.length+1,"aria-colcount":f+1,"aria-description":"Use arrow keys to navigate cells, Tab to cycle through tasks in timeline rows or dates in header, Enter to select task, Space to activate task, Alt+arrows to scroll the grid, Shift+arrows to scroll timeline rows",tabIndex:0,onKeyDown:g,children:[a.jsx(K2,{viewStart:u,viewEnd:d,dateCount:f}),a.jsx("div",{ref:o,className:"gantt-grid",role:"rowgroup","aria-label":"Gantt chart data rows",tabIndex:0,onKeyDown:m=>{m.key==="ArrowLeft"&&m.altKey?(m.preventDefault(),o.current?.scrollBy({left:-50,behavior:"smooth"})):m.key==="ArrowRight"&&m.altKey?(m.preventDefault(),o.current?.scrollBy({left:50,behavior:"smooth"})):m.key==="ArrowUp"&&m.altKey?(m.preventDefault(),o.current?.scrollBy({top:-50,behavior:"smooth"})):m.key==="ArrowDown"&&m.altKey&&(m.preventDefault(),o.current?.scrollBy({top:50,behavior:"smooth"}))},children:t.map((m,y)=>a.jsx(Q2,{resource:m,tasks:h.get(m.id)||[],scale:p,onTaskClick:i,onTaskDoubleClick:s,rowIndex:y,dateCount:f},m.id))})]})}const Co=({children:t,href:e,active:n=!1,attributes:r={}})=>a.jsx("li",{className:"nhsuk-breadcrumb__item",children:n?a.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",...r,children:t}):a.jsx("a",{className:"nhsuk-breadcrumb__link",href:e,...r,children:t})}),Bc=({items:t=[],children:e,classes:n,labelText:r="Breadcrumb",href:i,text:s,reverse:o=!1,attributes:l={}})=>{const c=()=>e?A.Children.toArray(e).filter(y=>A.isValidElement(y)&&(y.type===Co||y.type?.displayName==="BreadcrumbItem")).map(y=>({text:typeof y.props.children=="string"?y.props.children:String(y.props.children),href:y.props.href,active:y.props.active,attributes:y.props.attributes})):[],u=()=>e?c():i&&s?[{href:i,text:s}]:t,d=()=>{const m=u();if(m&&m.length>0){const y=m.slice().reverse().find(w=>w.href&&!w.active);if(y)return{href:y.href,text:y.text}}return{text:"Home"}},f=u(),p=d(),h=Ee("nhsuk-breadcrumb",{"nhsuk-breadcrumb--reverse":o},n),g=r;return a.jsxs("nav",{className:h,"aria-label":g,role:"navigation",...l,children:[a.jsx("ol",{className:"nhsuk-breadcrumb__list",role:"list",children:e?A.Children.map(e,(m,y)=>A.isValidElement(m)&&(m.type===Co||m.type?.displayName==="BreadcrumbItem")?A.cloneElement(m,{key:y}):null):f?.filter(m=>m.active||!!m.href).map((m,y)=>a.jsx("li",{className:"nhsuk-breadcrumb__item",role:"listitem",children:m.active?a.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",role:"text",...m.attributes||{},children:m.text}):a.jsx("a",{className:"nhsuk-breadcrumb__link",href:m.href,role:"link",...m.attributes||{},children:m.text})},y))}),p.href&&a.jsx("p",{className:"nhsuk-breadcrumb__back",children:a.jsxs("a",{className:"nhsuk-breadcrumb__backlink",href:p.href,role:"link","aria-label":`Back to ${p.text}`,...t.length>0?t[t.length-1]?.attributes||{}:{},children:[a.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Back to Â "}),p.text]})})]})};Bc.Item=Co,Co.displayName="BreadcrumbItem";const zc=({text:t="Skip to main content",href:e="#maincontent",classes:n,attributes:r={}})=>{const i=Ee("nhsuk-skip-link",n);return a.jsx("a",{className:i,href:e,"data-module":"nhsuk-skip-link",...r,children:t})},tw=({previousUrl:t,previousPage:e,nextUrl:n,nextPage:r,classes:i,attributes:s={}})=>{const o=Ee("nhsuk-pagination",i);return a.jsx("nav",{className:o,role:"navigation","aria-label":"Pagination",...s,children:a.jsxs("ul",{className:"nhsuk-list nhsuk-pagination__list",children:[t&&e&&a.jsx("li",{className:"nhsuk-pagination-item--previous",children:a.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--prev",href:t,children:[a.jsx("span",{className:"nhsuk-pagination__title",children:"Previous"}),a.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),a.jsx("span",{className:"nhsuk-pagination__page",children:e}),a.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:a.jsx("path",{d:"M4.1 12.3l2.7 3c.2.2.5.2.7 0 .1-.1.1-.2.1-.3v-2h11c.6 0 1-.4 1-1s-.4-1-1-1h-11V9c0-.2-.1-.4-.3-.5h-.2c-.1 0-.3.1-.4.2l-2.7 3c0 .2 0 .4.1.6z"})})]})}),n&&r&&a.jsx("li",{className:"nhsuk-pagination-item--next",children:a.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--next",href:n,children:[a.jsx("span",{className:"nhsuk-pagination__title",children:"Next"}),a.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),a.jsx("span",{className:"nhsuk-pagination__page",children:r}),a.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:a.jsx("path",{d:"M19.6 11.66l-2.73-3A.51.51 0 0 0 16 9v2H5a1 1 0 0 0 0 2h11v2a.5.5 0 0 0 .32.46.39.39 0 0 0 .18 0 .52.52 0 0 0 .37-.16l2.73-3a.5.5 0 0 0 0-.64z"})})]})})]})})},nw=({items:t,classes:e,ariaLabel:n="Pages in this guide",attributes:r={}})=>{const i=Ee("nhsuk-contents-list",e),s=(o,l)=>o.current?a.jsx("li",{className:"nhsuk-contents-list__item","aria-current":"page",...o.attributes||{},children:a.jsx("span",{className:"nhsuk-contents-list__current",children:o.text})},l):a.jsx("li",{className:"nhsuk-contents-list__item",children:a.jsx("a",{className:"nhsuk-contents-list__link",href:o.href,...o.attributes||{},children:o.text})},l);return a.jsxs("nav",{className:i,role:"navigation","aria-label":n,...r,children:[a.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Contents"}),a.jsx("ol",{className:"nhsuk-contents-list__list",children:t.map((o,l)=>s(o,l))})]})},Oc=A.forwardRef(({variant:t="default",heading:e,headingHtml:n,headingLevel:r=2,headingClasses:i,description:s,descriptionHtml:o,href:l,imgURL:c,imgAlt:u,...d},f)=>{const p=["nhsuk-card",t==="clickable"&&"nhsuk-card--clickable",t==="secondary"&&"nhsuk-card--secondary",t==="feature"&&"nhsuk-card--feature",d.className].filter(Boolean).join(" "),h=["nhsuk-card__content",t==="feature"&&"nhsuk-card__content--feature",t==="primary"&&"nhsuk-card__content--primary",t==="secondary"&&"nhsuk-card__content--secondary"].filter(Boolean).join(" "),g=["nhsuk-card__heading",t==="feature"&&"nhsuk-card__heading--feature",i].filter(Boolean).join(" "),m=()=>{if(n)return a.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!e)return null;const M=()=>l&&t!=="feature"?a.jsx("a",{className:"nhsuk-card__link",href:l,children:e}):e;return a.jsx(Un,{level:r,className:g,children:M()})},y=()=>d.children?d.children:o?a.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):s?a.jsx("p",{className:"nhsuk-card__description",children:s}):null,w=()=>t!=="primary"?null:a.jsxs("svg",{className:"nhsuk-icon",xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27","aria-hidden":"true",focusable:"false",children:[a.jsx("circle",{cx:"13.333",cy:"13.333",r:"13.333",fill:""}),a.jsxs("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2.667",children:[a.jsx("path",{d:"M15.438 13l-3.771 3.771"}),a.jsx("path",{d:"M11.667 9.229L15.438 13"})]})]});return a.jsxs("div",{...d,className:p,ref:f,children:[c&&a.jsx("img",{className:"nhsuk-card__img",src:c,alt:u||""}),a.jsxs("div",{className:h,children:[m(),y(),w()]})]})});Oc.displayName="Card";const rw=({className:t,children:e,"data-testid":n,id:r})=>{const i=["nhsuk-card-group",t].filter(Boolean).join(" ");return a.jsx("ul",{className:i,"data-testid":n,id:r,children:e})},iw=({className:t,children:e,"data-testid":n})=>{const r=["nhsuk-card-group__item",t].filter(Boolean).join(" ");return a.jsx("li",{className:r,"data-testid":n,children:e})},sw=({type:t,heading:e,headingHtml:n,headingLevel:r=3,headingClasses:i,description:s,descriptionHtml:o,className:l,children:c,"data-testid":u,id:d,"aria-label":f,"aria-labelledby":p,"aria-describedby":h})=>{const g=["nhsuk-care-card",`nhsuk-care-card--${t}`,l].filter(Boolean).join(" "),m=["nhsuk-care-card__heading",i].filter(Boolean).join(" "),y=()=>{if(n)return a.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!e)return null;const M={"non-urgent":"Non-urgent advice:",urgent:"Urgent advice:",emergency:"Immediate action required:"}[t],j=a.jsxs("span",{role:"text",children:[a.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[M," "]}),e]});return a.jsx(Un,{level:r,className:m,children:j})},w=()=>c||(o?a.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):s?a.jsx("p",{className:"nhsuk-care-card__text",children:s}):null);return a.jsxs("div",{className:g,"data-testid":u,id:d,"aria-label":f,"aria-labelledby":p,"aria-describedby":h,children:[a.jsxs("div",{className:"nhsuk-care-card__heading-container",children:[y(),a.jsx("span",{className:"nhsuk-care-card__arrow","aria-hidden":"true"})]}),a.jsx("div",{className:"nhsuk-care-card__content",children:w()})]})},Xh=({id:t,className:e,headingText:n,headingHtml:r,headingLevel:i=2,bodyText:s,bodyHtml:o,children:l,...c})=>{const u=Ee("nhsuk-panel",e),d=()=>!n&&!r&&!l?null:r?a.jsx(Un,{level:i,className:"nhsuk-panel__heading",html:r,marginBottom:"var(--panel-heading-margin, 24px)"}):n?a.jsx(Un,{level:i,className:"nhsuk-panel__heading",text:n,marginBottom:"var(--panel-heading-margin, 24px)"}):null,f=()=>l?a.jsx("div",{className:"nhsuk-panel__body",children:l}):o?a.jsx("div",{className:"nhsuk-panel__body",dangerouslySetInnerHTML:{__html:o}}):s?a.jsx("div",{className:"nhsuk-panel__body",children:a.jsx("p",{children:s})}):null;return a.jsxs("div",{className:u,id:t,...c,children:[d(),f()]})},aw=({text:t,html:e,children:n,className:r,...i})=>{const s=Ee("nhsuk-inset-text",r),o=()=>n||(e?a.jsx("div",{dangerouslySetInnerHTML:{__html:e}}):t?a.jsx("p",{children:t}):null);return a.jsx("div",{className:s,...i,children:o()})},ow=({items:t,noBorder:e=!1,className:n,...r})=>{const i=Ee("nhsuk-summary-list",{"nhsuk-summary-list--no-border":e},n),s=l=>l.children?l.children:l.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text?l.text:null,o=l=>!l||!l.items.length?null:a.jsx("dd",{className:"nhsuk-summary-list__actions",children:a.jsx("ul",{className:"nhsuk-summary-list__actions-list",children:l.items.map((c,u)=>a.jsx("li",{className:"nhsuk-summary-list__actions-list-item",children:a.jsxs("a",{href:c.href,className:"nhsuk-link",...c.attributes,children:[s(c),c.visuallyHiddenText&&a.jsx("span",{className:"nhsuk-u-visually-hidden",children:c.visuallyHiddenText})]})},u))})});return a.jsx("div",{className:"nhsuk-summary-list-container",children:a.jsx("dl",{className:i,...r,children:t.map((l,c)=>a.jsxs("div",{className:"nhsuk-summary-list__row",children:[a.jsx("dt",{className:"nhsuk-summary-list__key",children:s(l.key)}),a.jsx("dd",{className:"nhsuk-summary-list__value",children:s(l.value)}),o(l.actions)]},c))})})},Ls={current:null},lw=()=>{if(Ls.current)return Ls.current;try{Ls.current=require("prismjs");try{require("prismjs/components/prism-typescript")}catch{}try{require("prismjs/components/prism-tsx")}catch{}try{require("prismjs/components/prism-json")}catch{}}catch{Ls.current=null}return Ls.current},cw=t=>{const e=[{regex:/\b(import|from|export|const|let|var|return|if|else|for|while|switch|case|break|new|throw|try|catch|finally|class|extends|implements|interface|type|as|async|await|function)\b/g,cls:"kw"},{regex:/(['"`])(?:\\.|(?!\1).)*\1/g,cls:"str"},{regex:/\/\*[^]*?\*\/|\/\/.*$/gm,cls:"com"},{regex:/\b([0-9]+(?:\.[0-9]+)?)\b/g,cls:"num"}];let n=t;return e.forEach(r=>{n=n.replace(r.regex,i=>`<span class="nhsuk-code-${r.cls}">${i}</span>`)}),n},No=(t,e,n)=>{if(n||!e)return t;const r=lw();if(r&&r.languages){const i=r.languages[e]?e:r.languages.typescript&&(e==="ts"||e==="tsx"||e==="typescript")?"typescript":r.languages.json&&e==="json"?"json":void 0;if(i)try{return r.highlight(t,r.languages[i],i)}catch{}}return cw(t)},uw=({rows:t,head:e,caption:n,captionSize:r,firstCellIsHeader:i=!1,responsive:s=!1,heading:o,headingLevel:l=3,panel:c=!1,panelClasses:u,tableClasses:d,classes:f,attributes:p,"data-testid":h,columns:g,data:m,visuallyHiddenCaption:y=!1})=>{const w=`nhsuk-table__caption ${r?`nhsuk-table__caption--${r}`:""}`.trim(),M=Ee("nhsuk-table",{"nhsuk-table-responsive":s},d),j=Ee(f),v=(x,k)=>{const F=Ee("nhsuk-table__header",{[`nhsuk-table__header--${x.format}`]:x.format},x.classes),D={scope:"col",...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...s&&{role:"columnheader"},...x.attributes};let P;if(x.node!=null)P=a.jsx(a.Fragment,{children:x.node});else if(x.html)P=a.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const I=Array.isArray(x.code),L=I?x.code.join(`
`):x.code,E=I||L.includes(`
`),z={className:Ee("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":E,"nhsuk-table__code--inline":!E}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},G=No(L,x.codeLanguage);P=E?a.jsx("pre",{className:"nhsuk-table__pre",children:a.jsx("code",{...z,dangerouslySetInnerHTML:{__html:G}})}):a.jsx("code",{...z,dangerouslySetInnerHTML:{__html:G}})}else P=x.text;return a.jsx("th",{className:F,...D,children:P},k)},b=(x,k,F)=>{const D=i&&F||x.rowHeader,P=Ee(D?"nhsuk-table__header":"nhsuk-table__cell",{[`nhsuk-table__${D?"header":"cell"}--${x.format}`]:x.format},x.classes),I={...D&&{scope:"row"},...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...s&&{role:D?"rowheader":"cell",...x.header&&{"data-label":x.header}},...x.attributes};let L;if(x.node!=null)L=a.jsx(a.Fragment,{children:x.node});else if(x.html)L=a.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const G=Array.isArray(x.code),ee=G?x.code.join(`
`):x.code,T=G||ee.includes(`
`),K={className:Ee("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":T,"nhsuk-table__code--inline":!T}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},O=No(ee,x.codeLanguage,x.disableHighlight);L=T?a.jsx("pre",{className:"nhsuk-table__pre",children:a.jsx("code",{...K,dangerouslySetInnerHTML:{__html:O}})}):a.jsx("code",{...K,dangerouslySetInnerHTML:{__html:O}})}else L=x.text;const E=a.jsxs(a.Fragment,{children:[s&&x.header&&a.jsxs("span",{className:"nhsuk-table-responsive__heading","aria-hidden":"true",children:[x.header," "]}),L]}),z=D?"th":"td";return a.jsx(z,{className:P,...I,children:E},k)};let _=e,N=t;!_&&g&&g.length&&(_=g.map(x=>({text:x.title,format:x.format,classes:x.headerClasses,attributes:x.headerAttributes}))),!N&&g&&m&&m.length&&(N=m.map((x,k)=>g.map(F=>{const D=F.accessor?F.accessor(x,k):x[F.key];let P={format:F.format,classes:F.cellClasses,attributes:F.cellAttributes};if(F.rowHeader&&(P.rowHeader=!0),F.render){const I=F.render(D,x,k,F);return I==null||typeof I=="boolean"?{...P,text:""}:typeof I=="string"||typeof I=="number"?{...P,text:String(I)}:{...P,...I}}return{...P,text:D!=null?String(D):""}})));const C=()=>a.jsxs("table",{className:M,...s&&{role:"table"},...p,...h&&{"data-testid":h},children:[n&&a.jsx("caption",{className:Ee(w,y&&"nhsuk-u-visually-hidden"),children:n}),_&&_.length>0&&a.jsx("thead",{className:"nhsuk-table__head",...s&&{role:"rowgroup"},children:a.jsx("tr",{...s&&{role:"row"},children:_.map((x,k)=>v(x,k))})}),a.jsx("tbody",{className:"nhsuk-table__body",children:N&&N.map((x,k)=>a.jsx("tr",{className:"nhsuk-table__row",...s&&{role:"row"},children:x.map((F,D)=>b(F,D,D===0))},k))})]});return c?a.jsxs(Xh,{className:u,children:[o&&a.jsx(Un,{level:l,className:"nhsuk-table__heading-tab",children:o}),C()]}):j?a.jsx("div",{className:j,children:C()}):C()},dw=({children:t,size:e,className:n})=>{const r=Ee("nhsuk-table__caption",e&&`nhsuk-table__caption--${e}`,n);return a.jsx("caption",{className:r,children:t})},Jh=({responsive:t,className:e,children:n,...r})=>{const i=t?{role:"row"}:{};return a.jsx("tr",{className:e,...i,...r,children:n})},Kh=({text:t,html:e,node:n,code:r,codeLanguage:i,codeClassName:s,disableHighlight:o,format:l,classes:c,colspan:u,rowspan:d,attributes:f,responsive:p,as:h="th"})=>{const g=Ee("nhsuk-table__header",{[`nhsuk-table__header--${l}`]:l},c),m={scope:"col",...u&&{colSpan:u},...d&&{rowSpan:d},...p&&{role:"columnheader"},...f};let y;if(n!=null)y=a.jsx(a.Fragment,{children:n});else if(e)y=a.jsx("span",{dangerouslySetInnerHTML:{__html:e}});else if(r!=null){const M=Array.isArray(r),j=M?r.join(`
`):r,v=M||j.includes(`
`),b={className:Ee("nhsuk-table__code",s,{"nhsuk-table__code--block":v,"nhsuk-table__code--inline":!v}),...i?{"data-language":i}:{}},_=No(j,i,o);y=v?a.jsx("pre",{className:"nhsuk-table__pre",children:a.jsx("code",{...b,dangerouslySetInnerHTML:{__html:_}})}):a.jsx("code",{...b,dangerouslySetInnerHTML:{__html:_}})}else y=t;const w=h;return a.jsx(w,{className:g,...m,children:y})},fw=({text:t,html:e,node:n,code:r,codeLanguage:i,codeClassName:s,disableHighlight:o,format:l,classes:c,colspan:u,rowspan:d,attributes:f,responsive:p,rowHeader:h})=>{const g=!!h,m=g?"th":"td",y=Ee(g?"nhsuk-table__header":"nhsuk-table__cell",l&&`nhsuk-table__${g?"header":"cell"}--${l}`,c),w={...u&&{colSpan:u},...d&&{rowSpan:d},...g&&{scope:"row"},...p&&{role:g?"rowheader":"cell"},...f};let M;if(n!=null)M=a.jsx(a.Fragment,{children:n});else if(e)M=a.jsx("span",{dangerouslySetInnerHTML:{__html:e}});else if(r!=null){const j=Array.isArray(r),v=j?r.join(`
`):r,b=j||v.includes(`
`),_={className:Ee("nhsuk-table__code",s,{"nhsuk-table__code--block":b,"nhsuk-table__code--inline":!b}),...i?{"data-language":i}:{}},N=No(v,i,o);M=b?a.jsx("pre",{className:"nhsuk-table__pre",children:a.jsx("code",{..._,dangerouslySetInnerHTML:{__html:N}})}):a.jsx("code",{..._,dangerouslySetInnerHTML:{__html:N}})}else M=t;return a.jsx(m,{className:y,...w,children:M})},Zn=uw;Zn.Caption=dw,Zn.BodyRow=Jh,Zn.HeaderCell=Kh,Zn.Cell=fw;let Qh=!1,ep=!1;Object.defineProperty(Zn,"Row",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!Qh&&(console.warn("Table.Row is deprecated. Use Table.BodyRow instead."),Qh=!0),Jh}}),Object.defineProperty(Zn,"TH",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!ep&&(console.warn("Table.TH is deprecated. Use Table.HeaderCell instead."),ep=!0),Kh}});const hw=A.forwardRef(({items:t,defaultActiveTab:e,activeTab:n,onTabChange:r,onTabFocus:i,onTabListBlur:s,onEscape:o,autoActivate:l=!0,className:c,id:u,"data-testid":d,...f},p)=>{const h=n!==void 0,[g,m]=A.useState(()=>e||t[0]?.id||""),y=h?n:g,w=A.useRef(null),M=A.useRef(new Map),j=A.useCallback(k=>{h||m(k),r?.(k)},[h,r]),v=A.useCallback(k=>{i?.(k),l&&j(k)},[i,l,j]),b=A.useCallback((k,F)=>{const D=t.filter(L=>!L.disabled).map(L=>L.id),P=D.indexOf(F);let I=null;switch(k.key){case"ArrowLeft":I=P>0?P-1:D.length-1;break;case"ArrowRight":I=P<D.length-1?P+1:0;break;case"Home":I=0;break;case"End":I=D.length-1;break;case"Escape":k.preventDefault(),o?.();return;default:return}if(I!==null){k.preventDefault();const L=D[I],E=M.current.get(L);E&&(E.focus(),v(L))}},[t,v,o]),_=A.useCallback((k,F)=>{F?M.current.set(k,F):M.current.delete(k)},[]),N=A.useCallback(k=>{const F=M.current.get(k);F&&F.focus()},[]);A.useImperativeHandle(p,()=>({focusTab:N,getActiveTab:()=>y,getTabListElement:()=>w.current}),[N,y]);const C=A.useCallback(k=>{const F=k.relatedTarget;w.current?.contains(F)||s?.()},[s]),x=Ee("nhsuk-tabs",c);return a.jsxs("div",{className:x,id:u,"data-testid":d,...f,children:[a.jsx("h2",{className:"nhsuk-tabs__title",children:"Contents"}),a.jsx("div",{className:"nhsuk-tabs__list-container",ref:w,children:a.jsx("ul",{className:"nhsuk-tabs__list",role:"tablist",onBlur:C,children:t.map(k=>{const F=k.id===y,D=k.disabled,P=Ee("nhsuk-tabs__list-item",{"nhsuk-tabs__list-item--selected":F,"nhsuk-tabs__list-item--disabled":D});return a.jsx("li",{className:P,role:"presentation",children:a.jsx("button",{ref:I=>_(k.id,I),className:"nhsuk-tabs__tab",role:"tab","aria-selected":F,"aria-controls":`${k.id}-panel`,id:`${k.id}-tab`,tabIndex:F?0:-1,disabled:D,onClick:()=>!D&&j(k.id),onKeyDown:I=>!D&&b(I,k.id),onFocus:()=>!D&&v(k.id),...k.attributes,children:k.label})},k.id)})})}),t.map(k=>{const F=k.id===y;return a.jsx("div",{className:"nhsuk-tabs__panel",role:"tabpanel","aria-labelledby":`${k.id}-tab`,id:`${k.id}-panel`,hidden:!F,children:k.content},k.id)})]})}),tp=A.forwardRef(({summaryText:t,summaryHtml:e,text:n,html:r,open:i=!1,className:s="",id:o,children:l,...c},u)=>{const d=["nhsuk-details",s].filter(Boolean).join(" "),f=e?a.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:e}}):a.jsx("span",{className:"nhsuk-details__summary-text",children:t});let p;return l?p=l:r?p=a.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),a.jsxs("details",{ref:u,id:o,className:d,open:i,...c,children:[a.jsx("summary",{className:"nhsuk-details__summary",tabIndex:0,children:f}),a.jsx("div",{className:"nhsuk-details__text",children:p})]})});tp.displayName="Details";const np=A.forwardRef(({title:t,type:e,items:n,hidePrefix:r=!1,headingLevel:i=3,className:s,...o},l)=>{const c=["nhsuk-do-dont-list"];s&&c.push(s);const u=["nhsuk-list",e==="tick"?"nhsuk-list--tick":"nhsuk-list--cross"],d=()=>e==="cross"?a.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:[a.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),a.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]}):a.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"34",height:"34",children:a.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})}),f=h=>e==="cross"&&!r?`do not ${h}`:h,p=()=>a.jsx(Un,{level:i,className:"nhsuk-do-dont-list__label",text:t});return a.jsxs("div",{ref:l,className:c.join(" "),...o,children:[p(),a.jsx("div",{className:"nhsuk-do-dont-list__content--feature",children:a.jsx("ul",{className:u.join(" "),role:"list",children:n.map((h,g)=>a.jsxs("li",{children:[d(),f(h.item)]},g))})})]})});np.displayName="DoDontList";const rp=A.forwardRef(({summaryText:t,summaryHtml:e,text:n,html:r,open:i=!1,className:s="",id:o,children:l,...c},u)=>{const d=["nhsuk-expander",s].filter(Boolean).join(" "),f=e?a.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:e}}):a.jsx("span",{className:"nhsuk-details__summary-text",children:t});let p;return l?p=l:r?p=a.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),a.jsxs("details",{ref:u,id:o,className:d,open:i,...c,children:[a.jsx("summary",{className:"nhsuk-details__summary",children:f}),a.jsx("div",{className:"nhsuk-details__text",children:p})]})});rp.displayName="Expander";const ip=A.forwardRef(({items:t,idPrefix:e="task-list",className:n,...r},i)=>{const s=["nhsuk-task-list",n].filter(Boolean).join(" "),o=(l,c)=>{const u=c+1,d=`${e}-${u}-hint`,f=`${e}-${u}-status`,p=!!l.href,h=["nhsuk-task-list__item",p&&"nhsuk-task-list__item--with-link",l.classes].filter(Boolean).join(" "),g=[l.hint&&d,f].filter(Boolean).join(" ");return a.jsx(pw,{item:l,itemClasses:h,hasLink:p,hintId:d,statusId:f,ariaDescribedBy:g},c)};return a.jsx("ul",{ref:i,className:s,...r,children:t.map(o)})}),pw=({item:t,itemClasses:e,hasLink:n,hintId:r,statusId:i,ariaDescribedBy:s})=>{const o=()=>{const u=t.title.html?a.jsx("span",{dangerouslySetInnerHTML:{__html:t.title.html}}):t.title.text,d=[n?"nhsuk-task-list__link":"",t.title.classes].filter(Boolean).join(" ");return n?a.jsx("a",{className:d,href:t.href,"aria-describedby":s,children:u}):a.jsx("div",{className:t.title.classes||"",children:u})},l=()=>t.hint?t.hint.html?a.jsx("div",{id:r,className:"nhsuk-task-list__hint",dangerouslySetInnerHTML:{__html:t.hint.html}}):a.jsx("div",{id:r,className:"nhsuk-task-list__hint",children:t.hint.text}):null,c=()=>{const u=["nhsuk-task-list__status",t.status.classes].filter(Boolean).join(" ");let d;return t.status.tag?d=a.jsx(pt,{...t.status.tag}):t.status.html?d=a.jsx("span",{dangerouslySetInnerHTML:{__html:t.status.html}}):d=t.status.text,a.jsx("div",{className:u,id:i,children:d})};return a.jsxs("li",{className:e,children:[a.jsxs("div",{className:"nhsuk-task-list__name-and-hint",children:[o(),l()]}),c()]})};ip.displayName="TaskList";const mw=({heading:t,headingLevel:e=3,text:n,html:r,children:i,className:s,...o})=>{const l=/important/i.test(t),c=()=>i||(r?a.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n?a.jsx("p",{children:n}):null),u=["nhsuk-warning-callout",s].filter(Boolean).join(" "),d=`h${e}`;return a.jsxs("div",{className:u,...o,children:[A.createElement(d,{className:"nhsuk-warning-callout__label"},l?a.jsxs(a.Fragment,{children:[t,a.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"})]}):a.jsxs("span",{role:"text",children:[a.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Important: "}),t]})),c()]})},gw=({src:t,alt:e,caption:n,sizes:r,srcset:i,className:s,...o})=>{const l=["nhsuk-image",s].filter(Boolean).join(" ");return a.jsxs("figure",{className:l,...o,children:[a.jsx("img",{className:"nhsuk-image__img",src:t,alt:e,...r&&i?{sizes:r,srcSet:i}:{}}),n&&a.jsx("figcaption",{className:"nhsuk-image__caption",dangerouslySetInnerHTML:{__html:n}})]})},yw=({dateRange:t,onPrev:e,onNext:n,onToday:r,density:i,onDensityChange:s,a11yMode:o,onA11yModeChange:l})=>a.jsxs("div",{className:"nhs-slot-matrix__toolbar",role:"group","aria-label":"Slot matrix controls",children:[a.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[a.jsx(Et,{variant:"secondary",size:"small",onClick:e,"aria-label":"Previous date range",children:"Prev"}),a.jsx(Et,{variant:"secondary",size:"small",onClick:r,"aria-label":"Jump to today",children:"Today"}),a.jsx(Et,{variant:"secondary",size:"small",onClick:n,"aria-label":"Next date range",children:"Next"}),a.jsxs("span",{className:"nhs-slot-matrix__toolbar-daterange","aria-live":"polite",children:[t.start.toDateString()," â€“ ",t.end.toDateString()]})]}),a.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[a.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-density-select",children:"Density"}),a.jsx(ws,{id:"slot-matrix-density-select",name:"slot-matrix-density",ariaLabel:"Change density",value:i,onChange:c=>s?.(c.target.value),options:[{value:"comfortable",text:"Comfortable"},{value:"compact",text:"Compact"}]}),a.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-mode-select",children:"Mode"}),a.jsx(ws,{id:"slot-matrix-mode-select",name:"slot-matrix-mode",ariaLabel:"Change accessibility mode",value:o,onChange:c=>l?.(c.target.value),options:[{value:"grid",text:"Grid"},{value:"list",text:"List"}]})]})]}),bw=({items:t,orientation:e="horizontal"})=>a.jsx("div",{className:`nhs-slot-matrix__legend nhs-slot-matrix__legend--${e}`,role:"list","aria-label":"Slot legend",children:t.map(n=>a.jsx("div",{role:"listitem",className:"nhs-slot-matrix__legend-item",children:a.jsx(pt,{color:xw(n.status),text:n.label})},n.status))});function xw(t){switch(t){case"available":return"green";case"full":return"grey";case"overbook":return"orange";case"held":return"yellow";case"blocked":return"grey";default:return"default"}}const vw=({slots:t,sessions:e,value:n,defaultValue:r,onChange:i,selectionMode:s="single",a11yMode:o,className:l,style:c,getSlotAriaLabel:u,toolbar:d,enableDefaultToolbar:f=!0,legendItems:p,enableDefaultLegend:h=!0,legendPlacement:g="bottom",onA11yModeChange:m})=>{const[y,w]=A.useState("grid"),M=o||y,[j,v]=A.useState(r||[]),b=n??j,_=A.useMemo(()=>{const I=new Set;return t.forEach(L=>I.add(new Date(L.start).getTime())),Array.from(I).sort((L,E)=>L-E)},[t]),N=A.useMemo(()=>{const I={};return t.forEach(L=>{const E=new Date(L.start).getTime();I[E]||(I[E]={});const z=L.capacity-L.booked-(L.held||0);I[E][L.sessionId]={slot:L,remaining:z}}),I},[t]),C=A.useCallback(I=>{if(s==="single"){const L=[I.id];n||v(L),i?.(L,{lastAction:"select"})}else{const L=b.includes(I.id),E=L?b.filter(z=>z!==I.id):[...b,I.id];n||v(E),i?.(E,{lastAction:L?"deselect":"select"})}},[s,b,n,i]),x=A.useMemo(()=>p||(h?Array.from(new Set(t.map(L=>L.status))).map(L=>({status:L,label:L.charAt(0).toUpperCase()+L.slice(1)})):void 0),[p,h,t]),k=x?a.jsx(bw,{items:x,orientation:g==="left"||g==="right"?"vertical":"horizontal"}):null,F=I=>{o||w(I),m?.(I)},D=d||(f?a.jsx(yw,{dateRange:{start:new Date,end:new Date},density:"comfortable",a11yMode:M,onA11yModeChange:F}):null),P=a.jsx("div",{style:c,className:Ee(l),children:a.jsx(io,{className:Ee("nhs-slot-matrix-grid-wrapper"),children:a.jsx(gr,{children:a.jsx(Ei,{width:Er.Full,children:a.jsxs("div",{className:"nhs-slot-matrix",children:[D,g==="top"&&k,a.jsx("ul",{"aria-label":"Appointment slots list",children:t.map(I=>a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>C(I),"aria-pressed":b.includes(I.id),children:[As(new Date(I.start))," â€“ ",As(new Date(I.end))," (",I.status,")"]})},I.id))}),g==="bottom"&&k]})})})})});return M==="list"?P:a.jsx("div",{style:c,className:Ee(l),children:a.jsx(io,{className:Ee("nhs-slot-matrix-grid-wrapper"),children:a.jsx(gr,{children:a.jsx(Ei,{width:Er.Full,children:a.jsxs("div",{className:"nhs-slot-matrix",children:[D,g==="top"&&k,a.jsxs("div",{role:"grid","aria-rowcount":_.length+1,"aria-colcount":e.length+1,children:[a.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[a.jsx("div",{role:"columnheader","aria-label":"Timebands",className:"nhs-slot-matrix__timeband-header"}),e.map(I=>a.jsx("div",{role:"columnheader","aria-label":`Session ${I.specialty}`,className:"nhs-slot-matrix__session-header",children:I.specialty},I.id))]}),_.map(I=>a.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[a.jsx("div",{role:"rowheader",className:"nhs-slot-matrix__timeband-header","aria-label":As(new Date(I)),children:As(new Date(I))}),e.map(L=>{const E=N[I]?.[L.id];if(!E)return a.jsx("div",{role:"gridcell",className:"nhs-slot-matrix__cell","aria-disabled":"true"},L.id);const{slot:z,remaining:G}=E,ee=b.includes(z.id),T=u?u(z):`Slot ${As(new Date(z.start))} ${z.status}${G===0?" full":""}`;return a.jsx("button",{type:"button",role:"gridcell","data-status":z.status,className:Ee("nhs-slot-matrix__cell",ee&&"nhs-slot-matrix__cell--selected"),"aria-label":T,"aria-selected":ee||void 0,onClick:()=>C(z),children:G>0?`${G} left`:"Full"},z.id)})]},I))]}),g==="bottom"&&k]})})})})})};function sp(t){return t<10?`0${t}`:`${t}`}function As(t){return`${sp(t.getHours())}:${sp(t.getMinutes())}`}function ap(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=ap(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=ap(t))&&(r&&(r+=" "),r+=e);return r}const _w=({level:t,children:e,className:n})=>{const r=`h${t}`;return A.createElement(r,{className:n},e)},ww=({href:t,children:e,className:n,...r})=>a.jsx("a",{href:t,className:n,...r,children:e});function Mo(t,e){return a.jsx("span",{className:qn("nhs-step-nav__title",{"nhs-step-nav__title--current":e}),children:t.title})}const Sw=({id:t,className:e,ariaLabel:n="Step by step",heading:r,summary:i,headingLevel:s=3,variant:o="full-width",items:l,numbered:c=!0,currentStepId:u,renderLink:d,collapsible:f=!0,singleOpen:p=!1,defaultExpandedIds:h,expandedIds:g,onToggle:m,showAllControls:y=!1,autoFocusExpanded:w=!1})=>{const M=d??ww,j=o==="sidebar"?{as:"aside",className:"nhs-step-nav nhs-step-nav--sidebar"}:{as:"nav",className:"nhs-step-nav nhs-step-nav--full"},v=j.as==="aside"?"aside":"nav",b=g===void 0,[_,N]=A.useState(()=>new Set(h??[])),C=A.useMemo(()=>b?_:new Set(g),[b,_,g]),x=A.useMemo(()=>l.some(I=>I.description||I.items&&I.items.length>0),[l]),k=A.useCallback(I=>C.has(I),[C]),F=A.useCallback((I,L)=>{b&&N(E=>{if(p)return L?new Set([I]):new Set;const z=new Set(E);return L?z.add(I):z.delete(I),z}),m?.(I,L)},[b,m,p]),D=A.useCallback(I=>{const L=l.filter(E=>E.description||E.items&&E.items.length>0).map(E=>E.id);b&&N(()=>I?p?new Set(L.slice(0,1)):new Set(L):new Set),L.forEach(E=>m?.(E,I))},[l,b,m,p]),P=A.useCallback((I,L)=>{const E=!k(I.id);if(F(I.id,E),E&&w){const z=document.getElementById(`sbs-${I.id}-panel`);z&&z.querySelector('a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus()}else L?.focus()},[w,k,F]);return A.createElement(v,{id:t,"aria-label":n,className:qn(j.className,e)},a.jsxs(a.Fragment,{children:[o==="full-width"&&(r||i)&&a.jsxs("div",{className:"nhs-step-nav__intro",children:[r&&a.jsx(_w,{level:s,className:"nhs-step-nav__heading",children:r}),i&&a.jsx("p",{className:"nhs-step-nav__summary",children:i}),f&&!p&&y&&x&&a.jsxs("div",{className:"nhs-step-nav__controls",children:[a.jsx("button",{type:"button",className:"nhs-step-nav__control",onClick:()=>D(!0),children:"Show all"}),a.jsx("button",{type:"button",className:"nhs-step-nav__control",onClick:()=>D(!1),children:"Hide all"})]})]}),a.jsx("ol",{className:qn("nhs-step-nav__list",{"nhs-step-nav__list--numbered":c}),children:l.map((I,L)=>{const E=u===I.id,z=qn("nhs-step-nav__item",E&&"nhs-step-nav__item--current",I.status&&`nhs-step-nav__item--${I.status}`),G=I.href?a.jsx(M,{href:I.href,className:"nhs-step-nav__link","aria-current":E?"step":void 0,children:Mo(I,E)}):Mo(I,E),ee=!!(I.description||I.items&&I.items.length>0),T=f&&ee?k(I.id):!0,K=`sbs-${I.id}-header`,O=`sbs-${I.id}-panel`;return a.jsxs("li",{className:z,children:[a.jsxs("div",{className:"nhs-step-nav__header",children:[G,(I.optional||I.duration||I.meta)&&a.jsxs("div",{className:"nhs-step-nav__meta",children:[I.optional&&a.jsx("span",{className:"nhs-step-nav__optional","aria-label":"Optional",children:"Optional"}),I.duration&&a.jsx("span",{className:"nhs-step-nav__duration",children:I.duration}),I.meta]}),f&&ee&&a.jsx("button",{id:K,type:"button",className:"nhs-step-nav__toggle","aria-expanded":T,"aria-controls":O,onClick:B=>P(I,B.currentTarget),"aria-label":(T?"Hide":"Show")+` details for ${typeof I.title=="string"?I.title:"this step"}`,children:a.jsx("span",{className:"nhs-step-nav__toggle-icon","aria-hidden":"true"})})]}),ee&&(!f||T)&&a.jsxs("div",{id:O,role:"region","aria-labelledby":f?K:void 0,className:qn("nhs-step-nav__content"),children:[I.description&&a.jsx("p",{className:"nhs-step-nav__description",children:I.description}),I.items&&I.items.length>0&&a.jsx("ol",{className:"nhs-step-nav__sublist",children:I.items.map(B=>{const J=u===B.id,$=B.href?a.jsx(M,{href:B.href,className:"nhs-step-nav__sublink","aria-current":J?"step":void 0,children:Mo(B,J)}):Mo(B,J);return a.jsx("li",{className:qn("nhs-step-nav__subitem",B.status&&`nhs-step-nav__subitem--${B.status}`),children:$},B.id)})})]})]},I.id||L)})})]}))},op=({title:t,value:e,subtitle:n,variant:r="default",href:i,className:s="",ariaLabel:o,...l})=>{const c=["nhs-fdp-summary-card",`nhs-fdp-summary-card--${r}`,s].filter(Boolean).join(" "),u=a.jsxs(a.Fragment,{children:[a.jsx(Un,{level:3,className:"nhs-fdp-summary-card__title",children:t}),a.jsx("p",{className:"nhs-fdp-summary-card__value",children:e}),n&&a.jsx("p",{className:"nhs-fdp-summary-card__subtitle",children:n})]});return i?a.jsx("a",{className:`${c} nhs-fdp-summary-card--clickable`,href:i,"aria-label":o||`${t}: ${e}`,...l,children:u}):a.jsx("div",{className:c,"aria-label":o,...l,children:u})},kw=({cards:t,className:e="",...n})=>{const r=["nhs-fdp-dashboard-summary-grid",e].filter(Boolean).join(" ");return a.jsx("div",{className:r,...n,children:a.jsx(io,{children:a.jsx(gr,{children:t.map((i,s)=>a.jsx(Ei,{width:Er.OneQuarter,className:"nhs-fdp-dashboard-summary-grid__column","data-card-index":s,children:a.jsx(op,{...i})},s))})})})};var jo=(t=>(t.String="string",t.Number="number",t.Boolean="boolean",t.Date="date",t.Custom="custom",t))(jo||{}),Ri=(t=>(t.First="first",t.Last="last",t))(Ri||{}),Es=(t=>(t.TrueFirst="trueFirst",t.FalseFirst="falseFirst",t))(Es||{});function lp(t){if(t==null)return null;const n=(t instanceof Date?t:new Date(t)).getTime();return Number.isNaN(n)?null:n}const Cw=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function Nw(t,e){return Cw.compare(String(t),String(e))}function cp(t,e){if(e.sortAccessor)return e.sortAccessor(t);if(e.useRendererForSort){if(e.tableRenderer)return e.tableRenderer(t);if(e.render)return e.render(t)}return t[e.key]}function Mw(t,e,n,r){if(n?.sortComparator)return n.sortComparator(t,e);const i=n?.sortType;if(i===jo.Number){const s=Number(t),o=Number(e),l=Number.isNaN(s),c=Number.isNaN(o);return l&&c?0:l?1:c?-1:s-o}if(i===jo.Boolean){const s=!!t,o=!!e,l=n?.booleanOrder??r?.booleanOrder??Es.FalseFirst;return s===o?0:l===Es.TrueFirst?s?-1:1:s?1:-1}if(i===jo.Date){const s=lp(t),o=lp(e);return s==null&&o==null?0:s==null?1:o==null?-1:s-o}if(typeof t=="number"&&typeof e=="number"){const s=Number.isNaN(t),o=Number.isNaN(e);return s&&o?0:s?1:o?-1:t-e}if(typeof t=="boolean"&&typeof e=="boolean"){const s=n?.booleanOrder??r?.booleanOrder??Es.FalseFirst;return t===e?0:s===Es.TrueFirst?t?-1:1:t?1:-1}return Nw(t,e)}function Hc(t,e,n=Ri.Last,r){const i=new Map(t.map(o=>[o.key,o])),s=e??[];return(o,l)=>{if(!s.length)return 0;for(const{key:c,direction:u}of s){const d=i.get(c),f=d?cp(o,d):o[c],p=d?cp(l,d):l[c],h=f==null,g=p==null;if(h||g){if(h&&g)continue;return(d?.nullsPosition??r?.nullsPosition??n)===Ri.First?h?-1:1:h?1:-1}let m=Mw(f,p,d,r);if(m!==0)return u==="asc"?m:-m}if(r?.stable){const c=o.__originalIndex__??o.originalIndex??void 0,u=l.__originalIndex__??l.originalIndex??void 0;if(typeof c=="number"&&typeof u=="number")return c-u}return 0}}const up=A.forwardRef(({data:t,columns:e,sortConfig:n,onSort:r,sortingOptions:i,selectedRowIndex:s,onRowSelect:o,id:l,testId:c,ariaLabel:u,ariaLabelledby:d,ariaDescribedby:f,className:p,tableClassName:h,bordered:g=!1,striped:m=!1,responsive:y=!1,tableType:w="default"},M)=>{const j=A.useRef(null),v=A.useRef(null),b=A.useRef(null);A.useImperativeHandle(M,()=>j.current,[]);const[_,N]=A.useState(0),[C,x]=A.useState(0),[k,F]=A.useState("headers"),[D,P]=A.useState("browse"),I=e.length,L=t.length,E=A.useMemo(()=>{if(!n||n.length===0)return t;const B=Hc(e,n,Ri.Last,i);return[...t].sort(B)},[t,n,e,i]),z=A.useCallback((B,J)=>{setTimeout(()=>{const $=j.current?.querySelector(`tbody tr:nth-child(${B+1}) td:nth-child(${J+1})`);$&&($.focus(),typeof $.scrollIntoView=="function"&&$.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),G=A.useCallback(B=>{setTimeout(()=>{const J=j.current?.querySelector(`th:nth-child(${B+1})`);J&&(J.focus(),typeof J.scrollIntoView=="function"&&J.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),ee=A.useCallback(B=>{r?.(B)},[r]),T=A.useCallback(B=>{o?.(B)},[o]),K=A.useCallback(B=>{const{key:J}=B;switch(J){case"Enter":if(B.preventDefault(),k==="headers"&&D==="browse")P("navigate"),G(C);else if(k==="headers"&&D==="navigate"){const $=e[C];$&&ee($.key)}else k==="cells"&&D==="browse"?(P("navigate"),z(_,C)):k==="cells"&&D==="navigate"&&T(_);break;case"Escape":B.preventDefault(),(k==="headers"&&D==="navigate"||k==="cells"&&D==="navigate")&&P("browse");break;case"ArrowLeft":if(B.preventDefault(),D==="navigate"||D==="browse"&&k==="headers"){if(k==="headers"){const $=Math.max(0,C-1);x($),G($)}else if(k==="cells"){const $=Math.max(0,C-1);x($),z(_,$)}}break;case"ArrowRight":if(B.preventDefault(),D==="navigate"||D==="browse"&&k==="headers"){if(k==="headers"){const $=Math.min(I-1,C+1);x($),G($)}else if(k==="cells"){const $=Math.min(I-1,C+1);x($),z(_,$)}}break;case"ArrowUp":if(B.preventDefault(),k==="cells"){if(D==="browse"){const $=Math.max(0,_-1);N($),z($,0),x(0)}else if(D==="navigate")if(_>0){const $=_-1;N($),z($,C)}else F("headers"),P("browse"),G(C)}break;case"ArrowDown":if(B.preventDefault(),k==="headers"&&D==="browse")F("cells"),N(0),x(0),z(0,0);else if(k==="cells"){const $=L-1;if(D==="browse"){const R=Math.min($,_+1);N(R),z(R,0),x(0)}else if(D==="navigate"&&_<$){const R=_+1;N(R),z(R,C)}}break;case"Home":B.preventDefault(),k==="headers"?(x(0),G(0)):k==="cells"&&(B.ctrlKey?(N(0),x(0),z(0,0)):(x(0),z(_,0)));break;case"End":if(B.preventDefault(),k==="headers"){const $=I-1;x($),G($)}else if(k==="cells")if(B.ctrlKey){const $=L-1,R=I-1;N($),x(R),z($,R)}else{const $=I-1;x($),z(_,$)}break;case" ":if(B.preventDefault(),k==="headers"&&D==="navigate"){const $=e[C];$&&ee($.key)}else k==="cells"&&D==="navigate"&&T(_);break}},[k,D,C,_,I,L,e,z,G,ee,T]);A.useEffect(()=>{const B=j.current;if(B)return B.addEventListener("keydown",K),()=>B.removeEventListener("keydown",K)},[K]);const O=Ee("nhsuk-table",h,{"nhsuk-table--responsive":y,"nhsuk-table--bordered":g,"nhsuk-table--striped":m,"nhsuk-table--compact":w==="compact"},p);return a.jsxs("table",{ref:j,className:O,id:l,"data-testid":c,role:"grid","aria-label":u,"aria-labelledby":d,"aria-describedby":f,tabIndex:0,children:[a.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:a.jsx("tr",{ref:v,role:"row",children:e.map((B,J)=>{const $=n?.find(q=>q.key===B.key),R=!!$,H=k==="headers"&&C===J;return a.jsx("th",{className:Ee("sortable-header",{"sortable-header--focused":H}),role:"columnheader",tabIndex:H?0:-1,onClick:()=>{F("headers"),x(J),P("navigate"),G(J),ee(B.key)},onKeyDown:q=>{(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),ee(B.key))},"aria-sort":R?$?.direction==="asc"?"ascending":"descending":"none",children:a.jsxs("div",{className:"header-content",children:[a.jsx("span",{className:"header-label",children:B.label}),R&&a.jsxs("span",{className:"sort-indicator","aria-hidden":"true",children:[n&&n.length>1&&a.jsx("span",{className:"sort-priority",children:n.findIndex(q=>q.key===B.key)+1}),a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",className:"sort-arrow",children:$?.direction==="asc"?a.jsx("path",{d:"M6 2L2 8h8L6 2z"}):a.jsx("path",{d:"M6 10L2 4h8L6 10z"})})]})]})},B.key)})})}),a.jsx("tbody",{ref:b,className:"nhsuk-table__body",role:"rowgroup",children:E.map((B,J)=>{const $=s===J,R=k==="cells"&&_===J;return a.jsx("tr",{role:"row",className:Ee("data-row",{"data-row--selected":$,"data-row--focused":R}),"aria-selected":$,children:e.map((H,q)=>{const V=H.tableRenderer?H.tableRenderer(B):H.render?H.render(B):B[H.key],re=k==="cells"&&_===J&&C===q,fe=()=>typeof V=="boolean"?a.jsxs(a.Fragment,{children:[a.jsx("span",{"aria-hidden":"true",children:V?"âœ“":"âœ—"}),a.jsx("span",{className:"sr-only",children:V?"Yes":"No"})]}):String(V??"");return a.jsx("td",{role:"gridcell",className:Ee("data-cell",{"data-cell--focused":re}),tabIndex:re?0:-1,onClick:()=>{F("cells"),N(J),x(q),P("navigate"),z(J,q),T(J)},children:fe()},H.key)})},J)})})]})});up.displayName="AriaDataGrid";const Ps=({sortConfig:t,columns:e,onSortChange:n,className:r="",emptyDescription:i="No sorting applied",activeDescription:s,showReset:o=!0,showHelp:l=!0,disabled:c=!1,ariaLabel:u="Sort configuration",ariaDescribedBy:d})=>{const f=A.useRef(null),p=A.useRef(null),h=A.useRef(null),g=A.useCallback((x,k)=>{c||(p.current=k,x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",k))},[c]),m=A.useCallback((x,k)=>{c||p.current===k||(x.preventDefault(),x.dataTransfer.dropEffect="move",h.current=k)},[c]),y=A.useCallback((x,k)=>{if(c)return;x.preventDefault();const F=p.current;if(!F||F===k)return;const D=t.findIndex(I=>I.key===F),P=t.findIndex(I=>I.key===k);if(D!==-1&&P!==-1){const I=[...t],[L]=I.splice(D,1);I.splice(P,0,L),n(I)}p.current=null,h.current=null},[c,t,n]),w=A.useCallback(()=>{p.current=null,h.current=null},[]),M=A.useCallback(x=>{const k=e.find(F=>F.key===x);return k?k.label:x},[e]),j=A.useCallback(x=>["red","orange","blue","aqua-green","grey"][x]||"grey",[]),v=A.useCallback(x=>{if(c)return;const k=t.map(F=>F.key===x?{...F,direction:F.direction==="asc"?"desc":"asc"}:F);n(k)},[t,n,c]),b=A.useCallback(x=>{if(c)return;const k=t.filter(F=>F.key!==x);n(k)},[t,n,c]),_=A.useCallback(()=>{c||n([])},[n,c]),N=()=>{if(t.length===0)return i;if(s)return s;const x=t.map((k,F)=>{const D=k.direction==="asc"?"ascending":"descending";return`${F+1}. ${M(k.key)} (${D})`});if(x.length===1)return`Sorted by: ${x[0]}`;if(x.length===2)return`Sorted by: ${x.join(" and ")}`;{const k=x.pop();return`Sorted by: ${x.join(", ")}, and ${k}`}},C=A.useMemo(()=>{const x=["sort-description"];return l&&x.push("sort-help"),d&&x.push(d),x.join(" ")},[l,d]);return t.length===0?a.jsxs("div",{className:`sort-status-control ${r}`,children:[a.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:i}),l&&a.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:a.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]}):a.jsxs("div",{className:`sort-status-control ${r}`,children:[a.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:N()}),a.jsxs("div",{className:"sort-status-container",children:[a.jsx("div",{ref:f,className:"sort-status-control__tags",role:"list","aria-label":u,"aria-describedby":C,children:t.map((x,k)=>a.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",draggable:!c,onDragStart:F=>g(F,x.key),onDragOver:F=>m(F,x.key),onDrop:F=>y(F,x.key),onDragEnd:w,onClick:()=>v(x.key),style:{cursor:c?"default":"pointer"},title:c?"":`Click to toggle sort direction. Currently ${x.direction==="asc"?"ascending":"descending"}`,"data-key":x.key,children:a.jsx(pt,{color:j(k),className:"sort-status-control__tag",closable:!0,onClose:()=>b(x.key),disabled:c,children:a.jsxs("div",{className:"sort-status-control__tag-content",children:[a.jsx("div",{className:"sort-status-control__drag-handle",title:"Drag to reorder",children:"â‹®â‹®"}),a.jsx("div",{className:`sort-status-control__priority-badge sort-priority sort-priority--priority-${k+1}`,children:k+1}),a.jsx("span",{className:"sort-status-control__tag-label",children:M(x.key)}),a.jsx("button",{type:"button",className:"sort-status-control__direction-button",onClick:F=>{F.stopPropagation(),v(x.key)},disabled:c,"aria-label":`Toggle sort direction for ${M(x.key)}. Currently ${x.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:a.jsx("span",{className:`sort-status-control__direction-icon sort-status-control__direction-icon--${x.direction}`,children:a.jsx("svg",{className:`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${x.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:a.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})})})]})})},x.key))}),o&&a.jsx("div",{className:"sort-status-control__actions",children:a.jsx(Et,{variant:"secondary",onClick:_,disabled:c,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})})]}),l&&a.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:a.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]})};function jw(t,e){switch(e.type){case"SET_SELECTED_INDEX":return{...t,selectedIndex:e.payload};case"SET_TAB_LOADING":const n=[...t.tabLoadingStates];return n[e.payload.tabIndex]=e.payload.isLoading,{...t,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...t.tabErrors];return r[e.payload.tabIndex]=e.payload.error,{...t,tabErrors:r};case"SET_SORT":return{...t,sortConfig:e.payload};case"SET_SELECTED_ROWS":const i=[...t.selectedRows];return i[e.payload.tabIndex]=e.payload.rowIndices,{...t,selectedRows:i};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...t,globalSelectedRowData:e.payload};case"SET_FILTERS":return{...t,filters:e.payload};case"ADJUST_ARRAYS":const{newLength:s}=e.payload,o=new Array(s).fill(!1),l=new Array(s).fill(null),c=new Array(s).fill([]);for(let u=0;u<Math.min(t.tabLoadingStates.length,s);u++)o[u]=t.tabLoadingStates[u],l[u]=t.tabErrors[u],c[u]=t.selectedRows[u];return{...t,tabLoadingStates:o,tabErrors:l,selectedRows:c};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(t.tabLoadingStates.length).fill(!1),tabErrors:new Array(t.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(t.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return t}}const To=A.forwardRef(function(e,n){const{dataConfig:r={},tabPanels:i,selectedIndex:s,onTabChange:o,onGlobalRowSelectionChange:l,ariaLabel:c,ariaDescription:u,className:d="",disabled:f=!1,orientation:p="horizontal",id:h,isLoading:g=!1,loadingComponent:m,error:y=null,errorComponent:w,"data-testid":M,actions:j,actionsMinGap:v=16,forceActionsAbove:b=!1,hideTabsIfSingle:_=!1,minColumnWidth:N,enableColumnCollapse:C=!1,minVisibleColumns:x=2,showCollapsedColumnsIndicator:k=!0,sortStatusPlacement:F="header"}=e,D=_&&i.length===1,P=A.useId(),I=h??`aria-tabs-datagrid-${P}`,L=typeof u=="string"&&u.trim()!==""&&!/\s/.test(u),E=`${I}-description`,z=`${I}-navigation-help`,{dataComparator:G=(Y,ae)=>JSON.stringify(Y)===JSON.stringify(ae),filterFunction:ee=Y=>Y,booleanRenderer:T=Y=>Y?"âœ“":"âœ—"}=r||{},K=s!==void 0,O=s??0,[B,J]=A.useState({focusArea:D?"headers":"tabs",focusedTabIndex:O,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}),$=A.useMemo(()=>({selectedIndex:O,tabLoadingStates:new Array(i.length).fill(!1),tabErrors:new Array(i.length).fill(null),sortConfig:[],selectedRows:new Array(i.length).fill([]),globalSelectedRowData:null,filters:void 0}),[O]),[R,H]=A.useReducer(jw,$);A.useEffect(()=>{const Y=R.tabLoadingStates.length,ae=i.length;Y!==ae&&H({type:"ADJUST_ARRAYS",payload:{newLength:ae}})},[i.length]),A.useEffect(()=>{K&&H({type:"SET_SELECTED_INDEX",payload:O})},[O,K]),A.useEffect(()=>{J(Y=>({...Y,focusArea:D?"headers":"tabs",focusedTabIndex:R.selectedIndex,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}))},[R.selectedIndex,D]);const q=A.useRef(null),V=A.useCallback(Y=>{Y.shiftKey&&(Y.key==="ArrowLeft"?(Y.preventDefault(),q.current?.scrollBy({left:-64,behavior:"smooth"})):Y.key==="ArrowRight"&&(Y.preventDefault(),q.current?.scrollBy({left:64,behavior:"smooth"})))},[]),[re,fe]=A.useState({}),[X,se]=A.useState(!1),ue=A.useRef(null),_e=A.useRef(null),be=A.useCallback(Y=>{const ae=i[Y];if(!ae)return[];const Ne=re[Y]||new Set;return ae.columns.filter(ke=>!Ne.has(ke.key))},[i,re]),Q=A.useCallback(Y=>{const ae=i[Y];if(!ae)return new Set;if(!C)return new Set;const Ne=q.current?.parentElement;if(!Ne)return new Set;const ke=typeof N=="number"?`${N}px`:N||"160px",Ce=ae.columns.map((Le,He)=>({key:Le.key,min:Le.minWidth!==void 0?typeof Le.minWidth=="number"?`${Le.minWidth}px`:String(Le.minWidth):ke,priority:Le.collapsePriority??He,lock:!!Le.alwaysVisible,group:Le.collapseGroup,groupPriority:Le.collapseGroupPriority??0})),De=Le=>{if(Le.endsWith("px"))return parseFloat(Le);const He=document.createElement("div");He.style.width=Le,Ne.appendChild(He);const vt=He.getBoundingClientRect().width;return He.remove(),vt||0},Te=Ce.reduce((Le,He)=>Le+De(He.min),0),me=Ne.clientWidth;if(Te<=me||Ce.length<=x)return new Set;const Se=Ce.map((Le,He)=>({...Le,idx:He})),oe=new Map;for(const Le of Se)if(Le.group){const He=oe.get(Le.group)||{keys:[],width:0,groupPriority:Le.groupPriority,lock:!1,indices:[]};He.keys.push(Le.key),He.width+=De(Le.min),He.groupPriority=Math.max(He.groupPriority,Le.groupPriority),He.lock=He.lock||Le.lock,He.indices.push(Le.idx),oe.set(Le.group,He)}const ye=[];for(const[Le,He]of oe)He.lock||ye.push({type:"group",keys:He.keys,width:He.width,priority:He.groupPriority,rightmostIndex:Math.max(...He.indices)});for(const Le of Se)!Le.group&&!Le.lock&&ye.push({type:"column",keys:[Le.key],width:De(Le.min),priority:Le.priority,rightmostIndex:Le.idx});ye.sort((Le,He)=>Le.priority!==He.priority?He.priority-Le.priority:He.rightmostIndex-Le.rightmostIndex);let Ie=new Set,Oe=Te;const Pe=Ce.length;for(const Le of ye){if(Pe-Ie.size<=x)break;if(Oe-Le.width>=me){for(const He of Le.keys)Ie.add(He);Oe-=Le.width}else continue}return Ie},[i,C,N,x]);A.useEffect(()=>{if(!C)return;const Y=()=>{const Ne=Q(R.selectedIndex);if(fe(ke=>({...ke,[R.selectedIndex]:Ne})),k&&_e.current){const ke=Ne.size;_e.current.textContent=ke>0?`${ke} column${ke===1?"":"s"} collapsed`:"All columns visible"}};Y();const ae=new ResizeObserver(Y);return ce.current&&ae.observe(ce.current),()=>{ae.disconnect()}},[R.selectedIndex,i,C,Q,k]),A.useEffect(()=>{l&&l(R.globalSelectedRowData)},[R.globalSelectedRowData,l]);const Ge=A.useCallback((Y,ae)=>G(Y,ae),[G]),Fe=A.useCallback(Y=>{Y>=0&&Y<i.length&&!i[Y].disabled&&(H({type:"SET_SELECTED_INDEX",payload:Y}),J(ae=>({...ae,focusedTabIndex:Y,focusArea:"tabs"})),o?.(Y))},[i,o]),Be=A.useRef(!1),ve=A.useCallback((Y,ae)=>{if(!ae?.force&&!Be.current&&Y===0){Be.current=!0;return}Be.current=!0,setTimeout(()=>{const Ne=W.current[Y],ke=Ne?.parentElement;if(Ne&&ke){const Ce=Ne.offsetLeft,De=Ne.offsetWidth,Te=ke.clientWidth,me=Ce-Te/2+De/2;try{ke.scrollTo({left:Math.max(0,me),behavior:"smooth"})}catch{Ne.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}}else process.env.SILENCE_SCROLL_DEBUG||console.debug("[AriaTabsDataGrid] Missing elements for scroll",{tabElementExists:!!Ne,tabListElementExists:!!ke})},50)},[]),W=A.useRef([]),te=A.useRef([]),he=A.useCallback((Y,ae)=>{const Ne=R.sortConfig||[],ke=Ne.find(Te=>Te.key===ae);let Ce;ke?ke.direction==="asc"?Ce=Ne.map(Te=>Te.key===ae?{...Te,direction:"desc"}:Te):Ce=Ne.filter(Te=>Te.key!==ae):Ce=[...Ne,{key:ae,direction:"asc"}],H({type:"SET_SORT",payload:Ce}),i[Y].onSort?.(ae)},[R.sortConfig,i]),ge=A.useCallback(Y=>{setTimeout(()=>{const ae=document.querySelector(`[data-tab-panel="${R.selectedIndex}"] th:nth-child(${Y+1})`);ae&&ae.focus()},0)},[R.selectedIndex]),we=A.useCallback(Y=>T(Y),[T]),U=A.useCallback((Y,ae)=>{setTimeout(()=>{const Ne=document.querySelector(`[data-tab-panel="${R.selectedIndex}"] tbody tr:nth-child(${Y+1}) td:nth-child(${ae+1})`);Ne&&Ne.focus()},0)},[R.selectedIndex]);A.useEffect(()=>{B.isGridActive&&(B.focusArea==="headers"?setTimeout(()=>{ge(B.focusedHeaderIndex)},0):B.focusArea==="cells"&&setTimeout(()=>{U(B.focusedRowIndex,B.focusedColumnIndex)},0))},[B.focusArea,B.isGridActive,B.focusedHeaderIndex,B.focusedRowIndex,B.focusedColumnIndex,ge,U]),A.useEffect(()=>{D||ve(R.selectedIndex)},[R.selectedIndex,ve,D]);const Z=A.useCallback((Y,ae)=>{const{key:Ne}=Y,ke=be(R.selectedIndex).length||0;switch(Ne){case"ArrowLeft":Y.preventDefault();const Ce=Math.max(0,ae-1);J(Se=>({...Se,focusedHeaderIndex:Ce})),ge(Ce);break;case"ArrowRight":Y.preventDefault();const De=Math.min(ke-1,ae+1);J(Se=>({...Se,focusedHeaderIndex:De})),ge(De);break;case"ArrowUp":Y.preventDefault(),D?j&&setTimeout(()=>{const Se=xe.current;if(!Se)return;Se.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus()},0):(J(Se=>({...Se,focusArea:"tabs",focusedTabIndex:R.selectedIndex})),ve(R.selectedIndex),W.current[R.selectedIndex]?.focus());break;case"ArrowDown":Y.preventDefault(),J(Se=>({...Se,focusArea:"cells",focusedRowIndex:0,focusedColumnIndex:ae,isGridActive:!0}));break;case"Home":Y.preventDefault(),J(Se=>({...Se,focusedHeaderIndex:0})),ge(0);break;case"End":Y.preventDefault();const Te=ke-1;J(Se=>({...Se,focusedHeaderIndex:Te})),ge(Te);break;case"Enter":case" ":Y.preventDefault();const me=be(R.selectedIndex)[ae]?.key;me&&he(R.selectedIndex,me);break}},[i,R.selectedIndex,he,J,ge,U,W,be]),le=A.useCallback((Y,ae,Ne)=>{const{key:ke}=Y,Ce=i[R.selectedIndex],De=Ce?.data.length||0,Te=be(R.selectedIndex).length||0;switch(ke){case"ArrowUp":if(Y.preventDefault(),ae===0)J(ye=>({...ye,focusArea:"headers",focusedHeaderIndex:Ne,isGridActive:!1})),ge(Ne);else{const ye=ae-1;J(Ie=>({...Ie,focusedRowIndex:ye})),U(ye,Ne)}break;case"ArrowDown":Y.preventDefault();const me=Math.min(De-1,ae+1);J(ye=>({...ye,focusedRowIndex:me})),U(me,Ne);break;case"ArrowLeft":Y.preventDefault();const Se=Math.max(0,Ne-1);J(ye=>({...ye,focusedColumnIndex:Se})),U(ae,Se);break;case"ArrowRight":Y.preventDefault();const oe=Math.min(Te-1,Ne+1);J(ye=>({...ye,focusedColumnIndex:oe})),U(ae,oe);break;case"Home":Y.preventDefault(),Y.ctrlKey?(J(ye=>({...ye,focusedRowIndex:0,focusedColumnIndex:0})),U(0,0)):(J(ye=>({...ye,focusedColumnIndex:0})),U(ae,0));break;case"End":if(Y.preventDefault(),Y.ctrlKey){const ye=De-1,Ie=Te-1;J(Oe=>({...Oe,focusedRowIndex:ye,focusedColumnIndex:Ie})),U(ye,Ie)}else{const ye=Te-1;J(Ie=>({...Ie,focusedColumnIndex:ye})),U(ae,ye)}break;case"Enter":case" ":if(Y.preventDefault(),Ce&&Ce.data[ae]){const ye=Ce.data.some(Pe=>"ews_data"in Pe)?ee(Ce.data,R.filters):Ce.data,Ie=R.sortConfig;let Oe=ye;if(Ie&&Ie.length>0){const Pe=Hc(Ce.columns,Ie,Ri.Last,r?.sortingOptions);Oe=[...ye].sort(Pe)}if(Oe[ae]){const Pe=Oe[ae],He=R.globalSelectedRowData&&Ge(R.globalSelectedRowData,Pe)?null:Pe;H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:He})}}break}},[i,R.selectedIndex,R.filters,R.sortConfig,ee,Ge,H,J,ge,U,be]),ie=A.useCallback((Y,ae)=>ee(Y,ae),[ee]);if(A.useImperativeHandle(n,()=>({selectTab:Y=>{Y>=0&&Y<i.length&&(H({type:"SET_SELECTED_INDEX",payload:Y}),o?.(Y))},refreshData:Y=>{console.log("Refreshing data for tab:",Y??"all")},exportData:Y=>{const ae=Y??R.selectedIndex,Ne=i[ae];return Ne?Ne.data:[]},getSelectedRows:Y=>R.globalSelectedRowData?[]:[],clearSelection:Y=>{H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:null})},applyFilters:Y=>{H({type:"SET_FILTERS",payload:Y})}}),[R.selectedIndex,R.selectedRows,i,o]),g)return a.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--loading ${d}`,"data-testid":M,children:m||a.jsx("div",{className:"aria-tabs-datagrid__loading",children:a.jsx("div",{className:"nhsuk-spinner",role:"status","aria-label":"Loading data",children:a.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Loading..."})})})});if(y)return a.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--error ${d}`,"data-testid":M,children:w||a.jsxs("div",{className:"aria-tabs-datagrid__error",role:"alert",children:[a.jsx("h3",{className:"nhsuk-error-summary__title",children:"Error loading data"}),a.jsx("p",{children:y})]})});const ce=A.useRef(null),de=A.useRef(null),xe=A.useRef(null),[Me,Ae]=A.useState(!0);A.useEffect(()=>{if(!j){Ae(!1);return}if(D||b){Ae(!1);return}function Y(){if(!ce.current||!de.current||!xe.current)return;const ke=ce.current.clientWidth,Ce=Array.from(de.current.querySelectorAll(":scope > .aria-tabs-datagrid__tab")),De=Ce.reduce((oe,ye)=>oe+ye.offsetWidth,0),Te=xe.current.offsetWidth,me=Math.max(8*(Ce.length-1),0),Se=De+me+Te+v<=ke;Ae(Se)}const ae=requestAnimationFrame(()=>Y()),Ne=new ResizeObserver(()=>Y());return ce.current&&Ne.observe(ce.current),de.current&&Ne.observe(de.current),()=>{cancelAnimationFrame(ae),Ne.disconnect()}},[j,v,b,i.length,D]);const Ye=xe,Ze=A.useCallback(()=>Ye.current?Array.from(Ye.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(Y=>!Y.hasAttribute("disabled")):[],[]),ct=A.useCallback(Y=>{const ae=Ze();if(!ae.length)return;const Ne=Math.max(0,Math.min(Y,ae.length-1));ae[Ne].focus(),J(ke=>({...ke,focusArea:"actions",focusedActionIndex:Ne}))},[Ze]),ze=A.useCallback(()=>ct(0),[ct]),pe=A.useCallback((Y,ae)=>{const{key:Ne}=Y,ke=i.length-1;switch(Ne){case"ArrowUp":{j&&!Me&&(Y.preventDefault(),ze());break}case"ArrowLeft":{Y.preventDefault();const Ce=ae>0?ae-1:ke;Fe(Ce),ve(Ce),W.current[Ce]?.focus();break}case"ArrowRight":{if(Y.preventDefault(),ae===ke&&j&&Me){ze();return}const Ce=ae<ke?ae+1:0;Fe(Ce),ve(Ce),W.current[Ce]?.focus();break}case"ArrowDown":{Y.preventDefault(),J(Ce=>({...Ce,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));break}case"Home":{Y.preventDefault(),Fe(0),ve(0),W.current[0]?.focus();break}case"End":{Y.preventDefault(),Fe(ke),ve(ke),W.current[ke]?.focus();break}case"Enter":case" ":{Y.preventDefault(),Fe(ae);break}case"Tab":{!Y.shiftKey&&ae===ke&&j&&Me&&ze();break}}},[i.length,Fe,ve,j,Me,ze]),$e=A.useCallback(Y=>{const{key:ae}=Y,Ne=Ze();if(!Ne.length)return;const ke=Ne.findIndex(Ce=>Ce===document.activeElement);switch(ae){case"ArrowLeft":{if(Me)if(ke>0)Y.preventDefault(),ct(ke-1);else{Y.preventDefault();const Ce=i.length-1;Fe(Ce),ve(Ce),W.current[Ce]?.focus(),J(De=>({...De,focusArea:"tabs",focusedTabIndex:Ce}))}break}case"ArrowRight":{Me&&(ke<Ne.length-1?(Y.preventDefault(),ct(ke+1)):(Y.preventDefault(),Fe(0),ve(0),W.current[0]?.focus(),J(Ce=>({...Ce,focusArea:"tabs",focusedTabIndex:0}))));break}case"ArrowDown":{if(Me)Y.preventDefault(),J(Ce=>({...Ce,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));else{Y.preventDefault();const Ce=R.selectedIndex;W.current[Ce]?.focus(),J(De=>({...De,focusArea:"tabs",focusedTabIndex:Ce}))}break}}},[Ze,Me,ct,i.length,Fe,ve,R.selectedIndex]);return a.jsxs("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--${p} ${d}`,id:h,"data-testid":M,ref:ce,children:[u&&!L&&a.jsx("div",{id:E,className:"nhsuk-u-visually-hidden",children:u}),a.jsx("div",{className:"aria-tabs-datagrid__navigation-help sr-only",id:z,children:"Keyboard navigation: Use Tab to move between tabs and grid. Arrow keys navigate within tabs and grid cells. Enter activates tabs and sorts columns. Arrow Down from tabs moves to table headers. Arrow Down from headers moves to table cells. Use Arrow keys to navigate between cells."}),F==="header"&&a.jsx(Ps,{sortConfig:R.sortConfig||[],columns:i.flatMap(Y=>Y.columns.map(ae=>({key:ae.key,label:ae.label}))).filter((Y,ae,Ne)=>Ne.findIndex(ke=>ke.key===Y.key)===ae),onSortChange:Y=>{H({type:"SET_SORT",payload:Y})},ariaLabel:"Data grid sort configuration"}),j&&(!Me||D)&&a.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above",ref:xe,role:"toolbar","aria-label":"Additional actions",onKeyDown:$e,children:j}),!D&&a.jsxs("div",{className:`aria-tabs-datagrid__tabs-wrapper ${Me?"aria-tabs-datagrid__tabs-wrapper--inline-actions":""}`,children:[a.jsx("div",{role:"tablist","aria-label":c,"aria-describedby":u?L?u:E:z,"aria-orientation":p,className:"aria-tabs-datagrid__tabs",ref:de,children:i.map((Y,ae)=>{const Ne=ae===R.selectedIndex,ke=Y.disabled||f;return a.jsxs("button",{role:"tab",id:`tab-${Y.id}`,"aria-controls":`panel-${Y.id}`,"aria-selected":Ne,"aria-disabled":ke,tabIndex:Ne?0:-1,ref:Ce=>{W.current[ae]=Ce},onClick:()=>Fe(ae),onKeyDown:Ce=>pe(Ce,ae),disabled:ke,className:["aria-tabs-datagrid__tab",Ne?"aria-tabs-datagrid__tab--selected":"",ke?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[a.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:Y.label}),R.tabLoadingStates[ae]&&a.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),R.tabErrors[ae]&&a.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},Y.id)})}),j&&Me&&a.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline",ref:xe,role:"toolbar","aria-label":"Additional actions",onKeyDown:$e,children:j})]}),C&&k&&(()=>{const Y=D?0:R.selectedIndex,ae=re[Y]||new Set;if(ae.size===0)return null;const Ne=i[Y],ke=Ne?Ne.columns.filter(Ce=>ae.has(Ce.key)).map(Ce=>Ce.label):[];return a.jsxs("div",{className:"aria-tabs-datagrid__collapsed-indicator",children:[a.jsx("div",{className:"nhsuk-u-visually-hidden","aria-live":"polite",ref:_e}),a.jsxs("div",{className:"collapsed-chip-wrapper",children:[a.jsxs("button",{ref:ue,type:"button",className:"collapsed-chip",title:`Collapsed columns: ${ke.join(", ")}`,onClick:()=>se(Ce=>!Ce),children:[ae.size," hidden column",ae.size===1?"":"s"]}),X&&a.jsx("div",{className:"collapsed-popover",role:"dialog","aria-label":"Collapsed columns",children:a.jsx("ul",{children:ke.map((Ce,De)=>a.jsx("li",{children:Ce},De))})})]})]})})(),F==="above"&&a.jsx(Ps,{sortConfig:R.sortConfig||[],columns:i.flatMap(Y=>Y.columns.map(ae=>({key:ae.key,label:ae.label}))).filter((Y,ae,Ne)=>Ne.findIndex(ke=>ke.key===Y.key)===ae),onSortChange:Y=>{H({type:"SET_SORT",payload:Y})},ariaLabel:"Data grid sort configuration"}),i.map((Y,ae)=>{const Ne=D?ae===0:ae===R.selectedIndex;return a.jsx("div",{role:D?void 0:"tabpanel",id:D?void 0:`panel-${Y.id}`,"aria-labelledby":D?void 0:`tab-${Y.id}`,tabIndex:0,hidden:!Ne,ref:ke=>{te.current[ae]=ke},className:`aria-tabs-datagrid__panel ${Y.className||""}`,"data-tab-panel":ae,children:Ne&&(()=>{const ke=Y.data.some(De=>"ews_data"in De)?ie(Y.data,R.filters):Y.data,Ce=A.useMemo(()=>{const De=R.sortConfig;if(!De||De.length===0)return ke;const Te=Hc(Y.columns,De,Ri.Last,r?.sortingOptions);return[...ke].sort(Te)},[ke,R.sortConfig,Y.columns,r?.sortingOptions]);return a.jsx("div",{className:"aria-tabs-datagrid__scroll",ref:q,onKeyDown:V,style:{"--atd-min-col-w":typeof N=="number"?`${N}px`:N||void 0},children:a.jsxs("table",{className:"nhsuk-table aria-tabs-datagrid__grid",role:"grid","aria-label":Y.ariaLabel,"aria-describedby":Y.ariaDescription?`panel-${Y.id}-description`:void 0,children:[Y.ariaDescription&&a.jsx("caption",{className:"nhsuk-u-visually-hidden",id:`panel-${Y.id}-description`,children:Y.ariaDescription}),a.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:a.jsx("tr",{role:"row",children:be(ae).map((De,Te)=>{const me=R.sortConfig?.find(ye=>ye.key===De.key),Se=!!me,oe=B.focusArea==="headers"&&B.focusedHeaderIndex===Te;return a.jsx("th",{className:`sortable-header ${oe?"sortable-header--focused":""} ${Se?"sortable-header--sorted":""}`,role:"columnheader",tabIndex:oe?0:-1,onClick:()=>he(ae,De.key),onKeyDown:ye=>Z(ye,Te),"aria-sort":Se?me?.direction==="asc"?"ascending":"descending":"none",style:{minWidth:De.minWidth!==void 0?typeof De.minWidth=="number"?`${De.minWidth}px`:De.minWidth:typeof N=="number"?`${N}px`:N||void 0},children:a.jsxs("div",{className:"header-content",children:[a.jsx("span",{className:"header-label",children:De.label}),a.jsxs("div",{className:`sort-indicator-container ${Se?`sort-indicator--${me?.direction}`:""}`,children:[R.sortConfig&&R.sortConfig.length>0&&R.sortConfig.findIndex(ye=>ye.key===De.key)!==-1&&a.jsx("span",{className:`sort-priority sort-priority--priority-${R.sortConfig.findIndex(ye=>ye.key===De.key)+1}`,"data-priority":R.sortConfig.findIndex(ye=>ye.key===De.key)+1,title:`Sort priority: ${R.sortConfig.findIndex(ye=>ye.key===De.key)+1}`,children:R.sortConfig.findIndex(ye=>ye.key===De.key)+1}),Se&&a.jsx("svg",{className:`nhsuk-icon sort-arrow sort-arrow--${me?.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:a.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})]})]})},De.key)})})}),a.jsx("tbody",{className:"nhsuk-table__body",role:"rowgroup",children:Ce.map((De,Te)=>{const me=R.globalSelectedRowData&&Ge(R.globalSelectedRowData,De),Se=B.focusArea==="cells"&&B.focusedRowIndex===Te;return a.jsx("tr",{role:"row",className:`data-row ${me?"data-row--selected":""} ${Se?"data-row--focused":""}`,"aria-selected":me,children:be(ae).map((oe,ye)=>{const Ie=De[oe.key];let Oe;oe.tableRenderer?Oe=oe.tableRenderer(De):oe.render?Oe=oe.render(De):Oe=Ie;const Pe=B.focusArea==="cells"&&B.focusedRowIndex===Te&&B.focusedColumnIndex===ye,Le=()=>{if(oe.customRenderer){const He=oe.customRenderer(Ie,De);return a.jsx("span",{className:"data-cell__custom","data-custom-rendered":"true",children:He})}return typeof Ie=="boolean"&&Oe===Ie?a.jsxs(a.Fragment,{children:[we(Ie),a.jsx("span",{className:"nhsuk-u-visually-hidden",children:Ie?"Yes":"No"})]}):A.isValidElement(Oe)||typeof Oe!="object"?Oe??"":Oe};return a.jsx("td",{role:"gridcell",className:`data-cell ${Pe?"data-cell--focused":""}`,tabIndex:Pe?0:-1,style:{minWidth:oe.minWidth!==void 0?typeof oe.minWidth=="number"?`${oe.minWidth}px`:oe.minWidth:typeof N=="number"?`${N}px`:N||void 0},onClick:()=>{const vt=R.globalSelectedRowData&&Ge(R.globalSelectedRowData,De)?null:De;H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:vt})},onKeyDown:He=>le(He,Te,ye),children:Le()},oe.key)})},Te)})})]})})})()},Y.id)}),F==="below"&&a.jsx(Ps,{sortConfig:R.sortConfig||[],columns:i.flatMap(Y=>Y.columns.map(ae=>({key:ae.key,label:ae.label}))).filter((Y,ae,Ne)=>Ne.findIndex(ke=>ke.key===Y.key)===ae),onSortChange:Y=>{H({type:"SET_SORT",payload:Y})},ariaLabel:"Data grid sort configuration"})]})}),Do={asc:"â†‘",desc:"â†“"},Tw=t=>[...t].sort((e,n)=>e.priority-n.priority);function Rc(t){return t.map((e,n)=>({...e,priority:n}))}function Dw(t){return t.length>0?Math.max(...t.map(e=>e.priority)):-1}function Iw(t,e){const n=e.find(r=>r.id===t);return n?n.priority>0:!1}function Lw(t,e){const n=e.find(i=>i.id===t),r=Dw(e);return n?n.priority<r:!1}const Aw=({sortConfig:t,onSortChange:e,className:n="",emptyDescription:r="No sorting applied",activeDescription:i,showReset:s=!0,showHelp:o=!0,disabled:l=!1,ariaLabel:c="Sort configuration",ariaDescribedBy:u})=>{const d=A.useMemo(()=>Tw(t),[t]),f=A.useCallback(M=>{if(l)return;const j=t.map(v=>v.id===M?{...v,direction:v.direction==="asc"?"desc":"asc"}:v);e(j)},[t,e,l]),p=A.useCallback(M=>{if(l)return;const j=t.findIndex(b=>b.id===M);if(j<=0)return;const v=[...t];[v[j],v[j-1]]=[v[j-1],v[j]],e(Rc(v))},[t,e,l]),h=A.useCallback(M=>{if(l)return;const j=t.findIndex(b=>b.id===M);if(j>=t.length-1||j===-1)return;const v=[...t];[v[j],v[j+1]]=[v[j+1],v[j]],e(Rc(v))},[t,e,l]),g=A.useCallback(M=>{if(l)return;const j=t.filter(v=>v.id!==M);e(Rc(j))},[t,e,l]),m=A.useCallback(()=>{l||e([])},[e,l]),y=()=>{if(t.length===0)return r;if(i)return i;const M=d.map((j,v)=>{const b=j.direction==="asc"?"ascending":"descending";return`${v+1}. ${j.label} (${b})`});if(M.length===1)return`Sorted by: ${M[0]}`;if(M.length===2)return`Sorted by: ${M.join(" and ")}`;{const j=M.pop();return`Sorted by: ${M.join(", ")}, and ${j}`}},w=A.useMemo(()=>{const M=["sort-description"];return o&&M.push("sort-help"),u&&M.push(u),M.join(" ")},[o,u]);return t.length===0?a.jsx("div",{className:`sort-status-control sort-status-control--empty ${n}`,children:a.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:y()})}):a.jsxs("div",{className:`sort-status-control ${n}`,children:[a.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:y()}),a.jsxs("div",{className:"sort-status-control__tags",role:"list","aria-label":c,"aria-describedby":w,children:[a.jsx("div",{className:"sort-status-control__tags-label",children:"Current sorting:"}),d.map(M=>a.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",children:a.jsx(pt,{text:"",color:"blue",className:"sort-status-control__tag",closable:!0,onClose:()=>g(M.id),disabled:l,children:a.jsxs("div",{className:"sort-status-control__tag-content",children:[a.jsx("span",{className:"sort-status-control__tag-priority",children:M.priority+1}),a.jsx("span",{className:"sort-status-control__tag-label",children:M.label}),a.jsx("button",{type:"button",className:"sort-status-control__tag-direction",onClick:()=>f(M.id),disabled:l,"aria-label":`Toggle sort direction for ${M.label}. Currently ${M.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:M.direction==="asc"?Do.asc:Do.desc}),a.jsxs("div",{className:"sort-status-control__tag-actions",children:[a.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>p(M.id),disabled:l||!Iw(M.id,t),"aria-label":`Move ${M.label} sort up in priority`,title:"Move up in priority",children:"â–²"}),a.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>h(M.id),disabled:l||!Lw(M.id,t),"aria-label":`Move ${M.label} sort down in priority`,title:"Move down in priority",children:"â–¼"})]})]})})},M.id))]}),s&&a.jsx("div",{className:"sort-status-control__actions",children:a.jsx(Et,{variant:"secondary",onClick:m,disabled:l,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})}),o&&a.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:a.jsxs("small",{children:["Click ",Do.asc,"/",Do.desc," ","to toggle ascending/descending. Use â–²/â–¼ to change sort priority. Click Ã— to remove a sort."]})})]})},Io=(t,e)=>e.map(n=>({id:n.id,label:n.label,data:n.filter?n.filter(t):t,columns:n.columns.map(r=>({key:r.key,label:r.label,render:r.render,customRenderer:r.customRenderer})),sortConfig:n.sortConfig,ariaLabel:n.ariaLabel||`${n.label} Data Grid`,ariaDescription:n.ariaDescription||`Data grid showing ${n.label.toLowerCase()}`,className:n.className,disabled:n.disabled})),Uc=[{value:!0,icon:a.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"100%",height:"34",children:a.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})})},{value:!1,icon:a.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"100%",height:"34",children:[a.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),a.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]})}],Ew=(t,e)=>!t||!e?t===e:t.name&&t.bed_name&&e.name&&e.bed_name?t.name===e.name&&t.bed_name===e.bed_name:JSON.stringify(t)===JSON.stringify(e),Pw=(t,e)=>e?t.filter(n=>{if(e.ewsScoreRange){const[r,i]=e.ewsScoreRange;if(n.ews_score<r||n.ews_score>i)return!1}return!(e.wards&&e.wards.length>0&&!e.wards.includes(n.ward_name)||e.specialties&&e.specialties.length>0&&!e.specialties.includes(n.speciality)||e.dischargeStatuses&&e.dischargeStatuses.length>0&&!e.dischargeStatuses.includes(n.early_discharge_notification)||e.avpuLevels&&e.avpuLevels.length>0&&!e.avpuLevels.includes(n.ews_data.avpu)||e.medicallyOptimised!==null&&e.medicallyOptimised!==void 0&&n.medically_optimised!==e.medicallyOptimised||e.fastTrack!==null&&e.fastTrack!==void 0&&n.fast_track!==e.fastTrack)}):t,Fw=t=>{if(typeof t=="boolean"){const n=Uc.find(r=>r.value===t);return n?n.icon:null}const e=Uc.find(n=>n.value===t);return e?e.icon:String(t)},$w=t=>`${t.name}-${t.bed_name}`,Bw=()=>({overview:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"bed_name",label:"Bed"},{key:"ews_score",label:"EWS Score"},{key:"speciality",label:"Specialty"},{key:"consultant",label:"Consultant"}],vitals:[{key:"name",label:"Patient Name"},{key:"ews_score",label:"EWS Score"},{key:"respiratory_rate_bpm",label:"Respiratory Rate",render:t=>t.ews_data.respiratory_rate_bpm},{key:"sp02",label:"SpO2 %",render:t=>t.ews_data.sp02},{key:"temperature",label:"Temperature Â°C",render:t=>t.ews_data.temperature},{key:"systolic_bp",label:"Systolic BP",render:t=>t.ews_data.systolic_bp},{key:"heart_rate",label:"Heart Rate",render:t=>t.ews_data.heart_rate},{key:"avpu",label:"AVPU",render:t=>t.ews_data.avpu.toUpperCase()}],discharge:[{key:"name",label:"Patient Name"},{key:"anticipated_discharge_date",label:"Anticipated Discharge",render:t=>new Date(t.anticipated_discharge_date).toLocaleDateString()},{key:"early_discharge_notification",label:"Discharge Status"},{key:"medically_optimised",label:"Medically Optimised"},{key:"criteria_to_reside",label:"Criteria to Reside"},{key:"fast_track",label:"Fast Track"},{key:"transport_status",label:"Transport Status"},{key:"pathway",label:"Pathway"}],logistics:[{key:"name",label:"Patient Name"},{key:"ward_name",label:"Ward"},{key:"room_name",label:"Room"},{key:"bed_name",label:"Bed"},{key:"bed_type",label:"Bed Type"},{key:"transport_booking",label:"Transport Booked"},{key:"transport_mobility",label:"Transport Type"},{key:"district_nurse_referral",label:"District Nurse"},{key:"equipment",label:"Equipment"}]}),zw=t=>{const e=Bw();return[{id:"overview",label:"Patient Overview",data:t,columns:e.overview,ariaLabel:"Patient Overview Data Grid",ariaDescription:"Overview of all patients with basic information"},{id:"vitals",label:"Vital Signs & EWS",data:t,columns:e.vitals,sortConfig:[{key:"ews_score",direction:"desc"},{key:"name",direction:"asc"},{key:"ward_name",direction:"asc"}],ariaLabel:"Patient Vital Signs Data Grid",ariaDescription:"Patient vital signs and Early Warning Scores"},{id:"discharge",label:"Discharge Planning",data:t.filter(n=>n.anticipated_discharge_date),columns:e.discharge,sortConfig:[{key:"anticipated_discharge_date",direction:"asc"},{key:"discharge_status",direction:"desc"}],ariaLabel:"Discharge Planning Data Grid",ariaDescription:"Patient discharge planning and status information"},{id:"logistics",label:"Bed Management",data:t,columns:e.logistics,sortConfig:[{key:"ward_name",direction:"asc"}],ariaLabel:"Bed Management Data Grid",ariaDescription:"Patient location and logistics information"}]},dp={dataComparator:Ew,filterFunction:Pw,booleanRenderer:Fw,getDataId:$w};function fp(t,e,n){const{primaryField:r,secondaryFields:i=[],badges:s=[],hiddenFields:o=[],getPriority:l,getVariant:c,fieldRenderers:u={},classPrefix:d="adaptive-card"}=n,f=e.find(j=>j.key===r),p=f?.cardRenderer?f.cardRenderer(t):f?.render?f.render(t):t[r||"name"]||"Untitled",h=()=>i.filter(v=>!o.includes(v)&&t[v]).slice(0,3).map(v=>{const b=e.find(x=>x.key===v),_=t[v],N=u[v]?u[v](_,t):b?.cardRenderer?b.cardRenderer(t):b?.render?b.render(t):_;return`${b?.label||v}: ${N}`}).join(" â€¢ "),g=()=>s.length===0?null:s.filter(j=>t[j.fieldKey]!==void 0).map(j=>{const v=t[j.fieldKey],b=j.render?j.render(v,t):v;return`<span class="nhsuk-tag ${Ow(j,v)}">${b}</span>`}).join(""),m=()=>c?c(t):l?.(t)==="high"?"primary":"default",y=g(),w=h(),M=y?`${w}${y?`<div class="adaptive-card__badges">${y}</div>`:""}`:w;return{variant:m(),heading:String(p),descriptionHtml:M,className:`adaptive-card ${d}`,"aria-label":`Record for ${p}`}}function Ow(t,e){const n=t.className||"adaptive-card__badge";if(t.fieldKey==="ews_score"||t.fieldKey.includes("score")){const r=Number(e);return r>=7?`${n} nhsuk-tag--red`:r>=3?`${n} nhsuk-tag--yellow`:`${n} nhsuk-tag--green`}if(t.fieldKey==="priority"){const r=String(e).toLowerCase();if(r==="high")return`${n} nhsuk-tag--red`;if(r==="medium")return`${n} nhsuk-tag--yellow`;if(r==="low")return`${n} nhsuk-tag--green`}if(t.fieldKey==="status"){const r=String(e).toLowerCase();if(r==="urgent"||r==="critical")return`${n} nhsuk-tag--red`;if(r==="pending"||r==="warning")return`${n} nhsuk-tag--yellow`;if(r==="completed"||r==="success")return`${n} nhsuk-tag--green`}switch(t.color){case"primary":return`${n} nhsuk-tag--blue`;case"secondary":return`${n} nhsuk-tag--grey`;case"success":return`${n} nhsuk-tag--green`;case"warning":return`${n} nhsuk-tag--yellow`;case"danger":return`${n} nhsuk-tag--red`;default:return n}}const Hw={primaryField:"name",secondaryFields:["id","description","status"],badges:[{fieldKey:"priority",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__status-badge"}],hiddenFields:[],getPriority:t=>t.priority||"medium",getStatus:t=>t.status||"active",getVariant:t=>t.priority==="high"?"primary":"default",fieldRenderers:{},classPrefix:"adaptive-card--generic"},Wc=({data:t,columns:e,onSelect:n,onAction:r,priority:i="medium",status:s="active"})=>{const o=t.name,l=t.age,c=t.ward_name,u=t.bed_name,d=t.ews_score,f=t.speciality,p=t.consultant;return a.jsxs("div",{className:`healthcare-card healthcare-card--patient healthcare-card--${i} healthcare-card--${s}`,onClick:()=>n?.(t),role:"button",tabIndex:0,"aria-label":`Patient record for ${o}, Age ${l}, Ward ${c}, Bed ${u}`,children:[a.jsxs("div",{className:"healthcare-card__header",children:[a.jsxs("div",{className:"healthcare-card__identity",children:[a.jsx("h3",{className:"healthcare-card__patient-name",children:o}),a.jsxs("p",{className:"healthcare-card__age-info",children:[a.jsx("span",{className:"healthcare-card__label",children:"Age: "}),a.jsx("span",{className:"healthcare-card__value",children:l})]})]}),a.jsx("div",{className:"healthcare-card__badges",children:d!==void 0&&a.jsxs(pt,{color:Uw(hp(d)),className:"healthcare-card__alert",children:["EWS: ",d]})})]}),a.jsx("div",{className:"healthcare-card__body",children:a.jsxs("dl",{className:"healthcare-card__details",children:[a.jsxs("div",{className:"healthcare-card__detail",children:[a.jsx("dt",{children:"Ward"}),a.jsx("dd",{children:c})]}),a.jsxs("div",{className:"healthcare-card__detail",children:[a.jsx("dt",{children:"Bed"}),a.jsx("dd",{children:u})]}),a.jsxs("div",{className:"healthcare-card__detail",children:[a.jsx("dt",{children:"Specialty"}),a.jsx("dd",{children:f})]}),a.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--prominent",children:[a.jsx("dt",{children:"Consultant"}),a.jsx("dd",{children:p})]})]})}),a.jsxs("div",{className:"healthcare-card__actions",children:[a.jsx(Et,{variant:"secondary",className:"healthcare-card__action",onClick:h=>{h.stopPropagation(),r?.("view-notes",t)},children:"Notes"}),a.jsx(Et,{variant:"secondary",className:"healthcare-card__action",onClick:h=>{h.stopPropagation(),r?.("view-vitals",t)},children:"Vitals"}),a.jsx(Et,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:h=>{h.stopPropagation(),r?.("view-full",t)},children:"View Full Record"})]})]})},Gc=({data:t,onAction:e})=>a.jsxs("div",{className:"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[a.jsxs("div",{className:"healthcare-card__header",children:[a.jsxs("div",{className:"healthcare-card__time-info",children:[a.jsx("h3",{className:"healthcare-card__time",children:new Date(t.appointment_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),a.jsx("p",{className:"healthcare-card__type",children:t.appointment_type})]}),a.jsxs("div",{className:"healthcare-card__badges",children:[a.jsx(pt,{color:Ww(t.status||"active"),className:"healthcare-card__status",children:(t.status||"active").charAt(0).toUpperCase()+(t.status||"active").slice(1)}),a.jsxs(pt,{color:"grey",className:"healthcare-card__duration",children:[t.duration||"30"," min"]})]})]}),a.jsx("div",{className:"healthcare-card__body",children:a.jsxs("dl",{className:"healthcare-card__details",children:[a.jsxs("div",{className:"healthcare-card__detail",children:[a.jsx("dt",{children:"Patient"}),a.jsx("dd",{children:t.patient_name})]}),a.jsxs("div",{className:"healthcare-card__detail",children:[a.jsx("dt",{children:"Consultant"}),a.jsx("dd",{children:t.consultant})]}),a.jsxs("div",{className:"healthcare-card__detail",children:[a.jsx("dt",{children:"Location"}),a.jsx("dd",{children:t.location})]})]})}),a.jsxs("div",{className:"healthcare-card__actions",children:[a.jsx(Et,{variant:"secondary",size:"small",onClick:()=>e?.("view",t),children:"View Details"}),a.jsx(Et,{variant:"primary",size:"small",onClick:()=>e?.("edit",t),children:"Reschedule"})]})]}),Yc=({data:t,onAction:e})=>a.jsxs("div",{className:"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[a.jsxs("div",{className:"healthcare-card__header",children:[a.jsxs("div",{className:"healthcare-card__medication-info",children:[a.jsx("h3",{className:"healthcare-card__medication-name",children:t.medication}),a.jsxs("p",{className:"healthcare-card__dose",children:[t.dose," â€¢ ",t.frequency]})]}),a.jsxs("div",{className:"healthcare-card__badges",children:[a.jsx(pt,{color:"blue",className:"healthcare-card__route",children:t.route}),t.next_due&&a.jsxs(pt,{color:"red",className:"healthcare-card__warning",children:["Due: ",new Date(t.next_due).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),a.jsx("div",{className:"healthcare-card__body",children:a.jsxs("dl",{className:"healthcare-card__details",children:[a.jsxs("div",{className:"healthcare-card__detail",children:[a.jsx("dt",{children:"Patient"}),a.jsx("dd",{children:t.patient_name})]}),a.jsxs("div",{className:"healthcare-card__detail",children:[a.jsx("dt",{children:"Prescriber"}),a.jsx("dd",{children:t.prescriber})]}),t.allergies&&a.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--urgent",children:[a.jsx("dt",{children:"Allergies"}),a.jsx("dd",{children:t.allergies})]})]})}),a.jsxs("div",{className:"healthcare-card__actions",children:[a.jsx(Et,{variant:"secondary",size:"small",onClick:()=>e?.("view",t),children:"View Details"}),a.jsx(Et,{variant:"primary",size:"small",onClick:()=>e?.("edit",t),children:"Adjust Dose"})]})]}),Vc=({data:t,onSelect:e,onAction:n,priority:r="medium"})=>{const i=t.name,s=t.ews_score,o=t.ews_data?.respiratory_rate_bpm,l=t.ews_data?.sp02,c=t.ews_data?.temperature,u=t.ews_data?.systolic_bp,d=t.ews_data?.heart_rate,f=t.ews_data?.avpu;return a.jsxs("div",{className:`healthcare-card healthcare-card--vitals healthcare-card--${r}`,onClick:()=>e?.(t),role:"button",tabIndex:0,"aria-label":`Vital signs for ${i}, EWS Score ${s}`,children:[a.jsxs("div",{className:"healthcare-card__header",children:[a.jsxs("div",{className:"healthcare-card__vitals-summary",children:[a.jsx("h3",{className:"healthcare-card__patient-name",children:i}),s!==void 0&&a.jsxs("p",{className:`healthcare-card__ews-score healthcare-card__ews-score--${Rw(s)}`,children:["EWS: ",s]})]}),a.jsx("div",{className:"healthcare-card__badges",children:f&&a.jsxs(pt,{color:"blue",className:"healthcare-card__avpu",children:["AVPU: ",f.toUpperCase()]})})]}),a.jsx("div",{className:"healthcare-card__body",children:a.jsxs("div",{className:"healthcare-card__vitals-grid",children:[o!==void 0&&a.jsxs("div",{className:"healthcare-card__vital",children:[a.jsx("span",{className:"healthcare-card__vital-label",children:"Respiratory Rate"}),a.jsxs("span",{className:"healthcare-card__vital-value",children:[o," bpm"]})]}),l!==void 0&&a.jsxs("div",{className:"healthcare-card__vital",children:[a.jsx("span",{className:"healthcare-card__vital-label",children:"SpO2"}),a.jsxs("span",{className:"healthcare-card__vital-value",children:[l,"%"]})]}),c!==void 0&&a.jsxs("div",{className:"healthcare-card__vital",children:[a.jsx("span",{className:"healthcare-card__vital-label",children:"Temperature"}),a.jsxs("span",{className:"healthcare-card__vital-value",children:[c,"Â°C"]})]}),u!==void 0&&a.jsxs("div",{className:"healthcare-card__vital",children:[a.jsx("span",{className:"healthcare-card__vital-label",children:"Systolic BP"}),a.jsx("span",{className:"healthcare-card__vital-value",children:u})]}),d!==void 0&&a.jsxs("div",{className:"healthcare-card__vital",children:[a.jsx("span",{className:"healthcare-card__vital-label",children:"Heart Rate"}),a.jsxs("span",{className:"healthcare-card__vital-value",children:[d," bpm"]})]})]})}),a.jsxs("div",{className:"healthcare-card__actions",children:[a.jsx(Et,{variant:"secondary",className:"healthcare-card__action",onClick:p=>{p.stopPropagation(),n?.("view-trend",t)},children:"Trend"}),a.jsx(Et,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:p=>{p.stopPropagation(),n?.("record-new",t)},children:"Record New"})]})]})};function hp(t){const e=typeof t=="string"?parseInt(t,10):t;return e>=7?"critical":e>=5?"high":e>=3?"medium":"low"}function Rw(t){return hp(t)}function Uw(t){switch(t){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"grey";default:return"grey"}}function Ww(t){switch(t.toLowerCase()){case"active":return"blue";case"pending":return"orange";case"completed":return"green";case"cancelled":return"grey";default:return"blue"}}const Gw=[{fieldKey:"ews_score",render:t=>`EWS: ${t}`,className:"adaptive-card__ews-badge",color:"default"},{fieldKey:"priority",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__status-badge"}],pp=t=>t.ews_score&&Number(t.ews_score)>=7?"high":t.ews_score&&Number(t.ews_score)>=3?"medium":t.priority==="high"||t.status==="urgent"?"high":t.priority==="low"?"low":"medium",mp={name:"healthcare",defaultCardConfig:{primaryField:"name",secondaryFields:["nhs_number","ward","condition","consultant"],badges:Gw,hiddenFields:[],getPriority:pp,getStatus:t=>{if(t.status){const e=t.status.toLowerCase();if(["active","pending","completed","cancelled","urgent"].includes(e))return e}return"active"},getVariant:t=>pp(t)==="high"||t.status==="urgent"?"primary":"default",fieldRenderers:{nhs_number:t=>t?`NHS: ${t}`:"",ews_score:t=>{const e=Number(t),n=e>=7?"HIGH":e>=3?"MEDIUM":"LOW";return`EWS: ${t} (${n})`},age:(t,e)=>e.dob?`${new Date().getFullYear()-new Date(e.dob).getFullYear()}y`:t?`${t}y`:""},classPrefix:"adaptive-card--healthcare"},cssImport:"./HealthcareCardTemplates.scss",cardTemplates:{patient:(t,e,n)=>{const r=n.getPriority?.(t)||"medium",i=n.getStatus?.(t)||"active",s=i==="urgent"?"active":i;return a.jsx(Wc,{data:t,columns:e,priority:r,status:s,onSelect:o=>console.log("Patient selected:",o),onAction:(o,l)=>console.log("Patient action:",o,l)})},appointment:(t,e,n)=>{const r=n.getStatus?.(t)||"pending",i=r==="urgent"?"pending":r;return a.jsx(Gc,{data:t,columns:e,status:i,onSelect:s=>console.log("Appointment selected:",s),onAction:(s,o)=>console.log("Appointment action:",s,o)})},medication:(t,e,n)=>{const r=n.getPriority?.(t)||"medium";return a.jsx(Yc,{data:t,columns:e,priority:r,onSelect:i=>console.log("Medication selected:",i),onAction:(i,s)=>console.log("Medication action:",i,s)})},vitals:(t,e,n)=>{const r=n.getPriority?.(t)||"medium";return a.jsx(Vc,{data:t,columns:e,priority:r,onSelect:i=>console.log("Vitals selected:",i),onAction:(i,s)=>console.log("Vitals action:",i,s)})}},fieldTypes:{isNHSNumber:t=>typeof t=="string"&&/^\d{3}\s?\d{3}\s?\d{4}$/.test(t.replace(/\s/g,"")),isEWSScore:t=>typeof t=="number"&&t>=0&&t<=20,isMedicalDate:t=>typeof t=="string"&&!isNaN(Date.parse(t))}};function gp(t){return{primaryField:t?.primaryField||"name",secondaryFields:t?.secondaryFields||[],badges:t?.badgeFields?.map(e=>({fieldKey:e,className:"adaptive-card__badge"}))||[],hiddenFields:t?.hiddenFields||[],cardTemplate:t?.cardTemplate?(e,n,r)=>t.cardTemplate(e,n):void 0,classPrefix:"adaptive-card--generic"}}function yp(t){if(!t||t.length===0)return!1;const e=t[0];return e.ews_score!==void 0||e.nhs_number!==void 0||e.patient_name!==void 0||e.ward!==void 0||e.consultant!==void 0}function Yw(t,e){switch(e.type){case"SET_SELECTED_INDEX":return{...t,selectedIndex:e.payload};case"SET_TAB_LOADING":const n=[...t.tabLoadingStates];return n[e.payload.tabIndex]=e.payload.isLoading,{...t,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...t.tabErrors];return r[e.payload.tabIndex]=e.payload.error,{...t,tabErrors:r};case"SET_SORT":return{...t,sortConfig:e.payload};case"SET_SELECTED_ROWS":const i=[...t.selectedRows];return i[e.payload.tabIndex]=e.payload.rowIndices,{...t,selectedRows:i};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...t,globalSelectedRowData:e.payload};case"SET_FILTERS":return{...t,filters:e.payload};case"ADJUST_ARRAYS":const{newLength:s}=e.payload,o=new Array(s).fill(!1),l=new Array(s).fill(null),c=new Array(s).fill([]);for(let u=0;u<Math.min(t.tabLoadingStates.length,s);u++)o[u]=t.tabLoadingStates[u],l[u]=t.tabErrors[u],c[u]=t.selectedRows[u];return{...t,tabLoadingStates:o,tabErrors:l,selectedRows:c};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(t.tabLoadingStates.length).fill(!1),tabErrors:new Array(t.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(t.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return t}}function Vw(t,e){const[n,r]=A.useState("cards");return A.useEffect(()=>{if(e){r(e);return}const i=()=>{const s=window.innerWidth;s<t.mobile?r("cards"):s<t.desktop?r("hybrid"):r("table")};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[t,e]),n}function Zw(t){return!t||typeof t!="object"?null:t.appointment_type||t.appointment_time||t.clinic?"appointment":t.medication_name||t.medication||t.dose||t.frequency?"medication":t.ews_score!==void 0||t.respiratory_rate!==void 0||t.spo2!==void 0||t.temperature!==void 0||t.systolic_bp!==void 0||t.heart_rate!==void 0?"vitals":t.name||t.patient_name||t.nhs_number||t.ward||t.bed?"patient":null}function qw(t,e,n,r){const i=r?{...r.defaultCardConfig,...n}:{...Hw,...n};if(r&&r.cardTemplates){const s=Zw(t);if(s&&r.cardTemplates[s]){const o=r.cardTemplates[s](t,e,i);if(o)return{variant:"default",children:o}}}return i.cardTemplate&&i.cardTemplate(t,e,i),fp(t,e,i)}const Zc=({breakpoints:t={mobile:768,tablet:1024,desktop:1200},forceLayout:e,cardConfig:n={},experimental:r={},enableAdvancedSorting:i=!1,topActions:s,bottomActions:o,gridActions:l,forceGridActionsAbove:c,hideTabsIfSingle:u,minColumnWidth:d,enableColumnCollapse:f,minVisibleColumns:p,showCollapsedColumnsIndicator:h,sortStatusPlacement:g,tabPanels:m,dataConfig:y,selectedIndex:w,onTabChange:M,ariaLabel:j="Data grid",ariaDescription:v,orientation:b="horizontal",id:_,disabled:N=!1,className:C,...x})=>{const k=Vw(t,e),F=w!==void 0,D=w??0,P=A.useMemo(()=>{if(m.some(Z=>Z.data&&Z.data.length>0&&yp(Z.data))){const Z=gp(n);return{...mp.defaultCardConfig,...Z}}else return gp(n)},[n,m]),I=A.useMemo(()=>m.some(Z=>Z.data&&Z.data.length>0&&yp(Z.data))?mp:void 0,[m]),L=A.useMemo(()=>({selectedIndex:D,tabLoadingStates:new Array(m.length).fill(!1),tabErrors:new Array(m.length).fill(null),sortConfig:[],selectedRows:new Array(m.length).fill([]),globalSelectedRowData:null,filters:void 0}),[D,m.length]),[E,z]=A.useReducer(Yw,L),G=A.useRef([]),ee=A.useRef([]),T=A.useRef([]),K=A.useRef(null),[O,B]=A.useState({focusArea:u&&m.length===1?"sort-controls":"tabs",focusedTabIndex:0,focusedCardIndex:0,selectedCardIndex:-1,isGridActive:!1,focusedCardElementIndex:0,cardElements:[],isCardNavigationActive:!1,gridColumns:1,gridRows:1,cardSortConfig:null,focusedSortControlIndex:0,isSortControlsActive:!1}),J=A.useCallback(U=>{if(!U.current)return{columns:1,rows:0};const Z=U.current,le=Z.querySelectorAll(".aria-tabs-datagrid-adaptive__card-wrapper");if(le.length===0)return{columns:1,rows:0};const ie=Z.offsetWidth,de=le[0].offsetWidth,xe=Math.floor(ie/de)||1,Me=Math.ceil(le.length/xe);return{columns:xe,rows:Me}},[]),$=A.useCallback((U,Z)=>({row:Math.floor(U/Z),col:U%Z}),[]),R=A.useCallback((U,Z,le)=>U*le+Z,[]),H=A.useCallback((U,Z,le,ie)=>{const{row:ce,col:de}=$(U,ie);let xe=ce,Me=de;switch(Z){case"up":xe=Math.max(0,ce-1);break;case"down":xe=Math.min(Math.floor((le-1)/ie),ce+1);break;case"left":Me=Math.max(0,de-1);break;case"right":Me=Math.min(ie-1,de+1);break}const Ae=R(xe,Me,ie);return Math.min(Ae,le-1)},[$,R]);A.useEffect(()=>{O.isCardNavigationActive&&O.focusedCardElementIndex>=0&&O.cardElements.length>0&&setTimeout(()=>{const U=O.cardElements[O.focusedCardElementIndex];U&&(U.element.focus(),U.element.scrollIntoView({block:"nearest",behavior:"smooth"}))},0)},[O.isCardNavigationActive,O.focusedCardElementIndex,O.cardElements.length]),A.useEffect(()=>{const U=()=>{if(k==="cards"&&K.current){const{columns:ie,rows:ce}=J(K);B(de=>({...de,gridColumns:ie,gridRows:ce}))}},Z=setTimeout(U,200),le=()=>{setTimeout(U,100)};return window.addEventListener("resize",le),()=>{clearTimeout(Z),window.removeEventListener("resize",le)}},[k,m,J]),A.useEffect(()=>{const U=E.tabLoadingStates.length,Z=m.length;U!==Z&&z({type:"ADJUST_ARRAYS",payload:{newLength:Z}})},[m.length,E.tabLoadingStates.length]),A.useEffect(()=>{F&&w!==E.selectedIndex&&z({type:"SET_SELECTED_INDEX",payload:w})},[F,w,E.selectedIndex]);const q=A.useCallback(U=>{U>=0&&U<m.length&&!m[U].disabled&&(z({type:"SET_SELECTED_INDEX",payload:U}),M?.(U))},[m,M]),V=A.useCallback(U=>{console.log("Card selected:",U),z({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:U})},[]),re=A.useCallback(U=>{const Z=ee.current[U];Z&&(Z.focus(),Z.scrollIntoView({block:"nearest",behavior:"smooth"}))},[]),fe=A.useCallback(U=>{const Z=ee.current[U];if(!Z)return[];const le=['button:not([disabled]):not([aria-hidden="true"])','a[href]:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','select:not([disabled]):not([aria-hidden="true"])','textarea:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])','.healthcare-card__detail[tabindex]:not([tabindex="-1"])',".healthcare-card__action:not([disabled])",".tag:not([disabled])"].join(", "),ie=Z.querySelectorAll(le);return Array.from(ie).map((ce,de)=>({id:ce.id||`card-${U}-element-${de}`,element:ce,label:ce.getAttribute("aria-label")||ce.textContent?.trim()||ce.getAttribute("title")||`Element ${de+1}`,type:ce.tagName.toLowerCase()==="button"?"button":ce.tagName.toLowerCase()==="a"?"link":["input","select","textarea"].includes(ce.tagName.toLowerCase())?"input":"generic"}))},[]),X=A.useRef(null),se=A.useCallback(U=>{const Z=X.current;if(!Z)return;const le=document.createElement("div");le.setAttribute("aria-live","polite"),le.setAttribute("aria-atomic","true"),le.className="sr-only",le.textContent=U,Z.appendChild(le),setTimeout(()=>{Z.contains(le)&&Z.removeChild(le)},1e3)},[]),ue=A.useCallback(U=>{const Z=U.filter(ie=>ie.sortable!==!1),le=[{value:"",label:"Sort by..."}];return Z.forEach(ie=>{const ce=ie.label||ie.key;ie.key==="name"?le.push({value:`${ie.key}-asc`,label:`${ce} (A-Z)`},{value:`${ie.key}-desc`,label:`${ce} (Z-A)`}):ie.key==="ews_score"||ie.key.includes("score")?le.push({value:`${ie.key}-desc`,label:`${ce} (High-Low)`},{value:`${ie.key}-asc`,label:`${ce} (Low-High)`}):ie.key==="age"||ie.key.includes("date")||ie.key.includes("time")?le.push({value:`${ie.key}-desc`,label:`${ce} (Oldest-Youngest)`},{value:`${ie.key}-asc`,label:`${ce} (Youngest-Oldest)`}):le.push({value:`${ie.key}-asc`,label:`${ce} (A-Z)`},{value:`${ie.key}-desc`,label:`${ce} (Z-A)`})}),le},[]),_e=A.useCallback((U,Z)=>Z?[...U].sort((le,ie)=>{const ce=le[Z.key],de=ie[Z.key];if(ce==null&&de==null)return 0;if(ce==null)return 1;if(de==null)return-1;const xe=Number(ce),Me=Number(de);if(!isNaN(xe)&&!isNaN(Me))return Z.direction==="asc"?xe-Me:Me-xe;const Ae=String(ce).toLowerCase(),Ye=String(de).toLowerCase(),Ze=Ae.localeCompare(Ye);return Z.direction==="asc"?Ze:-Ze}):U,[]),be=A.useCallback(U=>{if(!U){B(Ae=>({...Ae,cardSortConfig:null})),se("Card sorting cleared");return}const[Z,le]=U.split("-"),ie={key:Z,direction:le};B(Ae=>({...Ae,cardSortConfig:ie}));const xe=m[E.selectedIndex]?.columns.find(Ae=>Ae.key===Z)?.label||Z;se(`Cards sorted by ${xe} in ${le==="asc"?"ascending":"descending"} order`)},[m,E.selectedIndex,se]),Q=A.useCallback(U=>{const ie=m[E.selectedIndex]?.columns.find(de=>de.key===U.key)?.label||U.key,ce=U.direction==="asc"?"ascending":"descending";return`${ie} (${ce})`},[m,E.selectedIndex]),Ge=A.useCallback(U=>{const Z=m[E.selectedIndex];if(i){const le=E.sortConfig;return!le||le.length===0?U:[...U].sort((ie,ce)=>{for(const{key:de,direction:xe}of le){let Me=ie[de],Ae=ce[de];const Ye=Z?.columns.find(Y=>Y.key===de);if(Ye?.cardRenderer?(Me=Ye.cardRenderer(ie),Ae=Ye.cardRenderer(ce)):Ye?.render&&(Me=Ye.render(ie),Ae=Ye.render(ce)),Me==null&&Ae==null)continue;if(Me==null)return xe==="asc"?-1:1;if(Ae==null)return xe==="asc"?1:-1;const Ze=Number(Me),ct=Number(Ae);if(!isNaN(Ze)&&!isNaN(ct)){const Y=Ze-ct;if(Y!==0)return xe==="asc"?Y:-Y;continue}const ze=String(Me).toLowerCase(),pe=String(Ae).toLowerCase(),$e=ze.localeCompare(pe);if($e!==0)return xe==="asc"?$e:-$e}return 0})}else return _e(U,O.cardSortConfig)},[i,E.sortConfig,O.cardSortConfig,_e,m,E.selectedIndex]),Fe=A.useCallback((U,Z)=>{const le=fe(U),ie=le[Z];if(ie){ie.element.scrollIntoView({block:"nearest",behavior:"smooth"});const ce=`Focused on ${ie.label}, ${ie.type} ${Z+1} of ${le.length} within card`;se(ce)}},[fe,se]),Be=A.useCallback(U=>{G.current[U]?.focus()},[]),ve=A.useCallback(()=>{const U=T.current[0];if(!U)return[];const Z=['select:not([disabled]):not([aria-hidden="true"])','button:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])'].join(", "),le=U.querySelectorAll(Z);return Array.from(le)},[]),W=A.useCallback(U=>{if(U===0){const Z=T.current[0],le=Z?.querySelector(".sort-controls-row");if(le){le.setAttribute("tabindex","-1"),le.focus();const ce=`Sort controls group with ${ve().length} interactive elements. Press Enter or Space to begin navigating controls.`;se(ce)}else Z&&Z.focus()}else{const Z=ve(),le=U-1,ie=Z[le];if(ie){ie.focus();const ce=ie.tagName.toLowerCase()==="select",de=ie.tagName.toLowerCase()==="button",xe=ce?"dropdown":de?"button":"control",Me=ce?". Use Space key to open dropdown":"",Ae=`${xe} ${le+1} of ${Z.length}${Me}`;se(Ae)}}},[ve,se]),te=A.useCallback((U,Z)=>{const{key:le}=U,ie=m[E.selectedIndex],ce=ie?.data.length||0;if(le==="ArrowLeft"&&U.shiftKey){U.preventDefault(),U.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(le==="ArrowRight"&&U.shiftKey){U.preventDefault(),U.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!O.isCardNavigationActive){switch(le){case"ArrowUp":if(U.preventDefault(),Z===0)B(Ae=>({...Ae,focusArea:"sort-controls",focusedSortControlIndex:0,isSortControlsActive:!1})),W(0);else{const Ae=H(Z,"up",ce,O.gridColumns);Ae!==Z&&(B(Ye=>({...Ye,focusedCardIndex:Ae})),re(Ae),se(`Moved to card ${Ae+1} of ${ce}`))}break;case"ArrowDown":U.preventDefault();const de=H(Z,"down",ce,O.gridColumns);de!==Z&&(B(Ae=>({...Ae,focusedCardIndex:de})),re(de),se(`Moved to card ${de+1} of ${ce}`));break;case"ArrowLeft":U.preventDefault();const xe=H(Z,"left",ce,O.gridColumns);xe!==Z?(B(Ae=>({...Ae,focusedCardIndex:xe})),re(xe),se(`Moved to card ${xe+1} of ${ce}`)):E.selectedIndex>0&&(z({type:"SET_SELECTED_INDEX",payload:E.selectedIndex-1}),B(Ae=>({...Ae,focusArea:"tabs"})),setTimeout(()=>Be(E.selectedIndex-1),0));break;case"ArrowRight":U.preventDefault();const Me=H(Z,"right",ce,O.gridColumns);Me!==Z?(B(Ae=>({...Ae,focusedCardIndex:Me})),re(Me),se(`Moved to card ${Me+1} of ${ce}`)):E.selectedIndex<m.length-1&&(z({type:"SET_SELECTED_INDEX",payload:E.selectedIndex+1}),B(Ae=>({...Ae,focusArea:"tabs"})),setTimeout(()=>Be(E.selectedIndex+1),0));break;case"Enter":if(ie?.data[Z]){U.preventDefault(),B(Ye=>({...Ye,selectedCardIndex:Z}));const Ae=fe(Z);Ae.length>0?(B(Ye=>({...Ye,focusArea:"card",isCardNavigationActive:!0,focusedCardElementIndex:0,cardElements:Ae,selectedCardIndex:Z})),se(`Card ${Z+1} selected and navigation activated. ${Ae.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`)):se(`Card ${Z+1} selected.`)}break;case" ":if(ie?.data[Z]){U.preventDefault(),B(Ye=>({...Ye,selectedCardIndex:Ye.selectedCardIndex===Z?-1:Z}));const Ae=O.selectedCardIndex===Z;se(`Card ${Z+1} ${Ae?"deselected":"selected"}.`)}break}return}switch(le){case"ArrowUp":case"ArrowLeft":U.preventDefault();const de=Math.max(0,O.focusedCardElementIndex-1);B(Ye=>({...Ye,focusedCardElementIndex:de})),Fe(Z,de);break;case"ArrowDown":case"ArrowRight":U.preventDefault();const xe=Math.min(O.cardElements.length-1,O.focusedCardElementIndex+1);B(Ye=>({...Ye,focusedCardElementIndex:xe})),Fe(Z,xe);break;case"Enter":U.preventDefault();const Me=O.cardElements[O.focusedCardElementIndex];Me&&(Me.element.click(),se(`Activated ${Me.label}`));break;case" ":U.preventDefault();const Ae=O.cardElements[O.focusedCardElementIndex];if(Ae){const Ye=new MouseEvent("dblclick",{bubbles:!0});Ae.element.dispatchEvent(Ye),se(`Double-clicked ${Ae.label}`)}break;case"Escape":U.preventDefault(),B(Ye=>({...Ye,focusArea:"cards",isCardNavigationActive:!1,focusedCardElementIndex:0,cardElements:[]})),setTimeout(()=>re(Z),0),se("Exited card navigation, returned to card level");break;case"Home":U.preventDefault(),O.cardElements.length>0&&(B(Ye=>({...Ye,focusedCardElementIndex:0})),Fe(Z,0));break;case"End":if(U.preventDefault(),O.cardElements.length>0){const Ye=O.cardElements.length-1;B(Ze=>({...Ze,focusedCardElementIndex:Ye})),Fe(Z,Ye)}break}},[O,E.selectedIndex,m,V,re,Be,B,fe,Fe,se]),he=A.useCallback(U=>{const Z=G.current[U],le=Z?.parentElement;if(!Z||!le){console.log("Tab or container not found for mobile scroll");return}const ie=Z.getBoundingClientRect(),ce=le.getBoundingClientRect();ie.left>=ce.left&&ie.right<=ce.right||(console.log("Tab not visible, scrolling into view (mobile)"),Z.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[]),ge=A.useCallback((U,Z)=>{if(k!=="cards")return;const{key:le}=U;switch(le){case"ArrowLeft":U.preventDefault();const ie=Z>0?Z-1:m.length-1;q(ie),B(Me=>({...Me,focusedTabIndex:ie})),G.current[ie]?.focus(),he(ie);break;case"ArrowRight":U.preventDefault();const ce=Z<m.length-1?Z+1:0;q(ce),B(Me=>({...Me,focusedTabIndex:ce})),G.current[ce]?.focus(),he(ce);break;case"ArrowDown":U.preventDefault();const de=m[E.selectedIndex];de&&de.columns&&de.columns.length>0?(B(Me=>({...Me,focusArea:"sort-controls",focusedSortControlIndex:0})),W(0)):(B(Me=>({...Me,focusArea:"cards",focusedCardIndex:0})),re(0));break;case"Home":U.preventDefault(),q(0),B(Me=>({...Me,focusedTabIndex:0})),G.current[0]?.focus(),he(0);break;case"End":U.preventDefault();const xe=m.length-1;q(xe),B(Me=>({...Me,focusedTabIndex:xe})),G.current[xe]?.focus(),he(xe);break;case"Enter":case" ":U.preventDefault(),q(Z);break}},[m.length,q,k,re,B,he]),we=A.useCallback((U,Z)=>{if(k!=="cards")return;const{key:le}=U,ie=m[E.selectedIndex];if(Z===0&&!O.isSortControlsActive){switch(le){case"ArrowUp":U.preventDefault(),B(de=>({...de,focusArea:"tabs",isSortControlsActive:!1})),Be(E.selectedIndex);break;case"ArrowDown":U.preventDefault(),ie?.data&&ie.data.length>0&&(B(de=>({...de,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),re(0));break;case"Enter":case" ":U.preventDefault();const ce=ve();if(ce.length>0){B(xe=>({...xe,isSortControlsActive:!0,focusedSortControlIndex:1})),W(1);const de=`Entered sort controls navigation mode. ${ce.length} controls available. Use arrow keys to navigate between controls.`;se(de)}break;case"Escape":U.preventDefault(),B(de=>({...de,isSortControlsActive:!1,focusArea:"tabs"})),Be(E.selectedIndex);break}return}if(O.isSortControlsActive){const de=ve().length;switch(le){case"ArrowLeft":U.preventDefault();const xe=O.focusedSortControlIndex>1?O.focusedSortControlIndex-1:de;B(Ae=>({...Ae,focusedSortControlIndex:xe})),W(xe);break;case"ArrowRight":U.preventDefault();const Me=O.focusedSortControlIndex<de?O.focusedSortControlIndex+1:1;B(Ae=>({...Ae,focusedSortControlIndex:Me})),W(Me);break;case"ArrowDown":if(U.preventDefault(),O.isSortControlsActive){const Ae=O.focusedSortControlIndex<de?O.focusedSortControlIndex+1:1;B(Ye=>({...Ye,focusedSortControlIndex:Ae})),W(Ae)}else ie?.data&&ie.data.length>0&&(B(Ae=>({...Ae,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),re(0));break;case"ArrowUp":U.preventDefault(),B(Ae=>({...Ae,isSortControlsActive:!1,focusArea:"sort-controls"})),W(0);break;case"Escape":U.preventDefault(),B(Ae=>({...Ae,isSortControlsActive:!1,focusArea:"sort-controls",focusedSortControlIndex:0})),W(0);break}}},[k,m,E.selectedIndex,O.isSortControlsActive,O.focusedSortControlIndex,W,Be,re,B,se]);if(k==="cards"){const U=!!u&&m.length===1,Z=U?m[0]:m[E.selectedIndex];return a.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${C||""}`,children:[a.jsxs("div",{className:"aria-tabs-datagrid-adaptive__header",children:[!U&&a.jsx("div",{role:"tablist","aria-label":j,"aria-describedby":`${v||""} ${_?`${_}-navigation-help`:""}`.trim(),"aria-orientation":b,className:"aria-tabs-datagrid__tabs",children:m.map((le,ie)=>{const ce=ie===E.selectedIndex,de=le.disabled||N;return a.jsxs("button",{role:"tab",id:`tab-${le.id}`,"aria-controls":`panel-${le.id}`,"aria-selected":ce,"aria-disabled":de,tabIndex:ce?0:-1,ref:xe=>{G.current[ie]=xe},onClick:()=>q(ie),onKeyDown:xe=>ge(xe,ie),disabled:de,className:["aria-tabs-datagrid__tab",ce?"aria-tabs-datagrid__tab--selected":"",de?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[a.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:le.label}),E.tabLoadingStates[ie]&&a.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),E.tabErrors[ie]&&a.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},le.id)})}),s&&a.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions",children:s})]}),Z&&Z.columns&&a.jsx(a.Fragment,{children:i?a.jsx(a.Fragment,{children:(!g||g==="header"||g==="above")&&a.jsx(Ps,{sortConfig:E.sortConfig||[],columns:Z.columns.map(le=>({key:le.key,label:le.label})),onSortChange:le=>{z({type:"SET_SORT",payload:le})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls"})}):a.jsx("div",{className:"aria-tabs-datagrid-adaptive__sort-controls",role:"region","aria-label":"Sort controls",tabIndex:O.focusArea==="sort-controls"?0:-1,ref:le=>{T.current[0]=le},onKeyDown:le=>we(le,0),children:a.jsxs("div",{className:"sort-controls-row",children:[a.jsxs("div",{className:"sort-select-container",children:[a.jsx("label",{htmlFor:`card-sort-${Z.id}`,className:"sort-label",children:"Sort cards by"}),a.jsx(ws,{id:`card-sort-${Z.id}`,name:`card-sort-${Z.id}`,value:O.cardSortConfig?`${O.cardSortConfig.key}-${O.cardSortConfig.direction}`:"",onChange:le=>be(le.target.value),className:"sort-select",children:ue(Z.columns).map(le=>a.jsx("option",{value:le.value,children:le.label},le.value))})]}),O.cardSortConfig&&a.jsxs("div",{className:"sort-indicator",role:"status","aria-live":"polite",children:[a.jsxs("span",{className:"sort-indicator-text",children:["Sorted by ",Q(O.cardSortConfig)]}),a.jsx(Et,{variant:"secondary",size:"small",onClick:()=>be(""),"aria-label":"Clear card sorting",className:"sort-clear-button",children:"Clear"})]})]})})}),a.jsx("div",{ref:K,className:"aria-tabs-datagrid-adaptive__cards",role:"grid","aria-label":`${Z?.label||"Data"} cards in ${O.gridRows} rows and ${O.gridColumns} columns`,"aria-rowcount":O.gridRows,"aria-colcount":O.gridColumns,id:`panel-${Z?.id}`,"aria-labelledby":`tab-${Z?.id}`,children:Ge(Z?.data||[]).map((le,ie)=>{const ce=O.selectedCardIndex===ie,de=O.focusedCardIndex===ie&&O.focusArea==="cards",xe=O.focusedCardIndex===ie&&O.focusArea==="card"&&O.isCardNavigationActive,Me=ie===0&&O.focusArea!=="cards",Ae=de||Me,Ye=$(ie,O.gridColumns);if(n.cardTemplate){const ze=n.cardTemplate(le,Z.columns);return a.jsx("div",{role:"row","aria-rowindex":Ye.row+1,className:"aria-tabs-datagrid-adaptive__row",children:a.jsx("div",{ref:pe=>{ee.current[ie]=pe},className:["aria-tabs-datagrid-adaptive__card-wrapper",ce?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",de?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",xe?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":Ye.col+1,"aria-selected":ce,"aria-expanded":xe,"aria-description":xe?`Card navigation active. ${O.cardElements.length} interactive elements available.`:void 0,tabIndex:Ae?0:-1,onClick:()=>{B(pe=>({...pe,selectedCardIndex:pe.selectedCardIndex===ie?-1:ie})),V(le)},onKeyDown:pe=>te(pe,ie),onFocus:()=>{B(pe=>pe.isCardNavigationActive?pe:pe.focusedCardIndex!==ie||pe.focusArea!=="cards"?{...pe,focusedCardIndex:ie,focusArea:"cards"}:pe)},children:ze})},`card-${ie}`)}const Ze=qw(le,Z.columns,P,I),ct=[Ze.className||"",ce?"aria-tabs-datagrid-adaptive__card--selected":"",de?"aria-tabs-datagrid-adaptive__card--focused":"",xe?"aria-tabs-datagrid-adaptive__card--card-navigation":""].filter(Boolean).join(" ");return a.jsx("div",{role:"row","aria-rowindex":Ye.row+1,className:"aria-tabs-datagrid-adaptive__row",children:a.jsx("div",{className:["aria-tabs-datagrid-adaptive__card-wrapper",ce?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",de?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",xe?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":Ye.col+1,"aria-selected":ce,"aria-expanded":xe,onKeyDown:ze=>{ze.key==="Enter"&&(ze.preventDefault(),B(pe=>({...pe,selectedCardIndex:ie}))),te(ze,ie)},children:a.jsx(Oc,{...Ze,ref:ze=>{ee.current[ie]=ze},className:ct,"aria-label":`${Ze["aria-label"]||Ze.heading}. ${xe?`Card navigation active with ${O.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.`:"Press Enter to navigate within card elements."}`,tabIndex:Ae?0:-1,onClick:()=>{B(ze=>({...ze,selectedCardIndex:ze.selectedCardIndex===ie?-1:ie})),V(le)},onKeyDown:ze=>te(ze,ie),onFocus:()=>{O.isCardNavigationActive||B(ze=>ze.focusedCardIndex!==ie||ze.focusArea!=="cards"?{...ze,focusedCardIndex:ie,focusArea:"cards",focusedCardElementIndex:0,cardElements:[]}:ze)}})})},`card-${ie}`)})}),i&&g==="below"&&Z&&Z.columns&&a.jsx(Ps,{sortConfig:E.sortConfig||[],columns:Z.columns.map(le=>({key:le.key,label:le.label})),onSortChange:le=>{z({type:"SET_SORT",payload:le})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls aria-tabs-datagrid-adaptive__advanced-sort-controls--below"}),o&&a.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o}),a.jsx("div",{ref:X,className:"aria-tabs-datagrid-adaptive__announcements","aria-hidden":"true",style:{position:"fixed",top:"-1px",left:"-1px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0,padding:0,margin:0}})]})}return k==="hybrid"?a.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${C||""}`,children:[s&&a.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:s}),a.jsx(To,{tabPanels:m,dataConfig:y,ariaLabel:j,ariaDescription:v,orientation:b,id:_,disabled:N,selectedIndex:w,onTabChange:M,className:"aria-tabs-datagrid-adaptive__table--hybrid",actions:l,forceActionsAbove:c,hideTabsIfSingle:u,minColumnWidth:d,enableColumnCollapse:f,minVisibleColumns:p,showCollapsedColumnsIndicator:h,sortStatusPlacement:g,...x}),o&&a.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o})]}):a.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${C||""}`,children:[s&&a.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:s}),a.jsx(To,{tabPanels:m,dataConfig:y,ariaLabel:j,ariaDescription:v,orientation:b,id:_,disabled:N,selectedIndex:w,onTabChange:M,actions:l,forceActionsAbove:c,hideTabsIfSingle:u,minColumnWidth:d,enableColumnCollapse:f,minVisibleColumns:p,showCollapsedColumnsIndicator:h,sortStatusPlacement:g,...x}),o&&a.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o})]})},bp=t=>{const e=Uc.find(n=>n.value===t);return e?e.icon:null},Xw={ecommerce:{name:"E-commerce",description:"Product catalogs with pricing, inventory, and ratings",dataConfig:{dataComparator:(t,e)=>t.id===e.id,filterFunction:(t,e)=>e?t.filter(n=>{if(e.priceRange){const[r,i]=e.priceRange,s=n.discountedPrice||n.price;if(s<r||s>i)return!1}return!(e.categories&&e.categories.length>0&&!e.categories.includes(n.category)||e.inStock!==void 0&&n.inStock!==e.inStock||e.minRating!==void 0&&n.rating<e.minRating||e.tags&&e.tags.length>0&&!e.tags.some(r=>n.tags.includes(r)))}):t,booleanRenderer:t=>bp(t),getDataId:t=>`ecommerce-${t.id}`},createTabs:t=>Io(t,[{id:"all-products",label:"All Products",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Price",render:n=>n.discountedPrice?`$${n.price.toFixed(2)} â†’ $${n.discountedPrice.toFixed(2)}`:`$${n.price.toFixed(2)}`},{key:"inStock",label:"Availability"},{key:"category",label:"Category"},{key:"rating",label:"Rating",render:n=>`${n.rating}/5 (${n.reviews} reviews)`}],ariaLabel:"All Products Grid",ariaDescription:"Complete product catalog with pricing and availability"},{id:"on-sale",label:"On Sale",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Original Price",render:n=>`$${n.price.toFixed(2)}`},{key:"discountedPrice",label:"Sale Price",render:n=>`$${n.discountedPrice?.toFixed(2)||"N/A"}`},{key:"discount",label:"Discount",render:n=>n.discountedPrice?`${((n.price-n.discountedPrice)/n.price*100).toFixed(0)}% OFF`:"N/A"}],filter:n=>n.filter(r=>r.discountedPrice!==void 0),ariaLabel:"Sale Products Grid",ariaDescription:"Products currently on sale with discounted pricing"},{id:"high-rated",label:"Top Rated",columns:[{key:"name",label:"Product Name"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.rating>=4),sortConfig:[{key:"rating",direction:"desc"}],ariaLabel:"Top Rated Products Grid",ariaDescription:"Highest rated products with 4+ star ratings"}])},financial:{name:"Financial",description:"Transaction data with amounts, categories, and statuses",dataConfig:{dataComparator:(t,e)=>t.id===e.id,filterFunction:(t,e)=>e?t.filter(n=>{if(e.dateRange){const[r,i]=e.dateRange;if(n.date<r||n.date>i)return!1}if(e.amountRange){const[r,i]=e.amountRange;if(Math.abs(n.amount)<r||Math.abs(n.amount)>i)return!1}return!(e.types&&e.types.length>0&&!e.types.includes(n.type)||e.categories&&e.categories.length>0&&!e.categories.includes(n.category)||e.pending!==void 0&&n.pending!==e.pending)}):t,booleanRenderer:t=>bp(t),getDataId:t=>`financial-${t.id}`},createTabs:t=>Io(t,[{id:"all-transactions",label:"All Transactions",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"},{key:"pending",label:"Status"}],sortConfig:[{key:"date",direction:"desc"}],ariaLabel:"All Transactions Grid",ariaDescription:"Complete transaction history with amounts and categories"},{id:"credits",label:"Credits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`+$${n.amount.toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="credit"),ariaLabel:"Credit Transactions Grid",ariaDescription:"Incoming payments and credits only"},{id:"debits",label:"Debits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`-$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="debit"),ariaLabel:"Debit Transactions Grid",ariaDescription:"Outgoing payments and charges only"},{id:"pending",label:"Pending",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"type",label:"Type"}],filter:n=>n.filter(r=>r.pending),ariaLabel:"Pending Transactions Grid",ariaDescription:"Transactions awaiting processing"}])}},xp=(t,e)=>{const n=Xw[t];return{dataConfig:n.dataConfig,tabPanels:n.createTabs(e)}},vp=[{name:"Sarah Johnson",age:34,ews_data:{respiratory_rate_bpm:16,sp02:98,temperature:36.8,systolic_bp:140,heart_rate:82,avpu:"alert"},ews_score:3,ward_name:"Cardiology",room_name:"Room A",bed_name:"A-1",bed_type:"bed",admin_note:"Hypertension monitoring",pathway:"Standard",speciality:"Cardiology",consultant:"Dr. Smith",local_authority:"NHS Trust",early_discharge_notification:"not_required",needs_based_assessment:!1,medically_optimised:!0,criteria_to_reside:!0,date_medically_optimised:"2024-01-15",anticipated_discharge_date:"2024-01-18",dru_suitability:!1,optica_planned_discharge_date:"2024-01-18",optica_date_confirmed:"2024-01-16",dsum:null,medications_tta:"None required",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!1,initial_therapy_contact:"",equipment:"None",district_nurse_referral:!1},{name:"Michael Chen",age:67,ews_data:{respiratory_rate_bpm:20,sp02:94,temperature:37.2,systolic_bp:160,heart_rate:95,avpu:"alert"},ews_score:7,ward_name:"Surgery",room_name:"Room B",bed_name:"B-3",bed_type:"bed",admin_note:"Post-operative monitoring",pathway:"Surgical",speciality:"General Surgery",consultant:"Dr. Johnson",local_authority:"NHS Trust",early_discharge_notification:"due",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!0,date_medically_optimised:"2024-01-17",anticipated_discharge_date:"2024-01-20",dru_suitability:!0,optica_planned_discharge_date:"2024-01-20",optica_date_confirmed:"2024-01-16",dsum:"Complex discharge",medications_tta:"Pain management",transport_booking:!0,transport_status:"In Progress",transport_date:"2024-01-20",transport_mobility:"Wheelchair",fast_track:!1,initial_therapy_contact:"2024-01-17",equipment:"Walking frame",district_nurse_referral:!0},{name:"Emma Thompson",age:28,ews_data:{respiratory_rate_bpm:24,sp02:90,temperature:38.5,systolic_bp:110,heart_rate:105,avpu:"alert"},ews_score:5,ward_name:"Respiratory",room_name:"Room C",bed_name:"C-2",bed_type:"bed",admin_note:"Pneumonia treatment",pathway:"Respiratory",speciality:"Respiratory Medicine",consultant:"Dr. Williams",local_authority:"NHS Trust",early_discharge_notification:"overdue",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!1,date_medically_optimised:"",anticipated_discharge_date:"2024-01-22",dru_suitability:!1,optica_planned_discharge_date:"2024-01-22",optica_date_confirmed:"",dsum:null,medications_tta:"Antibiotics",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!0,initial_therapy_contact:"",equipment:"Oxygen",district_nurse_referral:!1}],Jw=[{id:"appt-001",appointment_time:"2024-01-18T09:00:00Z",patient_name:"Sarah Johnson",appointment_type:"Cardiology Consultation",consultant:"Dr. Smith",location:"Clinic Room 3",duration:30,status:"pending"},{id:"appt-002",appointment_time:"2024-01-18T10:30:00Z",patient_name:"Michael Davis",appointment_type:"Post-op Follow-up",consultant:"Dr. Johnson",location:"Surgery Ward",duration:15,status:"active"},{id:"appt-003",appointment_time:"2024-01-18T14:00:00Z",patient_name:"Emma Thompson",appointment_type:"Respiratory Assessment",consultant:"Dr. Wilson",location:"Emergency Department",duration:45,status:"pending"}],Kw=[{id:"med-001",medication:"Amlodipine",dose:"5mg",frequency:"Once daily",route:"Oral",next_due:"2024-01-18T08:00:00Z",prescriber:"Dr. Smith",patient_name:"Sarah Johnson",allergies:null,priority:"medium"},{id:"med-002",medication:"Morphine",dose:"10mg",frequency:"Every 4 hours",route:"IV",next_due:"2024-01-18T10:00:00Z",prescriber:"Dr. Johnson",patient_name:"Michael Davis",allergies:"Codeine allergy",priority:"high"},{id:"med-003",medication:"Salbutamol",dose:"2 puffs",frequency:"As needed",route:"Inhaled",next_due:"2024-01-18T12:00:00Z",prescriber:"Dr. Wilson",patient_name:"Emma Thompson",allergies:null,priority:"high"}],Qw=[{id:"vitals-001",patient_name:"Sarah Johnson",recorded_time:"2024-01-18T07:30:00Z",temperature:36.8,blood_pressure:"140/90",heart_rate:82,respiratory_rate:16,oxygen_saturation:98,ews_score:3,priority:"medium"},{id:"vitals-002",patient_name:"Michael Davis",recorded_time:"2024-01-18T08:15:00Z",temperature:37.2,blood_pressure:"130/85",heart_rate:98,respiratory_rate:20,oxygen_saturation:95,ews_score:7,priority:"high"},{id:"vitals-003",patient_name:"Emma Thompson",recorded_time:"2024-01-18T09:00:00Z",temperature:38.5,blood_pressure:"110/70",heart_rate:105,respiratory_rate:24,oxygen_saturation:90,ews_score:9,priority:"high"}],_p=[{id:"PROD001",name:"Wireless Headphones",price:199.99,discountedPrice:149.99,inStock:!0,category:"Electronics",rating:4.5,reviews:1247,tags:["wireless","bluetooth","premium"]},{id:"PROD002",name:"Running Shoes",price:129.99,inStock:!0,category:"Sports",rating:4.8,reviews:892,tags:["running","athletic","comfortable"]},{id:"PROD003",name:"Coffee Maker",price:89.99,discountedPrice:59.99,inStock:!1,category:"Kitchen",rating:4.2,reviews:456,tags:["kitchen","coffee","appliance"]},{id:"PROD004",name:"Smartphone Case",price:24.99,inStock:!0,category:"Accessories",rating:4,reviews:234,tags:["protection","mobile","durable"]}],wp=[{id:"TXN001",date:new Date("2024-01-15"),amount:2500,type:"credit",category:"Salary",description:"Monthly salary payment",accountId:"ACC001",pending:!1,recurring:!0},{id:"TXN002",date:new Date("2024-01-14"),amount:89.5,type:"debit",category:"Groceries",description:"Supermarket shopping",accountId:"ACC001",pending:!1,recurring:!1},{id:"TXN003",date:new Date("2024-01-16"),amount:1200,type:"debit",category:"Rent",description:"Monthly rent payment",accountId:"ACC001",pending:!0,recurring:!0},{id:"TXN004",date:new Date("2024-01-13"),amount:150,type:"credit",category:"Refund",description:"Product return refund",accountId:"ACC001",pending:!1,recurring:!1}],Sp=[{id:"LEAD001",companyName:"Tech Solutions Inc",contactPerson:"John Smith",email:"john@techsolutions.com",status:"qualified",value:5e4,lastContact:new Date("2024-01-15"),source:"Website",isHotLead:!0},{id:"LEAD002",companyName:"Global Industries",contactPerson:"Maria Garcia",email:"maria@globalind.com",status:"contacted",value:25e3,lastContact:new Date("2024-01-14"),source:"Referral",isHotLead:!1},{id:"LEAD003",companyName:"StartupXYZ",contactPerson:"Alex Johnson",email:"alex@startupxyz.com",status:"new",value:15e3,lastContact:new Date("2024-01-16"),source:"Cold Call",isHotLead:!0}],eS={dataComparator:(t,e)=>t.id===e.id,filterFunction:(t,e)=>e?t.filter(n=>!(e.status&&!e.status.includes(n.status)||e.minValue&&n.value<e.minValue||e.hotLeadsOnly&&!n.isHotLead)):t,booleanRenderer:t=>a.jsx("span",{style:{color:t?"#dc2626":"#6b7280",fontWeight:t?"bold":"normal"},children:t?"ðŸ”¥ Hot Lead":"ðŸ“‹ Standard"}),getDataId:t=>`business-${t.id}`},tS=()=>[{id:"patients",label:"Patients",data:vp,columns:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Records",ariaDescription:"Healthcare patient management with EWS monitoring",cardTemplate:(t,e)=>a.jsx(Wc,{data:t,columns:e,onSelect:n=>console.log("Selected patient:",n),onAction:(n,r)=>console.log("Patient action:",n,r),priority:t.ews_score>=7?"high":t.ews_score>=3?"medium":"low"})},{id:"appointments",label:"Appointments",data:Jw,columns:[{key:"appointment_time",label:"Time"},{key:"patient_name",label:"Patient"},{key:"appointment_type",label:"Type"},{key:"consultant",label:"Consultant"}],ariaLabel:"Patient Appointments",ariaDescription:"Scheduled appointments and consultations",cardTemplate:(t,e)=>a.jsx(Gc,{data:t,columns:e,onSelect:n=>console.log("Selected appointment:",n),onAction:(n,r)=>console.log("Appointment action:",n,r),status:t.status})},{id:"medications",label:"Medications",data:Kw,columns:[{key:"medication",label:"Medication"},{key:"dose",label:"Dose"},{key:"frequency",label:"Frequency"},{key:"next_due",label:"Next Due"}],ariaLabel:"Patient Medications",ariaDescription:"Medication administration and scheduling",cardTemplate:(t,e)=>a.jsx(Yc,{data:t,columns:e,onSelect:n=>console.log("Selected medication:",n),onAction:(n,r)=>console.log("Medication action:",n,r),priority:t.priority})},{id:"vitals",label:"Vital Signs",data:Qw,columns:[{key:"patient_name",label:"Patient"},{key:"recorded_time",label:"Time"},{key:"temperature",label:"Temperature"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Vital Signs",ariaDescription:"Patient vital signs monitoring and EWS scores",cardTemplate:(t,e)=>a.jsx(Vc,{data:t,columns:e,onSelect:n=>console.log("Selected vitals:",n),onAction:(n,r)=>console.log("Vitals action:",n,r),priority:t.ews_score>=7?"high":t.ews_score>=3?"medium":"low"})}],nS=()=>{const[t,e]=A.useState("healthcare"),n=A.useMemo(()=>({healthcare:{title:"Healthcare Workflow Management",description:"Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals",dataConfig:dp,tabPanels:tS(),data:vp},ecommerce:{title:"E-commerce Product Catalog",description:"Product management with pricing and inventory",...xp("ecommerce",_p),data:_p},financial:{title:"Financial Transaction Dashboard",description:"Banking and financial data management",...xp("financial",wp),data:wp},business:{title:"Sales Lead Management",description:"Custom CRM configuration with business logic",dataConfig:eS,tabPanels:Io(Sp,[{id:"all-leads",label:"All Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"status",label:"Status"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"isHotLead",label:"Priority"}],ariaLabel:"All Sales Leads Grid",ariaDescription:"Complete sales pipeline with lead information"},{id:"hot-leads",label:"Hot Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"lastContact",label:"Last Contact",render:i=>i.lastContact.toLocaleDateString()}],filter:i=>i.filter(s=>s.isHotLead),sortConfig:[{key:"value",direction:"desc"}],ariaLabel:"Hot Leads Grid",ariaDescription:"High-priority leads requiring immediate attention"},{id:"pipeline",label:"Active Pipeline",columns:[{key:"companyName",label:"Company"},{key:"status",label:"Status"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"source",label:"Source"}],filter:i=>i.filter(s=>["contacted","qualified"].includes(s.status)),ariaLabel:"Active Pipeline Grid",ariaDescription:"Leads currently in the sales pipeline"}]),data:Sp}}),[]),r=n[t];return a.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"AriaTabsDataGrid - Comprehensive Demo"}),a.jsx("p",{style:{fontSize:"1.1rem",color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:"This demo showcases the component's versatility across different domains: healthcare, e-commerce, financial services, and custom business applications. Each configuration demonstrates domain-specific data operations, custom renderers, and specialized filtering logic."}),a.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:Object.keys(n).map(i=>a.jsx(Et,{variant:t===i?"primary":"secondary",onClick:()=>e(i),style:{textTransform:"capitalize"},children:i},i))}),a.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem"},children:[a.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"0.5rem",color:"#1e293b"},children:r.title}),a.jsx("p",{style:{color:"#64748b",marginBottom:"1rem"},children:r.description}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.9rem"},children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Data Records:"})," ",r.data.length]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Tab Panels:"})," ",r.tabPanels.length]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Features:"})," ",["Row Selection","Custom Filtering","Domain-Specific Renderers","Keyboard Navigation","ARIA Compliance"].join(", ")]})]})]})]}),a.jsx(To,{dataConfig:r.dataConfig,tabPanels:r.tabPanels,ariaLabel:`${r.title} Data Grid`,ariaDescription:`Interactive data grid for ${r.description.toLowerCase()}`}),a.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f1f5f9",borderRadius:"0.5rem",border:"1px solid #cbd5e1"},children:[a.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#334155"},children:"Implementation Details"}),a.jsxs("div",{style:{display:"grid",gap:"1rem",fontSize:"0.9rem"},children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Current Mode:"})," ",t," configuration"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Data Operations:"})," Custom comparator, filter function, and boolean renderer"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Architecture:"})," Generic core with domain-specific plugins and factory helpers"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"State Management:"})," Global row selection with data-object persistence"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Accessibility:"})," Full ARIA support with dynamic labels and descriptions"]})]})]})]})};function rS(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function iS(){return this.eachAfter(rS)}function sS(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function aS(t,e){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(t.call(e,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function oS(t,e){for(var n=this,r=[n],i=[],s,o,l,c=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,l=s.length;o<l;++o)r.push(s[o]);for(;n=i.pop();)t.call(e,n,++c,this);return this}function lS(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function cS(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function uS(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function dS(t){for(var e=this,n=fS(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function fS(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function hS(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function pS(){return Array.from(this)}function mS(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function gS(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*yS(){var t=this,e,n=[t],r,i,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function qc(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=vS)):e===void 0&&(e=xS);for(var n=new Lo(t),r,i=[n],s,o,l,c;r=i.pop();)if((o=e(r.data))&&(c=(o=Array.from(o)).length))for(r.children=o,l=c-1;l>=0;--l)i.push(s=o[l]=new Lo(o[l])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(wS)}function bS(){return qc(this).eachBefore(_S)}function xS(t){return t.children}function vS(t){return Array.isArray(t)?t[1]:null}function _S(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function wS(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Lo(t){this.data=t,this.depth=this.height=0,this.parent=null}Lo.prototype=qc.prototype={constructor:Lo,count:iS,each:sS,eachAfter:oS,eachBefore:aS,find:lS,sum:cS,sort:uS,path:dS,ancestors:hS,descendants:pS,leaves:mS,links:gS,copy:bS,[Symbol.iterator]:yS};function Ao(t){return typeof t=="number"&&!isNaN(t)}function SS(t,e){return t.map(n=>{const r=e.split(".");let i=n;for(const s of r)if(i=i?.[s],i===void 0)break;return i}).filter(n=>n!=null)}function kp(t){const e=t.filter(Ao);return e.length===0?0:e.reduce((n,r)=>n+r,0)}function kS(t){const e=t.filter(Ao);return e.length===0?0:kp(e)/e.length}function CS(t){return t.length}function NS(t){return new Set(t).size}function MS(t){const e=t.filter(Ao);return e.length===0?null:Math.min(...e)}function jS(t){const e=t.filter(Ao);return e.length===0?null:Math.max(...e)}function TS(t){return t.length>0?t[0]:null}function DS(t){return t.length>0?t[t.length-1]:null}function IS(t){return t.filter(n=>n!=null).map(n=>String(n)).join(", ")}const LS={sum:kp,avg:kS,count:CS,min:MS,max:jS,first:TS,last:DS,concat:IS,countUnique:NS};function Cp(t,e){if(e.length===0)return null;const n=SS(e,t.column);let r;if(t.type==="custom"){if(!t.customFn)throw new Error(`Custom aggregation for column "${t.column}" requires a customFn`);r=t.customFn(n,e)}else{const i=LS[t.type];r=i(n,e)}return r}function Eo(t,e){const n={};for(const r of t){const i=r.label||`${r.column}_${r.type}`;n[i]=Cp(r,e)}return n}function AS(t,e,n){try{return t.calculate(e,n)}catch(r){return console.error(`Error calculating field "${t.key}":`,r),null}}function Np(t,e){return e.length===0?t:t.map(n=>{const r={...n};for(const i of e)r[i.key]=AS(i,n,t);return r})}function ES(t,e){const n=new Map;for(const r of t){const i=typeof e=="function"?e(r):r[e];n.has(i)||n.set(i,[]),n.get(i).push(r)}return n}function PS(t,e){return e.label?`${e.label}: ${t}`:String(t)}function FS(t,e){const{levels:n}=e;function r(o,l,c){if(l>=n.length)return o.map((h,g)=>({id:`${c}-item-${g}`,type:"item",level:l,data:h,items:[h]}));const u=n[l],d=ES(o,u.groupBy),f=[];let p=Array.from(d.entries());u.sortDirection&&p.sort((h,g)=>(u.sortDirection==="asc"?1:-1)*String(h[0]).localeCompare(String(g[0])));for(const[h,g]of p){const m=`${c}-${l}-${h}`,y=r(g,l+1,m),w=u.aggregations?Eo(u.aggregations,g):{};f.push({id:m,type:"group",level:l,key:h,label:PS(h,u),items:g,aggregations:w,children:y})}return f}const i=r(t,0,"root"),s=e.globalAggregations?Eo(e.globalAggregations,t):{};return{id:"root",type:"root",level:-1,items:t,aggregations:s,children:i}}function $S(t,e){const{getId:n,getParentId:r,rootIds:i=[]}=e,s=new Map;for(const d of t){const f=n(d);s.set(f,d)}const o=new Map;function l(d,f=0){const p=n(d);if(o.has(p))return o.get(p);const h={id:p,type:"item",level:f,data:d,items:[d],children:[]};o.set(p,h);const g=[];for(const m of t)r?.(m)===p&&g.push(m);if(g.length>0&&(h.children=g.map(m=>l(m,f+1)),e.aggregations&&e.showChildAggregations)){const m=Mp(h);h.aggregations=Eo(e.aggregations,m)}return h}const c=[];for(const d of t){const f=r?.(d);(!f||i.includes(f))&&c.push(d)}const u=c.map(d=>l(d,0));return{id:"root",type:"root",level:-1,items:t,children:u}}function Mp(t){const e=[...t.items||[]];if(t.children)for(const n of t.children)e.push(...Mp(n));return e}function BS(t,e,n){const r=[];function i(s){const o=s.data;if(o.type==="root"){if(s.children)for(const u of s.children)i(u);return}const l=e.has(o.id),c=(s.children?.length||0)>0;if(o.type==="group"){if(r.push({id:o.id,type:"group",level:o.level,isExpandable:c,isExpanded:l,groupMetadata:{key:o.key,label:o.label,aggregations:o.aggregations||{},itemCount:o.items?.length||0},parentId:s.parent?.data.id!=="root"?s.parent?.data.id:void 0,path:Xc(s)}),l&&s.children)for(const u of s.children)i(u)}else if(o.type==="item")if(n==="tree"&&c){if(r.push({id:o.id,type:"tree-node",level:o.level,isExpandable:!0,isExpanded:l,data:o.data,parentId:s.parent?.data.id!=="root"?s.parent?.data.id:void 0,path:Xc(s)}),l&&s.children)for(const u of s.children)i(u)}else r.push({id:o.id,type:n==="tree"?"tree-node":"item",level:o.level,isExpandable:c,isExpanded:!1,data:o.data,parentId:s.parent?.data.id!=="root"?s.parent?.data.id:void 0,path:Xc(s)})}return i(t),r}function Xc(t){const e=[];let n=t;for(;n&&n.data.type!=="root";)e.unshift(n.data.id),n=n.parent;return e}class Jc{hierarchyRoot;mode;constructor(e,n,r){this.mode=n;const i=n==="grouped"?FS(e,r):$S(e,r);this.hierarchyRoot=qc(i)}getRoot(){return this.hierarchyRoot}getFlattenedNodes(e){return BS(this.hierarchyRoot,e,this.mode)}findNode(e){return this.hierarchyRoot.find(n=>n.data.id===e)}getDescendantIds(e){const n=this.findNode(e);if(!n)return[];const r=[];return n.each(i=>{i.data.id!==e&&r.push(i.data.id)}),r}getAncestorIds(e){const n=this.findNode(e);if(!n)return[];const r=[];let i=n.parent;for(;i&&i.data.type!=="root";)r.push(i.data.id),i=i.parent;return r}getSiblingIds(e){const n=this.findNode(e);return!n||!n.parent?[]:(n.parent.children||[]).filter(r=>r.data.id!==e).map(r=>r.data.id)}getTotalCount(){return this.hierarchyRoot.data.items?.length||0}getMaxDepth(){return this.hierarchyRoot.height}getAggregations(e){return this.findNode(e)?.data.aggregations}getGlobalAggregations(){return this.hierarchyRoot.data.aggregations||{}}}function jp(t,e,n){if(t instanceof Set)return new Set(t);if(Array.isArray(t))return new Set(t);if(!e)return new Set;if(t==="all"){const r=new Set;return e.getRoot().each(i=>{i.data.type!=="root"&&(!n||i.depth<=n)&&r.add(i.data.id)}),r}if(t==="first"){const r=new Set,i=e.getRoot();if(i.children)for(const s of i.children)r.add(s.data.id);return r}return new Set}function zS(t){if(typeof window>"u")return null;try{const e=localStorage.getItem(t);if(e){const n=JSON.parse(e);return new Set(n)}}catch(e){console.warn("Failed to load persisted expansion state:",e)}return null}function OS(t,e){if(!(typeof window>"u"))try{const n=JSON.stringify(Array.from(e));localStorage.setItem(t,n)}catch(n){console.warn("Failed to persist expansion state:",n)}}function HS(t={}){const{initialExpanded:e,expandedIds:n,onExpansionChange:r,hierarchyManager:i,maxAutoExpandDepth:s,persistKey:o}=t,l=n!==void 0,c=A.useMemo(()=>o?zS(o):null,[o]),[u,d]=A.useState(()=>c||jp(e,i,s)),f=l?n:u,p=A.useCallback(j=>{l||d(j),o&&OS(o,j),r?.(j)},[l,o,r]),h=A.useCallback(j=>{const v=new Set(f);v.add(j),p(v)},[f,p]),g=A.useCallback(j=>{const v=new Set(f);v.delete(j),p(v)},[f,p]),m=A.useCallback(j=>{f.has(j)?g(j):h(j)},[f,h,g]),y=A.useCallback(()=>{if(!i){console.warn("Cannot expand all: hierarchyManager not provided");return}const j=new Set;i.getRoot().each(v=>{v.data.type!=="root"&&(!s||v.depth<=s)&&j.add(v.data.id)}),p(j)},[i,s,p]),w=A.useCallback(()=>{p(new Set)},[p]),M=A.useCallback(j=>{if(!i){console.warn("Cannot expand to depth: hierarchyManager not provided");return}const v=new Set;i.getRoot().each(b=>{b.data.type!=="root"&&b.depth<=j&&v.add(b.data.id)}),p(v)},[i,p]);return A.useEffect(()=>{if(!l&&e){const j=jp(e,i,s);d(j)}},[e,i,s,l]),{expandedIds:f,expand:h,collapse:g,toggle:m,expandAll:y,collapseAll:w,expandToDepth:M}}function RS(t){const{flattenedNodes:e,expansionState:n,hierarchyManager:r,columnCount:i,onFocusChange:s,onRowActivate:o,enableColumnNavigation:l=!1}=t,[c,u]=A.useState(null),[d,f]=A.useState(0),[p,h]=A.useState(!1),g=A.useRef(!1);A.useEffect(()=>{!g.current&&e.length>0&&!c&&(u(e[0].id),g.current=!0)},[e,c]);const m=A.useCallback(P=>P?e.findIndex(I=>I.id===P):-1,[e]),y=A.useCallback(()=>c&&e.find(P=>P.id===c)||null,[c,e]),w=A.useCallback(P=>{u(P),f(0),s?.(P)},[s]),M=A.useCallback(()=>{const P=m(c);P<e.length-1&&w(e[P+1].id)},[c,e,m,w]),j=A.useCallback(()=>{const P=m(c);P>0&&w(e[P-1].id)},[c,e,m,w]),v=A.useCallback(()=>{e.length>0&&w(e[0].id)},[e,w]),b=A.useCallback(()=>{e.length>0&&w(e[e.length-1].id)},[e,w]),_=A.useCallback(()=>{const P=y();!P||!P.parentId||w(P.parentId)},[y,w]),N=A.useCallback(()=>{if(!c)return;const P=y();P&&P.isExpandable&&!P.isExpanded&&n.expand(c)},[c,y,n]),C=A.useCallback(()=>{if(!c)return;const P=y();P&&P.isExpandable&&P.isExpanded?n.collapse(c):P&&P.parentId&&_()},[c,y,n,_]),x=A.useCallback(()=>{if(!c)return;const P=y();P&&P.isExpandable&&n.toggle(c)},[c,y,n]),k=A.useCallback(()=>{h(!0)},[]),F=A.useCallback(()=>{h(!1)},[]),D=A.useCallback(P=>{const{key:I,ctrlKey:L,metaKey:E}=P,z=L||E;switch(I){case"ArrowDown":P.preventDefault(),M();break;case"ArrowUp":P.preventDefault(),j();break;case"ArrowRight":P.preventDefault(),l&&!z?d<i-1&&f(G=>G+1):N();break;case"ArrowLeft":P.preventDefault(),l&&d>0?f(G=>G-1):C();break;case"Home":P.preventDefault(),z?v():f(0);break;case"End":P.preventDefault(),z?b():f(i-1);break;case"Enter":P.preventDefault(),c&&(p?o?.(c):k());break;case" ":P.preventDefault(),x();break;case"Escape":P.preventDefault(),p?F():c&&(u(null),s?.(null));break;case"*":P.preventDefault();{const G=y();G&&G.parentId&&r.getSiblingIds(G.id).forEach(T=>{const K=e.find(O=>O.id===T);K&&K.isExpandable&&n.expand(T)})}break}},[M,j,v,b,N,C,x,k,F,c,d,i,l,p,o,s,y,r,e,n]);return{focusedNodeId:c,focusedColumnIndex:d,isNavigationActive:p,focusNode:w,handleKeyDown:D,focusNext:M,focusPrevious:j,focusFirst:v,focusLast:b,focusParent:_,expandFocused:N,collapseFocused:C,toggleFocused:x,activateNavigation:k,deactivateNavigation:F}}const US=()=>a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:a.jsx("path",{d:"M7 5L12 10L7 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Kc=({context:t,columnCount:e,customRenderer:n,isFocused:r=!1,onKeyDown:i,onClick:s,tabIndex:o=-1,"data-testid":l})=>{const{node:c,level:u,isExpanded:d,toggleExpansion:f,aggregations:p,totalCount:h}=t;if(n)return a.jsx("tr",{className:Ee("group-header",{"group-header--expanded":d,"group-header--focused":r,[`group-header--level-${u+1}`]:!0}),role:"row","aria-expanded":d,"aria-level":u+1,tabIndex:o,onClick:s||f,onKeyDown:i,"data-testid":l,"data-node-id":c.id,children:a.jsx("td",{colSpan:e,className:"group-header__cell group-header__cell--custom",children:n(t)})});const g=Object.entries(p),m=g.length>0;return a.jsxs("tr",{className:Ee("group-header",{"group-header--expanded":d,"group-header--focused":r,[`group-header--level-${u+1}`]:!0}),role:"row","aria-expanded":d,"aria-level":u+1,tabIndex:o,onClick:s||f,onKeyDown:i,"data-testid":l,"data-node-id":c.id,children:[a.jsxs("td",{className:Ee("group-header__cell","group-header__cell--first",`group-header__cell--indent-${u}`),children:[a.jsx("span",{className:Ee("group-header__icon",{"group-header__icon--expanded":d}),children:a.jsx(US,{})}),a.jsx("span",{className:"group-header__label",children:c.label}),a.jsxs("span",{className:"group-header__count",children:["(",h," ",h===1?"item":"items",")"]})]}),e>1&&m&&a.jsx("td",{className:"group-header__cell group-header__cell--aggregations",colSpan:e-1,children:a.jsx("div",{className:"group-header__aggregations",children:g.map(([y,w],M)=>{const j=typeof w=="object"&&w!==null?JSON.stringify(w):String(w??"â€”");return a.jsxs("div",{className:"group-header__aggregation",children:[a.jsxs("span",{className:"group-header__aggregation-label",children:[y,":"]}),a.jsx("span",{className:"group-header__aggregation-value",children:j})]},`${y}-${M}`)})})}),e>1&&!m&&a.jsx("td",{colSpan:e-1,className:"group-header__cell"})]})};Kc.displayName="GroupHeader";const WS=()=>a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:a.jsx("path",{d:"M6 4L10 8L6 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});function GS(t,e){const n=t[e.key];return e.render?e.render(t):n==null?"â€”":String(n)}const Qc=({context:t,columns:e,customRenderer:n,isFocused:r=!1,onKeyDown:i,onExpanderClick:s,tabIndex:o=-1,"data-testid":l})=>{const{node:c,depth:u,isExpanded:d,toggleExpansion:f,hasChildren:p,aggregations:h}=t;return n?a.jsx("tr",{className:Ee("tree-node",{"tree-node--expanded":d,"tree-node--focused":r,"tree-node--has-children":p}),role:"row","aria-expanded":p?d:void 0,"aria-level":u+1,tabIndex:o,onKeyDown:i,"data-testid":l,"data-node-id":c.id,children:a.jsx("td",{colSpan:e.length,className:"tree-node__cell tree-node__cell--custom",children:n(t)})}):a.jsx("tr",{className:Ee("tree-node",{"tree-node--expanded":d,"tree-node--focused":r,"tree-node--has-children":p}),role:"row","aria-expanded":p?d:void 0,"aria-level":u+1,tabIndex:o,onKeyDown:i,"data-testid":l,"data-node-id":c.id,children:e.map((g,m)=>{const y=m===0;return a.jsxs("td",{className:Ee("tree-node__cell",{"tree-node__cell--first":y,[`tree-node__cell--depth-${u}`]:y}),role:"gridcell",children:[y&&a.jsx(a.Fragment,{children:p?a.jsx("button",{type:"button",className:Ee("tree-node__expander",{"tree-node__expander--expanded":d}),onClick:w=>{w.stopPropagation(),s?s():f()},"aria-label":d?"Collapse node":"Expand node",tabIndex:-1,children:a.jsx(WS,{})}):a.jsx("span",{className:"tree-node__expander tree-node__expander--placeholder"})}),a.jsx("span",{className:"tree-node__content",children:GS(c.data,g)}),y&&h&&Object.keys(h).length>0&&a.jsxs("span",{className:"tree-node__aggregation-hint",title:"Has aggregated data from children",children:[" ","(",Object.keys(h).length," agg)"]})]},g.key)})})};Qc.displayName="TreeNode";const YS=()=>a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:a.jsx("path",{d:"M12 10L8 6L4 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),VS=()=>a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:a.jsx("path",{d:"M4 6L8 10L12 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),ZS=()=>a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[a.jsx("path",{d:"M12 6L8 2L4 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M4 10L8 14L12 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});function qS(t,e,n,r,i,s,o){return t.data?a.jsx("tr",{className:Ee("groupable-datagrid__data-row",{"groupable-datagrid__data-row--focused":r,"groupable-datagrid__data-row--selected":i}),role:"row","aria-selected":i,tabIndex:r?0:-1,onKeyDown:s,onClick:o,"data-row-index":n,"data-node-id":t.id,style:{cursor:o?"pointer":void 0},children:e.map(l=>{const c=t.data[l.key],u=l.customRenderer?l.customRenderer(c,t.data):l.render?l.render(t.data):c!=null?String(c):"â€”";return a.jsx("td",{className:"groupable-datagrid__data-cell",role:"gridcell",children:u},l.key)})},t.id):null}const Tp=({mode:t,data:e,columns:n,groupConfig:r,treeConfig:i,calculatedFields:s=[],initialExpanded:o,expandedIds:l,onExpansionChange:c,selectedRow:u,onGlobalRowSelectionChange:d,onRowClick:f,sortConfig:p,onSortChange:h,enableMultiSort:g=!1,showControls:m=!0,controlsRenderer:y,isLoading:w=!1,error:M=null,ariaLabel:j,ariaDescription:v,className:b,"data-testid":_,mobileDisplay:N="auto",mobileBreakpoint:C=768})=>{const x=A.useRef(null),[k,F]=A.useState(!1);A.useEffect(()=>{const $=()=>{F(window.innerWidth<C)};return $(),window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[C]);const D=N==="cards"||N==="auto"&&k,P=N==="scroll"||N==="auto"&&!k,I=A.useMemo(()=>{if(!p||p.length===0)return e;const $=[...e];for(let R=p.length-1;R>=0;R--){const H=p[R],q=n.find(V=>V.key===H.key);$.sort((V,re)=>{let fe=V[H.key],X=re[H.key];if(q?.render&&(fe=q.render(V),X=q.render(re)),fe==null&&X==null)return 0;if(fe==null)return 1;if(X==null)return-1;if(typeof fe=="number"&&typeof X=="number")return H.direction==="asc"?fe-X:X-fe;const se=String(fe),ue=String(X),_e=se.localeCompare(ue);return H.direction==="asc"?_e:-_e})}return $},[e,p,n]),L=A.useCallback($=>{if(!h)return;const R=p?.find(H=>H.key===$);if(g){let H=[...p||[]];R?R.direction==="asc"?H=H.map(q=>q.key===$?{...q,direction:"desc"}:q):H=H.filter(q=>q.key!==$):H.push({key:$,direction:"asc"}),h(H)}else R?R.direction==="asc"?h([{key:$,direction:"desc"}]):h([]):h([{key:$,direction:"asc"}])},[p,h,g]),E=A.useCallback(($,R)=>{f&&f($,R),d&&d(u===$?null:$)},[f,d,u]),z=A.useMemo(()=>{const $=I;return s.length===0?$:Np($,s)},[I,s]),G=A.useMemo(()=>t==="flat"||t==="pivot"?null:t==="grouped"?r?new Jc(z,"grouped",r):(console.warn("GroupableDataGrid: grouped mode requires groupConfig"),null):t==="tree"?i?new Jc(z,"tree",i):(console.warn("GroupableDataGrid: tree mode requires treeConfig"),null):null,[t,z,r,i]),ee=HS({initialExpanded:o,expandedIds:l,onExpansionChange:c,hierarchyManager:G||void 0,maxAutoExpandDepth:r?.maxAutoExpandDepth||i?.maxAutoExpandDepth}),T=A.useMemo(()=>G?G.getFlattenedNodes(ee.expandedIds):z.map(($,R)=>({id:`flat-${R}`,type:"item",level:0,isExpandable:!1,isExpanded:!1,data:$,path:[`flat-${R}`]})),[G,ee.expandedIds,z]),K=RS({flattenedNodes:T,expansionState:ee,hierarchyManager:G,columnCount:n.length,enableColumnNavigation:t==="tree"});A.useEffect(()=>{if(K.focusedNodeId&&x.current){const $=x.current.querySelector(`[data-node-id="${K.focusedNodeId}"]`);$&&document.activeElement!==$&&(document.activeElement instanceof HTMLElement&&document.activeElement!==document.body&&x.current.contains(document.activeElement)&&document.activeElement.blur(),$.focus())}},[K.focusedNodeId]);const O=A.useCallback(($,R)=>{const H=K.focusedNodeId===$.id;if($.type==="group"){if(!G||!r)return null;const re=G.findNode($.id);if(!re)return null;const fe={node:{id:$.id,key:$.groupMetadata.key,label:$.groupMetadata.label,level:$.level,items:re.data.items||[],aggregations:$.groupMetadata.aggregations,totalCount:$.groupMetadata.itemCount},level:$.level,isExpanded:$.isExpanded,toggleExpansion:()=>ee.toggle($.id),aggregations:$.groupMetadata.aggregations,totalCount:$.groupMetadata.itemCount,childCount:re.children?.length||0},se=r.levels[$.level]?.headerRenderer;return a.jsx(Kc,{context:fe,columnCount:n.length,customRenderer:se,isFocused:H,onKeyDown:K.handleKeyDown,tabIndex:H?0:-1},$.id)}if($.type==="tree-node"){if(!G||!i)return null;const re=G.findNode($.id);if(!re)return null;const fe={node:{id:$.id,data:$.data,depth:$.level,children:re.children?.map(se=>({id:se.data.id,data:se.data.data,depth:se.depth})),aggregations:re.data.aggregations},depth:$.level,isExpanded:$.isExpanded,toggleExpansion:()=>ee.toggle($.id),hasChildren:$.isExpandable,aggregations:re.data.aggregations,path:$.path.map(se=>{const ue=G.findNode(se);return ue?{id:se,data:ue.data.data,depth:ue.depth}:{id:se,data:{},depth:0}})},X=i.nodeRenderer;return a.jsx(Qc,{context:fe,columns:n,customRenderer:X,isFocused:H,onKeyDown:K.handleKeyDown,tabIndex:H?0:-1},$.id)}const q=u===$.data,V=d||f?re=>E($.data,re):void 0;return qS($,n,R,H,q,K.handleKeyDown,V)},[K,G,r,i,n,ee,u,E,d,f]),B=A.useCallback(()=>{if(!m)return null;if(y){const $={mode:t,expansion:ee,totalItems:z.length,visibleItems:T.length,groupLevels:r?.levels};return a.jsx("div",{className:"groupable-datagrid__controls",children:y($)})}return t==="flat"?null:a.jsxs("div",{className:"groupable-datagrid__controls",children:[a.jsxs("div",{className:"groupable-datagrid__controls-left",children:[a.jsx(Et,{variant:"secondary",onClick:()=>ee.expandAll(),children:"Expand All"}),a.jsx(Et,{variant:"secondary",onClick:()=>ee.collapseAll(),children:"Collapse All"})]}),a.jsx("div",{className:"groupable-datagrid__controls-right",children:a.jsxs("span",{className:"groupable-datagrid__controls-info",children:["Showing ",T.filter($=>$.type==="item").length," of"," ",z.length," items"]})})]})},[m,y,t,ee,z.length,T.length,r]),J=A.useCallback($=>{if($.type==="group"){const R=$.level||0,H=$.isExpanded;return a.jsx("div",{className:Ee("groupable-datagrid__card","groupable-datagrid__card--group",`groupable-datagrid__card--level-${R}`,{"groupable-datagrid__card--expanded":H}),onClick:()=>ee.toggle($.id),children:a.jsxs("div",{className:"groupable-datagrid__card-group-header",children:[a.jsx("button",{className:"groupable-datagrid__card-group-toggle","aria-label":H?"Collapse group":"Expand group","aria-expanded":H,children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:Ee("groupable-datagrid__card-group-chevron",{"groupable-datagrid__card-group-chevron--expanded":H}),children:a.jsx("path",{d:"M6 8L10 12L14 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),a.jsx("span",{className:"groupable-datagrid__card-group-label",children:$.groupMetadata?.label||"Group"}),$.groupMetadata?.itemCount!==void 0&&a.jsxs("span",{className:"groupable-datagrid__card-group-count",children:["(",$.groupMetadata.itemCount,")"]})]})},$.id)}if($.type==="item"&&$.data){const R=u===$.data,H=n.find(V=>V.key==="metricName"||V.key==="name"||V.key==="title")||n[0],q=n.filter(V=>V.key!==H.key);return a.jsxs("div",{className:Ee("groupable-datagrid__card",{"groupable-datagrid__card--selected":R}),onClick:V=>{d&&d(R?null:$.data),f&&f($.data,V)},children:[(()=>{const V=$.data[H.key],re=H.customRenderer?H.customRenderer(V,$.data):H.render?H.render($.data):V!=null?String(V):"â€”";return a.jsx("div",{className:"groupable-datagrid__card-title",children:re})})(),q.map(V=>{const re=$.data[V.key],fe=V.customRenderer?V.customRenderer(re,$.data):V.render?V.render($.data):re!=null?String(re):"â€”";return a.jsxs("div",{className:"groupable-datagrid__card-field",children:[a.jsx("div",{className:"groupable-datagrid__card-label",children:V.label}),a.jsx("div",{className:"groupable-datagrid__card-value",children:fe})]},V.key)})]},$.id)}return null},[n,ee,r,u,d,f,G]);return w?a.jsx("div",{className:Ee("groupable-datagrid","groupable-datagrid--loading",b),children:a.jsx("p",{children:"Loading data..."})}):M?a.jsx("div",{className:Ee("groupable-datagrid","groupable-datagrid--error",b),children:a.jsxs("p",{children:["Error: ",M]})}):z.length===0?a.jsx("div",{className:Ee("groupable-datagrid",b),children:a.jsx("div",{className:"groupable-datagrid__empty",children:"No data available"})}):a.jsxs("div",{ref:x,className:Ee("groupable-datagrid",b,{"groupable-datagrid--mobile-cards":D,"groupable-datagrid--mobile-scroll":P}),"data-testid":_,"data-mode":t,children:[B(),D&&a.jsx("div",{className:"groupable-datagrid__cards",children:T.map($=>J($))}),!D&&a.jsx("div",{className:"groupable-datagrid__table-wrapper",children:a.jsxs("table",{className:"groupable-datagrid__treegrid",role:t==="flat"?"table":"treegrid","aria-label":j,"aria-describedby":v,children:[a.jsx("thead",{children:a.jsx("tr",{className:"groupable-datagrid__header-row",role:"row",children:n.map($=>{const R=p?.find(V=>V.key===$.key),H=$.sortable!==!1&&h,q=p?.findIndex(V=>V.key===$.key);return a.jsx("th",{role:"columnheader","aria-sort":R?R.direction==="asc"?"ascending":"descending":void 0,className:Ee("groupable-datagrid__header-cell",{"groupable-datagrid__header-cell--sortable":H,"groupable-datagrid__header-cell--sorted":!!R}),onClick:H?()=>L($.key):void 0,style:{cursor:H?"pointer":void 0},children:a.jsxs("div",{className:"groupable-datagrid__header-content",children:[a.jsx("span",{children:$.label}),H&&a.jsxs("span",{className:"groupable-datagrid__sort-indicator",children:[!R&&a.jsx(ZS,{}),R?.direction==="asc"&&a.jsx(YS,{}),R?.direction==="desc"&&a.jsx(VS,{}),g&&R&&q!==void 0&&q>=0&&a.jsx("span",{className:"groupable-datagrid__sort-order",children:q+1})]})]})},$.key)})})}),a.jsx("tbody",{role:"rowgroup",children:T.map(($,R)=>O($,R))}),G&&r?.showSummaryFooter&&a.jsx("tfoot",{children:a.jsx("tr",{className:"groupable-datagrid__summary-row",role:"row",children:a.jsxs("td",{colSpan:n.length,children:[a.jsx("strong",{children:"Total:"})," ",G.getTotalCount()," ","items"]})})})]})})]})};Tp.displayName="GroupableDataGrid";const eu=t=>a.jsx(uc,{...t}),XS=({children:t,pageTitle:e,pageHeadingProps:n,columnWidth:r=Er.TwoThirds,mainWrapperSize:i,skipLinkProps:s,headerProps:o,footerProps:l,service:c,navigation:u,search:d,account:f,organisation:p,logo:h,className:g,...m})=>{const y={service:c,navigation:u,search:d,account:f,organisation:p,logo:h,...o};return a.jsxs(a.Fragment,{children:[a.jsx(zc,{...s}),a.jsx(oo,{...y}),a.jsx(eu,{className:g,...m,children:a.jsx(dc,{size:i,children:a.jsx(gr,{children:a.jsxs(Ei,{width:r,children:[e&&a.jsx(Un,{size:"l",...n,children:e}),t]})})})}),a.jsx(mc,{...l})]})},JS=({children:t,title:e,pageHeadingProps:n,columnWidth:r=Er.TwoThirds,mainWrapperSize:i="small",skipLinkProps:s,headerProps:o,footerProps:l,backLinkProps:c,serviceName:u,serviceHref:d,logo:f,className:p,...h})=>{const g={service:{text:u,href:d},logo:f,navigation:void 0,search:void 0,account:void 0,...o};return a.jsxs(a.Fragment,{children:[a.jsx(zc,{...s}),a.jsx(oo,{...g}),a.jsxs(eu,{className:p,...h,children:[c&&a.jsx(Ai,{...c}),a.jsx(dc,{size:i,children:a.jsx(gr,{children:a.jsxs(Ei,{width:r,children:[e&&a.jsx(Un,{style:{marginTop:"3rem"},size:"l",...n,children:e}),t]})})})]}),a.jsx(mc,{...l})]})};function Dp(t={}){const{enabled:e=!0,paramSelected:n="nsv",paramDrill:r="nsvDrill"}=t,[i,s]=ne.useState(()=>typeof window>"u"||!e?void 0:new URLSearchParams(window.location.search).get(n)),[o,l]=ne.useState(()=>typeof window>"u"||!e?!1:new URLSearchParams(window.location.search).get(r)==="1");return ne.useEffect(()=>{if(!e||typeof window>"u")return;const c=new URLSearchParams(window.location.search);i?c.set(n,String(i)):c.delete(n),c.set(r,o?"1":"0");const u=`${window.location.pathname}?${c.toString()}${window.location.hash}`;window.history.replaceState(null,"",u)},[i,o,e,n,r]),{selectedId:i,setSelectedId:s,drilledIn:o,setDrilledIn:l}}const KS=({className:t})=>a.jsx("svg",{className:t,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:a.jsx("path",{fill:"currentColor",d:"M10.7 3.3a1 1 0 0 1 0 1.4L7.41 8l3.3 3.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 0Z"})}),QS=({className:t})=>a.jsx("svg",{className:t,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:a.jsx("path",{fill:"currentColor",d:"M5.3 12.7a1 1 0 0 1 0-1.4L8.59 8l-3.3-3.3a1 1 0 0 1 1.42-1.4l4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.42 0Z"})}),Po=({text:t="Next",html:e,href:n="#",className:r,element:i="a",onClick:s,...o})=>{const l=Ee("nhsuk-back-link",r),c=Ee("nhsuk-back-link__link"),u=()=>a.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[e?a.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t,a.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:a.jsx("path",{d:"M15.5 12c0 .3-.1.5-.3.7l-5 5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4L13.1 12 8.8 7.7c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l5 5c.2.2.3.4.3.7z"})})]});return a.jsx("div",{className:l,children:i==="button"?a.jsx("button",{className:c,type:"button",onClick:s,...o,children:u()}):a.jsx("a",{className:c,href:n,...o,children:u()})})};Po.displayName="ForwardLink";const ek=({show:t,label:e,contentHeaderLevel:n,detailActive:r,headerContext:i,backLabel:s,nextLabel:o,onBack:l,onForward:c,renderContentHeader:u,item:d,contentSubheader:f,tertiaryInlineActive:p})=>{if(!t||!d)return null;const h=`h${n}`,g=e?ne.createElement(h,{style:{marginLeft:r?32:0,marginRight:r?32:0}},e):null,m=r?a.jsx(Ai,{element:"button",text:s,style:{marginRight:16},onClick:l}):void 0,y=p?void 0:a.jsx(Po,{element:"button",text:o,onClick:c});if(u)return a.jsx("div",{className:"nhs-navigation-split-view__header",children:u({item:d,detailActive:r,context:i,backLink:m,defaultHeading:g})});const w=d&&f?typeof f=="function"?f(d):f:null;return a.jsx("div",{className:"nhs-navigation-split-view__header",children:a.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[m,a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:[g,w&&a.jsx("div",{className:"nhs-navigation-split-view__subheader",children:w})]})]}),y&&a.jsx("div",{style:{marginLeft:"auto"},children:y})]})})};function tk({layout:t,items:e,getId:n,selectedId:r,isLoading:i,emptyState:s,renderItemContent:o,onSelect:l,orientation:c,initialFocus:u,onFocusChange:d,justSelectedId:f,listRef:p,onKeyDownList:h,navigationInstructions:g,controlledFocusedIndex:m}){const[y,w]=ne.useState(()=>u==="first"?0:-1),M=ne.useRef(0);ne.useEffect(()=>{if(typeof m=="number"||y<0||!p?.current)return;const N=Array.from(p.current.querySelectorAll("[data-nav-item]"))[y];if(N){document.activeElement!==N&&N.focus(),M.current=y;const C=e[y];d?.(C?n(C):void 0,C,y)}},[m,y,e,d,n,p]);const j=_=>{if(h)return h(_);const N=c==="vertical"?"ArrowDown":"ArrowRight",C=c==="vertical"?"ArrowUp":"ArrowLeft";if(_.key===N)_.preventDefault(),w(x=>Math.min(e.length-1,x+1));else if(_.key===C)_.preventDefault(),w(x=>Math.max(0,x-1));else if(_.key==="Home")_.preventDefault(),w(0);else if(_.key==="End")_.preventDefault(),w(e.length-1);else if(_.key==="Enter"||_.key===" "){_.preventDefault();const x=e[y];x&&!x.disabled&&l(n(x),x,y)}};if(t==="cards")return a.jsxs("ul",{className:"nhs-navigation-split-view__cards",role:"listbox","aria-activedescendant":r?String(r):void 0,children:[e.map((_,N)=>{const C=n(_),x=C===r;return a.jsx("li",{className:"nhs-navigation-split-view__card-item",role:"option","aria-selected":x,children:a.jsxs("button",{id:String(C),type:"button",className:"nhs-navigation-split-view__card","data-selected":x||void 0,"data-disabled":_.disabled||void 0,disabled:_.disabled,onClick:()=>!_.disabled&&l(C,_,N),children:[_.icon&&a.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:_.icon}),a.jsx("span",{className:"nhs-navigation-split-view__item-label",children:_.label}),_.description&&a.jsx("span",{className:"nhs-navigation-split-view__item-description",children:_.description}),o?.(_),_.badge!==void 0&&a.jsx("span",{className:"nhs-navigation-split-view__badge",children:_.badge})]})},String(C))}),e.length===0&&!i&&a.jsx("li",{className:"nhs-navigation-split-view__card-item","aria-disabled":"true",children:s||a.jsx("div",{style:{padding:16},children:"No items"})})]});const v="nsv-nav-instructions",b=ne.useMemo(()=>ne.memo(({item:_,idx:N,selected:C,focused:x})=>{const k=n(_),F=_.disabled?{"aria-disabled":!0,tabIndex:-1}:{tabIndex:x?0:-1,onClick:()=>{M.current=N,l(k,_,N)},onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&(D.preventDefault(),M.current=N,l(k,_,N))}};return a.jsxs("li",{id:String(k),"data-nav-item":!0,className:"nhs-navigation-split-view__list-item nhs-navigation-split-view__item-button",role:"option","aria-selected":C,"aria-current":C?"true":void 0,"data-selected":C||void 0,"data-disabled":_.disabled||void 0,...F,children:[_.icon&&a.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:_.icon}),a.jsxs("span",{className:"nhs-navigation-split-view__item-content",children:[a.jsx("span",{className:"nhs-navigation-split-view__item-label",children:_.label}),_.description&&a.jsx("span",{className:"nhs-navigation-split-view__item-description",children:_.description}),o?.(_)]}),_.badge!==void 0&&a.jsx("span",{className:"nhs-navigation-split-view__badge",children:_.badge})]})}),[n,l,o]);return a.jsxs(a.Fragment,{children:[a.jsxs("ul",{ref:p,className:"nhs-navigation-split-view__list",onKeyDown:j,role:"listbox","aria-label":"Navigation items","aria-describedby":v,"aria-activedescendant":r?String(r):void 0,children:[e.map((_,N)=>a.jsx(b,{item:_,idx:N,selected:n(_)===r,focused:(()=>{const C=typeof m=="number"?m:y;return N===C||C===-1&&N===0&&u==="first"})(),"data-just-selected":n(_)===f?"true":void 0},String(n(_)))),e.length===0&&!i&&a.jsx("li",{className:"nhs-navigation-split-view__list-item","aria-disabled":"true",children:s||a.jsx("div",{style:{padding:16},children:"No items"})})]}),a.jsx("div",{id:v,style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:g||"Use arrow keys to navigate, Enter to open."})]})}const Ui=Object.freeze({small:320,smallMax:767,medium:768,large:1025,xlarge:1200,xxlarge:1440});function Ip(){return typeof window>"u"?Ui.small:window.innerWidth||document.documentElement.clientWidth||0}function Fo(){const[t,e]=ne.useState(Ip());ne.useEffect(()=>{if(typeof window>"u")return;const s=()=>e(Ip());return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const n=ne.useCallback(s=>t>=Ui[s],[t]),r=ne.useCallback(s=>t<Ui[s],[t]),i=ne.useCallback((s,o)=>t>=Ui[s]&&t<Ui[o],[t]);return{width:t,up:n,down:r,between:i,values:Ui}}function nk(t){const{width:e,values:n}=Fo();let r=t.base;const i=["small","medium","large","xlarge","xxlarge"];for(const s of i){const o=n[s];e>=o&&t[s]!==void 0&&(r=t[s])}return r}function rk(t,e,n){const{up:r}=Fo(),[i,s]=ne.useState(!1);ne.useEffect(()=>s(!0),[]);const o=i&&r("medium"),l=i&&r("xlarge");let c;return t?c=t:o?c="two-column":c="list",!t&&e&&n&&l&&(c="three-column"),{effectiveLayout:c,hydrated:i,isAtLeastMedium:o,isAtLeastXlarge:l}}function ik(t){const{enabled:e,isAtLeastMedium:n,initiallyCollapsed:r,persist:i,storageKey:s,urlParam:o,onChange:l}=t,c=ne.useMemo(()=>{if(i&&(i==="url"||i==="both")&&typeof window<"u"){const h=new URLSearchParams(window.location.search).get(o);if(h==="1")return!0;if(h==="0")return!1}if(i&&(i==="localStorage"||i==="both")&&typeof window<"u")try{const p=window.localStorage.getItem(s);if(p==="1")return!0;if(p==="0")return!1}catch{}return r},[i,r,s,o]),[u,d]=ne.useState(c);ne.useEffect(()=>{l?.(u)},[u,l]);const f=ne.useCallback(()=>{e&&n&&d(p=>!p)},[e,n]);return ne.useEffect(()=>{if(!(!i||typeof window>"u")){if(i==="localStorage"||i==="both")try{window.localStorage.setItem(s,u?"1":"0")}catch{}if(i==="url"||i==="both"){const p=new URLSearchParams(window.location.search);p.set(o,u?"1":"0");const h=`${window.location.pathname}?${p.toString()}${window.location.hash}`;window.history.replaceState(null,"",h)}}},[u,i,s,o]),{collapsed:u,toggle:f}}function Lp(t){const{items:e,selectedId:n,defaultSelectedId:r,onSelectionChange:i,renderItemContent:s,renderContent:o,renderSecondaryContent:l,forceLayout:c,animated:u=!0,backLabel:d="Back",nextLabel:f="Next",isLoading:p=!1,emptyState:h,a11y:g,className:m,getId:y=je=>je.id,orientation:w="vertical",autoEnableThirdColumn:M=!0,onDrillChange:j,navigationInstructions:v="Use arrow keys to navigate, Enter to open.",initialFocus:b="first",skipFocusOnSelect:_=!1,skipAnnouncements:N=!1,onFocusChange:C,syncUrl:x=!1,urlParamSelected:k="nsv",urlParamDrill:F="nsvDrill",urlSyncDebounceMs:D=0,lazySecondary:P=!1,navFooter:I,collapsibleNav:L=!1,navInitiallyCollapsed:E=!1,onNavCollapseChange:z,collapseToggleLabelShow:G="Show navigation",collapseToggleLabelHide:ee="Hide navigation",collapseToggleIconShow:T,collapseToggleIconHide:K,persistNavCollapsed:O,navCollapsedStorageKey:B="nsvCollapsed",navCollapsedUrlParam:J="nsvCollapsed",autoContentHeader:$,contentHeaderLevel:R=2,renderContentHeader:H,contentSubheader:q,secondarySubheader:V}=t,{effectiveLayout:re,hydrated:fe,isAtLeastMedium:X}=rk(c,M,!!l),se=Dp({enabled:x,paramSelected:k,paramDrill:F}),[ue,_e]=ne.useState(()=>se.selectedId!==void 0?se.selectedId:r),be=n!==void 0?n:ue,Q=e.find(je=>y(je)===be),[Ge,Fe]=ne.useState(void 0);ne.useEffect(()=>{if(be===void 0)return;Fe(be);const je=setTimeout(()=>Fe(void 0),220);return()=>clearTimeout(je)},[be]);const Be=ne.useRef(null),ve=ne.useRef(null),W=ne.useRef(null),te=ne.useRef(null),[he,ge]=ne.useState(()=>({contentIndex:0,secondaryIndex:0})),[we,U]=ne.useState(()=>"nav"),[Z,le]=ne.useState(0),ie=()=>[te.current,ve.current,W.current].filter(Boolean),ce=je=>{const Re=ie(),qe=Math.max(0,Math.min(je,Re.length-1));xe(Re[qe]),le(qe)},de=ne.useCallback(je=>je?Array.from(je.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(qe=>!qe.hasAttribute("disabled")&&qe.tabIndex!==-1):[],[]),xe=ne.useCallback(je=>{if(je)try{je.focus({preventScroll:!0})}catch{je.focus()}},[]),Me=ne.useCallback(je=>{const Re=de(ve.current);if(!Re.length){xe(ve.current);return}const qe=Math.max(0,Math.min(je,Re.length-1)),Je=Re[qe];Je.focus(),setTimeout(()=>{document.activeElement!==Je&&(Je.focus(),setTimeout(()=>{document.activeElement!==Je&&Je.click()},10))},10),ge(nt=>({...nt,contentIndex:qe}));const ut=nt=>{nt.key==="Escape"&&(nt.preventDefault(),nt.stopPropagation(),xe(ve.current),Je.removeEventListener("keydown",ut))};Re.forEach(nt=>{const gt=nt._escapeHandler;gt&&nt.removeEventListener("keydown",gt)}),Je._escapeHandler=ut,Je.addEventListener("keydown",ut)},[de]),Ae=ne.useCallback(je=>{const Re=de(W.current);if(!Re.length){xe(W.current);return}const qe=Math.max(0,Math.min(je,Re.length-1)),Je=Re[qe];Je.focus(),setTimeout(()=>{document.activeElement!==Je&&(Je.focus(),setTimeout(()=>{document.activeElement!==Je&&Je.click()},10))},10),ge(nt=>({...nt,secondaryIndex:qe}));const ut=nt=>{nt.key==="Escape"&&(nt.preventDefault(),nt.stopPropagation(),xe(W.current),Je.removeEventListener("keydown",ut))};Re.forEach(nt=>{const gt=nt._escapeHandler;gt&&nt.removeEventListener("keydown",gt)}),Je._escapeHandler=ut,Je.addEventListener("keydown",ut)},[de]),Ye=je=>{if(je.defaultPrevented)return;const Re=je.key,qe=je.target,Je=!!oe.current&&oe.current.contains(qe),ut=!!ve.current&&ve.current.contains(qe),nt=!!W.current&&W.current.contains(qe),gt=!!W.current,Dr=qe===te.current||qe===ve.current||qe===W.current,Bt=Ze&&(re==="list"||re==="cards"),Ct=ut&&!!qe.closest(".nhs-navigation-split-view__header");if(we==="containers"&&Dr){if(Re==="ArrowRight"){je.preventDefault();const Qe=ie(),yt=Math.min(Qe.length-1,Z+1);ce(yt);return}if(Re==="ArrowLeft"){je.preventDefault();const Qe=Math.max(0,Z-1);ce(Qe);return}if(Re==="Home"){je.preventDefault(),ce(0);return}if(Re==="End"){je.preventDefault(),ce(ie().length-1);return}if(Re==="Enter"||Re===" "){if(je.preventDefault(),qe===te.current){if(U("nav"),oe.current){const Qe=Array.from(oe.current.querySelectorAll("[data-nav-item]"));(Qe[ye>=0?ye:0]||Qe[0])?.focus()}}else qe===ve.current?(U("content"),Me(he.contentIndex)):qe===W.current&&(U("secondary"),Ae(he.secondaryIndex));return}return}if(Re==="Escape"){if(we==="content"||we==="secondary"){if(ut||nt){if(je.preventDefault(),U("nav"),oe.current){const yt=Array.from(oe.current.querySelectorAll("[data-nav-item]"))[ye>=0?ye:0];setTimeout(()=>yt?.focus(),10)}}else if((qe===ve.current||qe===W.current)&&(je.preventDefault(),U("nav"),oe.current)){const yt=Array.from(oe.current.querySelectorAll("[data-nav-item]"))[ye>=0?ye:0];setTimeout(()=>yt?.focus(),10)}}return}if(Re==="Enter"||Re===" "){if(qe.matches('button, a, input, select, textarea, [role="button"], [role="link"], [role="tab"]'))return;if(qe===ve.current&&we==="content"){je.preventDefault(),je.stopPropagation(),de(ve.current).length>0&&setTimeout(()=>{Me(he.contentIndex)},50);return}if(qe===W.current&&we==="secondary"){je.preventDefault(),je.stopPropagation(),de(W.current).length>0&&setTimeout(()=>{Ae(he.secondaryIndex)},50);return}}if(Bt&&Ct&&!Dr&&(Re==="ArrowRight"||Re==="ArrowLeft")){const Qe=de(ve.current).filter(yt=>yt.closest(".nhs-navigation-split-view__header"));if(Qe.length>1){const yt=Qe.indexOf(qe);if(yt>=0){const Qr=(yt+(Re==="ArrowRight"?1:-1)+Qe.length)%Qe.length;je.preventDefault(),Qe[Qr].focus();return}}}if(Re==="ArrowRight"){if(Je||we==="nav"){je.preventDefault(),U("content"),setTimeout(()=>xe(ve.current),10);return}if(ut||we==="content"){gt&&(je.preventDefault(),U("secondary"),setTimeout(()=>xe(W.current),10));return}}if(Re==="ArrowLeft"){if(nt||we==="secondary"){je.preventDefault(),U("content"),setTimeout(()=>xe(ve.current),10);return}if(ut||we==="content"){if(je.preventDefault(),U("nav"),oe.current){const yt=Array.from(oe.current.querySelectorAll("[data-nav-item]"))[ye>=0?ye:0];setTimeout(()=>xe(yt),10)}return}}if(Re==="Home"&&!Je&&(je.preventDefault(),U("nav"),oe.current)){const Qe=Array.from(oe.current.querySelectorAll("[data-nav-item]")),yt=Qe[ye>=0?ye:0]||Qe[0];setTimeout(()=>xe(yt),10)}if(Re==="End"){const Qe=gt?W.current:ve.current;Qe&&!Qe.contains(qe)&&(je.preventDefault(),gt?(U("secondary"),setTimeout(()=>xe(W.current),10)):(U("content"),setTimeout(()=>xe(ve.current),10)))}if(Re==="ArrowDown"||Re==="ArrowUp"){if(qe===ve.current&&Re==="ArrowDown"){je.preventDefault(),de(ve.current).length>0&&Me(0);return}if(qe===W.current&&Re==="ArrowDown"){je.preventDefault(),de(W.current).length>0&&Ae(0);return}if(ut){const Qe=de(ve.current);if(Qe.length){je.preventDefault();const yt=Re==="ArrowDown"?1:-1,An=(he.contentIndex+yt+Qe.length)%Qe.length;Me(An)}}else if(nt){const Qe=de(W.current);if(Qe.length){je.preventDefault();const yt=Re==="ArrowDown"?1:-1,An=(he.secondaryIndex+yt+Qe.length)%Qe.length;Ae(An)}}}},Ze=!!Q&&(re==="list"||re==="cards"),ct=ne.useMemo(()=>$===void 0?{mobile:!0,tablet:!1,desktop:!1}:$===!0?{mobile:!0,tablet:!0,desktop:!0}:$===!1?{mobile:!1,tablet:!1,desktop:!1}:{mobile:$.mobile!==void 0?$.mobile:!0,tablet:$.tablet||!1,desktop:$.desktop||!1},[$]),ze=fe&&X&&re!=="three-column",pe=fe&&re==="three-column",$e=!!l,Y=re==="three-column",[ae,Ne]=ne.useState(!1);ne.useEffect(()=>{Y&&ae&&Ne(!1)},[Y,ae]),ne.useEffect(()=>{ae&&!Y&&(U("secondary"),le(2),setTimeout(()=>{xe(W.current)},50))},[ae,Y]),ne.useEffect(()=>{!ae&&!Y&&we==="secondary"&&(U("content"),le(1),setTimeout(()=>{xe(ve.current)},50))},[ae,Y,we]);const Ce=!!Q&&(Ze&&ct.mobile||!Ze&&ze&&ct.tablet||!Ze&&pe&&ct.desktop)||$e&&!Y,De=Ze?"mobile":ze?"tablet":"desktop";ne.useEffect(()=>{if(!x)return;const je=re==="three-column";let Re=!1;const qe=()=>{Re||(se.selectedId!==be&&se.setSelectedId(be),se.drilledIn!==je&&se.setDrilledIn(je))};if(D&&D>0){const Je=setTimeout(qe,D);return()=>{Re=!0,clearTimeout(Je)}}else qe()},[x,se,be,re,D]),ne.useEffect(()=>{if(!x)return;const je=()=>{const Re=new URLSearchParams(window.location.search),qe=Re.get(k);Re.get(F),_e(qe===null?void 0:qe)};return window.addEventListener("popstate",je),()=>window.removeEventListener("popstate",je)},[x,k,F,c,l]);const Te=ne.useRef(0),me=ne.useRef(null),Se=ne.useCallback((je,Re)=>{je!==be&&(n===void 0&&_e(je),i?.(je,Re))},[n,i,be]);ne.useEffect(()=>{if(!_&&Ze&&ve.current){const je=setTimeout(()=>xe(ve.current),30);return()=>clearTimeout(je)}},[Ze,be,_]);const oe=ne.useRef(null),[ye,Ie]=ne.useState(()=>b==="first"?0:-1);ne.useEffect(()=>{if(ye<0||!oe.current)return;const Re=Array.from(oe.current.querySelectorAll("[data-nav-item]"))[ye];if(Re){document.activeElement!==Re&&xe(Re),Te.current=ye;const qe=e[ye];C?.(qe?y(qe):void 0,qe,ye)}},[ye,e,C,y]);const Oe=je=>{const Re=w==="vertical"?"ArrowDown":"ArrowRight",qe=w==="vertical"?"ArrowUp":"ArrowLeft";if(je.key==="ArrowRight"&&w==="vertical"){je.preventDefault(),ae?(U("secondary"),setTimeout(()=>{xe(W.current)},10)):(U("content"),setTimeout(()=>{xe(ve.current)},10));return}if(je.key===Re)je.preventDefault(),Ie(Je=>Math.min(e.length-1,Je+1));else if(je.key===qe)je.preventDefault(),Ie(Je=>Math.max(0,Je-1));else if(je.key==="Home")je.preventDefault(),Ie(0);else if(je.key==="End")je.preventDefault(),Ie(e.length-1);else if(je.key==="Enter"||je.key===" "){je.preventDefault();const Je=e[ye];Je&&!Je.disabled&&Se(y(Je),Je)}else if(je.key.length===1&&/[a-z0-9]/i.test(je.key)){me.current||(me.current={buffer:"",last:0});const Je=Date.now(),ut=700,nt=je.key.toLowerCase();Je-me.current.last>ut?me.current.buffer=nt:me.current.buffer+=nt,me.current.last=Je;let gt=me.current.buffer;const Dr=gt.split("").every(An=>An===gt[0]),Bt=e.map(An=>String(An.label||"").toLowerCase());let Ct=0;ye>=0&&(Ct=(ye+1)%e.length);let Qe;const yt=(An,Qr)=>{const En=e.length;for(let Ir=0;Ir<En;Ir++){const ei=(Ct+Ir)%En;if(!e[ei].disabled&&Bt[ei].startsWith(An))return ei}};Dr&&gt.length>1?Qe=yt(gt[0]):(Qe=yt(gt),Qe===void 0&&gt.length>1&&(Qe=yt(gt[gt.length-1]),Qe!==void 0&&me.current&&(me.current.buffer=gt[gt.length-1]))),Qe!==void 0&&Ie(Qe)}},{collapsed:Pe,toggle:Le}=ik({enabled:L,isAtLeastMedium:X,initiallyCollapsed:E,persist:O,storageKey:B,urlParam:J,onChange:z}),He=["nhs-navigation-split-view",u?"nhs-navigation-split-view--animated":"",Ze?"nhs-navigation-split-view--detail-active":"",re==="three-column"?"nhs-navigation-split-view--three-column":"",L&&X&&Pe?"nhs-navigation-split-view--nav-collapsed":"",m].filter(Boolean).join(" "),vt=ne.useRef(null);ne.useEffect(()=>{if(!N&&vt.current){const je=Q?`Selected ${Q.label}`:"Selection cleared";vt.current.textContent=je}},[Q,N]),ne.useEffect(()=>{if(!Ze&&be==null&&oe.current){const Re=oe.current.querySelectorAll("[data-nav-item]")[Te.current];xe(Re)}},[Ze,be]);const lt=re==="three-column",[mt,ht]=ne.useState(!1);ne.useEffect(()=>{lt&&!mt&&ht(!0)},[lt,mt]);const _n=ne.useRef(lt);return ne.useEffect(()=>{_n.current!==lt&&(j?.(lt),_n.current=lt)},[lt,j]),a.jsx("div",{ref:Be,className:He,"aria-label":g?.rootLabel,"data-layout":re,onKeyDown:Ye,children:a.jsxs("div",{className:"nhs-navigation-split-view__body",children:[a.jsxs("div",{className:"nhs-navigation-split-view__panes","data-active-detail":Ze||void 0,style:{transform:Ze?"translateX(-100%)":void 0},children:[a.jsxs("div",{ref:te,className:"nhs-navigation-split-view__nav-pane",role:"navigation","aria-label":g?.navigationLabel||"Items","data-collapsed":Pe||void 0,tabIndex:0,children:[L&&X&&a.jsx("div",{className:"nhs-navigation-split-view__nav-collapse",children:a.jsx("button",{type:"button",onClick:Le,className:"nhs-navigation-split-view__nav-collapse-btn","aria-label":Pe?G:ee,title:Pe?G:ee,children:Pe?T||a.jsx(QS,{}):K||a.jsx(KS,{})})}),a.jsx("div",{className:"nhs-navigation-split-view__nav-scroll",children:a.jsx(tk,{layout:re==="cards"?"cards":"list",items:e,getId:y,selectedId:be,isLoading:p,emptyState:h,renderItemContent:s,onSelect:(je,Re,qe)=>{Te.current=qe,Se(je,Re)},orientation:w,initialFocus:b,onFocusChange:C,justSelectedId:Ge,listRef:oe,onKeyDownList:Oe,navigationInstructions:v,controlledFocusedIndex:ye})}),I&&a.jsx("div",{className:"nhs-navigation-split-view__nav-footer",role:"contentinfo",children:I})]}),a.jsxs("div",{ref:ve,className:"nhs-navigation-split-view__content-pane",role:"region","aria-label":g?.contentLabel||"Content","data-has-selection":!!Q||void 0,tabIndex:0,style:{display:ae&&!Y?"none":void 0},children:[Ce&&a.jsx(ek,{show:Ce,label:Q?Q.label:void 0,contentHeaderLevel:R,detailActive:Ze,headerContext:De,backLabel:d,nextLabel:f,onBack:()=>Se(void 0,void 0),onForward:()=>Ne(!0),renderContentHeader:H,item:Q,contentSubheader:q,tertiaryInlineActive:ae}),a.jsx("div",{className:"nhs-navigation-split-view__content-inner",style:{padding:32,flex:1},children:o(Q)})]}),re==="three-column"&&(!P||mt)||ae&&!Y?a.jsx("div",{ref:W,className:"nhs-navigation-split-view__secondary-pane",role:"region","aria-label":g?.secondaryContentLabel||"Secondary",tabIndex:0,children:a.jsxs("div",{className:"nhs-navigation-split-view__secondary-inner",style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[ae&&!Y&&a.jsx("div",{className:"nhs-navigation-split-view__header",children:a.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[a.jsx(Ai,{element:"button",text:d,style:{marginRight:16},onClick:()=>Ne(!1)}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:a.jsx("h2",{style:{marginLeft:0,marginRight:0},children:Q&&typeof Q=="object"&&"label"in Q?Q.label:String(Q)})})]})})}),Q&&V&&a.jsx("div",{className:"nhs-navigation-split-view__secondary-header",style:{padding:"16px 32px",borderBottom:"1px solid var(--nsplit-divider)"},children:typeof V=="function"?V(Q):V}),a.jsx("div",{style:{padding:32,flex:1,minWidth:0},children:l?.(Q)})]})}):null]}),a.jsx("div",{ref:vt,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"}}),a.jsx("div",{"aria-live":"polite",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:lt?"Expanded to three column layout":"In two column layout"})]})})}Lp.displayName="NavigationSplitView";function sk({steps:t,currentIndex:e,onNavigate:n,renderCard:r,className:i,ariaLabel:s="Steps"}){const o=ne.useRef(null),l=c=>{if(t?.length)if(c.key==="ArrowLeft"||c.key==="ArrowUp"){c.preventDefault();const u=Math.max(0,e-1);u!==e&&n?.(u)}else if(c.key==="ArrowRight"||c.key==="ArrowDown"){c.preventDefault();const u=Math.min(t.length-1,e+1);u!==e&&n?.(u)}else c.key==="Home"?(c.preventDefault(),n?.(0)):c.key==="End"&&(c.preventDefault(),n?.(t.length-1))};return a.jsx("div",{className:i,"aria-label":s,role:"region",children:a.jsx("div",{className:"nhsfdp-cards-viewport",role:"group","aria-roledescription":"steps",tabIndex:0,onKeyDown:l,children:a.jsx("div",{ref:o,className:"nhsfdp-cards-track",style:{transform:`translate3d(-${Math.max(0,e)*100}%, 0, 0)`},children:t.map((c,u)=>{const d=u===e;return a.jsx("div",{className:"nhsfdp-pane mobile-pane"+(d?" is-current":""),role:"group","aria-roledescription":"step","aria-label":(c.label??`Step ${u+1}`).toString(),"aria-hidden":!d,onClick:f=>{if(f.defaultPrevented)return;const p=f.target;p&&p.closest('button, a, input, select, textarea, [role="button"], [role="link"], [contenteditable="true"], [data-prevent-card-click]')||n?.(u)},children:r(c,u,d)},u)})})})})}function ak({steps:t,currentIndex:e,onNavigate:n,renderLabel:r,ariaLabel:i="Breadcrumbs",className:s,style:o}){const l=t.map((u,d)=>{const f=d===e,p=d<e,h=r?r(u,d):u.label??`Step ${d+1}`;return{text:String(h),href:p?"#":void 0,active:f,attributes:p?{"data-index":String(d)}:void 0}}),c=u=>{const f=u.target.closest("a.nhsuk-breadcrumb__link, a.nhsuk-breadcrumb__backlink");if(!f)return;if(f.classList.contains("nhsuk-breadcrumb__backlink")){u.preventDefault();const h=Math.max(0,e-1);h!==e&&n?.(h);return}const p=f.getAttribute("data-index");if(p!=null){u.preventDefault();const h=parseInt(p,10);Number.isNaN(h)||n?.(h)}};return a.jsx("div",{style:o,onClick:c,children:a.jsx(Bc,{labelText:i,classes:s,items:l})})}function ok(t){const{up:e}=Fo(),[n,r]=ne.useState(!1);ne.useEffect(()=>r(!0),[]);const i=n&&e("medium")&&!e("xlarge"),s=n&&e("xlarge"),o=s?"desktop":i?"tablet":"mobile",l=ne.useMemo(()=>{if(!t.step||!t.layoutForStep)return o==="mobile"?{panes:1,showPrimaryNav:!1,showSecondaryNav:!1}:o==="tablet"?{panes:2,showPrimaryNav:!0,showSecondaryNav:!1}:{panes:3,showPrimaryNav:!0,showSecondaryNav:!0};try{return t.layoutForStep({step:t.step,index:t.index,breakpoint:o})||{}}catch{return{}}},[t.step,t.index,t.layoutForStep,o]);return{hydrated:n,breakpoint:o,isTablet:i,isDesktop:s,paneConfig:l}}function lk(t){const{steps:e,currentStepId:n,defaultStepId:r,onStepChange:i,layoutForStep:s,renderStepCard:o,renderStepContent:l,renderSecondaryContent:c,renderSecondaryNav:u,renderBreadcrumbs:d,className:f,getId:p=pe=>pe.id,enableTabletGrid:h=!1,isStepComplete:g,showMobileControls:m,currentSectionId:y,defaultSectionIdForStep:w,onSectionChange:M}=t,j=typeof window<"u"&&!!window.__WSV_DEBUG_FOCUS||!1,v=(...pe)=>{j&&console.log("[WorkflowSplitView]",...pe)},b=()=>{if(typeof document>"u")return{};const pe=document.activeElement,$e=pe?.getAttribute?.("role");return{activeTag:pe?.tagName,activeId:pe?.id,activeRole:$e,activeClasses:pe?.className}},[_,N]=A.useState(r??(e[0]?p(e[0]):void 0)),C=n??_,x=e.findIndex(pe=>p(pe)===C),k=x>=0?e[x]:e[0],[F,D]=A.useState({}),P=pe=>pe?String(p(pe)):"",I=A.useCallback(pe=>{if(!pe)return;try{const Y=w?.(pe);if(Y!==void 0)return Y}catch{}const $e=pe.sections&&pe.sections[0];return $e?$e.id:void 0},[w]),L=y??F[P(k)]??I(k),E=k&&k.sections?k.sections:void 0,z=E?.find(pe=>pe.id===L),G=pe=>{if(k){const $e=P(k);y===void 0&&D(Y=>({...Y,[$e]:pe})),M?.(pe,E?.find(Y=>Y.id===pe),k)}},ee=pe=>{v("navigateTo",String(pe)),n===void 0&&N(pe);const $e=e.find(Y=>p(Y)===pe);$e&&i&&i(pe,$e)},T=d?d({steps:e,current:k,onNavigate:ee}):a.jsx(ak,{steps:e,currentIndex:Math.max(0,x),onNavigate:pe=>{const $e=e[pe];$e&&ee(p($e))}}),{hydrated:K,breakpoint:O,paneConfig:B}=ok({step:k,index:x,layoutForStep:s}),J=n!==void 0||r!==void 0&&e.length>0&&e[0]&&r!==p(e[0]),$=A.useRef(null),R=A.useRef(null),H=A.useRef(null),q=A.useRef(null),V=A.useRef(null),re=A.useRef(0),fe=A.useRef(!1),X=A.useRef(!1),se=A.useRef(null),[ue,_e]=A.useState("nav"),be=A.useRef("nav");A.useEffect(()=>{be.current=ue,ue!=="nav"&&W(!1),ue!=="content"&&he(!1),ue!=="secondary"&&we(!1)},[ue]);const[Q,Ge]=A.useState(0),[Fe,Be]=A.useState(()=>Math.max(0,x)),[ve,W]=A.useState(!1),[te,he]=A.useState(!1),[ge,we]=A.useState(!1),U=A.useCallback(pe=>{if(pe){try{pe.focus({preventScroll:!0})}catch{pe.focus()}v("focusEl",{to:pe.tagName,id:pe.id,class:pe.className})}},[]),Z=A.useCallback(()=>{const pe=()=>H.current;let $e=0;const Y=()=>{const ae=pe();ae&&document.activeElement!==ae&&U(ae),$e+=1,$e<6&&document.activeElement!==pe()&&setTimeout(Y,0)};v("focusContentSoon:start",{attempts:$e}),Y(),typeof queueMicrotask=="function"&&queueMicrotask(Y),requestAnimationFrame(Y)},[U]),le=A.useCallback(pe=>pe?Array.from(pe.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(Y=>!Y.hasAttribute("disabled")&&Y.tabIndex!==-1):[],[]),ie=()=>[R.current,H.current,q.current].filter(Boolean),ce=(pe,$e)=>{if(!pe)return;const Y=typeof document<"u"?document.activeElement:null;if(Y&&pe.contains(Y))try{Y.blur(),v("blurActiveIfInside",{label:$e,root:pe.getAttribute("aria-label")||pe.tagName})}catch{}},de=()=>{const pe=typeof document<"u"?document.activeElement:null;if(pe&&R.current&&R.current.contains(pe))try{pe.blur(),v("blurActiveIfInNav: blurred active element inside nav")}catch{}},xe=pe=>{const $e=ie(),Y=Math.max(0,Math.min(pe,$e.length-1));v("focusContainerByIndex",{idx:pe,clamped:Y}),U($e[Y]),Ge(Y)},Me=A.useCallback(pe=>{let $e=0;const Y=pe??Fe,ae=()=>{const ke=V.current;if(!ke)return null;const Ce=Array.from(ke.querySelectorAll("[data-nav-item]"));return Ce[Y]||Ce[0]||null},Ne=()=>{if(be.current!=="nav"){v("focusNavItemSoon: abort (mode changed)",{mode:be.current});return}const ke=ae();ke&&document.activeElement!==ke&&U(ke),$e+=1,$e<6&&document.activeElement!==ke&&setTimeout(Ne,0)};v("focusNavItemSoon:start",{index:Y,...b()}),Ne(),typeof queueMicrotask=="function"&&queueMicrotask(Ne),requestAnimationFrame(Ne)},[U,Fe]);A.useEffect(()=>{if(!K)return;O==="desktop"||h&&O==="tablet"?J?(_e("nav"),Ge(0),v("init: grid preselected â†’ mode=nav",{containerIndex:0})):(_e("containers"),Ge(0),v("init: grid default â†’ mode=containers",{containerIndex:0})):(_e("nav"),v("init: non-grid â†’ mode=nav"))},[K,O,J,h]),A.useEffect(()=>()=>{se.current!=null&&(clearTimeout(se.current),se.current=null,v("cleanup: cleared nav bootstrap timeout"))},[]),A.useEffect(()=>{const pe=Math.max(0,x);Be(pe),v("sync navFocusedIndex with currentIndex",{currentIndex:x,navFocusedIndex:pe})},[x]),A.useEffect(()=>{v("paneFocusMode â†’",ue,b())},[ue]);const Ae=pe=>{if(!(K&&(O==="desktop"||h&&O==="tablet")))return;const Y=pe.key,ae=pe.target,Ne=ae.tagName.toLowerCase(),ke=Ne==="input"||Ne==="textarea"||Ne==="select",Ce=ae.getAttribute("role"),De=Ce==="textbox"||Ce==="searchbox"||Ce==="combobox",Te=ae.getAttribute("contenteditable"),me=ke||De||Te&&Te!=="false";if(v("onRootKeyDown",{key:Y,tag:Ne,role:Ce,isEditable:me,paneFocusMode:ue,containerIndex:Q,...b()}),me&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(Y))return;const Se=!!V.current&&V.current.contains(ae),oe=!!H.current&&H.current.contains(ae),ye=!!q.current&&q.current.contains(ae),Ie=ae===R.current||ae===H.current||ae===q.current,Oe=!!q.current;if(Ie){if(Y==="ArrowLeft"&&ae===H.current){pe.preventDefault(),v("container: ArrowLeft on content container â†’ nav item"),_e("nav"),ce(H.current,"from-content"),re.current=Fe,Me(Fe);return}if(Y==="ArrowRight"&&ae===H.current&&Oe){pe.preventDefault(),v("container: ArrowRight on content container â†’ secondary"),_e("secondary"),ce(H.current,"from-content"),he(!1),setTimeout(()=>U(q.current),10);return}if(Y==="ArrowRight"&&ae===R.current){pe.preventDefault(),v("container: ArrowRight on nav container â†’ content"),_e("content"),ce(R.current,"from-nav"),W(!1),Z();return}if(Y==="ArrowLeft"&&ae===q.current){pe.preventDefault(),v("container: ArrowLeft on secondary container â†’ content"),_e("content"),ce(q.current,"from-secondary"),we(!1),Z();return}if(Y==="ArrowRight"){pe.preventDefault(),v("container: ArrowRight â†’ next container"),ce(ae,"container-roving"),ae===R.current&&W(!1),ae===H.current&&he(!1),ae===q.current&&we(!1),xe(Q+1);return}if(Y==="ArrowLeft"){pe.preventDefault(),v("container: ArrowLeft â†’ prev container"),ce(ae,"container-roving"),ae===R.current&&W(!1),ae===H.current&&he(!1),ae===q.current&&we(!1),xe(Q-1);return}if(Y==="Home"){pe.preventDefault(),v("container: Home â†’ first container"),ce(ae,"container-roving"),ae===R.current&&W(!1),ae===H.current&&he(!1),ae===q.current&&we(!1),xe(0);return}if(Y==="End"){pe.preventDefault(),v("container: End â†’ last container"),ce(ae,"container-roving"),ae===R.current&&W(!1),ae===H.current&&he(!1),ae===q.current&&we(!1),xe(ie().length-1);return}if(Y==="Enter"||Y===" "){if(pe.preventDefault(),ae===R.current)_e("nav"),v("container: Enter/Space on nav â†’ focus nav item",{navFocusedIndex:Fe}),re.current=Fe,X.current=!0,Me(Fe);else if(ae===H.current){_e("content"),ce(H.current,"descend-content"),he(!1);const Pe=le(H.current);v("container: Enter/Space on content â†’ focus first focusable",{count:Pe.length}),(Pe[0]||H.current)?.focus()}else if(ae===q.current){_e("secondary"),ce(q.current,"descend-secondary"),we(!1);const Pe=le(q.current);v("container: Enter/Space on secondary â†’ focus first focusable",{count:Pe.length}),(Pe[0]||q.current)?.focus()}return}}if(Y==="Escape"){if(oe||ye){pe.preventDefault(),_e("containers"),v("Escape: from",oe?"content":"secondary","â†’ containers (focus container)"),oe&&ce(H.current,"escape-ascend"),ye&&ce(q.current,"escape-ascend"),oe&&setTimeout(()=>U(H.current),10),ye&&setTimeout(()=>U(q.current),10);return}if(Se){pe.preventDefault(),_e("containers"),v("Escape: from nav â†’ containers (focus nav container)"),de(),U(R.current);return}if(Ie){pe.preventDefault(),_e("containers"),v("Escape: on container (stay in containers)");return}}if(Y==="Enter"||Y===" "){if(ae===H.current&&ue==="content"){pe.preventDefault(),ce(H.current,"descend-content");const Pe=le(H.current);v("Enter/Space on content container in content mode"),(Pe[0]||H.current)?.focus();return}if(ae===q.current&&ue==="secondary"){pe.preventDefault(),ce(q.current,"descend-secondary");const Pe=le(q.current);v("Enter/Space on secondary container in secondary mode"),(Pe[0]||q.current)?.focus();return}}if(Y==="ArrowRight"){if(Se||ue==="nav"){pe.preventDefault(),_e("content"),v("ArrowRight: from nav â†’ content (focus content)"),ce(R.current,"from-nav"),W(!1),Z();return}if(oe||ue==="content"){Oe&&(pe.preventDefault(),_e("secondary"),v("ArrowRight: from content â†’ secondary (focus secondary)"),ce(H.current,"from-content"),he(!1),setTimeout(()=>U(q.current),10));return}}if(Y==="ArrowLeft"){if(ye||ue==="secondary"){pe.preventDefault(),v("ArrowLeft: from secondary â†’ content (focus content)"),ce(q.current,"from-secondary"),we(!1),Z();return}if(oe||ue==="content"){pe.preventDefault(),_e("nav"),v("ArrowLeft: from content â†’ nav (focus nav item)",{navFocusedIndex:Fe}),re.current=Fe,ce(H.current,"from-content"),he(!1),Me(Fe);return}}if((Y==="Enter"||Y===" ")&&(Se||ue==="nav")){pe.preventDefault();const Pe=V.current,Le=Pe?Array.from(Pe.querySelectorAll("[data-nav-item]")):[];let He=re.current??Fe;if(Le.length){const vt=document.activeElement,lt=vt?Le.indexOf(vt):-1;lt>=0&&(He=lt)}He=Math.max(0,Math.min(He,Le.length-1)),Be(He),re.current=He,v("Root: Enter/Space activate from nav context",{idx:He}),ee(p(e[He])),_e("content"),be.current="content",fe.current=!0,de(),Z();return}},Ye=()=>{const pe=()=>{fe.current=!1,X.current=!1},$e=ke=>{if(!V.current)return;const Ce=Array.from(V.current.querySelectorAll("[data-nav-item]"));if(Ce.length){if(ke.key==="ArrowDown"){ke.preventDefault(),ke.stopPropagation(),X.current=!1,_e("nav");const De=re.current??Fe,Te=Math.min(Ce.length-1,De+1);Be(Te),re.current=Te,Me(Te),v("PrimaryNav: ArrowDown",{from:De,to:Te})}else if(ke.key==="ArrowUp"){ke.preventDefault(),ke.stopPropagation(),X.current=!1,_e("nav");const De=re.current??Fe,Te=Math.max(0,De-1);Be(Te),re.current=Te,Me(Te),v("PrimaryNav: ArrowUp",{from:De,to:Te})}else if(ke.key==="Home"){ke.preventDefault(),ke.stopPropagation(),X.current=!1;const De=0;Be(De),re.current=De,Me(De),v("PrimaryNav: Home",{to:De})}else if(ke.key==="End"){ke.preventDefault(),ke.stopPropagation(),X.current=!1;const De=Ce.length-1;Be(De),re.current=De,Me(De),v("PrimaryNav: End",{to:De})}}},Y=ke=>{},ae=ke=>{if(ke.key!=="Enter"&&ke.key!==" "||!V.current)return;const Ce=Array.from(V.current.querySelectorAll("[data-nav-item]"));if(!Ce.length)return;ke.preventDefault();let De=-1;const me=ke.target?.closest?.("[data-nav-item]");me&&(De=Ce.indexOf(me)),De<0&&(De=re.current??Fe),De=Math.max(0,Math.min(De,Ce.length-1)),Be(De),re.current=De,v("PrimaryNav: Enter/Space activate (capture)",{idx:De}),ee(p(e[De])),_e("content"),be.current="content",fe.current=!0,se.current!=null&&(clearTimeout(se.current),se.current=null),de(),Z()},Ne=ke=>{if(ke.defaultPrevented)return;fe.current=!1;const Ce=ke.target;if(!Ce)return;const De=Ce.closest("[data-nav-item]");if(!De||!V.current||!V.current.contains(De))return;const me=Array.from(V.current.querySelectorAll("[data-nav-item]")).indexOf(De);me<0||(Be(me),re.current=me,v("PrimaryNav: click delegate activate",{idx:me}),ee(p(e[me])),_e("content"),de(),se.current!=null&&(clearTimeout(se.current),se.current=null),Z())};return a.jsx("ul",{ref:V,className:"nhsfdp-primary-nav",role:"listbox","aria-activedescendant":String(p(e[Math.max(0,Fe)])),onKeyDownCapture:ae,onKeyDown:$e,onKeyUp:Y,onPointerDown:pe,onMouseDown:pe,onClick:Ne,children:e.map((ke,Ce)=>{const De=p(ke),Te=Ce===x,me=ue==="nav"&&Ce===Fe;return a.jsx("li",{id:String(De),role:"option","aria-selected":Te,children:a.jsx("button",{"data-nav-item":!0,tabIndex:me?0:-1,type:"button",className:"nhsfdp-primary-nav__item"+(Te?" is-current":"")+(me?" is-focused":""),"aria-current":Te?"step":void 0,onPointerDown:pe,onMouseDown:pe,onKeyDown:Se=>{if(Se.key==="Enter"||Se.key===" "){if(Se.preventDefault(),X.current){X.current=!1;return}re.current=Ce,fe.current=!0,v("NavItem: onKeyDown activate",{i:Ce,id:String(p(e[Ce]))}),ee(p(e[Ce])),_e("content"),be.current="content",se.current!=null&&(clearTimeout(se.current),se.current=null),de(),Z()}},onKeyUp:Se=>{if(Se.key==="Enter"||Se.key===" "){if(X.current){X.current=!1;return}re.current=Ce,v("NavItem: onKeyUp activate (fallback)",{i:Ce,id:String(p(e[Ce]))}),ee(p(e[Ce])),_e("content"),be.current="content",se.current!=null&&(clearTimeout(se.current),se.current=null),de(),Z()}},onClick:Se=>{if(fe.current){fe.current=!1,Se.preventDefault(),Se.stopPropagation(),v("NavItem: ignored synthetic click after keyboard activation",{i:Ce});return}Be(Ce),re.current=Ce,v("NavItem: onClick select",{i:Ce,id:String(De)}),ee(De),_e("content"),be.current="content",se.current!=null&&(clearTimeout(se.current),se.current=null),de(),Z()},children:ke.label})},String(De))})})},Ze=()=>{const pe=Math.max(0,x),$e=pe>0,Y=pe<e.length-1,ae=m?m(k):g?g(k):!0;return a.jsxs("div",{className:"nhsfdp-workflow-mobile",children:[O==="tablet"?T:null,ae&&a.jsxs("div",{className:"nhsfdp-mobile-controls","aria-label":"Step navigation",children:[$e?a.jsx(Ai,{element:"button",text:"Back",onClick:()=>{const Ne=e[pe-1];Ne&&ee(p(Ne))}}):a.jsx(Ai,{element:"button",text:"Back","aria-hidden":"true",style:{visibility:"hidden"}}),Y?a.jsx(Po,{element:"button",text:"Next",onClick:()=>{const Ne=e[pe+1];Ne&&ee(p(Ne))}}):a.jsx(Po,{element:"button",text:"Next","aria-hidden":"true",style:{visibility:"hidden"}})]}),a.jsx(sk,{steps:e,currentIndex:pe,onNavigate:Ne=>{const ke=e[Ne];ke&&ee(p(ke))},renderCard:(Ne,ke,Ce)=>o?o(Ne):l(Ne)})]})},ct=pe=>a.jsx("div",{className:"nhsfdp-workflow-grid panes-"+(pe.panes??2),onKeyDown:Ae,ref:$,role:"grid","aria-rowcount":1,"aria-colcount":(pe.showPrimaryNav?1:0)+1+(pe.showSecondaryNav?1:0),"aria-label":"Workflow layout",children:a.jsxs("div",{className:"nhsfdp-workflow-body",role:"row",children:[pe.showPrimaryNav&&a.jsx("aside",{ref:R,className:"nhsfdp-pane primary-nav"+(ve?" is-active-pane":""),"aria-label":"Primary navigation",role:"gridcell",tabIndex:0,onFocus:$e=>{$e.target===R.current&&W(!0)},onBlur:$e=>{$e.target===R.current&&W(!1)},children:a.jsx("section",{role:"complementary","aria-label":"Primary navigation",children:a.jsx(Ye,{})})}),a.jsxs("main",{ref:H,className:"nhsfdp-pane content"+(te?" is-active-pane":""),"aria-live":"polite",role:"gridcell",tabIndex:0,onFocus:$e=>{$e.target===H.current&&he(!0)},onBlur:$e=>{$e.target===H.current&&he(!1)},children:[T,a.jsx("div",{role:"main",children:l(k,z)})]}),(()=>{const $e=u?u(k,E,z,Ne=>G(Ne)):E&&E.length>0?a.jsx("ul",{className:"nhsfdp-secondary-nav",role:"listbox","aria-label":"Sections",children:E.map(Ne=>{const ke=L===Ne.id;return a.jsx("li",{role:"option","aria-selected":ke,children:a.jsx("button",{type:"button",className:"nhsfdp-secondary-nav__item"+(ke?" is-current":""),"data-sec-item":!0,onClick:()=>G(Ne.id),children:Ne.label})},String(Ne.id))})}):void 0,Y=c?.(k,z);return pe.showSecondaryNav&&($e||Y)?a.jsx("aside",{ref:q,className:"nhsfdp-pane secondary-nav"+(ge?" is-active-pane":""),"aria-label":"Secondary navigation",role:"gridcell",tabIndex:0,onFocus:Ne=>{Ne.target===q.current&&we(!0)},onBlur:Ne=>{Ne.target===q.current&&we(!1)},children:a.jsxs("section",{role:"complementary","aria-label":"Secondary navigation",children:[$e,Y]})}):null})()]})});return K?O==="mobile"||!h&&O==="tablet"||(B.panes??1)===1?a.jsx("div",{className:"nhsfdp-workflow "+(f??""),children:Ze()}):a.jsx("div",{className:"nhsfdp-workflow "+(f??""),children:ct(B)}):a.jsx("div",{className:"nhsfdp-workflow "+(f??""),children:a.jsx("div",{className:"nhsfdp-workflow-body",children:a.jsxs("main",{className:"nhsfdp-pane content",children:[d?d({steps:e,current:k,onNavigate:ee}):null,k?l(k,k?.sections?.find(pe=>pe.id===(w?.(k)??k?.sections?.[0]?.id))):null]})})})}const ck=typeof window<"u"&&window.document?ne.useLayoutEffect:ne.useEffect,Ap=(t,e,n,r)=>t==null||Number.isNaN(t)?r:Math.min(n,Math.max(e,t)),uk=({item:t,maxLines:e,enableDrilldown:n,onExpand:r,isActive:i,topLaneIndex:s})=>{const{ariaLabel:o}=t,l=`${t._pxLeft}px`,c=`${t._pxWidth}px`,u=`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${s})`,d=Math.floor(t._startFraction)+2,f=Math.max(1,Math.round(t._spanColumns)),p=n&&t.childItems&&t.childItems.length>0,h=m=>{p&&(m.preventDefault(),r?.(t))},g=p?{role:"button",tabIndex:0,"aria-haspopup":"dialog","aria-expanded":i||!1,onClick:h,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&h(m),m.key==="Escape"&&i&&h(m)}}:{};return a.jsxs("div",{className:Ee("nhsuk-product-roadmap__item",p&&"nhsuk-product-roadmap__item--expandable",i&&"nhsuk-product-roadmap__item--active"),style:{left:l,width:c,top:u,"--item-height":e},role:"gridcell","aria-label":o,"aria-colindex":d,"aria-colspan":f,...g,children:[a.jsx("div",{className:"nhsuk-product-roadmap__item-bg","aria-hidden":"true"}),a.jsxs("div",{className:"nhsuk-product-roadmap__item-content",children:[a.jsx("span",{className:"nhsuk-product-roadmap__item-title",children:t.title}),p&&a.jsx("span",{className:Ee("nhsuk-product-roadmap__item-expander",i&&"nhsuk-product-roadmap__item-expander--open"),"aria-hidden":"true"})]})]})},Ep=A.memo(({dateHeadings:t,categories:e,columnWidthPx:n=400,itemMaxLines:r=2,className:i,ariaLabel:s="Product roadmap",enableDrilldown:o=!1,onToggleItem:l,drilldownMode:c="overlay",...u})=>{const[d,f]=A.useState(()=>new Set),[p,h]=A.useState(()=>new Set),g=A.useRef(new Set),m=A.useCallback(D=>d.has(D),[d]),y=A.useCallback(D=>{f(P=>{const I=new Set(P);return I.has(D.id)?(I.delete(D.id),h(L=>{const E=new Set(L);return E.add(D.id),E}),setTimeout(()=>h(L=>{const E=new Set(L);return E.delete(D.id),E}),240),l?.(D.id,!1)):(I.add(D.id),l?.(D.id,!0)),I})},[l]);ck(()=>{if(c!=="inline"||!o||typeof document>"u")return;const D=[];if(d.forEach(E=>{g.current.has(E)||D.push(E)}),g.current=new Set(d),!D.length)return;const P=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1,I=D.map(E=>`.nhsuk-product-roadmap__inline-children[data-parent="${E}"] .nhsuk-product-roadmap__inline-child`).join(","),L=Array.from(document.querySelectorAll(I));if(L.length){if(P){L.forEach(E=>{E.style.opacity="1",E.style.transform="translateY(0)"});return}Promise.resolve().then(()=>Z1).then(E=>{(E.gsap||E.default||E).to(L,{opacity:1,y:0,duration:.32,ease:"power2.out",stagger:.05})}).catch(()=>{L.forEach(E=>{E.style.opacity="1",E.style.transform="translateY(0)"})})}},[d,c,o]);const w=A.useCallback(()=>{d.size&&f(new Set)},[d]),M=Ee("nhsuk-product-roadmap",i),j=Ap(n,120,1200,400),v=Ap(r,1,6,2),b=A.useMemo(()=>t.map(D=>new Date(D+" 01")),[t]),_=A.useMemo(()=>{if(b.length===0){const I=new Date;return[I,I]}const D=new Date(b[0]),P=js.offset(new Date(b[b.length-1]),1);return[D,P]},[b]),N=A.useMemo(()=>$c().domain(_).range([0,b.length*j]),[_,b.length,j]),C=A.useCallback(D=>{if(D.startDate){const ee=new Date(D.startDate),T=new Date(D.endDate??D.startDate);T<ee&&T.setTime(ee.getTime());const K=N(ee),O=js.offset(new Date(T),1);let B=N(O);Number.isFinite(B)||(B=K+j);const J=Math.max(j*.25,B-K),$=K/j,R=J/j;return{...D,_pxLeft:K,_pxWidth:J,_startFraction:$,_spanColumns:R}}const P=D.date??1,I=D.dateOffset??0,L=D.length??1,E=D.partialLength??1,z=P-1+I,G=L-1+E;return{...D,_pxLeft:z*j,_pxWidth:G*j,_startFraction:z,_spanColumns:G}},[N,j]),x=A.useMemo(()=>e.map(D=>{const I=D.roadmapItems.map(E=>{const z=!E.childItems&&E.children?{...E,childItems:E.children}:{...E};return C(z)}).sort((E,z)=>E._pxLeft!==z._pxLeft?E._pxLeft-z._pxLeft:z._pxWidth-E._pxWidth),L=[];return I.forEach(E=>{const z=E._pxLeft,G=E._pxLeft+E._pxWidth;let ee=L.findIndex(T=>T<=z);ee===-1&&(ee=L.length,L.push(0)),L[ee]=G,E.verticalPosition=ee+1}),{...D,roadmapItems:I,_laneCount:L.length}}),[e,C]),k=A.useMemo(()=>x.map(D=>D._laneCount||1),[x]),F=A.useMemo(()=>`var(--category-width) ${t.map(()=>"var(--column-width)").join(" ")}`,[t]);return a.jsxs("div",{className:M,style:{"--column-width":`${j}px`,gridTemplateColumns:F},role:"grid","aria-label":s,"aria-colcount":t.length+1,"aria-rowcount":x.length+1,...u,children:[a.jsxs("div",{className:"nhsuk-product-roadmap__header-row",role:"row","aria-rowindex":1,children:[a.jsx("div",{className:"nhsuk-product-roadmap__header-cell",role:"columnheader","aria-colindex":1,children:a.jsx("span",{className:"nhsuk-visually-hidden",children:"Category"})}),t.map((D,P)=>a.jsx("div",{className:"nhsuk-product-roadmap__date-heading",role:"columnheader","aria-colindex":P+2,children:D},`${D}-${P}`))]}),x.map((D,P)=>{const I=P+2,L=k[P];let E,z=0,G=[];o&&c==="inline"&&(G=D.roadmapItems.filter(O=>m(O.id)&&O.childItems&&O.childItems.length).map(O=>({id:O.id,lane:O.verticalPosition||1,count:O.childItems.length})).sort((O,B)=>O.lane-B.lane),z=G.reduce((O,B)=>O+B.count,0));const ee=L+z;E=`calc((${ee} * var(--roadmap-item-block-height)) + (max(0, ${ee} - 1) * var(--roadmap-row-gap)))`;const T={};let K=0;return G.forEach(O=>{K+=O.count,T[O.lane+1]=K}),a.jsxs("div",{className:"nhsuk-product-roadmap__row",role:"row","aria-rowindex":I,children:[a.jsx("div",{className:"nhsuk-product-roadmap__category-cell",role:"rowheader","aria-colindex":1,children:D.heading}),a.jsx("div",{className:"nhsuk-product-roadmap__items-row",style:{gridColumn:`2 / span ${t.length}`,height:E},children:a.jsx("div",{className:"nhsuk-product-roadmap__items-layer",children:D.roadmapItems.map((O,B)=>{const J=(O.verticalPosition||1)-1,$=G.filter(V=>V.lane-1<J).reduce((V,re)=>V+re.count,0),R=J+$,H=m(O.id),q=p.has(O.id);return a.jsxs(A.Fragment,{children:[a.jsx(uk,{item:O,maxLines:v,enableDrilldown:o,onExpand:y,isActive:H,topLaneIndex:R,laneOffset:$}),o&&c==="inline"&&(H||q)&&O.childItems&&a.jsx("div",{"data-parent":O.id,className:"nhsuk-product-roadmap__inline-children","aria-label":`${O.title} child tasks`,children:O.childItems.map((V,re)=>{const fe="calc(var(--roadmap-item-block-height) * 0.75)";let X=O._pxLeft,se=O._pxWidth;if(V.startDate){const be=new Date(V.startDate);let Q=V.endDate?new Date(V.endDate):new Date(be);Q<be&&(Q=new Date(be));const Ge=new Date(Q);Ge.setDate(Ge.getDate()+1);const Fe=N(be);let Be=N(Ge);(!Number.isFinite(Be)||Be<=Fe)&&(Be=Fe+6),X=Fe,se=Math.max(6,Be-Fe)}const _e=R+1+re;return a.jsxs("div",{className:Ee("nhsuk-product-roadmap__inline-child",V.status&&`nhsuk-product-roadmap__inline-child--status-${V.status}`,!H&&q&&"nhsuk-product-roadmap__inline-child--collapsing"),style:{left:`${X}px`,width:`${se}px`,top:`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${_e})`,height:fe,opacity:H?0:void 0,transform:H?"translateY(-6px)":void 0},children:[a.jsx("div",{className:"nhsuk-product-roadmap__inline-child-bg"}),a.jsx("div",{className:"nhsuk-product-roadmap__inline-child-content",children:V.title})]},V.id??re)})})]},O.id??B)})})})]},`${D.heading}-${P}`)}),o&&c==="overlay"&&d.size===1&&(()=>{const D=Array.from(d)[0],P=e.flatMap(I=>I.roadmapItems).find(I=>I.id===D);return!P||!P.childItems?null:a.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-overlay",role:"dialog","aria-modal":"true","aria-label":`${P.title} details`,children:[a.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-panel",children:[a.jsxs("header",{className:"nhsuk-product-roadmap__drilldown-header",children:[a.jsx("h3",{className:"nhsuk-product-roadmap__drilldown-title",children:P.title}),a.jsx("button",{type:"button",className:"nhsuk-product-roadmap__drilldown-close",onClick:w,"aria-label":"Close details",children:"Ã—"})]}),a.jsx("div",{className:"nhsuk-product-roadmap__drilldown-content",children:P.content}),a.jsx("ul",{className:"nhsuk-product-roadmap__drilldown-children",children:P.childItems.map((I,L)=>a.jsxs("li",{className:"nhsuk-product-roadmap__drilldown-child",children:[a.jsx("strong",{className:"nhsuk-product-roadmap__drilldown-child-title",children:I.title}),I.content&&a.jsx("div",{className:"nhsuk-product-roadmap__drilldown-child-content",children:I.content})]},I.id??L))})]}),a.jsx("div",{className:"nhsuk-product-roadmap__drilldown-backdrop",onClick:w,"aria-hidden":"true"})]})})()]})});Ep.displayName="ProductRoadmap";function Wt(t){return function(){return t}}const tu=Math.PI,nu=2*tu,ai=1e-6,dk=nu-ai;function Pp(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function fk(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Pp;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class hk{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Pp:fk(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=r-e,u=i-n,d=o-e,f=l-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>ai)if(!(Math.abs(f*c-u*d)>ai)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-o,g=i-l,m=c*c+u*u,y=h*h+g*g,w=Math.sqrt(m),M=Math.sqrt(p),j=s*Math.tan((tu-Math.acos((m+p-y)/(2*w*M)))/2),v=j/M,b=j/w;Math.abs(v-1)>ai&&this._append`L${e+v*d},${n+v*f}`,this._append`A${s},${s},0,0,${+(f*h>d*g)},${this._x1=e+b*c},${this._y1=n+b*u}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),u=e+l,d=n+c,f=1^o,p=o?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ai||Math.abs(this._y1-d)>ai)&&this._append`L${u},${d}`,r&&(p<0&&(p=p%nu+nu),p>dk?this._append`A${r},${r},0,1,${f},${e-l},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:p>ai&&this._append`A${r},${r},0,${+(p>=tu)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Fp(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new hk(e)}function $p(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Bp(t){this._context=t}Bp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function zp(t){return new Bp(t)}function Op(t){return t[0]}function Hp(t){return t[1]}function Rp(t,e){var n=Wt(!0),r=null,i=zp,s=null,o=Fp(l);t=typeof t=="function"?t:t===void 0?Op:Wt(t),e=typeof e=="function"?e:e===void 0?Hp:Wt(e);function l(c){var u,d=(c=$p(c)).length,f,p=!1,h;for(r==null&&(s=i(h=o())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(f,u,c),+e(f,u,c));if(h)return s=null,h+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Wt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Wt(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Wt(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),l):r},l}function ru(t,e,n){var r=null,i=Wt(!0),s=null,o=zp,l=null,c=Fp(u);t=typeof t=="function"?t:t===void 0?Op:Wt(+t),e=typeof e=="function"?e:Wt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Hp:Wt(+n);function u(f){var p,h,g,m=(f=$p(f)).length,y,w=!1,M,j=new Array(m),v=new Array(m);for(s==null&&(l=o(M=c())),p=0;p<=m;++p){if(!(p<m&&i(y=f[p],p,f))===w)if(w=!w)h=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=p-1;g>=h;--g)l.point(j[g],v[g]);l.lineEnd(),l.areaEnd()}w&&(j[p]=+t(y,p,f),v[p]=+e(y,p,f),l.point(r?+r(y,p,f):j[p],n?+n(y,p,f):v[p]))}if(M)return l=null,M+""||null}function d(){return Rp().defined(i).curve(o).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Wt(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Wt(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Wt(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Wt(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Wt(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Wt(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Wt(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}function Up(t){return t<0?-1:1}function Wp(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),l=(s*i+o*r)/(r+i);return(Up(s)+Up(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function Gp(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function iu(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-r)/3;t._context.bezierCurveTo(r+l,i+l*e,s-l,o-l*n,s,o)}function $o(t){this._context=t}$o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:iu(this,this._t0,Gp(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,iu(this,Gp(this,n=Wp(this,t,e)),n);break;default:iu(this,this._t0,n=Wp(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},Object.create($o.prototype).point=function(t,e){$o.prototype.point.call(this,e,t)};function Bo(t){return new $o(t)}function pk(t,e,n){const r=rh(t,e);return $c().domain(r).range(n)}function Yp(t,e,n){const[r,i]=rh(t,e);if(!(Number.isFinite(r)&&Number.isFinite(i)))return vo().domain([0,0]).range(n);let o;if(r<=0)o=Math.min(0,r);else{const c=i-r,u=(c>0?c:r)*.1;o=Math.max(0,r-u),o===r&&(o=Math.max(0,r*.9))}const l=i??0;return vo().domain([o,l]).nice().range(n)}function su(t,e,n,r){const i=Rp().x(e).y(n);return r?.smooth!==!1&&i.curve(Bo),i(t)??""}function mk(t={}){const e=ne.useRef(null),n=ne.useMemo(()=>({top:t.top??16,right:t.right??16,bottom:t.bottom??32,left:t.left??48}),[t.bottom,t.left,t.right,t.top]),[r,i]=ne.useState({width:0,height:0});ne.useLayoutEffect(()=>{if(!e.current)return;const l=new ResizeObserver(c=>{for(const u of c){const{width:d,height:f}=u.contentRect;i({width:d,height:f})}});return l.observe(e.current),()=>l.disconnect()},[]);const s=Math.max(0,r.width-n.left-n.right),o=Math.max(0,r.height-n.top-n.bottom);return{width:r.width,height:r.height,innerWidth:s,innerHeight:o,margin:n,ref:e}}const Vp=ne.createContext(null);function Pr(){return ne.useContext(Vp)}const Zp=({height:t=240,margin:e,width:n,className:r="fdp-chart",children:i,role:s="group",ariaLabel:o})=>{const l=mk(e),c={height:t,position:"relative"};return n!==void 0&&(c.width=typeof n=="number"?`${n}px`:n),a.jsx("div",{ref:l.ref,className:r,style:c,role:s,"aria-label":o,children:a.jsx(Vp.Provider,{value:l,children:i})})},au=ne.createContext(null),oi=()=>ne.useContext(au),qp=({series:t,innerWidth:e,innerHeight:n,parseX:r,children:i,xTickCount:s=6,yTickCount:o=5,yDomain:l,xPadding:c,yPadding:u,yBottomGapPx:d})=>{const f=Pr(),p=e??f?.innerWidth??0,h=n??f?.innerHeight??0,g=ne.useMemo(()=>t.flatMap(b=>b.data),[t]),m=ne.useCallback(b=>{if(r)return r(b);const _=b.x;return _ instanceof Date?_:new Date(_)},[r]),y=c??6,w=u??6,M=ne.useMemo(()=>pk(g,m,[y,Math.max(0,p-y)]),[g,m,p,y]),j=ne.useMemo(()=>{const b=Math.max(0,d??0),_=Math.max(0,h-(w+b));if(l){const N=Yp([],C=>C.y,[_,w]);return N.domain(l),N}return Yp(g,N=>N.y,[_,w])},[g,h,l,w,d]),v=ne.useMemo(()=>({xScale:M,yScale:j,getXTicks:(b=s)=>M.ticks(b),getYTicks:(b=o)=>j.ticks(b)}),[M,j,s,o]);return a.jsx(au.Provider,{value:v,children:i})},Fs=16,$s=6,Xp=16,Jp=4,Kp=6,Qp=3,em=void 0,ou=({type:t,scale:e,tickCount:n,tickValues:r,formatTick:i,label:s,offset:o,className:l,minLabelSpacing:c,maxTickLabelLength:u,autoMinLabelSpacing:d=t==="x",labelAngle:f=0,allowLabelWrap:p=!0,tickFormatPreset:h,yZeroBreak:g})=>{const m=oi(),y=Pr(),w=e||(t==="x"?m?.xScale:m?.yScale),M=n??(t==="x"?6:5),j=typeof i=="function",v=ne.useMemo(()=>{if(j||!h)return;const N=C=>new Intl.DateTimeFormat(void 0,C);switch(h){case"dayShortMonth":return C=>{const x=C instanceof Date?C:new Date(C);return`${x.getDate()}
${N({month:"short"}).format(x)}`};case"dayShortMonthYear":return C=>{const x=C instanceof Date?C:new Date(C);return`${x.getDate()}
${N({month:"short"}).format(x)} ${x.getFullYear()}`};case"shortMonth":return C=>{const x=C instanceof Date?C:new Date(C);return N({month:"short"}).format(x)};case"shortMonthYear":return C=>{const x=C instanceof Date?C:new Date(C);return`${N({month:"short"}).format(x)} ${x.getFullYear()}`};case"hourMinute":return C=>{const x=C instanceof Date?C:new Date(C);return N({hour:"2-digit",minute:"2-digit"}).format(x)};default:return}},[j,h]);let b=j?i:v||(N=>String(N));const _=ne.useMemo(()=>r&&Array.isArray(r)?r:w?typeof w.ticks=="function"?w.ticks(M):w.domain?w.domain():[]:[],[w,M,r]);if(t==="x"&&!j&&!h&&_.length&&_.every(N=>N instanceof Date)){const N=_[0],C=_[_.length-1],x=C.getTime()-N.getTime(),k=24*3600*1e3,F=365*k,D=N.getFullYear()===C.getFullYear(),P=new Intl.DateTimeFormat(void 0,{month:"short"});if(x<2*k){const I=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"});b=L=>I.format(L)}else if(x<32*k)b=I=>{const L=I;return`${L.getDate()} ${P.format(L)}`};else if(x<F&&D)b=I=>P.format(I);else if(x<2*F){const I=new Set;b=L=>{const E=L,z=E.getMonth();return I.has(z)||I.add(z),`${P.format(E)} ${E.getFullYear()}`}}else b=I=>String(I.getFullYear())}if(!w||!y)return null;if(t==="x"){const N=o??y.innerHeight,C=typeof w.bandwidth=="function",x=C?w.bandwidth():0,k=P=>{const I=w(P);return C?I+x/2:I};let F=c??0;if(d&&c==null){const P=_.map(L=>b(L).replace(/\n.*/g,"")),I=P.length?P.reduce((L,E)=>L+E.length,0)/P.length:0;F=Math.max(12,Math.round(I*6+4))}const D=ne.useMemo(()=>{if(r&&Array.isArray(r)||F<=0)return _;const P=[];let I=-1/0;for(const L of _){const E=k(L);E-I>=F&&(P.push(L),I=E)}return P},[_,w,F,r,C,x]);return a.jsxs("g",{className:["fdp-axis","fdp-axis--x",l].filter(Boolean).join(" "),transform:`translate(0,${N})`,fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[a.jsx("line",{x1:0,x2:y.innerWidth,y1:0,y2:0,stroke:"currentColor"}),D.map((P,I)=>{const L=b(P),E=u&&L.length>u?L.slice(0,Math.max(1,u-1))+"â€¦":L,z=p?E.split(/\n/):[E.replace(/\n/g," ")],G=f<0?"end":f>0?"start":"middle";return a.jsxs("g",{transform:`translate(${k(P)},0)`,children:[a.jsx("line",{y2:6,stroke:"currentColor"}),a.jsxs("text",{y:9,textAnchor:G,className:"fdp-axis__tick",dominantBaseline:"hanging",transform:f?`rotate(${f})`:void 0,fontFamily:"inherit",children:[z.map((ee,T)=>a.jsx("tspan",{x:0,dy:T===0?0:"1.1em",children:ee},T)),E!==L&&a.jsx("title",{children:L})]})]},P?.toString?.()||I)})]})}return a.jsxs("g",{className:["fdp-axis","fdp-axis--y",l].filter(Boolean).join(" "),fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[(()=>{const N=!!g?.enabled,C=Math.max($s,g?.gapPx??Fs);if(!N)return a.jsx("line",{x1:0,x2:0,y1:0,y2:y.innerHeight,stroke:"currentColor"});const x=Math.max(0,y.innerHeight-C);return a.jsx("line",{x1:0,x2:0,y1:0,y2:x,stroke:"currentColor"})})(),_.map((N,C)=>{const x=b(N),k=u&&x.length>u?x.slice(0,Math.max(1,u-1))+"â€¦":x,F=p?k.split(/\n/):[k.replace(/\n/g," ")];if(!!g?.enabled){const P=Math.max($s,g?.gapPx??Fs),I=Math.max(0,y.innerHeight-P);if(w(N)>I-1)return null}return a.jsxs("g",{transform:`translate(0,${w(N)})`,children:[a.jsx("line",{x2:-6,stroke:"currentColor"}),a.jsxs("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:[F.map((P,I)=>a.jsx("tspan",{x:-9,dy:I===0?0:"1.1em",children:P},I)),k!==x&&a.jsx("title",{children:x})]})]},N?.toString?.()||C)}),!!g?.enabled&&(()=>{const N=Math.max($s,g?.gapPx??Fs),C=y.innerHeight,k=Math.max(0,C-N),F=k,P=Math.max(4,C-F),I=Jp,L=Kp,E=Math.max(1,Math.round(g?.zigZag?.amplitudePx??I)),z=Math.max(1,Math.round(g?.zigZag?.stepXPx??Qp)),G=g?.zigZag?.heightPx??em,ee=Math.max(4,Math.round(G??0));let T,K;if(g?.zigZag?.heightPx&&g.zigZag.heightPx>0){const q=Math.max(4,Math.min(P-2,ee));T=Math.max(1,Math.floor(q/(2*E))),K=Math.max(0,Math.min(q,T*2*E))}else typeof g?.zigZag?.cycles=="number"&&g?.zigZag?.cycles>0?(T=Math.max(1,Math.round(g.zigZag.cycles)),K=T*2*E,K=Math.min(K,P-2),T=Math.max(1,Math.floor(K/(2*E)))):(T=L,K=Math.min(P-2,T*2*E),T=Math.max(1,Math.floor(K/(2*E))));const O=F+(P-K)/2,B=O+K;let J="M0,0";const $=K>0?Math.max(0,Math.floor((K-E)/(2*E))):0,R=Math.max(0,(K-$*2*E)/2),H=E>0?z*(R/E):0;R>0&&(J+=` l${H},${R}`);for(let q=0;q<$;q++)J+=` l-${z},${E} l${z},${E}`;return R>0&&(J+=` l-${H},${R}`),a.jsxs("g",{children:[a.jsx("line",{x1:0,x2:0,y1:k,y2:O,stroke:"currentColor"}),a.jsx("g",{transform:`translate(0,${O})`,"aria-hidden":"true",children:a.jsx("path",{d:J,stroke:"currentColor",fill:"none"})}),a.jsx("line",{x1:0,x2:0,y1:B,y2:C,stroke:"currentColor"}),a.jsx("g",{transform:`translate(0,${C})`,children:a.jsx("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:"0"})})]})})(),s&&a.jsx("text",{transform:"rotate(-90)",x:-y.innerHeight/2,y:-y.margin.left+12,textAnchor:"middle",className:"fdp-axis__label",fontFamily:"inherit",children:s})]})},tm=({axis:t="y",tickCount:e,stroke:n="var(--fdp-chart-grid,#e5e5e5)",dasharray:r="2 4",className:i})=>{const s=oi(),o=Pr();if(!s||!o)return null;const l=t==="y"?s.getYTicks(e):s.getXTicks(e);return a.jsxs("g",{className:["fdp-grid",i].filter(Boolean).join(" "),children:[t==="y"&&l.map((c,u)=>a.jsx("line",{x1:0,x2:o.innerWidth,y1:s.yScale(c),y2:s.yScale(c),stroke:n,strokeDasharray:r},u)),t==="x"&&l.map((c,u)=>a.jsx("line",{y1:0,y2:o.innerHeight,x1:s.xScale(c),x2:s.xScale(c),stroke:n,strokeDasharray:r},u))]})},Bs={color:{"data-viz":{$type:"color",categorical:{1:{$value:"{color.primary.blue}",$description:"Series 1 â€“ NHS Blue (brand core)"},2:{$value:"#41B6E6",$description:"Series 2 â€“ NHS Light Blue (new)"},3:{$value:"{color.secondary.aqua-green}",$description:"Series 3 â€“ NHS Aqua Green (existing)"},4:{$value:"#78BE20",$description:"Series 4 â€“ NHS Light Green (new)"},5:{$value:"{color.primary.green}",$description:"Series 5 â€“ NHS Green (existing)"},6:{$value:"{color.secondary.warm-yellow}",$description:"Series 6 â€“ NHS Warm Yellow (existing; distinct from focus yellow)"},7:{$value:"#ED4F00",$description:"Series 7 â€“ NHS Tangerine (new; warmer/deeper than existing orange)"},8:{$value:"{color.secondary.pink}",$description:"Series 8 â€“ NHS Pink (existing)"},9:{$value:"#E317AA",$description:"Series 9 â€“ NHS Bright Pink (new vivid accent)"},10:{$value:"#880FB8",$description:"Series 10 â€“ NHS Light Purple (new mid purple)"},11:{$value:"{color.primary.purple}",$description:"Series 11 â€“ NHS Purple (existing dark purple)"},12:{$value:"#9A6324",$description:"Series 12 â€“ NHS Brown (new; earth neutral)"}},neutral:{comparison:{$value:"{color.grey.1}",$description:"Neutral comparison series (optional)"}},region:{$comment:"Fixed colours for NHS geographical regions; prefer stable mapping for maps. London colour updated (#78BE21 â€“ light green).","north-east":{$value:"{color.primary.blue}",$description:"North East â€“ NHS Blue"},"north-west":{$value:"#41B6E6",$description:"North West â€“ NHS Light Blue"},"east-of-england":{$value:"{color.primary.purple}",$description:"East of England â€“ NHS Purple"},midlands:{$value:"{color.secondary.pink}",$description:"Midlands â€“ NHS Pink"},london:{$value:"#78BE21",$description:"London â€“ NHS Light Green (new)"},"south-west":{$value:"#FAE100",$description:"South West â€“ NHS Yellow variant (new)"},"south-east":{$value:"#ed8b00",$description:"South East â€“ NHS Orange (existing base orange)"}},severity:{$comment:"Semantic severity / alert colours (light background ramp â†’ critical).",low:{$value:"{color.secondary.pale-yellow}",$description:"Low severity â€“ pale yellow background"},moderate:{$value:"{color.secondary.warm-yellow}",$description:"Moderate severity â€“ warm yellow"},high:{$value:"{color.secondary.orange}",$description:"High severity â€“ orange"},critical:{$value:"{color.primary.red}",$description:"Critical severity â€“ red"}},"org-level":{$comment:"Organisational level semantic colours (stable NHS brand mappings).",trust:{$value:"{color.primary.blue}",$description:"Trust â€“ NHS Blue"},ambulance:{$value:"{color.primary.green}",$description:"Ambulance â€“ NHS Green"},icb:{$value:"{color.primary.dark-pink}",$description:"ICB â€“ NHS Dark Pink"},region:{$value:"{color.primary.purple}",$description:"Region â€“ NHS Purple"}},stroke:{$comment:"Automatic contrast stroke colours for overlays / borders. Light fills get dark stroke; dark fills get white stroke.",categorical:{1:{$value:"#ffffff",$description:"Stroke for series 1 (blue)"},2:{$value:"#212b32",$description:"Stroke for series 2 (light blue)"},3:{$value:"#212b32",$description:"Stroke for series 3 (aqua green)"},4:{$value:"#212b32",$description:"Stroke for series 4 (light green)"},5:{$value:"#ffffff",$description:"Stroke for series 5 (green)"},6:{$value:"#212b32",$description:"Stroke for series 6 (warm yellow)"},7:{$value:"#ffffff",$description:"Stroke for series 7 (tangerine)"},8:{$value:"#ffffff",$description:"Stroke for series 8 (pink)"},9:{$value:"#ffffff",$description:"Stroke for series 9 (bright pink)"},10:{$value:"#ffffff",$description:"Stroke for series 10 (light purple)"},11:{$value:"#ffffff",$description:"Stroke for series 11 (purple)"},12:{$value:"#ffffff",$description:"Stroke for series 12 (brown)"}},region:{$comment:"Region stroke colours derived from fill colours: dark fills lightened ~35%; light fills darkened ~25% for consistent contrast without defaulting to pure white/black.","north-east":{$value:"#5996D1",$description:"Stroke for North East (blue lightened 35%)"},"north-west":{$value:"#3189AD",$description:"Stroke for North West (light blue darkened 25%)"},"east-of-england":{$value:"#7A59A3",$description:"Stroke for East of England (purple lightened 35%)"},midlands:{$value:"#CA71A4",$description:"Stroke for Midlands (pink lightened 35%)"},london:{$value:"#5A8F19",$description:"Stroke for London (light green darkened 25%)"},"south-west":{$value:"#BCA900",$description:"Stroke for South West (yellow darkened 25%)"},"south-east":{$value:"#B26800",$description:"Stroke for South East (orange darkened 25%)"}},severity:{$comment:"Contrast strokes for severity colours (light backgrounds use dark stroke; dark backgrounds use white).",low:{$value:"#212b32",$description:"Stroke for low severity (pale yellow fill)"},moderate:{$value:"#212b32",$description:"Stroke for moderate severity (warm yellow fill)"},high:{$value:"#212b32",$description:"Stroke for high severity (orange fill)"},critical:{$value:"#ffffff",$description:"Stroke for critical severity (red fill)"}},"org-level":{$comment:"Contrast strokes for organisational level colours (all dark brand fills so white stroke for consistency).",trust:{$value:"#ffffff",$description:"Stroke for trust (blue fill)"},ambulance:{$value:"#ffffff",$description:"Stroke for ambulance (green fill)"},icb:{$value:"#ffffff",$description:"Stroke for ICB (dark pink fill)"},region:{$value:"#ffffff",$description:"Stroke for region (purple fill)"}}},spc:{$comment:"SPC (Statistical Process Control) semantic variation colours aligned to SPCChart.scss and SPCIcons.",improvement:{$value:"#00B0F0",$description:"SPC special cause improvement (favourable)"},concern:{$value:"#E46C0A",$description:"SPC special cause concern (deteriorating)"},"no-judgement":{$value:"#490092",$description:"SPC special cause (no directional judgement)"},"common-cause":{$value:"#A6A6A6",$description:"SPC common cause (baseline variation)"},"assurance-pass":{$value:"#00823B",$description:"SPC assurance pass indicator (process capable)"},"assurance-fail":{$value:"#DA291C",$description:"SPC assurance fail indicator (process not capable)"},gradient:{$comment:"Opacity stops for SPC icon gradient wash (applied top-left -> bottom-right). Consumers build gradients using these opacities + base colour.",stop:{"start-opacity":{$value:"0.18",$description:"Start stop opacity (0%) for classic variant wash"},"mid-opacity":{$value:"0.06",$description:"Mid stop opacity (~65-75%)"},"end-opacity":{$value:"0",$description:"End stop opacity (100%)"},"triangle-start-opacity":{$value:"0.18",$description:"Start opacity for triangle variants (kept aligned)"},"triangle-mid-opacity":{$value:"0.06",$description:"Mid opacity for triangle variants"},"triangle-end-opacity":{$value:"0",$description:"End opacity for triangle variants"}}},stroke:{$comment:"Contrast stroke colours for SPC variation fills.",improvement:{$value:"#000000",$description:"Stroke for improvement points"},concern:{$value:"#000000",$description:"Stroke for concern points"},"no-judgement":{$value:"#000000",$description:"Stroke for no-judgement points"},"common-cause":{$value:"#ffffff",$description:"Stroke for common cause points"},"assurance-pass":{$value:"#000000",$description:"Stroke for assurance pass points"},"assurance-fail":{$value:"#000000",$description:"Stroke for assurance fail points"}}}}}},zo={color:{primary:{$type:"color",blue:{$value:"#005eb8",$description:"NHS Blue - Primary brand color"},"blue-active":{$value:"#002f5c",$description:"NHS Active Blue (50% shade) â€“ alias of button/login active; promoted for general reuse"},white:{$value:"#ffffff",$description:"NHS White"},black:{$value:"#212b32",$description:"NHS Black"},green:{$value:"#007f3b",$description:"NHS Green"},purple:{$value:"#330072",$description:"NHS Purple"},"dark-pink":{$value:"#7c2855",$description:"NHS Dark Pink"},red:{$value:"#d5281b",$description:"NHS Red"},"light-purple":{$value:"#880FB8",$description:"NHS Light Purple (data viz promoted)"},yellow:{$value:"#ffeb3b",$description:"NHS Yellow"}},secondary:{$type:"color","pale-yellow":{$value:"#fff9c4",$description:"NHS Pale Yellow"},"warm-yellow":{$value:"#ffb81c",$description:"NHS Warm Yellow"},"region-yellow":{$value:"#FAE100",$description:"NHS Region Yellow (maps)"},orange:{$value:"#ed8b00",$description:"NHS Orange"},tangerine:{$value:"#ED4F00",$description:"NHS Tangerine (data viz promoted)"},"aqua-green":{$value:"#00a499",$description:"NHS Aqua Green"},"light-blue":{$value:"#41B6E6",$description:"NHS Light Blue (data viz promoted)"},pink:{$value:"#ae2573",$description:"NHS Pink"},"bright-pink":{$value:"#E317AA",$description:"NHS Bright Pink (data viz promoted)"},"light-green":{$value:"#78BE20",$description:"NHS Light Green (data viz promoted)"},brown:{$value:"#9A6324",$description:"NHS Brown (data viz promoted neutral)"}},grey:{1:{$value:"#4c6272",$description:"NHS Grey 1 - Darkest grey"},2:{$value:"#768692",$description:"NHS Grey 2 - Darker grey"},3:{$value:"#aeb7bd",$description:"NHS Grey 3 - Medium grey"},4:{$value:"#d8dde0",$description:"NHS Grey 4 - Light grey"},5:{$value:"#f0f4f5",$description:"NHS Grey 5 - Lightest grey"},$type:"color"},accessibility:{$type:"color",$comment:"Accessibility-oriented color tokens. Includes CVD-safe pairs and Okabeâ€“Ito colors. Use these for positive/negative semantics and colour-blindâ€“friendly defaults.","okabe-ito":{green:{$value:"#009E73",$description:"Okabeâ€“Ito green (CVD-safe) â€“ recommended positive"},vermillion:{$value:"#D55E00",$description:"Okabeâ€“Ito vermillion / redâ€“orange (CVD-safe) â€“ recommended negative"}},"cvd-safe":{blue:{$value:"#1f77b4",$description:"CVD-safe blue (pairs with orange); widely used in Matplotlib/Tableau sets"},orange:{$value:"#ff7f0e",$description:"CVD-safe orange (pairs with blue)"}},positive:{$value:"{color.accessibility.okabe-ito.green}",$description:"Accessibility semantic alias â€“ positive"},negative:{$value:"{color.accessibility.okabe-ito.vermillion}",$description:"Accessibility semantic alias â€“ negative"}}}},gk=["#005eb8","#0072ce","#41b6e6","#00a499","#7c2855","#330072","#d5281b","#ffb81c","#fae100","#4c6272","#768692","#aeb7bd"];let lu=null,cu=null,uu=null,nm="optimized";function yk(){const t={color:{...zo.color,...Bs.color}},e=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const s=r.split(".").reduce((l,c)=>l?l[c]:void 0,t);if(!s)return;const o=s.$value||s.value;if(typeof o=="string"&&/^\{.+\}$/.test(o))return e(o.slice(1,-1),i);if(typeof o=="string")return o},n=[];try{for(let r=1;r<=12;r++){const i=`color.data-viz.categorical.${r}`,s=e(i);if(!s)throw new Error(`Missing token ${i}`);n.push(s)}return n}catch{return gk}}function bk(){return lu||(lu=yk()),lu}function xk(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t.trim());return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function du(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vk(t,e,n){const r=du(t),i=du(e),s=du(n),o=r*.4124+i*.3576+s*.1805,l=r*.2126+i*.7152+s*.0722,c=r*.0193+i*.1192+s*.9505;return{x:o*100,y:l*100,z:c*100}}function _k(t,e,n){let o=t/95.047,l=e/100,c=n/108.883;const u=d=>d>.008856?Math.cbrt(d):7.787*d+16/116;return o=u(o),l=u(l),c=u(c),{L:116*l-16,a:500*(o-l),b:200*(l-c)}}function rm(t){const e=xk(t);if(!e)return null;const n=vk(e.r,e.g,e.b);return _k(n.x,n.y,n.z)}function im(t,e){const n=t.L-e.L,r=t.a-e.a,i=t.b-e.b;return Math.sqrt(n*n+r*r+i*i)}function wk(){const t=bk();if(t.length<=2)return t.slice();const e=t.map(o=>rm(o));let n=0,r=-1;for(let o=0;o<t.length;o++){const l=e[o];if(!l)continue;let c=0,u=0;for(let f=0;f<t.length;f++)o!==f&&e[f]&&(c+=im(l,e[f]),u++);const d=c/Math.max(1,u);d>r&&(r=d,n=o)}const i=new Set(t.map((o,l)=>l)),s=[];for(s.push(n),i.delete(n);i.size;){let o=Array.from(i)[0],l=-1;for(const c of i){const u=e[c];if(!u)continue;let d=1/0;for(const f of s){const p=e[f];if(p){const h=im(u,p);h<d&&(d=h)}}d>l&&(l=d,o=c)}s.push(o),i.delete(o)}return s.map(o=>t[o])}function Sk(){return cu||(cu=wk()),cu}function kk(t,e,n){const r=(t+16)/116,i=e/500+r,s=r-n/200,o=d=>{const f=d*d*d;return f>.008856?f:(d-16/116)/7.787},l=o(i)*95.047,c=o(r)*100,u=o(s)*108.883;return{X:l,Y:c,Z:u}}function Ck(t,e,n){t/=100,e/=100,n/=100;let r=t*3.2406+e*-1.5372+n*-.4986,i=t*-.9689+e*1.8758+n*.0415,s=t*.0557+e*-.204+n*1.057;const o=l=>l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055;return r=Math.min(1,Math.max(0,o(r))),i=Math.min(1,Math.max(0,o(i))),s=Math.min(1,Math.max(0,o(s))),{r:Math.round(r*255),g:Math.round(i*255),b:Math.round(s*255)}}function Nk(t,e,n){return`#${[t,e,n].map(r=>r.toString(16).padStart(2,"0")).join("")}`}function Mk(t,e){const n=rm(t);if(!n)return t;const r=Math.min(100,Math.max(0,n.L+e)),{X:i,Y:s,Z:o}=kk(r,n.a,n.b),l=Ck(i,s,o);return Nk(l.r,l.g,l.b)}function jk(){const t=Sk(),n=[12,-12,24,-24].map(i=>t.map(s=>Mk(s,i))),r=[...t];return n.forEach(i=>r.push(...i)),r}function Tk(){return(!uu||Dk())&&(uu=jk(),sm=nm),uu}let sm=null;function Dk(){return sm!==nm}function Xn(t){const e=Tk();return e[t%e.length]}let Wi=null,zs=null,Os=null,Hs=null;function Ik(){const t=Bs?.color?.["data-viz"]?.stroke;if(t){const e=t.categorical||{};Wi=[];for(let s=1;s<=12;s++){const o=e[String(s)]?.$value||e[String(s)]?.value;Wi.push(typeof o=="string"?o:"#212b32")}const n=t.region||{};zs={},Object.keys(n).forEach(s=>{const o=n[s]?.$value||n[s]?.value;typeof o=="string"&&(zs[s]=o)});const r=t.severity||{},i=t["org-level"]||{};Hs={},Object.keys(i).forEach(s=>{const o=i[s]?.$value||i[s]?.value;typeof o=="string"&&(Hs[s]=o)}),Os={},Object.keys(r).forEach(s=>{const o=r[s]?.$value||r[s]?.value;typeof o=="string"&&(Os[s]=o)})}}function Oo(){(!Wi||!zs||!Os||!Hs)&&Ik()}function li(t){return Oo(),Wi?Wi[t%Wi.length]:"#212b32"}function Lk(t){return Oo(),zs?zs[t]:void 0}function Ho(t,e){return Lk(t)||li(e)}const fu=["low","moderate","high","critical"];let hu=null;function Ak(){const t={color:{...zo.color,...Bs.color}},e=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const s=r.split(".").reduce((l,c)=>l?l[c]:void 0,t);if(!s)return;const o=s.$value||s.value;return typeof o=="string"&&/^\{.+\}$/.test(o)?e(o.slice(1,-1),i):typeof o=="string"?o:void 0},n={};return fu.forEach(r=>{const i=e(`color.data-viz.severity.${r}`);i&&(n[r]=i)}),n}function am(){return hu||(hu=Ak()),hu}function Ek(t){return am()[t.toLowerCase()]}function Pk(t,e){return Ek(t)||am()[fu[e%fu.length]]||Xn(e)}function Fk(t){return Oo(),Os?Os[t]:void 0}function $k(t,e){return Fk(t)||li(e)}const pu=["trust","ambulance","icb","region"];let mu=null;function Bk(){const t={color:{...zo.color,...Bs.color}},e=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const s=r.split(".").reduce((l,c)=>l?l[c]:void 0,t);if(!s)return;const o=s.$value||s.value;return typeof o=="string"&&/^\{.+\}$/.test(o)?e(o.slice(1,-1),i):typeof o=="string"?o:void 0},n={};return pu.forEach(r=>{const i=e(`color.data-viz.org-level.${r}`);i&&(n[r]=i)}),n}function om(){return mu||(mu=Bk()),mu}function zk(t){return om()[t.toLowerCase()]}function Ok(t,e){return zk(t)||om()[pu[e%pu.length]]||Xn(e)}function Hk(t){return Oo(),Hs?Hs[t]:void 0}function Rk(t,e){return Hk(t)||li(e)}let gu=null;const Uk=["north-east","north-west","east-of-england","midlands","london","south-west","south-east"];function Wk(t){return t.trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Gk(){const t={color:{...zo.color,...Bs.color}},e=(i,s=new Set)=>{if(s.has(i))return;s.add(i);const o=i.split(".").reduce((c,u)=>c?c[u]:void 0,t);if(!o)return;const l=o.$value||o.value;return typeof l=="string"&&/^\{.+\}$/.test(l)?e(l.slice(1,-1),s):typeof l=="string"?l:void 0},n={},r=[];return Uk.forEach(i=>{const s=e(`color.data-viz.region.${i}`);s?n[i]=s:r.push(i)}),process.env.NODE_ENV!=="production"&&(Object.keys(n).length===0?console.warn("[DataViz] Region colour tokens unresolved  falling back to categorical colours."):r.length&&console.warn(`[DataViz] Missing region colour tokens: ${r.join(", ")}.`)),n}function Yk(){return gu||(gu=Gk()),gu}function Vk(t){return Yk()[Wk(t)]}function Gi(t,e){return Vk(t)||Xn(e)}const lm=ne.createContext(null),Rs=()=>ne.useContext(lm),Zk=({initialHiddenIds:t=[],children:e,hiddenIds:n,onChange:r})=>{const[i,s]=ne.useState(()=>new Set(t)),o=n!==void 0,l=ne.useMemo(()=>o?new Set(n):i,[o,n,i]),c=ne.useCallback(d=>{o||s(new Set(d)),r?.(Array.from(d))},[o,r]),u=ne.useMemo(()=>({hiddenIds:l,isHidden:d=>l.has(d),toggle:d=>{const f=new Set(l);f.has(d)?f.delete(d):f.add(d),c(f)},showOnly:d=>{c(new Set)},showAll:()=>c(new Set),setHidden:d=>c(new Set(Array.isArray(d)?d:Array.from(d)))}),[l,c]);return a.jsx(lm.Provider,{value:u,children:e})},cm=ne.createContext(null),_r=()=>ne.useContext(cm),um=({children:t,maxDistance:e=40,wrapAround:n=!1})=>{const r=oi(),i=Rs(),[s,o]=ne.useState(null),l=ne.useRef(new Map),[c,u]=ne.useState([]),d=ne.useCallback((N,C)=>{l.current.set(N,C)},[]),f=ne.useCallback(N=>{l.current.delete(N)},[]),p=ne.useCallback((N,C)=>{if(!r)return;const{xScale:x,yScale:k}=r;let F=null,D=1/0;l.current.forEach((P,I)=>{P.forEach((L,E)=>{const z=x(L.x),G=k(L.y),ee=z-N,T=G-C,K=Math.sqrt(ee*ee+T*T);K<D&&(D=K,F={seriesId:I,index:E,x:L.x,y:L.y,clientX:z,clientY:G})})}),F&&D<=e?o(F):o(null)},[r,e]),h=ne.useCallback(()=>o(null),[]);ne.useEffect(()=>{if(!s){u([]);return}if(!r)return;const{xScale:N,yScale:C}=r,x=[];l.current.forEach((k,F)=>{k.forEach((D,P)=>{(s.x instanceof Date&&D.x instanceof Date?D.x.getTime()===s.x.getTime():D.x===s.x)&&x.push({seriesId:F,index:P,x:D.x,y:D.y,clientX:N(D.x),clientY:C(D.y)})})}),x.sort((k,F)=>k.seriesId.localeCompare(F.seriesId)),u(x)},[s,r]);const g=ne.useCallback(N=>{if(!s)return;const C=l.current.get(s.seriesId);if(!C)return;let x=s.index+N;if(x<0||x>=C.length){if(!n)return;x=(x+C.length)%C.length}const k=C[x];if(!r)return;const{xScale:F,yScale:D}=r;o({seriesId:s.seriesId,index:x,x:k.x,y:k.y,clientX:F(k.x),clientY:D(k.y)})},[s,r,n]),m=ne.useCallback(N=>{let C=Array.from(l.current.keys());if(i&&(C=C.filter(z=>!i.isHidden(z))),C.length===0)return;if(!s){const z=C[0],G=l.current.get(z);if(!G||!r)return;const{xScale:ee,yScale:T}=r,K=G[0];o({seriesId:z,index:0,x:K.x,y:K.y,clientX:ee(K.x),clientY:T(K.y)});return}const x=C.indexOf(s.seriesId);if(x===-1)return;let k=x+N;if(k<0||k>=C.length){if(!n)return;k=(k+C.length)%C.length}const F=C[k],D=l.current.get(F);if(!D||!r)return;const P=Math.min(s.index,D.length-1),I=D[P],{xScale:L,yScale:E}=r;o({seriesId:F,index:P,x:I.x,y:I.y,clientX:L(I.x),clientY:E(I.y)})},[s,r,n,i]),y=ne.useCallback(()=>{let N=Array.from(l.current.keys());if(i&&(N=N.filter(P=>!i.isHidden(P))),N.length===0)return;const C=s?s.seriesId:N[0],x=l.current.get(C);if(!x||x.length===0||!r)return;const k=x[0],{xScale:F,yScale:D}=r;o({seriesId:C,index:0,x:k.x,y:k.y,clientX:F(k.x),clientY:D(k.y)})},[s,r,i]),w=ne.useCallback(()=>{let N=Array.from(l.current.keys());if(i&&(N=N.filter(I=>!i.isHidden(I))),N.length===0)return;const C=s?s.seriesId:N[0],x=l.current.get(C);if(!x||x.length===0||!r)return;const k=x.length-1,F=x[k],{xScale:D,yScale:P}=r;o({seriesId:C,index:k,x:F.x,y:F.y,clientX:D(F.x),clientY:P(F.y)})},[s,r,i]),M=ne.useCallback(()=>g(1),[g]),j=ne.useCallback(()=>g(-1),[g]),v=ne.useCallback(()=>m(1),[m]),b=ne.useCallback(()=>m(-1),[m]),_=ne.useMemo(()=>({focused:s,setFocused:o,aggregated:c,focusNearest:p,clear:h,registerSeries:d,unregisterSeries:f,focusNextPoint:M,focusPrevPoint:j,focusNextSeries:v,focusPrevSeries:b,focusFirstPoint:y,focusLastPoint:w}),[s,c,p,h,d,f,M,j,v,b,y,w]);return a.jsx(cm.Provider,{value:_,children:t})},dm=({series:t,seriesIndex:e,palette:n,showPoints:r,focusablePoints:i,focusIndex:s,parseX:o,visibilityMode:l="remove",strokeWidth:c=1,smooth:u=!0,gradientFillId:d,colors:f})=>{const p=oi();if(!p)return null;const{xScale:h,yScale:g}=p,y=Rs()?.isHidden(t.id)??!1,w=y&&l==="fade";if(y&&l==="remove")return null;const M=_r();ne.useEffect(()=>{if(!M)return;const C=t.data.map(x=>({x:o(x),y:x.y}));return M.registerSeries(t.id,C),()=>M.unregisterSeries(t.id)},[M,t.id,t.data,o]);const j=ne.useMemo(()=>su(t.data,C=>h(o(C)),C=>g(C.y),{smooth:u}),[t.data,h,g,o,u]),v=ne.useMemo(()=>{if(!t.data.length)return"";const[C]=g.domain(),x=ru().x(k=>h(o(k))).y0(()=>g(C)).y1(k=>g(k.y));return u&&x.curve(Bo),x(t.data)||""},[t.data,h,g,o,u]),b=f&&f[e],_=t.color||b||(n==="region"?Gi(t.id,e):Xn(e)),N=n==="region"?Ho(t.id,e):li(e);return a.jsxs("g",{className:"fdp-line-series","data-series":t.id,opacity:w?.25:1,"aria-hidden":w?!0:void 0,children:[d&&a.jsx("path",{d:v,fill:`url(#${d})`,stroke:"none",role:"presentation",className:"fdp-line-series__gradient"}),a.jsx("path",{d:j,fill:"none",stroke:_,strokeWidth:c,role:"presentation"}),r&&t.data.map((C,x)=>{const k=h(o(C)),F=g(C.y),D=i?0:-1,P=!w&&(i&&x===s||M?.focused?.seriesId===t.id&&M.focused.index===x),I=()=>{M&&!w&&M.setFocused({seriesId:t.id,index:x,x:o(C),y:C.y,clientX:k,clientY:F})},L=()=>{M&&M.focused?.seriesId===t.id&&M.focused.index===x&&M.clear()};return a.jsx("circle",{cx:k,cy:F,r:P?5:3.5,stroke:P?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":N,strokeWidth:P?2:1,fill:P?"var(--nhs-fdp-color-grey-3, #aeb7bd)":_,className:"fdp-line-point",tabIndex:w?-1:D,"aria-label":`${t.label||t.id} ${o(C).toDateString()} value ${C.y}`,"data-series":t.id,"data-index":x,onMouseEnter:I,onFocus:I,onMouseLeave:L,onBlur:L},x)})]})},qk=({polite:t=!0,format:e})=>{const n=_r(),[r,i]=ne.useState(""),s=ne.useRef("");return ne.useEffect(()=>{if(!n?.focused)return;const{focused:o,aggregated:l}=n;let c;if(l&&l.length>1){const u=l.map(f=>`${f.seriesId} ${f.y}`).join("; ");c=`${o.x instanceof Date?o.x.toDateString():String(o.x)} â€“ ${u}`}else c=e?e({seriesId:o.seriesId,x:o.x,y:o.y,index:o.index}):Xk(o.seriesId,o.x,o.y,o.index);if(c!==s.current){s.current=c,i("");const u=setTimeout(()=>i(c),10);return()=>clearTimeout(u)}},[n?.focused,e]),a.jsx("div",{"aria-live":t?"polite":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,margin:-1,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",border:0},children:r})};function Xk(t,e,n,r){const i=e instanceof Date?e.toDateString():String(e);return`Series ${t}, point ${r+1}, ${i}, value ${n}`}const Jk=()=>{const t=_r(),e=Pr();if(!t||!e||!t.focused)return null;const{focused:n,aggregated:r}=t,{innerWidth:i,innerHeight:s}=e,o=Math.min(Math.max(n.clientX,0),i),l=Math.min(Math.max(n.clientY,0),s),c=o+8,u=l-8,d=r.length>1,f=n.x instanceof Date?n.x.toDateString():String(n.x),p=d?f:`${f} â€¢ ${n.y}`,h=/\d+$/.exec(n.seriesId||""),g=h?parseInt(h[0],10)-1:0,m=Xn(g>=0?g:0)||"#005eb8",y="var(--nhs-fdp-color-primary-yellow,#ffeb3b)";return a.jsxs("g",{className:"fdp-tooltip-layer",pointerEvents:"none",children:[a.jsx("circle",{cx:o,cy:l,r:7,fill:"none",stroke:y,strokeWidth:3}),a.jsx("circle",{cx:o,cy:l,r:5,fill:"#000",stroke:y,strokeWidth:1.5}),a.jsx("circle",{cx:o,cy:l,r:2.5,fill:m,stroke:"#fff",strokeWidth:.5}),d?(()=>{const M=r.map(N=>`${N.seriesId}: ${N.y}`),j=[p,...M],v=j.reduce((N,C)=>Math.max(N,C.length),0),b=Math.max(90,v*6.2+16),_=16*j.length+8;return a.jsxs("g",{children:[a.jsx("rect",{x:c,y:u-_,rx:4,ry:4,width:b,height:_,fill:"#212b32",opacity:.92}),j.map((N,C)=>a.jsx("text",{x:c+8,y:u-_+6+16*(C+.7),fill:"#fff",fontSize:12,children:N},C))]})})():a.jsxs("g",{children:[a.jsx("rect",{x:c,y:u-24,rx:4,ry:4,width:Math.max(60,p.length*6.2),height:24,fill:"#212b32",opacity:.92}),a.jsx("text",{x:c+8,y:u-8,fill:"#fff",fontSize:12,children:p})]})]})},Kk=({items:t,palette:e="categorical",direction:n="row",interactive:r=!1,adjustStrokeForWhiteBackground:i=!0,hiddenIds:s,defaultHiddenIds:o=[],onVisibilityChange:l,formatAnnouncement:c})=>{const u=Rs(),d=!!(u&&!r&&!l&&s===void 0),f=r||d,p=t||[],h=s!==void 0,[g,m]=ne.useState(new Set(o)),y=h?new Set(s):g,[w,M]=ne.useState(""),j=v=>{if(d&&u){const D=u.isHidden(v);u.toggle(v);const I=p.find(E=>E.id===v)?.label||v,L=c?c(v,D,I):`${I} ${D?"shown":"hidden"}`;M(L);return}if(!f)return;const b=new Set(y),_=b.has(v);_?b.delete(v):b.add(v),h||m(b);const N=p.filter(D=>!b.has(D.id)).map(D=>D.id),C=Array.from(b);l?.(N,C);const k=p.find(D=>D.id===v)?.label||v,F=c?c(v,_,k):`${k} ${_?"shown":"hidden"}`;M(F)};return a.jsxs("div",{className:"fdp-legend-wrapper",children:[a.jsx("ul",{className:`fdp-legend fdp-legend--${n}`,children:p.map((v,b)=>{const _=v.palette||e,N=v.color||(_==="region"?Gi(v.id,b):_==="severity"?Pk(v.id,b):_==="org-level"?Ok(v.id,b):Xn(b));let C=v.stroke||(_==="region"?Ho(v.id,b):_==="severity"?$k(v.id,b):_==="org-level"?Rk(v.id,b):li(b));if(i&&C){const F=C.trim().toLowerCase();(F==="#fff"||F==="#ffffff"||F==="white"||/^rgb\(\s*255\s*,\s*255\s*,\s*255\s*\)$/.test(F))&&(C="#212b32")}const x=d&&u?u.isHidden(v.id):y.has(v.id),k=f?{"aria-pressed":!x,"aria-label":`${v.label} (${x?"show":"hide"})`,onClick:()=>j(v.id)}:{"aria-label":v.label};return a.jsxs("li",{className:`fdp-legend__item${x?" fdp-legend__item--hidden":""}`,children:[a.jsx("button",{type:"button",className:"fdp-legend__swatch",style:{backgroundColor:N,backgroundImage:v.patternDataUrl?`url(${v.patternDataUrl})`:void 0,backgroundSize:v.patternDataUrl?"auto":void 0,borderColor:C},...k}),a.jsx("span",{className:"fdp-legend__label",children:v.label})]},v.id)})}),f&&a.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite","aria-atomic":"true",children:w})]})},Qk=({series:t,seriesIndex:e,palette:n,parseX:r,areaOnly:i=!1,visibilityMode:s="remove",baselineY:o=0,smooth:l=!0,stacked:c,gradientFill:u=!0,colors:d})=>{const f=oi();if(!f)return null;const{xScale:p,yScale:h}=f,m=Rs()?.isHidden(t.id)??!1,y=m&&s==="fade";if(m&&s==="remove")return null;const w=_r();ne.useEffect(()=>{if(!w)return;const N=t.data.map(C=>({x:r(C),y:C.y}));return w.registerSeries(t.id,N),()=>w.unregisterSeries(t.id)},[w,t.id,t.data,r]);const M=d&&d[e],j=t.color||M||(n==="region"?Gi(t.id,e):Xn(e)),v=ne.useMemo(()=>c&&c.length===t.data.length?su(t.data,N=>p(r(N)),N=>{const C=t.data.indexOf(N);return h(c[C].y1)},{smooth:l}):su(t.data,N=>p(r(N)),N=>h(N.y),{smooth:l}),[t.data,c,p,h,r,l]),b=ne.useMemo(()=>{if(c&&c.length===t.data.length){const F=ru().x(D=>p(r(D))).y0((D,P)=>h(c[P].y0)).y1((D,P)=>h(c[P].y1));return l&&F.curve(Bo),F(t.data)||""}const[N,C]=h.domain();let x=o;x<N?x=N:x>C&&(x=C);const k=ru().x(F=>p(r(F))).y0(()=>h(x)).y1(F=>h(F.y));return l&&k.curve(Bo),k(t.data)||""},[t.data,c,p,h,r,o,l]),_=ne.useId();return a.jsxs("g",{className:"fdp-area-series","data-series":t.id,opacity:y?.25:1,"aria-hidden":y?!0:void 0,children:[u&&a.jsx("defs",{children:a.jsxs("linearGradient",{id:_,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:j,stopOpacity:.25}),a.jsx("stop",{offset:"100%",stopColor:j,stopOpacity:0})]})}),a.jsx("path",{className:"fdp-area-series__fill",d:b,fill:u?`url(#${_})`:j,...u?{}:{fillOpacity:.25},stroke:"none"}),!i&&a.jsx("path",{d:v,fill:"none",stroke:j,strokeWidth:1})]})},eC=({series:t,seriesIndex:e,seriesCount:n,palette:r,parseX:i,focusable:s=!0,widthFactor:o=.8,groupGap:l=2,barWidth:c,adaptive:u=!1,adaptiveGroupOccupancy:d=.9,visibilityMode:f="remove",colorMode:p="series",allSeries:h,stacked:g,gapRatio:m=.15,minBarWidth:y,gradientFill:w=!1,gradientStrokeMatch:M=!0,opacity:j=1,fadedOpacity:v=.25,flatFillOpacity:b=1,colors:_})=>{const N=Math.max(0,m),C=oi(),x=Pr();if(!C||!x)return null;const{xScale:k,yScale:F}=C,P=Rs()?.isHidden(t.id)??!1,I=P&&f==="fade";if(P&&f==="remove")return null;const L=_r();ne.useEffect(()=>{if(!L)return;const V=t.data.map(re=>({x:i(re),y:re.y}));return L.registerSeries(t.id,V),()=>L.unregisterSeries(t.id)},[L,t.id,t.data,i]);const E=typeof k.bandwidth=="function",z=E?k.bandwidth():void 0,G=ne.useMemo(()=>{if(z!=null)return z;const V=h&&h.length?h:[t],re=[];V.forEach(ue=>{ue.data.forEach(_e=>{const be=k(i(_e));Number.isFinite(be)&&re.push(be)})});const fe=re.sort((ue,_e)=>ue-_e);if(fe.length<=1)return 40;const X=[];for(let ue=1;ue<fe.length;ue++)X.push(fe[ue]-fe[ue-1]);return X.sort((ue,_e)=>ue-_e),(X[Math.floor(X.length/2)]||40)*o},[t.data,h,k,i,o,z]),{basePerBar:ee}=ne.useMemo(()=>{if(E){const fe=G,X=Math.max(1,(fe-l*(n-1))/n),se=t.barWidth??c;let ue=se?Math.min(se,fe):X;if(u){const _e=fe*Math.min(1,Math.max(.05,d)),be=Math.max(1,(_e-l*(n-1))/n);ue=se?Math.min(ue,be):be}return{basePerBar:ue}}const V=t.barWidth??c,re=Math.max(1,(G-l*(n-1))/n);if(u){const fe=h&&h.length?h:[t],X=[];fe.forEach(Ge=>Ge.data.forEach(Fe=>{const Be=k(i(Fe));Number.isFinite(Be)&&X.push(Be)})),X.sort((Ge,Fe)=>Ge-Fe);const se=[];for(let Ge=1;Ge<X.length;Ge++)se.push(X[Ge]-X[Ge-1]);se.sort((Ge,Fe)=>Ge-Fe);const _e=(se[Math.floor(se.length/2)]||G)*Math.min(1,Math.max(.05,d)),be=Math.max(1,(_e-l*(n-1))/n);return{basePerBar:V?Math.min(V,be):be}}return V?{basePerBar:Math.min(V,re)}:{basePerBar:re}},[E,G,l,n,c,t.barWidth,u,d,h,k,i]),T=ne.useMemo(()=>{if(E)return[];const V=[];return(h&&h.length?h:[t]).forEach(fe=>fe.data.forEach(X=>{const se=k(i(X));Number.isFinite(se)&&V.push(se)})),V.sort((fe,X)=>fe-X),Array.from(new Set(V))},[E,h,t,k,i]),K=ne.useMemo(()=>{if(E)return[];if(!T.length)return[];if(T.length===1)return[{center:T[0],left:0,right:x.innerWidth}];const V=[];for(let re=0;re<T.length;re++){const fe=T[re],X=re===0?0:(T[re-1]+fe)/2,se=re===T.length-1?x.innerWidth:(fe+T[re+1])/2;V.push({center:fe,left:Math.max(0,X),right:Math.min(x.innerWidth,se)})}return V},[E,T,x.innerWidth]),O=ne.useMemo(()=>{if(E||!K.length)return;const V=Math.min(1,Math.max(.05,o)),re=K.map(_e=>Math.max(2,_e.right-_e.left)),fe=re.map(_e=>Math.max(2,Math.min(_e-1,_e*V)));let X=Math.min(...fe);if(y)if(n<=1){const _e=Math.min(...re.map(be=>be-1));_e>=y&&X<y&&(X=Math.min(_e,y))}else{const _e=Math.min(...re.map(Q=>Q-1)),be=y*n+(n-1)*(y*N);be<=_e&&X<be&&(X=be)}if(n<=1)return y&&X<y&&re.every(be=>be>=y)?{groupWidth:y,barWidth:y}:{groupWidth:X,barWidth:X};let se=X/(n+(n-1)*N);return se<1&&(se=1),y&&se<y&&y*n+(n-1)*(y*N)<=X&&(se=y),{groupWidth:se*n+(n-1)*(se*N),barWidth:se}},[E,K,o,n,N,y]),B=_&&_[e]?_[e]:void 0,J=t.color||B||(r==="region"?Gi(t.id,e):Xn(e)),$=r==="region"?Ho(t.id,e):li(e),R=M&&(t.color||B)?J:$,H=Number.isFinite(F(0))?F(0):F.range()[0],q=ne.useId();return g&&g.length===t.data.length?a.jsxs("g",{className:"fdp-bar-series fdp-bar-series--stacked","data-series":t.id,opacity:I?v:j,"aria-hidden":I?!0:void 0,children:[w&&a.jsx("defs",{children:a.jsxs("linearGradient",{id:q,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:J,stopOpacity:.3}),a.jsx("stop",{offset:"60%",stopColor:J,stopOpacity:.14}),a.jsx("stop",{offset:"100%",stopColor:J,stopOpacity:.06})]})}),t.data.map((V,re)=>{const fe=i(V),X=k(E?V.x:fe);let se,ue;if(E)se=G,ue=X;else{const te=K.find(he=>Math.abs(he.center-X)<.5);if(!te||!O)se=ee,ue=X-ee/2;else{const{groupWidth:he}=O;se=he;let ge=X-he/2;ge<te.left&&(ge=te.left),ge+he>te.right&&(ge=Math.max(te.left,te.right-he)),ue=ge}}const _e=g[re],be=F(_e.y0),Q=F(_e.y1),Ge=Math.min(be,Q),Fe=Math.abs(Q-be)||1;if(!E&&y&&se<y){const te=K.find(he=>Math.abs(he.center-X)<.5);if(te){const he=Math.max(2,te.right-te.left-1),ge=Math.min(he,y);ge>se&&(se=ge,ue=Math.max(te.left,Math.min(te.right-se,X-se/2)))}}const Be=!I&&L?.focused?.seriesId===t.id&&L.focused.index===re,ve=()=>{!L||I||L.setFocused({seriesId:t.id,index:re,x:fe,y:_e.y1-_e.y0,clientX:ue+se/2,clientY:Ge})},W=()=>{L?.focused?.seriesId===t.id&&L.focused.index===re&&L.clear()};return a.jsx("rect",{x:ue,y:Ge,width:se,height:Fe,fill:w?`url(#${q})`:J,...w?{}:{fillOpacity:b},stroke:Be?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":w&&M?J:void 0,strokeWidth:Be?2:1,className:"fdp-bar fdp-bar--stacked",tabIndex:I||!s?-1:0,role:"graphics-symbol","aria-label":`${t.label||t.id} ${fe instanceof Date?fe.toDateString():fe} value ${_e.y1-_e.y0}`,onMouseEnter:ve,onFocus:ve,onMouseLeave:W,onBlur:W},re)})]}):a.jsxs("g",{className:"fdp-bar-series","data-series":t.id,opacity:I?v:j,"aria-hidden":I?!0:void 0,children:[w&&a.jsxs("defs",{children:[p==="series"&&a.jsxs("linearGradient",{id:q,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:J,stopOpacity:.3}),a.jsx("stop",{offset:"60%",stopColor:J,stopOpacity:.14}),a.jsx("stop",{offset:"100%",stopColor:J,stopOpacity:.06})]}),p==="category"&&t.data.map((V,re)=>{const X=_&&_[re]||(r==="region"?Gi(String(V.x),re):Xn(re)),se=`${q}-${re}`;return a.jsxs("linearGradient",{id:se,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:X,stopOpacity:.3}),a.jsx("stop",{offset:"60%",stopColor:X,stopOpacity:.14}),a.jsx("stop",{offset:"100%",stopColor:X,stopOpacity:.06})]},se)})]}),t.data.map((V,re)=>{const fe=i(V),X=k(E?V.x:fe);let se,ue;if(E){const U=G;if(n<=1)ue=U,se=X;else{ue=Math.max(1,U/(n+(n-1)*N));const Z=ue*N,le=ue*n+Z*(n-1);se=X+(U-le)/2+e*(ue+Z)}}else{const U=K.find(Z=>Z.center===X);if(!U||!O)ue=ee,se=X-ee/2,y&&ue<y&&(ue=y,se=X-ue/2);else{const{barWidth:Z}=O;ue=Z;const le=n>1?Z*N:0,ie=ue*n+le*(n-1);let ce=X-ie/2;ce<U.left&&(ce=U.left),ce+ie>U.right&&(ce=Math.max(U.left,U.right-ie)),se=ce+e*(ue+le)}if(y&&ue<y){const Z=K.find(le=>Math.abs(le.center-X)<.5);if(Z){const le=Math.max(2,Z.right-Z.left-1),ie=Math.min(le,y);if(ie>ue)if(n<=1)ue=ie,se=Math.max(Z.left,Math.min(Z.right-ue,X-ue/2));else{const ce=ie*N,de=ie*n+ce*(n-1);if(de<=Z.right-Z.left-1){ue=ie;const xe=de;let Me=X-xe/2;Me<Z.left&&(Me=Z.left),Me+xe>Z.right&&(Me=Math.max(Z.left,Z.right-xe)),se=Me+e*(ue+ce)}}}}}const _e=se+ue/2,be=F(V.y),Q=Math.min(H,be),Ge=Math.abs(H-be),Fe=!I&&L?.focused?.seriesId===t.id&&L.focused.index===re,Be=()=>{!L||I||L.setFocused({seriesId:t.id,index:re,x:fe,y:V.y,clientX:_e,clientY:be})},ve=()=>{L?.focused?.seriesId===t.id&&L.focused.index===re&&L.clear()},W=p==="category"&&_?_[re]:void 0,te=p==="category"?W||(r==="region"?Gi(String(V.x),re):Xn(re)):J,he=p==="category"?`${q}-${re}`:q,ge=w&&M?te:p==="category"?r==="region"?Ho(String(V.x),re):li(re):R,we=Fe?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":ge||te;return a.jsx("rect",{x:se,y:Q,width:ue,height:Ge||1,fill:w?`url(#${he})`:te,...w?{}:{fillOpacity:b},stroke:we,strokeWidth:Fe?2:1,className:"fdp-bar",tabIndex:I||!s?-1:0,role:"graphics-symbol","aria-label":`${t.label||t.id} ${fe instanceof Date?fe.toDateString():fe} value ${V.y}`,onMouseEnter:Be,onFocus:Be,onMouseLeave:ve,onBlur:ve},re)})]})},tC=({series:t,innerWidth:e,innerHeight:n,paddingInner:r=.1,paddingOuter:i=.05,children:s,yTickCount:o=5})=>{const l=Pr(),c=e??l?.innerWidth??0,u=n??l?.innerHeight??0,d=ne.useMemo(()=>t.flatMap(y=>y.data),[t]),f=ne.useMemo(()=>{const y=new Set;return d.forEach(w=>y.add(w.x)),Array.from(y)},[d]),p=ne.useMemo(()=>Math.max(0,...d.map(y=>y.y)),[d]),h=ne.useMemo(()=>lh().domain(f).range([0,c]).paddingInner(r).paddingOuter(i),[f,c,r,i]),g=ne.useMemo(()=>vo().domain([0,p]).nice().range([u,0]),[p,u]),m=ne.useMemo(()=>({xScale:h,yScale:g,getXTicks:()=>f,getYTicks:(y=o)=>g.ticks(y)}),[h,g,f,o]);return a.jsx(au.Provider,{value:m,children:s})},nC=({title:t,description:e,source:n,table:r,className:i,id:s,message:o="Interactive chart loadingâ€¦",forceFallback:l=!1})=>{const c=ne.useId(),u=s||c,d=e?`${u}-desc`:void 0,f=n?`${u}-src`:void 0,p=typeof window<"u"&&!l;return a.jsxs("figure",{id:u,className:qn("fdp-chart fdp-chart--noscript",i),"aria-labelledby":`${u}-title`,"aria-describedby":qn(d,f),"data-component":"ChartNoScript",children:[a.jsx("header",{className:"fdp-chart__header",children:a.jsx("h3",{id:`${u}-title`,className:"fdp-chart__title",children:t})}),e&&a.jsx("p",{id:d,className:"fdp-chart__description",children:e}),!p&&a.jsx("div",{className:"fdp-chart__loading",role:"status","aria-live":"polite",children:o}),a.jsxs("div",{className:"fdp-chart__fallback",role:"group","aria-label":t,children:[a.jsx("noscript",{children:a.jsx("div",{className:"fdp-chart__noscript-wrapper",children:a.jsx(Zn,{...r})})}),a.jsx("div",{className:"fdp-chart__table","data-fallback-table":!0,children:a.jsx(Zn,{...r})})]}),n&&a.jsx("figcaption",{className:"fdp-chart__caption",children:n&&a.jsxs("small",{id:f,className:"fdp-chart__source",children:["Source: ",n]})})]})},rC=({selector:t="figure.fdp-chart",onEnhanced:e,delay:n=0,children:r})=>{const i=ne.useRef(null);return ne.useEffect(()=>{const s=i.current;if(!s)return;const o=()=>{const l=Array.from(s.querySelectorAll(t));if(l.length===0)return;const c=[];l.forEach(u=>{u.classList.contains("fdp-chart--enhanced")||(u.classList.add("fdp-chart--enhanced"),c.push(u))}),c.length&&e&&e(c)};if(n>0){if(typeof window>"u")return;const l=window.setTimeout(o,n);return()=>window.clearTimeout(l)}o()},[t,e,n]),a.jsx("div",{ref:i,children:r})},fm=({label:t,value:e,unit:n,delta:r,status:i="neutral",variant:s="default",subtitle:o,metadata:l,trendData:c,loading:u=!1,error:d,valueFormatter:f,className:p,style:h,id:g,announceDelta:m=!0,visual:y})=>{const w=ne.useId(),M=g||w,j=`${M}-label`,v=`${M}-value`,b=`${M}-delta`,_=typeof e=="number"&&!Number.isNaN(e),N=u?"â€”":d?"":_?f?f(e):e.toLocaleString():e;let C,x="",k="";if(r&&!u&&!d){C=r.direction||(r.value>0?"up":r.value<0?"down":"neutral");const F=Math.abs(r.value),D=C==="up"?`+${F}`:C==="down"?`-${F}`:"0",P=r.isPercent?"%":"";if(x=`${D}${P}`,r.ariaLabel)k=r.ariaLabel;else{const I=r.invert?C==="down":C==="up";k=`${C==="neutral"?"no change":C==="up"?"up":"down"} ${F}${P}${C==="neutral"?"":I?" (improvement)":" (worse)"}`}}return a.jsx("div",{className:qn("fdp-metric-card",s&&`fdp-metric-card--${s}`,i&&`fdp-metric-card--status-${i}`,u&&"fdp-metric-card--loading",d&&"fdp-metric-card--error",p),style:h,role:"group","aria-labelledby":j,"data-component":"MetricCard",children:a.jsxs("div",{className:"fdp-metric-card__inner",children:[a.jsxs("div",{className:"fdp-metric-card__header",children:[a.jsx("h3",{id:j,className:"fdp-metric-card__label",children:t}),l&&a.jsx("div",{className:"fdp-metric-card__metadata",children:l})]}),a.jsxs("div",{className:"fdp-metric-card__content",children:[a.jsxs("div",{className:"fdp-metric-card__value-section",children:[a.jsx("div",{id:v,className:"fdp-metric-card__value",children:u?a.jsx("div",{className:"fdp-metric-card__skeleton","aria-hidden":"true",children:a.jsx("div",{className:"fdp-metric-card__skeleton-line fdp-metric-card__skeleton-line--value"})}):d?a.jsx("div",{className:"fdp-metric-card__error",role:"alert",children:d}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"fdp-metric-card__number",children:N}),n&&a.jsx("span",{className:"fdp-metric-card__unit",children:n})]})}),o&&!u&&!d&&a.jsx("div",{className:"fdp-metric-card__subtitle",children:o})]}),r&&!u&&!d&&a.jsx("div",{className:"fdp-metric-card__delta-section",children:a.jsxs("div",{id:b,"aria-label":k,className:qn("fdp-metric-card__delta",C&&`fdp-metric-card__delta--${C}`),children:[a.jsx("span",{className:"fdp-metric-card__delta-value",children:x}),r.period&&a.jsx("span",{className:"fdp-metric-card__delta-period",children:r.period})]})}),c&&c.length>0&&!u&&!d&&a.jsx("div",{className:"fdp-metric-card__trend","aria-hidden":"true"})]}),y&&!d&&a.jsx("div",{className:"fdp-metric-card__visual","aria-hidden":"true",children:y}),m&&r&&!r.ariaLabel&&!u&&!d&&a.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite",children:k})]})})};var Tt=(t=>(t.Xs="xs",t.Sm="sm",t.Md="md",t.Lg="lg",t.Xl="xl",t.Full="full",t))(Tt||{}),hm=(t=>(t.XmR="XmR",t.T="T",t.G="G",t))(hm||{}),Fr=(t=>(t.Up="Up",t.Down="Down",t.Neither="Neither",t))(Fr||{}),et=(t=>(t.Improvement="improvement",t.Concern="concern",t.Neither="neither",t.Suppressed="suppressed",t))(et||{});const yu=["single_point","two_sigma","shift","trend"];yu.reduce((t,e,n)=>(t[e]=n+1,t),{});const iC={single_point:"Single point beyond process limit",two_sigma:"Two of three beyond 2Ïƒ on one side",shift:"Sustained shift (run)",trend:"Monotonic trend"},sC={single_point:"point",two_sigma:"cluster",shift:"sustained",trend:"sustained"},pm=yu.reduce((t,e,n)=>(t[e]={id:e,rank:n+1,label:iC[e],category:sC[e],participatesInRanking:!0},t),{});yu.map(t=>pm[t]);var Us=(t=>(t.SinglePointAbove="single_above",t.SinglePointBelow="single_below",t.TwoOfThreeAbove="two_of_three_above",t.TwoOfThreeBelow="two_of_three_below",t.FourOfFiveAbove="four_of_five_above",t.FourOfFiveBelow="four_of_five_below",t.ShiftHigh="shift_high",t.ShiftLow="shift_low",t.TrendIncreasing="trend_inc",t.TrendDecreasing="trend_dec",t.FifteenInnerThird="fifteen_inner_third",t))(Us||{}),$r=(t=>(t.Pass="pass",t.Fail="fail",t.None="none",t))($r||{}),mm=(t=>(t.Shift="shift",t.Trend="trend",t.Point="point",t))(mm||{});const Yi={singlePointUp:{tooltip:"Single point above upper control limit",narration:"Single point beyond a control limit"},singlePointDown:{tooltip:"Single point below lower control limit",narration:"Single point beyond a control limit"},twoOfThreeUp:{tooltip:"Two of three points beyond +2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},twoOfThreeDown:{tooltip:"Two of three points beyond -2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},fourOfFiveUp:{tooltip:"Four of five points beyond +1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},fourOfFiveDown:{tooltip:"Four of five points beyond -1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},shiftUp:{tooltip:"Shift: run of points above centre line",narration:"Shift (run on one side of mean)"},shiftDown:{tooltip:"Shift: run of points below centre line",narration:"Shift (run on one side of mean)"},trendUp:{tooltip:"Trend: consecutive increasing points",narration:"Trend (consecutive increases)"},trendDown:{tooltip:"Trend: consecutive decreasing points",narration:"Trend (consecutive decreases)"}};function Ro(t){if(!t)return[];const e=[];return t.specialCauseSinglePointUp&&e.push("singlePointUp"),t.specialCauseSinglePointDown&&e.push("singlePointDown"),t.specialCauseTwoOfThreeUp&&e.push("twoOfThreeUp"),t.specialCauseTwoOfThreeDown&&e.push("twoOfThreeDown"),t.specialCauseFourOfFiveUp&&e.push("fourOfFiveUp"),t.specialCauseFourOfFiveDown&&e.push("fourOfFiveDown"),t.specialCauseShiftUp&&e.push("shiftUp"),t.specialCauseShiftDown&&e.push("shiftDown"),t.specialCauseTrendUp&&e.push("trendUp"),t.specialCauseTrendDown&&e.push("trendDown"),e}function Uo(t){switch(t){case et.Improvement:return"Improvement signal";case et.Concern:return"Concern signal";case et.Neither:return"Common cause variation";case et.Suppressed:return null;default:return null}}function gm(t){switch(t){case $r.Pass:return"Target met";case $r.Fail:return"Target not met";default:return null}}function aC(t,e,n){if(t==null||!Number.isFinite(e)||e<=0)return null;const r=Math.abs((n-t)/e);return r<1?"Within 1Ïƒ":r<2?"Between 1â€“2Ïƒ":r<3?"Between 2â€“3Ïƒ":"Beyond 3Ïƒ"}const Gn={improvement:{token:"var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",hex:"#00B0F0"},concern:{token:"var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",hex:"#E46C0A"},neither:{token:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",hex:"#A6A6A6"},suppressed:{token:"var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",hex:"#490092"}};function ym(t){return t?Gn[t]?.token??Gn.neither.token:Gn.neither.token}function oC(t){return t?Gn[t]?.hex??Gn.neither.hex:Gn.neither.hex}var ci=(t=>(t.Pass="pass",t.Fail="fail",t.Uncertain="uncertain",t))(ci||{});const lC={pass:"#00B0F0",fail:"#E46C0A",uncertain:"#A6A6A6"},cC={pass:"P",fail:"F",uncertain:"?"};var Pt=(t=>(t.HigherIsBetter="higher_is_better",t.LowerIsBetter="lower_is_better",t.ContextDependent="context_dependent",t))(Pt||{}),Ke=(t=>(t.Higher="higher",t.Lower="lower",t))(Ke||{}),hn=(t=>(t.Improving="improving",t.Deteriorating="deteriorating",t.No_Judgement="no_judgement",t.None="none",t))(hn||{}),Ve=(t=>(t.SpecialCauseImproving="special_cause_improving",t.SpecialCauseDeteriorating="special_cause_deteriorating",t.CommonCause="common_cause",t.SpecialCauseNoJudgement="special_cause_no_judgement",t))(Ve||{});const uC=t=>{const e=t.replace("#",""),n=parseInt(e.slice(0,2),16)/255,r=parseInt(e.slice(2,4),16)/255,i=parseInt(e.slice(4,6),16)/255,s=[n,r,i].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*s[0]+.7152*s[1]+.0722*s[2]<.55?"#ffffff":"#212b32"},Wo={special_cause_deteriorating:{hex:Gn.concern.hex,judgement:"deteriorating",label:"Special Cause (Deteriorating)",description:"Deteriorating variation detected (special cause) relative to baseline."},special_cause_improving:{hex:Gn.improvement.hex,judgement:"improving",label:"Special Cause (Improving)",description:"Improving variation detected (special cause) relative to baseline."},common_cause:{hex:Gn.neither.hex,judgement:"none",label:"Common Cause",description:"Common cause variation only â€“ no special cause detected."},special_cause_no_judgement:{hex:Gn.suppressed.hex,judgement:"no_judgement",label:"Special Cause (No Judgement)",description:"Special cause detected without assigning improving/deteriorating judgement."}};Object.values(Wo).forEach(t=>{t.text||(t.text=uC(t.hex))});const bm=t=>Wo[t],bu=t=>Wo[t].judgement||"none",xm={special:{higher:[{cx:77.5,cy:158.5},{cx:114,cy:175},{cx:150.5,cy:158.5},{cx:188,cy:125},{cx:225,cy:137}],lower:[{cx:77.5,cy:139.5},{cx:114,cy:124.5},{cx:150.5,cy:139.5},{cx:188,cy:175.5},{cx:224.5,cy:162}]},common:[{cx:76.5,cy:149.5},{cx:113,cy:179.5},{cx:149.5,cy:117},{cx:187,cy:171},{cx:223.5,cy:158}]};function dC(t,e){let n;return t==="common_cause"?n=xm.common:n=xm.special[e==="lower"?"lower":"higher"],n.map(r=>({...r}))}let xu=null;try{xu=require("@fergusbisset/nhs-fdp-design-system/dist/js/tokens.json")?.color?.["data-viz"]?.spc||null}catch{}const Kt=(t,e)=>{if(!xu)return e;const n=t.split(".");let r=xu;for(const s of n){if(r==null)break;r=r[s]}const i=r;return i==null?e:typeof i=="string"||typeof i=="number"?String(i):i.$value!=null?String(i.$value):i.value!=null?String(i.value):e},Go=()=>({start:Kt("gradient.stop.start-opacity","0.12"),mid:Kt("gradient.stop.mid-opacity","0.03"),end:Kt("gradient.stop.end-opacity","0"),triStart:Kt("gradient.stop.triangle-start-opacity",Kt("gradient.stop.start-opacity","0.12")),triMid:Kt("gradient.stop.triangle-mid-opacity",Kt("gradient.stop.mid-opacity","0.03")),triEnd:Kt("gradient.stop.triangle-end-opacity",Kt("gradient.stop.end-opacity","0"))}),Yo={improvement:"improvement",concern:"concern",noJudgement:"no-judgement",common:"common-cause"},Vo={improvement:"#00B0F0",concern:"#E46C0A",noJudgement:"#490092",common:"#A6A6A6"},vm=()=>Kt(Yo.improvement,Vo.improvement),_m=()=>Kt(Yo.concern,Vo.concern),fC=()=>Kt(Yo.noJudgement,Vo.noJudgement),ui=()=>Kt(Yo.common,Vo.common);function Zo(t){switch(t){case et.Improvement:return vm();case et.Concern:return _m();case et.Neither:case et.Suppressed:default:return ui()}}function wm(t){switch(t){case Ve.SpecialCauseImproving:return vm();case Ve.SpecialCauseDeteriorating:return _m();case Ve.SpecialCauseNoJudgement:return fC();case Ve.CommonCause:default:return ui()}}var wn=(t=>(t.XmR="XmR",t.T="T",t.G="G",t))(wn||{}),tt=(t=>(t.Up="Up",t.Down="Down",t.Neither="Neither",t))(tt||{}),We=(t=>(t.ImprovementHigh="ImprovementHigh",t.ImprovementLow="ImprovementLow",t.ConcernHigh="ConcernHigh",t.ConcernLow="ConcernLow",t.NeitherHigh="NeitherHigh",t.NeitherLow="NeitherLow",t.CommonCause="CommonCause",t))(We||{}),St=(t=>(t.SinglePoint="SinglePoint",t.TwoSigma="TwoSigma",t.Shift="Shift",t.Trend="Trend",t))(St||{}),di=(t=>(t.Upwards="Upwards",t.Downwards="Downwards",t.Same="Same",t))(di||{}),Jn=(t=>(t.Up="Up",t.Down="Down",t))(Jn||{}),Vi=(t=>(t.Improvement="Improvement",t.Concern="Concern",t))(Vi||{}),Zi=(t=>(t.SqlPrimeThenRule="SqlPrimeThenRule",t.PreferImprovement="PreferImprovement",t.RuleHierarchy="RuleHierarchy",t))(Zi||{}),Zt=(t=>(t.FavourableSide="FavourableSide",t.CrossingAfterFavourable="CrossingAfterFavourable",t.ExtremeFavourable="ExtremeFavourable",t.FirstFavourable="FirstFavourable",t.LongestFavourable="LongestFavourable",t.LastFavourable="LastFavourable",t.UnfavourableSide="UnfavourableSide",t.CrossingAfterUnfavourable="CrossingAfterUnfavourable",t.ExtremeUnfavourable="ExtremeUnfavourable",t.FirstUnfavourable="FirstUnfavourable",t.LongestUnfavourable="LongestUnfavourable",t.LastUnfavourable="LastUnfavourable",t))(Zt||{}),wr=(t=>(t.Off="Off",t.AutoWhenConflict="AutoWhenConflict",t.Always="Always",t))(wr||{}),Kn=(t=>(t.Info="info",t.Warning="warning",t.Error="error",t))(Kn||{}),qo=(t=>(t.Config="config",t.Data="data",t.Limits="limits",t.SpecialCause="special_cause",t.Baseline="baseline",t.Logic="logic",t.Target="target",t.Ghost="ghost",t.Partition="partition",t))(qo||{}),Xo=(t=>(t.UnknownChartType="unknown_chart_type",t.InsufficientPointsGlobal="insufficient_points_global",t.VariationConflictRow="variation_conflict_row",t.NullValuesExcluded="null_values_excluded",t.TargetIgnoredRareEvent="target_ignored_rare_event",t.GhostRowsRareEvent="ghost_rows_rare_event",t.InsufficientPointsPartition="insufficient_points_partition",t.BaselineWithSpecialCause="baseline_with_special_cause",t.PartitionCapApplied="partition_cap_applied",t.GlobalCapApplied="global_cap_applied",t))(Xo||{});const Br={[St.SinglePoint]:1,[St.TwoSigma]:2,[St.Shift]:3,[St.Trend]:4},Sm=3.267,hC=2.66,km=.2777;function Xe(t){return typeof t=="number"&&!Number.isNaN(t)}function qi(t){return t.reduce((e,n)=>e+n,0)/(t.length||1)}function Cm(t,e){const n=new Array(t.length).fill(null);let r=null;for(let i=0;i<t.length;i++){const s=t[i];if(!(e[i]||!Xe(s))){if(r!==null){const o=t[r];Xe(o)&&(n[i]=Math.abs(s-o))}r=i}}return n}function Nm(t,e){const n=t.filter(Xe);if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=n.slice();if(e){const s=qi(r),o=Sm*s;r=r.filter(l=>l<=o)}const i=qi(r);return{mrMean:i,mrUcl:Sm*i}}function Mm(t,e){if(!Xe(t)||!Xe(e))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=hC*e,r=2/3*n,i=1/3*n;return{upperProcessLimit:t+n,lowerProcessLimit:t-n,upperTwoSigma:t+r,lowerTwoSigma:t-r,upperOneSigma:t+i,lowerOneSigma:t-i}}function pC(t,e,n,r){if(t===wn.T){const f=e.map(C=>Xe(C)&&C>0?Math.pow(C,km):null),p=Cm(f,n),h=Nm(p,r),g=f.filter((C,x)=>!n[x]&&Xe(C)),m=g.length?qi(g):NaN,y=Mm(m,h.mrMean),w=C=>Xe(C)&&C>0?Math.pow(C,1/km):null,M=Xe(y.upperProcessLimit)?w(y.upperProcessLimit):null,j=Xe(y.lowerProcessLimit)&&y.lowerProcessLimit>0?w(y.lowerProcessLimit):null,v=Xe(y.upperTwoSigma)?w(y.upperTwoSigma):null,b=Xe(y.lowerTwoSigma)&&y.lowerTwoSigma>0?w(y.lowerTwoSigma):null,_=Xe(y.upperOneSigma)?w(y.upperOneSigma):null,N=Xe(y.lowerOneSigma)&&y.lowerOneSigma>0?w(y.lowerOneSigma):null;return{mean:Xe(m)&&m>0?w(m):null,mr:p,mrMean:h.mrMean,mrUcl:h.mrUcl,upperProcessLimit:M,lowerProcessLimit:j,upperTwoSigma:v,lowerTwoSigma:b,upperOneSigma:_,lowerOneSigma:N}}if(t===wn.G){const f=e.filter((F,D)=>!n[D]&&Xe(F)),p=f.length?qi(f):NaN,h=Xe(p)?1/(p+1):NaN,g=F=>{if(!Xe(h)||h<=0||h>=1)return NaN;const D=Math.ceil(Math.log(1-F)/Math.log(1-h))-1;return Math.max(0,D)},m=.00135,y=1-.00135,w=.02275,M=1-.02275,j=.158655,v=1-.158655,b=g(y),_=g(m),N=g(M),C=g(w),x=g(v),k=g(j);return{mean:Xe(p)?p:null,mr:new Array(e.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:Xe(b)?b:null,lowerProcessLimit:Xe(_)?_:null,upperTwoSigma:Xe(N)?N:null,lowerTwoSigma:Xe(C)?C:null,upperOneSigma:Xe(x)?x:null,lowerOneSigma:Xe(k)?k:null}}if(t!==wn.XmR)return{mean:NaN,mr:new Array(e.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const i=Cm(e,n),s=i.filter(Xe),o=s.length?qi(s):NaN,l=Xe(o)?3.267*o:NaN;let c=NaN;{const f=e.reduce((p,h,g)=>{if(n[g]||!Xe(h))return p;if(!r)return p.push(h),p;const m=i[g];return(m===null||!Xe(l)||Xe(m)&&m<=l)&&p.push(h),p},[]);c=f.length?qi(f):NaN}const u=Nm(i,r),d=Mm(c,u.mrMean);return{mean:c,mr:i,mrMean:u.mrMean,mrUcl:u.mrUcl,...d}}function mC(t,e){const n=t.map((c,u)=>u).filter(c=>!t[c].ghost&&Xe(t[c].value)),r=c=>t[c],i=e.shiftPoints,s=e.trendPoints;let o=[],l=[];for(const c of n){const u=r(c);if(!Xe(u.mean)||!Xe(u.value)?(o=[],l=[]):u.value>u.mean?(o.push(c),l=[]):u.value<u.mean?(l.push(c),o=[]):(o=[],l=[]),o.length>=i)for(const d of o)r(d).shiftUp=!0;if(l.length>=i)for(const d of l)r(d).shiftDown=!0}for(let c=0;c<=n.length-3;c++){const d=n.slice(c,c+3).map(r);if(!d.every(v=>Xe(v.value)&&Xe(v.mean)))continue;const f=d[0].mean,p=d.every(v=>v.value>f),h=d.every(v=>v.value<f);if(!p&&!h)continue;const g=d[0].upperTwoSigma??1/0,m=d[0].lowerTwoSigma??-1/0,y=d[0].upperProcessLimit??1/0,w=d[0].lowerProcessLimit??-1/0,M=d.filter(v=>e.twoSigmaIncludeAboveThree?v.value>g:v.value>g&&v.value<=y),j=d.filter(v=>e.twoSigmaIncludeAboveThree?v.value<m:v.value<m&&v.value>=w);p&&M.length>=2&&M.forEach(v=>v.twoSigmaUp=!0),h&&j.length>=2&&j.forEach(v=>v.twoSigmaDown=!0)}if(e.enableFourOfFiveRule)for(let c=0;c<=n.length-5;c++){const d=n.slice(c,c+5).map(r);if(!d.every(M=>Xe(M.value)&&Xe(M.mean)))continue;const f=d[0].mean,p=d.every(M=>M.value>f),h=d.every(M=>M.value<f);if(!p&&!h)continue;const g=d[0].upperOneSigma??1/0,m=d[0].lowerOneSigma??-1/0,y=d.filter(M=>M.value>g),w=d.filter(M=>M.value<m);p&&y.length>=4&&y.forEach(M=>M.fourOfFiveUp=!0),h&&w.length>=4&&w.forEach(M=>M.fourOfFiveDown=!0)}for(let c=0;c<=n.length-s;c++){const u=n.slice(c,c+s),d=u.map(r);if(!d.every(h=>Xe(h.value)))continue;let f=!0,p=!0;for(let h=1;h<d.length&&(d[h].value>d[h-1].value||(f=!1),d[h].value<d[h-1].value||(p=!1),!(!f&&!p));h++);f&&u.forEach(h=>r(h).trendUp=!0),p&&u.forEach(h=>r(h).trendDown=!0)}}function jm(t){const e=[],n=[];t.singlePointUp&&e.push({id:St.SinglePoint,rank:Br[St.SinglePoint]}),t.singlePointDown&&n.push({id:St.SinglePoint,rank:Br[St.SinglePoint]}),t.twoSigmaUp&&e.push({id:St.TwoSigma,rank:Br[St.TwoSigma]}),t.twoSigmaDown&&n.push({id:St.TwoSigma,rank:Br[St.TwoSigma]}),t.shiftUp&&e.push({id:St.Shift,rank:Br[St.Shift]}),t.shiftDown&&n.push({id:St.Shift,rank:Br[St.Shift]}),t.trendUp&&e.push({id:St.Trend,rank:Br[St.Trend]}),t.trendDown&&n.push({id:St.Trend,rank:Br[St.Trend]});const r=e.reduce((o,l)=>Math.max(o,l.rank),0),i=n.reduce((o,l)=>Math.max(o,l.rank),0),s=r>i?di.Upwards:i>r?di.Downwards:di.Same;return{up:e,dn:n,upMax:r,dnMax:i,primeDirection:s}}function Tm(t,e){const n=e===tt.Up?t.singlePointUp||t.twoSigmaUp||t.shiftUp||t.trendUp:e===tt.Down?t.singlePointDown||t.twoSigmaDown||t.shiftDown||t.trendDown:!1,r=e===tt.Up?t.singlePointDown||t.twoSigmaDown||t.shiftDown||t.trendDown:e===tt.Down?t.singlePointUp||t.twoSigmaUp||t.shiftUp||t.trendUp:!1;return{aligned:n,opposite:r}}function Dm(t,e,n,r=!1,i,s,o=!1){const{up:l,dn:c,upMax:u,dnMax:d,primeDirection:f}=jm(t);t.primeDirection=f;const p=t.specialCauseImprovementValue,h=t.specialCauseConcernValue;t.specialCauseImprovementValue!==null&&t.specialCauseConcernValue!==null&&gC({row:t,metric:e,metricConflictRule:n,preferImprovementWhenConflict:r,preferTrendWhenConflict:o,primeDirection:f,conflictStrategy:i,ruleHierarchy:s}),e===tt.Up?t.variationIcon=t.specialCauseImprovementValue!==null?We.ImprovementHigh:t.specialCauseConcernValue!==null?We.ConcernLow:We.CommonCause:e===tt.Down?t.variationIcon=t.specialCauseImprovementValue!==null?We.ImprovementLow:t.specialCauseConcernValue!==null?We.ConcernHigh:We.CommonCause:t.variationIcon=We.CommonCause;const g=t.specialCauseImprovementValue!==null?Jn.Up:t.specialCauseConcernValue!==null?Jn.Down:void 0,m=g===Jn.Up?u:g===Jn.Down?d:Math.max(u,d);t.primeRank=m||void 0;const y=g===Jn.Up?l.find(w=>w.rank===m):g===Jn.Down?c.find(w=>w.rank===m):void 0;return t.primeRuleId=y?.id,{originalImprovement:p,originalConcern:h}}function gC(t){const{row:e,metric:n,metricConflictRule:r,preferImprovementWhenConflict:i,preferTrendWhenConflict:s,primeDirection:o=e.primeDirection??di.Same,conflictStrategy:l,ruleHierarchy:c}=t;if(s&&e.specialCauseImprovementValue!==null&&e.specialCauseConcernValue!==null){const d=!!e.trendUp,f=!!e.trendDown;if(n===tt.Up){if(d&&!f){e.specialCauseConcernValue=null;return}if(!d&&f){e.specialCauseImprovementValue=null;return}}else if(n===tt.Down){if(f&&!d){e.specialCauseConcernValue=null;return}if(!f&&d){e.specialCauseImprovementValue=null;return}}}const u=i?Zi.PreferImprovement:l??Zi.SqlPrimeThenRule;if(u===Zi.PreferImprovement){n===tt.Up?e.specialCauseConcernValue=null:n===tt.Down&&(e.specialCauseImprovementValue=null);return}if(u===Zi.RuleHierarchy){const d=c??[St.Trend,St.Shift,St.TwoSigma,St.SinglePoint],{up:f,dn:p}=jm(e);for(const h of d){const g=f.some(y=>y.id===h),m=p.some(y=>y.id===h);if(g&&!m){n===tt.Up?e.specialCauseConcernValue=null:e.specialCauseImprovementValue=null;return}if(m&&!g){n===tt.Up?e.specialCauseImprovementValue=null:e.specialCauseConcernValue=null;return}if(g&&m){(n===tt.Up||n===tt.Down)&&(r===Vi.Improvement?e.specialCauseConcernValue=null:e.specialCauseImprovementValue=null);return}}}o===di.Upwards?n===tt.Up?e.specialCauseConcernValue=null:n===tt.Down&&(e.specialCauseImprovementValue=null):o===di.Downwards?n===tt.Up?e.specialCauseImprovementValue=null:n===tt.Down&&(e.specialCauseConcernValue=null):r===Vi.Improvement?e.specialCauseConcernValue=null:e.specialCauseImprovementValue=null}var vu=(t=>(t.Up="Up",t.Down="Down",t))(vu||{});function yC(t){return t>0?1:t<0?-1:0}function bC(t){const e=yC(t);if(e>0)return"Above";if(e<0)return"Below"}function Im(t){const e=[],n=(o,l,c)=>({segStart:o,segSide:l,minV:c,maxV:c,maxAbsDelta:0}),r=(o,l,c,u,d)=>({minV:Math.min(c,o),maxV:Math.max(u,o),maxAbsDelta:Math.max(d,l)}),i=(o,l,c,u,d,f,p,h)=>{o.push({trendDirection:h,start:l,end:c,side:u,minValue:d,maxValue:f,maxAbsDeltaFromMean:p})};let s=0;for(;s<t.length;){const o=t[s];if(!o||o.value==null||o.ghost||!o.trendUp&&!o.trendDown){s++;continue}const l=o.trendUp?"Up":o.trendDown?"Down":void 0;let c=s,u=s;for(;u<t.length;u++){const w=t[u];if(!w||w.value==null||w.ghost||!(l==="Up"?w.trendUp:w.trendDown))break}const d=u-1,f=[];let p,h,g=1/0,m=-1/0,y=0;for(let w=c;w<=d;w++){const M=t[w];if(M.value==null)continue;const j=M.value-(M.mean??0),v=bC(j);if(!v){p!==void 0&&(i(f,p,w-1,h,g,m,y,l),p=void 0,h=void 0,g=1/0,m=-1/0,y=0);continue}if(p===void 0)({segStart:p,segSide:h,minV:g,maxV:m,maxAbsDelta:y}=(()=>{const b=n(w,v,M.value);return{segStart:b.segStart,segSide:b.segSide,minV:b.minV,maxV:b.maxV,maxAbsDelta:Math.abs(j)}})());else if(v!==h)i(f,p,w-1,h,g,m,y,l),{segStart:p,segSide:h,minV:g,maxV:m,maxAbsDelta:y}=(()=>{const b=n(w,v,M.value);return{segStart:b.segStart,segSide:b.segSide,minV:b.minV,maxV:b.maxV,maxAbsDelta:Math.abs(j)}})();else{const b=r(M.value,Math.abs(j),g,m,y);g=b.minV,m=b.maxV,y=b.maxAbsDelta}}p!==void 0&&i(f,p,d,h,g,m,y,l),e.push({trendDirection:l,start:c,end:d,segments:f}),s=d+1}return e}function xC(t){if(t===tt.Up)return"Above";if(t===tt.Down)return"Below"}function vC(t){if(t)return t==="Above"?"Below":"Above"}function Lm(t,e){const n=e.strategy??Zt.CrossingAfterFavourable,r=xC(e.metricImprovement),i=vC(r),s=[];for(const o of t){if(!r){if(n===Zt.ExtremeFavourable||n===Zt.CrossingAfterFavourable){const l=o.segments;if(l.length===0)continue;let c=l[0];for(const u of l)u.maxAbsDeltaFromMean>c.maxAbsDeltaFromMean&&(c=u);s.push(c)}continue}if(n===Zt.FavourableSide){s.push(...o.segments.filter(l=>l.side===r));continue}if(n===Zt.UnfavourableSide){s.push(...o.segments.filter(l=>l.side===i));continue}if(n===Zt.CrossingAfterFavourable){const l=o.segments;let c;for(let u=0;u<l.length;u++){const d=l[u];if(d.side===r&&u>0&&l[u-1].side!==r){c=d;break}}if(!c){const u=l.filter(d=>d.side===r);u.length>0&&(c=u.reduce((d,f)=>f.end-f.start>d.end-d.start?f:d,u[0]))}c&&s.push(c);continue}if(n===Zt.CrossingAfterUnfavourable){const l=o.segments;let c;for(let u=0;u<l.length;u++){const d=l[u];if(d.side===i&&u>0&&l[u-1].side!==i){c=d;break}}if(!c){const u=l.filter(d=>d.side===i);u.length>0&&(c=u.reduce((d,f)=>f.end-f.start>d.end-d.start?f:d,u[0]))}c&&s.push(c);continue}if(n===Zt.ExtremeFavourable){const l=o.segments.filter(u=>u.side===r);if(l.length===0)continue;const c=l.reduce((u,d)=>d.maxAbsDeltaFromMean>u.maxAbsDeltaFromMean?d:u);s.push(c);continue}if(n===Zt.ExtremeUnfavourable){const l=o.segments.filter(u=>u.side===i);if(l.length===0)continue;const c=l.reduce((u,d)=>d.maxAbsDeltaFromMean>u.maxAbsDeltaFromMean?d:u);s.push(c);continue}if(n===Zt.FirstFavourable){const l=o.segments.find(c=>c.side===r);l&&s.push(l);continue}if(n===Zt.FirstUnfavourable){const l=o.segments.find(c=>c.side===i);l&&s.push(l);continue}if(n===Zt.LongestFavourable){const l=o.segments.filter(u=>u.side===r);if(l.length===0)continue;const c=l.reduce((u,d)=>d.end-d.start>u.end-u.start?d:u);s.push(c);continue}if(n===Zt.LongestUnfavourable){const l=o.segments.filter(u=>u.side===i);if(l.length===0)continue;const c=l.reduce((u,d)=>d.end-d.start>u.end-u.start?d:u);s.push(c);continue}if(n===Zt.LastFavourable){const l=o.segments.filter(c=>c.side===r);if(l.length===0)continue;s.push(l[l.length-1]);continue}if(n===Zt.LastUnfavourable){const l=o.segments.filter(c=>c.side===i);if(l.length===0)continue;s.push(l[l.length-1]);continue}}return s}var _t=(t=>(t.Common="Common",t.Improvement="Improvement",t.Concern="Concern",t.NoJudgement="NoJudgement",t))(_t||{}),Xi=(t=>(t.Ungated="Ungated",t.Gated="Gated",t))(Xi||{});function _C(t){const e=!!(t.singlePointUp||t.twoSigmaUp||t.shiftUp||t.trendUp),n=!!(t.singlePointDown||t.twoSigmaDown||t.shiftDown||t.trendDown);return{upAny:e,downAny:n}}function Ws(t,e){const n=e.metricImprovement,r=e.trendVisualMode??"Ungated",i=e.enableNeutralNoJudgement??!0;return t.map(s=>{if(!s||s.value==null||s.ghost)return"Common";const{upAny:o,downAny:l}=_C(s);if(o&&l)return"Improvement";switch(s.variationIcon){case We.ImprovementHigh:case We.ImprovementLow:return"Improvement";case We.ConcernHigh:case We.ConcernLow:return"Concern";case We.NeitherHigh:case We.NeitherLow:{if(r==="Ungated"&&n!==tt.Neither){if(o&&!l)return n===tt.Up?"Improvement":"Concern";if(l&&!o)return n===tt.Down?"Improvement":"Concern"}return i?"NoJudgement":"Common"}default:return"Common"}})}function wC(t,e,n){const r=n?.mode??"Disabled";if(!t.length)return[];let i=Ws(t,{metricImprovement:e,trendVisualMode:Xi.Ungated,enableNeutralNoJudgement:!0});if(r!=="RecalcCrossing"||e===tt.Neither)return i;const s=Math.max(0,n?.preWindow??2),o=Math.max(0,n?.postWindow??3),l=n?.prePolarity??"Opposite",c=(f,p)=>{if(f<0||f>=i.length)return;const h=i[f];(h===_t.Common||h===_t.NoJudgement)&&(i[f]=p)},u=f=>{if(f==null)return null;const p=t.reduce((g,m)=>(m.partitionId===f&&typeof m.value=="number"&&!m.ghost&&g.push(m.value),g),[]);return p.length?p.reduce((g,m)=>g+m,0)/p.length:null},d=Array.isArray(n?.boundaryIndices)&&n.boundaryIndices.length?n.boundaryIndices.slice().filter(f=>Number.isFinite(f)):t.reduce((f,p,h)=>{if(h===0)return f;const g=t[h-1];return g&&p&&p.partitionId!==g.partitionId&&f.push(h),f},[]);for(const f of d){const p=t[f-1],h=t[f];if(!p||!h)continue;let g=f-1;for(;g-1>=0&&t[g-1]&&t[g-1].partitionId===p.partitionId;)g--;let m=f;for(;m+1<t.length&&t[m+1]&&t[m+1].partitionId===h.partitionId;)m++;let y=null;for(let _=f-1;_>=0;_--){const N=t[_];if(N.partitionId!==p.partitionId)break;if(typeof N.mean=="number"){y=N.mean;break}}let w=null;for(let _=f;_<t.length;_++){const N=t[_];if(N.partitionId!==h.partitionId)break;if(typeof N.mean=="number"){w=N.mean;break}}if(y==null&&(y=u(p.partitionId??null)),w==null&&(w=u(h.partitionId??null)),y==null||w==null)continue;const M=w-y,j=e===tt.Up?M>0:M<0,v=j?_t.Improvement:_t.Concern,b=l==="Same"?v:j?_t.Concern:_t.Improvement;for(let _=1;_<=s;_++){const N=f-_;if(N<g)break;c(N,b)}for(let _=0;_<o;_++){const N=f+_;if(N>m)break;c(N,v)}}return i}function Am(t){if(!t)return{};if(typeof t=="object"&&("minimumPoints"in t||"shiftPoints"in t||"trendPoints"in t))return t;const e=t,n={};if(e.thresholds){const r=e.thresholds;r.minimumPoints!=null&&(n.minimumPoints=r.minimumPoints),r.shiftPoints!=null&&(n.shiftPoints=r.shiftPoints),r.trendPoints!=null&&(n.trendPoints=r.trendPoints),r.excludeMovingRangeOutliers!=null&&(n.excludeMovingRangeOutliers=r.excludeMovingRangeOutliers)}if(e.eligibility&&e.eligibility.chartLevel!=null&&(n.chartLevelEligibility=e.eligibility.chartLevel),e.parity&&(e.parity.trendAcrossPartitions!=null&&(n.trendAcrossPartitions=e.parity.trendAcrossPartitions),e.parity.twoSigmaIncludeAboveThree!=null&&(n.twoSigmaIncludeAboveThree=e.parity.twoSigmaIncludeAboveThree),e.parity.enableFourOfFiveRule!=null&&(n.enableFourOfFiveRule=e.parity.enableFourOfFiveRule)),e.conflict&&(e.conflict.preferImprovementWhenConflict!=null&&(n.preferImprovementWhenConflict=e.conflict.preferImprovementWhenConflict),e.conflict.preferTrendWhenConflict!=null&&(n.preferTrendWhenConflict=e.conflict.preferTrendWhenConflict),e.conflict.strategy!=null&&(n.conflictStrategy=e.conflict.strategy),e.conflict.ruleHierarchy!=null&&(n.ruleHierarchy=e.conflict.ruleHierarchy),e.conflict.metricRuleOnTie!=null&&(n.metricConflictRule=e.conflict.metricRuleOnTie)),e.trend?.segmentation){const r=e.trend.segmentation;r.mode!=null&&(n.trendSegmentationMode=r.mode),r.favourableSegmentation!=null&&(n.trendFavourableSegmentation=r.favourableSegmentation),r.strategy!=null&&(n.trendSegmentationStrategy=r.strategy),r.dominatesHighlightedWindow!=null&&(n.trendDominatesHighlightedWindow=r.dominatesHighlightedWindow)}return n}function Gs(t){const{chartType:e,metricImprovement:n,data:r}=t,i=Am(t.settings),s={minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:Vi.Improvement,trendAcrossPartitions:!1,twoSigmaIncludeAboveThree:!1,enableFourOfFiveRule:!1,preferImprovementWhenConflict:!1,conflictStrategy:Zi.SqlPrimeThenRule,ruleHierarchy:void 0,chartLevelEligibility:!1,trendFavourableSegmentation:!1,trendSegmentationMode:wr.Off,trendSegmentationStrategy:Zt.CrossingAfterUnfavourable,trendDominatesHighlightedWindow:!1,...i},o=i?.trendSegmentationMode||(i?.trendFavourableSegmentation===!0?wr.Always:i?.trendFavourableSegmentation===!1?wr.Off:s.trendSegmentationMode),l=r.map((m,y)=>({rowId:y+1,x:m.x,value:Xe(m.value)?m.value:null,ghost:!!m.ghost,baseline:!!m.baseline,target:Xe(m.target)?m.target:null})),c=[];let u=[];for(const m of l)m.baseline&&u.length&&(c.push(u),u=[]),u.push(m);u.length&&c.push(u);const d=[],f=(s.trendFavourableSegmentation||o!==wr.Off)&&!s.preferImprovementWhenConflict,p=l.filter(m=>!m.ghost&&Xe(m.value)).length,h=!!s.chartLevelEligibility&&p>=s.minimumPoints;let g=0;for(const m of c){g++;const y=m.map(b=>b.value),w=m.map(b=>b.ghost),M=pC(e,y,w,!!s.excludeMovingRangeOutliers),j=m.map((b,_)=>{const N=!b.ghost&&Xe(b.value)?y.slice(0,_+1).filter((x,k)=>!w[k]&&Xe(x)).length:0,C=h?!0:N>=s.minimumPoints;return{rowId:b.rowId,x:b.x,value:Xe(b.value)?b.value:null,ghost:b.ghost,partitionId:g,pointRank:N,mean:(C||h)&&Xe(M.mean)?M.mean:null,upperProcessLimit:C||h?M.upperProcessLimit:null,lowerProcessLimit:C||h?M.lowerProcessLimit:null,upperTwoSigma:C||h?M.upperTwoSigma:null,lowerTwoSigma:C||h?M.lowerTwoSigma:null,upperOneSigma:C||h?M.upperOneSigma:null,lowerOneSigma:C||h?M.lowerOneSigma:null,singlePointUp:!1,singlePointDown:!1,twoSigmaUp:!1,twoSigmaDown:!1,fourOfFiveUp:!1,fourOfFiveDown:!1,shiftUp:!1,shiftDown:!1,trendUp:!1,trendDown:!1,specialCauseImprovementValue:null,specialCauseConcernValue:null,variationIcon:We.CommonCause}});for(const b of j)b.ghost||!Xe(b.value)||b.mean===null||(Xe(b.upperProcessLimit)&&b.value>b.upperProcessLimit&&(b.singlePointUp=!0),Xe(b.lowerProcessLimit)&&b.value<b.lowerProcessLimit&&(b.singlePointDown=!0));mC(j,{shiftPoints:s.shiftPoints,trendPoints:s.trendPoints,twoSigmaIncludeAboveThree:!!s.twoSigmaIncludeAboveThree,enableFourOfFiveRule:!!s.enableFourOfFiveRule}),f&&(b=>{const _=b.some(F=>(F.singlePointUp||F.twoSigmaUp||F.shiftUp||F.trendUp)&&(F.singlePointDown||F.twoSigmaDown||F.shiftDown||F.trendDown));if(o===wr.Off||o===wr.AutoWhenConflict&&!_)return;const N=Im(b),C=Lm(N,{metricImprovement:n,strategy:s.trendSegmentationStrategy}),x=new Set,k=new Set;for(const F of C)for(let D=F.start;D<=F.end;D++)F.trendDirection===vu.Up?x.add(D):k.add(D);b.forEach((F,D)=>{F.trendUp=x.has(D)?F.trendUp:!1,F.trendDown=k.has(D)?F.trendDown:!1,s.trendDominatesHighlightedWindow&&(x.has(D)?(F.singlePointDown=!1,F.twoSigmaDown=!1,F.shiftDown=!1):k.has(D)&&(F.singlePointUp=!1,F.twoSigmaUp=!1,F.shiftUp=!1))})})(j);for(const b of j){if(b.ghost||!Xe(b.value)||b.mean===null){d.push(b);continue}const{aligned:_,opposite:N}=Tm(b,n);if(b.specialCauseImprovementValue=_?b.value:null,b.specialCauseConcernValue=N?b.value:null,n===tt.Neither){const C=b.singlePointUp||b.twoSigmaUp||b.shiftUp||b.trendUp,x=b.singlePointDown||b.twoSigmaDown||b.shiftDown||b.trendDown;b.variationIcon=C?We.NeitherHigh:x?We.NeitherLow:We.CommonCause}else Dm(b,n,s.metricConflictRule,s.preferImprovementWhenConflict===!0,s.conflictStrategy,s.ruleHierarchy,s.preferTrendWhenConflict===!0);d.push(b)}}if(s.trendAcrossPartitions){const m=d.map((y,w)=>({idx:w,r:y})).filter(({r:y})=>!y.ghost&&Xe(y.value));if(m.length>=s.trendPoints)for(let y=0;y<=m.length-s.trendPoints;y++){const w=m.slice(y,y+s.trendPoints).map(b=>b.idx),M=w.map(b=>d[b]);if(!M.every(b=>Xe(b.value)))continue;let j=!0,v=!0;for(let b=1;b<M.length&&(M[b].value>M[b-1].value||(j=!1),M[b].value<M[b-1].value||(v=!1),!(!j&&!v));b++);j&&w.forEach(b=>d[b].trendUp=!0),v&&w.forEach(b=>d[b].trendDown=!0)}}if(s.trendAcrossPartitions){if(f){const m=d.some(y=>(y.singlePointUp||y.twoSigmaUp||y.shiftUp||y.trendUp)&&(y.singlePointDown||y.twoSigmaDown||y.shiftDown||y.trendDown));if(o===wr.Always||o===wr.AutoWhenConflict&&m){const y=Im(d),w=Lm(y,{metricImprovement:n,strategy:s.trendSegmentationStrategy}),M=new Set,j=new Set;for(const v of w)for(let b=v.start;b<=v.end;b++)v.trendDirection===vu.Up?M.add(b):j.add(b);d.forEach((v,b)=>{v.trendUp=M.has(b)?v.trendUp:!1,v.trendDown=j.has(b)?v.trendDown:!1,s.trendDominatesHighlightedWindow&&(M.has(b)?(v.singlePointDown=!1,v.twoSigmaDown=!1,v.shiftDown=!1):j.has(b)&&(v.singlePointUp=!1,v.twoSigmaUp=!1,v.shiftUp=!1))})}}for(const m of d){if(m.ghost||!Xe(m.value)||m.mean===null||n===tt.Neither)continue;const{aligned:y,opposite:w}=Tm(m,n);m.specialCauseImprovementValue=y?m.value:null,m.specialCauseConcernValue=w?m.value:null,Dm(m,n,s.metricConflictRule,s.preferImprovementWhenConflict===!0,s.conflictStrategy,s.ruleHierarchy,s.preferTrendWhenConflict===!0)}}return{rows:d}}function _u(t,e){const n=Gs(t),r=Ws(n.rows,{metricImprovement:t.metricImprovement,trendVisualMode:e?.trendVisualMode??Xi.Ungated,enableNeutralNoJudgement:e?.enableNeutralNoJudgement??!0}),i=e?.boundaryWindows;if(!i||i.mode!=="RecalcCrossing")return{rows:n.rows,visuals:r};const s=i.directionOverride??t.metricImprovement,o=wC(n.rows,s,i),l=r.map((c,u)=>{const d=o[u];if(c===_t.Common||c===_t.NoJudgement){if(d===_t.Improvement)return _t.Improvement;if(d===_t.Concern)return _t.Concern}return c});return{rows:n.rows,visuals:l}}var Em=(t=>(t.None="none",t.RecalcCrossingShift="recalc-crossing-shift",t.RecalcCrossingTrend="recalc-crossing-trend",t.RecalcCrossingTwoSigma="recalc-crossing-two-sigma",t.RecalculationsRecalculated="recalculations-recalculated",t.BaselinesRecalculated="baselines-recalculated",t))(Em||{});function SC(t,e,n){const r=n?.trendVisualMode??Xi.Ungated,i=n?.enableNeutralNoJudgement??!0,s=Array.isArray(t.data)?t.data.map((f,p)=>f?.baseline?p:-1).filter(f=>f>=0):[];let o;switch(e){case"recalc-crossing-shift":{o={mode:"RecalcCrossing",preWindow:2,postWindow:4,prePolarity:"Same",boundaryIndices:s};break}case"recalc-crossing-trend":{o={mode:"RecalcCrossing",preWindow:1,postWindow:5,prePolarity:"Same",boundaryIndices:s};break}case"recalc-crossing-two-sigma":{o={mode:"RecalcCrossing",preWindow:1,postWindow:1,prePolarity:"Same",boundaryIndices:s};break}case"baselines-recalculated":o={mode:"RecalcCrossing",preWindow:0,postWindow:0,prePolarity:"Same",directionOverride:t.metricImprovement,boundaryIndices:s};break;case"recalculations-recalculated":case"none":default:o=void 0}const{rows:l,visuals:c}=_u(t,{trendVisualMode:r,enableNeutralNoJudgement:i,boundaryWindows:o});let u=c.slice(),d=s.length?s[0]:-1;if(d<0){for(let f=1;f<l.length;f++)if(l[f].partitionId!==l[f-1].partitionId){d=f;break}}return(e==="recalculations-recalculated"||e==="baselines-recalculated")&&d>0&&(u[d-1]=_t.Common),{rows:l,visuals:u}}const Pm=Object.freeze({minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:Vi.Improvement,trendAcrossPartitions:!0,twoSigmaIncludeAboveThree:!0,chartLevelEligibility:!0});function kC(t){return{...Pm,...t??{}}}var Ot=(t=>(t.Concern="concern",t.Improvement="improvement",t.NoJudgement="noJudgement",t.Common="common",t))(Ot||{}),fi=(t=>(t.Classic="classic",t.Triangle="triangle",t.TriangleWithRun="triangleWithRun",t))(fi||{}),Ys=(t=>(t.Direction="direction",t.Polarity="polarity",t))(Ys||{});const wu=t=>{const e=()=>{globalThis.__spcIconDeprecationEmitted||(console.warn("[SPCVariationIcon] Deprecated payload shape detected. Migrate to { variationIcon, improvementDirection, specialCauseNeutral?, trend? }."),globalThis.__spcIconDeprecationEmitted=!0)};if(t.variationIcon!==void 0){const o=t;let l;o.improvementDirection!==void 0?l=o.improvementDirection===tt.Up?Pt.HigherIsBetter:o.improvementDirection===tt.Down?Pt.LowerIsBetter:Pt.ContextDependent:o.polarity&&(l=o.polarity);let c;const u=o.variationIcon;if(u===et.Improvement||u===et.Concern||u===et.Neither||u===et.Suppressed)u===et.Improvement?c=Ve.SpecialCauseImproving:u===et.Concern?c=Ve.SpecialCauseDeteriorating:u===et.Neither?c=Ve.CommonCause:c=Ve.SpecialCauseNoJudgement;else switch(o.variationIcon){case We.ImprovementHigh:case We.ImprovementLow:c=Ve.SpecialCauseImproving;break;case We.ConcernHigh:case We.ConcernLow:c=Ve.SpecialCauseDeteriorating;break;case We.NeitherHigh:case We.NeitherLow:c=o.specialCauseNeutral?Ve.SpecialCauseNoJudgement:Ve.CommonCause;break;case We.CommonCause:c=Ve.CommonCause;break;default:c=Ve.SpecialCauseNoJudgement;break}let d=o.trend;return d||(c===Ve.SpecialCauseImproving?d=l===Pt.LowerIsBetter?Ke.Lower:Ke.Higher:c===Ve.SpecialCauseDeteriorating?d=l===Pt.LowerIsBetter?Ke.Higher:Ke.Lower:c===Ve.SpecialCauseNoJudgement?o.highSideSignal&&!o.lowSideSignal?d=Ke.Higher:o.lowSideSignal&&!o.highSideSignal?d=Ke.Lower:d=Ke.Higher:d=Ke.Higher),{state:c,direction:d,polarity:l??Pt.ContextDependent}}if(t.state!==void 0){e();const o=t;let l=o.trend;return!l&&(o.state===Ve.SpecialCauseImproving||o.state===Ve.SpecialCauseDeteriorating)&&o.polarity&&(o.state===Ve.SpecialCauseImproving?l=o.polarity===Pt.LowerIsBetter?Ke.Lower:Ke.Higher:l=o.polarity===Pt.LowerIsBetter?Ke.Higher:Ke.Lower),l||(o.state===Ve.SpecialCauseImproving?l=Ke.Higher:o.state===Ve.SpecialCauseDeteriorating?l=Ke.Lower:l=Ke.Higher),{state:o.state,direction:l,polarity:o.polarity??Pt.ContextDependent}}const n=t;e();const i={[hn.Improving]:Ve.SpecialCauseImproving,[hn.Deteriorating]:Ve.SpecialCauseDeteriorating,[hn.No_Judgement]:Ve.SpecialCauseNoJudgement,[hn.None]:Ve.CommonCause}[n.judgement];let s;return n.judgement===hn.Improving?s=n.polarity===Pt.LowerIsBetter?Ke.Lower:Ke.Higher:n.judgement===hn.Deteriorating?s=n.polarity===Pt.LowerIsBetter?Ke.Higher:Ke.Lower:s=n.trend??Ke.Higher,{state:i,direction:s,polarity:n.polarity}};function Fm(t,e){const{state:n,direction:r,polarity:i}=wu(t),s=bu(n),o=r===Ke.Higher?"above":"below",l=r===Ke.Higher?"upwards":"downwards",c=(()=>{switch(i){case Pt.HigherIsBetter:return"For this measure, higher values are better.";case Pt.LowerIsBetter:return"For this measure, lower values are better.";default:return"Direction of improvement is context dependent."}})();return[(()=>{switch(s){case hn.Improving:return`Special cause improvement: recent data show a sustained run ${o} the mean (unlikely due to random variation).`;case hn.Deteriorating:return`Special cause deterioration: recent data show a sustained run ${o} the mean (unlikely due to random variation).`;case hn.No_Judgement:return`Special cause detected (no value judgement): recent data show a change in level, trending ${l}.`;case hn.None:default:return"Common cause variation: points vary randomly around the mean; no special cause detected."}})(),c,null,null,null,null,null].filter(Boolean).join(" ")}const Su=(t,e,n,r,i,s)=>a.jsxs("defs",{children:[r&&a.jsxs("filter",{id:e,filterUnits:"objectBoundingBox",children:[a.jsx("feGaussianBlur",{stdDeviation:"3"}),a.jsx("feOffset",{dx:"0",dy:"15",result:"blur"}),a.jsx("feFlood",{floodColor:"rgb(150,150,150)",floodOpacity:"1"}),a.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),a.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),i&&a.jsx("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:s.map(o=>a.jsx("stop",{offset:o.offset,stopColor:t,stopOpacity:parseFloat(o.opacity)},o.offset))})]}),ku=({data:t,precomputed:e,improvementDirection:n,size:r=44,ariaLabel:i,showLetter:s=!0,dropShadow:o=!0,gradientWash:l=!1,variant:c=fi.Classic,runLength:u=0,letterMode:d=Ys.Polarity,letterOverride:f,...p})=>{const h=A.useId(),g=A.useId(),{start:m,mid:y,end:w,triStart:M,triMid:j,triEnd:v}=Go(),{state:b,direction:_,polarity:N,ariaInput:C}=A.useMemo(()=>{if(e&&e.lastVariationIcon!==void 0){const J={variationIcon:e.lastVariationIcon,improvementDirection:n??tt.Neither,specialCauseNeutral:e.latestState===Ve.SpecialCauseNoJudgement},{state:$,direction:R,polarity:H}=wu(J);return{state:$,direction:R,polarity:H,ariaInput:J}}const{state:K,direction:O,polarity:B}=wu(t);return{state:K,direction:O,polarity:B,ariaInput:t}},[t,e,n]),x=A.useMemo(()=>bm(b),[b]),k=A.useMemo(()=>bu(b),[b]),F=k===hn.Improving||k===hn.Deteriorating;let D="";s&&F&&(d===Ys.Polarity?N===Pt.HigherIsBetter?D="H":N===Pt.LowerIsBetter?D="L":D="":D=_===Ke.Higher?"H":"L"),f!==void 0&&(D=f);const P=b!==Ve.CommonCause,I=b===Ve.SpecialCauseNoJudgement,L=Kt("common-cause","#A6A6A6"),E=P?x.hex:L,z=A.useMemo(()=>dC(b,_),[b,_]),G=i||`${x.label}${D?_===Ke.Higher?" â€“ Higher":" â€“ Lower":""}`,ee=Fm(C);if(c===fi.TriangleWithRun){const J=[[150,90],[100,190],[200,190]],$=[[150,140+100/2],[150-100/2,140-100/2],[150+100/2,140-100/2]];let R=null;b===Ve.SpecialCauseImproving||b===Ve.SpecialCauseDeteriorating?R=a.jsx("polygon",{points:(_===Ke.Higher?J:$).map(be=>be.join(",")).join(" "),fill:x.hex,stroke:x.hex,strokeWidth:6,transform:_===Ke.Higher?"translate(0, -8)":"translate(0, 15)"}):b===Ve.SpecialCauseNoJudgement&&(R=a.jsx("polygon",{points:_===Ke.Higher?J.map(be=>be.join(",")).join(" "):$.map(be=>be.join(",")).join(" "),fill:x.hex,stroke:x.hex,strokeWidth:6,transform:_===Ke.Higher?"translate(0,-7)":"translate(0,14)"}));const H=Math.max(0,Math.min(5,Math.floor(u||0))),q=b===Ve.CommonCause?160:_===Ke.Higher?220:70,V=10,re=26,fe=150-2*re,X=b===Ve.CommonCause?L:wm(b),se=Array.from({length:5}).map((be,Q)=>{const Fe=(b===Ve.SpecialCauseImproving||b===Ve.SpecialCauseDeteriorating)&&Q>=5-H?X:L;return a.jsx("circle",{cx:fe+Q*re,cy:q,r:V,fill:Fe,stroke:Fe,strokeWidth:1},Q)}),ue=Su(x.hex,h,g,o,l,[{offset:"0%",opacity:M},{offset:"75%",opacity:j},{offset:"100%",opacity:v}]),_e=b===Ve.CommonCause||_===Ke.Higher?"translate(0,-10)":"translate(0,25)";return a.jsxs("svg",{width:r,height:r,viewBox:"0 0 300 300",role:"img","aria-label":G,"aria-description":ee,...p,children:[ue,a.jsx("circle",{stroke:"none",fill:l?`url(#${g})`:"#ffffff",...o?{filter:`url(#${h})`}:{},cx:"150",cy:"150",r:"120"}),a.jsx("circle",{stroke:x.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),a.jsxs("g",{transform:_e,children:[R,D&&a.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:64,x:"150",y:_===Ke.Higher?155:145,textAnchor:"middle",dominantBaseline:"middle",children:D}),se]})]})}if(c===fi.Triangle){const J=[[150,75],[75,225],[225,225]],$=[[150,150+150/2],[150-150/2,150-150/2],[150+150/2,150-150/2]],R=[[150-150/2,150+150/2],[150+150/2,150+150/2]];let H=null;b===Ve.SpecialCauseImproving||b===Ve.SpecialCauseDeteriorating?H=a.jsx("polygon",{points:(_===Ke.Higher?J:$).map(V=>V.join(",")).join(" "),fill:x.hex,stroke:x.hex,strokeWidth:8,transform:_===Ke.Higher?"translate(0, -10)":"translate(0, 10)"}):b===Ve.SpecialCauseNoJudgement?H=a.jsx("polygon",{points:_===Ke.Higher?J.map(V=>V.join(",")).join(" "):$.map(V=>V.join(",")).join(" "),fill:x.hex,stroke:x.hex,strokeWidth:8,transform:_===Ke.Higher?"translate(0, -15)":"translate(0, 15)"}):b===Ve.CommonCause&&(H=a.jsx("line",{x1:R[0][0],y1:R[0][1],x2:R[1][0],y2:R[1][1],stroke:x.hex,strokeWidth:32,strokeLinecap:"square",transform:"translate(0, -75)"}));const q=Su(x.hex,h,g,o,l,[{offset:"0%",opacity:M},{offset:"65%",opacity:j},{offset:"100%",opacity:v}]);return a.jsxs("svg",{width:r,height:r,viewBox:"0 0 300 300",role:"img","aria-label":G,"aria-description":ee,...p,children:[q,a.jsx("circle",{stroke:"none",fill:l?`url(#${g})`:"#ffffff",...o?{filter:`url(#${h})`}:{},cx:"150",cy:"150",r:"120"}),a.jsx("circle",{stroke:x.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),H,D&&(b===Ve.SpecialCauseImproving||b===Ve.SpecialCauseDeteriorating)&&a.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:100,x:"150",y:_===Ke.Higher?"170":"140",textAnchor:"middle",dominantBaseline:"middle",children:D})]})}const T=Su(x.hex,h,g,o,l,[{offset:"0%",opacity:m},{offset:"65%",opacity:y},{offset:"100%",opacity:w}]);return a.jsxs("svg",{width:r,height:r,viewBox:"0 0 300 300",role:"img","aria-label":G,"aria-description":ee,...p,children:[T,a.jsx("circle",{stroke:"none",fill:l?`url(#${g})`:"#ffffff",...o?{filter:`url(#${h})`}:{},cx:"150",cy:"150",r:"120"}),a.jsx("circle",{stroke:x.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),D&&a.jsx("text",{fill:x.hex,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,transform:"translate(86.67, 54) scale(0.5, 0.5)",textAnchor:"end",children:a.jsx("tspan",{x:"120",y:_===Ke.Lower?"340":"155",children:D})}),I?a.jsx("path",{"aria-hidden":"true",fillRule:"evenodd",stroke:"none",fill:x.hex,..._===Ke.Lower?{transform:"rotate(90 150 150)"}:{transform:"translate(-5 0) rotate(0 150 150)"},d:"M 90.26,185.42 L 149.31,126.37 127.44,104.51 209.81,90.66 195.96,173.02 174.09,151.16 115.05,210.2 90.26,185.42 Z M 90.26,185.42"}):a.jsxs(a.Fragment,{children:[z.length===5&&a.jsx("path",{"aria-hidden":"true",fill:"none",stroke:L,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9,d:`M ${z.map(K=>`${K.cx} ${K.cy}`).join(" L ")}`}),z.map((K,O)=>{const J=O>=z.length-2&&P?E:L,$=J;return a.jsx("circle",{stroke:$,strokeWidth:2,strokeMiterlimit:10,fill:J,cx:K.cx,cy:K.cy,r:16},O)})]})]})};ku.displayName="SPCVariationIcon";const CC={[Tt.Xs]:{height:24,pointR:2,stroke:1},[Tt.Sm]:{height:32,pointR:3,stroke:1},[Tt.Md]:{height:44,pointR:4,stroke:1},[Tt.Lg]:{height:56,pointR:5,stroke:1},[Tt.Xl]:{height:72,pointR:6,stroke:1},[Tt.Full]:{height:44,pointR:2,stroke:1}};function NC(t,e){return!e||t.length<=e?t:t.slice(t.length-e)}function MC(t){const e=t.filter(o=>typeof o.value=="number");if(!e.length)return{mean:null,latestValue:null,latestIndex:null};const n=e.reduce((o,l)=>o+l.value,0)/e.length,r=[...t].reverse().findIndex(o=>o.value!=null),i=r>=0?t.length-1-r:null,s=i!=null?t[i].value:null;return{mean:n,latestValue:s,latestIndex:i}}const jC=t=>wm(t),Cu=({data:t,windowSize:e,minPointsForSignals:n=13,showMean:r=!0,showLimits:i=!0,showLimitBand:s=!0,showInnerBands:o=!1,showLatestMarker:l=!0,showStateGlyph:c=!0,variationState:u,metricImprovement:d,gradientWash:f=!1,size:p=Tt.Sm,ariaLabel:h,className:g,onPointClick:m,maxPoints:y,thinningStrategy:w="stride",colorPointsBySignal:M=!0,centerLine:j,controlLimits:v,sigmaBands:b,pointSignals:_,pointNeutralSpecialCause:N,visualCategories:C})=>{const x=d,k=A.useMemo(()=>NC(t,e),[t,e]),F=A.useMemo(()=>MC(k),[k]),D=(()=>{if(typeof p=="string")switch(p){case"xs":return Tt.Xs;case"sm":return Tt.Sm;case"md":return Tt.Md;case"lg":return Tt.Lg;case"xl":return Tt.Xl;case"full":return Tt.Full;default:return Tt.Sm}return p??Tt.Sm})(),P=CC[D],I=Math.max(k.length*6,60),L=I,E=D===Tt.Full?"100%":I,z=P.height,G=A.useMemo(()=>{if(D===Tt.Full)return{width:"100%",height:"auto",aspectRatio:`${L} / ${z}`,display:"block"}},[D,L,z]),ee=Math.max(6,P.pointR+3),T=Math.max(4,P.pointR+3),K=A.useMemo(()=>(t?.length??0)-(k?.length??0),[t?.length,k?.length]),O=j??F.mean??null,B=A.useMemo(()=>{if(!i)return null;if(v)return v;const ve=k.filter(ge=>typeof ge.value=="number");if(!ve.length||O==null)return null;const W=ve.map(ge=>ge.value),te=Math.min(...W),he=Math.max(...W);return{lower:te,upper:he}},[i,v?.lower,v?.upper,k,O]),$=A.useMemo(()=>({state:u??Ve.CommonCause,firedRules:[],mean:O??null,stdDev:null,side:F.latestValue!=null&&O!=null?F.latestValue>O?"above":"below":void 0}),[u,O,F.latestValue]).state,R=jC($),H=ve=>{const W=k.filter(we=>we.value!=null);if(!W.length)return z/2;const te=W.map(we=>we.value);B&&(B.lower!=null&&te.push(B.lower),B.upper!=null&&te.push(B.upper));const he=Math.min(...te),ge=Math.max(...te);return he===ge?z/2:z-(ve-he)/(ge-he)*(z-T*2)-T},q=A.useMemo(()=>{if(!y||k.length<=y)return k.map((U,Z)=>Z);if(w==="stride"){const U=Math.max(2,y),Z=(k.length-1)/(U-1),le=new Set;for(let ie=0;ie<U;ie++)le.add(Math.round(ie*Z));return le.add(k.length-1),Array.from(le).sort((ie,ce)=>ie-ce)}const ve=k.map((U,Z)=>({i:Z,v:U.value}));function W(U,Z,le){const ie=U.i,ce=U.v??0,de=Z.i,xe=Z.v??0,Me=le.i,Ae=le.v??0,Ye=Math.abs((Ae-xe)*ie-(Me-de)*ce+Me*xe-Ae*de),Ze=Math.hypot(Ae-xe,Me-de);return Ze===0?0:Ye/Ze}function te(U,Z){if(U.length<=2)return U;let le=-1,ie=-1;for(let ce=1;ce<U.length-1;ce++){const de=W(U[ce],U[0],U[U.length-1]);de>le&&(le=de,ie=ce)}if(le>Z){const ce=te(U.slice(0,ie+1),Z),de=te(U.slice(ie),Z);return[...ce.slice(0,-1),...de]}return[U[0],U[U.length-1]]}let he=.1,ge=ve;for(let U=0;U<8&&(ge=te(ve,he),!(ge.length<=y));U++)he*=1.6;const we=new Set(ge.map(U=>U.i));return we.add(0),we.add(k.length-1),Array.from(we).sort((U,Z)=>U-Z)},[k,y,w]),V=A.useMemo(()=>q.map(ve=>k[ve]),[q,k]),re=A.useMemo(()=>Math.max(1,L-ee*2),[L,ee]),fe=A.useMemo(()=>{const ve=Math.max(1,V.length-1);return W=>W/ve*re+ee},[V.length,re,ee]),X=A.useMemo(()=>{let ve="";return V.forEach((W,te)=>{if(W.value==null)return;const he=H(W.value),ge=fe(te);ve+=ve?` L ${ge} ${he}`:`M ${ge} ${he}`}),ve},[V,fe]),se=F.latestIndex??-1,ue=B,_e=Go(),be=A.useMemo(()=>`spc-spark-wash-${Math.random().toString(36).slice(2)}`,[k.length,f]),Q=k.length>=(n||0),Ge=h||"SPC sparkline",Fe=(()=>{if(!$)return;const ve=x===tt.Up?Pt.HigherIsBetter:x===tt.Down?Pt.LowerIsBetter:Pt.ContextDependent,W={variationIcon:$===Ve.SpecialCauseImproving?et.Improvement:$===Ve.SpecialCauseDeteriorating?et.Concern:$===Ve.SpecialCauseNoJudgement?et.Suppressed:et.Neither,trend:x===tt.Up?Ke.Higher:Ke.Lower,polarity:ve};try{return Fm(W)}catch{return}})(),Be=A.useMemo(()=>{if(!Q)return 10;const ve=[...k].reverse().filter(te=>te.value!=null).slice(0,6).map(te=>H(te.value));return ve.length&&ve.reduce((te,he)=>te+he,0)/ve.length<z/2?z:10},[k,Q,z]);return a.jsxs("svg",{role:"img","aria-label":Ge,"aria-description":Fe,width:D===Tt.Full?void 0:E,height:D===Tt.Full?void 0:z,style:G,className:g,viewBox:`0 0 ${L} ${z}`,children:[f&&a.jsxs(a.Fragment,{children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:be,x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:R,stopOpacity:Number(_e.start)}),a.jsx("stop",{offset:"60%",stopColor:R,stopOpacity:Number(_e.mid)}),a.jsx("stop",{offset:"100%",stopColor:R,stopOpacity:Number(_e.end)})]})}),a.jsx("rect",{x:0,y:0,width:L,height:z,fill:`url(#${be})`})]}),ue&&ue.lower!=null&&ue.upper!=null&&a.jsxs(a.Fragment,{children:[s&&a.jsx("rect",{x:0,y:Math.min(H(ue.upper),H(ue.lower)),width:L,height:Math.abs(H(ue.upper)-H(ue.lower)),fill:R,fillOpacity:.08}),a.jsx("line",{x1:0,x2:L,y1:H(ue.lower),y2:H(ue.lower),stroke:R,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),a.jsx("line",{x1:0,x2:L,y1:H(ue.upper),y2:H(ue.upper),stroke:R,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),b&&o&&a.jsxs(a.Fragment,{children:[b.lowerTwo!=null&&a.jsx("line",{x1:0,x2:L,y1:H(b.lowerTwo),y2:H(b.lowerTwo),stroke:R,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1}),b.lowerOne!=null&&a.jsx("line",{x1:0,x2:L,y1:H(b.lowerOne),y2:H(b.lowerOne),stroke:R,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),b.upperOne!=null&&a.jsx("line",{x1:0,x2:L,y1:H(b.upperOne),y2:H(b.upperOne),stroke:R,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),b.upperTwo!=null&&a.jsx("line",{x1:0,x2:L,y1:H(b.upperTwo),y2:H(b.upperTwo),stroke:R,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1})]})]}),r&&O!=null&&a.jsx("line",{x1:0,x2:L,y1:H(O),y2:H(O),stroke:ui(),strokeWidth:1,strokeDasharray:"2,2"}),a.jsx("path",{d:X,fill:"none",stroke:ui(),strokeWidth:P.stroke,strokeLinecap:"round"}),q.map((ve,W)=>{const te=k[ve];if(!te||te.value==null)return null;const he=H(te.value),ge=fe(W),U=(ve===se&&l?P.pointR+1:P.pointR)-.5;let Z=ui();if(M){const le=C?.[K+ve];if(le!=null)le===_t.Improvement?Z=Zo(et.Improvement):le===_t.Concern?Z=Zo(et.Concern):le===_t.NoJudgement?Z=Kt("no-judgement","#490092"):Z=ui();else{const ie=_?.[K+ve];ie===et.Improvement||ie===et.Concern?Z=Zo(ie):Z=N?.[K+ve]?Kt("no-judgement","#490092"):ui()}}return a.jsx("circle",{cx:ge,cy:he,r:U,fill:Z,stroke:"none",strokeWidth:0,onClick:m?()=>m(ve,te):void 0,style:m?{cursor:"pointer"}:void 0,"data-index":ve,"data-signal-colour":M?Z:void 0},ve)}),c&&Q&&$&&$!==Ve.CommonCause&&x&&a.jsx("text",{x:L-4,y:Be,textAnchor:"end",fontSize:12,fontWeight:"bold",fill:R,"data-glyph-pos":Be<z/2?"top":"bottom",children:x===tt.Up?"H":"L"})]})};Cu.displayName="SPCSpark";function Jo(t){switch(t){case We.ImprovementHigh:case We.ImprovementLow:return Ve.SpecialCauseImproving;case We.ConcernHigh:case We.ConcernLow:return Ve.SpecialCauseDeteriorating;case We.NeitherHigh:case We.NeitherLow:return Ve.SpecialCauseNoJudgement;case We.CommonCause:return Ve.CommonCause;default:return null}}function $m(t){return t===We.ImprovementHigh||t===We.ImprovementLow||t===We.ConcernHigh||t===We.ConcernLow||t===We.NeitherHigh||t===We.NeitherLow}function TC({warnings:t,show:e,formatWarningCategory:n,formatWarningCode:r}){const[i,s]=ne.useState(""),o=ne.useRef("");return ne.useEffect(()=>{if(!e){o.current!==""&&(o.current="",s(""));return}const l=t.length;if(!l){const f="Diagnostics: no warnings.";f!==o.current&&(o.current=f,s(f));return}const c={error:t.filter(f=>f.severity===Kn.Error).length,warning:t.filter(f=>f.severity===Kn.Warning).length,info:t.filter(f=>f.severity===Kn.Info).length},u=[];c.error&&u.push(`${c.error} error${c.error===1?"":"s"}`),c.warning&&u.push(`${c.warning} warning${c.warning===1?"":"s"}`),c.info&&u.push(`${c.info} info`);const d=`Diagnostics updated: ${l} warning${l===1?"":"s"} (${u.join(", ")}).`;d!==o.current&&(o.current=d,s(d))},[e,t]),e?a.jsxs(a.Fragment,{children:[i&&a.jsx("div",{"data-testid":"spc-diagnostics-live","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:0,overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",border:0},children:i}),t.length>0&&a.jsxs("div",{className:"fdp-spc-chart__warnings",role:"region","aria-label":"SPC diagnostics",children:[a.jsx("p",{className:"fdp-spc-chart__warnings-heading",children:"Diagnostics"}),a.jsx(Zn,{firstCellIsHeader:!1,panel:!1,responsive:!1,head:[{text:"Severity"},{text:"Category"},{text:"Code"},{text:"Details"}],rows:t.map(l=>{let c="grey";return l.severity===Kn.Error?c="red":l.severity===Kn.Warning?c="orange":l.severity===Kn.Info&&(c="blue"),[{node:a.jsx(pt,{color:c,text:(l.severity?String(l.severity):"Info").replace(/^[a-z]/,u=>u.toUpperCase())}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--severity"},{node:l.category?a.jsx(pt,{color:"purple",text:n(l.category)}):a.jsx("span",{className:"fdp-spc-chart__warning-empty",children:"â€“"}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--category"},{node:a.jsx(pt,{color:"grey",text:r(l.code)}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--code"},{node:a.jsxs("div",{className:"fdp-spc-chart__warning-message",children:[a.jsx("span",{children:l.message}),l.context&&Object.keys(l.context).length>0&&a.jsxs("details",{className:"fdp-spc-chart__warning-context",style:{marginTop:4},children:[a.jsx("summary",{children:"context"}),a.jsx("pre",{children:JSON.stringify(l.context,null,2)})]})]}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--message"}]}),classes:"fdp-spc-chart__warnings-table-wrapper",tableClasses:"fdp-spc-chart__warnings-table"})]})]}):null}function DC({variationNode:t,assuranceNode:e,show:n}){return n?a.jsxs("div",{className:"fdp-spc-chart__top-row",style:{display:"flex",justifyContent:"flex-end",marginBottom:4},children:[t,e]}):null}const Nu=({status:t,size:e=44,ariaLabel:n,dropShadow:r=!0,colourOverride:i,gradientWash:s=!1,letterOverride:o,showTrendLines:l=!0,...c})=>{const u=A.useId(),d=A.useId(),{start:f,mid:p,end:h}=Go(),g=i||lC[t],m=(o||cC[t]).slice(0,2),y=n||`Assurance ${t}`;return a.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":y,...c,children:[a.jsxs("defs",{children:[r&&a.jsxs("filter",{id:u,filterUnits:"objectBoundingBox",children:[a.jsx("feGaussianBlur",{stdDeviation:"3"}),a.jsx("feOffset",{dx:"-1",dy:"15",result:"blur"}),a.jsx("feFlood",{floodColor:"rgb(166,166,166)",floodOpacity:"1"}),a.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),a.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),s&&a.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:g,stopOpacity:parseFloat(f)}),a.jsx("stop",{offset:"65%",stopColor:g,stopOpacity:parseFloat(p)}),a.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:parseFloat(h)})]})]}),a.jsx("circle",{stroke:"none",fill:s?`url(#${d})`:"#ffffff",...r?{filter:`url(#${u})`}:{},cx:"150",cy:"150",r:"120"}),a.jsx("text",{fill:g,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,x:0,y:0,transform:"translate(121.01, 32) scale(0.5, 0.5)",textAnchor:"middle",children:a.jsx("tspan",{x:60,y:184,children:m})}),l&&a.jsxs(a.Fragment,{children:[t===ci.Fail?a.jsx("path",{id:"fail-line",stroke:g,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 33,143 L 268,143"}):t===ci.Uncertain?a.jsx("path",{id:"uncertain-line",stroke:"rgb(166, 166, 166)",strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"16.5,10",strokeDashoffset:0,fill:"none",d:"M 36,174 L 266,174"}):a.jsx("path",{id:"pass-line",stroke:g,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 48,204 L 254,204"}),a.jsx("path",{id:"data-sparkline",stroke:"rgb(166, 166, 166)",strokeWidth:12,strokeMiterlimit:12,fill:"none",d:"M 59.9,187.91 C 72.79,171.72 87.33,158.06 104.4,157.83 121.91,158.58 140.94,187.85 153.4,189.91 164.1,192.12 163.78,171.38 169.17,170.53 172.87,169.55 174.88,187.45 184.94,189.24 197,191.86 230.54,184.47 239.01,185.9"}),a.jsx("circle",{stroke:g,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"})]})]})};Nu.displayName="SPCAssuranceIcon";const IC=Object.freeze(Object.defineProperty({__proto__:null,AssuranceResult:ci,Direction:Ke,MetricPolarity:Pt,SPCAssuranceIcon:Nu,SPCVariationIcon:ku,VariationJudgement:hn,VariationState:Ve,getVariationColour:bm,getVariationTrend:bu},Symbol.toStringTag,{value:"Module"}));function LC(t){const{show:e,rowsForUi:n,minPoints:r,metricImprovement:i,variant:s,runLength:o}=t;if(!e||!n?.length)return null;const l=n,c=typeof r=="number"&&!isNaN(r)?r:13;if(l.filter(b=>!b.data.ghost&&b.data.value!=null).length<c)return null;let d=-1;for(let b=l.length-1;b>=0;b--){const _=l[b];if(_&&_.data.value!=null&&!_.data.ghost){d=b;break}}if(d===-1)return null;const f=l[d],p=f.classification?.variation,h=f.classification?.assurance,g=p===et.Neither&&!!f.classification?.neutralSpecialCauseValue,m=h===$r.Pass?ci.Pass:h===$r.Fail?ci.Fail:ci.Uncertain;let y;if(p===et.Suppressed){const b=!!f.rules.singlePoint.up,_=!!f.rules.singlePoint.down;i===Fr.Up?b?y=Ke.Higher:_&&(y=Ke.Lower):i===Fr.Down?_?y=Ke.Lower:b&&(y=Ke.Higher):y=Ke.Higher}else if(p===et.Neither&&g){const b=f.rules.singlePoint.up||f.rules.twoOfThree.up||f.rules.fourOfFive.up||f.rules.shift.up||f.rules.trend.up,_=f.rules.singlePoint.down||f.rules.twoOfThree.down||f.rules.fourOfFive.down||f.rules.shift.down||f.rules.trend.down;b&&!_?y=Ke.Higher:_&&!b?y=Ke.Lower:y=Ke.Higher}const w=80,M=f.rules.singlePoint.up||f.rules.twoOfThree.up||f.rules.fourOfFive.up||f.rules.shift.up||f.rules.trend.up,j=f.rules.singlePoint.down||f.rules.twoOfThree.down||f.rules.fourOfFive.down||f.rules.shift.down||f.rules.trend.down;let v=We.CommonCause;return p===et.Improvement?v=We.ImprovementHigh:p===et.Concern?v=We.ConcernHigh:p===et.Neither&&(g?y===Ke.Lower||j&&!M?v=We.NeitherLow:v=We.NeitherHigh:v=We.CommonCause),a.jsxs("div",{style:{display:"flex",gap:12,marginRight:16},children:[a.jsx("div",{className:"fdp-spc-chart__embedded-icon","data-variation":String(p),"data-trend":y?String(y):"none",style:{width:w,height:w},children:a.jsx(ku,{dropShadow:!1,data:{variationIcon:v,improvementDirection:i,specialCauseNeutral:g,highSideSignal:M,lowSideSignal:j,...y?{trend:y}:{}},letterMode:i===Fr.Neither?Ys.Direction:Ys.Polarity,size:w,variant:s,runLength:s===fi.TriangleWithRun?o:void 0})}),a.jsx("div",{className:"fdp-spc-chart__embedded-assurance-icon","data-assurance":String(h),style:{width:w,height:w},children:a.jsx(Nu,{status:m,size:w,dropShadow:!1})})]},`embedded-icon-${d}`)}const Bm=({engineRows:t,limits:e,pointDescriber:n,measureName:r,measureUnit:i,dateFormatter:s,enableNeutralNoJudgement:o=!0,showTrendGatingExplanation:l=!0})=>{const c=_r(),u=Pr(),[d,f]=ne.useState(null),[p,h]=ne.useState(!1),g=ne.useRef(null);ne.useEffect(()=>{if(c){if(c.focused&&(f(c.focused),g.current&&(cancelAnimationFrame(g.current),g.current=null)),!c.focused&&!p){const Be=requestAnimationFrame(()=>{f(null),g.current=null});g.current=Be}return()=>{g.current&&(cancelAnimationFrame(g.current),g.current=null)}}},[c,c?.focused,p]);const m=c&&(c.focused||(p?d:null)||d),[y,w]=ne.useState(!1);ne.useEffect(()=>{const Be=requestAnimationFrame(()=>w(!0));return()=>cancelAnimationFrame(Be)},[m?.index]);const M=u?.innerWidth??0,j=u?.innerHeight??0,v=m?Math.min(Math.max(m.clientX,0),M):0,b=m?Math.min(Math.max(m.clientY,0),j):0,_=u?.ref?.current||void 0;if(!m)return null;const N=t?.[m.index],x=Ro(N?{specialCauseSinglePointUp:!!N.rules.singlePoint.up,specialCauseSinglePointDown:!!N.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!N.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!N.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!N.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!N.rules.fourOfFive.down,specialCauseShiftUp:!!N.rules.shift.up,specialCauseShiftDown:!!N.rules.shift.down,specialCauseTrendUp:!!N.rules.trend.up,specialCauseTrendDown:!!N.rules.trend.down}:null).map(Be=>({id:Be,label:Yi[Be].tooltip})),k=m.x instanceof Date?m.x:new Date(m.x),F=s?s(k):k.toDateString(),D=i?`${i}`:"",P=r||D?`${m.y}${D?""+D:" "}${r?" "+r:""}`:`${m.y}`,I=Uo(N?.classification?.variation),L=gm(N?.classification?.assurance),E=aC(e.mean??null,e.sigma,m.y),z=n?n(m.index,{x:m.x,y:m.y}):void 0,G=I||L||E,ee=N?.rules.trend.up||N?.rules.trend.down,T=N?.classification?.variation===et.Neither&&ee,K=l&&T?"Trend detected (monotonic run) â€“ held neutral until values cross onto the favourable side of the mean.":null,O=x.length>0,B=N&&"primeDirection"in N?N.primeDirection:void 0,J=N&&"primeRuleId"in N?N.primeRuleId:void 0,$=o&&N?.classification?.variation===et.Neither&&O,R="var(--nhs-fdp-color-primary-yellow, #ffeb3b)",H=ym(N?.classification?.variation),q=6.2,re=[z||"",`${F} â€¢ ${P}`].filter(Boolean).reduce((Be,ve)=>Math.max(Be,ve.length*q+32),0),fe=200,X=440,se=Math.min(X,Math.max(fe,re));let ue=v+12,be=(u.margin?.top??0)+b+16;ue+se>M&&(ue=v- -60-se),ue<0&&(ue=Math.max(0,M-se));const Q=m?`spc-tooltip-${m.index}`:"spc-tooltip",Ge=typeof m.index=="number"?m.index:NaN,Fe=_?$x.createPortal(a.jsx("div",{id:Q,className:"fdp-spc-tooltip fdp-spc-tooltip-portal"+(y?" is-visible":""),style:{position:"absolute",left:ue,top:be,width:se,maxWidth:X,zIndex:10,pointerEvents:"auto",userSelect:"none"},role:"tooltip","aria-live":"polite","aria-hidden":y?"false":"true","data-floating":!0,"data-placement":ue+se+12>M?"left":"right",onPointerEnter:()=>{h(!0),g.current&&(cancelAnimationFrame(g.current),g.current=null)},onPointerLeave:()=>{if(h(!1),!c?.focused){const Be=requestAnimationFrame(()=>{f(null),g.current=null});g.current=Be}},children:a.jsxs("div",{className:"fdp-spc-tooltip__body",children:[a.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--point",children:[a.jsx("div",{className:"fdp-spc-tooltip__section-label",children:a.jsx("strong",{children:"Point"})}),a.jsxs("div",{className:"fdp-spc-tooltip__primary-line",children:["Index: ",Ge]})]}),a.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--date",children:[a.jsx("div",{className:"fdp-spc-tooltip__section-label",children:a.jsx("strong",{children:"Date"})}),a.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:F})]}),a.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--value",children:[a.jsx("div",{className:"fdp-spc-tooltip__section-label",children:a.jsx("strong",{children:"Value"})}),a.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:P})]}),G&&a.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--signals",children:[a.jsx("div",{className:"fdp-spc-tooltip__section-label",children:a.jsx("strong",{children:"Signals"})}),a.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Signals",children:I?.toLowerCase().includes("concern")?a.jsx(pt,{text:I,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):I?.toLowerCase().includes("improvement")?a.jsx(pt,{text:I,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):$?a.jsx(pt,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):I?a.jsx(pt,{text:I,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null})]}),L&&a.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--assurance",children:[a.jsx("div",{className:"fdp-spc-tooltip__section-label",children:a.jsx("strong",{children:"Assurance"})}),a.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:(()=>{const Be=L.toLowerCase(),W=!(Be.includes("not met")||Be.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(Be);return a.jsx(pt,{text:L,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${W?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${L}`})})()})]}),E&&a.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--limits",children:[a.jsx("div",{className:"fdp-spc-tooltip__section-label",children:a.jsx("strong",{children:"Control Limits & Sigma"})}),a.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:a.jsx(pt,{text:(()=>{const Be=E.toLowerCase();return Be.startsWith("within 1")?"â‰¤1Ïƒ":Be.startsWith("1â€“2")?"1â€“2Ïƒ":Be.startsWith("2â€“3")?"2â€“3Ïƒ":Be.startsWith(">3")?">3Ïƒ":E})(),color:E.includes(">3")?"orange":E.includes("2â€“3")?"yellow":"grey","aria-label":`Sigma zone: ${E}`,className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--zone"})})]}),K&&a.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--gating","data-gating":!0,children:[a.jsx("div",{className:"fdp-spc-tooltip__section-label",children:a.jsx("strong",{children:"Trend gating"})}),a.jsx("div",{className:"fdp-spc-tooltip__explanation","aria-live":"off",children:K})]}),O&&a.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",children:[a.jsx("div",{className:"fdp-spc-tooltip__section-label",children:a.jsx("strong",{children:"Special cause"})}),a.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",children:x.map(({id:Be,label:ve})=>{const W=String(Be),he=W===Us.TrendIncreasing||W===Us.TrendDecreasing?"fdp-spc-tag--trend":$?"fdp-spc-tag--no-judgement":I?I.toLowerCase().includes("concern")?"fdp-spc-tag--concern":I.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common";return a.jsx(pt,{text:ve,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${he}`,"data-rule-id":W},W)})}),B&&a.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",style:{marginTop:16},children:[a.jsx("div",{className:"fdp-spc-tooltip__section-label",style:{marginBottom:6},children:a.jsx("strong",{children:"Prime Direction"})}),(()=>{const Be=$?"fdp-spc-tag--no-judgement":I?I.toLowerCase().includes("concern")?"fdp-spc-tag--concern":I.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",ve=`${B}${J?` (${J})`:""}`;return a.jsx(pt,{text:ve,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${Be}`,"aria-label":`Prime direction ${B}${J?` via ${J}`:""}`})})()]})]})]})}),_):null;return a.jsxs("g",{className:"fdp-tooltip-layer fdp-spc-tooltip",pointerEvents:"none","aria-hidden":"true",children:[a.jsx("circle",{cx:v,cy:b,r:7,fill:"none",stroke:R,strokeWidth:3}),a.jsx("circle",{cx:v,cy:b,r:5,fill:"#000",stroke:R,strokeWidth:1.5}),a.jsx("circle",{cx:v,cy:b,r:2.5,fill:H,stroke:"#fff",strokeWidth:.5}),Fe]})},AC=({engineRows:t,measureName:e,measureUnit:n,onSignalFocus:r})=>{const i=_r(),s=i?.focused??null,o=s?.index??null,l=typeof o=="number"&&t?t[o]:null,c=ne.useMemo(()=>l?Ro({specialCauseSinglePointUp:!!l.rules.singlePoint.up,specialCauseSinglePointDown:!!l.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!l.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!l.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!l.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!l.rules.fourOfFive.down,specialCauseShiftUp:!!l.rules.shift.up,specialCauseShiftDown:!!l.rules.shift.down,specialCauseTrendUp:!!l.rules.trend.up,specialCauseTrendDown:!!l.rules.trend.down}):[],[l]),u=ne.useMemo(()=>Array.from(new Set(c.map(m=>Yi[m]?.narration).filter(Boolean))),[c]),d=l?Uo(l.classification?.variation):null,f=l?gm(l.classification?.assurance):null,p=c.length>0,h=l?l.classification?.variation===et.Neither&&p:!1,g=ne.useRef(null);return ne.useEffect(()=>{if(!r||!s||l==null)return;const m=`${s.seriesId}:${s.index}`;if(g.current!==m){g.current=m;try{r({index:s.index,x:s.x,y:s.y,row:l,rules:c})}catch{}}},[s?.seriesId,s?.index,s?.x,s?.y,l,c,r]),a.jsxs("div",{className:"fdp-spc-inspector",role:"region","aria-label":"Signals inspector","data-testid":"spc-signals-inspector",children:[a.jsxs("div",{className:"fdp-spc-inspector__header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsx("strong",{children:"Signals inspector"}),a.jsx("div",{className:"fdp-spc-inspector__nav","aria-hidden":!i,children:i&&a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{i.focused?i.focusPrevPoint():i.focusFirstPoint()},"aria-label":"Previous point",children:"â—€"}),a.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{i.focused?i.focusNextPoint():i.focusFirstPoint()},"aria-label":"Next point",children:"â–¶"})]})})]}),!l||!s?a.jsx("p",{className:"fdp-spc-inspector__empty",children:"No point selected."}):a.jsxs("div",{className:"fdp-spc-inspector__body",children:[a.jsxs("div",{className:"fdp-spc-inspector__summary",style:{display:"flex",gap:16,flexWrap:"wrap"},children:[a.jsxs("span",{children:[a.jsx("strong",{children:"Point:"})," ",s.index+1]}),a.jsxs("span",{children:[a.jsx("strong",{children:"Value:"})," ",s.y,n?` ${n}`:"",e?` ${e}`:""]})]}),(d||h||f)&&a.jsx("div",{className:"fdp-spc-inspector__signals",style:{marginTop:8},children:a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[d?.toLowerCase().includes("concern")?a.jsx(pt,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):d?.toLowerCase().includes("improvement")?a.jsx(pt,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):h?a.jsx(pt,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):d?a.jsx(pt,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null,f&&(()=>{const m=f.toLowerCase(),w=!(m.includes("not met")||m.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(m);return a.jsx(pt,{text:f,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${w?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${f}`})})()]})}),a.jsxs("div",{className:"fdp-spc-inspector__rules",style:{marginTop:8},children:[a.jsx("strong",{children:"Special cause:"}),a.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:4},children:c.length===0?a.jsx("span",{children:" None"}):c.map(m=>{const y=String(m),M=y===Us.TrendIncreasing||y===Us.TrendDecreasing?"fdp-spc-tag--trend":h?"fdp-spc-tag--no-judgement":d?d.toLowerCase().includes("concern")?"fdp-spc-tag--concern":d.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",j=Yi[m]?.tooltip||y;return a.jsx(pt,{text:j,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${M}`,"data-rule-id":y,title:Yi[m]?.tooltip},y)})})]}),u.length>0&&a.jsxs("div",{className:"fdp-spc-inspector__narration",style:{marginTop:8},children:[a.jsx("strong",{children:"Summary:"})," ",u.join("; ")]})]})]})};function EC(t,e=!0){if(!t?.length)return[];const n=[...t];if(e){for(let s=1;s<n.length-1;s++)n[s]===Ot.Common&&n[s-1]===n[s+1]&&n[s-1]!==Ot.Common&&(n[s]=n[s-1]);let i=0;for(;i<n.length;){const s=n[i];let o=i+1;for(;o<n.length&&n[o]===s;)o++;o-i===1&&s!==Ot.Common&&(n[i]=Ot.Common),i=o}}const r=[];if(n.length){let i=0;for(let s=1;s<=n.length;s++)if(s===n.length||n[s]!==n[i]){const o=n[i],l=s-1,c=l-i+1;(o===Ot.Common||c>=2)&&r.push({start:i,end:l,category:o}),i=s}}return r}var Vs=(t=>(t.Slope="slope",t.Neutral="neutral",t.Extend="extend",t))(Vs||{}),zm=(t=>(t.Ungated="ungated",t.Gated="gated",t))(zm||{});function PC(t){const{ui:e,input:n,engine:r,container:i,a11y:s,visualsEngine:o,meta:l,data:c,ariaLabel:u,height:d,showZones:f,showPoints:p,announceFocus:h,className:g,unit:m,targets:y,baselines:w,ghosts:M,settings:j,chartType:v,metricImprovement:b,gradientSequences:_,sequenceTransition:N,processLineWidth:C,showPartitionMarkers:x,showWarningsPanel:k,warningsFilter:F,enableNeutralNoJudgement:D,showTrendGatingExplanation:P,trendVisualMode:I,alwaysShowZeroY:L,alwaysShowHundredY:E,percentScale:z,showTrendStartMarkers:G,showFirstFavourableCrossMarkers:ee,showTrendBridgeOverlay:T,showSignalsInspector:K,onSignalFocus:O,showIcons:B,showEmbeddedIcon:J,embeddedIconVariant:$,embeddedIconRunLength:R,showFocusIndicator:H,visualsScenario:q,visualsEngineSettings:V,source:re,narrationContext:fe,highlightOutOfControl:X,precomputed:se}=t;process.env.NODE_ENV!=="production"&&(!n&&(y!==void 0||w!==void 0||M!==void 0)&&console.warn("SPCChart: Flat input props (targets/baselines/ghosts) are deprecated. Use input={{ data, targets, baselines, ghosts }} instead."),!r&&j!==void 0&&console.warn("SPCChart: Flat engine prop 'settings' is deprecated. Use engine={{ chartType, metricImprovement, settings }}."),!i&&(d!==void 0||g!==void 0)&&console.warn("SPCChart: Consider grouped container props. Use container={{ height, className }}."),!s&&(u!==void 0||h!==void 0||fe!==void 0||m!==void 0)&&console.warn("SPCChart: Consider grouped accessibility props. Use a11y={{ label, announceFocus, narrationContext, unit }}."),!o&&(q!==void 0||V!==void 0)&&console.warn("SPCChart: Consider grouped visuals engine props. Use visualsEngine={{ scenario, settings }}."),e?.visuals===void 0&&(f!==void 0||p!==void 0)&&console.warn("SPCChart: Visual toggles should be grouped. Use ui={{ visuals: { showZones, showPoints } }}."),e?.visuals?.rules===void 0&&X!==void 0&&console.warn("SPCChart: Prefer grouped rules toggle. Use ui={{ visuals: { rules: { highlightOutOfControl } } }}."),!l&&re!==void 0&&console.warn("SPCChart: Consider grouped meta. Use meta={{ source }}."));const ue=n?.data??c??[],_e=n?.targets??y,be=n?.baselines??w,Q=n?.ghosts??M,Ge=r?.chartType??v??hm.XmR,Fe=r?.metricImprovement??b??Fr.Neither,Be=r?.settings??j,ve=r?.autoRecalc,W=e?.axes?.alwaysShowZeroY??L??!1,te=e?.axes?.alwaysShowHundredY??E??!1,he=e?.axes?.percentScale??z??!1,ge=e?.visuals?.gradientSequences??_??!0,we=e?.visuals?.sequenceTransition??N??"slope",U=e?.visuals?.processLineWidth??C??2,Z=e?.visuals?.trend?.visualMode??I??"ungated",le=e?.visuals?.trend?.showGatingExplanation??P??!0,ie=e?.visuals?.rules?.enableNeutralNoJudgement??D??!0,ce=e?.visuals?.rules?.enableRules??t.enableRules??!0,de=e?.visuals?.showZones,xe=e?.visuals?.showPoints,Me=e?.visuals?.rules?.highlightOutOfControl,Ae=i?.height,Ye=i?.className,Ze=s?.label,ct=s?.unit,ze=s?.narrationContext,pe=o?.scenario,$e=o?.settings,Y=l?.source,ae=e?.overlays?.partitionMarkers??x??!1,Ne=e?.overlays?.trendStartMarkers??G??!1,ke=e?.overlays?.firstFavourableCrossMarkers??ee??!1,Ce=e?.overlays?.trendBridge??T??!1,De=e?.inspector?.show??K??!1,Te=e?.inspector?.onFocus??O,me=e?.warnings?.show??k??!1,Se=e?.warnings?.filter??F,oe=e?.icons?.show??B??!1,ye=e?.icons?.embedded?.show??J??!0,Ie=e?.icons?.embedded?.variant??$??fi.Classic,Oe=e?.icons?.embedded?.runLength??R,Pe=e?.overlays?.focusIndicator??H??!0;return{effData:ue,effTargets:_e,effBaselines:be,effGhosts:Q,effChartTypeCore:Ge,effMetricImprovementCore:Fe,effEngineSettings:Be,effEngineAutoRecalc:ve,effHeight:Ae,effClassName:Ye,effAriaLabel:Ze,effUnit:ct,effNarrationContext:ze,effShowZones:de,effShowPoints:xe,effHighlightOutOfControl:Me,effVisualsScenario:pe,effVisualsEngineSettings:$e,effPrecomputedVisuals:se,effSource:Y,effAlwaysShowZeroY:W,effAlwaysShowHundredY:te,effPercentScale:he,effGradientSequences:ge,effSequenceTransition:we,effProcessLineWidth:U,effTrendVisualMode:Z,effShowTrendGatingExplanation:le,effEnableNeutralNoJudgement:ie,effEnableRules:ce,effShowPartitionMarkers:ae,effShowTrendStartMarkers:Ne,effShowFirstFavourableCrossMarkers:ke,effShowTrendBridgeOverlay:Ce,effShowSignalsInspector:De,effOnSignalFocus:Te,effShowWarningsPanel:me,effWarningsFilter:Se,effShowIcons:oe,effShowEmbeddedIcon:ye,effEmbeddedIconVariant:Ie,effEmbeddedIconRunLength:Oe,effShowFocusIndicator:Pe}}let FC=0;const $C=({data:t,targets:e,visuals:n,a11y:r,axis:i,compute:s})=>{const{series:o,engineRows:l,visualCategories:c,partitionMarkers:u}=t,{limits:d,uniformTarget:f}=e,{showPoints:p,showZones:h,highlightOutOfControl:g,gradientSequences:m,sequenceTransition:y,processLineWidth:w,showFocusIndicator:M=!1,enableRules:j,enableNeutralNoJudgement:v=!0,showTrendStartMarkers:b=!1,showFirstFavourableCrossMarkers:_=!1,showTrendBridgeOverlay:N=!1}=n,{announceFocus:C,ariaLabel:x,narrationContext:k,showSignalsInspector:F=!1,onSignalFocus:D,showTrendGatingExplanation:P=!0}=r,{zeroBreakSlotGapPx:I}=i,{metricImprovement:L,effectiveUnit:E}=s,z=oi(),G=Pr();if(!z)return null;const{xScale:ee,yScale:T}=z,K=ne.useRef("spc-seq-"+ ++FC),O=_r(),B=o[0]?.data||[],J=ne.useMemo(()=>{if(!d.ucl&&!d.lcl)return new Set;const W=new Set;return B.forEach((te,he)=>{typeof d.ucl=="number"&&te.y>d.ucl&&W.add(he),typeof d.lcl=="number"&&te.y<d.lcl&&W.add(he)}),W},[d.ucl,d.lcl,B]),$=ne.useMemo(()=>{if(!l||!l.length)return null;const W=[];return l.forEach((te,he)=>{const ge=te.classification.variation===et.Concern||te.classification.variation===et.Improvement||!!te.classification.neutralSpecialCauseValue,we=!!te.rules.singlePoint.up||!!te.rules.twoOfThree.up||!!te.rules.fourOfFive.up||!!te.rules.shift.up||!!te.rules.trend.up,U=!!te.rules.singlePoint.down||!!te.rules.twoOfThree.down||!!te.rules.fourOfFive.down||!!te.rules.shift.down||!!te.rules.trend.down;W[he]={variation:te.classification.variation,assurance:te.classification.assurance,special:ge,concern:te.classification.variation===et.Concern,improvement:te.classification.variation===et.Improvement,trendUp:!!te.rules.trend.up,trendDown:!!te.rules.trend.down,upAny:we,downAny:U,neutralSpecial:!!te.classification.neutralSpecialCauseValue,shiftUp:!!te.rules.shift.up,shiftDown:!!te.rules.shift.down,twoOfThreeUp:!!te.rules.twoOfThree.up,twoOfThreeDown:!!te.rules.twoOfThree.down,fourOfFiveUp:!!te.rules.fourOfFive.up,fourOfFiveDown:!!te.rules.fourOfFive.down,partitionId:te.partition.id??null}}),W},[l]),R=ne.useMemo(()=>(c||[]).map(W=>W===_t.Improvement?Ot.Improvement:W===_t.Concern?Ot.Concern:W===_t.NoJudgement?Ot.NoJudgement:Ot.Common),[c]),H=ne.useMemo(()=>!m||!R.length?[]:EC(R,!0),[m,R,x]),q=ne.useMemo(()=>B.map(W=>ee(W.x instanceof Date?W.x:new Date(W.x))),[B,ee]),V=ee.range()[1],re=ee.range()[0],fe=ne.useMemo(()=>{if(!l||!l.length)return null;let W=Number.POSITIVE_INFINITY,te=Number.POSITIVE_INFINITY;if(l.forEach((ie,ce)=>{ie.rules.trend.up&&(W=Math.min(W,ce)),ie.rules.trend.down&&(te=Math.min(te,ce))}),!Number.isFinite(W)&&!Number.isFinite(te))return null;const he=W<=te,ge=he?Jn.Up:Jn.Down,we=he?W:te,U=ie=>L==null||L===Fr.Neither||ie==null||typeof ie.data.value!="number"||typeof ie.limits.mean!="number"?!1:ge===Jn.Up?L===Fr.Up?ie.data.value>ie.limits.mean:ie.data.value<ie.limits.mean:L===Fr.Down?ie.data.value<ie.limits.mean:ie.data.value>ie.limits.mean;let Z=null;for(let ie=we;ie<l.length;ie++){const ce=l[ie];if(!(he?!!ce.rules.trend.up:!!ce.rules.trend.down))break;if(U(ce)){Z=ie;break}}let le=!1;if(Z!=null){let ie=0;for(let ce=Z;ce<l.length;ce++){const de=l[ce];if(!(he?!!de.rules.trend.up:!!de.rules.trend.down))break;U(de)&&ie++}le=ie>=2}return{direction:ge,detectedAt:we,firstFavourableCrossAt:Z,persistedAcrossMean:le}},[l,L]),X=ne.useMemo(()=>{if(!l||!l.length)return null;const W=te=>{const he=[];let ge=null,we=null;for(let U=0;U<l.length;U++){const Z=l[U],le=te(Z),ie=typeof le=="number"&&!isNaN(le)?le:null;if(ie==null){ge!==null&&we!=null&&(he.push({x1:q[ge],x2:q[U-1],y:T(we)}),ge=null,we=null);continue}if(ge===null){ge=U,we=ie;continue}we!=null&&Math.abs(ie-we)<=1e-9||(we!=null&&he.push({x1:q[ge],x2:q[U-1],y:T(we)}),ge=U,we=ie)}return ge!==null&&we!=null&&he.push({x1:q[ge],x2:q[l.length-1],y:T(we)}),he};return{mean:W(te=>te.limits.mean??null),ucl:W(te=>te.limits.ucl??null),lcl:W(te=>te.limits.lcl??null),onePos:W(te=>te.limits.oneSigma.upper??null),oneNeg:W(te=>te.limits.oneSigma.lower??null),twoPos:W(te=>te.limits.twoSigma.upper??null),twoNeg:W(te=>te.limits.twoSigma.lower??null)}},[l,q,T]),se=ne.useMemo(()=>H.length?a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:`${K.current}-grad-common`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.28}),a.jsx("stop",{offset:"70%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.12}),a.jsx("stop",{offset:"100%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.045})]}),H.map((W,te)=>{const he=`${K.current}-grad-${te}`;let ge,we=.28,U=.12,Z=.045;switch(W.category){case Ot.Concern:ge="var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",we=.28,U=.12,Z=.045;break;case Ot.Improvement:ge="var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",we=.26,U=.11,Z=.045;break;case Ot.NoJudgement:ge="var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",we=.26,U=.11,Z=.045;break;default:ge="var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)"}return a.jsxs("linearGradient",{id:he,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:ge,stopOpacity:we}),a.jsx("stop",{offset:"70%",stopColor:ge,stopOpacity:U}),a.jsx("stop",{offset:"100%",stopColor:ge,stopOpacity:Z})]},he)})]}):null,[H]),ue=ne.useMemo(()=>{if(!H.length)return null;const[W]=T.domain(),te=T(W),he=H.map((ge,we)=>{const{start:U,end:Z,category:le}=ge;if(U<0||Z>=q.length||U>Z)return null;const ie=q[U],ce=q[Z];let de="";if(le===Ot.Common){const xe=we>0?H[we-1]:null,Me=we<H.length-1?H[we+1]:null,Ae=xe?q[xe.end]:re,Ye=xe?T(B[xe.end].y):te,Ze=Me?q[Me.start]:V,ct=Me?T(B[Me.start].y):te;de=`M ${Ae} ${te}`,de+=` L ${Ae} ${Ye}`;for(let ze=U;ze<=Z;ze++)de+=` L ${q[ze]} ${T(B[ze].y)}`;de+=` L ${Ze} ${ct}`,de+=` L ${Ze} ${te} Z`}else{const xe=we>0?H[we-1]:null,Me=we<H.length-1?H[we+1]:null,Ae=xe&&xe.category!==Ot.Common,Ye=Me&&Me.category!==Ot.Common,Ze=T(B[U].y),ct=T(B[Z].y);let ze=ie,pe=ce;if(Ae){const $e=q[xe.end],Y=T(B[xe.end].y),ae=B[U].y-B[xe.end].y;y===Vs.Slope&&ae>0?(de=`M ${$e} ${Y} L ${ie} ${Ze}`,ze=$e):(de=`M ${ie} ${te} L ${ie} ${Ze}`,ze=ie)}else de=`M ${ie} ${te} L ${ie} ${Ze}`;for(let $e=U+1;$e<=Z;$e++)de+=` L ${q[$e]} ${T(B[$e].y)}`;if(de+=` L ${ce} ${ct}`,Ye){const $e=q[Me.start],Y=T(B[Me.start].y),ae=B[Me.start].y-B[Z].y;(y===Vs.Slope&&ae<=0||y===Vs.Extend)&&(de+=` L ${$e} ${Y}`,pe=$e)}if(de+=` L ${pe} ${te}`,de+=` L ${ze} ${te} Z`,y===Vs.Neutral&&Ae){const $e=q[xe.end],Y=T(B[xe.end].y),ae=a.jsx("path",{d:`M ${$e} ${te} L ${$e} ${Y} L ${ie} ${Ze} L ${ie} ${te} Z`,fill:`url(#${K.current}-grad-common)`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-wedge-${we}`);return a.jsxs("g",{children:[ae,a.jsx("path",{d:de,fill:`url(#${K.current}-grad-${we})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${we}`)]},`seq-group-${we}`)}}return a.jsx("path",{d:de,fill:`url(#${K.current}-grad-${we})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${we}`)}).filter(Boolean);return a.jsx("g",{className:"fdp-spc__sequence-bgs",children:he})},[H,q,V,T,B,y]),_e=ne.useMemo(()=>{if(!k?.timeframe&&B.length>=2){const W=B.map(Z=>Z.x instanceof Date?Z.x:new Date(Z.x)),te=new Date(Math.min(...W.map(Z=>Z.getTime()))),he=new Date(Math.max(...W.map(Z=>Z.getTime()))),ge=Math.round((he.getTime()-te.getTime())/864e5)||0;if(ge<14)return`The chart shows a timeframe of ${ge+1} days`;const we=Math.round(ge/7);return we<20?`The chart shows a timeframe of ${we} weeks`:`The chart shows a timeframe of ${(he.getFullYear()-te.getFullYear())*12+(he.getMonth()-te.getMonth())+1} months`}if(k?.timeframe)return`The chart shows a timeframe of ${k.timeframe}`},[k?.timeframe,B]),be=W=>{const te=W%10,he=W%100;return te===1&&he!==11?`${W}st`:te===2&&he!==12?`${W}nd`:te===3&&he!==13?`${W}rd`:`${W}th`},Q=W=>`${be(W.getDate())} ${W.toLocaleString("en-GB",{month:"long"})}, ${W.getFullYear()}`,Ge=W=>({specialCauseSinglePointUp:!!W?.rules.singlePoint.up,specialCauseSinglePointDown:!!W?.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!W?.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!W?.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!W?.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!W?.rules.fourOfFive.down,specialCauseShiftUp:!!W?.rules.shift.up,specialCauseShiftDown:!!W?.rules.shift.down,specialCauseTrendUp:!!W?.rules.trend.up,specialCauseTrendDown:!!W?.rules.trend.down}),Fe=ne.useCallback(({index:W,x:te,y:he})=>{const ge=l?.[W],we=te instanceof Date?te:new Date(te),U=Q(we),Z=k?.measureUnit?` ${k.measureUnit}`:"",le=k?.measureName?` ${k.measureName}`:"";if(!ge)return`General summary is: ${_e?_e+". ":""}Point ${W+1}, ${U}, ${he}${Z}${le}`;const ie=Uo(ge.classification?.variation)||"Variation",ce=Ro(Ge(ge)),de=ce.length?` Rules: ${[...new Set(ce.map(Me=>Yi[Me].narration))].join("; ")}.`:" No special cause rules.",xe=[];return k?.measureName&&xe.push(`Measure: ${k.measureName}.`),k?.datasetContext&&xe.push(`${k.datasetContext}.`),k?.organisation&&xe.push(`Organisation: ${k.organisation}.`),k?.additionalNote&&xe.push(k.additionalNote),["General summary is:",...xe,`Point ${W+1} recorded on `,U+",",`with a value of ${he} ${Z}${le}`,ie+".",de].join(" ").replace(/\s+/g," ").trim()},[l,k,_e]),Be=ne.useCallback((W,te)=>l?.[W]?Fe({index:W,seriesId:"process",x:te.x instanceof Date?te.x:new Date(te.x),y:te.y}).replace(/^General summary is:\s*/,"").replace(/^Point \d+\s*/,""):void 0,[l,Fe]),ve=ne.useMemo(()=>{try{const W=typeof T?.domain=="function"?T.domain():void 0;if(!W||!Array.isArray(W)||W.length<2)return!1;const te=Math.min(W[0],W[1]),he=Math.max(W[0],W[1]);return!(0>=te&&0<=he)}catch{return!1}},[T]);return a.jsx(um,{children:a.jsxs("div",{className:"fdp-spc-chart",role:"group","aria-label":"Statistical process control chart","aria-roledescription":"chart",children:[a.jsx("svg",{width:z.xScale.range()[1]+56+16,height:(G?.innerHeight??z.yScale.range()[0])+12+48,role:"img",children:a.jsxs("g",{transform:"translate(56,12)",children:[a.jsx(ou,{type:"x"}),a.jsx(ou,{type:"y",yZeroBreak:{enabled:ve,gapPx:I,zigZag:{heightPx:64,amplitudePx:4,cycles:6,stepXPx:3}}}),a.jsx(tm,{axis:"y"}),se,ue,u.map((W,te)=>{const he=B[W];if(!he)return null;const ge=ee(he.x instanceof Date?he.x:new Date(he.x));return a.jsx("line",{x1:ge,x2:ge,y1:0,y2:T.range()[0],stroke:"#555",strokeDasharray:"4 4",strokeWidth:1,"aria-hidden":"true",className:"fdp-spc__partition-marker"},`partition-marker-${te}`)}),X?.mean.length?a.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__cl-group",children:[X.mean.map((W,te)=>a.jsx("line",{className:"fdp-spc__cl",x1:W.x1,x2:W.x2,y1:W.y,y2:W.y},`mean-${te}`)),X.mean.map((W,te)=>{if(te===X.mean.length-1)return null;const he=X.mean[te+1];if(!he||W.y===he.y)return null;const we=Math.max(4,he.x1-W.x2||0)*.5,U=`M ${W.x2},${W.y} C ${W.x2+we},${W.y} ${he.x1-we},${he.y} ${he.x1},${he.y}`;return a.jsx("path",{className:"fdp-spc__cl fdp-spc__cl-join",d:U,fill:"none"},`mean-join-${te}`)})]}):null,f!=null&&a.jsx(a.Fragment,{}),X?.ucl.length?a.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--ucl",children:[X.ucl.map((W,te)=>a.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--ucl",x1:W.x1,x2:W.x2,y1:W.y,y2:W.y,strokeWidth:2},`ucl-${te}`)),X.ucl.map((W,te)=>{if(te===X.ucl.length-1)return null;const he=X.ucl[te+1];if(!he||W.y===he.y)return null;const we=Math.max(4,he.x1-W.x2||0)*.5,U=`M ${W.x2},${W.y} C ${W.x2+we},${W.y} ${he.x1-we},${he.y} ${he.x1},${he.y}`;return a.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--ucl fdp-spc__limit-join",d:U,fill:"none",strokeWidth:2},`ucl-join-${te}`)})]}):null,X?.lcl.length?a.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--lcl",children:[X.lcl.map((W,te)=>a.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--lcl",x1:W.x1,x2:W.x2,y1:W.y,y2:W.y,strokeWidth:2},`lcl-${te}`)),X.lcl.map((W,te)=>{if(te===X.lcl.length-1)return null;const he=X.lcl[te+1];if(!he||W.y===he.y)return null;const we=Math.max(4,he.x1-W.x2||0)*.5,U=`M ${W.x2},${W.y} C ${W.x2+we},${W.y} ${he.x1-we},${he.y} ${he.x1},${he.y}`;return a.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--lcl fdp-spc__limit-join",d:U,fill:"none",strokeWidth:2},`lcl-join-${te}`)})]}):null,f!=null&&a.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__target-group",children:[a.jsx("line",{className:"fdp-spc__target","data-testid":"spc-target-line",x1:0,x2:ee.range()[1],y1:T(f),y2:T(f),strokeWidth:2.5}),a.jsxs("text",{"data-testid":"spc-target-label",x:ee.range()[0]-7,y:T(f)-5,textAnchor:"start",className:"fdp-spc__target-label",fontSize:12,children:["Target ",f," ",E||k?.measureUnit||""]})]}),h&&X&&X.mean.length>0&&a.jsxs(a.Fragment,{children:[X.onePos.map((W,te)=>a.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos1",x1:W.x1,x2:W.x2,y1:W.y,y2:W.y,"aria-hidden":"true",strokeWidth:2},`onePos-${te}`)),X.oneNeg.map((W,te)=>a.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg1",x1:W.x1,x2:W.x2,y1:W.y,y2:W.y,"aria-hidden":"true",strokeWidth:2},`oneNeg-${te}`)),X.twoPos.map((W,te)=>a.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos2",x1:W.x1,x2:W.x2,y1:W.y,y2:W.y,"aria-hidden":"true",strokeWidth:2},`twoPos-${te}`)),X.twoNeg.map((W,te)=>a.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg2",x1:W.x1,x2:W.x2,y1:W.y,y2:W.y,"aria-hidden":"true",strokeWidth:2},`twoNeg-${te}`))]}),fe&&(b||_||N)&&(()=>{const W=fe.detectedAt,te=fe.firstFavourableCrossAt,he=B[W]?ee(B[W].x instanceof Date?B[W].x:new Date(B[W].x)):null,ge=B[W]?T(B[W].y):null,we=te!=null&&B[te]?ee(B[te].x instanceof Date?B[te].x:new Date(B[te].x)):null,U=te!=null&&B[te]?T(B[te].y):null;return a.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__trend-overlays",children:[N&&he!=null&&ge!=null&&we!=null&&U!=null&&a.jsx("line",{x1:he,y1:ge,x2:we,y2:U,stroke:"#888",strokeDasharray:"4 4",strokeWidth:2,children:a.jsx("title",{children:"Trend bridge: start to first favourable-side point"})}),b&&he!=null&&ge!=null&&a.jsx("circle",{cx:he,cy:ge,r:6,fill:"white",stroke:"#555",strokeWidth:2,children:a.jsx("title",{children:"Trend start (run reached N)"})}),_&&we!=null&&U!=null&&a.jsx("circle",{cx:we,cy:U,r:5,fill:"#555",children:a.jsx("title",{children:"First favourable-side inclusion"})})]})})(),a.jsx(dm,{series:o[0],seriesIndex:0,palette:"categorical",showPoints:!1,focusablePoints:!1,focusIndex:-1,parseX:W=>W.x instanceof Date?W.x:new Date(W.x),smooth:!1,strokeWidth:w}),p&&B.map((W,te)=>{const he=ee(W.x instanceof Date?W.x:new Date(W.x)),ge=T(W.y),we=J.has(te),U=$?.[te],Z=R[te],le=Z===Ot.Improvement,ie=Z===Ot.Concern,ce=Z===Ot.NoJudgement,de=["fdp-spc__point",we&&g?"fdp-spc__point--ooc":null,j&&ie?"fdp-spc__point--sc-concern":null,j&&le?"fdp-spc__point--sc-improvement":null,j&&v&&ce?"fdp-spc__point--sc-no-judgement":null,U?.assurance===$r.Pass?"fdp-spc__point--assurance-pass":null,U?.assurance===$r.Fail?"fdp-spc__point--assurance-fail":null].filter(Boolean).join(" "),xe=O?.focused?.index===te;return a.jsx("circle",{cx:he,cy:ge,r:5,className:de,"data-variation":U?.variation,"data-assurance":U?.assurance,"aria-label":x,...xe?{"aria-describedby":`spc-tooltip-${te}`}:{}},te)}),M&&F&&O?.focused&&(()=>{const W=O.focused,te=typeof W.index=="number"?W.index:-1;if(te<0||!B[te])return null;const he=ee(B[te].x instanceof Date?B[te].x:new Date(B[te].x)),ge=T(B[te].y),we="var(--nhs-fdp-color-primary-yellow, #ffeb3b)";return a.jsxs("g",{className:"fdp-spc__focus-indicator","aria-hidden":"true",children:[a.jsx("circle",{cx:he,cy:ge,r:7,fill:"none",stroke:we,strokeWidth:3}),a.jsx("circle",{cx:he,cy:ge,r:5,fill:"#000",stroke:we,strokeWidth:1.5}),a.jsx("circle",{cx:he,cy:ge,r:2.5,fill:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stroke:"#fff",strokeWidth:.5})]})})(),G&&a.jsx(BC,{width:ee.range()[1],height:T.range()[0]}),!F&&a.jsx(Bm,{engineRows:l,limits:{mean:d.mean,sigma:d.sigma},pointDescriber:Be,measureName:k?.measureName,measureUnit:k?.measureUnit,dateFormatter:W=>Q(W),enableNeutralNoJudgement:v,showTrendGatingExplanation:P})]})}),F&&a.jsx("div",{style:{marginTop:8},children:a.jsx(AC,{engineRows:l,measureName:k?.measureName,measureUnit:E||k?.measureUnit,onSignalFocus:D})}),C&&a.jsx(qk,{format:W=>Fe({...W,x:W.x instanceof Date?W.x:new Date(W.x)})})]})})},BC=({width:t,height:e})=>{const n=_r();return n?a.jsx("rect",{className:"fdp-spc__interaction-layer",width:t,height:e,fill:"transparent",tabIndex:0,"aria-label":"Interactive chart area. Use arrow keys to move between points.",onMouseMove:r=>{const s=r.currentTarget.getBoundingClientRect(),o=r.clientX-s.left,l=r.clientY-s.top;n.focusNearest(o,l)},onMouseLeave:()=>n.clear(),onKeyDown:r=>{switch(r.key){case"ArrowRight":n.focusNextPoint(),r.preventDefault();break;case"ArrowLeft":n.focusPrevPoint(),r.preventDefault();break;case"ArrowDown":n.focusNextSeries(),r.preventDefault();break;case"ArrowUp":n.focusPrevSeries(),r.preventDefault();break;case"Home":n.focusFirstPoint(),r.preventDefault();break;case"End":n.focusLastPoint(),r.preventDefault();break}},style:{cursor:"crosshair"}}):null};function Om(t){if(t==null)return;const e=t instanceof Date?t:new Date(t);return Number.isNaN(e.valueOf())?void 0:e}function zC(t,e,n){const r=new Array(t),i=new Date(e);for(let s=0;s<t;s++)switch(r[s]=new Date(i),n){case"hourly":i.setHours(i.getHours()+1);break;case"daily":i.setDate(i.getDate()+1);break;case"weekly":i.setDate(i.getDate()+7);break;case"monthly":i.setMonth(i.getMonth()+1);break;case"quarterly":i.setMonth(i.getMonth()+3);break;case"annually":i.setFullYear(i.getFullYear()+1);break}return r}function OC(t,e){const n=t.filter(Boolean);if(n.length<2)return e;const r=[];for(let c=1;c<n.length;c++)r.push(n[c].getTime()-n[c-1].getTime());const i=r.sort((c,u)=>c-u),s=i[Math.floor(i.length/2)],o=3600*1e3,l=24*o;return s<=2*o?"hourly":s<=2*l?"daily":s<=10*l?"weekly":s<=45*l?"monthly":s<=120*l?"quarterly":"annually"}function Hm(t,e){if(t)try{switch(e){case"hourly":return new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"}).format(t);case"daily":return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(t);case"weekly":return`Week of ${new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(t)}`;case"monthly":return new Intl.DateTimeFormat(void 0,{month:"short",year:"numeric"}).format(t);case"quarterly":return`Q${Math.floor(t.getMonth()/3)+1} ${t.getFullYear()}`;case"annually":return`${t.getFullYear()}`;default:return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(t)}}catch{return}}function HC(t,e,n,r="0-100"){if(e)return e;if(n)return n;const i=t.filter(l=>l!=null);if(!i.length)return;const s=Math.min(...i),o=Math.max(...i);if(r==="0-1"){if(s>=0&&o<=1&&o>0)return"%"}else if(s>=0&&o<=100&&o>0)return"%"}function RC(t,e,n=1){switch(t||e){case"hourly":return n===1?"last hour":`last ${n} hours`;case"daily":return n===1?"last day":`last ${n} days`;case"weekly":return n===1?"last week":`last ${n} weeks`;case"monthly":return n===1?"last month":`last ${n} months`;case"quarterly":return n===1?"last quarter":`last ${n} quarters`;case"annually":return n===1?"last year":`last ${n} years`;default:return"previous"}}function Rm(t){const{values:e,dates:n,intervalHint:r,startDate:i,providedUnit:s,defaultUnit:o,autoValue:l=!0,autoDelta:c=!0,autoMetadata:u=!0,deltaConfig:d}=t,f=e.map(x=>typeof x=="number"?x:x==null?null:Number(x));let p=-1;for(let x=f.length-1;x>=0;x--)if(f[x]!=null){p=x;break}let h=(n||[]).map(Om);if(!h.some(Boolean)){const x=Om(i);x&&r?h=zC(f.length,x,r):h=new Array(f.length).fill(void 0)}const m=OC(h,r),y=HC(f,s,o,t.percentHeuristic),w=l&&p>=0&&f[p]!=null?f[p]:void 0,M={strategy:"previous",n:1,absolute:!0,skipNulls:!0,...d||{}};function j(){if(p<0)return-1;if(M.strategy==="previous"||M.strategy==="n-points"){let P=p-(M.strategy==="previous"?1:Math.max(1,M.n||1));if(!M.skipNulls)return P;for(let I=P;I>=0;I--)if(f[I]!=null)return I;return-1}const x=h[p];if(!x)return-1;const k=new Date(x);k.setFullYear(k.getFullYear()-1);let F=-1,D=1/0;for(let P=0;P<h.length;P++){const I=h[P];if(!I||f[P]==null)continue;const L=Math.abs(I.getTime()-k.getTime());L<D&&(D=L,F=P)}return F}const v=j(),b=v>=0?f[v]:null;let _;if(c&&w!=null&&b!=null){const x=w-b,k=M.absolute!==!1,F=k?x:b===0?0:x/Math.abs(b)*100;_={value:Number.isFinite(F)?Number(F.toFixed(2)):0,isPercent:k?y==="%":!0,period:`vs ${RC(m,r,M.strategy==="n-points"?Math.max(1,M.n||1):1)}`}}const N=p>=0?h[p]:void 0,C=u&&Hm(N,m)?`Latest: ${Hm(N,m)}`:void 0;return{value:w,unit:y,delta:_,metadata:C,latestDate:N,frequency:m}}function UC(t){const{rows:e}=Gs(t),n=_u(t);return{rows:e,visuals:n.visuals}}const Mu=13;function ju(t){if(!(!t||t.length===0))return t.map(e=>{switch(e){case _t.Improvement:return et.Improvement;case _t.Concern:return et.Concern;case _t.NoJudgement:return et.Neither;default:return null}})}function Um(t){if(!(!t||t.length===0))return t.map(e=>e===_t.NoJudgement)}function Wm(t,e){const n=t===wn.G?wn.G:t===wn.T?wn.T:wn.XmR,r=e===tt.Up?tt.Up:e===tt.Down?tt.Down:tt.Neither;return{chartType:n,metricImprovement:r}}function Gm(t,e,n){const r=typeof t?.minimumPoints=="number"&&!isNaN(t.minimumPoints)?t.minimumPoints:Mu,i={minimumPoints:r};return e.filter(o=>!o.ghost&&typeof o.value=="number").length>=r&&(i.chartLevelEligibility=!0),t?.enableFourOfFiveRule!=null&&(i.enableFourOfFiveRule=!!t.enableFourOfFiveRule),n&&Object.assign(i,n),Object.keys(i).length?i:void 0}function WC(t,e,n){const r=ne.useMemo(()=>{if(!t||t.length<2)return!1;const o=Math.min(t[0],t[1]),l=Math.max(t[0],t[1]);return!(0>=o&&0<=l)},[t]),{slotPx:i,totalReservedPx:s}=ne.useMemo(()=>{if(!r)return{slotPx:0,totalReservedPx:0};const l=(e??260)-60,c=Fs,d=c+Xp,f=n?.maxFraction,p=Math.max($s,Math.floor(l*f)),h=Math.min(d,p);return{slotPx:Math.min(c,h),totalReservedPx:h}},[r,e,n?.maxFraction]);return{show:r,slotPx:i,totalReservedPx:s}}function GC(t,e,n,r){if(n.percentScale){const c=t.map(f=>f.y),u=Math.max(100,...c),d=Math.min(0,...c);return[d<0?d:0,u>100?u:100]}const i=t.map(c=>c.y),s=c=>{c!=null&&i.push(c)};if(s(e.mean),s(e.ucl),s(e.lcl),s(e.onePos),s(e.oneNeg),s(e.twoPos),s(e.twoNeg),r&&r.length)for(const c of r)typeof c=="number"&&!isNaN(c)&&i.push(c);if(!i.length)return;let o=Math.min(...i),l=Math.max(...i);return n.alwaysShowZeroY&&(o=Math.min(0,o)),n.alwaysShowHundredY&&(l=Math.max(100,l)),[o,l]}function Tu(t,e){if(!t?.length||e.chartType!==wn.XmR)return null;const n=Math.max(2,Math.floor(e.shiftLength??6)),r=[];for(let h=0;h<t.length;h++){const g=t[h],m=g.value;g?.ghost||typeof m=="number"&&Number.isFinite(m)&&r.push({idx:h,value:m})}if(r.length<n*2)return null;let i=0,s=0;for(let h=1;h<r.length;h++)i+=Math.abs(r[h].value-r[h-1].value),s++;if(s===0)return null;const l=i/s*(2.66/3);if(!Number.isFinite(l)||l<=0)return null;const c=Math.max(0,e.deltaSigma??.5),u=e.metricImprovement===tt.Up,d=e.metricImprovement===tt.Down,f=(()=>{for(let h=t.length-1;h>=0;h--)if(t[h]?.baseline)return h;return-1})();function p(h,g){let m=0,y=0;for(let w=h;w<g;w++)m+=r[w].value,y++;return y?m/y:NaN}for(let h=n;h<=r.length-n;h++){const g=p(h-n,h),m=p(h,h+n);if(!Number.isFinite(g)||!Number.isFinite(m))continue;const y=m-g,w=y/l;let M=!1,j=!1;if(u?(M=w>=c,j=!0):d?(M=-w>=c,j=!1):(M=Math.abs(w)>=c,j=y>0),!M)continue;const v=N=>j?N>g:N<g;let b=!0;for(let N=h;N<h+n;N++)if(!v(r[N].value)){b=!1;break}if(!b)continue;const _=r[h].idx;if(!(e.minGap&&f>=0&&_-f<e.minGap))return _}return null}function YC(t,e){const n=Tu(t,e);return n==null?t.slice():t.map((r,i)=>i===n?{...r,baseline:!0}:r)}function VC(t,e){const n=Math.max(1,Math.floor(e.maxInsertions??1));if(n<=1)return YC(t,e);let r=t.slice(),i=0;const s=Math.max(1,e.minGap??0);for(;i<n;){const o=Tu(r,{...e,minGap:s});if(o==null)break;if(r[o]?.baseline){const l=Tu(r,{...e,minGap:s+1});if(l==null||l===o)break;r=r.map((c,u)=>u===l?{...c,baseline:!0}:c),i++;continue}r=r.map((l,c)=>c===o?{...l,baseline:!0}:l),i++}return r}const Ym=t=>{const e=ne.useCallback(me=>String(me).replace(/^spc_warning_code\.?/i,"").replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(oe=>oe.length?oe[0].toUpperCase()+oe.slice(1):oe).join(" "),[]),n=ne.useCallback(me=>String(me).replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(Se=>Se.length?Se[0].toUpperCase()+Se.slice(1):Se).join(" "),[]);process.env.NODE_ENV!=="production"&&t.disableTrendSideGating!==void 0&&console.warn("SPCChart: 'disableTrendSideGating' prop is deprecated and ignored (trend side gating always enabled).");const{effData:r,effTargets:i,effBaselines:s,effGhosts:o,effChartTypeCore:l,effMetricImprovementCore:c,effEngineSettings:u,effAlwaysShowZeroY:d,effAlwaysShowHundredY:f,effPercentScale:p,effGradientSequences:h,effSequenceTransition:g,effProcessLineWidth:m,effTrendVisualMode:y,effShowTrendGatingExplanation:w,effEnableNeutralNoJudgement:M,effEnableRules:j,effShowPartitionMarkers:v,effShowTrendStartMarkers:b,effShowFirstFavourableCrossMarkers:_,effShowTrendBridgeOverlay:N,effShowSignalsInspector:C,effOnSignalFocus:x,effShowWarningsPanel:k,effWarningsFilter:F,effShowEmbeddedIcon:D,effEmbeddedIconVariant:P,effEmbeddedIconRunLength:I,effShowFocusIndicator:L,effHeight:E,effClassName:z,effAriaLabel:G,effUnit:ee,effNarrationContext:T,effShowZones:K,effShowPoints:O,effHighlightOutOfControl:B,effVisualsScenario:J,effVisualsEngineSettings:$,effSource:R,effPrecomputedVisuals:H,effEngineAutoRecalc:q}=PC(t),V=G??t.ariaLabel,re=E??t.height??260,fe=z??t.className,X=ee??t.unit,se=T??t.narrationContext,ue=K??t.showZones,_e=O??t.showPoints,be=B??t.highlightOutOfControl,Q=J??t.visualsScenario??Em.None,Ge=$??t.visualsEngineSettings,Fe=R??t.source,Be=t.a11y?.announceFocus??t.announceFocus??!1,ve=ne.useMemo(()=>r.map((me,Se)=>({x:me.x,value:me.y,target:i?.[Se]??void 0,baseline:s?.[Se]??void 0,ghost:o?.[Se]??void 0})),[r,i,s,o]),W=ne.useMemo(()=>{try{const me=q;return me?.enabled?VC(ve,{chartType:l,metricImprovement:c,shiftLength:me.shiftLength,deltaSigma:me.deltaSigma,minGap:me.minGap,maxInsertions:me.maxInsertions}):ve}catch{return ve}},[ve,q,l,c]),te=ne.useMemo(()=>{if(H?.visuals)return H.visuals;try{const me=Gm(u,W,Ge),{chartType:Se,metricImprovement:oe}=Wm(l,c),ye={chartType:Se,metricImprovement:oe,data:W,settings:me},{visuals:Ie}=SC(ye,Q,{trendVisualMode:y===zm.Ungated?Xi.Ungated:Xi.Gated,enableNeutralNoJudgement:M});return Ie||[]}catch{return[]}},[H?.visuals?.length,W,l,c,y,M,u,Q,Ge]),ge=ne.useMemo(()=>{if(H?.rows)try{const me=H.rows,Se=oe=>{switch(oe){case We.ImprovementHigh:case We.ImprovementLow:return et.Improvement;case We.ConcernHigh:case We.ConcernLow:return et.Concern;case We.NeitherHigh:case We.NeitherLow:return et.Neither;case We.CommonCause:default:return et.Neither}};return me.map((oe,ye)=>({data:{value:oe.value,ghost:!!oe.ghost},partition:{id:oe.partitionId},limits:{mean:oe.mean,ucl:oe.upperProcessLimit,lcl:oe.lowerProcessLimit,oneSigma:{upper:oe.upperOneSigma,lower:oe.lowerOneSigma},twoSigma:{upper:oe.upperTwoSigma,lower:oe.lowerTwoSigma}},rules:{singlePoint:{up:!!oe.singlePointUp,down:!!oe.singlePointDown},twoOfThree:{up:!!oe.twoSigmaUp,down:!!oe.twoSigmaDown},fourOfFive:{up:!!oe.fourOfFiveUp,down:!!oe.fourOfFiveDown},shift:{up:!!oe.shiftUp,down:!!oe.shiftDown},trend:{up:!!oe.trendUp,down:!!oe.trendDown}},classification:{variation:Se(oe.variationIcon),neutralSpecialCauseValue:oe.variationIcon===We.NeitherHigh||oe.variationIcon===We.NeitherLow?oe.specialCauseImprovementValue??oe.specialCauseConcernValue??1:null,assurance:void 0},target:W[ye]?.target??null}))}catch{return null}try{const me=Gm(u,W,Ge),{chartType:Se,metricImprovement:oe}=Wm(l,c),ye={chartType:Se,metricImprovement:oe,data:W,settings:me},{rows:Ie}=UC(ye),Oe=Pe=>{switch(Pe){case We.ImprovementHigh:case We.ImprovementLow:return et.Improvement;case We.ConcernHigh:case We.ConcernLow:return et.Concern;case We.NeitherHigh:case We.NeitherLow:return et.Neither;case We.CommonCause:default:return et.Neither}};return Ie.map((Pe,Le)=>({data:{value:Pe.value,ghost:!!Pe.ghost},partition:{id:Pe.partitionId},limits:{mean:Pe.mean,ucl:Pe.upperProcessLimit,lcl:Pe.lowerProcessLimit,oneSigma:{upper:Pe.upperOneSigma,lower:Pe.lowerOneSigma},twoSigma:{upper:Pe.upperTwoSigma,lower:Pe.lowerTwoSigma}},rules:{singlePoint:{up:!!Pe.singlePointUp,down:!!Pe.singlePointDown},twoOfThree:{up:!!Pe.twoSigmaUp,down:!!Pe.twoSigmaDown},fourOfFive:{up:!!Pe.fourOfFiveUp,down:!!Pe.fourOfFiveDown},shift:{up:!!Pe.shiftUp,down:!!Pe.shiftDown},trend:{up:!!Pe.trendUp,down:!!Pe.trendDown}},classification:{variation:Oe(Pe.variationIcon),neutralSpecialCauseValue:Pe.variationIcon===We.NeitherHigh||Pe.variationIcon===We.NeitherLow?Pe.specialCauseImprovementValue??Pe.specialCauseConcernValue??1:null,assurance:void 0},target:W[Le]?.target??null}))}catch{return null}},[H?.rows?.length,W,l,c,u,Ge])||null,we=(ge||[]).slice().reverse().find(me=>me.limits.mean!=null),U=we?.limits.mean??null,Z=ne.useMemo(()=>{const me=[];try{const Se=ge,oe=u?.minimumPoints??13,ye=u?.minimumPoints??12;if(Se&&Se.length){const Ie=Se.filter(Pe=>!Pe.data.ghost&&Pe.data.value!=null).length;Ie<oe&&me.push({code:Xo.InsufficientPointsGlobal,severity:Kn.Warning,category:qo.Data,message:"Not enough non-ghost points to compute stable limits/icons.",context:{nonGhostCount:Ie,minimumPoints:oe}});const Oe=new Map;for(const Pe of Se){const Le=Pe.partition.id??0,He=Oe.get(Le)||{size:0,nonGhost:0};He.size+=1,!Pe.data.ghost&&Pe.data.value!=null&&(He.nonGhost+=1),Oe.set(Le,He)}for(const[Pe,Le]of Oe)Le.nonGhost>0&&Le.nonGhost<ye&&me.push({code:Xo.InsufficientPointsPartition,severity:Kn.Warning,category:qo.Partition,message:"A partition/baseline segment has too few points for recommended stability.",context:{partitionId:Pe,nonGhostCount:Le.nonGhost,minimumPointsPartition:ye}})}}catch{}return me},[ge,u?.minimumPoints]),le=ne.useMemo(()=>Z.length?F?Z.filter(me=>!(F.severities&&me.severity&&!F.severities.includes(me.severity)||F.categories&&me.category&&!F.categories.includes(me.category)||F.codes&&!F.codes.includes(me.code))):Z:[],[Z,F]),ie=we?.limits.ucl??null,ce=we?.limits.lcl??null,de=we?.limits.oneSigma.upper??null,xe=we?.limits.oneSigma.lower??null,Me=we?.limits.twoSigma.upper??null,Ae=we?.limits.twoSigma.lower??null,Ye=U!=null&&de!=null?Math.abs(de-U):0,Ze=ne.useMemo(()=>[{id:"process",data:r,color:"#A6A6A6"}],[r]),ct=ne.useMemo(()=>GC(r,{mean:U,ucl:ie,lcl:ce,onePos:de,oneNeg:xe,twoPos:Me,twoNeg:Ae},{alwaysShowZeroY:!!d,alwaysShowHundredY:!!f,percentScale:!!p},i??null),[r,U,ie,ce,de,xe,Me,Ae,i,d,f,p]),ze=ne.useMemo(()=>{const me=Se=>{const oe=Se.filter(Ie=>typeof Ie=="number"&&!isNaN(Ie));if(!oe.length)return null;const ye=oe[0];return oe.every(Ie=>Ie===ye)?ye:null};if(ge&&ge.length){const Se=me(ge.map(oe=>oe.target));if(Se!=null)return Se}return i&&i.length?me(i):null},[ge,i]),{show:pe,slotPx:$e,totalReservedPx:Y}=WC(ct,re,{maxFraction:.35}),ae=pe?Y:0,Ne=ne.useMemo(()=>{const me=r.map(Se=>Se.x);return Rm({values:r.map(Se=>Se.y),dates:me,providedUnit:X||se?.measureUnit,percentHeuristic:"0-1",autoValue:!1,autoDelta:!1,autoMetadata:!1})},[r,X,se?.measureUnit]),ke=X??se?.measureUnit??Ne.unit,Ce=ne.useMemo(()=>ke?{...se||{},measureUnit:ke}:se,[se,ke]),De=ne.useMemo(()=>{if(!ge)return[];const me=[];for(let Se=1;Se<ge.length;Se++)ge[Se].partition.id!==ge[Se-1].partition.id&&me.push(Se);return me},[ge]),Te=ne.useMemo(()=>LC({show:!!D,rowsForUi:ge,minPoints:u?.minimumPoints??13,metricImprovement:c,variant:P,runLength:I}),[D,ge,u?.minimumPoints,c,P,I]);return a.jsxs("div",{className:fe?`fdp-spc-chart-wrapper ${fe}`:"fdp-spc-chart-wrapper",children:[a.jsx(DC,{show:!!D,variationNode:Te,assuranceNode:null}),a.jsx(Zp,{height:re,ariaLabel:V,margin:{bottom:48,left:56,right:16,top:12},children:a.jsx(qp,{series:Ze,yDomain:ct,yBottomGapPx:ae,children:(()=>{const me={data:{series:Ze,engineRows:ge,visualCategories:te,partitionMarkers:v?De:[]},targets:{limits:{mean:U,ucl:ie,lcl:ce,sigma:Ye,onePos:de,oneNeg:xe,twoPos:Me,twoNeg:Ae},uniformTarget:ze},visuals:{showPoints:_e,showZones:ue,highlightOutOfControl:be,gradientSequences:h,sequenceTransition:g,processLineWidth:m,showFocusIndicator:L,enableRules:j,enableNeutralNoJudgement:M,showTrendStartMarkers:b,showFirstFavourableCrossMarkers:_,showTrendBridgeOverlay:N},a11y:{announceFocus:Be,ariaLabel:V,narrationContext:Ce,showSignalsInspector:C,onSignalFocus:x,showTrendGatingExplanation:w},axis:{zeroBreakSlotGapPx:$e},compute:{effectiveUnit:ke,metricImprovement:c}};return a.jsx($C,{...me})})()})}),Fe&&a.jsx("div",{className:"fdp-spc-chart__source","aria-label":"Chart data source",children:typeof Fe=="string"?a.jsxs("small",{children:["Source: ",Fe]}):Fe}),a.jsx(TC,{show:!!k,warnings:le,formatWarningCategory:n,formatWarningCode:e})]})};function ZC(t,e){const{chartType:n=wn.XmR,metricImprovement:r,minimumPoints:i=Mu,enableNeutralNoJudgement:s=!0,includeSignalFallbacks:o=!0}=e,l=t.map(j=>({x:j.x,value:j.value??j.y??null}));let c=null;try{const j=l.filter(b=>typeof b.value=="number").length,v={minimumPoints:i};j>=i&&(v.chartLevelEligibility=!0),c=Gs({chartType:n,metricImprovement:r,data:l,settings:v})}catch{c=null}const u=c?.rows??[];let d=u[u.length-1]??null;for(let j=u.length-1;j>=0;j--){const v=u[j];if(v&&v.value!=null&&!v.ghost){d=v;break}}let f=[];try{f=Ws(u,{metricImprovement:r,enableNeutralNoJudgement:s})}catch{f=[]}const p=Jo(d?.variationIcon),h=d?.variationIcon??null,g=d?.mean??null,m=d?{lower:d?.lowerProcessLimit??null,upper:d?.upperProcessLimit??null}:null,y=d?{upperOne:d?.upperOneSigma??null,upperTwo:d?.upperTwoSigma??null,lowerOne:d?.lowerOneSigma??null,lowerTwo:d?.lowerTwoSigma??null}:null;let w,M;return o&&(w=ju(f),M=Um(f)),{rows:u,visuals:f,latestState:p,lastVariationIcon:h,centerLine:g,controlLimits:m,sigmaBands:y,pointSignals:w,pointNeutralSpecialCause:M}}const qC=Object.freeze(Object.defineProperty({__proto__:null,AssuranceIcon:$r,BaselineSuggestionReason:mm,ChartType:wn,DEFAULT_MIN_POINTS:Mu,Icons:IC,ImprovementDirection:tt,PARITY_V26:Pm,RULE_METADATA:pm,SPCChart:Ym,SPCSpark:Cu,SPCTooltipOverlay:Bm,SparkSize:Tt,SpcEmbeddedIconVariant:fi,SpcVisualCategory:_t,SpcWarningCategory:qo,SpcWarningCode:Xo,SpcWarningSeverity:Kn,VARIATION_COLOR_TOKENS:Gn,VariationIcon:We,buildSpcV26a:Gs,buildSpcV26aWithVisuals:_u,computeSpcPrecomputed:ZC,computeSpcVisualCategories:Ws,extractRuleIds:Ro,getVariationColorHex:oC,getVariationColorToken:ym,isSpecialCauseIcon:$m,mapIconToVariation:Jo,normaliseSpcSettingsV2:Am,ruleGlossary:Yi,variationLabel:Uo,visualsToNeutralFlags:Um,visualsToPointSignals:ju,withParityV26:kC},Symbol.toStringTag,{value:"Module"}));function XC(t){const e=t.replace("#","");return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Vm(t){const{values:e,x:n,chartType:r=wn.XmR,metricImprovement:i=tt.Neither,showLimits:s=!0,showLimitBand:o=!1,showInnerBands:l=!1,showMean:c=!1}=t,u=ne.useMemo(()=>{const b=[];for(let _=0;_<e.length;_++)b.push({x:n?.[_],value:e[_]});return b},[e,n]),d=ne.useMemo(()=>{try{const b=u.map((x,k)=>({x:x.x??k,value:x.value})),_=13,N=b.filter(x=>typeof x.value=="number").length,C={minimumPoints:_};return N>=_&&(C.chartLevelEligibility=!0),Gs({chartType:r,metricImprovement:i,data:b,settings:C})}catch{return null}},[u,r,i]),f=ne.useMemo(()=>{const b=d?.rows;if(!b||b.length===0)return null;for(let _=b.length-1;_>=0;_--){const N=b[_];if(N&&N.value!=null&&!N.ghost)return N}return b[b.length-1]??null},[d]),p=ne.useMemo(()=>{const b=d?.rows;if(!b||b.length===0)return null;let _=b[b.length-1];for(let N=b.length-1;N>=0;N--){const C=b[N];if(C&&C.value!=null&&!C.ghost){_=C;break}}return Jo(_?.variationIcon)},[d]),h=ne.useMemo(()=>f?.mean??null,[f]),g=ne.useMemo(()=>{if(!f)return null;const b=f?.lowerProcessLimit??null,_=f?.upperProcessLimit??null;return b==null&&_==null?null:{lower:b,upper:_}},[f]),m=ne.useMemo(()=>f?{upperOne:f?.upperOneSigma??null,upperTwo:f?.upperTwoSigma??null,lowerOne:f?.lowerOneSigma??null,lowerTwo:f?.lowerTwoSigma??null}:null,[f]),y=ne.useMemo(()=>{const b=d?.rows;if(!(!b||b.length===0))try{return Ws(b,{metricImprovement:i,enableNeutralNoJudgement:!0})}catch{return}},[d,i]),w=ne.useMemo(()=>ju(y),[y?.length]),M=ne.useMemo(()=>{if(!(!y||y.length===0))return y.map(b=>b===_t.NoJudgement)},[y?.length]),j=ne.useMemo(()=>{let b=null;if(f&&f.value!=null&&!f.ghost){const P=f.variationIcon;p===Ve.SpecialCauseNoJudgement?b=$m(P)?Ve.SpecialCauseNoJudgement:Ve.CommonCause:b=Jo(P)??Ve.CommonCause}const _=b??Ve.CommonCause,N=Wo[_].hex,[C,x,k]=XC(N),F=Go();return{"--fdp-metric-card-bg":`linear-gradient(180deg, rgba(${C}, ${x}, ${k}, ${F.start}) 0%, rgba(${C}, ${x}, ${k}, ${F.mid}) 50%, rgba(${C}, ${x}, ${k}, ${F.end}) 100%)`,"--fdp-metric-card-accent":N}},[f,p]);return{sparkProps:ne.useMemo(()=>({data:u,showMean:c,showLimits:s,showLimitBand:o,showInnerBands:l,metricImprovement:i,centerLine:h,controlLimits:g,sigmaBands:m,pointSignals:w,pointNeutralSpecialCause:M,visualCategories:y,variationState:p??void 0}),[u,c,s,o,l,i,p,h,g?.lower,g?.upper,m?.upperTwo,m?.lowerOne,m?.lowerTwo,w?.length,M?.length,y?.length]),metricCardStyle:j,latestState:p}}const JC=({sparkData:t,direction:e=tt.Neither,showMean:n=!1,showLimits:r=!0,showLimitBand:i=!1,showInnerBands:s=!1,maxPoints:o,autoValue:l=!0,autoDelta:c=!0,autoMetadata:u=!0,defaultUnit:d,intervalHint:f,startDate:p,deltaConfig:h,...g})=>{const m=Vm({values:t.map(_=>_.value??null),metricImprovement:e,showLimits:r,showLimitBand:i,showInnerBands:s,showMean:n}),y=a.jsx(Cu,{...m.sparkProps,maxPoints:o}),w=ne.useMemo(()=>Rm({values:t.map(_=>typeof _.value=="number"?_.value:null),dates:t.map(_=>_.date),intervalHint:f,startDate:p,providedUnit:g.unit,defaultUnit:d,autoValue:l,autoDelta:c,autoMetadata:u,deltaConfig:h}),[t,f,p,g.unit,d,l,c,u,h]),M=l&&w.value!=null?w.value:g.value,j=c&&w.delta?w.delta:g.delta,v=w.unit||g.unit,b=u&&w.metadata?w.metadata:g.metadata;return a.jsx(fm,{...g,value:M,unit:v,delta:j,metadata:b,visual:y,style:m.metricCardStyle})};function KC(t){return function(){let e=t+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}}function QC(t="auto"){const[e,n]=A.useState(!1);return A.useEffect(()=>{if(t!=="auto"||typeof window>"u"||!window.matchMedia)return;const r=window.matchMedia("(prefers-reduced-motion: reduce)"),i=()=>n(r.matches);return i(),r.addEventListener?.("change",i),()=>r.removeEventListener?.("change",i)},[t]),t==="off"?!1:e}function Zm(t,e){return e[Math.floor(t()*e.length)]}function zr(t,e,n){return Math.max(e,Math.min(n,t))}function eN(t,e){const n=t.seed??1,r=KC(n),i=Math.max(6,Math.min(48,Math.round(t.density??18))),s=["circle","hexagon","rect"],o=[],l=t.gradients&&t.gradients.length>0?t.gradients:["nhs-fdp-gradient-blue","nhs-fdp-gradient-aqua","nhs-fdp-gradient-green"],u=(typeof t.callout.width=="number"?t.callout.width:void 0)??Math.min(520,e*.7),d=(e-u)/2,f=d+u,p={left:d/e*100,right:f/e*100,top:20,bottom:80},h=(m,y)=>!(m>p.left-6&&m<p.right+6&&y>p.top-10&&y<p.bottom+10);let g=0;for(;o.length<i&&g<i*50;){g++;const m=Zm(r,s),y=zr(r()*1,.15,.95),w=24+r()*72,M=r()*100,j=r()*100;if(!h(M,j))continue;const v=Zm(r,l);if(m==="rect"){const b=.6+r()*.8;o.push({kind:m,width:w*b,height:w,x:M,y:j,depth:y,fillToken:v,shadow:"soft"})}else o.push({kind:m,size:w,x:M,y:j,depth:y,fillToken:v,shadow:"soft"})}return o}const tN=t=>{const{seed:e=1,mode:n="scroll",axis:r="xy",height:i=520,strength:s=120,scrub:o=.3,scrollStart:l="top bottom",scrollEnd:c="bottom top",debugMarkers:u=!1,pin:d=!1,pinSpacing:f=!0,reducedMotion:p="auto",callout:h,className:g,style:m}=t,y=A.useRef(null),[w,M]=A.useState({w:1e3,h:520}),j=QC(p),v=t.direction??"se",b=A.useMemo(()=>{switch(v){case"ne":return{x:1,y:-1};case"nw":return{x:-1,y:-1};case"sw":return{x:-1,y:1};case"se":default:return{x:1,y:1}}},[v]);A.useLayoutEffect(()=>{if(!y.current)return;const P=new ResizeObserver(I=>{for(const L of I){const E=L.contentRect;M({w:E.width,h:E.height})}});return P.observe(y.current),()=>P.disconnect()},[]);const _=A.useMemo(()=>t.shapes&&t.shapes.length?t.shapes:eN(t,w.w),[e,w.w,w.h]),[N,C]=A.useState(0),[x,k]=A.useState(null);A.useEffect(()=>{if(n!=="scroll"||j)return;let P;return(async()=>{if(typeof window>"u")return;const I=y.current;if(I)try{const L=await Promise.resolve().then(()=>Z1),E=await Promise.resolve().then(()=>Ej),z=L.default??L.gsap??L,G=E.ScrollTrigger??E.default??E;z.registerPlugin(G);const ee=G.create({trigger:I,start:l,end:c,markers:u,pin:d,pinSpacing:f,scrub:o,invalidateOnRefresh:!0,onUpdate:T=>C(T.progress)});k(T=>T===null?ee.progress??.5:T),u&&window&&(window.__parallaxRefresh=()=>{try{G.refresh()}catch{}}),P=()=>{try{ee.kill()}catch{}}}catch{const E=()=>{const z=I.getBoundingClientRect(),G=window.innerHeight||document.documentElement.clientHeight,ee=z.height+G,T=G-z.top,K=zr(T/ee,0,1);k(O=>O===null?K:O),C(K)};E(),window.addEventListener("scroll",E,{passive:!0}),window.addEventListener("resize",E),P=()=>{window.removeEventListener("scroll",E),window.removeEventListener("resize",E)}}})(),()=>{P&&P()}},[n,j,l,c,u,d,f,o]),A.useEffect(()=>{if(n!=="timed"||j)return;let P=0,I=performance.now();const L=8e3,E=z=>{const ee=(z-I)%L/L;C(ee),P=requestAnimationFrame(E)};return P=requestAnimationFrame(E),()=>cancelAnimationFrame(P)},[n,j]);const F=P=>.15+(P??.5)*.6,D={position:"absolute",left:"50%",top:"50%",bottom:void 0,right:void 0,transform:"translate(-50%, -50%)",width:typeof h.width=="number"?`${h.width}px`:h.width||"min(520px, 70%)"};return a.jsxs("div",{ref:y,className:["nhs-parallax-scene",g].filter(Boolean).join(" "),style:{position:"relative",height:typeof i=="number"?`${i}px`:i,overflow:"hidden",...m},"aria-hidden":!0,children:[a.jsxs("svg",{className:"nhs-parallax-canvas",width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none","aria-hidden":!0,children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"fdpgradient-blue",x1:"0",x2:"1",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#2E61A5"}),a.jsx("stop",{offset:"100%",stopColor:"#1B3E73"})]}),a.jsxs("linearGradient",{id:"fdpgradient-aqua",x1:"0",x2:"1",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#1DC6D2"}),a.jsx("stop",{offset:"100%",stopColor:"#117E8A"})]}),a.jsxs("linearGradient",{id:"fdpgradient-green",x1:"0",x2:"1",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#2BC06A"}),a.jsx("stop",{offset:"100%",stopColor:"#1A874A"})]}),a.jsxs("linearGradient",{id:"fdpgradient-dark-blue",x1:"0",x2:"1",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#005eb8"}),a.jsx("stop",{offset:"100%",stopColor:"#003087"})]}),a.jsxs("linearGradient",{id:"fdpgradient-light-blue",x1:"0",x2:"1",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#005eb8"}),a.jsx("stop",{offset:"100%",stopColor:"#60b2e2"})]}),a.jsxs("linearGradient",{id:"fdpgradient-purple",x1:"0",x2:"1",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#ac98cb"}),a.jsx("stop",{offset:"100%",stopColor:"#d6cce3"})]}),a.jsxs("linearGradient",{id:"fdpgradient-green-palette",x1:"0",x2:"1",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#007f3b"}),a.jsx("stop",{offset:"100%",stopColor:"#63a691"})]}),a.jsxs("linearGradient",{id:"fdpgradient-grey",x1:"0",x2:"1",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#4c6272"}),a.jsx("stop",{offset:"100%",stopColor:"#768692"})]})]}),a.jsx("g",{className:"nhs-parallax-connectors",children:_.map((P,I)=>{const L=P.x,E=P.y,z=(P.width??P.size??40)/w.w*100*1,G=(P.height??P.size??40)/w.h*100*1,ee=P.kind==="circle"?[[L,E-G/2],[L+z/2,E],[L,E+G/2],[L-z/2,E]]:P.kind==="rect"||P.kind==="svg"?[[L-z/2,E-G/2],[L+z/2,E-G/2],[L+z/2,E+G/2],[L-z/2,E+G/2]]:[[L-z/2,E],[L-z/4,E-G/2],[L+z/4,E-G/2],[L+z/2,E],[L+z/4,E+G/2],[L-z/4,E+G/2]],T=F(P.depth),B=(d?N:N-(x??.5))*s*T,J=r==="x"?B:r==="xy"?B*b.x:0,$=r==="y"?B:r==="xy"?B*b.y:0;return ee.map((R,H)=>a.jsx("line",{x1:zr(R[0]+J,0,100),y1:zr(R[1]+$,0,100),x2:zr(50+J*.2,0,100),y2:zr(50+$*.2,0,100),className:"nhs-parallax-connector"},`c-${I}-${H}`))})}),a.jsx("g",{className:"nhs-parallax-shapes",children:_.map((P,I)=>{const L=F(P.depth),G=(d?N:N-(x??.5))*s*L,ee=r==="x"?G:r==="xy"?G*b.x:0,T=r==="y"?G:r==="xy"?G*b.y:0,K=zr(P.x+ee,0,100),O=zr(P.y+T,0,100),B=P.rotate??0,J=["nhs-parallax-shape",P.fillToken,P.shadow&&`nhs-parallax-shadow--${P.shadow}`].filter(Boolean).join(" ");if(P.kind==="circle"){const q=(P.size??40)/w.w*100*.5;return a.jsx("circle",{cx:K,cy:O,r:q,className:J},I)}if(P.kind==="rect"){const q=(P.width??48)/w.w*100,V=(P.height??36)/w.h*100;return a.jsx("rect",{x:K-q/2,y:O-V/2,width:q,height:V,transform:`rotate(${B} ${K} ${O})`,className:J},I)}if(P.kind==="svg"&&P.src){const q=(P.width??48)/w.w*100,V=(P.height??48)/w.h*100;return a.jsx("image",{href:P.src,x:K-q/2,y:O-V/2,width:q,height:V,preserveAspectRatio:"xMidYMid meet",transform:`rotate(${B} ${K} ${O})`,className:J},I)}const $=(P.size??40)/w.w*100,R=$*.866,H=[[K-$/2,O],[K-$/4,O-R/2],[K+$/4,O-R/2],[K+$/2,O],[K+$/4,O+R/2],[K-$/4,O+R/2]].map(q=>q.join(",")).join(" ");return a.jsx("polygon",{points:H,className:J},I)})})]}),a.jsx("div",{className:"nhs-parallax-callout",style:D,"aria-hidden":!1,children:a.jsxs("div",{className:["nhs-parallax-callout-inner",h.backgroundToken].filter(Boolean).join(" "),children:[" ",h.content," "]})})]})};function nN(t){return function(){let e=t+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}}function Dt(t,e,n){return Math.max(e,Math.min(n,t))}function rN(t,e,n,r,i,s,o,l,c,u,d,f){const p=nN(t),h=[],g=[],m=["rect","hex","circle"],y={x:50,y:50},w=r,M=1200,j=400,v=1.2,b={left:y.x-w.w/2,right:y.x+w.w/2,top:y.y-w.h/2,bottom:y.y+w.h/2},_=!c&&!!d&&d.r>0,N=!c&&!!f&&(f.rx>0||f.ry>0),C=(E,z)=>{if(!_)return!1;const G=E-y.x,ee=z-y.y;return G*G+ee*ee<=d.r*d.r},x=(E,z)=>{if(!N)return!1;const G=Math.max(1e-6,f.rx||0),ee=Math.max(1e-6,f.ry||0),T=(E-y.x)/G,K=(z-y.y)/ee;return T*T+K*K<=1},k=(E,z)=>!(E.right<z.left||E.left>z.right||E.bottom<z.top||E.top>z.bottom),F=E=>E.left>=0&&E.top>=0&&E.right<=100&&E.bottom<=100,D=(E,z,G,ee,T,K)=>{let O=0,B=0;if(E==="rect"){const J=ee??48,$=T??36;O=J/M*100,B=$/j*100}else if(E==="circle"){const J=K??40;O=J/M*100,B=J/j*100}else{const J=K??40;O=J/M*100,B=J*s/j*100}return{left:z-O/2-v,right:z+O/2+v,top:G-B/2-v,bottom:G+B/2+v}};let P=0;const I=Dt(Math.round(e),4,48);let L=null;if(u){const E=Math.ceil(Math.sqrt(I)),z=Math.ceil(I/E);L=[];for(let G=0;G<z;G++)for(let ee=0;ee<E&&!(L.length>=I);ee++){const T=(ee+.5)/E*100,K=(G+.5)/z*100;L.push({x:T,y:K})}}for(;h.length<I&&P<I*120;){P++;const E=m[Math.floor(p()*m.length)];let z,G;if(u&&L&&L.length){const O=h.length%L.length;z=L[O].x,G=L[O].y}else{const O=Dt(i??0,0,1),B=()=>p()*100,J=()=>{const R=Math.max(p(),1e-6),H=Math.max(p(),1e-6),q=Math.sqrt(-2*Math.log(R)),V=2*Math.PI*H;return 50+q*Math.cos(V)*12.5},$=(R,H,q)=>R*(1-q)+H*q;z=Dt($(B(),J(),O),0,100),G=Dt($(B(),J(),O),0,100)}const ee=D(E,z,G,32,24,28);if(!F(ee))continue;const T=Dt(p(),.15,.95),K=0;if(E==="rect"){const O=40+p()*80,B=28+p()*64,J=D(E,z,G,O,B);if(!c&&(k(J,b)||C(z,G)||x(z,G)))continue;if(!o){let R=!1;for(let H=0;H<g.length;H++)if(k(J,g[H])){R=!0;break}if(R)continue}let $;if(o){const R=new Set;for(let q=0;q<g.length;q++)if(k(J,g[q])){const V=h[q].fill;V&&R.add(V)}const H=n.filter(q=>!R.has(q));if(H.length===0){if(l==="skip")continue;$=n[Math.floor(p()*n.length)]}else $=H[Math.floor(p()*H.length)]}else $=n[Math.floor(p()*n.length)];g.push(J),h.push({kind:E,x:z,y:G,width:O,height:B,rotate:K,depth:T,fill:$,shadow:"soft"})}else if(E==="circle"){const O=24+p()*80,B=D(E,z,G,void 0,void 0,O);if(!c&&(k(B,b)||C(z,G)||x(z,G)))continue;if(!o){let $=!1;for(let R=0;R<g.length;R++)if(k(B,g[R])){$=!0;break}if($)continue}let J;if(o){const $=new Set;for(let H=0;H<g.length;H++)if(k(B,g[H])){const q=h[H].fill;q&&$.add(q)}const R=n.filter(H=>!$.has(H));if(R.length===0){if(l==="skip")continue;J=n[Math.floor(p()*n.length)]}else J=R[Math.floor(p()*R.length)]}else J=n[Math.floor(p()*n.length)];g.push(B),h.push({kind:E,x:z,y:G,size:O,rotate:K,depth:T,fill:J,shadow:"soft"})}else{const O=28+p()*72,B=D(E,z,G,void 0,void 0,O);if(!c&&(k(B,b)||C(z,G)||x(z,G)))continue;if(!o){let $=!1;for(let R=0;R<g.length;R++)if(k(B,g[R])){$=!0;break}if($)continue}let J;if(o){const $=new Set;for(let H=0;H<g.length;H++)if(k(B,g[H])){const q=h[H].fill;q&&$.add(q)}const R=n.filter(H=>!$.has(H));if(R.length===0){if(l==="skip")continue;J=n[Math.floor(p()*n.length)]}else J=R[Math.floor(p()*R.length)]}else J=n[Math.floor(p()*n.length)];g.push(B),h.push({kind:E,x:z,y:G,size:O,rotate:K,depth:T,fill:J,shadow:"soft"})}}return h}const iN=({seed:t=1,width:e="100%",height:n=400,density:r=16,centrality:i=0,gradients:s=["pb-grad-aqua-green","pb-grad-purple","pb-grad-blue","pb-grad-grey","pb-grad-azure"],shapes:o,neighbors:l=1,connectorColor:c,connectorWidth:u,connectorDasharray:d,hexAspectRatio:f=Math.sqrt(3)/2,allowOverlaps:p=!1,overlapColorPolicy:h="recolor",feature:g,featureWidth:m="min(640px, 80%)",featureLayer:y="over",excludeBoxPct:w={w:50,h:36},excludeCirclePct:M,excludeEllipsePct:j,uniformDistribution:v=!1,className:b,style:_})=>{const N=A.useRef(null),[C,x]=A.useState({w:1200,h:400});A.useLayoutEffect(()=>{if(!N.current)return;const L=new ResizeObserver(E=>{for(const z of E){const G=z.contentRect;x({w:G.width,h:G.height})}});return L.observe(N.current),()=>L.disconnect()},[]);const k=A.useMemo(()=>o?.length?o:rN(t,r,s,w,i,f,p,h,y==="over"||v,v,M,j),[t,r,s.join(","),w.w,w.h,i,f,p,h,y,v,M?.r,j?.rx,j?.ry,o]),F=100,D=100,P=Math.sqrt(3)/2,I=(L,E,z)=>{const G=(z??40)/2,ee=L/100*C.w,T=E/100*C.h,K=f/P;return[Math.PI,2*Math.PI/3,Math.PI/3,0,-Math.PI/3,-(2*Math.PI)/3].map(B=>{const J=ee+G*Math.cos(B),$=T+G*Math.sin(B)*K;return[Dt(J/C.w*100,0,100),Dt($/C.h*100,0,100)]})};return a.jsxs("div",{ref:N,className:["nhs-pattern-banner",y==="under"?"nhs-pattern-banner--feature-under":"nhs-pattern-banner--feature-over",b].filter(Boolean).join(" "),style:{width:typeof e=="number"?`${e}px`:e,height:typeof n=="number"?`${n}px`:n,..._},"aria-hidden":!0,children:[a.jsxs("svg",{className:"nhs-pattern-banner__svg",viewBox:`0 0 ${F} ${D}`,preserveAspectRatio:"none","aria-hidden":!0,children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"pb-grad-aqua-green",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[a.jsx("stop",{offset:"0",stopColor:"rgb(0, 163, 151)"}),a.jsx("stop",{offset:"1",stopColor:"rgb(11, 148, 71)"})]}),a.jsxs("linearGradient",{id:"pb-grad-purple",x1:"0",y1:"0",x2:"1",y2:"0",gradientUnits:"objectBoundingBox",children:[a.jsx("stop",{offset:"0",stopColor:"rgb(214, 203, 226)"}),a.jsx("stop",{offset:"0.72",stopColor:"rgb(192, 177, 213)"}),a.jsx("stop",{offset:"1",stopColor:"rgb(171, 151, 199)"})]}),a.jsxs("linearGradient",{id:"pb-grad-blue",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[a.jsx("stop",{offset:"0",stopColor:"rgb(38, 58, 127)"}),a.jsx("stop",{offset:"1",stopColor:"rgb(34, 94, 171)"})]}),a.jsxs("linearGradient",{id:"pb-grad-grey",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[a.jsx("stop",{offset:"0",stopColor:"rgb(66, 85, 101)"}),a.jsx("stop",{offset:"1",stopColor:"rgb(112, 132, 147)"})]}),a.jsxs("linearGradient",{id:"pb-grad-azure",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[a.jsx("stop",{offset:"0",stopColor:"rgb(96, 178, 226)"}),a.jsx("stop",{offset:"0.51",stopColor:"rgb(34, 94, 172)"})]})]}),a.jsx("g",{children:(()=>{const L=O=>O/C.w*100,E=O=>O/C.h*100,z=k.map(O=>{const B=Dt(O.x,0,100),J=Dt(O.y,0,100);if(O.kind==="circle")return[[B,J]];if(O.kind==="rect"){const $=L(O.width??48),R=E(O.height??36);return[[B-$/2,J-R/2],[B+$/2,J-R/2],[B+$/2,J+R/2],[B-$/2,J+R/2]]}if(O.kind==="svg"){const $=L(O.width??48),R=E(O.height??48);return[[B-$/2,J-R/2],[B+$/2,J-R/2],[B+$/2,J+R/2],[B-$/2,J+R/2]]}return I(B,J,O.size??40)}),G=Math.max(1,Math.floor(l??1)),ee=new Set,T=[];for(let O=0;O<k.length;O++){const B=[];for(let $=0;$<k.length;$++){if(O===$)continue;const R=k[O].x-k[$].x,H=k[O].y-k[$].y;B.push({j:$,d2:R*R+H*H})}B.sort(($,R)=>$.d2-R.d2);const J=Math.min(G,B.length);for(let $=0;$<J;$++){const R=B[$].j,H=Math.min(O,R),q=Math.max(O,R),V=`${H}-${q}`;ee.has(V)||(ee.add(V),T.push([H,q]))}}const K=[];for(const[O,B]of T){const J=z[O],$=z[B];let R=null;for(const H of J)for(const q of $){const V=H[0]-q[0],re=H[1]-q[1],fe=V*V+re*re;(!R||fe<R.d2)&&(R={p:H,q,d2:fe})}R&&K.push(a.jsx("line",{x1:Dt(R.p[0],0,100),y1:Dt(R.p[1],0,100),x2:Dt(R.q[0],0,100),y2:Dt(R.q[1],0,100),className:"nhs-pattern-banner-connector",style:{stroke:c,strokeWidth:u,strokeDasharray:d}},`nn-line-${O}-${B}`))}return K})()}),a.jsx("g",{children:k.map((L,E)=>{const z=["nhs-pattern-banner-shape",L.fill].filter(Boolean).join(" ");if(L.kind==="circle"){const O=(L.size??40)/C.w*100*.5,B=C.w/C.h,J=O*B;return a.jsx("ellipse",{cx:Dt(L.x,0,100),cy:Dt(L.y,0,100),rx:O,ry:J,className:z},E)}if(L.kind==="rect"){const O=(L.width??48)/C.w*100,B=(L.height??36)/C.h*100,J=Dt(L.x-O/2,0,100),$=Dt(L.y-B/2,0,100);return a.jsx("rect",{x:J,y:$,width:O,height:B,className:z},E)}if(L.kind==="svg"&&L.src){const O=(L.width??48)/C.w*100,B=(L.height??48)/C.h*100,J=Dt(L.x-O/2,0,100),$=Dt(L.y-B/2,0,100);return a.jsx("image",{href:L.src,x:J,y:$,width:O,height:B,preserveAspectRatio:"xMidYMid meet",className:z},E)}const G=Dt(L.x,0,100),ee=Dt(L.y,0,100),K=I(G,ee,L.size??40).map(O=>O.join(",")).join(" ");return a.jsx("polygon",{points:K,className:z},E)})})]}),a.jsx("div",{className:"nhs-pattern-banner__feature",style:{width:typeof m=="number"?`${m}px`:m},children:g})]})};var qm=(t=>(t.Photo="photo",t.Graphic="graphic",t))(qm||{}),Ji=(t=>(t.Vertical="vertical",t.Horizontal="horizontal",t.Portrait="portrait",t.Landscape="landscape",t))(Ji||{}),hi=(t=>(t.AquaGreen="aqua-green",t.Purple="purple",t.Blue="blue",t.Grey="grey",t.Azure="azure",t))(hi||{}),pn=(t=>(t.Rect="rect",t.Hex="hex",t.Circle="circle",t))(pn||{}),Ki=(t=>(t.None="none",t.Soft="soft",t.Strong="strong",t))(Ki||{}),Xm=(t=>(t.Primary="primary",t.Secondary="secondary",t.Tertiary="tertiary",t))(Xm||{});function sN(t){return function(){let e=t+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}}const Zs=[hi.AquaGreen,hi.Purple,hi.Blue,hi.Grey,hi.Azure];function Du(t,e,n){return Math.max(e,Math.min(n,t))}function aN(t,e,n=4){const r=sN(t),i=[],s=[pn.Rect,pn.Hex,pn.Circle],o=Zs.indexOf(e),l=[e,Zs[(o+2)%Zs.length],Zs[(o+3)%Zs.length]],c=[],u=1200,d=400,f=1.2,p=(w,M)=>!(w.right<M.left||w.left>M.right||w.bottom<M.top||w.top>M.bottom),h=w=>w.left>=0&&w.top>=0&&w.right<=100&&w.bottom<=100,g=(w,M,j,v,b,_)=>{let N=0,C=0;if(w===pn.Rect){const x=v??48,k=b??36;N=x/u*100,C=k/d*100}else if(w===pn.Circle){const x=_??40;N=x/u*100,C=x/d*100}else{const x=_??40;N=x/u*100,C=x*(Math.sqrt(3)/2)/d*100}return{left:M-N/2-f,right:M+N/2+f,top:j-C/2-f,bottom:j+C/2+f}};let m=0;const y=Du(Math.round(n),4,12);for(;i.length<y&&m<y*120;){m++;const w=s[Math.floor(r()*s.length)],M=Du(20+r()*60,10,90),j=Du(20+r()*60,10,90),v=l[Math.floor(r()*l.length)],b=i.length<2?Ki.Soft:Ki.None;if(w===pn.Rect){const _=40+r()*80,N=28+r()*64,C=g(w,M,j,_,N);if(!h(C))continue;let x=!1;for(let k=0;k<c.length;k++)if(p(C,c[k])){x=!0;break}if(x)continue;c.push(C),i.push({kind:w,x:M,y:j,width:_,height:N,gradient:v,rotate:0,shadow:b})}else if(w===pn.Circle){const _=24+r()*80,N=g(w,M,j,void 0,void 0,_);if(!h(N))continue;let C=!1;for(let x=0;x<c.length;x++)if(p(N,c[x])){C=!0;break}if(C)continue;c.push(N),i.push({kind:w,x:M,y:j,size:_,gradient:v,rotate:0,shadow:b})}else{const _=28+r()*72,N=r()*360,C=g(w,M,j,void 0,void 0,_);if(!h(C))continue;let x=!1;for(let k=0;k<c.length;k++)if(p(C,c[k])){x=!0;break}if(x)continue;c.push(C),i.push({kind:w,x:M,y:j,size:_,gradient:v,rotate:N,shadow:b})}}return i}const oN=({shapes:t,aspectRatio:e})=>{const r=600*e,i=600,s=l=>l.toFixed(2),o=(l,c,u)=>{const d=u/2;return[0,60,120,180,240,300].map(p=>{const h=p*Math.PI/180,g=l+d*Math.cos(h),m=c+d*Math.sin(h);return`${s(g)},${s(m)}`}).join(" ")};return a.jsxs("svg",{className:"nhs-product-card__graphic",viewBox:`0 0 ${r} ${i}`,preserveAspectRatio:"xMidYMid slice","aria-hidden":"true",children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"pc-grad-aqua-green",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[a.jsx("stop",{offset:"0",stopColor:"rgb(0, 163, 151)"}),a.jsx("stop",{offset:"1",stopColor:"rgb(11, 148, 71)"})]}),a.jsxs("linearGradient",{id:"pc-grad-purple",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[a.jsx("stop",{offset:"0",stopColor:"rgb(176, 161, 201)"}),a.jsx("stop",{offset:"1",stopColor:"rgb(198, 189, 216)"})]}),a.jsxs("linearGradient",{id:"pc-grad-blue",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[a.jsx("stop",{offset:"0",stopColor:"rgb(0, 94, 184)"}),a.jsx("stop",{offset:"1",stopColor:"rgb(65, 131, 196)"})]}),a.jsxs("linearGradient",{id:"pc-grad-grey",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[a.jsx("stop",{offset:"0",stopColor:"rgb(76, 98, 114)"}),a.jsx("stop",{offset:"1",stopColor:"rgb(174, 184, 192)"})]}),a.jsxs("linearGradient",{id:"pc-grad-azure",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[a.jsx("stop",{offset:"0",stopColor:"rgb(0, 122, 204)"}),a.jsx("stop",{offset:"1",stopColor:"rgb(103, 192, 229)"})]}),a.jsxs("filter",{id:"pc-shadow-soft",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[a.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2"}),a.jsx("feOffset",{dx:"0",dy:"2",result:"offsetblur"}),a.jsx("feComponentTransfer",{children:a.jsx("feFuncA",{type:"linear",slope:"0.2"})}),a.jsxs("feMerge",{children:[a.jsx("feMergeNode",{}),a.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),a.jsxs("filter",{id:"pc-shadow-strong",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[a.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"4"}),a.jsx("feOffset",{dx:"0",dy:"4",result:"offsetblur"}),a.jsx("feComponentTransfer",{children:a.jsx("feFuncA",{type:"linear",slope:"0.3"})}),a.jsxs("feMerge",{children:[a.jsx("feMergeNode",{}),a.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),a.jsx("g",{style:{mixBlendMode:"multiply"},children:(()=>{if(t.length<2)return null;const l=t.map(f=>{const p=f.x/100*r,h=f.y/100*i;if(f.kind===pn.Circle){const g=(f.size??40)/2;return[0,45,90,135,180,225,270,315].map(y=>{const w=y*Math.PI/180;return[p+g*Math.cos(w),h+g*Math.sin(w)]})}else if(f.kind===pn.Rect){const g=f.width??60,m=f.height??40;return[[p-g/2,h-m/2],[p+g/2,h-m/2],[p+g/2,h+m/2],[p-g/2,h+m/2]]}else{const m=(f.size??40)/2;return[0,60,120,180,240,300].map(w=>{const M=w*Math.PI/180;return[p+m*Math.cos(M),h+m*Math.sin(M)]})}}),c=1,u=new Set,d=[];for(let f=0;f<t.length;f++){const p=[];for(let g=0;g<t.length;g++){if(f===g)continue;const m=t[f].x-t[g].x,y=t[f].y-t[g].y;p.push({j:g,d2:m*m+y*y})}p.sort((g,m)=>g.d2-m.d2);const h=Math.min(c,p.length);for(let g=0;g<h;g++){const m=p[g].j,y=Math.min(f,m),w=Math.max(f,m),M=`${y}-${w}`;u.has(M)||(u.add(M),d.push([y,w]))}}return d.map(([f,p])=>{const h=l[f],g=l[p];let m=null;for(const y of h)for(const w of g){const M=y[0]-w[0],j=y[1]-w[1],v=M*M+j*j;(!m||v<m.d2)&&(m={p:y,q:w,d2:v})}return m?a.jsx("line",{x1:s(m.p[0]),y1:s(m.p[1]),x2:s(m.q[0]),y2:s(m.q[1]),stroke:"rgb(158, 171, 181)",strokeWidth:s(.5),strokeMiterlimit:s(.5)},`connector-${f}-${p}`):null})})()}),t.map((l,c)=>{const u=`pc-grad-${l.gradient}`,d=l.shadow===Ki.Soft?"url(#pc-shadow-soft)":l.shadow===Ki.Strong?"url(#pc-shadow-strong)":void 0,f=l.x/100*r,p=l.y/100*i,h=s(f),g=s(p);if(l.kind===pn.Rect){const m=l.width||60,y=l.height||40;return a.jsx("rect",{className:u,x:s(f-m/2),y:s(p-y/2),width:s(m),height:s(y),transform:`rotate(${l.rotate||0} ${h} ${g})`,filter:d},c)}else if(l.kind===pn.Circle){const m=(l.size||40)/2;return a.jsx("circle",{className:u,cx:h,cy:g,r:s(m),filter:d},c)}else if(l.kind===pn.Hex){const m=l.size||40;return a.jsx("polygon",{className:u,points:o(f,p,m),transform:`rotate(${l.rotate||0} ${h} ${g})`,filter:d},c)}return null})]})},lN=({title:t,description:e,image:n,layout:r=Ji.Vertical,buttons:i=[],badge:s,theme:o="blue",className:l,style:c,onClick:u,href:d,headingLevel:f=3,footer:p,elevated:h=!0,imageAspectRatio:g=1.5})=>{const m=A.useMemo(()=>r===Ji.Landscape?"horizontal":r===Ji.Portrait?"vertical":r===Ji.Horizontal?"horizontal":"vertical",[r]),y=A.useMemo(()=>{if(n?.type==="graphic"){if(n.shapes)return n.shapes;const _=n.seed??0,N=n.theme??o;return aN(_,N)}return[]},[n,o]),w=["nhs-product-card",`nhs-product-card--${m}`,`nhs-product-card--theme-${o}`,h&&"nhs-product-card--elevated",(u||d)&&"nhs-product-card--clickable",l].filter(Boolean).join(" "),M=_=>{u?u(_):d&&!_.defaultPrevented&&(window.location.href=d)},j=_=>{(u||d)&&(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),u?u(_):d&&(window.location.href=d))},v=()=>{if(!n)return null;const _=["nhs-product-card__image",n.type==="graphic"&&"nhs-product-card__image--graphic"].filter(Boolean).join(" ");return a.jsx("div",{className:_,style:{aspectRatio:g.toString()},children:n.type==="photo"&&n.src?a.jsx("img",{src:n.src,alt:n.alt||""}):n.type==="graphic"?a.jsx(oN,{shapes:y,aspectRatio:g}):null})},b=()=>i.length?a.jsx("div",{className:"nhs-product-card__actions",children:i.map((_,N)=>{const C=["nhs-product-card__button",`nhs-product-card__button--${_.variant||"primary"}`,_.disabled&&"nhs-product-card__button--disabled"].filter(Boolean).join(" ");return _.href?a.jsx("a",{href:_.href,className:C,"aria-label":_.ariaLabel,onClick:x=>{if(_.disabled){x.preventDefault();return}_.onClick&&(x.stopPropagation(),_.onClick(x))},children:_.label},N):a.jsx("button",{type:"button",className:C,disabled:_.disabled,"aria-label":_.ariaLabel,onClick:x=>{_.onClick&&(x.stopPropagation(),_.onClick(x))},children:_.label},N)})}):null;return a.jsxs("div",{className:w,style:c,onClick:u||d?M:void 0,onKeyDown:u||d?j:void 0,role:u||d?"button":void 0,tabIndex:u||d?0:void 0,children:[s&&a.jsx("div",{className:"nhs-product-card__badge",children:s}),v(),a.jsxs("div",{className:"nhs-product-card__content",children:[a.jsx(Un,{level:f,className:"nhs-product-card__title",children:t}),a.jsx("p",{className:"nhs-product-card__description",children:e}),b(),p&&a.jsx("div",{className:"nhs-product-card__footer",children:p})]})]})},Jm="150ms",Km="300ms",Qm="500ms",eg="cubic-bezier(0.4, 0, 1, 1)",tg="cubic-bezier(0, 0, 0.2, 1)",ng="cubic-bezier(0.4, 0, 0.2, 1)",rg="cubic-bezier(0.68, -0.55, 0.265, 1.55)",ig="background-color 300ms cubic-bezier(0, 0, 0.2, 1)",sg="box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",ag="border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",og="border-color 300ms cubic-bezier(0, 0, 0.2, 1)",lg="1px",cg="2px",ug="4px",dg="4px",fg="4px",hg="2px",pg="1px",mg="0px",gg="4px",yg="8px",bg="12px",Iu="#d8dde0",Lu="#4c6272",Au="#d8dde0",Eu="#aeb7bd",Pu="#d5281b",Fu="#005eb8",$u="#ffffff",Bu="#212b32",zu="#007f3b",Ou="#330072",Hu="#7c2855",Ru="#d5281b",Uu="#ffeb3b",Wu="#fff9c4",Gu="#ffb81c",Yu="#ed8b00",Vu="#00a499",Zu="#ae2573",qu="#4c6272",Xu="#768692",Ju="#aeb7bd",Ku="#d8dde0",Qu="#f0f4f5",xg="#212b32",vg="#4c6272",_g="#ffffff",wg="#212b32",Sg="#005eb8",kg="#7c2855",Cg="#003087",Ng="#330072",Mg="#ffeb3b",jg="#212b32",Tg="#d8dde0",Dg="#ffffff33",Ig="#d5281b",Lg="#4c6272",Ag="#ffffff",Eg="#007f3b",Pg="#ffffff",Fg="#006530",$g="#004021",Bg="#004021",zg="#00000000",Og="#ffffff",Hg="#005eb8",Rg="#005eb8",Ug="#d9e5f2",Wg="#c7daf0",Gg="#005eb8",Yg="#ffffff",Vg="#212b32",Zg="#d9dde0",qg="#b3bcc2",Xg="#b3bcc2",Jg="#d5281b",Kg="#aa2016",Qg="#6a140e",e0="#6a140e",t0="#005eb8",n0="#004b93",r0="#002f5c",i0="#002f5c",s0="8px",a0="16px",o0="12px",l0="16px",c0="4px",u0="40px",d0="4px",f0="40px",h0="12px",p0="16px",m0="32px",g0="16px",y0="20px",b0="28px",x0="9px",v0="2px",_0="16px",w0="24px",S0="8px",k0="24px",C0="16px",N0="4px",M0="4px",j0="4px",T0="8px",D0="4px",I0="16px",L0="#007f3b",A0="#006530",E0="#004021",P0="#d8dde0",F0="#ffffff",$0="#768692",B0="#00000000",z0="#ffeb3b",O0="#00000000",H0="#ffffff",R0="#d9e5f2",U0="#c7daf0",W0="#005eb8",G0="#005eb8",ed="8px",td="16px",nd="12px",rd="16px",Y0="2px",V0="4px",Z0="4px",q0="600",X0="#ffffff",J0="#d8dde0",K0="#aeb7bd",Q0="#f0f4f5",ey="#212b32",ty="#212b32",ny="#005eb8",id="16px",sd="32px",ad="16px",ry="1px",iy="4px",sy="none",ay="0 2px 4px rgba(0, 0, 0, 0.1)",oy="#ffffff",ly="#ffffff",cy="#d8dde0",uy="#ffffff",dy="#4c6272",fy="#ffeb3b",hy="#d5281b",py="#aeb7bd",my="#212b32",gy="#4c6272",yy="#768692",by="#212b32",xy="#ffffff",vy="600",_y="#d5281b",wy="600",Sy="#4c6272",od="4px",ld="40px",cd="40px",ud="12px",ky="2px",Cy="4px",Ny="0px",My="16px",jy="18px",Ty="24px",Dy="32px",Iy="34px",Ly="32px",Ay="40px",Ey="48px",Py="5.4ex",Fy="7.2ex",$y="9ex",By="10.8ex",zy="20ex",Oy="38ex",Hy="56ex",Ry="44px",Uy="40px",Wy="1020px",Gy="100%",Yy="50%",Vy="33.333%",Zy="25%",qy="20%",Xy="320px",Jy="641px",Ky="1025px",Qy="1280px",eb="960px",tb="32px",nb="16px",rb="#d5281b",ib="#d5281b",sb="#ffffff",ab="#007f3b",ob="#007f3b",lb="#ffffff",cb="#ffeb3b",ub="#ffeb3b",db="#212b32",fb="#005eb8",hb="#005eb8",pb="#ffffff",mb="#d8dde0",gb="#aeb7bd",yb="#768692",bb="0 4px 0 #004021",xb="0 4px 0 #005eb8",vb="0 4px 0 #6a140e",_b="0 4px 0 #ffeb3b",wb="none",Sb="0 2px 4px rgba(0, 0, 0, 0.1)",kb="4px",Cb="0px",Nb="solid",Mb="0 0 0 3px #ffeb3b",jb="0 0 0 3px #ffeb3b",Tb="none",Db="0 1px 3px rgba(0, 0, 0, 0.12)",Ib="0 2px 6px rgba(0, 0, 0, 0.16)",Lb="0 4px 12px rgba(0, 0, 0, 0.20)",dd="0",fd="4px",hd="8px",pd="16px",md="24px",gd="32px",yd="40px",bd="48px",xd="56px",vd="64px",Ko="0",Qo="0",el="4px",tl="4px",nl="8px",rl="8px",il="8px",sl="16px",al="16px",ol="24px",ll="24px",cl="32px",ul="32px",dl="40px",fl="40px",hl="48px",pl="48px",ml="56px",gl="56px",yl="64px",qs="Frutiger W01",Xs="Arial, Helvetica, sans-serif",Js="sans-serif",Ks="400",Qs="600",ea="400",ta="12px",na="14px",ra="12pt",ia="14px",sa="16px",aa="12pt",oa="16px",la="19px",ca="13pt",ua="19px",da="22px",fa="15pt",ha="22px",pa="26px",ma="17pt",ga="27px",ya="36px",ba="20pt",xa="33px",va="48px",_a="24pt",bl="16px",xl="24px",Qn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},er={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},tr={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},nr={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},rr={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ir={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},sr={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},ar={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},or={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},lr={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},cN=Object.freeze(Object.defineProperty({__proto__:null,AnimationDurationFast:Jm,AnimationDurationNormal:Km,AnimationDurationSlow:Qm,AnimationEasingBounce:rg,AnimationEasingEaseIn:eg,AnimationEasingEaseInOut:ng,AnimationEasingEaseOut:tg,BorderColorCard:Au,BorderColorCardHover:Eu,BorderColorDefault:Iu,BorderColorError:Pu,BorderColorForm:Lu,BorderRadiusLarge:bg,BorderRadiusMedium:yg,BorderRadiusNone:mg,BorderRadiusSmall:gg,BorderWidthCardBottom:dg,BorderWidthDefault:lg,BorderWidthFormElement:cg,BorderWidthFormElementError:ug,BorderWidthPanel:fg,BorderWidthTableCell:pg,BorderWidthTableHeader:hg,BreakpointDesktop:Ky,BreakpointLargeDesktop:Qy,BreakpointMobile:Xy,BreakpointTablet:Jy,ButtonBorderRadius:V0,ButtonBorderWidth:Y0,ButtonPrimaryBackgroundActive:E0,ButtonPrimaryBackgroundDefault:L0,ButtonPrimaryBackgroundDisabled:P0,ButtonPrimaryBackgroundHover:A0,ButtonPrimaryBorderDefault:B0,ButtonPrimaryBorderFocus:z0,ButtonPrimaryTextDefault:F0,ButtonPrimaryTextDisabled:$0,ButtonSecondaryBackgroundActive:U0,ButtonSecondaryBackgroundDefault:O0,ButtonSecondaryBackgroundHover:R0,ButtonSecondaryBackgroundSolid:H0,ButtonSecondaryBorderDefault:G0,ButtonSecondaryTextDefault:W0,ButtonShadowSize:Z0,ButtonSpacingPaddingHorizontalDesktop:rd,ButtonSpacingPaddingHorizontalMobile:td,ButtonSpacingPaddingVerticalDesktop:nd,ButtonSpacingPaddingVerticalMobile:ed,ButtonTypographyWeight:q0,CardBackgroundDefault:X0,CardBorderBottom:Q0,CardBorderDefault:J0,CardBorderHover:K0,CardBorderWidthBottom:iy,CardBorderWidthDefault:ry,CardShadowDefault:sy,CardShadowHover:ay,CardSpacingHeadingMargin:ad,CardSpacingPaddingDesktop:sd,CardSpacingPaddingMobile:id,CardTextDescription:ty,CardTextHeading:ey,CardTextLink:ny,ColorBorderDefault:Tg,ColorBorderSecondary:Dg,ColorButtonLoginActive:r0,ColorButtonLoginBackground:t0,ColorButtonLoginHover:n0,ColorButtonLoginShadow:i0,ColorButtonPrimaryActive:$g,ColorButtonPrimaryBackground:Eg,ColorButtonPrimaryHover:Fg,ColorButtonPrimaryShadow:Bg,ColorButtonPrimaryText:Pg,ColorButtonReverseActive:qg,ColorButtonReverseBackground:Yg,ColorButtonReverseHover:Zg,ColorButtonReverseShadow:Xg,ColorButtonReverseText:Vg,ColorButtonSecondaryActive:Wg,ColorButtonSecondaryBackground:zg,ColorButtonSecondaryBackgroundSolid:Og,ColorButtonSecondaryBorder:Hg,ColorButtonSecondaryHover:Ug,ColorButtonSecondaryShadow:Gg,ColorButtonSecondaryText:Rg,ColorButtonWarningActive:Qg,ColorButtonWarningBackground:Jg,ColorButtonWarningHover:Kg,ColorButtonWarningShadow:e0,ColorError:Ig,ColorFocusBackground:Mg,ColorFocusText:jg,ColorFormBackground:Ag,ColorFormBorder:Lg,ColorGrey1:qu,ColorGrey2:Xu,ColorGrey3:Ju,ColorGrey4:Ku,ColorGrey5:Qu,ColorLinkActive:Cg,ColorLinkDefault:Sg,ColorLinkHover:kg,ColorLinkVisited:Ng,ColorPrimaryBlack:Bu,ColorPrimaryBlue:Fu,ColorPrimaryDarkPink:Hu,ColorPrimaryGreen:zu,ColorPrimaryPurple:Ou,ColorPrimaryRed:Ru,ColorPrimaryWhite:$u,ColorPrimaryYellow:Uu,ColorSecondaryAquaGreen:Vu,ColorSecondaryOrange:Yu,ColorSecondaryPaleYellow:Wu,ColorSecondaryPink:Zu,ColorSecondaryWarmYellow:Gu,ColorTextPrimary:xg,ColorTextPrint:wg,ColorTextReverse:_g,ColorTextSecondary:vg,ComponentBlur:M0,ComponentBreadcrumbChevronMarginLeft:x0,ComponentBreadcrumbChevronMarginRight:v0,ComponentBreadcrumbPaddingTopDesktop:w0,ComponentBreadcrumbPaddingTopMobile:_0,ComponentButtonPaddingDesktopHorizontal:l0,ComponentButtonPaddingDesktopVertical:o0,ComponentButtonPaddingMobileHorizontal:a0,ComponentButtonPaddingMobileVertical:s0,ComponentButtonShadowSize:c0,ComponentCardHeadingMargin:g0,ComponentCardPaddingDesktop:m0,ComponentCardPaddingMobile:p0,ComponentDetails:T0,ComponentExpander:D0,ComponentFormCheckboxLabelPadding:h0,ComponentFormCheckboxSize:f0,ComponentFormInputMinHeight:u0,ComponentFormInputPadding:d0,ComponentLink:j0,ComponentPagination:I0,ComponentPanelPaddingDesktop:b0,ComponentPanelPaddingMobile:y0,ComponentSpread:N0,ComponentSummaryListCellPaddingHorizontal:k0,ComponentSummaryListCellPaddingVertical:S0,ComponentSummaryListRowMargin:C0,ElevationHigh:Lb,ElevationLow:Db,ElevationMedium:Ib,ElevationNone:Tb,FocusOutlineOffset:Cb,FocusOutlineStyle:Nb,FocusOutlineWidth:kb,FocusShadowButton:jb,FocusShadowInput:Mb,FontFamilyBase:qs,FontFamilyFallback:Xs,FontFamilyPrint:Js,FontLineHeightBase:xl,FontSize14Mobile:ta,FontSize14Print:ra,FontSize14Tablet:na,FontSize16Mobile:ia,FontSize16Print:aa,FontSize16Tablet:sa,FontSize19Mobile:oa,FontSize19Print:ca,FontSize19Tablet:la,FontSize22Mobile:ua,FontSize22Print:fa,FontSize22Tablet:da,FontSize26Mobile:ha,FontSize26Print:ma,FontSize26Tablet:pa,FontSize36Mobile:ga,FontSize36Print:ba,FontSize36Tablet:ya,FontSize48Mobile:xa,FontSize48Print:_a,FontSize48Tablet:va,FontSizeBase:bl,FontWeightBold:Qs,FontWeightLight:ea,FontWeightNormal:Ks,FormBorderRadius:Ny,FormBorderWidthDefault:ky,FormBorderWidthError:Cy,FormErrorTextDefault:_y,FormErrorTypographyWeight:wy,FormHintTextDefault:Sy,FormInputBackgroundDefault:oy,FormInputBackgroundDisabled:cy,FormInputBackgroundError:uy,FormInputBackgroundFocus:ly,FormInputBorderDefault:dy,FormInputBorderDisabled:py,FormInputBorderError:hy,FormInputBorderFocus:fy,FormInputTextDefault:my,FormInputTextDisabled:yy,FormInputTextPlaceholder:gy,FormLabelTextDefault:by,FormLabelTextRequired:xy,FormLabelTypographyWeight:vy,FormSpacingCheckboxLabelPadding:ud,FormSpacingCheckboxSize:cd,FormSpacingInputMinHeight:ld,FormSpacingInputPadding:od,GridGutter:tb,GridGutterHalf:nb,GridPageWidth:eb,HeadingsNhsukHeadingL:er,HeadingsNhsukHeadingM:tr,HeadingsNhsukHeadingS:nr,HeadingsNhsukHeadingXl:Qn,HeadingsNhsukHeadingXs:rr,LayoutColumnActions:qy,LayoutColumnFull:Gy,LayoutColumnHalf:Yy,LayoutColumnQuarter:Zy,LayoutColumnThird:Vy,LayoutContainerMaxWidth:Wy,ParagraphsBody:ir,ParagraphsBodyLarge:sr,ParagraphsBodySmall:ar,ParagraphsLedeText:or,ParagraphsLedeTextSmall:lr,ShadowButtonDefault:bb,ShadowButtonFocus:_b,ShadowButtonSecondary:xb,ShadowButtonWarning:vb,ShadowCardDefault:wb,ShadowCardHover:Sb,SizeButtonMinHeightDesktop:Uy,SizeButtonMinHeightMobile:Ry,SizeFormControlLarge:Ey,SizeFormControlMedium:Ay,SizeFormControlSmall:Ly,SizeFormInputWidth2xl:Oy,SizeFormInputWidth3xl:Hy,SizeFormInputWidthLg:By,SizeFormInputWidthMd:$y,SizeFormInputWidthSm:Fy,SizeFormInputWidthXl:zy,SizeFormInputWidthXs:Py,SizeIconExtraLarge:Dy,SizeIconLarge:Ty,SizeIconMedium:jy,SizeIconNhsDefault:Iy,SizeIconSmall:My,Spacing0:dd,Spacing1:fd,Spacing2:hd,Spacing3:pd,Spacing4:md,Spacing5:gd,Spacing6:yd,Spacing7:bd,Spacing8:xd,Spacing9:vd,SpacingResponsive0Mobile:Ko,SpacingResponsive0Tablet:Qo,SpacingResponsive1Mobile:el,SpacingResponsive1Tablet:tl,SpacingResponsive2Mobile:nl,SpacingResponsive2Tablet:rl,SpacingResponsive3Mobile:il,SpacingResponsive3Tablet:sl,SpacingResponsive4Mobile:al,SpacingResponsive4Tablet:ol,SpacingResponsive5Mobile:ll,SpacingResponsive5Tablet:cl,SpacingResponsive6Mobile:ul,SpacingResponsive6Tablet:dl,SpacingResponsive7Mobile:fl,SpacingResponsive7Tablet:hl,SpacingResponsive8Mobile:pl,SpacingResponsive8Tablet:ml,SpacingResponsive9Mobile:gl,SpacingResponsive9Tablet:yl,StateDisabledBackground:mb,StateDisabledBorder:gb,StateDisabledText:yb,StateErrorBackground:rb,StateErrorBorder:ib,StateErrorText:sb,StateInfoBackground:fb,StateInfoBorder:hb,StateInfoText:pb,StateSuccessBackground:ab,StateSuccessBorder:ob,StateSuccessText:lb,StateWarningBackground:cb,StateWarningBorder:ub,StateWarningText:db,TransitionButtonDefault:ig,TransitionButtonShadow:sg,TransitionCardHover:og,TransitionInputFocus:ag},Symbol.toStringTag,{value:"Module"})),uN=(t,e)=>({fontSize:t.mobile,marginBottom:e.mobile,"@media (min-width: 768px)":{fontSize:t.tablet,marginBottom:e.tablet},"@media print":{fontSize:t.print||t.tablet}}),dN=({children:t,className:e="",style:n={}})=>a.jsx("h1",{className:e,style:{fontFamily:Qn.fontFamily,fontWeight:Qn.fontWeight,fontSize:Qn.fontSize.mobile,lineHeight:Qn.lineHeight,marginTop:Qn.marginTop,marginBottom:Qn.marginBottom.mobile,...n},children:t}),fN=({children:t,className:e="",style:n={}})=>a.jsx("h2",{className:e,style:{fontFamily:er.fontFamily,fontWeight:er.fontWeight,fontSize:er.fontSize.mobile,lineHeight:er.lineHeight,marginTop:er.marginTop,marginBottom:er.marginBottom.mobile,...n},children:t}),hN=({children:t,className:e="",style:n={}})=>a.jsx("h3",{className:e,style:{fontFamily:tr.fontFamily,fontWeight:tr.fontWeight,fontSize:tr.fontSize.mobile,lineHeight:tr.lineHeight,marginTop:tr.marginTop,marginBottom:tr.marginBottom.mobile,...n},children:t}),pN=({children:t,className:e="",style:n={}})=>a.jsx("h4",{className:e,style:{fontFamily:nr.fontFamily,fontWeight:nr.fontWeight,fontSize:nr.fontSize.mobile,lineHeight:nr.lineHeight,marginTop:nr.marginTop,marginBottom:nr.marginBottom.mobile,...n},children:t}),mN=({children:t,className:e="",style:n={}})=>a.jsx("h5",{className:e,style:{fontFamily:rr.fontFamily,fontWeight:rr.fontWeight,fontSize:rr.fontSize.mobile,lineHeight:rr.lineHeight,marginTop:rr.marginTop,marginBottom:rr.marginBottom.mobile,...n},children:t}),gN=({children:t,className:e="",style:n={}})=>a.jsx("p",{className:e,style:{fontFamily:ir.fontFamily,fontWeight:ir.fontWeight,fontSize:ir.fontSize.mobile,lineHeight:ir.lineHeight,marginTop:ir.marginTop,marginBottom:ir.marginBottom.mobile,...n},children:t}),yN=({children:t,className:e="",style:n={}})=>a.jsx("p",{className:e,style:{fontFamily:sr.fontFamily,fontWeight:sr.fontWeight,fontSize:sr.fontSize.mobile,lineHeight:sr.lineHeight,marginTop:sr.marginTop,marginBottom:sr.marginBottom.mobile,...n},children:t}),bN=({children:t,className:e="",style:n={}})=>a.jsx("p",{className:e,style:{fontFamily:ar.fontFamily,fontWeight:ar.fontWeight,fontSize:ar.fontSize.mobile,lineHeight:ar.lineHeight,marginTop:ar.marginTop,marginBottom:ar.marginBottom.mobile,...n},children:t}),xN=({children:t,className:e="",style:n={}})=>a.jsx("p",{className:e,style:{fontFamily:or.fontFamily,fontWeight:or.fontWeight,fontSize:or.fontSize.mobile,lineHeight:or.lineHeight,marginTop:or.marginTop,marginBottom:or.marginBottom.mobile,...n},children:t}),vN=({children:t,className:e="",style:n={}})=>a.jsx("p",{className:e,style:{fontFamily:lr.fontFamily,fontWeight:lr.fontWeight,fontSize:lr.fontSize.mobile,lineHeight:lr.lineHeight,marginTop:lr.marginTop,marginBottom:lr.marginBottom.mobile,...n},children:t}),_N=()=>A.useMemo(()=>cN,[]),wN=()=>A.useMemo(()=>({BorderColorDefault:Iu,BorderColorForm:Lu,BorderColorCard:Au,BorderColorCardHover:Eu,BorderColorError:Pu,ColorPrimaryBlue:Fu,ColorPrimaryWhite:$u,ColorPrimaryBlack:Bu,ColorPrimaryGreen:zu,ColorPrimaryPurple:Ou,ColorPrimaryDarkPink:Hu,ColorPrimaryRed:Ru,ColorPrimaryYellow:Uu,ColorSecondaryPaleYellow:Wu,ColorSecondaryWarmYellow:Gu,ColorSecondaryOrange:Yu,ColorSecondaryAquaGreen:Vu,ColorSecondaryPink:Zu,ColorGrey1:qu,ColorGrey2:Xu,ColorGrey3:Ju,ColorGrey4:Ku,ColorGrey5:Qu}),[]),SN=()=>A.useMemo(()=>({Spacing0:dd,Spacing1:fd,Spacing2:hd,Spacing3:pd,Spacing4:md,Spacing5:gd,Spacing6:yd,Spacing7:bd,Spacing8:xd,Spacing9:vd}),[]),kN=()=>A.useMemo(()=>({Mobile:{Size14:ta,Size16:ia,Size19:oa,Size22:ua,Size26:ha,Size36:ga,Size48:xa},Tablet:{Size14:na,Size16:sa,Size19:la,Size22:da,Size26:pa,Size36:ya,Size48:va},Print:{Size14:ra,Size16:aa,Size19:ca,Size22:fa,Size26:ma,Size36:ba,Size48:_a},Family:{Base:qs,Fallback:Xs,Print:Js},Weight:{Normal:Ks,Bold:Qs,Light:ea},Base:{Size:bl,LineHeight:xl},FontFamilyBase:qs,FontFamilyFallback:Xs,FontFamilyPrint:Js,FontWeightNormal:Ks,FontWeightBold:Qs,FontWeightLight:ea,FontSize14Mobile:ta,FontSize14Tablet:na,FontSize14Print:ra,FontSize16Mobile:ia,FontSize16Tablet:sa,FontSize16Print:aa,FontSize19Mobile:oa,FontSize19Tablet:la,FontSize19Print:ca,FontSize22Mobile:ua,FontSize22Tablet:da,FontSize22Print:fa,FontSize26Mobile:ha,FontSize26Tablet:pa,FontSize26Print:ma,FontSize36Mobile:ga,FontSize36Tablet:ya,FontSize36Print:ba,FontSize48Mobile:xa,FontSize48Tablet:va,FontSize48Print:_a,FontSizeBase:bl,FontLineHeightBase:xl}),[]),CN=()=>A.useMemo(()=>({Mobile:{Size0:Ko,Size1:el,Size2:nl,Size3:il,Size4:al,Size5:ll,Size6:ul,Size7:fl,Size8:pl,Size9:gl},Tablet:{Size0:Qo,Size1:tl,Size2:rl,Size3:sl,Size4:ol,Size5:cl,Size6:dl,Size7:hl,Size8:ml,Size9:yl},SpacingResponsive0Mobile:Ko,SpacingResponsive0Tablet:Qo,SpacingResponsive1Mobile:el,SpacingResponsive1Tablet:tl,SpacingResponsive2Mobile:nl,SpacingResponsive2Tablet:rl,SpacingResponsive3Mobile:il,SpacingResponsive3Tablet:sl,SpacingResponsive4Mobile:al,SpacingResponsive4Tablet:ol,SpacingResponsive5Mobile:ll,SpacingResponsive5Tablet:cl,SpacingResponsive6Mobile:ul,SpacingResponsive6Tablet:dl,SpacingResponsive7Mobile:fl,SpacingResponsive7Tablet:hl,SpacingResponsive8Mobile:pl,SpacingResponsive8Tablet:ml,SpacingResponsive9Mobile:gl,SpacingResponsive9Tablet:yl}),[]),NN=()=>A.useMemo(()=>({ButtonSpacingPaddingVerticalMobile:ed,ButtonSpacingPaddingHorizontalMobile:td,ButtonSpacingPaddingVerticalDesktop:nd,ButtonSpacingPaddingHorizontalDesktop:rd,CardSpacingPaddingMobile:id,CardSpacingPaddingDesktop:sd,CardSpacingHeadingMargin:ad,FormSpacingInputPadding:od,FormSpacingInputMinHeight:ld,FormSpacingCheckboxSize:cd,FormSpacingCheckboxLabelPadding:ud}),[]),MN=()=>A.useMemo(()=>({xl:Qn,l:er,m:tr,s:nr,xs:rr}),[]),jN=()=>A.useMemo(()=>({body:ir,bodyLarge:sr,bodySmall:ar,ledeText:or,ledeTextSmall:lr}),[]),TN=()=>A.useMemo(()=>({headings:{xl:Qn,l:er,m:tr,s:nr,xs:rr},paragraphs:{body:ir,bodyLarge:sr,bodySmall:ar,ledeText:or,ledeTextSmall:lr},fonts:{family:{base:qs,fallback:Xs,print:Js},weight:{normal:Ks,bold:Qs,light:ea},sizes:{mobile:{size14:ta,size16:ia,size19:oa,size22:ua,size26:ha,size36:ga,size48:xa},tablet:{size14:na,size16:sa,size19:la,size22:da,size26:pa,size36:ya,size48:va},print:{size14:ra,size16:aa,size19:ca,size22:fa,size26:ma,size36:ba,size48:_a}}}}),[]);function DN(t={}){const{initialLayout:e=void 0,fallbackLayout:n="two-column"}=t,[r,i]=ne.useState(e),s=ne.useCallback(()=>i("three-column"),[]),o=ne.useCallback(()=>i(c=>c==="three-column"?n:c),[n]),l=ne.useCallback(()=>i(c=>c==="three-column"?n:"three-column"),[n]);return{forceLayout:r,setLayout:i,drillIn:s,drillOut:o,toggle:l,isDrilledIn:r==="three-column"}}const _d={fontPath:"https://assets.nhs.uk/fonts/",includeFontFace:!0,useFallbacks:!0,fontWeights:[400,600]},sn={normal:{woff2:"FrutigerLTW01-55Roman.woff2",woff:"FrutigerLTW01-55Roman.woff",ttf:"FrutigerLTW01-55Roman.ttf",eot:"FrutigerLTW01-55Roman.eot"},bold:{woff2:"FrutigerLTW01-65Bold.woff2",woff:"FrutigerLTW01-65Bold.woff",ttf:"FrutigerLTW01-65Bold.ttf",eot:"FrutigerLTW01-65Bold.eot"}};function IN(t={}){const{fontPath:e,fontWeights:n}={..._d,...t},r=[];return n?.includes(400)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 400;
  src: url("${e}${sn.normal.eot}?#iefix") format("eot"),
       url("${e}${sn.normal.woff2}") format("woff2"),
       url("${e}${sn.normal.woff}") format("woff"),
       url("${e}${sn.normal.ttf}") format("truetype");
  src: url("${e}${sn.normal.eot}");
}`),n?.includes(600)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 600;
  src: url("${e}${sn.bold.eot}?#iefix") format("eot"),
       url("${e}${sn.bold.woff2}") format("woff2"),
       url("${e}${sn.bold.woff}") format("woff"),
       url("${e}${sn.bold.ttf}") format("truetype");
  src: url("${e}${sn.bold.eot}");
}`),r.join(`
`)}function LN(t={}){if(typeof document>"u")return;const{fontPath:e,fontWeights:n}={..._d,...t};[...n?.includes(400)?[{href:`${e}${sn.normal.woff2}`,as:"font",type:"font/woff2"},{href:`${e}${sn.normal.woff}`,as:"font",type:"font/woff"}]:[],...n?.includes(600)?[{href:`${e}${sn.bold.woff2}`,as:"font",type:"font/woff2"},{href:`${e}${sn.bold.woff}`,as:"font",type:"font/woff"}]:[]].forEach(i=>{const s=document.createElement("link");s.rel="preload",s.href=i.href,s.as=i.as,s.type=i.type,s.crossOrigin="anonymous",document.head.appendChild(s)})}const AN='"Frutiger W01", Arial, Helvetica, sans-serif',EN="Arial, Helvetica, sans-serif";async function PN(){if(typeof document>"u"||!document.fonts)return!1;try{return await document.fonts.load('1em "Frutiger W01"'),document.fonts.check('1em "Frutiger W01"')}catch{return!1}}function Sr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ab(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Sn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Qi={duration:.5,overwrite:!1,delay:0},wd,qt,kt,Fn=1e8,bt=1/Fn,Sd=Math.PI*2,FN=Sd/4,$N=0,Eb=Math.sqrt,BN=Math.cos,zN=Math.sin,Gt=function(e){return typeof e=="string"},jt=function(e){return typeof e=="function"},kr=function(e){return typeof e=="number"},kd=function(e){return typeof e>"u"},cr=function(e){return typeof e=="object"},mn=function(e){return e!==!1},Cd=function(){return typeof window<"u"},vl=function(e){return jt(e)||Gt(e)},Pb=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Qt=Array.isArray,Nd=/(?:-?\.?\d|\.)+/gi,Fb=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,es=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Md=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,$b=/[+-]=-?[.\d]+/,Bb=/[^,'"\[\]\s]+/gi,ON=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Nt,ur,jd,Td,kn={},_l={},zb,Ob=function(e){return(_l=ns(e,kn))&&bn},Dd=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},wa=function(e,n){return!n&&console.warn(e)},Hb=function(e,n){return e&&(kn[e]=n)&&_l&&(_l[e]=n)||kn},Sa=function(){return 0},HN={suppressEvents:!0,isStart:!0,kill:!1},wl={suppressEvents:!0,kill:!1},RN={suppressEvents:!0},Id={},Or=[],Ld={},Rb,Cn={},Ad={},Ub=30,Sl=[],Ed="",Pd=function(e){var n=e[0],r,i;if(cr(n)||jt(n)||(e=[e]),!(r=(n._gsap||{}).harness)){for(i=Sl.length;i--&&!Sl[i].targetTest(n););r=Sl[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new b1(e[i],r)))||e.splice(i,1);return e},pi=function(e){return e._gsap||Pd(Bn(e))[0]._gsap},Wb=function(e,n,r){return(r=e[n])&&jt(r)?e[n]():kd(r)&&e.getAttribute&&e.getAttribute(n)||r},gn=function(e,n){return(e=e.split(",")).forEach(n)||e},It=function(e){return Math.round(e*1e5)/1e5||0},Ft=function(e){return Math.round(e*1e7)/1e7||0},ts=function(e,n){var r=n.charAt(0),i=parseFloat(n.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},UN=function(e,n){for(var r=n.length,i=0;e.indexOf(n[i])<0&&++i<r;);return i<r},kl=function(){var e=Or.length,n=Or.slice(0),r,i;for(Ld={},Or.length=0,r=0;r<e;r++)i=n[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},Fd=function(e){return!!(e._initted||e._startAt||e.add)},Gb=function(e,n,r,i){Or.length&&!qt&&kl(),e.render(n,r,!!(qt&&n<0&&Fd(e))),Or.length&&!qt&&kl()},Yb=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(Bb).length<2?n:Gt(e)?e.trim():e},Vb=function(e){return e},Nn=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},WN=function(e){return function(n,r){for(var i in r)i in n||i==="duration"&&e||i==="ease"||(n[i]=r[i])}},ns=function(e,n){for(var r in n)e[r]=n[r];return e},Zb=function t(e,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=cr(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},Cl=function(e,n){var r={},i;for(i in e)i in n||(r[i]=e[i]);return r},ka=function(e){var n=e.parent||Nt,r=e.keyframes?WN(Qt(e.keyframes)):Nn;if(mn(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},GN=function(e,n){for(var r=e.length,i=r===n.length;i&&r--&&e[r]===n[r];);return r<0},qb=function(e,n,r,i,s){var o=e[i],l;if(s)for(l=n[s];o&&o[s]>l;)o=o._prev;return o?(n._next=o._next,o._next=n):(n._next=e[r],e[r]=n),n._next?n._next._prev=n:e[i]=n,n._prev=o,n.parent=n._dp=e,n},Nl=function(e,n,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=n._prev,o=n._next;s?s._next=o:e[r]===n&&(e[r]=o),o?o._prev=s:e[i]===n&&(e[i]=s),n._next=n._prev=n.parent=null},Hr=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},mi=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},YN=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},$d=function(e,n,r,i){return e._startAt&&(qt?e._startAt.revert(wl):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,i))},VN=function t(e){return!e||e._ts&&t(e.parent)},Xb=function(e){return e._repeat?rs(e._tTime,e=e.duration()+e._rDelay)*e:0},rs=function(e,n){var r=Math.floor(e=Ft(e/n));return e&&r===e?r-1:r},Ml=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},jl=function(e){return e._end=Ft(e._start+(e._tDur/Math.abs(e._ts||e._rts||bt)||0))},Tl=function(e,n){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Ft(r._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),jl(e),r._dirty||mi(r,e)),e},Jb=function(e,n){var r;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(r=Ml(e.rawTime(),n),(!n._dur||Na(0,n.totalDuration(),r)-n._tTime>bt)&&n.render(r,!0)),mi(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-bt}},dr=function(e,n,r,i){return n.parent&&Hr(n),n._start=Ft((kr(r)?r:r||e!==Nt?$n(e,r,n):e._time)+n._delay),n._end=Ft(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),qb(e,n,"_first","_last",e._sort?"_start":0),Bd(n)||(e._recent=n),i||Jb(e,n),e._ts<0&&Tl(e,e._tTime),e},Kb=function(e,n){return(kn.ScrollTrigger||Dd("scrollTrigger",n))&&kn.ScrollTrigger.create(n,e)},Qb=function(e,n,r,i,s){if(Vd(e,n,s),!e._initted)return 1;if(!r&&e._pt&&!qt&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Rb!==jn.frame)return Or.push(e),e._lazy=[s,i],1},ZN=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},Bd=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},qN=function(e,n,r,i){var s=e.ratio,o=n<0||!n&&(!e._start&&ZN(e)&&!(!e._initted&&Bd(e))||(e._ts<0||e._dp._ts<0)&&!Bd(e))?0:1,l=e._rDelay,c=0,u,d,f;if(l&&e._repeat&&(c=Na(0,e._tDur,n),d=rs(c,l),e._yoyo&&d&1&&(o=1-o),d!==rs(e._tTime,l)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||qt||i||e._zTime===bt||!n&&e._zTime){if(!e._initted&&Qb(e,n,i,r,c))return;for(f=e._zTime,e._zTime=n||(r?bt:0),r||(r=n&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,u=e._pt;u;)u.r(o,u.d),u=u._next;n<0&&$d(e,n,r,!0),e._onUpdate&&!r&&Mn(e,"onUpdate"),c&&e._repeat&&!r&&e.parent&&Mn(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===o&&(o&&Hr(e,1),!r&&!qt&&(Mn(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},XN=function(e,n,r){var i;if(r>n)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>n)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<n)return i;i=i._prev}},is=function(e,n,r,i){var s=e._repeat,o=Ft(n)||0,l=e._tTime/e._tDur;return l&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Ft(o*(s+1)+e._rDelay*s):o,l>0&&!i&&Tl(e,e._tTime=e._tDur*l),e.parent&&jl(e),r||mi(e.parent,e),e},e1=function(e){return e instanceof Xt?mi(e):is(e,e._dur)},JN={_start:0,endTime:Sa,totalDuration:Sa},$n=function t(e,n,r){var i=e.labels,s=e._recent||JN,o=e.duration()>=Fn?s.endTime(!1):e._dur,l,c,u;return Gt(n)&&(isNaN(n)||n in i)?(c=n.charAt(0),u=n.substr(-1)==="%",l=n.indexOf("="),c==="<"||c===">"?(l>=0&&(n=n.replace(/=/,"")),(c==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(n.substr(1))||0)*(u?(l<0?s:r).totalDuration()/100:1)):l<0?(n in i||(i[n]=o),i[n]):(c=parseFloat(n.charAt(l-1)+n.substr(l+1)),u&&r&&(c=c/100*(Qt(r)?r[0]:r).totalDuration()),l>1?t(e,n.substr(0,l-1),r)+c:o+c)):n==null?o:+n},Ca=function(e,n,r){var i=kr(n[1]),s=(i?2:1)+(e<2?0:1),o=n[s],l,c;if(i&&(o.duration=n[1]),o.parent=r,e){for(l=o,c=r;c&&!("immediateRender"in l);)l=c.vars.defaults||{},c=mn(c.vars.inherit)&&c.parent;o.immediateRender=mn(l.immediateRender),e<2?o.runBackwards=1:o.startAt=n[s-1]}return new Lt(n[0],o,n[s+1])},Rr=function(e,n){return e||e===0?n(e):n},Na=function(e,n,r){return r<e?e:r>n?n:r},en=function(e,n){return!Gt(e)||!(n=ON.exec(e))?"":n[1]},KN=function(e,n,r){return Rr(r,function(i){return Na(e,n,i)})},zd=[].slice,t1=function(e,n){return e&&cr(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&cr(e[0]))&&!e.nodeType&&e!==ur},QN=function(e,n,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Gt(i)&&!n||t1(i,1)?(s=r).push.apply(s,Bn(i)):r.push(i)})||r},Bn=function(e,n,r){return kt&&!n&&kt.selector?kt.selector(e):Gt(e)&&!r&&(jd||!as())?zd.call((n||Td).querySelectorAll(e),0):Qt(e)?QN(e,r):t1(e)?zd.call(e,0):e?[e]:[]},Od=function(e){return e=Bn(e)[0]||wa("Invalid scope")||{},function(n){var r=e.current||e.nativeElement||e;return Bn(n,r.querySelectorAll?r:r===e?wa("Invalid scope")||Td.createElement("div"):e)}},n1=function(e){return e.sort(function(){return .5-Math.random()})},r1=function(e){if(jt(e))return e;var n=cr(e)?e:{each:e},r=gi(n.ease),i=n.from||0,s=parseFloat(n.base)||0,o={},l=i>0&&i<1,c=isNaN(i)||l,u=n.axis,d=i,f=i;return Gt(i)?d=f={center:.5,edges:.5,end:1}[i]||0:!l&&c&&(d=i[0],f=i[1]),function(p,h,g){var m=(g||n).length,y=o[m],w,M,j,v,b,_,N,C,x;if(!y){if(x=n.grid==="auto"?0:(n.grid||[1,Fn])[1],!x){for(N=-Fn;N<(N=g[x++].getBoundingClientRect().left)&&x<m;);x<m&&x--}for(y=o[m]=[],w=c?Math.min(x,m)*d-.5:i%x,M=x===Fn?0:c?m*f/x-.5:i/x|0,N=0,C=Fn,_=0;_<m;_++)j=_%x-w,v=M-(_/x|0),y[_]=b=u?Math.abs(u==="y"?v:j):Eb(j*j+v*v),b>N&&(N=b),b<C&&(C=b);i==="random"&&n1(y),y.max=N-C,y.min=C,y.v=m=(parseFloat(n.amount)||parseFloat(n.each)*(x>m?m-1:u?u==="y"?m/x:x:Math.max(x,m/x))||0)*(i==="edges"?-1:1),y.b=m<0?s-m:s,y.u=en(n.amount||n.each)||0,r=r&&m<0?m1(r):r}return m=(y[p]-y.min)/y.max||0,Ft(y.b+(r?r(m):m)*y.v)+y.u}},Hd=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Ft(Math.round(parseFloat(r)/e)*e*n);return(i-i%1)/n+(kr(r)?0:en(r))}},i1=function(e,n){var r=Qt(e),i,s;return!r&&cr(e)&&(i=r=e.radius||Fn,e.values?(e=Bn(e.values),(s=!kr(e[0]))&&(i*=i)):e=Hd(e.increment)),Rr(n,r?jt(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var l=parseFloat(s?o.x:o),c=parseFloat(s?o.y:0),u=Fn,d=0,f=e.length,p,h;f--;)s?(p=e[f].x-l,h=e[f].y-c,p=p*p+h*h):p=Math.abs(e[f]-l),p<u&&(u=p,d=f);return d=!i||u<=i?e[d]:o,s||d===o||kr(o)?d:d+en(o)}:Hd(e))},s1=function(e,n,r,i){return Rr(Qt(e)?!n:r===!0?!!(r=0):!i,function(){return Qt(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(n-e+r*.99))/r)*r*i)/i})},eM=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduce(function(s,o){return o(s)},i)}},tM=function(e,n){return function(r){return e(parseFloat(r))+(n||en(r))}},nM=function(e,n,r){return o1(e,n,0,1,r)},a1=function(e,n,r){return Rr(r,function(i){return e[~~n(i)]})},rM=function t(e,n,r){var i=n-e;return Qt(e)?a1(e,t(0,e.length),n):Rr(r,function(s){return(i+(s-e)%i)%i+e})},iM=function t(e,n,r){var i=n-e,s=i*2;return Qt(e)?a1(e,t(0,e.length-1),n):Rr(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},Ma=function(e){for(var n=0,r="",i,s,o,l;~(i=e.indexOf("random(",n));)o=e.indexOf(")",i),l=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(l?Bb:Nd),r+=e.substr(n,i-n)+s1(l?s:+s[0],l?0:+s[1],+s[2]||1e-5),n=o+1;return r+e.substr(n,e.length-n)},o1=function(e,n,r,i,s){var o=n-e,l=i-r;return Rr(s,function(c){return r+((c-e)/o*l||0)})},sM=function t(e,n,r,i){var s=isNaN(e+n)?0:function(h){return(1-h)*e+h*n};if(!s){var o=Gt(e),l={},c,u,d,f,p;if(r===!0&&(i=1)&&(r=null),o)e={p:e},n={p:n};else if(Qt(e)&&!Qt(n)){for(d=[],f=e.length,p=f-2,u=1;u<f;u++)d.push(t(e[u-1],e[u]));f--,s=function(g){g*=f;var m=Math.min(p,~~g);return d[m](g-m)},r=n}else i||(e=ns(Qt(e)?[]:{},e));if(!d){for(c in n)Gd.call(l,e,c,"get",n[c]);s=function(g){return Xd(g,l)||(o?e.p:e)}}}return Rr(r,s)},l1=function(e,n,r){var i=e.labels,s=Fn,o,l,c;for(o in i)l=i[o]-n,l<0==!!r&&l&&s>(l=Math.abs(l))&&(c=o,s=l);return c},Mn=function(e,n,r){var i=e.vars,s=i[n],o=kt,l=e._ctx,c,u,d;if(s)return c=i[n+"Params"],u=i.callbackScope||e,r&&Or.length&&kl(),l&&(kt=l),d=c?s.apply(u,c):s.call(u),kt=o,d},ja=function(e){return Hr(e),e.scrollTrigger&&e.scrollTrigger.kill(!!qt),e.progress()<1&&Mn(e,"onInterrupt"),e},ss,c1=[],u1=function(e){if(e)if(e=!e.name&&e.default||e,Cd()||e.headless){var n=e.name,r=jt(e),i=n&&!r&&e.init?function(){this._props=[]}:e,s={init:Sa,render:Xd,add:Gd,kill:_M,modifier:vM,rawVars:0},o={targetTest:0,get:0,getSetter:qd,aliases:{},register:0};if(as(),e!==i){if(Cn[n])return;Nn(i,Nn(Cl(e,s),o)),ns(i.prototype,ns(s,Cl(e,o))),Cn[i.prop=n]=i,e.targetTest&&(Sl.push(i),Id[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}Hb(n,i),e.register&&e.register(bn,i,yn)}else c1.push(e)},xt=255,Ta={aqua:[0,xt,xt],lime:[0,xt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,xt],navy:[0,0,128],white:[xt,xt,xt],olive:[128,128,0],yellow:[xt,xt,0],orange:[xt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[xt,0,0],pink:[xt,192,203],cyan:[0,xt,xt],transparent:[xt,xt,xt,0]},Rd=function(e,n,r){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(r-n)*e*6:e<.5?r:e*3<2?n+(r-n)*(2/3-e)*6:n)*xt+.5|0},d1=function(e,n,r){var i=e?kr(e)?[e>>16,e>>8&xt,e&xt]:0:Ta.black,s,o,l,c,u,d,f,p,h,g;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Ta[e])i=Ta[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),l=e.charAt(3),e="#"+s+s+o+o+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&xt,i&xt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&xt,e&xt]}else if(e.substr(0,3)==="hsl"){if(i=g=e.match(Nd),!n)c=+i[0]%360/360,u=+i[1]/100,d=+i[2]/100,o=d<=.5?d*(u+1):d+u-d*u,s=d*2-o,i.length>3&&(i[3]*=1),i[0]=Rd(c+1/3,s,o),i[1]=Rd(c,s,o),i[2]=Rd(c-1/3,s,o);else if(~e.indexOf("="))return i=e.match(Fb),r&&i.length<4&&(i[3]=1),i}else i=e.match(Nd)||Ta.transparent;i=i.map(Number)}return n&&!g&&(s=i[0]/xt,o=i[1]/xt,l=i[2]/xt,f=Math.max(s,o,l),p=Math.min(s,o,l),d=(f+p)/2,f===p?c=u=0:(h=f-p,u=d>.5?h/(2-f-p):h/(f+p),c=f===s?(o-l)/h+(o<l?6:0):f===o?(l-s)/h+2:(s-o)/h+4,c*=60),i[0]=~~(c+.5),i[1]=~~(u*100+.5),i[2]=~~(d*100+.5)),r&&i.length<4&&(i[3]=1),i},f1=function(e){var n=[],r=[],i=-1;return e.split(Ur).forEach(function(s){var o=s.match(es)||[];n.push.apply(n,o),r.push(i+=o.length+1)}),n.c=r,n},h1=function(e,n,r){var i="",s=(e+i).match(Ur),o=n?"hsla(":"rgba(",l=0,c,u,d,f;if(!s)return e;if(s=s.map(function(p){return(p=d1(p,n,1))&&o+(n?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),r&&(d=f1(e),c=r.c,c.join(i)!==d.c.join(i)))for(u=e.replace(Ur,"1").split(es),f=u.length-1;l<f;l++)i+=u[l]+(~c.indexOf(l)?s.shift()||o+"0,0,0,0)":(d.length?d:s.length?s:r).shift());if(!u)for(u=e.split(Ur),f=u.length-1;l<f;l++)i+=u[l]+s[l];return i+u[f]},Ur=(function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Ta)t+="|"+e+"\\b";return new RegExp(t+")","gi")})(),aM=/hsl[a]?\(/,p1=function(e){var n=e.join(" "),r;if(Ur.lastIndex=0,Ur.test(n))return r=aM.test(n),e[1]=h1(e[1],r),e[0]=h1(e[0],r,f1(e[1])),!0},Da,jn=(function(){var t=Date.now,e=500,n=33,r=t(),i=r,s=1e3/240,o=s,l=[],c,u,d,f,p,h,g=function m(y){var w=t()-i,M=y===!0,j,v,b,_;if((w>e||w<0)&&(r+=w-n),i+=w,b=i-r,j=b-o,(j>0||M)&&(_=++f.frame,p=b-f.time*1e3,f.time=b=b/1e3,o+=j+(j>=s?4:s-j),v=1),M||(c=u(m)),v)for(h=0;h<l.length;h++)l[h](b,p,_,y)};return f={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(y){return p/(1e3/(y||60))},wake:function(){zb&&(!jd&&Cd()&&(ur=jd=window,Td=ur.document||{},kn.gsap=bn,(ur.gsapVersions||(ur.gsapVersions=[])).push(bn.version),Ob(_l||ur.GreenSockGlobals||!ur.gsap&&ur||{}),c1.forEach(u1)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&f.sleep(),u=d||function(y){return setTimeout(y,o-f.time*1e3+1|0)},Da=1,g(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(c),Da=0,u=Sa},lagSmoothing:function(y,w){e=y||1/0,n=Math.min(w||33,e)},fps:function(y){s=1e3/(y||240),o=f.time*1e3+s},add:function(y,w,M){var j=w?function(v,b,_,N){y(v,b,_,N),f.remove(j)}:y;return f.remove(y),l[M?"unshift":"push"](j),as(),j},remove:function(y,w){~(w=l.indexOf(y))&&l.splice(w,1)&&h>=w&&h--},_listeners:l},f})(),as=function(){return!Da&&jn.wake()},ot={},oM=/^[\d.\-M][\d.\-,\s]/,lM=/["']/g,cM=function(e){for(var n={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,l,c,u;s<o;s++)c=r[s],l=s!==o-1?c.lastIndexOf(","):c.length,u=c.substr(0,l),n[i]=isNaN(u)?u.replace(lM,"").trim():+u,i=c.substr(l+1).trim();return n},uM=function(e){var n=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",n);return e.substring(n,~i&&i<r?e.indexOf(")",r+1):r)},dM=function(e){var n=(e+"").split("("),r=ot[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[cM(n[1])]:uM(e).split(",").map(Yb)):ot._CE&&oM.test(e)?ot._CE("",e):r},m1=function(e){return function(n){return 1-e(1-n)}},g1=function t(e,n){for(var r=e._first,i;r;)r instanceof Xt?t(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},gi=function(e,n){return e&&(jt(e)?e:ot[e]||dM(e))||n},yi=function(e,n,r,i){r===void 0&&(r=function(c){return 1-n(1-c)}),i===void 0&&(i=function(c){return c<.5?n(c*2)/2:1-n((1-c)*2)/2});var s={easeIn:n,easeOut:r,easeInOut:i},o;return gn(e,function(l){ot[l]=kn[l]=s,ot[o=l.toLowerCase()]=r;for(var c in s)ot[o+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=ot[l+"."+c]=s[c]}),s},y1=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},Ud=function t(e,n,r){var i=n>=1?n:1,s=(r||(e?.3:.45))/(n<1?n:1),o=s/Sd*(Math.asin(1/i)||0),l=function(d){return d===1?1:i*Math.pow(2,-10*d)*zN((d-o)*s)+1},c=e==="out"?l:e==="in"?function(u){return 1-l(1-u)}:y1(l);return s=Sd/s,c.config=function(u,d){return t(e,u,d)},c},Wd=function t(e,n){n===void 0&&(n=1.70158);var r=function(o){return o?--o*o*((n+1)*o+n)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:y1(r);return i.config=function(s){return t(e,s)},i};gn("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;yi(t+",Power"+(n-1),e?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})}),ot.Linear.easeNone=ot.none=ot.Linear.easeIn,yi("Elastic",Ud("in"),Ud("out"),Ud()),(function(t,e){var n=1/e,r=2*n,i=2.5*n,s=function(l){return l<n?t*l*l:l<r?t*Math.pow(l-1.5/e,2)+.75:l<i?t*(l-=2.25/e)*l+.9375:t*Math.pow(l-2.625/e,2)+.984375};yi("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75),yi("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)}),yi("Circ",function(t){return-(Eb(1-t*t)-1)}),yi("Sine",function(t){return t===1?1:-BN(t*FN)+1}),yi("Back",Wd("in"),Wd("out"),Wd()),ot.SteppedEase=ot.steps=kn.SteppedEase={config:function(e,n){e===void 0&&(e=1);var r=1/e,i=e+(n?0:1),s=n?1:0,o=1-bt;return function(l){return((i*Na(0,o,l)|0)+s)*r}}},Qi.ease=ot["quad.out"],gn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return Ed+=t+","+t+"Params,"});var b1=function(e,n){this.id=$N++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:Wb,this.set=n?n.getSetter:qd},Ia=(function(){function t(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,is(this,+n.duration,1,1),this.data=n.data,kt&&(this._ctx=kt,kt.data.push(this)),Da||jn.wake()}var e=t.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,is(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(as(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Tl(this,r),!s._dp||s.parent||Jb(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&dr(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===bt||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Gb(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+Xb(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+Xb(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?rs(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-bt?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?Ml(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-bt?0:this._rts,this.totalTime(Na(-Math.abs(this._delay),this.totalDuration(),s),i!==!1),jl(this),YN(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(as(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==bt&&(this._tTime-=bt)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&dr(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(mn(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ml(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=RN);var i=qt;return qt=r,Fd(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),qt=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,e1(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,e1(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime($n(this,r),mn(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,mn(i)),this._dur||(this._zTime=-bt),this},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-bt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-bt,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-bt)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=jt(r)?r:Vb,l=function(){var u=i.then;i.then=null,jt(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=u),s(o),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?l():i._prom=l})},e.kill=function(){ja(this)},t})();Nn(Ia.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-bt,_prom:0,_ps:!1,_rts:1});var Xt=(function(t){Ab(e,t);function e(r,i){var s;return r===void 0&&(r={}),s=t.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=mn(r.sortChildren),Nt&&dr(r.parent||Nt,Sr(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&Kb(Sr(s),r.scrollTrigger),s}var n=e.prototype;return n.to=function(i,s,o){return Ca(0,arguments,this),this},n.from=function(i,s,o){return Ca(1,arguments,this),this},n.fromTo=function(i,s,o,l){return Ca(2,arguments,this),this},n.set=function(i,s,o){return s.duration=0,s.parent=this,ka(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Lt(i,s,$n(this,o),1),this},n.call=function(i,s,o){return dr(this,Lt.delayedCall(0,i,s),o)},n.staggerTo=function(i,s,o,l,c,u,d){return o.duration=s,o.stagger=o.stagger||l,o.onComplete=u,o.onCompleteParams=d,o.parent=this,new Lt(i,o,$n(this,c)),this},n.staggerFrom=function(i,s,o,l,c,u,d){return o.runBackwards=1,ka(o).immediateRender=mn(o.immediateRender),this.staggerTo(i,s,o,l,c,u,d)},n.staggerFromTo=function(i,s,o,l,c,u,d,f){return l.startAt=o,ka(l).immediateRender=mn(l.immediateRender),this.staggerTo(i,s,l,c,u,d,f)},n.render=function(i,s,o){var l=this._time,c=this._dirty?this.totalDuration():this._tDur,u=this._dur,d=i<=0?0:Ft(i),f=this._zTime<0!=i<0&&(this._initted||!u),p,h,g,m,y,w,M,j,v,b,_,N;if(this!==Nt&&d>c&&i>=0&&(d=c),d!==this._tTime||o||f){if(l!==this._time&&u&&(d+=this._time-l,i+=this._time-l),p=d,v=this._start,j=this._ts,w=!j,f&&(u||(l=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(_=this._yoyo,y=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(y*100+i,s,o);if(p=Ft(d%y),d===c?(m=this._repeat,p=u):(b=Ft(d/y),m=~~b,m&&m===b&&(p=u,m--),p>u&&(p=u)),b=rs(this._tTime,y),!l&&this._tTime&&b!==m&&this._tTime-b*y-this._dur<=0&&(b=m),_&&m&1&&(p=u-p,N=1),m!==b&&!this._lock){var C=_&&b&1,x=C===(_&&m&1);if(m<b&&(C=!C),l=C?0:d%u?u:d,this._lock=1,this.render(l||(N?0:Ft(m*y)),s,!u)._lock=0,this._tTime=d,!s&&this.parent&&Mn(this,"onRepeat"),this.vars.repeatRefresh&&!N&&(this.invalidate()._lock=1),l&&l!==this._time||w!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,c=this._tDur,x&&(this._lock=2,l=C?u:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!N&&this.invalidate()),this._lock=0,!this._ts&&!w)return this;g1(this,N)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(M=XN(this,Ft(l),Ft(p)),M&&(d-=p-(p=M._start))),this._tTime=d,this._time=p,this._act=!j,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,l=0),!l&&d&&!s&&!b&&(Mn(this,"onStart"),this._tTime!==d))return this;if(p>=l&&i>=0)for(h=this._first;h;){if(g=h._next,(h._act||p>=h._start)&&h._ts&&M!==h){if(h.parent!==this)return this.render(i,s,o);if(h.render(h._ts>0?(p-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(p-h._start)*h._ts,s,o),p!==this._time||!this._ts&&!w){M=0,g&&(d+=this._zTime=-bt);break}}h=g}else{h=this._last;for(var k=i<0?i:p;h;){if(g=h._prev,(h._act||k<=h._end)&&h._ts&&M!==h){if(h.parent!==this)return this.render(i,s,o);if(h.render(h._ts>0?(k-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(k-h._start)*h._ts,s,o||qt&&Fd(h)),p!==this._time||!this._ts&&!w){M=0,g&&(d+=this._zTime=k?-bt:bt);break}}h=g}}if(M&&!s&&(this.pause(),M.render(p>=l?0:-bt)._zTime=p>=l?1:-1,this._ts))return this._start=v,jl(this),this.render(i,s,o);this._onUpdate&&!s&&Mn(this,"onUpdate",!0),(d===c&&this._tTime>=this.totalDuration()||!d&&l)&&(v===this._start||Math.abs(j)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(d===c&&this._ts>0||!d&&this._ts<0)&&Hr(this,1),!s&&!(i<0&&!l)&&(d||l||!c)&&(Mn(this,d===c&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(i,s){var o=this;if(kr(s)||(s=$n(this,s,i)),!(i instanceof Ia)){if(Qt(i))return i.forEach(function(l){return o.add(l,s)}),this;if(Gt(i))return this.addLabel(i,s);if(jt(i))i=Lt.delayedCall(0,i);else return this}return this!==i?dr(this,i,s):this},n.getChildren=function(i,s,o,l){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),l===void 0&&(l=-Fn);for(var c=[],u=this._first;u;)u._start>=l&&(u instanceof Lt?s&&c.push(u):(o&&c.push(u),i&&c.push.apply(c,u.getChildren(!0,s,o)))),u=u._next;return c},n.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},n.remove=function(i){return Gt(i)?this.removeLabel(i):jt(i)?this.killTweensOf(i):(i.parent===this&&Nl(this,i),i===this._recent&&(this._recent=this._last),mi(this))},n.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ft(jn.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),t.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},n.addLabel=function(i,s){return this.labels[i]=$n(this,s),this},n.removeLabel=function(i){return delete this.labels[i],this},n.addPause=function(i,s,o){var l=Lt.delayedCall(0,s||Sa,o);return l.data="isPause",this._hasPause=1,dr(this,l,$n(this,i))},n.removePause=function(i){var s=this._first;for(i=$n(this,i);s;)s._start===i&&s.data==="isPause"&&Hr(s),s=s._next},n.killTweensOf=function(i,s,o){for(var l=this.getTweensOf(i,o),c=l.length;c--;)Wr!==l[c]&&l[c].kill(i,s);return this},n.getTweensOf=function(i,s){for(var o=[],l=Bn(i),c=this._first,u=kr(s),d;c;)c instanceof Lt?UN(c._targets,l)&&(u?(!Wr||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&o.push(c):(d=c.getTweensOf(l,s)).length&&o.push.apply(o,d),c=c._next;return o},n.tweenTo=function(i,s){s=s||{};var o=this,l=$n(o,i),c=s,u=c.startAt,d=c.onStart,f=c.onStartParams,p=c.immediateRender,h,g=Lt.to(o,Nn({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:s.duration||Math.abs((l-(u&&"time"in u?u.time:o._time))/o.timeScale())||bt,onStart:function(){if(o.pause(),!h){var y=s.duration||Math.abs((l-(u&&"time"in u?u.time:o._time))/o.timeScale());g._dur!==y&&is(g,y,0,1).render(g._time,!0,!0),h=1}d&&d.apply(g,f||[])}},s));return p?g.render(0):g},n.tweenFromTo=function(i,s,o){return this.tweenTo(s,Nn({startAt:{time:$n(this,i)}},o))},n.recent=function(){return this._recent},n.nextLabel=function(i){return i===void 0&&(i=this._time),l1(this,$n(this,i))},n.previousLabel=function(i){return i===void 0&&(i=this._time),l1(this,$n(this,i),1)},n.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+bt)},n.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var l=this._first,c=this.labels,u;l;)l._start>=o&&(l._start+=i,l._end+=i),l=l._next;if(s)for(u in c)c[u]>=o&&(c[u]+=i);return mi(this)},n.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return t.prototype.invalidate.call(this,i)},n.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),mi(this)},n.totalDuration=function(i){var s=0,o=this,l=o._last,c=Fn,u,d,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(f=o.parent;l;)u=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>c&&o._sort&&l._ts&&!o._lock?(o._lock=1,dr(o,l,d-l._delay,1)._lock=0):c=d,d<0&&l._ts&&(s-=d,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=d/o._ts,o._time-=d,o._tTime-=d),o.shiftChildren(-d,!1,-1/0),c=0),l._end>s&&l._ts&&(s=l._end),l=u;is(o,o===Nt&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(Nt._ts&&(Gb(Nt,Ml(i,Nt)),Rb=jn.frame),jn.frame>=Ub){Ub+=Sn.autoSleep||120;var s=Nt._first;if((!s||!s._ts)&&Sn.autoSleep&&jn._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||jn.sleep()}}},e})(Ia);Nn(Xt.prototype,{_lock:0,_hasPause:0,_forcing:0});var fM=function(e,n,r,i,s,o,l){var c=new yn(this._pt,e,n,0,1,k1,null,s),u=0,d=0,f,p,h,g,m,y,w,M;for(c.b=r,c.e=i,r+="",i+="",(w=~i.indexOf("random("))&&(i=Ma(i)),o&&(M=[r,i],o(M,e,n),r=M[0],i=M[1]),p=r.match(Md)||[];f=Md.exec(i);)g=f[0],m=i.substring(u,f.index),h?h=(h+1)%5:m.substr(-5)==="rgba("&&(h=1),g!==p[d++]&&(y=parseFloat(p[d-1])||0,c._pt={_next:c._pt,p:m||d===1?m:",",s:y,c:g.charAt(1)==="="?ts(y,g)-y:parseFloat(g)-y,m:h&&h<4?Math.round:0},u=Md.lastIndex);return c.c=u<i.length?i.substring(u,i.length):"",c.fp=l,($b.test(i)||w)&&(c.e=0),this._pt=c,c},Gd=function(e,n,r,i,s,o,l,c,u,d){jt(i)&&(i=i(s||0,e,o));var f=e[n],p=r!=="get"?r:jt(f)?u?e[n.indexOf("set")||!jt(e["get"+n.substr(3)])?n:"get"+n.substr(3)](u):e[n]():f,h=jt(f)?u?yM:w1:Zd,g;if(Gt(i)&&(~i.indexOf("random(")&&(i=Ma(i)),i.charAt(1)==="="&&(g=ts(p,i)+(en(p)||0),(g||g===0)&&(i=g))),!d||p!==i||Yd)return!isNaN(p*i)&&i!==""?(g=new yn(this._pt,e,n,+p||0,i-(p||0),typeof f=="boolean"?xM:S1,0,h),u&&(g.fp=u),l&&g.modifier(l,this,e),this._pt=g):(!f&&!(n in e)&&Dd(n,i),fM.call(this,e,n,p,i,h,c||Sn.stringFilter,u))},hM=function(e,n,r,i,s){if(jt(e)&&(e=La(e,s,n,r,i)),!cr(e)||e.style&&e.nodeType||Qt(e)||Pb(e))return Gt(e)?La(e,s,n,r,i):e;var o={},l;for(l in e)o[l]=La(e[l],s,n,r,i);return o},x1=function(e,n,r,i,s,o){var l,c,u,d;if(Cn[e]&&(l=new Cn[e]).init(s,l.rawVars?n[e]:hM(n[e],i,s,o,r),r,i,o)!==!1&&(r._pt=c=new yn(r._pt,s,e,0,1,l.render,l,0,l.priority),r!==ss))for(u=r._ptLookup[r._targets.indexOf(s)],d=l._props.length;d--;)u[l._props[d]]=c;return l},Wr,Yd,Vd=function t(e,n,r){var i=e.vars,s=i.ease,o=i.startAt,l=i.immediateRender,c=i.lazy,u=i.onUpdate,d=i.runBackwards,f=i.yoyoEase,p=i.keyframes,h=i.autoRevert,g=e._dur,m=e._startAt,y=e._targets,w=e.parent,M=w&&w.data==="nested"?w.vars.targets:y,j=e._overwrite==="auto"&&!wd,v=e.timeline,b,_,N,C,x,k,F,D,P,I,L,E,z;if(v&&(!p||!s)&&(s="none"),e._ease=gi(s,Qi.ease),e._yEase=f?m1(gi(f===!0?s:f,Qi.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!v&&!!i.runBackwards,!v||p&&!i.stagger){if(D=y[0]?pi(y[0]).harness:0,E=D&&i[D.prop],b=Cl(i,Id),m&&(m._zTime<0&&m.progress(1),n<0&&d&&l&&!h?m.render(-1,!0):m.revert(d&&g?wl:HN),m._lazy=0),o){if(Hr(e._startAt=Lt.set(y,Nn({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!m&&mn(c),startAt:null,delay:0,onUpdate:u&&function(){return Mn(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(qt||!l&&!h)&&e._startAt.revert(wl),l&&g&&n<=0&&r<=0){n&&(e._zTime=n);return}}else if(d&&g&&!m){if(n&&(l=!1),N=Nn({overwrite:!1,data:"isFromStart",lazy:l&&!m&&mn(c),immediateRender:l,stagger:0,parent:w},b),E&&(N[D.prop]=E),Hr(e._startAt=Lt.set(y,N)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(qt?e._startAt.revert(wl):e._startAt.render(-1,!0)),e._zTime=n,!l)t(e._startAt,bt,bt);else if(!n)return}for(e._pt=e._ptCache=0,c=g&&mn(c)||c&&!g,_=0;_<y.length;_++){if(x=y[_],F=x._gsap||Pd(y)[_]._gsap,e._ptLookup[_]=I={},Ld[F.id]&&Or.length&&kl(),L=M===y?_:M.indexOf(x),D&&(P=new D).init(x,E||b,e,L,M)!==!1&&(e._pt=C=new yn(e._pt,x,P.name,0,1,P.render,P,0,P.priority),P._props.forEach(function(G){I[G]=C}),P.priority&&(k=1)),!D||E)for(N in b)Cn[N]&&(P=x1(N,b,e,L,x,M))?P.priority&&(k=1):I[N]=C=Gd.call(e,x,N,"get",b[N],L,M,0,i.stringFilter);e._op&&e._op[_]&&e.kill(x,e._op[_]),j&&e._pt&&(Wr=e,Nt.killTweensOf(x,I,e.globalTime(n)),z=!e.parent,Wr=0),e._pt&&c&&(Ld[F.id]=1)}k&&C1(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!z,p&&n<=0&&v.render(Fn,!0,!0)},pM=function(e,n,r,i,s,o,l,c){var u=(e._pt&&e._ptCache||(e._ptCache={}))[n],d,f,p,h;if(!u)for(u=e._ptCache[n]=[],p=e._ptLookup,h=e._targets.length;h--;){if(d=p[h][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return Yd=1,e.vars[n]="+=0",Vd(e,l),Yd=0,c?wa(n+" not eligible for reset"):1;u.push(d)}for(h=u.length;h--;)f=u[h],d=f._pt||f,d.s=(i||i===0)&&!s?i:d.s+(i||0)+o*d.c,d.c=r-d.s,f.e&&(f.e=It(r)+en(f.e)),f.b&&(f.b=d.s+en(f.b))},mM=function(e,n){var r=e[0]?pi(e[0]).harness:0,i=r&&r.aliases,s,o,l,c;if(!i)return n;s=ns({},n);for(o in i)if(o in s)for(c=i[o].split(","),l=c.length;l--;)s[c[l]]=s[o];return s},gM=function(e,n,r,i){var s=n.ease||i||"power1.inOut",o,l;if(Qt(n))l=r[e]||(r[e]=[]),n.forEach(function(c,u){return l.push({t:u/(n.length-1)*100,v:c,e:s})});else for(o in n)l=r[o]||(r[o]=[]),o==="ease"||l.push({t:parseFloat(e),v:n[o],e:s})},La=function(e,n,r,i,s){return jt(e)?e.call(n,r,i,s):Gt(e)&&~e.indexOf("random(")?Ma(e):e},v1=Ed+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_1={};gn(v1+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return _1[t]=1});var Lt=(function(t){Ab(e,t);function e(r,i,s,o){var l;typeof i=="number"&&(s.duration=i,i=s,s=null),l=t.call(this,o?i:ka(i))||this;var c=l.vars,u=c.duration,d=c.delay,f=c.immediateRender,p=c.stagger,h=c.overwrite,g=c.keyframes,m=c.defaults,y=c.scrollTrigger,w=c.yoyoEase,M=i.parent||Nt,j=(Qt(r)||Pb(r)?kr(r[0]):"length"in i)?[r]:Bn(r),v,b,_,N,C,x,k,F;if(l._targets=j.length?Pd(j):wa("GSAP target "+r+" not found. https://gsap.com",!Sn.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=h,g||p||vl(u)||vl(d)){if(i=l.vars,v=l.timeline=new Xt({data:"nested",defaults:m||{},targets:M&&M.data==="nested"?M.vars.targets:j}),v.kill(),v.parent=v._dp=Sr(l),v._start=0,p||vl(u)||vl(d)){if(N=j.length,k=p&&r1(p),cr(p))for(C in p)~v1.indexOf(C)&&(F||(F={}),F[C]=p[C]);for(b=0;b<N;b++)_=Cl(i,_1),_.stagger=0,w&&(_.yoyoEase=w),F&&ns(_,F),x=j[b],_.duration=+La(u,Sr(l),b,x,j),_.delay=(+La(d,Sr(l),b,x,j)||0)-l._delay,!p&&N===1&&_.delay&&(l._delay=d=_.delay,l._start+=d,_.delay=0),v.to(x,_,k?k(b,x,j):0),v._ease=ot.none;v.duration()?u=d=0:l.timeline=0}else if(g){ka(Nn(v.vars.defaults,{ease:"none"})),v._ease=gi(g.ease||i.ease||"none");var D=0,P,I,L;if(Qt(g))g.forEach(function(E){return v.to(j,E,">")}),v.duration();else{_={};for(C in g)C==="ease"||C==="easeEach"||gM(C,g[C],_,g.easeEach);for(C in _)for(P=_[C].sort(function(E,z){return E.t-z.t}),D=0,b=0;b<P.length;b++)I=P[b],L={ease:I.e,duration:(I.t-(b?P[b-1].t:0))/100*u},L[C]=I.v,v.to(j,L,D),D+=L.duration;v.duration()<u&&v.to({},{duration:u-v.duration()})}}u||l.duration(u=v.duration())}else l.timeline=0;return h===!0&&!wd&&(Wr=Sr(l),Nt.killTweensOf(j),Wr=0),dr(M,Sr(l),s),i.reversed&&l.reverse(),i.paused&&l.paused(!0),(f||!u&&!g&&l._start===Ft(M._time)&&mn(f)&&VN(Sr(l))&&M.data!=="nested")&&(l._tTime=-bt,l.render(Math.max(0,-d)||0)),y&&Kb(Sr(l),y),l}var n=e.prototype;return n.render=function(i,s,o){var l=this._time,c=this._tDur,u=this._dur,d=i<0,f=i>c-bt&&!d?c:i<bt?0:i,p,h,g,m,y,w,M,j,v;if(!u)qN(this,i,s,o);else if(f!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(p=f,j=this.timeline,this._repeat){if(m=u+this._rDelay,this._repeat<-1&&d)return this.totalTime(m*100+i,s,o);if(p=Ft(f%m),f===c?(g=this._repeat,p=u):(y=Ft(f/m),g=~~y,g&&g===y?(p=u,g--):p>u&&(p=u)),w=this._yoyo&&g&1,w&&(v=this._yEase,p=u-p),y=rs(this._tTime,m),p===l&&!o&&this._initted&&g===y)return this._tTime=f,this;g!==y&&(j&&this._yEase&&g1(j,w),this.vars.repeatRefresh&&!w&&!this._lock&&p!==m&&this._initted&&(this._lock=o=1,this.render(Ft(m*g),!0).invalidate()._lock=0))}if(!this._initted){if(Qb(this,d?i:p,o,s,f))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&g!==y))return this;if(u!==this._dur)return this.render(i,s,o)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=M=(v||this._ease)(p/u),this._from&&(this.ratio=M=1-M),!l&&f&&!s&&!y&&(Mn(this,"onStart"),this._tTime!==f))return this;for(h=this._pt;h;)h.r(M,h.d),h=h._next;j&&j.render(i<0?i:j._dur*j._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(d&&$d(this,i,s,o),Mn(this,"onUpdate")),this._repeat&&g!==y&&this.vars.onRepeat&&!s&&this.parent&&Mn(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(d&&!this._onUpdate&&$d(this,i,!0,!0),(i||!u)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Hr(this,1),!s&&!(d&&!l)&&(f||l||w)&&(Mn(this,f===c?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),t.prototype.invalidate.call(this,i)},n.resetTo=function(i,s,o,l,c){Da||jn.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||Vd(this,u),d=this._ease(u/this._dur),pM(this,i,s,o,l,d,u,c)?this.resetTo(i,s,o,l,1):(Tl(this,0),this.parent||qb(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?ja(this):this.scrollTrigger&&this.scrollTrigger.kill(!!qt),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Wr&&Wr.vars.overwrite!==!0)._first||ja(this),this.parent&&o!==this.timeline.totalDuration()&&is(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,c=i?Bn(i):l,u=this._ptLookup,d=this._pt,f,p,h,g,m,y,w;if((!s||s==="all")&&GN(l,c))return s==="all"&&(this._pt=0),ja(this);for(f=this._op=this._op||[],s!=="all"&&(Gt(s)&&(m={},gn(s,function(M){return m[M]=1}),s=m),s=mM(l,s)),w=l.length;w--;)if(~c.indexOf(l[w])){p=u[w],s==="all"?(f[w]=s,g=p,h={}):(h=f[w]=f[w]||{},g=s);for(m in g)y=p&&p[m],y&&((!("kill"in y.d)||y.d.kill(m)===!0)&&Nl(this,y,"_pt"),delete p[m]),h!=="all"&&(h[m]=1)}return this._initted&&!this._pt&&d&&ja(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Ca(1,arguments)},e.delayedCall=function(i,s,o,l){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},e.fromTo=function(i,s,o){return Ca(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return Nt.killTweensOf(i,s,o)},e})(Ia);Nn(Lt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),gn("staggerTo,staggerFrom,staggerFromTo",function(t){Lt[t]=function(){var e=new Xt,n=zd.call(arguments,0);return n.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,n)}});var Zd=function(e,n,r){return e[n]=r},w1=function(e,n,r){return e[n](r)},yM=function(e,n,r,i){return e[n](i.fp,r)},bM=function(e,n,r){return e.setAttribute(n,r)},qd=function(e,n){return jt(e[n])?w1:kd(e[n])&&e.setAttribute?bM:Zd},S1=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},xM=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},k1=function(e,n){var r=n._pt,i="";if(!e&&n.b)i=n.b;else if(e===1&&n.e)i=n.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=n.c}n.set(n.t,n.p,i,n)},Xd=function(e,n){for(var r=n._pt;r;)r.r(e,r.d),r=r._next},vM=function(e,n,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,n,r),s=o},_M=function(e){for(var n=this._pt,r,i;n;)i=n._next,n.p===e&&!n.op||n.op===e?Nl(this,n,"_pt"):n.dep||(r=1),n=i;return!r},wM=function(e,n,r,i){i.mSet(e,n,i.m.call(i.tween,r,i.mt),i)},C1=function(e){for(var n=e._pt,r,i,s,o;n;){for(r=n._next,i=s;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:o)?n._prev._next=n:s=n,(n._next=i)?i._prev=n:o=n,n=r}e._pt=s},yn=(function(){function t(n,r,i,s,o,l,c,u,d){this.t=r,this.s=s,this.c=o,this.p=i,this.r=l||S1,this.d=c||this,this.set=u||Zd,this.pr=d||0,this._next=n,n&&(n._prev=this)}var e=t.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=wM,this.m=r,this.mt=s,this.tween=i},t})();gn(Ed+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return Id[t]=1}),kn.TweenMax=kn.TweenLite=Lt,kn.TimelineLite=kn.TimelineMax=Xt,Nt=new Xt({sortChildren:!1,defaults:Qi,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Sn.stringFilter=p1;var bi=[],Dl={},SM=[],N1=0,kM=0,Jd=function(e){return(Dl[e]||SM).map(function(n){return n()})},Kd=function(){var e=Date.now(),n=[];e-N1>2&&(Jd("matchMediaInit"),bi.forEach(function(r){var i=r.queries,s=r.conditions,o,l,c,u;for(l in i)o=ur.matchMedia(i[l]).matches,o&&(c=1),o!==s[l]&&(s[l]=o,u=1);u&&(r.revert(),c&&n.push(r))}),Jd("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),N1=e,Jd("matchMedia"))},M1=(function(){function t(n,r){this.selector=r&&Od(r),this.data=[],this._r=[],this.isReverted=!1,this.id=kM++,n&&this.add(n)}var e=t.prototype;return e.add=function(r,i,s){jt(r)&&(s=i,i=r,r=jt);var o=this,l=function(){var u=kt,d=o.selector,f;return u&&u!==o&&u.data.push(o),s&&(o.selector=Od(s)),kt=o,f=i.apply(o,arguments),jt(f)&&o._r.push(f),kt=u,o.selector=d,o.isReverted=!1,f};return o.last=l,r===jt?l(o,function(c){return o.add(null,c)}):r?o[r]=l:l},e.ignore=function(r){var i=kt;kt=null,r(this),kt=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof t?r.push.apply(r,i.getTweens()):i instanceof Lt&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?(function(){for(var l=s.getTweens(),c=s.data.length,u;c--;)u=s.data[c],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,f){return f.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),c=s.data.length;c--;)u=s.data[c],u instanceof Xt?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof Lt)&&u.revert&&u.revert(r);s._r.forEach(function(d){return d(r,s)}),s.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),i)for(var o=bi.length;o--;)bi[o].id===this.id&&bi.splice(o,1)},e.revert=function(r){this.kill(r||{})},t})(),CM=(function(){function t(n){this.contexts=[],this.scope=n,kt&&kt.data.push(this)}var e=t.prototype;return e.add=function(r,i,s){cr(r)||(r={matches:r});var o=new M1(0,s||this.scope),l=o.conditions={},c,u,d;kt&&!o.selector&&(o.selector=kt.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(u in r)u==="all"?d=1:(c=ur.matchMedia(r[u]),c&&(bi.indexOf(o)<0&&bi.push(o),(l[u]=c.matches)&&(d=1),c.addListener?c.addListener(Kd):c.addEventListener("change",Kd)));return d&&i(o,function(f){return o.add(null,f)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},t})(),Il={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(i){return u1(i)})},timeline:function(e){return new Xt(e)},getTweensOf:function(e,n){return Nt.getTweensOf(e,n)},getProperty:function(e,n,r,i){Gt(e)&&(e=Bn(e)[0]);var s=pi(e||{}).get,o=r?Vb:Yb;return r==="native"&&(r=""),e&&(n?o((Cn[n]&&Cn[n].get||s)(e,n,r,i)):function(l,c,u){return o((Cn[l]&&Cn[l].get||s)(e,l,c,u))})},quickSetter:function(e,n,r){if(e=Bn(e),e.length>1){var i=e.map(function(d){return bn.quickSetter(d,n,r)}),s=i.length;return function(d){for(var f=s;f--;)i[f](d)}}e=e[0]||{};var o=Cn[n],l=pi(e),c=l.harness&&(l.harness.aliases||{})[n]||n,u=o?function(d){var f=new o;ss._pt=0,f.init(e,r?d+r:d,ss,0,[e]),f.render(1,f),ss._pt&&Xd(1,ss)}:l.set(e,c);return o?u:function(d){return u(e,c,r?d+r:d,l,1)}},quickTo:function(e,n,r){var i,s=bn.to(e,Nn((i={},i[n]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),o=function(c,u,d){return s.resetTo(n,c,u,d)};return o.tween=s,o},isTweening:function(e){return Nt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=gi(e.ease,Qi.ease)),Zb(Qi,e||{})},config:function(e){return Zb(Sn,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(l){return l&&!Cn[l]&&!kn[l]&&wa(n+" effect requires "+l+" plugin.")}),Ad[n]=function(l,c,u){return r(Bn(l),Nn(c||{},s),u)},o&&(Xt.prototype[n]=function(l,c,u){return this.add(Ad[n](l,cr(c)?c:(u=c)&&{},this),u)})},registerEase:function(e,n){ot[e]=gi(n)},parseEase:function(e,n){return arguments.length?gi(e,n):ot},getById:function(e){return Nt.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var r=new Xt(e),i,s;for(r.smoothChildTiming=mn(e.smoothChildTiming),Nt.remove(r),r._dp=0,r._time=r._tTime=Nt._time,i=Nt._first;i;)s=i._next,(n||!(!i._dur&&i instanceof Lt&&i.vars.onComplete===i._targets[0]))&&dr(r,i,i._start-i._delay),i=s;return dr(Nt,r,0),r},context:function(e,n){return e?new M1(e,n):kt},matchMedia:function(e){return new CM(e)},matchMediaRefresh:function(){return bi.forEach(function(e){var n=e.conditions,r,i;for(i in n)n[i]&&(n[i]=!1,r=1);r&&e.revert()})||Kd()},addEventListener:function(e,n){var r=Dl[e]||(Dl[e]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(e,n){var r=Dl[e],i=r&&r.indexOf(n);i>=0&&r.splice(i,1)},utils:{wrap:rM,wrapYoyo:iM,distribute:r1,random:s1,snap:i1,normalize:nM,getUnit:en,clamp:KN,splitColor:d1,toArray:Bn,selector:Od,mapRange:o1,pipe:eM,unitize:tM,interpolate:sM,shuffle:n1},install:Ob,effects:Ad,ticker:jn,updateRoot:Xt.updateRoot,plugins:Cn,globalTimeline:Nt,core:{PropTween:yn,globals:Hb,Tween:Lt,Timeline:Xt,Animation:Ia,getCache:pi,_removeLinkedListItem:Nl,reverting:function(){return qt},context:function(e){return e&&kt&&(kt.data.push(e),e._ctx=kt),kt},suppressOverwrites:function(e){return wd=e}}};gn("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Il[t]=Lt[t]}),jn.add(Xt.updateRoot),ss=Il.to({},{duration:0});var NM=function(e,n){for(var r=e._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},MM=function(e,n){var r=e._targets,i,s,o;for(i in n)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=NM(o,i)),o&&o.modifier&&o.modifier(n[i],e,r[s],i))},Qd=function(e,n){return{name:e,headless:1,rawVars:1,init:function(i,s,o){o._onInit=function(l){var c,u;if(Gt(s)&&(c={},gn(s,function(d){return c[d]=1}),s=c),n){c={};for(u in s)c[u]=n(s[u]);s=c}MM(l,s)}}}},bn=Il.registerPlugin({name:"attr",init:function(e,n,r,i,s){var o,l,c;this.tween=r;for(o in n)c=e.getAttribute(o)||"",l=this.add(e,"setAttribute",(c||0)+"",n[o],i,s,0,0,o),l.op=o,l.b=c,this._props.push(o)},render:function(e,n){for(var r=n._pt;r;)qt?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,n){for(var r=n.length;r--;)this.add(e,r,e[r]||0,n[r],0,0,0,0,0,1)}},Qd("roundProps",Hd),Qd("modifiers"),Qd("snap",i1))||Il;Lt.version=Xt.version=bn.version="3.13.0",zb=1,Cd()&&as();var jM=ot.Power0,TM=ot.Power1,DM=ot.Power2,IM=ot.Power3,LM=ot.Power4,AM=ot.Linear,EM=ot.Quad,PM=ot.Cubic,FM=ot.Quart,$M=ot.Quint,BM=ot.Strong,zM=ot.Elastic,OM=ot.Back,HM=ot.SteppedEase,RM=ot.Bounce,UM=ot.Sine,WM=ot.Expo,GM=ot.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var j1,Gr,os,ef,xi,T1,tf,YM=function(){return typeof window<"u"},Cr={},vi=180/Math.PI,ls=Math.PI/180,cs=Math.atan2,D1=1e8,nf=/([A-Z])/g,VM=/(left|right|width|margin|padding|x)/i,ZM=/[\s,\(]\S/,fr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},rf=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},qM=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},XM=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},JM=function(e,n){var r=n.s+n.c*e;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},I1=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},L1=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},KM=function(e,n,r){return e.style[n]=r},QM=function(e,n,r){return e.style.setProperty(n,r)},ej=function(e,n,r){return e._gsap[n]=r},tj=function(e,n,r){return e._gsap.scaleX=e._gsap.scaleY=r},nj=function(e,n,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},rj=function(e,n,r,i,s){var o=e._gsap;o[n]=r,o.renderTransform(s,o)},Mt="transform",xn=Mt+"Origin",ij=function t(e,n){var r=this,i=this.target,s=i.style,o=i._gsap;if(e in Cr&&s){if(this.tfm=this.tfm||{},e!=="transform")e=fr[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return r.tfm[l]=Nr(i,l)}):this.tfm[e]=o.x?o[e]:Nr(i,e),e===xn&&(this.tfm.zOrigin=o.zOrigin);else return fr.transform.split(",").forEach(function(l){return t.call(r,l,n)});if(this.props.indexOf(Mt)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(xn,n,"")),e=Mt}(s||n)&&this.props.push(e,n,s[e])},A1=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},sj=function(){var e=this.props,n=this.target,r=n.style,i=n._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?n[e[s]](e[s+2]):n[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(nf,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),s=tf(),(!s||!s.isStart)&&!r[Mt]&&(A1(r),i.zOrigin&&r[xn]&&(r[xn]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},E1=function(e,n){var r={target:e,props:[],revert:sj,save:ij};return e._gsap||bn.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(i){return r.save(i)}),r},P1,sf=function(e,n){var r=Gr.createElementNS?Gr.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Gr.createElement(e);return r&&r.style?r:Gr.createElement(e)},zn=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(nf,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,us(n)||n,1)||""},F1="O,Moz,ms,Ms,Webkit".split(","),us=function(e,n,r){var i=n||xi,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(F1[o]+e in s););return o<0?null:(o===3?"ms":o>=0?F1[o]:"")+e},af=function(){YM()&&window.document&&(j1=window,Gr=j1.document,os=Gr.documentElement,xi=sf("div")||{style:{}},sf("div"),Mt=us(Mt),xn=Mt+"Origin",xi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",P1=!!us("perspective"),tf=bn.core.reverting,ef=1)},$1=function(e){var n=e.ownerSVGElement,r=sf("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",r.appendChild(i),os.appendChild(r);try{s=i.getBBox()}catch{}return r.removeChild(i),os.removeChild(r),s},B1=function(e,n){for(var r=n.length;r--;)if(e.hasAttribute(n[r]))return e.getAttribute(n[r])},z1=function(e){var n,r;try{n=e.getBBox()}catch{n=$1(e),r=1}return n&&(n.width||n.height)||r||(n=$1(e)),n&&!n.width&&!n.x&&!n.y?{x:+B1(e,["x","cx","x1"])||0,y:+B1(e,["y","cy","y1"])||0,width:0,height:0}:n},O1=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&z1(e))},_i=function(e,n){if(n){var r=e.style,i;n in Cr&&n!==xn&&(n=Mt),r.removeProperty?(i=n.substr(0,2),(i==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(i==="--"?n:n.replace(nf,"-$1").toLowerCase())):r.removeAttribute(n)}},Yr=function(e,n,r,i,s,o){var l=new yn(e._pt,n,r,0,1,o?L1:I1);return e._pt=l,l.b=i,l.e=s,e._props.push(r),l},H1={deg:1,rad:1,turn:1},aj={grid:1,flex:1},Vr=function t(e,n,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",l=xi.style,c=VM.test(n),u=e.tagName.toLowerCase()==="svg",d=(u?"client":"offset")+(c?"Width":"Height"),f=100,p=i==="px",h=i==="%",g,m,y,w;if(i===o||!s||H1[i]||H1[o])return s;if(o!=="px"&&!p&&(s=t(e,n,r,"px")),w=e.getCTM&&O1(e),(h||o==="%")&&(Cr[n]||~n.indexOf("adius")))return g=w?e.getBBox()[c?"width":"height"]:e[d],It(h?s/g*f:s/100*g);if(l[c?"width":"height"]=f+(p?o:i),m=i!=="rem"&&~n.indexOf("adius")||i==="em"&&e.appendChild&&!u?e:e.parentNode,w&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===Gr||!m.appendChild)&&(m=Gr.body),y=m._gsap,y&&h&&y.width&&c&&y.time===jn.time&&!y.uncache)return It(s/y.width*f);if(h&&(n==="height"||n==="width")){var M=e.style[n];e.style[n]=f+i,g=e[d],M?e.style[n]=M:_i(e,n)}else(h||o==="%")&&!aj[zn(m,"display")]&&(l.position=zn(e,"position")),m===e&&(l.position="static"),m.appendChild(xi),g=xi[d],m.removeChild(xi),l.position="absolute";return c&&h&&(y=pi(m),y.time=jn.time,y.width=m[d]),It(p?g*s/f:g&&s?f/g*s:0)},Nr=function(e,n,r,i){var s;return ef||af(),n in fr&&n!=="transform"&&(n=fr[n],~n.indexOf(",")&&(n=n.split(",")[0])),Cr[n]&&n!=="transform"?(s=Ea(e,i),s=n!=="transformOrigin"?s[n]:s.svg?s.origin:Al(zn(e,xn))+" "+s.zOrigin+"px"):(s=e.style[n],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=Ll[n]&&Ll[n](e,n,r)||zn(e,n)||Wb(e,n)||(n==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?Vr(e,n,s,r)+r:s},oj=function(e,n,r,i){if(!r||r==="none"){var s=us(n,e,1),o=s&&zn(e,s,1);o&&o!==r?(n=s,r=o):n==="borderColor"&&(r=zn(e,"borderTopColor"))}var l=new yn(this._pt,e.style,n,0,1,k1),c=0,u=0,d,f,p,h,g,m,y,w,M,j,v,b;if(l.b=r,l.e=i,r+="",i+="",i.substring(0,6)==="var(--"&&(i=zn(e,i.substring(4,i.indexOf(")")))),i==="auto"&&(m=e.style[n],e.style[n]=i,i=zn(e,n)||i,m?e.style[n]=m:_i(e,n)),d=[r,i],p1(d),r=d[0],i=d[1],p=r.match(es)||[],b=i.match(es)||[],b.length){for(;f=es.exec(i);)y=f[0],M=i.substring(c,f.index),g?g=(g+1)%5:(M.substr(-5)==="rgba("||M.substr(-5)==="hsla(")&&(g=1),y!==(m=p[u++]||"")&&(h=parseFloat(m)||0,v=m.substr((h+"").length),y.charAt(1)==="="&&(y=ts(h,y)+v),w=parseFloat(y),j=y.substr((w+"").length),c=es.lastIndex-j.length,j||(j=j||Sn.units[n]||v,c===i.length&&(i+=j,l.e+=j)),v!==j&&(h=Vr(e,n,m,j)||0),l._pt={_next:l._pt,p:M||u===1?M:",",s:h,c:w-h,m:g&&g<4||n==="zIndex"?Math.round:0});l.c=c<i.length?i.substring(c,i.length):""}else l.r=n==="display"&&i==="none"?L1:I1;return $b.test(i)&&(l.e=0),this._pt=l,l},R1={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},lj=function(e){var n=e.split(" "),r=n[0],i=n[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),n[0]=R1[r]||r,n[1]=R1[i]||i,n.join(" ")},cj=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,i=r.style,s=n.u,o=r._gsap,l,c,u;if(s==="all"||s===!0)i.cssText="",c=1;else for(s=s.split(","),u=s.length;--u>-1;)l=s[u],Cr[l]&&(c=1,l=l==="transformOrigin"?xn:Mt),_i(r,l);c&&(_i(r,Mt),o&&(o.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Ea(r,1),o.uncache=1,A1(i)))}},Ll={clearProps:function(e,n,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new yn(e._pt,n,r,0,0,cj);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},Aa=[1,0,0,1,0,0],U1={},W1=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},G1=function(e){var n=zn(e,Mt);return W1(n)?Aa:n.substr(7).match(Fb).map(It)},of=function(e,n){var r=e._gsap||pi(e),i=e.style,s=G1(e),o,l,c,u;return r.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,s=[c.a,c.b,c.c,c.d,c.e,c.f],s.join(",")==="1,0,0,1,0,0"?Aa:s):(s===Aa&&!e.offsetParent&&e!==os&&!r.svg&&(c=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(u=1,l=e.nextElementSibling,os.appendChild(e)),s=G1(e),c?i.display=c:_i(e,"display"),u&&(l?o.insertBefore(e,l):o?o.appendChild(e):os.removeChild(e))),n&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},lf=function(e,n,r,i,s,o){var l=e._gsap,c=s||of(e,!0),u=l.xOrigin||0,d=l.yOrigin||0,f=l.xOffset||0,p=l.yOffset||0,h=c[0],g=c[1],m=c[2],y=c[3],w=c[4],M=c[5],j=n.split(" "),v=parseFloat(j[0])||0,b=parseFloat(j[1])||0,_,N,C,x;r?c!==Aa&&(N=h*y-g*m)&&(C=v*(y/N)+b*(-m/N)+(m*M-y*w)/N,x=v*(-g/N)+b*(h/N)-(h*M-g*w)/N,v=C,b=x):(_=z1(e),v=_.x+(~j[0].indexOf("%")?v/100*_.width:v),b=_.y+(~(j[1]||j[0]).indexOf("%")?b/100*_.height:b)),i||i!==!1&&l.smooth?(w=v-u,M=b-d,l.xOffset=f+(w*h+M*m)-w,l.yOffset=p+(w*g+M*y)-M):l.xOffset=l.yOffset=0,l.xOrigin=v,l.yOrigin=b,l.smooth=!!i,l.origin=n,l.originIsAbsolute=!!r,e.style[xn]="0px 0px",o&&(Yr(o,l,"xOrigin",u,v),Yr(o,l,"yOrigin",d,b),Yr(o,l,"xOffset",f,l.xOffset),Yr(o,l,"yOffset",p,l.yOffset)),e.setAttribute("data-svg-origin",v+" "+b)},Ea=function(e,n){var r=e._gsap||new b1(e);if("x"in r&&!n&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",l="deg",c=getComputedStyle(e),u=zn(e,xn)||"0",d,f,p,h,g,m,y,w,M,j,v,b,_,N,C,x,k,F,D,P,I,L,E,z,G,ee,T,K,O,B,J,$;return d=f=p=m=y=w=M=j=v=0,h=g=1,r.svg=!!(e.getCTM&&O1(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(i[Mt]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[Mt]!=="none"?c[Mt]:"")),i.scale=i.rotate=i.translate="none"),N=of(e,r.svg),r.svg&&(r.uncache?(G=e.getBBox(),u=r.xOrigin-G.x+"px "+(r.yOrigin-G.y)+"px",z=""):z=!n&&e.getAttribute("data-svg-origin"),lf(e,z||u,!!z||r.originIsAbsolute,r.smooth!==!1,N)),b=r.xOrigin||0,_=r.yOrigin||0,N!==Aa&&(F=N[0],D=N[1],P=N[2],I=N[3],d=L=N[4],f=E=N[5],N.length===6?(h=Math.sqrt(F*F+D*D),g=Math.sqrt(I*I+P*P),m=F||D?cs(D,F)*vi:0,M=P||I?cs(P,I)*vi+m:0,M&&(g*=Math.abs(Math.cos(M*ls))),r.svg&&(d-=b-(b*F+_*P),f-=_-(b*D+_*I))):($=N[6],B=N[7],T=N[8],K=N[9],O=N[10],J=N[11],d=N[12],f=N[13],p=N[14],C=cs($,O),y=C*vi,C&&(x=Math.cos(-C),k=Math.sin(-C),z=L*x+T*k,G=E*x+K*k,ee=$*x+O*k,T=L*-k+T*x,K=E*-k+K*x,O=$*-k+O*x,J=B*-k+J*x,L=z,E=G,$=ee),C=cs(-P,O),w=C*vi,C&&(x=Math.cos(-C),k=Math.sin(-C),z=F*x-T*k,G=D*x-K*k,ee=P*x-O*k,J=I*k+J*x,F=z,D=G,P=ee),C=cs(D,F),m=C*vi,C&&(x=Math.cos(C),k=Math.sin(C),z=F*x+D*k,G=L*x+E*k,D=D*x-F*k,E=E*x-L*k,F=z,L=G),y&&Math.abs(y)+Math.abs(m)>359.9&&(y=m=0,w=180-w),h=It(Math.sqrt(F*F+D*D+P*P)),g=It(Math.sqrt(E*E+$*$)),C=cs(L,E),M=Math.abs(C)>2e-4?C*vi:0,v=J?1/(J<0?-J:J):0),r.svg&&(z=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!W1(zn(e,Mt)),z&&e.setAttribute("transform",z))),Math.abs(M)>90&&Math.abs(M)<270&&(s?(h*=-1,M+=m<=0?180:-180,m+=m<=0?180:-180):(g*=-1,M+=M<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=f-((r.yPercent=f&&(!n&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=p+o,r.scaleX=It(h),r.scaleY=It(g),r.rotation=It(m)+l,r.rotationX=It(y)+l,r.rotationY=It(w)+l,r.skewX=M+l,r.skewY=j+l,r.transformPerspective=v+o,(r.zOrigin=parseFloat(u.split(" ")[2])||!n&&r.zOrigin||0)&&(i[xn]=Al(u)),r.xOffset=r.yOffset=0,r.force3D=Sn.force3D,r.renderTransform=r.svg?dj:P1?Y1:uj,r.uncache=0,r},Al=function(e){return(e=e.split(" "))[0]+" "+e[1]},cf=function(e,n,r){var i=en(n);return It(parseFloat(n)+parseFloat(Vr(e,"x",r+"px",i)))+i},uj=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,Y1(e,n)},wi="0deg",Pa="0px",Si=") ",Y1=function(e,n){var r=n||this,i=r.xPercent,s=r.yPercent,o=r.x,l=r.y,c=r.z,u=r.rotation,d=r.rotationY,f=r.rotationX,p=r.skewX,h=r.skewY,g=r.scaleX,m=r.scaleY,y=r.transformPerspective,w=r.force3D,M=r.target,j=r.zOrigin,v="",b=w==="auto"&&e&&e!==1||w===!0;if(j&&(f!==wi||d!==wi)){var _=parseFloat(d)*ls,N=Math.sin(_),C=Math.cos(_),x;_=parseFloat(f)*ls,x=Math.cos(_),o=cf(M,o,N*x*-j),l=cf(M,l,-Math.sin(_)*-j),c=cf(M,c,C*x*-j+j)}y!==Pa&&(v+="perspective("+y+Si),(i||s)&&(v+="translate("+i+"%, "+s+"%) "),(b||o!==Pa||l!==Pa||c!==Pa)&&(v+=c!==Pa||b?"translate3d("+o+", "+l+", "+c+") ":"translate("+o+", "+l+Si),u!==wi&&(v+="rotate("+u+Si),d!==wi&&(v+="rotateY("+d+Si),f!==wi&&(v+="rotateX("+f+Si),(p!==wi||h!==wi)&&(v+="skew("+p+", "+h+Si),(g!==1||m!==1)&&(v+="scale("+g+", "+m+Si),M.style[Mt]=v||"translate(0, 0)"},dj=function(e,n){var r=n||this,i=r.xPercent,s=r.yPercent,o=r.x,l=r.y,c=r.rotation,u=r.skewX,d=r.skewY,f=r.scaleX,p=r.scaleY,h=r.target,g=r.xOrigin,m=r.yOrigin,y=r.xOffset,w=r.yOffset,M=r.forceCSS,j=parseFloat(o),v=parseFloat(l),b,_,N,C,x;c=parseFloat(c),u=parseFloat(u),d=parseFloat(d),d&&(d=parseFloat(d),u+=d,c+=d),c||u?(c*=ls,u*=ls,b=Math.cos(c)*f,_=Math.sin(c)*f,N=Math.sin(c-u)*-p,C=Math.cos(c-u)*p,u&&(d*=ls,x=Math.tan(u-d),x=Math.sqrt(1+x*x),N*=x,C*=x,d&&(x=Math.tan(d),x=Math.sqrt(1+x*x),b*=x,_*=x)),b=It(b),_=It(_),N=It(N),C=It(C)):(b=f,C=p,_=N=0),(j&&!~(o+"").indexOf("px")||v&&!~(l+"").indexOf("px"))&&(j=Vr(h,"x",o,"px"),v=Vr(h,"y",l,"px")),(g||m||y||w)&&(j=It(j+g-(g*b+m*N)+y),v=It(v+m-(g*_+m*C)+w)),(i||s)&&(x=h.getBBox(),j=It(j+i/100*x.width),v=It(v+s/100*x.height)),x="matrix("+b+","+_+","+N+","+C+","+j+","+v+")",h.setAttribute("transform",x),M&&(h.style[Mt]=x)},fj=function(e,n,r,i,s){var o=360,l=Gt(s),c=parseFloat(s)*(l&&~s.indexOf("rad")?vi:1),u=c-i,d=i+u+"deg",f,p;return l&&(f=s.split("_")[1],f==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),f==="cw"&&u<0?u=(u+o*D1)%o-~~(u/o)*o:f==="ccw"&&u>0&&(u=(u-o*D1)%o-~~(u/o)*o)),e._pt=p=new yn(e._pt,n,r,i,u,qM),p.e=d,p.u="deg",e._props.push(r),p},V1=function(e,n){for(var r in n)e[r]=n[r];return e},hj=function(e,n,r){var i=V1({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,l,c,u,d,f,p,h,g;i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),o[Mt]=n,l=Ea(r,1),_i(r,Mt),r.setAttribute("transform",u)):(u=getComputedStyle(r)[Mt],o[Mt]=n,l=Ea(r,1),o[Mt]=u);for(c in Cr)u=i[c],d=l[c],u!==d&&s.indexOf(c)<0&&(h=en(u),g=en(d),f=h!==g?Vr(r,c,u,g):parseFloat(u),p=parseFloat(d),e._pt=new yn(e._pt,l,c,f,p-f,rf),e._pt.u=g||0,e._props.push(c));V1(l,i)};gn("padding,margin,Width,Radius",function(t,e){var n="Top",r="Right",i="Bottom",s="Left",o=(e<3?[n,r,i,s]:[n+s,n+r,i+r,i+s]).map(function(l){return e<2?t+l:"border"+l+t});Ll[e>1?"border"+t:t]=function(l,c,u,d,f){var p,h;if(arguments.length<4)return p=o.map(function(g){return Nr(l,g,u)}),h=p.join(" "),h.split(p[0]).length===5?p[0]:h;p=(d+"").split(" "),h={},o.forEach(function(g,m){return h[g]=p[m]=p[m]||p[(m-1)/2|0]}),l.init(c,h,f)}});var uf={name:"css",register:af,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,r,i,s){var o=this._props,l=e.style,c=r.vars.startAt,u,d,f,p,h,g,m,y,w,M,j,v,b,_,N,C;ef||af(),this.styles=this.styles||E1(e),C=this.styles.props,this.tween=r;for(m in n)if(m!=="autoRound"&&(d=n[m],!(Cn[m]&&x1(m,n,r,i,e,s)))){if(h=typeof d,g=Ll[m],h==="function"&&(d=d.call(r,i,e,s),h=typeof d),h==="string"&&~d.indexOf("random(")&&(d=Ma(d)),g)g(this,e,m,d,r)&&(N=1);else if(m.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(m)+"").trim(),d+="",Ur.lastIndex=0,Ur.test(u)||(y=en(u),w=en(d)),w?y!==w&&(u=Vr(e,m,u,w)+w):y&&(d+=y),this.add(l,"setProperty",u,d,i,s,0,0,m),o.push(m),C.push(m,0,l[m]);else if(h!=="undefined"){if(c&&m in c?(u=typeof c[m]=="function"?c[m].call(r,i,e,s):c[m],Gt(u)&&~u.indexOf("random(")&&(u=Ma(u)),en(u+"")||u==="auto"||(u+=Sn.units[m]||en(Nr(e,m))||""),(u+"").charAt(1)==="="&&(u=Nr(e,m))):u=Nr(e,m),p=parseFloat(u),M=h==="string"&&d.charAt(1)==="="&&d.substr(0,2),M&&(d=d.substr(2)),f=parseFloat(d),m in fr&&(m==="autoAlpha"&&(p===1&&Nr(e,"visibility")==="hidden"&&f&&(p=0),C.push("visibility",0,l.visibility),Yr(this,l,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),m!=="scale"&&m!=="transform"&&(m=fr[m],~m.indexOf(",")&&(m=m.split(",")[0]))),j=m in Cr,j){if(this.styles.save(m),h==="string"&&d.substring(0,6)==="var(--"&&(d=zn(e,d.substring(4,d.indexOf(")"))),f=parseFloat(d)),v||(b=e._gsap,b.renderTransform&&!n.parseTransform||Ea(e,n.parseTransform),_=n.smoothOrigin!==!1&&b.smooth,v=this._pt=new yn(this._pt,l,Mt,0,1,b.renderTransform,b,0,-1),v.dep=1),m==="scale")this._pt=new yn(this._pt,b,"scaleY",b.scaleY,(M?ts(b.scaleY,M+f):f)-b.scaleY||0,rf),this._pt.u=0,o.push("scaleY",m),m+="X";else if(m==="transformOrigin"){C.push(xn,0,l[xn]),d=lj(d),b.svg?lf(e,d,0,_,0,this):(w=parseFloat(d.split(" ")[2])||0,w!==b.zOrigin&&Yr(this,b,"zOrigin",b.zOrigin,w),Yr(this,l,m,Al(u),Al(d)));continue}else if(m==="svgOrigin"){lf(e,d,1,_,0,this);continue}else if(m in U1){fj(this,b,m,p,M?ts(p,M+d):d);continue}else if(m==="smoothOrigin"){Yr(this,b,"smooth",b.smooth,d);continue}else if(m==="force3D"){b[m]=d;continue}else if(m==="transform"){hj(this,d,e);continue}}else m in l||(m=us(m)||m);if(j||(f||f===0)&&(p||p===0)&&!ZM.test(d)&&m in l)y=(u+"").substr((p+"").length),f||(f=0),w=en(d)||(m in Sn.units?Sn.units[m]:y),y!==w&&(p=Vr(e,m,u,w)),this._pt=new yn(this._pt,j?b:l,m,p,(M?ts(p,M+f):f)-p,!j&&(w==="px"||m==="zIndex")&&n.autoRound!==!1?JM:rf),this._pt.u=w||0,y!==w&&w!=="%"&&(this._pt.b=u,this._pt.r=XM);else if(m in l)oj.call(this,e,m,u,M?M+d:d);else if(m in e)this.add(e,m,u||e[m],M?M+d:d,i,s);else if(m!=="parseTransform"){Dd(m,d);continue}j||(m in l?C.push(m,0,l[m]):typeof e[m]=="function"?C.push(m,2,e[m]()):C.push(m,1,u||e[m])),o.push(m)}}N&&C1(this)},render:function(e,n){if(n.tween._time||!tf())for(var r=n._pt;r;)r.r(e,r.d),r=r._next;else n.styles.revert()},get:Nr,aliases:fr,getSetter:function(e,n,r){var i=fr[n];return i&&i.indexOf(",")<0&&(n=i),n in Cr&&n!==xn&&(e._gsap.x||Nr(e,"x"))?r&&T1===r?n==="scale"?tj:ej:(T1=r||{})&&(n==="scale"?nj:rj):e.style&&!kd(e.style[n])?KM:~n.indexOf("-")?QM:qd(e,n)},core:{_removeProperty:_i,_getMatrix:of}};bn.utils.checkPrefix=us,bn.core.getStyleSaver=E1,(function(t,e,n,r){var i=gn(t+","+e+","+n,function(s){Cr[s]=1});gn(e,function(s){Sn.units[s]="deg",U1[s]=1}),fr[i[13]]=t+","+e,gn(r,function(s){var o=s.split(":");fr[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),gn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){Sn.units[t]="px"}),bn.registerPlugin(uf);var df=bn.registerPlugin(uf)||bn,pj=df.core.Tween;const Z1=Object.freeze(Object.defineProperty({__proto__:null,Back:OM,Bounce:RM,CSSPlugin:uf,Circ:GM,Cubic:PM,Elastic:zM,Expo:WM,Linear:AM,Power0:jM,Power1:TM,Power2:DM,Power3:IM,Power4:LM,Quad:EM,Quart:FM,Quint:$M,Sine:UM,SteppedEase:HM,Strong:BM,TimelineLite:Xt,TimelineMax:Xt,TweenLite:Lt,TweenMax:pj,default:df,gsap:df},Symbol.toStringTag,{value:"Module"}));function mj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gj(t,e,n){return e&&mj(t.prototype,e),t}/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Jt,El,Tn,Zr,qr,ds,q1,ki,Fa,X1,Mr,Yn,J1,K1=function(){return Jt||typeof window<"u"&&(Jt=window.gsap)&&Jt.registerPlugin&&Jt},Q1=1,fs=[],it=[],hr=[],$a=Date.now,ff=function(e,n){return n},yj=function(){var e=Fa.core,n=e.bridge||{},r=e._scrollers,i=e._proxies;r.push.apply(r,it),i.push.apply(i,hr),it=r,hr=i,ff=function(o,l){return n[o](l)}},Xr=function(e,n){return~hr.indexOf(e)&&hr[hr.indexOf(e)+1][n]},Ba=function(e){return!!~X1.indexOf(e)},an=function(e,n,r,i,s){return e.addEventListener(n,r,{passive:i!==!1,capture:!!s})},on=function(e,n,r,i){return e.removeEventListener(n,r,!!i)},Pl="scrollLeft",Fl="scrollTop",hf=function(){return Mr&&Mr.isPressed||it.cache++},$l=function(e,n){var r=function i(s){if(s||s===0){Q1&&(Tn.history.scrollRestoration="manual");var o=Mr&&Mr.isPressed;s=i.v=Math.round(s)||(Mr&&Mr.iOS?1:0),e(s),i.cacheID=it.cache,o&&ff("ss",s)}else(n||it.cache!==i.cacheID||ff("ref"))&&(i.cacheID=it.cache,i.v=e());return i.v+i.offset};return r.offset=0,e&&r},ln={s:Pl,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:$l(function(t){return arguments.length?Tn.scrollTo(t,Ht.sc()):Tn.pageXOffset||Zr[Pl]||qr[Pl]||ds[Pl]||0})},Ht={s:Fl,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:ln,sc:$l(function(t){return arguments.length?Tn.scrollTo(ln.sc(),t):Tn.pageYOffset||Zr[Fl]||qr[Fl]||ds[Fl]||0})},vn=function(e,n){return(n&&n._ctx&&n._ctx.selector||Jt.utils.toArray)(e)[0]||(typeof e=="string"&&Jt.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},bj=function(e,n){for(var r=n.length;r--;)if(n[r]===e||n[r].contains(e))return!0;return!1},Jr=function(e,n){var r=n.s,i=n.sc;Ba(e)&&(e=Zr.scrollingElement||qr);var s=it.indexOf(e),o=i===Ht.sc?1:2;!~s&&(s=it.push(e)-1),it[s+o]||an(e,"scroll",hf);var l=it[s+o],c=l||(it[s+o]=$l(Xr(e,r),!0)||(Ba(e)?i:$l(function(u){return arguments.length?e[r]=u:e[r]})));return c.target=e,l||(c.smooth=Jt.getProperty(e,"scrollBehavior")==="smooth"),c},pf=function(e,n,r){var i=e,s=e,o=$a(),l=o,c=n||50,u=Math.max(500,c*3),d=function(g,m){var y=$a();m||y-o>c?(s=i,i=g,l=o,o=y):r?i+=g:i=s+(g-s)/(y-l)*(o-l)},f=function(){s=i=r?0:i,l=o=0},p=function(g){var m=l,y=s,w=$a();return(g||g===0)&&g!==i&&d(g),o===l||w-l>u?0:(i+(r?y:-y))/((r?w:o)-m)*1e3};return{update:d,reset:f,getVelocity:p}},za=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},ex=function(e){var n=Math.max.apply(Math,e),r=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(r)?n:r},tx=function(){Fa=Jt.core.globals().ScrollTrigger,Fa&&Fa.core&&yj()},nx=function(e){return Jt=e||K1(),!El&&Jt&&typeof document<"u"&&document.body&&(Tn=window,Zr=document,qr=Zr.documentElement,ds=Zr.body,X1=[Tn,Zr,qr,ds],Jt.utils.clamp,J1=Jt.core.context||function(){},ki="onpointerenter"in ds?"pointer":"mouse",q1=At.isTouch=Tn.matchMedia&&Tn.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Tn||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Yn=At.eventTypes=("ontouchstart"in qr?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in qr?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Q1=0},500),tx(),El=1),El};ln.op=Ht,it.cache=0;var At=(function(){function t(n){this.init(n)}var e=t.prototype;return e.init=function(r){El||nx(Jt)||console.warn("Please gsap.registerPlugin(Observer)"),Fa||tx();var i=r.tolerance,s=r.dragMinimum,o=r.type,l=r.target,c=r.lineHeight,u=r.debounce,d=r.preventDefault,f=r.onStop,p=r.onStopDelay,h=r.ignore,g=r.wheelSpeed,m=r.event,y=r.onDragStart,w=r.onDragEnd,M=r.onDrag,j=r.onPress,v=r.onRelease,b=r.onRight,_=r.onLeft,N=r.onUp,C=r.onDown,x=r.onChangeX,k=r.onChangeY,F=r.onChange,D=r.onToggleX,P=r.onToggleY,I=r.onHover,L=r.onHoverEnd,E=r.onMove,z=r.ignoreCheck,G=r.isNormalizer,ee=r.onGestureStart,T=r.onGestureEnd,K=r.onWheel,O=r.onEnable,B=r.onDisable,J=r.onClick,$=r.scrollSpeed,R=r.capture,H=r.allowClicks,q=r.lockAxis,V=r.onLockAxis;this.target=l=vn(l)||qr,this.vars=r,h&&(h=Jt.utils.toArray(h)),i=i||1e-9,s=s||0,g=g||1,$=$||1,o=o||"wheel,touch,pointer",u=u!==!1,c||(c=parseFloat(Tn.getComputedStyle(ds).lineHeight)||22);var re,fe,X,se,ue,_e,be,Q=this,Ge=0,Fe=0,Be=r.passive||!d&&r.passive!==!1,ve=Jr(l,ln),W=Jr(l,Ht),te=ve(),he=W(),ge=~o.indexOf("touch")&&!~o.indexOf("pointer")&&Yn[0]==="pointerdown",we=Ba(l),U=l.ownerDocument||Zr,Z=[0,0,0],le=[0,0,0],ie=0,ce=function(){return ie=$a()},de=function(me,Se){return(Q.event=me)&&h&&bj(me.target,h)||Se&&ge&&me.pointerType!=="touch"||z&&z(me,Se)},xe=function(){Q._vx.reset(),Q._vy.reset(),fe.pause(),f&&f(Q)},Me=function(){var me=Q.deltaX=ex(Z),Se=Q.deltaY=ex(le),oe=Math.abs(me)>=i,ye=Math.abs(Se)>=i;F&&(oe||ye)&&F(Q,me,Se,Z,le),oe&&(b&&Q.deltaX>0&&b(Q),_&&Q.deltaX<0&&_(Q),x&&x(Q),D&&Q.deltaX<0!=Ge<0&&D(Q),Ge=Q.deltaX,Z[0]=Z[1]=Z[2]=0),ye&&(C&&Q.deltaY>0&&C(Q),N&&Q.deltaY<0&&N(Q),k&&k(Q),P&&Q.deltaY<0!=Fe<0&&P(Q),Fe=Q.deltaY,le[0]=le[1]=le[2]=0),(se||X)&&(E&&E(Q),X&&(y&&X===1&&y(Q),M&&M(Q),X=0),se=!1),_e&&!(_e=!1)&&V&&V(Q),ue&&(K(Q),ue=!1),re=0},Ae=function(me,Se,oe){Z[oe]+=me,le[oe]+=Se,Q._vx.update(me),Q._vy.update(Se),u?re||(re=requestAnimationFrame(Me)):Me()},Ye=function(me,Se){q&&!be&&(Q.axis=be=Math.abs(me)>Math.abs(Se)?"x":"y",_e=!0),be!=="y"&&(Z[2]+=me,Q._vx.update(me,!0)),be!=="x"&&(le[2]+=Se,Q._vy.update(Se,!0)),u?re||(re=requestAnimationFrame(Me)):Me()},Ze=function(me){if(!de(me,1)){me=za(me,d);var Se=me.clientX,oe=me.clientY,ye=Se-Q.x,Ie=oe-Q.y,Oe=Q.isDragging;Q.x=Se,Q.y=oe,(Oe||(ye||Ie)&&(Math.abs(Q.startX-Se)>=s||Math.abs(Q.startY-oe)>=s))&&(X=Oe?2:1,Oe||(Q.isDragging=!0),Ye(ye,Ie))}},ct=Q.onPress=function(Te){de(Te,1)||Te&&Te.button||(Q.axis=be=null,fe.pause(),Q.isPressed=!0,Te=za(Te),Ge=Fe=0,Q.startX=Q.x=Te.clientX,Q.startY=Q.y=Te.clientY,Q._vx.reset(),Q._vy.reset(),an(G?l:U,Yn[1],Ze,Be,!0),Q.deltaX=Q.deltaY=0,j&&j(Q))},ze=Q.onRelease=function(Te){if(!de(Te,1)){on(G?l:U,Yn[1],Ze,!0);var me=!isNaN(Q.y-Q.startY),Se=Q.isDragging,oe=Se&&(Math.abs(Q.x-Q.startX)>3||Math.abs(Q.y-Q.startY)>3),ye=za(Te);!oe&&me&&(Q._vx.reset(),Q._vy.reset(),d&&H&&Jt.delayedCall(.08,function(){if($a()-ie>300&&!Te.defaultPrevented){if(Te.target.click)Te.target.click();else if(U.createEvent){var Ie=U.createEvent("MouseEvents");Ie.initMouseEvent("click",!0,!0,Tn,1,ye.screenX,ye.screenY,ye.clientX,ye.clientY,!1,!1,!1,!1,0,null),Te.target.dispatchEvent(Ie)}}})),Q.isDragging=Q.isGesturing=Q.isPressed=!1,f&&Se&&!G&&fe.restart(!0),X&&Me(),w&&Se&&w(Q),v&&v(Q,oe)}},pe=function(me){return me.touches&&me.touches.length>1&&(Q.isGesturing=!0)&&ee(me,Q.isDragging)},$e=function(){return(Q.isGesturing=!1)||T(Q)},Y=function(me){if(!de(me)){var Se=ve(),oe=W();Ae((Se-te)*$,(oe-he)*$,1),te=Se,he=oe,f&&fe.restart(!0)}},ae=function(me){if(!de(me)){me=za(me,d),K&&(ue=!0);var Se=(me.deltaMode===1?c:me.deltaMode===2?Tn.innerHeight:1)*g;Ae(me.deltaX*Se,me.deltaY*Se,0),f&&!G&&fe.restart(!0)}},Ne=function(me){if(!de(me)){var Se=me.clientX,oe=me.clientY,ye=Se-Q.x,Ie=oe-Q.y;Q.x=Se,Q.y=oe,se=!0,f&&fe.restart(!0),(ye||Ie)&&Ye(ye,Ie)}},ke=function(me){Q.event=me,I(Q)},Ce=function(me){Q.event=me,L(Q)},De=function(me){return de(me)||za(me,d)&&J(Q)};fe=Q._dc=Jt.delayedCall(p||.25,xe).pause(),Q.deltaX=Q.deltaY=0,Q._vx=pf(0,50,!0),Q._vy=pf(0,50,!0),Q.scrollX=ve,Q.scrollY=W,Q.isDragging=Q.isGesturing=Q.isPressed=!1,J1(this),Q.enable=function(Te){return Q.isEnabled||(an(we?U:l,"scroll",hf),o.indexOf("scroll")>=0&&an(we?U:l,"scroll",Y,Be,R),o.indexOf("wheel")>=0&&an(l,"wheel",ae,Be,R),(o.indexOf("touch")>=0&&q1||o.indexOf("pointer")>=0)&&(an(l,Yn[0],ct,Be,R),an(U,Yn[2],ze),an(U,Yn[3],ze),H&&an(l,"click",ce,!0,!0),J&&an(l,"click",De),ee&&an(U,"gesturestart",pe),T&&an(U,"gestureend",$e),I&&an(l,ki+"enter",ke),L&&an(l,ki+"leave",Ce),E&&an(l,ki+"move",Ne)),Q.isEnabled=!0,Q.isDragging=Q.isGesturing=Q.isPressed=se=X=!1,Q._vx.reset(),Q._vy.reset(),te=ve(),he=W(),Te&&Te.type&&ct(Te),O&&O(Q)),Q},Q.disable=function(){Q.isEnabled&&(fs.filter(function(Te){return Te!==Q&&Ba(Te.target)}).length||on(we?U:l,"scroll",hf),Q.isPressed&&(Q._vx.reset(),Q._vy.reset(),on(G?l:U,Yn[1],Ze,!0)),on(we?U:l,"scroll",Y,R),on(l,"wheel",ae,R),on(l,Yn[0],ct,R),on(U,Yn[2],ze),on(U,Yn[3],ze),on(l,"click",ce,!0),on(l,"click",De),on(U,"gesturestart",pe),on(U,"gestureend",$e),on(l,ki+"enter",ke),on(l,ki+"leave",Ce),on(l,ki+"move",Ne),Q.isEnabled=Q.isPressed=Q.isDragging=!1,B&&B(Q))},Q.kill=Q.revert=function(){Q.disable();var Te=fs.indexOf(Q);Te>=0&&fs.splice(Te,1),Mr===Q&&(Mr=0)},fs.push(Q),G&&Ba(l)&&(Mr=Q),Q.enable(m)},gj(t,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),t})();At.version="3.13.0",At.create=function(t){return new At(t)},At.register=nx,At.getAll=function(){return fs.slice()},At.getById=function(t){return fs.filter(function(e){return e.vars.id===t})[0]},K1()&&Jt.registerPlugin(At);/*!
 * ScrollTrigger 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ue,hs,st,wt,Dn,ft,mf,Bl,Oa,Ha,Ra,zl,tn,Ol,gf,cn,rx,ix,ps,sx,yf,ax,un,bf,ox,lx,Kr,xf,vf,ms,_f,Hl,wf,Sf,Rl=1,nn=Date.now,kf=nn(),On=0,Ua=0,cx=function(e,n,r){var i=In(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return r["_"+n+"Clamp"]=i,i?e.substr(6,e.length-7):e},ux=function(e,n){return n&&(!In(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},xj=function t(){return Ua&&requestAnimationFrame(t)},dx=function(){return Ol=1},fx=function(){return Ol=0},pr=function(e){return e},Wa=function(e){return Math.round(e*1e5)/1e5||0},hx=function(){return typeof window<"u"},px=function(){return Ue||hx()&&(Ue=window.gsap)&&Ue.registerPlugin&&Ue},Ci=function(e){return!!~mf.indexOf(e)},mx=function(e){return(e==="Height"?_f:st["inner"+e])||Dn["client"+e]||ft["client"+e]},gx=function(e){return Xr(e,"getBoundingClientRect")||(Ci(e)?function(){return tc.width=st.innerWidth,tc.height=_f,tc}:function(){return jr(e)})},vj=function(e,n,r){var i=r.d,s=r.d2,o=r.a;return(o=Xr(e,"getBoundingClientRect"))?function(){return o()[i]}:function(){return(n?mx(s):e["client"+s])||0}},_j=function(e,n){return!n||~hr.indexOf(e)?gx(e):function(){return tc}},mr=function(e,n){var r=n.s,i=n.d2,s=n.d,o=n.a;return Math.max(0,(r="scroll"+i)&&(o=Xr(e,r))?o()-gx(e)()[s]:Ci(e)?(Dn[r]||ft[r])-mx(i):e[r]-e["offset"+i])},Ul=function(e,n){for(var r=0;r<ps.length;r+=3)(!n||~n.indexOf(ps[r+1]))&&e(ps[r],ps[r+1],ps[r+2])},In=function(e){return typeof e=="string"},rn=function(e){return typeof e=="function"},Ga=function(e){return typeof e=="number"},Ni=function(e){return typeof e=="object"},Ya=function(e,n,r){return e&&e.progress(n?0:1)&&r&&e.pause()},Cf=function(e,n){if(e.enabled){var r=e._ctx?e._ctx.add(function(){return n(e)}):n(e);r&&r.totalTime&&(e.callbackAnimation=r)}},gs=Math.abs,yx="left",bx="top",Nf="right",Mf="bottom",Mi="width",ji="height",Va="Right",Za="Left",qa="Top",Xa="Bottom",$t="padding",Hn="margin",ys="Width",jf="Height",Rt="px",Rn=function(e){return st.getComputedStyle(e)},wj=function(e){var n=Rn(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},xx=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},jr=function(e,n){var r=n&&Rn(e)[gf]!=="matrix(1, 0, 0, 1, 0, 0)"&&Ue.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=e.getBoundingClientRect();return r&&r.progress(0).kill(),i},Wl=function(e,n){var r=n.d2;return e["offset"+r]||e["client"+r]||0},vx=function(e){var n=[],r=e.labels,i=e.duration(),s;for(s in r)n.push(r[s]/i);return n},Sj=function(e){return function(n){return Ue.utils.snap(vx(e),n)}},Tf=function(e){var n=Ue.utils.snap(e),r=Array.isArray(e)&&e.slice(0).sort(function(i,s){return i-s});return r?function(i,s,o){o===void 0&&(o=.001);var l;if(!s)return n(i);if(s>0){for(i-=o,l=0;l<r.length;l++)if(r[l]>=i)return r[l];return r[l-1]}else for(l=r.length,i+=o;l--;)if(r[l]<=i)return r[l];return r[0]}:function(i,s,o){o===void 0&&(o=.001);var l=n(i);return!s||Math.abs(l-i)<o||l-i<0==s<0?l:n(s<0?i-e:i+e)}},kj=function(e){return function(n,r){return Tf(vx(e))(n,r.direction)}},Gl=function(e,n,r,i){return r.split(",").forEach(function(s){return e(n,s,i)})},Yt=function(e,n,r,i,s){return e.addEventListener(n,r,{passive:!i,capture:!!s})},Vt=function(e,n,r,i){return e.removeEventListener(n,r,!!i)},Yl=function(e,n,r){r=r&&r.wheelHandler,r&&(e(n,"wheel",r),e(n,"touchmove",r))},_x={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Vl={toggleActions:"play",anticipatePin:0},Zl={top:0,left:0,center:.5,bottom:1,right:1},ql=function(e,n){if(In(e)){var r=e.indexOf("="),i=~r?+(e.charAt(r-1)+1)*parseFloat(e.substr(r+1)):0;~r&&(e.indexOf("%")>r&&(i*=n/100),e=e.substr(0,r-1)),e=i+(e in Zl?Zl[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},Xl=function(e,n,r,i,s,o,l,c){var u=s.startColor,d=s.endColor,f=s.fontSize,p=s.indent,h=s.fontWeight,g=wt.createElement("div"),m=Ci(r)||Xr(r,"pinType")==="fixed",y=e.indexOf("scroller")!==-1,w=m?ft:r,M=e.indexOf("start")!==-1,j=M?u:d,v="border-color:"+j+";font-size:"+f+";color:"+j+";font-weight:"+h+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return v+="position:"+((y||c)&&m?"fixed;":"absolute;"),(y||c||!m)&&(v+=(i===Ht?Nf:Mf)+":"+(o+parseFloat(p))+"px;"),l&&(v+="box-sizing:border-box;text-align:left;width:"+l.offsetWidth+"px;"),g._isStart=M,g.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),g.style.cssText=v,g.innerText=n||n===0?e+"-"+n:e,w.children[0]?w.insertBefore(g,w.children[0]):w.appendChild(g),g._offset=g["offset"+i.op.d2],Jl(g,0,i,M),g},Jl=function(e,n,r,i){var s={display:"block"},o=r[i?"os2":"p2"],l=r[i?"p2":"os2"];e._isFlipped=i,s[r.a+"Percent"]=i?-100:0,s[r.a]=i?"1px":0,s["border"+o+ys]=1,s["border"+l+ys]=0,s[r.p]=n+"px",Ue.set(e,s)},rt=[],Df={},Ja,wx=function(){return nn()-On>34&&(Ja||(Ja=requestAnimationFrame(Tr)))},bs=function(){(!un||!un.isPressed||un.startX>ft.clientWidth)&&(it.cache++,un?Ja||(Ja=requestAnimationFrame(Tr)):Tr(),On||Di("scrollStart"),On=nn())},If=function(){lx=st.innerWidth,ox=st.innerHeight},Ka=function(e){it.cache++,(e===!0||!tn&&!ax&&!wt.fullscreenElement&&!wt.webkitFullscreenElement&&(!bf||lx!==st.innerWidth||Math.abs(st.innerHeight-ox)>st.innerHeight*.25))&&Bl.restart(!0)},Ti={},Cj=[],Sx=function t(){return Vt(at,"scrollEnd",t)||Li(!0)},Di=function(e){return Ti[e]&&Ti[e].map(function(n){return n()})||Cj},Ln=[],kx=function(e){for(var n=0;n<Ln.length;n+=5)(!e||Ln[n+4]&&Ln[n+4].query===e)&&(Ln[n].style.cssText=Ln[n+1],Ln[n].getBBox&&Ln[n].setAttribute("transform",Ln[n+2]||""),Ln[n+3].uncache=1)},Lf=function(e,n){var r;for(cn=0;cn<rt.length;cn++)r=rt[cn],r&&(!n||r._ctx===n)&&(e?r.kill(1):r.revert(!0,!0));Hl=!0,n&&kx(n),n||Di("revert")},Cx=function(e,n){it.cache++,(n||!dn)&&it.forEach(function(r){return rn(r)&&r.cacheID++&&(r.rec=0)}),In(e)&&(st.history.scrollRestoration=vf=e)},dn,Ii=0,Nx,Nj=function(){if(Nx!==Ii){var e=Nx=Ii;requestAnimationFrame(function(){return e===Ii&&Li(!0)})}},Mx=function(){ft.appendChild(ms),_f=!un&&ms.offsetHeight||st.innerHeight,ft.removeChild(ms)},jx=function(e){return Oa(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},Li=function(e,n){if(Dn=wt.documentElement,ft=wt.body,mf=[st,wt,Dn,ft],On&&!e&&!Hl){Yt(at,"scrollEnd",Sx);return}Mx(),dn=at.isRefreshing=!0,it.forEach(function(i){return rn(i)&&++i.cacheID&&(i.rec=i())});var r=Di("refreshInit");sx&&at.sort(),n||Lf(),it.forEach(function(i){rn(i)&&(i.smooth&&(i.target.style.scrollBehavior="auto"),i(0))}),rt.slice(0).forEach(function(i){return i.refresh()}),Hl=!1,rt.forEach(function(i){if(i._subPinOffset&&i.pin){var s=i.vars.horizontal?"offsetWidth":"offsetHeight",o=i.pin[s];i.revert(!0,1),i.adjustPinSpacing(i.pin[s]-o),i.refresh()}}),wf=1,jx(!0),rt.forEach(function(i){var s=mr(i.scroller,i._dir),o=i.vars.end==="max"||i._endClamp&&i.end>s,l=i._startClamp&&i.start>=s;(o||l)&&i.setPositions(l?s-1:i.start,o?Math.max(l?s:i.start+1,s):i.end,!0)}),jx(!1),wf=0,r.forEach(function(i){return i&&i.render&&i.render(-1)}),it.forEach(function(i){rn(i)&&(i.smooth&&requestAnimationFrame(function(){return i.target.style.scrollBehavior="smooth"}),i.rec&&i(i.rec))}),Cx(vf,1),Bl.pause(),Ii++,dn=2,Tr(2),rt.forEach(function(i){return rn(i.vars.onRefresh)&&i.vars.onRefresh(i)}),dn=at.isRefreshing=!1,Di("refresh")},Af=0,Kl=1,Qa,Tr=function(e){if(e===2||!dn&&!Hl){at.isUpdating=!0,Qa&&Qa.update(0);var n=rt.length,r=nn(),i=r-kf>=50,s=n&&rt[0].scroll();if(Kl=Af>s?-1:1,dn||(Af=s),i&&(On&&!Ol&&r-On>200&&(On=0,Di("scrollEnd")),Ra=kf,kf=r),Kl<0){for(cn=n;cn-- >0;)rt[cn]&&rt[cn].update(0,i);Kl=1}else for(cn=0;cn<n;cn++)rt[cn]&&rt[cn].update(0,i);at.isUpdating=!1}Ja=0},Ef=[yx,bx,Mf,Nf,Hn+Xa,Hn+Va,Hn+qa,Hn+Za,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Ql=Ef.concat([Mi,ji,"boxSizing","max"+ys,"max"+jf,"position",Hn,$t,$t+qa,$t+Va,$t+Xa,$t+Za]),Mj=function(e,n,r){xs(r);var i=e._gsap;if(i.spacerIsNative)xs(i.spacerState);else if(e._gsap.swappedIn){var s=n.parentNode;s&&(s.insertBefore(e,n),s.removeChild(n))}e._gsap.swappedIn=!1},Pf=function(e,n,r,i){if(!e._gsap.swappedIn){for(var s=Ef.length,o=n.style,l=e.style,c;s--;)c=Ef[s],o[c]=r[c];o.position=r.position==="absolute"?"absolute":"relative",r.display==="inline"&&(o.display="inline-block"),l[Mf]=l[Nf]="auto",o.flexBasis=r.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[Mi]=Wl(e,ln)+Rt,o[ji]=Wl(e,Ht)+Rt,o[$t]=l[Hn]=l[bx]=l[yx]="0",xs(i),l[Mi]=l["max"+ys]=r[Mi],l[ji]=l["max"+jf]=r[ji],l[$t]=r[$t],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},jj=/([A-Z])/g,xs=function(e){if(e){var n=e.t.style,r=e.length,i=0,s,o;for((e.t._gsap||Ue.core.getCache(e.t)).uncache=1;i<r;i+=2)o=e[i+1],s=e[i],o?n[s]=o:n[s]&&n.removeProperty(s.replace(jj,"-$1").toLowerCase())}},ec=function(e){for(var n=Ql.length,r=e.style,i=[],s=0;s<n;s++)i.push(Ql[s],r[Ql[s]]);return i.t=e,i},Tj=function(e,n,r){for(var i=[],s=e.length,o=r?8:0,l;o<s;o+=2)l=e[o],i.push(l,l in n?n[l]:e[o+1]);return i.t=e.t,i},tc={left:0,top:0},Tx=function(e,n,r,i,s,o,l,c,u,d,f,p,h,g){rn(e)&&(e=e(c)),In(e)&&e.substr(0,3)==="max"&&(e=p+(e.charAt(4)==="="?ql("0"+e.substr(3),r):0));var m=h?h.time():0,y,w,M;if(h&&h.seek(0),isNaN(e)||(e=+e),Ga(e))h&&(e=Ue.utils.mapRange(h.scrollTrigger.start,h.scrollTrigger.end,0,p,e)),l&&Jl(l,r,i,!0);else{rn(n)&&(n=n(c));var j=(e||"0").split(" "),v,b,_,N;M=vn(n,c)||ft,v=jr(M)||{},(!v||!v.left&&!v.top)&&Rn(M).display==="none"&&(N=M.style.display,M.style.display="block",v=jr(M),N?M.style.display=N:M.style.removeProperty("display")),b=ql(j[0],v[i.d]),_=ql(j[1]||"0",r),e=v[i.p]-u[i.p]-d+b+s-_,l&&Jl(l,_,i,r-_<20||l._isStart&&_>20),r-=r-_}if(g&&(c[g]=e||-.001,e<0&&(e=0)),o){var C=e+r,x=o._isStart;y="scroll"+i.d2,Jl(o,C,i,x&&C>20||!x&&(f?Math.max(ft[y],Dn[y]):o.parentNode[y])<=C+1),f&&(u=jr(l),f&&(o.style[i.op.p]=u[i.op.p]-i.op.m-o._offset+Rt))}return h&&M&&(y=jr(M),h.seek(p),w=jr(M),h._caScrollDist=y[i.p]-w[i.p],e=e/h._caScrollDist*p),h&&h.seek(m),h?e:Math.round(e)},Dj=/(webkit|moz|length|cssText|inset)/i,Dx=function(e,n,r,i){if(e.parentNode!==n){var s=e.style,o,l;if(n===ft){e._stOrig=s.cssText,l=Rn(e);for(o in l)!+o&&!Dj.test(o)&&l[o]&&typeof s[o]=="string"&&o!=="0"&&(s[o]=l[o]);s.top=r,s.left=i}else s.cssText=e._stOrig;Ue.core.getCache(e).uncache=1,n.appendChild(e)}},Ix=function(e,n,r){var i=n,s=i;return function(o){var l=Math.round(e());return l!==i&&l!==s&&Math.abs(l-i)>3&&Math.abs(l-s)>3&&(o=l,r&&r()),s=i,i=Math.round(o),i}},nc=function(e,n,r){var i={};i[n.p]="+="+r,Ue.set(e,i)},Lx=function(e,n){var r=Jr(e,n),i="_scroll"+n.p2,s=function o(l,c,u,d,f){var p=o.tween,h=c.onComplete,g={};u=u||r();var m=Ix(r,u,function(){p.kill(),o.tween=0});return f=d&&f||0,d=d||l-u,p&&p.kill(),c[i]=l,c.inherit=!1,c.modifiers=g,g[i]=function(){return m(u+d*p.ratio+f*p.ratio*p.ratio)},c.onUpdate=function(){it.cache++,o.tween&&Tr()},c.onComplete=function(){o.tween=0,h&&h.call(p)},p=o.tween=Ue.to(e,c),p};return e[i]=r,r.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},Yt(e,"wheel",r.wheelHandler),at.isTouch&&Yt(e,"touchmove",r.wheelHandler),s},at=(function(){function t(n,r){hs||t.register(Ue)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),xf(this),this.init(n,r)}var e=t.prototype;return e.init=function(r,i){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Ua){this.update=this.refresh=this.kill=pr;return}r=xx(In(r)||Ga(r)||r.nodeType?{trigger:r}:r,Vl);var s=r,o=s.onUpdate,l=s.toggleClass,c=s.id,u=s.onToggle,d=s.onRefresh,f=s.scrub,p=s.trigger,h=s.pin,g=s.pinSpacing,m=s.invalidateOnRefresh,y=s.anticipatePin,w=s.onScrubComplete,M=s.onSnapComplete,j=s.once,v=s.snap,b=s.pinReparent,_=s.pinSpacer,N=s.containerAnimation,C=s.fastScrollEnd,x=s.preventOverlaps,k=r.horizontal||r.containerAnimation&&r.horizontal!==!1?ln:Ht,F=!f&&f!==0,D=vn(r.scroller||st),P=Ue.core.getCache(D),I=Ci(D),L=("pinType"in r?r.pinType:Xr(D,"pinType")||I&&"fixed")==="fixed",E=[r.onEnter,r.onLeave,r.onEnterBack,r.onLeaveBack],z=F&&r.toggleActions.split(" "),G="markers"in r?r.markers:Vl.markers,ee=I?0:parseFloat(Rn(D)["border"+k.p2+ys])||0,T=this,K=r.onRefreshInit&&function(){return r.onRefreshInit(T)},O=vj(D,I,k),B=_j(D,I),J=0,$=0,R=0,H=Jr(D,k),q,V,re,fe,X,se,ue,_e,be,Q,Ge,Fe,Be,ve,W,te,he,ge,we,U,Z,le,ie,ce,de,xe,Me,Ae,Ye,Ze,ct,ze,pe,$e,Y,ae,Ne,ke,Ce;if(T._startClamp=T._endClamp=!1,T._dir=k,y*=45,T.scroller=D,T.scroll=N?N.time.bind(N):H,fe=H(),T.vars=r,i=i||r.animation,"refreshPriority"in r&&(sx=1,r.refreshPriority===-9999&&(Qa=T)),P.tweenScroll=P.tweenScroll||{top:Lx(D,Ht),left:Lx(D,ln)},T.tweenTo=q=P.tweenScroll[k.p],T.scrubDuration=function(oe){pe=Ga(oe)&&oe,pe?ze?ze.duration(oe):ze=Ue.to(i,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:pe,paused:!0,onComplete:function(){return w&&w(T)}}):(ze&&ze.progress(1).kill(),ze=0)},i&&(i.vars.lazy=!1,i._initted&&!T.isReverted||i.vars.immediateRender!==!1&&r.immediateRender!==!1&&i.duration()&&i.render(0,!0,!0),T.animation=i.pause(),i.scrollTrigger=T,T.scrubDuration(f),Ze=0,c||(c=i.vars.id)),v&&((!Ni(v)||v.push)&&(v={snapTo:v}),"scrollBehavior"in ft.style&&Ue.set(I?[ft,Dn]:D,{scrollBehavior:"auto"}),it.forEach(function(oe){return rn(oe)&&oe.target===(I?wt.scrollingElement||Dn:D)&&(oe.smooth=!1)}),re=rn(v.snapTo)?v.snapTo:v.snapTo==="labels"?Sj(i):v.snapTo==="labelsDirectional"?kj(i):v.directional!==!1?function(oe,ye){return Tf(v.snapTo)(oe,nn()-$<500?0:ye.direction)}:Ue.utils.snap(v.snapTo),$e=v.duration||{min:.1,max:2},$e=Ni($e)?Ha($e.min,$e.max):Ha($e,$e),Y=Ue.delayedCall(v.delay||pe/2||.1,function(){var oe=H(),ye=nn()-$<500,Ie=q.tween;if((ye||Math.abs(T.getVelocity())<10)&&!Ie&&!Ol&&J!==oe){var Oe=(oe-se)/ve,Pe=i&&!F?i.totalProgress():Oe,Le=ye?0:(Pe-ct)/(nn()-Ra)*1e3||0,He=Ue.utils.clamp(-Oe,1-Oe,gs(Le/2)*Le/.185),vt=Oe+(v.inertia===!1?0:He),lt,mt,ht=v,_n=ht.onStart,je=ht.onInterrupt,Re=ht.onComplete;if(lt=re(vt,T),Ga(lt)||(lt=vt),mt=Math.max(0,Math.round(se+lt*ve)),oe<=ue&&oe>=se&&mt!==oe){if(Ie&&!Ie._initted&&Ie.data<=gs(mt-oe))return;v.inertia===!1&&(He=lt-Oe),q(mt,{duration:$e(gs(Math.max(gs(vt-Pe),gs(lt-Pe))*.185/Le/.05||0)),ease:v.ease||"power3",data:gs(mt-oe),onInterrupt:function(){return Y.restart(!0)&&je&&je(T)},onComplete:function(){T.update(),J=H(),i&&!F&&(ze?ze.resetTo("totalProgress",lt,i._tTime/i._tDur):i.progress(lt)),Ze=ct=i&&!F?i.totalProgress():T.progress,M&&M(T),Re&&Re(T)}},oe,He*ve,mt-oe-He*ve),_n&&_n(T,q.tween)}}else T.isActive&&J!==oe&&Y.restart(!0)}).pause()),c&&(Df[c]=T),p=T.trigger=vn(p||h!==!0&&h),Ce=p&&p._gsap&&p._gsap.stRevert,Ce&&(Ce=Ce(T)),h=h===!0?p:vn(h),In(l)&&(l={targets:p,className:l}),h&&(g===!1||g===Hn||(g=!g&&h.parentNode&&h.parentNode.style&&Rn(h.parentNode).display==="flex"?!1:$t),T.pin=h,V=Ue.core.getCache(h),V.spacer?W=V.pinState:(_&&(_=vn(_),_&&!_.nodeType&&(_=_.current||_.nativeElement),V.spacerIsNative=!!_,_&&(V.spacerState=ec(_))),V.spacer=ge=_||wt.createElement("div"),ge.classList.add("pin-spacer"),c&&ge.classList.add("pin-spacer-"+c),V.pinState=W=ec(h)),r.force3D!==!1&&Ue.set(h,{force3D:!0}),T.spacer=ge=V.spacer,Ye=Rn(h),ce=Ye[g+k.os2],U=Ue.getProperty(h),Z=Ue.quickSetter(h,k.a,Rt),Pf(h,ge,Ye),he=ec(h)),G){Fe=Ni(G)?xx(G,_x):_x,Q=Xl("scroller-start",c,D,k,Fe,0),Ge=Xl("scroller-end",c,D,k,Fe,0,Q),we=Q["offset"+k.op.d2];var De=vn(Xr(D,"content")||D);_e=this.markerStart=Xl("start",c,De,k,Fe,we,0,N),be=this.markerEnd=Xl("end",c,De,k,Fe,we,0,N),N&&(ke=Ue.quickSetter([_e,be],k.a,Rt)),!L&&!(hr.length&&Xr(D,"fixedMarkers")===!0)&&(wj(I?ft:D),Ue.set([Q,Ge],{force3D:!0}),xe=Ue.quickSetter(Q,k.a,Rt),Ae=Ue.quickSetter(Ge,k.a,Rt))}if(N){var Te=N.vars.onUpdate,me=N.vars.onUpdateParams;N.eventCallback("onUpdate",function(){T.update(0,0,1),Te&&Te.apply(N,me||[])})}if(T.previous=function(){return rt[rt.indexOf(T)-1]},T.next=function(){return rt[rt.indexOf(T)+1]},T.revert=function(oe,ye){if(!ye)return T.kill(!0);var Ie=oe!==!1||!T.enabled,Oe=tn;Ie!==T.isReverted&&(Ie&&(ae=Math.max(H(),T.scroll.rec||0),R=T.progress,Ne=i&&i.progress()),_e&&[_e,be,Q,Ge].forEach(function(Pe){return Pe.style.display=Ie?"none":"block"}),Ie&&(tn=T,T.update(Ie)),h&&(!b||!T.isActive)&&(Ie?Mj(h,ge,W):Pf(h,ge,Rn(h),de)),Ie||T.update(Ie),tn=Oe,T.isReverted=Ie)},T.refresh=function(oe,ye,Ie,Oe){if(!((tn||!T.enabled)&&!ye)){if(h&&oe&&On){Yt(t,"scrollEnd",Sx);return}!dn&&K&&K(T),tn=T,q.tween&&!Ie&&(q.tween.kill(),q.tween=0),ze&&ze.pause(),m&&i&&(i.revert({kill:!1}).invalidate(),i.getChildren&&i.getChildren(!0,!0,!1).forEach(function(Lr){return Lr.vars.immediateRender&&Lr.render(0,!0,!0)})),T.isReverted||T.revert(!0,!0),T._subPinOffset=!1;var Pe=O(),Le=B(),He=N?N.duration():mr(D,k),vt=ve<=.01||!ve,lt=0,mt=Oe||0,ht=Ni(Ie)?Ie.end:r.end,_n=r.endTrigger||p,je=Ni(Ie)?Ie.start:r.start||(r.start===0||!p?0:h?"0 0":"0 100%"),Re=T.pinnedContainer=r.pinnedContainer&&vn(r.pinnedContainer,T),qe=p&&Math.max(0,rt.indexOf(T))||0,Je=qe,ut,nt,gt,Dr,Bt,Ct,Qe,yt,An,Qr,En,Ir,ei;for(G&&Ni(Ie)&&(Ir=Ue.getProperty(Q,k.p),ei=Ue.getProperty(Ge,k.p));Je-- >0;)Ct=rt[Je],Ct.end||Ct.refresh(0,1)||(tn=T),Qe=Ct.pin,Qe&&(Qe===p||Qe===h||Qe===Re)&&!Ct.isReverted&&(Qr||(Qr=[]),Qr.unshift(Ct),Ct.revert(!0,!0)),Ct!==rt[Je]&&(qe--,Je--);for(rn(je)&&(je=je(T)),je=cx(je,"start",T),se=Tx(je,p,Pe,k,H(),_e,Q,T,Le,ee,L,He,N,T._startClamp&&"_startClamp")||(h?-.001:0),rn(ht)&&(ht=ht(T)),In(ht)&&!ht.indexOf("+=")&&(~ht.indexOf(" ")?ht=(In(je)?je.split(" ")[0]:"")+ht:(lt=ql(ht.substr(2),Pe),ht=In(je)?je:(N?Ue.utils.mapRange(0,N.duration(),N.scrollTrigger.start,N.scrollTrigger.end,se):se)+lt,_n=p)),ht=cx(ht,"end",T),ue=Math.max(se,Tx(ht||(_n?"100% 0":He),_n,Pe,k,H()+lt,be,Ge,T,Le,ee,L,He,N,T._endClamp&&"_endClamp"))||-.001,lt=0,Je=qe;Je--;)Ct=rt[Je],Qe=Ct.pin,Qe&&Ct.start-Ct._pinPush<=se&&!N&&Ct.end>0&&(ut=Ct.end-(T._startClamp?Math.max(0,Ct.start):Ct.start),(Qe===p&&Ct.start-Ct._pinPush<se||Qe===Re)&&isNaN(je)&&(lt+=ut*(1-Ct.progress)),Qe===h&&(mt+=ut));if(se+=lt,ue+=lt,T._startClamp&&(T._startClamp+=lt),T._endClamp&&!dn&&(T._endClamp=ue||-.001,ue=Math.min(ue,mr(D,k))),ve=ue-se||(se-=.01)&&.001,vt&&(R=Ue.utils.clamp(0,1,Ue.utils.normalize(se,ue,ae))),T._pinPush=mt,_e&&lt&&(ut={},ut[k.a]="+="+lt,Re&&(ut[k.p]="-="+H()),Ue.set([_e,be],ut)),h&&!(wf&&T.end>=mr(D,k)))ut=Rn(h),Dr=k===Ht,gt=H(),le=parseFloat(U(k.a))+mt,!He&&ue>1&&(En=(I?wt.scrollingElement||Dn:D).style,En={style:En,value:En["overflow"+k.a.toUpperCase()]},I&&Rn(ft)["overflow"+k.a.toUpperCase()]!=="scroll"&&(En.style["overflow"+k.a.toUpperCase()]="scroll")),Pf(h,ge,ut),he=ec(h),nt=jr(h,!0),yt=L&&Jr(D,Dr?ln:Ht)(),g?(de=[g+k.os2,ve+mt+Rt],de.t=ge,Je=g===$t?Wl(h,k)+ve+mt:0,Je&&(de.push(k.d,Je+Rt),ge.style.flexBasis!=="auto"&&(ge.style.flexBasis=Je+Rt)),xs(de),Re&&rt.forEach(function(Lr){Lr.pin===Re&&Lr.vars.pinSpacing!==!1&&(Lr._subPinOffset=!0)}),L&&H(ae)):(Je=Wl(h,k),Je&&ge.style.flexBasis!=="auto"&&(ge.style.flexBasis=Je+Rt)),L&&(Bt={top:nt.top+(Dr?gt-se:yt)+Rt,left:nt.left+(Dr?yt:gt-se)+Rt,boxSizing:"border-box",position:"fixed"},Bt[Mi]=Bt["max"+ys]=Math.ceil(nt.width)+Rt,Bt[ji]=Bt["max"+jf]=Math.ceil(nt.height)+Rt,Bt[Hn]=Bt[Hn+qa]=Bt[Hn+Va]=Bt[Hn+Xa]=Bt[Hn+Za]="0",Bt[$t]=ut[$t],Bt[$t+qa]=ut[$t+qa],Bt[$t+Va]=ut[$t+Va],Bt[$t+Xa]=ut[$t+Xa],Bt[$t+Za]=ut[$t+Za],te=Tj(W,Bt,b),dn&&H(0)),i?(An=i._initted,yf(1),i.render(i.duration(),!0,!0),ie=U(k.a)-le+ve+mt,Me=Math.abs(ve-ie)>1,L&&Me&&te.splice(te.length-2,2),i.render(0,!0,!0),An||i.invalidate(!0),i.parent||i.totalTime(i.totalTime()),yf(0)):ie=ve,En&&(En.value?En.style["overflow"+k.a.toUpperCase()]=En.value:En.style.removeProperty("overflow-"+k.a));else if(p&&H()&&!N)for(nt=p.parentNode;nt&&nt!==ft;)nt._pinOffset&&(se-=nt._pinOffset,ue-=nt._pinOffset),nt=nt.parentNode;Qr&&Qr.forEach(function(Lr){return Lr.revert(!1,!0)}),T.start=se,T.end=ue,fe=X=dn?ae:H(),!N&&!dn&&(fe<ae&&H(ae),T.scroll.rec=0),T.revert(!1,!0),$=nn(),Y&&(J=-1,Y.restart(!0)),tn=0,i&&F&&(i._initted||Ne)&&i.progress()!==Ne&&i.progress(Ne||0,!0).render(i.time(),!0,!0),(vt||R!==T.progress||N||m||i&&!i._initted)&&(i&&!F&&(i._initted||R||i.vars.immediateRender!==!1)&&i.totalProgress(N&&se<-.001&&!R?Ue.utils.normalize(se,ue,0):R,!0),T.progress=vt||(fe-se)/ve===R?0:R),h&&g&&(ge._pinOffset=Math.round(T.progress*ie)),ze&&ze.invalidate(),isNaN(Ir)||(Ir-=Ue.getProperty(Q,k.p),ei-=Ue.getProperty(Ge,k.p),nc(Q,k,Ir),nc(_e,k,Ir-(Oe||0)),nc(Ge,k,ei),nc(be,k,ei-(Oe||0))),vt&&!dn&&T.update(),d&&!dn&&!Be&&(Be=!0,d(T),Be=!1)}},T.getVelocity=function(){return(H()-X)/(nn()-Ra)*1e3||0},T.endAnimation=function(){Ya(T.callbackAnimation),i&&(ze?ze.progress(1):i.paused()?F||Ya(i,T.direction<0,1):Ya(i,i.reversed()))},T.labelToScroll=function(oe){return i&&i.labels&&(se||T.refresh()||se)+i.labels[oe]/i.duration()*ve||0},T.getTrailing=function(oe){var ye=rt.indexOf(T),Ie=T.direction>0?rt.slice(0,ye).reverse():rt.slice(ye+1);return(In(oe)?Ie.filter(function(Oe){return Oe.vars.preventOverlaps===oe}):Ie).filter(function(Oe){return T.direction>0?Oe.end<=se:Oe.start>=ue})},T.update=function(oe,ye,Ie){if(!(N&&!Ie&&!oe)){var Oe=dn===!0?ae:T.scroll(),Pe=oe?0:(Oe-se)/ve,Le=Pe<0?0:Pe>1?1:Pe||0,He=T.progress,vt,lt,mt,ht,_n,je,Re,qe;if(ye&&(X=fe,fe=N?H():Oe,v&&(ct=Ze,Ze=i&&!F?i.totalProgress():Le)),y&&h&&!tn&&!Rl&&On&&(!Le&&se<Oe+(Oe-X)/(nn()-Ra)*y?Le=1e-4:Le===1&&ue>Oe+(Oe-X)/(nn()-Ra)*y&&(Le=.9999)),Le!==He&&T.enabled){if(vt=T.isActive=!!Le&&Le<1,lt=!!He&&He<1,je=vt!==lt,_n=je||!!Le!=!!He,T.direction=Le>He?1:-1,T.progress=Le,_n&&!tn&&(mt=Le&&!He?0:Le===1?1:He===1?2:3,F&&(ht=!je&&z[mt+1]!=="none"&&z[mt+1]||z[mt],qe=i&&(ht==="complete"||ht==="reset"||ht in i))),x&&(je||qe)&&(qe||f||!i)&&(rn(x)?x(T):T.getTrailing(x).forEach(function(gt){return gt.endAnimation()})),F||(ze&&!tn&&!Rl?(ze._dp._time-ze._start!==ze._time&&ze.render(ze._dp._time-ze._start),ze.resetTo?ze.resetTo("totalProgress",Le,i._tTime/i._tDur):(ze.vars.totalProgress=Le,ze.invalidate().restart())):i&&i.totalProgress(Le,!!(tn&&($||oe)))),h){if(oe&&g&&(ge.style[g+k.os2]=ce),!L)Z(Wa(le+ie*Le));else if(_n){if(Re=!oe&&Le>He&&ue+1>Oe&&Oe+1>=mr(D,k),b)if(!oe&&(vt||Re)){var Je=jr(h,!0),ut=Oe-se;Dx(h,ft,Je.top+(k===Ht?ut:0)+Rt,Je.left+(k===Ht?0:ut)+Rt)}else Dx(h,ge);xs(vt||Re?te:he),Me&&Le<1&&vt||Z(le+(Le===1&&!Re?ie:0))}}v&&!q.tween&&!tn&&!Rl&&Y.restart(!0),l&&(je||j&&Le&&(Le<1||!Sf))&&Oa(l.targets).forEach(function(gt){return gt.classList[vt||j?"add":"remove"](l.className)}),o&&!F&&!oe&&o(T),_n&&!tn?(F&&(qe&&(ht==="complete"?i.pause().totalProgress(1):ht==="reset"?i.restart(!0).pause():ht==="restart"?i.restart(!0):i[ht]()),o&&o(T)),(je||!Sf)&&(u&&je&&Cf(T,u),E[mt]&&Cf(T,E[mt]),j&&(Le===1?T.kill(!1,1):E[mt]=0),je||(mt=Le===1?1:3,E[mt]&&Cf(T,E[mt]))),C&&!vt&&Math.abs(T.getVelocity())>(Ga(C)?C:2500)&&(Ya(T.callbackAnimation),ze?ze.progress(1):Ya(i,ht==="reverse"?1:!Le,1))):F&&o&&!tn&&o(T)}if(Ae){var nt=N?Oe/N.duration()*(N._caScrollDist||0):Oe;xe(nt+(Q._isFlipped?1:0)),Ae(nt)}ke&&ke(-Oe/N.duration()*(N._caScrollDist||0))}},T.enable=function(oe,ye){T.enabled||(T.enabled=!0,Yt(D,"resize",Ka),I||Yt(D,"scroll",bs),K&&Yt(t,"refreshInit",K),oe!==!1&&(T.progress=R=0,fe=X=J=H()),ye!==!1&&T.refresh())},T.getTween=function(oe){return oe&&q?q.tween:ze},T.setPositions=function(oe,ye,Ie,Oe){if(N){var Pe=N.scrollTrigger,Le=N.duration(),He=Pe.end-Pe.start;oe=Pe.start+He*oe/Le,ye=Pe.start+He*ye/Le}T.refresh(!1,!1,{start:ux(oe,Ie&&!!T._startClamp),end:ux(ye,Ie&&!!T._endClamp)},Oe),T.update()},T.adjustPinSpacing=function(oe){if(de&&oe){var ye=de.indexOf(k.d)+1;de[ye]=parseFloat(de[ye])+oe+Rt,de[1]=parseFloat(de[1])+oe+Rt,xs(de)}},T.disable=function(oe,ye){if(T.enabled&&(oe!==!1&&T.revert(!0,!0),T.enabled=T.isActive=!1,ye||ze&&ze.pause(),ae=0,V&&(V.uncache=1),K&&Vt(t,"refreshInit",K),Y&&(Y.pause(),q.tween&&q.tween.kill()&&(q.tween=0)),!I)){for(var Ie=rt.length;Ie--;)if(rt[Ie].scroller===D&&rt[Ie]!==T)return;Vt(D,"resize",Ka),I||Vt(D,"scroll",bs)}},T.kill=function(oe,ye){T.disable(oe,ye),ze&&!ye&&ze.kill(),c&&delete Df[c];var Ie=rt.indexOf(T);Ie>=0&&rt.splice(Ie,1),Ie===cn&&Kl>0&&cn--,Ie=0,rt.forEach(function(Oe){return Oe.scroller===T.scroller&&(Ie=1)}),Ie||dn||(T.scroll.rec=0),i&&(i.scrollTrigger=null,oe&&i.revert({kill:!1}),ye||i.kill()),_e&&[_e,be,Q,Ge].forEach(function(Oe){return Oe.parentNode&&Oe.parentNode.removeChild(Oe)}),Qa===T&&(Qa=0),h&&(V&&(V.uncache=1),Ie=0,rt.forEach(function(Oe){return Oe.pin===h&&Ie++}),Ie||(V.spacer=0)),r.onKill&&r.onKill(T)},rt.push(T),T.enable(!1,!1),Ce&&Ce(T),i&&i.add&&!ve){var Se=T.update;T.update=function(){T.update=Se,it.cache++,se||ue||T.refresh()},Ue.delayedCall(.01,T.update),ve=.01,se=ue=0}else T.refresh();h&&Nj()},t.register=function(r){return hs||(Ue=r||px(),hx()&&window.document&&t.enable(),hs=Ua),hs},t.defaults=function(r){if(r)for(var i in r)Vl[i]=r[i];return Vl},t.disable=function(r,i){Ua=0,rt.forEach(function(o){return o[i?"kill":"disable"](r)}),Vt(st,"wheel",bs),Vt(wt,"scroll",bs),clearInterval(zl),Vt(wt,"touchcancel",pr),Vt(ft,"touchstart",pr),Gl(Vt,wt,"pointerdown,touchstart,mousedown",dx),Gl(Vt,wt,"pointerup,touchend,mouseup",fx),Bl.kill(),Ul(Vt);for(var s=0;s<it.length;s+=3)Yl(Vt,it[s],it[s+1]),Yl(Vt,it[s],it[s+2])},t.enable=function(){if(st=window,wt=document,Dn=wt.documentElement,ft=wt.body,Ue&&(Oa=Ue.utils.toArray,Ha=Ue.utils.clamp,xf=Ue.core.context||pr,yf=Ue.core.suppressOverwrites||pr,vf=st.history.scrollRestoration||"auto",Af=st.pageYOffset||0,Ue.core.globals("ScrollTrigger",t),ft)){Ua=1,ms=document.createElement("div"),ms.style.height="100vh",ms.style.position="absolute",Mx(),xj(),At.register(Ue),t.isTouch=At.isTouch,Kr=At.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),bf=At.isTouch===1,Yt(st,"wheel",bs),mf=[st,wt,Dn,ft],Ue.matchMedia?(t.matchMedia=function(u){var d=Ue.matchMedia(),f;for(f in u)d.add(f,u[f]);return d},Ue.addEventListener("matchMediaInit",function(){return Lf()}),Ue.addEventListener("matchMediaRevert",function(){return kx()}),Ue.addEventListener("matchMedia",function(){Li(0,1),Di("matchMedia")}),Ue.matchMedia().add("(orientation: portrait)",function(){return If(),If})):console.warn("Requires GSAP 3.11.0 or later"),If(),Yt(wt,"scroll",bs);var r=ft.hasAttribute("style"),i=ft.style,s=i.borderTopStyle,o=Ue.core.Animation.prototype,l,c;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",l=jr(ft),Ht.m=Math.round(l.top+Ht.sc())||0,ln.m=Math.round(l.left+ln.sc())||0,s?i.borderTopStyle=s:i.removeProperty("border-top-style"),r||(ft.setAttribute("style",""),ft.removeAttribute("style")),zl=setInterval(wx,250),Ue.delayedCall(.5,function(){return Rl=0}),Yt(wt,"touchcancel",pr),Yt(ft,"touchstart",pr),Gl(Yt,wt,"pointerdown,touchstart,mousedown",dx),Gl(Yt,wt,"pointerup,touchend,mouseup",fx),gf=Ue.utils.checkPrefix("transform"),Ql.push(gf),hs=nn(),Bl=Ue.delayedCall(.2,Li).pause(),ps=[wt,"visibilitychange",function(){var u=st.innerWidth,d=st.innerHeight;wt.hidden?(rx=u,ix=d):(rx!==u||ix!==d)&&Ka()},wt,"DOMContentLoaded",Li,st,"load",Li,st,"resize",Ka],Ul(Yt),rt.forEach(function(u){return u.enable(0,1)}),c=0;c<it.length;c+=3)Yl(Vt,it[c],it[c+1]),Yl(Vt,it[c],it[c+2])}},t.config=function(r){"limitCallbacks"in r&&(Sf=!!r.limitCallbacks);var i=r.syncInterval;i&&clearInterval(zl)||(zl=i)&&setInterval(wx,i),"ignoreMobileResize"in r&&(bf=t.isTouch===1&&r.ignoreMobileResize),"autoRefreshEvents"in r&&(Ul(Vt)||Ul(Yt,r.autoRefreshEvents||"none"),ax=(r.autoRefreshEvents+"").indexOf("resize")===-1)},t.scrollerProxy=function(r,i){var s=vn(r),o=it.indexOf(s),l=Ci(s);~o&&it.splice(o,l?6:2),i&&(l?hr.unshift(st,i,ft,i,Dn,i):hr.unshift(s,i))},t.clearMatchMedia=function(r){rt.forEach(function(i){return i._ctx&&i._ctx.query===r&&i._ctx.kill(!0,!0)})},t.isInViewport=function(r,i,s){var o=(In(r)?vn(r):r).getBoundingClientRect(),l=o[s?Mi:ji]*i||0;return s?o.right-l>0&&o.left+l<st.innerWidth:o.bottom-l>0&&o.top+l<st.innerHeight},t.positionInViewport=function(r,i,s){In(r)&&(r=vn(r));var o=r.getBoundingClientRect(),l=o[s?Mi:ji],c=i==null?l/2:i in Zl?Zl[i]*l:~i.indexOf("%")?parseFloat(i)*l/100:parseFloat(i)||0;return s?(o.left+c)/st.innerWidth:(o.top+c)/st.innerHeight},t.killAll=function(r){if(rt.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),r!==!0){var i=Ti.killAll||[];Ti={},i.forEach(function(s){return s()})}},t})();at.version="3.13.0",at.saveStyles=function(t){return t?Oa(t).forEach(function(e){if(e&&e.style){var n=Ln.indexOf(e);n>=0&&Ln.splice(n,5),Ln.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),Ue.core.getCache(e),xf())}}):Ln},at.revert=function(t,e){return Lf(!t,e)},at.create=function(t,e){return new at(t,e)},at.refresh=function(t){return t?Ka(!0):(hs||at.register())&&Li(!0)},at.update=function(t){return++it.cache&&Tr(t===!0?2:0)},at.clearScrollMemory=Cx,at.maxScroll=function(t,e){return mr(t,e?ln:Ht)},at.getScrollFunc=function(t,e){return Jr(vn(t),e?ln:Ht)},at.getById=function(t){return Df[t]},at.getAll=function(){return rt.filter(function(t){return t.vars.id!=="ScrollSmoother"})},at.isScrolling=function(){return!!On},at.snapDirectional=Tf,at.addEventListener=function(t,e){var n=Ti[t]||(Ti[t]=[]);~n.indexOf(e)||n.push(e)},at.removeEventListener=function(t,e){var n=Ti[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},at.batch=function(t,e){var n=[],r={},i=e.interval||.016,s=e.batchMax||1e9,o=function(u,d){var f=[],p=[],h=Ue.delayedCall(i,function(){d(f,p),f=[],p=[]}).pause();return function(g){f.length||h.restart(!0),f.push(g.trigger),p.push(g),s<=f.length&&h.progress(1)}},l;for(l in e)r[l]=l.substr(0,2)==="on"&&rn(e[l])&&l!=="onRefreshInit"?o(l,e[l]):e[l];return rn(s)&&(s=s(),Yt(at,"refresh",function(){return s=e.batchMax()})),Oa(t).forEach(function(c){var u={};for(l in r)u[l]=r[l];u.trigger=c,n.push(at.create(u))}),n};var Ax=function(e,n,r,i){return n>i?e(i):n<0&&e(0),r>i?(i-n)/(r-n):r<0?n/(n-r):1},Ff=function t(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(At.isTouch?" pinch-zoom":""):"none",e===Dn&&t(ft,n)},rc={auto:1,scroll:1},Ij=function(e){var n=e.event,r=e.target,i=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,o=s._gsap||Ue.core.getCache(s),l=nn(),c;if(!o._isScrollT||l-o._isScrollT>2e3){for(;s&&s!==ft&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(rc[(c=Rn(s)).overflowY]||rc[c.overflowX]));)s=s.parentNode;o._isScroll=s&&s!==r&&!Ci(s)&&(rc[(c=Rn(s)).overflowY]||rc[c.overflowX]),o._isScrollT=l}(o._isScroll||i==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},Ex=function(e,n,r,i){return At.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:i=i&&Ij,onPress:i,onDrag:i,onScroll:i,onEnable:function(){return r&&Yt(wt,At.eventTypes[0],Fx,!1,!0)},onDisable:function(){return Vt(wt,At.eventTypes[0],Fx,!0)}})},Lj=/(input|label|select|textarea)/i,Px,Fx=function(e){var n=Lj.test(e.target.tagName);(n||Px)&&(e._gsapAllow=!0,Px=n)},Aj=function(e){Ni(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,r=n.normalizeScrollX,i=n.momentum,s=n.allowNestedScroll,o=n.onRelease,l,c,u=vn(e.target)||Dn,d=Ue.core.globals().ScrollSmoother,f=d&&d.get(),p=Kr&&(e.content&&vn(e.content)||f&&e.content!==!1&&!f.smooth()&&f.content()),h=Jr(u,Ht),g=Jr(u,ln),m=1,y=(At.isTouch&&st.visualViewport?st.visualViewport.scale*st.visualViewport.width:st.outerWidth)/st.innerWidth,w=0,M=rn(i)?function(){return i(l)}:function(){return i||2.8},j,v,b=Ex(u,e.type,!0,s),_=function(){return v=!1},N=pr,C=pr,x=function(){c=mr(u,Ht),C=Ha(Kr?1:0,c),r&&(N=Ha(0,mr(u,ln))),j=Ii},k=function(){p._gsap.y=Wa(parseFloat(p._gsap.y)+h.offset)+"px",p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(p._gsap.y)+", 0, 1)",h.offset=h.cacheID=0},F=function(){if(v){requestAnimationFrame(_);var G=Wa(l.deltaY/2),ee=C(h.v-G);if(p&&ee!==h.v+h.offset){h.offset=ee-h.v;var T=Wa((parseFloat(p&&p._gsap.y)||0)-h.offset);p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+T+", 0, 1)",p._gsap.y=T+"px",h.cacheID=it.cache,Tr()}return!0}h.offset&&k(),v=!0},D,P,I,L,E=function(){x(),D.isActive()&&D.vars.scrollY>c&&(h()>c?D.progress(1)&&h(c):D.resetTo("scrollY",c))};return p&&Ue.set(p,{y:"+=0"}),e.ignoreCheck=function(z){return Kr&&z.type==="touchmove"&&F()||m>1.05&&z.type!=="touchstart"||l.isGesturing||z.touches&&z.touches.length>1},e.onPress=function(){v=!1;var z=m;m=Wa((st.visualViewport&&st.visualViewport.scale||1)/y),D.pause(),z!==m&&Ff(u,m>1.01?!0:r?!1:"x"),P=g(),I=h(),x(),j=Ii},e.onRelease=e.onGestureStart=function(z,G){if(h.offset&&k(),!G)L.restart(!0);else{it.cache++;var ee=M(),T,K;r&&(T=g(),K=T+ee*.05*-z.velocityX/.227,ee*=Ax(g,T,K,mr(u,ln)),D.vars.scrollX=N(K)),T=h(),K=T+ee*.05*-z.velocityY/.227,ee*=Ax(h,T,K,mr(u,Ht)),D.vars.scrollY=C(K),D.invalidate().duration(ee).play(.01),(Kr&&D.vars.scrollY>=c||T>=c-1)&&Ue.to({},{onUpdate:E,duration:ee})}o&&o(z)},e.onWheel=function(){D._ts&&D.pause(),nn()-w>1e3&&(j=0,w=nn())},e.onChange=function(z,G,ee,T,K){if(Ii!==j&&x(),G&&r&&g(N(T[2]===G?P+(z.startX-z.x):g()+G-T[1])),ee){h.offset&&k();var O=K[2]===ee,B=O?I+z.startY-z.y:h()+ee-K[1],J=C(B);O&&B!==J&&(I+=J-B),h(J)}(ee||G)&&Tr()},e.onEnable=function(){Ff(u,r?!1:"x"),at.addEventListener("refresh",E),Yt(st,"resize",E),h.smooth&&(h.target.style.scrollBehavior="auto",h.smooth=g.smooth=!1),b.enable()},e.onDisable=function(){Ff(u,!0),Vt(st,"resize",E),at.removeEventListener("refresh",E),b.kill()},e.lockAxis=e.lockAxis!==!1,l=new At(e),l.iOS=Kr,Kr&&!h()&&h(1),Kr&&Ue.ticker.add(pr),L=l._dc,D=Ue.to(l,{ease:"power4",paused:!0,inherit:!1,scrollX:r?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Ix(h,h(),function(){return D.pause()})},onUpdate:Tr,onComplete:L.vars.onComplete}),l};at.sort=function(t){if(rn(t))return rt.sort(t);var e=st.pageYOffset||0;return at.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+st.innerHeight}),rt.sort(t||function(n,r){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((r.vars.containerAnimation?1e6:r._sortY)+(r.vars.refreshPriority||0)*-1e6)})},at.observe=function(t){return new At(t)},at.normalizeScroll=function(t){if(typeof t>"u")return un;if(t===!0&&un)return un.enable();if(t===!1){un&&un.kill(),un=t;return}var e=t instanceof At?t:Aj(t);return un&&un.target===e.target&&un.kill(),Ci(e.target)&&(un=e),e},at.core={_getVelocityProp:pf,_inputObserver:Ex,_scrollers:it,_proxies:hr,bridge:{ss:function(){On||Di("scrollStart"),On=nn()},ref:function(){return tn}}},px()&&Ue.registerPlugin(at);const Ej=Object.freeze(Object.defineProperty({__proto__:null,ScrollTrigger:at,default:at},Symbol.toStringTag,{value:"Module"}));S.AXIS_Y_ZERO_BREAK_DEFAULT_EXTRA_CLEARANCE_PX=Xp,S.AXIS_Y_ZERO_BREAK_DEFAULT_GAP_PX=Fs,S.AXIS_Y_ZERO_BREAK_MIN_GAP_PX=$s,S.AXIS_ZIGZAG_DEFAULT_AMPLITUDE_PX=Jp,S.AXIS_ZIGZAG_DEFAULT_CYCLES=Kp,S.AXIS_ZIGZAG_DEFAULT_HEIGHT_PX=em,S.AXIS_ZIGZAG_DEFAULT_STEP_X_PX=Qp,S.Account=sc,S.ActionLink=Gx,S.AdaptiveDataGrid=Zc,S.AnimationDurationFast=Jm,S.AnimationDurationNormal=Km,S.AnimationDurationSlow=Qm,S.AnimationEasingBounce=rg,S.AnimationEasingEaseIn=eg,S.AnimationEasingEaseInOut=ng,S.AnimationEasingEaseOut=tg,S.AppointmentCard=Gc,S.AreaSeriesPrimitive=Qk,S.AriaDataGrid=up,S.AriaTabsDataGrid=To,S.AriaTabsDataGridAdaptive=Zc,S.Axis=ou,S.BackLink=Ai,S.BandScalesProvider=tC,S.BarSeriesPrimitive=eC,S.BorderColorCard=Au,S.BorderColorCardHover=Eu,S.BorderColorDefault=Iu,S.BorderColorError=Pu,S.BorderColorForm=Lu,S.BorderRadiusLarge=bg,S.BorderRadiusMedium=yg,S.BorderRadiusNone=mg,S.BorderRadiusSmall=gg,S.BorderWidthCardBottom=dg,S.BorderWidthDefault=lg,S.BorderWidthFormElement=cg,S.BorderWidthFormElementError=ug,S.BorderWidthPanel=fg,S.BorderWidthTableCell=pg,S.BorderWidthTableHeader=hg,S.BrandKey=so,S.BrandThemeProvider=Lv,S.Breadcrumb=Bc,S.Breakpoint=Vf,S.BreakpointDesktop=Ky,S.BreakpointLargeDesktop=Qy,S.BreakpointMobile=Xy,S.BreakpointTablet=Jy,S.Button=Et,S.ButtonBorderRadius=V0,S.ButtonBorderWidth=Y0,S.ButtonPrimaryBackgroundActive=E0,S.ButtonPrimaryBackgroundDefault=L0,S.ButtonPrimaryBackgroundDisabled=P0,S.ButtonPrimaryBackgroundHover=A0,S.ButtonPrimaryBorderDefault=B0,S.ButtonPrimaryBorderFocus=z0,S.ButtonPrimaryTextDefault=F0,S.ButtonPrimaryTextDisabled=$0,S.ButtonSecondaryBackgroundActive=U0,S.ButtonSecondaryBackgroundDefault=O0,S.ButtonSecondaryBackgroundHover=R0,S.ButtonSecondaryBackgroundSolid=H0,S.ButtonSecondaryBorderDefault=G0,S.ButtonSecondaryTextDefault=W0,S.ButtonShadowSize=Z0,S.ButtonSize=oc,S.ButtonSpacingPaddingHorizontalDesktop=rd,S.ButtonSpacingPaddingHorizontalMobile=td,S.ButtonSpacingPaddingVerticalDesktop=nd,S.ButtonSpacingPaddingVerticalMobile=ed,S.ButtonTypographyWeight=q0,S.ButtonVariant=ac,S.Card=Oc,S.CardBackgroundDefault=X0,S.CardBorderBottom=Q0,S.CardBorderDefault=J0,S.CardBorderHover=K0,S.CardBorderWidthBottom=iy,S.CardBorderWidthDefault=ry,S.CardGroup=rw,S.CardGroupItem=iw,S.CardShadowDefault=sy,S.CardShadowHover=ay,S.CardSpacingHeadingMargin=ad,S.CardSpacingPaddingDesktop=sd,S.CardSpacingPaddingMobile=id,S.CardTextDescription=ty,S.CardTextHeading=ey,S.CardTextLink=ny,S.CareCard=sw,S.CharacterCount=tv,S.ChartEnhancer=rC,S.ChartNoScript=nC,S.ChartRoot=Zp,S.Checkbox=Hf,S.Checkboxes=Uf,S.ColorBorderDefault=Tg,S.ColorBorderSecondary=Dg,S.ColorButtonLoginActive=r0,S.ColorButtonLoginBackground=t0,S.ColorButtonLoginHover=n0,S.ColorButtonLoginShadow=i0,S.ColorButtonPrimaryActive=$g,S.ColorButtonPrimaryBackground=Eg,S.ColorButtonPrimaryHover=Fg,S.ColorButtonPrimaryShadow=Bg,S.ColorButtonPrimaryText=Pg,S.ColorButtonReverseActive=qg,S.ColorButtonReverseBackground=Yg,S.ColorButtonReverseHover=Zg,S.ColorButtonReverseShadow=Xg,S.ColorButtonReverseText=Vg,S.ColorButtonSecondaryActive=Wg,S.ColorButtonSecondaryBackground=zg,S.ColorButtonSecondaryBackgroundSolid=Og,S.ColorButtonSecondaryBorder=Hg,S.ColorButtonSecondaryHover=Ug,S.ColorButtonSecondaryShadow=Gg,S.ColorButtonSecondaryText=Rg,S.ColorButtonWarningActive=Qg,S.ColorButtonWarningBackground=Jg,S.ColorButtonWarningHover=Kg,S.ColorButtonWarningShadow=e0,S.ColorError=Ig,S.ColorFocusBackground=Mg,S.ColorFocusText=jg,S.ColorFormBackground=Ag,S.ColorFormBorder=Lg,S.ColorGrey1=qu,S.ColorGrey2=Xu,S.ColorGrey3=Ju,S.ColorGrey4=Ku,S.ColorGrey5=Qu,S.ColorLinkActive=Cg,S.ColorLinkDefault=Sg,S.ColorLinkHover=kg,S.ColorLinkVisited=Ng,S.ColorPrimaryBlack=Bu,S.ColorPrimaryBlue=Fu,S.ColorPrimaryDarkPink=Hu,S.ColorPrimaryGreen=zu,S.ColorPrimaryPurple=Ou,S.ColorPrimaryRed=Ru,S.ColorPrimaryWhite=$u,S.ColorPrimaryYellow=Uu,S.ColorSecondaryAquaGreen=Vu,S.ColorSecondaryOrange=Yu,S.ColorSecondaryPaleYellow=Wu,S.ColorSecondaryPink=Zu,S.ColorSecondaryWarmYellow=Gu,S.ColorTextPrimary=xg,S.ColorTextPrint=wg,S.ColorTextReverse=_g,S.ColorTextSecondary=vg,S.Column=Ei,S.ColumnAlign=qf,S.ComponentBlur=M0,S.ComponentBreadcrumbChevronMarginLeft=x0,S.ComponentBreadcrumbChevronMarginRight=v0,S.ComponentBreadcrumbPaddingTopDesktop=w0,S.ComponentBreadcrumbPaddingTopMobile=_0,S.ComponentButtonPaddingDesktopHorizontal=l0,S.ComponentButtonPaddingDesktopVertical=o0,S.ComponentButtonPaddingMobileHorizontal=a0,S.ComponentButtonPaddingMobileVertical=s0,S.ComponentButtonShadowSize=c0,S.ComponentCardHeadingMargin=g0,S.ComponentCardPaddingDesktop=m0,S.ComponentCardPaddingMobile=p0,S.ComponentDetails=T0,S.ComponentExpander=D0,S.ComponentFormCheckboxLabelPadding=h0,S.ComponentFormCheckboxSize=f0,S.ComponentFormInputMinHeight=u0,S.ComponentFormInputPadding=d0,S.ComponentLink=j0,S.ComponentPagination=I0,S.ComponentPanelPaddingDesktop=b0,S.ComponentPanelPaddingMobile=y0,S.ComponentSpread=N0,S.ComponentSummaryListCellPaddingHorizontal=k0,S.ComponentSummaryListCellPaddingVertical=S0,S.ComponentSummaryListRowMargin=C0,S.Container=uc,S.ContentsList=nw,S.DEFAULT_FONT_CONFIG=_d,S.DashboardSummaryGrid=kw,S.DateInput=bv,S.Details=tp,S.DoDontList=np,S.ElevationHigh=Lb,S.ElevationLow=Db,S.ElevationMedium=Ib,S.ElevationNone=Tb,S.ErrorMessage=fc,S.ErrorSummary=yv,S.Expander=rp,S.FRUTIGER_FONT_FILES=sn,S.Fieldset=ro,S.Float=Zf,S.FocusOutlineOffset=Cb,S.FocusOutlineStyle=Nb,S.FocusOutlineWidth=kb,S.FocusShadowButton=jb,S.FocusShadowInput=Mb,S.FontFamilyBase=qs,S.FontFamilyFallback=Xs,S.FontFamilyPrint=Js,S.FontLineHeightBase=xl,S.FontSize14Mobile=ta,S.FontSize14Print=ra,S.FontSize14Tablet=na,S.FontSize16Mobile=ia,S.FontSize16Print=aa,S.FontSize16Tablet=sa,S.FontSize19Mobile=oa,S.FontSize19Print=ca,S.FontSize19Tablet=la,S.FontSize22Mobile=ua,S.FontSize22Print=fa,S.FontSize22Tablet=da,S.FontSize26Mobile=ha,S.FontSize26Print=ma,S.FontSize26Tablet=pa,S.FontSize36Mobile=ga,S.FontSize36Print=ba,S.FontSize36Tablet=ya,S.FontSize48Mobile=xa,S.FontSize48Print=_a,S.FontSize48Tablet=va,S.FontSizeBase=bl,S.FontWeightBold=Qs,S.FontWeightLight=ea,S.FontWeightNormal=Ks,S.Footer=mc,S.FormBorderRadius=Ny,S.FormBorderWidthDefault=ky,S.FormBorderWidthError=Cy,S.FormErrorTextDefault=_y,S.FormErrorTypographyWeight=wy,S.FormHintTextDefault=Sy,S.FormInputBackgroundDefault=oy,S.FormInputBackgroundDisabled=cy,S.FormInputBackgroundError=uy,S.FormInputBackgroundFocus=ly,S.FormInputBorderDefault=dy,S.FormInputBorderDisabled=py,S.FormInputBorderError=hy,S.FormInputBorderFocus=fy,S.FormInputTextDefault=my,S.FormInputTextDisabled=yy,S.FormInputTextPlaceholder=gy,S.FormLabelTextDefault=by,S.FormLabelTextRequired=xy,S.FormLabelTypographyWeight=vy,S.FormSpacingCheckboxLabelPadding=ud,S.FormSpacingCheckboxSize=cd,S.FormSpacingInputMinHeight=ld,S.FormSpacingInputPadding=od,S.GanttChart=ew,S.Grid=io,S.GridGutter=tb,S.GridGutterHalf=nb,S.GridLines=tm,S.GridPageWidth=eb,S.GridWidth=Er,S.GroupHeader=Kc,S.GroupableDataGrid=Tp,S.Header=oo,S.HeaderSSR=Ev,S.HeaderSearch=th,S.HeaderStatic=oo,S.Heading=Un,S.HeadingsNhsukHeadingL=er,S.HeadingsNhsukHeadingM=tr,S.HeadingsNhsukHeadingS=nr,S.HeadingsNhsukHeadingXl=Qn,S.HeadingsNhsukHeadingXs=rr,S.Hero=nh,S.HierarchyDataManager=Jc,S.Hint=cc,S.Images=gw,S.Input=to,S.InsetText=aw,S.Label=no,S.LayoutColumnActions=qy,S.LayoutColumnFull=Gy,S.LayoutColumnHalf=Yy,S.LayoutColumnQuarter=Zy,S.LayoutColumnThird=Vy,S.LayoutContainerMaxWidth=Wy,S.Legend=Kk,S.LineScalesProvider=qp,S.LineSeriesPrimitive=dm,S.List=Xf,S.LogoVariant=ao,S.MainWrapper=dc,S.MedicationCard=Yc,S.MetricCard=fm,S.NHSBodyText=gN,S.NHSBodyTextLarge=yN,S.NHSBodyTextSmall=bN,S.NHSHeading1=dN,S.NHSHeading2=fN,S.NHSHeading3=hN,S.NHSHeading4=pN,S.NHSHeading5=mN,S.NHSLedeText=xN,S.NHSLedeTextSmall=vN,S.NHSThemeProvider=Sv,S.NHS_FALLBACK_FONT_STACK=EN,S.NHS_FONT_STACK=AN,S.NavigationSplitView=Lp,S.PageTemplate=XS,S.Pagination=tw,S.Panel=Xh,S.ParagraphsBody=ir,S.ParagraphsBodyLarge=sr,S.ParagraphsBodySmall=ar,S.ParagraphsLedeText=or,S.ParagraphsLedeTextSmall=lr,S.ParallaxScene=tN,S.PatientCard=Wc,S.PatternBanner=iN,S.ProductCard=lN,S.ProductCardButtonVariantEnum=Xm,S.ProductCardImageTypeEnum=qm,S.ProductCardLayoutEnum=Ji,S.ProductCardThemeEnum=hi,S.ProductRoadmap=Ep,S.Radios=iv,S.RadiosServer=av,S.ResponsiveDataGrid=Zc,S.ResponsiveDataGridDemo=nS,S.Row=gr,S.SPC=qC,S.SPCChart=Ym,S.SPCMetricCard=JC,S.Select=ws,S.SelectOption=Gf,S.ShadowButtonDefault=bb,S.ShadowButtonFocus=_b,S.ShadowButtonSecondary=xb,S.ShadowButtonWarning=vb,S.ShadowCardDefault=wb,S.ShadowCardHover=Sb,S.SizeButtonMinHeightDesktop=Uy,S.SizeButtonMinHeightMobile=Ry,S.SizeFormControlLarge=Ey,S.SizeFormControlMedium=Ay,S.SizeFormControlSmall=Ly,S.SizeFormInputWidth2xl=Oy,S.SizeFormInputWidth3xl=Hy,S.SizeFormInputWidthLg=By,S.SizeFormInputWidthMd=$y,S.SizeFormInputWidthSm=Fy,S.SizeFormInputWidthXl=zy,S.SizeFormInputWidthXs=Py,S.SizeIconExtraLarge=Dy,S.SizeIconLarge=Ty,S.SizeIconMedium=jy,S.SizeIconNhsDefault=Iy,S.SizeIconSmall=My,S.SkipLink=zc,S.SlotMatrix=vw,S.SortStatusControl=Aw,S.Spacing0=dd,S.Spacing1=fd,S.Spacing2=hd,S.Spacing3=pd,S.Spacing4=md,S.Spacing5=gd,S.Spacing6=yd,S.Spacing7=bd,S.Spacing8=xd,S.Spacing9=vd,S.SpacingResponsive0Mobile=Ko,S.SpacingResponsive0Tablet=Qo,S.SpacingResponsive1Mobile=el,S.SpacingResponsive1Tablet=tl,S.SpacingResponsive2Mobile=nl,S.SpacingResponsive2Tablet=rl,S.SpacingResponsive3Mobile=il,S.SpacingResponsive3Tablet=sl,S.SpacingResponsive4Mobile=al,S.SpacingResponsive4Tablet=ol,S.SpacingResponsive5Mobile=ll,S.SpacingResponsive5Tablet=cl,S.SpacingResponsive6Mobile=ul,S.SpacingResponsive6Tablet=dl,S.SpacingResponsive7Mobile=fl,S.SpacingResponsive7Tablet=hl,S.SpacingResponsive8Mobile=pl,S.SpacingResponsive8Tablet=ml,S.SpacingResponsive9Mobile=gl,S.SpacingResponsive9Tablet=yl,S.SpacingUtilities=cv,S.StateDisabledBackground=mb,S.StateDisabledBorder=gb,S.StateDisabledText=yb,S.StateErrorBackground=rb,S.StateErrorBorder=ib,S.StateErrorText=sb,S.StateInfoBackground=fb,S.StateInfoBorder=hb,S.StateInfoText=pb,S.StateSuccessBackground=ab,S.StateSuccessBorder=ob,S.StateSuccessText=lb,S.StateWarningBackground=cb,S.StateWarningBorder=ub,S.StateWarningText=db,S.StepByStepNavigation=Sw,S.SummaryCard=op,S.SummaryList=ow,S.Table=Zn,S.Tabs=hw,S.Tag=pt,S.TaskList=ip,S.Textarea=Wf,S.TooltipOverlay=Jk,S.TooltipProvider=um,S.TransactionalPageTemplate=JS,S.TransitionButtonDefault=ig,S.TransitionButtonShadow=sg,S.TransitionCardHover=og,S.TransitionInputFocus=ag,S.TreeNodeComponent=Qc,S.VectorGraphicKindEnum=pn,S.VectorGraphicShadowEnum=Ki,S.VisibilityProvider=Zk,S.VitalsCard=Vc,S.WIDTH_FRACTIONS=hv,S.WarningCallout=mw,S.WidthContainer=eu,S.WidthUtilities=dv,S.WorkflowSplitView=lk,S.applyAggregation=Cp,S.applyAggregations=Eo,S.brandLogos=Qf,S.checkFrutigerLoaded=PN,S.createGenericTabsConfig=Io,S.createTCHTabsConfig=zw,S.enhanceDataWithCalculatedFields=Np,S.generateFrutigerFontFace=IN,S.getBrandLogo=hc,S.getResponsiveStyles=uN,S.getSpacingClass=uv,S.getWidthClass=fv,S.preloadFrutigerFonts=LN,S.tchDataConfig=dp,S.useBrand=eh,S.useColors=wN,S.useComponentSpacing=NN,S.useNHSHeadings=MN,S.useNHSParagraphs=jN,S.useNHSTheme=vv,S.useNHSTypographySystem=TN,S.useNavigationSplitDrill=DN,S.useNavigationSplitUrlSync=Dp,S.useNhsFdpBreakpoints=Fo,S.useResponsiveSpacing=CN,S.useResponsiveValue=nk,S.useSpacing=SN,S.useSpc=Vm,S.useTokens=_N,S.useTypography=kN,Object.defineProperty(S,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.js.map
