(function(b,E){typeof exports=="object"&&typeof module<"u"?E(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],E):(b=typeof globalThis<"u"?globalThis:b||self,E(b.NHSFDPDesignSystem={},b.React,b.ReactDOM))})(this,(function(b,E,s0){"use strict";function o0(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const Z=o0(E);function l0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ua={exports:{}},Fr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _c;function c0(){if(_c)return Fr;_c=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var l in a)l!=="key"&&(i[l]=a[l])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return Fr.Fragment=t,Fr.jsx=n,Fr.jsxs=n,Fr}var Lr={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xc;function u0(){return xc||(xc=1,process.env.NODE_ENV!=="production"&&(function(){function e(O){if(O==null)return null;if(typeof O=="function")return O.$$typeof===P?null:O.displayName||O.name||null;if(typeof O=="string")return O;switch(O){case h:return"Fragment";case y:return"Profiler";case m:return"StrictMode";case $:return"Suspense";case N:return"SuspenseList";case x:return"Activity"}if(typeof O=="object")switch(typeof O.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),O.$$typeof){case _:return"Portal";case j:return(O.displayName||"Context")+".Provider";case C:return(O._context.displayName||"Context")+".Consumer";case k:var W=O.render;return O=O.displayName,O||(O=W.displayName||W.name||"",O=O!==""?"ForwardRef("+O+")":"ForwardRef"),O;case T:return W=O.displayName||null,W!==null?W:e(O.type)||"Memo";case w:W=O._payload,O=O._init;try{return e(O(W))}catch{}}return null}function t(O){return""+O}function n(O){try{t(O);var W=!1}catch{W=!0}if(W){W=console;var z=W.error,le=typeof Symbol=="function"&&Symbol.toStringTag&&O[Symbol.toStringTag]||O.constructor.name||"Object";return z.call(W,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",le),t(O)}}function r(O){if(O===h)return"<>";if(typeof O=="object"&&O!==null&&O.$$typeof===w)return"<...>";try{var W=e(O);return W?"<"+W+">":"<...>"}catch{return"<...>"}}function a(){var O=D.A;return O===null?null:O.getOwner()}function i(){return Error("react-stack-top-frame")}function o(O){if(v.call(O,"key")){var W=Object.getOwnPropertyDescriptor(O,"key").get;if(W&&W.isReactWarning)return!1}return O.key!==void 0}function l(O,W){function z(){S||(S=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",W))}z.isReactWarning=!0,Object.defineProperty(O,"key",{get:z,configurable:!0})}function u(){var O=e(this.type);return I[O]||(I[O]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),O=this.props.ref,O!==void 0?O:null}function c(O,W,z,le,V,ue,we,fe){return z=ue.ref,O={$$typeof:g,type:O,key:W,props:ue,_owner:V},(z!==void 0?z:null)!==null?Object.defineProperty(O,"ref",{enumerable:!1,get:u}):Object.defineProperty(O,"ref",{enumerable:!1,value:null}),O._store={},Object.defineProperty(O._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(O,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(O,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:we}),Object.defineProperty(O,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:fe}),Object.freeze&&(Object.freeze(O.props),Object.freeze(O)),O}function d(O,W,z,le,V,ue,we,fe){var he=W.children;if(he!==void 0)if(le)if(F(he)){for(le=0;le<he.length;le++)f(he[le]);Object.freeze&&Object.freeze(he)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(he);if(v.call(W,"key")){he=e(O);var ne=Object.keys(W).filter(function(pe){return pe!=="key"});le=0<ne.length?"{key: someKey, "+ne.join(": ..., ")+": ...}":"{key: someKey}",q[he+le]||(ne=0<ne.length?"{"+ne.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,le,he,ne,he),q[he+le]=!0)}if(he=null,z!==void 0&&(n(z),he=""+z),o(W)&&(n(W.key),he=""+W.key),"key"in W){z={};for(var oe in W)oe!=="key"&&(z[oe]=W[oe])}else z=W;return he&&l(z,typeof O=="function"?O.displayName||O.name||"Unknown":O),c(O,he,ue,V,a(),z,we,fe)}function f(O){typeof O=="object"&&O!==null&&O.$$typeof===g&&O._store&&(O._store.validated=1)}var p=E,g=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),j=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),P=Symbol.for("react.client.reference"),D=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,v=Object.prototype.hasOwnProperty,F=Array.isArray,M=console.createTask?console.createTask:function(){return null};p={react_stack_bottom_frame:function(O){return O()}};var S,I={},L=p.react_stack_bottom_frame.bind(p,i)(),re=M(r(i)),q={};Lr.Fragment=h,Lr.jsx=function(O,W,z,le,V){var ue=1e4>D.recentlyCreatedOwnerStacks++;return d(O,W,z,!1,le,V,ue?Error("react-stack-top-frame"):L,ue?M(r(O)):re)},Lr.jsxs=function(O,W,z,le,V){var ue=1e4>D.recentlyCreatedOwnerStacks++;return d(O,W,z,!0,le,V,ue?Error("react-stack-top-frame"):L,ue?M(r(O)):re)}})()),Lr}var vc;function d0(){return vc||(vc=1,process.env.NODE_ENV==="production"?Ua.exports=c0():Ua.exports=u0()),Ua.exports}var s=d0(),bs={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var wc;function f0(){return wc||(wc=1,(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(i=a(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var l in i)t.call(i,l)&&i[l]&&(o=a(o,l));return o}function a(i,o){return o?i?i+" "+o:i+o:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(bs)),bs.exports}var h0=f0();const ve=l0(h0),p0=({text:e,href:t,openInNewWindow:n=!1,className:r,...a})=>{const i=ve("nhsuk-action-link__link",r);return s.jsx("div",{className:"nhsuk-action-link",children:s.jsxs("a",{className:i,href:t,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,...a,children:[s.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right-circle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"36",height:"36",children:[s.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),s.jsx("path",{d:"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"})]}),s.jsx("span",{className:"nhsuk-action-link__text",children:e})]})})},_s=({ariaLabel:e="Account",items:t=[],className:n,variant:r="default"})=>{if(!t||t.length===0)return null;const a=i=>{const o=i.icon?s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__user",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",role:"img","aria-label":i.icon===!0?"User":void 0,children:s.jsx("path",{d:"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z"})}):null,l=i.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:i.html}}):i.text,u=s.jsxs(s.Fragment,{children:[o,l]});return i.href?s.jsx("a",{className:"nhsuk-account__link nhsuk-header__account-link",href:i.href,children:u}):i.action?s.jsx("form",{className:"nhsuk-account__form",action:i.action,method:i.method||"post",children:s.jsx("button",{className:"nhsuk-account__button",type:"submit",role:"button",children:u})}):s.jsx("span",{children:u})};return s.jsx("nav",{className:ve("nhsuk-account",{"nhsuk-account--white":r==="white"},n),"aria-label":e,children:s.jsx("ul",{className:"nhsuk-account__list",children:t.map((i,o)=>i&&s.jsx("li",{className:ve("nhsuk-account__item nhsuk-header__account-item",i.className),children:a(i)},o))})})};var xs=(e=>(e.Primary="primary",e.Secondary="secondary",e.Reverse="reverse",e.Warning="warning",e.Login="login",e.Metric="metric",e))(xs||{}),vs=(e=>(e.Small="small",e.Default="default",e.Large="large",e))(vs||{});function m0(e){const t=e.variant||"primary",n=e.size||"default",r=!!e.fullWidth,a=["nhs-aria-button",`nhs-aria-button--${t}`,n!=="default"?`nhs-aria-button--${n}`:"",r?"nhs-aria-button--full-width":"",e.className||""].filter(Boolean).join(" ");return{tag:e.href?"a":"button",classes:a,data:{module:"nhs-button"},attrs:e.href?{href:e.href,role:"button"}:{type:"button"},preventDoubleClick:!!e.preventDoubleClick}}const{forwardRef:g0,useCallback:Cn,useState:ws}=Z;function y0(e,t){const{children:n,variant:r=xs.Primary,size:a=vs.Default,fullWidth:i=!1,className:o="",preventDoubleClick:l=!1,...u}=e,[c,d]=ws(!1),[f,p]=ws(!1),[g,_]=ws(!1),h=m0({variant:r,size:a,fullWidth:i,className:o,preventDoubleClick:l,href:"href"in u?u.href:void 0}),m="disabled"in u?u.disabled:u["aria-disabled"]==="true",y={...c&&{"data-pressed":"true"},...f&&{"data-hovered":"true"},...g&&{"data-focused":"true"},...m&&{"data-disabled":"true"}},C=Cn(()=>!m&&d(!0),[m]),j=Cn(()=>d(!1),[]),k=Cn(()=>!m&&p(!0),[m]),$=Cn(()=>{p(!1),d(!1)},[]),N=Cn(()=>_(!0),[]),T=Cn(()=>_(!1),[]),w=Cn(he=>{he.key===" "&&("href"in u||he.currentTarget.getAttribute("role")==="button")&&(he.preventDefault(),he.currentTarget.click())},[u]),x=Cn(he=>{if(l){const ne=he.currentTarget;if(ne.getAttribute("data-processing")==="true"){he.preventDefault();return}ne.setAttribute("data-processing","true"),setTimeout(()=>{ne.removeAttribute("data-processing")},1e3)}},[l]);if("href"in u&&u.href){const{id:he,style:ne,title:oe,["aria-label"]:pe,["aria-describedby"]:K,["aria-labelledby"]:A,tabIndex:B,...G}=u,ae=u;return s.jsx("a",{ref:t,href:ae.href,target:ae.target,rel:ae.rel,className:h.classes,role:"button",draggable:"false","data-module":"nhs-button",...y,...l&&{"data-prevent-double-click":"true"},...G,onKeyDown:Q=>{ae.onKeyDown?.(Q),w(Q)},onClick:Q=>{ae.onClick?.(Q),x(Q)},onMouseDown:Q=>{ae.onMouseDown?.(Q),C()},onMouseUp:Q=>{ae.onMouseUp?.(Q),j()},onMouseEnter:Q=>{ae.onMouseEnter?.(Q),k()},onMouseLeave:Q=>{ae.onMouseLeave?.(Q),$()},onFocus:Q=>{ae.onFocus?.(Q),N()},onBlur:Q=>{ae.onBlur?.(Q),T()},"aria-disabled":ae["aria-disabled"],...ae["aria-disabled"]==="true"&&{tabIndex:-1},id:he,style:ne,title:oe,"aria-label":pe,"aria-describedby":K,"aria-labelledby":A,tabIndex:B,children:n})}const{id:P,style:D,title:v,["aria-label"]:F,["aria-describedby"]:M,["aria-labelledby"]:S,tabIndex:I,name:L,value:re,form:q,formAction:O,formEncType:W,formMethod:z,formNoValidate:le,formTarget:V,autoFocus:ue,...we}=u,fe=u;return s.jsx("button",{ref:t,type:fe.type||"button",disabled:fe.disabled,className:h.classes,"data-module":"nhs-button",...y,...l&&{"data-prevent-double-click":"true"},...fe.disabled&&{"aria-disabled":"true"},...we,onKeyDown:he=>{fe.onKeyDown?.(he),w(he)},onClick:he=>{fe.onClick?.(he),x(he)},onMouseDown:he=>{fe.onMouseDown?.(he),C()},onMouseUp:he=>{fe.onMouseUp?.(he),j()},onMouseEnter:he=>{fe.onMouseEnter?.(he),k()},onMouseLeave:he=>{fe.onMouseLeave?.(he),$()},onFocus:he=>{fe.onFocus?.(he),N()},onBlur:he=>{fe.onBlur?.(he),T()},id:P,style:D,title:v,"aria-label":F,"aria-describedby":M,"aria-labelledby":S,tabIndex:I,name:L,value:re,form:q,formAction:O,formEncType:W,formMethod:z,formNoValidate:le,formTarget:V,autoFocus:ue,children:n})}const ut=g0(y0);ut.displayName="Button";const Va=({text:e="Back",html:t,href:n="#",className:r,element:a="a",onClick:i,...o})=>{const l=ve("nhsuk-back-link",r),u=ve("nhsuk-back-link__link"),c=()=>s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:s.jsx("path",{d:"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"})}),t?s.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e]});return s.jsx("div",{className:l,children:a==="button"?s.jsx("button",{className:u,onClick:i,type:"button",...o,children:c()}):s.jsx("a",{className:u,href:n,...o,children:c()})})};function b0(e){const{color:t="default",noBorder:n,closable:r,disabled:a,className:i}=e;return{classes:["nhsuk-tag",t!=="default"?`nhsuk-tag--${t}`:"",n?"nhsuk-tag--no-border":"",r?"nhsuk-tag--closable":"",a?"nhsuk-tag--disabled":"",i||""].filter(Boolean).join(" "),showClose:!!r,disabled:!!a}}const He=({text:e,html:t,children:n,color:r="default",noBorder:a=!1,closable:i=!1,onClose:o,disabled:l=!1,className:u,...c})=>{const d=b0({color:r,noBorder:a,closable:i,disabled:l,className:u}),f=p=>{p.preventDefault(),p.stopPropagation(),!l&&o&&o()};return s.jsxs("strong",{className:d.classes,...c,children:[n||(t?s.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e),i&&s.jsx("button",{type:"button",className:"nhsuk-tag__close",onClick:f,disabled:l,"aria-label":"Remove",title:"Remove",children:"Ã—"})]})},Sc=({id:e,name:t,checked:n,defaultChecked:r=!1,disabled:a=!1,value:i="true",hint:o,errorMessage:l,className:u,children:c,onChange:d,onBlur:f,onFocus:p,attributes:g,..._})=>{const[h,m]=E.useState(r),y=n!==void 0,C=y?n:h;E.useEffect(()=>{y||m(r)},[r,y]);const j=w=>{const x=w.target.checked;y||m(x),d?.(x,w)},k=o?`${e}-hint`:void 0,$=l?`${e}-error`:void 0,N=[k,$].filter(Boolean).join(" ")||void 0,T=ve("nhsuk-form-group",{"nhsuk-form-group--error":!!l},u);return s.jsx("div",{className:T,..._,children:s.jsx("div",{className:"nhsuk-checkboxes",children:s.jsxs("div",{className:"nhsuk-checkboxes__item",children:[s.jsx("input",{className:"nhsuk-checkboxes__input",id:e,name:t||e,type:"checkbox",value:i,checked:C,disabled:a,onChange:j,onBlur:f,onFocus:p,"aria-describedby":N,...g}),s.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:e,children:c}),o&&s.jsx("div",{id:k,className:"nhsuk-checkboxes__hint",children:o}),l&&s.jsxs("div",{id:$,className:"nhsuk-error-message nhsuk-checkboxes__error",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]})]})})})};Sc.displayName="Checkbox";function kc(e){const n=(e.type||"text")==="range";return{classes:["nhsuk-input",e.hasError?"nhsuk-input--error":"",n?"nhsuk-input--range":"",!n&&e.width&&e.width!=="full"?`nhsuk-input--width-${e.width}`:"",e.className||""].filter(Boolean).join(" "),isRange:n}}const Ga=({id:e,name:t,type:n="text",value:r,defaultValue:a,placeholder:i,disabled:o=!1,readOnly:l=!1,required:u=!1,hasError:c=!1,describedBy:d,className:f,width:p="full",inputMode:g,autoComplete:_,maxLength:h,minLength:m,pattern:y,step:C,min:j,max:k,showValueLabels:$=!1,showCurrentValue:N=!1,valueLabels:T,onChange:w,onBlur:x,onFocus:P,onKeyDown:D,...v})=>{const[F,M]=E.useState(r||a||(n==="range"?j||"0":""));E.useEffect(()=>{r!==void 0&&M(r)},[r]);const S=V=>{const ue=V.target;M(ue.value),("type"in V&&V.nativeEvent||V.type==="keydown")&&w?.(V)},{classes:I,isRange:L}=kc({type:n,hasError:c,width:p,className:f}),re=r!==void 0,q={id:e,name:t,type:n,placeholder:i,disabled:o,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:_,maxLength:h,minLength:m,pattern:y,step:C,min:j,max:k,onChange:S,onBlur:x,onFocus:P,onKeyDown:V=>{if(L&&/[0-9]/.test(V.key)){const ue=(F?.toString()||"")+V.key;V.target.value=ue,S(V)}D?.(V)},...v},O=!re&&a!==void 0?{defaultValue:a}:{},W=re?{value:r}:{},z=()=>s.jsx("input",{className:I,...W,...O,"data-current-value":F,...q}),le=L?s.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[$&&s.jsxs("div",{className:"nhsuk-input-range-labels",children:[s.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:T?.min||j||"0"}),z(),s.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:T?.max||k||"100"})]}),!$&&z(),N&&s.jsx("div",{className:"nhsuk-input-range-current-value",children:s.jsxs("span",{className:"nhsuk-input-range-current-label",children:[T?.current||"Current value:"," ",s.jsx("strong",{children:F})]})})]}):null;return L?le:s.jsx("input",{className:I,id:e,name:t,type:n,value:r,...r===void 0&&a!==void 0?{defaultValue:a}:{},placeholder:i,disabled:o,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:_,maxLength:h,minLength:m,pattern:y,step:C,min:j,max:k,onChange:w,onBlur:x,onFocus:P,onKeyDown:D,...v})};function _0(e){const t=e.size||"m",n=["nhsuk-label",t!=="m"?`nhsuk-label--${t}`:"",e.className||""].filter(Boolean).join(" ");return{tag:e.isPageHeading?"h1":"label",classes:n,size:t,htmlFor:e.isPageHeading?void 0:e.htmlFor,isPageHeading:!!e.isPageHeading}}const Ya=({htmlFor:e,className:t,isPageHeading:n=!1,size:r="m",children:a,...i})=>{const o=_0({size:r,isPageHeading:n,className:t,htmlFor:e}),l=o.tag;return s.jsx(l,{className:o.classes,htmlFor:o.htmlFor,...i,children:n?s.jsx("label",{className:"nhsuk-label-wrapper",htmlFor:e,children:a}):a})};function x0(e){const t=["nhsuk-fieldset",e.className||""].filter(Boolean).join(" "),n=e.legend?["nhsuk-fieldset__legend",e.legend.size?`nhsuk-fieldset__legend--${e.legend.size}`:"",e.legend.className||""].filter(Boolean).join(" "):void 0;return{fieldsetClasses:t,legendClasses:n,legendIsPageHeading:!!e.legend?.isPageHeading,describedBy:e.describedBy}}const qa=({children:e,legend:t,className:n,describedBy:r,...a})=>{const i=x0({className:n,describedBy:r,legend:t?{size:t.size,className:t.className,isPageHeading:t.isPageHeading}:void 0}),o=()=>{const l=t?.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:t.html}}):t?.text;return i.legendIsPageHeading?s.jsx("h1",{className:"nhsuk-fieldset__heading",children:l}):l};return s.jsxs("fieldset",{className:i.fieldsetClasses,"aria-describedby":i.describedBy,...a,children:[t&&(t.text||t.html)&&s.jsx("legend",{className:i.legendClasses,children:o()}),e]})};function v0(e){const t=["nhsuk-checkboxes",e.small?"nhsuk-checkboxes--small":"",e.className||""].filter(Boolean).join(" "),n=["nhsuk-form-group",e.hasError?"nhsuk-form-group--error":""].filter(Boolean).join(" ");return{classes:t,formGroupClasses:n}}const Cc=({items:e,name:t,idPrefix:n,legend:r,isPageHeading:a=!1,legendSize:i="l",hint:o,errorMessage:l,className:u="",small:c=!1,onChange:d,fieldsetAttributes:f,attributes:p,...g})=>{const[_,h]=E.useState(e.filter(w=>w.checked).map(w=>w.value)),m=n||t,y=o?`${m}-hint`:void 0,C=l?`${m}-error`:void 0,j=[y,C].filter(Boolean).join(" ")||void 0,k=(w,x)=>{let P;x?P=[..._,w]:P=_.filter(D=>D!==w),h(P),d?.(P)},$=()=>e.map((w,x)=>{const P=`${m}-${x+1}`,D=`${P}-conditional`,v=_.includes(w.value),F=w.disabled||!1;return s.jsxs("div",{className:"nhsuk-checkboxes__item",children:[s.jsx("input",{className:"nhsuk-checkboxes__input",id:P,name:t,type:"checkbox",value:w.value,checked:v,disabled:F,onChange:M=>k(w.value,M.target.checked),"aria-describedby":w.hint?`${P}-hint`:j,...w.conditional&&{"aria-controls":D,"aria-expanded":v?"true":"false"},...w.attributes}),s.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:P,children:w.text}),w.hint&&s.jsx("div",{id:`${P}-hint`,className:"nhsuk-checkboxes__hint",children:w.hint}),w.conditional&&s.jsx("div",{className:ve("nhsuk-checkboxes__conditional",{"nhsuk-checkboxes__conditional--hidden":!v}),id:D,children:typeof w.conditional=="object"&&w.conditional!==null&&"label"in w.conditional&&"id"in w.conditional&&"name"in w.conditional?s.jsxs("div",{style:{marginTop:"16px"},children:[w.conditional.label&&s.jsx(Ya,{htmlFor:w.conditional.id,children:w.conditional.label}),s.jsx(Ga,{...w.conditional})]}):w.conditional})]},w.value)}),{classes:N,formGroupClasses:T}=v0({small:c,className:u,hasError:!!l});return s.jsx("div",{className:T,...p,...g,children:s.jsxs(qa,{legend:r?{text:r,isPageHeading:a,size:i}:void 0,describedBy:j,...f,children:[o&&s.jsx("div",{id:y,className:"nhsuk-hint",children:o}),l&&s.jsxs("div",{id:C,className:"nhsuk-error-message",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]}),s.jsx("div",{className:N,children:$()})]})})};Cc.displayName="Checkboxes";function w0(e){const t=e.resize??"vertical";return{classes:["nhsuk-textarea",e.hasError?"nhsuk-textarea--error":"",t!=="vertical"?`nhsuk-textarea--resize-${t}`:"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}const Tc=({id:e,name:t,value:n,defaultValue:r,placeholder:a,disabled:i=!1,readOnly:o=!1,required:l=!1,hasError:u=!1,describedBy:c,className:d,rows:f=5,cols:p,maxLength:g,minLength:_,wrap:h="soft",resize:m="vertical",autoComplete:y,spellCheck:C,onChange:j,onBlur:k,onFocus:$,onKeyDown:N,...T})=>{const{classes:w,describedBy:x}=w0({hasError:u,resize:m,className:d,describedBy:c});return s.jsx("textarea",{className:w,id:e,name:t,value:n,defaultValue:r,placeholder:a,disabled:i,readOnly:o,required:l,"aria-describedby":x,rows:f,cols:p,maxLength:g,minLength:_,wrap:h,autoComplete:y,spellCheck:C,onChange:j,onBlur:k,onFocus:$,onKeyDown:N,...T})};function S0(e){return{classes:["nhsuk-hint",e.className||""].filter(Boolean).join(" "),id:e.id}}const Ss=({id:e,className:t,children:n,...r})=>{const a=S0({id:e,className:t});return s.jsx("div",{className:a.classes,id:a.id,...r,children:n})},k0=({id:e,maxLength:t,maxWords:n,threshold:r=75,name:a,value:i,defaultValue:o,rows:l,className:u,countMessage:c,onCountChange:d,onChange:f,...p})=>{const g=i??o??"",[_,h]=E.useState(g),[m,y]=E.useState(0),[C,j]=E.useState(!1),[k,$]=E.useState(!1),N=E.useCallback(v=>n?v.trim()===""?0:v.trim().split(/\s+/).length:v.length,[n]);E.useEffect(()=>{const v=N(_),F=t||n||0,M=F-v,S=Math.floor(F*(r/100));y(M),j(v>F),$(v>=S||v>F),d&&d(v,M)},[_,t,n,r,N,d]);const T=v=>{const F=v.target.value;h(F),f&&f(v)},w=()=>{const v=t||n||0,F=n?"word":"character",M=n?"words":"characters";if(!k)return`You can enter up to ${v} ${v===1?F:M}`;if(C){const S=Math.abs(m);return`You have ${S} ${S===1?F:M} too many`}else return`You have ${m} ${m===1?F:M} remaining`},x=ve("nhsuk-character-count",u),P=ve("nhsuk-character-count__message",{"nhsuk-character-count__message--disabled":!k,"nhsuk-error-message":C},c?.classes),D=ve("nhsuk-js-character-count",{"nhsuk-textarea--error":C});return s.jsxs("div",{className:x,"data-module":"nhsuk-character-count","data-maxlength":t,"data-maxwords":n,"data-threshold":r,"data-testid":"character-count",children:[s.jsx(Tc,{id:e,name:a,value:i!==void 0?_:void 0,defaultValue:i===void 0?o??_:void 0,rows:l,className:D,onChange:T,"aria-describedby":`${e}-info`,"aria-invalid":C||void 0,...p}),s.jsx(Ss,{id:`${e}-info`,className:P,role:"status","aria-live":"polite",children:w()})]})};function C0(e){return{classes:["nhsuk-select",e.hasError?"nhsuk-select--error":"",e.className||""].filter(Boolean).join(" ")}}const Nc=({value:e,disabled:t=!1,selected:n=!1,className:r,children:a,...i})=>{const o=ve("nhsuk-select__option",r);return s.jsx("option",{className:o,value:e,disabled:t,...i,children:a})},Ar=({id:e,name:t,ariaLabel:n,value:r,defaultValue:a,disabled:i=!1,required:o=!1,hasError:l=!1,describedBy:u,className:c,multiple:d=!1,size:f,autoComplete:p,options:g,children:_,onChange:h,onBlur:m,onFocus:y,...C})=>{const{classes:j}=C0({hasError:l,className:c}),k=()=>g?g.map((N,T)=>s.jsx("option",{value:N.value,disabled:N.disabled,"data-initial-selected":N.selected||void 0,children:N.text},`${N.value}-${T}`)):null,$=a===void 0&&r===void 0&&g?g.find(N=>N.selected)?.value:void 0;return s.jsx("select",{className:j,id:e,name:t,"aria-label":n,value:r,defaultValue:a!==void 0?a:$,disabled:i,required:o,"aria-describedby":u,multiple:d,size:f,autoComplete:p,onChange:h,onBlur:m,onFocus:y,...C,children:_||k()})};Ar.Option=Nc;function T0(e){return{classes:["nhsuk-radios",e.hasError?"nhsuk-radios--error":"",e.size==="small"?"nhsuk-radios--small":"",e.inline?"nhsuk-radios--inline":"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}function jc(e,{variant:t,selectedValue:n,enableBehaviourAttr:r,handleChange:a,handleBlur:i,handleFocus:o,handleKeyDown:l,itemsRef:u,InputComponent:c}){const{onChange:d,onBlur:f,onFocus:p,...g}=e,{name:_,hasError:h=!1,describedBy:m,className:y,size:C="normal",inline:j=!1,options:k,...$}=g,{classes:N,describedBy:T}=T0({hasError:h,size:C,inline:j,className:y,describedBy:m});return s.jsx(qa,{children:s.jsx("div",{className:N,...$,...r?{"data-nhs-behaviour":"radios"}:{},children:k.map((w,x)=>{const P=`${_}-${x}`,D=w.conditional?`${P}-conditional`:void 0,v=n===w.value;return s.jsxs("div",{className:"nhsuk-radios__item",children:[s.jsx("input",{className:"nhsuk-radios__input",id:P,name:_,type:"radio",value:w.value,disabled:w.disabled,...t==="client"?{checked:v,onChange:a,onBlur:i,onFocus:o,onKeyDown:l,ref:F=>{F&&u&&(u.current[x]=F)}}:{defaultChecked:v,"data-nhs-radios-input":!0},"aria-describedby":T}),s.jsx("label",{className:"nhsuk-radios__label",htmlFor:P,children:w.text}),w.hint&&s.jsx("div",{className:"nhsuk-radios__hint",children:w.hint}),w.conditional&&s.jsx("div",{className:ve("nhsuk-radios__conditional",{"nhsuk-radios__conditional--hidden":!v}),id:D,...t==="server"?{"data-nhs-radios-conditional":!0}:{},children:typeof w.conditional=="object"&&w.conditional!==null&&"label"in w.conditional&&"id"in w.conditional&&"name"in w.conditional?s.jsxs("div",{style:{marginTop:"16px"},children:[w.conditional.label&&s.jsx(Ya,{htmlFor:w.conditional.id,children:w.conditional.label}),s.jsx(c,{...w.conditional})]}):w.conditional})]},w.value)})})})}const N0=({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:a,...i})=>{const[o,l]=E.useState(e||t||""),u=E.useRef([]),c=E.useRef(o),d=g=>{const _=g.target.value;_!==c.current&&(c.current=_,l(_),n?.(g))},f=g=>{a?.(g)},p=E.useCallback(g=>{const{key:_}=g;if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(_))return;g.preventDefault();const h=u.current.filter(j=>j&&!j.disabled),m=h.indexOf(g.currentTarget);if(m===-1)return;let y=m;["ArrowDown","ArrowRight"].includes(_)?y=(m+1)%h.length:["ArrowUp","ArrowLeft"].includes(_)&&(y=(m-1+h.length)%h.length);const C=h[y];C&&(C.focus(),C.checked||C.click())},[]);return jc({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:a,...i},{variant:"client",selectedValue:o,enableBehaviourAttr:!1,handleChange:d,handleBlur:r,handleFocus:f,handleKeyDown:p,itemsRef:u,InputComponent:Ga})};function j0(e){const{id:t,name:n,type:r="text",value:a,defaultValue:i,placeholder:o,disabled:l=!1,readOnly:u=!1,required:c=!1,hasError:d=!1,describedBy:f,className:p,width:g="full",inputMode:_,autoComplete:h,maxLength:m,minLength:y,pattern:C,step:j,min:k,max:$,showValueLabels:N=!1,showCurrentValue:T=!1,valueLabels:w,onChange:x,onBlur:P,onFocus:D,onKeyDown:v,...F}=e,{classes:M,isRange:S}=kc({type:r,hasError:d,width:g,className:p}),I={id:t,name:n,type:r,placeholder:o,disabled:l,readOnly:u,required:c,"aria-describedby":f,inputMode:_,autoComplete:h,maxLength:m,minLength:y,pattern:C,step:j,min:k,max:$,...F};if(S){const L=a??i??(typeof k<"u"?String(k):"0"),re=s.jsx("input",{className:M,...a!==void 0?{value:a}:{},...a===void 0&&i!==void 0?{defaultValue:i}:{},"data-current-value":L,...I});return s.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[N?s.jsxs("div",{className:"nhsuk-input-range-labels",children:[s.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:w?.min||k||"0"}),re,s.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:w?.max||$||"100"})]}):re,T&&s.jsx("div",{className:"nhsuk-input-range-current-value",children:s.jsxs("span",{className:"nhsuk-input-range-current-label",children:[w?.current||"Current value:"," ",s.jsx("strong",{children:L})]})})]})}return s.jsx("input",{className:M,...a!==void 0?{value:a}:{},...a===void 0&&i!==void 0?{defaultValue:i}:{},...I})}const D0=({value:e,defaultValue:t,...n})=>{const r=e||t||"";return jc({value:e,defaultValue:t,...n},{variant:"server",selectedValue:r,enableBehaviourAttr:!0,InputComponent:j0})};var Tn=(e=>(e.OneQuarter="one-quarter",e.OneThird="one-third",e.OneHalf="one-half",e.TwoThirds="two-thirds",e.ThreeQuarters="three-quarters",e.Full="full",e))(Tn||{}),Dc=(e=>(e.Mobile="mobile",e.Tablet="tablet",e.Desktop="desktop",e.LargeDesktop="large-desktop",e))(Dc||{}),Mc=(e=>(e.Left="left",e.Right="right",e))(Mc||{}),$c=(e=>(e.Left="left",e.Center="center",e.Right="right",e))($c||{});const ks=({children:e,className:t,fluid:n=!1,maxWidth:r,style:a,...i})=>{const o=ve({"nhsuk-width-container":!n,"nhsuk-width-container-fluid":n},t),l=r?{maxWidth:r,...a||{}}:a;return s.jsx("div",{className:o,style:l,...i,children:e})},Nn=({children:e,className:t,style:n,...r})=>{const a=ve("nhsuk-grid-row",t);return s.jsx("div",{className:a,style:n,...r,children:e})},or=({children:e,width:t=Tn.Full,mobileWidth:n,tabletWidth:r,desktopWidth:a,start:i,className:o,forceWidth:l=!1,style:u,align:c,...d})=>{const f=ve({[`nhsuk-grid-column-${t}`]:!l,[`nhsuk-u-${t}`]:l,[`nhsuk-u-${n}-mobile`]:!!n,[`nhsuk-u-${r}-tablet`]:!!r,[`nhsuk-u-${a}-desktop`]:!!a,[`nhsuk-grid-column-start-${i}`]:i&&i>=1&&i<=7,...c?{[`nhsuk-grid-align-${c}`]:!0}:{}},o);return s.jsx("div",{className:f,style:u,...d,children:e})},Xa=({children:e,className:t,style:n,...r})=>{const i=E.Children.toArray(e)[0],o=E.isValidElement(i)&&(i.type===Nn||typeof i.props=="object"&&i.props&&"className"in i.props&&typeof i.props.className=="string"&&i.props.className.includes("nhsuk-grid-row"));return s.jsx(ks,{className:t,style:n,...r,children:o?e:s.jsx(Nn,{children:e})})},M0=({children:e,type:t="bullet",size:n="medium",border:r=!1,className:a,role:i,as:o,...l})=>{const u=o||(t==="number"?"ol":"ul"),c=ve("nhsuk-list",{"nhsuk-list--bullet":t==="bullet","nhsuk-list--number":t==="number","nhsuk-list--none":t==="none","nhsuk-list--border":r,[`nhsuk-list--${n}`]:n!=="medium"},a);return s.jsx(u,{className:c,role:i,...l,children:e})},$0=({children:e,className:t,...n})=>{const r=ve("nhsuk-list__item",t);return s.jsx("li",{className:r,...n,children:e})},Ic=M0;Ic.Item=$0;const I0=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const a=["nhsuk-spacing-utilities",e&&"nhsuk-spacing-utilities--debug",t].filter(Boolean).join(" ");return s.jsx("div",{className:a,...r,children:n})},P0={margin:e=>`nhsuk-u-margin-${e}`,marginTop:e=>`nhsuk-u-margin-top-${e}`,marginRight:e=>`nhsuk-u-margin-right-${e}`,marginBottom:e=>`nhsuk-u-margin-bottom-${e}`,marginLeft:e=>`nhsuk-u-margin-left-${e}`,padding:e=>`nhsuk-u-padding-${e}`,paddingTop:e=>`nhsuk-u-padding-top-${e}`,paddingRight:e=>`nhsuk-u-padding-right-${e}`,paddingBottom:e=>`nhsuk-u-padding-bottom-${e}`,paddingLeft:e=>`nhsuk-u-padding-left-${e}`,marginResponsive:e=>`nhsuk-u-margin-responsive-${e}`,marginTopResponsive:e=>`nhsuk-u-margin-top-responsive-${e}`,marginRightResponsive:e=>`nhsuk-u-margin-right-responsive-${e}`,marginBottomResponsive:e=>`nhsuk-u-margin-bottom-responsive-${e}`,marginLeftResponsive:e=>`nhsuk-u-margin-left-responsive-${e}`,paddingResponsive:e=>`nhsuk-u-padding-responsive-${e}`,paddingTopResponsive:e=>`nhsuk-u-padding-top-responsive-${e}`,paddingRightResponsive:e=>`nhsuk-u-padding-right-responsive-${e}`,paddingBottomResponsive:e=>`nhsuk-u-padding-bottom-responsive-${e}`,paddingLeftResponsive:e=>`nhsuk-u-padding-left-responsive-${e}`},F0=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const a=["nhsuk-width-utilities",e&&"nhsuk-width-utilities--debug",t].filter(Boolean).join(" ");return s.jsx("div",{className:a,...r,children:n})},L0={width:e=>`nhsuk-u-width-${e}`,widthTablet:e=>`nhsuk-u-width-${e}-tablet`},A0=["full","three-quarters","two-thirds","one-half","one-third","one-quarter"],Cs=({as:e="main",size:t="default",className:n,children:r,...a})=>{const i=["nhsuk-main-wrapper",t==="large"&&"nhsuk-main-wrapper--l",t==="small"&&"nhsuk-main-wrapper--s",n].filter(Boolean).join(" ");return s.jsx(e,{className:i,...a,children:r})};function E0(e){switch(e){case"xxl":case"xl":return 1;case"l":return 2;case"m":return 3;case"s":return 4;case"xs":return 5;default:return 2}}function B0(e){const t=e.level??E0(e.size),n=["nhsuk-heading",e.size?`nhsuk-heading--${e.size}`:"",e.className||""].filter(Boolean).join(" "),r=e.marginBottom?{marginBottom:e.marginBottom}:void 0;return{tag:`h${t}`,classes:n,style:r}}const Vt=({level:e,className:t,text:n,html:r,children:a,size:i,marginBottom:o,...l})=>{const u=B0({level:e,size:i,className:t,marginBottom:o}),c=a||(r?s.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n);return E.createElement(u.tag,{className:u.classes,style:u.style,...l},c)};function R0(e){return{classes:["nhsuk-error-message",e.className||""].filter(Boolean).join(" "),id:e.id,visuallyHiddenText:e.visuallyHiddenText??"Error:"}}const Ts=({id:e,className:t,visuallyHiddenText:n="Error:",children:r,...a})=>{const i=R0({id:e,className:t,visuallyHiddenText:n});return s.jsxs("span",{className:i.classes,id:i.id,...a,children:[s.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[i.visuallyHiddenText," "]}),r]})},H0=({titleText:e="There is a problem",titleHtml:t,descriptionText:n,descriptionHtml:r,errorList:a,className:i,children:o,...l})=>{const u=E.useRef(null);E.useEffect(()=>{u.current&&u.current.focus()},[]);const c=ve("nhsuk-error-summary",i),d=()=>t?s.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,f=()=>r?s.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n,p=g=>{const _=g.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:g.html}}):g.text;return g.href?s.jsx("a",{href:g.href,...g.attributes,children:_}):_};return s.jsxs("div",{ref:u,className:c,"aria-labelledby":"error-summary-title",role:"alert",tabIndex:-1,"data-module":"nhsuk-error-summary",...l,children:[s.jsx("h2",{className:"nhsuk-error-summary__title",id:"error-summary-title",children:d()}),s.jsxs("div",{className:"nhsuk-error-summary__body",children:[o&&s.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:o}),!o&&(n||r)&&s.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:f()}),s.jsx("ul",{className:"nhsuk-list nhsuk-error-summary__list",role:"list",children:a.map((g,_)=>s.jsx("li",{children:p(g)},_))})]})]})},O0=({id:e,className:t,items:n,namePrefix:r,values:a={},fieldset:i,hint:o,errorMessage:l,onChange:u,...c})=>{const[d,f]=E.useState(()=>({day:a.day||"",month:a.month||"",year:a.year||""})),[p,g]=E.useState({}),_=S=>S%4===0&&S%100!==0||S%400===0,h=(S,I)=>{const L=[31,28,31,30,31,30,31,31,30,31,30,31];return S===2&&_(I)?29:L[S-1]},m=(S,I,L)=>{if(!S)return;if(!/^\d+$/.test(S))return"Day must be a number";const re=parseInt(S,10);if(re<1||re>31)return"Day must be between 1 and 31";if(I&&L){const q=parseInt(I,10),O=parseInt(L,10);if(!isNaN(q)&&!isNaN(O)&&q>=1&&q<=12){const W=h(q,O);if(re>W)return`${["January","February","March","April","May","June","July","August","September","October","November","December"][q-1]} ${O} only has ${W} days`}}},y=S=>{if(!S)return;if(!/^\d+$/.test(S))return"Month must be a number";const I=parseInt(S,10);if(I<1||I>12)return"Month must be between 1 and 12"},C=S=>{if(!S)return;if(!/^\d+$/.test(S))return"Year must be a number";const I=parseInt(S,10),L=new Date().getFullYear();if(I<1900||I>L+10)return`Year must be between 1900 and ${L+10}`},j=(S,I,L)=>{if(!S||!I||!L)return;const re=parseInt(S,10),q=parseInt(I,10),O=parseInt(L,10);if(isNaN(re)||isNaN(q)||isNaN(O)||q<1||q>12||O<1900)return;const W=h(q,O);re<1||re>W},k=E.useCallback((S,I)=>{const L={...d,[S]:I};f(L),u&&u(L)},[d,u]),$=E.useCallback(S=>{const I=d[S];let L;if(S==="day")L=m(I,d.month,d.year);else if(S==="month"){if(L=y(I),!L&&d.day){const re=m(d.day,I,d.year);g(q=>({...q,day:re}))}}else if(S==="year"&&(L=C(I),!L&&d.day&&d.month)){const re=m(d.day,d.month,I);g(q=>({...q,day:re}))}if(g(re=>({...re,[S]:L})),d.day&&d.month&&d.year){const re=j(S==="day"?I:d.day,S==="month"?I:d.month,S==="year"?I:d.year);re&&g(q=>({...q,day:re}))}},[d,m,y,C,j]),N=E.useMemo(()=>[{name:"day",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"month",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"year",classes:"nhsuk-input--width-4",inputmode:"numeric",pattern:"[0-9]*"}],[]),T=n||N;let w=i?.describedBy||"";const x=o?`${e}-hint`:"",P=l?`${e}-error`:"";x&&(w=w?`${w} ${x}`:x),P&&(w=w?`${w} ${P}`:P);const D=Object.values(p).some(S=>S),v=ve("nhsuk-form-group",{"nhsuk-form-group--error":l||D}),F=ve("nhsuk-date-input",t),M=()=>s.jsxs(s.Fragment,{children:[o&&s.jsx(Ss,{id:x,className:o.classes,children:o.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:o.html}}):o.text}),l&&s.jsx(Ts,{id:P,className:l.classes,children:l.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text}),Object.entries(p).map(([S,I])=>I?s.jsxs(Ts,{id:`${e}-${S}-error`,className:"nhsuk-error-message",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",I]},`${S}-error`):null),s.jsx("div",{className:F,id:e,"data-testid":"date-input",...c,children:T.map(S=>{const I=S.id||`${e}-${S.name}`,L=r?`${r}[${S.name}]`:S.name,re=S.label||S.name.charAt(0).toUpperCase()+S.name.slice(1),q=p[S.name],O=d[S.name]||"";let W=w;if(q){const z=`${e}-${S.name}-error`;W=W?`${W} ${z}`:z}return s.jsxs("div",{className:"nhsuk-date-input__item",children:[s.jsx(Ya,{htmlFor:I,className:"nhsuk-date-input__label",children:re}),s.jsx(Ga,{id:I,name:L,value:O,className:ve("nhsuk-date-input__input",S.classes,{"nhsuk-input--error":q}),inputMode:S.inputmode,autoComplete:S.autocomplete,pattern:S.pattern,"aria-describedby":W||void 0,hasError:!!q,onChange:z=>k(S.name,z.target.value),onBlur:()=>$(S.name)})]},S.name)})})]});return s.jsx("div",{className:v,children:i?s.jsx(qa,{className:i.classes,legend:i.legend?{text:i.legend}:void 0,describedBy:w||void 0,children:M()}):M()})},Pc={animation:{AnimationDurationFast:"150ms",AnimationDurationNormal:"300ms",AnimationDurationSlow:"500ms",AnimationEasingEaseIn:"cubic-bezier(0.4, 0, 1, 1)",AnimationEasingEaseOut:"cubic-bezier(0, 0, 0.2, 1)",AnimationEasingEaseInOut:"cubic-bezier(0.4, 0, 0.2, 1)",AnimationEasingBounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},transition:{TransitionButtonDefault:"background-color 300ms cubic-bezier(0, 0, 0.2, 1)",TransitionButtonShadow:"box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionInputFocus:"border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionCardHover:"border-color 300ms cubic-bezier(0, 0, 0.2, 1)"},border:{BorderWidthDefault:"1px",BorderWidthFormElement:"2px",BorderWidthFormElementError:"4px",BorderWidthCardBottom:"4px",BorderWidthPanel:"4px",BorderWidthTableHeader:"2px",BorderWidthTableCell:"1px",BorderRadiusNone:"0px",BorderRadiusSmall:"4px",BorderRadiusMedium:"8px",BorderRadiusLarge:"12px",BorderColorDefault:"#d8dde0",BorderColorForm:"#4c6272",BorderColorCard:"#d8dde0",BorderColorCardHover:"#aeb7bd",BorderColorError:"#d5281b"},color:{ColorPrimaryBlue:"#005eb8",ColorPrimaryWhite:"#ffffff",ColorPrimaryBlack:"#212b32",ColorPrimaryGreen:"#007f3b",ColorPrimaryPurple:"#330072",ColorPrimaryDarkPink:"#7c2855",ColorPrimaryRed:"#d5281b",ColorPrimaryYellow:"#ffeb3b",ColorSecondaryPaleYellow:"#fff9c4",ColorSecondaryWarmYellow:"#ffb81c",ColorSecondaryOrange:"#ed8b00",ColorSecondaryAquaGreen:"#00a499",ColorSecondaryPink:"#ae2573",ColorGrey1:"#4c6272",ColorGrey2:"#768692",ColorGrey3:"#aeb7bd",ColorGrey4:"#d8dde0",ColorGrey5:"#f0f4f5",ColorTextPrimary:"#212b32",ColorTextSecondary:"#4c6272",ColorTextReverse:"#ffffff",ColorTextPrint:"#212b32",ColorLinkDefault:"#005eb8",ColorLinkHover:"#7c2855",ColorLinkActive:"#003087",ColorLinkVisited:"#330072",ColorFocusBackground:"#ffeb3b",ColorFocusText:"#212b32",ColorBorderDefault:"#d8dde0",ColorBorderSecondary:"#ffffff33",ColorError:"#d5281b",ColorFormBorder:"#4c6272",ColorFormBackground:"#ffffff",ColorButtonPrimaryBackground:"#007f3b",ColorButtonPrimaryText:"#ffffff",ColorButtonPrimaryHover:"#006530",ColorButtonPrimaryActive:"#004021",ColorButtonPrimaryShadow:"#004021",ColorButtonSecondaryBackground:"#00000000",ColorButtonSecondaryBackgroundSolid:"#ffffff",ColorButtonSecondaryBorder:"#005eb8",ColorButtonSecondaryText:"#005eb8",ColorButtonSecondaryHover:"#d9e5f2",ColorButtonSecondaryActive:"#c7daf0",ColorButtonSecondaryShadow:"#005eb8",ColorButtonReverseBackground:"#ffffff",ColorButtonReverseText:"#212b32",ColorButtonReverseHover:"#d9dde0",ColorButtonReverseActive:"#b3bcc2",ColorButtonReverseShadow:"#b3bcc2",ColorButtonWarningBackground:"#d5281b",ColorButtonWarningHover:"#aa2016",ColorButtonWarningActive:"#6a140e",ColorButtonWarningShadow:"#6a140e",ColorButtonLoginBackground:"#005eb8",ColorButtonLoginHover:"#004b93",ColorButtonLoginActive:"#002f5c",ColorButtonLoginShadow:"#002f5c"},component:{ComponentButtonPaddingMobileVertical:"8px",ComponentButtonPaddingMobileHorizontal:"16px",ComponentButtonPaddingDesktopVertical:"12px",ComponentButtonPaddingDesktopHorizontal:"16px",ComponentButtonShadowSize:"4px",ComponentFormInputMinHeight:"40px",ComponentFormInputPadding:"4px",ComponentFormCheckboxSize:"40px",ComponentFormCheckboxLabelPadding:"12px",ComponentCardPaddingMobile:"16px",ComponentCardPaddingDesktop:"32px",ComponentCardHeadingMargin:"16px",ComponentPanelPaddingMobile:"20px",ComponentPanelPaddingDesktop:"28px",ComponentBreadcrumbChevronMarginLeft:"9px",ComponentBreadcrumbChevronMarginRight:"2px",ComponentBreadcrumbPaddingTopMobile:"16px",ComponentBreadcrumbPaddingTopDesktop:"24px",ComponentSummaryListCellPaddingVertical:"8px",ComponentSummaryListCellPaddingHorizontal:"24px",ComponentSummaryListRowMargin:"16px",ComponentSpread:"4px",ComponentBlur:"4px",ComponentLink:"4px",ComponentDetails:"8px",ComponentExpander:"4px",ComponentPagination:"16px"},button:{ButtonPrimaryBackgroundDefault:"#007f3b",ButtonPrimaryBackgroundHover:"#006530",ButtonPrimaryBackgroundActive:"#004021",ButtonPrimaryBackgroundDisabled:"#d8dde0",ButtonPrimaryTextDefault:"#ffffff",ButtonPrimaryTextDisabled:"#768692",ButtonPrimaryBorderDefault:"#00000000",ButtonPrimaryBorderFocus:"#ffeb3b",ButtonSecondaryBackgroundDefault:"#00000000",ButtonSecondaryBackgroundSolid:"#ffffff",ButtonSecondaryBackgroundHover:"#d9e5f2",ButtonSecondaryBackgroundActive:"#c7daf0",ButtonSecondaryTextDefault:"#005eb8",ButtonSecondaryBorderDefault:"#005eb8",ButtonSpacingPaddingVerticalMobile:"8px",ButtonSpacingPaddingHorizontalMobile:"16px",ButtonSpacingPaddingVerticalDesktop:"12px",ButtonSpacingPaddingHorizontalDesktop:"16px",ButtonBorderWidth:"2px",ButtonBorderRadius:"4px",ButtonShadowSize:"4px",ButtonTypographyWeight:"600"},card:{CardBackgroundDefault:"#ffffff",CardBorderDefault:"#d8dde0",CardBorderHover:"#aeb7bd",CardBorderBottom:"#f0f4f5",CardTextHeading:"#212b32",CardTextDescription:"#212b32",CardTextLink:"#005eb8",CardSpacingPaddingMobile:"16px",CardSpacingPaddingDesktop:"32px",CardSpacingHeadingMargin:"16px",CardBorderWidthDefault:"1px",CardBorderWidthBottom:"4px",CardShadowDefault:"none",CardShadowHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},form:{FormInputBackgroundDefault:"#ffffff",FormInputBackgroundFocus:"#ffffff",FormInputBackgroundDisabled:"#d8dde0",FormInputBackgroundError:"#ffffff",FormInputBorderDefault:"#4c6272",FormInputBorderFocus:"#ffeb3b",FormInputBorderError:"#d5281b",FormInputBorderDisabled:"#aeb7bd",FormInputTextDefault:"#212b32",FormInputTextPlaceholder:"#4c6272",FormInputTextDisabled:"#768692",FormLabelTextDefault:"#212b32",FormLabelTextRequired:"#ffffff",FormLabelTypographyWeight:"600",FormErrorTextDefault:"#d5281b",FormErrorTypographyWeight:"600",FormHintTextDefault:"#4c6272",FormSpacingInputPadding:"4px",FormSpacingInputMinHeight:"40px",FormSpacingCheckboxSize:"40px",FormSpacingCheckboxLabelPadding:"12px",FormBorderWidthDefault:"2px",FormBorderWidthError:"4px",FormBorderRadius:"0px"},size:{SizeIconSmall:"16px",SizeIconMedium:"18px",SizeIconLarge:"24px",SizeIconExtraLarge:"32px",SizeIconNhsDefault:"34px",SizeFormControlSmall:"32px",SizeFormControlMedium:"40px",SizeFormControlLarge:"48px",SizeFormInputWidthXs:"5.4ex",SizeFormInputWidthSm:"7.2ex",SizeFormInputWidthMd:"9ex",SizeFormInputWidthLg:"10.8ex",SizeFormInputWidthXl:"20ex",SizeFormInputWidth2xl:"38ex",SizeFormInputWidth3xl:"56ex",SizeButtonMinHeightMobile:"44px",SizeButtonMinHeightDesktop:"40px"},layout:{LayoutContainerMaxWidth:"1020px",LayoutColumnFull:"100%",LayoutColumnHalf:"50%",LayoutColumnThird:"33.333%",LayoutColumnQuarter:"25%",LayoutColumnActions:"20%"},breakpoint:{BreakpointMobile:"320px",BreakpointTablet:"641px",BreakpointDesktop:"1025px",BreakpointLargeDesktop:"1280px"},grid:{GridPageWidth:"960px",GridGutter:"32px",GridGutterHalf:"16px"},state:{StateErrorBackground:"#d5281b",StateErrorBorder:"#d5281b",StateErrorText:"#ffffff",StateSuccessBackground:"#007f3b",StateSuccessBorder:"#007f3b",StateSuccessText:"#ffffff",StateWarningBackground:"#ffeb3b",StateWarningBorder:"#ffeb3b",StateWarningText:"#212b32",StateInfoBackground:"#005eb8",StateInfoBorder:"#005eb8",StateInfoText:"#ffffff",StateDisabledBackground:"#d8dde0",StateDisabledBorder:"#aeb7bd",StateDisabledText:"#768692"},shadow:{ShadowButtonDefault:"0 4px 0 #004021",ShadowButtonSecondary:"0 4px 0 #005eb8",ShadowButtonWarning:"0 4px 0 #6a140e",ShadowButtonFocus:"0 4px 0 #ffeb3b",ShadowCardDefault:"none",ShadowCardHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},"focus-outline":{FocusOutlineWidth:"4px",FocusOutlineOffset:"0px",FocusOutlineStyle:"solid"},"focus-shadow":{FocusShadowInput:"0 0 0 3px #ffeb3b",FocusShadowButton:"0 0 0 3px #ffeb3b"},elevation:{ElevationNone:"none",ElevationLow:"0 1px 3px rgba(0, 0, 0, 0.12)",ElevationMedium:"0 2px 6px rgba(0, 0, 0, 0.16)",ElevationHigh:"0 4px 12px rgba(0, 0, 0, 0.20)"},spacing:{Spacing0:"0",Spacing1:"4px",Spacing2:"8px",Spacing3:"16px",Spacing4:"24px",Spacing5:"32px",Spacing6:"40px",Spacing7:"48px",Spacing8:"56px",Spacing9:"64px"},"spacing-responsive":{SpacingResponsive0Mobile:"0",SpacingResponsive0Tablet:"0",SpacingResponsive1Mobile:"4px",SpacingResponsive1Tablet:"4px",SpacingResponsive2Mobile:"8px",SpacingResponsive2Tablet:"8px",SpacingResponsive3Mobile:"8px",SpacingResponsive3Tablet:"16px",SpacingResponsive4Mobile:"16px",SpacingResponsive4Tablet:"24px",SpacingResponsive5Mobile:"24px",SpacingResponsive5Tablet:"32px",SpacingResponsive6Mobile:"32px",SpacingResponsive6Tablet:"40px",SpacingResponsive7Mobile:"40px",SpacingResponsive7Tablet:"48px",SpacingResponsive8Mobile:"48px",SpacingResponsive8Tablet:"56px",SpacingResponsive9Mobile:"56px",SpacingResponsive9Tablet:"64px"},font:{FontFamilyBase:"Frutiger W01",FontFamilyFallback:"Arial, Helvetica, sans-serif",FontFamilyPrint:"sans-serif",FontWeightNormal:"400",FontWeightBold:"600",FontWeightLight:"400",FontSize14Mobile:"12px",FontSize14Tablet:"14px",FontSize14Print:"12pt",FontSize16Mobile:"14px",FontSize16Tablet:"16px",FontSize16Print:"12pt",FontSize19Mobile:"16px",FontSize19Tablet:"19px",FontSize19Print:"13pt",FontSize22Mobile:"19px",FontSize22Tablet:"22px",FontSize22Print:"15pt",FontSize26Mobile:"22px",FontSize26Tablet:"26px",FontSize26Print:"17pt",FontSize36Mobile:"27px",FontSize36Tablet:"36px",FontSize36Print:"20pt",FontSize48Mobile:"33px",FontSize48Tablet:"48px",FontSize48Print:"24pt",FontSizeBase:"16px",FontLineHeightBase:"24px"},headings:{xl:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},l:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},m:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},s:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xs:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}}},paragraphs:{body:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bodyLarge:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},bodySmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ledeText:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},ledeTextSmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}}}},Fc=E.createContext(Pc),z0=({children:e,theme:t={}})=>{const n={...Pc,...t};return s.jsx(Fc.Provider,{value:n,children:e})},W0=()=>{const e=E.useContext(Fc);if(!e)throw new Error("useNHSTheme must be used within an NHSThemeProvider");return e};function U0(){return`
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 400;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff") format("woff");
	}
	
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 600;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff") format("woff");
	}
  `}function V0(){if(typeof document>"u"||document.getElementById("nhs-fonts"))return;const e=document.createElement("style");e.id="nhs-fonts",e.textContent=U0(),document.head.appendChild(e)}const G0=({children:e,theme:t})=>(E.useEffect(()=>{V0()},[]),s.jsx(z0,{theme:t,children:e}));function Y0(e,{variant:t,isClient:n,menuOpen:r=!1,showMoreButton:a=!1,visibleItems:i,dropdownVisible:o,toggleMenu:l,navContainerRef:u,navListRef:c,searchNode:d}){const{className:f,logo:p={},service:g={},serviceName:_,organisation:h,search:m,account:y,navigation:C,containerClasses:j,variant:k="default",attributes:$={},maxVisibleItems:N,responsiveNavigation:T=!0,...w}=e,x={...g,text:g?.text??_};"maxVisibleItems"in w&&delete w.maxVisibleItems;const P=x.href&&!p.href||x.href&&x.href===p.href,D=P?x.href:p.href,v=ve("nhsuk-header",{"nhsuk-header--organisation":k==="organisation"||h,"nhsuk-header--white":k==="white"},f),F=ve("nhsuk-header__container",j),M=ve("nhsuk-header__navigation",{"nhsuk-header__navigation--white":C?.white,"nhsuk-header__navigation--justified":C?.justified},C?.className),S=()=>s.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":p.ariaLabel||"NHS",children:[s.jsx("title",{children:p.ariaLabel||"NHS"}),s.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),I=()=>p.src?s.jsx("img",{className:"nhsuk-header__organisation-logo",src:p.src,width:"280",alt:p.ariaLabel||"NHS"}):S(),L=()=>h?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"nhsuk-header__organisation-name",children:[h.name,h.split&&s.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",h.split]})]}),h.descriptor&&s.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:h.descriptor})]}):null,re=(W,z)=>W?z?s.jsx("a",{className:"nhsuk-header__service-name",href:z,children:W}):s.jsx("span",{className:"nhsuk-header__service-name",children:W}):null,q=W=>W.active||W.current?s.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:W.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:W.html}}):W.text}):W.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:W.html}}):W.text,O=()=>s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})});return C?.items,s.jsxs("header",{className:v,role:"banner","data-module":"nhsuk-header",...$,...w,children:[s.jsxs("div",{className:F,children:[s.jsxs("div",{className:"nhsuk-header__service",children:[D?s.jsxs("a",{className:"nhsuk-header__service-logo",href:D,children:[I(),L(),P&&re(x.text)]}):s.jsxs(s.Fragment,{children:[I(),L(),P&&re(x.text)]}),x.text&&!P&&re(x.text,x.href)]}),d??null,s.jsx(_s,{...y,variant:k==="white"?"white":"default"})]}),C&&C.items&&C.items.length>0&&s.jsx("nav",{className:M,"aria-label":C.ariaLabel||"Menu",children:s.jsx("div",{className:ve("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--initializing":n&&t==="client","nhsuk-header__navigation-container--ssr":!n},j),ref:u,children:s.jsxs("ul",{className:"nhsuk-header__navigation-list",ref:c,children:[(C?.items||[]).map((W,z)=>s.jsx("li",{className:ve("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":W.active||W.current,"nhsuk-header__navigation-item--hidden":a&&i!==void 0&&z>=(i??0)},W.className),...W.attributes||{},children:s.jsx("a",{className:"nhsuk-header__navigation-link",href:W.href,...W.active||W.current?{"aria-current":W.current?"page":"true"}:{},children:q(W)})},z)),a&&i!==void 0&&s.jsx("li",{className:"nhsuk-header__navigation-item nhsuk-header__navigation-item--more",children:s.jsxs("button",{className:"nhsuk-header__navigation-button",id:"toggle-more-menu",type:"button","aria-haspopup":"true","aria-expanded":r?"true":"false","aria-controls":"nhsuk-header-more-menu",onClick:l,children:[s.jsx("span",{children:"More"}),O()]})})]})})}),n&&C&&C.items&&C.items.length>0&&r&&o&&s.jsx("div",{className:"nhsuk-header__dropdown-menu",hidden:!o,id:"nhsuk-header-more-menu",children:s.jsx("ul",{className:"nhsuk-header__dropdown-list",children:C.items.slice(i??0).map((W,z)=>s.jsx("li",{className:ve("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":W.active||W.current}),children:s.jsx("a",{className:"nhsuk-header__dropdown-link",href:W.href,...W.active||W.current?{"aria-current":W.current?"page":"true"}:{},onClick:()=>{l?.()},children:q(W)})},`overflow-${(i??0)+z}`))})}),t==="server"]})}const Lc=({mode:e="form",action:t="/search",method:n="get",name:r="q",value:a,placeholder:i="Search",visuallyHiddenLabel:o="Search the NHS website",visuallyHiddenButton:l="Search",className:u,disabled:c=!1,callbacks:d={},isLoading:f=!1,showResults:p=!1,results:g=[],formAttributes:_={},inputAttributes:h={},buttonAttributes:m={},preventDefaultSubmit:y=!1,debounceMs:C=300,minQueryLength:j=1})=>{const[k,$]=E.useState(""),[N,T]=E.useState(!1),w=E.useRef(void 0),x=E.useRef(null),P=E.useRef(null),D=e==="controlled"&&a!==void 0,v=D?a:k,F=E.useCallback(le=>{w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{d.onChange&&le.length>=j&&d.onChange(le)},C)},[d.onChange,C,j]),M=E.useCallback(le=>{const V=le.target.value;D||$(V),e!=="form"&&F(V)},[D,e,F]),S=E.useCallback(le=>{const V=v.trim(),ue={query:V,timestamp:Date.now(),formData:new FormData(le.currentTarget)};e==="controlled"||e==="hybrid"&&y?(le.preventDefault(),d.onSearch&&V.length>=j&&d.onSearch(ue)):e==="hybrid"&&d.onSearch&&V.length>=j&&d.onSearch(ue)},[e,v,d.onSearch,y,j]),I=E.useCallback(()=>{T(!0),d.onFocus?.()},[d.onFocus]),L=E.useCallback(()=>{T(!1),d.onBlur?.()},[d.onBlur]),re=E.useCallback(()=>{D||$(""),d.onClear?.(),P.current?.focus()},[D,d.onClear]);E.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]);const q=()=>s.jsx("svg",{className:ve("nhsuk-icon nhsuk-icon__search",{"nhsuk-icon__search--loading":f}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"})}),O=()=>s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsxs("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[s.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416",repeatCount:"indefinite"})]})}),W=()=>!v||e==="form"?null:s.jsx("button",{type:"button",className:"nhsuk-header__search-clear",onClick:re,"aria-label":"Clear search",children:s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__close",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z"})})}),z=()=>!p||!g.length||!N?null:s.jsx("div",{className:"nhsuk-header__search-results",role:"listbox",children:g.map(le=>s.jsx("div",{className:"nhsuk-header__search-result",role:"option",children:le.href?s.jsxs("a",{href:le.href,className:"nhsuk-header__search-result-link",children:[s.jsx("span",{className:"nhsuk-header__search-result-title",children:le.title}),le.description&&s.jsx("span",{className:"nhsuk-header__search-result-description",children:le.description})]}):s.jsxs("button",{type:"button",className:"nhsuk-header__search-result-button",onClick:()=>d.onSearch?.({query:le.title,timestamp:Date.now()}),children:[s.jsx("span",{className:"nhsuk-header__search-result-title",children:le.title}),le.description&&s.jsx("span",{className:"nhsuk-header__search-result-description",children:le.description})]})},le.id))});return s.jsxs("div",{className:ve("nhsuk-header__search",u,{"nhsuk-header__search--controlled":e==="controlled","nhsuk-header__search--hybrid":e==="hybrid","nhsuk-header__search--loading":f,"nhsuk-header__search--focused":N,"nhsuk-header__search--has-results":p&&g.length>0}),children:[s.jsxs("form",{ref:x,className:"nhsuk-header__search-form",id:"search",action:e!=="controlled"?t:void 0,method:e!=="controlled"?n:void 0,role:"search",onSubmit:S,..._,children:[s.jsx("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field",children:o}),s.jsxs("div",{className:"nhsuk-header__search-input-wrapper",children:[s.jsx("input",{ref:P,className:"nhsuk-header__search-input nhsuk-input",id:"search-field",name:e!=="controlled"?r:void 0,type:"search",placeholder:i,autoComplete:"off",value:v,onChange:M,onFocus:I,onBlur:L,disabled:c||f,...p&&g.length>0?{"aria-expanded":!0,"aria-haspopup":"listbox"}:{},...h}),W()]}),s.jsxs("button",{className:"nhsuk-header__search-submit",type:"submit",disabled:c||f||e!=="form"&&v.length<j,...m,children:[f?O():q(),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:f?"Searching...":l})]})]}),z()]})},Ka=({className:e,logo:t={},service:n={},organisation:r,search:a,account:i,navigation:o,containerClasses:l,variant:u="default",attributes:c={},...d})=>{const[f,p]=E.useState(!1),[g,_]=E.useState(!1),[h,m]=E.useState(o?.items?.length||0),[y,C]=E.useState(!1),[j,k]=E.useState(!1),$=E.useRef(null),N=E.useRef(null),T=E.useRef(!1);E.useEffect(()=>{typeof window>"u"||k(!0)},[]),E.useEffect(()=>{if(typeof document>"u")return;const D=v=>{v.key==="Escape"&&f&&p(!1)};if(f)return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[f]);const w=E.useRef(null),x=E.useCallback(()=>{if(!j||!o?.items||o.items.length===0||T.current)return;const D=$.current,v=N.current;if(!D||!v)return;T.current=!0,D.classList.add("nhsuk-header__navigation-container--measuring");const F=D.clientWidth,M=Array.from(v.children);if(!M.length){D.classList.remove("nhsuk-header__navigation-container--measuring"),T.current=!1;return}if(w.current==null){const V=document.createElement("button");V.type="button",V.className="nhsuk-header__navigation-button nhsuk-header__navigation-button--prototype",V.style.position="absolute",V.style.visibility="hidden",V.style.pointerEvents="none",V.innerHTML="<span>More</span>",D.appendChild(V),w.current=V.getBoundingClientRect().width||104,D.removeChild(V)}const S=w.current+16;let I=0,L=0;const re=window.getComputedStyle(D),q=parseFloat(re.paddingLeft)||0,O=parseFloat(re.paddingRight)||0;let W=q+O;for(const V of M){const ue=V.getBoundingClientRect().width;if(I+ue+S+W>F)break;I+=ue,L+=1}const z=L<o.items.length,le=z?L:o.items.length;_(V=>V===z?V:z),m(V=>V===le?V:le),D.classList.remove("nhsuk-header__navigation-container--measuring"),T.current=!1},[j,o?.items]);E.useEffect(()=>{if(!j)return;const D=$.current;if(!D)return;let v=null;const F=()=>{v==null&&(v=window.requestAnimationFrame(()=>{v=null,x()}))};x();const M=new ResizeObserver(()=>F());return M.observe(D),N.current&&M.observe(N.current),()=>{v!=null&&window.cancelAnimationFrame(v),M.disconnect()}},[j,x]),E.useEffect(()=>{j&&x()},[o?.items?.length,j,x]);const P=D=>{D&&(D.preventDefault(),D.stopPropagation());const v=!f;p(v),C(v)};return Y0({className:e,logo:t,service:n,organisation:r,search:a,account:i,navigation:o,containerClasses:l,variant:u,attributes:c,...d},{variant:"client",isClient:j,menuOpen:f,showMoreButton:g,visibleItems:h,dropdownVisible:y,toggleMenu:P,navContainerRef:$,navListRef:N,searchNode:a?s.jsx(Lc,{...a}):null})};function q0(e,{variant:t,isClient:n}){const{className:r,logo:a={},service:i={},serviceName:o,organisation:l,account:u,navigation:c,containerClasses:d,variant:f="default",attributes:p={},maxVisibleItems:g,responsiveNavigation:_=!0,...h}=e;"maxVisibleItems"in h&&delete h.maxVisibleItems;const m={...i,text:i?.text??o},y=m.href&&!a.href||m.href&&m.href===a.href,C=y?m.href:a.href,j=ve("nhsuk-header",{"nhsuk-header--organisation":f==="organisation"||l,"nhsuk-header--white":f==="white"},r),k=ve("nhsuk-header__container",d),$=ve("nhsuk-header__navigation",{"nhsuk-header__navigation--white":c?.white,"nhsuk-header__navigation--justified":c?.justified},c?.className),N=()=>s.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":a.ariaLabel||"NHS",children:[s.jsx("title",{children:a.ariaLabel||"NHS"}),s.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),T=()=>a.src?s.jsx("img",{className:"nhsuk-header__organisation-logo",src:a.src,width:"280",alt:a.ariaLabel||"NHS"}):N(),w=()=>l?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"nhsuk-header__organisation-name",children:[l.name,l.split&&s.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",l.split]})]}),l.descriptor&&s.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:l.descriptor})]}):null,x=(M,S)=>M?S?s.jsx("a",{className:"nhsuk-header__service-name",href:S,children:M}):s.jsx("span",{className:"nhsuk-header__service-name",children:M}):null,P=M=>M.active||M.current?s.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:M.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:M.html}}):M.text}):M.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:M.html}}):M.text,D=c?.items&&!_,v=D?[]:c?.items,F=D?c.items:[];return s.jsxs("header",{className:j,role:"banner","data-module":"nhsuk-header",...p,...h,children:[s.jsxs("div",{className:k,children:[s.jsxs("div",{className:"nhsuk-header__service",children:[C?s.jsxs("a",{className:"nhsuk-header__service-logo",href:C,children:[T(),w(),y&&x(m.text)]}):s.jsxs(s.Fragment,{children:[T(),w(),y&&x(m.text)]}),m.text&&!y&&x(m.text,m.href)]}),s.jsx(_s,{...u,variant:f==="white"?"white":"default"})]}),c&&c.items&&c.items.length>0&&s.jsx("nav",{className:$,"aria-label":c.ariaLabel||"Menu",children:s.jsx("div",{className:ve("nhsuk-header_navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--ssr":!n},d),children:s.jsx("ul",{className:"nhsuk-header__navigation-list",children:(v||[]).map((M,S)=>s.jsx("li",{className:ve("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":M.active||M.current},M.className),...M.attributes||{},children:s.jsx("a",{className:"nhsuk-header__navigation-link",href:M.href,...M.active||M.current?{"aria-current":M.current?"page":"true"}:{},children:P(M)})},S))})})}),D&&F.length>0&&s.jsx("div",{className:"nhsuk-header__dropdown-menu","data-ssr-overflow":"true",children:s.jsx("ul",{className:"nhsuk-header__dropdown-list",children:F.map((M,S)=>s.jsx("li",{className:ve("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":M.active||M.current}),children:s.jsx("a",{className:"nhsuk-header__dropdown-link",href:M.href,...M.active||M.current?{"aria-current":M.current?"page":"true"}:{},children:P(M)})},`overflow-server-${S}`))})})]})}const X0=e=>q0(e,{variant:"server",isClient:!1}),Ac=({heading:e,headingLevel:t=1,headingClasses:n="",text:r,html:a,imageURL:i,containerClasses:o="",classes:l="",children:u,...c})=>{const d=["nhsuk-hero",i&&e?"nhsuk-hero--image nhsuk-hero--image-description":"",i&&!e?"nhsuk-hero--image":"",l].filter(Boolean).join(" "),f=["nhsuk-width-container",o,i?"":"nhsuk-hero--border"].filter(Boolean).join(" "),p=["nhsuk-hero__heading",n,!u&&!r&&!a?"nhsuk-u-margin-bottom-0":""].filter(Boolean).join(" "),g=u||e||r||a,_=()=>{if(!e)return null;const h={className:p};switch(t){case 1:return s.jsx("h1",{...h,children:e});case 2:return s.jsx("h2",{...h,children:e});case 3:return s.jsx("h3",{...h,children:e});case 4:return s.jsx("h4",{...h,children:e});case 5:return s.jsx("h5",{...h,children:e});case 6:return s.jsx("h6",{...h,children:e});default:return s.jsx("h1",{...h,children:e})}};return s.jsxs("section",{className:d,style:i?{backgroundImage:`url('${i}')`}:void 0,role:"banner",...c,children:[i&&s.jsx("div",{className:"nhsuk-hero__overlay",children:g&&s.jsx("div",{className:f,children:s.jsx("div",{className:"nhsuk-grid-row",children:s.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:s.jsxs("div",{className:"nhsuk-hero-content",children:[_(),u||(a?s.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):r?s.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null),s.jsx("span",{className:"nhsuk-hero__arrow","aria-hidden":"true"})]})})})})}),!i&&g&&s.jsx("div",{className:f,children:s.jsx("div",{className:"nhsuk-grid-row",children:s.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:s.jsxs("div",{className:"nhsuk-hero__wrapper",children:[_(),u||(a?s.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):r?s.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null)]})})})})]})};Ac.displayName="Hero";const Ns=({className:e,links:t=[],linksColumn2:n,linksColumn3:r,metaLinks:a,copyright:i="Â© NHS England",containerClasses:o,attributes:l={},style:u,footerStyle:c,containerStyle:d})=>{const f=(g,_=!1)=>s.jsx("li",{className:ve("nhsuk-footer__list-item",{"nhsuk-footer-default__list-item":_}),children:s.jsx("a",{className:"nhsuk-footer__list-item-link",href:g.URL,target:g.newWindow?"_blank":void 0,rel:g.newWindow?"noopener noreferrer":void 0,children:g.label})},`${g.URL}-${g.label}`),p=!!(n||r);return s.jsx("footer",{role:"contentinfo",...l,style:{...l?.style,...u},children:s.jsxs("div",{className:"nhsuk-footer-container",children:[s.jsxs("div",{className:ve("nhsuk-width-container",o),style:d,children:[s.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Support links"}),s.jsx("div",{className:ve("nhsuk-footer",e),style:c,children:p?s.jsxs(s.Fragment,{children:[t.length>0&&s.jsx("ul",{className:"nhsuk-footer__list",children:t.map(g=>f(g))}),n&&n.length>0&&s.jsx("ul",{className:"nhsuk-footer__list",children:n.map(g=>f(g))}),r&&r.length>0&&s.jsx("ul",{className:"nhsuk-footer__list",children:r.map(g=>f(g))}),a&&a.length>0&&s.jsx("ul",{className:"nhsuk-footer__list nhsuk-footer__meta",children:a.map(g=>f(g))})]}):s.jsxs("ul",{className:"nhsuk-footer__list",children:[t.map(g=>f(g,!0)),(n||[]).map(g=>f(g,!0)),(r||[]).map(g=>f(g,!0)),(a||[]).map(g=>f(g,!0))]})}),!p&&s.jsx("div",{children:s.jsx("p",{className:"nhsuk-footer__copyright",children:i})})]}),p&&s.jsx("div",{className:"nhsuk-width-container",children:s.jsx("div",{children:s.jsx("p",{className:"nhsuk-footer__copyright",children:i})})})]})})};function Za(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function K0(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function js(e){let t,n,r;e.length!==2?(t=Za,n=(l,u)=>Za(e(l),u),r=(l,u)=>e(l)-u):(t=e===Za||e===K0?e:Z0,n=e,r=e);function a(l,u,c=0,d=l.length){if(c<d){if(t(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<0?c=f+1:d=f}while(c<d)}return c}function i(l,u,c=0,d=l.length){if(c<d){if(t(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<=0?c=f+1:d=f}while(c<d)}return c}function o(l,u,c=0,d=l.length){const f=a(l,u,c,d-1);return f>c&&r(l[f-1],u)>-r(l[f],u)?f-1:f}return{left:a,center:o,right:i}}function Z0(){return 0}function J0(e){return e===null?NaN:+e}const Q0=js(Za).right;js(J0).center;function Ec(e,t){let n,r;if(t===void 0)for(const a of e)a!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)));else{let a=-1;for(let i of e)(i=t(i,++a,e))!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)))}return[n,r]}class Bc extends Map{constructor(t,n=ny){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(Rc(this,t))}has(t){return super.has(Rc(this,t))}set(t,n){return super.set(ey(this,t),n)}delete(t){return super.delete(ty(this,t))}}function Rc({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function ey({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function ty({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ny(e){return e!==null&&typeof e=="object"?e.valueOf():e}const ry=Math.sqrt(50),ay=Math.sqrt(10),iy=Math.sqrt(2);function Ja(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=ry?10:i>=ay?5:i>=iy?2:1;let l,u,c;return a<0?(c=Math.pow(10,-a)/o,l=Math.round(e*c),u=Math.round(t*c),l/c<e&&++l,u/c>t&&--u,c=-c):(c=Math.pow(10,a)*o,l=Math.round(e/c),u=Math.round(t/c),l*c<e&&++l,u*c>t&&--u),u<l&&.5<=n&&n<2?Ja(e,t,n*2):[l,u,c]}function sy(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,i,o]=r?Ja(t,e,n):Ja(e,t,n);if(!(i>=a))return[];const l=i-a+1,u=new Array(l);if(r)if(o<0)for(let c=0;c<l;++c)u[c]=(i-c)/-o;else for(let c=0;c<l;++c)u[c]=(i-c)*o;else if(o<0)for(let c=0;c<l;++c)u[c]=(a+c)/-o;else for(let c=0;c<l;++c)u[c]=(a+c)*o;return u}function Ds(e,t,n){return t=+t,e=+e,n=+n,Ja(e,t,n)[2]}function Ms(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?Ds(t,e,n):Ds(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function oy(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++r<a;)i[r]=e+r*n;return i}function Qa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Hc=Symbol("implicit");function Oc(){var e=new Bc,t=[],n=[],r=Hc;function a(i){let o=e.get(i);if(o===void 0){if(r!==Hc)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Bc;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Oc(t,n).unknown(r)},Qa.apply(a,arguments),a}function zc(){var e=Oc().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,i,o,l=!1,u=0,c=0,d=.5;delete e.unknown;function f(){var p=t().length,g=a<r,_=g?a:r,h=g?r:a;i=(h-_)/Math.max(1,p-u+c*2),l&&(i=Math.floor(i)),_+=(h-_-i*(p-u))*d,o=i*(1-u),l&&(_=Math.round(_),o=Math.round(o));var m=oy(p).map(function(y){return _+i*y});return n(g?m.reverse():m)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([r,a]=p,r=+r,a=+a,f()):[r,a]},e.rangeRound=function(p){return[r,a]=p,r=+r,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(u=Math.min(1,c=+p),f()):u},e.paddingInner=function(p){return arguments.length?(u=Math.min(1,p),f()):u},e.paddingOuter=function(p){return arguments.length?(c=+p,f()):c},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return zc(t(),[r,a]).round(l).paddingInner(u).paddingOuter(c).align(d)},Qa.apply(f(),arguments)}function $s(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Wc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Er(){}var Br=.7,ei=1/Br,lr="\\s*([+-]?\\d+)\\s*",Rr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ly=/^#([0-9a-f]{3,8})$/,cy=new RegExp(`^rgb\\(${lr},${lr},${lr}\\)$`),uy=new RegExp(`^rgb\\(${Gt},${Gt},${Gt}\\)$`),dy=new RegExp(`^rgba\\(${lr},${lr},${lr},${Rr}\\)$`),fy=new RegExp(`^rgba\\(${Gt},${Gt},${Gt},${Rr}\\)$`),hy=new RegExp(`^hsl\\(${Rr},${Gt},${Gt}\\)$`),py=new RegExp(`^hsla\\(${Rr},${Gt},${Gt},${Rr}\\)$`),Uc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$s(Er,Hr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vc,formatHex:Vc,formatHex8:my,formatHsl:gy,formatRgb:Gc,toString:Gc});function Vc(){return this.rgb().formatHex()}function my(){return this.rgb().formatHex8()}function gy(){return Zc(this).formatHsl()}function Gc(){return this.rgb().formatRgb()}function Hr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ly.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Yc(t):n===3?new kt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ti(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ti(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cy.exec(e))?new kt(t[1],t[2],t[3],1):(t=uy.exec(e))?new kt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=dy.exec(e))?ti(t[1],t[2],t[3],t[4]):(t=fy.exec(e))?ti(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=hy.exec(e))?Kc(t[1],t[2]/100,t[3]/100,1):(t=py.exec(e))?Kc(t[1],t[2]/100,t[3]/100,t[4]):Uc.hasOwnProperty(e)?Yc(Uc[e]):e==="transparent"?new kt(NaN,NaN,NaN,0):null}function Yc(e){return new kt(e>>16&255,e>>8&255,e&255,1)}function ti(e,t,n,r){return r<=0&&(e=t=n=NaN),new kt(e,t,n,r)}function yy(e){return e instanceof Er||(e=Hr(e)),e?(e=e.rgb(),new kt(e.r,e.g,e.b,e.opacity)):new kt}function Is(e,t,n,r){return arguments.length===1?yy(e):new kt(e,t,n,r??1)}function kt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}$s(kt,Is,Wc(Er,{brighter(e){return e=e==null?ei:Math.pow(ei,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Br:Math.pow(Br,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kt(Hn(this.r),Hn(this.g),Hn(this.b),ni(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qc,formatHex:qc,formatHex8:by,formatRgb:Xc,toString:Xc}));function qc(){return`#${On(this.r)}${On(this.g)}${On(this.b)}`}function by(){return`#${On(this.r)}${On(this.g)}${On(this.b)}${On((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xc(){const e=ni(this.opacity);return`${e===1?"rgb(":"rgba("}${Hn(this.r)}, ${Hn(this.g)}, ${Hn(this.b)}${e===1?")":`, ${e})`}`}function ni(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function On(e){return e=Hn(e),(e<16?"0":"")+e.toString(16)}function Kc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new zt(e,t,n,r)}function Zc(e){if(e instanceof zt)return new zt(e.h,e.s,e.l,e.opacity);if(e instanceof Er||(e=Hr(e)),!e)return new zt;if(e instanceof zt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-a,u=(i+a)/2;return l?(t===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?i+a:2-i-a,o*=60):l=u>0&&u<1?0:o,new zt(o,l,u,e.opacity)}function _y(e,t,n,r){return arguments.length===1?Zc(e):new zt(e,t,n,r??1)}function zt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}$s(zt,_y,Wc(Er,{brighter(e){return e=e==null?ei:Math.pow(ei,e),new zt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Br:Math.pow(Br,e),new zt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new kt(Ps(e>=240?e-240:e+120,a,r),Ps(e,a,r),Ps(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new zt(Jc(this.h),ri(this.s),ri(this.l),ni(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ni(this.opacity);return`${e===1?"hsl(":"hsla("}${Jc(this.h)}, ${ri(this.s)*100}%, ${ri(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Jc(e){return e=(e||0)%360,e<0?e+360:e}function ri(e){return Math.max(0,Math.min(1,e||0))}function Ps(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fs=e=>()=>e;function xy(e,t){return function(n){return e+n*t}}function vy(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function wy(e){return(e=+e)==1?Qc:function(t,n){return n-t?vy(t,n,e):Fs(isNaN(t)?n:t)}}function Qc(e,t){var n=t-e;return n?xy(e,n):Fs(isNaN(e)?t:e)}const eu=(function e(t){var n=wy(t);function r(a,i){var o=n((a=Is(a)).r,(i=Is(i)).r),l=n(a.g,i.g),u=n(a.b,i.b),c=Qc(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=u(d),a.opacity=c(d),a+""}}return r.gamma=e,r})(1);function Sy(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function ky(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Cy(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=Es(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<r;++o)i[o]=a[o](l);return i}}function Ty(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ai(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ny(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Es(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Ls=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,As=new RegExp(Ls.source,"g");function jy(e){return function(){return e}}function Dy(e){return function(t){return e(t)+""}}function My(e,t){var n=Ls.lastIndex=As.lastIndex=0,r,a,i,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=Ls.exec(e))&&(a=As.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,u.push({i:o,x:ai(r,a)})),n=As.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?u[0]?Dy(u[0].x):jy(t):(t=u.length,function(c){for(var d=0,f;d<t;++d)l[(f=u[d]).i]=f.x(c);return l.join("")})}function Es(e,t){var n=typeof t,r;return t==null||n==="boolean"?Fs(t):(n==="number"?ai:n==="string"?(r=Hr(t))?(t=r,eu):My:t instanceof Hr?eu:t instanceof Date?Ty:ky(t)?Sy:Array.isArray(t)?Cy:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ny:ai)(e,t)}function $y(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Iy(e){return function(){return e}}function Py(e){return+e}var tu=[0,1];function cr(e){return e}function Bs(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Iy(isNaN(t)?NaN:.5)}function Fy(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Ly(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=Bs(a,r),i=n(o,i)):(r=Bs(r,a),i=n(i,o)),function(l){return i(r(l))}}function Ay(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Bs(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var u=Q0(e,l,1,r)-1;return i[u](a[u](l))}}function nu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ey(){var e=tu,t=tu,n=Es,r,a,i,o=cr,l,u,c;function d(){var p=Math.min(e.length,t.length);return o!==cr&&(o=Fy(e[0],e[p-1])),l=p>2?Ay:Ly,u=c=null,f}function f(p){return p==null||isNaN(p=+p)?i:(u||(u=l(e.map(r),t,n)))(r(o(p)))}return f.invert=function(p){return o(a((c||(c=l(t,e.map(r),ai)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,Py),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),n=$y,d()},f.clamp=function(p){return arguments.length?(o=p?!0:cr,d()):o!==cr},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,g){return r=p,a=g,d()}}function ru(){return Ey()(cr,cr)}function By(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ii(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ur(e){return e=ii(Math.abs(e)),e?e[1]:NaN}function Ry(e,t){return function(n,r){for(var a=n.length,i=[],o=0,l=e[0],u=0;a>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),i.push(n.substring(a-=l,a+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Hy(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Oy=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function si(e){if(!(t=Oy.exec(e)))throw new Error("invalid format: "+e);var t;return new Rs({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}si.prototype=Rs.prototype;function Rs(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Rs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zy(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var au;function Wy(e,t){var n=ii(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(au=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+ii(e,Math.max(0,t+i-1))[0]}function iu(e,t){var n=ii(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const su={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:By,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>iu(e*100,t),r:iu,s:Wy,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ou(e){return e}var lu=Array.prototype.map,cu=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Uy(e){var t=e.grouping===void 0||e.thousands===void 0?ou:Ry(lu.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?ou:Hy(lu.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"âˆ’":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function c(f){f=si(f);var p=f.fill,g=f.align,_=f.sign,h=f.symbol,m=f.zero,y=f.width,C=f.comma,j=f.precision,k=f.trim,$=f.type;$==="n"?(C=!0,$="g"):su[$]||(j===void 0&&(j=12),k=!0,$="g"),(m||p==="0"&&g==="=")&&(m=!0,p="0",g="=");var N=h==="$"?n:h==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",T=h==="$"?r:/[%p]/.test($)?o:"",w=su[$],x=/[defgprs%]/.test($);j=j===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function P(D){var v=N,F=T,M,S,I;if($==="c")F=w(D)+F,D="";else{D=+D;var L=D<0||1/D<0;if(D=isNaN(D)?u:w(Math.abs(D),j),k&&(D=zy(D)),L&&+D==0&&_!=="+"&&(L=!1),v=(L?_==="("?_:l:_==="-"||_==="("?"":_)+v,F=($==="s"?cu[8+au/3]:"")+F+(L&&_==="("?")":""),x){for(M=-1,S=D.length;++M<S;)if(I=D.charCodeAt(M),48>I||I>57){F=(I===46?a+D.slice(M+1):D.slice(M))+F,D=D.slice(0,M);break}}}C&&!m&&(D=t(D,1/0));var re=v.length+D.length+F.length,q=re<y?new Array(y-re+1).join(p):"";switch(C&&m&&(D=t(q+D,q.length?y-F.length:1/0),q=""),g){case"<":D=v+D+F+q;break;case"=":D=v+q+D+F;break;case"^":D=q.slice(0,re=q.length>>1)+v+D+F+q.slice(re);break;default:D=q+v+D+F;break}return i(D)}return P.toString=function(){return f+""},P}function d(f,p){var g=c((f=si(f),f.type="f",f)),_=Math.max(-8,Math.min(8,Math.floor(ur(p)/3)))*3,h=Math.pow(10,-_),m=cu[8+_/3];return function(y){return g(h*y)+m}}return{format:c,formatPrefix:d}}var oi,uu,du;Vy({thousands:",",grouping:[3],currency:["$",""]});function Vy(e){return oi=Uy(e),uu=oi.format,du=oi.formatPrefix,oi}function Gy(e){return Math.max(0,-ur(Math.abs(e)))}function Yy(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ur(t)/3)))*3-ur(Math.abs(e)))}function qy(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ur(t)-ur(e))+1}function Xy(e,t,n,r){var a=Ms(e,t,n),i;switch(r=si(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=Yy(a,o))&&(r.precision=i),du(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=qy(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=Gy(a))&&(r.precision=i-(r.type==="%")*2);break}}return uu(r)}function Ky(e){var t=e.domain;return e.ticks=function(n){var r=t();return sy(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return Xy(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],l=r[i],u,c,d=10;for(l<o&&(c=o,o=l,l=c,c=a,a=i,i=c);d-- >0;){if(c=Ds(o,l,n),c===u)return r[a]=o,r[i]=l,t(r);if(c>0)o=Math.floor(o/c)*c,l=Math.ceil(l/c)*c;else if(c<0)o=Math.ceil(o*c)/c,l=Math.floor(l*c)/c;else break;u=c}return e},e}function li(){var e=ru();return e.copy=function(){return nu(e,li())},Qa.apply(e,arguments),Ky(e)}function Zy(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}const Hs=new Date,Os=new Date;function ot(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const u=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return u;let c;do u.push(c=new Date(+i)),t(i,l),e(i);while(c<i&&i<o);return u},a.filter=i=>ot(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(Hs.setTime(+i),Os.setTime(+o),e(Hs),e(Os),Math.floor(n(Hs,Os))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?o=>r(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const ci=ot(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ci.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ot(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ci),ci.range;const mn=1e3,At=mn*60,gn=At*60,yn=gn*24,zs=yn*7,fu=yn*30,Ws=yn*365,dr=ot(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*mn)},(e,t)=>(t-e)/mn,e=>e.getUTCSeconds());dr.range;const Us=ot(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mn)},(e,t)=>{e.setTime(+e+t*At)},(e,t)=>(t-e)/At,e=>e.getMinutes());Us.range,ot(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*At)},(e,t)=>(t-e)/At,e=>e.getUTCMinutes()).range;const Vs=ot(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mn-e.getMinutes()*At)},(e,t)=>{e.setTime(+e+t*gn)},(e,t)=>(t-e)/gn,e=>e.getHours());Vs.range,ot(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*gn)},(e,t)=>(t-e)/gn,e=>e.getUTCHours()).range;const Or=ot(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*At)/yn,e=>e.getDate()-1);Or.range;const Gs=ot(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yn,e=>e.getUTCDate()-1);Gs.range,ot(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yn,e=>Math.floor(e/yn)).range;function zn(e){return ot(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*At)/zs)}const ui=zn(0),di=zn(1),Jy=zn(2),Qy=zn(3),fr=zn(4),eb=zn(5),tb=zn(6);ui.range,di.range,Jy.range,Qy.range,fr.range,eb.range,tb.range;function Wn(e){return ot(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/zs)}const hu=Wn(0),fi=Wn(1),nb=Wn(2),rb=Wn(3),hr=Wn(4),ab=Wn(5),ib=Wn(6);hu.range,fi.range,nb.range,rb.range,hr.range,ab.range,ib.range;const zr=ot(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());zr.range,ot(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()).range;const bn=ot(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());bn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ot(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),bn.range;const Un=ot(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Un.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ot(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),Un.range;function sb(e,t,n,r,a,i){const o=[[dr,1,mn],[dr,5,5*mn],[dr,15,15*mn],[dr,30,30*mn],[i,1,At],[i,5,5*At],[i,15,15*At],[i,30,30*At],[a,1,gn],[a,3,3*gn],[a,6,6*gn],[a,12,12*gn],[r,1,yn],[r,2,2*yn],[n,1,zs],[t,1,fu],[t,3,3*fu],[e,1,Ws]];function l(c,d,f){const p=d<c;p&&([c,d]=[d,c]);const g=f&&typeof f.range=="function"?f:u(c,d,f),_=g?g.range(c,+d+1):[];return p?_.reverse():_}function u(c,d,f){const p=Math.abs(d-c)/f,g=js(([,,m])=>m).right(o,p);if(g===o.length)return e.every(Ms(c/Ws,d/Ws,f));if(g===0)return ci.every(Math.max(Ms(c,d,f),1));const[_,h]=o[p/o[g-1][2]<o[g][2]/p?g-1:g];return _.every(h)}return[l,u]}const[ob,lb]=sb(bn,zr,ui,Or,Vs,Us);function Ys(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function qs(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Wr(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function cb(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,c=Ur(a),d=Vr(a),f=Ur(i),p=Vr(i),g=Ur(o),_=Vr(o),h=Ur(l),m=Vr(l),y=Ur(u),C=Vr(u),j={a:L,A:re,b:q,B:O,c:null,d:_u,e:_u,f:Ib,g:zb,G:Ub,H:Db,I:Mb,j:$b,L:xu,m:Pb,M:Fb,p:W,q:z,Q:Tu,s:Nu,S:Lb,u:Ab,U:Eb,V:Bb,w:Rb,W:Hb,x:null,X:null,y:Ob,Y:Wb,Z:Vb,"%":Cu},k={a:le,A:V,b:ue,B:we,c:null,d:wu,e:wu,f:Xb,g:i_,G:o_,H:Gb,I:Yb,j:qb,L:Su,m:Kb,M:Zb,p:fe,q:he,Q:Tu,s:Nu,S:Jb,u:Qb,U:e_,V:t_,w:n_,W:r_,x:null,X:null,y:a_,Y:s_,Z:l_,"%":Cu},$={a:P,A:D,b:v,B:F,c:M,d:yu,e:yu,f:Cb,g:gu,G:mu,H:bu,I:bu,j:vb,L:kb,m:xb,M:wb,p:x,q:_b,Q:Nb,s:jb,S:Sb,u:pb,U:mb,V:gb,w:hb,W:yb,x:S,X:I,y:gu,Y:mu,Z:bb,"%":Tb};j.x=N(n,j),j.X=N(r,j),j.c=N(t,j),k.x=N(n,k),k.X=N(r,k),k.c=N(t,k);function N(ne,oe){return function(pe){var K=[],A=-1,B=0,G=ne.length,ae,Q,de;for(pe instanceof Date||(pe=new Date(+pe));++A<G;)ne.charCodeAt(A)===37&&(K.push(ne.slice(B,A)),(Q=pu[ae=ne.charAt(++A)])!=null?ae=ne.charAt(++A):Q=ae==="e"?" ":"0",(de=oe[ae])&&(ae=de(pe,Q)),K.push(ae),B=A+1);return K.push(ne.slice(B,A)),K.join("")}}function T(ne,oe){return function(pe){var K=Wr(1900,void 0,1),A=w(K,ne,pe+="",0),B,G;if(A!=pe.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(oe&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(B=qs(Wr(K.y,0,1)),G=B.getUTCDay(),B=G>4||G===0?fi.ceil(B):fi(B),B=Gs.offset(B,(K.V-1)*7),K.y=B.getUTCFullYear(),K.m=B.getUTCMonth(),K.d=B.getUTCDate()+(K.w+6)%7):(B=Ys(Wr(K.y,0,1)),G=B.getDay(),B=G>4||G===0?di.ceil(B):di(B),B=Or.offset(B,(K.V-1)*7),K.y=B.getFullYear(),K.m=B.getMonth(),K.d=B.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),G="Z"in K?qs(Wr(K.y,0,1)).getUTCDay():Ys(Wr(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(G+5)%7:K.w+K.U*7-(G+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,qs(K)):Ys(K)}}function w(ne,oe,pe,K){for(var A=0,B=oe.length,G=pe.length,ae,Q;A<B;){if(K>=G)return-1;if(ae=oe.charCodeAt(A++),ae===37){if(ae=oe.charAt(A++),Q=$[ae in pu?oe.charAt(A++):ae],!Q||(K=Q(ne,pe,K))<0)return-1}else if(ae!=pe.charCodeAt(K++))return-1}return K}function x(ne,oe,pe){var K=c.exec(oe.slice(pe));return K?(ne.p=d.get(K[0].toLowerCase()),pe+K[0].length):-1}function P(ne,oe,pe){var K=g.exec(oe.slice(pe));return K?(ne.w=_.get(K[0].toLowerCase()),pe+K[0].length):-1}function D(ne,oe,pe){var K=f.exec(oe.slice(pe));return K?(ne.w=p.get(K[0].toLowerCase()),pe+K[0].length):-1}function v(ne,oe,pe){var K=y.exec(oe.slice(pe));return K?(ne.m=C.get(K[0].toLowerCase()),pe+K[0].length):-1}function F(ne,oe,pe){var K=h.exec(oe.slice(pe));return K?(ne.m=m.get(K[0].toLowerCase()),pe+K[0].length):-1}function M(ne,oe,pe){return w(ne,t,oe,pe)}function S(ne,oe,pe){return w(ne,n,oe,pe)}function I(ne,oe,pe){return w(ne,r,oe,pe)}function L(ne){return o[ne.getDay()]}function re(ne){return i[ne.getDay()]}function q(ne){return u[ne.getMonth()]}function O(ne){return l[ne.getMonth()]}function W(ne){return a[+(ne.getHours()>=12)]}function z(ne){return 1+~~(ne.getMonth()/3)}function le(ne){return o[ne.getUTCDay()]}function V(ne){return i[ne.getUTCDay()]}function ue(ne){return u[ne.getUTCMonth()]}function we(ne){return l[ne.getUTCMonth()]}function fe(ne){return a[+(ne.getUTCHours()>=12)]}function he(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var oe=N(ne+="",j);return oe.toString=function(){return ne},oe},parse:function(ne){var oe=T(ne+="",!1);return oe.toString=function(){return ne},oe},utcFormat:function(ne){var oe=N(ne+="",k);return oe.toString=function(){return ne},oe},utcParse:function(ne){var oe=T(ne+="",!0);return oe.toString=function(){return ne},oe}}}var pu={"-":"",_:" ",0:"0"},dt=/^\s*\d+/,ub=/^%/,db=/[\\^$*+?|[\]().{}]/g;function Ae(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function fb(e){return e.replace(db,"\\$&")}function Ur(e){return new RegExp("^(?:"+e.map(fb).join("|")+")","i")}function Vr(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function hb(e,t,n){var r=dt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function pb(e,t,n){var r=dt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function mb(e,t,n){var r=dt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function gb(e,t,n){var r=dt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function yb(e,t,n){var r=dt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function mu(e,t,n){var r=dt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function gu(e,t,n){var r=dt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function bb(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _b(e,t,n){var r=dt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function xb(e,t,n){var r=dt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function yu(e,t,n){var r=dt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function vb(e,t,n){var r=dt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function bu(e,t,n){var r=dt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wb(e,t,n){var r=dt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Sb(e,t,n){var r=dt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function kb(e,t,n){var r=dt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Cb(e,t,n){var r=dt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Tb(e,t,n){var r=ub.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Nb(e,t,n){var r=dt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function jb(e,t,n){var r=dt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function _u(e,t){return Ae(e.getDate(),t,2)}function Db(e,t){return Ae(e.getHours(),t,2)}function Mb(e,t){return Ae(e.getHours()%12||12,t,2)}function $b(e,t){return Ae(1+Or.count(bn(e),e),t,3)}function xu(e,t){return Ae(e.getMilliseconds(),t,3)}function Ib(e,t){return xu(e,t)+"000"}function Pb(e,t){return Ae(e.getMonth()+1,t,2)}function Fb(e,t){return Ae(e.getMinutes(),t,2)}function Lb(e,t){return Ae(e.getSeconds(),t,2)}function Ab(e){var t=e.getDay();return t===0?7:t}function Eb(e,t){return Ae(ui.count(bn(e)-1,e),t,2)}function vu(e){var t=e.getDay();return t>=4||t===0?fr(e):fr.ceil(e)}function Bb(e,t){return e=vu(e),Ae(fr.count(bn(e),e)+(bn(e).getDay()===4),t,2)}function Rb(e){return e.getDay()}function Hb(e,t){return Ae(di.count(bn(e)-1,e),t,2)}function Ob(e,t){return Ae(e.getFullYear()%100,t,2)}function zb(e,t){return e=vu(e),Ae(e.getFullYear()%100,t,2)}function Wb(e,t){return Ae(e.getFullYear()%1e4,t,4)}function Ub(e,t){var n=e.getDay();return e=n>=4||n===0?fr(e):fr.ceil(e),Ae(e.getFullYear()%1e4,t,4)}function Vb(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ae(t/60|0,"0",2)+Ae(t%60,"0",2)}function wu(e,t){return Ae(e.getUTCDate(),t,2)}function Gb(e,t){return Ae(e.getUTCHours(),t,2)}function Yb(e,t){return Ae(e.getUTCHours()%12||12,t,2)}function qb(e,t){return Ae(1+Gs.count(Un(e),e),t,3)}function Su(e,t){return Ae(e.getUTCMilliseconds(),t,3)}function Xb(e,t){return Su(e,t)+"000"}function Kb(e,t){return Ae(e.getUTCMonth()+1,t,2)}function Zb(e,t){return Ae(e.getUTCMinutes(),t,2)}function Jb(e,t){return Ae(e.getUTCSeconds(),t,2)}function Qb(e){var t=e.getUTCDay();return t===0?7:t}function e_(e,t){return Ae(hu.count(Un(e)-1,e),t,2)}function ku(e){var t=e.getUTCDay();return t>=4||t===0?hr(e):hr.ceil(e)}function t_(e,t){return e=ku(e),Ae(hr.count(Un(e),e)+(Un(e).getUTCDay()===4),t,2)}function n_(e){return e.getUTCDay()}function r_(e,t){return Ae(fi.count(Un(e)-1,e),t,2)}function a_(e,t){return Ae(e.getUTCFullYear()%100,t,2)}function i_(e,t){return e=ku(e),Ae(e.getUTCFullYear()%100,t,2)}function s_(e,t){return Ae(e.getUTCFullYear()%1e4,t,4)}function o_(e,t){var n=e.getUTCDay();return e=n>=4||n===0?hr(e):hr.ceil(e),Ae(e.getUTCFullYear()%1e4,t,4)}function l_(){return"+0000"}function Cu(){return"%"}function Tu(e){return+e}function Nu(e){return Math.floor(+e/1e3)}var pr,ju;c_({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function c_(e){return pr=cb(e),ju=pr.format,pr.parse,pr.utcFormat,pr.utcParse,pr}function u_(e){return new Date(e)}function d_(e){return e instanceof Date?+e:+new Date(+e)}function Du(e,t,n,r,a,i,o,l,u,c){var d=ru(),f=d.invert,p=d.domain,g=c(".%L"),_=c(":%S"),h=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),C=c("%b %d"),j=c("%B"),k=c("%Y");function $(N){return(u(N)<N?g:l(N)<N?_:o(N)<N?h:i(N)<N?m:r(N)<N?a(N)<N?y:C:n(N)<N?j:k)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?p(Array.from(N,d_)):p().map(u_)},d.ticks=function(N){var T=p();return e(T[0],T[T.length-1],N??10)},d.tickFormat=function(N,T){return T==null?$:c(T)},d.nice=function(N){var T=p();return(!N||typeof N.range!="function")&&(N=t(T[0],T[T.length-1],N??10)),N?p(Zy(T,N)):d},d.copy=function(){return nu(d,Du(e,t,n,r,a,i,o,l,u,c))},d}function Xs(){return Qa.apply(Du(ob,lb,bn,zr,ui,Or,Vs,Us,dr,ju).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function f_({task:e,scale:t,onTaskClick:n,onTaskDoubleClick:r,isSelected:a=!1,taskIndex:i,tabIndex:o=-1,onFocus:l,"aria-label":u}){const c=E.useRef(null),[d,f]=E.useState(!1),[p,g]=E.useState(!1),_=t(e.start),h=t(e.end),m=Math.max(h-_,20),y=()=>{if(e.color)return e.color;switch(e.priority){case"high":return"#d5281b";case"medium":return"#005eb8";case"low":return"#007f3b";default:return"#005eb8"}},C=e.progress?m*e.progress/100:0,j=()=>{n?.(e)},k=()=>{r?.(e)},$=v=>{v.key==="Enter"?(v.preventDefault(),j()):v.key===" "&&(v.preventDefault(),k())},N=()=>{f(!0)},T=()=>{f(!1)},w=()=>{g(!0),l?.()},x=()=>{g(!1)},P=["gantt-task-bar",d&&"gantt-task-bar--pressed",(p||a)&&"gantt-task-bar--focused",e.priority&&`gantt-task-bar--priority-${e.priority}`,a&&"gantt-task-bar--selected",e.type&&`gantt-task-bar--type-${e.type}`].filter(Boolean).join(" "),D={"--task-left":`${_}px`,"--task-width":`${m}px`,"--task-color":y(),left:`${_}px`,width:`${m}px`,backgroundColor:y()};return s.jsxs("div",{role:"button",tabIndex:o,ref:c,"data-task-index":i,className:P,style:D,onClick:j,onDoubleClick:k,onKeyDown:$,onMouseDown:N,onMouseUp:T,onFocus:w,onBlur:x,"aria-label":u||`${a?"Selected: ":""}${e.title}: ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.priority?`, priority ${e.priority}`:""}${e.progress?`, ${e.progress}% complete`:""}`,"aria-describedby":`task-${e.id}-details`,children:[s.jsx("span",{className:"task-title",children:e.title}),e.progress!==void 0&&s.jsx("div",{className:"task-progress",style:{width:`${C}px`}}),s.jsx("span",{id:`task-${e.id}-details`,className:"sr-only",children:`Task: ${e.title}, from ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.progress?`, ${e.progress}% complete`:""}${e.priority?`, priority: ${e.priority}`:""}`})]})}function h_({viewStart:e,viewEnd:t,dateCount:n}){const r=[];for(let g=e.getTime();g<=t.getTime();g+=864e5)r.push(new Date(g));const i=new Date;i.setHours(0,0,0,0);const[o,l]=E.useState(-1),u=E.useRef(null),c=g=>{if(g.key==="ArrowLeft"){g.preventDefault();const _=Math.max(0,o===-1?0:o-1);l(_),p(_)}else if(g.key==="ArrowRight"){g.preventDefault();const _=Math.min(r.length-1,o===-1?0:o+1);l(_),p(_)}else if(g.key==="ArrowDown")g.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .timeline-container"):null)?.focus();else if(g.key==="Home")g.preventDefault(),l(0),p(0);else if(g.key==="End"){g.preventDefault();const _=r.length-1;l(_),p(_)}},d=g=>{if(g.key==="ArrowDown")g.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .resource-label"):null)?.focus();else if(g.key==="ArrowRight"){g.preventDefault();const _=u.current;_&&_.focus()}},f=()=>{o===-1&&(l(0),setTimeout(()=>p(0),0))},p=g=>{const _=u.current?.querySelector(`[data-date-index="${g}"]`);_&&_.focus()};return s.jsxs("div",{className:"gantt-header",role:"row","aria-rowindex":1,children:[s.jsx("div",{className:"header-resource",role:"columnheader","aria-colindex":1,tabIndex:0,"aria-label":"Resource column header",onKeyDown:d,children:"Resources"}),s.jsx("div",{ref:u,className:"header-timeline",role:"columnheader","aria-colindex":2,"aria-colspan":n,"aria-label":`Timeline from ${e.toLocaleDateString()} to ${t.toLocaleDateString()}. Use arrow keys to navigate between dates`,tabIndex:0,onKeyDown:c,onFocus:f,children:r.map((g,_)=>{const h=g.getTime()===i.getTime(),m=o===_;return s.jsx("div",{"data-date-index":_,className:`date-column ${h?"today":""} ${m?"focused":""}`,tabIndex:m?0:-1,role:"button","aria-label":`${g.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}${h?" (Today)":""}`,onFocus:()=>l(_),onKeyDown:c,children:g.toLocaleDateString("en-GB",{day:"numeric",month:"short"})},_)})})]})}function p_({resource:e,tasks:t,scale:n,onTaskClick:r,onTaskDoubleClick:a,rowIndex:i,dateCount:o}){const[l,u]=E.useState(!1),[c,d]=E.useState(-1),f=E.useRef(null);E.useEffect(()=>{l&&c>=0&&t.length>0&&setTimeout(()=>{f.current?.querySelector(`[data-task-index="${c}"]`)?.focus()},0)},[l,c,t.length]);const p=h=>{if(h.key==="ArrowLeft"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(h.key==="ArrowRight"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!l){switch(h.key){case"ArrowUp":h.preventDefault(),i===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-timeline"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${i+1}"] .timeline-container`):null)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${i+3}"] .timeline-container`):null)?.focus();break;case"ArrowLeft":h.preventDefault(),f.current?.closest(".gantt-row")?.querySelector(".resource-label")?.focus();break;case"Enter":t.length>0&&(h.preventDefault(),u(!0),d(0));break}return}switch(h.key){case"ArrowLeft":h.preventDefault();const m=Math.max(0,c-1);d(m),f.current?.querySelector(`[data-task-index="${m}"]`)?.focus();break;case"ArrowRight":h.preventDefault();const C=Math.min(t.length-1,c+1);d(C),f.current?.querySelector(`[data-task-index="${C}"]`)?.focus();break;case"Enter":h.preventDefault(),c>=0&&r?.(t[c]);break;case" ":h.preventDefault(),c>=0&&a?.(t[c]);break;case"Escape":h.preventDefault(),u(!1),d(-1),f.current?.focus();break}},g=h=>{switch(h.key){case"ArrowUp":h.preventDefault(),i===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-resource"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${i+1}"] .resource-label`):null)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${i+3}"] .resource-label`):null)?.focus();break;case"ArrowRight":h.preventDefault(),f.current?.focus();break}},_=h=>{l&&d(h)};return s.jsxs("div",{className:"gantt-row",role:"row","aria-rowindex":i+2,children:[s.jsx("div",{className:"resource-label",role:"gridcell","aria-colindex":1,tabIndex:0,"aria-label":`Resource: ${e.label}`,onKeyDown:g,children:e.label}),s.jsx("div",{ref:f,className:`timeline-container ${l?"timeline-active":""}`,role:"gridcell","aria-colindex":2,"aria-colspan":o,tabIndex:0,"aria-label":`Timeline for ${e.label} with ${t.length} task${t.length!==1?"s":""}. Press Enter to activate task navigation, then use arrow keys to navigate, Enter to select, Space to activate, Escape to exit`,onKeyDown:p,onFocus:()=>{l||d(-1)},children:t.map((h,m)=>s.jsx(f_,{task:h,scale:n,onTaskClick:r,onTaskDoubleClick:a,isSelected:l&&c===m,taskIndex:m,tabIndex:l&&c===m?0:-1,onFocus:()=>_(m)},h.id))})]})}function m_({resources:e,tasks:t=[],viewStart:n,viewEnd:r,onTaskClick:a,onTaskDoubleClick:i}){const o=E.useRef(null),[l,u]=E.useState(800),c=E.useMemo(()=>{if(n instanceof Date)return isNaN(n.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):n;const h=new Date(n);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):h},[n]),d=E.useMemo(()=>{if(r instanceof Date)return isNaN(r.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):r;const h=new Date(r);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):h},[r]),f=E.useMemo(()=>Math.ceil((d.getTime()-c.getTime())/864e5)+1,[c,d]);E.useEffect(()=>{if(!o.current||typeof window>"u")return;const h=typeof ResizeObserver<"u"?ResizeObserver:void 0;if(!h)return;const m=new h(y=>{const C=y[0];C&&u(Math.max(C.contentRect.width-220,400))});return m.observe(o.current),()=>m.disconnect()},[]);const p=E.useMemo(()=>Xs().domain([c,d]).range([0,l]),[c,d,l]),g=E.useMemo(()=>{const h=new Map;return t.forEach(m=>{const y=h.get(m.resourceId)||[];y.push(m),h.set(m.resourceId,y)}),h},[t]),_=h=>{if(h.target===h.currentTarget)switch(h.key){case"ArrowDown":h.preventDefault(),typeof document<"u"&&o.current?.querySelector(".gantt-row .resource-label")?.focus();break;case"Home":h.preventDefault(),typeof document<"u"&&o.current?.querySelector(".header-resource")?.focus();break}};return s.jsxs("div",{className:"gantt-chart",role:"grid","aria-label":"Gantt Chart showing resource scheduling and task timelines","aria-rowcount":e.length+1,"aria-colcount":f+1,"aria-description":"Use arrow keys to navigate cells, Tab to cycle through tasks in timeline rows or dates in header, Enter to select task, Space to activate task, Alt+arrows to scroll the grid, Shift+arrows to scroll timeline rows",tabIndex:0,onKeyDown:_,children:[s.jsx(h_,{viewStart:c,viewEnd:d,dateCount:f}),s.jsx("div",{ref:o,className:"gantt-grid",role:"rowgroup","aria-label":"Gantt chart data rows",tabIndex:0,onKeyDown:h=>{h.key==="ArrowLeft"&&h.altKey?(h.preventDefault(),o.current?.scrollBy({left:-50,behavior:"smooth"})):h.key==="ArrowRight"&&h.altKey?(h.preventDefault(),o.current?.scrollBy({left:50,behavior:"smooth"})):h.key==="ArrowUp"&&h.altKey?(h.preventDefault(),o.current?.scrollBy({top:-50,behavior:"smooth"})):h.key==="ArrowDown"&&h.altKey&&(h.preventDefault(),o.current?.scrollBy({top:50,behavior:"smooth"}))},children:e.map((h,m)=>s.jsx(p_,{resource:h,tasks:g.get(h.id)||[],scale:p,onTaskClick:a,onTaskDoubleClick:i,rowIndex:m,dateCount:f},h.id))})]})}const hi=({children:e,href:t,active:n=!1,attributes:r={}})=>s.jsx("li",{className:"nhsuk-breadcrumb__item",children:n?s.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",...r,children:e}):s.jsx("a",{className:"nhsuk-breadcrumb__link",href:t,...r,children:e})}),Mu=({items:e=[],children:t,classes:n,labelText:r="Breadcrumb",href:a,text:i,reverse:o=!1,attributes:l={}})=>{const u=()=>t?E.Children.toArray(t).filter(m=>E.isValidElement(m)&&(m.type===hi||m.type?.displayName==="BreadcrumbItem")).map(m=>({text:typeof m.props.children=="string"?m.props.children:String(m.props.children),href:m.props.href,active:m.props.active,attributes:m.props.attributes})):[],c=()=>t?u():a&&i?[{href:a,text:i}]:e,d=()=>{const h=c();if(h&&h.length>0){const m=h.slice().reverse().find(y=>y.href&&!y.active);if(m)return{href:m.href,text:m.text}}return{text:"Home"}},f=c(),p=d(),g=ve("nhsuk-breadcrumb",{"nhsuk-breadcrumb--reverse":o},n),_=r;return s.jsxs("nav",{className:g,"aria-label":_,role:"navigation",...l,children:[s.jsx("ol",{className:"nhsuk-breadcrumb__list",role:"list",children:t?E.Children.map(t,(h,m)=>E.isValidElement(h)&&(h.type===hi||h.type?.displayName==="BreadcrumbItem")?E.cloneElement(h,{key:m}):null):f?.filter(h=>h.active||!!h.href).map((h,m)=>s.jsx("li",{className:"nhsuk-breadcrumb__item",role:"listitem",children:h.active?s.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",role:"text",...h.attributes||{},children:h.text}):s.jsx("a",{className:"nhsuk-breadcrumb__link",href:h.href,role:"link",...h.attributes||{},children:h.text})},m))}),p.href&&s.jsx("p",{className:"nhsuk-breadcrumb__back",children:s.jsxs("a",{className:"nhsuk-breadcrumb__backlink",href:p.href,role:"link","aria-label":`Back to ${p.text}`,...e.length>0?e[e.length-1]?.attributes||{}:{},children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Back to Â "}),p.text]})})]})};Mu.Item=hi,hi.displayName="BreadcrumbItem";const Ks=({text:e="Skip to main content",href:t="#maincontent",classes:n,attributes:r={}})=>{const[a,i]=E.useState(!1);E.useEffect(()=>{i(!0)},[]),E.useEffect(()=>{if(typeof window>"u"||typeof document>"u"||!document.querySelector||!document.querySelectorAll)return;const l=u=>{const c=u.target,d=c.getAttribute("href");if(d&&d.startsWith("#")){const f=typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(d):null;if(f){f.hasAttribute("tabindex")||f.setAttribute("tabindex","-1"),f.focus(),f.classList.add("nhsuk-skip-link-focused-element");const p=window.setTimeout(()=>{f.classList.remove("nhsuk-skip-link-focused-element"),f.getAttribute("tabindex")==="-1"&&f.removeAttribute("tabindex")},3e3);c.__nhsSkipLinkTimeout=p}}};try{const u=document.querySelectorAll(".nhsuk-skip-link");return u.forEach(c=>{c.addEventListener("click",l)}),()=>{try{u.forEach(c=>{c.removeEventListener("click",l);const d=c.__nhsSkipLinkTimeout;d&&window.clearTimeout&&window.clearTimeout(d)})}catch(c){console.warn("SkipLink cleanup error:",c)}}}catch(u){return console.warn("SkipLink initialization error:",u),()=>{}}},[a]);const o=ve("nhsuk-skip-link",n);return s.jsx("a",{className:o,href:t,"data-module":"nhsuk-skip-link","data-enhanced":a?"true":"false",...r,children:e})},g_=({previousUrl:e,previousPage:t,nextUrl:n,nextPage:r,classes:a,attributes:i={}})=>{const o=ve("nhsuk-pagination",a);return s.jsx("nav",{className:o,role:"navigation","aria-label":"Pagination",...i,children:s.jsxs("ul",{className:"nhsuk-list nhsuk-pagination__list",children:[e&&t&&s.jsx("li",{className:"nhsuk-pagination-item--previous",children:s.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--prev",href:e,children:[s.jsx("span",{className:"nhsuk-pagination__title",children:"Previous"}),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),s.jsx("span",{className:"nhsuk-pagination__page",children:t}),s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:s.jsx("path",{d:"M4.1 12.3l2.7 3c.2.2.5.2.7 0 .1-.1.1-.2.1-.3v-2h11c.6 0 1-.4 1-1s-.4-1-1-1h-11V9c0-.2-.1-.4-.3-.5h-.2c-.1 0-.3.1-.4.2l-2.7 3c0 .2 0 .4.1.6z"})})]})}),n&&r&&s.jsx("li",{className:"nhsuk-pagination-item--next",children:s.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--next",href:n,children:[s.jsx("span",{className:"nhsuk-pagination__title",children:"Next"}),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),s.jsx("span",{className:"nhsuk-pagination__page",children:r}),s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:s.jsx("path",{d:"M19.6 11.66l-2.73-3A.51.51 0 0 0 16 9v2H5a1 1 0 0 0 0 2h11v2a.5.5 0 0 0 .32.46.39.39 0 0 0 .18 0 .52.52 0 0 0 .37-.16l2.73-3a.5.5 0 0 0 0-.64z"})})]})})]})})},y_=({items:e,classes:t,ariaLabel:n="Pages in this guide",attributes:r={}})=>{const a=ve("nhsuk-contents-list",t),i=(o,l)=>o.current?s.jsx("li",{className:"nhsuk-contents-list__item","aria-current":"page",...o.attributes||{},children:s.jsx("span",{className:"nhsuk-contents-list__current",children:o.text})},l):s.jsx("li",{className:"nhsuk-contents-list__item",children:s.jsx("a",{className:"nhsuk-contents-list__link",href:o.href,...o.attributes||{},children:o.text})},l);return s.jsxs("nav",{className:a,role:"navigation","aria-label":n,...r,children:[s.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Contents"}),s.jsx("ol",{className:"nhsuk-contents-list__list",children:e.map((o,l)=>i(o,l))})]})},Zs=E.forwardRef(({variant:e="default",heading:t,headingHtml:n,headingLevel:r=2,headingClasses:a,description:i,descriptionHtml:o,href:l,imgURL:u,imgAlt:c,...d},f)=>{const p=["nhsuk-card",e==="clickable"&&"nhsuk-card--clickable",e==="secondary"&&"nhsuk-card--secondary",e==="feature"&&"nhsuk-card--feature",d.className].filter(Boolean).join(" "),g=["nhsuk-card__content",e==="feature"&&"nhsuk-card__content--feature",e==="primary"&&"nhsuk-card__content--primary",e==="secondary"&&"nhsuk-card__content--secondary"].filter(Boolean).join(" "),_=["nhsuk-card__heading",e==="feature"&&"nhsuk-card__heading--feature",a].filter(Boolean).join(" "),h=()=>{if(n)return s.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const C=()=>l&&e!=="feature"?s.jsx("a",{className:"nhsuk-card__link",href:l,children:t}):t;return s.jsx(Vt,{level:r,className:_,children:C()})},m=()=>d.children?d.children:o?s.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):i?s.jsx("p",{className:"nhsuk-card__description",children:i}):null,y=()=>e!=="primary"?null:s.jsxs("svg",{className:"nhsuk-icon",xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27","aria-hidden":"true",focusable:"false",children:[s.jsx("circle",{cx:"13.333",cy:"13.333",r:"13.333",fill:""}),s.jsxs("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2.667",children:[s.jsx("path",{d:"M15.438 13l-3.771 3.771"}),s.jsx("path",{d:"M11.667 9.229L15.438 13"})]})]});return s.jsxs("div",{...d,className:p,ref:f,children:[u&&s.jsx("img",{className:"nhsuk-card__img",src:u,alt:c||""}),s.jsxs("div",{className:g,children:[h(),m(),y()]})]})});Zs.displayName="Card";const b_=({className:e,children:t,"data-testid":n,id:r})=>{const a=["nhsuk-card-group",e].filter(Boolean).join(" ");return s.jsx("ul",{className:a,"data-testid":n,id:r,children:t})},__=({className:e,children:t,"data-testid":n})=>{const r=["nhsuk-card-group__item",e].filter(Boolean).join(" ");return s.jsx("li",{className:r,"data-testid":n,children:t})},x_=({type:e,heading:t,headingHtml:n,headingLevel:r=3,headingClasses:a,description:i,descriptionHtml:o,className:l,children:u,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":p,"aria-describedby":g})=>{const _=["nhsuk-care-card",`nhsuk-care-card--${e}`,l].filter(Boolean).join(" "),h=["nhsuk-care-card__heading",a].filter(Boolean).join(" "),m=()=>{if(n)return s.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const C={"non-urgent":"Non-urgent advice:",urgent:"Urgent advice:",emergency:"Immediate action required:"}[e],j=s.jsxs("span",{role:"text",children:[s.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[C," "]}),t]});return s.jsx(Vt,{level:r,className:h,children:j})},y=()=>u||(o?s.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):i?s.jsx("p",{className:"nhsuk-care-card__text",children:i}):null);return s.jsxs("div",{className:_,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":p,"aria-describedby":g,children:[s.jsxs("div",{className:"nhsuk-care-card__heading-container",children:[m(),s.jsx("span",{className:"nhsuk-care-card__arrow","aria-hidden":"true"})]}),s.jsx("div",{className:"nhsuk-care-card__content",children:y()})]})},$u=({id:e,className:t,headingText:n,headingHtml:r,headingLevel:a=2,bodyText:i,bodyHtml:o,children:l,...u})=>{const c=ve("nhsuk-panel",t),d=()=>!n&&!r&&!l?null:r?s.jsx(Vt,{level:a,className:"nhsuk-panel__heading",html:r,marginBottom:"var(--panel-heading-margin, 24px)"}):n?s.jsx(Vt,{level:a,className:"nhsuk-panel__heading",text:n,marginBottom:"var(--panel-heading-margin, 24px)"}):null,f=()=>l?s.jsx("div",{className:"nhsuk-panel__body",children:l}):o?s.jsx("div",{className:"nhsuk-panel__body",dangerouslySetInnerHTML:{__html:o}}):i?s.jsx("div",{className:"nhsuk-panel__body",children:s.jsx("p",{children:i})}):null;return s.jsxs("div",{className:c,id:e,...u,children:[d(),f()]})},v_=({text:e,html:t,children:n,className:r,...a})=>{const i=ve("nhsuk-inset-text",r),o=()=>n||(t?s.jsx("div",{dangerouslySetInnerHTML:{__html:t}}):e?s.jsx("p",{children:e}):null);return s.jsx("div",{className:i,...a,children:o()})},w_=({items:e,noBorder:t=!1,className:n,...r})=>{const a=ve("nhsuk-summary-list",{"nhsuk-summary-list--no-border":t},n),i=l=>l.children?l.children:l.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text?l.text:null,o=l=>!l||!l.items.length?null:s.jsx("dd",{className:"nhsuk-summary-list__actions",children:s.jsx("ul",{className:"nhsuk-summary-list__actions-list",children:l.items.map((u,c)=>s.jsx("li",{className:"nhsuk-summary-list__actions-list-item",children:s.jsxs("a",{href:u.href,className:"nhsuk-link",...u.attributes,children:[i(u),u.visuallyHiddenText&&s.jsx("span",{className:"nhsuk-u-visually-hidden",children:u.visuallyHiddenText})]})},c))})});return s.jsx("div",{className:"nhsuk-summary-list-container",children:s.jsx("dl",{className:a,...r,children:e.map((l,u)=>s.jsxs("div",{className:"nhsuk-summary-list__row",children:[s.jsx("dt",{className:"nhsuk-summary-list__key",children:i(l.key)}),s.jsx("dd",{className:"nhsuk-summary-list__value",children:i(l.value)}),o(l.actions)]},u))})})},Gr={current:null},S_=()=>{if(Gr.current)return Gr.current;try{Gr.current=require("prismjs");try{require("prismjs/components/prism-typescript")}catch{}try{require("prismjs/components/prism-tsx")}catch{}try{require("prismjs/components/prism-json")}catch{}}catch{Gr.current=null}return Gr.current},k_=e=>{const t=[{regex:/\b(import|from|export|const|let|var|return|if|else|for|while|switch|case|break|new|throw|try|catch|finally|class|extends|implements|interface|type|as|async|await|function)\b/g,cls:"kw"},{regex:/(['"`])(?:\\.|(?!\1).)*\1/g,cls:"str"},{regex:/\/\*[^]*?\*\/|\/\/.*$/gm,cls:"com"},{regex:/\b([0-9]+(?:\.[0-9]+)?)\b/g,cls:"num"}];let n=e;return t.forEach(r=>{n=n.replace(r.regex,a=>`<span class="nhsuk-code-${r.cls}">${a}</span>`)}),n},pi=(e,t,n)=>{if(n||!t)return e;const r=S_();if(r&&r.languages){const a=r.languages[t]?t:r.languages.typescript&&(t==="ts"||t==="tsx"||t==="typescript")?"typescript":r.languages.json&&t==="json"?"json":void 0;if(a)try{return r.highlight(e,r.languages[a],a)}catch{}}return k_(e)},C_=({rows:e,head:t,caption:n,captionSize:r,firstCellIsHeader:a=!1,responsive:i=!1,heading:o,headingLevel:l=3,panel:u=!1,panelClasses:c,tableClasses:d,classes:f,attributes:p,"data-testid":g,columns:_,data:h,visuallyHiddenCaption:m=!1})=>{const y=`nhsuk-table__caption ${r?`nhsuk-table__caption--${r}`:""}`.trim(),C=ve("nhsuk-table",{"nhsuk-table-responsive":i},d),j=ve(f),k=(x,P)=>{const D=ve("nhsuk-table__header",{[`nhsuk-table__header--${x.format}`]:x.format},x.classes),v={scope:"col",...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...i&&{role:"columnheader"},...x.attributes};let F;if(x.node!=null)F=s.jsx(s.Fragment,{children:x.node});else if(x.html)F=s.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const M=Array.isArray(x.code),S=M?x.code.join(`
`):x.code,I=M||S.includes(`
`),L={className:ve("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":I,"nhsuk-table__code--inline":!I}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},re=pi(S,x.codeLanguage);F=I?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...L,dangerouslySetInnerHTML:{__html:re}})}):s.jsx("code",{...L,dangerouslySetInnerHTML:{__html:re}})}else F=x.text;return s.jsx("th",{className:D,...v,children:F},P)},$=(x,P,D)=>{const v=a&&D||x.rowHeader,F=ve(v?"nhsuk-table__header":"nhsuk-table__cell",{[`nhsuk-table__${v?"header":"cell"}--${x.format}`]:x.format},x.classes),M={...v&&{scope:"row"},...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...i&&{role:v?"rowheader":"cell",...x.header&&{"data-label":x.header}},...x.attributes};let S;if(x.node!=null)S=s.jsx(s.Fragment,{children:x.node});else if(x.html)S=s.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const re=Array.isArray(x.code),q=re?x.code.join(`
`):x.code,O=re||q.includes(`
`),W={className:ve("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":O,"nhsuk-table__code--inline":!O}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},z=pi(q,x.codeLanguage,x.disableHighlight);S=O?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...W,dangerouslySetInnerHTML:{__html:z}})}):s.jsx("code",{...W,dangerouslySetInnerHTML:{__html:z}})}else S=x.text;const I=s.jsxs(s.Fragment,{children:[i&&x.header&&s.jsxs("span",{className:"nhsuk-table-responsive__heading","aria-hidden":"true",children:[x.header," "]}),S]}),L=v?"th":"td";return s.jsx(L,{className:F,...M,children:I},P)};let N=t,T=e;!N&&_&&_.length&&(N=_.map(x=>({text:x.title,format:x.format,classes:x.headerClasses,attributes:x.headerAttributes}))),!T&&_&&h&&h.length&&(T=h.map((x,P)=>_.map(D=>{const v=D.accessor?D.accessor(x,P):x[D.key];let F={format:D.format,classes:D.cellClasses,attributes:D.cellAttributes};if(D.rowHeader&&(F.rowHeader=!0),D.render){const M=D.render(v,x,P,D);return M==null||typeof M=="boolean"?{...F,text:""}:typeof M=="string"||typeof M=="number"?{...F,text:String(M)}:{...F,...M}}return{...F,text:v!=null?String(v):""}})));const w=()=>s.jsxs("table",{className:C,...i&&{role:"table"},...p,...g&&{"data-testid":g},children:[n&&s.jsx("caption",{className:ve(y,m&&"nhsuk-u-visually-hidden"),children:n}),N&&N.length>0&&s.jsx("thead",{className:"nhsuk-table__head",...i&&{role:"rowgroup"},children:s.jsx("tr",{...i&&{role:"row"},children:N.map((x,P)=>k(x,P))})}),s.jsx("tbody",{className:"nhsuk-table__body",children:T&&T.map((x,P)=>s.jsx("tr",{className:"nhsuk-table__row",...i&&{role:"row"},children:x.map((D,v)=>$(D,v,v===0))},P))})]});return u?s.jsxs($u,{className:c,children:[o&&s.jsx(Vt,{level:l,className:"nhsuk-table__heading-tab",children:o}),w()]}):j?s.jsx("div",{className:j,children:w()}):w()},T_=({children:e,size:t,className:n})=>{const r=ve("nhsuk-table__caption",t&&`nhsuk-table__caption--${t}`,n);return s.jsx("caption",{className:r,children:e})},Iu=({responsive:e,className:t,children:n,...r})=>{const a=e?{role:"row"}:{};return s.jsx("tr",{className:t,...a,...r,children:n})},Pu=({text:e,html:t,node:n,code:r,codeLanguage:a,codeClassName:i,disableHighlight:o,format:l,classes:u,colspan:c,rowspan:d,attributes:f,responsive:p,as:g="th"})=>{const _=ve("nhsuk-table__header",{[`nhsuk-table__header--${l}`]:l},u),h={scope:"col",...c&&{colSpan:c},...d&&{rowSpan:d},...p&&{role:"columnheader"},...f};let m;if(n!=null)m=s.jsx(s.Fragment,{children:n});else if(t)m=s.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const C=Array.isArray(r),j=C?r.join(`
`):r,k=C||j.includes(`
`),$={className:ve("nhsuk-table__code",i,{"nhsuk-table__code--block":k,"nhsuk-table__code--inline":!k}),...a?{"data-language":a}:{}},N=pi(j,a,o);m=k?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...$,dangerouslySetInnerHTML:{__html:N}})}):s.jsx("code",{...$,dangerouslySetInnerHTML:{__html:N}})}else m=e;const y=g;return s.jsx(y,{className:_,...h,children:m})},N_=({text:e,html:t,node:n,code:r,codeLanguage:a,codeClassName:i,disableHighlight:o,format:l,classes:u,colspan:c,rowspan:d,attributes:f,responsive:p,rowHeader:g})=>{const _=!!g,h=_?"th":"td",m=ve(_?"nhsuk-table__header":"nhsuk-table__cell",l&&`nhsuk-table__${_?"header":"cell"}--${l}`,u),y={...c&&{colSpan:c},...d&&{rowSpan:d},..._&&{scope:"row"},...p&&{role:_?"rowheader":"cell"},...f};let C;if(n!=null)C=s.jsx(s.Fragment,{children:n});else if(t)C=s.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const j=Array.isArray(r),k=j?r.join(`
`):r,$=j||k.includes(`
`),N={className:ve("nhsuk-table__code",i,{"nhsuk-table__code--block":$,"nhsuk-table__code--inline":!$}),...a?{"data-language":a}:{}},T=pi(k,a,o);C=$?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...N,dangerouslySetInnerHTML:{__html:T}})}):s.jsx("code",{...N,dangerouslySetInnerHTML:{__html:T}})}else C=e;return s.jsx(h,{className:m,...y,children:C})},Yt=C_;Yt.Caption=T_,Yt.BodyRow=Iu,Yt.HeaderCell=Pu,Yt.Cell=N_;let Fu=!1,Lu=!1;Object.defineProperty(Yt,"Row",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!Fu&&(console.warn("Table.Row is deprecated. Use Table.BodyRow instead."),Fu=!0),Iu}}),Object.defineProperty(Yt,"TH",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!Lu&&(console.warn("Table.TH is deprecated. Use Table.HeaderCell instead."),Lu=!0),Pu}});const j_=E.forwardRef(({items:e,defaultActiveTab:t,activeTab:n,onTabChange:r,onTabFocus:a,onTabListBlur:i,onEscape:o,autoActivate:l=!0,className:u,id:c,"data-testid":d,...f},p)=>{const g=n!==void 0,[_,h]=E.useState(()=>t||e[0]?.id||""),m=g?n:_,y=E.useRef(null),C=E.useRef(new Map),j=E.useCallback(P=>{g||h(P),r?.(P)},[g,r]),k=E.useCallback(P=>{a?.(P),l&&j(P)},[a,l,j]),$=E.useCallback((P,D)=>{const v=e.filter(S=>!S.disabled).map(S=>S.id),F=v.indexOf(D);let M=null;switch(P.key){case"ArrowLeft":M=F>0?F-1:v.length-1;break;case"ArrowRight":M=F<v.length-1?F+1:0;break;case"Home":M=0;break;case"End":M=v.length-1;break;case"Escape":P.preventDefault(),o?.();return;default:return}if(M!==null){P.preventDefault();const S=v[M],I=C.current.get(S);I&&(I.focus(),k(S))}},[e,k,o]),N=E.useCallback((P,D)=>{D?C.current.set(P,D):C.current.delete(P)},[]),T=E.useCallback(P=>{const D=C.current.get(P);D&&D.focus()},[]);E.useImperativeHandle(p,()=>({focusTab:T,getActiveTab:()=>m,getTabListElement:()=>y.current}),[T,m]);const w=E.useCallback(P=>{const D=P.relatedTarget;y.current?.contains(D)||i?.()},[i]),x=ve("nhsuk-tabs",u);return s.jsxs("div",{className:x,id:c,"data-testid":d,...f,children:[s.jsx("h2",{className:"nhsuk-tabs__title",children:"Contents"}),s.jsx("div",{className:"nhsuk-tabs__list-container",ref:y,children:s.jsx("ul",{className:"nhsuk-tabs__list",role:"tablist",onBlur:w,children:e.map(P=>{const D=P.id===m,v=P.disabled,F=ve("nhsuk-tabs__list-item",{"nhsuk-tabs__list-item--selected":D,"nhsuk-tabs__list-item--disabled":v});return s.jsx("li",{className:F,role:"presentation",children:s.jsx("button",{ref:M=>N(P.id,M),className:"nhsuk-tabs__tab",role:"tab","aria-selected":D,"aria-controls":`${P.id}-panel`,id:`${P.id}-tab`,tabIndex:D?0:-1,disabled:v,onClick:()=>!v&&j(P.id),onKeyDown:M=>!v&&$(M,P.id),onFocus:()=>!v&&k(P.id),...P.attributes,children:P.label})},P.id)})})}),e.map(P=>{const D=P.id===m;return s.jsx("div",{className:"nhsuk-tabs__panel",role:"tabpanel","aria-labelledby":`${P.id}-tab`,id:`${P.id}-panel`,hidden:!D,children:P.content},P.id)})]})}),Au=E.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:a=!1,className:i="",id:o,children:l,...u},c)=>{const d=["nhsuk-details",i].filter(Boolean).join(" "),f=t?s.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):s.jsx("span",{className:"nhsuk-details__summary-text",children:e});let p;return l?p=l:r?p=s.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),s.jsxs("details",{ref:c,id:o,className:d,open:a,...u,children:[s.jsx("summary",{className:"nhsuk-details__summary",tabIndex:0,children:f}),s.jsx("div",{className:"nhsuk-details__text",children:p})]})});Au.displayName="Details";const Eu=E.forwardRef(({title:e,type:t,items:n,hidePrefix:r=!1,headingLevel:a=3,className:i,...o},l)=>{const u=["nhsuk-do-dont-list"];i&&u.push(i);const c=["nhsuk-list",t==="tick"?"nhsuk-list--tick":"nhsuk-list--cross"],d=()=>t==="cross"?s.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:[s.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),s.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]}):s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"34",height:"34",children:s.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})}),f=g=>t==="cross"&&!r?`do not ${g}`:g,p=()=>s.jsx(Vt,{level:a,className:"nhsuk-do-dont-list__label",text:e});return s.jsxs("div",{ref:l,className:u.join(" "),...o,children:[p(),s.jsx("div",{className:"nhsuk-do-dont-list__content--feature",children:s.jsx("ul",{className:c.join(" "),role:"list",children:n.map((g,_)=>s.jsxs("li",{children:[d(),f(g.item)]},_))})})]})});Eu.displayName="DoDontList";const Bu=E.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:a=!1,className:i="",id:o,children:l,...u},c)=>{const d=["nhsuk-expander",i].filter(Boolean).join(" "),f=t?s.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):s.jsx("span",{className:"nhsuk-details__summary-text",children:e});let p;return l?p=l:r?p=s.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),s.jsxs("details",{ref:c,id:o,className:d,open:a,...u,children:[s.jsx("summary",{className:"nhsuk-details__summary",children:f}),s.jsx("div",{className:"nhsuk-details__text",children:p})]})});Bu.displayName="Expander";const Ru=E.forwardRef(({items:e,idPrefix:t="task-list",className:n,...r},a)=>{const i=["nhsuk-task-list",n].filter(Boolean).join(" "),o=(l,u)=>{const c=u+1,d=`${t}-${c}-hint`,f=`${t}-${c}-status`,p=!!l.href,g=["nhsuk-task-list__item",p&&"nhsuk-task-list__item--with-link",l.classes].filter(Boolean).join(" "),_=[l.hint&&d,f].filter(Boolean).join(" ");return s.jsx(D_,{item:l,itemClasses:g,hasLink:p,hintId:d,statusId:f,ariaDescribedBy:_},u)};return s.jsx("ul",{ref:a,className:i,...r,children:e.map(o)})}),D_=({item:e,itemClasses:t,hasLink:n,hintId:r,statusId:a,ariaDescribedBy:i})=>{const o=()=>{const c=e.title.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:e.title.html}}):e.title.text,d=[n?"nhsuk-task-list__link":"",e.title.classes].filter(Boolean).join(" ");return n?s.jsx("a",{className:d,href:e.href,"aria-describedby":i,children:c}):s.jsx("div",{className:e.title.classes||"",children:c})},l=()=>e.hint?e.hint.html?s.jsx("div",{id:r,className:"nhsuk-task-list__hint",dangerouslySetInnerHTML:{__html:e.hint.html}}):s.jsx("div",{id:r,className:"nhsuk-task-list__hint",children:e.hint.text}):null,u=()=>{const c=["nhsuk-task-list__status",e.status.classes].filter(Boolean).join(" ");let d;return e.status.tag?d=s.jsx(He,{...e.status.tag}):e.status.html?d=s.jsx("span",{dangerouslySetInnerHTML:{__html:e.status.html}}):d=e.status.text,s.jsx("div",{className:c,id:a,children:d})};return s.jsxs("li",{className:t,children:[s.jsxs("div",{className:"nhsuk-task-list__name-and-hint",children:[o(),l()]}),u()]})};Ru.displayName="TaskList";const M_=({heading:e,headingLevel:t=3,text:n,html:r,children:a,className:i,...o})=>{const l=/important/i.test(e),u=()=>a||(r?s.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n?s.jsx("p",{children:n}):null),c=["nhsuk-warning-callout",i].filter(Boolean).join(" "),d=`h${t}`;return s.jsxs("div",{className:c,...o,children:[E.createElement(d,{className:"nhsuk-warning-callout__label"},l?s.jsxs(s.Fragment,{children:[e,s.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"})]}):s.jsxs("span",{role:"text",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Important: "}),e]})),u()]})},$_=({src:e,alt:t,caption:n,sizes:r,srcset:a,className:i,...o})=>{const l=["nhsuk-image",i].filter(Boolean).join(" ");return s.jsxs("figure",{className:l,...o,children:[s.jsx("img",{className:"nhsuk-image__img",src:e,alt:t,...r&&a?{sizes:r,srcSet:a}:{}}),n&&s.jsx("figcaption",{className:"nhsuk-image__caption",dangerouslySetInnerHTML:{__html:n}})]})},I_=({dateRange:e,onPrev:t,onNext:n,onToday:r,density:a,onDensityChange:i,a11yMode:o,onA11yModeChange:l})=>s.jsxs("div",{className:"nhs-slot-matrix__toolbar",role:"group","aria-label":"Slot matrix controls",children:[s.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[s.jsx(ut,{variant:"secondary",size:"small",onClick:t,"aria-label":"Previous date range",children:"Prev"}),s.jsx(ut,{variant:"secondary",size:"small",onClick:r,"aria-label":"Jump to today",children:"Today"}),s.jsx(ut,{variant:"secondary",size:"small",onClick:n,"aria-label":"Next date range",children:"Next"}),s.jsxs("span",{className:"nhs-slot-matrix__toolbar-daterange","aria-live":"polite",children:[e.start.toDateString()," â€“ ",e.end.toDateString()]})]}),s.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[s.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-density-select",children:"Density"}),s.jsx(Ar,{id:"slot-matrix-density-select",name:"slot-matrix-density",ariaLabel:"Change density",value:a,onChange:u=>i?.(u.target.value),options:[{value:"comfortable",text:"Comfortable"},{value:"compact",text:"Compact"}]}),s.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-mode-select",children:"Mode"}),s.jsx(Ar,{id:"slot-matrix-mode-select",name:"slot-matrix-mode",ariaLabel:"Change accessibility mode",value:o,onChange:u=>l?.(u.target.value),options:[{value:"grid",text:"Grid"},{value:"list",text:"List"}]})]})]}),P_=({items:e,orientation:t="horizontal"})=>s.jsx("div",{className:`nhs-slot-matrix__legend nhs-slot-matrix__legend--${t}`,role:"list","aria-label":"Slot legend",children:e.map(n=>s.jsx("div",{role:"listitem",className:"nhs-slot-matrix__legend-item",children:s.jsx(He,{color:F_(n.status),text:n.label})},n.status))});function F_(e){switch(e){case"available":return"green";case"full":return"grey";case"overbook":return"orange";case"held":return"yellow";case"blocked":return"grey";default:return"default"}}const L_=({slots:e,sessions:t,value:n,defaultValue:r,onChange:a,selectionMode:i="single",a11yMode:o,className:l,style:u,getSlotAriaLabel:c,toolbar:d,enableDefaultToolbar:f=!0,legendItems:p,enableDefaultLegend:g=!0,legendPlacement:_="bottom",onA11yModeChange:h})=>{const[m,y]=E.useState("grid"),C=o||m,[j,k]=E.useState(r||[]),$=n??j,N=E.useMemo(()=>{const M=new Set;return e.forEach(S=>M.add(new Date(S.start).getTime())),Array.from(M).sort((S,I)=>S-I)},[e]),T=E.useMemo(()=>{const M={};return e.forEach(S=>{const I=new Date(S.start).getTime();M[I]||(M[I]={});const L=S.capacity-S.booked-(S.held||0);M[I][S.sessionId]={slot:S,remaining:L}}),M},[e]),w=E.useCallback(M=>{if(i==="single"){const S=[M.id];n||k(S),a?.(S,{lastAction:"select"})}else{const S=$.includes(M.id),I=S?$.filter(L=>L!==M.id):[...$,M.id];n||k(I),a?.(I,{lastAction:S?"deselect":"select"})}},[i,$,n,a]),x=E.useMemo(()=>p||(g?Array.from(new Set(e.map(S=>S.status))).map(S=>({status:S,label:S.charAt(0).toUpperCase()+S.slice(1)})):void 0),[p,g,e]),P=x?s.jsx(P_,{items:x,orientation:_==="left"||_==="right"?"vertical":"horizontal"}):null,D=M=>{o||y(M),h?.(M)},v=d||(f?s.jsx(I_,{dateRange:{start:new Date,end:new Date},density:"comfortable",a11yMode:C,onA11yModeChange:D}):null),F=s.jsx("div",{style:u,className:ve(l),children:s.jsx(Xa,{className:ve("nhs-slot-matrix-grid-wrapper"),children:s.jsx(Nn,{children:s.jsx(or,{width:Tn.Full,children:s.jsxs("div",{className:"nhs-slot-matrix",children:[v,_==="top"&&P,s.jsx("ul",{"aria-label":"Appointment slots list",children:e.map(M=>s.jsx("li",{children:s.jsxs("button",{type:"button",onClick:()=>w(M),"aria-pressed":$.includes(M.id),children:[Yr(new Date(M.start))," â€“ ",Yr(new Date(M.end))," (",M.status,")"]})},M.id))}),_==="bottom"&&P]})})})})});return C==="list"?F:s.jsx("div",{style:u,className:ve(l),children:s.jsx(Xa,{className:ve("nhs-slot-matrix-grid-wrapper"),children:s.jsx(Nn,{children:s.jsx(or,{width:Tn.Full,children:s.jsxs("div",{className:"nhs-slot-matrix",children:[v,_==="top"&&P,s.jsxs("div",{role:"grid","aria-rowcount":N.length+1,"aria-colcount":t.length+1,children:[s.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[s.jsx("div",{role:"columnheader","aria-label":"Timebands",className:"nhs-slot-matrix__timeband-header"}),t.map(M=>s.jsx("div",{role:"columnheader","aria-label":`Session ${M.specialty}`,className:"nhs-slot-matrix__session-header",children:M.specialty},M.id))]}),N.map(M=>s.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[s.jsx("div",{role:"rowheader",className:"nhs-slot-matrix__timeband-header","aria-label":Yr(new Date(M)),children:Yr(new Date(M))}),t.map(S=>{const I=T[M]?.[S.id];if(!I)return s.jsx("div",{role:"gridcell",className:"nhs-slot-matrix__cell","aria-disabled":"true"},S.id);const{slot:L,remaining:re}=I,q=$.includes(L.id),O=c?c(L):`Slot ${Yr(new Date(L.start))} ${L.status}${re===0?" full":""}`;return s.jsx("button",{type:"button",role:"gridcell","data-status":L.status,className:ve("nhs-slot-matrix__cell",q&&"nhs-slot-matrix__cell--selected"),"aria-label":O,"aria-selected":q||void 0,onClick:()=>w(L),children:re>0?`${re} left`:"Full"},L.id)})]},M))]}),_==="bottom"&&P]})})})})})};function Hu(e){return e<10?`0${e}`:`${e}`}function Yr(e){return`${Hu(e.getHours())}:${Hu(e.getMinutes())}`}const Ou=({title:e,value:t,subtitle:n,variant:r="default",href:a,className:i="",ariaLabel:o,...l})=>{const u=["nhs-fdp-summary-card",`nhs-fdp-summary-card--${r}`,i].filter(Boolean).join(" "),c=s.jsxs(s.Fragment,{children:[s.jsx(Vt,{level:3,className:"nhs-fdp-summary-card__title",children:e}),s.jsx("p",{className:"nhs-fdp-summary-card__value",children:t}),n&&s.jsx("p",{className:"nhs-fdp-summary-card__subtitle",children:n})]});return a?s.jsx("a",{className:`${u} nhs-fdp-summary-card--clickable`,href:a,"aria-label":o||`${e}: ${t}`,...l,children:c}):s.jsx("div",{className:u,"aria-label":o,...l,children:c})},A_=({cards:e,className:t="",...n})=>{const r=["nhs-fdp-dashboard-summary-grid",t].filter(Boolean).join(" ");return s.jsx("div",{className:r,...n,children:s.jsx(Xa,{children:s.jsx(Nn,{children:e.map((a,i)=>s.jsx(or,{width:Tn.OneQuarter,className:"nhs-fdp-dashboard-summary-grid__column","data-card-index":i,children:s.jsx(Ou,{...a})},i))})})})},zu=E.forwardRef(({data:e,columns:t,sortConfig:n,onSort:r,selectedRowIndex:a,onRowSelect:i,id:o,testId:l,ariaLabel:u,ariaLabelledby:c,ariaDescribedby:d,className:f,tableClassName:p,bordered:g=!1,striped:_=!1,responsive:h=!1,tableType:m="default"},y)=>{const C=E.useRef(null),j=E.useRef(null),k=E.useRef(null);E.useImperativeHandle(y,()=>C.current,[]);const[$,N]=E.useState(0),[T,w]=E.useState(0),[x,P]=E.useState("headers"),[D,v]=E.useState("browse"),F=t.length,M=e.length,S=E.useMemo(()=>!n||n.length===0?e:[...e].sort((z,le)=>{for(const{key:V,direction:ue}of n){const we=z[V],fe=le[V];if(we==null&&fe==null)continue;if(we==null)return 1;if(fe==null)return-1;let he=0;if(typeof we=="number"&&typeof fe=="number"?he=we-fe:he=String(we).localeCompare(String(fe)),he!==0)return ue==="asc"?he:-he}return 0}),[e,n]),I=E.useCallback((z,le)=>{setTimeout(()=>{const V=C.current?.querySelector(`tbody tr:nth-child(${z+1}) td:nth-child(${le+1})`);V&&(V.focus(),typeof V.scrollIntoView=="function"&&V.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),L=E.useCallback(z=>{setTimeout(()=>{const le=C.current?.querySelector(`th:nth-child(${z+1})`);le&&(le.focus(),typeof le.scrollIntoView=="function"&&le.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),re=E.useCallback(z=>{r?.(z)},[r]),q=E.useCallback(z=>{i?.(z)},[i]),O=E.useCallback(z=>{const{key:le}=z;switch(le){case"Enter":if(z.preventDefault(),x==="headers"&&D==="browse")v("navigate"),L(T);else if(x==="headers"&&D==="navigate"){const V=t[T];V&&re(V.key)}else x==="cells"&&D==="browse"?(v("navigate"),I($,T)):x==="cells"&&D==="navigate"&&q($);break;case"Escape":z.preventDefault(),(x==="headers"&&D==="navigate"||x==="cells"&&D==="navigate")&&v("browse");break;case"ArrowLeft":if(z.preventDefault(),D==="navigate"||D==="browse"&&x==="headers"){if(x==="headers"){const V=Math.max(0,T-1);w(V),L(V)}else if(x==="cells"){const V=Math.max(0,T-1);w(V),I($,V)}}break;case"ArrowRight":if(z.preventDefault(),D==="navigate"||D==="browse"&&x==="headers"){if(x==="headers"){const V=Math.min(F-1,T+1);w(V),L(V)}else if(x==="cells"){const V=Math.min(F-1,T+1);w(V),I($,V)}}break;case"ArrowUp":if(z.preventDefault(),x==="cells"){if(D==="browse"){const V=Math.max(0,$-1);N(V),I(V,0),w(0)}else if(D==="navigate")if($>0){const V=$-1;N(V),I(V,T)}else P("headers"),v("browse"),L(T)}break;case"ArrowDown":if(z.preventDefault(),x==="headers"&&D==="browse")P("cells"),N(0),w(0),I(0,0);else if(x==="cells"){const V=M-1;if(D==="browse"){const ue=Math.min(V,$+1);N(ue),I(ue,0),w(0)}else if(D==="navigate"&&$<V){const ue=$+1;N(ue),I(ue,T)}}break;case"Home":z.preventDefault(),x==="headers"?(w(0),L(0)):x==="cells"&&(z.ctrlKey?(N(0),w(0),I(0,0)):(w(0),I($,0)));break;case"End":if(z.preventDefault(),x==="headers"){const V=F-1;w(V),L(V)}else if(x==="cells")if(z.ctrlKey){const V=M-1,ue=F-1;N(V),w(ue),I(V,ue)}else{const V=F-1;w(V),I($,V)}break;case" ":if(z.preventDefault(),x==="headers"&&D==="navigate"){const V=t[T];V&&re(V.key)}else x==="cells"&&D==="navigate"&&q($);break}},[x,D,T,$,F,M,t,I,L,re,q]);E.useEffect(()=>{const z=C.current;if(z)return z.addEventListener("keydown",O),()=>z.removeEventListener("keydown",O)},[O]);const W=ve("nhsuk-table",p,{"nhsuk-table--responsive":h,"nhsuk-table--bordered":g,"nhsuk-table--striped":_,"nhsuk-table--compact":m==="compact"},f);return s.jsxs("table",{ref:C,className:W,id:o,"data-testid":l,role:"grid","aria-label":u,"aria-labelledby":c,"aria-describedby":d,tabIndex:0,children:[s.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:s.jsx("tr",{ref:j,role:"row",children:t.map((z,le)=>{const V=n?.find(fe=>fe.key===z.key),ue=!!V,we=x==="headers"&&T===le;return s.jsx("th",{className:ve("sortable-header",{"sortable-header--focused":we}),role:"columnheader",tabIndex:we?0:-1,onClick:()=>re(z.key),onKeyDown:fe=>{(fe.key==="Enter"||fe.key===" ")&&(fe.preventDefault(),re(z.key))},"aria-sort":ue?V?.direction==="asc"?"ascending":"descending":"none",children:s.jsxs("div",{className:"header-content",children:[s.jsx("span",{className:"header-label",children:z.label}),ue&&s.jsxs("span",{className:"sort-indicator","aria-hidden":"true",children:[n&&n.length>1&&s.jsx("span",{className:"sort-priority",children:n.findIndex(fe=>fe.key===z.key)+1}),s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",className:"sort-arrow",children:V?.direction==="asc"?s.jsx("path",{d:"M6 2L2 8h8L6 2z"}):s.jsx("path",{d:"M6 10L2 4h8L6 10z"})})]})]})},z.key)})})}),s.jsx("tbody",{ref:k,className:"nhsuk-table__body",role:"rowgroup",children:S.map((z,le)=>{const V=a===le,ue=x==="cells"&&$===le;return s.jsx("tr",{role:"row",className:ve("data-row",{"data-row--selected":V,"data-row--focused":ue}),"aria-selected":V,children:t.map((we,fe)=>{const he=we.tableRenderer?we.tableRenderer(z):we.render?we.render(z):z[we.key],ne=x==="cells"&&$===le&&T===fe,oe=()=>typeof he=="boolean"?s.jsxs(s.Fragment,{children:[s.jsx("span",{"aria-hidden":"true",children:he?"âœ“":"âœ—"}),s.jsx("span",{className:"sr-only",children:he?"Yes":"No"})]}):String(he??"");return s.jsx("td",{role:"gridcell",className:ve("data-cell",{"data-cell--focused":ne}),tabIndex:ne?0:-1,onClick:()=>q(le),children:oe()},we.key)})},le)})})]})});zu.displayName="AriaDataGrid";const Wu=({sortConfig:e,columns:t,onSortChange:n,className:r="",emptyDescription:a="No sorting applied",activeDescription:i,showReset:o=!0,showHelp:l=!0,disabled:u=!1,ariaLabel:c="Sort configuration",ariaDescribedBy:d})=>{const f=E.useRef(null),p=E.useRef(null),g=E.useRef(null),_=E.useCallback((x,P)=>{u||(p.current=P,x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",P))},[u]),h=E.useCallback((x,P)=>{u||p.current===P||(x.preventDefault(),x.dataTransfer.dropEffect="move",g.current=P)},[u]),m=E.useCallback((x,P)=>{if(u)return;x.preventDefault();const D=p.current;if(!D||D===P)return;const v=e.findIndex(M=>M.key===D),F=e.findIndex(M=>M.key===P);if(v!==-1&&F!==-1){const M=[...e],[S]=M.splice(v,1);M.splice(F,0,S),n(M)}p.current=null,g.current=null},[u,e,n]),y=E.useCallback(()=>{p.current=null,g.current=null},[]),C=E.useCallback(x=>{const P=t.find(D=>D.key===x);return P?P.label:x},[t]),j=E.useCallback(x=>["red","orange","blue","aqua-green","grey"][x]||"grey",[]),k=E.useCallback(x=>{if(u)return;const P=e.map(D=>D.key===x?{...D,direction:D.direction==="asc"?"desc":"asc"}:D);n(P)},[e,n,u]),$=E.useCallback(x=>{if(u)return;const P=e.filter(D=>D.key!==x);n(P)},[e,n,u]),N=E.useCallback(()=>{u||n([])},[n,u]),T=()=>{if(e.length===0)return a;if(i)return i;const x=e.map((P,D)=>{const v=P.direction==="asc"?"ascending":"descending";return`${D+1}. ${C(P.key)} (${v})`});if(x.length===1)return`Sorted by: ${x[0]}`;if(x.length===2)return`Sorted by: ${x.join(" and ")}`;{const P=x.pop();return`Sorted by: ${x.join(", ")}, and ${P}`}},w=E.useMemo(()=>{const x=["sort-description"];return l&&x.push("sort-help"),d&&x.push(d),x.join(" ")},[l,d]);return e.length===0?s.jsxs("div",{className:`sort-status-control ${r}`,children:[s.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:a}),l&&s.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:s.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]}):s.jsxs("div",{className:`sort-status-control ${r}`,children:[s.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:T()}),s.jsxs("div",{className:"sort-status-container",children:[s.jsx("div",{ref:f,className:"sort-status-control__tags",role:"list","aria-label":c,"aria-describedby":w,children:e.map((x,P)=>s.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",draggable:!u,onDragStart:D=>_(D,x.key),onDragOver:D=>h(D,x.key),onDrop:D=>m(D,x.key),onDragEnd:y,onClick:()=>k(x.key),style:{cursor:u?"default":"pointer"},title:u?"":`Click to toggle sort direction. Currently ${x.direction==="asc"?"ascending":"descending"}`,"data-key":x.key,children:s.jsx(He,{color:j(P),className:"sort-status-control__tag",closable:!0,onClose:()=>$(x.key),disabled:u,children:s.jsxs("div",{className:"sort-status-control__tag-content",children:[s.jsx("div",{className:"sort-status-control__drag-handle",title:"Drag to reorder",children:"â‹®â‹®"}),s.jsx("div",{className:`sort-status-control__priority-badge sort-priority sort-priority--priority-${P+1}`,children:P+1}),s.jsx("span",{className:"sort-status-control__tag-label",children:C(x.key)}),s.jsx("button",{type:"button",className:"sort-status-control__direction-button",onClick:D=>{D.stopPropagation(),k(x.key)},disabled:u,"aria-label":`Toggle sort direction for ${C(x.key)}. Currently ${x.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:s.jsx("span",{className:`sort-status-control__direction-icon sort-status-control__direction-icon--${x.direction}`,children:s.jsx("svg",{className:`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${x.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})})})]})})},x.key))}),o&&s.jsx("div",{className:"sort-status-control__actions",children:s.jsx(ut,{variant:"secondary",onClick:N,disabled:u,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})})]}),l&&s.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:s.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]})};function E_(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const a=[...e.selectedRows];return a[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:a};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:i}=t.payload,o=new Array(i).fill(!1),l=new Array(i).fill(null),u=new Array(i).fill([]);for(let c=0;c<Math.min(e.tabLoadingStates.length,i);c++)o[c]=e.tabLoadingStates[c],l[c]=e.tabErrors[c],u[c]=e.selectedRows[c];return{...e,tabLoadingStates:o,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}const mi=E.forwardRef(function(t,n){const{dataConfig:r={},tabPanels:a,selectedIndex:i,onTabChange:o,onGlobalRowSelectionChange:l,ariaLabel:u,ariaDescription:c,className:d="",disabled:f=!1,orientation:p="horizontal",id:g,isLoading:_=!1,loadingComponent:h,error:m=null,errorComponent:y,"data-testid":C,actions:j,actionsMinGap:k=16,forceActionsAbove:$=!1}=t,T=E.useRef(g||`aria-tabs-datagrid-${Math.random().toString(36).slice(2,9)}`).current,w=typeof c=="string"&&c.trim()!==""&&!/\s/.test(c),x=`${T}-description`,P=`${T}-navigation-help`,{dataComparator:D=(R,te)=>JSON.stringify(R)===JSON.stringify(te),filterFunction:v=R=>R,booleanRenderer:F=R=>R?"âœ“":"âœ—"}=r||{},M=i!==void 0,S=i??0,[I,L]=E.useState({focusArea:"tabs",focusedTabIndex:S,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}),re=E.useMemo(()=>({selectedIndex:S,tabLoadingStates:new Array(a.length).fill(!1),tabErrors:new Array(a.length).fill(null),sortConfig:[],selectedRows:new Array(a.length).fill([]),globalSelectedRowData:null,filters:void 0}),[S]),[q,O]=E.useReducer(E_,re);E.useEffect(()=>{const R=q.tabLoadingStates.length,te=a.length;R!==te&&O({type:"ADJUST_ARRAYS",payload:{newLength:te}})},[a.length]),E.useEffect(()=>{M&&O({type:"SET_SELECTED_INDEX",payload:S})},[S,M]),E.useEffect(()=>{L(R=>({...R,focusArea:"tabs",focusedTabIndex:q.selectedIndex,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}))},[q.selectedIndex]),E.useEffect(()=>{l&&l(q.globalSelectedRowData)},[q.globalSelectedRowData,l]);const W=E.useCallback((R,te)=>D(R,te),[D]),z=E.useCallback(R=>{R>=0&&R<a.length&&!a[R].disabled&&(O({type:"SET_SELECTED_INDEX",payload:R}),L(te=>({...te,focusedTabIndex:R,focusArea:"tabs"})),o?.(R))},[a,o]),le=E.useRef(!1),V=E.useCallback((R,te)=>{if(!te?.force&&!le.current&&R===0){le.current=!0;return}le.current=!0,setTimeout(()=>{const se=ue.current[R],X=se?.parentElement;if(se&&X){const U=se.offsetLeft,ie=se.offsetWidth,ge=X.clientWidth,ce=U-ge/2+ie/2;try{X.scrollTo({left:Math.max(0,ce),behavior:"smooth"})}catch{se.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}}else process.env.SILENCE_SCROLL_DEBUG||console.debug("[AriaTabsDataGrid] Missing elements for scroll",{tabElementExists:!!se,tabListElementExists:!!X})},50)},[]),ue=E.useRef([]),we=E.useRef([]),fe=E.useCallback((R,te)=>{const se=q.sortConfig||[],X=se.find(ge=>ge.key===te);let U;X?X.direction==="asc"?U=se.map(ge=>ge.key===te?{...ge,direction:"desc"}:ge):U=se.filter(ge=>ge.key!==te):U=[...se,{key:te,direction:"asc"}],O({type:"SET_SORT",payload:U}),a[R].onSort?.(te)},[q.sortConfig,a]),he=E.useCallback(R=>{setTimeout(()=>{const te=document.querySelector(`[data-tab-panel="${q.selectedIndex}"] th:nth-child(${R+1})`);te&&te.focus()},0)},[q.selectedIndex]),ne=E.useCallback(R=>F(R),[F]),oe=E.useCallback((R,te)=>{setTimeout(()=>{const se=document.querySelector(`[data-tab-panel="${q.selectedIndex}"] tbody tr:nth-child(${R+1}) td:nth-child(${te+1})`);se&&se.focus()},0)},[q.selectedIndex]);E.useEffect(()=>{I.isGridActive&&(I.focusArea==="headers"?setTimeout(()=>{he(I.focusedHeaderIndex)},0):I.focusArea==="cells"&&setTimeout(()=>{oe(I.focusedRowIndex,I.focusedColumnIndex)},0))},[I.focusArea,I.isGridActive,I.focusedHeaderIndex,I.focusedRowIndex,I.focusedColumnIndex,he,oe]),E.useEffect(()=>{V(q.selectedIndex)},[q.selectedIndex,V]);const pe=E.useCallback((R,te)=>{const{key:se}=R,X=a[q.selectedIndex],U=X?.columns.length||0;switch(se){case"ArrowLeft":R.preventDefault();const ie=Math.max(0,te-1);L(Ce=>({...Ce,focusedHeaderIndex:ie})),he(ie);break;case"ArrowRight":R.preventDefault();const ge=Math.min(U-1,te+1);L(Ce=>({...Ce,focusedHeaderIndex:ge})),he(ge);break;case"ArrowUp":R.preventDefault(),L(Ce=>({...Ce,focusArea:"tabs",focusedTabIndex:q.selectedIndex})),V(q.selectedIndex),ue.current[q.selectedIndex]?.focus();break;case"ArrowDown":R.preventDefault(),L(Ce=>({...Ce,focusArea:"cells",focusedRowIndex:0,focusedColumnIndex:te,isGridActive:!0}));break;case"Home":R.preventDefault(),L(Ce=>({...Ce,focusedHeaderIndex:0})),he(0);break;case"End":R.preventDefault();const ce=U-1;L(Ce=>({...Ce,focusedHeaderIndex:ce})),he(ce);break;case"Enter":case" ":R.preventDefault();const Se=X?.columns[te]?.key;Se&&fe(q.selectedIndex,Se);break}},[a,q.selectedIndex,fe,L,he,oe,ue]),K=E.useCallback((R,te,se)=>{const{key:X}=R,U=a[q.selectedIndex],ie=U?.data.length||0,ge=U?.columns.length||0;switch(X){case"ArrowUp":if(R.preventDefault(),te===0)L(_e=>({..._e,focusArea:"headers",focusedHeaderIndex:se,isGridActive:!1})),he(se);else{const _e=te-1;L(Ie=>({...Ie,focusedRowIndex:_e})),oe(_e,se)}break;case"ArrowDown":R.preventDefault();const ce=Math.min(ie-1,te+1);L(_e=>({..._e,focusedRowIndex:ce})),oe(ce,se);break;case"ArrowLeft":R.preventDefault();const Se=Math.max(0,se-1);L(_e=>({..._e,focusedColumnIndex:Se})),oe(te,Se);break;case"ArrowRight":R.preventDefault();const Ce=Math.min(ge-1,se+1);L(_e=>({..._e,focusedColumnIndex:Ce})),oe(te,Ce);break;case"Home":R.preventDefault(),R.ctrlKey?(L(_e=>({..._e,focusedRowIndex:0,focusedColumnIndex:0})),oe(0,0)):(L(_e=>({..._e,focusedColumnIndex:0})),oe(te,0));break;case"End":if(R.preventDefault(),R.ctrlKey){const _e=ie-1,Ie=ge-1;L(Be=>({...Be,focusedRowIndex:_e,focusedColumnIndex:Ie})),oe(_e,Ie)}else{const _e=ge-1;L(Ie=>({...Ie,focusedColumnIndex:_e})),oe(te,_e)}break;case"Enter":case" ":if(R.preventDefault(),U&&U.data[te]){const _e=U.data.some(Le=>"ews_data"in Le)?v(U.data,q.filters):U.data,Ie=q.sortConfig;let Be=_e;if(Ie&&Ie.length>0&&(Be=[..._e].sort((Le,Ee)=>{for(const{key:Qe,direction:et}of Ie){let lt=Le[Qe],fn=Ee[Qe];const ct=U.columns.find(za=>za.key===Qe);if(ct?.tableRenderer?(lt=ct.tableRenderer(Le),fn=ct.tableRenderer(Ee)):ct?.render&&(lt=ct.render(Le),fn=ct.render(Ee)),lt==null&&fn==null)continue;if(lt==null)return et==="asc"?-1:1;if(fn==null)return et==="asc"?1:-1;let pt=0;if(typeof lt=="number"&&typeof fn=="number"?pt=lt-fn:pt=String(lt).localeCompare(String(fn),void 0,{numeric:!0,sensitivity:"base"}),pt!==0)return et==="asc"?pt:-pt}return 0})),Be[te]){const Le=Be[te],Qe=q.globalSelectedRowData&&W(q.globalSelectedRowData,Le)?null:Le;O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:Qe})}}break}},[a,q.selectedIndex,q.filters,q.sortConfig,v,W,O,L,he,oe]),A=E.useCallback((R,te)=>v(R,te),[v]);if(E.useImperativeHandle(n,()=>({selectTab:R=>{R>=0&&R<a.length&&(O({type:"SET_SELECTED_INDEX",payload:R}),o?.(R))},refreshData:R=>{console.log("Refreshing data for tab:",R??"all")},exportData:R=>{const te=R??q.selectedIndex,se=a[te];return se?se.data:[]},getSelectedRows:R=>q.globalSelectedRowData?[]:[],clearSelection:R=>{O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:null})},applyFilters:R=>{O({type:"SET_FILTERS",payload:R})}}),[q.selectedIndex,q.selectedRows,a,o]),_)return s.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--loading ${d}`,"data-testid":C,children:h||s.jsx("div",{className:"aria-tabs-datagrid__loading",children:s.jsx("div",{className:"nhsuk-spinner",role:"status","aria-label":"Loading data",children:s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Loading..."})})})});if(m)return s.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--error ${d}`,"data-testid":C,children:y||s.jsxs("div",{className:"aria-tabs-datagrid__error",role:"alert",children:[s.jsx("h3",{className:"nhsuk-error-summary__title",children:"Error loading data"}),s.jsx("p",{children:m})]})});const B=E.useRef(null),G=E.useRef(null),ae=E.useRef(null),[Q,de]=E.useState(!0);E.useEffect(()=>{if(!j){de(!1);return}if($){de(!1);return}function R(){if(!B.current||!G.current||!ae.current)return;const X=B.current.clientWidth,U=Array.from(G.current.querySelectorAll(":scope > .aria-tabs-datagrid__tab")),ie=U.reduce((Ce,_e)=>Ce+_e.offsetWidth,0),ge=ae.current.offsetWidth,ce=Math.max(8*(U.length-1),0),Se=ie+ce+ge+k<=X;de(Se)}const te=requestAnimationFrame(()=>R()),se=new ResizeObserver(()=>R());return B.current&&se.observe(B.current),G.current&&se.observe(G.current),()=>{cancelAnimationFrame(te),se.disconnect()}},[j,k,$,a.length]);const ye=ae,me=E.useCallback(()=>ye.current?Array.from(ye.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(R=>!R.hasAttribute("disabled")):[],[]),H=E.useCallback(R=>{const te=me();if(!te.length)return;const se=Math.max(0,Math.min(R,te.length-1));te[se].focus(),L(X=>({...X,focusArea:"actions",focusedActionIndex:se}))},[me]),Y=E.useCallback(()=>H(0),[H]),J=E.useCallback((R,te)=>{const{key:se}=R,X=a.length-1;switch(se){case"ArrowUp":{j&&!Q&&(R.preventDefault(),Y());break}case"ArrowLeft":{R.preventDefault();const U=te>0?te-1:X;z(U),V(U),ue.current[U]?.focus();break}case"ArrowRight":{if(R.preventDefault(),te===X&&j&&Q){Y();return}const U=te<X?te+1:0;z(U),V(U),ue.current[U]?.focus();break}case"ArrowDown":{R.preventDefault(),L(U=>({...U,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));break}case"Home":{R.preventDefault(),z(0),V(0),ue.current[0]?.focus();break}case"End":{R.preventDefault(),z(X),V(X),ue.current[X]?.focus();break}case"Enter":case" ":{R.preventDefault(),z(te);break}case"Tab":{!R.shiftKey&&te===X&&j&&Q&&Y();break}}},[a.length,z,V,j,Q,Y]),ee=E.useCallback(R=>{const{key:te}=R,se=me();if(!se.length)return;const X=se.findIndex(U=>U===document.activeElement);switch(te){case"ArrowLeft":{if(Q)if(X>0)R.preventDefault(),H(X-1);else{R.preventDefault();const U=a.length-1;z(U),V(U),ue.current[U]?.focus(),L(ie=>({...ie,focusArea:"tabs",focusedTabIndex:U}))}break}case"ArrowRight":{Q&&(X<se.length-1?(R.preventDefault(),H(X+1)):(R.preventDefault(),z(0),V(0),ue.current[0]?.focus(),L(U=>({...U,focusArea:"tabs",focusedTabIndex:0}))));break}case"ArrowDown":{if(Q)R.preventDefault(),L(U=>({...U,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));else{R.preventDefault();const U=q.selectedIndex;ue.current[U]?.focus(),L(ie=>({...ie,focusArea:"tabs",focusedTabIndex:U}))}break}}},[me,Q,H,a.length,z,V,q.selectedIndex]);return s.jsxs("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--${p} ${d}`,id:g,"data-testid":C,ref:B,children:[c&&!w&&s.jsx("div",{id:x,className:"nhsuk-u-visually-hidden",children:c}),s.jsx("div",{className:"aria-tabs-datagrid__navigation-help sr-only",id:P,children:"Keyboard navigation: Use Tab to move between tabs and grid. Arrow keys navigate within tabs and grid cells. Enter activates tabs and sorts columns. Arrow Down from tabs moves to table headers. Arrow Down from headers moves to table cells. Use Arrow keys to navigate between cells."}),s.jsx(Wu,{sortConfig:q.sortConfig||[],columns:a.flatMap(R=>R.columns.map(te=>({key:te.key,label:te.label}))).filter((R,te,se)=>se.findIndex(X=>X.key===R.key)===te),onSortChange:R=>{O({type:"SET_SORT",payload:R})},ariaLabel:"Data grid sort configuration"}),j&&!Q&&s.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above",ref:ae,role:"toolbar","aria-label":"Additional actions",onKeyDown:ee,children:j}),s.jsxs("div",{className:`aria-tabs-datagrid__tabs-wrapper ${Q?"aria-tabs-datagrid__tabs-wrapper--inline-actions":""}`,children:[s.jsx("div",{role:"tablist","aria-label":u,"aria-describedby":c?w?c:x:P,"aria-orientation":p,className:"aria-tabs-datagrid__tabs",ref:G,children:a.map((R,te)=>{const se=te===q.selectedIndex,X=R.disabled||f;return s.jsxs("button",{role:"tab",id:`tab-${R.id}`,"aria-controls":`panel-${R.id}`,"aria-selected":se,"aria-disabled":X,tabIndex:se?0:-1,ref:U=>{ue.current[te]=U},onClick:()=>z(te),onKeyDown:U=>J(U,te),disabled:X,className:["aria-tabs-datagrid__tab",se?"aria-tabs-datagrid__tab--selected":"",X?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[s.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:R.label}),q.tabLoadingStates[te]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),q.tabErrors[te]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},R.id)})}),j&&Q&&s.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline",ref:ae,role:"toolbar","aria-label":"Additional actions",onKeyDown:ee,children:j})]}),a.map((R,te)=>{const se=te===q.selectedIndex;return s.jsx("div",{role:"tabpanel",id:`panel-${R.id}`,"aria-labelledby":`tab-${R.id}`,tabIndex:0,hidden:!se,ref:X=>{we.current[te]=X},className:`aria-tabs-datagrid__panel ${R.className||""}`,"data-tab-panel":te,children:se&&(()=>{const X=R.data.some(ie=>"ews_data"in ie)?A(R.data,q.filters):R.data,U=E.useMemo(()=>{const ie=q.sortConfig;return!ie||ie.length===0?X:[...X].sort((ge,ce)=>{for(const{key:Se,direction:Ce}of ie){let _e=ge[Se],Ie=ce[Se];const Be=R.columns.find(Ee=>Ee.key===Se);if(Be?.tableRenderer?(_e=Be.tableRenderer(ge),Ie=Be.tableRenderer(ce)):Be?.render&&(_e=Be.render(ge),Ie=Be.render(ce)),_e==null&&Ie==null)continue;if(_e==null)return 1;if(Ie==null)return-1;let Le=0;if(typeof _e=="number"&&typeof Ie=="number"?Le=_e-Ie:typeof _e=="boolean"&&typeof Ie=="boolean"?Le=_e===Ie?0:_e?1:-1:Le=String(_e).localeCompare(String(Ie),void 0,{numeric:!0,sensitivity:"base"}),Le!==0)return Ce==="asc"?Le:-Le}return 0})},[X,q.sortConfig,R.columns]);return s.jsxs("table",{className:"nhsuk-table aria-tabs-datagrid__grid",role:"grid","aria-label":R.ariaLabel,"aria-describedby":R.ariaDescription?`panel-${R.id}-description`:void 0,children:[R.ariaDescription&&s.jsx("caption",{className:"nhsuk-u-visually-hidden",id:`panel-${R.id}-description`,children:R.ariaDescription}),s.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:s.jsx("tr",{role:"row",children:R.columns.map((ie,ge)=>{const ce=q.sortConfig?.find(_e=>_e.key===ie.key),Se=!!ce,Ce=I.focusArea==="headers"&&I.focusedHeaderIndex===ge;return s.jsx("th",{className:`sortable-header ${Ce?"sortable-header--focused":""} ${Se?"sortable-header--sorted":""}`,role:"columnheader",tabIndex:Ce?0:-1,onClick:()=>fe(te,ie.key),onKeyDown:_e=>pe(_e,ge),"aria-sort":Se?ce?.direction==="asc"?"ascending":"descending":"none",children:s.jsxs("div",{className:"header-content",children:[s.jsx("span",{className:"header-label",children:ie.label}),s.jsxs("div",{className:`sort-indicator-container ${Se?`sort-indicator--${ce?.direction}`:""}`,children:[q.sortConfig&&q.sortConfig.length>0&&q.sortConfig.findIndex(_e=>_e.key===ie.key)!==-1&&s.jsx("span",{className:`sort-priority sort-priority--priority-${q.sortConfig.findIndex(_e=>_e.key===ie.key)+1}`,"data-priority":q.sortConfig.findIndex(_e=>_e.key===ie.key)+1,title:`Sort priority: ${q.sortConfig.findIndex(_e=>_e.key===ie.key)+1}`,children:q.sortConfig.findIndex(_e=>_e.key===ie.key)+1}),Se&&s.jsx("svg",{className:`nhsuk-icon sort-arrow sort-arrow--${ce?.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})]})]})},ie.key)})})}),s.jsx("tbody",{className:"nhsuk-table__body",role:"rowgroup",children:U.map((ie,ge)=>{const ce=q.globalSelectedRowData&&W(q.globalSelectedRowData,ie),Se=I.focusArea==="cells"&&I.focusedRowIndex===ge;return s.jsx("tr",{role:"row",className:`data-row ${ce?"data-row--selected":""} ${Se?"data-row--focused":""}`,"aria-selected":ce,children:R.columns.map((Ce,_e)=>{const Ie=ie[Ce.key];let Be;Ce.tableRenderer?Be=Ce.tableRenderer(ie):Ce.render?Be=Ce.render(ie):Be=Ie;const Le=I.focusArea==="cells"&&I.focusedRowIndex===ge&&I.focusedColumnIndex===_e,Ee=()=>{if(Ce.customRenderer){const Qe=Ce.customRenderer(Ie,ie);return s.jsx("span",{className:"data-cell__custom","data-custom-rendered":"true",children:Qe})}return typeof Ie=="boolean"&&Be===Ie?s.jsxs(s.Fragment,{children:[ne(Ie),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:Ie?"Yes":"No"})]}):E.isValidElement(Be)||typeof Be!="object"?Be??"":Be};return s.jsx("td",{role:"gridcell",className:`data-cell ${Le?"data-cell--focused":""}`,tabIndex:Le?0:-1,onClick:()=>{const et=q.globalSelectedRowData&&W(q.globalSelectedRowData,ie)?null:ie;O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:et})},onKeyDown:Qe=>K(Qe,ge,_e),children:Ee()},Ce.key)})},ge)})})]})})()},R.id)})]})}),gi={asc:"â†‘",desc:"â†“"},B_=e=>[...e].sort((t,n)=>t.priority-n.priority);function Js(e){return e.map((t,n)=>({...t,priority:n}))}function R_(e){return e.length>0?Math.max(...e.map(t=>t.priority)):-1}function H_(e,t){const n=t.find(r=>r.id===e);return n?n.priority>0:!1}function O_(e,t){const n=t.find(a=>a.id===e),r=R_(t);return n?n.priority<r:!1}const z_=({sortConfig:e,onSortChange:t,className:n="",emptyDescription:r="No sorting applied",activeDescription:a,showReset:i=!0,showHelp:o=!0,disabled:l=!1,ariaLabel:u="Sort configuration",ariaDescribedBy:c})=>{const d=E.useMemo(()=>B_(e),[e]),f=E.useCallback(C=>{if(l)return;const j=e.map(k=>k.id===C?{...k,direction:k.direction==="asc"?"desc":"asc"}:k);t(j)},[e,t,l]),p=E.useCallback(C=>{if(l)return;const j=e.findIndex($=>$.id===C);if(j<=0)return;const k=[...e];[k[j],k[j-1]]=[k[j-1],k[j]],t(Js(k))},[e,t,l]),g=E.useCallback(C=>{if(l)return;const j=e.findIndex($=>$.id===C);if(j>=e.length-1||j===-1)return;const k=[...e];[k[j],k[j+1]]=[k[j+1],k[j]],t(Js(k))},[e,t,l]),_=E.useCallback(C=>{if(l)return;const j=e.filter(k=>k.id!==C);t(Js(j))},[e,t,l]),h=E.useCallback(()=>{l||t([])},[t,l]),m=()=>{if(e.length===0)return r;if(a)return a;const C=d.map((j,k)=>{const $=j.direction==="asc"?"ascending":"descending";return`${k+1}. ${j.label} (${$})`});if(C.length===1)return`Sorted by: ${C[0]}`;if(C.length===2)return`Sorted by: ${C.join(" and ")}`;{const j=C.pop();return`Sorted by: ${C.join(", ")}, and ${j}`}},y=E.useMemo(()=>{const C=["sort-description"];return o&&C.push("sort-help"),c&&C.push(c),C.join(" ")},[o,c]);return e.length===0?s.jsx("div",{className:`sort-status-control sort-status-control--empty ${n}`,children:s.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:m()})}):s.jsxs("div",{className:`sort-status-control ${n}`,children:[s.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:m()}),s.jsxs("div",{className:"sort-status-control__tags",role:"list","aria-label":u,"aria-describedby":y,children:[s.jsx("div",{className:"sort-status-control__tags-label",children:"Current sorting:"}),d.map(C=>s.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",children:s.jsx(He,{text:"",color:"blue",className:"sort-status-control__tag",closable:!0,onClose:()=>_(C.id),disabled:l,children:s.jsxs("div",{className:"sort-status-control__tag-content",children:[s.jsx("span",{className:"sort-status-control__tag-priority",children:C.priority+1}),s.jsx("span",{className:"sort-status-control__tag-label",children:C.label}),s.jsx("button",{type:"button",className:"sort-status-control__tag-direction",onClick:()=>f(C.id),disabled:l,"aria-label":`Toggle sort direction for ${C.label}. Currently ${C.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:C.direction==="asc"?gi.asc:gi.desc}),s.jsxs("div",{className:"sort-status-control__tag-actions",children:[s.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>p(C.id),disabled:l||!H_(C.id,e),"aria-label":`Move ${C.label} sort up in priority`,title:"Move up in priority",children:"â–²"}),s.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>g(C.id),disabled:l||!O_(C.id,e),"aria-label":`Move ${C.label} sort down in priority`,title:"Move down in priority",children:"â–¼"})]})]})})},C.id))]}),i&&s.jsx("div",{className:"sort-status-control__actions",children:s.jsx(ut,{variant:"secondary",onClick:h,disabled:l,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})}),o&&s.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:s.jsxs("small",{children:["Click ",gi.asc,"/",gi.desc," to toggle ascending/descending. Use â–²/â–¼ to change sort priority. Click Ã— to remove a sort."]})})]})},yi=(e,t)=>t.map(n=>({id:n.id,label:n.label,data:n.filter?n.filter(e):e,columns:n.columns.map(r=>({key:r.key,label:r.label,render:r.render,customRenderer:r.customRenderer})),sortConfig:n.sortConfig,ariaLabel:n.ariaLabel||`${n.label} Data Grid`,ariaDescription:n.ariaDescription||`Data grid showing ${n.label.toLowerCase()}`,className:n.className,disabled:n.disabled})),Qs=[{value:!0,icon:s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"100%",height:"34",children:s.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})})},{value:!1,icon:s.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"100%",height:"34",children:[s.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),s.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]})}],W_=(e,t)=>!e||!t?e===t:e.name&&e.bed_name&&t.name&&t.bed_name?e.name===t.name&&e.bed_name===t.bed_name:JSON.stringify(e)===JSON.stringify(t),U_=(e,t)=>t?e.filter(n=>{if(t.ewsScoreRange){const[r,a]=t.ewsScoreRange;if(n.ews_score<r||n.ews_score>a)return!1}return!(t.wards&&t.wards.length>0&&!t.wards.includes(n.ward_name)||t.specialties&&t.specialties.length>0&&!t.specialties.includes(n.speciality)||t.dischargeStatuses&&t.dischargeStatuses.length>0&&!t.dischargeStatuses.includes(n.early_discharge_notification)||t.avpuLevels&&t.avpuLevels.length>0&&!t.avpuLevels.includes(n.ews_data.avpu)||t.medicallyOptimised!==null&&t.medicallyOptimised!==void 0&&n.medically_optimised!==t.medicallyOptimised||t.fastTrack!==null&&t.fastTrack!==void 0&&n.fast_track!==t.fastTrack)}):e,V_=e=>{if(typeof e=="boolean"){const n=Qs.find(r=>r.value===e);return n?n.icon:null}const t=Qs.find(n=>n.value===e);return t?t.icon:String(e)},G_=e=>`${e.name}-${e.bed_name}`,Y_=()=>({overview:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"bed_name",label:"Bed"},{key:"ews_score",label:"EWS Score"},{key:"speciality",label:"Specialty"},{key:"consultant",label:"Consultant"}],vitals:[{key:"name",label:"Patient Name"},{key:"ews_score",label:"EWS Score"},{key:"respiratory_rate_bpm",label:"Respiratory Rate",render:e=>e.ews_data.respiratory_rate_bpm},{key:"sp02",label:"SpO2 %",render:e=>e.ews_data.sp02},{key:"temperature",label:"Temperature Â°C",render:e=>e.ews_data.temperature},{key:"systolic_bp",label:"Systolic BP",render:e=>e.ews_data.systolic_bp},{key:"heart_rate",label:"Heart Rate",render:e=>e.ews_data.heart_rate},{key:"avpu",label:"AVPU",render:e=>e.ews_data.avpu.toUpperCase()}],discharge:[{key:"name",label:"Patient Name"},{key:"anticipated_discharge_date",label:"Anticipated Discharge",render:e=>new Date(e.anticipated_discharge_date).toLocaleDateString()},{key:"early_discharge_notification",label:"Discharge Status"},{key:"medically_optimised",label:"Medically Optimised"},{key:"criteria_to_reside",label:"Criteria to Reside"},{key:"fast_track",label:"Fast Track"},{key:"transport_status",label:"Transport Status"},{key:"pathway",label:"Pathway"}],logistics:[{key:"name",label:"Patient Name"},{key:"ward_name",label:"Ward"},{key:"room_name",label:"Room"},{key:"bed_name",label:"Bed"},{key:"bed_type",label:"Bed Type"},{key:"transport_booking",label:"Transport Booked"},{key:"transport_mobility",label:"Transport Type"},{key:"district_nurse_referral",label:"District Nurse"},{key:"equipment",label:"Equipment"}]}),q_=e=>{const t=Y_();return[{id:"overview",label:"Patient Overview",data:e,columns:t.overview,ariaLabel:"Patient Overview Data Grid",ariaDescription:"Overview of all patients with basic information"},{id:"vitals",label:"Vital Signs & EWS",data:e,columns:t.vitals,sortConfig:[{key:"ews_score",direction:"desc"},{key:"name",direction:"asc"},{key:"ward_name",direction:"asc"}],ariaLabel:"Patient Vital Signs Data Grid",ariaDescription:"Patient vital signs and Early Warning Scores"},{id:"discharge",label:"Discharge Planning",data:e.filter(n=>n.anticipated_discharge_date),columns:t.discharge,sortConfig:[{key:"anticipated_discharge_date",direction:"asc"},{key:"discharge_status",direction:"desc"}],ariaLabel:"Discharge Planning Data Grid",ariaDescription:"Patient discharge planning and status information"},{id:"logistics",label:"Bed Management",data:e,columns:t.logistics,sortConfig:[{key:"ward_name",direction:"asc"}],ariaLabel:"Bed Management Data Grid",ariaDescription:"Patient location and logistics information"}]},Uu={dataComparator:W_,filterFunction:U_,booleanRenderer:V_,getDataId:G_};function Vu(e,t,n){const{primaryField:r,secondaryFields:a=[],badges:i=[],hiddenFields:o=[],getPriority:l,getVariant:u,fieldRenderers:c={},classPrefix:d="adaptive-card"}=n,f=t.find(j=>j.key===r),p=f?.cardRenderer?f.cardRenderer(e):f?.render?f.render(e):e[r||"name"]||"Untitled",g=()=>a.filter(k=>!o.includes(k)&&e[k]).slice(0,3).map(k=>{const $=t.find(x=>x.key===k),N=e[k],T=c[k]?c[k](N,e):$?.cardRenderer?$.cardRenderer(e):$?.render?$.render(e):N;return`${$?.label||k}: ${T}`}).join(" â€¢ "),_=()=>i.length===0?null:i.filter(j=>e[j.fieldKey]!==void 0).map(j=>{const k=e[j.fieldKey],$=j.render?j.render(k,e):k;return`<span class="nhsuk-tag ${X_(j,k)}">${$}</span>`}).join(""),h=()=>u?u(e):l?.(e)==="high"?"primary":"default",m=_(),y=g(),C=m?`${y}${m?`<div class="adaptive-card__badges">${m}</div>`:""}`:y;return{variant:h(),heading:String(p),descriptionHtml:C,className:`adaptive-card ${d}`,"aria-label":`Record for ${p}`}}function X_(e,t){const n=e.className||"adaptive-card__badge";if(e.fieldKey==="ews_score"||e.fieldKey.includes("score")){const r=Number(t);return r>=7?`${n} nhsuk-tag--red`:r>=3?`${n} nhsuk-tag--yellow`:`${n} nhsuk-tag--green`}if(e.fieldKey==="priority"){const r=String(t).toLowerCase();if(r==="high")return`${n} nhsuk-tag--red`;if(r==="medium")return`${n} nhsuk-tag--yellow`;if(r==="low")return`${n} nhsuk-tag--green`}if(e.fieldKey==="status"){const r=String(t).toLowerCase();if(r==="urgent"||r==="critical")return`${n} nhsuk-tag--red`;if(r==="pending"||r==="warning")return`${n} nhsuk-tag--yellow`;if(r==="completed"||r==="success")return`${n} nhsuk-tag--green`}switch(e.color){case"primary":return`${n} nhsuk-tag--blue`;case"secondary":return`${n} nhsuk-tag--grey`;case"success":return`${n} nhsuk-tag--green`;case"warning":return`${n} nhsuk-tag--yellow`;case"danger":return`${n} nhsuk-tag--red`;default:return n}}const K_={primaryField:"name",secondaryFields:["id","description","status"],badges:[{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],hiddenFields:[],getPriority:e=>e.priority||"medium",getStatus:e=>e.status||"active",getVariant:e=>e.priority==="high"?"primary":"default",fieldRenderers:{},classPrefix:"adaptive-card--generic"},eo=({data:e,columns:t,onSelect:n,onAction:r,priority:a="medium",status:i="active"})=>{const o=e.name,l=e.age,u=e.ward_name,c=e.bed_name,d=e.ews_score,f=e.speciality,p=e.consultant;return s.jsxs("div",{className:`healthcare-card healthcare-card--patient healthcare-card--${a} healthcare-card--${i}`,onClick:()=>n?.(e),role:"button",tabIndex:0,"aria-label":`Patient record for ${o}, Age ${l}, Ward ${u}, Bed ${c}`,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__identity",children:[s.jsx("h3",{className:"healthcare-card__patient-name",children:o}),s.jsxs("p",{className:"healthcare-card__age-info",children:[s.jsx("span",{className:"healthcare-card__label",children:"Age: "}),s.jsx("span",{className:"healthcare-card__value",children:l})]})]}),s.jsx("div",{className:"healthcare-card__badges",children:d!==void 0&&s.jsxs(He,{color:J_(Gu(d)),className:"healthcare-card__alert",children:["EWS: ",d]})})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("dl",{className:"healthcare-card__details",children:[s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Ward"}),s.jsx("dd",{children:u})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Bed"}),s.jsx("dd",{children:c})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Specialty"}),s.jsx("dd",{children:f})]}),s.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--prominent",children:[s.jsx("dt",{children:"Consultant"}),s.jsx("dd",{children:p})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(ut,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-notes",e)},children:"Notes"}),s.jsx(ut,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-vitals",e)},children:"Vitals"}),s.jsx(ut,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:g=>{g.stopPropagation(),r?.("view-full",e)},children:"View Full Record"})]})]})},to=({data:e,onAction:t})=>s.jsxs("div",{className:"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__time-info",children:[s.jsx("h3",{className:"healthcare-card__time",children:new Date(e.appointment_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),s.jsx("p",{className:"healthcare-card__type",children:e.appointment_type})]}),s.jsxs("div",{className:"healthcare-card__badges",children:[s.jsx(He,{color:Q_(e.status||"active"),className:"healthcare-card__status",children:(e.status||"active").charAt(0).toUpperCase()+(e.status||"active").slice(1)}),s.jsxs(He,{color:"grey",className:"healthcare-card__duration",children:[e.duration||"30"," min"]})]})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("dl",{className:"healthcare-card__details",children:[s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Patient"}),s.jsx("dd",{children:e.patient_name})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Consultant"}),s.jsx("dd",{children:e.consultant})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Location"}),s.jsx("dd",{children:e.location})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(ut,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),s.jsx(ut,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Reschedule"})]})]}),no=({data:e,onAction:t})=>s.jsxs("div",{className:"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__medication-info",children:[s.jsx("h3",{className:"healthcare-card__medication-name",children:e.medication}),s.jsxs("p",{className:"healthcare-card__dose",children:[e.dose," â€¢ ",e.frequency]})]}),s.jsxs("div",{className:"healthcare-card__badges",children:[s.jsx(He,{color:"blue",className:"healthcare-card__route",children:e.route}),e.next_due&&s.jsxs(He,{color:"red",className:"healthcare-card__warning",children:["Due: ",new Date(e.next_due).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("dl",{className:"healthcare-card__details",children:[s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Patient"}),s.jsx("dd",{children:e.patient_name})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Prescriber"}),s.jsx("dd",{children:e.prescriber})]}),e.allergies&&s.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--urgent",children:[s.jsx("dt",{children:"Allergies"}),s.jsx("dd",{children:e.allergies})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(ut,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),s.jsx(ut,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Adjust Dose"})]})]}),ro=({data:e,onSelect:t,onAction:n,priority:r="medium"})=>{const a=e.name,i=e.ews_score,o=e.ews_data?.respiratory_rate_bpm,l=e.ews_data?.sp02,u=e.ews_data?.temperature,c=e.ews_data?.systolic_bp,d=e.ews_data?.heart_rate,f=e.ews_data?.avpu;return s.jsxs("div",{className:`healthcare-card healthcare-card--vitals healthcare-card--${r}`,onClick:()=>t?.(e),role:"button",tabIndex:0,"aria-label":`Vital signs for ${a}, EWS Score ${i}`,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__vitals-summary",children:[s.jsx("h3",{className:"healthcare-card__patient-name",children:a}),i!==void 0&&s.jsxs("p",{className:`healthcare-card__ews-score healthcare-card__ews-score--${Z_(i)}`,children:["EWS: ",i]})]}),s.jsx("div",{className:"healthcare-card__badges",children:f&&s.jsxs(He,{color:"blue",className:"healthcare-card__avpu",children:["AVPU: ",f.toUpperCase()]})})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("div",{className:"healthcare-card__vitals-grid",children:[o!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Respiratory Rate"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[o," bpm"]})]}),l!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"SpO2"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[l,"%"]})]}),u!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Temperature"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[u,"Â°C"]})]}),c!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Systolic BP"}),s.jsx("span",{className:"healthcare-card__vital-value",children:c})]}),d!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Heart Rate"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[d," bpm"]})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(ut,{variant:"secondary",className:"healthcare-card__action",onClick:p=>{p.stopPropagation(),n?.("view-trend",e)},children:"Trend"}),s.jsx(ut,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:p=>{p.stopPropagation(),n?.("record-new",e)},children:"Record New"})]})]})};function Gu(e){const t=typeof e=="string"?parseInt(e,10):e;return t>=7?"critical":t>=5?"high":t>=3?"medium":"low"}function Z_(e){return Gu(e)}function J_(e){switch(e){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"grey";default:return"grey"}}function Q_(e){switch(e.toLowerCase()){case"active":return"blue";case"pending":return"orange";case"completed":return"green";case"cancelled":return"grey";default:return"blue"}}const ex=[{fieldKey:"ews_score",render:e=>`EWS: ${e}`,className:"adaptive-card__ews-badge",color:"default"},{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],Yu=e=>e.ews_score&&Number(e.ews_score)>=7?"high":e.ews_score&&Number(e.ews_score)>=3?"medium":e.priority==="high"||e.status==="urgent"?"high":e.priority==="low"?"low":"medium",qu={name:"healthcare",defaultCardConfig:{primaryField:"name",secondaryFields:["nhs_number","ward","condition","consultant"],badges:ex,hiddenFields:[],getPriority:Yu,getStatus:e=>{if(e.status){const t=e.status.toLowerCase();if(["active","pending","completed","cancelled","urgent"].includes(t))return t}return"active"},getVariant:e=>Yu(e)==="high"||e.status==="urgent"?"primary":"default",fieldRenderers:{nhs_number:e=>e?`NHS: ${e}`:"",ews_score:e=>{const t=Number(e),n=t>=7?"HIGH":t>=3?"MEDIUM":"LOW";return`EWS: ${e} (${n})`},age:(e,t)=>t.dob?`${new Date().getFullYear()-new Date(t.dob).getFullYear()}y`:e?`${e}y`:""},classPrefix:"adaptive-card--healthcare"},cssImport:"./HealthcareCardTemplates.scss",cardTemplates:{patient:(e,t,n)=>{const r=n.getPriority?.(e)||"medium",a=n.getStatus?.(e)||"active",i=a==="urgent"?"active":a;return s.jsx(eo,{data:e,columns:t,priority:r,status:i,onSelect:o=>console.log("Patient selected:",o),onAction:(o,l)=>console.log("Patient action:",o,l)})},appointment:(e,t,n)=>{const r=n.getStatus?.(e)||"pending",a=r==="urgent"?"pending":r;return s.jsx(to,{data:e,columns:t,status:a,onSelect:i=>console.log("Appointment selected:",i),onAction:(i,o)=>console.log("Appointment action:",i,o)})},medication:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return s.jsx(no,{data:e,columns:t,priority:r,onSelect:a=>console.log("Medication selected:",a),onAction:(a,i)=>console.log("Medication action:",a,i)})},vitals:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return s.jsx(ro,{data:e,columns:t,priority:r,onSelect:a=>console.log("Vitals selected:",a),onAction:(a,i)=>console.log("Vitals action:",a,i)})}},fieldTypes:{isNHSNumber:e=>typeof e=="string"&&/^\d{3}\s?\d{3}\s?\d{4}$/.test(e.replace(/\s/g,"")),isEWSScore:e=>typeof e=="number"&&e>=0&&e<=20,isMedicalDate:e=>typeof e=="string"&&!isNaN(Date.parse(e))}};function Xu(e){return{primaryField:e?.primaryField||"name",secondaryFields:e?.secondaryFields||[],badges:e?.badgeFields?.map(t=>({fieldKey:t,className:"adaptive-card__badge"}))||[],hiddenFields:e?.hiddenFields||[],cardTemplate:e?.cardTemplate?(t,n,r)=>e.cardTemplate(t,n):void 0,classPrefix:"adaptive-card--generic"}}function Ku(e){if(!e||e.length===0)return!1;const t=e[0];return t.ews_score!==void 0||t.nhs_number!==void 0||t.patient_name!==void 0||t.ward!==void 0||t.consultant!==void 0}function tx(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const a=[...e.selectedRows];return a[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:a};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:i}=t.payload,o=new Array(i).fill(!1),l=new Array(i).fill(null),u=new Array(i).fill([]);for(let c=0;c<Math.min(e.tabLoadingStates.length,i);c++)o[c]=e.tabLoadingStates[c],l[c]=e.tabErrors[c],u[c]=e.selectedRows[c];return{...e,tabLoadingStates:o,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}function nx(e,t){const[n,r]=E.useState("cards");return E.useEffect(()=>{if(t){r(t);return}const a=()=>{const i=window.innerWidth;i<e.mobile?r("cards"):i<e.desktop?r("hybrid"):r("table")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[e,t]),n}function rx(e){return!e||typeof e!="object"?null:e.appointment_type||e.appointment_time||e.clinic?"appointment":e.medication_name||e.medication||e.dose||e.frequency?"medication":e.ews_score!==void 0||e.respiratory_rate!==void 0||e.spo2!==void 0||e.temperature!==void 0||e.systolic_bp!==void 0||e.heart_rate!==void 0?"vitals":e.name||e.patient_name||e.nhs_number||e.ward||e.bed?"patient":null}function ax(e,t,n,r){const a=r?{...r.defaultCardConfig,...n}:{...K_,...n};if(r&&r.cardTemplates){const i=rx(e);if(i&&r.cardTemplates[i]){const o=r.cardTemplates[i](e,t,a);if(o)return{variant:"default",children:o}}}return a.cardTemplate&&a.cardTemplate(e,t,a),Vu(e,t,a)}const ao=({breakpoints:e={mobile:768,tablet:1024,desktop:1200},forceLayout:t,cardConfig:n={},experimental:r={},enableAdvancedSorting:a=!1,topActions:i,bottomActions:o,gridActions:l,forceGridActionsAbove:u,tabPanels:c,dataConfig:d,selectedIndex:f,onTabChange:p,ariaLabel:g="Data grid",ariaDescription:_,orientation:h="horizontal",id:m,disabled:y=!1,className:C,...j})=>{const k=nx(e,t),$=f!==void 0,N=f??0,T=E.useMemo(()=>{if(c.some(Y=>Y.data&&Y.data.length>0&&Ku(Y.data))){const Y=Xu(n);return{...qu.defaultCardConfig,...Y}}else return Xu(n)},[n,c]),w=E.useMemo(()=>c.some(Y=>Y.data&&Y.data.length>0&&Ku(Y.data))?qu:void 0,[c]),x=E.useMemo(()=>({selectedIndex:N,tabLoadingStates:new Array(c.length).fill(!1),tabErrors:new Array(c.length).fill(null),sortConfig:[],selectedRows:new Array(c.length).fill([]),globalSelectedRowData:null,filters:void 0}),[N,c.length]),[P,D]=E.useReducer(tx,x),v=E.useRef([]),F=E.useRef([]),M=E.useRef([]),S=E.useRef(null),[I,L]=E.useState({focusArea:"tabs",focusedTabIndex:0,focusedCardIndex:0,selectedCardIndex:-1,isGridActive:!1,focusedCardElementIndex:0,cardElements:[],isCardNavigationActive:!1,gridColumns:1,gridRows:1,cardSortConfig:null,focusedSortControlIndex:0,isSortControlsActive:!1}),re=E.useCallback(H=>{if(!H.current)return{columns:1,rows:0};const Y=H.current,J=Y.querySelectorAll(".aria-tabs-datagrid-adaptive__card-wrapper");if(J.length===0)return{columns:1,rows:0};const ee=Y.offsetWidth,te=J[0].offsetWidth,se=Math.floor(ee/te)||1,X=Math.ceil(J.length/se);return{columns:se,rows:X}},[]),q=E.useCallback((H,Y)=>({row:Math.floor(H/Y),col:H%Y}),[]),O=E.useCallback((H,Y,J)=>H*J+Y,[]),W=E.useCallback((H,Y,J,ee)=>{const{row:R,col:te}=q(H,ee);let se=R,X=te;switch(Y){case"up":se=Math.max(0,R-1);break;case"down":se=Math.min(Math.floor((J-1)/ee),R+1);break;case"left":X=Math.max(0,te-1);break;case"right":X=Math.min(ee-1,te+1);break}const U=O(se,X,ee);return Math.min(U,J-1)},[q,O]);E.useEffect(()=>{I.isCardNavigationActive&&I.focusedCardElementIndex>=0&&I.cardElements.length>0&&setTimeout(()=>{const H=I.cardElements[I.focusedCardElementIndex];H&&(H.element.focus(),H.element.scrollIntoView({block:"nearest",behavior:"smooth"}))},0)},[I.isCardNavigationActive,I.focusedCardElementIndex,I.cardElements.length]),E.useEffect(()=>{const H=()=>{if(k==="cards"&&S.current){const{columns:ee,rows:R}=re(S);L(te=>({...te,gridColumns:ee,gridRows:R}))}},Y=setTimeout(H,200),J=()=>{setTimeout(H,100)};return window.addEventListener("resize",J),()=>{clearTimeout(Y),window.removeEventListener("resize",J)}},[k,c,re]),E.useEffect(()=>{const H=P.tabLoadingStates.length,Y=c.length;H!==Y&&D({type:"ADJUST_ARRAYS",payload:{newLength:Y}})},[c.length,P.tabLoadingStates.length]),E.useEffect(()=>{$&&f!==P.selectedIndex&&D({type:"SET_SELECTED_INDEX",payload:f})},[$,f,P.selectedIndex]);const z=E.useCallback(H=>{H>=0&&H<c.length&&!c[H].disabled&&(D({type:"SET_SELECTED_INDEX",payload:H}),p?.(H))},[c,p]),le=E.useCallback(H=>{console.log("Card selected:",H),D({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:H})},[]),V=E.useCallback(H=>{const Y=F.current[H];Y&&(Y.focus(),Y.scrollIntoView({block:"nearest",behavior:"smooth"}))},[]),ue=E.useCallback(H=>{const Y=F.current[H];if(!Y)return[];const J=['button:not([disabled]):not([aria-hidden="true"])','a[href]:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','select:not([disabled]):not([aria-hidden="true"])','textarea:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])','.healthcare-card__detail[tabindex]:not([tabindex="-1"])',".healthcare-card__action:not([disabled])",".tag:not([disabled])"].join(", "),ee=Y.querySelectorAll(J);return Array.from(ee).map((R,te)=>({id:R.id||`card-${H}-element-${te}`,element:R,label:R.getAttribute("aria-label")||R.textContent?.trim()||R.getAttribute("title")||`Element ${te+1}`,type:R.tagName.toLowerCase()==="button"?"button":R.tagName.toLowerCase()==="a"?"link":["input","select","textarea"].includes(R.tagName.toLowerCase())?"input":"generic"}))},[]),we=E.useRef(null),fe=E.useCallback(H=>{const Y=we.current;if(!Y)return;const J=document.createElement("div");J.setAttribute("aria-live","polite"),J.setAttribute("aria-atomic","true"),J.className="sr-only",J.textContent=H,Y.appendChild(J),setTimeout(()=>{Y.contains(J)&&Y.removeChild(J)},1e3)},[]),he=E.useCallback(H=>{const Y=H.filter(ee=>ee.sortable!==!1),J=[{value:"",label:"Sort by..."}];return Y.forEach(ee=>{const R=ee.label||ee.key;ee.key==="name"?J.push({value:`${ee.key}-asc`,label:`${R} (A-Z)`},{value:`${ee.key}-desc`,label:`${R} (Z-A)`}):ee.key==="ews_score"||ee.key.includes("score")?J.push({value:`${ee.key}-desc`,label:`${R} (High-Low)`},{value:`${ee.key}-asc`,label:`${R} (Low-High)`}):ee.key==="age"||ee.key.includes("date")||ee.key.includes("time")?J.push({value:`${ee.key}-desc`,label:`${R} (Oldest-Youngest)`},{value:`${ee.key}-asc`,label:`${R} (Youngest-Oldest)`}):J.push({value:`${ee.key}-asc`,label:`${R} (A-Z)`},{value:`${ee.key}-desc`,label:`${R} (Z-A)`})}),J},[]),ne=E.useCallback((H,Y)=>Y?[...H].sort((J,ee)=>{const R=J[Y.key],te=ee[Y.key];if(R==null&&te==null)return 0;if(R==null)return 1;if(te==null)return-1;const se=Number(R),X=Number(te);if(!isNaN(se)&&!isNaN(X))return Y.direction==="asc"?se-X:X-se;const U=String(R).toLowerCase(),ie=String(te).toLowerCase(),ge=U.localeCompare(ie);return Y.direction==="asc"?ge:-ge}):H,[]),oe=E.useCallback(H=>{if(!H){L(U=>({...U,cardSortConfig:null})),fe("Card sorting cleared");return}const[Y,J]=H.split("-"),ee={key:Y,direction:J};L(U=>({...U,cardSortConfig:ee}));const se=c[P.selectedIndex]?.columns.find(U=>U.key===Y)?.label||Y;fe(`Cards sorted by ${se} in ${J==="asc"?"ascending":"descending"} order`)},[c,P.selectedIndex,fe]),pe=E.useCallback(H=>{const ee=c[P.selectedIndex]?.columns.find(te=>te.key===H.key)?.label||H.key,R=H.direction==="asc"?"ascending":"descending";return`${ee} (${R})`},[c,P.selectedIndex]),K=E.useCallback(H=>{const Y=c[P.selectedIndex];if(a){const J=P.sortConfig;return!J||J.length===0?H:[...H].sort((ee,R)=>{for(const{key:te,direction:se}of J){let X=ee[te],U=R[te];const ie=Y?.columns.find(Ie=>Ie.key===te);if(ie?.cardRenderer?(X=ie.cardRenderer(ee),U=ie.cardRenderer(R)):ie?.render&&(X=ie.render(ee),U=ie.render(R)),X==null&&U==null)continue;if(X==null)return se==="asc"?-1:1;if(U==null)return se==="asc"?1:-1;const ge=Number(X),ce=Number(U);if(!isNaN(ge)&&!isNaN(ce)){const Ie=ge-ce;if(Ie!==0)return se==="asc"?Ie:-Ie;continue}const Se=String(X).toLowerCase(),Ce=String(U).toLowerCase(),_e=Se.localeCompare(Ce);if(_e!==0)return se==="asc"?_e:-_e}return 0})}else return ne(H,I.cardSortConfig)},[a,P.sortConfig,I.cardSortConfig,ne,c,P.selectedIndex]),A=E.useCallback((H,Y)=>{const J=ue(H),ee=J[Y];if(ee){ee.element.scrollIntoView({block:"nearest",behavior:"smooth"});const R=`Focused on ${ee.label}, ${ee.type} ${Y+1} of ${J.length} within card`;fe(R)}},[ue,fe]),B=E.useCallback(H=>{v.current[H]?.focus()},[]),G=E.useCallback(()=>{const H=M.current[0];if(!H)return[];const Y=['select:not([disabled]):not([aria-hidden="true"])','button:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])'].join(", "),J=H.querySelectorAll(Y);return Array.from(J)},[]),ae=E.useCallback(H=>{if(H===0){const Y=M.current[0],J=Y?.querySelector(".sort-controls-row");if(J){J.setAttribute("tabindex","-1"),J.focus();const R=`Sort controls group with ${G().length} interactive elements. Press Enter or Space to begin navigating controls.`;fe(R)}else Y&&Y.focus()}else{const Y=G(),J=H-1,ee=Y[J];if(ee){ee.focus();const R=ee.tagName.toLowerCase()==="select",te=ee.tagName.toLowerCase()==="button",se=R?"dropdown":te?"button":"control",X=R?". Use Space key to open dropdown":"",U=`${se} ${J+1} of ${Y.length}${X}`;fe(U)}}},[G,fe]),Q=E.useCallback((H,Y)=>{const{key:J}=H,ee=c[P.selectedIndex],R=ee?.data.length||0;if(J==="ArrowLeft"&&H.shiftKey){H.preventDefault(),H.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(J==="ArrowRight"&&H.shiftKey){H.preventDefault(),H.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!I.isCardNavigationActive){switch(J){case"ArrowUp":if(H.preventDefault(),Y===0)L(U=>({...U,focusArea:"sort-controls",focusedSortControlIndex:0,isSortControlsActive:!1})),ae(0);else{const U=W(Y,"up",R,I.gridColumns);U!==Y&&(L(ie=>({...ie,focusedCardIndex:U})),V(U),fe(`Moved to card ${U+1} of ${R}`))}break;case"ArrowDown":H.preventDefault();const te=W(Y,"down",R,I.gridColumns);te!==Y&&(L(U=>({...U,focusedCardIndex:te})),V(te),fe(`Moved to card ${te+1} of ${R}`));break;case"ArrowLeft":H.preventDefault();const se=W(Y,"left",R,I.gridColumns);se!==Y?(L(U=>({...U,focusedCardIndex:se})),V(se),fe(`Moved to card ${se+1} of ${R}`)):P.selectedIndex>0&&(D({type:"SET_SELECTED_INDEX",payload:P.selectedIndex-1}),L(U=>({...U,focusArea:"tabs"})),setTimeout(()=>B(P.selectedIndex-1),0));break;case"ArrowRight":H.preventDefault();const X=W(Y,"right",R,I.gridColumns);X!==Y?(L(U=>({...U,focusedCardIndex:X})),V(X),fe(`Moved to card ${X+1} of ${R}`)):P.selectedIndex<c.length-1&&(D({type:"SET_SELECTED_INDEX",payload:P.selectedIndex+1}),L(U=>({...U,focusArea:"tabs"})),setTimeout(()=>B(P.selectedIndex+1),0));break;case"Enter":if(ee?.data[Y]){H.preventDefault(),L(ie=>({...ie,selectedCardIndex:Y}));const U=ue(Y);U.length>0?(L(ie=>({...ie,focusArea:"card",isCardNavigationActive:!0,focusedCardElementIndex:0,cardElements:U,selectedCardIndex:Y})),fe(`Card ${Y+1} selected and navigation activated. ${U.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`)):fe(`Card ${Y+1} selected.`)}break;case" ":if(ee?.data[Y]){H.preventDefault(),L(ie=>({...ie,selectedCardIndex:ie.selectedCardIndex===Y?-1:Y}));const U=I.selectedCardIndex===Y;fe(`Card ${Y+1} ${U?"deselected":"selected"}.`)}break}return}switch(J){case"ArrowUp":case"ArrowLeft":H.preventDefault();const te=Math.max(0,I.focusedCardElementIndex-1);L(ie=>({...ie,focusedCardElementIndex:te})),A(Y,te);break;case"ArrowDown":case"ArrowRight":H.preventDefault();const se=Math.min(I.cardElements.length-1,I.focusedCardElementIndex+1);L(ie=>({...ie,focusedCardElementIndex:se})),A(Y,se);break;case"Enter":H.preventDefault();const X=I.cardElements[I.focusedCardElementIndex];X&&(X.element.click(),fe(`Activated ${X.label}`));break;case" ":H.preventDefault();const U=I.cardElements[I.focusedCardElementIndex];if(U){const ie=new MouseEvent("dblclick",{bubbles:!0});U.element.dispatchEvent(ie),fe(`Double-clicked ${U.label}`)}break;case"Escape":H.preventDefault(),L(ie=>({...ie,focusArea:"cards",isCardNavigationActive:!1,focusedCardElementIndex:0,cardElements:[]})),setTimeout(()=>V(Y),0),fe("Exited card navigation, returned to card level");break;case"Home":H.preventDefault(),I.cardElements.length>0&&(L(ie=>({...ie,focusedCardElementIndex:0})),A(Y,0));break;case"End":if(H.preventDefault(),I.cardElements.length>0){const ie=I.cardElements.length-1;L(ge=>({...ge,focusedCardElementIndex:ie})),A(Y,ie)}break}},[I,P.selectedIndex,c,le,V,B,L,ue,A,fe]),de=E.useCallback(H=>{const Y=v.current[H],J=Y?.parentElement;if(!Y||!J){console.log("Tab or container not found for mobile scroll");return}const ee=Y.getBoundingClientRect(),R=J.getBoundingClientRect();ee.left>=R.left&&ee.right<=R.right||(console.log("Tab not visible, scrolling into view (mobile)"),Y.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[]),ye=E.useCallback((H,Y)=>{if(k!=="cards")return;const{key:J}=H;switch(J){case"ArrowLeft":H.preventDefault();const ee=Y>0?Y-1:c.length-1;z(ee),L(X=>({...X,focusedTabIndex:ee})),v.current[ee]?.focus(),de(ee);break;case"ArrowRight":H.preventDefault();const R=Y<c.length-1?Y+1:0;z(R),L(X=>({...X,focusedTabIndex:R})),v.current[R]?.focus(),de(R);break;case"ArrowDown":H.preventDefault();const te=c[P.selectedIndex];te&&te.columns&&te.columns.length>0?(L(X=>({...X,focusArea:"sort-controls",focusedSortControlIndex:0})),ae(0)):(L(X=>({...X,focusArea:"cards",focusedCardIndex:0})),V(0));break;case"Home":H.preventDefault(),z(0),L(X=>({...X,focusedTabIndex:0})),v.current[0]?.focus(),de(0);break;case"End":H.preventDefault();const se=c.length-1;z(se),L(X=>({...X,focusedTabIndex:se})),v.current[se]?.focus(),de(se);break;case"Enter":case" ":H.preventDefault(),z(Y);break}},[c.length,z,k,V,L,de]),me=E.useCallback((H,Y)=>{if(k!=="cards")return;const{key:J}=H,ee=c[P.selectedIndex];if(Y===0&&!I.isSortControlsActive){switch(J){case"ArrowUp":H.preventDefault(),L(te=>({...te,focusArea:"tabs",isSortControlsActive:!1})),B(P.selectedIndex);break;case"ArrowDown":H.preventDefault(),ee?.data&&ee.data.length>0&&(L(te=>({...te,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),V(0));break;case"Enter":case" ":H.preventDefault();const R=G();if(R.length>0){L(se=>({...se,isSortControlsActive:!0,focusedSortControlIndex:1})),ae(1);const te=`Entered sort controls navigation mode. ${R.length} controls available. Use arrow keys to navigate between controls.`;fe(te)}break;case"Escape":H.preventDefault(),L(te=>({...te,isSortControlsActive:!1,focusArea:"tabs"})),B(P.selectedIndex);break}return}if(I.isSortControlsActive){const te=G().length;switch(J){case"ArrowLeft":H.preventDefault();const se=I.focusedSortControlIndex>1?I.focusedSortControlIndex-1:te;L(U=>({...U,focusedSortControlIndex:se})),ae(se);break;case"ArrowRight":H.preventDefault();const X=I.focusedSortControlIndex<te?I.focusedSortControlIndex+1:1;L(U=>({...U,focusedSortControlIndex:X})),ae(X);break;case"ArrowDown":if(H.preventDefault(),I.isSortControlsActive){const U=I.focusedSortControlIndex<te?I.focusedSortControlIndex+1:1;L(ie=>({...ie,focusedSortControlIndex:U})),ae(U)}else ee?.data&&ee.data.length>0&&(L(U=>({...U,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),V(0));break;case"ArrowUp":H.preventDefault(),L(U=>({...U,isSortControlsActive:!1,focusArea:"sort-controls"})),ae(0);break;case"Escape":H.preventDefault(),L(U=>({...U,isSortControlsActive:!1,focusArea:"sort-controls",focusedSortControlIndex:0})),ae(0);break}}},[k,c,P.selectedIndex,I.isSortControlsActive,I.focusedSortControlIndex,ae,B,V,L,fe]);if(k==="cards"){const H=c[P.selectedIndex];return s.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${C||""}`,children:[s.jsxs("div",{className:"aria-tabs-datagrid-adaptive__header",children:[s.jsx("div",{role:"tablist","aria-label":g,"aria-describedby":`${_||""} ${m?`${m}-navigation-help`:""}`.trim(),"aria-orientation":h,className:"aria-tabs-datagrid__tabs",children:c.map((Y,J)=>{const ee=J===P.selectedIndex,R=Y.disabled||y;return s.jsxs("button",{role:"tab",id:`tab-${Y.id}`,"aria-controls":`panel-${Y.id}`,"aria-selected":ee,"aria-disabled":R,tabIndex:ee?0:-1,ref:te=>{v.current[J]=te},onClick:()=>z(J),onKeyDown:te=>ye(te,J),disabled:R,className:["aria-tabs-datagrid__tab",ee?"aria-tabs-datagrid__tab--selected":"",R?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[s.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:Y.label}),P.tabLoadingStates[J]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),P.tabErrors[J]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},Y.id)})}),i&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions",children:i})]}),H&&H.columns&&s.jsx(s.Fragment,{children:a?s.jsx(Wu,{sortConfig:P.sortConfig||[],columns:H.columns.map(Y=>({key:Y.key,label:Y.label})),onSortChange:Y=>{D({type:"SET_SORT",payload:Y})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls"}):s.jsx("div",{className:"aria-tabs-datagrid-adaptive__sort-controls",role:"region","aria-label":"Sort controls",tabIndex:I.focusArea==="sort-controls"?0:-1,ref:Y=>{M.current[0]=Y},onKeyDown:Y=>me(Y,0),children:s.jsxs("div",{className:"sort-controls-row",children:[s.jsxs("div",{className:"sort-select-container",children:[s.jsx("label",{htmlFor:`card-sort-${H.id}`,className:"sort-label",children:"Sort cards by"}),s.jsx(Ar,{id:`card-sort-${H.id}`,name:`card-sort-${H.id}`,value:I.cardSortConfig?`${I.cardSortConfig.key}-${I.cardSortConfig.direction}`:"",onChange:Y=>oe(Y.target.value),className:"sort-select",children:he(H.columns).map(Y=>s.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),I.cardSortConfig&&s.jsxs("div",{className:"sort-indicator",role:"status","aria-live":"polite",children:[s.jsxs("span",{className:"sort-indicator-text",children:["Sorted by ",pe(I.cardSortConfig)]}),s.jsx(ut,{variant:"secondary",size:"small",onClick:()=>oe(""),"aria-label":"Clear card sorting",className:"sort-clear-button",children:"Clear"})]})]})})}),s.jsx("div",{ref:S,className:"aria-tabs-datagrid-adaptive__cards",role:"grid","aria-label":`${H?.label||"Data"} cards in ${I.gridRows} rows and ${I.gridColumns} columns`,"aria-rowcount":I.gridRows,"aria-colcount":I.gridColumns,id:`panel-${H?.id}`,"aria-labelledby":`tab-${H?.id}`,children:K(H?.data||[]).map((Y,J)=>{const ee=I.selectedCardIndex===J,R=I.focusedCardIndex===J&&I.focusArea==="cards",te=I.focusedCardIndex===J&&I.focusArea==="card"&&I.isCardNavigationActive,se=J===0&&I.focusArea!=="cards",X=R||se,U=q(J,I.gridColumns);if(n.cardTemplate){const ce=n.cardTemplate(Y,H.columns);return s.jsx("div",{role:"row","aria-rowindex":U.row+1,className:"aria-tabs-datagrid-adaptive__row",children:s.jsx("div",{ref:Se=>{F.current[J]=Se},className:["aria-tabs-datagrid-adaptive__card-wrapper",ee?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",R?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",te?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":U.col+1,"aria-selected":ee,"aria-expanded":te,"aria-description":te?`Card navigation active. ${I.cardElements.length} interactive elements available.`:void 0,tabIndex:X?0:-1,onClick:()=>{L(Se=>({...Se,selectedCardIndex:Se.selectedCardIndex===J?-1:J})),le(Y)},onKeyDown:Se=>Q(Se,J),onFocus:()=>{L(Se=>Se.isCardNavigationActive?Se:Se.focusedCardIndex!==J||Se.focusArea!=="cards"?{...Se,focusedCardIndex:J,focusArea:"cards"}:Se)},children:ce})},`card-${J}`)}const ie=ax(Y,H.columns,T,w),ge=[ie.className||"",ee?"aria-tabs-datagrid-adaptive__card--selected":"",R?"aria-tabs-datagrid-adaptive__card--focused":"",te?"aria-tabs-datagrid-adaptive__card--card-navigation":""].filter(Boolean).join(" ");return s.jsx("div",{role:"row","aria-rowindex":U.row+1,className:"aria-tabs-datagrid-adaptive__row",children:s.jsx("div",{className:["aria-tabs-datagrid-adaptive__card-wrapper",ee?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",R?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",te?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":U.col+1,"aria-selected":ee,"aria-expanded":te,onKeyDown:ce=>{ce.key==="Enter"&&(ce.preventDefault(),L(Se=>({...Se,selectedCardIndex:J}))),Q(ce,J)},children:s.jsx(Zs,{...ie,ref:ce=>{F.current[J]=ce},className:ge,"aria-label":`${ie["aria-label"]||ie.heading}. ${te?`Card navigation active with ${I.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.`:"Press Enter to navigate within card elements."}`,tabIndex:X?0:-1,onClick:()=>{L(ce=>({...ce,selectedCardIndex:ce.selectedCardIndex===J?-1:J})),le(Y)},onKeyDown:ce=>Q(ce,J),onFocus:()=>{I.isCardNavigationActive||L(ce=>ce.focusedCardIndex!==J||ce.focusArea!=="cards"?{...ce,focusedCardIndex:J,focusArea:"cards",focusedCardElementIndex:0,cardElements:[]}:ce)}})})},`card-${J}`)})}),o&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o}),s.jsx("div",{ref:we,className:"aria-tabs-datagrid-adaptive__announcements","aria-hidden":"true",style:{position:"fixed",top:"-1px",left:"-1px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0,padding:0,margin:0}})]})}return k==="hybrid"?s.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${C||""}`,children:[i&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:i}),s.jsx(mi,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:_,orientation:h,id:m,disabled:y,selectedIndex:f,onTabChange:p,className:"aria-tabs-datagrid-adaptive__table--hybrid",actions:l,forceActionsAbove:u,...j}),o&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o})]}):s.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${C||""}`,children:[i&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:i}),s.jsx(mi,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:_,orientation:h,id:m,disabled:y,selectedIndex:f,onTabChange:p,actions:l,forceActionsAbove:u,...j}),o&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o})]})},Zu=e=>{const t=Qs.find(n=>n.value===e);return t?t.icon:null},ix={ecommerce:{name:"E-commerce",description:"Product catalogs with pricing, inventory, and ratings",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.priceRange){const[r,a]=t.priceRange,i=n.discountedPrice||n.price;if(i<r||i>a)return!1}return!(t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.inStock!==void 0&&n.inStock!==t.inStock||t.minRating!==void 0&&n.rating<t.minRating||t.tags&&t.tags.length>0&&!t.tags.some(r=>n.tags.includes(r)))}):e,booleanRenderer:e=>Zu(e),getDataId:e=>`ecommerce-${e.id}`},createTabs:e=>yi(e,[{id:"all-products",label:"All Products",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Price",render:n=>n.discountedPrice?`$${n.price.toFixed(2)} â†’ $${n.discountedPrice.toFixed(2)}`:`$${n.price.toFixed(2)}`},{key:"inStock",label:"Availability"},{key:"category",label:"Category"},{key:"rating",label:"Rating",render:n=>`${n.rating}/5 (${n.reviews} reviews)`}],ariaLabel:"All Products Grid",ariaDescription:"Complete product catalog with pricing and availability"},{id:"on-sale",label:"On Sale",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Original Price",render:n=>`$${n.price.toFixed(2)}`},{key:"discountedPrice",label:"Sale Price",render:n=>`$${n.discountedPrice?.toFixed(2)||"N/A"}`},{key:"discount",label:"Discount",render:n=>n.discountedPrice?`${((n.price-n.discountedPrice)/n.price*100).toFixed(0)}% OFF`:"N/A"}],filter:n=>n.filter(r=>r.discountedPrice!==void 0),ariaLabel:"Sale Products Grid",ariaDescription:"Products currently on sale with discounted pricing"},{id:"high-rated",label:"Top Rated",columns:[{key:"name",label:"Product Name"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.rating>=4),sortConfig:[{key:"rating",direction:"desc"}],ariaLabel:"Top Rated Products Grid",ariaDescription:"Highest rated products with 4+ star ratings"}])},financial:{name:"Financial",description:"Transaction data with amounts, categories, and statuses",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.dateRange){const[r,a]=t.dateRange;if(n.date<r||n.date>a)return!1}if(t.amountRange){const[r,a]=t.amountRange;if(Math.abs(n.amount)<r||Math.abs(n.amount)>a)return!1}return!(t.types&&t.types.length>0&&!t.types.includes(n.type)||t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.pending!==void 0&&n.pending!==t.pending)}):e,booleanRenderer:e=>Zu(e),getDataId:e=>`financial-${e.id}`},createTabs:e=>yi(e,[{id:"all-transactions",label:"All Transactions",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"},{key:"pending",label:"Status"}],sortConfig:[{key:"date",direction:"desc"}],ariaLabel:"All Transactions Grid",ariaDescription:"Complete transaction history with amounts and categories"},{id:"credits",label:"Credits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`+$${n.amount.toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="credit"),ariaLabel:"Credit Transactions Grid",ariaDescription:"Incoming payments and credits only"},{id:"debits",label:"Debits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`-$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="debit"),ariaLabel:"Debit Transactions Grid",ariaDescription:"Outgoing payments and charges only"},{id:"pending",label:"Pending",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"type",label:"Type"}],filter:n=>n.filter(r=>r.pending),ariaLabel:"Pending Transactions Grid",ariaDescription:"Transactions awaiting processing"}])}},Ju=(e,t)=>{const n=ix[e];return{dataConfig:n.dataConfig,tabPanels:n.createTabs(t)}},Qu=[{name:"Sarah Johnson",age:34,ews_data:{respiratory_rate_bpm:16,sp02:98,temperature:36.8,systolic_bp:140,heart_rate:82,avpu:"alert"},ews_score:3,ward_name:"Cardiology",room_name:"Room A",bed_name:"A-1",bed_type:"bed",admin_note:"Hypertension monitoring",pathway:"Standard",speciality:"Cardiology",consultant:"Dr. Smith",local_authority:"NHS Trust",early_discharge_notification:"not_required",needs_based_assessment:!1,medically_optimised:!0,criteria_to_reside:!0,date_medically_optimised:"2024-01-15",anticipated_discharge_date:"2024-01-18",dru_suitability:!1,optica_planned_discharge_date:"2024-01-18",optica_date_confirmed:"2024-01-16",dsum:null,medications_tta:"None required",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!1,initial_therapy_contact:"",equipment:"None",district_nurse_referral:!1},{name:"Michael Chen",age:67,ews_data:{respiratory_rate_bpm:20,sp02:94,temperature:37.2,systolic_bp:160,heart_rate:95,avpu:"alert"},ews_score:7,ward_name:"Surgery",room_name:"Room B",bed_name:"B-3",bed_type:"bed",admin_note:"Post-operative monitoring",pathway:"Surgical",speciality:"General Surgery",consultant:"Dr. Johnson",local_authority:"NHS Trust",early_discharge_notification:"due",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!0,date_medically_optimised:"2024-01-17",anticipated_discharge_date:"2024-01-20",dru_suitability:!0,optica_planned_discharge_date:"2024-01-20",optica_date_confirmed:"2024-01-16",dsum:"Complex discharge",medications_tta:"Pain management",transport_booking:!0,transport_status:"In Progress",transport_date:"2024-01-20",transport_mobility:"Wheelchair",fast_track:!1,initial_therapy_contact:"2024-01-17",equipment:"Walking frame",district_nurse_referral:!0},{name:"Emma Thompson",age:28,ews_data:{respiratory_rate_bpm:24,sp02:90,temperature:38.5,systolic_bp:110,heart_rate:105,avpu:"alert"},ews_score:5,ward_name:"Respiratory",room_name:"Room C",bed_name:"C-2",bed_type:"bed",admin_note:"Pneumonia treatment",pathway:"Respiratory",speciality:"Respiratory Medicine",consultant:"Dr. Williams",local_authority:"NHS Trust",early_discharge_notification:"overdue",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!1,date_medically_optimised:"",anticipated_discharge_date:"2024-01-22",dru_suitability:!1,optica_planned_discharge_date:"2024-01-22",optica_date_confirmed:"",dsum:null,medications_tta:"Antibiotics",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!0,initial_therapy_contact:"",equipment:"Oxygen",district_nurse_referral:!1}],sx=[{id:"appt-001",appointment_time:"2024-01-18T09:00:00Z",patient_name:"Sarah Johnson",appointment_type:"Cardiology Consultation",consultant:"Dr. Smith",location:"Clinic Room 3",duration:30,status:"pending"},{id:"appt-002",appointment_time:"2024-01-18T10:30:00Z",patient_name:"Michael Davis",appointment_type:"Post-op Follow-up",consultant:"Dr. Johnson",location:"Surgery Ward",duration:15,status:"active"},{id:"appt-003",appointment_time:"2024-01-18T14:00:00Z",patient_name:"Emma Thompson",appointment_type:"Respiratory Assessment",consultant:"Dr. Wilson",location:"Emergency Department",duration:45,status:"pending"}],ox=[{id:"med-001",medication:"Amlodipine",dose:"5mg",frequency:"Once daily",route:"Oral",next_due:"2024-01-18T08:00:00Z",prescriber:"Dr. Smith",patient_name:"Sarah Johnson",allergies:null,priority:"medium"},{id:"med-002",medication:"Morphine",dose:"10mg",frequency:"Every 4 hours",route:"IV",next_due:"2024-01-18T10:00:00Z",prescriber:"Dr. Johnson",patient_name:"Michael Davis",allergies:"Codeine allergy",priority:"high"},{id:"med-003",medication:"Salbutamol",dose:"2 puffs",frequency:"As needed",route:"Inhaled",next_due:"2024-01-18T12:00:00Z",prescriber:"Dr. Wilson",patient_name:"Emma Thompson",allergies:null,priority:"high"}],lx=[{id:"vitals-001",patient_name:"Sarah Johnson",recorded_time:"2024-01-18T07:30:00Z",temperature:36.8,blood_pressure:"140/90",heart_rate:82,respiratory_rate:16,oxygen_saturation:98,ews_score:3,priority:"medium"},{id:"vitals-002",patient_name:"Michael Davis",recorded_time:"2024-01-18T08:15:00Z",temperature:37.2,blood_pressure:"130/85",heart_rate:98,respiratory_rate:20,oxygen_saturation:95,ews_score:7,priority:"high"},{id:"vitals-003",patient_name:"Emma Thompson",recorded_time:"2024-01-18T09:00:00Z",temperature:38.5,blood_pressure:"110/70",heart_rate:105,respiratory_rate:24,oxygen_saturation:90,ews_score:9,priority:"high"}],ed=[{id:"PROD001",name:"Wireless Headphones",price:199.99,discountedPrice:149.99,inStock:!0,category:"Electronics",rating:4.5,reviews:1247,tags:["wireless","bluetooth","premium"]},{id:"PROD002",name:"Running Shoes",price:129.99,inStock:!0,category:"Sports",rating:4.8,reviews:892,tags:["running","athletic","comfortable"]},{id:"PROD003",name:"Coffee Maker",price:89.99,discountedPrice:59.99,inStock:!1,category:"Kitchen",rating:4.2,reviews:456,tags:["kitchen","coffee","appliance"]},{id:"PROD004",name:"Smartphone Case",price:24.99,inStock:!0,category:"Accessories",rating:4,reviews:234,tags:["protection","mobile","durable"]}],td=[{id:"TXN001",date:new Date("2024-01-15"),amount:2500,type:"credit",category:"Salary",description:"Monthly salary payment",accountId:"ACC001",pending:!1,recurring:!0},{id:"TXN002",date:new Date("2024-01-14"),amount:89.5,type:"debit",category:"Groceries",description:"Supermarket shopping",accountId:"ACC001",pending:!1,recurring:!1},{id:"TXN003",date:new Date("2024-01-16"),amount:1200,type:"debit",category:"Rent",description:"Monthly rent payment",accountId:"ACC001",pending:!0,recurring:!0},{id:"TXN004",date:new Date("2024-01-13"),amount:150,type:"credit",category:"Refund",description:"Product return refund",accountId:"ACC001",pending:!1,recurring:!1}],nd=[{id:"LEAD001",companyName:"Tech Solutions Inc",contactPerson:"John Smith",email:"john@techsolutions.com",status:"qualified",value:5e4,lastContact:new Date("2024-01-15"),source:"Website",isHotLead:!0},{id:"LEAD002",companyName:"Global Industries",contactPerson:"Maria Garcia",email:"maria@globalind.com",status:"contacted",value:25e3,lastContact:new Date("2024-01-14"),source:"Referral",isHotLead:!1},{id:"LEAD003",companyName:"StartupXYZ",contactPerson:"Alex Johnson",email:"alex@startupxyz.com",status:"new",value:15e3,lastContact:new Date("2024-01-16"),source:"Cold Call",isHotLead:!0}],cx={dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>!(t.status&&!t.status.includes(n.status)||t.minValue&&n.value<t.minValue||t.hotLeadsOnly&&!n.isHotLead)):e,booleanRenderer:e=>s.jsx("span",{style:{color:e?"#dc2626":"#6b7280",fontWeight:e?"bold":"normal"},children:e?"ðŸ”¥ Hot Lead":"ðŸ“‹ Standard"}),getDataId:e=>`business-${e.id}`},ux=()=>[{id:"patients",label:"Patients",data:Qu,columns:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Records",ariaDescription:"Healthcare patient management with EWS monitoring",cardTemplate:(e,t)=>s.jsx(eo,{data:e,columns:t,onSelect:n=>console.log("Selected patient:",n),onAction:(n,r)=>console.log("Patient action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})},{id:"appointments",label:"Appointments",data:sx,columns:[{key:"appointment_time",label:"Time"},{key:"patient_name",label:"Patient"},{key:"appointment_type",label:"Type"},{key:"consultant",label:"Consultant"}],ariaLabel:"Patient Appointments",ariaDescription:"Scheduled appointments and consultations",cardTemplate:(e,t)=>s.jsx(to,{data:e,columns:t,onSelect:n=>console.log("Selected appointment:",n),onAction:(n,r)=>console.log("Appointment action:",n,r),status:e.status})},{id:"medications",label:"Medications",data:ox,columns:[{key:"medication",label:"Medication"},{key:"dose",label:"Dose"},{key:"frequency",label:"Frequency"},{key:"next_due",label:"Next Due"}],ariaLabel:"Patient Medications",ariaDescription:"Medication administration and scheduling",cardTemplate:(e,t)=>s.jsx(no,{data:e,columns:t,onSelect:n=>console.log("Selected medication:",n),onAction:(n,r)=>console.log("Medication action:",n,r),priority:e.priority})},{id:"vitals",label:"Vital Signs",data:lx,columns:[{key:"patient_name",label:"Patient"},{key:"recorded_time",label:"Time"},{key:"temperature",label:"Temperature"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Vital Signs",ariaDescription:"Patient vital signs monitoring and EWS scores",cardTemplate:(e,t)=>s.jsx(ro,{data:e,columns:t,onSelect:n=>console.log("Selected vitals:",n),onAction:(n,r)=>console.log("Vitals action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})}],dx=()=>{const[e,t]=E.useState("healthcare"),n=E.useMemo(()=>({healthcare:{title:"Healthcare Workflow Management",description:"Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals",dataConfig:Uu,tabPanels:ux(),data:Qu},ecommerce:{title:"E-commerce Product Catalog",description:"Product management with pricing and inventory",...Ju("ecommerce",ed),data:ed},financial:{title:"Financial Transaction Dashboard",description:"Banking and financial data management",...Ju("financial",td),data:td},business:{title:"Sales Lead Management",description:"Custom CRM configuration with business logic",dataConfig:cx,tabPanels:yi(nd,[{id:"all-leads",label:"All Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"status",label:"Status"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"isHotLead",label:"Priority"}],ariaLabel:"All Sales Leads Grid",ariaDescription:"Complete sales pipeline with lead information"},{id:"hot-leads",label:"Hot Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"lastContact",label:"Last Contact",render:a=>a.lastContact.toLocaleDateString()}],filter:a=>a.filter(i=>i.isHotLead),sortConfig:[{key:"value",direction:"desc"}],ariaLabel:"Hot Leads Grid",ariaDescription:"High-priority leads requiring immediate attention"},{id:"pipeline",label:"Active Pipeline",columns:[{key:"companyName",label:"Company"},{key:"status",label:"Status"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"source",label:"Source"}],filter:a=>a.filter(i=>["contacted","qualified"].includes(i.status)),ariaLabel:"Active Pipeline Grid",ariaDescription:"Leads currently in the sales pipeline"}]),data:nd}}),[]),r=n[e];return s.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[s.jsxs("div",{style:{marginBottom:"2rem"},children:[s.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"AriaTabsDataGrid - Comprehensive Demo"}),s.jsx("p",{style:{fontSize:"1.1rem",color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:"This demo showcases the component's versatility across different domains: healthcare, e-commerce, financial services, and custom business applications. Each configuration demonstrates domain-specific data operations, custom renderers, and specialized filtering logic."}),s.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:Object.keys(n).map(a=>s.jsx(ut,{variant:e===a?"primary":"secondary",onClick:()=>t(a),style:{textTransform:"capitalize"},children:a},a))}),s.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem"},children:[s.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"0.5rem",color:"#1e293b"},children:r.title}),s.jsx("p",{style:{color:"#64748b",marginBottom:"1rem"},children:r.description}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.9rem"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Data Records:"})," ",r.data.length]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Tab Panels:"})," ",r.tabPanels.length]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Features:"})," ",["Row Selection","Custom Filtering","Domain-Specific Renderers","Keyboard Navigation","ARIA Compliance"].join(", ")]})]})]})]}),s.jsx(mi,{dataConfig:r.dataConfig,tabPanels:r.tabPanels,ariaLabel:`${r.title} Data Grid`,ariaDescription:`Interactive data grid for ${r.description.toLowerCase()}`}),s.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f1f5f9",borderRadius:"0.5rem",border:"1px solid #cbd5e1"},children:[s.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#334155"},children:"Implementation Details"}),s.jsxs("div",{style:{display:"grid",gap:"1rem",fontSize:"0.9rem"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Current Mode:"})," ",e," configuration"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Data Operations:"})," Custom comparator, filter function, and boolean renderer"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Architecture:"})," Generic core with domain-specific plugins and factory helpers"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"State Management:"})," Global row selection with data-object persistence"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Accessibility:"})," Full ARIA support with dynamic labels and descriptions"]})]})]})]})},io=e=>s.jsx(ks,{...e}),fx=({children:e,pageTitle:t,pageHeadingProps:n,columnWidth:r=Tn.TwoThirds,mainWrapperSize:a,skipLinkProps:i,headerProps:o,footerProps:l,service:u,navigation:c,search:d,account:f,organisation:p,logo:g,className:_,...h})=>{const m={service:u,navigation:c,search:d,account:f,organisation:p,logo:g,...o};return s.jsxs(s.Fragment,{children:[s.jsx(Ks,{...i}),s.jsx(Ka,{...m}),s.jsx(io,{className:_,...h,children:s.jsx(Cs,{size:a,children:s.jsx(Nn,{children:s.jsxs(or,{width:r,children:[t&&s.jsx(Vt,{size:"l",...n,children:t}),e]})})})}),s.jsx(Ns,{...l})]})},hx=({children:e,title:t,pageHeadingProps:n,columnWidth:r=Tn.TwoThirds,mainWrapperSize:a="small",skipLinkProps:i,headerProps:o,footerProps:l,backLinkProps:u,serviceName:c,serviceHref:d,logo:f,className:p,...g})=>{const _={service:{text:c,href:d},logo:f,navigation:void 0,search:void 0,account:void 0,...o};return s.jsxs(s.Fragment,{children:[s.jsx(Ks,{...i}),s.jsx(Ka,{..._}),s.jsxs(io,{className:p,...g,children:[u&&s.jsx(Va,{...u}),s.jsx(Cs,{size:a,children:s.jsx(Nn,{children:s.jsxs(or,{width:r,children:[t&&s.jsx(Vt,{style:{marginTop:"3rem"},size:"l",...n,children:t}),e]})})})]}),s.jsx(Ns,{...l})]})},rd=({text:e="Next",html:t,href:n="#",className:r,element:a="a",onClick:i,...o})=>{const l=ve("nhsuk-back-link",r),u=ve("nhsuk-back-link__link"),c=()=>s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t?s.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:s.jsx("path",{d:"M15.5 12c0 .3-.1.5-.3.7l-5 5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4L13.1 12 8.8 7.7c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l5 5c.2.2.3.4.3.7z"})})]});return s.jsx("div",{className:l,children:a==="button"?s.jsx("button",{className:u,type:"button",onClick:i,...o,children:c()}):s.jsx("a",{className:u,href:n,...o,children:c()})})};rd.displayName="ForwardLink";const mr=Object.freeze({small:320,smallMax:767,medium:768,large:1025,xlarge:1200,xxlarge:1440});function ad(){return typeof window>"u"?mr.small:window.innerWidth||document.documentElement.clientWidth||0}function so(){const[e,t]=Z.useState(ad());Z.useEffect(()=>{if(typeof window>"u")return;const i=()=>t(ad());return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const n=Z.useCallback(i=>e>=mr[i],[e]),r=Z.useCallback(i=>e<mr[i],[e]),a=Z.useCallback((i,o)=>e>=mr[i]&&e<mr[o],[e]);return{width:e,up:n,down:r,between:a,values:mr}}function px(e){const{width:t,values:n}=so();let r=e.base;const a=["small","medium","large","xlarge","xxlarge"];for(const i of a){const o=n[i];t>=o&&e[i]!==void 0&&(r=e[i])}return r}function id(e={}){const{enabled:t=!0,paramSelected:n="nsv",paramDrill:r="nsvDrill"}=e,[a,i]=Z.useState(()=>typeof window>"u"||!t?void 0:new URLSearchParams(window.location.search).get(n)),[o,l]=Z.useState(()=>typeof window>"u"||!t?!1:new URLSearchParams(window.location.search).get(r)==="1");return Z.useEffect(()=>{if(!t||typeof window>"u")return;const u=new URLSearchParams(window.location.search);a?u.set(n,String(a)):u.delete(n),u.set(r,o?"1":"0");const c=`${window.location.pathname}?${u.toString()}${window.location.hash}`;window.history.replaceState(null,"",c)},[a,o,t,n,r]),{selectedId:a,setSelectedId:i,drilledIn:o,setDrilledIn:l}}const mx=({className:e})=>s.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M10.7 3.3a1 1 0 0 1 0 1.4L7.41 8l3.3 3.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 0Z"})}),gx=({className:e})=>s.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M5.3 12.7a1 1 0 0 1 0-1.4L8.59 8l-3.3-3.3a1 1 0 0 1 1.42-1.4l4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.42 0Z"})});function sd(e){const{items:t,selectedId:n,defaultSelectedId:r,onSelectionChange:a,renderItemContent:i,renderContent:o,renderSecondaryContent:l,forceLayout:u,animated:c=!0,backLabel:d="Back",nextLabel:f="Next",isLoading:p=!1,emptyState:g,a11y:_,className:h,getId:m=be=>be.id,orientation:y="vertical",autoEnableThirdColumn:C=!0,onDrillChange:j,navigationInstructions:k="Use arrow keys to navigate, Enter to open.",initialFocus:$="first",skipFocusOnSelect:N=!1,skipAnnouncements:T=!1,onFocusChange:w,syncUrl:x=!1,urlParamSelected:P="nsv",urlParamDrill:D="nsvDrill",urlSyncDebounceMs:v=0,lazySecondary:F=!1,navFooter:M,collapsibleNav:S=!1,navInitiallyCollapsed:I=!1,onNavCollapseChange:L,collapseToggleLabelShow:re="Show navigation",collapseToggleLabelHide:q="Hide navigation",collapseToggleIconShow:O,collapseToggleIconHide:W,persistNavCollapsed:z,navCollapsedStorageKey:le="nsvCollapsed",navCollapsedUrlParam:V="nsvCollapsed",autoContentHeader:ue,contentHeaderLevel:we=2,renderContentHeader:fe,contentSubheader:he,secondarySubheader:ne}=e,{up:oe}=so(),[pe,K]=Z.useState(!1);Z.useEffect(()=>{K(!0)},[]);const A=pe&&oe("medium"),B=pe&&oe("xlarge");let G;u?G=u:A?G="two-column":G="list",!u&&C&&l&&B&&(G="three-column");const ae=id({enabled:x,paramSelected:P,paramDrill:D}),[Q,de]=Z.useState(()=>ae.selectedId!==void 0?ae.selectedId:r),ye=n!==void 0?n:Q,me=t.find(be=>m(be)===ye),[H,Y]=Z.useState(void 0);Z.useEffect(()=>{if(ye===void 0)return;Y(ye);const be=setTimeout(()=>Y(void 0),220);return()=>clearTimeout(be)},[ye]);const J=Z.useRef(null),ee=Z.useRef(null),R=Z.useRef(null),te=Z.useRef(null),[se,X]=Z.useState(()=>({contentIndex:0,secondaryIndex:0})),[U,ie]=Z.useState(()=>"nav"),[ge,ce]=Z.useState(0),Se=()=>[te.current,ee.current,R.current].filter(Boolean),Ce=be=>{const Ne=Se(),xe=Math.max(0,Math.min(be,Ne.length-1));Ne[xe]?.focus(),ce(xe)},_e=Z.useCallback(be=>be?Array.from(be.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(xe=>!xe.hasAttribute("disabled")&&xe.tabIndex!==-1):[],[]),Ie=Z.useCallback(be=>{const Ne=_e(ee.current);if(!Ne.length){ee.current?.focus();return}const xe=Math.max(0,Math.min(be,Ne.length-1)),$e=Ne[xe];$e.focus(),setTimeout(()=>{document.activeElement!==$e&&($e.focus(),setTimeout(()=>{document.activeElement!==$e&&$e.click()},10))},10),X(Ue=>({...Ue,contentIndex:xe}));const tt=Ue=>{Ue.key==="Escape"&&(Ue.preventDefault(),Ue.stopPropagation(),ee.current?.focus(),$e.removeEventListener("keydown",tt))};Ne.forEach(Ue=>{const Ye=Ue._escapeHandler;Ye&&Ue.removeEventListener("keydown",Ye)}),$e._escapeHandler=tt,$e.addEventListener("keydown",tt)},[_e]),Be=Z.useCallback(be=>{const Ne=_e(R.current);if(!Ne.length){R.current?.focus();return}const xe=Math.max(0,Math.min(be,Ne.length-1)),$e=Ne[xe];$e.focus(),setTimeout(()=>{document.activeElement!==$e&&($e.focus(),setTimeout(()=>{document.activeElement!==$e&&$e.click()},10))},10),X(Ue=>({...Ue,secondaryIndex:xe}));const tt=Ue=>{Ue.key==="Escape"&&(Ue.preventDefault(),Ue.stopPropagation(),R.current?.focus(),$e.removeEventListener("keydown",tt))};Ne.forEach(Ue=>{const Ye=Ue._escapeHandler;Ye&&Ue.removeEventListener("keydown",Ye)}),$e._escapeHandler=tt,$e.addEventListener("keydown",tt)},[_e]),Le=be=>{if(be.defaultPrevented)return;const Ne=be.key,xe=be.target,$e=!!bt.current&&bt.current.contains(xe),tt=!!ee.current&&ee.current.contains(xe),Ue=!!R.current&&R.current.contains(xe),Ye=!!R.current,Pr=xe===te.current||xe===ee.current||xe===R.current,sr=Ee&&(G==="list"||G==="cards"),ys=tt&&!!xe.closest(".nhs-navigation-split-view__header");if(U==="containers"&&Pr){if(Ne==="ArrowRight"){be.preventDefault();const Pe=Se(),qe=Math.min(Pe.length-1,ge+1);Ce(qe);return}if(Ne==="ArrowLeft"){be.preventDefault();const Pe=Math.max(0,ge-1);Ce(Pe);return}if(Ne==="Home"){be.preventDefault(),Ce(0);return}if(Ne==="End"){be.preventDefault(),Ce(Se().length-1);return}if(Ne==="Enter"||Ne===" "){if(be.preventDefault(),xe===te.current){if(ie("nav"),bt.current){const Pe=Array.from(bt.current.querySelectorAll("[data-nav-item]"));(Pe[at>=0?at:0]||Pe[0])?.focus()}}else xe===ee.current?(ie("content"),Ie(se.contentIndex)):xe===R.current&&(ie("secondary"),Be(se.secondaryIndex));return}return}if(Ne==="Escape"){if(U==="content"||U==="secondary"){if(tt||Ue){if(be.preventDefault(),ie("nav"),bt.current){const qe=Array.from(bt.current.querySelectorAll("[data-nav-item]"))[at>=0?at:0];setTimeout(()=>qe?.focus(),10)}}else if((xe===ee.current||xe===R.current)&&(be.preventDefault(),ie("nav"),bt.current)){const qe=Array.from(bt.current.querySelectorAll("[data-nav-item]"))[at>=0?at:0];setTimeout(()=>qe?.focus(),10)}}return}if(Ne==="Enter"||Ne===" "){if(xe.matches('button, a, input, select, textarea, [role="button"], [role="link"], [role="tab"]'))return;if(xe===ee.current&&U==="content"){be.preventDefault(),be.stopPropagation(),_e(ee.current).length>0&&setTimeout(()=>{Ie(se.contentIndex)},50);return}if(xe===R.current&&U==="secondary"){be.preventDefault(),be.stopPropagation(),_e(R.current).length>0&&setTimeout(()=>{Be(se.secondaryIndex)},50);return}}if(sr&&ys&&!Pr&&(Ne==="ArrowRight"||Ne==="ArrowLeft")){const Pe=_e(ee.current).filter(qe=>qe.closest(".nhs-navigation-split-view__header"));if(Pe.length>1){const qe=Pe.indexOf(xe);if(qe>=0){const a0=(qe+(Ne==="ArrowRight"?1:-1)+Pe.length)%Pe.length;be.preventDefault(),Pe[a0].focus();return}}}if(Ne==="ArrowRight"){if($e||U==="nav"){be.preventDefault(),ie("content"),setTimeout(()=>ee.current?.focus(),10);return}if(tt||U==="content"){Ye&&(be.preventDefault(),ie("secondary"),setTimeout(()=>R.current?.focus(),10));return}}if(Ne==="ArrowLeft"){if(Ue||U==="secondary"){be.preventDefault(),ie("content"),setTimeout(()=>ee.current?.focus(),10);return}if(tt||U==="content"){if(be.preventDefault(),ie("nav"),bt.current){const qe=Array.from(bt.current.querySelectorAll("[data-nav-item]"))[at>=0?at:0];setTimeout(()=>qe?.focus(),10)}return}}if(Ne==="Home"&&!$e&&(be.preventDefault(),ie("nav"),bt.current)){const Pe=Array.from(bt.current.querySelectorAll("[data-nav-item]")),qe=Pe[at>=0?at:0]||Pe[0];setTimeout(()=>qe?.focus(),10)}if(Ne==="End"){const Pe=Ye?R.current:ee.current;Pe&&!Pe.contains(xe)&&(be.preventDefault(),Ye?(ie("secondary"),setTimeout(()=>R.current?.focus(),10)):(ie("content"),setTimeout(()=>ee.current?.focus(),10)))}if(Ne==="ArrowDown"||Ne==="ArrowUp"){if(xe===ee.current&&Ne==="ArrowDown"){be.preventDefault(),_e(ee.current).length>0&&Ie(0);return}if(xe===R.current&&Ne==="ArrowDown"){be.preventDefault(),_e(R.current).length>0&&Be(0);return}if(tt){const Pe=_e(ee.current);if(Pe.length){be.preventDefault();const qe=Ne==="ArrowDown"?1:-1,pn=(se.contentIndex+qe+Pe.length)%Pe.length;Ie(pn)}}else if(Ue){const Pe=_e(R.current);if(Pe.length){be.preventDefault();const qe=Ne==="ArrowDown"?1:-1,pn=(se.secondaryIndex+qe+Pe.length)%Pe.length;Be(pn)}}}},Ee=!!me&&(G==="list"||G==="cards"),Qe=Z.useMemo(()=>ue===void 0?{mobile:!0,tablet:!1,desktop:!1}:ue===!0?{mobile:!0,tablet:!0,desktop:!0}:ue===!1?{mobile:!1,tablet:!1,desktop:!1}:{mobile:ue.mobile!==void 0?ue.mobile:!0,tablet:ue.tablet||!1,desktop:ue.desktop||!1},[ue]),et=pe&&oe("medium")&&!oe("xlarge"),lt=pe&&oe("xlarge"),fn=!!l,ct=G==="three-column",[pt,za]=Z.useState(!1);Z.useEffect(()=>{ct&&pt&&za(!1)},[ct,pt]),Z.useEffect(()=>{pt&&!ct&&(ie("secondary"),ce(2),setTimeout(()=>{R.current?.focus()},50))},[pt,ct]),Z.useEffect(()=>{!pt&&!ct&&U==="secondary"&&(ie("content"),ce(1),setTimeout(()=>{ee.current?.focus()},50))},[pt,ct,U]);const uc=!!me&&(Ee&&Qe.mobile||!Ee&&et&&Qe.tablet||!Ee&&lt&&Qe.desktop)||fn&&!ct,rS=`h${we}`,dc=me?Z.createElement(rS,{style:{marginLeft:Ee?32:0,marginRight:Ee?32:0}},me.label):null,n0=Ee?"mobile":et?"tablet":"desktop",aS=fn&&!ct&&!pt,fc=Ee&&Qe.mobile?s.jsx(Va,{element:"button",text:d,style:{marginRight:16},onClick:()=>Ir(void 0,void 0)}):void 0,hc=aS?s.jsx(rd,{element:"button",text:f,onClick:()=>{za(!0)}}):void 0,pc=!ct&&pt?s.jsx(Va,{element:"button",text:d,style:{marginRight:16},onClick:()=>za(!1)}):void 0,iS=Z.useMemo(()=>{if(!uc||!me)return null;if(fe)return fe({item:me,detailActive:Ee,context:n0,backLink:fc,defaultHeading:dc});const be=me&&he?typeof he=="function"?he(me):he:null;return s.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[pc||fc,s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:[dc,be&&s.jsx("div",{className:"nhs-navigation-split-view__subheader",children:be})]})]}),hc&&s.jsx("div",{style:{marginLeft:"auto"},children:hc})]})},[uc,me,fe,Ee,n0,fc,pc,dc,hc,he]);Z.useEffect(()=>{if(!x)return;const be=G==="three-column";let Ne=!1;const xe=()=>{Ne||(ae.selectedId!==ye&&ae.setSelectedId(ye),ae.drilledIn!==be&&ae.setDrilledIn(be))};if(v&&v>0){const $e=setTimeout(xe,v);return()=>{Ne=!0,clearTimeout($e)}}else xe()},[x,ae,ye,G,v]),Z.useEffect(()=>{if(!x)return;const be=()=>{const Ne=new URLSearchParams(window.location.search),xe=Ne.get(P);Ne.get(D),de(xe===null?void 0:xe)};return window.addEventListener("popstate",be),()=>window.removeEventListener("popstate",be)},[x,P,D,u,l]);const gs=Z.useRef(0),kn=Z.useRef(null),Ir=Z.useCallback((be,Ne)=>{be!==ye&&(n===void 0&&de(be),a?.(be,Ne))},[n,a,ye]);Z.useEffect(()=>{if(!N&&Ee&&ee.current){const be=setTimeout(()=>ee.current?.focus(),30);return()=>clearTimeout(be)}},[Ee,ye,N]);const bt=Z.useRef(null),[at,Wa]=Z.useState(()=>$==="first"?0:-1);Z.useEffect(()=>{if(at<0||!bt.current)return;const Ne=Array.from(bt.current.querySelectorAll("[data-nav-item]"))[at];if(Ne){document.activeElement!==Ne&&Ne.focus(),gs.current=at;const xe=t[at];w?.(xe?m(xe):void 0,xe,at)}},[at,t,w,m]);const sS=be=>{const Ne=y==="vertical"?"ArrowDown":"ArrowRight",xe=y==="vertical"?"ArrowUp":"ArrowLeft";if(be.key==="ArrowRight"&&y==="vertical"){be.preventDefault(),pt?(ie("secondary"),setTimeout(()=>{R.current?.focus()},10)):(ie("content"),setTimeout(()=>{ee.current?.focus()},10));return}if(be.key===Ne)be.preventDefault(),Wa($e=>Math.min(t.length-1,$e+1));else if(be.key===xe)be.preventDefault(),Wa($e=>Math.max(0,$e-1));else if(be.key==="Home")be.preventDefault(),Wa(0);else if(be.key==="End")be.preventDefault(),Wa(t.length-1);else if(be.key==="Enter"||be.key===" "){be.preventDefault();const $e=t[at];$e&&!$e.disabled&&Ir(m($e),$e)}else if(be.key.length===1&&/[a-z0-9]/i.test(be.key)){kn.current||(kn.current={buffer:"",last:0});const $e=Date.now(),tt=700,Ue=be.key.toLowerCase();$e-kn.current.last>tt?kn.current.buffer=Ue:kn.current.buffer+=Ue,kn.current.last=$e;let Ye=kn.current.buffer;const Pr=Ye.split("").every(pn=>pn===Ye[0]),sr=t.map(pn=>String(pn.label||"").toLowerCase());let ys=0;at>=0&&(ys=(at+1)%t.length);let Pe;const qe=(pn,a0)=>{const i0=t.length;for(let yc=0;yc<i0;yc++){const bc=(ys+yc)%i0;if(!t[bc].disabled&&sr[bc].startsWith(pn))return bc}};Pr&&Ye.length>1?Pe=qe(Ye[0]):(Pe=qe(Ye),Pe===void 0&&Ye.length>1&&(Pe=qe(Ye[Ye.length-1]),Pe!==void 0&&kn.current&&(kn.current.buffer=Ye[Ye.length-1]))),Pe!==void 0&&Wa(Pe)}},oS=Z.useMemo(()=>{if(z&&(z==="url"||z==="both")&&typeof window<"u"){const Ne=new URLSearchParams(window.location.search).get(V);if(Ne==="1")return!0;if(Ne==="0")return!1}if(z&&(z==="localStorage"||z==="both")&&typeof window<"u")try{const be=window.localStorage.getItem(le);if(be==="1")return!0;if(be==="0")return!1}catch{}return I},[z,I,le,V]),[hn,lS]=Z.useState(oS);Z.useEffect(()=>{L?.(hn)},[hn,L]);const cS=Z.useCallback(()=>{A&&S&&lS(be=>!be)},[A,S]);Z.useEffect(()=>{if(z&&!(typeof window>"u")){if(z==="localStorage"||z==="both")try{window.localStorage.setItem(le,hn?"1":"0")}catch{}if(z==="url"||z==="both"){const be=new URLSearchParams(window.location.search);be.set(V,hn?"1":"0");const Ne=`${window.location.pathname}?${be.toString()}${window.location.hash}`;window.history.replaceState(null,"",Ne)}}},[hn,z,le,V]);const uS=["nhs-navigation-split-view",c?"nhs-navigation-split-view--animated":"",Ee?"nhs-navigation-split-view--detail-active":"",G==="three-column"?"nhs-navigation-split-view--three-column":"",S&&A&&hn?"nhs-navigation-split-view--nav-collapsed":"",h].filter(Boolean).join(" "),mc=Z.useRef(null);Z.useEffect(()=>{if(!T&&mc.current){const be=me?`Selected ${me.label}`:"Selection cleared";mc.current.textContent=be}},[me,T]),Z.useEffect(()=>{!Ee&&ye==null&&bt.current&&bt.current.querySelectorAll("[data-nav-item]")[gs.current]?.focus()},[Ee,ye]);const Rn=G==="three-column",[gc,dS]=Z.useState(!1);Z.useEffect(()=>{Rn&&!gc&&dS(!0)},[Rn,gc]);const r0=Z.useRef(Rn);Z.useEffect(()=>{r0.current!==Rn&&(j?.(Rn),r0.current=Rn)},[Rn,j]);const fS=()=>{if(G==="cards")return s.jsxs("ul",{className:"nhs-navigation-split-view__cards",role:"listbox","aria-activedescendant":ye?String(ye):void 0,children:[t.map(xe=>{const $e=m(xe),tt=$e===ye;return s.jsx("li",{className:"nhs-navigation-split-view__card-item",role:"option","aria-selected":tt,children:s.jsxs("button",{id:String($e),type:"button",className:"nhs-navigation-split-view__card","data-selected":tt||void 0,"data-disabled":xe.disabled||void 0,disabled:xe.disabled,onClick:()=>!xe.disabled&&Ir($e,xe),children:[xe.icon&&s.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:xe.icon}),s.jsx("span",{className:"nhs-navigation-split-view__item-label",children:xe.label}),xe.description&&s.jsx("span",{className:"nhs-navigation-split-view__item-description",children:xe.description}),i?.(xe),xe.badge!==void 0&&s.jsx("span",{className:"nhs-navigation-split-view__badge",children:xe.badge})]})},$e)}),t.length===0&&!p&&s.jsx("li",{className:"nhs-navigation-split-view__card-item","aria-disabled":"true",children:g||s.jsx("div",{style:{padding:16},children:"No items"})})]});const be="nsv-nav-instructions",Ne=Z.useMemo(()=>Z.memo(({item:xe,idx:$e,selected:tt,focused:Ue})=>{const Ye=m(xe),Pr=xe.disabled?{"aria-disabled":!0,tabIndex:-1}:{tabIndex:Ue?0:-1,onClick:()=>{gs.current=$e,Ir(Ye,xe)},onKeyDown:sr=>{(sr.key==="Enter"||sr.key===" ")&&(sr.preventDefault(),gs.current=$e,Ir(Ye,xe))}};return s.jsxs("li",{id:String(Ye),"data-nav-item":!0,className:"nhs-navigation-split-view__list-item nhs-navigation-split-view__item-button",role:"option","aria-selected":tt,"aria-current":tt?"true":void 0,"data-selected":tt||void 0,"data-disabled":xe.disabled||void 0,...Pr,children:[xe.icon&&s.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:xe.icon}),s.jsxs("span",{className:"nhs-navigation-split-view__item-content",children:[s.jsx("span",{className:"nhs-navigation-split-view__item-label",children:xe.label}),xe.description&&s.jsx("span",{className:"nhs-navigation-split-view__item-description",children:xe.description}),i?.(xe)]}),xe.badge!==void 0&&s.jsx("span",{className:"nhs-navigation-split-view__badge",children:xe.badge})]})}),[m,Ir,i]);return s.jsxs(s.Fragment,{children:[s.jsxs("ul",{ref:bt,className:"nhs-navigation-split-view__list",onKeyDown:sS,role:"listbox","aria-label":"Navigation items","aria-describedby":be,"aria-activedescendant":ye?String(ye):void 0,children:[t.map((xe,$e)=>s.jsx(Ne,{item:xe,idx:$e,selected:m(xe)===ye,focused:$e===at||at===-1&&$e===0&&$==="first","data-just-selected":m(xe)===H?"true":void 0},m(xe))),t.length===0&&!p&&s.jsx("li",{className:"nhs-navigation-split-view__list-item","aria-disabled":"true",children:g||s.jsx("div",{style:{padding:16},children:"No items"})})]}),s.jsx("div",{id:be,style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:k})]})};return s.jsx("div",{ref:J,className:uS,"aria-label":_?.rootLabel,"data-layout":G,onKeyDown:Le,children:s.jsxs("div",{className:"nhs-navigation-split-view__body",children:[s.jsxs("div",{className:"nhs-navigation-split-view__panes","data-active-detail":Ee||void 0,style:{transform:Ee?"translateX(-100%)":void 0},children:[s.jsxs("div",{ref:te,className:"nhs-navigation-split-view__nav-pane",role:"navigation","aria-label":_?.navigationLabel||"Items","data-collapsed":hn||void 0,tabIndex:0,children:[S&&A&&s.jsx("div",{className:"nhs-navigation-split-view__nav-collapse",children:s.jsx("button",{type:"button",onClick:cS,className:"nhs-navigation-split-view__nav-collapse-btn","aria-label":hn?re:q,title:hn?re:q,children:hn?O||s.jsx(gx,{}):W||s.jsx(mx,{})})}),s.jsx("div",{className:"nhs-navigation-split-view__nav-scroll",children:fS()}),M&&s.jsx("div",{className:"nhs-navigation-split-view__nav-footer",role:"contentinfo",children:M})]}),s.jsxs("div",{ref:ee,className:"nhs-navigation-split-view__content-pane",role:"region","aria-label":_?.contentLabel||"Content","data-has-selection":!!me||void 0,tabIndex:0,style:{display:pt&&!ct?"none":void 0},children:[uc&&s.jsx("div",{className:"nhs-navigation-split-view__header",children:iS}),s.jsx("div",{className:"nhs-navigation-split-view__content-inner",style:{padding:32,flex:1},children:o(me)})]}),G==="three-column"&&(!F||gc)||pt&&!ct?s.jsx("div",{ref:R,className:"nhs-navigation-split-view__secondary-pane",role:"region","aria-label":_?.secondaryContentLabel||"Secondary",tabIndex:0,children:s.jsxs("div",{className:"nhs-navigation-split-view__secondary-inner",style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[pt&&!ct&&s.jsx("div",{className:"nhs-navigation-split-view__header",children:s.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[pc,s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:s.jsx("h2",{style:{marginLeft:0,marginRight:0},children:me&&typeof me=="object"&&"label"in me?me.label:String(me)})})]})})}),me&&ne&&s.jsx("div",{className:"nhs-navigation-split-view__secondary-header",style:{padding:"16px 32px",borderBottom:"1px solid var(--nsplit-divider)"},children:typeof ne=="function"?ne(me):ne}),s.jsx("div",{style:{padding:32,flex:1,minWidth:0},children:l?.(me)})]})}):null]}),s.jsx("div",{ref:mc,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"}}),s.jsx("div",{"aria-live":"polite",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:Rn?"Expanded to three column layout":"In two column layout"})]})})}sd.displayName="NavigationSplitView";const yx=typeof window<"u"&&window.document?Z.useLayoutEffect:Z.useEffect,od=(e,t,n,r)=>e==null||Number.isNaN(e)?r:Math.min(n,Math.max(t,e)),bx=({item:e,maxLines:t,enableDrilldown:n,onExpand:r,isActive:a,topLaneIndex:i})=>{const{ariaLabel:o}=e,l=`${e._pxLeft}px`,u=`${e._pxWidth}px`,c=`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${i})`,d=Math.floor(e._startFraction)+2,f=Math.max(1,Math.round(e._spanColumns)),p=n&&e.childItems&&e.childItems.length>0,g=h=>{p&&(h.preventDefault(),r?.(e))},_=p?{role:"button",tabIndex:0,"aria-haspopup":"dialog","aria-expanded":a||!1,onClick:g,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&g(h),h.key==="Escape"&&a&&g(h)}}:{};return s.jsxs("div",{className:ve("nhsuk-product-roadmap__item",p&&"nhsuk-product-roadmap__item--expandable",a&&"nhsuk-product-roadmap__item--active"),style:{left:l,width:u,top:c,"--item-height":t},role:"gridcell","aria-label":o,"aria-colindex":d,"aria-colspan":f,..._,children:[s.jsx("div",{className:"nhsuk-product-roadmap__item-bg","aria-hidden":"true"}),s.jsxs("div",{className:"nhsuk-product-roadmap__item-content",children:[s.jsx("span",{className:"nhsuk-product-roadmap__item-title",children:e.title}),p&&s.jsx("span",{className:ve("nhsuk-product-roadmap__item-expander",a&&"nhsuk-product-roadmap__item-expander--open"),"aria-hidden":"true"})]})]})},ld=E.memo(({dateHeadings:e,categories:t,columnWidthPx:n=400,itemMaxLines:r=2,className:a,ariaLabel:i="Product roadmap",enableDrilldown:o=!1,onToggleItem:l,drilldownMode:u="overlay",...c})=>{const[d,f]=E.useState(()=>new Set),[p,g]=E.useState(()=>new Set),_=E.useRef(new Set),h=E.useCallback(v=>d.has(v),[d]),m=E.useCallback(v=>{f(F=>{const M=new Set(F);return M.has(v.id)?(M.delete(v.id),g(S=>{const I=new Set(S);return I.add(v.id),I}),setTimeout(()=>g(S=>{const I=new Set(S);return I.delete(v.id),I}),240),l?.(v.id,!1)):(M.add(v.id),l?.(v.id,!0)),M})},[l]);yx(()=>{if(u!=="inline"||!o||typeof document>"u")return;const v=[];if(d.forEach(I=>{_.current.has(I)||v.push(I)}),_.current=new Set(d),!v.length)return;const F=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1,M=v.map(I=>`.nhsuk-product-roadmap__inline-children[data-parent="${I}"] .nhsuk-product-roadmap__inline-child`).join(","),S=Array.from(document.querySelectorAll(M));if(S.length){if(F){S.forEach(I=>{I.style.opacity="1",I.style.transform="translateY(0)"});return}Promise.resolve().then(()=>nS).then(I=>{(I.gsap||I.default||I).to(S,{opacity:1,y:0,duration:.32,ease:"power2.out",stagger:.05})}).catch(()=>{S.forEach(I=>{I.style.opacity="1",I.style.transform="translateY(0)"})})}},[d,u,o]);const y=E.useCallback(()=>{d.size&&f(new Set)},[d]),C=ve("nhsuk-product-roadmap",a),j=od(n,120,1200,400),k=od(r,1,6,2),$=E.useMemo(()=>e.map(v=>new Date(v+" 01")),[e]),N=E.useMemo(()=>{if($.length===0){const M=new Date;return[M,M]}const v=new Date($[0]),F=zr.offset(new Date($[$.length-1]),1);return[v,F]},[$]),T=E.useMemo(()=>Xs().domain(N).range([0,$.length*j]),[N,$.length,j]),w=E.useCallback(v=>{if(v.startDate){const q=new Date(v.startDate),O=new Date(v.endDate??v.startDate);O<q&&O.setTime(q.getTime());const W=T(q),z=zr.offset(new Date(O),1);let le=T(z);Number.isFinite(le)||(le=W+j);const V=Math.max(j*.25,le-W),ue=W/j,we=V/j;return{...v,_pxLeft:W,_pxWidth:V,_startFraction:ue,_spanColumns:we}}const F=v.date??1,M=v.dateOffset??0,S=v.length??1,I=v.partialLength??1,L=F-1+M,re=S-1+I;return{...v,_pxLeft:L*j,_pxWidth:re*j,_startFraction:L,_spanColumns:re}},[T,j]),x=E.useMemo(()=>t.map(v=>{const M=v.roadmapItems.map(I=>{const L=!I.childItems&&I.children?{...I,childItems:I.children}:{...I};return w(L)}).sort((I,L)=>I._pxLeft!==L._pxLeft?I._pxLeft-L._pxLeft:L._pxWidth-I._pxWidth),S=[];return M.forEach(I=>{const L=I._pxLeft,re=I._pxLeft+I._pxWidth;let q=S.findIndex(O=>O<=L);q===-1&&(q=S.length,S.push(0)),S[q]=re,I.verticalPosition=q+1}),{...v,roadmapItems:M,_laneCount:S.length}}),[t,w]),P=E.useMemo(()=>x.map(v=>v._laneCount||1),[x]),D=E.useMemo(()=>`var(--category-width) ${e.map(()=>"var(--column-width)").join(" ")}`,[e]);return s.jsxs("div",{className:C,style:{"--column-width":`${j}px`,gridTemplateColumns:D},role:"grid","aria-label":i,"aria-colcount":e.length+1,"aria-rowcount":x.length+1,...c,children:[s.jsxs("div",{className:"nhsuk-product-roadmap__header-row",role:"row","aria-rowindex":1,children:[s.jsx("div",{className:"nhsuk-product-roadmap__header-cell",role:"columnheader","aria-colindex":1,children:s.jsx("span",{className:"nhsuk-visually-hidden",children:"Category"})}),e.map((v,F)=>s.jsx("div",{className:"nhsuk-product-roadmap__date-heading",role:"columnheader","aria-colindex":F+2,children:v},`${v}-${F}`))]}),x.map((v,F)=>{const M=F+2,S=P[F];let I,L=0,re=[];o&&u==="inline"&&(re=v.roadmapItems.filter(z=>h(z.id)&&z.childItems&&z.childItems.length).map(z=>({id:z.id,lane:z.verticalPosition||1,count:z.childItems.length})).sort((z,le)=>z.lane-le.lane),L=re.reduce((z,le)=>z+le.count,0));const q=S+L;I=`calc((${q} * var(--roadmap-item-block-height)) + (max(0, ${q} - 1) * var(--roadmap-row-gap)))`;const O={};let W=0;return re.forEach(z=>{W+=z.count,O[z.lane+1]=W}),s.jsxs("div",{className:"nhsuk-product-roadmap__row",role:"row","aria-rowindex":M,children:[s.jsx("div",{className:"nhsuk-product-roadmap__category-cell",role:"rowheader","aria-colindex":1,children:v.heading}),s.jsx("div",{className:"nhsuk-product-roadmap__items-row",style:{gridColumn:`2 / span ${e.length}`,height:I},children:s.jsx("div",{className:"nhsuk-product-roadmap__items-layer",children:v.roadmapItems.map((z,le)=>{const V=(z.verticalPosition||1)-1,ue=re.filter(ne=>ne.lane-1<V).reduce((ne,oe)=>ne+oe.count,0),we=V+ue,fe=h(z.id),he=p.has(z.id);return s.jsxs(E.Fragment,{children:[s.jsx(bx,{item:z,maxLines:k,enableDrilldown:o,onExpand:m,isActive:fe,topLaneIndex:we,laneOffset:ue}),o&&u==="inline"&&(fe||he)&&z.childItems&&s.jsx("div",{"data-parent":z.id,className:"nhsuk-product-roadmap__inline-children","aria-label":`${z.title} child tasks`,children:z.childItems.map((ne,oe)=>{const pe="calc(var(--roadmap-item-block-height) * 0.75)";let K=z._pxLeft,A=z._pxWidth;if(ne.startDate){const ae=new Date(ne.startDate);let Q=ne.endDate?new Date(ne.endDate):new Date(ae);Q<ae&&(Q=new Date(ae));const de=new Date(Q);de.setDate(de.getDate()+1);const ye=T(ae);let me=T(de);(!Number.isFinite(me)||me<=ye)&&(me=ye+6),K=ye,A=Math.max(6,me-ye)}const G=we+1+oe;return s.jsxs("div",{className:ve("nhsuk-product-roadmap__inline-child",ne.status&&`nhsuk-product-roadmap__inline-child--status-${ne.status}`,!fe&&he&&"nhsuk-product-roadmap__inline-child--collapsing"),style:{left:`${K}px`,width:`${A}px`,top:`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${G})`,height:pe,opacity:fe?0:void 0,transform:fe?"translateY(-6px)":void 0},children:[s.jsx("div",{className:"nhsuk-product-roadmap__inline-child-bg"}),s.jsx("div",{className:"nhsuk-product-roadmap__inline-child-content",children:ne.title})]},ne.id??oe)})})]},z.id??le)})})})]},`${v.heading}-${F}`)}),o&&u==="overlay"&&d.size===1&&(()=>{const v=Array.from(d)[0],F=t.flatMap(M=>M.roadmapItems).find(M=>M.id===v);return!F||!F.childItems?null:s.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-overlay",role:"dialog","aria-modal":"true","aria-label":`${F.title} details`,children:[s.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-panel",children:[s.jsxs("header",{className:"nhsuk-product-roadmap__drilldown-header",children:[s.jsx("h3",{className:"nhsuk-product-roadmap__drilldown-title",children:F.title}),s.jsx("button",{type:"button",className:"nhsuk-product-roadmap__drilldown-close",onClick:y,"aria-label":"Close details",children:"Ã—"})]}),s.jsx("div",{className:"nhsuk-product-roadmap__drilldown-content",children:F.content}),s.jsx("ul",{className:"nhsuk-product-roadmap__drilldown-children",children:F.childItems.map((M,S)=>s.jsxs("li",{className:"nhsuk-product-roadmap__drilldown-child",children:[s.jsx("strong",{className:"nhsuk-product-roadmap__drilldown-child-title",children:M.title}),M.content&&s.jsx("div",{className:"nhsuk-product-roadmap__drilldown-child-content",children:M.content})]},M.id??S))})]}),s.jsx("div",{className:"nhsuk-product-roadmap__drilldown-backdrop",onClick:y,"aria-hidden":"true"})]})})()]})});ld.displayName="ProductRoadmap";function cd(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=cd(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function bi(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=cd(e))&&(r&&(r+=" "),r+=t);return r}function ft(e){return function(){return e}}const oo=Math.PI,lo=2*oo,Vn=1e-6,_x=lo-Vn;function ud(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function xx(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ud;const n=10**t;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class vx{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ud:xx(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,i,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,a,i){if(t=+t,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,u=r-t,c=a-n,d=o-t,f=l-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Vn)if(!(Math.abs(f*u-c*d)>Vn)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-o,_=a-l,h=u*u+c*c,m=g*g+_*_,y=Math.sqrt(h),C=Math.sqrt(p),j=i*Math.tan((oo-Math.acos((h+p-m)/(2*y*C)))/2),k=j/C,$=j/y;Math.abs(k-1)>Vn&&this._append`L${t+k*d},${n+k*f}`,this._append`A${i},${i},0,0,${+(f*g>d*_)},${this._x1=t+$*u},${this._y1=n+$*c}`}}arc(t,n,r,a,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),u=r*Math.sin(a),c=t+l,d=n+u,f=1^o,p=o?a-i:i-a;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Vn||Math.abs(this._y1-d)>Vn)&&this._append`L${c},${d}`,r&&(p<0&&(p=p%lo+lo),p>_x?this._append`A${r},${r},0,1,${f},${t-l},${n-u}A${r},${r},0,1,${f},${this._x1=c},${this._y1=d}`:p>Vn&&this._append`A${r},${r},0,${+(p>=oo)},${f},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function dd(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new vx(t)}function fd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hd(e){this._context=e}hd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function pd(e){return new hd(e)}function md(e){return e[0]}function gd(e){return e[1]}function yd(e,t){var n=ft(!0),r=null,a=pd,i=null,o=dd(l);e=typeof e=="function"?e:e===void 0?md:ft(e),t=typeof t=="function"?t:t===void 0?gd:ft(t);function l(u){var c,d=(u=fd(u)).length,f,p=!1,g;for(r==null&&(i=a(g=o())),c=0;c<=d;++c)!(c<d&&n(f=u[c],c,u))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,c,u),+t(f,c,u));if(g)return i=null,g+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:ft(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:ft(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:ft(!!u),l):n},l.curve=function(u){return arguments.length?(a=u,r!=null&&(i=a(r)),l):a},l.context=function(u){return arguments.length?(u==null?r=i=null:i=a(r=u),l):r},l}function co(e,t,n){var r=null,a=ft(!0),i=null,o=pd,l=null,u=dd(c);e=typeof e=="function"?e:e===void 0?md:ft(+e),t=typeof t=="function"?t:ft(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?gd:ft(+n);function c(f){var p,g,_,h=(f=fd(f)).length,m,y=!1,C,j=new Array(h),k=new Array(h);for(i==null&&(l=o(C=u())),p=0;p<=h;++p){if(!(p<h&&a(m=f[p],p,f))===y)if(y=!y)g=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),_=p-1;_>=g;--_)l.point(j[_],k[_]);l.lineEnd(),l.areaEnd()}y&&(j[p]=+e(m,p,f),k[p]=+t(m,p,f),l.point(r?+r(m,p,f):j[p],n?+n(m,p,f):k[p]))}if(C)return l=null,C+""||null}function d(){return yd().defined(a).curve(o).context(i)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:ft(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ft(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ft(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:ft(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ft(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ft(+f),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(f){return arguments.length?(a=typeof f=="function"?f:ft(!!f),c):a},c.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),c):o},c.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),c):i},c}function bd(e){return e<0?-1:1}function _d(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(i*a+o*r)/(r+a);return(bd(i)+bd(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function xd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function uo(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-r)/3;e._context.bezierCurveTo(r+l,a+l*t,i-l,o-l*n,i,o)}function _i(e){this._context=e}_i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:uo(this,this._t0,xd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,uo(this,xd(this,n=_d(this,e,t)),n);break;default:uo(this,this._t0,n=_d(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},Object.create(_i.prototype).point=function(e,t){_i.prototype.point.call(this,t,e)};function xi(e){return new _i(e)}function wx(e,t,n){const r=Ec(e,t);return Xs().domain(r).range(n)}function vd(e,t,n){const[r,a]=Ec(e,t);if(!(Number.isFinite(r)&&Number.isFinite(a)))return li().domain([0,0]).range(n);let o;if(r<=0)o=Math.min(0,r);else{const u=a-r,c=(u>0?u:r)*.1;o=Math.max(0,r-c),o===r&&(o=Math.max(0,r*.9))}const l=a??0;return li().domain([o,l]).nice().range(n)}function fo(e,t,n,r){const a=yd().x(t).y(n);return r?.smooth!==!1&&a.curve(xi),a(e)??""}function Sx(e={}){const t=Z.useRef(null),n=Z.useMemo(()=>({top:e.top??16,right:e.right??16,bottom:e.bottom??32,left:e.left??48}),[e.bottom,e.left,e.right,e.top]),[r,a]=Z.useState({width:0,height:0});Z.useLayoutEffect(()=>{if(!t.current)return;const l=new ResizeObserver(u=>{for(const c of u){const{width:d,height:f}=c.contentRect;a({width:d,height:f})}});return l.observe(t.current),()=>l.disconnect()},[]);const i=Math.max(0,r.width-n.left-n.right),o=Math.max(0,r.height-n.top-n.bottom);return{width:r.width,height:r.height,innerWidth:i,innerHeight:o,margin:n,ref:t}}const wd=Z.createContext(null);function jn(){return Z.useContext(wd)}const Sd=({height:e=240,margin:t,width:n,className:r="fdp-chart",children:a,role:i="group",ariaLabel:o})=>{const l=Sx(t),u={height:e,position:"relative"};return n!==void 0&&(u.width=typeof n=="number"?`${n}px`:n),s.jsx("div",{ref:l.ref,className:r,style:u,role:i,"aria-label":o,children:s.jsx(wd.Provider,{value:l,children:a})})},ho=Z.createContext(null),Gn=()=>Z.useContext(ho),kd=({series:e,innerWidth:t,innerHeight:n,parseX:r,children:a,xTickCount:i=6,yTickCount:o=5,yDomain:l,xPadding:u,yPadding:c})=>{const d=jn(),f=t??d?.innerWidth??0,p=n??d?.innerHeight??0,g=Z.useMemo(()=>e.flatMap(k=>k.data),[e]),_=Z.useCallback(k=>{if(r)return r(k);const $=k.x;return $ instanceof Date?$:new Date($)},[r]),h=u??6,m=c??6,y=Z.useMemo(()=>wx(g,_,[h,Math.max(0,f-h)]),[g,_,f,h]),C=Z.useMemo(()=>{if(l){const k=vd([],$=>$.y,[Math.max(0,p-m),m]);return k.domain(l),k}return vd(g,k=>k.y,[Math.max(0,p-m),m])},[g,p,l]),j=Z.useMemo(()=>({xScale:y,yScale:C,getXTicks:(k=i)=>y.ticks(k),getYTicks:(k=o)=>C.ticks(k)}),[y,C,i,o]);return s.jsx(ho.Provider,{value:j,children:a})},po=({type:e,scale:t,tickCount:n,tickValues:r,formatTick:a,label:i,offset:o,className:l,minLabelSpacing:u,maxTickLabelLength:c,autoMinLabelSpacing:d=e==="x",labelAngle:f=0,allowLabelWrap:p=!0,tickFormatPreset:g})=>{const _=Gn(),h=jn(),m=t||(e==="x"?_?.xScale:_?.yScale),y=n??(e==="x"?6:5),C=typeof a=="function",j=Z.useMemo(()=>{if(C||!g)return;const N=T=>new Intl.DateTimeFormat(void 0,T);switch(g){case"dayShortMonth":return T=>{const w=T instanceof Date?T:new Date(T);return`${w.getDate()}
${N({month:"short"}).format(w)}`};case"dayShortMonthYear":return T=>{const w=T instanceof Date?T:new Date(T);return`${w.getDate()}
${N({month:"short"}).format(w)} ${w.getFullYear()}`};case"shortMonth":return T=>{const w=T instanceof Date?T:new Date(T);return N({month:"short"}).format(w)};case"shortMonthYear":return T=>{const w=T instanceof Date?T:new Date(T);return`${N({month:"short"}).format(w)} ${w.getFullYear()}`};case"hourMinute":return T=>{const w=T instanceof Date?T:new Date(T);return N({hour:"2-digit",minute:"2-digit"}).format(w)};default:return}},[C,g]);let k=C?a:j||(N=>String(N));const $=Z.useMemo(()=>r&&Array.isArray(r)?r:m?typeof m.ticks=="function"?m.ticks(y):m.domain?m.domain():[]:[],[m,y,r]);if(e==="x"&&!C&&!g&&$.length&&$.every(N=>N instanceof Date)){const N=$[0],T=$[$.length-1],w=T.getTime()-N.getTime(),x=24*3600*1e3,P=365*x,D=N.getFullYear()===T.getFullYear(),v=new Intl.DateTimeFormat(void 0,{month:"short"});if(w<2*x){const F=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"});k=M=>F.format(M)}else if(w<32*x)k=F=>{const M=F;return`${M.getDate()} ${v.format(M)}`};else if(w<P&&D)k=F=>v.format(F);else if(w<2*P){const F=new Set;k=M=>{const S=M,I=S.getMonth();return F.has(I)||F.add(I),`${v.format(S)} ${S.getFullYear()}`}}else k=F=>String(F.getFullYear())}if(!m||!h)return null;if(e==="x"){const N=o??h.innerHeight,T=typeof m.bandwidth=="function",w=T?m.bandwidth():0,x=v=>{const F=m(v);return T?F+w/2:F};let P=u??0;if(d&&u==null){const v=$.map(M=>k(M).replace(/\n.*/g,"")),F=v.length?v.reduce((M,S)=>M+S.length,0)/v.length:0;P=Math.max(12,Math.round(F*6+4))}const D=Z.useMemo(()=>{if(r&&Array.isArray(r)||P<=0)return $;const v=[];let F=-1/0;for(const M of $){const S=x(M);S-F>=P&&(v.push(M),F=S)}return v},[$,m,P,r,T,w]);return s.jsxs("g",{className:["fdp-axis","fdp-axis--x",l].filter(Boolean).join(" "),transform:`translate(0,${N})`,fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[s.jsx("line",{x1:0,x2:h.innerWidth,y1:0,y2:0,stroke:"currentColor"}),D.map((v,F)=>{const M=k(v),S=c&&M.length>c?M.slice(0,Math.max(1,c-1))+"â€¦":M,I=p?S.split(/\n/):[S.replace(/\n/g," ")],L=f<0?"end":f>0?"start":"middle";return s.jsxs("g",{transform:`translate(${x(v)},0)`,children:[s.jsx("line",{y2:6,stroke:"currentColor"}),s.jsxs("text",{y:9,textAnchor:L,className:"fdp-axis__tick",dominantBaseline:"hanging",transform:f?`rotate(${f})`:void 0,fontFamily:"inherit",children:[I.map((re,q)=>s.jsx("tspan",{x:0,dy:q===0?0:"1.1em",children:re},q)),S!==M&&s.jsx("title",{children:M})]})]},v?.toString?.()||F)})]})}return s.jsxs("g",{className:["fdp-axis","fdp-axis--y",l].filter(Boolean).join(" "),fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[$.map((N,T)=>{const w=k(N),x=c&&w.length>c?w.slice(0,Math.max(1,c-1))+"â€¦":w,P=p?x.split(/\n/):[x.replace(/\n/g," ")];return s.jsxs("g",{transform:`translate(0,${m(N)})`,children:[s.jsx("line",{x2:-6,stroke:"currentColor"}),s.jsxs("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:[P.map((D,v)=>s.jsx("tspan",{x:-9,dy:v===0?0:"1.1em",children:D},v)),x!==w&&s.jsx("title",{children:w})]})]},N?.toString?.()||T)}),i&&s.jsx("text",{transform:"rotate(-90)",x:-h.innerHeight/2,y:-h.margin.left+12,textAnchor:"middle",className:"fdp-axis__label",fontFamily:"inherit",children:i})]})},Cd=({axis:e="y",tickCount:t,stroke:n="var(--fdp-chart-grid,#e5e5e5)",dasharray:r="2 4",className:a})=>{const i=Gn(),o=jn();if(!i||!o)return null;const l=e==="y"?i.getYTicks(t):i.getXTicks(t);return s.jsxs("g",{className:["fdp-grid",a].filter(Boolean).join(" "),children:[e==="y"&&l.map((u,c)=>s.jsx("line",{x1:0,x2:o.innerWidth,y1:i.yScale(u),y2:i.yScale(u),stroke:n,strokeDasharray:r},c)),e==="x"&&l.map((u,c)=>s.jsx("line",{y1:0,y2:o.innerHeight,x1:i.xScale(u),x2:i.xScale(u),stroke:n,strokeDasharray:r},c))]})},qr={color:{"data-viz":{$type:"color",categorical:{1:{$value:"{color.primary.blue}",$description:"Series 1 â€“ NHS Blue (brand core)"},2:{$value:"#41B6E6",$description:"Series 2 â€“ NHS Light Blue (new)"},3:{$value:"{color.secondary.aqua-green}",$description:"Series 3 â€“ NHS Aqua Green (existing)"},4:{$value:"#78BE20",$description:"Series 4 â€“ NHS Light Green (new)"},5:{$value:"{color.primary.green}",$description:"Series 5 â€“ NHS Green (existing)"},6:{$value:"{color.secondary.warm-yellow}",$description:"Series 6 â€“ NHS Warm Yellow (existing; distinct from focus yellow)"},7:{$value:"#ED4F00",$description:"Series 7 â€“ NHS Tangerine (new; warmer/deeper than existing orange)"},8:{$value:"{color.secondary.pink}",$description:"Series 8 â€“ NHS Pink (existing)"},9:{$value:"#E317AA",$description:"Series 9 â€“ NHS Bright Pink (new vivid accent)"},10:{$value:"#880FB8",$description:"Series 10 â€“ NHS Light Purple (new mid purple)"},11:{$value:"{color.primary.purple}",$description:"Series 11 â€“ NHS Purple (existing dark purple)"},12:{$value:"#9A6324",$description:"Series 12 â€“ NHS Brown (new; earth neutral)"}},neutral:{comparison:{$value:"{color.grey.1}",$description:"Neutral comparison series (optional)"}},region:{$comment:"Fixed colours for NHS geographical regions; prefer stable mapping for maps. London colour updated (#78BE21 â€“ light green).","north-east":{$value:"{color.primary.blue}",$description:"North East â€“ NHS Blue"},"north-west":{$value:"#41B6E6",$description:"North West â€“ NHS Light Blue"},"east-of-england":{$value:"{color.primary.purple}",$description:"East of England â€“ NHS Purple"},midlands:{$value:"{color.secondary.pink}",$description:"Midlands â€“ NHS Pink"},london:{$value:"#78BE21",$description:"London â€“ NHS Light Green (new)"},"south-west":{$value:"#FAE100",$description:"South West â€“ NHS Yellow variant (new)"},"south-east":{$value:"#ed8b00",$description:"South East â€“ NHS Orange (existing base orange)"}},severity:{$comment:"Semantic severity / alert colours (light background ramp â†’ critical).",low:{$value:"{color.secondary.pale-yellow}",$description:"Low severity â€“ pale yellow background"},moderate:{$value:"{color.secondary.warm-yellow}",$description:"Moderate severity â€“ warm yellow"},high:{$value:"{color.secondary.orange}",$description:"High severity â€“ orange"},critical:{$value:"{color.primary.red}",$description:"Critical severity â€“ red"}},"org-level":{$comment:"Organisational level semantic colours (stable NHS brand mappings).",trust:{$value:"{color.primary.blue}",$description:"Trust â€“ NHS Blue"},ambulance:{$value:"{color.primary.green}",$description:"Ambulance â€“ NHS Green"},icb:{$value:"{color.primary.dark-pink}",$description:"ICB â€“ NHS Dark Pink"},region:{$value:"{color.primary.purple}",$description:"Region â€“ NHS Purple"}},stroke:{$comment:"Automatic contrast stroke colours for overlays / borders. Light fills get dark stroke; dark fills get white stroke.",categorical:{1:{$value:"#ffffff",$description:"Stroke for series 1 (blue)"},2:{$value:"#212b32",$description:"Stroke for series 2 (light blue)"},3:{$value:"#212b32",$description:"Stroke for series 3 (aqua green)"},4:{$value:"#212b32",$description:"Stroke for series 4 (light green)"},5:{$value:"#ffffff",$description:"Stroke for series 5 (green)"},6:{$value:"#212b32",$description:"Stroke for series 6 (warm yellow)"},7:{$value:"#ffffff",$description:"Stroke for series 7 (tangerine)"},8:{$value:"#ffffff",$description:"Stroke for series 8 (pink)"},9:{$value:"#ffffff",$description:"Stroke for series 9 (bright pink)"},10:{$value:"#ffffff",$description:"Stroke for series 10 (light purple)"},11:{$value:"#ffffff",$description:"Stroke for series 11 (purple)"},12:{$value:"#ffffff",$description:"Stroke for series 12 (brown)"}},region:{$comment:"Region stroke colours derived from fill colours: dark fills lightened ~35%; light fills darkened ~25% for consistent contrast without defaulting to pure white/black.","north-east":{$value:"#5996D1",$description:"Stroke for North East (blue lightened 35%)"},"north-west":{$value:"#3189AD",$description:"Stroke for North West (light blue darkened 25%)"},"east-of-england":{$value:"#7A59A3",$description:"Stroke for East of England (purple lightened 35%)"},midlands:{$value:"#CA71A4",$description:"Stroke for Midlands (pink lightened 35%)"},london:{$value:"#5A8F19",$description:"Stroke for London (light green darkened 25%)"},"south-west":{$value:"#BCA900",$description:"Stroke for South West (yellow darkened 25%)"},"south-east":{$value:"#B26800",$description:"Stroke for South East (orange darkened 25%)"}},severity:{$comment:"Contrast strokes for severity colours (light backgrounds use dark stroke; dark backgrounds use white).",low:{$value:"#212b32",$description:"Stroke for low severity (pale yellow fill)"},moderate:{$value:"#212b32",$description:"Stroke for moderate severity (warm yellow fill)"},high:{$value:"#212b32",$description:"Stroke for high severity (orange fill)"},critical:{$value:"#ffffff",$description:"Stroke for critical severity (red fill)"}},"org-level":{$comment:"Contrast strokes for organisational level colours (all dark brand fills so white stroke for consistency).",trust:{$value:"#ffffff",$description:"Stroke for trust (blue fill)"},ambulance:{$value:"#ffffff",$description:"Stroke for ambulance (green fill)"},icb:{$value:"#ffffff",$description:"Stroke for ICB (dark pink fill)"},region:{$value:"#ffffff",$description:"Stroke for region (purple fill)"}}},spc:{$comment:"SPC (Statistical Process Control) semantic variation colours aligned to SPCChart.scss and SPCIcons.",improvement:{$value:"#00B0F0",$description:"SPC special cause improvement (favourable)"},concern:{$value:"#E46C0A",$description:"SPC special cause concern (deteriorating)"},"no-judgement":{$value:"#490092",$description:"SPC special cause (no directional judgement)"},"common-cause":{$value:"#A6A6A6",$description:"SPC common cause (baseline variation)"},"assurance-pass":{$value:"#00823B",$description:"SPC assurance pass indicator (process capable)"},"assurance-fail":{$value:"#DA291C",$description:"SPC assurance fail indicator (process not capable)"},gradient:{$comment:"Opacity stops for SPC icon gradient wash (applied top-left -> bottom-right). Consumers build gradients using these opacities + base colour.",stop:{"start-opacity":{$value:"0.18",$description:"Start stop opacity (0%) for classic variant wash"},"mid-opacity":{$value:"0.06",$description:"Mid stop opacity (~65-75%)"},"end-opacity":{$value:"0",$description:"End stop opacity (100%)"},"triangle-start-opacity":{$value:"0.18",$description:"Start opacity for triangle variants (kept aligned)"},"triangle-mid-opacity":{$value:"0.06",$description:"Mid opacity for triangle variants"},"triangle-end-opacity":{$value:"0",$description:"End opacity for triangle variants"}}},stroke:{$comment:"Contrast stroke colours for SPC variation fills.",improvement:{$value:"#000000",$description:"Stroke for improvement points"},concern:{$value:"#000000",$description:"Stroke for concern points"},"no-judgement":{$value:"#000000",$description:"Stroke for no-judgement points"},"common-cause":{$value:"#ffffff",$description:"Stroke for common cause points"},"assurance-pass":{$value:"#000000",$description:"Stroke for assurance pass points"},"assurance-fail":{$value:"#000000",$description:"Stroke for assurance fail points"}}}}}},vi={color:{primary:{$type:"color",blue:{$value:"#005eb8",$description:"NHS Blue - Primary brand color"},"blue-active":{$value:"#002f5c",$description:"NHS Active Blue (50% shade) â€“ alias of button/login active; promoted for general reuse"},white:{$value:"#ffffff",$description:"NHS White"},black:{$value:"#212b32",$description:"NHS Black"},green:{$value:"#007f3b",$description:"NHS Green"},purple:{$value:"#330072",$description:"NHS Purple"},"dark-pink":{$value:"#7c2855",$description:"NHS Dark Pink"},red:{$value:"#d5281b",$description:"NHS Red"},"light-purple":{$value:"#880FB8",$description:"NHS Light Purple (data viz promoted)"},yellow:{$value:"#ffeb3b",$description:"NHS Yellow"}},secondary:{$type:"color","pale-yellow":{$value:"#fff9c4",$description:"NHS Pale Yellow"},"warm-yellow":{$value:"#ffb81c",$description:"NHS Warm Yellow"},"region-yellow":{$value:"#FAE100",$description:"NHS Region Yellow (maps)"},orange:{$value:"#ed8b00",$description:"NHS Orange"},tangerine:{$value:"#ED4F00",$description:"NHS Tangerine (data viz promoted)"},"aqua-green":{$value:"#00a499",$description:"NHS Aqua Green"},"light-blue":{$value:"#41B6E6",$description:"NHS Light Blue (data viz promoted)"},pink:{$value:"#ae2573",$description:"NHS Pink"},"bright-pink":{$value:"#E317AA",$description:"NHS Bright Pink (data viz promoted)"},"light-green":{$value:"#78BE20",$description:"NHS Light Green (data viz promoted)"},brown:{$value:"#9A6324",$description:"NHS Brown (data viz promoted neutral)"}},grey:{1:{$value:"#4c6272",$description:"NHS Grey 1 - Darkest grey"},2:{$value:"#768692",$description:"NHS Grey 2 - Darker grey"},3:{$value:"#aeb7bd",$description:"NHS Grey 3 - Medium grey"},4:{$value:"#d8dde0",$description:"NHS Grey 4 - Light grey"},5:{$value:"#f0f4f5",$description:"NHS Grey 5 - Lightest grey"},$type:"color"},accessibility:{$type:"color",$comment:"Accessibility-oriented color tokens. Includes CVD-safe pairs and Okabeâ€“Ito colors. Use these for positive/negative semantics and colour-blindâ€“friendly defaults.","okabe-ito":{green:{$value:"#009E73",$description:"Okabeâ€“Ito green (CVD-safe) â€“ recommended positive"},vermillion:{$value:"#D55E00",$description:"Okabeâ€“Ito vermillion / redâ€“orange (CVD-safe) â€“ recommended negative"}},"cvd-safe":{blue:{$value:"#1f77b4",$description:"CVD-safe blue (pairs with orange); widely used in Matplotlib/Tableau sets"},orange:{$value:"#ff7f0e",$description:"CVD-safe orange (pairs with blue)"}},positive:{$value:"{color.accessibility.okabe-ito.green}",$description:"Accessibility semantic alias â€“ positive"},negative:{$value:"{color.accessibility.okabe-ito.vermillion}",$description:"Accessibility semantic alias â€“ negative"}}}},kx=["#005eb8","#0072ce","#41b6e6","#00a499","#7c2855","#330072","#d5281b","#ffb81c","#fae100","#4c6272","#768692","#aeb7bd"];let mo=null,go=null,yo=null,Td="optimized";function Cx(){const e={color:{...vi.color,...qr.color}},t=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!i)return;const o=i.$value||i.value;if(typeof o=="string"&&/^\{.+\}$/.test(o))return t(o.slice(1,-1),a);if(typeof o=="string")return o},n=[];try{for(let r=1;r<=12;r++){const a=`color.data-viz.categorical.${r}`,i=t(a);if(!i)throw new Error(`Missing token ${a}`);n.push(i)}return n}catch{return kx}}function Tx(){return mo||(mo=Cx()),mo}function Nx(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.trim());return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function bo(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function jx(e,t,n){const r=bo(e),a=bo(t),i=bo(n),o=r*.4124+a*.3576+i*.1805,l=r*.2126+a*.7152+i*.0722,u=r*.0193+a*.1192+i*.9505;return{x:o*100,y:l*100,z:u*100}}function Dx(e,t,n){let o=e/95.047,l=t/100,u=n/108.883;const c=d=>d>.008856?Math.cbrt(d):7.787*d+16/116;return o=c(o),l=c(l),u=c(u),{L:116*l-16,a:500*(o-l),b:200*(l-u)}}function Nd(e){const t=Nx(e);if(!t)return null;const n=jx(t.r,t.g,t.b);return Dx(n.x,n.y,n.z)}function jd(e,t){const n=e.L-t.L,r=e.a-t.a,a=e.b-t.b;return Math.sqrt(n*n+r*r+a*a)}function Mx(){const e=Tx();if(e.length<=2)return e.slice();const t=e.map(o=>Nd(o));let n=0,r=-1;for(let o=0;o<e.length;o++){const l=t[o];if(!l)continue;let u=0,c=0;for(let f=0;f<e.length;f++)o!==f&&t[f]&&(u+=jd(l,t[f]),c++);const d=u/Math.max(1,c);d>r&&(r=d,n=o)}const a=new Set(e.map((o,l)=>l)),i=[];for(i.push(n),a.delete(n);a.size;){let o=Array.from(a)[0],l=-1;for(const u of a){const c=t[u];if(!c)continue;let d=1/0;for(const f of i){const p=t[f];if(p){const g=jd(c,p);g<d&&(d=g)}}d>l&&(l=d,o=u)}i.push(o),a.delete(o)}return i.map(o=>e[o])}function $x(){return go||(go=Mx()),go}function Ix(e,t,n){const r=(e+16)/116,a=t/500+r,i=r-n/200,o=d=>{const f=d*d*d;return f>.008856?f:(d-16/116)/7.787},l=o(a)*95.047,u=o(r)*100,c=o(i)*108.883;return{X:l,Y:u,Z:c}}function Px(e,t,n){e/=100,t/=100,n/=100;let r=e*3.2406+t*-1.5372+n*-.4986,a=e*-.9689+t*1.8758+n*.0415,i=e*.0557+t*-.204+n*1.057;const o=l=>l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055;return r=Math.min(1,Math.max(0,o(r))),a=Math.min(1,Math.max(0,o(a))),i=Math.min(1,Math.max(0,o(i))),{r:Math.round(r*255),g:Math.round(a*255),b:Math.round(i*255)}}function Fx(e,t,n){return`#${[e,t,n].map(r=>r.toString(16).padStart(2,"0")).join("")}`}function Lx(e,t){const n=Nd(e);if(!n)return e;const r=Math.min(100,Math.max(0,n.L+t)),{X:a,Y:i,Z:o}=Ix(r,n.a,n.b),l=Px(a,i,o);return Fx(l.r,l.g,l.b)}function Ax(){const e=$x(),n=[12,-12,24,-24].map(a=>e.map(i=>Lx(i,a))),r=[...e];return n.forEach(a=>r.push(...a)),r}function Ex(){return(!yo||Bx())&&(yo=Ax(),Dd=Td),yo}let Dd=null;function Bx(){return Dd!==Td}function qt(e){const t=Ex();return t[e%t.length]}let gr=null,Xr=null,Kr=null,Zr=null;function Rx(){const e=qr?.color?.["data-viz"]?.stroke;if(e){const t=e.categorical||{};gr=[];for(let i=1;i<=12;i++){const o=t[String(i)]?.$value||t[String(i)]?.value;gr.push(typeof o=="string"?o:"#212b32")}const n=e.region||{};Xr={},Object.keys(n).forEach(i=>{const o=n[i]?.$value||n[i]?.value;typeof o=="string"&&(Xr[i]=o)});const r=e.severity||{},a=e["org-level"]||{};Zr={},Object.keys(a).forEach(i=>{const o=a[i]?.$value||a[i]?.value;typeof o=="string"&&(Zr[i]=o)}),Kr={},Object.keys(r).forEach(i=>{const o=r[i]?.$value||r[i]?.value;typeof o=="string"&&(Kr[i]=o)})}}function wi(){(!gr||!Xr||!Kr||!Zr)&&Rx()}function Yn(e){return wi(),gr?gr[e%gr.length]:"#212b32"}function Hx(e){return wi(),Xr?Xr[e]:void 0}function Si(e,t){return Hx(e)||Yn(t)}const _o=["low","moderate","high","critical"];let xo=null;function Ox(){const e={color:{...vi.color,...qr.color}},t=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!i)return;const o=i.$value||i.value;return typeof o=="string"&&/^\{.+\}$/.test(o)?t(o.slice(1,-1),a):typeof o=="string"?o:void 0},n={};return _o.forEach(r=>{const a=t(`color.data-viz.severity.${r}`);a&&(n[r]=a)}),n}function Md(){return xo||(xo=Ox()),xo}function zx(e){return Md()[e.toLowerCase()]}function Wx(e,t){return zx(e)||Md()[_o[t%_o.length]]||qt(t)}function Ux(e){return wi(),Kr?Kr[e]:void 0}function Vx(e,t){return Ux(e)||Yn(t)}const vo=["trust","ambulance","icb","region"];let wo=null;function Gx(){const e={color:{...vi.color,...qr.color}},t=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!i)return;const o=i.$value||i.value;return typeof o=="string"&&/^\{.+\}$/.test(o)?t(o.slice(1,-1),a):typeof o=="string"?o:void 0},n={};return vo.forEach(r=>{const a=t(`color.data-viz.org-level.${r}`);a&&(n[r]=a)}),n}function $d(){return wo||(wo=Gx()),wo}function Yx(e){return $d()[e.toLowerCase()]}function qx(e,t){return Yx(e)||$d()[vo[t%vo.length]]||qt(t)}function Xx(e){return wi(),Zr?Zr[e]:void 0}function Kx(e,t){return Xx(e)||Yn(t)}let So=null;const Zx=["north-east","north-west","east-of-england","midlands","london","south-west","south-east"];function Jx(e){return e.trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Qx(){const e={color:{...vi.color,...qr.color}},t=(a,i=new Set)=>{if(i.has(a))return;i.add(a);const o=a.split(".").reduce((u,c)=>u?u[c]:void 0,e);if(!o)return;const l=o.$value||o.value;return typeof l=="string"&&/^\{.+\}$/.test(l)?t(l.slice(1,-1),i):typeof l=="string"?l:void 0},n={},r=[];return Zx.forEach(a=>{const i=t(`color.data-viz.region.${a}`);i?n[a]=i:r.push(a)}),process.env.NODE_ENV!=="production"&&(Object.keys(n).length===0?console.warn("[DataViz] Region colour tokens unresolved  falling back to categorical colours."):r.length&&console.warn(`[DataViz] Missing region colour tokens: ${r.join(", ")}.`)),n}function ev(){return So||(So=Qx()),So}function tv(e){return ev()[Jx(e)]}function yr(e,t){return tv(e)||qt(t)}const Id=Z.createContext(null),Jr=()=>Z.useContext(Id),nv=({initialHiddenIds:e=[],children:t,hiddenIds:n,onChange:r})=>{const[a,i]=Z.useState(()=>new Set(e)),o=n!==void 0,l=Z.useMemo(()=>o?new Set(n):a,[o,n,a]),u=Z.useCallback(d=>{o||i(new Set(d)),r?.(Array.from(d))},[o,r]),c=Z.useMemo(()=>({hiddenIds:l,isHidden:d=>l.has(d),toggle:d=>{const f=new Set(l);f.has(d)?f.delete(d):f.add(d),u(f)},showOnly:d=>{u(new Set)},showAll:()=>u(new Set),setHidden:d=>u(new Set(Array.isArray(d)?d:Array.from(d)))}),[l,u]);return s.jsx(Id.Provider,{value:c,children:t})},Pd=Z.createContext(null),_n=()=>Z.useContext(Pd),Fd=({children:e,maxDistance:t=40,wrapAround:n=!1})=>{const r=Gn(),a=Jr(),[i,o]=Z.useState(null),l=Z.useRef(new Map),[u,c]=Z.useState([]),d=Z.useCallback((T,w)=>{l.current.set(T,w)},[]),f=Z.useCallback(T=>{l.current.delete(T)},[]),p=Z.useCallback((T,w)=>{if(!r)return;const{xScale:x,yScale:P}=r;let D=null,v=1/0;l.current.forEach((F,M)=>{F.forEach((S,I)=>{const L=x(S.x),re=P(S.y),q=L-T,O=re-w,W=Math.sqrt(q*q+O*O);W<v&&(v=W,D={seriesId:M,index:I,x:S.x,y:S.y,clientX:L,clientY:re})})}),D&&v<=t?o(D):o(null)},[r,t]),g=Z.useCallback(()=>o(null),[]);Z.useEffect(()=>{if(!i){c([]);return}if(!r)return;const{xScale:T,yScale:w}=r,x=[];l.current.forEach((P,D)=>{P.forEach((v,F)=>{(i.x instanceof Date&&v.x instanceof Date?v.x.getTime()===i.x.getTime():v.x===i.x)&&x.push({seriesId:D,index:F,x:v.x,y:v.y,clientX:T(v.x),clientY:w(v.y)})})}),x.sort((P,D)=>P.seriesId.localeCompare(D.seriesId)),c(x)},[i,r]);const _=Z.useCallback(T=>{if(!i)return;const w=l.current.get(i.seriesId);if(!w)return;let x=i.index+T;if(x<0||x>=w.length){if(!n)return;x=(x+w.length)%w.length}const P=w[x];if(!r)return;const{xScale:D,yScale:v}=r;o({seriesId:i.seriesId,index:x,x:P.x,y:P.y,clientX:D(P.x),clientY:v(P.y)})},[i,r,n]),h=Z.useCallback(T=>{let w=Array.from(l.current.keys());if(a&&(w=w.filter(L=>!a.isHidden(L))),w.length===0)return;if(!i){const L=w[0],re=l.current.get(L);if(!re||!r)return;const{xScale:q,yScale:O}=r,W=re[0];o({seriesId:L,index:0,x:W.x,y:W.y,clientX:q(W.x),clientY:O(W.y)});return}const x=w.indexOf(i.seriesId);if(x===-1)return;let P=x+T;if(P<0||P>=w.length){if(!n)return;P=(P+w.length)%w.length}const D=w[P],v=l.current.get(D);if(!v||!r)return;const F=Math.min(i.index,v.length-1),M=v[F],{xScale:S,yScale:I}=r;o({seriesId:D,index:F,x:M.x,y:M.y,clientX:S(M.x),clientY:I(M.y)})},[i,r,n,a]),m=Z.useCallback(()=>{let T=Array.from(l.current.keys());if(a&&(T=T.filter(F=>!a.isHidden(F))),T.length===0)return;const w=i?i.seriesId:T[0],x=l.current.get(w);if(!x||x.length===0||!r)return;const P=x[0],{xScale:D,yScale:v}=r;o({seriesId:w,index:0,x:P.x,y:P.y,clientX:D(P.x),clientY:v(P.y)})},[i,r,a]),y=Z.useCallback(()=>{let T=Array.from(l.current.keys());if(a&&(T=T.filter(M=>!a.isHidden(M))),T.length===0)return;const w=i?i.seriesId:T[0],x=l.current.get(w);if(!x||x.length===0||!r)return;const P=x.length-1,D=x[P],{xScale:v,yScale:F}=r;o({seriesId:w,index:P,x:D.x,y:D.y,clientX:v(D.x),clientY:F(D.y)})},[i,r,a]),C=Z.useCallback(()=>_(1),[_]),j=Z.useCallback(()=>_(-1),[_]),k=Z.useCallback(()=>h(1),[h]),$=Z.useCallback(()=>h(-1),[h]),N=Z.useMemo(()=>({focused:i,setFocused:o,aggregated:u,focusNearest:p,clear:g,registerSeries:d,unregisterSeries:f,focusNextPoint:C,focusPrevPoint:j,focusNextSeries:k,focusPrevSeries:$,focusFirstPoint:m,focusLastPoint:y}),[i,u,p,g,d,f,C,j,k,$,m,y]);return s.jsx(Pd.Provider,{value:N,children:e})},Ld=({series:e,seriesIndex:t,palette:n,showPoints:r,focusablePoints:a,focusIndex:i,parseX:o,visibilityMode:l="remove",strokeWidth:u=1,smooth:c=!0,gradientFillId:d,colors:f})=>{const p=Gn();if(!p)return null;const{xScale:g,yScale:_}=p,m=Jr()?.isHidden(e.id)??!1,y=m&&l==="fade";if(m&&l==="remove")return null;const C=_n();Z.useEffect(()=>{if(!C)return;const w=e.data.map(x=>({x:o(x),y:x.y}));return C.registerSeries(e.id,w),()=>C.unregisterSeries(e.id)},[C,e.id,e.data,o]);const j=Z.useMemo(()=>fo(e.data,w=>g(o(w)),w=>_(w.y),{smooth:c}),[e.data,g,_,o,c]),k=Z.useMemo(()=>{if(!e.data.length)return"";const[w]=_.domain(),x=co().x(P=>g(o(P))).y0(()=>_(w)).y1(P=>_(P.y));return c&&x.curve(xi),x(e.data)||""},[e.data,g,_,o,c]),$=f&&f[t],N=e.color||$||(n==="region"?yr(e.id,t):qt(t)),T=n==="region"?Si(e.id,t):Yn(t);return s.jsxs("g",{className:"fdp-line-series","data-series":e.id,opacity:y?.25:1,"aria-hidden":y?!0:void 0,children:[d&&s.jsx("path",{d:k,fill:`url(#${d})`,stroke:"none",role:"presentation",className:"fdp-line-series__gradient"}),s.jsx("path",{d:j,fill:"none",stroke:N,strokeWidth:u,role:"presentation"}),r&&e.data.map((w,x)=>{const P=g(o(w)),D=_(w.y),v=a?0:-1,F=!y&&(a&&x===i||C?.focused?.seriesId===e.id&&C.focused.index===x),M=()=>{C&&!y&&C.setFocused({seriesId:e.id,index:x,x:o(w),y:w.y,clientX:P,clientY:D})},S=()=>{C&&C.focused?.seriesId===e.id&&C.focused.index===x&&C.clear()};return s.jsx("circle",{cx:P,cy:D,r:F?5:3.5,stroke:F?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":T,strokeWidth:F?2:1,fill:F?"var(--nhs-fdp-color-grey-3, #aeb7bd)":N,className:"fdp-line-point",tabIndex:y?-1:v,"aria-label":`${e.label||e.id} ${o(w).toDateString()} value ${w.y}`,"data-series":e.id,"data-index":x,onMouseEnter:M,onFocus:M,onMouseLeave:S,onBlur:S},x)})]})},rv=({polite:e=!0,format:t})=>{const n=_n(),[r,a]=Z.useState(""),i=Z.useRef("");return Z.useEffect(()=>{if(!n?.focused)return;const{focused:o,aggregated:l}=n;let u;if(l&&l.length>1){const c=l.map(f=>`${f.seriesId} ${f.y}`).join("; ");u=`${o.x instanceof Date?o.x.toDateString():String(o.x)} â€“ ${c}`}else u=t?t({seriesId:o.seriesId,x:o.x,y:o.y,index:o.index}):av(o.seriesId,o.x,o.y,o.index);if(u!==i.current){i.current=u,a("");const c=setTimeout(()=>a(u),10);return()=>clearTimeout(c)}},[n?.focused,t]),s.jsx("div",{"aria-live":e?"polite":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,margin:-1,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",border:0},children:r})};function av(e,t,n,r){const a=t instanceof Date?t.toDateString():String(t);return`Series ${e}, point ${r+1}, ${a}, value ${n}`}const iv=()=>{const e=_n(),t=jn();if(!e||!t||!e.focused)return null;const{focused:n,aggregated:r}=e,{innerWidth:a,innerHeight:i}=t,o=Math.min(Math.max(n.clientX,0),a),l=Math.min(Math.max(n.clientY,0),i),u=o+8,c=l-8,d=r.length>1,f=n.x instanceof Date?n.x.toDateString():String(n.x),p=d?f:`${f} â€¢ ${n.y}`,g=/\d+$/.exec(n.seriesId||""),_=g?parseInt(g[0],10)-1:0,h=qt(_>=0?_:0)||"#005eb8",m="var(--nhs-fdp-color-primary-yellow,#ffeb3b)";return s.jsxs("g",{className:"fdp-tooltip-layer",pointerEvents:"none",children:[s.jsx("circle",{cx:o,cy:l,r:7,fill:"none",stroke:m,strokeWidth:3}),s.jsx("circle",{cx:o,cy:l,r:5,fill:"#000",stroke:m,strokeWidth:1.5}),s.jsx("circle",{cx:o,cy:l,r:2.5,fill:h,stroke:"#fff",strokeWidth:.5}),d?(()=>{const C=r.map(T=>`${T.seriesId}: ${T.y}`),j=[p,...C],k=j.reduce((T,w)=>Math.max(T,w.length),0),$=Math.max(90,k*6.2+16),N=16*j.length+8;return s.jsxs("g",{children:[s.jsx("rect",{x:u,y:c-N,rx:4,ry:4,width:$,height:N,fill:"#212b32",opacity:.92}),j.map((T,w)=>s.jsx("text",{x:u+8,y:c-N+6+16*(w+.7),fill:"#fff",fontSize:12,children:T},w))]})})():s.jsxs("g",{children:[s.jsx("rect",{x:u,y:c-24,rx:4,ry:4,width:Math.max(60,p.length*6.2),height:24,fill:"#212b32",opacity:.92}),s.jsx("text",{x:u+8,y:c-8,fill:"#fff",fontSize:12,children:p})]})]})},sv=({items:e,palette:t="categorical",direction:n="row",interactive:r=!1,adjustStrokeForWhiteBackground:a=!0,hiddenIds:i,defaultHiddenIds:o=[],onVisibilityChange:l,formatAnnouncement:u})=>{const c=Jr(),d=!!(c&&!r&&!l&&i===void 0),f=r||d,p=e||[],g=i!==void 0,[_,h]=Z.useState(new Set(o)),m=g?new Set(i):_,[y,C]=Z.useState(""),j=k=>{if(d&&c){const v=c.isHidden(k);c.toggle(k);const M=p.find(I=>I.id===k)?.label||k,S=u?u(k,v,M):`${M} ${v?"shown":"hidden"}`;C(S);return}if(!f)return;const $=new Set(m),N=$.has(k);N?$.delete(k):$.add(k),g||h($);const T=p.filter(v=>!$.has(v.id)).map(v=>v.id),w=Array.from($);l?.(T,w);const P=p.find(v=>v.id===k)?.label||k,D=u?u(k,N,P):`${P} ${N?"shown":"hidden"}`;C(D)};return s.jsxs("div",{className:"fdp-legend-wrapper",children:[s.jsx("ul",{className:`fdp-legend fdp-legend--${n}`,children:p.map((k,$)=>{const N=k.palette||t,T=k.color||(N==="region"?yr(k.id,$):N==="severity"?Wx(k.id,$):N==="org-level"?qx(k.id,$):qt($));let w=k.stroke||(N==="region"?Si(k.id,$):N==="severity"?Vx(k.id,$):N==="org-level"?Kx(k.id,$):Yn($));if(a&&w){const D=w.trim().toLowerCase();(D==="#fff"||D==="#ffffff"||D==="white"||/^rgb\(\s*255\s*,\s*255\s*,\s*255\s*\)$/.test(D))&&(w="#212b32")}const x=d&&c?c.isHidden(k.id):m.has(k.id),P=f?{"aria-pressed":!x,"aria-label":`${k.label} (${x?"show":"hide"})`,onClick:()=>j(k.id)}:{"aria-label":k.label};return s.jsxs("li",{className:`fdp-legend__item${x?" fdp-legend__item--hidden":""}`,children:[s.jsx("button",{type:"button",className:"fdp-legend__swatch",style:{backgroundColor:T,backgroundImage:k.patternDataUrl?`url(${k.patternDataUrl})`:void 0,backgroundSize:k.patternDataUrl?"auto":void 0,borderColor:w},...P}),s.jsx("span",{className:"fdp-legend__label",children:k.label})]},k.id)})}),f&&s.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite","aria-atomic":"true",children:y})]})},ov=({series:e,seriesIndex:t,palette:n,parseX:r,areaOnly:a=!1,visibilityMode:i="remove",baselineY:o=0,smooth:l=!0,stacked:u,gradientFill:c=!0,colors:d})=>{const f=Gn();if(!f)return null;const{xScale:p,yScale:g}=f,h=Jr()?.isHidden(e.id)??!1,m=h&&i==="fade";if(h&&i==="remove")return null;const y=_n();Z.useEffect(()=>{if(!y)return;const T=e.data.map(w=>({x:r(w),y:w.y}));return y.registerSeries(e.id,T),()=>y.unregisterSeries(e.id)},[y,e.id,e.data,r]);const C=d&&d[t],j=e.color||C||(n==="region"?yr(e.id,t):qt(t)),k=Z.useMemo(()=>u&&u.length===e.data.length?fo(e.data,T=>p(r(T)),T=>{const w=e.data.indexOf(T);return g(u[w].y1)},{smooth:l}):fo(e.data,T=>p(r(T)),T=>g(T.y),{smooth:l}),[e.data,u,p,g,r,l]),$=Z.useMemo(()=>{if(u&&u.length===e.data.length){const D=co().x(v=>p(r(v))).y0((v,F)=>g(u[F].y0)).y1((v,F)=>g(u[F].y1));return l&&D.curve(xi),D(e.data)||""}const[T,w]=g.domain();let x=o;x<T?x=T:x>w&&(x=w);const P=co().x(D=>p(r(D))).y0(()=>g(x)).y1(D=>g(D.y));return l&&P.curve(xi),P(e.data)||""},[e.data,u,p,g,r,o,l]),N=Z.useId();return s.jsxs("g",{className:"fdp-area-series","data-series":e.id,opacity:m?.25:1,"aria-hidden":m?!0:void 0,children:[c&&s.jsx("defs",{children:s.jsxs("linearGradient",{id:N,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:j,stopOpacity:.25}),s.jsx("stop",{offset:"100%",stopColor:j,stopOpacity:0})]})}),s.jsx("path",{className:"fdp-area-series__fill",d:$,fill:c?`url(#${N})`:j,...c?{}:{fillOpacity:.25},stroke:"none"}),!a&&s.jsx("path",{d:k,fill:"none",stroke:j,strokeWidth:1})]})},lv=({series:e,seriesIndex:t,seriesCount:n,palette:r,parseX:a,focusable:i=!0,widthFactor:o=.8,groupGap:l=2,barWidth:u,adaptive:c=!1,adaptiveGroupOccupancy:d=.9,visibilityMode:f="remove",colorMode:p="series",allSeries:g,stacked:_,gapRatio:h=.15,minBarWidth:m,gradientFill:y=!0,gradientStrokeMatch:C=!0,opacity:j=1,fadedOpacity:k=.25,flatFillOpacity:$=1,colors:N})=>{const T=Math.max(0,h),w=Gn(),x=jn();if(!w||!x)return null;const{xScale:P,yScale:D}=w,F=Jr()?.isHidden(e.id)??!1,M=F&&f==="fade";if(F&&f==="remove")return null;const S=_n();Z.useEffect(()=>{if(!S)return;const ne=e.data.map(oe=>({x:a(oe),y:oe.y}));return S.registerSeries(e.id,ne),()=>S.unregisterSeries(e.id)},[S,e.id,e.data,a]);const I=typeof P.bandwidth=="function",L=I?P.bandwidth():void 0,re=Z.useMemo(()=>{if(L!=null)return L;const ne=g&&g.length?g:[e],oe=[];ne.forEach(B=>{B.data.forEach(G=>{const ae=P(a(G));Number.isFinite(ae)&&oe.push(ae)})});const pe=oe.sort((B,G)=>B-G);if(pe.length<=1)return 40;const K=[];for(let B=1;B<pe.length;B++)K.push(pe[B]-pe[B-1]);return K.sort((B,G)=>B-G),(K[Math.floor(K.length/2)]||40)*o},[e.data,g,P,a,o,L]),{basePerBar:q}=Z.useMemo(()=>{if(I){const pe=re,K=Math.max(1,(pe-l*(n-1))/n),A=e.barWidth??u;let B=A?Math.min(A,pe):K;if(c){const G=pe*Math.min(1,Math.max(.05,d)),ae=Math.max(1,(G-l*(n-1))/n);B=A?Math.min(B,ae):ae}return{basePerBar:B}}const ne=e.barWidth??u,oe=Math.max(1,(re-l*(n-1))/n);if(c){const pe=g&&g.length?g:[e],K=[];pe.forEach(de=>de.data.forEach(ye=>{const me=P(a(ye));Number.isFinite(me)&&K.push(me)})),K.sort((de,ye)=>de-ye);const A=[];for(let de=1;de<K.length;de++)A.push(K[de]-K[de-1]);A.sort((de,ye)=>de-ye);const G=(A[Math.floor(A.length/2)]||re)*Math.min(1,Math.max(.05,d)),ae=Math.max(1,(G-l*(n-1))/n);return{basePerBar:ne?Math.min(ne,ae):ae}}return ne?{basePerBar:Math.min(ne,oe)}:{basePerBar:oe}},[I,re,l,n,u,e.barWidth,c,d,g,P,a]),O=Z.useMemo(()=>{if(I)return[];const ne=[];return(g&&g.length?g:[e]).forEach(pe=>pe.data.forEach(K=>{const A=P(a(K));Number.isFinite(A)&&ne.push(A)})),ne.sort((pe,K)=>pe-K),Array.from(new Set(ne))},[I,g,e,P,a]),W=Z.useMemo(()=>{if(I)return[];if(!O.length)return[];if(O.length===1)return[{center:O[0],left:0,right:x.innerWidth}];const ne=[];for(let oe=0;oe<O.length;oe++){const pe=O[oe],K=oe===0?0:(O[oe-1]+pe)/2,A=oe===O.length-1?x.innerWidth:(pe+O[oe+1])/2;ne.push({center:pe,left:Math.max(0,K),right:Math.min(x.innerWidth,A)})}return ne},[I,O,x.innerWidth]),z=Z.useMemo(()=>{if(I||!W.length)return;const ne=Math.min(1,Math.max(.05,o)),oe=W.map(G=>Math.max(2,G.right-G.left)),pe=oe.map(G=>Math.max(2,Math.min(G-1,G*ne)));let K=Math.min(...pe);if(m)if(n<=1){const G=Math.min(...oe.map(ae=>ae-1));G>=m&&K<m&&(K=Math.min(G,m))}else{const G=Math.min(...oe.map(Q=>Q-1)),ae=m*n+(n-1)*(m*T);ae<=G&&K<ae&&(K=ae)}if(n<=1)return m&&K<m&&oe.every(ae=>ae>=m)?{groupWidth:m,barWidth:m}:{groupWidth:K,barWidth:K};let A=K/(n+(n-1)*T);return A<1&&(A=1),m&&A<m&&m*n+(n-1)*(m*T)<=K&&(A=m),{groupWidth:A*n+(n-1)*(A*T),barWidth:A}},[I,W,o,n,T,m]),le=N&&N[t]?N[t]:void 0,V=e.color||le||(r==="region"?yr(e.id,t):qt(t)),ue=r==="region"?Si(e.id,t):Yn(t),we=C&&(e.color||le)?V:ue,fe=Number.isFinite(D(0))?D(0):D.range()[0],he=Z.useId();return _&&_.length===e.data.length?s.jsxs("g",{className:"fdp-bar-series fdp-bar-series--stacked","data-series":e.id,opacity:M?k:j,"aria-hidden":M?!0:void 0,children:[y&&s.jsx("defs",{children:s.jsxs("linearGradient",{id:he,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:V,stopOpacity:.3}),s.jsx("stop",{offset:"60%",stopColor:V,stopOpacity:.14}),s.jsx("stop",{offset:"100%",stopColor:V,stopOpacity:.06})]})}),e.data.map((ne,oe)=>{const pe=a(ne),K=P(I?ne.x:pe);let A,B;if(I)A=re,B=K;else{const J=W.find(ee=>Math.abs(ee.center-K)<.5);if(!J||!z)A=q,B=K-q/2;else{const{groupWidth:ee}=z;A=ee;let R=K-ee/2;R<J.left&&(R=J.left),R+ee>J.right&&(R=Math.max(J.left,J.right-ee)),B=R}}const G=_[oe],ae=D(G.y0),Q=D(G.y1),de=Math.min(ae,Q),ye=Math.abs(Q-ae)||1;if(!I&&m&&A<m){const J=W.find(ee=>Math.abs(ee.center-K)<.5);if(J){const ee=Math.max(2,J.right-J.left-1),R=Math.min(ee,m);R>A&&(A=R,B=Math.max(J.left,Math.min(J.right-A,K-A/2)))}}const me=!M&&S?.focused?.seriesId===e.id&&S.focused.index===oe,H=()=>{!S||M||S.setFocused({seriesId:e.id,index:oe,x:pe,y:G.y1-G.y0,clientX:B+A/2,clientY:de})},Y=()=>{S?.focused?.seriesId===e.id&&S.focused.index===oe&&S.clear()};return s.jsx("rect",{x:B,y:de,width:A,height:ye,fill:y?`url(#${he})`:V,...y?{}:{fillOpacity:$},stroke:me?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":y&&C?V:void 0,strokeWidth:me?2:1,className:"fdp-bar fdp-bar--stacked",tabIndex:M||!i?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${pe instanceof Date?pe.toDateString():pe} value ${G.y1-G.y0}`,onMouseEnter:H,onFocus:H,onMouseLeave:Y,onBlur:Y},oe)})]}):s.jsxs("g",{className:"fdp-bar-series","data-series":e.id,opacity:M?k:j,"aria-hidden":M?!0:void 0,children:[y&&s.jsxs("defs",{children:[p==="series"&&s.jsxs("linearGradient",{id:he,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:V,stopOpacity:.3}),s.jsx("stop",{offset:"60%",stopColor:V,stopOpacity:.14}),s.jsx("stop",{offset:"100%",stopColor:V,stopOpacity:.06})]}),p==="category"&&e.data.map((ne,oe)=>{const K=N&&N[oe]||(r==="region"?yr(String(ne.x),oe):qt(oe)),A=`${he}-${oe}`;return s.jsxs("linearGradient",{id:A,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:K,stopOpacity:.3}),s.jsx("stop",{offset:"60%",stopColor:K,stopOpacity:.14}),s.jsx("stop",{offset:"100%",stopColor:K,stopOpacity:.06})]},A)})]}),e.data.map((ne,oe)=>{const pe=a(ne),K=P(I?ne.x:pe);let A,B;if(I){const se=re;if(n<=1)B=se,A=K;else{B=Math.max(1,se/(n+(n-1)*T));const X=B*T,U=B*n+X*(n-1);A=K+(se-U)/2+t*(B+X)}}else{const se=W.find(X=>X.center===K);if(!se||!z)B=q,A=K-q/2,m&&B<m&&(B=m,A=K-B/2);else{const{barWidth:X}=z;B=X;const U=n>1?X*T:0,ie=B*n+U*(n-1);let ge=K-ie/2;ge<se.left&&(ge=se.left),ge+ie>se.right&&(ge=Math.max(se.left,se.right-ie)),A=ge+t*(B+U)}if(m&&B<m){const X=W.find(U=>Math.abs(U.center-K)<.5);if(X){const U=Math.max(2,X.right-X.left-1),ie=Math.min(U,m);if(ie>B)if(n<=1)B=ie,A=Math.max(X.left,Math.min(X.right-B,K-B/2));else{const ge=ie*T,ce=ie*n+ge*(n-1);if(ce<=X.right-X.left-1){B=ie;const Se=ce;let Ce=K-Se/2;Ce<X.left&&(Ce=X.left),Ce+Se>X.right&&(Ce=Math.max(X.left,X.right-Se)),A=Ce+t*(B+ge)}}}}}const G=A+B/2,ae=D(ne.y),Q=Math.min(fe,ae),de=Math.abs(fe-ae),ye=!M&&S?.focused?.seriesId===e.id&&S.focused.index===oe,me=()=>{!S||M||S.setFocused({seriesId:e.id,index:oe,x:pe,y:ne.y,clientX:G,clientY:ae})},H=()=>{S?.focused?.seriesId===e.id&&S.focused.index===oe&&S.clear()},Y=p==="category"&&N?N[oe]:void 0,J=p==="category"?Y||(r==="region"?yr(String(ne.x),oe):qt(oe)):V,ee=p==="category"?`${he}-${oe}`:he,R=y&&C?J:p==="category"?r==="region"?Si(String(ne.x),oe):Yn(oe):we,te=ye?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":R||J;return s.jsx("rect",{x:A,y:Q,width:B,height:de||1,fill:y?`url(#${ee})`:J,...y?{}:{fillOpacity:$},stroke:te,strokeWidth:ye?2:1,className:"fdp-bar",tabIndex:M||!i?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${pe instanceof Date?pe.toDateString():pe} value ${ne.y}`,onMouseEnter:me,onFocus:me,onMouseLeave:H,onBlur:H},oe)})]})},cv=({series:e,innerWidth:t,innerHeight:n,paddingInner:r=.1,paddingOuter:a=.05,children:i,yTickCount:o=5})=>{const l=jn(),u=t??l?.innerWidth??0,c=n??l?.innerHeight??0,d=Z.useMemo(()=>e.flatMap(m=>m.data),[e]),f=Z.useMemo(()=>{const m=new Set;return d.forEach(y=>m.add(y.x)),Array.from(m)},[d]),p=Z.useMemo(()=>Math.max(0,...d.map(m=>m.y)),[d]),g=Z.useMemo(()=>zc().domain(f).range([0,u]).paddingInner(r).paddingOuter(a),[f,u,r,a]),_=Z.useMemo(()=>li().domain([0,p]).nice().range([c,0]),[p,c]),h=Z.useMemo(()=>({xScale:g,yScale:_,getXTicks:()=>f,getYTicks:(m=o)=>_.ticks(m)}),[g,_,f,o]);return s.jsx(ho.Provider,{value:h,children:i})},uv=({title:e,description:t,source:n,table:r,className:a,id:i,message:o="Interactive chart loadingâ€¦",forceFallback:l=!1})=>{const u=Z.useId(),c=i||u,d=t?`${c}-desc`:void 0,f=n?`${c}-src`:void 0,p=typeof window<"u"&&!l;return s.jsxs("figure",{id:c,className:bi("fdp-chart fdp-chart--noscript",a),"aria-labelledby":`${c}-title`,"aria-describedby":bi(d,f),"data-component":"ChartNoScript",children:[s.jsx("header",{className:"fdp-chart__header",children:s.jsx("h3",{id:`${c}-title`,className:"fdp-chart__title",children:e})}),t&&s.jsx("p",{id:d,className:"fdp-chart__description",children:t}),!p&&s.jsx("div",{className:"fdp-chart__loading",role:"status","aria-live":"polite",children:o}),s.jsxs("div",{className:"fdp-chart__fallback",role:"group","aria-label":e,children:[s.jsx("noscript",{children:s.jsx("div",{className:"fdp-chart__noscript-wrapper",children:s.jsx(Yt,{...r})})}),s.jsx("div",{className:"fdp-chart__table","data-fallback-table":!0,children:s.jsx(Yt,{...r})})]}),n&&s.jsx("figcaption",{className:"fdp-chart__caption",children:n&&s.jsxs("small",{id:f,className:"fdp-chart__source",children:["Source: ",n]})})]})},dv=({selector:e="figure.fdp-chart",onEnhanced:t,delay:n=0,children:r})=>{const a=Z.useRef(null);return Z.useEffect(()=>{const i=a.current;if(!i)return;const o=()=>{const l=Array.from(i.querySelectorAll(e));if(l.length===0)return;const u=[];l.forEach(c=>{c.classList.contains("fdp-chart--enhanced")||(c.classList.add("fdp-chart--enhanced"),u.push(c))}),u.length&&t&&t(u)};if(n>0){if(typeof window>"u")return;const l=window.setTimeout(o,n);return()=>window.clearTimeout(l)}o()},[e,t,n]),s.jsx("div",{ref:a,children:r})},Ad=({label:e,value:t,unit:n,delta:r,status:a="neutral",variant:i="default",subtitle:o,metadata:l,trendData:u,loading:c=!1,error:d,valueFormatter:f,className:p,style:g,id:_,announceDelta:h=!0,visual:m})=>{const y=Z.useId(),C=_||y,j=`${C}-label`,k=`${C}-value`,$=`${C}-delta`,N=typeof t=="number"&&!Number.isNaN(t),T=c?"â€”":d?"":N?f?f(t):t.toLocaleString():t;let w,x="",P="";if(r&&!c&&!d){w=r.direction||(r.value>0?"up":r.value<0?"down":"neutral");const D=Math.abs(r.value),v=w==="up"?`+${D}`:w==="down"?`-${D}`:"0",F=r.isPercent?"%":"";if(x=`${v}${F}`,r.ariaLabel)P=r.ariaLabel;else{const M=r.invert?w==="down":w==="up";P=`${w==="neutral"?"no change":w==="up"?"up":"down"} ${D}${F}${w==="neutral"?"":M?" (improvement)":" (worse)"}`}}return s.jsx("div",{className:bi("fdp-metric-card",i&&`fdp-metric-card--${i}`,a&&`fdp-metric-card--status-${a}`,c&&"fdp-metric-card--loading",d&&"fdp-metric-card--error",p),style:g,role:"group","aria-labelledby":j,"data-component":"MetricCard",children:s.jsxs("div",{className:"fdp-metric-card__inner",children:[s.jsxs("div",{className:"fdp-metric-card__header",children:[s.jsx("h3",{id:j,className:"fdp-metric-card__label",children:e}),l&&s.jsx("div",{className:"fdp-metric-card__metadata",children:l})]}),s.jsxs("div",{className:"fdp-metric-card__content",children:[s.jsxs("div",{className:"fdp-metric-card__value-section",children:[s.jsx("div",{id:k,className:"fdp-metric-card__value",children:c?s.jsx("div",{className:"fdp-metric-card__skeleton","aria-hidden":"true",children:s.jsx("div",{className:"fdp-metric-card__skeleton-line fdp-metric-card__skeleton-line--value"})}):d?s.jsx("div",{className:"fdp-metric-card__error",role:"alert",children:d}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"fdp-metric-card__number",children:T}),n&&s.jsx("span",{className:"fdp-metric-card__unit",children:n})]})}),o&&!c&&!d&&s.jsx("div",{className:"fdp-metric-card__subtitle",children:o})]}),r&&!c&&!d&&s.jsx("div",{className:"fdp-metric-card__delta-section",children:s.jsxs("div",{id:$,"aria-label":P,className:bi("fdp-metric-card__delta",w&&`fdp-metric-card__delta--${w}`),children:[s.jsx("span",{className:"fdp-metric-card__delta-value",children:x}),r.period&&s.jsx("span",{className:"fdp-metric-card__delta-period",children:r.period})]})}),u&&u.length>0&&!c&&!d&&s.jsx("div",{className:"fdp-metric-card__trend","aria-hidden":"true"})]}),m&&!d&&s.jsx("div",{className:"fdp-metric-card__visual","aria-hidden":"true",children:m}),h&&r&&!r.ariaLabel&&!c&&!d&&s.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite",children:P})]})})};let ko=null;try{ko=require("@fergusbisset/nhs-fdp-design-system/dist/js/tokens.json")?.color?.["data-viz"]?.spc||null}catch{}const Oe=(e,t)=>{if(!ko)return t;const n=e.split(".");let r=ko;for(const i of n){if(r==null)break;r=r[i]}const a=r;return a==null?t:typeof a=="string"||typeof a=="number"?String(a):a.$value!=null?String(a.$value):a.value!=null?String(a.value):t},ki=()=>({start:Oe("gradient.stop.start-opacity","0.12"),mid:Oe("gradient.stop.mid-opacity","0.03"),end:Oe("gradient.stop.end-opacity","0"),triStart:Oe("gradient.stop.triangle-start-opacity",Oe("gradient.stop.start-opacity","0.12")),triMid:Oe("gradient.stop.triangle-mid-opacity",Oe("gradient.stop.mid-opacity","0.03")),triEnd:Oe("gradient.stop.triangle-end-opacity",Oe("gradient.stop.end-opacity","0"))});var Xt=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(Xt||{}),je=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(je||{}),Me=(e=>(e.Improvement="improvement",e.Concern="concern",e.Neither="neither",e.Suppressed="suppressed",e))(Me||{}),mt=(e=>(e.SinglePoint="single_point",e.TwoSigma="two_sigma",e.Shift="shift",e.Trend="trend",e))(mt||{});const Co=["single_point","two_sigma","shift","trend"],Ed=Co.reduce((e,t,n)=>(e[t]=n+1,e),{}),fv={single_point:"Single point beyond process limit",two_sigma:"Two of three beyond 2Ïƒ on one side",shift:"Sustained shift (run)",trend:"Monotonic trend"},hv={single_point:"point",two_sigma:"cluster",shift:"sustained",trend:"sustained"},Ci=Co.reduce((e,t,n)=>(e[t]={id:t,rank:n+1,label:fv[t],category:hv[t],participatesInRanking:!0},e),{});Co.map(e=>Ci[e]);var it=(e=>(e.Up="up",e.Down="down",e))(it||{}),_t=(e=>(e.SinglePointAbove="single_above",e.SinglePointBelow="single_below",e.TwoOfThreeAbove="two_of_three_above",e.TwoOfThreeBelow="two_of_three_below",e.FourOfFiveAbove="four_of_five_above",e.FourOfFiveBelow="four_of_five_below",e.ShiftHigh="shift_high",e.ShiftLow="shift_low",e.TrendIncreasing="trend_inc",e.TrendDecreasing="trend_dec",e.FifteenInnerThird="fifteen_inner_third",e))(_t||{}),Ze=(e=>(e.Pass="pass",e.Fail="fail",e.None="none",e))(Ze||{}),Et=(e=>(e.Shift="shift",e.Trend="trend",e.Point="point",e))(Et||{}),Ti=(e=>(e.Legacy="legacy",e.DirectionalFirst="directional_first",e))(Ti||{}),Bd=(e=>(e.None="none",e.SqlRankingV26a="sql_ranking_v2_6a",e))(Bd||{}),Wt=(e=>(e.Upwards="Upwards",e.Downwards="Downwards",e.Same="Same",e))(Wt||{}),To=(e=>(e.Sql="sql",e.Conflict="conflict",e))(To||{}),Qr=(e=>(e.ImprovementValueBeforePruning="improvementValueBeforePruning",e.ConcernValueBeforePruning="concernValueBeforePruning",e))(Qr||{});const br={singlePointUp:{tooltip:"Single point above upper control limit",narration:"Single point beyond a control limit"},singlePointDown:{tooltip:"Single point below lower control limit",narration:"Single point beyond a control limit"},twoOfThreeUp:{tooltip:"Two of three points beyond +2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},twoOfThreeDown:{tooltip:"Two of three points beyond -2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},fourOfFiveUp:{tooltip:"Four of five points beyond +1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},fourOfFiveDown:{tooltip:"Four of five points beyond -1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},shiftUp:{tooltip:"Shift: run of points above centre line",narration:"Shift (run on one side of mean)"},shiftDown:{tooltip:"Shift: run of points below centre line",narration:"Shift (run on one side of mean)"},trendUp:{tooltip:"Trend: consecutive increasing points",narration:"Trend (consecutive increases)"},trendDown:{tooltip:"Trend: consecutive decreasing points",narration:"Trend (consecutive decreases)"}};function Ni(e){if(!e)return[];const t=[];return e.specialCauseSinglePointUp&&t.push("singlePointUp"),e.specialCauseSinglePointDown&&t.push("singlePointDown"),e.specialCauseTwoOfThreeUp&&t.push("twoOfThreeUp"),e.specialCauseTwoOfThreeDown&&t.push("twoOfThreeDown"),e.specialCauseFourOfFiveUp&&t.push("fourOfFiveUp"),e.specialCauseFourOfFiveDown&&t.push("fourOfFiveDown"),e.specialCauseShiftUp&&t.push("shiftUp"),e.specialCauseShiftDown&&t.push("shiftDown"),e.specialCauseTrendUp&&t.push("trendUp"),e.specialCauseTrendDown&&t.push("trendDown"),t}function ji(e){switch(e){case Me.Improvement:return"Improvement signal";case Me.Concern:return"Concern signal";case Me.Neither:return"Common cause variation";case Me.Suppressed:return null;default:return null}}function Rd(e){switch(e){case Ze.Pass:return"Target met";case Ze.Fail:return"Target not met";default:return null}}function pv(e,t,n){if(e==null||!Number.isFinite(t)||t<=0)return null;const r=Math.abs((n-e)/t);return r<1?"Within 1Ïƒ":r<2?"Between 1â€“2Ïƒ":r<3?"Between 2â€“3Ïƒ":"Beyond 3Ïƒ"}const Ut={improvement:{token:"var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",hex:"#00B0F0"},concern:{token:"var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",hex:"#E46C0A"},neither:{token:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",hex:"#A6A6A6"},suppressed:{token:"var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",hex:"#490092"}};function Hd(e){return e?Ut[e]?.token??Ut.neither.token:Ut.neither.token}function mv(e){return e?Ut[e]?.hex??Ut.neither.hex:Ut.neither.hex}var Dn=(e=>(e.Pass="pass",e.Fail="fail",e.Uncertain="uncertain",e))(Dn||{});const gv={pass:"#00B0F0",fail:"#E46C0A",uncertain:"#A6A6A6"},yv={pass:"P",fail:"F",uncertain:"?"};var Ve=(e=>(e.HigherIsBetter="higher_is_better",e.LowerIsBetter="lower_is_better",e.ContextDependent="context_dependent",e))(Ve||{}),De=(e=>(e.Higher="higher",e.Lower="lower",e))(De||{}),wt=(e=>(e.Improving="improving",e.Deteriorating="deteriorating",e.No_Judgement="no_judgement",e.None="none",e))(wt||{}),Te=(e=>(e.SpecialCauseImproving="special_cause_improving",e.SpecialCauseDeteriorating="special_cause_deteriorating",e.CommonCause="common_cause",e.SpecialCauseNoJudgement="special_cause_no_judgement",e))(Te||{});const bv=e=>{const t=e.replace("#",""),n=parseInt(t.slice(0,2),16)/255,r=parseInt(t.slice(2,4),16)/255,a=parseInt(t.slice(4,6),16)/255,i=[n,r,a].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*i[0]+.7152*i[1]+.0722*i[2]<.55?"#ffffff":"#212b32"},Di={special_cause_deteriorating:{hex:Ut.concern.hex,judgement:"deteriorating",label:"Special Cause (Deteriorating)",description:"Deteriorating variation detected (special cause) relative to baseline."},special_cause_improving:{hex:Ut.improvement.hex,judgement:"improving",label:"Special Cause (Improving)",description:"Improving variation detected (special cause) relative to baseline."},common_cause:{hex:Ut.neither.hex,judgement:"none",label:"Common Cause",description:"Common cause variation only â€“ no special cause detected."},special_cause_no_judgement:{hex:Ut.suppressed.hex,judgement:"no_judgement",label:"Special Cause (No Judgement)",description:"Special cause detected without assigning improving/deteriorating judgement."}};Object.values(Di).forEach(e=>{e.text||(e.text=bv(e.hex))});const No=e=>Di[e],Mi=e=>Di[e].judgement||"none",Od={special:{higher:[{cx:77.5,cy:158.5},{cx:114,cy:175},{cx:150.5,cy:158.5},{cx:188,cy:125},{cx:225,cy:137}],lower:[{cx:77.5,cy:139.5},{cx:114,cy:124.5},{cx:150.5,cy:139.5},{cx:188,cy:175.5},{cx:224.5,cy:162}]},common:[{cx:76.5,cy:149.5},{cx:113,cy:179.5},{cx:149.5,cy:117},{cx:187,cy:171},{cx:223.5,cy:158}]};function _v(e,t){let n;return e==="common_cause"?n=Od.common:n=Od.special[t==="lower"?"lower":"higher"],n.map(r=>({...r}))}var Re=(e=>(e.Concern="concern",e.Improvement="improvement",e.NoJudgement="noJudgement",e.Common="common",e))(Re||{}),qn=(e=>(e.Classic="classic",e.Triangle="triangle",e.TriangleWithRun="triangleWithRun",e))(qn||{}),ea=(e=>(e.Direction="direction",e.Polarity="polarity",e))(ea||{});const zd=e=>{const t=()=>{globalThis.__spcIconDeprecationEmitted||(console.warn("[SPCVariationIcon] Deprecated payload shape detected. Migrate to { variationIcon, improvementDirection, specialCauseNeutral?, trend? }."),globalThis.__spcIconDeprecationEmitted=!0)};if(e.variationIcon!==void 0){const o=e;let l;o.improvementDirection!==void 0?l=o.improvementDirection===je.Up?Ve.HigherIsBetter:o.improvementDirection===je.Down?Ve.LowerIsBetter:Ve.ContextDependent:o.polarity&&(l=o.polarity);let u;switch(o.variationIcon){case Me.Improvement:u=Te.SpecialCauseImproving;break;case Me.Concern:u=Te.SpecialCauseDeteriorating;break;case Me.Neither:u=o.specialCauseNeutral?Te.SpecialCauseNoJudgement:Te.CommonCause;break;case Me.Suppressed:default:u=Te.SpecialCauseNoJudgement;break}let c=o.trend;return c||(u===Te.SpecialCauseImproving?c=l===Ve.LowerIsBetter?De.Lower:De.Higher:u===Te.SpecialCauseDeteriorating?c=l===Ve.LowerIsBetter?De.Higher:De.Lower:u===Te.SpecialCauseNoJudgement?o.highSideSignal&&!o.lowSideSignal?c=De.Higher:o.lowSideSignal&&!o.highSideSignal?c=De.Lower:c=De.Higher:c=De.Higher),{state:u,direction:c,polarity:l??Ve.ContextDependent}}if(e.state!==void 0){t();const o=e;let l=o.trend;return!l&&(o.state===Te.SpecialCauseImproving||o.state===Te.SpecialCauseDeteriorating)&&o.polarity&&(o.state===Te.SpecialCauseImproving?l=o.polarity===Ve.LowerIsBetter?De.Lower:De.Higher:l=o.polarity===Ve.LowerIsBetter?De.Higher:De.Lower),l||(o.state===Te.SpecialCauseImproving?l=De.Higher:o.state===Te.SpecialCauseDeteriorating?l=De.Lower:l=De.Higher),{state:o.state,direction:l,polarity:o.polarity??Ve.ContextDependent}}const n=e;t();const a={[wt.Improving]:Te.SpecialCauseImproving,[wt.Deteriorating]:Te.SpecialCauseDeteriorating,[wt.No_Judgement]:Te.SpecialCauseNoJudgement,[wt.None]:Te.CommonCause}[n.judgement];let i;return n.judgement===wt.Improving?i=n.polarity===Ve.LowerIsBetter?De.Lower:De.Higher:n.judgement===wt.Deteriorating?i=n.polarity===Ve.LowerIsBetter?De.Higher:De.Lower:i=n.trend??De.Higher,{state:a,direction:i,polarity:n.polarity}};function Wd(e,t){const{state:n,direction:r,polarity:a}=zd(e),i=Mi(n),o=r===De.Higher?"above":"below",l=r===De.Higher?"upwards":"downwards",u=(()=>{switch(a){case Ve.HigherIsBetter:return"For this measure, higher values are better.";case Ve.LowerIsBetter:return"For this measure, lower values are better.";default:return"Direction of improvement is context dependent."}})();return[(()=>{switch(i){case wt.Improving:return`Special cause improvement: recent data show a sustained run ${o} the mean (unlikely due to random variation).`;case wt.Deteriorating:return`Special cause deterioration: recent data show a sustained run ${o} the mean (unlikely due to random variation).`;case wt.No_Judgement:return`Special cause detected (no value judgement): recent data show a change in level, trending ${l}.`;case wt.None:default:return"Common cause variation: points vary randomly around the mean; no special cause detected."}})(),u,null,null,null,null,null].filter(Boolean).join(" ")}const jo=(e,t,n,r,a,i)=>s.jsxs("defs",{children:[r&&s.jsxs("filter",{id:t,filterUnits:"objectBoundingBox",children:[s.jsx("feGaussianBlur",{stdDeviation:"3"}),s.jsx("feOffset",{dx:"0",dy:"15",result:"blur"}),s.jsx("feFlood",{floodColor:"rgb(150,150,150)",floodOpacity:"1"}),s.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),a&&s.jsx("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:i.map(o=>s.jsx("stop",{offset:o.offset,stopColor:e,stopOpacity:parseFloat(o.opacity)},o.offset))})]}),$i=({data:e,size:t=44,ariaLabel:n,showLetter:r=!0,dropShadow:a=!0,gradientWash:i=!1,variant:o=qn.Classic,runLength:l=0,letterMode:u=ea.Polarity,letterOverride:c,...d})=>{const f=E.useId(),p=E.useId(),{start:g,mid:_,end:h,triStart:m,triMid:y,triEnd:C}=ki(),{state:j,direction:k,polarity:$}=E.useMemo(()=>zd(e),[e]),N=E.useMemo(()=>No(j),[j]),T=E.useMemo(()=>Mi(j),[j]),w=T===wt.Improving||T===wt.Deteriorating;let x="";r&&w&&(u===ea.Polarity?$===Ve.HigherIsBetter?x="H":$===Ve.LowerIsBetter?x="L":x="":x=k===De.Higher?"H":"L"),c!==void 0&&(x=c);const P=j!==Te.CommonCause,D=j===Te.SpecialCauseNoJudgement,v=Oe("common-cause","#A6A6A6"),F=P?N.hex:v,M=E.useMemo(()=>_v(j,k),[j,k]),S=n||`${N.label}${x?k===De.Higher?" â€“ Higher":" â€“ Lower":""}`,I=Wd(e);if(o===qn.TriangleWithRun){const W=[[150,90],[100,190],[200,190]],z=[[150,140+100/2],[150-100/2,140-100/2],[150+100/2,140-100/2]];let le=null;j===Te.SpecialCauseImproving||j===Te.SpecialCauseDeteriorating?le=s.jsx("polygon",{points:(k===De.Higher?W:z).map(A=>A.join(",")).join(" "),fill:N.hex,stroke:N.hex,strokeWidth:6,transform:k===De.Higher?"translate(0, -8)":"translate(0, 15)"}):j===Te.SpecialCauseNoJudgement&&(le=s.jsx("polygon",{points:k===De.Higher?W.map(A=>A.join(",")).join(" "):z.map(A=>A.join(",")).join(" "),fill:N.hex,stroke:N.hex,strokeWidth:6,transform:k===De.Higher?"translate(0,-7)":"translate(0,14)"}));const V=Math.max(0,Math.min(5,Math.floor(l||0))),ue=j===Te.CommonCause?160:k===De.Higher?220:70,we=10,fe=26,he=150-2*fe,ne=j===Te.SpecialCauseImproving?Oe("improvement","#00B0F0"):j===Te.SpecialCauseDeteriorating?Oe("concern","#E46C0A"):v,oe=Array.from({length:5}).map((A,B)=>{const ae=(j===Te.SpecialCauseImproving||j===Te.SpecialCauseDeteriorating)&&B>=5-V?ne:v;return s.jsx("circle",{cx:he+B*fe,cy:ue,r:we,fill:ae,stroke:ae,strokeWidth:1},B)}),pe=jo(N.hex,f,p,a,i,[{offset:"0%",opacity:m},{offset:"75%",opacity:y},{offset:"100%",opacity:C}]),K=j===Te.CommonCause||k===De.Higher?"translate(0,-10)":"translate(0,25)";return s.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":S,"aria-description":I,...d,children:[pe,s.jsx("circle",{stroke:"none",fill:i?`url(#${p})`:"#ffffff",...a?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("circle",{stroke:N.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),s.jsxs("g",{transform:K,children:[le,x&&s.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:64,x:"150",y:k===De.Higher?155:145,textAnchor:"middle",dominantBaseline:"middle",children:x}),oe]})]})}if(o===qn.Triangle){const W=[[150,75],[75,225],[225,225]],z=[[150,150+150/2],[150-150/2,150-150/2],[150+150/2,150-150/2]],le=[[150-150/2,150+150/2],[150+150/2,150+150/2]];let V=null;j===Te.SpecialCauseImproving||j===Te.SpecialCauseDeteriorating?V=s.jsx("polygon",{points:(k===De.Higher?W:z).map(we=>we.join(",")).join(" "),fill:N.hex,stroke:N.hex,strokeWidth:8,transform:k===De.Higher?"translate(0, -10)":"translate(0, 10)"}):j===Te.SpecialCauseNoJudgement?V=s.jsx("polygon",{points:k===De.Higher?W.map(we=>we.join(",")).join(" "):z.map(we=>we.join(",")).join(" "),fill:N.hex,stroke:N.hex,strokeWidth:8,transform:k===De.Higher?"translate(0, -15)":"translate(0, 15)"}):j===Te.CommonCause&&(V=s.jsx("line",{x1:le[0][0],y1:le[0][1],x2:le[1][0],y2:le[1][1],stroke:N.hex,strokeWidth:32,strokeLinecap:"square",transform:"translate(0, -75)"}));const ue=jo(N.hex,f,p,a,i,[{offset:"0%",opacity:m},{offset:"65%",opacity:y},{offset:"100%",opacity:C}]);return s.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":S,"aria-description":I,...d,children:[ue,s.jsx("circle",{stroke:"none",fill:i?`url(#${p})`:"#ffffff",...a?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("circle",{stroke:N.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),V,x&&(j===Te.SpecialCauseImproving||j===Te.SpecialCauseDeteriorating)&&s.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:100,x:"150",y:k===De.Higher?"170":"140",textAnchor:"middle",dominantBaseline:"middle",children:x})]})}const L=jo(N.hex,f,p,a,i,[{offset:"0%",opacity:g},{offset:"65%",opacity:_},{offset:"100%",opacity:h}]);return s.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":S,"aria-description":I,...d,children:[L,s.jsx("circle",{stroke:"none",fill:i?`url(#${p})`:"#ffffff",...a?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("circle",{stroke:N.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),x&&s.jsx("text",{fill:N.hex,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,transform:"translate(86.67, 54) scale(0.5, 0.5)",textAnchor:"end",children:s.jsx("tspan",{x:"120",y:k===De.Lower?"340":"155",children:x})}),D?s.jsx("path",{"aria-hidden":"true",fillRule:"evenodd",stroke:"none",fill:N.hex,...k===De.Lower?{transform:"rotate(90 150 150)"}:{transform:"translate(-5 0) rotate(0 150 150)"},d:"M 90.26,185.42 L 149.31,126.37 127.44,104.51 209.81,90.66 195.96,173.02 174.09,151.16 115.05,210.2 90.26,185.42 Z M 90.26,185.42"}):s.jsxs(s.Fragment,{children:[M.length===5&&s.jsx("path",{"aria-hidden":"true",fill:"none",stroke:v,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9,d:`M ${M.map(re=>`${re.cx} ${re.cy}`).join(" L ")}`}),M.map((re,q)=>{const W=q>=M.length-2&&P?F:v,z=W;return s.jsx("circle",{stroke:z,strokeWidth:2,strokeMiterlimit:10,fill:W,cx:re.cx,cy:re.cy,r:16},q)})]})]})};$i.displayName="SPCVariationIcon";const xv={xs:{height:24,pointR:2,stroke:1},sm:{height:32,pointR:3,stroke:1},md:{height:44,pointR:4,stroke:1}};function vv(e,t){return!t||e.length<=t?e:e.slice(e.length-t)}function wv(e){const t=e.filter(o=>typeof o.value=="number");if(!t.length)return{mean:null,latestValue:null,latestIndex:null};const n=t.reduce((o,l)=>o+l.value,0)/t.length,r=[...e].reverse().findIndex(o=>o.value!=null),a=r>=0?e.length-1-r:null,i=a!=null?e[a].value:null;return{mean:n,latestValue:i,latestIndex:a}}function Sv(e){switch(e){case Te.SpecialCauseImproving:return Oe("improvement","#00B0F0");case Te.SpecialCauseDeteriorating:return Oe("concern","#E46C0A");case Te.SpecialCauseNoJudgement:return Oe("no-judgement","#490092");case Te.CommonCause:return Oe("common-cause","#A6A6A6");default:return Oe("common-cause","#A6A6A6")}}const Ud=({data:e,windowSize:t,minPointsForSignals:n=13,showMean:r=!0,showLimits:a=!0,showLimitBand:i=!0,showInnerBands:o=!1,showLatestMarker:l=!0,showStateGlyph:u=!0,variationState:c,autoClassify:d=!1,metricImprovement:f,gradientWash:p=!1,size:g="sm",ariaLabel:_,className:h,onPointClick:m,onClassification:y,maxPoints:C,thinningStrategy:j="stride",colorPointsBySignal:k=!0,centerLine:$,controlLimits:N,sigmaBands:T,pointSignals:w,pointNeutralSpecialCause:x})=>{const P=f,D=E.useMemo(()=>vv(e,t),[e,t]),v=E.useMemo(()=>wv(D),[D]),F=xv[g],M=Math.max(D.length*6,60),S=F.height,I=4,L=2,re=E.useMemo(()=>(e?.length??0)-(D?.length??0),[e?.length,D?.length]),O=D.filter(H=>H.value!=null).map(H=>H.value),W=$??v.mean,z=E.useMemo(()=>{if(W==null)return null;const H=[];if(T?.upperOne!=null&&H.push(Math.abs(T.upperOne-W)),T?.lowerOne!=null&&H.push(Math.abs(W-T.lowerOne)),H.length)return H.reduce((J,ee)=>J+ee,0)/H.length;const Y=[];return N?.upper!=null&&Y.push(Math.abs(N.upper-W)/3),N?.lower!=null&&Y.push(Math.abs(W-N.lower)/3),Y.length?Y.reduce((J,ee)=>J+ee,0)/Y.length:null},[T?.upperOne,T?.lowerOne,N?.upper,N?.lower,W]),le=E.useMemo(()=>{if(z!=null||!O.length||W==null||O.length<2)return null;const H=[];for(let J=1;J<O.length;J++){const ee=O[J-1],R=O[J];ee!=null&&R!=null&&H.push(Math.abs(R-ee))}return H.length?H.reduce((J,ee)=>J+ee,0)/H.length/1.128:null},[z,O.join(","),W]),V=z??le,ue=E.useMemo(()=>{if(!a)return null;if(N)return N;if(W==null||V==null)return null;const H=3*V;return{lower:W-H,upper:W+H}},[a,W,V,N?.lower,N?.upper]),we=E.useMemo(()=>{if(c)return{state:c,firedRules:[],mean:v.mean,stdDev:V};if(!d||!V||V===0||W==null||v.latestValue==null)return{state:Te.CommonCause,firedRules:[],mean:v.mean,stdDev:V};const H=[],Y=v.latestValue,J=N?.upper??(V!=null&&W!=null?W+3*V:null),ee=N?.lower??(V!=null&&W!=null?W-3*V:null);J!=null&&ee!=null&&(Y>J||Y<ee)&&H.push("point-beyond-3sigma");const R=O.slice(-8);if(R.length===8){const U=R.every(ge=>ge>W),ie=R.every(ge=>ge<W);(U||ie)&&H.push("eight-point-run")}const te=O.slice(-5);if(te.length===5){const U=te.every((Se,Ce,_e)=>Ce===0||Se>=_e[Ce-1]),ie=te.every((Se,Ce,_e)=>Ce===0||Se<=_e[Ce-1]),ge=T?.upperOne??(V!=null&&W!=null?W+V:null),ce=T?.lowerOne??(V!=null&&W!=null?W-V:null);U&&ge!=null&&te[te.length-1]>ge&&H.push("five-point-trend"),ie&&ce!=null&&te[te.length-1]<ce&&H.push("five-point-trend")}const se=O.slice(-3);if(se.length===3&&(V!=null||T)){const U=T?.upperTwo??(W!=null&&V!=null?W+2*V:null),ie=T?.lowerTwo??(W!=null&&V!=null?W-2*V:null);if(U!=null&&ie!=null){const ge=se.filter(Se=>Se>U).length,ce=se.filter(Se=>Se<ie).length;ge>=2&&H.push("two-of-three-near-limit"),ce>=2&&H.push("two-of-three-near-limit")}}let X=Te.CommonCause;if(H.includes("point-beyond-3sigma")?X=Y>W?Te.SpecialCauseImproving:Te.SpecialCauseDeteriorating:(H.includes("eight-point-run")||H.includes("five-point-trend")||H.includes("two-of-three-near-limit"))&&(X=O[O.length-1]>W?Te.SpecialCauseImproving:Te.SpecialCauseDeteriorating),d&&!c&&H.length===1&&H[0]==="point-beyond-3sigma"){const U=O.slice(-9,-1);if(U.length>=5){const ie=U.filter(ce=>ce>W).length,ge=U.filter(ce=>ce<W).length;ie>0&&ge>0&&(X=Te.SpecialCauseNoJudgement)}}return{state:X,firedRules:H,mean:W,stdDev:V,side:v.latestValue!=null&&W!=null?v.latestValue>W?"above":"below":void 0}},[c,d,V,W,v.latestValue,O.join(",")]);E.useEffect(()=>{d&&!c&&y&&y(we)},[we,d,c,y]);const fe=we.state,he=Sv(fe),ne=H=>{const Y=D.filter(te=>te.value!=null);if(!Y.length)return S/2;const J=Y.map(te=>te.value);ue&&(ue.lower!=null&&J.push(ue.lower),ue.upper!=null&&J.push(ue.upper));const ee=Math.min(...J),R=Math.max(...J);return ee===R?S/2:S-(H-ee)/(R-ee)*(S-L*2)-L},oe=E.useMemo(()=>{if(!C||D.length<=C)return D.map((se,X)=>X);if(j==="stride"){const se=Math.max(2,C),X=(D.length-1)/(se-1),U=new Set;for(let ie=0;ie<se;ie++)U.add(Math.round(ie*X));return U.add(D.length-1),Array.from(U).sort((ie,ge)=>ie-ge)}const H=D.map((se,X)=>({i:X,v:se.value}));function Y(se,X,U){const ie=se.i,ge=se.v??0,ce=X.i,Se=X.v??0,Ce=U.i,_e=U.v??0,Ie=Math.abs((_e-Se)*ie-(Ce-ce)*ge+Ce*Se-_e*ce),Be=Math.hypot(_e-Se,Ce-ce);return Be===0?0:Ie/Be}function J(se,X){if(se.length<=2)return se;let U=-1,ie=-1;for(let ge=1;ge<se.length-1;ge++){const ce=Y(se[ge],se[0],se[se.length-1]);ce>U&&(U=ce,ie=ge)}if(U>X){const ge=J(se.slice(0,ie+1),X),ce=J(se.slice(ie),X);return[...ge.slice(0,-1),...ce]}return[se[0],se[se.length-1]]}let ee=.1,R=H;for(let se=0;se<8&&(R=J(H,ee),!(R.length<=C));se++)ee*=1.6;const te=new Set(R.map(se=>se.i));return te.add(0),te.add(D.length-1),Array.from(te).sort((se,X)=>se-X)},[D,C,j]),pe=E.useMemo(()=>oe.map(H=>D[H]),[oe,D]),K=E.useMemo(()=>{let H="";return pe.forEach((Y,J)=>{if(Y.value==null)return;const ee=ne(Y.value),R=J/(pe.length-1||1)*(M-I*2)+I;H+=H?` L ${R} ${ee}`:`M ${R} ${ee}`}),H},[pe,M]),A=v.latestIndex??-1,B=ue,G=ki(),ae=E.useMemo(()=>`spc-spark-wash-${Math.random().toString(36).slice(2)}`,[D.length,p]),Q=D.length>=(n||0),de=_||"SPC sparkline",ye=(()=>{if(!fe)return;const H=P===je.Up?Ve.HigherIsBetter:P===je.Down?Ve.LowerIsBetter:Ve.ContextDependent,Y={variationIcon:fe===Te.SpecialCauseImproving?"improvement":fe===Te.SpecialCauseDeteriorating?"concern":fe===Te.SpecialCauseNoJudgement?"none":"neither",trend:P===je.Up?De.Higher:De.Lower,polarity:H};try{return Wd(Y)}catch{return}})(),me=E.useMemo(()=>{if(!Q)return 10;const H=[...D].reverse().filter(J=>J.value!=null).slice(0,6).map(J=>ne(J.value));return H.length&&H.reduce((J,ee)=>J+ee,0)/H.length<S/2?S:10},[D,Q,S]);return s.jsxs("svg",{role:"img","aria-label":de,"aria-description":ye,width:M,height:S,className:h,viewBox:`0 0 ${M} ${S}`,children:[p&&s.jsxs(s.Fragment,{children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:ae,x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:he,stopOpacity:Number(G.start)}),s.jsx("stop",{offset:"60%",stopColor:he,stopOpacity:Number(G.mid)}),s.jsx("stop",{offset:"100%",stopColor:he,stopOpacity:Number(G.end)})]})}),s.jsx("rect",{x:0,y:0,width:M,height:S,fill:`url(#${ae})`})]}),B&&B.lower!=null&&B.upper!=null&&s.jsxs(s.Fragment,{children:[i&&s.jsx("rect",{x:0,y:Math.min(ne(B.upper),ne(B.lower)),width:M,height:Math.abs(ne(B.upper)-ne(B.lower)),fill:he,fillOpacity:.08}),s.jsx("line",{x1:0,x2:M,y1:ne(B.lower),y2:ne(B.lower),stroke:he,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),s.jsx("line",{x1:0,x2:M,y1:ne(B.upper),y2:ne(B.upper),stroke:he,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),T&&o&&s.jsxs(s.Fragment,{children:[T.lowerTwo!=null&&s.jsx("line",{x1:0,x2:M,y1:ne(T.lowerTwo),y2:ne(T.lowerTwo),stroke:he,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1}),T.lowerOne!=null&&s.jsx("line",{x1:0,x2:M,y1:ne(T.lowerOne),y2:ne(T.lowerOne),stroke:he,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),T.upperOne!=null&&s.jsx("line",{x1:0,x2:M,y1:ne(T.upperOne),y2:ne(T.upperOne),stroke:he,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),T.upperTwo!=null&&s.jsx("line",{x1:0,x2:M,y1:ne(T.upperTwo),y2:ne(T.upperTwo),stroke:he,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1})]})]}),r&&v.mean!=null&&s.jsx("line",{x1:0,x2:M,y1:ne(v.mean),y2:ne(v.mean),stroke:Oe("common-cause","#A6A6A6"),strokeWidth:1,strokeDasharray:"2,2"}),s.jsx("path",{d:K,fill:"none",stroke:Oe("common-cause","#A6A6A6"),strokeWidth:F.stroke,strokeLinecap:"round"}),oe.map((H,Y)=>{const J=D[H];if(!J||J.value==null)return null;const ee=ne(J.value),R=Y/(pe.length-1||1)*(M-I*2)+I,se=(H===A&&l?F.pointR+1:F.pointR)-.5;let X=Oe("common-cause","#A6A6A6");if(k){const U=w?.[re+H];if(U==="improvement")X=Oe("improvement","#00B0F0");else if(U==="concern")X=Oe("concern","#E46C0A");else if(x?.[re+H])X=Oe("no-judgement","#490092");else if(W!=null){const ge=J.value,ce=N?.upper??(V!=null?W+3*V:null),Se=N?.lower??(V!=null?W-3*V:null);ce!=null&&ge>ce?X=Oe("improvement","#00B0F0"):Se!=null&&ge<Se?X=Oe("concern","#E46C0A"):X=Oe("common-cause","#A6A6A6")}else X=Oe("common-cause","#A6A6A6")}return s.jsx("circle",{cx:R,cy:ee,r:se,fill:X,stroke:"none",strokeWidth:0,onClick:m?()=>m(H,J):void 0,style:m?{cursor:"pointer"}:void 0,"data-index":H,"data-signal-colour":k?X:void 0},H)}),u&&Q&&fe&&fe!==Te.CommonCause&&P&&s.jsx("text",{x:M-4,y:me,textAnchor:"end",fontSize:12,fontWeight:"bold",fill:he,"data-glyph-pos":me<S/2?"top":"bottom",children:P===je.Up?"H":"L"})]})};Ud.displayName="SPCSpark";const ke=e=>typeof e=="number"&&Number.isFinite(e),kv=e=>e.reduce((t,n)=>t+n,0),Kt=e=>e.length?kv(e)/e.length:NaN;function Vd(e,t){const n=new Array(e.length).fill(null);let r=null;for(let a=0;a<e.length;a++){const i=e[a];if(!t[a]&&ke(i)){if(r!==null){const o=e[r];n[a]=ke(o)?Math.abs(i-o):null}r=a}}return n}function Gd(e,t){const n=e.filter(i=>ke(i));if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=Kt(n),a=3.267*r;if(t){const i=n.filter(o=>o<=a);i.length&&i.length!==n.length&&(r=Kt(i),a=3.267*r)}return{mrMean:r,mrUcl:a}}function Cv(e,t){if(!ke(e)||!ke(t))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=2.66,r=2/3*n,a=1/3*n;return{upperProcessLimit:e+n*t,lowerProcessLimit:e-n*t,upperTwoSigma:e+r*t,lowerTwoSigma:e-r*t,upperOneSigma:e+a*t,lowerOneSigma:e-a*t}}const Tv=.2777,Nv=3.6,jv=e=>ke(e)&&e>=0?Math.pow(e,Tv):null,Xn=e=>ke(e)&&e>=0?Math.pow(e,Nv):null;function Dv(e,t){return!(e>0&&e<1)||!(t>0&&t<1)?NaN:Math.log(1-e)/Math.log(1-t)}const _r={one:{low:.1586552539,high:.8413447461},two:{low:.0227501319,high:.9772498681},three:{low:.001349898,high:.998650102}};function Mv(e){if(!ke(e)||e<0)return{cl:null,lcl:null,ucl:null,oneLow:null,oneHigh:null,twoLow:null,twoHigh:null};const t=1/(e+1),n=d=>Dv(d,t)-1,r=n(.5),a=Math.max(0,n(_r.three.low)),i=n(_r.three.high),o=Math.max(0,n(_r.one.low)),l=n(_r.one.high),u=Math.max(0,n(_r.two.low)),c=n(_r.two.high);return{cl:r,lcl:a,ucl:i,oneLow:o,oneHigh:l,twoLow:u,twoHigh:c}}function $v(e,t,n){const r=e.map(w=>ke(w)?jv(w):null),a=Vd(r,t),{mrMean:i}=Gd(a,!!n),o=r.filter((w,x)=>!t[x]&&ke(w)),l=o.length?Kt(o):NaN;if(!ke(l)||!ke(i))return{center:null,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null,mr:a,mrMean:null,mrUcl:null};const u=2.66,c=2/3*u,d=1/3*u,f=l+u*i,p=l-u*i,g=l+c*i,_=l-c*i,h=l+d*i,m=l-d*i,y=Xn(l),C=Xn(f),j=p<=0?null:Xn(p),k=Xn(h),$=m<=0?null:Xn(m),N=Xn(g),T=_<=0?null:Xn(_);return{center:y??null,upperProcessLimit:C??null,lowerProcessLimit:j??null,upperTwoSigma:N??null,lowerTwoSigma:T??null,upperOneSigma:k??null,lowerOneSigma:$??null,mr:a,mrMean:i,mrUcl:ke(i)?3.267*i:null}}function Iv(e){const{metricImprovement:t,capabilityMode:n,value:r,mean:a,upperProcessLimit:i,lowerProcessLimit:o,target:l}=e,u=c=>typeof c=="number"&&Number.isFinite(c);return!u(r)||a===null||!u(l)?Ze.None:n&&u(i)&&u(o)?t===je.Up?u(o)&&o>l?Ze.Pass:u(i)&&i<l?Ze.Fail:Ze.None:t===je.Down?u(i)&&i<l?Ze.Pass:u(o)&&o>l?Ze.Fail:Ze.None:Ze.None:t===je.Down?r<=l?Ze.Pass:Ze.Fail:t===je.Up?r>=l?Ze.Pass:Ze.Fail:Ze.None}function Pv(e,t){const{W:n,minGap:r,minDeltaSigma:a,scoreThreshold:i,isShiftUpAt:o,isShiftDownAt:l,isTrendUpAt:u,isTrendDownAt:c,isSingleUpAt:d,isSingleDownAt:f}=t,p=[];let g=0;for(let _=0;_<e.length;_++){const h=e[_];_>0&&e[_-1].partitionId!==h.partitionId&&(g=_);const m=_>0&&o(_-1),y=_>0&&l(_-1),C=_>0&&u(_-1),j=_>0&&c(_-1),k=_>0&&d(_-1),$=_>0&&f(_-1),N=o(_),T=l(_),w=u(_),x=c(_),P=d(_),D=f(_),v=[];N&&!m&&v.push({reason:Et.Shift,index:_}),T&&!y&&v.push({reason:Et.Shift,index:_}),w&&!C&&v.push({reason:Et.Trend,index:_}),x&&!j&&v.push({reason:Et.Trend,index:_}),P&&!k&&v.push({reason:Et.Point,index:_}),D&&!$&&v.push({reason:Et.Point,index:_});for(const F of v){if(F.index-g<r)continue;const M=Math.max(0,F.index-n),S=F.index-1;if(S-M+1<n)continue;const I=F.index,L=F.index+n-1;if(L>=e.length)continue;const re=e.slice(M,S+1).map(K=>K.value).filter(K=>typeof K=="number"&&Number.isFinite(K)),q=e.slice(I,L+1).map(K=>K.value).filter(K=>typeof K=="number"&&Number.isFinite(K));if(re.length<n||q.length<n)continue;const O=e[F.index];let W=null;if(typeof O.upperProcessLimit=="number"&&typeof O.mean=="number"){const K=O.upperProcessLimit-O.mean;K>0&&(W=K/3)}if(!W||W<=0)continue;const z=Kt(re),le=Kt(q),V=le-z;if(Math.abs(V)<a*W)continue;const we=e.slice(I,L+1).filter(K=>K.variationIcon===Me.Concern).length;if(we>1)continue;const fe=K=>{const A=Kt(K);return K.length?K.reduce((B,G)=>B+(G-A)*(G-A),0)/K.length:0},he=fe(re),ne=fe(q);let oe=F.reason===Et.Shift?90:F.reason===Et.Trend?70:60;if(ne<he&&(oe+=10),oe-=we*15,oe<i)continue;const pe=p.find(K=>K.index===F.index);if(pe){const K=A=>A===Et.Shift?3:A===Et.Trend?2:1;(K(F.reason)>K(pe.reason)||oe>pe.score)&&(pe.reason=F.reason,pe.score=oe,pe.deltaMean=V,pe.oldMean=z,pe.newMean=le,pe.window=[I,L])}else p.push({index:F.index,reason:F.reason,score:oe,deltaMean:V,oldMean:z,newMean:le,window:[I,L]})}}return p.sort((_,h)=>_.index-h.index),p}function Do(){const e=globalThis;if(typeof e.__SPC_PHASE4_STRICT<"u")return!!e.__SPC_PHASE4_STRICT;if(typeof process<"u"){const t=process?.env?.SPC_PHASE4_STRICT;if(typeof t<"u"){const n=String(t).toLowerCase();if(n==="1"||n==="true")return!0;if(n==="0"||n==="false")return!1}}return!0}var Mn=(e=>(e.Info="info",e.Warning="warning",e.Error="error",e))(Mn||{}),Yd=(e=>(e.Config="config",e.Data="data",e.Limits="limits",e.SpecialCause="special_cause",e.Baseline="baseline",e.Logic="logic",e.Target="target",e.Ghost="ghost",e.Partition="partition",e))(Yd||{}),qd=(e=>(e.UnknownChartType="unknown_chart_type",e.InsufficientPointsGlobal="insufficient_points_global",e.VariationConflictRow="variation_conflict_row",e.NullValuesExcluded="null_values_excluded",e.TargetIgnoredRareEvent="target_ignored_rare_event",e.GhostRowsRareEvent="ghost_rows_rare_event",e.InsufficientPointsPartition="insufficient_points_partition",e.BaselineWithSpecialCause="baseline_with_special_cause",e.PartitionCapApplied="partition_cap_applied",e.GlobalCapApplied="global_cap_applied",e))(qd||{});function Fv(e){const t=[],n=[];e.specialCauseSinglePointUp&&t.push(mt.SinglePoint),e.specialCauseSinglePointDown&&n.push(mt.SinglePoint),e.specialCauseTwoOfThreeUp&&t.push(mt.TwoSigma),e.specialCauseTwoOfThreeDown&&n.push(mt.TwoSigma),e.specialCauseShiftUp&&t.push(mt.Shift),e.specialCauseShiftDown&&n.push(mt.Shift),e.specialCauseTrendUp&&t.push(mt.Trend),e.specialCauseTrendDown&&n.push(mt.Trend);const r=t.reduce((i,o)=>Math.max(i,Ci[o].rank),0),a=n.reduce((i,o)=>Math.max(i,Ci[o].rank),0);return{upRules:t,downRules:n,upMax:r,downMax:a,hasUp:t.length>0,hasDown:n.length>0}}function Lv(e){const t=[];let n=[];for(const r of e)r.baseline&&n.length&&(t.push(n),n=[]),n.push(r);return n.length&&t.push(n),t}function Av(e,t,n){const r=t.autoRecalculateShiftLength||t.specialCauseShiftPoints||6;if(e.length<r*2)return;const a=e.map((d,f)=>({idx:f,value:d.value})).filter(d=>ke(d.value));if(a.length<r*2)return;const i=n===je.Up||n===je.Neither,o=n===je.Down;function l(d,f){const p=a.slice(d,f).map(g=>g.value);return p.length?Kt(p):NaN}let u=null;if(a.length>1){const d=[];for(let p=1;p<a.length;p++)d.push(Math.abs(a[p].value-a[p-1].value));const f=Kt(d);ke(f)&&f>0&&(u=f*(2.66/3))}if(!u||u<=0)return;const c=t.autoRecalculateDeltaSigma??.5;for(let d=r;d<=a.length-r;d++){const f=d-r,p=l(f,d),g=l(d,d+r);if(!ke(p)||!ke(g))continue;const h=(g-p)/u;if(!(i?h>=c:o?-h>=c:Math.abs(h)>=c))continue;const y=a.slice(d,d+r).map(k=>k.value);if(!(i?y.every(k=>k>p):o?y.every(k=>k<p):y.every(k=>i?k>p:k<p)))continue;const j=a[d].idx;e[j].baseline||(e[j].baseline=!0);return}}function Xd(e){if(!e)return{};const t=e,n=e,r=n.rules??{},a=n.precedence??{},i=n.thresholds??{},o=n.warnings??{},l=n.rareEvent??{},u=n.capability??{},c=n.grace??{},d=n.baselineSuggest??{},f=n.autoRecalc??{},p=c.emergingEnabled??n.emergingGraceEnabled??t.emergingGraceEnabled??t.emergingDirectionGrace,g=r.collapseWeakerClusterRules??n.collapseWeakerClusterRules??t.collapseWeakerClusterRules??t.collapseClusterRules;if(Do()){if(t.emergingDirectionGrace!==void 0)throw new Error("[spc][phase4] emergingDirectionGrace is no longer supported. Use settings.grace.emergingEnabled.");if(t.collapseClusterRules!==void 0)throw new Error("[spc][phase4] collapseClusterRules is no longer supported. Use settings.rules.collapseWeakerClusterRules.")}const _=globalThis;!Do()&&t.emergingDirectionGrace!==void 0&&n.emergingGraceEnabled===void 0&&c.emergingEnabled===void 0&&!_.__spc_warn_emergingDirectionGrace&&(_.__spc_warn_emergingDirectionGrace=!0,console.warn("[spc] emergingDirectionGrace is deprecated; use grace.emergingEnabled")),!Do()&&t.collapseClusterRules!==void 0&&r.collapseWeakerClusterRules===void 0&&n.collapseWeakerClusterRules===void 0&&!_.__spc_warn_collapseClusterRules&&(_.__spc_warn_collapseClusterRules=!0,console.warn("[spc] collapseClusterRules is deprecated; use rules.collapseWeakerClusterRules"));const h=C=>{const j={};for(const k of Object.keys(C)){const $=C[k];$!==void 0&&(j[k]=$)}return j},m=h({excludeMovingRangeOutliers:l.excludeMovingRangeOutliers??t.excludeMovingRangeOutliers,specialCauseShiftPoints:r.shiftPoints??t.specialCauseShiftPoints,specialCauseTrendPoints:r.trendPoints??t.specialCauseTrendPoints,enableFourOfFiveRule:r.fourOfFiveEnabled??t.enableFourOfFiveRule,enableFifteenInInnerThirdRule:r.fifteenInnerThirdEnabled??t.enableFifteenInInnerThirdRule,collapseWeakerClusterRules:g??t.collapseWeakerClusterRules,precedenceStrategy:a.strategy??t.precedenceStrategy,conflictPrecedenceMode:a.conflictMode??t.conflictPrecedenceMode,minimumPoints:i.minimumPoints??t.minimumPoints,minimumPointsPartition:i.minimumPointsPartition??t.minimumPointsPartition,maximumPointsPartition:i.maximumPointsPartition??t.maximumPointsPartition,maximumPoints:i.maximumPoints??t.maximumPoints,transitionBufferPoints:i.transitionBufferPoints??t.transitionBufferPoints,minimumPointsWarning:o.minimumPointsWarning??t.minimumPointsWarning,pointConflictWarning:o.pointConflictWarning??t.pointConflictWarning,variationIconConflictWarning:o.variationIconConflictWarning??t.variationIconConflictWarning,nullValueWarning:o.nullValueWarning??t.nullValueWarning,targetSuppressedWarning:o.targetSuppressedWarning??t.targetSuppressedWarning,ghostOnRareEventWarning:o.ghostOnRareEventWarning??t.ghostOnRareEventWarning,partitionSizeWarnings:o.partitionSizeWarnings??t.partitionSizeWarnings,baselineSpecialCauseWarning:o.baselineSpecialCauseWarning??t.baselineSpecialCauseWarning,maximumPointsWarnings:o.maximumPointsWarnings??t.maximumPointsWarnings,assuranceCapabilityMode:u.assuranceCapabilityMode??t.assuranceCapabilityMode,emergingGraceEnabled:p,emergingDirectionGrace:p,baselineSuggest:d.enabled??t.baselineSuggest,baselineSuggestMinDeltaSigma:d.minDeltaSigma??t.baselineSuggestMinDeltaSigma,baselineSuggestStabilityPoints:d.stabilityPoints??t.baselineSuggestStabilityPoints,baselineSuggestMinGap:d.minGap??t.baselineSuggestMinGap,baselineSuggestScoreThreshold:d.scoreThreshold??t.baselineSuggestScoreThreshold,autoRecalculateAfterShift:f.enabled??t.autoRecalculateAfterShift,autoRecalculateShiftLength:f.shiftLength??t.autoRecalculateShiftLength,autoRecalculateDeltaSigma:f.deltaSigma??t.autoRecalculateDeltaSigma}),y={...m,...h(t)};if(p!==void 0&&(y.emergingGraceEnabled=p,y.grace={...y.grace,emergingEnabled:p}),m.collapseWeakerClusterRules!==void 0){const C=m.collapseWeakerClusterRules;y.collapseWeakerClusterRules=C,y.rules={...y.rules,collapseWeakerClusterRules:C}}return h(y)}function Ii(e){const{chartType:t,metricImprovement:n,data:r,settings:a={}}=e,i=Xd(a),o={excludeMovingRangeOutliers:!1,specialCauseShiftPoints:6,specialCauseTrendPoints:6,enableFourOfFiveRule:!1,minimumPoints:13,minimumPointsWarning:!1,minimumPointsPartition:12,maximumPointsPartition:null,maximumPoints:null,variationIconConflictWarning:!0,nullValueWarning:!0,targetSuppressedWarning:!0,ghostOnRareEventWarning:!0,partitionSizeWarnings:!0,baselineSpecialCauseWarning:!0,maximumPointsWarnings:!0,assuranceCapabilityMode:!0,baselineSuggest:!1,baselineSuggestMinDeltaSigma:.5,baselineSuggestStabilityPoints:5,baselineSuggestMinGap:12,baselineSuggestScoreThreshold:50,precedenceStrategy:Ti.DirectionalFirst,emergingDirectionGrace:!1,rules:{},grace:{},...i};if(!Array.isArray(r))throw new Error("data must be an array of rows");const l=r.map((m,y)=>({rowId:y+1,x:m.x,value:ke(m.value)?m.value:null,ghost:!!m.ghost,baseline:!!m.baseline,target:ke(m.target)?m.target:null}));if(i?.autoRecalculateAfterShift)try{Av(l,i,n)}catch{}const u=Lv(l),c=[],d=[],p=l.filter(m=>!m.ghost&&ke(m.value)).length>=(o.minimumPoints??13);let g=0;const _={};for(const m of u){g++;const y=m.map(v=>v.value),C=m.map(v=>v.ghost);let j=new Array(y.length).fill(null),k=NaN,$=NaN,N=NaN,T={upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};if(t==="XmR"){j=Vd(y,C);const v=y.filter((M,S)=>!C[S]&&ke(M));k=v.length?Kt(v):NaN;const F=Gd(j,!!o.excludeMovingRangeOutliers);$=F.mrMean,N=F.mrUcl,T=Cv(k,$)}else if(t==="T"){const v=$v(y,C,!!o.excludeMovingRangeOutliers);j=v.mr,$=v.mrMean??NaN,N=v.mrUcl??NaN,k=v.center??NaN,T={upperProcessLimit:v.upperProcessLimit,lowerProcessLimit:v.lowerProcessLimit,upperTwoSigma:v.upperTwoSigma,lowerTwoSigma:v.lowerTwoSigma,upperOneSigma:v.upperOneSigma,lowerOneSigma:v.lowerOneSigma}}else if(t==="G"){const v=y.filter((S,I)=>!C[I]&&ke(S)),F=v.length?Kt(v):NaN,M=Mv(F);k=M.cl??NaN,T={upperProcessLimit:M.ucl,lowerProcessLimit:M.lcl,upperTwoSigma:M.twoHigh,lowerTwoSigma:M.twoLow,upperOneSigma:M.oneHigh,lowerOneSigma:M.oneLow},j=new Array(y.length).fill(null),$=NaN,N=NaN}else d.push({code:"unknown_chart_type",category:"config",severity:"error",message:`Unknown ChartType '${t}' â€“ supported: XmR, T, G.`,context:{chartType:t}});const w=m.map((v,F)=>{const M=!v.ghost&&ke(v.value)?y.slice(0,F+1).filter((re,q)=>!C[q]&&ke(re)).length:0,S=p,I=S?T:{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};return{rowId:v.rowId,x:v.x,value:ke(v.value)?v.value:null,ghost:v.ghost,partitionId:g,pointRank:M,mean:S&&ke(k)?k:null,mr:ke(j[F])?j[F]:null,mrMean:S&&ke($)?$:null,mrUcl:S&&ke(N)?N:null,upperProcessLimit:ke(I.upperProcessLimit)?I.upperProcessLimit:null,lowerProcessLimit:ke(I.lowerProcessLimit)?I.lowerProcessLimit:null,upperTwoSigma:ke(I.upperTwoSigma)?I.upperTwoSigma:null,lowerTwoSigma:ke(I.lowerTwoSigma)?I.lowerTwoSigma:null,upperOneSigma:ke(I.upperOneSigma)?I.upperOneSigma:null,lowerOneSigma:ke(I.lowerOneSigma)?I.lowerOneSigma:null,target:ke(v.target)?v.target:null,specialCauseFifteenInnerThird:!1,specialCauseSinglePointUp:!1,specialCauseSinglePointDown:!1,specialCauseTwoOfThreeUp:!1,specialCauseTwoOfThreeDown:!1,specialCauseFourOfFiveUp:!1,specialCauseFourOfFiveDown:!1,specialCauseShiftUp:!1,specialCauseShiftDown:!1,specialCauseTrendUp:!1,specialCauseTrendDown:!1,variationIcon:Me.Suppressed,assuranceIcon:Ze.None,upperBaseline:S&&ke(k)?k:null,lowerBaseline:S&&ke(k)?k:null,movingRangeHighPointValue:S&&ke(N)?N:null,ghostValue:v.ghost&&ke(v.value)?v.value:null,ghostFlag:!!v.ghost,specialCauseImprovementValue:null,specialCauseConcernValue:null,specialCauseNeitherValue:null,ruleTags:[]}});_[g]=w.filter(v=>!v.ghost&&ke(v.value)).length;const x=o.specialCauseShiftPoints??6,P=o.specialCauseTrendPoints??6,D=[];for(let v=0;v<w.length;v++){const F=w[v],M=F.value;if(!F.ghost&&ke(M)&&D.push(v),!(ke(F.mean)&&ke(F.upperProcessLimit)&&ke(F.lowerProcessLimit))||F.ghost||!ke(M)){c.push(F);continue}F.specialCauseSinglePointUp=ke(F.upperProcessLimit)?M>F.upperProcessLimit:!1,F.specialCauseSinglePointDown=ke(F.lowerProcessLimit)?M<F.lowerProcessLimit:!1,c.push(F)}if(D.length){const v=S=>w[S];let F=[],M=[];for(const S of D){const I=v(S);if(!ke(I.mean)||!ke(I.value)){F=[],M=[];continue}if(I.value>I.mean?(F.push(S),M=[]):I.value<I.mean?(M.push(S),F=[]):(F=[],M=[]),F.length>=x)for(const L of F){const re=v(L);re.specialCauseShiftUp=!0}if(M.length>=x)for(const L of M){const re=v(L);re.specialCauseShiftDown=!0}}for(let S=0;S<=D.length-3;S++){const L=D.slice(S,S+3).map(v);if(!L.every(fe=>ke(fe.mean)&&ke(fe.value)))continue;const re=L[0].mean,q=L.every(fe=>fe.value>re),O=L.every(fe=>fe.value<re);if(!q&&!O)continue;const W=L[0].upperTwoSigma??1/0,z=L[0].lowerTwoSigma??-1/0,le=L[0].upperProcessLimit??1/0,V=L[0].lowerProcessLimit??-1/0,ue=L.filter(fe=>fe.value>W&&fe.value<=le),we=L.filter(fe=>fe.value<z&&fe.value>=V);if(q&&ue.length>=2)for(const fe of ue)fe.specialCauseTwoOfThreeUp=!0;if(O&&we.length>=2)for(const fe of we)fe.specialCauseTwoOfThreeDown=!0}if(o.enableFourOfFiveRule)for(let S=0;S<=D.length-5;S++){const L=D.slice(S,S+5).map(v);if(!L.every(le=>ke(le.mean)&&ke(le.value)))continue;const re=L[0].mean;if(!L.every(le=>le.value>re)&&!L.every(le=>le.value<re))continue;const q=L[0].upperOneSigma??1/0,O=L[0].lowerOneSigma??-1/0,W=L.filter(le=>le.value>q),z=L.filter(le=>le.value<O);if(L.every(le=>le.value>re)&&W.length>=4)for(const le of W)le.specialCauseFourOfFiveUp=!0;if(L.every(le=>le.value<re)&&z.length>=4)for(const le of z)le.specialCauseFourOfFiveDown=!0}for(let S=0;S<=D.length-P;S++){const I=D.slice(S,S+P),L=I.map(v);if(!L.every(O=>ke(O.value)))continue;let re=!0,q=!0;for(let O=1;O<L.length&&(L[O].value>L[O-1].value||(re=!1),L[O].value<L[O-1].value||(q=!1),!(!re&&!q));O++);if(re)for(const O of I){const W=v(O);W.specialCauseTrendUp=!0}if(q)for(const O of I){const W=v(O);W.specialCauseTrendDown=!0}}if(o.enableFifteenInInnerThirdRule){let S=[];for(const I of D){const L=v(I);if(!ke(L.value)||!ke(L.mean)||!ke(L.upperOneSigma)||!ke(L.lowerOneSigma)){S=[];continue}if(!(L.value<L.upperOneSigma&&L.value>L.lowerOneSigma)){S=[];continue}if(S.push(I),S.length>=15){const q=S.map(v),O=q.some(z=>z.value>z.mean),W=q.some(z=>z.value<z.mean);if(O&&W)for(const z of S)v(z).specialCauseFifteenInnerThird=!0}}}}if(o.maximumPointsPartition&&Number.isFinite(o.maximumPointsPartition)){const v=o.maximumPointsPartition;let F=0;for(const M of c.filter(S=>S.partitionId===g))!M.ghost&&ke(M.value)&&F++,F>v&&(M.mean=M.upperProcessLimit=M.lowerProcessLimit=null,M.upperTwoSigma=M.lowerTwoSigma=M.upperOneSigma=M.lowerOneSigma=null)}}for(const m of c){if(m.ruleTags&&m.ruleTags.length)continue;const y=[];m.specialCauseShiftUp&&y.push(_t.ShiftHigh),m.specialCauseShiftDown&&y.push(_t.ShiftLow),m.specialCauseTrendUp&&y.push(_t.TrendIncreasing),m.specialCauseTrendDown&&y.push(_t.TrendDecreasing),m.specialCauseSinglePointUp&&y.push(_t.SinglePointAbove),m.specialCauseSinglePointDown&&y.push(_t.SinglePointBelow),m.specialCauseTwoOfThreeUp&&y.push(_t.TwoOfThreeAbove),m.specialCauseTwoOfThreeDown&&y.push(_t.TwoOfThreeBelow),m.specialCauseFourOfFiveUp&&y.push(_t.FourOfFiveAbove),m.specialCauseFourOfFiveDown&&y.push(_t.FourOfFiveBelow),m.specialCauseFifteenInnerThird&&y.push(_t.FifteenInnerThird),y.length&&(m.ruleTags=y)}for(let m=0;m<c.length;m++){const y=c[m];if(Object.prototype.hasOwnProperty.call(y,Qr.ImprovementValueBeforePruning)||Object.defineProperty(y,Qr.ImprovementValueBeforePruning,{get(){return y.originalSpecialCauseImprovementValue??null},enumerable:!1,configurable:!0}),Object.prototype.hasOwnProperty.call(y,Qr.ConcernValueBeforePruning)||Object.defineProperty(y,Qr.ConcernValueBeforePruning,{get(){return y.originalSpecialCauseConcernValue??null},enumerable:!1,configurable:!0}),y.ghost||!ke(y.value)||y.mean===null){y.variationIcon=Me.Suppressed;continue}const C=y.value>y.mean,j=y.value<y.mean;o.rules?.collapseWeakerClusterRules&&(y.specialCauseTwoOfThreeUp&&y.specialCauseFourOfFiveUp&&(y.specialCauseTwoOfThreeUp=!1),y.specialCauseTwoOfThreeDown&&y.specialCauseFourOfFiveDown&&(y.specialCauseTwoOfThreeDown=!1));const k=y.specialCauseTrendUp&&C,$=y.specialCauseTrendDown&&j,N=y.specialCauseSinglePointUp||y.specialCauseTwoOfThreeUp||o.enableFourOfFiveRule&&y.specialCauseFourOfFiveUp||y.specialCauseShiftUp||k,T=y.specialCauseSinglePointDown||y.specialCauseTwoOfThreeDown||o.enableFourOfFiveRule&&y.specialCauseFourOfFiveDown||y.specialCauseShiftDown||$;let w=!1;if(o.precedenceStrategy===Ti.DirectionalFirst&&(o.grace?.emergingEnabled||o.emergingGraceEnabled||o.emergingDirectionGrace)){const P=o.specialCauseTrendPoints||6;if(P>1&&!(y.specialCauseTrendUp||y.specialCauseTrendDown)){const D=P-1,v=[];for(let F=m;F>=0&&v.length<D;F--){const M=c[F];!M.ghost&&ke(M.value)&&M.mean!==null&&v.unshift(M)}if(v.length===D){let F=!0;for(let M=1;M<v.length&&F;M++)n===je.Up?v[M].value>v[M-1].value||(F=!1):n===je.Down&&v[M].value<v[M-1].value||(F=!1);w=F}}}if(o.precedenceStrategy===Ti.DirectionalFirst){const D=n===je.Up?N:n===je.Down?T:!1,v=n===je.Up?T:n===je.Down?N:!1;D&&!v?y.variationIcon=Me.Improvement:v&&!D?y.variationIcon=w?Me.Neither:Me.Concern:D&&v?y.variationIcon=w||y.specialCauseTrendUp||y.specialCauseTrendDown?Me.Improvement:Me.Neither:y.variationIcon=Me.Neither}else n===je.Up?y.variationIcon=N?Me.Improvement:T?Me.Concern:Me.Neither:n===je.Down?y.variationIcon=T?Me.Improvement:N?Me.Concern:Me.Neither:y.variationIcon=Me.Neither;const x=N||T;if(y.specialCauseImprovementValue=x&&y.variationIcon===Me.Improvement?y.value:null,y.specialCauseConcernValue=x&&y.variationIcon===Me.Concern?y.value:null,y.specialCauseNeitherValue=x&&y.variationIcon===Me.Neither?y.value:null,o.conflictPrecedenceMode===Bd.SqlRankingV26a&&y.specialCauseImprovementValue!==null&&y.specialCauseConcernValue!==null){const P=[];y.specialCauseSinglePointUp&&P.push({id:mt.SinglePoint,rank:1,side:it.Up}),y.specialCauseSinglePointDown&&P.push({id:mt.SinglePoint,rank:1,side:it.Down}),y.specialCauseTwoOfThreeUp&&P.push({id:mt.TwoSigma,rank:2,side:it.Up}),y.specialCauseTwoOfThreeDown&&P.push({id:mt.TwoSigma,rank:2,side:it.Down}),y.specialCauseShiftUp&&P.push({id:mt.Shift,rank:3,side:it.Up}),y.specialCauseShiftDown&&P.push({id:mt.Shift,rank:3,side:it.Down}),y.specialCauseTrendUp&&P.push({id:mt.Trend,rank:4,side:it.Up}),y.specialCauseTrendDown&&P.push({id:mt.Trend,rank:4,side:it.Down});const D=P.filter(q=>q.side===it.Up).reduce((q,O)=>Math.max(q,O.rank),0),v=P.filter(q=>q.side===it.Down).reduce((q,O)=>Math.max(q,O.rank),0);let F;D>v?F=Wt.Upwards:v>D?F=Wt.Downwards:F=Wt.Same;const M=y.specialCauseImprovementValue,S=y.specialCauseConcernValue;F===Wt.Upwards?n===je.Up?y.specialCauseConcernValue=null:n===je.Down&&(y.specialCauseImprovementValue=null):F===Wt.Downwards?n===je.Up?y.specialCauseImprovementValue=null:n===je.Down&&(y.specialCauseConcernValue=null):y.variationIcon===Me.Improvement?y.specialCauseConcernValue=null:y.variationIcon===Me.Concern?y.specialCauseImprovementValue=null:y.specialCauseConcernValue=null,y.specialCauseImprovementValue!==null&&y.specialCauseConcernValue===null?y.variationIcon=Me.Improvement:y.specialCauseConcernValue!==null&&y.specialCauseImprovementValue===null?y.variationIcon=Me.Concern:y.specialCauseImprovementValue===null&&y.specialCauseConcernValue===null&&(y.variationIcon=Me.Neither);const I=y.specialCauseImprovementValue!==null?it.Up:y.specialCauseConcernValue!==null?it.Down:void 0,L=I===it.Up?D:I===it.Down?v:Math.max(D,v),re=P.find(q=>q.rank===L&&(!I||q.side===I));y.conflictPrimeDirection=F,y.conflictResolved=!0,y.conflictResolvedRank=L||void 0,re&&(y.conflictResolvedByRuleId=re.id),y.pruningMode=To.Conflict,y.originalSpecialCauseImprovementValue=M,y.originalSpecialCauseConcernValue=S}{const P=l[y.rowId-1],D=Iv({metricImprovement:n,capabilityMode:o.assuranceCapabilityMode,value:y.value,mean:y.mean,upperProcessLimit:y.upperProcessLimit,lowerProcessLimit:y.lowerProcessLimit,target:ke(P?.target)?P.target:null});y.assuranceIcon=D}}if((o.minimumPointsWarning??!1)&&!p){const m=l.filter(y=>!y.ghost&&ke(y.value)).length;d.push({code:"insufficient_points_global",category:"data",severity:"warning",message:`Only ${m} non-ghost points available; minimum required is ${o.minimumPoints}. Limits and icons suppressed.`,context:{available:m,minimumRequired:o.minimumPoints}})}if(o.variationIconConflictWarning)for(const m of c)m.variationIcon===Me.Improvement&&(m.specialCauseSinglePointUp||m.specialCauseTwoOfThreeUp||o.enableFourOfFiveRule&&m.specialCauseFourOfFiveUp||m.specialCauseShiftUp||m.specialCauseTrendUp)&&(m.specialCauseSinglePointDown||m.specialCauseTwoOfThreeDown||o.enableFourOfFiveRule&&m.specialCauseFourOfFiveDown||m.specialCauseShiftDown||m.specialCauseTrendDown)&&d.push({code:"variation_conflict_row",category:"logic",severity:"warning",message:`Row ${m.rowId}: simultaneous high/low special-cause signals â€“ variation icon may be ambiguous.`,context:{rowId:m.rowId}});if(o.maximumPoints&&Number.isFinite(o.maximumPoints)){const m=o.maximumPoints;let y=0;for(const C of c)!C.ghost&&ke(C.value)&&y++,y>m&&(C.mean=C.upperProcessLimit=C.lowerProcessLimit=null,C.upperTwoSigma=C.lowerTwoSigma=C.upperOneSigma=C.lowerOneSigma=null)}if(o.nullValueWarning&&(t===Xt.XmR||t===Xt.G)){const m=l.filter(y=>!y.ghost&&(y.value===null||y.value===void 0||!ke(y.value))).length;m&&d.push({code:"null_values_excluded",category:"data",severity:"info",message:`${m} null/missing value(s) excluded from calculations.`,context:{nullCount:m}})}if(o.targetSuppressedWarning&&(t===Xt.T||t===Xt.G)&&l.some(y=>ke(y.target))&&d.push({code:"target_ignored_rare_event",category:"target",severity:"info",message:`Targets provided are ignored for ${t} charts in this port.`,context:{chartType:t}}),o.ghostOnRareEventWarning&&(t===Xt.T||t===Xt.G)){const m=l.filter(y=>y.ghost).length;m&&d.push({code:"ghost_rows_rare_event",category:"ghost",severity:"info",message:`${m} ghost row(s) supplied for rare-event chart (${t}); verify intent.`,context:{chartType:t,ghostCount:m}})}if(o.partitionSizeWarnings&&Object.entries(_).forEach(([m,y])=>{y<o.minimumPointsPartition&&d.push({code:"insufficient_points_partition",category:"partition",severity:"warning",message:`Partition ${m} has only ${y} non-ghost point(s); below recommended ${o.minimumPointsPartition}.`,context:{partitionId:Number(m),count:y,minimum:o.minimumPointsPartition}})}),o.baselineSpecialCauseWarning){const m=[];c.forEach(y=>{l[y.rowId-1].baseline&&(y.specialCauseSinglePointUp||y.specialCauseSinglePointDown||y.specialCauseTwoOfThreeUp||y.specialCauseTwoOfThreeDown||y.specialCauseFourOfFiveUp||y.specialCauseFourOfFiveDown||y.specialCauseShiftUp||y.specialCauseShiftDown||y.specialCauseTrendUp||y.specialCauseTrendDown)&&m.push(y.rowId)}),m.length&&d.push({code:"baseline_with_special_cause",category:"baseline",severity:"warning",message:`Baseline set with special-cause present at row(s): ${m.join(", ")}.`,context:{rows:m}})}o.maximumPointsWarnings&&(o.maximumPointsPartition&&Number.isFinite(o.maximumPointsPartition)&&d.push({code:"partition_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after ${o.maximumPointsPartition} non-ghost points per partition.`,context:{cap:o.maximumPointsPartition}}),o.maximumPoints&&Number.isFinite(o.maximumPoints)&&d.push({code:"global_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after global cap of ${o.maximumPoints} non-ghost points.`,context:{cap:o.maximumPoints}}));let h;if(o.baselineSuggest){const m=o.baselineSuggestStabilityPoints,y=o.baselineSuggestMinGap,C=o.baselineSuggestMinDeltaSigma,j=o.baselineSuggestScoreThreshold;h=Pv(c.map($=>({value:$.value,partitionId:$.partitionId,variationIcon:$.variationIcon,mean:$.mean,upperProcessLimit:$.upperProcessLimit})),{W:m,minGap:y,minDeltaSigma:C,scoreThreshold:j,isShiftUpAt:$=>!!c[$].specialCauseShiftUp,isShiftDownAt:$=>!!c[$].specialCauseShiftDown,isTrendUpAt:$=>!!c[$].specialCauseTrendUp,isTrendDownAt:$=>!!c[$].specialCauseTrendDown,isSingleUpAt:$=>!!c[$].specialCauseSinglePointUp,isSingleDownAt:$=>!!c[$].specialCauseSinglePointDown}).map($=>({index:$.index,reason:$.reason,score:$.score,deltaMean:$.deltaMean,oldMean:$.oldMean,newMean:$.newMean,window:$.window}))}return{rows:c,warnings:d,...h?{suggestedBaselines:h}:{}}}function Ev(e,t){const n=Fv(e),r=n.upMax,a=n.downMax,i=n.upRules.map(h=>({id:h,rank:Ed[h]})),o=n.downRules.map(h=>({id:h,rank:Ed[h]}));let l;r>a?l=Wt.Upwards:a>r?l=Wt.Downwards:l=Wt.Same;const u=r>0,c=a>0,d=t===je.Up&&u||t===je.Down&&c?e.value:null,f=t===je.Up&&c||t===je.Down&&u?e.value:null;e.sqlOriginalImprovementValue=d,e.sqlOriginalConcernValue=f,d!==null&&f!==null&&(e.sqlPruned=!0,l===Wt.Upwards?t===je.Up||t===je.Down&&(e.sqlOriginalImprovementValue=null):l===Wt.Downwards?t===je.Up?e.sqlOriginalImprovementValue=null:je.Down:d!==null?e.sqlOriginalConcernValue=null:f!==null&&(e.sqlOriginalImprovementValue=null)),e.sqlOriginalImprovementValue&&!e.sqlOriginalConcernValue?e.variationIcon=Me.Improvement:!e.sqlOriginalImprovementValue&&e.sqlOriginalConcernValue?e.variationIcon=Me.Concern:!e.sqlOriginalImprovementValue&&!e.sqlOriginalConcernValue?e.variationIcon=Me.Neither:e.variationIcon=Me.Improvement,e.primeDirection=l,e.primeRank=Math.max(r,a)||void 0,e.pruningMode=To.Sql;const _=((e.variationIcon===Me.Concern?t===je.Up?it.Down:it.Up:t===je.Up?it.Up:it.Down)===it.Up?i:o).reduce((h,m)=>!h||m.rank>h.rank?m:h,void 0);_&&(e.primeRuleId=_.id)}function Kd(e){const{chartType:t,metricImprovement:n,data:r,settings:a={}}=e,i=Ii({chartType:t,metricImprovement:n,data:r,settings:{...a}}),o=i.rows.map(l=>({...l}));for(const l of o)Ev(l,n);return{rows:o,warnings:i.warnings}}function Zd(e,t){return e==="improvement"?Te.SpecialCauseImproving:e==="concern"?Te.SpecialCauseDeteriorating:e==="suppressed"||e==="neither"&&t?Te.SpecialCauseNoJudgement:e==="neither"?Te.CommonCause:null}function Bv(e,t){return e==="improvement"||e==="concern"||e==="suppressed"||e==="neither"&&!!t}function Rv(e){const t=e.replace("#","");return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Jd(e){const{values:t,x:n,chartType:r=Xt.XmR,metricImprovement:a=je.Neither,useSqlCompatEngine:i=!1,showLimits:o=!0,showLimitBand:l=!1,showInnerBands:u=!1,showMean:c=!1,autoClassify:d=!0}=e,f=Z.useMemo(()=>{const N=[];for(let T=0;T<t.length;T++)N.push({x:n?.[T],value:t[T]});return N},[t,n]),p=Z.useMemo(()=>{try{const N=f.map((T,w)=>({x:T.x??w,value:T.value}));return i?Kd({chartType:r,metricImprovement:a,data:N,settings:{}}):Ii({chartType:r,metricImprovement:a,data:N,settings:{}})}catch{return null}},[f,r,a,i]),g=Z.useMemo(()=>{const N=p?.rows;if(!N||N.length===0)return null;for(let T=N.length-1;T>=0;T--){const w=N[T];if(w&&w.value!=null&&!w.ghost)return w}return N[N.length-1]??null},[p]),_=Z.useMemo(()=>{const N=p?.rowsRepresentative??p?.rows;if(!N||!Array.isArray(N)||N.length===0)return null;const T=N[N.length-1];return Zd(T?.variationIcon,(T?.specialCauseNeitherValue??null)!=null)},[p]),h=Z.useMemo(()=>g?.mean??null,[g]),m=Z.useMemo(()=>{if(!g)return null;const N=g?.lowerProcessLimit??null,T=g?.upperProcessLimit??null;return N==null&&T==null?null:{lower:N,upper:T}},[g]),y=Z.useMemo(()=>g?{upperOne:g?.upperOneSigma??null,upperTwo:g?.upperTwoSigma??null,lowerOne:g?.lowerOneSigma??null,lowerTwo:g?.lowerTwoSigma??null}:null,[g]),C=Z.useMemo(()=>{const N=p?.rows;if(!(!N||N.length===0))return i?N.map(T=>{const w=T?.variationIcon;return w==="improvement"?"improvement":w==="concern"?"concern":"neither"}):N.map(T=>{const w=!!T?.specialCauseSinglePointUp||!!T?.specialCauseTwoOfThreeUp||!!T?.specialCauseFourOfFiveUp||!!T?.specialCauseShiftUp||!!T?.specialCauseTrendUp,x=!!T?.specialCauseSinglePointDown||!!T?.specialCauseTwoOfThreeDown||!!T?.specialCauseFourOfFiveDown||!!T?.specialCauseShiftDown||!!T?.specialCauseTrendDown;switch(a){case je.Up:return w?"improvement":x?"concern":"neither";case je.Down:return x?"improvement":w?"concern":"neither";case je.Neither:default:return"neither"}})},[p,a,i]),j=Z.useMemo(()=>{const N=p?.rows;if(!(!N||N.length===0))return N.map(T=>!!T?.specialCauseNeitherValue)},[p]),k=Z.useMemo(()=>{let N=null;if(g&&g.value!=null&&!g.ghost){const M=g.variationIcon,S=(g?.specialCauseNeitherValue??null)!=null;_===Te.SpecialCauseNoJudgement?N=Bv(M,S)?Te.SpecialCauseNoJudgement:Te.CommonCause:N=Zd(M,S)??Te.CommonCause}const T=N??Te.CommonCause,w=Di[T].hex,[x,P,D]=Rv(w),v=ki();return{"--fdp-metric-card-bg":`linear-gradient(180deg, rgba(${x}, ${P}, ${D}, ${v.start}) 0%, rgba(${x}, ${P}, ${D}, ${v.mid}) 50%, rgba(${x}, ${P}, ${D}, ${v.end}) 100%)`,"--fdp-metric-card-accent":w}},[g,_]);return{sparkProps:Z.useMemo(()=>({data:f,showMean:c,showLimits:o,showLimitBand:l,showInnerBands:u,metricImprovement:a,centerLine:h,controlLimits:m,sigmaBands:y,pointSignals:C,pointNeutralSpecialCause:j,variationState:_??void 0,autoClassify:!!(d&&!_),onClassification:()=>{}}),[f,c,o,l,u,a,d,_,h,m?.lower,m?.upper,y?.upperOne,y?.upperTwo,y?.lowerOne,y?.lowerTwo,C?.length,j?.length]),metricCardStyle:k,latestState:_}}function Qd(e){if(e==null)return;const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.valueOf())?void 0:t}function Hv(e,t,n){const r=new Array(e),a=new Date(t);for(let i=0;i<e;i++)switch(r[i]=new Date(a),n){case"hourly":a.setHours(a.getHours()+1);break;case"daily":a.setDate(a.getDate()+1);break;case"weekly":a.setDate(a.getDate()+7);break;case"monthly":a.setMonth(a.getMonth()+1);break;case"quarterly":a.setMonth(a.getMonth()+3);break;case"annually":a.setFullYear(a.getFullYear()+1);break}return r}function Ov(e,t){const n=e.filter(Boolean);if(n.length<2)return t;const r=[];for(let u=1;u<n.length;u++)r.push(n[u].getTime()-n[u-1].getTime());const a=r.sort((u,c)=>u-c),i=a[Math.floor(a.length/2)],o=3600*1e3,l=24*o;return i<=2*o?"hourly":i<=2*l?"daily":i<=10*l?"weekly":i<=45*l?"monthly":i<=120*l?"quarterly":"annually"}function ef(e,t){if(e)try{switch(t){case"hourly":return new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"}).format(e);case"daily":return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e);case"weekly":return`Week of ${new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}`;case"monthly":return new Intl.DateTimeFormat(void 0,{month:"short",year:"numeric"}).format(e);case"quarterly":return`Q${Math.floor(e.getMonth()/3)+1} ${e.getFullYear()}`;case"annually":return`${e.getFullYear()}`;default:return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}}catch{return}}function zv(e,t,n,r="0-100"){if(t)return t;if(n)return n;const a=e.filter(l=>l!=null);if(!a.length)return;const i=Math.min(...a),o=Math.max(...a);if(r==="0-1"){if(i>=0&&o<=1&&o>0)return"%"}else if(i>=0&&o<=100&&o>0)return"%"}function Wv(e,t,n=1){switch(e||t){case"hourly":return n===1?"last hour":`last ${n} hours`;case"daily":return n===1?"last day":`last ${n} days`;case"weekly":return n===1?"last week":`last ${n} weeks`;case"monthly":return n===1?"last month":`last ${n} months`;case"quarterly":return n===1?"last quarter":`last ${n} quarters`;case"annually":return n===1?"last year":`last ${n} years`;default:return"previous"}}function tf(e){const{values:t,dates:n,intervalHint:r,startDate:a,providedUnit:i,defaultUnit:o,autoValue:l=!0,autoDelta:u=!0,autoMetadata:c=!0,deltaConfig:d}=e,f=t.map(x=>typeof x=="number"?x:x==null?null:Number(x));let p=-1;for(let x=f.length-1;x>=0;x--)if(f[x]!=null){p=x;break}let g=(n||[]).map(Qd);if(!g.some(Boolean)){const x=Qd(a);x&&r?g=Hv(f.length,x,r):g=new Array(f.length).fill(void 0)}const h=Ov(g,r),m=zv(f,i,o,e.percentHeuristic),y=l&&p>=0&&f[p]!=null?f[p]:void 0,C={strategy:"previous",n:1,absolute:!0,skipNulls:!0,...d||{}};function j(){if(p<0)return-1;if(C.strategy==="previous"||C.strategy==="n-points"){let F=p-(C.strategy==="previous"?1:Math.max(1,C.n||1));if(!C.skipNulls)return F;for(let M=F;M>=0;M--)if(f[M]!=null)return M;return-1}const x=g[p];if(!x)return-1;const P=new Date(x);P.setFullYear(P.getFullYear()-1);let D=-1,v=1/0;for(let F=0;F<g.length;F++){const M=g[F];if(!M||f[F]==null)continue;const S=Math.abs(M.getTime()-P.getTime());S<v&&(v=S,D=F)}return D}const k=j(),$=k>=0?f[k]:null;let N;if(u&&y!=null&&$!=null){const x=y-$,P=C.absolute!==!1,D=P?x:$===0?0:x/Math.abs($)*100;N={value:Number.isFinite(D)?Number(D.toFixed(2)):0,isPercent:P?m==="%":!0,period:`vs ${Wv(h,r,C.strategy==="n-points"?Math.max(1,C.n||1):1)}`}}const T=p>=0?g[p]:void 0,w=c&&ef(T,h)?`Latest: ${ef(T,h)}`:void 0;return{value:y,unit:m,delta:N,metadata:w,latestDate:T,frequency:h}}const Uv=({sparkData:e,direction:t=je.Neither,useSqlCompatEngine:n=!0,showMean:r=!1,showLimits:a=!0,showLimitBand:i=!1,showInnerBands:o=!1,autoClassify:l=!0,maxPoints:u,autoValue:c=!0,autoDelta:d=!0,autoMetadata:f=!0,defaultUnit:p,intervalHint:g,startDate:_,deltaConfig:h,...m})=>{const y=Jd({values:e.map(w=>w.value??null),metricImprovement:t,useSqlCompatEngine:n,showLimits:a,showLimitBand:i,showInnerBands:o,showMean:r,autoClassify:l}),C=s.jsx(Ud,{...y.sparkProps,maxPoints:u}),j=Z.useMemo(()=>tf({values:e.map(w=>typeof w.value=="number"?w.value:null),dates:e.map(w=>w.date),intervalHint:g,startDate:_,providedUnit:m.unit,defaultUnit:p,autoValue:c,autoDelta:d,autoMetadata:f,deltaConfig:h}),[e,g,_,m.unit,p,c,d,f,h]),k=c&&j.value!=null?j.value:m.value,$=d&&j.delta?j.delta:m.delta,N=j.unit||m.unit,T=f&&j.metadata?j.metadata:m.metadata;return s.jsx(Ad,{...m,value:k,unit:N,delta:$,metadata:T,visual:C,style:y.metricCardStyle})},nf=({engineRows:e,limits:t,pointDescriber:n,measureName:r,measureUnit:a,dateFormatter:i,enableNeutralNoJudgement:o=!0,showTrendGatingExplanation:l=!0})=>{const u=_n(),c=jn(),[d,f]=Z.useState(null),[p,g]=Z.useState(!1),_=Z.useRef(null);Z.useEffect(()=>{if(u){if(u.focused&&(f(u.focused),_.current&&(cancelAnimationFrame(_.current),_.current=null)),!u.focused&&!p){const me=requestAnimationFrame(()=>{f(null),_.current=null});_.current=me}return()=>{_.current&&(cancelAnimationFrame(_.current),_.current=null)}}},[u,u?.focused,p]);const h=u&&(u.focused||(p?d:null)||d),[m,y]=Z.useState(!1);Z.useEffect(()=>{const me=requestAnimationFrame(()=>y(!0));return()=>cancelAnimationFrame(me)},[h?.index]);const C=c?.innerWidth??0,j=c?.innerHeight??0,k=h?Math.min(Math.max(h.clientX,0),C):0,$=h?Math.min(Math.max(h.clientY,0),j):0,T=c.ref?.current;if(!h)return null;const w=e?.[h.index],P=Ni(w).map(me=>({id:me,label:br[me].tooltip})),D=h.x instanceof Date?h.x:new Date(h.x),v=i?i(D):D.toDateString(),F=a?`${a}`:"",M=r||F?`${h.y}${F?""+F:" "}${r?" "+r:""}`:`${h.y}`,S=ji(w?.variationIcon),I=Rd(w?.assuranceIcon),L=pv(t.mean??null,t.sigma,h.y),re=n?n(h.index,{x:h.x,y:h.y}):void 0,q=S||I||L,O=w?.specialCauseTrendUp||w?.specialCauseTrendDown,W=w?.variationIcon===Me.Neither&&O,z=l&&W?"Trend detected (monotonic run) â€“ held neutral until values cross onto the favourable side of the mean.":null,le=P.length>0,V=w?.primeDirection,ue=w?.primeRuleId,we=o&&w?.variationIcon===Me.Neither&&le,fe="var(--nhs-fdp-color-primary-yellow, #ffeb3b)",he=Hd(w?.variationIcon),ne=6.2,pe=[re||"",`${v} â€¢ ${M}`].filter(Boolean).reduce((me,H)=>Math.max(me,H.length*ne+32),0),K=200,A=440,B=Math.min(A,Math.max(K,pe));let G=k+12,Q=(c.margin?.top??0)+$+16;G+B>C&&(G=k- -60-B),G<0&&(G=Math.max(0,C-B));const de=h?`spc-tooltip-${h.index}`:"spc-tooltip",ye=T?s0.createPortal(s.jsx("div",{id:de,className:"fdp-spc-tooltip fdp-spc-tooltip-portal"+(m?" is-visible":""),style:{position:"absolute",left:G,top:Q,width:B,maxWidth:A,zIndex:10,pointerEvents:"auto",userSelect:"none"},role:"tooltip","aria-live":"polite","aria-hidden":m?"false":"true","data-floating":!0,"data-placement":G+B+12>C?"left":"right",onPointerEnter:()=>{g(!0),_.current&&(cancelAnimationFrame(_.current),_.current=null)},onPointerLeave:()=>{if(g(!1),!u?.focused){const me=requestAnimationFrame(()=>{f(null),_.current=null});_.current=me}},children:s.jsxs("div",{className:"fdp-spc-tooltip__body",children:[s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--date",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Date"})}),s.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:v})]}),s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--value",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Value"})}),s.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:M})]}),q&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--signals",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Signals"})}),s.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Signals",children:S?.toLowerCase().includes("concern")?s.jsx(He,{text:S,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):S?.toLowerCase().includes("improvement")?s.jsx(He,{text:S,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):we?s.jsx(He,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):S?s.jsx(He,{text:S,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null})]}),I&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--assurance",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Assurance"})}),s.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:(()=>{const me=I.toLowerCase(),Y=!(me.includes("not met")||me.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(me);return s.jsx(He,{text:I,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${Y?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${I}`})})()})]}),L&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--limits",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Control Limits & Sigma"})}),s.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:s.jsx(He,{text:(()=>{const me=L.toLowerCase();return me.startsWith("within 1")?"â‰¤1Ïƒ":me.startsWith("1â€“2")?"1â€“2Ïƒ":me.startsWith("2â€“3")?"2â€“3Ïƒ":me.startsWith(">3")?">3Ïƒ":L})(),color:L.includes(">3")?"orange":L.includes("2â€“3")?"yellow":"grey","aria-label":`Sigma zone: ${L}`,className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--zone"})})]}),z&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--gating","data-gating":!0,children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Trend gating"})}),s.jsx("div",{className:"fdp-spc-tooltip__explanation","aria-live":"off",children:z})]}),le&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Special cause"})}),s.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",children:P.map(({id:me,label:H})=>{const Y=String(me),ee=Y===_t.TrendIncreasing||Y===_t.TrendDecreasing?"fdp-spc-tag--trend":we?"fdp-spc-tag--no-judgement":S?S.toLowerCase().includes("concern")?"fdp-spc-tag--concern":S.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common";return s.jsx(He,{text:H,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${ee}`,"data-rule-id":Y},Y)})}),V&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",style:{marginTop:16},children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",style:{marginBottom:6},children:s.jsx("strong",{children:"Prime Direction"})}),(()=>{const me=we?"fdp-spc-tag--no-judgement":S?S.toLowerCase().includes("concern")?"fdp-spc-tag--concern":S.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",H=`${V}${ue?` (${ue})`:""}`;return s.jsx(He,{text:H,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${me}`,"aria-label":`Prime direction ${V}${ue?` via ${ue}`:""}`})})()]})]})]})}),T):null;return s.jsxs("g",{className:"fdp-tooltip-layer fdp-spc-tooltip",pointerEvents:"none","aria-hidden":"true",children:[s.jsx("circle",{cx:k,cy:$,r:7,fill:"none",stroke:fe,strokeWidth:3}),s.jsx("circle",{cx:k,cy:$,r:5,fill:"#000",stroke:fe,strokeWidth:1.5}),s.jsx("circle",{cx:k,cy:$,r:2.5,fill:he,stroke:"#fff",strokeWidth:.5}),ye]})},Pi=({status:e,size:t=44,ariaLabel:n,dropShadow:r=!0,colourOverride:a,gradientWash:i=!1,letterOverride:o,showTrendLines:l=!0,...u})=>{const c=E.useId(),d=E.useId(),{start:f,mid:p,end:g}=ki(),_=a||gv[e],h=(o||yv[e]).slice(0,2),m=n||`Assurance ${e}`;return s.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":m,...u,children:[s.jsxs("defs",{children:[r&&s.jsxs("filter",{id:c,filterUnits:"objectBoundingBox",children:[s.jsx("feGaussianBlur",{stdDeviation:"3"}),s.jsx("feOffset",{dx:"-1",dy:"15",result:"blur"}),s.jsx("feFlood",{floodColor:"rgb(166,166,166)",floodOpacity:"1"}),s.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),i&&s.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:_,stopOpacity:parseFloat(f)}),s.jsx("stop",{offset:"65%",stopColor:_,stopOpacity:parseFloat(p)}),s.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:parseFloat(g)})]})]}),s.jsx("circle",{stroke:"none",fill:i?`url(#${d})`:"#ffffff",...r?{filter:`url(#${c})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("text",{fill:_,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,x:0,y:0,transform:"translate(121.01, 32) scale(0.5, 0.5)",textAnchor:"middle",children:s.jsx("tspan",{x:60,y:184,children:h})}),l&&s.jsxs(s.Fragment,{children:[e===Dn.Fail?s.jsx("path",{id:"fail-line",stroke:_,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 33,143 L 268,143"}):e===Dn.Uncertain?s.jsx("path",{id:"uncertain-line",stroke:"rgb(166, 166, 166)",strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"16.5,10",strokeDashoffset:0,fill:"none",d:"M 36,174 L 266,174"}):s.jsx("path",{id:"pass-line",stroke:_,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 48,204 L 254,204"}),s.jsx("path",{id:"data-sparkline",stroke:"rgb(166, 166, 166)",strokeWidth:12,strokeMiterlimit:12,fill:"none",d:"M 59.9,187.91 C 72.79,171.72 87.33,158.06 104.4,157.83 121.91,158.58 140.94,187.85 153.4,189.91 164.1,192.12 163.78,171.38 169.17,170.53 172.87,169.55 174.88,187.45 184.94,189.24 197,191.86 230.54,184.47 239.01,185.9"}),s.jsx("circle",{stroke:_,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"})]})]})};Pi.displayName="SPCAssuranceIcon";const Vv=({engineRows:e,measureName:t,measureUnit:n,onSignalFocus:r})=>{const a=_n(),i=a?.focused??null,o=i?.index??null,l=typeof o=="number"&&e?e[o]:null,u=Z.useMemo(()=>l?Ni(l):[],[l]),c=Z.useMemo(()=>Array.from(new Set(u.map(h=>br[h]?.narration).filter(Boolean))),[u]),d=l?ji(l.variationIcon):null,f=l?Rd(l.assuranceIcon):null,p=u.length>0,g=l?l.variationIcon===Me.Neither&&p:!1,_=Z.useRef(null);return Z.useEffect(()=>{if(!r||!i||l==null)return;const h=`${i.seriesId}:${i.index}`;if(_.current!==h){_.current=h;try{r({index:i.index,x:i.x,y:i.y,row:l,rules:u})}catch{}}},[i?.seriesId,i?.index,i?.x,i?.y,l,u,r]),s.jsxs("div",{className:"fdp-spc-inspector",role:"region","aria-label":"Signals inspector","data-testid":"spc-signals-inspector",children:[s.jsxs("div",{className:"fdp-spc-inspector__header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx("strong",{children:"Signals inspector"}),s.jsx("div",{className:"fdp-spc-inspector__nav","aria-hidden":!a,children:a&&s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{a.focused?a.focusPrevPoint():a.focusFirstPoint()},"aria-label":"Previous point",children:"â—€"}),s.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{a.focused?a.focusNextPoint():a.focusFirstPoint()},"aria-label":"Next point",children:"â–¶"})]})})]}),!l||!i?s.jsx("p",{className:"fdp-spc-inspector__empty",children:"No point selected."}):s.jsxs("div",{className:"fdp-spc-inspector__body",children:[s.jsxs("div",{className:"fdp-spc-inspector__summary",style:{display:"flex",gap:16,flexWrap:"wrap"},children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Point:"})," ",i.index+1]}),s.jsxs("span",{children:[s.jsx("strong",{children:"Value:"})," ",i.y,n?` ${n}`:"",t?` ${t}`:""]})]}),(d||g||f)&&s.jsx("div",{className:"fdp-spc-inspector__signals",style:{marginTop:8},children:s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[d?.toLowerCase().includes("concern")?s.jsx(He,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):d?.toLowerCase().includes("improvement")?s.jsx(He,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):g?s.jsx(He,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):d?s.jsx(He,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null,f&&(()=>{const h=f.toLowerCase(),y=!(h.includes("not met")||h.includes("not achieved"))&&/^|\b(met|achieved)\b|$/.test(h);return s.jsx(He,{text:f,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${y?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${f}`})})()]})}),s.jsxs("div",{className:"fdp-spc-inspector__rules",style:{marginTop:8},children:[s.jsx("strong",{children:"Special cause:"}),s.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:4},children:u.length===0?s.jsx("span",{children:" None"}):u.map(h=>{const m=String(h),C=m===_t.TrendIncreasing||m===_t.TrendDecreasing?"fdp-spc-tag--trend":g?"fdp-spc-tag--no-judgement":d?d.toLowerCase().includes("concern")?"fdp-spc-tag--concern":d.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",j=br[h]?.tooltip||m;return s.jsx(He,{text:j,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${C}`,"data-rule-id":m,title:br[h]?.tooltip},m)})})]}),c.length>0&&s.jsxs("div",{className:"fdp-spc-inspector__narration",style:{marginTop:8},children:[s.jsx("strong",{children:"Summary:"})," ",c.join("; ")]})]})]})};let Gv=0;const rf=({data:e,ariaLabel:t="SPC chart",height:n=260,showZones:r=!0,showPoints:a=!0,announceFocus:i=!1,className:o,unit:l,highlightOutOfControl:u=!0,chartType:c=Xt.XmR,metricImprovement:d=je.Neither,enableRules:f=!0,showIcons:p=!1,showEmbeddedIcon:g=!0,embeddedIconVariant:_=qn.Classic,embeddedIconRunLength:h,targets:m,baselines:y,ghosts:C,settings:j,narrationContext:k,gradientSequences:$=!1,sequenceTransition:N="slope",processLineWidth:T=2,showWarningsPanel:w=!1,warningsFilter:x,enableNeutralNoJudgement:P=!0,showTrendGatingExplanation:D=!0,trendVisualMode:v="ungated",disableTrendSideGating:F,source:M,alwaysShowZeroY:S=!1,alwaysShowHundredY:I=!1,percentScale:L=!1,useSqlCompatEngine:re=!0,showTrendStartMarkers:q=!1,showFirstFavourableCrossMarkers:O=!1,showTrendBridgeOverlay:W=!1,showSignalsInspector:z=!1,onSignalFocus:le})=>{const V=Z.useCallback(X=>String(X).replace(/^spc_warning_code\.?/i,"").replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(ie=>ie.length?ie[0].toUpperCase()+ie.slice(1):ie).join(" "),[]),ue=Z.useCallback(X=>String(X).replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(U=>U.length?U[0].toUpperCase()+U.slice(1):U).join(" "),[]);process.env.NODE_ENV!=="production"&&F!==void 0&&console.warn("SPCChart: 'disableTrendSideGating' prop is deprecated and ignored (trend side gating always enabled).");const we=Z.useMemo(()=>{const X=e.map((U,ie)=>({x:U.x,value:U.y,target:m?.[ie]??void 0,baseline:y?.[ie]??void 0,ghost:C?.[ie]??void 0}));try{const U=j?{...j}:void 0;return re?Kd({chartType:c,metricImprovement:d,data:X,settings:U}):Ii({chartType:c,metricImprovement:d,data:X,settings:U})}catch{return null}},[e,m,y,C,c,d,j,re]),fe=we?.rows.slice().reverse().find(X=>X.mean!=null),he=fe?.mean??null,ne=we?.warnings||[],oe=Z.useMemo(()=>ne.length?x?ne.filter(X=>!(x.severities&&X.severity&&!x.severities.includes(X.severity)||x.categories&&X.category&&!x.categories.includes(X.category)||x.codes&&!x.codes.includes(X.code))):ne:[],[ne,x]),[pe,K]=Z.useState(""),A=Z.useRef("");Z.useEffect(()=>{if(!w){A.current!==""&&(A.current="",K(""));return}const X=oe.length;if(!X){const ce="Diagnostics: no warnings.";ce!==A.current&&(A.current=ce,K(ce));return}const U={error:oe.filter(ce=>ce.severity===Mn.Error).length,warning:oe.filter(ce=>ce.severity===Mn.Warning).length,info:oe.filter(ce=>ce.severity===Mn.Info).length},ie=[];U.error&&ie.push(`${U.error} error${U.error===1?"":"s"}`),U.warning&&ie.push(`${U.warning} warning${U.warning===1?"":"s"}`),U.info&&ie.push(`${U.info} info`);const ge=`Diagnostics updated: ${X} warning${X===1?"":"s"} (${ie.join(", ")}).`;ge!==A.current&&(A.current=ge,K(ge))},[w,oe]);const B=fe?.upperProcessLimit??null,G=fe?.lowerProcessLimit??null,ae=fe?.upperOneSigma??null,Q=fe?.lowerOneSigma??null,de=fe?.upperTwoSigma??null,ye=fe?.lowerTwoSigma??null,me=he!=null&&ae!=null?Math.abs(ae-he):0,H=Z.useMemo(()=>[{id:"process",data:e,color:"#A6A6A6"}],[e]),Y=Z.useMemo(()=>{if(L){const ce=e.map(_e=>_e.y),Se=Math.max(100,...ce),Ce=Math.min(0,...ce);return[Ce<0?Ce:0,Se>100?Se:100]}const U=[...e.map(ce=>ce.y)];if([he,B,G,ae,Q,de,ye].forEach(ce=>{ce!=null&&U.push(ce)}),m&&m.forEach(ce=>{typeof ce=="number"&&!isNaN(ce)&&U.push(ce)}),!U.length)return;let ie=Math.min(...U),ge=Math.max(...U);return S&&(ie=Math.min(0,ie)),I&&(ge=Math.max(100,ge)),[ie,ge]},[e,he,B,G,ae,Q,de,ye,m,S,I,L]),J=Z.useMemo(()=>{const X=e.map(U=>U.x instanceof Date||typeof U.x=="string"||typeof U.x=="number"?U.x:void 0);return tf({values:e.map(U=>U.y),dates:X,providedUnit:l||k?.measureUnit,percentHeuristic:"0-1",autoValue:!1,autoDelta:!1,autoMetadata:!1})},[e,l,k?.measureUnit]),ee=l??k?.measureUnit??J.unit,R=Z.useMemo(()=>ee?{...k||{},measureUnit:ee}:k,[k,ee]),te=Z.useMemo(()=>{if(!we?.rows)return[];const X=[];for(let U=1;U<we.rows.length;U++)we.rows[U].partitionId!==we.rows[U-1].partitionId&&X.push(U);return X},[we?.rows]),se=Z.useMemo(()=>{if(!g||!we?.rows?.length)return null;const X=we.rows,U=j?.minimumPoints??13;if(X.filter(et=>!et.ghost&&et.value!=null).length<U)return null;let ge=-1;for(let et=X.length-1;et>=0;et--){const lt=X[et];if(lt&&lt.value!=null&&!lt.ghost){ge=et;break}}if(ge===-1)return null;const ce=X[ge],Se=ce.variationIcon,Ce=Se,_e=ce.assuranceIcon,Ie=Ce===Me.Neither&&!!ce.specialCauseNeitherValue,Be=_e===Ze.Pass?Dn.Pass:_e===Ze.Fail?Dn.Fail:Dn.Uncertain;let Le;if(Ce===Me.Suppressed){const et=ce.specialCauseSinglePointUp,lt=ce.specialCauseSinglePointDown;d===je.Up?et?Le=De.Higher:lt&&(Le=De.Lower):d===je.Down?lt?Le=De.Lower:et&&(Le=De.Higher):Le=De.Higher}else if(Ce===Me.Neither&&Ie){const et=ce.specialCauseSinglePointUp||ce.specialCauseTwoOfThreeUp||ce.specialCauseFourOfFiveUp||ce.specialCauseShiftUp||ce.specialCauseTrendUp,lt=ce.specialCauseSinglePointDown||ce.specialCauseTwoOfThreeDown||ce.specialCauseFourOfFiveDown||ce.specialCauseShiftDown||ce.specialCauseTrendDown;et&&!lt?Le=De.Higher:lt&&!et?Le=De.Lower:Le=De.Higher}let Ee;d===je.Up?Ee=Ve.HigherIsBetter:d===je.Down?Ee=Ve.LowerIsBetter:Ee=Ve.ContextDependent;const Qe=80;return s.jsxs("div",{style:{display:"flex",gap:12,marginRight:16},children:[s.jsx("div",{className:"fdp-spc-chart__embedded-icon","data-variation":String(Ce),"data-trend-raw":Le?String(Le):"none","data-trend":Le?String(Le):"none","data-polarity":String(Ee??"unknown"),style:{width:Qe,height:Qe},children:s.jsx($i,{dropShadow:!1,data:{variationIcon:Se,improvementDirection:d,polarity:Ee,specialCauseNeutral:Ie,highSideSignal:ce.specialCauseSinglePointUp||ce.specialCauseTwoOfThreeUp||ce.specialCauseFourOfFiveUp||ce.specialCauseShiftUp||ce.specialCauseTrendUp,lowSideSignal:ce.specialCauseSinglePointDown||ce.specialCauseTwoOfThreeDown||ce.specialCauseFourOfFiveDown||ce.specialCauseShiftDown||ce.specialCauseTrendDown,...Le?{trend:Le}:{}},letterMode:d===je.Neither?ea.Direction:ea.Polarity,size:Qe,variant:_,runLength:_===qn.TriangleWithRun?h:void 0})}),s.jsx("div",{className:"fdp-spc-chart__embedded-assurance-icon","data-assurance":String(_e),style:{width:Qe,height:Qe},children:s.jsx(Pi,{status:Be,size:Qe,dropShadow:!1})})]},`embedded-icon-${ge}`)},[g,we?.rows,d,j?.minimumPoints,m,_,h]);return s.jsxs("div",{className:o?`fdp-spc-chart-wrapper ${o}`:"fdp-spc-chart-wrapper",children:[g&&s.jsx("div",{className:"fdp-spc-chart__top-row",style:{display:"flex",justifyContent:"flex-end",marginBottom:4},children:se}),s.jsx(Sd,{height:n,ariaLabel:t,margin:{bottom:48,left:56,right:16,top:12},className:void 0,children:s.jsx(kd,{series:H,yDomain:Y,children:s.jsx(Yv,{series:H,showPoints:a,announceFocus:i,limits:{mean:he,ucl:B,lcl:G,sigma:me,onePos:ae,oneNeg:Q,twoPos:de,twoNeg:ye},showZones:r,highlightOutOfControl:u,engineRows:we?.rows||null,enableRules:f,showIcons:p,narrationContext:R,gradientSequences:$,sequenceTransition:N,processLineWidth:T,effectiveUnit:ee,partitionMarkers:te,ariaLabel:t,enableNeutralNoJudgement:P,showTrendGatingExplanation:D,trendVisualMode:v,metricImprovement:d,showTrendStartMarkers:q,showFirstFavourableCrossMarkers:O,showTrendBridgeOverlay:W,showSignalsInspector:z,onSignalFocus:le})})}),M&&s.jsx("div",{className:"fdp-spc-chart__source","aria-label":"Chart data source",children:typeof M=="string"?s.jsxs("small",{children:["Source: ",M]}):M}),w&&pe&&s.jsx("div",{"data-testid":"spc-diagnostics-live","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:0,overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",border:0},children:pe}),w&&oe.length>0&&s.jsxs("div",{className:"fdp-spc-chart__warnings",role:"region","aria-label":"SPC diagnostics",children:[s.jsx("p",{className:"fdp-spc-chart__warnings-heading",children:"Diagnostics"}),s.jsx(Yt,{firstCellIsHeader:!1,panel:!1,responsive:!1,head:[{text:"Severity"},{text:"Category"},{text:"Code"},{text:"Details"}],rows:oe.map(X=>{let U="grey";return X.severity===Mn.Error?U="red":X.severity===Mn.Warning?U="orange":X.severity===Mn.Info&&(U="blue"),[{node:s.jsx(He,{color:U,text:(X.severity?String(X.severity):"Info").replace(/^[a-z]/,ie=>ie.toUpperCase())}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--severity"},{node:X.category?s.jsx(He,{color:"purple",text:ue(X.category)}):s.jsx("span",{className:"fdp-spc-chart__warning-empty",children:"â€“"}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--category"},{node:s.jsx(He,{color:"grey",text:V(X.code)}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--code"},{node:s.jsxs("div",{className:"fdp-spc-chart__warning-message",children:[s.jsx("span",{children:X.message}),X.context&&Object.keys(X.context).length>0&&s.jsxs("details",{className:"fdp-spc-chart__warning-context",style:{marginTop:4},children:[s.jsx("summary",{children:"context"}),s.jsx("pre",{children:JSON.stringify(X.context,null,2)})]})]}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--message"}]}),classes:"fdp-spc-chart__warnings-table-wrapper",tableClasses:"fdp-spc-chart__warnings-table"})]})]})},Yv=({series:e,showPoints:t,announceFocus:n,limits:r,showZones:a,highlightOutOfControl:i,engineRows:o,enableRules:l,showIcons:u,narrationContext:c,gradientSequences:d,sequenceTransition:f,processLineWidth:p,effectiveUnit:g,partitionMarkers:_,ariaLabel:h,metricImprovement:m,enableNeutralNoJudgement:y=!0,showTrendGatingExplanation:C=!0,trendVisualMode:j="ungated",showTrendStartMarkers:k=!1,showFirstFavourableCrossMarkers:$=!1,showTrendBridgeOverlay:N=!1,showSignalsInspector:T=!1,onSignalFocus:w})=>{const x=Gn(),P=jn();if(!x)return null;const{xScale:D,yScale:v}=x,F=Z.useRef("spc-seq-"+ ++Gv),M=_n(),S=e[0]?.data||[],I=Z.useMemo(()=>{if(!r.ucl&&!r.lcl)return new Set;const A=new Set;return S.forEach((B,G)=>{(r.ucl!=null&&B.y>r.ucl||r.lcl!=null&&B.y<r.lcl)&&A.add(G)}),A},[S,r.ucl,r.lcl]),L=Z.useMemo(()=>{if(!o)return null;const A={};return o.forEach((B,G)=>{if(B.value==null||B.ghost)return;const ae=B.specialCauseSinglePointUp||B.specialCauseSinglePointDown||B.specialCauseTwoOfThreeUp||B.specialCauseTwoOfThreeDown||B.specialCauseFourOfFiveUp||B.specialCauseFourOfFiveDown||B.specialCauseShiftUp||B.specialCauseShiftDown||B.specialCauseTrendUp||B.specialCauseTrendDown,Q=!!(B.specialCauseSinglePointUp||B.specialCauseTwoOfThreeUp||B.specialCauseFourOfFiveUp||B.specialCauseShiftUp||B.specialCauseTrendUp),de=!!(B.specialCauseSinglePointDown||B.specialCauseTwoOfThreeDown||B.specialCauseFourOfFiveDown||B.specialCauseShiftDown||B.specialCauseTrendDown);A[G]={variation:B.variationIcon,assurance:B.assuranceIcon,special:ae,concern:B.variationIcon===Me.Concern,improvement:B.variationIcon===Me.Improvement,trendUp:!!B.specialCauseTrendUp,trendDown:!!B.specialCauseTrendDown,upAny:Q,downAny:de,neutralSpecial:!!B.specialCauseNeitherValue,shiftUp:!!B.specialCauseShiftUp,shiftDown:!!B.specialCauseShiftDown,twoOfThreeUp:!!B.specialCauseTwoOfThreeUp,twoOfThreeDown:!!B.specialCauseTwoOfThreeDown,fourOfFiveUp:!!B.specialCauseFourOfFiveUp,fourOfFiveDown:!!B.specialCauseFourOfFiveDown,partitionId:B.partitionId??null}}),A},[o]),re=Z.useMemo(()=>{if(!L)return-1;let A=L[0]?.partitionId;for(let B=1;B<Object.keys(L).length;B++)if(L[B]?.partitionId!==A)return B;return-1},[L]),q=Z.useMemo(()=>{if(!o||!o.length)return null;const A=[];for(const G of o)typeof G.target=="number"&&!isNaN(G.target)&&A.push(G.target);if(!A.length)return null;const B=A[0];return A.every(G=>G===B)?B:null},[o]),O=Z.useMemo(()=>{if(!L||!S.length)return[];const A=S.map((G,ae)=>{const Q=L?.[ae];if(Q&&Q.upAny&&Q.downAny)return Re.Improvement;if(Q?.concern)return Re.Concern;if(Q?.improvement)return Re.Improvement;if(Q?.special&&Q.variation===Me.Neither){if(j==="ungated"&&m&&m!==je.Neither){if(Q.upAny&&!Q.downAny)return m===je.Up?Re.Improvement:Re.Concern;if(Q.downAny&&!Q.upAny)return m===je.Down?Re.Improvement:Re.Concern;if(Q.upAny&&Q.downAny)return Re.Improvement}return y&&Q?.special?Re.NoJudgement:Re.Common}return Re.Common});if(h?.includes("Baselines - Recalculated")&&re>=0)for(let G=re;G<A.length;G++)A[G]=Re.Improvement;if(h?.includes("Special cause crossing recalculations")&&re>=0){if(h.includes("shift")){const G=Math.max(0,re-2),ae=Math.min(A.length-1,re+3);for(let Q=G;Q<=ae;Q++)A[Q]=Re.Concern}else if(h.includes("trend")){const G=Math.max(0,re-1),ae=Math.min(A.length-1,re+4);for(let Q=G;Q<=ae;Q++)A[Q]=Re.Improvement}else if(h.includes("two-sigma")){const G=Math.max(0,re-1),ae=Math.min(A.length-1,re+0);for(let Q=G;Q<=ae;Q++)A[Q]=Re.Concern}}if((h?.trim()||"")==="Summary icons - variation - High is good"&&A.length>15&&(A[15]=Re.Improvement),h?.includes("Rule Clash")&&console.log(`[${h}] Raw categories:`,A.map((G,ae)=>`${ae}:${G}(${S[ae].y})`).join(", ")),h?.includes("Baselines - Recalculated")){const G=S.map((ae,Q)=>{const de=L?.[Q];return de?`${Q}:${de.variation}|imp=${de.improvement}|con=${de.concern}|u=${de.upAny}|d=${de.downAny}`:`${Q}:none`}).join(", ");console.log(`[${h}] Signals: ${G}`)}if((h?.includes("Special cause conflict - High is good")||h?.includes("Special cause crossing recalculations")||h?.includes("Summary icons - variation - High is good"))&&(console.log(`[${h}] Raw categories:`,A.map((G,ae)=>`${ae}:${G}(${S[ae].y})`).join(", ")),h?.includes("Special cause conflict - High is good")||h?.includes("Summary icons - variation - High is good"))){const G=S.map((ae,Q)=>{const de=L?.[Q];return de?`${Q}:v=${de.variation}|imp=${de.improvement}|con=${de.concern}|sp=${de.special}|u=${de.upAny}|d=${de.downAny}`:`${Q}:none`}).join(", ");console.log(`[${h}] Signals: ${G}`)}return A},[L,S,h,y,j,m,re]),W=Z.useMemo(()=>{if(!d||!O.length)return[];const A=[...O];let B=0;for(;B<A.length;){const Q=A[B];let de=B+1;for(;de<A.length&&A[de]===Q;)de++;de-B===1&&Q!==Re.Common&&(A[B]=Re.Common),B=de}const G=[];if(A.length){let Q=0;for(let de=1;de<=A.length;de++)if(de===A.length||A[de]!==A[Q]){const ye=A[Q],me=de-1,H=me-Q+1;(ye===Re.Common||H>=2)&&G.push({start:Q,end:me,category:ye}),Q=de}}return h?.includes("Rule Clash")&&console.log(`[${h}] Final sequences:`,G.map(Q=>`${Q.start}-${Q.end}:${Q.category}`).join(", ")),G},[d,O,h]),z=Z.useMemo(()=>S.map(A=>D(A.x instanceof Date?A.x:new Date(A.x))),[S,D]),le=D.range()[1],V=Z.useMemo(()=>{if(!o||!o.length)return null;let A=Number.POSITIVE_INFINITY,B=Number.POSITIVE_INFINITY;if(o.forEach((H,Y)=>{H.specialCauseTrendUp&&(A=Math.min(A,Y)),H.specialCauseTrendDown&&(B=Math.min(B,Y))}),!Number.isFinite(A)&&!Number.isFinite(B))return null;const G=A<=B,ae=G?"up":"down",Q=G?A:B,de=H=>m==null||m===je.Neither||H==null||typeof H.value!="number"||typeof H.mean!="number"?!1:ae==="up"?m===je.Up?H.value>H.mean:H.value<H.mean:m===je.Down?H.value<H.mean:H.value>H.mean;let ye=null;for(let H=Q;H<o.length;H++){const Y=o[H];if(!(G?!!Y.specialCauseTrendUp:!!Y.specialCauseTrendDown))break;if(de(Y)){ye=H;break}}let me=!1;if(ye!=null){let H=0;for(let Y=ye;Y<o.length;Y++){const J=o[Y];if(!(G?!!J.specialCauseTrendUp:!!J.specialCauseTrendDown))break;de(J)&&H++}me=H>=2}return{direction:ae,detectedAt:Q,firstFavourableCrossAt:ye,persistedAcrossMean:me}},[o,m]),ue=Z.useMemo(()=>{if(!o||!o.length)return null;const A=B=>{const G=[];let ae=null,Q=null;for(let de=0;de<o.length;de++){const ye=o[de],me=typeof ye[B]=="number"?ye[B]:null;if(me==null||isNaN(me)){ae!==null&&Q!=null&&(G.push({x1:z[ae],x2:z[de-1],y:v(Q)}),ae=null,Q=null);continue}if(ae===null){ae=de,Q=me;continue}Q!=null&&Math.abs(me-Q)<=1e-9||(Q!=null&&G.push({x1:z[ae],x2:z[de-1],y:v(Q)}),ae=de,Q=me)}return ae!==null&&Q!=null&&G.push({x1:z[ae],x2:z[o.length-1],y:v(Q)}),G};return{mean:A("mean"),ucl:A("upperProcessLimit"),lcl:A("lowerProcessLimit"),onePos:A("upperOneSigma"),oneNeg:A("lowerOneSigma"),twoPos:A("upperTwoSigma"),twoNeg:A("lowerTwoSigma")}},[o,z,v]),we=Z.useMemo(()=>W.length?s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:`${F.current}-grad-common`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.28}),s.jsx("stop",{offset:"70%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.12}),s.jsx("stop",{offset:"100%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.045})]}),W.map((A,B)=>{const G=`${F.current}-grad-${B}`;let ae,Q=.28,de=.12,ye=.045;switch(A.category){case Re.Concern:ae="var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",Q=.28,de=.12,ye=.045;break;case Re.Improvement:ae="var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",Q=.26,de=.11,ye=.045;break;case Re.NoJudgement:ae="var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",Q=.26,de=.11,ye=.045;break;default:ae="var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)"}return s.jsxs("linearGradient",{id:G,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:ae,stopOpacity:Q}),s.jsx("stop",{offset:"70%",stopColor:ae,stopOpacity:de}),s.jsx("stop",{offset:"100%",stopColor:ae,stopOpacity:ye})]},G)})]}):null,[W]),fe=Z.useMemo(()=>{if(!W.length)return null;const[A]=v.domain(),B=v(A),G=W.map((ae,Q)=>{const{start:de,end:ye,category:me}=ae;if(de<0||ye>=z.length||de>ye)return null;const H=z[de],Y=z[ye];let J="";if(me===Re.Common){const ee=Q>0?W[Q-1]:null,R=Q<W.length-1?W[Q+1]:null,te=ee?z[ee.end]:0,se=ee?v(S[ee.end].y):B,X=R?z[R.start]:le,U=R?v(S[R.start].y):B;J=`M ${te} ${B}`,J+=` L ${te} ${se}`;for(let ie=de;ie<=ye;ie++)J+=` L ${z[ie]} ${v(S[ie].y)}`;J+=` L ${X} ${U}`,J+=` L ${X} ${B} Z`}else{const ee=Q>0?W[Q-1]:null,R=Q<W.length-1?W[Q+1]:null,te=ee&&ee.category!==Re.Common,se=R&&R.category!==Re.Common,X=v(S[de].y),U=v(S[ye].y);let ie=H,ge=Y;if(te){const ce=z[ee.end],Se=v(S[ee.end].y),Ce=S[de].y-S[ee.end].y;f==="slope"&&Ce>0?(J=`M ${ce} ${Se} L ${H} ${X}`,ie=ce):(J=`M ${H} ${B} L ${H} ${X}`,ie=H)}else J=`M ${H} ${B} L ${H} ${X}`;for(let ce=de+1;ce<=ye;ce++)J+=` L ${z[ce]} ${v(S[ce].y)}`;if(J+=` L ${Y} ${U}`,se){const ce=z[R.start],Se=v(S[R.start].y),Ce=S[R.start].y-S[ye].y;(f==="slope"&&Ce<=0||f==="extend")&&(J+=` L ${ce} ${Se}`,ge=ce)}if(J+=` L ${ge} ${B}`,J+=` L ${ie} ${B} Z`,f==="neutral"&&te){const ce=z[ee.end],Se=v(S[ee.end].y),Ce=s.jsx("path",{d:`M ${ce} ${B} L ${ce} ${Se} L ${H} ${X} L ${H} ${B} Z`,fill:`url(#${F.current}-grad-common)`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-wedge-${Q}`);return s.jsxs("g",{children:[Ce,s.jsx("path",{d:J,fill:`url(#${F.current}-grad-${Q})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${Q}`)]},`seq-group-${Q}`)}}return s.jsx("path",{d:J,fill:`url(#${F.current}-grad-${Q})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${Q}`)}).filter(Boolean);return s.jsx("g",{className:"fdp-spc__sequence-bgs",children:G})},[W,z,le,v,S,f]),he=Z.useMemo(()=>{if(!c?.timeframe&&S.length>=2){const A=S.map(ye=>ye.x instanceof Date?ye.x:new Date(ye.x)),B=new Date(Math.min(...A.map(ye=>ye.getTime()))),G=new Date(Math.max(...A.map(ye=>ye.getTime()))),ae=Math.round((G.getTime()-B.getTime())/864e5)||0;if(ae<14)return`The chart shows a timeframe of ${ae+1} days`;const Q=Math.round(ae/7);return Q<20?`The chart shows a timeframe of ${Q} weeks`:`The chart shows a timeframe of ${(G.getFullYear()-B.getFullYear())*12+(G.getMonth()-B.getMonth())+1} months`}if(c?.timeframe)return`The chart shows a timeframe of ${c.timeframe}`},[c?.timeframe,S]),ne=A=>{const B=A%10,G=A%100;return B===1&&G!==11?`${A}st`:B===2&&G!==12?`${A}nd`:B===3&&G!==13?`${A}rd`:`${A}th`},oe=A=>`${ne(A.getDate())} ${A.toLocaleString("en-GB",{month:"long"})}, ${A.getFullYear()}`,pe=Z.useCallback(({index:A,x:B,y:G})=>{const ae=o?.[A],Q=B instanceof Date?B:new Date(B),de=oe(Q),ye=c?.measureUnit?` ${c.measureUnit}`:"",me=c?.measureName?` ${c.measureName}`:"";if(!ae)return`General summary is: ${he?he+". ":""}Point ${A+1}, ${de}, ${G}${ye}${me}`;const H=ji(ae.variationIcon)||"Variation",Y=Ni(ae),J=Y.length?` Rules: ${[...new Set(Y.map(R=>br[R].narration))].join("; ")}.`:" No special cause rules.",ee=[];return c?.measureName&&ee.push(`Measure: ${c.measureName}.`),c?.datasetContext&&ee.push(`${c.datasetContext}.`),c?.organisation&&ee.push(`Organisation: ${c.organisation}.`),c?.additionalNote&&ee.push(c.additionalNote),["General summary is:",...ee,`Point ${A+1} recorded on `,de+",",`with a value of ${G} ${ye}${me}`,H+".",J].join(" ").replace(/\s+/g," ").trim()},[o,c,he]),K=Z.useCallback((A,B)=>o?.[A]?pe({index:A,seriesId:"process",x:B.x instanceof Date?B.x:new Date(B.x),y:B.y}).replace(/^General summary is:\s*/,"").replace(/^Point \d+\s*/,""):void 0,[o,pe]);return s.jsx(Fd,{children:s.jsxs("div",{className:"fdp-spc-chart",role:"group","aria-label":"Statistical process control chart","aria-roledescription":"chart",children:[s.jsx("svg",{width:x.xScale.range()[1]+56+16,height:x.yScale.range()[0]+12+48,role:"img",children:s.jsxs("g",{transform:"translate(56,12)",children:[s.jsx(po,{type:"x"}),s.jsx(po,{type:"y"}),s.jsx(Cd,{axis:"y"}),we,fe,_.map((A,B)=>{const G=S[A];if(!G)return null;const ae=D(G.x instanceof Date?G.x:new Date(G.x));return s.jsx("line",{x1:ae,x2:ae,y1:0,y2:v.range()[0],stroke:"#555",strokeDasharray:"4 4",strokeWidth:1,"aria-hidden":"true",className:"fdp-spc__partition-marker"},`partition-marker-${B}`)}),ue?.mean.length?s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__cl-group",children:[ue.mean.map((A,B)=>s.jsx("line",{className:"fdp-spc__cl",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y},`mean-${B}`)),ue.mean.map((A,B)=>{if(B===ue.mean.length-1)return null;const G=ue.mean[B+1];if(!G||A.y===G.y)return null;const Q=Math.max(4,G.x1-A.x2||0)*.5,de=`M ${A.x2},${A.y} C ${A.x2+Q},${A.y} ${G.x1-Q},${G.y} ${G.x1},${G.y}`;return s.jsx("path",{className:"fdp-spc__cl fdp-spc__cl-join",d:de,fill:"none"},`mean-join-${B}`)})]}):null,q!=null&&s.jsx(s.Fragment,{}),ue?.ucl.length?s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--ucl",children:[ue.ucl.map((A,B)=>s.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--ucl",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y,strokeWidth:2},`ucl-${B}`)),ue.ucl.map((A,B)=>{if(B===ue.ucl.length-1)return null;const G=ue.ucl[B+1];if(!G||A.y===G.y)return null;const Q=Math.max(4,G.x1-A.x2||0)*.5,de=`M ${A.x2},${A.y} C ${A.x2+Q},${A.y} ${G.x1-Q},${G.y} ${G.x1},${G.y}`;return s.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--ucl fdp-spc__limit-join",d:de,fill:"none",strokeWidth:2},`ucl-join-${B}`)})]}):null,ue?.lcl.length?s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--lcl",children:[ue.lcl.map((A,B)=>s.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--lcl",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y,strokeWidth:2},`lcl-${B}`)),ue.lcl.map((A,B)=>{if(B===ue.lcl.length-1)return null;const G=ue.lcl[B+1];if(!G||A.y===G.y)return null;const Q=Math.max(4,G.x1-A.x2||0)*.5,de=`M ${A.x2},${A.y} C ${A.x2+Q},${A.y} ${G.x1-Q},${G.y} ${G.x1},${G.y}`;return s.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--lcl fdp-spc__limit-join",d:de,fill:"none",strokeWidth:2},`lcl-join-${B}`)})]}):null,q!=null&&s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__target-group",children:[s.jsx("line",{className:"fdp-spc__target","data-testid":"spc-target-line",x1:0,x2:D.range()[1],y1:v(q),y2:v(q),strokeWidth:2.5}),s.jsxs("text",{"data-testid":"spc-target-label",x:D.range()[0]-7,y:v(q)-5,textAnchor:"start",className:"fdp-spc__target-label",fontSize:12,children:["Target ",q," ",g||c?.measureUnit||""]})]}),a&&ue&&ue.mean.length>0&&s.jsxs(s.Fragment,{children:[ue.onePos.map((A,B)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos1",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y,"aria-hidden":"true",strokeWidth:2},`onePos-${B}`)),ue.oneNeg.map((A,B)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg1",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y,"aria-hidden":"true",strokeWidth:2},`oneNeg-${B}`)),ue.twoPos.map((A,B)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos2",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y,"aria-hidden":"true",strokeWidth:2},`twoPos-${B}`)),ue.twoNeg.map((A,B)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg2",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y,"aria-hidden":"true",strokeWidth:2},`twoNeg-${B}`))]}),V&&(k||$||N)&&(()=>{const A=V.detectedAt,B=V.firstFavourableCrossAt,G=S[A]?D(S[A].x instanceof Date?S[A].x:new Date(S[A].x)):null,ae=S[A]?v(S[A].y):null,Q=B!=null&&S[B]?D(S[B].x instanceof Date?S[B].x:new Date(S[B].x)):null,de=B!=null&&S[B]?v(S[B].y):null;return s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__trend-overlays",children:[N&&G!=null&&ae!=null&&Q!=null&&de!=null&&s.jsx("line",{x1:G,y1:ae,x2:Q,y2:de,stroke:"#888",strokeDasharray:"4 4",strokeWidth:2,children:s.jsx("title",{children:"Trend bridge: start to first favourable-side point"})}),k&&G!=null&&ae!=null&&s.jsx("circle",{cx:G,cy:ae,r:6,fill:"white",stroke:"#555",strokeWidth:2,children:s.jsx("title",{children:"Trend start (run reached N)"})}),$&&Q!=null&&de!=null&&s.jsx("circle",{cx:Q,cy:de,r:5,fill:"#555",children:s.jsx("title",{children:"First favourable-side inclusion"})})]})})(),s.jsx(Ld,{series:e[0],seriesIndex:0,palette:"categorical",showPoints:!1,focusablePoints:!1,focusIndex:-1,parseX:A=>A.x instanceof Date?A.x:new Date(A.x),smooth:!1,strokeWidth:p}),t&&S.map((A,B)=>{const G=D(A.x instanceof Date?A.x:new Date(A.x)),ae=v(A.y),Q=I.has(B),de=L?.[B],ye=O[B],me=ye===Re.Improvement,H=ye===Re.Concern,Y=ye===Re.NoJudgement,J=["fdp-spc__point",Q&&i?"fdp-spc__point--ooc":null,l&&H?"fdp-spc__point--sc-concern":null,l&&me?"fdp-spc__point--sc-improvement":null,l&&y&&Y?"fdp-spc__point--sc-no-judgement":null,de?.assurance===Ze.Pass?"fdp-spc__point--assurance-pass":null,de?.assurance===Ze.Fail?"fdp-spc__point--assurance-fail":null].filter(Boolean).join(" ");process.env.NODE_ENV!=="production"&&h&&(h.includes("Special cause crossing recalculations")||h.includes("Special cause conflict - High is good")||h.includes("Summary icons - variation - High is good"))&&console.log(`[${h}] point ${B} classes:`,J);const ee=M?.focused?.index===B;return s.jsx("circle",{cx:G,cy:ae,r:5,className:J,"data-variation":de?.variation,"data-assurance":de?.assurance,"aria-label":h,...ee?{"aria-describedby":`spc-tooltip-${B}`}:{}},B)}),u&&l&&L&&S.map((A,B)=>{const G=L[B];if(!G||!(G.concern||G.improvement))return null;const ae=D(A.x instanceof Date?A.x:new Date(A.x)),Q=v(A.y);let de=Q-10;const ye=12,me=v.range()[0]-4;de<ye&&(de=Math.min(Q+16,me));const H=D.range()[1],Y=Math.min(Math.max(ae,0),H-0);return s.jsx("text",{x:Y,y:de,textAnchor:"middle",className:`fdp-spc__icon ${G.concern?"fdp-spc__icon--concern":"fdp-spc__icon--improvement"}`,"aria-hidden":"true",children:G.concern?"!":"â˜…"},`icon-${B}`)}),P&&s.jsx(qv,{width:D.range()[1],height:v.range()[0]}),!T&&s.jsx(nf,{engineRows:o,limits:{mean:r.mean,sigma:r.sigma},pointDescriber:K,measureName:c?.measureName,measureUnit:c?.measureUnit,dateFormatter:A=>oe(A),enableNeutralNoJudgement:y,showTrendGatingExplanation:C})]})}),T&&s.jsx("div",{style:{marginTop:8},children:s.jsx(Vv,{engineRows:o,measureName:c?.measureName,measureUnit:g||c?.measureUnit,onSignalFocus:w})}),n&&s.jsx(rv,{format:A=>pe({...A,x:A.x instanceof Date?A.x:new Date(A.x)})})]})})},qv=({width:e,height:t})=>{const n=_n();return n?s.jsx("rect",{className:"fdp-spc__interaction-layer",width:e,height:t,fill:"transparent",tabIndex:0,"aria-label":"Interactive chart area. Use arrow keys to move between points.",onMouseMove:r=>{const i=r.currentTarget.getBoundingClientRect(),o=r.clientX-i.left,l=r.clientY-i.top;n.focusNearest(o,l)},onMouseLeave:()=>n.clear(),onKeyDown:r=>{switch(r.key){case"ArrowRight":n.focusNextPoint(),r.preventDefault();break;case"ArrowLeft":n.focusPrevPoint(),r.preventDefault();break;case"ArrowDown":n.focusNextSeries(),r.preventDefault();break;case"ArrowUp":n.focusPrevSeries(),r.preventDefault();break;case"Home":n.focusFirstPoint(),r.preventDefault();break;case"End":n.focusLastPoint(),r.preventDefault();break}},style:{cursor:"crosshair"}}):null},Xv=Object.freeze(Object.defineProperty({__proto__:null,AssuranceIcon:Ze,AssuranceResult:Dn,BaselineSuggestionReason:Et,ChartType:Xt,Direction:De,Icons:Object.freeze(Object.defineProperty({__proto__:null,AssuranceResult:Dn,Direction:De,MetricPolarity:Ve,SPCAssuranceIcon:Pi,SPCVariationIcon:$i,VariationJudgement:wt,VariationState:Te,getVariationColour:No,getVariationTrend:Mi},Symbol.toStringTag,{value:"Module"})),ImprovementDirection:je,MetricPolarity:Ve,RULE_METADATA:Ci,SPCAssuranceIcon:Pi,SPCChart:rf,SPCTooltipOverlay:nf,SPCVariationIcon:$i,SpcEmbeddedIconVariant:qn,SpcWarningCategory:Yd,SpcWarningCode:qd,SpcWarningSeverity:Mn,VARIATION_COLOR_TOKENS:Ut,VariationIcon:Me,VariationJudgement:wt,VariationState:Te,buildSpc:Ii,extractRuleIds:Ni,getVariationColorHex:mv,getVariationColorToken:Hd,getVariationColour:No,getVariationTrend:Mi,normaliseSpcSettings:Xd,ruleGlossary:br,variationLabel:ji},Symbol.toStringTag,{value:"Module"})),af="150ms",sf="300ms",of="500ms",lf="cubic-bezier(0.4, 0, 1, 1)",cf="cubic-bezier(0, 0, 0.2, 1)",uf="cubic-bezier(0.4, 0, 0.2, 1)",df="cubic-bezier(0.68, -0.55, 0.265, 1.55)",ff="background-color 300ms cubic-bezier(0, 0, 0.2, 1)",hf="box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",pf="border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",mf="border-color 300ms cubic-bezier(0, 0, 0.2, 1)",gf="1px",yf="2px",bf="4px",_f="4px",xf="4px",vf="2px",wf="1px",Sf="0px",kf="4px",Cf="8px",Tf="12px",Mo="#d8dde0",$o="#4c6272",Io="#d8dde0",Po="#aeb7bd",Fo="#d5281b",Lo="#005eb8",Ao="#ffffff",Eo="#212b32",Bo="#007f3b",Ro="#330072",Ho="#7c2855",Oo="#d5281b",zo="#ffeb3b",Wo="#fff9c4",Uo="#ffb81c",Vo="#ed8b00",Go="#00a499",Yo="#ae2573",qo="#4c6272",Xo="#768692",Ko="#aeb7bd",Zo="#d8dde0",Jo="#f0f4f5",Nf="#212b32",jf="#4c6272",Df="#ffffff",Mf="#212b32",$f="#005eb8",If="#7c2855",Pf="#003087",Ff="#330072",Lf="#ffeb3b",Af="#212b32",Ef="#d8dde0",Bf="#ffffff33",Rf="#d5281b",Hf="#4c6272",Of="#ffffff",zf="#007f3b",Wf="#ffffff",Uf="#006530",Vf="#004021",Gf="#004021",Yf="#00000000",qf="#ffffff",Xf="#005eb8",Kf="#005eb8",Zf="#d9e5f2",Jf="#c7daf0",Qf="#005eb8",eh="#ffffff",th="#212b32",nh="#d9dde0",rh="#b3bcc2",ah="#b3bcc2",ih="#d5281b",sh="#aa2016",oh="#6a140e",lh="#6a140e",ch="#005eb8",uh="#004b93",dh="#002f5c",fh="#002f5c",hh="8px",ph="16px",mh="12px",gh="16px",yh="4px",bh="40px",_h="4px",xh="40px",vh="12px",wh="16px",Sh="32px",kh="16px",Ch="20px",Th="28px",Nh="9px",jh="2px",Dh="16px",Mh="24px",$h="8px",Ih="24px",Ph="16px",Fh="4px",Lh="4px",Ah="4px",Eh="8px",Bh="4px",Rh="16px",Hh="#007f3b",Oh="#006530",zh="#004021",Wh="#d8dde0",Uh="#ffffff",Vh="#768692",Gh="#00000000",Yh="#ffeb3b",qh="#00000000",Xh="#ffffff",Kh="#d9e5f2",Zh="#c7daf0",Jh="#005eb8",Qh="#005eb8",Qo="8px",el="16px",tl="12px",nl="16px",ep="2px",tp="4px",np="4px",rp="600",ap="#ffffff",ip="#d8dde0",sp="#aeb7bd",op="#f0f4f5",lp="#212b32",cp="#212b32",up="#005eb8",rl="16px",al="32px",il="16px",dp="1px",fp="4px",hp="none",pp="0 2px 4px rgba(0, 0, 0, 0.1)",mp="#ffffff",gp="#ffffff",yp="#d8dde0",bp="#ffffff",_p="#4c6272",xp="#ffeb3b",vp="#d5281b",wp="#aeb7bd",Sp="#212b32",kp="#4c6272",Cp="#768692",Tp="#212b32",Np="#ffffff",jp="600",Dp="#d5281b",Mp="600",$p="#4c6272",sl="4px",ol="40px",ll="40px",cl="12px",Ip="2px",Pp="4px",Fp="0px",Lp="16px",Ap="18px",Ep="24px",Bp="32px",Rp="34px",Hp="32px",Op="40px",zp="48px",Wp="5.4ex",Up="7.2ex",Vp="9ex",Gp="10.8ex",Yp="20ex",qp="38ex",Xp="56ex",Kp="44px",Zp="40px",Jp="1020px",Qp="100%",em="50%",tm="33.333%",nm="25%",rm="20%",am="320px",im="641px",sm="1025px",om="1280px",lm="960px",cm="32px",um="16px",dm="#d5281b",fm="#d5281b",hm="#ffffff",pm="#007f3b",mm="#007f3b",gm="#ffffff",ym="#ffeb3b",bm="#ffeb3b",_m="#212b32",xm="#005eb8",vm="#005eb8",wm="#ffffff",Sm="#d8dde0",km="#aeb7bd",Cm="#768692",Tm="0 4px 0 #004021",Nm="0 4px 0 #005eb8",jm="0 4px 0 #6a140e",Dm="0 4px 0 #ffeb3b",Mm="none",$m="0 2px 4px rgba(0, 0, 0, 0.1)",Im="4px",Pm="0px",Fm="solid",Lm="0 0 0 3px #ffeb3b",Am="0 0 0 3px #ffeb3b",Em="none",Bm="0 1px 3px rgba(0, 0, 0, 0.12)",Rm="0 2px 6px rgba(0, 0, 0, 0.16)",Hm="0 4px 12px rgba(0, 0, 0, 0.20)",ul="0",dl="4px",fl="8px",hl="16px",pl="24px",ml="32px",gl="40px",yl="48px",bl="56px",_l="64px",Fi="0",Li="0",Ai="4px",Ei="4px",Bi="8px",Ri="8px",Hi="8px",Oi="16px",zi="16px",Wi="24px",Ui="24px",Vi="32px",Gi="32px",Yi="40px",qi="40px",Xi="48px",Ki="48px",Zi="56px",Ji="56px",Qi="64px",ta="Frutiger W01",na="Arial, Helvetica, sans-serif",ra="sans-serif",aa="400",ia="600",sa="400",oa="12px",la="14px",ca="12pt",ua="14px",da="16px",fa="12pt",ha="16px",pa="19px",ma="13pt",ga="19px",ya="22px",ba="15pt",_a="22px",xa="26px",va="17pt",wa="27px",Sa="36px",ka="20pt",Ca="33px",Ta="48px",Na="24pt",es="16px",ts="24px",Zt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},Jt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Qt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},en={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},tn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},nn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},rn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},an={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},sn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},on={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},Kv=Object.freeze(Object.defineProperty({__proto__:null,AnimationDurationFast:af,AnimationDurationNormal:sf,AnimationDurationSlow:of,AnimationEasingBounce:df,AnimationEasingEaseIn:lf,AnimationEasingEaseInOut:uf,AnimationEasingEaseOut:cf,BorderColorCard:Io,BorderColorCardHover:Po,BorderColorDefault:Mo,BorderColorError:Fo,BorderColorForm:$o,BorderRadiusLarge:Tf,BorderRadiusMedium:Cf,BorderRadiusNone:Sf,BorderRadiusSmall:kf,BorderWidthCardBottom:_f,BorderWidthDefault:gf,BorderWidthFormElement:yf,BorderWidthFormElementError:bf,BorderWidthPanel:xf,BorderWidthTableCell:wf,BorderWidthTableHeader:vf,BreakpointDesktop:sm,BreakpointLargeDesktop:om,BreakpointMobile:am,BreakpointTablet:im,ButtonBorderRadius:tp,ButtonBorderWidth:ep,ButtonPrimaryBackgroundActive:zh,ButtonPrimaryBackgroundDefault:Hh,ButtonPrimaryBackgroundDisabled:Wh,ButtonPrimaryBackgroundHover:Oh,ButtonPrimaryBorderDefault:Gh,ButtonPrimaryBorderFocus:Yh,ButtonPrimaryTextDefault:Uh,ButtonPrimaryTextDisabled:Vh,ButtonSecondaryBackgroundActive:Zh,ButtonSecondaryBackgroundDefault:qh,ButtonSecondaryBackgroundHover:Kh,ButtonSecondaryBackgroundSolid:Xh,ButtonSecondaryBorderDefault:Qh,ButtonSecondaryTextDefault:Jh,ButtonShadowSize:np,ButtonSpacingPaddingHorizontalDesktop:nl,ButtonSpacingPaddingHorizontalMobile:el,ButtonSpacingPaddingVerticalDesktop:tl,ButtonSpacingPaddingVerticalMobile:Qo,ButtonTypographyWeight:rp,CardBackgroundDefault:ap,CardBorderBottom:op,CardBorderDefault:ip,CardBorderHover:sp,CardBorderWidthBottom:fp,CardBorderWidthDefault:dp,CardShadowDefault:hp,CardShadowHover:pp,CardSpacingHeadingMargin:il,CardSpacingPaddingDesktop:al,CardSpacingPaddingMobile:rl,CardTextDescription:cp,CardTextHeading:lp,CardTextLink:up,ColorBorderDefault:Ef,ColorBorderSecondary:Bf,ColorButtonLoginActive:dh,ColorButtonLoginBackground:ch,ColorButtonLoginHover:uh,ColorButtonLoginShadow:fh,ColorButtonPrimaryActive:Vf,ColorButtonPrimaryBackground:zf,ColorButtonPrimaryHover:Uf,ColorButtonPrimaryShadow:Gf,ColorButtonPrimaryText:Wf,ColorButtonReverseActive:rh,ColorButtonReverseBackground:eh,ColorButtonReverseHover:nh,ColorButtonReverseShadow:ah,ColorButtonReverseText:th,ColorButtonSecondaryActive:Jf,ColorButtonSecondaryBackground:Yf,ColorButtonSecondaryBackgroundSolid:qf,ColorButtonSecondaryBorder:Xf,ColorButtonSecondaryHover:Zf,ColorButtonSecondaryShadow:Qf,ColorButtonSecondaryText:Kf,ColorButtonWarningActive:oh,ColorButtonWarningBackground:ih,ColorButtonWarningHover:sh,ColorButtonWarningShadow:lh,ColorError:Rf,ColorFocusBackground:Lf,ColorFocusText:Af,ColorFormBackground:Of,ColorFormBorder:Hf,ColorGrey1:qo,ColorGrey2:Xo,ColorGrey3:Ko,ColorGrey4:Zo,ColorGrey5:Jo,ColorLinkActive:Pf,ColorLinkDefault:$f,ColorLinkHover:If,ColorLinkVisited:Ff,ColorPrimaryBlack:Eo,ColorPrimaryBlue:Lo,ColorPrimaryDarkPink:Ho,ColorPrimaryGreen:Bo,ColorPrimaryPurple:Ro,ColorPrimaryRed:Oo,ColorPrimaryWhite:Ao,ColorPrimaryYellow:zo,ColorSecondaryAquaGreen:Go,ColorSecondaryOrange:Vo,ColorSecondaryPaleYellow:Wo,ColorSecondaryPink:Yo,ColorSecondaryWarmYellow:Uo,ColorTextPrimary:Nf,ColorTextPrint:Mf,ColorTextReverse:Df,ColorTextSecondary:jf,ComponentBlur:Lh,ComponentBreadcrumbChevronMarginLeft:Nh,ComponentBreadcrumbChevronMarginRight:jh,ComponentBreadcrumbPaddingTopDesktop:Mh,ComponentBreadcrumbPaddingTopMobile:Dh,ComponentButtonPaddingDesktopHorizontal:gh,ComponentButtonPaddingDesktopVertical:mh,ComponentButtonPaddingMobileHorizontal:ph,ComponentButtonPaddingMobileVertical:hh,ComponentButtonShadowSize:yh,ComponentCardHeadingMargin:kh,ComponentCardPaddingDesktop:Sh,ComponentCardPaddingMobile:wh,ComponentDetails:Eh,ComponentExpander:Bh,ComponentFormCheckboxLabelPadding:vh,ComponentFormCheckboxSize:xh,ComponentFormInputMinHeight:bh,ComponentFormInputPadding:_h,ComponentLink:Ah,ComponentPagination:Rh,ComponentPanelPaddingDesktop:Th,ComponentPanelPaddingMobile:Ch,ComponentSpread:Fh,ComponentSummaryListCellPaddingHorizontal:Ih,ComponentSummaryListCellPaddingVertical:$h,ComponentSummaryListRowMargin:Ph,ElevationHigh:Hm,ElevationLow:Bm,ElevationMedium:Rm,ElevationNone:Em,FocusOutlineOffset:Pm,FocusOutlineStyle:Fm,FocusOutlineWidth:Im,FocusShadowButton:Am,FocusShadowInput:Lm,FontFamilyBase:ta,FontFamilyFallback:na,FontFamilyPrint:ra,FontLineHeightBase:ts,FontSize14Mobile:oa,FontSize14Print:ca,FontSize14Tablet:la,FontSize16Mobile:ua,FontSize16Print:fa,FontSize16Tablet:da,FontSize19Mobile:ha,FontSize19Print:ma,FontSize19Tablet:pa,FontSize22Mobile:ga,FontSize22Print:ba,FontSize22Tablet:ya,FontSize26Mobile:_a,FontSize26Print:va,FontSize26Tablet:xa,FontSize36Mobile:wa,FontSize36Print:ka,FontSize36Tablet:Sa,FontSize48Mobile:Ca,FontSize48Print:Na,FontSize48Tablet:Ta,FontSizeBase:es,FontWeightBold:ia,FontWeightLight:sa,FontWeightNormal:aa,FormBorderRadius:Fp,FormBorderWidthDefault:Ip,FormBorderWidthError:Pp,FormErrorTextDefault:Dp,FormErrorTypographyWeight:Mp,FormHintTextDefault:$p,FormInputBackgroundDefault:mp,FormInputBackgroundDisabled:yp,FormInputBackgroundError:bp,FormInputBackgroundFocus:gp,FormInputBorderDefault:_p,FormInputBorderDisabled:wp,FormInputBorderError:vp,FormInputBorderFocus:xp,FormInputTextDefault:Sp,FormInputTextDisabled:Cp,FormInputTextPlaceholder:kp,FormLabelTextDefault:Tp,FormLabelTextRequired:Np,FormLabelTypographyWeight:jp,FormSpacingCheckboxLabelPadding:cl,FormSpacingCheckboxSize:ll,FormSpacingInputMinHeight:ol,FormSpacingInputPadding:sl,GridGutter:cm,GridGutterHalf:um,GridPageWidth:lm,HeadingsNhsukHeadingL:Jt,HeadingsNhsukHeadingM:Qt,HeadingsNhsukHeadingS:en,HeadingsNhsukHeadingXl:Zt,HeadingsNhsukHeadingXs:tn,LayoutColumnActions:rm,LayoutColumnFull:Qp,LayoutColumnHalf:em,LayoutColumnQuarter:nm,LayoutColumnThird:tm,LayoutContainerMaxWidth:Jp,ParagraphsBody:nn,ParagraphsBodyLarge:rn,ParagraphsBodySmall:an,ParagraphsLedeText:sn,ParagraphsLedeTextSmall:on,ShadowButtonDefault:Tm,ShadowButtonFocus:Dm,ShadowButtonSecondary:Nm,ShadowButtonWarning:jm,ShadowCardDefault:Mm,ShadowCardHover:$m,SizeButtonMinHeightDesktop:Zp,SizeButtonMinHeightMobile:Kp,SizeFormControlLarge:zp,SizeFormControlMedium:Op,SizeFormControlSmall:Hp,SizeFormInputWidth2xl:qp,SizeFormInputWidth3xl:Xp,SizeFormInputWidthLg:Gp,SizeFormInputWidthMd:Vp,SizeFormInputWidthSm:Up,SizeFormInputWidthXl:Yp,SizeFormInputWidthXs:Wp,SizeIconExtraLarge:Bp,SizeIconLarge:Ep,SizeIconMedium:Ap,SizeIconNhsDefault:Rp,SizeIconSmall:Lp,Spacing0:ul,Spacing1:dl,Spacing2:fl,Spacing3:hl,Spacing4:pl,Spacing5:ml,Spacing6:gl,Spacing7:yl,Spacing8:bl,Spacing9:_l,SpacingResponsive0Mobile:Fi,SpacingResponsive0Tablet:Li,SpacingResponsive1Mobile:Ai,SpacingResponsive1Tablet:Ei,SpacingResponsive2Mobile:Bi,SpacingResponsive2Tablet:Ri,SpacingResponsive3Mobile:Hi,SpacingResponsive3Tablet:Oi,SpacingResponsive4Mobile:zi,SpacingResponsive4Tablet:Wi,SpacingResponsive5Mobile:Ui,SpacingResponsive5Tablet:Vi,SpacingResponsive6Mobile:Gi,SpacingResponsive6Tablet:Yi,SpacingResponsive7Mobile:qi,SpacingResponsive7Tablet:Xi,SpacingResponsive8Mobile:Ki,SpacingResponsive8Tablet:Zi,SpacingResponsive9Mobile:Ji,SpacingResponsive9Tablet:Qi,StateDisabledBackground:Sm,StateDisabledBorder:km,StateDisabledText:Cm,StateErrorBackground:dm,StateErrorBorder:fm,StateErrorText:hm,StateInfoBackground:xm,StateInfoBorder:vm,StateInfoText:wm,StateSuccessBackground:pm,StateSuccessBorder:mm,StateSuccessText:gm,StateWarningBackground:ym,StateWarningBorder:bm,StateWarningText:_m,TransitionButtonDefault:ff,TransitionButtonShadow:hf,TransitionCardHover:mf,TransitionInputFocus:pf},Symbol.toStringTag,{value:"Module"})),Zv=(e,t)=>({fontSize:e.mobile,marginBottom:t.mobile,"@media (min-width: 768px)":{fontSize:e.tablet,marginBottom:t.tablet},"@media print":{fontSize:e.print||e.tablet}}),Jv=({children:e,className:t="",style:n={}})=>s.jsx("h1",{className:t,style:{fontFamily:Zt.fontFamily,fontWeight:Zt.fontWeight,fontSize:Zt.fontSize.mobile,lineHeight:Zt.lineHeight,marginTop:Zt.marginTop,marginBottom:Zt.marginBottom.mobile,...n},children:e}),Qv=({children:e,className:t="",style:n={}})=>s.jsx("h2",{className:t,style:{fontFamily:Jt.fontFamily,fontWeight:Jt.fontWeight,fontSize:Jt.fontSize.mobile,lineHeight:Jt.lineHeight,marginTop:Jt.marginTop,marginBottom:Jt.marginBottom.mobile,...n},children:e}),e1=({children:e,className:t="",style:n={}})=>s.jsx("h3",{className:t,style:{fontFamily:Qt.fontFamily,fontWeight:Qt.fontWeight,fontSize:Qt.fontSize.mobile,lineHeight:Qt.lineHeight,marginTop:Qt.marginTop,marginBottom:Qt.marginBottom.mobile,...n},children:e}),t1=({children:e,className:t="",style:n={}})=>s.jsx("h4",{className:t,style:{fontFamily:en.fontFamily,fontWeight:en.fontWeight,fontSize:en.fontSize.mobile,lineHeight:en.lineHeight,marginTop:en.marginTop,marginBottom:en.marginBottom.mobile,...n},children:e}),n1=({children:e,className:t="",style:n={}})=>s.jsx("h5",{className:t,style:{fontFamily:tn.fontFamily,fontWeight:tn.fontWeight,fontSize:tn.fontSize.mobile,lineHeight:tn.lineHeight,marginTop:tn.marginTop,marginBottom:tn.marginBottom.mobile,...n},children:e}),r1=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:nn.fontFamily,fontWeight:nn.fontWeight,fontSize:nn.fontSize.mobile,lineHeight:nn.lineHeight,marginTop:nn.marginTop,marginBottom:nn.marginBottom.mobile,...n},children:e}),a1=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:rn.fontFamily,fontWeight:rn.fontWeight,fontSize:rn.fontSize.mobile,lineHeight:rn.lineHeight,marginTop:rn.marginTop,marginBottom:rn.marginBottom.mobile,...n},children:e}),i1=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:an.fontFamily,fontWeight:an.fontWeight,fontSize:an.fontSize.mobile,lineHeight:an.lineHeight,marginTop:an.marginTop,marginBottom:an.marginBottom.mobile,...n},children:e}),s1=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:sn.fontFamily,fontWeight:sn.fontWeight,fontSize:sn.fontSize.mobile,lineHeight:sn.lineHeight,marginTop:sn.marginTop,marginBottom:sn.marginBottom.mobile,...n},children:e}),o1=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:on.fontFamily,fontWeight:on.fontWeight,fontSize:on.fontSize.mobile,lineHeight:on.lineHeight,marginTop:on.marginTop,marginBottom:on.marginBottom.mobile,...n},children:e}),l1=()=>E.useMemo(()=>Kv,[]),c1=()=>E.useMemo(()=>({BorderColorDefault:Mo,BorderColorForm:$o,BorderColorCard:Io,BorderColorCardHover:Po,BorderColorError:Fo,ColorPrimaryBlue:Lo,ColorPrimaryWhite:Ao,ColorPrimaryBlack:Eo,ColorPrimaryGreen:Bo,ColorPrimaryPurple:Ro,ColorPrimaryDarkPink:Ho,ColorPrimaryRed:Oo,ColorPrimaryYellow:zo,ColorSecondaryPaleYellow:Wo,ColorSecondaryWarmYellow:Uo,ColorSecondaryOrange:Vo,ColorSecondaryAquaGreen:Go,ColorSecondaryPink:Yo,ColorGrey1:qo,ColorGrey2:Xo,ColorGrey3:Ko,ColorGrey4:Zo,ColorGrey5:Jo}),[]),u1=()=>E.useMemo(()=>({Spacing0:ul,Spacing1:dl,Spacing2:fl,Spacing3:hl,Spacing4:pl,Spacing5:ml,Spacing6:gl,Spacing7:yl,Spacing8:bl,Spacing9:_l}),[]),d1=()=>E.useMemo(()=>({Mobile:{Size14:oa,Size16:ua,Size19:ha,Size22:ga,Size26:_a,Size36:wa,Size48:Ca},Tablet:{Size14:la,Size16:da,Size19:pa,Size22:ya,Size26:xa,Size36:Sa,Size48:Ta},Print:{Size14:ca,Size16:fa,Size19:ma,Size22:ba,Size26:va,Size36:ka,Size48:Na},Family:{Base:ta,Fallback:na,Print:ra},Weight:{Normal:aa,Bold:ia,Light:sa},Base:{Size:es,LineHeight:ts},FontFamilyBase:ta,FontFamilyFallback:na,FontFamilyPrint:ra,FontWeightNormal:aa,FontWeightBold:ia,FontWeightLight:sa,FontSize14Mobile:oa,FontSize14Tablet:la,FontSize14Print:ca,FontSize16Mobile:ua,FontSize16Tablet:da,FontSize16Print:fa,FontSize19Mobile:ha,FontSize19Tablet:pa,FontSize19Print:ma,FontSize22Mobile:ga,FontSize22Tablet:ya,FontSize22Print:ba,FontSize26Mobile:_a,FontSize26Tablet:xa,FontSize26Print:va,FontSize36Mobile:wa,FontSize36Tablet:Sa,FontSize36Print:ka,FontSize48Mobile:Ca,FontSize48Tablet:Ta,FontSize48Print:Na,FontSizeBase:es,FontLineHeightBase:ts}),[]),f1=()=>E.useMemo(()=>({Mobile:{Size0:Fi,Size1:Ai,Size2:Bi,Size3:Hi,Size4:zi,Size5:Ui,Size6:Gi,Size7:qi,Size8:Ki,Size9:Ji},Tablet:{Size0:Li,Size1:Ei,Size2:Ri,Size3:Oi,Size4:Wi,Size5:Vi,Size6:Yi,Size7:Xi,Size8:Zi,Size9:Qi},SpacingResponsive0Mobile:Fi,SpacingResponsive0Tablet:Li,SpacingResponsive1Mobile:Ai,SpacingResponsive1Tablet:Ei,SpacingResponsive2Mobile:Bi,SpacingResponsive2Tablet:Ri,SpacingResponsive3Mobile:Hi,SpacingResponsive3Tablet:Oi,SpacingResponsive4Mobile:zi,SpacingResponsive4Tablet:Wi,SpacingResponsive5Mobile:Ui,SpacingResponsive5Tablet:Vi,SpacingResponsive6Mobile:Gi,SpacingResponsive6Tablet:Yi,SpacingResponsive7Mobile:qi,SpacingResponsive7Tablet:Xi,SpacingResponsive8Mobile:Ki,SpacingResponsive8Tablet:Zi,SpacingResponsive9Mobile:Ji,SpacingResponsive9Tablet:Qi}),[]),h1=()=>E.useMemo(()=>({ButtonSpacingPaddingVerticalMobile:Qo,ButtonSpacingPaddingHorizontalMobile:el,ButtonSpacingPaddingVerticalDesktop:tl,ButtonSpacingPaddingHorizontalDesktop:nl,CardSpacingPaddingMobile:rl,CardSpacingPaddingDesktop:al,CardSpacingHeadingMargin:il,FormSpacingInputPadding:sl,FormSpacingInputMinHeight:ol,FormSpacingCheckboxSize:ll,FormSpacingCheckboxLabelPadding:cl}),[]),p1=()=>E.useMemo(()=>({xl:Zt,l:Jt,m:Qt,s:en,xs:tn}),[]),m1=()=>E.useMemo(()=>({body:nn,bodyLarge:rn,bodySmall:an,ledeText:sn,ledeTextSmall:on}),[]),g1=()=>E.useMemo(()=>({headings:{xl:Zt,l:Jt,m:Qt,s:en,xs:tn},paragraphs:{body:nn,bodyLarge:rn,bodySmall:an,ledeText:sn,ledeTextSmall:on},fonts:{family:{base:ta,fallback:na,print:ra},weight:{normal:aa,bold:ia,light:sa},sizes:{mobile:{size14:oa,size16:ua,size19:ha,size22:ga,size26:_a,size36:wa,size48:Ca},tablet:{size14:la,size16:da,size19:pa,size22:ya,size26:xa,size36:Sa,size48:Ta},print:{size14:ca,size16:fa,size19:ma,size22:ba,size26:va,size36:ka,size48:Na}}}}),[]);function y1(e={}){const{initialLayout:t=void 0,fallbackLayout:n="two-column"}=e,[r,a]=Z.useState(t),i=Z.useCallback(()=>a("three-column"),[]),o=Z.useCallback(()=>a(u=>u==="three-column"?n:u),[n]),l=Z.useCallback(()=>a(u=>u==="three-column"?n:"three-column"),[n]);return{forceLayout:r,setLayout:a,drillIn:i,drillOut:o,toggle:l,isDrilledIn:r==="three-column"}}const xl={fontPath:"https://assets.nhs.uk/fonts/",includeFontFace:!0,useFallbacks:!0,fontWeights:[400,600]},St={normal:{woff2:"FrutigerLTW01-55Roman.woff2",woff:"FrutigerLTW01-55Roman.woff",ttf:"FrutigerLTW01-55Roman.ttf",eot:"FrutigerLTW01-55Roman.eot"},bold:{woff2:"FrutigerLTW01-65Bold.woff2",woff:"FrutigerLTW01-65Bold.woff",ttf:"FrutigerLTW01-65Bold.ttf",eot:"FrutigerLTW01-65Bold.eot"}};function b1(e={}){const{fontPath:t,fontWeights:n}={...xl,...e},r=[];return n?.includes(400)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 400;
  src: url("${t}${St.normal.eot}?#iefix") format("eot"),
       url("${t}${St.normal.woff2}") format("woff2"),
       url("${t}${St.normal.woff}") format("woff"),
       url("${t}${St.normal.ttf}") format("truetype");
  src: url("${t}${St.normal.eot}");
}`),n?.includes(600)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 600;
  src: url("${t}${St.bold.eot}?#iefix") format("eot"),
       url("${t}${St.bold.woff2}") format("woff2"),
       url("${t}${St.bold.woff}") format("woff"),
       url("${t}${St.bold.ttf}") format("truetype");
  src: url("${t}${St.bold.eot}");
}`),r.join(`
`)}function _1(e={}){if(typeof document>"u")return;const{fontPath:t,fontWeights:n}={...xl,...e};[...n?.includes(400)?[{href:`${t}${St.normal.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${St.normal.woff}`,as:"font",type:"font/woff"}]:[],...n?.includes(600)?[{href:`${t}${St.bold.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${St.bold.woff}`,as:"font",type:"font/woff"}]:[]].forEach(a=>{const i=document.createElement("link");i.rel="preload",i.href=a.href,i.as=a.as,i.type=a.type,i.crossOrigin="anonymous",document.head.appendChild(i)})}const x1='"Frutiger W01", Arial, Helvetica, sans-serif',v1="Arial, Helvetica, sans-serif";async function w1(){if(typeof document>"u"||!document.fonts)return!1;try{return await document.fonts.load('1em "Frutiger W01"'),document.fonts.check('1em "Frutiger W01"')}catch{return!1}}function xn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Om(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Mt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},xr={duration:.5,overwrite:!1,delay:0},vl,gt,Ge,Bt=1e8,ze=1/Bt,wl=Math.PI*2,S1=wl/4,k1=0,zm=Math.sqrt,C1=Math.cos,T1=Math.sin,ht=function(t){return typeof t=="string"},Je=function(t){return typeof t=="function"},vn=function(t){return typeof t=="number"},Sl=function(t){return typeof t>"u"},ln=function(t){return typeof t=="object"},Ct=function(t){return t!==!1},kl=function(){return typeof window<"u"},ns=function(t){return Je(t)||ht(t)},Wm=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},xt=Array.isArray,Cl=/(?:-?\.?\d|\.)+/gi,Um=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,vr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Tl=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Vm=/[+-]=-?[.\d]+/,Gm=/[^,'"\[\]\s]+/gi,N1=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Xe,cn,Nl,jl,$t={},rs={},Ym,qm=function(t){return(rs=Sr(t,$t))&&jt},Dl=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},ja=function(t,n){return!n&&console.warn(t)},Xm=function(t,n){return t&&($t[t]=n)&&rs&&(rs[t]=n)||$t},Da=function(){return 0},j1={suppressEvents:!0,isStart:!0,kill:!1},as={suppressEvents:!0,kill:!1},D1={suppressEvents:!0},Ml={},$n=[],$l={},Km,It={},Il={},Zm=30,is=[],Pl="",Fl=function(t){var n=t[0],r,a;if(ln(n)||Je(n)||(t=[t]),!(r=(n._gsap||{}).harness)){for(a=is.length;a--&&!is[a].targetTest(n););r=is[a]}for(a=t.length;a--;)t[a]&&(t[a]._gsap||(t[a]._gsap=new Tg(t[a],r)))||t.splice(a,1);return t},Kn=function(t){return t._gsap||Fl(Ht(t))[0]._gsap},Jm=function(t,n,r){return(r=t[n])&&Je(r)?t[n]():Sl(r)&&t.getAttribute&&t.getAttribute(n)||r},Tt=function(t,n){return(t=t.split(",")).forEach(n)||t},nt=function(t){return Math.round(t*1e5)/1e5||0},st=function(t){return Math.round(t*1e7)/1e7||0},wr=function(t,n){var r=n.charAt(0),a=parseFloat(n.substr(2));return t=parseFloat(t),r==="+"?t+a:r==="-"?t-a:r==="*"?t*a:t/a},M1=function(t,n){for(var r=n.length,a=0;t.indexOf(n[a])<0&&++a<r;);return a<r},ss=function(){var t=$n.length,n=$n.slice(0),r,a;for($l={},$n.length=0,r=0;r<t;r++)a=n[r],a&&a._lazy&&(a.render(a._lazy[0],a._lazy[1],!0)._lazy=0)},Ll=function(t){return!!(t._initted||t._startAt||t.add)},Qm=function(t,n,r,a){$n.length&&!gt&&ss(),t.render(n,r,!!(gt&&n<0&&Ll(t))),$n.length&&!gt&&ss()},eg=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(Gm).length<2?n:ht(t)?t.trim():t},tg=function(t){return t},Pt=function(t,n){for(var r in n)r in t||(t[r]=n[r]);return t},$1=function(t){return function(n,r){for(var a in r)a in n||a==="duration"&&t||a==="ease"||(n[a]=r[a])}},Sr=function(t,n){for(var r in n)t[r]=n[r];return t},ng=function e(t,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(t[r]=ln(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},os=function(t,n){var r={},a;for(a in t)a in n||(r[a]=t[a]);return r},Ma=function(t){var n=t.parent||Xe,r=t.keyframes?$1(xt(t.keyframes)):Pt;if(Ct(t.inherit))for(;n;)r(t,n.vars.defaults),n=n.parent||n._dp;return t},I1=function(t,n){for(var r=t.length,a=r===n.length;a&&r--&&t[r]===n[r];);return r<0},rg=function(t,n,r,a,i){var o=t[a],l;if(i)for(l=n[i];o&&o[i]>l;)o=o._prev;return o?(n._next=o._next,o._next=n):(n._next=t[r],t[r]=n),n._next?n._next._prev=n:t[a]=n,n._prev=o,n.parent=n._dp=t,n},ls=function(t,n,r,a){r===void 0&&(r="_first"),a===void 0&&(a="_last");var i=n._prev,o=n._next;i?i._next=o:t[r]===n&&(t[r]=o),o?o._prev=i:t[a]===n&&(t[a]=i),n._next=n._prev=n.parent=null},In=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Zn=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},P1=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},Al=function(t,n,r,a){return t._startAt&&(gt?t._startAt.revert(as):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,a))},F1=function e(t){return!t||t._ts&&e(t.parent)},ag=function(t){return t._repeat?kr(t._tTime,t=t.duration()+t._rDelay)*t:0},kr=function(t,n){var r=Math.floor(t=st(t/n));return t&&r===t?r-1:r},cs=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},us=function(t){return t._end=st(t._start+(t._tDur/Math.abs(t._ts||t._rts||ze)||0))},ds=function(t,n){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=st(r._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),us(t),r._dirty||Zn(r,t)),t},ig=function(t,n){var r;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(r=cs(t.rawTime(),n),(!n._dur||Ia(0,n.totalDuration(),r)-n._tTime>ze)&&n.render(r,!0)),Zn(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-ze}},un=function(t,n,r,a){return n.parent&&In(n),n._start=st((vn(r)?r:r||t!==Xe?Rt(t,r,n):t._time)+n._delay),n._end=st(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),rg(t,n,"_first","_last",t._sort?"_start":0),El(n)||(t._recent=n),a||ig(t,n),t._ts<0&&ds(t,t._tTime),t},sg=function(t,n){return($t.ScrollTrigger||Dl("scrollTrigger",n))&&$t.ScrollTrigger.create(n,t)},og=function(t,n,r,a,i){if(Gl(t,n,i),!t._initted)return 1;if(!r&&t._pt&&!gt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Km!==Lt.frame)return $n.push(t),t._lazy=[i,a],1},L1=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},El=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},A1=function(t,n,r,a){var i=t.ratio,o=n<0||!n&&(!t._start&&L1(t)&&!(!t._initted&&El(t))||(t._ts<0||t._dp._ts<0)&&!El(t))?0:1,l=t._rDelay,u=0,c,d,f;if(l&&t._repeat&&(u=Ia(0,t._tDur,n),d=kr(u,l),t._yoyo&&d&1&&(o=1-o),d!==kr(t._tTime,l)&&(i=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==i||gt||a||t._zTime===ze||!n&&t._zTime){if(!t._initted&&og(t,n,a,r,u))return;for(f=t._zTime,t._zTime=n||(r?ze:0),r||(r=n&&!f),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=u,c=t._pt;c;)c.r(o,c.d),c=c._next;n<0&&Al(t,n,r,!0),t._onUpdate&&!r&&Ft(t,"onUpdate"),u&&t._repeat&&!r&&t.parent&&Ft(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===o&&(o&&In(t,1),!r&&!gt&&(Ft(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},E1=function(t,n,r){var a;if(r>n)for(a=t._first;a&&a._start<=r;){if(a.data==="isPause"&&a._start>n)return a;a=a._next}else for(a=t._last;a&&a._start>=r;){if(a.data==="isPause"&&a._start<n)return a;a=a._prev}},Cr=function(t,n,r,a){var i=t._repeat,o=st(n)||0,l=t._tTime/t._tDur;return l&&!a&&(t._time*=o/t._dur),t._dur=o,t._tDur=i?i<0?1e10:st(o*(i+1)+t._rDelay*i):o,l>0&&!a&&ds(t,t._tTime=t._tDur*l),t.parent&&us(t),r||Zn(t.parent,t),t},lg=function(t){return t instanceof yt?Zn(t):Cr(t,t._dur)},B1={_start:0,endTime:Da,totalDuration:Da},Rt=function e(t,n,r){var a=t.labels,i=t._recent||B1,o=t.duration()>=Bt?i.endTime(!1):t._dur,l,u,c;return ht(n)&&(isNaN(n)||n in a)?(u=n.charAt(0),c=n.substr(-1)==="%",l=n.indexOf("="),u==="<"||u===">"?(l>=0&&(n=n.replace(/=/,"")),(u==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(n.substr(1))||0)*(c?(l<0?i:r).totalDuration()/100:1)):l<0?(n in a||(a[n]=o),a[n]):(u=parseFloat(n.charAt(l-1)+n.substr(l+1)),c&&r&&(u=u/100*(xt(r)?r[0]:r).totalDuration()),l>1?e(t,n.substr(0,l-1),r)+u:o+u)):n==null?o:+n},$a=function(t,n,r){var a=vn(n[1]),i=(a?2:1)+(t<2?0:1),o=n[i],l,u;if(a&&(o.duration=n[1]),o.parent=r,t){for(l=o,u=r;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=Ct(u.vars.inherit)&&u.parent;o.immediateRender=Ct(l.immediateRender),t<2?o.runBackwards=1:o.startAt=n[i-1]}return new rt(n[0],o,n[i+1])},Pn=function(t,n){return t||t===0?n(t):n},Ia=function(t,n,r){return r<t?t:r>n?n:r},vt=function(t,n){return!ht(t)||!(n=N1.exec(t))?"":n[1]},R1=function(t,n,r){return Pn(r,function(a){return Ia(t,n,a)})},Bl=[].slice,cg=function(t,n){return t&&ln(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&ln(t[0]))&&!t.nodeType&&t!==cn},H1=function(t,n,r){return r===void 0&&(r=[]),t.forEach(function(a){var i;return ht(a)&&!n||cg(a,1)?(i=r).push.apply(i,Ht(a)):r.push(a)})||r},Ht=function(t,n,r){return Ge&&!n&&Ge.selector?Ge.selector(t):ht(t)&&!r&&(Nl||!Nr())?Bl.call((n||jl).querySelectorAll(t),0):xt(t)?H1(t,r):cg(t)?Bl.call(t,0):t?[t]:[]},Rl=function(t){return t=Ht(t)[0]||ja("Invalid scope")||{},function(n){var r=t.current||t.nativeElement||t;return Ht(n,r.querySelectorAll?r:r===t?ja("Invalid scope")||jl.createElement("div"):t)}},ug=function(t){return t.sort(function(){return .5-Math.random()})},dg=function(t){if(Je(t))return t;var n=ln(t)?t:{each:t},r=Jn(n.ease),a=n.from||0,i=parseFloat(n.base)||0,o={},l=a>0&&a<1,u=isNaN(a)||l,c=n.axis,d=a,f=a;return ht(a)?d=f={center:.5,edges:.5,end:1}[a]||0:!l&&u&&(d=a[0],f=a[1]),function(p,g,_){var h=(_||n).length,m=o[h],y,C,j,k,$,N,T,w,x;if(!m){if(x=n.grid==="auto"?0:(n.grid||[1,Bt])[1],!x){for(T=-Bt;T<(T=_[x++].getBoundingClientRect().left)&&x<h;);x<h&&x--}for(m=o[h]=[],y=u?Math.min(x,h)*d-.5:a%x,C=x===Bt?0:u?h*f/x-.5:a/x|0,T=0,w=Bt,N=0;N<h;N++)j=N%x-y,k=C-(N/x|0),m[N]=$=c?Math.abs(c==="y"?k:j):zm(j*j+k*k),$>T&&(T=$),$<w&&(w=$);a==="random"&&ug(m),m.max=T-w,m.min=w,m.v=h=(parseFloat(n.amount)||parseFloat(n.each)*(x>h?h-1:c?c==="y"?h/x:x:Math.max(x,h/x))||0)*(a==="edges"?-1:1),m.b=h<0?i-h:i,m.u=vt(n.amount||n.each)||0,r=r&&h<0?Sg(r):r}return h=(m[p]-m.min)/m.max||0,st(m.b+(r?r(h):h)*m.v)+m.u}},Hl=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var a=st(Math.round(parseFloat(r)/t)*t*n);return(a-a%1)/n+(vn(r)?0:vt(r))}},fg=function(t,n){var r=xt(t),a,i;return!r&&ln(t)&&(a=r=t.radius||Bt,t.values?(t=Ht(t.values),(i=!vn(t[0]))&&(a*=a)):t=Hl(t.increment)),Pn(n,r?Je(t)?function(o){return i=t(o),Math.abs(i-o)<=a?i:o}:function(o){for(var l=parseFloat(i?o.x:o),u=parseFloat(i?o.y:0),c=Bt,d=0,f=t.length,p,g;f--;)i?(p=t[f].x-l,g=t[f].y-u,p=p*p+g*g):p=Math.abs(t[f]-l),p<c&&(c=p,d=f);return d=!a||c<=a?t[d]:o,i||d===o||vn(o)?d:d+vt(o)}:Hl(t))},hg=function(t,n,r,a){return Pn(xt(t)?!n:r===!0?!!(r=0):!a,function(){return xt(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(a=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(n-t+r*.99))/r)*r*a)/a})},O1=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(a){return n.reduce(function(i,o){return o(i)},a)}},z1=function(t,n){return function(r){return t(parseFloat(r))+(n||vt(r))}},W1=function(t,n,r){return mg(t,n,0,1,r)},pg=function(t,n,r){return Pn(r,function(a){return t[~~n(a)]})},U1=function e(t,n,r){var a=n-t;return xt(t)?pg(t,e(0,t.length),n):Pn(r,function(i){return(a+(i-t)%a)%a+t})},V1=function e(t,n,r){var a=n-t,i=a*2;return xt(t)?pg(t,e(0,t.length-1),n):Pn(r,function(o){return o=(i+(o-t)%i)%i||0,t+(o>a?i-o:o)})},Pa=function(t){for(var n=0,r="",a,i,o,l;~(a=t.indexOf("random(",n));)o=t.indexOf(")",a),l=t.charAt(a+7)==="[",i=t.substr(a+7,o-a-7).match(l?Gm:Cl),r+=t.substr(n,a-n)+hg(l?i:+i[0],l?0:+i[1],+i[2]||1e-5),n=o+1;return r+t.substr(n,t.length-n)},mg=function(t,n,r,a,i){var o=n-t,l=a-r;return Pn(i,function(u){return r+((u-t)/o*l||0)})},G1=function e(t,n,r,a){var i=isNaN(t+n)?0:function(g){return(1-g)*t+g*n};if(!i){var o=ht(t),l={},u,c,d,f,p;if(r===!0&&(a=1)&&(r=null),o)t={p:t},n={p:n};else if(xt(t)&&!xt(n)){for(d=[],f=t.length,p=f-2,c=1;c<f;c++)d.push(e(t[c-1],t[c]));f--,i=function(_){_*=f;var h=Math.min(p,~~_);return d[h](_-h)},r=n}else a||(t=Sr(xt(t)?[]:{},t));if(!d){for(u in n)Ul.call(l,t,u,"get",n[u]);i=function(_){return Xl(_,l)||(o?t.p:t)}}}return Pn(r,i)},gg=function(t,n,r){var a=t.labels,i=Bt,o,l,u;for(o in a)l=a[o]-n,l<0==!!r&&l&&i>(l=Math.abs(l))&&(u=o,i=l);return u},Ft=function(t,n,r){var a=t.vars,i=a[n],o=Ge,l=t._ctx,u,c,d;if(i)return u=a[n+"Params"],c=a.callbackScope||t,r&&$n.length&&ss(),l&&(Ge=l),d=u?i.apply(c,u):i.call(c),Ge=o,d},Fa=function(t){return In(t),t.scrollTrigger&&t.scrollTrigger.kill(!!gt),t.progress()<1&&Ft(t,"onInterrupt"),t},Tr,yg=[],bg=function(t){if(t)if(t=!t.name&&t.default||t,kl()||t.headless){var n=t.name,r=Je(t),a=n&&!r&&t.init?function(){this._props=[]}:t,i={init:Da,render:Xl,add:Ul,kill:lw,modifier:ow,rawVars:0},o={targetTest:0,get:0,getSetter:ql,aliases:{},register:0};if(Nr(),t!==a){if(It[n])return;Pt(a,Pt(os(t,i),o)),Sr(a.prototype,Sr(i,os(t,o))),It[a.prop=n]=a,t.targetTest&&(is.push(a),Ml[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}Xm(n,a),t.register&&t.register(jt,a,Nt)}else yg.push(t)},We=255,La={aqua:[0,We,We],lime:[0,We,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,We],navy:[0,0,128],white:[We,We,We],olive:[128,128,0],yellow:[We,We,0],orange:[We,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[We,0,0],pink:[We,192,203],cyan:[0,We,We],transparent:[We,We,We,0]},Ol=function(t,n,r){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(r-n)*t*6:t<.5?r:t*3<2?n+(r-n)*(2/3-t)*6:n)*We+.5|0},_g=function(t,n,r){var a=t?vn(t)?[t>>16,t>>8&We,t&We]:0:La.black,i,o,l,u,c,d,f,p,g,_;if(!a){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),La[t])a=La[t];else if(t.charAt(0)==="#"){if(t.length<6&&(i=t.charAt(1),o=t.charAt(2),l=t.charAt(3),t="#"+i+i+o+o+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return a=parseInt(t.substr(1,6),16),[a>>16,a>>8&We,a&We,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),a=[t>>16,t>>8&We,t&We]}else if(t.substr(0,3)==="hsl"){if(a=_=t.match(Cl),!n)u=+a[0]%360/360,c=+a[1]/100,d=+a[2]/100,o=d<=.5?d*(c+1):d+c-d*c,i=d*2-o,a.length>3&&(a[3]*=1),a[0]=Ol(u+1/3,i,o),a[1]=Ol(u,i,o),a[2]=Ol(u-1/3,i,o);else if(~t.indexOf("="))return a=t.match(Um),r&&a.length<4&&(a[3]=1),a}else a=t.match(Cl)||La.transparent;a=a.map(Number)}return n&&!_&&(i=a[0]/We,o=a[1]/We,l=a[2]/We,f=Math.max(i,o,l),p=Math.min(i,o,l),d=(f+p)/2,f===p?u=c=0:(g=f-p,c=d>.5?g/(2-f-p):g/(f+p),u=f===i?(o-l)/g+(o<l?6:0):f===o?(l-i)/g+2:(i-o)/g+4,u*=60),a[0]=~~(u+.5),a[1]=~~(c*100+.5),a[2]=~~(d*100+.5)),r&&a.length<4&&(a[3]=1),a},xg=function(t){var n=[],r=[],a=-1;return t.split(Fn).forEach(function(i){var o=i.match(vr)||[];n.push.apply(n,o),r.push(a+=o.length+1)}),n.c=r,n},vg=function(t,n,r){var a="",i=(t+a).match(Fn),o=n?"hsla(":"rgba(",l=0,u,c,d,f;if(!i)return t;if(i=i.map(function(p){return(p=_g(p,n,1))&&o+(n?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),r&&(d=xg(t),u=r.c,u.join(a)!==d.c.join(a)))for(c=t.replace(Fn,"1").split(vr),f=c.length-1;l<f;l++)a+=c[l]+(~u.indexOf(l)?i.shift()||o+"0,0,0,0)":(d.length?d:i.length?i:r).shift());if(!c)for(c=t.split(Fn),f=c.length-1;l<f;l++)a+=c[l]+i[l];return a+c[f]},Fn=(function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in La)e+="|"+t+"\\b";return new RegExp(e+")","gi")})(),Y1=/hsl[a]?\(/,wg=function(t){var n=t.join(" "),r;if(Fn.lastIndex=0,Fn.test(n))return r=Y1.test(n),t[1]=vg(t[1],r),t[0]=vg(t[0],r,xg(t[1])),!0},Aa,Lt=(function(){var e=Date.now,t=500,n=33,r=e(),a=r,i=1e3/240,o=i,l=[],u,c,d,f,p,g,_=function h(m){var y=e()-a,C=m===!0,j,k,$,N;if((y>t||y<0)&&(r+=y-n),a+=y,$=a-r,j=$-o,(j>0||C)&&(N=++f.frame,p=$-f.time*1e3,f.time=$=$/1e3,o+=j+(j>=i?4:i-j),k=1),C||(u=c(h)),k)for(g=0;g<l.length;g++)l[g]($,p,N,m)};return f={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(m){return p/(1e3/(m||60))},wake:function(){Ym&&(!Nl&&kl()&&(cn=Nl=window,jl=cn.document||{},$t.gsap=jt,(cn.gsapVersions||(cn.gsapVersions=[])).push(jt.version),qm(rs||cn.GreenSockGlobals||!cn.gsap&&cn||{}),yg.forEach(bg)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&f.sleep(),c=d||function(m){return setTimeout(m,o-f.time*1e3+1|0)},Aa=1,_(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(u),Aa=0,c=Da},lagSmoothing:function(m,y){t=m||1/0,n=Math.min(y||33,t)},fps:function(m){i=1e3/(m||240),o=f.time*1e3+i},add:function(m,y,C){var j=y?function(k,$,N,T){m(k,$,N,T),f.remove(j)}:m;return f.remove(m),l[C?"unshift":"push"](j),Nr(),j},remove:function(m,y){~(y=l.indexOf(m))&&l.splice(y,1)&&g>=y&&g--},_listeners:l},f})(),Nr=function(){return!Aa&&Lt.wake()},Fe={},q1=/^[\d.\-M][\d.\-,\s]/,X1=/["']/g,K1=function(t){for(var n={},r=t.substr(1,t.length-3).split(":"),a=r[0],i=1,o=r.length,l,u,c;i<o;i++)u=r[i],l=i!==o-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),n[a]=isNaN(c)?c.replace(X1,"").trim():+c,a=u.substr(l+1).trim();return n},Z1=function(t){var n=t.indexOf("(")+1,r=t.indexOf(")"),a=t.indexOf("(",n);return t.substring(n,~a&&a<r?t.indexOf(")",r+1):r)},J1=function(t){var n=(t+"").split("("),r=Fe[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[K1(n[1])]:Z1(t).split(",").map(eg)):Fe._CE&&q1.test(t)?Fe._CE("",t):r},Sg=function(t){return function(n){return 1-t(1-n)}},kg=function e(t,n){for(var r=t._first,a;r;)r instanceof yt?e(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?e(r.timeline,n):(a=r._ease,r._ease=r._yEase,r._yEase=a,r._yoyo=n)),r=r._next},Jn=function(t,n){return t&&(Je(t)?t:Fe[t]||J1(t))||n},Qn=function(t,n,r,a){r===void 0&&(r=function(u){return 1-n(1-u)}),a===void 0&&(a=function(u){return u<.5?n(u*2)/2:1-n((1-u)*2)/2});var i={easeIn:n,easeOut:r,easeInOut:a},o;return Tt(t,function(l){Fe[l]=$t[l]=i,Fe[o=l.toLowerCase()]=r;for(var u in i)Fe[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=Fe[l+"."+u]=i[u]}),i},Cg=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},zl=function e(t,n,r){var a=n>=1?n:1,i=(r||(t?.3:.45))/(n<1?n:1),o=i/wl*(Math.asin(1/a)||0),l=function(d){return d===1?1:a*Math.pow(2,-10*d)*T1((d-o)*i)+1},u=t==="out"?l:t==="in"?function(c){return 1-l(1-c)}:Cg(l);return i=wl/i,u.config=function(c,d){return e(t,c,d)},u},Wl=function e(t,n){n===void 0&&(n=1.70158);var r=function(o){return o?--o*o*((n+1)*o+n)+1:0},a=t==="out"?r:t==="in"?function(i){return 1-r(1-i)}:Cg(r);return a.config=function(i){return e(t,i)},a};Tt("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;Qn(e+",Power"+(n-1),t?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})}),Fe.Linear.easeNone=Fe.none=Fe.Linear.easeIn,Qn("Elastic",zl("in"),zl("out"),zl()),(function(e,t){var n=1/t,r=2*n,a=2.5*n,i=function(l){return l<n?e*l*l:l<r?e*Math.pow(l-1.5/t,2)+.75:l<a?e*(l-=2.25/t)*l+.9375:e*Math.pow(l-2.625/t,2)+.984375};Qn("Bounce",function(o){return 1-i(1-o)},i)})(7.5625,2.75),Qn("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),Qn("Circ",function(e){return-(zm(1-e*e)-1)}),Qn("Sine",function(e){return e===1?1:-C1(e*S1)+1}),Qn("Back",Wl("in"),Wl("out"),Wl()),Fe.SteppedEase=Fe.steps=$t.SteppedEase={config:function(t,n){t===void 0&&(t=1);var r=1/t,a=t+(n?0:1),i=n?1:0,o=1-ze;return function(l){return((a*Ia(0,o,l)|0)+i)*r}}},xr.ease=Fe["quad.out"],Tt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return Pl+=e+","+e+"Params,"});var Tg=function(t,n){this.id=k1++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:Jm,this.set=n?n.getSetter:ql},Ea=(function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,Cr(this,+n.duration,1,1),this.data=n.data,Ge&&(this._ctx=Ge,Ge.data.push(this)),Aa||Lt.wake()}var t=e.prototype;return t.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},t.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},t.totalDuration=function(r){return arguments.length?(this._dirty=0,Cr(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(r,a){if(Nr(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(ds(this,r),!i._dp||i.parent||ig(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&un(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!a||this._initted&&Math.abs(this._zTime)===ze||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Qm(this,r,a)),this},t.time=function(r,a){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+ag(this))%(this._dur+this._rDelay)||(r?this._dur:0),a):this._time},t.totalProgress=function(r,a){return arguments.length?this.totalTime(this.totalDuration()*r,a):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(r,a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+ag(this),a):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(r,a){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*i,a):this._repeat?kr(this._tTime,i)+1:1},t.timeScale=function(r,a){if(!arguments.length)return this._rts===-ze?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?cs(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-ze?0:this._rts,this.totalTime(Ia(-Math.abs(this._delay),this.totalDuration(),i),a!==!1),us(this),P1(this)},t.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Nr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ze&&(this._tTime-=ze)))),this):this._ps},t.startTime=function(r){if(arguments.length){this._start=r;var a=this.parent||this._dp;return a&&(a._sort||!this.parent)&&un(a,this,r-this._delay),this}return this._start},t.endTime=function(r){return this._start+(Ct(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(r){var a=this.parent||this._dp;return a?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?cs(a.rawTime(r),this):this._tTime:this._tTime},t.revert=function(r){r===void 0&&(r=D1);var a=gt;return gt=r,Ll(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),gt=a,this},t.globalTime=function(r){for(var a=this,i=arguments.length?r:a.rawTime();a;)i=a._start+i/(Math.abs(a._ts)||1),a=a._dp;return!this.parent&&this._sat?this._sat.globalTime(r):i},t.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,lg(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(r){if(arguments.length){var a=this._time;return this._rDelay=r,lg(this),a?this.time(a):this}return this._rDelay},t.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},t.seek=function(r,a){return this.totalTime(Rt(this,r),Ct(a))},t.restart=function(r,a){return this.play().totalTime(r?-this._delay:0,Ct(a)),this._dur||(this._zTime=-ze),this},t.play=function(r,a){return r!=null&&this.seek(r,a),this.reversed(!1).paused(!1)},t.reverse=function(r,a){return r!=null&&this.seek(r||this.totalDuration(),a),this.reversed(!0).paused(!1)},t.pause=function(r,a){return r!=null&&this.seek(r,a),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-ze:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-ze,this},t.isActive=function(){var r=this.parent||this._dp,a=this._start,i;return!!(!r||this._ts&&this._initted&&r.isActive()&&(i=r.rawTime(!0))>=a&&i<this.endTime(!0)-ze)},t.eventCallback=function(r,a,i){var o=this.vars;return arguments.length>1?(a?(o[r]=a,i&&(o[r+"Params"]=i),r==="onUpdate"&&(this._onUpdate=a)):delete o[r],this):o[r]},t.then=function(r){var a=this;return new Promise(function(i){var o=Je(r)?r:tg,l=function(){var c=a.then;a.then=null,Je(o)&&(o=o(a))&&(o.then||o===a)&&(a.then=c),i(o),a.then=c};a._initted&&a.totalProgress()===1&&a._ts>=0||!a._tTime&&a._ts<0?l():a._prom=l})},t.kill=function(){Fa(this)},e})();Pt(Ea.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ze,_prom:0,_ps:!1,_rts:1});var yt=(function(e){Om(t,e);function t(r,a){var i;return r===void 0&&(r={}),i=e.call(this,r)||this,i.labels={},i.smoothChildTiming=!!r.smoothChildTiming,i.autoRemoveChildren=!!r.autoRemoveChildren,i._sort=Ct(r.sortChildren),Xe&&un(r.parent||Xe,xn(i),a),r.reversed&&i.reverse(),r.paused&&i.paused(!0),r.scrollTrigger&&sg(xn(i),r.scrollTrigger),i}var n=t.prototype;return n.to=function(a,i,o){return $a(0,arguments,this),this},n.from=function(a,i,o){return $a(1,arguments,this),this},n.fromTo=function(a,i,o,l){return $a(2,arguments,this),this},n.set=function(a,i,o){return i.duration=0,i.parent=this,Ma(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new rt(a,i,Rt(this,o),1),this},n.call=function(a,i,o){return un(this,rt.delayedCall(0,a,i),o)},n.staggerTo=function(a,i,o,l,u,c,d){return o.duration=i,o.stagger=o.stagger||l,o.onComplete=c,o.onCompleteParams=d,o.parent=this,new rt(a,o,Rt(this,u)),this},n.staggerFrom=function(a,i,o,l,u,c,d){return o.runBackwards=1,Ma(o).immediateRender=Ct(o.immediateRender),this.staggerTo(a,i,o,l,u,c,d)},n.staggerFromTo=function(a,i,o,l,u,c,d,f){return l.startAt=o,Ma(l).immediateRender=Ct(l.immediateRender),this.staggerTo(a,i,l,u,c,d,f)},n.render=function(a,i,o){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=a<=0?0:st(a),f=this._zTime<0!=a<0&&(this._initted||!c),p,g,_,h,m,y,C,j,k,$,N,T;if(this!==Xe&&d>u&&a>=0&&(d=u),d!==this._tTime||o||f){if(l!==this._time&&c&&(d+=this._time-l,a+=this._time-l),p=d,k=this._start,j=this._ts,y=!j,f&&(c||(l=this._zTime),(a||!i)&&(this._zTime=a)),this._repeat){if(N=this._yoyo,m=c+this._rDelay,this._repeat<-1&&a<0)return this.totalTime(m*100+a,i,o);if(p=st(d%m),d===u?(h=this._repeat,p=c):($=st(d/m),h=~~$,h&&h===$&&(p=c,h--),p>c&&(p=c)),$=kr(this._tTime,m),!l&&this._tTime&&$!==h&&this._tTime-$*m-this._dur<=0&&($=h),N&&h&1&&(p=c-p,T=1),h!==$&&!this._lock){var w=N&&$&1,x=w===(N&&h&1);if(h<$&&(w=!w),l=w?0:d%c?c:d,this._lock=1,this.render(l||(T?0:st(h*m)),i,!c)._lock=0,this._tTime=d,!i&&this.parent&&Ft(this,"onRepeat"),this.vars.repeatRefresh&&!T&&(this.invalidate()._lock=1),l&&l!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,x&&(this._lock=2,l=w?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!T&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;kg(this,T)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(C=E1(this,st(l),st(p)),C&&(d-=p-(p=C._start))),this._tTime=d,this._time=p,this._act=!j,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=a,l=0),!l&&d&&!i&&!$&&(Ft(this,"onStart"),this._tTime!==d))return this;if(p>=l&&a>=0)for(g=this._first;g;){if(_=g._next,(g._act||p>=g._start)&&g._ts&&C!==g){if(g.parent!==this)return this.render(a,i,o);if(g.render(g._ts>0?(p-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(p-g._start)*g._ts,i,o),p!==this._time||!this._ts&&!y){C=0,_&&(d+=this._zTime=-ze);break}}g=_}else{g=this._last;for(var P=a<0?a:p;g;){if(_=g._prev,(g._act||P<=g._end)&&g._ts&&C!==g){if(g.parent!==this)return this.render(a,i,o);if(g.render(g._ts>0?(P-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(P-g._start)*g._ts,i,o||gt&&Ll(g)),p!==this._time||!this._ts&&!y){C=0,_&&(d+=this._zTime=P?-ze:ze);break}}g=_}}if(C&&!i&&(this.pause(),C.render(p>=l?0:-ze)._zTime=p>=l?1:-1,this._ts))return this._start=k,us(this),this.render(a,i,o);this._onUpdate&&!i&&Ft(this,"onUpdate",!0),(d===u&&this._tTime>=this.totalDuration()||!d&&l)&&(k===this._start||Math.abs(j)!==Math.abs(this._ts))&&(this._lock||((a||!c)&&(d===u&&this._ts>0||!d&&this._ts<0)&&In(this,1),!i&&!(a<0&&!l)&&(d||l||!u)&&(Ft(this,d===u&&a>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(a,i){var o=this;if(vn(i)||(i=Rt(this,i,a)),!(a instanceof Ea)){if(xt(a))return a.forEach(function(l){return o.add(l,i)}),this;if(ht(a))return this.addLabel(a,i);if(Je(a))a=rt.delayedCall(0,a);else return this}return this!==a?un(this,a,i):this},n.getChildren=function(a,i,o,l){a===void 0&&(a=!0),i===void 0&&(i=!0),o===void 0&&(o=!0),l===void 0&&(l=-Bt);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof rt?i&&u.push(c):(o&&u.push(c),a&&u.push.apply(u,c.getChildren(!0,i,o)))),c=c._next;return u},n.getById=function(a){for(var i=this.getChildren(1,1,1),o=i.length;o--;)if(i[o].vars.id===a)return i[o]},n.remove=function(a){return ht(a)?this.removeLabel(a):Je(a)?this.killTweensOf(a):(a.parent===this&&ls(this,a),a===this._recent&&(this._recent=this._last),Zn(this))},n.totalTime=function(a,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=st(Lt.time-(this._ts>0?a/this._ts:(this.totalDuration()-a)/-this._ts))),e.prototype.totalTime.call(this,a,i),this._forcing=0,this):this._tTime},n.addLabel=function(a,i){return this.labels[a]=Rt(this,i),this},n.removeLabel=function(a){return delete this.labels[a],this},n.addPause=function(a,i,o){var l=rt.delayedCall(0,i||Da,o);return l.data="isPause",this._hasPause=1,un(this,l,Rt(this,a))},n.removePause=function(a){var i=this._first;for(a=Rt(this,a);i;)i._start===a&&i.data==="isPause"&&In(i),i=i._next},n.killTweensOf=function(a,i,o){for(var l=this.getTweensOf(a,o),u=l.length;u--;)Ln!==l[u]&&l[u].kill(a,i);return this},n.getTweensOf=function(a,i){for(var o=[],l=Ht(a),u=this._first,c=vn(i),d;u;)u instanceof rt?M1(u._targets,l)&&(c?(!Ln||u._initted&&u._ts)&&u.globalTime(0)<=i&&u.globalTime(u.totalDuration())>i:!i||u.isActive())&&o.push(u):(d=u.getTweensOf(l,i)).length&&o.push.apply(o,d),u=u._next;return o},n.tweenTo=function(a,i){i=i||{};var o=this,l=Rt(o,a),u=i,c=u.startAt,d=u.onStart,f=u.onStartParams,p=u.immediateRender,g,_=rt.to(o,Pt({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:i.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale())||ze,onStart:function(){if(o.pause(),!g){var m=i.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale());_._dur!==m&&Cr(_,m,0,1).render(_._time,!0,!0),g=1}d&&d.apply(_,f||[])}},i));return p?_.render(0):_},n.tweenFromTo=function(a,i,o){return this.tweenTo(i,Pt({startAt:{time:Rt(this,a)}},o))},n.recent=function(){return this._recent},n.nextLabel=function(a){return a===void 0&&(a=this._time),gg(this,Rt(this,a))},n.previousLabel=function(a){return a===void 0&&(a=this._time),gg(this,Rt(this,a),1)},n.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.previousLabel(this._time+ze)},n.shiftChildren=function(a,i,o){o===void 0&&(o=0);for(var l=this._first,u=this.labels,c;l;)l._start>=o&&(l._start+=a,l._end+=a),l=l._next;if(i)for(c in u)u[c]>=o&&(u[c]+=a);return Zn(this)},n.invalidate=function(a){var i=this._first;for(this._lock=0;i;)i.invalidate(a),i=i._next;return e.prototype.invalidate.call(this,a)},n.clear=function(a){a===void 0&&(a=!0);for(var i=this._first,o;i;)o=i._next,this.remove(i),i=o;return this._dp&&(this._time=this._tTime=this._pTime=0),a&&(this.labels={}),Zn(this)},n.totalDuration=function(a){var i=0,o=this,l=o._last,u=Bt,c,d,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-a:a));if(o._dirty){for(f=o.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>u&&o._sort&&l._ts&&!o._lock?(o._lock=1,un(o,l,d-l._delay,1)._lock=0):u=d,d<0&&l._ts&&(i-=d,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=d/o._ts,o._time-=d,o._tTime-=d),o.shiftChildren(-d,!1,-1/0),u=0),l._end>i&&l._ts&&(i=l._end),l=c;Cr(o,o===Xe&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(a){if(Xe._ts&&(Qm(Xe,cs(a,Xe)),Km=Lt.frame),Lt.frame>=Zm){Zm+=Mt.autoSleep||120;var i=Xe._first;if((!i||!i._ts)&&Mt.autoSleep&&Lt._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||Lt.sleep()}}},t})(Ea);Pt(yt.prototype,{_lock:0,_hasPause:0,_forcing:0});var Q1=function(t,n,r,a,i,o,l){var u=new Nt(this._pt,t,n,0,1,Ig,null,i),c=0,d=0,f,p,g,_,h,m,y,C;for(u.b=r,u.e=a,r+="",a+="",(y=~a.indexOf("random("))&&(a=Pa(a)),o&&(C=[r,a],o(C,t,n),r=C[0],a=C[1]),p=r.match(Tl)||[];f=Tl.exec(a);)_=f[0],h=a.substring(c,f.index),g?g=(g+1)%5:h.substr(-5)==="rgba("&&(g=1),_!==p[d++]&&(m=parseFloat(p[d-1])||0,u._pt={_next:u._pt,p:h||d===1?h:",",s:m,c:_.charAt(1)==="="?wr(m,_)-m:parseFloat(_)-m,m:g&&g<4?Math.round:0},c=Tl.lastIndex);return u.c=c<a.length?a.substring(c,a.length):"",u.fp=l,(Vm.test(a)||y)&&(u.e=0),this._pt=u,u},Ul=function(t,n,r,a,i,o,l,u,c,d){Je(a)&&(a=a(i||0,t,o));var f=t[n],p=r!=="get"?r:Je(f)?c?t[n.indexOf("set")||!Je(t["get"+n.substr(3)])?n:"get"+n.substr(3)](c):t[n]():f,g=Je(f)?c?aw:Mg:Yl,_;if(ht(a)&&(~a.indexOf("random(")&&(a=Pa(a)),a.charAt(1)==="="&&(_=wr(p,a)+(vt(p)||0),(_||_===0)&&(a=_))),!d||p!==a||Vl)return!isNaN(p*a)&&a!==""?(_=new Nt(this._pt,t,n,+p||0,a-(p||0),typeof f=="boolean"?sw:$g,0,g),c&&(_.fp=c),l&&_.modifier(l,this,t),this._pt=_):(!f&&!(n in t)&&Dl(n,a),Q1.call(this,t,n,p,a,g,u||Mt.stringFilter,c))},ew=function(t,n,r,a,i){if(Je(t)&&(t=Ba(t,i,n,r,a)),!ln(t)||t.style&&t.nodeType||xt(t)||Wm(t))return ht(t)?Ba(t,i,n,r,a):t;var o={},l;for(l in t)o[l]=Ba(t[l],i,n,r,a);return o},Ng=function(t,n,r,a,i,o){var l,u,c,d;if(It[t]&&(l=new It[t]).init(i,l.rawVars?n[t]:ew(n[t],a,i,o,r),r,a,o)!==!1&&(r._pt=u=new Nt(r._pt,i,t,0,1,l.render,l,0,l.priority),r!==Tr))for(c=r._ptLookup[r._targets.indexOf(i)],d=l._props.length;d--;)c[l._props[d]]=u;return l},Ln,Vl,Gl=function e(t,n,r){var a=t.vars,i=a.ease,o=a.startAt,l=a.immediateRender,u=a.lazy,c=a.onUpdate,d=a.runBackwards,f=a.yoyoEase,p=a.keyframes,g=a.autoRevert,_=t._dur,h=t._startAt,m=t._targets,y=t.parent,C=y&&y.data==="nested"?y.vars.targets:m,j=t._overwrite==="auto"&&!vl,k=t.timeline,$,N,T,w,x,P,D,v,F,M,S,I,L;if(k&&(!p||!i)&&(i="none"),t._ease=Jn(i,xr.ease),t._yEase=f?Sg(Jn(f===!0?i:f,xr.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!k&&!!a.runBackwards,!k||p&&!a.stagger){if(v=m[0]?Kn(m[0]).harness:0,I=v&&a[v.prop],$=os(a,Ml),h&&(h._zTime<0&&h.progress(1),n<0&&d&&l&&!g?h.render(-1,!0):h.revert(d&&_?as:j1),h._lazy=0),o){if(In(t._startAt=rt.set(m,Pt({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!h&&Ct(u),startAt:null,delay:0,onUpdate:c&&function(){return Ft(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(gt||!l&&!g)&&t._startAt.revert(as),l&&_&&n<=0&&r<=0){n&&(t._zTime=n);return}}else if(d&&_&&!h){if(n&&(l=!1),T=Pt({overwrite:!1,data:"isFromStart",lazy:l&&!h&&Ct(u),immediateRender:l,stagger:0,parent:y},$),I&&(T[v.prop]=I),In(t._startAt=rt.set(m,T)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(gt?t._startAt.revert(as):t._startAt.render(-1,!0)),t._zTime=n,!l)e(t._startAt,ze,ze);else if(!n)return}for(t._pt=t._ptCache=0,u=_&&Ct(u)||u&&!_,N=0;N<m.length;N++){if(x=m[N],D=x._gsap||Fl(m)[N]._gsap,t._ptLookup[N]=M={},$l[D.id]&&$n.length&&ss(),S=C===m?N:C.indexOf(x),v&&(F=new v).init(x,I||$,t,S,C)!==!1&&(t._pt=w=new Nt(t._pt,x,F.name,0,1,F.render,F,0,F.priority),F._props.forEach(function(re){M[re]=w}),F.priority&&(P=1)),!v||I)for(T in $)It[T]&&(F=Ng(T,$,t,S,x,C))?F.priority&&(P=1):M[T]=w=Ul.call(t,x,T,"get",$[T],S,C,0,a.stringFilter);t._op&&t._op[N]&&t.kill(x,t._op[N]),j&&t._pt&&(Ln=t,Xe.killTweensOf(x,M,t.globalTime(n)),L=!t.parent,Ln=0),t._pt&&u&&($l[D.id]=1)}P&&Pg(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!L,p&&n<=0&&k.render(Bt,!0,!0)},tw=function(t,n,r,a,i,o,l,u){var c=(t._pt&&t._ptCache||(t._ptCache={}))[n],d,f,p,g;if(!c)for(c=t._ptCache[n]=[],p=t._ptLookup,g=t._targets.length;g--;){if(d=p[g][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return Vl=1,t.vars[n]="+=0",Gl(t,l),Vl=0,u?ja(n+" not eligible for reset"):1;c.push(d)}for(g=c.length;g--;)f=c[g],d=f._pt||f,d.s=(a||a===0)&&!i?a:d.s+(a||0)+o*d.c,d.c=r-d.s,f.e&&(f.e=nt(r)+vt(f.e)),f.b&&(f.b=d.s+vt(f.b))},nw=function(t,n){var r=t[0]?Kn(t[0]).harness:0,a=r&&r.aliases,i,o,l,u;if(!a)return n;i=Sr({},n);for(o in a)if(o in i)for(u=a[o].split(","),l=u.length;l--;)i[u[l]]=i[o];return i},rw=function(t,n,r,a){var i=n.ease||a||"power1.inOut",o,l;if(xt(n))l=r[t]||(r[t]=[]),n.forEach(function(u,c){return l.push({t:c/(n.length-1)*100,v:u,e:i})});else for(o in n)l=r[o]||(r[o]=[]),o==="ease"||l.push({t:parseFloat(t),v:n[o],e:i})},Ba=function(t,n,r,a,i){return Je(t)?t.call(n,r,a,i):ht(t)&&~t.indexOf("random(")?Pa(t):t},jg=Pl+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Dg={};Tt(jg+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return Dg[e]=1});var rt=(function(e){Om(t,e);function t(r,a,i,o){var l;typeof a=="number"&&(i.duration=a,a=i,i=null),l=e.call(this,o?a:Ma(a))||this;var u=l.vars,c=u.duration,d=u.delay,f=u.immediateRender,p=u.stagger,g=u.overwrite,_=u.keyframes,h=u.defaults,m=u.scrollTrigger,y=u.yoyoEase,C=a.parent||Xe,j=(xt(r)||Wm(r)?vn(r[0]):"length"in a)?[r]:Ht(r),k,$,N,T,w,x,P,D;if(l._targets=j.length?Fl(j):ja("GSAP target "+r+" not found. https://gsap.com",!Mt.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,_||p||ns(c)||ns(d)){if(a=l.vars,k=l.timeline=new yt({data:"nested",defaults:h||{},targets:C&&C.data==="nested"?C.vars.targets:j}),k.kill(),k.parent=k._dp=xn(l),k._start=0,p||ns(c)||ns(d)){if(T=j.length,P=p&&dg(p),ln(p))for(w in p)~jg.indexOf(w)&&(D||(D={}),D[w]=p[w]);for($=0;$<T;$++)N=os(a,Dg),N.stagger=0,y&&(N.yoyoEase=y),D&&Sr(N,D),x=j[$],N.duration=+Ba(c,xn(l),$,x,j),N.delay=(+Ba(d,xn(l),$,x,j)||0)-l._delay,!p&&T===1&&N.delay&&(l._delay=d=N.delay,l._start+=d,N.delay=0),k.to(x,N,P?P($,x,j):0),k._ease=Fe.none;k.duration()?c=d=0:l.timeline=0}else if(_){Ma(Pt(k.vars.defaults,{ease:"none"})),k._ease=Jn(_.ease||a.ease||"none");var v=0,F,M,S;if(xt(_))_.forEach(function(I){return k.to(j,I,">")}),k.duration();else{N={};for(w in _)w==="ease"||w==="easeEach"||rw(w,_[w],N,_.easeEach);for(w in N)for(F=N[w].sort(function(I,L){return I.t-L.t}),v=0,$=0;$<F.length;$++)M=F[$],S={ease:M.e,duration:(M.t-($?F[$-1].t:0))/100*c},S[w]=M.v,k.to(j,S,v),v+=S.duration;k.duration()<c&&k.to({},{duration:c-k.duration()})}}c||l.duration(c=k.duration())}else l.timeline=0;return g===!0&&!vl&&(Ln=xn(l),Xe.killTweensOf(j),Ln=0),un(C,xn(l),i),a.reversed&&l.reverse(),a.paused&&l.paused(!0),(f||!c&&!_&&l._start===st(C._time)&&Ct(f)&&F1(xn(l))&&C.data!=="nested")&&(l._tTime=-ze,l.render(Math.max(0,-d)||0)),m&&sg(xn(l),m),l}var n=t.prototype;return n.render=function(a,i,o){var l=this._time,u=this._tDur,c=this._dur,d=a<0,f=a>u-ze&&!d?u:a<ze?0:a,p,g,_,h,m,y,C,j,k;if(!c)A1(this,a,i,o);else if(f!==this._tTime||!a||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(p=f,j=this.timeline,this._repeat){if(h=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(h*100+a,i,o);if(p=st(f%h),f===u?(_=this._repeat,p=c):(m=st(f/h),_=~~m,_&&_===m?(p=c,_--):p>c&&(p=c)),y=this._yoyo&&_&1,y&&(k=this._yEase,p=c-p),m=kr(this._tTime,h),p===l&&!o&&this._initted&&_===m)return this._tTime=f,this;_!==m&&(j&&this._yEase&&kg(j,y),this.vars.repeatRefresh&&!y&&!this._lock&&p!==h&&this._initted&&(this._lock=o=1,this.render(st(h*_),!0).invalidate()._lock=0))}if(!this._initted){if(og(this,d?a:p,o,i,f))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&_!==m))return this;if(c!==this._dur)return this.render(a,i,o)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=C=(k||this._ease)(p/c),this._from&&(this.ratio=C=1-C),!l&&f&&!i&&!m&&(Ft(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(C,g.d),g=g._next;j&&j.render(a<0?a:j._dur*j._ease(p/this._dur),i,o)||this._startAt&&(this._zTime=a),this._onUpdate&&!i&&(d&&Al(this,a,i,o),Ft(this,"onUpdate")),this._repeat&&_!==m&&this.vars.onRepeat&&!i&&this.parent&&Ft(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(d&&!this._onUpdate&&Al(this,a,!0,!0),(a||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&In(this,1),!i&&!(d&&!l)&&(f||l||y)&&(Ft(this,f===u?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(a){return(!a||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(a),e.prototype.invalidate.call(this,a)},n.resetTo=function(a,i,o,l,u){Aa||Lt.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||Gl(this,c),d=this._ease(c/this._dur),tw(this,a,i,o,l,d,c,u)?this.resetTo(a,i,o,l,1):(ds(this,0),this.parent||rg(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(a,i){if(i===void 0&&(i="all"),!a&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?Fa(this):this.scrollTrigger&&this.scrollTrigger.kill(!!gt),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(a,i,Ln&&Ln.vars.overwrite!==!0)._first||Fa(this),this.parent&&o!==this.timeline.totalDuration()&&Cr(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,u=a?Ht(a):l,c=this._ptLookup,d=this._pt,f,p,g,_,h,m,y;if((!i||i==="all")&&I1(l,u))return i==="all"&&(this._pt=0),Fa(this);for(f=this._op=this._op||[],i!=="all"&&(ht(i)&&(h={},Tt(i,function(C){return h[C]=1}),i=h),i=nw(l,i)),y=l.length;y--;)if(~u.indexOf(l[y])){p=c[y],i==="all"?(f[y]=i,_=p,g={}):(g=f[y]=f[y]||{},_=i);for(h in _)m=p&&p[h],m&&((!("kill"in m.d)||m.d.kill(h)===!0)&&ls(this,m,"_pt"),delete p[h]),g!=="all"&&(g[h]=1)}return this._initted&&!this._pt&&d&&Fa(this),this},t.to=function(a,i){return new t(a,i,arguments[2])},t.from=function(a,i){return $a(1,arguments)},t.delayedCall=function(a,i,o,l){return new t(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:a,onComplete:i,onReverseComplete:i,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},t.fromTo=function(a,i,o){return $a(2,arguments)},t.set=function(a,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new t(a,i)},t.killTweensOf=function(a,i,o){return Xe.killTweensOf(a,i,o)},t})(Ea);Pt(rt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Tt("staggerTo,staggerFrom,staggerFromTo",function(e){rt[e]=function(){var t=new yt,n=Bl.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var Yl=function(t,n,r){return t[n]=r},Mg=function(t,n,r){return t[n](r)},aw=function(t,n,r,a){return t[n](a.fp,r)},iw=function(t,n,r){return t.setAttribute(n,r)},ql=function(t,n){return Je(t[n])?Mg:Sl(t[n])&&t.setAttribute?iw:Yl},$g=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},sw=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},Ig=function(t,n){var r=n._pt,a="";if(!t&&n.b)a=n.b;else if(t===1&&n.e)a=n.e;else{for(;r;)a=r.p+(r.m?r.m(r.s+r.c*t):Math.round((r.s+r.c*t)*1e4)/1e4)+a,r=r._next;a+=n.c}n.set(n.t,n.p,a,n)},Xl=function(t,n){for(var r=n._pt;r;)r.r(t,r.d),r=r._next},ow=function(t,n,r,a){for(var i=this._pt,o;i;)o=i._next,i.p===a&&i.modifier(t,n,r),i=o},lw=function(t){for(var n=this._pt,r,a;n;)a=n._next,n.p===t&&!n.op||n.op===t?ls(this,n,"_pt"):n.dep||(r=1),n=a;return!r},cw=function(t,n,r,a){a.mSet(t,n,a.m.call(a.tween,r,a.mt),a)},Pg=function(t){for(var n=t._pt,r,a,i,o;n;){for(r=n._next,a=i;a&&a.pr>n.pr;)a=a._next;(n._prev=a?a._prev:o)?n._prev._next=n:i=n,(n._next=a)?a._prev=n:o=n,n=r}t._pt=i},Nt=(function(){function e(n,r,a,i,o,l,u,c,d){this.t=r,this.s=i,this.c=o,this.p=a,this.r=l||$g,this.d=u||this,this.set=c||Yl,this.pr=d||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(r,a,i){this.mSet=this.mSet||this.set,this.set=cw,this.m=r,this.mt=i,this.tween=a},e})();Tt(Pl+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Ml[e]=1}),$t.TweenMax=$t.TweenLite=rt,$t.TimelineLite=$t.TimelineMax=yt,Xe=new yt({sortChildren:!1,defaults:xr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Mt.stringFilter=wg;var er=[],fs={},uw=[],Fg=0,dw=0,Kl=function(t){return(fs[t]||uw).map(function(n){return n()})},Zl=function(){var t=Date.now(),n=[];t-Fg>2&&(Kl("matchMediaInit"),er.forEach(function(r){var a=r.queries,i=r.conditions,o,l,u,c;for(l in a)o=cn.matchMedia(a[l]).matches,o&&(u=1),o!==i[l]&&(i[l]=o,c=1);c&&(r.revert(),u&&n.push(r))}),Kl("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(a){return r.add(null,a)})}),Fg=t,Kl("matchMedia"))},Lg=(function(){function e(n,r){this.selector=r&&Rl(r),this.data=[],this._r=[],this.isReverted=!1,this.id=dw++,n&&this.add(n)}var t=e.prototype;return t.add=function(r,a,i){Je(r)&&(i=a,a=r,r=Je);var o=this,l=function(){var c=Ge,d=o.selector,f;return c&&c!==o&&c.data.push(o),i&&(o.selector=Rl(i)),Ge=o,f=a.apply(o,arguments),Je(f)&&o._r.push(f),Ge=c,o.selector=d,o.isReverted=!1,f};return o.last=l,r===Je?l(o,function(u){return o.add(null,u)}):r?o[r]=l:l},t.ignore=function(r){var a=Ge;Ge=null,r(this),Ge=a},t.getTweens=function(){var r=[];return this.data.forEach(function(a){return a instanceof e?r.push.apply(r,a.getTweens()):a instanceof rt&&!(a.parent&&a.parent.data==="nested")&&r.push(a)}),r},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(r,a){var i=this;if(r?(function(){for(var l=i.getTweens(),u=i.data.length,c;u--;)c=i.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,f){return f.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),u=i.data.length;u--;)c=i.data[u],c instanceof yt?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof rt)&&c.revert&&c.revert(r);i._r.forEach(function(d){return d(r,i)}),i.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),a)for(var o=er.length;o--;)er[o].id===this.id&&er.splice(o,1)},t.revert=function(r){this.kill(r||{})},e})(),fw=(function(){function e(n){this.contexts=[],this.scope=n,Ge&&Ge.data.push(this)}var t=e.prototype;return t.add=function(r,a,i){ln(r)||(r={matches:r});var o=new Lg(0,i||this.scope),l=o.conditions={},u,c,d;Ge&&!o.selector&&(o.selector=Ge.selector),this.contexts.push(o),a=o.add("onMatch",a),o.queries=r;for(c in r)c==="all"?d=1:(u=cn.matchMedia(r[c]),u&&(er.indexOf(o)<0&&er.push(o),(l[c]=u.matches)&&(d=1),u.addListener?u.addListener(Zl):u.addEventListener("change",Zl)));return d&&a(o,function(f){return o.add(null,f)}),this},t.revert=function(r){this.kill(r||{})},t.kill=function(r){this.contexts.forEach(function(a){return a.kill(r,!0)})},e})(),hs={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(a){return bg(a)})},timeline:function(t){return new yt(t)},getTweensOf:function(t,n){return Xe.getTweensOf(t,n)},getProperty:function(t,n,r,a){ht(t)&&(t=Ht(t)[0]);var i=Kn(t||{}).get,o=r?tg:eg;return r==="native"&&(r=""),t&&(n?o((It[n]&&It[n].get||i)(t,n,r,a)):function(l,u,c){return o((It[l]&&It[l].get||i)(t,l,u,c))})},quickSetter:function(t,n,r){if(t=Ht(t),t.length>1){var a=t.map(function(d){return jt.quickSetter(d,n,r)}),i=a.length;return function(d){for(var f=i;f--;)a[f](d)}}t=t[0]||{};var o=It[n],l=Kn(t),u=l.harness&&(l.harness.aliases||{})[n]||n,c=o?function(d){var f=new o;Tr._pt=0,f.init(t,r?d+r:d,Tr,0,[t]),f.render(1,f),Tr._pt&&Xl(1,Tr)}:l.set(t,u);return o?c:function(d){return c(t,u,r?d+r:d,l,1)}},quickTo:function(t,n,r){var a,i=jt.to(t,Pt((a={},a[n]="+=0.1",a.paused=!0,a.stagger=0,a),r||{})),o=function(u,c,d){return i.resetTo(n,u,c,d)};return o.tween=i,o},isTweening:function(t){return Xe.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Jn(t.ease,xr.ease)),ng(xr,t||{})},config:function(t){return ng(Mt,t||{})},registerEffect:function(t){var n=t.name,r=t.effect,a=t.plugins,i=t.defaults,o=t.extendTimeline;(a||"").split(",").forEach(function(l){return l&&!It[l]&&!$t[l]&&ja(n+" effect requires "+l+" plugin.")}),Il[n]=function(l,u,c){return r(Ht(l),Pt(u||{},i),c)},o&&(yt.prototype[n]=function(l,u,c){return this.add(Il[n](l,ln(u)?u:(c=u)&&{},this),c)})},registerEase:function(t,n){Fe[t]=Jn(n)},parseEase:function(t,n){return arguments.length?Jn(t,n):Fe},getById:function(t){return Xe.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var r=new yt(t),a,i;for(r.smoothChildTiming=Ct(t.smoothChildTiming),Xe.remove(r),r._dp=0,r._time=r._tTime=Xe._time,a=Xe._first;a;)i=a._next,(n||!(!a._dur&&a instanceof rt&&a.vars.onComplete===a._targets[0]))&&un(r,a,a._start-a._delay),a=i;return un(Xe,r,0),r},context:function(t,n){return t?new Lg(t,n):Ge},matchMedia:function(t){return new fw(t)},matchMediaRefresh:function(){return er.forEach(function(t){var n=t.conditions,r,a;for(a in n)n[a]&&(n[a]=!1,r=1);r&&t.revert()})||Zl()},addEventListener:function(t,n){var r=fs[t]||(fs[t]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(t,n){var r=fs[t],a=r&&r.indexOf(n);a>=0&&r.splice(a,1)},utils:{wrap:U1,wrapYoyo:V1,distribute:dg,random:hg,snap:fg,normalize:W1,getUnit:vt,clamp:R1,splitColor:_g,toArray:Ht,selector:Rl,mapRange:mg,pipe:O1,unitize:z1,interpolate:G1,shuffle:ug},install:qm,effects:Il,ticker:Lt,updateRoot:yt.updateRoot,plugins:It,globalTimeline:Xe,core:{PropTween:Nt,globals:Xm,Tween:rt,Timeline:yt,Animation:Ea,getCache:Kn,_removeLinkedListItem:ls,reverting:function(){return gt},context:function(t){return t&&Ge&&(Ge.data.push(t),t._ctx=Ge),Ge},suppressOverwrites:function(t){return vl=t}}};Tt("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return hs[e]=rt[e]}),Lt.add(yt.updateRoot),Tr=hs.to({},{duration:0});var hw=function(t,n){for(var r=t._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},pw=function(t,n){var r=t._targets,a,i,o;for(a in n)for(i=r.length;i--;)o=t._ptLookup[i][a],o&&(o=o.d)&&(o._pt&&(o=hw(o,a)),o&&o.modifier&&o.modifier(n[a],t,r[i],a))},Jl=function(t,n){return{name:t,headless:1,rawVars:1,init:function(a,i,o){o._onInit=function(l){var u,c;if(ht(i)&&(u={},Tt(i,function(d){return u[d]=1}),i=u),n){u={};for(c in i)u[c]=n(i[c]);i=u}pw(l,i)}}}},jt=hs.registerPlugin({name:"attr",init:function(t,n,r,a,i){var o,l,u;this.tween=r;for(o in n)u=t.getAttribute(o)||"",l=this.add(t,"setAttribute",(u||0)+"",n[o],a,i,0,0,o),l.op=o,l.b=u,this._props.push(o)},render:function(t,n){for(var r=n._pt;r;)gt?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",headless:1,init:function(t,n){for(var r=n.length;r--;)this.add(t,r,t[r]||0,n[r],0,0,0,0,0,1)}},Jl("roundProps",Hl),Jl("modifiers"),Jl("snap",fg))||hs;rt.version=yt.version=jt.version="3.13.0",Ym=1,kl()&&Nr();var mw=Fe.Power0,gw=Fe.Power1,yw=Fe.Power2,bw=Fe.Power3,_w=Fe.Power4,xw=Fe.Linear,vw=Fe.Quad,ww=Fe.Cubic,Sw=Fe.Quart,kw=Fe.Quint,Cw=Fe.Strong,Tw=Fe.Elastic,Nw=Fe.Back,jw=Fe.SteppedEase,Dw=Fe.Bounce,Mw=Fe.Sine,$w=Fe.Expo,Iw=Fe.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ag,An,jr,Ql,tr,Eg,ec,Pw=function(){return typeof window<"u"},wn={},nr=180/Math.PI,Dr=Math.PI/180,Mr=Math.atan2,Bg=1e8,tc=/([A-Z])/g,Fw=/(left|right|width|margin|padding|x)/i,Lw=/[\s,\(]\S/,dn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},nc=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},Aw=function(t,n){return n.set(n.t,n.p,t===1?n.e:Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},Ew=function(t,n){return n.set(n.t,n.p,t?Math.round((n.s+n.c*t)*1e4)/1e4+n.u:n.b,n)},Bw=function(t,n){var r=n.s+n.c*t;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},Rg=function(t,n){return n.set(n.t,n.p,t?n.e:n.b,n)},Hg=function(t,n){return n.set(n.t,n.p,t!==1?n.b:n.e,n)},Rw=function(t,n,r){return t.style[n]=r},Hw=function(t,n,r){return t.style.setProperty(n,r)},Ow=function(t,n,r){return t._gsap[n]=r},zw=function(t,n,r){return t._gsap.scaleX=t._gsap.scaleY=r},Ww=function(t,n,r,a,i){var o=t._gsap;o.scaleX=o.scaleY=r,o.renderTransform(i,o)},Uw=function(t,n,r,a,i){var o=t._gsap;o[n]=r,o.renderTransform(i,o)},Ke="transform",Dt=Ke+"Origin",Vw=function e(t,n){var r=this,a=this.target,i=a.style,o=a._gsap;if(t in wn&&i){if(this.tfm=this.tfm||{},t!=="transform")t=dn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return r.tfm[l]=Sn(a,l)}):this.tfm[t]=o.x?o[t]:Sn(a,t),t===Dt&&(this.tfm.zOrigin=o.zOrigin);else return dn.transform.split(",").forEach(function(l){return e.call(r,l,n)});if(this.props.indexOf(Ke)>=0)return;o.svg&&(this.svgo=a.getAttribute("data-svg-origin"),this.props.push(Dt,n,"")),t=Ke}(i||n)&&this.props.push(t,n,i[t])},Og=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Gw=function(){var t=this.props,n=this.target,r=n.style,a=n._gsap,i,o;for(i=0;i<t.length;i+=3)t[i+1]?t[i+1]===2?n[t[i]](t[i+2]):n[t[i]]=t[i+2]:t[i+2]?r[t[i]]=t[i+2]:r.removeProperty(t[i].substr(0,2)==="--"?t[i]:t[i].replace(tc,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)a[o]=this.tfm[o];a.svg&&(a.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),i=ec(),(!i||!i.isStart)&&!r[Ke]&&(Og(r),a.zOrigin&&r[Dt]&&(r[Dt]+=" "+a.zOrigin+"px",a.zOrigin=0,a.renderTransform()),a.uncache=1)}},zg=function(t,n){var r={target:t,props:[],revert:Gw,save:Vw};return t._gsap||jt.core.getCache(t),n&&t.style&&t.nodeType&&n.split(",").forEach(function(a){return r.save(a)}),r},Wg,rc=function(t,n){var r=An.createElementNS?An.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):An.createElement(t);return r&&r.style?r:An.createElement(t)},Ot=function e(t,n,r){var a=getComputedStyle(t);return a[n]||a.getPropertyValue(n.replace(tc,"-$1").toLowerCase())||a.getPropertyValue(n)||!r&&e(t,$r(n)||n,1)||""},Ug="O,Moz,ms,Ms,Webkit".split(","),$r=function(t,n,r){var a=n||tr,i=a.style,o=5;if(t in i&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(Ug[o]+t in i););return o<0?null:(o===3?"ms":o>=0?Ug[o]:"")+t},ac=function(){Pw()&&window.document&&(Ag=window,An=Ag.document,jr=An.documentElement,tr=rc("div")||{style:{}},rc("div"),Ke=$r(Ke),Dt=Ke+"Origin",tr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Wg=!!$r("perspective"),ec=jt.core.reverting,Ql=1)},Vg=function(t){var n=t.ownerSVGElement,r=rc("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),a=t.cloneNode(!0),i;a.style.display="block",r.appendChild(a),jr.appendChild(r);try{i=a.getBBox()}catch{}return r.removeChild(a),jr.removeChild(r),i},Gg=function(t,n){for(var r=n.length;r--;)if(t.hasAttribute(n[r]))return t.getAttribute(n[r])},Yg=function(t){var n,r;try{n=t.getBBox()}catch{n=Vg(t),r=1}return n&&(n.width||n.height)||r||(n=Vg(t)),n&&!n.width&&!n.x&&!n.y?{x:+Gg(t,["x","cx","x1"])||0,y:+Gg(t,["y","cy","y1"])||0,width:0,height:0}:n},qg=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Yg(t))},rr=function(t,n){if(n){var r=t.style,a;n in wn&&n!==Dt&&(n=Ke),r.removeProperty?(a=n.substr(0,2),(a==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(a==="--"?n:n.replace(tc,"-$1").toLowerCase())):r.removeAttribute(n)}},En=function(t,n,r,a,i,o){var l=new Nt(t._pt,n,r,0,1,o?Hg:Rg);return t._pt=l,l.b=a,l.e=i,t._props.push(r),l},Xg={deg:1,rad:1,turn:1},Yw={grid:1,flex:1},Bn=function e(t,n,r,a){var i=parseFloat(r)||0,o=(r+"").trim().substr((i+"").length)||"px",l=tr.style,u=Fw.test(n),c=t.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(u?"Width":"Height"),f=100,p=a==="px",g=a==="%",_,h,m,y;if(a===o||!i||Xg[a]||Xg[o])return i;if(o!=="px"&&!p&&(i=e(t,n,r,"px")),y=t.getCTM&&qg(t),(g||o==="%")&&(wn[n]||~n.indexOf("adius")))return _=y?t.getBBox()[u?"width":"height"]:t[d],nt(g?i/_*f:i/100*_);if(l[u?"width":"height"]=f+(p?o:a),h=a!=="rem"&&~n.indexOf("adius")||a==="em"&&t.appendChild&&!c?t:t.parentNode,y&&(h=(t.ownerSVGElement||{}).parentNode),(!h||h===An||!h.appendChild)&&(h=An.body),m=h._gsap,m&&g&&m.width&&u&&m.time===Lt.time&&!m.uncache)return nt(i/m.width*f);if(g&&(n==="height"||n==="width")){var C=t.style[n];t.style[n]=f+a,_=t[d],C?t.style[n]=C:rr(t,n)}else(g||o==="%")&&!Yw[Ot(h,"display")]&&(l.position=Ot(t,"position")),h===t&&(l.position="static"),h.appendChild(tr),_=tr[d],h.removeChild(tr),l.position="absolute";return u&&g&&(m=Kn(h),m.time=Lt.time,m.width=h[d]),nt(p?_*i/f:_&&i?f/_*i:0)},Sn=function(t,n,r,a){var i;return Ql||ac(),n in dn&&n!=="transform"&&(n=dn[n],~n.indexOf(",")&&(n=n.split(",")[0])),wn[n]&&n!=="transform"?(i=Ha(t,a),i=n!=="transformOrigin"?i[n]:i.svg?i.origin:ms(Ot(t,Dt))+" "+i.zOrigin+"px"):(i=t.style[n],(!i||i==="auto"||a||~(i+"").indexOf("calc("))&&(i=ps[n]&&ps[n](t,n,r)||Ot(t,n)||Jm(t,n)||(n==="opacity"?1:0))),r&&!~(i+"").trim().indexOf(" ")?Bn(t,n,i,r)+r:i},qw=function(t,n,r,a){if(!r||r==="none"){var i=$r(n,t,1),o=i&&Ot(t,i,1);o&&o!==r?(n=i,r=o):n==="borderColor"&&(r=Ot(t,"borderTopColor"))}var l=new Nt(this._pt,t.style,n,0,1,Ig),u=0,c=0,d,f,p,g,_,h,m,y,C,j,k,$;if(l.b=r,l.e=a,r+="",a+="",a.substring(0,6)==="var(--"&&(a=Ot(t,a.substring(4,a.indexOf(")")))),a==="auto"&&(h=t.style[n],t.style[n]=a,a=Ot(t,n)||a,h?t.style[n]=h:rr(t,n)),d=[r,a],wg(d),r=d[0],a=d[1],p=r.match(vr)||[],$=a.match(vr)||[],$.length){for(;f=vr.exec(a);)m=f[0],C=a.substring(u,f.index),_?_=(_+1)%5:(C.substr(-5)==="rgba("||C.substr(-5)==="hsla(")&&(_=1),m!==(h=p[c++]||"")&&(g=parseFloat(h)||0,k=h.substr((g+"").length),m.charAt(1)==="="&&(m=wr(g,m)+k),y=parseFloat(m),j=m.substr((y+"").length),u=vr.lastIndex-j.length,j||(j=j||Mt.units[n]||k,u===a.length&&(a+=j,l.e+=j)),k!==j&&(g=Bn(t,n,h,j)||0),l._pt={_next:l._pt,p:C||c===1?C:",",s:g,c:y-g,m:_&&_<4||n==="zIndex"?Math.round:0});l.c=u<a.length?a.substring(u,a.length):""}else l.r=n==="display"&&a==="none"?Hg:Rg;return Vm.test(a)&&(l.e=0),this._pt=l,l},Kg={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Xw=function(t){var n=t.split(" "),r=n[0],a=n[1]||"50%";return(r==="top"||r==="bottom"||a==="left"||a==="right")&&(t=r,r=a,a=t),n[0]=Kg[r]||r,n[1]=Kg[a]||a,n.join(" ")},Kw=function(t,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,a=r.style,i=n.u,o=r._gsap,l,u,c;if(i==="all"||i===!0)a.cssText="",u=1;else for(i=i.split(","),c=i.length;--c>-1;)l=i[c],wn[l]&&(u=1,l=l==="transformOrigin"?Dt:Ke),rr(r,l);u&&(rr(r,Ke),o&&(o.svg&&r.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",Ha(r,1),o.uncache=1,Og(a)))}},ps={clearProps:function(t,n,r,a,i){if(i.data!=="isFromStart"){var o=t._pt=new Nt(t._pt,n,r,0,0,Kw);return o.u=a,o.pr=-10,o.tween=i,t._props.push(r),1}}},Ra=[1,0,0,1,0,0],Zg={},Jg=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Qg=function(t){var n=Ot(t,Ke);return Jg(n)?Ra:n.substr(7).match(Um).map(nt)},ic=function(t,n){var r=t._gsap||Kn(t),a=t.style,i=Qg(t),o,l,u,c;return r.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,i=[u.a,u.b,u.c,u.d,u.e,u.f],i.join(",")==="1,0,0,1,0,0"?Ra:i):(i===Ra&&!t.offsetParent&&t!==jr&&!r.svg&&(u=a.display,a.display="block",o=t.parentNode,(!o||!t.offsetParent&&!t.getBoundingClientRect().width)&&(c=1,l=t.nextElementSibling,jr.appendChild(t)),i=Qg(t),u?a.display=u:rr(t,"display"),c&&(l?o.insertBefore(t,l):o?o.appendChild(t):jr.removeChild(t))),n&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},sc=function(t,n,r,a,i,o){var l=t._gsap,u=i||ic(t,!0),c=l.xOrigin||0,d=l.yOrigin||0,f=l.xOffset||0,p=l.yOffset||0,g=u[0],_=u[1],h=u[2],m=u[3],y=u[4],C=u[5],j=n.split(" "),k=parseFloat(j[0])||0,$=parseFloat(j[1])||0,N,T,w,x;r?u!==Ra&&(T=g*m-_*h)&&(w=k*(m/T)+$*(-h/T)+(h*C-m*y)/T,x=k*(-_/T)+$*(g/T)-(g*C-_*y)/T,k=w,$=x):(N=Yg(t),k=N.x+(~j[0].indexOf("%")?k/100*N.width:k),$=N.y+(~(j[1]||j[0]).indexOf("%")?$/100*N.height:$)),a||a!==!1&&l.smooth?(y=k-c,C=$-d,l.xOffset=f+(y*g+C*h)-y,l.yOffset=p+(y*_+C*m)-C):l.xOffset=l.yOffset=0,l.xOrigin=k,l.yOrigin=$,l.smooth=!!a,l.origin=n,l.originIsAbsolute=!!r,t.style[Dt]="0px 0px",o&&(En(o,l,"xOrigin",c,k),En(o,l,"yOrigin",d,$),En(o,l,"xOffset",f,l.xOffset),En(o,l,"yOffset",p,l.yOffset)),t.setAttribute("data-svg-origin",k+" "+$)},Ha=function(t,n){var r=t._gsap||new Tg(t);if("x"in r&&!n&&!r.uncache)return r;var a=t.style,i=r.scaleX<0,o="px",l="deg",u=getComputedStyle(t),c=Ot(t,Dt)||"0",d,f,p,g,_,h,m,y,C,j,k,$,N,T,w,x,P,D,v,F,M,S,I,L,re,q,O,W,z,le,V,ue;return d=f=p=h=m=y=C=j=k=0,g=_=1,r.svg=!!(t.getCTM&&qg(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(a[Ke]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[Ke]!=="none"?u[Ke]:"")),a.scale=a.rotate=a.translate="none"),T=ic(t,r.svg),r.svg&&(r.uncache?(re=t.getBBox(),c=r.xOrigin-re.x+"px "+(r.yOrigin-re.y)+"px",L=""):L=!n&&t.getAttribute("data-svg-origin"),sc(t,L||c,!!L||r.originIsAbsolute,r.smooth!==!1,T)),$=r.xOrigin||0,N=r.yOrigin||0,T!==Ra&&(D=T[0],v=T[1],F=T[2],M=T[3],d=S=T[4],f=I=T[5],T.length===6?(g=Math.sqrt(D*D+v*v),_=Math.sqrt(M*M+F*F),h=D||v?Mr(v,D)*nr:0,C=F||M?Mr(F,M)*nr+h:0,C&&(_*=Math.abs(Math.cos(C*Dr))),r.svg&&(d-=$-($*D+N*F),f-=N-($*v+N*M))):(ue=T[6],le=T[7],O=T[8],W=T[9],z=T[10],V=T[11],d=T[12],f=T[13],p=T[14],w=Mr(ue,z),m=w*nr,w&&(x=Math.cos(-w),P=Math.sin(-w),L=S*x+O*P,re=I*x+W*P,q=ue*x+z*P,O=S*-P+O*x,W=I*-P+W*x,z=ue*-P+z*x,V=le*-P+V*x,S=L,I=re,ue=q),w=Mr(-F,z),y=w*nr,w&&(x=Math.cos(-w),P=Math.sin(-w),L=D*x-O*P,re=v*x-W*P,q=F*x-z*P,V=M*P+V*x,D=L,v=re,F=q),w=Mr(v,D),h=w*nr,w&&(x=Math.cos(w),P=Math.sin(w),L=D*x+v*P,re=S*x+I*P,v=v*x-D*P,I=I*x-S*P,D=L,S=re),m&&Math.abs(m)+Math.abs(h)>359.9&&(m=h=0,y=180-y),g=nt(Math.sqrt(D*D+v*v+F*F)),_=nt(Math.sqrt(I*I+ue*ue)),w=Mr(S,I),C=Math.abs(w)>2e-4?w*nr:0,k=V?1/(V<0?-V:V):0),r.svg&&(L=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!Jg(Ot(t,Ke)),L&&t.setAttribute("transform",L))),Math.abs(C)>90&&Math.abs(C)<270&&(i?(g*=-1,C+=h<=0?180:-180,h+=h<=0?180:-180):(_*=-1,C+=C<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-d)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+o,r.y=f-((r.yPercent=f&&(!n&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-f)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+o,r.z=p+o,r.scaleX=nt(g),r.scaleY=nt(_),r.rotation=nt(h)+l,r.rotationX=nt(m)+l,r.rotationY=nt(y)+l,r.skewX=C+l,r.skewY=j+l,r.transformPerspective=k+o,(r.zOrigin=parseFloat(c.split(" ")[2])||!n&&r.zOrigin||0)&&(a[Dt]=ms(c)),r.xOffset=r.yOffset=0,r.force3D=Mt.force3D,r.renderTransform=r.svg?Jw:Wg?e0:Zw,r.uncache=0,r},ms=function(t){return(t=t.split(" "))[0]+" "+t[1]},oc=function(t,n,r){var a=vt(n);return nt(parseFloat(n)+parseFloat(Bn(t,"x",r+"px",a)))+a},Zw=function(t,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,e0(t,n)},ar="0deg",Oa="0px",ir=") ",e0=function(t,n){var r=n||this,a=r.xPercent,i=r.yPercent,o=r.x,l=r.y,u=r.z,c=r.rotation,d=r.rotationY,f=r.rotationX,p=r.skewX,g=r.skewY,_=r.scaleX,h=r.scaleY,m=r.transformPerspective,y=r.force3D,C=r.target,j=r.zOrigin,k="",$=y==="auto"&&t&&t!==1||y===!0;if(j&&(f!==ar||d!==ar)){var N=parseFloat(d)*Dr,T=Math.sin(N),w=Math.cos(N),x;N=parseFloat(f)*Dr,x=Math.cos(N),o=oc(C,o,T*x*-j),l=oc(C,l,-Math.sin(N)*-j),u=oc(C,u,w*x*-j+j)}m!==Oa&&(k+="perspective("+m+ir),(a||i)&&(k+="translate("+a+"%, "+i+"%) "),($||o!==Oa||l!==Oa||u!==Oa)&&(k+=u!==Oa||$?"translate3d("+o+", "+l+", "+u+") ":"translate("+o+", "+l+ir),c!==ar&&(k+="rotate("+c+ir),d!==ar&&(k+="rotateY("+d+ir),f!==ar&&(k+="rotateX("+f+ir),(p!==ar||g!==ar)&&(k+="skew("+p+", "+g+ir),(_!==1||h!==1)&&(k+="scale("+_+", "+h+ir),C.style[Ke]=k||"translate(0, 0)"},Jw=function(t,n){var r=n||this,a=r.xPercent,i=r.yPercent,o=r.x,l=r.y,u=r.rotation,c=r.skewX,d=r.skewY,f=r.scaleX,p=r.scaleY,g=r.target,_=r.xOrigin,h=r.yOrigin,m=r.xOffset,y=r.yOffset,C=r.forceCSS,j=parseFloat(o),k=parseFloat(l),$,N,T,w,x;u=parseFloat(u),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,u+=d),u||c?(u*=Dr,c*=Dr,$=Math.cos(u)*f,N=Math.sin(u)*f,T=Math.sin(u-c)*-p,w=Math.cos(u-c)*p,c&&(d*=Dr,x=Math.tan(c-d),x=Math.sqrt(1+x*x),T*=x,w*=x,d&&(x=Math.tan(d),x=Math.sqrt(1+x*x),$*=x,N*=x)),$=nt($),N=nt(N),T=nt(T),w=nt(w)):($=f,w=p,N=T=0),(j&&!~(o+"").indexOf("px")||k&&!~(l+"").indexOf("px"))&&(j=Bn(g,"x",o,"px"),k=Bn(g,"y",l,"px")),(_||h||m||y)&&(j=nt(j+_-(_*$+h*T)+m),k=nt(k+h-(_*N+h*w)+y)),(a||i)&&(x=g.getBBox(),j=nt(j+a/100*x.width),k=nt(k+i/100*x.height)),x="matrix("+$+","+N+","+T+","+w+","+j+","+k+")",g.setAttribute("transform",x),C&&(g.style[Ke]=x)},Qw=function(t,n,r,a,i){var o=360,l=ht(i),u=parseFloat(i)*(l&&~i.indexOf("rad")?nr:1),c=u-a,d=a+c+"deg",f,p;return l&&(f=i.split("_")[1],f==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),f==="cw"&&c<0?c=(c+o*Bg)%o-~~(c/o)*o:f==="ccw"&&c>0&&(c=(c-o*Bg)%o-~~(c/o)*o)),t._pt=p=new Nt(t._pt,n,r,a,c,Aw),p.e=d,p.u="deg",t._props.push(r),p},t0=function(t,n){for(var r in n)t[r]=n[r];return t},eS=function(t,n,r){var a=t0({},r._gsap),i="perspective,force3D,transformOrigin,svgOrigin",o=r.style,l,u,c,d,f,p,g,_;a.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),o[Ke]=n,l=Ha(r,1),rr(r,Ke),r.setAttribute("transform",c)):(c=getComputedStyle(r)[Ke],o[Ke]=n,l=Ha(r,1),o[Ke]=c);for(u in wn)c=a[u],d=l[u],c!==d&&i.indexOf(u)<0&&(g=vt(c),_=vt(d),f=g!==_?Bn(r,u,c,_):parseFloat(c),p=parseFloat(d),t._pt=new Nt(t._pt,l,u,f,p-f,nc),t._pt.u=_||0,t._props.push(u));t0(l,a)};Tt("padding,margin,Width,Radius",function(e,t){var n="Top",r="Right",a="Bottom",i="Left",o=(t<3?[n,r,a,i]:[n+i,n+r,a+r,a+i]).map(function(l){return t<2?e+l:"border"+l+e});ps[t>1?"border"+e:e]=function(l,u,c,d,f){var p,g;if(arguments.length<4)return p=o.map(function(_){return Sn(l,_,c)}),g=p.join(" "),g.split(p[0]).length===5?p[0]:g;p=(d+"").split(" "),g={},o.forEach(function(_,h){return g[_]=p[h]=p[h]||p[(h-1)/2|0]}),l.init(u,g,f)}});var lc={name:"css",register:ac,targetTest:function(t){return t.style&&t.nodeType},init:function(t,n,r,a,i){var o=this._props,l=t.style,u=r.vars.startAt,c,d,f,p,g,_,h,m,y,C,j,k,$,N,T,w;Ql||ac(),this.styles=this.styles||zg(t),w=this.styles.props,this.tween=r;for(h in n)if(h!=="autoRound"&&(d=n[h],!(It[h]&&Ng(h,n,r,a,t,i)))){if(g=typeof d,_=ps[h],g==="function"&&(d=d.call(r,a,t,i),g=typeof d),g==="string"&&~d.indexOf("random(")&&(d=Pa(d)),_)_(this,t,h,d,r)&&(T=1);else if(h.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(h)+"").trim(),d+="",Fn.lastIndex=0,Fn.test(c)||(m=vt(c),y=vt(d)),y?m!==y&&(c=Bn(t,h,c,y)+y):m&&(d+=m),this.add(l,"setProperty",c,d,a,i,0,0,h),o.push(h),w.push(h,0,l[h]);else if(g!=="undefined"){if(u&&h in u?(c=typeof u[h]=="function"?u[h].call(r,a,t,i):u[h],ht(c)&&~c.indexOf("random(")&&(c=Pa(c)),vt(c+"")||c==="auto"||(c+=Mt.units[h]||vt(Sn(t,h))||""),(c+"").charAt(1)==="="&&(c=Sn(t,h))):c=Sn(t,h),p=parseFloat(c),C=g==="string"&&d.charAt(1)==="="&&d.substr(0,2),C&&(d=d.substr(2)),f=parseFloat(d),h in dn&&(h==="autoAlpha"&&(p===1&&Sn(t,"visibility")==="hidden"&&f&&(p=0),w.push("visibility",0,l.visibility),En(this,l,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),h!=="scale"&&h!=="transform"&&(h=dn[h],~h.indexOf(",")&&(h=h.split(",")[0]))),j=h in wn,j){if(this.styles.save(h),g==="string"&&d.substring(0,6)==="var(--"&&(d=Ot(t,d.substring(4,d.indexOf(")"))),f=parseFloat(d)),k||($=t._gsap,$.renderTransform&&!n.parseTransform||Ha(t,n.parseTransform),N=n.smoothOrigin!==!1&&$.smooth,k=this._pt=new Nt(this._pt,l,Ke,0,1,$.renderTransform,$,0,-1),k.dep=1),h==="scale")this._pt=new Nt(this._pt,$,"scaleY",$.scaleY,(C?wr($.scaleY,C+f):f)-$.scaleY||0,nc),this._pt.u=0,o.push("scaleY",h),h+="X";else if(h==="transformOrigin"){w.push(Dt,0,l[Dt]),d=Xw(d),$.svg?sc(t,d,0,N,0,this):(y=parseFloat(d.split(" ")[2])||0,y!==$.zOrigin&&En(this,$,"zOrigin",$.zOrigin,y),En(this,l,h,ms(c),ms(d)));continue}else if(h==="svgOrigin"){sc(t,d,1,N,0,this);continue}else if(h in Zg){Qw(this,$,h,p,C?wr(p,C+d):d);continue}else if(h==="smoothOrigin"){En(this,$,"smooth",$.smooth,d);continue}else if(h==="force3D"){$[h]=d;continue}else if(h==="transform"){eS(this,d,t);continue}}else h in l||(h=$r(h)||h);if(j||(f||f===0)&&(p||p===0)&&!Lw.test(d)&&h in l)m=(c+"").substr((p+"").length),f||(f=0),y=vt(d)||(h in Mt.units?Mt.units[h]:m),m!==y&&(p=Bn(t,h,c,y)),this._pt=new Nt(this._pt,j?$:l,h,p,(C?wr(p,C+f):f)-p,!j&&(y==="px"||h==="zIndex")&&n.autoRound!==!1?Bw:nc),this._pt.u=y||0,m!==y&&y!=="%"&&(this._pt.b=c,this._pt.r=Ew);else if(h in l)qw.call(this,t,h,c,C?C+d:d);else if(h in t)this.add(t,h,c||t[h],C?C+d:d,a,i);else if(h!=="parseTransform"){Dl(h,d);continue}j||(h in l?w.push(h,0,l[h]):typeof t[h]=="function"?w.push(h,2,t[h]()):w.push(h,1,c||t[h])),o.push(h)}}T&&Pg(this)},render:function(t,n){if(n.tween._time||!ec())for(var r=n._pt;r;)r.r(t,r.d),r=r._next;else n.styles.revert()},get:Sn,aliases:dn,getSetter:function(t,n,r){var a=dn[n];return a&&a.indexOf(",")<0&&(n=a),n in wn&&n!==Dt&&(t._gsap.x||Sn(t,"x"))?r&&Eg===r?n==="scale"?zw:Ow:(Eg=r||{})&&(n==="scale"?Ww:Uw):t.style&&!Sl(t.style[n])?Rw:~n.indexOf("-")?Hw:ql(t,n)},core:{_removeProperty:rr,_getMatrix:ic}};jt.utils.checkPrefix=$r,jt.core.getStyleSaver=zg,(function(e,t,n,r){var a=Tt(e+","+t+","+n,function(i){wn[i]=1});Tt(t,function(i){Mt.units[i]="deg",Zg[i]=1}),dn[a[13]]=e+","+t,Tt(r,function(i){var o=i.split(":");dn[o[1]]=a[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),Tt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){Mt.units[e]="px"}),jt.registerPlugin(lc);var cc=jt.registerPlugin(lc)||jt,tS=cc.core.Tween;const nS=Object.freeze(Object.defineProperty({__proto__:null,Back:Nw,Bounce:Dw,CSSPlugin:lc,Circ:Iw,Cubic:ww,Elastic:Tw,Expo:$w,Linear:xw,Power0:mw,Power1:gw,Power2:yw,Power3:bw,Power4:_w,Quad:vw,Quart:Sw,Quint:kw,Sine:Mw,SteppedEase:jw,Strong:Cw,TimelineLite:yt,TimelineMax:yt,TweenLite:rt,TweenMax:tS,default:cc,gsap:cc},Symbol.toStringTag,{value:"Module"}));b.Account=_s,b.ActionLink=p0,b.AdaptiveDataGrid=ao,b.AnimationDurationFast=af,b.AnimationDurationNormal=sf,b.AnimationDurationSlow=of,b.AnimationEasingBounce=df,b.AnimationEasingEaseIn=lf,b.AnimationEasingEaseInOut=uf,b.AnimationEasingEaseOut=cf,b.AppointmentCard=to,b.AreaSeriesPrimitive=ov,b.AriaDataGrid=zu,b.AriaTabsDataGrid=mi,b.AriaTabsDataGridAdaptive=ao,b.Axis=po,b.BackLink=Va,b.BandScalesProvider=cv,b.BarSeriesPrimitive=lv,b.BorderColorCard=Io,b.BorderColorCardHover=Po,b.BorderColorDefault=Mo,b.BorderColorError=Fo,b.BorderColorForm=$o,b.BorderRadiusLarge=Tf,b.BorderRadiusMedium=Cf,b.BorderRadiusNone=Sf,b.BorderRadiusSmall=kf,b.BorderWidthCardBottom=_f,b.BorderWidthDefault=gf,b.BorderWidthFormElement=yf,b.BorderWidthFormElementError=bf,b.BorderWidthPanel=xf,b.BorderWidthTableCell=wf,b.BorderWidthTableHeader=vf,b.Breadcrumb=Mu,b.Breakpoint=Dc,b.BreakpointDesktop=sm,b.BreakpointLargeDesktop=om,b.BreakpointMobile=am,b.BreakpointTablet=im,b.Button=ut,b.ButtonBorderRadius=tp,b.ButtonBorderWidth=ep,b.ButtonPrimaryBackgroundActive=zh,b.ButtonPrimaryBackgroundDefault=Hh,b.ButtonPrimaryBackgroundDisabled=Wh,b.ButtonPrimaryBackgroundHover=Oh,b.ButtonPrimaryBorderDefault=Gh,b.ButtonPrimaryBorderFocus=Yh,b.ButtonPrimaryTextDefault=Uh,b.ButtonPrimaryTextDisabled=Vh,b.ButtonSecondaryBackgroundActive=Zh,b.ButtonSecondaryBackgroundDefault=qh,b.ButtonSecondaryBackgroundHover=Kh,b.ButtonSecondaryBackgroundSolid=Xh,b.ButtonSecondaryBorderDefault=Qh,b.ButtonSecondaryTextDefault=Jh,b.ButtonShadowSize=np,b.ButtonSize=vs,b.ButtonSpacingPaddingHorizontalDesktop=nl,b.ButtonSpacingPaddingHorizontalMobile=el,b.ButtonSpacingPaddingVerticalDesktop=tl,b.ButtonSpacingPaddingVerticalMobile=Qo,b.ButtonTypographyWeight=rp,b.ButtonVariant=xs,b.Card=Zs,b.CardBackgroundDefault=ap,b.CardBorderBottom=op,b.CardBorderDefault=ip,b.CardBorderHover=sp,b.CardBorderWidthBottom=fp,b.CardBorderWidthDefault=dp,b.CardGroup=b_,b.CardGroupItem=__,b.CardShadowDefault=hp,b.CardShadowHover=pp,b.CardSpacingHeadingMargin=il,b.CardSpacingPaddingDesktop=al,b.CardSpacingPaddingMobile=rl,b.CardTextDescription=cp,b.CardTextHeading=lp,b.CardTextLink=up,b.CareCard=x_,b.CharacterCount=k0,b.ChartEnhancer=dv,b.ChartNoScript=uv,b.ChartRoot=Sd,b.Checkbox=Sc,b.Checkboxes=Cc,b.ColorBorderDefault=Ef,b.ColorBorderSecondary=Bf,b.ColorButtonLoginActive=dh,b.ColorButtonLoginBackground=ch,b.ColorButtonLoginHover=uh,b.ColorButtonLoginShadow=fh,b.ColorButtonPrimaryActive=Vf,b.ColorButtonPrimaryBackground=zf,b.ColorButtonPrimaryHover=Uf,b.ColorButtonPrimaryShadow=Gf,b.ColorButtonPrimaryText=Wf,b.ColorButtonReverseActive=rh,b.ColorButtonReverseBackground=eh,b.ColorButtonReverseHover=nh,b.ColorButtonReverseShadow=ah,b.ColorButtonReverseText=th,b.ColorButtonSecondaryActive=Jf,b.ColorButtonSecondaryBackground=Yf,b.ColorButtonSecondaryBackgroundSolid=qf,b.ColorButtonSecondaryBorder=Xf,b.ColorButtonSecondaryHover=Zf,b.ColorButtonSecondaryShadow=Qf,b.ColorButtonSecondaryText=Kf,b.ColorButtonWarningActive=oh,b.ColorButtonWarningBackground=ih,b.ColorButtonWarningHover=sh,b.ColorButtonWarningShadow=lh,b.ColorError=Rf,b.ColorFocusBackground=Lf,b.ColorFocusText=Af,b.ColorFormBackground=Of,b.ColorFormBorder=Hf,b.ColorGrey1=qo,b.ColorGrey2=Xo,b.ColorGrey3=Ko,b.ColorGrey4=Zo,b.ColorGrey5=Jo,b.ColorLinkActive=Pf,b.ColorLinkDefault=$f,b.ColorLinkHover=If,b.ColorLinkVisited=Ff,b.ColorPrimaryBlack=Eo,b.ColorPrimaryBlue=Lo,b.ColorPrimaryDarkPink=Ho,b.ColorPrimaryGreen=Bo,b.ColorPrimaryPurple=Ro,b.ColorPrimaryRed=Oo,b.ColorPrimaryWhite=Ao,b.ColorPrimaryYellow=zo,b.ColorSecondaryAquaGreen=Go,b.ColorSecondaryOrange=Vo,b.ColorSecondaryPaleYellow=Wo,b.ColorSecondaryPink=Yo,b.ColorSecondaryWarmYellow=Uo,b.ColorTextPrimary=Nf,b.ColorTextPrint=Mf,b.ColorTextReverse=Df,b.ColorTextSecondary=jf,b.Column=or,b.ColumnAlign=$c,b.ComponentBlur=Lh,b.ComponentBreadcrumbChevronMarginLeft=Nh,b.ComponentBreadcrumbChevronMarginRight=jh,b.ComponentBreadcrumbPaddingTopDesktop=Mh,b.ComponentBreadcrumbPaddingTopMobile=Dh,b.ComponentButtonPaddingDesktopHorizontal=gh,b.ComponentButtonPaddingDesktopVertical=mh,b.ComponentButtonPaddingMobileHorizontal=ph,b.ComponentButtonPaddingMobileVertical=hh,b.ComponentButtonShadowSize=yh,b.ComponentCardHeadingMargin=kh,b.ComponentCardPaddingDesktop=Sh,b.ComponentCardPaddingMobile=wh,b.ComponentDetails=Eh,b.ComponentExpander=Bh,b.ComponentFormCheckboxLabelPadding=vh,b.ComponentFormCheckboxSize=xh,b.ComponentFormInputMinHeight=bh,b.ComponentFormInputPadding=_h,b.ComponentLink=Ah,b.ComponentPagination=Rh,b.ComponentPanelPaddingDesktop=Th,b.ComponentPanelPaddingMobile=Ch,b.ComponentSpread=Fh,b.ComponentSummaryListCellPaddingHorizontal=Ih,b.ComponentSummaryListCellPaddingVertical=$h,b.ComponentSummaryListRowMargin=Ph,b.Container=ks,b.ContentsList=y_,b.DEFAULT_FONT_CONFIG=xl,b.DashboardSummaryGrid=A_,b.DateInput=O0,b.Details=Au,b.DoDontList=Eu,b.ElevationHigh=Hm,b.ElevationLow=Bm,b.ElevationMedium=Rm,b.ElevationNone=Em,b.ErrorMessage=Ts,b.ErrorSummary=H0,b.Expander=Bu,b.FRUTIGER_FONT_FILES=St,b.Fieldset=qa,b.Float=Mc,b.FocusOutlineOffset=Pm,b.FocusOutlineStyle=Fm,b.FocusOutlineWidth=Im,b.FocusShadowButton=Am,b.FocusShadowInput=Lm,b.FontFamilyBase=ta,b.FontFamilyFallback=na,b.FontFamilyPrint=ra,b.FontLineHeightBase=ts,b.FontSize14Mobile=oa,b.FontSize14Print=ca,b.FontSize14Tablet=la,b.FontSize16Mobile=ua,b.FontSize16Print=fa,b.FontSize16Tablet=da,b.FontSize19Mobile=ha,b.FontSize19Print=ma,b.FontSize19Tablet=pa,b.FontSize22Mobile=ga,b.FontSize22Print=ba,b.FontSize22Tablet=ya,b.FontSize26Mobile=_a,b.FontSize26Print=va,b.FontSize26Tablet=xa,b.FontSize36Mobile=wa,b.FontSize36Print=ka,b.FontSize36Tablet=Sa,b.FontSize48Mobile=Ca,b.FontSize48Print=Na,b.FontSize48Tablet=Ta,b.FontSizeBase=es,b.FontWeightBold=ia,b.FontWeightLight=sa,b.FontWeightNormal=aa,b.Footer=Ns,b.FormBorderRadius=Fp,b.FormBorderWidthDefault=Ip,b.FormBorderWidthError=Pp,b.FormErrorTextDefault=Dp,b.FormErrorTypographyWeight=Mp,b.FormHintTextDefault=$p,b.FormInputBackgroundDefault=mp,b.FormInputBackgroundDisabled=yp,b.FormInputBackgroundError=bp,b.FormInputBackgroundFocus=gp,b.FormInputBorderDefault=_p,b.FormInputBorderDisabled=wp,b.FormInputBorderError=vp,b.FormInputBorderFocus=xp,b.FormInputTextDefault=Sp,b.FormInputTextDisabled=Cp,b.FormInputTextPlaceholder=kp,b.FormLabelTextDefault=Tp,b.FormLabelTextRequired=Np,b.FormLabelTypographyWeight=jp,b.FormSpacingCheckboxLabelPadding=cl,b.FormSpacingCheckboxSize=ll,b.FormSpacingInputMinHeight=ol,b.FormSpacingInputPadding=sl,b.GanttChart=m_,b.Grid=Xa,b.GridGutter=cm,b.GridGutterHalf=um,b.GridLines=Cd,b.GridPageWidth=lm,b.GridWidth=Tn,b.Header=Ka,b.HeaderSSR=X0,b.HeaderSearch=Lc,b.HeaderStatic=Ka,b.Heading=Vt,b.HeadingsNhsukHeadingL=Jt,b.HeadingsNhsukHeadingM=Qt,b.HeadingsNhsukHeadingS=en,b.HeadingsNhsukHeadingXl=Zt,b.HeadingsNhsukHeadingXs=tn,b.Hero=Ac,b.Hint=Ss,b.Images=$_,b.Input=Ga,b.InsetText=v_,b.Label=Ya,b.LayoutColumnActions=rm,b.LayoutColumnFull=Qp,b.LayoutColumnHalf=em,b.LayoutColumnQuarter=nm,b.LayoutColumnThird=tm,b.LayoutContainerMaxWidth=Jp,b.Legend=sv,b.LineScalesProvider=kd,b.LineSeriesPrimitive=Ld,b.List=Ic,b.MainWrapper=Cs,b.MedicationCard=no,b.MetricCard=Ad,b.NHSBodyText=r1,b.NHSBodyTextLarge=a1,b.NHSBodyTextSmall=i1,b.NHSHeading1=Jv,b.NHSHeading2=Qv,b.NHSHeading3=e1,b.NHSHeading4=t1,b.NHSHeading5=n1,b.NHSLedeText=s1,b.NHSLedeTextSmall=o1,b.NHSThemeProvider=G0,b.NHS_FALLBACK_FONT_STACK=v1,b.NHS_FONT_STACK=x1,b.NavigationSplitView=sd,b.PageTemplate=fx,b.Pagination=g_,b.Panel=$u,b.ParagraphsBody=nn,b.ParagraphsBodyLarge=rn,b.ParagraphsBodySmall=an,b.ParagraphsLedeText=sn,b.ParagraphsLedeTextSmall=on,b.PatientCard=eo,b.ProductRoadmap=ld,b.Radios=N0,b.RadiosServer=D0,b.ResponsiveDataGrid=ao,b.ResponsiveDataGridDemo=dx,b.Row=Nn,b.SPC=Xv,b.SPCChart=rf,b.SPCMetricCard=Uv,b.Select=Ar,b.SelectOption=Nc,b.ShadowButtonDefault=Tm,b.ShadowButtonFocus=Dm,b.ShadowButtonSecondary=Nm,b.ShadowButtonWarning=jm,b.ShadowCardDefault=Mm,b.ShadowCardHover=$m,b.SizeButtonMinHeightDesktop=Zp,b.SizeButtonMinHeightMobile=Kp,b.SizeFormControlLarge=zp,b.SizeFormControlMedium=Op,b.SizeFormControlSmall=Hp,b.SizeFormInputWidth2xl=qp,b.SizeFormInputWidth3xl=Xp,b.SizeFormInputWidthLg=Gp,b.SizeFormInputWidthMd=Vp,b.SizeFormInputWidthSm=Up,b.SizeFormInputWidthXl=Yp,b.SizeFormInputWidthXs=Wp,b.SizeIconExtraLarge=Bp,b.SizeIconLarge=Ep,b.SizeIconMedium=Ap,b.SizeIconNhsDefault=Rp,b.SizeIconSmall=Lp,b.SkipLink=Ks,b.SlotMatrix=L_,b.SortStatusControl=z_,b.Spacing0=ul,b.Spacing1=dl,b.Spacing2=fl,b.Spacing3=hl,b.Spacing4=pl,b.Spacing5=ml,b.Spacing6=gl,b.Spacing7=yl,b.Spacing8=bl,b.Spacing9=_l,b.SpacingResponsive0Mobile=Fi,b.SpacingResponsive0Tablet=Li,b.SpacingResponsive1Mobile=Ai,b.SpacingResponsive1Tablet=Ei,b.SpacingResponsive2Mobile=Bi,b.SpacingResponsive2Tablet=Ri,b.SpacingResponsive3Mobile=Hi,b.SpacingResponsive3Tablet=Oi,b.SpacingResponsive4Mobile=zi,b.SpacingResponsive4Tablet=Wi,b.SpacingResponsive5Mobile=Ui,b.SpacingResponsive5Tablet=Vi,b.SpacingResponsive6Mobile=Gi,b.SpacingResponsive6Tablet=Yi,b.SpacingResponsive7Mobile=qi,b.SpacingResponsive7Tablet=Xi,b.SpacingResponsive8Mobile=Ki,b.SpacingResponsive8Tablet=Zi,b.SpacingResponsive9Mobile=Ji,b.SpacingResponsive9Tablet=Qi,b.SpacingUtilities=I0,b.StateDisabledBackground=Sm,b.StateDisabledBorder=km,b.StateDisabledText=Cm,b.StateErrorBackground=dm,b.StateErrorBorder=fm,b.StateErrorText=hm,b.StateInfoBackground=xm,b.StateInfoBorder=vm,b.StateInfoText=wm,b.StateSuccessBackground=pm,b.StateSuccessBorder=mm,b.StateSuccessText=gm,b.StateWarningBackground=ym,b.StateWarningBorder=bm,b.StateWarningText=_m,b.SummaryCard=Ou,b.SummaryList=w_,b.Table=Yt,b.Tabs=j_,b.Tag=He,b.TaskList=Ru,b.Textarea=Tc,b.TooltipOverlay=iv,b.TooltipProvider=Fd,b.TransactionalPageTemplate=hx,b.TransitionButtonDefault=ff,b.TransitionButtonShadow=hf,b.TransitionCardHover=mf,b.TransitionInputFocus=pf,b.VisibilityProvider=nv,b.VitalsCard=ro,b.WIDTH_FRACTIONS=A0,b.WarningCallout=M_,b.WidthContainer=io,b.WidthUtilities=F0,b.checkFrutigerLoaded=w1,b.createGenericTabsConfig=yi,b.createTCHTabsConfig=q_,b.generateFrutigerFontFace=b1,b.getResponsiveStyles=Zv,b.getSpacingClass=P0,b.getWidthClass=L0,b.preloadFrutigerFonts=_1,b.tchDataConfig=Uu,b.useColors=c1,b.useComponentSpacing=h1,b.useNHSHeadings=p1,b.useNHSParagraphs=m1,b.useNHSTheme=W0,b.useNHSTypographySystem=g1,b.useNavigationSplitDrill=y1,b.useNavigationSplitUrlSync=id,b.useNhsFdpBreakpoints=so,b.useResponsiveSpacing=f1,b.useResponsiveValue=px,b.useSpacing=u1,b.useSpc=Jd,b.useTokens=l1,b.useTypography=d1,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.js.map
