(function(_,E){typeof exports=="object"&&typeof module<"u"?E(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],E):(_=typeof globalThis<"u"?globalThis:_||self,E(_.NHSFDPDesignSystem={},_.React,_.ReactDOM))})(this,(function(_,E,N0){"use strict";function j0(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const X=j0(E);function D0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var na={exports:{}},Vr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pc;function M0(){if(Pc)return Vr;Pc=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:s,ref:i!==void 0?i:null,props:a}}return Vr.Fragment=t,Vr.jsx=n,Vr.jsxs=n,Vr}var Gr={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $c;function I0(){return $c||($c=1,process.env.NODE_ENV!=="production"&&(function(){function e(H){if(H==null)return null;if(typeof H=="function")return H.$$typeof===$?null:H.displayName||H.name||null;if(typeof H=="string")return H;switch(H){case h:return"Fragment";case y:return"Profiler";case m:return"StrictMode";case x:return"Suspense";case M:return"SuspenseList";case v:return"Activity"}if(typeof H=="object")switch(typeof H.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),H.$$typeof){case b:return"Portal";case N:return(H.displayName||"Context")+".Provider";case k:return(H._context.displayName||"Context")+".Consumer";case S:var U=H.render;return H=H.displayName,H||(H=U.displayName||U.name||"",H=H!==""?"ForwardRef("+H+")":"ForwardRef"),H;case j:return U=H.displayName||null,U!==null?U:e(H.type)||"Memo";case C:U=H._payload,H=H._init;try{return e(H(U))}catch{}}return null}function t(H){return""+H}function n(H){try{t(H);var U=!1}catch{U=!0}if(U){U=console;var G=U.error,oe=typeof Symbol=="function"&&Symbol.toStringTag&&H[Symbol.toStringTag]||H.constructor.name||"Object";return G.call(U,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",oe),t(H)}}function r(H){if(H===h)return"<>";if(typeof H=="object"&&H!==null&&H.$$typeof===C)return"<...>";try{var U=e(H);return U?"<"+U+">":"<...>"}catch{return"<...>"}}function i(){var H=T.A;return H===null?null:H.getOwner()}function a(){return Error("react-stack-top-frame")}function s(H){if(w.call(H,"key")){var U=Object.getOwnPropertyDescriptor(H,"key").get;if(U&&U.isReactWarning)return!1}return H.key!==void 0}function l(H,U){function G(){D||(D=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",U))}G.isReactWarning=!0,Object.defineProperty(H,"key",{get:G,configurable:!0})}function u(){var H=e(this.type);return F[H]||(F[H]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),H=this.props.ref,H!==void 0?H:null}function c(H,U,G,oe,z,pe,we,fe){return G=pe.ref,H={$$typeof:g,type:H,key:U,props:pe,_owner:z},(G!==void 0?G:null)!==null?Object.defineProperty(H,"ref",{enumerable:!1,get:u}):Object.defineProperty(H,"ref",{enumerable:!1,value:null}),H._store={},Object.defineProperty(H._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(H,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(H,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:we}),Object.defineProperty(H,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:fe}),Object.freeze&&(Object.freeze(H.props),Object.freeze(H)),H}function d(H,U,G,oe,z,pe,we,fe){var de=U.children;if(de!==void 0)if(oe)if(L(de)){for(oe=0;oe<de.length;oe++)f(de[oe]);Object.freeze&&Object.freeze(de)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(de);if(w.call(U,"key")){de=e(H);var Z=Object.keys(U).filter(function(he){return he!=="key"});oe=0<Z.length?"{key: someKey, "+Z.join(": ..., ")+": ...}":"{key: someKey}",q[de+oe]||(Z=0<Z.length?"{"+Z.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,oe,de,Z,de),q[de+oe]=!0)}if(de=null,G!==void 0&&(n(G),de=""+G),s(U)&&(n(U.key),de=""+U.key),"key"in U){G={};for(var se in U)se!=="key"&&(G[se]=U[se])}else G=U;return de&&l(G,typeof H=="function"?H.displayName||H.name||"Unknown":H),c(H,de,pe,z,i(),G,we,fe)}function f(H){typeof H=="object"&&H!==null&&H.$$typeof===g&&H._store&&(H._store.validated=1)}var p=E,g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),N=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),$=Symbol.for("react.client.reference"),T=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,w=Object.prototype.hasOwnProperty,L=Array.isArray,P=console.createTask?console.createTask:function(){return null};p={react_stack_bottom_frame:function(H){return H()}};var D,F={},A=p.react_stack_bottom_frame.bind(p,a)(),ne=P(r(a)),q={};Gr.Fragment=h,Gr.jsx=function(H,U,G,oe,z){var pe=1e4>T.recentlyCreatedOwnerStacks++;return d(H,U,G,!1,oe,z,pe?Error("react-stack-top-frame"):A,pe?P(r(H)):ne)},Gr.jsxs=function(H,U,G,oe,z){var pe=1e4>T.recentlyCreatedOwnerStacks++;return d(H,U,G,!0,oe,z,pe?Error("react-stack-top-frame"):A,pe?P(r(H)):ne)}})()),Gr}var Fc;function P0(){return Fc||(Fc=1,process.env.NODE_ENV==="production"?na.exports=M0():na.exports=I0()),na.exports}var o=P0(),Is={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Lc;function $0(){return Lc||(Lc=1,(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var a="",s=0;s<arguments.length;s++){var l=arguments[s];l&&(a=i(a,r(l)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var s="";for(var l in a)t.call(a,l)&&a[l]&&(s=i(s,l));return s}function i(a,s){return s?a?a+" "+s:a+s:a}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(Is)),Is.exports}var F0=$0();const xe=D0(F0),L0=({text:e,href:t,openInNewWindow:n=!1,className:r,...i})=>{const a=xe("nhsuk-action-link__link",r);return o.jsx("div",{className:"nhsuk-action-link",children:o.jsxs("a",{className:a,href:t,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,...i,children:[o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right-circle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"36",height:"36",children:[o.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),o.jsx("path",{d:"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"})]}),o.jsx("span",{className:"nhsuk-action-link__text",children:e})]})})},Ps=({ariaLabel:e="Account",items:t=[],className:n,variant:r="default"})=>{if(!t||t.length===0)return null;const i=a=>{const s=a.icon?o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__user",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",role:"img","aria-label":a.icon===!0?"User":void 0,children:o.jsx("path",{d:"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z"})}):null,l=a.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:a.html}}):a.text,u=o.jsxs(o.Fragment,{children:[s,l]});return a.href?o.jsx("a",{className:"nhsuk-account__link nhsuk-header__account-link",href:a.href,children:u}):a.action?o.jsx("form",{className:"nhsuk-account__form",action:a.action,method:a.method||"post",children:o.jsx("button",{className:"nhsuk-account__button",type:"submit",role:"button",children:u})}):o.jsx("span",{children:u})};return o.jsx("nav",{className:xe("nhsuk-account",{"nhsuk-account--white":r==="white"},n),"aria-label":e,children:o.jsx("ul",{className:"nhsuk-account__list",children:t.map((a,s)=>a&&o.jsx("li",{className:xe("nhsuk-account__item nhsuk-header__account-item",a.className),children:i(a)},s))})})};var $s=(e=>(e.Primary="primary",e.Secondary="secondary",e.Reverse="reverse",e.Warning="warning",e.Login="login",e.Metric="metric",e))($s||{}),Fs=(e=>(e.Small="small",e.Default="default",e.Large="large",e))(Fs||{});function A0(e){const t=e.variant||"primary",n=e.size||"default",r=!!e.fullWidth,i=["nhs-aria-button",`nhs-aria-button--${t}`,n!=="default"?`nhs-aria-button--${n}`:"",r?"nhs-aria-button--full-width":"",e.className||""].filter(Boolean).join(" ");return{tag:e.href?"a":"button",classes:i,data:{module:"nhs-button"},attrs:e.href?{href:e.href,role:"button"}:{type:"button"},preventDoubleClick:!!e.preventDoubleClick}}const{forwardRef:E0,useCallback:Pn,useState:Ls}=X;function B0(e,t){const{children:n,variant:r=$s.Primary,size:i=Fs.Default,fullWidth:a=!1,className:s="",preventDoubleClick:l=!1,...u}=e,[c,d]=Ls(!1),[f,p]=Ls(!1),[g,b]=Ls(!1),h=A0({variant:r,size:i,fullWidth:a,className:s,preventDoubleClick:l,href:"href"in u?u.href:void 0}),m="disabled"in u?u.disabled:u["aria-disabled"]==="true",y={...c&&{"data-pressed":"true"},...f&&{"data-hovered":"true"},...g&&{"data-focused":"true"},...m&&{"data-disabled":"true"}},k=Pn(()=>!m&&d(!0),[m]),N=Pn(()=>d(!1),[]),S=Pn(()=>!m&&p(!0),[m]),x=Pn(()=>{p(!1),d(!1)},[]),M=Pn(()=>b(!0),[]),j=Pn(()=>b(!1),[]),C=Pn(de=>{de.key===" "&&("href"in u||de.currentTarget.getAttribute("role")==="button")&&(de.preventDefault(),de.currentTarget.click())},[u]),v=Pn(de=>{if(l){const Z=de.currentTarget;if(Z.getAttribute("data-processing")==="true"){de.preventDefault();return}Z.setAttribute("data-processing","true"),setTimeout(()=>{Z.removeAttribute("data-processing")},1e3)}},[l]);if("href"in u&&u.href){const{id:de,style:Z,title:se,["aria-label"]:he,["aria-describedby"]:I,["aria-labelledby"]:O,tabIndex:V,...ae}=u,ee=u;return o.jsx("a",{ref:t,href:ee.href,target:ee.target,rel:ee.rel,className:h.classes,role:"button",draggable:"false","data-module":"nhs-button",...y,...l&&{"data-prevent-double-click":"true"},...ae,onKeyDown:le=>{ee.onKeyDown?.(le),C(le)},onClick:le=>{ee.onClick?.(le),v(le)},onMouseDown:le=>{ee.onMouseDown?.(le),k()},onMouseUp:le=>{ee.onMouseUp?.(le),N()},onMouseEnter:le=>{ee.onMouseEnter?.(le),S()},onMouseLeave:le=>{ee.onMouseLeave?.(le),x()},onFocus:le=>{ee.onFocus?.(le),M()},onBlur:le=>{ee.onBlur?.(le),j()},"aria-disabled":ee["aria-disabled"],...ee["aria-disabled"]==="true"&&{tabIndex:-1},id:de,style:Z,title:se,"aria-label":he,"aria-describedby":I,"aria-labelledby":O,tabIndex:V,children:n})}const{id:$,style:T,title:w,["aria-label"]:L,["aria-describedby"]:P,["aria-labelledby"]:D,tabIndex:F,name:A,value:ne,form:q,formAction:H,formEncType:U,formMethod:G,formNoValidate:oe,formTarget:z,autoFocus:pe,...we}=u,fe=u;return o.jsx("button",{ref:t,type:fe.type||"button",disabled:fe.disabled,className:h.classes,"data-module":"nhs-button",...y,...l&&{"data-prevent-double-click":"true"},...fe.disabled&&{"aria-disabled":"true"},...we,onKeyDown:de=>{fe.onKeyDown?.(de),C(de)},onClick:de=>{fe.onClick?.(de),v(de)},onMouseDown:de=>{fe.onMouseDown?.(de),k()},onMouseUp:de=>{fe.onMouseUp?.(de),N()},onMouseEnter:de=>{fe.onMouseEnter?.(de),S()},onMouseLeave:de=>{fe.onMouseLeave?.(de),x()},onFocus:de=>{fe.onFocus?.(de),M()},onBlur:de=>{fe.onBlur?.(de),j()},id:$,style:T,title:w,"aria-label":L,"aria-describedby":P,"aria-labelledby":D,tabIndex:F,name:A,value:ne,form:q,formAction:H,formEncType:U,formMethod:G,formNoValidate:oe,formTarget:z,autoFocus:pe,children:n})}const ft=E0(B0);ft.displayName="Button";const ra=({text:e="Back",html:t,href:n="#",className:r,element:i="a",onClick:a,...s})=>{const l=xe("nhsuk-back-link",r),u=xe("nhsuk-back-link__link"),c=()=>o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:o.jsx("path",{d:"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"})}),t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e]});return o.jsx("div",{className:l,children:i==="button"?o.jsx("button",{className:u,onClick:a,type:"button",...s,children:c()}):o.jsx("a",{className:u,href:n,...s,children:c()})})};function R0(e){const{color:t="default",noBorder:n,closable:r,disabled:i,className:a}=e;return{classes:["nhsuk-tag",t!=="default"?`nhsuk-tag--${t}`:"",n?"nhsuk-tag--no-border":"",r?"nhsuk-tag--closable":"",i?"nhsuk-tag--disabled":"",a||""].filter(Boolean).join(" "),showClose:!!r,disabled:!!i}}const Re=({text:e,html:t,children:n,color:r="default",noBorder:i=!1,closable:a=!1,onClose:s,disabled:l=!1,className:u,...c})=>{const d=R0({color:r,noBorder:i,closable:a,disabled:l,className:u}),f=p=>{p.preventDefault(),p.stopPropagation(),!l&&s&&s()};return o.jsxs("strong",{className:d.classes,...c,children:[n||(t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e),a&&o.jsx("button",{type:"button",className:"nhsuk-tag__close",onClick:f,disabled:l,"aria-label":"Remove",title:"Remove",children:"Ã—"})]})},Ac=({id:e,name:t,checked:n,defaultChecked:r=!1,disabled:i=!1,value:a="true",hint:s,errorMessage:l,className:u,children:c,onChange:d,onBlur:f,onFocus:p,attributes:g,...b})=>{const[h,m]=E.useState(r),y=n!==void 0,k=y?n:h;E.useEffect(()=>{y||m(r)},[r,y]);const N=C=>{const v=C.target.checked;y||m(v),d?.(v,C)},S=s?`${e}-hint`:void 0,x=l?`${e}-error`:void 0,M=[S,x].filter(Boolean).join(" ")||void 0,j=xe("nhsuk-form-group",{"nhsuk-form-group--error":!!l},u);return o.jsx("div",{className:j,...b,children:o.jsx("div",{className:"nhsuk-checkboxes",children:o.jsxs("div",{className:"nhsuk-checkboxes__item",children:[o.jsx("input",{className:"nhsuk-checkboxes__input",id:e,name:t||e,type:"checkbox",value:a,checked:k,disabled:i,onChange:N,onBlur:f,onFocus:p,"aria-describedby":M,...g}),o.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:e,children:c}),s&&o.jsx("div",{id:S,className:"nhsuk-checkboxes__hint",children:s}),l&&o.jsxs("div",{id:x,className:"nhsuk-error-message nhsuk-checkboxes__error",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]})]})})})};Ac.displayName="Checkbox";function Ec(e){const n=(e.type||"text")==="range";return{classes:["nhsuk-input",e.hasError?"nhsuk-input--error":"",n?"nhsuk-input--range":"",!n&&e.width&&e.width!=="full"?`nhsuk-input--width-${e.width}`:"",e.className||""].filter(Boolean).join(" "),isRange:n}}const ia=({id:e,name:t,type:n="text",value:r,defaultValue:i,placeholder:a,disabled:s=!1,readOnly:l=!1,required:u=!1,hasError:c=!1,describedBy:d,className:f,width:p="full",inputMode:g,autoComplete:b,maxLength:h,minLength:m,pattern:y,step:k,min:N,max:S,showValueLabels:x=!1,showCurrentValue:M=!1,valueLabels:j,onChange:C,onBlur:v,onFocus:$,onKeyDown:T,...w})=>{const[L,P]=E.useState(r||i||(n==="range"?N||"0":""));E.useEffect(()=>{r!==void 0&&P(r)},[r]);const D=z=>{const pe=z.target;P(pe.value),("type"in z&&z.nativeEvent||z.type==="keydown")&&C?.(z)},{classes:F,isRange:A}=Ec({type:n,hasError:c,width:p,className:f}),ne=r!==void 0,q={id:e,name:t,type:n,placeholder:a,disabled:s,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:b,maxLength:h,minLength:m,pattern:y,step:k,min:N,max:S,onChange:D,onBlur:v,onFocus:$,onKeyDown:z=>{if(A&&/[0-9]/.test(z.key)){const pe=(L?.toString()||"")+z.key;z.target.value=pe,D(z)}T?.(z)},...w},H=!ne&&i!==void 0?{defaultValue:i}:{},U=ne?{value:r}:{},G=()=>o.jsx("input",{className:F,...U,...H,"data-current-value":L,...q}),oe=A?o.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[x&&o.jsxs("div",{className:"nhsuk-input-range-labels",children:[o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:j?.min||N||"0"}),G(),o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:j?.max||S||"100"})]}),!x&&G(),M&&o.jsx("div",{className:"nhsuk-input-range-current-value",children:o.jsxs("span",{className:"nhsuk-input-range-current-label",children:[j?.current||"Current value:"," ",o.jsx("strong",{children:L})]})})]}):null;return A?oe:o.jsx("input",{className:F,id:e,name:t,type:n,value:r,...r===void 0&&i!==void 0?{defaultValue:i}:{},placeholder:a,disabled:s,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:b,maxLength:h,minLength:m,pattern:y,step:k,min:N,max:S,onChange:C,onBlur:v,onFocus:$,onKeyDown:T,...w})};function H0(e){const t=e.size||"m",n=["nhsuk-label",t!=="m"?`nhsuk-label--${t}`:"",e.className||""].filter(Boolean).join(" ");return{tag:e.isPageHeading?"h1":"label",classes:n,size:t,htmlFor:e.isPageHeading?void 0:e.htmlFor,isPageHeading:!!e.isPageHeading}}const aa=({htmlFor:e,className:t,isPageHeading:n=!1,size:r="m",children:i,...a})=>{const s=H0({size:r,isPageHeading:n,className:t,htmlFor:e}),l=s.tag;return o.jsx(l,{className:s.classes,htmlFor:s.htmlFor,...a,children:n?o.jsx("label",{className:"nhsuk-label-wrapper",htmlFor:e,children:i}):i})};function O0(e){const t=["nhsuk-fieldset",e.className||""].filter(Boolean).join(" "),n=e.legend?["nhsuk-fieldset__legend",e.legend.size?`nhsuk-fieldset__legend--${e.legend.size}`:"",e.legend.className||""].filter(Boolean).join(" "):void 0;return{fieldsetClasses:t,legendClasses:n,legendIsPageHeading:!!e.legend?.isPageHeading,describedBy:e.describedBy}}const sa=({children:e,legend:t,className:n,describedBy:r,...i})=>{const a=O0({className:n,describedBy:r,legend:t?{size:t.size,className:t.className,isPageHeading:t.isPageHeading}:void 0}),s=()=>{const l=t?.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:t.html}}):t?.text;return a.legendIsPageHeading?o.jsx("h1",{className:"nhsuk-fieldset__heading",children:l}):l};return o.jsxs("fieldset",{className:a.fieldsetClasses,"aria-describedby":a.describedBy,...i,children:[t&&(t.text||t.html)&&o.jsx("legend",{className:a.legendClasses,children:s()}),e]})};function z0(e){const t=["nhsuk-checkboxes",e.small?"nhsuk-checkboxes--small":"",e.className||""].filter(Boolean).join(" "),n=["nhsuk-form-group",e.hasError?"nhsuk-form-group--error":""].filter(Boolean).join(" ");return{classes:t,formGroupClasses:n}}const Bc=({items:e,name:t,idPrefix:n,legend:r,isPageHeading:i=!1,legendSize:a="l",hint:s,errorMessage:l,className:u="",small:c=!1,onChange:d,fieldsetAttributes:f,attributes:p,...g})=>{const[b,h]=E.useState(e.filter(C=>C.checked).map(C=>C.value)),m=n||t,y=s?`${m}-hint`:void 0,k=l?`${m}-error`:void 0,N=[y,k].filter(Boolean).join(" ")||void 0,S=(C,v)=>{let $;v?$=[...b,C]:$=b.filter(T=>T!==C),h($),d?.($)},x=()=>e.map((C,v)=>{const $=`${m}-${v+1}`,T=`${$}-conditional`,w=b.includes(C.value),L=C.disabled||!1;return o.jsxs("div",{className:"nhsuk-checkboxes__item",children:[o.jsx("input",{className:"nhsuk-checkboxes__input",id:$,name:t,type:"checkbox",value:C.value,checked:w,disabled:L,onChange:P=>S(C.value,P.target.checked),"aria-describedby":C.hint?`${$}-hint`:N,...C.conditional&&{"aria-controls":T,"aria-expanded":w?"true":"false"},...C.attributes}),o.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:$,children:C.text}),C.hint&&o.jsx("div",{id:`${$}-hint`,className:"nhsuk-checkboxes__hint",children:C.hint}),C.conditional&&o.jsx("div",{className:xe("nhsuk-checkboxes__conditional",{"nhsuk-checkboxes__conditional--hidden":!w}),id:T,children:typeof C.conditional=="object"&&C.conditional!==null&&"label"in C.conditional&&"id"in C.conditional&&"name"in C.conditional?o.jsxs("div",{style:{marginTop:"16px"},children:[C.conditional.label&&o.jsx(aa,{htmlFor:C.conditional.id,children:C.conditional.label}),o.jsx(ia,{...C.conditional})]}):C.conditional})]},C.value)}),{classes:M,formGroupClasses:j}=z0({small:c,className:u,hasError:!!l});return o.jsx("div",{className:j,...p,...g,children:o.jsxs(sa,{legend:r?{text:r,isPageHeading:i,size:a}:void 0,describedBy:N,...f,children:[s&&o.jsx("div",{id:y,className:"nhsuk-hint",children:s}),l&&o.jsxs("div",{id:k,className:"nhsuk-error-message",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]}),o.jsx("div",{className:M,children:x()})]})})};Bc.displayName="Checkboxes";function U0(e){const t=e.resize??"vertical";return{classes:["nhsuk-textarea",e.hasError?"nhsuk-textarea--error":"",t!=="vertical"?`nhsuk-textarea--resize-${t}`:"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}const Rc=({id:e,name:t,value:n,defaultValue:r,placeholder:i,disabled:a=!1,readOnly:s=!1,required:l=!1,hasError:u=!1,describedBy:c,className:d,rows:f=5,cols:p,maxLength:g,minLength:b,wrap:h="soft",resize:m="vertical",autoComplete:y,spellCheck:k,onChange:N,onBlur:S,onFocus:x,onKeyDown:M,...j})=>{const{classes:C,describedBy:v}=U0({hasError:u,resize:m,className:d,describedBy:c});return o.jsx("textarea",{className:C,id:e,name:t,value:n,defaultValue:r,placeholder:i,disabled:a,readOnly:s,required:l,"aria-describedby":v,rows:f,cols:p,maxLength:g,minLength:b,wrap:h,autoComplete:y,spellCheck:k,onChange:N,onBlur:S,onFocus:x,onKeyDown:M,...j})};function W0(e){return{classes:["nhsuk-hint",e.className||""].filter(Boolean).join(" "),id:e.id}}const As=({id:e,className:t,children:n,...r})=>{const i=W0({id:e,className:t});return o.jsx("div",{className:i.classes,id:i.id,...r,children:n})},V0=({id:e,maxLength:t,maxWords:n,threshold:r=75,name:i,value:a,defaultValue:s,rows:l,className:u,countMessage:c,onCountChange:d,onChange:f,...p})=>{const g=a??s??"",[b,h]=E.useState(g),[m,y]=E.useState(0),[k,N]=E.useState(!1),[S,x]=E.useState(!1),M=E.useCallback(w=>n?w.trim()===""?0:w.trim().split(/\s+/).length:w.length,[n]);E.useEffect(()=>{const w=M(b),L=t||n||0,P=L-w,D=Math.floor(L*(r/100));y(P),N(w>L),x(w>=D||w>L),d&&d(w,P)},[b,t,n,r,M,d]);const j=w=>{const L=w.target.value;h(L),f&&f(w)},C=()=>{const w=t||n||0,L=n?"word":"character",P=n?"words":"characters";if(!S)return`You can enter up to ${w} ${w===1?L:P}`;if(k){const D=Math.abs(m);return`You have ${D} ${D===1?L:P} too many`}else return`You have ${m} ${m===1?L:P} remaining`},v=xe("nhsuk-character-count",u),$=xe("nhsuk-character-count__message",{"nhsuk-character-count__message--disabled":!S,"nhsuk-error-message":k},c?.classes),T=xe("nhsuk-js-character-count",{"nhsuk-textarea--error":k});return o.jsxs("div",{className:v,"data-module":"nhsuk-character-count","data-maxlength":t,"data-maxwords":n,"data-threshold":r,"data-testid":"character-count",children:[o.jsx(Rc,{id:e,name:i,value:a!==void 0?b:void 0,defaultValue:a===void 0?s??b:void 0,rows:l,className:T,onChange:j,"aria-describedby":`${e}-info`,"aria-invalid":k||void 0,...p}),o.jsx(As,{id:`${e}-info`,className:$,role:"status","aria-live":"polite",children:C()})]})};function G0(e){return{classes:["nhsuk-select",e.hasError?"nhsuk-select--error":"",e.className||""].filter(Boolean).join(" ")}}const Hc=({value:e,disabled:t=!1,selected:n=!1,className:r,children:i,...a})=>{const s=xe("nhsuk-select__option",r);return o.jsx("option",{className:s,value:e,disabled:t,...a,children:i})},Yr=({id:e,name:t,ariaLabel:n,value:r,defaultValue:i,disabled:a=!1,required:s=!1,hasError:l=!1,describedBy:u,className:c,multiple:d=!1,size:f,autoComplete:p,options:g,children:b,onChange:h,onBlur:m,onFocus:y,...k})=>{const{classes:N}=G0({hasError:l,className:c}),S=()=>g?g.map((M,j)=>o.jsx("option",{value:M.value,disabled:M.disabled,"data-initial-selected":M.selected||void 0,children:M.text},`${M.value}-${j}`)):null,x=i===void 0&&r===void 0&&g?g.find(M=>M.selected)?.value:void 0;return o.jsx("select",{className:N,id:e,name:t,"aria-label":n,value:r,defaultValue:i!==void 0?i:x,disabled:a,required:s,"aria-describedby":u,multiple:d,size:f,autoComplete:p,onChange:h,onBlur:m,onFocus:y,...k,children:b||S()})};Yr.Option=Hc;function Y0(e){return{classes:["nhsuk-radios",e.hasError?"nhsuk-radios--error":"",e.size==="small"?"nhsuk-radios--small":"",e.inline?"nhsuk-radios--inline":"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}function Oc(e,{variant:t,selectedValue:n,enableBehaviourAttr:r,handleChange:i,handleBlur:a,handleFocus:s,handleKeyDown:l,itemsRef:u,InputComponent:c}){const{onChange:d,onBlur:f,onFocus:p,...g}=e,{name:b,hasError:h=!1,describedBy:m,className:y,size:k="normal",inline:N=!1,options:S,...x}=g,{classes:M,describedBy:j}=Y0({hasError:h,size:k,inline:N,className:y,describedBy:m});return o.jsx(sa,{children:o.jsx("div",{className:M,...x,...r?{"data-nhs-behaviour":"radios"}:{},children:S.map((C,v)=>{const $=`${b}-${v}`,T=C.conditional?`${$}-conditional`:void 0,w=n===C.value;return o.jsxs("div",{className:"nhsuk-radios__item",children:[o.jsx("input",{className:"nhsuk-radios__input",id:$,name:b,type:"radio",value:C.value,disabled:C.disabled,...t==="client"?{checked:w,onChange:i,onBlur:a,onFocus:s,onKeyDown:l,ref:L=>{L&&u&&(u.current[v]=L)}}:{defaultChecked:w,"data-nhs-radios-input":!0},"aria-describedby":j}),o.jsx("label",{className:"nhsuk-radios__label",htmlFor:$,children:C.text}),C.hint&&o.jsx("div",{className:"nhsuk-radios__hint",children:C.hint}),C.conditional&&o.jsx("div",{className:xe("nhsuk-radios__conditional",{"nhsuk-radios__conditional--hidden":!w}),id:T,...t==="server"?{"data-nhs-radios-conditional":!0}:{},children:typeof C.conditional=="object"&&C.conditional!==null&&"label"in C.conditional&&"id"in C.conditional&&"name"in C.conditional?o.jsxs("div",{style:{marginTop:"16px"},children:[C.conditional.label&&o.jsx(aa,{htmlFor:C.conditional.id,children:C.conditional.label}),o.jsx(c,{...C.conditional})]}):C.conditional})]},C.value)})})})}const q0=({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:i,...a})=>{const[s,l]=E.useState(e||t||""),u=E.useRef([]),c=E.useRef(s),d=g=>{const b=g.target.value;b!==c.current&&(c.current=b,l(b),n?.(g))},f=g=>{i?.(g)},p=E.useCallback(g=>{const{key:b}=g;if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(b))return;g.preventDefault();const h=u.current.filter(N=>N&&!N.disabled),m=h.indexOf(g.currentTarget);if(m===-1)return;let y=m;["ArrowDown","ArrowRight"].includes(b)?y=(m+1)%h.length:["ArrowUp","ArrowLeft"].includes(b)&&(y=(m-1+h.length)%h.length);const k=h[y];k&&(k.focus(),k.checked||k.click())},[]);return Oc({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:i,...a},{variant:"client",selectedValue:s,enableBehaviourAttr:!1,handleChange:d,handleBlur:r,handleFocus:f,handleKeyDown:p,itemsRef:u,InputComponent:ia})};function X0(e){const{id:t,name:n,type:r="text",value:i,defaultValue:a,placeholder:s,disabled:l=!1,readOnly:u=!1,required:c=!1,hasError:d=!1,describedBy:f,className:p,width:g="full",inputMode:b,autoComplete:h,maxLength:m,minLength:y,pattern:k,step:N,min:S,max:x,showValueLabels:M=!1,showCurrentValue:j=!1,valueLabels:C,onChange:v,onBlur:$,onFocus:T,onKeyDown:w,...L}=e,{classes:P,isRange:D}=Ec({type:r,hasError:d,width:g,className:p}),F={id:t,name:n,type:r,placeholder:s,disabled:l,readOnly:u,required:c,"aria-describedby":f,inputMode:b,autoComplete:h,maxLength:m,minLength:y,pattern:k,step:N,min:S,max:x,...L};if(D){const A=i??a??(typeof S<"u"?String(S):"0"),ne=o.jsx("input",{className:P,...i!==void 0?{value:i}:{},...i===void 0&&a!==void 0?{defaultValue:a}:{},"data-current-value":A,...F});return o.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[M?o.jsxs("div",{className:"nhsuk-input-range-labels",children:[o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:C?.min||S||"0"}),ne,o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:C?.max||x||"100"})]}):ne,j&&o.jsx("div",{className:"nhsuk-input-range-current-value",children:o.jsxs("span",{className:"nhsuk-input-range-current-label",children:[C?.current||"Current value:"," ",o.jsx("strong",{children:A})]})})]})}return o.jsx("input",{className:P,...i!==void 0?{value:i}:{},...i===void 0&&a!==void 0?{defaultValue:a}:{},...F})}const K0=({value:e,defaultValue:t,...n})=>{const r=e||t||"";return Oc({value:e,defaultValue:t,...n},{variant:"server",selectedValue:r,enableBehaviourAttr:!0,InputComponent:X0})};var $n=(e=>(e.OneQuarter="one-quarter",e.OneThird="one-third",e.OneHalf="one-half",e.TwoThirds="two-thirds",e.ThreeQuarters="three-quarters",e.Full="full",e))($n||{}),zc=(e=>(e.Mobile="mobile",e.Tablet="tablet",e.Desktop="desktop",e.LargeDesktop="large-desktop",e))(zc||{}),Uc=(e=>(e.Left="left",e.Right="right",e))(Uc||{}),Wc=(e=>(e.Left="left",e.Center="center",e.Right="right",e))(Wc||{});const Es=({children:e,className:t,fluid:n=!1,maxWidth:r,style:i,...a})=>{const s=xe({"nhsuk-width-container":!n,"nhsuk-width-container-fluid":n},t),l=r?{maxWidth:r,...i||{}}:i;return o.jsx("div",{className:s,style:l,...a,children:e})},Fn=({children:e,className:t,style:n,...r})=>{const i=xe("nhsuk-grid-row",t);return o.jsx("div",{className:i,style:n,...r,children:e})},br=({children:e,width:t=$n.Full,mobileWidth:n,tabletWidth:r,desktopWidth:i,start:a,className:s,forceWidth:l=!1,style:u,align:c,...d})=>{const f=xe({[`nhsuk-grid-column-${t}`]:!l,[`nhsuk-u-${t}`]:l,[`nhsuk-u-${n}-mobile`]:!!n,[`nhsuk-u-${r}-tablet`]:!!r,[`nhsuk-u-${i}-desktop`]:!!i,[`nhsuk-grid-column-start-${a}`]:a&&a>=1&&a<=7,...c?{[`nhsuk-grid-align-${c}`]:!0}:{}},s);return o.jsx("div",{className:f,style:u,...d,children:e})},oa=({children:e,className:t,style:n,...r})=>{const a=E.Children.toArray(e)[0],s=E.isValidElement(a)&&(a.type===Fn||typeof a.props=="object"&&a.props&&"className"in a.props&&typeof a.props.className=="string"&&a.props.className.includes("nhsuk-grid-row"));return o.jsx(Es,{className:t,style:n,...r,children:s?e:o.jsx(Fn,{children:e})})},J0=({children:e,type:t="bullet",size:n="medium",border:r=!1,className:i,role:a,as:s,...l})=>{const u=s||(t==="number"?"ol":"ul"),c=xe("nhsuk-list",{"nhsuk-list--bullet":t==="bullet","nhsuk-list--number":t==="number","nhsuk-list--none":t==="none","nhsuk-list--border":r,[`nhsuk-list--${n}`]:n!=="medium"},i);return o.jsx(u,{className:c,role:a,...l,children:e})},Z0=({children:e,className:t,...n})=>{const r=xe("nhsuk-list__item",t);return o.jsx("li",{className:r,...n,children:e})},Vc=J0;Vc.Item=Z0;const Q0=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const i=["nhsuk-spacing-utilities",e&&"nhsuk-spacing-utilities--debug",t].filter(Boolean).join(" ");return o.jsx("div",{className:i,...r,children:n})},eb={margin:e=>`nhsuk-u-margin-${e}`,marginTop:e=>`nhsuk-u-margin-top-${e}`,marginRight:e=>`nhsuk-u-margin-right-${e}`,marginBottom:e=>`nhsuk-u-margin-bottom-${e}`,marginLeft:e=>`nhsuk-u-margin-left-${e}`,padding:e=>`nhsuk-u-padding-${e}`,paddingTop:e=>`nhsuk-u-padding-top-${e}`,paddingRight:e=>`nhsuk-u-padding-right-${e}`,paddingBottom:e=>`nhsuk-u-padding-bottom-${e}`,paddingLeft:e=>`nhsuk-u-padding-left-${e}`,marginResponsive:e=>`nhsuk-u-margin-responsive-${e}`,marginTopResponsive:e=>`nhsuk-u-margin-top-responsive-${e}`,marginRightResponsive:e=>`nhsuk-u-margin-right-responsive-${e}`,marginBottomResponsive:e=>`nhsuk-u-margin-bottom-responsive-${e}`,marginLeftResponsive:e=>`nhsuk-u-margin-left-responsive-${e}`,paddingResponsive:e=>`nhsuk-u-padding-responsive-${e}`,paddingTopResponsive:e=>`nhsuk-u-padding-top-responsive-${e}`,paddingRightResponsive:e=>`nhsuk-u-padding-right-responsive-${e}`,paddingBottomResponsive:e=>`nhsuk-u-padding-bottom-responsive-${e}`,paddingLeftResponsive:e=>`nhsuk-u-padding-left-responsive-${e}`},tb=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const i=["nhsuk-width-utilities",e&&"nhsuk-width-utilities--debug",t].filter(Boolean).join(" ");return o.jsx("div",{className:i,...r,children:n})},nb={width:e=>`nhsuk-u-width-${e}`,widthTablet:e=>`nhsuk-u-width-${e}-tablet`},rb=["full","three-quarters","two-thirds","one-half","one-third","one-quarter"],Bs=({as:e="main",size:t="default",className:n,children:r,...i})=>{const a=["nhsuk-main-wrapper",t==="large"&&"nhsuk-main-wrapper--l",t==="small"&&"nhsuk-main-wrapper--s",n].filter(Boolean).join(" ");return o.jsx(e,{className:a,...i,children:r})};function ib(e){switch(e){case"xxl":case"xl":return 1;case"l":return 2;case"m":return 3;case"s":return 4;case"xs":return 5;default:return 2}}function ab(e){const t=e.level??ib(e.size),n=["nhsuk-heading",e.size?`nhsuk-heading--${e.size}`:"",e.className||""].filter(Boolean).join(" "),r=e.marginBottom?{marginBottom:e.marginBottom}:void 0;return{tag:`h${t}`,classes:n,style:r}}const Zt=({level:e,className:t,text:n,html:r,children:i,size:a,marginBottom:s,...l})=>{const u=ab({level:e,size:a,className:t,marginBottom:s}),c=i||(r?o.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n);return E.createElement(u.tag,{className:u.classes,style:u.style,...l},c)};function sb(e){return{classes:["nhsuk-error-message",e.className||""].filter(Boolean).join(" "),id:e.id,visuallyHiddenText:e.visuallyHiddenText??"Error:"}}const Rs=({id:e,className:t,visuallyHiddenText:n="Error:",children:r,...i})=>{const a=sb({id:e,className:t,visuallyHiddenText:n});return o.jsxs("span",{className:a.classes,id:a.id,...i,children:[o.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[a.visuallyHiddenText," "]}),r]})},ob=({titleText:e="There is a problem",titleHtml:t,descriptionText:n,descriptionHtml:r,errorList:i,className:a,children:s,...l})=>{const u=E.useRef(null);E.useEffect(()=>{u.current&&u.current.focus()},[]);const c=xe("nhsuk-error-summary",a),d=()=>t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,f=()=>r?o.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n,p=g=>{const b=g.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:g.html}}):g.text;return g.href?o.jsx("a",{href:g.href,...g.attributes,children:b}):b};return o.jsxs("div",{ref:u,className:c,"aria-labelledby":"error-summary-title",role:"alert",tabIndex:-1,"data-module":"nhsuk-error-summary",...l,children:[o.jsx("h2",{className:"nhsuk-error-summary__title",id:"error-summary-title",children:d()}),o.jsxs("div",{className:"nhsuk-error-summary__body",children:[s&&o.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:s}),!s&&(n||r)&&o.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:f()}),o.jsx("ul",{className:"nhsuk-list nhsuk-error-summary__list",role:"list",children:i.map((g,b)=>o.jsx("li",{children:p(g)},b))})]})]})},lb=({id:e,className:t,items:n,namePrefix:r,values:i={},fieldset:a,hint:s,errorMessage:l,onChange:u,...c})=>{const[d,f]=E.useState(()=>({day:i.day||"",month:i.month||"",year:i.year||""})),[p,g]=E.useState({}),b=D=>D%4===0&&D%100!==0||D%400===0,h=(D,F)=>{const A=[31,28,31,30,31,30,31,31,30,31,30,31];return D===2&&b(F)?29:A[D-1]},m=(D,F,A)=>{if(!D)return;if(!/^\d+$/.test(D))return"Day must be a number";const ne=parseInt(D,10);if(ne<1||ne>31)return"Day must be between 1 and 31";if(F&&A){const q=parseInt(F,10),H=parseInt(A,10);if(!isNaN(q)&&!isNaN(H)&&q>=1&&q<=12){const U=h(q,H);if(ne>U)return`${["January","February","March","April","May","June","July","August","September","October","November","December"][q-1]} ${H} only has ${U} days`}}},y=D=>{if(!D)return;if(!/^\d+$/.test(D))return"Month must be a number";const F=parseInt(D,10);if(F<1||F>12)return"Month must be between 1 and 12"},k=D=>{if(!D)return;if(!/^\d+$/.test(D))return"Year must be a number";const F=parseInt(D,10),A=new Date().getFullYear();if(F<1900||F>A+10)return`Year must be between 1900 and ${A+10}`},N=(D,F,A)=>{if(!D||!F||!A)return;const ne=parseInt(D,10),q=parseInt(F,10),H=parseInt(A,10);if(isNaN(ne)||isNaN(q)||isNaN(H)||q<1||q>12||H<1900)return;const U=h(q,H);ne<1||ne>U},S=E.useCallback((D,F)=>{const A={...d,[D]:F};f(A),u&&u(A)},[d,u]),x=E.useCallback(D=>{const F=d[D];let A;if(D==="day")A=m(F,d.month,d.year);else if(D==="month"){if(A=y(F),!A&&d.day){const ne=m(d.day,F,d.year);g(q=>({...q,day:ne}))}}else if(D==="year"&&(A=k(F),!A&&d.day&&d.month)){const ne=m(d.day,d.month,F);g(q=>({...q,day:ne}))}if(g(ne=>({...ne,[D]:A})),d.day&&d.month&&d.year){const ne=N(D==="day"?F:d.day,D==="month"?F:d.month,D==="year"?F:d.year);ne&&g(q=>({...q,day:ne}))}},[d,m,y,k,N]),M=E.useMemo(()=>[{name:"day",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"month",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"year",classes:"nhsuk-input--width-4",inputmode:"numeric",pattern:"[0-9]*"}],[]),j=n||M;let C=a?.describedBy||"";const v=s?`${e}-hint`:"",$=l?`${e}-error`:"";v&&(C=C?`${C} ${v}`:v),$&&(C=C?`${C} ${$}`:$);const T=Object.values(p).some(D=>D),w=xe("nhsuk-form-group",{"nhsuk-form-group--error":l||T}),L=xe("nhsuk-date-input",t),P=()=>o.jsxs(o.Fragment,{children:[s&&o.jsx(As,{id:v,className:s.classes,children:s.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:s.html}}):s.text}),l&&o.jsx(Rs,{id:$,className:l.classes,children:l.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text}),Object.entries(p).map(([D,F])=>F?o.jsxs(Rs,{id:`${e}-${D}-error`,className:"nhsuk-error-message",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",F]},`${D}-error`):null),o.jsx("div",{className:L,id:e,"data-testid":"date-input",...c,children:j.map(D=>{const F=D.id||`${e}-${D.name}`,A=r?`${r}[${D.name}]`:D.name,ne=D.label||D.name.charAt(0).toUpperCase()+D.name.slice(1),q=p[D.name],H=d[D.name]||"";let U=C;if(q){const G=`${e}-${D.name}-error`;U=U?`${U} ${G}`:G}return o.jsxs("div",{className:"nhsuk-date-input__item",children:[o.jsx(aa,{htmlFor:F,className:"nhsuk-date-input__label",children:ne}),o.jsx(ia,{id:F,name:A,value:H,className:xe("nhsuk-date-input__input",D.classes,{"nhsuk-input--error":q}),inputMode:D.inputmode,autoComplete:D.autocomplete,pattern:D.pattern,"aria-describedby":U||void 0,hasError:!!q,onChange:G=>S(D.name,G.target.value),onBlur:()=>x(D.name)})]},D.name)})})]});return o.jsx("div",{className:w,children:a?o.jsx(sa,{className:a.classes,legend:a.legend?{text:a.legend}:void 0,describedBy:C||void 0,children:P()}):P()})},Gc={animation:{AnimationDurationFast:"150ms",AnimationDurationNormal:"300ms",AnimationDurationSlow:"500ms",AnimationEasingEaseIn:"cubic-bezier(0.4, 0, 1, 1)",AnimationEasingEaseOut:"cubic-bezier(0, 0, 0.2, 1)",AnimationEasingEaseInOut:"cubic-bezier(0.4, 0, 0.2, 1)",AnimationEasingBounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},transition:{TransitionButtonDefault:"background-color 300ms cubic-bezier(0, 0, 0.2, 1)",TransitionButtonShadow:"box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionInputFocus:"border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionCardHover:"border-color 300ms cubic-bezier(0, 0, 0.2, 1)"},border:{BorderWidthDefault:"1px",BorderWidthFormElement:"2px",BorderWidthFormElementError:"4px",BorderWidthCardBottom:"4px",BorderWidthPanel:"4px",BorderWidthTableHeader:"2px",BorderWidthTableCell:"1px",BorderRadiusNone:"0px",BorderRadiusSmall:"4px",BorderRadiusMedium:"8px",BorderRadiusLarge:"12px",BorderColorDefault:"#d8dde0",BorderColorForm:"#4c6272",BorderColorCard:"#d8dde0",BorderColorCardHover:"#aeb7bd",BorderColorError:"#d5281b"},color:{ColorPrimaryBlue:"#005eb8",ColorPrimaryWhite:"#ffffff",ColorPrimaryBlack:"#212b32",ColorPrimaryGreen:"#007f3b",ColorPrimaryPurple:"#330072",ColorPrimaryDarkPink:"#7c2855",ColorPrimaryRed:"#d5281b",ColorPrimaryYellow:"#ffeb3b",ColorSecondaryPaleYellow:"#fff9c4",ColorSecondaryWarmYellow:"#ffb81c",ColorSecondaryOrange:"#ed8b00",ColorSecondaryAquaGreen:"#00a499",ColorSecondaryPink:"#ae2573",ColorGrey1:"#4c6272",ColorGrey2:"#768692",ColorGrey3:"#aeb7bd",ColorGrey4:"#d8dde0",ColorGrey5:"#f0f4f5",ColorTextPrimary:"#212b32",ColorTextSecondary:"#4c6272",ColorTextReverse:"#ffffff",ColorTextPrint:"#212b32",ColorLinkDefault:"#005eb8",ColorLinkHover:"#7c2855",ColorLinkActive:"#003087",ColorLinkVisited:"#330072",ColorFocusBackground:"#ffeb3b",ColorFocusText:"#212b32",ColorBorderDefault:"#d8dde0",ColorBorderSecondary:"#ffffff33",ColorError:"#d5281b",ColorFormBorder:"#4c6272",ColorFormBackground:"#ffffff",ColorButtonPrimaryBackground:"#007f3b",ColorButtonPrimaryText:"#ffffff",ColorButtonPrimaryHover:"#006530",ColorButtonPrimaryActive:"#004021",ColorButtonPrimaryShadow:"#004021",ColorButtonSecondaryBackground:"#00000000",ColorButtonSecondaryBackgroundSolid:"#ffffff",ColorButtonSecondaryBorder:"#005eb8",ColorButtonSecondaryText:"#005eb8",ColorButtonSecondaryHover:"#d9e5f2",ColorButtonSecondaryActive:"#c7daf0",ColorButtonSecondaryShadow:"#005eb8",ColorButtonReverseBackground:"#ffffff",ColorButtonReverseText:"#212b32",ColorButtonReverseHover:"#d9dde0",ColorButtonReverseActive:"#b3bcc2",ColorButtonReverseShadow:"#b3bcc2",ColorButtonWarningBackground:"#d5281b",ColorButtonWarningHover:"#aa2016",ColorButtonWarningActive:"#6a140e",ColorButtonWarningShadow:"#6a140e",ColorButtonLoginBackground:"#005eb8",ColorButtonLoginHover:"#004b93",ColorButtonLoginActive:"#002f5c",ColorButtonLoginShadow:"#002f5c"},component:{ComponentButtonPaddingMobileVertical:"8px",ComponentButtonPaddingMobileHorizontal:"16px",ComponentButtonPaddingDesktopVertical:"12px",ComponentButtonPaddingDesktopHorizontal:"16px",ComponentButtonShadowSize:"4px",ComponentFormInputMinHeight:"40px",ComponentFormInputPadding:"4px",ComponentFormCheckboxSize:"40px",ComponentFormCheckboxLabelPadding:"12px",ComponentCardPaddingMobile:"16px",ComponentCardPaddingDesktop:"32px",ComponentCardHeadingMargin:"16px",ComponentPanelPaddingMobile:"20px",ComponentPanelPaddingDesktop:"28px",ComponentBreadcrumbChevronMarginLeft:"9px",ComponentBreadcrumbChevronMarginRight:"2px",ComponentBreadcrumbPaddingTopMobile:"16px",ComponentBreadcrumbPaddingTopDesktop:"24px",ComponentSummaryListCellPaddingVertical:"8px",ComponentSummaryListCellPaddingHorizontal:"24px",ComponentSummaryListRowMargin:"16px",ComponentSpread:"4px",ComponentBlur:"4px",ComponentLink:"4px",ComponentDetails:"8px",ComponentExpander:"4px",ComponentPagination:"16px"},button:{ButtonPrimaryBackgroundDefault:"#007f3b",ButtonPrimaryBackgroundHover:"#006530",ButtonPrimaryBackgroundActive:"#004021",ButtonPrimaryBackgroundDisabled:"#d8dde0",ButtonPrimaryTextDefault:"#ffffff",ButtonPrimaryTextDisabled:"#768692",ButtonPrimaryBorderDefault:"#00000000",ButtonPrimaryBorderFocus:"#ffeb3b",ButtonSecondaryBackgroundDefault:"#00000000",ButtonSecondaryBackgroundSolid:"#ffffff",ButtonSecondaryBackgroundHover:"#d9e5f2",ButtonSecondaryBackgroundActive:"#c7daf0",ButtonSecondaryTextDefault:"#005eb8",ButtonSecondaryBorderDefault:"#005eb8",ButtonSpacingPaddingVerticalMobile:"8px",ButtonSpacingPaddingHorizontalMobile:"16px",ButtonSpacingPaddingVerticalDesktop:"12px",ButtonSpacingPaddingHorizontalDesktop:"16px",ButtonBorderWidth:"2px",ButtonBorderRadius:"4px",ButtonShadowSize:"4px",ButtonTypographyWeight:"600"},card:{CardBackgroundDefault:"#ffffff",CardBorderDefault:"#d8dde0",CardBorderHover:"#aeb7bd",CardBorderBottom:"#f0f4f5",CardTextHeading:"#212b32",CardTextDescription:"#212b32",CardTextLink:"#005eb8",CardSpacingPaddingMobile:"16px",CardSpacingPaddingDesktop:"32px",CardSpacingHeadingMargin:"16px",CardBorderWidthDefault:"1px",CardBorderWidthBottom:"4px",CardShadowDefault:"none",CardShadowHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},form:{FormInputBackgroundDefault:"#ffffff",FormInputBackgroundFocus:"#ffffff",FormInputBackgroundDisabled:"#d8dde0",FormInputBackgroundError:"#ffffff",FormInputBorderDefault:"#4c6272",FormInputBorderFocus:"#ffeb3b",FormInputBorderError:"#d5281b",FormInputBorderDisabled:"#aeb7bd",FormInputTextDefault:"#212b32",FormInputTextPlaceholder:"#4c6272",FormInputTextDisabled:"#768692",FormLabelTextDefault:"#212b32",FormLabelTextRequired:"#ffffff",FormLabelTypographyWeight:"600",FormErrorTextDefault:"#d5281b",FormErrorTypographyWeight:"600",FormHintTextDefault:"#4c6272",FormSpacingInputPadding:"4px",FormSpacingInputMinHeight:"40px",FormSpacingCheckboxSize:"40px",FormSpacingCheckboxLabelPadding:"12px",FormBorderWidthDefault:"2px",FormBorderWidthError:"4px",FormBorderRadius:"0px"},size:{SizeIconSmall:"16px",SizeIconMedium:"18px",SizeIconLarge:"24px",SizeIconExtraLarge:"32px",SizeIconNhsDefault:"34px",SizeFormControlSmall:"32px",SizeFormControlMedium:"40px",SizeFormControlLarge:"48px",SizeFormInputWidthXs:"5.4ex",SizeFormInputWidthSm:"7.2ex",SizeFormInputWidthMd:"9ex",SizeFormInputWidthLg:"10.8ex",SizeFormInputWidthXl:"20ex",SizeFormInputWidth2xl:"38ex",SizeFormInputWidth3xl:"56ex",SizeButtonMinHeightMobile:"44px",SizeButtonMinHeightDesktop:"40px"},layout:{LayoutContainerMaxWidth:"1020px",LayoutColumnFull:"100%",LayoutColumnHalf:"50%",LayoutColumnThird:"33.333%",LayoutColumnQuarter:"25%",LayoutColumnActions:"20%"},breakpoint:{BreakpointMobile:"320px",BreakpointTablet:"641px",BreakpointDesktop:"1025px",BreakpointLargeDesktop:"1280px"},grid:{GridPageWidth:"960px",GridGutter:"32px",GridGutterHalf:"16px"},state:{StateErrorBackground:"#d5281b",StateErrorBorder:"#d5281b",StateErrorText:"#ffffff",StateSuccessBackground:"#007f3b",StateSuccessBorder:"#007f3b",StateSuccessText:"#ffffff",StateWarningBackground:"#ffeb3b",StateWarningBorder:"#ffeb3b",StateWarningText:"#212b32",StateInfoBackground:"#005eb8",StateInfoBorder:"#005eb8",StateInfoText:"#ffffff",StateDisabledBackground:"#d8dde0",StateDisabledBorder:"#aeb7bd",StateDisabledText:"#768692"},shadow:{ShadowButtonDefault:"0 4px 0 #004021",ShadowButtonSecondary:"0 4px 0 #005eb8",ShadowButtonWarning:"0 4px 0 #6a140e",ShadowButtonFocus:"0 4px 0 #ffeb3b",ShadowCardDefault:"none",ShadowCardHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},"focus-outline":{FocusOutlineWidth:"4px",FocusOutlineOffset:"0px",FocusOutlineStyle:"solid"},"focus-shadow":{FocusShadowInput:"0 0 0 3px #ffeb3b",FocusShadowButton:"0 0 0 3px #ffeb3b"},elevation:{ElevationNone:"none",ElevationLow:"0 1px 3px rgba(0, 0, 0, 0.12)",ElevationMedium:"0 2px 6px rgba(0, 0, 0, 0.16)",ElevationHigh:"0 4px 12px rgba(0, 0, 0, 0.20)"},spacing:{Spacing0:"0",Spacing1:"4px",Spacing2:"8px",Spacing3:"16px",Spacing4:"24px",Spacing5:"32px",Spacing6:"40px",Spacing7:"48px",Spacing8:"56px",Spacing9:"64px"},"spacing-responsive":{SpacingResponsive0Mobile:"0",SpacingResponsive0Tablet:"0",SpacingResponsive1Mobile:"4px",SpacingResponsive1Tablet:"4px",SpacingResponsive2Mobile:"8px",SpacingResponsive2Tablet:"8px",SpacingResponsive3Mobile:"8px",SpacingResponsive3Tablet:"16px",SpacingResponsive4Mobile:"16px",SpacingResponsive4Tablet:"24px",SpacingResponsive5Mobile:"24px",SpacingResponsive5Tablet:"32px",SpacingResponsive6Mobile:"32px",SpacingResponsive6Tablet:"40px",SpacingResponsive7Mobile:"40px",SpacingResponsive7Tablet:"48px",SpacingResponsive8Mobile:"48px",SpacingResponsive8Tablet:"56px",SpacingResponsive9Mobile:"56px",SpacingResponsive9Tablet:"64px"},font:{FontFamilyBase:"Frutiger W01",FontFamilyFallback:"Arial, Helvetica, sans-serif",FontFamilyPrint:"sans-serif",FontWeightNormal:"400",FontWeightBold:"600",FontWeightLight:"400",FontSize14Mobile:"12px",FontSize14Tablet:"14px",FontSize14Print:"12pt",FontSize16Mobile:"14px",FontSize16Tablet:"16px",FontSize16Print:"12pt",FontSize19Mobile:"16px",FontSize19Tablet:"19px",FontSize19Print:"13pt",FontSize22Mobile:"19px",FontSize22Tablet:"22px",FontSize22Print:"15pt",FontSize26Mobile:"22px",FontSize26Tablet:"26px",FontSize26Print:"17pt",FontSize36Mobile:"27px",FontSize36Tablet:"36px",FontSize36Print:"20pt",FontSize48Mobile:"33px",FontSize48Tablet:"48px",FontSize48Print:"24pt",FontSizeBase:"16px",FontLineHeightBase:"24px"},headings:{xl:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},l:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},m:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},s:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xs:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}}},paragraphs:{body:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bodyLarge:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},bodySmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ledeText:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},ledeTextSmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}}}},Yc=E.createContext(Gc),cb=({children:e,theme:t={}})=>{const n={...Gc,...t};return o.jsx(Yc.Provider,{value:n,children:e})},ub=()=>{const e=E.useContext(Yc);if(!e)throw new Error("useNHSTheme must be used within an NHSThemeProvider");return e};function db(){return`
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 400;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff") format("woff");
	}
	
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 600;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff") format("woff");
	}
  `}function fb(){if(typeof document>"u"||document.getElementById("nhs-fonts"))return;const e=document.createElement("style");e.id="nhs-fonts",e.textContent=db(),document.head.appendChild(e)}const hb=({children:e,theme:t})=>(E.useEffect(()=>{fb()},[]),o.jsx(cb,{theme:t,children:e}));function pb(e,{variant:t,isClient:n,menuOpen:r=!1,showMoreButton:i=!1,visibleItems:a,dropdownVisible:s,toggleMenu:l,navContainerRef:u,navListRef:c,searchNode:d}){const{className:f,logo:p={},service:g={},serviceName:b,organisation:h,search:m,account:y,navigation:k,containerClasses:N,variant:S="default",attributes:x={},maxVisibleItems:M,responsiveNavigation:j=!0,...C}=e,v={...g,text:g?.text??b};"maxVisibleItems"in C&&delete C.maxVisibleItems;const $=v.href&&!p.href||v.href&&v.href===p.href,T=$?v.href:p.href,w=xe("nhsuk-header",{"nhsuk-header--organisation":S==="organisation"||h,"nhsuk-header--white":S==="white"},f),L=xe("nhsuk-header__container",N),P=xe("nhsuk-header__navigation",{"nhsuk-header__navigation--white":k?.white,"nhsuk-header__navigation--justified":k?.justified},k?.className),D=()=>o.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":p.ariaLabel||"NHS",children:[o.jsx("title",{children:p.ariaLabel||"NHS"}),o.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),F=()=>p.src?o.jsx("img",{className:"nhsuk-header__organisation-logo",src:p.src,width:"280",alt:p.ariaLabel||"NHS"}):D(),A=()=>h?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"nhsuk-header__organisation-name",children:[h.name,h.split&&o.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",h.split]})]}),h.descriptor&&o.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:h.descriptor})]}):null,ne=(U,G)=>U?G?o.jsx("a",{className:"nhsuk-header__service-name",href:G,children:U}):o.jsx("span",{className:"nhsuk-header__service-name",children:U}):null,q=U=>U.active||U.current?o.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:U.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:U.html}}):U.text}):U.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:U.html}}):U.text,H=()=>o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})});return k?.items,o.jsxs("header",{className:w,role:"banner","data-module":"nhsuk-header",...x,...C,children:[o.jsxs("div",{className:L,children:[o.jsxs("div",{className:"nhsuk-header__service",children:[T?o.jsxs("a",{className:"nhsuk-header__service-logo",href:T,children:[F(),A(),$&&ne(v.text)]}):o.jsxs(o.Fragment,{children:[F(),A(),$&&ne(v.text)]}),v.text&&!$&&ne(v.text,v.href)]}),d??null,o.jsx(Ps,{...y,variant:S==="white"?"white":"default"})]}),k&&k.items&&k.items.length>0&&o.jsx("nav",{className:P,"aria-label":k.ariaLabel||"Menu",children:o.jsx("div",{className:xe("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--initializing":n&&t==="client","nhsuk-header__navigation-container--ssr":!n},N),ref:u,children:o.jsxs("ul",{className:"nhsuk-header__navigation-list",ref:c,children:[(k?.items||[]).map((U,G)=>o.jsx("li",{className:xe("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":U.active||U.current,"nhsuk-header__navigation-item--hidden":i&&a!==void 0&&G>=(a??0)},U.className),...U.attributes||{},children:o.jsx("a",{className:"nhsuk-header__navigation-link",href:U.href,...U.active||U.current?{"aria-current":U.current?"page":"true"}:{},children:q(U)})},G)),i&&a!==void 0&&o.jsx("li",{className:"nhsuk-header__navigation-item nhsuk-header__navigation-item--more",children:o.jsxs("button",{className:"nhsuk-header__navigation-button",id:"toggle-more-menu",type:"button","aria-haspopup":"true","aria-expanded":r?"true":"false","aria-controls":"nhsuk-header-more-menu",onClick:l,children:[o.jsx("span",{children:"More"}),H()]})})]})})}),n&&k&&k.items&&k.items.length>0&&r&&s&&o.jsx("div",{className:"nhsuk-header__dropdown-menu",hidden:!s,id:"nhsuk-header-more-menu",children:o.jsx("ul",{className:"nhsuk-header__dropdown-list",children:k.items.slice(a??0).map((U,G)=>o.jsx("li",{className:xe("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":U.active||U.current}),children:o.jsx("a",{className:"nhsuk-header__dropdown-link",href:U.href,...U.active||U.current?{"aria-current":U.current?"page":"true"}:{},onClick:()=>{l?.()},children:q(U)})},`overflow-${(a??0)+G}`))})}),t==="server"]})}const qc=({mode:e="form",action:t="/search",method:n="get",name:r="q",value:i,placeholder:a="Search",visuallyHiddenLabel:s="Search the NHS website",visuallyHiddenButton:l="Search",className:u,disabled:c=!1,callbacks:d={},isLoading:f=!1,showResults:p=!1,results:g=[],formAttributes:b={},inputAttributes:h={},buttonAttributes:m={},preventDefaultSubmit:y=!1,debounceMs:k=300,minQueryLength:N=1})=>{const[S,x]=E.useState(""),[M,j]=E.useState(!1),C=E.useRef(void 0),v=E.useRef(null),$=E.useRef(null),T=e==="controlled"&&i!==void 0,w=T?i:S,L=E.useCallback(oe=>{C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{d.onChange&&oe.length>=N&&d.onChange(oe)},k)},[d.onChange,k,N]),P=E.useCallback(oe=>{const z=oe.target.value;T||x(z),e!=="form"&&L(z)},[T,e,L]),D=E.useCallback(oe=>{const z=w.trim(),pe={query:z,timestamp:Date.now(),formData:new FormData(oe.currentTarget)};e==="controlled"||e==="hybrid"&&y?(oe.preventDefault(),d.onSearch&&z.length>=N&&d.onSearch(pe)):e==="hybrid"&&d.onSearch&&z.length>=N&&d.onSearch(pe)},[e,w,d.onSearch,y,N]),F=E.useCallback(()=>{j(!0),d.onFocus?.()},[d.onFocus]),A=E.useCallback(()=>{j(!1),d.onBlur?.()},[d.onBlur]),ne=E.useCallback(()=>{T||x(""),d.onClear?.(),$.current?.focus()},[T,d.onClear]);E.useEffect(()=>()=>{C.current&&clearTimeout(C.current)},[]);const q=()=>o.jsx("svg",{className:xe("nhsuk-icon nhsuk-icon__search",{"nhsuk-icon__search--loading":f}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"})}),H=()=>o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsxs("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[o.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416",repeatCount:"indefinite"})]})}),U=()=>!w||e==="form"?null:o.jsx("button",{type:"button",className:"nhsuk-header__search-clear",onClick:ne,"aria-label":"Clear search",children:o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__close",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z"})})}),G=()=>!p||!g.length||!M?null:o.jsx("div",{className:"nhsuk-header__search-results",role:"listbox",children:g.map(oe=>o.jsx("div",{className:"nhsuk-header__search-result",role:"option",children:oe.href?o.jsxs("a",{href:oe.href,className:"nhsuk-header__search-result-link",children:[o.jsx("span",{className:"nhsuk-header__search-result-title",children:oe.title}),oe.description&&o.jsx("span",{className:"nhsuk-header__search-result-description",children:oe.description})]}):o.jsxs("button",{type:"button",className:"nhsuk-header__search-result-button",onClick:()=>d.onSearch?.({query:oe.title,timestamp:Date.now()}),children:[o.jsx("span",{className:"nhsuk-header__search-result-title",children:oe.title}),oe.description&&o.jsx("span",{className:"nhsuk-header__search-result-description",children:oe.description})]})},oe.id))});return o.jsxs("div",{className:xe("nhsuk-header__search",u,{"nhsuk-header__search--controlled":e==="controlled","nhsuk-header__search--hybrid":e==="hybrid","nhsuk-header__search--loading":f,"nhsuk-header__search--focused":M,"nhsuk-header__search--has-results":p&&g.length>0}),children:[o.jsxs("form",{ref:v,className:"nhsuk-header__search-form",id:"search",action:e!=="controlled"?t:void 0,method:e!=="controlled"?n:void 0,role:"search",onSubmit:D,...b,children:[o.jsx("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field",children:s}),o.jsxs("div",{className:"nhsuk-header__search-input-wrapper",children:[o.jsx("input",{ref:$,className:"nhsuk-header__search-input nhsuk-input",id:"search-field",name:e!=="controlled"?r:void 0,type:"search",placeholder:a,autoComplete:"off",value:w,onChange:P,onFocus:F,onBlur:A,disabled:c||f,...p&&g.length>0?{"aria-expanded":!0,"aria-haspopup":"listbox"}:{},...h}),U()]}),o.jsxs("button",{className:"nhsuk-header__search-submit",type:"submit",disabled:c||f||e!=="form"&&w.length<N,...m,children:[f?H():q(),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:f?"Searching...":l})]})]}),G()]})},la=({className:e,logo:t={},service:n={},organisation:r,search:i,account:a,navigation:s,containerClasses:l,variant:u="default",attributes:c={},...d})=>{const[f,p]=E.useState(!1),[g,b]=E.useState(!1),[h,m]=E.useState(s?.items?.length||0),[y,k]=E.useState(!1),[N,S]=E.useState(!1),x=E.useRef(null),M=E.useRef(null),j=E.useRef(!1);E.useEffect(()=>{typeof window>"u"||S(!0)},[]),E.useEffect(()=>{if(typeof document>"u")return;const T=w=>{w.key==="Escape"&&f&&p(!1)};if(f)return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[f]);const C=E.useRef(null),v=E.useCallback(()=>{if(!N||!s?.items||s.items.length===0||j.current)return;const T=x.current,w=M.current;if(!T||!w)return;j.current=!0,T.classList.add("nhsuk-header__navigation-container--measuring");const L=T.clientWidth,P=Array.from(w.children);if(!P.length){T.classList.remove("nhsuk-header__navigation-container--measuring"),j.current=!1;return}if(C.current==null){const z=document.createElement("button");z.type="button",z.className="nhsuk-header__navigation-button nhsuk-header__navigation-button--prototype",z.style.position="absolute",z.style.visibility="hidden",z.style.pointerEvents="none",z.innerHTML="<span>More</span>",T.appendChild(z),C.current=z.getBoundingClientRect().width||104,T.removeChild(z)}const D=C.current+16;let F=0,A=0;const ne=window.getComputedStyle(T),q=parseFloat(ne.paddingLeft)||0,H=parseFloat(ne.paddingRight)||0;let U=q+H;for(const z of P){const pe=z.getBoundingClientRect().width;if(F+pe+D+U>L)break;F+=pe,A+=1}const G=A<s.items.length,oe=G?A:s.items.length;b(z=>z===G?z:G),m(z=>z===oe?z:oe),T.classList.remove("nhsuk-header__navigation-container--measuring"),j.current=!1},[N,s?.items]);E.useEffect(()=>{if(!N)return;const T=x.current;if(!T)return;let w=null;const L=()=>{w==null&&(w=window.requestAnimationFrame(()=>{w=null,v()}))};v();const P=new ResizeObserver(()=>L());return P.observe(T),M.current&&P.observe(M.current),()=>{w!=null&&window.cancelAnimationFrame(w),P.disconnect()}},[N,v]),E.useEffect(()=>{N&&v()},[s?.items?.length,N,v]);const $=T=>{T&&(T.preventDefault(),T.stopPropagation());const w=!f;p(w),k(w)};return pb({className:e,logo:t,service:n,organisation:r,search:i,account:a,navigation:s,containerClasses:l,variant:u,attributes:c,...d},{variant:"client",isClient:N,menuOpen:f,showMoreButton:g,visibleItems:h,dropdownVisible:y,toggleMenu:$,navContainerRef:x,navListRef:M,searchNode:i?o.jsx(qc,{...i}):null})};function mb(e,{variant:t,isClient:n}){const{className:r,logo:i={},service:a={},serviceName:s,organisation:l,account:u,navigation:c,containerClasses:d,variant:f="default",attributes:p={},maxVisibleItems:g,responsiveNavigation:b=!0,...h}=e;"maxVisibleItems"in h&&delete h.maxVisibleItems;const m={...a,text:a?.text??s},y=m.href&&!i.href||m.href&&m.href===i.href,k=y?m.href:i.href,N=xe("nhsuk-header",{"nhsuk-header--organisation":f==="organisation"||l,"nhsuk-header--white":f==="white"},r),S=xe("nhsuk-header__container",d),x=xe("nhsuk-header__navigation",{"nhsuk-header__navigation--white":c?.white,"nhsuk-header__navigation--justified":c?.justified},c?.className),M=()=>o.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":i.ariaLabel||"NHS",children:[o.jsx("title",{children:i.ariaLabel||"NHS"}),o.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),j=()=>i.src?o.jsx("img",{className:"nhsuk-header__organisation-logo",src:i.src,width:"280",alt:i.ariaLabel||"NHS"}):M(),C=()=>l?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"nhsuk-header__organisation-name",children:[l.name,l.split&&o.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",l.split]})]}),l.descriptor&&o.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:l.descriptor})]}):null,v=(P,D)=>P?D?o.jsx("a",{className:"nhsuk-header__service-name",href:D,children:P}):o.jsx("span",{className:"nhsuk-header__service-name",children:P}):null,$=P=>P.active||P.current?o.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:P.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:P.html}}):P.text}):P.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:P.html}}):P.text,T=c?.items&&!b,w=T?[]:c?.items,L=T?c.items:[];return o.jsxs("header",{className:N,role:"banner","data-module":"nhsuk-header",...p,...h,children:[o.jsxs("div",{className:S,children:[o.jsxs("div",{className:"nhsuk-header__service",children:[k?o.jsxs("a",{className:"nhsuk-header__service-logo",href:k,children:[j(),C(),y&&v(m.text)]}):o.jsxs(o.Fragment,{children:[j(),C(),y&&v(m.text)]}),m.text&&!y&&v(m.text,m.href)]}),o.jsx(Ps,{...u,variant:f==="white"?"white":"default"})]}),c&&c.items&&c.items.length>0&&o.jsx("nav",{className:x,"aria-label":c.ariaLabel||"Menu",children:o.jsx("div",{className:xe("nhsuk-header_navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--ssr":!n},d),children:o.jsx("ul",{className:"nhsuk-header__navigation-list",children:(w||[]).map((P,D)=>o.jsx("li",{className:xe("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":P.active||P.current},P.className),...P.attributes||{},children:o.jsx("a",{className:"nhsuk-header__navigation-link",href:P.href,...P.active||P.current?{"aria-current":P.current?"page":"true"}:{},children:$(P)})},D))})})}),T&&L.length>0&&o.jsx("div",{className:"nhsuk-header__dropdown-menu","data-ssr-overflow":"true",children:o.jsx("ul",{className:"nhsuk-header__dropdown-list",children:L.map((P,D)=>o.jsx("li",{className:xe("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":P.active||P.current}),children:o.jsx("a",{className:"nhsuk-header__dropdown-link",href:P.href,...P.active||P.current?{"aria-current":P.current?"page":"true"}:{},children:$(P)})},`overflow-server-${D}`))})})]})}const gb=e=>mb(e,{variant:"server",isClient:!1}),Xc=({heading:e,headingLevel:t=1,headingClasses:n="",text:r,html:i,imageURL:a,containerClasses:s="",classes:l="",children:u,...c})=>{const d=["nhsuk-hero",a&&e?"nhsuk-hero--image nhsuk-hero--image-description":"",a&&!e?"nhsuk-hero--image":"",l].filter(Boolean).join(" "),f=["nhsuk-width-container",s,a?"":"nhsuk-hero--border"].filter(Boolean).join(" "),p=["nhsuk-hero__heading",n,!u&&!r&&!i?"nhsuk-u-margin-bottom-0":""].filter(Boolean).join(" "),g=u||e||r||i,b=()=>{if(!e)return null;const h={className:p};switch(t){case 1:return o.jsx("h1",{...h,children:e});case 2:return o.jsx("h2",{...h,children:e});case 3:return o.jsx("h3",{...h,children:e});case 4:return o.jsx("h4",{...h,children:e});case 5:return o.jsx("h5",{...h,children:e});case 6:return o.jsx("h6",{...h,children:e});default:return o.jsx("h1",{...h,children:e})}};return o.jsxs("section",{className:d,style:a?{backgroundImage:`url('${a}')`}:void 0,role:"banner",...c,children:[a&&o.jsx("div",{className:"nhsuk-hero__overlay",children:g&&o.jsx("div",{className:f,children:o.jsx("div",{className:"nhsuk-grid-row",children:o.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:o.jsxs("div",{className:"nhsuk-hero-content",children:[b(),u||(i?o.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):r?o.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null),o.jsx("span",{className:"nhsuk-hero__arrow","aria-hidden":"true"})]})})})})}),!a&&g&&o.jsx("div",{className:f,children:o.jsx("div",{className:"nhsuk-grid-row",children:o.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:o.jsxs("div",{className:"nhsuk-hero__wrapper",children:[b(),u||(i?o.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):r?o.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null)]})})})})]})};Xc.displayName="Hero";const Hs=({className:e,links:t=[],linksColumn2:n,linksColumn3:r,metaLinks:i,copyright:a="Â© NHS England",containerClasses:s,attributes:l={},style:u,footerStyle:c,containerStyle:d})=>{const f=(g,b=!1)=>o.jsx("li",{className:xe("nhsuk-footer__list-item",{"nhsuk-footer-default__list-item":b}),children:o.jsx("a",{className:"nhsuk-footer__list-item-link",href:g.URL,target:g.newWindow?"_blank":void 0,rel:g.newWindow?"noopener noreferrer":void 0,children:g.label})},`${g.URL}-${g.label}`),p=!!(n||r);return o.jsx("footer",{role:"contentinfo",...l,style:{...l?.style,...u},children:o.jsxs("div",{className:"nhsuk-footer-container",children:[o.jsxs("div",{className:xe("nhsuk-width-container",s),style:d,children:[o.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Support links"}),o.jsx("div",{className:xe("nhsuk-footer",e),style:c,children:p?o.jsxs(o.Fragment,{children:[t.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:t.map(g=>f(g))}),n&&n.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:n.map(g=>f(g))}),r&&r.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:r.map(g=>f(g))}),i&&i.length>0&&o.jsx("ul",{className:"nhsuk-footer__list nhsuk-footer__meta",children:i.map(g=>f(g))})]}):o.jsxs("ul",{className:"nhsuk-footer__list",children:[t.map(g=>f(g,!0)),(n||[]).map(g=>f(g,!0)),(r||[]).map(g=>f(g,!0)),(i||[]).map(g=>f(g,!0))]})}),!p&&o.jsx("div",{children:o.jsx("p",{className:"nhsuk-footer__copyright",children:a})})]}),p&&o.jsx("div",{className:"nhsuk-width-container",children:o.jsx("div",{children:o.jsx("p",{className:"nhsuk-footer__copyright",children:a})})})]})})};function ca(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bb(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Os(e){let t,n,r;e.length!==2?(t=ca,n=(l,u)=>ca(e(l),u),r=(l,u)=>e(l)-u):(t=e===ca||e===bb?e:yb,n=e,r=e);function i(l,u,c=0,d=l.length){if(c<d){if(t(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<0?c=f+1:d=f}while(c<d)}return c}function a(l,u,c=0,d=l.length){if(c<d){if(t(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<=0?c=f+1:d=f}while(c<d)}return c}function s(l,u,c=0,d=l.length){const f=i(l,u,c,d-1);return f>c&&r(l[f-1],u)>-r(l[f],u)?f-1:f}return{left:i,center:s,right:a}}function yb(){return 0}function _b(e){return e===null?NaN:+e}const vb=Os(ca).right;Os(_b).center;function Kc(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Jc extends Map{constructor(t,n=Sb){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Zc(this,t))}has(t){return super.has(Zc(this,t))}set(t,n){return super.set(xb(this,t),n)}delete(t){return super.delete(wb(this,t))}}function Zc({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function xb({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function wb({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Sb(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Cb=Math.sqrt(50),kb=Math.sqrt(10),Tb=Math.sqrt(2);function ua(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Cb?10:a>=kb?5:a>=Tb?2:1;let l,u,c;return i<0?(c=Math.pow(10,-i)/s,l=Math.round(e*c),u=Math.round(t*c),l/c<e&&++l,u/c>t&&--u,c=-c):(c=Math.pow(10,i)*s,l=Math.round(e/c),u=Math.round(t/c),l*c<e&&++l,u*c>t&&--u),u<l&&.5<=n&&n<2?ua(e,t,n*2):[l,u,c]}function Nb(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,s]=r?ua(t,e,n):ua(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(s<0)for(let c=0;c<l;++c)u[c]=(a-c)/-s;else for(let c=0;c<l;++c)u[c]=(a-c)*s;else if(s<0)for(let c=0;c<l;++c)u[c]=(i+c)/-s;else for(let c=0;c<l;++c)u[c]=(i+c)*s;return u}function zs(e,t,n){return t=+t,e=+e,n=+n,ua(e,t,n)[2]}function Us(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?zs(t,e,n):zs(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function jb(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function da(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Qc=Symbol("implicit");function eu(){var e=new Jc,t=[],n=[],r=Qc;function i(a){let s=e.get(a);if(s===void 0){if(r!==Qc)return r;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Jc;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return eu(t,n).unknown(r)},da.apply(i,arguments),i}function tu(){var e=eu().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,s,l=!1,u=0,c=0,d=.5;delete e.unknown;function f(){var p=t().length,g=i<r,b=g?i:r,h=g?r:i;a=(h-b)/Math.max(1,p-u+c*2),l&&(a=Math.floor(a)),b+=(h-b-a*(p-u))*d,s=a*(1-u),l&&(b=Math.round(b),s=Math.round(s));var m=jb(p).map(function(y){return b+a*y});return n(g?m.reverse():m)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,l=!0,f()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(u=Math.min(1,c=+p),f()):u},e.paddingInner=function(p){return arguments.length?(u=Math.min(1,p),f()):u},e.paddingOuter=function(p){return arguments.length?(c=+p,f()):c},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return tu(t(),[r,i]).round(l).paddingInner(u).paddingOuter(c).align(d)},da.apply(f(),arguments)}function Ws(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function nu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function qr(){}var Xr=.7,fa=1/Xr,yr="\\s*([+-]?\\d+)\\s*",Kr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Db=/^#([0-9a-f]{3,8})$/,Mb=new RegExp(`^rgb\\(${yr},${yr},${yr}\\)$`),Ib=new RegExp(`^rgb\\(${Qt},${Qt},${Qt}\\)$`),Pb=new RegExp(`^rgba\\(${yr},${yr},${yr},${Kr}\\)$`),$b=new RegExp(`^rgba\\(${Qt},${Qt},${Qt},${Kr}\\)$`),Fb=new RegExp(`^hsl\\(${Kr},${Qt},${Qt}\\)$`),Lb=new RegExp(`^hsla\\(${Kr},${Qt},${Qt},${Kr}\\)$`),ru={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ws(qr,Jr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:iu,formatHex:iu,formatHex8:Ab,formatHsl:Eb,formatRgb:au,toString:au});function iu(){return this.rgb().formatHex()}function Ab(){return this.rgb().formatHex8()}function Eb(){return uu(this).formatHsl()}function au(){return this.rgb().formatRgb()}function Jr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Db.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?su(t):n===3?new Mt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ha(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ha(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Mb.exec(e))?new Mt(t[1],t[2],t[3],1):(t=Ib.exec(e))?new Mt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Pb.exec(e))?ha(t[1],t[2],t[3],t[4]):(t=$b.exec(e))?ha(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Fb.exec(e))?cu(t[1],t[2]/100,t[3]/100,1):(t=Lb.exec(e))?cu(t[1],t[2]/100,t[3]/100,t[4]):ru.hasOwnProperty(e)?su(ru[e]):e==="transparent"?new Mt(NaN,NaN,NaN,0):null}function su(e){return new Mt(e>>16&255,e>>8&255,e&255,1)}function ha(e,t,n,r){return r<=0&&(e=t=n=NaN),new Mt(e,t,n,r)}function Bb(e){return e instanceof qr||(e=Jr(e)),e?(e=e.rgb(),new Mt(e.r,e.g,e.b,e.opacity)):new Mt}function Vs(e,t,n,r){return arguments.length===1?Bb(e):new Mt(e,t,n,r??1)}function Mt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ws(Mt,Vs,nu(qr,{brighter(e){return e=e==null?fa:Math.pow(fa,e),new Mt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xr:Math.pow(Xr,e),new Mt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Mt(qn(this.r),qn(this.g),qn(this.b),pa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ou,formatHex:ou,formatHex8:Rb,formatRgb:lu,toString:lu}));function ou(){return`#${Xn(this.r)}${Xn(this.g)}${Xn(this.b)}`}function Rb(){return`#${Xn(this.r)}${Xn(this.g)}${Xn(this.b)}${Xn((isNaN(this.opacity)?1:this.opacity)*255)}`}function lu(){const e=pa(this.opacity);return`${e===1?"rgb(":"rgba("}${qn(this.r)}, ${qn(this.g)}, ${qn(this.b)}${e===1?")":`, ${e})`}`}function pa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xn(e){return e=qn(e),(e<16?"0":"")+e.toString(16)}function cu(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qt(e,t,n,r)}function uu(e){if(e instanceof qt)return new qt(e.h,e.s,e.l,e.opacity);if(e instanceof qr||(e=Jr(e)),!e)return new qt;if(e instanceof qt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,l=a-i,u=(a+i)/2;return l?(t===a?s=(n-r)/l+(n<r)*6:n===a?s=(r-t)/l+2:s=(t-n)/l+4,l/=u<.5?a+i:2-a-i,s*=60):l=u>0&&u<1?0:s,new qt(s,l,u,e.opacity)}function Hb(e,t,n,r){return arguments.length===1?uu(e):new qt(e,t,n,r??1)}function qt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ws(qt,Hb,nu(qr,{brighter(e){return e=e==null?fa:Math.pow(fa,e),new qt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xr:Math.pow(Xr,e),new qt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Mt(Gs(e>=240?e-240:e+120,i,r),Gs(e,i,r),Gs(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new qt(du(this.h),ma(this.s),ma(this.l),pa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pa(this.opacity);return`${e===1?"hsl(":"hsla("}${du(this.h)}, ${ma(this.s)*100}%, ${ma(this.l)*100}%${e===1?")":`, ${e})`}`}}));function du(e){return e=(e||0)%360,e<0?e+360:e}function ma(e){return Math.max(0,Math.min(1,e||0))}function Gs(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ys=e=>()=>e;function Ob(e,t){return function(n){return e+n*t}}function zb(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ub(e){return(e=+e)==1?fu:function(t,n){return n-t?zb(t,n,e):Ys(isNaN(t)?n:t)}}function fu(e,t){var n=t-e;return n?Ob(e,n):Ys(isNaN(e)?t:e)}const hu=(function e(t){var n=Ub(t);function r(i,a){var s=n((i=Vs(i)).r,(a=Vs(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),c=fu(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=l(d),i.b=u(d),i.opacity=c(d),i+""}}return r.gamma=e,r})(1);function Wb(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Vb(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Gb(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Ks(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(l){for(s=0;s<r;++s)a[s]=i[s](l);return a}}function Yb(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ga(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function qb(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ks(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var qs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xs=new RegExp(qs.source,"g");function Xb(e){return function(){return e}}function Kb(e){return function(t){return e(t)+""}}function Jb(e,t){var n=qs.lastIndex=Xs.lastIndex=0,r,i,a,s=-1,l=[],u=[];for(e=e+"",t=t+"";(r=qs.exec(e))&&(i=Xs.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,u.push({i:s,x:ga(r,i)})),n=Xs.lastIndex;return n<t.length&&(a=t.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?u[0]?Kb(u[0].x):Xb(t):(t=u.length,function(c){for(var d=0,f;d<t;++d)l[(f=u[d]).i]=f.x(c);return l.join("")})}function Ks(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ys(t):(n==="number"?ga:n==="string"?(r=Jr(t))?(t=r,hu):Jb:t instanceof Jr?hu:t instanceof Date?Yb:Vb(t)?Wb:Array.isArray(t)?Gb:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?qb:ga)(e,t)}function Zb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Qb(e){return function(){return e}}function ey(e){return+e}var pu=[0,1];function _r(e){return e}function Js(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Qb(isNaN(t)?NaN:.5)}function ty(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function ny(e,t,n){var r=e[0],i=e[1],a=t[0],s=t[1];return i<r?(r=Js(i,r),a=n(s,a)):(r=Js(r,i),a=n(a,s)),function(l){return a(r(l))}}function ry(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=Js(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(l){var u=vb(e,l,1,r)-1;return a[u](i[u](l))}}function mu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function iy(){var e=pu,t=pu,n=Ks,r,i,a,s=_r,l,u,c;function d(){var p=Math.min(e.length,t.length);return s!==_r&&(s=ty(e[0],e[p-1])),l=p>2?ry:ny,u=c=null,f}function f(p){return p==null||isNaN(p=+p)?a:(u||(u=l(e.map(r),t,n)))(r(s(p)))}return f.invert=function(p){return s(i((c||(c=l(t,e.map(r),ga)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,ey),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),n=Zb,d()},f.clamp=function(p){return arguments.length?(s=p?!0:_r,d()):s!==_r},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,g){return r=p,i=g,d()}}function gu(){return iy()(_r,_r)}function ay(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ba(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function vr(e){return e=ba(Math.abs(e)),e?e[1]:NaN}function sy(e,t){return function(n,r){for(var i=n.length,a=[],s=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[s=(s+1)%e.length];return a.reverse().join(t)}}function oy(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ly=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ya(e){if(!(t=ly.exec(e)))throw new Error("invalid format: "+e);var t;return new Zs({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ya.prototype=Zs.prototype;function Zs(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Zs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cy(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var bu;function uy(e,t){var n=ba(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(bu=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ba(e,Math.max(0,t+a-1))[0]}function yu(e,t){var n=ba(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _u={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ay,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>yu(e*100,t),r:yu,s:uy,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vu(e){return e}var xu=Array.prototype.map,wu=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function dy(e){var t=e.grouping===void 0||e.thousands===void 0?vu:sy(xu.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?vu:oy(xu.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"âˆ’":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function c(f){f=ya(f);var p=f.fill,g=f.align,b=f.sign,h=f.symbol,m=f.zero,y=f.width,k=f.comma,N=f.precision,S=f.trim,x=f.type;x==="n"?(k=!0,x="g"):_u[x]||(N===void 0&&(N=12),S=!0,x="g"),(m||p==="0"&&g==="=")&&(m=!0,p="0",g="=");var M=h==="$"?n:h==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",j=h==="$"?r:/[%p]/.test(x)?s:"",C=_u[x],v=/[defgprs%]/.test(x);N=N===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function $(T){var w=M,L=j,P,D,F;if(x==="c")L=C(T)+L,T="";else{T=+T;var A=T<0||1/T<0;if(T=isNaN(T)?u:C(Math.abs(T),N),S&&(T=cy(T)),A&&+T==0&&b!=="+"&&(A=!1),w=(A?b==="("?b:l:b==="-"||b==="("?"":b)+w,L=(x==="s"?wu[8+bu/3]:"")+L+(A&&b==="("?")":""),v){for(P=-1,D=T.length;++P<D;)if(F=T.charCodeAt(P),48>F||F>57){L=(F===46?i+T.slice(P+1):T.slice(P))+L,T=T.slice(0,P);break}}}k&&!m&&(T=t(T,1/0));var ne=w.length+T.length+L.length,q=ne<y?new Array(y-ne+1).join(p):"";switch(k&&m&&(T=t(q+T,q.length?y-L.length:1/0),q=""),g){case"<":T=w+T+L+q;break;case"=":T=w+q+T+L;break;case"^":T=q.slice(0,ne=q.length>>1)+w+T+L+q.slice(ne);break;default:T=q+w+T+L;break}return a(T)}return $.toString=function(){return f+""},$}function d(f,p){var g=c((f=ya(f),f.type="f",f)),b=Math.max(-8,Math.min(8,Math.floor(vr(p)/3)))*3,h=Math.pow(10,-b),m=wu[8+b/3];return function(y){return g(h*y)+m}}return{format:c,formatPrefix:d}}var _a,Su,Cu;fy({thousands:",",grouping:[3],currency:["$",""]});function fy(e){return _a=dy(e),Su=_a.format,Cu=_a.formatPrefix,_a}function hy(e){return Math.max(0,-vr(Math.abs(e)))}function py(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vr(t)/3)))*3-vr(Math.abs(e)))}function my(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vr(t)-vr(e))+1}function gy(e,t,n,r){var i=Us(e,t,n),a;switch(r=ya(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=py(i,s))&&(r.precision=a),Cu(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=my(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=hy(i))&&(r.precision=a-(r.type==="%")*2);break}}return Su(r)}function by(e){var t=e.domain;return e.ticks=function(n){var r=t();return Nb(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return gy(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,s=r[i],l=r[a],u,c,d=10;for(l<s&&(c=s,s=l,l=c,c=i,i=a,a=c);d-- >0;){if(c=zs(s,l,n),c===u)return r[i]=s,r[a]=l,t(r);if(c>0)s=Math.floor(s/c)*c,l=Math.ceil(l/c)*c;else if(c<0)s=Math.ceil(s*c)/c,l=Math.floor(l*c)/c;else break;u=c}return e},e}function va(){var e=gu();return e.copy=function(){return mu(e,va())},da.apply(e,arguments),by(e)}function yy(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),e[n]=t.floor(i),e[r]=t.ceil(a),e}const Qs=new Date,eo=new Date;function ut(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),l=i.ceil(a);return a-s<l-a?s:l},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,l)=>{const u=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return u;let c;do u.push(c=new Date(+a)),t(a,l),e(a);while(c<a&&a<s);return u},i.filter=a=>ut(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!a(s););else for(;--l>=0;)for(;t(s,1),!a(s););}),n&&(i.count=(a,s)=>(Qs.setTime(+a),eo.setTime(+s),e(Qs),e(eo),Math.floor(n(Qs,eo))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const xa=ut(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);xa.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ut(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):xa),xa.range;const xn=1e3,zt=xn*60,wn=zt*60,Sn=wn*24,to=Sn*7,ku=Sn*30,no=Sn*365,xr=ut(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*xn)},(e,t)=>(t-e)/xn,e=>e.getUTCSeconds());xr.range;const ro=ut(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xn)},(e,t)=>{e.setTime(+e+t*zt)},(e,t)=>(t-e)/zt,e=>e.getMinutes());ro.range,ut(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*zt)},(e,t)=>(t-e)/zt,e=>e.getUTCMinutes()).range;const io=ut(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xn-e.getMinutes()*zt)},(e,t)=>{e.setTime(+e+t*wn)},(e,t)=>(t-e)/wn,e=>e.getHours());io.range,ut(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*wn)},(e,t)=>(t-e)/wn,e=>e.getUTCHours()).range;const Zr=ut(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zt)/Sn,e=>e.getDate()-1);Zr.range;const ao=ut(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Sn,e=>e.getUTCDate()-1);ao.range,ut(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Sn,e=>Math.floor(e/Sn)).range;function Kn(e){return ut(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*zt)/to)}const wa=Kn(0),Sa=Kn(1),_y=Kn(2),vy=Kn(3),wr=Kn(4),xy=Kn(5),wy=Kn(6);wa.range,Sa.range,_y.range,vy.range,wr.range,xy.range,wy.range;function Jn(e){return ut(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/to)}const Tu=Jn(0),Ca=Jn(1),Sy=Jn(2),Cy=Jn(3),Sr=Jn(4),ky=Jn(5),Ty=Jn(6);Tu.range,Ca.range,Sy.range,Cy.range,Sr.range,ky.range,Ty.range;const Qr=ut(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Qr.range,ut(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()).range;const Cn=ut(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Cn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ut(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),Cn.range;const Zn=ut(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Zn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ut(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),Zn.range;function Ny(e,t,n,r,i,a){const s=[[xr,1,xn],[xr,5,5*xn],[xr,15,15*xn],[xr,30,30*xn],[a,1,zt],[a,5,5*zt],[a,15,15*zt],[a,30,30*zt],[i,1,wn],[i,3,3*wn],[i,6,6*wn],[i,12,12*wn],[r,1,Sn],[r,2,2*Sn],[n,1,to],[t,1,ku],[t,3,3*ku],[e,1,no]];function l(c,d,f){const p=d<c;p&&([c,d]=[d,c]);const g=f&&typeof f.range=="function"?f:u(c,d,f),b=g?g.range(c,+d+1):[];return p?b.reverse():b}function u(c,d,f){const p=Math.abs(d-c)/f,g=Os(([,,m])=>m).right(s,p);if(g===s.length)return e.every(Us(c/no,d/no,f));if(g===0)return xa.every(Math.max(Us(c,d,f),1));const[b,h]=s[p/s[g-1][2]<s[g][2]/p?g-1:g];return b.every(h)}return[l,u]}const[jy,Dy]=Ny(Cn,Qr,wa,Zr,io,ro);function so(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function oo(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ei(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function My(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,s=e.shortDays,l=e.months,u=e.shortMonths,c=ti(i),d=ni(i),f=ti(a),p=ni(a),g=ti(s),b=ni(s),h=ti(l),m=ni(l),y=ti(u),k=ni(u),N={a:A,A:ne,b:q,B:H,c:null,d:Pu,e:Pu,f:Qy,g:c_,G:d_,H:Ky,I:Jy,j:Zy,L:$u,m:e_,M:t_,p:U,q:G,Q:Ru,s:Hu,S:n_,u:r_,U:i_,V:a_,w:s_,W:o_,x:null,X:null,y:l_,Y:u_,Z:f_,"%":Bu},S={a:oe,A:z,b:pe,B:we,c:null,d:Lu,e:Lu,f:g_,g:T_,G:j_,H:h_,I:p_,j:m_,L:Au,m:b_,M:y_,p:fe,q:de,Q:Ru,s:Hu,S:__,u:v_,U:x_,V:w_,w:S_,W:C_,x:null,X:null,y:k_,Y:N_,Z:D_,"%":Bu},x={a:$,A:T,b:w,B:L,c:P,d:Mu,e:Mu,f:Gy,g:Du,G:ju,H:Iu,I:Iu,j:zy,L:Vy,m:Oy,M:Uy,p:v,q:Hy,Q:qy,s:Xy,S:Wy,u:Ly,U:Ay,V:Ey,w:Fy,W:By,x:D,X:F,y:Du,Y:ju,Z:Ry,"%":Yy};N.x=M(n,N),N.X=M(r,N),N.c=M(t,N),S.x=M(n,S),S.X=M(r,S),S.c=M(t,S);function M(Z,se){return function(he){var I=[],O=-1,V=0,ae=Z.length,ee,le,_e;for(he instanceof Date||(he=new Date(+he));++O<ae;)Z.charCodeAt(O)===37&&(I.push(Z.slice(V,O)),(le=Nu[ee=Z.charAt(++O)])!=null?ee=Z.charAt(++O):le=ee==="e"?" ":"0",(_e=se[ee])&&(ee=_e(he,le)),I.push(ee),V=O+1);return I.push(Z.slice(V,O)),I.join("")}}function j(Z,se){return function(he){var I=ei(1900,void 0,1),O=C(I,Z,he+="",0),V,ae;if(O!=he.length)return null;if("Q"in I)return new Date(I.Q);if("s"in I)return new Date(I.s*1e3+("L"in I?I.L:0));if(se&&!("Z"in I)&&(I.Z=0),"p"in I&&(I.H=I.H%12+I.p*12),I.m===void 0&&(I.m="q"in I?I.q:0),"V"in I){if(I.V<1||I.V>53)return null;"w"in I||(I.w=1),"Z"in I?(V=oo(ei(I.y,0,1)),ae=V.getUTCDay(),V=ae>4||ae===0?Ca.ceil(V):Ca(V),V=ao.offset(V,(I.V-1)*7),I.y=V.getUTCFullYear(),I.m=V.getUTCMonth(),I.d=V.getUTCDate()+(I.w+6)%7):(V=so(ei(I.y,0,1)),ae=V.getDay(),V=ae>4||ae===0?Sa.ceil(V):Sa(V),V=Zr.offset(V,(I.V-1)*7),I.y=V.getFullYear(),I.m=V.getMonth(),I.d=V.getDate()+(I.w+6)%7)}else("W"in I||"U"in I)&&("w"in I||(I.w="u"in I?I.u%7:"W"in I?1:0),ae="Z"in I?oo(ei(I.y,0,1)).getUTCDay():so(ei(I.y,0,1)).getDay(),I.m=0,I.d="W"in I?(I.w+6)%7+I.W*7-(ae+5)%7:I.w+I.U*7-(ae+6)%7);return"Z"in I?(I.H+=I.Z/100|0,I.M+=I.Z%100,oo(I)):so(I)}}function C(Z,se,he,I){for(var O=0,V=se.length,ae=he.length,ee,le;O<V;){if(I>=ae)return-1;if(ee=se.charCodeAt(O++),ee===37){if(ee=se.charAt(O++),le=x[ee in Nu?se.charAt(O++):ee],!le||(I=le(Z,he,I))<0)return-1}else if(ee!=he.charCodeAt(I++))return-1}return I}function v(Z,se,he){var I=c.exec(se.slice(he));return I?(Z.p=d.get(I[0].toLowerCase()),he+I[0].length):-1}function $(Z,se,he){var I=g.exec(se.slice(he));return I?(Z.w=b.get(I[0].toLowerCase()),he+I[0].length):-1}function T(Z,se,he){var I=f.exec(se.slice(he));return I?(Z.w=p.get(I[0].toLowerCase()),he+I[0].length):-1}function w(Z,se,he){var I=y.exec(se.slice(he));return I?(Z.m=k.get(I[0].toLowerCase()),he+I[0].length):-1}function L(Z,se,he){var I=h.exec(se.slice(he));return I?(Z.m=m.get(I[0].toLowerCase()),he+I[0].length):-1}function P(Z,se,he){return C(Z,t,se,he)}function D(Z,se,he){return C(Z,n,se,he)}function F(Z,se,he){return C(Z,r,se,he)}function A(Z){return s[Z.getDay()]}function ne(Z){return a[Z.getDay()]}function q(Z){return u[Z.getMonth()]}function H(Z){return l[Z.getMonth()]}function U(Z){return i[+(Z.getHours()>=12)]}function G(Z){return 1+~~(Z.getMonth()/3)}function oe(Z){return s[Z.getUTCDay()]}function z(Z){return a[Z.getUTCDay()]}function pe(Z){return u[Z.getUTCMonth()]}function we(Z){return l[Z.getUTCMonth()]}function fe(Z){return i[+(Z.getUTCHours()>=12)]}function de(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var se=M(Z+="",N);return se.toString=function(){return Z},se},parse:function(Z){var se=j(Z+="",!1);return se.toString=function(){return Z},se},utcFormat:function(Z){var se=M(Z+="",S);return se.toString=function(){return Z},se},utcParse:function(Z){var se=j(Z+="",!0);return se.toString=function(){return Z},se}}}var Nu={"-":"",_:" ",0:"0"},ht=/^\s*\d+/,Iy=/^%/,Py=/[\\^$*+?|[\]().{}]/g;function Ee(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function $y(e){return e.replace(Py,"\\$&")}function ti(e){return new RegExp("^(?:"+e.map($y).join("|")+")","i")}function ni(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Fy(e,t,n){var r=ht.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ly(e,t,n){var r=ht.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Ay(e,t,n){var r=ht.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Ey(e,t,n){var r=ht.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function By(e,t,n){var r=ht.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ju(e,t,n){var r=ht.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Du(e,t,n){var r=ht.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ry(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Hy(e,t,n){var r=ht.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Oy(e,t,n){var r=ht.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Mu(e,t,n){var r=ht.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function zy(e,t,n){var r=ht.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Iu(e,t,n){var r=ht.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Uy(e,t,n){var r=ht.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Wy(e,t,n){var r=ht.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Vy(e,t,n){var r=ht.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Gy(e,t,n){var r=ht.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Yy(e,t,n){var r=Iy.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function qy(e,t,n){var r=ht.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Xy(e,t,n){var r=ht.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Pu(e,t){return Ee(e.getDate(),t,2)}function Ky(e,t){return Ee(e.getHours(),t,2)}function Jy(e,t){return Ee(e.getHours()%12||12,t,2)}function Zy(e,t){return Ee(1+Zr.count(Cn(e),e),t,3)}function $u(e,t){return Ee(e.getMilliseconds(),t,3)}function Qy(e,t){return $u(e,t)+"000"}function e_(e,t){return Ee(e.getMonth()+1,t,2)}function t_(e,t){return Ee(e.getMinutes(),t,2)}function n_(e,t){return Ee(e.getSeconds(),t,2)}function r_(e){var t=e.getDay();return t===0?7:t}function i_(e,t){return Ee(wa.count(Cn(e)-1,e),t,2)}function Fu(e){var t=e.getDay();return t>=4||t===0?wr(e):wr.ceil(e)}function a_(e,t){return e=Fu(e),Ee(wr.count(Cn(e),e)+(Cn(e).getDay()===4),t,2)}function s_(e){return e.getDay()}function o_(e,t){return Ee(Sa.count(Cn(e)-1,e),t,2)}function l_(e,t){return Ee(e.getFullYear()%100,t,2)}function c_(e,t){return e=Fu(e),Ee(e.getFullYear()%100,t,2)}function u_(e,t){return Ee(e.getFullYear()%1e4,t,4)}function d_(e,t){var n=e.getDay();return e=n>=4||n===0?wr(e):wr.ceil(e),Ee(e.getFullYear()%1e4,t,4)}function f_(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ee(t/60|0,"0",2)+Ee(t%60,"0",2)}function Lu(e,t){return Ee(e.getUTCDate(),t,2)}function h_(e,t){return Ee(e.getUTCHours(),t,2)}function p_(e,t){return Ee(e.getUTCHours()%12||12,t,2)}function m_(e,t){return Ee(1+ao.count(Zn(e),e),t,3)}function Au(e,t){return Ee(e.getUTCMilliseconds(),t,3)}function g_(e,t){return Au(e,t)+"000"}function b_(e,t){return Ee(e.getUTCMonth()+1,t,2)}function y_(e,t){return Ee(e.getUTCMinutes(),t,2)}function __(e,t){return Ee(e.getUTCSeconds(),t,2)}function v_(e){var t=e.getUTCDay();return t===0?7:t}function x_(e,t){return Ee(Tu.count(Zn(e)-1,e),t,2)}function Eu(e){var t=e.getUTCDay();return t>=4||t===0?Sr(e):Sr.ceil(e)}function w_(e,t){return e=Eu(e),Ee(Sr.count(Zn(e),e)+(Zn(e).getUTCDay()===4),t,2)}function S_(e){return e.getUTCDay()}function C_(e,t){return Ee(Ca.count(Zn(e)-1,e),t,2)}function k_(e,t){return Ee(e.getUTCFullYear()%100,t,2)}function T_(e,t){return e=Eu(e),Ee(e.getUTCFullYear()%100,t,2)}function N_(e,t){return Ee(e.getUTCFullYear()%1e4,t,4)}function j_(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Sr(e):Sr.ceil(e),Ee(e.getUTCFullYear()%1e4,t,4)}function D_(){return"+0000"}function Bu(){return"%"}function Ru(e){return+e}function Hu(e){return Math.floor(+e/1e3)}var Cr,Ou;M_({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function M_(e){return Cr=My(e),Ou=Cr.format,Cr.parse,Cr.utcFormat,Cr.utcParse,Cr}function I_(e){return new Date(e)}function P_(e){return e instanceof Date?+e:+new Date(+e)}function zu(e,t,n,r,i,a,s,l,u,c){var d=gu(),f=d.invert,p=d.domain,g=c(".%L"),b=c(":%S"),h=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),k=c("%b %d"),N=c("%B"),S=c("%Y");function x(M){return(u(M)<M?g:l(M)<M?b:s(M)<M?h:a(M)<M?m:r(M)<M?i(M)<M?y:k:n(M)<M?N:S)(M)}return d.invert=function(M){return new Date(f(M))},d.domain=function(M){return arguments.length?p(Array.from(M,P_)):p().map(I_)},d.ticks=function(M){var j=p();return e(j[0],j[j.length-1],M??10)},d.tickFormat=function(M,j){return j==null?x:c(j)},d.nice=function(M){var j=p();return(!M||typeof M.range!="function")&&(M=t(j[0],j[j.length-1],M??10)),M?p(yy(j,M)):d},d.copy=function(){return mu(d,zu(e,t,n,r,i,a,s,l,u,c))},d}function lo(){return da.apply(zu(jy,Dy,Cn,Qr,wa,Zr,io,ro,xr,Ou).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $_({task:e,scale:t,onTaskClick:n,onTaskDoubleClick:r,isSelected:i=!1,taskIndex:a,tabIndex:s=-1,onFocus:l,"aria-label":u}){const c=E.useRef(null),[d,f]=E.useState(!1),[p,g]=E.useState(!1),b=t(e.start),h=t(e.end),m=Math.max(h-b,20),y=()=>{if(e.color)return e.color;switch(e.priority){case"high":return"#d5281b";case"medium":return"#005eb8";case"low":return"#007f3b";default:return"#005eb8"}},k=e.progress?m*e.progress/100:0,N=()=>{n?.(e)},S=()=>{r?.(e)},x=w=>{w.key==="Enter"?(w.preventDefault(),N()):w.key===" "&&(w.preventDefault(),S())},M=()=>{f(!0)},j=()=>{f(!1)},C=()=>{g(!0),l?.()},v=()=>{g(!1)},$=["gantt-task-bar",d&&"gantt-task-bar--pressed",(p||i)&&"gantt-task-bar--focused",e.priority&&`gantt-task-bar--priority-${e.priority}`,i&&"gantt-task-bar--selected",e.type&&`gantt-task-bar--type-${e.type}`].filter(Boolean).join(" "),T={"--task-left":`${b}px`,"--task-width":`${m}px`,"--task-color":y(),left:`${b}px`,width:`${m}px`,backgroundColor:y()};return o.jsxs("div",{role:"button",tabIndex:s,ref:c,"data-task-index":a,className:$,style:T,onClick:N,onDoubleClick:S,onKeyDown:x,onMouseDown:M,onMouseUp:j,onFocus:C,onBlur:v,"aria-label":u||`${i?"Selected: ":""}${e.title}: ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.priority?`, priority ${e.priority}`:""}${e.progress?`, ${e.progress}% complete`:""}`,"aria-describedby":`task-${e.id}-details`,children:[o.jsx("span",{className:"task-title",children:e.title}),e.progress!==void 0&&o.jsx("div",{className:"task-progress",style:{width:`${k}px`}}),o.jsx("span",{id:`task-${e.id}-details`,className:"sr-only",children:`Task: ${e.title}, from ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.progress?`, ${e.progress}% complete`:""}${e.priority?`, priority: ${e.priority}`:""}`})]})}function F_({viewStart:e,viewEnd:t,dateCount:n}){const r=[];for(let g=e.getTime();g<=t.getTime();g+=864e5)r.push(new Date(g));const a=new Date;a.setHours(0,0,0,0);const[s,l]=E.useState(-1),u=E.useRef(null),c=g=>{if(g.key==="ArrowLeft"){g.preventDefault();const b=Math.max(0,s===-1?0:s-1);l(b),p(b)}else if(g.key==="ArrowRight"){g.preventDefault();const b=Math.min(r.length-1,s===-1?0:s+1);l(b),p(b)}else if(g.key==="ArrowDown")g.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .timeline-container"):null)?.focus();else if(g.key==="Home")g.preventDefault(),l(0),p(0);else if(g.key==="End"){g.preventDefault();const b=r.length-1;l(b),p(b)}},d=g=>{if(g.key==="ArrowDown")g.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .resource-label"):null)?.focus();else if(g.key==="ArrowRight"){g.preventDefault();const b=u.current;b&&b.focus()}},f=()=>{s===-1&&(l(0),setTimeout(()=>p(0),0))},p=g=>{const b=u.current?.querySelector(`[data-date-index="${g}"]`);b&&b.focus()};return o.jsxs("div",{className:"gantt-header",role:"row","aria-rowindex":1,children:[o.jsx("div",{className:"header-resource",role:"columnheader","aria-colindex":1,tabIndex:0,"aria-label":"Resource column header",onKeyDown:d,children:"Resources"}),o.jsx("div",{ref:u,className:"header-timeline",role:"columnheader","aria-colindex":2,"aria-colspan":n,"aria-label":`Timeline from ${e.toLocaleDateString()} to ${t.toLocaleDateString()}. Use arrow keys to navigate between dates`,tabIndex:0,onKeyDown:c,onFocus:f,children:r.map((g,b)=>{const h=g.getTime()===a.getTime(),m=s===b;return o.jsx("div",{"data-date-index":b,className:`date-column ${h?"today":""} ${m?"focused":""}`,tabIndex:m?0:-1,role:"button","aria-label":`${g.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}${h?" (Today)":""}`,onFocus:()=>l(b),onKeyDown:c,children:g.toLocaleDateString("en-GB",{day:"numeric",month:"short"})},b)})})]})}function L_({resource:e,tasks:t,scale:n,onTaskClick:r,onTaskDoubleClick:i,rowIndex:a,dateCount:s}){const[l,u]=E.useState(!1),[c,d]=E.useState(-1),f=E.useRef(null);E.useEffect(()=>{l&&c>=0&&t.length>0&&setTimeout(()=>{f.current?.querySelector(`[data-task-index="${c}"]`)?.focus()},0)},[l,c,t.length]);const p=h=>{if(h.key==="ArrowLeft"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(h.key==="ArrowRight"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!l){switch(h.key){case"ArrowUp":h.preventDefault(),a===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-timeline"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+1}"] .timeline-container`):null)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+3}"] .timeline-container`):null)?.focus();break;case"ArrowLeft":h.preventDefault(),f.current?.closest(".gantt-row")?.querySelector(".resource-label")?.focus();break;case"Enter":t.length>0&&(h.preventDefault(),u(!0),d(0));break}return}switch(h.key){case"ArrowLeft":h.preventDefault();const m=Math.max(0,c-1);d(m),f.current?.querySelector(`[data-task-index="${m}"]`)?.focus();break;case"ArrowRight":h.preventDefault();const k=Math.min(t.length-1,c+1);d(k),f.current?.querySelector(`[data-task-index="${k}"]`)?.focus();break;case"Enter":h.preventDefault(),c>=0&&r?.(t[c]);break;case" ":h.preventDefault(),c>=0&&i?.(t[c]);break;case"Escape":h.preventDefault(),u(!1),d(-1),f.current?.focus();break}},g=h=>{switch(h.key){case"ArrowUp":h.preventDefault(),a===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-resource"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+1}"] .resource-label`):null)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+3}"] .resource-label`):null)?.focus();break;case"ArrowRight":h.preventDefault(),f.current?.focus();break}},b=h=>{l&&d(h)};return o.jsxs("div",{className:"gantt-row",role:"row","aria-rowindex":a+2,children:[o.jsx("div",{className:"resource-label",role:"gridcell","aria-colindex":1,tabIndex:0,"aria-label":`Resource: ${e.label}`,onKeyDown:g,children:e.label}),o.jsx("div",{ref:f,className:`timeline-container ${l?"timeline-active":""}`,role:"gridcell","aria-colindex":2,"aria-colspan":s,tabIndex:0,"aria-label":`Timeline for ${e.label} with ${t.length} task${t.length!==1?"s":""}. Press Enter to activate task navigation, then use arrow keys to navigate, Enter to select, Space to activate, Escape to exit`,onKeyDown:p,onFocus:()=>{l||d(-1)},children:t.map((h,m)=>o.jsx($_,{task:h,scale:n,onTaskClick:r,onTaskDoubleClick:i,isSelected:l&&c===m,taskIndex:m,tabIndex:l&&c===m?0:-1,onFocus:()=>b(m)},h.id))})]})}function A_({resources:e,tasks:t=[],viewStart:n,viewEnd:r,onTaskClick:i,onTaskDoubleClick:a}){const s=E.useRef(null),[l,u]=E.useState(800),c=E.useMemo(()=>{if(n instanceof Date)return isNaN(n.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):n;const h=new Date(n);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):h},[n]),d=E.useMemo(()=>{if(r instanceof Date)return isNaN(r.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):r;const h=new Date(r);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):h},[r]),f=E.useMemo(()=>Math.ceil((d.getTime()-c.getTime())/864e5)+1,[c,d]);E.useEffect(()=>{if(!s.current||typeof window>"u")return;const h=typeof ResizeObserver<"u"?ResizeObserver:void 0;if(!h)return;const m=new h(y=>{const k=y[0];k&&u(Math.max(k.contentRect.width-220,400))});return m.observe(s.current),()=>m.disconnect()},[]);const p=E.useMemo(()=>lo().domain([c,d]).range([0,l]),[c,d,l]),g=E.useMemo(()=>{const h=new Map;return t.forEach(m=>{const y=h.get(m.resourceId)||[];y.push(m),h.set(m.resourceId,y)}),h},[t]),b=h=>{if(h.target===h.currentTarget)switch(h.key){case"ArrowDown":h.preventDefault(),typeof document<"u"&&s.current?.querySelector(".gantt-row .resource-label")?.focus();break;case"Home":h.preventDefault(),typeof document<"u"&&s.current?.querySelector(".header-resource")?.focus();break}};return o.jsxs("div",{className:"gantt-chart",role:"grid","aria-label":"Gantt Chart showing resource scheduling and task timelines","aria-rowcount":e.length+1,"aria-colcount":f+1,"aria-description":"Use arrow keys to navigate cells, Tab to cycle through tasks in timeline rows or dates in header, Enter to select task, Space to activate task, Alt+arrows to scroll the grid, Shift+arrows to scroll timeline rows",tabIndex:0,onKeyDown:b,children:[o.jsx(F_,{viewStart:c,viewEnd:d,dateCount:f}),o.jsx("div",{ref:s,className:"gantt-grid",role:"rowgroup","aria-label":"Gantt chart data rows",tabIndex:0,onKeyDown:h=>{h.key==="ArrowLeft"&&h.altKey?(h.preventDefault(),s.current?.scrollBy({left:-50,behavior:"smooth"})):h.key==="ArrowRight"&&h.altKey?(h.preventDefault(),s.current?.scrollBy({left:50,behavior:"smooth"})):h.key==="ArrowUp"&&h.altKey?(h.preventDefault(),s.current?.scrollBy({top:-50,behavior:"smooth"})):h.key==="ArrowDown"&&h.altKey&&(h.preventDefault(),s.current?.scrollBy({top:50,behavior:"smooth"}))},children:e.map((h,m)=>o.jsx(L_,{resource:h,tasks:g.get(h.id)||[],scale:p,onTaskClick:i,onTaskDoubleClick:a,rowIndex:m,dateCount:f},h.id))})]})}const ka=({children:e,href:t,active:n=!1,attributes:r={}})=>o.jsx("li",{className:"nhsuk-breadcrumb__item",children:n?o.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",...r,children:e}):o.jsx("a",{className:"nhsuk-breadcrumb__link",href:t,...r,children:e})}),Uu=({items:e=[],children:t,classes:n,labelText:r="Breadcrumb",href:i,text:a,reverse:s=!1,attributes:l={}})=>{const u=()=>t?E.Children.toArray(t).filter(m=>E.isValidElement(m)&&(m.type===ka||m.type?.displayName==="BreadcrumbItem")).map(m=>({text:typeof m.props.children=="string"?m.props.children:String(m.props.children),href:m.props.href,active:m.props.active,attributes:m.props.attributes})):[],c=()=>t?u():i&&a?[{href:i,text:a}]:e,d=()=>{const h=c();if(h&&h.length>0){const m=h.slice().reverse().find(y=>y.href&&!y.active);if(m)return{href:m.href,text:m.text}}return{text:"Home"}},f=c(),p=d(),g=xe("nhsuk-breadcrumb",{"nhsuk-breadcrumb--reverse":s},n),b=r;return o.jsxs("nav",{className:g,"aria-label":b,role:"navigation",...l,children:[o.jsx("ol",{className:"nhsuk-breadcrumb__list",role:"list",children:t?E.Children.map(t,(h,m)=>E.isValidElement(h)&&(h.type===ka||h.type?.displayName==="BreadcrumbItem")?E.cloneElement(h,{key:m}):null):f?.filter(h=>h.active||!!h.href).map((h,m)=>o.jsx("li",{className:"nhsuk-breadcrumb__item",role:"listitem",children:h.active?o.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",role:"text",...h.attributes||{},children:h.text}):o.jsx("a",{className:"nhsuk-breadcrumb__link",href:h.href,role:"link",...h.attributes||{},children:h.text})},m))}),p.href&&o.jsx("p",{className:"nhsuk-breadcrumb__back",children:o.jsxs("a",{className:"nhsuk-breadcrumb__backlink",href:p.href,role:"link","aria-label":`Back to ${p.text}`,...e.length>0?e[e.length-1]?.attributes||{}:{},children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Back to Â "}),p.text]})})]})};Uu.Item=ka,ka.displayName="BreadcrumbItem";const co=({text:e="Skip to main content",href:t="#maincontent",classes:n,attributes:r={}})=>{const[i,a]=E.useState(!1);E.useEffect(()=>{a(!0)},[]),E.useEffect(()=>{if(typeof window>"u"||typeof document>"u"||!document.querySelector||!document.querySelectorAll)return;const l=u=>{const c=u.target,d=c.getAttribute("href");if(d&&d.startsWith("#")){const f=typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(d):null;if(f){f.hasAttribute("tabindex")||f.setAttribute("tabindex","-1"),f.focus(),f.classList.add("nhsuk-skip-link-focused-element");const p=window.setTimeout(()=>{f.classList.remove("nhsuk-skip-link-focused-element"),f.getAttribute("tabindex")==="-1"&&f.removeAttribute("tabindex")},3e3);c.__nhsSkipLinkTimeout=p}}};try{const u=document.querySelectorAll(".nhsuk-skip-link");return u.forEach(c=>{c.addEventListener("click",l)}),()=>{try{u.forEach(c=>{c.removeEventListener("click",l);const d=c.__nhsSkipLinkTimeout;d&&window.clearTimeout&&window.clearTimeout(d)})}catch(c){console.warn("SkipLink cleanup error:",c)}}}catch(u){return console.warn("SkipLink initialization error:",u),()=>{}}},[i]);const s=xe("nhsuk-skip-link",n);return o.jsx("a",{className:s,href:t,"data-module":"nhsuk-skip-link","data-enhanced":i?"true":"false",...r,children:e})},E_=({previousUrl:e,previousPage:t,nextUrl:n,nextPage:r,classes:i,attributes:a={}})=>{const s=xe("nhsuk-pagination",i);return o.jsx("nav",{className:s,role:"navigation","aria-label":"Pagination",...a,children:o.jsxs("ul",{className:"nhsuk-list nhsuk-pagination__list",children:[e&&t&&o.jsx("li",{className:"nhsuk-pagination-item--previous",children:o.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--prev",href:e,children:[o.jsx("span",{className:"nhsuk-pagination__title",children:"Previous"}),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),o.jsx("span",{className:"nhsuk-pagination__page",children:t}),o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{d:"M4.1 12.3l2.7 3c.2.2.5.2.7 0 .1-.1.1-.2.1-.3v-2h11c.6 0 1-.4 1-1s-.4-1-1-1h-11V9c0-.2-.1-.4-.3-.5h-.2c-.1 0-.3.1-.4.2l-2.7 3c0 .2 0 .4.1.6z"})})]})}),n&&r&&o.jsx("li",{className:"nhsuk-pagination-item--next",children:o.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--next",href:n,children:[o.jsx("span",{className:"nhsuk-pagination__title",children:"Next"}),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),o.jsx("span",{className:"nhsuk-pagination__page",children:r}),o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{d:"M19.6 11.66l-2.73-3A.51.51 0 0 0 16 9v2H5a1 1 0 0 0 0 2h11v2a.5.5 0 0 0 .32.46.39.39 0 0 0 .18 0 .52.52 0 0 0 .37-.16l2.73-3a.5.5 0 0 0 0-.64z"})})]})})]})})},B_=({items:e,classes:t,ariaLabel:n="Pages in this guide",attributes:r={}})=>{const i=xe("nhsuk-contents-list",t),a=(s,l)=>s.current?o.jsx("li",{className:"nhsuk-contents-list__item","aria-current":"page",...s.attributes||{},children:o.jsx("span",{className:"nhsuk-contents-list__current",children:s.text})},l):o.jsx("li",{className:"nhsuk-contents-list__item",children:o.jsx("a",{className:"nhsuk-contents-list__link",href:s.href,...s.attributes||{},children:s.text})},l);return o.jsxs("nav",{className:i,role:"navigation","aria-label":n,...r,children:[o.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Contents"}),o.jsx("ol",{className:"nhsuk-contents-list__list",children:e.map((s,l)=>a(s,l))})]})},uo=E.forwardRef(({variant:e="default",heading:t,headingHtml:n,headingLevel:r=2,headingClasses:i,description:a,descriptionHtml:s,href:l,imgURL:u,imgAlt:c,...d},f)=>{const p=["nhsuk-card",e==="clickable"&&"nhsuk-card--clickable",e==="secondary"&&"nhsuk-card--secondary",e==="feature"&&"nhsuk-card--feature",d.className].filter(Boolean).join(" "),g=["nhsuk-card__content",e==="feature"&&"nhsuk-card__content--feature",e==="primary"&&"nhsuk-card__content--primary",e==="secondary"&&"nhsuk-card__content--secondary"].filter(Boolean).join(" "),b=["nhsuk-card__heading",e==="feature"&&"nhsuk-card__heading--feature",i].filter(Boolean).join(" "),h=()=>{if(n)return o.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const k=()=>l&&e!=="feature"?o.jsx("a",{className:"nhsuk-card__link",href:l,children:t}):t;return o.jsx(Zt,{level:r,className:b,children:k()})},m=()=>d.children?d.children:s?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):a?o.jsx("p",{className:"nhsuk-card__description",children:a}):null,y=()=>e!=="primary"?null:o.jsxs("svg",{className:"nhsuk-icon",xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27","aria-hidden":"true",focusable:"false",children:[o.jsx("circle",{cx:"13.333",cy:"13.333",r:"13.333",fill:""}),o.jsxs("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2.667",children:[o.jsx("path",{d:"M15.438 13l-3.771 3.771"}),o.jsx("path",{d:"M11.667 9.229L15.438 13"})]})]});return o.jsxs("div",{...d,className:p,ref:f,children:[u&&o.jsx("img",{className:"nhsuk-card__img",src:u,alt:c||""}),o.jsxs("div",{className:g,children:[h(),m(),y()]})]})});uo.displayName="Card";const R_=({className:e,children:t,"data-testid":n,id:r})=>{const i=["nhsuk-card-group",e].filter(Boolean).join(" ");return o.jsx("ul",{className:i,"data-testid":n,id:r,children:t})},H_=({className:e,children:t,"data-testid":n})=>{const r=["nhsuk-card-group__item",e].filter(Boolean).join(" ");return o.jsx("li",{className:r,"data-testid":n,children:t})},O_=({type:e,heading:t,headingHtml:n,headingLevel:r=3,headingClasses:i,description:a,descriptionHtml:s,className:l,children:u,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":p,"aria-describedby":g})=>{const b=["nhsuk-care-card",`nhsuk-care-card--${e}`,l].filter(Boolean).join(" "),h=["nhsuk-care-card__heading",i].filter(Boolean).join(" "),m=()=>{if(n)return o.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const k={"non-urgent":"Non-urgent advice:",urgent:"Urgent advice:",emergency:"Immediate action required:"}[e],N=o.jsxs("span",{role:"text",children:[o.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[k," "]}),t]});return o.jsx(Zt,{level:r,className:h,children:N})},y=()=>u||(s?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):a?o.jsx("p",{className:"nhsuk-care-card__text",children:a}):null);return o.jsxs("div",{className:b,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":p,"aria-describedby":g,children:[o.jsxs("div",{className:"nhsuk-care-card__heading-container",children:[m(),o.jsx("span",{className:"nhsuk-care-card__arrow","aria-hidden":"true"})]}),o.jsx("div",{className:"nhsuk-care-card__content",children:y()})]})},Wu=({id:e,className:t,headingText:n,headingHtml:r,headingLevel:i=2,bodyText:a,bodyHtml:s,children:l,...u})=>{const c=xe("nhsuk-panel",t),d=()=>!n&&!r&&!l?null:r?o.jsx(Zt,{level:i,className:"nhsuk-panel__heading",html:r,marginBottom:"var(--panel-heading-margin, 24px)"}):n?o.jsx(Zt,{level:i,className:"nhsuk-panel__heading",text:n,marginBottom:"var(--panel-heading-margin, 24px)"}):null,f=()=>l?o.jsx("div",{className:"nhsuk-panel__body",children:l}):s?o.jsx("div",{className:"nhsuk-panel__body",dangerouslySetInnerHTML:{__html:s}}):a?o.jsx("div",{className:"nhsuk-panel__body",children:o.jsx("p",{children:a})}):null;return o.jsxs("div",{className:c,id:e,...u,children:[d(),f()]})},z_=({text:e,html:t,children:n,className:r,...i})=>{const a=xe("nhsuk-inset-text",r),s=()=>n||(t?o.jsx("div",{dangerouslySetInnerHTML:{__html:t}}):e?o.jsx("p",{children:e}):null);return o.jsx("div",{className:a,...i,children:s()})},U_=({items:e,noBorder:t=!1,className:n,...r})=>{const i=xe("nhsuk-summary-list",{"nhsuk-summary-list--no-border":t},n),a=l=>l.children?l.children:l.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text?l.text:null,s=l=>!l||!l.items.length?null:o.jsx("dd",{className:"nhsuk-summary-list__actions",children:o.jsx("ul",{className:"nhsuk-summary-list__actions-list",children:l.items.map((u,c)=>o.jsx("li",{className:"nhsuk-summary-list__actions-list-item",children:o.jsxs("a",{href:u.href,className:"nhsuk-link",...u.attributes,children:[a(u),u.visuallyHiddenText&&o.jsx("span",{className:"nhsuk-u-visually-hidden",children:u.visuallyHiddenText})]})},c))})});return o.jsx("div",{className:"nhsuk-summary-list-container",children:o.jsx("dl",{className:i,...r,children:e.map((l,u)=>o.jsxs("div",{className:"nhsuk-summary-list__row",children:[o.jsx("dt",{className:"nhsuk-summary-list__key",children:a(l.key)}),o.jsx("dd",{className:"nhsuk-summary-list__value",children:a(l.value)}),s(l.actions)]},u))})})},ri={current:null},W_=()=>{if(ri.current)return ri.current;try{ri.current=require("prismjs");try{require("prismjs/components/prism-typescript")}catch{}try{require("prismjs/components/prism-tsx")}catch{}try{require("prismjs/components/prism-json")}catch{}}catch{ri.current=null}return ri.current},V_=e=>{const t=[{regex:/\b(import|from|export|const|let|var|return|if|else|for|while|switch|case|break|new|throw|try|catch|finally|class|extends|implements|interface|type|as|async|await|function)\b/g,cls:"kw"},{regex:/(['"`])(?:\\.|(?!\1).)*\1/g,cls:"str"},{regex:/\/\*[^]*?\*\/|\/\/.*$/gm,cls:"com"},{regex:/\b([0-9]+(?:\.[0-9]+)?)\b/g,cls:"num"}];let n=e;return t.forEach(r=>{n=n.replace(r.regex,i=>`<span class="nhsuk-code-${r.cls}">${i}</span>`)}),n},Ta=(e,t,n)=>{if(n||!t)return e;const r=W_();if(r&&r.languages){const i=r.languages[t]?t:r.languages.typescript&&(t==="ts"||t==="tsx"||t==="typescript")?"typescript":r.languages.json&&t==="json"?"json":void 0;if(i)try{return r.highlight(e,r.languages[i],i)}catch{}}return V_(e)},G_=({rows:e,head:t,caption:n,captionSize:r,firstCellIsHeader:i=!1,responsive:a=!1,heading:s,headingLevel:l=3,panel:u=!1,panelClasses:c,tableClasses:d,classes:f,attributes:p,"data-testid":g,columns:b,data:h,visuallyHiddenCaption:m=!1})=>{const y=`nhsuk-table__caption ${r?`nhsuk-table__caption--${r}`:""}`.trim(),k=xe("nhsuk-table",{"nhsuk-table-responsive":a},d),N=xe(f),S=(v,$)=>{const T=xe("nhsuk-table__header",{[`nhsuk-table__header--${v.format}`]:v.format},v.classes),w={scope:"col",...v.colspan&&{colSpan:v.colspan},...v.rowspan&&{rowSpan:v.rowspan},...a&&{role:"columnheader"},...v.attributes};let L;if(v.node!=null)L=o.jsx(o.Fragment,{children:v.node});else if(v.html)L=o.jsx("span",{dangerouslySetInnerHTML:{__html:v.html}});else if(v.code!=null){const P=Array.isArray(v.code),D=P?v.code.join(`
`):v.code,F=P||D.includes(`
`),A={className:xe("nhsuk-table__code",v.codeClassName,{"nhsuk-table__code--block":F,"nhsuk-table__code--inline":!F}),...v.codeLanguage?{"data-language":v.codeLanguage}:{}},ne=Ta(D,v.codeLanguage);L=F?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...A,dangerouslySetInnerHTML:{__html:ne}})}):o.jsx("code",{...A,dangerouslySetInnerHTML:{__html:ne}})}else L=v.text;return o.jsx("th",{className:T,...w,children:L},$)},x=(v,$,T)=>{const w=i&&T||v.rowHeader,L=xe(w?"nhsuk-table__header":"nhsuk-table__cell",{[`nhsuk-table__${w?"header":"cell"}--${v.format}`]:v.format},v.classes),P={...w&&{scope:"row"},...v.colspan&&{colSpan:v.colspan},...v.rowspan&&{rowSpan:v.rowspan},...a&&{role:w?"rowheader":"cell",...v.header&&{"data-label":v.header}},...v.attributes};let D;if(v.node!=null)D=o.jsx(o.Fragment,{children:v.node});else if(v.html)D=o.jsx("span",{dangerouslySetInnerHTML:{__html:v.html}});else if(v.code!=null){const ne=Array.isArray(v.code),q=ne?v.code.join(`
`):v.code,H=ne||q.includes(`
`),U={className:xe("nhsuk-table__code",v.codeClassName,{"nhsuk-table__code--block":H,"nhsuk-table__code--inline":!H}),...v.codeLanguage?{"data-language":v.codeLanguage}:{}},G=Ta(q,v.codeLanguage,v.disableHighlight);D=H?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...U,dangerouslySetInnerHTML:{__html:G}})}):o.jsx("code",{...U,dangerouslySetInnerHTML:{__html:G}})}else D=v.text;const F=o.jsxs(o.Fragment,{children:[a&&v.header&&o.jsxs("span",{className:"nhsuk-table-responsive__heading","aria-hidden":"true",children:[v.header," "]}),D]}),A=w?"th":"td";return o.jsx(A,{className:L,...P,children:F},$)};let M=t,j=e;!M&&b&&b.length&&(M=b.map(v=>({text:v.title,format:v.format,classes:v.headerClasses,attributes:v.headerAttributes}))),!j&&b&&h&&h.length&&(j=h.map((v,$)=>b.map(T=>{const w=T.accessor?T.accessor(v,$):v[T.key];let L={format:T.format,classes:T.cellClasses,attributes:T.cellAttributes};if(T.rowHeader&&(L.rowHeader=!0),T.render){const P=T.render(w,v,$,T);return P==null||typeof P=="boolean"?{...L,text:""}:typeof P=="string"||typeof P=="number"?{...L,text:String(P)}:{...L,...P}}return{...L,text:w!=null?String(w):""}})));const C=()=>o.jsxs("table",{className:k,...a&&{role:"table"},...p,...g&&{"data-testid":g},children:[n&&o.jsx("caption",{className:xe(y,m&&"nhsuk-u-visually-hidden"),children:n}),M&&M.length>0&&o.jsx("thead",{className:"nhsuk-table__head",...a&&{role:"rowgroup"},children:o.jsx("tr",{...a&&{role:"row"},children:M.map((v,$)=>S(v,$))})}),o.jsx("tbody",{className:"nhsuk-table__body",children:j&&j.map((v,$)=>o.jsx("tr",{className:"nhsuk-table__row",...a&&{role:"row"},children:v.map((T,w)=>x(T,w,w===0))},$))})]});return u?o.jsxs(Wu,{className:c,children:[s&&o.jsx(Zt,{level:l,className:"nhsuk-table__heading-tab",children:s}),C()]}):N?o.jsx("div",{className:N,children:C()}):C()},Y_=({children:e,size:t,className:n})=>{const r=xe("nhsuk-table__caption",t&&`nhsuk-table__caption--${t}`,n);return o.jsx("caption",{className:r,children:e})},Vu=({responsive:e,className:t,children:n,...r})=>{const i=e?{role:"row"}:{};return o.jsx("tr",{className:t,...i,...r,children:n})},Gu=({text:e,html:t,node:n,code:r,codeLanguage:i,codeClassName:a,disableHighlight:s,format:l,classes:u,colspan:c,rowspan:d,attributes:f,responsive:p,as:g="th"})=>{const b=xe("nhsuk-table__header",{[`nhsuk-table__header--${l}`]:l},u),h={scope:"col",...c&&{colSpan:c},...d&&{rowSpan:d},...p&&{role:"columnheader"},...f};let m;if(n!=null)m=o.jsx(o.Fragment,{children:n});else if(t)m=o.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const k=Array.isArray(r),N=k?r.join(`
`):r,S=k||N.includes(`
`),x={className:xe("nhsuk-table__code",a,{"nhsuk-table__code--block":S,"nhsuk-table__code--inline":!S}),...i?{"data-language":i}:{}},M=Ta(N,i,s);m=S?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...x,dangerouslySetInnerHTML:{__html:M}})}):o.jsx("code",{...x,dangerouslySetInnerHTML:{__html:M}})}else m=e;const y=g;return o.jsx(y,{className:b,...h,children:m})},q_=({text:e,html:t,node:n,code:r,codeLanguage:i,codeClassName:a,disableHighlight:s,format:l,classes:u,colspan:c,rowspan:d,attributes:f,responsive:p,rowHeader:g})=>{const b=!!g,h=b?"th":"td",m=xe(b?"nhsuk-table__header":"nhsuk-table__cell",l&&`nhsuk-table__${b?"header":"cell"}--${l}`,u),y={...c&&{colSpan:c},...d&&{rowSpan:d},...b&&{scope:"row"},...p&&{role:b?"rowheader":"cell"},...f};let k;if(n!=null)k=o.jsx(o.Fragment,{children:n});else if(t)k=o.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const N=Array.isArray(r),S=N?r.join(`
`):r,x=N||S.includes(`
`),M={className:xe("nhsuk-table__code",a,{"nhsuk-table__code--block":x,"nhsuk-table__code--inline":!x}),...i?{"data-language":i}:{}},j=Ta(S,i,s);k=x?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...M,dangerouslySetInnerHTML:{__html:j}})}):o.jsx("code",{...M,dangerouslySetInnerHTML:{__html:j}})}else k=e;return o.jsx(h,{className:m,...y,children:k})},en=G_;en.Caption=Y_,en.BodyRow=Vu,en.HeaderCell=Gu,en.Cell=q_;let Yu=!1,qu=!1;Object.defineProperty(en,"Row",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!Yu&&(console.warn("Table.Row is deprecated. Use Table.BodyRow instead."),Yu=!0),Vu}}),Object.defineProperty(en,"TH",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!qu&&(console.warn("Table.TH is deprecated. Use Table.HeaderCell instead."),qu=!0),Gu}});const X_=E.forwardRef(({items:e,defaultActiveTab:t,activeTab:n,onTabChange:r,onTabFocus:i,onTabListBlur:a,onEscape:s,autoActivate:l=!0,className:u,id:c,"data-testid":d,...f},p)=>{const g=n!==void 0,[b,h]=E.useState(()=>t||e[0]?.id||""),m=g?n:b,y=E.useRef(null),k=E.useRef(new Map),N=E.useCallback($=>{g||h($),r?.($)},[g,r]),S=E.useCallback($=>{i?.($),l&&N($)},[i,l,N]),x=E.useCallback(($,T)=>{const w=e.filter(D=>!D.disabled).map(D=>D.id),L=w.indexOf(T);let P=null;switch($.key){case"ArrowLeft":P=L>0?L-1:w.length-1;break;case"ArrowRight":P=L<w.length-1?L+1:0;break;case"Home":P=0;break;case"End":P=w.length-1;break;case"Escape":$.preventDefault(),s?.();return;default:return}if(P!==null){$.preventDefault();const D=w[P],F=k.current.get(D);F&&(F.focus(),S(D))}},[e,S,s]),M=E.useCallback(($,T)=>{T?k.current.set($,T):k.current.delete($)},[]),j=E.useCallback($=>{const T=k.current.get($);T&&T.focus()},[]);E.useImperativeHandle(p,()=>({focusTab:j,getActiveTab:()=>m,getTabListElement:()=>y.current}),[j,m]);const C=E.useCallback($=>{const T=$.relatedTarget;y.current?.contains(T)||a?.()},[a]),v=xe("nhsuk-tabs",u);return o.jsxs("div",{className:v,id:c,"data-testid":d,...f,children:[o.jsx("h2",{className:"nhsuk-tabs__title",children:"Contents"}),o.jsx("div",{className:"nhsuk-tabs__list-container",ref:y,children:o.jsx("ul",{className:"nhsuk-tabs__list",role:"tablist",onBlur:C,children:e.map($=>{const T=$.id===m,w=$.disabled,L=xe("nhsuk-tabs__list-item",{"nhsuk-tabs__list-item--selected":T,"nhsuk-tabs__list-item--disabled":w});return o.jsx("li",{className:L,role:"presentation",children:o.jsx("button",{ref:P=>M($.id,P),className:"nhsuk-tabs__tab",role:"tab","aria-selected":T,"aria-controls":`${$.id}-panel`,id:`${$.id}-tab`,tabIndex:T?0:-1,disabled:w,onClick:()=>!w&&N($.id),onKeyDown:P=>!w&&x(P,$.id),onFocus:()=>!w&&S($.id),...$.attributes,children:$.label})},$.id)})})}),e.map($=>{const T=$.id===m;return o.jsx("div",{className:"nhsuk-tabs__panel",role:"tabpanel","aria-labelledby":`${$.id}-tab`,id:`${$.id}-panel`,hidden:!T,children:$.content},$.id)})]})}),Xu=E.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:i=!1,className:a="",id:s,children:l,...u},c)=>{const d=["nhsuk-details",a].filter(Boolean).join(" "),f=t?o.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):o.jsx("span",{className:"nhsuk-details__summary-text",children:e});let p;return l?p=l:r?p=o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),o.jsxs("details",{ref:c,id:s,className:d,open:i,...u,children:[o.jsx("summary",{className:"nhsuk-details__summary",tabIndex:0,children:f}),o.jsx("div",{className:"nhsuk-details__text",children:p})]})});Xu.displayName="Details";const Ku=E.forwardRef(({title:e,type:t,items:n,hidePrefix:r=!1,headingLevel:i=3,className:a,...s},l)=>{const u=["nhsuk-do-dont-list"];a&&u.push(a);const c=["nhsuk-list",t==="tick"?"nhsuk-list--tick":"nhsuk-list--cross"],d=()=>t==="cross"?o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:[o.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),o.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]}):o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})}),f=g=>t==="cross"&&!r?`do not ${g}`:g,p=()=>o.jsx(Zt,{level:i,className:"nhsuk-do-dont-list__label",text:e});return o.jsxs("div",{ref:l,className:u.join(" "),...s,children:[p(),o.jsx("div",{className:"nhsuk-do-dont-list__content--feature",children:o.jsx("ul",{className:c.join(" "),role:"list",children:n.map((g,b)=>o.jsxs("li",{children:[d(),f(g.item)]},b))})})]})});Ku.displayName="DoDontList";const Ju=E.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:i=!1,className:a="",id:s,children:l,...u},c)=>{const d=["nhsuk-expander",a].filter(Boolean).join(" "),f=t?o.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):o.jsx("span",{className:"nhsuk-details__summary-text",children:e});let p;return l?p=l:r?p=o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),o.jsxs("details",{ref:c,id:s,className:d,open:i,...u,children:[o.jsx("summary",{className:"nhsuk-details__summary",children:f}),o.jsx("div",{className:"nhsuk-details__text",children:p})]})});Ju.displayName="Expander";const Zu=E.forwardRef(({items:e,idPrefix:t="task-list",className:n,...r},i)=>{const a=["nhsuk-task-list",n].filter(Boolean).join(" "),s=(l,u)=>{const c=u+1,d=`${t}-${c}-hint`,f=`${t}-${c}-status`,p=!!l.href,g=["nhsuk-task-list__item",p&&"nhsuk-task-list__item--with-link",l.classes].filter(Boolean).join(" "),b=[l.hint&&d,f].filter(Boolean).join(" ");return o.jsx(K_,{item:l,itemClasses:g,hasLink:p,hintId:d,statusId:f,ariaDescribedBy:b},u)};return o.jsx("ul",{ref:i,className:a,...r,children:e.map(s)})}),K_=({item:e,itemClasses:t,hasLink:n,hintId:r,statusId:i,ariaDescribedBy:a})=>{const s=()=>{const c=e.title.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:e.title.html}}):e.title.text,d=[n?"nhsuk-task-list__link":"",e.title.classes].filter(Boolean).join(" ");return n?o.jsx("a",{className:d,href:e.href,"aria-describedby":a,children:c}):o.jsx("div",{className:e.title.classes||"",children:c})},l=()=>e.hint?e.hint.html?o.jsx("div",{id:r,className:"nhsuk-task-list__hint",dangerouslySetInnerHTML:{__html:e.hint.html}}):o.jsx("div",{id:r,className:"nhsuk-task-list__hint",children:e.hint.text}):null,u=()=>{const c=["nhsuk-task-list__status",e.status.classes].filter(Boolean).join(" ");let d;return e.status.tag?d=o.jsx(Re,{...e.status.tag}):e.status.html?d=o.jsx("span",{dangerouslySetInnerHTML:{__html:e.status.html}}):d=e.status.text,o.jsx("div",{className:c,id:i,children:d})};return o.jsxs("li",{className:t,children:[o.jsxs("div",{className:"nhsuk-task-list__name-and-hint",children:[s(),l()]}),u()]})};Zu.displayName="TaskList";const J_=({heading:e,headingLevel:t=3,text:n,html:r,children:i,className:a,...s})=>{const l=/important/i.test(e),u=()=>i||(r?o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n?o.jsx("p",{children:n}):null),c=["nhsuk-warning-callout",a].filter(Boolean).join(" "),d=`h${t}`;return o.jsxs("div",{className:c,...s,children:[E.createElement(d,{className:"nhsuk-warning-callout__label"},l?o.jsxs(o.Fragment,{children:[e,o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"})]}):o.jsxs("span",{role:"text",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Important: "}),e]})),u()]})},Z_=({src:e,alt:t,caption:n,sizes:r,srcset:i,className:a,...s})=>{const l=["nhsuk-image",a].filter(Boolean).join(" ");return o.jsxs("figure",{className:l,...s,children:[o.jsx("img",{className:"nhsuk-image__img",src:e,alt:t,...r&&i?{sizes:r,srcSet:i}:{}}),n&&o.jsx("figcaption",{className:"nhsuk-image__caption",dangerouslySetInnerHTML:{__html:n}})]})},Q_=({dateRange:e,onPrev:t,onNext:n,onToday:r,density:i,onDensityChange:a,a11yMode:s,onA11yModeChange:l})=>o.jsxs("div",{className:"nhs-slot-matrix__toolbar",role:"group","aria-label":"Slot matrix controls",children:[o.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[o.jsx(ft,{variant:"secondary",size:"small",onClick:t,"aria-label":"Previous date range",children:"Prev"}),o.jsx(ft,{variant:"secondary",size:"small",onClick:r,"aria-label":"Jump to today",children:"Today"}),o.jsx(ft,{variant:"secondary",size:"small",onClick:n,"aria-label":"Next date range",children:"Next"}),o.jsxs("span",{className:"nhs-slot-matrix__toolbar-daterange","aria-live":"polite",children:[e.start.toDateString()," â€“ ",e.end.toDateString()]})]}),o.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[o.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-density-select",children:"Density"}),o.jsx(Yr,{id:"slot-matrix-density-select",name:"slot-matrix-density",ariaLabel:"Change density",value:i,onChange:u=>a?.(u.target.value),options:[{value:"comfortable",text:"Comfortable"},{value:"compact",text:"Compact"}]}),o.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-mode-select",children:"Mode"}),o.jsx(Yr,{id:"slot-matrix-mode-select",name:"slot-matrix-mode",ariaLabel:"Change accessibility mode",value:s,onChange:u=>l?.(u.target.value),options:[{value:"grid",text:"Grid"},{value:"list",text:"List"}]})]})]}),ev=({items:e,orientation:t="horizontal"})=>o.jsx("div",{className:`nhs-slot-matrix__legend nhs-slot-matrix__legend--${t}`,role:"list","aria-label":"Slot legend",children:e.map(n=>o.jsx("div",{role:"listitem",className:"nhs-slot-matrix__legend-item",children:o.jsx(Re,{color:tv(n.status),text:n.label})},n.status))});function tv(e){switch(e){case"available":return"green";case"full":return"grey";case"overbook":return"orange";case"held":return"yellow";case"blocked":return"grey";default:return"default"}}const nv=({slots:e,sessions:t,value:n,defaultValue:r,onChange:i,selectionMode:a="single",a11yMode:s,className:l,style:u,getSlotAriaLabel:c,toolbar:d,enableDefaultToolbar:f=!0,legendItems:p,enableDefaultLegend:g=!0,legendPlacement:b="bottom",onA11yModeChange:h})=>{const[m,y]=E.useState("grid"),k=s||m,[N,S]=E.useState(r||[]),x=n??N,M=E.useMemo(()=>{const P=new Set;return e.forEach(D=>P.add(new Date(D.start).getTime())),Array.from(P).sort((D,F)=>D-F)},[e]),j=E.useMemo(()=>{const P={};return e.forEach(D=>{const F=new Date(D.start).getTime();P[F]||(P[F]={});const A=D.capacity-D.booked-(D.held||0);P[F][D.sessionId]={slot:D,remaining:A}}),P},[e]),C=E.useCallback(P=>{if(a==="single"){const D=[P.id];n||S(D),i?.(D,{lastAction:"select"})}else{const D=x.includes(P.id),F=D?x.filter(A=>A!==P.id):[...x,P.id];n||S(F),i?.(F,{lastAction:D?"deselect":"select"})}},[a,x,n,i]),v=E.useMemo(()=>p||(g?Array.from(new Set(e.map(D=>D.status))).map(D=>({status:D,label:D.charAt(0).toUpperCase()+D.slice(1)})):void 0),[p,g,e]),$=v?o.jsx(ev,{items:v,orientation:b==="left"||b==="right"?"vertical":"horizontal"}):null,T=P=>{s||y(P),h?.(P)},w=d||(f?o.jsx(Q_,{dateRange:{start:new Date,end:new Date},density:"comfortable",a11yMode:k,onA11yModeChange:T}):null),L=o.jsx("div",{style:u,className:xe(l),children:o.jsx(oa,{className:xe("nhs-slot-matrix-grid-wrapper"),children:o.jsx(Fn,{children:o.jsx(br,{width:$n.Full,children:o.jsxs("div",{className:"nhs-slot-matrix",children:[w,b==="top"&&$,o.jsx("ul",{"aria-label":"Appointment slots list",children:e.map(P=>o.jsx("li",{children:o.jsxs("button",{type:"button",onClick:()=>C(P),"aria-pressed":x.includes(P.id),children:[ii(new Date(P.start))," â€“ ",ii(new Date(P.end))," (",P.status,")"]})},P.id))}),b==="bottom"&&$]})})})})});return k==="list"?L:o.jsx("div",{style:u,className:xe(l),children:o.jsx(oa,{className:xe("nhs-slot-matrix-grid-wrapper"),children:o.jsx(Fn,{children:o.jsx(br,{width:$n.Full,children:o.jsxs("div",{className:"nhs-slot-matrix",children:[w,b==="top"&&$,o.jsxs("div",{role:"grid","aria-rowcount":M.length+1,"aria-colcount":t.length+1,children:[o.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[o.jsx("div",{role:"columnheader","aria-label":"Timebands",className:"nhs-slot-matrix__timeband-header"}),t.map(P=>o.jsx("div",{role:"columnheader","aria-label":`Session ${P.specialty}`,className:"nhs-slot-matrix__session-header",children:P.specialty},P.id))]}),M.map(P=>o.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[o.jsx("div",{role:"rowheader",className:"nhs-slot-matrix__timeband-header","aria-label":ii(new Date(P)),children:ii(new Date(P))}),t.map(D=>{const F=j[P]?.[D.id];if(!F)return o.jsx("div",{role:"gridcell",className:"nhs-slot-matrix__cell","aria-disabled":"true"},D.id);const{slot:A,remaining:ne}=F,q=x.includes(A.id),H=c?c(A):`Slot ${ii(new Date(A.start))} ${A.status}${ne===0?" full":""}`;return o.jsx("button",{type:"button",role:"gridcell","data-status":A.status,className:xe("nhs-slot-matrix__cell",q&&"nhs-slot-matrix__cell--selected"),"aria-label":H,"aria-selected":q||void 0,onClick:()=>C(A),children:ne>0?`${ne} left`:"Full"},A.id)})]},P))]}),b==="bottom"&&$]})})})})})};function Qu(e){return e<10?`0${e}`:`${e}`}function ii(e){return`${Qu(e.getHours())}:${Qu(e.getMinutes())}`}const ed=({title:e,value:t,subtitle:n,variant:r="default",href:i,className:a="",ariaLabel:s,...l})=>{const u=["nhs-fdp-summary-card",`nhs-fdp-summary-card--${r}`,a].filter(Boolean).join(" "),c=o.jsxs(o.Fragment,{children:[o.jsx(Zt,{level:3,className:"nhs-fdp-summary-card__title",children:e}),o.jsx("p",{className:"nhs-fdp-summary-card__value",children:t}),n&&o.jsx("p",{className:"nhs-fdp-summary-card__subtitle",children:n})]});return i?o.jsx("a",{className:`${u} nhs-fdp-summary-card--clickable`,href:i,"aria-label":s||`${e}: ${t}`,...l,children:c}):o.jsx("div",{className:u,"aria-label":s,...l,children:c})},rv=({cards:e,className:t="",...n})=>{const r=["nhs-fdp-dashboard-summary-grid",t].filter(Boolean).join(" ");return o.jsx("div",{className:r,...n,children:o.jsx(oa,{children:o.jsx(Fn,{children:e.map((i,a)=>o.jsx(br,{width:$n.OneQuarter,className:"nhs-fdp-dashboard-summary-grid__column","data-card-index":a,children:o.jsx(ed,{...i})},a))})})})},td=E.forwardRef(({data:e,columns:t,sortConfig:n,onSort:r,selectedRowIndex:i,onRowSelect:a,id:s,testId:l,ariaLabel:u,ariaLabelledby:c,ariaDescribedby:d,className:f,tableClassName:p,bordered:g=!1,striped:b=!1,responsive:h=!1,tableType:m="default"},y)=>{const k=E.useRef(null),N=E.useRef(null),S=E.useRef(null);E.useImperativeHandle(y,()=>k.current,[]);const[x,M]=E.useState(0),[j,C]=E.useState(0),[v,$]=E.useState("headers"),[T,w]=E.useState("browse"),L=t.length,P=e.length,D=E.useMemo(()=>!n||n.length===0?e:[...e].sort((G,oe)=>{for(const{key:z,direction:pe}of n){const we=G[z],fe=oe[z];if(we==null&&fe==null)continue;if(we==null)return 1;if(fe==null)return-1;let de=0;if(typeof we=="number"&&typeof fe=="number"?de=we-fe:de=String(we).localeCompare(String(fe)),de!==0)return pe==="asc"?de:-de}return 0}),[e,n]),F=E.useCallback((G,oe)=>{setTimeout(()=>{const z=k.current?.querySelector(`tbody tr:nth-child(${G+1}) td:nth-child(${oe+1})`);z&&(z.focus(),typeof z.scrollIntoView=="function"&&z.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),A=E.useCallback(G=>{setTimeout(()=>{const oe=k.current?.querySelector(`th:nth-child(${G+1})`);oe&&(oe.focus(),typeof oe.scrollIntoView=="function"&&oe.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),ne=E.useCallback(G=>{r?.(G)},[r]),q=E.useCallback(G=>{a?.(G)},[a]),H=E.useCallback(G=>{const{key:oe}=G;switch(oe){case"Enter":if(G.preventDefault(),v==="headers"&&T==="browse")w("navigate"),A(j);else if(v==="headers"&&T==="navigate"){const z=t[j];z&&ne(z.key)}else v==="cells"&&T==="browse"?(w("navigate"),F(x,j)):v==="cells"&&T==="navigate"&&q(x);break;case"Escape":G.preventDefault(),(v==="headers"&&T==="navigate"||v==="cells"&&T==="navigate")&&w("browse");break;case"ArrowLeft":if(G.preventDefault(),T==="navigate"||T==="browse"&&v==="headers"){if(v==="headers"){const z=Math.max(0,j-1);C(z),A(z)}else if(v==="cells"){const z=Math.max(0,j-1);C(z),F(x,z)}}break;case"ArrowRight":if(G.preventDefault(),T==="navigate"||T==="browse"&&v==="headers"){if(v==="headers"){const z=Math.min(L-1,j+1);C(z),A(z)}else if(v==="cells"){const z=Math.min(L-1,j+1);C(z),F(x,z)}}break;case"ArrowUp":if(G.preventDefault(),v==="cells"){if(T==="browse"){const z=Math.max(0,x-1);M(z),F(z,0),C(0)}else if(T==="navigate")if(x>0){const z=x-1;M(z),F(z,j)}else $("headers"),w("browse"),A(j)}break;case"ArrowDown":if(G.preventDefault(),v==="headers"&&T==="browse")$("cells"),M(0),C(0),F(0,0);else if(v==="cells"){const z=P-1;if(T==="browse"){const pe=Math.min(z,x+1);M(pe),F(pe,0),C(0)}else if(T==="navigate"&&x<z){const pe=x+1;M(pe),F(pe,j)}}break;case"Home":G.preventDefault(),v==="headers"?(C(0),A(0)):v==="cells"&&(G.ctrlKey?(M(0),C(0),F(0,0)):(C(0),F(x,0)));break;case"End":if(G.preventDefault(),v==="headers"){const z=L-1;C(z),A(z)}else if(v==="cells")if(G.ctrlKey){const z=P-1,pe=L-1;M(z),C(pe),F(z,pe)}else{const z=L-1;C(z),F(x,z)}break;case" ":if(G.preventDefault(),v==="headers"&&T==="navigate"){const z=t[j];z&&ne(z.key)}else v==="cells"&&T==="navigate"&&q(x);break}},[v,T,j,x,L,P,t,F,A,ne,q]);E.useEffect(()=>{const G=k.current;if(G)return G.addEventListener("keydown",H),()=>G.removeEventListener("keydown",H)},[H]);const U=xe("nhsuk-table",p,{"nhsuk-table--responsive":h,"nhsuk-table--bordered":g,"nhsuk-table--striped":b,"nhsuk-table--compact":m==="compact"},f);return o.jsxs("table",{ref:k,className:U,id:s,"data-testid":l,role:"grid","aria-label":u,"aria-labelledby":c,"aria-describedby":d,tabIndex:0,children:[o.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:o.jsx("tr",{ref:N,role:"row",children:t.map((G,oe)=>{const z=n?.find(fe=>fe.key===G.key),pe=!!z,we=v==="headers"&&j===oe;return o.jsx("th",{className:xe("sortable-header",{"sortable-header--focused":we}),role:"columnheader",tabIndex:we?0:-1,onClick:()=>ne(G.key),onKeyDown:fe=>{(fe.key==="Enter"||fe.key===" ")&&(fe.preventDefault(),ne(G.key))},"aria-sort":pe?z?.direction==="asc"?"ascending":"descending":"none",children:o.jsxs("div",{className:"header-content",children:[o.jsx("span",{className:"header-label",children:G.label}),pe&&o.jsxs("span",{className:"sort-indicator","aria-hidden":"true",children:[n&&n.length>1&&o.jsx("span",{className:"sort-priority",children:n.findIndex(fe=>fe.key===G.key)+1}),o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",className:"sort-arrow",children:z?.direction==="asc"?o.jsx("path",{d:"M6 2L2 8h8L6 2z"}):o.jsx("path",{d:"M6 10L2 4h8L6 10z"})})]})]})},G.key)})})}),o.jsx("tbody",{ref:S,className:"nhsuk-table__body",role:"rowgroup",children:D.map((G,oe)=>{const z=i===oe,pe=v==="cells"&&x===oe;return o.jsx("tr",{role:"row",className:xe("data-row",{"data-row--selected":z,"data-row--focused":pe}),"aria-selected":z,children:t.map((we,fe)=>{const de=we.tableRenderer?we.tableRenderer(G):we.render?we.render(G):G[we.key],Z=v==="cells"&&x===oe&&j===fe,se=()=>typeof de=="boolean"?o.jsxs(o.Fragment,{children:[o.jsx("span",{"aria-hidden":"true",children:de?"âœ“":"âœ—"}),o.jsx("span",{className:"sr-only",children:de?"Yes":"No"})]}):String(de??"");return o.jsx("td",{role:"gridcell",className:xe("data-cell",{"data-cell--focused":Z}),tabIndex:Z?0:-1,onClick:()=>q(oe),children:se()},we.key)})},oe)})})]})});td.displayName="AriaDataGrid";const nd=({sortConfig:e,columns:t,onSortChange:n,className:r="",emptyDescription:i="No sorting applied",activeDescription:a,showReset:s=!0,showHelp:l=!0,disabled:u=!1,ariaLabel:c="Sort configuration",ariaDescribedBy:d})=>{const f=E.useRef(null),p=E.useRef(null),g=E.useRef(null),b=E.useCallback((v,$)=>{u||(p.current=$,v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/plain",$))},[u]),h=E.useCallback((v,$)=>{u||p.current===$||(v.preventDefault(),v.dataTransfer.dropEffect="move",g.current=$)},[u]),m=E.useCallback((v,$)=>{if(u)return;v.preventDefault();const T=p.current;if(!T||T===$)return;const w=e.findIndex(P=>P.key===T),L=e.findIndex(P=>P.key===$);if(w!==-1&&L!==-1){const P=[...e],[D]=P.splice(w,1);P.splice(L,0,D),n(P)}p.current=null,g.current=null},[u,e,n]),y=E.useCallback(()=>{p.current=null,g.current=null},[]),k=E.useCallback(v=>{const $=t.find(T=>T.key===v);return $?$.label:v},[t]),N=E.useCallback(v=>["red","orange","blue","aqua-green","grey"][v]||"grey",[]),S=E.useCallback(v=>{if(u)return;const $=e.map(T=>T.key===v?{...T,direction:T.direction==="asc"?"desc":"asc"}:T);n($)},[e,n,u]),x=E.useCallback(v=>{if(u)return;const $=e.filter(T=>T.key!==v);n($)},[e,n,u]),M=E.useCallback(()=>{u||n([])},[n,u]),j=()=>{if(e.length===0)return i;if(a)return a;const v=e.map(($,T)=>{const w=$.direction==="asc"?"ascending":"descending";return`${T+1}. ${k($.key)} (${w})`});if(v.length===1)return`Sorted by: ${v[0]}`;if(v.length===2)return`Sorted by: ${v.join(" and ")}`;{const $=v.pop();return`Sorted by: ${v.join(", ")}, and ${$}`}},C=E.useMemo(()=>{const v=["sort-description"];return l&&v.push("sort-help"),d&&v.push(d),v.join(" ")},[l,d]);return e.length===0?o.jsxs("div",{className:`sort-status-control ${r}`,children:[o.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:i}),l&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]}):o.jsxs("div",{className:`sort-status-control ${r}`,children:[o.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:j()}),o.jsxs("div",{className:"sort-status-container",children:[o.jsx("div",{ref:f,className:"sort-status-control__tags",role:"list","aria-label":c,"aria-describedby":C,children:e.map((v,$)=>o.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",draggable:!u,onDragStart:T=>b(T,v.key),onDragOver:T=>h(T,v.key),onDrop:T=>m(T,v.key),onDragEnd:y,onClick:()=>S(v.key),style:{cursor:u?"default":"pointer"},title:u?"":`Click to toggle sort direction. Currently ${v.direction==="asc"?"ascending":"descending"}`,"data-key":v.key,children:o.jsx(Re,{color:N($),className:"sort-status-control__tag",closable:!0,onClose:()=>x(v.key),disabled:u,children:o.jsxs("div",{className:"sort-status-control__tag-content",children:[o.jsx("div",{className:"sort-status-control__drag-handle",title:"Drag to reorder",children:"â‹®â‹®"}),o.jsx("div",{className:`sort-status-control__priority-badge sort-priority sort-priority--priority-${$+1}`,children:$+1}),o.jsx("span",{className:"sort-status-control__tag-label",children:k(v.key)}),o.jsx("button",{type:"button",className:"sort-status-control__direction-button",onClick:T=>{T.stopPropagation(),S(v.key)},disabled:u,"aria-label":`Toggle sort direction for ${k(v.key)}. Currently ${v.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:o.jsx("span",{className:`sort-status-control__direction-icon sort-status-control__direction-icon--${v.direction}`,children:o.jsx("svg",{className:`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${v.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})})})]})})},v.key))}),s&&o.jsx("div",{className:"sort-status-control__actions",children:o.jsx(ft,{variant:"secondary",onClick:M,disabled:u,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})})]}),l&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]})};function iv(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const i=[...e.selectedRows];return i[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:i};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:a}=t.payload,s=new Array(a).fill(!1),l=new Array(a).fill(null),u=new Array(a).fill([]);for(let c=0;c<Math.min(e.tabLoadingStates.length,a);c++)s[c]=e.tabLoadingStates[c],l[c]=e.tabErrors[c],u[c]=e.selectedRows[c];return{...e,tabLoadingStates:s,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}const Na=E.forwardRef(function(t,n){const{dataConfig:r={},tabPanels:i,selectedIndex:a,onTabChange:s,onGlobalRowSelectionChange:l,ariaLabel:u,ariaDescription:c,className:d="",disabled:f=!1,orientation:p="horizontal",id:g,isLoading:b=!1,loadingComponent:h,error:m=null,errorComponent:y,"data-testid":k,actions:N,actionsMinGap:S=16,forceActionsAbove:x=!1}=t,j=E.useRef(g||`aria-tabs-datagrid-${Math.random().toString(36).slice(2,9)}`).current,C=typeof c=="string"&&c.trim()!==""&&!/\s/.test(c),v=`${j}-description`,$=`${j}-navigation-help`,{dataComparator:T=(B,Q)=>JSON.stringify(B)===JSON.stringify(Q),filterFunction:w=B=>B,booleanRenderer:L=B=>B?"âœ“":"âœ—"}=r||{},P=a!==void 0,D=a??0,[F,A]=E.useState({focusArea:"tabs",focusedTabIndex:D,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}),ne=E.useMemo(()=>({selectedIndex:D,tabLoadingStates:new Array(i.length).fill(!1),tabErrors:new Array(i.length).fill(null),sortConfig:[],selectedRows:new Array(i.length).fill([]),globalSelectedRowData:null,filters:void 0}),[D]),[q,H]=E.useReducer(iv,ne);E.useEffect(()=>{const B=q.tabLoadingStates.length,Q=i.length;B!==Q&&H({type:"ADJUST_ARRAYS",payload:{newLength:Q}})},[i.length]),E.useEffect(()=>{P&&H({type:"SET_SELECTED_INDEX",payload:D})},[D,P]),E.useEffect(()=>{A(B=>({...B,focusArea:"tabs",focusedTabIndex:q.selectedIndex,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}))},[q.selectedIndex]),E.useEffect(()=>{l&&l(q.globalSelectedRowData)},[q.globalSelectedRowData,l]);const U=E.useCallback((B,Q)=>T(B,Q),[T]),G=E.useCallback(B=>{B>=0&&B<i.length&&!i[B].disabled&&(H({type:"SET_SELECTED_INDEX",payload:B}),A(Q=>({...Q,focusedTabIndex:B,focusArea:"tabs"})),s?.(B))},[i,s]),oe=E.useRef(!1),z=E.useCallback((B,Q)=>{if(!Q?.force&&!oe.current&&B===0){oe.current=!0;return}oe.current=!0,setTimeout(()=>{const re=pe.current[B],ie=re?.parentElement;if(re&&ie){const W=re.offsetLeft,J=re.offsetWidth,ue=ie.clientWidth,ge=W-ue/2+J/2;try{ie.scrollTo({left:Math.max(0,ge),behavior:"smooth"})}catch{re.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}}else process.env.SILENCE_SCROLL_DEBUG||console.debug("[AriaTabsDataGrid] Missing elements for scroll",{tabElementExists:!!re,tabListElementExists:!!ie})},50)},[]),pe=E.useRef([]),we=E.useRef([]),fe=E.useCallback((B,Q)=>{const re=q.sortConfig||[],ie=re.find(ue=>ue.key===Q);let W;ie?ie.direction==="asc"?W=re.map(ue=>ue.key===Q?{...ue,direction:"desc"}:ue):W=re.filter(ue=>ue.key!==Q):W=[...re,{key:Q,direction:"asc"}],H({type:"SET_SORT",payload:W}),i[B].onSort?.(Q)},[q.sortConfig,i]),de=E.useCallback(B=>{setTimeout(()=>{const Q=document.querySelector(`[data-tab-panel="${q.selectedIndex}"] th:nth-child(${B+1})`);Q&&Q.focus()},0)},[q.selectedIndex]),Z=E.useCallback(B=>L(B),[L]),se=E.useCallback((B,Q)=>{setTimeout(()=>{const re=document.querySelector(`[data-tab-panel="${q.selectedIndex}"] tbody tr:nth-child(${B+1}) td:nth-child(${Q+1})`);re&&re.focus()},0)},[q.selectedIndex]);E.useEffect(()=>{F.isGridActive&&(F.focusArea==="headers"?setTimeout(()=>{de(F.focusedHeaderIndex)},0):F.focusArea==="cells"&&setTimeout(()=>{se(F.focusedRowIndex,F.focusedColumnIndex)},0))},[F.focusArea,F.isGridActive,F.focusedHeaderIndex,F.focusedRowIndex,F.focusedColumnIndex,de,se]),E.useEffect(()=>{z(q.selectedIndex)},[q.selectedIndex,z]);const he=E.useCallback((B,Q)=>{const{key:re}=B,ie=i[q.selectedIndex],W=ie?.columns.length||0;switch(re){case"ArrowLeft":B.preventDefault();const J=Math.max(0,Q-1);A(Te=>({...Te,focusedHeaderIndex:J})),de(J);break;case"ArrowRight":B.preventDefault();const ue=Math.min(W-1,Q+1);A(Te=>({...Te,focusedHeaderIndex:ue})),de(ue);break;case"ArrowUp":B.preventDefault(),A(Te=>({...Te,focusArea:"tabs",focusedTabIndex:q.selectedIndex})),z(q.selectedIndex),pe.current[q.selectedIndex]?.focus();break;case"ArrowDown":B.preventDefault(),A(Te=>({...Te,focusArea:"cells",focusedRowIndex:0,focusedColumnIndex:Q,isGridActive:!0}));break;case"Home":B.preventDefault(),A(Te=>({...Te,focusedHeaderIndex:0})),de(0);break;case"End":B.preventDefault();const ge=W-1;A(Te=>({...Te,focusedHeaderIndex:ge})),de(ge);break;case"Enter":case" ":B.preventDefault();const ce=ie?.columns[Q]?.key;ce&&fe(q.selectedIndex,ce);break}},[i,q.selectedIndex,fe,A,de,se,pe]),I=E.useCallback((B,Q,re)=>{const{key:ie}=B,W=i[q.selectedIndex],J=W?.data.length||0,ue=W?.columns.length||0;switch(ie){case"ArrowUp":if(B.preventDefault(),Q===0)A(be=>({...be,focusArea:"headers",focusedHeaderIndex:re,isGridActive:!1})),de(re);else{const be=Q-1;A(Ie=>({...Ie,focusedRowIndex:be})),se(be,re)}break;case"ArrowDown":B.preventDefault();const ge=Math.min(J-1,Q+1);A(be=>({...be,focusedRowIndex:ge})),se(ge,re);break;case"ArrowLeft":B.preventDefault();const ce=Math.max(0,re-1);A(be=>({...be,focusedColumnIndex:ce})),se(Q,ce);break;case"ArrowRight":B.preventDefault();const Te=Math.min(ue-1,re+1);A(be=>({...be,focusedColumnIndex:Te})),se(Q,Te);break;case"Home":B.preventDefault(),B.ctrlKey?(A(be=>({...be,focusedRowIndex:0,focusedColumnIndex:0})),se(0,0)):(A(be=>({...be,focusedColumnIndex:0})),se(Q,0));break;case"End":if(B.preventDefault(),B.ctrlKey){const be=J-1,Ie=ue-1;A(Ae=>({...Ae,focusedRowIndex:be,focusedColumnIndex:Ie})),se(be,Ie)}else{const be=ue-1;A(Ie=>({...Ie,focusedColumnIndex:be})),se(Q,be)}break;case"Enter":case" ":if(B.preventDefault(),W&&W.data[Q]){const be=W.data.some(We=>"ews_data"in We)?w(W.data,q.filters):W.data,Ie=q.sortConfig;let Ae=be;if(Ie&&Ie.length>0&&(Ae=[...be].sort((We,$e)=>{for(const{key:at,direction:Dt}of Ie){let Qe=We[at],ct=$e[at];const dt=W.columns.find(ea=>ea.key===at);if(dt?.tableRenderer?(Qe=dt.tableRenderer(We),ct=dt.tableRenderer($e)):dt?.render&&(Qe=dt.render(We),ct=dt.render($e)),Qe==null&&ct==null)continue;if(Qe==null)return Dt==="asc"?-1:1;if(ct==null)return Dt==="asc"?1:-1;let bt=0;if(typeof Qe=="number"&&typeof ct=="number"?bt=Qe-ct:bt=String(Qe).localeCompare(String(ct),void 0,{numeric:!0,sensitivity:"base"}),bt!==0)return Dt==="asc"?bt:-bt}return 0})),Ae[Q]){const We=Ae[Q],at=q.globalSelectedRowData&&U(q.globalSelectedRowData,We)?null:We;H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:at})}}break}},[i,q.selectedIndex,q.filters,q.sortConfig,w,U,H,A,de,se]),O=E.useCallback((B,Q)=>w(B,Q),[w]);if(E.useImperativeHandle(n,()=>({selectTab:B=>{B>=0&&B<i.length&&(H({type:"SET_SELECTED_INDEX",payload:B}),s?.(B))},refreshData:B=>{console.log("Refreshing data for tab:",B??"all")},exportData:B=>{const Q=B??q.selectedIndex,re=i[Q];return re?re.data:[]},getSelectedRows:B=>q.globalSelectedRowData?[]:[],clearSelection:B=>{H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:null})},applyFilters:B=>{H({type:"SET_FILTERS",payload:B})}}),[q.selectedIndex,q.selectedRows,i,s]),b)return o.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--loading ${d}`,"data-testid":k,children:h||o.jsx("div",{className:"aria-tabs-datagrid__loading",children:o.jsx("div",{className:"nhsuk-spinner",role:"status","aria-label":"Loading data",children:o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Loading..."})})})});if(m)return o.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--error ${d}`,"data-testid":k,children:y||o.jsxs("div",{className:"aria-tabs-datagrid__error",role:"alert",children:[o.jsx("h3",{className:"nhsuk-error-summary__title",children:"Error loading data"}),o.jsx("p",{children:m})]})});const V=E.useRef(null),ae=E.useRef(null),ee=E.useRef(null),[le,_e]=E.useState(!0);E.useEffect(()=>{if(!N){_e(!1);return}if(x){_e(!1);return}function B(){if(!V.current||!ae.current||!ee.current)return;const ie=V.current.clientWidth,W=Array.from(ae.current.querySelectorAll(":scope > .aria-tabs-datagrid__tab")),J=W.reduce((Te,be)=>Te+be.offsetWidth,0),ue=ee.current.offsetWidth,ge=Math.max(8*(W.length-1),0),ce=J+ge+ue+S<=ie;_e(ce)}const Q=requestAnimationFrame(()=>B()),re=new ResizeObserver(()=>B());return V.current&&re.observe(V.current),ae.current&&re.observe(ae.current),()=>{cancelAnimationFrame(Q),re.disconnect()}},[N,S,x,i.length]);const Se=ee,me=E.useCallback(()=>Se.current?Array.from(Se.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(B=>!B.hasAttribute("disabled")):[],[]),R=E.useCallback(B=>{const Q=me();if(!Q.length)return;const re=Math.max(0,Math.min(B,Q.length-1));Q[re].focus(),A(ie=>({...ie,focusArea:"actions",focusedActionIndex:re}))},[me]),Y=E.useCallback(()=>R(0),[R]),K=E.useCallback((B,Q)=>{const{key:re}=B,ie=i.length-1;switch(re){case"ArrowUp":{N&&!le&&(B.preventDefault(),Y());break}case"ArrowLeft":{B.preventDefault();const W=Q>0?Q-1:ie;G(W),z(W),pe.current[W]?.focus();break}case"ArrowRight":{if(B.preventDefault(),Q===ie&&N&&le){Y();return}const W=Q<ie?Q+1:0;G(W),z(W),pe.current[W]?.focus();break}case"ArrowDown":{B.preventDefault(),A(W=>({...W,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));break}case"Home":{B.preventDefault(),G(0),z(0),pe.current[0]?.focus();break}case"End":{B.preventDefault(),G(ie),z(ie),pe.current[ie]?.focus();break}case"Enter":case" ":{B.preventDefault(),G(Q);break}case"Tab":{!B.shiftKey&&Q===ie&&N&&le&&Y();break}}},[i.length,G,z,N,le,Y]),te=E.useCallback(B=>{const{key:Q}=B,re=me();if(!re.length)return;const ie=re.findIndex(W=>W===document.activeElement);switch(Q){case"ArrowLeft":{if(le)if(ie>0)B.preventDefault(),R(ie-1);else{B.preventDefault();const W=i.length-1;G(W),z(W),pe.current[W]?.focus(),A(J=>({...J,focusArea:"tabs",focusedTabIndex:W}))}break}case"ArrowRight":{le&&(ie<re.length-1?(B.preventDefault(),R(ie+1)):(B.preventDefault(),G(0),z(0),pe.current[0]?.focus(),A(W=>({...W,focusArea:"tabs",focusedTabIndex:0}))));break}case"ArrowDown":{if(le)B.preventDefault(),A(W=>({...W,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));else{B.preventDefault();const W=q.selectedIndex;pe.current[W]?.focus(),A(J=>({...J,focusArea:"tabs",focusedTabIndex:W}))}break}}},[me,le,R,i.length,G,z,q.selectedIndex]);return o.jsxs("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--${p} ${d}`,id:g,"data-testid":k,ref:V,children:[c&&!C&&o.jsx("div",{id:v,className:"nhsuk-u-visually-hidden",children:c}),o.jsx("div",{className:"aria-tabs-datagrid__navigation-help sr-only",id:$,children:"Keyboard navigation: Use Tab to move between tabs and grid. Arrow keys navigate within tabs and grid cells. Enter activates tabs and sorts columns. Arrow Down from tabs moves to table headers. Arrow Down from headers moves to table cells. Use Arrow keys to navigate between cells."}),o.jsx(nd,{sortConfig:q.sortConfig||[],columns:i.flatMap(B=>B.columns.map(Q=>({key:Q.key,label:Q.label}))).filter((B,Q,re)=>re.findIndex(ie=>ie.key===B.key)===Q),onSortChange:B=>{H({type:"SET_SORT",payload:B})},ariaLabel:"Data grid sort configuration"}),N&&!le&&o.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above",ref:ee,role:"toolbar","aria-label":"Additional actions",onKeyDown:te,children:N}),o.jsxs("div",{className:`aria-tabs-datagrid__tabs-wrapper ${le?"aria-tabs-datagrid__tabs-wrapper--inline-actions":""}`,children:[o.jsx("div",{role:"tablist","aria-label":u,"aria-describedby":c?C?c:v:$,"aria-orientation":p,className:"aria-tabs-datagrid__tabs",ref:ae,children:i.map((B,Q)=>{const re=Q===q.selectedIndex,ie=B.disabled||f;return o.jsxs("button",{role:"tab",id:`tab-${B.id}`,"aria-controls":`panel-${B.id}`,"aria-selected":re,"aria-disabled":ie,tabIndex:re?0:-1,ref:W=>{pe.current[Q]=W},onClick:()=>G(Q),onKeyDown:W=>K(W,Q),disabled:ie,className:["aria-tabs-datagrid__tab",re?"aria-tabs-datagrid__tab--selected":"",ie?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[o.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:B.label}),q.tabLoadingStates[Q]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),q.tabErrors[Q]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},B.id)})}),N&&le&&o.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline",ref:ee,role:"toolbar","aria-label":"Additional actions",onKeyDown:te,children:N})]}),i.map((B,Q)=>{const re=Q===q.selectedIndex;return o.jsx("div",{role:"tabpanel",id:`panel-${B.id}`,"aria-labelledby":`tab-${B.id}`,tabIndex:0,hidden:!re,ref:ie=>{we.current[Q]=ie},className:`aria-tabs-datagrid__panel ${B.className||""}`,"data-tab-panel":Q,children:re&&(()=>{const ie=B.data.some(J=>"ews_data"in J)?O(B.data,q.filters):B.data,W=E.useMemo(()=>{const J=q.sortConfig;return!J||J.length===0?ie:[...ie].sort((ue,ge)=>{for(const{key:ce,direction:Te}of J){let be=ue[ce],Ie=ge[ce];const Ae=B.columns.find($e=>$e.key===ce);if(Ae?.tableRenderer?(be=Ae.tableRenderer(ue),Ie=Ae.tableRenderer(ge)):Ae?.render&&(be=Ae.render(ue),Ie=Ae.render(ge)),be==null&&Ie==null)continue;if(be==null)return 1;if(Ie==null)return-1;let We=0;if(typeof be=="number"&&typeof Ie=="number"?We=be-Ie:typeof be=="boolean"&&typeof Ie=="boolean"?We=be===Ie?0:be?1:-1:We=String(be).localeCompare(String(Ie),void 0,{numeric:!0,sensitivity:"base"}),We!==0)return Te==="asc"?We:-We}return 0})},[ie,q.sortConfig,B.columns]);return o.jsxs("table",{className:"nhsuk-table aria-tabs-datagrid__grid",role:"grid","aria-label":B.ariaLabel,"aria-describedby":B.ariaDescription?`panel-${B.id}-description`:void 0,children:[B.ariaDescription&&o.jsx("caption",{className:"nhsuk-u-visually-hidden",id:`panel-${B.id}-description`,children:B.ariaDescription}),o.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:o.jsx("tr",{role:"row",children:B.columns.map((J,ue)=>{const ge=q.sortConfig?.find(be=>be.key===J.key),ce=!!ge,Te=F.focusArea==="headers"&&F.focusedHeaderIndex===ue;return o.jsx("th",{className:`sortable-header ${Te?"sortable-header--focused":""} ${ce?"sortable-header--sorted":""}`,role:"columnheader",tabIndex:Te?0:-1,onClick:()=>fe(Q,J.key),onKeyDown:be=>he(be,ue),"aria-sort":ce?ge?.direction==="asc"?"ascending":"descending":"none",children:o.jsxs("div",{className:"header-content",children:[o.jsx("span",{className:"header-label",children:J.label}),o.jsxs("div",{className:`sort-indicator-container ${ce?`sort-indicator--${ge?.direction}`:""}`,children:[q.sortConfig&&q.sortConfig.length>0&&q.sortConfig.findIndex(be=>be.key===J.key)!==-1&&o.jsx("span",{className:`sort-priority sort-priority--priority-${q.sortConfig.findIndex(be=>be.key===J.key)+1}`,"data-priority":q.sortConfig.findIndex(be=>be.key===J.key)+1,title:`Sort priority: ${q.sortConfig.findIndex(be=>be.key===J.key)+1}`,children:q.sortConfig.findIndex(be=>be.key===J.key)+1}),ce&&o.jsx("svg",{className:`nhsuk-icon sort-arrow sort-arrow--${ge?.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})]})]})},J.key)})})}),o.jsx("tbody",{className:"nhsuk-table__body",role:"rowgroup",children:W.map((J,ue)=>{const ge=q.globalSelectedRowData&&U(q.globalSelectedRowData,J),ce=F.focusArea==="cells"&&F.focusedRowIndex===ue;return o.jsx("tr",{role:"row",className:`data-row ${ge?"data-row--selected":""} ${ce?"data-row--focused":""}`,"aria-selected":ge,children:B.columns.map((Te,be)=>{const Ie=J[Te.key];let Ae;Te.tableRenderer?Ae=Te.tableRenderer(J):Te.render?Ae=Te.render(J):Ae=Ie;const We=F.focusArea==="cells"&&F.focusedRowIndex===ue&&F.focusedColumnIndex===be,$e=()=>{if(Te.customRenderer){const at=Te.customRenderer(Ie,J);return o.jsx("span",{className:"data-cell__custom","data-custom-rendered":"true",children:at})}return typeof Ie=="boolean"&&Ae===Ie?o.jsxs(o.Fragment,{children:[Z(Ie),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:Ie?"Yes":"No"})]}):E.isValidElement(Ae)||typeof Ae!="object"?Ae??"":Ae};return o.jsx("td",{role:"gridcell",className:`data-cell ${We?"data-cell--focused":""}`,tabIndex:We?0:-1,onClick:()=>{const Dt=q.globalSelectedRowData&&U(q.globalSelectedRowData,J)?null:J;H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:Dt})},onKeyDown:at=>I(at,ue,be),children:$e()},Te.key)})},ue)})})]})})()},B.id)})]})}),ja={asc:"â†‘",desc:"â†“"},av=e=>[...e].sort((t,n)=>t.priority-n.priority);function fo(e){return e.map((t,n)=>({...t,priority:n}))}function sv(e){return e.length>0?Math.max(...e.map(t=>t.priority)):-1}function ov(e,t){const n=t.find(r=>r.id===e);return n?n.priority>0:!1}function lv(e,t){const n=t.find(i=>i.id===e),r=sv(t);return n?n.priority<r:!1}const cv=({sortConfig:e,onSortChange:t,className:n="",emptyDescription:r="No sorting applied",activeDescription:i,showReset:a=!0,showHelp:s=!0,disabled:l=!1,ariaLabel:u="Sort configuration",ariaDescribedBy:c})=>{const d=E.useMemo(()=>av(e),[e]),f=E.useCallback(k=>{if(l)return;const N=e.map(S=>S.id===k?{...S,direction:S.direction==="asc"?"desc":"asc"}:S);t(N)},[e,t,l]),p=E.useCallback(k=>{if(l)return;const N=e.findIndex(x=>x.id===k);if(N<=0)return;const S=[...e];[S[N],S[N-1]]=[S[N-1],S[N]],t(fo(S))},[e,t,l]),g=E.useCallback(k=>{if(l)return;const N=e.findIndex(x=>x.id===k);if(N>=e.length-1||N===-1)return;const S=[...e];[S[N],S[N+1]]=[S[N+1],S[N]],t(fo(S))},[e,t,l]),b=E.useCallback(k=>{if(l)return;const N=e.filter(S=>S.id!==k);t(fo(N))},[e,t,l]),h=E.useCallback(()=>{l||t([])},[t,l]),m=()=>{if(e.length===0)return r;if(i)return i;const k=d.map((N,S)=>{const x=N.direction==="asc"?"ascending":"descending";return`${S+1}. ${N.label} (${x})`});if(k.length===1)return`Sorted by: ${k[0]}`;if(k.length===2)return`Sorted by: ${k.join(" and ")}`;{const N=k.pop();return`Sorted by: ${k.join(", ")}, and ${N}`}},y=E.useMemo(()=>{const k=["sort-description"];return s&&k.push("sort-help"),c&&k.push(c),k.join(" ")},[s,c]);return e.length===0?o.jsx("div",{className:`sort-status-control sort-status-control--empty ${n}`,children:o.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:m()})}):o.jsxs("div",{className:`sort-status-control ${n}`,children:[o.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:m()}),o.jsxs("div",{className:"sort-status-control__tags",role:"list","aria-label":u,"aria-describedby":y,children:[o.jsx("div",{className:"sort-status-control__tags-label",children:"Current sorting:"}),d.map(k=>o.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",children:o.jsx(Re,{text:"",color:"blue",className:"sort-status-control__tag",closable:!0,onClose:()=>b(k.id),disabled:l,children:o.jsxs("div",{className:"sort-status-control__tag-content",children:[o.jsx("span",{className:"sort-status-control__tag-priority",children:k.priority+1}),o.jsx("span",{className:"sort-status-control__tag-label",children:k.label}),o.jsx("button",{type:"button",className:"sort-status-control__tag-direction",onClick:()=>f(k.id),disabled:l,"aria-label":`Toggle sort direction for ${k.label}. Currently ${k.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:k.direction==="asc"?ja.asc:ja.desc}),o.jsxs("div",{className:"sort-status-control__tag-actions",children:[o.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>p(k.id),disabled:l||!ov(k.id,e),"aria-label":`Move ${k.label} sort up in priority`,title:"Move up in priority",children:"â–²"}),o.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>g(k.id),disabled:l||!lv(k.id,e),"aria-label":`Move ${k.label} sort down in priority`,title:"Move down in priority",children:"â–¼"})]})]})})},k.id))]}),a&&o.jsx("div",{className:"sort-status-control__actions",children:o.jsx(ft,{variant:"secondary",onClick:h,disabled:l,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})}),s&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsxs("small",{children:["Click ",ja.asc,"/",ja.desc," to toggle ascending/descending. Use â–²/â–¼ to change sort priority. Click Ã— to remove a sort."]})})]})},Da=(e,t)=>t.map(n=>({id:n.id,label:n.label,data:n.filter?n.filter(e):e,columns:n.columns.map(r=>({key:r.key,label:r.label,render:r.render,customRenderer:r.customRenderer})),sortConfig:n.sortConfig,ariaLabel:n.ariaLabel||`${n.label} Data Grid`,ariaDescription:n.ariaDescription||`Data grid showing ${n.label.toLowerCase()}`,className:n.className,disabled:n.disabled})),ho=[{value:!0,icon:o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"100%",height:"34",children:o.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})})},{value:!1,icon:o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"100%",height:"34",children:[o.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),o.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]})}],uv=(e,t)=>!e||!t?e===t:e.name&&e.bed_name&&t.name&&t.bed_name?e.name===t.name&&e.bed_name===t.bed_name:JSON.stringify(e)===JSON.stringify(t),dv=(e,t)=>t?e.filter(n=>{if(t.ewsScoreRange){const[r,i]=t.ewsScoreRange;if(n.ews_score<r||n.ews_score>i)return!1}return!(t.wards&&t.wards.length>0&&!t.wards.includes(n.ward_name)||t.specialties&&t.specialties.length>0&&!t.specialties.includes(n.speciality)||t.dischargeStatuses&&t.dischargeStatuses.length>0&&!t.dischargeStatuses.includes(n.early_discharge_notification)||t.avpuLevels&&t.avpuLevels.length>0&&!t.avpuLevels.includes(n.ews_data.avpu)||t.medicallyOptimised!==null&&t.medicallyOptimised!==void 0&&n.medically_optimised!==t.medicallyOptimised||t.fastTrack!==null&&t.fastTrack!==void 0&&n.fast_track!==t.fastTrack)}):e,fv=e=>{if(typeof e=="boolean"){const n=ho.find(r=>r.value===e);return n?n.icon:null}const t=ho.find(n=>n.value===e);return t?t.icon:String(e)},hv=e=>`${e.name}-${e.bed_name}`,pv=()=>({overview:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"bed_name",label:"Bed"},{key:"ews_score",label:"EWS Score"},{key:"speciality",label:"Specialty"},{key:"consultant",label:"Consultant"}],vitals:[{key:"name",label:"Patient Name"},{key:"ews_score",label:"EWS Score"},{key:"respiratory_rate_bpm",label:"Respiratory Rate",render:e=>e.ews_data.respiratory_rate_bpm},{key:"sp02",label:"SpO2 %",render:e=>e.ews_data.sp02},{key:"temperature",label:"Temperature Â°C",render:e=>e.ews_data.temperature},{key:"systolic_bp",label:"Systolic BP",render:e=>e.ews_data.systolic_bp},{key:"heart_rate",label:"Heart Rate",render:e=>e.ews_data.heart_rate},{key:"avpu",label:"AVPU",render:e=>e.ews_data.avpu.toUpperCase()}],discharge:[{key:"name",label:"Patient Name"},{key:"anticipated_discharge_date",label:"Anticipated Discharge",render:e=>new Date(e.anticipated_discharge_date).toLocaleDateString()},{key:"early_discharge_notification",label:"Discharge Status"},{key:"medically_optimised",label:"Medically Optimised"},{key:"criteria_to_reside",label:"Criteria to Reside"},{key:"fast_track",label:"Fast Track"},{key:"transport_status",label:"Transport Status"},{key:"pathway",label:"Pathway"}],logistics:[{key:"name",label:"Patient Name"},{key:"ward_name",label:"Ward"},{key:"room_name",label:"Room"},{key:"bed_name",label:"Bed"},{key:"bed_type",label:"Bed Type"},{key:"transport_booking",label:"Transport Booked"},{key:"transport_mobility",label:"Transport Type"},{key:"district_nurse_referral",label:"District Nurse"},{key:"equipment",label:"Equipment"}]}),mv=e=>{const t=pv();return[{id:"overview",label:"Patient Overview",data:e,columns:t.overview,ariaLabel:"Patient Overview Data Grid",ariaDescription:"Overview of all patients with basic information"},{id:"vitals",label:"Vital Signs & EWS",data:e,columns:t.vitals,sortConfig:[{key:"ews_score",direction:"desc"},{key:"name",direction:"asc"},{key:"ward_name",direction:"asc"}],ariaLabel:"Patient Vital Signs Data Grid",ariaDescription:"Patient vital signs and Early Warning Scores"},{id:"discharge",label:"Discharge Planning",data:e.filter(n=>n.anticipated_discharge_date),columns:t.discharge,sortConfig:[{key:"anticipated_discharge_date",direction:"asc"},{key:"discharge_status",direction:"desc"}],ariaLabel:"Discharge Planning Data Grid",ariaDescription:"Patient discharge planning and status information"},{id:"logistics",label:"Bed Management",data:e,columns:t.logistics,sortConfig:[{key:"ward_name",direction:"asc"}],ariaLabel:"Bed Management Data Grid",ariaDescription:"Patient location and logistics information"}]},rd={dataComparator:uv,filterFunction:dv,booleanRenderer:fv,getDataId:hv};function id(e,t,n){const{primaryField:r,secondaryFields:i=[],badges:a=[],hiddenFields:s=[],getPriority:l,getVariant:u,fieldRenderers:c={},classPrefix:d="adaptive-card"}=n,f=t.find(N=>N.key===r),p=f?.cardRenderer?f.cardRenderer(e):f?.render?f.render(e):e[r||"name"]||"Untitled",g=()=>i.filter(S=>!s.includes(S)&&e[S]).slice(0,3).map(S=>{const x=t.find(v=>v.key===S),M=e[S],j=c[S]?c[S](M,e):x?.cardRenderer?x.cardRenderer(e):x?.render?x.render(e):M;return`${x?.label||S}: ${j}`}).join(" â€¢ "),b=()=>a.length===0?null:a.filter(N=>e[N.fieldKey]!==void 0).map(N=>{const S=e[N.fieldKey],x=N.render?N.render(S,e):S;return`<span class="nhsuk-tag ${gv(N,S)}">${x}</span>`}).join(""),h=()=>u?u(e):l?.(e)==="high"?"primary":"default",m=b(),y=g(),k=m?`${y}${m?`<div class="adaptive-card__badges">${m}</div>`:""}`:y;return{variant:h(),heading:String(p),descriptionHtml:k,className:`adaptive-card ${d}`,"aria-label":`Record for ${p}`}}function gv(e,t){const n=e.className||"adaptive-card__badge";if(e.fieldKey==="ews_score"||e.fieldKey.includes("score")){const r=Number(t);return r>=7?`${n} nhsuk-tag--red`:r>=3?`${n} nhsuk-tag--yellow`:`${n} nhsuk-tag--green`}if(e.fieldKey==="priority"){const r=String(t).toLowerCase();if(r==="high")return`${n} nhsuk-tag--red`;if(r==="medium")return`${n} nhsuk-tag--yellow`;if(r==="low")return`${n} nhsuk-tag--green`}if(e.fieldKey==="status"){const r=String(t).toLowerCase();if(r==="urgent"||r==="critical")return`${n} nhsuk-tag--red`;if(r==="pending"||r==="warning")return`${n} nhsuk-tag--yellow`;if(r==="completed"||r==="success")return`${n} nhsuk-tag--green`}switch(e.color){case"primary":return`${n} nhsuk-tag--blue`;case"secondary":return`${n} nhsuk-tag--grey`;case"success":return`${n} nhsuk-tag--green`;case"warning":return`${n} nhsuk-tag--yellow`;case"danger":return`${n} nhsuk-tag--red`;default:return n}}const bv={primaryField:"name",secondaryFields:["id","description","status"],badges:[{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],hiddenFields:[],getPriority:e=>e.priority||"medium",getStatus:e=>e.status||"active",getVariant:e=>e.priority==="high"?"primary":"default",fieldRenderers:{},classPrefix:"adaptive-card--generic"},po=({data:e,columns:t,onSelect:n,onAction:r,priority:i="medium",status:a="active"})=>{const s=e.name,l=e.age,u=e.ward_name,c=e.bed_name,d=e.ews_score,f=e.speciality,p=e.consultant;return o.jsxs("div",{className:`healthcare-card healthcare-card--patient healthcare-card--${i} healthcare-card--${a}`,onClick:()=>n?.(e),role:"button",tabIndex:0,"aria-label":`Patient record for ${s}, Age ${l}, Ward ${u}, Bed ${c}`,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__identity",children:[o.jsx("h3",{className:"healthcare-card__patient-name",children:s}),o.jsxs("p",{className:"healthcare-card__age-info",children:[o.jsx("span",{className:"healthcare-card__label",children:"Age: "}),o.jsx("span",{className:"healthcare-card__value",children:l})]})]}),o.jsx("div",{className:"healthcare-card__badges",children:d!==void 0&&o.jsxs(Re,{color:_v(ad(d)),className:"healthcare-card__alert",children:["EWS: ",d]})})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Ward"}),o.jsx("dd",{children:u})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Bed"}),o.jsx("dd",{children:c})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Specialty"}),o.jsx("dd",{children:f})]}),o.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--prominent",children:[o.jsx("dt",{children:"Consultant"}),o.jsx("dd",{children:p})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(ft,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-notes",e)},children:"Notes"}),o.jsx(ft,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-vitals",e)},children:"Vitals"}),o.jsx(ft,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:g=>{g.stopPropagation(),r?.("view-full",e)},children:"View Full Record"})]})]})},mo=({data:e,onAction:t})=>o.jsxs("div",{className:"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__time-info",children:[o.jsx("h3",{className:"healthcare-card__time",children:new Date(e.appointment_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),o.jsx("p",{className:"healthcare-card__type",children:e.appointment_type})]}),o.jsxs("div",{className:"healthcare-card__badges",children:[o.jsx(Re,{color:vv(e.status||"active"),className:"healthcare-card__status",children:(e.status||"active").charAt(0).toUpperCase()+(e.status||"active").slice(1)}),o.jsxs(Re,{color:"grey",className:"healthcare-card__duration",children:[e.duration||"30"," min"]})]})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Patient"}),o.jsx("dd",{children:e.patient_name})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Consultant"}),o.jsx("dd",{children:e.consultant})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Location"}),o.jsx("dd",{children:e.location})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(ft,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),o.jsx(ft,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Reschedule"})]})]}),go=({data:e,onAction:t})=>o.jsxs("div",{className:"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__medication-info",children:[o.jsx("h3",{className:"healthcare-card__medication-name",children:e.medication}),o.jsxs("p",{className:"healthcare-card__dose",children:[e.dose," â€¢ ",e.frequency]})]}),o.jsxs("div",{className:"healthcare-card__badges",children:[o.jsx(Re,{color:"blue",className:"healthcare-card__route",children:e.route}),e.next_due&&o.jsxs(Re,{color:"red",className:"healthcare-card__warning",children:["Due: ",new Date(e.next_due).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Patient"}),o.jsx("dd",{children:e.patient_name})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Prescriber"}),o.jsx("dd",{children:e.prescriber})]}),e.allergies&&o.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--urgent",children:[o.jsx("dt",{children:"Allergies"}),o.jsx("dd",{children:e.allergies})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(ft,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),o.jsx(ft,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Adjust Dose"})]})]}),bo=({data:e,onSelect:t,onAction:n,priority:r="medium"})=>{const i=e.name,a=e.ews_score,s=e.ews_data?.respiratory_rate_bpm,l=e.ews_data?.sp02,u=e.ews_data?.temperature,c=e.ews_data?.systolic_bp,d=e.ews_data?.heart_rate,f=e.ews_data?.avpu;return o.jsxs("div",{className:`healthcare-card healthcare-card--vitals healthcare-card--${r}`,onClick:()=>t?.(e),role:"button",tabIndex:0,"aria-label":`Vital signs for ${i}, EWS Score ${a}`,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__vitals-summary",children:[o.jsx("h3",{className:"healthcare-card__patient-name",children:i}),a!==void 0&&o.jsxs("p",{className:`healthcare-card__ews-score healthcare-card__ews-score--${yv(a)}`,children:["EWS: ",a]})]}),o.jsx("div",{className:"healthcare-card__badges",children:f&&o.jsxs(Re,{color:"blue",className:"healthcare-card__avpu",children:["AVPU: ",f.toUpperCase()]})})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("div",{className:"healthcare-card__vitals-grid",children:[s!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Respiratory Rate"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[s," bpm"]})]}),l!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"SpO2"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[l,"%"]})]}),u!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Temperature"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[u,"Â°C"]})]}),c!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Systolic BP"}),o.jsx("span",{className:"healthcare-card__vital-value",children:c})]}),d!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Heart Rate"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[d," bpm"]})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(ft,{variant:"secondary",className:"healthcare-card__action",onClick:p=>{p.stopPropagation(),n?.("view-trend",e)},children:"Trend"}),o.jsx(ft,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:p=>{p.stopPropagation(),n?.("record-new",e)},children:"Record New"})]})]})};function ad(e){const t=typeof e=="string"?parseInt(e,10):e;return t>=7?"critical":t>=5?"high":t>=3?"medium":"low"}function yv(e){return ad(e)}function _v(e){switch(e){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"grey";default:return"grey"}}function vv(e){switch(e.toLowerCase()){case"active":return"blue";case"pending":return"orange";case"completed":return"green";case"cancelled":return"grey";default:return"blue"}}const xv=[{fieldKey:"ews_score",render:e=>`EWS: ${e}`,className:"adaptive-card__ews-badge",color:"default"},{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],sd=e=>e.ews_score&&Number(e.ews_score)>=7?"high":e.ews_score&&Number(e.ews_score)>=3?"medium":e.priority==="high"||e.status==="urgent"?"high":e.priority==="low"?"low":"medium",od={name:"healthcare",defaultCardConfig:{primaryField:"name",secondaryFields:["nhs_number","ward","condition","consultant"],badges:xv,hiddenFields:[],getPriority:sd,getStatus:e=>{if(e.status){const t=e.status.toLowerCase();if(["active","pending","completed","cancelled","urgent"].includes(t))return t}return"active"},getVariant:e=>sd(e)==="high"||e.status==="urgent"?"primary":"default",fieldRenderers:{nhs_number:e=>e?`NHS: ${e}`:"",ews_score:e=>{const t=Number(e),n=t>=7?"HIGH":t>=3?"MEDIUM":"LOW";return`EWS: ${e} (${n})`},age:(e,t)=>t.dob?`${new Date().getFullYear()-new Date(t.dob).getFullYear()}y`:e?`${e}y`:""},classPrefix:"adaptive-card--healthcare"},cssImport:"./HealthcareCardTemplates.scss",cardTemplates:{patient:(e,t,n)=>{const r=n.getPriority?.(e)||"medium",i=n.getStatus?.(e)||"active",a=i==="urgent"?"active":i;return o.jsx(po,{data:e,columns:t,priority:r,status:a,onSelect:s=>console.log("Patient selected:",s),onAction:(s,l)=>console.log("Patient action:",s,l)})},appointment:(e,t,n)=>{const r=n.getStatus?.(e)||"pending",i=r==="urgent"?"pending":r;return o.jsx(mo,{data:e,columns:t,status:i,onSelect:a=>console.log("Appointment selected:",a),onAction:(a,s)=>console.log("Appointment action:",a,s)})},medication:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return o.jsx(go,{data:e,columns:t,priority:r,onSelect:i=>console.log("Medication selected:",i),onAction:(i,a)=>console.log("Medication action:",i,a)})},vitals:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return o.jsx(bo,{data:e,columns:t,priority:r,onSelect:i=>console.log("Vitals selected:",i),onAction:(i,a)=>console.log("Vitals action:",i,a)})}},fieldTypes:{isNHSNumber:e=>typeof e=="string"&&/^\d{3}\s?\d{3}\s?\d{4}$/.test(e.replace(/\s/g,"")),isEWSScore:e=>typeof e=="number"&&e>=0&&e<=20,isMedicalDate:e=>typeof e=="string"&&!isNaN(Date.parse(e))}};function ld(e){return{primaryField:e?.primaryField||"name",secondaryFields:e?.secondaryFields||[],badges:e?.badgeFields?.map(t=>({fieldKey:t,className:"adaptive-card__badge"}))||[],hiddenFields:e?.hiddenFields||[],cardTemplate:e?.cardTemplate?(t,n,r)=>e.cardTemplate(t,n):void 0,classPrefix:"adaptive-card--generic"}}function cd(e){if(!e||e.length===0)return!1;const t=e[0];return t.ews_score!==void 0||t.nhs_number!==void 0||t.patient_name!==void 0||t.ward!==void 0||t.consultant!==void 0}function wv(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const i=[...e.selectedRows];return i[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:i};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:a}=t.payload,s=new Array(a).fill(!1),l=new Array(a).fill(null),u=new Array(a).fill([]);for(let c=0;c<Math.min(e.tabLoadingStates.length,a);c++)s[c]=e.tabLoadingStates[c],l[c]=e.tabErrors[c],u[c]=e.selectedRows[c];return{...e,tabLoadingStates:s,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}function Sv(e,t){const[n,r]=E.useState("cards");return E.useEffect(()=>{if(t){r(t);return}const i=()=>{const a=window.innerWidth;a<e.mobile?r("cards"):a<e.desktop?r("hybrid"):r("table")};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[e,t]),n}function Cv(e){return!e||typeof e!="object"?null:e.appointment_type||e.appointment_time||e.clinic?"appointment":e.medication_name||e.medication||e.dose||e.frequency?"medication":e.ews_score!==void 0||e.respiratory_rate!==void 0||e.spo2!==void 0||e.temperature!==void 0||e.systolic_bp!==void 0||e.heart_rate!==void 0?"vitals":e.name||e.patient_name||e.nhs_number||e.ward||e.bed?"patient":null}function kv(e,t,n,r){const i=r?{...r.defaultCardConfig,...n}:{...bv,...n};if(r&&r.cardTemplates){const a=Cv(e);if(a&&r.cardTemplates[a]){const s=r.cardTemplates[a](e,t,i);if(s)return{variant:"default",children:s}}}return i.cardTemplate&&i.cardTemplate(e,t,i),id(e,t,i)}const yo=({breakpoints:e={mobile:768,tablet:1024,desktop:1200},forceLayout:t,cardConfig:n={},experimental:r={},enableAdvancedSorting:i=!1,topActions:a,bottomActions:s,gridActions:l,forceGridActionsAbove:u,tabPanels:c,dataConfig:d,selectedIndex:f,onTabChange:p,ariaLabel:g="Data grid",ariaDescription:b,orientation:h="horizontal",id:m,disabled:y=!1,className:k,...N})=>{const S=Sv(e,t),x=f!==void 0,M=f??0,j=E.useMemo(()=>{if(c.some(Y=>Y.data&&Y.data.length>0&&cd(Y.data))){const Y=ld(n);return{...od.defaultCardConfig,...Y}}else return ld(n)},[n,c]),C=E.useMemo(()=>c.some(Y=>Y.data&&Y.data.length>0&&cd(Y.data))?od:void 0,[c]),v=E.useMemo(()=>({selectedIndex:M,tabLoadingStates:new Array(c.length).fill(!1),tabErrors:new Array(c.length).fill(null),sortConfig:[],selectedRows:new Array(c.length).fill([]),globalSelectedRowData:null,filters:void 0}),[M,c.length]),[$,T]=E.useReducer(wv,v),w=E.useRef([]),L=E.useRef([]),P=E.useRef([]),D=E.useRef(null),[F,A]=E.useState({focusArea:"tabs",focusedTabIndex:0,focusedCardIndex:0,selectedCardIndex:-1,isGridActive:!1,focusedCardElementIndex:0,cardElements:[],isCardNavigationActive:!1,gridColumns:1,gridRows:1,cardSortConfig:null,focusedSortControlIndex:0,isSortControlsActive:!1}),ne=E.useCallback(R=>{if(!R.current)return{columns:1,rows:0};const Y=R.current,K=Y.querySelectorAll(".aria-tabs-datagrid-adaptive__card-wrapper");if(K.length===0)return{columns:1,rows:0};const te=Y.offsetWidth,Q=K[0].offsetWidth,re=Math.floor(te/Q)||1,ie=Math.ceil(K.length/re);return{columns:re,rows:ie}},[]),q=E.useCallback((R,Y)=>({row:Math.floor(R/Y),col:R%Y}),[]),H=E.useCallback((R,Y,K)=>R*K+Y,[]),U=E.useCallback((R,Y,K,te)=>{const{row:B,col:Q}=q(R,te);let re=B,ie=Q;switch(Y){case"up":re=Math.max(0,B-1);break;case"down":re=Math.min(Math.floor((K-1)/te),B+1);break;case"left":ie=Math.max(0,Q-1);break;case"right":ie=Math.min(te-1,Q+1);break}const W=H(re,ie,te);return Math.min(W,K-1)},[q,H]);E.useEffect(()=>{F.isCardNavigationActive&&F.focusedCardElementIndex>=0&&F.cardElements.length>0&&setTimeout(()=>{const R=F.cardElements[F.focusedCardElementIndex];R&&(R.element.focus(),R.element.scrollIntoView({block:"nearest",behavior:"smooth"}))},0)},[F.isCardNavigationActive,F.focusedCardElementIndex,F.cardElements.length]),E.useEffect(()=>{const R=()=>{if(S==="cards"&&D.current){const{columns:te,rows:B}=ne(D);A(Q=>({...Q,gridColumns:te,gridRows:B}))}},Y=setTimeout(R,200),K=()=>{setTimeout(R,100)};return window.addEventListener("resize",K),()=>{clearTimeout(Y),window.removeEventListener("resize",K)}},[S,c,ne]),E.useEffect(()=>{const R=$.tabLoadingStates.length,Y=c.length;R!==Y&&T({type:"ADJUST_ARRAYS",payload:{newLength:Y}})},[c.length,$.tabLoadingStates.length]),E.useEffect(()=>{x&&f!==$.selectedIndex&&T({type:"SET_SELECTED_INDEX",payload:f})},[x,f,$.selectedIndex]);const G=E.useCallback(R=>{R>=0&&R<c.length&&!c[R].disabled&&(T({type:"SET_SELECTED_INDEX",payload:R}),p?.(R))},[c,p]),oe=E.useCallback(R=>{console.log("Card selected:",R),T({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:R})},[]),z=E.useCallback(R=>{const Y=L.current[R];Y&&(Y.focus(),Y.scrollIntoView({block:"nearest",behavior:"smooth"}))},[]),pe=E.useCallback(R=>{const Y=L.current[R];if(!Y)return[];const K=['button:not([disabled]):not([aria-hidden="true"])','a[href]:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','select:not([disabled]):not([aria-hidden="true"])','textarea:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])','.healthcare-card__detail[tabindex]:not([tabindex="-1"])',".healthcare-card__action:not([disabled])",".tag:not([disabled])"].join(", "),te=Y.querySelectorAll(K);return Array.from(te).map((B,Q)=>({id:B.id||`card-${R}-element-${Q}`,element:B,label:B.getAttribute("aria-label")||B.textContent?.trim()||B.getAttribute("title")||`Element ${Q+1}`,type:B.tagName.toLowerCase()==="button"?"button":B.tagName.toLowerCase()==="a"?"link":["input","select","textarea"].includes(B.tagName.toLowerCase())?"input":"generic"}))},[]),we=E.useRef(null),fe=E.useCallback(R=>{const Y=we.current;if(!Y)return;const K=document.createElement("div");K.setAttribute("aria-live","polite"),K.setAttribute("aria-atomic","true"),K.className="sr-only",K.textContent=R,Y.appendChild(K),setTimeout(()=>{Y.contains(K)&&Y.removeChild(K)},1e3)},[]),de=E.useCallback(R=>{const Y=R.filter(te=>te.sortable!==!1),K=[{value:"",label:"Sort by..."}];return Y.forEach(te=>{const B=te.label||te.key;te.key==="name"?K.push({value:`${te.key}-asc`,label:`${B} (A-Z)`},{value:`${te.key}-desc`,label:`${B} (Z-A)`}):te.key==="ews_score"||te.key.includes("score")?K.push({value:`${te.key}-desc`,label:`${B} (High-Low)`},{value:`${te.key}-asc`,label:`${B} (Low-High)`}):te.key==="age"||te.key.includes("date")||te.key.includes("time")?K.push({value:`${te.key}-desc`,label:`${B} (Oldest-Youngest)`},{value:`${te.key}-asc`,label:`${B} (Youngest-Oldest)`}):K.push({value:`${te.key}-asc`,label:`${B} (A-Z)`},{value:`${te.key}-desc`,label:`${B} (Z-A)`})}),K},[]),Z=E.useCallback((R,Y)=>Y?[...R].sort((K,te)=>{const B=K[Y.key],Q=te[Y.key];if(B==null&&Q==null)return 0;if(B==null)return 1;if(Q==null)return-1;const re=Number(B),ie=Number(Q);if(!isNaN(re)&&!isNaN(ie))return Y.direction==="asc"?re-ie:ie-re;const W=String(B).toLowerCase(),J=String(Q).toLowerCase(),ue=W.localeCompare(J);return Y.direction==="asc"?ue:-ue}):R,[]),se=E.useCallback(R=>{if(!R){A(W=>({...W,cardSortConfig:null})),fe("Card sorting cleared");return}const[Y,K]=R.split("-"),te={key:Y,direction:K};A(W=>({...W,cardSortConfig:te}));const re=c[$.selectedIndex]?.columns.find(W=>W.key===Y)?.label||Y;fe(`Cards sorted by ${re} in ${K==="asc"?"ascending":"descending"} order`)},[c,$.selectedIndex,fe]),he=E.useCallback(R=>{const te=c[$.selectedIndex]?.columns.find(Q=>Q.key===R.key)?.label||R.key,B=R.direction==="asc"?"ascending":"descending";return`${te} (${B})`},[c,$.selectedIndex]),I=E.useCallback(R=>{const Y=c[$.selectedIndex];if(i){const K=$.sortConfig;return!K||K.length===0?R:[...R].sort((te,B)=>{for(const{key:Q,direction:re}of K){let ie=te[Q],W=B[Q];const J=Y?.columns.find(Ie=>Ie.key===Q);if(J?.cardRenderer?(ie=J.cardRenderer(te),W=J.cardRenderer(B)):J?.render&&(ie=J.render(te),W=J.render(B)),ie==null&&W==null)continue;if(ie==null)return re==="asc"?-1:1;if(W==null)return re==="asc"?1:-1;const ue=Number(ie),ge=Number(W);if(!isNaN(ue)&&!isNaN(ge)){const Ie=ue-ge;if(Ie!==0)return re==="asc"?Ie:-Ie;continue}const ce=String(ie).toLowerCase(),Te=String(W).toLowerCase(),be=ce.localeCompare(Te);if(be!==0)return re==="asc"?be:-be}return 0})}else return Z(R,F.cardSortConfig)},[i,$.sortConfig,F.cardSortConfig,Z,c,$.selectedIndex]),O=E.useCallback((R,Y)=>{const K=pe(R),te=K[Y];if(te){te.element.scrollIntoView({block:"nearest",behavior:"smooth"});const B=`Focused on ${te.label}, ${te.type} ${Y+1} of ${K.length} within card`;fe(B)}},[pe,fe]),V=E.useCallback(R=>{w.current[R]?.focus()},[]),ae=E.useCallback(()=>{const R=P.current[0];if(!R)return[];const Y=['select:not([disabled]):not([aria-hidden="true"])','button:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])'].join(", "),K=R.querySelectorAll(Y);return Array.from(K)},[]),ee=E.useCallback(R=>{if(R===0){const Y=P.current[0],K=Y?.querySelector(".sort-controls-row");if(K){K.setAttribute("tabindex","-1"),K.focus();const B=`Sort controls group with ${ae().length} interactive elements. Press Enter or Space to begin navigating controls.`;fe(B)}else Y&&Y.focus()}else{const Y=ae(),K=R-1,te=Y[K];if(te){te.focus();const B=te.tagName.toLowerCase()==="select",Q=te.tagName.toLowerCase()==="button",re=B?"dropdown":Q?"button":"control",ie=B?". Use Space key to open dropdown":"",W=`${re} ${K+1} of ${Y.length}${ie}`;fe(W)}}},[ae,fe]),le=E.useCallback((R,Y)=>{const{key:K}=R,te=c[$.selectedIndex],B=te?.data.length||0;if(K==="ArrowLeft"&&R.shiftKey){R.preventDefault(),R.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(K==="ArrowRight"&&R.shiftKey){R.preventDefault(),R.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!F.isCardNavigationActive){switch(K){case"ArrowUp":if(R.preventDefault(),Y===0)A(W=>({...W,focusArea:"sort-controls",focusedSortControlIndex:0,isSortControlsActive:!1})),ee(0);else{const W=U(Y,"up",B,F.gridColumns);W!==Y&&(A(J=>({...J,focusedCardIndex:W})),z(W),fe(`Moved to card ${W+1} of ${B}`))}break;case"ArrowDown":R.preventDefault();const Q=U(Y,"down",B,F.gridColumns);Q!==Y&&(A(W=>({...W,focusedCardIndex:Q})),z(Q),fe(`Moved to card ${Q+1} of ${B}`));break;case"ArrowLeft":R.preventDefault();const re=U(Y,"left",B,F.gridColumns);re!==Y?(A(W=>({...W,focusedCardIndex:re})),z(re),fe(`Moved to card ${re+1} of ${B}`)):$.selectedIndex>0&&(T({type:"SET_SELECTED_INDEX",payload:$.selectedIndex-1}),A(W=>({...W,focusArea:"tabs"})),setTimeout(()=>V($.selectedIndex-1),0));break;case"ArrowRight":R.preventDefault();const ie=U(Y,"right",B,F.gridColumns);ie!==Y?(A(W=>({...W,focusedCardIndex:ie})),z(ie),fe(`Moved to card ${ie+1} of ${B}`)):$.selectedIndex<c.length-1&&(T({type:"SET_SELECTED_INDEX",payload:$.selectedIndex+1}),A(W=>({...W,focusArea:"tabs"})),setTimeout(()=>V($.selectedIndex+1),0));break;case"Enter":if(te?.data[Y]){R.preventDefault(),A(J=>({...J,selectedCardIndex:Y}));const W=pe(Y);W.length>0?(A(J=>({...J,focusArea:"card",isCardNavigationActive:!0,focusedCardElementIndex:0,cardElements:W,selectedCardIndex:Y})),fe(`Card ${Y+1} selected and navigation activated. ${W.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`)):fe(`Card ${Y+1} selected.`)}break;case" ":if(te?.data[Y]){R.preventDefault(),A(J=>({...J,selectedCardIndex:J.selectedCardIndex===Y?-1:Y}));const W=F.selectedCardIndex===Y;fe(`Card ${Y+1} ${W?"deselected":"selected"}.`)}break}return}switch(K){case"ArrowUp":case"ArrowLeft":R.preventDefault();const Q=Math.max(0,F.focusedCardElementIndex-1);A(J=>({...J,focusedCardElementIndex:Q})),O(Y,Q);break;case"ArrowDown":case"ArrowRight":R.preventDefault();const re=Math.min(F.cardElements.length-1,F.focusedCardElementIndex+1);A(J=>({...J,focusedCardElementIndex:re})),O(Y,re);break;case"Enter":R.preventDefault();const ie=F.cardElements[F.focusedCardElementIndex];ie&&(ie.element.click(),fe(`Activated ${ie.label}`));break;case" ":R.preventDefault();const W=F.cardElements[F.focusedCardElementIndex];if(W){const J=new MouseEvent("dblclick",{bubbles:!0});W.element.dispatchEvent(J),fe(`Double-clicked ${W.label}`)}break;case"Escape":R.preventDefault(),A(J=>({...J,focusArea:"cards",isCardNavigationActive:!1,focusedCardElementIndex:0,cardElements:[]})),setTimeout(()=>z(Y),0),fe("Exited card navigation, returned to card level");break;case"Home":R.preventDefault(),F.cardElements.length>0&&(A(J=>({...J,focusedCardElementIndex:0})),O(Y,0));break;case"End":if(R.preventDefault(),F.cardElements.length>0){const J=F.cardElements.length-1;A(ue=>({...ue,focusedCardElementIndex:J})),O(Y,J)}break}},[F,$.selectedIndex,c,oe,z,V,A,pe,O,fe]),_e=E.useCallback(R=>{const Y=w.current[R],K=Y?.parentElement;if(!Y||!K){console.log("Tab or container not found for mobile scroll");return}const te=Y.getBoundingClientRect(),B=K.getBoundingClientRect();te.left>=B.left&&te.right<=B.right||(console.log("Tab not visible, scrolling into view (mobile)"),Y.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[]),Se=E.useCallback((R,Y)=>{if(S!=="cards")return;const{key:K}=R;switch(K){case"ArrowLeft":R.preventDefault();const te=Y>0?Y-1:c.length-1;G(te),A(ie=>({...ie,focusedTabIndex:te})),w.current[te]?.focus(),_e(te);break;case"ArrowRight":R.preventDefault();const B=Y<c.length-1?Y+1:0;G(B),A(ie=>({...ie,focusedTabIndex:B})),w.current[B]?.focus(),_e(B);break;case"ArrowDown":R.preventDefault();const Q=c[$.selectedIndex];Q&&Q.columns&&Q.columns.length>0?(A(ie=>({...ie,focusArea:"sort-controls",focusedSortControlIndex:0})),ee(0)):(A(ie=>({...ie,focusArea:"cards",focusedCardIndex:0})),z(0));break;case"Home":R.preventDefault(),G(0),A(ie=>({...ie,focusedTabIndex:0})),w.current[0]?.focus(),_e(0);break;case"End":R.preventDefault();const re=c.length-1;G(re),A(ie=>({...ie,focusedTabIndex:re})),w.current[re]?.focus(),_e(re);break;case"Enter":case" ":R.preventDefault(),G(Y);break}},[c.length,G,S,z,A,_e]),me=E.useCallback((R,Y)=>{if(S!=="cards")return;const{key:K}=R,te=c[$.selectedIndex];if(Y===0&&!F.isSortControlsActive){switch(K){case"ArrowUp":R.preventDefault(),A(Q=>({...Q,focusArea:"tabs",isSortControlsActive:!1})),V($.selectedIndex);break;case"ArrowDown":R.preventDefault(),te?.data&&te.data.length>0&&(A(Q=>({...Q,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),z(0));break;case"Enter":case" ":R.preventDefault();const B=ae();if(B.length>0){A(re=>({...re,isSortControlsActive:!0,focusedSortControlIndex:1})),ee(1);const Q=`Entered sort controls navigation mode. ${B.length} controls available. Use arrow keys to navigate between controls.`;fe(Q)}break;case"Escape":R.preventDefault(),A(Q=>({...Q,isSortControlsActive:!1,focusArea:"tabs"})),V($.selectedIndex);break}return}if(F.isSortControlsActive){const Q=ae().length;switch(K){case"ArrowLeft":R.preventDefault();const re=F.focusedSortControlIndex>1?F.focusedSortControlIndex-1:Q;A(W=>({...W,focusedSortControlIndex:re})),ee(re);break;case"ArrowRight":R.preventDefault();const ie=F.focusedSortControlIndex<Q?F.focusedSortControlIndex+1:1;A(W=>({...W,focusedSortControlIndex:ie})),ee(ie);break;case"ArrowDown":if(R.preventDefault(),F.isSortControlsActive){const W=F.focusedSortControlIndex<Q?F.focusedSortControlIndex+1:1;A(J=>({...J,focusedSortControlIndex:W})),ee(W)}else te?.data&&te.data.length>0&&(A(W=>({...W,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),z(0));break;case"ArrowUp":R.preventDefault(),A(W=>({...W,isSortControlsActive:!1,focusArea:"sort-controls"})),ee(0);break;case"Escape":R.preventDefault(),A(W=>({...W,isSortControlsActive:!1,focusArea:"sort-controls",focusedSortControlIndex:0})),ee(0);break}}},[S,c,$.selectedIndex,F.isSortControlsActive,F.focusedSortControlIndex,ee,V,z,A,fe]);if(S==="cards"){const R=c[$.selectedIndex];return o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${k||""}`,children:[o.jsxs("div",{className:"aria-tabs-datagrid-adaptive__header",children:[o.jsx("div",{role:"tablist","aria-label":g,"aria-describedby":`${b||""} ${m?`${m}-navigation-help`:""}`.trim(),"aria-orientation":h,className:"aria-tabs-datagrid__tabs",children:c.map((Y,K)=>{const te=K===$.selectedIndex,B=Y.disabled||y;return o.jsxs("button",{role:"tab",id:`tab-${Y.id}`,"aria-controls":`panel-${Y.id}`,"aria-selected":te,"aria-disabled":B,tabIndex:te?0:-1,ref:Q=>{w.current[K]=Q},onClick:()=>G(K),onKeyDown:Q=>Se(Q,K),disabled:B,className:["aria-tabs-datagrid__tab",te?"aria-tabs-datagrid__tab--selected":"",B?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[o.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:Y.label}),$.tabLoadingStates[K]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),$.tabErrors[K]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},Y.id)})}),a&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions",children:a})]}),R&&R.columns&&o.jsx(o.Fragment,{children:i?o.jsx(nd,{sortConfig:$.sortConfig||[],columns:R.columns.map(Y=>({key:Y.key,label:Y.label})),onSortChange:Y=>{T({type:"SET_SORT",payload:Y})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls"}):o.jsx("div",{className:"aria-tabs-datagrid-adaptive__sort-controls",role:"region","aria-label":"Sort controls",tabIndex:F.focusArea==="sort-controls"?0:-1,ref:Y=>{P.current[0]=Y},onKeyDown:Y=>me(Y,0),children:o.jsxs("div",{className:"sort-controls-row",children:[o.jsxs("div",{className:"sort-select-container",children:[o.jsx("label",{htmlFor:`card-sort-${R.id}`,className:"sort-label",children:"Sort cards by"}),o.jsx(Yr,{id:`card-sort-${R.id}`,name:`card-sort-${R.id}`,value:F.cardSortConfig?`${F.cardSortConfig.key}-${F.cardSortConfig.direction}`:"",onChange:Y=>se(Y.target.value),className:"sort-select",children:de(R.columns).map(Y=>o.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),F.cardSortConfig&&o.jsxs("div",{className:"sort-indicator",role:"status","aria-live":"polite",children:[o.jsxs("span",{className:"sort-indicator-text",children:["Sorted by ",he(F.cardSortConfig)]}),o.jsx(ft,{variant:"secondary",size:"small",onClick:()=>se(""),"aria-label":"Clear card sorting",className:"sort-clear-button",children:"Clear"})]})]})})}),o.jsx("div",{ref:D,className:"aria-tabs-datagrid-adaptive__cards",role:"grid","aria-label":`${R?.label||"Data"} cards in ${F.gridRows} rows and ${F.gridColumns} columns`,"aria-rowcount":F.gridRows,"aria-colcount":F.gridColumns,id:`panel-${R?.id}`,"aria-labelledby":`tab-${R?.id}`,children:I(R?.data||[]).map((Y,K)=>{const te=F.selectedCardIndex===K,B=F.focusedCardIndex===K&&F.focusArea==="cards",Q=F.focusedCardIndex===K&&F.focusArea==="card"&&F.isCardNavigationActive,re=K===0&&F.focusArea!=="cards",ie=B||re,W=q(K,F.gridColumns);if(n.cardTemplate){const ge=n.cardTemplate(Y,R.columns);return o.jsx("div",{role:"row","aria-rowindex":W.row+1,className:"aria-tabs-datagrid-adaptive__row",children:o.jsx("div",{ref:ce=>{L.current[K]=ce},className:["aria-tabs-datagrid-adaptive__card-wrapper",te?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",B?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",Q?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":W.col+1,"aria-selected":te,"aria-expanded":Q,"aria-description":Q?`Card navigation active. ${F.cardElements.length} interactive elements available.`:void 0,tabIndex:ie?0:-1,onClick:()=>{A(ce=>({...ce,selectedCardIndex:ce.selectedCardIndex===K?-1:K})),oe(Y)},onKeyDown:ce=>le(ce,K),onFocus:()=>{A(ce=>ce.isCardNavigationActive?ce:ce.focusedCardIndex!==K||ce.focusArea!=="cards"?{...ce,focusedCardIndex:K,focusArea:"cards"}:ce)},children:ge})},`card-${K}`)}const J=kv(Y,R.columns,j,C),ue=[J.className||"",te?"aria-tabs-datagrid-adaptive__card--selected":"",B?"aria-tabs-datagrid-adaptive__card--focused":"",Q?"aria-tabs-datagrid-adaptive__card--card-navigation":""].filter(Boolean).join(" ");return o.jsx("div",{role:"row","aria-rowindex":W.row+1,className:"aria-tabs-datagrid-adaptive__row",children:o.jsx("div",{className:["aria-tabs-datagrid-adaptive__card-wrapper",te?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",B?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",Q?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":W.col+1,"aria-selected":te,"aria-expanded":Q,onKeyDown:ge=>{ge.key==="Enter"&&(ge.preventDefault(),A(ce=>({...ce,selectedCardIndex:K}))),le(ge,K)},children:o.jsx(uo,{...J,ref:ge=>{L.current[K]=ge},className:ue,"aria-label":`${J["aria-label"]||J.heading}. ${Q?`Card navigation active with ${F.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.`:"Press Enter to navigate within card elements."}`,tabIndex:ie?0:-1,onClick:()=>{A(ge=>({...ge,selectedCardIndex:ge.selectedCardIndex===K?-1:K})),oe(Y)},onKeyDown:ge=>le(ge,K),onFocus:()=>{F.isCardNavigationActive||A(ge=>ge.focusedCardIndex!==K||ge.focusArea!=="cards"?{...ge,focusedCardIndex:K,focusArea:"cards",focusedCardElementIndex:0,cardElements:[]}:ge)}})})},`card-${K}`)})}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s}),o.jsx("div",{ref:we,className:"aria-tabs-datagrid-adaptive__announcements","aria-hidden":"true",style:{position:"fixed",top:"-1px",left:"-1px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0,padding:0,margin:0}})]})}return S==="hybrid"?o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${k||""}`,children:[a&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:a}),o.jsx(Na,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:b,orientation:h,id:m,disabled:y,selectedIndex:f,onTabChange:p,className:"aria-tabs-datagrid-adaptive__table--hybrid",actions:l,forceActionsAbove:u,...N}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s})]}):o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${k||""}`,children:[a&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:a}),o.jsx(Na,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:b,orientation:h,id:m,disabled:y,selectedIndex:f,onTabChange:p,actions:l,forceActionsAbove:u,...N}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s})]})},ud=e=>{const t=ho.find(n=>n.value===e);return t?t.icon:null},Tv={ecommerce:{name:"E-commerce",description:"Product catalogs with pricing, inventory, and ratings",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.priceRange){const[r,i]=t.priceRange,a=n.discountedPrice||n.price;if(a<r||a>i)return!1}return!(t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.inStock!==void 0&&n.inStock!==t.inStock||t.minRating!==void 0&&n.rating<t.minRating||t.tags&&t.tags.length>0&&!t.tags.some(r=>n.tags.includes(r)))}):e,booleanRenderer:e=>ud(e),getDataId:e=>`ecommerce-${e.id}`},createTabs:e=>Da(e,[{id:"all-products",label:"All Products",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Price",render:n=>n.discountedPrice?`$${n.price.toFixed(2)} â†’ $${n.discountedPrice.toFixed(2)}`:`$${n.price.toFixed(2)}`},{key:"inStock",label:"Availability"},{key:"category",label:"Category"},{key:"rating",label:"Rating",render:n=>`${n.rating}/5 (${n.reviews} reviews)`}],ariaLabel:"All Products Grid",ariaDescription:"Complete product catalog with pricing and availability"},{id:"on-sale",label:"On Sale",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Original Price",render:n=>`$${n.price.toFixed(2)}`},{key:"discountedPrice",label:"Sale Price",render:n=>`$${n.discountedPrice?.toFixed(2)||"N/A"}`},{key:"discount",label:"Discount",render:n=>n.discountedPrice?`${((n.price-n.discountedPrice)/n.price*100).toFixed(0)}% OFF`:"N/A"}],filter:n=>n.filter(r=>r.discountedPrice!==void 0),ariaLabel:"Sale Products Grid",ariaDescription:"Products currently on sale with discounted pricing"},{id:"high-rated",label:"Top Rated",columns:[{key:"name",label:"Product Name"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.rating>=4),sortConfig:[{key:"rating",direction:"desc"}],ariaLabel:"Top Rated Products Grid",ariaDescription:"Highest rated products with 4+ star ratings"}])},financial:{name:"Financial",description:"Transaction data with amounts, categories, and statuses",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.dateRange){const[r,i]=t.dateRange;if(n.date<r||n.date>i)return!1}if(t.amountRange){const[r,i]=t.amountRange;if(Math.abs(n.amount)<r||Math.abs(n.amount)>i)return!1}return!(t.types&&t.types.length>0&&!t.types.includes(n.type)||t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.pending!==void 0&&n.pending!==t.pending)}):e,booleanRenderer:e=>ud(e),getDataId:e=>`financial-${e.id}`},createTabs:e=>Da(e,[{id:"all-transactions",label:"All Transactions",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"},{key:"pending",label:"Status"}],sortConfig:[{key:"date",direction:"desc"}],ariaLabel:"All Transactions Grid",ariaDescription:"Complete transaction history with amounts and categories"},{id:"credits",label:"Credits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`+$${n.amount.toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="credit"),ariaLabel:"Credit Transactions Grid",ariaDescription:"Incoming payments and credits only"},{id:"debits",label:"Debits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`-$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="debit"),ariaLabel:"Debit Transactions Grid",ariaDescription:"Outgoing payments and charges only"},{id:"pending",label:"Pending",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"type",label:"Type"}],filter:n=>n.filter(r=>r.pending),ariaLabel:"Pending Transactions Grid",ariaDescription:"Transactions awaiting processing"}])}},dd=(e,t)=>{const n=Tv[e];return{dataConfig:n.dataConfig,tabPanels:n.createTabs(t)}},fd=[{name:"Sarah Johnson",age:34,ews_data:{respiratory_rate_bpm:16,sp02:98,temperature:36.8,systolic_bp:140,heart_rate:82,avpu:"alert"},ews_score:3,ward_name:"Cardiology",room_name:"Room A",bed_name:"A-1",bed_type:"bed",admin_note:"Hypertension monitoring",pathway:"Standard",speciality:"Cardiology",consultant:"Dr. Smith",local_authority:"NHS Trust",early_discharge_notification:"not_required",needs_based_assessment:!1,medically_optimised:!0,criteria_to_reside:!0,date_medically_optimised:"2024-01-15",anticipated_discharge_date:"2024-01-18",dru_suitability:!1,optica_planned_discharge_date:"2024-01-18",optica_date_confirmed:"2024-01-16",dsum:null,medications_tta:"None required",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!1,initial_therapy_contact:"",equipment:"None",district_nurse_referral:!1},{name:"Michael Chen",age:67,ews_data:{respiratory_rate_bpm:20,sp02:94,temperature:37.2,systolic_bp:160,heart_rate:95,avpu:"alert"},ews_score:7,ward_name:"Surgery",room_name:"Room B",bed_name:"B-3",bed_type:"bed",admin_note:"Post-operative monitoring",pathway:"Surgical",speciality:"General Surgery",consultant:"Dr. Johnson",local_authority:"NHS Trust",early_discharge_notification:"due",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!0,date_medically_optimised:"2024-01-17",anticipated_discharge_date:"2024-01-20",dru_suitability:!0,optica_planned_discharge_date:"2024-01-20",optica_date_confirmed:"2024-01-16",dsum:"Complex discharge",medications_tta:"Pain management",transport_booking:!0,transport_status:"In Progress",transport_date:"2024-01-20",transport_mobility:"Wheelchair",fast_track:!1,initial_therapy_contact:"2024-01-17",equipment:"Walking frame",district_nurse_referral:!0},{name:"Emma Thompson",age:28,ews_data:{respiratory_rate_bpm:24,sp02:90,temperature:38.5,systolic_bp:110,heart_rate:105,avpu:"alert"},ews_score:5,ward_name:"Respiratory",room_name:"Room C",bed_name:"C-2",bed_type:"bed",admin_note:"Pneumonia treatment",pathway:"Respiratory",speciality:"Respiratory Medicine",consultant:"Dr. Williams",local_authority:"NHS Trust",early_discharge_notification:"overdue",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!1,date_medically_optimised:"",anticipated_discharge_date:"2024-01-22",dru_suitability:!1,optica_planned_discharge_date:"2024-01-22",optica_date_confirmed:"",dsum:null,medications_tta:"Antibiotics",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!0,initial_therapy_contact:"",equipment:"Oxygen",district_nurse_referral:!1}],Nv=[{id:"appt-001",appointment_time:"2024-01-18T09:00:00Z",patient_name:"Sarah Johnson",appointment_type:"Cardiology Consultation",consultant:"Dr. Smith",location:"Clinic Room 3",duration:30,status:"pending"},{id:"appt-002",appointment_time:"2024-01-18T10:30:00Z",patient_name:"Michael Davis",appointment_type:"Post-op Follow-up",consultant:"Dr. Johnson",location:"Surgery Ward",duration:15,status:"active"},{id:"appt-003",appointment_time:"2024-01-18T14:00:00Z",patient_name:"Emma Thompson",appointment_type:"Respiratory Assessment",consultant:"Dr. Wilson",location:"Emergency Department",duration:45,status:"pending"}],jv=[{id:"med-001",medication:"Amlodipine",dose:"5mg",frequency:"Once daily",route:"Oral",next_due:"2024-01-18T08:00:00Z",prescriber:"Dr. Smith",patient_name:"Sarah Johnson",allergies:null,priority:"medium"},{id:"med-002",medication:"Morphine",dose:"10mg",frequency:"Every 4 hours",route:"IV",next_due:"2024-01-18T10:00:00Z",prescriber:"Dr. Johnson",patient_name:"Michael Davis",allergies:"Codeine allergy",priority:"high"},{id:"med-003",medication:"Salbutamol",dose:"2 puffs",frequency:"As needed",route:"Inhaled",next_due:"2024-01-18T12:00:00Z",prescriber:"Dr. Wilson",patient_name:"Emma Thompson",allergies:null,priority:"high"}],Dv=[{id:"vitals-001",patient_name:"Sarah Johnson",recorded_time:"2024-01-18T07:30:00Z",temperature:36.8,blood_pressure:"140/90",heart_rate:82,respiratory_rate:16,oxygen_saturation:98,ews_score:3,priority:"medium"},{id:"vitals-002",patient_name:"Michael Davis",recorded_time:"2024-01-18T08:15:00Z",temperature:37.2,blood_pressure:"130/85",heart_rate:98,respiratory_rate:20,oxygen_saturation:95,ews_score:7,priority:"high"},{id:"vitals-003",patient_name:"Emma Thompson",recorded_time:"2024-01-18T09:00:00Z",temperature:38.5,blood_pressure:"110/70",heart_rate:105,respiratory_rate:24,oxygen_saturation:90,ews_score:9,priority:"high"}],hd=[{id:"PROD001",name:"Wireless Headphones",price:199.99,discountedPrice:149.99,inStock:!0,category:"Electronics",rating:4.5,reviews:1247,tags:["wireless","bluetooth","premium"]},{id:"PROD002",name:"Running Shoes",price:129.99,inStock:!0,category:"Sports",rating:4.8,reviews:892,tags:["running","athletic","comfortable"]},{id:"PROD003",name:"Coffee Maker",price:89.99,discountedPrice:59.99,inStock:!1,category:"Kitchen",rating:4.2,reviews:456,tags:["kitchen","coffee","appliance"]},{id:"PROD004",name:"Smartphone Case",price:24.99,inStock:!0,category:"Accessories",rating:4,reviews:234,tags:["protection","mobile","durable"]}],pd=[{id:"TXN001",date:new Date("2024-01-15"),amount:2500,type:"credit",category:"Salary",description:"Monthly salary payment",accountId:"ACC001",pending:!1,recurring:!0},{id:"TXN002",date:new Date("2024-01-14"),amount:89.5,type:"debit",category:"Groceries",description:"Supermarket shopping",accountId:"ACC001",pending:!1,recurring:!1},{id:"TXN003",date:new Date("2024-01-16"),amount:1200,type:"debit",category:"Rent",description:"Monthly rent payment",accountId:"ACC001",pending:!0,recurring:!0},{id:"TXN004",date:new Date("2024-01-13"),amount:150,type:"credit",category:"Refund",description:"Product return refund",accountId:"ACC001",pending:!1,recurring:!1}],md=[{id:"LEAD001",companyName:"Tech Solutions Inc",contactPerson:"John Smith",email:"john@techsolutions.com",status:"qualified",value:5e4,lastContact:new Date("2024-01-15"),source:"Website",isHotLead:!0},{id:"LEAD002",companyName:"Global Industries",contactPerson:"Maria Garcia",email:"maria@globalind.com",status:"contacted",value:25e3,lastContact:new Date("2024-01-14"),source:"Referral",isHotLead:!1},{id:"LEAD003",companyName:"StartupXYZ",contactPerson:"Alex Johnson",email:"alex@startupxyz.com",status:"new",value:15e3,lastContact:new Date("2024-01-16"),source:"Cold Call",isHotLead:!0}],Mv={dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>!(t.status&&!t.status.includes(n.status)||t.minValue&&n.value<t.minValue||t.hotLeadsOnly&&!n.isHotLead)):e,booleanRenderer:e=>o.jsx("span",{style:{color:e?"#dc2626":"#6b7280",fontWeight:e?"bold":"normal"},children:e?"ðŸ”¥ Hot Lead":"ðŸ“‹ Standard"}),getDataId:e=>`business-${e.id}`},Iv=()=>[{id:"patients",label:"Patients",data:fd,columns:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Records",ariaDescription:"Healthcare patient management with EWS monitoring",cardTemplate:(e,t)=>o.jsx(po,{data:e,columns:t,onSelect:n=>console.log("Selected patient:",n),onAction:(n,r)=>console.log("Patient action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})},{id:"appointments",label:"Appointments",data:Nv,columns:[{key:"appointment_time",label:"Time"},{key:"patient_name",label:"Patient"},{key:"appointment_type",label:"Type"},{key:"consultant",label:"Consultant"}],ariaLabel:"Patient Appointments",ariaDescription:"Scheduled appointments and consultations",cardTemplate:(e,t)=>o.jsx(mo,{data:e,columns:t,onSelect:n=>console.log("Selected appointment:",n),onAction:(n,r)=>console.log("Appointment action:",n,r),status:e.status})},{id:"medications",label:"Medications",data:jv,columns:[{key:"medication",label:"Medication"},{key:"dose",label:"Dose"},{key:"frequency",label:"Frequency"},{key:"next_due",label:"Next Due"}],ariaLabel:"Patient Medications",ariaDescription:"Medication administration and scheduling",cardTemplate:(e,t)=>o.jsx(go,{data:e,columns:t,onSelect:n=>console.log("Selected medication:",n),onAction:(n,r)=>console.log("Medication action:",n,r),priority:e.priority})},{id:"vitals",label:"Vital Signs",data:Dv,columns:[{key:"patient_name",label:"Patient"},{key:"recorded_time",label:"Time"},{key:"temperature",label:"Temperature"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Vital Signs",ariaDescription:"Patient vital signs monitoring and EWS scores",cardTemplate:(e,t)=>o.jsx(bo,{data:e,columns:t,onSelect:n=>console.log("Selected vitals:",n),onAction:(n,r)=>console.log("Vitals action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})}],Pv=()=>{const[e,t]=E.useState("healthcare"),n=E.useMemo(()=>({healthcare:{title:"Healthcare Workflow Management",description:"Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals",dataConfig:rd,tabPanels:Iv(),data:fd},ecommerce:{title:"E-commerce Product Catalog",description:"Product management with pricing and inventory",...dd("ecommerce",hd),data:hd},financial:{title:"Financial Transaction Dashboard",description:"Banking and financial data management",...dd("financial",pd),data:pd},business:{title:"Sales Lead Management",description:"Custom CRM configuration with business logic",dataConfig:Mv,tabPanels:Da(md,[{id:"all-leads",label:"All Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"status",label:"Status"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"isHotLead",label:"Priority"}],ariaLabel:"All Sales Leads Grid",ariaDescription:"Complete sales pipeline with lead information"},{id:"hot-leads",label:"Hot Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"lastContact",label:"Last Contact",render:i=>i.lastContact.toLocaleDateString()}],filter:i=>i.filter(a=>a.isHotLead),sortConfig:[{key:"value",direction:"desc"}],ariaLabel:"Hot Leads Grid",ariaDescription:"High-priority leads requiring immediate attention"},{id:"pipeline",label:"Active Pipeline",columns:[{key:"companyName",label:"Company"},{key:"status",label:"Status"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"source",label:"Source"}],filter:i=>i.filter(a=>["contacted","qualified"].includes(a.status)),ariaLabel:"Active Pipeline Grid",ariaDescription:"Leads currently in the sales pipeline"}]),data:md}}),[]),r=n[e];return o.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"AriaTabsDataGrid - Comprehensive Demo"}),o.jsx("p",{style:{fontSize:"1.1rem",color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:"This demo showcases the component's versatility across different domains: healthcare, e-commerce, financial services, and custom business applications. Each configuration demonstrates domain-specific data operations, custom renderers, and specialized filtering logic."}),o.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:Object.keys(n).map(i=>o.jsx(ft,{variant:e===i?"primary":"secondary",onClick:()=>t(i),style:{textTransform:"capitalize"},children:i},i))}),o.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem"},children:[o.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"0.5rem",color:"#1e293b"},children:r.title}),o.jsx("p",{style:{color:"#64748b",marginBottom:"1rem"},children:r.description}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.9rem"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Data Records:"})," ",r.data.length]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Tab Panels:"})," ",r.tabPanels.length]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Features:"})," ",["Row Selection","Custom Filtering","Domain-Specific Renderers","Keyboard Navigation","ARIA Compliance"].join(", ")]})]})]})]}),o.jsx(Na,{dataConfig:r.dataConfig,tabPanels:r.tabPanels,ariaLabel:`${r.title} Data Grid`,ariaDescription:`Interactive data grid for ${r.description.toLowerCase()}`}),o.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f1f5f9",borderRadius:"0.5rem",border:"1px solid #cbd5e1"},children:[o.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#334155"},children:"Implementation Details"}),o.jsxs("div",{style:{display:"grid",gap:"1rem",fontSize:"0.9rem"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Current Mode:"})," ",e," configuration"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Data Operations:"})," Custom comparator, filter function, and boolean renderer"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Architecture:"})," Generic core with domain-specific plugins and factory helpers"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"State Management:"})," Global row selection with data-object persistence"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Accessibility:"})," Full ARIA support with dynamic labels and descriptions"]})]})]})]})},_o=e=>o.jsx(Es,{...e}),$v=({children:e,pageTitle:t,pageHeadingProps:n,columnWidth:r=$n.TwoThirds,mainWrapperSize:i,skipLinkProps:a,headerProps:s,footerProps:l,service:u,navigation:c,search:d,account:f,organisation:p,logo:g,className:b,...h})=>{const m={service:u,navigation:c,search:d,account:f,organisation:p,logo:g,...s};return o.jsxs(o.Fragment,{children:[o.jsx(co,{...a}),o.jsx(la,{...m}),o.jsx(_o,{className:b,...h,children:o.jsx(Bs,{size:i,children:o.jsx(Fn,{children:o.jsxs(br,{width:r,children:[t&&o.jsx(Zt,{size:"l",...n,children:t}),e]})})})}),o.jsx(Hs,{...l})]})},Fv=({children:e,title:t,pageHeadingProps:n,columnWidth:r=$n.TwoThirds,mainWrapperSize:i="small",skipLinkProps:a,headerProps:s,footerProps:l,backLinkProps:u,serviceName:c,serviceHref:d,logo:f,className:p,...g})=>{const b={service:{text:c,href:d},logo:f,navigation:void 0,search:void 0,account:void 0,...s};return o.jsxs(o.Fragment,{children:[o.jsx(co,{...a}),o.jsx(la,{...b}),o.jsxs(_o,{className:p,...g,children:[u&&o.jsx(ra,{...u}),o.jsx(Bs,{size:i,children:o.jsx(Fn,{children:o.jsxs(br,{width:r,children:[t&&o.jsx(Zt,{style:{marginTop:"3rem"},size:"l",...n,children:t}),e]})})})]}),o.jsx(Hs,{...l})]})},gd=({text:e="Next",html:t,href:n="#",className:r,element:i="a",onClick:a,...s})=>{const l=xe("nhsuk-back-link",r),u=xe("nhsuk-back-link__link"),c=()=>o.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:o.jsx("path",{d:"M15.5 12c0 .3-.1.5-.3.7l-5 5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4L13.1 12 8.8 7.7c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l5 5c.2.2.3.4.3.7z"})})]});return o.jsx("div",{className:l,children:i==="button"?o.jsx("button",{className:u,type:"button",onClick:a,...s,children:c()}):o.jsx("a",{className:u,href:n,...s,children:c()})})};gd.displayName="ForwardLink";const kr=Object.freeze({small:320,smallMax:767,medium:768,large:1025,xlarge:1200,xxlarge:1440});function bd(){return typeof window>"u"?kr.small:window.innerWidth||document.documentElement.clientWidth||0}function vo(){const[e,t]=X.useState(bd());X.useEffect(()=>{if(typeof window>"u")return;const a=()=>t(bd());return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const n=X.useCallback(a=>e>=kr[a],[e]),r=X.useCallback(a=>e<kr[a],[e]),i=X.useCallback((a,s)=>e>=kr[a]&&e<kr[s],[e]);return{width:e,up:n,down:r,between:i,values:kr}}function Lv(e){const{width:t,values:n}=vo();let r=e.base;const i=["small","medium","large","xlarge","xxlarge"];for(const a of i){const s=n[a];t>=s&&e[a]!==void 0&&(r=e[a])}return r}function yd(e={}){const{enabled:t=!0,paramSelected:n="nsv",paramDrill:r="nsvDrill"}=e,[i,a]=X.useState(()=>typeof window>"u"||!t?void 0:new URLSearchParams(window.location.search).get(n)),[s,l]=X.useState(()=>typeof window>"u"||!t?!1:new URLSearchParams(window.location.search).get(r)==="1");return X.useEffect(()=>{if(!t||typeof window>"u")return;const u=new URLSearchParams(window.location.search);i?u.set(n,String(i)):u.delete(n),u.set(r,s?"1":"0");const c=`${window.location.pathname}?${u.toString()}${window.location.hash}`;window.history.replaceState(null,"",c)},[i,s,t,n,r]),{selectedId:i,setSelectedId:a,drilledIn:s,setDrilledIn:l}}const Av=({className:e})=>o.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{fill:"currentColor",d:"M10.7 3.3a1 1 0 0 1 0 1.4L7.41 8l3.3 3.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 0Z"})}),Ev=({className:e})=>o.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{fill:"currentColor",d:"M5.3 12.7a1 1 0 0 1 0-1.4L8.59 8l-3.3-3.3a1 1 0 0 1 1.42-1.4l4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.42 0Z"})});function _d(e){const{items:t,selectedId:n,defaultSelectedId:r,onSelectionChange:i,renderItemContent:a,renderContent:s,renderSecondaryContent:l,forceLayout:u,animated:c=!0,backLabel:d="Back",nextLabel:f="Next",isLoading:p=!1,emptyState:g,a11y:b,className:h,getId:m=ye=>ye.id,orientation:y="vertical",autoEnableThirdColumn:k=!0,onDrillChange:N,navigationInstructions:S="Use arrow keys to navigate, Enter to open.",initialFocus:x="first",skipFocusOnSelect:M=!1,skipAnnouncements:j=!1,onFocusChange:C,syncUrl:v=!1,urlParamSelected:$="nsv",urlParamDrill:T="nsvDrill",urlSyncDebounceMs:w=0,lazySecondary:L=!1,navFooter:P,collapsibleNav:D=!1,navInitiallyCollapsed:F=!1,onNavCollapseChange:A,collapseToggleLabelShow:ne="Show navigation",collapseToggleLabelHide:q="Hide navigation",collapseToggleIconShow:H,collapseToggleIconHide:U,persistNavCollapsed:G,navCollapsedStorageKey:oe="nsvCollapsed",navCollapsedUrlParam:z="nsvCollapsed",autoContentHeader:pe,contentHeaderLevel:we=2,renderContentHeader:fe,contentSubheader:de,secondarySubheader:Z}=e,{up:se}=vo(),[he,I]=X.useState(!1);X.useEffect(()=>{I(!0)},[]);const O=he&&se("medium"),V=he&&se("xlarge");let ae;u?ae=u:O?ae="two-column":ae="list",!u&&k&&l&&V&&(ae="three-column");const ee=yd({enabled:v,paramSelected:$,paramDrill:T}),[le,_e]=X.useState(()=>ee.selectedId!==void 0?ee.selectedId:r),Se=n!==void 0?n:le,me=t.find(ye=>m(ye)===Se),[R,Y]=X.useState(void 0);X.useEffect(()=>{if(Se===void 0)return;Y(Se);const ye=setTimeout(()=>Y(void 0),220);return()=>clearTimeout(ye)},[Se]);const K=X.useRef(null),te=X.useRef(null),B=X.useRef(null),Q=X.useRef(null),[re,ie]=X.useState(()=>({contentIndex:0,secondaryIndex:0})),[W,J]=X.useState(()=>"nav"),[ue,ge]=X.useState(0),ce=()=>[Q.current,te.current,B.current].filter(Boolean),Te=ye=>{const Ne=ce(),ve=Math.max(0,Math.min(ye,Ne.length-1));Ne[ve]?.focus(),ge(ve)},be=X.useCallback(ye=>ye?Array.from(ye.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(ve=>!ve.hasAttribute("disabled")&&ve.tabIndex!==-1):[],[]),Ie=X.useCallback(ye=>{const Ne=be(te.current);if(!Ne.length){te.current?.focus();return}const ve=Math.max(0,Math.min(ye,Ne.length-1)),Pe=Ne[ve];Pe.focus(),setTimeout(()=>{document.activeElement!==Pe&&(Pe.focus(),setTimeout(()=>{document.activeElement!==Pe&&Pe.click()},10))},10),ie(Ve=>({...Ve,contentIndex:ve}));const nt=Ve=>{Ve.key==="Escape"&&(Ve.preventDefault(),Ve.stopPropagation(),te.current?.focus(),Pe.removeEventListener("keydown",nt))};Ne.forEach(Ve=>{const Xe=Ve._escapeHandler;Xe&&Ve.removeEventListener("keydown",Xe)}),Pe._escapeHandler=nt,Pe.addEventListener("keydown",nt)},[be]),Ae=X.useCallback(ye=>{const Ne=be(B.current);if(!Ne.length){B.current?.focus();return}const ve=Math.max(0,Math.min(ye,Ne.length-1)),Pe=Ne[ve];Pe.focus(),setTimeout(()=>{document.activeElement!==Pe&&(Pe.focus(),setTimeout(()=>{document.activeElement!==Pe&&Pe.click()},10))},10),ie(Ve=>({...Ve,secondaryIndex:ve}));const nt=Ve=>{Ve.key==="Escape"&&(Ve.preventDefault(),Ve.stopPropagation(),B.current?.focus(),Pe.removeEventListener("keydown",nt))};Ne.forEach(Ve=>{const Xe=Ve._escapeHandler;Xe&&Ve.removeEventListener("keydown",Xe)}),Pe._escapeHandler=nt,Pe.addEventListener("keydown",nt)},[be]),We=ye=>{if(ye.defaultPrevented)return;const Ne=ye.key,ve=ye.target,Pe=!!St.current&&St.current.contains(ve),nt=!!te.current&&te.current.contains(ve),Ve=!!B.current&&B.current.contains(ve),Xe=!!B.current,Wr=ve===Q.current||ve===te.current||ve===B.current,gr=$e&&(ae==="list"||ae==="cards"),Ms=nt&&!!ve.closest(".nhs-navigation-split-view__header");if(W==="containers"&&Wr){if(Ne==="ArrowRight"){ye.preventDefault();const Fe=ce(),Ke=Math.min(Fe.length-1,ue+1);Te(Ke);return}if(Ne==="ArrowLeft"){ye.preventDefault();const Fe=Math.max(0,ue-1);Te(Fe);return}if(Ne==="Home"){ye.preventDefault(),Te(0);return}if(Ne==="End"){ye.preventDefault(),Te(ce().length-1);return}if(Ne==="Enter"||Ne===" "){if(ye.preventDefault(),ve===Q.current){if(J("nav"),St.current){const Fe=Array.from(St.current.querySelectorAll("[data-nav-item]"));(Fe[st>=0?st:0]||Fe[0])?.focus()}}else ve===te.current?(J("content"),Ie(re.contentIndex)):ve===B.current&&(J("secondary"),Ae(re.secondaryIndex));return}return}if(Ne==="Escape"){if(W==="content"||W==="secondary"){if(nt||Ve){if(ye.preventDefault(),J("nav"),St.current){const Ke=Array.from(St.current.querySelectorAll("[data-nav-item]"))[st>=0?st:0];setTimeout(()=>Ke?.focus(),10)}}else if((ve===te.current||ve===B.current)&&(ye.preventDefault(),J("nav"),St.current)){const Ke=Array.from(St.current.querySelectorAll("[data-nav-item]"))[st>=0?st:0];setTimeout(()=>Ke?.focus(),10)}}return}if(Ne==="Enter"||Ne===" "){if(ve.matches('button, a, input, select, textarea, [role="button"], [role="link"], [role="tab"]'))return;if(ve===te.current&&W==="content"){ye.preventDefault(),ye.stopPropagation(),be(te.current).length>0&&setTimeout(()=>{Ie(re.contentIndex)},50);return}if(ve===B.current&&W==="secondary"){ye.preventDefault(),ye.stopPropagation(),be(B.current).length>0&&setTimeout(()=>{Ae(re.secondaryIndex)},50);return}}if(gr&&Ms&&!Wr&&(Ne==="ArrowRight"||Ne==="ArrowLeft")){const Fe=be(te.current).filter(Ke=>Ke.closest(".nhs-navigation-split-view__header"));if(Fe.length>1){const Ke=Fe.indexOf(ve);if(Ke>=0){const k0=(Ke+(Ne==="ArrowRight"?1:-1)+Fe.length)%Fe.length;ye.preventDefault(),Fe[k0].focus();return}}}if(Ne==="ArrowRight"){if(Pe||W==="nav"){ye.preventDefault(),J("content"),setTimeout(()=>te.current?.focus(),10);return}if(nt||W==="content"){Xe&&(ye.preventDefault(),J("secondary"),setTimeout(()=>B.current?.focus(),10));return}}if(Ne==="ArrowLeft"){if(Ve||W==="secondary"){ye.preventDefault(),J("content"),setTimeout(()=>te.current?.focus(),10);return}if(nt||W==="content"){if(ye.preventDefault(),J("nav"),St.current){const Ke=Array.from(St.current.querySelectorAll("[data-nav-item]"))[st>=0?st:0];setTimeout(()=>Ke?.focus(),10)}return}}if(Ne==="Home"&&!Pe&&(ye.preventDefault(),J("nav"),St.current)){const Fe=Array.from(St.current.querySelectorAll("[data-nav-item]")),Ke=Fe[st>=0?st:0]||Fe[0];setTimeout(()=>Ke?.focus(),10)}if(Ne==="End"){const Fe=Xe?B.current:te.current;Fe&&!Fe.contains(ve)&&(ye.preventDefault(),Xe?(J("secondary"),setTimeout(()=>B.current?.focus(),10)):(J("content"),setTimeout(()=>te.current?.focus(),10)))}if(Ne==="ArrowDown"||Ne==="ArrowUp"){if(ve===te.current&&Ne==="ArrowDown"){ye.preventDefault(),be(te.current).length>0&&Ie(0);return}if(ve===B.current&&Ne==="ArrowDown"){ye.preventDefault(),be(B.current).length>0&&Ae(0);return}if(nt){const Fe=be(te.current);if(Fe.length){ye.preventDefault();const Ke=Ne==="ArrowDown"?1:-1,vn=(re.contentIndex+Ke+Fe.length)%Fe.length;Ie(vn)}}else if(Ve){const Fe=be(B.current);if(Fe.length){ye.preventDefault();const Ke=Ne==="ArrowDown"?1:-1,vn=(re.secondaryIndex+Ke+Fe.length)%Fe.length;Ae(vn)}}}},$e=!!me&&(ae==="list"||ae==="cards"),at=X.useMemo(()=>pe===void 0?{mobile:!0,tablet:!1,desktop:!1}:pe===!0?{mobile:!0,tablet:!0,desktop:!0}:pe===!1?{mobile:!1,tablet:!1,desktop:!1}:{mobile:pe.mobile!==void 0?pe.mobile:!0,tablet:pe.tablet||!1,desktop:pe.desktop||!1},[pe]),Dt=he&&se("medium")&&!se("xlarge"),Qe=he&&se("xlarge"),ct=!!l,dt=ae==="three-column",[bt,ea]=X.useState(!1);X.useEffect(()=>{dt&&bt&&ea(!1)},[dt,bt]),X.useEffect(()=>{bt&&!dt&&(J("secondary"),ge(2),setTimeout(()=>{B.current?.focus()},50))},[bt,dt]),X.useEffect(()=>{!bt&&!dt&&W==="secondary"&&(J("content"),ge(1),setTimeout(()=>{te.current?.focus()},50))},[bt,dt,W]);const Sc=!!me&&($e&&at.mobile||!$e&&Dt&&at.tablet||!$e&&Qe&&at.desktop)||ct&&!dt,RS=`h${we}`,Cc=me?X.createElement(RS,{style:{marginLeft:$e?32:0,marginRight:$e?32:0}},me.label):null,S0=$e?"mobile":Dt?"tablet":"desktop",HS=ct&&!dt&&!bt,kc=$e&&at.mobile?o.jsx(ra,{element:"button",text:d,style:{marginRight:16},onClick:()=>Ur(void 0,void 0)}):void 0,Tc=HS?o.jsx(gd,{element:"button",text:f,onClick:()=>{ea(!0)}}):void 0,Nc=!dt&&bt?o.jsx(ra,{element:"button",text:d,style:{marginRight:16},onClick:()=>ea(!1)}):void 0,OS=X.useMemo(()=>{if(!Sc||!me)return null;if(fe)return fe({item:me,detailActive:$e,context:S0,backLink:kc,defaultHeading:Cc});const ye=me&&de?typeof de=="function"?de(me):de:null;return o.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[Nc||kc,o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:[Cc,ye&&o.jsx("div",{className:"nhs-navigation-split-view__subheader",children:ye})]})]}),Tc&&o.jsx("div",{style:{marginLeft:"auto"},children:Tc})]})},[Sc,me,fe,$e,S0,kc,Nc,Cc,Tc,de]);X.useEffect(()=>{if(!v)return;const ye=ae==="three-column";let Ne=!1;const ve=()=>{Ne||(ee.selectedId!==Se&&ee.setSelectedId(Se),ee.drilledIn!==ye&&ee.setDrilledIn(ye))};if(w&&w>0){const Pe=setTimeout(ve,w);return()=>{Ne=!0,clearTimeout(Pe)}}else ve()},[v,ee,Se,ae,w]),X.useEffect(()=>{if(!v)return;const ye=()=>{const Ne=new URLSearchParams(window.location.search),ve=Ne.get($);Ne.get(T),_e(ve===null?void 0:ve)};return window.addEventListener("popstate",ye),()=>window.removeEventListener("popstate",ye)},[v,$,T,u,l]);const Ds=X.useRef(0),In=X.useRef(null),Ur=X.useCallback((ye,Ne)=>{ye!==Se&&(n===void 0&&_e(ye),i?.(ye,Ne))},[n,i,Se]);X.useEffect(()=>{if(!M&&$e&&te.current){const ye=setTimeout(()=>te.current?.focus(),30);return()=>clearTimeout(ye)}},[$e,Se,M]);const St=X.useRef(null),[st,ta]=X.useState(()=>x==="first"?0:-1);X.useEffect(()=>{if(st<0||!St.current)return;const Ne=Array.from(St.current.querySelectorAll("[data-nav-item]"))[st];if(Ne){document.activeElement!==Ne&&Ne.focus(),Ds.current=st;const ve=t[st];C?.(ve?m(ve):void 0,ve,st)}},[st,t,C,m]);const zS=ye=>{const Ne=y==="vertical"?"ArrowDown":"ArrowRight",ve=y==="vertical"?"ArrowUp":"ArrowLeft";if(ye.key==="ArrowRight"&&y==="vertical"){ye.preventDefault(),bt?(J("secondary"),setTimeout(()=>{B.current?.focus()},10)):(J("content"),setTimeout(()=>{te.current?.focus()},10));return}if(ye.key===Ne)ye.preventDefault(),ta(Pe=>Math.min(t.length-1,Pe+1));else if(ye.key===ve)ye.preventDefault(),ta(Pe=>Math.max(0,Pe-1));else if(ye.key==="Home")ye.preventDefault(),ta(0);else if(ye.key==="End")ye.preventDefault(),ta(t.length-1);else if(ye.key==="Enter"||ye.key===" "){ye.preventDefault();const Pe=t[st];Pe&&!Pe.disabled&&Ur(m(Pe),Pe)}else if(ye.key.length===1&&/[a-z0-9]/i.test(ye.key)){In.current||(In.current={buffer:"",last:0});const Pe=Date.now(),nt=700,Ve=ye.key.toLowerCase();Pe-In.current.last>nt?In.current.buffer=Ve:In.current.buffer+=Ve,In.current.last=Pe;let Xe=In.current.buffer;const Wr=Xe.split("").every(vn=>vn===Xe[0]),gr=t.map(vn=>String(vn.label||"").toLowerCase());let Ms=0;st>=0&&(Ms=(st+1)%t.length);let Fe;const Ke=(vn,k0)=>{const T0=t.length;for(let Mc=0;Mc<T0;Mc++){const Ic=(Ms+Mc)%T0;if(!t[Ic].disabled&&gr[Ic].startsWith(vn))return Ic}};Wr&&Xe.length>1?Fe=Ke(Xe[0]):(Fe=Ke(Xe),Fe===void 0&&Xe.length>1&&(Fe=Ke(Xe[Xe.length-1]),Fe!==void 0&&In.current&&(In.current.buffer=Xe[Xe.length-1]))),Fe!==void 0&&ta(Fe)}},US=X.useMemo(()=>{if(G&&(G==="url"||G==="both")&&typeof window<"u"){const Ne=new URLSearchParams(window.location.search).get(z);if(Ne==="1")return!0;if(Ne==="0")return!1}if(G&&(G==="localStorage"||G==="both")&&typeof window<"u")try{const ye=window.localStorage.getItem(oe);if(ye==="1")return!0;if(ye==="0")return!1}catch{}return F},[G,F,oe,z]),[_n,WS]=X.useState(US);X.useEffect(()=>{A?.(_n)},[_n,A]);const VS=X.useCallback(()=>{O&&D&&WS(ye=>!ye)},[O,D]);X.useEffect(()=>{if(G&&!(typeof window>"u")){if(G==="localStorage"||G==="both")try{window.localStorage.setItem(oe,_n?"1":"0")}catch{}if(G==="url"||G==="both"){const ye=new URLSearchParams(window.location.search);ye.set(z,_n?"1":"0");const Ne=`${window.location.pathname}?${ye.toString()}${window.location.hash}`;window.history.replaceState(null,"",Ne)}}},[_n,G,oe,z]);const GS=["nhs-navigation-split-view",c?"nhs-navigation-split-view--animated":"",$e?"nhs-navigation-split-view--detail-active":"",ae==="three-column"?"nhs-navigation-split-view--three-column":"",D&&O&&_n?"nhs-navigation-split-view--nav-collapsed":"",h].filter(Boolean).join(" "),jc=X.useRef(null);X.useEffect(()=>{if(!j&&jc.current){const ye=me?`Selected ${me.label}`:"Selection cleared";jc.current.textContent=ye}},[me,j]),X.useEffect(()=>{!$e&&Se==null&&St.current&&St.current.querySelectorAll("[data-nav-item]")[Ds.current]?.focus()},[$e,Se]);const Yn=ae==="three-column",[Dc,YS]=X.useState(!1);X.useEffect(()=>{Yn&&!Dc&&YS(!0)},[Yn,Dc]);const C0=X.useRef(Yn);X.useEffect(()=>{C0.current!==Yn&&(N?.(Yn),C0.current=Yn)},[Yn,N]);const qS=()=>{if(ae==="cards")return o.jsxs("ul",{className:"nhs-navigation-split-view__cards",role:"listbox","aria-activedescendant":Se?String(Se):void 0,children:[t.map(ve=>{const Pe=m(ve),nt=Pe===Se;return o.jsx("li",{className:"nhs-navigation-split-view__card-item",role:"option","aria-selected":nt,children:o.jsxs("button",{id:String(Pe),type:"button",className:"nhs-navigation-split-view__card","data-selected":nt||void 0,"data-disabled":ve.disabled||void 0,disabled:ve.disabled,onClick:()=>!ve.disabled&&Ur(Pe,ve),children:[ve.icon&&o.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:ve.icon}),o.jsx("span",{className:"nhs-navigation-split-view__item-label",children:ve.label}),ve.description&&o.jsx("span",{className:"nhs-navigation-split-view__item-description",children:ve.description}),a?.(ve),ve.badge!==void 0&&o.jsx("span",{className:"nhs-navigation-split-view__badge",children:ve.badge})]})},Pe)}),t.length===0&&!p&&o.jsx("li",{className:"nhs-navigation-split-view__card-item","aria-disabled":"true",children:g||o.jsx("div",{style:{padding:16},children:"No items"})})]});const ye="nsv-nav-instructions",Ne=X.useMemo(()=>X.memo(({item:ve,idx:Pe,selected:nt,focused:Ve})=>{const Xe=m(ve),Wr=ve.disabled?{"aria-disabled":!0,tabIndex:-1}:{tabIndex:Ve?0:-1,onClick:()=>{Ds.current=Pe,Ur(Xe,ve)},onKeyDown:gr=>{(gr.key==="Enter"||gr.key===" ")&&(gr.preventDefault(),Ds.current=Pe,Ur(Xe,ve))}};return o.jsxs("li",{id:String(Xe),"data-nav-item":!0,className:"nhs-navigation-split-view__list-item nhs-navigation-split-view__item-button",role:"option","aria-selected":nt,"aria-current":nt?"true":void 0,"data-selected":nt||void 0,"data-disabled":ve.disabled||void 0,...Wr,children:[ve.icon&&o.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:ve.icon}),o.jsxs("span",{className:"nhs-navigation-split-view__item-content",children:[o.jsx("span",{className:"nhs-navigation-split-view__item-label",children:ve.label}),ve.description&&o.jsx("span",{className:"nhs-navigation-split-view__item-description",children:ve.description}),a?.(ve)]}),ve.badge!==void 0&&o.jsx("span",{className:"nhs-navigation-split-view__badge",children:ve.badge})]})}),[m,Ur,a]);return o.jsxs(o.Fragment,{children:[o.jsxs("ul",{ref:St,className:"nhs-navigation-split-view__list",onKeyDown:zS,role:"listbox","aria-label":"Navigation items","aria-describedby":ye,"aria-activedescendant":Se?String(Se):void 0,children:[t.map((ve,Pe)=>o.jsx(Ne,{item:ve,idx:Pe,selected:m(ve)===Se,focused:Pe===st||st===-1&&Pe===0&&x==="first","data-just-selected":m(ve)===R?"true":void 0},m(ve))),t.length===0&&!p&&o.jsx("li",{className:"nhs-navigation-split-view__list-item","aria-disabled":"true",children:g||o.jsx("div",{style:{padding:16},children:"No items"})})]}),o.jsx("div",{id:ye,style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:S})]})};return o.jsx("div",{ref:K,className:GS,"aria-label":b?.rootLabel,"data-layout":ae,onKeyDown:We,children:o.jsxs("div",{className:"nhs-navigation-split-view__body",children:[o.jsxs("div",{className:"nhs-navigation-split-view__panes","data-active-detail":$e||void 0,style:{transform:$e?"translateX(-100%)":void 0},children:[o.jsxs("div",{ref:Q,className:"nhs-navigation-split-view__nav-pane",role:"navigation","aria-label":b?.navigationLabel||"Items","data-collapsed":_n||void 0,tabIndex:0,children:[D&&O&&o.jsx("div",{className:"nhs-navigation-split-view__nav-collapse",children:o.jsx("button",{type:"button",onClick:VS,className:"nhs-navigation-split-view__nav-collapse-btn","aria-label":_n?ne:q,title:_n?ne:q,children:_n?H||o.jsx(Ev,{}):U||o.jsx(Av,{})})}),o.jsx("div",{className:"nhs-navigation-split-view__nav-scroll",children:qS()}),P&&o.jsx("div",{className:"nhs-navigation-split-view__nav-footer",role:"contentinfo",children:P})]}),o.jsxs("div",{ref:te,className:"nhs-navigation-split-view__content-pane",role:"region","aria-label":b?.contentLabel||"Content","data-has-selection":!!me||void 0,tabIndex:0,style:{display:bt&&!dt?"none":void 0},children:[Sc&&o.jsx("div",{className:"nhs-navigation-split-view__header",children:OS}),o.jsx("div",{className:"nhs-navigation-split-view__content-inner",style:{padding:32,flex:1},children:s(me)})]}),ae==="three-column"&&(!L||Dc)||bt&&!dt?o.jsx("div",{ref:B,className:"nhs-navigation-split-view__secondary-pane",role:"region","aria-label":b?.secondaryContentLabel||"Secondary",tabIndex:0,children:o.jsxs("div",{className:"nhs-navigation-split-view__secondary-inner",style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[bt&&!dt&&o.jsx("div",{className:"nhs-navigation-split-view__header",children:o.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[Nc,o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:o.jsx("h2",{style:{marginLeft:0,marginRight:0},children:me&&typeof me=="object"&&"label"in me?me.label:String(me)})})]})})}),me&&Z&&o.jsx("div",{className:"nhs-navigation-split-view__secondary-header",style:{padding:"16px 32px",borderBottom:"1px solid var(--nsplit-divider)"},children:typeof Z=="function"?Z(me):Z}),o.jsx("div",{style:{padding:32,flex:1,minWidth:0},children:l?.(me)})]})}):null]}),o.jsx("div",{ref:jc,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"}}),o.jsx("div",{"aria-live":"polite",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:Yn?"Expanded to three column layout":"In two column layout"})]})})}_d.displayName="NavigationSplitView";const Bv=typeof window<"u"&&window.document?X.useLayoutEffect:X.useEffect,vd=(e,t,n,r)=>e==null||Number.isNaN(e)?r:Math.min(n,Math.max(t,e)),Rv=({item:e,maxLines:t,enableDrilldown:n,onExpand:r,isActive:i,topLaneIndex:a})=>{const{ariaLabel:s}=e,l=`${e._pxLeft}px`,u=`${e._pxWidth}px`,c=`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${a})`,d=Math.floor(e._startFraction)+2,f=Math.max(1,Math.round(e._spanColumns)),p=n&&e.childItems&&e.childItems.length>0,g=h=>{p&&(h.preventDefault(),r?.(e))},b=p?{role:"button",tabIndex:0,"aria-haspopup":"dialog","aria-expanded":i||!1,onClick:g,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&g(h),h.key==="Escape"&&i&&g(h)}}:{};return o.jsxs("div",{className:xe("nhsuk-product-roadmap__item",p&&"nhsuk-product-roadmap__item--expandable",i&&"nhsuk-product-roadmap__item--active"),style:{left:l,width:u,top:c,"--item-height":t},role:"gridcell","aria-label":s,"aria-colindex":d,"aria-colspan":f,...b,children:[o.jsx("div",{className:"nhsuk-product-roadmap__item-bg","aria-hidden":"true"}),o.jsxs("div",{className:"nhsuk-product-roadmap__item-content",children:[o.jsx("span",{className:"nhsuk-product-roadmap__item-title",children:e.title}),p&&o.jsx("span",{className:xe("nhsuk-product-roadmap__item-expander",i&&"nhsuk-product-roadmap__item-expander--open"),"aria-hidden":"true"})]})]})},xd=E.memo(({dateHeadings:e,categories:t,columnWidthPx:n=400,itemMaxLines:r=2,className:i,ariaLabel:a="Product roadmap",enableDrilldown:s=!1,onToggleItem:l,drilldownMode:u="overlay",...c})=>{const[d,f]=E.useState(()=>new Set),[p,g]=E.useState(()=>new Set),b=E.useRef(new Set),h=E.useCallback(w=>d.has(w),[d]),m=E.useCallback(w=>{f(L=>{const P=new Set(L);return P.has(w.id)?(P.delete(w.id),g(D=>{const F=new Set(D);return F.add(w.id),F}),setTimeout(()=>g(D=>{const F=new Set(D);return F.delete(w.id),F}),240),l?.(w.id,!1)):(P.add(w.id),l?.(w.id,!0)),P})},[l]);Bv(()=>{if(u!=="inline"||!s||typeof document>"u")return;const w=[];if(d.forEach(F=>{b.current.has(F)||w.push(F)}),b.current=new Set(d),!w.length)return;const L=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1,P=w.map(F=>`.nhsuk-product-roadmap__inline-children[data-parent="${F}"] .nhsuk-product-roadmap__inline-child`).join(","),D=Array.from(document.querySelectorAll(P));if(D.length){if(L){D.forEach(F=>{F.style.opacity="1",F.style.transform="translateY(0)"});return}Promise.resolve().then(()=>BS).then(F=>{(F.gsap||F.default||F).to(D,{opacity:1,y:0,duration:.32,ease:"power2.out",stagger:.05})}).catch(()=>{D.forEach(F=>{F.style.opacity="1",F.style.transform="translateY(0)"})})}},[d,u,s]);const y=E.useCallback(()=>{d.size&&f(new Set)},[d]),k=xe("nhsuk-product-roadmap",i),N=vd(n,120,1200,400),S=vd(r,1,6,2),x=E.useMemo(()=>e.map(w=>new Date(w+" 01")),[e]),M=E.useMemo(()=>{if(x.length===0){const P=new Date;return[P,P]}const w=new Date(x[0]),L=Qr.offset(new Date(x[x.length-1]),1);return[w,L]},[x]),j=E.useMemo(()=>lo().domain(M).range([0,x.length*N]),[M,x.length,N]),C=E.useCallback(w=>{if(w.startDate){const q=new Date(w.startDate),H=new Date(w.endDate??w.startDate);H<q&&H.setTime(q.getTime());const U=j(q),G=Qr.offset(new Date(H),1);let oe=j(G);Number.isFinite(oe)||(oe=U+N);const z=Math.max(N*.25,oe-U),pe=U/N,we=z/N;return{...w,_pxLeft:U,_pxWidth:z,_startFraction:pe,_spanColumns:we}}const L=w.date??1,P=w.dateOffset??0,D=w.length??1,F=w.partialLength??1,A=L-1+P,ne=D-1+F;return{...w,_pxLeft:A*N,_pxWidth:ne*N,_startFraction:A,_spanColumns:ne}},[j,N]),v=E.useMemo(()=>t.map(w=>{const P=w.roadmapItems.map(F=>{const A=!F.childItems&&F.children?{...F,childItems:F.children}:{...F};return C(A)}).sort((F,A)=>F._pxLeft!==A._pxLeft?F._pxLeft-A._pxLeft:A._pxWidth-F._pxWidth),D=[];return P.forEach(F=>{const A=F._pxLeft,ne=F._pxLeft+F._pxWidth;let q=D.findIndex(H=>H<=A);q===-1&&(q=D.length,D.push(0)),D[q]=ne,F.verticalPosition=q+1}),{...w,roadmapItems:P,_laneCount:D.length}}),[t,C]),$=E.useMemo(()=>v.map(w=>w._laneCount||1),[v]),T=E.useMemo(()=>`var(--category-width) ${e.map(()=>"var(--column-width)").join(" ")}`,[e]);return o.jsxs("div",{className:k,style:{"--column-width":`${N}px`,gridTemplateColumns:T},role:"grid","aria-label":a,"aria-colcount":e.length+1,"aria-rowcount":v.length+1,...c,children:[o.jsxs("div",{className:"nhsuk-product-roadmap__header-row",role:"row","aria-rowindex":1,children:[o.jsx("div",{className:"nhsuk-product-roadmap__header-cell",role:"columnheader","aria-colindex":1,children:o.jsx("span",{className:"nhsuk-visually-hidden",children:"Category"})}),e.map((w,L)=>o.jsx("div",{className:"nhsuk-product-roadmap__date-heading",role:"columnheader","aria-colindex":L+2,children:w},`${w}-${L}`))]}),v.map((w,L)=>{const P=L+2,D=$[L];let F,A=0,ne=[];s&&u==="inline"&&(ne=w.roadmapItems.filter(G=>h(G.id)&&G.childItems&&G.childItems.length).map(G=>({id:G.id,lane:G.verticalPosition||1,count:G.childItems.length})).sort((G,oe)=>G.lane-oe.lane),A=ne.reduce((G,oe)=>G+oe.count,0));const q=D+A;F=`calc((${q} * var(--roadmap-item-block-height)) + (max(0, ${q} - 1) * var(--roadmap-row-gap)))`;const H={};let U=0;return ne.forEach(G=>{U+=G.count,H[G.lane+1]=U}),o.jsxs("div",{className:"nhsuk-product-roadmap__row",role:"row","aria-rowindex":P,children:[o.jsx("div",{className:"nhsuk-product-roadmap__category-cell",role:"rowheader","aria-colindex":1,children:w.heading}),o.jsx("div",{className:"nhsuk-product-roadmap__items-row",style:{gridColumn:`2 / span ${e.length}`,height:F},children:o.jsx("div",{className:"nhsuk-product-roadmap__items-layer",children:w.roadmapItems.map((G,oe)=>{const z=(G.verticalPosition||1)-1,pe=ne.filter(Z=>Z.lane-1<z).reduce((Z,se)=>Z+se.count,0),we=z+pe,fe=h(G.id),de=p.has(G.id);return o.jsxs(E.Fragment,{children:[o.jsx(Rv,{item:G,maxLines:S,enableDrilldown:s,onExpand:m,isActive:fe,topLaneIndex:we,laneOffset:pe}),s&&u==="inline"&&(fe||de)&&G.childItems&&o.jsx("div",{"data-parent":G.id,className:"nhsuk-product-roadmap__inline-children","aria-label":`${G.title} child tasks`,children:G.childItems.map((Z,se)=>{const he="calc(var(--roadmap-item-block-height) * 0.75)";let I=G._pxLeft,O=G._pxWidth;if(Z.startDate){const ee=new Date(Z.startDate);let le=Z.endDate?new Date(Z.endDate):new Date(ee);le<ee&&(le=new Date(ee));const _e=new Date(le);_e.setDate(_e.getDate()+1);const Se=j(ee);let me=j(_e);(!Number.isFinite(me)||me<=Se)&&(me=Se+6),I=Se,O=Math.max(6,me-Se)}const ae=we+1+se;return o.jsxs("div",{className:xe("nhsuk-product-roadmap__inline-child",Z.status&&`nhsuk-product-roadmap__inline-child--status-${Z.status}`,!fe&&de&&"nhsuk-product-roadmap__inline-child--collapsing"),style:{left:`${I}px`,width:`${O}px`,top:`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${ae})`,height:he,opacity:fe?0:void 0,transform:fe?"translateY(-6px)":void 0},children:[o.jsx("div",{className:"nhsuk-product-roadmap__inline-child-bg"}),o.jsx("div",{className:"nhsuk-product-roadmap__inline-child-content",children:Z.title})]},Z.id??se)})})]},G.id??oe)})})})]},`${w.heading}-${L}`)}),s&&u==="overlay"&&d.size===1&&(()=>{const w=Array.from(d)[0],L=t.flatMap(P=>P.roadmapItems).find(P=>P.id===w);return!L||!L.childItems?null:o.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-overlay",role:"dialog","aria-modal":"true","aria-label":`${L.title} details`,children:[o.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-panel",children:[o.jsxs("header",{className:"nhsuk-product-roadmap__drilldown-header",children:[o.jsx("h3",{className:"nhsuk-product-roadmap__drilldown-title",children:L.title}),o.jsx("button",{type:"button",className:"nhsuk-product-roadmap__drilldown-close",onClick:y,"aria-label":"Close details",children:"Ã—"})]}),o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-content",children:L.content}),o.jsx("ul",{className:"nhsuk-product-roadmap__drilldown-children",children:L.childItems.map((P,D)=>o.jsxs("li",{className:"nhsuk-product-roadmap__drilldown-child",children:[o.jsx("strong",{className:"nhsuk-product-roadmap__drilldown-child-title",children:P.title}),P.content&&o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-child-content",children:P.content})]},P.id??D))})]}),o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-backdrop",onClick:y,"aria-hidden":"true"})]})})()]})});xd.displayName="ProductRoadmap";function wd(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=wd(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ma(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=wd(e))&&(r&&(r+=" "),r+=t);return r}function pt(e){return function(){return e}}const xo=Math.PI,wo=2*xo,Qn=1e-6,Hv=wo-Qn;function Sd(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ov(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Sd;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class zv{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Sd:Ov(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,u=r-t,c=i-n,d=s-t,f=l-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Qn)if(!(Math.abs(f*u-c*d)>Qn)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-s,b=i-l,h=u*u+c*c,m=g*g+b*b,y=Math.sqrt(h),k=Math.sqrt(p),N=a*Math.tan((xo-Math.acos((h+p-m)/(2*y*k)))/2),S=N/k,x=N/y;Math.abs(S-1)>Qn&&this._append`L${t+S*d},${n+S*f}`,this._append`A${a},${a},0,0,${+(f*g>d*b)},${this._x1=t+x*u},${this._y1=n+x*c}`}}arc(t,n,r,i,a,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),c=t+l,d=n+u,f=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Qn||Math.abs(this._y1-d)>Qn)&&this._append`L${c},${d}`,r&&(p<0&&(p=p%wo+wo),p>Hv?this._append`A${r},${r},0,1,${f},${t-l},${n-u}A${r},${r},0,1,${f},${this._x1=c},${this._y1=d}`:p>Qn&&this._append`A${r},${r},0,${+(p>=xo)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Cd(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new zv(t)}function kd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Td(e){this._context=e}Td.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Nd(e){return new Td(e)}function jd(e){return e[0]}function Dd(e){return e[1]}function Md(e,t){var n=pt(!0),r=null,i=Nd,a=null,s=Cd(l);e=typeof e=="function"?e:e===void 0?jd:pt(e),t=typeof t=="function"?t:t===void 0?Dd:pt(t);function l(u){var c,d=(u=kd(u)).length,f,p=!1,g;for(r==null&&(a=i(g=s())),c=0;c<=d;++c)!(c<d&&n(f=u[c],c,u))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(f,c,u),+t(f,c,u));if(g)return a=null,g+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:pt(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:pt(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:pt(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),l):r},l}function So(e,t,n){var r=null,i=pt(!0),a=null,s=Nd,l=null,u=Cd(c);e=typeof e=="function"?e:e===void 0?jd:pt(+e),t=typeof t=="function"?t:pt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Dd:pt(+n);function c(f){var p,g,b,h=(f=kd(f)).length,m,y=!1,k,N=new Array(h),S=new Array(h);for(a==null&&(l=s(k=u())),p=0;p<=h;++p){if(!(p<h&&i(m=f[p],p,f))===y)if(y=!y)g=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=p-1;b>=g;--b)l.point(N[b],S[b]);l.lineEnd(),l.areaEnd()}y&&(N[p]=+e(m,p,f),S[p]=+t(m,p,f),l.point(r?+r(m,p,f):N[p],n?+n(m,p,f):S[p]))}if(k)return l=null,k+""||null}function d(){return Md().defined(i).curve(s).context(a)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:pt(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:pt(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:pt(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:pt(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:pt(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:pt(+f),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:pt(!!f),c):i},c.curve=function(f){return arguments.length?(s=f,a!=null&&(l=s(a)),c):s},c.context=function(f){return arguments.length?(f==null?a=l=null:l=s(a=f),c):a},c}function Id(e){return e<0?-1:1}function Pd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),l=(a*i+s*r)/(r+i);return(Id(a)+Id(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function $d(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Co(e,t,n){var r=e._x0,i=e._y0,a=e._x1,s=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,i+l*t,a-l,s-l*n,a,s)}function Ia(e){this._context=e}Ia.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Co(this,this._t0,$d(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Co(this,$d(this,n=Pd(this,e,t)),n);break;default:Co(this,this._t0,n=Pd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},Object.create(Ia.prototype).point=function(e,t){Ia.prototype.point.call(this,t,e)};function Pa(e){return new Ia(e)}function Uv(e,t,n){const r=Kc(e,t);return lo().domain(r).range(n)}function Fd(e,t,n){const[r,i]=Kc(e,t);if(!(Number.isFinite(r)&&Number.isFinite(i)))return va().domain([0,0]).range(n);let s;if(r<=0)s=Math.min(0,r);else{const u=i-r,c=(u>0?u:r)*.1;s=Math.max(0,r-c),s===r&&(s=Math.max(0,r*.9))}const l=i??0;return va().domain([s,l]).nice().range(n)}function ko(e,t,n,r){const i=Md().x(t).y(n);return r?.smooth!==!1&&i.curve(Pa),i(e)??""}function Wv(e={}){const t=X.useRef(null),n=X.useMemo(()=>({top:e.top??16,right:e.right??16,bottom:e.bottom??32,left:e.left??48}),[e.bottom,e.left,e.right,e.top]),[r,i]=X.useState({width:0,height:0});X.useLayoutEffect(()=>{if(!t.current)return;const l=new ResizeObserver(u=>{for(const c of u){const{width:d,height:f}=c.contentRect;i({width:d,height:f})}});return l.observe(t.current),()=>l.disconnect()},[]);const a=Math.max(0,r.width-n.left-n.right),s=Math.max(0,r.height-n.top-n.bottom);return{width:r.width,height:r.height,innerWidth:a,innerHeight:s,margin:n,ref:t}}const Ld=X.createContext(null);function Ln(){return X.useContext(Ld)}const Ad=({height:e=240,margin:t,width:n,className:r="fdp-chart",children:i,role:a="group",ariaLabel:s})=>{const l=Wv(t),u={height:e,position:"relative"};return n!==void 0&&(u.width=typeof n=="number"?`${n}px`:n),o.jsx("div",{ref:l.ref,className:r,style:u,role:a,"aria-label":s,children:o.jsx(Ld.Provider,{value:l,children:i})})},To=X.createContext(null),er=()=>X.useContext(To),Ed=({series:e,innerWidth:t,innerHeight:n,parseX:r,children:i,xTickCount:a=6,yTickCount:s=5,yDomain:l,xPadding:u,yPadding:c})=>{const d=Ln(),f=t??d?.innerWidth??0,p=n??d?.innerHeight??0,g=X.useMemo(()=>e.flatMap(S=>S.data),[e]),b=X.useCallback(S=>{if(r)return r(S);const x=S.x;return x instanceof Date?x:new Date(x)},[r]),h=u??6,m=c??6,y=X.useMemo(()=>Uv(g,b,[h,Math.max(0,f-h)]),[g,b,f,h]),k=X.useMemo(()=>{if(l){const S=Fd([],x=>x.y,[Math.max(0,p-m),m]);return S.domain(l),S}return Fd(g,S=>S.y,[Math.max(0,p-m),m])},[g,p,l]),N=X.useMemo(()=>({xScale:y,yScale:k,getXTicks:(S=a)=>y.ticks(S),getYTicks:(S=s)=>k.ticks(S)}),[y,k,a,s]);return o.jsx(To.Provider,{value:N,children:i})},No=({type:e,scale:t,tickCount:n,tickValues:r,formatTick:i,label:a,offset:s,className:l,minLabelSpacing:u,maxTickLabelLength:c,autoMinLabelSpacing:d=e==="x",labelAngle:f=0,allowLabelWrap:p=!0,tickFormatPreset:g})=>{const b=er(),h=Ln(),m=t||(e==="x"?b?.xScale:b?.yScale),y=n??(e==="x"?6:5),k=typeof i=="function",N=X.useMemo(()=>{if(k||!g)return;const M=j=>new Intl.DateTimeFormat(void 0,j);switch(g){case"dayShortMonth":return j=>{const C=j instanceof Date?j:new Date(j);return`${C.getDate()}
${M({month:"short"}).format(C)}`};case"dayShortMonthYear":return j=>{const C=j instanceof Date?j:new Date(j);return`${C.getDate()}
${M({month:"short"}).format(C)} ${C.getFullYear()}`};case"shortMonth":return j=>{const C=j instanceof Date?j:new Date(j);return M({month:"short"}).format(C)};case"shortMonthYear":return j=>{const C=j instanceof Date?j:new Date(j);return`${M({month:"short"}).format(C)} ${C.getFullYear()}`};case"hourMinute":return j=>{const C=j instanceof Date?j:new Date(j);return M({hour:"2-digit",minute:"2-digit"}).format(C)};default:return}},[k,g]);let S=k?i:N||(M=>String(M));const x=X.useMemo(()=>r&&Array.isArray(r)?r:m?typeof m.ticks=="function"?m.ticks(y):m.domain?m.domain():[]:[],[m,y,r]);if(e==="x"&&!k&&!g&&x.length&&x.every(M=>M instanceof Date)){const M=x[0],j=x[x.length-1],C=j.getTime()-M.getTime(),v=24*3600*1e3,$=365*v,T=M.getFullYear()===j.getFullYear(),w=new Intl.DateTimeFormat(void 0,{month:"short"});if(C<2*v){const L=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"});S=P=>L.format(P)}else if(C<32*v)S=L=>{const P=L;return`${P.getDate()} ${w.format(P)}`};else if(C<$&&T)S=L=>w.format(L);else if(C<2*$){const L=new Set;S=P=>{const D=P,F=D.getMonth();return L.has(F)||L.add(F),`${w.format(D)} ${D.getFullYear()}`}}else S=L=>String(L.getFullYear())}if(!m||!h)return null;if(e==="x"){const M=s??h.innerHeight,j=typeof m.bandwidth=="function",C=j?m.bandwidth():0,v=w=>{const L=m(w);return j?L+C/2:L};let $=u??0;if(d&&u==null){const w=x.map(P=>S(P).replace(/\n.*/g,"")),L=w.length?w.reduce((P,D)=>P+D.length,0)/w.length:0;$=Math.max(12,Math.round(L*6+4))}const T=X.useMemo(()=>{if(r&&Array.isArray(r)||$<=0)return x;const w=[];let L=-1/0;for(const P of x){const D=v(P);D-L>=$&&(w.push(P),L=D)}return w},[x,m,$,r,j,C]);return o.jsxs("g",{className:["fdp-axis","fdp-axis--x",l].filter(Boolean).join(" "),transform:`translate(0,${M})`,fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[o.jsx("line",{x1:0,x2:h.innerWidth,y1:0,y2:0,stroke:"currentColor"}),T.map((w,L)=>{const P=S(w),D=c&&P.length>c?P.slice(0,Math.max(1,c-1))+"â€¦":P,F=p?D.split(/\n/):[D.replace(/\n/g," ")],A=f<0?"end":f>0?"start":"middle";return o.jsxs("g",{transform:`translate(${v(w)},0)`,children:[o.jsx("line",{y2:6,stroke:"currentColor"}),o.jsxs("text",{y:9,textAnchor:A,className:"fdp-axis__tick",dominantBaseline:"hanging",transform:f?`rotate(${f})`:void 0,fontFamily:"inherit",children:[F.map((ne,q)=>o.jsx("tspan",{x:0,dy:q===0?0:"1.1em",children:ne},q)),D!==P&&o.jsx("title",{children:P})]})]},w?.toString?.()||L)})]})}return o.jsxs("g",{className:["fdp-axis","fdp-axis--y",l].filter(Boolean).join(" "),fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[x.map((M,j)=>{const C=S(M),v=c&&C.length>c?C.slice(0,Math.max(1,c-1))+"â€¦":C,$=p?v.split(/\n/):[v.replace(/\n/g," ")];return o.jsxs("g",{transform:`translate(0,${m(M)})`,children:[o.jsx("line",{x2:-6,stroke:"currentColor"}),o.jsxs("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:[$.map((T,w)=>o.jsx("tspan",{x:-9,dy:w===0?0:"1.1em",children:T},w)),v!==C&&o.jsx("title",{children:C})]})]},M?.toString?.()||j)}),a&&o.jsx("text",{transform:"rotate(-90)",x:-h.innerHeight/2,y:-h.margin.left+12,textAnchor:"middle",className:"fdp-axis__label",fontFamily:"inherit",children:a})]})},Bd=({axis:e="y",tickCount:t,stroke:n="var(--fdp-chart-grid,#e5e5e5)",dasharray:r="2 4",className:i})=>{const a=er(),s=Ln();if(!a||!s)return null;const l=e==="y"?a.getYTicks(t):a.getXTicks(t);return o.jsxs("g",{className:["fdp-grid",i].filter(Boolean).join(" "),children:[e==="y"&&l.map((u,c)=>o.jsx("line",{x1:0,x2:s.innerWidth,y1:a.yScale(u),y2:a.yScale(u),stroke:n,strokeDasharray:r},c)),e==="x"&&l.map((u,c)=>o.jsx("line",{y1:0,y2:s.innerHeight,x1:a.xScale(u),x2:a.xScale(u),stroke:n,strokeDasharray:r},c))]})},ai={color:{"data-viz":{$type:"color",categorical:{1:{$value:"{color.primary.blue}",$description:"Series 1 â€“ NHS Blue (brand core)"},2:{$value:"#41B6E6",$description:"Series 2 â€“ NHS Light Blue (new)"},3:{$value:"{color.secondary.aqua-green}",$description:"Series 3 â€“ NHS Aqua Green (existing)"},4:{$value:"#78BE20",$description:"Series 4 â€“ NHS Light Green (new)"},5:{$value:"{color.primary.green}",$description:"Series 5 â€“ NHS Green (existing)"},6:{$value:"{color.secondary.warm-yellow}",$description:"Series 6 â€“ NHS Warm Yellow (existing; distinct from focus yellow)"},7:{$value:"#ED4F00",$description:"Series 7 â€“ NHS Tangerine (new; warmer/deeper than existing orange)"},8:{$value:"{color.secondary.pink}",$description:"Series 8 â€“ NHS Pink (existing)"},9:{$value:"#E317AA",$description:"Series 9 â€“ NHS Bright Pink (new vivid accent)"},10:{$value:"#880FB8",$description:"Series 10 â€“ NHS Light Purple (new mid purple)"},11:{$value:"{color.primary.purple}",$description:"Series 11 â€“ NHS Purple (existing dark purple)"},12:{$value:"#9A6324",$description:"Series 12 â€“ NHS Brown (new; earth neutral)"}},neutral:{comparison:{$value:"{color.grey.1}",$description:"Neutral comparison series (optional)"}},region:{$comment:"Fixed colours for NHS geographical regions; prefer stable mapping for maps. London colour updated (#78BE21 â€“ light green).","north-east":{$value:"{color.primary.blue}",$description:"North East â€“ NHS Blue"},"north-west":{$value:"#41B6E6",$description:"North West â€“ NHS Light Blue"},"east-of-england":{$value:"{color.primary.purple}",$description:"East of England â€“ NHS Purple"},midlands:{$value:"{color.secondary.pink}",$description:"Midlands â€“ NHS Pink"},london:{$value:"#78BE21",$description:"London â€“ NHS Light Green (new)"},"south-west":{$value:"#FAE100",$description:"South West â€“ NHS Yellow variant (new)"},"south-east":{$value:"#ed8b00",$description:"South East â€“ NHS Orange (existing base orange)"}},severity:{$comment:"Semantic severity / alert colours (light background ramp â†’ critical).",low:{$value:"{color.secondary.pale-yellow}",$description:"Low severity â€“ pale yellow background"},moderate:{$value:"{color.secondary.warm-yellow}",$description:"Moderate severity â€“ warm yellow"},high:{$value:"{color.secondary.orange}",$description:"High severity â€“ orange"},critical:{$value:"{color.primary.red}",$description:"Critical severity â€“ red"}},"org-level":{$comment:"Organisational level semantic colours (stable NHS brand mappings).",trust:{$value:"{color.primary.blue}",$description:"Trust â€“ NHS Blue"},ambulance:{$value:"{color.primary.green}",$description:"Ambulance â€“ NHS Green"},icb:{$value:"{color.primary.dark-pink}",$description:"ICB â€“ NHS Dark Pink"},region:{$value:"{color.primary.purple}",$description:"Region â€“ NHS Purple"}},stroke:{$comment:"Automatic contrast stroke colours for overlays / borders. Light fills get dark stroke; dark fills get white stroke.",categorical:{1:{$value:"#ffffff",$description:"Stroke for series 1 (blue)"},2:{$value:"#212b32",$description:"Stroke for series 2 (light blue)"},3:{$value:"#212b32",$description:"Stroke for series 3 (aqua green)"},4:{$value:"#212b32",$description:"Stroke for series 4 (light green)"},5:{$value:"#ffffff",$description:"Stroke for series 5 (green)"},6:{$value:"#212b32",$description:"Stroke for series 6 (warm yellow)"},7:{$value:"#ffffff",$description:"Stroke for series 7 (tangerine)"},8:{$value:"#ffffff",$description:"Stroke for series 8 (pink)"},9:{$value:"#ffffff",$description:"Stroke for series 9 (bright pink)"},10:{$value:"#ffffff",$description:"Stroke for series 10 (light purple)"},11:{$value:"#ffffff",$description:"Stroke for series 11 (purple)"},12:{$value:"#ffffff",$description:"Stroke for series 12 (brown)"}},region:{$comment:"Region stroke colours derived from fill colours: dark fills lightened ~35%; light fills darkened ~25% for consistent contrast without defaulting to pure white/black.","north-east":{$value:"#5996D1",$description:"Stroke for North East (blue lightened 35%)"},"north-west":{$value:"#3189AD",$description:"Stroke for North West (light blue darkened 25%)"},"east-of-england":{$value:"#7A59A3",$description:"Stroke for East of England (purple lightened 35%)"},midlands:{$value:"#CA71A4",$description:"Stroke for Midlands (pink lightened 35%)"},london:{$value:"#5A8F19",$description:"Stroke for London (light green darkened 25%)"},"south-west":{$value:"#BCA900",$description:"Stroke for South West (yellow darkened 25%)"},"south-east":{$value:"#B26800",$description:"Stroke for South East (orange darkened 25%)"}},severity:{$comment:"Contrast strokes for severity colours (light backgrounds use dark stroke; dark backgrounds use white).",low:{$value:"#212b32",$description:"Stroke for low severity (pale yellow fill)"},moderate:{$value:"#212b32",$description:"Stroke for moderate severity (warm yellow fill)"},high:{$value:"#212b32",$description:"Stroke for high severity (orange fill)"},critical:{$value:"#ffffff",$description:"Stroke for critical severity (red fill)"}},"org-level":{$comment:"Contrast strokes for organisational level colours (all dark brand fills so white stroke for consistency).",trust:{$value:"#ffffff",$description:"Stroke for trust (blue fill)"},ambulance:{$value:"#ffffff",$description:"Stroke for ambulance (green fill)"},icb:{$value:"#ffffff",$description:"Stroke for ICB (dark pink fill)"},region:{$value:"#ffffff",$description:"Stroke for region (purple fill)"}}},spc:{$comment:"SPC (Statistical Process Control) semantic variation colours aligned to SPCChart.scss and SPCIcons.",improvement:{$value:"#00B0F0",$description:"SPC special cause improvement (favourable)"},concern:{$value:"#E46C0A",$description:"SPC special cause concern (deteriorating)"},"no-judgement":{$value:"#490092",$description:"SPC special cause (no directional judgement)"},"common-cause":{$value:"#A6A6A6",$description:"SPC common cause (baseline variation)"},"assurance-pass":{$value:"#00823B",$description:"SPC assurance pass indicator (process capable)"},"assurance-fail":{$value:"#DA291C",$description:"SPC assurance fail indicator (process not capable)"},gradient:{$comment:"Opacity stops for SPC icon gradient wash (applied top-left -> bottom-right). Consumers build gradients using these opacities + base colour.",stop:{"start-opacity":{$value:"0.18",$description:"Start stop opacity (0%) for classic variant wash"},"mid-opacity":{$value:"0.06",$description:"Mid stop opacity (~65-75%)"},"end-opacity":{$value:"0",$description:"End stop opacity (100%)"},"triangle-start-opacity":{$value:"0.18",$description:"Start opacity for triangle variants (kept aligned)"},"triangle-mid-opacity":{$value:"0.06",$description:"Mid opacity for triangle variants"},"triangle-end-opacity":{$value:"0",$description:"End opacity for triangle variants"}}},stroke:{$comment:"Contrast stroke colours for SPC variation fills.",improvement:{$value:"#000000",$description:"Stroke for improvement points"},concern:{$value:"#000000",$description:"Stroke for concern points"},"no-judgement":{$value:"#000000",$description:"Stroke for no-judgement points"},"common-cause":{$value:"#ffffff",$description:"Stroke for common cause points"},"assurance-pass":{$value:"#000000",$description:"Stroke for assurance pass points"},"assurance-fail":{$value:"#000000",$description:"Stroke for assurance fail points"}}}}}},$a={color:{primary:{$type:"color",blue:{$value:"#005eb8",$description:"NHS Blue - Primary brand color"},"blue-active":{$value:"#002f5c",$description:"NHS Active Blue (50% shade) â€“ alias of button/login active; promoted for general reuse"},white:{$value:"#ffffff",$description:"NHS White"},black:{$value:"#212b32",$description:"NHS Black"},green:{$value:"#007f3b",$description:"NHS Green"},purple:{$value:"#330072",$description:"NHS Purple"},"dark-pink":{$value:"#7c2855",$description:"NHS Dark Pink"},red:{$value:"#d5281b",$description:"NHS Red"},"light-purple":{$value:"#880FB8",$description:"NHS Light Purple (data viz promoted)"},yellow:{$value:"#ffeb3b",$description:"NHS Yellow"}},secondary:{$type:"color","pale-yellow":{$value:"#fff9c4",$description:"NHS Pale Yellow"},"warm-yellow":{$value:"#ffb81c",$description:"NHS Warm Yellow"},"region-yellow":{$value:"#FAE100",$description:"NHS Region Yellow (maps)"},orange:{$value:"#ed8b00",$description:"NHS Orange"},tangerine:{$value:"#ED4F00",$description:"NHS Tangerine (data viz promoted)"},"aqua-green":{$value:"#00a499",$description:"NHS Aqua Green"},"light-blue":{$value:"#41B6E6",$description:"NHS Light Blue (data viz promoted)"},pink:{$value:"#ae2573",$description:"NHS Pink"},"bright-pink":{$value:"#E317AA",$description:"NHS Bright Pink (data viz promoted)"},"light-green":{$value:"#78BE20",$description:"NHS Light Green (data viz promoted)"},brown:{$value:"#9A6324",$description:"NHS Brown (data viz promoted neutral)"}},grey:{1:{$value:"#4c6272",$description:"NHS Grey 1 - Darkest grey"},2:{$value:"#768692",$description:"NHS Grey 2 - Darker grey"},3:{$value:"#aeb7bd",$description:"NHS Grey 3 - Medium grey"},4:{$value:"#d8dde0",$description:"NHS Grey 4 - Light grey"},5:{$value:"#f0f4f5",$description:"NHS Grey 5 - Lightest grey"},$type:"color"},accessibility:{$type:"color",$comment:"Accessibility-oriented color tokens. Includes CVD-safe pairs and Okabeâ€“Ito colors. Use these for positive/negative semantics and colour-blindâ€“friendly defaults.","okabe-ito":{green:{$value:"#009E73",$description:"Okabeâ€“Ito green (CVD-safe) â€“ recommended positive"},vermillion:{$value:"#D55E00",$description:"Okabeâ€“Ito vermillion / redâ€“orange (CVD-safe) â€“ recommended negative"}},"cvd-safe":{blue:{$value:"#1f77b4",$description:"CVD-safe blue (pairs with orange); widely used in Matplotlib/Tableau sets"},orange:{$value:"#ff7f0e",$description:"CVD-safe orange (pairs with blue)"}},positive:{$value:"{color.accessibility.okabe-ito.green}",$description:"Accessibility semantic alias â€“ positive"},negative:{$value:"{color.accessibility.okabe-ito.vermillion}",$description:"Accessibility semantic alias â€“ negative"}}}},Vv=["#005eb8","#0072ce","#41b6e6","#00a499","#7c2855","#330072","#d5281b","#ffb81c","#fae100","#4c6272","#768692","#aeb7bd"];let jo=null,Do=null,Mo=null,Rd="optimized";function Gv(){const e={color:{...$a.color,...ai.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!a)return;const s=a.$value||a.value;if(typeof s=="string"&&/^\{.+\}$/.test(s))return t(s.slice(1,-1),i);if(typeof s=="string")return s},n=[];try{for(let r=1;r<=12;r++){const i=`color.data-viz.categorical.${r}`,a=t(i);if(!a)throw new Error(`Missing token ${i}`);n.push(a)}return n}catch{return Vv}}function Yv(){return jo||(jo=Gv()),jo}function qv(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.trim());return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Io(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Xv(e,t,n){const r=Io(e),i=Io(t),a=Io(n),s=r*.4124+i*.3576+a*.1805,l=r*.2126+i*.7152+a*.0722,u=r*.0193+i*.1192+a*.9505;return{x:s*100,y:l*100,z:u*100}}function Kv(e,t,n){let s=e/95.047,l=t/100,u=n/108.883;const c=d=>d>.008856?Math.cbrt(d):7.787*d+16/116;return s=c(s),l=c(l),u=c(u),{L:116*l-16,a:500*(s-l),b:200*(l-u)}}function Hd(e){const t=qv(e);if(!t)return null;const n=Xv(t.r,t.g,t.b);return Kv(n.x,n.y,n.z)}function Od(e,t){const n=e.L-t.L,r=e.a-t.a,i=e.b-t.b;return Math.sqrt(n*n+r*r+i*i)}function Jv(){const e=Yv();if(e.length<=2)return e.slice();const t=e.map(s=>Hd(s));let n=0,r=-1;for(let s=0;s<e.length;s++){const l=t[s];if(!l)continue;let u=0,c=0;for(let f=0;f<e.length;f++)s!==f&&t[f]&&(u+=Od(l,t[f]),c++);const d=u/Math.max(1,c);d>r&&(r=d,n=s)}const i=new Set(e.map((s,l)=>l)),a=[];for(a.push(n),i.delete(n);i.size;){let s=Array.from(i)[0],l=-1;for(const u of i){const c=t[u];if(!c)continue;let d=1/0;for(const f of a){const p=t[f];if(p){const g=Od(c,p);g<d&&(d=g)}}d>l&&(l=d,s=u)}a.push(s),i.delete(s)}return a.map(s=>e[s])}function Zv(){return Do||(Do=Jv()),Do}function Qv(e,t,n){const r=(e+16)/116,i=t/500+r,a=r-n/200,s=d=>{const f=d*d*d;return f>.008856?f:(d-16/116)/7.787},l=s(i)*95.047,u=s(r)*100,c=s(a)*108.883;return{X:l,Y:u,Z:c}}function ex(e,t,n){e/=100,t/=100,n/=100;let r=e*3.2406+t*-1.5372+n*-.4986,i=e*-.9689+t*1.8758+n*.0415,a=e*.0557+t*-.204+n*1.057;const s=l=>l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055;return r=Math.min(1,Math.max(0,s(r))),i=Math.min(1,Math.max(0,s(i))),a=Math.min(1,Math.max(0,s(a))),{r:Math.round(r*255),g:Math.round(i*255),b:Math.round(a*255)}}function tx(e,t,n){return`#${[e,t,n].map(r=>r.toString(16).padStart(2,"0")).join("")}`}function nx(e,t){const n=Hd(e);if(!n)return e;const r=Math.min(100,Math.max(0,n.L+t)),{X:i,Y:a,Z:s}=Qv(r,n.a,n.b),l=ex(i,a,s);return tx(l.r,l.g,l.b)}function rx(){const e=Zv(),n=[12,-12,24,-24].map(i=>e.map(a=>nx(a,i))),r=[...e];return n.forEach(i=>r.push(...i)),r}function ix(){return(!Mo||ax())&&(Mo=rx(),zd=Rd),Mo}let zd=null;function ax(){return zd!==Rd}function tn(e){const t=ix();return t[e%t.length]}let Tr=null,si=null,oi=null,li=null;function sx(){const e=ai?.color?.["data-viz"]?.stroke;if(e){const t=e.categorical||{};Tr=[];for(let a=1;a<=12;a++){const s=t[String(a)]?.$value||t[String(a)]?.value;Tr.push(typeof s=="string"?s:"#212b32")}const n=e.region||{};si={},Object.keys(n).forEach(a=>{const s=n[a]?.$value||n[a]?.value;typeof s=="string"&&(si[a]=s)});const r=e.severity||{},i=e["org-level"]||{};li={},Object.keys(i).forEach(a=>{const s=i[a]?.$value||i[a]?.value;typeof s=="string"&&(li[a]=s)}),oi={},Object.keys(r).forEach(a=>{const s=r[a]?.$value||r[a]?.value;typeof s=="string"&&(oi[a]=s)})}}function Fa(){(!Tr||!si||!oi||!li)&&sx()}function tr(e){return Fa(),Tr?Tr[e%Tr.length]:"#212b32"}function ox(e){return Fa(),si?si[e]:void 0}function La(e,t){return ox(e)||tr(t)}const Po=["low","moderate","high","critical"];let $o=null;function lx(){const e={color:{...$a.color,...ai.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!a)return;const s=a.$value||a.value;return typeof s=="string"&&/^\{.+\}$/.test(s)?t(s.slice(1,-1),i):typeof s=="string"?s:void 0},n={};return Po.forEach(r=>{const i=t(`color.data-viz.severity.${r}`);i&&(n[r]=i)}),n}function Ud(){return $o||($o=lx()),$o}function cx(e){return Ud()[e.toLowerCase()]}function ux(e,t){return cx(e)||Ud()[Po[t%Po.length]]||tn(t)}function dx(e){return Fa(),oi?oi[e]:void 0}function fx(e,t){return dx(e)||tr(t)}const Fo=["trust","ambulance","icb","region"];let Lo=null;function hx(){const e={color:{...$a.color,...ai.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!a)return;const s=a.$value||a.value;return typeof s=="string"&&/^\{.+\}$/.test(s)?t(s.slice(1,-1),i):typeof s=="string"?s:void 0},n={};return Fo.forEach(r=>{const i=t(`color.data-viz.org-level.${r}`);i&&(n[r]=i)}),n}function Wd(){return Lo||(Lo=hx()),Lo}function px(e){return Wd()[e.toLowerCase()]}function mx(e,t){return px(e)||Wd()[Fo[t%Fo.length]]||tn(t)}function gx(e){return Fa(),li?li[e]:void 0}function bx(e,t){return gx(e)||tr(t)}let Ao=null;const yx=["north-east","north-west","east-of-england","midlands","london","south-west","south-east"];function _x(e){return e.trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function vx(){const e={color:{...$a.color,...ai.color}},t=(i,a=new Set)=>{if(a.has(i))return;a.add(i);const s=i.split(".").reduce((u,c)=>u?u[c]:void 0,e);if(!s)return;const l=s.$value||s.value;return typeof l=="string"&&/^\{.+\}$/.test(l)?t(l.slice(1,-1),a):typeof l=="string"?l:void 0},n={},r=[];return yx.forEach(i=>{const a=t(`color.data-viz.region.${i}`);a?n[i]=a:r.push(i)}),process.env.NODE_ENV!=="production"&&(Object.keys(n).length===0?console.warn("[DataViz] Region colour tokens unresolved  falling back to categorical colours."):r.length&&console.warn(`[DataViz] Missing region colour tokens: ${r.join(", ")}.`)),n}function xx(){return Ao||(Ao=vx()),Ao}function wx(e){return xx()[_x(e)]}function Nr(e,t){return wx(e)||tn(t)}const Vd=X.createContext(null),ci=()=>X.useContext(Vd),Sx=({initialHiddenIds:e=[],children:t,hiddenIds:n,onChange:r})=>{const[i,a]=X.useState(()=>new Set(e)),s=n!==void 0,l=X.useMemo(()=>s?new Set(n):i,[s,n,i]),u=X.useCallback(d=>{s||a(new Set(d)),r?.(Array.from(d))},[s,r]),c=X.useMemo(()=>({hiddenIds:l,isHidden:d=>l.has(d),toggle:d=>{const f=new Set(l);f.has(d)?f.delete(d):f.add(d),u(f)},showOnly:d=>{u(new Set)},showAll:()=>u(new Set),setHidden:d=>u(new Set(Array.isArray(d)?d:Array.from(d)))}),[l,u]);return o.jsx(Vd.Provider,{value:c,children:t})},Gd=X.createContext(null),kn=()=>X.useContext(Gd),Yd=({children:e,maxDistance:t=40,wrapAround:n=!1})=>{const r=er(),i=ci(),[a,s]=X.useState(null),l=X.useRef(new Map),[u,c]=X.useState([]),d=X.useCallback((j,C)=>{l.current.set(j,C)},[]),f=X.useCallback(j=>{l.current.delete(j)},[]),p=X.useCallback((j,C)=>{if(!r)return;const{xScale:v,yScale:$}=r;let T=null,w=1/0;l.current.forEach((L,P)=>{L.forEach((D,F)=>{const A=v(D.x),ne=$(D.y),q=A-j,H=ne-C,U=Math.sqrt(q*q+H*H);U<w&&(w=U,T={seriesId:P,index:F,x:D.x,y:D.y,clientX:A,clientY:ne})})}),T&&w<=t?s(T):s(null)},[r,t]),g=X.useCallback(()=>s(null),[]);X.useEffect(()=>{if(!a){c([]);return}if(!r)return;const{xScale:j,yScale:C}=r,v=[];l.current.forEach(($,T)=>{$.forEach((w,L)=>{(a.x instanceof Date&&w.x instanceof Date?w.x.getTime()===a.x.getTime():w.x===a.x)&&v.push({seriesId:T,index:L,x:w.x,y:w.y,clientX:j(w.x),clientY:C(w.y)})})}),v.sort(($,T)=>$.seriesId.localeCompare(T.seriesId)),c(v)},[a,r]);const b=X.useCallback(j=>{if(!a)return;const C=l.current.get(a.seriesId);if(!C)return;let v=a.index+j;if(v<0||v>=C.length){if(!n)return;v=(v+C.length)%C.length}const $=C[v];if(!r)return;const{xScale:T,yScale:w}=r;s({seriesId:a.seriesId,index:v,x:$.x,y:$.y,clientX:T($.x),clientY:w($.y)})},[a,r,n]),h=X.useCallback(j=>{let C=Array.from(l.current.keys());if(i&&(C=C.filter(A=>!i.isHidden(A))),C.length===0)return;if(!a){const A=C[0],ne=l.current.get(A);if(!ne||!r)return;const{xScale:q,yScale:H}=r,U=ne[0];s({seriesId:A,index:0,x:U.x,y:U.y,clientX:q(U.x),clientY:H(U.y)});return}const v=C.indexOf(a.seriesId);if(v===-1)return;let $=v+j;if($<0||$>=C.length){if(!n)return;$=($+C.length)%C.length}const T=C[$],w=l.current.get(T);if(!w||!r)return;const L=Math.min(a.index,w.length-1),P=w[L],{xScale:D,yScale:F}=r;s({seriesId:T,index:L,x:P.x,y:P.y,clientX:D(P.x),clientY:F(P.y)})},[a,r,n,i]),m=X.useCallback(()=>{let j=Array.from(l.current.keys());if(i&&(j=j.filter(L=>!i.isHidden(L))),j.length===0)return;const C=a?a.seriesId:j[0],v=l.current.get(C);if(!v||v.length===0||!r)return;const $=v[0],{xScale:T,yScale:w}=r;s({seriesId:C,index:0,x:$.x,y:$.y,clientX:T($.x),clientY:w($.y)})},[a,r,i]),y=X.useCallback(()=>{let j=Array.from(l.current.keys());if(i&&(j=j.filter(P=>!i.isHidden(P))),j.length===0)return;const C=a?a.seriesId:j[0],v=l.current.get(C);if(!v||v.length===0||!r)return;const $=v.length-1,T=v[$],{xScale:w,yScale:L}=r;s({seriesId:C,index:$,x:T.x,y:T.y,clientX:w(T.x),clientY:L(T.y)})},[a,r,i]),k=X.useCallback(()=>b(1),[b]),N=X.useCallback(()=>b(-1),[b]),S=X.useCallback(()=>h(1),[h]),x=X.useCallback(()=>h(-1),[h]),M=X.useMemo(()=>({focused:a,setFocused:s,aggregated:u,focusNearest:p,clear:g,registerSeries:d,unregisterSeries:f,focusNextPoint:k,focusPrevPoint:N,focusNextSeries:S,focusPrevSeries:x,focusFirstPoint:m,focusLastPoint:y}),[a,u,p,g,d,f,k,N,S,x,m,y]);return o.jsx(Gd.Provider,{value:M,children:e})},qd=({series:e,seriesIndex:t,palette:n,showPoints:r,focusablePoints:i,focusIndex:a,parseX:s,visibilityMode:l="remove",strokeWidth:u=1,smooth:c=!0,gradientFillId:d,colors:f})=>{const p=er();if(!p)return null;const{xScale:g,yScale:b}=p,m=ci()?.isHidden(e.id)??!1,y=m&&l==="fade";if(m&&l==="remove")return null;const k=kn();X.useEffect(()=>{if(!k)return;const C=e.data.map(v=>({x:s(v),y:v.y}));return k.registerSeries(e.id,C),()=>k.unregisterSeries(e.id)},[k,e.id,e.data,s]);const N=X.useMemo(()=>ko(e.data,C=>g(s(C)),C=>b(C.y),{smooth:c}),[e.data,g,b,s,c]),S=X.useMemo(()=>{if(!e.data.length)return"";const[C]=b.domain(),v=So().x($=>g(s($))).y0(()=>b(C)).y1($=>b($.y));return c&&v.curve(Pa),v(e.data)||""},[e.data,g,b,s,c]),x=f&&f[t],M=e.color||x||(n==="region"?Nr(e.id,t):tn(t)),j=n==="region"?La(e.id,t):tr(t);return o.jsxs("g",{className:"fdp-line-series","data-series":e.id,opacity:y?.25:1,"aria-hidden":y?!0:void 0,children:[d&&o.jsx("path",{d:S,fill:`url(#${d})`,stroke:"none",role:"presentation",className:"fdp-line-series__gradient"}),o.jsx("path",{d:N,fill:"none",stroke:M,strokeWidth:u,role:"presentation"}),r&&e.data.map((C,v)=>{const $=g(s(C)),T=b(C.y),w=i?0:-1,L=!y&&(i&&v===a||k?.focused?.seriesId===e.id&&k.focused.index===v),P=()=>{k&&!y&&k.setFocused({seriesId:e.id,index:v,x:s(C),y:C.y,clientX:$,clientY:T})},D=()=>{k&&k.focused?.seriesId===e.id&&k.focused.index===v&&k.clear()};return o.jsx("circle",{cx:$,cy:T,r:L?5:3.5,stroke:L?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":j,strokeWidth:L?2:1,fill:L?"var(--nhs-fdp-color-grey-3, #aeb7bd)":M,className:"fdp-line-point",tabIndex:y?-1:w,"aria-label":`${e.label||e.id} ${s(C).toDateString()} value ${C.y}`,"data-series":e.id,"data-index":v,onMouseEnter:P,onFocus:P,onMouseLeave:D,onBlur:D},v)})]})},Cx=({polite:e=!0,format:t})=>{const n=kn(),[r,i]=X.useState(""),a=X.useRef("");return X.useEffect(()=>{if(!n?.focused)return;const{focused:s,aggregated:l}=n;let u;if(l&&l.length>1){const c=l.map(f=>`${f.seriesId} ${f.y}`).join("; ");u=`${s.x instanceof Date?s.x.toDateString():String(s.x)} â€“ ${c}`}else u=t?t({seriesId:s.seriesId,x:s.x,y:s.y,index:s.index}):kx(s.seriesId,s.x,s.y,s.index);if(u!==a.current){a.current=u,i("");const c=setTimeout(()=>i(u),10);return()=>clearTimeout(c)}},[n?.focused,t]),o.jsx("div",{"aria-live":e?"polite":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,margin:-1,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",border:0},children:r})};function kx(e,t,n,r){const i=t instanceof Date?t.toDateString():String(t);return`Series ${e}, point ${r+1}, ${i}, value ${n}`}const Tx=()=>{const e=kn(),t=Ln();if(!e||!t||!e.focused)return null;const{focused:n,aggregated:r}=e,{innerWidth:i,innerHeight:a}=t,s=Math.min(Math.max(n.clientX,0),i),l=Math.min(Math.max(n.clientY,0),a),u=s+8,c=l-8,d=r.length>1,f=n.x instanceof Date?n.x.toDateString():String(n.x),p=d?f:`${f} â€¢ ${n.y}`,g=/\d+$/.exec(n.seriesId||""),b=g?parseInt(g[0],10)-1:0,h=tn(b>=0?b:0)||"#005eb8",m="var(--nhs-fdp-color-primary-yellow,#ffeb3b)";return o.jsxs("g",{className:"fdp-tooltip-layer",pointerEvents:"none",children:[o.jsx("circle",{cx:s,cy:l,r:7,fill:"none",stroke:m,strokeWidth:3}),o.jsx("circle",{cx:s,cy:l,r:5,fill:"#000",stroke:m,strokeWidth:1.5}),o.jsx("circle",{cx:s,cy:l,r:2.5,fill:h,stroke:"#fff",strokeWidth:.5}),d?(()=>{const k=r.map(j=>`${j.seriesId}: ${j.y}`),N=[p,...k],S=N.reduce((j,C)=>Math.max(j,C.length),0),x=Math.max(90,S*6.2+16),M=16*N.length+8;return o.jsxs("g",{children:[o.jsx("rect",{x:u,y:c-M,rx:4,ry:4,width:x,height:M,fill:"#212b32",opacity:.92}),N.map((j,C)=>o.jsx("text",{x:u+8,y:c-M+6+16*(C+.7),fill:"#fff",fontSize:12,children:j},C))]})})():o.jsxs("g",{children:[o.jsx("rect",{x:u,y:c-24,rx:4,ry:4,width:Math.max(60,p.length*6.2),height:24,fill:"#212b32",opacity:.92}),o.jsx("text",{x:u+8,y:c-8,fill:"#fff",fontSize:12,children:p})]})]})},Nx=({items:e,palette:t="categorical",direction:n="row",interactive:r=!1,adjustStrokeForWhiteBackground:i=!0,hiddenIds:a,defaultHiddenIds:s=[],onVisibilityChange:l,formatAnnouncement:u})=>{const c=ci(),d=!!(c&&!r&&!l&&a===void 0),f=r||d,p=e||[],g=a!==void 0,[b,h]=X.useState(new Set(s)),m=g?new Set(a):b,[y,k]=X.useState(""),N=S=>{if(d&&c){const w=c.isHidden(S);c.toggle(S);const P=p.find(F=>F.id===S)?.label||S,D=u?u(S,w,P):`${P} ${w?"shown":"hidden"}`;k(D);return}if(!f)return;const x=new Set(m),M=x.has(S);M?x.delete(S):x.add(S),g||h(x);const j=p.filter(w=>!x.has(w.id)).map(w=>w.id),C=Array.from(x);l?.(j,C);const $=p.find(w=>w.id===S)?.label||S,T=u?u(S,M,$):`${$} ${M?"shown":"hidden"}`;k(T)};return o.jsxs("div",{className:"fdp-legend-wrapper",children:[o.jsx("ul",{className:`fdp-legend fdp-legend--${n}`,children:p.map((S,x)=>{const M=S.palette||t,j=S.color||(M==="region"?Nr(S.id,x):M==="severity"?ux(S.id,x):M==="org-level"?mx(S.id,x):tn(x));let C=S.stroke||(M==="region"?La(S.id,x):M==="severity"?fx(S.id,x):M==="org-level"?bx(S.id,x):tr(x));if(i&&C){const T=C.trim().toLowerCase();(T==="#fff"||T==="#ffffff"||T==="white"||/^rgb\(\s*255\s*,\s*255\s*,\s*255\s*\)$/.test(T))&&(C="#212b32")}const v=d&&c?c.isHidden(S.id):m.has(S.id),$=f?{"aria-pressed":!v,"aria-label":`${S.label} (${v?"show":"hide"})`,onClick:()=>N(S.id)}:{"aria-label":S.label};return o.jsxs("li",{className:`fdp-legend__item${v?" fdp-legend__item--hidden":""}`,children:[o.jsx("button",{type:"button",className:"fdp-legend__swatch",style:{backgroundColor:j,backgroundImage:S.patternDataUrl?`url(${S.patternDataUrl})`:void 0,backgroundSize:S.patternDataUrl?"auto":void 0,borderColor:C},...$}),o.jsx("span",{className:"fdp-legend__label",children:S.label})]},S.id)})}),f&&o.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite","aria-atomic":"true",children:y})]})},jx=({series:e,seriesIndex:t,palette:n,parseX:r,areaOnly:i=!1,visibilityMode:a="remove",baselineY:s=0,smooth:l=!0,stacked:u,gradientFill:c=!0,colors:d})=>{const f=er();if(!f)return null;const{xScale:p,yScale:g}=f,h=ci()?.isHidden(e.id)??!1,m=h&&a==="fade";if(h&&a==="remove")return null;const y=kn();X.useEffect(()=>{if(!y)return;const j=e.data.map(C=>({x:r(C),y:C.y}));return y.registerSeries(e.id,j),()=>y.unregisterSeries(e.id)},[y,e.id,e.data,r]);const k=d&&d[t],N=e.color||k||(n==="region"?Nr(e.id,t):tn(t)),S=X.useMemo(()=>u&&u.length===e.data.length?ko(e.data,j=>p(r(j)),j=>{const C=e.data.indexOf(j);return g(u[C].y1)},{smooth:l}):ko(e.data,j=>p(r(j)),j=>g(j.y),{smooth:l}),[e.data,u,p,g,r,l]),x=X.useMemo(()=>{if(u&&u.length===e.data.length){const T=So().x(w=>p(r(w))).y0((w,L)=>g(u[L].y0)).y1((w,L)=>g(u[L].y1));return l&&T.curve(Pa),T(e.data)||""}const[j,C]=g.domain();let v=s;v<j?v=j:v>C&&(v=C);const $=So().x(T=>p(r(T))).y0(()=>g(v)).y1(T=>g(T.y));return l&&$.curve(Pa),$(e.data)||""},[e.data,u,p,g,r,s,l]),M=X.useId();return o.jsxs("g",{className:"fdp-area-series","data-series":e.id,opacity:m?.25:1,"aria-hidden":m?!0:void 0,children:[c&&o.jsx("defs",{children:o.jsxs("linearGradient",{id:M,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:N,stopOpacity:.25}),o.jsx("stop",{offset:"100%",stopColor:N,stopOpacity:0})]})}),o.jsx("path",{className:"fdp-area-series__fill",d:x,fill:c?`url(#${M})`:N,...c?{}:{fillOpacity:.25},stroke:"none"}),!i&&o.jsx("path",{d:S,fill:"none",stroke:N,strokeWidth:1})]})},Dx=({series:e,seriesIndex:t,seriesCount:n,palette:r,parseX:i,focusable:a=!0,widthFactor:s=.8,groupGap:l=2,barWidth:u,adaptive:c=!1,adaptiveGroupOccupancy:d=.9,visibilityMode:f="remove",colorMode:p="series",allSeries:g,stacked:b,gapRatio:h=.15,minBarWidth:m,gradientFill:y=!0,gradientStrokeMatch:k=!0,opacity:N=1,fadedOpacity:S=.25,flatFillOpacity:x=1,colors:M})=>{const j=Math.max(0,h),C=er(),v=Ln();if(!C||!v)return null;const{xScale:$,yScale:T}=C,L=ci()?.isHidden(e.id)??!1,P=L&&f==="fade";if(L&&f==="remove")return null;const D=kn();X.useEffect(()=>{if(!D)return;const Z=e.data.map(se=>({x:i(se),y:se.y}));return D.registerSeries(e.id,Z),()=>D.unregisterSeries(e.id)},[D,e.id,e.data,i]);const F=typeof $.bandwidth=="function",A=F?$.bandwidth():void 0,ne=X.useMemo(()=>{if(A!=null)return A;const Z=g&&g.length?g:[e],se=[];Z.forEach(V=>{V.data.forEach(ae=>{const ee=$(i(ae));Number.isFinite(ee)&&se.push(ee)})});const he=se.sort((V,ae)=>V-ae);if(he.length<=1)return 40;const I=[];for(let V=1;V<he.length;V++)I.push(he[V]-he[V-1]);return I.sort((V,ae)=>V-ae),(I[Math.floor(I.length/2)]||40)*s},[e.data,g,$,i,s,A]),{basePerBar:q}=X.useMemo(()=>{if(F){const he=ne,I=Math.max(1,(he-l*(n-1))/n),O=e.barWidth??u;let V=O?Math.min(O,he):I;if(c){const ae=he*Math.min(1,Math.max(.05,d)),ee=Math.max(1,(ae-l*(n-1))/n);V=O?Math.min(V,ee):ee}return{basePerBar:V}}const Z=e.barWidth??u,se=Math.max(1,(ne-l*(n-1))/n);if(c){const he=g&&g.length?g:[e],I=[];he.forEach(_e=>_e.data.forEach(Se=>{const me=$(i(Se));Number.isFinite(me)&&I.push(me)})),I.sort((_e,Se)=>_e-Se);const O=[];for(let _e=1;_e<I.length;_e++)O.push(I[_e]-I[_e-1]);O.sort((_e,Se)=>_e-Se);const ae=(O[Math.floor(O.length/2)]||ne)*Math.min(1,Math.max(.05,d)),ee=Math.max(1,(ae-l*(n-1))/n);return{basePerBar:Z?Math.min(Z,ee):ee}}return Z?{basePerBar:Math.min(Z,se)}:{basePerBar:se}},[F,ne,l,n,u,e.barWidth,c,d,g,$,i]),H=X.useMemo(()=>{if(F)return[];const Z=[];return(g&&g.length?g:[e]).forEach(he=>he.data.forEach(I=>{const O=$(i(I));Number.isFinite(O)&&Z.push(O)})),Z.sort((he,I)=>he-I),Array.from(new Set(Z))},[F,g,e,$,i]),U=X.useMemo(()=>{if(F)return[];if(!H.length)return[];if(H.length===1)return[{center:H[0],left:0,right:v.innerWidth}];const Z=[];for(let se=0;se<H.length;se++){const he=H[se],I=se===0?0:(H[se-1]+he)/2,O=se===H.length-1?v.innerWidth:(he+H[se+1])/2;Z.push({center:he,left:Math.max(0,I),right:Math.min(v.innerWidth,O)})}return Z},[F,H,v.innerWidth]),G=X.useMemo(()=>{if(F||!U.length)return;const Z=Math.min(1,Math.max(.05,s)),se=U.map(ae=>Math.max(2,ae.right-ae.left)),he=se.map(ae=>Math.max(2,Math.min(ae-1,ae*Z)));let I=Math.min(...he);if(m)if(n<=1){const ae=Math.min(...se.map(ee=>ee-1));ae>=m&&I<m&&(I=Math.min(ae,m))}else{const ae=Math.min(...se.map(le=>le-1)),ee=m*n+(n-1)*(m*j);ee<=ae&&I<ee&&(I=ee)}if(n<=1)return m&&I<m&&se.every(ee=>ee>=m)?{groupWidth:m,barWidth:m}:{groupWidth:I,barWidth:I};let O=I/(n+(n-1)*j);return O<1&&(O=1),m&&O<m&&m*n+(n-1)*(m*j)<=I&&(O=m),{groupWidth:O*n+(n-1)*(O*j),barWidth:O}},[F,U,s,n,j,m]),oe=M&&M[t]?M[t]:void 0,z=e.color||oe||(r==="region"?Nr(e.id,t):tn(t)),pe=r==="region"?La(e.id,t):tr(t),we=k&&(e.color||oe)?z:pe,fe=Number.isFinite(T(0))?T(0):T.range()[0],de=X.useId();return b&&b.length===e.data.length?o.jsxs("g",{className:"fdp-bar-series fdp-bar-series--stacked","data-series":e.id,opacity:P?S:N,"aria-hidden":P?!0:void 0,children:[y&&o.jsx("defs",{children:o.jsxs("linearGradient",{id:de,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:z,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:z,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:z,stopOpacity:.06})]})}),e.data.map((Z,se)=>{const he=i(Z),I=$(F?Z.x:he);let O,V;if(F)O=ne,V=I;else{const K=U.find(te=>Math.abs(te.center-I)<.5);if(!K||!G)O=q,V=I-q/2;else{const{groupWidth:te}=G;O=te;let B=I-te/2;B<K.left&&(B=K.left),B+te>K.right&&(B=Math.max(K.left,K.right-te)),V=B}}const ae=b[se],ee=T(ae.y0),le=T(ae.y1),_e=Math.min(ee,le),Se=Math.abs(le-ee)||1;if(!F&&m&&O<m){const K=U.find(te=>Math.abs(te.center-I)<.5);if(K){const te=Math.max(2,K.right-K.left-1),B=Math.min(te,m);B>O&&(O=B,V=Math.max(K.left,Math.min(K.right-O,I-O/2)))}}const me=!P&&D?.focused?.seriesId===e.id&&D.focused.index===se,R=()=>{!D||P||D.setFocused({seriesId:e.id,index:se,x:he,y:ae.y1-ae.y0,clientX:V+O/2,clientY:_e})},Y=()=>{D?.focused?.seriesId===e.id&&D.focused.index===se&&D.clear()};return o.jsx("rect",{x:V,y:_e,width:O,height:Se,fill:y?`url(#${de})`:z,...y?{}:{fillOpacity:x},stroke:me?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":y&&k?z:void 0,strokeWidth:me?2:1,className:"fdp-bar fdp-bar--stacked",tabIndex:P||!a?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${he instanceof Date?he.toDateString():he} value ${ae.y1-ae.y0}`,onMouseEnter:R,onFocus:R,onMouseLeave:Y,onBlur:Y},se)})]}):o.jsxs("g",{className:"fdp-bar-series","data-series":e.id,opacity:P?S:N,"aria-hidden":P?!0:void 0,children:[y&&o.jsxs("defs",{children:[p==="series"&&o.jsxs("linearGradient",{id:de,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:z,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:z,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:z,stopOpacity:.06})]}),p==="category"&&e.data.map((Z,se)=>{const I=M&&M[se]||(r==="region"?Nr(String(Z.x),se):tn(se)),O=`${de}-${se}`;return o.jsxs("linearGradient",{id:O,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:I,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:I,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:I,stopOpacity:.06})]},O)})]}),e.data.map((Z,se)=>{const he=i(Z),I=$(F?Z.x:he);let O,V;if(F){const re=ne;if(n<=1)V=re,O=I;else{V=Math.max(1,re/(n+(n-1)*j));const ie=V*j,W=V*n+ie*(n-1);O=I+(re-W)/2+t*(V+ie)}}else{const re=U.find(ie=>ie.center===I);if(!re||!G)V=q,O=I-q/2,m&&V<m&&(V=m,O=I-V/2);else{const{barWidth:ie}=G;V=ie;const W=n>1?ie*j:0,J=V*n+W*(n-1);let ue=I-J/2;ue<re.left&&(ue=re.left),ue+J>re.right&&(ue=Math.max(re.left,re.right-J)),O=ue+t*(V+W)}if(m&&V<m){const ie=U.find(W=>Math.abs(W.center-I)<.5);if(ie){const W=Math.max(2,ie.right-ie.left-1),J=Math.min(W,m);if(J>V)if(n<=1)V=J,O=Math.max(ie.left,Math.min(ie.right-V,I-V/2));else{const ue=J*j,ge=J*n+ue*(n-1);if(ge<=ie.right-ie.left-1){V=J;const ce=ge;let Te=I-ce/2;Te<ie.left&&(Te=ie.left),Te+ce>ie.right&&(Te=Math.max(ie.left,ie.right-ce)),O=Te+t*(V+ue)}}}}}const ae=O+V/2,ee=T(Z.y),le=Math.min(fe,ee),_e=Math.abs(fe-ee),Se=!P&&D?.focused?.seriesId===e.id&&D.focused.index===se,me=()=>{!D||P||D.setFocused({seriesId:e.id,index:se,x:he,y:Z.y,clientX:ae,clientY:ee})},R=()=>{D?.focused?.seriesId===e.id&&D.focused.index===se&&D.clear()},Y=p==="category"&&M?M[se]:void 0,K=p==="category"?Y||(r==="region"?Nr(String(Z.x),se):tn(se)):z,te=p==="category"?`${de}-${se}`:de,B=y&&k?K:p==="category"?r==="region"?La(String(Z.x),se):tr(se):we,Q=Se?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":B||K;return o.jsx("rect",{x:O,y:le,width:V,height:_e||1,fill:y?`url(#${te})`:K,...y?{}:{fillOpacity:x},stroke:Q,strokeWidth:Se?2:1,className:"fdp-bar",tabIndex:P||!a?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${he instanceof Date?he.toDateString():he} value ${Z.y}`,onMouseEnter:me,onFocus:me,onMouseLeave:R,onBlur:R},se)})]})},Mx=({series:e,innerWidth:t,innerHeight:n,paddingInner:r=.1,paddingOuter:i=.05,children:a,yTickCount:s=5})=>{const l=Ln(),u=t??l?.innerWidth??0,c=n??l?.innerHeight??0,d=X.useMemo(()=>e.flatMap(m=>m.data),[e]),f=X.useMemo(()=>{const m=new Set;return d.forEach(y=>m.add(y.x)),Array.from(m)},[d]),p=X.useMemo(()=>Math.max(0,...d.map(m=>m.y)),[d]),g=X.useMemo(()=>tu().domain(f).range([0,u]).paddingInner(r).paddingOuter(i),[f,u,r,i]),b=X.useMemo(()=>va().domain([0,p]).nice().range([c,0]),[p,c]),h=X.useMemo(()=>({xScale:g,yScale:b,getXTicks:()=>f,getYTicks:(m=s)=>b.ticks(m)}),[g,b,f,s]);return o.jsx(To.Provider,{value:h,children:a})},Ix=({title:e,description:t,source:n,table:r,className:i,id:a,message:s="Interactive chart loadingâ€¦",forceFallback:l=!1})=>{const u=X.useId(),c=a||u,d=t?`${c}-desc`:void 0,f=n?`${c}-src`:void 0,p=typeof window<"u"&&!l;return o.jsxs("figure",{id:c,className:Ma("fdp-chart fdp-chart--noscript",i),"aria-labelledby":`${c}-title`,"aria-describedby":Ma(d,f),"data-component":"ChartNoScript",children:[o.jsx("header",{className:"fdp-chart__header",children:o.jsx("h3",{id:`${c}-title`,className:"fdp-chart__title",children:e})}),t&&o.jsx("p",{id:d,className:"fdp-chart__description",children:t}),!p&&o.jsx("div",{className:"fdp-chart__loading",role:"status","aria-live":"polite",children:s}),o.jsxs("div",{className:"fdp-chart__fallback",role:"group","aria-label":e,children:[o.jsx("noscript",{children:o.jsx("div",{className:"fdp-chart__noscript-wrapper",children:o.jsx(en,{...r})})}),o.jsx("div",{className:"fdp-chart__table","data-fallback-table":!0,children:o.jsx(en,{...r})})]}),n&&o.jsx("figcaption",{className:"fdp-chart__caption",children:n&&o.jsxs("small",{id:f,className:"fdp-chart__source",children:["Source: ",n]})})]})},Px=({selector:e="figure.fdp-chart",onEnhanced:t,delay:n=0,children:r})=>{const i=X.useRef(null);return X.useEffect(()=>{const a=i.current;if(!a)return;const s=()=>{const l=Array.from(a.querySelectorAll(e));if(l.length===0)return;const u=[];l.forEach(c=>{c.classList.contains("fdp-chart--enhanced")||(c.classList.add("fdp-chart--enhanced"),u.push(c))}),u.length&&t&&t(u)};if(n>0){if(typeof window>"u")return;const l=window.setTimeout(s,n);return()=>window.clearTimeout(l)}s()},[e,t,n]),o.jsx("div",{ref:i,children:r})},Xd=({label:e,value:t,unit:n,delta:r,status:i="neutral",variant:a="default",subtitle:s,metadata:l,trendData:u,loading:c=!1,error:d,valueFormatter:f,className:p,style:g,id:b,announceDelta:h=!0,visual:m})=>{const y=X.useId(),k=b||y,N=`${k}-label`,S=`${k}-value`,x=`${k}-delta`,M=typeof t=="number"&&!Number.isNaN(t),j=c?"â€”":d?"":M?f?f(t):t.toLocaleString():t;let C,v="",$="";if(r&&!c&&!d){C=r.direction||(r.value>0?"up":r.value<0?"down":"neutral");const T=Math.abs(r.value),w=C==="up"?`+${T}`:C==="down"?`-${T}`:"0",L=r.isPercent?"%":"";if(v=`${w}${L}`,r.ariaLabel)$=r.ariaLabel;else{const P=r.invert?C==="down":C==="up";$=`${C==="neutral"?"no change":C==="up"?"up":"down"} ${T}${L}${C==="neutral"?"":P?" (improvement)":" (worse)"}`}}return o.jsx("div",{className:Ma("fdp-metric-card",a&&`fdp-metric-card--${a}`,i&&`fdp-metric-card--status-${i}`,c&&"fdp-metric-card--loading",d&&"fdp-metric-card--error",p),style:g,role:"group","aria-labelledby":N,"data-component":"MetricCard",children:o.jsxs("div",{className:"fdp-metric-card__inner",children:[o.jsxs("div",{className:"fdp-metric-card__header",children:[o.jsx("h3",{id:N,className:"fdp-metric-card__label",children:e}),l&&o.jsx("div",{className:"fdp-metric-card__metadata",children:l})]}),o.jsxs("div",{className:"fdp-metric-card__content",children:[o.jsxs("div",{className:"fdp-metric-card__value-section",children:[o.jsx("div",{id:S,className:"fdp-metric-card__value",children:c?o.jsx("div",{className:"fdp-metric-card__skeleton","aria-hidden":"true",children:o.jsx("div",{className:"fdp-metric-card__skeleton-line fdp-metric-card__skeleton-line--value"})}):d?o.jsx("div",{className:"fdp-metric-card__error",role:"alert",children:d}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"fdp-metric-card__number",children:j}),n&&o.jsx("span",{className:"fdp-metric-card__unit",children:n})]})}),s&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__subtitle",children:s})]}),r&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__delta-section",children:o.jsxs("div",{id:x,"aria-label":$,className:Ma("fdp-metric-card__delta",C&&`fdp-metric-card__delta--${C}`),children:[o.jsx("span",{className:"fdp-metric-card__delta-value",children:v}),r.period&&o.jsx("span",{className:"fdp-metric-card__delta-period",children:r.period})]})}),u&&u.length>0&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__trend","aria-hidden":"true"})]}),m&&!d&&o.jsx("div",{className:"fdp-metric-card__visual","aria-hidden":"true",children:m}),h&&r&&!r.ariaLabel&&!c&&!d&&o.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite",children:$})]})})};let Eo=null;try{Eo=require("@fergusbisset/nhs-fdp-design-system/dist/js/tokens.json")?.color?.["data-viz"]?.spc||null}catch{}const Oe=(e,t)=>{if(!Eo)return t;const n=e.split(".");let r=Eo;for(const a of n){if(r==null)break;r=r[a]}const i=r;return i==null?t:typeof i=="string"||typeof i=="number"?String(i):i.$value!=null?String(i.$value):i.value!=null?String(i.value):t},Aa=()=>({start:Oe("gradient.stop.start-opacity","0.12"),mid:Oe("gradient.stop.mid-opacity","0.03"),end:Oe("gradient.stop.end-opacity","0"),triStart:Oe("gradient.stop.triangle-start-opacity",Oe("gradient.stop.start-opacity","0.12")),triMid:Oe("gradient.stop.triangle-mid-opacity",Oe("gradient.stop.mid-opacity","0.03")),triEnd:Oe("gradient.stop.triangle-end-opacity",Oe("gradient.stop.end-opacity","0"))});var nn=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(nn||{}),je=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(je||{}),Me=(e=>(e.Improvement="improvement",e.Concern="concern",e.Neither="neither",e.Suppressed="suppressed",e))(Me||{}),yt=(e=>(e.SinglePoint="single_point",e.TwoSigma="two_sigma",e.Shift="shift",e.Trend="trend",e))(yt||{});const Bo=["single_point","two_sigma","shift","trend"],Kd=Bo.reduce((e,t,n)=>(e[t]=n+1,e),{}),$x={single_point:"Single point beyond process limit",two_sigma:"Two of three beyond 2Ïƒ on one side",shift:"Sustained shift (run)",trend:"Monotonic trend"},Fx={single_point:"point",two_sigma:"cluster",shift:"sustained",trend:"sustained"},Ea=Bo.reduce((e,t,n)=>(e[t]={id:t,rank:n+1,label:$x[t],category:Fx[t],participatesInRanking:!0},e),{});Bo.map(e=>Ea[e]);var ot=(e=>(e.Up="up",e.Down="down",e))(ot||{}),Ct=(e=>(e.SinglePointAbove="single_above",e.SinglePointBelow="single_below",e.TwoOfThreeAbove="two_of_three_above",e.TwoOfThreeBelow="two_of_three_below",e.FourOfFiveAbove="four_of_five_above",e.FourOfFiveBelow="four_of_five_below",e.ShiftHigh="shift_high",e.ShiftLow="shift_low",e.TrendIncreasing="trend_inc",e.TrendDecreasing="trend_dec",e.FifteenInnerThird="fifteen_inner_third",e))(Ct||{}),et=(e=>(e.Pass="pass",e.Fail="fail",e.None="none",e))(et||{}),Ut=(e=>(e.Shift="shift",e.Trend="trend",e.Point="point",e))(Ut||{}),Ba=(e=>(e.Legacy="legacy",e.DirectionalFirst="directional_first",e))(Ba||{}),Jd=(e=>(e.None="none",e.SqlRankingV26a="sql_ranking_v2_6a",e))(Jd||{}),Xt=(e=>(e.Upwards="Upwards",e.Downwards="Downwards",e.Same="Same",e))(Xt||{}),Ro=(e=>(e.Sql="sql",e.Conflict="conflict",e))(Ro||{}),ui=(e=>(e.ImprovementValueBeforePruning="improvementValueBeforePruning",e.ConcernValueBeforePruning="concernValueBeforePruning",e))(ui||{});const jr={singlePointUp:{tooltip:"Single point above upper control limit",narration:"Single point beyond a control limit"},singlePointDown:{tooltip:"Single point below lower control limit",narration:"Single point beyond a control limit"},twoOfThreeUp:{tooltip:"Two of three points beyond +2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},twoOfThreeDown:{tooltip:"Two of three points beyond -2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},fourOfFiveUp:{tooltip:"Four of five points beyond +1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},fourOfFiveDown:{tooltip:"Four of five points beyond -1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},shiftUp:{tooltip:"Shift: run of points above centre line",narration:"Shift (run on one side of mean)"},shiftDown:{tooltip:"Shift: run of points below centre line",narration:"Shift (run on one side of mean)"},trendUp:{tooltip:"Trend: consecutive increasing points",narration:"Trend (consecutive increases)"},trendDown:{tooltip:"Trend: consecutive decreasing points",narration:"Trend (consecutive decreases)"}};function Ra(e){if(!e)return[];const t=[];return e.specialCauseSinglePointUp&&t.push("singlePointUp"),e.specialCauseSinglePointDown&&t.push("singlePointDown"),e.specialCauseTwoOfThreeUp&&t.push("twoOfThreeUp"),e.specialCauseTwoOfThreeDown&&t.push("twoOfThreeDown"),e.specialCauseFourOfFiveUp&&t.push("fourOfFiveUp"),e.specialCauseFourOfFiveDown&&t.push("fourOfFiveDown"),e.specialCauseShiftUp&&t.push("shiftUp"),e.specialCauseShiftDown&&t.push("shiftDown"),e.specialCauseTrendUp&&t.push("trendUp"),e.specialCauseTrendDown&&t.push("trendDown"),t}function Ha(e){switch(e){case Me.Improvement:return"Improvement signal";case Me.Concern:return"Concern signal";case Me.Neither:return"Common cause variation";case Me.Suppressed:return null;default:return null}}function Zd(e){switch(e){case et.Pass:return"Target met";case et.Fail:return"Target not met";default:return null}}function Lx(e,t,n){if(e==null||!Number.isFinite(t)||t<=0)return null;const r=Math.abs((n-e)/t);return r<1?"Within 1Ïƒ":r<2?"Between 1â€“2Ïƒ":r<3?"Between 2â€“3Ïƒ":"Beyond 3Ïƒ"}const Kt={improvement:{token:"var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",hex:"#00B0F0"},concern:{token:"var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",hex:"#E46C0A"},neither:{token:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",hex:"#A6A6A6"},suppressed:{token:"var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",hex:"#490092"}};function Qd(e){return e?Kt[e]?.token??Kt.neither.token:Kt.neither.token}function Ax(e){return e?Kt[e]?.hex??Kt.neither.hex:Kt.neither.hex}var An=(e=>(e.Pass="pass",e.Fail="fail",e.Uncertain="uncertain",e))(An||{});const Ex={pass:"#00B0F0",fail:"#E46C0A",uncertain:"#A6A6A6"},Bx={pass:"P",fail:"F",uncertain:"?"};var Ye=(e=>(e.HigherIsBetter="higher_is_better",e.LowerIsBetter="lower_is_better",e.ContextDependent="context_dependent",e))(Ye||{}),De=(e=>(e.Higher="higher",e.Lower="lower",e))(De||{}),Nt=(e=>(e.Improving="improving",e.Deteriorating="deteriorating",e.No_Judgement="no_judgement",e.None="none",e))(Nt||{}),ke=(e=>(e.SpecialCauseImproving="special_cause_improving",e.SpecialCauseDeteriorating="special_cause_deteriorating",e.CommonCause="common_cause",e.SpecialCauseNoJudgement="special_cause_no_judgement",e))(ke||{});const Rx=e=>{const t=e.replace("#",""),n=parseInt(t.slice(0,2),16)/255,r=parseInt(t.slice(2,4),16)/255,i=parseInt(t.slice(4,6),16)/255,a=[n,r,i].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*a[0]+.7152*a[1]+.0722*a[2]<.55?"#ffffff":"#212b32"},Oa={special_cause_deteriorating:{hex:Kt.concern.hex,judgement:"deteriorating",label:"Special Cause (Deteriorating)",description:"Deteriorating variation detected (special cause) relative to baseline."},special_cause_improving:{hex:Kt.improvement.hex,judgement:"improving",label:"Special Cause (Improving)",description:"Improving variation detected (special cause) relative to baseline."},common_cause:{hex:Kt.neither.hex,judgement:"none",label:"Common Cause",description:"Common cause variation only â€“ no special cause detected."},special_cause_no_judgement:{hex:Kt.suppressed.hex,judgement:"no_judgement",label:"Special Cause (No Judgement)",description:"Special cause detected without assigning improving/deteriorating judgement."}};Object.values(Oa).forEach(e=>{e.text||(e.text=Rx(e.hex))});const Ho=e=>Oa[e],za=e=>Oa[e].judgement||"none",ef={special:{higher:[{cx:77.5,cy:158.5},{cx:114,cy:175},{cx:150.5,cy:158.5},{cx:188,cy:125},{cx:225,cy:137}],lower:[{cx:77.5,cy:139.5},{cx:114,cy:124.5},{cx:150.5,cy:139.5},{cx:188,cy:175.5},{cx:224.5,cy:162}]},common:[{cx:76.5,cy:149.5},{cx:113,cy:179.5},{cx:149.5,cy:117},{cx:187,cy:171},{cx:223.5,cy:158}]};function Hx(e,t){let n;return e==="common_cause"?n=ef.common:n=ef.special[t==="lower"?"lower":"higher"],n.map(r=>({...r}))}var _t=(e=>(e.Concern="concern",e.Improvement="improvement",e.NoJudgement="noJudgement",e.Common="common",e))(_t||{}),nr=(e=>(e.Classic="classic",e.Triangle="triangle",e.TriangleWithRun="triangleWithRun",e))(nr||{}),di=(e=>(e.Direction="direction",e.Polarity="polarity",e))(di||{});const tf=e=>{const t=()=>{globalThis.__spcIconDeprecationEmitted||(console.warn("[SPCVariationIcon] Deprecated payload shape detected. Migrate to { variationIcon, improvementDirection, specialCauseNeutral?, trend? }."),globalThis.__spcIconDeprecationEmitted=!0)};if(e.variationIcon!==void 0){const s=e;let l;s.improvementDirection!==void 0?l=s.improvementDirection===je.Up?Ye.HigherIsBetter:s.improvementDirection===je.Down?Ye.LowerIsBetter:Ye.ContextDependent:s.polarity&&(l=s.polarity);let u;switch(s.variationIcon){case Me.Improvement:u=ke.SpecialCauseImproving;break;case Me.Concern:u=ke.SpecialCauseDeteriorating;break;case Me.Neither:u=s.specialCauseNeutral?ke.SpecialCauseNoJudgement:ke.CommonCause;break;case Me.Suppressed:default:u=ke.SpecialCauseNoJudgement;break}let c=s.trend;return c||(u===ke.SpecialCauseImproving?c=l===Ye.LowerIsBetter?De.Lower:De.Higher:u===ke.SpecialCauseDeteriorating?c=l===Ye.LowerIsBetter?De.Higher:De.Lower:u===ke.SpecialCauseNoJudgement?s.highSideSignal&&!s.lowSideSignal?c=De.Higher:s.lowSideSignal&&!s.highSideSignal?c=De.Lower:c=De.Higher:c=De.Higher),{state:u,direction:c,polarity:l??Ye.ContextDependent}}if(e.state!==void 0){t();const s=e;let l=s.trend;return!l&&(s.state===ke.SpecialCauseImproving||s.state===ke.SpecialCauseDeteriorating)&&s.polarity&&(s.state===ke.SpecialCauseImproving?l=s.polarity===Ye.LowerIsBetter?De.Lower:De.Higher:l=s.polarity===Ye.LowerIsBetter?De.Higher:De.Lower),l||(s.state===ke.SpecialCauseImproving?l=De.Higher:s.state===ke.SpecialCauseDeteriorating?l=De.Lower:l=De.Higher),{state:s.state,direction:l,polarity:s.polarity??Ye.ContextDependent}}const n=e;t();const i={[Nt.Improving]:ke.SpecialCauseImproving,[Nt.Deteriorating]:ke.SpecialCauseDeteriorating,[Nt.No_Judgement]:ke.SpecialCauseNoJudgement,[Nt.None]:ke.CommonCause}[n.judgement];let a;return n.judgement===Nt.Improving?a=n.polarity===Ye.LowerIsBetter?De.Lower:De.Higher:n.judgement===Nt.Deteriorating?a=n.polarity===Ye.LowerIsBetter?De.Higher:De.Lower:a=n.trend??De.Higher,{state:i,direction:a,polarity:n.polarity}};function nf(e,t){const{state:n,direction:r,polarity:i}=tf(e),a=za(n),s=r===De.Higher?"above":"below",l=r===De.Higher?"upwards":"downwards",u=(()=>{switch(i){case Ye.HigherIsBetter:return"For this measure, higher values are better.";case Ye.LowerIsBetter:return"For this measure, lower values are better.";default:return"Direction of improvement is context dependent."}})();return[(()=>{switch(a){case Nt.Improving:return`Special cause improvement: recent data show a sustained run ${s} the mean (unlikely due to random variation).`;case Nt.Deteriorating:return`Special cause deterioration: recent data show a sustained run ${s} the mean (unlikely due to random variation).`;case Nt.No_Judgement:return`Special cause detected (no value judgement): recent data show a change in level, trending ${l}.`;case Nt.None:default:return"Common cause variation: points vary randomly around the mean; no special cause detected."}})(),u,null,null,null,null,null].filter(Boolean).join(" ")}const Oo=(e,t,n,r,i,a)=>o.jsxs("defs",{children:[r&&o.jsxs("filter",{id:t,filterUnits:"objectBoundingBox",children:[o.jsx("feGaussianBlur",{stdDeviation:"3"}),o.jsx("feOffset",{dx:"0",dy:"15",result:"blur"}),o.jsx("feFlood",{floodColor:"rgb(150,150,150)",floodOpacity:"1"}),o.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),i&&o.jsx("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:a.map(s=>o.jsx("stop",{offset:s.offset,stopColor:e,stopOpacity:parseFloat(s.opacity)},s.offset))})]}),Ua=({data:e,size:t=44,ariaLabel:n,showLetter:r=!0,dropShadow:i=!0,gradientWash:a=!1,variant:s=nr.Classic,runLength:l=0,letterMode:u=di.Polarity,letterOverride:c,...d})=>{const f=E.useId(),p=E.useId(),{start:g,mid:b,end:h,triStart:m,triMid:y,triEnd:k}=Aa(),{state:N,direction:S,polarity:x}=E.useMemo(()=>tf(e),[e]),M=E.useMemo(()=>Ho(N),[N]),j=E.useMemo(()=>za(N),[N]),C=j===Nt.Improving||j===Nt.Deteriorating;let v="";r&&C&&(u===di.Polarity?x===Ye.HigherIsBetter?v="H":x===Ye.LowerIsBetter?v="L":v="":v=S===De.Higher?"H":"L"),c!==void 0&&(v=c);const $=N!==ke.CommonCause,T=N===ke.SpecialCauseNoJudgement,w=Oe("common-cause","#A6A6A6"),L=$?M.hex:w,P=E.useMemo(()=>Hx(N,S),[N,S]),D=n||`${M.label}${v?S===De.Higher?" â€“ Higher":" â€“ Lower":""}`,F=nf(e);if(s===nr.TriangleWithRun){const U=[[150,90],[100,190],[200,190]],G=[[150,140+100/2],[150-100/2,140-100/2],[150+100/2,140-100/2]];let oe=null;N===ke.SpecialCauseImproving||N===ke.SpecialCauseDeteriorating?oe=o.jsx("polygon",{points:(S===De.Higher?U:G).map(O=>O.join(",")).join(" "),fill:M.hex,stroke:M.hex,strokeWidth:6,transform:S===De.Higher?"translate(0, -8)":"translate(0, 15)"}):N===ke.SpecialCauseNoJudgement&&(oe=o.jsx("polygon",{points:S===De.Higher?U.map(O=>O.join(",")).join(" "):G.map(O=>O.join(",")).join(" "),fill:M.hex,stroke:M.hex,strokeWidth:6,transform:S===De.Higher?"translate(0,-7)":"translate(0,14)"}));const z=Math.max(0,Math.min(5,Math.floor(l||0))),pe=N===ke.CommonCause?160:S===De.Higher?220:70,we=10,fe=26,de=150-2*fe,Z=N===ke.SpecialCauseImproving?Oe("improvement","#00B0F0"):N===ke.SpecialCauseDeteriorating?Oe("concern","#E46C0A"):w,se=Array.from({length:5}).map((O,V)=>{const ee=(N===ke.SpecialCauseImproving||N===ke.SpecialCauseDeteriorating)&&V>=5-z?Z:w;return o.jsx("circle",{cx:de+V*fe,cy:pe,r:we,fill:ee,stroke:ee,strokeWidth:1},V)}),he=Oo(M.hex,f,p,i,a,[{offset:"0%",opacity:m},{offset:"75%",opacity:y},{offset:"100%",opacity:k}]),I=N===ke.CommonCause||S===De.Higher?"translate(0,-10)":"translate(0,25)";return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":D,"aria-description":F,...d,children:[he,o.jsx("circle",{stroke:"none",fill:a?`url(#${p})`:"#ffffff",...i?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:M.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),o.jsxs("g",{transform:I,children:[oe,v&&o.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:64,x:"150",y:S===De.Higher?155:145,textAnchor:"middle",dominantBaseline:"middle",children:v}),se]})]})}if(s===nr.Triangle){const U=[[150,75],[75,225],[225,225]],G=[[150,150+150/2],[150-150/2,150-150/2],[150+150/2,150-150/2]],oe=[[150-150/2,150+150/2],[150+150/2,150+150/2]];let z=null;N===ke.SpecialCauseImproving||N===ke.SpecialCauseDeteriorating?z=o.jsx("polygon",{points:(S===De.Higher?U:G).map(we=>we.join(",")).join(" "),fill:M.hex,stroke:M.hex,strokeWidth:8,transform:S===De.Higher?"translate(0, -10)":"translate(0, 10)"}):N===ke.SpecialCauseNoJudgement?z=o.jsx("polygon",{points:S===De.Higher?U.map(we=>we.join(",")).join(" "):G.map(we=>we.join(",")).join(" "),fill:M.hex,stroke:M.hex,strokeWidth:8,transform:S===De.Higher?"translate(0, -15)":"translate(0, 15)"}):N===ke.CommonCause&&(z=o.jsx("line",{x1:oe[0][0],y1:oe[0][1],x2:oe[1][0],y2:oe[1][1],stroke:M.hex,strokeWidth:32,strokeLinecap:"square",transform:"translate(0, -75)"}));const pe=Oo(M.hex,f,p,i,a,[{offset:"0%",opacity:m},{offset:"65%",opacity:y},{offset:"100%",opacity:k}]);return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":D,"aria-description":F,...d,children:[pe,o.jsx("circle",{stroke:"none",fill:a?`url(#${p})`:"#ffffff",...i?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:M.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),z,v&&(N===ke.SpecialCauseImproving||N===ke.SpecialCauseDeteriorating)&&o.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:100,x:"150",y:S===De.Higher?"170":"140",textAnchor:"middle",dominantBaseline:"middle",children:v})]})}const A=Oo(M.hex,f,p,i,a,[{offset:"0%",opacity:g},{offset:"65%",opacity:b},{offset:"100%",opacity:h}]);return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":D,"aria-description":F,...d,children:[A,o.jsx("circle",{stroke:"none",fill:a?`url(#${p})`:"#ffffff",...i?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:M.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),v&&o.jsx("text",{fill:M.hex,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,transform:"translate(86.67, 54) scale(0.5, 0.5)",textAnchor:"end",children:o.jsx("tspan",{x:"120",y:S===De.Lower?"340":"155",children:v})}),T?o.jsx("path",{"aria-hidden":"true",fillRule:"evenodd",stroke:"none",fill:M.hex,...S===De.Lower?{transform:"rotate(90 150 150)"}:{transform:"translate(-5 0) rotate(0 150 150)"},d:"M 90.26,185.42 L 149.31,126.37 127.44,104.51 209.81,90.66 195.96,173.02 174.09,151.16 115.05,210.2 90.26,185.42 Z M 90.26,185.42"}):o.jsxs(o.Fragment,{children:[P.length===5&&o.jsx("path",{"aria-hidden":"true",fill:"none",stroke:w,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9,d:`M ${P.map(ne=>`${ne.cx} ${ne.cy}`).join(" L ")}`}),P.map((ne,q)=>{const U=q>=P.length-2&&$?L:w,G=U;return o.jsx("circle",{stroke:G,strokeWidth:2,strokeMiterlimit:10,fill:U,cx:ne.cx,cy:ne.cy,r:16},q)})]})]})};Ua.displayName="SPCVariationIcon";const Ox={xs:{height:24,pointR:2,stroke:1},sm:{height:32,pointR:3,stroke:1},md:{height:44,pointR:4,stroke:1}};function zx(e,t){return!t||e.length<=t?e:e.slice(e.length-t)}function Ux(e){const t=e.filter(s=>typeof s.value=="number");if(!t.length)return{mean:null,latestValue:null,latestIndex:null};const n=t.reduce((s,l)=>s+l.value,0)/t.length,r=[...e].reverse().findIndex(s=>s.value!=null),i=r>=0?e.length-1-r:null,a=i!=null?e[i].value:null;return{mean:n,latestValue:a,latestIndex:i}}function Wx(e){switch(e){case ke.SpecialCauseImproving:return Oe("improvement","#00B0F0");case ke.SpecialCauseDeteriorating:return Oe("concern","#E46C0A");case ke.SpecialCauseNoJudgement:return Oe("no-judgement","#490092");case ke.CommonCause:return Oe("common-cause","#A6A6A6");default:return Oe("common-cause","#A6A6A6")}}const rf=({data:e,windowSize:t,minPointsForSignals:n=13,showMean:r=!0,showLimits:i=!0,showLimitBand:a=!0,showInnerBands:s=!1,showLatestMarker:l=!0,showStateGlyph:u=!0,variationState:c,autoClassify:d=!1,metricImprovement:f,gradientWash:p=!1,size:g="sm",ariaLabel:b,className:h,onPointClick:m,onClassification:y,maxPoints:k,thinningStrategy:N="stride",colorPointsBySignal:S=!0,centerLine:x,controlLimits:M,sigmaBands:j,pointSignals:C,pointNeutralSpecialCause:v})=>{const $=f,T=E.useMemo(()=>zx(e,t),[e,t]),w=E.useMemo(()=>Ux(T),[T]),L=Ox[g],P=Math.max(T.length*6,60),D=L.height,F=4,A=2,ne=E.useMemo(()=>(e?.length??0)-(T?.length??0),[e?.length,T?.length]),H=T.filter(R=>R.value!=null).map(R=>R.value),U=x??w.mean,G=E.useMemo(()=>{if(U==null)return null;const R=[];if(j?.upperOne!=null&&R.push(Math.abs(j.upperOne-U)),j?.lowerOne!=null&&R.push(Math.abs(U-j.lowerOne)),R.length)return R.reduce((K,te)=>K+te,0)/R.length;const Y=[];return M?.upper!=null&&Y.push(Math.abs(M.upper-U)/3),M?.lower!=null&&Y.push(Math.abs(U-M.lower)/3),Y.length?Y.reduce((K,te)=>K+te,0)/Y.length:null},[j?.upperOne,j?.lowerOne,M?.upper,M?.lower,U]),oe=E.useMemo(()=>{if(G!=null||!H.length||U==null||H.length<2)return null;const R=[];for(let K=1;K<H.length;K++){const te=H[K-1],B=H[K];te!=null&&B!=null&&R.push(Math.abs(B-te))}return R.length?R.reduce((K,te)=>K+te,0)/R.length/1.128:null},[G,H.join(","),U]),z=G??oe,pe=E.useMemo(()=>{if(!i)return null;if(M)return M;if(U==null||z==null)return null;const R=3*z;return{lower:U-R,upper:U+R}},[i,U,z,M?.lower,M?.upper]),we=E.useMemo(()=>{if(c)return{state:c,firedRules:[],mean:w.mean,stdDev:z};if(!d||!z||z===0||U==null||w.latestValue==null)return{state:ke.CommonCause,firedRules:[],mean:w.mean,stdDev:z};const R=[],Y=w.latestValue,K=M?.upper??(z!=null&&U!=null?U+3*z:null),te=M?.lower??(z!=null&&U!=null?U-3*z:null);K!=null&&te!=null&&(Y>K||Y<te)&&R.push("point-beyond-3sigma");const B=H.slice(-8);if(B.length===8){const W=B.every(ue=>ue>U),J=B.every(ue=>ue<U);(W||J)&&R.push("eight-point-run")}const Q=H.slice(-5);if(Q.length===5){const W=Q.every((ce,Te,be)=>Te===0||ce>=be[Te-1]),J=Q.every((ce,Te,be)=>Te===0||ce<=be[Te-1]),ue=j?.upperOne??(z!=null&&U!=null?U+z:null),ge=j?.lowerOne??(z!=null&&U!=null?U-z:null);W&&ue!=null&&Q[Q.length-1]>ue&&R.push("five-point-trend"),J&&ge!=null&&Q[Q.length-1]<ge&&R.push("five-point-trend")}const re=H.slice(-3);if(re.length===3&&(z!=null||j)){const W=j?.upperTwo??(U!=null&&z!=null?U+2*z:null),J=j?.lowerTwo??(U!=null&&z!=null?U-2*z:null);if(W!=null&&J!=null){const ue=re.filter(ce=>ce>W).length,ge=re.filter(ce=>ce<J).length;ue>=2&&R.push("two-of-three-near-limit"),ge>=2&&R.push("two-of-three-near-limit")}}let ie=ke.CommonCause;if(R.includes("point-beyond-3sigma")?ie=Y>U?ke.SpecialCauseImproving:ke.SpecialCauseDeteriorating:(R.includes("eight-point-run")||R.includes("five-point-trend")||R.includes("two-of-three-near-limit"))&&(ie=H[H.length-1]>U?ke.SpecialCauseImproving:ke.SpecialCauseDeteriorating),d&&!c&&R.length===1&&R[0]==="point-beyond-3sigma"){const W=H.slice(-9,-1);if(W.length>=5){const J=W.filter(ge=>ge>U).length,ue=W.filter(ge=>ge<U).length;J>0&&ue>0&&(ie=ke.SpecialCauseNoJudgement)}}return{state:ie,firedRules:R,mean:U,stdDev:z,side:w.latestValue!=null&&U!=null?w.latestValue>U?"above":"below":void 0}},[c,d,z,U,w.latestValue,H.join(",")]);E.useEffect(()=>{d&&!c&&y&&y(we)},[we,d,c,y]);const fe=we.state,de=Wx(fe),Z=R=>{const Y=T.filter(Q=>Q.value!=null);if(!Y.length)return D/2;const K=Y.map(Q=>Q.value);pe&&(pe.lower!=null&&K.push(pe.lower),pe.upper!=null&&K.push(pe.upper));const te=Math.min(...K),B=Math.max(...K);return te===B?D/2:D-(R-te)/(B-te)*(D-A*2)-A},se=E.useMemo(()=>{if(!k||T.length<=k)return T.map((re,ie)=>ie);if(N==="stride"){const re=Math.max(2,k),ie=(T.length-1)/(re-1),W=new Set;for(let J=0;J<re;J++)W.add(Math.round(J*ie));return W.add(T.length-1),Array.from(W).sort((J,ue)=>J-ue)}const R=T.map((re,ie)=>({i:ie,v:re.value}));function Y(re,ie,W){const J=re.i,ue=re.v??0,ge=ie.i,ce=ie.v??0,Te=W.i,be=W.v??0,Ie=Math.abs((be-ce)*J-(Te-ge)*ue+Te*ce-be*ge),Ae=Math.hypot(be-ce,Te-ge);return Ae===0?0:Ie/Ae}function K(re,ie){if(re.length<=2)return re;let W=-1,J=-1;for(let ue=1;ue<re.length-1;ue++){const ge=Y(re[ue],re[0],re[re.length-1]);ge>W&&(W=ge,J=ue)}if(W>ie){const ue=K(re.slice(0,J+1),ie),ge=K(re.slice(J),ie);return[...ue.slice(0,-1),...ge]}return[re[0],re[re.length-1]]}let te=.1,B=R;for(let re=0;re<8&&(B=K(R,te),!(B.length<=k));re++)te*=1.6;const Q=new Set(B.map(re=>re.i));return Q.add(0),Q.add(T.length-1),Array.from(Q).sort((re,ie)=>re-ie)},[T,k,N]),he=E.useMemo(()=>se.map(R=>T[R]),[se,T]),I=E.useMemo(()=>{let R="";return he.forEach((Y,K)=>{if(Y.value==null)return;const te=Z(Y.value),B=K/(he.length-1||1)*(P-F*2)+F;R+=R?` L ${B} ${te}`:`M ${B} ${te}`}),R},[he,P]),O=w.latestIndex??-1,V=pe,ae=Aa(),ee=E.useMemo(()=>`spc-spark-wash-${Math.random().toString(36).slice(2)}`,[T.length,p]),le=T.length>=(n||0),_e=b||"SPC sparkline",Se=(()=>{if(!fe)return;const R=$===je.Up?Ye.HigherIsBetter:$===je.Down?Ye.LowerIsBetter:Ye.ContextDependent,Y={variationIcon:fe===ke.SpecialCauseImproving?"improvement":fe===ke.SpecialCauseDeteriorating?"concern":fe===ke.SpecialCauseNoJudgement?"none":"neither",trend:$===je.Up?De.Higher:De.Lower,polarity:R};try{return nf(Y)}catch{return}})(),me=E.useMemo(()=>{if(!le)return 10;const R=[...T].reverse().filter(K=>K.value!=null).slice(0,6).map(K=>Z(K.value));return R.length&&R.reduce((K,te)=>K+te,0)/R.length<D/2?D:10},[T,le,D]);return o.jsxs("svg",{role:"img","aria-label":_e,"aria-description":Se,width:P,height:D,className:h,viewBox:`0 0 ${P} ${D}`,children:[p&&o.jsxs(o.Fragment,{children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:ee,x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:de,stopOpacity:Number(ae.start)}),o.jsx("stop",{offset:"60%",stopColor:de,stopOpacity:Number(ae.mid)}),o.jsx("stop",{offset:"100%",stopColor:de,stopOpacity:Number(ae.end)})]})}),o.jsx("rect",{x:0,y:0,width:P,height:D,fill:`url(#${ee})`})]}),V&&V.lower!=null&&V.upper!=null&&o.jsxs(o.Fragment,{children:[a&&o.jsx("rect",{x:0,y:Math.min(Z(V.upper),Z(V.lower)),width:P,height:Math.abs(Z(V.upper)-Z(V.lower)),fill:de,fillOpacity:.08}),o.jsx("line",{x1:0,x2:P,y1:Z(V.lower),y2:Z(V.lower),stroke:de,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),o.jsx("line",{x1:0,x2:P,y1:Z(V.upper),y2:Z(V.upper),stroke:de,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),j&&s&&o.jsxs(o.Fragment,{children:[j.lowerTwo!=null&&o.jsx("line",{x1:0,x2:P,y1:Z(j.lowerTwo),y2:Z(j.lowerTwo),stroke:de,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1}),j.lowerOne!=null&&o.jsx("line",{x1:0,x2:P,y1:Z(j.lowerOne),y2:Z(j.lowerOne),stroke:de,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),j.upperOne!=null&&o.jsx("line",{x1:0,x2:P,y1:Z(j.upperOne),y2:Z(j.upperOne),stroke:de,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),j.upperTwo!=null&&o.jsx("line",{x1:0,x2:P,y1:Z(j.upperTwo),y2:Z(j.upperTwo),stroke:de,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1})]})]}),r&&w.mean!=null&&o.jsx("line",{x1:0,x2:P,y1:Z(w.mean),y2:Z(w.mean),stroke:Oe("common-cause","#A6A6A6"),strokeWidth:1,strokeDasharray:"2,2"}),o.jsx("path",{d:I,fill:"none",stroke:Oe("common-cause","#A6A6A6"),strokeWidth:L.stroke,strokeLinecap:"round"}),se.map((R,Y)=>{const K=T[R];if(!K||K.value==null)return null;const te=Z(K.value),B=Y/(he.length-1||1)*(P-F*2)+F,re=(R===O&&l?L.pointR+1:L.pointR)-.5;let ie=Oe("common-cause","#A6A6A6");if(S){const W=C?.[ne+R];if(W==="improvement")ie=Oe("improvement","#00B0F0");else if(W==="concern")ie=Oe("concern","#E46C0A");else if(v?.[ne+R])ie=Oe("no-judgement","#490092");else if(U!=null){const ue=K.value,ge=M?.upper??(z!=null?U+3*z:null),ce=M?.lower??(z!=null?U-3*z:null);ge!=null&&ue>ge?ie=Oe("improvement","#00B0F0"):ce!=null&&ue<ce?ie=Oe("concern","#E46C0A"):ie=Oe("common-cause","#A6A6A6")}else ie=Oe("common-cause","#A6A6A6")}return o.jsx("circle",{cx:B,cy:te,r:re,fill:ie,stroke:"none",strokeWidth:0,onClick:m?()=>m(R,K):void 0,style:m?{cursor:"pointer"}:void 0,"data-index":R,"data-signal-colour":S?ie:void 0},R)}),u&&le&&fe&&fe!==ke.CommonCause&&$&&o.jsx("text",{x:P-4,y:me,textAnchor:"end",fontSize:12,fontWeight:"bold",fill:de,"data-glyph-pos":me<D/2?"top":"bottom",children:$===je.Up?"H":"L"})]})};rf.displayName="SPCSpark";const Ce=e=>typeof e=="number"&&Number.isFinite(e),Vx=e=>e.reduce((t,n)=>t+n,0),rn=e=>e.length?Vx(e)/e.length:NaN;function af(e,t){const n=new Array(e.length).fill(null);let r=null;for(let i=0;i<e.length;i++){const a=e[i];if(!t[i]&&Ce(a)){if(r!==null){const s=e[r];n[i]=Ce(s)?Math.abs(a-s):null}r=i}}return n}function sf(e,t){const n=e.filter(a=>Ce(a));if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=rn(n),i=3.267*r;if(t){const a=n.filter(s=>s<=i);a.length&&a.length!==n.length&&(r=rn(a),i=3.267*r)}return{mrMean:r,mrUcl:i}}function Gx(e,t){if(!Ce(e)||!Ce(t))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=2.66,r=2/3*n,i=1/3*n;return{upperProcessLimit:e+n*t,lowerProcessLimit:e-n*t,upperTwoSigma:e+r*t,lowerTwoSigma:e-r*t,upperOneSigma:e+i*t,lowerOneSigma:e-i*t}}const Yx=.2777,qx=3.6,Xx=e=>Ce(e)&&e>=0?Math.pow(e,Yx):null,rr=e=>Ce(e)&&e>=0?Math.pow(e,qx):null;function Kx(e,t){return!(e>0&&e<1)||!(t>0&&t<1)?NaN:Math.log(1-e)/Math.log(1-t)}const Dr={one:{low:.1586552539,high:.8413447461},two:{low:.0227501319,high:.9772498681},three:{low:.001349898,high:.998650102}};function Jx(e){if(!Ce(e)||e<0)return{cl:null,lcl:null,ucl:null,oneLow:null,oneHigh:null,twoLow:null,twoHigh:null};const t=1/(e+1),n=d=>Kx(d,t)-1,r=n(.5),i=Math.max(0,n(Dr.three.low)),a=n(Dr.three.high),s=Math.max(0,n(Dr.one.low)),l=n(Dr.one.high),u=Math.max(0,n(Dr.two.low)),c=n(Dr.two.high);return{cl:r,lcl:i,ucl:a,oneLow:s,oneHigh:l,twoLow:u,twoHigh:c}}function Zx(e,t,n){const r=e.map(C=>Ce(C)?Xx(C):null),i=af(r,t),{mrMean:a}=sf(i,!!n),s=r.filter((C,v)=>!t[v]&&Ce(C)),l=s.length?rn(s):NaN;if(!Ce(l)||!Ce(a))return{center:null,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null,mr:i,mrMean:null,mrUcl:null};const u=2.66,c=2/3*u,d=1/3*u,f=l+u*a,p=l-u*a,g=l+c*a,b=l-c*a,h=l+d*a,m=l-d*a,y=rr(l),k=rr(f),N=p<=0?null:rr(p),S=rr(h),x=m<=0?null:rr(m),M=rr(g),j=b<=0?null:rr(b);return{center:y??null,upperProcessLimit:k??null,lowerProcessLimit:N??null,upperTwoSigma:M??null,lowerTwoSigma:j??null,upperOneSigma:S??null,lowerOneSigma:x??null,mr:i,mrMean:a,mrUcl:Ce(a)?3.267*a:null}}function Qx(e){const{metricImprovement:t,capabilityMode:n,value:r,mean:i,upperProcessLimit:a,lowerProcessLimit:s,target:l}=e,u=c=>typeof c=="number"&&Number.isFinite(c);return!u(r)||i===null||!u(l)?et.None:n&&u(a)&&u(s)?t===je.Up?u(s)&&s>l?et.Pass:u(a)&&a<l?et.Fail:et.None:t===je.Down?u(a)&&a<l?et.Pass:u(s)&&s>l?et.Fail:et.None:et.None:t===je.Down?r<=l?et.Pass:et.Fail:t===je.Up?r>=l?et.Pass:et.Fail:et.None}function e1(e,t){const{W:n,minGap:r,minDeltaSigma:i,scoreThreshold:a,isShiftUpAt:s,isShiftDownAt:l,isTrendUpAt:u,isTrendDownAt:c,isSingleUpAt:d,isSingleDownAt:f}=t,p=[];let g=0;for(let b=0;b<e.length;b++){const h=e[b];b>0&&e[b-1].partitionId!==h.partitionId&&(g=b);const m=b>0&&s(b-1),y=b>0&&l(b-1),k=b>0&&u(b-1),N=b>0&&c(b-1),S=b>0&&d(b-1),x=b>0&&f(b-1),M=s(b),j=l(b),C=u(b),v=c(b),$=d(b),T=f(b),w=[];M&&!m&&w.push({reason:Ut.Shift,index:b}),j&&!y&&w.push({reason:Ut.Shift,index:b}),C&&!k&&w.push({reason:Ut.Trend,index:b}),v&&!N&&w.push({reason:Ut.Trend,index:b}),$&&!S&&w.push({reason:Ut.Point,index:b}),T&&!x&&w.push({reason:Ut.Point,index:b});for(const L of w){if(L.index-g<r)continue;const P=Math.max(0,L.index-n),D=L.index-1;if(D-P+1<n)continue;const F=L.index,A=L.index+n-1;if(A>=e.length)continue;const ne=e.slice(P,D+1).map(I=>I.value).filter(I=>typeof I=="number"&&Number.isFinite(I)),q=e.slice(F,A+1).map(I=>I.value).filter(I=>typeof I=="number"&&Number.isFinite(I));if(ne.length<n||q.length<n)continue;const H=e[L.index];let U=null;if(typeof H.upperProcessLimit=="number"&&typeof H.mean=="number"){const I=H.upperProcessLimit-H.mean;I>0&&(U=I/3)}if(!U||U<=0)continue;const G=rn(ne),oe=rn(q),z=oe-G;if(Math.abs(z)<i*U)continue;const we=e.slice(F,A+1).filter(I=>I.variationIcon===Me.Concern).length;if(we>1)continue;const fe=I=>{const O=rn(I);return I.length?I.reduce((V,ae)=>V+(ae-O)*(ae-O),0)/I.length:0},de=fe(ne),Z=fe(q);let se=L.reason===Ut.Shift?90:L.reason===Ut.Trend?70:60;if(Z<de&&(se+=10),se-=we*15,se<a)continue;const he=p.find(I=>I.index===L.index);if(he){const I=O=>O===Ut.Shift?3:O===Ut.Trend?2:1;(I(L.reason)>I(he.reason)||se>he.score)&&(he.reason=L.reason,he.score=se,he.deltaMean=z,he.oldMean=G,he.newMean=oe,he.window=[F,A])}else p.push({index:L.index,reason:L.reason,score:se,deltaMean:z,oldMean:G,newMean:oe,window:[F,A]})}}return p.sort((b,h)=>b.index-h.index),p}function zo(){const e=globalThis;if(typeof e.__SPC_PHASE4_STRICT<"u")return!!e.__SPC_PHASE4_STRICT;if(typeof process<"u"){const t=process?.env?.SPC_PHASE4_STRICT;if(typeof t<"u"){const n=String(t).toLowerCase();if(n==="1"||n==="true")return!0;if(n==="0"||n==="false")return!1}}return!0}var En=(e=>(e.Info="info",e.Warning="warning",e.Error="error",e))(En||{}),of=(e=>(e.Config="config",e.Data="data",e.Limits="limits",e.SpecialCause="special_cause",e.Baseline="baseline",e.Logic="logic",e.Target="target",e.Ghost="ghost",e.Partition="partition",e))(of||{}),lf=(e=>(e.UnknownChartType="unknown_chart_type",e.InsufficientPointsGlobal="insufficient_points_global",e.VariationConflictRow="variation_conflict_row",e.NullValuesExcluded="null_values_excluded",e.TargetIgnoredRareEvent="target_ignored_rare_event",e.GhostRowsRareEvent="ghost_rows_rare_event",e.InsufficientPointsPartition="insufficient_points_partition",e.BaselineWithSpecialCause="baseline_with_special_cause",e.PartitionCapApplied="partition_cap_applied",e.GlobalCapApplied="global_cap_applied",e))(lf||{});function t1(e){const t=[],n=[];e.specialCauseSinglePointUp&&t.push(yt.SinglePoint),e.specialCauseSinglePointDown&&n.push(yt.SinglePoint),e.specialCauseTwoOfThreeUp&&t.push(yt.TwoSigma),e.specialCauseTwoOfThreeDown&&n.push(yt.TwoSigma),e.specialCauseShiftUp&&t.push(yt.Shift),e.specialCauseShiftDown&&n.push(yt.Shift),e.specialCauseTrendUp&&t.push(yt.Trend),e.specialCauseTrendDown&&n.push(yt.Trend);const r=t.reduce((a,s)=>Math.max(a,Ea[s].rank),0),i=n.reduce((a,s)=>Math.max(a,Ea[s].rank),0);return{upRules:t,downRules:n,upMax:r,downMax:i,hasUp:t.length>0,hasDown:n.length>0}}function n1(e){const t=[];let n=[];for(const r of e)r.baseline&&n.length&&(t.push(n),n=[]),n.push(r);return n.length&&t.push(n),t}function r1(e,t,n){const r=t.autoRecalculateShiftLength||t.specialCauseShiftPoints||6;if(e.length<r*2)return;const i=e.map((d,f)=>({idx:f,value:d.value})).filter(d=>Ce(d.value));if(i.length<r*2)return;const a=n===je.Up||n===je.Neither,s=n===je.Down;function l(d,f){const p=i.slice(d,f).map(g=>g.value);return p.length?rn(p):NaN}let u=null;if(i.length>1){const d=[];for(let p=1;p<i.length;p++)d.push(Math.abs(i[p].value-i[p-1].value));const f=rn(d);Ce(f)&&f>0&&(u=f*(2.66/3))}if(!u||u<=0)return;const c=t.autoRecalculateDeltaSigma??.5;for(let d=r;d<=i.length-r;d++){const f=d-r,p=l(f,d),g=l(d,d+r);if(!Ce(p)||!Ce(g))continue;const h=(g-p)/u;if(!(a?h>=c:s?-h>=c:Math.abs(h)>=c))continue;const y=i.slice(d,d+r).map(S=>S.value);if(!(a?y.every(S=>S>p):s?y.every(S=>S<p):y.every(S=>a?S>p:S<p)))continue;const N=i[d].idx;e[N].baseline||(e[N].baseline=!0);return}}function cf(e){if(!e)return{};const t=e,n=e,r=n.rules??{},i=n.precedence??{},a=n.thresholds??{},s=n.warnings??{},l=n.rareEvent??{},u=n.capability??{},c=n.grace??{},d=n.baselineSuggest??{},f=n.autoRecalc??{},p=c.emergingEnabled??n.emergingGraceEnabled??t.emergingGraceEnabled??t.emergingDirectionGrace,g=r.collapseWeakerClusterRules??n.collapseWeakerClusterRules??t.collapseWeakerClusterRules??t.collapseClusterRules;if(zo()){if(t.emergingDirectionGrace!==void 0)throw new Error("[spc][phase4] emergingDirectionGrace is no longer supported. Use settings.grace.emergingEnabled.");if(t.collapseClusterRules!==void 0)throw new Error("[spc][phase4] collapseClusterRules is no longer supported. Use settings.rules.collapseWeakerClusterRules.")}const b=globalThis;!zo()&&t.emergingDirectionGrace!==void 0&&n.emergingGraceEnabled===void 0&&c.emergingEnabled===void 0&&!b.__spc_warn_emergingDirectionGrace&&(b.__spc_warn_emergingDirectionGrace=!0,console.warn("[spc] emergingDirectionGrace is deprecated; use grace.emergingEnabled")),!zo()&&t.collapseClusterRules!==void 0&&r.collapseWeakerClusterRules===void 0&&n.collapseWeakerClusterRules===void 0&&!b.__spc_warn_collapseClusterRules&&(b.__spc_warn_collapseClusterRules=!0,console.warn("[spc] collapseClusterRules is deprecated; use rules.collapseWeakerClusterRules"));const h=k=>{const N={};for(const S of Object.keys(k)){const x=k[S];x!==void 0&&(N[S]=x)}return N},m=h({excludeMovingRangeOutliers:l.excludeMovingRangeOutliers??t.excludeMovingRangeOutliers,specialCauseShiftPoints:r.shiftPoints??t.specialCauseShiftPoints,specialCauseTrendPoints:r.trendPoints??t.specialCauseTrendPoints,enableFourOfFiveRule:r.fourOfFiveEnabled??t.enableFourOfFiveRule,enableFifteenInInnerThirdRule:r.fifteenInnerThirdEnabled??t.enableFifteenInInnerThirdRule,collapseWeakerClusterRules:g??t.collapseWeakerClusterRules,precedenceStrategy:i.strategy??t.precedenceStrategy,conflictPrecedenceMode:i.conflictMode??t.conflictPrecedenceMode,minimumPoints:a.minimumPoints??t.minimumPoints,minimumPointsPartition:a.minimumPointsPartition??t.minimumPointsPartition,maximumPointsPartition:a.maximumPointsPartition??t.maximumPointsPartition,maximumPoints:a.maximumPoints??t.maximumPoints,transitionBufferPoints:a.transitionBufferPoints??t.transitionBufferPoints,minimumPointsWarning:s.minimumPointsWarning??t.minimumPointsWarning,pointConflictWarning:s.pointConflictWarning??t.pointConflictWarning,variationIconConflictWarning:s.variationIconConflictWarning??t.variationIconConflictWarning,nullValueWarning:s.nullValueWarning??t.nullValueWarning,targetSuppressedWarning:s.targetSuppressedWarning??t.targetSuppressedWarning,ghostOnRareEventWarning:s.ghostOnRareEventWarning??t.ghostOnRareEventWarning,partitionSizeWarnings:s.partitionSizeWarnings??t.partitionSizeWarnings,baselineSpecialCauseWarning:s.baselineSpecialCauseWarning??t.baselineSpecialCauseWarning,maximumPointsWarnings:s.maximumPointsWarnings??t.maximumPointsWarnings,assuranceCapabilityMode:u.assuranceCapabilityMode??t.assuranceCapabilityMode,emergingGraceEnabled:p,emergingDirectionGrace:p,baselineSuggest:d.enabled??t.baselineSuggest,baselineSuggestMinDeltaSigma:d.minDeltaSigma??t.baselineSuggestMinDeltaSigma,baselineSuggestStabilityPoints:d.stabilityPoints??t.baselineSuggestStabilityPoints,baselineSuggestMinGap:d.minGap??t.baselineSuggestMinGap,baselineSuggestScoreThreshold:d.scoreThreshold??t.baselineSuggestScoreThreshold,autoRecalculateAfterShift:f.enabled??t.autoRecalculateAfterShift,autoRecalculateShiftLength:f.shiftLength??t.autoRecalculateShiftLength,autoRecalculateDeltaSigma:f.deltaSigma??t.autoRecalculateDeltaSigma}),y={...m,...h(t)};if(p!==void 0&&(y.emergingGraceEnabled=p,y.grace={...y.grace,emergingEnabled:p}),m.collapseWeakerClusterRules!==void 0){const k=m.collapseWeakerClusterRules;y.collapseWeakerClusterRules=k,y.rules={...y.rules,collapseWeakerClusterRules:k}}return h(y)}function Wa(e){const{chartType:t,metricImprovement:n,data:r,settings:i={}}=e,a=cf(i),s={excludeMovingRangeOutliers:!1,specialCauseShiftPoints:6,specialCauseTrendPoints:6,enableFourOfFiveRule:!1,minimumPoints:13,minimumPointsWarning:!1,minimumPointsPartition:12,maximumPointsPartition:null,maximumPoints:null,variationIconConflictWarning:!0,nullValueWarning:!0,targetSuppressedWarning:!0,ghostOnRareEventWarning:!0,partitionSizeWarnings:!0,baselineSpecialCauseWarning:!0,maximumPointsWarnings:!0,assuranceCapabilityMode:!0,baselineSuggest:!1,baselineSuggestMinDeltaSigma:.5,baselineSuggestStabilityPoints:5,baselineSuggestMinGap:12,baselineSuggestScoreThreshold:50,precedenceStrategy:Ba.DirectionalFirst,emergingDirectionGrace:!1,rules:{},grace:{},...a};if(!Array.isArray(r))throw new Error("data must be an array of rows");const l=r.map((m,y)=>({rowId:y+1,x:m.x,value:Ce(m.value)?m.value:null,ghost:!!m.ghost,baseline:!!m.baseline,target:Ce(m.target)?m.target:null}));if(a?.autoRecalculateAfterShift)try{r1(l,a,n)}catch{}const u=n1(l),c=[],d=[],p=l.filter(m=>!m.ghost&&Ce(m.value)).length>=(s.minimumPoints??13);let g=0;const b={};for(const m of u){g++;const y=m.map(w=>w.value),k=m.map(w=>w.ghost);let N=new Array(y.length).fill(null),S=NaN,x=NaN,M=NaN,j={upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};if(t==="XmR"){N=af(y,k);const w=y.filter((P,D)=>!k[D]&&Ce(P));S=w.length?rn(w):NaN;const L=sf(N,!!s.excludeMovingRangeOutliers);x=L.mrMean,M=L.mrUcl,j=Gx(S,x)}else if(t==="T"){const w=Zx(y,k,!!s.excludeMovingRangeOutliers);N=w.mr,x=w.mrMean??NaN,M=w.mrUcl??NaN,S=w.center??NaN,j={upperProcessLimit:w.upperProcessLimit,lowerProcessLimit:w.lowerProcessLimit,upperTwoSigma:w.upperTwoSigma,lowerTwoSigma:w.lowerTwoSigma,upperOneSigma:w.upperOneSigma,lowerOneSigma:w.lowerOneSigma}}else if(t==="G"){const w=y.filter((D,F)=>!k[F]&&Ce(D)),L=w.length?rn(w):NaN,P=Jx(L);S=P.cl??NaN,j={upperProcessLimit:P.ucl,lowerProcessLimit:P.lcl,upperTwoSigma:P.twoHigh,lowerTwoSigma:P.twoLow,upperOneSigma:P.oneHigh,lowerOneSigma:P.oneLow},N=new Array(y.length).fill(null),x=NaN,M=NaN}else d.push({code:"unknown_chart_type",category:"config",severity:"error",message:`Unknown ChartType '${t}' â€“ supported: XmR, T, G.`,context:{chartType:t}});const C=m.map((w,L)=>{const P=!w.ghost&&Ce(w.value)?y.slice(0,L+1).filter((ne,q)=>!k[q]&&Ce(ne)).length:0,D=p,F=D?j:{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};return{rowId:w.rowId,x:w.x,value:Ce(w.value)?w.value:null,ghost:w.ghost,partitionId:g,pointRank:P,mean:D&&Ce(S)?S:null,mr:Ce(N[L])?N[L]:null,mrMean:D&&Ce(x)?x:null,mrUcl:D&&Ce(M)?M:null,upperProcessLimit:Ce(F.upperProcessLimit)?F.upperProcessLimit:null,lowerProcessLimit:Ce(F.lowerProcessLimit)?F.lowerProcessLimit:null,upperTwoSigma:Ce(F.upperTwoSigma)?F.upperTwoSigma:null,lowerTwoSigma:Ce(F.lowerTwoSigma)?F.lowerTwoSigma:null,upperOneSigma:Ce(F.upperOneSigma)?F.upperOneSigma:null,lowerOneSigma:Ce(F.lowerOneSigma)?F.lowerOneSigma:null,target:Ce(w.target)?w.target:null,specialCauseFifteenInnerThird:!1,specialCauseSinglePointUp:!1,specialCauseSinglePointDown:!1,specialCauseTwoOfThreeUp:!1,specialCauseTwoOfThreeDown:!1,specialCauseFourOfFiveUp:!1,specialCauseFourOfFiveDown:!1,specialCauseShiftUp:!1,specialCauseShiftDown:!1,specialCauseTrendUp:!1,specialCauseTrendDown:!1,variationIcon:Me.Suppressed,assuranceIcon:et.None,upperBaseline:D&&Ce(S)?S:null,lowerBaseline:D&&Ce(S)?S:null,movingRangeHighPointValue:D&&Ce(M)?M:null,ghostValue:w.ghost&&Ce(w.value)?w.value:null,ghostFlag:!!w.ghost,specialCauseImprovementValue:null,specialCauseConcernValue:null,specialCauseNeitherValue:null,ruleTags:[]}});b[g]=C.filter(w=>!w.ghost&&Ce(w.value)).length;const v=s.specialCauseShiftPoints??6,$=s.specialCauseTrendPoints??6,T=[];for(let w=0;w<C.length;w++){const L=C[w],P=L.value;if(!L.ghost&&Ce(P)&&T.push(w),!(Ce(L.mean)&&Ce(L.upperProcessLimit)&&Ce(L.lowerProcessLimit))||L.ghost||!Ce(P)){c.push(L);continue}L.specialCauseSinglePointUp=Ce(L.upperProcessLimit)?P>L.upperProcessLimit:!1,L.specialCauseSinglePointDown=Ce(L.lowerProcessLimit)?P<L.lowerProcessLimit:!1,c.push(L)}if(T.length){const w=D=>C[D];let L=[],P=[];for(const D of T){const F=w(D);if(!Ce(F.mean)||!Ce(F.value)){L=[],P=[];continue}if(F.value>F.mean?(L.push(D),P=[]):F.value<F.mean?(P.push(D),L=[]):(L=[],P=[]),L.length>=v)for(const A of L){const ne=w(A);ne.specialCauseShiftUp=!0}if(P.length>=v)for(const A of P){const ne=w(A);ne.specialCauseShiftDown=!0}}for(let D=0;D<=T.length-3;D++){const A=T.slice(D,D+3).map(w);if(!A.every(fe=>Ce(fe.mean)&&Ce(fe.value)))continue;const ne=A[0].mean,q=A.every(fe=>fe.value>ne),H=A.every(fe=>fe.value<ne);if(!q&&!H)continue;const U=A[0].upperTwoSigma??1/0,G=A[0].lowerTwoSigma??-1/0,oe=A[0].upperProcessLimit??1/0,z=A[0].lowerProcessLimit??-1/0,pe=A.filter(fe=>fe.value>U&&fe.value<=oe),we=A.filter(fe=>fe.value<G&&fe.value>=z);if(q&&pe.length>=2)for(const fe of pe)fe.specialCauseTwoOfThreeUp=!0;if(H&&we.length>=2)for(const fe of we)fe.specialCauseTwoOfThreeDown=!0}if(s.enableFourOfFiveRule)for(let D=0;D<=T.length-5;D++){const A=T.slice(D,D+5).map(w);if(!A.every(oe=>Ce(oe.mean)&&Ce(oe.value)))continue;const ne=A[0].mean;if(!A.every(oe=>oe.value>ne)&&!A.every(oe=>oe.value<ne))continue;const q=A[0].upperOneSigma??1/0,H=A[0].lowerOneSigma??-1/0,U=A.filter(oe=>oe.value>q),G=A.filter(oe=>oe.value<H);if(A.every(oe=>oe.value>ne)&&U.length>=4)for(const oe of U)oe.specialCauseFourOfFiveUp=!0;if(A.every(oe=>oe.value<ne)&&G.length>=4)for(const oe of G)oe.specialCauseFourOfFiveDown=!0}for(let D=0;D<=T.length-$;D++){const F=T.slice(D,D+$),A=F.map(w);if(!A.every(H=>Ce(H.value)))continue;let ne=!0,q=!0;for(let H=1;H<A.length&&(A[H].value>A[H-1].value||(ne=!1),A[H].value<A[H-1].value||(q=!1),!(!ne&&!q));H++);if(ne)for(const H of F){const U=w(H);U.specialCauseTrendUp=!0}if(q)for(const H of F){const U=w(H);U.specialCauseTrendDown=!0}}if(s.enableFifteenInInnerThirdRule){let D=[];for(const F of T){const A=w(F);if(!Ce(A.value)||!Ce(A.mean)||!Ce(A.upperOneSigma)||!Ce(A.lowerOneSigma)){D=[];continue}if(!(A.value<A.upperOneSigma&&A.value>A.lowerOneSigma)){D=[];continue}if(D.push(F),D.length>=15){const q=D.map(w),H=q.some(G=>G.value>G.mean),U=q.some(G=>G.value<G.mean);if(H&&U)for(const G of D)w(G).specialCauseFifteenInnerThird=!0}}}}if(s.maximumPointsPartition&&Number.isFinite(s.maximumPointsPartition)){const w=s.maximumPointsPartition;let L=0;for(const P of c.filter(D=>D.partitionId===g))!P.ghost&&Ce(P.value)&&L++,L>w&&(P.mean=P.upperProcessLimit=P.lowerProcessLimit=null,P.upperTwoSigma=P.lowerTwoSigma=P.upperOneSigma=P.lowerOneSigma=null)}}for(const m of c){if(m.ruleTags&&m.ruleTags.length)continue;const y=[];m.specialCauseShiftUp&&y.push(Ct.ShiftHigh),m.specialCauseShiftDown&&y.push(Ct.ShiftLow),m.specialCauseTrendUp&&y.push(Ct.TrendIncreasing),m.specialCauseTrendDown&&y.push(Ct.TrendDecreasing),m.specialCauseSinglePointUp&&y.push(Ct.SinglePointAbove),m.specialCauseSinglePointDown&&y.push(Ct.SinglePointBelow),m.specialCauseTwoOfThreeUp&&y.push(Ct.TwoOfThreeAbove),m.specialCauseTwoOfThreeDown&&y.push(Ct.TwoOfThreeBelow),m.specialCauseFourOfFiveUp&&y.push(Ct.FourOfFiveAbove),m.specialCauseFourOfFiveDown&&y.push(Ct.FourOfFiveBelow),m.specialCauseFifteenInnerThird&&y.push(Ct.FifteenInnerThird),y.length&&(m.ruleTags=y)}for(let m=0;m<c.length;m++){const y=c[m];if(Object.prototype.hasOwnProperty.call(y,ui.ImprovementValueBeforePruning)||Object.defineProperty(y,ui.ImprovementValueBeforePruning,{get(){return y.originalSpecialCauseImprovementValue??null},enumerable:!1,configurable:!0}),Object.prototype.hasOwnProperty.call(y,ui.ConcernValueBeforePruning)||Object.defineProperty(y,ui.ConcernValueBeforePruning,{get(){return y.originalSpecialCauseConcernValue??null},enumerable:!1,configurable:!0}),y.ghost||!Ce(y.value)||y.mean===null){y.variationIcon=Me.Suppressed;continue}const k=y.value>y.mean,N=y.value<y.mean;s.rules?.collapseWeakerClusterRules&&(y.specialCauseTwoOfThreeUp&&y.specialCauseFourOfFiveUp&&(y.specialCauseTwoOfThreeUp=!1),y.specialCauseTwoOfThreeDown&&y.specialCauseFourOfFiveDown&&(y.specialCauseTwoOfThreeDown=!1));const S=y.specialCauseTrendUp&&k,x=y.specialCauseTrendDown&&N,M=y.specialCauseSinglePointUp||y.specialCauseTwoOfThreeUp||s.enableFourOfFiveRule&&y.specialCauseFourOfFiveUp||y.specialCauseShiftUp||S,j=y.specialCauseSinglePointDown||y.specialCauseTwoOfThreeDown||s.enableFourOfFiveRule&&y.specialCauseFourOfFiveDown||y.specialCauseShiftDown||x;let C=!1;if(s.precedenceStrategy===Ba.DirectionalFirst&&(s.grace?.emergingEnabled||s.emergingGraceEnabled||s.emergingDirectionGrace)){const $=s.specialCauseTrendPoints||6;if($>1&&!(y.specialCauseTrendUp||y.specialCauseTrendDown)){const T=$-1,w=[];for(let L=m;L>=0&&w.length<T;L--){const P=c[L];!P.ghost&&Ce(P.value)&&P.mean!==null&&w.unshift(P)}if(w.length===T){let L=!0;for(let P=1;P<w.length&&L;P++)n===je.Up?w[P].value>w[P-1].value||(L=!1):n===je.Down&&w[P].value<w[P-1].value||(L=!1);C=L}}}if(s.precedenceStrategy===Ba.DirectionalFirst){const T=n===je.Up?M:n===je.Down?j:!1,w=n===je.Up?j:n===je.Down?M:!1;T&&!w?y.variationIcon=Me.Improvement:w&&!T?y.variationIcon=C?Me.Neither:Me.Concern:T&&w?y.variationIcon=C||y.specialCauseTrendUp||y.specialCauseTrendDown?Me.Improvement:Me.Neither:y.variationIcon=Me.Neither}else n===je.Up?y.variationIcon=M?Me.Improvement:j?Me.Concern:Me.Neither:n===je.Down?y.variationIcon=j?Me.Improvement:M?Me.Concern:Me.Neither:y.variationIcon=Me.Neither;const v=M||j;if(y.specialCauseImprovementValue=v&&y.variationIcon===Me.Improvement?y.value:null,y.specialCauseConcernValue=v&&y.variationIcon===Me.Concern?y.value:null,y.specialCauseNeitherValue=v&&y.variationIcon===Me.Neither?y.value:null,s.conflictPrecedenceMode===Jd.SqlRankingV26a&&y.specialCauseImprovementValue!==null&&y.specialCauseConcernValue!==null){const $=[];y.specialCauseSinglePointUp&&$.push({id:yt.SinglePoint,rank:1,side:ot.Up}),y.specialCauseSinglePointDown&&$.push({id:yt.SinglePoint,rank:1,side:ot.Down}),y.specialCauseTwoOfThreeUp&&$.push({id:yt.TwoSigma,rank:2,side:ot.Up}),y.specialCauseTwoOfThreeDown&&$.push({id:yt.TwoSigma,rank:2,side:ot.Down}),y.specialCauseShiftUp&&$.push({id:yt.Shift,rank:3,side:ot.Up}),y.specialCauseShiftDown&&$.push({id:yt.Shift,rank:3,side:ot.Down}),y.specialCauseTrendUp&&$.push({id:yt.Trend,rank:4,side:ot.Up}),y.specialCauseTrendDown&&$.push({id:yt.Trend,rank:4,side:ot.Down});const T=$.filter(q=>q.side===ot.Up).reduce((q,H)=>Math.max(q,H.rank),0),w=$.filter(q=>q.side===ot.Down).reduce((q,H)=>Math.max(q,H.rank),0);let L;T>w?L=Xt.Upwards:w>T?L=Xt.Downwards:L=Xt.Same;const P=y.specialCauseImprovementValue,D=y.specialCauseConcernValue;L===Xt.Upwards?n===je.Up?y.specialCauseConcernValue=null:n===je.Down&&(y.specialCauseImprovementValue=null):L===Xt.Downwards?n===je.Up?y.specialCauseImprovementValue=null:n===je.Down&&(y.specialCauseConcernValue=null):y.variationIcon===Me.Improvement?y.specialCauseConcernValue=null:y.variationIcon===Me.Concern?y.specialCauseImprovementValue=null:y.specialCauseConcernValue=null,y.specialCauseImprovementValue!==null&&y.specialCauseConcernValue===null?y.variationIcon=Me.Improvement:y.specialCauseConcernValue!==null&&y.specialCauseImprovementValue===null?y.variationIcon=Me.Concern:y.specialCauseImprovementValue===null&&y.specialCauseConcernValue===null&&(y.variationIcon=Me.Neither);const F=y.specialCauseImprovementValue!==null?ot.Up:y.specialCauseConcernValue!==null?ot.Down:void 0,A=F===ot.Up?T:F===ot.Down?w:Math.max(T,w),ne=$.find(q=>q.rank===A&&(!F||q.side===F));y.conflictPrimeDirection=L,y.conflictResolved=!0,y.conflictResolvedRank=A||void 0,ne&&(y.conflictResolvedByRuleId=ne.id),y.pruningMode=Ro.Conflict,y.originalSpecialCauseImprovementValue=P,y.originalSpecialCauseConcernValue=D}{const $=l[y.rowId-1],T=Qx({metricImprovement:n,capabilityMode:s.assuranceCapabilityMode,value:y.value,mean:y.mean,upperProcessLimit:y.upperProcessLimit,lowerProcessLimit:y.lowerProcessLimit,target:Ce($?.target)?$.target:null});y.assuranceIcon=T}}if((s.minimumPointsWarning??!1)&&!p){const m=l.filter(y=>!y.ghost&&Ce(y.value)).length;d.push({code:"insufficient_points_global",category:"data",severity:"warning",message:`Only ${m} non-ghost points available; minimum required is ${s.minimumPoints}. Limits and icons suppressed.`,context:{available:m,minimumRequired:s.minimumPoints}})}if(s.variationIconConflictWarning)for(const m of c)m.variationIcon===Me.Improvement&&(m.specialCauseSinglePointUp||m.specialCauseTwoOfThreeUp||s.enableFourOfFiveRule&&m.specialCauseFourOfFiveUp||m.specialCauseShiftUp||m.specialCauseTrendUp)&&(m.specialCauseSinglePointDown||m.specialCauseTwoOfThreeDown||s.enableFourOfFiveRule&&m.specialCauseFourOfFiveDown||m.specialCauseShiftDown||m.specialCauseTrendDown)&&d.push({code:"variation_conflict_row",category:"logic",severity:"warning",message:`Row ${m.rowId}: simultaneous high/low special-cause signals â€“ variation icon may be ambiguous.`,context:{rowId:m.rowId}});if(s.maximumPoints&&Number.isFinite(s.maximumPoints)){const m=s.maximumPoints;let y=0;for(const k of c)!k.ghost&&Ce(k.value)&&y++,y>m&&(k.mean=k.upperProcessLimit=k.lowerProcessLimit=null,k.upperTwoSigma=k.lowerTwoSigma=k.upperOneSigma=k.lowerOneSigma=null)}if(s.nullValueWarning&&(t===nn.XmR||t===nn.G)){const m=l.filter(y=>!y.ghost&&(y.value===null||y.value===void 0||!Ce(y.value))).length;m&&d.push({code:"null_values_excluded",category:"data",severity:"info",message:`${m} null/missing value(s) excluded from calculations.`,context:{nullCount:m}})}if(s.targetSuppressedWarning&&(t===nn.T||t===nn.G)&&l.some(y=>Ce(y.target))&&d.push({code:"target_ignored_rare_event",category:"target",severity:"info",message:`Targets provided are ignored for ${t} charts in this port.`,context:{chartType:t}}),s.ghostOnRareEventWarning&&(t===nn.T||t===nn.G)){const m=l.filter(y=>y.ghost).length;m&&d.push({code:"ghost_rows_rare_event",category:"ghost",severity:"info",message:`${m} ghost row(s) supplied for rare-event chart (${t}); verify intent.`,context:{chartType:t,ghostCount:m}})}if(s.partitionSizeWarnings&&Object.entries(b).forEach(([m,y])=>{y<s.minimumPointsPartition&&d.push({code:"insufficient_points_partition",category:"partition",severity:"warning",message:`Partition ${m} has only ${y} non-ghost point(s); below recommended ${s.minimumPointsPartition}.`,context:{partitionId:Number(m),count:y,minimum:s.minimumPointsPartition}})}),s.baselineSpecialCauseWarning){const m=[];c.forEach(y=>{l[y.rowId-1].baseline&&(y.specialCauseSinglePointUp||y.specialCauseSinglePointDown||y.specialCauseTwoOfThreeUp||y.specialCauseTwoOfThreeDown||y.specialCauseFourOfFiveUp||y.specialCauseFourOfFiveDown||y.specialCauseShiftUp||y.specialCauseShiftDown||y.specialCauseTrendUp||y.specialCauseTrendDown)&&m.push(y.rowId)}),m.length&&d.push({code:"baseline_with_special_cause",category:"baseline",severity:"warning",message:`Baseline set with special-cause present at row(s): ${m.join(", ")}.`,context:{rows:m}})}s.maximumPointsWarnings&&(s.maximumPointsPartition&&Number.isFinite(s.maximumPointsPartition)&&d.push({code:"partition_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after ${s.maximumPointsPartition} non-ghost points per partition.`,context:{cap:s.maximumPointsPartition}}),s.maximumPoints&&Number.isFinite(s.maximumPoints)&&d.push({code:"global_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after global cap of ${s.maximumPoints} non-ghost points.`,context:{cap:s.maximumPoints}}));let h;if(s.baselineSuggest){const m=s.baselineSuggestStabilityPoints,y=s.baselineSuggestMinGap,k=s.baselineSuggestMinDeltaSigma,N=s.baselineSuggestScoreThreshold;h=e1(c.map(x=>({value:x.value,partitionId:x.partitionId,variationIcon:x.variationIcon,mean:x.mean,upperProcessLimit:x.upperProcessLimit})),{W:m,minGap:y,minDeltaSigma:k,scoreThreshold:N,isShiftUpAt:x=>!!c[x].specialCauseShiftUp,isShiftDownAt:x=>!!c[x].specialCauseShiftDown,isTrendUpAt:x=>!!c[x].specialCauseTrendUp,isTrendDownAt:x=>!!c[x].specialCauseTrendDown,isSingleUpAt:x=>!!c[x].specialCauseSinglePointUp,isSingleDownAt:x=>!!c[x].specialCauseSinglePointDown}).map(x=>({index:x.index,reason:x.reason,score:x.score,deltaMean:x.deltaMean,oldMean:x.oldMean,newMean:x.newMean,window:x.window}))}return{rows:c,warnings:d,...h?{suggestedBaselines:h}:{}}}function i1(e,t){const n=t1(e),r=n.upMax,i=n.downMax,a=n.upRules.map(h=>({id:h,rank:Kd[h]})),s=n.downRules.map(h=>({id:h,rank:Kd[h]}));let l;r>i?l=Xt.Upwards:i>r?l=Xt.Downwards:l=Xt.Same;const u=r>0,c=i>0,d=t===je.Up&&u||t===je.Down&&c?e.value:null,f=t===je.Up&&c||t===je.Down&&u?e.value:null;e.sqlOriginalImprovementValue=d,e.sqlOriginalConcernValue=f,d!==null&&f!==null&&(e.sqlPruned=!0,l===Xt.Upwards?t===je.Up||t===je.Down&&(e.sqlOriginalImprovementValue=null):l===Xt.Downwards?t===je.Up?e.sqlOriginalImprovementValue=null:je.Down:d!==null?e.sqlOriginalConcernValue=null:f!==null&&(e.sqlOriginalImprovementValue=null)),e.sqlOriginalImprovementValue&&!e.sqlOriginalConcernValue?e.variationIcon=Me.Improvement:!e.sqlOriginalImprovementValue&&e.sqlOriginalConcernValue?e.variationIcon=Me.Concern:!e.sqlOriginalImprovementValue&&!e.sqlOriginalConcernValue?e.variationIcon=Me.Neither:e.variationIcon=Me.Improvement,e.primeDirection=l,e.primeRank=Math.max(r,i)||void 0,e.pruningMode=Ro.Sql;const b=((e.variationIcon===Me.Concern?t===je.Up?ot.Down:ot.Up:t===je.Up?ot.Up:ot.Down)===ot.Up?a:s).reduce((h,m)=>!h||m.rank>h.rank?m:h,void 0);b&&(e.primeRuleId=b.id)}function uf(e){const{chartType:t,metricImprovement:n,data:r,settings:i={}}=e,a=Wa({chartType:t,metricImprovement:n,data:r,settings:{...i}}),s=a.rows.map(l=>({...l}));for(const l of s)i1(l,n);return{rows:s,warnings:a.warnings}}function df(e,t){return e==="improvement"?ke.SpecialCauseImproving:e==="concern"?ke.SpecialCauseDeteriorating:e==="suppressed"||e==="neither"&&t?ke.SpecialCauseNoJudgement:e==="neither"?ke.CommonCause:null}function a1(e,t){return e==="improvement"||e==="concern"||e==="suppressed"||e==="neither"&&!!t}function s1(e){const t=e.replace("#","");return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function ff(e){const{values:t,x:n,chartType:r=nn.XmR,metricImprovement:i=je.Neither,useSqlCompatEngine:a=!1,showLimits:s=!0,showLimitBand:l=!1,showInnerBands:u=!1,showMean:c=!1,autoClassify:d=!0}=e,f=X.useMemo(()=>{const M=[];for(let j=0;j<t.length;j++)M.push({x:n?.[j],value:t[j]});return M},[t,n]),p=X.useMemo(()=>{try{const M=f.map((j,C)=>({x:j.x??C,value:j.value}));return a?uf({chartType:r,metricImprovement:i,data:M,settings:{}}):Wa({chartType:r,metricImprovement:i,data:M,settings:{}})}catch{return null}},[f,r,i,a]),g=X.useMemo(()=>{const M=p?.rows;if(!M||M.length===0)return null;for(let j=M.length-1;j>=0;j--){const C=M[j];if(C&&C.value!=null&&!C.ghost)return C}return M[M.length-1]??null},[p]),b=X.useMemo(()=>{const M=p?.rowsRepresentative??p?.rows;if(!M||!Array.isArray(M)||M.length===0)return null;const j=M[M.length-1];return df(j?.variationIcon,(j?.specialCauseNeitherValue??null)!=null)},[p]),h=X.useMemo(()=>g?.mean??null,[g]),m=X.useMemo(()=>{if(!g)return null;const M=g?.lowerProcessLimit??null,j=g?.upperProcessLimit??null;return M==null&&j==null?null:{lower:M,upper:j}},[g]),y=X.useMemo(()=>g?{upperOne:g?.upperOneSigma??null,upperTwo:g?.upperTwoSigma??null,lowerOne:g?.lowerOneSigma??null,lowerTwo:g?.lowerTwoSigma??null}:null,[g]),k=X.useMemo(()=>{const M=p?.rows;if(!(!M||M.length===0))return a?M.map(j=>{const C=j?.variationIcon;return C==="improvement"?"improvement":C==="concern"?"concern":"neither"}):M.map(j=>{const C=!!j?.specialCauseSinglePointUp||!!j?.specialCauseTwoOfThreeUp||!!j?.specialCauseFourOfFiveUp||!!j?.specialCauseShiftUp||!!j?.specialCauseTrendUp,v=!!j?.specialCauseSinglePointDown||!!j?.specialCauseTwoOfThreeDown||!!j?.specialCauseFourOfFiveDown||!!j?.specialCauseShiftDown||!!j?.specialCauseTrendDown;switch(i){case je.Up:return C?"improvement":v?"concern":"neither";case je.Down:return v?"improvement":C?"concern":"neither";case je.Neither:default:return"neither"}})},[p,i,a]),N=X.useMemo(()=>{const M=p?.rows;if(!(!M||M.length===0))return M.map(j=>!!j?.specialCauseNeitherValue)},[p]),S=X.useMemo(()=>{let M=null;if(g&&g.value!=null&&!g.ghost){const P=g.variationIcon,D=(g?.specialCauseNeitherValue??null)!=null;b===ke.SpecialCauseNoJudgement?M=a1(P,D)?ke.SpecialCauseNoJudgement:ke.CommonCause:M=df(P,D)??ke.CommonCause}const j=M??ke.CommonCause,C=Oa[j].hex,[v,$,T]=s1(C),w=Aa();return{"--fdp-metric-card-bg":`linear-gradient(180deg, rgba(${v}, ${$}, ${T}, ${w.start}) 0%, rgba(${v}, ${$}, ${T}, ${w.mid}) 50%, rgba(${v}, ${$}, ${T}, ${w.end}) 100%)`,"--fdp-metric-card-accent":C}},[g,b]);return{sparkProps:X.useMemo(()=>({data:f,showMean:c,showLimits:s,showLimitBand:l,showInnerBands:u,metricImprovement:i,centerLine:h,controlLimits:m,sigmaBands:y,pointSignals:k,pointNeutralSpecialCause:N,variationState:b??void 0,autoClassify:!!(d&&!b),onClassification:()=>{}}),[f,c,s,l,u,i,d,b,h,m?.lower,m?.upper,y?.upperOne,y?.upperTwo,y?.lowerOne,y?.lowerTwo,k?.length,N?.length]),metricCardStyle:S,latestState:b}}function hf(e){if(e==null)return;const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.valueOf())?void 0:t}function o1(e,t,n){const r=new Array(e),i=new Date(t);for(let a=0;a<e;a++)switch(r[a]=new Date(i),n){case"hourly":i.setHours(i.getHours()+1);break;case"daily":i.setDate(i.getDate()+1);break;case"weekly":i.setDate(i.getDate()+7);break;case"monthly":i.setMonth(i.getMonth()+1);break;case"quarterly":i.setMonth(i.getMonth()+3);break;case"annually":i.setFullYear(i.getFullYear()+1);break}return r}function l1(e,t){const n=e.filter(Boolean);if(n.length<2)return t;const r=[];for(let u=1;u<n.length;u++)r.push(n[u].getTime()-n[u-1].getTime());const i=r.sort((u,c)=>u-c),a=i[Math.floor(i.length/2)],s=3600*1e3,l=24*s;return a<=2*s?"hourly":a<=2*l?"daily":a<=10*l?"weekly":a<=45*l?"monthly":a<=120*l?"quarterly":"annually"}function pf(e,t){if(e)try{switch(t){case"hourly":return new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"}).format(e);case"daily":return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e);case"weekly":return`Week of ${new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}`;case"monthly":return new Intl.DateTimeFormat(void 0,{month:"short",year:"numeric"}).format(e);case"quarterly":return`Q${Math.floor(e.getMonth()/3)+1} ${e.getFullYear()}`;case"annually":return`${e.getFullYear()}`;default:return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}}catch{return}}function c1(e,t,n,r="0-100"){if(t)return t;if(n)return n;const i=e.filter(l=>l!=null);if(!i.length)return;const a=Math.min(...i),s=Math.max(...i);if(r==="0-1"){if(a>=0&&s<=1&&s>0)return"%"}else if(a>=0&&s<=100&&s>0)return"%"}function u1(e,t,n=1){switch(e||t){case"hourly":return n===1?"last hour":`last ${n} hours`;case"daily":return n===1?"last day":`last ${n} days`;case"weekly":return n===1?"last week":`last ${n} weeks`;case"monthly":return n===1?"last month":`last ${n} months`;case"quarterly":return n===1?"last quarter":`last ${n} quarters`;case"annually":return n===1?"last year":`last ${n} years`;default:return"previous"}}function mf(e){const{values:t,dates:n,intervalHint:r,startDate:i,providedUnit:a,defaultUnit:s,autoValue:l=!0,autoDelta:u=!0,autoMetadata:c=!0,deltaConfig:d}=e,f=t.map(v=>typeof v=="number"?v:v==null?null:Number(v));let p=-1;for(let v=f.length-1;v>=0;v--)if(f[v]!=null){p=v;break}let g=(n||[]).map(hf);if(!g.some(Boolean)){const v=hf(i);v&&r?g=o1(f.length,v,r):g=new Array(f.length).fill(void 0)}const h=l1(g,r),m=c1(f,a,s,e.percentHeuristic),y=l&&p>=0&&f[p]!=null?f[p]:void 0,k={strategy:"previous",n:1,absolute:!0,skipNulls:!0,...d||{}};function N(){if(p<0)return-1;if(k.strategy==="previous"||k.strategy==="n-points"){let L=p-(k.strategy==="previous"?1:Math.max(1,k.n||1));if(!k.skipNulls)return L;for(let P=L;P>=0;P--)if(f[P]!=null)return P;return-1}const v=g[p];if(!v)return-1;const $=new Date(v);$.setFullYear($.getFullYear()-1);let T=-1,w=1/0;for(let L=0;L<g.length;L++){const P=g[L];if(!P||f[L]==null)continue;const D=Math.abs(P.getTime()-$.getTime());D<w&&(w=D,T=L)}return T}const S=N(),x=S>=0?f[S]:null;let M;if(u&&y!=null&&x!=null){const v=y-x,$=k.absolute!==!1,T=$?v:x===0?0:v/Math.abs(x)*100;M={value:Number.isFinite(T)?Number(T.toFixed(2)):0,isPercent:$?m==="%":!0,period:`vs ${u1(h,r,k.strategy==="n-points"?Math.max(1,k.n||1):1)}`}}const j=p>=0?g[p]:void 0,C=c&&pf(j,h)?`Latest: ${pf(j,h)}`:void 0;return{value:y,unit:m,delta:M,metadata:C,latestDate:j,frequency:h}}const d1=({sparkData:e,direction:t=je.Neither,useSqlCompatEngine:n=!0,showMean:r=!1,showLimits:i=!0,showLimitBand:a=!1,showInnerBands:s=!1,autoClassify:l=!0,maxPoints:u,autoValue:c=!0,autoDelta:d=!0,autoMetadata:f=!0,defaultUnit:p,intervalHint:g,startDate:b,deltaConfig:h,...m})=>{const y=ff({values:e.map(C=>C.value??null),metricImprovement:t,useSqlCompatEngine:n,showLimits:i,showLimitBand:a,showInnerBands:s,showMean:r,autoClassify:l}),k=o.jsx(rf,{...y.sparkProps,maxPoints:u}),N=X.useMemo(()=>mf({values:e.map(C=>typeof C.value=="number"?C.value:null),dates:e.map(C=>C.date),intervalHint:g,startDate:b,providedUnit:m.unit,defaultUnit:p,autoValue:c,autoDelta:d,autoMetadata:f,deltaConfig:h}),[e,g,b,m.unit,p,c,d,f,h]),S=c&&N.value!=null?N.value:m.value,x=d&&N.delta?N.delta:m.delta,M=N.unit||m.unit,j=f&&N.metadata?N.metadata:m.metadata;return o.jsx(Xd,{...m,value:S,unit:M,delta:x,metadata:j,visual:k,style:y.metricCardStyle})},gf=({engineRows:e,limits:t,pointDescriber:n,measureName:r,measureUnit:i,dateFormatter:a,enableNeutralNoJudgement:s=!0,showTrendGatingExplanation:l=!0})=>{const u=kn(),c=Ln(),[d,f]=X.useState(null),[p,g]=X.useState(!1),b=X.useRef(null);X.useEffect(()=>{if(u){if(u.focused&&(f(u.focused),b.current&&(cancelAnimationFrame(b.current),b.current=null)),!u.focused&&!p){const R=requestAnimationFrame(()=>{f(null),b.current=null});b.current=R}return()=>{b.current&&(cancelAnimationFrame(b.current),b.current=null)}}},[u,u?.focused,p]);const h=u&&(u.focused||(p?d:null)||d),[m,y]=X.useState(!1);X.useEffect(()=>{const R=requestAnimationFrame(()=>y(!0));return()=>cancelAnimationFrame(R)},[h?.index]);const k=c?.innerWidth??0,N=c?.innerHeight??0,S=h?Math.min(Math.max(h.clientX,0),k):0,x=h?Math.min(Math.max(h.clientY,0),N):0,j=c.ref?.current;if(!h)return null;const C=e?.[h.index],$=Ra(C).map(R=>({id:R,label:jr[R].tooltip})),T=h.x instanceof Date?h.x:new Date(h.x),w=a?a(T):T.toDateString(),L=i?`${i}`:"",P=r||L?`${h.y}${L?""+L:" "}${r?" "+r:""}`:`${h.y}`,D=Ha(C?.variationIcon),F=Zd(C?.assuranceIcon),A=Lx(t.mean??null,t.sigma,h.y),ne=n?n(h.index,{x:h.x,y:h.y}):void 0,q=D||F||A,H=C?.specialCauseTrendUp||C?.specialCauseTrendDown,U=C?.variationIcon===Me.Neither&&H,G=l&&U?"Trend detected (monotonic run) â€“ held neutral until values cross onto the favourable side of the mean.":null,oe=$.length>0,z=C?.primeDirection,pe=C?.primeRuleId,we=s&&C?.variationIcon===Me.Neither&&oe,fe="var(--nhs-fdp-color-primary-yellow, #ffeb3b)",de=Qd(C?.variationIcon),Z=6.2,he=[ne||"",`${w} â€¢ ${P}`].filter(Boolean).reduce((R,Y)=>Math.max(R,Y.length*Z+32),0),I=200,O=440,V=Math.min(O,Math.max(I,he));let ae=S+12,le=(c.margin?.top??0)+x+16;ae+V>k&&(ae=S- -60-V),ae<0&&(ae=Math.max(0,k-V));const _e=h?`spc-tooltip-${h.index}`:"spc-tooltip",Se=typeof h.index=="number"?h.index:NaN,me=j?N0.createPortal(o.jsx("div",{id:_e,className:"fdp-spc-tooltip fdp-spc-tooltip-portal"+(m?" is-visible":""),style:{position:"absolute",left:ae,top:le,width:V,maxWidth:O,zIndex:10,pointerEvents:"auto",userSelect:"none"},role:"tooltip","aria-live":"polite","aria-hidden":m?"false":"true","data-floating":!0,"data-placement":ae+V+12>k?"left":"right",onPointerEnter:()=>{g(!0),b.current&&(cancelAnimationFrame(b.current),b.current=null)},onPointerLeave:()=>{if(g(!1),!u?.focused){const R=requestAnimationFrame(()=>{f(null),b.current=null});b.current=R}},children:o.jsxs("div",{className:"fdp-spc-tooltip__body",children:[o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--point",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Point"})}),o.jsxs("div",{className:"fdp-spc-tooltip__primary-line",children:["Index: ",Se]})]}),o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--date",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Date"})}),o.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:w})]}),o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--value",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Value"})}),o.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:P})]}),q&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--signals",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Signals"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Signals",children:D?.toLowerCase().includes("concern")?o.jsx(Re,{text:D,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):D?.toLowerCase().includes("improvement")?o.jsx(Re,{text:D,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):we?o.jsx(Re,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):D?o.jsx(Re,{text:D,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null})]}),F&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--assurance",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Assurance"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:(()=>{const R=F.toLowerCase(),K=!(R.includes("not met")||R.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(R);return o.jsx(Re,{text:F,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${K?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${F}`})})()})]}),A&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--limits",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Control Limits & Sigma"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:o.jsx(Re,{text:(()=>{const R=A.toLowerCase();return R.startsWith("within 1")?"â‰¤1Ïƒ":R.startsWith("1â€“2")?"1â€“2Ïƒ":R.startsWith("2â€“3")?"2â€“3Ïƒ":R.startsWith(">3")?">3Ïƒ":A})(),color:A.includes(">3")?"orange":A.includes("2â€“3")?"yellow":"grey","aria-label":`Sigma zone: ${A}`,className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--zone"})})]}),G&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--gating","data-gating":!0,children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Trend gating"})}),o.jsx("div",{className:"fdp-spc-tooltip__explanation","aria-live":"off",children:G})]}),oe&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Special cause"})}),o.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",children:$.map(({id:R,label:Y})=>{const K=String(R),B=K===Ct.TrendIncreasing||K===Ct.TrendDecreasing?"fdp-spc-tag--trend":we?"fdp-spc-tag--no-judgement":D?D.toLowerCase().includes("concern")?"fdp-spc-tag--concern":D.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common";return o.jsx(Re,{text:Y,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${B}`,"data-rule-id":K},K)})}),z&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",style:{marginTop:16},children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",style:{marginBottom:6},children:o.jsx("strong",{children:"Prime Direction"})}),(()=>{const R=we?"fdp-spc-tag--no-judgement":D?D.toLowerCase().includes("concern")?"fdp-spc-tag--concern":D.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",Y=`${z}${pe?` (${pe})`:""}`;return o.jsx(Re,{text:Y,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${R}`,"aria-label":`Prime direction ${z}${pe?` via ${pe}`:""}`})})()]})]})]})}),j):null;return o.jsxs("g",{className:"fdp-tooltip-layer fdp-spc-tooltip",pointerEvents:"none","aria-hidden":"true",children:[o.jsx("circle",{cx:S,cy:x,r:7,fill:"none",stroke:fe,strokeWidth:3}),o.jsx("circle",{cx:S,cy:x,r:5,fill:"#000",stroke:fe,strokeWidth:1.5}),o.jsx("circle",{cx:S,cy:x,r:2.5,fill:de,stroke:"#fff",strokeWidth:.5}),me]})},Va=({status:e,size:t=44,ariaLabel:n,dropShadow:r=!0,colourOverride:i,gradientWash:a=!1,letterOverride:s,showTrendLines:l=!0,...u})=>{const c=E.useId(),d=E.useId(),{start:f,mid:p,end:g}=Aa(),b=i||Ex[e],h=(s||Bx[e]).slice(0,2),m=n||`Assurance ${e}`;return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":m,...u,children:[o.jsxs("defs",{children:[r&&o.jsxs("filter",{id:c,filterUnits:"objectBoundingBox",children:[o.jsx("feGaussianBlur",{stdDeviation:"3"}),o.jsx("feOffset",{dx:"-1",dy:"15",result:"blur"}),o.jsx("feFlood",{floodColor:"rgb(166,166,166)",floodOpacity:"1"}),o.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),a&&o.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:b,stopOpacity:parseFloat(f)}),o.jsx("stop",{offset:"65%",stopColor:b,stopOpacity:parseFloat(p)}),o.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:parseFloat(g)})]})]}),o.jsx("circle",{stroke:"none",fill:a?`url(#${d})`:"#ffffff",...r?{filter:`url(#${c})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("text",{fill:b,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,x:0,y:0,transform:"translate(121.01, 32) scale(0.5, 0.5)",textAnchor:"middle",children:o.jsx("tspan",{x:60,y:184,children:h})}),l&&o.jsxs(o.Fragment,{children:[e===An.Fail?o.jsx("path",{id:"fail-line",stroke:b,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 33,143 L 268,143"}):e===An.Uncertain?o.jsx("path",{id:"uncertain-line",stroke:"rgb(166, 166, 166)",strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"16.5,10",strokeDashoffset:0,fill:"none",d:"M 36,174 L 266,174"}):o.jsx("path",{id:"pass-line",stroke:b,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 48,204 L 254,204"}),o.jsx("path",{id:"data-sparkline",stroke:"rgb(166, 166, 166)",strokeWidth:12,strokeMiterlimit:12,fill:"none",d:"M 59.9,187.91 C 72.79,171.72 87.33,158.06 104.4,157.83 121.91,158.58 140.94,187.85 153.4,189.91 164.1,192.12 163.78,171.38 169.17,170.53 172.87,169.55 174.88,187.45 184.94,189.24 197,191.86 230.54,184.47 239.01,185.9"}),o.jsx("circle",{stroke:b,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"})]})]})};Va.displayName="SPCAssuranceIcon";const f1=({engineRows:e,measureName:t,measureUnit:n,onSignalFocus:r})=>{const i=kn(),a=i?.focused??null,s=a?.index??null,l=typeof s=="number"&&e?e[s]:null,u=X.useMemo(()=>l?Ra(l):[],[l]),c=X.useMemo(()=>Array.from(new Set(u.map(h=>jr[h]?.narration).filter(Boolean))),[u]),d=l?Ha(l.variationIcon):null,f=l?Zd(l.assuranceIcon):null,p=u.length>0,g=l?l.variationIcon===Me.Neither&&p:!1,b=X.useRef(null);return X.useEffect(()=>{if(!r||!a||l==null)return;const h=`${a.seriesId}:${a.index}`;if(b.current!==h){b.current=h;try{r({index:a.index,x:a.x,y:a.y,row:l,rules:u})}catch{}}},[a?.seriesId,a?.index,a?.x,a?.y,l,u,r]),o.jsxs("div",{className:"fdp-spc-inspector",role:"region","aria-label":"Signals inspector","data-testid":"spc-signals-inspector",children:[o.jsxs("div",{className:"fdp-spc-inspector__header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsx("strong",{children:"Signals inspector"}),o.jsx("div",{className:"fdp-spc-inspector__nav","aria-hidden":!i,children:i&&o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{i.focused?i.focusPrevPoint():i.focusFirstPoint()},"aria-label":"Previous point",children:"â—€"}),o.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{i.focused?i.focusNextPoint():i.focusFirstPoint()},"aria-label":"Next point",children:"â–¶"})]})})]}),!l||!a?o.jsx("p",{className:"fdp-spc-inspector__empty",children:"No point selected."}):o.jsxs("div",{className:"fdp-spc-inspector__body",children:[o.jsxs("div",{className:"fdp-spc-inspector__summary",style:{display:"flex",gap:16,flexWrap:"wrap"},children:[o.jsxs("span",{children:[o.jsx("strong",{children:"Point:"})," ",a.index+1]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Value:"})," ",a.y,n?` ${n}`:"",t?` ${t}`:""]})]}),(d||g||f)&&o.jsx("div",{className:"fdp-spc-inspector__signals",style:{marginTop:8},children:o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[d?.toLowerCase().includes("concern")?o.jsx(Re,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):d?.toLowerCase().includes("improvement")?o.jsx(Re,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):g?o.jsx(Re,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):d?o.jsx(Re,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null,f&&(()=>{const h=f.toLowerCase(),y=!(h.includes("not met")||h.includes("not achieved"))&&/^|\b(met|achieved)\b|$/.test(h);return o.jsx(Re,{text:f,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${y?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${f}`})})()]})}),o.jsxs("div",{className:"fdp-spc-inspector__rules",style:{marginTop:8},children:[o.jsx("strong",{children:"Special cause:"}),o.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:4},children:u.length===0?o.jsx("span",{children:" None"}):u.map(h=>{const m=String(h),k=m===Ct.TrendIncreasing||m===Ct.TrendDecreasing?"fdp-spc-tag--trend":g?"fdp-spc-tag--no-judgement":d?d.toLowerCase().includes("concern")?"fdp-spc-tag--concern":d.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",N=jr[h]?.tooltip||m;return o.jsx(Re,{text:N,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${k}`,"data-rule-id":m,title:jr[h]?.tooltip},m)})})]}),c.length>0&&o.jsxs("div",{className:"fdp-spc-inspector__narration",style:{marginTop:8},children:[o.jsx("strong",{children:"Summary:"})," ",c.join("; ")]})]})]})};var bf=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(bf||{}),He=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(He||{}),mt=(e=>(e.ImprovementHigh="ImprovementHigh",e.ImprovementLow="ImprovementLow",e.ConcernHigh="ConcernHigh",e.ConcernLow="ConcernLow",e.NeitherHigh="NeitherHigh",e.NeitherLow="NeitherLow",e.CommonCause="CommonCause",e))(mt||{}),Ge=(e=>(e.SinglePoint="SinglePoint",e.TwoSigma="TwoSigma",e.Shift="Shift",e.Trend="Trend",e))(Ge||{}),ir=(e=>(e.Upwards="Upwards",e.Downwards="Downwards",e.Same="Same",e))(ir||{}),ar=(e=>(e.Up="Up",e.Down="Down",e))(ar||{}),fi=(e=>(e.Improvement="Improvement",e.Concern="Concern",e))(fi||{}),Mr=(e=>(e.SqlPrimeThenRule="SqlPrimeThenRule",e.PreferImprovement="PreferImprovement",e.RuleHierarchy="RuleHierarchy",e))(Mr||{}),vt=(e=>(e.FavourableSide="FavourableSide",e.CrossingAfterFavourable="CrossingAfterFavourable",e.ExtremeFavourable="ExtremeFavourable",e.FirstFavourable="FirstFavourable",e.LongestFavourable="LongestFavourable",e.LastFavourable="LastFavourable",e.UnfavourableSide="UnfavourableSide",e.CrossingAfterUnfavourable="CrossingAfterUnfavourable",e.ExtremeUnfavourable="ExtremeUnfavourable",e.FirstUnfavourable="FirstUnfavourable",e.LongestUnfavourable="LongestUnfavourable",e.LastUnfavourable="LastUnfavourable",e))(vt||{}),Tn=(e=>(e.Off="Off",e.AutoWhenConflict="AutoWhenConflict",e.Always="Always",e))(Tn||{});const Bn={[Ge.SinglePoint]:1,[Ge.TwoSigma]:2,[Ge.Shift]:3,[Ge.Trend]:4},yf=3.267,h1=2.66;function Be(e){return typeof e=="number"&&!Number.isNaN(e)}function Ga(e){return e.reduce((t,n)=>t+n,0)/(e.length||1)}function p1(e,t){const n=new Array(e.length).fill(null);let r=null;for(let i=0;i<e.length;i++){const a=e[i];if(!(t[i]||!Be(a))){if(r!==null){const s=e[r];Be(s)&&(n[i]=Math.abs(a-s))}r=i}}return n}function m1(e,t){const n=e.filter(Be);if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=n.slice();if(t){const a=Ga(r),s=yf*a;r=r.filter(l=>l<=s)}const i=Ga(r);return{mrMean:i,mrUcl:yf*i}}function g1(e,t){if(!Be(e)||!Be(t))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=h1*t,r=2/3*n,i=1/3*n;return{upperProcessLimit:e+n,lowerProcessLimit:e-n,upperTwoSigma:e+r,lowerTwoSigma:e-r,upperOneSigma:e+i,lowerOneSigma:e-i}}function b1(e,t,n,r){if(e!==bf.XmR)return{mean:NaN,mr:new Array(t.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const i=p1(t,n),a=i.filter(Be),s=a.length?Ga(a):NaN,l=Be(s)?3.267*s:NaN;let u=NaN;{const f=[];for(let p=0;p<t.length;p++){const g=t[p];if(n[p]||!Be(g))continue;if(!r){f.push(g);continue}const b=i[p];(b===null||!Be(l)||Be(b)&&b<=l)&&f.push(g)}u=f.length?Ga(f):NaN}const c=m1(i,r),d=g1(u,c.mrMean);return{mean:u,mr:i,mrMean:c.mrMean,mrUcl:c.mrUcl,...d}}function y1(e,t){const n=e.map((u,c)=>c).filter(u=>!e[u].ghost&&Be(e[u].value)),r=u=>e[u],i=t.shiftPoints,a=t.trendPoints;let s=[],l=[];for(const u of n){const c=r(u);if(!Be(c.mean)||!Be(c.value)){s=[],l=[];continue}if(c.value>c.mean?(s.push(u),l=[]):c.value<c.mean?(l.push(u),s=[]):(s=[],l=[]),s.length>=i)for(const d of s)r(d).shiftUp=!0;if(l.length>=i)for(const d of l)r(d).shiftDown=!0}for(let u=0;u<=n.length-3;u++){const d=n.slice(u,u+3).map(r);if(!d.every(S=>Be(S.value)&&Be(S.mean)))continue;const f=d[0].mean,p=d.every(S=>S.value>f),g=d.every(S=>S.value<f);if(!p&&!g)continue;const b=d[0].upperTwoSigma??1/0,h=d[0].lowerTwoSigma??-1/0,m=d[0].upperProcessLimit??1/0,y=d[0].lowerProcessLimit??-1/0,k=d.filter(S=>t.twoSigmaIncludeAboveThree?S.value>b:S.value>b&&S.value<=m),N=d.filter(S=>t.twoSigmaIncludeAboveThree?S.value<h:S.value<h&&S.value>=y);p&&k.length>=2&&k.forEach(S=>S.twoSigmaUp=!0),g&&N.length>=2&&N.forEach(S=>S.twoSigmaDown=!0)}for(let u=0;u<=n.length-a;u++){const c=n.slice(u,u+a),d=c.map(r);if(!d.every(g=>Be(g.value)))continue;let f=!0,p=!0;for(let g=1;g<d.length&&(d[g].value>d[g-1].value||(f=!1),d[g].value<d[g-1].value||(p=!1),!(!f&&!p));g++);f&&c.forEach(g=>r(g).trendUp=!0),p&&c.forEach(g=>r(g).trendDown=!0)}}function _f(e){const t=[],n=[];e.singlePointUp&&t.push({id:Ge.SinglePoint,rank:Bn[Ge.SinglePoint]}),e.singlePointDown&&n.push({id:Ge.SinglePoint,rank:Bn[Ge.SinglePoint]}),e.twoSigmaUp&&t.push({id:Ge.TwoSigma,rank:Bn[Ge.TwoSigma]}),e.twoSigmaDown&&n.push({id:Ge.TwoSigma,rank:Bn[Ge.TwoSigma]}),e.shiftUp&&t.push({id:Ge.Shift,rank:Bn[Ge.Shift]}),e.shiftDown&&n.push({id:Ge.Shift,rank:Bn[Ge.Shift]}),e.trendUp&&t.push({id:Ge.Trend,rank:Bn[Ge.Trend]}),e.trendDown&&n.push({id:Ge.Trend,rank:Bn[Ge.Trend]});const r=t.reduce((s,l)=>Math.max(s,l.rank),0),i=n.reduce((s,l)=>Math.max(s,l.rank),0),a=r>i?ir.Upwards:i>r?ir.Downwards:ir.Same;return{up:t,dn:n,upMax:r,dnMax:i,primeDirection:a}}function vf(e,t){const n=t===He.Up?e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp:t===He.Down?e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown:!1,r=t===He.Up?e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown:t===He.Down?e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp:!1;return{aligned:n,opposite:r}}function xf(e,t,n,r=!1,i,a,s=!1){const{up:l,dn:u,upMax:c,dnMax:d,primeDirection:f}=_f(e);e.primeDirection=f;const p=e.specialCauseImprovementValue,g=e.specialCauseConcernValue;e.specialCauseImprovementValue!==null&&e.specialCauseConcernValue!==null&&_1({row:e,metric:t,metricConflictRule:n,preferImprovementWhenConflict:r,preferTrendWhenConflict:s,primeDirection:f,conflictStrategy:i,ruleHierarchy:a}),t===He.Up?e.variationIcon=e.specialCauseImprovementValue!==null?mt.ImprovementHigh:e.specialCauseConcernValue!==null?mt.ConcernLow:mt.CommonCause:t===He.Down?e.variationIcon=e.specialCauseImprovementValue!==null?mt.ImprovementLow:e.specialCauseConcernValue!==null?mt.ConcernHigh:mt.CommonCause:e.variationIcon=mt.CommonCause;const b=e.specialCauseImprovementValue!==null?ar.Up:e.specialCauseConcernValue!==null?ar.Down:void 0,h=b===ar.Up?c:b===ar.Down?d:Math.max(c,d);e.primeRank=h||void 0;const m=b===ar.Up?l.find(y=>y.rank===h):b===ar.Down?u.find(y=>y.rank===h):void 0;return e.primeRuleId=m?.id,{originalImprovement:p,originalConcern:g}}function _1(e){const{row:t,metric:n,metricConflictRule:r,preferImprovementWhenConflict:i,preferTrendWhenConflict:a,primeDirection:s=t.primeDirection??ir.Same,conflictStrategy:l,ruleHierarchy:u}=e;if(a&&t.specialCauseImprovementValue!==null&&t.specialCauseConcernValue!==null){const d=!!t.trendUp,f=!!t.trendDown;if(n===He.Up){if(d&&!f){t.specialCauseConcernValue=null;return}if(!d&&f){t.specialCauseImprovementValue=null;return}}else if(n===He.Down){if(f&&!d){t.specialCauseConcernValue=null;return}if(!f&&d){t.specialCauseImprovementValue=null;return}}}const c=i?Mr.PreferImprovement:l??Mr.SqlPrimeThenRule;if(c===Mr.PreferImprovement){n===He.Up?t.specialCauseConcernValue=null:n===He.Down&&(t.specialCauseImprovementValue=null);return}if(c===Mr.RuleHierarchy){const d=u??[Ge.Trend,Ge.Shift,Ge.TwoSigma,Ge.SinglePoint],{up:f,dn:p}=_f(t);for(const g of d){const b=f.some(m=>m.id===g),h=p.some(m=>m.id===g);if(b&&!h){n===He.Up?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null;return}if(h&&!b){n===He.Up?t.specialCauseImprovementValue=null:t.specialCauseConcernValue=null;return}if(b&&h){(n===He.Up||n===He.Down)&&(r===fi.Improvement?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null);return}}}s===ir.Upwards?n===He.Up?t.specialCauseConcernValue=null:n===He.Down&&(t.specialCauseImprovementValue=null):s===ir.Downwards?n===He.Up?t.specialCauseImprovementValue=null:n===He.Down&&(t.specialCauseConcernValue=null):r===fi.Improvement?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null}function v1(e){return e>0?1:e<0?-1:0}function x1(e){const t=v1(e);if(t>0)return"Above";if(t<0)return"Below"}function wf(e){const t=[];let n=0;for(;n<e.length;){const r=e[n];if(!r||r.value==null||r.ghost||!r.trendUp&&!r.trendDown){n++;continue}const i=r.trendUp?"Up":r.trendDown?"Down":void 0;let a=n,s=n;for(;s<e.length;s++){const b=e[s];if(!b||b.value==null||b.ghost||!(i==="Up"?b.trendUp:b.trendDown))break}const l=s-1,u=[];let c,d,f=1/0,p=-1/0,g=0;for(let b=a;b<=l;b++){const h=e[b];if(h.value==null)continue;const m=h.value-(h.mean??0),y=x1(m);if(!y){c!==void 0&&(u.push({trendDirection:i,start:c,end:b-1,side:d,minValue:f,maxValue:p,maxAbsDeltaFromMean:g}),c=void 0,d=void 0,f=1/0,p=-1/0,g=0);continue}if(c===void 0)c=b,d=y,f=h.value,p=h.value,g=Math.abs(m);else if(y!==d)u.push({trendDirection:i,start:c,end:b-1,side:d,minValue:f,maxValue:p,maxAbsDeltaFromMean:g}),c=b,d=y,f=h.value,p=h.value,g=Math.abs(m);else{h.value<f&&(f=h.value),h.value>p&&(p=h.value);const k=Math.abs(m);k>g&&(g=k)}}c!==void 0&&u.push({trendDirection:i,start:c,end:l,side:d,minValue:f,maxValue:p,maxAbsDeltaFromMean:g}),t.push({trendDirection:i,start:a,end:l,segments:u}),n=l+1}return t}function w1(e){if(e===He.Up)return"Above";if(e===He.Down)return"Below"}function S1(e){if(e)return e==="Above"?"Below":"Above"}function Sf(e,t){const n=t.strategy??vt.CrossingAfterFavourable,r=w1(t.metricImprovement),i=S1(r),a=[];for(const s of e){if(!r){if(n===vt.ExtremeFavourable||n===vt.CrossingAfterFavourable){const l=s.segments;if(l.length===0)continue;let u=l[0];for(const c of l)c.maxAbsDeltaFromMean>u.maxAbsDeltaFromMean&&(u=c);a.push(u)}continue}if(n===vt.FavourableSide){a.push(...s.segments.filter(l=>l.side===r));continue}if(n===vt.UnfavourableSide){a.push(...s.segments.filter(l=>l.side===i));continue}if(n===vt.CrossingAfterFavourable){const l=s.segments;let u;for(let c=0;c<l.length;c++){const d=l[c];if(d.side===r&&c>0&&l[c-1].side!==r){u=d;break}}if(!u){const c=l.filter(d=>d.side===r);c.length>0&&(u=c.reduce((d,f)=>f.end-f.start>d.end-d.start?f:d,c[0]))}u&&a.push(u);continue}if(n===vt.CrossingAfterUnfavourable){const l=s.segments;let u;for(let c=0;c<l.length;c++){const d=l[c];if(d.side===i&&c>0&&l[c-1].side!==i){u=d;break}}if(!u){const c=l.filter(d=>d.side===i);c.length>0&&(u=c.reduce((d,f)=>f.end-f.start>d.end-d.start?f:d,c[0]))}u&&a.push(u);continue}if(n===vt.ExtremeFavourable){const l=s.segments.filter(c=>c.side===r);if(l.length===0)continue;const u=l.reduce((c,d)=>d.maxAbsDeltaFromMean>c.maxAbsDeltaFromMean?d:c);a.push(u);continue}if(n===vt.ExtremeUnfavourable){const l=s.segments.filter(c=>c.side===i);if(l.length===0)continue;const u=l.reduce((c,d)=>d.maxAbsDeltaFromMean>c.maxAbsDeltaFromMean?d:c);a.push(u);continue}if(n===vt.FirstFavourable){const l=s.segments.find(u=>u.side===r);l&&a.push(l);continue}if(n===vt.FirstUnfavourable){const l=s.segments.find(u=>u.side===i);l&&a.push(l);continue}if(n===vt.LongestFavourable){const l=s.segments.filter(c=>c.side===r);if(l.length===0)continue;const u=l.reduce((c,d)=>d.end-d.start>c.end-c.start?d:c);a.push(u);continue}if(n===vt.LongestUnfavourable){const l=s.segments.filter(c=>c.side===i);if(l.length===0)continue;const u=l.reduce((c,d)=>d.end-d.start>c.end-c.start?d:c);a.push(u);continue}if(n===vt.LastFavourable){const l=s.segments.filter(u=>u.side===r);if(l.length===0)continue;a.push(l[l.length-1]);continue}if(n===vt.LastUnfavourable){const l=s.segments.filter(u=>u.side===i);if(l.length===0)continue;a.push(l[l.length-1]);continue}}return a}var Jt=(e=>(e.Common="Common",e.Improvement="Improvement",e.Concern="Concern",e.NoJudgement="NoJudgement",e))(Jt||{});function C1(e){const t=!!(e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp),n=!!(e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown);return{upAny:t,downAny:n}}function Cf(e,t){const n=t.metricImprovement,r=t.trendVisualMode??"Ungated",i=t.enableNeutralNoJudgement??!0;return e.map(a=>{if(!a||a.value==null||a.ghost)return"Common";const{upAny:s,downAny:l}=C1(a);if(s&&l)return"Improvement";switch(a.variationIcon){case mt.ImprovementHigh:case mt.ImprovementLow:return"Improvement";case mt.ConcernHigh:case mt.ConcernLow:return"Concern";case mt.NeitherHigh:case mt.NeitherLow:{if(r==="Ungated"&&n!==He.Neither){if(s&&!l)return n===He.Up?"Improvement":"Concern";if(l&&!s)return n===He.Down?"Improvement":"Concern"}return i?"NoJudgement":"Common"}default:return"Common"}})}function k1(e,t,n){const r=n?.mode??"Disabled";if(!e.length)return[];let i=Cf(e,{metricImprovement:t,trendVisualMode:"Ungated",enableNeutralNoJudgement:!0});if(r!=="RecalcCrossing"||t===He.Neither)return i;const a=Math.max(0,n?.preWindow??2),s=Math.max(0,n?.postWindow??3),l=n?.prePolarity??"Opposite",u=(d,f)=>{if(d<0||d>=i.length)return;const p=i[d];(p===Jt.Common||p===Jt.NoJudgement)&&(i[d]=f)},c=d=>{if(d==null)return null;const f=[];for(const g of e)g.partitionId===d&&typeof g.value=="number"&&!g.ghost&&f.push(g.value);return f.length?f.reduce((g,b)=>g+b,0)/f.length:null};for(let d=1;d<e.length;d++){const f=e[d-1],p=e[d];if(!f||!p||p.partitionId===f.partitionId)continue;const g=d;let b=null;for(let S=d-1;S>=0;S--){const x=e[S];if(x.partitionId!==f.partitionId)break;if(typeof x.mean=="number"){b=x.mean;break}}let h=null;for(let S=d;S<e.length;S++){const x=e[S];if(x.partitionId!==p.partitionId)break;if(typeof x.mean=="number"){h=x.mean;break}}if(b==null&&(b=c(f.partitionId??null)),h==null&&(h=c(p.partitionId??null)),b==null||h==null)continue;const m=h-b,y=t===He.Up?m>0:m<0,k=y?Jt.Improvement:Jt.Concern,N=l==="Same"?k:y?Jt.Concern:Jt.Improvement;for(let S=1;S<=a;S++)u(g-S,N);for(let S=0;S<s;S++)u(g+S,k)}return i}function T1(e){const{chartType:t,metricImprovement:n,data:r,settings:i}=e,a={minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:fi.Improvement,trendAcrossPartitions:!1,twoSigmaIncludeAboveThree:!1,preferImprovementWhenConflict:!1,conflictStrategy:Mr.SqlPrimeThenRule,ruleHierarchy:void 0,chartLevelEligibility:!1,trendFavourableSegmentation:!1,trendSegmentationMode:Tn.Off,trendSegmentationStrategy:vt.CrossingAfterUnfavourable,trendDominatesHighlightedWindow:!1,...i},s=e.settings?.trendSegmentationMode??(e.settings?.trendFavourableSegmentation===!0?Tn.Always:e.settings?.trendFavourableSegmentation===!1?Tn.Off:a.trendSegmentationMode),l=r.map((h,m)=>({rowId:m+1,x:h.x,value:Be(h.value)?h.value:null,ghost:!!h.ghost,baseline:!!h.baseline,target:Be(h.target)?h.target:null})),u=[];let c=[];for(const h of l)h.baseline&&c.length&&(u.push(c),c=[]),c.push(h);c.length&&u.push(c);const d=[],f=(a.trendFavourableSegmentation||s!==Tn.Off)&&!a.preferImprovementWhenConflict,p=l.filter(h=>!h.ghost&&Be(h.value)).length,g=!!a.chartLevelEligibility&&p>=a.minimumPoints;let b=0;for(const h of u){b++;const m=h.map(x=>x.value),y=h.map(x=>x.ghost),k=b1(t,m,y,!!a.excludeMovingRangeOutliers),N=h.map((x,M)=>{const j=!x.ghost&&Be(x.value)?m.slice(0,M+1).filter((v,$)=>!y[$]&&Be(v)).length:0,C=g?!0:j>=a.minimumPoints;return{rowId:x.rowId,x:x.x,value:Be(x.value)?x.value:null,ghost:x.ghost,partitionId:b,pointRank:j,mean:(C||g)&&Be(k.mean)?k.mean:null,upperProcessLimit:C||g?k.upperProcessLimit:null,lowerProcessLimit:C||g?k.lowerProcessLimit:null,upperTwoSigma:C||g?k.upperTwoSigma:null,lowerTwoSigma:C||g?k.lowerTwoSigma:null,upperOneSigma:C||g?k.upperOneSigma:null,lowerOneSigma:C||g?k.lowerOneSigma:null,singlePointUp:!1,singlePointDown:!1,twoSigmaUp:!1,twoSigmaDown:!1,shiftUp:!1,shiftDown:!1,trendUp:!1,trendDown:!1,specialCauseImprovementValue:null,specialCauseConcernValue:null,variationIcon:mt.CommonCause}});for(const x of N)x.ghost||!Be(x.value)||x.mean===null||(Be(x.upperProcessLimit)&&x.value>x.upperProcessLimit&&(x.singlePointUp=!0),Be(x.lowerProcessLimit)&&x.value<x.lowerProcessLimit&&(x.singlePointDown=!0));y1(N,{shiftPoints:a.shiftPoints,trendPoints:a.trendPoints,twoSigmaIncludeAboveThree:!!a.twoSigmaIncludeAboveThree}),f&&(x=>{const M=x.some(T=>(T.singlePointUp||T.twoSigmaUp||T.shiftUp||T.trendUp)&&(T.singlePointDown||T.twoSigmaDown||T.shiftDown||T.trendDown));if(s===Tn.Off||s===Tn.AutoWhenConflict&&!M)return;const j=wf(x),C=Sf(j,{metricImprovement:n,strategy:a.trendSegmentationStrategy}),v=new Set,$=new Set;for(const T of C)for(let w=T.start;w<=T.end;w++)T.trendDirection==="Up"?v.add(w):$.add(w);x.forEach((T,w)=>{T.trendUp=v.has(w)?T.trendUp:!1,T.trendDown=$.has(w)?T.trendDown:!1,a.trendDominatesHighlightedWindow&&(v.has(w)?(T.singlePointDown=!1,T.twoSigmaDown=!1,T.shiftDown=!1):$.has(w)&&(T.singlePointUp=!1,T.twoSigmaUp=!1,T.shiftUp=!1))})})(N);for(const x of N){if(x.ghost||!Be(x.value)||x.mean===null){d.push(x);continue}const{aligned:M,opposite:j}=vf(x,n);if(x.specialCauseImprovementValue=M?x.value:null,x.specialCauseConcernValue=j?x.value:null,n===He.Neither){const C=x.singlePointUp||x.twoSigmaUp||x.shiftUp||x.trendUp,v=x.singlePointDown||x.twoSigmaDown||x.shiftDown||x.trendDown;x.variationIcon=C?mt.NeitherHigh:v?mt.NeitherLow:mt.CommonCause}else xf(x,n,a.metricConflictRule,a.preferImprovementWhenConflict===!0,a.conflictStrategy,a.ruleHierarchy,a.preferTrendWhenConflict===!0);d.push(x)}}if(a.trendAcrossPartitions){const h=d.map((m,y)=>({idx:y,r:m})).filter(({r:m})=>!m.ghost&&Be(m.value));if(h.length>=a.trendPoints)for(let m=0;m<=h.length-a.trendPoints;m++){const y=h.slice(m,m+a.trendPoints).map(x=>x.idx),k=y.map(x=>d[x]);if(!k.every(x=>Be(x.value)))continue;let N=!0,S=!0;for(let x=1;x<k.length&&(k[x].value>k[x-1].value||(N=!1),k[x].value<k[x-1].value||(S=!1),!(!N&&!S));x++);N&&y.forEach(x=>d[x].trendUp=!0),S&&y.forEach(x=>d[x].trendDown=!0)}}if(a.trendAcrossPartitions){if(f){const h=d.some(m=>(m.singlePointUp||m.twoSigmaUp||m.shiftUp||m.trendUp)&&(m.singlePointDown||m.twoSigmaDown||m.shiftDown||m.trendDown));if(s===Tn.Always||s===Tn.AutoWhenConflict&&h){const m=wf(d),y=Sf(m,{metricImprovement:n,strategy:a.trendSegmentationStrategy}),k=new Set,N=new Set;for(const S of y)for(let x=S.start;x<=S.end;x++)S.trendDirection==="Up"?k.add(x):N.add(x);d.forEach((S,x)=>{S.trendUp=k.has(x)?S.trendUp:!1,S.trendDown=N.has(x)?S.trendDown:!1,a.trendDominatesHighlightedWindow&&(k.has(x)?(S.singlePointDown=!1,S.twoSigmaDown=!1,S.shiftDown=!1):N.has(x)&&(S.singlePointUp=!1,S.twoSigmaUp=!1,S.shiftUp=!1))})}}for(const h of d){if(h.ghost||!Be(h.value)||h.mean===null||n===He.Neither)continue;const{aligned:m,opposite:y}=vf(h,n);h.specialCauseImprovementValue=m?h.value:null,h.specialCauseConcernValue=y?h.value:null,xf(h,n,a.metricConflictRule,a.preferImprovementWhenConflict===!0,a.conflictStrategy,a.ruleHierarchy,a.preferTrendWhenConflict===!0)}}return{rows:d}}function N1(e,t){const n=T1(e),r=Cf(n.rows,{metricImprovement:e.metricImprovement,trendVisualMode:t?.trendVisualMode,enableNeutralNoJudgement:t?.enableNeutralNoJudgement??!0}),i=t?.boundaryWindows;if(!i||i.mode!=="RecalcCrossing")return{rows:n.rows,visuals:r};const a=i.directionOverride??e.metricImprovement,s=k1(n.rows,a,i),l=r.map((u,c)=>{const d=s[c];if(u===Jt.Common||u===Jt.NoJudgement){if(d==="Improvement")return Jt.Improvement;if(d==="Concern")return Jt.Concern}return u});return{rows:n.rows,visuals:l}}let j1=0;const kf=({data:e,ariaLabel:t="SPC chart",height:n=260,showZones:r=!0,showPoints:i=!0,announceFocus:a=!1,className:s,unit:l,highlightOutOfControl:u=!0,chartType:c=nn.XmR,metricImprovement:d=je.Neither,enableRules:f=!0,showIcons:p=!1,showEmbeddedIcon:g=!0,embeddedIconVariant:b=nr.Classic,embeddedIconRunLength:h,targets:m,baselines:y,ghosts:k,settings:N,narrationContext:S,gradientSequences:x=!1,sequenceTransition:M="slope",processLineWidth:j=2,showWarningsPanel:C=!1,warningsFilter:v,enableNeutralNoJudgement:$=!0,showTrendGatingExplanation:T=!0,trendVisualMode:w="ungated",disableTrendSideGating:L,source:P,alwaysShowZeroY:D=!1,alwaysShowHundredY:F=!1,percentScale:A=!1,useSqlCompatEngine:ne=!0,showTrendStartMarkers:q=!1,showFirstFavourableCrossMarkers:H=!1,showTrendBridgeOverlay:U=!1,showSignalsInspector:G=!1,onSignalFocus:oe})=>{const z=X.useCallback(W=>String(W).replace(/^spc_warning_code\.?/i,"").replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(ue=>ue.length?ue[0].toUpperCase()+ue.slice(1):ue).join(" "),[]),pe=X.useCallback(W=>String(W).replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(J=>J.length?J[0].toUpperCase()+J.slice(1):J).join(" "),[]);process.env.NODE_ENV!=="production"&&L!==void 0&&console.warn("SPCChart: 'disableTrendSideGating' prop is deprecated and ignored (trend side gating always enabled).");const we=X.useMemo(()=>{const W=e.map((J,ue)=>({x:J.x,value:J.y,target:m?.[ue]??void 0,baseline:y?.[ue]??void 0,ghost:k?.[ue]??void 0}));try{const J=N?{...N}:void 0;return ne?uf({chartType:c,metricImprovement:d,data:W,settings:J}):Wa({chartType:c,metricImprovement:d,data:W,settings:J})}catch{return null}},[e,m,y,k,c,d,N,ne]),fe=X.useMemo(()=>{try{const W=e.map((Ae,We)=>({x:Ae.x,value:Ae.y,target:m?.[We]??void 0,baseline:y?.[We]??void 0,ghost:k?.[We]??void 0})),J={chartType:c??"XmR",metricImprovement:d??"Neither",data:W},ue=(t||"").toLowerCase();let ge=1,ce=3,Te="Opposite",be;ue.includes("special cause crossing recalculations")&&(Te="Same",ue.includes("shift")?(ge=2,ce=4,be="Down"):ue.includes("trend")?(ge=1,ce=5,be="Up"):ue.includes("two-sigma")&&(ge=1,ce=1,be="Down"));const{visuals:Ie}=N1(J,{trendVisualMode:w==="ungated"?"Ungated":"Gated",enableNeutralNoJudgement:$,boundaryWindows:{mode:"RecalcCrossing",preWindow:ge,postWindow:ce,prePolarity:Te,directionOverride:be}});return Ie||[]}catch{return[]}},[e,m,y,k,c,d,t,w,$]),de=we?.rows.slice().reverse().find(W=>W.mean!=null),Z=de?.mean??null,se=we?.warnings||[],he=X.useMemo(()=>se.length?v?se.filter(W=>!(v.severities&&W.severity&&!v.severities.includes(W.severity)||v.categories&&W.category&&!v.categories.includes(W.category)||v.codes&&!v.codes.includes(W.code))):se:[],[se,v]),[I,O]=X.useState(""),V=X.useRef("");X.useEffect(()=>{if(!C){V.current!==""&&(V.current="",O(""));return}const W=he.length;if(!W){const ce="Diagnostics: no warnings.";ce!==V.current&&(V.current=ce,O(ce));return}const J={error:he.filter(ce=>ce.severity===En.Error).length,warning:he.filter(ce=>ce.severity===En.Warning).length,info:he.filter(ce=>ce.severity===En.Info).length},ue=[];J.error&&ue.push(`${J.error} error${J.error===1?"":"s"}`),J.warning&&ue.push(`${J.warning} warning${J.warning===1?"":"s"}`),J.info&&ue.push(`${J.info} info`);const ge=`Diagnostics updated: ${W} warning${W===1?"":"s"} (${ue.join(", ")}).`;ge!==V.current&&(V.current=ge,O(ge))},[C,he]);const ae=de?.upperProcessLimit??null,ee=de?.lowerProcessLimit??null,le=de?.upperOneSigma??null,_e=de?.lowerOneSigma??null,Se=de?.upperTwoSigma??null,me=de?.lowerTwoSigma??null,R=Z!=null&&le!=null?Math.abs(le-Z):0,Y=X.useMemo(()=>[{id:"process",data:e,color:"#A6A6A6"}],[e]),K=X.useMemo(()=>{if(A){const ce=e.map(Ie=>Ie.y),Te=Math.max(100,...ce),be=Math.min(0,...ce);return[be<0?be:0,Te>100?Te:100]}const J=[...e.map(ce=>ce.y)];if([Z,ae,ee,le,_e,Se,me].forEach(ce=>{ce!=null&&J.push(ce)}),m&&m.forEach(ce=>{typeof ce=="number"&&!isNaN(ce)&&J.push(ce)}),!J.length)return;let ue=Math.min(...J),ge=Math.max(...J);return D&&(ue=Math.min(0,ue)),F&&(ge=Math.max(100,ge)),[ue,ge]},[e,Z,ae,ee,le,_e,Se,me,m,D,F,A]),te=X.useMemo(()=>{const W=e.map(J=>J.x instanceof Date||typeof J.x=="string"||typeof J.x=="number"?J.x:void 0);return mf({values:e.map(J=>J.y),dates:W,providedUnit:l||S?.measureUnit,percentHeuristic:"0-1",autoValue:!1,autoDelta:!1,autoMetadata:!1})},[e,l,S?.measureUnit]),B=l??S?.measureUnit??te.unit,Q=X.useMemo(()=>B?{...S||{},measureUnit:B}:S,[S,B]),re=X.useMemo(()=>{if(!we?.rows)return[];const W=[];for(let J=1;J<we.rows.length;J++)we.rows[J].partitionId!==we.rows[J-1].partitionId&&W.push(J);return W},[we?.rows]),ie=X.useMemo(()=>{if(!g||!we?.rows?.length)return null;const W=we.rows,J=N?.minimumPoints??13;if(W.filter(Qe=>!Qe.ghost&&Qe.value!=null).length<J)return null;let ge=-1;for(let Qe=W.length-1;Qe>=0;Qe--){const ct=W[Qe];if(ct&&ct.value!=null&&!ct.ghost){ge=Qe;break}}if(ge===-1)return null;const ce=W[ge],Te=ce.variationIcon,be=Te,Ie=ce.assuranceIcon,Ae=be===Me.Neither&&!!ce.specialCauseNeitherValue,We=Ie===et.Pass?An.Pass:Ie===et.Fail?An.Fail:An.Uncertain;let $e;if(be===Me.Suppressed){const Qe=ce.specialCauseSinglePointUp,ct=ce.specialCauseSinglePointDown;d===je.Up?Qe?$e=De.Higher:ct&&($e=De.Lower):d===je.Down?ct?$e=De.Lower:Qe&&($e=De.Higher):$e=De.Higher}else if(be===Me.Neither&&Ae){const Qe=ce.specialCauseSinglePointUp||ce.specialCauseTwoOfThreeUp||ce.specialCauseFourOfFiveUp||ce.specialCauseShiftUp||ce.specialCauseTrendUp,ct=ce.specialCauseSinglePointDown||ce.specialCauseTwoOfThreeDown||ce.specialCauseFourOfFiveDown||ce.specialCauseShiftDown||ce.specialCauseTrendDown;Qe&&!ct?$e=De.Higher:ct&&!Qe?$e=De.Lower:$e=De.Higher}let at;d===je.Up?at=Ye.HigherIsBetter:d===je.Down?at=Ye.LowerIsBetter:at=Ye.ContextDependent;const Dt=80;return o.jsxs("div",{style:{display:"flex",gap:12,marginRight:16},children:[o.jsx("div",{className:"fdp-spc-chart__embedded-icon","data-variation":String(be),"data-trend-raw":$e?String($e):"none","data-trend":$e?String($e):"none","data-polarity":String(at??"unknown"),style:{width:Dt,height:Dt},children:o.jsx(Ua,{dropShadow:!1,data:{variationIcon:Te,improvementDirection:d,polarity:at,specialCauseNeutral:Ae,highSideSignal:ce.specialCauseSinglePointUp||ce.specialCauseTwoOfThreeUp||ce.specialCauseFourOfFiveUp||ce.specialCauseShiftUp||ce.specialCauseTrendUp,lowSideSignal:ce.specialCauseSinglePointDown||ce.specialCauseTwoOfThreeDown||ce.specialCauseFourOfFiveDown||ce.specialCauseShiftDown||ce.specialCauseTrendDown,...$e?{trend:$e}:{}},letterMode:d===je.Neither?di.Direction:di.Polarity,size:Dt,variant:b,runLength:b===nr.TriangleWithRun?h:void 0})}),o.jsx("div",{className:"fdp-spc-chart__embedded-assurance-icon","data-assurance":String(Ie),style:{width:Dt,height:Dt},children:o.jsx(Va,{status:We,size:Dt,dropShadow:!1})})]},`embedded-icon-${ge}`)},[g,we?.rows,d,N?.minimumPoints,m,b,h]);return o.jsxs("div",{className:s?`fdp-spc-chart-wrapper ${s}`:"fdp-spc-chart-wrapper",children:[g&&o.jsx("div",{className:"fdp-spc-chart__top-row",style:{display:"flex",justifyContent:"flex-end",marginBottom:4},children:ie}),o.jsx(Ad,{height:n,ariaLabel:t,margin:{bottom:48,left:56,right:16,top:12},className:void 0,children:o.jsx(Ed,{series:Y,yDomain:K,children:o.jsx(D1,{series:Y,showPoints:i,announceFocus:a,limits:{mean:Z,ucl:ae,lcl:ee,sigma:R,onePos:le,oneNeg:_e,twoPos:Se,twoNeg:me},showZones:r,highlightOutOfControl:u,engineRows:we?.rows||null,visualCategories:fe,enableRules:f,showIcons:p,narrationContext:Q,gradientSequences:x,sequenceTransition:M,processLineWidth:j,effectiveUnit:B,partitionMarkers:re,ariaLabel:t,enableNeutralNoJudgement:$,showTrendGatingExplanation:T,trendVisualMode:w,metricImprovement:d,showTrendStartMarkers:q,showFirstFavourableCrossMarkers:H,showTrendBridgeOverlay:U,showSignalsInspector:G,onSignalFocus:oe})})}),P&&o.jsx("div",{className:"fdp-spc-chart__source","aria-label":"Chart data source",children:typeof P=="string"?o.jsxs("small",{children:["Source: ",P]}):P}),C&&I&&o.jsx("div",{"data-testid":"spc-diagnostics-live","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:0,overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",border:0},children:I}),C&&he.length>0&&o.jsxs("div",{className:"fdp-spc-chart__warnings",role:"region","aria-label":"SPC diagnostics",children:[o.jsx("p",{className:"fdp-spc-chart__warnings-heading",children:"Diagnostics"}),o.jsx(en,{firstCellIsHeader:!1,panel:!1,responsive:!1,head:[{text:"Severity"},{text:"Category"},{text:"Code"},{text:"Details"}],rows:he.map(W=>{let J="grey";return W.severity===En.Error?J="red":W.severity===En.Warning?J="orange":W.severity===En.Info&&(J="blue"),[{node:o.jsx(Re,{color:J,text:(W.severity?String(W.severity):"Info").replace(/^[a-z]/,ue=>ue.toUpperCase())}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--severity"},{node:W.category?o.jsx(Re,{color:"purple",text:pe(W.category)}):o.jsx("span",{className:"fdp-spc-chart__warning-empty",children:"â€“"}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--category"},{node:o.jsx(Re,{color:"grey",text:z(W.code)}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--code"},{node:o.jsxs("div",{className:"fdp-spc-chart__warning-message",children:[o.jsx("span",{children:W.message}),W.context&&Object.keys(W.context).length>0&&o.jsxs("details",{className:"fdp-spc-chart__warning-context",style:{marginTop:4},children:[o.jsx("summary",{children:"context"}),o.jsx("pre",{children:JSON.stringify(W.context,null,2)})]})]}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--message"}]}),classes:"fdp-spc-chart__warnings-table-wrapper",tableClasses:"fdp-spc-chart__warnings-table"})]})]})},D1=({series:e,showPoints:t,announceFocus:n,limits:r,showZones:i,highlightOutOfControl:a,engineRows:s,enableRules:l,showIcons:u,narrationContext:c,gradientSequences:d,sequenceTransition:f,processLineWidth:p,effectiveUnit:g,partitionMarkers:b,ariaLabel:h,metricImprovement:m,enableNeutralNoJudgement:y=!0,showTrendGatingExplanation:k=!0,showTrendStartMarkers:N=!1,showFirstFavourableCrossMarkers:S=!1,showTrendBridgeOverlay:x=!1,showSignalsInspector:M=!1,onSignalFocus:j,visualCategories:C})=>{const v=er(),$=Ln();if(!v)return null;const{xScale:T,yScale:w}=v,L=X.useRef("spc-seq-"+ ++j1),P=kn(),D=e[0]?.data||[],F=X.useMemo(()=>{if(!r.ucl&&!r.lcl)return new Set;const I=new Set;return D.forEach((O,V)=>{typeof r.ucl=="number"&&O.y>r.ucl&&I.add(V),typeof r.lcl=="number"&&O.y<r.lcl&&I.add(V)}),I},[r.ucl,r.lcl,D]),A=X.useMemo(()=>{if(!s||!s.length)return null;const I=[];return s.forEach((O,V)=>{const ae=!!(O.variationIcon===Me.Concern||O.variationIcon===Me.Improvement||O.specialCauseNeitherValue),ee=!!(O.specialCauseSinglePointUp||O.specialCauseTwoOfThreeUp||O.specialCauseFourOfFiveUp||O.specialCauseShiftUp||O.specialCauseTrendUp),le=!!(O.specialCauseSinglePointDown||O.specialCauseTwoOfThreeDown||O.specialCauseFourOfFiveDown||O.specialCauseShiftDown||O.specialCauseTrendDown);I[V]={variation:O.variationIcon,assurance:O.assuranceIcon,special:ae,concern:O.variationIcon===Me.Concern,improvement:O.variationIcon===Me.Improvement,trendUp:!!O.specialCauseTrendUp,trendDown:!!O.specialCauseTrendDown,upAny:ee,downAny:le,neutralSpecial:!!O.specialCauseNeitherValue,shiftUp:!!O.specialCauseShiftUp,shiftDown:!!O.specialCauseShiftDown,twoOfThreeUp:!!O.specialCauseTwoOfThreeUp,twoOfThreeDown:!!O.specialCauseTwoOfThreeDown,fourOfFiveUp:!!O.specialCauseFourOfFiveUp,fourOfFiveDown:!!O.specialCauseFourOfFiveDown,partitionId:O.partitionId??null}}),I},[s]),ne=X.useMemo(()=>{if(!s||!s.length)return null;const I=[];for(const V of s)typeof V.target=="number"&&!isNaN(V.target)&&I.push(V.target);if(!I.length)return null;const O=I[0];return I.every(V=>V===O)?O:null},[s]),q=X.useMemo(()=>(C||[]).map(I=>I==="Improvement"?_t.Improvement:I==="Concern"?_t.Concern:I==="NoJudgement"?_t.NoJudgement:_t.Common),[C]),H=X.useMemo(()=>{if(!d||!q.length)return[];const I=[...q];let O=0;for(;O<I.length;){const ee=I[O];let le=O+1;for(;le<I.length&&I[le]===ee;)le++;le-O===1&&ee!==_t.Common&&(I[O]=_t.Common),O=le}const V=[];if(I.length){let ee=0;for(let le=1;le<=I.length;le++)if(le===I.length||I[le]!==I[ee]){const _e=I[ee],Se=le-1,me=Se-ee+1;(_e===_t.Common||me>=2)&&V.push({start:ee,end:Se,category:_e}),ee=le}}return h?.includes("Rule Clash")&&console.log(`[${h}] Final sequences:`,V.map(ee=>`${ee.start}-${ee.end}:${ee.category}`).join(", ")),V},[d,q,h]),U=X.useMemo(()=>D.map(I=>T(I.x instanceof Date?I.x:new Date(I.x))),[D,T]),G=T.range()[1],oe=X.useMemo(()=>{if(!s||!s.length)return null;let I=Number.POSITIVE_INFINITY,O=Number.POSITIVE_INFINITY;if(s.forEach((me,R)=>{me.specialCauseTrendUp&&(I=Math.min(I,R)),me.specialCauseTrendDown&&(O=Math.min(O,R))}),!Number.isFinite(I)&&!Number.isFinite(O))return null;const V=I<=O,ae=V?"up":"down",ee=V?I:O,le=me=>m==null||m===je.Neither||me==null||typeof me.value!="number"||typeof me.mean!="number"?!1:ae==="up"?m===je.Up?me.value>me.mean:me.value<me.mean:m===je.Down?me.value<me.mean:me.value>me.mean;let _e=null;for(let me=ee;me<s.length;me++){const R=s[me];if(!(V?!!R.specialCauseTrendUp:!!R.specialCauseTrendDown))break;if(le(R)){_e=me;break}}let Se=!1;if(_e!=null){let me=0;for(let R=_e;R<s.length;R++){const Y=s[R];if(!(V?!!Y.specialCauseTrendUp:!!Y.specialCauseTrendDown))break;le(Y)&&me++}Se=me>=2}return{direction:ae,detectedAt:ee,firstFavourableCrossAt:_e,persistedAcrossMean:Se}},[s,m]),z=X.useMemo(()=>{if(!s||!s.length)return null;const I=O=>{const V=[];let ae=null,ee=null;for(let le=0;le<s.length;le++){const _e=s[le],Se=typeof _e[O]=="number"?_e[O]:null;if(Se==null||isNaN(Se)){ae!==null&&ee!=null&&(V.push({x1:U[ae],x2:U[le-1],y:w(ee)}),ae=null,ee=null);continue}if(ae===null){ae=le,ee=Se;continue}ee!=null&&Math.abs(Se-ee)<=1e-9||(ee!=null&&V.push({x1:U[ae],x2:U[le-1],y:w(ee)}),ae=le,ee=Se)}return ae!==null&&ee!=null&&V.push({x1:U[ae],x2:U[s.length-1],y:w(ee)}),V};return{mean:I("mean"),ucl:I("upperProcessLimit"),lcl:I("lowerProcessLimit"),onePos:I("upperOneSigma"),oneNeg:I("lowerOneSigma"),twoPos:I("upperTwoSigma"),twoNeg:I("lowerTwoSigma")}},[s,U,w]),pe=X.useMemo(()=>H.length?o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:`${L.current}-grad-common`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.28}),o.jsx("stop",{offset:"70%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.12}),o.jsx("stop",{offset:"100%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.045})]}),H.map((I,O)=>{const V=`${L.current}-grad-${O}`;let ae,ee=.28,le=.12,_e=.045;switch(I.category){case _t.Concern:ae="var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",ee=.28,le=.12,_e=.045;break;case _t.Improvement:ae="var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",ee=.26,le=.11,_e=.045;break;case _t.NoJudgement:ae="var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",ee=.26,le=.11,_e=.045;break;default:ae="var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)"}return o.jsxs("linearGradient",{id:V,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:ae,stopOpacity:ee}),o.jsx("stop",{offset:"70%",stopColor:ae,stopOpacity:le}),o.jsx("stop",{offset:"100%",stopColor:ae,stopOpacity:_e})]},V)})]}):null,[H]),we=X.useMemo(()=>{if(!H.length)return null;const[I]=w.domain(),O=w(I),V=H.map((ae,ee)=>{const{start:le,end:_e,category:Se}=ae;if(le<0||_e>=U.length||le>_e)return null;const me=U[le],R=U[_e];let Y="";if(Se===_t.Common){const K=ee>0?H[ee-1]:null,te=ee<H.length-1?H[ee+1]:null,B=K?U[K.end]:0,Q=K?w(D[K.end].y):O,re=te?U[te.start]:G,ie=te?w(D[te.start].y):O;Y=`M ${B} ${O}`,Y+=` L ${B} ${Q}`;for(let W=le;W<=_e;W++)Y+=` L ${U[W]} ${w(D[W].y)}`;Y+=` L ${re} ${ie}`,Y+=` L ${re} ${O} Z`}else{const K=ee>0?H[ee-1]:null,te=ee<H.length-1?H[ee+1]:null,B=K&&K.category!==_t.Common,Q=te&&te.category!==_t.Common,re=w(D[le].y),ie=w(D[_e].y);let W=me,J=R;if(B){const ue=U[K.end],ge=w(D[K.end].y),ce=D[le].y-D[K.end].y;f==="slope"&&ce>0?(Y=`M ${ue} ${ge} L ${me} ${re}`,W=ue):(Y=`M ${me} ${O} L ${me} ${re}`,W=me)}else Y=`M ${me} ${O} L ${me} ${re}`;for(let ue=le+1;ue<=_e;ue++)Y+=` L ${U[ue]} ${w(D[ue].y)}`;if(Y+=` L ${R} ${ie}`,Q){const ue=U[te.start],ge=w(D[te.start].y),ce=D[te.start].y-D[_e].y;(f==="slope"&&ce<=0||f==="extend")&&(Y+=` L ${ue} ${ge}`,J=ue)}if(Y+=` L ${J} ${O}`,Y+=` L ${W} ${O} Z`,f==="neutral"&&B){const ue=U[K.end],ge=w(D[K.end].y),ce=o.jsx("path",{d:`M ${ue} ${O} L ${ue} ${ge} L ${me} ${re} L ${me} ${O} Z`,fill:`url(#${L.current}-grad-common)`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-wedge-${ee}`);return o.jsxs("g",{children:[ce,o.jsx("path",{d:Y,fill:`url(#${L.current}-grad-${ee})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${ee}`)]},`seq-group-${ee}`)}}return o.jsx("path",{d:Y,fill:`url(#${L.current}-grad-${ee})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${ee}`)}).filter(Boolean);return o.jsx("g",{className:"fdp-spc__sequence-bgs",children:V})},[H,U,G,w,D,f]),fe=X.useMemo(()=>{if(!c?.timeframe&&D.length>=2){const I=D.map(_e=>_e.x instanceof Date?_e.x:new Date(_e.x)),O=new Date(Math.min(...I.map(_e=>_e.getTime()))),V=new Date(Math.max(...I.map(_e=>_e.getTime()))),ae=Math.round((V.getTime()-O.getTime())/864e5)||0;if(ae<14)return`The chart shows a timeframe of ${ae+1} days`;const ee=Math.round(ae/7);return ee<20?`The chart shows a timeframe of ${ee} weeks`:`The chart shows a timeframe of ${(V.getFullYear()-O.getFullYear())*12+(V.getMonth()-O.getMonth())+1} months`}if(c?.timeframe)return`The chart shows a timeframe of ${c.timeframe}`},[c?.timeframe,D]),de=I=>{const O=I%10,V=I%100;return O===1&&V!==11?`${I}st`:O===2&&V!==12?`${I}nd`:O===3&&V!==13?`${I}rd`:`${I}th`},Z=I=>`${de(I.getDate())} ${I.toLocaleString("en-GB",{month:"long"})}, ${I.getFullYear()}`,se=X.useCallback(({index:I,x:O,y:V})=>{const ae=s?.[I],ee=O instanceof Date?O:new Date(O),le=Z(ee),_e=c?.measureUnit?` ${c.measureUnit}`:"",Se=c?.measureName?` ${c.measureName}`:"";if(!ae)return`General summary is: ${fe?fe+". ":""}Point ${I+1}, ${le}, ${V}${_e}${Se}`;const me=Ha(ae.variationIcon)||"Variation",R=Ra(ae),Y=R.length?` Rules: ${[...new Set(R.map(te=>jr[te].narration))].join("; ")}.`:" No special cause rules.",K=[];return c?.measureName&&K.push(`Measure: ${c.measureName}.`),c?.datasetContext&&K.push(`${c.datasetContext}.`),c?.organisation&&K.push(`Organisation: ${c.organisation}.`),c?.additionalNote&&K.push(c.additionalNote),["General summary is:",...K,`Point ${I+1} recorded on `,le+",",`with a value of ${V} ${_e}${Se}`,me+".",Y].join(" ").replace(/\s+/g," ").trim()},[s,c,fe]),he=X.useCallback((I,O)=>s?.[I]?se({index:I,seriesId:"process",x:O.x instanceof Date?O.x:new Date(O.x),y:O.y}).replace(/^General summary is:\s*/,"").replace(/^Point \d+\s*/,""):void 0,[s,se]);return o.jsx(Yd,{children:o.jsxs("div",{className:"fdp-spc-chart",role:"group","aria-label":"Statistical process control chart","aria-roledescription":"chart",children:[o.jsx("svg",{width:v.xScale.range()[1]+56+16,height:v.yScale.range()[0]+12+48,role:"img",children:o.jsxs("g",{transform:"translate(56,12)",children:[o.jsx(No,{type:"x"}),o.jsx(No,{type:"y"}),o.jsx(Bd,{axis:"y"}),pe,we,b.map((I,O)=>{const V=D[I];if(!V)return null;const ae=T(V.x instanceof Date?V.x:new Date(V.x));return o.jsx("line",{x1:ae,x2:ae,y1:0,y2:w.range()[0],stroke:"#555",strokeDasharray:"4 4",strokeWidth:1,"aria-hidden":"true",className:"fdp-spc__partition-marker"},`partition-marker-${O}`)}),z?.mean.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__cl-group",children:[z.mean.map((I,O)=>o.jsx("line",{className:"fdp-spc__cl",x1:I.x1,x2:I.x2,y1:I.y,y2:I.y},`mean-${O}`)),z.mean.map((I,O)=>{if(O===z.mean.length-1)return null;const V=z.mean[O+1];if(!V||I.y===V.y)return null;const ee=Math.max(4,V.x1-I.x2||0)*.5,le=`M ${I.x2},${I.y} C ${I.x2+ee},${I.y} ${V.x1-ee},${V.y} ${V.x1},${V.y}`;return o.jsx("path",{className:"fdp-spc__cl fdp-spc__cl-join",d:le,fill:"none"},`mean-join-${O}`)})]}):null,ne!=null&&o.jsx(o.Fragment,{}),z?.ucl.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--ucl",children:[z.ucl.map((I,O)=>o.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--ucl",x1:I.x1,x2:I.x2,y1:I.y,y2:I.y,strokeWidth:2},`ucl-${O}`)),z.ucl.map((I,O)=>{if(O===z.ucl.length-1)return null;const V=z.ucl[O+1];if(!V||I.y===V.y)return null;const ee=Math.max(4,V.x1-I.x2||0)*.5,le=`M ${I.x2},${I.y} C ${I.x2+ee},${I.y} ${V.x1-ee},${V.y} ${V.x1},${V.y}`;return o.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--ucl fdp-spc__limit-join",d:le,fill:"none",strokeWidth:2},`ucl-join-${O}`)})]}):null,z?.lcl.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--lcl",children:[z.lcl.map((I,O)=>o.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--lcl",x1:I.x1,x2:I.x2,y1:I.y,y2:I.y,strokeWidth:2},`lcl-${O}`)),z.lcl.map((I,O)=>{if(O===z.lcl.length-1)return null;const V=z.lcl[O+1];if(!V||I.y===V.y)return null;const ee=Math.max(4,V.x1-I.x2||0)*.5,le=`M ${I.x2},${I.y} C ${I.x2+ee},${I.y} ${V.x1-ee},${V.y} ${V.x1},${V.y}`;return o.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--lcl fdp-spc__limit-join",d:le,fill:"none",strokeWidth:2},`lcl-join-${O}`)})]}):null,ne!=null&&o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__target-group",children:[o.jsx("line",{className:"fdp-spc__target","data-testid":"spc-target-line",x1:0,x2:T.range()[1],y1:w(ne),y2:w(ne),strokeWidth:2.5}),o.jsxs("text",{"data-testid":"spc-target-label",x:T.range()[0]-7,y:w(ne)-5,textAnchor:"start",className:"fdp-spc__target-label",fontSize:12,children:["Target ",ne," ",g||c?.measureUnit||""]})]}),i&&z&&z.mean.length>0&&o.jsxs(o.Fragment,{children:[z.onePos.map((I,O)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos1",x1:I.x1,x2:I.x2,y1:I.y,y2:I.y,"aria-hidden":"true",strokeWidth:2},`onePos-${O}`)),z.oneNeg.map((I,O)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg1",x1:I.x1,x2:I.x2,y1:I.y,y2:I.y,"aria-hidden":"true",strokeWidth:2},`oneNeg-${O}`)),z.twoPos.map((I,O)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos2",x1:I.x1,x2:I.x2,y1:I.y,y2:I.y,"aria-hidden":"true",strokeWidth:2},`twoPos-${O}`)),z.twoNeg.map((I,O)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg2",x1:I.x1,x2:I.x2,y1:I.y,y2:I.y,"aria-hidden":"true",strokeWidth:2},`twoNeg-${O}`))]}),oe&&(N||S||x)&&(()=>{const I=oe.detectedAt,O=oe.firstFavourableCrossAt,V=D[I]?T(D[I].x instanceof Date?D[I].x:new Date(D[I].x)):null,ae=D[I]?w(D[I].y):null,ee=O!=null&&D[O]?T(D[O].x instanceof Date?D[O].x:new Date(D[O].x)):null,le=O!=null&&D[O]?w(D[O].y):null;return o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__trend-overlays",children:[x&&V!=null&&ae!=null&&ee!=null&&le!=null&&o.jsx("line",{x1:V,y1:ae,x2:ee,y2:le,stroke:"#888",strokeDasharray:"4 4",strokeWidth:2,children:o.jsx("title",{children:"Trend bridge: start to first favourable-side point"})}),N&&V!=null&&ae!=null&&o.jsx("circle",{cx:V,cy:ae,r:6,fill:"white",stroke:"#555",strokeWidth:2,children:o.jsx("title",{children:"Trend start (run reached N)"})}),S&&ee!=null&&le!=null&&o.jsx("circle",{cx:ee,cy:le,r:5,fill:"#555",children:o.jsx("title",{children:"First favourable-side inclusion"})})]})})(),o.jsx(qd,{series:e[0],seriesIndex:0,palette:"categorical",showPoints:!1,focusablePoints:!1,focusIndex:-1,parseX:I=>I.x instanceof Date?I.x:new Date(I.x),smooth:!1,strokeWidth:p}),t&&D.map((I,O)=>{const V=T(I.x instanceof Date?I.x:new Date(I.x)),ae=w(I.y),ee=F.has(O),le=A?.[O],_e=q[O],Se=_e===_t.Improvement,me=_e===_t.Concern,R=_e===_t.NoJudgement,Y=["fdp-spc__point",ee&&a?"fdp-spc__point--ooc":null,l&&me?"fdp-spc__point--sc-concern":null,l&&Se?"fdp-spc__point--sc-improvement":null,l&&y&&R?"fdp-spc__point--sc-no-judgement":null,le?.assurance===et.Pass?"fdp-spc__point--assurance-pass":null,le?.assurance===et.Fail?"fdp-spc__point--assurance-fail":null].filter(Boolean).join(" "),K=P?.focused?.index===O;return o.jsx("circle",{cx:V,cy:ae,r:5,className:Y,"data-variation":le?.variation,"data-assurance":le?.assurance,"aria-label":h,...K?{"aria-describedby":`spc-tooltip-${O}`}:{}},O)}),u&&l&&A&&D.map((I,O)=>{const V=A[O];if(!V||!(V.concern||V.improvement))return null;const ae=T(I.x instanceof Date?I.x:new Date(I.x)),ee=w(I.y);let le=ee-10;const _e=12,Se=w.range()[0]-4;le<_e&&(le=Math.min(ee+16,Se));const me=T.range()[1],R=Math.min(Math.max(ae,0),me-0);return o.jsx("text",{x:R,y:le,textAnchor:"middle",className:`fdp-spc__icon ${V.concern?"fdp-spc__icon--concern":"fdp-spc__icon--improvement"}`,"aria-hidden":"true",children:V.concern?"!":"â˜…"},`icon-${O}`)}),$&&o.jsx(M1,{width:T.range()[1],height:w.range()[0]}),!M&&o.jsx(gf,{engineRows:s,limits:{mean:r.mean,sigma:r.sigma},pointDescriber:he,measureName:c?.measureName,measureUnit:c?.measureUnit,dateFormatter:I=>Z(I),enableNeutralNoJudgement:y,showTrendGatingExplanation:k})]})}),M&&o.jsx("div",{style:{marginTop:8},children:o.jsx(f1,{engineRows:s,measureName:c?.measureName,measureUnit:g||c?.measureUnit,onSignalFocus:j})}),n&&o.jsx(Cx,{format:I=>se({...I,x:I.x instanceof Date?I.x:new Date(I.x)})})]})})},M1=({width:e,height:t})=>{const n=kn();return n?o.jsx("rect",{className:"fdp-spc__interaction-layer",width:e,height:t,fill:"transparent",tabIndex:0,"aria-label":"Interactive chart area. Use arrow keys to move between points.",onMouseMove:r=>{const a=r.currentTarget.getBoundingClientRect(),s=r.clientX-a.left,l=r.clientY-a.top;n.focusNearest(s,l)},onMouseLeave:()=>n.clear(),onKeyDown:r=>{switch(r.key){case"ArrowRight":n.focusNextPoint(),r.preventDefault();break;case"ArrowLeft":n.focusPrevPoint(),r.preventDefault();break;case"ArrowDown":n.focusNextSeries(),r.preventDefault();break;case"ArrowUp":n.focusPrevSeries(),r.preventDefault();break;case"Home":n.focusFirstPoint(),r.preventDefault();break;case"End":n.focusLastPoint(),r.preventDefault();break}},style:{cursor:"crosshair"}}):null},I1=Object.freeze(Object.defineProperty({__proto__:null,AssuranceIcon:et,AssuranceResult:An,BaselineSuggestionReason:Ut,ChartType:nn,Direction:De,Icons:Object.freeze(Object.defineProperty({__proto__:null,AssuranceResult:An,Direction:De,MetricPolarity:Ye,SPCAssuranceIcon:Va,SPCVariationIcon:Ua,VariationJudgement:Nt,VariationState:ke,getVariationColour:Ho,getVariationTrend:za},Symbol.toStringTag,{value:"Module"})),ImprovementDirection:je,MetricPolarity:Ye,RULE_METADATA:Ea,SPCAssuranceIcon:Va,SPCChart:kf,SPCTooltipOverlay:gf,SPCVariationIcon:Ua,SpcEmbeddedIconVariant:nr,SpcWarningCategory:of,SpcWarningCode:lf,SpcWarningSeverity:En,VARIATION_COLOR_TOKENS:Kt,VariationIcon:Me,VariationJudgement:Nt,VariationState:ke,buildSpc:Wa,extractRuleIds:Ra,getVariationColorHex:Ax,getVariationColorToken:Qd,getVariationColour:Ho,getVariationTrend:za,normaliseSpcSettings:cf,ruleGlossary:jr,variationLabel:Ha},Symbol.toStringTag,{value:"Module"})),Tf="150ms",Nf="300ms",jf="500ms",Df="cubic-bezier(0.4, 0, 1, 1)",Mf="cubic-bezier(0, 0, 0.2, 1)",If="cubic-bezier(0.4, 0, 0.2, 1)",Pf="cubic-bezier(0.68, -0.55, 0.265, 1.55)",$f="background-color 300ms cubic-bezier(0, 0, 0.2, 1)",Ff="box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",Lf="border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",Af="border-color 300ms cubic-bezier(0, 0, 0.2, 1)",Ef="1px",Bf="2px",Rf="4px",Hf="4px",Of="4px",zf="2px",Uf="1px",Wf="0px",Vf="4px",Gf="8px",Yf="12px",Uo="#d8dde0",Wo="#4c6272",Vo="#d8dde0",Go="#aeb7bd",Yo="#d5281b",qo="#005eb8",Xo="#ffffff",Ko="#212b32",Jo="#007f3b",Zo="#330072",Qo="#7c2855",el="#d5281b",tl="#ffeb3b",nl="#fff9c4",rl="#ffb81c",il="#ed8b00",al="#00a499",sl="#ae2573",ol="#4c6272",ll="#768692",cl="#aeb7bd",ul="#d8dde0",dl="#f0f4f5",qf="#212b32",Xf="#4c6272",Kf="#ffffff",Jf="#212b32",Zf="#005eb8",Qf="#7c2855",eh="#003087",th="#330072",nh="#ffeb3b",rh="#212b32",ih="#d8dde0",ah="#ffffff33",sh="#d5281b",oh="#4c6272",lh="#ffffff",ch="#007f3b",uh="#ffffff",dh="#006530",fh="#004021",hh="#004021",ph="#00000000",mh="#ffffff",gh="#005eb8",bh="#005eb8",yh="#d9e5f2",_h="#c7daf0",vh="#005eb8",xh="#ffffff",wh="#212b32",Sh="#d9dde0",Ch="#b3bcc2",kh="#b3bcc2",Th="#d5281b",Nh="#aa2016",jh="#6a140e",Dh="#6a140e",Mh="#005eb8",Ih="#004b93",Ph="#002f5c",$h="#002f5c",Fh="8px",Lh="16px",Ah="12px",Eh="16px",Bh="4px",Rh="40px",Hh="4px",Oh="40px",zh="12px",Uh="16px",Wh="32px",Vh="16px",Gh="20px",Yh="28px",qh="9px",Xh="2px",Kh="16px",Jh="24px",Zh="8px",Qh="24px",ep="16px",tp="4px",np="4px",rp="4px",ip="8px",ap="4px",sp="16px",op="#007f3b",lp="#006530",cp="#004021",up="#d8dde0",dp="#ffffff",fp="#768692",hp="#00000000",pp="#ffeb3b",mp="#00000000",gp="#ffffff",bp="#d9e5f2",yp="#c7daf0",_p="#005eb8",vp="#005eb8",fl="8px",hl="16px",pl="12px",ml="16px",xp="2px",wp="4px",Sp="4px",Cp="600",kp="#ffffff",Tp="#d8dde0",Np="#aeb7bd",jp="#f0f4f5",Dp="#212b32",Mp="#212b32",Ip="#005eb8",gl="16px",bl="32px",yl="16px",Pp="1px",$p="4px",Fp="none",Lp="0 2px 4px rgba(0, 0, 0, 0.1)",Ap="#ffffff",Ep="#ffffff",Bp="#d8dde0",Rp="#ffffff",Hp="#4c6272",Op="#ffeb3b",zp="#d5281b",Up="#aeb7bd",Wp="#212b32",Vp="#4c6272",Gp="#768692",Yp="#212b32",qp="#ffffff",Xp="600",Kp="#d5281b",Jp="600",Zp="#4c6272",_l="4px",vl="40px",xl="40px",wl="12px",Qp="2px",em="4px",tm="0px",nm="16px",rm="18px",im="24px",am="32px",sm="34px",om="32px",lm="40px",cm="48px",um="5.4ex",dm="7.2ex",fm="9ex",hm="10.8ex",pm="20ex",mm="38ex",gm="56ex",bm="44px",ym="40px",_m="1020px",vm="100%",xm="50%",wm="33.333%",Sm="25%",Cm="20%",km="320px",Tm="641px",Nm="1025px",jm="1280px",Dm="960px",Mm="32px",Im="16px",Pm="#d5281b",$m="#d5281b",Fm="#ffffff",Lm="#007f3b",Am="#007f3b",Em="#ffffff",Bm="#ffeb3b",Rm="#ffeb3b",Hm="#212b32",Om="#005eb8",zm="#005eb8",Um="#ffffff",Wm="#d8dde0",Vm="#aeb7bd",Gm="#768692",Ym="0 4px 0 #004021",qm="0 4px 0 #005eb8",Xm="0 4px 0 #6a140e",Km="0 4px 0 #ffeb3b",Jm="none",Zm="0 2px 4px rgba(0, 0, 0, 0.1)",Qm="4px",eg="0px",tg="solid",ng="0 0 0 3px #ffeb3b",rg="0 0 0 3px #ffeb3b",ig="none",ag="0 1px 3px rgba(0, 0, 0, 0.12)",sg="0 2px 6px rgba(0, 0, 0, 0.16)",og="0 4px 12px rgba(0, 0, 0, 0.20)",Sl="0",Cl="4px",kl="8px",Tl="16px",Nl="24px",jl="32px",Dl="40px",Ml="48px",Il="56px",Pl="64px",Ya="0",qa="0",Xa="4px",Ka="4px",Ja="8px",Za="8px",Qa="8px",es="16px",ts="16px",ns="24px",rs="24px",is="32px",as="32px",ss="40px",os="40px",ls="48px",cs="48px",us="56px",ds="56px",fs="64px",hi="Frutiger W01",pi="Arial, Helvetica, sans-serif",mi="sans-serif",gi="400",bi="600",yi="400",_i="12px",vi="14px",xi="12pt",wi="14px",Si="16px",Ci="12pt",ki="16px",Ti="19px",Ni="13pt",ji="19px",Di="22px",Mi="15pt",Ii="22px",Pi="26px",$i="17pt",Fi="27px",Li="36px",Ai="20pt",Ei="33px",Bi="48px",Ri="24pt",hs="16px",ps="24px",an={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},sn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},on={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ln={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},cn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},un={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},dn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},fn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},hn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},pn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},P1=Object.freeze(Object.defineProperty({__proto__:null,AnimationDurationFast:Tf,AnimationDurationNormal:Nf,AnimationDurationSlow:jf,AnimationEasingBounce:Pf,AnimationEasingEaseIn:Df,AnimationEasingEaseInOut:If,AnimationEasingEaseOut:Mf,BorderColorCard:Vo,BorderColorCardHover:Go,BorderColorDefault:Uo,BorderColorError:Yo,BorderColorForm:Wo,BorderRadiusLarge:Yf,BorderRadiusMedium:Gf,BorderRadiusNone:Wf,BorderRadiusSmall:Vf,BorderWidthCardBottom:Hf,BorderWidthDefault:Ef,BorderWidthFormElement:Bf,BorderWidthFormElementError:Rf,BorderWidthPanel:Of,BorderWidthTableCell:Uf,BorderWidthTableHeader:zf,BreakpointDesktop:Nm,BreakpointLargeDesktop:jm,BreakpointMobile:km,BreakpointTablet:Tm,ButtonBorderRadius:wp,ButtonBorderWidth:xp,ButtonPrimaryBackgroundActive:cp,ButtonPrimaryBackgroundDefault:op,ButtonPrimaryBackgroundDisabled:up,ButtonPrimaryBackgroundHover:lp,ButtonPrimaryBorderDefault:hp,ButtonPrimaryBorderFocus:pp,ButtonPrimaryTextDefault:dp,ButtonPrimaryTextDisabled:fp,ButtonSecondaryBackgroundActive:yp,ButtonSecondaryBackgroundDefault:mp,ButtonSecondaryBackgroundHover:bp,ButtonSecondaryBackgroundSolid:gp,ButtonSecondaryBorderDefault:vp,ButtonSecondaryTextDefault:_p,ButtonShadowSize:Sp,ButtonSpacingPaddingHorizontalDesktop:ml,ButtonSpacingPaddingHorizontalMobile:hl,ButtonSpacingPaddingVerticalDesktop:pl,ButtonSpacingPaddingVerticalMobile:fl,ButtonTypographyWeight:Cp,CardBackgroundDefault:kp,CardBorderBottom:jp,CardBorderDefault:Tp,CardBorderHover:Np,CardBorderWidthBottom:$p,CardBorderWidthDefault:Pp,CardShadowDefault:Fp,CardShadowHover:Lp,CardSpacingHeadingMargin:yl,CardSpacingPaddingDesktop:bl,CardSpacingPaddingMobile:gl,CardTextDescription:Mp,CardTextHeading:Dp,CardTextLink:Ip,ColorBorderDefault:ih,ColorBorderSecondary:ah,ColorButtonLoginActive:Ph,ColorButtonLoginBackground:Mh,ColorButtonLoginHover:Ih,ColorButtonLoginShadow:$h,ColorButtonPrimaryActive:fh,ColorButtonPrimaryBackground:ch,ColorButtonPrimaryHover:dh,ColorButtonPrimaryShadow:hh,ColorButtonPrimaryText:uh,ColorButtonReverseActive:Ch,ColorButtonReverseBackground:xh,ColorButtonReverseHover:Sh,ColorButtonReverseShadow:kh,ColorButtonReverseText:wh,ColorButtonSecondaryActive:_h,ColorButtonSecondaryBackground:ph,ColorButtonSecondaryBackgroundSolid:mh,ColorButtonSecondaryBorder:gh,ColorButtonSecondaryHover:yh,ColorButtonSecondaryShadow:vh,ColorButtonSecondaryText:bh,ColorButtonWarningActive:jh,ColorButtonWarningBackground:Th,ColorButtonWarningHover:Nh,ColorButtonWarningShadow:Dh,ColorError:sh,ColorFocusBackground:nh,ColorFocusText:rh,ColorFormBackground:lh,ColorFormBorder:oh,ColorGrey1:ol,ColorGrey2:ll,ColorGrey3:cl,ColorGrey4:ul,ColorGrey5:dl,ColorLinkActive:eh,ColorLinkDefault:Zf,ColorLinkHover:Qf,ColorLinkVisited:th,ColorPrimaryBlack:Ko,ColorPrimaryBlue:qo,ColorPrimaryDarkPink:Qo,ColorPrimaryGreen:Jo,ColorPrimaryPurple:Zo,ColorPrimaryRed:el,ColorPrimaryWhite:Xo,ColorPrimaryYellow:tl,ColorSecondaryAquaGreen:al,ColorSecondaryOrange:il,ColorSecondaryPaleYellow:nl,ColorSecondaryPink:sl,ColorSecondaryWarmYellow:rl,ColorTextPrimary:qf,ColorTextPrint:Jf,ColorTextReverse:Kf,ColorTextSecondary:Xf,ComponentBlur:np,ComponentBreadcrumbChevronMarginLeft:qh,ComponentBreadcrumbChevronMarginRight:Xh,ComponentBreadcrumbPaddingTopDesktop:Jh,ComponentBreadcrumbPaddingTopMobile:Kh,ComponentButtonPaddingDesktopHorizontal:Eh,ComponentButtonPaddingDesktopVertical:Ah,ComponentButtonPaddingMobileHorizontal:Lh,ComponentButtonPaddingMobileVertical:Fh,ComponentButtonShadowSize:Bh,ComponentCardHeadingMargin:Vh,ComponentCardPaddingDesktop:Wh,ComponentCardPaddingMobile:Uh,ComponentDetails:ip,ComponentExpander:ap,ComponentFormCheckboxLabelPadding:zh,ComponentFormCheckboxSize:Oh,ComponentFormInputMinHeight:Rh,ComponentFormInputPadding:Hh,ComponentLink:rp,ComponentPagination:sp,ComponentPanelPaddingDesktop:Yh,ComponentPanelPaddingMobile:Gh,ComponentSpread:tp,ComponentSummaryListCellPaddingHorizontal:Qh,ComponentSummaryListCellPaddingVertical:Zh,ComponentSummaryListRowMargin:ep,ElevationHigh:og,ElevationLow:ag,ElevationMedium:sg,ElevationNone:ig,FocusOutlineOffset:eg,FocusOutlineStyle:tg,FocusOutlineWidth:Qm,FocusShadowButton:rg,FocusShadowInput:ng,FontFamilyBase:hi,FontFamilyFallback:pi,FontFamilyPrint:mi,FontLineHeightBase:ps,FontSize14Mobile:_i,FontSize14Print:xi,FontSize14Tablet:vi,FontSize16Mobile:wi,FontSize16Print:Ci,FontSize16Tablet:Si,FontSize19Mobile:ki,FontSize19Print:Ni,FontSize19Tablet:Ti,FontSize22Mobile:ji,FontSize22Print:Mi,FontSize22Tablet:Di,FontSize26Mobile:Ii,FontSize26Print:$i,FontSize26Tablet:Pi,FontSize36Mobile:Fi,FontSize36Print:Ai,FontSize36Tablet:Li,FontSize48Mobile:Ei,FontSize48Print:Ri,FontSize48Tablet:Bi,FontSizeBase:hs,FontWeightBold:bi,FontWeightLight:yi,FontWeightNormal:gi,FormBorderRadius:tm,FormBorderWidthDefault:Qp,FormBorderWidthError:em,FormErrorTextDefault:Kp,FormErrorTypographyWeight:Jp,FormHintTextDefault:Zp,FormInputBackgroundDefault:Ap,FormInputBackgroundDisabled:Bp,FormInputBackgroundError:Rp,FormInputBackgroundFocus:Ep,FormInputBorderDefault:Hp,FormInputBorderDisabled:Up,FormInputBorderError:zp,FormInputBorderFocus:Op,FormInputTextDefault:Wp,FormInputTextDisabled:Gp,FormInputTextPlaceholder:Vp,FormLabelTextDefault:Yp,FormLabelTextRequired:qp,FormLabelTypographyWeight:Xp,FormSpacingCheckboxLabelPadding:wl,FormSpacingCheckboxSize:xl,FormSpacingInputMinHeight:vl,FormSpacingInputPadding:_l,GridGutter:Mm,GridGutterHalf:Im,GridPageWidth:Dm,HeadingsNhsukHeadingL:sn,HeadingsNhsukHeadingM:on,HeadingsNhsukHeadingS:ln,HeadingsNhsukHeadingXl:an,HeadingsNhsukHeadingXs:cn,LayoutColumnActions:Cm,LayoutColumnFull:vm,LayoutColumnHalf:xm,LayoutColumnQuarter:Sm,LayoutColumnThird:wm,LayoutContainerMaxWidth:_m,ParagraphsBody:un,ParagraphsBodyLarge:dn,ParagraphsBodySmall:fn,ParagraphsLedeText:hn,ParagraphsLedeTextSmall:pn,ShadowButtonDefault:Ym,ShadowButtonFocus:Km,ShadowButtonSecondary:qm,ShadowButtonWarning:Xm,ShadowCardDefault:Jm,ShadowCardHover:Zm,SizeButtonMinHeightDesktop:ym,SizeButtonMinHeightMobile:bm,SizeFormControlLarge:cm,SizeFormControlMedium:lm,SizeFormControlSmall:om,SizeFormInputWidth2xl:mm,SizeFormInputWidth3xl:gm,SizeFormInputWidthLg:hm,SizeFormInputWidthMd:fm,SizeFormInputWidthSm:dm,SizeFormInputWidthXl:pm,SizeFormInputWidthXs:um,SizeIconExtraLarge:am,SizeIconLarge:im,SizeIconMedium:rm,SizeIconNhsDefault:sm,SizeIconSmall:nm,Spacing0:Sl,Spacing1:Cl,Spacing2:kl,Spacing3:Tl,Spacing4:Nl,Spacing5:jl,Spacing6:Dl,Spacing7:Ml,Spacing8:Il,Spacing9:Pl,SpacingResponsive0Mobile:Ya,SpacingResponsive0Tablet:qa,SpacingResponsive1Mobile:Xa,SpacingResponsive1Tablet:Ka,SpacingResponsive2Mobile:Ja,SpacingResponsive2Tablet:Za,SpacingResponsive3Mobile:Qa,SpacingResponsive3Tablet:es,SpacingResponsive4Mobile:ts,SpacingResponsive4Tablet:ns,SpacingResponsive5Mobile:rs,SpacingResponsive5Tablet:is,SpacingResponsive6Mobile:as,SpacingResponsive6Tablet:ss,SpacingResponsive7Mobile:os,SpacingResponsive7Tablet:ls,SpacingResponsive8Mobile:cs,SpacingResponsive8Tablet:us,SpacingResponsive9Mobile:ds,SpacingResponsive9Tablet:fs,StateDisabledBackground:Wm,StateDisabledBorder:Vm,StateDisabledText:Gm,StateErrorBackground:Pm,StateErrorBorder:$m,StateErrorText:Fm,StateInfoBackground:Om,StateInfoBorder:zm,StateInfoText:Um,StateSuccessBackground:Lm,StateSuccessBorder:Am,StateSuccessText:Em,StateWarningBackground:Bm,StateWarningBorder:Rm,StateWarningText:Hm,TransitionButtonDefault:$f,TransitionButtonShadow:Ff,TransitionCardHover:Af,TransitionInputFocus:Lf},Symbol.toStringTag,{value:"Module"})),$1=(e,t)=>({fontSize:e.mobile,marginBottom:t.mobile,"@media (min-width: 768px)":{fontSize:e.tablet,marginBottom:t.tablet},"@media print":{fontSize:e.print||e.tablet}}),F1=({children:e,className:t="",style:n={}})=>o.jsx("h1",{className:t,style:{fontFamily:an.fontFamily,fontWeight:an.fontWeight,fontSize:an.fontSize.mobile,lineHeight:an.lineHeight,marginTop:an.marginTop,marginBottom:an.marginBottom.mobile,...n},children:e}),L1=({children:e,className:t="",style:n={}})=>o.jsx("h2",{className:t,style:{fontFamily:sn.fontFamily,fontWeight:sn.fontWeight,fontSize:sn.fontSize.mobile,lineHeight:sn.lineHeight,marginTop:sn.marginTop,marginBottom:sn.marginBottom.mobile,...n},children:e}),A1=({children:e,className:t="",style:n={}})=>o.jsx("h3",{className:t,style:{fontFamily:on.fontFamily,fontWeight:on.fontWeight,fontSize:on.fontSize.mobile,lineHeight:on.lineHeight,marginTop:on.marginTop,marginBottom:on.marginBottom.mobile,...n},children:e}),E1=({children:e,className:t="",style:n={}})=>o.jsx("h4",{className:t,style:{fontFamily:ln.fontFamily,fontWeight:ln.fontWeight,fontSize:ln.fontSize.mobile,lineHeight:ln.lineHeight,marginTop:ln.marginTop,marginBottom:ln.marginBottom.mobile,...n},children:e}),B1=({children:e,className:t="",style:n={}})=>o.jsx("h5",{className:t,style:{fontFamily:cn.fontFamily,fontWeight:cn.fontWeight,fontSize:cn.fontSize.mobile,lineHeight:cn.lineHeight,marginTop:cn.marginTop,marginBottom:cn.marginBottom.mobile,...n},children:e}),R1=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:un.fontFamily,fontWeight:un.fontWeight,fontSize:un.fontSize.mobile,lineHeight:un.lineHeight,marginTop:un.marginTop,marginBottom:un.marginBottom.mobile,...n},children:e}),H1=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:dn.fontFamily,fontWeight:dn.fontWeight,fontSize:dn.fontSize.mobile,lineHeight:dn.lineHeight,marginTop:dn.marginTop,marginBottom:dn.marginBottom.mobile,...n},children:e}),O1=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:fn.fontFamily,fontWeight:fn.fontWeight,fontSize:fn.fontSize.mobile,lineHeight:fn.lineHeight,marginTop:fn.marginTop,marginBottom:fn.marginBottom.mobile,...n},children:e}),z1=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:hn.fontFamily,fontWeight:hn.fontWeight,fontSize:hn.fontSize.mobile,lineHeight:hn.lineHeight,marginTop:hn.marginTop,marginBottom:hn.marginBottom.mobile,...n},children:e}),U1=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:pn.fontFamily,fontWeight:pn.fontWeight,fontSize:pn.fontSize.mobile,lineHeight:pn.lineHeight,marginTop:pn.marginTop,marginBottom:pn.marginBottom.mobile,...n},children:e}),W1=()=>E.useMemo(()=>P1,[]),V1=()=>E.useMemo(()=>({BorderColorDefault:Uo,BorderColorForm:Wo,BorderColorCard:Vo,BorderColorCardHover:Go,BorderColorError:Yo,ColorPrimaryBlue:qo,ColorPrimaryWhite:Xo,ColorPrimaryBlack:Ko,ColorPrimaryGreen:Jo,ColorPrimaryPurple:Zo,ColorPrimaryDarkPink:Qo,ColorPrimaryRed:el,ColorPrimaryYellow:tl,ColorSecondaryPaleYellow:nl,ColorSecondaryWarmYellow:rl,ColorSecondaryOrange:il,ColorSecondaryAquaGreen:al,ColorSecondaryPink:sl,ColorGrey1:ol,ColorGrey2:ll,ColorGrey3:cl,ColorGrey4:ul,ColorGrey5:dl}),[]),G1=()=>E.useMemo(()=>({Spacing0:Sl,Spacing1:Cl,Spacing2:kl,Spacing3:Tl,Spacing4:Nl,Spacing5:jl,Spacing6:Dl,Spacing7:Ml,Spacing8:Il,Spacing9:Pl}),[]),Y1=()=>E.useMemo(()=>({Mobile:{Size14:_i,Size16:wi,Size19:ki,Size22:ji,Size26:Ii,Size36:Fi,Size48:Ei},Tablet:{Size14:vi,Size16:Si,Size19:Ti,Size22:Di,Size26:Pi,Size36:Li,Size48:Bi},Print:{Size14:xi,Size16:Ci,Size19:Ni,Size22:Mi,Size26:$i,Size36:Ai,Size48:Ri},Family:{Base:hi,Fallback:pi,Print:mi},Weight:{Normal:gi,Bold:bi,Light:yi},Base:{Size:hs,LineHeight:ps},FontFamilyBase:hi,FontFamilyFallback:pi,FontFamilyPrint:mi,FontWeightNormal:gi,FontWeightBold:bi,FontWeightLight:yi,FontSize14Mobile:_i,FontSize14Tablet:vi,FontSize14Print:xi,FontSize16Mobile:wi,FontSize16Tablet:Si,FontSize16Print:Ci,FontSize19Mobile:ki,FontSize19Tablet:Ti,FontSize19Print:Ni,FontSize22Mobile:ji,FontSize22Tablet:Di,FontSize22Print:Mi,FontSize26Mobile:Ii,FontSize26Tablet:Pi,FontSize26Print:$i,FontSize36Mobile:Fi,FontSize36Tablet:Li,FontSize36Print:Ai,FontSize48Mobile:Ei,FontSize48Tablet:Bi,FontSize48Print:Ri,FontSizeBase:hs,FontLineHeightBase:ps}),[]),q1=()=>E.useMemo(()=>({Mobile:{Size0:Ya,Size1:Xa,Size2:Ja,Size3:Qa,Size4:ts,Size5:rs,Size6:as,Size7:os,Size8:cs,Size9:ds},Tablet:{Size0:qa,Size1:Ka,Size2:Za,Size3:es,Size4:ns,Size5:is,Size6:ss,Size7:ls,Size8:us,Size9:fs},SpacingResponsive0Mobile:Ya,SpacingResponsive0Tablet:qa,SpacingResponsive1Mobile:Xa,SpacingResponsive1Tablet:Ka,SpacingResponsive2Mobile:Ja,SpacingResponsive2Tablet:Za,SpacingResponsive3Mobile:Qa,SpacingResponsive3Tablet:es,SpacingResponsive4Mobile:ts,SpacingResponsive4Tablet:ns,SpacingResponsive5Mobile:rs,SpacingResponsive5Tablet:is,SpacingResponsive6Mobile:as,SpacingResponsive6Tablet:ss,SpacingResponsive7Mobile:os,SpacingResponsive7Tablet:ls,SpacingResponsive8Mobile:cs,SpacingResponsive8Tablet:us,SpacingResponsive9Mobile:ds,SpacingResponsive9Tablet:fs}),[]),X1=()=>E.useMemo(()=>({ButtonSpacingPaddingVerticalMobile:fl,ButtonSpacingPaddingHorizontalMobile:hl,ButtonSpacingPaddingVerticalDesktop:pl,ButtonSpacingPaddingHorizontalDesktop:ml,CardSpacingPaddingMobile:gl,CardSpacingPaddingDesktop:bl,CardSpacingHeadingMargin:yl,FormSpacingInputPadding:_l,FormSpacingInputMinHeight:vl,FormSpacingCheckboxSize:xl,FormSpacingCheckboxLabelPadding:wl}),[]),K1=()=>E.useMemo(()=>({xl:an,l:sn,m:on,s:ln,xs:cn}),[]),J1=()=>E.useMemo(()=>({body:un,bodyLarge:dn,bodySmall:fn,ledeText:hn,ledeTextSmall:pn}),[]),Z1=()=>E.useMemo(()=>({headings:{xl:an,l:sn,m:on,s:ln,xs:cn},paragraphs:{body:un,bodyLarge:dn,bodySmall:fn,ledeText:hn,ledeTextSmall:pn},fonts:{family:{base:hi,fallback:pi,print:mi},weight:{normal:gi,bold:bi,light:yi},sizes:{mobile:{size14:_i,size16:wi,size19:ki,size22:ji,size26:Ii,size36:Fi,size48:Ei},tablet:{size14:vi,size16:Si,size19:Ti,size22:Di,size26:Pi,size36:Li,size48:Bi},print:{size14:xi,size16:Ci,size19:Ni,size22:Mi,size26:$i,size36:Ai,size48:Ri}}}}),[]);function Q1(e={}){const{initialLayout:t=void 0,fallbackLayout:n="two-column"}=e,[r,i]=X.useState(t),a=X.useCallback(()=>i("three-column"),[]),s=X.useCallback(()=>i(u=>u==="three-column"?n:u),[n]),l=X.useCallback(()=>i(u=>u==="three-column"?n:"three-column"),[n]);return{forceLayout:r,setLayout:i,drillIn:a,drillOut:s,toggle:l,isDrilledIn:r==="three-column"}}const $l={fontPath:"https://assets.nhs.uk/fonts/",includeFontFace:!0,useFallbacks:!0,fontWeights:[400,600]},jt={normal:{woff2:"FrutigerLTW01-55Roman.woff2",woff:"FrutigerLTW01-55Roman.woff",ttf:"FrutigerLTW01-55Roman.ttf",eot:"FrutigerLTW01-55Roman.eot"},bold:{woff2:"FrutigerLTW01-65Bold.woff2",woff:"FrutigerLTW01-65Bold.woff",ttf:"FrutigerLTW01-65Bold.ttf",eot:"FrutigerLTW01-65Bold.eot"}};function ew(e={}){const{fontPath:t,fontWeights:n}={...$l,...e},r=[];return n?.includes(400)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 400;
  src: url("${t}${jt.normal.eot}?#iefix") format("eot"),
       url("${t}${jt.normal.woff2}") format("woff2"),
       url("${t}${jt.normal.woff}") format("woff"),
       url("${t}${jt.normal.ttf}") format("truetype");
  src: url("${t}${jt.normal.eot}");
}`),n?.includes(600)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 600;
  src: url("${t}${jt.bold.eot}?#iefix") format("eot"),
       url("${t}${jt.bold.woff2}") format("woff2"),
       url("${t}${jt.bold.woff}") format("woff"),
       url("${t}${jt.bold.ttf}") format("truetype");
  src: url("${t}${jt.bold.eot}");
}`),r.join(`
`)}function tw(e={}){if(typeof document>"u")return;const{fontPath:t,fontWeights:n}={...$l,...e};[...n?.includes(400)?[{href:`${t}${jt.normal.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${jt.normal.woff}`,as:"font",type:"font/woff"}]:[],...n?.includes(600)?[{href:`${t}${jt.bold.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${jt.bold.woff}`,as:"font",type:"font/woff"}]:[]].forEach(i=>{const a=document.createElement("link");a.rel="preload",a.href=i.href,a.as=i.as,a.type=i.type,a.crossOrigin="anonymous",document.head.appendChild(a)})}const nw='"Frutiger W01", Arial, Helvetica, sans-serif',rw="Arial, Helvetica, sans-serif";async function iw(){if(typeof document>"u"||!document.fonts)return!1;try{return await document.fonts.load('1em "Frutiger W01"'),document.fonts.check('1em "Frutiger W01"')}catch{return!1}}function Nn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lg(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var At={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ir={duration:.5,overwrite:!1,delay:0},Fl,xt,qe,Wt=1e8,ze=1/Wt,Ll=Math.PI*2,aw=Ll/4,sw=0,cg=Math.sqrt,ow=Math.cos,lw=Math.sin,gt=function(t){return typeof t=="string"},tt=function(t){return typeof t=="function"},jn=function(t){return typeof t=="number"},Al=function(t){return typeof t>"u"},mn=function(t){return typeof t=="object"},It=function(t){return t!==!1},El=function(){return typeof window<"u"},ms=function(t){return tt(t)||gt(t)},ug=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},kt=Array.isArray,Bl=/(?:-?\.?\d|\.)+/gi,dg=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Pr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Rl=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,fg=/[+-]=-?[.\d]+/,hg=/[^,'"\[\]\s]+/gi,cw=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Je,gn,Hl,Ol,Et={},gs={},pg,mg=function(t){return(gs=Fr(t,Et))&&Ft},zl=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},Hi=function(t,n){return!n&&console.warn(t)},gg=function(t,n){return t&&(Et[t]=n)&&gs&&(gs[t]=n)||Et},Oi=function(){return 0},uw={suppressEvents:!0,isStart:!0,kill:!1},bs={suppressEvents:!0,kill:!1},dw={suppressEvents:!0},Ul={},Rn=[],Wl={},bg,Bt={},Vl={},yg=30,ys=[],Gl="",Yl=function(t){var n=t[0],r,i;if(mn(n)||tt(n)||(t=[t]),!(r=(n._gsap||{}).harness)){for(i=ys.length;i--&&!ys[i].targetTest(n););r=ys[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Yg(t[i],r)))||t.splice(i,1);return t},sr=function(t){return t._gsap||Yl(Gt(t))[0]._gsap},_g=function(t,n,r){return(r=t[n])&&tt(r)?t[n]():Al(r)&&t.getAttribute&&t.getAttribute(n)||r},Pt=function(t,n){return(t=t.split(",")).forEach(n)||t},rt=function(t){return Math.round(t*1e5)/1e5||0},lt=function(t){return Math.round(t*1e7)/1e7||0},$r=function(t,n){var r=n.charAt(0),i=parseFloat(n.substr(2));return t=parseFloat(t),r==="+"?t+i:r==="-"?t-i:r==="*"?t*i:t/i},fw=function(t,n){for(var r=n.length,i=0;t.indexOf(n[i])<0&&++i<r;);return i<r},_s=function(){var t=Rn.length,n=Rn.slice(0),r,i;for(Wl={},Rn.length=0,r=0;r<t;r++)i=n[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},ql=function(t){return!!(t._initted||t._startAt||t.add)},vg=function(t,n,r,i){Rn.length&&!xt&&_s(),t.render(n,r,!!(xt&&n<0&&ql(t))),Rn.length&&!xt&&_s()},xg=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(hg).length<2?n:gt(t)?t.trim():t},wg=function(t){return t},Rt=function(t,n){for(var r in n)r in t||(t[r]=n[r]);return t},hw=function(t){return function(n,r){for(var i in r)i in n||i==="duration"&&t||i==="ease"||(n[i]=r[i])}},Fr=function(t,n){for(var r in n)t[r]=n[r];return t},Sg=function e(t,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(t[r]=mn(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},vs=function(t,n){var r={},i;for(i in t)i in n||(r[i]=t[i]);return r},zi=function(t){var n=t.parent||Je,r=t.keyframes?hw(kt(t.keyframes)):Rt;if(It(t.inherit))for(;n;)r(t,n.vars.defaults),n=n.parent||n._dp;return t},pw=function(t,n){for(var r=t.length,i=r===n.length;i&&r--&&t[r]===n[r];);return r<0},Cg=function(t,n,r,i,a){var s=t[i],l;if(a)for(l=n[a];s&&s[a]>l;)s=s._prev;return s?(n._next=s._next,s._next=n):(n._next=t[r],t[r]=n),n._next?n._next._prev=n:t[i]=n,n._prev=s,n.parent=n._dp=t,n},xs=function(t,n,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var a=n._prev,s=n._next;a?a._next=s:t[r]===n&&(t[r]=s),s?s._prev=a:t[i]===n&&(t[i]=a),n._next=n._prev=n.parent=null},Hn=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},or=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},mw=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},Xl=function(t,n,r,i){return t._startAt&&(xt?t._startAt.revert(bs):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,i))},gw=function e(t){return!t||t._ts&&e(t.parent)},kg=function(t){return t._repeat?Lr(t._tTime,t=t.duration()+t._rDelay)*t:0},Lr=function(t,n){var r=Math.floor(t=lt(t/n));return t&&r===t?r-1:r},ws=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Ss=function(t){return t._end=lt(t._start+(t._tDur/Math.abs(t._ts||t._rts||ze)||0))},Cs=function(t,n){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=lt(r._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),Ss(t),r._dirty||or(r,t)),t},Tg=function(t,n){var r;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(r=ws(t.rawTime(),n),(!n._dur||Wi(0,n.totalDuration(),r)-n._tTime>ze)&&n.render(r,!0)),or(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-ze}},bn=function(t,n,r,i){return n.parent&&Hn(n),n._start=lt((jn(r)?r:r||t!==Je?Vt(t,r,n):t._time)+n._delay),n._end=lt(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),Cg(t,n,"_first","_last",t._sort?"_start":0),Kl(n)||(t._recent=n),i||Tg(t,n),t._ts<0&&Cs(t,t._tTime),t},Ng=function(t,n){return(Et.ScrollTrigger||zl("scrollTrigger",n))&&Et.ScrollTrigger.create(n,t)},jg=function(t,n,r,i,a){if(ac(t,n,a),!t._initted)return 1;if(!r&&t._pt&&!xt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&bg!==Ot.frame)return Rn.push(t),t._lazy=[a,i],1},bw=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Kl=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},yw=function(t,n,r,i){var a=t.ratio,s=n<0||!n&&(!t._start&&bw(t)&&!(!t._initted&&Kl(t))||(t._ts<0||t._dp._ts<0)&&!Kl(t))?0:1,l=t._rDelay,u=0,c,d,f;if(l&&t._repeat&&(u=Wi(0,t._tDur,n),d=Lr(u,l),t._yoyo&&d&1&&(s=1-s),d!==Lr(t._tTime,l)&&(a=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==a||xt||i||t._zTime===ze||!n&&t._zTime){if(!t._initted&&jg(t,n,i,r,u))return;for(f=t._zTime,t._zTime=n||(r?ze:0),r||(r=n&&!f),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=u,c=t._pt;c;)c.r(s,c.d),c=c._next;n<0&&Xl(t,n,r,!0),t._onUpdate&&!r&&Ht(t,"onUpdate"),u&&t._repeat&&!r&&t.parent&&Ht(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===s&&(s&&Hn(t,1),!r&&!xt&&(Ht(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},_w=function(t,n,r){var i;if(r>n)for(i=t._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>n)return i;i=i._next}else for(i=t._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<n)return i;i=i._prev}},Ar=function(t,n,r,i){var a=t._repeat,s=lt(n)||0,l=t._tTime/t._tDur;return l&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=a?a<0?1e10:lt(s*(a+1)+t._rDelay*a):s,l>0&&!i&&Cs(t,t._tTime=t._tDur*l),t.parent&&Ss(t),r||or(t.parent,t),t},Dg=function(t){return t instanceof wt?or(t):Ar(t,t._dur)},vw={_start:0,endTime:Oi,totalDuration:Oi},Vt=function e(t,n,r){var i=t.labels,a=t._recent||vw,s=t.duration()>=Wt?a.endTime(!1):t._dur,l,u,c;return gt(n)&&(isNaN(n)||n in i)?(u=n.charAt(0),c=n.substr(-1)==="%",l=n.indexOf("="),u==="<"||u===">"?(l>=0&&(n=n.replace(/=/,"")),(u==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0)*(c?(l<0?a:r).totalDuration()/100:1)):l<0?(n in i||(i[n]=s),i[n]):(u=parseFloat(n.charAt(l-1)+n.substr(l+1)),c&&r&&(u=u/100*(kt(r)?r[0]:r).totalDuration()),l>1?e(t,n.substr(0,l-1),r)+u:s+u)):n==null?s:+n},Ui=function(t,n,r){var i=jn(n[1]),a=(i?2:1)+(t<2?0:1),s=n[a],l,u;if(i&&(s.duration=n[1]),s.parent=r,t){for(l=s,u=r;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=It(u.vars.inherit)&&u.parent;s.immediateRender=It(l.immediateRender),t<2?s.runBackwards=1:s.startAt=n[a-1]}return new it(n[0],s,n[a+1])},On=function(t,n){return t||t===0?n(t):n},Wi=function(t,n,r){return r<t?t:r>n?n:r},Tt=function(t,n){return!gt(t)||!(n=cw.exec(t))?"":n[1]},xw=function(t,n,r){return On(r,function(i){return Wi(t,n,i)})},Jl=[].slice,Mg=function(t,n){return t&&mn(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&mn(t[0]))&&!t.nodeType&&t!==gn},ww=function(t,n,r){return r===void 0&&(r=[]),t.forEach(function(i){var a;return gt(i)&&!n||Mg(i,1)?(a=r).push.apply(a,Gt(i)):r.push(i)})||r},Gt=function(t,n,r){return qe&&!n&&qe.selector?qe.selector(t):gt(t)&&!r&&(Hl||!Br())?Jl.call((n||Ol).querySelectorAll(t),0):kt(t)?ww(t,r):Mg(t)?Jl.call(t,0):t?[t]:[]},Zl=function(t){return t=Gt(t)[0]||Hi("Invalid scope")||{},function(n){var r=t.current||t.nativeElement||t;return Gt(n,r.querySelectorAll?r:r===t?Hi("Invalid scope")||Ol.createElement("div"):t)}},Ig=function(t){return t.sort(function(){return .5-Math.random()})},Pg=function(t){if(tt(t))return t;var n=mn(t)?t:{each:t},r=lr(n.ease),i=n.from||0,a=parseFloat(n.base)||0,s={},l=i>0&&i<1,u=isNaN(i)||l,c=n.axis,d=i,f=i;return gt(i)?d=f={center:.5,edges:.5,end:1}[i]||0:!l&&u&&(d=i[0],f=i[1]),function(p,g,b){var h=(b||n).length,m=s[h],y,k,N,S,x,M,j,C,v;if(!m){if(v=n.grid==="auto"?0:(n.grid||[1,Wt])[1],!v){for(j=-Wt;j<(j=b[v++].getBoundingClientRect().left)&&v<h;);v<h&&v--}for(m=s[h]=[],y=u?Math.min(v,h)*d-.5:i%v,k=v===Wt?0:u?h*f/v-.5:i/v|0,j=0,C=Wt,M=0;M<h;M++)N=M%v-y,S=k-(M/v|0),m[M]=x=c?Math.abs(c==="y"?S:N):cg(N*N+S*S),x>j&&(j=x),x<C&&(C=x);i==="random"&&Ig(m),m.max=j-C,m.min=C,m.v=h=(parseFloat(n.amount)||parseFloat(n.each)*(v>h?h-1:c?c==="y"?h/v:v:Math.max(v,h/v))||0)*(i==="edges"?-1:1),m.b=h<0?a-h:a,m.u=Tt(n.amount||n.each)||0,r=r&&h<0?Wg(r):r}return h=(m[p]-m.min)/m.max||0,lt(m.b+(r?r(h):h)*m.v)+m.u}},Ql=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var i=lt(Math.round(parseFloat(r)/t)*t*n);return(i-i%1)/n+(jn(r)?0:Tt(r))}},$g=function(t,n){var r=kt(t),i,a;return!r&&mn(t)&&(i=r=t.radius||Wt,t.values?(t=Gt(t.values),(a=!jn(t[0]))&&(i*=i)):t=Ql(t.increment)),On(n,r?tt(t)?function(s){return a=t(s),Math.abs(a-s)<=i?a:s}:function(s){for(var l=parseFloat(a?s.x:s),u=parseFloat(a?s.y:0),c=Wt,d=0,f=t.length,p,g;f--;)a?(p=t[f].x-l,g=t[f].y-u,p=p*p+g*g):p=Math.abs(t[f]-l),p<c&&(c=p,d=f);return d=!i||c<=i?t[d]:s,a||d===s||jn(s)?d:d+Tt(s)}:Ql(t))},Fg=function(t,n,r,i){return On(kt(t)?!n:r===!0?!!(r=0):!i,function(){return kt(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(n-t+r*.99))/r)*r*i)/i})},Sw=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduce(function(a,s){return s(a)},i)}},Cw=function(t,n){return function(r){return t(parseFloat(r))+(n||Tt(r))}},kw=function(t,n,r){return Ag(t,n,0,1,r)},Lg=function(t,n,r){return On(r,function(i){return t[~~n(i)]})},Tw=function e(t,n,r){var i=n-t;return kt(t)?Lg(t,e(0,t.length),n):On(r,function(a){return(i+(a-t)%i)%i+t})},Nw=function e(t,n,r){var i=n-t,a=i*2;return kt(t)?Lg(t,e(0,t.length-1),n):On(r,function(s){return s=(a+(s-t)%a)%a||0,t+(s>i?a-s:s)})},Vi=function(t){for(var n=0,r="",i,a,s,l;~(i=t.indexOf("random(",n));)s=t.indexOf(")",i),l=t.charAt(i+7)==="[",a=t.substr(i+7,s-i-7).match(l?hg:Bl),r+=t.substr(n,i-n)+Fg(l?a:+a[0],l?0:+a[1],+a[2]||1e-5),n=s+1;return r+t.substr(n,t.length-n)},Ag=function(t,n,r,i,a){var s=n-t,l=i-r;return On(a,function(u){return r+((u-t)/s*l||0)})},jw=function e(t,n,r,i){var a=isNaN(t+n)?0:function(g){return(1-g)*t+g*n};if(!a){var s=gt(t),l={},u,c,d,f,p;if(r===!0&&(i=1)&&(r=null),s)t={p:t},n={p:n};else if(kt(t)&&!kt(n)){for(d=[],f=t.length,p=f-2,c=1;c<f;c++)d.push(e(t[c-1],t[c]));f--,a=function(b){b*=f;var h=Math.min(p,~~b);return d[h](b-h)},r=n}else i||(t=Fr(kt(t)?[]:{},t));if(!d){for(u in n)rc.call(l,t,u,"get",n[u]);a=function(b){return lc(b,l)||(s?t.p:t)}}}return On(r,a)},Eg=function(t,n,r){var i=t.labels,a=Wt,s,l,u;for(s in i)l=i[s]-n,l<0==!!r&&l&&a>(l=Math.abs(l))&&(u=s,a=l);return u},Ht=function(t,n,r){var i=t.vars,a=i[n],s=qe,l=t._ctx,u,c,d;if(a)return u=i[n+"Params"],c=i.callbackScope||t,r&&Rn.length&&_s(),l&&(qe=l),d=u?a.apply(c,u):a.call(c),qe=s,d},Gi=function(t){return Hn(t),t.scrollTrigger&&t.scrollTrigger.kill(!!xt),t.progress()<1&&Ht(t,"onInterrupt"),t},Er,Bg=[],Rg=function(t){if(t)if(t=!t.name&&t.default||t,El()||t.headless){var n=t.name,r=tt(t),i=n&&!r&&t.init?function(){this._props=[]}:t,a={init:Oi,render:lc,add:rc,kill:Ww,modifier:Uw,rawVars:0},s={targetTest:0,get:0,getSetter:oc,aliases:{},register:0};if(Br(),t!==i){if(Bt[n])return;Rt(i,Rt(vs(t,a),s)),Fr(i.prototype,Fr(a,vs(t,s))),Bt[i.prop=n]=i,t.targetTest&&(ys.push(i),Ul[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}gg(n,i),t.register&&t.register(Ft,i,$t)}else Bg.push(t)},Ue=255,Yi={aqua:[0,Ue,Ue],lime:[0,Ue,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ue],navy:[0,0,128],white:[Ue,Ue,Ue],olive:[128,128,0],yellow:[Ue,Ue,0],orange:[Ue,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ue,0,0],pink:[Ue,192,203],cyan:[0,Ue,Ue],transparent:[Ue,Ue,Ue,0]},ec=function(t,n,r){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(r-n)*t*6:t<.5?r:t*3<2?n+(r-n)*(2/3-t)*6:n)*Ue+.5|0},Hg=function(t,n,r){var i=t?jn(t)?[t>>16,t>>8&Ue,t&Ue]:0:Yi.black,a,s,l,u,c,d,f,p,g,b;if(!i){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Yi[t])i=Yi[t];else if(t.charAt(0)==="#"){if(t.length<6&&(a=t.charAt(1),s=t.charAt(2),l=t.charAt(3),t="#"+a+a+s+s+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return i=parseInt(t.substr(1,6),16),[i>>16,i>>8&Ue,i&Ue,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),i=[t>>16,t>>8&Ue,t&Ue]}else if(t.substr(0,3)==="hsl"){if(i=b=t.match(Bl),!n)u=+i[0]%360/360,c=+i[1]/100,d=+i[2]/100,s=d<=.5?d*(c+1):d+c-d*c,a=d*2-s,i.length>3&&(i[3]*=1),i[0]=ec(u+1/3,a,s),i[1]=ec(u,a,s),i[2]=ec(u-1/3,a,s);else if(~t.indexOf("="))return i=t.match(dg),r&&i.length<4&&(i[3]=1),i}else i=t.match(Bl)||Yi.transparent;i=i.map(Number)}return n&&!b&&(a=i[0]/Ue,s=i[1]/Ue,l=i[2]/Ue,f=Math.max(a,s,l),p=Math.min(a,s,l),d=(f+p)/2,f===p?u=c=0:(g=f-p,c=d>.5?g/(2-f-p):g/(f+p),u=f===a?(s-l)/g+(s<l?6:0):f===s?(l-a)/g+2:(a-s)/g+4,u*=60),i[0]=~~(u+.5),i[1]=~~(c*100+.5),i[2]=~~(d*100+.5)),r&&i.length<4&&(i[3]=1),i},Og=function(t){var n=[],r=[],i=-1;return t.split(zn).forEach(function(a){var s=a.match(Pr)||[];n.push.apply(n,s),r.push(i+=s.length+1)}),n.c=r,n},zg=function(t,n,r){var i="",a=(t+i).match(zn),s=n?"hsla(":"rgba(",l=0,u,c,d,f;if(!a)return t;if(a=a.map(function(p){return(p=Hg(p,n,1))&&s+(n?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),r&&(d=Og(t),u=r.c,u.join(i)!==d.c.join(i)))for(c=t.replace(zn,"1").split(Pr),f=c.length-1;l<f;l++)i+=c[l]+(~u.indexOf(l)?a.shift()||s+"0,0,0,0)":(d.length?d:a.length?a:r).shift());if(!c)for(c=t.split(zn),f=c.length-1;l<f;l++)i+=c[l]+a[l];return i+c[f]},zn=(function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Yi)e+="|"+t+"\\b";return new RegExp(e+")","gi")})(),Dw=/hsl[a]?\(/,Ug=function(t){var n=t.join(" "),r;if(zn.lastIndex=0,zn.test(n))return r=Dw.test(n),t[1]=zg(t[1],r),t[0]=zg(t[0],r,Og(t[1])),!0},qi,Ot=(function(){var e=Date.now,t=500,n=33,r=e(),i=r,a=1e3/240,s=a,l=[],u,c,d,f,p,g,b=function h(m){var y=e()-i,k=m===!0,N,S,x,M;if((y>t||y<0)&&(r+=y-n),i+=y,x=i-r,N=x-s,(N>0||k)&&(M=++f.frame,p=x-f.time*1e3,f.time=x=x/1e3,s+=N+(N>=a?4:a-N),S=1),k||(u=c(h)),S)for(g=0;g<l.length;g++)l[g](x,p,M,m)};return f={time:0,frame:0,tick:function(){b(!0)},deltaRatio:function(m){return p/(1e3/(m||60))},wake:function(){pg&&(!Hl&&El()&&(gn=Hl=window,Ol=gn.document||{},Et.gsap=Ft,(gn.gsapVersions||(gn.gsapVersions=[])).push(Ft.version),mg(gs||gn.GreenSockGlobals||!gn.gsap&&gn||{}),Bg.forEach(Rg)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&f.sleep(),c=d||function(m){return setTimeout(m,s-f.time*1e3+1|0)},qi=1,b(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(u),qi=0,c=Oi},lagSmoothing:function(m,y){t=m||1/0,n=Math.min(y||33,t)},fps:function(m){a=1e3/(m||240),s=f.time*1e3+a},add:function(m,y,k){var N=y?function(S,x,M,j){m(S,x,M,j),f.remove(N)}:m;return f.remove(m),l[k?"unshift":"push"](N),Br(),N},remove:function(m,y){~(y=l.indexOf(m))&&l.splice(y,1)&&g>=y&&g--},_listeners:l},f})(),Br=function(){return!qi&&Ot.wake()},Le={},Mw=/^[\d.\-M][\d.\-,\s]/,Iw=/["']/g,Pw=function(t){for(var n={},r=t.substr(1,t.length-3).split(":"),i=r[0],a=1,s=r.length,l,u,c;a<s;a++)u=r[a],l=a!==s-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),n[i]=isNaN(c)?c.replace(Iw,"").trim():+c,i=u.substr(l+1).trim();return n},$w=function(t){var n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n);return t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)},Fw=function(t){var n=(t+"").split("("),r=Le[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[Pw(n[1])]:$w(t).split(",").map(xg)):Le._CE&&Mw.test(t)?Le._CE("",t):r},Wg=function(t){return function(n){return 1-t(1-n)}},Vg=function e(t,n){for(var r=t._first,i;r;)r instanceof wt?e(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?e(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},lr=function(t,n){return t&&(tt(t)?t:Le[t]||Fw(t))||n},cr=function(t,n,r,i){r===void 0&&(r=function(u){return 1-n(1-u)}),i===void 0&&(i=function(u){return u<.5?n(u*2)/2:1-n((1-u)*2)/2});var a={easeIn:n,easeOut:r,easeInOut:i},s;return Pt(t,function(l){Le[l]=Et[l]=a,Le[s=l.toLowerCase()]=r;for(var u in a)Le[s+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=Le[l+"."+u]=a[u]}),a},Gg=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},tc=function e(t,n,r){var i=n>=1?n:1,a=(r||(t?.3:.45))/(n<1?n:1),s=a/Ll*(Math.asin(1/i)||0),l=function(d){return d===1?1:i*Math.pow(2,-10*d)*lw((d-s)*a)+1},u=t==="out"?l:t==="in"?function(c){return 1-l(1-c)}:Gg(l);return a=Ll/a,u.config=function(c,d){return e(t,c,d)},u},nc=function e(t,n){n===void 0&&(n=1.70158);var r=function(s){return s?--s*s*((n+1)*s+n)+1:0},i=t==="out"?r:t==="in"?function(a){return 1-r(1-a)}:Gg(r);return i.config=function(a){return e(t,a)},i};Pt("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;cr(e+",Power"+(n-1),t?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})}),Le.Linear.easeNone=Le.none=Le.Linear.easeIn,cr("Elastic",tc("in"),tc("out"),tc()),(function(e,t){var n=1/t,r=2*n,i=2.5*n,a=function(l){return l<n?e*l*l:l<r?e*Math.pow(l-1.5/t,2)+.75:l<i?e*(l-=2.25/t)*l+.9375:e*Math.pow(l-2.625/t,2)+.984375};cr("Bounce",function(s){return 1-a(1-s)},a)})(7.5625,2.75),cr("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),cr("Circ",function(e){return-(cg(1-e*e)-1)}),cr("Sine",function(e){return e===1?1:-ow(e*aw)+1}),cr("Back",nc("in"),nc("out"),nc()),Le.SteppedEase=Le.steps=Et.SteppedEase={config:function(t,n){t===void 0&&(t=1);var r=1/t,i=t+(n?0:1),a=n?1:0,s=1-ze;return function(l){return((i*Wi(0,s,l)|0)+a)*r}}},Ir.ease=Le["quad.out"],Pt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return Gl+=e+","+e+"Params,"});var Yg=function(t,n){this.id=sw++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:_g,this.set=n?n.getSetter:oc},Xi=(function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,Ar(this,+n.duration,1,1),this.data=n.data,qe&&(this._ctx=qe,qe.data.push(this)),qi||Ot.wake()}var t=e.prototype;return t.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},t.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},t.totalDuration=function(r){return arguments.length?(this._dirty=0,Ar(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(r,i){if(Br(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(Cs(this,r),!a._dp||a.parent||Tg(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&bn(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===ze||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),vg(this,r,i)),this},t.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+kg(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},t.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+kg(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(r,i){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*a,i):this._repeat?Lr(this._tTime,a)+1:1},t.timeScale=function(r,i){if(!arguments.length)return this._rts===-ze?0:this._rts;if(this._rts===r)return this;var a=this.parent&&this._ts?ws(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-ze?0:this._rts,this.totalTime(Wi(-Math.abs(this._delay),this.totalDuration(),a),i!==!1),Ss(this),mw(this)},t.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Br(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ze&&(this._tTime-=ze)))),this):this._ps},t.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&bn(i,this,r-this._delay),this}return this._start},t.endTime=function(r){return this._start+(It(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ws(i.rawTime(r),this):this._tTime:this._tTime},t.revert=function(r){r===void 0&&(r=dw);var i=xt;return xt=r,ql(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),xt=i,this},t.globalTime=function(r){for(var i=this,a=arguments.length?r:i.rawTime();i;)a=i._start+a/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):a},t.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Dg(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,Dg(this),i?this.time(i):this}return this._rDelay},t.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},t.seek=function(r,i){return this.totalTime(Vt(this,r),It(i))},t.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,It(i)),this._dur||(this._zTime=-ze),this},t.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},t.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},t.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-ze:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-ze,this},t.isActive=function(){var r=this.parent||this._dp,i=this._start,a;return!!(!r||this._ts&&this._initted&&r.isActive()&&(a=r.rawTime(!0))>=i&&a<this.endTime(!0)-ze)},t.eventCallback=function(r,i,a){var s=this.vars;return arguments.length>1?(i?(s[r]=i,a&&(s[r+"Params"]=a),r==="onUpdate"&&(this._onUpdate=i)):delete s[r],this):s[r]},t.then=function(r){var i=this;return new Promise(function(a){var s=tt(r)?r:wg,l=function(){var c=i.then;i.then=null,tt(s)&&(s=s(i))&&(s.then||s===i)&&(i.then=c),a(s),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?l():i._prom=l})},t.kill=function(){Gi(this)},e})();Rt(Xi.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ze,_prom:0,_ps:!1,_rts:1});var wt=(function(e){lg(t,e);function t(r,i){var a;return r===void 0&&(r={}),a=e.call(this,r)||this,a.labels={},a.smoothChildTiming=!!r.smoothChildTiming,a.autoRemoveChildren=!!r.autoRemoveChildren,a._sort=It(r.sortChildren),Je&&bn(r.parent||Je,Nn(a),i),r.reversed&&a.reverse(),r.paused&&a.paused(!0),r.scrollTrigger&&Ng(Nn(a),r.scrollTrigger),a}var n=t.prototype;return n.to=function(i,a,s){return Ui(0,arguments,this),this},n.from=function(i,a,s){return Ui(1,arguments,this),this},n.fromTo=function(i,a,s,l){return Ui(2,arguments,this),this},n.set=function(i,a,s){return a.duration=0,a.parent=this,zi(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new it(i,a,Vt(this,s),1),this},n.call=function(i,a,s){return bn(this,it.delayedCall(0,i,a),s)},n.staggerTo=function(i,a,s,l,u,c,d){return s.duration=a,s.stagger=s.stagger||l,s.onComplete=c,s.onCompleteParams=d,s.parent=this,new it(i,s,Vt(this,u)),this},n.staggerFrom=function(i,a,s,l,u,c,d){return s.runBackwards=1,zi(s).immediateRender=It(s.immediateRender),this.staggerTo(i,a,s,l,u,c,d)},n.staggerFromTo=function(i,a,s,l,u,c,d,f){return l.startAt=s,zi(l).immediateRender=It(l.immediateRender),this.staggerTo(i,a,l,u,c,d,f)},n.render=function(i,a,s){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=i<=0?0:lt(i),f=this._zTime<0!=i<0&&(this._initted||!c),p,g,b,h,m,y,k,N,S,x,M,j;if(this!==Je&&d>u&&i>=0&&(d=u),d!==this._tTime||s||f){if(l!==this._time&&c&&(d+=this._time-l,i+=this._time-l),p=d,S=this._start,N=this._ts,y=!N,f&&(c||(l=this._zTime),(i||!a)&&(this._zTime=i)),this._repeat){if(M=this._yoyo,m=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(m*100+i,a,s);if(p=lt(d%m),d===u?(h=this._repeat,p=c):(x=lt(d/m),h=~~x,h&&h===x&&(p=c,h--),p>c&&(p=c)),x=Lr(this._tTime,m),!l&&this._tTime&&x!==h&&this._tTime-x*m-this._dur<=0&&(x=h),M&&h&1&&(p=c-p,j=1),h!==x&&!this._lock){var C=M&&x&1,v=C===(M&&h&1);if(h<x&&(C=!C),l=C?0:d%c?c:d,this._lock=1,this.render(l||(j?0:lt(h*m)),a,!c)._lock=0,this._tTime=d,!a&&this.parent&&Ht(this,"onRepeat"),this.vars.repeatRefresh&&!j&&(this.invalidate()._lock=1),l&&l!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,v&&(this._lock=2,l=C?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!j&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;Vg(this,j)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(k=_w(this,lt(l),lt(p)),k&&(d-=p-(p=k._start))),this._tTime=d,this._time=p,this._act=!N,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,l=0),!l&&d&&!a&&!x&&(Ht(this,"onStart"),this._tTime!==d))return this;if(p>=l&&i>=0)for(g=this._first;g;){if(b=g._next,(g._act||p>=g._start)&&g._ts&&k!==g){if(g.parent!==this)return this.render(i,a,s);if(g.render(g._ts>0?(p-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(p-g._start)*g._ts,a,s),p!==this._time||!this._ts&&!y){k=0,b&&(d+=this._zTime=-ze);break}}g=b}else{g=this._last;for(var $=i<0?i:p;g;){if(b=g._prev,(g._act||$<=g._end)&&g._ts&&k!==g){if(g.parent!==this)return this.render(i,a,s);if(g.render(g._ts>0?($-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+($-g._start)*g._ts,a,s||xt&&ql(g)),p!==this._time||!this._ts&&!y){k=0,b&&(d+=this._zTime=$?-ze:ze);break}}g=b}}if(k&&!a&&(this.pause(),k.render(p>=l?0:-ze)._zTime=p>=l?1:-1,this._ts))return this._start=S,Ss(this),this.render(i,a,s);this._onUpdate&&!a&&Ht(this,"onUpdate",!0),(d===u&&this._tTime>=this.totalDuration()||!d&&l)&&(S===this._start||Math.abs(N)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(d===u&&this._ts>0||!d&&this._ts<0)&&Hn(this,1),!a&&!(i<0&&!l)&&(d||l||!u)&&(Ht(this,d===u&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(i,a){var s=this;if(jn(a)||(a=Vt(this,a,i)),!(i instanceof Xi)){if(kt(i))return i.forEach(function(l){return s.add(l,a)}),this;if(gt(i))return this.addLabel(i,a);if(tt(i))i=it.delayedCall(0,i);else return this}return this!==i?bn(this,i,a):this},n.getChildren=function(i,a,s,l){i===void 0&&(i=!0),a===void 0&&(a=!0),s===void 0&&(s=!0),l===void 0&&(l=-Wt);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof it?a&&u.push(c):(s&&u.push(c),i&&u.push.apply(u,c.getChildren(!0,a,s)))),c=c._next;return u},n.getById=function(i){for(var a=this.getChildren(1,1,1),s=a.length;s--;)if(a[s].vars.id===i)return a[s]},n.remove=function(i){return gt(i)?this.removeLabel(i):tt(i)?this.killTweensOf(i):(i.parent===this&&xs(this,i),i===this._recent&&(this._recent=this._last),or(this))},n.totalTime=function(i,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=lt(Ot.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),e.prototype.totalTime.call(this,i,a),this._forcing=0,this):this._tTime},n.addLabel=function(i,a){return this.labels[i]=Vt(this,a),this},n.removeLabel=function(i){return delete this.labels[i],this},n.addPause=function(i,a,s){var l=it.delayedCall(0,a||Oi,s);return l.data="isPause",this._hasPause=1,bn(this,l,Vt(this,i))},n.removePause=function(i){var a=this._first;for(i=Vt(this,i);a;)a._start===i&&a.data==="isPause"&&Hn(a),a=a._next},n.killTweensOf=function(i,a,s){for(var l=this.getTweensOf(i,s),u=l.length;u--;)Un!==l[u]&&l[u].kill(i,a);return this},n.getTweensOf=function(i,a){for(var s=[],l=Gt(i),u=this._first,c=jn(a),d;u;)u instanceof it?fw(u._targets,l)&&(c?(!Un||u._initted&&u._ts)&&u.globalTime(0)<=a&&u.globalTime(u.totalDuration())>a:!a||u.isActive())&&s.push(u):(d=u.getTweensOf(l,a)).length&&s.push.apply(s,d),u=u._next;return s},n.tweenTo=function(i,a){a=a||{};var s=this,l=Vt(s,i),u=a,c=u.startAt,d=u.onStart,f=u.onStartParams,p=u.immediateRender,g,b=it.to(s,Rt({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:a.duration||Math.abs((l-(c&&"time"in c?c.time:s._time))/s.timeScale())||ze,onStart:function(){if(s.pause(),!g){var m=a.duration||Math.abs((l-(c&&"time"in c?c.time:s._time))/s.timeScale());b._dur!==m&&Ar(b,m,0,1).render(b._time,!0,!0),g=1}d&&d.apply(b,f||[])}},a));return p?b.render(0):b},n.tweenFromTo=function(i,a,s){return this.tweenTo(a,Rt({startAt:{time:Vt(this,i)}},s))},n.recent=function(){return this._recent},n.nextLabel=function(i){return i===void 0&&(i=this._time),Eg(this,Vt(this,i))},n.previousLabel=function(i){return i===void 0&&(i=this._time),Eg(this,Vt(this,i),1)},n.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+ze)},n.shiftChildren=function(i,a,s){s===void 0&&(s=0);for(var l=this._first,u=this.labels,c;l;)l._start>=s&&(l._start+=i,l._end+=i),l=l._next;if(a)for(c in u)u[c]>=s&&(u[c]+=i);return or(this)},n.invalidate=function(i){var a=this._first;for(this._lock=0;a;)a.invalidate(i),a=a._next;return e.prototype.invalidate.call(this,i)},n.clear=function(i){i===void 0&&(i=!0);for(var a=this._first,s;a;)s=a._next,this.remove(a),a=s;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),or(this)},n.totalDuration=function(i){var a=0,s=this,l=s._last,u=Wt,c,d,f;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-i:i));if(s._dirty){for(f=s.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>u&&s._sort&&l._ts&&!s._lock?(s._lock=1,bn(s,l,d-l._delay,1)._lock=0):u=d,d<0&&l._ts&&(a-=d,(!f&&!s._dp||f&&f.smoothChildTiming)&&(s._start+=d/s._ts,s._time-=d,s._tTime-=d),s.shiftChildren(-d,!1,-1/0),u=0),l._end>a&&l._ts&&(a=l._end),l=c;Ar(s,s===Je&&s._time>a?s._time:a,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(i){if(Je._ts&&(vg(Je,ws(i,Je)),bg=Ot.frame),Ot.frame>=yg){yg+=At.autoSleep||120;var a=Je._first;if((!a||!a._ts)&&At.autoSleep&&Ot._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||Ot.sleep()}}},t})(Xi);Rt(wt.prototype,{_lock:0,_hasPause:0,_forcing:0});var Lw=function(t,n,r,i,a,s,l){var u=new $t(this._pt,t,n,0,1,Qg,null,a),c=0,d=0,f,p,g,b,h,m,y,k;for(u.b=r,u.e=i,r+="",i+="",(y=~i.indexOf("random("))&&(i=Vi(i)),s&&(k=[r,i],s(k,t,n),r=k[0],i=k[1]),p=r.match(Rl)||[];f=Rl.exec(i);)b=f[0],h=i.substring(c,f.index),g?g=(g+1)%5:h.substr(-5)==="rgba("&&(g=1),b!==p[d++]&&(m=parseFloat(p[d-1])||0,u._pt={_next:u._pt,p:h||d===1?h:",",s:m,c:b.charAt(1)==="="?$r(m,b)-m:parseFloat(b)-m,m:g&&g<4?Math.round:0},c=Rl.lastIndex);return u.c=c<i.length?i.substring(c,i.length):"",u.fp=l,(fg.test(i)||y)&&(u.e=0),this._pt=u,u},rc=function(t,n,r,i,a,s,l,u,c,d){tt(i)&&(i=i(a||0,t,s));var f=t[n],p=r!=="get"?r:tt(f)?c?t[n.indexOf("set")||!tt(t["get"+n.substr(3)])?n:"get"+n.substr(3)](c):t[n]():f,g=tt(f)?c?Hw:Jg:sc,b;if(gt(i)&&(~i.indexOf("random(")&&(i=Vi(i)),i.charAt(1)==="="&&(b=$r(p,i)+(Tt(p)||0),(b||b===0)&&(i=b))),!d||p!==i||ic)return!isNaN(p*i)&&i!==""?(b=new $t(this._pt,t,n,+p||0,i-(p||0),typeof f=="boolean"?zw:Zg,0,g),c&&(b.fp=c),l&&b.modifier(l,this,t),this._pt=b):(!f&&!(n in t)&&zl(n,i),Lw.call(this,t,n,p,i,g,u||At.stringFilter,c))},Aw=function(t,n,r,i,a){if(tt(t)&&(t=Ki(t,a,n,r,i)),!mn(t)||t.style&&t.nodeType||kt(t)||ug(t))return gt(t)?Ki(t,a,n,r,i):t;var s={},l;for(l in t)s[l]=Ki(t[l],a,n,r,i);return s},qg=function(t,n,r,i,a,s){var l,u,c,d;if(Bt[t]&&(l=new Bt[t]).init(a,l.rawVars?n[t]:Aw(n[t],i,a,s,r),r,i,s)!==!1&&(r._pt=u=new $t(r._pt,a,t,0,1,l.render,l,0,l.priority),r!==Er))for(c=r._ptLookup[r._targets.indexOf(a)],d=l._props.length;d--;)c[l._props[d]]=u;return l},Un,ic,ac=function e(t,n,r){var i=t.vars,a=i.ease,s=i.startAt,l=i.immediateRender,u=i.lazy,c=i.onUpdate,d=i.runBackwards,f=i.yoyoEase,p=i.keyframes,g=i.autoRevert,b=t._dur,h=t._startAt,m=t._targets,y=t.parent,k=y&&y.data==="nested"?y.vars.targets:m,N=t._overwrite==="auto"&&!Fl,S=t.timeline,x,M,j,C,v,$,T,w,L,P,D,F,A;if(S&&(!p||!a)&&(a="none"),t._ease=lr(a,Ir.ease),t._yEase=f?Wg(lr(f===!0?a:f,Ir.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!S&&!!i.runBackwards,!S||p&&!i.stagger){if(w=m[0]?sr(m[0]).harness:0,F=w&&i[w.prop],x=vs(i,Ul),h&&(h._zTime<0&&h.progress(1),n<0&&d&&l&&!g?h.render(-1,!0):h.revert(d&&b?bs:uw),h._lazy=0),s){if(Hn(t._startAt=it.set(m,Rt({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!h&&It(u),startAt:null,delay:0,onUpdate:c&&function(){return Ht(t,"onUpdate")},stagger:0},s))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(xt||!l&&!g)&&t._startAt.revert(bs),l&&b&&n<=0&&r<=0){n&&(t._zTime=n);return}}else if(d&&b&&!h){if(n&&(l=!1),j=Rt({overwrite:!1,data:"isFromStart",lazy:l&&!h&&It(u),immediateRender:l,stagger:0,parent:y},x),F&&(j[w.prop]=F),Hn(t._startAt=it.set(m,j)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(xt?t._startAt.revert(bs):t._startAt.render(-1,!0)),t._zTime=n,!l)e(t._startAt,ze,ze);else if(!n)return}for(t._pt=t._ptCache=0,u=b&&It(u)||u&&!b,M=0;M<m.length;M++){if(v=m[M],T=v._gsap||Yl(m)[M]._gsap,t._ptLookup[M]=P={},Wl[T.id]&&Rn.length&&_s(),D=k===m?M:k.indexOf(v),w&&(L=new w).init(v,F||x,t,D,k)!==!1&&(t._pt=C=new $t(t._pt,v,L.name,0,1,L.render,L,0,L.priority),L._props.forEach(function(ne){P[ne]=C}),L.priority&&($=1)),!w||F)for(j in x)Bt[j]&&(L=qg(j,x,t,D,v,k))?L.priority&&($=1):P[j]=C=rc.call(t,v,j,"get",x[j],D,k,0,i.stringFilter);t._op&&t._op[M]&&t.kill(v,t._op[M]),N&&t._pt&&(Un=t,Je.killTweensOf(v,P,t.globalTime(n)),A=!t.parent,Un=0),t._pt&&u&&(Wl[T.id]=1)}$&&e0(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!A,p&&n<=0&&S.render(Wt,!0,!0)},Ew=function(t,n,r,i,a,s,l,u){var c=(t._pt&&t._ptCache||(t._ptCache={}))[n],d,f,p,g;if(!c)for(c=t._ptCache[n]=[],p=t._ptLookup,g=t._targets.length;g--;){if(d=p[g][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return ic=1,t.vars[n]="+=0",ac(t,l),ic=0,u?Hi(n+" not eligible for reset"):1;c.push(d)}for(g=c.length;g--;)f=c[g],d=f._pt||f,d.s=(i||i===0)&&!a?i:d.s+(i||0)+s*d.c,d.c=r-d.s,f.e&&(f.e=rt(r)+Tt(f.e)),f.b&&(f.b=d.s+Tt(f.b))},Bw=function(t,n){var r=t[0]?sr(t[0]).harness:0,i=r&&r.aliases,a,s,l,u;if(!i)return n;a=Fr({},n);for(s in i)if(s in a)for(u=i[s].split(","),l=u.length;l--;)a[u[l]]=a[s];return a},Rw=function(t,n,r,i){var a=n.ease||i||"power1.inOut",s,l;if(kt(n))l=r[t]||(r[t]=[]),n.forEach(function(u,c){return l.push({t:c/(n.length-1)*100,v:u,e:a})});else for(s in n)l=r[s]||(r[s]=[]),s==="ease"||l.push({t:parseFloat(t),v:n[s],e:a})},Ki=function(t,n,r,i,a){return tt(t)?t.call(n,r,i,a):gt(t)&&~t.indexOf("random(")?Vi(t):t},Xg=Gl+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Kg={};Pt(Xg+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return Kg[e]=1});var it=(function(e){lg(t,e);function t(r,i,a,s){var l;typeof i=="number"&&(a.duration=i,i=a,a=null),l=e.call(this,s?i:zi(i))||this;var u=l.vars,c=u.duration,d=u.delay,f=u.immediateRender,p=u.stagger,g=u.overwrite,b=u.keyframes,h=u.defaults,m=u.scrollTrigger,y=u.yoyoEase,k=i.parent||Je,N=(kt(r)||ug(r)?jn(r[0]):"length"in i)?[r]:Gt(r),S,x,M,j,C,v,$,T;if(l._targets=N.length?Yl(N):Hi("GSAP target "+r+" not found. https://gsap.com",!At.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,b||p||ms(c)||ms(d)){if(i=l.vars,S=l.timeline=new wt({data:"nested",defaults:h||{},targets:k&&k.data==="nested"?k.vars.targets:N}),S.kill(),S.parent=S._dp=Nn(l),S._start=0,p||ms(c)||ms(d)){if(j=N.length,$=p&&Pg(p),mn(p))for(C in p)~Xg.indexOf(C)&&(T||(T={}),T[C]=p[C]);for(x=0;x<j;x++)M=vs(i,Kg),M.stagger=0,y&&(M.yoyoEase=y),T&&Fr(M,T),v=N[x],M.duration=+Ki(c,Nn(l),x,v,N),M.delay=(+Ki(d,Nn(l),x,v,N)||0)-l._delay,!p&&j===1&&M.delay&&(l._delay=d=M.delay,l._start+=d,M.delay=0),S.to(v,M,$?$(x,v,N):0),S._ease=Le.none;S.duration()?c=d=0:l.timeline=0}else if(b){zi(Rt(S.vars.defaults,{ease:"none"})),S._ease=lr(b.ease||i.ease||"none");var w=0,L,P,D;if(kt(b))b.forEach(function(F){return S.to(N,F,">")}),S.duration();else{M={};for(C in b)C==="ease"||C==="easeEach"||Rw(C,b[C],M,b.easeEach);for(C in M)for(L=M[C].sort(function(F,A){return F.t-A.t}),w=0,x=0;x<L.length;x++)P=L[x],D={ease:P.e,duration:(P.t-(x?L[x-1].t:0))/100*c},D[C]=P.v,S.to(N,D,w),w+=D.duration;S.duration()<c&&S.to({},{duration:c-S.duration()})}}c||l.duration(c=S.duration())}else l.timeline=0;return g===!0&&!Fl&&(Un=Nn(l),Je.killTweensOf(N),Un=0),bn(k,Nn(l),a),i.reversed&&l.reverse(),i.paused&&l.paused(!0),(f||!c&&!b&&l._start===lt(k._time)&&It(f)&&gw(Nn(l))&&k.data!=="nested")&&(l._tTime=-ze,l.render(Math.max(0,-d)||0)),m&&Ng(Nn(l),m),l}var n=t.prototype;return n.render=function(i,a,s){var l=this._time,u=this._tDur,c=this._dur,d=i<0,f=i>u-ze&&!d?u:i<ze?0:i,p,g,b,h,m,y,k,N,S;if(!c)yw(this,i,a,s);else if(f!==this._tTime||!i||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(p=f,N=this.timeline,this._repeat){if(h=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(h*100+i,a,s);if(p=lt(f%h),f===u?(b=this._repeat,p=c):(m=lt(f/h),b=~~m,b&&b===m?(p=c,b--):p>c&&(p=c)),y=this._yoyo&&b&1,y&&(S=this._yEase,p=c-p),m=Lr(this._tTime,h),p===l&&!s&&this._initted&&b===m)return this._tTime=f,this;b!==m&&(N&&this._yEase&&Vg(N,y),this.vars.repeatRefresh&&!y&&!this._lock&&p!==h&&this._initted&&(this._lock=s=1,this.render(lt(h*b),!0).invalidate()._lock=0))}if(!this._initted){if(jg(this,d?i:p,s,a,f))return this._tTime=0,this;if(l!==this._time&&!(s&&this.vars.repeatRefresh&&b!==m))return this;if(c!==this._dur)return this.render(i,a,s)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=k=(S||this._ease)(p/c),this._from&&(this.ratio=k=1-k),!l&&f&&!a&&!m&&(Ht(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(k,g.d),g=g._next;N&&N.render(i<0?i:N._dur*N._ease(p/this._dur),a,s)||this._startAt&&(this._zTime=i),this._onUpdate&&!a&&(d&&Xl(this,i,a,s),Ht(this,"onUpdate")),this._repeat&&b!==m&&this.vars.onRepeat&&!a&&this.parent&&Ht(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(d&&!this._onUpdate&&Xl(this,i,!0,!0),(i||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Hn(this,1),!a&&!(d&&!l)&&(f||l||y)&&(Ht(this,f===u?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),e.prototype.invalidate.call(this,i)},n.resetTo=function(i,a,s,l,u){qi||Ot.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||ac(this,c),d=this._ease(c/this._dur),Ew(this,i,a,s,l,d,c,u)?this.resetTo(i,a,s,l,1):(Cs(this,0),this.parent||Cg(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(i,a){if(a===void 0&&(a="all"),!i&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?Gi(this):this.scrollTrigger&&this.scrollTrigger.kill(!!xt),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(i,a,Un&&Un.vars.overwrite!==!0)._first||Gi(this),this.parent&&s!==this.timeline.totalDuration()&&Ar(this,this._dur*this.timeline._tDur/s,0,1),this}var l=this._targets,u=i?Gt(i):l,c=this._ptLookup,d=this._pt,f,p,g,b,h,m,y;if((!a||a==="all")&&pw(l,u))return a==="all"&&(this._pt=0),Gi(this);for(f=this._op=this._op||[],a!=="all"&&(gt(a)&&(h={},Pt(a,function(k){return h[k]=1}),a=h),a=Bw(l,a)),y=l.length;y--;)if(~u.indexOf(l[y])){p=c[y],a==="all"?(f[y]=a,b=p,g={}):(g=f[y]=f[y]||{},b=a);for(h in b)m=p&&p[h],m&&((!("kill"in m.d)||m.d.kill(h)===!0)&&xs(this,m,"_pt"),delete p[h]),g!=="all"&&(g[h]=1)}return this._initted&&!this._pt&&d&&Gi(this),this},t.to=function(i,a){return new t(i,a,arguments[2])},t.from=function(i,a){return Ui(1,arguments)},t.delayedCall=function(i,a,s,l){return new t(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:a,onReverseComplete:a,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:l})},t.fromTo=function(i,a,s){return Ui(2,arguments)},t.set=function(i,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new t(i,a)},t.killTweensOf=function(i,a,s){return Je.killTweensOf(i,a,s)},t})(Xi);Rt(it.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Pt("staggerTo,staggerFrom,staggerFromTo",function(e){it[e]=function(){var t=new wt,n=Jl.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var sc=function(t,n,r){return t[n]=r},Jg=function(t,n,r){return t[n](r)},Hw=function(t,n,r,i){return t[n](i.fp,r)},Ow=function(t,n,r){return t.setAttribute(n,r)},oc=function(t,n){return tt(t[n])?Jg:Al(t[n])&&t.setAttribute?Ow:sc},Zg=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},zw=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},Qg=function(t,n){var r=n._pt,i="";if(!t&&n.b)i=n.b;else if(t===1&&n.e)i=n.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*t):Math.round((r.s+r.c*t)*1e4)/1e4)+i,r=r._next;i+=n.c}n.set(n.t,n.p,i,n)},lc=function(t,n){for(var r=n._pt;r;)r.r(t,r.d),r=r._next},Uw=function(t,n,r,i){for(var a=this._pt,s;a;)s=a._next,a.p===i&&a.modifier(t,n,r),a=s},Ww=function(t){for(var n=this._pt,r,i;n;)i=n._next,n.p===t&&!n.op||n.op===t?xs(this,n,"_pt"):n.dep||(r=1),n=i;return!r},Vw=function(t,n,r,i){i.mSet(t,n,i.m.call(i.tween,r,i.mt),i)},e0=function(t){for(var n=t._pt,r,i,a,s;n;){for(r=n._next,i=a;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:s)?n._prev._next=n:a=n,(n._next=i)?i._prev=n:s=n,n=r}t._pt=a},$t=(function(){function e(n,r,i,a,s,l,u,c,d){this.t=r,this.s=a,this.c=s,this.p=i,this.r=l||Zg,this.d=u||this,this.set=c||sc,this.pr=d||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(r,i,a){this.mSet=this.mSet||this.set,this.set=Vw,this.m=r,this.mt=a,this.tween=i},e})();Pt(Gl+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Ul[e]=1}),Et.TweenMax=Et.TweenLite=it,Et.TimelineLite=Et.TimelineMax=wt,Je=new wt({sortChildren:!1,defaults:Ir,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),At.stringFilter=Ug;var ur=[],ks={},Gw=[],t0=0,Yw=0,cc=function(t){return(ks[t]||Gw).map(function(n){return n()})},uc=function(){var t=Date.now(),n=[];t-t0>2&&(cc("matchMediaInit"),ur.forEach(function(r){var i=r.queries,a=r.conditions,s,l,u,c;for(l in i)s=gn.matchMedia(i[l]).matches,s&&(u=1),s!==a[l]&&(a[l]=s,c=1);c&&(r.revert(),u&&n.push(r))}),cc("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),t0=t,cc("matchMedia"))},n0=(function(){function e(n,r){this.selector=r&&Zl(r),this.data=[],this._r=[],this.isReverted=!1,this.id=Yw++,n&&this.add(n)}var t=e.prototype;return t.add=function(r,i,a){tt(r)&&(a=i,i=r,r=tt);var s=this,l=function(){var c=qe,d=s.selector,f;return c&&c!==s&&c.data.push(s),a&&(s.selector=Zl(a)),qe=s,f=i.apply(s,arguments),tt(f)&&s._r.push(f),qe=c,s.selector=d,s.isReverted=!1,f};return s.last=l,r===tt?l(s,function(u){return s.add(null,u)}):r?s[r]=l:l},t.ignore=function(r){var i=qe;qe=null,r(this),qe=i},t.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof e?r.push.apply(r,i.getTweens()):i instanceof it&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(r,i){var a=this;if(r?(function(){for(var l=a.getTweens(),u=a.data.length,c;u--;)c=a.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,f){return f.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),u=a.data.length;u--;)c=a.data[u],c instanceof wt?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof it)&&c.revert&&c.revert(r);a._r.forEach(function(d){return d(r,a)}),a.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),i)for(var s=ur.length;s--;)ur[s].id===this.id&&ur.splice(s,1)},t.revert=function(r){this.kill(r||{})},e})(),qw=(function(){function e(n){this.contexts=[],this.scope=n,qe&&qe.data.push(this)}var t=e.prototype;return t.add=function(r,i,a){mn(r)||(r={matches:r});var s=new n0(0,a||this.scope),l=s.conditions={},u,c,d;qe&&!s.selector&&(s.selector=qe.selector),this.contexts.push(s),i=s.add("onMatch",i),s.queries=r;for(c in r)c==="all"?d=1:(u=gn.matchMedia(r[c]),u&&(ur.indexOf(s)<0&&ur.push(s),(l[c]=u.matches)&&(d=1),u.addListener?u.addListener(uc):u.addEventListener("change",uc)));return d&&i(s,function(f){return s.add(null,f)}),this},t.revert=function(r){this.kill(r||{})},t.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},e})(),Ts={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(i){return Rg(i)})},timeline:function(t){return new wt(t)},getTweensOf:function(t,n){return Je.getTweensOf(t,n)},getProperty:function(t,n,r,i){gt(t)&&(t=Gt(t)[0]);var a=sr(t||{}).get,s=r?wg:xg;return r==="native"&&(r=""),t&&(n?s((Bt[n]&&Bt[n].get||a)(t,n,r,i)):function(l,u,c){return s((Bt[l]&&Bt[l].get||a)(t,l,u,c))})},quickSetter:function(t,n,r){if(t=Gt(t),t.length>1){var i=t.map(function(d){return Ft.quickSetter(d,n,r)}),a=i.length;return function(d){for(var f=a;f--;)i[f](d)}}t=t[0]||{};var s=Bt[n],l=sr(t),u=l.harness&&(l.harness.aliases||{})[n]||n,c=s?function(d){var f=new s;Er._pt=0,f.init(t,r?d+r:d,Er,0,[t]),f.render(1,f),Er._pt&&lc(1,Er)}:l.set(t,u);return s?c:function(d){return c(t,u,r?d+r:d,l,1)}},quickTo:function(t,n,r){var i,a=Ft.to(t,Rt((i={},i[n]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),s=function(u,c,d){return a.resetTo(n,u,c,d)};return s.tween=a,s},isTweening:function(t){return Je.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=lr(t.ease,Ir.ease)),Sg(Ir,t||{})},config:function(t){return Sg(At,t||{})},registerEffect:function(t){var n=t.name,r=t.effect,i=t.plugins,a=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach(function(l){return l&&!Bt[l]&&!Et[l]&&Hi(n+" effect requires "+l+" plugin.")}),Vl[n]=function(l,u,c){return r(Gt(l),Rt(u||{},a),c)},s&&(wt.prototype[n]=function(l,u,c){return this.add(Vl[n](l,mn(u)?u:(c=u)&&{},this),c)})},registerEase:function(t,n){Le[t]=lr(n)},parseEase:function(t,n){return arguments.length?lr(t,n):Le},getById:function(t){return Je.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var r=new wt(t),i,a;for(r.smoothChildTiming=It(t.smoothChildTiming),Je.remove(r),r._dp=0,r._time=r._tTime=Je._time,i=Je._first;i;)a=i._next,(n||!(!i._dur&&i instanceof it&&i.vars.onComplete===i._targets[0]))&&bn(r,i,i._start-i._delay),i=a;return bn(Je,r,0),r},context:function(t,n){return t?new n0(t,n):qe},matchMedia:function(t){return new qw(t)},matchMediaRefresh:function(){return ur.forEach(function(t){var n=t.conditions,r,i;for(i in n)n[i]&&(n[i]=!1,r=1);r&&t.revert()})||uc()},addEventListener:function(t,n){var r=ks[t]||(ks[t]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(t,n){var r=ks[t],i=r&&r.indexOf(n);i>=0&&r.splice(i,1)},utils:{wrap:Tw,wrapYoyo:Nw,distribute:Pg,random:Fg,snap:$g,normalize:kw,getUnit:Tt,clamp:xw,splitColor:Hg,toArray:Gt,selector:Zl,mapRange:Ag,pipe:Sw,unitize:Cw,interpolate:jw,shuffle:Ig},install:mg,effects:Vl,ticker:Ot,updateRoot:wt.updateRoot,plugins:Bt,globalTimeline:Je,core:{PropTween:$t,globals:gg,Tween:it,Timeline:wt,Animation:Xi,getCache:sr,_removeLinkedListItem:xs,reverting:function(){return xt},context:function(t){return t&&qe&&(qe.data.push(t),t._ctx=qe),qe},suppressOverwrites:function(t){return Fl=t}}};Pt("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return Ts[e]=it[e]}),Ot.add(wt.updateRoot),Er=Ts.to({},{duration:0});var Xw=function(t,n){for(var r=t._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},Kw=function(t,n){var r=t._targets,i,a,s;for(i in n)for(a=r.length;a--;)s=t._ptLookup[a][i],s&&(s=s.d)&&(s._pt&&(s=Xw(s,i)),s&&s.modifier&&s.modifier(n[i],t,r[a],i))},dc=function(t,n){return{name:t,headless:1,rawVars:1,init:function(i,a,s){s._onInit=function(l){var u,c;if(gt(a)&&(u={},Pt(a,function(d){return u[d]=1}),a=u),n){u={};for(c in a)u[c]=n(a[c]);a=u}Kw(l,a)}}}},Ft=Ts.registerPlugin({name:"attr",init:function(t,n,r,i,a){var s,l,u;this.tween=r;for(s in n)u=t.getAttribute(s)||"",l=this.add(t,"setAttribute",(u||0)+"",n[s],i,a,0,0,s),l.op=s,l.b=u,this._props.push(s)},render:function(t,n){for(var r=n._pt;r;)xt?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",headless:1,init:function(t,n){for(var r=n.length;r--;)this.add(t,r,t[r]||0,n[r],0,0,0,0,0,1)}},dc("roundProps",Ql),dc("modifiers"),dc("snap",$g))||Ts;it.version=wt.version=Ft.version="3.13.0",pg=1,El()&&Br();var Jw=Le.Power0,Zw=Le.Power1,Qw=Le.Power2,eS=Le.Power3,tS=Le.Power4,nS=Le.Linear,rS=Le.Quad,iS=Le.Cubic,aS=Le.Quart,sS=Le.Quint,oS=Le.Strong,lS=Le.Elastic,cS=Le.Back,uS=Le.SteppedEase,dS=Le.Bounce,fS=Le.Sine,hS=Le.Expo,pS=Le.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var r0,Wn,Rr,fc,dr,i0,hc,mS=function(){return typeof window<"u"},Dn={},fr=180/Math.PI,Hr=Math.PI/180,Or=Math.atan2,a0=1e8,pc=/([A-Z])/g,gS=/(left|right|width|margin|padding|x)/i,bS=/[\s,\(]\S/,yn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},mc=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},yS=function(t,n){return n.set(n.t,n.p,t===1?n.e:Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},_S=function(t,n){return n.set(n.t,n.p,t?Math.round((n.s+n.c*t)*1e4)/1e4+n.u:n.b,n)},vS=function(t,n){var r=n.s+n.c*t;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},s0=function(t,n){return n.set(n.t,n.p,t?n.e:n.b,n)},o0=function(t,n){return n.set(n.t,n.p,t!==1?n.b:n.e,n)},xS=function(t,n,r){return t.style[n]=r},wS=function(t,n,r){return t.style.setProperty(n,r)},SS=function(t,n,r){return t._gsap[n]=r},CS=function(t,n,r){return t._gsap.scaleX=t._gsap.scaleY=r},kS=function(t,n,r,i,a){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(a,s)},TS=function(t,n,r,i,a){var s=t._gsap;s[n]=r,s.renderTransform(a,s)},Ze="transform",Lt=Ze+"Origin",NS=function e(t,n){var r=this,i=this.target,a=i.style,s=i._gsap;if(t in Dn&&a){if(this.tfm=this.tfm||{},t!=="transform")t=yn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return r.tfm[l]=Mn(i,l)}):this.tfm[t]=s.x?s[t]:Mn(i,t),t===Lt&&(this.tfm.zOrigin=s.zOrigin);else return yn.transform.split(",").forEach(function(l){return e.call(r,l,n)});if(this.props.indexOf(Ze)>=0)return;s.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Lt,n,"")),t=Ze}(a||n)&&this.props.push(t,n,a[t])},l0=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},jS=function(){var t=this.props,n=this.target,r=n.style,i=n._gsap,a,s;for(a=0;a<t.length;a+=3)t[a+1]?t[a+1]===2?n[t[a]](t[a+2]):n[t[a]]=t[a+2]:t[a+2]?r[t[a]]=t[a+2]:r.removeProperty(t[a].substr(0,2)==="--"?t[a]:t[a].replace(pc,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)i[s]=this.tfm[s];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),a=hc(),(!a||!a.isStart)&&!r[Ze]&&(l0(r),i.zOrigin&&r[Lt]&&(r[Lt]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},c0=function(t,n){var r={target:t,props:[],revert:jS,save:NS};return t._gsap||Ft.core.getCache(t),n&&t.style&&t.nodeType&&n.split(",").forEach(function(i){return r.save(i)}),r},u0,gc=function(t,n){var r=Wn.createElementNS?Wn.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Wn.createElement(t);return r&&r.style?r:Wn.createElement(t)},Yt=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(pc,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,zr(n)||n,1)||""},d0="O,Moz,ms,Ms,Webkit".split(","),zr=function(t,n,r){var i=n||dr,a=i.style,s=5;if(t in a&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(d0[s]+t in a););return s<0?null:(s===3?"ms":s>=0?d0[s]:"")+t},bc=function(){mS()&&window.document&&(r0=window,Wn=r0.document,Rr=Wn.documentElement,dr=gc("div")||{style:{}},gc("div"),Ze=zr(Ze),Lt=Ze+"Origin",dr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",u0=!!zr("perspective"),hc=Ft.core.reverting,fc=1)},f0=function(t){var n=t.ownerSVGElement,r=gc("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=t.cloneNode(!0),a;i.style.display="block",r.appendChild(i),Rr.appendChild(r);try{a=i.getBBox()}catch{}return r.removeChild(i),Rr.removeChild(r),a},h0=function(t,n){for(var r=n.length;r--;)if(t.hasAttribute(n[r]))return t.getAttribute(n[r])},p0=function(t){var n,r;try{n=t.getBBox()}catch{n=f0(t),r=1}return n&&(n.width||n.height)||r||(n=f0(t)),n&&!n.width&&!n.x&&!n.y?{x:+h0(t,["x","cx","x1"])||0,y:+h0(t,["y","cy","y1"])||0,width:0,height:0}:n},m0=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&p0(t))},hr=function(t,n){if(n){var r=t.style,i;n in Dn&&n!==Lt&&(n=Ze),r.removeProperty?(i=n.substr(0,2),(i==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(i==="--"?n:n.replace(pc,"-$1").toLowerCase())):r.removeAttribute(n)}},Vn=function(t,n,r,i,a,s){var l=new $t(t._pt,n,r,0,1,s?o0:s0);return t._pt=l,l.b=i,l.e=a,t._props.push(r),l},g0={deg:1,rad:1,turn:1},DS={grid:1,flex:1},Gn=function e(t,n,r,i){var a=parseFloat(r)||0,s=(r+"").trim().substr((a+"").length)||"px",l=dr.style,u=gS.test(n),c=t.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(u?"Width":"Height"),f=100,p=i==="px",g=i==="%",b,h,m,y;if(i===s||!a||g0[i]||g0[s])return a;if(s!=="px"&&!p&&(a=e(t,n,r,"px")),y=t.getCTM&&m0(t),(g||s==="%")&&(Dn[n]||~n.indexOf("adius")))return b=y?t.getBBox()[u?"width":"height"]:t[d],rt(g?a/b*f:a/100*b);if(l[u?"width":"height"]=f+(p?s:i),h=i!=="rem"&&~n.indexOf("adius")||i==="em"&&t.appendChild&&!c?t:t.parentNode,y&&(h=(t.ownerSVGElement||{}).parentNode),(!h||h===Wn||!h.appendChild)&&(h=Wn.body),m=h._gsap,m&&g&&m.width&&u&&m.time===Ot.time&&!m.uncache)return rt(a/m.width*f);if(g&&(n==="height"||n==="width")){var k=t.style[n];t.style[n]=f+i,b=t[d],k?t.style[n]=k:hr(t,n)}else(g||s==="%")&&!DS[Yt(h,"display")]&&(l.position=Yt(t,"position")),h===t&&(l.position="static"),h.appendChild(dr),b=dr[d],h.removeChild(dr),l.position="absolute";return u&&g&&(m=sr(h),m.time=Ot.time,m.width=h[d]),rt(p?b*a/f:b&&a?f/b*a:0)},Mn=function(t,n,r,i){var a;return fc||bc(),n in yn&&n!=="transform"&&(n=yn[n],~n.indexOf(",")&&(n=n.split(",")[0])),Dn[n]&&n!=="transform"?(a=Zi(t,i),a=n!=="transformOrigin"?a[n]:a.svg?a.origin:js(Yt(t,Lt))+" "+a.zOrigin+"px"):(a=t.style[n],(!a||a==="auto"||i||~(a+"").indexOf("calc("))&&(a=Ns[n]&&Ns[n](t,n,r)||Yt(t,n)||_g(t,n)||(n==="opacity"?1:0))),r&&!~(a+"").trim().indexOf(" ")?Gn(t,n,a,r)+r:a},MS=function(t,n,r,i){if(!r||r==="none"){var a=zr(n,t,1),s=a&&Yt(t,a,1);s&&s!==r?(n=a,r=s):n==="borderColor"&&(r=Yt(t,"borderTopColor"))}var l=new $t(this._pt,t.style,n,0,1,Qg),u=0,c=0,d,f,p,g,b,h,m,y,k,N,S,x;if(l.b=r,l.e=i,r+="",i+="",i.substring(0,6)==="var(--"&&(i=Yt(t,i.substring(4,i.indexOf(")")))),i==="auto"&&(h=t.style[n],t.style[n]=i,i=Yt(t,n)||i,h?t.style[n]=h:hr(t,n)),d=[r,i],Ug(d),r=d[0],i=d[1],p=r.match(Pr)||[],x=i.match(Pr)||[],x.length){for(;f=Pr.exec(i);)m=f[0],k=i.substring(u,f.index),b?b=(b+1)%5:(k.substr(-5)==="rgba("||k.substr(-5)==="hsla(")&&(b=1),m!==(h=p[c++]||"")&&(g=parseFloat(h)||0,S=h.substr((g+"").length),m.charAt(1)==="="&&(m=$r(g,m)+S),y=parseFloat(m),N=m.substr((y+"").length),u=Pr.lastIndex-N.length,N||(N=N||At.units[n]||S,u===i.length&&(i+=N,l.e+=N)),S!==N&&(g=Gn(t,n,h,N)||0),l._pt={_next:l._pt,p:k||c===1?k:",",s:g,c:y-g,m:b&&b<4||n==="zIndex"?Math.round:0});l.c=u<i.length?i.substring(u,i.length):""}else l.r=n==="display"&&i==="none"?o0:s0;return fg.test(i)&&(l.e=0),this._pt=l,l},b0={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},IS=function(t){var n=t.split(" "),r=n[0],i=n[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(t=r,r=i,i=t),n[0]=b0[r]||r,n[1]=b0[i]||i,n.join(" ")},PS=function(t,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,i=r.style,a=n.u,s=r._gsap,l,u,c;if(a==="all"||a===!0)i.cssText="",u=1;else for(a=a.split(","),c=a.length;--c>-1;)l=a[c],Dn[l]&&(u=1,l=l==="transformOrigin"?Lt:Ze),hr(r,l);u&&(hr(r,Ze),s&&(s.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Zi(r,1),s.uncache=1,l0(i)))}},Ns={clearProps:function(t,n,r,i,a){if(a.data!=="isFromStart"){var s=t._pt=new $t(t._pt,n,r,0,0,PS);return s.u=i,s.pr=-10,s.tween=a,t._props.push(r),1}}},Ji=[1,0,0,1,0,0],y0={},_0=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},v0=function(t){var n=Yt(t,Ze);return _0(n)?Ji:n.substr(7).match(dg).map(rt)},yc=function(t,n){var r=t._gsap||sr(t),i=t.style,a=v0(t),s,l,u,c;return r.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,a=[u.a,u.b,u.c,u.d,u.e,u.f],a.join(",")==="1,0,0,1,0,0"?Ji:a):(a===Ji&&!t.offsetParent&&t!==Rr&&!r.svg&&(u=i.display,i.display="block",s=t.parentNode,(!s||!t.offsetParent&&!t.getBoundingClientRect().width)&&(c=1,l=t.nextElementSibling,Rr.appendChild(t)),a=v0(t),u?i.display=u:hr(t,"display"),c&&(l?s.insertBefore(t,l):s?s.appendChild(t):Rr.removeChild(t))),n&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},_c=function(t,n,r,i,a,s){var l=t._gsap,u=a||yc(t,!0),c=l.xOrigin||0,d=l.yOrigin||0,f=l.xOffset||0,p=l.yOffset||0,g=u[0],b=u[1],h=u[2],m=u[3],y=u[4],k=u[5],N=n.split(" "),S=parseFloat(N[0])||0,x=parseFloat(N[1])||0,M,j,C,v;r?u!==Ji&&(j=g*m-b*h)&&(C=S*(m/j)+x*(-h/j)+(h*k-m*y)/j,v=S*(-b/j)+x*(g/j)-(g*k-b*y)/j,S=C,x=v):(M=p0(t),S=M.x+(~N[0].indexOf("%")?S/100*M.width:S),x=M.y+(~(N[1]||N[0]).indexOf("%")?x/100*M.height:x)),i||i!==!1&&l.smooth?(y=S-c,k=x-d,l.xOffset=f+(y*g+k*h)-y,l.yOffset=p+(y*b+k*m)-k):l.xOffset=l.yOffset=0,l.xOrigin=S,l.yOrigin=x,l.smooth=!!i,l.origin=n,l.originIsAbsolute=!!r,t.style[Lt]="0px 0px",s&&(Vn(s,l,"xOrigin",c,S),Vn(s,l,"yOrigin",d,x),Vn(s,l,"xOffset",f,l.xOffset),Vn(s,l,"yOffset",p,l.yOffset)),t.setAttribute("data-svg-origin",S+" "+x)},Zi=function(t,n){var r=t._gsap||new Yg(t);if("x"in r&&!n&&!r.uncache)return r;var i=t.style,a=r.scaleX<0,s="px",l="deg",u=getComputedStyle(t),c=Yt(t,Lt)||"0",d,f,p,g,b,h,m,y,k,N,S,x,M,j,C,v,$,T,w,L,P,D,F,A,ne,q,H,U,G,oe,z,pe;return d=f=p=h=m=y=k=N=S=0,g=b=1,r.svg=!!(t.getCTM&&m0(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(i[Ze]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[Ze]!=="none"?u[Ze]:"")),i.scale=i.rotate=i.translate="none"),j=yc(t,r.svg),r.svg&&(r.uncache?(ne=t.getBBox(),c=r.xOrigin-ne.x+"px "+(r.yOrigin-ne.y)+"px",A=""):A=!n&&t.getAttribute("data-svg-origin"),_c(t,A||c,!!A||r.originIsAbsolute,r.smooth!==!1,j)),x=r.xOrigin||0,M=r.yOrigin||0,j!==Ji&&(T=j[0],w=j[1],L=j[2],P=j[3],d=D=j[4],f=F=j[5],j.length===6?(g=Math.sqrt(T*T+w*w),b=Math.sqrt(P*P+L*L),h=T||w?Or(w,T)*fr:0,k=L||P?Or(L,P)*fr+h:0,k&&(b*=Math.abs(Math.cos(k*Hr))),r.svg&&(d-=x-(x*T+M*L),f-=M-(x*w+M*P))):(pe=j[6],oe=j[7],H=j[8],U=j[9],G=j[10],z=j[11],d=j[12],f=j[13],p=j[14],C=Or(pe,G),m=C*fr,C&&(v=Math.cos(-C),$=Math.sin(-C),A=D*v+H*$,ne=F*v+U*$,q=pe*v+G*$,H=D*-$+H*v,U=F*-$+U*v,G=pe*-$+G*v,z=oe*-$+z*v,D=A,F=ne,pe=q),C=Or(-L,G),y=C*fr,C&&(v=Math.cos(-C),$=Math.sin(-C),A=T*v-H*$,ne=w*v-U*$,q=L*v-G*$,z=P*$+z*v,T=A,w=ne,L=q),C=Or(w,T),h=C*fr,C&&(v=Math.cos(C),$=Math.sin(C),A=T*v+w*$,ne=D*v+F*$,w=w*v-T*$,F=F*v-D*$,T=A,D=ne),m&&Math.abs(m)+Math.abs(h)>359.9&&(m=h=0,y=180-y),g=rt(Math.sqrt(T*T+w*w+L*L)),b=rt(Math.sqrt(F*F+pe*pe)),C=Or(D,F),k=Math.abs(C)>2e-4?C*fr:0,S=z?1/(z<0?-z:z):0),r.svg&&(A=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!_0(Yt(t,Ze)),A&&t.setAttribute("transform",A))),Math.abs(k)>90&&Math.abs(k)<270&&(a?(g*=-1,k+=h<=0?180:-180,h+=h<=0?180:-180):(b*=-1,k+=k<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-d)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+s,r.y=f-((r.yPercent=f&&(!n&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-f)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+s,r.z=p+s,r.scaleX=rt(g),r.scaleY=rt(b),r.rotation=rt(h)+l,r.rotationX=rt(m)+l,r.rotationY=rt(y)+l,r.skewX=k+l,r.skewY=N+l,r.transformPerspective=S+s,(r.zOrigin=parseFloat(c.split(" ")[2])||!n&&r.zOrigin||0)&&(i[Lt]=js(c)),r.xOffset=r.yOffset=0,r.force3D=At.force3D,r.renderTransform=r.svg?FS:u0?x0:$S,r.uncache=0,r},js=function(t){return(t=t.split(" "))[0]+" "+t[1]},vc=function(t,n,r){var i=Tt(n);return rt(parseFloat(n)+parseFloat(Gn(t,"x",r+"px",i)))+i},$S=function(t,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,x0(t,n)},pr="0deg",Qi="0px",mr=") ",x0=function(t,n){var r=n||this,i=r.xPercent,a=r.yPercent,s=r.x,l=r.y,u=r.z,c=r.rotation,d=r.rotationY,f=r.rotationX,p=r.skewX,g=r.skewY,b=r.scaleX,h=r.scaleY,m=r.transformPerspective,y=r.force3D,k=r.target,N=r.zOrigin,S="",x=y==="auto"&&t&&t!==1||y===!0;if(N&&(f!==pr||d!==pr)){var M=parseFloat(d)*Hr,j=Math.sin(M),C=Math.cos(M),v;M=parseFloat(f)*Hr,v=Math.cos(M),s=vc(k,s,j*v*-N),l=vc(k,l,-Math.sin(M)*-N),u=vc(k,u,C*v*-N+N)}m!==Qi&&(S+="perspective("+m+mr),(i||a)&&(S+="translate("+i+"%, "+a+"%) "),(x||s!==Qi||l!==Qi||u!==Qi)&&(S+=u!==Qi||x?"translate3d("+s+", "+l+", "+u+") ":"translate("+s+", "+l+mr),c!==pr&&(S+="rotate("+c+mr),d!==pr&&(S+="rotateY("+d+mr),f!==pr&&(S+="rotateX("+f+mr),(p!==pr||g!==pr)&&(S+="skew("+p+", "+g+mr),(b!==1||h!==1)&&(S+="scale("+b+", "+h+mr),k.style[Ze]=S||"translate(0, 0)"},FS=function(t,n){var r=n||this,i=r.xPercent,a=r.yPercent,s=r.x,l=r.y,u=r.rotation,c=r.skewX,d=r.skewY,f=r.scaleX,p=r.scaleY,g=r.target,b=r.xOrigin,h=r.yOrigin,m=r.xOffset,y=r.yOffset,k=r.forceCSS,N=parseFloat(s),S=parseFloat(l),x,M,j,C,v;u=parseFloat(u),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,u+=d),u||c?(u*=Hr,c*=Hr,x=Math.cos(u)*f,M=Math.sin(u)*f,j=Math.sin(u-c)*-p,C=Math.cos(u-c)*p,c&&(d*=Hr,v=Math.tan(c-d),v=Math.sqrt(1+v*v),j*=v,C*=v,d&&(v=Math.tan(d),v=Math.sqrt(1+v*v),x*=v,M*=v)),x=rt(x),M=rt(M),j=rt(j),C=rt(C)):(x=f,C=p,M=j=0),(N&&!~(s+"").indexOf("px")||S&&!~(l+"").indexOf("px"))&&(N=Gn(g,"x",s,"px"),S=Gn(g,"y",l,"px")),(b||h||m||y)&&(N=rt(N+b-(b*x+h*j)+m),S=rt(S+h-(b*M+h*C)+y)),(i||a)&&(v=g.getBBox(),N=rt(N+i/100*v.width),S=rt(S+a/100*v.height)),v="matrix("+x+","+M+","+j+","+C+","+N+","+S+")",g.setAttribute("transform",v),k&&(g.style[Ze]=v)},LS=function(t,n,r,i,a){var s=360,l=gt(a),u=parseFloat(a)*(l&&~a.indexOf("rad")?fr:1),c=u-i,d=i+c+"deg",f,p;return l&&(f=a.split("_")[1],f==="short"&&(c%=s,c!==c%(s/2)&&(c+=c<0?s:-s)),f==="cw"&&c<0?c=(c+s*a0)%s-~~(c/s)*s:f==="ccw"&&c>0&&(c=(c-s*a0)%s-~~(c/s)*s)),t._pt=p=new $t(t._pt,n,r,i,c,yS),p.e=d,p.u="deg",t._props.push(r),p},w0=function(t,n){for(var r in n)t[r]=n[r];return t},AS=function(t,n,r){var i=w0({},r._gsap),a="perspective,force3D,transformOrigin,svgOrigin",s=r.style,l,u,c,d,f,p,g,b;i.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),s[Ze]=n,l=Zi(r,1),hr(r,Ze),r.setAttribute("transform",c)):(c=getComputedStyle(r)[Ze],s[Ze]=n,l=Zi(r,1),s[Ze]=c);for(u in Dn)c=i[u],d=l[u],c!==d&&a.indexOf(u)<0&&(g=Tt(c),b=Tt(d),f=g!==b?Gn(r,u,c,b):parseFloat(c),p=parseFloat(d),t._pt=new $t(t._pt,l,u,f,p-f,mc),t._pt.u=b||0,t._props.push(u));w0(l,i)};Pt("padding,margin,Width,Radius",function(e,t){var n="Top",r="Right",i="Bottom",a="Left",s=(t<3?[n,r,i,a]:[n+a,n+r,i+r,i+a]).map(function(l){return t<2?e+l:"border"+l+e});Ns[t>1?"border"+e:e]=function(l,u,c,d,f){var p,g;if(arguments.length<4)return p=s.map(function(b){return Mn(l,b,c)}),g=p.join(" "),g.split(p[0]).length===5?p[0]:g;p=(d+"").split(" "),g={},s.forEach(function(b,h){return g[b]=p[h]=p[h]||p[(h-1)/2|0]}),l.init(u,g,f)}});var xc={name:"css",register:bc,targetTest:function(t){return t.style&&t.nodeType},init:function(t,n,r,i,a){var s=this._props,l=t.style,u=r.vars.startAt,c,d,f,p,g,b,h,m,y,k,N,S,x,M,j,C;fc||bc(),this.styles=this.styles||c0(t),C=this.styles.props,this.tween=r;for(h in n)if(h!=="autoRound"&&(d=n[h],!(Bt[h]&&qg(h,n,r,i,t,a)))){if(g=typeof d,b=Ns[h],g==="function"&&(d=d.call(r,i,t,a),g=typeof d),g==="string"&&~d.indexOf("random(")&&(d=Vi(d)),b)b(this,t,h,d,r)&&(j=1);else if(h.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(h)+"").trim(),d+="",zn.lastIndex=0,zn.test(c)||(m=Tt(c),y=Tt(d)),y?m!==y&&(c=Gn(t,h,c,y)+y):m&&(d+=m),this.add(l,"setProperty",c,d,i,a,0,0,h),s.push(h),C.push(h,0,l[h]);else if(g!=="undefined"){if(u&&h in u?(c=typeof u[h]=="function"?u[h].call(r,i,t,a):u[h],gt(c)&&~c.indexOf("random(")&&(c=Vi(c)),Tt(c+"")||c==="auto"||(c+=At.units[h]||Tt(Mn(t,h))||""),(c+"").charAt(1)==="="&&(c=Mn(t,h))):c=Mn(t,h),p=parseFloat(c),k=g==="string"&&d.charAt(1)==="="&&d.substr(0,2),k&&(d=d.substr(2)),f=parseFloat(d),h in yn&&(h==="autoAlpha"&&(p===1&&Mn(t,"visibility")==="hidden"&&f&&(p=0),C.push("visibility",0,l.visibility),Vn(this,l,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),h!=="scale"&&h!=="transform"&&(h=yn[h],~h.indexOf(",")&&(h=h.split(",")[0]))),N=h in Dn,N){if(this.styles.save(h),g==="string"&&d.substring(0,6)==="var(--"&&(d=Yt(t,d.substring(4,d.indexOf(")"))),f=parseFloat(d)),S||(x=t._gsap,x.renderTransform&&!n.parseTransform||Zi(t,n.parseTransform),M=n.smoothOrigin!==!1&&x.smooth,S=this._pt=new $t(this._pt,l,Ze,0,1,x.renderTransform,x,0,-1),S.dep=1),h==="scale")this._pt=new $t(this._pt,x,"scaleY",x.scaleY,(k?$r(x.scaleY,k+f):f)-x.scaleY||0,mc),this._pt.u=0,s.push("scaleY",h),h+="X";else if(h==="transformOrigin"){C.push(Lt,0,l[Lt]),d=IS(d),x.svg?_c(t,d,0,M,0,this):(y=parseFloat(d.split(" ")[2])||0,y!==x.zOrigin&&Vn(this,x,"zOrigin",x.zOrigin,y),Vn(this,l,h,js(c),js(d)));continue}else if(h==="svgOrigin"){_c(t,d,1,M,0,this);continue}else if(h in y0){LS(this,x,h,p,k?$r(p,k+d):d);continue}else if(h==="smoothOrigin"){Vn(this,x,"smooth",x.smooth,d);continue}else if(h==="force3D"){x[h]=d;continue}else if(h==="transform"){AS(this,d,t);continue}}else h in l||(h=zr(h)||h);if(N||(f||f===0)&&(p||p===0)&&!bS.test(d)&&h in l)m=(c+"").substr((p+"").length),f||(f=0),y=Tt(d)||(h in At.units?At.units[h]:m),m!==y&&(p=Gn(t,h,c,y)),this._pt=new $t(this._pt,N?x:l,h,p,(k?$r(p,k+f):f)-p,!N&&(y==="px"||h==="zIndex")&&n.autoRound!==!1?vS:mc),this._pt.u=y||0,m!==y&&y!=="%"&&(this._pt.b=c,this._pt.r=_S);else if(h in l)MS.call(this,t,h,c,k?k+d:d);else if(h in t)this.add(t,h,c||t[h],k?k+d:d,i,a);else if(h!=="parseTransform"){zl(h,d);continue}N||(h in l?C.push(h,0,l[h]):typeof t[h]=="function"?C.push(h,2,t[h]()):C.push(h,1,c||t[h])),s.push(h)}}j&&e0(this)},render:function(t,n){if(n.tween._time||!hc())for(var r=n._pt;r;)r.r(t,r.d),r=r._next;else n.styles.revert()},get:Mn,aliases:yn,getSetter:function(t,n,r){var i=yn[n];return i&&i.indexOf(",")<0&&(n=i),n in Dn&&n!==Lt&&(t._gsap.x||Mn(t,"x"))?r&&i0===r?n==="scale"?CS:SS:(i0=r||{})&&(n==="scale"?kS:TS):t.style&&!Al(t.style[n])?xS:~n.indexOf("-")?wS:oc(t,n)},core:{_removeProperty:hr,_getMatrix:yc}};Ft.utils.checkPrefix=zr,Ft.core.getStyleSaver=c0,(function(e,t,n,r){var i=Pt(e+","+t+","+n,function(a){Dn[a]=1});Pt(t,function(a){At.units[a]="deg",y0[a]=1}),yn[i[13]]=e+","+t,Pt(r,function(a){var s=a.split(":");yn[s[1]]=i[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),Pt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){At.units[e]="px"}),Ft.registerPlugin(xc);var wc=Ft.registerPlugin(xc)||Ft,ES=wc.core.Tween;const BS=Object.freeze(Object.defineProperty({__proto__:null,Back:cS,Bounce:dS,CSSPlugin:xc,Circ:pS,Cubic:iS,Elastic:lS,Expo:hS,Linear:nS,Power0:Jw,Power1:Zw,Power2:Qw,Power3:eS,Power4:tS,Quad:rS,Quart:aS,Quint:sS,Sine:fS,SteppedEase:uS,Strong:oS,TimelineLite:wt,TimelineMax:wt,TweenLite:it,TweenMax:ES,default:wc,gsap:wc},Symbol.toStringTag,{value:"Module"}));_.Account=Ps,_.ActionLink=L0,_.AdaptiveDataGrid=yo,_.AnimationDurationFast=Tf,_.AnimationDurationNormal=Nf,_.AnimationDurationSlow=jf,_.AnimationEasingBounce=Pf,_.AnimationEasingEaseIn=Df,_.AnimationEasingEaseInOut=If,_.AnimationEasingEaseOut=Mf,_.AppointmentCard=mo,_.AreaSeriesPrimitive=jx,_.AriaDataGrid=td,_.AriaTabsDataGrid=Na,_.AriaTabsDataGridAdaptive=yo,_.Axis=No,_.BackLink=ra,_.BandScalesProvider=Mx,_.BarSeriesPrimitive=Dx,_.BorderColorCard=Vo,_.BorderColorCardHover=Go,_.BorderColorDefault=Uo,_.BorderColorError=Yo,_.BorderColorForm=Wo,_.BorderRadiusLarge=Yf,_.BorderRadiusMedium=Gf,_.BorderRadiusNone=Wf,_.BorderRadiusSmall=Vf,_.BorderWidthCardBottom=Hf,_.BorderWidthDefault=Ef,_.BorderWidthFormElement=Bf,_.BorderWidthFormElementError=Rf,_.BorderWidthPanel=Of,_.BorderWidthTableCell=Uf,_.BorderWidthTableHeader=zf,_.Breadcrumb=Uu,_.Breakpoint=zc,_.BreakpointDesktop=Nm,_.BreakpointLargeDesktop=jm,_.BreakpointMobile=km,_.BreakpointTablet=Tm,_.Button=ft,_.ButtonBorderRadius=wp,_.ButtonBorderWidth=xp,_.ButtonPrimaryBackgroundActive=cp,_.ButtonPrimaryBackgroundDefault=op,_.ButtonPrimaryBackgroundDisabled=up,_.ButtonPrimaryBackgroundHover=lp,_.ButtonPrimaryBorderDefault=hp,_.ButtonPrimaryBorderFocus=pp,_.ButtonPrimaryTextDefault=dp,_.ButtonPrimaryTextDisabled=fp,_.ButtonSecondaryBackgroundActive=yp,_.ButtonSecondaryBackgroundDefault=mp,_.ButtonSecondaryBackgroundHover=bp,_.ButtonSecondaryBackgroundSolid=gp,_.ButtonSecondaryBorderDefault=vp,_.ButtonSecondaryTextDefault=_p,_.ButtonShadowSize=Sp,_.ButtonSize=Fs,_.ButtonSpacingPaddingHorizontalDesktop=ml,_.ButtonSpacingPaddingHorizontalMobile=hl,_.ButtonSpacingPaddingVerticalDesktop=pl,_.ButtonSpacingPaddingVerticalMobile=fl,_.ButtonTypographyWeight=Cp,_.ButtonVariant=$s,_.Card=uo,_.CardBackgroundDefault=kp,_.CardBorderBottom=jp,_.CardBorderDefault=Tp,_.CardBorderHover=Np,_.CardBorderWidthBottom=$p,_.CardBorderWidthDefault=Pp,_.CardGroup=R_,_.CardGroupItem=H_,_.CardShadowDefault=Fp,_.CardShadowHover=Lp,_.CardSpacingHeadingMargin=yl,_.CardSpacingPaddingDesktop=bl,_.CardSpacingPaddingMobile=gl,_.CardTextDescription=Mp,_.CardTextHeading=Dp,_.CardTextLink=Ip,_.CareCard=O_,_.CharacterCount=V0,_.ChartEnhancer=Px,_.ChartNoScript=Ix,_.ChartRoot=Ad,_.Checkbox=Ac,_.Checkboxes=Bc,_.ColorBorderDefault=ih,_.ColorBorderSecondary=ah,_.ColorButtonLoginActive=Ph,_.ColorButtonLoginBackground=Mh,_.ColorButtonLoginHover=Ih,_.ColorButtonLoginShadow=$h,_.ColorButtonPrimaryActive=fh,_.ColorButtonPrimaryBackground=ch,_.ColorButtonPrimaryHover=dh,_.ColorButtonPrimaryShadow=hh,_.ColorButtonPrimaryText=uh,_.ColorButtonReverseActive=Ch,_.ColorButtonReverseBackground=xh,_.ColorButtonReverseHover=Sh,_.ColorButtonReverseShadow=kh,_.ColorButtonReverseText=wh,_.ColorButtonSecondaryActive=_h,_.ColorButtonSecondaryBackground=ph,_.ColorButtonSecondaryBackgroundSolid=mh,_.ColorButtonSecondaryBorder=gh,_.ColorButtonSecondaryHover=yh,_.ColorButtonSecondaryShadow=vh,_.ColorButtonSecondaryText=bh,_.ColorButtonWarningActive=jh,_.ColorButtonWarningBackground=Th,_.ColorButtonWarningHover=Nh,_.ColorButtonWarningShadow=Dh,_.ColorError=sh,_.ColorFocusBackground=nh,_.ColorFocusText=rh,_.ColorFormBackground=lh,_.ColorFormBorder=oh,_.ColorGrey1=ol,_.ColorGrey2=ll,_.ColorGrey3=cl,_.ColorGrey4=ul,_.ColorGrey5=dl,_.ColorLinkActive=eh,_.ColorLinkDefault=Zf,_.ColorLinkHover=Qf,_.ColorLinkVisited=th,_.ColorPrimaryBlack=Ko,_.ColorPrimaryBlue=qo,_.ColorPrimaryDarkPink=Qo,_.ColorPrimaryGreen=Jo,_.ColorPrimaryPurple=Zo,_.ColorPrimaryRed=el,_.ColorPrimaryWhite=Xo,_.ColorPrimaryYellow=tl,_.ColorSecondaryAquaGreen=al,_.ColorSecondaryOrange=il,_.ColorSecondaryPaleYellow=nl,_.ColorSecondaryPink=sl,_.ColorSecondaryWarmYellow=rl,_.ColorTextPrimary=qf,_.ColorTextPrint=Jf,_.ColorTextReverse=Kf,_.ColorTextSecondary=Xf,_.Column=br,_.ColumnAlign=Wc,_.ComponentBlur=np,_.ComponentBreadcrumbChevronMarginLeft=qh,_.ComponentBreadcrumbChevronMarginRight=Xh,_.ComponentBreadcrumbPaddingTopDesktop=Jh,_.ComponentBreadcrumbPaddingTopMobile=Kh,_.ComponentButtonPaddingDesktopHorizontal=Eh,_.ComponentButtonPaddingDesktopVertical=Ah,_.ComponentButtonPaddingMobileHorizontal=Lh,_.ComponentButtonPaddingMobileVertical=Fh,_.ComponentButtonShadowSize=Bh,_.ComponentCardHeadingMargin=Vh,_.ComponentCardPaddingDesktop=Wh,_.ComponentCardPaddingMobile=Uh,_.ComponentDetails=ip,_.ComponentExpander=ap,_.ComponentFormCheckboxLabelPadding=zh,_.ComponentFormCheckboxSize=Oh,_.ComponentFormInputMinHeight=Rh,_.ComponentFormInputPadding=Hh,_.ComponentLink=rp,_.ComponentPagination=sp,_.ComponentPanelPaddingDesktop=Yh,_.ComponentPanelPaddingMobile=Gh,_.ComponentSpread=tp,_.ComponentSummaryListCellPaddingHorizontal=Qh,_.ComponentSummaryListCellPaddingVertical=Zh,_.ComponentSummaryListRowMargin=ep,_.Container=Es,_.ContentsList=B_,_.DEFAULT_FONT_CONFIG=$l,_.DashboardSummaryGrid=rv,_.DateInput=lb,_.Details=Xu,_.DoDontList=Ku,_.ElevationHigh=og,_.ElevationLow=ag,_.ElevationMedium=sg,_.ElevationNone=ig,_.ErrorMessage=Rs,_.ErrorSummary=ob,_.Expander=Ju,_.FRUTIGER_FONT_FILES=jt,_.Fieldset=sa,_.Float=Uc,_.FocusOutlineOffset=eg,_.FocusOutlineStyle=tg,_.FocusOutlineWidth=Qm,_.FocusShadowButton=rg,_.FocusShadowInput=ng,_.FontFamilyBase=hi,_.FontFamilyFallback=pi,_.FontFamilyPrint=mi,_.FontLineHeightBase=ps,_.FontSize14Mobile=_i,_.FontSize14Print=xi,_.FontSize14Tablet=vi,_.FontSize16Mobile=wi,_.FontSize16Print=Ci,_.FontSize16Tablet=Si,_.FontSize19Mobile=ki,_.FontSize19Print=Ni,_.FontSize19Tablet=Ti,_.FontSize22Mobile=ji,_.FontSize22Print=Mi,_.FontSize22Tablet=Di,_.FontSize26Mobile=Ii,_.FontSize26Print=$i,_.FontSize26Tablet=Pi,_.FontSize36Mobile=Fi,_.FontSize36Print=Ai,_.FontSize36Tablet=Li,_.FontSize48Mobile=Ei,_.FontSize48Print=Ri,_.FontSize48Tablet=Bi,_.FontSizeBase=hs,_.FontWeightBold=bi,_.FontWeightLight=yi,_.FontWeightNormal=gi,_.Footer=Hs,_.FormBorderRadius=tm,_.FormBorderWidthDefault=Qp,_.FormBorderWidthError=em,_.FormErrorTextDefault=Kp,_.FormErrorTypographyWeight=Jp,_.FormHintTextDefault=Zp,_.FormInputBackgroundDefault=Ap,_.FormInputBackgroundDisabled=Bp,_.FormInputBackgroundError=Rp,_.FormInputBackgroundFocus=Ep,_.FormInputBorderDefault=Hp,_.FormInputBorderDisabled=Up,_.FormInputBorderError=zp,_.FormInputBorderFocus=Op,_.FormInputTextDefault=Wp,_.FormInputTextDisabled=Gp,_.FormInputTextPlaceholder=Vp,_.FormLabelTextDefault=Yp,_.FormLabelTextRequired=qp,_.FormLabelTypographyWeight=Xp,_.FormSpacingCheckboxLabelPadding=wl,_.FormSpacingCheckboxSize=xl,_.FormSpacingInputMinHeight=vl,_.FormSpacingInputPadding=_l,_.GanttChart=A_,_.Grid=oa,_.GridGutter=Mm,_.GridGutterHalf=Im,_.GridLines=Bd,_.GridPageWidth=Dm,_.GridWidth=$n,_.Header=la,_.HeaderSSR=gb,_.HeaderSearch=qc,_.HeaderStatic=la,_.Heading=Zt,_.HeadingsNhsukHeadingL=sn,_.HeadingsNhsukHeadingM=on,_.HeadingsNhsukHeadingS=ln,_.HeadingsNhsukHeadingXl=an,_.HeadingsNhsukHeadingXs=cn,_.Hero=Xc,_.Hint=As,_.Images=Z_,_.Input=ia,_.InsetText=z_,_.Label=aa,_.LayoutColumnActions=Cm,_.LayoutColumnFull=vm,_.LayoutColumnHalf=xm,_.LayoutColumnQuarter=Sm,_.LayoutColumnThird=wm,_.LayoutContainerMaxWidth=_m,_.Legend=Nx,_.LineScalesProvider=Ed,_.LineSeriesPrimitive=qd,_.List=Vc,_.MainWrapper=Bs,_.MedicationCard=go,_.MetricCard=Xd,_.NHSBodyText=R1,_.NHSBodyTextLarge=H1,_.NHSBodyTextSmall=O1,_.NHSHeading1=F1,_.NHSHeading2=L1,_.NHSHeading3=A1,_.NHSHeading4=E1,_.NHSHeading5=B1,_.NHSLedeText=z1,_.NHSLedeTextSmall=U1,_.NHSThemeProvider=hb,_.NHS_FALLBACK_FONT_STACK=rw,_.NHS_FONT_STACK=nw,_.NavigationSplitView=_d,_.PageTemplate=$v,_.Pagination=E_,_.Panel=Wu,_.ParagraphsBody=un,_.ParagraphsBodyLarge=dn,_.ParagraphsBodySmall=fn,_.ParagraphsLedeText=hn,_.ParagraphsLedeTextSmall=pn,_.PatientCard=po,_.ProductRoadmap=xd,_.Radios=q0,_.RadiosServer=K0,_.ResponsiveDataGrid=yo,_.ResponsiveDataGridDemo=Pv,_.Row=Fn,_.SPC=I1,_.SPCChart=kf,_.SPCMetricCard=d1,_.Select=Yr,_.SelectOption=Hc,_.ShadowButtonDefault=Ym,_.ShadowButtonFocus=Km,_.ShadowButtonSecondary=qm,_.ShadowButtonWarning=Xm,_.ShadowCardDefault=Jm,_.ShadowCardHover=Zm,_.SizeButtonMinHeightDesktop=ym,_.SizeButtonMinHeightMobile=bm,_.SizeFormControlLarge=cm,_.SizeFormControlMedium=lm,_.SizeFormControlSmall=om,_.SizeFormInputWidth2xl=mm,_.SizeFormInputWidth3xl=gm,_.SizeFormInputWidthLg=hm,_.SizeFormInputWidthMd=fm,_.SizeFormInputWidthSm=dm,_.SizeFormInputWidthXl=pm,_.SizeFormInputWidthXs=um,_.SizeIconExtraLarge=am,_.SizeIconLarge=im,_.SizeIconMedium=rm,_.SizeIconNhsDefault=sm,_.SizeIconSmall=nm,_.SkipLink=co,_.SlotMatrix=nv,_.SortStatusControl=cv,_.Spacing0=Sl,_.Spacing1=Cl,_.Spacing2=kl,_.Spacing3=Tl,_.Spacing4=Nl,_.Spacing5=jl,_.Spacing6=Dl,_.Spacing7=Ml,_.Spacing8=Il,_.Spacing9=Pl,_.SpacingResponsive0Mobile=Ya,_.SpacingResponsive0Tablet=qa,_.SpacingResponsive1Mobile=Xa,_.SpacingResponsive1Tablet=Ka,_.SpacingResponsive2Mobile=Ja,_.SpacingResponsive2Tablet=Za,_.SpacingResponsive3Mobile=Qa,_.SpacingResponsive3Tablet=es,_.SpacingResponsive4Mobile=ts,_.SpacingResponsive4Tablet=ns,_.SpacingResponsive5Mobile=rs,_.SpacingResponsive5Tablet=is,_.SpacingResponsive6Mobile=as,_.SpacingResponsive6Tablet=ss,_.SpacingResponsive7Mobile=os,_.SpacingResponsive7Tablet=ls,_.SpacingResponsive8Mobile=cs,_.SpacingResponsive8Tablet=us,_.SpacingResponsive9Mobile=ds,_.SpacingResponsive9Tablet=fs,_.SpacingUtilities=Q0,_.StateDisabledBackground=Wm,_.StateDisabledBorder=Vm,_.StateDisabledText=Gm,_.StateErrorBackground=Pm,_.StateErrorBorder=$m,_.StateErrorText=Fm,_.StateInfoBackground=Om,_.StateInfoBorder=zm,_.StateInfoText=Um,_.StateSuccessBackground=Lm,_.StateSuccessBorder=Am,_.StateSuccessText=Em,_.StateWarningBackground=Bm,_.StateWarningBorder=Rm,_.StateWarningText=Hm,_.SummaryCard=ed,_.SummaryList=U_,_.Table=en,_.Tabs=X_,_.Tag=Re,_.TaskList=Zu,_.Textarea=Rc,_.TooltipOverlay=Tx,_.TooltipProvider=Yd,_.TransactionalPageTemplate=Fv,_.TransitionButtonDefault=$f,_.TransitionButtonShadow=Ff,_.TransitionCardHover=Af,_.TransitionInputFocus=Lf,_.VisibilityProvider=Sx,_.VitalsCard=bo,_.WIDTH_FRACTIONS=rb,_.WarningCallout=J_,_.WidthContainer=_o,_.WidthUtilities=tb,_.checkFrutigerLoaded=iw,_.createGenericTabsConfig=Da,_.createTCHTabsConfig=mv,_.generateFrutigerFontFace=ew,_.getResponsiveStyles=$1,_.getSpacingClass=eb,_.getWidthClass=nb,_.preloadFrutigerFonts=tw,_.tchDataConfig=rd,_.useColors=V1,_.useComponentSpacing=X1,_.useNHSHeadings=K1,_.useNHSParagraphs=J1,_.useNHSTheme=ub,_.useNHSTypographySystem=Z1,_.useNavigationSplitDrill=Q1,_.useNavigationSplitUrlSync=yd,_.useNhsFdpBreakpoints=vo,_.useResponsiveSpacing=q1,_.useResponsiveValue=Lv,_.useSpacing=G1,_.useSpc=ff,_.useTokens=W1,_.useTypography=Y1,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.js.map
