(function(_,E){typeof exports=="object"&&typeof module<"u"?E(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],E):(_=typeof globalThis<"u"?globalThis:_||self,E(_.NHSFDPDesignSystem={},_.React,_.ReactDOM))})(this,(function(_,E,Kg){"use strict";function Zg(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const X=Zg(E);function Jg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ua={exports:{}},Fr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bc;function Qg(){if(bc)return Fr;bc=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var l in a)l!=="key"&&(i[l]=a[l])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return Fr.Fragment=t,Fr.jsx=n,Fr.jsxs=n,Fr}var Lr={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yc;function e0(){return yc||(yc=1,process.env.NODE_ENV!=="production"&&(function(){function e(H){if(H==null)return null;if(typeof H=="function")return H.$$typeof===F?null:H.displayName||H.name||null;if(typeof H=="string")return H;switch(H){case h:return"Fragment";case b:return"Profiler";case p:return"StrictMode";case j:return"Suspense";case I:return"SuspenseList";case x:return"Activity"}if(typeof H=="object")switch(typeof H.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),H.$$typeof){case y:return"Portal";case T:return(H.displayName||"Context")+".Provider";case C:return(H._context.displayName||"Context")+".Consumer";case w:var V=H.render;return H=H.displayName,H||(H=V.displayName||V.name||"",H=H!==""?"ForwardRef("+H+")":"ForwardRef"),H;case $:return V=H.displayName||null,V!==null?V:e(H.type)||"Memo";case N:V=H._payload,H=H._init;try{return e(H(V))}catch{}}return null}function t(H){return""+H}function n(H){try{t(H);var V=!1}catch{V=!0}if(V){V=console;var O=V.error,se=typeof Symbol=="function"&&Symbol.toStringTag&&H[Symbol.toStringTag]||H.constructor.name||"Object";return O.call(V,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",se),t(H)}}function r(H){if(H===h)return"<>";if(typeof H=="object"&&H!==null&&H.$$typeof===N)return"<...>";try{var V=e(H);return V?"<"+V+">":"<...>"}catch{return"<...>"}}function a(){var H=M.A;return H===null?null:H.getOwner()}function i(){return Error("react-stack-top-frame")}function o(H){if(v.call(H,"key")){var V=Object.getOwnPropertyDescriptor(H,"key").get;if(V&&V.isReactWarning)return!1}return H.key!==void 0}function l(H,V){function O(){S||(S=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",V))}O.isReactWarning=!0,Object.defineProperty(H,"key",{get:O,configurable:!0})}function u(){var H=e(this.type);return D[H]||(D[H]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),H=this.props.ref,H!==void 0?H:null}function c(H,V,O,se,z,pe,ve,ue){return O=pe.ref,H={$$typeof:g,type:H,key:V,props:pe,_owner:z},(O!==void 0?O:null)!==null?Object.defineProperty(H,"ref",{enumerable:!1,get:u}):Object.defineProperty(H,"ref",{enumerable:!1,value:null}),H._store={},Object.defineProperty(H._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(H,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(H,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ve}),Object.defineProperty(H,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:ue}),Object.freeze&&(Object.freeze(H.props),Object.freeze(H)),H}function d(H,V,O,se,z,pe,ve,ue){var he=V.children;if(he!==void 0)if(se)if(L(he)){for(se=0;se<he.length;se++)f(he[se]);Object.freeze&&Object.freeze(he)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(he);if(v.call(V,"key")){he=e(H);var te=Object.keys(V).filter(function(fe){return fe!=="key"});se=0<te.length?"{key: someKey, "+te.join(": ..., ")+": ...}":"{key: someKey}",U[he+se]||(te=0<te.length?"{"+te.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,se,he,te,he),U[he+se]=!0)}if(he=null,O!==void 0&&(n(O),he=""+O),o(V)&&(n(V.key),he=""+V.key),"key"in V){O={};for(var re in V)re!=="key"&&(O[re]=V[re])}else O=V;return he&&l(O,typeof H=="function"?H.displayName||H.name||"Unknown":H),c(H,he,pe,z,a(),O,ve,ue)}function f(H){typeof H=="object"&&H!==null&&H.$$typeof===g&&H._store&&(H._store.validated=1)}var m=E,g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),F=Symbol.for("react.client.reference"),M=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,v=Object.prototype.hasOwnProperty,L=Array.isArray,P=console.createTask?console.createTask:function(){return null};m={react_stack_bottom_frame:function(H){return H()}};var S,D={},B=m.react_stack_bottom_frame.bind(m,i)(),Q=P(r(i)),U={};Lr.Fragment=h,Lr.jsx=function(H,V,O,se,z){var pe=1e4>M.recentlyCreatedOwnerStacks++;return d(H,V,O,!1,se,z,pe?Error("react-stack-top-frame"):B,pe?P(r(H)):Q)},Lr.jsxs=function(H,V,O,se,z){var pe=1e4>M.recentlyCreatedOwnerStacks++;return d(H,V,O,!0,se,z,pe?Error("react-stack-top-frame"):B,pe?P(r(H)):Q)}})()),Lr}var xc;function t0(){return xc||(xc=1,process.env.NODE_ENV==="production"?Ua.exports=Qg():Ua.exports=e0()),Ua.exports}var s=t0(),ms={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var vc;function n0(){return vc||(vc=1,(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(i=a(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var l in i)t.call(i,l)&&i[l]&&(o=a(o,l));return o}function a(i,o){return o?i?i+" "+o:i+o:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(ms)),ms.exports}var r0=n0();const xe=Jg(r0),a0=({text:e,href:t,openInNewWindow:n=!1,className:r,...a})=>{const i=xe("nhsuk-action-link__link",r);return s.jsx("div",{className:"nhsuk-action-link",children:s.jsxs("a",{className:i,href:t,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,...a,children:[s.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right-circle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"36",height:"36",children:[s.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),s.jsx("path",{d:"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"})]}),s.jsx("span",{className:"nhsuk-action-link__text",children:e})]})})},gs=({ariaLabel:e="Account",items:t=[],className:n,variant:r="default"})=>{if(!t||t.length===0)return null;const a=i=>{const o=i.icon?s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__user",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",role:"img","aria-label":i.icon===!0?"User":void 0,children:s.jsx("path",{d:"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z"})}):null,l=i.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:i.html}}):i.text,u=s.jsxs(s.Fragment,{children:[o,l]});return i.href?s.jsx("a",{className:"nhsuk-account__link nhsuk-header__account-link",href:i.href,children:u}):i.action?s.jsx("form",{className:"nhsuk-account__form",action:i.action,method:i.method||"post",children:s.jsx("button",{className:"nhsuk-account__button",type:"submit",role:"button",children:u})}):s.jsx("span",{children:u})};return s.jsx("nav",{className:xe("nhsuk-account",{"nhsuk-account--white":r==="white"},n),"aria-label":e,children:s.jsx("ul",{className:"nhsuk-account__list",children:t.map((i,o)=>i&&s.jsx("li",{className:xe("nhsuk-account__item nhsuk-header__account-item",i.className),children:a(i)},o))})})};var _s=(e=>(e.Primary="primary",e.Secondary="secondary",e.Reverse="reverse",e.Warning="warning",e.Login="login",e))(_s||{}),bs=(e=>(e.Small="small",e.Default="default",e.Large="large",e))(bs||{});function i0(e){const t=e.variant||"primary",n=e.size||"default",r=!!e.fullWidth,a=["nhs-aria-button",`nhs-aria-button--${t}`,n!=="default"?`nhs-aria-button--${n}`:"",r?"nhs-aria-button--full-width":"",e.className||""].filter(Boolean).join(" ");return{tag:e.href?"a":"button",classes:a,data:{module:"nhs-button"},attrs:e.href?{href:e.href,role:"button"}:{type:"button"},preventDoubleClick:!!e.preventDoubleClick}}const{forwardRef:s0,useCallback:Cn,useState:ys}=X;function o0(e,t){const{children:n,variant:r=_s.Primary,size:a=bs.Default,fullWidth:i=!1,className:o="",preventDoubleClick:l=!1,...u}=e,[c,d]=ys(!1),[f,m]=ys(!1),[g,y]=ys(!1),h=i0({variant:r,size:a,fullWidth:i,className:o,preventDoubleClick:l,href:"href"in u?u.href:void 0}),p="disabled"in u?u.disabled:u["aria-disabled"]==="true",b={...c&&{"data-pressed":"true"},...f&&{"data-hovered":"true"},...g&&{"data-focused":"true"},...p&&{"data-disabled":"true"}},C=Cn(()=>!p&&d(!0),[p]),T=Cn(()=>d(!1),[]),w=Cn(()=>!p&&m(!0),[p]),j=Cn(()=>{m(!1),d(!1)},[]),I=Cn(()=>y(!0),[]),$=Cn(()=>y(!1),[]),N=Cn(he=>{he.key===" "&&("href"in u||he.currentTarget.getAttribute("role")==="button")&&(he.preventDefault(),he.currentTarget.click())},[u]),x=Cn(he=>{if(l){const te=he.currentTarget;if(te.getAttribute("data-processing")==="true"){he.preventDefault();return}te.setAttribute("data-processing","true"),setTimeout(()=>{te.removeAttribute("data-processing")},1e3)}},[l]);if("href"in u&&u.href){const{id:he,style:te,title:re,["aria-label"]:fe,["aria-describedby"]:k,["aria-labelledby"]:R,tabIndex:W,...ee}=u,q=u;return s.jsx("a",{ref:t,href:q.href,target:q.target,rel:q.rel,className:h.classes,role:"button",draggable:"false","data-module":"nhs-button",...b,...l&&{"data-prevent-double-click":"true"},...ee,onKeyDown:ae=>{q.onKeyDown?.(ae),N(ae)},onClick:ae=>{q.onClick?.(ae),x(ae)},onMouseDown:ae=>{q.onMouseDown?.(ae),C()},onMouseUp:ae=>{q.onMouseUp?.(ae),T()},onMouseEnter:ae=>{q.onMouseEnter?.(ae),w()},onMouseLeave:ae=>{q.onMouseLeave?.(ae),j()},onFocus:ae=>{q.onFocus?.(ae),I()},onBlur:ae=>{q.onBlur?.(ae),$()},"aria-disabled":q["aria-disabled"],...q["aria-disabled"]==="true"&&{tabIndex:-1},id:he,style:te,title:re,"aria-label":fe,"aria-describedby":k,"aria-labelledby":R,tabIndex:W,children:n})}const{id:F,style:M,title:v,["aria-label"]:L,["aria-describedby"]:P,["aria-labelledby"]:S,tabIndex:D,name:B,value:Q,form:U,formAction:H,formEncType:V,formMethod:O,formNoValidate:se,formTarget:z,autoFocus:pe,...ve}=u,ue=u;return s.jsx("button",{ref:t,type:ue.type||"button",disabled:ue.disabled,className:h.classes,"data-module":"nhs-button",...b,...l&&{"data-prevent-double-click":"true"},...ue.disabled&&{"aria-disabled":"true"},...ve,onKeyDown:he=>{ue.onKeyDown?.(he),N(he)},onClick:he=>{ue.onClick?.(he),x(he)},onMouseDown:he=>{ue.onMouseDown?.(he),C()},onMouseUp:he=>{ue.onMouseUp?.(he),T()},onMouseEnter:he=>{ue.onMouseEnter?.(he),w()},onMouseLeave:he=>{ue.onMouseLeave?.(he),j()},onFocus:he=>{ue.onFocus?.(he),I()},onBlur:he=>{ue.onBlur?.(he),$()},id:F,style:M,title:v,"aria-label":L,"aria-describedby":P,"aria-labelledby":S,tabIndex:D,name:B,value:Q,form:U,formAction:H,formEncType:V,formMethod:O,formNoValidate:se,formTarget:z,autoFocus:pe,children:n})}const lt=s0(o0);lt.displayName="Button";const Ga=({text:e="Back",html:t,href:n="#",className:r,element:a="a",onClick:i,...o})=>{const l=xe("nhsuk-back-link",r),u=xe("nhsuk-back-link__link"),c=()=>s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:s.jsx("path",{d:"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"})}),t?s.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e]});return s.jsx("div",{className:l,children:a==="button"?s.jsx("button",{className:u,onClick:i,type:"button",...o,children:c()}):s.jsx("a",{className:u,href:n,...o,children:c()})})};function l0(e){const{color:t="default",noBorder:n,closable:r,disabled:a,className:i}=e;return{classes:["nhsuk-tag",t!=="default"?`nhsuk-tag--${t}`:"",n?"nhsuk-tag--no-border":"",r?"nhsuk-tag--closable":"",a?"nhsuk-tag--disabled":"",i||""].filter(Boolean).join(" "),showClose:!!r,disabled:!!a}}const Ae=({text:e,html:t,children:n,color:r="default",noBorder:a=!1,closable:i=!1,onClose:o,disabled:l=!1,className:u,...c})=>{const d=l0({color:r,noBorder:a,closable:i,disabled:l,className:u}),f=m=>{m.preventDefault(),m.stopPropagation(),!l&&o&&o()};return s.jsxs("strong",{className:d.classes,...c,children:[n||(t?s.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e),i&&s.jsx("button",{type:"button",className:"nhsuk-tag__close",onClick:f,disabled:l,"aria-label":"Remove",title:"Remove",children:"Ã—"})]})},wc=({id:e,name:t,checked:n,defaultChecked:r=!1,disabled:a=!1,value:i="true",hint:o,errorMessage:l,className:u,children:c,onChange:d,onBlur:f,onFocus:m,attributes:g,...y})=>{const[h,p]=E.useState(r),b=n!==void 0,C=b?n:h;E.useEffect(()=>{b||p(r)},[r,b]);const T=N=>{const x=N.target.checked;b||p(x),d?.(x,N)},w=o?`${e}-hint`:void 0,j=l?`${e}-error`:void 0,I=[w,j].filter(Boolean).join(" ")||void 0,$=xe("nhsuk-form-group",{"nhsuk-form-group--error":!!l},u);return s.jsx("div",{className:$,...y,children:s.jsx("div",{className:"nhsuk-checkboxes",children:s.jsxs("div",{className:"nhsuk-checkboxes__item",children:[s.jsx("input",{className:"nhsuk-checkboxes__input",id:e,name:t||e,type:"checkbox",value:i,checked:C,disabled:a,onChange:T,onBlur:f,onFocus:m,"aria-describedby":I,...g}),s.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:e,children:c}),o&&s.jsx("div",{id:w,className:"nhsuk-checkboxes__hint",children:o}),l&&s.jsxs("div",{id:j,className:"nhsuk-error-message nhsuk-checkboxes__error",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]})]})})})};wc.displayName="Checkbox";function c0(e){const n=(e.type||"text")==="range";return{classes:["nhsuk-input",e.hasError?"nhsuk-input--error":"",n?"nhsuk-input--range":"",!n&&e.width&&e.width!=="full"?`nhsuk-input--width-${e.width}`:"",e.className||""].filter(Boolean).join(" "),isRange:n}}const Va=({id:e,name:t,type:n="text",value:r,defaultValue:a,placeholder:i,disabled:o=!1,readOnly:l=!1,required:u=!1,hasError:c=!1,describedBy:d,className:f,width:m="full",inputMode:g,autoComplete:y,maxLength:h,minLength:p,pattern:b,step:C,min:T,max:w,showValueLabels:j=!1,showCurrentValue:I=!1,valueLabels:$,onChange:N,onBlur:x,onFocus:F,onKeyDown:M,...v})=>{const[L,P]=E.useState(r||a||(n==="range"?T||"0":""));E.useEffect(()=>{r!==void 0&&P(r)},[r]);const S=z=>{const pe=z.target;P(pe.value),("type"in z&&z.nativeEvent||z.type==="keydown")&&N?.(z)},{classes:D,isRange:B}=c0({type:n,hasError:c,width:m,className:f}),Q=r!==void 0,U={id:e,name:t,type:n,placeholder:i,disabled:o,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:y,maxLength:h,minLength:p,pattern:b,step:C,min:T,max:w,onChange:S,onBlur:x,onFocus:F,onKeyDown:z=>{if(B&&/[0-9]/.test(z.key)){const pe=(L?.toString()||"")+z.key;z.target.value=pe,S(z)}M?.(z)},...v},H=!Q&&a!==void 0?{defaultValue:a}:{},V=Q?{value:r}:{},O=()=>s.jsx("input",{className:D,...V,...H,"data-current-value":L,...U}),se=B?s.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[j&&s.jsxs("div",{className:"nhsuk-input-range-labels",children:[s.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:$?.min||T||"0"}),O(),s.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:$?.max||w||"100"})]}),!j&&O(),I&&s.jsx("div",{className:"nhsuk-input-range-current-value",children:s.jsxs("span",{className:"nhsuk-input-range-current-label",children:[$?.current||"Current value:"," ",s.jsx("strong",{children:L})]})})]}):null;return B?se:s.jsx("input",{className:D,id:e,name:t,type:n,value:r,...r===void 0&&a!==void 0?{defaultValue:a}:{},placeholder:i,disabled:o,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:y,maxLength:h,minLength:p,pattern:b,step:C,min:T,max:w,onChange:N,onBlur:x,onFocus:F,onKeyDown:M,...v})};function u0(e){const t=e.size||"m",n=["nhsuk-label",t!=="m"?`nhsuk-label--${t}`:"",e.className||""].filter(Boolean).join(" ");return{tag:e.isPageHeading?"h1":"label",classes:n,size:t,htmlFor:e.isPageHeading?void 0:e.htmlFor,isPageHeading:!!e.isPageHeading}}const Ya=({htmlFor:e,className:t,isPageHeading:n=!1,size:r="m",children:a,...i})=>{const o=u0({size:r,isPageHeading:n,className:t,htmlFor:e}),l=o.tag;return s.jsx(l,{className:o.classes,htmlFor:o.htmlFor,...i,children:n?s.jsx("label",{className:"nhsuk-label-wrapper",htmlFor:e,children:a}):a})};function d0(e){const t=["nhsuk-fieldset",e.className||""].filter(Boolean).join(" "),n=e.legend?["nhsuk-fieldset__legend",e.legend.size?`nhsuk-fieldset__legend--${e.legend.size}`:"",e.legend.className||""].filter(Boolean).join(" "):void 0;return{fieldsetClasses:t,legendClasses:n,legendIsPageHeading:!!e.legend?.isPageHeading,describedBy:e.describedBy}}const qa=({children:e,legend:t,className:n,describedBy:r,...a})=>{const i=d0({className:n,describedBy:r,legend:t?{size:t.size,className:t.className,isPageHeading:t.isPageHeading}:void 0}),o=()=>{const l=t?.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:t.html}}):t?.text;return i.legendIsPageHeading?s.jsx("h1",{className:"nhsuk-fieldset__heading",children:l}):l};return s.jsxs("fieldset",{className:i.fieldsetClasses,"aria-describedby":i.describedBy,...a,children:[t&&(t.text||t.html)&&s.jsx("legend",{className:i.legendClasses,children:o()}),e]})};function f0(e){const t=["nhsuk-checkboxes",e.small?"nhsuk-checkboxes--small":"",e.className||""].filter(Boolean).join(" "),n=["nhsuk-form-group",e.hasError?"nhsuk-form-group--error":""].filter(Boolean).join(" ");return{classes:t,formGroupClasses:n}}const Sc=({items:e,name:t,idPrefix:n,legend:r,isPageHeading:a=!1,legendSize:i="l",hint:o,errorMessage:l,className:u="",small:c=!1,onChange:d,fieldsetAttributes:f,attributes:m,...g})=>{const[y,h]=E.useState(e.filter(N=>N.checked).map(N=>N.value)),p=n||t,b=o?`${p}-hint`:void 0,C=l?`${p}-error`:void 0,T=[b,C].filter(Boolean).join(" ")||void 0,w=(N,x)=>{let F;x?F=[...y,N]:F=y.filter(M=>M!==N),h(F),d?.(F)},j=()=>e.map((N,x)=>{const F=`${p}-${x+1}`,M=`${F}-conditional`,v=y.includes(N.value),L=N.disabled||!1;return s.jsxs("div",{className:"nhsuk-checkboxes__item",children:[s.jsx("input",{className:"nhsuk-checkboxes__input",id:F,name:t,type:"checkbox",value:N.value,checked:v,disabled:L,onChange:P=>w(N.value,P.target.checked),"aria-describedby":N.hint?`${F}-hint`:T,...N.conditional&&{"aria-controls":M,"aria-expanded":v?"true":"false"},...N.attributes}),s.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:F,children:N.text}),N.hint&&s.jsx("div",{id:`${F}-hint`,className:"nhsuk-checkboxes__hint",children:N.hint}),N.conditional&&s.jsx("div",{className:xe("nhsuk-checkboxes__conditional",{"nhsuk-checkboxes__conditional--hidden":!v}),id:M,children:typeof N.conditional=="object"&&N.conditional!==null&&"label"in N.conditional&&"id"in N.conditional&&"name"in N.conditional?s.jsxs("div",{style:{marginTop:"16px"},children:[N.conditional.label&&s.jsx(Ya,{htmlFor:N.conditional.id,children:N.conditional.label}),s.jsx(Va,{...N.conditional})]}):N.conditional})]},N.value)}),{classes:I,formGroupClasses:$}=f0({small:c,className:u,hasError:!!l});return s.jsx("div",{className:$,...m,...g,children:s.jsxs(qa,{legend:r?{text:r,isPageHeading:a,size:i}:void 0,describedBy:T,...f,children:[o&&s.jsx("div",{id:b,className:"nhsuk-hint",children:o}),l&&s.jsxs("div",{id:C,className:"nhsuk-error-message",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]}),s.jsx("div",{className:I,children:j()})]})})};Sc.displayName="Checkboxes";function h0(e){const t=e.resize??"vertical";return{classes:["nhsuk-textarea",e.hasError?"nhsuk-textarea--error":"",t!=="vertical"?`nhsuk-textarea--resize-${t}`:"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}const kc=({id:e,name:t,value:n,defaultValue:r,placeholder:a,disabled:i=!1,readOnly:o=!1,required:l=!1,hasError:u=!1,describedBy:c,className:d,rows:f=5,cols:m,maxLength:g,minLength:y,wrap:h="soft",resize:p="vertical",autoComplete:b,spellCheck:C,onChange:T,onBlur:w,onFocus:j,onKeyDown:I,...$})=>{const{classes:N,describedBy:x}=h0({hasError:u,resize:p,className:d,describedBy:c});return s.jsx("textarea",{className:N,id:e,name:t,value:n,defaultValue:r,placeholder:a,disabled:i,readOnly:o,required:l,"aria-describedby":x,rows:f,cols:m,maxLength:g,minLength:y,wrap:h,autoComplete:b,spellCheck:C,onChange:T,onBlur:w,onFocus:j,onKeyDown:I,...$})};function p0(e){return{classes:["nhsuk-hint",e.className||""].filter(Boolean).join(" "),id:e.id}}const xs=({id:e,className:t,children:n,...r})=>{const a=p0({id:e,className:t});return s.jsx("div",{className:a.classes,id:a.id,...r,children:n})},m0=({id:e,maxLength:t,maxWords:n,threshold:r=75,name:a,value:i,defaultValue:o,rows:l,className:u,countMessage:c,onCountChange:d,onChange:f,...m})=>{const g=i??o??"",[y,h]=E.useState(g),[p,b]=E.useState(0),[C,T]=E.useState(!1),[w,j]=E.useState(!1),I=E.useCallback(v=>n?v.trim()===""?0:v.trim().split(/\s+/).length:v.length,[n]);E.useEffect(()=>{const v=I(y),L=t||n||0,P=L-v,S=Math.floor(L*(r/100));b(P),T(v>L),j(v>=S||v>L),d&&d(v,P)},[y,t,n,r,I,d]);const $=v=>{const L=v.target.value;h(L),f&&f(v)},N=()=>{const v=t||n||0,L=n?"word":"character",P=n?"words":"characters";if(!w)return`You can enter up to ${v} ${v===1?L:P}`;if(C){const S=Math.abs(p);return`You have ${S} ${S===1?L:P} too many`}else return`You have ${p} ${p===1?L:P} remaining`},x=xe("nhsuk-character-count",u),F=xe("nhsuk-character-count__message",{"nhsuk-character-count__message--disabled":!w,"nhsuk-error-message":C},c?.classes),M=xe("nhsuk-js-character-count",{"nhsuk-textarea--error":C});return s.jsxs("div",{className:x,"data-module":"nhsuk-character-count","data-maxlength":t,"data-maxwords":n,"data-threshold":r,"data-testid":"character-count",children:[s.jsx(kc,{id:e,name:a,value:i!==void 0?y:void 0,defaultValue:i===void 0?o??y:void 0,rows:l,className:M,onChange:$,"aria-describedby":`${e}-info`,"aria-invalid":C||void 0,...m}),s.jsx(xs,{id:`${e}-info`,className:F,role:"status","aria-live":"polite",children:N()})]})};function g0(e){return{classes:["nhsuk-select",e.hasError?"nhsuk-select--error":"",e.className||""].filter(Boolean).join(" ")}}const Cc=({value:e,disabled:t=!1,selected:n=!1,className:r,children:a,...i})=>{const o=xe("nhsuk-select__option",r);return s.jsx("option",{className:o,value:e,disabled:t,...i,children:a})},Br=({id:e,name:t,ariaLabel:n,value:r,defaultValue:a,disabled:i=!1,required:o=!1,hasError:l=!1,describedBy:u,className:c,multiple:d=!1,size:f,autoComplete:m,options:g,children:y,onChange:h,onBlur:p,onFocus:b,...C})=>{const{classes:T}=g0({hasError:l,className:c}),w=()=>g?g.map((I,$)=>s.jsx("option",{value:I.value,disabled:I.disabled,"data-initial-selected":I.selected||void 0,children:I.text},`${I.value}-${$}`)):null,j=a===void 0&&r===void 0&&g?g.find(I=>I.selected)?.value:void 0;return s.jsx("select",{className:T,id:e,name:t,"aria-label":n,value:r,defaultValue:a!==void 0?a:j,disabled:i,required:o,"aria-describedby":u,multiple:d,size:f,autoComplete:m,onChange:h,onBlur:p,onFocus:b,...C,children:y||w()})};Br.Option=Cc;function _0(e){return{classes:["nhsuk-radios",e.hasError?"nhsuk-radios--error":"",e.size==="small"?"nhsuk-radios--small":"",e.inline?"nhsuk-radios--inline":"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}function Tc(e,{variant:t,selectedValue:n,enableBehaviourAttr:r,handleChange:a,handleBlur:i,handleFocus:o,handleKeyDown:l,itemsRef:u}){const{onChange:c,onBlur:d,onFocus:f,...m}=e,{name:g,hasError:y=!1,describedBy:h,className:p,size:b="normal",inline:C=!1,options:T,...w}=m,{classes:j,describedBy:I}=_0({hasError:y,size:b,inline:C,className:p,describedBy:h});return s.jsx(qa,{children:s.jsx("div",{className:j,...w,...r?{"data-nhs-behaviour":"radios"}:{},children:T.map(($,N)=>{const x=`${g}-${N}`,F=$.conditional?`${x}-conditional`:void 0,M=n===$.value;return s.jsxs("div",{className:"nhsuk-radios__item",children:[s.jsx("input",{className:"nhsuk-radios__input",id:x,name:g,type:"radio",value:$.value,disabled:$.disabled,...t==="client"?{checked:M,onChange:a,onBlur:i,onFocus:o,onKeyDown:l,ref:v=>{v&&u&&(u.current[N]=v)}}:{defaultChecked:M,"data-nhs-radios-input":!0},"aria-describedby":I}),s.jsx("label",{className:"nhsuk-radios__label",htmlFor:x,children:$.text}),$.hint&&s.jsx("div",{className:"nhsuk-radios__hint",children:$.hint}),$.conditional&&s.jsx("div",{className:xe("nhsuk-radios__conditional",{"nhsuk-radios__conditional--hidden":!M}),id:F,...t==="server"?{"data-nhs-radios-conditional":!0}:{},children:typeof $.conditional=="object"&&$.conditional!==null&&"label"in $.conditional&&"id"in $.conditional&&"name"in $.conditional?s.jsxs("div",{style:{marginTop:"16px"},children:[$.conditional.label&&s.jsx(Ya,{htmlFor:$.conditional.id,children:$.conditional.label}),s.jsx(Va,{...$.conditional})]}):$.conditional})]},$.value)})})})}const b0=({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:a,...i})=>{const[o,l]=E.useState(e||t||""),u=E.useRef([]),c=E.useRef(o),d=g=>{const y=g.target.value;y!==c.current&&(c.current=y,l(y),n?.(g))},f=g=>{a?.(g)},m=E.useCallback(g=>{const{key:y}=g;if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(y))return;g.preventDefault();const h=u.current.filter(T=>T&&!T.disabled),p=h.indexOf(g.currentTarget);if(p===-1)return;let b=p;["ArrowDown","ArrowRight"].includes(y)?b=(p+1)%h.length:["ArrowUp","ArrowLeft"].includes(y)&&(b=(p-1+h.length)%h.length);const C=h[b];C&&(C.focus(),C.checked||C.click())},[]);return Tc({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:a,...i},{variant:"client",selectedValue:o,enableBehaviourAttr:!1,handleChange:d,handleBlur:r,handleFocus:f,handleKeyDown:m,itemsRef:u})},y0=({value:e,defaultValue:t,...n})=>{const r=e||t||"";return Tc({value:e,defaultValue:t,...n},{variant:"server",selectedValue:r,enableBehaviourAttr:!0})};var Tn=(e=>(e.OneQuarter="one-quarter",e.OneThird="one-third",e.OneHalf="one-half",e.TwoThirds="two-thirds",e.ThreeQuarters="three-quarters",e.Full="full",e))(Tn||{}),Nc=(e=>(e.Mobile="mobile",e.Tablet="tablet",e.Desktop="desktop",e.LargeDesktop="large-desktop",e))(Nc||{}),jc=(e=>(e.Left="left",e.Right="right",e))(jc||{}),Dc=(e=>(e.Left="left",e.Center="center",e.Right="right",e))(Dc||{});const vs=({children:e,className:t,fluid:n=!1,maxWidth:r,style:a,...i})=>{const o=xe({"nhsuk-width-container":!n,"nhsuk-width-container-fluid":n},t),l=r?{maxWidth:r,...a||{}}:a;return s.jsx("div",{className:o,style:l,...i,children:e})},Nn=({children:e,className:t,style:n,...r})=>{const a=xe("nhsuk-grid-row",t);return s.jsx("div",{className:a,style:n,...r,children:e})},or=({children:e,width:t=Tn.Full,mobileWidth:n,tabletWidth:r,desktopWidth:a,start:i,className:o,forceWidth:l=!1,style:u,align:c,...d})=>{const f=xe({[`nhsuk-grid-column-${t}`]:!l,[`nhsuk-u-${t}`]:l,[`nhsuk-u-${n}-mobile`]:!!n,[`nhsuk-u-${r}-tablet`]:!!r,[`nhsuk-u-${a}-desktop`]:!!a,[`nhsuk-grid-column-start-${i}`]:i&&i>=1&&i<=7,...c?{[`nhsuk-grid-align-${c}`]:!0}:{}},o);return s.jsx("div",{className:f,style:u,...d,children:e})},Xa=({children:e,className:t,style:n,...r})=>{const i=E.Children.toArray(e)[0],o=E.isValidElement(i)&&(i.type===Nn||typeof i.props=="object"&&i.props&&"className"in i.props&&typeof i.props.className=="string"&&i.props.className.includes("nhsuk-grid-row"));return s.jsx(vs,{className:t,style:n,...r,children:o?e:s.jsx(Nn,{children:e})})},x0=({children:e,type:t="bullet",size:n="medium",border:r=!1,className:a,role:i,as:o,...l})=>{const u=o||(t==="number"?"ol":"ul"),c=xe("nhsuk-list",{"nhsuk-list--bullet":t==="bullet","nhsuk-list--number":t==="number","nhsuk-list--none":t==="none","nhsuk-list--border":r,[`nhsuk-list--${n}`]:n!=="medium"},a);return s.jsx(u,{className:c,role:i,...l,children:e})},v0=({children:e,className:t,...n})=>{const r=xe("nhsuk-list__item",t);return s.jsx("li",{className:r,...n,children:e})},Mc=x0;Mc.Item=v0;const w0=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const a=["nhsuk-spacing-utilities",e&&"nhsuk-spacing-utilities--debug",t].filter(Boolean).join(" ");return s.jsx("div",{className:a,...r,children:n})},S0={margin:e=>`nhsuk-u-margin-${e}`,marginTop:e=>`nhsuk-u-margin-top-${e}`,marginRight:e=>`nhsuk-u-margin-right-${e}`,marginBottom:e=>`nhsuk-u-margin-bottom-${e}`,marginLeft:e=>`nhsuk-u-margin-left-${e}`,padding:e=>`nhsuk-u-padding-${e}`,paddingTop:e=>`nhsuk-u-padding-top-${e}`,paddingRight:e=>`nhsuk-u-padding-right-${e}`,paddingBottom:e=>`nhsuk-u-padding-bottom-${e}`,paddingLeft:e=>`nhsuk-u-padding-left-${e}`,marginResponsive:e=>`nhsuk-u-margin-responsive-${e}`,marginTopResponsive:e=>`nhsuk-u-margin-top-responsive-${e}`,marginRightResponsive:e=>`nhsuk-u-margin-right-responsive-${e}`,marginBottomResponsive:e=>`nhsuk-u-margin-bottom-responsive-${e}`,marginLeftResponsive:e=>`nhsuk-u-margin-left-responsive-${e}`,paddingResponsive:e=>`nhsuk-u-padding-responsive-${e}`,paddingTopResponsive:e=>`nhsuk-u-padding-top-responsive-${e}`,paddingRightResponsive:e=>`nhsuk-u-padding-right-responsive-${e}`,paddingBottomResponsive:e=>`nhsuk-u-padding-bottom-responsive-${e}`,paddingLeftResponsive:e=>`nhsuk-u-padding-left-responsive-${e}`},k0=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const a=["nhsuk-width-utilities",e&&"nhsuk-width-utilities--debug",t].filter(Boolean).join(" ");return s.jsx("div",{className:a,...r,children:n})},C0={width:e=>`nhsuk-u-width-${e}`,widthTablet:e=>`nhsuk-u-width-${e}-tablet`},T0=["full","three-quarters","two-thirds","one-half","one-third","one-quarter"],ws=({as:e="main",size:t="default",className:n,children:r,...a})=>{const i=["nhsuk-main-wrapper",t==="large"&&"nhsuk-main-wrapper--l",t==="small"&&"nhsuk-main-wrapper--s",n].filter(Boolean).join(" ");return s.jsx(e,{className:i,...a,children:r})};function N0(e){switch(e){case"xxl":case"xl":return 1;case"l":return 2;case"m":return 3;case"s":return 4;case"xs":return 5;default:return 2}}function j0(e){const t=e.level??N0(e.size),n=["nhsuk-heading",e.size?`nhsuk-heading--${e.size}`:"",e.className||""].filter(Boolean).join(" "),r=e.marginBottom?{marginBottom:e.marginBottom}:void 0;return{tag:`h${t}`,classes:n,style:r}}const Gt=({level:e,className:t,text:n,html:r,children:a,size:i,marginBottom:o,...l})=>{const u=j0({level:e,size:i,className:t,marginBottom:o}),c=a||(r?s.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n);return E.createElement(u.tag,{className:u.classes,style:u.style,...l},c)};function D0(e){return{classes:["nhsuk-error-message",e.className||""].filter(Boolean).join(" "),id:e.id,visuallyHiddenText:e.visuallyHiddenText??"Error:"}}const Ss=({id:e,className:t,visuallyHiddenText:n="Error:",children:r,...a})=>{const i=D0({id:e,className:t,visuallyHiddenText:n});return s.jsxs("span",{className:i.classes,id:i.id,...a,children:[s.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[i.visuallyHiddenText," "]}),r]})},M0=({titleText:e="There is a problem",titleHtml:t,descriptionText:n,descriptionHtml:r,errorList:a,className:i,children:o,...l})=>{const u=E.useRef(null);E.useEffect(()=>{u.current&&u.current.focus()},[]);const c=xe("nhsuk-error-summary",i),d=()=>t?s.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,f=()=>r?s.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n,m=g=>{const y=g.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:g.html}}):g.text;return g.href?s.jsx("a",{href:g.href,...g.attributes,children:y}):y};return s.jsxs("div",{ref:u,className:c,"aria-labelledby":"error-summary-title",role:"alert",tabIndex:-1,"data-module":"nhsuk-error-summary",...l,children:[s.jsx("h2",{className:"nhsuk-error-summary__title",id:"error-summary-title",children:d()}),s.jsxs("div",{className:"nhsuk-error-summary__body",children:[o&&s.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:o}),!o&&(n||r)&&s.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:f()}),s.jsx("ul",{className:"nhsuk-list nhsuk-error-summary__list",role:"list",children:a.map((g,y)=>s.jsx("li",{children:m(g)},y))})]})]})},$0=({id:e,className:t,items:n,namePrefix:r,values:a={},fieldset:i,hint:o,errorMessage:l,onChange:u,...c})=>{const[d,f]=E.useState(()=>({day:a.day||"",month:a.month||"",year:a.year||""})),[m,g]=E.useState({}),y=S=>S%4===0&&S%100!==0||S%400===0,h=(S,D)=>{const B=[31,28,31,30,31,30,31,31,30,31,30,31];return S===2&&y(D)?29:B[S-1]},p=(S,D,B)=>{if(!S)return;if(!/^\d+$/.test(S))return"Day must be a number";const Q=parseInt(S,10);if(Q<1||Q>31)return"Day must be between 1 and 31";if(D&&B){const U=parseInt(D,10),H=parseInt(B,10);if(!isNaN(U)&&!isNaN(H)&&U>=1&&U<=12){const V=h(U,H);if(Q>V)return`${["January","February","March","April","May","June","July","August","September","October","November","December"][U-1]} ${H} only has ${V} days`}}},b=S=>{if(!S)return;if(!/^\d+$/.test(S))return"Month must be a number";const D=parseInt(S,10);if(D<1||D>12)return"Month must be between 1 and 12"},C=S=>{if(!S)return;if(!/^\d+$/.test(S))return"Year must be a number";const D=parseInt(S,10),B=new Date().getFullYear();if(D<1900||D>B+10)return`Year must be between 1900 and ${B+10}`},T=(S,D,B)=>{if(!S||!D||!B)return;const Q=parseInt(S,10),U=parseInt(D,10),H=parseInt(B,10);if(isNaN(Q)||isNaN(U)||isNaN(H)||U<1||U>12||H<1900)return;const V=h(U,H);Q<1||Q>V},w=E.useCallback((S,D)=>{const B={...d,[S]:D};f(B),u&&u(B)},[d,u]),j=E.useCallback(S=>{const D=d[S];let B;if(S==="day")B=p(D,d.month,d.year);else if(S==="month"){if(B=b(D),!B&&d.day){const Q=p(d.day,D,d.year);g(U=>({...U,day:Q}))}}else if(S==="year"&&(B=C(D),!B&&d.day&&d.month)){const Q=p(d.day,d.month,D);g(U=>({...U,day:Q}))}if(g(Q=>({...Q,[S]:B})),d.day&&d.month&&d.year){const Q=T(S==="day"?D:d.day,S==="month"?D:d.month,S==="year"?D:d.year);Q&&g(U=>({...U,day:Q}))}},[d,p,b,C,T]),I=E.useMemo(()=>[{name:"day",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"month",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"year",classes:"nhsuk-input--width-4",inputmode:"numeric",pattern:"[0-9]*"}],[]),$=n||I;let N=i?.describedBy||"";const x=o?`${e}-hint`:"",F=l?`${e}-error`:"";x&&(N=N?`${N} ${x}`:x),F&&(N=N?`${N} ${F}`:F);const M=Object.values(m).some(S=>S),v=xe("nhsuk-form-group",{"nhsuk-form-group--error":l||M}),L=xe("nhsuk-date-input",t),P=()=>s.jsxs(s.Fragment,{children:[o&&s.jsx(xs,{id:x,className:o.classes,children:o.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:o.html}}):o.text}),l&&s.jsx(Ss,{id:F,className:l.classes,children:l.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text}),Object.entries(m).map(([S,D])=>D?s.jsxs(Ss,{id:`${e}-${S}-error`,className:"nhsuk-error-message",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",D]},`${S}-error`):null),s.jsx("div",{className:L,id:e,"data-testid":"date-input",...c,children:$.map(S=>{const D=S.id||`${e}-${S.name}`,B=r?`${r}[${S.name}]`:S.name,Q=S.label||S.name.charAt(0).toUpperCase()+S.name.slice(1),U=m[S.name],H=d[S.name]||"";let V=N;if(U){const O=`${e}-${S.name}-error`;V=V?`${V} ${O}`:O}return s.jsxs("div",{className:"nhsuk-date-input__item",children:[s.jsx(Ya,{htmlFor:D,className:"nhsuk-date-input__label",children:Q}),s.jsx(Va,{id:D,name:B,value:H,className:xe("nhsuk-date-input__input",S.classes,{"nhsuk-input--error":U}),inputMode:S.inputmode,autoComplete:S.autocomplete,pattern:S.pattern,"aria-describedby":V||void 0,hasError:!!U,onChange:O=>w(S.name,O.target.value),onBlur:()=>j(S.name)})]},S.name)})})]});return s.jsx("div",{className:v,children:i?s.jsx(qa,{className:i.classes,legend:i.legend?{text:i.legend}:void 0,describedBy:N||void 0,children:P()}):P()})},$c={animation:{AnimationDurationFast:"150ms",AnimationDurationNormal:"300ms",AnimationDurationSlow:"500ms",AnimationEasingEaseIn:"cubic-bezier(0.4, 0, 1, 1)",AnimationEasingEaseOut:"cubic-bezier(0, 0, 0.2, 1)",AnimationEasingEaseInOut:"cubic-bezier(0.4, 0, 0.2, 1)",AnimationEasingBounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},transition:{TransitionButtonDefault:"background-color 300ms cubic-bezier(0, 0, 0.2, 1)",TransitionButtonShadow:"box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionInputFocus:"border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionCardHover:"border-color 300ms cubic-bezier(0, 0, 0.2, 1)"},border:{BorderWidthDefault:"1px",BorderWidthFormElement:"2px",BorderWidthFormElementError:"4px",BorderWidthCardBottom:"4px",BorderWidthPanel:"4px",BorderWidthTableHeader:"2px",BorderWidthTableCell:"1px",BorderRadiusNone:"0px",BorderRadiusSmall:"4px",BorderRadiusMedium:"8px",BorderRadiusLarge:"12px",BorderColorDefault:"#d8dde0",BorderColorForm:"#4c6272",BorderColorCard:"#d8dde0",BorderColorCardHover:"#aeb7bd",BorderColorError:"#d5281b"},color:{ColorPrimaryBlue:"#005eb8",ColorPrimaryWhite:"#ffffff",ColorPrimaryBlack:"#212b32",ColorPrimaryGreen:"#007f3b",ColorPrimaryPurple:"#330072",ColorPrimaryDarkPink:"#7c2855",ColorPrimaryRed:"#d5281b",ColorPrimaryYellow:"#ffeb3b",ColorSecondaryPaleYellow:"#fff9c4",ColorSecondaryWarmYellow:"#ffb81c",ColorSecondaryOrange:"#ed8b00",ColorSecondaryAquaGreen:"#00a499",ColorSecondaryPink:"#ae2573",ColorGrey1:"#4c6272",ColorGrey2:"#768692",ColorGrey3:"#aeb7bd",ColorGrey4:"#d8dde0",ColorGrey5:"#f0f4f5",ColorTextPrimary:"#212b32",ColorTextSecondary:"#4c6272",ColorTextReverse:"#ffffff",ColorTextPrint:"#212b32",ColorLinkDefault:"#005eb8",ColorLinkHover:"#7c2855",ColorLinkActive:"#003087",ColorLinkVisited:"#330072",ColorFocusBackground:"#ffeb3b",ColorFocusText:"#212b32",ColorBorderDefault:"#d8dde0",ColorBorderSecondary:"#ffffff33",ColorError:"#d5281b",ColorFormBorder:"#4c6272",ColorFormBackground:"#ffffff",ColorButtonPrimaryBackground:"#007f3b",ColorButtonPrimaryText:"#ffffff",ColorButtonPrimaryHover:"#006530",ColorButtonPrimaryActive:"#004021",ColorButtonPrimaryShadow:"#004021",ColorButtonSecondaryBackground:"#00000000",ColorButtonSecondaryBackgroundSolid:"#ffffff",ColorButtonSecondaryBorder:"#005eb8",ColorButtonSecondaryText:"#005eb8",ColorButtonSecondaryHover:"#d9e5f2",ColorButtonSecondaryActive:"#c7daf0",ColorButtonSecondaryShadow:"#005eb8",ColorButtonReverseBackground:"#ffffff",ColorButtonReverseText:"#212b32",ColorButtonReverseHover:"#d9dde0",ColorButtonReverseActive:"#b3bcc2",ColorButtonReverseShadow:"#b3bcc2",ColorButtonWarningBackground:"#d5281b",ColorButtonWarningHover:"#aa2016",ColorButtonWarningActive:"#6a140e",ColorButtonWarningShadow:"#6a140e",ColorButtonLoginBackground:"#005eb8",ColorButtonLoginHover:"#004b93",ColorButtonLoginActive:"#002f5c",ColorButtonLoginShadow:"#002f5c"},component:{ComponentButtonPaddingMobileVertical:"8px",ComponentButtonPaddingMobileHorizontal:"16px",ComponentButtonPaddingDesktopVertical:"12px",ComponentButtonPaddingDesktopHorizontal:"16px",ComponentButtonShadowSize:"4px",ComponentFormInputMinHeight:"40px",ComponentFormInputPadding:"4px",ComponentFormCheckboxSize:"40px",ComponentFormCheckboxLabelPadding:"12px",ComponentCardPaddingMobile:"16px",ComponentCardPaddingDesktop:"32px",ComponentCardHeadingMargin:"16px",ComponentPanelPaddingMobile:"20px",ComponentPanelPaddingDesktop:"28px",ComponentBreadcrumbChevronMarginLeft:"9px",ComponentBreadcrumbChevronMarginRight:"2px",ComponentBreadcrumbPaddingTopMobile:"16px",ComponentBreadcrumbPaddingTopDesktop:"24px",ComponentSummaryListCellPaddingVertical:"8px",ComponentSummaryListCellPaddingHorizontal:"24px",ComponentSummaryListRowMargin:"16px",ComponentSpread:"4px",ComponentBlur:"4px",ComponentLink:"4px",ComponentDetails:"8px",ComponentExpander:"4px",ComponentPagination:"16px"},button:{ButtonPrimaryBackgroundDefault:"#007f3b",ButtonPrimaryBackgroundHover:"#006530",ButtonPrimaryBackgroundActive:"#004021",ButtonPrimaryBackgroundDisabled:"#d8dde0",ButtonPrimaryTextDefault:"#ffffff",ButtonPrimaryTextDisabled:"#768692",ButtonPrimaryBorderDefault:"#00000000",ButtonPrimaryBorderFocus:"#ffeb3b",ButtonSecondaryBackgroundDefault:"#00000000",ButtonSecondaryBackgroundSolid:"#ffffff",ButtonSecondaryBackgroundHover:"#d9e5f2",ButtonSecondaryBackgroundActive:"#c7daf0",ButtonSecondaryTextDefault:"#005eb8",ButtonSecondaryBorderDefault:"#005eb8",ButtonSpacingPaddingVerticalMobile:"8px",ButtonSpacingPaddingHorizontalMobile:"16px",ButtonSpacingPaddingVerticalDesktop:"12px",ButtonSpacingPaddingHorizontalDesktop:"16px",ButtonBorderWidth:"2px",ButtonBorderRadius:"4px",ButtonShadowSize:"4px",ButtonTypographyWeight:"600"},card:{CardBackgroundDefault:"#ffffff",CardBorderDefault:"#d8dde0",CardBorderHover:"#aeb7bd",CardBorderBottom:"#f0f4f5",CardTextHeading:"#212b32",CardTextDescription:"#212b32",CardTextLink:"#005eb8",CardSpacingPaddingMobile:"16px",CardSpacingPaddingDesktop:"32px",CardSpacingHeadingMargin:"16px",CardBorderWidthDefault:"1px",CardBorderWidthBottom:"4px",CardShadowDefault:"none",CardShadowHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},form:{FormInputBackgroundDefault:"#ffffff",FormInputBackgroundFocus:"#ffffff",FormInputBackgroundDisabled:"#d8dde0",FormInputBackgroundError:"#ffffff",FormInputBorderDefault:"#4c6272",FormInputBorderFocus:"#ffeb3b",FormInputBorderError:"#d5281b",FormInputBorderDisabled:"#aeb7bd",FormInputTextDefault:"#212b32",FormInputTextPlaceholder:"#4c6272",FormInputTextDisabled:"#768692",FormLabelTextDefault:"#212b32",FormLabelTextRequired:"#ffffff",FormLabelTypographyWeight:"600",FormErrorTextDefault:"#d5281b",FormErrorTypographyWeight:"600",FormHintTextDefault:"#4c6272",FormSpacingInputPadding:"4px",FormSpacingInputMinHeight:"40px",FormSpacingCheckboxSize:"40px",FormSpacingCheckboxLabelPadding:"12px",FormBorderWidthDefault:"2px",FormBorderWidthError:"4px",FormBorderRadius:"0px"},size:{SizeIconSmall:"16px",SizeIconMedium:"18px",SizeIconLarge:"24px",SizeIconExtraLarge:"32px",SizeIconNhsDefault:"34px",SizeFormControlSmall:"32px",SizeFormControlMedium:"40px",SizeFormControlLarge:"48px",SizeFormInputWidthXs:"5.4ex",SizeFormInputWidthSm:"7.2ex",SizeFormInputWidthMd:"9ex",SizeFormInputWidthLg:"10.8ex",SizeFormInputWidthXl:"20ex",SizeFormInputWidth2xl:"38ex",SizeFormInputWidth3xl:"56ex",SizeButtonMinHeightMobile:"44px",SizeButtonMinHeightDesktop:"40px"},layout:{LayoutContainerMaxWidth:"1020px",LayoutColumnFull:"100%",LayoutColumnHalf:"50%",LayoutColumnThird:"33.333%",LayoutColumnQuarter:"25%",LayoutColumnActions:"20%"},breakpoint:{BreakpointMobile:"320px",BreakpointTablet:"641px",BreakpointDesktop:"1025px",BreakpointLargeDesktop:"1280px"},grid:{GridPageWidth:"960px",GridGutter:"32px",GridGutterHalf:"16px"},state:{StateErrorBackground:"#d5281b",StateErrorBorder:"#d5281b",StateErrorText:"#ffffff",StateSuccessBackground:"#007f3b",StateSuccessBorder:"#007f3b",StateSuccessText:"#ffffff",StateWarningBackground:"#ffeb3b",StateWarningBorder:"#ffeb3b",StateWarningText:"#212b32",StateInfoBackground:"#005eb8",StateInfoBorder:"#005eb8",StateInfoText:"#ffffff",StateDisabledBackground:"#d8dde0",StateDisabledBorder:"#aeb7bd",StateDisabledText:"#768692"},shadow:{ShadowButtonDefault:"0 4px 0 #004021",ShadowButtonSecondary:"0 4px 0 #005eb8",ShadowButtonWarning:"0 4px 0 #6a140e",ShadowButtonFocus:"0 4px 0 #ffeb3b",ShadowCardDefault:"none",ShadowCardHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},"focus-outline":{FocusOutlineWidth:"4px",FocusOutlineOffset:"0px",FocusOutlineStyle:"solid"},"focus-shadow":{FocusShadowInput:"0 0 0 3px #ffeb3b",FocusShadowButton:"0 0 0 3px #ffeb3b"},elevation:{ElevationNone:"none",ElevationLow:"0 1px 3px rgba(0, 0, 0, 0.12)",ElevationMedium:"0 2px 6px rgba(0, 0, 0, 0.16)",ElevationHigh:"0 4px 12px rgba(0, 0, 0, 0.20)"},spacing:{Spacing0:"0",Spacing1:"4px",Spacing2:"8px",Spacing3:"16px",Spacing4:"24px",Spacing5:"32px",Spacing6:"40px",Spacing7:"48px",Spacing8:"56px",Spacing9:"64px"},"spacing-responsive":{SpacingResponsive0Mobile:"0",SpacingResponsive0Tablet:"0",SpacingResponsive1Mobile:"4px",SpacingResponsive1Tablet:"4px",SpacingResponsive2Mobile:"8px",SpacingResponsive2Tablet:"8px",SpacingResponsive3Mobile:"8px",SpacingResponsive3Tablet:"16px",SpacingResponsive4Mobile:"16px",SpacingResponsive4Tablet:"24px",SpacingResponsive5Mobile:"24px",SpacingResponsive5Tablet:"32px",SpacingResponsive6Mobile:"32px",SpacingResponsive6Tablet:"40px",SpacingResponsive7Mobile:"40px",SpacingResponsive7Tablet:"48px",SpacingResponsive8Mobile:"48px",SpacingResponsive8Tablet:"56px",SpacingResponsive9Mobile:"56px",SpacingResponsive9Tablet:"64px"},font:{FontFamilyBase:"Frutiger W01",FontFamilyFallback:"Arial, Helvetica, sans-serif",FontFamilyPrint:"sans-serif",FontWeightNormal:"400",FontWeightBold:"600",FontWeightLight:"400",FontSize14Mobile:"12px",FontSize14Tablet:"14px",FontSize14Print:"12pt",FontSize16Mobile:"14px",FontSize16Tablet:"16px",FontSize16Print:"12pt",FontSize19Mobile:"16px",FontSize19Tablet:"19px",FontSize19Print:"13pt",FontSize22Mobile:"19px",FontSize22Tablet:"22px",FontSize22Print:"15pt",FontSize26Mobile:"22px",FontSize26Tablet:"26px",FontSize26Print:"17pt",FontSize36Mobile:"27px",FontSize36Tablet:"36px",FontSize36Print:"20pt",FontSize48Mobile:"33px",FontSize48Tablet:"48px",FontSize48Print:"24pt",FontSizeBase:"16px",FontLineHeightBase:"24px"},headings:{xl:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},l:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},m:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},s:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xs:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}}},paragraphs:{body:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bodyLarge:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},bodySmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ledeText:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},ledeTextSmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}}}},Pc=E.createContext($c),P0=({children:e,theme:t={}})=>{const n={...$c,...t};return s.jsx(Pc.Provider,{value:n,children:e})},I0=()=>{const e=E.useContext(Pc);if(!e)throw new Error("useNHSTheme must be used within an NHSThemeProvider");return e};function F0(){return`
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 400;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff") format("woff");
	}
	
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 600;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff") format("woff");
	}
  `}function L0(){if(typeof document>"u"||document.getElementById("nhs-fonts"))return;const e=document.createElement("style");e.id="nhs-fonts",e.textContent=F0(),document.head.appendChild(e)}const B0=({children:e,theme:t})=>(E.useEffect(()=>{L0()},[]),s.jsx(P0,{theme:t,children:e}));function E0(e,{variant:t,isClient:n,menuOpen:r=!1,showMoreButton:a=!1,visibleItems:i,dropdownVisible:o,toggleMenu:l,navContainerRef:u,navListRef:c,searchNode:d}){const{className:f,logo:m={},service:g={},serviceName:y,organisation:h,search:p,account:b,navigation:C,containerClasses:T,variant:w="default",attributes:j={},maxVisibleItems:I,responsiveNavigation:$=!0,...N}=e,x={...g,text:g?.text??y};"maxVisibleItems"in N&&delete N.maxVisibleItems;const F=x.href&&!m.href||x.href&&x.href===m.href,M=F?x.href:m.href,v=xe("nhsuk-header",{"nhsuk-header--organisation":w==="organisation"||h,"nhsuk-header--white":w==="white"},f),L=xe("nhsuk-header__container",T),P=xe("nhsuk-header__navigation",{"nhsuk-header__navigation--white":C?.white,"nhsuk-header__navigation--justified":C?.justified},C?.className),S=()=>s.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":m.ariaLabel||"NHS",children:[s.jsx("title",{children:m.ariaLabel||"NHS"}),s.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),D=()=>m.src?s.jsx("img",{className:"nhsuk-header__organisation-logo",src:m.src,width:"280",alt:m.ariaLabel||"NHS"}):S(),B=()=>h?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"nhsuk-header__organisation-name",children:[h.name,h.split&&s.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",h.split]})]}),h.descriptor&&s.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:h.descriptor})]}):null,Q=(V,O)=>V?O?s.jsx("a",{className:"nhsuk-header__service-name",href:O,children:V}):s.jsx("span",{className:"nhsuk-header__service-name",children:V}):null,U=V=>V.active||V.current?s.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:V.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:V.html}}):V.text}):V.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:V.html}}):V.text,H=()=>s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})});return C?.items,s.jsxs("header",{className:v,role:"banner","data-module":"nhsuk-header",...j,...N,children:[s.jsxs("div",{className:L,children:[s.jsxs("div",{className:"nhsuk-header__service",children:[M?s.jsxs("a",{className:"nhsuk-header__service-logo",href:M,children:[D(),B(),F&&Q(x.text)]}):s.jsxs(s.Fragment,{children:[D(),B(),F&&Q(x.text)]}),x.text&&!F&&Q(x.text,x.href)]}),d??null,s.jsx(gs,{...b,variant:w==="white"?"white":"default"})]}),C&&C.items&&C.items.length>0&&s.jsx("nav",{className:P,"aria-label":C.ariaLabel||"Menu",children:s.jsx("div",{className:xe("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--initializing":n&&t==="client","nhsuk-header__navigation-container--ssr":!n},T),ref:u,children:s.jsxs("ul",{className:"nhsuk-header__navigation-list",ref:c,children:[(C?.items||[]).map((V,O)=>s.jsx("li",{className:xe("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":V.active||V.current,"nhsuk-header__navigation-item--hidden":a&&i!==void 0&&O>=(i??0)},V.className),...V.attributes||{},children:s.jsx("a",{className:"nhsuk-header__navigation-link",href:V.href,...V.active||V.current?{"aria-current":V.current?"page":"true"}:{},children:U(V)})},O)),a&&i!==void 0&&s.jsx("li",{className:"nhsuk-header__navigation-item nhsuk-header__navigation-item--more",children:s.jsxs("button",{className:"nhsuk-header__navigation-button",id:"toggle-more-menu",type:"button","aria-haspopup":"true","aria-expanded":r?"true":"false","aria-controls":"nhsuk-header-more-menu",onClick:l,children:[s.jsx("span",{children:"More"}),H()]})})]})})}),n&&C&&C.items&&C.items.length>0&&r&&o&&s.jsx("div",{className:"nhsuk-header__dropdown-menu",hidden:!o,id:"nhsuk-header-more-menu",children:s.jsx("ul",{className:"nhsuk-header__dropdown-list",children:C.items.slice(i??0).map((V,O)=>s.jsx("li",{className:xe("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":V.active||V.current}),children:s.jsx("a",{className:"nhsuk-header__dropdown-link",href:V.href,...V.active||V.current?{"aria-current":V.current?"page":"true"}:{},onClick:()=>{l?.()},children:U(V)})},`overflow-${(i??0)+O}`))})}),t==="server"]})}const Ic=({mode:e="form",action:t="/search",method:n="get",name:r="q",value:a,placeholder:i="Search",visuallyHiddenLabel:o="Search the NHS website",visuallyHiddenButton:l="Search",className:u,disabled:c=!1,callbacks:d={},isLoading:f=!1,showResults:m=!1,results:g=[],formAttributes:y={},inputAttributes:h={},buttonAttributes:p={},preventDefaultSubmit:b=!1,debounceMs:C=300,minQueryLength:T=1})=>{const[w,j]=E.useState(""),[I,$]=E.useState(!1),N=E.useRef(void 0),x=E.useRef(null),F=E.useRef(null),M=e==="controlled"&&a!==void 0,v=M?a:w,L=E.useCallback(se=>{N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{d.onChange&&se.length>=T&&d.onChange(se)},C)},[d.onChange,C,T]),P=E.useCallback(se=>{const z=se.target.value;M||j(z),e!=="form"&&L(z)},[M,e,L]),S=E.useCallback(se=>{const z=v.trim(),pe={query:z,timestamp:Date.now(),formData:new FormData(se.currentTarget)};e==="controlled"||e==="hybrid"&&b?(se.preventDefault(),d.onSearch&&z.length>=T&&d.onSearch(pe)):e==="hybrid"&&d.onSearch&&z.length>=T&&d.onSearch(pe)},[e,v,d.onSearch,b,T]),D=E.useCallback(()=>{$(!0),d.onFocus?.()},[d.onFocus]),B=E.useCallback(()=>{$(!1),d.onBlur?.()},[d.onBlur]),Q=E.useCallback(()=>{M||j(""),d.onClear?.(),F.current?.focus()},[M,d.onClear]);E.useEffect(()=>()=>{N.current&&clearTimeout(N.current)},[]);const U=()=>s.jsx("svg",{className:xe("nhsuk-icon nhsuk-icon__search",{"nhsuk-icon__search--loading":f}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"})}),H=()=>s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsxs("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[s.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416",repeatCount:"indefinite"})]})}),V=()=>!v||e==="form"?null:s.jsx("button",{type:"button",className:"nhsuk-header__search-clear",onClick:Q,"aria-label":"Clear search",children:s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__close",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z"})})}),O=()=>!m||!g.length||!I?null:s.jsx("div",{className:"nhsuk-header__search-results",role:"listbox",children:g.map(se=>s.jsx("div",{className:"nhsuk-header__search-result",role:"option",children:se.href?s.jsxs("a",{href:se.href,className:"nhsuk-header__search-result-link",children:[s.jsx("span",{className:"nhsuk-header__search-result-title",children:se.title}),se.description&&s.jsx("span",{className:"nhsuk-header__search-result-description",children:se.description})]}):s.jsxs("button",{type:"button",className:"nhsuk-header__search-result-button",onClick:()=>d.onSearch?.({query:se.title,timestamp:Date.now()}),children:[s.jsx("span",{className:"nhsuk-header__search-result-title",children:se.title}),se.description&&s.jsx("span",{className:"nhsuk-header__search-result-description",children:se.description})]})},se.id))});return s.jsxs("div",{className:xe("nhsuk-header__search",u,{"nhsuk-header__search--controlled":e==="controlled","nhsuk-header__search--hybrid":e==="hybrid","nhsuk-header__search--loading":f,"nhsuk-header__search--focused":I,"nhsuk-header__search--has-results":m&&g.length>0}),children:[s.jsxs("form",{ref:x,className:"nhsuk-header__search-form",id:"search",action:e!=="controlled"?t:void 0,method:e!=="controlled"?n:void 0,role:"search",onSubmit:S,...y,children:[s.jsx("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field",children:o}),s.jsxs("div",{className:"nhsuk-header__search-input-wrapper",children:[s.jsx("input",{ref:F,className:"nhsuk-header__search-input nhsuk-input",id:"search-field",name:e!=="controlled"?r:void 0,type:"search",placeholder:i,autoComplete:"off",value:v,onChange:P,onFocus:D,onBlur:B,disabled:c||f,...m&&g.length>0?{"aria-expanded":!0,"aria-haspopup":"listbox"}:{},...h}),V()]}),s.jsxs("button",{className:"nhsuk-header__search-submit",type:"submit",disabled:c||f||e!=="form"&&v.length<T,...p,children:[f?H():U(),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:f?"Searching...":l})]})]}),O()]})},Ka=({className:e,logo:t={},service:n={},organisation:r,search:a,account:i,navigation:o,containerClasses:l,variant:u="default",attributes:c={},...d})=>{const[f,m]=E.useState(!1),[g,y]=E.useState(!1),[h,p]=E.useState(o?.items?.length||0),[b,C]=E.useState(!1),[T,w]=E.useState(!1),j=E.useRef(null),I=E.useRef(null),$=E.useRef(!1);E.useEffect(()=>{typeof window>"u"||w(!0)},[]),E.useEffect(()=>{if(typeof document>"u")return;const M=v=>{v.key==="Escape"&&f&&m(!1)};if(f)return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[f]);const N=E.useRef(null),x=E.useCallback(()=>{if(!T||!o?.items||o.items.length===0||$.current)return;const M=j.current,v=I.current;if(!M||!v)return;$.current=!0,M.classList.add("nhsuk-header__navigation-container--measuring");const L=M.clientWidth,P=Array.from(v.children);if(!P.length){M.classList.remove("nhsuk-header__navigation-container--measuring"),$.current=!1;return}if(N.current==null){const z=document.createElement("button");z.type="button",z.className="nhsuk-header__navigation-button nhsuk-header__navigation-button--prototype",z.style.position="absolute",z.style.visibility="hidden",z.style.pointerEvents="none",z.innerHTML="<span>More</span>",M.appendChild(z),N.current=z.getBoundingClientRect().width||104,M.removeChild(z)}const S=N.current+16;let D=0,B=0;const Q=window.getComputedStyle(M),U=parseFloat(Q.paddingLeft)||0,H=parseFloat(Q.paddingRight)||0;let V=U+H;for(const z of P){const pe=z.getBoundingClientRect().width;if(D+pe+S+V>L)break;D+=pe,B+=1}const O=B<o.items.length,se=O?B:o.items.length;y(z=>z===O?z:O),p(z=>z===se?z:se),M.classList.remove("nhsuk-header__navigation-container--measuring"),$.current=!1},[T,o?.items]);E.useEffect(()=>{if(!T)return;const M=j.current;if(!M)return;let v=null;const L=()=>{v==null&&(v=window.requestAnimationFrame(()=>{v=null,x()}))};x();const P=new ResizeObserver(()=>L());return P.observe(M),I.current&&P.observe(I.current),()=>{v!=null&&window.cancelAnimationFrame(v),P.disconnect()}},[T,x]),E.useEffect(()=>{T&&x()},[o?.items?.length,T,x]);const F=M=>{M&&(M.preventDefault(),M.stopPropagation());const v=!f;m(v),C(v)};return E0({className:e,logo:t,service:n,organisation:r,search:a,account:i,navigation:o,containerClasses:l,variant:u,attributes:c,...d},{variant:"client",isClient:T,menuOpen:f,showMoreButton:g,visibleItems:h,dropdownVisible:b,toggleMenu:F,navContainerRef:j,navListRef:I,searchNode:a?s.jsx(Ic,{...a}):null})};function A0(e,{variant:t,isClient:n}){const{className:r,logo:a={},service:i={},serviceName:o,organisation:l,account:u,navigation:c,containerClasses:d,variant:f="default",attributes:m={},maxVisibleItems:g,responsiveNavigation:y=!0,...h}=e;"maxVisibleItems"in h&&delete h.maxVisibleItems;const p={...i,text:i?.text??o},b=p.href&&!a.href||p.href&&p.href===a.href,C=b?p.href:a.href,T=xe("nhsuk-header",{"nhsuk-header--organisation":f==="organisation"||l,"nhsuk-header--white":f==="white"},r),w=xe("nhsuk-header__container",d),j=xe("nhsuk-header__navigation",{"nhsuk-header__navigation--white":c?.white,"nhsuk-header__navigation--justified":c?.justified},c?.className),I=()=>s.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":a.ariaLabel||"NHS",children:[s.jsx("title",{children:a.ariaLabel||"NHS"}),s.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),$=()=>a.src?s.jsx("img",{className:"nhsuk-header__organisation-logo",src:a.src,width:"280",alt:a.ariaLabel||"NHS"}):I(),N=()=>l?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"nhsuk-header__organisation-name",children:[l.name,l.split&&s.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",l.split]})]}),l.descriptor&&s.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:l.descriptor})]}):null,x=(P,S)=>P?S?s.jsx("a",{className:"nhsuk-header__service-name",href:S,children:P}):s.jsx("span",{className:"nhsuk-header__service-name",children:P}):null,F=P=>P.active||P.current?s.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:P.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:P.html}}):P.text}):P.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:P.html}}):P.text,M=c?.items&&!y,v=M?[]:c?.items,L=M?c.items:[];return s.jsxs("header",{className:T,role:"banner","data-module":"nhsuk-header",...m,...h,children:[s.jsxs("div",{className:w,children:[s.jsxs("div",{className:"nhsuk-header__service",children:[C?s.jsxs("a",{className:"nhsuk-header__service-logo",href:C,children:[$(),N(),b&&x(p.text)]}):s.jsxs(s.Fragment,{children:[$(),N(),b&&x(p.text)]}),p.text&&!b&&x(p.text,p.href)]}),s.jsx(gs,{...u,variant:f==="white"?"white":"default"})]}),c&&c.items&&c.items.length>0&&s.jsx("nav",{className:j,"aria-label":c.ariaLabel||"Menu",children:s.jsx("div",{className:xe("nhsuk-header_navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--ssr":!n},d),children:s.jsx("ul",{className:"nhsuk-header__navigation-list",children:(v||[]).map((P,S)=>s.jsx("li",{className:xe("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":P.active||P.current},P.className),...P.attributes||{},children:s.jsx("a",{className:"nhsuk-header__navigation-link",href:P.href,...P.active||P.current?{"aria-current":P.current?"page":"true"}:{},children:F(P)})},S))})})}),M&&L.length>0&&s.jsx("div",{className:"nhsuk-header__dropdown-menu","data-ssr-overflow":"true",children:s.jsx("ul",{className:"nhsuk-header__dropdown-list",children:L.map((P,S)=>s.jsx("li",{className:xe("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":P.active||P.current}),children:s.jsx("a",{className:"nhsuk-header__dropdown-link",href:P.href,...P.active||P.current?{"aria-current":P.current?"page":"true"}:{},children:F(P)})},`overflow-server-${S}`))})})]})}const R0=e=>A0(e,{variant:"server",isClient:!1}),Fc=({heading:e,headingLevel:t=1,headingClasses:n="",text:r,html:a,imageURL:i,containerClasses:o="",classes:l="",children:u,...c})=>{const d=["nhsuk-hero",i&&e?"nhsuk-hero--image nhsuk-hero--image-description":"",i&&!e?"nhsuk-hero--image":"",l].filter(Boolean).join(" "),f=["nhsuk-width-container",o,i?"":"nhsuk-hero--border"].filter(Boolean).join(" "),m=["nhsuk-hero__heading",n,!u&&!r&&!a?"nhsuk-u-margin-bottom-0":""].filter(Boolean).join(" "),g=u||e||r||a,y=()=>{if(!e)return null;const h={className:m};switch(t){case 1:return s.jsx("h1",{...h,children:e});case 2:return s.jsx("h2",{...h,children:e});case 3:return s.jsx("h3",{...h,children:e});case 4:return s.jsx("h4",{...h,children:e});case 5:return s.jsx("h5",{...h,children:e});case 6:return s.jsx("h6",{...h,children:e});default:return s.jsx("h1",{...h,children:e})}};return s.jsxs("section",{className:d,style:i?{backgroundImage:`url('${i}')`}:void 0,role:"banner",...c,children:[i&&s.jsx("div",{className:"nhsuk-hero__overlay",children:g&&s.jsx("div",{className:f,children:s.jsx("div",{className:"nhsuk-grid-row",children:s.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:s.jsxs("div",{className:"nhsuk-hero-content",children:[y(),u||(a?s.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):r?s.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null),s.jsx("span",{className:"nhsuk-hero__arrow","aria-hidden":"true"})]})})})})}),!i&&g&&s.jsx("div",{className:f,children:s.jsx("div",{className:"nhsuk-grid-row",children:s.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:s.jsxs("div",{className:"nhsuk-hero__wrapper",children:[y(),u||(a?s.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):r?s.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null)]})})})})]})};Fc.displayName="Hero";const ks=({className:e,links:t=[],linksColumn2:n,linksColumn3:r,metaLinks:a,copyright:i="Â© NHS England",containerClasses:o,attributes:l={},style:u,footerStyle:c,containerStyle:d})=>{const f=(g,y=!1)=>s.jsx("li",{className:xe("nhsuk-footer__list-item",{"nhsuk-footer-default__list-item":y}),children:s.jsx("a",{className:"nhsuk-footer__list-item-link",href:g.URL,target:g.newWindow?"_blank":void 0,rel:g.newWindow?"noopener noreferrer":void 0,children:g.label})},`${g.URL}-${g.label}`),m=!!(n||r);return s.jsx("footer",{role:"contentinfo",...l,style:{...l?.style,...u},children:s.jsxs("div",{className:"nhsuk-footer-container",children:[s.jsxs("div",{className:xe("nhsuk-width-container",o),style:d,children:[s.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Support links"}),s.jsx("div",{className:xe("nhsuk-footer",e),style:c,children:m?s.jsxs(s.Fragment,{children:[t.length>0&&s.jsx("ul",{className:"nhsuk-footer__list",children:t.map(g=>f(g))}),n&&n.length>0&&s.jsx("ul",{className:"nhsuk-footer__list",children:n.map(g=>f(g))}),r&&r.length>0&&s.jsx("ul",{className:"nhsuk-footer__list",children:r.map(g=>f(g))}),a&&a.length>0&&s.jsx("ul",{className:"nhsuk-footer__list nhsuk-footer__meta",children:a.map(g=>f(g))})]}):s.jsxs("ul",{className:"nhsuk-footer__list",children:[t.map(g=>f(g,!0)),(n||[]).map(g=>f(g,!0)),(r||[]).map(g=>f(g,!0)),(a||[]).map(g=>f(g,!0))]})}),!m&&s.jsx("div",{children:s.jsx("p",{className:"nhsuk-footer__copyright",children:i})})]}),m&&s.jsx("div",{className:"nhsuk-width-container",children:s.jsx("div",{children:s.jsx("p",{className:"nhsuk-footer__copyright",children:i})})})]})})};function Za(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function H0(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cs(e){let t,n,r;e.length!==2?(t=Za,n=(l,u)=>Za(e(l),u),r=(l,u)=>e(l)-u):(t=e===Za||e===H0?e:O0,n=e,r=e);function a(l,u,c=0,d=l.length){if(c<d){if(t(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<0?c=f+1:d=f}while(c<d)}return c}function i(l,u,c=0,d=l.length){if(c<d){if(t(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<=0?c=f+1:d=f}while(c<d)}return c}function o(l,u,c=0,d=l.length){const f=a(l,u,c,d-1);return f>c&&r(l[f-1],u)>-r(l[f],u)?f-1:f}return{left:a,center:o,right:i}}function O0(){return 0}function z0(e){return e===null?NaN:+e}const W0=Cs(Za).right;Cs(z0).center;function Lc(e,t){let n,r;if(t===void 0)for(const a of e)a!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)));else{let a=-1;for(let i of e)(i=t(i,++a,e))!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)))}return[n,r]}class Bc extends Map{constructor(t,n=V0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(Ec(this,t))}has(t){return super.has(Ec(this,t))}set(t,n){return super.set(U0(this,t),n)}delete(t){return super.delete(G0(this,t))}}function Ec({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function U0({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function G0({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function V0(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Y0=Math.sqrt(50),q0=Math.sqrt(10),X0=Math.sqrt(2);function Ja(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=Y0?10:i>=q0?5:i>=X0?2:1;let l,u,c;return a<0?(c=Math.pow(10,-a)/o,l=Math.round(e*c),u=Math.round(t*c),l/c<e&&++l,u/c>t&&--u,c=-c):(c=Math.pow(10,a)*o,l=Math.round(e/c),u=Math.round(t/c),l*c<e&&++l,u*c>t&&--u),u<l&&.5<=n&&n<2?Ja(e,t,n*2):[l,u,c]}function K0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,i,o]=r?Ja(t,e,n):Ja(e,t,n);if(!(i>=a))return[];const l=i-a+1,u=new Array(l);if(r)if(o<0)for(let c=0;c<l;++c)u[c]=(i-c)/-o;else for(let c=0;c<l;++c)u[c]=(i-c)*o;else if(o<0)for(let c=0;c<l;++c)u[c]=(a+c)/-o;else for(let c=0;c<l;++c)u[c]=(a+c)*o;return u}function Ts(e,t,n){return t=+t,e=+e,n=+n,Ja(e,t,n)[2]}function Ns(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?Ts(t,e,n):Ts(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function Z0(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++r<a;)i[r]=e+r*n;return i}function Qa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Ac=Symbol("implicit");function Rc(){var e=new Bc,t=[],n=[],r=Ac;function a(i){let o=e.get(i);if(o===void 0){if(r!==Ac)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Bc;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Rc(t,n).unknown(r)},Qa.apply(a,arguments),a}function Hc(){var e=Rc().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,i,o,l=!1,u=0,c=0,d=.5;delete e.unknown;function f(){var m=t().length,g=a<r,y=g?a:r,h=g?r:a;i=(h-y)/Math.max(1,m-u+c*2),l&&(i=Math.floor(i)),y+=(h-y-i*(m-u))*d,o=i*(1-u),l&&(y=Math.round(y),o=Math.round(o));var p=Z0(m).map(function(b){return y+i*b});return n(g?p.reverse():p)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([r,a]=m,r=+r,a=+a,f()):[r,a]},e.rangeRound=function(m){return[r,a]=m,r=+r,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(u=Math.min(1,c=+m),f()):u},e.paddingInner=function(m){return arguments.length?(u=Math.min(1,m),f()):u},e.paddingOuter=function(m){return arguments.length?(c=+m,f()):c},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return Hc(t(),[r,a]).round(l).paddingInner(u).paddingOuter(c).align(d)},Qa.apply(f(),arguments)}function js(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Oc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Er(){}var Ar=.7,ei=1/Ar,lr="\\s*([+-]?\\d+)\\s*",Rr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",J0=/^#([0-9a-f]{3,8})$/,Q0=new RegExp(`^rgb\\(${lr},${lr},${lr}\\)$`),e_=new RegExp(`^rgb\\(${Vt},${Vt},${Vt}\\)$`),t_=new RegExp(`^rgba\\(${lr},${lr},${lr},${Rr}\\)$`),n_=new RegExp(`^rgba\\(${Vt},${Vt},${Vt},${Rr}\\)$`),r_=new RegExp(`^hsl\\(${Rr},${Vt},${Vt}\\)$`),a_=new RegExp(`^hsla\\(${Rr},${Vt},${Vt},${Rr}\\)$`),zc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};js(Er,Hr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wc,formatHex:Wc,formatHex8:i_,formatHsl:s_,formatRgb:Uc,toString:Uc});function Wc(){return this.rgb().formatHex()}function i_(){return this.rgb().formatHex8()}function s_(){return Xc(this).formatHsl()}function Uc(){return this.rgb().formatRgb()}function Hr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=J0.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Gc(t):n===3?new St(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ti(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ti(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Q0.exec(e))?new St(t[1],t[2],t[3],1):(t=e_.exec(e))?new St(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=t_.exec(e))?ti(t[1],t[2],t[3],t[4]):(t=n_.exec(e))?ti(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=r_.exec(e))?qc(t[1],t[2]/100,t[3]/100,1):(t=a_.exec(e))?qc(t[1],t[2]/100,t[3]/100,t[4]):zc.hasOwnProperty(e)?Gc(zc[e]):e==="transparent"?new St(NaN,NaN,NaN,0):null}function Gc(e){return new St(e>>16&255,e>>8&255,e&255,1)}function ti(e,t,n,r){return r<=0&&(e=t=n=NaN),new St(e,t,n,r)}function o_(e){return e instanceof Er||(e=Hr(e)),e?(e=e.rgb(),new St(e.r,e.g,e.b,e.opacity)):new St}function Ds(e,t,n,r){return arguments.length===1?o_(e):new St(e,t,n,r??1)}function St(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}js(St,Ds,Oc(Er,{brighter(e){return e=e==null?ei:Math.pow(ei,e),new St(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ar:Math.pow(Ar,e),new St(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new St(Hn(this.r),Hn(this.g),Hn(this.b),ni(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vc,formatHex:Vc,formatHex8:l_,formatRgb:Yc,toString:Yc}));function Vc(){return`#${On(this.r)}${On(this.g)}${On(this.b)}`}function l_(){return`#${On(this.r)}${On(this.g)}${On(this.b)}${On((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yc(){const e=ni(this.opacity);return`${e===1?"rgb(":"rgba("}${Hn(this.r)}, ${Hn(this.g)}, ${Hn(this.b)}${e===1?")":`, ${e})`}`}function ni(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function On(e){return e=Hn(e),(e<16?"0":"")+e.toString(16)}function qc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new zt(e,t,n,r)}function Xc(e){if(e instanceof zt)return new zt(e.h,e.s,e.l,e.opacity);if(e instanceof Er||(e=Hr(e)),!e)return new zt;if(e instanceof zt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-a,u=(i+a)/2;return l?(t===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?i+a:2-i-a,o*=60):l=u>0&&u<1?0:o,new zt(o,l,u,e.opacity)}function c_(e,t,n,r){return arguments.length===1?Xc(e):new zt(e,t,n,r??1)}function zt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}js(zt,c_,Oc(Er,{brighter(e){return e=e==null?ei:Math.pow(ei,e),new zt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ar:Math.pow(Ar,e),new zt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new St(Ms(e>=240?e-240:e+120,a,r),Ms(e,a,r),Ms(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new zt(Kc(this.h),ri(this.s),ri(this.l),ni(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ni(this.opacity);return`${e===1?"hsl(":"hsla("}${Kc(this.h)}, ${ri(this.s)*100}%, ${ri(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Kc(e){return e=(e||0)%360,e<0?e+360:e}function ri(e){return Math.max(0,Math.min(1,e||0))}function Ms(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const $s=e=>()=>e;function u_(e,t){return function(n){return e+n*t}}function d_(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function f_(e){return(e=+e)==1?Zc:function(t,n){return n-t?d_(t,n,e):$s(isNaN(t)?n:t)}}function Zc(e,t){var n=t-e;return n?u_(e,n):$s(isNaN(e)?t:e)}const Jc=(function e(t){var n=f_(t);function r(a,i){var o=n((a=Ds(a)).r,(i=Ds(i)).r),l=n(a.g,i.g),u=n(a.b,i.b),c=Zc(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=u(d),a.opacity=c(d),a+""}}return r.gamma=e,r})(1);function h_(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function p_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function m_(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=Fs(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<r;++o)i[o]=a[o](l);return i}}function g_(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ai(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function __(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Fs(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Ps=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Is=new RegExp(Ps.source,"g");function b_(e){return function(){return e}}function y_(e){return function(t){return e(t)+""}}function x_(e,t){var n=Ps.lastIndex=Is.lastIndex=0,r,a,i,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=Ps.exec(e))&&(a=Is.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,u.push({i:o,x:ai(r,a)})),n=Is.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?u[0]?y_(u[0].x):b_(t):(t=u.length,function(c){for(var d=0,f;d<t;++d)l[(f=u[d]).i]=f.x(c);return l.join("")})}function Fs(e,t){var n=typeof t,r;return t==null||n==="boolean"?$s(t):(n==="number"?ai:n==="string"?(r=Hr(t))?(t=r,Jc):x_:t instanceof Hr?Jc:t instanceof Date?g_:p_(t)?h_:Array.isArray(t)?m_:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?__:ai)(e,t)}function v_(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function w_(e){return function(){return e}}function S_(e){return+e}var Qc=[0,1];function cr(e){return e}function Ls(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:w_(isNaN(t)?NaN:.5)}function k_(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function C_(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=Ls(a,r),i=n(o,i)):(r=Ls(r,a),i=n(i,o)),function(l){return i(r(l))}}function T_(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Ls(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var u=W0(e,l,1,r)-1;return i[u](a[u](l))}}function eu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function N_(){var e=Qc,t=Qc,n=Fs,r,a,i,o=cr,l,u,c;function d(){var m=Math.min(e.length,t.length);return o!==cr&&(o=k_(e[0],e[m-1])),l=m>2?T_:C_,u=c=null,f}function f(m){return m==null||isNaN(m=+m)?i:(u||(u=l(e.map(r),t,n)))(r(o(m)))}return f.invert=function(m){return o(a((c||(c=l(t,e.map(r),ai)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,S_),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),n=v_,d()},f.clamp=function(m){return arguments.length?(o=m?!0:cr,d()):o!==cr},f.interpolate=function(m){return arguments.length?(n=m,d()):n},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,g){return r=m,a=g,d()}}function tu(){return N_()(cr,cr)}function j_(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ii(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ur(e){return e=ii(Math.abs(e)),e?e[1]:NaN}function D_(e,t){return function(n,r){for(var a=n.length,i=[],o=0,l=e[0],u=0;a>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),i.push(n.substring(a-=l,a+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function M_(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var $_=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function si(e){if(!(t=$_.exec(e)))throw new Error("invalid format: "+e);var t;return new Bs({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}si.prototype=Bs.prototype;function Bs(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Bs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function P_(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var nu;function I_(e,t){var n=ii(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(nu=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+ii(e,Math.max(0,t+i-1))[0]}function ru(e,t){var n=ii(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const au={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:j_,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ru(e*100,t),r:ru,s:I_,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function iu(e){return e}var su=Array.prototype.map,ou=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function F_(e){var t=e.grouping===void 0||e.thousands===void 0?iu:D_(su.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?iu:M_(su.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"âˆ’":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function c(f){f=si(f);var m=f.fill,g=f.align,y=f.sign,h=f.symbol,p=f.zero,b=f.width,C=f.comma,T=f.precision,w=f.trim,j=f.type;j==="n"?(C=!0,j="g"):au[j]||(T===void 0&&(T=12),w=!0,j="g"),(p||m==="0"&&g==="=")&&(p=!0,m="0",g="=");var I=h==="$"?n:h==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",$=h==="$"?r:/[%p]/.test(j)?o:"",N=au[j],x=/[defgprs%]/.test(j);T=T===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function F(M){var v=I,L=$,P,S,D;if(j==="c")L=N(M)+L,M="";else{M=+M;var B=M<0||1/M<0;if(M=isNaN(M)?u:N(Math.abs(M),T),w&&(M=P_(M)),B&&+M==0&&y!=="+"&&(B=!1),v=(B?y==="("?y:l:y==="-"||y==="("?"":y)+v,L=(j==="s"?ou[8+nu/3]:"")+L+(B&&y==="("?")":""),x){for(P=-1,S=M.length;++P<S;)if(D=M.charCodeAt(P),48>D||D>57){L=(D===46?a+M.slice(P+1):M.slice(P))+L,M=M.slice(0,P);break}}}C&&!p&&(M=t(M,1/0));var Q=v.length+M.length+L.length,U=Q<b?new Array(b-Q+1).join(m):"";switch(C&&p&&(M=t(U+M,U.length?b-L.length:1/0),U=""),g){case"<":M=v+M+L+U;break;case"=":M=v+U+M+L;break;case"^":M=U.slice(0,Q=U.length>>1)+v+M+L+U.slice(Q);break;default:M=U+v+M+L;break}return i(M)}return F.toString=function(){return f+""},F}function d(f,m){var g=c((f=si(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(ur(m)/3)))*3,h=Math.pow(10,-y),p=ou[8+y/3];return function(b){return g(h*b)+p}}return{format:c,formatPrefix:d}}var oi,lu,cu;L_({thousands:",",grouping:[3],currency:["$",""]});function L_(e){return oi=F_(e),lu=oi.format,cu=oi.formatPrefix,oi}function B_(e){return Math.max(0,-ur(Math.abs(e)))}function E_(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ur(t)/3)))*3-ur(Math.abs(e)))}function A_(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ur(t)-ur(e))+1}function R_(e,t,n,r){var a=Ns(e,t,n),i;switch(r=si(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=E_(a,o))&&(r.precision=i),cu(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=A_(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=B_(a))&&(r.precision=i-(r.type==="%")*2);break}}return lu(r)}function H_(e){var t=e.domain;return e.ticks=function(n){var r=t();return K0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return R_(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],l=r[i],u,c,d=10;for(l<o&&(c=o,o=l,l=c,c=a,a=i,i=c);d-- >0;){if(c=Ts(o,l,n),c===u)return r[a]=o,r[i]=l,t(r);if(c>0)o=Math.floor(o/c)*c,l=Math.ceil(l/c)*c;else if(c<0)o=Math.ceil(o*c)/c,l=Math.floor(l*c)/c;else break;u=c}return e},e}function li(){var e=tu();return e.copy=function(){return eu(e,li())},Qa.apply(e,arguments),H_(e)}function O_(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}const Es=new Date,As=new Date;function it(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const u=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return u;let c;do u.push(c=new Date(+i)),t(i,l),e(i);while(c<i&&i<o);return u},a.filter=i=>it(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(Es.setTime(+i),As.setTime(+o),e(Es),e(As),Math.floor(n(Es,As))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?o=>r(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const ci=it(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ci.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?it(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ci),ci.range;const pn=1e3,Lt=pn*60,mn=Lt*60,gn=mn*24,Rs=gn*7,uu=gn*30,Hs=gn*365,dr=it(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*pn)},(e,t)=>(t-e)/pn,e=>e.getUTCSeconds());dr.range;const Os=it(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*pn)},(e,t)=>{e.setTime(+e+t*Lt)},(e,t)=>(t-e)/Lt,e=>e.getMinutes());Os.range,it(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Lt)},(e,t)=>(t-e)/Lt,e=>e.getUTCMinutes()).range;const zs=it(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*pn-e.getMinutes()*Lt)},(e,t)=>{e.setTime(+e+t*mn)},(e,t)=>(t-e)/mn,e=>e.getHours());zs.range,it(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*mn)},(e,t)=>(t-e)/mn,e=>e.getUTCHours()).range;const Or=it(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lt)/gn,e=>e.getDate()-1);Or.range;const Ws=it(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/gn,e=>e.getUTCDate()-1);Ws.range,it(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/gn,e=>Math.floor(e/gn)).range;function zn(e){return it(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Lt)/Rs)}const ui=zn(0),di=zn(1),z_=zn(2),W_=zn(3),fr=zn(4),U_=zn(5),G_=zn(6);ui.range,di.range,z_.range,W_.range,fr.range,U_.range,G_.range;function Wn(e){return it(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Rs)}const du=Wn(0),fi=Wn(1),V_=Wn(2),Y_=Wn(3),hr=Wn(4),q_=Wn(5),X_=Wn(6);du.range,fi.range,V_.range,Y_.range,hr.range,q_.range,X_.range;const zr=it(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());zr.range,it(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()).range;const _n=it(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());_n.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:it(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),_n.range;const Un=it(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Un.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:it(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),Un.range;function K_(e,t,n,r,a,i){const o=[[dr,1,pn],[dr,5,5*pn],[dr,15,15*pn],[dr,30,30*pn],[i,1,Lt],[i,5,5*Lt],[i,15,15*Lt],[i,30,30*Lt],[a,1,mn],[a,3,3*mn],[a,6,6*mn],[a,12,12*mn],[r,1,gn],[r,2,2*gn],[n,1,Rs],[t,1,uu],[t,3,3*uu],[e,1,Hs]];function l(c,d,f){const m=d<c;m&&([c,d]=[d,c]);const g=f&&typeof f.range=="function"?f:u(c,d,f),y=g?g.range(c,+d+1):[];return m?y.reverse():y}function u(c,d,f){const m=Math.abs(d-c)/f,g=Cs(([,,p])=>p).right(o,m);if(g===o.length)return e.every(Ns(c/Hs,d/Hs,f));if(g===0)return ci.every(Math.max(Ns(c,d,f),1));const[y,h]=o[m/o[g-1][2]<o[g][2]/m?g-1:g];return y.every(h)}return[l,u]}const[Z_,J_]=K_(_n,zr,ui,Or,zs,Os);function Us(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Gs(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Wr(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Q_(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,c=Ur(a),d=Gr(a),f=Ur(i),m=Gr(i),g=Ur(o),y=Gr(o),h=Ur(l),p=Gr(l),b=Ur(u),C=Gr(u),T={a:B,A:Q,b:U,B:H,c:null,d:_u,e:_u,f:wb,g:Pb,G:Fb,H:yb,I:xb,j:vb,L:bu,m:Sb,M:kb,p:V,q:O,Q:ku,s:Cu,S:Cb,u:Tb,U:Nb,V:jb,w:Db,W:Mb,x:null,X:null,y:$b,Y:Ib,Z:Lb,"%":Su},w={a:se,A:z,b:pe,B:ve,c:null,d:xu,e:xu,f:Rb,g:Xb,G:Zb,H:Bb,I:Eb,j:Ab,L:vu,m:Hb,M:Ob,p:ue,q:he,Q:ku,s:Cu,S:zb,u:Wb,U:Ub,V:Gb,w:Vb,W:Yb,x:null,X:null,y:qb,Y:Kb,Z:Jb,"%":Su},j={a:F,A:M,b:v,B:L,c:P,d:mu,e:mu,f:mb,g:pu,G:hu,H:gu,I:gu,j:db,L:pb,m:ub,M:fb,p:x,q:cb,Q:_b,s:bb,S:hb,u:ab,U:ib,V:sb,w:rb,W:ob,x:S,X:D,y:pu,Y:hu,Z:lb,"%":gb};T.x=I(n,T),T.X=I(r,T),T.c=I(t,T),w.x=I(n,w),w.X=I(r,w),w.c=I(t,w);function I(te,re){return function(fe){var k=[],R=-1,W=0,ee=te.length,q,ae,ge;for(fe instanceof Date||(fe=new Date(+fe));++R<ee;)te.charCodeAt(R)===37&&(k.push(te.slice(W,R)),(ae=fu[q=te.charAt(++R)])!=null?q=te.charAt(++R):ae=q==="e"?" ":"0",(ge=re[q])&&(q=ge(fe,ae)),k.push(q),W=R+1);return k.push(te.slice(W,R)),k.join("")}}function $(te,re){return function(fe){var k=Wr(1900,void 0,1),R=N(k,te,fe+="",0),W,ee;if(R!=fe.length)return null;if("Q"in k)return new Date(k.Q);if("s"in k)return new Date(k.s*1e3+("L"in k?k.L:0));if(re&&!("Z"in k)&&(k.Z=0),"p"in k&&(k.H=k.H%12+k.p*12),k.m===void 0&&(k.m="q"in k?k.q:0),"V"in k){if(k.V<1||k.V>53)return null;"w"in k||(k.w=1),"Z"in k?(W=Gs(Wr(k.y,0,1)),ee=W.getUTCDay(),W=ee>4||ee===0?fi.ceil(W):fi(W),W=Ws.offset(W,(k.V-1)*7),k.y=W.getUTCFullYear(),k.m=W.getUTCMonth(),k.d=W.getUTCDate()+(k.w+6)%7):(W=Us(Wr(k.y,0,1)),ee=W.getDay(),W=ee>4||ee===0?di.ceil(W):di(W),W=Or.offset(W,(k.V-1)*7),k.y=W.getFullYear(),k.m=W.getMonth(),k.d=W.getDate()+(k.w+6)%7)}else("W"in k||"U"in k)&&("w"in k||(k.w="u"in k?k.u%7:"W"in k?1:0),ee="Z"in k?Gs(Wr(k.y,0,1)).getUTCDay():Us(Wr(k.y,0,1)).getDay(),k.m=0,k.d="W"in k?(k.w+6)%7+k.W*7-(ee+5)%7:k.w+k.U*7-(ee+6)%7);return"Z"in k?(k.H+=k.Z/100|0,k.M+=k.Z%100,Gs(k)):Us(k)}}function N(te,re,fe,k){for(var R=0,W=re.length,ee=fe.length,q,ae;R<W;){if(k>=ee)return-1;if(q=re.charCodeAt(R++),q===37){if(q=re.charAt(R++),ae=j[q in fu?re.charAt(R++):q],!ae||(k=ae(te,fe,k))<0)return-1}else if(q!=fe.charCodeAt(k++))return-1}return k}function x(te,re,fe){var k=c.exec(re.slice(fe));return k?(te.p=d.get(k[0].toLowerCase()),fe+k[0].length):-1}function F(te,re,fe){var k=g.exec(re.slice(fe));return k?(te.w=y.get(k[0].toLowerCase()),fe+k[0].length):-1}function M(te,re,fe){var k=f.exec(re.slice(fe));return k?(te.w=m.get(k[0].toLowerCase()),fe+k[0].length):-1}function v(te,re,fe){var k=b.exec(re.slice(fe));return k?(te.m=C.get(k[0].toLowerCase()),fe+k[0].length):-1}function L(te,re,fe){var k=h.exec(re.slice(fe));return k?(te.m=p.get(k[0].toLowerCase()),fe+k[0].length):-1}function P(te,re,fe){return N(te,t,re,fe)}function S(te,re,fe){return N(te,n,re,fe)}function D(te,re,fe){return N(te,r,re,fe)}function B(te){return o[te.getDay()]}function Q(te){return i[te.getDay()]}function U(te){return u[te.getMonth()]}function H(te){return l[te.getMonth()]}function V(te){return a[+(te.getHours()>=12)]}function O(te){return 1+~~(te.getMonth()/3)}function se(te){return o[te.getUTCDay()]}function z(te){return i[te.getUTCDay()]}function pe(te){return u[te.getUTCMonth()]}function ve(te){return l[te.getUTCMonth()]}function ue(te){return a[+(te.getUTCHours()>=12)]}function he(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var re=I(te+="",T);return re.toString=function(){return te},re},parse:function(te){var re=$(te+="",!1);return re.toString=function(){return te},re},utcFormat:function(te){var re=I(te+="",w);return re.toString=function(){return te},re},utcParse:function(te){var re=$(te+="",!0);return re.toString=function(){return te},re}}}var fu={"-":"",_:" ",0:"0"},ct=/^\s*\d+/,eb=/^%/,tb=/[\\^$*+?|[\]().{}]/g;function Be(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function nb(e){return e.replace(tb,"\\$&")}function Ur(e){return new RegExp("^(?:"+e.map(nb).join("|")+")","i")}function Gr(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function rb(e,t,n){var r=ct.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ab(e,t,n){var r=ct.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ib(e,t,n){var r=ct.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function sb(e,t,n){var r=ct.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ob(e,t,n){var r=ct.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function hu(e,t,n){var r=ct.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function pu(e,t,n){var r=ct.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function lb(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function cb(e,t,n){var r=ct.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function ub(e,t,n){var r=ct.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function mu(e,t,n){var r=ct.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function db(e,t,n){var r=ct.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function gu(e,t,n){var r=ct.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function fb(e,t,n){var r=ct.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function hb(e,t,n){var r=ct.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function pb(e,t,n){var r=ct.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function mb(e,t,n){var r=ct.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function gb(e,t,n){var r=eb.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function _b(e,t,n){var r=ct.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function bb(e,t,n){var r=ct.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function _u(e,t){return Be(e.getDate(),t,2)}function yb(e,t){return Be(e.getHours(),t,2)}function xb(e,t){return Be(e.getHours()%12||12,t,2)}function vb(e,t){return Be(1+Or.count(_n(e),e),t,3)}function bu(e,t){return Be(e.getMilliseconds(),t,3)}function wb(e,t){return bu(e,t)+"000"}function Sb(e,t){return Be(e.getMonth()+1,t,2)}function kb(e,t){return Be(e.getMinutes(),t,2)}function Cb(e,t){return Be(e.getSeconds(),t,2)}function Tb(e){var t=e.getDay();return t===0?7:t}function Nb(e,t){return Be(ui.count(_n(e)-1,e),t,2)}function yu(e){var t=e.getDay();return t>=4||t===0?fr(e):fr.ceil(e)}function jb(e,t){return e=yu(e),Be(fr.count(_n(e),e)+(_n(e).getDay()===4),t,2)}function Db(e){return e.getDay()}function Mb(e,t){return Be(di.count(_n(e)-1,e),t,2)}function $b(e,t){return Be(e.getFullYear()%100,t,2)}function Pb(e,t){return e=yu(e),Be(e.getFullYear()%100,t,2)}function Ib(e,t){return Be(e.getFullYear()%1e4,t,4)}function Fb(e,t){var n=e.getDay();return e=n>=4||n===0?fr(e):fr.ceil(e),Be(e.getFullYear()%1e4,t,4)}function Lb(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Be(t/60|0,"0",2)+Be(t%60,"0",2)}function xu(e,t){return Be(e.getUTCDate(),t,2)}function Bb(e,t){return Be(e.getUTCHours(),t,2)}function Eb(e,t){return Be(e.getUTCHours()%12||12,t,2)}function Ab(e,t){return Be(1+Ws.count(Un(e),e),t,3)}function vu(e,t){return Be(e.getUTCMilliseconds(),t,3)}function Rb(e,t){return vu(e,t)+"000"}function Hb(e,t){return Be(e.getUTCMonth()+1,t,2)}function Ob(e,t){return Be(e.getUTCMinutes(),t,2)}function zb(e,t){return Be(e.getUTCSeconds(),t,2)}function Wb(e){var t=e.getUTCDay();return t===0?7:t}function Ub(e,t){return Be(du.count(Un(e)-1,e),t,2)}function wu(e){var t=e.getUTCDay();return t>=4||t===0?hr(e):hr.ceil(e)}function Gb(e,t){return e=wu(e),Be(hr.count(Un(e),e)+(Un(e).getUTCDay()===4),t,2)}function Vb(e){return e.getUTCDay()}function Yb(e,t){return Be(fi.count(Un(e)-1,e),t,2)}function qb(e,t){return Be(e.getUTCFullYear()%100,t,2)}function Xb(e,t){return e=wu(e),Be(e.getUTCFullYear()%100,t,2)}function Kb(e,t){return Be(e.getUTCFullYear()%1e4,t,4)}function Zb(e,t){var n=e.getUTCDay();return e=n>=4||n===0?hr(e):hr.ceil(e),Be(e.getUTCFullYear()%1e4,t,4)}function Jb(){return"+0000"}function Su(){return"%"}function ku(e){return+e}function Cu(e){return Math.floor(+e/1e3)}var pr,Tu;Qb({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qb(e){return pr=Q_(e),Tu=pr.format,pr.parse,pr.utcFormat,pr.utcParse,pr}function ey(e){return new Date(e)}function ty(e){return e instanceof Date?+e:+new Date(+e)}function Nu(e,t,n,r,a,i,o,l,u,c){var d=tu(),f=d.invert,m=d.domain,g=c(".%L"),y=c(":%S"),h=c("%I:%M"),p=c("%I %p"),b=c("%a %d"),C=c("%b %d"),T=c("%B"),w=c("%Y");function j(I){return(u(I)<I?g:l(I)<I?y:o(I)<I?h:i(I)<I?p:r(I)<I?a(I)<I?b:C:n(I)<I?T:w)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?m(Array.from(I,ty)):m().map(ey)},d.ticks=function(I){var $=m();return e($[0],$[$.length-1],I??10)},d.tickFormat=function(I,$){return $==null?j:c($)},d.nice=function(I){var $=m();return(!I||typeof I.range!="function")&&(I=t($[0],$[$.length-1],I??10)),I?m(O_($,I)):d},d.copy=function(){return eu(d,Nu(e,t,n,r,a,i,o,l,u,c))},d}function Vs(){return Qa.apply(Nu(Z_,J_,_n,zr,ui,Or,zs,Os,dr,Tu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ny({task:e,scale:t,onTaskClick:n,onTaskDoubleClick:r,isSelected:a=!1,taskIndex:i,tabIndex:o=-1,onFocus:l,"aria-label":u}){const c=E.useRef(null),[d,f]=E.useState(!1),[m,g]=E.useState(!1),y=t(e.start),h=t(e.end),p=Math.max(h-y,20),b=()=>{if(e.color)return e.color;switch(e.priority){case"high":return"#d5281b";case"medium":return"#005eb8";case"low":return"#007f3b";default:return"#005eb8"}},C=e.progress?p*e.progress/100:0,T=()=>{n?.(e)},w=()=>{r?.(e)},j=v=>{v.key==="Enter"?(v.preventDefault(),T()):v.key===" "&&(v.preventDefault(),w())},I=()=>{f(!0)},$=()=>{f(!1)},N=()=>{g(!0),l?.()},x=()=>{g(!1)},F=["gantt-task-bar",d&&"gantt-task-bar--pressed",(m||a)&&"gantt-task-bar--focused",e.priority&&`gantt-task-bar--priority-${e.priority}`,a&&"gantt-task-bar--selected",e.type&&`gantt-task-bar--type-${e.type}`].filter(Boolean).join(" "),M={"--task-left":`${y}px`,"--task-width":`${p}px`,"--task-color":b(),left:`${y}px`,width:`${p}px`,backgroundColor:b()};return s.jsxs("div",{role:"button",tabIndex:o,ref:c,"data-task-index":i,className:F,style:M,onClick:T,onDoubleClick:w,onKeyDown:j,onMouseDown:I,onMouseUp:$,onFocus:N,onBlur:x,"aria-label":u||`${a?"Selected: ":""}${e.title}: ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.priority?`, priority ${e.priority}`:""}${e.progress?`, ${e.progress}% complete`:""}`,"aria-describedby":`task-${e.id}-details`,children:[s.jsx("span",{className:"task-title",children:e.title}),e.progress!==void 0&&s.jsx("div",{className:"task-progress",style:{width:`${C}px`}}),s.jsx("span",{id:`task-${e.id}-details`,className:"sr-only",children:`Task: ${e.title}, from ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.progress?`, ${e.progress}% complete`:""}${e.priority?`, priority: ${e.priority}`:""}`})]})}function ry({viewStart:e,viewEnd:t,dateCount:n}){const r=[];for(let g=e.getTime();g<=t.getTime();g+=864e5)r.push(new Date(g));const i=new Date;i.setHours(0,0,0,0);const[o,l]=E.useState(-1),u=E.useRef(null),c=g=>{if(g.key==="ArrowLeft"){g.preventDefault();const y=Math.max(0,o===-1?0:o-1);l(y),m(y)}else if(g.key==="ArrowRight"){g.preventDefault();const y=Math.min(r.length-1,o===-1?0:o+1);l(y),m(y)}else if(g.key==="ArrowDown")g.preventDefault(),typeof document<"u"&&document.querySelector(".gantt-row .timeline-container")?.focus();else if(g.key==="Home")g.preventDefault(),l(0),m(0);else if(g.key==="End"){g.preventDefault();const y=r.length-1;l(y),m(y)}},d=g=>{if(g.key==="ArrowDown")g.preventDefault(),typeof document<"u"&&document.querySelector(".gantt-row .resource-label")?.focus();else if(g.key==="ArrowRight"){g.preventDefault();const y=u.current;y&&y.focus()}},f=()=>{o===-1&&(l(0),setTimeout(()=>m(0),0))},m=g=>{const y=u.current?.querySelector(`[data-date-index="${g}"]`);y&&y.focus()};return s.jsxs("div",{className:"gantt-header",role:"row","aria-rowindex":1,children:[s.jsx("div",{className:"header-resource",role:"columnheader","aria-colindex":1,tabIndex:0,"aria-label":"Resource column header",onKeyDown:d,children:"Resources"}),s.jsx("div",{ref:u,className:"header-timeline",role:"columnheader","aria-colindex":2,"aria-colspan":n,"aria-label":`Timeline from ${e.toLocaleDateString()} to ${t.toLocaleDateString()}. Use arrow keys to navigate between dates`,tabIndex:0,onKeyDown:c,onFocus:f,children:r.map((g,y)=>{const h=g.getTime()===i.getTime(),p=o===y;return s.jsx("div",{"data-date-index":y,className:`date-column ${h?"today":""} ${p?"focused":""}`,tabIndex:p?0:-1,role:"button","aria-label":`${g.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}${h?" (Today)":""}`,onFocus:()=>l(y),onKeyDown:c,children:g.toLocaleDateString("en-GB",{day:"numeric",month:"short"})},y)})})]})}function ay({resource:e,tasks:t,scale:n,onTaskClick:r,onTaskDoubleClick:a,rowIndex:i,dateCount:o}){const[l,u]=E.useState(!1),[c,d]=E.useState(-1),f=E.useRef(null);E.useEffect(()=>{l&&c>=0&&t.length>0&&setTimeout(()=>{f.current?.querySelector(`[data-task-index="${c}"]`)?.focus()},0)},[l,c,t.length]);const m=h=>{if(h.key==="ArrowLeft"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(h.key==="ArrowRight"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!l){switch(h.key){case"ArrowUp":h.preventDefault(),i===0?typeof document<"u"&&document.querySelector(".header-timeline")?.focus():typeof document<"u"&&document.querySelector(`[aria-rowindex="${i+1}"] .timeline-container`)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&document.querySelector(`[aria-rowindex="${i+3}"] .timeline-container`)?.focus();break;case"ArrowLeft":h.preventDefault(),f.current?.closest(".gantt-row")?.querySelector(".resource-label")?.focus();break;case"Enter":t.length>0&&(h.preventDefault(),u(!0),d(0));break}return}switch(h.key){case"ArrowLeft":h.preventDefault();const p=Math.max(0,c-1);d(p),f.current?.querySelector(`[data-task-index="${p}"]`)?.focus();break;case"ArrowRight":h.preventDefault();const C=Math.min(t.length-1,c+1);d(C),f.current?.querySelector(`[data-task-index="${C}"]`)?.focus();break;case"Enter":h.preventDefault(),c>=0&&r?.(t[c]);break;case" ":h.preventDefault(),c>=0&&a?.(t[c]);break;case"Escape":h.preventDefault(),u(!1),d(-1),f.current?.focus();break}},g=h=>{switch(h.key){case"ArrowUp":h.preventDefault(),i===0?typeof document<"u"&&document.querySelector(".header-resource")?.focus():typeof document<"u"&&document.querySelector(`[aria-rowindex="${i+1}"] .resource-label`)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&document.querySelector(`[aria-rowindex="${i+3}"] .resource-label`)?.focus();break;case"ArrowRight":h.preventDefault(),f.current?.focus();break}},y=h=>{l&&d(h)};return s.jsxs("div",{className:"gantt-row",role:"row","aria-rowindex":i+2,children:[s.jsx("div",{className:"resource-label",role:"gridcell","aria-colindex":1,tabIndex:0,"aria-label":`Resource: ${e.label}`,onKeyDown:g,children:e.label}),s.jsx("div",{ref:f,className:`timeline-container ${l?"timeline-active":""}`,role:"gridcell","aria-colindex":2,"aria-colspan":o,tabIndex:0,"aria-label":`Timeline for ${e.label} with ${t.length} task${t.length!==1?"s":""}. Press Enter to activate task navigation, then use arrow keys to navigate, Enter to select, Space to activate, Escape to exit`,onKeyDown:m,onFocus:()=>{l||d(-1)},children:t.map((h,p)=>s.jsx(ny,{task:h,scale:n,onTaskClick:r,onTaskDoubleClick:a,isSelected:l&&c===p,taskIndex:p,tabIndex:l&&c===p?0:-1,onFocus:()=>y(p)},h.id))})]})}function iy({resources:e,tasks:t=[],viewStart:n,viewEnd:r,onTaskClick:a,onTaskDoubleClick:i}){const o=E.useRef(null),[l,u]=E.useState(800),c=E.useMemo(()=>{if(n instanceof Date)return isNaN(n.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):n;const h=new Date(n);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):h},[n]),d=E.useMemo(()=>{if(r instanceof Date)return isNaN(r.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):r;const h=new Date(r);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):h},[r]),f=E.useMemo(()=>Math.ceil((d.getTime()-c.getTime())/864e5)+1,[c,d]);E.useEffect(()=>{if(!o.current||typeof window>"u")return;const h=typeof ResizeObserver<"u"?ResizeObserver:void 0;if(!h)return;const p=new h(b=>{const C=b[0];C&&u(Math.max(C.contentRect.width-220,400))});return p.observe(o.current),()=>p.disconnect()},[]);const m=E.useMemo(()=>Vs().domain([c,d]).range([0,l]),[c,d,l]),g=E.useMemo(()=>{const h=new Map;return t.forEach(p=>{const b=h.get(p.resourceId)||[];b.push(p),h.set(p.resourceId,b)}),h},[t]),y=h=>{if(h.target===h.currentTarget)switch(h.key){case"ArrowDown":h.preventDefault(),typeof document<"u"&&o.current?.querySelector(".gantt-row .resource-label")?.focus();break;case"Home":h.preventDefault(),typeof document<"u"&&o.current?.querySelector(".header-resource")?.focus();break}};return s.jsxs("div",{className:"gantt-chart",role:"grid","aria-label":"Gantt Chart showing resource scheduling and task timelines","aria-rowcount":e.length+1,"aria-colcount":f+1,"aria-description":"Use arrow keys to navigate cells, Tab to cycle through tasks in timeline rows or dates in header, Enter to select task, Space to activate task, Alt+arrows to scroll the grid, Shift+arrows to scroll timeline rows",tabIndex:0,onKeyDown:y,children:[s.jsx(ry,{viewStart:c,viewEnd:d,dateCount:f}),s.jsx("div",{ref:o,className:"gantt-grid",role:"rowgroup","aria-label":"Gantt chart data rows",tabIndex:0,onKeyDown:h=>{h.key==="ArrowLeft"&&h.altKey?(h.preventDefault(),o.current?.scrollBy({left:-50,behavior:"smooth"})):h.key==="ArrowRight"&&h.altKey?(h.preventDefault(),o.current?.scrollBy({left:50,behavior:"smooth"})):h.key==="ArrowUp"&&h.altKey?(h.preventDefault(),o.current?.scrollBy({top:-50,behavior:"smooth"})):h.key==="ArrowDown"&&h.altKey&&(h.preventDefault(),o.current?.scrollBy({top:50,behavior:"smooth"}))},children:e.map((h,p)=>s.jsx(ay,{resource:h,tasks:g.get(h.id)||[],scale:m,onTaskClick:a,onTaskDoubleClick:i,rowIndex:p,dateCount:f},h.id))})]})}const hi=({children:e,href:t,active:n=!1,attributes:r={}})=>s.jsx("li",{className:"nhsuk-breadcrumb__item",children:n?s.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",...r,children:e}):s.jsx("a",{className:"nhsuk-breadcrumb__link",href:t,...r,children:e})}),ju=({items:e=[],children:t,classes:n,labelText:r="Breadcrumb",href:a,text:i,reverse:o=!1,attributes:l={}})=>{const u=()=>t?E.Children.toArray(t).filter(p=>E.isValidElement(p)&&(p.type===hi||p.type?.displayName==="BreadcrumbItem")).map(p=>({text:typeof p.props.children=="string"?p.props.children:String(p.props.children),href:p.props.href,active:p.props.active,attributes:p.props.attributes})):[],c=()=>t?u():a&&i?[{href:a,text:i}]:e,d=()=>{const h=c();if(h&&h.length>0){const p=h.slice().reverse().find(b=>b.href&&!b.active);if(p)return{href:p.href,text:p.text}}return{text:"Home"}},f=c(),m=d(),g=xe("nhsuk-breadcrumb",{"nhsuk-breadcrumb--reverse":o},n),y=r;return s.jsxs("nav",{className:g,"aria-label":y,role:"navigation",...l,children:[s.jsx("ol",{className:"nhsuk-breadcrumb__list",role:"list",children:t?E.Children.map(t,(h,p)=>E.isValidElement(h)&&(h.type===hi||h.type?.displayName==="BreadcrumbItem")?E.cloneElement(h,{key:p}):null):f?.filter(h=>h.active||!!h.href).map((h,p)=>s.jsx("li",{className:"nhsuk-breadcrumb__item",role:"listitem",children:h.active?s.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",role:"text",...h.attributes||{},children:h.text}):s.jsx("a",{className:"nhsuk-breadcrumb__link",href:h.href,role:"link",...h.attributes||{},children:h.text})},p))}),m.href&&s.jsx("p",{className:"nhsuk-breadcrumb__back",children:s.jsxs("a",{className:"nhsuk-breadcrumb__backlink",href:m.href,role:"link","aria-label":`Back to ${m.text}`,...e.length>0?e[e.length-1]?.attributes||{}:{},children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Back to Â "}),m.text]})})]})};ju.Item=hi,hi.displayName="BreadcrumbItem";const Ys=({text:e="Skip to main content",href:t="#maincontent",classes:n,attributes:r={}})=>{const[a,i]=E.useState(!1);E.useEffect(()=>{i(!0)},[]),E.useEffect(()=>{if(typeof window>"u"||typeof document>"u"||!document.querySelector||!document.querySelectorAll)return;const l=u=>{const c=u.target,d=c.getAttribute("href");if(d&&d.startsWith("#")){const f=document.querySelector(d);if(f){f.hasAttribute("tabindex")||f.setAttribute("tabindex","-1"),f.focus(),f.classList.add("nhsuk-skip-link-focused-element");const m=window.setTimeout(()=>{f.classList.remove("nhsuk-skip-link-focused-element"),f.getAttribute("tabindex")==="-1"&&f.removeAttribute("tabindex")},3e3);c.__nhsSkipLinkTimeout=m}}};try{const u=document.querySelectorAll(".nhsuk-skip-link");return u.forEach(c=>{c.addEventListener("click",l)}),()=>{try{u.forEach(c=>{c.removeEventListener("click",l);const d=c.__nhsSkipLinkTimeout;d&&window.clearTimeout&&window.clearTimeout(d)})}catch(c){console.warn("SkipLink cleanup error:",c)}}}catch(u){return console.warn("SkipLink initialization error:",u),()=>{}}},[a]);const o=xe("nhsuk-skip-link",n);return s.jsx("a",{className:o,href:t,"data-module":"nhsuk-skip-link","data-enhanced":a?"true":"false",...r,children:e})},sy=({previousUrl:e,previousPage:t,nextUrl:n,nextPage:r,classes:a,attributes:i={}})=>{const o=xe("nhsuk-pagination",a);return s.jsx("nav",{className:o,role:"navigation","aria-label":"Pagination",...i,children:s.jsxs("ul",{className:"nhsuk-list nhsuk-pagination__list",children:[e&&t&&s.jsx("li",{className:"nhsuk-pagination-item--previous",children:s.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--prev",href:e,children:[s.jsx("span",{className:"nhsuk-pagination__title",children:"Previous"}),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),s.jsx("span",{className:"nhsuk-pagination__page",children:t}),s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:s.jsx("path",{d:"M4.1 12.3l2.7 3c.2.2.5.2.7 0 .1-.1.1-.2.1-.3v-2h11c.6 0 1-.4 1-1s-.4-1-1-1h-11V9c0-.2-.1-.4-.3-.5h-.2c-.1 0-.3.1-.4.2l-2.7 3c0 .2 0 .4.1.6z"})})]})}),n&&r&&s.jsx("li",{className:"nhsuk-pagination-item--next",children:s.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--next",href:n,children:[s.jsx("span",{className:"nhsuk-pagination__title",children:"Next"}),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),s.jsx("span",{className:"nhsuk-pagination__page",children:r}),s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:s.jsx("path",{d:"M19.6 11.66l-2.73-3A.51.51 0 0 0 16 9v2H5a1 1 0 0 0 0 2h11v2a.5.5 0 0 0 .32.46.39.39 0 0 0 .18 0 .52.52 0 0 0 .37-.16l2.73-3a.5.5 0 0 0 0-.64z"})})]})})]})})},oy=({items:e,classes:t,ariaLabel:n="Pages in this guide",attributes:r={}})=>{const a=xe("nhsuk-contents-list",t),i=(o,l)=>o.current?s.jsx("li",{className:"nhsuk-contents-list__item","aria-current":"page",...o.attributes||{},children:s.jsx("span",{className:"nhsuk-contents-list__current",children:o.text})},l):s.jsx("li",{className:"nhsuk-contents-list__item",children:s.jsx("a",{className:"nhsuk-contents-list__link",href:o.href,...o.attributes||{},children:o.text})},l);return s.jsxs("nav",{className:a,role:"navigation","aria-label":n,...r,children:[s.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Contents"}),s.jsx("ol",{className:"nhsuk-contents-list__list",children:e.map((o,l)=>i(o,l))})]})},qs=E.forwardRef(({variant:e="default",heading:t,headingHtml:n,headingLevel:r=2,headingClasses:a,description:i,descriptionHtml:o,href:l,imgURL:u,imgAlt:c,...d},f)=>{const m=["nhsuk-card",e==="clickable"&&"nhsuk-card--clickable",e==="secondary"&&"nhsuk-card--secondary",e==="feature"&&"nhsuk-card--feature",d.className].filter(Boolean).join(" "),g=["nhsuk-card__content",e==="feature"&&"nhsuk-card__content--feature",e==="primary"&&"nhsuk-card__content--primary",e==="secondary"&&"nhsuk-card__content--secondary"].filter(Boolean).join(" "),y=["nhsuk-card__heading",e==="feature"&&"nhsuk-card__heading--feature",a].filter(Boolean).join(" "),h=()=>{if(n)return s.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const C=()=>l&&e!=="feature"?s.jsx("a",{className:"nhsuk-card__link",href:l,children:t}):t;return s.jsx(Gt,{level:r,className:y,children:C()})},p=()=>d.children?d.children:o?s.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):i?s.jsx("p",{className:"nhsuk-card__description",children:i}):null,b=()=>e!=="primary"?null:s.jsxs("svg",{className:"nhsuk-icon",xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27","aria-hidden":"true",focusable:"false",children:[s.jsx("circle",{cx:"13.333",cy:"13.333",r:"13.333",fill:""}),s.jsxs("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2.667",children:[s.jsx("path",{d:"M15.438 13l-3.771 3.771"}),s.jsx("path",{d:"M11.667 9.229L15.438 13"})]})]});return s.jsxs("div",{...d,className:m,ref:f,children:[u&&s.jsx("img",{className:"nhsuk-card__img",src:u,alt:c||""}),s.jsxs("div",{className:g,children:[h(),p(),b()]})]})});qs.displayName="Card";const ly=({className:e,children:t,"data-testid":n,id:r})=>{const a=["nhsuk-card-group",e].filter(Boolean).join(" ");return s.jsx("ul",{className:a,"data-testid":n,id:r,children:t})},cy=({className:e,children:t,"data-testid":n})=>{const r=["nhsuk-card-group__item",e].filter(Boolean).join(" ");return s.jsx("li",{className:r,"data-testid":n,children:t})},uy=({type:e,heading:t,headingHtml:n,headingLevel:r=3,headingClasses:a,description:i,descriptionHtml:o,className:l,children:u,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":m,"aria-describedby":g})=>{const y=["nhsuk-care-card",`nhsuk-care-card--${e}`,l].filter(Boolean).join(" "),h=["nhsuk-care-card__heading",a].filter(Boolean).join(" "),p=()=>{if(n)return s.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const C={"non-urgent":"Non-urgent advice:",urgent:"Urgent advice:",emergency:"Immediate action required:"}[e],T=s.jsxs("span",{role:"text",children:[s.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[C," "]}),t]});return s.jsx(Gt,{level:r,className:h,children:T})},b=()=>u||(o?s.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):i?s.jsx("p",{className:"nhsuk-care-card__text",children:i}):null);return s.jsxs("div",{className:y,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":m,"aria-describedby":g,children:[s.jsxs("div",{className:"nhsuk-care-card__heading-container",children:[p(),s.jsx("span",{className:"nhsuk-care-card__arrow","aria-hidden":"true"})]}),s.jsx("div",{className:"nhsuk-care-card__content",children:b()})]})},Du=({id:e,className:t,headingText:n,headingHtml:r,headingLevel:a=2,bodyText:i,bodyHtml:o,children:l,...u})=>{const c=xe("nhsuk-panel",t),d=()=>!n&&!r&&!l?null:r?s.jsx(Gt,{level:a,className:"nhsuk-panel__heading",html:r,marginBottom:"var(--panel-heading-margin, 24px)"}):n?s.jsx(Gt,{level:a,className:"nhsuk-panel__heading",text:n,marginBottom:"var(--panel-heading-margin, 24px)"}):null,f=()=>l?s.jsx("div",{className:"nhsuk-panel__body",children:l}):o?s.jsx("div",{className:"nhsuk-panel__body",dangerouslySetInnerHTML:{__html:o}}):i?s.jsx("div",{className:"nhsuk-panel__body",children:s.jsx("p",{children:i})}):null;return s.jsxs("div",{className:c,id:e,...u,children:[d(),f()]})},dy=({text:e,html:t,children:n,className:r,...a})=>{const i=xe("nhsuk-inset-text",r),o=()=>n||(t?s.jsx("div",{dangerouslySetInnerHTML:{__html:t}}):e?s.jsx("p",{children:e}):null);return s.jsx("div",{className:i,...a,children:o()})},fy=({items:e,noBorder:t=!1,className:n,...r})=>{const a=xe("nhsuk-summary-list",{"nhsuk-summary-list--no-border":t},n),i=l=>l.children?l.children:l.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text?l.text:null,o=l=>!l||!l.items.length?null:s.jsx("dd",{className:"nhsuk-summary-list__actions",children:s.jsx("ul",{className:"nhsuk-summary-list__actions-list",children:l.items.map((u,c)=>s.jsx("li",{className:"nhsuk-summary-list__actions-list-item",children:s.jsxs("a",{href:u.href,className:"nhsuk-link",...u.attributes,children:[i(u),u.visuallyHiddenText&&s.jsx("span",{className:"nhsuk-u-visually-hidden",children:u.visuallyHiddenText})]})},c))})});return s.jsx("div",{className:"nhsuk-summary-list-container",children:s.jsx("dl",{className:a,...r,children:e.map((l,u)=>s.jsxs("div",{className:"nhsuk-summary-list__row",children:[s.jsx("dt",{className:"nhsuk-summary-list__key",children:i(l.key)}),s.jsx("dd",{className:"nhsuk-summary-list__value",children:i(l.value)}),o(l.actions)]},u))})})},Vr={current:null},hy=()=>{if(Vr.current)return Vr.current;try{Vr.current=require("prismjs");try{require("prismjs/components/prism-typescript")}catch{}try{require("prismjs/components/prism-tsx")}catch{}try{require("prismjs/components/prism-json")}catch{}}catch{Vr.current=null}return Vr.current},py=e=>{const t=[{regex:/\b(import|from|export|const|let|var|return|if|else|for|while|switch|case|break|new|throw|try|catch|finally|class|extends|implements|interface|type|as|async|await|function)\b/g,cls:"kw"},{regex:/(['"`])(?:\\.|(?!\1).)*\1/g,cls:"str"},{regex:/\/\*[^]*?\*\/|\/\/.*$/gm,cls:"com"},{regex:/\b([0-9]+(?:\.[0-9]+)?)\b/g,cls:"num"}];let n=e;return t.forEach(r=>{n=n.replace(r.regex,a=>`<span class="nhsuk-code-${r.cls}">${a}</span>`)}),n},pi=(e,t,n)=>{if(n||!t)return e;const r=hy();if(r&&r.languages){const a=r.languages[t]?t:r.languages.typescript&&(t==="ts"||t==="tsx"||t==="typescript")?"typescript":r.languages.json&&t==="json"?"json":void 0;if(a)try{return r.highlight(e,r.languages[a],a)}catch{}}return py(e)},my=({rows:e,head:t,caption:n,captionSize:r,firstCellIsHeader:a=!1,responsive:i=!1,heading:o,headingLevel:l=3,panel:u=!1,panelClasses:c,tableClasses:d,classes:f,attributes:m,"data-testid":g,columns:y,data:h,visuallyHiddenCaption:p=!1})=>{const b=`nhsuk-table__caption ${r?`nhsuk-table__caption--${r}`:""}`.trim(),C=xe("nhsuk-table",{"nhsuk-table-responsive":i},d),T=xe(f),w=(x,F)=>{const M=xe("nhsuk-table__header",{[`nhsuk-table__header--${x.format}`]:x.format},x.classes),v={scope:"col",...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...i&&{role:"columnheader"},...x.attributes};let L;if(x.node!=null)L=s.jsx(s.Fragment,{children:x.node});else if(x.html)L=s.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const P=Array.isArray(x.code),S=P?x.code.join(`
`):x.code,D=P||S.includes(`
`),B={className:xe("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":D,"nhsuk-table__code--inline":!D}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},Q=pi(S,x.codeLanguage);L=D?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...B,dangerouslySetInnerHTML:{__html:Q}})}):s.jsx("code",{...B,dangerouslySetInnerHTML:{__html:Q}})}else L=x.text;return s.jsx("th",{className:M,...v,children:L},F)},j=(x,F,M)=>{const v=a&&M||x.rowHeader,L=xe(v?"nhsuk-table__header":"nhsuk-table__cell",{[`nhsuk-table__${v?"header":"cell"}--${x.format}`]:x.format},x.classes),P={...v&&{scope:"row"},...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...i&&{role:v?"rowheader":"cell",...x.header&&{"data-label":x.header}},...x.attributes};let S;if(x.node!=null)S=s.jsx(s.Fragment,{children:x.node});else if(x.html)S=s.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const Q=Array.isArray(x.code),U=Q?x.code.join(`
`):x.code,H=Q||U.includes(`
`),V={className:xe("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":H,"nhsuk-table__code--inline":!H}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},O=pi(U,x.codeLanguage,x.disableHighlight);S=H?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...V,dangerouslySetInnerHTML:{__html:O}})}):s.jsx("code",{...V,dangerouslySetInnerHTML:{__html:O}})}else S=x.text;const D=s.jsxs(s.Fragment,{children:[i&&x.header&&s.jsxs("span",{className:"nhsuk-table-responsive__heading","aria-hidden":"true",children:[x.header," "]}),S]}),B=v?"th":"td";return s.jsx(B,{className:L,...P,children:D},F)};let I=t,$=e;!I&&y&&y.length&&(I=y.map(x=>({text:x.title,format:x.format,classes:x.headerClasses,attributes:x.headerAttributes}))),!$&&y&&h&&h.length&&($=h.map((x,F)=>y.map(M=>{const v=M.accessor?M.accessor(x,F):x[M.key];let L={format:M.format,classes:M.cellClasses,attributes:M.cellAttributes};if(M.rowHeader&&(L.rowHeader=!0),M.render){const P=M.render(v,x,F,M);return P==null||typeof P=="boolean"?{...L,text:""}:typeof P=="string"||typeof P=="number"?{...L,text:String(P)}:{...L,...P}}return{...L,text:v!=null?String(v):""}})));const N=()=>s.jsxs("table",{className:C,...i&&{role:"table"},...m,...g&&{"data-testid":g},children:[n&&s.jsx("caption",{className:xe(b,p&&"nhsuk-u-visually-hidden"),children:n}),I&&I.length>0&&s.jsx("thead",{className:"nhsuk-table__head",...i&&{role:"rowgroup"},children:s.jsx("tr",{...i&&{role:"row"},children:I.map((x,F)=>w(x,F))})}),s.jsx("tbody",{className:"nhsuk-table__body",children:$&&$.map((x,F)=>s.jsx("tr",{className:"nhsuk-table__row",...i&&{role:"row"},children:x.map((M,v)=>j(M,v,v===0))},F))})]});return u?s.jsxs(Du,{className:c,children:[o&&s.jsx(Gt,{level:l,className:"nhsuk-table__heading-tab",children:o}),N()]}):T?s.jsx("div",{className:T,children:N()}):N()},gy=({children:e,size:t,className:n})=>{const r=xe("nhsuk-table__caption",t&&`nhsuk-table__caption--${t}`,n);return s.jsx("caption",{className:r,children:e})},Mu=({responsive:e,className:t,children:n,...r})=>{const a=e?{role:"row"}:{};return s.jsx("tr",{className:t,...a,...r,children:n})},$u=({text:e,html:t,node:n,code:r,codeLanguage:a,codeClassName:i,disableHighlight:o,format:l,classes:u,colspan:c,rowspan:d,attributes:f,responsive:m,as:g="th"})=>{const y=xe("nhsuk-table__header",{[`nhsuk-table__header--${l}`]:l},u),h={scope:"col",...c&&{colSpan:c},...d&&{rowSpan:d},...m&&{role:"columnheader"},...f};let p;if(n!=null)p=s.jsx(s.Fragment,{children:n});else if(t)p=s.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const C=Array.isArray(r),T=C?r.join(`
`):r,w=C||T.includes(`
`),j={className:xe("nhsuk-table__code",i,{"nhsuk-table__code--block":w,"nhsuk-table__code--inline":!w}),...a?{"data-language":a}:{}},I=pi(T,a,o);p=w?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...j,dangerouslySetInnerHTML:{__html:I}})}):s.jsx("code",{...j,dangerouslySetInnerHTML:{__html:I}})}else p=e;const b=g;return s.jsx(b,{className:y,...h,children:p})},_y=({text:e,html:t,node:n,code:r,codeLanguage:a,codeClassName:i,disableHighlight:o,format:l,classes:u,colspan:c,rowspan:d,attributes:f,responsive:m,rowHeader:g})=>{const y=!!g,h=y?"th":"td",p=xe(y?"nhsuk-table__header":"nhsuk-table__cell",l&&`nhsuk-table__${y?"header":"cell"}--${l}`,u),b={...c&&{colSpan:c},...d&&{rowSpan:d},...y&&{scope:"row"},...m&&{role:y?"rowheader":"cell"},...f};let C;if(n!=null)C=s.jsx(s.Fragment,{children:n});else if(t)C=s.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const T=Array.isArray(r),w=T?r.join(`
`):r,j=T||w.includes(`
`),I={className:xe("nhsuk-table__code",i,{"nhsuk-table__code--block":j,"nhsuk-table__code--inline":!j}),...a?{"data-language":a}:{}},$=pi(w,a,o);C=j?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...I,dangerouslySetInnerHTML:{__html:$}})}):s.jsx("code",{...I,dangerouslySetInnerHTML:{__html:$}})}else C=e;return s.jsx(h,{className:p,...b,children:C})},Yt=my;Yt.Caption=gy,Yt.BodyRow=Mu,Yt.HeaderCell=$u,Yt.Cell=_y;let Pu=!1,Iu=!1;Object.defineProperty(Yt,"Row",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!Pu&&(console.warn("Table.Row is deprecated. Use Table.BodyRow instead."),Pu=!0),Mu}}),Object.defineProperty(Yt,"TH",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!Iu&&(console.warn("Table.TH is deprecated. Use Table.HeaderCell instead."),Iu=!0),$u}});const by=E.forwardRef(({items:e,defaultActiveTab:t,activeTab:n,onTabChange:r,onTabFocus:a,onTabListBlur:i,onEscape:o,autoActivate:l=!0,className:u,id:c,"data-testid":d,...f},m)=>{const g=n!==void 0,[y,h]=E.useState(()=>t||e[0]?.id||""),p=g?n:y,b=E.useRef(null),C=E.useRef(new Map),T=E.useCallback(F=>{g||h(F),r?.(F)},[g,r]),w=E.useCallback(F=>{a?.(F),l&&T(F)},[a,l,T]),j=E.useCallback((F,M)=>{const v=e.filter(S=>!S.disabled).map(S=>S.id),L=v.indexOf(M);let P=null;switch(F.key){case"ArrowLeft":P=L>0?L-1:v.length-1;break;case"ArrowRight":P=L<v.length-1?L+1:0;break;case"Home":P=0;break;case"End":P=v.length-1;break;case"Escape":F.preventDefault(),o?.();return;default:return}if(P!==null){F.preventDefault();const S=v[P],D=C.current.get(S);D&&(D.focus(),w(S))}},[e,w,o]),I=E.useCallback((F,M)=>{M?C.current.set(F,M):C.current.delete(F)},[]),$=E.useCallback(F=>{const M=C.current.get(F);M&&M.focus()},[]);E.useImperativeHandle(m,()=>({focusTab:$,getActiveTab:()=>p,getTabListElement:()=>b.current}),[$,p]);const N=E.useCallback(F=>{const M=F.relatedTarget;b.current?.contains(M)||i?.()},[i]),x=xe("nhsuk-tabs",u);return s.jsxs("div",{className:x,id:c,"data-testid":d,...f,children:[s.jsx("h2",{className:"nhsuk-tabs__title",children:"Contents"}),s.jsx("div",{className:"nhsuk-tabs__list-container",ref:b,children:s.jsx("ul",{className:"nhsuk-tabs__list",role:"tablist",onBlur:N,children:e.map(F=>{const M=F.id===p,v=F.disabled,L=xe("nhsuk-tabs__list-item",{"nhsuk-tabs__list-item--selected":M,"nhsuk-tabs__list-item--disabled":v});return s.jsx("li",{className:L,role:"presentation",children:s.jsx("button",{ref:P=>I(F.id,P),className:"nhsuk-tabs__tab",role:"tab","aria-selected":M,"aria-controls":`${F.id}-panel`,id:`${F.id}-tab`,tabIndex:M?0:-1,disabled:v,onClick:()=>!v&&T(F.id),onKeyDown:P=>!v&&j(P,F.id),onFocus:()=>!v&&w(F.id),...F.attributes,children:F.label})},F.id)})})}),e.map(F=>{const M=F.id===p;return s.jsx("div",{className:"nhsuk-tabs__panel",role:"tabpanel","aria-labelledby":`${F.id}-tab`,id:`${F.id}-panel`,hidden:!M,children:F.content},F.id)})]})}),Fu=E.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:a=!1,className:i="",id:o,children:l,...u},c)=>{const d=["nhsuk-details",i].filter(Boolean).join(" "),f=t?s.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):s.jsx("span",{className:"nhsuk-details__summary-text",children:e});let m;return l?m=l:r?m=s.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(m=n),s.jsxs("details",{ref:c,id:o,className:d,open:a,...u,children:[s.jsx("summary",{className:"nhsuk-details__summary",tabIndex:0,children:f}),s.jsx("div",{className:"nhsuk-details__text",children:m})]})});Fu.displayName="Details";const Lu=E.forwardRef(({title:e,type:t,items:n,hidePrefix:r=!1,headingLevel:a=3,className:i,...o},l)=>{const u=["nhsuk-do-dont-list"];i&&u.push(i);const c=["nhsuk-list",t==="tick"?"nhsuk-list--tick":"nhsuk-list--cross"],d=()=>t==="cross"?s.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:[s.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),s.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]}):s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"34",height:"34",children:s.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})}),f=g=>t==="cross"&&!r?`do not ${g}`:g,m=()=>s.jsx(Gt,{level:a,className:"nhsuk-do-dont-list__label",text:e});return s.jsxs("div",{ref:l,className:u.join(" "),...o,children:[m(),s.jsx("div",{className:"nhsuk-do-dont-list__content--feature",children:s.jsx("ul",{className:c.join(" "),role:"list",children:n.map((g,y)=>s.jsxs("li",{children:[d(),f(g.item)]},y))})})]})});Lu.displayName="DoDontList";const Bu=E.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:a=!1,className:i="",id:o,children:l,...u},c)=>{const d=["nhsuk-expander",i].filter(Boolean).join(" "),f=t?s.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):s.jsx("span",{className:"nhsuk-details__summary-text",children:e});let m;return l?m=l:r?m=s.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(m=n),s.jsxs("details",{ref:c,id:o,className:d,open:a,...u,children:[s.jsx("summary",{className:"nhsuk-details__summary",children:f}),s.jsx("div",{className:"nhsuk-details__text",children:m})]})});Bu.displayName="Expander";const Eu=E.forwardRef(({items:e,idPrefix:t="task-list",className:n,...r},a)=>{const i=["nhsuk-task-list",n].filter(Boolean).join(" "),o=(l,u)=>{const c=u+1,d=`${t}-${c}-hint`,f=`${t}-${c}-status`,m=!!l.href,g=["nhsuk-task-list__item",m&&"nhsuk-task-list__item--with-link",l.classes].filter(Boolean).join(" "),y=[l.hint&&d,f].filter(Boolean).join(" ");return s.jsx(yy,{item:l,itemClasses:g,hasLink:m,hintId:d,statusId:f,ariaDescribedBy:y},u)};return s.jsx("ul",{ref:a,className:i,...r,children:e.map(o)})}),yy=({item:e,itemClasses:t,hasLink:n,hintId:r,statusId:a,ariaDescribedBy:i})=>{const o=()=>{const c=e.title.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:e.title.html}}):e.title.text,d=[n?"nhsuk-task-list__link":"",e.title.classes].filter(Boolean).join(" ");return n?s.jsx("a",{className:d,href:e.href,"aria-describedby":i,children:c}):s.jsx("div",{className:e.title.classes||"",children:c})},l=()=>e.hint?e.hint.html?s.jsx("div",{id:r,className:"nhsuk-task-list__hint",dangerouslySetInnerHTML:{__html:e.hint.html}}):s.jsx("div",{id:r,className:"nhsuk-task-list__hint",children:e.hint.text}):null,u=()=>{const c=["nhsuk-task-list__status",e.status.classes].filter(Boolean).join(" ");let d;return e.status.tag?d=s.jsx(Ae,{...e.status.tag}):e.status.html?d=s.jsx("span",{dangerouslySetInnerHTML:{__html:e.status.html}}):d=e.status.text,s.jsx("div",{className:c,id:a,children:d})};return s.jsxs("li",{className:t,children:[s.jsxs("div",{className:"nhsuk-task-list__name-and-hint",children:[o(),l()]}),u()]})};Eu.displayName="TaskList";const xy=({heading:e,headingLevel:t=3,text:n,html:r,children:a,className:i,...o})=>{const l=/important/i.test(e),u=()=>a||(r?s.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n?s.jsx("p",{children:n}):null),c=["nhsuk-warning-callout",i].filter(Boolean).join(" "),d=`h${t}`;return s.jsxs("div",{className:c,...o,children:[E.createElement(d,{className:"nhsuk-warning-callout__label"},l?s.jsxs(s.Fragment,{children:[e,s.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"})]}):s.jsxs("span",{role:"text",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Important: "}),e]})),u()]})},vy=({src:e,alt:t,caption:n,sizes:r,srcset:a,className:i,...o})=>{const l=["nhsuk-image",i].filter(Boolean).join(" ");return s.jsxs("figure",{className:l,...o,children:[s.jsx("img",{className:"nhsuk-image__img",src:e,alt:t,...r&&a?{sizes:r,srcSet:a}:{}}),n&&s.jsx("figcaption",{className:"nhsuk-image__caption",dangerouslySetInnerHTML:{__html:n}})]})},wy=({dateRange:e,onPrev:t,onNext:n,onToday:r,density:a,onDensityChange:i,a11yMode:o,onA11yModeChange:l})=>s.jsxs("div",{className:"nhs-slot-matrix__toolbar",role:"group","aria-label":"Slot matrix controls",children:[s.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[s.jsx(lt,{variant:"secondary",size:"small",onClick:t,"aria-label":"Previous date range",children:"Prev"}),s.jsx(lt,{variant:"secondary",size:"small",onClick:r,"aria-label":"Jump to today",children:"Today"}),s.jsx(lt,{variant:"secondary",size:"small",onClick:n,"aria-label":"Next date range",children:"Next"}),s.jsxs("span",{className:"nhs-slot-matrix__toolbar-daterange","aria-live":"polite",children:[e.start.toDateString()," â€“ ",e.end.toDateString()]})]}),s.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[s.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-density-select",children:"Density"}),s.jsx(Br,{id:"slot-matrix-density-select",name:"slot-matrix-density",ariaLabel:"Change density",value:a,onChange:u=>i?.(u.target.value),options:[{value:"comfortable",text:"Comfortable"},{value:"compact",text:"Compact"}]}),s.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-mode-select",children:"Mode"}),s.jsx(Br,{id:"slot-matrix-mode-select",name:"slot-matrix-mode",ariaLabel:"Change accessibility mode",value:o,onChange:u=>l?.(u.target.value),options:[{value:"grid",text:"Grid"},{value:"list",text:"List"}]})]})]}),Sy=({items:e,orientation:t="horizontal"})=>s.jsx("div",{className:`nhs-slot-matrix__legend nhs-slot-matrix__legend--${t}`,role:"list","aria-label":"Slot legend",children:e.map(n=>s.jsx("div",{role:"listitem",className:"nhs-slot-matrix__legend-item",children:s.jsx(Ae,{color:ky(n.status),text:n.label})},n.status))});function ky(e){switch(e){case"available":return"green";case"full":return"grey";case"overbook":return"orange";case"held":return"yellow";case"blocked":return"grey";default:return"default"}}const Cy=({slots:e,sessions:t,value:n,defaultValue:r,onChange:a,selectionMode:i="single",a11yMode:o,className:l,style:u,getSlotAriaLabel:c,toolbar:d,enableDefaultToolbar:f=!0,legendItems:m,enableDefaultLegend:g=!0,legendPlacement:y="bottom",onA11yModeChange:h})=>{const[p,b]=E.useState("grid"),C=o||p,[T,w]=E.useState(r||[]),j=n??T,I=E.useMemo(()=>{const P=new Set;return e.forEach(S=>P.add(new Date(S.start).getTime())),Array.from(P).sort((S,D)=>S-D)},[e]),$=E.useMemo(()=>{const P={};return e.forEach(S=>{const D=new Date(S.start).getTime();P[D]||(P[D]={});const B=S.capacity-S.booked-(S.held||0);P[D][S.sessionId]={slot:S,remaining:B}}),P},[e]),N=E.useCallback(P=>{if(i==="single"){const S=[P.id];n||w(S),a?.(S,{lastAction:"select"})}else{const S=j.includes(P.id),D=S?j.filter(B=>B!==P.id):[...j,P.id];n||w(D),a?.(D,{lastAction:S?"deselect":"select"})}},[i,j,n,a]),x=E.useMemo(()=>m||(g?Array.from(new Set(e.map(S=>S.status))).map(S=>({status:S,label:S.charAt(0).toUpperCase()+S.slice(1)})):void 0),[m,g,e]),F=x?s.jsx(Sy,{items:x,orientation:y==="left"||y==="right"?"vertical":"horizontal"}):null,M=P=>{o||b(P),h?.(P)},v=d||(f?s.jsx(wy,{dateRange:{start:new Date,end:new Date},density:"comfortable",a11yMode:C,onA11yModeChange:M}):null),L=s.jsx("div",{style:u,className:xe(l),children:s.jsx(Xa,{className:xe("nhs-slot-matrix-grid-wrapper"),children:s.jsx(Nn,{children:s.jsx(or,{width:Tn.Full,children:s.jsxs("div",{className:"nhs-slot-matrix",children:[v,y==="top"&&F,s.jsx("ul",{"aria-label":"Appointment slots list",children:e.map(P=>s.jsx("li",{children:s.jsxs("button",{type:"button",onClick:()=>N(P),"aria-pressed":j.includes(P.id),children:[Yr(new Date(P.start))," â€“ ",Yr(new Date(P.end))," (",P.status,")"]})},P.id))}),y==="bottom"&&F]})})})})});return C==="list"?L:s.jsx("div",{style:u,className:xe(l),children:s.jsx(Xa,{className:xe("nhs-slot-matrix-grid-wrapper"),children:s.jsx(Nn,{children:s.jsx(or,{width:Tn.Full,children:s.jsxs("div",{className:"nhs-slot-matrix",children:[v,y==="top"&&F,s.jsxs("div",{role:"grid","aria-rowcount":I.length+1,"aria-colcount":t.length+1,children:[s.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[s.jsx("div",{role:"columnheader","aria-label":"Timebands",className:"nhs-slot-matrix__timeband-header"}),t.map(P=>s.jsx("div",{role:"columnheader","aria-label":`Session ${P.specialty}`,className:"nhs-slot-matrix__session-header",children:P.specialty},P.id))]}),I.map(P=>s.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[s.jsx("div",{role:"rowheader",className:"nhs-slot-matrix__timeband-header","aria-label":Yr(new Date(P)),children:Yr(new Date(P))}),t.map(S=>{const D=$[P]?.[S.id];if(!D)return s.jsx("div",{role:"gridcell",className:"nhs-slot-matrix__cell","aria-disabled":"true"},S.id);const{slot:B,remaining:Q}=D,U=j.includes(B.id),H=c?c(B):`Slot ${Yr(new Date(B.start))} ${B.status}${Q===0?" full":""}`;return s.jsx("button",{type:"button",role:"gridcell","data-status":B.status,className:xe("nhs-slot-matrix__cell",U&&"nhs-slot-matrix__cell--selected"),"aria-label":H,"aria-selected":U||void 0,onClick:()=>N(B),children:Q>0?`${Q} left`:"Full"},B.id)})]},P))]}),y==="bottom"&&F]})})})})})};function Au(e){return e<10?`0${e}`:`${e}`}function Yr(e){return`${Au(e.getHours())}:${Au(e.getMinutes())}`}const Ru=({title:e,value:t,subtitle:n,variant:r="default",href:a,className:i="",ariaLabel:o,...l})=>{const u=["nhs-fdp-summary-card",`nhs-fdp-summary-card--${r}`,i].filter(Boolean).join(" "),c=s.jsxs(s.Fragment,{children:[s.jsx(Gt,{level:3,className:"nhs-fdp-summary-card__title",children:e}),s.jsx("p",{className:"nhs-fdp-summary-card__value",children:t}),n&&s.jsx("p",{className:"nhs-fdp-summary-card__subtitle",children:n})]});return a?s.jsx("a",{className:`${u} nhs-fdp-summary-card--clickable`,href:a,"aria-label":o||`${e}: ${t}`,...l,children:c}):s.jsx("div",{className:u,"aria-label":o,...l,children:c})},Ty=({cards:e,className:t="",...n})=>{const r=["nhs-fdp-dashboard-summary-grid",t].filter(Boolean).join(" ");return s.jsx("div",{className:r,...n,children:s.jsx(Xa,{children:s.jsx(Nn,{children:e.map((a,i)=>s.jsx(or,{width:Tn.OneQuarter,className:"nhs-fdp-dashboard-summary-grid__column","data-card-index":i,children:s.jsx(Ru,{...a})},i))})})})},Hu=E.forwardRef(({data:e,columns:t,sortConfig:n,onSort:r,selectedRowIndex:a,onRowSelect:i,id:o,testId:l,ariaLabel:u,ariaLabelledby:c,ariaDescribedby:d,className:f,tableClassName:m,bordered:g=!1,striped:y=!1,responsive:h=!1,tableType:p="default"},b)=>{const C=E.useRef(null),T=E.useRef(null),w=E.useRef(null);E.useImperativeHandle(b,()=>C.current,[]);const[j,I]=E.useState(0),[$,N]=E.useState(0),[x,F]=E.useState("headers"),[M,v]=E.useState("browse"),L=t.length,P=e.length,S=E.useMemo(()=>!n||n.length===0?e:[...e].sort((O,se)=>{for(const{key:z,direction:pe}of n){const ve=O[z],ue=se[z];if(ve==null&&ue==null)continue;if(ve==null)return 1;if(ue==null)return-1;let he=0;if(typeof ve=="number"&&typeof ue=="number"?he=ve-ue:he=String(ve).localeCompare(String(ue)),he!==0)return pe==="asc"?he:-he}return 0}),[e,n]),D=E.useCallback((O,se)=>{setTimeout(()=>{const z=C.current?.querySelector(`tbody tr:nth-child(${O+1}) td:nth-child(${se+1})`);z&&(z.focus(),typeof z.scrollIntoView=="function"&&z.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),B=E.useCallback(O=>{setTimeout(()=>{const se=C.current?.querySelector(`th:nth-child(${O+1})`);se&&(se.focus(),typeof se.scrollIntoView=="function"&&se.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),Q=E.useCallback(O=>{r?.(O)},[r]),U=E.useCallback(O=>{i?.(O)},[i]),H=E.useCallback(O=>{const{key:se}=O;switch(se){case"Enter":if(O.preventDefault(),x==="headers"&&M==="browse")v("navigate"),B($);else if(x==="headers"&&M==="navigate"){const z=t[$];z&&Q(z.key)}else x==="cells"&&M==="browse"?(v("navigate"),D(j,$)):x==="cells"&&M==="navigate"&&U(j);break;case"Escape":O.preventDefault(),(x==="headers"&&M==="navigate"||x==="cells"&&M==="navigate")&&v("browse");break;case"ArrowLeft":if(O.preventDefault(),M==="navigate"||M==="browse"&&x==="headers"){if(x==="headers"){const z=Math.max(0,$-1);N(z),B(z)}else if(x==="cells"){const z=Math.max(0,$-1);N(z),D(j,z)}}break;case"ArrowRight":if(O.preventDefault(),M==="navigate"||M==="browse"&&x==="headers"){if(x==="headers"){const z=Math.min(L-1,$+1);N(z),B(z)}else if(x==="cells"){const z=Math.min(L-1,$+1);N(z),D(j,z)}}break;case"ArrowUp":if(O.preventDefault(),x==="cells"){if(M==="browse"){const z=Math.max(0,j-1);I(z),D(z,0),N(0)}else if(M==="navigate")if(j>0){const z=j-1;I(z),D(z,$)}else F("headers"),v("browse"),B($)}break;case"ArrowDown":if(O.preventDefault(),x==="headers"&&M==="browse")F("cells"),I(0),N(0),D(0,0);else if(x==="cells"){const z=P-1;if(M==="browse"){const pe=Math.min(z,j+1);I(pe),D(pe,0),N(0)}else if(M==="navigate"&&j<z){const pe=j+1;I(pe),D(pe,$)}}break;case"Home":O.preventDefault(),x==="headers"?(N(0),B(0)):x==="cells"&&(O.ctrlKey?(I(0),N(0),D(0,0)):(N(0),D(j,0)));break;case"End":if(O.preventDefault(),x==="headers"){const z=L-1;N(z),B(z)}else if(x==="cells")if(O.ctrlKey){const z=P-1,pe=L-1;I(z),N(pe),D(z,pe)}else{const z=L-1;N(z),D(j,z)}break;case" ":if(O.preventDefault(),x==="headers"&&M==="navigate"){const z=t[$];z&&Q(z.key)}else x==="cells"&&M==="navigate"&&U(j);break}},[x,M,$,j,L,P,t,D,B,Q,U]);E.useEffect(()=>{const O=C.current;if(O)return O.addEventListener("keydown",H),()=>O.removeEventListener("keydown",H)},[H]);const V=xe("nhsuk-table",m,{"nhsuk-table--responsive":h,"nhsuk-table--bordered":g,"nhsuk-table--striped":y,"nhsuk-table--compact":p==="compact"},f);return s.jsxs("table",{ref:C,className:V,id:o,"data-testid":l,role:"grid","aria-label":u,"aria-labelledby":c,"aria-describedby":d,tabIndex:0,children:[s.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:s.jsx("tr",{ref:T,role:"row",children:t.map((O,se)=>{const z=n?.find(ue=>ue.key===O.key),pe=!!z,ve=x==="headers"&&$===se;return s.jsx("th",{className:xe("sortable-header",{"sortable-header--focused":ve}),role:"columnheader",tabIndex:ve?0:-1,onClick:()=>Q(O.key),onKeyDown:ue=>{(ue.key==="Enter"||ue.key===" ")&&(ue.preventDefault(),Q(O.key))},"aria-sort":pe?z?.direction==="asc"?"ascending":"descending":"none",children:s.jsxs("div",{className:"header-content",children:[s.jsx("span",{className:"header-label",children:O.label}),pe&&s.jsxs("span",{className:"sort-indicator","aria-hidden":"true",children:[n&&n.length>1&&s.jsx("span",{className:"sort-priority",children:n.findIndex(ue=>ue.key===O.key)+1}),s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",className:"sort-arrow",children:z?.direction==="asc"?s.jsx("path",{d:"M6 2L2 8h8L6 2z"}):s.jsx("path",{d:"M6 10L2 4h8L6 10z"})})]})]})},O.key)})})}),s.jsx("tbody",{ref:w,className:"nhsuk-table__body",role:"rowgroup",children:S.map((O,se)=>{const z=a===se,pe=x==="cells"&&j===se;return s.jsx("tr",{role:"row",className:xe("data-row",{"data-row--selected":z,"data-row--focused":pe}),"aria-selected":z,children:t.map((ve,ue)=>{const he=ve.tableRenderer?ve.tableRenderer(O):ve.render?ve.render(O):O[ve.key],te=x==="cells"&&j===se&&$===ue,re=()=>typeof he=="boolean"?s.jsxs(s.Fragment,{children:[s.jsx("span",{"aria-hidden":"true",children:he?"âœ“":"âœ—"}),s.jsx("span",{className:"sr-only",children:he?"Yes":"No"})]}):String(he??"");return s.jsx("td",{role:"gridcell",className:xe("data-cell",{"data-cell--focused":te}),tabIndex:te?0:-1,onClick:()=>U(se),children:re()},ve.key)})},se)})})]})});Hu.displayName="AriaDataGrid";const Ou=({sortConfig:e,columns:t,onSortChange:n,className:r="",emptyDescription:a="No sorting applied",activeDescription:i,showReset:o=!0,showHelp:l=!0,disabled:u=!1,ariaLabel:c="Sort configuration",ariaDescribedBy:d})=>{const f=E.useRef(null),m=E.useRef(null),g=E.useRef(null),y=E.useCallback((x,F)=>{u||(m.current=F,x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",F))},[u]),h=E.useCallback((x,F)=>{u||m.current===F||(x.preventDefault(),x.dataTransfer.dropEffect="move",g.current=F)},[u]),p=E.useCallback((x,F)=>{if(u)return;x.preventDefault();const M=m.current;if(!M||M===F)return;const v=e.findIndex(P=>P.key===M),L=e.findIndex(P=>P.key===F);if(v!==-1&&L!==-1){const P=[...e],[S]=P.splice(v,1);P.splice(L,0,S),n(P)}m.current=null,g.current=null},[u,e,n]),b=E.useCallback(()=>{m.current=null,g.current=null},[]),C=E.useCallback(x=>{const F=t.find(M=>M.key===x);return F?F.label:x},[t]),T=E.useCallback(x=>["red","orange","blue","aqua-green","grey"][x]||"grey",[]),w=E.useCallback(x=>{if(u)return;const F=e.map(M=>M.key===x?{...M,direction:M.direction==="asc"?"desc":"asc"}:M);n(F)},[e,n,u]),j=E.useCallback(x=>{if(u)return;const F=e.filter(M=>M.key!==x);n(F)},[e,n,u]),I=E.useCallback(()=>{u||n([])},[n,u]),$=()=>{if(e.length===0)return a;if(i)return i;const x=e.map((F,M)=>{const v=F.direction==="asc"?"ascending":"descending";return`${M+1}. ${C(F.key)} (${v})`});if(x.length===1)return`Sorted by: ${x[0]}`;if(x.length===2)return`Sorted by: ${x.join(" and ")}`;{const F=x.pop();return`Sorted by: ${x.join(", ")}, and ${F}`}},N=E.useMemo(()=>{const x=["sort-description"];return l&&x.push("sort-help"),d&&x.push(d),x.join(" ")},[l,d]);return e.length===0?s.jsxs("div",{className:`sort-status-control ${r}`,children:[s.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:a}),l&&s.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:s.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]}):s.jsxs("div",{className:`sort-status-control ${r}`,children:[s.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:$()}),s.jsxs("div",{className:"sort-status-container",children:[s.jsx("div",{ref:f,className:"sort-status-control__tags",role:"list","aria-label":c,"aria-describedby":N,children:e.map((x,F)=>s.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",draggable:!u,onDragStart:M=>y(M,x.key),onDragOver:M=>h(M,x.key),onDrop:M=>p(M,x.key),onDragEnd:b,onClick:()=>w(x.key),style:{cursor:u?"default":"pointer"},title:u?"":`Click to toggle sort direction. Currently ${x.direction==="asc"?"ascending":"descending"}`,"data-key":x.key,children:s.jsx(Ae,{color:T(F),className:"sort-status-control__tag",closable:!0,onClose:()=>j(x.key),disabled:u,children:s.jsxs("div",{className:"sort-status-control__tag-content",children:[s.jsx("div",{className:"sort-status-control__drag-handle",title:"Drag to reorder",children:"â‹®â‹®"}),s.jsx("div",{className:`sort-status-control__priority-badge sort-priority sort-priority--priority-${F+1}`,children:F+1}),s.jsx("span",{className:"sort-status-control__tag-label",children:C(x.key)}),s.jsx("button",{type:"button",className:"sort-status-control__direction-button",onClick:M=>{M.stopPropagation(),w(x.key)},disabled:u,"aria-label":`Toggle sort direction for ${C(x.key)}. Currently ${x.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:s.jsx("span",{className:`sort-status-control__direction-icon sort-status-control__direction-icon--${x.direction}`,children:s.jsx("svg",{className:`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${x.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})})})]})})},x.key))}),o&&s.jsx("div",{className:"sort-status-control__actions",children:s.jsx(lt,{variant:"secondary",onClick:I,disabled:u,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})})]}),l&&s.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:s.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]})};function Ny(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const a=[...e.selectedRows];return a[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:a};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:i}=t.payload,o=new Array(i).fill(!1),l=new Array(i).fill(null),u=new Array(i).fill([]);for(let c=0;c<Math.min(e.tabLoadingStates.length,i);c++)o[c]=e.tabLoadingStates[c],l[c]=e.tabErrors[c],u[c]=e.selectedRows[c];return{...e,tabLoadingStates:o,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}const mi=E.forwardRef(function(t,n){const{dataConfig:r={},tabPanels:a,selectedIndex:i,onTabChange:o,onGlobalRowSelectionChange:l,ariaLabel:u,ariaDescription:c,className:d="",disabled:f=!1,orientation:m="horizontal",id:g,isLoading:y=!1,loadingComponent:h,error:p=null,errorComponent:b,"data-testid":C,actions:T,actionsMinGap:w=16,forceActionsAbove:j=!1}=t,$=E.useRef(g||`aria-tabs-datagrid-${Math.random().toString(36).slice(2,9)}`).current,N=typeof c=="string"&&c.trim()!==""&&!/\s/.test(c),x=`${$}-description`,F=`${$}-navigation-help`,{dataComparator:M=(A,J)=>JSON.stringify(A)===JSON.stringify(J),filterFunction:v=A=>A,booleanRenderer:L=A=>A?"âœ“":"âœ—"}=r||{},P=i!==void 0,S=i??0,[D,B]=E.useState({focusArea:"tabs",focusedTabIndex:S,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}),Q=E.useMemo(()=>({selectedIndex:S,tabLoadingStates:new Array(a.length).fill(!1),tabErrors:new Array(a.length).fill(null),sortConfig:[],selectedRows:new Array(a.length).fill([]),globalSelectedRowData:null,filters:void 0}),[S]),[U,H]=E.useReducer(Ny,Q);E.useEffect(()=>{const A=U.tabLoadingStates.length,J=a.length;A!==J&&H({type:"ADJUST_ARRAYS",payload:{newLength:J}})},[a.length]),E.useEffect(()=>{P&&H({type:"SET_SELECTED_INDEX",payload:S})},[S,P]),E.useEffect(()=>{B(A=>({...A,focusArea:"tabs",focusedTabIndex:U.selectedIndex,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}))},[U.selectedIndex]),E.useEffect(()=>{l&&l(U.globalSelectedRowData)},[U.globalSelectedRowData,l]);const V=E.useCallback((A,J)=>M(A,J),[M]),O=E.useCallback(A=>{A>=0&&A<a.length&&!a[A].disabled&&(H({type:"SET_SELECTED_INDEX",payload:A}),B(J=>({...J,focusedTabIndex:A,focusArea:"tabs"})),o?.(A))},[a,o]),se=E.useRef(!1),z=E.useCallback((A,J)=>{if(!J?.force&&!se.current&&A===0){se.current=!0;return}se.current=!0,setTimeout(()=>{const le=pe.current[A],Z=le?.parentElement;if(le&&Z){const G=le.offsetLeft,oe=le.offsetWidth,_e=Z.clientWidth,de=G-_e/2+oe/2;try{Z.scrollTo({left:Math.max(0,de),behavior:"smooth"})}catch{le.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}}else process.env.SILENCE_SCROLL_DEBUG||console.debug("[AriaTabsDataGrid] Missing elements for scroll",{tabElementExists:!!le,tabListElementExists:!!Z})},50)},[]),pe=E.useRef([]),ve=E.useRef([]),ue=E.useCallback((A,J)=>{const le=U.sortConfig||[],Z=le.find(_e=>_e.key===J);let G;Z?Z.direction==="asc"?G=le.map(_e=>_e.key===J?{..._e,direction:"desc"}:_e):G=le.filter(_e=>_e.key!==J):G=[...le,{key:J,direction:"asc"}],H({type:"SET_SORT",payload:G}),a[A].onSort?.(J)},[U.sortConfig,a]),he=E.useCallback(A=>{setTimeout(()=>{const J=document.querySelector(`[data-tab-panel="${U.selectedIndex}"] th:nth-child(${A+1})`);J&&J.focus()},0)},[U.selectedIndex]),te=E.useCallback(A=>L(A),[L]),re=E.useCallback((A,J)=>{setTimeout(()=>{const le=document.querySelector(`[data-tab-panel="${U.selectedIndex}"] tbody tr:nth-child(${A+1}) td:nth-child(${J+1})`);le&&le.focus()},0)},[U.selectedIndex]);E.useEffect(()=>{D.isGridActive&&(D.focusArea==="headers"?setTimeout(()=>{he(D.focusedHeaderIndex)},0):D.focusArea==="cells"&&setTimeout(()=>{re(D.focusedRowIndex,D.focusedColumnIndex)},0))},[D.focusArea,D.isGridActive,D.focusedHeaderIndex,D.focusedRowIndex,D.focusedColumnIndex,he,re]),E.useEffect(()=>{z(U.selectedIndex)},[U.selectedIndex,z]);const fe=E.useCallback((A,J)=>{const{key:le}=A,Z=a[U.selectedIndex],G=Z?.columns.length||0;switch(le){case"ArrowLeft":A.preventDefault();const oe=Math.max(0,J-1);B(Ne=>({...Ne,focusedHeaderIndex:oe})),he(oe);break;case"ArrowRight":A.preventDefault();const _e=Math.min(G-1,J+1);B(Ne=>({...Ne,focusedHeaderIndex:_e})),he(_e);break;case"ArrowUp":A.preventDefault(),B(Ne=>({...Ne,focusArea:"tabs",focusedTabIndex:U.selectedIndex})),z(U.selectedIndex),pe.current[U.selectedIndex]?.focus();break;case"ArrowDown":A.preventDefault(),B(Ne=>({...Ne,focusArea:"cells",focusedRowIndex:0,focusedColumnIndex:J,isGridActive:!0}));break;case"Home":A.preventDefault(),B(Ne=>({...Ne,focusedHeaderIndex:0})),he(0);break;case"End":A.preventDefault();const de=G-1;B(Ne=>({...Ne,focusedHeaderIndex:de})),he(de);break;case"Enter":case" ":A.preventDefault();const Ce=Z?.columns[J]?.key;Ce&&ue(U.selectedIndex,Ce);break}},[a,U.selectedIndex,ue,B,he,re,pe]),k=E.useCallback((A,J,le)=>{const{key:Z}=A,G=a[U.selectedIndex],oe=G?.data.length||0,_e=G?.columns.length||0;switch(Z){case"ArrowUp":if(A.preventDefault(),J===0)B(ye=>({...ye,focusArea:"headers",focusedHeaderIndex:le,isGridActive:!1})),he(le);else{const ye=J-1;B($e=>({...$e,focusedRowIndex:ye})),re(ye,le)}break;case"ArrowDown":A.preventDefault();const de=Math.min(oe-1,J+1);B(ye=>({...ye,focusedRowIndex:de})),re(de,le);break;case"ArrowLeft":A.preventDefault();const Ce=Math.max(0,le-1);B(ye=>({...ye,focusedColumnIndex:Ce})),re(J,Ce);break;case"ArrowRight":A.preventDefault();const Ne=Math.min(_e-1,le+1);B(ye=>({...ye,focusedColumnIndex:Ne})),re(J,Ne);break;case"Home":A.preventDefault(),A.ctrlKey?(B(ye=>({...ye,focusedRowIndex:0,focusedColumnIndex:0})),re(0,0)):(B(ye=>({...ye,focusedColumnIndex:0})),re(J,0));break;case"End":if(A.preventDefault(),A.ctrlKey){const ye=oe-1,$e=_e-1;B(Re=>({...Re,focusedRowIndex:ye,focusedColumnIndex:$e})),re(ye,$e)}else{const ye=_e-1;B($e=>({...$e,focusedColumnIndex:ye})),re(J,ye)}break;case"Enter":case" ":if(A.preventDefault(),G&&G.data[J]){const ye=G.data.some(Le=>"ews_data"in Le)?v(G.data,U.filters):G.data,$e=U.sortConfig;let Re=ye;if($e&&$e.length>0&&(Re=[...ye].sort((Le,Ee)=>{for(const{key:Ke,direction:Ze}of $e){let st=Le[Ke],dn=Ee[Ke];const ot=G.columns.find(za=>za.key===Ke);if(ot?.tableRenderer?(st=ot.tableRenderer(Le),dn=ot.tableRenderer(Ee)):ot?.render&&(st=ot.render(Le),dn=ot.render(Ee)),st==null&&dn==null)continue;if(st==null)return Ze==="asc"?-1:1;if(dn==null)return Ze==="asc"?1:-1;let ht=0;if(typeof st=="number"&&typeof dn=="number"?ht=st-dn:ht=String(st).localeCompare(String(dn),void 0,{numeric:!0,sensitivity:"base"}),ht!==0)return Ze==="asc"?ht:-ht}return 0})),Re[J]){const Le=Re[J],Ke=U.globalSelectedRowData&&V(U.globalSelectedRowData,Le)?null:Le;H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:Ke})}}break}},[a,U.selectedIndex,U.filters,U.sortConfig,v,V,H,B,he,re]),R=E.useCallback((A,J)=>v(A,J),[v]);if(E.useImperativeHandle(n,()=>({selectTab:A=>{A>=0&&A<a.length&&(H({type:"SET_SELECTED_INDEX",payload:A}),o?.(A))},refreshData:A=>{console.log("Refreshing data for tab:",A??"all")},exportData:A=>{const J=A??U.selectedIndex,le=a[J];return le?le.data:[]},getSelectedRows:A=>U.globalSelectedRowData?[]:[],clearSelection:A=>{H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:null})},applyFilters:A=>{H({type:"SET_FILTERS",payload:A})}}),[U.selectedIndex,U.selectedRows,a,o]),y)return s.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--loading ${d}`,"data-testid":C,children:h||s.jsx("div",{className:"aria-tabs-datagrid__loading",children:s.jsx("div",{className:"nhsuk-spinner",role:"status","aria-label":"Loading data",children:s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Loading..."})})})});if(p)return s.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--error ${d}`,"data-testid":C,children:b||s.jsxs("div",{className:"aria-tabs-datagrid__error",role:"alert",children:[s.jsx("h3",{className:"nhsuk-error-summary__title",children:"Error loading data"}),s.jsx("p",{children:p})]})});const W=E.useRef(null),ee=E.useRef(null),q=E.useRef(null),[ae,ge]=E.useState(!0);E.useEffect(()=>{if(!T){ge(!1);return}if(j){ge(!1);return}function A(){if(!W.current||!ee.current||!q.current)return;const Z=W.current.clientWidth,G=Array.from(ee.current.querySelectorAll(":scope > .aria-tabs-datagrid__tab")),oe=G.reduce((Ne,ye)=>Ne+ye.offsetWidth,0),_e=q.current.offsetWidth,de=Math.max(8*(G.length-1),0),Ce=oe+de+_e+w<=Z;ge(Ce)}const J=requestAnimationFrame(()=>A()),le=new ResizeObserver(()=>A());return W.current&&le.observe(W.current),ee.current&&le.observe(ee.current),()=>{cancelAnimationFrame(J),le.disconnect()}},[T,w,j,a.length]);const Se=q,ce=E.useCallback(()=>Se.current?Array.from(Se.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(A=>!A.hasAttribute("disabled")):[],[]),K=E.useCallback(A=>{const J=ce();if(!J.length)return;const le=Math.max(0,Math.min(A,J.length-1));J[le].focus(),B(Z=>({...Z,focusArea:"actions",focusedActionIndex:le}))},[ce]),Y=E.useCallback(()=>K(0),[K]),ie=E.useCallback((A,J)=>{const{key:le}=A,Z=a.length-1;switch(le){case"ArrowUp":{T&&!ae&&(A.preventDefault(),Y());break}case"ArrowLeft":{A.preventDefault();const G=J>0?J-1:Z;O(G),z(G),pe.current[G]?.focus();break}case"ArrowRight":{if(A.preventDefault(),J===Z&&T&&ae){Y();return}const G=J<Z?J+1:0;O(G),z(G),pe.current[G]?.focus();break}case"ArrowDown":{A.preventDefault(),B(G=>({...G,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));break}case"Home":{A.preventDefault(),O(0),z(0),pe.current[0]?.focus();break}case"End":{A.preventDefault(),O(Z),z(Z),pe.current[Z]?.focus();break}case"Enter":case" ":{A.preventDefault(),O(J);break}case"Tab":{!A.shiftKey&&J===Z&&T&&ae&&Y();break}}},[a.length,O,z,T,ae,Y]),ne=E.useCallback(A=>{const{key:J}=A,le=ce();if(!le.length)return;const Z=le.findIndex(G=>G===document.activeElement);switch(J){case"ArrowLeft":{if(ae)if(Z>0)A.preventDefault(),K(Z-1);else{A.preventDefault();const G=a.length-1;O(G),z(G),pe.current[G]?.focus(),B(oe=>({...oe,focusArea:"tabs",focusedTabIndex:G}))}break}case"ArrowRight":{ae&&(Z<le.length-1?(A.preventDefault(),K(Z+1)):(A.preventDefault(),O(0),z(0),pe.current[0]?.focus(),B(G=>({...G,focusArea:"tabs",focusedTabIndex:0}))));break}case"ArrowDown":{if(ae)A.preventDefault(),B(G=>({...G,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));else{A.preventDefault();const G=U.selectedIndex;pe.current[G]?.focus(),B(oe=>({...oe,focusArea:"tabs",focusedTabIndex:G}))}break}}},[ce,ae,K,a.length,O,z,U.selectedIndex]);return s.jsxs("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--${m} ${d}`,id:g,"data-testid":C,ref:W,children:[c&&!N&&s.jsx("div",{id:x,className:"nhsuk-u-visually-hidden",children:c}),s.jsx("div",{className:"aria-tabs-datagrid__navigation-help sr-only",id:F,children:"Keyboard navigation: Use Tab to move between tabs and grid. Arrow keys navigate within tabs and grid cells. Enter activates tabs and sorts columns. Arrow Down from tabs moves to table headers. Arrow Down from headers moves to table cells. Use Arrow keys to navigate between cells."}),s.jsx(Ou,{sortConfig:U.sortConfig||[],columns:a.flatMap(A=>A.columns.map(J=>({key:J.key,label:J.label}))).filter((A,J,le)=>le.findIndex(Z=>Z.key===A.key)===J),onSortChange:A=>{H({type:"SET_SORT",payload:A})},ariaLabel:"Data grid sort configuration"}),T&&!ae&&s.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above",ref:q,role:"toolbar","aria-label":"Additional actions",onKeyDown:ne,children:T}),s.jsxs("div",{className:`aria-tabs-datagrid__tabs-wrapper ${ae?"aria-tabs-datagrid__tabs-wrapper--inline-actions":""}`,children:[s.jsx("div",{role:"tablist","aria-label":u,"aria-describedby":c?N?c:x:F,"aria-orientation":m,className:"aria-tabs-datagrid__tabs",ref:ee,children:a.map((A,J)=>{const le=J===U.selectedIndex,Z=A.disabled||f;return s.jsxs("button",{role:"tab",id:`tab-${A.id}`,"aria-controls":`panel-${A.id}`,"aria-selected":le,"aria-disabled":Z,tabIndex:le?0:-1,ref:G=>{pe.current[J]=G},onClick:()=>O(J),onKeyDown:G=>ie(G,J),disabled:Z,className:["aria-tabs-datagrid__tab",le?"aria-tabs-datagrid__tab--selected":"",Z?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[s.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:A.label}),U.tabLoadingStates[J]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),U.tabErrors[J]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},A.id)})}),T&&ae&&s.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline",ref:q,role:"toolbar","aria-label":"Additional actions",onKeyDown:ne,children:T})]}),a.map((A,J)=>{const le=J===U.selectedIndex;return s.jsx("div",{role:"tabpanel",id:`panel-${A.id}`,"aria-labelledby":`tab-${A.id}`,tabIndex:0,hidden:!le,ref:Z=>{ve.current[J]=Z},className:`aria-tabs-datagrid__panel ${A.className||""}`,"data-tab-panel":J,children:le&&(()=>{const Z=A.data.some(oe=>"ews_data"in oe)?R(A.data,U.filters):A.data,G=E.useMemo(()=>{const oe=U.sortConfig;return!oe||oe.length===0?Z:[...Z].sort((_e,de)=>{for(const{key:Ce,direction:Ne}of oe){let ye=_e[Ce],$e=de[Ce];const Re=A.columns.find(Ee=>Ee.key===Ce);if(Re?.tableRenderer?(ye=Re.tableRenderer(_e),$e=Re.tableRenderer(de)):Re?.render&&(ye=Re.render(_e),$e=Re.render(de)),ye==null&&$e==null)continue;if(ye==null)return 1;if($e==null)return-1;let Le=0;if(typeof ye=="number"&&typeof $e=="number"?Le=ye-$e:typeof ye=="boolean"&&typeof $e=="boolean"?Le=ye===$e?0:ye?1:-1:Le=String(ye).localeCompare(String($e),void 0,{numeric:!0,sensitivity:"base"}),Le!==0)return Ne==="asc"?Le:-Le}return 0})},[Z,U.sortConfig,A.columns]);return s.jsxs("table",{className:"nhsuk-table aria-tabs-datagrid__grid",role:"grid","aria-label":A.ariaLabel,"aria-describedby":A.ariaDescription?`panel-${A.id}-description`:void 0,children:[A.ariaDescription&&s.jsx("caption",{className:"nhsuk-u-visually-hidden",id:`panel-${A.id}-description`,children:A.ariaDescription}),s.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:s.jsx("tr",{role:"row",children:A.columns.map((oe,_e)=>{const de=U.sortConfig?.find(ye=>ye.key===oe.key),Ce=!!de,Ne=D.focusArea==="headers"&&D.focusedHeaderIndex===_e;return s.jsx("th",{className:`sortable-header ${Ne?"sortable-header--focused":""} ${Ce?"sortable-header--sorted":""}`,role:"columnheader",tabIndex:Ne?0:-1,onClick:()=>ue(J,oe.key),onKeyDown:ye=>fe(ye,_e),"aria-sort":Ce?de?.direction==="asc"?"ascending":"descending":"none",children:s.jsxs("div",{className:"header-content",children:[s.jsx("span",{className:"header-label",children:oe.label}),s.jsxs("div",{className:`sort-indicator-container ${Ce?`sort-indicator--${de?.direction}`:""}`,children:[U.sortConfig&&U.sortConfig.length>0&&U.sortConfig.findIndex(ye=>ye.key===oe.key)!==-1&&s.jsx("span",{className:`sort-priority sort-priority--priority-${U.sortConfig.findIndex(ye=>ye.key===oe.key)+1}`,"data-priority":U.sortConfig.findIndex(ye=>ye.key===oe.key)+1,title:`Sort priority: ${U.sortConfig.findIndex(ye=>ye.key===oe.key)+1}`,children:U.sortConfig.findIndex(ye=>ye.key===oe.key)+1}),Ce&&s.jsx("svg",{className:`nhsuk-icon sort-arrow sort-arrow--${de?.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})]})]})},oe.key)})})}),s.jsx("tbody",{className:"nhsuk-table__body",role:"rowgroup",children:G.map((oe,_e)=>{const de=U.globalSelectedRowData&&V(U.globalSelectedRowData,oe),Ce=D.focusArea==="cells"&&D.focusedRowIndex===_e;return s.jsx("tr",{role:"row",className:`data-row ${de?"data-row--selected":""} ${Ce?"data-row--focused":""}`,"aria-selected":de,children:A.columns.map((Ne,ye)=>{const $e=oe[Ne.key];let Re;Ne.tableRenderer?Re=Ne.tableRenderer(oe):Ne.render?Re=Ne.render(oe):Re=$e;const Le=D.focusArea==="cells"&&D.focusedRowIndex===_e&&D.focusedColumnIndex===ye,Ee=()=>{if(Ne.customRenderer){const Ke=Ne.customRenderer($e,oe);return s.jsx("span",{className:"data-cell__custom","data-custom-rendered":"true",children:Ke})}return typeof $e=="boolean"&&Re===$e?s.jsxs(s.Fragment,{children:[te($e),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:$e?"Yes":"No"})]}):E.isValidElement(Re)||typeof Re!="object"?Re??"":Re};return s.jsx("td",{role:"gridcell",className:`data-cell ${Le?"data-cell--focused":""}`,tabIndex:Le?0:-1,onClick:()=>{const Ze=U.globalSelectedRowData&&V(U.globalSelectedRowData,oe)?null:oe;H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:Ze})},onKeyDown:Ke=>k(Ke,_e,ye),children:Ee()},Ne.key)})},_e)})})]})})()},A.id)})]})}),gi={asc:"â†‘",desc:"â†“"},jy=e=>[...e].sort((t,n)=>t.priority-n.priority);function Xs(e){return e.map((t,n)=>({...t,priority:n}))}function Dy(e){return e.length>0?Math.max(...e.map(t=>t.priority)):-1}function My(e,t){const n=t.find(r=>r.id===e);return n?n.priority>0:!1}function $y(e,t){const n=t.find(a=>a.id===e),r=Dy(t);return n?n.priority<r:!1}const Py=({sortConfig:e,onSortChange:t,className:n="",emptyDescription:r="No sorting applied",activeDescription:a,showReset:i=!0,showHelp:o=!0,disabled:l=!1,ariaLabel:u="Sort configuration",ariaDescribedBy:c})=>{const d=E.useMemo(()=>jy(e),[e]),f=E.useCallback(C=>{if(l)return;const T=e.map(w=>w.id===C?{...w,direction:w.direction==="asc"?"desc":"asc"}:w);t(T)},[e,t,l]),m=E.useCallback(C=>{if(l)return;const T=e.findIndex(j=>j.id===C);if(T<=0)return;const w=[...e];[w[T],w[T-1]]=[w[T-1],w[T]],t(Xs(w))},[e,t,l]),g=E.useCallback(C=>{if(l)return;const T=e.findIndex(j=>j.id===C);if(T>=e.length-1||T===-1)return;const w=[...e];[w[T],w[T+1]]=[w[T+1],w[T]],t(Xs(w))},[e,t,l]),y=E.useCallback(C=>{if(l)return;const T=e.filter(w=>w.id!==C);t(Xs(T))},[e,t,l]),h=E.useCallback(()=>{l||t([])},[t,l]),p=()=>{if(e.length===0)return r;if(a)return a;const C=d.map((T,w)=>{const j=T.direction==="asc"?"ascending":"descending";return`${w+1}. ${T.label} (${j})`});if(C.length===1)return`Sorted by: ${C[0]}`;if(C.length===2)return`Sorted by: ${C.join(" and ")}`;{const T=C.pop();return`Sorted by: ${C.join(", ")}, and ${T}`}},b=E.useMemo(()=>{const C=["sort-description"];return o&&C.push("sort-help"),c&&C.push(c),C.join(" ")},[o,c]);return e.length===0?s.jsx("div",{className:`sort-status-control sort-status-control--empty ${n}`,children:s.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:p()})}):s.jsxs("div",{className:`sort-status-control ${n}`,children:[s.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:p()}),s.jsxs("div",{className:"sort-status-control__tags",role:"list","aria-label":u,"aria-describedby":b,children:[s.jsx("div",{className:"sort-status-control__tags-label",children:"Current sorting:"}),d.map(C=>s.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",children:s.jsx(Ae,{text:"",color:"blue",className:"sort-status-control__tag",closable:!0,onClose:()=>y(C.id),disabled:l,children:s.jsxs("div",{className:"sort-status-control__tag-content",children:[s.jsx("span",{className:"sort-status-control__tag-priority",children:C.priority+1}),s.jsx("span",{className:"sort-status-control__tag-label",children:C.label}),s.jsx("button",{type:"button",className:"sort-status-control__tag-direction",onClick:()=>f(C.id),disabled:l,"aria-label":`Toggle sort direction for ${C.label}. Currently ${C.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:C.direction==="asc"?gi.asc:gi.desc}),s.jsxs("div",{className:"sort-status-control__tag-actions",children:[s.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>m(C.id),disabled:l||!My(C.id,e),"aria-label":`Move ${C.label} sort up in priority`,title:"Move up in priority",children:"â–²"}),s.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>g(C.id),disabled:l||!$y(C.id,e),"aria-label":`Move ${C.label} sort down in priority`,title:"Move down in priority",children:"â–¼"})]})]})})},C.id))]}),i&&s.jsx("div",{className:"sort-status-control__actions",children:s.jsx(lt,{variant:"secondary",onClick:h,disabled:l,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})}),o&&s.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:s.jsxs("small",{children:["Click ",gi.asc,"/",gi.desc," to toggle ascending/descending. Use â–²/â–¼ to change sort priority. Click Ã— to remove a sort."]})})]})},_i=(e,t)=>t.map(n=>({id:n.id,label:n.label,data:n.filter?n.filter(e):e,columns:n.columns.map(r=>({key:r.key,label:r.label,render:r.render,customRenderer:r.customRenderer})),sortConfig:n.sortConfig,ariaLabel:n.ariaLabel||`${n.label} Data Grid`,ariaDescription:n.ariaDescription||`Data grid showing ${n.label.toLowerCase()}`,className:n.className,disabled:n.disabled})),Ks=[{value:!0,icon:s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"100%",height:"34",children:s.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})})},{value:!1,icon:s.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"100%",height:"34",children:[s.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),s.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]})}],Iy=(e,t)=>!e||!t?e===t:e.name&&e.bed_name&&t.name&&t.bed_name?e.name===t.name&&e.bed_name===t.bed_name:JSON.stringify(e)===JSON.stringify(t),Fy=(e,t)=>t?e.filter(n=>{if(t.ewsScoreRange){const[r,a]=t.ewsScoreRange;if(n.ews_score<r||n.ews_score>a)return!1}return!(t.wards&&t.wards.length>0&&!t.wards.includes(n.ward_name)||t.specialties&&t.specialties.length>0&&!t.specialties.includes(n.speciality)||t.dischargeStatuses&&t.dischargeStatuses.length>0&&!t.dischargeStatuses.includes(n.early_discharge_notification)||t.avpuLevels&&t.avpuLevels.length>0&&!t.avpuLevels.includes(n.ews_data.avpu)||t.medicallyOptimised!==null&&t.medicallyOptimised!==void 0&&n.medically_optimised!==t.medicallyOptimised||t.fastTrack!==null&&t.fastTrack!==void 0&&n.fast_track!==t.fastTrack)}):e,Ly=e=>{if(typeof e=="boolean"){const n=Ks.find(r=>r.value===e);return n?n.icon:null}const t=Ks.find(n=>n.value===e);return t?t.icon:String(e)},By=e=>`${e.name}-${e.bed_name}`,Ey=()=>({overview:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"bed_name",label:"Bed"},{key:"ews_score",label:"EWS Score"},{key:"speciality",label:"Specialty"},{key:"consultant",label:"Consultant"}],vitals:[{key:"name",label:"Patient Name"},{key:"ews_score",label:"EWS Score"},{key:"respiratory_rate_bpm",label:"Respiratory Rate",render:e=>e.ews_data.respiratory_rate_bpm},{key:"sp02",label:"SpO2 %",render:e=>e.ews_data.sp02},{key:"temperature",label:"Temperature Â°C",render:e=>e.ews_data.temperature},{key:"systolic_bp",label:"Systolic BP",render:e=>e.ews_data.systolic_bp},{key:"heart_rate",label:"Heart Rate",render:e=>e.ews_data.heart_rate},{key:"avpu",label:"AVPU",render:e=>e.ews_data.avpu.toUpperCase()}],discharge:[{key:"name",label:"Patient Name"},{key:"anticipated_discharge_date",label:"Anticipated Discharge",render:e=>new Date(e.anticipated_discharge_date).toLocaleDateString()},{key:"early_discharge_notification",label:"Discharge Status"},{key:"medically_optimised",label:"Medically Optimised"},{key:"criteria_to_reside",label:"Criteria to Reside"},{key:"fast_track",label:"Fast Track"},{key:"transport_status",label:"Transport Status"},{key:"pathway",label:"Pathway"}],logistics:[{key:"name",label:"Patient Name"},{key:"ward_name",label:"Ward"},{key:"room_name",label:"Room"},{key:"bed_name",label:"Bed"},{key:"bed_type",label:"Bed Type"},{key:"transport_booking",label:"Transport Booked"},{key:"transport_mobility",label:"Transport Type"},{key:"district_nurse_referral",label:"District Nurse"},{key:"equipment",label:"Equipment"}]}),Ay=e=>{const t=Ey();return[{id:"overview",label:"Patient Overview",data:e,columns:t.overview,ariaLabel:"Patient Overview Data Grid",ariaDescription:"Overview of all patients with basic information"},{id:"vitals",label:"Vital Signs & EWS",data:e,columns:t.vitals,sortConfig:[{key:"ews_score",direction:"desc"},{key:"name",direction:"asc"},{key:"ward_name",direction:"asc"}],ariaLabel:"Patient Vital Signs Data Grid",ariaDescription:"Patient vital signs and Early Warning Scores"},{id:"discharge",label:"Discharge Planning",data:e.filter(n=>n.anticipated_discharge_date),columns:t.discharge,sortConfig:[{key:"anticipated_discharge_date",direction:"asc"},{key:"discharge_status",direction:"desc"}],ariaLabel:"Discharge Planning Data Grid",ariaDescription:"Patient discharge planning and status information"},{id:"logistics",label:"Bed Management",data:e,columns:t.logistics,sortConfig:[{key:"ward_name",direction:"asc"}],ariaLabel:"Bed Management Data Grid",ariaDescription:"Patient location and logistics information"}]},zu={dataComparator:Iy,filterFunction:Fy,booleanRenderer:Ly,getDataId:By};function Wu(e,t,n){const{primaryField:r,secondaryFields:a=[],badges:i=[],hiddenFields:o=[],getPriority:l,getVariant:u,fieldRenderers:c={},classPrefix:d="adaptive-card"}=n,f=t.find(T=>T.key===r),m=f?.cardRenderer?f.cardRenderer(e):f?.render?f.render(e):e[r||"name"]||"Untitled",g=()=>a.filter(w=>!o.includes(w)&&e[w]).slice(0,3).map(w=>{const j=t.find(x=>x.key===w),I=e[w],$=c[w]?c[w](I,e):j?.cardRenderer?j.cardRenderer(e):j?.render?j.render(e):I;return`${j?.label||w}: ${$}`}).join(" â€¢ "),y=()=>i.length===0?null:i.filter(T=>e[T.fieldKey]!==void 0).map(T=>{const w=e[T.fieldKey],j=T.render?T.render(w,e):w;return`<span class="nhsuk-tag ${Ry(T,w)}">${j}</span>`}).join(""),h=()=>u?u(e):l?.(e)==="high"?"primary":"default",p=y(),b=g(),C=p?`${b}${p?`<div class="adaptive-card__badges">${p}</div>`:""}`:b;return{variant:h(),heading:String(m),descriptionHtml:C,className:`adaptive-card ${d}`,"aria-label":`Record for ${m}`}}function Ry(e,t){const n=e.className||"adaptive-card__badge";if(e.fieldKey==="ews_score"||e.fieldKey.includes("score")){const r=Number(t);return r>=7?`${n} nhsuk-tag--red`:r>=3?`${n} nhsuk-tag--yellow`:`${n} nhsuk-tag--green`}if(e.fieldKey==="priority"){const r=String(t).toLowerCase();if(r==="high")return`${n} nhsuk-tag--red`;if(r==="medium")return`${n} nhsuk-tag--yellow`;if(r==="low")return`${n} nhsuk-tag--green`}if(e.fieldKey==="status"){const r=String(t).toLowerCase();if(r==="urgent"||r==="critical")return`${n} nhsuk-tag--red`;if(r==="pending"||r==="warning")return`${n} nhsuk-tag--yellow`;if(r==="completed"||r==="success")return`${n} nhsuk-tag--green`}switch(e.color){case"primary":return`${n} nhsuk-tag--blue`;case"secondary":return`${n} nhsuk-tag--grey`;case"success":return`${n} nhsuk-tag--green`;case"warning":return`${n} nhsuk-tag--yellow`;case"danger":return`${n} nhsuk-tag--red`;default:return n}}const Hy={primaryField:"name",secondaryFields:["id","description","status"],badges:[{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],hiddenFields:[],getPriority:e=>e.priority||"medium",getStatus:e=>e.status||"active",getVariant:e=>e.priority==="high"?"primary":"default",fieldRenderers:{},classPrefix:"adaptive-card--generic"},Zs=({data:e,columns:t,onSelect:n,onAction:r,priority:a="medium",status:i="active"})=>{const o=e.name,l=e.age,u=e.ward_name,c=e.bed_name,d=e.ews_score,f=e.speciality,m=e.consultant;return s.jsxs("div",{className:`healthcare-card healthcare-card--patient healthcare-card--${a} healthcare-card--${i}`,onClick:()=>n?.(e),role:"button",tabIndex:0,"aria-label":`Patient record for ${o}, Age ${l}, Ward ${u}, Bed ${c}`,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__identity",children:[s.jsx("h3",{className:"healthcare-card__patient-name",children:o}),s.jsxs("p",{className:"healthcare-card__age-info",children:[s.jsx("span",{className:"healthcare-card__label",children:"Age: "}),s.jsx("span",{className:"healthcare-card__value",children:l})]})]}),s.jsx("div",{className:"healthcare-card__badges",children:d!==void 0&&s.jsxs(Ae,{color:zy(Uu(d)),className:"healthcare-card__alert",children:["EWS: ",d]})})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("dl",{className:"healthcare-card__details",children:[s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Ward"}),s.jsx("dd",{children:u})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Bed"}),s.jsx("dd",{children:c})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Specialty"}),s.jsx("dd",{children:f})]}),s.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--prominent",children:[s.jsx("dt",{children:"Consultant"}),s.jsx("dd",{children:m})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(lt,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-notes",e)},children:"Notes"}),s.jsx(lt,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-vitals",e)},children:"Vitals"}),s.jsx(lt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:g=>{g.stopPropagation(),r?.("view-full",e)},children:"View Full Record"})]})]})},Js=({data:e,onAction:t})=>s.jsxs("div",{className:"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__time-info",children:[s.jsx("h3",{className:"healthcare-card__time",children:new Date(e.appointment_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),s.jsx("p",{className:"healthcare-card__type",children:e.appointment_type})]}),s.jsxs("div",{className:"healthcare-card__badges",children:[s.jsx(Ae,{color:Wy(e.status||"active"),className:"healthcare-card__status",children:(e.status||"active").charAt(0).toUpperCase()+(e.status||"active").slice(1)}),s.jsxs(Ae,{color:"grey",className:"healthcare-card__duration",children:[e.duration||"30"," min"]})]})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("dl",{className:"healthcare-card__details",children:[s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Patient"}),s.jsx("dd",{children:e.patient_name})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Consultant"}),s.jsx("dd",{children:e.consultant})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Location"}),s.jsx("dd",{children:e.location})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(lt,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),s.jsx(lt,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Reschedule"})]})]}),Qs=({data:e,onAction:t})=>s.jsxs("div",{className:"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__medication-info",children:[s.jsx("h3",{className:"healthcare-card__medication-name",children:e.medication}),s.jsxs("p",{className:"healthcare-card__dose",children:[e.dose," â€¢ ",e.frequency]})]}),s.jsxs("div",{className:"healthcare-card__badges",children:[s.jsx(Ae,{color:"blue",className:"healthcare-card__route",children:e.route}),e.next_due&&s.jsxs(Ae,{color:"red",className:"healthcare-card__warning",children:["Due: ",new Date(e.next_due).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("dl",{className:"healthcare-card__details",children:[s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Patient"}),s.jsx("dd",{children:e.patient_name})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Prescriber"}),s.jsx("dd",{children:e.prescriber})]}),e.allergies&&s.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--urgent",children:[s.jsx("dt",{children:"Allergies"}),s.jsx("dd",{children:e.allergies})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(lt,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),s.jsx(lt,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Adjust Dose"})]})]}),eo=({data:e,onSelect:t,onAction:n,priority:r="medium"})=>{const a=e.name,i=e.ews_score,o=e.ews_data?.respiratory_rate_bpm,l=e.ews_data?.sp02,u=e.ews_data?.temperature,c=e.ews_data?.systolic_bp,d=e.ews_data?.heart_rate,f=e.ews_data?.avpu;return s.jsxs("div",{className:`healthcare-card healthcare-card--vitals healthcare-card--${r}`,onClick:()=>t?.(e),role:"button",tabIndex:0,"aria-label":`Vital signs for ${a}, EWS Score ${i}`,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__vitals-summary",children:[s.jsx("h3",{className:"healthcare-card__patient-name",children:a}),i!==void 0&&s.jsxs("p",{className:`healthcare-card__ews-score healthcare-card__ews-score--${Oy(i)}`,children:["EWS: ",i]})]}),s.jsx("div",{className:"healthcare-card__badges",children:f&&s.jsxs(Ae,{color:"blue",className:"healthcare-card__avpu",children:["AVPU: ",f.toUpperCase()]})})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("div",{className:"healthcare-card__vitals-grid",children:[o!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Respiratory Rate"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[o," bpm"]})]}),l!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"SpO2"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[l,"%"]})]}),u!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Temperature"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[u,"Â°C"]})]}),c!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Systolic BP"}),s.jsx("span",{className:"healthcare-card__vital-value",children:c})]}),d!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Heart Rate"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[d," bpm"]})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(lt,{variant:"secondary",className:"healthcare-card__action",onClick:m=>{m.stopPropagation(),n?.("view-trend",e)},children:"Trend"}),s.jsx(lt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:m=>{m.stopPropagation(),n?.("record-new",e)},children:"Record New"})]})]})};function Uu(e){const t=typeof e=="string"?parseInt(e,10):e;return t>=7?"critical":t>=5?"high":t>=3?"medium":"low"}function Oy(e){return Uu(e)}function zy(e){switch(e){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"grey";default:return"grey"}}function Wy(e){switch(e.toLowerCase()){case"active":return"blue";case"pending":return"orange";case"completed":return"green";case"cancelled":return"grey";default:return"blue"}}const Uy=[{fieldKey:"ews_score",render:e=>`EWS: ${e}`,className:"adaptive-card__ews-badge",color:"default"},{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],Gu=e=>e.ews_score&&Number(e.ews_score)>=7?"high":e.ews_score&&Number(e.ews_score)>=3?"medium":e.priority==="high"||e.status==="urgent"?"high":e.priority==="low"?"low":"medium",Vu={name:"healthcare",defaultCardConfig:{primaryField:"name",secondaryFields:["nhs_number","ward","condition","consultant"],badges:Uy,hiddenFields:[],getPriority:Gu,getStatus:e=>{if(e.status){const t=e.status.toLowerCase();if(["active","pending","completed","cancelled","urgent"].includes(t))return t}return"active"},getVariant:e=>Gu(e)==="high"||e.status==="urgent"?"primary":"default",fieldRenderers:{nhs_number:e=>e?`NHS: ${e}`:"",ews_score:e=>{const t=Number(e),n=t>=7?"HIGH":t>=3?"MEDIUM":"LOW";return`EWS: ${e} (${n})`},age:(e,t)=>t.dob?`${new Date().getFullYear()-new Date(t.dob).getFullYear()}y`:e?`${e}y`:""},classPrefix:"adaptive-card--healthcare"},cssImport:"./HealthcareCardTemplates.scss",cardTemplates:{patient:(e,t,n)=>{const r=n.getPriority?.(e)||"medium",a=n.getStatus?.(e)||"active",i=a==="urgent"?"active":a;return s.jsx(Zs,{data:e,columns:t,priority:r,status:i,onSelect:o=>console.log("Patient selected:",o),onAction:(o,l)=>console.log("Patient action:",o,l)})},appointment:(e,t,n)=>{const r=n.getStatus?.(e)||"pending",a=r==="urgent"?"pending":r;return s.jsx(Js,{data:e,columns:t,status:a,onSelect:i=>console.log("Appointment selected:",i),onAction:(i,o)=>console.log("Appointment action:",i,o)})},medication:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return s.jsx(Qs,{data:e,columns:t,priority:r,onSelect:a=>console.log("Medication selected:",a),onAction:(a,i)=>console.log("Medication action:",a,i)})},vitals:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return s.jsx(eo,{data:e,columns:t,priority:r,onSelect:a=>console.log("Vitals selected:",a),onAction:(a,i)=>console.log("Vitals action:",a,i)})}},fieldTypes:{isNHSNumber:e=>typeof e=="string"&&/^\d{3}\s?\d{3}\s?\d{4}$/.test(e.replace(/\s/g,"")),isEWSScore:e=>typeof e=="number"&&e>=0&&e<=20,isMedicalDate:e=>typeof e=="string"&&!isNaN(Date.parse(e))}};function Yu(e){return{primaryField:e?.primaryField||"name",secondaryFields:e?.secondaryFields||[],badges:e?.badgeFields?.map(t=>({fieldKey:t,className:"adaptive-card__badge"}))||[],hiddenFields:e?.hiddenFields||[],cardTemplate:e?.cardTemplate?(t,n,r)=>e.cardTemplate(t,n):void 0,classPrefix:"adaptive-card--generic"}}function qu(e){if(!e||e.length===0)return!1;const t=e[0];return t.ews_score!==void 0||t.nhs_number!==void 0||t.patient_name!==void 0||t.ward!==void 0||t.consultant!==void 0}function Gy(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const a=[...e.selectedRows];return a[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:a};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:i}=t.payload,o=new Array(i).fill(!1),l=new Array(i).fill(null),u=new Array(i).fill([]);for(let c=0;c<Math.min(e.tabLoadingStates.length,i);c++)o[c]=e.tabLoadingStates[c],l[c]=e.tabErrors[c],u[c]=e.selectedRows[c];return{...e,tabLoadingStates:o,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}function Vy(e,t){const[n,r]=E.useState("cards");return E.useEffect(()=>{if(t){r(t);return}const a=()=>{const i=window.innerWidth;i<e.mobile?r("cards"):i<e.desktop?r("hybrid"):r("table")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[e,t]),n}function Yy(e){return!e||typeof e!="object"?null:e.appointment_type||e.appointment_time||e.clinic?"appointment":e.medication_name||e.medication||e.dose||e.frequency?"medication":e.ews_score!==void 0||e.respiratory_rate!==void 0||e.spo2!==void 0||e.temperature!==void 0||e.systolic_bp!==void 0||e.heart_rate!==void 0?"vitals":e.name||e.patient_name||e.nhs_number||e.ward||e.bed?"patient":null}function qy(e,t,n,r){const a=r?{...r.defaultCardConfig,...n}:{...Hy,...n};if(r&&r.cardTemplates){const i=Yy(e);if(i&&r.cardTemplates[i]){const o=r.cardTemplates[i](e,t,a);if(o)return{variant:"default",children:o}}}return a.cardTemplate&&a.cardTemplate(e,t,a),Wu(e,t,a)}const to=({breakpoints:e={mobile:768,tablet:1024,desktop:1200},forceLayout:t,cardConfig:n={},experimental:r={},enableAdvancedSorting:a=!1,topActions:i,bottomActions:o,gridActions:l,forceGridActionsAbove:u,tabPanels:c,dataConfig:d,selectedIndex:f,onTabChange:m,ariaLabel:g="Data grid",ariaDescription:y,orientation:h="horizontal",id:p,disabled:b=!1,className:C,...T})=>{const w=Vy(e,t),j=f!==void 0,I=f??0,$=E.useMemo(()=>{if(c.some(Y=>Y.data&&Y.data.length>0&&qu(Y.data))){const Y=Yu(n);return{...Vu.defaultCardConfig,...Y}}else return Yu(n)},[n,c]),N=E.useMemo(()=>c.some(Y=>Y.data&&Y.data.length>0&&qu(Y.data))?Vu:void 0,[c]),x=E.useMemo(()=>({selectedIndex:I,tabLoadingStates:new Array(c.length).fill(!1),tabErrors:new Array(c.length).fill(null),sortConfig:[],selectedRows:new Array(c.length).fill([]),globalSelectedRowData:null,filters:void 0}),[I,c.length]),[F,M]=E.useReducer(Gy,x),v=E.useRef([]),L=E.useRef([]),P=E.useRef([]),S=E.useRef(null),[D,B]=E.useState({focusArea:"tabs",focusedTabIndex:0,focusedCardIndex:0,selectedCardIndex:-1,isGridActive:!1,focusedCardElementIndex:0,cardElements:[],isCardNavigationActive:!1,gridColumns:1,gridRows:1,cardSortConfig:null,focusedSortControlIndex:0,isSortControlsActive:!1}),Q=E.useCallback(K=>{if(!K.current)return{columns:1,rows:0};const Y=K.current,ie=Y.querySelectorAll(".aria-tabs-datagrid-adaptive__card-wrapper");if(ie.length===0)return{columns:1,rows:0};const ne=Y.offsetWidth,J=ie[0].offsetWidth,le=Math.floor(ne/J)||1,Z=Math.ceil(ie.length/le);return{columns:le,rows:Z}},[]),U=E.useCallback((K,Y)=>({row:Math.floor(K/Y),col:K%Y}),[]),H=E.useCallback((K,Y,ie)=>K*ie+Y,[]),V=E.useCallback((K,Y,ie,ne)=>{const{row:A,col:J}=U(K,ne);let le=A,Z=J;switch(Y){case"up":le=Math.max(0,A-1);break;case"down":le=Math.min(Math.floor((ie-1)/ne),A+1);break;case"left":Z=Math.max(0,J-1);break;case"right":Z=Math.min(ne-1,J+1);break}const G=H(le,Z,ne);return Math.min(G,ie-1)},[U,H]);E.useEffect(()=>{D.isCardNavigationActive&&D.focusedCardElementIndex>=0&&D.cardElements.length>0&&setTimeout(()=>{const K=D.cardElements[D.focusedCardElementIndex];K&&(K.element.focus(),K.element.scrollIntoView({block:"nearest",behavior:"smooth"}))},0)},[D.isCardNavigationActive,D.focusedCardElementIndex,D.cardElements.length]),E.useEffect(()=>{const K=()=>{if(w==="cards"&&S.current){const{columns:ne,rows:A}=Q(S);B(J=>({...J,gridColumns:ne,gridRows:A}))}},Y=setTimeout(K,200),ie=()=>{setTimeout(K,100)};return window.addEventListener("resize",ie),()=>{clearTimeout(Y),window.removeEventListener("resize",ie)}},[w,c,Q]),E.useEffect(()=>{const K=F.tabLoadingStates.length,Y=c.length;K!==Y&&M({type:"ADJUST_ARRAYS",payload:{newLength:Y}})},[c.length,F.tabLoadingStates.length]),E.useEffect(()=>{j&&f!==F.selectedIndex&&M({type:"SET_SELECTED_INDEX",payload:f})},[j,f,F.selectedIndex]);const O=E.useCallback(K=>{K>=0&&K<c.length&&!c[K].disabled&&(M({type:"SET_SELECTED_INDEX",payload:K}),m?.(K))},[c,m]),se=E.useCallback(K=>{console.log("Card selected:",K),M({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:K})},[]),z=E.useCallback(K=>{const Y=L.current[K];Y&&(Y.focus(),Y.scrollIntoView({block:"nearest",behavior:"smooth"}))},[]),pe=E.useCallback(K=>{const Y=L.current[K];if(!Y)return[];const ie=['button:not([disabled]):not([aria-hidden="true"])','a[href]:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','select:not([disabled]):not([aria-hidden="true"])','textarea:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])','.healthcare-card__detail[tabindex]:not([tabindex="-1"])',".healthcare-card__action:not([disabled])",".tag:not([disabled])"].join(", "),ne=Y.querySelectorAll(ie);return Array.from(ne).map((A,J)=>({id:A.id||`card-${K}-element-${J}`,element:A,label:A.getAttribute("aria-label")||A.textContent?.trim()||A.getAttribute("title")||`Element ${J+1}`,type:A.tagName.toLowerCase()==="button"?"button":A.tagName.toLowerCase()==="a"?"link":["input","select","textarea"].includes(A.tagName.toLowerCase())?"input":"generic"}))},[]),ve=E.useRef(null),ue=E.useCallback(K=>{const Y=ve.current;if(!Y)return;const ie=document.createElement("div");ie.setAttribute("aria-live","polite"),ie.setAttribute("aria-atomic","true"),ie.className="sr-only",ie.textContent=K,Y.appendChild(ie),setTimeout(()=>{Y.contains(ie)&&Y.removeChild(ie)},1e3)},[]),he=E.useCallback(K=>{const Y=K.filter(ne=>ne.sortable!==!1),ie=[{value:"",label:"Sort by..."}];return Y.forEach(ne=>{const A=ne.label||ne.key;ne.key==="name"?ie.push({value:`${ne.key}-asc`,label:`${A} (A-Z)`},{value:`${ne.key}-desc`,label:`${A} (Z-A)`}):ne.key==="ews_score"||ne.key.includes("score")?ie.push({value:`${ne.key}-desc`,label:`${A} (High-Low)`},{value:`${ne.key}-asc`,label:`${A} (Low-High)`}):ne.key==="age"||ne.key.includes("date")||ne.key.includes("time")?ie.push({value:`${ne.key}-desc`,label:`${A} (Oldest-Youngest)`},{value:`${ne.key}-asc`,label:`${A} (Youngest-Oldest)`}):ie.push({value:`${ne.key}-asc`,label:`${A} (A-Z)`},{value:`${ne.key}-desc`,label:`${A} (Z-A)`})}),ie},[]),te=E.useCallback((K,Y)=>Y?[...K].sort((ie,ne)=>{const A=ie[Y.key],J=ne[Y.key];if(A==null&&J==null)return 0;if(A==null)return 1;if(J==null)return-1;const le=Number(A),Z=Number(J);if(!isNaN(le)&&!isNaN(Z))return Y.direction==="asc"?le-Z:Z-le;const G=String(A).toLowerCase(),oe=String(J).toLowerCase(),_e=G.localeCompare(oe);return Y.direction==="asc"?_e:-_e}):K,[]),re=E.useCallback(K=>{if(!K){B(G=>({...G,cardSortConfig:null})),ue("Card sorting cleared");return}const[Y,ie]=K.split("-"),ne={key:Y,direction:ie};B(G=>({...G,cardSortConfig:ne}));const le=c[F.selectedIndex]?.columns.find(G=>G.key===Y)?.label||Y;ue(`Cards sorted by ${le} in ${ie==="asc"?"ascending":"descending"} order`)},[c,F.selectedIndex,ue]),fe=E.useCallback(K=>{const ne=c[F.selectedIndex]?.columns.find(J=>J.key===K.key)?.label||K.key,A=K.direction==="asc"?"ascending":"descending";return`${ne} (${A})`},[c,F.selectedIndex]),k=E.useCallback(K=>{const Y=c[F.selectedIndex];if(a){const ie=F.sortConfig;return!ie||ie.length===0?K:[...K].sort((ne,A)=>{for(const{key:J,direction:le}of ie){let Z=ne[J],G=A[J];const oe=Y?.columns.find($e=>$e.key===J);if(oe?.cardRenderer?(Z=oe.cardRenderer(ne),G=oe.cardRenderer(A)):oe?.render&&(Z=oe.render(ne),G=oe.render(A)),Z==null&&G==null)continue;if(Z==null)return le==="asc"?-1:1;if(G==null)return le==="asc"?1:-1;const _e=Number(Z),de=Number(G);if(!isNaN(_e)&&!isNaN(de)){const $e=_e-de;if($e!==0)return le==="asc"?$e:-$e;continue}const Ce=String(Z).toLowerCase(),Ne=String(G).toLowerCase(),ye=Ce.localeCompare(Ne);if(ye!==0)return le==="asc"?ye:-ye}return 0})}else return te(K,D.cardSortConfig)},[a,F.sortConfig,D.cardSortConfig,te,c,F.selectedIndex]),R=E.useCallback((K,Y)=>{const ie=pe(K),ne=ie[Y];if(ne){ne.element.scrollIntoView({block:"nearest",behavior:"smooth"});const A=`Focused on ${ne.label}, ${ne.type} ${Y+1} of ${ie.length} within card`;ue(A)}},[pe,ue]),W=E.useCallback(K=>{v.current[K]?.focus()},[]),ee=E.useCallback(()=>{const K=P.current[0];if(!K)return[];const Y=['select:not([disabled]):not([aria-hidden="true"])','button:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])'].join(", "),ie=K.querySelectorAll(Y);return Array.from(ie)},[]),q=E.useCallback(K=>{if(K===0){const Y=P.current[0],ie=Y?.querySelector(".sort-controls-row");if(ie){ie.setAttribute("tabindex","-1"),ie.focus();const A=`Sort controls group with ${ee().length} interactive elements. Press Enter or Space to begin navigating controls.`;ue(A)}else Y&&Y.focus()}else{const Y=ee(),ie=K-1,ne=Y[ie];if(ne){ne.focus();const A=ne.tagName.toLowerCase()==="select",J=ne.tagName.toLowerCase()==="button",le=A?"dropdown":J?"button":"control",Z=A?". Use Space key to open dropdown":"",G=`${le} ${ie+1} of ${Y.length}${Z}`;ue(G)}}},[ee,ue]),ae=E.useCallback((K,Y)=>{const{key:ie}=K,ne=c[F.selectedIndex],A=ne?.data.length||0;if(ie==="ArrowLeft"&&K.shiftKey){K.preventDefault(),K.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(ie==="ArrowRight"&&K.shiftKey){K.preventDefault(),K.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!D.isCardNavigationActive){switch(ie){case"ArrowUp":if(K.preventDefault(),Y===0)B(G=>({...G,focusArea:"sort-controls",focusedSortControlIndex:0,isSortControlsActive:!1})),q(0);else{const G=V(Y,"up",A,D.gridColumns);G!==Y&&(B(oe=>({...oe,focusedCardIndex:G})),z(G),ue(`Moved to card ${G+1} of ${A}`))}break;case"ArrowDown":K.preventDefault();const J=V(Y,"down",A,D.gridColumns);J!==Y&&(B(G=>({...G,focusedCardIndex:J})),z(J),ue(`Moved to card ${J+1} of ${A}`));break;case"ArrowLeft":K.preventDefault();const le=V(Y,"left",A,D.gridColumns);le!==Y?(B(G=>({...G,focusedCardIndex:le})),z(le),ue(`Moved to card ${le+1} of ${A}`)):F.selectedIndex>0&&(M({type:"SET_SELECTED_INDEX",payload:F.selectedIndex-1}),B(G=>({...G,focusArea:"tabs"})),setTimeout(()=>W(F.selectedIndex-1),0));break;case"ArrowRight":K.preventDefault();const Z=V(Y,"right",A,D.gridColumns);Z!==Y?(B(G=>({...G,focusedCardIndex:Z})),z(Z),ue(`Moved to card ${Z+1} of ${A}`)):F.selectedIndex<c.length-1&&(M({type:"SET_SELECTED_INDEX",payload:F.selectedIndex+1}),B(G=>({...G,focusArea:"tabs"})),setTimeout(()=>W(F.selectedIndex+1),0));break;case"Enter":if(ne?.data[Y]){K.preventDefault(),B(oe=>({...oe,selectedCardIndex:Y}));const G=pe(Y);G.length>0?(B(oe=>({...oe,focusArea:"card",isCardNavigationActive:!0,focusedCardElementIndex:0,cardElements:G,selectedCardIndex:Y})),ue(`Card ${Y+1} selected and navigation activated. ${G.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`)):ue(`Card ${Y+1} selected.`)}break;case" ":if(ne?.data[Y]){K.preventDefault(),B(oe=>({...oe,selectedCardIndex:oe.selectedCardIndex===Y?-1:Y}));const G=D.selectedCardIndex===Y;ue(`Card ${Y+1} ${G?"deselected":"selected"}.`)}break}return}switch(ie){case"ArrowUp":case"ArrowLeft":K.preventDefault();const J=Math.max(0,D.focusedCardElementIndex-1);B(oe=>({...oe,focusedCardElementIndex:J})),R(Y,J);break;case"ArrowDown":case"ArrowRight":K.preventDefault();const le=Math.min(D.cardElements.length-1,D.focusedCardElementIndex+1);B(oe=>({...oe,focusedCardElementIndex:le})),R(Y,le);break;case"Enter":K.preventDefault();const Z=D.cardElements[D.focusedCardElementIndex];Z&&(Z.element.click(),ue(`Activated ${Z.label}`));break;case" ":K.preventDefault();const G=D.cardElements[D.focusedCardElementIndex];if(G){const oe=new MouseEvent("dblclick",{bubbles:!0});G.element.dispatchEvent(oe),ue(`Double-clicked ${G.label}`)}break;case"Escape":K.preventDefault(),B(oe=>({...oe,focusArea:"cards",isCardNavigationActive:!1,focusedCardElementIndex:0,cardElements:[]})),setTimeout(()=>z(Y),0),ue("Exited card navigation, returned to card level");break;case"Home":K.preventDefault(),D.cardElements.length>0&&(B(oe=>({...oe,focusedCardElementIndex:0})),R(Y,0));break;case"End":if(K.preventDefault(),D.cardElements.length>0){const oe=D.cardElements.length-1;B(_e=>({..._e,focusedCardElementIndex:oe})),R(Y,oe)}break}},[D,F.selectedIndex,c,se,z,W,B,pe,R,ue]),ge=E.useCallback(K=>{const Y=v.current[K],ie=Y?.parentElement;if(!Y||!ie){console.log("Tab or container not found for mobile scroll");return}const ne=Y.getBoundingClientRect(),A=ie.getBoundingClientRect();ne.left>=A.left&&ne.right<=A.right||(console.log("Tab not visible, scrolling into view (mobile)"),Y.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[]),Se=E.useCallback((K,Y)=>{if(w!=="cards")return;const{key:ie}=K;switch(ie){case"ArrowLeft":K.preventDefault();const ne=Y>0?Y-1:c.length-1;O(ne),B(Z=>({...Z,focusedTabIndex:ne})),v.current[ne]?.focus(),ge(ne);break;case"ArrowRight":K.preventDefault();const A=Y<c.length-1?Y+1:0;O(A),B(Z=>({...Z,focusedTabIndex:A})),v.current[A]?.focus(),ge(A);break;case"ArrowDown":K.preventDefault();const J=c[F.selectedIndex];J&&J.columns&&J.columns.length>0?(B(Z=>({...Z,focusArea:"sort-controls",focusedSortControlIndex:0})),q(0)):(B(Z=>({...Z,focusArea:"cards",focusedCardIndex:0})),z(0));break;case"Home":K.preventDefault(),O(0),B(Z=>({...Z,focusedTabIndex:0})),v.current[0]?.focus(),ge(0);break;case"End":K.preventDefault();const le=c.length-1;O(le),B(Z=>({...Z,focusedTabIndex:le})),v.current[le]?.focus(),ge(le);break;case"Enter":case" ":K.preventDefault(),O(Y);break}},[c.length,O,w,z,B,ge]),ce=E.useCallback((K,Y)=>{if(w!=="cards")return;const{key:ie}=K,ne=c[F.selectedIndex];if(Y===0&&!D.isSortControlsActive){switch(ie){case"ArrowUp":K.preventDefault(),B(J=>({...J,focusArea:"tabs",isSortControlsActive:!1})),W(F.selectedIndex);break;case"ArrowDown":K.preventDefault(),ne?.data&&ne.data.length>0&&(B(J=>({...J,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),z(0));break;case"Enter":case" ":K.preventDefault();const A=ee();if(A.length>0){B(le=>({...le,isSortControlsActive:!0,focusedSortControlIndex:1})),q(1);const J=`Entered sort controls navigation mode. ${A.length} controls available. Use arrow keys to navigate between controls.`;ue(J)}break;case"Escape":K.preventDefault(),B(J=>({...J,isSortControlsActive:!1,focusArea:"tabs"})),W(F.selectedIndex);break}return}if(D.isSortControlsActive){const J=ee().length;switch(ie){case"ArrowLeft":K.preventDefault();const le=D.focusedSortControlIndex>1?D.focusedSortControlIndex-1:J;B(G=>({...G,focusedSortControlIndex:le})),q(le);break;case"ArrowRight":K.preventDefault();const Z=D.focusedSortControlIndex<J?D.focusedSortControlIndex+1:1;B(G=>({...G,focusedSortControlIndex:Z})),q(Z);break;case"ArrowDown":if(K.preventDefault(),D.isSortControlsActive){const G=D.focusedSortControlIndex<J?D.focusedSortControlIndex+1:1;B(oe=>({...oe,focusedSortControlIndex:G})),q(G)}else ne?.data&&ne.data.length>0&&(B(G=>({...G,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),z(0));break;case"ArrowUp":K.preventDefault(),B(G=>({...G,isSortControlsActive:!1,focusArea:"sort-controls"})),q(0);break;case"Escape":K.preventDefault(),B(G=>({...G,isSortControlsActive:!1,focusArea:"sort-controls",focusedSortControlIndex:0})),q(0);break}}},[w,c,F.selectedIndex,D.isSortControlsActive,D.focusedSortControlIndex,q,W,z,B,ue]);if(w==="cards"){const K=c[F.selectedIndex];return s.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${C||""}`,children:[s.jsxs("div",{className:"aria-tabs-datagrid-adaptive__header",children:[s.jsx("div",{role:"tablist","aria-label":g,"aria-describedby":`${y||""} ${p?`${p}-navigation-help`:""}`.trim(),"aria-orientation":h,className:"aria-tabs-datagrid__tabs",children:c.map((Y,ie)=>{const ne=ie===F.selectedIndex,A=Y.disabled||b;return s.jsxs("button",{role:"tab",id:`tab-${Y.id}`,"aria-controls":`panel-${Y.id}`,"aria-selected":ne,"aria-disabled":A,tabIndex:ne?0:-1,ref:J=>{v.current[ie]=J},onClick:()=>O(ie),onKeyDown:J=>Se(J,ie),disabled:A,className:["aria-tabs-datagrid__tab",ne?"aria-tabs-datagrid__tab--selected":"",A?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[s.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:Y.label}),F.tabLoadingStates[ie]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),F.tabErrors[ie]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},Y.id)})}),i&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions",children:i})]}),K&&K.columns&&s.jsx(s.Fragment,{children:a?s.jsx(Ou,{sortConfig:F.sortConfig||[],columns:K.columns.map(Y=>({key:Y.key,label:Y.label})),onSortChange:Y=>{M({type:"SET_SORT",payload:Y})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls"}):s.jsx("div",{className:"aria-tabs-datagrid-adaptive__sort-controls",role:"region","aria-label":"Sort controls",tabIndex:D.focusArea==="sort-controls"?0:-1,ref:Y=>{P.current[0]=Y},onKeyDown:Y=>ce(Y,0),children:s.jsxs("div",{className:"sort-controls-row",children:[s.jsxs("div",{className:"sort-select-container",children:[s.jsx("label",{htmlFor:`card-sort-${K.id}`,className:"sort-label",children:"Sort cards by"}),s.jsx(Br,{id:`card-sort-${K.id}`,name:`card-sort-${K.id}`,value:D.cardSortConfig?`${D.cardSortConfig.key}-${D.cardSortConfig.direction}`:"",onChange:Y=>re(Y.target.value),className:"sort-select",children:he(K.columns).map(Y=>s.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),D.cardSortConfig&&s.jsxs("div",{className:"sort-indicator",role:"status","aria-live":"polite",children:[s.jsxs("span",{className:"sort-indicator-text",children:["Sorted by ",fe(D.cardSortConfig)]}),s.jsx(lt,{variant:"secondary",size:"small",onClick:()=>re(""),"aria-label":"Clear card sorting",className:"sort-clear-button",children:"Clear"})]})]})})}),s.jsx("div",{ref:S,className:"aria-tabs-datagrid-adaptive__cards",role:"grid","aria-label":`${K?.label||"Data"} cards in ${D.gridRows} rows and ${D.gridColumns} columns`,"aria-rowcount":D.gridRows,"aria-colcount":D.gridColumns,id:`panel-${K?.id}`,"aria-labelledby":`tab-${K?.id}`,children:k(K?.data||[]).map((Y,ie)=>{const ne=D.selectedCardIndex===ie,A=D.focusedCardIndex===ie&&D.focusArea==="cards",J=D.focusedCardIndex===ie&&D.focusArea==="card"&&D.isCardNavigationActive,le=ie===0&&D.focusArea!=="cards",Z=A||le,G=U(ie,D.gridColumns);if(n.cardTemplate){const de=n.cardTemplate(Y,K.columns);return s.jsx("div",{role:"row","aria-rowindex":G.row+1,className:"aria-tabs-datagrid-adaptive__row",children:s.jsx("div",{ref:Ce=>{L.current[ie]=Ce},className:["aria-tabs-datagrid-adaptive__card-wrapper",ne?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",A?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",J?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":G.col+1,"aria-selected":ne,"aria-expanded":J,"aria-description":J?`Card navigation active. ${D.cardElements.length} interactive elements available.`:void 0,tabIndex:Z?0:-1,onClick:()=>{B(Ce=>({...Ce,selectedCardIndex:Ce.selectedCardIndex===ie?-1:ie})),se(Y)},onKeyDown:Ce=>ae(Ce,ie),onFocus:()=>{B(Ce=>Ce.isCardNavigationActive?Ce:Ce.focusedCardIndex!==ie||Ce.focusArea!=="cards"?{...Ce,focusedCardIndex:ie,focusArea:"cards"}:Ce)},children:de})},`card-${ie}`)}const oe=qy(Y,K.columns,$,N),_e=[oe.className||"",ne?"aria-tabs-datagrid-adaptive__card--selected":"",A?"aria-tabs-datagrid-adaptive__card--focused":"",J?"aria-tabs-datagrid-adaptive__card--card-navigation":""].filter(Boolean).join(" ");return s.jsx("div",{role:"row","aria-rowindex":G.row+1,className:"aria-tabs-datagrid-adaptive__row",children:s.jsx("div",{className:["aria-tabs-datagrid-adaptive__card-wrapper",ne?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",A?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",J?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":G.col+1,"aria-selected":ne,"aria-expanded":J,onKeyDown:de=>{de.key==="Enter"&&(de.preventDefault(),B(Ce=>({...Ce,selectedCardIndex:ie}))),ae(de,ie)},children:s.jsx(qs,{...oe,ref:de=>{L.current[ie]=de},className:_e,"aria-label":`${oe["aria-label"]||oe.heading}. ${J?`Card navigation active with ${D.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.`:"Press Enter to navigate within card elements."}`,tabIndex:Z?0:-1,onClick:()=>{B(de=>({...de,selectedCardIndex:de.selectedCardIndex===ie?-1:ie})),se(Y)},onKeyDown:de=>ae(de,ie),onFocus:()=>{D.isCardNavigationActive||B(de=>de.focusedCardIndex!==ie||de.focusArea!=="cards"?{...de,focusedCardIndex:ie,focusArea:"cards",focusedCardElementIndex:0,cardElements:[]}:de)}})})},`card-${ie}`)})}),o&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o}),s.jsx("div",{ref:ve,className:"aria-tabs-datagrid-adaptive__announcements","aria-hidden":"true",style:{position:"fixed",top:"-1px",left:"-1px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0,padding:0,margin:0}})]})}return w==="hybrid"?s.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${C||""}`,children:[i&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:i}),s.jsx(mi,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:y,orientation:h,id:p,disabled:b,selectedIndex:f,onTabChange:m,className:"aria-tabs-datagrid-adaptive__table--hybrid",actions:l,forceActionsAbove:u,...T}),o&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o})]}):s.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${C||""}`,children:[i&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:i}),s.jsx(mi,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:y,orientation:h,id:p,disabled:b,selectedIndex:f,onTabChange:m,actions:l,forceActionsAbove:u,...T}),o&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o})]})},Xu=e=>{const t=Ks.find(n=>n.value===e);return t?t.icon:null},Xy={ecommerce:{name:"E-commerce",description:"Product catalogs with pricing, inventory, and ratings",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.priceRange){const[r,a]=t.priceRange,i=n.discountedPrice||n.price;if(i<r||i>a)return!1}return!(t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.inStock!==void 0&&n.inStock!==t.inStock||t.minRating!==void 0&&n.rating<t.minRating||t.tags&&t.tags.length>0&&!t.tags.some(r=>n.tags.includes(r)))}):e,booleanRenderer:e=>Xu(e),getDataId:e=>`ecommerce-${e.id}`},createTabs:e=>_i(e,[{id:"all-products",label:"All Products",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Price",render:n=>n.discountedPrice?`$${n.price.toFixed(2)} â†’ $${n.discountedPrice.toFixed(2)}`:`$${n.price.toFixed(2)}`},{key:"inStock",label:"Availability"},{key:"category",label:"Category"},{key:"rating",label:"Rating",render:n=>`${n.rating}/5 (${n.reviews} reviews)`}],ariaLabel:"All Products Grid",ariaDescription:"Complete product catalog with pricing and availability"},{id:"on-sale",label:"On Sale",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Original Price",render:n=>`$${n.price.toFixed(2)}`},{key:"discountedPrice",label:"Sale Price",render:n=>`$${n.discountedPrice?.toFixed(2)||"N/A"}`},{key:"discount",label:"Discount",render:n=>n.discountedPrice?`${((n.price-n.discountedPrice)/n.price*100).toFixed(0)}% OFF`:"N/A"}],filter:n=>n.filter(r=>r.discountedPrice!==void 0),ariaLabel:"Sale Products Grid",ariaDescription:"Products currently on sale with discounted pricing"},{id:"high-rated",label:"Top Rated",columns:[{key:"name",label:"Product Name"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.rating>=4),sortConfig:[{key:"rating",direction:"desc"}],ariaLabel:"Top Rated Products Grid",ariaDescription:"Highest rated products with 4+ star ratings"}])},financial:{name:"Financial",description:"Transaction data with amounts, categories, and statuses",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.dateRange){const[r,a]=t.dateRange;if(n.date<r||n.date>a)return!1}if(t.amountRange){const[r,a]=t.amountRange;if(Math.abs(n.amount)<r||Math.abs(n.amount)>a)return!1}return!(t.types&&t.types.length>0&&!t.types.includes(n.type)||t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.pending!==void 0&&n.pending!==t.pending)}):e,booleanRenderer:e=>Xu(e),getDataId:e=>`financial-${e.id}`},createTabs:e=>_i(e,[{id:"all-transactions",label:"All Transactions",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"},{key:"pending",label:"Status"}],sortConfig:[{key:"date",direction:"desc"}],ariaLabel:"All Transactions Grid",ariaDescription:"Complete transaction history with amounts and categories"},{id:"credits",label:"Credits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`+$${n.amount.toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="credit"),ariaLabel:"Credit Transactions Grid",ariaDescription:"Incoming payments and credits only"},{id:"debits",label:"Debits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`-$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="debit"),ariaLabel:"Debit Transactions Grid",ariaDescription:"Outgoing payments and charges only"},{id:"pending",label:"Pending",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"type",label:"Type"}],filter:n=>n.filter(r=>r.pending),ariaLabel:"Pending Transactions Grid",ariaDescription:"Transactions awaiting processing"}])}},Ku=(e,t)=>{const n=Xy[e];return{dataConfig:n.dataConfig,tabPanels:n.createTabs(t)}},Zu=[{name:"Sarah Johnson",age:34,ews_data:{respiratory_rate_bpm:16,sp02:98,temperature:36.8,systolic_bp:140,heart_rate:82,avpu:"alert"},ews_score:3,ward_name:"Cardiology",room_name:"Room A",bed_name:"A-1",bed_type:"bed",admin_note:"Hypertension monitoring",pathway:"Standard",speciality:"Cardiology",consultant:"Dr. Smith",local_authority:"NHS Trust",early_discharge_notification:"not_required",needs_based_assessment:!1,medically_optimised:!0,criteria_to_reside:!0,date_medically_optimised:"2024-01-15",anticipated_discharge_date:"2024-01-18",dru_suitability:!1,optica_planned_discharge_date:"2024-01-18",optica_date_confirmed:"2024-01-16",dsum:null,medications_tta:"None required",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!1,initial_therapy_contact:"",equipment:"None",district_nurse_referral:!1},{name:"Michael Chen",age:67,ews_data:{respiratory_rate_bpm:20,sp02:94,temperature:37.2,systolic_bp:160,heart_rate:95,avpu:"alert"},ews_score:7,ward_name:"Surgery",room_name:"Room B",bed_name:"B-3",bed_type:"bed",admin_note:"Post-operative monitoring",pathway:"Surgical",speciality:"General Surgery",consultant:"Dr. Johnson",local_authority:"NHS Trust",early_discharge_notification:"due",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!0,date_medically_optimised:"2024-01-17",anticipated_discharge_date:"2024-01-20",dru_suitability:!0,optica_planned_discharge_date:"2024-01-20",optica_date_confirmed:"2024-01-16",dsum:"Complex discharge",medications_tta:"Pain management",transport_booking:!0,transport_status:"In Progress",transport_date:"2024-01-20",transport_mobility:"Wheelchair",fast_track:!1,initial_therapy_contact:"2024-01-17",equipment:"Walking frame",district_nurse_referral:!0},{name:"Emma Thompson",age:28,ews_data:{respiratory_rate_bpm:24,sp02:90,temperature:38.5,systolic_bp:110,heart_rate:105,avpu:"alert"},ews_score:5,ward_name:"Respiratory",room_name:"Room C",bed_name:"C-2",bed_type:"bed",admin_note:"Pneumonia treatment",pathway:"Respiratory",speciality:"Respiratory Medicine",consultant:"Dr. Williams",local_authority:"NHS Trust",early_discharge_notification:"overdue",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!1,date_medically_optimised:"",anticipated_discharge_date:"2024-01-22",dru_suitability:!1,optica_planned_discharge_date:"2024-01-22",optica_date_confirmed:"",dsum:null,medications_tta:"Antibiotics",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!0,initial_therapy_contact:"",equipment:"Oxygen",district_nurse_referral:!1}],Ky=[{id:"appt-001",appointment_time:"2024-01-18T09:00:00Z",patient_name:"Sarah Johnson",appointment_type:"Cardiology Consultation",consultant:"Dr. Smith",location:"Clinic Room 3",duration:30,status:"pending"},{id:"appt-002",appointment_time:"2024-01-18T10:30:00Z",patient_name:"Michael Davis",appointment_type:"Post-op Follow-up",consultant:"Dr. Johnson",location:"Surgery Ward",duration:15,status:"active"},{id:"appt-003",appointment_time:"2024-01-18T14:00:00Z",patient_name:"Emma Thompson",appointment_type:"Respiratory Assessment",consultant:"Dr. Wilson",location:"Emergency Department",duration:45,status:"pending"}],Zy=[{id:"med-001",medication:"Amlodipine",dose:"5mg",frequency:"Once daily",route:"Oral",next_due:"2024-01-18T08:00:00Z",prescriber:"Dr. Smith",patient_name:"Sarah Johnson",allergies:null,priority:"medium"},{id:"med-002",medication:"Morphine",dose:"10mg",frequency:"Every 4 hours",route:"IV",next_due:"2024-01-18T10:00:00Z",prescriber:"Dr. Johnson",patient_name:"Michael Davis",allergies:"Codeine allergy",priority:"high"},{id:"med-003",medication:"Salbutamol",dose:"2 puffs",frequency:"As needed",route:"Inhaled",next_due:"2024-01-18T12:00:00Z",prescriber:"Dr. Wilson",patient_name:"Emma Thompson",allergies:null,priority:"high"}],Jy=[{id:"vitals-001",patient_name:"Sarah Johnson",recorded_time:"2024-01-18T07:30:00Z",temperature:36.8,blood_pressure:"140/90",heart_rate:82,respiratory_rate:16,oxygen_saturation:98,ews_score:3,priority:"medium"},{id:"vitals-002",patient_name:"Michael Davis",recorded_time:"2024-01-18T08:15:00Z",temperature:37.2,blood_pressure:"130/85",heart_rate:98,respiratory_rate:20,oxygen_saturation:95,ews_score:7,priority:"high"},{id:"vitals-003",patient_name:"Emma Thompson",recorded_time:"2024-01-18T09:00:00Z",temperature:38.5,blood_pressure:"110/70",heart_rate:105,respiratory_rate:24,oxygen_saturation:90,ews_score:9,priority:"high"}],Ju=[{id:"PROD001",name:"Wireless Headphones",price:199.99,discountedPrice:149.99,inStock:!0,category:"Electronics",rating:4.5,reviews:1247,tags:["wireless","bluetooth","premium"]},{id:"PROD002",name:"Running Shoes",price:129.99,inStock:!0,category:"Sports",rating:4.8,reviews:892,tags:["running","athletic","comfortable"]},{id:"PROD003",name:"Coffee Maker",price:89.99,discountedPrice:59.99,inStock:!1,category:"Kitchen",rating:4.2,reviews:456,tags:["kitchen","coffee","appliance"]},{id:"PROD004",name:"Smartphone Case",price:24.99,inStock:!0,category:"Accessories",rating:4,reviews:234,tags:["protection","mobile","durable"]}],Qu=[{id:"TXN001",date:new Date("2024-01-15"),amount:2500,type:"credit",category:"Salary",description:"Monthly salary payment",accountId:"ACC001",pending:!1,recurring:!0},{id:"TXN002",date:new Date("2024-01-14"),amount:89.5,type:"debit",category:"Groceries",description:"Supermarket shopping",accountId:"ACC001",pending:!1,recurring:!1},{id:"TXN003",date:new Date("2024-01-16"),amount:1200,type:"debit",category:"Rent",description:"Monthly rent payment",accountId:"ACC001",pending:!0,recurring:!0},{id:"TXN004",date:new Date("2024-01-13"),amount:150,type:"credit",category:"Refund",description:"Product return refund",accountId:"ACC001",pending:!1,recurring:!1}],ed=[{id:"LEAD001",companyName:"Tech Solutions Inc",contactPerson:"John Smith",email:"john@techsolutions.com",status:"qualified",value:5e4,lastContact:new Date("2024-01-15"),source:"Website",isHotLead:!0},{id:"LEAD002",companyName:"Global Industries",contactPerson:"Maria Garcia",email:"maria@globalind.com",status:"contacted",value:25e3,lastContact:new Date("2024-01-14"),source:"Referral",isHotLead:!1},{id:"LEAD003",companyName:"StartupXYZ",contactPerson:"Alex Johnson",email:"alex@startupxyz.com",status:"new",value:15e3,lastContact:new Date("2024-01-16"),source:"Cold Call",isHotLead:!0}],Qy={dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>!(t.status&&!t.status.includes(n.status)||t.minValue&&n.value<t.minValue||t.hotLeadsOnly&&!n.isHotLead)):e,booleanRenderer:e=>s.jsx("span",{style:{color:e?"#dc2626":"#6b7280",fontWeight:e?"bold":"normal"},children:e?"ðŸ”¥ Hot Lead":"ðŸ“‹ Standard"}),getDataId:e=>`business-${e.id}`},ex=()=>[{id:"patients",label:"Patients",data:Zu,columns:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Records",ariaDescription:"Healthcare patient management with EWS monitoring",cardTemplate:(e,t)=>s.jsx(Zs,{data:e,columns:t,onSelect:n=>console.log("Selected patient:",n),onAction:(n,r)=>console.log("Patient action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})},{id:"appointments",label:"Appointments",data:Ky,columns:[{key:"appointment_time",label:"Time"},{key:"patient_name",label:"Patient"},{key:"appointment_type",label:"Type"},{key:"consultant",label:"Consultant"}],ariaLabel:"Patient Appointments",ariaDescription:"Scheduled appointments and consultations",cardTemplate:(e,t)=>s.jsx(Js,{data:e,columns:t,onSelect:n=>console.log("Selected appointment:",n),onAction:(n,r)=>console.log("Appointment action:",n,r),status:e.status})},{id:"medications",label:"Medications",data:Zy,columns:[{key:"medication",label:"Medication"},{key:"dose",label:"Dose"},{key:"frequency",label:"Frequency"},{key:"next_due",label:"Next Due"}],ariaLabel:"Patient Medications",ariaDescription:"Medication administration and scheduling",cardTemplate:(e,t)=>s.jsx(Qs,{data:e,columns:t,onSelect:n=>console.log("Selected medication:",n),onAction:(n,r)=>console.log("Medication action:",n,r),priority:e.priority})},{id:"vitals",label:"Vital Signs",data:Jy,columns:[{key:"patient_name",label:"Patient"},{key:"recorded_time",label:"Time"},{key:"temperature",label:"Temperature"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Vital Signs",ariaDescription:"Patient vital signs monitoring and EWS scores",cardTemplate:(e,t)=>s.jsx(eo,{data:e,columns:t,onSelect:n=>console.log("Selected vitals:",n),onAction:(n,r)=>console.log("Vitals action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})}],tx=()=>{const[e,t]=E.useState("healthcare"),n=E.useMemo(()=>({healthcare:{title:"Healthcare Workflow Management",description:"Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals",dataConfig:zu,tabPanels:ex(),data:Zu},ecommerce:{title:"E-commerce Product Catalog",description:"Product management with pricing and inventory",...Ku("ecommerce",Ju),data:Ju},financial:{title:"Financial Transaction Dashboard",description:"Banking and financial data management",...Ku("financial",Qu),data:Qu},business:{title:"Sales Lead Management",description:"Custom CRM configuration with business logic",dataConfig:Qy,tabPanels:_i(ed,[{id:"all-leads",label:"All Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"status",label:"Status"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"isHotLead",label:"Priority"}],ariaLabel:"All Sales Leads Grid",ariaDescription:"Complete sales pipeline with lead information"},{id:"hot-leads",label:"Hot Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"lastContact",label:"Last Contact",render:a=>a.lastContact.toLocaleDateString()}],filter:a=>a.filter(i=>i.isHotLead),sortConfig:[{key:"value",direction:"desc"}],ariaLabel:"Hot Leads Grid",ariaDescription:"High-priority leads requiring immediate attention"},{id:"pipeline",label:"Active Pipeline",columns:[{key:"companyName",label:"Company"},{key:"status",label:"Status"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"source",label:"Source"}],filter:a=>a.filter(i=>["contacted","qualified"].includes(i.status)),ariaLabel:"Active Pipeline Grid",ariaDescription:"Leads currently in the sales pipeline"}]),data:ed}}),[]),r=n[e];return s.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[s.jsxs("div",{style:{marginBottom:"2rem"},children:[s.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"AriaTabsDataGrid - Comprehensive Demo"}),s.jsx("p",{style:{fontSize:"1.1rem",color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:"This demo showcases the component's versatility across different domains: healthcare, e-commerce, financial services, and custom business applications. Each configuration demonstrates domain-specific data operations, custom renderers, and specialized filtering logic."}),s.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:Object.keys(n).map(a=>s.jsx(lt,{variant:e===a?"primary":"secondary",onClick:()=>t(a),style:{textTransform:"capitalize"},children:a},a))}),s.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem"},children:[s.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"0.5rem",color:"#1e293b"},children:r.title}),s.jsx("p",{style:{color:"#64748b",marginBottom:"1rem"},children:r.description}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.9rem"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Data Records:"})," ",r.data.length]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Tab Panels:"})," ",r.tabPanels.length]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Features:"})," ",["Row Selection","Custom Filtering","Domain-Specific Renderers","Keyboard Navigation","ARIA Compliance"].join(", ")]})]})]})]}),s.jsx(mi,{dataConfig:r.dataConfig,tabPanels:r.tabPanels,ariaLabel:`${r.title} Data Grid`,ariaDescription:`Interactive data grid for ${r.description.toLowerCase()}`}),s.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f1f5f9",borderRadius:"0.5rem",border:"1px solid #cbd5e1"},children:[s.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#334155"},children:"Implementation Details"}),s.jsxs("div",{style:{display:"grid",gap:"1rem",fontSize:"0.9rem"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Current Mode:"})," ",e," configuration"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Data Operations:"})," Custom comparator, filter function, and boolean renderer"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Architecture:"})," Generic core with domain-specific plugins and factory helpers"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"State Management:"})," Global row selection with data-object persistence"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Accessibility:"})," Full ARIA support with dynamic labels and descriptions"]})]})]})]})},no=e=>s.jsx(vs,{...e}),nx=({children:e,pageTitle:t,pageHeadingProps:n,columnWidth:r=Tn.TwoThirds,mainWrapperSize:a,skipLinkProps:i,headerProps:o,footerProps:l,service:u,navigation:c,search:d,account:f,organisation:m,logo:g,className:y,...h})=>{const p={service:u,navigation:c,search:d,account:f,organisation:m,logo:g,...o};return s.jsxs(s.Fragment,{children:[s.jsx(Ys,{...i}),s.jsx(Ka,{...p}),s.jsx(no,{className:y,...h,children:s.jsx(ws,{size:a,children:s.jsx(Nn,{children:s.jsxs(or,{width:r,children:[t&&s.jsx(Gt,{size:"l",...n,children:t}),e]})})})}),s.jsx(ks,{...l})]})},rx=({children:e,title:t,pageHeadingProps:n,columnWidth:r=Tn.TwoThirds,mainWrapperSize:a="small",skipLinkProps:i,headerProps:o,footerProps:l,backLinkProps:u,serviceName:c,serviceHref:d,logo:f,className:m,...g})=>{const y={service:{text:c,href:d},logo:f,navigation:void 0,search:void 0,account:void 0,...o};return s.jsxs(s.Fragment,{children:[s.jsx(Ys,{...i}),s.jsx(Ka,{...y}),s.jsxs(no,{className:m,...g,children:[u&&s.jsx(Ga,{...u}),s.jsx(ws,{size:a,children:s.jsx(Nn,{children:s.jsxs(or,{width:r,children:[t&&s.jsx(Gt,{style:{marginTop:"3rem"},size:"l",...n,children:t}),e]})})})]}),s.jsx(ks,{...l})]})},td=({text:e="Next",html:t,href:n="#",className:r,element:a="a",onClick:i,...o})=>{const l=xe("nhsuk-back-link",r),u=xe("nhsuk-back-link__link"),c=()=>s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t?s.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:s.jsx("path",{d:"M15.5 12c0 .3-.1.5-.3.7l-5 5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4L13.1 12 8.8 7.7c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l5 5c.2.2.3.4.3.7z"})})]});return s.jsx("div",{className:l,children:a==="button"?s.jsx("button",{className:u,type:"button",onClick:i,...o,children:c()}):s.jsx("a",{className:u,href:n,...o,children:c()})})};td.displayName="ForwardLink";const mr=Object.freeze({small:320,smallMax:767,medium:768,large:1025,xlarge:1200,xxlarge:1440});function nd(){return typeof window>"u"?mr.small:window.innerWidth||document.documentElement.clientWidth||0}function ro(){const[e,t]=X.useState(nd());X.useEffect(()=>{if(typeof window>"u")return;const i=()=>t(nd());return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const n=X.useCallback(i=>e>=mr[i],[e]),r=X.useCallback(i=>e<mr[i],[e]),a=X.useCallback((i,o)=>e>=mr[i]&&e<mr[o],[e]);return{width:e,up:n,down:r,between:a,values:mr}}function ax(e){const{width:t,values:n}=ro();let r=e.base;const a=["small","medium","large","xlarge","xxlarge"];for(const i of a){const o=n[i];t>=o&&e[i]!==void 0&&(r=e[i])}return r}function rd(e={}){const{enabled:t=!0,paramSelected:n="nsv",paramDrill:r="nsvDrill"}=e,[a,i]=X.useState(()=>typeof window>"u"||!t?void 0:new URLSearchParams(window.location.search).get(n)),[o,l]=X.useState(()=>typeof window>"u"||!t?!1:new URLSearchParams(window.location.search).get(r)==="1");return X.useEffect(()=>{if(!t||typeof window>"u")return;const u=new URLSearchParams(window.location.search);a?u.set(n,String(a)):u.delete(n),u.set(r,o?"1":"0");const c=`${window.location.pathname}?${u.toString()}${window.location.hash}`;window.history.replaceState(null,"",c)},[a,o,t,n,r]),{selectedId:a,setSelectedId:i,drilledIn:o,setDrilledIn:l}}const ix=({className:e})=>s.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M10.7 3.3a1 1 0 0 1 0 1.4L7.41 8l3.3 3.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 0Z"})}),sx=({className:e})=>s.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M5.3 12.7a1 1 0 0 1 0-1.4L8.59 8l-3.3-3.3a1 1 0 0 1 1.42-1.4l4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.42 0Z"})});function ad(e){const{items:t,selectedId:n,defaultSelectedId:r,onSelectionChange:a,renderItemContent:i,renderContent:o,renderSecondaryContent:l,forceLayout:u,animated:c=!0,backLabel:d="Back",nextLabel:f="Next",isLoading:m=!1,emptyState:g,a11y:y,className:h,getId:p=me=>me.id,orientation:b="vertical",autoEnableThirdColumn:C=!0,onDrillChange:T,navigationInstructions:w="Use arrow keys to navigate, Enter to open.",initialFocus:j="first",skipFocusOnSelect:I=!1,skipAnnouncements:$=!1,onFocusChange:N,syncUrl:x=!1,urlParamSelected:F="nsv",urlParamDrill:M="nsvDrill",urlSyncDebounceMs:v=0,lazySecondary:L=!1,navFooter:P,collapsibleNav:S=!1,navInitiallyCollapsed:D=!1,onNavCollapseChange:B,collapseToggleLabelShow:Q="Show navigation",collapseToggleLabelHide:U="Hide navigation",collapseToggleIconShow:H,collapseToggleIconHide:V,persistNavCollapsed:O,navCollapsedStorageKey:se="nsvCollapsed",navCollapsedUrlParam:z="nsvCollapsed",autoContentHeader:pe,contentHeaderLevel:ve=2,renderContentHeader:ue,contentSubheader:he,secondarySubheader:te}=e,{up:re}=ro(),[fe,k]=X.useState(!1);X.useEffect(()=>{k(!0)},[]);const R=fe&&re("medium"),W=fe&&re("xlarge");let ee;u?ee=u:R?ee="two-column":ee="list",!u&&C&&l&&W&&(ee="three-column");const q=rd({enabled:x,paramSelected:F,paramDrill:M}),[ae,ge]=X.useState(()=>q.selectedId!==void 0?q.selectedId:r),Se=n!==void 0?n:ae,ce=t.find(me=>p(me)===Se),[K,Y]=X.useState(void 0);X.useEffect(()=>{if(Se===void 0)return;Y(Se);const me=setTimeout(()=>Y(void 0),220);return()=>clearTimeout(me)},[Se]);const ie=X.useRef(null),ne=X.useRef(null),A=X.useRef(null),J=X.useRef(null),[le,Z]=X.useState(()=>({contentIndex:0,secondaryIndex:0})),[G,oe]=X.useState(()=>"nav"),[_e,de]=X.useState(0),Ce=()=>[J.current,ne.current,A.current].filter(Boolean),Ne=me=>{const ke=Ce(),be=Math.max(0,Math.min(me,ke.length-1));ke[be]?.focus(),de(be)},ye=X.useCallback(me=>me?Array.from(me.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(be=>!be.hasAttribute("disabled")&&be.tabIndex!==-1):[],[]),$e=X.useCallback(me=>{const ke=ye(ne.current);if(!ke.length){ne.current?.focus();return}const be=Math.max(0,Math.min(me,ke.length-1)),Me=ke[be];Me.focus(),setTimeout(()=>{document.activeElement!==Me&&(Me.focus(),setTimeout(()=>{document.activeElement!==Me&&Me.click()},10))},10),Z(ze=>({...ze,contentIndex:be}));const Je=ze=>{ze.key==="Escape"&&(ze.preventDefault(),ze.stopPropagation(),ne.current?.focus(),Me.removeEventListener("keydown",Je))};ke.forEach(ze=>{const Ue=ze._escapeHandler;Ue&&ze.removeEventListener("keydown",Ue)}),Me._escapeHandler=Je,Me.addEventListener("keydown",Je)},[ye]),Re=X.useCallback(me=>{const ke=ye(A.current);if(!ke.length){A.current?.focus();return}const be=Math.max(0,Math.min(me,ke.length-1)),Me=ke[be];Me.focus(),setTimeout(()=>{document.activeElement!==Me&&(Me.focus(),setTimeout(()=>{document.activeElement!==Me&&Me.click()},10))},10),Z(ze=>({...ze,secondaryIndex:be}));const Je=ze=>{ze.key==="Escape"&&(ze.preventDefault(),ze.stopPropagation(),A.current?.focus(),Me.removeEventListener("keydown",Je))};ke.forEach(ze=>{const Ue=ze._escapeHandler;Ue&&ze.removeEventListener("keydown",Ue)}),Me._escapeHandler=Je,Me.addEventListener("keydown",Je)},[ye]),Le=me=>{if(me.defaultPrevented)return;const ke=me.key,be=me.target,Me=!!_t.current&&_t.current.contains(be),Je=!!ne.current&&ne.current.contains(be),ze=!!A.current&&A.current.contains(be),Ue=!!A.current,Ir=be===J.current||be===ne.current||be===A.current,sr=Ee&&(ee==="list"||ee==="cards"),ps=Je&&!!be.closest(".nhs-navigation-split-view__header");if(G==="containers"&&Ir){if(ke==="ArrowRight"){me.preventDefault();const Pe=Ce(),Ge=Math.min(Pe.length-1,_e+1);Ne(Ge);return}if(ke==="ArrowLeft"){me.preventDefault();const Pe=Math.max(0,_e-1);Ne(Pe);return}if(ke==="Home"){me.preventDefault(),Ne(0);return}if(ke==="End"){me.preventDefault(),Ne(Ce().length-1);return}if(ke==="Enter"||ke===" "){if(me.preventDefault(),be===J.current){if(oe("nav"),_t.current){const Pe=Array.from(_t.current.querySelectorAll("[data-nav-item]"));(Pe[nt>=0?nt:0]||Pe[0])?.focus()}}else be===ne.current?(oe("content"),$e(le.contentIndex)):be===A.current&&(oe("secondary"),Re(le.secondaryIndex));return}return}if(ke==="Escape"){if(G==="content"||G==="secondary"){if(Je||ze){if(me.preventDefault(),oe("nav"),_t.current){const Ge=Array.from(_t.current.querySelectorAll("[data-nav-item]"))[nt>=0?nt:0];setTimeout(()=>Ge?.focus(),10)}}else if((be===ne.current||be===A.current)&&(me.preventDefault(),oe("nav"),_t.current)){const Ge=Array.from(_t.current.querySelectorAll("[data-nav-item]"))[nt>=0?nt:0];setTimeout(()=>Ge?.focus(),10)}}return}if(ke==="Enter"||ke===" "){if(be.matches('button, a, input, select, textarea, [role="button"], [role="link"], [role="tab"]'))return;if(be===ne.current&&G==="content"){me.preventDefault(),me.stopPropagation(),ye(ne.current).length>0&&setTimeout(()=>{$e(le.contentIndex)},50);return}if(be===A.current&&G==="secondary"){me.preventDefault(),me.stopPropagation(),ye(A.current).length>0&&setTimeout(()=>{Re(le.secondaryIndex)},50);return}}if(sr&&ps&&!Ir&&(ke==="ArrowRight"||ke==="ArrowLeft")){const Pe=ye(ne.current).filter(Ge=>Ge.closest(".nhs-navigation-split-view__header"));if(Pe.length>1){const Ge=Pe.indexOf(be);if(Ge>=0){const qg=(Ge+(ke==="ArrowRight"?1:-1)+Pe.length)%Pe.length;me.preventDefault(),Pe[qg].focus();return}}}if(ke==="ArrowRight"){if(Me||G==="nav"){me.preventDefault(),oe("content"),setTimeout(()=>ne.current?.focus(),10);return}if(Je||G==="content"){Ue&&(me.preventDefault(),oe("secondary"),setTimeout(()=>A.current?.focus(),10));return}}if(ke==="ArrowLeft"){if(ze||G==="secondary"){me.preventDefault(),oe("content"),setTimeout(()=>ne.current?.focus(),10);return}if(Je||G==="content"){if(me.preventDefault(),oe("nav"),_t.current){const Ge=Array.from(_t.current.querySelectorAll("[data-nav-item]"))[nt>=0?nt:0];setTimeout(()=>Ge?.focus(),10)}return}}if(ke==="Home"&&!Me&&(me.preventDefault(),oe("nav"),_t.current)){const Pe=Array.from(_t.current.querySelectorAll("[data-nav-item]")),Ge=Pe[nt>=0?nt:0]||Pe[0];setTimeout(()=>Ge?.focus(),10)}if(ke==="End"){const Pe=Ue?A.current:ne.current;Pe&&!Pe.contains(be)&&(me.preventDefault(),Ue?(oe("secondary"),setTimeout(()=>A.current?.focus(),10)):(oe("content"),setTimeout(()=>ne.current?.focus(),10)))}if(ke==="ArrowDown"||ke==="ArrowUp"){if(be===ne.current&&ke==="ArrowDown"){me.preventDefault(),ye(ne.current).length>0&&$e(0);return}if(be===A.current&&ke==="ArrowDown"){me.preventDefault(),ye(A.current).length>0&&Re(0);return}if(Je){const Pe=ye(ne.current);if(Pe.length){me.preventDefault();const Ge=ke==="ArrowDown"?1:-1,hn=(le.contentIndex+Ge+Pe.length)%Pe.length;$e(hn)}}else if(ze){const Pe=ye(A.current);if(Pe.length){me.preventDefault();const Ge=ke==="ArrowDown"?1:-1,hn=(le.secondaryIndex+Ge+Pe.length)%Pe.length;Re(hn)}}}},Ee=!!ce&&(ee==="list"||ee==="cards"),Ke=X.useMemo(()=>pe===void 0?{mobile:!0,tablet:!1,desktop:!1}:pe===!0?{mobile:!0,tablet:!0,desktop:!0}:pe===!1?{mobile:!1,tablet:!1,desktop:!1}:{mobile:pe.mobile!==void 0?pe.mobile:!0,tablet:pe.tablet||!1,desktop:pe.desktop||!1},[pe]),Ze=fe&&re("medium")&&!re("xlarge"),st=fe&&re("xlarge"),dn=!!l,ot=ee==="three-column",[ht,za]=X.useState(!1);X.useEffect(()=>{ot&&ht&&za(!1)},[ot,ht]),X.useEffect(()=>{ht&&!ot&&(oe("secondary"),de(2),setTimeout(()=>{A.current?.focus()},50))},[ht,ot]),X.useEffect(()=>{!ht&&!ot&&G==="secondary"&&(oe("content"),de(1),setTimeout(()=>{ne.current?.focus()},50))},[ht,ot,G]);const cc=!!ce&&(Ee&&Ke.mobile||!Ee&&Ze&&Ke.tablet||!Ee&&st&&Ke.desktop)||dn&&!ot,Rw=`h${ve}`,uc=ce?X.createElement(Rw,{style:{marginLeft:Ee?32:0,marginRight:Ee?32:0}},ce.label):null,Vg=Ee?"mobile":Ze?"tablet":"desktop",Hw=dn&&!ot&&!ht,dc=Ee&&Ke.mobile?s.jsx(Ga,{element:"button",text:d,style:{marginRight:16},onClick:()=>Pr(void 0,void 0)}):void 0,fc=Hw?s.jsx(td,{element:"button",text:f,onClick:()=>{za(!0)}}):void 0,hc=!ot&&ht?s.jsx(Ga,{element:"button",text:d,style:{marginRight:16},onClick:()=>za(!1)}):void 0,Ow=X.useMemo(()=>{if(!cc||!ce)return null;if(ue)return ue({item:ce,detailActive:Ee,context:Vg,backLink:dc,defaultHeading:uc});const me=ce&&he?typeof he=="function"?he(ce):he:null;return s.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[hc||dc,s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:[uc,me&&s.jsx("div",{className:"nhs-navigation-split-view__subheader",children:me})]})]}),fc&&s.jsx("div",{style:{marginLeft:"auto"},children:fc})]})},[cc,ce,ue,Ee,Vg,dc,hc,uc,fc,he]);X.useEffect(()=>{if(!x)return;const me=ee==="three-column";let ke=!1;const be=()=>{ke||(q.selectedId!==Se&&q.setSelectedId(Se),q.drilledIn!==me&&q.setDrilledIn(me))};if(v&&v>0){const Me=setTimeout(be,v);return()=>{ke=!0,clearTimeout(Me)}}else be()},[x,q,Se,ee,v]),X.useEffect(()=>{if(!x)return;const me=()=>{const ke=new URLSearchParams(window.location.search),be=ke.get(F);ke.get(M),ge(be===null?void 0:be)};return window.addEventListener("popstate",me),()=>window.removeEventListener("popstate",me)},[x,F,M,u,l]);const hs=X.useRef(0),kn=X.useRef(null),Pr=X.useCallback((me,ke)=>{me!==Se&&(n===void 0&&ge(me),a?.(me,ke))},[n,a,Se]);X.useEffect(()=>{if(!I&&Ee&&ne.current){const me=setTimeout(()=>ne.current?.focus(),30);return()=>clearTimeout(me)}},[Ee,Se,I]);const _t=X.useRef(null),[nt,Wa]=X.useState(()=>j==="first"?0:-1);X.useEffect(()=>{if(nt<0||!_t.current)return;const ke=Array.from(_t.current.querySelectorAll("[data-nav-item]"))[nt];if(ke){document.activeElement!==ke&&ke.focus(),hs.current=nt;const be=t[nt];N?.(be?p(be):void 0,be,nt)}},[nt,t,N,p]);const zw=me=>{const ke=b==="vertical"?"ArrowDown":"ArrowRight",be=b==="vertical"?"ArrowUp":"ArrowLeft";if(me.key==="ArrowRight"&&b==="vertical"){me.preventDefault(),ht?(oe("secondary"),setTimeout(()=>{A.current?.focus()},10)):(oe("content"),setTimeout(()=>{ne.current?.focus()},10));return}if(me.key===ke)me.preventDefault(),Wa(Me=>Math.min(t.length-1,Me+1));else if(me.key===be)me.preventDefault(),Wa(Me=>Math.max(0,Me-1));else if(me.key==="Home")me.preventDefault(),Wa(0);else if(me.key==="End")me.preventDefault(),Wa(t.length-1);else if(me.key==="Enter"||me.key===" "){me.preventDefault();const Me=t[nt];Me&&!Me.disabled&&Pr(p(Me),Me)}else if(me.key.length===1&&/[a-z0-9]/i.test(me.key)){kn.current||(kn.current={buffer:"",last:0});const Me=Date.now(),Je=700,ze=me.key.toLowerCase();Me-kn.current.last>Je?kn.current.buffer=ze:kn.current.buffer+=ze,kn.current.last=Me;let Ue=kn.current.buffer;const Ir=Ue.split("").every(hn=>hn===Ue[0]),sr=t.map(hn=>String(hn.label||"").toLowerCase());let ps=0;nt>=0&&(ps=(nt+1)%t.length);let Pe;const Ge=(hn,qg)=>{const Xg=t.length;for(let gc=0;gc<Xg;gc++){const _c=(ps+gc)%Xg;if(!t[_c].disabled&&sr[_c].startsWith(hn))return _c}};Ir&&Ue.length>1?Pe=Ge(Ue[0]):(Pe=Ge(Ue),Pe===void 0&&Ue.length>1&&(Pe=Ge(Ue[Ue.length-1]),Pe!==void 0&&kn.current&&(kn.current.buffer=Ue[Ue.length-1]))),Pe!==void 0&&Wa(Pe)}},Ww=X.useMemo(()=>{if(O&&(O==="url"||O==="both")&&typeof window<"u"){const ke=new URLSearchParams(window.location.search).get(z);if(ke==="1")return!0;if(ke==="0")return!1}if(O&&(O==="localStorage"||O==="both")&&typeof window<"u")try{const me=window.localStorage.getItem(se);if(me==="1")return!0;if(me==="0")return!1}catch{}return D},[O,D,se,z]),[fn,Uw]=X.useState(Ww);X.useEffect(()=>{B?.(fn)},[fn,B]);const Gw=X.useCallback(()=>{R&&S&&Uw(me=>!me)},[R,S]);X.useEffect(()=>{if(O&&!(typeof window>"u")){if(O==="localStorage"||O==="both")try{window.localStorage.setItem(se,fn?"1":"0")}catch{}if(O==="url"||O==="both"){const me=new URLSearchParams(window.location.search);me.set(z,fn?"1":"0");const ke=`${window.location.pathname}?${me.toString()}${window.location.hash}`;window.history.replaceState(null,"",ke)}}},[fn,O,se,z]);const Vw=["nhs-navigation-split-view",c?"nhs-navigation-split-view--animated":"",Ee?"nhs-navigation-split-view--detail-active":"",ee==="three-column"?"nhs-navigation-split-view--three-column":"",S&&R&&fn?"nhs-navigation-split-view--nav-collapsed":"",h].filter(Boolean).join(" "),pc=X.useRef(null);X.useEffect(()=>{if(!$&&pc.current){const me=ce?`Selected ${ce.label}`:"Selection cleared";pc.current.textContent=me}},[ce,$]),X.useEffect(()=>{!Ee&&Se==null&&_t.current&&_t.current.querySelectorAll("[data-nav-item]")[hs.current]?.focus()},[Ee,Se]);const Rn=ee==="three-column",[mc,Yw]=X.useState(!1);X.useEffect(()=>{Rn&&!mc&&Yw(!0)},[Rn,mc]);const Yg=X.useRef(Rn);X.useEffect(()=>{Yg.current!==Rn&&(T?.(Rn),Yg.current=Rn)},[Rn,T]);const qw=()=>{if(ee==="cards")return s.jsxs("ul",{className:"nhs-navigation-split-view__cards",role:"listbox","aria-activedescendant":Se?String(Se):void 0,children:[t.map(be=>{const Me=p(be),Je=Me===Se;return s.jsx("li",{className:"nhs-navigation-split-view__card-item",role:"option","aria-selected":Je,children:s.jsxs("button",{id:String(Me),type:"button",className:"nhs-navigation-split-view__card","data-selected":Je||void 0,"data-disabled":be.disabled||void 0,disabled:be.disabled,onClick:()=>!be.disabled&&Pr(Me,be),children:[be.icon&&s.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:be.icon}),s.jsx("span",{className:"nhs-navigation-split-view__item-label",children:be.label}),be.description&&s.jsx("span",{className:"nhs-navigation-split-view__item-description",children:be.description}),i?.(be),be.badge!==void 0&&s.jsx("span",{className:"nhs-navigation-split-view__badge",children:be.badge})]})},Me)}),t.length===0&&!m&&s.jsx("li",{className:"nhs-navigation-split-view__card-item","aria-disabled":"true",children:g||s.jsx("div",{style:{padding:16},children:"No items"})})]});const me="nsv-nav-instructions",ke=X.useMemo(()=>X.memo(({item:be,idx:Me,selected:Je,focused:ze})=>{const Ue=p(be),Ir=be.disabled?{"aria-disabled":!0,tabIndex:-1}:{tabIndex:ze?0:-1,onClick:()=>{hs.current=Me,Pr(Ue,be)},onKeyDown:sr=>{(sr.key==="Enter"||sr.key===" ")&&(sr.preventDefault(),hs.current=Me,Pr(Ue,be))}};return s.jsxs("li",{id:String(Ue),"data-nav-item":!0,className:"nhs-navigation-split-view__list-item nhs-navigation-split-view__item-button",role:"option","aria-selected":Je,"aria-current":Je?"true":void 0,"data-selected":Je||void 0,"data-disabled":be.disabled||void 0,...Ir,children:[be.icon&&s.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:be.icon}),s.jsxs("span",{className:"nhs-navigation-split-view__item-content",children:[s.jsx("span",{className:"nhs-navigation-split-view__item-label",children:be.label}),be.description&&s.jsx("span",{className:"nhs-navigation-split-view__item-description",children:be.description}),i?.(be)]}),be.badge!==void 0&&s.jsx("span",{className:"nhs-navigation-split-view__badge",children:be.badge})]})}),[p,Pr,i]);return s.jsxs(s.Fragment,{children:[s.jsxs("ul",{ref:_t,className:"nhs-navigation-split-view__list",onKeyDown:zw,role:"listbox","aria-label":"Navigation items","aria-describedby":me,"aria-activedescendant":Se?String(Se):void 0,children:[t.map((be,Me)=>s.jsx(ke,{item:be,idx:Me,selected:p(be)===Se,focused:Me===nt||nt===-1&&Me===0&&j==="first","data-just-selected":p(be)===K?"true":void 0},p(be))),t.length===0&&!m&&s.jsx("li",{className:"nhs-navigation-split-view__list-item","aria-disabled":"true",children:g||s.jsx("div",{style:{padding:16},children:"No items"})})]}),s.jsx("div",{id:me,style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:w})]})};return s.jsx("div",{ref:ie,className:Vw,"aria-label":y?.rootLabel,"data-layout":ee,onKeyDown:Le,children:s.jsxs("div",{className:"nhs-navigation-split-view__body",children:[s.jsxs("div",{className:"nhs-navigation-split-view__panes","data-active-detail":Ee||void 0,style:{transform:Ee?"translateX(-100%)":void 0},children:[s.jsxs("div",{ref:J,className:"nhs-navigation-split-view__nav-pane",role:"navigation","aria-label":y?.navigationLabel||"Items","data-collapsed":fn||void 0,tabIndex:0,children:[S&&R&&s.jsx("div",{className:"nhs-navigation-split-view__nav-collapse",children:s.jsx("button",{type:"button",onClick:Gw,className:"nhs-navigation-split-view__nav-collapse-btn","aria-label":fn?Q:U,title:fn?Q:U,children:fn?H||s.jsx(sx,{}):V||s.jsx(ix,{})})}),s.jsx("div",{className:"nhs-navigation-split-view__nav-scroll",children:qw()}),P&&s.jsx("div",{className:"nhs-navigation-split-view__nav-footer",role:"contentinfo",children:P})]}),s.jsxs("div",{ref:ne,className:"nhs-navigation-split-view__content-pane",role:"region","aria-label":y?.contentLabel||"Content","data-has-selection":!!ce||void 0,tabIndex:0,style:{display:ht&&!ot?"none":void 0},children:[cc&&s.jsx("div",{className:"nhs-navigation-split-view__header",children:Ow}),s.jsx("div",{className:"nhs-navigation-split-view__content-inner",style:{padding:32,flex:1},children:o(ce)})]}),ee==="three-column"&&(!L||mc)||ht&&!ot?s.jsx("div",{ref:A,className:"nhs-navigation-split-view__secondary-pane",role:"region","aria-label":y?.secondaryContentLabel||"Secondary",tabIndex:0,children:s.jsxs("div",{className:"nhs-navigation-split-view__secondary-inner",style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[ht&&!ot&&s.jsx("div",{className:"nhs-navigation-split-view__header",children:s.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[hc,s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:s.jsx("h2",{style:{marginLeft:0,marginRight:0},children:ce&&typeof ce=="object"&&"label"in ce?ce.label:String(ce)})})]})})}),ce&&te&&s.jsx("div",{className:"nhs-navigation-split-view__secondary-header",style:{padding:"16px 32px",borderBottom:"1px solid var(--nsplit-divider)"},children:typeof te=="function"?te(ce):te}),s.jsx("div",{style:{padding:32,flex:1,minWidth:0},children:l?.(ce)})]})}):null]}),s.jsx("div",{ref:pc,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"}}),s.jsx("div",{"aria-live":"polite",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:Rn?"Expanded to three column layout":"In two column layout"})]})})}ad.displayName="NavigationSplitView";const ox=typeof window<"u"&&window.document?X.useLayoutEffect:X.useEffect,id=(e,t,n,r)=>e==null||Number.isNaN(e)?r:Math.min(n,Math.max(t,e)),lx=({item:e,maxLines:t,enableDrilldown:n,onExpand:r,isActive:a,topLaneIndex:i})=>{const{ariaLabel:o}=e,l=`${e._pxLeft}px`,u=`${e._pxWidth}px`,c=`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${i})`,d=Math.floor(e._startFraction)+2,f=Math.max(1,Math.round(e._spanColumns)),m=n&&e.childItems&&e.childItems.length>0,g=h=>{m&&(h.preventDefault(),r?.(e))},y=m?{role:"button",tabIndex:0,"aria-haspopup":"dialog","aria-expanded":a||!1,onClick:g,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&g(h),h.key==="Escape"&&a&&g(h)}}:{};return s.jsxs("div",{className:xe("nhsuk-product-roadmap__item",m&&"nhsuk-product-roadmap__item--expandable",a&&"nhsuk-product-roadmap__item--active"),style:{left:l,width:u,top:c,"--item-height":t},role:"gridcell","aria-label":o,"aria-colindex":d,"aria-colspan":f,...y,children:[s.jsx("div",{className:"nhsuk-product-roadmap__item-bg","aria-hidden":"true"}),s.jsxs("div",{className:"nhsuk-product-roadmap__item-content",children:[s.jsx("span",{className:"nhsuk-product-roadmap__item-title",children:e.title}),m&&s.jsx("span",{className:xe("nhsuk-product-roadmap__item-expander",a&&"nhsuk-product-roadmap__item-expander--open"),"aria-hidden":"true"})]})]})},sd=E.memo(({dateHeadings:e,categories:t,columnWidthPx:n=400,itemMaxLines:r=2,className:a,ariaLabel:i="Product roadmap",enableDrilldown:o=!1,onToggleItem:l,drilldownMode:u="overlay",...c})=>{const[d,f]=E.useState(()=>new Set),[m,g]=E.useState(()=>new Set),y=E.useRef(new Set),h=E.useCallback(v=>d.has(v),[d]),p=E.useCallback(v=>{f(L=>{const P=new Set(L);return P.has(v.id)?(P.delete(v.id),g(S=>{const D=new Set(S);return D.add(v.id),D}),setTimeout(()=>g(S=>{const D=new Set(S);return D.delete(v.id),D}),240),l?.(v.id,!1)):(P.add(v.id),l?.(v.id,!0)),P})},[l]);ox(()=>{if(u!=="inline"||!o||typeof document>"u")return;const v=[];if(d.forEach(D=>{y.current.has(D)||v.push(D)}),y.current=new Set(d),!v.length)return;const L=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,P=v.map(D=>`.nhsuk-product-roadmap__inline-children[data-parent="${D}"] .nhsuk-product-roadmap__inline-child`).join(","),S=Array.from(document.querySelectorAll(P));if(S.length){if(L){S.forEach(D=>{D.style.opacity="1",D.style.transform="translateY(0)"});return}Promise.resolve().then(()=>Aw).then(D=>{(D.gsap||D.default||D).to(S,{opacity:1,y:0,duration:.32,ease:"power2.out",stagger:.05})}).catch(()=>{S.forEach(D=>{D.style.opacity="1",D.style.transform="translateY(0)"})})}},[d,u,o]);const b=E.useCallback(()=>{d.size&&f(new Set)},[d]),C=xe("nhsuk-product-roadmap",a),T=id(n,120,1200,400),w=id(r,1,6,2),j=E.useMemo(()=>e.map(v=>new Date(v+" 01")),[e]),I=E.useMemo(()=>{if(j.length===0){const P=new Date;return[P,P]}const v=new Date(j[0]),L=zr.offset(new Date(j[j.length-1]),1);return[v,L]},[j]),$=E.useMemo(()=>Vs().domain(I).range([0,j.length*T]),[I,j.length,T]),N=E.useCallback(v=>{if(v.startDate){const U=new Date(v.startDate),H=new Date(v.endDate??v.startDate);H<U&&H.setTime(U.getTime());const V=$(U),O=zr.offset(new Date(H),1);let se=$(O);Number.isFinite(se)||(se=V+T);const z=Math.max(T*.25,se-V),pe=V/T,ve=z/T;return{...v,_pxLeft:V,_pxWidth:z,_startFraction:pe,_spanColumns:ve}}const L=v.date??1,P=v.dateOffset??0,S=v.length??1,D=v.partialLength??1,B=L-1+P,Q=S-1+D;return{...v,_pxLeft:B*T,_pxWidth:Q*T,_startFraction:B,_spanColumns:Q}},[$,T]),x=E.useMemo(()=>t.map(v=>{const P=v.roadmapItems.map(D=>{const B=!D.childItems&&D.children?{...D,childItems:D.children}:{...D};return N(B)}).sort((D,B)=>D._pxLeft!==B._pxLeft?D._pxLeft-B._pxLeft:B._pxWidth-D._pxWidth),S=[];return P.forEach(D=>{const B=D._pxLeft,Q=D._pxLeft+D._pxWidth;let U=S.findIndex(H=>H<=B);U===-1&&(U=S.length,S.push(0)),S[U]=Q,D.verticalPosition=U+1}),{...v,roadmapItems:P,_laneCount:S.length}}),[t,N]),F=E.useMemo(()=>x.map(v=>v._laneCount||1),[x]),M=E.useMemo(()=>`var(--category-width) ${e.map(()=>"var(--column-width)").join(" ")}`,[e]);return s.jsxs("div",{className:C,style:{"--column-width":`${T}px`,gridTemplateColumns:M},role:"grid","aria-label":i,"aria-colcount":e.length+1,"aria-rowcount":x.length+1,...c,children:[s.jsxs("div",{className:"nhsuk-product-roadmap__header-row",role:"row","aria-rowindex":1,children:[s.jsx("div",{className:"nhsuk-product-roadmap__header-cell",role:"columnheader","aria-colindex":1,children:s.jsx("span",{className:"nhsuk-visually-hidden",children:"Category"})}),e.map((v,L)=>s.jsx("div",{className:"nhsuk-product-roadmap__date-heading",role:"columnheader","aria-colindex":L+2,children:v},`${v}-${L}`))]}),x.map((v,L)=>{const P=L+2,S=F[L];let D,B=0,Q=[];o&&u==="inline"&&(Q=v.roadmapItems.filter(O=>h(O.id)&&O.childItems&&O.childItems.length).map(O=>({id:O.id,lane:O.verticalPosition||1,count:O.childItems.length})).sort((O,se)=>O.lane-se.lane),B=Q.reduce((O,se)=>O+se.count,0));const U=S+B;D=`calc((${U} * var(--roadmap-item-block-height)) + (max(0, ${U} - 1) * var(--roadmap-row-gap)))`;const H={};let V=0;return Q.forEach(O=>{V+=O.count,H[O.lane+1]=V}),s.jsxs("div",{className:"nhsuk-product-roadmap__row",role:"row","aria-rowindex":P,children:[s.jsx("div",{className:"nhsuk-product-roadmap__category-cell",role:"rowheader","aria-colindex":1,children:v.heading}),s.jsx("div",{className:"nhsuk-product-roadmap__items-row",style:{gridColumn:`2 / span ${e.length}`,height:D},children:s.jsx("div",{className:"nhsuk-product-roadmap__items-layer",children:v.roadmapItems.map((O,se)=>{const z=(O.verticalPosition||1)-1,pe=Q.filter(te=>te.lane-1<z).reduce((te,re)=>te+re.count,0),ve=z+pe,ue=h(O.id),he=m.has(O.id);return s.jsxs(E.Fragment,{children:[s.jsx(lx,{item:O,maxLines:w,enableDrilldown:o,onExpand:p,isActive:ue,topLaneIndex:ve,laneOffset:pe}),o&&u==="inline"&&(ue||he)&&O.childItems&&s.jsx("div",{"data-parent":O.id,className:"nhsuk-product-roadmap__inline-children","aria-label":`${O.title} child tasks`,children:O.childItems.map((te,re)=>{const fe="calc(var(--roadmap-item-block-height) * 0.75)";let k=O._pxLeft,R=O._pxWidth;if(te.startDate){const q=new Date(te.startDate);let ae=te.endDate?new Date(te.endDate):new Date(q);ae<q&&(ae=new Date(q));const ge=new Date(ae);ge.setDate(ge.getDate()+1);const Se=$(q);let ce=$(ge);(!Number.isFinite(ce)||ce<=Se)&&(ce=Se+6),k=Se,R=Math.max(6,ce-Se)}const ee=ve+1+re;return s.jsxs("div",{className:xe("nhsuk-product-roadmap__inline-child",te.status&&`nhsuk-product-roadmap__inline-child--status-${te.status}`,!ue&&he&&"nhsuk-product-roadmap__inline-child--collapsing"),style:{left:`${k}px`,width:`${R}px`,top:`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${ee})`,height:fe,opacity:ue?0:void 0,transform:ue?"translateY(-6px)":void 0},children:[s.jsx("div",{className:"nhsuk-product-roadmap__inline-child-bg"}),s.jsx("div",{className:"nhsuk-product-roadmap__inline-child-content",children:te.title})]},te.id??re)})})]},O.id??se)})})})]},`${v.heading}-${L}`)}),o&&u==="overlay"&&d.size===1&&(()=>{const v=Array.from(d)[0],L=t.flatMap(P=>P.roadmapItems).find(P=>P.id===v);return!L||!L.childItems?null:s.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-overlay",role:"dialog","aria-modal":"true","aria-label":`${L.title} details`,children:[s.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-panel",children:[s.jsxs("header",{className:"nhsuk-product-roadmap__drilldown-header",children:[s.jsx("h3",{className:"nhsuk-product-roadmap__drilldown-title",children:L.title}),s.jsx("button",{type:"button",className:"nhsuk-product-roadmap__drilldown-close",onClick:b,"aria-label":"Close details",children:"Ã—"})]}),s.jsx("div",{className:"nhsuk-product-roadmap__drilldown-content",children:L.content}),s.jsx("ul",{className:"nhsuk-product-roadmap__drilldown-children",children:L.childItems.map((P,S)=>s.jsxs("li",{className:"nhsuk-product-roadmap__drilldown-child",children:[s.jsx("strong",{className:"nhsuk-product-roadmap__drilldown-child-title",children:P.title}),P.content&&s.jsx("div",{className:"nhsuk-product-roadmap__drilldown-child-content",children:P.content})]},P.id??S))})]}),s.jsx("div",{className:"nhsuk-product-roadmap__drilldown-backdrop",onClick:b,"aria-hidden":"true"})]})})()]})});sd.displayName="ProductRoadmap";function od(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=od(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function bi(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=od(e))&&(r&&(r+=" "),r+=t);return r}function ut(e){return function(){return e}}const ao=Math.PI,io=2*ao,Gn=1e-6,cx=io-Gn;function ld(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ux(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ld;const n=10**t;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class dx{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ld:ux(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,i,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,a,i){if(t=+t,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,u=r-t,c=a-n,d=o-t,f=l-n,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(m>Gn)if(!(Math.abs(f*u-c*d)>Gn)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-o,y=a-l,h=u*u+c*c,p=g*g+y*y,b=Math.sqrt(h),C=Math.sqrt(m),T=i*Math.tan((ao-Math.acos((h+m-p)/(2*b*C)))/2),w=T/C,j=T/b;Math.abs(w-1)>Gn&&this._append`L${t+w*d},${n+w*f}`,this._append`A${i},${i},0,0,${+(f*g>d*y)},${this._x1=t+j*u},${this._y1=n+j*c}`}}arc(t,n,r,a,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),u=r*Math.sin(a),c=t+l,d=n+u,f=1^o,m=o?a-i:i-a;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Gn||Math.abs(this._y1-d)>Gn)&&this._append`L${c},${d}`,r&&(m<0&&(m=m%io+io),m>cx?this._append`A${r},${r},0,1,${f},${t-l},${n-u}A${r},${r},0,1,${f},${this._x1=c},${this._y1=d}`:m>Gn&&this._append`A${r},${r},0,${+(m>=ao)},${f},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function cd(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new dx(t)}function ud(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dd(e){this._context=e}dd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fd(e){return new dd(e)}function hd(e){return e[0]}function pd(e){return e[1]}function md(e,t){var n=ut(!0),r=null,a=fd,i=null,o=cd(l);e=typeof e=="function"?e:e===void 0?hd:ut(e),t=typeof t=="function"?t:t===void 0?pd:ut(t);function l(u){var c,d=(u=ud(u)).length,f,m=!1,g;for(r==null&&(i=a(g=o())),c=0;c<=d;++c)!(c<d&&n(f=u[c],c,u))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,c,u),+t(f,c,u));if(g)return i=null,g+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:ut(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:ut(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:ut(!!u),l):n},l.curve=function(u){return arguments.length?(a=u,r!=null&&(i=a(r)),l):a},l.context=function(u){return arguments.length?(u==null?r=i=null:i=a(r=u),l):r},l}function so(e,t,n){var r=null,a=ut(!0),i=null,o=fd,l=null,u=cd(c);e=typeof e=="function"?e:e===void 0?hd:ut(+e),t=typeof t=="function"?t:ut(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?pd:ut(+n);function c(f){var m,g,y,h=(f=ud(f)).length,p,b=!1,C,T=new Array(h),w=new Array(h);for(i==null&&(l=o(C=u())),m=0;m<=h;++m){if(!(m<h&&a(p=f[m],m,f))===b)if(b=!b)g=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=m-1;y>=g;--y)l.point(T[y],w[y]);l.lineEnd(),l.areaEnd()}b&&(T[m]=+e(p,m,f),w[m]=+t(p,m,f),l.point(r?+r(p,m,f):T[m],n?+n(p,m,f):w[m]))}if(C)return l=null,C+""||null}function d(){return md().defined(a).curve(o).context(i)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:ut(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ut(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ut(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:ut(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ut(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ut(+f),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(f){return arguments.length?(a=typeof f=="function"?f:ut(!!f),c):a},c.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),c):o},c.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),c):i},c}function gd(e){return e<0?-1:1}function _d(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(i*a+o*r)/(r+a);return(gd(i)+gd(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function bd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function oo(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-r)/3;e._context.bezierCurveTo(r+l,a+l*t,i-l,o-l*n,i,o)}function yi(e){this._context=e}yi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oo(this,this._t0,bd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,oo(this,bd(this,n=_d(this,e,t)),n);break;default:oo(this,this._t0,n=_d(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},Object.create(yi.prototype).point=function(e,t){yi.prototype.point.call(this,t,e)};function xi(e){return new yi(e)}function fx(e,t,n){const r=Lc(e,t);return Vs().domain(r).range(n)}function yd(e,t,n){const[r,a]=Lc(e,t);if(!(Number.isFinite(r)&&Number.isFinite(a)))return li().domain([0,0]).range(n);let o;if(r<=0)o=Math.min(0,r);else{const u=a-r,c=(u>0?u:r)*.1;o=Math.max(0,r-c),o===r&&(o=Math.max(0,r*.9))}const l=a??0;return li().domain([o,l]).nice().range(n)}function lo(e,t,n,r){const a=md().x(t).y(n);return r?.smooth!==!1&&a.curve(xi),a(e)??""}function hx(e={}){const t=X.useRef(null),n=X.useMemo(()=>({top:e.top??16,right:e.right??16,bottom:e.bottom??32,left:e.left??48}),[e.bottom,e.left,e.right,e.top]),[r,a]=X.useState({width:0,height:0});X.useLayoutEffect(()=>{if(!t.current)return;const l=new ResizeObserver(u=>{for(const c of u){const{width:d,height:f}=c.contentRect;a({width:d,height:f})}});return l.observe(t.current),()=>l.disconnect()},[]);const i=Math.max(0,r.width-n.left-n.right),o=Math.max(0,r.height-n.top-n.bottom);return{width:r.width,height:r.height,innerWidth:i,innerHeight:o,margin:n,ref:t}}const xd=X.createContext(null);function jn(){return X.useContext(xd)}const vd=({height:e=240,margin:t,width:n,className:r="fdp-chart",children:a,role:i="group",ariaLabel:o})=>{const l=hx(t),u={height:e,position:"relative"};return n!==void 0&&(u.width=typeof n=="number"?`${n}px`:n),s.jsx("div",{ref:l.ref,className:r,style:u,role:i,"aria-label":o,children:s.jsx(xd.Provider,{value:l,children:a})})},co=X.createContext(null),Vn=()=>X.useContext(co),wd=({series:e,innerWidth:t,innerHeight:n,parseX:r,children:a,xTickCount:i=6,yTickCount:o=5,yDomain:l,xPadding:u,yPadding:c})=>{const d=jn(),f=t??d?.innerWidth??0,m=n??d?.innerHeight??0,g=X.useMemo(()=>e.flatMap(w=>w.data),[e]),y=X.useCallback(w=>{if(r)return r(w);const j=w.x;return j instanceof Date?j:new Date(j)},[r]),h=u??6,p=c??6,b=X.useMemo(()=>fx(g,y,[h,Math.max(0,f-h)]),[g,y,f,h]),C=X.useMemo(()=>{if(l){const w=yd([],j=>j.y,[Math.max(0,m-p),p]);return w.domain(l),w}return yd(g,w=>w.y,[Math.max(0,m-p),p])},[g,m,l]),T=X.useMemo(()=>({xScale:b,yScale:C,getXTicks:(w=i)=>b.ticks(w),getYTicks:(w=o)=>C.ticks(w)}),[b,C,i,o]);return s.jsx(co.Provider,{value:T,children:a})},uo=({type:e,scale:t,tickCount:n,tickValues:r,formatTick:a,label:i,offset:o,className:l,minLabelSpacing:u,maxTickLabelLength:c,autoMinLabelSpacing:d=e==="x",labelAngle:f=0,allowLabelWrap:m=!0,tickFormatPreset:g})=>{const y=Vn(),h=jn(),p=t||(e==="x"?y?.xScale:y?.yScale),b=n??(e==="x"?6:5),C=typeof a=="function",T=X.useMemo(()=>{if(C||!g)return;const I=$=>new Intl.DateTimeFormat(void 0,$);switch(g){case"dayShortMonth":return $=>{const N=$ instanceof Date?$:new Date($);return`${N.getDate()}
${I({month:"short"}).format(N)}`};case"dayShortMonthYear":return $=>{const N=$ instanceof Date?$:new Date($);return`${N.getDate()}
${I({month:"short"}).format(N)} ${N.getFullYear()}`};case"shortMonth":return $=>{const N=$ instanceof Date?$:new Date($);return I({month:"short"}).format(N)};case"shortMonthYear":return $=>{const N=$ instanceof Date?$:new Date($);return`${I({month:"short"}).format(N)} ${N.getFullYear()}`};case"hourMinute":return $=>{const N=$ instanceof Date?$:new Date($);return I({hour:"2-digit",minute:"2-digit"}).format(N)};default:return}},[C,g]);let w=C?a:T||(I=>String(I));const j=X.useMemo(()=>r&&Array.isArray(r)?r:p?typeof p.ticks=="function"?p.ticks(b):p.domain?p.domain():[]:[],[p,b,r]);if(e==="x"&&!C&&!g&&j.length&&j.every(I=>I instanceof Date)){const I=j[0],$=j[j.length-1],N=$.getTime()-I.getTime(),x=24*3600*1e3,F=365*x,M=I.getFullYear()===$.getFullYear(),v=new Intl.DateTimeFormat(void 0,{month:"short"});if(N<2*x){const L=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"});w=P=>L.format(P)}else if(N<32*x)w=L=>{const P=L;return`${P.getDate()} ${v.format(P)}`};else if(N<F&&M)w=L=>v.format(L);else if(N<2*F){const L=new Set;w=P=>{const S=P,D=S.getMonth();return L.has(D)||L.add(D),`${v.format(S)} ${S.getFullYear()}`}}else w=L=>String(L.getFullYear())}if(!p||!h)return null;if(e==="x"){const I=o??h.innerHeight,$=typeof p.bandwidth=="function",N=$?p.bandwidth():0,x=v=>{const L=p(v);return $?L+N/2:L};let F=u??0;if(d&&u==null){const v=j.map(P=>w(P).replace(/\n.*/g,"")),L=v.length?v.reduce((P,S)=>P+S.length,0)/v.length:0;F=Math.max(12,Math.round(L*6+4))}const M=X.useMemo(()=>{if(r&&Array.isArray(r)||F<=0)return j;const v=[];let L=-1/0;for(const P of j){const S=x(P);S-L>=F&&(v.push(P),L=S)}return v},[j,p,F,r,$,N]);return s.jsxs("g",{className:["fdp-axis","fdp-axis--x",l].filter(Boolean).join(" "),transform:`translate(0,${I})`,fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[s.jsx("line",{x1:0,x2:h.innerWidth,y1:0,y2:0,stroke:"currentColor"}),M.map((v,L)=>{const P=w(v),S=c&&P.length>c?P.slice(0,Math.max(1,c-1))+"â€¦":P,D=m?S.split(/\n/):[S.replace(/\n/g," ")],B=f<0?"end":f>0?"start":"middle";return s.jsxs("g",{transform:`translate(${x(v)},0)`,children:[s.jsx("line",{y2:6,stroke:"currentColor"}),s.jsxs("text",{y:9,textAnchor:B,className:"fdp-axis__tick",dominantBaseline:"hanging",transform:f?`rotate(${f})`:void 0,fontFamily:"inherit",children:[D.map((Q,U)=>s.jsx("tspan",{x:0,dy:U===0?0:"1.1em",children:Q},U)),S!==P&&s.jsx("title",{children:P})]})]},v?.toString?.()||L)})]})}return s.jsxs("g",{className:["fdp-axis","fdp-axis--y",l].filter(Boolean).join(" "),fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[j.map((I,$)=>{const N=w(I),x=c&&N.length>c?N.slice(0,Math.max(1,c-1))+"â€¦":N,F=m?x.split(/\n/):[x.replace(/\n/g," ")];return s.jsxs("g",{transform:`translate(0,${p(I)})`,children:[s.jsx("line",{x2:-6,stroke:"currentColor"}),s.jsxs("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:[F.map((M,v)=>s.jsx("tspan",{x:-9,dy:v===0?0:"1.1em",children:M},v)),x!==N&&s.jsx("title",{children:N})]})]},I?.toString?.()||$)}),i&&s.jsx("text",{transform:"rotate(-90)",x:-h.innerHeight/2,y:-h.margin.left+12,textAnchor:"middle",className:"fdp-axis__label",fontFamily:"inherit",children:i})]})},Sd=({axis:e="y",tickCount:t,stroke:n="var(--fdp-chart-grid,#e5e5e5)",dasharray:r="2 4",className:a})=>{const i=Vn(),o=jn();if(!i||!o)return null;const l=e==="y"?i.getYTicks(t):i.getXTicks(t);return s.jsxs("g",{className:["fdp-grid",a].filter(Boolean).join(" "),children:[e==="y"&&l.map((u,c)=>s.jsx("line",{x1:0,x2:o.innerWidth,y1:i.yScale(u),y2:i.yScale(u),stroke:n,strokeDasharray:r},c)),e==="x"&&l.map((u,c)=>s.jsx("line",{y1:0,y2:o.innerHeight,x1:i.xScale(u),x2:i.xScale(u),stroke:n,strokeDasharray:r},c))]})},qr={color:{"data-viz":{$type:"color",categorical:{1:{$value:"{color.primary.blue}",$description:"Series 1 â€“ NHS Blue (brand core)"},2:{$value:"#41B6E6",$description:"Series 2 â€“ NHS Light Blue (new)"},3:{$value:"{color.secondary.aqua-green}",$description:"Series 3 â€“ NHS Aqua Green (existing)"},4:{$value:"#78BE20",$description:"Series 4 â€“ NHS Light Green (new)"},5:{$value:"{color.primary.green}",$description:"Series 5 â€“ NHS Green (existing)"},6:{$value:"{color.secondary.warm-yellow}",$description:"Series 6 â€“ NHS Warm Yellow (existing; distinct from focus yellow)"},7:{$value:"#ED4F00",$description:"Series 7 â€“ NHS Tangerine (new; warmer/deeper than existing orange)"},8:{$value:"{color.secondary.pink}",$description:"Series 8 â€“ NHS Pink (existing)"},9:{$value:"#E317AA",$description:"Series 9 â€“ NHS Bright Pink (new vivid accent)"},10:{$value:"#880FB8",$description:"Series 10 â€“ NHS Light Purple (new mid purple)"},11:{$value:"{color.primary.purple}",$description:"Series 11 â€“ NHS Purple (existing dark purple)"},12:{$value:"#9A6324",$description:"Series 12 â€“ NHS Brown (new; earth neutral)"}},neutral:{comparison:{$value:"{color.grey.1}",$description:"Neutral comparison series (optional)"}},region:{$comment:"Fixed colours for NHS geographical regions; prefer stable mapping for maps. London colour updated (#78BE21 â€“ light green).","north-east":{$value:"{color.primary.blue}",$description:"North East â€“ NHS Blue"},"north-west":{$value:"#41B6E6",$description:"North West â€“ NHS Light Blue"},"east-of-england":{$value:"{color.primary.purple}",$description:"East of England â€“ NHS Purple"},midlands:{$value:"{color.secondary.pink}",$description:"Midlands â€“ NHS Pink"},london:{$value:"#78BE21",$description:"London â€“ NHS Light Green (new)"},"south-west":{$value:"#FAE100",$description:"South West â€“ NHS Yellow variant (new)"},"south-east":{$value:"#ed8b00",$description:"South East â€“ NHS Orange (existing base orange)"}},severity:{$comment:"Semantic severity / alert colours (light background ramp â†’ critical).",low:{$value:"{color.secondary.pale-yellow}",$description:"Low severity â€“ pale yellow background"},moderate:{$value:"{color.secondary.warm-yellow}",$description:"Moderate severity â€“ warm yellow"},high:{$value:"{color.secondary.orange}",$description:"High severity â€“ orange"},critical:{$value:"{color.primary.red}",$description:"Critical severity â€“ red"}},"org-level":{$comment:"Organisational level semantic colours (stable NHS brand mappings).",trust:{$value:"{color.primary.blue}",$description:"Trust â€“ NHS Blue"},ambulance:{$value:"{color.primary.green}",$description:"Ambulance â€“ NHS Green"},icb:{$value:"{color.primary.dark-pink}",$description:"ICB â€“ NHS Dark Pink"},region:{$value:"{color.primary.purple}",$description:"Region â€“ NHS Purple"}},stroke:{$comment:"Automatic contrast stroke colours for overlays / borders. Light fills get dark stroke; dark fills get white stroke.",categorical:{1:{$value:"#ffffff",$description:"Stroke for series 1 (blue)"},2:{$value:"#212b32",$description:"Stroke for series 2 (light blue)"},3:{$value:"#212b32",$description:"Stroke for series 3 (aqua green)"},4:{$value:"#212b32",$description:"Stroke for series 4 (light green)"},5:{$value:"#ffffff",$description:"Stroke for series 5 (green)"},6:{$value:"#212b32",$description:"Stroke for series 6 (warm yellow)"},7:{$value:"#ffffff",$description:"Stroke for series 7 (tangerine)"},8:{$value:"#ffffff",$description:"Stroke for series 8 (pink)"},9:{$value:"#ffffff",$description:"Stroke for series 9 (bright pink)"},10:{$value:"#ffffff",$description:"Stroke for series 10 (light purple)"},11:{$value:"#ffffff",$description:"Stroke for series 11 (purple)"},12:{$value:"#ffffff",$description:"Stroke for series 12 (brown)"}},region:{$comment:"Region stroke colours derived from fill colours: dark fills lightened ~35%; light fills darkened ~25% for consistent contrast without defaulting to pure white/black.","north-east":{$value:"#5996D1",$description:"Stroke for North East (blue lightened 35%)"},"north-west":{$value:"#3189AD",$description:"Stroke for North West (light blue darkened 25%)"},"east-of-england":{$value:"#7A59A3",$description:"Stroke for East of England (purple lightened 35%)"},midlands:{$value:"#CA71A4",$description:"Stroke for Midlands (pink lightened 35%)"},london:{$value:"#5A8F19",$description:"Stroke for London (light green darkened 25%)"},"south-west":{$value:"#BCA900",$description:"Stroke for South West (yellow darkened 25%)"},"south-east":{$value:"#B26800",$description:"Stroke for South East (orange darkened 25%)"}},severity:{$comment:"Contrast strokes for severity colours (light backgrounds use dark stroke; dark backgrounds use white).",low:{$value:"#212b32",$description:"Stroke for low severity (pale yellow fill)"},moderate:{$value:"#212b32",$description:"Stroke for moderate severity (warm yellow fill)"},high:{$value:"#212b32",$description:"Stroke for high severity (orange fill)"},critical:{$value:"#ffffff",$description:"Stroke for critical severity (red fill)"}},"org-level":{$comment:"Contrast strokes for organisational level colours (all dark brand fills so white stroke for consistency).",trust:{$value:"#ffffff",$description:"Stroke for trust (blue fill)"},ambulance:{$value:"#ffffff",$description:"Stroke for ambulance (green fill)"},icb:{$value:"#ffffff",$description:"Stroke for ICB (dark pink fill)"},region:{$value:"#ffffff",$description:"Stroke for region (purple fill)"}}},spc:{$comment:"SPC (Statistical Process Control) semantic variation colours aligned to SPCChart.scss and SPCIcons.",improvement:{$value:"#00B0F0",$description:"SPC special cause improvement (favourable)"},concern:{$value:"#E46C0A",$description:"SPC special cause concern (deteriorating)"},"no-judgement":{$value:"#490092",$description:"SPC special cause (no directional judgement)"},"common-cause":{$value:"#A6A6A6",$description:"SPC common cause (baseline variation)"},"assurance-pass":{$value:"#00823B",$description:"SPC assurance pass indicator (process capable)"},"assurance-fail":{$value:"#DA291C",$description:"SPC assurance fail indicator (process not capable)"},gradient:{$comment:"Opacity stops for SPC icon gradient wash (applied top-left -> bottom-right). Consumers build gradients using these opacities + base colour.",stop:{"start-opacity":{$value:"0.18",$description:"Start stop opacity (0%) for classic variant wash"},"mid-opacity":{$value:"0.06",$description:"Mid stop opacity (~65-75%)"},"end-opacity":{$value:"0",$description:"End stop opacity (100%)"},"triangle-start-opacity":{$value:"0.18",$description:"Start opacity for triangle variants (kept aligned)"},"triangle-mid-opacity":{$value:"0.06",$description:"Mid opacity for triangle variants"},"triangle-end-opacity":{$value:"0",$description:"End opacity for triangle variants"}}},stroke:{$comment:"Contrast stroke colours for SPC variation fills.",improvement:{$value:"#000000",$description:"Stroke for improvement points"},concern:{$value:"#000000",$description:"Stroke for concern points"},"no-judgement":{$value:"#000000",$description:"Stroke for no-judgement points"},"common-cause":{$value:"#ffffff",$description:"Stroke for common cause points"},"assurance-pass":{$value:"#000000",$description:"Stroke for assurance pass points"},"assurance-fail":{$value:"#000000",$description:"Stroke for assurance fail points"}}}}}},vi={color:{primary:{$type:"color",blue:{$value:"#005eb8",$description:"NHS Blue - Primary brand color"},"blue-active":{$value:"#002f5c",$description:"NHS Active Blue (50% shade) â€“ alias of button/login active; promoted for general reuse"},white:{$value:"#ffffff",$description:"NHS White"},black:{$value:"#212b32",$description:"NHS Black"},green:{$value:"#007f3b",$description:"NHS Green"},purple:{$value:"#330072",$description:"NHS Purple"},"dark-pink":{$value:"#7c2855",$description:"NHS Dark Pink"},red:{$value:"#d5281b",$description:"NHS Red"},"light-purple":{$value:"#880FB8",$description:"NHS Light Purple (data viz promoted)"},yellow:{$value:"#ffeb3b",$description:"NHS Yellow"}},secondary:{$type:"color","pale-yellow":{$value:"#fff9c4",$description:"NHS Pale Yellow"},"warm-yellow":{$value:"#ffb81c",$description:"NHS Warm Yellow"},"region-yellow":{$value:"#FAE100",$description:"NHS Region Yellow (maps)"},orange:{$value:"#ed8b00",$description:"NHS Orange"},tangerine:{$value:"#ED4F00",$description:"NHS Tangerine (data viz promoted)"},"aqua-green":{$value:"#00a499",$description:"NHS Aqua Green"},"light-blue":{$value:"#41B6E6",$description:"NHS Light Blue (data viz promoted)"},pink:{$value:"#ae2573",$description:"NHS Pink"},"bright-pink":{$value:"#E317AA",$description:"NHS Bright Pink (data viz promoted)"},"light-green":{$value:"#78BE20",$description:"NHS Light Green (data viz promoted)"},brown:{$value:"#9A6324",$description:"NHS Brown (data viz promoted neutral)"}},grey:{1:{$value:"#4c6272",$description:"NHS Grey 1 - Darkest grey"},2:{$value:"#768692",$description:"NHS Grey 2 - Darker grey"},3:{$value:"#aeb7bd",$description:"NHS Grey 3 - Medium grey"},4:{$value:"#d8dde0",$description:"NHS Grey 4 - Light grey"},5:{$value:"#f0f4f5",$description:"NHS Grey 5 - Lightest grey"},$type:"color"},accessibility:{$type:"color",$comment:"Accessibility-oriented color tokens. Includes CVD-safe pairs and Okabeâ€“Ito colors. Use these for positive/negative semantics and colour-blindâ€“friendly defaults.","okabe-ito":{green:{$value:"#009E73",$description:"Okabeâ€“Ito green (CVD-safe) â€“ recommended positive"},vermillion:{$value:"#D55E00",$description:"Okabeâ€“Ito vermillion / redâ€“orange (CVD-safe) â€“ recommended negative"}},"cvd-safe":{blue:{$value:"#1f77b4",$description:"CVD-safe blue (pairs with orange); widely used in Matplotlib/Tableau sets"},orange:{$value:"#ff7f0e",$description:"CVD-safe orange (pairs with blue)"}},positive:{$value:"{color.accessibility.okabe-ito.green}",$description:"Accessibility semantic alias â€“ positive"},negative:{$value:"{color.accessibility.okabe-ito.vermillion}",$description:"Accessibility semantic alias â€“ negative"}}}},px=["#005eb8","#0072ce","#41b6e6","#00a499","#7c2855","#330072","#d5281b","#ffb81c","#fae100","#4c6272","#768692","#aeb7bd"];let fo=null,ho=null,po=null,kd="optimized";function mx(){const e={color:{...vi.color,...qr.color}},t=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!i)return;const o=i.$value||i.value;if(typeof o=="string"&&/^\{.+\}$/.test(o))return t(o.slice(1,-1),a);if(typeof o=="string")return o},n=[];try{for(let r=1;r<=12;r++){const a=`color.data-viz.categorical.${r}`,i=t(a);if(!i)throw new Error(`Missing token ${a}`);n.push(i)}return n}catch{return px}}function gx(){return fo||(fo=mx()),fo}function _x(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.trim());return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function mo(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bx(e,t,n){const r=mo(e),a=mo(t),i=mo(n),o=r*.4124+a*.3576+i*.1805,l=r*.2126+a*.7152+i*.0722,u=r*.0193+a*.1192+i*.9505;return{x:o*100,y:l*100,z:u*100}}function yx(e,t,n){let o=e/95.047,l=t/100,u=n/108.883;const c=d=>d>.008856?Math.cbrt(d):7.787*d+16/116;return o=c(o),l=c(l),u=c(u),{L:116*l-16,a:500*(o-l),b:200*(l-u)}}function Cd(e){const t=_x(e);if(!t)return null;const n=bx(t.r,t.g,t.b);return yx(n.x,n.y,n.z)}function Td(e,t){const n=e.L-t.L,r=e.a-t.a,a=e.b-t.b;return Math.sqrt(n*n+r*r+a*a)}function xx(){const e=gx();if(e.length<=2)return e.slice();const t=e.map(o=>Cd(o));let n=0,r=-1;for(let o=0;o<e.length;o++){const l=t[o];if(!l)continue;let u=0,c=0;for(let f=0;f<e.length;f++)o!==f&&t[f]&&(u+=Td(l,t[f]),c++);const d=u/Math.max(1,c);d>r&&(r=d,n=o)}const a=new Set(e.map((o,l)=>l)),i=[];for(i.push(n),a.delete(n);a.size;){let o=Array.from(a)[0],l=-1;for(const u of a){const c=t[u];if(!c)continue;let d=1/0;for(const f of i){const m=t[f];if(m){const g=Td(c,m);g<d&&(d=g)}}d>l&&(l=d,o=u)}i.push(o),a.delete(o)}return i.map(o=>e[o])}function vx(){return ho||(ho=xx()),ho}function wx(e,t,n){const r=(e+16)/116,a=t/500+r,i=r-n/200,o=d=>{const f=d*d*d;return f>.008856?f:(d-16/116)/7.787},l=o(a)*95.047,u=o(r)*100,c=o(i)*108.883;return{X:l,Y:u,Z:c}}function Sx(e,t,n){e/=100,t/=100,n/=100;let r=e*3.2406+t*-1.5372+n*-.4986,a=e*-.9689+t*1.8758+n*.0415,i=e*.0557+t*-.204+n*1.057;const o=l=>l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055;return r=Math.min(1,Math.max(0,o(r))),a=Math.min(1,Math.max(0,o(a))),i=Math.min(1,Math.max(0,o(i))),{r:Math.round(r*255),g:Math.round(a*255),b:Math.round(i*255)}}function kx(e,t,n){return`#${[e,t,n].map(r=>r.toString(16).padStart(2,"0")).join("")}`}function Cx(e,t){const n=Cd(e);if(!n)return e;const r=Math.min(100,Math.max(0,n.L+t)),{X:a,Y:i,Z:o}=wx(r,n.a,n.b),l=Sx(a,i,o);return kx(l.r,l.g,l.b)}function Tx(){const e=vx(),n=[12,-12,24,-24].map(a=>e.map(i=>Cx(i,a))),r=[...e];return n.forEach(a=>r.push(...a)),r}function Nx(){return(!po||jx())&&(po=Tx(),Nd=kd),po}let Nd=null;function jx(){return Nd!==kd}function qt(e){const t=Nx();return t[e%t.length]}let gr=null,Xr=null,Kr=null,Zr=null;function Dx(){const e=qr?.color?.["data-viz"]?.stroke;if(e){const t=e.categorical||{};gr=[];for(let i=1;i<=12;i++){const o=t[String(i)]?.$value||t[String(i)]?.value;gr.push(typeof o=="string"?o:"#212b32")}const n=e.region||{};Xr={},Object.keys(n).forEach(i=>{const o=n[i]?.$value||n[i]?.value;typeof o=="string"&&(Xr[i]=o)});const r=e.severity||{},a=e["org-level"]||{};Zr={},Object.keys(a).forEach(i=>{const o=a[i]?.$value||a[i]?.value;typeof o=="string"&&(Zr[i]=o)}),Kr={},Object.keys(r).forEach(i=>{const o=r[i]?.$value||r[i]?.value;typeof o=="string"&&(Kr[i]=o)})}}function wi(){(!gr||!Xr||!Kr||!Zr)&&Dx()}function Yn(e){return wi(),gr?gr[e%gr.length]:"#212b32"}function Mx(e){return wi(),Xr?Xr[e]:void 0}function Si(e,t){return Mx(e)||Yn(t)}const go=["low","moderate","high","critical"];let _o=null;function $x(){const e={color:{...vi.color,...qr.color}},t=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!i)return;const o=i.$value||i.value;return typeof o=="string"&&/^\{.+\}$/.test(o)?t(o.slice(1,-1),a):typeof o=="string"?o:void 0},n={};return go.forEach(r=>{const a=t(`color.data-viz.severity.${r}`);a&&(n[r]=a)}),n}function jd(){return _o||(_o=$x()),_o}function Px(e){return jd()[e.toLowerCase()]}function Ix(e,t){return Px(e)||jd()[go[t%go.length]]||qt(t)}function Fx(e){return wi(),Kr?Kr[e]:void 0}function Lx(e,t){return Fx(e)||Yn(t)}const bo=["trust","ambulance","icb","region"];let yo=null;function Bx(){const e={color:{...vi.color,...qr.color}},t=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!i)return;const o=i.$value||i.value;return typeof o=="string"&&/^\{.+\}$/.test(o)?t(o.slice(1,-1),a):typeof o=="string"?o:void 0},n={};return bo.forEach(r=>{const a=t(`color.data-viz.org-level.${r}`);a&&(n[r]=a)}),n}function Dd(){return yo||(yo=Bx()),yo}function Ex(e){return Dd()[e.toLowerCase()]}function Ax(e,t){return Ex(e)||Dd()[bo[t%bo.length]]||qt(t)}function Rx(e){return wi(),Zr?Zr[e]:void 0}function Hx(e,t){return Rx(e)||Yn(t)}let xo=null;const Ox=["north-east","north-west","east-of-england","midlands","london","south-west","south-east"];function zx(e){return e.trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Wx(){const e={color:{...vi.color,...qr.color}},t=(a,i=new Set)=>{if(i.has(a))return;i.add(a);const o=a.split(".").reduce((u,c)=>u?u[c]:void 0,e);if(!o)return;const l=o.$value||o.value;return typeof l=="string"&&/^\{.+\}$/.test(l)?t(l.slice(1,-1),i):typeof l=="string"?l:void 0},n={},r=[];return Ox.forEach(a=>{const i=t(`color.data-viz.region.${a}`);i?n[a]=i:r.push(a)}),process.env.NODE_ENV!=="production"&&(Object.keys(n).length===0?console.warn("[DataViz] Region colour tokens unresolved  falling back to categorical colours."):r.length&&console.warn(`[DataViz] Missing region colour tokens: ${r.join(", ")}.`)),n}function Ux(){return xo||(xo=Wx()),xo}function Gx(e){return Ux()[zx(e)]}function _r(e,t){return Gx(e)||qt(t)}const Md=X.createContext(null),Jr=()=>X.useContext(Md),Vx=({initialHiddenIds:e=[],children:t,hiddenIds:n,onChange:r})=>{const[a,i]=X.useState(()=>new Set(e)),o=n!==void 0,l=X.useMemo(()=>o?new Set(n):a,[o,n,a]),u=X.useCallback(d=>{o||i(new Set(d)),r?.(Array.from(d))},[o,r]),c=X.useMemo(()=>({hiddenIds:l,isHidden:d=>l.has(d),toggle:d=>{const f=new Set(l);f.has(d)?f.delete(d):f.add(d),u(f)},showOnly:d=>{u(new Set)},showAll:()=>u(new Set),setHidden:d=>u(new Set(Array.isArray(d)?d:Array.from(d)))}),[l,u]);return s.jsx(Md.Provider,{value:c,children:t})},$d=X.createContext(null),bn=()=>X.useContext($d),Pd=({children:e,maxDistance:t=40,wrapAround:n=!1})=>{const r=Vn(),a=Jr(),[i,o]=X.useState(null),l=X.useRef(new Map),[u,c]=X.useState([]),d=X.useCallback(($,N)=>{l.current.set($,N)},[]),f=X.useCallback($=>{l.current.delete($)},[]),m=X.useCallback(($,N)=>{if(!r)return;const{xScale:x,yScale:F}=r;let M=null,v=1/0;l.current.forEach((L,P)=>{L.forEach((S,D)=>{const B=x(S.x),Q=F(S.y),U=B-$,H=Q-N,V=Math.sqrt(U*U+H*H);V<v&&(v=V,M={seriesId:P,index:D,x:S.x,y:S.y,clientX:B,clientY:Q})})}),M&&v<=t?o(M):o(null)},[r,t]),g=X.useCallback(()=>o(null),[]);X.useEffect(()=>{if(!i){c([]);return}if(!r)return;const{xScale:$,yScale:N}=r,x=[];l.current.forEach((F,M)=>{F.forEach((v,L)=>{(i.x instanceof Date&&v.x instanceof Date?v.x.getTime()===i.x.getTime():v.x===i.x)&&x.push({seriesId:M,index:L,x:v.x,y:v.y,clientX:$(v.x),clientY:N(v.y)})})}),x.sort((F,M)=>F.seriesId.localeCompare(M.seriesId)),c(x)},[i,r]);const y=X.useCallback($=>{if(!i)return;const N=l.current.get(i.seriesId);if(!N)return;let x=i.index+$;if(x<0||x>=N.length){if(!n)return;x=(x+N.length)%N.length}const F=N[x];if(!r)return;const{xScale:M,yScale:v}=r;o({seriesId:i.seriesId,index:x,x:F.x,y:F.y,clientX:M(F.x),clientY:v(F.y)})},[i,r,n]),h=X.useCallback($=>{let N=Array.from(l.current.keys());if(a&&(N=N.filter(B=>!a.isHidden(B))),N.length===0)return;if(!i){const B=N[0],Q=l.current.get(B);if(!Q||!r)return;const{xScale:U,yScale:H}=r,V=Q[0];o({seriesId:B,index:0,x:V.x,y:V.y,clientX:U(V.x),clientY:H(V.y)});return}const x=N.indexOf(i.seriesId);if(x===-1)return;let F=x+$;if(F<0||F>=N.length){if(!n)return;F=(F+N.length)%N.length}const M=N[F],v=l.current.get(M);if(!v||!r)return;const L=Math.min(i.index,v.length-1),P=v[L],{xScale:S,yScale:D}=r;o({seriesId:M,index:L,x:P.x,y:P.y,clientX:S(P.x),clientY:D(P.y)})},[i,r,n,a]),p=X.useCallback(()=>{let $=Array.from(l.current.keys());if(a&&($=$.filter(L=>!a.isHidden(L))),$.length===0)return;const N=i?i.seriesId:$[0],x=l.current.get(N);if(!x||x.length===0||!r)return;const F=x[0],{xScale:M,yScale:v}=r;o({seriesId:N,index:0,x:F.x,y:F.y,clientX:M(F.x),clientY:v(F.y)})},[i,r,a]),b=X.useCallback(()=>{let $=Array.from(l.current.keys());if(a&&($=$.filter(P=>!a.isHidden(P))),$.length===0)return;const N=i?i.seriesId:$[0],x=l.current.get(N);if(!x||x.length===0||!r)return;const F=x.length-1,M=x[F],{xScale:v,yScale:L}=r;o({seriesId:N,index:F,x:M.x,y:M.y,clientX:v(M.x),clientY:L(M.y)})},[i,r,a]),C=X.useCallback(()=>y(1),[y]),T=X.useCallback(()=>y(-1),[y]),w=X.useCallback(()=>h(1),[h]),j=X.useCallback(()=>h(-1),[h]),I=X.useMemo(()=>({focused:i,setFocused:o,aggregated:u,focusNearest:m,clear:g,registerSeries:d,unregisterSeries:f,focusNextPoint:C,focusPrevPoint:T,focusNextSeries:w,focusPrevSeries:j,focusFirstPoint:p,focusLastPoint:b}),[i,u,m,g,d,f,C,T,w,j,p,b]);return s.jsx($d.Provider,{value:I,children:e})},Id=({series:e,seriesIndex:t,palette:n,showPoints:r,focusablePoints:a,focusIndex:i,parseX:o,visibilityMode:l="remove",strokeWidth:u=1,smooth:c=!0,gradientFillId:d,colors:f})=>{const m=Vn();if(!m)return null;const{xScale:g,yScale:y}=m,p=Jr()?.isHidden(e.id)??!1,b=p&&l==="fade";if(p&&l==="remove")return null;const C=bn();X.useEffect(()=>{if(!C)return;const N=e.data.map(x=>({x:o(x),y:x.y}));return C.registerSeries(e.id,N),()=>C.unregisterSeries(e.id)},[C,e.id,e.data,o]);const T=X.useMemo(()=>lo(e.data,N=>g(o(N)),N=>y(N.y),{smooth:c}),[e.data,g,y,o,c]),w=X.useMemo(()=>{if(!e.data.length)return"";const[N]=y.domain(),x=so().x(F=>g(o(F))).y0(()=>y(N)).y1(F=>y(F.y));return c&&x.curve(xi),x(e.data)||""},[e.data,g,y,o,c]),j=f&&f[t],I=e.color||j||(n==="region"?_r(e.id,t):qt(t)),$=n==="region"?Si(e.id,t):Yn(t);return s.jsxs("g",{className:"fdp-line-series","data-series":e.id,opacity:b?.25:1,"aria-hidden":b?!0:void 0,children:[d&&s.jsx("path",{d:w,fill:`url(#${d})`,stroke:"none",role:"presentation",className:"fdp-line-series__gradient"}),s.jsx("path",{d:T,fill:"none",stroke:I,strokeWidth:u,role:"presentation"}),r&&e.data.map((N,x)=>{const F=g(o(N)),M=y(N.y),v=a?0:-1,L=!b&&(a&&x===i||C?.focused?.seriesId===e.id&&C.focused.index===x),P=()=>{C&&!b&&C.setFocused({seriesId:e.id,index:x,x:o(N),y:N.y,clientX:F,clientY:M})},S=()=>{C&&C.focused?.seriesId===e.id&&C.focused.index===x&&C.clear()};return s.jsx("circle",{cx:F,cy:M,r:L?5:3.5,stroke:L?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":$,strokeWidth:L?2:1,fill:L?"var(--nhs-fdp-color-grey-3, #aeb7bd)":I,className:"fdp-line-point",tabIndex:b?-1:v,"aria-label":`${e.label||e.id} ${o(N).toDateString()} value ${N.y}`,"data-series":e.id,"data-index":x,onMouseEnter:P,onFocus:P,onMouseLeave:S,onBlur:S},x)})]})},Yx=({polite:e=!0,format:t})=>{const n=bn(),[r,a]=X.useState(""),i=X.useRef("");return X.useEffect(()=>{if(!n?.focused)return;const{focused:o,aggregated:l}=n;let u;if(l&&l.length>1){const c=l.map(f=>`${f.seriesId} ${f.y}`).join("; ");u=`${o.x instanceof Date?o.x.toDateString():String(o.x)} â€“ ${c}`}else u=t?t({seriesId:o.seriesId,x:o.x,y:o.y,index:o.index}):qx(o.seriesId,o.x,o.y,o.index);if(u!==i.current){i.current=u,a("");const c=setTimeout(()=>a(u),10);return()=>clearTimeout(c)}},[n?.focused,t]),s.jsx("div",{"aria-live":e?"polite":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,margin:-1,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",border:0},children:r})};function qx(e,t,n,r){const a=t instanceof Date?t.toDateString():String(t);return`Series ${e}, point ${r+1}, ${a}, value ${n}`}const Xx=()=>{const e=bn(),t=jn();if(!e||!t||!e.focused)return null;const{focused:n,aggregated:r}=e,{innerWidth:a,innerHeight:i}=t,o=Math.min(Math.max(n.clientX,0),a),l=Math.min(Math.max(n.clientY,0),i),u=o+8,c=l-8,d=r.length>1,f=n.x instanceof Date?n.x.toDateString():String(n.x),m=d?f:`${f} â€¢ ${n.y}`,g=/\d+$/.exec(n.seriesId||""),y=g?parseInt(g[0],10)-1:0,h=qt(y>=0?y:0)||"#005eb8",p="var(--nhs-fdp-color-primary-yellow,#ffeb3b)";return s.jsxs("g",{className:"fdp-tooltip-layer",pointerEvents:"none",children:[s.jsx("circle",{cx:o,cy:l,r:7,fill:"none",stroke:p,strokeWidth:3}),s.jsx("circle",{cx:o,cy:l,r:5,fill:"#000",stroke:p,strokeWidth:1.5}),s.jsx("circle",{cx:o,cy:l,r:2.5,fill:h,stroke:"#fff",strokeWidth:.5}),d?(()=>{const C=r.map($=>`${$.seriesId}: ${$.y}`),T=[m,...C],w=T.reduce(($,N)=>Math.max($,N.length),0),j=Math.max(90,w*6.2+16),I=16*T.length+8;return s.jsxs("g",{children:[s.jsx("rect",{x:u,y:c-I,rx:4,ry:4,width:j,height:I,fill:"#212b32",opacity:.92}),T.map(($,N)=>s.jsx("text",{x:u+8,y:c-I+6+16*(N+.7),fill:"#fff",fontSize:12,children:$},N))]})})():s.jsxs("g",{children:[s.jsx("rect",{x:u,y:c-24,rx:4,ry:4,width:Math.max(60,m.length*6.2),height:24,fill:"#212b32",opacity:.92}),s.jsx("text",{x:u+8,y:c-8,fill:"#fff",fontSize:12,children:m})]})]})},Kx=({items:e,palette:t="categorical",direction:n="row",interactive:r=!1,adjustStrokeForWhiteBackground:a=!0,hiddenIds:i,defaultHiddenIds:o=[],onVisibilityChange:l,formatAnnouncement:u})=>{const c=Jr(),d=!!(c&&!r&&!l&&i===void 0),f=r||d,m=e||[],g=i!==void 0,[y,h]=X.useState(new Set(o)),p=g?new Set(i):y,[b,C]=X.useState(""),T=w=>{if(d&&c){const v=c.isHidden(w);c.toggle(w);const P=m.find(D=>D.id===w)?.label||w,S=u?u(w,v,P):`${P} ${v?"shown":"hidden"}`;C(S);return}if(!f)return;const j=new Set(p),I=j.has(w);I?j.delete(w):j.add(w),g||h(j);const $=m.filter(v=>!j.has(v.id)).map(v=>v.id),N=Array.from(j);l?.($,N);const F=m.find(v=>v.id===w)?.label||w,M=u?u(w,I,F):`${F} ${I?"shown":"hidden"}`;C(M)};return s.jsxs("div",{className:"fdp-legend-wrapper",children:[s.jsx("ul",{className:`fdp-legend fdp-legend--${n}`,children:m.map((w,j)=>{const I=w.palette||t,$=w.color||(I==="region"?_r(w.id,j):I==="severity"?Ix(w.id,j):I==="org-level"?Ax(w.id,j):qt(j));let N=w.stroke||(I==="region"?Si(w.id,j):I==="severity"?Lx(w.id,j):I==="org-level"?Hx(w.id,j):Yn(j));if(a&&N){const M=N.trim().toLowerCase();(M==="#fff"||M==="#ffffff"||M==="white"||/^rgb\(\s*255\s*,\s*255\s*,\s*255\s*\)$/.test(M))&&(N="#212b32")}const x=d&&c?c.isHidden(w.id):p.has(w.id),F=f?{"aria-pressed":!x,"aria-label":`${w.label} (${x?"show":"hide"})`,onClick:()=>T(w.id)}:{"aria-label":w.label};return s.jsxs("li",{className:`fdp-legend__item${x?" fdp-legend__item--hidden":""}`,children:[s.jsx("button",{type:"button",className:"fdp-legend__swatch",style:{backgroundColor:$,backgroundImage:w.patternDataUrl?`url(${w.patternDataUrl})`:void 0,backgroundSize:w.patternDataUrl?"auto":void 0,borderColor:N},...F}),s.jsx("span",{className:"fdp-legend__label",children:w.label})]},w.id)})}),f&&s.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite","aria-atomic":"true",children:b})]})},Zx=({series:e,seriesIndex:t,palette:n,parseX:r,areaOnly:a=!1,visibilityMode:i="remove",baselineY:o=0,smooth:l=!0,stacked:u,gradientFill:c=!0,colors:d})=>{const f=Vn();if(!f)return null;const{xScale:m,yScale:g}=f,h=Jr()?.isHidden(e.id)??!1,p=h&&i==="fade";if(h&&i==="remove")return null;const b=bn();X.useEffect(()=>{if(!b)return;const $=e.data.map(N=>({x:r(N),y:N.y}));return b.registerSeries(e.id,$),()=>b.unregisterSeries(e.id)},[b,e.id,e.data,r]);const C=d&&d[t],T=e.color||C||(n==="region"?_r(e.id,t):qt(t)),w=X.useMemo(()=>u&&u.length===e.data.length?lo(e.data,$=>m(r($)),$=>{const N=e.data.indexOf($);return g(u[N].y1)},{smooth:l}):lo(e.data,$=>m(r($)),$=>g($.y),{smooth:l}),[e.data,u,m,g,r,l]),j=X.useMemo(()=>{if(u&&u.length===e.data.length){const M=so().x(v=>m(r(v))).y0((v,L)=>g(u[L].y0)).y1((v,L)=>g(u[L].y1));return l&&M.curve(xi),M(e.data)||""}const[$,N]=g.domain();let x=o;x<$?x=$:x>N&&(x=N);const F=so().x(M=>m(r(M))).y0(()=>g(x)).y1(M=>g(M.y));return l&&F.curve(xi),F(e.data)||""},[e.data,u,m,g,r,o,l]),I=X.useId();return s.jsxs("g",{className:"fdp-area-series","data-series":e.id,opacity:p?.25:1,"aria-hidden":p?!0:void 0,children:[c&&s.jsx("defs",{children:s.jsxs("linearGradient",{id:I,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:T,stopOpacity:.25}),s.jsx("stop",{offset:"100%",stopColor:T,stopOpacity:0})]})}),s.jsx("path",{className:"fdp-area-series__fill",d:j,fill:c?`url(#${I})`:T,...c?{}:{fillOpacity:.25},stroke:"none"}),!a&&s.jsx("path",{d:w,fill:"none",stroke:T,strokeWidth:1})]})},Jx=({series:e,seriesIndex:t,seriesCount:n,palette:r,parseX:a,focusable:i=!0,widthFactor:o=.8,groupGap:l=2,barWidth:u,adaptive:c=!1,adaptiveGroupOccupancy:d=.9,visibilityMode:f="remove",colorMode:m="series",allSeries:g,stacked:y,gapRatio:h=.15,minBarWidth:p,gradientFill:b=!0,gradientStrokeMatch:C=!0,opacity:T=1,fadedOpacity:w=.25,flatFillOpacity:j=1,colors:I})=>{const $=Math.max(0,h),N=Vn(),x=jn();if(!N||!x)return null;const{xScale:F,yScale:M}=N,L=Jr()?.isHidden(e.id)??!1,P=L&&f==="fade";if(L&&f==="remove")return null;const S=bn();X.useEffect(()=>{if(!S)return;const te=e.data.map(re=>({x:a(re),y:re.y}));return S.registerSeries(e.id,te),()=>S.unregisterSeries(e.id)},[S,e.id,e.data,a]);const D=typeof F.bandwidth=="function",B=D?F.bandwidth():void 0,Q=X.useMemo(()=>{if(B!=null)return B;const te=g&&g.length?g:[e],re=[];te.forEach(W=>{W.data.forEach(ee=>{const q=F(a(ee));Number.isFinite(q)&&re.push(q)})});const fe=re.sort((W,ee)=>W-ee);if(fe.length<=1)return 40;const k=[];for(let W=1;W<fe.length;W++)k.push(fe[W]-fe[W-1]);return k.sort((W,ee)=>W-ee),(k[Math.floor(k.length/2)]||40)*o},[e.data,g,F,a,o,B]),{basePerBar:U}=X.useMemo(()=>{if(D){const fe=Q,k=Math.max(1,(fe-l*(n-1))/n),R=e.barWidth??u;let W=R?Math.min(R,fe):k;if(c){const ee=fe*Math.min(1,Math.max(.05,d)),q=Math.max(1,(ee-l*(n-1))/n);W=R?Math.min(W,q):q}return{basePerBar:W}}const te=e.barWidth??u,re=Math.max(1,(Q-l*(n-1))/n);if(c){const fe=g&&g.length?g:[e],k=[];fe.forEach(ge=>ge.data.forEach(Se=>{const ce=F(a(Se));Number.isFinite(ce)&&k.push(ce)})),k.sort((ge,Se)=>ge-Se);const R=[];for(let ge=1;ge<k.length;ge++)R.push(k[ge]-k[ge-1]);R.sort((ge,Se)=>ge-Se);const ee=(R[Math.floor(R.length/2)]||Q)*Math.min(1,Math.max(.05,d)),q=Math.max(1,(ee-l*(n-1))/n);return{basePerBar:te?Math.min(te,q):q}}return te?{basePerBar:Math.min(te,re)}:{basePerBar:re}},[D,Q,l,n,u,e.barWidth,c,d,g,F,a]),H=X.useMemo(()=>{if(D)return[];const te=[];return(g&&g.length?g:[e]).forEach(fe=>fe.data.forEach(k=>{const R=F(a(k));Number.isFinite(R)&&te.push(R)})),te.sort((fe,k)=>fe-k),Array.from(new Set(te))},[D,g,e,F,a]),V=X.useMemo(()=>{if(D)return[];if(!H.length)return[];if(H.length===1)return[{center:H[0],left:0,right:x.innerWidth}];const te=[];for(let re=0;re<H.length;re++){const fe=H[re],k=re===0?0:(H[re-1]+fe)/2,R=re===H.length-1?x.innerWidth:(fe+H[re+1])/2;te.push({center:fe,left:Math.max(0,k),right:Math.min(x.innerWidth,R)})}return te},[D,H,x.innerWidth]),O=X.useMemo(()=>{if(D||!V.length)return;const te=Math.min(1,Math.max(.05,o)),re=V.map(ee=>Math.max(2,ee.right-ee.left)),fe=re.map(ee=>Math.max(2,Math.min(ee-1,ee*te)));let k=Math.min(...fe);if(p)if(n<=1){const ee=Math.min(...re.map(q=>q-1));ee>=p&&k<p&&(k=Math.min(ee,p))}else{const ee=Math.min(...re.map(ae=>ae-1)),q=p*n+(n-1)*(p*$);q<=ee&&k<q&&(k=q)}if(n<=1)return p&&k<p&&re.every(q=>q>=p)?{groupWidth:p,barWidth:p}:{groupWidth:k,barWidth:k};let R=k/(n+(n-1)*$);return R<1&&(R=1),p&&R<p&&p*n+(n-1)*(p*$)<=k&&(R=p),{groupWidth:R*n+(n-1)*(R*$),barWidth:R}},[D,V,o,n,$,p]),se=I&&I[t]?I[t]:void 0,z=e.color||se||(r==="region"?_r(e.id,t):qt(t)),pe=r==="region"?Si(e.id,t):Yn(t),ve=C&&(e.color||se)?z:pe,ue=Number.isFinite(M(0))?M(0):M.range()[0],he=X.useId();return y&&y.length===e.data.length?s.jsxs("g",{className:"fdp-bar-series fdp-bar-series--stacked","data-series":e.id,opacity:P?w:T,"aria-hidden":P?!0:void 0,children:[b&&s.jsx("defs",{children:s.jsxs("linearGradient",{id:he,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:z,stopOpacity:.3}),s.jsx("stop",{offset:"60%",stopColor:z,stopOpacity:.14}),s.jsx("stop",{offset:"100%",stopColor:z,stopOpacity:.06})]})}),e.data.map((te,re)=>{const fe=a(te),k=F(D?te.x:fe);let R,W;if(D)R=Q,W=k;else{const ie=V.find(ne=>Math.abs(ne.center-k)<.5);if(!ie||!O)R=U,W=k-U/2;else{const{groupWidth:ne}=O;R=ne;let A=k-ne/2;A<ie.left&&(A=ie.left),A+ne>ie.right&&(A=Math.max(ie.left,ie.right-ne)),W=A}}const ee=y[re],q=M(ee.y0),ae=M(ee.y1),ge=Math.min(q,ae),Se=Math.abs(ae-q)||1;if(!D&&p&&R<p){const ie=V.find(ne=>Math.abs(ne.center-k)<.5);if(ie){const ne=Math.max(2,ie.right-ie.left-1),A=Math.min(ne,p);A>R&&(R=A,W=Math.max(ie.left,Math.min(ie.right-R,k-R/2)))}}const ce=!P&&S?.focused?.seriesId===e.id&&S.focused.index===re,K=()=>{!S||P||S.setFocused({seriesId:e.id,index:re,x:fe,y:ee.y1-ee.y0,clientX:W+R/2,clientY:ge})},Y=()=>{S?.focused?.seriesId===e.id&&S.focused.index===re&&S.clear()};return s.jsx("rect",{x:W,y:ge,width:R,height:Se,fill:b?`url(#${he})`:z,...b?{}:{fillOpacity:j},stroke:ce?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":b&&C?z:void 0,strokeWidth:ce?2:1,className:"fdp-bar fdp-bar--stacked",tabIndex:P||!i?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${fe instanceof Date?fe.toDateString():fe} value ${ee.y1-ee.y0}`,onMouseEnter:K,onFocus:K,onMouseLeave:Y,onBlur:Y},re)})]}):s.jsxs("g",{className:"fdp-bar-series","data-series":e.id,opacity:P?w:T,"aria-hidden":P?!0:void 0,children:[b&&s.jsxs("defs",{children:[m==="series"&&s.jsxs("linearGradient",{id:he,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:z,stopOpacity:.3}),s.jsx("stop",{offset:"60%",stopColor:z,stopOpacity:.14}),s.jsx("stop",{offset:"100%",stopColor:z,stopOpacity:.06})]}),m==="category"&&e.data.map((te,re)=>{const k=I&&I[re]||(r==="region"?_r(String(te.x),re):qt(re)),R=`${he}-${re}`;return s.jsxs("linearGradient",{id:R,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:k,stopOpacity:.3}),s.jsx("stop",{offset:"60%",stopColor:k,stopOpacity:.14}),s.jsx("stop",{offset:"100%",stopColor:k,stopOpacity:.06})]},R)})]}),e.data.map((te,re)=>{const fe=a(te),k=F(D?te.x:fe);let R,W;if(D){const le=Q;if(n<=1)W=le,R=k;else{W=Math.max(1,le/(n+(n-1)*$));const Z=W*$,G=W*n+Z*(n-1);R=k+(le-G)/2+t*(W+Z)}}else{const le=V.find(Z=>Z.center===k);if(!le||!O)W=U,R=k-U/2,p&&W<p&&(W=p,R=k-W/2);else{const{barWidth:Z}=O;W=Z;const G=n>1?Z*$:0,oe=W*n+G*(n-1);let _e=k-oe/2;_e<le.left&&(_e=le.left),_e+oe>le.right&&(_e=Math.max(le.left,le.right-oe)),R=_e+t*(W+G)}if(p&&W<p){const Z=V.find(G=>Math.abs(G.center-k)<.5);if(Z){const G=Math.max(2,Z.right-Z.left-1),oe=Math.min(G,p);if(oe>W)if(n<=1)W=oe,R=Math.max(Z.left,Math.min(Z.right-W,k-W/2));else{const _e=oe*$,de=oe*n+_e*(n-1);if(de<=Z.right-Z.left-1){W=oe;const Ce=de;let Ne=k-Ce/2;Ne<Z.left&&(Ne=Z.left),Ne+Ce>Z.right&&(Ne=Math.max(Z.left,Z.right-Ce)),R=Ne+t*(W+_e)}}}}}const ee=R+W/2,q=M(te.y),ae=Math.min(ue,q),ge=Math.abs(ue-q),Se=!P&&S?.focused?.seriesId===e.id&&S.focused.index===re,ce=()=>{!S||P||S.setFocused({seriesId:e.id,index:re,x:fe,y:te.y,clientX:ee,clientY:q})},K=()=>{S?.focused?.seriesId===e.id&&S.focused.index===re&&S.clear()},Y=m==="category"&&I?I[re]:void 0,ie=m==="category"?Y||(r==="region"?_r(String(te.x),re):qt(re)):z,ne=m==="category"?`${he}-${re}`:he,A=b&&C?ie:m==="category"?r==="region"?Si(String(te.x),re):Yn(re):ve,J=Se?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":A||ie;return s.jsx("rect",{x:R,y:ae,width:W,height:ge||1,fill:b?`url(#${ne})`:ie,...b?{}:{fillOpacity:j},stroke:J,strokeWidth:Se?2:1,className:"fdp-bar",tabIndex:P||!i?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${fe instanceof Date?fe.toDateString():fe} value ${te.y}`,onMouseEnter:ce,onFocus:ce,onMouseLeave:K,onBlur:K},re)})]})},Qx=({series:e,innerWidth:t,innerHeight:n,paddingInner:r=.1,paddingOuter:a=.05,children:i,yTickCount:o=5})=>{const l=jn(),u=t??l?.innerWidth??0,c=n??l?.innerHeight??0,d=X.useMemo(()=>e.flatMap(p=>p.data),[e]),f=X.useMemo(()=>{const p=new Set;return d.forEach(b=>p.add(b.x)),Array.from(p)},[d]),m=X.useMemo(()=>Math.max(0,...d.map(p=>p.y)),[d]),g=X.useMemo(()=>Hc().domain(f).range([0,u]).paddingInner(r).paddingOuter(a),[f,u,r,a]),y=X.useMemo(()=>li().domain([0,m]).nice().range([c,0]),[m,c]),h=X.useMemo(()=>({xScale:g,yScale:y,getXTicks:()=>f,getYTicks:(p=o)=>y.ticks(p)}),[g,y,f,o]);return s.jsx(co.Provider,{value:h,children:i})},ev=({title:e,description:t,source:n,table:r,className:a,id:i,message:o="Interactive chart loadingâ€¦",forceFallback:l=!1})=>{const u=X.useId(),c=i||u,d=t?`${c}-desc`:void 0,f=n?`${c}-src`:void 0,m=typeof window<"u"&&!l;return s.jsxs("figure",{id:c,className:bi("fdp-chart fdp-chart--noscript",a),"aria-labelledby":`${c}-title`,"aria-describedby":bi(d,f),"data-component":"ChartNoScript",children:[s.jsx("header",{className:"fdp-chart__header",children:s.jsx("h3",{id:`${c}-title`,className:"fdp-chart__title",children:e})}),t&&s.jsx("p",{id:d,className:"fdp-chart__description",children:t}),!m&&s.jsx("div",{className:"fdp-chart__loading",role:"status","aria-live":"polite",children:o}),s.jsxs("div",{className:"fdp-chart__fallback",role:"group","aria-label":e,children:[s.jsx("noscript",{children:s.jsx("div",{className:"fdp-chart__noscript-wrapper",children:s.jsx(Yt,{...r})})}),s.jsx("div",{className:"fdp-chart__table","data-fallback-table":!0,children:s.jsx(Yt,{...r})})]}),n&&s.jsx("figcaption",{className:"fdp-chart__caption",children:n&&s.jsxs("small",{id:f,className:"fdp-chart__source",children:["Source: ",n]})})]})},tv=({selector:e="figure.fdp-chart",onEnhanced:t,delay:n=0,children:r})=>{const a=X.useRef(null);return X.useEffect(()=>{const i=a.current;if(!i)return;const o=()=>{const l=Array.from(i.querySelectorAll(e));if(l.length===0)return;const u=[];l.forEach(c=>{c.classList.contains("fdp-chart--enhanced")||(c.classList.add("fdp-chart--enhanced"),u.push(c))}),u.length&&t&&t(u)};if(n>0){if(typeof window>"u")return;const l=window.setTimeout(o,n);return()=>window.clearTimeout(l)}o()},[e,t,n]),s.jsx("div",{ref:a,children:r})},nv=({label:e,value:t,unit:n,delta:r,status:a="neutral",variant:i="default",subtitle:o,metadata:l,trendData:u,loading:c=!1,error:d,valueFormatter:f,className:m,id:g,announceDelta:y=!0})=>{const h=X.useId(),p=g||h,b=`${p}-label`,C=`${p}-value`,T=`${p}-delta`,w=typeof t=="number"&&!Number.isNaN(t),j=c?"â€”":d?"":w?f?f(t):t.toLocaleString():t;let I,$="",N="";if(r&&!c&&!d){I=r.direction||(r.value>0?"up":r.value<0?"down":"neutral");const x=Math.abs(r.value),F=I==="up"?`+${x}`:I==="down"?`-${x}`:"0",M=r.isPercent?"%":"";if($=`${F}${M}`,r.ariaLabel)N=r.ariaLabel;else{const v=r.invert?I==="down":I==="up";N=`${I==="neutral"?"no change":I==="up"?"up":"down"} ${x}${M}${I==="neutral"?"":v?" (improvement)":" (worse)"}`}}return s.jsx("div",{className:bi("fdp-metric-card",i&&`fdp-metric-card--${i}`,a&&`fdp-metric-card--status-${a}`,c&&"fdp-metric-card--loading",d&&"fdp-metric-card--error",m),role:"group","aria-labelledby":b,"data-component":"MetricCard",children:s.jsxs("div",{className:"fdp-metric-card__inner",children:[s.jsxs("div",{className:"fdp-metric-card__header",children:[s.jsx("h3",{id:b,className:"fdp-metric-card__label",children:e}),l&&s.jsx("div",{className:"fdp-metric-card__metadata",children:l})]}),s.jsxs("div",{className:"fdp-metric-card__content",children:[s.jsxs("div",{className:"fdp-metric-card__value-section",children:[s.jsx("div",{id:C,className:"fdp-metric-card__value",children:c?s.jsx("div",{className:"fdp-metric-card__skeleton","aria-hidden":"true",children:s.jsx("div",{className:"fdp-metric-card__skeleton-line fdp-metric-card__skeleton-line--value"})}):d?s.jsx("div",{className:"fdp-metric-card__error",role:"alert",children:d}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"fdp-metric-card__number",children:j}),n&&s.jsx("span",{className:"fdp-metric-card__unit",children:n})]})}),o&&!c&&!d&&s.jsx("div",{className:"fdp-metric-card__subtitle",children:o})]}),r&&!c&&!d&&s.jsx("div",{className:"fdp-metric-card__delta-section",children:s.jsxs("div",{id:T,"aria-label":N,className:bi("fdp-metric-card__delta",I&&`fdp-metric-card__delta--${I}`),children:[s.jsx("span",{className:"fdp-metric-card__delta-value",children:$}),r.period&&s.jsx("span",{className:"fdp-metric-card__delta-period",children:r.period})]})}),u&&u.length>0&&!c&&!d&&s.jsx("div",{className:"fdp-metric-card__trend","aria-hidden":"true"})]}),y&&r&&!r.ariaLabel&&!c&&!d&&s.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite",children:N})]})})};var yn=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(yn||{}),je=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(je||{}),Te=(e=>(e.Improvement="improvement",e.Concern="concern",e.Neither="neither",e.Suppressed="suppressed",e))(Te||{}),pt=(e=>(e.SinglePoint="single_point",e.TwoSigma="two_sigma",e.Shift="shift",e.Trend="trend",e))(pt||{});const vo=["single_point","two_sigma","shift","trend"],Fd=vo.reduce((e,t,n)=>(e[t]=n+1,e),{}),rv={single_point:"Single point beyond process limit",two_sigma:"Two of three beyond 2Ïƒ on one side",shift:"Sustained shift (run)",trend:"Monotonic trend"},av={single_point:"point",two_sigma:"cluster",shift:"sustained",trend:"sustained"},ki=vo.reduce((e,t,n)=>(e[t]={id:t,rank:n+1,label:rv[t],category:av[t],participatesInRanking:!0},e),{});vo.map(e=>ki[e]);var rt=(e=>(e.Up="up",e.Down="down",e))(rt||{}),bt=(e=>(e.SinglePointAbove="single_above",e.SinglePointBelow="single_below",e.TwoOfThreeAbove="two_of_three_above",e.TwoOfThreeBelow="two_of_three_below",e.FourOfFiveAbove="four_of_five_above",e.FourOfFiveBelow="four_of_five_below",e.ShiftHigh="shift_high",e.ShiftLow="shift_low",e.TrendIncreasing="trend_inc",e.TrendDecreasing="trend_dec",e.FifteenInnerThird="fifteen_inner_third",e))(bt||{}),qe=(e=>(e.Pass="pass",e.Fail="fail",e.None="none",e))(qe||{}),Bt=(e=>(e.Shift="shift",e.Trend="trend",e.Point="point",e))(Bt||{}),Ci=(e=>(e.Legacy="legacy",e.DirectionalFirst="directional_first",e))(Ci||{}),Ld=(e=>(e.None="none",e.SqlRankingV26a="sql_ranking_v2_6a",e))(Ld||{}),Wt=(e=>(e.Upwards="Upwards",e.Downwards="Downwards",e.Same="Same",e))(Wt||{}),wo=(e=>(e.Sql="sql",e.Conflict="conflict",e))(wo||{}),Qr=(e=>(e.ImprovementValueBeforePruning="improvementValueBeforePruning",e.ConcernValueBeforePruning="concernValueBeforePruning",e))(Qr||{});const br={singlePointUp:{tooltip:"Single point above upper control limit",narration:"Single point beyond a control limit"},singlePointDown:{tooltip:"Single point below lower control limit",narration:"Single point beyond a control limit"},twoOfThreeUp:{tooltip:"Two of three points beyond +2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},twoOfThreeDown:{tooltip:"Two of three points beyond -2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},fourOfFiveUp:{tooltip:"Four of five points beyond +1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},fourOfFiveDown:{tooltip:"Four of five points beyond -1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},shiftUp:{tooltip:"Shift: run of points above centre line",narration:"Shift (run on one side of mean)"},shiftDown:{tooltip:"Shift: run of points below centre line",narration:"Shift (run on one side of mean)"},trendUp:{tooltip:"Trend: consecutive increasing points",narration:"Trend (consecutive increases)"},trendDown:{tooltip:"Trend: consecutive decreasing points",narration:"Trend (consecutive decreases)"}};function Ti(e){if(!e)return[];const t=[];return e.specialCauseSinglePointUp&&t.push("singlePointUp"),e.specialCauseSinglePointDown&&t.push("singlePointDown"),e.specialCauseTwoOfThreeUp&&t.push("twoOfThreeUp"),e.specialCauseTwoOfThreeDown&&t.push("twoOfThreeDown"),e.specialCauseFourOfFiveUp&&t.push("fourOfFiveUp"),e.specialCauseFourOfFiveDown&&t.push("fourOfFiveDown"),e.specialCauseShiftUp&&t.push("shiftUp"),e.specialCauseShiftDown&&t.push("shiftDown"),e.specialCauseTrendUp&&t.push("trendUp"),e.specialCauseTrendDown&&t.push("trendDown"),t}function Ni(e){switch(e){case Te.Improvement:return"Improvement signal";case Te.Concern:return"Concern signal";case Te.Neither:return"Common cause variation";case Te.Suppressed:return null;default:return null}}function Bd(e){switch(e){case qe.Pass:return"Target met";case qe.Fail:return"Target not met";default:return null}}function iv(e,t,n){if(e==null||!Number.isFinite(t)||t<=0)return null;const r=Math.abs((n-e)/t);return r<1?"Within 1Ïƒ":r<2?"Between 1â€“2Ïƒ":r<3?"Between 2â€“3Ïƒ":"Beyond 3Ïƒ"}const Ut={improvement:{token:"var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",hex:"#00B0F0"},concern:{token:"var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",hex:"#E46C0A"},neither:{token:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",hex:"#A6A6A6"},suppressed:{token:"var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",hex:"#490092"}};function Ed(e){return e?Ut[e]?.token??Ut.neither.token:Ut.neither.token}function sv(e){return e?Ut[e]?.hex??Ut.neither.hex:Ut.neither.hex}const Ad=({engineRows:e,limits:t,pointDescriber:n,measureName:r,measureUnit:a,dateFormatter:i,enableNeutralNoJudgement:o=!0,showTrendGatingExplanation:l=!0})=>{const u=bn(),c=jn(),[d,f]=X.useState(null),[m,g]=X.useState(!1),y=X.useRef(null);X.useEffect(()=>{if(u){if(u.focused&&(f(u.focused),y.current&&(cancelAnimationFrame(y.current),y.current=null)),!u.focused&&!m){const ce=requestAnimationFrame(()=>{f(null),y.current=null});y.current=ce}return()=>{y.current&&(cancelAnimationFrame(y.current),y.current=null)}}},[u,u?.focused,m]);const h=u&&(u.focused||(m?d:null)||d),[p,b]=X.useState(!1);X.useEffect(()=>{const ce=requestAnimationFrame(()=>b(!0));return()=>cancelAnimationFrame(ce)},[h?.index]);const C=c?.innerWidth??0,T=c?.innerHeight??0,w=h?Math.min(Math.max(h.clientX,0),C):0,j=h?Math.min(Math.max(h.clientY,0),T):0,$=c.ref?.current;if(!h)return null;const N=e?.[h.index],F=Ti(N).map(ce=>({id:ce,label:br[ce].tooltip})),M=h.x instanceof Date?h.x:new Date(h.x),v=i?i(M):M.toDateString(),L=a?`${a}`:"",P=r||L?`${h.y}${L?""+L:" "}${r?" "+r:""}`:`${h.y}`,S=Ni(N?.variationIcon),D=Bd(N?.assuranceIcon),B=iv(t.mean??null,t.sigma,h.y),Q=n?n(h.index,{x:h.x,y:h.y}):void 0,U=S||D||B,H=N?.specialCauseTrendUp||N?.specialCauseTrendDown,V=N?.variationIcon===Te.Neither&&H,O=l&&V?"Trend detected (monotonic run) â€“ held neutral until values cross onto the favourable side of the mean.":null,se=F.length>0,z=N?.primeDirection,pe=N?.primeRuleId,ve=o&&N?.variationIcon===Te.Neither&&se,ue="var(--nhs-fdp-color-primary-yellow, #ffeb3b)",he=Ed(N?.variationIcon),te=6.2,fe=[Q||"",`${v} â€¢ ${P}`].filter(Boolean).reduce((ce,K)=>Math.max(ce,K.length*te+32),0),k=200,R=440,W=Math.min(R,Math.max(k,fe));let ee=w+12,ae=(c.margin?.top??0)+j+16;ee+W>C&&(ee=w- -60-W),ee<0&&(ee=Math.max(0,C-W));const ge=h?`spc-tooltip-${h.index}`:"spc-tooltip",Se=$?Kg.createPortal(s.jsx("div",{id:ge,className:"fdp-spc-tooltip fdp-spc-tooltip-portal"+(p?" is-visible":""),style:{position:"absolute",left:ee,top:ae,width:W,maxWidth:R,zIndex:10,pointerEvents:"auto",userSelect:"none"},role:"tooltip","aria-live":"polite","aria-hidden":p?"false":"true","data-floating":!0,"data-placement":ee+W+12>C?"left":"right",onPointerEnter:()=>{g(!0),y.current&&(cancelAnimationFrame(y.current),y.current=null)},onPointerLeave:()=>{if(g(!1),!u?.focused){const ce=requestAnimationFrame(()=>{f(null),y.current=null});y.current=ce}},children:s.jsxs("div",{className:"fdp-spc-tooltip__body",children:[s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--date",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Date"})}),s.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:v})]}),s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--value",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Value"})}),s.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:P})]}),U&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--signals",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Signals"})}),s.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Signals",children:S?.toLowerCase().includes("concern")?s.jsx(Ae,{text:S,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):S?.toLowerCase().includes("improvement")?s.jsx(Ae,{text:S,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):ve?s.jsx(Ae,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):S?s.jsx(Ae,{text:S,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null})]}),D&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--assurance",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Assurance"})}),s.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:(()=>{const ce=D.toLowerCase(),Y=!(ce.includes("not met")||ce.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(ce);return s.jsx(Ae,{text:D,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${Y?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${D}`})})()})]}),B&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--limits",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Control Limits & Sigma"})}),s.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:s.jsx(Ae,{text:(()=>{const ce=B.toLowerCase();return ce.startsWith("within 1")?"â‰¤1Ïƒ":ce.startsWith("1â€“2")?"1â€“2Ïƒ":ce.startsWith("2â€“3")?"2â€“3Ïƒ":ce.startsWith(">3")?">3Ïƒ":B})(),color:B.includes(">3")?"orange":B.includes("2â€“3")?"yellow":"grey","aria-label":`Sigma zone: ${B}`,className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--zone"})})]}),O&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--gating","data-gating":!0,children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Trend gating"})}),s.jsx("div",{className:"fdp-spc-tooltip__explanation","aria-live":"off",children:O})]}),se&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Special cause"})}),s.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",children:F.map(({id:ce,label:K})=>{const Y=String(ce),ne=Y===bt.TrendIncreasing||Y===bt.TrendDecreasing?"fdp-spc-tag--trend":ve?"fdp-spc-tag--no-judgement":S?S.toLowerCase().includes("concern")?"fdp-spc-tag--concern":S.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common";return s.jsx(Ae,{text:K,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${ne}`,"data-rule-id":Y},Y)})}),z&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",style:{marginTop:16},children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",style:{marginBottom:6},children:s.jsx("strong",{children:"Prime Direction"})}),(()=>{const ce=ve?"fdp-spc-tag--no-judgement":S?S.toLowerCase().includes("concern")?"fdp-spc-tag--concern":S.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",K=`${z}${pe?` (${pe})`:""}`;return s.jsx(Ae,{text:K,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${ce}`,"aria-label":`Prime direction ${z}${pe?` via ${pe}`:""}`})})()]})]})]})}),$):null;return s.jsxs("g",{className:"fdp-tooltip-layer fdp-spc-tooltip",pointerEvents:"none","aria-hidden":"true",children:[s.jsx("circle",{cx:w,cy:j,r:7,fill:"none",stroke:ue,strokeWidth:3}),s.jsx("circle",{cx:w,cy:j,r:5,fill:"#000",stroke:ue,strokeWidth:1.5}),s.jsx("circle",{cx:w,cy:j,r:2.5,fill:he,stroke:"#fff",strokeWidth:.5}),Se]})};let So=null;try{So=require("@fergusbisset/nhs-fdp-design-system/dist/js/tokens.json")?.color?.["data-viz"]?.spc||null}catch{}const Et=(e,t)=>{if(!So)return t;const n=e.split(".");let r=So;for(const i of n){if(r==null)break;r=r[i]}const a=r;return a==null?t:typeof a=="string"||typeof a=="number"?String(a):a.$value!=null?String(a.$value):a.value!=null?String(a.value):t},Rd=()=>({start:Et("gradient.stop.start-opacity","0.12"),mid:Et("gradient.stop.mid-opacity","0.03"),end:Et("gradient.stop.end-opacity","0"),triStart:Et("gradient.stop.triangle-start-opacity",Et("gradient.stop.start-opacity","0.12")),triMid:Et("gradient.stop.triangle-mid-opacity",Et("gradient.stop.mid-opacity","0.03")),triEnd:Et("gradient.stop.triangle-end-opacity",Et("gradient.stop.end-opacity","0"))});var Dn=(e=>(e.Pass="pass",e.Fail="fail",e.Uncertain="uncertain",e))(Dn||{});const ov={pass:"#00B0F0",fail:"#E46C0A",uncertain:"#A6A6A6"},lv={pass:"P",fail:"F",uncertain:"?"};var Qe=(e=>(e.HigherIsBetter="higher_is_better",e.LowerIsBetter="lower_is_better",e.ContextDependent="context_dependent",e))(Qe||{}),De=(e=>(e.Higher="higher",e.Lower="lower",e))(De||{}),vt=(e=>(e.Improving="improving",e.Deteriorating="deteriorating",e.No_Judgement="no_judgement",e.None="none",e))(vt||{}),Ie=(e=>(e.SpecialCauseImproving="special_cause_improving",e.SpecialCauseDeteriorating="special_cause_deteriorating",e.CommonCause="common_cause",e.SpecialCauseNoJudgement="special_cause_no_judgement",e))(Ie||{});const cv=e=>{const t=e.replace("#",""),n=parseInt(t.slice(0,2),16)/255,r=parseInt(t.slice(2,4),16)/255,a=parseInt(t.slice(4,6),16)/255,i=[n,r,a].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*i[0]+.7152*i[1]+.0722*i[2]<.55?"#ffffff":"#212b32"},ko={special_cause_deteriorating:{hex:Ut.concern.hex,judgement:"deteriorating",label:"Special Cause (Deteriorating)",description:"Deteriorating variation detected (special cause) relative to baseline."},special_cause_improving:{hex:Ut.improvement.hex,judgement:"improving",label:"Special Cause (Improving)",description:"Improving variation detected (special cause) relative to baseline."},common_cause:{hex:Ut.neither.hex,judgement:"none",label:"Common Cause",description:"Common cause variation only â€“ no special cause detected."},special_cause_no_judgement:{hex:Ut.suppressed.hex,judgement:"no_judgement",label:"Special Cause (No Judgement)",description:"Special cause detected without assigning improving/deteriorating judgement."}};Object.values(ko).forEach(e=>{e.text||(e.text=cv(e.hex))});const Co=e=>ko[e],ji=e=>ko[e].judgement||"none",Hd={special:{higher:[{cx:77.5,cy:158.5},{cx:114,cy:175},{cx:150.5,cy:158.5},{cx:188,cy:125},{cx:225,cy:137}],lower:[{cx:77.5,cy:139.5},{cx:114,cy:124.5},{cx:150.5,cy:139.5},{cx:188,cy:175.5},{cx:224.5,cy:162}]},common:[{cx:76.5,cy:149.5},{cx:113,cy:179.5},{cx:149.5,cy:117},{cx:187,cy:171},{cx:223.5,cy:158}]};function uv(e,t){let n;return e==="common_cause"?n=Hd.common:n=Hd.special[t==="lower"?"lower":"higher"],n.map(r=>({...r}))}var dt=(e=>(e.Concern="concern",e.Improvement="improvement",e.NoJudgement="noJudgement",e.Common="common",e))(dt||{}),qn=(e=>(e.Classic="classic",e.Triangle="triangle",e.TriangleWithRun="triangleWithRun",e))(qn||{}),ea=(e=>(e.Direction="direction",e.Polarity="polarity",e))(ea||{});const Od=e=>{const t=()=>{globalThis.__spcIconDeprecationEmitted||(console.warn("[SPCVariationIcon] Deprecated payload shape detected. Migrate to { variationIcon, improvementDirection, specialCauseNeutral?, trend? }."),globalThis.__spcIconDeprecationEmitted=!0)};if(e.variationIcon!==void 0){const o=e;let l;o.improvementDirection!==void 0?l=o.improvementDirection===je.Up?Qe.HigherIsBetter:o.improvementDirection===je.Down?Qe.LowerIsBetter:Qe.ContextDependent:o.polarity&&(l=o.polarity);let u;switch(o.variationIcon){case Te.Improvement:u=Ie.SpecialCauseImproving;break;case Te.Concern:u=Ie.SpecialCauseDeteriorating;break;case Te.Neither:u=o.specialCauseNeutral?Ie.SpecialCauseNoJudgement:Ie.CommonCause;break;case Te.Suppressed:default:u=Ie.SpecialCauseNoJudgement;break}let c=o.trend;return c||(u===Ie.SpecialCauseImproving?c=l===Qe.LowerIsBetter?De.Lower:De.Higher:u===Ie.SpecialCauseDeteriorating?c=l===Qe.LowerIsBetter?De.Higher:De.Lower:u===Ie.SpecialCauseNoJudgement?o.highSideSignal&&!o.lowSideSignal?c=De.Higher:o.lowSideSignal&&!o.highSideSignal?c=De.Lower:c=De.Higher:c=De.Higher),{state:u,direction:c,polarity:l??Qe.ContextDependent}}if(e.state!==void 0){t();const o=e;let l=o.trend;return!l&&(o.state===Ie.SpecialCauseImproving||o.state===Ie.SpecialCauseDeteriorating)&&o.polarity&&(o.state===Ie.SpecialCauseImproving?l=o.polarity===Qe.LowerIsBetter?De.Lower:De.Higher:l=o.polarity===Qe.LowerIsBetter?De.Higher:De.Lower),l||(o.state===Ie.SpecialCauseImproving?l=De.Higher:o.state===Ie.SpecialCauseDeteriorating?l=De.Lower:l=De.Higher),{state:o.state,direction:l,polarity:o.polarity??Qe.ContextDependent}}const n=e;t();const a={[vt.Improving]:Ie.SpecialCauseImproving,[vt.Deteriorating]:Ie.SpecialCauseDeteriorating,[vt.No_Judgement]:Ie.SpecialCauseNoJudgement,[vt.None]:Ie.CommonCause}[n.judgement];let i;return n.judgement===vt.Improving?i=n.polarity===Qe.LowerIsBetter?De.Lower:De.Higher:n.judgement===vt.Deteriorating?i=n.polarity===Qe.LowerIsBetter?De.Higher:De.Lower:i=n.trend??De.Higher,{state:a,direction:i,polarity:n.polarity}};function dv(e,t){const{state:n,direction:r,polarity:a}=Od(e),i=ji(n),o=r===De.Higher?"above":"below",l=r===De.Higher?"upwards":"downwards",u=(()=>{switch(a){case Qe.HigherIsBetter:return"For this measure, higher values are better.";case Qe.LowerIsBetter:return"For this measure, lower values are better.";default:return"Direction of improvement is context dependent."}})();return[(()=>{switch(i){case vt.Improving:return`Special cause improvement: recent data show a sustained run ${o} the mean (unlikely due to random variation).`;case vt.Deteriorating:return`Special cause deterioration: recent data show a sustained run ${o} the mean (unlikely due to random variation).`;case vt.No_Judgement:return`Special cause detected (no value judgement): recent data show a change in level, trending ${l}.`;case vt.None:default:return"Common cause variation: points vary randomly around the mean; no special cause detected."}})(),u,null,null,null,null,null].filter(Boolean).join(" ")}const To=(e,t,n,r,a,i)=>s.jsxs("defs",{children:[r&&s.jsxs("filter",{id:t,filterUnits:"objectBoundingBox",children:[s.jsx("feGaussianBlur",{stdDeviation:"3"}),s.jsx("feOffset",{dx:"0",dy:"15",result:"blur"}),s.jsx("feFlood",{floodColor:"rgb(150,150,150)",floodOpacity:"1"}),s.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),a&&s.jsx("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:i.map(o=>s.jsx("stop",{offset:o.offset,stopColor:e,stopOpacity:parseFloat(o.opacity)},o.offset))})]}),Di=({data:e,size:t=44,ariaLabel:n,showLetter:r=!0,dropShadow:a=!0,gradientWash:i=!1,variant:o=qn.Classic,runLength:l=0,letterMode:u=ea.Polarity,letterOverride:c,...d})=>{const f=E.useId(),m=E.useId(),{start:g,mid:y,end:h,triStart:p,triMid:b,triEnd:C}=Rd(),{state:T,direction:w,polarity:j}=E.useMemo(()=>Od(e),[e]),I=E.useMemo(()=>Co(T),[T]),$=E.useMemo(()=>ji(T),[T]),N=$===vt.Improving||$===vt.Deteriorating;let x="";r&&N&&(u===ea.Polarity?j===Qe.HigherIsBetter?x="H":j===Qe.LowerIsBetter?x="L":x="":x=w===De.Higher?"H":"L"),c!==void 0&&(x=c);const F=T!==Ie.CommonCause,M=T===Ie.SpecialCauseNoJudgement,v=Et("common-cause","#A6A6A6"),L=F?I.hex:v,P=E.useMemo(()=>uv(T,w),[T,w]),S=n||`${I.label}${x?w===De.Higher?" â€“ Higher":" â€“ Lower":""}`,D=dv(e);if(o===qn.TriangleWithRun){const V=[[150,90],[100,190],[200,190]],O=[[150,140+100/2],[150-100/2,140-100/2],[150+100/2,140-100/2]];let se=null;T===Ie.SpecialCauseImproving||T===Ie.SpecialCauseDeteriorating?se=s.jsx("polygon",{points:(w===De.Higher?V:O).map(R=>R.join(",")).join(" "),fill:I.hex,stroke:I.hex,strokeWidth:6,transform:w===De.Higher?"translate(0, -8)":"translate(0, 15)"}):T===Ie.SpecialCauseNoJudgement&&(se=s.jsx("polygon",{points:w===De.Higher?V.map(R=>R.join(",")).join(" "):O.map(R=>R.join(",")).join(" "),fill:I.hex,stroke:I.hex,strokeWidth:6,transform:w===De.Higher?"translate(0,-7)":"translate(0,14)"}));const z=Math.max(0,Math.min(5,Math.floor(l||0))),pe=T===Ie.CommonCause?160:w===De.Higher?220:70,ve=10,ue=26,he=150-2*ue,te=T===Ie.SpecialCauseImproving?Et("improvement","#00B0F0"):T===Ie.SpecialCauseDeteriorating?Et("concern","#E46C0A"):v,re=Array.from({length:5}).map((R,W)=>{const q=(T===Ie.SpecialCauseImproving||T===Ie.SpecialCauseDeteriorating)&&W>=5-z?te:v;return s.jsx("circle",{cx:he+W*ue,cy:pe,r:ve,fill:q,stroke:q,strokeWidth:1},W)}),fe=To(I.hex,f,m,a,i,[{offset:"0%",opacity:p},{offset:"75%",opacity:b},{offset:"100%",opacity:C}]),k=T===Ie.CommonCause||w===De.Higher?"translate(0,-10)":"translate(0,25)";return s.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":S,"aria-description":D,...d,children:[fe,s.jsx("circle",{stroke:"none",fill:i?`url(#${m})`:"#ffffff",...a?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("circle",{stroke:I.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),s.jsxs("g",{transform:k,children:[se,x&&s.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:64,x:"150",y:w===De.Higher?155:145,textAnchor:"middle",dominantBaseline:"middle",children:x}),re]})]})}if(o===qn.Triangle){const V=[[150,75],[75,225],[225,225]],O=[[150,150+150/2],[150-150/2,150-150/2],[150+150/2,150-150/2]],se=[[150-150/2,150+150/2],[150+150/2,150+150/2]];let z=null;T===Ie.SpecialCauseImproving||T===Ie.SpecialCauseDeteriorating?z=s.jsx("polygon",{points:(w===De.Higher?V:O).map(ve=>ve.join(",")).join(" "),fill:I.hex,stroke:I.hex,strokeWidth:8,transform:w===De.Higher?"translate(0, -10)":"translate(0, 10)"}):T===Ie.SpecialCauseNoJudgement?z=s.jsx("polygon",{points:w===De.Higher?V.map(ve=>ve.join(",")).join(" "):O.map(ve=>ve.join(",")).join(" "),fill:I.hex,stroke:I.hex,strokeWidth:8,transform:w===De.Higher?"translate(0, -15)":"translate(0, 15)"}):T===Ie.CommonCause&&(z=s.jsx("line",{x1:se[0][0],y1:se[0][1],x2:se[1][0],y2:se[1][1],stroke:I.hex,strokeWidth:32,strokeLinecap:"square",transform:"translate(0, -75)"}));const pe=To(I.hex,f,m,a,i,[{offset:"0%",opacity:p},{offset:"65%",opacity:b},{offset:"100%",opacity:C}]);return s.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":S,"aria-description":D,...d,children:[pe,s.jsx("circle",{stroke:"none",fill:i?`url(#${m})`:"#ffffff",...a?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("circle",{stroke:I.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),z,x&&(T===Ie.SpecialCauseImproving||T===Ie.SpecialCauseDeteriorating)&&s.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:100,x:"150",y:w===De.Higher?"170":"140",textAnchor:"middle",dominantBaseline:"middle",children:x})]})}const B=To(I.hex,f,m,a,i,[{offset:"0%",opacity:g},{offset:"65%",opacity:y},{offset:"100%",opacity:h}]);return s.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":S,"aria-description":D,...d,children:[B,s.jsx("circle",{stroke:"none",fill:i?`url(#${m})`:"#ffffff",...a?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("circle",{stroke:I.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),x&&s.jsx("text",{fill:I.hex,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,transform:"translate(86.67, 54) scale(0.5, 0.5)",textAnchor:"end",children:s.jsx("tspan",{x:"120",y:w===De.Lower?"340":"155",children:x})}),M?s.jsx("path",{"aria-hidden":"true",fillRule:"evenodd",stroke:"none",fill:I.hex,...w===De.Lower?{transform:"rotate(90 150 150)"}:{transform:"translate(-5 0) rotate(0 150 150)"},d:"M 90.26,185.42 L 149.31,126.37 127.44,104.51 209.81,90.66 195.96,173.02 174.09,151.16 115.05,210.2 90.26,185.42 Z M 90.26,185.42"}):s.jsxs(s.Fragment,{children:[P.length===5&&s.jsx("path",{"aria-hidden":"true",fill:"none",stroke:v,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9,d:`M ${P.map(Q=>`${Q.cx} ${Q.cy}`).join(" L ")}`}),P.map((Q,U)=>{const V=U>=P.length-2&&F?L:v,O=V;return s.jsx("circle",{stroke:O,strokeWidth:2,strokeMiterlimit:10,fill:V,cx:Q.cx,cy:Q.cy,r:16},U)})]})]})};Di.displayName="SPCVariationIcon";const Mi=({status:e,size:t=44,ariaLabel:n,dropShadow:r=!0,colourOverride:a,gradientWash:i=!1,letterOverride:o,showTrendLines:l=!0,...u})=>{const c=E.useId(),d=E.useId(),{start:f,mid:m,end:g}=Rd(),y=a||ov[e],h=(o||lv[e]).slice(0,2),p=n||`Assurance ${e}`;return s.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":p,...u,children:[s.jsxs("defs",{children:[r&&s.jsxs("filter",{id:c,filterUnits:"objectBoundingBox",children:[s.jsx("feGaussianBlur",{stdDeviation:"3"}),s.jsx("feOffset",{dx:"-1",dy:"15",result:"blur"}),s.jsx("feFlood",{floodColor:"rgb(166,166,166)",floodOpacity:"1"}),s.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),i&&s.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:y,stopOpacity:parseFloat(f)}),s.jsx("stop",{offset:"65%",stopColor:y,stopOpacity:parseFloat(m)}),s.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:parseFloat(g)})]})]}),s.jsx("circle",{stroke:"none",fill:i?`url(#${d})`:"#ffffff",...r?{filter:`url(#${c})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("text",{fill:y,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,x:0,y:0,transform:"translate(121.01, 32) scale(0.5, 0.5)",textAnchor:"middle",children:s.jsx("tspan",{x:60,y:184,children:h})}),l&&s.jsxs(s.Fragment,{children:[e===Dn.Fail?s.jsx("path",{id:"fail-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 33,143 L 268,143"}):e===Dn.Uncertain?s.jsx("path",{id:"uncertain-line",stroke:"rgb(166, 166, 166)",strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"16.5,10",strokeDashoffset:0,fill:"none",d:"M 36,174 L 266,174"}):s.jsx("path",{id:"pass-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 48,204 L 254,204"}),s.jsx("path",{id:"data-sparkline",stroke:"rgb(166, 166, 166)",strokeWidth:12,strokeMiterlimit:12,fill:"none",d:"M 59.9,187.91 C 72.79,171.72 87.33,158.06 104.4,157.83 121.91,158.58 140.94,187.85 153.4,189.91 164.1,192.12 163.78,171.38 169.17,170.53 172.87,169.55 174.88,187.45 184.94,189.24 197,191.86 230.54,184.47 239.01,185.9"}),s.jsx("circle",{stroke:y,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"})]})]})};Mi.displayName="SPCAssuranceIcon";const we=e=>typeof e=="number"&&Number.isFinite(e),fv=e=>e.reduce((t,n)=>t+n,0),Xt=e=>e.length?fv(e)/e.length:NaN;function zd(e,t){const n=new Array(e.length).fill(null);let r=null;for(let a=0;a<e.length;a++){const i=e[a];if(!t[a]&&we(i)){if(r!==null){const o=e[r];n[a]=we(o)?Math.abs(i-o):null}r=a}}return n}function Wd(e,t){const n=e.filter(i=>we(i));if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=Xt(n),a=3.267*r;if(t){const i=n.filter(o=>o<=a);i.length&&i.length!==n.length&&(r=Xt(i),a=3.267*r)}return{mrMean:r,mrUcl:a}}function hv(e,t){if(!we(e)||!we(t))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=2.66,r=2/3*n,a=1/3*n;return{upperProcessLimit:e+n*t,lowerProcessLimit:e-n*t,upperTwoSigma:e+r*t,lowerTwoSigma:e-r*t,upperOneSigma:e+a*t,lowerOneSigma:e-a*t}}const pv=.2777,mv=3.6,gv=e=>we(e)&&e>=0?Math.pow(e,pv):null,Xn=e=>we(e)&&e>=0?Math.pow(e,mv):null;function _v(e,t){return!(e>0&&e<1)||!(t>0&&t<1)?NaN:Math.log(1-e)/Math.log(1-t)}const yr={one:{low:.1586552539,high:.8413447461},two:{low:.0227501319,high:.9772498681},three:{low:.001349898,high:.998650102}};function bv(e){if(!we(e)||e<0)return{cl:null,lcl:null,ucl:null,oneLow:null,oneHigh:null,twoLow:null,twoHigh:null};const t=1/(e+1),n=d=>_v(d,t)-1,r=n(.5),a=Math.max(0,n(yr.three.low)),i=n(yr.three.high),o=Math.max(0,n(yr.one.low)),l=n(yr.one.high),u=Math.max(0,n(yr.two.low)),c=n(yr.two.high);return{cl:r,lcl:a,ucl:i,oneLow:o,oneHigh:l,twoLow:u,twoHigh:c}}function yv(e,t,n){const r=e.map(N=>we(N)?gv(N):null),a=zd(r,t),{mrMean:i}=Wd(a,!!n),o=r.filter((N,x)=>!t[x]&&we(N)),l=o.length?Xt(o):NaN;if(!we(l)||!we(i))return{center:null,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null,mr:a,mrMean:null,mrUcl:null};const u=2.66,c=2/3*u,d=1/3*u,f=l+u*i,m=l-u*i,g=l+c*i,y=l-c*i,h=l+d*i,p=l-d*i,b=Xn(l),C=Xn(f),T=m<=0?null:Xn(m),w=Xn(h),j=p<=0?null:Xn(p),I=Xn(g),$=y<=0?null:Xn(y);return{center:b??null,upperProcessLimit:C??null,lowerProcessLimit:T??null,upperTwoSigma:I??null,lowerTwoSigma:$??null,upperOneSigma:w??null,lowerOneSigma:j??null,mr:a,mrMean:i,mrUcl:we(i)?3.267*i:null}}function xv(e){const{metricImprovement:t,capabilityMode:n,value:r,mean:a,upperProcessLimit:i,lowerProcessLimit:o,target:l}=e,u=c=>typeof c=="number"&&Number.isFinite(c);return!u(r)||a===null||!u(l)?qe.None:n&&u(i)&&u(o)?t===je.Up?u(o)&&o>l?qe.Pass:u(i)&&i<l?qe.Fail:qe.None:t===je.Down?u(i)&&i<l?qe.Pass:u(o)&&o>l?qe.Fail:qe.None:qe.None:t===je.Down?r<=l?qe.Pass:qe.Fail:t===je.Up?r>=l?qe.Pass:qe.Fail:qe.None}function vv(e,t){const{W:n,minGap:r,minDeltaSigma:a,scoreThreshold:i,isShiftUpAt:o,isShiftDownAt:l,isTrendUpAt:u,isTrendDownAt:c,isSingleUpAt:d,isSingleDownAt:f}=t,m=[];let g=0;for(let y=0;y<e.length;y++){const h=e[y];y>0&&e[y-1].partitionId!==h.partitionId&&(g=y);const p=y>0&&o(y-1),b=y>0&&l(y-1),C=y>0&&u(y-1),T=y>0&&c(y-1),w=y>0&&d(y-1),j=y>0&&f(y-1),I=o(y),$=l(y),N=u(y),x=c(y),F=d(y),M=f(y),v=[];I&&!p&&v.push({reason:Bt.Shift,index:y}),$&&!b&&v.push({reason:Bt.Shift,index:y}),N&&!C&&v.push({reason:Bt.Trend,index:y}),x&&!T&&v.push({reason:Bt.Trend,index:y}),F&&!w&&v.push({reason:Bt.Point,index:y}),M&&!j&&v.push({reason:Bt.Point,index:y});for(const L of v){if(L.index-g<r)continue;const P=Math.max(0,L.index-n),S=L.index-1;if(S-P+1<n)continue;const D=L.index,B=L.index+n-1;if(B>=e.length)continue;const Q=e.slice(P,S+1).map(k=>k.value).filter(k=>typeof k=="number"&&Number.isFinite(k)),U=e.slice(D,B+1).map(k=>k.value).filter(k=>typeof k=="number"&&Number.isFinite(k));if(Q.length<n||U.length<n)continue;const H=e[L.index];let V=null;if(typeof H.upperProcessLimit=="number"&&typeof H.mean=="number"){const k=H.upperProcessLimit-H.mean;k>0&&(V=k/3)}if(!V||V<=0)continue;const O=Xt(Q),se=Xt(U),z=se-O;if(Math.abs(z)<a*V)continue;const ve=e.slice(D,B+1).filter(k=>k.variationIcon===Te.Concern).length;if(ve>1)continue;const ue=k=>{const R=Xt(k);return k.length?k.reduce((W,ee)=>W+(ee-R)*(ee-R),0)/k.length:0},he=ue(Q),te=ue(U);let re=L.reason===Bt.Shift?90:L.reason===Bt.Trend?70:60;if(te<he&&(re+=10),re-=ve*15,re<i)continue;const fe=m.find(k=>k.index===L.index);if(fe){const k=R=>R===Bt.Shift?3:R===Bt.Trend?2:1;(k(L.reason)>k(fe.reason)||re>fe.score)&&(fe.reason=L.reason,fe.score=re,fe.deltaMean=z,fe.oldMean=O,fe.newMean=se,fe.window=[D,B])}else m.push({index:L.index,reason:L.reason,score:re,deltaMean:z,oldMean:O,newMean:se,window:[D,B]})}}return m.sort((y,h)=>y.index-h.index),m}function No(){const e=globalThis;if(typeof e.__SPC_PHASE4_STRICT<"u")return!!e.__SPC_PHASE4_STRICT;if(typeof process<"u"){const t=process?.env?.SPC_PHASE4_STRICT;if(typeof t<"u"){const n=String(t).toLowerCase();if(n==="1"||n==="true")return!0;if(n==="0"||n==="false")return!1}}return!0}var Mn=(e=>(e.Info="info",e.Warning="warning",e.Error="error",e))(Mn||{}),Ud=(e=>(e.Config="config",e.Data="data",e.Limits="limits",e.SpecialCause="special_cause",e.Baseline="baseline",e.Logic="logic",e.Target="target",e.Ghost="ghost",e.Partition="partition",e))(Ud||{}),Gd=(e=>(e.UnknownChartType="unknown_chart_type",e.InsufficientPointsGlobal="insufficient_points_global",e.VariationConflictRow="variation_conflict_row",e.NullValuesExcluded="null_values_excluded",e.TargetIgnoredRareEvent="target_ignored_rare_event",e.GhostRowsRareEvent="ghost_rows_rare_event",e.InsufficientPointsPartition="insufficient_points_partition",e.BaselineWithSpecialCause="baseline_with_special_cause",e.PartitionCapApplied="partition_cap_applied",e.GlobalCapApplied="global_cap_applied",e))(Gd||{});function wv(e){const t=[],n=[];e.specialCauseSinglePointUp&&t.push(pt.SinglePoint),e.specialCauseSinglePointDown&&n.push(pt.SinglePoint),e.specialCauseTwoOfThreeUp&&t.push(pt.TwoSigma),e.specialCauseTwoOfThreeDown&&n.push(pt.TwoSigma),e.specialCauseShiftUp&&t.push(pt.Shift),e.specialCauseShiftDown&&n.push(pt.Shift),e.specialCauseTrendUp&&t.push(pt.Trend),e.specialCauseTrendDown&&n.push(pt.Trend);const r=t.reduce((i,o)=>Math.max(i,ki[o].rank),0),a=n.reduce((i,o)=>Math.max(i,ki[o].rank),0);return{upRules:t,downRules:n,upMax:r,downMax:a,hasUp:t.length>0,hasDown:n.length>0}}function Sv(e){const t=[];let n=[];for(const r of e)r.baseline&&n.length&&(t.push(n),n=[]),n.push(r);return n.length&&t.push(n),t}function kv(e,t,n){const r=t.autoRecalculateShiftLength||t.specialCauseShiftPoints||6;if(e.length<r*2)return;const a=e.map((d,f)=>({idx:f,value:d.value})).filter(d=>we(d.value));if(a.length<r*2)return;const i=n===je.Up||n===je.Neither,o=n===je.Down;function l(d,f){const m=a.slice(d,f).map(g=>g.value);return m.length?Xt(m):NaN}let u=null;if(a.length>1){const d=[];for(let m=1;m<a.length;m++)d.push(Math.abs(a[m].value-a[m-1].value));const f=Xt(d);we(f)&&f>0&&(u=f*(2.66/3))}if(!u||u<=0)return;const c=t.autoRecalculateDeltaSigma??.5;for(let d=r;d<=a.length-r;d++){const f=d-r,m=l(f,d),g=l(d,d+r);if(!we(m)||!we(g))continue;const h=(g-m)/u;if(!(i?h>=c:o?-h>=c:Math.abs(h)>=c))continue;const b=a.slice(d,d+r).map(w=>w.value);if(!(i?b.every(w=>w>m):o?b.every(w=>w<m):b.every(w=>i?w>m:w<m)))continue;const T=a[d].idx;e[T].baseline||(e[T].baseline=!0);return}}function Vd(e){if(!e)return{};const t=e,n=e,r=n.rules??{},a=n.precedence??{},i=n.thresholds??{},o=n.warnings??{},l=n.rareEvent??{},u=n.capability??{},c=n.grace??{},d=n.baselineSuggest??{},f=n.autoRecalc??{},m=c.emergingEnabled??n.emergingGraceEnabled??t.emergingGraceEnabled??t.emergingDirectionGrace,g=r.collapseWeakerClusterRules??n.collapseWeakerClusterRules??t.collapseWeakerClusterRules??t.collapseClusterRules;if(No()){if(t.emergingDirectionGrace!==void 0)throw new Error("[spc][phase4] emergingDirectionGrace is no longer supported. Use settings.grace.emergingEnabled.");if(t.collapseClusterRules!==void 0)throw new Error("[spc][phase4] collapseClusterRules is no longer supported. Use settings.rules.collapseWeakerClusterRules.")}const y=globalThis;!No()&&t.emergingDirectionGrace!==void 0&&n.emergingGraceEnabled===void 0&&c.emergingEnabled===void 0&&!y.__spc_warn_emergingDirectionGrace&&(y.__spc_warn_emergingDirectionGrace=!0,console.warn("[spc] emergingDirectionGrace is deprecated; use grace.emergingEnabled")),!No()&&t.collapseClusterRules!==void 0&&r.collapseWeakerClusterRules===void 0&&n.collapseWeakerClusterRules===void 0&&!y.__spc_warn_collapseClusterRules&&(y.__spc_warn_collapseClusterRules=!0,console.warn("[spc] collapseClusterRules is deprecated; use rules.collapseWeakerClusterRules"));const h=C=>{const T={};for(const w of Object.keys(C)){const j=C[w];j!==void 0&&(T[w]=j)}return T},p=h({excludeMovingRangeOutliers:l.excludeMovingRangeOutliers??t.excludeMovingRangeOutliers,specialCauseShiftPoints:r.shiftPoints??t.specialCauseShiftPoints,specialCauseTrendPoints:r.trendPoints??t.specialCauseTrendPoints,enableFourOfFiveRule:r.fourOfFiveEnabled??t.enableFourOfFiveRule,enableFifteenInInnerThirdRule:r.fifteenInnerThirdEnabled??t.enableFifteenInInnerThirdRule,collapseWeakerClusterRules:g??t.collapseWeakerClusterRules,precedenceStrategy:a.strategy??t.precedenceStrategy,conflictPrecedenceMode:a.conflictMode??t.conflictPrecedenceMode,minimumPoints:i.minimumPoints??t.minimumPoints,minimumPointsPartition:i.minimumPointsPartition??t.minimumPointsPartition,maximumPointsPartition:i.maximumPointsPartition??t.maximumPointsPartition,maximumPoints:i.maximumPoints??t.maximumPoints,transitionBufferPoints:i.transitionBufferPoints??t.transitionBufferPoints,minimumPointsWarning:o.minimumPointsWarning??t.minimumPointsWarning,pointConflictWarning:o.pointConflictWarning??t.pointConflictWarning,variationIconConflictWarning:o.variationIconConflictWarning??t.variationIconConflictWarning,nullValueWarning:o.nullValueWarning??t.nullValueWarning,targetSuppressedWarning:o.targetSuppressedWarning??t.targetSuppressedWarning,ghostOnRareEventWarning:o.ghostOnRareEventWarning??t.ghostOnRareEventWarning,partitionSizeWarnings:o.partitionSizeWarnings??t.partitionSizeWarnings,baselineSpecialCauseWarning:o.baselineSpecialCauseWarning??t.baselineSpecialCauseWarning,maximumPointsWarnings:o.maximumPointsWarnings??t.maximumPointsWarnings,assuranceCapabilityMode:u.assuranceCapabilityMode??t.assuranceCapabilityMode,emergingGraceEnabled:m,emergingDirectionGrace:m,baselineSuggest:d.enabled??t.baselineSuggest,baselineSuggestMinDeltaSigma:d.minDeltaSigma??t.baselineSuggestMinDeltaSigma,baselineSuggestStabilityPoints:d.stabilityPoints??t.baselineSuggestStabilityPoints,baselineSuggestMinGap:d.minGap??t.baselineSuggestMinGap,baselineSuggestScoreThreshold:d.scoreThreshold??t.baselineSuggestScoreThreshold,autoRecalculateAfterShift:f.enabled??t.autoRecalculateAfterShift,autoRecalculateShiftLength:f.shiftLength??t.autoRecalculateShiftLength,autoRecalculateDeltaSigma:f.deltaSigma??t.autoRecalculateDeltaSigma}),b={...p,...h(t)};if(m!==void 0&&(b.emergingGraceEnabled=m,b.grace={...b.grace,emergingEnabled:m}),p.collapseWeakerClusterRules!==void 0){const C=p.collapseWeakerClusterRules;b.collapseWeakerClusterRules=C,b.rules={...b.rules,collapseWeakerClusterRules:C}}return h(b)}function jo(e){const{chartType:t,metricImprovement:n,data:r,settings:a={}}=e,i=Vd(a),o={excludeMovingRangeOutliers:!1,specialCauseShiftPoints:6,specialCauseTrendPoints:6,enableFourOfFiveRule:!1,minimumPoints:13,minimumPointsWarning:!1,minimumPointsPartition:12,maximumPointsPartition:null,maximumPoints:null,variationIconConflictWarning:!0,nullValueWarning:!0,targetSuppressedWarning:!0,ghostOnRareEventWarning:!0,partitionSizeWarnings:!0,baselineSpecialCauseWarning:!0,maximumPointsWarnings:!0,assuranceCapabilityMode:!0,baselineSuggest:!1,baselineSuggestMinDeltaSigma:.5,baselineSuggestStabilityPoints:5,baselineSuggestMinGap:12,baselineSuggestScoreThreshold:50,precedenceStrategy:Ci.DirectionalFirst,emergingDirectionGrace:!1,rules:{},grace:{},...i};if(!Array.isArray(r))throw new Error("data must be an array of rows");const l=r.map((p,b)=>({rowId:b+1,x:p.x,value:we(p.value)?p.value:null,ghost:!!p.ghost,baseline:!!p.baseline,target:we(p.target)?p.target:null}));if(i?.autoRecalculateAfterShift)try{kv(l,i,n)}catch{}const u=Sv(l),c=[],d=[],m=l.filter(p=>!p.ghost&&we(p.value)).length>=(o.minimumPoints??13);let g=0;const y={};for(const p of u){g++;const b=p.map(v=>v.value),C=p.map(v=>v.ghost);let T=new Array(b.length).fill(null),w=NaN,j=NaN,I=NaN,$={upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};if(t==="XmR"){T=zd(b,C);const v=b.filter((P,S)=>!C[S]&&we(P));w=v.length?Xt(v):NaN;const L=Wd(T,!!o.excludeMovingRangeOutliers);j=L.mrMean,I=L.mrUcl,$=hv(w,j)}else if(t==="T"){const v=yv(b,C,!!o.excludeMovingRangeOutliers);T=v.mr,j=v.mrMean??NaN,I=v.mrUcl??NaN,w=v.center??NaN,$={upperProcessLimit:v.upperProcessLimit,lowerProcessLimit:v.lowerProcessLimit,upperTwoSigma:v.upperTwoSigma,lowerTwoSigma:v.lowerTwoSigma,upperOneSigma:v.upperOneSigma,lowerOneSigma:v.lowerOneSigma}}else if(t==="G"){const v=b.filter((S,D)=>!C[D]&&we(S)),L=v.length?Xt(v):NaN,P=bv(L);w=P.cl??NaN,$={upperProcessLimit:P.ucl,lowerProcessLimit:P.lcl,upperTwoSigma:P.twoHigh,lowerTwoSigma:P.twoLow,upperOneSigma:P.oneHigh,lowerOneSigma:P.oneLow},T=new Array(b.length).fill(null),j=NaN,I=NaN}else d.push({code:"unknown_chart_type",category:"config",severity:"error",message:`Unknown ChartType '${t}' â€“ supported: XmR, T, G.`,context:{chartType:t}});const N=p.map((v,L)=>{const P=!v.ghost&&we(v.value)?b.slice(0,L+1).filter((Q,U)=>!C[U]&&we(Q)).length:0,S=m,D=S?$:{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};return{rowId:v.rowId,x:v.x,value:we(v.value)?v.value:null,ghost:v.ghost,partitionId:g,pointRank:P,mean:S&&we(w)?w:null,mr:we(T[L])?T[L]:null,mrMean:S&&we(j)?j:null,mrUcl:S&&we(I)?I:null,upperProcessLimit:we(D.upperProcessLimit)?D.upperProcessLimit:null,lowerProcessLimit:we(D.lowerProcessLimit)?D.lowerProcessLimit:null,upperTwoSigma:we(D.upperTwoSigma)?D.upperTwoSigma:null,lowerTwoSigma:we(D.lowerTwoSigma)?D.lowerTwoSigma:null,upperOneSigma:we(D.upperOneSigma)?D.upperOneSigma:null,lowerOneSigma:we(D.lowerOneSigma)?D.lowerOneSigma:null,target:we(v.target)?v.target:null,specialCauseFifteenInnerThird:!1,specialCauseSinglePointUp:!1,specialCauseSinglePointDown:!1,specialCauseTwoOfThreeUp:!1,specialCauseTwoOfThreeDown:!1,specialCauseFourOfFiveUp:!1,specialCauseFourOfFiveDown:!1,specialCauseShiftUp:!1,specialCauseShiftDown:!1,specialCauseTrendUp:!1,specialCauseTrendDown:!1,variationIcon:Te.Suppressed,assuranceIcon:qe.None,upperBaseline:S&&we(w)?w:null,lowerBaseline:S&&we(w)?w:null,movingRangeHighPointValue:S&&we(I)?I:null,ghostValue:v.ghost&&we(v.value)?v.value:null,ghostFlag:!!v.ghost,specialCauseImprovementValue:null,specialCauseConcernValue:null,specialCauseNeitherValue:null,ruleTags:[]}});y[g]=N.filter(v=>!v.ghost&&we(v.value)).length;const x=o.specialCauseShiftPoints??6,F=o.specialCauseTrendPoints??6,M=[];for(let v=0;v<N.length;v++){const L=N[v],P=L.value;if(!L.ghost&&we(P)&&M.push(v),!(we(L.mean)&&we(L.upperProcessLimit)&&we(L.lowerProcessLimit))||L.ghost||!we(P)){c.push(L);continue}L.specialCauseSinglePointUp=we(L.upperProcessLimit)?P>L.upperProcessLimit:!1,L.specialCauseSinglePointDown=we(L.lowerProcessLimit)?P<L.lowerProcessLimit:!1,c.push(L)}if(M.length){const v=S=>N[S];let L=[],P=[];for(const S of M){const D=v(S);if(!we(D.mean)||!we(D.value)){L=[],P=[];continue}if(D.value>D.mean?(L.push(S),P=[]):D.value<D.mean?(P.push(S),L=[]):(L=[],P=[]),L.length>=x)for(const B of L){const Q=v(B);Q.specialCauseShiftUp=!0}if(P.length>=x)for(const B of P){const Q=v(B);Q.specialCauseShiftDown=!0}}for(let S=0;S<=M.length-3;S++){const B=M.slice(S,S+3).map(v);if(!B.every(ue=>we(ue.mean)&&we(ue.value)))continue;const Q=B[0].mean,U=B.every(ue=>ue.value>Q),H=B.every(ue=>ue.value<Q);if(!U&&!H)continue;const V=B[0].upperTwoSigma??1/0,O=B[0].lowerTwoSigma??-1/0,se=B[0].upperProcessLimit??1/0,z=B[0].lowerProcessLimit??-1/0,pe=B.filter(ue=>ue.value>V&&ue.value<=se),ve=B.filter(ue=>ue.value<O&&ue.value>=z);if(U&&pe.length>=2)for(const ue of pe)ue.specialCauseTwoOfThreeUp=!0;if(H&&ve.length>=2)for(const ue of ve)ue.specialCauseTwoOfThreeDown=!0}if(o.enableFourOfFiveRule)for(let S=0;S<=M.length-5;S++){const B=M.slice(S,S+5).map(v);if(!B.every(se=>we(se.mean)&&we(se.value)))continue;const Q=B[0].mean;if(!B.every(se=>se.value>Q)&&!B.every(se=>se.value<Q))continue;const U=B[0].upperOneSigma??1/0,H=B[0].lowerOneSigma??-1/0,V=B.filter(se=>se.value>U),O=B.filter(se=>se.value<H);if(B.every(se=>se.value>Q)&&V.length>=4)for(const se of V)se.specialCauseFourOfFiveUp=!0;if(B.every(se=>se.value<Q)&&O.length>=4)for(const se of O)se.specialCauseFourOfFiveDown=!0}for(let S=0;S<=M.length-F;S++){const D=M.slice(S,S+F),B=D.map(v);if(!B.every(H=>we(H.value)))continue;let Q=!0,U=!0;for(let H=1;H<B.length&&(B[H].value>B[H-1].value||(Q=!1),B[H].value<B[H-1].value||(U=!1),!(!Q&&!U));H++);if(Q)for(const H of D){const V=v(H);V.specialCauseTrendUp=!0}if(U)for(const H of D){const V=v(H);V.specialCauseTrendDown=!0}}if(o.enableFifteenInInnerThirdRule){let S=[];for(const D of M){const B=v(D);if(!we(B.value)||!we(B.mean)||!we(B.upperOneSigma)||!we(B.lowerOneSigma)){S=[];continue}if(!(B.value<B.upperOneSigma&&B.value>B.lowerOneSigma)){S=[];continue}if(S.push(D),S.length>=15){const U=S.map(v),H=U.some(O=>O.value>O.mean),V=U.some(O=>O.value<O.mean);if(H&&V)for(const O of S)v(O).specialCauseFifteenInnerThird=!0}}}}if(o.maximumPointsPartition&&Number.isFinite(o.maximumPointsPartition)){const v=o.maximumPointsPartition;let L=0;for(const P of c.filter(S=>S.partitionId===g))!P.ghost&&we(P.value)&&L++,L>v&&(P.mean=P.upperProcessLimit=P.lowerProcessLimit=null,P.upperTwoSigma=P.lowerTwoSigma=P.upperOneSigma=P.lowerOneSigma=null)}}for(const p of c){if(p.ruleTags&&p.ruleTags.length)continue;const b=[];p.specialCauseShiftUp&&b.push(bt.ShiftHigh),p.specialCauseShiftDown&&b.push(bt.ShiftLow),p.specialCauseTrendUp&&b.push(bt.TrendIncreasing),p.specialCauseTrendDown&&b.push(bt.TrendDecreasing),p.specialCauseSinglePointUp&&b.push(bt.SinglePointAbove),p.specialCauseSinglePointDown&&b.push(bt.SinglePointBelow),p.specialCauseTwoOfThreeUp&&b.push(bt.TwoOfThreeAbove),p.specialCauseTwoOfThreeDown&&b.push(bt.TwoOfThreeBelow),p.specialCauseFourOfFiveUp&&b.push(bt.FourOfFiveAbove),p.specialCauseFourOfFiveDown&&b.push(bt.FourOfFiveBelow),p.specialCauseFifteenInnerThird&&b.push(bt.FifteenInnerThird),b.length&&(p.ruleTags=b)}for(let p=0;p<c.length;p++){const b=c[p];if(Object.prototype.hasOwnProperty.call(b,Qr.ImprovementValueBeforePruning)||Object.defineProperty(b,Qr.ImprovementValueBeforePruning,{get(){return b.originalSpecialCauseImprovementValue??null},enumerable:!1,configurable:!0}),Object.prototype.hasOwnProperty.call(b,Qr.ConcernValueBeforePruning)||Object.defineProperty(b,Qr.ConcernValueBeforePruning,{get(){return b.originalSpecialCauseConcernValue??null},enumerable:!1,configurable:!0}),b.ghost||!we(b.value)||b.mean===null){b.variationIcon=Te.Suppressed;continue}const C=b.value>b.mean,T=b.value<b.mean;o.rules?.collapseWeakerClusterRules&&(b.specialCauseTwoOfThreeUp&&b.specialCauseFourOfFiveUp&&(b.specialCauseTwoOfThreeUp=!1),b.specialCauseTwoOfThreeDown&&b.specialCauseFourOfFiveDown&&(b.specialCauseTwoOfThreeDown=!1));const w=b.specialCauseTrendUp&&C,j=b.specialCauseTrendDown&&T,I=b.specialCauseSinglePointUp||b.specialCauseTwoOfThreeUp||o.enableFourOfFiveRule&&b.specialCauseFourOfFiveUp||b.specialCauseShiftUp||w,$=b.specialCauseSinglePointDown||b.specialCauseTwoOfThreeDown||o.enableFourOfFiveRule&&b.specialCauseFourOfFiveDown||b.specialCauseShiftDown||j;let N=!1;if(o.precedenceStrategy===Ci.DirectionalFirst&&(o.grace?.emergingEnabled||o.emergingGraceEnabled||o.emergingDirectionGrace)){const F=o.specialCauseTrendPoints||6;if(F>1&&!(b.specialCauseTrendUp||b.specialCauseTrendDown)){const M=F-1,v=[];for(let L=p;L>=0&&v.length<M;L--){const P=c[L];!P.ghost&&we(P.value)&&P.mean!==null&&v.unshift(P)}if(v.length===M){let L=!0;for(let P=1;P<v.length&&L;P++)n===je.Up?v[P].value>v[P-1].value||(L=!1):n===je.Down&&v[P].value<v[P-1].value||(L=!1);N=L}}}if(o.precedenceStrategy===Ci.DirectionalFirst){const M=n===je.Up?I:n===je.Down?$:!1,v=n===je.Up?$:n===je.Down?I:!1;M&&!v?b.variationIcon=Te.Improvement:v&&!M?b.variationIcon=N?Te.Neither:Te.Concern:M&&v?b.variationIcon=N||b.specialCauseTrendUp||b.specialCauseTrendDown?Te.Improvement:Te.Neither:b.variationIcon=Te.Neither}else n===je.Up?b.variationIcon=I?Te.Improvement:$?Te.Concern:Te.Neither:n===je.Down?b.variationIcon=$?Te.Improvement:I?Te.Concern:Te.Neither:b.variationIcon=Te.Neither;const x=I||$;if(b.specialCauseImprovementValue=x&&b.variationIcon===Te.Improvement?b.value:null,b.specialCauseConcernValue=x&&b.variationIcon===Te.Concern?b.value:null,b.specialCauseNeitherValue=x&&b.variationIcon===Te.Neither?b.value:null,o.conflictPrecedenceMode===Ld.SqlRankingV26a&&b.specialCauseImprovementValue!==null&&b.specialCauseConcernValue!==null){const F=[];b.specialCauseSinglePointUp&&F.push({id:pt.SinglePoint,rank:1,side:rt.Up}),b.specialCauseSinglePointDown&&F.push({id:pt.SinglePoint,rank:1,side:rt.Down}),b.specialCauseTwoOfThreeUp&&F.push({id:pt.TwoSigma,rank:2,side:rt.Up}),b.specialCauseTwoOfThreeDown&&F.push({id:pt.TwoSigma,rank:2,side:rt.Down}),b.specialCauseShiftUp&&F.push({id:pt.Shift,rank:3,side:rt.Up}),b.specialCauseShiftDown&&F.push({id:pt.Shift,rank:3,side:rt.Down}),b.specialCauseTrendUp&&F.push({id:pt.Trend,rank:4,side:rt.Up}),b.specialCauseTrendDown&&F.push({id:pt.Trend,rank:4,side:rt.Down});const M=F.filter(U=>U.side===rt.Up).reduce((U,H)=>Math.max(U,H.rank),0),v=F.filter(U=>U.side===rt.Down).reduce((U,H)=>Math.max(U,H.rank),0);let L;M>v?L=Wt.Upwards:v>M?L=Wt.Downwards:L=Wt.Same;const P=b.specialCauseImprovementValue,S=b.specialCauseConcernValue;L===Wt.Upwards?n===je.Up?b.specialCauseConcernValue=null:n===je.Down&&(b.specialCauseImprovementValue=null):L===Wt.Downwards?n===je.Up?b.specialCauseImprovementValue=null:n===je.Down&&(b.specialCauseConcernValue=null):b.variationIcon===Te.Improvement?b.specialCauseConcernValue=null:b.variationIcon===Te.Concern?b.specialCauseImprovementValue=null:b.specialCauseConcernValue=null,b.specialCauseImprovementValue!==null&&b.specialCauseConcernValue===null?b.variationIcon=Te.Improvement:b.specialCauseConcernValue!==null&&b.specialCauseImprovementValue===null?b.variationIcon=Te.Concern:b.specialCauseImprovementValue===null&&b.specialCauseConcernValue===null&&(b.variationIcon=Te.Neither);const D=b.specialCauseImprovementValue!==null?rt.Up:b.specialCauseConcernValue!==null?rt.Down:void 0,B=D===rt.Up?M:D===rt.Down?v:Math.max(M,v),Q=F.find(U=>U.rank===B&&(!D||U.side===D));b.conflictPrimeDirection=L,b.conflictResolved=!0,b.conflictResolvedRank=B||void 0,Q&&(b.conflictResolvedByRuleId=Q.id),b.pruningMode=wo.Conflict,b.originalSpecialCauseImprovementValue=P,b.originalSpecialCauseConcernValue=S}{const F=l[b.rowId-1],M=xv({metricImprovement:n,capabilityMode:o.assuranceCapabilityMode,value:b.value,mean:b.mean,upperProcessLimit:b.upperProcessLimit,lowerProcessLimit:b.lowerProcessLimit,target:we(F?.target)?F.target:null});b.assuranceIcon=M}}if((o.minimumPointsWarning??!1)&&!m){const p=l.filter(b=>!b.ghost&&we(b.value)).length;d.push({code:"insufficient_points_global",category:"data",severity:"warning",message:`Only ${p} non-ghost points available; minimum required is ${o.minimumPoints}. Limits and icons suppressed.`,context:{available:p,minimumRequired:o.minimumPoints}})}if(o.variationIconConflictWarning)for(const p of c)p.variationIcon===Te.Improvement&&(p.specialCauseSinglePointUp||p.specialCauseTwoOfThreeUp||o.enableFourOfFiveRule&&p.specialCauseFourOfFiveUp||p.specialCauseShiftUp||p.specialCauseTrendUp)&&(p.specialCauseSinglePointDown||p.specialCauseTwoOfThreeDown||o.enableFourOfFiveRule&&p.specialCauseFourOfFiveDown||p.specialCauseShiftDown||p.specialCauseTrendDown)&&d.push({code:"variation_conflict_row",category:"logic",severity:"warning",message:`Row ${p.rowId}: simultaneous high/low special-cause signals â€“ variation icon may be ambiguous.`,context:{rowId:p.rowId}});if(o.maximumPoints&&Number.isFinite(o.maximumPoints)){const p=o.maximumPoints;let b=0;for(const C of c)!C.ghost&&we(C.value)&&b++,b>p&&(C.mean=C.upperProcessLimit=C.lowerProcessLimit=null,C.upperTwoSigma=C.lowerTwoSigma=C.upperOneSigma=C.lowerOneSigma=null)}if(o.nullValueWarning&&(t===yn.XmR||t===yn.G)){const p=l.filter(b=>!b.ghost&&(b.value===null||b.value===void 0||!we(b.value))).length;p&&d.push({code:"null_values_excluded",category:"data",severity:"info",message:`${p} null/missing value(s) excluded from calculations.`,context:{nullCount:p}})}if(o.targetSuppressedWarning&&(t===yn.T||t===yn.G)&&l.some(b=>we(b.target))&&d.push({code:"target_ignored_rare_event",category:"target",severity:"info",message:`Targets provided are ignored for ${t} charts in this port.`,context:{chartType:t}}),o.ghostOnRareEventWarning&&(t===yn.T||t===yn.G)){const p=l.filter(b=>b.ghost).length;p&&d.push({code:"ghost_rows_rare_event",category:"ghost",severity:"info",message:`${p} ghost row(s) supplied for rare-event chart (${t}); verify intent.`,context:{chartType:t,ghostCount:p}})}if(o.partitionSizeWarnings&&Object.entries(y).forEach(([p,b])=>{b<o.minimumPointsPartition&&d.push({code:"insufficient_points_partition",category:"partition",severity:"warning",message:`Partition ${p} has only ${b} non-ghost point(s); below recommended ${o.minimumPointsPartition}.`,context:{partitionId:Number(p),count:b,minimum:o.minimumPointsPartition}})}),o.baselineSpecialCauseWarning){const p=[];c.forEach(b=>{l[b.rowId-1].baseline&&(b.specialCauseSinglePointUp||b.specialCauseSinglePointDown||b.specialCauseTwoOfThreeUp||b.specialCauseTwoOfThreeDown||b.specialCauseFourOfFiveUp||b.specialCauseFourOfFiveDown||b.specialCauseShiftUp||b.specialCauseShiftDown||b.specialCauseTrendUp||b.specialCauseTrendDown)&&p.push(b.rowId)}),p.length&&d.push({code:"baseline_with_special_cause",category:"baseline",severity:"warning",message:`Baseline set with special-cause present at row(s): ${p.join(", ")}.`,context:{rows:p}})}o.maximumPointsWarnings&&(o.maximumPointsPartition&&Number.isFinite(o.maximumPointsPartition)&&d.push({code:"partition_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after ${o.maximumPointsPartition} non-ghost points per partition.`,context:{cap:o.maximumPointsPartition}}),o.maximumPoints&&Number.isFinite(o.maximumPoints)&&d.push({code:"global_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after global cap of ${o.maximumPoints} non-ghost points.`,context:{cap:o.maximumPoints}}));let h;if(o.baselineSuggest){const p=o.baselineSuggestStabilityPoints,b=o.baselineSuggestMinGap,C=o.baselineSuggestMinDeltaSigma,T=o.baselineSuggestScoreThreshold;h=vv(c.map(j=>({value:j.value,partitionId:j.partitionId,variationIcon:j.variationIcon,mean:j.mean,upperProcessLimit:j.upperProcessLimit})),{W:p,minGap:b,minDeltaSigma:C,scoreThreshold:T,isShiftUpAt:j=>!!c[j].specialCauseShiftUp,isShiftDownAt:j=>!!c[j].specialCauseShiftDown,isTrendUpAt:j=>!!c[j].specialCauseTrendUp,isTrendDownAt:j=>!!c[j].specialCauseTrendDown,isSingleUpAt:j=>!!c[j].specialCauseSinglePointUp,isSingleDownAt:j=>!!c[j].specialCauseSinglePointDown}).map(j=>({index:j.index,reason:j.reason,score:j.score,deltaMean:j.deltaMean,oldMean:j.oldMean,newMean:j.newMean,window:j.window}))}return{rows:c,warnings:d,...h?{suggestedBaselines:h}:{}}}function Cv(e,t){const n=wv(e),r=n.upMax,a=n.downMax,i=n.upRules.map(h=>({id:h,rank:Fd[h]})),o=n.downRules.map(h=>({id:h,rank:Fd[h]}));let l;r>a?l=Wt.Upwards:a>r?l=Wt.Downwards:l=Wt.Same;const u=r>0,c=a>0,d=t===je.Up&&u||t===je.Down&&c?e.value:null,f=t===je.Up&&c||t===je.Down&&u?e.value:null;e.sqlOriginalImprovementValue=d,e.sqlOriginalConcernValue=f,d!==null&&f!==null&&(e.sqlPruned=!0,l===Wt.Upwards?t===je.Up||t===je.Down&&(e.sqlOriginalImprovementValue=null):l===Wt.Downwards?t===je.Up?e.sqlOriginalImprovementValue=null:je.Down:d!==null?e.sqlOriginalConcernValue=null:f!==null&&(e.sqlOriginalImprovementValue=null)),e.sqlOriginalImprovementValue&&!e.sqlOriginalConcernValue?e.variationIcon=Te.Improvement:!e.sqlOriginalImprovementValue&&e.sqlOriginalConcernValue?e.variationIcon=Te.Concern:!e.sqlOriginalImprovementValue&&!e.sqlOriginalConcernValue?e.variationIcon=Te.Neither:e.variationIcon=Te.Improvement,e.primeDirection=l,e.primeRank=Math.max(r,a)||void 0,e.pruningMode=wo.Sql;const y=((e.variationIcon===Te.Concern?t===je.Up?rt.Down:rt.Up:t===je.Up?rt.Up:rt.Down)===rt.Up?i:o).reduce((h,p)=>!h||p.rank>h.rank?p:h,void 0);y&&(e.primeRuleId=y.id)}function Tv(e){const{chartType:t,metricImprovement:n,data:r,settings:a={}}=e,i=jo({chartType:t,metricImprovement:n,data:r,settings:{...a}}),o=i.rows.map(l=>({...l}));for(const l of o)Cv(l,n);return{rows:o,warnings:i.warnings}}const Nv=({engineRows:e,measureName:t,measureUnit:n,onSignalFocus:r})=>{const a=bn(),i=a?.focused??null,o=i?.index??null,l=typeof o=="number"&&e?e[o]:null,u=X.useMemo(()=>l?Ti(l):[],[l]),c=X.useMemo(()=>Array.from(new Set(u.map(h=>br[h]?.narration).filter(Boolean))),[u]),d=l?Ni(l.variationIcon):null,f=l?Bd(l.assuranceIcon):null,m=u.length>0,g=l?l.variationIcon===Te.Neither&&m:!1,y=X.useRef(null);return X.useEffect(()=>{if(!r||!i||l==null)return;const h=`${i.seriesId}:${i.index}`;if(y.current!==h){y.current=h;try{r({index:i.index,x:i.x,y:i.y,row:l,rules:u})}catch{}}},[i?.seriesId,i?.index,i?.x,i?.y,l,u,r]),s.jsxs("div",{className:"fdp-spc-inspector",role:"region","aria-label":"Signals inspector","data-testid":"spc-signals-inspector",children:[s.jsxs("div",{className:"fdp-spc-inspector__header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx("strong",{children:"Signals inspector"}),s.jsx("div",{className:"fdp-spc-inspector__nav","aria-hidden":!a,children:a&&s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{a.focused?a.focusPrevPoint():a.focusFirstPoint()},"aria-label":"Previous point",children:"â—€"}),s.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{a.focused?a.focusNextPoint():a.focusFirstPoint()},"aria-label":"Next point",children:"â–¶"})]})})]}),!l||!i?s.jsx("p",{className:"fdp-spc-inspector__empty",children:"No point selected."}):s.jsxs("div",{className:"fdp-spc-inspector__body",children:[s.jsxs("div",{className:"fdp-spc-inspector__summary",style:{display:"flex",gap:16,flexWrap:"wrap"},children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Point:"})," ",i.index+1]}),s.jsxs("span",{children:[s.jsx("strong",{children:"Value:"})," ",i.y,n?` ${n}`:"",t?` ${t}`:""]})]}),(d||g||f)&&s.jsx("div",{className:"fdp-spc-inspector__signals",style:{marginTop:8},children:s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[d?.toLowerCase().includes("concern")?s.jsx(Ae,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):d?.toLowerCase().includes("improvement")?s.jsx(Ae,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):g?s.jsx(Ae,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):d?s.jsx(Ae,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null,f&&(()=>{const h=f.toLowerCase(),b=!(h.includes("not met")||h.includes("not achieved"))&&/^|\b(met|achieved)\b|$/.test(h);return s.jsx(Ae,{text:f,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${b?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${f}`})})()]})}),s.jsxs("div",{className:"fdp-spc-inspector__rules",style:{marginTop:8},children:[s.jsx("strong",{children:"Special cause:"}),s.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:4},children:u.length===0?s.jsx("span",{children:" None"}):u.map(h=>{const p=String(h),C=p===bt.TrendIncreasing||p===bt.TrendDecreasing?"fdp-spc-tag--trend":g?"fdp-spc-tag--no-judgement":d?d.toLowerCase().includes("concern")?"fdp-spc-tag--concern":d.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",T=br[h]?.tooltip||p;return s.jsx(Ae,{text:T,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${C}`,"data-rule-id":p,title:br[h]?.tooltip},p)})})]}),c.length>0&&s.jsxs("div",{className:"fdp-spc-inspector__narration",style:{marginTop:8},children:[s.jsx("strong",{children:"Summary:"})," ",c.join("; ")]})]})]})};let jv=0;const Yd=({data:e,ariaLabel:t="SPC chart",height:n=260,showZones:r=!0,showPoints:a=!0,announceFocus:i=!1,className:o,unit:l,highlightOutOfControl:u=!0,chartType:c=yn.XmR,metricImprovement:d=je.Neither,enableRules:f=!0,showIcons:m=!1,showEmbeddedIcon:g=!0,embeddedIconVariant:y=qn.Classic,embeddedIconRunLength:h,targets:p,baselines:b,ghosts:C,settings:T,narrationContext:w,gradientSequences:j=!1,sequenceTransition:I="slope",processLineWidth:$=2,showWarningsPanel:N=!1,warningsFilter:x,enableNeutralNoJudgement:F=!0,showTrendGatingExplanation:M=!0,trendVisualMode:v="ungated",disableTrendSideGating:L,source:P,alwaysShowZeroY:S=!1,alwaysShowHundredY:D=!1,percentScale:B=!1,useSqlCompatEngine:Q=!1,showTrendStartMarkers:U=!1,showFirstFavourableCrossMarkers:H=!1,showTrendBridgeOverlay:V=!1,showSignalsInspector:O=!1,onSignalFocus:se})=>{const z=X.useCallback(Z=>String(Z).replace(/^spc_warning_code\.?/i,"").replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(oe=>oe.length?oe[0].toUpperCase()+oe.slice(1):oe).join(" "),[]),pe=X.useCallback(Z=>String(Z).replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(G=>G.length?G[0].toUpperCase()+G.slice(1):G).join(" "),[]);process.env.NODE_ENV!=="production"&&L!==void 0&&console.warn("SPCChart: 'disableTrendSideGating' prop is deprecated and ignored (trend side gating always enabled).");const ve=X.useMemo(()=>{const Z=e.map((G,oe)=>({x:G.x,value:G.y,target:p?.[oe]??void 0,baseline:b?.[oe]??void 0,ghost:C?.[oe]??void 0}));try{const G=T?{...T}:void 0;return Q?Tv({chartType:c,metricImprovement:d,data:Z,settings:G}):jo({chartType:c,metricImprovement:d,data:Z,settings:G})}catch{return null}},[e,p,b,C,c,d,T,Q]),ue=ve?.rows.slice().reverse().find(Z=>Z.mean!=null),he=ue?.mean??null,te=ve?.warnings||[],re=X.useMemo(()=>te.length?x?te.filter(Z=>!(x.severities&&Z.severity&&!x.severities.includes(Z.severity)||x.categories&&Z.category&&!x.categories.includes(Z.category)||x.codes&&!x.codes.includes(Z.code))):te:[],[te,x]),[fe,k]=X.useState(""),R=X.useRef("");X.useEffect(()=>{if(!N){R.current!==""&&(R.current="",k(""));return}const Z=re.length;if(!Z){const de="Diagnostics: no warnings.";de!==R.current&&(R.current=de,k(de));return}const G={error:re.filter(de=>de.severity===Mn.Error).length,warning:re.filter(de=>de.severity===Mn.Warning).length,info:re.filter(de=>de.severity===Mn.Info).length},oe=[];G.error&&oe.push(`${G.error} error${G.error===1?"":"s"}`),G.warning&&oe.push(`${G.warning} warning${G.warning===1?"":"s"}`),G.info&&oe.push(`${G.info} info`);const _e=`Diagnostics updated: ${Z} warning${Z===1?"":"s"} (${oe.join(", ")}).`;_e!==R.current&&(R.current=_e,k(_e))},[N,re]);const W=ue?.upperProcessLimit??null,ee=ue?.lowerProcessLimit??null,q=ue?.upperOneSigma??null,ae=ue?.lowerOneSigma??null,ge=ue?.upperTwoSigma??null,Se=ue?.lowerTwoSigma??null,ce=he!=null&&q!=null?Math.abs(q-he):0,K=X.useMemo(()=>[{id:"process",data:e,color:"#A6A6A6"}],[e]),Y=X.useMemo(()=>{if(B){const de=e.map(ye=>ye.y),Ce=Math.max(100,...de),Ne=Math.min(0,...de);return[Ne<0?Ne:0,Ce>100?Ce:100]}const G=[...e.map(de=>de.y)];if([he,W,ee,q,ae,ge,Se].forEach(de=>{de!=null&&G.push(de)}),p&&p.forEach(de=>{typeof de=="number"&&!isNaN(de)&&G.push(de)}),!G.length)return;let oe=Math.min(...G),_e=Math.max(...G);return S&&(oe=Math.min(0,oe)),D&&(_e=Math.max(100,_e)),[oe,_e]},[e,he,W,ee,q,ae,ge,Se,p,S,D,B]),ie=X.useMemo(()=>{if(!(l||w?.measureUnit)&&e.length)return e.every(Z=>Z.y>=0&&Z.y<=1)?"%":void 0},[l,w?.measureUnit,e]),ne=l??w?.measureUnit??ie,A=X.useMemo(()=>ne?{...w||{},measureUnit:ne}:w,[w,ne]),J=X.useMemo(()=>{if(!ve?.rows)return[];const Z=[];for(let G=1;G<ve.rows.length;G++)ve.rows[G].partitionId!==ve.rows[G-1].partitionId&&Z.push(G);return Z},[ve?.rows]),le=X.useMemo(()=>{if(!g||!ve?.rows?.length)return null;const Z=ve.rows,G=T?.minimumPoints??13;if(Z.filter(Ze=>!Ze.ghost&&Ze.value!=null).length<G)return null;let _e=-1;for(let Ze=Z.length-1;Ze>=0;Ze--){const st=Z[Ze];if(st&&st.value!=null&&!st.ghost){_e=Ze;break}}if(_e===-1)return null;const de=Z[_e],Ce=de.variationIcon,Ne=Ce,ye=de.assuranceIcon,$e=Ne===Te.Neither&&!!de.specialCauseNeitherValue,Re=ye===qe.Pass?Dn.Pass:ye===qe.Fail?Dn.Fail:Dn.Uncertain;let Le;if(Ne===Te.Suppressed){const Ze=de.specialCauseSinglePointUp,st=de.specialCauseSinglePointDown;d===je.Up?Ze?Le=De.Higher:st&&(Le=De.Lower):d===je.Down?st?Le=De.Lower:Ze&&(Le=De.Higher):Le=De.Higher}else if(Ne===Te.Neither&&$e){const Ze=de.specialCauseSinglePointUp||de.specialCauseTwoOfThreeUp||de.specialCauseFourOfFiveUp||de.specialCauseShiftUp||de.specialCauseTrendUp,st=de.specialCauseSinglePointDown||de.specialCauseTwoOfThreeDown||de.specialCauseFourOfFiveDown||de.specialCauseShiftDown||de.specialCauseTrendDown;Ze&&!st?Le=De.Higher:st&&!Ze?Le=De.Lower:Le=De.Higher}let Ee;d===je.Up?Ee=Qe.HigherIsBetter:d===je.Down?Ee=Qe.LowerIsBetter:Ee=Qe.ContextDependent;const Ke=80;return s.jsxs("div",{style:{display:"flex",gap:12,marginRight:16},children:[s.jsx("div",{className:"fdp-spc-chart__embedded-icon","data-variation":String(Ne),"data-trend-raw":Le?String(Le):"none","data-trend":Le?String(Le):"none","data-polarity":String(Ee??"unknown"),style:{width:Ke,height:Ke},children:s.jsx(Di,{dropShadow:!1,data:{variationIcon:Ce,improvementDirection:d,polarity:Ee,specialCauseNeutral:$e,highSideSignal:de.specialCauseSinglePointUp||de.specialCauseTwoOfThreeUp||de.specialCauseFourOfFiveUp||de.specialCauseShiftUp||de.specialCauseTrendUp,lowSideSignal:de.specialCauseSinglePointDown||de.specialCauseTwoOfThreeDown||de.specialCauseFourOfFiveDown||de.specialCauseShiftDown||de.specialCauseTrendDown,...Le?{trend:Le}:{}},letterMode:d===je.Neither?ea.Direction:ea.Polarity,size:Ke,variant:y,runLength:y===qn.TriangleWithRun?h:void 0})}),s.jsx("div",{className:"fdp-spc-chart__embedded-assurance-icon","data-assurance":String(ye),style:{width:Ke,height:Ke},children:s.jsx(Mi,{status:Re,size:Ke,dropShadow:!1})})]},`embedded-icon-${_e}`)},[g,ve?.rows,d,T?.minimumPoints,p,y,h]);return s.jsxs("div",{className:o?`fdp-spc-chart-wrapper ${o}`:"fdp-spc-chart-wrapper",children:[g&&s.jsx("div",{className:"fdp-spc-chart__top-row",style:{display:"flex",justifyContent:"flex-end",marginBottom:4},children:le}),s.jsx(vd,{height:n,ariaLabel:t,margin:{bottom:48,left:56,right:16,top:12},className:void 0,children:s.jsx(wd,{series:K,yDomain:Y,children:s.jsx(Dv,{series:K,showPoints:a,announceFocus:i,limits:{mean:he,ucl:W,lcl:ee,sigma:ce,onePos:q,oneNeg:ae,twoPos:ge,twoNeg:Se},showZones:r,highlightOutOfControl:u,engineRows:ve?.rows||null,enableRules:f,showIcons:m,narrationContext:A,gradientSequences:j,sequenceTransition:I,processLineWidth:$,effectiveUnit:ne,partitionMarkers:J,ariaLabel:t,enableNeutralNoJudgement:F,showTrendGatingExplanation:M,trendVisualMode:v,metricImprovement:d,showTrendStartMarkers:U,showFirstFavourableCrossMarkers:H,showTrendBridgeOverlay:V,showSignalsInspector:O,onSignalFocus:se})})}),P&&s.jsx("div",{className:"fdp-spc-chart__source","aria-label":"Chart data source",children:typeof P=="string"?s.jsxs("small",{children:["Source: ",P]}):P}),N&&fe&&s.jsx("div",{"data-testid":"spc-diagnostics-live","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:0,overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",border:0},children:fe}),N&&re.length>0&&s.jsxs("div",{className:"fdp-spc-chart__warnings",role:"region","aria-label":"SPC diagnostics",children:[s.jsx("p",{className:"fdp-spc-chart__warnings-heading",children:"Diagnostics"}),s.jsx(Yt,{firstCellIsHeader:!1,panel:!1,responsive:!1,head:[{text:"Severity"},{text:"Category"},{text:"Code"},{text:"Details"}],rows:re.map(Z=>{let G="grey";return Z.severity===Mn.Error?G="red":Z.severity===Mn.Warning?G="orange":Z.severity===Mn.Info&&(G="blue"),[{node:s.jsx(Ae,{color:G,text:(Z.severity?String(Z.severity):"Info").replace(/^[a-z]/,oe=>oe.toUpperCase())}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--severity"},{node:Z.category?s.jsx(Ae,{color:"purple",text:pe(Z.category)}):s.jsx("span",{className:"fdp-spc-chart__warning-empty",children:"â€“"}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--category"},{node:s.jsx(Ae,{color:"grey",text:z(Z.code)}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--code"},{node:s.jsxs("div",{className:"fdp-spc-chart__warning-message",children:[s.jsx("span",{children:Z.message}),Z.context&&Object.keys(Z.context).length>0&&s.jsxs("details",{className:"fdp-spc-chart__warning-context",style:{marginTop:4},children:[s.jsx("summary",{children:"context"}),s.jsx("pre",{children:JSON.stringify(Z.context,null,2)})]})]}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--message"}]}),classes:"fdp-spc-chart__warnings-table-wrapper",tableClasses:"fdp-spc-chart__warnings-table"})]})]})},Dv=({series:e,showPoints:t,announceFocus:n,limits:r,showZones:a,highlightOutOfControl:i,engineRows:o,enableRules:l,showIcons:u,narrationContext:c,gradientSequences:d,sequenceTransition:f,processLineWidth:m,effectiveUnit:g,partitionMarkers:y,ariaLabel:h,metricImprovement:p,enableNeutralNoJudgement:b=!0,showTrendGatingExplanation:C=!0,trendVisualMode:T="ungated",showTrendStartMarkers:w=!1,showFirstFavourableCrossMarkers:j=!1,showTrendBridgeOverlay:I=!1,showSignalsInspector:$=!1,onSignalFocus:N})=>{const x=Vn(),F=jn();if(!x)return null;const{xScale:M,yScale:v}=x,L=X.useRef("spc-seq-"+ ++jv),P=bn(),S=e[0]?.data||[],D=X.useMemo(()=>{if(!r.ucl&&!r.lcl)return new Set;const k=new Set;return S.forEach((R,W)=>{(r.ucl!=null&&R.y>r.ucl||r.lcl!=null&&R.y<r.lcl)&&k.add(W)}),k},[S,r.ucl,r.lcl]),B=X.useMemo(()=>{if(!o)return null;const k={};return o.forEach((R,W)=>{if(R.value==null||R.ghost)return;const ee=R.specialCauseSinglePointUp||R.specialCauseSinglePointDown||R.specialCauseTwoOfThreeUp||R.specialCauseTwoOfThreeDown||R.specialCauseFourOfFiveUp||R.specialCauseFourOfFiveDown||R.specialCauseShiftUp||R.specialCauseShiftDown||R.specialCauseTrendUp||R.specialCauseTrendDown;k[W]={variation:R.variationIcon,assurance:R.assuranceIcon,special:ee,concern:R.variationIcon===Te.Concern,improvement:R.variationIcon===Te.Improvement,trendUp:!!R.specialCauseTrendUp,trendDown:!!R.specialCauseTrendDown}}),k},[o]),Q=X.useMemo(()=>{if(!o||!o.length)return null;const k=[];for(const W of o)typeof W.target=="number"&&!isNaN(W.target)&&k.push(W.target);if(!k.length)return null;const R=k[0];return k.every(W=>W===R)?R:null},[o]),U=X.useMemo(()=>{if(!B||!S.length)return[];const k=S.map((W,ee)=>{const q=B?.[ee];if(q?.concern)return dt.Concern;if(q?.improvement)return dt.Improvement;if(q?.special&&q.variation===Te.Neither){if(T==="ungated"&&p&&p!==je.Neither){if(q.trendUp)return p===je.Up?dt.Improvement:dt.Concern;if(q.trendDown)return p===je.Down?dt.Improvement:dt.Concern}if(b)return dt.NoJudgement}return dt.Common});return h?.includes("Rule Clash")&&console.log(`[${h}] Raw categories:`,k.map((W,ee)=>`${ee}:${W}(${S[ee].y})`).join(", ")),k},[B,S,h,b,T,p]),H=X.useMemo(()=>{if(!d||!U.length)return[];const k=[...U];let R=0;for(;R<k.length;){const q=k[R];let ae=R+1;for(;ae<k.length&&k[ae]===q;)ae++;ae-R===1&&q!==dt.Common&&(k[R]=dt.Common),R=ae}const W=[];if(k.length){let q=0;for(let ae=1;ae<=k.length;ae++)if(ae===k.length||k[ae]!==k[q]){const ge=k[q],Se=ae-1,ce=Se-q+1;(ge===dt.Common||ce>=2)&&W.push({start:q,end:Se,category:ge}),q=ae}}return h?.includes("Rule Clash")&&console.log(`[${h}] Final sequences:`,W.map(q=>`${q.start}-${q.end}:${q.category}`).join(", ")),W},[d,U,h]),V=X.useMemo(()=>S.map(k=>M(k.x instanceof Date?k.x:new Date(k.x))),[S,M]),O=M.range()[1],se=X.useMemo(()=>{if(!o||!o.length)return null;let k=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY;if(o.forEach((ce,K)=>{ce.specialCauseTrendUp&&(k=Math.min(k,K)),ce.specialCauseTrendDown&&(R=Math.min(R,K))}),!Number.isFinite(k)&&!Number.isFinite(R))return null;const W=k<=R,ee=W?"up":"down",q=W?k:R,ae=ce=>p==null||p===je.Neither||ce==null||typeof ce.value!="number"||typeof ce.mean!="number"?!1:ee==="up"?p===je.Up?ce.value>ce.mean:ce.value<ce.mean:p===je.Down?ce.value<ce.mean:ce.value>ce.mean;let ge=null;for(let ce=q;ce<o.length;ce++){const K=o[ce];if(!(W?!!K.specialCauseTrendUp:!!K.specialCauseTrendDown))break;if(ae(K)){ge=ce;break}}let Se=!1;if(ge!=null){let ce=0;for(let K=ge;K<o.length;K++){const Y=o[K];if(!(W?!!Y.specialCauseTrendUp:!!Y.specialCauseTrendDown))break;ae(Y)&&ce++}Se=ce>=2}return{direction:ee,detectedAt:q,firstFavourableCrossAt:ge,persistedAcrossMean:Se}},[o,p]),z=X.useMemo(()=>{if(!o||!o.length)return null;const k=R=>{const W=[];let ee=null,q=null;for(let ae=0;ae<o.length;ae++){const ge=o[ae],Se=typeof ge[R]=="number"?ge[R]:null;if(Se==null||isNaN(Se)){ee!==null&&q!=null&&(W.push({x1:V[ee],x2:V[ae-1],y:v(q)}),ee=null,q=null);continue}if(ee===null){ee=ae,q=Se;continue}q!=null&&Math.abs(Se-q)<=1e-9||(q!=null&&W.push({x1:V[ee],x2:V[ae-1],y:v(q)}),ee=ae,q=Se)}return ee!==null&&q!=null&&W.push({x1:V[ee],x2:V[o.length-1],y:v(q)}),W};return{mean:k("mean"),ucl:k("upperProcessLimit"),lcl:k("lowerProcessLimit"),onePos:k("upperOneSigma"),oneNeg:k("lowerOneSigma"),twoPos:k("upperTwoSigma"),twoNeg:k("lowerTwoSigma")}},[o,V,v]),pe=X.useMemo(()=>H.length?s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:`${L.current}-grad-common`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.28}),s.jsx("stop",{offset:"70%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.12}),s.jsx("stop",{offset:"100%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.045})]}),H.map((k,R)=>{const W=`${L.current}-grad-${R}`;let ee,q=.28,ae=.12,ge=.045;switch(k.category){case dt.Concern:ee="var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",q=.28,ae=.12,ge=.045;break;case dt.Improvement:ee="var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",q=.26,ae=.11,ge=.045;break;case dt.NoJudgement:ee="var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",q=.26,ae=.11,ge=.045;break;default:ee="var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)"}return s.jsxs("linearGradient",{id:W,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:ee,stopOpacity:q}),s.jsx("stop",{offset:"70%",stopColor:ee,stopOpacity:ae}),s.jsx("stop",{offset:"100%",stopColor:ee,stopOpacity:ge})]},W)})]}):null,[H]),ve=X.useMemo(()=>{if(!H.length)return null;const[k]=v.domain(),R=v(k),W=H.map((ee,q)=>{const{start:ae,end:ge,category:Se}=ee;if(ae<0||ge>=V.length||ae>ge)return null;const ce=V[ae],K=V[ge];let Y="";if(Se===dt.Common){const ie=q>0?H[q-1]:null,ne=q<H.length-1?H[q+1]:null,A=ie?V[ie.end]:0,J=ie?v(S[ie.end].y):R,le=ne?V[ne.start]:O,Z=ne?v(S[ne.start].y):R;Y=`M ${A} ${R}`,Y+=` L ${A} ${J}`;for(let G=ae;G<=ge;G++)Y+=` L ${V[G]} ${v(S[G].y)}`;Y+=` L ${le} ${Z}`,Y+=` L ${le} ${R} Z`}else{const ie=q>0?H[q-1]:null,ne=q<H.length-1?H[q+1]:null,A=ie&&ie.category!==dt.Common,J=ne&&ne.category!==dt.Common,le=v(S[ae].y),Z=v(S[ge].y);let G=ce,oe=K;if(A){const _e=V[ie.end],de=v(S[ie.end].y),Ce=S[ae].y-S[ie.end].y;f==="slope"&&Ce>0?(Y=`M ${_e} ${de} L ${ce} ${le}`,G=_e):(Y=`M ${ce} ${R} L ${ce} ${le}`,G=ce)}else Y=`M ${ce} ${R} L ${ce} ${le}`;for(let _e=ae+1;_e<=ge;_e++)Y+=` L ${V[_e]} ${v(S[_e].y)}`;if(Y+=` L ${K} ${Z}`,J){const _e=V[ne.start],de=v(S[ne.start].y),Ce=S[ne.start].y-S[ge].y;(f==="slope"&&Ce<=0||f==="extend")&&(Y+=` L ${_e} ${de}`,oe=_e)}if(Y+=` L ${oe} ${R}`,Y+=` L ${G} ${R} Z`,f==="neutral"&&A){const _e=V[ie.end],de=v(S[ie.end].y),Ce=s.jsx("path",{d:`M ${_e} ${R} L ${_e} ${de} L ${ce} ${le} L ${ce} ${R} Z`,fill:`url(#${L.current}-grad-common)`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-wedge-${q}`);return s.jsxs("g",{children:[Ce,s.jsx("path",{d:Y,fill:`url(#${L.current}-grad-${q})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${q}`)]},`seq-group-${q}`)}}return s.jsx("path",{d:Y,fill:`url(#${L.current}-grad-${q})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${q}`)}).filter(Boolean);return s.jsx("g",{className:"fdp-spc__sequence-bgs",children:W})},[H,V,O,v,S,f]),ue=X.useMemo(()=>{if(!c?.timeframe&&S.length>=2){const k=S.map(ge=>ge.x instanceof Date?ge.x:new Date(ge.x)),R=new Date(Math.min(...k.map(ge=>ge.getTime()))),W=new Date(Math.max(...k.map(ge=>ge.getTime()))),ee=Math.round((W.getTime()-R.getTime())/864e5)||0;if(ee<14)return`The chart shows a timeframe of ${ee+1} days`;const q=Math.round(ee/7);return q<20?`The chart shows a timeframe of ${q} weeks`:`The chart shows a timeframe of ${(W.getFullYear()-R.getFullYear())*12+(W.getMonth()-R.getMonth())+1} months`}if(c?.timeframe)return`The chart shows a timeframe of ${c.timeframe}`},[c?.timeframe,S]),he=k=>{const R=k%10,W=k%100;return R===1&&W!==11?`${k}st`:R===2&&W!==12?`${k}nd`:R===3&&W!==13?`${k}rd`:`${k}th`},te=k=>`${he(k.getDate())} ${k.toLocaleString("en-GB",{month:"long"})}, ${k.getFullYear()}`,re=X.useCallback(({index:k,x:R,y:W})=>{const ee=o?.[k],q=R instanceof Date?R:new Date(R),ae=te(q),ge=c?.measureUnit?` ${c.measureUnit}`:"",Se=c?.measureName?` ${c.measureName}`:"";if(!ee)return`General summary is: ${ue?ue+". ":""}Point ${k+1}, ${ae}, ${W}${ge}${Se}`;const ce=Ni(ee.variationIcon)||"Variation",K=Ti(ee),Y=K.length?` Rules: ${[...new Set(K.map(ne=>br[ne].narration))].join("; ")}.`:" No special cause rules.",ie=[];return c?.measureName&&ie.push(`Measure: ${c.measureName}.`),c?.datasetContext&&ie.push(`${c.datasetContext}.`),c?.organisation&&ie.push(`Organisation: ${c.organisation}.`),c?.additionalNote&&ie.push(c.additionalNote),["General summary is:",...ie,`Point ${k+1} recorded on `,ae+",",`with a value of ${W} ${ge}${Se}`,ce+".",Y].join(" ").replace(/\s+/g," ").trim()},[o,c,ue]),fe=X.useCallback((k,R)=>o?.[k]?re({index:k,seriesId:"process",x:R.x instanceof Date?R.x:new Date(R.x),y:R.y}).replace(/^General summary is:\s*/,"").replace(/^Point \d+\s*/,""):void 0,[o,re]);return s.jsx(Pd,{children:s.jsxs("div",{className:"fdp-spc-chart",role:"group","aria-label":"Statistical process control chart","aria-roledescription":"chart",children:[s.jsx("svg",{width:x.xScale.range()[1]+56+16,height:x.yScale.range()[0]+12+48,role:"img",children:s.jsxs("g",{transform:"translate(56,12)",children:[s.jsx(uo,{type:"x"}),s.jsx(uo,{type:"y"}),s.jsx(Sd,{axis:"y"}),pe,ve,y.map((k,R)=>{const W=S[k];if(!W)return null;const ee=M(W.x instanceof Date?W.x:new Date(W.x));return s.jsx("line",{x1:ee,x2:ee,y1:0,y2:v.range()[0],stroke:"#555",strokeDasharray:"4 4",strokeWidth:1,"aria-hidden":"true",className:"fdp-spc__partition-marker"},`partition-marker-${R}`)}),z?.mean.length?s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__cl-group",children:[z.mean.map((k,R)=>s.jsx("line",{className:"fdp-spc__cl",x1:k.x1,x2:k.x2,y1:k.y,y2:k.y},`mean-${R}`)),z.mean.map((k,R)=>{if(R===z.mean.length-1)return null;const W=z.mean[R+1];if(!W||k.y===W.y)return null;const q=Math.max(4,W.x1-k.x2||0)*.5,ae=`M ${k.x2},${k.y} C ${k.x2+q},${k.y} ${W.x1-q},${W.y} ${W.x1},${W.y}`;return s.jsx("path",{className:"fdp-spc__cl fdp-spc__cl-join",d:ae,fill:"none"},`mean-join-${R}`)})]}):null,Q!=null&&s.jsx(s.Fragment,{}),z?.ucl.length?s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--ucl",children:[z.ucl.map((k,R)=>s.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--ucl",x1:k.x1,x2:k.x2,y1:k.y,y2:k.y,strokeWidth:2},`ucl-${R}`)),z.ucl.map((k,R)=>{if(R===z.ucl.length-1)return null;const W=z.ucl[R+1];if(!W||k.y===W.y)return null;const q=Math.max(4,W.x1-k.x2||0)*.5,ae=`M ${k.x2},${k.y} C ${k.x2+q},${k.y} ${W.x1-q},${W.y} ${W.x1},${W.y}`;return s.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--ucl fdp-spc__limit-join",d:ae,fill:"none",strokeWidth:2},`ucl-join-${R}`)})]}):null,z?.lcl.length?s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--lcl",children:[z.lcl.map((k,R)=>s.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--lcl",x1:k.x1,x2:k.x2,y1:k.y,y2:k.y,strokeWidth:2},`lcl-${R}`)),z.lcl.map((k,R)=>{if(R===z.lcl.length-1)return null;const W=z.lcl[R+1];if(!W||k.y===W.y)return null;const q=Math.max(4,W.x1-k.x2||0)*.5,ae=`M ${k.x2},${k.y} C ${k.x2+q},${k.y} ${W.x1-q},${W.y} ${W.x1},${W.y}`;return s.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--lcl fdp-spc__limit-join",d:ae,fill:"none",strokeWidth:2},`lcl-join-${R}`)})]}):null,Q!=null&&s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__target-group",children:[s.jsx("line",{className:"fdp-spc__target","data-testid":"spc-target-line",x1:0,x2:M.range()[1],y1:v(Q),y2:v(Q),strokeWidth:2.5}),s.jsxs("text",{"data-testid":"spc-target-label",x:M.range()[0]-7,y:v(Q)-5,textAnchor:"start",className:"fdp-spc__target-label",fontSize:12,children:["Target ",Q," ",g||c?.measureUnit||""]})]}),a&&z&&z.mean.length>0&&s.jsxs(s.Fragment,{children:[z.onePos.map((k,R)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos1",x1:k.x1,x2:k.x2,y1:k.y,y2:k.y,"aria-hidden":"true",strokeWidth:2},`onePos-${R}`)),z.oneNeg.map((k,R)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg1",x1:k.x1,x2:k.x2,y1:k.y,y2:k.y,"aria-hidden":"true",strokeWidth:2},`oneNeg-${R}`)),z.twoPos.map((k,R)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos2",x1:k.x1,x2:k.x2,y1:k.y,y2:k.y,"aria-hidden":"true",strokeWidth:2},`twoPos-${R}`)),z.twoNeg.map((k,R)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg2",x1:k.x1,x2:k.x2,y1:k.y,y2:k.y,"aria-hidden":"true",strokeWidth:2},`twoNeg-${R}`))]}),se&&(w||j||I)&&(()=>{const k=se.detectedAt,R=se.firstFavourableCrossAt,W=S[k]?M(S[k].x instanceof Date?S[k].x:new Date(S[k].x)):null,ee=S[k]?v(S[k].y):null,q=R!=null&&S[R]?M(S[R].x instanceof Date?S[R].x:new Date(S[R].x)):null,ae=R!=null&&S[R]?v(S[R].y):null;return s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__trend-overlays",children:[I&&W!=null&&ee!=null&&q!=null&&ae!=null&&s.jsx("line",{x1:W,y1:ee,x2:q,y2:ae,stroke:"#888",strokeDasharray:"4 4",strokeWidth:2,children:s.jsx("title",{children:"Trend bridge: start to first favourable-side point"})}),w&&W!=null&&ee!=null&&s.jsx("circle",{cx:W,cy:ee,r:6,fill:"white",stroke:"#555",strokeWidth:2,children:s.jsx("title",{children:"Trend start (run reached N)"})}),j&&q!=null&&ae!=null&&s.jsx("circle",{cx:q,cy:ae,r:5,fill:"#555",children:s.jsx("title",{children:"First favourable-side inclusion"})})]})})(),s.jsx(Id,{series:e[0],seriesIndex:0,palette:"categorical",showPoints:!1,focusablePoints:!1,focusIndex:-1,parseX:k=>k.x instanceof Date?k.x:new Date(k.x),smooth:!1,strokeWidth:m}),t&&S.map((k,R)=>{const W=M(k.x instanceof Date?k.x:new Date(k.x)),ee=v(k.y),q=D.has(R),ae=B?.[R],ge=T==="ungated"&&!!ae?.special&&ae?.variation===Te.Neither&&p!=null&&p!==je.Neither,Se=ge&&(ae?.trendUp&&p===je.Up||ae?.trendDown&&p===je.Down),ce=ge&&(ae?.trendUp&&p===je.Down||ae?.trendDown&&p===je.Up),K=!!(ae?.improvement||Se),Y=!!(ae?.concern||ce),ie=["fdp-spc__point",q&&i?"fdp-spc__point--ooc":null,l&&ae?.special&&Y?"fdp-spc__point--sc-concern":null,l&&ae?.special&&K?"fdp-spc__point--sc-improvement":null,l&&b&&ae?.special&&ae.variation===Te.Neither&&!K&&!Y?"fdp-spc__point--sc-no-judgement":null,ae?.assurance===qe.Pass?"fdp-spc__point--assurance-pass":null,ae?.assurance===qe.Fail?"fdp-spc__point--assurance-fail":null].filter(Boolean).join(" "),ne=`Point ${R+1} value ${k.y}`+(ae?.special?" special cause":"")+(ae?.variation===Te.Improvement?" improving":ae?.variation===Te.Concern?" concern":""),A=P?.focused?.index===R;return s.jsx("circle",{cx:W,cy:ee,r:5,className:ie,"data-variation":ae?.variation,"data-assurance":ae?.assurance,"aria-label":ne,...A?{"aria-describedby":`spc-tooltip-${R}`}:{}},R)}),u&&l&&B&&S.map((k,R)=>{const W=B[R];if(!W||!(W.concern||W.improvement))return null;const ee=M(k.x instanceof Date?k.x:new Date(k.x)),q=v(k.y);let ae=q-10;const ge=12,Se=v.range()[0]-4;ae<ge&&(ae=Math.min(q+16,Se));const ce=M.range()[1],K=Math.min(Math.max(ee,0),ce-0);return s.jsx("text",{x:K,y:ae,textAnchor:"middle",className:`fdp-spc__icon ${W.concern?"fdp-spc__icon--concern":"fdp-spc__icon--improvement"}`,"aria-hidden":"true",children:W.concern?"!":"â˜…"},`icon-${R}`)}),F&&s.jsx(Mv,{width:M.range()[1],height:v.range()[0]}),!$&&s.jsx(Ad,{engineRows:o,limits:{mean:r.mean,sigma:r.sigma},pointDescriber:fe,measureName:c?.measureName,measureUnit:c?.measureUnit,dateFormatter:k=>te(k),enableNeutralNoJudgement:b,showTrendGatingExplanation:C})]})}),$&&s.jsx("div",{style:{marginTop:8},children:s.jsx(Nv,{engineRows:o,measureName:c?.measureName,measureUnit:g||c?.measureUnit,onSignalFocus:N})}),n&&s.jsx(Yx,{format:k=>re({...k,x:k.x instanceof Date?k.x:new Date(k.x)})})]})})},Mv=({width:e,height:t})=>{const n=bn();return n?s.jsx("rect",{className:"fdp-spc__interaction-layer",width:e,height:t,fill:"transparent",tabIndex:0,"aria-label":"Interactive chart area. Use arrow keys to move between points.",onMouseMove:r=>{const i=r.currentTarget.getBoundingClientRect(),o=r.clientX-i.left,l=r.clientY-i.top;n.focusNearest(o,l)},onMouseLeave:()=>n.clear(),onKeyDown:r=>{switch(r.key){case"ArrowRight":n.focusNextPoint(),r.preventDefault();break;case"ArrowLeft":n.focusPrevPoint(),r.preventDefault();break;case"ArrowDown":n.focusNextSeries(),r.preventDefault();break;case"ArrowUp":n.focusPrevSeries(),r.preventDefault();break;case"Home":n.focusFirstPoint(),r.preventDefault();break;case"End":n.focusLastPoint(),r.preventDefault();break}},style:{cursor:"crosshair"}}):null},$v=Object.freeze(Object.defineProperty({__proto__:null,AssuranceIcon:qe,AssuranceResult:Dn,BaselineSuggestionReason:Bt,ChartType:yn,Direction:De,Icons:Object.freeze(Object.defineProperty({__proto__:null,AssuranceResult:Dn,Direction:De,MetricPolarity:Qe,SPCAssuranceIcon:Mi,SPCVariationIcon:Di,VariationJudgement:vt,VariationState:Ie,getVariationColour:Co,getVariationTrend:ji},Symbol.toStringTag,{value:"Module"})),ImprovementDirection:je,MetricPolarity:Qe,RULE_METADATA:ki,SPCAssuranceIcon:Mi,SPCChart:Yd,SPCTooltipOverlay:Ad,SPCVariationIcon:Di,SpcEmbeddedIconVariant:qn,SpcWarningCategory:Ud,SpcWarningCode:Gd,SpcWarningSeverity:Mn,VARIATION_COLOR_TOKENS:Ut,VariationIcon:Te,VariationJudgement:vt,VariationState:Ie,buildSpc:jo,extractRuleIds:Ti,getVariationColorHex:sv,getVariationColorToken:Ed,getVariationColour:Co,getVariationTrend:ji,normaliseSpcSettings:Vd,ruleGlossary:br,variationLabel:Ni},Symbol.toStringTag,{value:"Module"})),qd="150ms",Xd="300ms",Kd="500ms",Zd="cubic-bezier(0.4, 0, 1, 1)",Jd="cubic-bezier(0, 0, 0.2, 1)",Qd="cubic-bezier(0.4, 0, 0.2, 1)",ef="cubic-bezier(0.68, -0.55, 0.265, 1.55)",tf="background-color 300ms cubic-bezier(0, 0, 0.2, 1)",nf="box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",rf="border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",af="border-color 300ms cubic-bezier(0, 0, 0.2, 1)",sf="1px",of="2px",lf="4px",cf="4px",uf="4px",df="2px",ff="1px",hf="0px",pf="4px",mf="8px",gf="12px",Do="#d8dde0",Mo="#4c6272",$o="#d8dde0",Po="#aeb7bd",Io="#d5281b",Fo="#005eb8",Lo="#ffffff",Bo="#212b32",Eo="#007f3b",Ao="#330072",Ro="#7c2855",Ho="#d5281b",Oo="#ffeb3b",zo="#fff9c4",Wo="#ffb81c",Uo="#ed8b00",Go="#00a499",Vo="#ae2573",Yo="#4c6272",qo="#768692",Xo="#aeb7bd",Ko="#d8dde0",Zo="#f0f4f5",_f="#212b32",bf="#4c6272",yf="#ffffff",xf="#212b32",vf="#005eb8",wf="#7c2855",Sf="#003087",kf="#330072",Cf="#ffeb3b",Tf="#212b32",Nf="#d8dde0",jf="#ffffff33",Df="#d5281b",Mf="#4c6272",$f="#ffffff",Pf="#007f3b",If="#ffffff",Ff="#006530",Lf="#004021",Bf="#004021",Ef="#00000000",Af="#ffffff",Rf="#005eb8",Hf="#005eb8",Of="#d9e5f2",zf="#c7daf0",Wf="#005eb8",Uf="#ffffff",Gf="#212b32",Vf="#d9dde0",Yf="#b3bcc2",qf="#b3bcc2",Xf="#d5281b",Kf="#aa2016",Zf="#6a140e",Jf="#6a140e",Qf="#005eb8",eh="#004b93",th="#002f5c",nh="#002f5c",rh="8px",ah="16px",ih="12px",sh="16px",oh="4px",lh="40px",ch="4px",uh="40px",dh="12px",fh="16px",hh="32px",ph="16px",mh="20px",gh="28px",_h="9px",bh="2px",yh="16px",xh="24px",vh="8px",wh="24px",Sh="16px",kh="4px",Ch="4px",Th="4px",Nh="8px",jh="4px",Dh="16px",Mh="#007f3b",$h="#006530",Ph="#004021",Ih="#d8dde0",Fh="#ffffff",Lh="#768692",Bh="#00000000",Eh="#ffeb3b",Ah="#00000000",Rh="#ffffff",Hh="#d9e5f2",Oh="#c7daf0",zh="#005eb8",Wh="#005eb8",Jo="8px",Qo="16px",el="12px",tl="16px",Uh="2px",Gh="4px",Vh="4px",Yh="600",qh="#ffffff",Xh="#d8dde0",Kh="#aeb7bd",Zh="#f0f4f5",Jh="#212b32",Qh="#212b32",ep="#005eb8",nl="16px",rl="32px",al="16px",tp="1px",np="4px",rp="none",ap="0 2px 4px rgba(0, 0, 0, 0.1)",ip="#ffffff",sp="#ffffff",op="#d8dde0",lp="#ffffff",cp="#4c6272",up="#ffeb3b",dp="#d5281b",fp="#aeb7bd",hp="#212b32",pp="#4c6272",mp="#768692",gp="#212b32",_p="#ffffff",bp="600",yp="#d5281b",xp="600",vp="#4c6272",il="4px",sl="40px",ol="40px",ll="12px",wp="2px",Sp="4px",kp="0px",Cp="16px",Tp="18px",Np="24px",jp="32px",Dp="34px",Mp="32px",$p="40px",Pp="48px",Ip="5.4ex",Fp="7.2ex",Lp="9ex",Bp="10.8ex",Ep="20ex",Ap="38ex",Rp="56ex",Hp="44px",Op="40px",zp="1020px",Wp="100%",Up="50%",Gp="33.333%",Vp="25%",Yp="20%",qp="320px",Xp="641px",Kp="1025px",Zp="1280px",Jp="960px",Qp="32px",em="16px",tm="#d5281b",nm="#d5281b",rm="#ffffff",am="#007f3b",im="#007f3b",sm="#ffffff",om="#ffeb3b",lm="#ffeb3b",cm="#212b32",um="#005eb8",dm="#005eb8",fm="#ffffff",hm="#d8dde0",pm="#aeb7bd",mm="#768692",gm="0 4px 0 #004021",_m="0 4px 0 #005eb8",bm="0 4px 0 #6a140e",ym="0 4px 0 #ffeb3b",xm="none",vm="0 2px 4px rgba(0, 0, 0, 0.1)",wm="4px",Sm="0px",km="solid",Cm="0 0 0 3px #ffeb3b",Tm="0 0 0 3px #ffeb3b",Nm="none",jm="0 1px 3px rgba(0, 0, 0, 0.12)",Dm="0 2px 6px rgba(0, 0, 0, 0.16)",Mm="0 4px 12px rgba(0, 0, 0, 0.20)",cl="0",ul="4px",dl="8px",fl="16px",hl="24px",pl="32px",ml="40px",gl="48px",_l="56px",bl="64px",$i="0",Pi="0",Ii="4px",Fi="4px",Li="8px",Bi="8px",Ei="8px",Ai="16px",Ri="16px",Hi="24px",Oi="24px",zi="32px",Wi="32px",Ui="40px",Gi="40px",Vi="48px",Yi="48px",qi="56px",Xi="56px",Ki="64px",ta="Frutiger W01",na="Arial, Helvetica, sans-serif",ra="sans-serif",aa="400",ia="600",sa="400",oa="12px",la="14px",ca="12pt",ua="14px",da="16px",fa="12pt",ha="16px",pa="19px",ma="13pt",ga="19px",_a="22px",ba="15pt",ya="22px",xa="26px",va="17pt",wa="27px",Sa="36px",ka="20pt",Ca="33px",Ta="48px",Na="24pt",Zi="16px",Ji="24px",Kt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},Zt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Jt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Qt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},en={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},tn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},nn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},rn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},an={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},sn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},Pv=Object.freeze(Object.defineProperty({__proto__:null,AnimationDurationFast:qd,AnimationDurationNormal:Xd,AnimationDurationSlow:Kd,AnimationEasingBounce:ef,AnimationEasingEaseIn:Zd,AnimationEasingEaseInOut:Qd,AnimationEasingEaseOut:Jd,BorderColorCard:$o,BorderColorCardHover:Po,BorderColorDefault:Do,BorderColorError:Io,BorderColorForm:Mo,BorderRadiusLarge:gf,BorderRadiusMedium:mf,BorderRadiusNone:hf,BorderRadiusSmall:pf,BorderWidthCardBottom:cf,BorderWidthDefault:sf,BorderWidthFormElement:of,BorderWidthFormElementError:lf,BorderWidthPanel:uf,BorderWidthTableCell:ff,BorderWidthTableHeader:df,BreakpointDesktop:Kp,BreakpointLargeDesktop:Zp,BreakpointMobile:qp,BreakpointTablet:Xp,ButtonBorderRadius:Gh,ButtonBorderWidth:Uh,ButtonPrimaryBackgroundActive:Ph,ButtonPrimaryBackgroundDefault:Mh,ButtonPrimaryBackgroundDisabled:Ih,ButtonPrimaryBackgroundHover:$h,ButtonPrimaryBorderDefault:Bh,ButtonPrimaryBorderFocus:Eh,ButtonPrimaryTextDefault:Fh,ButtonPrimaryTextDisabled:Lh,ButtonSecondaryBackgroundActive:Oh,ButtonSecondaryBackgroundDefault:Ah,ButtonSecondaryBackgroundHover:Hh,ButtonSecondaryBackgroundSolid:Rh,ButtonSecondaryBorderDefault:Wh,ButtonSecondaryTextDefault:zh,ButtonShadowSize:Vh,ButtonSpacingPaddingHorizontalDesktop:tl,ButtonSpacingPaddingHorizontalMobile:Qo,ButtonSpacingPaddingVerticalDesktop:el,ButtonSpacingPaddingVerticalMobile:Jo,ButtonTypographyWeight:Yh,CardBackgroundDefault:qh,CardBorderBottom:Zh,CardBorderDefault:Xh,CardBorderHover:Kh,CardBorderWidthBottom:np,CardBorderWidthDefault:tp,CardShadowDefault:rp,CardShadowHover:ap,CardSpacingHeadingMargin:al,CardSpacingPaddingDesktop:rl,CardSpacingPaddingMobile:nl,CardTextDescription:Qh,CardTextHeading:Jh,CardTextLink:ep,ColorBorderDefault:Nf,ColorBorderSecondary:jf,ColorButtonLoginActive:th,ColorButtonLoginBackground:Qf,ColorButtonLoginHover:eh,ColorButtonLoginShadow:nh,ColorButtonPrimaryActive:Lf,ColorButtonPrimaryBackground:Pf,ColorButtonPrimaryHover:Ff,ColorButtonPrimaryShadow:Bf,ColorButtonPrimaryText:If,ColorButtonReverseActive:Yf,ColorButtonReverseBackground:Uf,ColorButtonReverseHover:Vf,ColorButtonReverseShadow:qf,ColorButtonReverseText:Gf,ColorButtonSecondaryActive:zf,ColorButtonSecondaryBackground:Ef,ColorButtonSecondaryBackgroundSolid:Af,ColorButtonSecondaryBorder:Rf,ColorButtonSecondaryHover:Of,ColorButtonSecondaryShadow:Wf,ColorButtonSecondaryText:Hf,ColorButtonWarningActive:Zf,ColorButtonWarningBackground:Xf,ColorButtonWarningHover:Kf,ColorButtonWarningShadow:Jf,ColorError:Df,ColorFocusBackground:Cf,ColorFocusText:Tf,ColorFormBackground:$f,ColorFormBorder:Mf,ColorGrey1:Yo,ColorGrey2:qo,ColorGrey3:Xo,ColorGrey4:Ko,ColorGrey5:Zo,ColorLinkActive:Sf,ColorLinkDefault:vf,ColorLinkHover:wf,ColorLinkVisited:kf,ColorPrimaryBlack:Bo,ColorPrimaryBlue:Fo,ColorPrimaryDarkPink:Ro,ColorPrimaryGreen:Eo,ColorPrimaryPurple:Ao,ColorPrimaryRed:Ho,ColorPrimaryWhite:Lo,ColorPrimaryYellow:Oo,ColorSecondaryAquaGreen:Go,ColorSecondaryOrange:Uo,ColorSecondaryPaleYellow:zo,ColorSecondaryPink:Vo,ColorSecondaryWarmYellow:Wo,ColorTextPrimary:_f,ColorTextPrint:xf,ColorTextReverse:yf,ColorTextSecondary:bf,ComponentBlur:Ch,ComponentBreadcrumbChevronMarginLeft:_h,ComponentBreadcrumbChevronMarginRight:bh,ComponentBreadcrumbPaddingTopDesktop:xh,ComponentBreadcrumbPaddingTopMobile:yh,ComponentButtonPaddingDesktopHorizontal:sh,ComponentButtonPaddingDesktopVertical:ih,ComponentButtonPaddingMobileHorizontal:ah,ComponentButtonPaddingMobileVertical:rh,ComponentButtonShadowSize:oh,ComponentCardHeadingMargin:ph,ComponentCardPaddingDesktop:hh,ComponentCardPaddingMobile:fh,ComponentDetails:Nh,ComponentExpander:jh,ComponentFormCheckboxLabelPadding:dh,ComponentFormCheckboxSize:uh,ComponentFormInputMinHeight:lh,ComponentFormInputPadding:ch,ComponentLink:Th,ComponentPagination:Dh,ComponentPanelPaddingDesktop:gh,ComponentPanelPaddingMobile:mh,ComponentSpread:kh,ComponentSummaryListCellPaddingHorizontal:wh,ComponentSummaryListCellPaddingVertical:vh,ComponentSummaryListRowMargin:Sh,ElevationHigh:Mm,ElevationLow:jm,ElevationMedium:Dm,ElevationNone:Nm,FocusOutlineOffset:Sm,FocusOutlineStyle:km,FocusOutlineWidth:wm,FocusShadowButton:Tm,FocusShadowInput:Cm,FontFamilyBase:ta,FontFamilyFallback:na,FontFamilyPrint:ra,FontLineHeightBase:Ji,FontSize14Mobile:oa,FontSize14Print:ca,FontSize14Tablet:la,FontSize16Mobile:ua,FontSize16Print:fa,FontSize16Tablet:da,FontSize19Mobile:ha,FontSize19Print:ma,FontSize19Tablet:pa,FontSize22Mobile:ga,FontSize22Print:ba,FontSize22Tablet:_a,FontSize26Mobile:ya,FontSize26Print:va,FontSize26Tablet:xa,FontSize36Mobile:wa,FontSize36Print:ka,FontSize36Tablet:Sa,FontSize48Mobile:Ca,FontSize48Print:Na,FontSize48Tablet:Ta,FontSizeBase:Zi,FontWeightBold:ia,FontWeightLight:sa,FontWeightNormal:aa,FormBorderRadius:kp,FormBorderWidthDefault:wp,FormBorderWidthError:Sp,FormErrorTextDefault:yp,FormErrorTypographyWeight:xp,FormHintTextDefault:vp,FormInputBackgroundDefault:ip,FormInputBackgroundDisabled:op,FormInputBackgroundError:lp,FormInputBackgroundFocus:sp,FormInputBorderDefault:cp,FormInputBorderDisabled:fp,FormInputBorderError:dp,FormInputBorderFocus:up,FormInputTextDefault:hp,FormInputTextDisabled:mp,FormInputTextPlaceholder:pp,FormLabelTextDefault:gp,FormLabelTextRequired:_p,FormLabelTypographyWeight:bp,FormSpacingCheckboxLabelPadding:ll,FormSpacingCheckboxSize:ol,FormSpacingInputMinHeight:sl,FormSpacingInputPadding:il,GridGutter:Qp,GridGutterHalf:em,GridPageWidth:Jp,HeadingsNhsukHeadingL:Zt,HeadingsNhsukHeadingM:Jt,HeadingsNhsukHeadingS:Qt,HeadingsNhsukHeadingXl:Kt,HeadingsNhsukHeadingXs:en,LayoutColumnActions:Yp,LayoutColumnFull:Wp,LayoutColumnHalf:Up,LayoutColumnQuarter:Vp,LayoutColumnThird:Gp,LayoutContainerMaxWidth:zp,ParagraphsBody:tn,ParagraphsBodyLarge:nn,ParagraphsBodySmall:rn,ParagraphsLedeText:an,ParagraphsLedeTextSmall:sn,ShadowButtonDefault:gm,ShadowButtonFocus:ym,ShadowButtonSecondary:_m,ShadowButtonWarning:bm,ShadowCardDefault:xm,ShadowCardHover:vm,SizeButtonMinHeightDesktop:Op,SizeButtonMinHeightMobile:Hp,SizeFormControlLarge:Pp,SizeFormControlMedium:$p,SizeFormControlSmall:Mp,SizeFormInputWidth2xl:Ap,SizeFormInputWidth3xl:Rp,SizeFormInputWidthLg:Bp,SizeFormInputWidthMd:Lp,SizeFormInputWidthSm:Fp,SizeFormInputWidthXl:Ep,SizeFormInputWidthXs:Ip,SizeIconExtraLarge:jp,SizeIconLarge:Np,SizeIconMedium:Tp,SizeIconNhsDefault:Dp,SizeIconSmall:Cp,Spacing0:cl,Spacing1:ul,Spacing2:dl,Spacing3:fl,Spacing4:hl,Spacing5:pl,Spacing6:ml,Spacing7:gl,Spacing8:_l,Spacing9:bl,SpacingResponsive0Mobile:$i,SpacingResponsive0Tablet:Pi,SpacingResponsive1Mobile:Ii,SpacingResponsive1Tablet:Fi,SpacingResponsive2Mobile:Li,SpacingResponsive2Tablet:Bi,SpacingResponsive3Mobile:Ei,SpacingResponsive3Tablet:Ai,SpacingResponsive4Mobile:Ri,SpacingResponsive4Tablet:Hi,SpacingResponsive5Mobile:Oi,SpacingResponsive5Tablet:zi,SpacingResponsive6Mobile:Wi,SpacingResponsive6Tablet:Ui,SpacingResponsive7Mobile:Gi,SpacingResponsive7Tablet:Vi,SpacingResponsive8Mobile:Yi,SpacingResponsive8Tablet:qi,SpacingResponsive9Mobile:Xi,SpacingResponsive9Tablet:Ki,StateDisabledBackground:hm,StateDisabledBorder:pm,StateDisabledText:mm,StateErrorBackground:tm,StateErrorBorder:nm,StateErrorText:rm,StateInfoBackground:um,StateInfoBorder:dm,StateInfoText:fm,StateSuccessBackground:am,StateSuccessBorder:im,StateSuccessText:sm,StateWarningBackground:om,StateWarningBorder:lm,StateWarningText:cm,TransitionButtonDefault:tf,TransitionButtonShadow:nf,TransitionCardHover:af,TransitionInputFocus:rf},Symbol.toStringTag,{value:"Module"})),Iv=(e,t)=>({fontSize:e.mobile,marginBottom:t.mobile,"@media (min-width: 768px)":{fontSize:e.tablet,marginBottom:t.tablet},"@media print":{fontSize:e.print||e.tablet}}),Fv=({children:e,className:t="",style:n={}})=>s.jsx("h1",{className:t,style:{fontFamily:Kt.fontFamily,fontWeight:Kt.fontWeight,fontSize:Kt.fontSize.mobile,lineHeight:Kt.lineHeight,marginTop:Kt.marginTop,marginBottom:Kt.marginBottom.mobile,...n},children:e}),Lv=({children:e,className:t="",style:n={}})=>s.jsx("h2",{className:t,style:{fontFamily:Zt.fontFamily,fontWeight:Zt.fontWeight,fontSize:Zt.fontSize.mobile,lineHeight:Zt.lineHeight,marginTop:Zt.marginTop,marginBottom:Zt.marginBottom.mobile,...n},children:e}),Bv=({children:e,className:t="",style:n={}})=>s.jsx("h3",{className:t,style:{fontFamily:Jt.fontFamily,fontWeight:Jt.fontWeight,fontSize:Jt.fontSize.mobile,lineHeight:Jt.lineHeight,marginTop:Jt.marginTop,marginBottom:Jt.marginBottom.mobile,...n},children:e}),Ev=({children:e,className:t="",style:n={}})=>s.jsx("h4",{className:t,style:{fontFamily:Qt.fontFamily,fontWeight:Qt.fontWeight,fontSize:Qt.fontSize.mobile,lineHeight:Qt.lineHeight,marginTop:Qt.marginTop,marginBottom:Qt.marginBottom.mobile,...n},children:e}),Av=({children:e,className:t="",style:n={}})=>s.jsx("h5",{className:t,style:{fontFamily:en.fontFamily,fontWeight:en.fontWeight,fontSize:en.fontSize.mobile,lineHeight:en.lineHeight,marginTop:en.marginTop,marginBottom:en.marginBottom.mobile,...n},children:e}),Rv=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:tn.fontFamily,fontWeight:tn.fontWeight,fontSize:tn.fontSize.mobile,lineHeight:tn.lineHeight,marginTop:tn.marginTop,marginBottom:tn.marginBottom.mobile,...n},children:e}),Hv=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:nn.fontFamily,fontWeight:nn.fontWeight,fontSize:nn.fontSize.mobile,lineHeight:nn.lineHeight,marginTop:nn.marginTop,marginBottom:nn.marginBottom.mobile,...n},children:e}),Ov=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:rn.fontFamily,fontWeight:rn.fontWeight,fontSize:rn.fontSize.mobile,lineHeight:rn.lineHeight,marginTop:rn.marginTop,marginBottom:rn.marginBottom.mobile,...n},children:e}),zv=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:an.fontFamily,fontWeight:an.fontWeight,fontSize:an.fontSize.mobile,lineHeight:an.lineHeight,marginTop:an.marginTop,marginBottom:an.marginBottom.mobile,...n},children:e}),Wv=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:sn.fontFamily,fontWeight:sn.fontWeight,fontSize:sn.fontSize.mobile,lineHeight:sn.lineHeight,marginTop:sn.marginTop,marginBottom:sn.marginBottom.mobile,...n},children:e}),Uv=()=>E.useMemo(()=>Pv,[]),Gv=()=>E.useMemo(()=>({BorderColorDefault:Do,BorderColorForm:Mo,BorderColorCard:$o,BorderColorCardHover:Po,BorderColorError:Io,ColorPrimaryBlue:Fo,ColorPrimaryWhite:Lo,ColorPrimaryBlack:Bo,ColorPrimaryGreen:Eo,ColorPrimaryPurple:Ao,ColorPrimaryDarkPink:Ro,ColorPrimaryRed:Ho,ColorPrimaryYellow:Oo,ColorSecondaryPaleYellow:zo,ColorSecondaryWarmYellow:Wo,ColorSecondaryOrange:Uo,ColorSecondaryAquaGreen:Go,ColorSecondaryPink:Vo,ColorGrey1:Yo,ColorGrey2:qo,ColorGrey3:Xo,ColorGrey4:Ko,ColorGrey5:Zo}),[]),Vv=()=>E.useMemo(()=>({Spacing0:cl,Spacing1:ul,Spacing2:dl,Spacing3:fl,Spacing4:hl,Spacing5:pl,Spacing6:ml,Spacing7:gl,Spacing8:_l,Spacing9:bl}),[]),Yv=()=>E.useMemo(()=>({Mobile:{Size14:oa,Size16:ua,Size19:ha,Size22:ga,Size26:ya,Size36:wa,Size48:Ca},Tablet:{Size14:la,Size16:da,Size19:pa,Size22:_a,Size26:xa,Size36:Sa,Size48:Ta},Print:{Size14:ca,Size16:fa,Size19:ma,Size22:ba,Size26:va,Size36:ka,Size48:Na},Family:{Base:ta,Fallback:na,Print:ra},Weight:{Normal:aa,Bold:ia,Light:sa},Base:{Size:Zi,LineHeight:Ji},FontFamilyBase:ta,FontFamilyFallback:na,FontFamilyPrint:ra,FontWeightNormal:aa,FontWeightBold:ia,FontWeightLight:sa,FontSize14Mobile:oa,FontSize14Tablet:la,FontSize14Print:ca,FontSize16Mobile:ua,FontSize16Tablet:da,FontSize16Print:fa,FontSize19Mobile:ha,FontSize19Tablet:pa,FontSize19Print:ma,FontSize22Mobile:ga,FontSize22Tablet:_a,FontSize22Print:ba,FontSize26Mobile:ya,FontSize26Tablet:xa,FontSize26Print:va,FontSize36Mobile:wa,FontSize36Tablet:Sa,FontSize36Print:ka,FontSize48Mobile:Ca,FontSize48Tablet:Ta,FontSize48Print:Na,FontSizeBase:Zi,FontLineHeightBase:Ji}),[]),qv=()=>E.useMemo(()=>({Mobile:{Size0:$i,Size1:Ii,Size2:Li,Size3:Ei,Size4:Ri,Size5:Oi,Size6:Wi,Size7:Gi,Size8:Yi,Size9:Xi},Tablet:{Size0:Pi,Size1:Fi,Size2:Bi,Size3:Ai,Size4:Hi,Size5:zi,Size6:Ui,Size7:Vi,Size8:qi,Size9:Ki},SpacingResponsive0Mobile:$i,SpacingResponsive0Tablet:Pi,SpacingResponsive1Mobile:Ii,SpacingResponsive1Tablet:Fi,SpacingResponsive2Mobile:Li,SpacingResponsive2Tablet:Bi,SpacingResponsive3Mobile:Ei,SpacingResponsive3Tablet:Ai,SpacingResponsive4Mobile:Ri,SpacingResponsive4Tablet:Hi,SpacingResponsive5Mobile:Oi,SpacingResponsive5Tablet:zi,SpacingResponsive6Mobile:Wi,SpacingResponsive6Tablet:Ui,SpacingResponsive7Mobile:Gi,SpacingResponsive7Tablet:Vi,SpacingResponsive8Mobile:Yi,SpacingResponsive8Tablet:qi,SpacingResponsive9Mobile:Xi,SpacingResponsive9Tablet:Ki}),[]),Xv=()=>E.useMemo(()=>({ButtonSpacingPaddingVerticalMobile:Jo,ButtonSpacingPaddingHorizontalMobile:Qo,ButtonSpacingPaddingVerticalDesktop:el,ButtonSpacingPaddingHorizontalDesktop:tl,CardSpacingPaddingMobile:nl,CardSpacingPaddingDesktop:rl,CardSpacingHeadingMargin:al,FormSpacingInputPadding:il,FormSpacingInputMinHeight:sl,FormSpacingCheckboxSize:ol,FormSpacingCheckboxLabelPadding:ll}),[]),Kv=()=>E.useMemo(()=>({xl:Kt,l:Zt,m:Jt,s:Qt,xs:en}),[]),Zv=()=>E.useMemo(()=>({body:tn,bodyLarge:nn,bodySmall:rn,ledeText:an,ledeTextSmall:sn}),[]),Jv=()=>E.useMemo(()=>({headings:{xl:Kt,l:Zt,m:Jt,s:Qt,xs:en},paragraphs:{body:tn,bodyLarge:nn,bodySmall:rn,ledeText:an,ledeTextSmall:sn},fonts:{family:{base:ta,fallback:na,print:ra},weight:{normal:aa,bold:ia,light:sa},sizes:{mobile:{size14:oa,size16:ua,size19:ha,size22:ga,size26:ya,size36:wa,size48:Ca},tablet:{size14:la,size16:da,size19:pa,size22:_a,size26:xa,size36:Sa,size48:Ta},print:{size14:ca,size16:fa,size19:ma,size22:ba,size26:va,size36:ka,size48:Na}}}}),[]);function Qv(e={}){const{initialLayout:t=void 0,fallbackLayout:n="two-column"}=e,[r,a]=X.useState(t),i=X.useCallback(()=>a("three-column"),[]),o=X.useCallback(()=>a(u=>u==="three-column"?n:u),[n]),l=X.useCallback(()=>a(u=>u==="three-column"?n:"three-column"),[n]);return{forceLayout:r,setLayout:a,drillIn:i,drillOut:o,toggle:l,isDrilledIn:r==="three-column"}}const yl={fontPath:"https://assets.nhs.uk/fonts/",includeFontFace:!0,useFallbacks:!0,fontWeights:[400,600]},wt={normal:{woff2:"FrutigerLTW01-55Roman.woff2",woff:"FrutigerLTW01-55Roman.woff",ttf:"FrutigerLTW01-55Roman.ttf",eot:"FrutigerLTW01-55Roman.eot"},bold:{woff2:"FrutigerLTW01-65Bold.woff2",woff:"FrutigerLTW01-65Bold.woff",ttf:"FrutigerLTW01-65Bold.ttf",eot:"FrutigerLTW01-65Bold.eot"}};function e1(e={}){const{fontPath:t,fontWeights:n}={...yl,...e},r=[];return n?.includes(400)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 400;
  src: url("${t}${wt.normal.eot}?#iefix") format("eot"),
       url("${t}${wt.normal.woff2}") format("woff2"),
       url("${t}${wt.normal.woff}") format("woff"),
       url("${t}${wt.normal.ttf}") format("truetype");
  src: url("${t}${wt.normal.eot}");
}`),n?.includes(600)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 600;
  src: url("${t}${wt.bold.eot}?#iefix") format("eot"),
       url("${t}${wt.bold.woff2}") format("woff2"),
       url("${t}${wt.bold.woff}") format("woff"),
       url("${t}${wt.bold.ttf}") format("truetype");
  src: url("${t}${wt.bold.eot}");
}`),r.join(`
`)}function t1(e={}){if(typeof document>"u")return;const{fontPath:t,fontWeights:n}={...yl,...e};[...n?.includes(400)?[{href:`${t}${wt.normal.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${wt.normal.woff}`,as:"font",type:"font/woff"}]:[],...n?.includes(600)?[{href:`${t}${wt.bold.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${wt.bold.woff}`,as:"font",type:"font/woff"}]:[]].forEach(a=>{const i=document.createElement("link");i.rel="preload",i.href=a.href,i.as=a.as,i.type=a.type,i.crossOrigin="anonymous",document.head.appendChild(i)})}const n1='"Frutiger W01", Arial, Helvetica, sans-serif',r1="Arial, Helvetica, sans-serif";async function a1(){if(typeof document>"u"||!document.fonts)return!1;try{return await document.fonts.load('1em "Frutiger W01"'),document.fonts.check('1em "Frutiger W01"')}catch{return!1}}function xn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Dt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},xr={duration:.5,overwrite:!1,delay:0},xl,mt,We,At=1e8,He=1/At,vl=Math.PI*2,i1=vl/4,s1=0,Pm=Math.sqrt,o1=Math.cos,l1=Math.sin,ft=function(t){return typeof t=="string"},Xe=function(t){return typeof t=="function"},vn=function(t){return typeof t=="number"},wl=function(t){return typeof t>"u"},on=function(t){return typeof t=="object"},kt=function(t){return t!==!1},Sl=function(){return typeof window<"u"},Qi=function(t){return Xe(t)||ft(t)},Im=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},yt=Array.isArray,kl=/(?:-?\.?\d|\.)+/gi,Fm=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,vr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Cl=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Lm=/[+-]=-?[.\d]+/,Bm=/[^,'"\[\]\s]+/gi,c1=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ve,ln,Tl,Nl,Mt={},es={},Em,Am=function(t){return(es=Sr(t,Mt))&&Nt},jl=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},ja=function(t,n){return!n&&console.warn(t)},Rm=function(t,n){return t&&(Mt[t]=n)&&es&&(es[t]=n)||Mt},Da=function(){return 0},u1={suppressEvents:!0,isStart:!0,kill:!1},ts={suppressEvents:!0,kill:!1},d1={suppressEvents:!0},Dl={},$n=[],Ml={},Hm,$t={},$l={},Om=30,ns=[],Pl="",Il=function(t){var n=t[0],r,a;if(on(n)||Xe(n)||(t=[t]),!(r=(n._gsap||{}).harness)){for(a=ns.length;a--&&!ns[a].targetTest(n););r=ns[a]}for(a=t.length;a--;)t[a]&&(t[a]._gsap||(t[a]._gsap=new gg(t[a],r)))||t.splice(a,1);return t},Kn=function(t){return t._gsap||Il(Ht(t))[0]._gsap},zm=function(t,n,r){return(r=t[n])&&Xe(r)?t[n]():wl(r)&&t.getAttribute&&t.getAttribute(n)||r},Ct=function(t,n){return(t=t.split(",")).forEach(n)||t},et=function(t){return Math.round(t*1e5)/1e5||0},at=function(t){return Math.round(t*1e7)/1e7||0},wr=function(t,n){var r=n.charAt(0),a=parseFloat(n.substr(2));return t=parseFloat(t),r==="+"?t+a:r==="-"?t-a:r==="*"?t*a:t/a},f1=function(t,n){for(var r=n.length,a=0;t.indexOf(n[a])<0&&++a<r;);return a<r},rs=function(){var t=$n.length,n=$n.slice(0),r,a;for(Ml={},$n.length=0,r=0;r<t;r++)a=n[r],a&&a._lazy&&(a.render(a._lazy[0],a._lazy[1],!0)._lazy=0)},Fl=function(t){return!!(t._initted||t._startAt||t.add)},Wm=function(t,n,r,a){$n.length&&!mt&&rs(),t.render(n,r,!!(mt&&n<0&&Fl(t))),$n.length&&!mt&&rs()},Um=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(Bm).length<2?n:ft(t)?t.trim():t},Gm=function(t){return t},Pt=function(t,n){for(var r in n)r in t||(t[r]=n[r]);return t},h1=function(t){return function(n,r){for(var a in r)a in n||a==="duration"&&t||a==="ease"||(n[a]=r[a])}},Sr=function(t,n){for(var r in n)t[r]=n[r];return t},Vm=function e(t,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(t[r]=on(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},as=function(t,n){var r={},a;for(a in t)a in n||(r[a]=t[a]);return r},Ma=function(t){var n=t.parent||Ve,r=t.keyframes?h1(yt(t.keyframes)):Pt;if(kt(t.inherit))for(;n;)r(t,n.vars.defaults),n=n.parent||n._dp;return t},p1=function(t,n){for(var r=t.length,a=r===n.length;a&&r--&&t[r]===n[r];);return r<0},Ym=function(t,n,r,a,i){var o=t[a],l;if(i)for(l=n[i];o&&o[i]>l;)o=o._prev;return o?(n._next=o._next,o._next=n):(n._next=t[r],t[r]=n),n._next?n._next._prev=n:t[a]=n,n._prev=o,n.parent=n._dp=t,n},is=function(t,n,r,a){r===void 0&&(r="_first"),a===void 0&&(a="_last");var i=n._prev,o=n._next;i?i._next=o:t[r]===n&&(t[r]=o),o?o._prev=i:t[a]===n&&(t[a]=i),n._next=n._prev=n.parent=null},Pn=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Zn=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},m1=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},Ll=function(t,n,r,a){return t._startAt&&(mt?t._startAt.revert(ts):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,a))},g1=function e(t){return!t||t._ts&&e(t.parent)},qm=function(t){return t._repeat?kr(t._tTime,t=t.duration()+t._rDelay)*t:0},kr=function(t,n){var r=Math.floor(t=at(t/n));return t&&r===t?r-1:r},ss=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},os=function(t){return t._end=at(t._start+(t._tDur/Math.abs(t._ts||t._rts||He)||0))},ls=function(t,n){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=at(r._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),os(t),r._dirty||Zn(r,t)),t},Xm=function(t,n){var r;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(r=ss(t.rawTime(),n),(!n._dur||Pa(0,n.totalDuration(),r)-n._tTime>He)&&n.render(r,!0)),Zn(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-He}},cn=function(t,n,r,a){return n.parent&&Pn(n),n._start=at((vn(r)?r:r||t!==Ve?Rt(t,r,n):t._time)+n._delay),n._end=at(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),Ym(t,n,"_first","_last",t._sort?"_start":0),Bl(n)||(t._recent=n),a||Xm(t,n),t._ts<0&&ls(t,t._tTime),t},Km=function(t,n){return(Mt.ScrollTrigger||jl("scrollTrigger",n))&&Mt.ScrollTrigger.create(n,t)},Zm=function(t,n,r,a,i){if(Gl(t,n,i),!t._initted)return 1;if(!r&&t._pt&&!mt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Hm!==Ft.frame)return $n.push(t),t._lazy=[i,a],1},_1=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Bl=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},b1=function(t,n,r,a){var i=t.ratio,o=n<0||!n&&(!t._start&&_1(t)&&!(!t._initted&&Bl(t))||(t._ts<0||t._dp._ts<0)&&!Bl(t))?0:1,l=t._rDelay,u=0,c,d,f;if(l&&t._repeat&&(u=Pa(0,t._tDur,n),d=kr(u,l),t._yoyo&&d&1&&(o=1-o),d!==kr(t._tTime,l)&&(i=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==i||mt||a||t._zTime===He||!n&&t._zTime){if(!t._initted&&Zm(t,n,a,r,u))return;for(f=t._zTime,t._zTime=n||(r?He:0),r||(r=n&&!f),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=u,c=t._pt;c;)c.r(o,c.d),c=c._next;n<0&&Ll(t,n,r,!0),t._onUpdate&&!r&&It(t,"onUpdate"),u&&t._repeat&&!r&&t.parent&&It(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===o&&(o&&Pn(t,1),!r&&!mt&&(It(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},y1=function(t,n,r){var a;if(r>n)for(a=t._first;a&&a._start<=r;){if(a.data==="isPause"&&a._start>n)return a;a=a._next}else for(a=t._last;a&&a._start>=r;){if(a.data==="isPause"&&a._start<n)return a;a=a._prev}},Cr=function(t,n,r,a){var i=t._repeat,o=at(n)||0,l=t._tTime/t._tDur;return l&&!a&&(t._time*=o/t._dur),t._dur=o,t._tDur=i?i<0?1e10:at(o*(i+1)+t._rDelay*i):o,l>0&&!a&&ls(t,t._tTime=t._tDur*l),t.parent&&os(t),r||Zn(t.parent,t),t},Jm=function(t){return t instanceof gt?Zn(t):Cr(t,t._dur)},x1={_start:0,endTime:Da,totalDuration:Da},Rt=function e(t,n,r){var a=t.labels,i=t._recent||x1,o=t.duration()>=At?i.endTime(!1):t._dur,l,u,c;return ft(n)&&(isNaN(n)||n in a)?(u=n.charAt(0),c=n.substr(-1)==="%",l=n.indexOf("="),u==="<"||u===">"?(l>=0&&(n=n.replace(/=/,"")),(u==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(n.substr(1))||0)*(c?(l<0?i:r).totalDuration()/100:1)):l<0?(n in a||(a[n]=o),a[n]):(u=parseFloat(n.charAt(l-1)+n.substr(l+1)),c&&r&&(u=u/100*(yt(r)?r[0]:r).totalDuration()),l>1?e(t,n.substr(0,l-1),r)+u:o+u)):n==null?o:+n},$a=function(t,n,r){var a=vn(n[1]),i=(a?2:1)+(t<2?0:1),o=n[i],l,u;if(a&&(o.duration=n[1]),o.parent=r,t){for(l=o,u=r;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=kt(u.vars.inherit)&&u.parent;o.immediateRender=kt(l.immediateRender),t<2?o.runBackwards=1:o.startAt=n[i-1]}return new tt(n[0],o,n[i+1])},In=function(t,n){return t||t===0?n(t):n},Pa=function(t,n,r){return r<t?t:r>n?n:r},xt=function(t,n){return!ft(t)||!(n=c1.exec(t))?"":n[1]},v1=function(t,n,r){return In(r,function(a){return Pa(t,n,a)})},El=[].slice,Qm=function(t,n){return t&&on(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&on(t[0]))&&!t.nodeType&&t!==ln},w1=function(t,n,r){return r===void 0&&(r=[]),t.forEach(function(a){var i;return ft(a)&&!n||Qm(a,1)?(i=r).push.apply(i,Ht(a)):r.push(a)})||r},Ht=function(t,n,r){return We&&!n&&We.selector?We.selector(t):ft(t)&&!r&&(Tl||!Nr())?El.call((n||Nl).querySelectorAll(t),0):yt(t)?w1(t,r):Qm(t)?El.call(t,0):t?[t]:[]},Al=function(t){return t=Ht(t)[0]||ja("Invalid scope")||{},function(n){var r=t.current||t.nativeElement||t;return Ht(n,r.querySelectorAll?r:r===t?ja("Invalid scope")||Nl.createElement("div"):t)}},eg=function(t){return t.sort(function(){return .5-Math.random()})},tg=function(t){if(Xe(t))return t;var n=on(t)?t:{each:t},r=Jn(n.ease),a=n.from||0,i=parseFloat(n.base)||0,o={},l=a>0&&a<1,u=isNaN(a)||l,c=n.axis,d=a,f=a;return ft(a)?d=f={center:.5,edges:.5,end:1}[a]||0:!l&&u&&(d=a[0],f=a[1]),function(m,g,y){var h=(y||n).length,p=o[h],b,C,T,w,j,I,$,N,x;if(!p){if(x=n.grid==="auto"?0:(n.grid||[1,At])[1],!x){for($=-At;$<($=y[x++].getBoundingClientRect().left)&&x<h;);x<h&&x--}for(p=o[h]=[],b=u?Math.min(x,h)*d-.5:a%x,C=x===At?0:u?h*f/x-.5:a/x|0,$=0,N=At,I=0;I<h;I++)T=I%x-b,w=C-(I/x|0),p[I]=j=c?Math.abs(c==="y"?w:T):Pm(T*T+w*w),j>$&&($=j),j<N&&(N=j);a==="random"&&eg(p),p.max=$-N,p.min=N,p.v=h=(parseFloat(n.amount)||parseFloat(n.each)*(x>h?h-1:c?c==="y"?h/x:x:Math.max(x,h/x))||0)*(a==="edges"?-1:1),p.b=h<0?i-h:i,p.u=xt(n.amount||n.each)||0,r=r&&h<0?hg(r):r}return h=(p[m]-p.min)/p.max||0,at(p.b+(r?r(h):h)*p.v)+p.u}},Rl=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var a=at(Math.round(parseFloat(r)/t)*t*n);return(a-a%1)/n+(vn(r)?0:xt(r))}},ng=function(t,n){var r=yt(t),a,i;return!r&&on(t)&&(a=r=t.radius||At,t.values?(t=Ht(t.values),(i=!vn(t[0]))&&(a*=a)):t=Rl(t.increment)),In(n,r?Xe(t)?function(o){return i=t(o),Math.abs(i-o)<=a?i:o}:function(o){for(var l=parseFloat(i?o.x:o),u=parseFloat(i?o.y:0),c=At,d=0,f=t.length,m,g;f--;)i?(m=t[f].x-l,g=t[f].y-u,m=m*m+g*g):m=Math.abs(t[f]-l),m<c&&(c=m,d=f);return d=!a||c<=a?t[d]:o,i||d===o||vn(o)?d:d+xt(o)}:Rl(t))},rg=function(t,n,r,a){return In(yt(t)?!n:r===!0?!!(r=0):!a,function(){return yt(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(a=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(n-t+r*.99))/r)*r*a)/a})},S1=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(a){return n.reduce(function(i,o){return o(i)},a)}},k1=function(t,n){return function(r){return t(parseFloat(r))+(n||xt(r))}},C1=function(t,n,r){return ig(t,n,0,1,r)},ag=function(t,n,r){return In(r,function(a){return t[~~n(a)]})},T1=function e(t,n,r){var a=n-t;return yt(t)?ag(t,e(0,t.length),n):In(r,function(i){return(a+(i-t)%a)%a+t})},N1=function e(t,n,r){var a=n-t,i=a*2;return yt(t)?ag(t,e(0,t.length-1),n):In(r,function(o){return o=(i+(o-t)%i)%i||0,t+(o>a?i-o:o)})},Ia=function(t){for(var n=0,r="",a,i,o,l;~(a=t.indexOf("random(",n));)o=t.indexOf(")",a),l=t.charAt(a+7)==="[",i=t.substr(a+7,o-a-7).match(l?Bm:kl),r+=t.substr(n,a-n)+rg(l?i:+i[0],l?0:+i[1],+i[2]||1e-5),n=o+1;return r+t.substr(n,t.length-n)},ig=function(t,n,r,a,i){var o=n-t,l=a-r;return In(i,function(u){return r+((u-t)/o*l||0)})},j1=function e(t,n,r,a){var i=isNaN(t+n)?0:function(g){return(1-g)*t+g*n};if(!i){var o=ft(t),l={},u,c,d,f,m;if(r===!0&&(a=1)&&(r=null),o)t={p:t},n={p:n};else if(yt(t)&&!yt(n)){for(d=[],f=t.length,m=f-2,c=1;c<f;c++)d.push(e(t[c-1],t[c]));f--,i=function(y){y*=f;var h=Math.min(m,~~y);return d[h](y-h)},r=n}else a||(t=Sr(yt(t)?[]:{},t));if(!d){for(u in n)Wl.call(l,t,u,"get",n[u]);i=function(y){return ql(y,l)||(o?t.p:t)}}}return In(r,i)},sg=function(t,n,r){var a=t.labels,i=At,o,l,u;for(o in a)l=a[o]-n,l<0==!!r&&l&&i>(l=Math.abs(l))&&(u=o,i=l);return u},It=function(t,n,r){var a=t.vars,i=a[n],o=We,l=t._ctx,u,c,d;if(i)return u=a[n+"Params"],c=a.callbackScope||t,r&&$n.length&&rs(),l&&(We=l),d=u?i.apply(c,u):i.call(c),We=o,d},Fa=function(t){return Pn(t),t.scrollTrigger&&t.scrollTrigger.kill(!!mt),t.progress()<1&&It(t,"onInterrupt"),t},Tr,og=[],lg=function(t){if(t)if(t=!t.name&&t.default||t,Sl()||t.headless){var n=t.name,r=Xe(t),a=n&&!r&&t.init?function(){this._props=[]}:t,i={init:Da,render:ql,add:Wl,kill:U1,modifier:W1,rawVars:0},o={targetTest:0,get:0,getSetter:Yl,aliases:{},register:0};if(Nr(),t!==a){if($t[n])return;Pt(a,Pt(as(t,i),o)),Sr(a.prototype,Sr(i,as(t,o))),$t[a.prop=n]=a,t.targetTest&&(ns.push(a),Dl[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}Rm(n,a),t.register&&t.register(Nt,a,Tt)}else og.push(t)},Oe=255,La={aqua:[0,Oe,Oe],lime:[0,Oe,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Oe],navy:[0,0,128],white:[Oe,Oe,Oe],olive:[128,128,0],yellow:[Oe,Oe,0],orange:[Oe,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Oe,0,0],pink:[Oe,192,203],cyan:[0,Oe,Oe],transparent:[Oe,Oe,Oe,0]},Hl=function(t,n,r){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(r-n)*t*6:t<.5?r:t*3<2?n+(r-n)*(2/3-t)*6:n)*Oe+.5|0},cg=function(t,n,r){var a=t?vn(t)?[t>>16,t>>8&Oe,t&Oe]:0:La.black,i,o,l,u,c,d,f,m,g,y;if(!a){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),La[t])a=La[t];else if(t.charAt(0)==="#"){if(t.length<6&&(i=t.charAt(1),o=t.charAt(2),l=t.charAt(3),t="#"+i+i+o+o+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return a=parseInt(t.substr(1,6),16),[a>>16,a>>8&Oe,a&Oe,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),a=[t>>16,t>>8&Oe,t&Oe]}else if(t.substr(0,3)==="hsl"){if(a=y=t.match(kl),!n)u=+a[0]%360/360,c=+a[1]/100,d=+a[2]/100,o=d<=.5?d*(c+1):d+c-d*c,i=d*2-o,a.length>3&&(a[3]*=1),a[0]=Hl(u+1/3,i,o),a[1]=Hl(u,i,o),a[2]=Hl(u-1/3,i,o);else if(~t.indexOf("="))return a=t.match(Fm),r&&a.length<4&&(a[3]=1),a}else a=t.match(kl)||La.transparent;a=a.map(Number)}return n&&!y&&(i=a[0]/Oe,o=a[1]/Oe,l=a[2]/Oe,f=Math.max(i,o,l),m=Math.min(i,o,l),d=(f+m)/2,f===m?u=c=0:(g=f-m,c=d>.5?g/(2-f-m):g/(f+m),u=f===i?(o-l)/g+(o<l?6:0):f===o?(l-i)/g+2:(i-o)/g+4,u*=60),a[0]=~~(u+.5),a[1]=~~(c*100+.5),a[2]=~~(d*100+.5)),r&&a.length<4&&(a[3]=1),a},ug=function(t){var n=[],r=[],a=-1;return t.split(Fn).forEach(function(i){var o=i.match(vr)||[];n.push.apply(n,o),r.push(a+=o.length+1)}),n.c=r,n},dg=function(t,n,r){var a="",i=(t+a).match(Fn),o=n?"hsla(":"rgba(",l=0,u,c,d,f;if(!i)return t;if(i=i.map(function(m){return(m=cg(m,n,1))&&o+(n?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),r&&(d=ug(t),u=r.c,u.join(a)!==d.c.join(a)))for(c=t.replace(Fn,"1").split(vr),f=c.length-1;l<f;l++)a+=c[l]+(~u.indexOf(l)?i.shift()||o+"0,0,0,0)":(d.length?d:i.length?i:r).shift());if(!c)for(c=t.split(Fn),f=c.length-1;l<f;l++)a+=c[l]+i[l];return a+c[f]},Fn=(function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in La)e+="|"+t+"\\b";return new RegExp(e+")","gi")})(),D1=/hsl[a]?\(/,fg=function(t){var n=t.join(" "),r;if(Fn.lastIndex=0,Fn.test(n))return r=D1.test(n),t[1]=dg(t[1],r),t[0]=dg(t[0],r,ug(t[1])),!0},Ba,Ft=(function(){var e=Date.now,t=500,n=33,r=e(),a=r,i=1e3/240,o=i,l=[],u,c,d,f,m,g,y=function h(p){var b=e()-a,C=p===!0,T,w,j,I;if((b>t||b<0)&&(r+=b-n),a+=b,j=a-r,T=j-o,(T>0||C)&&(I=++f.frame,m=j-f.time*1e3,f.time=j=j/1e3,o+=T+(T>=i?4:i-T),w=1),C||(u=c(h)),w)for(g=0;g<l.length;g++)l[g](j,m,I,p)};return f={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(p){return m/(1e3/(p||60))},wake:function(){Em&&(!Tl&&Sl()&&(ln=Tl=window,Nl=ln.document||{},Mt.gsap=Nt,(ln.gsapVersions||(ln.gsapVersions=[])).push(Nt.version),Am(es||ln.GreenSockGlobals||!ln.gsap&&ln||{}),og.forEach(lg)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&f.sleep(),c=d||function(p){return setTimeout(p,o-f.time*1e3+1|0)},Ba=1,y(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(u),Ba=0,c=Da},lagSmoothing:function(p,b){t=p||1/0,n=Math.min(b||33,t)},fps:function(p){i=1e3/(p||240),o=f.time*1e3+i},add:function(p,b,C){var T=b?function(w,j,I,$){p(w,j,I,$),f.remove(T)}:p;return f.remove(p),l[C?"unshift":"push"](T),Nr(),T},remove:function(p,b){~(b=l.indexOf(p))&&l.splice(b,1)&&g>=b&&g--},_listeners:l},f})(),Nr=function(){return!Ba&&Ft.wake()},Fe={},M1=/^[\d.\-M][\d.\-,\s]/,$1=/["']/g,P1=function(t){for(var n={},r=t.substr(1,t.length-3).split(":"),a=r[0],i=1,o=r.length,l,u,c;i<o;i++)u=r[i],l=i!==o-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),n[a]=isNaN(c)?c.replace($1,"").trim():+c,a=u.substr(l+1).trim();return n},I1=function(t){var n=t.indexOf("(")+1,r=t.indexOf(")"),a=t.indexOf("(",n);return t.substring(n,~a&&a<r?t.indexOf(")",r+1):r)},F1=function(t){var n=(t+"").split("("),r=Fe[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[P1(n[1])]:I1(t).split(",").map(Um)):Fe._CE&&M1.test(t)?Fe._CE("",t):r},hg=function(t){return function(n){return 1-t(1-n)}},pg=function e(t,n){for(var r=t._first,a;r;)r instanceof gt?e(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?e(r.timeline,n):(a=r._ease,r._ease=r._yEase,r._yEase=a,r._yoyo=n)),r=r._next},Jn=function(t,n){return t&&(Xe(t)?t:Fe[t]||F1(t))||n},Qn=function(t,n,r,a){r===void 0&&(r=function(u){return 1-n(1-u)}),a===void 0&&(a=function(u){return u<.5?n(u*2)/2:1-n((1-u)*2)/2});var i={easeIn:n,easeOut:r,easeInOut:a},o;return Ct(t,function(l){Fe[l]=Mt[l]=i,Fe[o=l.toLowerCase()]=r;for(var u in i)Fe[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=Fe[l+"."+u]=i[u]}),i},mg=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},Ol=function e(t,n,r){var a=n>=1?n:1,i=(r||(t?.3:.45))/(n<1?n:1),o=i/vl*(Math.asin(1/a)||0),l=function(d){return d===1?1:a*Math.pow(2,-10*d)*l1((d-o)*i)+1},u=t==="out"?l:t==="in"?function(c){return 1-l(1-c)}:mg(l);return i=vl/i,u.config=function(c,d){return e(t,c,d)},u},zl=function e(t,n){n===void 0&&(n=1.70158);var r=function(o){return o?--o*o*((n+1)*o+n)+1:0},a=t==="out"?r:t==="in"?function(i){return 1-r(1-i)}:mg(r);return a.config=function(i){return e(t,i)},a};Ct("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;Qn(e+",Power"+(n-1),t?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})}),Fe.Linear.easeNone=Fe.none=Fe.Linear.easeIn,Qn("Elastic",Ol("in"),Ol("out"),Ol()),(function(e,t){var n=1/t,r=2*n,a=2.5*n,i=function(l){return l<n?e*l*l:l<r?e*Math.pow(l-1.5/t,2)+.75:l<a?e*(l-=2.25/t)*l+.9375:e*Math.pow(l-2.625/t,2)+.984375};Qn("Bounce",function(o){return 1-i(1-o)},i)})(7.5625,2.75),Qn("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),Qn("Circ",function(e){return-(Pm(1-e*e)-1)}),Qn("Sine",function(e){return e===1?1:-o1(e*i1)+1}),Qn("Back",zl("in"),zl("out"),zl()),Fe.SteppedEase=Fe.steps=Mt.SteppedEase={config:function(t,n){t===void 0&&(t=1);var r=1/t,a=t+(n?0:1),i=n?1:0,o=1-He;return function(l){return((a*Pa(0,o,l)|0)+i)*r}}},xr.ease=Fe["quad.out"],Ct("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return Pl+=e+","+e+"Params,"});var gg=function(t,n){this.id=s1++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:zm,this.set=n?n.getSetter:Yl},Ea=(function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,Cr(this,+n.duration,1,1),this.data=n.data,We&&(this._ctx=We,We.data.push(this)),Ba||Ft.wake()}var t=e.prototype;return t.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},t.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},t.totalDuration=function(r){return arguments.length?(this._dirty=0,Cr(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(r,a){if(Nr(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(ls(this,r),!i._dp||i.parent||Xm(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&cn(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!a||this._initted&&Math.abs(this._zTime)===He||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Wm(this,r,a)),this},t.time=function(r,a){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+qm(this))%(this._dur+this._rDelay)||(r?this._dur:0),a):this._time},t.totalProgress=function(r,a){return arguments.length?this.totalTime(this.totalDuration()*r,a):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(r,a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+qm(this),a):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(r,a){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*i,a):this._repeat?kr(this._tTime,i)+1:1},t.timeScale=function(r,a){if(!arguments.length)return this._rts===-He?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?ss(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-He?0:this._rts,this.totalTime(Pa(-Math.abs(this._delay),this.totalDuration(),i),a!==!1),os(this),m1(this)},t.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Nr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==He&&(this._tTime-=He)))),this):this._ps},t.startTime=function(r){if(arguments.length){this._start=r;var a=this.parent||this._dp;return a&&(a._sort||!this.parent)&&cn(a,this,r-this._delay),this}return this._start},t.endTime=function(r){return this._start+(kt(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(r){var a=this.parent||this._dp;return a?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ss(a.rawTime(r),this):this._tTime:this._tTime},t.revert=function(r){r===void 0&&(r=d1);var a=mt;return mt=r,Fl(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),mt=a,this},t.globalTime=function(r){for(var a=this,i=arguments.length?r:a.rawTime();a;)i=a._start+i/(Math.abs(a._ts)||1),a=a._dp;return!this.parent&&this._sat?this._sat.globalTime(r):i},t.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Jm(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(r){if(arguments.length){var a=this._time;return this._rDelay=r,Jm(this),a?this.time(a):this}return this._rDelay},t.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},t.seek=function(r,a){return this.totalTime(Rt(this,r),kt(a))},t.restart=function(r,a){return this.play().totalTime(r?-this._delay:0,kt(a)),this._dur||(this._zTime=-He),this},t.play=function(r,a){return r!=null&&this.seek(r,a),this.reversed(!1).paused(!1)},t.reverse=function(r,a){return r!=null&&this.seek(r||this.totalDuration(),a),this.reversed(!0).paused(!1)},t.pause=function(r,a){return r!=null&&this.seek(r,a),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-He:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-He,this},t.isActive=function(){var r=this.parent||this._dp,a=this._start,i;return!!(!r||this._ts&&this._initted&&r.isActive()&&(i=r.rawTime(!0))>=a&&i<this.endTime(!0)-He)},t.eventCallback=function(r,a,i){var o=this.vars;return arguments.length>1?(a?(o[r]=a,i&&(o[r+"Params"]=i),r==="onUpdate"&&(this._onUpdate=a)):delete o[r],this):o[r]},t.then=function(r){var a=this;return new Promise(function(i){var o=Xe(r)?r:Gm,l=function(){var c=a.then;a.then=null,Xe(o)&&(o=o(a))&&(o.then||o===a)&&(a.then=c),i(o),a.then=c};a._initted&&a.totalProgress()===1&&a._ts>=0||!a._tTime&&a._ts<0?l():a._prom=l})},t.kill=function(){Fa(this)},e})();Pt(Ea.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-He,_prom:0,_ps:!1,_rts:1});var gt=(function(e){$m(t,e);function t(r,a){var i;return r===void 0&&(r={}),i=e.call(this,r)||this,i.labels={},i.smoothChildTiming=!!r.smoothChildTiming,i.autoRemoveChildren=!!r.autoRemoveChildren,i._sort=kt(r.sortChildren),Ve&&cn(r.parent||Ve,xn(i),a),r.reversed&&i.reverse(),r.paused&&i.paused(!0),r.scrollTrigger&&Km(xn(i),r.scrollTrigger),i}var n=t.prototype;return n.to=function(a,i,o){return $a(0,arguments,this),this},n.from=function(a,i,o){return $a(1,arguments,this),this},n.fromTo=function(a,i,o,l){return $a(2,arguments,this),this},n.set=function(a,i,o){return i.duration=0,i.parent=this,Ma(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new tt(a,i,Rt(this,o),1),this},n.call=function(a,i,o){return cn(this,tt.delayedCall(0,a,i),o)},n.staggerTo=function(a,i,o,l,u,c,d){return o.duration=i,o.stagger=o.stagger||l,o.onComplete=c,o.onCompleteParams=d,o.parent=this,new tt(a,o,Rt(this,u)),this},n.staggerFrom=function(a,i,o,l,u,c,d){return o.runBackwards=1,Ma(o).immediateRender=kt(o.immediateRender),this.staggerTo(a,i,o,l,u,c,d)},n.staggerFromTo=function(a,i,o,l,u,c,d,f){return l.startAt=o,Ma(l).immediateRender=kt(l.immediateRender),this.staggerTo(a,i,l,u,c,d,f)},n.render=function(a,i,o){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=a<=0?0:at(a),f=this._zTime<0!=a<0&&(this._initted||!c),m,g,y,h,p,b,C,T,w,j,I,$;if(this!==Ve&&d>u&&a>=0&&(d=u),d!==this._tTime||o||f){if(l!==this._time&&c&&(d+=this._time-l,a+=this._time-l),m=d,w=this._start,T=this._ts,b=!T,f&&(c||(l=this._zTime),(a||!i)&&(this._zTime=a)),this._repeat){if(I=this._yoyo,p=c+this._rDelay,this._repeat<-1&&a<0)return this.totalTime(p*100+a,i,o);if(m=at(d%p),d===u?(h=this._repeat,m=c):(j=at(d/p),h=~~j,h&&h===j&&(m=c,h--),m>c&&(m=c)),j=kr(this._tTime,p),!l&&this._tTime&&j!==h&&this._tTime-j*p-this._dur<=0&&(j=h),I&&h&1&&(m=c-m,$=1),h!==j&&!this._lock){var N=I&&j&1,x=N===(I&&h&1);if(h<j&&(N=!N),l=N?0:d%c?c:d,this._lock=1,this.render(l||($?0:at(h*p)),i,!c)._lock=0,this._tTime=d,!i&&this.parent&&It(this,"onRepeat"),this.vars.repeatRefresh&&!$&&(this.invalidate()._lock=1),l&&l!==this._time||b!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,x&&(this._lock=2,l=N?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!$&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;pg(this,$)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(C=y1(this,at(l),at(m)),C&&(d-=m-(m=C._start))),this._tTime=d,this._time=m,this._act=!T,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=a,l=0),!l&&d&&!i&&!j&&(It(this,"onStart"),this._tTime!==d))return this;if(m>=l&&a>=0)for(g=this._first;g;){if(y=g._next,(g._act||m>=g._start)&&g._ts&&C!==g){if(g.parent!==this)return this.render(a,i,o);if(g.render(g._ts>0?(m-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(m-g._start)*g._ts,i,o),m!==this._time||!this._ts&&!b){C=0,y&&(d+=this._zTime=-He);break}}g=y}else{g=this._last;for(var F=a<0?a:m;g;){if(y=g._prev,(g._act||F<=g._end)&&g._ts&&C!==g){if(g.parent!==this)return this.render(a,i,o);if(g.render(g._ts>0?(F-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(F-g._start)*g._ts,i,o||mt&&Fl(g)),m!==this._time||!this._ts&&!b){C=0,y&&(d+=this._zTime=F?-He:He);break}}g=y}}if(C&&!i&&(this.pause(),C.render(m>=l?0:-He)._zTime=m>=l?1:-1,this._ts))return this._start=w,os(this),this.render(a,i,o);this._onUpdate&&!i&&It(this,"onUpdate",!0),(d===u&&this._tTime>=this.totalDuration()||!d&&l)&&(w===this._start||Math.abs(T)!==Math.abs(this._ts))&&(this._lock||((a||!c)&&(d===u&&this._ts>0||!d&&this._ts<0)&&Pn(this,1),!i&&!(a<0&&!l)&&(d||l||!u)&&(It(this,d===u&&a>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(a,i){var o=this;if(vn(i)||(i=Rt(this,i,a)),!(a instanceof Ea)){if(yt(a))return a.forEach(function(l){return o.add(l,i)}),this;if(ft(a))return this.addLabel(a,i);if(Xe(a))a=tt.delayedCall(0,a);else return this}return this!==a?cn(this,a,i):this},n.getChildren=function(a,i,o,l){a===void 0&&(a=!0),i===void 0&&(i=!0),o===void 0&&(o=!0),l===void 0&&(l=-At);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof tt?i&&u.push(c):(o&&u.push(c),a&&u.push.apply(u,c.getChildren(!0,i,o)))),c=c._next;return u},n.getById=function(a){for(var i=this.getChildren(1,1,1),o=i.length;o--;)if(i[o].vars.id===a)return i[o]},n.remove=function(a){return ft(a)?this.removeLabel(a):Xe(a)?this.killTweensOf(a):(a.parent===this&&is(this,a),a===this._recent&&(this._recent=this._last),Zn(this))},n.totalTime=function(a,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=at(Ft.time-(this._ts>0?a/this._ts:(this.totalDuration()-a)/-this._ts))),e.prototype.totalTime.call(this,a,i),this._forcing=0,this):this._tTime},n.addLabel=function(a,i){return this.labels[a]=Rt(this,i),this},n.removeLabel=function(a){return delete this.labels[a],this},n.addPause=function(a,i,o){var l=tt.delayedCall(0,i||Da,o);return l.data="isPause",this._hasPause=1,cn(this,l,Rt(this,a))},n.removePause=function(a){var i=this._first;for(a=Rt(this,a);i;)i._start===a&&i.data==="isPause"&&Pn(i),i=i._next},n.killTweensOf=function(a,i,o){for(var l=this.getTweensOf(a,o),u=l.length;u--;)Ln!==l[u]&&l[u].kill(a,i);return this},n.getTweensOf=function(a,i){for(var o=[],l=Ht(a),u=this._first,c=vn(i),d;u;)u instanceof tt?f1(u._targets,l)&&(c?(!Ln||u._initted&&u._ts)&&u.globalTime(0)<=i&&u.globalTime(u.totalDuration())>i:!i||u.isActive())&&o.push(u):(d=u.getTweensOf(l,i)).length&&o.push.apply(o,d),u=u._next;return o},n.tweenTo=function(a,i){i=i||{};var o=this,l=Rt(o,a),u=i,c=u.startAt,d=u.onStart,f=u.onStartParams,m=u.immediateRender,g,y=tt.to(o,Pt({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:i.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale())||He,onStart:function(){if(o.pause(),!g){var p=i.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale());y._dur!==p&&Cr(y,p,0,1).render(y._time,!0,!0),g=1}d&&d.apply(y,f||[])}},i));return m?y.render(0):y},n.tweenFromTo=function(a,i,o){return this.tweenTo(i,Pt({startAt:{time:Rt(this,a)}},o))},n.recent=function(){return this._recent},n.nextLabel=function(a){return a===void 0&&(a=this._time),sg(this,Rt(this,a))},n.previousLabel=function(a){return a===void 0&&(a=this._time),sg(this,Rt(this,a),1)},n.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.previousLabel(this._time+He)},n.shiftChildren=function(a,i,o){o===void 0&&(o=0);for(var l=this._first,u=this.labels,c;l;)l._start>=o&&(l._start+=a,l._end+=a),l=l._next;if(i)for(c in u)u[c]>=o&&(u[c]+=a);return Zn(this)},n.invalidate=function(a){var i=this._first;for(this._lock=0;i;)i.invalidate(a),i=i._next;return e.prototype.invalidate.call(this,a)},n.clear=function(a){a===void 0&&(a=!0);for(var i=this._first,o;i;)o=i._next,this.remove(i),i=o;return this._dp&&(this._time=this._tTime=this._pTime=0),a&&(this.labels={}),Zn(this)},n.totalDuration=function(a){var i=0,o=this,l=o._last,u=At,c,d,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-a:a));if(o._dirty){for(f=o.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>u&&o._sort&&l._ts&&!o._lock?(o._lock=1,cn(o,l,d-l._delay,1)._lock=0):u=d,d<0&&l._ts&&(i-=d,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=d/o._ts,o._time-=d,o._tTime-=d),o.shiftChildren(-d,!1,-1/0),u=0),l._end>i&&l._ts&&(i=l._end),l=c;Cr(o,o===Ve&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(a){if(Ve._ts&&(Wm(Ve,ss(a,Ve)),Hm=Ft.frame),Ft.frame>=Om){Om+=Dt.autoSleep||120;var i=Ve._first;if((!i||!i._ts)&&Dt.autoSleep&&Ft._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||Ft.sleep()}}},t})(Ea);Pt(gt.prototype,{_lock:0,_hasPause:0,_forcing:0});var L1=function(t,n,r,a,i,o,l){var u=new Tt(this._pt,t,n,0,1,wg,null,i),c=0,d=0,f,m,g,y,h,p,b,C;for(u.b=r,u.e=a,r+="",a+="",(b=~a.indexOf("random("))&&(a=Ia(a)),o&&(C=[r,a],o(C,t,n),r=C[0],a=C[1]),m=r.match(Cl)||[];f=Cl.exec(a);)y=f[0],h=a.substring(c,f.index),g?g=(g+1)%5:h.substr(-5)==="rgba("&&(g=1),y!==m[d++]&&(p=parseFloat(m[d-1])||0,u._pt={_next:u._pt,p:h||d===1?h:",",s:p,c:y.charAt(1)==="="?wr(p,y)-p:parseFloat(y)-p,m:g&&g<4?Math.round:0},c=Cl.lastIndex);return u.c=c<a.length?a.substring(c,a.length):"",u.fp=l,(Lm.test(a)||b)&&(u.e=0),this._pt=u,u},Wl=function(t,n,r,a,i,o,l,u,c,d){Xe(a)&&(a=a(i||0,t,o));var f=t[n],m=r!=="get"?r:Xe(f)?c?t[n.indexOf("set")||!Xe(t["get"+n.substr(3)])?n:"get"+n.substr(3)](c):t[n]():f,g=Xe(f)?c?H1:xg:Vl,y;if(ft(a)&&(~a.indexOf("random(")&&(a=Ia(a)),a.charAt(1)==="="&&(y=wr(m,a)+(xt(m)||0),(y||y===0)&&(a=y))),!d||m!==a||Ul)return!isNaN(m*a)&&a!==""?(y=new Tt(this._pt,t,n,+m||0,a-(m||0),typeof f=="boolean"?z1:vg,0,g),c&&(y.fp=c),l&&y.modifier(l,this,t),this._pt=y):(!f&&!(n in t)&&jl(n,a),L1.call(this,t,n,m,a,g,u||Dt.stringFilter,c))},B1=function(t,n,r,a,i){if(Xe(t)&&(t=Aa(t,i,n,r,a)),!on(t)||t.style&&t.nodeType||yt(t)||Im(t))return ft(t)?Aa(t,i,n,r,a):t;var o={},l;for(l in t)o[l]=Aa(t[l],i,n,r,a);return o},_g=function(t,n,r,a,i,o){var l,u,c,d;if($t[t]&&(l=new $t[t]).init(i,l.rawVars?n[t]:B1(n[t],a,i,o,r),r,a,o)!==!1&&(r._pt=u=new Tt(r._pt,i,t,0,1,l.render,l,0,l.priority),r!==Tr))for(c=r._ptLookup[r._targets.indexOf(i)],d=l._props.length;d--;)c[l._props[d]]=u;return l},Ln,Ul,Gl=function e(t,n,r){var a=t.vars,i=a.ease,o=a.startAt,l=a.immediateRender,u=a.lazy,c=a.onUpdate,d=a.runBackwards,f=a.yoyoEase,m=a.keyframes,g=a.autoRevert,y=t._dur,h=t._startAt,p=t._targets,b=t.parent,C=b&&b.data==="nested"?b.vars.targets:p,T=t._overwrite==="auto"&&!xl,w=t.timeline,j,I,$,N,x,F,M,v,L,P,S,D,B;if(w&&(!m||!i)&&(i="none"),t._ease=Jn(i,xr.ease),t._yEase=f?hg(Jn(f===!0?i:f,xr.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!w&&!!a.runBackwards,!w||m&&!a.stagger){if(v=p[0]?Kn(p[0]).harness:0,D=v&&a[v.prop],j=as(a,Dl),h&&(h._zTime<0&&h.progress(1),n<0&&d&&l&&!g?h.render(-1,!0):h.revert(d&&y?ts:u1),h._lazy=0),o){if(Pn(t._startAt=tt.set(p,Pt({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!h&&kt(u),startAt:null,delay:0,onUpdate:c&&function(){return It(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(mt||!l&&!g)&&t._startAt.revert(ts),l&&y&&n<=0&&r<=0){n&&(t._zTime=n);return}}else if(d&&y&&!h){if(n&&(l=!1),$=Pt({overwrite:!1,data:"isFromStart",lazy:l&&!h&&kt(u),immediateRender:l,stagger:0,parent:b},j),D&&($[v.prop]=D),Pn(t._startAt=tt.set(p,$)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(mt?t._startAt.revert(ts):t._startAt.render(-1,!0)),t._zTime=n,!l)e(t._startAt,He,He);else if(!n)return}for(t._pt=t._ptCache=0,u=y&&kt(u)||u&&!y,I=0;I<p.length;I++){if(x=p[I],M=x._gsap||Il(p)[I]._gsap,t._ptLookup[I]=P={},Ml[M.id]&&$n.length&&rs(),S=C===p?I:C.indexOf(x),v&&(L=new v).init(x,D||j,t,S,C)!==!1&&(t._pt=N=new Tt(t._pt,x,L.name,0,1,L.render,L,0,L.priority),L._props.forEach(function(Q){P[Q]=N}),L.priority&&(F=1)),!v||D)for($ in j)$t[$]&&(L=_g($,j,t,S,x,C))?L.priority&&(F=1):P[$]=N=Wl.call(t,x,$,"get",j[$],S,C,0,a.stringFilter);t._op&&t._op[I]&&t.kill(x,t._op[I]),T&&t._pt&&(Ln=t,Ve.killTweensOf(x,P,t.globalTime(n)),B=!t.parent,Ln=0),t._pt&&u&&(Ml[M.id]=1)}F&&Sg(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!B,m&&n<=0&&w.render(At,!0,!0)},E1=function(t,n,r,a,i,o,l,u){var c=(t._pt&&t._ptCache||(t._ptCache={}))[n],d,f,m,g;if(!c)for(c=t._ptCache[n]=[],m=t._ptLookup,g=t._targets.length;g--;){if(d=m[g][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return Ul=1,t.vars[n]="+=0",Gl(t,l),Ul=0,u?ja(n+" not eligible for reset"):1;c.push(d)}for(g=c.length;g--;)f=c[g],d=f._pt||f,d.s=(a||a===0)&&!i?a:d.s+(a||0)+o*d.c,d.c=r-d.s,f.e&&(f.e=et(r)+xt(f.e)),f.b&&(f.b=d.s+xt(f.b))},A1=function(t,n){var r=t[0]?Kn(t[0]).harness:0,a=r&&r.aliases,i,o,l,u;if(!a)return n;i=Sr({},n);for(o in a)if(o in i)for(u=a[o].split(","),l=u.length;l--;)i[u[l]]=i[o];return i},R1=function(t,n,r,a){var i=n.ease||a||"power1.inOut",o,l;if(yt(n))l=r[t]||(r[t]=[]),n.forEach(function(u,c){return l.push({t:c/(n.length-1)*100,v:u,e:i})});else for(o in n)l=r[o]||(r[o]=[]),o==="ease"||l.push({t:parseFloat(t),v:n[o],e:i})},Aa=function(t,n,r,a,i){return Xe(t)?t.call(n,r,a,i):ft(t)&&~t.indexOf("random(")?Ia(t):t},bg=Pl+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",yg={};Ct(bg+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return yg[e]=1});var tt=(function(e){$m(t,e);function t(r,a,i,o){var l;typeof a=="number"&&(i.duration=a,a=i,i=null),l=e.call(this,o?a:Ma(a))||this;var u=l.vars,c=u.duration,d=u.delay,f=u.immediateRender,m=u.stagger,g=u.overwrite,y=u.keyframes,h=u.defaults,p=u.scrollTrigger,b=u.yoyoEase,C=a.parent||Ve,T=(yt(r)||Im(r)?vn(r[0]):"length"in a)?[r]:Ht(r),w,j,I,$,N,x,F,M;if(l._targets=T.length?Il(T):ja("GSAP target "+r+" not found. https://gsap.com",!Dt.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,y||m||Qi(c)||Qi(d)){if(a=l.vars,w=l.timeline=new gt({data:"nested",defaults:h||{},targets:C&&C.data==="nested"?C.vars.targets:T}),w.kill(),w.parent=w._dp=xn(l),w._start=0,m||Qi(c)||Qi(d)){if($=T.length,F=m&&tg(m),on(m))for(N in m)~bg.indexOf(N)&&(M||(M={}),M[N]=m[N]);for(j=0;j<$;j++)I=as(a,yg),I.stagger=0,b&&(I.yoyoEase=b),M&&Sr(I,M),x=T[j],I.duration=+Aa(c,xn(l),j,x,T),I.delay=(+Aa(d,xn(l),j,x,T)||0)-l._delay,!m&&$===1&&I.delay&&(l._delay=d=I.delay,l._start+=d,I.delay=0),w.to(x,I,F?F(j,x,T):0),w._ease=Fe.none;w.duration()?c=d=0:l.timeline=0}else if(y){Ma(Pt(w.vars.defaults,{ease:"none"})),w._ease=Jn(y.ease||a.ease||"none");var v=0,L,P,S;if(yt(y))y.forEach(function(D){return w.to(T,D,">")}),w.duration();else{I={};for(N in y)N==="ease"||N==="easeEach"||R1(N,y[N],I,y.easeEach);for(N in I)for(L=I[N].sort(function(D,B){return D.t-B.t}),v=0,j=0;j<L.length;j++)P=L[j],S={ease:P.e,duration:(P.t-(j?L[j-1].t:0))/100*c},S[N]=P.v,w.to(T,S,v),v+=S.duration;w.duration()<c&&w.to({},{duration:c-w.duration()})}}c||l.duration(c=w.duration())}else l.timeline=0;return g===!0&&!xl&&(Ln=xn(l),Ve.killTweensOf(T),Ln=0),cn(C,xn(l),i),a.reversed&&l.reverse(),a.paused&&l.paused(!0),(f||!c&&!y&&l._start===at(C._time)&&kt(f)&&g1(xn(l))&&C.data!=="nested")&&(l._tTime=-He,l.render(Math.max(0,-d)||0)),p&&Km(xn(l),p),l}var n=t.prototype;return n.render=function(a,i,o){var l=this._time,u=this._tDur,c=this._dur,d=a<0,f=a>u-He&&!d?u:a<He?0:a,m,g,y,h,p,b,C,T,w;if(!c)b1(this,a,i,o);else if(f!==this._tTime||!a||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(m=f,T=this.timeline,this._repeat){if(h=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(h*100+a,i,o);if(m=at(f%h),f===u?(y=this._repeat,m=c):(p=at(f/h),y=~~p,y&&y===p?(m=c,y--):m>c&&(m=c)),b=this._yoyo&&y&1,b&&(w=this._yEase,m=c-m),p=kr(this._tTime,h),m===l&&!o&&this._initted&&y===p)return this._tTime=f,this;y!==p&&(T&&this._yEase&&pg(T,b),this.vars.repeatRefresh&&!b&&!this._lock&&m!==h&&this._initted&&(this._lock=o=1,this.render(at(h*y),!0).invalidate()._lock=0))}if(!this._initted){if(Zm(this,d?a:m,o,i,f))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&y!==p))return this;if(c!==this._dur)return this.render(a,i,o)}if(this._tTime=f,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=C=(w||this._ease)(m/c),this._from&&(this.ratio=C=1-C),!l&&f&&!i&&!p&&(It(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(C,g.d),g=g._next;T&&T.render(a<0?a:T._dur*T._ease(m/this._dur),i,o)||this._startAt&&(this._zTime=a),this._onUpdate&&!i&&(d&&Ll(this,a,i,o),It(this,"onUpdate")),this._repeat&&y!==p&&this.vars.onRepeat&&!i&&this.parent&&It(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(d&&!this._onUpdate&&Ll(this,a,!0,!0),(a||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Pn(this,1),!i&&!(d&&!l)&&(f||l||b)&&(It(this,f===u?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(a){return(!a||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(a),e.prototype.invalidate.call(this,a)},n.resetTo=function(a,i,o,l,u){Ba||Ft.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||Gl(this,c),d=this._ease(c/this._dur),E1(this,a,i,o,l,d,c,u)?this.resetTo(a,i,o,l,1):(ls(this,0),this.parent||Ym(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(a,i){if(i===void 0&&(i="all"),!a&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?Fa(this):this.scrollTrigger&&this.scrollTrigger.kill(!!mt),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(a,i,Ln&&Ln.vars.overwrite!==!0)._first||Fa(this),this.parent&&o!==this.timeline.totalDuration()&&Cr(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,u=a?Ht(a):l,c=this._ptLookup,d=this._pt,f,m,g,y,h,p,b;if((!i||i==="all")&&p1(l,u))return i==="all"&&(this._pt=0),Fa(this);for(f=this._op=this._op||[],i!=="all"&&(ft(i)&&(h={},Ct(i,function(C){return h[C]=1}),i=h),i=A1(l,i)),b=l.length;b--;)if(~u.indexOf(l[b])){m=c[b],i==="all"?(f[b]=i,y=m,g={}):(g=f[b]=f[b]||{},y=i);for(h in y)p=m&&m[h],p&&((!("kill"in p.d)||p.d.kill(h)===!0)&&is(this,p,"_pt"),delete m[h]),g!=="all"&&(g[h]=1)}return this._initted&&!this._pt&&d&&Fa(this),this},t.to=function(a,i){return new t(a,i,arguments[2])},t.from=function(a,i){return $a(1,arguments)},t.delayedCall=function(a,i,o,l){return new t(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:a,onComplete:i,onReverseComplete:i,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},t.fromTo=function(a,i,o){return $a(2,arguments)},t.set=function(a,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new t(a,i)},t.killTweensOf=function(a,i,o){return Ve.killTweensOf(a,i,o)},t})(Ea);Pt(tt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Ct("staggerTo,staggerFrom,staggerFromTo",function(e){tt[e]=function(){var t=new gt,n=El.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var Vl=function(t,n,r){return t[n]=r},xg=function(t,n,r){return t[n](r)},H1=function(t,n,r,a){return t[n](a.fp,r)},O1=function(t,n,r){return t.setAttribute(n,r)},Yl=function(t,n){return Xe(t[n])?xg:wl(t[n])&&t.setAttribute?O1:Vl},vg=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},z1=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},wg=function(t,n){var r=n._pt,a="";if(!t&&n.b)a=n.b;else if(t===1&&n.e)a=n.e;else{for(;r;)a=r.p+(r.m?r.m(r.s+r.c*t):Math.round((r.s+r.c*t)*1e4)/1e4)+a,r=r._next;a+=n.c}n.set(n.t,n.p,a,n)},ql=function(t,n){for(var r=n._pt;r;)r.r(t,r.d),r=r._next},W1=function(t,n,r,a){for(var i=this._pt,o;i;)o=i._next,i.p===a&&i.modifier(t,n,r),i=o},U1=function(t){for(var n=this._pt,r,a;n;)a=n._next,n.p===t&&!n.op||n.op===t?is(this,n,"_pt"):n.dep||(r=1),n=a;return!r},G1=function(t,n,r,a){a.mSet(t,n,a.m.call(a.tween,r,a.mt),a)},Sg=function(t){for(var n=t._pt,r,a,i,o;n;){for(r=n._next,a=i;a&&a.pr>n.pr;)a=a._next;(n._prev=a?a._prev:o)?n._prev._next=n:i=n,(n._next=a)?a._prev=n:o=n,n=r}t._pt=i},Tt=(function(){function e(n,r,a,i,o,l,u,c,d){this.t=r,this.s=i,this.c=o,this.p=a,this.r=l||vg,this.d=u||this,this.set=c||Vl,this.pr=d||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(r,a,i){this.mSet=this.mSet||this.set,this.set=G1,this.m=r,this.mt=i,this.tween=a},e})();Ct(Pl+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Dl[e]=1}),Mt.TweenMax=Mt.TweenLite=tt,Mt.TimelineLite=Mt.TimelineMax=gt,Ve=new gt({sortChildren:!1,defaults:xr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Dt.stringFilter=fg;var er=[],cs={},V1=[],kg=0,Y1=0,Xl=function(t){return(cs[t]||V1).map(function(n){return n()})},Kl=function(){var t=Date.now(),n=[];t-kg>2&&(Xl("matchMediaInit"),er.forEach(function(r){var a=r.queries,i=r.conditions,o,l,u,c;for(l in a)o=ln.matchMedia(a[l]).matches,o&&(u=1),o!==i[l]&&(i[l]=o,c=1);c&&(r.revert(),u&&n.push(r))}),Xl("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(a){return r.add(null,a)})}),kg=t,Xl("matchMedia"))},Cg=(function(){function e(n,r){this.selector=r&&Al(r),this.data=[],this._r=[],this.isReverted=!1,this.id=Y1++,n&&this.add(n)}var t=e.prototype;return t.add=function(r,a,i){Xe(r)&&(i=a,a=r,r=Xe);var o=this,l=function(){var c=We,d=o.selector,f;return c&&c!==o&&c.data.push(o),i&&(o.selector=Al(i)),We=o,f=a.apply(o,arguments),Xe(f)&&o._r.push(f),We=c,o.selector=d,o.isReverted=!1,f};return o.last=l,r===Xe?l(o,function(u){return o.add(null,u)}):r?o[r]=l:l},t.ignore=function(r){var a=We;We=null,r(this),We=a},t.getTweens=function(){var r=[];return this.data.forEach(function(a){return a instanceof e?r.push.apply(r,a.getTweens()):a instanceof tt&&!(a.parent&&a.parent.data==="nested")&&r.push(a)}),r},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(r,a){var i=this;if(r?(function(){for(var l=i.getTweens(),u=i.data.length,c;u--;)c=i.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,f){return f.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),u=i.data.length;u--;)c=i.data[u],c instanceof gt?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof tt)&&c.revert&&c.revert(r);i._r.forEach(function(d){return d(r,i)}),i.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),a)for(var o=er.length;o--;)er[o].id===this.id&&er.splice(o,1)},t.revert=function(r){this.kill(r||{})},e})(),q1=(function(){function e(n){this.contexts=[],this.scope=n,We&&We.data.push(this)}var t=e.prototype;return t.add=function(r,a,i){on(r)||(r={matches:r});var o=new Cg(0,i||this.scope),l=o.conditions={},u,c,d;We&&!o.selector&&(o.selector=We.selector),this.contexts.push(o),a=o.add("onMatch",a),o.queries=r;for(c in r)c==="all"?d=1:(u=ln.matchMedia(r[c]),u&&(er.indexOf(o)<0&&er.push(o),(l[c]=u.matches)&&(d=1),u.addListener?u.addListener(Kl):u.addEventListener("change",Kl)));return d&&a(o,function(f){return o.add(null,f)}),this},t.revert=function(r){this.kill(r||{})},t.kill=function(r){this.contexts.forEach(function(a){return a.kill(r,!0)})},e})(),us={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(a){return lg(a)})},timeline:function(t){return new gt(t)},getTweensOf:function(t,n){return Ve.getTweensOf(t,n)},getProperty:function(t,n,r,a){ft(t)&&(t=Ht(t)[0]);var i=Kn(t||{}).get,o=r?Gm:Um;return r==="native"&&(r=""),t&&(n?o(($t[n]&&$t[n].get||i)(t,n,r,a)):function(l,u,c){return o(($t[l]&&$t[l].get||i)(t,l,u,c))})},quickSetter:function(t,n,r){if(t=Ht(t),t.length>1){var a=t.map(function(d){return Nt.quickSetter(d,n,r)}),i=a.length;return function(d){for(var f=i;f--;)a[f](d)}}t=t[0]||{};var o=$t[n],l=Kn(t),u=l.harness&&(l.harness.aliases||{})[n]||n,c=o?function(d){var f=new o;Tr._pt=0,f.init(t,r?d+r:d,Tr,0,[t]),f.render(1,f),Tr._pt&&ql(1,Tr)}:l.set(t,u);return o?c:function(d){return c(t,u,r?d+r:d,l,1)}},quickTo:function(t,n,r){var a,i=Nt.to(t,Pt((a={},a[n]="+=0.1",a.paused=!0,a.stagger=0,a),r||{})),o=function(u,c,d){return i.resetTo(n,u,c,d)};return o.tween=i,o},isTweening:function(t){return Ve.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Jn(t.ease,xr.ease)),Vm(xr,t||{})},config:function(t){return Vm(Dt,t||{})},registerEffect:function(t){var n=t.name,r=t.effect,a=t.plugins,i=t.defaults,o=t.extendTimeline;(a||"").split(",").forEach(function(l){return l&&!$t[l]&&!Mt[l]&&ja(n+" effect requires "+l+" plugin.")}),$l[n]=function(l,u,c){return r(Ht(l),Pt(u||{},i),c)},o&&(gt.prototype[n]=function(l,u,c){return this.add($l[n](l,on(u)?u:(c=u)&&{},this),c)})},registerEase:function(t,n){Fe[t]=Jn(n)},parseEase:function(t,n){return arguments.length?Jn(t,n):Fe},getById:function(t){return Ve.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var r=new gt(t),a,i;for(r.smoothChildTiming=kt(t.smoothChildTiming),Ve.remove(r),r._dp=0,r._time=r._tTime=Ve._time,a=Ve._first;a;)i=a._next,(n||!(!a._dur&&a instanceof tt&&a.vars.onComplete===a._targets[0]))&&cn(r,a,a._start-a._delay),a=i;return cn(Ve,r,0),r},context:function(t,n){return t?new Cg(t,n):We},matchMedia:function(t){return new q1(t)},matchMediaRefresh:function(){return er.forEach(function(t){var n=t.conditions,r,a;for(a in n)n[a]&&(n[a]=!1,r=1);r&&t.revert()})||Kl()},addEventListener:function(t,n){var r=cs[t]||(cs[t]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(t,n){var r=cs[t],a=r&&r.indexOf(n);a>=0&&r.splice(a,1)},utils:{wrap:T1,wrapYoyo:N1,distribute:tg,random:rg,snap:ng,normalize:C1,getUnit:xt,clamp:v1,splitColor:cg,toArray:Ht,selector:Al,mapRange:ig,pipe:S1,unitize:k1,interpolate:j1,shuffle:eg},install:Am,effects:$l,ticker:Ft,updateRoot:gt.updateRoot,plugins:$t,globalTimeline:Ve,core:{PropTween:Tt,globals:Rm,Tween:tt,Timeline:gt,Animation:Ea,getCache:Kn,_removeLinkedListItem:is,reverting:function(){return mt},context:function(t){return t&&We&&(We.data.push(t),t._ctx=We),We},suppressOverwrites:function(t){return xl=t}}};Ct("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return us[e]=tt[e]}),Ft.add(gt.updateRoot),Tr=us.to({},{duration:0});var X1=function(t,n){for(var r=t._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},K1=function(t,n){var r=t._targets,a,i,o;for(a in n)for(i=r.length;i--;)o=t._ptLookup[i][a],o&&(o=o.d)&&(o._pt&&(o=X1(o,a)),o&&o.modifier&&o.modifier(n[a],t,r[i],a))},Zl=function(t,n){return{name:t,headless:1,rawVars:1,init:function(a,i,o){o._onInit=function(l){var u,c;if(ft(i)&&(u={},Ct(i,function(d){return u[d]=1}),i=u),n){u={};for(c in i)u[c]=n(i[c]);i=u}K1(l,i)}}}},Nt=us.registerPlugin({name:"attr",init:function(t,n,r,a,i){var o,l,u;this.tween=r;for(o in n)u=t.getAttribute(o)||"",l=this.add(t,"setAttribute",(u||0)+"",n[o],a,i,0,0,o),l.op=o,l.b=u,this._props.push(o)},render:function(t,n){for(var r=n._pt;r;)mt?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",headless:1,init:function(t,n){for(var r=n.length;r--;)this.add(t,r,t[r]||0,n[r],0,0,0,0,0,1)}},Zl("roundProps",Rl),Zl("modifiers"),Zl("snap",ng))||us;tt.version=gt.version=Nt.version="3.13.0",Em=1,Sl()&&Nr();var Z1=Fe.Power0,J1=Fe.Power1,Q1=Fe.Power2,ew=Fe.Power3,tw=Fe.Power4,nw=Fe.Linear,rw=Fe.Quad,aw=Fe.Cubic,iw=Fe.Quart,sw=Fe.Quint,ow=Fe.Strong,lw=Fe.Elastic,cw=Fe.Back,uw=Fe.SteppedEase,dw=Fe.Bounce,fw=Fe.Sine,hw=Fe.Expo,pw=Fe.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Tg,Bn,jr,Jl,tr,Ng,Ql,mw=function(){return typeof window<"u"},wn={},nr=180/Math.PI,Dr=Math.PI/180,Mr=Math.atan2,jg=1e8,ec=/([A-Z])/g,gw=/(left|right|width|margin|padding|x)/i,_w=/[\s,\(]\S/,un={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},tc=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},bw=function(t,n){return n.set(n.t,n.p,t===1?n.e:Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},yw=function(t,n){return n.set(n.t,n.p,t?Math.round((n.s+n.c*t)*1e4)/1e4+n.u:n.b,n)},xw=function(t,n){var r=n.s+n.c*t;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},Dg=function(t,n){return n.set(n.t,n.p,t?n.e:n.b,n)},Mg=function(t,n){return n.set(n.t,n.p,t!==1?n.b:n.e,n)},vw=function(t,n,r){return t.style[n]=r},ww=function(t,n,r){return t.style.setProperty(n,r)},Sw=function(t,n,r){return t._gsap[n]=r},kw=function(t,n,r){return t._gsap.scaleX=t._gsap.scaleY=r},Cw=function(t,n,r,a,i){var o=t._gsap;o.scaleX=o.scaleY=r,o.renderTransform(i,o)},Tw=function(t,n,r,a,i){var o=t._gsap;o[n]=r,o.renderTransform(i,o)},Ye="transform",jt=Ye+"Origin",Nw=function e(t,n){var r=this,a=this.target,i=a.style,o=a._gsap;if(t in wn&&i){if(this.tfm=this.tfm||{},t!=="transform")t=un[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return r.tfm[l]=Sn(a,l)}):this.tfm[t]=o.x?o[t]:Sn(a,t),t===jt&&(this.tfm.zOrigin=o.zOrigin);else return un.transform.split(",").forEach(function(l){return e.call(r,l,n)});if(this.props.indexOf(Ye)>=0)return;o.svg&&(this.svgo=a.getAttribute("data-svg-origin"),this.props.push(jt,n,"")),t=Ye}(i||n)&&this.props.push(t,n,i[t])},$g=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},jw=function(){var t=this.props,n=this.target,r=n.style,a=n._gsap,i,o;for(i=0;i<t.length;i+=3)t[i+1]?t[i+1]===2?n[t[i]](t[i+2]):n[t[i]]=t[i+2]:t[i+2]?r[t[i]]=t[i+2]:r.removeProperty(t[i].substr(0,2)==="--"?t[i]:t[i].replace(ec,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)a[o]=this.tfm[o];a.svg&&(a.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),i=Ql(),(!i||!i.isStart)&&!r[Ye]&&($g(r),a.zOrigin&&r[jt]&&(r[jt]+=" "+a.zOrigin+"px",a.zOrigin=0,a.renderTransform()),a.uncache=1)}},Pg=function(t,n){var r={target:t,props:[],revert:jw,save:Nw};return t._gsap||Nt.core.getCache(t),n&&t.style&&t.nodeType&&n.split(",").forEach(function(a){return r.save(a)}),r},Ig,nc=function(t,n){var r=Bn.createElementNS?Bn.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Bn.createElement(t);return r&&r.style?r:Bn.createElement(t)},Ot=function e(t,n,r){var a=getComputedStyle(t);return a[n]||a.getPropertyValue(n.replace(ec,"-$1").toLowerCase())||a.getPropertyValue(n)||!r&&e(t,$r(n)||n,1)||""},Fg="O,Moz,ms,Ms,Webkit".split(","),$r=function(t,n,r){var a=n||tr,i=a.style,o=5;if(t in i&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(Fg[o]+t in i););return o<0?null:(o===3?"ms":o>=0?Fg[o]:"")+t},rc=function(){mw()&&window.document&&(Tg=window,Bn=Tg.document,jr=Bn.documentElement,tr=nc("div")||{style:{}},nc("div"),Ye=$r(Ye),jt=Ye+"Origin",tr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ig=!!$r("perspective"),Ql=Nt.core.reverting,Jl=1)},Lg=function(t){var n=t.ownerSVGElement,r=nc("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),a=t.cloneNode(!0),i;a.style.display="block",r.appendChild(a),jr.appendChild(r);try{i=a.getBBox()}catch{}return r.removeChild(a),jr.removeChild(r),i},Bg=function(t,n){for(var r=n.length;r--;)if(t.hasAttribute(n[r]))return t.getAttribute(n[r])},Eg=function(t){var n,r;try{n=t.getBBox()}catch{n=Lg(t),r=1}return n&&(n.width||n.height)||r||(n=Lg(t)),n&&!n.width&&!n.x&&!n.y?{x:+Bg(t,["x","cx","x1"])||0,y:+Bg(t,["y","cy","y1"])||0,width:0,height:0}:n},Ag=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Eg(t))},rr=function(t,n){if(n){var r=t.style,a;n in wn&&n!==jt&&(n=Ye),r.removeProperty?(a=n.substr(0,2),(a==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(a==="--"?n:n.replace(ec,"-$1").toLowerCase())):r.removeAttribute(n)}},En=function(t,n,r,a,i,o){var l=new Tt(t._pt,n,r,0,1,o?Mg:Dg);return t._pt=l,l.b=a,l.e=i,t._props.push(r),l},Rg={deg:1,rad:1,turn:1},Dw={grid:1,flex:1},An=function e(t,n,r,a){var i=parseFloat(r)||0,o=(r+"").trim().substr((i+"").length)||"px",l=tr.style,u=gw.test(n),c=t.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(u?"Width":"Height"),f=100,m=a==="px",g=a==="%",y,h,p,b;if(a===o||!i||Rg[a]||Rg[o])return i;if(o!=="px"&&!m&&(i=e(t,n,r,"px")),b=t.getCTM&&Ag(t),(g||o==="%")&&(wn[n]||~n.indexOf("adius")))return y=b?t.getBBox()[u?"width":"height"]:t[d],et(g?i/y*f:i/100*y);if(l[u?"width":"height"]=f+(m?o:a),h=a!=="rem"&&~n.indexOf("adius")||a==="em"&&t.appendChild&&!c?t:t.parentNode,b&&(h=(t.ownerSVGElement||{}).parentNode),(!h||h===Bn||!h.appendChild)&&(h=Bn.body),p=h._gsap,p&&g&&p.width&&u&&p.time===Ft.time&&!p.uncache)return et(i/p.width*f);if(g&&(n==="height"||n==="width")){var C=t.style[n];t.style[n]=f+a,y=t[d],C?t.style[n]=C:rr(t,n)}else(g||o==="%")&&!Dw[Ot(h,"display")]&&(l.position=Ot(t,"position")),h===t&&(l.position="static"),h.appendChild(tr),y=tr[d],h.removeChild(tr),l.position="absolute";return u&&g&&(p=Kn(h),p.time=Ft.time,p.width=h[d]),et(m?y*i/f:y&&i?f/y*i:0)},Sn=function(t,n,r,a){var i;return Jl||rc(),n in un&&n!=="transform"&&(n=un[n],~n.indexOf(",")&&(n=n.split(",")[0])),wn[n]&&n!=="transform"?(i=Ha(t,a),i=n!=="transformOrigin"?i[n]:i.svg?i.origin:fs(Ot(t,jt))+" "+i.zOrigin+"px"):(i=t.style[n],(!i||i==="auto"||a||~(i+"").indexOf("calc("))&&(i=ds[n]&&ds[n](t,n,r)||Ot(t,n)||zm(t,n)||(n==="opacity"?1:0))),r&&!~(i+"").trim().indexOf(" ")?An(t,n,i,r)+r:i},Mw=function(t,n,r,a){if(!r||r==="none"){var i=$r(n,t,1),o=i&&Ot(t,i,1);o&&o!==r?(n=i,r=o):n==="borderColor"&&(r=Ot(t,"borderTopColor"))}var l=new Tt(this._pt,t.style,n,0,1,wg),u=0,c=0,d,f,m,g,y,h,p,b,C,T,w,j;if(l.b=r,l.e=a,r+="",a+="",a.substring(0,6)==="var(--"&&(a=Ot(t,a.substring(4,a.indexOf(")")))),a==="auto"&&(h=t.style[n],t.style[n]=a,a=Ot(t,n)||a,h?t.style[n]=h:rr(t,n)),d=[r,a],fg(d),r=d[0],a=d[1],m=r.match(vr)||[],j=a.match(vr)||[],j.length){for(;f=vr.exec(a);)p=f[0],C=a.substring(u,f.index),y?y=(y+1)%5:(C.substr(-5)==="rgba("||C.substr(-5)==="hsla(")&&(y=1),p!==(h=m[c++]||"")&&(g=parseFloat(h)||0,w=h.substr((g+"").length),p.charAt(1)==="="&&(p=wr(g,p)+w),b=parseFloat(p),T=p.substr((b+"").length),u=vr.lastIndex-T.length,T||(T=T||Dt.units[n]||w,u===a.length&&(a+=T,l.e+=T)),w!==T&&(g=An(t,n,h,T)||0),l._pt={_next:l._pt,p:C||c===1?C:",",s:g,c:b-g,m:y&&y<4||n==="zIndex"?Math.round:0});l.c=u<a.length?a.substring(u,a.length):""}else l.r=n==="display"&&a==="none"?Mg:Dg;return Lm.test(a)&&(l.e=0),this._pt=l,l},Hg={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},$w=function(t){var n=t.split(" "),r=n[0],a=n[1]||"50%";return(r==="top"||r==="bottom"||a==="left"||a==="right")&&(t=r,r=a,a=t),n[0]=Hg[r]||r,n[1]=Hg[a]||a,n.join(" ")},Pw=function(t,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,a=r.style,i=n.u,o=r._gsap,l,u,c;if(i==="all"||i===!0)a.cssText="",u=1;else for(i=i.split(","),c=i.length;--c>-1;)l=i[c],wn[l]&&(u=1,l=l==="transformOrigin"?jt:Ye),rr(r,l);u&&(rr(r,Ye),o&&(o.svg&&r.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",Ha(r,1),o.uncache=1,$g(a)))}},ds={clearProps:function(t,n,r,a,i){if(i.data!=="isFromStart"){var o=t._pt=new Tt(t._pt,n,r,0,0,Pw);return o.u=a,o.pr=-10,o.tween=i,t._props.push(r),1}}},Ra=[1,0,0,1,0,0],Og={},zg=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Wg=function(t){var n=Ot(t,Ye);return zg(n)?Ra:n.substr(7).match(Fm).map(et)},ac=function(t,n){var r=t._gsap||Kn(t),a=t.style,i=Wg(t),o,l,u,c;return r.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,i=[u.a,u.b,u.c,u.d,u.e,u.f],i.join(",")==="1,0,0,1,0,0"?Ra:i):(i===Ra&&!t.offsetParent&&t!==jr&&!r.svg&&(u=a.display,a.display="block",o=t.parentNode,(!o||!t.offsetParent&&!t.getBoundingClientRect().width)&&(c=1,l=t.nextElementSibling,jr.appendChild(t)),i=Wg(t),u?a.display=u:rr(t,"display"),c&&(l?o.insertBefore(t,l):o?o.appendChild(t):jr.removeChild(t))),n&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},ic=function(t,n,r,a,i,o){var l=t._gsap,u=i||ac(t,!0),c=l.xOrigin||0,d=l.yOrigin||0,f=l.xOffset||0,m=l.yOffset||0,g=u[0],y=u[1],h=u[2],p=u[3],b=u[4],C=u[5],T=n.split(" "),w=parseFloat(T[0])||0,j=parseFloat(T[1])||0,I,$,N,x;r?u!==Ra&&($=g*p-y*h)&&(N=w*(p/$)+j*(-h/$)+(h*C-p*b)/$,x=w*(-y/$)+j*(g/$)-(g*C-y*b)/$,w=N,j=x):(I=Eg(t),w=I.x+(~T[0].indexOf("%")?w/100*I.width:w),j=I.y+(~(T[1]||T[0]).indexOf("%")?j/100*I.height:j)),a||a!==!1&&l.smooth?(b=w-c,C=j-d,l.xOffset=f+(b*g+C*h)-b,l.yOffset=m+(b*y+C*p)-C):l.xOffset=l.yOffset=0,l.xOrigin=w,l.yOrigin=j,l.smooth=!!a,l.origin=n,l.originIsAbsolute=!!r,t.style[jt]="0px 0px",o&&(En(o,l,"xOrigin",c,w),En(o,l,"yOrigin",d,j),En(o,l,"xOffset",f,l.xOffset),En(o,l,"yOffset",m,l.yOffset)),t.setAttribute("data-svg-origin",w+" "+j)},Ha=function(t,n){var r=t._gsap||new gg(t);if("x"in r&&!n&&!r.uncache)return r;var a=t.style,i=r.scaleX<0,o="px",l="deg",u=getComputedStyle(t),c=Ot(t,jt)||"0",d,f,m,g,y,h,p,b,C,T,w,j,I,$,N,x,F,M,v,L,P,S,D,B,Q,U,H,V,O,se,z,pe;return d=f=m=h=p=b=C=T=w=0,g=y=1,r.svg=!!(t.getCTM&&Ag(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(a[Ye]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[Ye]!=="none"?u[Ye]:"")),a.scale=a.rotate=a.translate="none"),$=ac(t,r.svg),r.svg&&(r.uncache?(Q=t.getBBox(),c=r.xOrigin-Q.x+"px "+(r.yOrigin-Q.y)+"px",B=""):B=!n&&t.getAttribute("data-svg-origin"),ic(t,B||c,!!B||r.originIsAbsolute,r.smooth!==!1,$)),j=r.xOrigin||0,I=r.yOrigin||0,$!==Ra&&(M=$[0],v=$[1],L=$[2],P=$[3],d=S=$[4],f=D=$[5],$.length===6?(g=Math.sqrt(M*M+v*v),y=Math.sqrt(P*P+L*L),h=M||v?Mr(v,M)*nr:0,C=L||P?Mr(L,P)*nr+h:0,C&&(y*=Math.abs(Math.cos(C*Dr))),r.svg&&(d-=j-(j*M+I*L),f-=I-(j*v+I*P))):(pe=$[6],se=$[7],H=$[8],V=$[9],O=$[10],z=$[11],d=$[12],f=$[13],m=$[14],N=Mr(pe,O),p=N*nr,N&&(x=Math.cos(-N),F=Math.sin(-N),B=S*x+H*F,Q=D*x+V*F,U=pe*x+O*F,H=S*-F+H*x,V=D*-F+V*x,O=pe*-F+O*x,z=se*-F+z*x,S=B,D=Q,pe=U),N=Mr(-L,O),b=N*nr,N&&(x=Math.cos(-N),F=Math.sin(-N),B=M*x-H*F,Q=v*x-V*F,U=L*x-O*F,z=P*F+z*x,M=B,v=Q,L=U),N=Mr(v,M),h=N*nr,N&&(x=Math.cos(N),F=Math.sin(N),B=M*x+v*F,Q=S*x+D*F,v=v*x-M*F,D=D*x-S*F,M=B,S=Q),p&&Math.abs(p)+Math.abs(h)>359.9&&(p=h=0,b=180-b),g=et(Math.sqrt(M*M+v*v+L*L)),y=et(Math.sqrt(D*D+pe*pe)),N=Mr(S,D),C=Math.abs(N)>2e-4?N*nr:0,w=z?1/(z<0?-z:z):0),r.svg&&(B=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!zg(Ot(t,Ye)),B&&t.setAttribute("transform",B))),Math.abs(C)>90&&Math.abs(C)<270&&(i?(g*=-1,C+=h<=0?180:-180,h+=h<=0?180:-180):(y*=-1,C+=C<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-d)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+o,r.y=f-((r.yPercent=f&&(!n&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-f)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+o,r.z=m+o,r.scaleX=et(g),r.scaleY=et(y),r.rotation=et(h)+l,r.rotationX=et(p)+l,r.rotationY=et(b)+l,r.skewX=C+l,r.skewY=T+l,r.transformPerspective=w+o,(r.zOrigin=parseFloat(c.split(" ")[2])||!n&&r.zOrigin||0)&&(a[jt]=fs(c)),r.xOffset=r.yOffset=0,r.force3D=Dt.force3D,r.renderTransform=r.svg?Fw:Ig?Ug:Iw,r.uncache=0,r},fs=function(t){return(t=t.split(" "))[0]+" "+t[1]},sc=function(t,n,r){var a=xt(n);return et(parseFloat(n)+parseFloat(An(t,"x",r+"px",a)))+a},Iw=function(t,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,Ug(t,n)},ar="0deg",Oa="0px",ir=") ",Ug=function(t,n){var r=n||this,a=r.xPercent,i=r.yPercent,o=r.x,l=r.y,u=r.z,c=r.rotation,d=r.rotationY,f=r.rotationX,m=r.skewX,g=r.skewY,y=r.scaleX,h=r.scaleY,p=r.transformPerspective,b=r.force3D,C=r.target,T=r.zOrigin,w="",j=b==="auto"&&t&&t!==1||b===!0;if(T&&(f!==ar||d!==ar)){var I=parseFloat(d)*Dr,$=Math.sin(I),N=Math.cos(I),x;I=parseFloat(f)*Dr,x=Math.cos(I),o=sc(C,o,$*x*-T),l=sc(C,l,-Math.sin(I)*-T),u=sc(C,u,N*x*-T+T)}p!==Oa&&(w+="perspective("+p+ir),(a||i)&&(w+="translate("+a+"%, "+i+"%) "),(j||o!==Oa||l!==Oa||u!==Oa)&&(w+=u!==Oa||j?"translate3d("+o+", "+l+", "+u+") ":"translate("+o+", "+l+ir),c!==ar&&(w+="rotate("+c+ir),d!==ar&&(w+="rotateY("+d+ir),f!==ar&&(w+="rotateX("+f+ir),(m!==ar||g!==ar)&&(w+="skew("+m+", "+g+ir),(y!==1||h!==1)&&(w+="scale("+y+", "+h+ir),C.style[Ye]=w||"translate(0, 0)"},Fw=function(t,n){var r=n||this,a=r.xPercent,i=r.yPercent,o=r.x,l=r.y,u=r.rotation,c=r.skewX,d=r.skewY,f=r.scaleX,m=r.scaleY,g=r.target,y=r.xOrigin,h=r.yOrigin,p=r.xOffset,b=r.yOffset,C=r.forceCSS,T=parseFloat(o),w=parseFloat(l),j,I,$,N,x;u=parseFloat(u),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,u+=d),u||c?(u*=Dr,c*=Dr,j=Math.cos(u)*f,I=Math.sin(u)*f,$=Math.sin(u-c)*-m,N=Math.cos(u-c)*m,c&&(d*=Dr,x=Math.tan(c-d),x=Math.sqrt(1+x*x),$*=x,N*=x,d&&(x=Math.tan(d),x=Math.sqrt(1+x*x),j*=x,I*=x)),j=et(j),I=et(I),$=et($),N=et(N)):(j=f,N=m,I=$=0),(T&&!~(o+"").indexOf("px")||w&&!~(l+"").indexOf("px"))&&(T=An(g,"x",o,"px"),w=An(g,"y",l,"px")),(y||h||p||b)&&(T=et(T+y-(y*j+h*$)+p),w=et(w+h-(y*I+h*N)+b)),(a||i)&&(x=g.getBBox(),T=et(T+a/100*x.width),w=et(w+i/100*x.height)),x="matrix("+j+","+I+","+$+","+N+","+T+","+w+")",g.setAttribute("transform",x),C&&(g.style[Ye]=x)},Lw=function(t,n,r,a,i){var o=360,l=ft(i),u=parseFloat(i)*(l&&~i.indexOf("rad")?nr:1),c=u-a,d=a+c+"deg",f,m;return l&&(f=i.split("_")[1],f==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),f==="cw"&&c<0?c=(c+o*jg)%o-~~(c/o)*o:f==="ccw"&&c>0&&(c=(c-o*jg)%o-~~(c/o)*o)),t._pt=m=new Tt(t._pt,n,r,a,c,bw),m.e=d,m.u="deg",t._props.push(r),m},Gg=function(t,n){for(var r in n)t[r]=n[r];return t},Bw=function(t,n,r){var a=Gg({},r._gsap),i="perspective,force3D,transformOrigin,svgOrigin",o=r.style,l,u,c,d,f,m,g,y;a.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),o[Ye]=n,l=Ha(r,1),rr(r,Ye),r.setAttribute("transform",c)):(c=getComputedStyle(r)[Ye],o[Ye]=n,l=Ha(r,1),o[Ye]=c);for(u in wn)c=a[u],d=l[u],c!==d&&i.indexOf(u)<0&&(g=xt(c),y=xt(d),f=g!==y?An(r,u,c,y):parseFloat(c),m=parseFloat(d),t._pt=new Tt(t._pt,l,u,f,m-f,tc),t._pt.u=y||0,t._props.push(u));Gg(l,a)};Ct("padding,margin,Width,Radius",function(e,t){var n="Top",r="Right",a="Bottom",i="Left",o=(t<3?[n,r,a,i]:[n+i,n+r,a+r,a+i]).map(function(l){return t<2?e+l:"border"+l+e});ds[t>1?"border"+e:e]=function(l,u,c,d,f){var m,g;if(arguments.length<4)return m=o.map(function(y){return Sn(l,y,c)}),g=m.join(" "),g.split(m[0]).length===5?m[0]:g;m=(d+"").split(" "),g={},o.forEach(function(y,h){return g[y]=m[h]=m[h]||m[(h-1)/2|0]}),l.init(u,g,f)}});var oc={name:"css",register:rc,targetTest:function(t){return t.style&&t.nodeType},init:function(t,n,r,a,i){var o=this._props,l=t.style,u=r.vars.startAt,c,d,f,m,g,y,h,p,b,C,T,w,j,I,$,N;Jl||rc(),this.styles=this.styles||Pg(t),N=this.styles.props,this.tween=r;for(h in n)if(h!=="autoRound"&&(d=n[h],!($t[h]&&_g(h,n,r,a,t,i)))){if(g=typeof d,y=ds[h],g==="function"&&(d=d.call(r,a,t,i),g=typeof d),g==="string"&&~d.indexOf("random(")&&(d=Ia(d)),y)y(this,t,h,d,r)&&($=1);else if(h.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(h)+"").trim(),d+="",Fn.lastIndex=0,Fn.test(c)||(p=xt(c),b=xt(d)),b?p!==b&&(c=An(t,h,c,b)+b):p&&(d+=p),this.add(l,"setProperty",c,d,a,i,0,0,h),o.push(h),N.push(h,0,l[h]);else if(g!=="undefined"){if(u&&h in u?(c=typeof u[h]=="function"?u[h].call(r,a,t,i):u[h],ft(c)&&~c.indexOf("random(")&&(c=Ia(c)),xt(c+"")||c==="auto"||(c+=Dt.units[h]||xt(Sn(t,h))||""),(c+"").charAt(1)==="="&&(c=Sn(t,h))):c=Sn(t,h),m=parseFloat(c),C=g==="string"&&d.charAt(1)==="="&&d.substr(0,2),C&&(d=d.substr(2)),f=parseFloat(d),h in un&&(h==="autoAlpha"&&(m===1&&Sn(t,"visibility")==="hidden"&&f&&(m=0),N.push("visibility",0,l.visibility),En(this,l,"visibility",m?"inherit":"hidden",f?"inherit":"hidden",!f)),h!=="scale"&&h!=="transform"&&(h=un[h],~h.indexOf(",")&&(h=h.split(",")[0]))),T=h in wn,T){if(this.styles.save(h),g==="string"&&d.substring(0,6)==="var(--"&&(d=Ot(t,d.substring(4,d.indexOf(")"))),f=parseFloat(d)),w||(j=t._gsap,j.renderTransform&&!n.parseTransform||Ha(t,n.parseTransform),I=n.smoothOrigin!==!1&&j.smooth,w=this._pt=new Tt(this._pt,l,Ye,0,1,j.renderTransform,j,0,-1),w.dep=1),h==="scale")this._pt=new Tt(this._pt,j,"scaleY",j.scaleY,(C?wr(j.scaleY,C+f):f)-j.scaleY||0,tc),this._pt.u=0,o.push("scaleY",h),h+="X";else if(h==="transformOrigin"){N.push(jt,0,l[jt]),d=$w(d),j.svg?ic(t,d,0,I,0,this):(b=parseFloat(d.split(" ")[2])||0,b!==j.zOrigin&&En(this,j,"zOrigin",j.zOrigin,b),En(this,l,h,fs(c),fs(d)));continue}else if(h==="svgOrigin"){ic(t,d,1,I,0,this);continue}else if(h in Og){Lw(this,j,h,m,C?wr(m,C+d):d);continue}else if(h==="smoothOrigin"){En(this,j,"smooth",j.smooth,d);continue}else if(h==="force3D"){j[h]=d;continue}else if(h==="transform"){Bw(this,d,t);continue}}else h in l||(h=$r(h)||h);if(T||(f||f===0)&&(m||m===0)&&!_w.test(d)&&h in l)p=(c+"").substr((m+"").length),f||(f=0),b=xt(d)||(h in Dt.units?Dt.units[h]:p),p!==b&&(m=An(t,h,c,b)),this._pt=new Tt(this._pt,T?j:l,h,m,(C?wr(m,C+f):f)-m,!T&&(b==="px"||h==="zIndex")&&n.autoRound!==!1?xw:tc),this._pt.u=b||0,p!==b&&b!=="%"&&(this._pt.b=c,this._pt.r=yw);else if(h in l)Mw.call(this,t,h,c,C?C+d:d);else if(h in t)this.add(t,h,c||t[h],C?C+d:d,a,i);else if(h!=="parseTransform"){jl(h,d);continue}T||(h in l?N.push(h,0,l[h]):typeof t[h]=="function"?N.push(h,2,t[h]()):N.push(h,1,c||t[h])),o.push(h)}}$&&Sg(this)},render:function(t,n){if(n.tween._time||!Ql())for(var r=n._pt;r;)r.r(t,r.d),r=r._next;else n.styles.revert()},get:Sn,aliases:un,getSetter:function(t,n,r){var a=un[n];return a&&a.indexOf(",")<0&&(n=a),n in wn&&n!==jt&&(t._gsap.x||Sn(t,"x"))?r&&Ng===r?n==="scale"?kw:Sw:(Ng=r||{})&&(n==="scale"?Cw:Tw):t.style&&!wl(t.style[n])?vw:~n.indexOf("-")?ww:Yl(t,n)},core:{_removeProperty:rr,_getMatrix:ac}};Nt.utils.checkPrefix=$r,Nt.core.getStyleSaver=Pg,(function(e,t,n,r){var a=Ct(e+","+t+","+n,function(i){wn[i]=1});Ct(t,function(i){Dt.units[i]="deg",Og[i]=1}),un[a[13]]=e+","+t,Ct(r,function(i){var o=i.split(":");un[o[1]]=a[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),Ct("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){Dt.units[e]="px"}),Nt.registerPlugin(oc);var lc=Nt.registerPlugin(oc)||Nt,Ew=lc.core.Tween;const Aw=Object.freeze(Object.defineProperty({__proto__:null,Back:cw,Bounce:dw,CSSPlugin:oc,Circ:pw,Cubic:aw,Elastic:lw,Expo:hw,Linear:nw,Power0:Z1,Power1:J1,Power2:Q1,Power3:ew,Power4:tw,Quad:rw,Quart:iw,Quint:sw,Sine:fw,SteppedEase:uw,Strong:ow,TimelineLite:gt,TimelineMax:gt,TweenLite:tt,TweenMax:Ew,default:lc,gsap:lc},Symbol.toStringTag,{value:"Module"}));_.Account=gs,_.ActionLink=a0,_.AdaptiveDataGrid=to,_.AnimationDurationFast=qd,_.AnimationDurationNormal=Xd,_.AnimationDurationSlow=Kd,_.AnimationEasingBounce=ef,_.AnimationEasingEaseIn=Zd,_.AnimationEasingEaseInOut=Qd,_.AnimationEasingEaseOut=Jd,_.AppointmentCard=Js,_.AreaSeriesPrimitive=Zx,_.AriaDataGrid=Hu,_.AriaTabsDataGrid=mi,_.AriaTabsDataGridAdaptive=to,_.Axis=uo,_.BackLink=Ga,_.BandScalesProvider=Qx,_.BarSeriesPrimitive=Jx,_.BorderColorCard=$o,_.BorderColorCardHover=Po,_.BorderColorDefault=Do,_.BorderColorError=Io,_.BorderColorForm=Mo,_.BorderRadiusLarge=gf,_.BorderRadiusMedium=mf,_.BorderRadiusNone=hf,_.BorderRadiusSmall=pf,_.BorderWidthCardBottom=cf,_.BorderWidthDefault=sf,_.BorderWidthFormElement=of,_.BorderWidthFormElementError=lf,_.BorderWidthPanel=uf,_.BorderWidthTableCell=ff,_.BorderWidthTableHeader=df,_.Breadcrumb=ju,_.Breakpoint=Nc,_.BreakpointDesktop=Kp,_.BreakpointLargeDesktop=Zp,_.BreakpointMobile=qp,_.BreakpointTablet=Xp,_.Button=lt,_.ButtonBorderRadius=Gh,_.ButtonBorderWidth=Uh,_.ButtonPrimaryBackgroundActive=Ph,_.ButtonPrimaryBackgroundDefault=Mh,_.ButtonPrimaryBackgroundDisabled=Ih,_.ButtonPrimaryBackgroundHover=$h,_.ButtonPrimaryBorderDefault=Bh,_.ButtonPrimaryBorderFocus=Eh,_.ButtonPrimaryTextDefault=Fh,_.ButtonPrimaryTextDisabled=Lh,_.ButtonSecondaryBackgroundActive=Oh,_.ButtonSecondaryBackgroundDefault=Ah,_.ButtonSecondaryBackgroundHover=Hh,_.ButtonSecondaryBackgroundSolid=Rh,_.ButtonSecondaryBorderDefault=Wh,_.ButtonSecondaryTextDefault=zh,_.ButtonShadowSize=Vh,_.ButtonSize=bs,_.ButtonSpacingPaddingHorizontalDesktop=tl,_.ButtonSpacingPaddingHorizontalMobile=Qo,_.ButtonSpacingPaddingVerticalDesktop=el,_.ButtonSpacingPaddingVerticalMobile=Jo,_.ButtonTypographyWeight=Yh,_.ButtonVariant=_s,_.Card=qs,_.CardBackgroundDefault=qh,_.CardBorderBottom=Zh,_.CardBorderDefault=Xh,_.CardBorderHover=Kh,_.CardBorderWidthBottom=np,_.CardBorderWidthDefault=tp,_.CardGroup=ly,_.CardGroupItem=cy,_.CardShadowDefault=rp,_.CardShadowHover=ap,_.CardSpacingHeadingMargin=al,_.CardSpacingPaddingDesktop=rl,_.CardSpacingPaddingMobile=nl,_.CardTextDescription=Qh,_.CardTextHeading=Jh,_.CardTextLink=ep,_.CareCard=uy,_.CharacterCount=m0,_.ChartEnhancer=tv,_.ChartNoScript=ev,_.ChartRoot=vd,_.Checkbox=wc,_.Checkboxes=Sc,_.ColorBorderDefault=Nf,_.ColorBorderSecondary=jf,_.ColorButtonLoginActive=th,_.ColorButtonLoginBackground=Qf,_.ColorButtonLoginHover=eh,_.ColorButtonLoginShadow=nh,_.ColorButtonPrimaryActive=Lf,_.ColorButtonPrimaryBackground=Pf,_.ColorButtonPrimaryHover=Ff,_.ColorButtonPrimaryShadow=Bf,_.ColorButtonPrimaryText=If,_.ColorButtonReverseActive=Yf,_.ColorButtonReverseBackground=Uf,_.ColorButtonReverseHover=Vf,_.ColorButtonReverseShadow=qf,_.ColorButtonReverseText=Gf,_.ColorButtonSecondaryActive=zf,_.ColorButtonSecondaryBackground=Ef,_.ColorButtonSecondaryBackgroundSolid=Af,_.ColorButtonSecondaryBorder=Rf,_.ColorButtonSecondaryHover=Of,_.ColorButtonSecondaryShadow=Wf,_.ColorButtonSecondaryText=Hf,_.ColorButtonWarningActive=Zf,_.ColorButtonWarningBackground=Xf,_.ColorButtonWarningHover=Kf,_.ColorButtonWarningShadow=Jf,_.ColorError=Df,_.ColorFocusBackground=Cf,_.ColorFocusText=Tf,_.ColorFormBackground=$f,_.ColorFormBorder=Mf,_.ColorGrey1=Yo,_.ColorGrey2=qo,_.ColorGrey3=Xo,_.ColorGrey4=Ko,_.ColorGrey5=Zo,_.ColorLinkActive=Sf,_.ColorLinkDefault=vf,_.ColorLinkHover=wf,_.ColorLinkVisited=kf,_.ColorPrimaryBlack=Bo,_.ColorPrimaryBlue=Fo,_.ColorPrimaryDarkPink=Ro,_.ColorPrimaryGreen=Eo,_.ColorPrimaryPurple=Ao,_.ColorPrimaryRed=Ho,_.ColorPrimaryWhite=Lo,_.ColorPrimaryYellow=Oo,_.ColorSecondaryAquaGreen=Go,_.ColorSecondaryOrange=Uo,_.ColorSecondaryPaleYellow=zo,_.ColorSecondaryPink=Vo,_.ColorSecondaryWarmYellow=Wo,_.ColorTextPrimary=_f,_.ColorTextPrint=xf,_.ColorTextReverse=yf,_.ColorTextSecondary=bf,_.Column=or,_.ColumnAlign=Dc,_.ComponentBlur=Ch,_.ComponentBreadcrumbChevronMarginLeft=_h,_.ComponentBreadcrumbChevronMarginRight=bh,_.ComponentBreadcrumbPaddingTopDesktop=xh,_.ComponentBreadcrumbPaddingTopMobile=yh,_.ComponentButtonPaddingDesktopHorizontal=sh,_.ComponentButtonPaddingDesktopVertical=ih,_.ComponentButtonPaddingMobileHorizontal=ah,_.ComponentButtonPaddingMobileVertical=rh,_.ComponentButtonShadowSize=oh,_.ComponentCardHeadingMargin=ph,_.ComponentCardPaddingDesktop=hh,_.ComponentCardPaddingMobile=fh,_.ComponentDetails=Nh,_.ComponentExpander=jh,_.ComponentFormCheckboxLabelPadding=dh,_.ComponentFormCheckboxSize=uh,_.ComponentFormInputMinHeight=lh,_.ComponentFormInputPadding=ch,_.ComponentLink=Th,_.ComponentPagination=Dh,_.ComponentPanelPaddingDesktop=gh,_.ComponentPanelPaddingMobile=mh,_.ComponentSpread=kh,_.ComponentSummaryListCellPaddingHorizontal=wh,_.ComponentSummaryListCellPaddingVertical=vh,_.ComponentSummaryListRowMargin=Sh,_.Container=vs,_.ContentsList=oy,_.DEFAULT_FONT_CONFIG=yl,_.DashboardSummaryGrid=Ty,_.DateInput=$0,_.Details=Fu,_.DoDontList=Lu,_.ElevationHigh=Mm,_.ElevationLow=jm,_.ElevationMedium=Dm,_.ElevationNone=Nm,_.ErrorMessage=Ss,_.ErrorSummary=M0,_.Expander=Bu,_.FRUTIGER_FONT_FILES=wt,_.Fieldset=qa,_.Float=jc,_.FocusOutlineOffset=Sm,_.FocusOutlineStyle=km,_.FocusOutlineWidth=wm,_.FocusShadowButton=Tm,_.FocusShadowInput=Cm,_.FontFamilyBase=ta,_.FontFamilyFallback=na,_.FontFamilyPrint=ra,_.FontLineHeightBase=Ji,_.FontSize14Mobile=oa,_.FontSize14Print=ca,_.FontSize14Tablet=la,_.FontSize16Mobile=ua,_.FontSize16Print=fa,_.FontSize16Tablet=da,_.FontSize19Mobile=ha,_.FontSize19Print=ma,_.FontSize19Tablet=pa,_.FontSize22Mobile=ga,_.FontSize22Print=ba,_.FontSize22Tablet=_a,_.FontSize26Mobile=ya,_.FontSize26Print=va,_.FontSize26Tablet=xa,_.FontSize36Mobile=wa,_.FontSize36Print=ka,_.FontSize36Tablet=Sa,_.FontSize48Mobile=Ca,_.FontSize48Print=Na,_.FontSize48Tablet=Ta,_.FontSizeBase=Zi,_.FontWeightBold=ia,_.FontWeightLight=sa,_.FontWeightNormal=aa,_.Footer=ks,_.FormBorderRadius=kp,_.FormBorderWidthDefault=wp,_.FormBorderWidthError=Sp,_.FormErrorTextDefault=yp,_.FormErrorTypographyWeight=xp,_.FormHintTextDefault=vp,_.FormInputBackgroundDefault=ip,_.FormInputBackgroundDisabled=op,_.FormInputBackgroundError=lp,_.FormInputBackgroundFocus=sp,_.FormInputBorderDefault=cp,_.FormInputBorderDisabled=fp,_.FormInputBorderError=dp,_.FormInputBorderFocus=up,_.FormInputTextDefault=hp,_.FormInputTextDisabled=mp,_.FormInputTextPlaceholder=pp,_.FormLabelTextDefault=gp,_.FormLabelTextRequired=_p,_.FormLabelTypographyWeight=bp,_.FormSpacingCheckboxLabelPadding=ll,_.FormSpacingCheckboxSize=ol,_.FormSpacingInputMinHeight=sl,_.FormSpacingInputPadding=il,_.GanttChart=iy,_.Grid=Xa,_.GridGutter=Qp,_.GridGutterHalf=em,_.GridLines=Sd,_.GridPageWidth=Jp,_.GridWidth=Tn,_.Header=Ka,_.HeaderSSR=R0,_.HeaderSearch=Ic,_.HeaderStatic=Ka,_.Heading=Gt,_.HeadingsNhsukHeadingL=Zt,_.HeadingsNhsukHeadingM=Jt,_.HeadingsNhsukHeadingS=Qt,_.HeadingsNhsukHeadingXl=Kt,_.HeadingsNhsukHeadingXs=en,_.Hero=Fc,_.Hint=xs,_.Images=vy,_.Input=Va,_.InsetText=dy,_.Label=Ya,_.LayoutColumnActions=Yp,_.LayoutColumnFull=Wp,_.LayoutColumnHalf=Up,_.LayoutColumnQuarter=Vp,_.LayoutColumnThird=Gp,_.LayoutContainerMaxWidth=zp,_.Legend=Kx,_.LineScalesProvider=wd,_.LineSeriesPrimitive=Id,_.List=Mc,_.MainWrapper=ws,_.MedicationCard=Qs,_.MetricCard=nv,_.NHSBodyText=Rv,_.NHSBodyTextLarge=Hv,_.NHSBodyTextSmall=Ov,_.NHSHeading1=Fv,_.NHSHeading2=Lv,_.NHSHeading3=Bv,_.NHSHeading4=Ev,_.NHSHeading5=Av,_.NHSLedeText=zv,_.NHSLedeTextSmall=Wv,_.NHSThemeProvider=B0,_.NHS_FALLBACK_FONT_STACK=r1,_.NHS_FONT_STACK=n1,_.NavigationSplitView=ad,_.PageTemplate=nx,_.Pagination=sy,_.Panel=Du,_.ParagraphsBody=tn,_.ParagraphsBodyLarge=nn,_.ParagraphsBodySmall=rn,_.ParagraphsLedeText=an,_.ParagraphsLedeTextSmall=sn,_.PatientCard=Zs,_.ProductRoadmap=sd,_.Radios=b0,_.RadiosServer=y0,_.ResponsiveDataGrid=to,_.ResponsiveDataGridDemo=tx,_.Row=Nn,_.SPC=$v,_.SPCChart=Yd,_.Select=Br,_.SelectOption=Cc,_.ShadowButtonDefault=gm,_.ShadowButtonFocus=ym,_.ShadowButtonSecondary=_m,_.ShadowButtonWarning=bm,_.ShadowCardDefault=xm,_.ShadowCardHover=vm,_.SizeButtonMinHeightDesktop=Op,_.SizeButtonMinHeightMobile=Hp,_.SizeFormControlLarge=Pp,_.SizeFormControlMedium=$p,_.SizeFormControlSmall=Mp,_.SizeFormInputWidth2xl=Ap,_.SizeFormInputWidth3xl=Rp,_.SizeFormInputWidthLg=Bp,_.SizeFormInputWidthMd=Lp,_.SizeFormInputWidthSm=Fp,_.SizeFormInputWidthXl=Ep,_.SizeFormInputWidthXs=Ip,_.SizeIconExtraLarge=jp,_.SizeIconLarge=Np,_.SizeIconMedium=Tp,_.SizeIconNhsDefault=Dp,_.SizeIconSmall=Cp,_.SkipLink=Ys,_.SlotMatrix=Cy,_.SortStatusControl=Py,_.Spacing0=cl,_.Spacing1=ul,_.Spacing2=dl,_.Spacing3=fl,_.Spacing4=hl,_.Spacing5=pl,_.Spacing6=ml,_.Spacing7=gl,_.Spacing8=_l,_.Spacing9=bl,_.SpacingResponsive0Mobile=$i,_.SpacingResponsive0Tablet=Pi,_.SpacingResponsive1Mobile=Ii,_.SpacingResponsive1Tablet=Fi,_.SpacingResponsive2Mobile=Li,_.SpacingResponsive2Tablet=Bi,_.SpacingResponsive3Mobile=Ei,_.SpacingResponsive3Tablet=Ai,_.SpacingResponsive4Mobile=Ri,_.SpacingResponsive4Tablet=Hi,_.SpacingResponsive5Mobile=Oi,_.SpacingResponsive5Tablet=zi,_.SpacingResponsive6Mobile=Wi,_.SpacingResponsive6Tablet=Ui,_.SpacingResponsive7Mobile=Gi,_.SpacingResponsive7Tablet=Vi,_.SpacingResponsive8Mobile=Yi,_.SpacingResponsive8Tablet=qi,_.SpacingResponsive9Mobile=Xi,_.SpacingResponsive9Tablet=Ki,_.SpacingUtilities=w0,_.StateDisabledBackground=hm,_.StateDisabledBorder=pm,_.StateDisabledText=mm,_.StateErrorBackground=tm,_.StateErrorBorder=nm,_.StateErrorText=rm,_.StateInfoBackground=um,_.StateInfoBorder=dm,_.StateInfoText=fm,_.StateSuccessBackground=am,_.StateSuccessBorder=im,_.StateSuccessText=sm,_.StateWarningBackground=om,_.StateWarningBorder=lm,_.StateWarningText=cm,_.SummaryCard=Ru,_.SummaryList=fy,_.Table=Yt,_.Tabs=by,_.Tag=Ae,_.TaskList=Eu,_.Textarea=kc,_.TooltipOverlay=Xx,_.TooltipProvider=Pd,_.TransactionalPageTemplate=rx,_.TransitionButtonDefault=tf,_.TransitionButtonShadow=nf,_.TransitionCardHover=af,_.TransitionInputFocus=rf,_.VisibilityProvider=Vx,_.VitalsCard=eo,_.WIDTH_FRACTIONS=T0,_.WarningCallout=xy,_.WidthContainer=no,_.WidthUtilities=k0,_.checkFrutigerLoaded=a1,_.createGenericTabsConfig=_i,_.createTCHTabsConfig=Ay,_.generateFrutigerFontFace=e1,_.getResponsiveStyles=Iv,_.getSpacingClass=S0,_.getWidthClass=C0,_.preloadFrutigerFonts=t1,_.tchDataConfig=zu,_.useColors=Gv,_.useComponentSpacing=Xv,_.useNHSHeadings=Kv,_.useNHSParagraphs=Zv,_.useNHSTheme=I0,_.useNHSTypographySystem=Jv,_.useNavigationSplitDrill=Qv,_.useNavigationSplitUrlSync=rd,_.useNhsFdpBreakpoints=ro,_.useResponsiveSpacing=qv,_.useResponsiveValue=ax,_.useSpacing=Vv,_.useTokens=Uv,_.useTypography=Yv,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.js.map
