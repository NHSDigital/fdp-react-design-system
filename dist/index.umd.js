(function(b,F){typeof exports=="object"&&typeof module<"u"?F(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],F):(b=typeof globalThis<"u"?globalThis:b||self,F(b.NHSFDPDesignSystem={},b.React,b.ReactDOM))})(this,(function(b,F,wg){"use strict";function Sg(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}const V=Sg(F);function kg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ma={exports:{}},Sr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zl;function Cg(){if(Zl)return Sr;Zl=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var l in a)l!=="key"&&(i[l]=a[l])}else i=a;return a=i.ref,{$$typeof:t,type:r,key:o,ref:a!==void 0?a:null,props:i}}return Sr.Fragment=e,Sr.jsx=n,Sr.jsxs=n,Sr}var kr={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jl;function Tg(){return Jl||(Jl=1,process.env.NODE_ENV!=="production"&&(function(){function t(z){if(z==null)return null;if(typeof z=="function")return z.$$typeof===j?null:z.displayName||z.name||null;if(typeof z=="string")return z;switch(z){case f:return"Fragment";case I:return"Profiler";case m:return"StrictMode";case D:return"Suspense";case T:return"SuspenseList";case w:return"Activity"}if(typeof z=="object")switch(typeof z.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),z.$$typeof){case y:return"Portal";case C:return(z.displayName||"Context")+".Provider";case M:return(z._context.displayName||"Context")+".Consumer";case v:var W=z.render;return z=z.displayName,z||(z=W.displayName||W.name||"",z=z!==""?"ForwardRef("+z+")":"ForwardRef"),z;case N:return W=z.displayName||null,W!==null?W:t(z.type)||"Memo";case _:W=z._payload,z=z._init;try{return t(z(W))}catch{}}return null}function e(z){return""+z}function n(z){try{e(z);var W=!1}catch{W=!0}if(W){W=console;var R=W.error,E=typeof Symbol=="function"&&Symbol.toStringTag&&z[Symbol.toStringTag]||z.constructor.name||"Object";return R.call(W,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",E),e(z)}}function r(z){if(z===f)return"<>";if(typeof z=="object"&&z!==null&&z.$$typeof===_)return"<...>";try{var W=t(z);return W?"<"+W+">":"<...>"}catch{return"<...>"}}function a(){var z=x.A;return z===null?null:z.getOwner()}function i(){return Error("react-stack-top-frame")}function o(z){if(S.call(z,"key")){var W=Object.getOwnPropertyDescriptor(z,"key").get;if(W&&W.isReactWarning)return!1}return z.key!==void 0}function l(z,W){function R(){$||($=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",W))}R.isReactWarning=!0,Object.defineProperty(z,"key",{get:R,configurable:!0})}function u(){var z=t(this.type);return k[z]||(k[z]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),z=this.props.ref,z!==void 0?z:null}function c(z,W,R,E,L,X,ie,te){return R=X.ref,z={$$typeof:g,type:z,key:W,props:X,_owner:L},(R!==void 0?R:null)!==null?Object.defineProperty(z,"ref",{enumerable:!1,get:u}):Object.defineProperty(z,"ref",{enumerable:!1,value:null}),z._store={},Object.defineProperty(z._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(z,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(z,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ie}),Object.defineProperty(z,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:te}),Object.freeze&&(Object.freeze(z.props),Object.freeze(z)),z}function d(z,W,R,E,L,X,ie,te){var Y=W.children;if(Y!==void 0)if(E)if(B(Y)){for(E=0;E<Y.length;E++)h(Y[E]);Object.freeze&&Object.freeze(Y)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else h(Y);if(S.call(W,"key")){Y=t(z);var G=Object.keys(W).filter(function(ue){return ue!=="key"});E=0<G.length?"{key: someKey, "+G.join(": ..., ")+": ...}":"{key: someKey}",O[Y+E]||(G=0<G.length?"{"+G.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,E,Y,G,Y),O[Y+E]=!0)}if(Y=null,R!==void 0&&(n(R),Y=""+R),o(W)&&(n(W.key),Y=""+W.key),"key"in W){R={};for(var q in W)q!=="key"&&(R[q]=W[q])}else R=W;return Y&&l(R,typeof z=="function"?z.displayName||z.name||"Unknown":z),c(z,Y,X,L,a(),R,ie,te)}function h(z){typeof z=="object"&&z!==null&&z.$$typeof===g&&z._store&&(z._store.validated=1)}var p=F,g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),C=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),j=Symbol.for("react.client.reference"),x=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,S=Object.prototype.hasOwnProperty,B=Array.isArray,P=console.createTask?console.createTask:function(){return null};p={react_stack_bottom_frame:function(z){return z()}};var $,k={},H=p.react_stack_bottom_frame.bind(p,i)(),Q=P(r(i)),O={};kr.Fragment=f,kr.jsx=function(z,W,R,E,L){var X=1e4>x.recentlyCreatedOwnerStacks++;return d(z,W,R,!1,E,L,X?Error("react-stack-top-frame"):H,X?P(r(z)):Q)},kr.jsxs=function(z,W,R,E,L){var X=1e4>x.recentlyCreatedOwnerStacks++;return d(z,W,R,!0,E,L,X?Error("react-stack-top-frame"):H,X?P(r(z)):Q)}})()),kr}var Ql;function Ng(){return Ql||(Ql=1,process.env.NODE_ENV==="production"?Ma.exports=Cg():Ma.exports=Tg()),Ma.exports}var s=Ng(),Zi={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var ec;function jg(){return ec||(ec=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(i=a(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var l in i)e.call(i,l)&&i[l]&&(o=a(o,l));return o}function a(i,o){return o?i?i+" "+o:i+o:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Zi)),Zi.exports}var Dg=jg();const ye=kg(Dg),Mg=({text:t,href:e,openInNewWindow:n=!1,className:r,...a})=>{const i=ye("nhsuk-action-link__link",r);return s.jsx("div",{className:"nhsuk-action-link",children:s.jsxs("a",{className:i,href:e,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,...a,children:[s.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right-circle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"36",height:"36",children:[s.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),s.jsx("path",{d:"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"})]}),s.jsx("span",{className:"nhsuk-action-link__text",children:t})]})})},tc=({ariaLabel:t="Account",items:e=[],className:n,variant:r="default"})=>{if(!e||e.length===0)return null;const a=i=>{const o=i.icon?s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__user",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",role:"img","aria-label":i.icon===!0?"User":void 0,children:s.jsx("path",{d:"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z"})}):null,l=i.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:i.html}}):i.text,u=s.jsxs(s.Fragment,{children:[o,l]});return i.href?s.jsx("a",{className:"nhsuk-account__link nhsuk-header__account-link",href:i.href,children:u}):i.action?s.jsx("form",{className:"nhsuk-account__form",action:i.action,method:i.method||"post",children:s.jsx("button",{className:"nhsuk-account__button",type:"submit",role:"button",children:u})}):s.jsx("span",{children:u})};return s.jsx("nav",{className:ye("nhsuk-account",{"nhsuk-account--white":r==="white"},n),"aria-label":t,children:s.jsx("ul",{className:"nhsuk-account__list",children:e.map((i,o)=>i&&s.jsx("li",{className:ye("nhsuk-account__item nhsuk-header__account-item",i.className),children:a(i)},o))})})};function $g(t){const e=t.variant||"primary",n=t.size||"default",r=!!t.fullWidth,a=["nhs-aria-button",`nhs-aria-button--${e}`,n!=="default"?`nhs-aria-button--${n}`:"",r?"nhs-aria-button--full-width":"",t.className||""].filter(Boolean).join(" ");return{tag:t.href?"a":"button",classes:a,data:{module:"nhs-button"},attrs:t.href?{href:t.href,role:"button"}:{type:"button"},preventDoubleClick:!!t.preventDoubleClick}}const{forwardRef:Ig,useCallback:mn,useState:Ji}=V;function Pg(t,e){const{children:n,variant:r="primary",size:a="default",fullWidth:i=!1,className:o="",preventDoubleClick:l=!1,...u}=t,[c,d]=Ji(!1),[h,p]=Ji(!1),[g,y]=Ji(!1),f=$g({variant:r,size:a,fullWidth:i,className:o,preventDoubleClick:l,href:"href"in u?u.href:void 0}),m="disabled"in u?u.disabled:u["aria-disabled"]==="true",I={...c&&{"data-pressed":"true"},...h&&{"data-hovered":"true"},...g&&{"data-focused":"true"},...m&&{"data-disabled":"true"}},M=mn(()=>!m&&d(!0),[m]),C=mn(()=>d(!1),[]),v=mn(()=>!m&&p(!0),[m]),D=mn(()=>{p(!1),d(!1)},[]),T=mn(()=>y(!0),[]),N=mn(()=>y(!1),[]),_=mn(Y=>{Y.key===" "&&("href"in u||Y.currentTarget.getAttribute("role")==="button")&&(Y.preventDefault(),Y.currentTarget.click())},[u]),w=mn(Y=>{if(l){const G=Y.currentTarget;if(G.getAttribute("data-processing")==="true"){Y.preventDefault();return}G.setAttribute("data-processing","true"),setTimeout(()=>{G.removeAttribute("data-processing")},1e3)}},[l]);if("href"in u&&u.href){const{id:Y,style:G,title:q,["aria-label"]:ue,["aria-describedby"]:U,["aria-labelledby"]:le,tabIndex:se,...he}=u,ne=u;return s.jsx("a",{ref:e,href:ne.href,target:ne.target,rel:ne.rel,className:f.classes,role:"button",draggable:"false","data-module":"nhs-button",...I,...l&&{"data-prevent-double-click":"true"},...he,onKeyDown:fe=>{ne.onKeyDown?.(fe),_(fe)},onClick:fe=>{ne.onClick?.(fe),w(fe)},onMouseDown:fe=>{ne.onMouseDown?.(fe),M()},onMouseUp:fe=>{ne.onMouseUp?.(fe),C()},onMouseEnter:fe=>{ne.onMouseEnter?.(fe),v()},onMouseLeave:fe=>{ne.onMouseLeave?.(fe),D()},onFocus:fe=>{ne.onFocus?.(fe),T()},onBlur:fe=>{ne.onBlur?.(fe),N()},"aria-disabled":ne["aria-disabled"],...ne["aria-disabled"]==="true"&&{tabIndex:-1},id:Y,style:G,title:q,"aria-label":ue,"aria-describedby":U,"aria-labelledby":le,tabIndex:se,children:n})}const{id:j,style:x,title:S,["aria-label"]:B,["aria-describedby"]:P,["aria-labelledby"]:$,tabIndex:k,name:H,value:Q,form:O,formAction:z,formEncType:W,formMethod:R,formNoValidate:E,formTarget:L,autoFocus:X,...ie}=u,te=u;return s.jsx("button",{ref:e,type:te.type||"button",disabled:te.disabled,className:f.classes,"data-module":"nhs-button",...I,...l&&{"data-prevent-double-click":"true"},...te.disabled&&{"aria-disabled":"true"},...ie,onKeyDown:Y=>{te.onKeyDown?.(Y),_(Y)},onClick:Y=>{te.onClick?.(Y),w(Y)},onMouseDown:Y=>{te.onMouseDown?.(Y),M()},onMouseUp:Y=>{te.onMouseUp?.(Y),C()},onMouseEnter:Y=>{te.onMouseEnter?.(Y),v()},onMouseLeave:Y=>{te.onMouseLeave?.(Y),D()},onFocus:Y=>{te.onFocus?.(Y),T()},onBlur:Y=>{te.onBlur?.(Y),N()},id:j,style:x,title:S,"aria-label":B,"aria-describedby":P,"aria-labelledby":$,tabIndex:k,name:H,value:Q,form:O,formAction:z,formEncType:W,formMethod:R,formNoValidate:E,formTarget:L,autoFocus:X,children:n})}const nt=Ig(Pg);nt.displayName="Button";const $a=({text:t="Back",html:e,href:n="#",className:r,element:a="a",onClick:i,...o})=>{const l=ye("nhsuk-back-link",r),u=ye("nhsuk-back-link__link"),c=()=>s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:s.jsx("path",{d:"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"})}),e?s.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t]});return s.jsx("div",{className:l,children:a==="button"?s.jsx("button",{className:u,onClick:i,type:"button",...o,children:c()}):s.jsx("a",{className:u,href:n,...o,children:c()})})};function Lg(t){const{color:e="default",noBorder:n,closable:r,disabled:a,className:i}=t;return{classes:["nhsuk-tag",e!=="default"?`nhsuk-tag--${e}`:"",n?"nhsuk-tag--no-border":"",r?"nhsuk-tag--closable":"",a?"nhsuk-tag--disabled":"",i||""].filter(Boolean).join(" "),showClose:!!r,disabled:!!a}}const Ye=({text:t,html:e,children:n,color:r="default",noBorder:a=!1,closable:i=!1,onClose:o,disabled:l=!1,className:u,...c})=>{const d=Lg({color:r,noBorder:a,closable:i,disabled:l,className:u}),h=p=>{p.preventDefault(),p.stopPropagation(),!l&&o&&o()};return s.jsxs("strong",{className:d.classes,...c,children:[n||(e?s.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t),i&&s.jsx("button",{type:"button",className:"nhsuk-tag__close",onClick:h,disabled:l,"aria-label":"Remove",title:"Remove",children:"Ã—"})]})},nc=({id:t,name:e,checked:n,defaultChecked:r=!1,disabled:a=!1,value:i="true",hint:o,errorMessage:l,className:u,children:c,onChange:d,onBlur:h,onFocus:p,attributes:g,...y})=>{const[f,m]=F.useState(r),I=n!==void 0,M=I?n:f;F.useEffect(()=>{I||m(r)},[r,I]);const C=_=>{const w=_.target.checked;I||m(w),d?.(w,_)},v=o?`${t}-hint`:void 0,D=l?`${t}-error`:void 0,T=[v,D].filter(Boolean).join(" ")||void 0,N=ye("nhsuk-form-group",{"nhsuk-form-group--error":!!l},u);return s.jsx("div",{className:N,...y,children:s.jsx("div",{className:"nhsuk-checkboxes",children:s.jsxs("div",{className:"nhsuk-checkboxes__item",children:[s.jsx("input",{className:"nhsuk-checkboxes__input",id:t,name:e||t,type:"checkbox",value:i,checked:M,disabled:a,onChange:C,onBlur:h,onFocus:p,"aria-describedby":T,...g}),s.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:t,children:c}),o&&s.jsx("div",{id:v,className:"nhsuk-checkboxes__hint",children:o}),l&&s.jsxs("div",{id:D,className:"nhsuk-error-message nhsuk-checkboxes__error",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]})]})})})};nc.displayName="Checkbox";function Fg(t){const n=(t.type||"text")==="range";return{classes:["nhsuk-input",t.hasError?"nhsuk-input--error":"",n?"nhsuk-input--range":"",!n&&t.width&&t.width!=="full"?`nhsuk-input--width-${t.width}`:"",t.className||""].filter(Boolean).join(" "),isRange:n}}const Ia=({id:t,name:e,type:n="text",value:r,defaultValue:a,placeholder:i,disabled:o=!1,readOnly:l=!1,required:u=!1,hasError:c=!1,describedBy:d,className:h,width:p="full",inputMode:g,autoComplete:y,maxLength:f,minLength:m,pattern:I,step:M,min:C,max:v,showValueLabels:D=!1,showCurrentValue:T=!1,valueLabels:N,onChange:_,onBlur:w,onFocus:j,onKeyDown:x,...S})=>{const[B,P]=F.useState(r||a||(n==="range"?C||"0":""));F.useEffect(()=>{r!==void 0&&P(r)},[r]);const $=L=>{const X=L.target;P(X.value),("type"in L&&L.nativeEvent||L.type==="keydown")&&_?.(L)},{classes:k,isRange:H}=Fg({type:n,hasError:c,width:p,className:h}),Q=r!==void 0,O={id:t,name:e,type:n,placeholder:i,disabled:o,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:y,maxLength:f,minLength:m,pattern:I,step:M,min:C,max:v,onChange:$,onBlur:w,onFocus:j,onKeyDown:L=>{if(H&&/[0-9]/.test(L.key)){const X=(B?.toString()||"")+L.key;L.target.value=X,$(L)}x?.(L)},...S},z=!Q&&a!==void 0?{defaultValue:a}:{},W=Q?{value:r}:{},R=()=>s.jsx("input",{className:k,...W,...z,"data-current-value":B,...O}),E=H?s.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[D&&s.jsxs("div",{className:"nhsuk-input-range-labels",children:[s.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:N?.min||C||"0"}),R(),s.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:N?.max||v||"100"})]}),!D&&R(),T&&s.jsx("div",{className:"nhsuk-input-range-current-value",children:s.jsxs("span",{className:"nhsuk-input-range-current-label",children:[N?.current||"Current value:"," ",s.jsx("strong",{children:B})]})})]}):null;return H?E:s.jsx("input",{className:k,id:t,name:e,type:n,value:r,...r===void 0&&a!==void 0?{defaultValue:a}:{},placeholder:i,disabled:o,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:y,maxLength:f,minLength:m,pattern:I,step:M,min:C,max:v,onChange:_,onBlur:w,onFocus:j,onKeyDown:x,...S})};function Bg(t){const e=t.size||"m",n=["nhsuk-label",e!=="m"?`nhsuk-label--${e}`:"",t.className||""].filter(Boolean).join(" ");return{tag:t.isPageHeading?"h1":"label",classes:n,size:e,htmlFor:t.isPageHeading?void 0:t.htmlFor,isPageHeading:!!t.isPageHeading}}const Pa=({htmlFor:t,className:e,isPageHeading:n=!1,size:r="m",children:a,...i})=>{const o=Bg({size:r,isPageHeading:n,className:e,htmlFor:t}),l=o.tag;return s.jsx(l,{className:o.classes,htmlFor:o.htmlFor,...i,children:n?s.jsx("label",{className:"nhsuk-label-wrapper",htmlFor:t,children:a}):a})},La=({children:t,legend:e,className:n,describedBy:r,...a})=>{const i=ye("nhsuk-fieldset",n),o=ye("nhsuk-fieldset__legend",{[`nhsuk-fieldset__legend--${e?.size}`]:e?.size},e?.className),l=()=>{const u=e?.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:e.html}}):e?.text;return e?.isPageHeading?s.jsx("h1",{className:"nhsuk-fieldset__heading",children:u}):u};return s.jsxs("fieldset",{className:i,"aria-describedby":r,...a,children:[e&&(e.text||e.html)&&s.jsx("legend",{className:o,children:l()}),t]})},rc=({items:t,name:e,idPrefix:n,legend:r,isPageHeading:a=!1,legendSize:i="l",hint:o,errorMessage:l,className:u="",small:c=!1,onChange:d,fieldsetAttributes:h,attributes:p,...g})=>{const[y,f]=F.useState(t.filter(_=>_.checked).map(_=>_.value)),m=n||e,I=o?`${m}-hint`:void 0,M=l?`${m}-error`:void 0,C=[I,M].filter(Boolean).join(" ")||void 0,v=(_,w)=>{let j;w?j=[...y,_]:j=y.filter(x=>x!==_),f(j),d?.(j)},D=()=>t.map((_,w)=>{const j=`${m}-${w+1}`,x=`${j}-conditional`,S=y.includes(_.value),B=_.disabled||!1;return s.jsxs("div",{className:"nhsuk-checkboxes__item",children:[s.jsx("input",{className:"nhsuk-checkboxes__input",id:j,name:e,type:"checkbox",value:_.value,checked:S,disabled:B,onChange:P=>v(_.value,P.target.checked),"aria-describedby":_.hint?`${j}-hint`:C,..._.conditional&&{"aria-controls":x,"aria-expanded":S?"true":"false"},..._.attributes}),s.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:j,children:_.text}),_.hint&&s.jsx("div",{id:`${j}-hint`,className:"nhsuk-checkboxes__hint",children:_.hint}),_.conditional&&s.jsx("div",{className:ye("nhsuk-checkboxes__conditional",{"nhsuk-checkboxes__conditional--hidden":!S}),id:x,children:typeof _.conditional=="object"&&_.conditional!==null&&"label"in _.conditional&&"id"in _.conditional&&"name"in _.conditional?s.jsxs("div",{style:{marginTop:"16px"},children:[_.conditional.label&&s.jsx(Pa,{htmlFor:_.conditional.id,children:_.conditional.label}),s.jsx(Ia,{..._.conditional})]}):_.conditional})]},_.value)}),T=ye("nhsuk-checkboxes",{"nhsuk-checkboxes--small":c},u),N=ye("nhsuk-form-group",{"nhsuk-form-group--error":!!l});return s.jsx("div",{className:N,...p,...g,children:s.jsxs(La,{legend:r?{text:r,isPageHeading:a,size:i}:void 0,describedBy:C,...h,children:[o&&s.jsx("div",{id:I,className:"nhsuk-hint",children:o}),l&&s.jsxs("div",{id:M,className:"nhsuk-error-message",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]}),s.jsx("div",{className:T,children:D()})]})})};rc.displayName="Checkboxes";const ac=({id:t,name:e,value:n,defaultValue:r,placeholder:a,disabled:i=!1,readOnly:o=!1,required:l=!1,hasError:u=!1,describedBy:c,className:d,rows:h=5,cols:p,maxLength:g,minLength:y,wrap:f="soft",resize:m="vertical",autoComplete:I,spellCheck:M,onChange:C,onBlur:v,onFocus:D,onKeyDown:T,...N})=>{const _=ye("nhsuk-textarea",{"nhsuk-textarea--error":u,[`nhsuk-textarea--resize-${m}`]:m!=="vertical"},d);return s.jsx("textarea",{className:_,id:t,name:e,value:n,defaultValue:r,placeholder:a,disabled:i,readOnly:o,required:l,"aria-describedby":c,rows:h,cols:p,maxLength:g,minLength:y,wrap:f,autoComplete:I,spellCheck:M,onChange:C,onBlur:v,onFocus:D,onKeyDown:T,...N})};function Ag(t){return{classes:["nhsuk-hint",t.className||""].filter(Boolean).join(" "),id:t.id}}const Qi=({id:t,className:e,children:n,...r})=>{const a=Ag({id:t,className:e});return s.jsx("div",{className:a.classes,id:a.id,...r,children:n})},Eg=({id:t,maxLength:e,maxWords:n,threshold:r=75,name:a,value:i,defaultValue:o,rows:l,className:u,countMessage:c,onCountChange:d,onChange:h,...p})=>{const g=i??o??"",[y,f]=F.useState(g),[m,I]=F.useState(0),[M,C]=F.useState(!1),[v,D]=F.useState(!1),T=F.useCallback(S=>n?S.trim()===""?0:S.trim().split(/\s+/).length:S.length,[n]);F.useEffect(()=>{const S=T(y),B=e||n||0,P=B-S,$=Math.floor(B*(r/100));I(P),C(S>B),D(S>=$||S>B),d&&d(S,P)},[y,e,n,r,T,d]);const N=S=>{const B=S.target.value;f(B),h&&h(S)},_=()=>{const S=e||n||0,B=n?"word":"character",P=n?"words":"characters";if(!v)return`You can enter up to ${S} ${S===1?B:P}`;if(M){const $=Math.abs(m);return`You have ${$} ${$===1?B:P} too many`}else return`You have ${m} ${m===1?B:P} remaining`},w=ye("nhsuk-character-count",u),j=ye("nhsuk-character-count__message",{"nhsuk-character-count__message--disabled":!v,"nhsuk-error-message":M},c?.classes),x=ye("nhsuk-js-character-count",{"nhsuk-textarea--error":M});return s.jsxs("div",{className:w,"data-module":"nhsuk-character-count","data-maxlength":e,"data-maxwords":n,"data-threshold":r,"data-testid":"character-count",children:[s.jsx(ac,{id:t,name:a,value:i!==void 0?y:void 0,defaultValue:i===void 0?o??y:void 0,rows:l,className:x,onChange:N,"aria-describedby":`${t}-info`,"aria-invalid":M||void 0,...p}),s.jsx(Qi,{id:`${t}-info`,className:j,role:"status","aria-live":"polite",children:_()})]})},ic=({value:t,disabled:e=!1,selected:n=!1,className:r,children:a,...i})=>{const o=ye("nhsuk-select__option",r);return s.jsx("option",{className:o,value:t,disabled:e,...i,children:a})},Cr=({id:t,name:e,ariaLabel:n,value:r,defaultValue:a,disabled:i=!1,required:o=!1,hasError:l=!1,describedBy:u,className:c,multiple:d=!1,size:h,autoComplete:p,options:g,children:y,onChange:f,onBlur:m,onFocus:I,...M})=>{const C=ye("nhsuk-select",{"nhsuk-select--error":l},c),v=()=>g?g.map((T,N)=>s.jsx("option",{value:T.value,disabled:T.disabled,"data-initial-selected":T.selected||void 0,children:T.text},`${T.value}-${N}`)):null,D=a===void 0&&r===void 0&&g?g.find(T=>T.selected)?.value:void 0;return s.jsx("select",{className:C,id:t,name:e,"aria-label":n,value:r,defaultValue:a!==void 0?a:D,disabled:i,required:o,"aria-describedby":u,multiple:d,size:h,autoComplete:p,onChange:f,onBlur:m,onFocus:I,...M,children:y||v()})};Cr.Option=ic;function sc(t,{variant:e,selectedValue:n,enableBehaviourAttr:r,handleChange:a,handleBlur:i,handleFocus:o,handleKeyDown:l,itemsRef:u}){const{onChange:c,onBlur:d,onFocus:h,...p}=t,{name:g,hasError:y=!1,describedBy:f,className:m,size:I="normal",inline:M=!1,options:C,...v}=p,D=ye("nhsuk-radios",{"nhsuk-radios--error":y,"nhsuk-radios--small":I==="small","nhsuk-radios--inline":M},m);return s.jsx(La,{children:s.jsx("div",{className:D,...v,...r?{"data-nhs-behaviour":"radios"}:{},children:C.map((T,N)=>{const _=`${g}-${N}`,w=T.conditional?`${_}-conditional`:void 0,j=n===T.value;return s.jsxs("div",{className:"nhsuk-radios__item",children:[s.jsx("input",{className:"nhsuk-radios__input",id:_,name:g,type:"radio",value:T.value,disabled:T.disabled,...e==="client"?{checked:j,onChange:a,onBlur:i,onFocus:o,onKeyDown:l,ref:x=>{x&&u&&(u.current[N]=x)}}:{defaultChecked:j,"data-nhs-radios-input":!0},"aria-describedby":f}),s.jsx("label",{className:"nhsuk-radios__label",htmlFor:_,children:T.text}),T.hint&&s.jsx("div",{className:"nhsuk-radios__hint",children:T.hint}),T.conditional&&s.jsx("div",{className:ye("nhsuk-radios__conditional",{"nhsuk-radios__conditional--hidden":!j}),id:w,...e==="server"?{"data-nhs-radios-conditional":!0}:{},children:typeof T.conditional=="object"&&T.conditional!==null&&"label"in T.conditional&&"id"in T.conditional&&"name"in T.conditional?s.jsxs("div",{style:{marginTop:"16px"},children:[T.conditional.label&&s.jsx(Pa,{htmlFor:T.conditional.id,children:T.conditional.label}),s.jsx(Ia,{...T.conditional})]}):T.conditional})]},T.value)})})})}const Hg=({value:t,defaultValue:e,onChange:n,onBlur:r,onFocus:a,...i})=>{const[o,l]=F.useState(t||e||""),u=F.useRef([]),c=F.useRef(o),d=g=>{const y=g.target.value;y!==c.current&&(c.current=y,l(y),n?.(g))},h=g=>{a?.(g)},p=F.useCallback(g=>{const{key:y}=g;if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(y))return;g.preventDefault();const f=u.current.filter(C=>C&&!C.disabled),m=f.indexOf(g.currentTarget);if(m===-1)return;let I=m;["ArrowDown","ArrowRight"].includes(y)?I=(m+1)%f.length:["ArrowUp","ArrowLeft"].includes(y)&&(I=(m-1+f.length)%f.length);const M=f[I];M&&(M.focus(),M.checked||M.click())},[]);return sc({value:t,defaultValue:e,onChange:n,onBlur:r,onFocus:a,...i},{variant:"client",selectedValue:o,enableBehaviourAttr:!1,handleChange:d,handleBlur:r,handleFocus:h,handleKeyDown:p,itemsRef:u})},Rg=({value:t,defaultValue:e,...n})=>{const r=t||e||"";return sc({value:t,defaultValue:e,...n},{variant:"server",selectedValue:r,enableBehaviourAttr:!0})},es=({children:t,className:e,fluid:n=!1,maxWidth:r,style:a,...i})=>{const o=ye({"nhsuk-width-container":!n,"nhsuk-width-container-fluid":n},e),l=r?{maxWidth:r,...a||{}}:a;return s.jsx("div",{className:o,style:l,...i,children:t})},pn=({children:t,className:e,style:n,...r})=>{const a=ye("nhsuk-grid-row",e);return s.jsx("div",{className:a,style:n,...r,children:t})},Zn=({children:t,width:e="full",mobileWidth:n,tabletWidth:r,desktopWidth:a,start:i,className:o,forceWidth:l=!1,style:u,...c})=>{const d=ye({[`nhsuk-grid-column-${e}`]:!l,[`nhsuk-u-${e}`]:l,[`nhsuk-u-${n}-mobile`]:n,[`nhsuk-u-${r}-tablet`]:r,[`nhsuk-u-${a}-desktop`]:a,[`nhsuk-grid-column-start-${i}`]:i&&i>=1&&i<=7},o);return s.jsx("div",{className:d,style:u,...c,children:t})},Fa=({children:t,className:e,style:n,...r})=>{const i=F.Children.toArray(t)[0],o=F.isValidElement(i)&&(i.type===pn||typeof i.props=="object"&&i.props&&"className"in i.props&&typeof i.props.className=="string"&&i.props.className.includes("nhsuk-grid-row"));return s.jsx(es,{className:e,style:n,...r,children:o?t:s.jsx(pn,{children:t})})},zg=({children:t,type:e="bullet",size:n="medium",border:r=!1,className:a,role:i,as:o,...l})=>{const u=o||(e==="number"?"ol":"ul"),c=ye("nhsuk-list",{"nhsuk-list--bullet":e==="bullet","nhsuk-list--number":e==="number","nhsuk-list--none":e==="none","nhsuk-list--border":r,[`nhsuk-list--${n}`]:n!=="medium"},a);return s.jsx(u,{className:c,role:i,...l,children:t})},Og=({children:t,className:e,...n})=>{const r=ye("nhsuk-list__item",e);return s.jsx("li",{className:r,...n,children:t})},oc=zg;oc.Item=Og;const Wg=({debug:t=!1,className:e,children:n,...r})=>{if(!n)return null;const a=["nhsuk-spacing-utilities",t&&"nhsuk-spacing-utilities--debug",e].filter(Boolean).join(" ");return s.jsx("div",{className:a,...r,children:n})},Ug={margin:t=>`nhsuk-u-margin-${t}`,marginTop:t=>`nhsuk-u-margin-top-${t}`,marginRight:t=>`nhsuk-u-margin-right-${t}`,marginBottom:t=>`nhsuk-u-margin-bottom-${t}`,marginLeft:t=>`nhsuk-u-margin-left-${t}`,padding:t=>`nhsuk-u-padding-${t}`,paddingTop:t=>`nhsuk-u-padding-top-${t}`,paddingRight:t=>`nhsuk-u-padding-right-${t}`,paddingBottom:t=>`nhsuk-u-padding-bottom-${t}`,paddingLeft:t=>`nhsuk-u-padding-left-${t}`,marginResponsive:t=>`nhsuk-u-margin-responsive-${t}`,marginTopResponsive:t=>`nhsuk-u-margin-top-responsive-${t}`,marginRightResponsive:t=>`nhsuk-u-margin-right-responsive-${t}`,marginBottomResponsive:t=>`nhsuk-u-margin-bottom-responsive-${t}`,marginLeftResponsive:t=>`nhsuk-u-margin-left-responsive-${t}`,paddingResponsive:t=>`nhsuk-u-padding-responsive-${t}`,paddingTopResponsive:t=>`nhsuk-u-padding-top-responsive-${t}`,paddingRightResponsive:t=>`nhsuk-u-padding-right-responsive-${t}`,paddingBottomResponsive:t=>`nhsuk-u-padding-bottom-responsive-${t}`,paddingLeftResponsive:t=>`nhsuk-u-padding-left-responsive-${t}`},Gg=({debug:t=!1,className:e,children:n,...r})=>{if(!n)return null;const a=["nhsuk-width-utilities",t&&"nhsuk-width-utilities--debug",e].filter(Boolean).join(" ");return s.jsx("div",{className:a,...r,children:n})},Yg={width:t=>`nhsuk-u-width-${t}`,widthTablet:t=>`nhsuk-u-width-${t}-tablet`},Vg=["full","three-quarters","two-thirds","one-half","one-third","one-quarter"],ts=({as:t="main",size:e="default",className:n,children:r,...a})=>{const i=["nhsuk-main-wrapper",e==="large"&&"nhsuk-main-wrapper--l",e==="small"&&"nhsuk-main-wrapper--s",n].filter(Boolean).join(" ");return s.jsx(t,{className:i,...a,children:r})};function qg(t){switch(t){case"xxl":case"xl":return 1;case"l":return 2;case"m":return 3;case"s":return 4;case"xs":return 5;default:return 2}}function Xg(t){const e=t.level??qg(t.size),n=["nhsuk-heading",t.size?`nhsuk-heading--${t.size}`:"",t.className||""].filter(Boolean).join(" "),r=t.marginBottom?{marginBottom:t.marginBottom}:void 0;return{tag:`h${e}`,classes:n,style:r}}const Ft=({level:t,className:e,text:n,html:r,children:a,size:i,marginBottom:o,...l})=>{const u=Xg({level:t,size:i,className:e,marginBottom:o}),c=a||(r?s.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n);return F.createElement(u.tag,{className:u.classes,style:u.style,...l},c)};function Kg(t){return{classes:["nhsuk-error-message",t.className||""].filter(Boolean).join(" "),id:t.id,visuallyHiddenText:t.visuallyHiddenText??"Error:"}}const ns=({id:t,className:e,visuallyHiddenText:n="Error:",children:r,...a})=>{const i=Kg({id:t,className:e,visuallyHiddenText:n});return s.jsxs("span",{className:i.classes,id:i.id,...a,children:[s.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[i.visuallyHiddenText," "]}),r]})},Zg=({titleText:t="There is a problem",titleHtml:e,descriptionText:n,descriptionHtml:r,errorList:a,className:i,children:o,...l})=>{const u=F.useRef(null);F.useEffect(()=>{u.current&&u.current.focus()},[]);const c=ye("nhsuk-error-summary",i),d=()=>e?s.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t,h=()=>r?s.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n,p=g=>{const y=g.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:g.html}}):g.text;return g.href?s.jsx("a",{href:g.href,...g.attributes,children:y}):y};return s.jsxs("div",{ref:u,className:c,"aria-labelledby":"error-summary-title",role:"alert",tabIndex:-1,"data-module":"nhsuk-error-summary",...l,children:[s.jsx("h2",{className:"nhsuk-error-summary__title",id:"error-summary-title",children:d()}),s.jsxs("div",{className:"nhsuk-error-summary__body",children:[o&&s.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:o}),!o&&(n||r)&&s.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:h()}),s.jsx("ul",{className:"nhsuk-list nhsuk-error-summary__list",role:"list",children:a.map((g,y)=>s.jsx("li",{children:p(g)},y))})]})]})},Jg=({id:t,className:e,items:n,namePrefix:r,values:a={},fieldset:i,hint:o,errorMessage:l,onChange:u,...c})=>{const[d,h]=F.useState(()=>({day:a.day||"",month:a.month||"",year:a.year||""})),[p,g]=F.useState({}),y=$=>$%4===0&&$%100!==0||$%400===0,f=($,k)=>{const H=[31,28,31,30,31,30,31,31,30,31,30,31];return $===2&&y(k)?29:H[$-1]},m=($,k,H)=>{if(!$)return;if(!/^\d+$/.test($))return"Day must be a number";const Q=parseInt($,10);if(Q<1||Q>31)return"Day must be between 1 and 31";if(k&&H){const O=parseInt(k,10),z=parseInt(H,10);if(!isNaN(O)&&!isNaN(z)&&O>=1&&O<=12){const W=f(O,z);if(Q>W)return`${["January","February","March","April","May","June","July","August","September","October","November","December"][O-1]} ${z} only has ${W} days`}}},I=$=>{if(!$)return;if(!/^\d+$/.test($))return"Month must be a number";const k=parseInt($,10);if(k<1||k>12)return"Month must be between 1 and 12"},M=$=>{if(!$)return;if(!/^\d+$/.test($))return"Year must be a number";const k=parseInt($,10),H=new Date().getFullYear();if(k<1900||k>H+10)return`Year must be between 1900 and ${H+10}`},C=($,k,H)=>{if(!$||!k||!H)return;const Q=parseInt($,10),O=parseInt(k,10),z=parseInt(H,10);if(isNaN(Q)||isNaN(O)||isNaN(z)||O<1||O>12||z<1900)return;const W=f(O,z);Q<1||Q>W},v=F.useCallback(($,k)=>{const H={...d,[$]:k};h(H),u&&u(H)},[d,u]),D=F.useCallback($=>{const k=d[$];let H;if($==="day")H=m(k,d.month,d.year);else if($==="month"){if(H=I(k),!H&&d.day){const Q=m(d.day,k,d.year);g(O=>({...O,day:Q}))}}else if($==="year"&&(H=M(k),!H&&d.day&&d.month)){const Q=m(d.day,d.month,k);g(O=>({...O,day:Q}))}if(g(Q=>({...Q,[$]:H})),d.day&&d.month&&d.year){const Q=C($==="day"?k:d.day,$==="month"?k:d.month,$==="year"?k:d.year);Q&&g(O=>({...O,day:Q}))}},[d,m,I,M,C]),T=F.useMemo(()=>[{name:"day",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"month",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"year",classes:"nhsuk-input--width-4",inputmode:"numeric",pattern:"[0-9]*"}],[]),N=n||T;let _=i?.describedBy||"";const w=o?`${t}-hint`:"",j=l?`${t}-error`:"";w&&(_=_?`${_} ${w}`:w),j&&(_=_?`${_} ${j}`:j);const x=Object.values(p).some($=>$),S=ye("nhsuk-form-group",{"nhsuk-form-group--error":l||x}),B=ye("nhsuk-date-input",e),P=()=>s.jsxs(s.Fragment,{children:[o&&s.jsx(Qi,{id:w,className:o.classes,children:o.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:o.html}}):o.text}),l&&s.jsx(ns,{id:j,className:l.classes,children:l.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text}),Object.entries(p).map(([$,k])=>k?s.jsxs(ns,{id:`${t}-${$}-error`,className:"nhsuk-error-message",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",k]},`${$}-error`):null),s.jsx("div",{className:B,id:t,"data-testid":"date-input",...c,children:N.map($=>{const k=$.id||`${t}-${$.name}`,H=r?`${r}[${$.name}]`:$.name,Q=$.label||$.name.charAt(0).toUpperCase()+$.name.slice(1),O=p[$.name],z=d[$.name]||"";let W=_;if(O){const R=`${t}-${$.name}-error`;W=W?`${W} ${R}`:R}return s.jsxs("div",{className:"nhsuk-date-input__item",children:[s.jsx(Pa,{htmlFor:k,className:"nhsuk-date-input__label",children:Q}),s.jsx(Ia,{id:k,name:H,value:z,className:ye("nhsuk-date-input__input",$.classes,{"nhsuk-input--error":O}),inputMode:$.inputmode,autoComplete:$.autocomplete,pattern:$.pattern,"aria-describedby":W||void 0,hasError:!!O,onChange:R=>v($.name,R.target.value),onBlur:()=>D($.name)})]},$.name)})})]});return s.jsx("div",{className:S,children:i?s.jsx(La,{className:i.classes,legend:i.legend?{text:i.legend}:void 0,describedBy:_||void 0,children:P()}):P()})},lc={animation:{AnimationDurationFast:"150ms",AnimationDurationNormal:"300ms",AnimationDurationSlow:"500ms",AnimationEasingEaseIn:"cubic-bezier(0.4, 0, 1, 1)",AnimationEasingEaseOut:"cubic-bezier(0, 0, 0.2, 1)",AnimationEasingEaseInOut:"cubic-bezier(0.4, 0, 0.2, 1)",AnimationEasingBounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},transition:{TransitionButtonDefault:"background-color 300ms cubic-bezier(0, 0, 0.2, 1)",TransitionButtonShadow:"box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionInputFocus:"border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionCardHover:"border-color 300ms cubic-bezier(0, 0, 0.2, 1)"},border:{BorderWidthDefault:"1px",BorderWidthFormElement:"2px",BorderWidthFormElementError:"4px",BorderWidthCardBottom:"4px",BorderWidthPanel:"4px",BorderWidthTableHeader:"2px",BorderWidthTableCell:"1px",BorderRadiusNone:"0px",BorderRadiusSmall:"4px",BorderRadiusMedium:"8px",BorderRadiusLarge:"12px",BorderColorDefault:"#d8dde0",BorderColorForm:"#4c6272",BorderColorCard:"#d8dde0",BorderColorCardHover:"#aeb7bd",BorderColorError:"#d5281b"},color:{ColorPrimaryBlue:"#005eb8",ColorPrimaryWhite:"#ffffff",ColorPrimaryBlack:"#212b32",ColorPrimaryGreen:"#007f3b",ColorPrimaryPurple:"#330072",ColorPrimaryDarkPink:"#7c2855",ColorPrimaryRed:"#d5281b",ColorPrimaryYellow:"#ffeb3b",ColorSecondaryPaleYellow:"#fff9c4",ColorSecondaryWarmYellow:"#ffb81c",ColorSecondaryOrange:"#ed8b00",ColorSecondaryAquaGreen:"#00a499",ColorSecondaryPink:"#ae2573",ColorGrey1:"#4c6272",ColorGrey2:"#768692",ColorGrey3:"#aeb7bd",ColorGrey4:"#d8dde0",ColorGrey5:"#f0f4f5",ColorTextPrimary:"#212b32",ColorTextSecondary:"#4c6272",ColorTextReverse:"#ffffff",ColorTextPrint:"#212b32",ColorLinkDefault:"#005eb8",ColorLinkHover:"#7c2855",ColorLinkActive:"#003087",ColorLinkVisited:"#330072",ColorFocusBackground:"#ffeb3b",ColorFocusText:"#212b32",ColorBorderDefault:"#d8dde0",ColorBorderSecondary:"#ffffff33",ColorError:"#d5281b",ColorFormBorder:"#4c6272",ColorFormBackground:"#ffffff",ColorButtonPrimaryBackground:"#007f3b",ColorButtonPrimaryText:"#ffffff",ColorButtonPrimaryHover:"#006530",ColorButtonPrimaryActive:"#004021",ColorButtonPrimaryShadow:"#004021",ColorButtonSecondaryBackground:"#00000000",ColorButtonSecondaryBackgroundSolid:"#ffffff",ColorButtonSecondaryBorder:"#005eb8",ColorButtonSecondaryText:"#005eb8",ColorButtonSecondaryHover:"#d9e5f2",ColorButtonSecondaryActive:"#c7daf0",ColorButtonSecondaryShadow:"#005eb8",ColorButtonReverseBackground:"#ffffff",ColorButtonReverseText:"#212b32",ColorButtonReverseHover:"#d9dde0",ColorButtonReverseActive:"#b3bcc2",ColorButtonReverseShadow:"#b3bcc2",ColorButtonWarningBackground:"#d5281b",ColorButtonWarningHover:"#aa2016",ColorButtonWarningActive:"#6a140e",ColorButtonWarningShadow:"#6a140e",ColorButtonLoginBackground:"#005eb8",ColorButtonLoginHover:"#004b93",ColorButtonLoginActive:"#002f5c",ColorButtonLoginShadow:"#002f5c"},component:{ComponentButtonPaddingMobileVertical:"8px",ComponentButtonPaddingMobileHorizontal:"16px",ComponentButtonPaddingDesktopVertical:"12px",ComponentButtonPaddingDesktopHorizontal:"16px",ComponentButtonShadowSize:"4px",ComponentFormInputMinHeight:"40px",ComponentFormInputPadding:"4px",ComponentFormCheckboxSize:"40px",ComponentFormCheckboxLabelPadding:"12px",ComponentCardPaddingMobile:"16px",ComponentCardPaddingDesktop:"32px",ComponentCardHeadingMargin:"16px",ComponentPanelPaddingMobile:"20px",ComponentPanelPaddingDesktop:"28px",ComponentBreadcrumbChevronMarginLeft:"9px",ComponentBreadcrumbChevronMarginRight:"2px",ComponentBreadcrumbPaddingTopMobile:"16px",ComponentBreadcrumbPaddingTopDesktop:"24px",ComponentSummaryListCellPaddingVertical:"8px",ComponentSummaryListCellPaddingHorizontal:"24px",ComponentSummaryListRowMargin:"16px",ComponentSpread:"4px",ComponentBlur:"4px",ComponentLink:"4px",ComponentDetails:"8px",ComponentExpander:"4px",ComponentPagination:"16px"},button:{ButtonPrimaryBackgroundDefault:"#007f3b",ButtonPrimaryBackgroundHover:"#006530",ButtonPrimaryBackgroundActive:"#004021",ButtonPrimaryBackgroundDisabled:"#d8dde0",ButtonPrimaryTextDefault:"#ffffff",ButtonPrimaryTextDisabled:"#768692",ButtonPrimaryBorderDefault:"#00000000",ButtonPrimaryBorderFocus:"#ffeb3b",ButtonSecondaryBackgroundDefault:"#00000000",ButtonSecondaryBackgroundSolid:"#ffffff",ButtonSecondaryBackgroundHover:"#d9e5f2",ButtonSecondaryBackgroundActive:"#c7daf0",ButtonSecondaryTextDefault:"#005eb8",ButtonSecondaryBorderDefault:"#005eb8",ButtonSpacingPaddingVerticalMobile:"8px",ButtonSpacingPaddingHorizontalMobile:"16px",ButtonSpacingPaddingVerticalDesktop:"12px",ButtonSpacingPaddingHorizontalDesktop:"16px",ButtonBorderWidth:"2px",ButtonBorderRadius:"4px",ButtonShadowSize:"4px",ButtonTypographyWeight:"600"},card:{CardBackgroundDefault:"#ffffff",CardBorderDefault:"#d8dde0",CardBorderHover:"#aeb7bd",CardBorderBottom:"#f0f4f5",CardTextHeading:"#212b32",CardTextDescription:"#212b32",CardTextLink:"#005eb8",CardSpacingPaddingMobile:"16px",CardSpacingPaddingDesktop:"32px",CardSpacingHeadingMargin:"16px",CardBorderWidthDefault:"1px",CardBorderWidthBottom:"4px",CardShadowDefault:"none",CardShadowHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},form:{FormInputBackgroundDefault:"#ffffff",FormInputBackgroundFocus:"#ffffff",FormInputBackgroundDisabled:"#d8dde0",FormInputBackgroundError:"#ffffff",FormInputBorderDefault:"#4c6272",FormInputBorderFocus:"#ffeb3b",FormInputBorderError:"#d5281b",FormInputBorderDisabled:"#aeb7bd",FormInputTextDefault:"#212b32",FormInputTextPlaceholder:"#4c6272",FormInputTextDisabled:"#768692",FormLabelTextDefault:"#212b32",FormLabelTextRequired:"#ffffff",FormLabelTypographyWeight:"600",FormErrorTextDefault:"#d5281b",FormErrorTypographyWeight:"600",FormHintTextDefault:"#4c6272",FormSpacingInputPadding:"4px",FormSpacingInputMinHeight:"40px",FormSpacingCheckboxSize:"40px",FormSpacingCheckboxLabelPadding:"12px",FormBorderWidthDefault:"2px",FormBorderWidthError:"4px",FormBorderRadius:"0px"},size:{SizeIconSmall:"16px",SizeIconMedium:"18px",SizeIconLarge:"24px",SizeIconExtraLarge:"32px",SizeIconNhsDefault:"34px",SizeFormControlSmall:"32px",SizeFormControlMedium:"40px",SizeFormControlLarge:"48px",SizeFormInputWidthXs:"5.4ex",SizeFormInputWidthSm:"7.2ex",SizeFormInputWidthMd:"9ex",SizeFormInputWidthLg:"10.8ex",SizeFormInputWidthXl:"20ex",SizeFormInputWidth2xl:"38ex",SizeFormInputWidth3xl:"56ex",SizeButtonMinHeightMobile:"44px",SizeButtonMinHeightDesktop:"40px"},layout:{LayoutContainerMaxWidth:"1020px",LayoutColumnFull:"100%",LayoutColumnHalf:"50%",LayoutColumnThird:"33.333%",LayoutColumnQuarter:"25%",LayoutColumnActions:"20%"},breakpoint:{BreakpointMobile:"320px",BreakpointTablet:"641px",BreakpointDesktop:"1025px",BreakpointLargeDesktop:"1280px"},grid:{GridPageWidth:"960px",GridGutter:"32px",GridGutterHalf:"16px"},state:{StateErrorBackground:"#d5281b",StateErrorBorder:"#d5281b",StateErrorText:"#ffffff",StateSuccessBackground:"#007f3b",StateSuccessBorder:"#007f3b",StateSuccessText:"#ffffff",StateWarningBackground:"#ffeb3b",StateWarningBorder:"#ffeb3b",StateWarningText:"#212b32",StateInfoBackground:"#005eb8",StateInfoBorder:"#005eb8",StateInfoText:"#ffffff",StateDisabledBackground:"#d8dde0",StateDisabledBorder:"#aeb7bd",StateDisabledText:"#768692"},shadow:{ShadowButtonDefault:"0 4px 0 #004021",ShadowButtonSecondary:"0 4px 0 #005eb8",ShadowButtonWarning:"0 4px 0 #6a140e",ShadowButtonFocus:"0 4px 0 #ffeb3b",ShadowCardDefault:"none",ShadowCardHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},"focus-outline":{FocusOutlineWidth:"4px",FocusOutlineOffset:"0px",FocusOutlineStyle:"solid"},"focus-shadow":{FocusShadowInput:"0 0 0 3px #ffeb3b",FocusShadowButton:"0 0 0 3px #ffeb3b"},elevation:{ElevationNone:"none",ElevationLow:"0 1px 3px rgba(0, 0, 0, 0.12)",ElevationMedium:"0 2px 6px rgba(0, 0, 0, 0.16)",ElevationHigh:"0 4px 12px rgba(0, 0, 0, 0.20)"},spacing:{Spacing0:"0",Spacing1:"4px",Spacing2:"8px",Spacing3:"16px",Spacing4:"24px",Spacing5:"32px",Spacing6:"40px",Spacing7:"48px",Spacing8:"56px",Spacing9:"64px"},"spacing-responsive":{SpacingResponsive0Mobile:"0",SpacingResponsive0Tablet:"0",SpacingResponsive1Mobile:"4px",SpacingResponsive1Tablet:"4px",SpacingResponsive2Mobile:"8px",SpacingResponsive2Tablet:"8px",SpacingResponsive3Mobile:"8px",SpacingResponsive3Tablet:"16px",SpacingResponsive4Mobile:"16px",SpacingResponsive4Tablet:"24px",SpacingResponsive5Mobile:"24px",SpacingResponsive5Tablet:"32px",SpacingResponsive6Mobile:"32px",SpacingResponsive6Tablet:"40px",SpacingResponsive7Mobile:"40px",SpacingResponsive7Tablet:"48px",SpacingResponsive8Mobile:"48px",SpacingResponsive8Tablet:"56px",SpacingResponsive9Mobile:"56px",SpacingResponsive9Tablet:"64px"},font:{FontFamilyBase:"Frutiger W01",FontFamilyFallback:"Arial, Helvetica, sans-serif",FontFamilyPrint:"sans-serif",FontWeightNormal:"400",FontWeightBold:"600",FontWeightLight:"400",FontSize14Mobile:"12px",FontSize14Tablet:"14px",FontSize14Print:"12pt",FontSize16Mobile:"14px",FontSize16Tablet:"16px",FontSize16Print:"12pt",FontSize19Mobile:"16px",FontSize19Tablet:"19px",FontSize19Print:"13pt",FontSize22Mobile:"19px",FontSize22Tablet:"22px",FontSize22Print:"15pt",FontSize26Mobile:"22px",FontSize26Tablet:"26px",FontSize26Print:"17pt",FontSize36Mobile:"27px",FontSize36Tablet:"36px",FontSize36Print:"20pt",FontSize48Mobile:"33px",FontSize48Tablet:"48px",FontSize48Print:"24pt",FontSizeBase:"16px",FontLineHeightBase:"24px"},headings:{xl:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},l:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},m:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},s:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xs:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}}},paragraphs:{body:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bodyLarge:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},bodySmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ledeText:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},ledeTextSmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}}}},cc=F.createContext(lc),Qg=({children:t,theme:e={}})=>{const n={...lc,...e};return s.jsx(cc.Provider,{value:n,children:t})},e0=()=>{const t=F.useContext(cc);if(!t)throw new Error("useNHSTheme must be used within an NHSThemeProvider");return t};function t0(){return`
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 400;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff") format("woff");
	}
	
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 600;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff") format("woff");
	}
  `}function n0(){if(typeof document>"u"||document.getElementById("nhs-fonts"))return;const t=document.createElement("style");t.id="nhs-fonts",t.textContent=t0(),document.head.appendChild(t)}const r0=({children:t,theme:e})=>(F.useEffect(()=>{n0()},[]),s.jsx(Qg,{theme:e,children:t})),uc=({mode:t="form",action:e="/search",method:n="get",name:r="q",value:a,placeholder:i="Search",visuallyHiddenLabel:o="Search the NHS website",visuallyHiddenButton:l="Search",className:u,disabled:c=!1,callbacks:d={},isLoading:h=!1,showResults:p=!1,results:g=[],formAttributes:y={},inputAttributes:f={},buttonAttributes:m={},preventDefaultSubmit:I=!1,debounceMs:M=300,minQueryLength:C=1})=>{const[v,D]=F.useState(""),[T,N]=F.useState(!1),_=F.useRef(void 0),w=F.useRef(null),j=F.useRef(null),x=t==="controlled"&&a!==void 0,S=x?a:v,B=F.useCallback(E=>{_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{d.onChange&&E.length>=C&&d.onChange(E)},M)},[d.onChange,M,C]),P=F.useCallback(E=>{const L=E.target.value;x||D(L),t!=="form"&&B(L)},[x,t,B]),$=F.useCallback(E=>{const L=S.trim(),X={query:L,timestamp:Date.now(),formData:new FormData(E.currentTarget)};t==="controlled"||t==="hybrid"&&I?(E.preventDefault(),d.onSearch&&L.length>=C&&d.onSearch(X)):t==="hybrid"&&d.onSearch&&L.length>=C&&d.onSearch(X)},[t,S,d.onSearch,I,C]),k=F.useCallback(()=>{N(!0),d.onFocus?.()},[d.onFocus]),H=F.useCallback(()=>{N(!1),d.onBlur?.()},[d.onBlur]),Q=F.useCallback(()=>{x||D(""),d.onClear?.(),j.current?.focus()},[x,d.onClear]);F.useEffect(()=>()=>{_.current&&clearTimeout(_.current)},[]);const O=()=>s.jsx("svg",{className:ye("nhsuk-icon nhsuk-icon__search",{"nhsuk-icon__search--loading":h}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"})}),z=()=>s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsxs("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[s.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416",repeatCount:"indefinite"})]})}),W=()=>!S||t==="form"?null:s.jsx("button",{type:"button",className:"nhsuk-header__search-clear",onClick:Q,"aria-label":"Clear search",children:s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__close",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z"})})}),R=()=>!p||!g.length||!T?null:s.jsx("div",{className:"nhsuk-header__search-results",role:"listbox",children:g.map(E=>s.jsx("div",{className:"nhsuk-header__search-result",role:"option",children:E.href?s.jsxs("a",{href:E.href,className:"nhsuk-header__search-result-link",children:[s.jsx("span",{className:"nhsuk-header__search-result-title",children:E.title}),E.description&&s.jsx("span",{className:"nhsuk-header__search-result-description",children:E.description})]}):s.jsxs("button",{type:"button",className:"nhsuk-header__search-result-button",onClick:()=>d.onSearch?.({query:E.title,timestamp:Date.now()}),children:[s.jsx("span",{className:"nhsuk-header__search-result-title",children:E.title}),E.description&&s.jsx("span",{className:"nhsuk-header__search-result-description",children:E.description})]})},E.id))});return s.jsxs("div",{className:ye("nhsuk-header__search",u,{"nhsuk-header__search--controlled":t==="controlled","nhsuk-header__search--hybrid":t==="hybrid","nhsuk-header__search--loading":h,"nhsuk-header__search--focused":T,"nhsuk-header__search--has-results":p&&g.length>0}),children:[s.jsxs("form",{ref:w,className:"nhsuk-header__search-form",id:"search",action:t!=="controlled"?e:void 0,method:t!=="controlled"?n:void 0,role:"search",onSubmit:$,...y,children:[s.jsx("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field",children:o}),s.jsxs("div",{className:"nhsuk-header__search-input-wrapper",children:[s.jsx("input",{ref:j,className:"nhsuk-header__search-input nhsuk-input",id:"search-field",name:t!=="controlled"?r:void 0,type:"search",placeholder:i,autoComplete:"off",value:S,onChange:P,onFocus:k,onBlur:H,disabled:c||h,...p&&g.length>0?{"aria-expanded":!0,"aria-haspopup":"listbox"}:{},...f}),W()]}),s.jsxs("button",{className:"nhsuk-header__search-submit",type:"submit",disabled:c||h||t!=="form"&&S.length<C,...m,children:[h?z():O(),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:h?"Searching...":l})]})]}),R()]})};function dc(t,{variant:e,isClient:n,menuOpen:r=!1,showMoreButton:a=!1,visibleItems:i,dropdownVisible:o,toggleMenu:l,navContainerRef:u,navListRef:c}){const{className:d,logo:h={},service:p={},organisation:g,search:y,account:f,navigation:m,containerClasses:I,variant:M="default",attributes:C={},maxVisibleItems:v,responsiveNavigation:D=!0,...T}=t;"maxVisibleItems"in T&&delete T.maxVisibleItems;const N=p.href&&!h.href||p.href&&p.href===h.href,_=N?p.href:h.href,w=ye("nhsuk-header",{"nhsuk-header--organisation":M==="organisation"||g,"nhsuk-header--white":M==="white"},d),j=ye("nhsuk-header__container",I),x=ye("nhsuk-header__navigation",{"nhsuk-header__navigation--white":m?.white,"nhsuk-header__navigation--justified":m?.justified},m?.className),S=()=>s.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":h.ariaLabel||"NHS",children:[s.jsx("title",{children:h.ariaLabel||"NHS"}),s.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),B=()=>h.src?s.jsx("img",{className:"nhsuk-header__organisation-logo",src:h.src,width:"280",alt:h.ariaLabel||"NHS"}):S(),P=()=>g?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"nhsuk-header__organisation-name",children:[g.name,g.split&&s.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",g.split]})]}),g.descriptor&&s.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:g.descriptor})]}):null,$=(W,R)=>W?R?s.jsx("a",{className:"nhsuk-header__service-name",href:R,children:W}):s.jsx("span",{className:"nhsuk-header__service-name",children:W}):null,k=W=>W.active||W.current?s.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:W.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:W.html}}):W.text}):W.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:W.html}}):W.text,H=()=>s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})}),Q=e==="server"&&m?.items&&!D,O=Q?[]:m?.items,z=Q?m.items:[];return s.jsxs("header",{className:w,role:"banner","data-module":"nhsuk-header",...C,...T,children:[s.jsxs("div",{className:j,children:[s.jsxs("div",{className:"nhsuk-header__service",children:[_?s.jsxs("a",{className:"nhsuk-header__service-logo",href:_,children:[B(),P(),N&&$(p.text)]}):s.jsxs(s.Fragment,{children:[B(),P(),N&&$(p.text)]}),p.text&&!N&&$(p.text,p.href)]}),y&&s.jsx(uc,{...y}),s.jsx(tc,{...f,variant:M==="white"?"white":"default"})]}),m&&m.items&&m.items.length>0&&s.jsx("nav",{className:x,"aria-label":m.ariaLabel||"Menu",children:s.jsx("div",{className:ye("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--initializing":n&&e==="client","nhsuk-header__navigation-container--ssr":!n},I),ref:e==="client"?u:void 0,children:s.jsxs("ul",{className:"nhsuk-header__navigation-list",ref:e==="client"?c:void 0,children:[(e==="server"?O||[]:m?.items||[]).map((W,R)=>s.jsx("li",{className:ye("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":W.active||W.current,"nhsuk-header__navigation-item--hidden":e==="client"&&a&&i!==void 0&&R>=(i??0)},W.className),...W.attributes||{},children:s.jsx("a",{className:"nhsuk-header__navigation-link",href:W.href,...W.active||W.current?{"aria-current":W.current?"page":"true"}:{},children:k(W)})},R)),e==="client"&&a&&i!==void 0&&s.jsx("li",{className:"nhsuk-header__navigation-item nhsuk-header__navigation-item--more",children:s.jsxs("button",{className:"nhsuk-header__navigation-button",id:"toggle-more-menu",type:"button","aria-haspopup":"true","aria-expanded":r?"true":"false","aria-controls":"nhsuk-header-more-menu",onClick:l,children:[s.jsx("span",{children:"More"}),H()]})})]})})}),e==="client"&&n&&m&&m.items&&m.items.length>0&&r&&o&&s.jsx("div",{className:"nhsuk-header__dropdown-menu",hidden:!o,id:"nhsuk-header-more-menu",children:s.jsx("ul",{className:"nhsuk-header__dropdown-list",children:m.items.slice(i??0).map((W,R)=>s.jsx("li",{className:ye("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":W.active||W.current}),children:s.jsx("a",{className:"nhsuk-header__dropdown-link",href:W.href,...W.active||W.current?{"aria-current":W.current?"page":"true"}:{},onClick:()=>{l?.()},children:k(W)})},`overflow-${(i??0)+R}`))})}),e==="server"&&Q&&z.length>0&&s.jsx("div",{className:"nhsuk-header__dropdown-menu","data-ssr-overflow":"true",children:s.jsx("ul",{className:"nhsuk-header__dropdown-list",children:z.map((W,R)=>s.jsx("li",{className:ye("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":W.active||W.current}),children:s.jsx("a",{className:"nhsuk-header__dropdown-link",href:W.href,...W.active||W.current?{"aria-current":W.current?"page":"true"}:{},children:k(W)})},`overflow-server-${R}`))})})]})}const Ba=({className:t,logo:e={},service:n={},organisation:r,search:a,account:i,navigation:o,containerClasses:l,variant:u="default",attributes:c={},...d})=>{const[h,p]=F.useState(!1),[g,y]=F.useState(!1),[f,m]=F.useState(o?.items?.length||0),[I,M]=F.useState(!1),[C,v]=F.useState(!1),D=F.useRef(null),T=F.useRef(null),N=F.useRef(!1);F.useEffect(()=>{typeof window>"u"||v(!0)},[]),F.useEffect(()=>{if(typeof document>"u")return;const x=S=>{S.key==="Escape"&&h&&p(!1)};if(h)return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[h]);const _=F.useRef(null),w=F.useCallback(()=>{if(!C||!o?.items||o.items.length===0||N.current)return;const x=D.current,S=T.current;if(!x||!S)return;N.current=!0,x.classList.add("nhsuk-header__navigation-container--measuring");const B=x.clientWidth,P=Array.from(S.children);if(!P.length){x.classList.remove("nhsuk-header__navigation-container--measuring"),N.current=!1;return}if(_.current==null){const L=document.createElement("button");L.type="button",L.className="nhsuk-header__navigation-button nhsuk-header__navigation-button--prototype",L.style.position="absolute",L.style.visibility="hidden",L.style.pointerEvents="none",L.innerHTML="<span>More</span>",x.appendChild(L),_.current=L.getBoundingClientRect().width||104,x.removeChild(L)}const $=_.current+16;let k=0,H=0;const Q=window.getComputedStyle(x),O=parseFloat(Q.paddingLeft)||0,z=parseFloat(Q.paddingRight)||0;let W=O+z;for(const L of P){const X=L.getBoundingClientRect().width;if(k+X+$+W>B)break;k+=X,H+=1}const R=H<o.items.length,E=R?H:o.items.length;y(L=>L===R?L:R),m(L=>L===E?L:E),x.classList.remove("nhsuk-header__navigation-container--measuring"),N.current=!1},[C,o?.items]);F.useEffect(()=>{if(!C)return;const x=D.current;if(!x)return;let S=null;const B=()=>{S==null&&(S=window.requestAnimationFrame(()=>{S=null,w()}))};w();const P=new ResizeObserver(()=>B());return P.observe(x),T.current&&P.observe(T.current),()=>{S!=null&&window.cancelAnimationFrame(S),P.disconnect()}},[C,w]),F.useEffect(()=>{C&&w()},[o?.items?.length,C,w]);const j=x=>{x&&(x.preventDefault(),x.stopPropagation());const S=!h;p(S),M(S)};return dc({className:t,logo:e,service:n,organisation:r,search:a,account:i,navigation:o,containerClasses:l,variant:u,attributes:c,...d},{variant:"client",isClient:C,menuOpen:h,showMoreButton:g,visibleItems:f,dropdownVisible:I,toggleMenu:j,navContainerRef:D,navListRef:T})},a0=t=>dc(t,{variant:"server",isClient:!1}),fc=({heading:t,headingLevel:e=1,headingClasses:n="",text:r,html:a,imageURL:i,containerClasses:o="",classes:l="",children:u,...c})=>{const d=["nhsuk-hero",i&&t?"nhsuk-hero--image nhsuk-hero--image-description":"",i&&!t?"nhsuk-hero--image":"",l].filter(Boolean).join(" "),h=["nhsuk-width-container",o,i?"":"nhsuk-hero--border"].filter(Boolean).join(" "),p=["nhsuk-hero__heading",n,!u&&!r&&!a?"nhsuk-u-margin-bottom-0":""].filter(Boolean).join(" "),g=u||t||r||a,y=()=>{if(!t)return null;const f={className:p};switch(e){case 1:return s.jsx("h1",{...f,children:t});case 2:return s.jsx("h2",{...f,children:t});case 3:return s.jsx("h3",{...f,children:t});case 4:return s.jsx("h4",{...f,children:t});case 5:return s.jsx("h5",{...f,children:t});case 6:return s.jsx("h6",{...f,children:t});default:return s.jsx("h1",{...f,children:t})}};return s.jsxs("section",{className:d,style:i?{backgroundImage:`url('${i}')`}:void 0,role:"banner",...c,children:[i&&s.jsx("div",{className:"nhsuk-hero__overlay",children:g&&s.jsx("div",{className:h,children:s.jsx("div",{className:"nhsuk-grid-row",children:s.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:s.jsxs("div",{className:"nhsuk-hero-content",children:[y(),u||(a?s.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):r?s.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null),s.jsx("span",{className:"nhsuk-hero__arrow","aria-hidden":"true"})]})})})})}),!i&&g&&s.jsx("div",{className:h,children:s.jsx("div",{className:"nhsuk-grid-row",children:s.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:s.jsxs("div",{className:"nhsuk-hero__wrapper",children:[y(),u||(a?s.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):r?s.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null)]})})})})]})};fc.displayName="Hero";const rs=({className:t,links:e=[],linksColumn2:n,linksColumn3:r,metaLinks:a,copyright:i="Â© NHS England",containerClasses:o,attributes:l={},style:u,footerStyle:c,containerStyle:d})=>{const h=(g,y=!1)=>s.jsx("li",{className:ye("nhsuk-footer__list-item",{"nhsuk-footer-default__list-item":y}),children:s.jsx("a",{className:"nhsuk-footer__list-item-link",href:g.URL,target:g.newWindow?"_blank":void 0,rel:g.newWindow?"noopener noreferrer":void 0,children:g.label})},`${g.URL}-${g.label}`),p=!!(n||r);return s.jsx("footer",{role:"contentinfo",...l,style:{...l?.style,...u},children:s.jsxs("div",{className:"nhsuk-footer-container",children:[s.jsxs("div",{className:ye("nhsuk-width-container",o),style:d,children:[s.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Support links"}),s.jsx("div",{className:ye("nhsuk-footer",t),style:c,children:p?s.jsxs(s.Fragment,{children:[e.length>0&&s.jsx("ul",{className:"nhsuk-footer__list",children:e.map(g=>h(g))}),n&&n.length>0&&s.jsx("ul",{className:"nhsuk-footer__list",children:n.map(g=>h(g))}),r&&r.length>0&&s.jsx("ul",{className:"nhsuk-footer__list",children:r.map(g=>h(g))}),a&&a.length>0&&s.jsx("ul",{className:"nhsuk-footer__list nhsuk-footer__meta",children:a.map(g=>h(g))})]}):s.jsxs("ul",{className:"nhsuk-footer__list",children:[e.map(g=>h(g,!0)),(n||[]).map(g=>h(g,!0)),(r||[]).map(g=>h(g,!0)),(a||[]).map(g=>h(g,!0))]})}),!p&&s.jsx("div",{children:s.jsx("p",{className:"nhsuk-footer__copyright",children:i})})]}),p&&s.jsx("div",{className:"nhsuk-width-container",children:s.jsx("div",{children:s.jsx("p",{className:"nhsuk-footer__copyright",children:i})})})]})})};function Aa(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i0(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function as(t){let e,n,r;t.length!==2?(e=Aa,n=(l,u)=>Aa(t(l),u),r=(l,u)=>t(l)-u):(e=t===Aa||t===i0?t:s0,n=t,r=t);function a(l,u,c=0,d=l.length){if(c<d){if(e(u,u)!==0)return d;do{const h=c+d>>>1;n(l[h],u)<0?c=h+1:d=h}while(c<d)}return c}function i(l,u,c=0,d=l.length){if(c<d){if(e(u,u)!==0)return d;do{const h=c+d>>>1;n(l[h],u)<=0?c=h+1:d=h}while(c<d)}return c}function o(l,u,c=0,d=l.length){const h=a(l,u,c,d-1);return h>c&&r(l[h-1],u)>-r(l[h],u)?h-1:h}return{left:a,center:o,right:i}}function s0(){return 0}function o0(t){return t===null?NaN:+t}const l0=as(Aa).right;as(o0).center;function hc(t,e){let n,r;if(e===void 0)for(const a of t)a!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)));else{let a=-1;for(let i of t)(i=e(i,++a,t))!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)))}return[n,r]}class mc extends Map{constructor(e,n=d0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,a]of e)this.set(r,a)}get(e){return super.get(pc(this,e))}has(e){return super.has(pc(this,e))}set(e,n){return super.set(c0(this,e),n)}delete(e){return super.delete(u0(this,e))}}function pc({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function c0({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function u0({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function d0(t){return t!==null&&typeof t=="object"?t.valueOf():t}const f0=Math.sqrt(50),h0=Math.sqrt(10),m0=Math.sqrt(2);function Ea(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=f0?10:i>=h0?5:i>=m0?2:1;let l,u,c;return a<0?(c=Math.pow(10,-a)/o,l=Math.round(t*c),u=Math.round(e*c),l/c<t&&++l,u/c>e&&--u,c=-c):(c=Math.pow(10,a)*o,l=Math.round(t/c),u=Math.round(e/c),l*c<t&&++l,u*c>e&&--u),u<l&&.5<=n&&n<2?Ea(t,e,n*2):[l,u,c]}function p0(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,i,o]=r?Ea(e,t,n):Ea(t,e,n);if(!(i>=a))return[];const l=i-a+1,u=new Array(l);if(r)if(o<0)for(let c=0;c<l;++c)u[c]=(i-c)/-o;else for(let c=0;c<l;++c)u[c]=(i-c)*o;else if(o<0)for(let c=0;c<l;++c)u[c]=(a+c)/-o;else for(let c=0;c<l;++c)u[c]=(a+c)*o;return u}function is(t,e,n){return e=+e,t=+t,n=+n,Ea(t,e,n)[2]}function ss(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?is(e,t,n):is(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function g0(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(a);++r<a;)i[r]=t+r*n;return i}function Ha(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const gc=Symbol("implicit");function bc(){var t=new mc,e=[],n=[],r=gc;function a(i){let o=t.get(i);if(o===void 0){if(r!==gc)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new mc;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return bc(e,n).unknown(r)},Ha.apply(a,arguments),a}function _c(){var t=bc().unknown(void 0),e=t.domain,n=t.range,r=0,a=1,i,o,l=!1,u=0,c=0,d=.5;delete t.unknown;function h(){var p=e().length,g=a<r,y=g?a:r,f=g?r:a;i=(f-y)/Math.max(1,p-u+c*2),l&&(i=Math.floor(i)),y+=(f-y-i*(p-u))*d,o=i*(1-u),l&&(y=Math.round(y),o=Math.round(o));var m=g0(p).map(function(I){return y+i*I});return n(g?m.reverse():m)}return t.domain=function(p){return arguments.length?(e(p),h()):e()},t.range=function(p){return arguments.length?([r,a]=p,r=+r,a=+a,h()):[r,a]},t.rangeRound=function(p){return[r,a]=p,r=+r,a=+a,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(p){return arguments.length?(l=!!p,h()):l},t.padding=function(p){return arguments.length?(u=Math.min(1,c=+p),h()):u},t.paddingInner=function(p){return arguments.length?(u=Math.min(1,p),h()):u},t.paddingOuter=function(p){return arguments.length?(c=+p,h()):c},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),h()):d},t.copy=function(){return _c(e(),[r,a]).round(l).paddingInner(u).paddingOuter(c).align(d)},Ha.apply(h(),arguments)}function os(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function yc(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Tr(){}var Nr=.7,Ra=1/Nr,Jn="\\s*([+-]?\\d+)\\s*",jr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",b0=/^#([0-9a-f]{3,8})$/,_0=new RegExp(`^rgb\\(${Jn},${Jn},${Jn}\\)$`),y0=new RegExp(`^rgb\\(${Bt},${Bt},${Bt}\\)$`),x0=new RegExp(`^rgba\\(${Jn},${Jn},${Jn},${jr}\\)$`),v0=new RegExp(`^rgba\\(${Bt},${Bt},${Bt},${jr}\\)$`),w0=new RegExp(`^hsl\\(${jr},${Bt},${Bt}\\)$`),S0=new RegExp(`^hsla\\(${jr},${Bt},${Bt},${jr}\\)$`),xc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};os(Tr,Dr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:vc,formatHex:vc,formatHex8:k0,formatHsl:C0,formatRgb:wc,toString:wc});function vc(){return this.rgb().formatHex()}function k0(){return this.rgb().formatHex8()}function C0(){return Nc(this).formatHsl()}function wc(){return this.rgb().formatRgb()}function Dr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=b0.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Sc(e):n===3?new pt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?za(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?za(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_0.exec(t))?new pt(e[1],e[2],e[3],1):(e=y0.exec(t))?new pt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=x0.exec(t))?za(e[1],e[2],e[3],e[4]):(e=v0.exec(t))?za(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=w0.exec(t))?Tc(e[1],e[2]/100,e[3]/100,1):(e=S0.exec(t))?Tc(e[1],e[2]/100,e[3]/100,e[4]):xc.hasOwnProperty(t)?Sc(xc[t]):t==="transparent"?new pt(NaN,NaN,NaN,0):null}function Sc(t){return new pt(t>>16&255,t>>8&255,t&255,1)}function za(t,e,n,r){return r<=0&&(t=e=n=NaN),new pt(t,e,n,r)}function T0(t){return t instanceof Tr||(t=Dr(t)),t?(t=t.rgb(),new pt(t.r,t.g,t.b,t.opacity)):new pt}function ls(t,e,n,r){return arguments.length===1?T0(t):new pt(t,e,n,r??1)}function pt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}os(pt,ls,yc(Tr,{brighter(t){return t=t==null?Ra:Math.pow(Ra,t),new pt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Nr:Math.pow(Nr,t),new pt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new pt($n(this.r),$n(this.g),$n(this.b),Oa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kc,formatHex:kc,formatHex8:N0,formatRgb:Cc,toString:Cc}));function kc(){return`#${In(this.r)}${In(this.g)}${In(this.b)}`}function N0(){return`#${In(this.r)}${In(this.g)}${In(this.b)}${In((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cc(){const t=Oa(this.opacity);return`${t===1?"rgb(":"rgba("}${$n(this.r)}, ${$n(this.g)}, ${$n(this.b)}${t===1?")":`, ${t})`}`}function Oa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $n(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function In(t){return t=$n(t),(t<16?"0":"")+t.toString(16)}function Tc(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Pt(t,e,n,r)}function Nc(t){if(t instanceof Pt)return new Pt(t.h,t.s,t.l,t.opacity);if(t instanceof Tr||(t=Dr(t)),!t)return new Pt;if(t instanceof Pt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,l=i-a,u=(i+a)/2;return l?(e===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-e)/l+2:o=(e-n)/l+4,l/=u<.5?i+a:2-i-a,o*=60):l=u>0&&u<1?0:o,new Pt(o,l,u,t.opacity)}function j0(t,e,n,r){return arguments.length===1?Nc(t):new Pt(t,e,n,r??1)}function Pt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}os(Pt,j0,yc(Tr,{brighter(t){return t=t==null?Ra:Math.pow(Ra,t),new Pt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Nr:Math.pow(Nr,t),new Pt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new pt(cs(t>=240?t-240:t+120,a,r),cs(t,a,r),cs(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new Pt(jc(this.h),Wa(this.s),Wa(this.l),Oa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Oa(this.opacity);return`${t===1?"hsl(":"hsla("}${jc(this.h)}, ${Wa(this.s)*100}%, ${Wa(this.l)*100}%${t===1?")":`, ${t})`}`}}));function jc(t){return t=(t||0)%360,t<0?t+360:t}function Wa(t){return Math.max(0,Math.min(1,t||0))}function cs(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const us=t=>()=>t;function D0(t,e){return function(n){return t+n*e}}function M0(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function $0(t){return(t=+t)==1?Dc:function(e,n){return n-e?M0(e,n,t):us(isNaN(e)?n:e)}}function Dc(t,e){var n=e-t;return n?D0(t,n):us(isNaN(t)?e:t)}const Mc=(function t(e){var n=$0(e);function r(a,i){var o=n((a=ls(a)).r,(i=ls(i)).r),l=n(a.g,i.g),u=n(a.b,i.b),c=Dc(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=u(d),a.opacity=c(d),a+""}}return r.gamma=t,r})(1);function I0(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=t[a]*(1-i)+e[a]*i;return r}}function P0(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function L0(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=hs(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(l){for(o=0;o<r;++o)i[o]=a[o](l);return i}}function F0(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ua(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function B0(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=hs(t[a],e[a]):r[a]=e[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var ds=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fs=new RegExp(ds.source,"g");function A0(t){return function(){return t}}function E0(t){return function(e){return t(e)+""}}function H0(t,e){var n=ds.lastIndex=fs.lastIndex=0,r,a,i,o=-1,l=[],u=[];for(t=t+"",e=e+"";(r=ds.exec(t))&&(a=fs.exec(e));)(i=a.index)>n&&(i=e.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,u.push({i:o,x:Ua(r,a)})),n=fs.lastIndex;return n<e.length&&(i=e.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?u[0]?E0(u[0].x):A0(e):(e=u.length,function(c){for(var d=0,h;d<e;++d)l[(h=u[d]).i]=h.x(c);return l.join("")})}function hs(t,e){var n=typeof e,r;return e==null||n==="boolean"?us(e):(n==="number"?Ua:n==="string"?(r=Dr(e))?(e=r,Mc):H0:e instanceof Dr?Mc:e instanceof Date?F0:P0(e)?I0:Array.isArray(e)?L0:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?B0:Ua)(t,e)}function R0(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function z0(t){return function(){return t}}function O0(t){return+t}var $c=[0,1];function Qn(t){return t}function ms(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:z0(isNaN(e)?NaN:.5)}function W0(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function U0(t,e,n){var r=t[0],a=t[1],i=e[0],o=e[1];return a<r?(r=ms(a,r),i=n(o,i)):(r=ms(r,a),i=n(i,o)),function(l){return i(r(l))}}function G0(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)a[o]=ms(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(l){var u=l0(t,l,1,r)-1;return i[u](a[u](l))}}function Ic(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Y0(){var t=$c,e=$c,n=hs,r,a,i,o=Qn,l,u,c;function d(){var p=Math.min(t.length,e.length);return o!==Qn&&(o=W0(t[0],t[p-1])),l=p>2?G0:U0,u=c=null,h}function h(p){return p==null||isNaN(p=+p)?i:(u||(u=l(t.map(r),e,n)))(r(o(p)))}return h.invert=function(p){return o(a((c||(c=l(e,t.map(r),Ua)))(p)))},h.domain=function(p){return arguments.length?(t=Array.from(p,O0),d()):t.slice()},h.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},h.rangeRound=function(p){return e=Array.from(p),n=R0,d()},h.clamp=function(p){return arguments.length?(o=p?!0:Qn,d()):o!==Qn},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(i=p,h):i},function(p,g){return r=p,a=g,d()}}function Pc(){return Y0()(Qn,Qn)}function V0(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ga(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function er(t){return t=Ga(Math.abs(t)),t?t[1]:NaN}function q0(t,e){return function(n,r){for(var a=n.length,i=[],o=0,l=t[0],u=0;a>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),i.push(n.substring(a-=l,a+l)),!((u+=l+1)>r));)l=t[o=(o+1)%t.length];return i.reverse().join(e)}}function X0(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var K0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ya(t){if(!(e=K0.exec(t)))throw new Error("invalid format: "+t);var e;return new ps({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ya.prototype=ps.prototype;function ps(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ps.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Z0(t){e:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var Lc;function J0(t,e){var n=Ga(t,e);if(!n)return t+"";var r=n[0],a=n[1],i=a-(Lc=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Ga(t,Math.max(0,e+i-1))[0]}function Fc(t,e){var n=Ga(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const Bc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:V0,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Fc(t*100,e),r:Fc,s:J0,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ac(t){return t}var Ec=Array.prototype.map,Hc=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Q0(t){var e=t.grouping===void 0||t.thousands===void 0?Ac:q0(Ec.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?Ac:X0(Ec.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"âˆ’":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(h){h=Ya(h);var p=h.fill,g=h.align,y=h.sign,f=h.symbol,m=h.zero,I=h.width,M=h.comma,C=h.precision,v=h.trim,D=h.type;D==="n"?(M=!0,D="g"):Bc[D]||(C===void 0&&(C=12),v=!0,D="g"),(m||p==="0"&&g==="=")&&(m=!0,p="0",g="=");var T=f==="$"?n:f==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",N=f==="$"?r:/[%p]/.test(D)?o:"",_=Bc[D],w=/[defgprs%]/.test(D);C=C===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function j(x){var S=T,B=N,P,$,k;if(D==="c")B=_(x)+B,x="";else{x=+x;var H=x<0||1/x<0;if(x=isNaN(x)?u:_(Math.abs(x),C),v&&(x=Z0(x)),H&&+x==0&&y!=="+"&&(H=!1),S=(H?y==="("?y:l:y==="-"||y==="("?"":y)+S,B=(D==="s"?Hc[8+Lc/3]:"")+B+(H&&y==="("?")":""),w){for(P=-1,$=x.length;++P<$;)if(k=x.charCodeAt(P),48>k||k>57){B=(k===46?a+x.slice(P+1):x.slice(P))+B,x=x.slice(0,P);break}}}M&&!m&&(x=e(x,1/0));var Q=S.length+x.length+B.length,O=Q<I?new Array(I-Q+1).join(p):"";switch(M&&m&&(x=e(O+x,O.length?I-B.length:1/0),O=""),g){case"<":x=S+x+B+O;break;case"=":x=S+O+x+B;break;case"^":x=O.slice(0,Q=O.length>>1)+S+x+B+O.slice(Q);break;default:x=O+S+x+B;break}return i(x)}return j.toString=function(){return h+""},j}function d(h,p){var g=c((h=Ya(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(er(p)/3)))*3,f=Math.pow(10,-y),m=Hc[8+y/3];return function(I){return g(f*I)+m}}return{format:c,formatPrefix:d}}var Va,Rc,zc;eb({thousands:",",grouping:[3],currency:["$",""]});function eb(t){return Va=Q0(t),Rc=Va.format,zc=Va.formatPrefix,Va}function tb(t){return Math.max(0,-er(Math.abs(t)))}function nb(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(er(e)/3)))*3-er(Math.abs(t)))}function rb(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,er(e)-er(t))+1}function ab(t,e,n,r){var a=ss(t,e,n),i;switch(r=Ya(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=nb(a,o))&&(r.precision=i),zc(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=rb(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=tb(a))&&(r.precision=i-(r.type==="%")*2);break}}return Rc(r)}function ib(t){var e=t.domain;return t.ticks=function(n){var r=e();return p0(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return ab(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,i=r.length-1,o=r[a],l=r[i],u,c,d=10;for(l<o&&(c=o,o=l,l=c,c=a,a=i,i=c);d-- >0;){if(c=is(o,l,n),c===u)return r[a]=o,r[i]=l,e(r);if(c>0)o=Math.floor(o/c)*c,l=Math.ceil(l/c)*c;else if(c<0)o=Math.ceil(o*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function qa(){var t=Pc();return t.copy=function(){return Ic(t,qa())},Ha.apply(t,arguments),ib(t)}function sb(t,e){t=t.slice();var n=0,r=t.length-1,a=t[n],i=t[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),t[n]=e.floor(a),t[r]=e.ceil(i),t}const gs=new Date,bs=new Date;function et(t,e,n,r){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const u=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return u;let c;do u.push(c=new Date(+i)),e(i,l),t(i);while(c<i&&i<o);return u},a.filter=i=>et(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!i(o););else for(;--l>=0;)for(;e(o,1),!i(o););}),n&&(a.count=(i,o)=>(gs.setTime(+i),bs.setTime(+o),t(gs),t(bs),Math.floor(n(gs,bs))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?o=>r(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Xa=et(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Xa.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?et(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Xa),Xa.range;const rn=1e3,Nt=rn*60,an=Nt*60,sn=an*24,_s=sn*7,Oc=sn*30,ys=sn*365,tr=et(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*rn)},(t,e)=>(e-t)/rn,t=>t.getUTCSeconds());tr.range;const xs=et(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rn)},(t,e)=>{t.setTime(+t+e*Nt)},(t,e)=>(e-t)/Nt,t=>t.getMinutes());xs.range,et(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Nt)},(t,e)=>(e-t)/Nt,t=>t.getUTCMinutes()).range;const vs=et(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rn-t.getMinutes()*Nt)},(t,e)=>{t.setTime(+t+e*an)},(t,e)=>(e-t)/an,t=>t.getHours());vs.range,et(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*an)},(t,e)=>(e-t)/an,t=>t.getUTCHours()).range;const Mr=et(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Nt)/sn,t=>t.getDate()-1);Mr.range;const ws=et(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sn,t=>t.getUTCDate()-1);ws.range,et(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sn,t=>Math.floor(t/sn)).range;function Pn(t){return et(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Nt)/_s)}const Ka=Pn(0),Za=Pn(1),ob=Pn(2),lb=Pn(3),nr=Pn(4),cb=Pn(5),ub=Pn(6);Ka.range,Za.range,ob.range,lb.range,nr.range,cb.range,ub.range;function Ln(t){return et(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/_s)}const Wc=Ln(0),Ja=Ln(1),db=Ln(2),fb=Ln(3),rr=Ln(4),hb=Ln(5),mb=Ln(6);Wc.range,Ja.range,db.range,fb.range,rr.range,hb.range,mb.range;const $r=et(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());$r.range,et(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()).range;const on=et(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());on.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:et(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}),on.range;const Fn=et(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Fn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:et(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}),Fn.range;function pb(t,e,n,r,a,i){const o=[[tr,1,rn],[tr,5,5*rn],[tr,15,15*rn],[tr,30,30*rn],[i,1,Nt],[i,5,5*Nt],[i,15,15*Nt],[i,30,30*Nt],[a,1,an],[a,3,3*an],[a,6,6*an],[a,12,12*an],[r,1,sn],[r,2,2*sn],[n,1,_s],[e,1,Oc],[e,3,3*Oc],[t,1,ys]];function l(c,d,h){const p=d<c;p&&([c,d]=[d,c]);const g=h&&typeof h.range=="function"?h:u(c,d,h),y=g?g.range(c,+d+1):[];return p?y.reverse():y}function u(c,d,h){const p=Math.abs(d-c)/h,g=as(([,,m])=>m).right(o,p);if(g===o.length)return t.every(ss(c/ys,d/ys,h));if(g===0)return Xa.every(Math.max(ss(c,d,h),1));const[y,f]=o[p/o[g-1][2]<o[g][2]/p?g-1:g];return y.every(f)}return[l,u]}const[gb,bb]=pb(on,$r,Ka,Mr,vs,xs);function Ss(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ks(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ir(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function _b(t){var e=t.dateTime,n=t.date,r=t.time,a=t.periods,i=t.days,o=t.shortDays,l=t.months,u=t.shortMonths,c=Pr(a),d=Lr(a),h=Pr(i),p=Lr(i),g=Pr(o),y=Lr(o),f=Pr(l),m=Lr(l),I=Pr(u),M=Lr(u),C={a:H,A:Q,b:O,B:z,c:null,d:Xc,e:Xc,f:zb,g:Zb,G:Qb,H:Eb,I:Hb,j:Rb,L:Kc,m:Ob,M:Wb,p:W,q:R,Q:nu,s:ru,S:Ub,u:Gb,U:Yb,V:Vb,w:qb,W:Xb,x:null,X:null,y:Kb,Y:Jb,Z:e_,"%":tu},v={a:E,A:L,b:X,B:ie,c:null,d:Jc,e:Jc,f:a_,g:m_,G:g_,H:t_,I:n_,j:r_,L:Qc,m:i_,M:s_,p:te,q:Y,Q:nu,s:ru,S:o_,u:l_,U:c_,V:u_,w:d_,W:f_,x:null,X:null,y:h_,Y:p_,Z:b_,"%":tu},D={a:j,A:x,b:S,B,c:P,d:Vc,e:Vc,f:Lb,g:Yc,G:Gc,H:qc,I:qc,j:Mb,L:Pb,m:Db,M:$b,p:w,q:jb,Q:Bb,s:Ab,S:Ib,u:Sb,U:kb,V:Cb,w:wb,W:Tb,x:$,X:k,y:Yc,Y:Gc,Z:Nb,"%":Fb};C.x=T(n,C),C.X=T(r,C),C.c=T(e,C),v.x=T(n,v),v.X=T(r,v),v.c=T(e,v);function T(G,q){return function(ue){var U=[],le=-1,se=0,he=G.length,ne,fe,pe;for(ue instanceof Date||(ue=new Date(+ue));++le<he;)G.charCodeAt(le)===37&&(U.push(G.slice(se,le)),(fe=Uc[ne=G.charAt(++le)])!=null?ne=G.charAt(++le):fe=ne==="e"?" ":"0",(pe=q[ne])&&(ne=pe(ue,fe)),U.push(ne),se=le+1);return U.push(G.slice(se,le)),U.join("")}}function N(G,q){return function(ue){var U=Ir(1900,void 0,1),le=_(U,G,ue+="",0),se,he;if(le!=ue.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(q&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(se=ks(Ir(U.y,0,1)),he=se.getUTCDay(),se=he>4||he===0?Ja.ceil(se):Ja(se),se=ws.offset(se,(U.V-1)*7),U.y=se.getUTCFullYear(),U.m=se.getUTCMonth(),U.d=se.getUTCDate()+(U.w+6)%7):(se=Ss(Ir(U.y,0,1)),he=se.getDay(),se=he>4||he===0?Za.ceil(se):Za(se),se=Mr.offset(se,(U.V-1)*7),U.y=se.getFullYear(),U.m=se.getMonth(),U.d=se.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),he="Z"in U?ks(Ir(U.y,0,1)).getUTCDay():Ss(Ir(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(he+5)%7:U.w+U.U*7-(he+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,ks(U)):Ss(U)}}function _(G,q,ue,U){for(var le=0,se=q.length,he=ue.length,ne,fe;le<se;){if(U>=he)return-1;if(ne=q.charCodeAt(le++),ne===37){if(ne=q.charAt(le++),fe=D[ne in Uc?q.charAt(le++):ne],!fe||(U=fe(G,ue,U))<0)return-1}else if(ne!=ue.charCodeAt(U++))return-1}return U}function w(G,q,ue){var U=c.exec(q.slice(ue));return U?(G.p=d.get(U[0].toLowerCase()),ue+U[0].length):-1}function j(G,q,ue){var U=g.exec(q.slice(ue));return U?(G.w=y.get(U[0].toLowerCase()),ue+U[0].length):-1}function x(G,q,ue){var U=h.exec(q.slice(ue));return U?(G.w=p.get(U[0].toLowerCase()),ue+U[0].length):-1}function S(G,q,ue){var U=I.exec(q.slice(ue));return U?(G.m=M.get(U[0].toLowerCase()),ue+U[0].length):-1}function B(G,q,ue){var U=f.exec(q.slice(ue));return U?(G.m=m.get(U[0].toLowerCase()),ue+U[0].length):-1}function P(G,q,ue){return _(G,e,q,ue)}function $(G,q,ue){return _(G,n,q,ue)}function k(G,q,ue){return _(G,r,q,ue)}function H(G){return o[G.getDay()]}function Q(G){return i[G.getDay()]}function O(G){return u[G.getMonth()]}function z(G){return l[G.getMonth()]}function W(G){return a[+(G.getHours()>=12)]}function R(G){return 1+~~(G.getMonth()/3)}function E(G){return o[G.getUTCDay()]}function L(G){return i[G.getUTCDay()]}function X(G){return u[G.getUTCMonth()]}function ie(G){return l[G.getUTCMonth()]}function te(G){return a[+(G.getUTCHours()>=12)]}function Y(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var q=T(G+="",C);return q.toString=function(){return G},q},parse:function(G){var q=N(G+="",!1);return q.toString=function(){return G},q},utcFormat:function(G){var q=T(G+="",v);return q.toString=function(){return G},q},utcParse:function(G){var q=N(G+="",!0);return q.toString=function(){return G},q}}}var Uc={"-":"",_:" ",0:"0"},rt=/^\s*\d+/,yb=/^%/,xb=/[\\^$*+?|[\]().{}]/g;function Pe(t,e,n){var r=t<0?"-":"",a=(r?-t:t)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(e)+a:a)}function vb(t){return t.replace(xb,"\\$&")}function Pr(t){return new RegExp("^(?:"+t.map(vb).join("|")+")","i")}function Lr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function wb(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Sb(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function kb(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Cb(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Tb(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Gc(t,e,n){var r=rt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Yc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Nb(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jb(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Db(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Vc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Mb(t,e,n){var r=rt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function qc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function $b(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ib(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Pb(t,e,n){var r=rt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Lb(t,e,n){var r=rt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Fb(t,e,n){var r=yb.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Bb(t,e,n){var r=rt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ab(t,e,n){var r=rt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Xc(t,e){return Pe(t.getDate(),e,2)}function Eb(t,e){return Pe(t.getHours(),e,2)}function Hb(t,e){return Pe(t.getHours()%12||12,e,2)}function Rb(t,e){return Pe(1+Mr.count(on(t),t),e,3)}function Kc(t,e){return Pe(t.getMilliseconds(),e,3)}function zb(t,e){return Kc(t,e)+"000"}function Ob(t,e){return Pe(t.getMonth()+1,e,2)}function Wb(t,e){return Pe(t.getMinutes(),e,2)}function Ub(t,e){return Pe(t.getSeconds(),e,2)}function Gb(t){var e=t.getDay();return e===0?7:e}function Yb(t,e){return Pe(Ka.count(on(t)-1,t),e,2)}function Zc(t){var e=t.getDay();return e>=4||e===0?nr(t):nr.ceil(t)}function Vb(t,e){return t=Zc(t),Pe(nr.count(on(t),t)+(on(t).getDay()===4),e,2)}function qb(t){return t.getDay()}function Xb(t,e){return Pe(Za.count(on(t)-1,t),e,2)}function Kb(t,e){return Pe(t.getFullYear()%100,e,2)}function Zb(t,e){return t=Zc(t),Pe(t.getFullYear()%100,e,2)}function Jb(t,e){return Pe(t.getFullYear()%1e4,e,4)}function Qb(t,e){var n=t.getDay();return t=n>=4||n===0?nr(t):nr.ceil(t),Pe(t.getFullYear()%1e4,e,4)}function e_(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Pe(e/60|0,"0",2)+Pe(e%60,"0",2)}function Jc(t,e){return Pe(t.getUTCDate(),e,2)}function t_(t,e){return Pe(t.getUTCHours(),e,2)}function n_(t,e){return Pe(t.getUTCHours()%12||12,e,2)}function r_(t,e){return Pe(1+ws.count(Fn(t),t),e,3)}function Qc(t,e){return Pe(t.getUTCMilliseconds(),e,3)}function a_(t,e){return Qc(t,e)+"000"}function i_(t,e){return Pe(t.getUTCMonth()+1,e,2)}function s_(t,e){return Pe(t.getUTCMinutes(),e,2)}function o_(t,e){return Pe(t.getUTCSeconds(),e,2)}function l_(t){var e=t.getUTCDay();return e===0?7:e}function c_(t,e){return Pe(Wc.count(Fn(t)-1,t),e,2)}function eu(t){var e=t.getUTCDay();return e>=4||e===0?rr(t):rr.ceil(t)}function u_(t,e){return t=eu(t),Pe(rr.count(Fn(t),t)+(Fn(t).getUTCDay()===4),e,2)}function d_(t){return t.getUTCDay()}function f_(t,e){return Pe(Ja.count(Fn(t)-1,t),e,2)}function h_(t,e){return Pe(t.getUTCFullYear()%100,e,2)}function m_(t,e){return t=eu(t),Pe(t.getUTCFullYear()%100,e,2)}function p_(t,e){return Pe(t.getUTCFullYear()%1e4,e,4)}function g_(t,e){var n=t.getUTCDay();return t=n>=4||n===0?rr(t):rr.ceil(t),Pe(t.getUTCFullYear()%1e4,e,4)}function b_(){return"+0000"}function tu(){return"%"}function nu(t){return+t}function ru(t){return Math.floor(+t/1e3)}var ar,au;__({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function __(t){return ar=_b(t),au=ar.format,ar.parse,ar.utcFormat,ar.utcParse,ar}function y_(t){return new Date(t)}function x_(t){return t instanceof Date?+t:+new Date(+t)}function iu(t,e,n,r,a,i,o,l,u,c){var d=Pc(),h=d.invert,p=d.domain,g=c(".%L"),y=c(":%S"),f=c("%I:%M"),m=c("%I %p"),I=c("%a %d"),M=c("%b %d"),C=c("%B"),v=c("%Y");function D(T){return(u(T)<T?g:l(T)<T?y:o(T)<T?f:i(T)<T?m:r(T)<T?a(T)<T?I:M:n(T)<T?C:v)(T)}return d.invert=function(T){return new Date(h(T))},d.domain=function(T){return arguments.length?p(Array.from(T,x_)):p().map(y_)},d.ticks=function(T){var N=p();return t(N[0],N[N.length-1],T??10)},d.tickFormat=function(T,N){return N==null?D:c(N)},d.nice=function(T){var N=p();return(!T||typeof T.range!="function")&&(T=e(N[0],N[N.length-1],T??10)),T?p(sb(N,T)):d},d.copy=function(){return Ic(d,iu(t,e,n,r,a,i,o,l,u,c))},d}function Cs(){return Ha.apply(iu(gb,bb,on,$r,Ka,Mr,vs,xs,tr,au).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function v_({task:t,scale:e,onTaskClick:n,onTaskDoubleClick:r,isSelected:a=!1,taskIndex:i,tabIndex:o=-1,onFocus:l,"aria-label":u}){const c=F.useRef(null),[d,h]=F.useState(!1),[p,g]=F.useState(!1),y=e(t.start),f=e(t.end),m=Math.max(f-y,20),I=()=>{if(t.color)return t.color;switch(t.priority){case"high":return"#d5281b";case"medium":return"#005eb8";case"low":return"#007f3b";default:return"#005eb8"}},M=t.progress?m*t.progress/100:0,C=()=>{n?.(t)},v=()=>{r?.(t)},D=S=>{S.key==="Enter"?(S.preventDefault(),C()):S.key===" "&&(S.preventDefault(),v())},T=()=>{h(!0)},N=()=>{h(!1)},_=()=>{g(!0),l?.()},w=()=>{g(!1)},j=["gantt-task-bar",d&&"gantt-task-bar--pressed",(p||a)&&"gantt-task-bar--focused",t.priority&&`gantt-task-bar--priority-${t.priority}`,a&&"gantt-task-bar--selected",t.type&&`gantt-task-bar--type-${t.type}`].filter(Boolean).join(" "),x={"--task-left":`${y}px`,"--task-width":`${m}px`,"--task-color":I(),left:`${y}px`,width:`${m}px`,backgroundColor:I()};return s.jsxs("div",{role:"button",tabIndex:o,ref:c,"data-task-index":i,className:j,style:x,onClick:C,onDoubleClick:v,onKeyDown:D,onMouseDown:T,onMouseUp:N,onFocus:_,onBlur:w,"aria-label":u||`${a?"Selected: ":""}${t.title}: ${t.start.toLocaleDateString()} to ${t.end.toLocaleDateString()}${t.priority?`, priority ${t.priority}`:""}${t.progress?`, ${t.progress}% complete`:""}`,"aria-describedby":`task-${t.id}-details`,children:[s.jsx("span",{className:"task-title",children:t.title}),t.progress!==void 0&&s.jsx("div",{className:"task-progress",style:{width:`${M}px`}}),s.jsx("span",{id:`task-${t.id}-details`,className:"sr-only",children:`Task: ${t.title}, from ${t.start.toLocaleDateString()} to ${t.end.toLocaleDateString()}${t.progress?`, ${t.progress}% complete`:""}${t.priority?`, priority: ${t.priority}`:""}`})]})}function w_({viewStart:t,viewEnd:e,dateCount:n}){const r=[];for(let g=t.getTime();g<=e.getTime();g+=864e5)r.push(new Date(g));const i=new Date;i.setHours(0,0,0,0);const[o,l]=F.useState(-1),u=F.useRef(null),c=g=>{if(g.key==="ArrowLeft"){g.preventDefault();const y=Math.max(0,o===-1?0:o-1);l(y),p(y)}else if(g.key==="ArrowRight"){g.preventDefault();const y=Math.min(r.length-1,o===-1?0:o+1);l(y),p(y)}else if(g.key==="ArrowDown"){g.preventDefault();const y=document.querySelector(".gantt-row .timeline-container");y&&y.focus()}else if(g.key==="Home")g.preventDefault(),l(0),p(0);else if(g.key==="End"){g.preventDefault();const y=r.length-1;l(y),p(y)}},d=g=>{if(g.key==="ArrowDown"){g.preventDefault();const y=document.querySelector(".gantt-row .resource-label");y&&y.focus()}else if(g.key==="ArrowRight"){g.preventDefault();const y=u.current;y&&y.focus()}},h=()=>{o===-1&&(l(0),setTimeout(()=>p(0),0))},p=g=>{const y=u.current?.querySelector(`[data-date-index="${g}"]`);y&&y.focus()};return s.jsxs("div",{className:"gantt-header",role:"row","aria-rowindex":1,children:[s.jsx("div",{className:"header-resource",role:"columnheader","aria-colindex":1,tabIndex:0,"aria-label":"Resource column header",onKeyDown:d,children:"Resources"}),s.jsx("div",{ref:u,className:"header-timeline",role:"columnheader","aria-colindex":2,"aria-colspan":n,"aria-label":`Timeline from ${t.toLocaleDateString()} to ${e.toLocaleDateString()}. Use arrow keys to navigate between dates`,tabIndex:0,onKeyDown:c,onFocus:h,children:r.map((g,y)=>{const f=g.getTime()===i.getTime(),m=o===y;return s.jsx("div",{"data-date-index":y,className:`date-column ${f?"today":""} ${m?"focused":""}`,tabIndex:m?0:-1,role:"button","aria-label":`${g.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}${f?" (Today)":""}`,onFocus:()=>l(y),onKeyDown:c,children:g.toLocaleDateString("en-GB",{day:"numeric",month:"short"})},y)})})]})}function S_({resource:t,tasks:e,scale:n,onTaskClick:r,onTaskDoubleClick:a,rowIndex:i,dateCount:o}){const[l,u]=F.useState(!1),[c,d]=F.useState(-1),h=F.useRef(null);F.useEffect(()=>{l&&c>=0&&e.length>0&&setTimeout(()=>{h.current?.querySelector(`[data-task-index="${c}"]`)?.focus()},0)},[l,c,e.length]);const p=f=>{if(f.key==="ArrowLeft"&&f.shiftKey){f.preventDefault(),f.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(f.key==="ArrowRight"&&f.shiftKey){f.preventDefault(),f.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!l){switch(f.key){case"ArrowUp":f.preventDefault(),i===0?document.querySelector(".header-timeline")?.focus():document.querySelector(`[aria-rowindex="${i+1}"] .timeline-container`)?.focus();break;case"ArrowDown":f.preventDefault(),document.querySelector(`[aria-rowindex="${i+3}"] .timeline-container`)?.focus();break;case"ArrowLeft":f.preventDefault(),h.current?.closest(".gantt-row")?.querySelector(".resource-label")?.focus();break;case"Enter":e.length>0&&(f.preventDefault(),u(!0),d(0));break}return}switch(f.key){case"ArrowLeft":f.preventDefault();const m=Math.max(0,c-1);d(m),h.current?.querySelector(`[data-task-index="${m}"]`)?.focus();break;case"ArrowRight":f.preventDefault();const M=Math.min(e.length-1,c+1);d(M),h.current?.querySelector(`[data-task-index="${M}"]`)?.focus();break;case"Enter":f.preventDefault(),c>=0&&r?.(e[c]);break;case" ":f.preventDefault(),c>=0&&a?.(e[c]);break;case"Escape":f.preventDefault(),u(!1),d(-1),h.current?.focus();break}},g=f=>{switch(f.key){case"ArrowUp":f.preventDefault(),i===0?document.querySelector(".header-resource")?.focus():document.querySelector(`[aria-rowindex="${i+1}"] .resource-label`)?.focus();break;case"ArrowDown":f.preventDefault(),document.querySelector(`[aria-rowindex="${i+3}"] .resource-label`)?.focus();break;case"ArrowRight":f.preventDefault(),h.current?.focus();break}},y=f=>{l&&d(f)};return s.jsxs("div",{className:"gantt-row",role:"row","aria-rowindex":i+2,children:[s.jsx("div",{className:"resource-label",role:"gridcell","aria-colindex":1,tabIndex:0,"aria-label":`Resource: ${t.label}`,onKeyDown:g,children:t.label}),s.jsx("div",{ref:h,className:`timeline-container ${l?"timeline-active":""}`,role:"gridcell","aria-colindex":2,"aria-colspan":o,tabIndex:0,"aria-label":`Timeline for ${t.label} with ${e.length} task${e.length!==1?"s":""}. Press Enter to activate task navigation, then use arrow keys to navigate, Enter to select, Space to activate, Escape to exit`,onKeyDown:p,onFocus:()=>{l||d(-1)},children:e.map((f,m)=>s.jsx(v_,{task:f,scale:n,onTaskClick:r,onTaskDoubleClick:a,isSelected:l&&c===m,taskIndex:m,tabIndex:l&&c===m?0:-1,onFocus:()=>y(m)},f.id))})]})}function k_({resources:t,tasks:e=[],viewStart:n,viewEnd:r,onTaskClick:a,onTaskDoubleClick:i}){const o=F.useRef(null),[l,u]=F.useState(800),c=F.useMemo(()=>{if(n instanceof Date)return isNaN(n.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):n;const f=new Date(n);return isNaN(f.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):f},[n]),d=F.useMemo(()=>{if(r instanceof Date)return isNaN(r.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):r;const f=new Date(r);return isNaN(f.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):f},[r]),h=F.useMemo(()=>Math.ceil((d.getTime()-c.getTime())/864e5)+1,[c,d]);F.useEffect(()=>{if(!o.current)return;const f=new ResizeObserver(m=>{const I=m[0];I&&u(Math.max(I.contentRect.width-220,400))});return f.observe(o.current),()=>f.disconnect()},[]);const p=F.useMemo(()=>Cs().domain([c,d]).range([0,l]),[c,d,l]),g=F.useMemo(()=>{const f=new Map;return e.forEach(m=>{const I=f.get(m.resourceId)||[];I.push(m),f.set(m.resourceId,I)}),f},[e]),y=f=>{if(f.target===f.currentTarget)switch(f.key){case"ArrowDown":f.preventDefault();const m=o.current?.querySelector(".gantt-row .resource-label");m&&m.focus();break;case"Home":f.preventDefault();const I=o.current?.querySelector(".header-resource");I&&I.focus();break}};return s.jsxs("div",{className:"gantt-chart",role:"grid","aria-label":"Gantt Chart showing resource scheduling and task timelines","aria-rowcount":t.length+1,"aria-colcount":h+1,"aria-description":"Use arrow keys to navigate cells, Tab to cycle through tasks in timeline rows or dates in header, Enter to select task, Space to activate task, Alt+arrows to scroll the grid, Shift+arrows to scroll timeline rows",tabIndex:0,onKeyDown:y,children:[s.jsx(w_,{viewStart:c,viewEnd:d,dateCount:h}),s.jsx("div",{ref:o,className:"gantt-grid",role:"rowgroup","aria-label":"Gantt chart data rows",tabIndex:0,onKeyDown:f=>{f.key==="ArrowLeft"&&f.altKey?(f.preventDefault(),o.current?.scrollBy({left:-50,behavior:"smooth"})):f.key==="ArrowRight"&&f.altKey?(f.preventDefault(),o.current?.scrollBy({left:50,behavior:"smooth"})):f.key==="ArrowUp"&&f.altKey?(f.preventDefault(),o.current?.scrollBy({top:-50,behavior:"smooth"})):f.key==="ArrowDown"&&f.altKey&&(f.preventDefault(),o.current?.scrollBy({top:50,behavior:"smooth"}))},children:t.map((f,m)=>s.jsx(S_,{resource:f,tasks:g.get(f.id)||[],scale:p,onTaskClick:a,onTaskDoubleClick:i,rowIndex:m,dateCount:h},f.id))})]})}const Qa=({children:t,href:e,active:n=!1,attributes:r={}})=>s.jsx("li",{className:"nhsuk-breadcrumb__item",children:n?s.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",...r,children:t}):s.jsx("a",{className:"nhsuk-breadcrumb__link",href:e,...r,children:t})}),su=({items:t=[],children:e,classes:n,labelText:r="Breadcrumb",href:a,text:i,reverse:o=!1,attributes:l={}})=>{const u=()=>e?F.Children.toArray(e).filter(m=>F.isValidElement(m)&&(m.type===Qa||m.type?.displayName==="BreadcrumbItem")).map(m=>({text:typeof m.props.children=="string"?m.props.children:String(m.props.children),href:m.props.href,active:m.props.active,attributes:m.props.attributes})):[],c=()=>e?u():a&&i?[{href:a,text:i}]:t,d=()=>{const f=c();if(f&&f.length>0){const m=f.slice().reverse().find(I=>I.href&&!I.active);if(m)return{href:m.href,text:m.text}}return{text:"Home"}},h=c(),p=d(),g=ye("nhsuk-breadcrumb",{"nhsuk-breadcrumb--reverse":o},n),y=r;return s.jsxs("nav",{className:g,"aria-label":y,role:"navigation",...l,children:[s.jsx("ol",{className:"nhsuk-breadcrumb__list",role:"list",children:e?F.Children.map(e,(f,m)=>F.isValidElement(f)&&(f.type===Qa||f.type?.displayName==="BreadcrumbItem")?F.cloneElement(f,{key:m}):null):h?.filter(f=>f.active||!!f.href).map((f,m)=>s.jsx("li",{className:"nhsuk-breadcrumb__item",role:"listitem",children:f.active?s.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",role:"text",...f.attributes||{},children:f.text}):s.jsx("a",{className:"nhsuk-breadcrumb__link",href:f.href,role:"link",...f.attributes||{},children:f.text})},m))}),p.href&&s.jsx("p",{className:"nhsuk-breadcrumb__back",children:s.jsxs("a",{className:"nhsuk-breadcrumb__backlink",href:p.href,role:"link","aria-label":`Back to ${p.text}`,...t.length>0?t[t.length-1]?.attributes||{}:{},children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Back to Â "}),p.text]})})]})};su.Item=Qa,Qa.displayName="BreadcrumbItem";const Ts=({text:t="Skip to main content",href:e="#maincontent",classes:n,attributes:r={}})=>{const[a,i]=F.useState(!1);F.useEffect(()=>{i(!0)},[]),F.useEffect(()=>{if(typeof window>"u"||typeof document>"u"||!document.querySelector||!document.querySelectorAll)return;const l=u=>{const c=u.target,d=c.getAttribute("href");if(d&&d.startsWith("#")){const h=document.querySelector(d);if(h){h.hasAttribute("tabindex")||h.setAttribute("tabindex","-1"),h.focus(),h.classList.add("nhsuk-skip-link-focused-element");const p=window.setTimeout(()=>{h.classList.remove("nhsuk-skip-link-focused-element"),h.getAttribute("tabindex")==="-1"&&h.removeAttribute("tabindex")},3e3);c.__nhsSkipLinkTimeout=p}}};try{const u=document.querySelectorAll(".nhsuk-skip-link");return u.forEach(c=>{c.addEventListener("click",l)}),()=>{try{u.forEach(c=>{c.removeEventListener("click",l);const d=c.__nhsSkipLinkTimeout;d&&window.clearTimeout&&window.clearTimeout(d)})}catch(c){console.warn("SkipLink cleanup error:",c)}}}catch(u){return console.warn("SkipLink initialization error:",u),()=>{}}},[a]);const o=ye("nhsuk-skip-link",n);return s.jsx("a",{className:o,href:e,"data-module":"nhsuk-skip-link","data-enhanced":a?"true":"false",...r,children:t})},C_=({previousUrl:t,previousPage:e,nextUrl:n,nextPage:r,classes:a,attributes:i={}})=>{const o=ye("nhsuk-pagination",a);return s.jsx("nav",{className:o,role:"navigation","aria-label":"Pagination",...i,children:s.jsxs("ul",{className:"nhsuk-list nhsuk-pagination__list",children:[t&&e&&s.jsx("li",{className:"nhsuk-pagination-item--previous",children:s.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--prev",href:t,children:[s.jsx("span",{className:"nhsuk-pagination__title",children:"Previous"}),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),s.jsx("span",{className:"nhsuk-pagination__page",children:e}),s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:s.jsx("path",{d:"M4.1 12.3l2.7 3c.2.2.5.2.7 0 .1-.1.1-.2.1-.3v-2h11c.6 0 1-.4 1-1s-.4-1-1-1h-11V9c0-.2-.1-.4-.3-.5h-.2c-.1 0-.3.1-.4.2l-2.7 3c0 .2 0 .4.1.6z"})})]})}),n&&r&&s.jsx("li",{className:"nhsuk-pagination-item--next",children:s.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--next",href:n,children:[s.jsx("span",{className:"nhsuk-pagination__title",children:"Next"}),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),s.jsx("span",{className:"nhsuk-pagination__page",children:r}),s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:s.jsx("path",{d:"M19.6 11.66l-2.73-3A.51.51 0 0 0 16 9v2H5a1 1 0 0 0 0 2h11v2a.5.5 0 0 0 .32.46.39.39 0 0 0 .18 0 .52.52 0 0 0 .37-.16l2.73-3a.5.5 0 0 0 0-.64z"})})]})})]})})},T_=({items:t,classes:e,ariaLabel:n="Pages in this guide",attributes:r={}})=>{const a=ye("nhsuk-contents-list",e),i=(o,l)=>o.current?s.jsx("li",{className:"nhsuk-contents-list__item","aria-current":"page",...o.attributes||{},children:s.jsx("span",{className:"nhsuk-contents-list__current",children:o.text})},l):s.jsx("li",{className:"nhsuk-contents-list__item",children:s.jsx("a",{className:"nhsuk-contents-list__link",href:o.href,...o.attributes||{},children:o.text})},l);return s.jsxs("nav",{className:a,role:"navigation","aria-label":n,...r,children:[s.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Contents"}),s.jsx("ol",{className:"nhsuk-contents-list__list",children:t.map((o,l)=>i(o,l))})]})},Ns=F.forwardRef(({variant:t="default",heading:e,headingHtml:n,headingLevel:r=2,headingClasses:a,description:i,descriptionHtml:o,href:l,imgURL:u,imgAlt:c,...d},h)=>{const p=["nhsuk-card",t==="clickable"&&"nhsuk-card--clickable",t==="secondary"&&"nhsuk-card--secondary",t==="feature"&&"nhsuk-card--feature",d.className].filter(Boolean).join(" "),g=["nhsuk-card__content",t==="feature"&&"nhsuk-card__content--feature",t==="primary"&&"nhsuk-card__content--primary",t==="secondary"&&"nhsuk-card__content--secondary"].filter(Boolean).join(" "),y=["nhsuk-card__heading",t==="feature"&&"nhsuk-card__heading--feature",a].filter(Boolean).join(" "),f=()=>{if(n)return s.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!e)return null;const M=()=>l&&t!=="feature"?s.jsx("a",{className:"nhsuk-card__link",href:l,children:e}):e;return s.jsx(Ft,{level:r,className:y,children:M()})},m=()=>d.children?d.children:o?s.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):i?s.jsx("p",{className:"nhsuk-card__description",children:i}):null,I=()=>t!=="primary"?null:s.jsxs("svg",{className:"nhsuk-icon",xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27","aria-hidden":"true",focusable:"false",children:[s.jsx("circle",{cx:"13.333",cy:"13.333",r:"13.333",fill:""}),s.jsxs("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2.667",children:[s.jsx("path",{d:"M15.438 13l-3.771 3.771"}),s.jsx("path",{d:"M11.667 9.229L15.438 13"})]})]});return s.jsxs("div",{...d,className:p,ref:h,children:[u&&s.jsx("img",{className:"nhsuk-card__img",src:u,alt:c||""}),s.jsxs("div",{className:g,children:[f(),m(),I()]})]})});Ns.displayName="Card";const N_=({className:t,children:e,"data-testid":n,id:r})=>{const a=["nhsuk-card-group",t].filter(Boolean).join(" ");return s.jsx("ul",{className:a,"data-testid":n,id:r,children:e})},j_=({className:t,children:e,"data-testid":n})=>{const r=["nhsuk-card-group__item",t].filter(Boolean).join(" ");return s.jsx("li",{className:r,"data-testid":n,children:e})},D_=({type:t,heading:e,headingHtml:n,headingLevel:r=3,headingClasses:a,description:i,descriptionHtml:o,className:l,children:u,"data-testid":c,id:d,"aria-label":h,"aria-labelledby":p,"aria-describedby":g})=>{const y=["nhsuk-care-card",`nhsuk-care-card--${t}`,l].filter(Boolean).join(" "),f=["nhsuk-care-card__heading",a].filter(Boolean).join(" "),m=()=>{if(n)return s.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!e)return null;const M={"non-urgent":"Non-urgent advice:",urgent:"Urgent advice:",emergency:"Immediate action required:"}[t],C=s.jsxs("span",{role:"text",children:[s.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[M," "]}),e]});return s.jsx(Ft,{level:r,className:f,children:C})},I=()=>u||(o?s.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):i?s.jsx("p",{className:"nhsuk-care-card__text",children:i}):null);return s.jsxs("div",{className:y,"data-testid":c,id:d,"aria-label":h,"aria-labelledby":p,"aria-describedby":g,children:[s.jsxs("div",{className:"nhsuk-care-card__heading-container",children:[m(),s.jsx("span",{className:"nhsuk-care-card__arrow","aria-hidden":"true"})]}),s.jsx("div",{className:"nhsuk-care-card__content",children:I()})]})},ou=({id:t,className:e,headingText:n,headingHtml:r,headingLevel:a=2,bodyText:i,bodyHtml:o,children:l,...u})=>{const c=ye("nhsuk-panel",e),d=()=>!n&&!r&&!l?null:r?s.jsx(Ft,{level:a,className:"nhsuk-panel__heading",html:r,marginBottom:"var(--panel-heading-margin, 24px)"}):n?s.jsx(Ft,{level:a,className:"nhsuk-panel__heading",text:n,marginBottom:"var(--panel-heading-margin, 24px)"}):null,h=()=>l?s.jsx("div",{className:"nhsuk-panel__body",children:l}):o?s.jsx("div",{className:"nhsuk-panel__body",dangerouslySetInnerHTML:{__html:o}}):i?s.jsx("div",{className:"nhsuk-panel__body",children:s.jsx("p",{children:i})}):null;return s.jsxs("div",{className:c,id:t,...u,children:[d(),h()]})},M_=({text:t,html:e,children:n,className:r,...a})=>{const i=ye("nhsuk-inset-text",r),o=()=>n||(e?s.jsx("div",{dangerouslySetInnerHTML:{__html:e}}):t?s.jsx("p",{children:t}):null);return s.jsx("div",{className:i,...a,children:o()})},$_=({items:t,noBorder:e=!1,className:n,...r})=>{const a=ye("nhsuk-summary-list",{"nhsuk-summary-list--no-border":e},n),i=l=>l.children?l.children:l.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text?l.text:null,o=l=>!l||!l.items.length?null:s.jsx("dd",{className:"nhsuk-summary-list__actions",children:s.jsx("ul",{className:"nhsuk-summary-list__actions-list",children:l.items.map((u,c)=>s.jsx("li",{className:"nhsuk-summary-list__actions-list-item",children:s.jsxs("a",{href:u.href,className:"nhsuk-link",...u.attributes,children:[i(u),u.visuallyHiddenText&&s.jsx("span",{className:"nhsuk-u-visually-hidden",children:u.visuallyHiddenText})]})},c))})});return s.jsx("div",{className:"nhsuk-summary-list-container",children:s.jsx("dl",{className:a,...r,children:t.map((l,u)=>s.jsxs("div",{className:"nhsuk-summary-list__row",children:[s.jsx("dt",{className:"nhsuk-summary-list__key",children:i(l.key)}),s.jsx("dd",{className:"nhsuk-summary-list__value",children:i(l.value)}),o(l.actions)]},u))})})},ei=({rows:t,head:e,caption:n,captionSize:r,firstCellIsHeader:a=!1,responsive:i=!1,heading:o,headingLevel:l=3,panel:u=!1,panelClasses:c,tableClasses:d,classes:h,attributes:p,"data-testid":g})=>{const y=`nhsuk-table__caption ${r?`nhsuk-table__caption--${r}`:""}`.trim(),f=ye("nhsuk-table",{"nhsuk-table-responsive":i},d),m=ye(h),I=F.useRef(null),M=()=>{if(I.current)return I.current;try{I.current=require("prismjs");try{require("prismjs/components/prism-typescript")}catch{}try{require("prismjs/components/prism-tsx")}catch{}try{require("prismjs/components/prism-json")}catch{}}catch{I.current=null}return I.current},C=_=>{const w=[{regex:/\b(import|from|export|const|let|var|return|if|else|for|while|switch|case|break|new|throw|try|catch|finally|class|extends|implements|interface|type|as|async|await|function)\b/g,cls:"kw"},{regex:/(['"`])(?:\\.|(?!\1).)*\1/g,cls:"str"},{regex:/\/\*[^]*?\*\/|\/\/.*$/gm,cls:"com"},{regex:/\b([0-9]+(?:\.[0-9]+)?)\b/g,cls:"num"}];let j=_;return w.forEach(x=>{j=j.replace(x.regex,S=>`<span class="nhsuk-code-${x.cls}">${S}</span>`)}),j},v=(_,w,j)=>{if(j||!w)return _;const x=M();if(x&&x.languages){const S=x.languages[w]?w:x.languages.typescript&&(w==="ts"||w==="tsx"||w==="typescript")?"typescript":x.languages.json&&w==="json"?"json":void 0;if(S)try{return x.highlight(_,x.languages[S],S)}catch{}}return C(_)},D=(_,w)=>{const j=ye("nhsuk-table__header",{[`nhsuk-table__header--${_.format}`]:_.format},_.classes),x={scope:"col",..._.colspan&&{colSpan:_.colspan},..._.rowspan&&{rowSpan:_.rowspan},...i&&{role:"columnheader"},..._.attributes};let S;if(_.node!=null)S=s.jsx(s.Fragment,{children:_.node});else if(_.html)S=s.jsx("span",{dangerouslySetInnerHTML:{__html:_.html}});else if(_.code!=null){const B=Array.isArray(_.code),P=B?_.code.join(`
`):_.code,$=B||P.includes(`
`),k={className:ye("nhsuk-table__code",_.codeClassName,{"nhsuk-table__code--block":$,"nhsuk-table__code--inline":!$}),..._.codeLanguage?{"data-language":_.codeLanguage}:{}},H=v(P,_.codeLanguage);S=$?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...k,dangerouslySetInnerHTML:{__html:H}})}):s.jsx("code",{...k,dangerouslySetInnerHTML:{__html:H}})}else S=_.text;return s.jsx("th",{className:j,...x,children:S},w)},T=(_,w,j)=>{const x=a&&j,S=ye(x?"nhsuk-table__header":"nhsuk-table__cell",{[`nhsuk-table__${x?"header":"cell"}--${_.format}`]:_.format},_.classes),B={...x&&{scope:"row"},..._.colspan&&{colSpan:_.colspan},..._.rowspan&&{rowSpan:_.rowspan},...i&&{role:x?"rowheader":"cell",..._.header&&{"data-label":_.header}},..._.attributes};let P;if(_.node!=null)P=s.jsx(s.Fragment,{children:_.node});else if(_.html)P=s.jsx("span",{dangerouslySetInnerHTML:{__html:_.html}});else if(_.code!=null){const H=Array.isArray(_.code),Q=H?_.code.join(`
`):_.code,O=H||Q.includes(`
`),z={className:ye("nhsuk-table__code",_.codeClassName,{"nhsuk-table__code--block":O,"nhsuk-table__code--inline":!O}),..._.codeLanguage?{"data-language":_.codeLanguage}:{}},W=v(Q,_.codeLanguage,_.disableHighlight);P=O?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...z,dangerouslySetInnerHTML:{__html:W}})}):s.jsx("code",{...z,dangerouslySetInnerHTML:{__html:W}})}else P=_.text;const $=s.jsxs(s.Fragment,{children:[i&&_.header&&s.jsxs("span",{className:"nhsuk-table-responsive__heading","aria-hidden":"true",children:[_.header," "]}),P]}),k=x?"th":"td";return s.jsx(k,{className:S,...B,children:$},w)},N=()=>s.jsxs("table",{className:f,...i&&{role:"table"},...p,...g&&{"data-testid":g},children:[n&&s.jsx("caption",{className:y,children:n}),e&&e.length>0&&s.jsx("thead",{className:"nhsuk-table__head",...i&&{role:"rowgroup"},children:s.jsx("tr",{...i&&{role:"row"},children:e.map((_,w)=>D(_,w))})}),s.jsx("tbody",{className:"nhsuk-table__body",children:t&&t.map((_,w)=>s.jsx("tr",{className:"nhsuk-table__row",...i&&{role:"row"},children:_.map((j,x)=>T(j,x,x===0))},w))})]});return u?s.jsxs(ou,{className:c,children:[o&&s.jsx(Ft,{level:l,className:"nhsuk-table__heading-tab",children:o}),N()]}):m?s.jsx("div",{className:m,children:N()}):N()},I_=F.forwardRef(({items:t,defaultActiveTab:e,activeTab:n,onTabChange:r,onTabFocus:a,onTabListBlur:i,onEscape:o,autoActivate:l=!0,className:u,id:c,"data-testid":d,...h},p)=>{const g=n!==void 0,[y,f]=F.useState(()=>e||t[0]?.id||""),m=g?n:y,I=F.useRef(null),M=F.useRef(new Map),C=F.useCallback(j=>{g||f(j),r?.(j)},[g,r]),v=F.useCallback(j=>{a?.(j),l&&C(j)},[a,l,C]),D=F.useCallback((j,x)=>{const S=t.filter($=>!$.disabled).map($=>$.id),B=S.indexOf(x);let P=null;switch(j.key){case"ArrowLeft":P=B>0?B-1:S.length-1;break;case"ArrowRight":P=B<S.length-1?B+1:0;break;case"Home":P=0;break;case"End":P=S.length-1;break;case"Escape":j.preventDefault(),o?.();return;default:return}if(P!==null){j.preventDefault();const $=S[P],k=M.current.get($);k&&(k.focus(),v($))}},[t,v,o]),T=F.useCallback((j,x)=>{x?M.current.set(j,x):M.current.delete(j)},[]),N=F.useCallback(j=>{const x=M.current.get(j);x&&x.focus()},[]);F.useImperativeHandle(p,()=>({focusTab:N,getActiveTab:()=>m,getTabListElement:()=>I.current}),[N,m]);const _=F.useCallback(j=>{const x=j.relatedTarget;I.current?.contains(x)||i?.()},[i]),w=ye("nhsuk-tabs",u);return s.jsxs("div",{className:w,id:c,"data-testid":d,...h,children:[s.jsx("h2",{className:"nhsuk-tabs__title",children:"Contents"}),s.jsx("div",{className:"nhsuk-tabs__list-container",ref:I,children:s.jsx("ul",{className:"nhsuk-tabs__list",role:"tablist",onBlur:_,children:t.map(j=>{const x=j.id===m,S=j.disabled,B=ye("nhsuk-tabs__list-item",{"nhsuk-tabs__list-item--selected":x,"nhsuk-tabs__list-item--disabled":S});return s.jsx("li",{className:B,role:"presentation",children:s.jsx("button",{ref:P=>T(j.id,P),className:"nhsuk-tabs__tab",role:"tab","aria-selected":x,"aria-controls":`${j.id}-panel`,id:`${j.id}-tab`,tabIndex:x?0:-1,disabled:S,onClick:()=>!S&&C(j.id),onKeyDown:P=>!S&&D(P,j.id),onFocus:()=>!S&&v(j.id),...j.attributes,children:j.label})},j.id)})})}),t.map(j=>{const x=j.id===m;return s.jsx("div",{className:"nhsuk-tabs__panel",role:"tabpanel","aria-labelledby":`${j.id}-tab`,id:`${j.id}-panel`,hidden:!x,children:j.content},j.id)})]})}),lu=F.forwardRef(({summaryText:t,summaryHtml:e,text:n,html:r,open:a=!1,className:i="",id:o,children:l,...u},c)=>{const d=["nhsuk-details",i].filter(Boolean).join(" "),h=e?s.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:e}}):s.jsx("span",{className:"nhsuk-details__summary-text",children:t});let p;return l?p=l:r?p=s.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),s.jsxs("details",{ref:c,id:o,className:d,open:a,...u,children:[s.jsx("summary",{className:"nhsuk-details__summary",tabIndex:0,children:h}),s.jsx("div",{className:"nhsuk-details__text",children:p})]})});lu.displayName="Details";const cu=F.forwardRef(({title:t,type:e,items:n,hidePrefix:r=!1,headingLevel:a=3,className:i,...o},l)=>{const u=["nhsuk-do-dont-list"];i&&u.push(i);const c=["nhsuk-list",e==="tick"?"nhsuk-list--tick":"nhsuk-list--cross"],d=()=>e==="cross"?s.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:[s.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),s.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]}):s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"34",height:"34",children:s.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})}),h=g=>e==="cross"&&!r?`do not ${g}`:g,p=()=>s.jsx(Ft,{level:a,className:"nhsuk-do-dont-list__label",text:t});return s.jsxs("div",{ref:l,className:u.join(" "),...o,children:[p(),s.jsx("div",{className:"nhsuk-do-dont-list__content--feature",children:s.jsx("ul",{className:c.join(" "),role:"list",children:n.map((g,y)=>s.jsxs("li",{children:[d(),h(g.item)]},y))})})]})});cu.displayName="DoDontList";const uu=F.forwardRef(({summaryText:t,summaryHtml:e,text:n,html:r,open:a=!1,className:i="",id:o,children:l,...u},c)=>{const d=["nhsuk-expander",i].filter(Boolean).join(" "),h=e?s.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:e}}):s.jsx("span",{className:"nhsuk-details__summary-text",children:t});let p;return l?p=l:r?p=s.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),s.jsxs("details",{ref:c,id:o,className:d,open:a,...u,children:[s.jsx("summary",{className:"nhsuk-details__summary",children:h}),s.jsx("div",{className:"nhsuk-details__text",children:p})]})});uu.displayName="Expander";const du=F.forwardRef(({items:t,idPrefix:e="task-list",className:n,...r},a)=>{const i=["nhsuk-task-list",n].filter(Boolean).join(" "),o=(l,u)=>{const c=u+1,d=`${e}-${c}-hint`,h=`${e}-${c}-status`,p=!!l.href,g=["nhsuk-task-list__item",p&&"nhsuk-task-list__item--with-link",l.classes].filter(Boolean).join(" "),y=[l.hint&&d,h].filter(Boolean).join(" ");return s.jsx(P_,{item:l,itemClasses:g,hasLink:p,hintId:d,statusId:h,ariaDescribedBy:y},u)};return s.jsx("ul",{ref:a,className:i,...r,children:t.map(o)})}),P_=({item:t,itemClasses:e,hasLink:n,hintId:r,statusId:a,ariaDescribedBy:i})=>{const o=()=>{const c=t.title.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:t.title.html}}):t.title.text,d=[n?"nhsuk-task-list__link":"",t.title.classes].filter(Boolean).join(" ");return n?s.jsx("a",{className:d,href:t.href,"aria-describedby":i,children:c}):s.jsx("div",{className:t.title.classes||"",children:c})},l=()=>t.hint?t.hint.html?s.jsx("div",{id:r,className:"nhsuk-task-list__hint",dangerouslySetInnerHTML:{__html:t.hint.html}}):s.jsx("div",{id:r,className:"nhsuk-task-list__hint",children:t.hint.text}):null,u=()=>{const c=["nhsuk-task-list__status",t.status.classes].filter(Boolean).join(" ");let d;return t.status.tag?d=s.jsx(Ye,{...t.status.tag}):t.status.html?d=s.jsx("span",{dangerouslySetInnerHTML:{__html:t.status.html}}):d=t.status.text,s.jsx("div",{className:c,id:a,children:d})};return s.jsxs("li",{className:e,children:[s.jsxs("div",{className:"nhsuk-task-list__name-and-hint",children:[o(),l()]}),u()]})};du.displayName="TaskList";const L_=({heading:t,headingLevel:e=3,text:n,html:r,children:a,className:i,...o})=>{const l=/important/i.test(t),u=()=>a||(r?s.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n?s.jsx("p",{children:n}):null),c=["nhsuk-warning-callout",i].filter(Boolean).join(" "),d=`h${e}`;return s.jsxs("div",{className:c,...o,children:[F.createElement(d,{className:"nhsuk-warning-callout__label"},l?s.jsxs(s.Fragment,{children:[t,s.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"})]}):s.jsxs("span",{role:"text",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Important: "}),t]})),u()]})},F_=({src:t,alt:e,caption:n,sizes:r,srcset:a,className:i,...o})=>{const l=["nhsuk-image",i].filter(Boolean).join(" ");return s.jsxs("figure",{className:l,...o,children:[s.jsx("img",{className:"nhsuk-image__img",src:t,alt:e,...r&&a?{sizes:r,srcSet:a}:{}}),n&&s.jsx("figcaption",{className:"nhsuk-image__caption",dangerouslySetInnerHTML:{__html:n}})]})},B_=({dateRange:t,onPrev:e,onNext:n,onToday:r,density:a,onDensityChange:i,a11yMode:o,onA11yModeChange:l})=>s.jsxs("div",{className:"nhs-slot-matrix__toolbar",role:"group","aria-label":"Slot matrix controls",children:[s.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[s.jsx(nt,{variant:"secondary",size:"small",onClick:e,"aria-label":"Previous date range",children:"Prev"}),s.jsx(nt,{variant:"secondary",size:"small",onClick:r,"aria-label":"Jump to today",children:"Today"}),s.jsx(nt,{variant:"secondary",size:"small",onClick:n,"aria-label":"Next date range",children:"Next"}),s.jsxs("span",{className:"nhs-slot-matrix__toolbar-daterange","aria-live":"polite",children:[t.start.toDateString()," â€“ ",t.end.toDateString()]})]}),s.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[s.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-density-select",children:"Density"}),s.jsx(Cr,{id:"slot-matrix-density-select",name:"slot-matrix-density",ariaLabel:"Change density",value:a,onChange:u=>i?.(u.target.value),options:[{value:"comfortable",text:"Comfortable"},{value:"compact",text:"Compact"}]}),s.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-mode-select",children:"Mode"}),s.jsx(Cr,{id:"slot-matrix-mode-select",name:"slot-matrix-mode",ariaLabel:"Change accessibility mode",value:o,onChange:u=>l?.(u.target.value),options:[{value:"grid",text:"Grid"},{value:"list",text:"List"}]})]})]}),A_=({items:t,orientation:e="horizontal"})=>s.jsx("div",{className:`nhs-slot-matrix__legend nhs-slot-matrix__legend--${e}`,role:"list","aria-label":"Slot legend",children:t.map(n=>s.jsx("div",{role:"listitem",className:"nhs-slot-matrix__legend-item",children:s.jsx(Ye,{color:E_(n.status),text:n.label})},n.status))});function E_(t){switch(t){case"available":return"green";case"full":return"grey";case"overbook":return"orange";case"held":return"yellow";case"blocked":return"grey";default:return"default"}}const H_=({slots:t,sessions:e,value:n,defaultValue:r,onChange:a,selectionMode:i="single",a11yMode:o,className:l,style:u,getSlotAriaLabel:c,toolbar:d,enableDefaultToolbar:h=!0,legendItems:p,enableDefaultLegend:g=!0,legendPlacement:y="bottom",onA11yModeChange:f})=>{const[m,I]=F.useState("grid"),M=o||m,[C,v]=F.useState(r||[]),D=n??C,T=F.useMemo(()=>{const P=new Set;return t.forEach($=>P.add(new Date($.start).getTime())),Array.from(P).sort(($,k)=>$-k)},[t]),N=F.useMemo(()=>{const P={};return t.forEach($=>{const k=new Date($.start).getTime();P[k]||(P[k]={});const H=$.capacity-$.booked-($.held||0);P[k][$.sessionId]={slot:$,remaining:H}}),P},[t]),_=F.useCallback(P=>{if(i==="single"){const $=[P.id];n||v($),a?.($,{lastAction:"select"})}else{const $=D.includes(P.id),k=$?D.filter(H=>H!==P.id):[...D,P.id];n||v(k),a?.(k,{lastAction:$?"deselect":"select"})}},[i,D,n,a]),w=F.useMemo(()=>p||(g?Array.from(new Set(t.map($=>$.status))).map($=>({status:$,label:$.charAt(0).toUpperCase()+$.slice(1)})):void 0),[p,g,t]),j=w?s.jsx(A_,{items:w,orientation:y==="left"||y==="right"?"vertical":"horizontal"}):null,x=P=>{o||I(P),f?.(P)},S=d||(h?s.jsx(B_,{dateRange:{start:new Date,end:new Date},density:"comfortable",a11yMode:M,onA11yModeChange:x}):null),B=s.jsx("div",{style:u,className:ye(l),children:s.jsx(Fa,{className:ye("nhs-slot-matrix-grid-wrapper"),children:s.jsx(pn,{children:s.jsx(Zn,{width:"full",children:s.jsxs("div",{className:"nhs-slot-matrix",children:[S,y==="top"&&j,s.jsx("ul",{"aria-label":"Appointment slots list",children:t.map(P=>s.jsx("li",{children:s.jsxs("button",{type:"button",onClick:()=>_(P),"aria-pressed":D.includes(P.id),children:[Fr(new Date(P.start))," â€“ ",Fr(new Date(P.end))," (",P.status,")"]})},P.id))}),y==="bottom"&&j]})})})})});return M==="list"?B:s.jsx("div",{style:u,className:ye(l),children:s.jsx(Fa,{className:ye("nhs-slot-matrix-grid-wrapper"),children:s.jsx(pn,{children:s.jsx(Zn,{width:"full",children:s.jsxs("div",{className:"nhs-slot-matrix",children:[S,y==="top"&&j,s.jsxs("div",{role:"grid","aria-rowcount":T.length+1,"aria-colcount":e.length+1,children:[s.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[s.jsx("div",{role:"columnheader","aria-label":"Timebands",className:"nhs-slot-matrix__timeband-header"}),e.map(P=>s.jsx("div",{role:"columnheader","aria-label":`Session ${P.specialty}`,className:"nhs-slot-matrix__session-header",children:P.specialty},P.id))]}),T.map(P=>s.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[s.jsx("div",{role:"rowheader",className:"nhs-slot-matrix__timeband-header","aria-label":Fr(new Date(P)),children:Fr(new Date(P))}),e.map($=>{const k=N[P]?.[$.id];if(!k)return s.jsx("div",{role:"gridcell",className:"nhs-slot-matrix__cell","aria-disabled":"true"},$.id);const{slot:H,remaining:Q}=k,O=D.includes(H.id),z=c?c(H):`Slot ${Fr(new Date(H.start))} ${H.status}${Q===0?" full":""}`;return s.jsx("button",{type:"button",role:"gridcell","data-status":H.status,className:ye("nhs-slot-matrix__cell",O&&"nhs-slot-matrix__cell--selected"),"aria-label":z,"aria-selected":O||void 0,onClick:()=>_(H),children:Q>0?`${Q} left`:"Full"},H.id)})]},P))]}),y==="bottom"&&j]})})})})})};function fu(t){return t<10?`0${t}`:`${t}`}function Fr(t){return`${fu(t.getHours())}:${fu(t.getMinutes())}`}const hu=({title:t,value:e,subtitle:n,variant:r="default",href:a,className:i="",ariaLabel:o,...l})=>{const u=["nhs-fdp-summary-card",`nhs-fdp-summary-card--${r}`,i].filter(Boolean).join(" "),c=s.jsxs(s.Fragment,{children:[s.jsx(Ft,{level:3,className:"nhs-fdp-summary-card__title",children:t}),s.jsx("p",{className:"nhs-fdp-summary-card__value",children:e}),n&&s.jsx("p",{className:"nhs-fdp-summary-card__subtitle",children:n})]});return a?s.jsx("a",{className:`${u} nhs-fdp-summary-card--clickable`,href:a,"aria-label":o||`${t}: ${e}`,...l,children:c}):s.jsx("div",{className:u,"aria-label":o,...l,children:c})},R_=({cards:t,className:e="",...n})=>{const r=["nhs-fdp-dashboard-summary-grid",e].filter(Boolean).join(" ");return s.jsx("div",{className:r,...n,children:s.jsx(Fa,{children:s.jsx(pn,{children:t.map((a,i)=>s.jsx(Zn,{width:"one-quarter",className:"nhs-fdp-dashboard-summary-grid__column","data-card-index":i,children:s.jsx(hu,{...a})},i))})})})},mu=F.forwardRef(({data:t,columns:e,sortConfig:n,onSort:r,selectedRowIndex:a,onRowSelect:i,id:o,testId:l,ariaLabel:u,ariaLabelledby:c,ariaDescribedby:d,className:h,tableClassName:p,bordered:g=!1,striped:y=!1,responsive:f=!1,tableType:m="default"},I)=>{const M=F.useRef(null),C=F.useRef(null),v=F.useRef(null);F.useImperativeHandle(I,()=>M.current,[]);const[D,T]=F.useState(0),[N,_]=F.useState(0),[w,j]=F.useState("headers"),[x,S]=F.useState("browse"),B=e.length,P=t.length,$=F.useMemo(()=>!n||n.length===0?t:[...t].sort((R,E)=>{for(const{key:L,direction:X}of n){const ie=R[L],te=E[L];if(ie==null&&te==null)continue;if(ie==null)return 1;if(te==null)return-1;let Y=0;if(typeof ie=="number"&&typeof te=="number"?Y=ie-te:Y=String(ie).localeCompare(String(te)),Y!==0)return X==="asc"?Y:-Y}return 0}),[t,n]),k=F.useCallback((R,E)=>{setTimeout(()=>{const L=M.current?.querySelector(`tbody tr:nth-child(${R+1}) td:nth-child(${E+1})`);L&&(L.focus(),typeof L.scrollIntoView=="function"&&L.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),H=F.useCallback(R=>{setTimeout(()=>{const E=M.current?.querySelector(`th:nth-child(${R+1})`);E&&(E.focus(),typeof E.scrollIntoView=="function"&&E.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),Q=F.useCallback(R=>{r?.(R)},[r]),O=F.useCallback(R=>{i?.(R)},[i]),z=F.useCallback(R=>{const{key:E}=R;switch(E){case"Enter":if(R.preventDefault(),w==="headers"&&x==="browse")S("navigate"),H(N);else if(w==="headers"&&x==="navigate"){const L=e[N];L&&Q(L.key)}else w==="cells"&&x==="browse"?(S("navigate"),k(D,N)):w==="cells"&&x==="navigate"&&O(D);break;case"Escape":R.preventDefault(),(w==="headers"&&x==="navigate"||w==="cells"&&x==="navigate")&&S("browse");break;case"ArrowLeft":if(R.preventDefault(),x==="navigate"||x==="browse"&&w==="headers"){if(w==="headers"){const L=Math.max(0,N-1);_(L),H(L)}else if(w==="cells"){const L=Math.max(0,N-1);_(L),k(D,L)}}break;case"ArrowRight":if(R.preventDefault(),x==="navigate"||x==="browse"&&w==="headers"){if(w==="headers"){const L=Math.min(B-1,N+1);_(L),H(L)}else if(w==="cells"){const L=Math.min(B-1,N+1);_(L),k(D,L)}}break;case"ArrowUp":if(R.preventDefault(),w==="cells"){if(x==="browse"){const L=Math.max(0,D-1);T(L),k(L,0),_(0)}else if(x==="navigate")if(D>0){const L=D-1;T(L),k(L,N)}else j("headers"),S("browse"),H(N)}break;case"ArrowDown":if(R.preventDefault(),w==="headers"&&x==="browse")j("cells"),T(0),_(0),k(0,0);else if(w==="cells"){const L=P-1;if(x==="browse"){const X=Math.min(L,D+1);T(X),k(X,0),_(0)}else if(x==="navigate"&&D<L){const X=D+1;T(X),k(X,N)}}break;case"Home":R.preventDefault(),w==="headers"?(_(0),H(0)):w==="cells"&&(R.ctrlKey?(T(0),_(0),k(0,0)):(_(0),k(D,0)));break;case"End":if(R.preventDefault(),w==="headers"){const L=B-1;_(L),H(L)}else if(w==="cells")if(R.ctrlKey){const L=P-1,X=B-1;T(L),_(X),k(L,X)}else{const L=B-1;_(L),k(D,L)}break;case" ":if(R.preventDefault(),w==="headers"&&x==="navigate"){const L=e[N];L&&Q(L.key)}else w==="cells"&&x==="navigate"&&O(D);break}},[w,x,N,D,B,P,e,k,H,Q,O]);F.useEffect(()=>{const R=M.current;if(R)return R.addEventListener("keydown",z),()=>R.removeEventListener("keydown",z)},[z]);const W=ye("nhsuk-table",p,{"nhsuk-table--responsive":f,"nhsuk-table--bordered":g,"nhsuk-table--striped":y,"nhsuk-table--compact":m==="compact"},h);return s.jsxs("table",{ref:M,className:W,id:o,"data-testid":l,role:"grid","aria-label":u,"aria-labelledby":c,"aria-describedby":d,tabIndex:0,children:[s.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:s.jsx("tr",{ref:C,role:"row",children:e.map((R,E)=>{const L=n?.find(te=>te.key===R.key),X=!!L,ie=w==="headers"&&N===E;return s.jsx("th",{className:ye("sortable-header",{"sortable-header--focused":ie}),role:"columnheader",tabIndex:ie?0:-1,onClick:()=>Q(R.key),onKeyDown:te=>{(te.key==="Enter"||te.key===" ")&&(te.preventDefault(),Q(R.key))},"aria-sort":X?L?.direction==="asc"?"ascending":"descending":"none",children:s.jsxs("div",{className:"header-content",children:[s.jsx("span",{className:"header-label",children:R.label}),X&&s.jsxs("span",{className:"sort-indicator","aria-hidden":"true",children:[n&&n.length>1&&s.jsx("span",{className:"sort-priority",children:n.findIndex(te=>te.key===R.key)+1}),s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",className:"sort-arrow",children:L?.direction==="asc"?s.jsx("path",{d:"M6 2L2 8h8L6 2z"}):s.jsx("path",{d:"M6 10L2 4h8L6 10z"})})]})]})},R.key)})})}),s.jsx("tbody",{ref:v,className:"nhsuk-table__body",role:"rowgroup",children:$.map((R,E)=>{const L=a===E,X=w==="cells"&&D===E;return s.jsx("tr",{role:"row",className:ye("data-row",{"data-row--selected":L,"data-row--focused":X}),"aria-selected":L,children:e.map((ie,te)=>{const Y=ie.tableRenderer?ie.tableRenderer(R):ie.render?ie.render(R):R[ie.key],G=w==="cells"&&D===E&&N===te,q=()=>typeof Y=="boolean"?s.jsxs(s.Fragment,{children:[s.jsx("span",{"aria-hidden":"true",children:Y?"âœ“":"âœ—"}),s.jsx("span",{className:"sr-only",children:Y?"Yes":"No"})]}):String(Y??"");return s.jsx("td",{role:"gridcell",className:ye("data-cell",{"data-cell--focused":G}),tabIndex:G?0:-1,onClick:()=>O(E),children:q()},ie.key)})},E)})})]})});mu.displayName="AriaDataGrid";const pu=({sortConfig:t,columns:e,onSortChange:n,className:r="",emptyDescription:a="No sorting applied",activeDescription:i,showReset:o=!0,showHelp:l=!0,disabled:u=!1,ariaLabel:c="Sort configuration",ariaDescribedBy:d})=>{const h=F.useRef(null),p=F.useRef(null),g=F.useRef(null),y=F.useCallback((w,j)=>{u||(p.current=j,w.dataTransfer.effectAllowed="move",w.dataTransfer.setData("text/plain",j))},[u]),f=F.useCallback((w,j)=>{u||p.current===j||(w.preventDefault(),w.dataTransfer.dropEffect="move",g.current=j)},[u]),m=F.useCallback((w,j)=>{if(u)return;w.preventDefault();const x=p.current;if(!x||x===j)return;const S=t.findIndex(P=>P.key===x),B=t.findIndex(P=>P.key===j);if(S!==-1&&B!==-1){const P=[...t],[$]=P.splice(S,1);P.splice(B,0,$),n(P)}p.current=null,g.current=null},[u,t,n]),I=F.useCallback(()=>{p.current=null,g.current=null},[]),M=F.useCallback(w=>{const j=e.find(x=>x.key===w);return j?j.label:w},[e]),C=F.useCallback(w=>["red","orange","blue","aqua-green","grey"][w]||"grey",[]),v=F.useCallback(w=>{if(u)return;const j=t.map(x=>x.key===w?{...x,direction:x.direction==="asc"?"desc":"asc"}:x);n(j)},[t,n,u]),D=F.useCallback(w=>{if(u)return;const j=t.filter(x=>x.key!==w);n(j)},[t,n,u]),T=F.useCallback(()=>{u||n([])},[n,u]),N=()=>{if(t.length===0)return a;if(i)return i;const w=t.map((j,x)=>{const S=j.direction==="asc"?"ascending":"descending";return`${x+1}. ${M(j.key)} (${S})`});if(w.length===1)return`Sorted by: ${w[0]}`;if(w.length===2)return`Sorted by: ${w.join(" and ")}`;{const j=w.pop();return`Sorted by: ${w.join(", ")}, and ${j}`}},_=F.useMemo(()=>{const w=["sort-description"];return l&&w.push("sort-help"),d&&w.push(d),w.join(" ")},[l,d]);return t.length===0?s.jsxs("div",{className:`sort-status-control ${r}`,children:[s.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:a}),l&&s.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:s.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]}):s.jsxs("div",{className:`sort-status-control ${r}`,children:[s.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:N()}),s.jsxs("div",{className:"sort-status-container",children:[s.jsx("div",{ref:h,className:"sort-status-control__tags",role:"list","aria-label":c,"aria-describedby":_,children:t.map((w,j)=>s.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",draggable:!u,onDragStart:x=>y(x,w.key),onDragOver:x=>f(x,w.key),onDrop:x=>m(x,w.key),onDragEnd:I,onClick:()=>v(w.key),style:{cursor:u?"default":"pointer"},title:u?"":`Click to toggle sort direction. Currently ${w.direction==="asc"?"ascending":"descending"}`,"data-key":w.key,children:s.jsx(Ye,{color:C(j),className:"sort-status-control__tag",closable:!0,onClose:()=>D(w.key),disabled:u,children:s.jsxs("div",{className:"sort-status-control__tag-content",children:[s.jsx("div",{className:"sort-status-control__drag-handle",title:"Drag to reorder",children:"â‹®â‹®"}),s.jsx("div",{className:`sort-status-control__priority-badge sort-priority sort-priority--priority-${j+1}`,children:j+1}),s.jsx("span",{className:"sort-status-control__tag-label",children:M(w.key)}),s.jsx("button",{type:"button",className:"sort-status-control__direction-button",onClick:x=>{x.stopPropagation(),v(w.key)},disabled:u,"aria-label":`Toggle sort direction for ${M(w.key)}. Currently ${w.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:s.jsx("span",{className:`sort-status-control__direction-icon sort-status-control__direction-icon--${w.direction}`,children:s.jsx("svg",{className:`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${w.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})})})]})})},w.key))}),o&&s.jsx("div",{className:"sort-status-control__actions",children:s.jsx(nt,{variant:"secondary",onClick:T,disabled:u,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})})]}),l&&s.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:s.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]})};function z_(t,e){switch(e.type){case"SET_SELECTED_INDEX":return{...t,selectedIndex:e.payload};case"SET_TAB_LOADING":const n=[...t.tabLoadingStates];return n[e.payload.tabIndex]=e.payload.isLoading,{...t,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...t.tabErrors];return r[e.payload.tabIndex]=e.payload.error,{...t,tabErrors:r};case"SET_SORT":return{...t,sortConfig:e.payload};case"SET_SELECTED_ROWS":const a=[...t.selectedRows];return a[e.payload.tabIndex]=e.payload.rowIndices,{...t,selectedRows:a};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...t,globalSelectedRowData:e.payload};case"SET_FILTERS":return{...t,filters:e.payload};case"ADJUST_ARRAYS":const{newLength:i}=e.payload,o=new Array(i).fill(!1),l=new Array(i).fill(null),u=new Array(i).fill([]);for(let c=0;c<Math.min(t.tabLoadingStates.length,i);c++)o[c]=t.tabLoadingStates[c],l[c]=t.tabErrors[c],u[c]=t.selectedRows[c];return{...t,tabLoadingStates:o,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(t.tabLoadingStates.length).fill(!1),tabErrors:new Array(t.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(t.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return t}}const ti=F.forwardRef(function(e,n){const{dataConfig:r={},tabPanels:a,selectedIndex:i,onTabChange:o,onGlobalRowSelectionChange:l,ariaLabel:u,ariaDescription:c,className:d="",disabled:h=!1,orientation:p="horizontal",id:g,isLoading:y=!1,loadingComponent:f,error:m=null,errorComponent:I,"data-testid":M,actions:C,actionsMinGap:v=16,forceActionsAbove:D=!1}=e,N=F.useRef(g||`aria-tabs-datagrid-${Math.random().toString(36).slice(2,9)}`).current,_=typeof c=="string"&&c.trim()!==""&&!/\s/.test(c),w=`${N}-description`,j=`${N}-navigation-help`,{dataComparator:x=(A,K)=>JSON.stringify(A)===JSON.stringify(K),filterFunction:S=A=>A,booleanRenderer:B=A=>A?"âœ“":"âœ—"}=r||{},P=i!==void 0,$=i??0,[k,H]=F.useState({focusArea:"tabs",focusedTabIndex:$,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}),Q=F.useMemo(()=>({selectedIndex:$,tabLoadingStates:new Array(a.length).fill(!1),tabErrors:new Array(a.length).fill(null),sortConfig:[],selectedRows:new Array(a.length).fill([]),globalSelectedRowData:null,filters:void 0}),[$]),[O,z]=F.useReducer(z_,Q);F.useEffect(()=>{const A=O.tabLoadingStates.length,K=a.length;A!==K&&z({type:"ADJUST_ARRAYS",payload:{newLength:K}})},[a.length]),F.useEffect(()=>{P&&z({type:"SET_SELECTED_INDEX",payload:$})},[$,P]),F.useEffect(()=>{H(A=>({...A,focusArea:"tabs",focusedTabIndex:O.selectedIndex,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}))},[O.selectedIndex]),F.useEffect(()=>{l&&l(O.globalSelectedRowData)},[O.globalSelectedRowData,l]);const W=F.useCallback((A,K)=>x(A,K),[x]),R=F.useCallback(A=>{A>=0&&A<a.length&&!a[A].disabled&&(z({type:"SET_SELECTED_INDEX",payload:A}),H(K=>({...K,focusedTabIndex:A,focusArea:"tabs"})),o?.(A))},[a,o]),E=F.useRef(!1),L=F.useCallback((A,K)=>{if(!K?.force&&!E.current&&A===0){E.current=!0;return}E.current=!0,setTimeout(()=>{const ce=X.current[A],re=ce?.parentElement;if(ce&&re){const J=ce.offsetLeft,de=ce.offsetWidth,Se=re.clientWidth,Ce=J-Se/2+de/2;try{re.scrollTo({left:Math.max(0,Ce),behavior:"smooth"})}catch{ce.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}}else process.env.SILENCE_SCROLL_DEBUG||console.debug("[AriaTabsDataGrid] Missing elements for scroll",{tabElementExists:!!ce,tabListElementExists:!!re})},50)},[]),X=F.useRef([]),ie=F.useRef([]),te=F.useCallback((A,K)=>{const ce=O.sortConfig||[],re=ce.find(Se=>Se.key===K);let J;re?re.direction==="asc"?J=ce.map(Se=>Se.key===K?{...Se,direction:"desc"}:Se):J=ce.filter(Se=>Se.key!==K):J=[...ce,{key:K,direction:"asc"}],z({type:"SET_SORT",payload:J}),a[A].onSort?.(K)},[O.sortConfig,a]),Y=F.useCallback(A=>{setTimeout(()=>{const K=document.querySelector(`[data-tab-panel="${O.selectedIndex}"] th:nth-child(${A+1})`);K&&K.focus()},0)},[O.selectedIndex]),G=F.useCallback(A=>B(A),[B]),q=F.useCallback((A,K)=>{setTimeout(()=>{const ce=document.querySelector(`[data-tab-panel="${O.selectedIndex}"] tbody tr:nth-child(${A+1}) td:nth-child(${K+1})`);ce&&ce.focus()},0)},[O.selectedIndex]);F.useEffect(()=>{k.isGridActive&&(k.focusArea==="headers"?setTimeout(()=>{Y(k.focusedHeaderIndex)},0):k.focusArea==="cells"&&setTimeout(()=>{q(k.focusedRowIndex,k.focusedColumnIndex)},0))},[k.focusArea,k.isGridActive,k.focusedHeaderIndex,k.focusedRowIndex,k.focusedColumnIndex,Y,q]),F.useEffect(()=>{L(O.selectedIndex)},[O.selectedIndex,L]);const ue=F.useCallback((A,K)=>{const{key:ce}=A,re=a[O.selectedIndex],J=re?.columns.length||0;switch(ce){case"ArrowLeft":A.preventDefault();const de=Math.max(0,K-1);H(Ne=>({...Ne,focusedHeaderIndex:de})),Y(de);break;case"ArrowRight":A.preventDefault();const Se=Math.min(J-1,K+1);H(Ne=>({...Ne,focusedHeaderIndex:Se})),Y(Se);break;case"ArrowUp":A.preventDefault(),H(Ne=>({...Ne,focusArea:"tabs",focusedTabIndex:O.selectedIndex})),L(O.selectedIndex),X.current[O.selectedIndex]?.focus();break;case"ArrowDown":A.preventDefault(),H(Ne=>({...Ne,focusArea:"cells",focusedRowIndex:0,focusedColumnIndex:K,isGridActive:!0}));break;case"Home":A.preventDefault(),H(Ne=>({...Ne,focusedHeaderIndex:0})),Y(0);break;case"End":A.preventDefault();const Ce=J-1;H(Ne=>({...Ne,focusedHeaderIndex:Ce})),Y(Ce);break;case"Enter":case" ":A.preventDefault();const je=re?.columns[K]?.key;je&&te(O.selectedIndex,je);break}},[a,O.selectedIndex,te,H,Y,q,X]),U=F.useCallback((A,K,ce)=>{const{key:re}=A,J=a[O.selectedIndex],de=J?.data.length||0,Se=J?.columns.length||0;switch(re){case"ArrowUp":if(A.preventDefault(),K===0)H(xe=>({...xe,focusArea:"headers",focusedHeaderIndex:ce,isGridActive:!1})),Y(ce);else{const xe=K-1;H(Me=>({...Me,focusedRowIndex:xe})),q(xe,ce)}break;case"ArrowDown":A.preventDefault();const Ce=Math.min(de-1,K+1);H(xe=>({...xe,focusedRowIndex:Ce})),q(Ce,ce);break;case"ArrowLeft":A.preventDefault();const je=Math.max(0,ce-1);H(xe=>({...xe,focusedColumnIndex:je})),q(K,je);break;case"ArrowRight":A.preventDefault();const Ne=Math.min(Se-1,ce+1);H(xe=>({...xe,focusedColumnIndex:Ne})),q(K,Ne);break;case"Home":A.preventDefault(),A.ctrlKey?(H(xe=>({...xe,focusedRowIndex:0,focusedColumnIndex:0})),q(0,0)):(H(xe=>({...xe,focusedColumnIndex:0})),q(K,0));break;case"End":if(A.preventDefault(),A.ctrlKey){const xe=de-1,Me=Se-1;H(Be=>({...Be,focusedRowIndex:xe,focusedColumnIndex:Me})),q(xe,Me)}else{const xe=Se-1;H(Me=>({...Me,focusedColumnIndex:xe})),q(K,xe)}break;case"Enter":case" ":if(A.preventDefault(),J&&J.data[K]){const xe=J.data.some(Qe=>"ews_data"in Qe)?S(J.data,O.filters):J.data,Me=O.sortConfig;let Be=xe;if(Me&&Me.length>0&&(Be=[...xe].sort((Qe,Ae)=>{for(const{key:mt,direction:Dn}of Me){let fn=Qe[mt],en=Ae[mt];const tt=J.columns.find(ja=>ja.key===mt);if(tt?.tableRenderer?(fn=tt.tableRenderer(Qe),en=tt.tableRenderer(Ae)):tt?.render&&(fn=tt.render(Qe),en=tt.render(Ae)),fn==null&&en==null)continue;if(fn==null)return Dn==="asc"?-1:1;if(en==null)return Dn==="asc"?1:-1;let st=0;if(typeof fn=="number"&&typeof en=="number"?st=fn-en:st=String(fn).localeCompare(String(en),void 0,{numeric:!0,sensitivity:"base"}),st!==0)return Dn==="asc"?st:-st}return 0})),Be[K]){const Qe=Be[K],mt=O.globalSelectedRowData&&W(O.globalSelectedRowData,Qe)?null:Qe;z({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:mt})}}break}},[a,O.selectedIndex,O.filters,O.sortConfig,S,W,z,H,Y,q]),le=F.useCallback((A,K)=>S(A,K),[S]);if(F.useImperativeHandle(n,()=>({selectTab:A=>{A>=0&&A<a.length&&(z({type:"SET_SELECTED_INDEX",payload:A}),o?.(A))},refreshData:A=>{console.log("Refreshing data for tab:",A??"all")},exportData:A=>{const K=A??O.selectedIndex,ce=a[K];return ce?ce.data:[]},getSelectedRows:A=>O.globalSelectedRowData?[]:[],clearSelection:A=>{z({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:null})},applyFilters:A=>{z({type:"SET_FILTERS",payload:A})}}),[O.selectedIndex,O.selectedRows,a,o]),y)return s.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--loading ${d}`,"data-testid":M,children:f||s.jsx("div",{className:"aria-tabs-datagrid__loading",children:s.jsx("div",{className:"nhsuk-spinner",role:"status","aria-label":"Loading data",children:s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Loading..."})})})});if(m)return s.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--error ${d}`,"data-testid":M,children:I||s.jsxs("div",{className:"aria-tabs-datagrid__error",role:"alert",children:[s.jsx("h3",{className:"nhsuk-error-summary__title",children:"Error loading data"}),s.jsx("p",{children:m})]})});const se=F.useRef(null),he=F.useRef(null),ne=F.useRef(null),[fe,pe]=F.useState(!0);F.useEffect(()=>{if(!C){pe(!1);return}if(D){pe(!1);return}function A(){if(!se.current||!he.current||!ne.current)return;const re=se.current.clientWidth,J=Array.from(he.current.querySelectorAll(":scope > .aria-tabs-datagrid__tab")),de=J.reduce((Ne,xe)=>Ne+xe.offsetWidth,0),Se=ne.current.offsetWidth,Ce=Math.max(8*(J.length-1),0),je=de+Ce+Se+v<=re;pe(je)}const K=requestAnimationFrame(()=>A()),ce=new ResizeObserver(()=>A());return se.current&&ce.observe(se.current),he.current&&ce.observe(he.current),()=>{cancelAnimationFrame(K),ce.disconnect()}},[C,v,D,a.length]);const ve=ne,me=F.useCallback(()=>ve.current?Array.from(ve.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(A=>!A.hasAttribute("disabled")):[],[]),ee=F.useCallback(A=>{const K=me();if(!K.length)return;const ce=Math.max(0,Math.min(A,K.length-1));K[ce].focus(),H(re=>({...re,focusArea:"actions",focusedActionIndex:ce}))},[me]),Z=F.useCallback(()=>ee(0),[ee]),oe=F.useCallback((A,K)=>{const{key:ce}=A,re=a.length-1;switch(ce){case"ArrowUp":{C&&!fe&&(A.preventDefault(),Z());break}case"ArrowLeft":{A.preventDefault();const J=K>0?K-1:re;R(J),L(J),X.current[J]?.focus();break}case"ArrowRight":{if(A.preventDefault(),K===re&&C&&fe){Z();return}const J=K<re?K+1:0;R(J),L(J),X.current[J]?.focus();break}case"ArrowDown":{A.preventDefault(),H(J=>({...J,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));break}case"Home":{A.preventDefault(),R(0),L(0),X.current[0]?.focus();break}case"End":{A.preventDefault(),R(re),L(re),X.current[re]?.focus();break}case"Enter":case" ":{A.preventDefault(),R(K);break}case"Tab":{!A.shiftKey&&K===re&&C&&fe&&Z();break}}},[a.length,R,L,C,fe,Z]),ae=F.useCallback(A=>{const{key:K}=A,ce=me();if(!ce.length)return;const re=ce.findIndex(J=>J===document.activeElement);switch(K){case"ArrowLeft":{if(fe)if(re>0)A.preventDefault(),ee(re-1);else{A.preventDefault();const J=a.length-1;R(J),L(J),X.current[J]?.focus(),H(de=>({...de,focusArea:"tabs",focusedTabIndex:J}))}break}case"ArrowRight":{fe&&(re<ce.length-1?(A.preventDefault(),ee(re+1)):(A.preventDefault(),R(0),L(0),X.current[0]?.focus(),H(J=>({...J,focusArea:"tabs",focusedTabIndex:0}))));break}case"ArrowDown":{if(fe)A.preventDefault(),H(J=>({...J,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));else{A.preventDefault();const J=O.selectedIndex;X.current[J]?.focus(),H(de=>({...de,focusArea:"tabs",focusedTabIndex:J}))}break}}},[me,fe,ee,a.length,R,L,O.selectedIndex]);return s.jsxs("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--${p} ${d}`,id:g,"data-testid":M,ref:se,children:[c&&!_&&s.jsx("div",{id:w,className:"nhsuk-u-visually-hidden",children:c}),s.jsx("div",{className:"aria-tabs-datagrid__navigation-help sr-only",id:j,children:"Keyboard navigation: Use Tab to move between tabs and grid. Arrow keys navigate within tabs and grid cells. Enter activates tabs and sorts columns. Arrow Down from tabs moves to table headers. Arrow Down from headers moves to table cells. Use Arrow keys to navigate between cells."}),s.jsx(pu,{sortConfig:O.sortConfig||[],columns:a.flatMap(A=>A.columns.map(K=>({key:K.key,label:K.label}))).filter((A,K,ce)=>ce.findIndex(re=>re.key===A.key)===K),onSortChange:A=>{z({type:"SET_SORT",payload:A})},ariaLabel:"Data grid sort configuration"}),C&&!fe&&s.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above",ref:ne,role:"toolbar","aria-label":"Additional actions",onKeyDown:ae,children:C}),s.jsxs("div",{className:`aria-tabs-datagrid__tabs-wrapper ${fe?"aria-tabs-datagrid__tabs-wrapper--inline-actions":""}`,children:[s.jsx("div",{role:"tablist","aria-label":u,"aria-describedby":c?_?c:w:j,"aria-orientation":p,className:"aria-tabs-datagrid__tabs",ref:he,children:a.map((A,K)=>{const ce=K===O.selectedIndex,re=A.disabled||h;return s.jsxs("button",{role:"tab",id:`tab-${A.id}`,"aria-controls":`panel-${A.id}`,"aria-selected":ce,"aria-disabled":re,tabIndex:ce?0:-1,ref:J=>{X.current[K]=J},onClick:()=>R(K),onKeyDown:J=>oe(J,K),disabled:re,className:["aria-tabs-datagrid__tab",ce?"aria-tabs-datagrid__tab--selected":"",re?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[s.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:A.label}),O.tabLoadingStates[K]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),O.tabErrors[K]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},A.id)})}),C&&fe&&s.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline",ref:ne,role:"toolbar","aria-label":"Additional actions",onKeyDown:ae,children:C})]}),a.map((A,K)=>{const ce=K===O.selectedIndex;return s.jsx("div",{role:"tabpanel",id:`panel-${A.id}`,"aria-labelledby":`tab-${A.id}`,tabIndex:0,hidden:!ce,ref:re=>{ie.current[K]=re},className:`aria-tabs-datagrid__panel ${A.className||""}`,"data-tab-panel":K,children:ce&&(()=>{const re=A.data.some(de=>"ews_data"in de)?le(A.data,O.filters):A.data,J=F.useMemo(()=>{const de=O.sortConfig;return!de||de.length===0?re:[...re].sort((Se,Ce)=>{for(const{key:je,direction:Ne}of de){let xe=Se[je],Me=Ce[je];const Be=A.columns.find(Ae=>Ae.key===je);if(Be?.tableRenderer?(xe=Be.tableRenderer(Se),Me=Be.tableRenderer(Ce)):Be?.render&&(xe=Be.render(Se),Me=Be.render(Ce)),xe==null&&Me==null)continue;if(xe==null)return 1;if(Me==null)return-1;let Qe=0;if(typeof xe=="number"&&typeof Me=="number"?Qe=xe-Me:typeof xe=="boolean"&&typeof Me=="boolean"?Qe=xe===Me?0:xe?1:-1:Qe=String(xe).localeCompare(String(Me),void 0,{numeric:!0,sensitivity:"base"}),Qe!==0)return Ne==="asc"?Qe:-Qe}return 0})},[re,O.sortConfig,A.columns]);return s.jsxs("table",{className:"nhsuk-table aria-tabs-datagrid__grid",role:"grid","aria-label":A.ariaLabel,"aria-describedby":A.ariaDescription?`panel-${A.id}-description`:void 0,children:[A.ariaDescription&&s.jsx("caption",{className:"nhsuk-u-visually-hidden",id:`panel-${A.id}-description`,children:A.ariaDescription}),s.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:s.jsx("tr",{role:"row",children:A.columns.map((de,Se)=>{const Ce=O.sortConfig?.find(xe=>xe.key===de.key),je=!!Ce,Ne=k.focusArea==="headers"&&k.focusedHeaderIndex===Se;return s.jsx("th",{className:`sortable-header ${Ne?"sortable-header--focused":""} ${je?"sortable-header--sorted":""}`,role:"columnheader",tabIndex:Ne?0:-1,onClick:()=>te(K,de.key),onKeyDown:xe=>ue(xe,Se),"aria-sort":je?Ce?.direction==="asc"?"ascending":"descending":"none",children:s.jsxs("div",{className:"header-content",children:[s.jsx("span",{className:"header-label",children:de.label}),s.jsxs("div",{className:`sort-indicator-container ${je?`sort-indicator--${Ce?.direction}`:""}`,children:[O.sortConfig&&O.sortConfig.length>0&&O.sortConfig.findIndex(xe=>xe.key===de.key)!==-1&&s.jsx("span",{className:`sort-priority sort-priority--priority-${O.sortConfig.findIndex(xe=>xe.key===de.key)+1}`,"data-priority":O.sortConfig.findIndex(xe=>xe.key===de.key)+1,title:`Sort priority: ${O.sortConfig.findIndex(xe=>xe.key===de.key)+1}`,children:O.sortConfig.findIndex(xe=>xe.key===de.key)+1}),je&&s.jsx("svg",{className:`nhsuk-icon sort-arrow sort-arrow--${Ce?.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})]})]})},de.key)})})}),s.jsx("tbody",{className:"nhsuk-table__body",role:"rowgroup",children:J.map((de,Se)=>{const Ce=O.globalSelectedRowData&&W(O.globalSelectedRowData,de),je=k.focusArea==="cells"&&k.focusedRowIndex===Se;return s.jsx("tr",{role:"row",className:`data-row ${Ce?"data-row--selected":""} ${je?"data-row--focused":""}`,"aria-selected":Ce,children:A.columns.map((Ne,xe)=>{const Me=de[Ne.key];let Be;Ne.tableRenderer?Be=Ne.tableRenderer(de):Ne.render?Be=Ne.render(de):Be=Me;const Qe=k.focusArea==="cells"&&k.focusedRowIndex===Se&&k.focusedColumnIndex===xe,Ae=()=>{if(Ne.customRenderer){const mt=Ne.customRenderer(Me,de);return s.jsx("span",{className:"data-cell__custom","data-custom-rendered":"true",children:mt})}return typeof Me=="boolean"&&Be===Me?s.jsxs(s.Fragment,{children:[G(Me),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:Me?"Yes":"No"})]}):F.isValidElement(Be)||typeof Be!="object"?Be??"":Be};return s.jsx("td",{role:"gridcell",className:`data-cell ${Qe?"data-cell--focused":""}`,tabIndex:Qe?0:-1,onClick:()=>{const Dn=O.globalSelectedRowData&&W(O.globalSelectedRowData,de)?null:de;z({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:Dn})},onKeyDown:mt=>U(mt,Se,xe),children:Ae()},Ne.key)})},Se)})})]})})()},A.id)})]})}),ni={asc:"â†‘",desc:"â†“"},O_=t=>[...t].sort((e,n)=>e.priority-n.priority);function js(t){return t.map((e,n)=>({...e,priority:n}))}function W_(t){return t.length>0?Math.max(...t.map(e=>e.priority)):-1}function U_(t,e){const n=e.find(r=>r.id===t);return n?n.priority>0:!1}function G_(t,e){const n=e.find(a=>a.id===t),r=W_(e);return n?n.priority<r:!1}const Y_=({sortConfig:t,onSortChange:e,className:n="",emptyDescription:r="No sorting applied",activeDescription:a,showReset:i=!0,showHelp:o=!0,disabled:l=!1,ariaLabel:u="Sort configuration",ariaDescribedBy:c})=>{const d=F.useMemo(()=>O_(t),[t]),h=F.useCallback(M=>{if(l)return;const C=t.map(v=>v.id===M?{...v,direction:v.direction==="asc"?"desc":"asc"}:v);e(C)},[t,e,l]),p=F.useCallback(M=>{if(l)return;const C=t.findIndex(D=>D.id===M);if(C<=0)return;const v=[...t];[v[C],v[C-1]]=[v[C-1],v[C]],e(js(v))},[t,e,l]),g=F.useCallback(M=>{if(l)return;const C=t.findIndex(D=>D.id===M);if(C>=t.length-1||C===-1)return;const v=[...t];[v[C],v[C+1]]=[v[C+1],v[C]],e(js(v))},[t,e,l]),y=F.useCallback(M=>{if(l)return;const C=t.filter(v=>v.id!==M);e(js(C))},[t,e,l]),f=F.useCallback(()=>{l||e([])},[e,l]),m=()=>{if(t.length===0)return r;if(a)return a;const M=d.map((C,v)=>{const D=C.direction==="asc"?"ascending":"descending";return`${v+1}. ${C.label} (${D})`});if(M.length===1)return`Sorted by: ${M[0]}`;if(M.length===2)return`Sorted by: ${M.join(" and ")}`;{const C=M.pop();return`Sorted by: ${M.join(", ")}, and ${C}`}},I=F.useMemo(()=>{const M=["sort-description"];return o&&M.push("sort-help"),c&&M.push(c),M.join(" ")},[o,c]);return t.length===0?s.jsx("div",{className:`sort-status-control sort-status-control--empty ${n}`,children:s.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:m()})}):s.jsxs("div",{className:`sort-status-control ${n}`,children:[s.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:m()}),s.jsxs("div",{className:"sort-status-control__tags",role:"list","aria-label":u,"aria-describedby":I,children:[s.jsx("div",{className:"sort-status-control__tags-label",children:"Current sorting:"}),d.map(M=>s.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",children:s.jsx(Ye,{text:"",color:"blue",className:"sort-status-control__tag",closable:!0,onClose:()=>y(M.id),disabled:l,children:s.jsxs("div",{className:"sort-status-control__tag-content",children:[s.jsx("span",{className:"sort-status-control__tag-priority",children:M.priority+1}),s.jsx("span",{className:"sort-status-control__tag-label",children:M.label}),s.jsx("button",{type:"button",className:"sort-status-control__tag-direction",onClick:()=>h(M.id),disabled:l,"aria-label":`Toggle sort direction for ${M.label}. Currently ${M.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:M.direction==="asc"?ni.asc:ni.desc}),s.jsxs("div",{className:"sort-status-control__tag-actions",children:[s.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>p(M.id),disabled:l||!U_(M.id,t),"aria-label":`Move ${M.label} sort up in priority`,title:"Move up in priority",children:"â–²"}),s.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>g(M.id),disabled:l||!G_(M.id,t),"aria-label":`Move ${M.label} sort down in priority`,title:"Move down in priority",children:"â–¼"})]})]})})},M.id))]}),i&&s.jsx("div",{className:"sort-status-control__actions",children:s.jsx(nt,{variant:"secondary",onClick:f,disabled:l,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})}),o&&s.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:s.jsxs("small",{children:["Click ",ni.asc,"/",ni.desc," to toggle ascending/descending. Use â–²/â–¼ to change sort priority. Click Ã— to remove a sort."]})})]})},ri=(t,e)=>e.map(n=>({id:n.id,label:n.label,data:n.filter?n.filter(t):t,columns:n.columns.map(r=>({key:r.key,label:r.label,render:r.render,customRenderer:r.customRenderer})),sortConfig:n.sortConfig,ariaLabel:n.ariaLabel||`${n.label} Data Grid`,ariaDescription:n.ariaDescription||`Data grid showing ${n.label.toLowerCase()}`,className:n.className,disabled:n.disabled})),Ds=[{value:!0,icon:s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"100%",height:"34",children:s.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})})},{value:!1,icon:s.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"100%",height:"34",children:[s.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),s.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]})}],V_=(t,e)=>!t||!e?t===e:t.name&&t.bed_name&&e.name&&e.bed_name?t.name===e.name&&t.bed_name===e.bed_name:JSON.stringify(t)===JSON.stringify(e),q_=(t,e)=>e?t.filter(n=>{if(e.ewsScoreRange){const[r,a]=e.ewsScoreRange;if(n.ews_score<r||n.ews_score>a)return!1}return!(e.wards&&e.wards.length>0&&!e.wards.includes(n.ward_name)||e.specialties&&e.specialties.length>0&&!e.specialties.includes(n.speciality)||e.dischargeStatuses&&e.dischargeStatuses.length>0&&!e.dischargeStatuses.includes(n.early_discharge_notification)||e.avpuLevels&&e.avpuLevels.length>0&&!e.avpuLevels.includes(n.ews_data.avpu)||e.medicallyOptimised!==null&&e.medicallyOptimised!==void 0&&n.medically_optimised!==e.medicallyOptimised||e.fastTrack!==null&&e.fastTrack!==void 0&&n.fast_track!==e.fastTrack)}):t,X_=t=>{if(typeof t=="boolean"){const n=Ds.find(r=>r.value===t);return n?n.icon:null}const e=Ds.find(n=>n.value===t);return e?e.icon:String(t)},K_=t=>`${t.name}-${t.bed_name}`,Z_=()=>({overview:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"bed_name",label:"Bed"},{key:"ews_score",label:"EWS Score"},{key:"speciality",label:"Specialty"},{key:"consultant",label:"Consultant"}],vitals:[{key:"name",label:"Patient Name"},{key:"ews_score",label:"EWS Score"},{key:"respiratory_rate_bpm",label:"Respiratory Rate",render:t=>t.ews_data.respiratory_rate_bpm},{key:"sp02",label:"SpO2 %",render:t=>t.ews_data.sp02},{key:"temperature",label:"Temperature Â°C",render:t=>t.ews_data.temperature},{key:"systolic_bp",label:"Systolic BP",render:t=>t.ews_data.systolic_bp},{key:"heart_rate",label:"Heart Rate",render:t=>t.ews_data.heart_rate},{key:"avpu",label:"AVPU",render:t=>t.ews_data.avpu.toUpperCase()}],discharge:[{key:"name",label:"Patient Name"},{key:"anticipated_discharge_date",label:"Anticipated Discharge",render:t=>new Date(t.anticipated_discharge_date).toLocaleDateString()},{key:"early_discharge_notification",label:"Discharge Status"},{key:"medically_optimised",label:"Medically Optimised"},{key:"criteria_to_reside",label:"Criteria to Reside"},{key:"fast_track",label:"Fast Track"},{key:"transport_status",label:"Transport Status"},{key:"pathway",label:"Pathway"}],logistics:[{key:"name",label:"Patient Name"},{key:"ward_name",label:"Ward"},{key:"room_name",label:"Room"},{key:"bed_name",label:"Bed"},{key:"bed_type",label:"Bed Type"},{key:"transport_booking",label:"Transport Booked"},{key:"transport_mobility",label:"Transport Type"},{key:"district_nurse_referral",label:"District Nurse"},{key:"equipment",label:"Equipment"}]}),J_=t=>{const e=Z_();return[{id:"overview",label:"Patient Overview",data:t,columns:e.overview,ariaLabel:"Patient Overview Data Grid",ariaDescription:"Overview of all patients with basic information"},{id:"vitals",label:"Vital Signs & EWS",data:t,columns:e.vitals,sortConfig:[{key:"ews_score",direction:"desc"},{key:"name",direction:"asc"},{key:"ward_name",direction:"asc"}],ariaLabel:"Patient Vital Signs Data Grid",ariaDescription:"Patient vital signs and Early Warning Scores"},{id:"discharge",label:"Discharge Planning",data:t.filter(n=>n.anticipated_discharge_date),columns:e.discharge,sortConfig:[{key:"anticipated_discharge_date",direction:"asc"},{key:"discharge_status",direction:"desc"}],ariaLabel:"Discharge Planning Data Grid",ariaDescription:"Patient discharge planning and status information"},{id:"logistics",label:"Bed Management",data:t,columns:e.logistics,sortConfig:[{key:"ward_name",direction:"asc"}],ariaLabel:"Bed Management Data Grid",ariaDescription:"Patient location and logistics information"}]},gu={dataComparator:V_,filterFunction:q_,booleanRenderer:X_,getDataId:K_};function bu(t,e,n){const{primaryField:r,secondaryFields:a=[],badges:i=[],hiddenFields:o=[],getPriority:l,getVariant:u,fieldRenderers:c={},classPrefix:d="adaptive-card"}=n,h=e.find(C=>C.key===r),p=h?.cardRenderer?h.cardRenderer(t):h?.render?h.render(t):t[r||"name"]||"Untitled",g=()=>a.filter(v=>!o.includes(v)&&t[v]).slice(0,3).map(v=>{const D=e.find(w=>w.key===v),T=t[v],N=c[v]?c[v](T,t):D?.cardRenderer?D.cardRenderer(t):D?.render?D.render(t):T;return`${D?.label||v}: ${N}`}).join(" â€¢ "),y=()=>i.length===0?null:i.filter(C=>t[C.fieldKey]!==void 0).map(C=>{const v=t[C.fieldKey],D=C.render?C.render(v,t):v;return`<span class="nhsuk-tag ${Q_(C,v)}">${D}</span>`}).join(""),f=()=>u?u(t):l?.(t)==="high"?"primary":"default",m=y(),I=g(),M=m?`${I}${m?`<div class="adaptive-card__badges">${m}</div>`:""}`:I;return{variant:f(),heading:String(p),descriptionHtml:M,className:`adaptive-card ${d}`,"aria-label":`Record for ${p}`}}function Q_(t,e){const n=t.className||"adaptive-card__badge";if(t.fieldKey==="ews_score"||t.fieldKey.includes("score")){const r=Number(e);return r>=7?`${n} nhsuk-tag--red`:r>=3?`${n} nhsuk-tag--yellow`:`${n} nhsuk-tag--green`}if(t.fieldKey==="priority"){const r=String(e).toLowerCase();if(r==="high")return`${n} nhsuk-tag--red`;if(r==="medium")return`${n} nhsuk-tag--yellow`;if(r==="low")return`${n} nhsuk-tag--green`}if(t.fieldKey==="status"){const r=String(e).toLowerCase();if(r==="urgent"||r==="critical")return`${n} nhsuk-tag--red`;if(r==="pending"||r==="warning")return`${n} nhsuk-tag--yellow`;if(r==="completed"||r==="success")return`${n} nhsuk-tag--green`}switch(t.color){case"primary":return`${n} nhsuk-tag--blue`;case"secondary":return`${n} nhsuk-tag--grey`;case"success":return`${n} nhsuk-tag--green`;case"warning":return`${n} nhsuk-tag--yellow`;case"danger":return`${n} nhsuk-tag--red`;default:return n}}const ey={primaryField:"name",secondaryFields:["id","description","status"],badges:[{fieldKey:"priority",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__status-badge"}],hiddenFields:[],getPriority:t=>t.priority||"medium",getStatus:t=>t.status||"active",getVariant:t=>t.priority==="high"?"primary":"default",fieldRenderers:{},classPrefix:"adaptive-card--generic"},Ms=({data:t,columns:e,onSelect:n,onAction:r,priority:a="medium",status:i="active"})=>{const o=t.name,l=t.age,u=t.ward_name,c=t.bed_name,d=t.ews_score,h=t.speciality,p=t.consultant;return s.jsxs("div",{className:`healthcare-card healthcare-card--patient healthcare-card--${a} healthcare-card--${i}`,onClick:()=>n?.(t),role:"button",tabIndex:0,"aria-label":`Patient record for ${o}, Age ${l}, Ward ${u}, Bed ${c}`,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__identity",children:[s.jsx("h3",{className:"healthcare-card__patient-name",children:o}),s.jsxs("p",{className:"healthcare-card__age-info",children:[s.jsx("span",{className:"healthcare-card__label",children:"Age: "}),s.jsx("span",{className:"healthcare-card__value",children:l})]})]}),s.jsx("div",{className:"healthcare-card__badges",children:d!==void 0&&s.jsxs(Ye,{color:ny(_u(d)),className:"healthcare-card__alert",children:["EWS: ",d]})})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("dl",{className:"healthcare-card__details",children:[s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Ward"}),s.jsx("dd",{children:u})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Bed"}),s.jsx("dd",{children:c})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Specialty"}),s.jsx("dd",{children:h})]}),s.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--prominent",children:[s.jsx("dt",{children:"Consultant"}),s.jsx("dd",{children:p})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(nt,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-notes",t)},children:"Notes"}),s.jsx(nt,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-vitals",t)},children:"Vitals"}),s.jsx(nt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:g=>{g.stopPropagation(),r?.("view-full",t)},children:"View Full Record"})]})]})},$s=({data:t,onAction:e})=>s.jsxs("div",{className:"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__time-info",children:[s.jsx("h3",{className:"healthcare-card__time",children:new Date(t.appointment_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),s.jsx("p",{className:"healthcare-card__type",children:t.appointment_type})]}),s.jsxs("div",{className:"healthcare-card__badges",children:[s.jsx(Ye,{color:ry(t.status||"active"),className:"healthcare-card__status",children:(t.status||"active").charAt(0).toUpperCase()+(t.status||"active").slice(1)}),s.jsxs(Ye,{color:"grey",className:"healthcare-card__duration",children:[t.duration||"30"," min"]})]})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("dl",{className:"healthcare-card__details",children:[s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Patient"}),s.jsx("dd",{children:t.patient_name})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Consultant"}),s.jsx("dd",{children:t.consultant})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Location"}),s.jsx("dd",{children:t.location})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(nt,{variant:"secondary",size:"small",onClick:()=>e?.("view",t),children:"View Details"}),s.jsx(nt,{variant:"primary",size:"small",onClick:()=>e?.("edit",t),children:"Reschedule"})]})]}),Is=({data:t,onAction:e})=>s.jsxs("div",{className:"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__medication-info",children:[s.jsx("h3",{className:"healthcare-card__medication-name",children:t.medication}),s.jsxs("p",{className:"healthcare-card__dose",children:[t.dose," â€¢ ",t.frequency]})]}),s.jsxs("div",{className:"healthcare-card__badges",children:[s.jsx(Ye,{color:"blue",className:"healthcare-card__route",children:t.route}),t.next_due&&s.jsxs(Ye,{color:"red",className:"healthcare-card__warning",children:["Due: ",new Date(t.next_due).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("dl",{className:"healthcare-card__details",children:[s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Patient"}),s.jsx("dd",{children:t.patient_name})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Prescriber"}),s.jsx("dd",{children:t.prescriber})]}),t.allergies&&s.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--urgent",children:[s.jsx("dt",{children:"Allergies"}),s.jsx("dd",{children:t.allergies})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(nt,{variant:"secondary",size:"small",onClick:()=>e?.("view",t),children:"View Details"}),s.jsx(nt,{variant:"primary",size:"small",onClick:()=>e?.("edit",t),children:"Adjust Dose"})]})]}),Ps=({data:t,onSelect:e,onAction:n,priority:r="medium"})=>{const a=t.name,i=t.ews_score,o=t.ews_data?.respiratory_rate_bpm,l=t.ews_data?.sp02,u=t.ews_data?.temperature,c=t.ews_data?.systolic_bp,d=t.ews_data?.heart_rate,h=t.ews_data?.avpu;return s.jsxs("div",{className:`healthcare-card healthcare-card--vitals healthcare-card--${r}`,onClick:()=>e?.(t),role:"button",tabIndex:0,"aria-label":`Vital signs for ${a}, EWS Score ${i}`,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__vitals-summary",children:[s.jsx("h3",{className:"healthcare-card__patient-name",children:a}),i!==void 0&&s.jsxs("p",{className:`healthcare-card__ews-score healthcare-card__ews-score--${ty(i)}`,children:["EWS: ",i]})]}),s.jsx("div",{className:"healthcare-card__badges",children:h&&s.jsxs(Ye,{color:"blue",className:"healthcare-card__avpu",children:["AVPU: ",h.toUpperCase()]})})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("div",{className:"healthcare-card__vitals-grid",children:[o!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Respiratory Rate"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[o," bpm"]})]}),l!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"SpO2"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[l,"%"]})]}),u!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Temperature"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[u,"Â°C"]})]}),c!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Systolic BP"}),s.jsx("span",{className:"healthcare-card__vital-value",children:c})]}),d!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Heart Rate"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[d," bpm"]})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(nt,{variant:"secondary",className:"healthcare-card__action",onClick:p=>{p.stopPropagation(),n?.("view-trend",t)},children:"Trend"}),s.jsx(nt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:p=>{p.stopPropagation(),n?.("record-new",t)},children:"Record New"})]})]})};function _u(t){const e=typeof t=="string"?parseInt(t,10):t;return e>=7?"critical":e>=5?"high":e>=3?"medium":"low"}function ty(t){return _u(t)}function ny(t){switch(t){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"grey";default:return"grey"}}function ry(t){switch(t.toLowerCase()){case"active":return"blue";case"pending":return"orange";case"completed":return"green";case"cancelled":return"grey";default:return"blue"}}const ay=[{fieldKey:"ews_score",render:t=>`EWS: ${t}`,className:"adaptive-card__ews-badge",color:"default"},{fieldKey:"priority",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__status-badge"}],yu=t=>t.ews_score&&Number(t.ews_score)>=7?"high":t.ews_score&&Number(t.ews_score)>=3?"medium":t.priority==="high"||t.status==="urgent"?"high":t.priority==="low"?"low":"medium",xu={name:"healthcare",defaultCardConfig:{primaryField:"name",secondaryFields:["nhs_number","ward","condition","consultant"],badges:ay,hiddenFields:[],getPriority:yu,getStatus:t=>{if(t.status){const e=t.status.toLowerCase();if(["active","pending","completed","cancelled","urgent"].includes(e))return e}return"active"},getVariant:t=>yu(t)==="high"||t.status==="urgent"?"primary":"default",fieldRenderers:{nhs_number:t=>t?`NHS: ${t}`:"",ews_score:t=>{const e=Number(t),n=e>=7?"HIGH":e>=3?"MEDIUM":"LOW";return`EWS: ${t} (${n})`},age:(t,e)=>e.dob?`${new Date().getFullYear()-new Date(e.dob).getFullYear()}y`:t?`${t}y`:""},classPrefix:"adaptive-card--healthcare"},cssImport:"./HealthcareCardTemplates.scss",cardTemplates:{patient:(t,e,n)=>{const r=n.getPriority?.(t)||"medium",a=n.getStatus?.(t)||"active",i=a==="urgent"?"active":a;return s.jsx(Ms,{data:t,columns:e,priority:r,status:i,onSelect:o=>console.log("Patient selected:",o),onAction:(o,l)=>console.log("Patient action:",o,l)})},appointment:(t,e,n)=>{const r=n.getStatus?.(t)||"pending",a=r==="urgent"?"pending":r;return s.jsx($s,{data:t,columns:e,status:a,onSelect:i=>console.log("Appointment selected:",i),onAction:(i,o)=>console.log("Appointment action:",i,o)})},medication:(t,e,n)=>{const r=n.getPriority?.(t)||"medium";return s.jsx(Is,{data:t,columns:e,priority:r,onSelect:a=>console.log("Medication selected:",a),onAction:(a,i)=>console.log("Medication action:",a,i)})},vitals:(t,e,n)=>{const r=n.getPriority?.(t)||"medium";return s.jsx(Ps,{data:t,columns:e,priority:r,onSelect:a=>console.log("Vitals selected:",a),onAction:(a,i)=>console.log("Vitals action:",a,i)})}},fieldTypes:{isNHSNumber:t=>typeof t=="string"&&/^\d{3}\s?\d{3}\s?\d{4}$/.test(t.replace(/\s/g,"")),isEWSScore:t=>typeof t=="number"&&t>=0&&t<=20,isMedicalDate:t=>typeof t=="string"&&!isNaN(Date.parse(t))}};function vu(t){return{primaryField:t?.primaryField||"name",secondaryFields:t?.secondaryFields||[],badges:t?.badgeFields?.map(e=>({fieldKey:e,className:"adaptive-card__badge"}))||[],hiddenFields:t?.hiddenFields||[],cardTemplate:t?.cardTemplate?(e,n,r)=>t.cardTemplate(e,n):void 0,classPrefix:"adaptive-card--generic"}}function wu(t){if(!t||t.length===0)return!1;const e=t[0];return e.ews_score!==void 0||e.nhs_number!==void 0||e.patient_name!==void 0||e.ward!==void 0||e.consultant!==void 0}function iy(t,e){switch(e.type){case"SET_SELECTED_INDEX":return{...t,selectedIndex:e.payload};case"SET_TAB_LOADING":const n=[...t.tabLoadingStates];return n[e.payload.tabIndex]=e.payload.isLoading,{...t,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...t.tabErrors];return r[e.payload.tabIndex]=e.payload.error,{...t,tabErrors:r};case"SET_SORT":return{...t,sortConfig:e.payload};case"SET_SELECTED_ROWS":const a=[...t.selectedRows];return a[e.payload.tabIndex]=e.payload.rowIndices,{...t,selectedRows:a};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...t,globalSelectedRowData:e.payload};case"SET_FILTERS":return{...t,filters:e.payload};case"ADJUST_ARRAYS":const{newLength:i}=e.payload,o=new Array(i).fill(!1),l=new Array(i).fill(null),u=new Array(i).fill([]);for(let c=0;c<Math.min(t.tabLoadingStates.length,i);c++)o[c]=t.tabLoadingStates[c],l[c]=t.tabErrors[c],u[c]=t.selectedRows[c];return{...t,tabLoadingStates:o,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(t.tabLoadingStates.length).fill(!1),tabErrors:new Array(t.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(t.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return t}}function sy(t,e){const[n,r]=F.useState("cards");return F.useEffect(()=>{if(e){r(e);return}const a=()=>{const i=window.innerWidth;i<t.mobile?r("cards"):i<t.desktop?r("hybrid"):r("table")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[t,e]),n}function oy(t){return!t||typeof t!="object"?null:t.appointment_type||t.appointment_time||t.clinic?"appointment":t.medication_name||t.medication||t.dose||t.frequency?"medication":t.ews_score!==void 0||t.respiratory_rate!==void 0||t.spo2!==void 0||t.temperature!==void 0||t.systolic_bp!==void 0||t.heart_rate!==void 0?"vitals":t.name||t.patient_name||t.nhs_number||t.ward||t.bed?"patient":null}function ly(t,e,n,r){const a=r?{...r.defaultCardConfig,...n}:{...ey,...n};if(r&&r.cardTemplates){const i=oy(t);if(i&&r.cardTemplates[i]){const o=r.cardTemplates[i](t,e,a);if(o)return{variant:"default",children:o}}}return a.cardTemplate&&a.cardTemplate(t,e,a),bu(t,e,a)}const Ls=({breakpoints:t={mobile:768,tablet:1024,desktop:1200},forceLayout:e,cardConfig:n={},experimental:r={},enableAdvancedSorting:a=!1,topActions:i,bottomActions:o,gridActions:l,forceGridActionsAbove:u,tabPanels:c,dataConfig:d,selectedIndex:h,onTabChange:p,ariaLabel:g="Data grid",ariaDescription:y,orientation:f="horizontal",id:m,disabled:I=!1,className:M,...C})=>{const v=sy(t,e),D=h!==void 0,T=h??0,N=F.useMemo(()=>{if(c.some(Z=>Z.data&&Z.data.length>0&&wu(Z.data))){const Z=vu(n);return{...xu.defaultCardConfig,...Z}}else return vu(n)},[n,c]),_=F.useMemo(()=>c.some(Z=>Z.data&&Z.data.length>0&&wu(Z.data))?xu:void 0,[c]),w=F.useMemo(()=>({selectedIndex:T,tabLoadingStates:new Array(c.length).fill(!1),tabErrors:new Array(c.length).fill(null),sortConfig:[],selectedRows:new Array(c.length).fill([]),globalSelectedRowData:null,filters:void 0}),[T,c.length]),[j,x]=F.useReducer(iy,w),S=F.useRef([]),B=F.useRef([]),P=F.useRef([]),$=F.useRef(null),[k,H]=F.useState({focusArea:"tabs",focusedTabIndex:0,focusedCardIndex:0,selectedCardIndex:-1,isGridActive:!1,focusedCardElementIndex:0,cardElements:[],isCardNavigationActive:!1,gridColumns:1,gridRows:1,cardSortConfig:null,focusedSortControlIndex:0,isSortControlsActive:!1}),Q=F.useCallback(ee=>{if(!ee.current)return{columns:1,rows:0};const Z=ee.current,oe=Z.querySelectorAll(".aria-tabs-datagrid-adaptive__card-wrapper");if(oe.length===0)return{columns:1,rows:0};const ae=Z.offsetWidth,K=oe[0].offsetWidth,ce=Math.floor(ae/K)||1,re=Math.ceil(oe.length/ce);return{columns:ce,rows:re}},[]),O=F.useCallback((ee,Z)=>({row:Math.floor(ee/Z),col:ee%Z}),[]),z=F.useCallback((ee,Z,oe)=>ee*oe+Z,[]),W=F.useCallback((ee,Z,oe,ae)=>{const{row:A,col:K}=O(ee,ae);let ce=A,re=K;switch(Z){case"up":ce=Math.max(0,A-1);break;case"down":ce=Math.min(Math.floor((oe-1)/ae),A+1);break;case"left":re=Math.max(0,K-1);break;case"right":re=Math.min(ae-1,K+1);break}const J=z(ce,re,ae);return Math.min(J,oe-1)},[O,z]);F.useEffect(()=>{k.isCardNavigationActive&&k.focusedCardElementIndex>=0&&k.cardElements.length>0&&setTimeout(()=>{const ee=k.cardElements[k.focusedCardElementIndex];ee&&(ee.element.focus(),ee.element.scrollIntoView({block:"nearest",behavior:"smooth"}))},0)},[k.isCardNavigationActive,k.focusedCardElementIndex,k.cardElements.length]),F.useEffect(()=>{const ee=()=>{if(v==="cards"&&$.current){const{columns:ae,rows:A}=Q($);H(K=>({...K,gridColumns:ae,gridRows:A}))}},Z=setTimeout(ee,200),oe=()=>{setTimeout(ee,100)};return window.addEventListener("resize",oe),()=>{clearTimeout(Z),window.removeEventListener("resize",oe)}},[v,c,Q]),F.useEffect(()=>{const ee=j.tabLoadingStates.length,Z=c.length;ee!==Z&&x({type:"ADJUST_ARRAYS",payload:{newLength:Z}})},[c.length,j.tabLoadingStates.length]),F.useEffect(()=>{D&&h!==j.selectedIndex&&x({type:"SET_SELECTED_INDEX",payload:h})},[D,h,j.selectedIndex]);const R=F.useCallback(ee=>{ee>=0&&ee<c.length&&!c[ee].disabled&&(x({type:"SET_SELECTED_INDEX",payload:ee}),p?.(ee))},[c,p]),E=F.useCallback(ee=>{console.log("Card selected:",ee),x({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:ee})},[]),L=F.useCallback(ee=>{const Z=B.current[ee];Z&&(Z.focus(),Z.scrollIntoView({block:"nearest",behavior:"smooth"}))},[]),X=F.useCallback(ee=>{const Z=B.current[ee];if(!Z)return[];const oe=['button:not([disabled]):not([aria-hidden="true"])','a[href]:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','select:not([disabled]):not([aria-hidden="true"])','textarea:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])','.healthcare-card__detail[tabindex]:not([tabindex="-1"])',".healthcare-card__action:not([disabled])",".tag:not([disabled])"].join(", "),ae=Z.querySelectorAll(oe);return Array.from(ae).map((A,K)=>({id:A.id||`card-${ee}-element-${K}`,element:A,label:A.getAttribute("aria-label")||A.textContent?.trim()||A.getAttribute("title")||`Element ${K+1}`,type:A.tagName.toLowerCase()==="button"?"button":A.tagName.toLowerCase()==="a"?"link":["input","select","textarea"].includes(A.tagName.toLowerCase())?"input":"generic"}))},[]),ie=F.useRef(null),te=F.useCallback(ee=>{const Z=ie.current;if(!Z)return;const oe=document.createElement("div");oe.setAttribute("aria-live","polite"),oe.setAttribute("aria-atomic","true"),oe.className="sr-only",oe.textContent=ee,Z.appendChild(oe),setTimeout(()=>{Z.contains(oe)&&Z.removeChild(oe)},1e3)},[]),Y=F.useCallback(ee=>{const Z=ee.filter(ae=>ae.sortable!==!1),oe=[{value:"",label:"Sort by..."}];return Z.forEach(ae=>{const A=ae.label||ae.key;ae.key==="name"?oe.push({value:`${ae.key}-asc`,label:`${A} (A-Z)`},{value:`${ae.key}-desc`,label:`${A} (Z-A)`}):ae.key==="ews_score"||ae.key.includes("score")?oe.push({value:`${ae.key}-desc`,label:`${A} (High-Low)`},{value:`${ae.key}-asc`,label:`${A} (Low-High)`}):ae.key==="age"||ae.key.includes("date")||ae.key.includes("time")?oe.push({value:`${ae.key}-desc`,label:`${A} (Oldest-Youngest)`},{value:`${ae.key}-asc`,label:`${A} (Youngest-Oldest)`}):oe.push({value:`${ae.key}-asc`,label:`${A} (A-Z)`},{value:`${ae.key}-desc`,label:`${A} (Z-A)`})}),oe},[]),G=F.useCallback((ee,Z)=>Z?[...ee].sort((oe,ae)=>{const A=oe[Z.key],K=ae[Z.key];if(A==null&&K==null)return 0;if(A==null)return 1;if(K==null)return-1;const ce=Number(A),re=Number(K);if(!isNaN(ce)&&!isNaN(re))return Z.direction==="asc"?ce-re:re-ce;const J=String(A).toLowerCase(),de=String(K).toLowerCase(),Se=J.localeCompare(de);return Z.direction==="asc"?Se:-Se}):ee,[]),q=F.useCallback(ee=>{if(!ee){H(J=>({...J,cardSortConfig:null})),te("Card sorting cleared");return}const[Z,oe]=ee.split("-"),ae={key:Z,direction:oe};H(J=>({...J,cardSortConfig:ae}));const ce=c[j.selectedIndex]?.columns.find(J=>J.key===Z)?.label||Z;te(`Cards sorted by ${ce} in ${oe==="asc"?"ascending":"descending"} order`)},[c,j.selectedIndex,te]),ue=F.useCallback(ee=>{const ae=c[j.selectedIndex]?.columns.find(K=>K.key===ee.key)?.label||ee.key,A=ee.direction==="asc"?"ascending":"descending";return`${ae} (${A})`},[c,j.selectedIndex]),U=F.useCallback(ee=>{const Z=c[j.selectedIndex];if(a){const oe=j.sortConfig;return!oe||oe.length===0?ee:[...ee].sort((ae,A)=>{for(const{key:K,direction:ce}of oe){let re=ae[K],J=A[K];const de=Z?.columns.find(Me=>Me.key===K);if(de?.cardRenderer?(re=de.cardRenderer(ae),J=de.cardRenderer(A)):de?.render&&(re=de.render(ae),J=de.render(A)),re==null&&J==null)continue;if(re==null)return ce==="asc"?-1:1;if(J==null)return ce==="asc"?1:-1;const Se=Number(re),Ce=Number(J);if(!isNaN(Se)&&!isNaN(Ce)){const Me=Se-Ce;if(Me!==0)return ce==="asc"?Me:-Me;continue}const je=String(re).toLowerCase(),Ne=String(J).toLowerCase(),xe=je.localeCompare(Ne);if(xe!==0)return ce==="asc"?xe:-xe}return 0})}else return G(ee,k.cardSortConfig)},[a,j.sortConfig,k.cardSortConfig,G,c,j.selectedIndex]),le=F.useCallback((ee,Z)=>{const oe=X(ee),ae=oe[Z];if(ae){ae.element.scrollIntoView({block:"nearest",behavior:"smooth"});const A=`Focused on ${ae.label}, ${ae.type} ${Z+1} of ${oe.length} within card`;te(A)}},[X,te]),se=F.useCallback(ee=>{S.current[ee]?.focus()},[]),he=F.useCallback(()=>{const ee=P.current[0];if(!ee)return[];const Z=['select:not([disabled]):not([aria-hidden="true"])','button:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])'].join(", "),oe=ee.querySelectorAll(Z);return Array.from(oe)},[]),ne=F.useCallback(ee=>{if(ee===0){const Z=P.current[0],oe=Z?.querySelector(".sort-controls-row");if(oe){oe.setAttribute("tabindex","-1"),oe.focus();const A=`Sort controls group with ${he().length} interactive elements. Press Enter or Space to begin navigating controls.`;te(A)}else Z&&Z.focus()}else{const Z=he(),oe=ee-1,ae=Z[oe];if(ae){ae.focus();const A=ae.tagName.toLowerCase()==="select",K=ae.tagName.toLowerCase()==="button",ce=A?"dropdown":K?"button":"control",re=A?". Use Space key to open dropdown":"",J=`${ce} ${oe+1} of ${Z.length}${re}`;te(J)}}},[he,te]),fe=F.useCallback((ee,Z)=>{const{key:oe}=ee,ae=c[j.selectedIndex],A=ae?.data.length||0;if(oe==="ArrowLeft"&&ee.shiftKey){ee.preventDefault(),ee.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(oe==="ArrowRight"&&ee.shiftKey){ee.preventDefault(),ee.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!k.isCardNavigationActive){switch(oe){case"ArrowUp":if(ee.preventDefault(),Z===0)H(J=>({...J,focusArea:"sort-controls",focusedSortControlIndex:0,isSortControlsActive:!1})),ne(0);else{const J=W(Z,"up",A,k.gridColumns);J!==Z&&(H(de=>({...de,focusedCardIndex:J})),L(J),te(`Moved to card ${J+1} of ${A}`))}break;case"ArrowDown":ee.preventDefault();const K=W(Z,"down",A,k.gridColumns);K!==Z&&(H(J=>({...J,focusedCardIndex:K})),L(K),te(`Moved to card ${K+1} of ${A}`));break;case"ArrowLeft":ee.preventDefault();const ce=W(Z,"left",A,k.gridColumns);ce!==Z?(H(J=>({...J,focusedCardIndex:ce})),L(ce),te(`Moved to card ${ce+1} of ${A}`)):j.selectedIndex>0&&(x({type:"SET_SELECTED_INDEX",payload:j.selectedIndex-1}),H(J=>({...J,focusArea:"tabs"})),setTimeout(()=>se(j.selectedIndex-1),0));break;case"ArrowRight":ee.preventDefault();const re=W(Z,"right",A,k.gridColumns);re!==Z?(H(J=>({...J,focusedCardIndex:re})),L(re),te(`Moved to card ${re+1} of ${A}`)):j.selectedIndex<c.length-1&&(x({type:"SET_SELECTED_INDEX",payload:j.selectedIndex+1}),H(J=>({...J,focusArea:"tabs"})),setTimeout(()=>se(j.selectedIndex+1),0));break;case"Enter":if(ae?.data[Z]){ee.preventDefault(),H(de=>({...de,selectedCardIndex:Z}));const J=X(Z);J.length>0?(H(de=>({...de,focusArea:"card",isCardNavigationActive:!0,focusedCardElementIndex:0,cardElements:J,selectedCardIndex:Z})),te(`Card ${Z+1} selected and navigation activated. ${J.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`)):te(`Card ${Z+1} selected.`)}break;case" ":if(ae?.data[Z]){ee.preventDefault(),H(de=>({...de,selectedCardIndex:de.selectedCardIndex===Z?-1:Z}));const J=k.selectedCardIndex===Z;te(`Card ${Z+1} ${J?"deselected":"selected"}.`)}break}return}switch(oe){case"ArrowUp":case"ArrowLeft":ee.preventDefault();const K=Math.max(0,k.focusedCardElementIndex-1);H(de=>({...de,focusedCardElementIndex:K})),le(Z,K);break;case"ArrowDown":case"ArrowRight":ee.preventDefault();const ce=Math.min(k.cardElements.length-1,k.focusedCardElementIndex+1);H(de=>({...de,focusedCardElementIndex:ce})),le(Z,ce);break;case"Enter":ee.preventDefault();const re=k.cardElements[k.focusedCardElementIndex];re&&(re.element.click(),te(`Activated ${re.label}`));break;case" ":ee.preventDefault();const J=k.cardElements[k.focusedCardElementIndex];if(J){const de=new MouseEvent("dblclick",{bubbles:!0});J.element.dispatchEvent(de),te(`Double-clicked ${J.label}`)}break;case"Escape":ee.preventDefault(),H(de=>({...de,focusArea:"cards",isCardNavigationActive:!1,focusedCardElementIndex:0,cardElements:[]})),setTimeout(()=>L(Z),0),te("Exited card navigation, returned to card level");break;case"Home":ee.preventDefault(),k.cardElements.length>0&&(H(de=>({...de,focusedCardElementIndex:0})),le(Z,0));break;case"End":if(ee.preventDefault(),k.cardElements.length>0){const de=k.cardElements.length-1;H(Se=>({...Se,focusedCardElementIndex:de})),le(Z,de)}break}},[k,j.selectedIndex,c,E,L,se,H,X,le,te]),pe=F.useCallback(ee=>{const Z=S.current[ee],oe=Z?.parentElement;if(!Z||!oe){console.log("Tab or container not found for mobile scroll");return}const ae=Z.getBoundingClientRect(),A=oe.getBoundingClientRect();ae.left>=A.left&&ae.right<=A.right||(console.log("Tab not visible, scrolling into view (mobile)"),Z.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[]),ve=F.useCallback((ee,Z)=>{if(v!=="cards")return;const{key:oe}=ee;switch(oe){case"ArrowLeft":ee.preventDefault();const ae=Z>0?Z-1:c.length-1;R(ae),H(re=>({...re,focusedTabIndex:ae})),S.current[ae]?.focus(),pe(ae);break;case"ArrowRight":ee.preventDefault();const A=Z<c.length-1?Z+1:0;R(A),H(re=>({...re,focusedTabIndex:A})),S.current[A]?.focus(),pe(A);break;case"ArrowDown":ee.preventDefault();const K=c[j.selectedIndex];K&&K.columns&&K.columns.length>0?(H(re=>({...re,focusArea:"sort-controls",focusedSortControlIndex:0})),ne(0)):(H(re=>({...re,focusArea:"cards",focusedCardIndex:0})),L(0));break;case"Home":ee.preventDefault(),R(0),H(re=>({...re,focusedTabIndex:0})),S.current[0]?.focus(),pe(0);break;case"End":ee.preventDefault();const ce=c.length-1;R(ce),H(re=>({...re,focusedTabIndex:ce})),S.current[ce]?.focus(),pe(ce);break;case"Enter":case" ":ee.preventDefault(),R(Z);break}},[c.length,R,v,L,H,pe]),me=F.useCallback((ee,Z)=>{if(v!=="cards")return;const{key:oe}=ee,ae=c[j.selectedIndex];if(Z===0&&!k.isSortControlsActive){switch(oe){case"ArrowUp":ee.preventDefault(),H(K=>({...K,focusArea:"tabs",isSortControlsActive:!1})),se(j.selectedIndex);break;case"ArrowDown":ee.preventDefault(),ae?.data&&ae.data.length>0&&(H(K=>({...K,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),L(0));break;case"Enter":case" ":ee.preventDefault();const A=he();if(A.length>0){H(ce=>({...ce,isSortControlsActive:!0,focusedSortControlIndex:1})),ne(1);const K=`Entered sort controls navigation mode. ${A.length} controls available. Use arrow keys to navigate between controls.`;te(K)}break;case"Escape":ee.preventDefault(),H(K=>({...K,isSortControlsActive:!1,focusArea:"tabs"})),se(j.selectedIndex);break}return}if(k.isSortControlsActive){const K=he().length;switch(oe){case"ArrowLeft":ee.preventDefault();const ce=k.focusedSortControlIndex>1?k.focusedSortControlIndex-1:K;H(J=>({...J,focusedSortControlIndex:ce})),ne(ce);break;case"ArrowRight":ee.preventDefault();const re=k.focusedSortControlIndex<K?k.focusedSortControlIndex+1:1;H(J=>({...J,focusedSortControlIndex:re})),ne(re);break;case"ArrowDown":if(ee.preventDefault(),k.isSortControlsActive){const J=k.focusedSortControlIndex<K?k.focusedSortControlIndex+1:1;H(de=>({...de,focusedSortControlIndex:J})),ne(J)}else ae?.data&&ae.data.length>0&&(H(J=>({...J,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),L(0));break;case"ArrowUp":ee.preventDefault(),H(J=>({...J,isSortControlsActive:!1,focusArea:"sort-controls"})),ne(0);break;case"Escape":ee.preventDefault(),H(J=>({...J,isSortControlsActive:!1,focusArea:"sort-controls",focusedSortControlIndex:0})),ne(0);break}}},[v,c,j.selectedIndex,k.isSortControlsActive,k.focusedSortControlIndex,ne,se,L,H,te]);if(v==="cards"){const ee=c[j.selectedIndex];return s.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${M||""}`,children:[s.jsxs("div",{className:"aria-tabs-datagrid-adaptive__header",children:[s.jsx("div",{role:"tablist","aria-label":g,"aria-describedby":`${y||""} ${m?`${m}-navigation-help`:""}`.trim(),"aria-orientation":f,className:"aria-tabs-datagrid__tabs",children:c.map((Z,oe)=>{const ae=oe===j.selectedIndex,A=Z.disabled||I;return s.jsxs("button",{role:"tab",id:`tab-${Z.id}`,"aria-controls":`panel-${Z.id}`,"aria-selected":ae,"aria-disabled":A,tabIndex:ae?0:-1,ref:K=>{S.current[oe]=K},onClick:()=>R(oe),onKeyDown:K=>ve(K,oe),disabled:A,className:["aria-tabs-datagrid__tab",ae?"aria-tabs-datagrid__tab--selected":"",A?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[s.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:Z.label}),j.tabLoadingStates[oe]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),j.tabErrors[oe]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},Z.id)})}),i&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions",children:i})]}),ee&&ee.columns&&s.jsx(s.Fragment,{children:a?s.jsx(pu,{sortConfig:j.sortConfig||[],columns:ee.columns.map(Z=>({key:Z.key,label:Z.label})),onSortChange:Z=>{x({type:"SET_SORT",payload:Z})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls"}):s.jsx("div",{className:"aria-tabs-datagrid-adaptive__sort-controls",role:"region","aria-label":"Sort controls",tabIndex:k.focusArea==="sort-controls"?0:-1,ref:Z=>{P.current[0]=Z},onKeyDown:Z=>me(Z,0),children:s.jsxs("div",{className:"sort-controls-row",children:[s.jsxs("div",{className:"sort-select-container",children:[s.jsx("label",{htmlFor:`card-sort-${ee.id}`,className:"sort-label",children:"Sort cards by"}),s.jsx(Cr,{id:`card-sort-${ee.id}`,name:`card-sort-${ee.id}`,value:k.cardSortConfig?`${k.cardSortConfig.key}-${k.cardSortConfig.direction}`:"",onChange:Z=>q(Z.target.value),className:"sort-select",children:Y(ee.columns).map(Z=>s.jsx("option",{value:Z.value,children:Z.label},Z.value))})]}),k.cardSortConfig&&s.jsxs("div",{className:"sort-indicator",role:"status","aria-live":"polite",children:[s.jsxs("span",{className:"sort-indicator-text",children:["Sorted by ",ue(k.cardSortConfig)]}),s.jsx(nt,{variant:"secondary",size:"small",onClick:()=>q(""),"aria-label":"Clear card sorting",className:"sort-clear-button",children:"Clear"})]})]})})}),s.jsx("div",{ref:$,className:"aria-tabs-datagrid-adaptive__cards",role:"grid","aria-label":`${ee?.label||"Data"} cards in ${k.gridRows} rows and ${k.gridColumns} columns`,"aria-rowcount":k.gridRows,"aria-colcount":k.gridColumns,id:`panel-${ee?.id}`,"aria-labelledby":`tab-${ee?.id}`,children:U(ee?.data||[]).map((Z,oe)=>{const ae=k.selectedCardIndex===oe,A=k.focusedCardIndex===oe&&k.focusArea==="cards",K=k.focusedCardIndex===oe&&k.focusArea==="card"&&k.isCardNavigationActive,ce=oe===0&&k.focusArea!=="cards",re=A||ce,J=O(oe,k.gridColumns);if(n.cardTemplate){const Ce=n.cardTemplate(Z,ee.columns);return s.jsx("div",{role:"row","aria-rowindex":J.row+1,className:"aria-tabs-datagrid-adaptive__row",children:s.jsx("div",{ref:je=>{B.current[oe]=je},className:["aria-tabs-datagrid-adaptive__card-wrapper",ae?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",A?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",K?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":J.col+1,"aria-selected":ae,"aria-expanded":K,"aria-description":K?`Card navigation active. ${k.cardElements.length} interactive elements available.`:void 0,tabIndex:re?0:-1,onClick:()=>{H(je=>({...je,selectedCardIndex:je.selectedCardIndex===oe?-1:oe})),E(Z)},onKeyDown:je=>fe(je,oe),onFocus:()=>{H(je=>je.focusedCardIndex!==oe||je.focusArea!=="cards"?{...je,focusedCardIndex:oe,focusArea:"cards"}:je)},children:Ce})},`card-${oe}`)}const de=ly(Z,ee.columns,N,_),Se=[de.className||"",ae?"aria-tabs-datagrid-adaptive__card--selected":"",A?"aria-tabs-datagrid-adaptive__card--focused":"",K?"aria-tabs-datagrid-adaptive__card--card-navigation":""].filter(Boolean).join(" ");return s.jsx("div",{role:"row","aria-rowindex":J.row+1,className:"aria-tabs-datagrid-adaptive__row",children:s.jsx("div",{className:["aria-tabs-datagrid-adaptive__card-wrapper",ae?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",A?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",K?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":J.col+1,"aria-selected":ae,"aria-expanded":K,onKeyDown:Ce=>{Ce.key==="Enter"&&(Ce.preventDefault(),H(je=>({...je,selectedCardIndex:oe}))),fe(Ce,oe)},children:s.jsx(Ns,{...de,ref:Ce=>{B.current[oe]=Ce},className:Se,"aria-label":`${de["aria-label"]||de.heading}. ${K?`Card navigation active with ${k.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.`:"Press Enter to navigate within card elements."}`,tabIndex:re?0:-1,onClick:()=>{H(Ce=>({...Ce,selectedCardIndex:Ce.selectedCardIndex===oe?-1:oe})),E(Z)},onKeyDown:Ce=>fe(Ce,oe),onFocus:()=>{k.isCardNavigationActive||H(Ce=>Ce.focusedCardIndex!==oe||Ce.focusArea!=="cards"?{...Ce,focusedCardIndex:oe,focusArea:"cards",focusedCardElementIndex:0,cardElements:[]}:Ce)}})})},`card-${oe}`)})}),o&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o}),s.jsx("div",{ref:ie,className:"aria-tabs-datagrid-adaptive__announcements","aria-hidden":"true",style:{position:"fixed",top:"-1px",left:"-1px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0,padding:0,margin:0}})]})}return v==="hybrid"?s.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${M||""}`,children:[i&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:i}),s.jsx(ti,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:y,orientation:f,id:m,disabled:I,selectedIndex:h,onTabChange:p,className:"aria-tabs-datagrid-adaptive__table--hybrid",actions:l,forceActionsAbove:u,...C}),o&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o})]}):s.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${M||""}`,children:[i&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:i}),s.jsx(ti,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:y,orientation:f,id:m,disabled:I,selectedIndex:h,onTabChange:p,actions:l,forceActionsAbove:u,...C}),o&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o})]})},Su=t=>{const e=Ds.find(n=>n.value===t);return e?e.icon:null},cy={ecommerce:{name:"E-commerce",description:"Product catalogs with pricing, inventory, and ratings",dataConfig:{dataComparator:(t,e)=>t.id===e.id,filterFunction:(t,e)=>e?t.filter(n=>{if(e.priceRange){const[r,a]=e.priceRange,i=n.discountedPrice||n.price;if(i<r||i>a)return!1}return!(e.categories&&e.categories.length>0&&!e.categories.includes(n.category)||e.inStock!==void 0&&n.inStock!==e.inStock||e.minRating!==void 0&&n.rating<e.minRating||e.tags&&e.tags.length>0&&!e.tags.some(r=>n.tags.includes(r)))}):t,booleanRenderer:t=>Su(t),getDataId:t=>`ecommerce-${t.id}`},createTabs:t=>ri(t,[{id:"all-products",label:"All Products",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Price",render:n=>n.discountedPrice?`$${n.price.toFixed(2)} â†’ $${n.discountedPrice.toFixed(2)}`:`$${n.price.toFixed(2)}`},{key:"inStock",label:"Availability"},{key:"category",label:"Category"},{key:"rating",label:"Rating",render:n=>`${n.rating}/5 (${n.reviews} reviews)`}],ariaLabel:"All Products Grid",ariaDescription:"Complete product catalog with pricing and availability"},{id:"on-sale",label:"On Sale",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Original Price",render:n=>`$${n.price.toFixed(2)}`},{key:"discountedPrice",label:"Sale Price",render:n=>`$${n.discountedPrice?.toFixed(2)||"N/A"}`},{key:"discount",label:"Discount",render:n=>n.discountedPrice?`${((n.price-n.discountedPrice)/n.price*100).toFixed(0)}% OFF`:"N/A"}],filter:n=>n.filter(r=>r.discountedPrice!==void 0),ariaLabel:"Sale Products Grid",ariaDescription:"Products currently on sale with discounted pricing"},{id:"high-rated",label:"Top Rated",columns:[{key:"name",label:"Product Name"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.rating>=4),sortConfig:[{key:"rating",direction:"desc"}],ariaLabel:"Top Rated Products Grid",ariaDescription:"Highest rated products with 4+ star ratings"}])},financial:{name:"Financial",description:"Transaction data with amounts, categories, and statuses",dataConfig:{dataComparator:(t,e)=>t.id===e.id,filterFunction:(t,e)=>e?t.filter(n=>{if(e.dateRange){const[r,a]=e.dateRange;if(n.date<r||n.date>a)return!1}if(e.amountRange){const[r,a]=e.amountRange;if(Math.abs(n.amount)<r||Math.abs(n.amount)>a)return!1}return!(e.types&&e.types.length>0&&!e.types.includes(n.type)||e.categories&&e.categories.length>0&&!e.categories.includes(n.category)||e.pending!==void 0&&n.pending!==e.pending)}):t,booleanRenderer:t=>Su(t),getDataId:t=>`financial-${t.id}`},createTabs:t=>ri(t,[{id:"all-transactions",label:"All Transactions",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"},{key:"pending",label:"Status"}],sortConfig:[{key:"date",direction:"desc"}],ariaLabel:"All Transactions Grid",ariaDescription:"Complete transaction history with amounts and categories"},{id:"credits",label:"Credits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`+$${n.amount.toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="credit"),ariaLabel:"Credit Transactions Grid",ariaDescription:"Incoming payments and credits only"},{id:"debits",label:"Debits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`-$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="debit"),ariaLabel:"Debit Transactions Grid",ariaDescription:"Outgoing payments and charges only"},{id:"pending",label:"Pending",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"type",label:"Type"}],filter:n=>n.filter(r=>r.pending),ariaLabel:"Pending Transactions Grid",ariaDescription:"Transactions awaiting processing"}])}},ku=(t,e)=>{const n=cy[t];return{dataConfig:n.dataConfig,tabPanels:n.createTabs(e)}},Cu=[{name:"Sarah Johnson",age:34,ews_data:{respiratory_rate_bpm:16,sp02:98,temperature:36.8,systolic_bp:140,heart_rate:82,avpu:"alert"},ews_score:3,ward_name:"Cardiology",room_name:"Room A",bed_name:"A-1",bed_type:"bed",admin_note:"Hypertension monitoring",pathway:"Standard",speciality:"Cardiology",consultant:"Dr. Smith",local_authority:"NHS Trust",early_discharge_notification:"not_required",needs_based_assessment:!1,medically_optimised:!0,criteria_to_reside:!0,date_medically_optimised:"2024-01-15",anticipated_discharge_date:"2024-01-18",dru_suitability:!1,optica_planned_discharge_date:"2024-01-18",optica_date_confirmed:"2024-01-16",dsum:null,medications_tta:"None required",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!1,initial_therapy_contact:"",equipment:"None",district_nurse_referral:!1},{name:"Michael Chen",age:67,ews_data:{respiratory_rate_bpm:20,sp02:94,temperature:37.2,systolic_bp:160,heart_rate:95,avpu:"alert"},ews_score:7,ward_name:"Surgery",room_name:"Room B",bed_name:"B-3",bed_type:"bed",admin_note:"Post-operative monitoring",pathway:"Surgical",speciality:"General Surgery",consultant:"Dr. Johnson",local_authority:"NHS Trust",early_discharge_notification:"due",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!0,date_medically_optimised:"2024-01-17",anticipated_discharge_date:"2024-01-20",dru_suitability:!0,optica_planned_discharge_date:"2024-01-20",optica_date_confirmed:"2024-01-16",dsum:"Complex discharge",medications_tta:"Pain management",transport_booking:!0,transport_status:"In Progress",transport_date:"2024-01-20",transport_mobility:"Wheelchair",fast_track:!1,initial_therapy_contact:"2024-01-17",equipment:"Walking frame",district_nurse_referral:!0},{name:"Emma Thompson",age:28,ews_data:{respiratory_rate_bpm:24,sp02:90,temperature:38.5,systolic_bp:110,heart_rate:105,avpu:"alert"},ews_score:5,ward_name:"Respiratory",room_name:"Room C",bed_name:"C-2",bed_type:"bed",admin_note:"Pneumonia treatment",pathway:"Respiratory",speciality:"Respiratory Medicine",consultant:"Dr. Williams",local_authority:"NHS Trust",early_discharge_notification:"overdue",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!1,date_medically_optimised:"",anticipated_discharge_date:"2024-01-22",dru_suitability:!1,optica_planned_discharge_date:"2024-01-22",optica_date_confirmed:"",dsum:null,medications_tta:"Antibiotics",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!0,initial_therapy_contact:"",equipment:"Oxygen",district_nurse_referral:!1}],uy=[{id:"appt-001",appointment_time:"2024-01-18T09:00:00Z",patient_name:"Sarah Johnson",appointment_type:"Cardiology Consultation",consultant:"Dr. Smith",location:"Clinic Room 3",duration:30,status:"pending"},{id:"appt-002",appointment_time:"2024-01-18T10:30:00Z",patient_name:"Michael Davis",appointment_type:"Post-op Follow-up",consultant:"Dr. Johnson",location:"Surgery Ward",duration:15,status:"active"},{id:"appt-003",appointment_time:"2024-01-18T14:00:00Z",patient_name:"Emma Thompson",appointment_type:"Respiratory Assessment",consultant:"Dr. Wilson",location:"Emergency Department",duration:45,status:"pending"}],dy=[{id:"med-001",medication:"Amlodipine",dose:"5mg",frequency:"Once daily",route:"Oral",next_due:"2024-01-18T08:00:00Z",prescriber:"Dr. Smith",patient_name:"Sarah Johnson",allergies:null,priority:"medium"},{id:"med-002",medication:"Morphine",dose:"10mg",frequency:"Every 4 hours",route:"IV",next_due:"2024-01-18T10:00:00Z",prescriber:"Dr. Johnson",patient_name:"Michael Davis",allergies:"Codeine allergy",priority:"high"},{id:"med-003",medication:"Salbutamol",dose:"2 puffs",frequency:"As needed",route:"Inhaled",next_due:"2024-01-18T12:00:00Z",prescriber:"Dr. Wilson",patient_name:"Emma Thompson",allergies:null,priority:"high"}],fy=[{id:"vitals-001",patient_name:"Sarah Johnson",recorded_time:"2024-01-18T07:30:00Z",temperature:36.8,blood_pressure:"140/90",heart_rate:82,respiratory_rate:16,oxygen_saturation:98,ews_score:3,priority:"medium"},{id:"vitals-002",patient_name:"Michael Davis",recorded_time:"2024-01-18T08:15:00Z",temperature:37.2,blood_pressure:"130/85",heart_rate:98,respiratory_rate:20,oxygen_saturation:95,ews_score:7,priority:"high"},{id:"vitals-003",patient_name:"Emma Thompson",recorded_time:"2024-01-18T09:00:00Z",temperature:38.5,blood_pressure:"110/70",heart_rate:105,respiratory_rate:24,oxygen_saturation:90,ews_score:9,priority:"high"}],Tu=[{id:"PROD001",name:"Wireless Headphones",price:199.99,discountedPrice:149.99,inStock:!0,category:"Electronics",rating:4.5,reviews:1247,tags:["wireless","bluetooth","premium"]},{id:"PROD002",name:"Running Shoes",price:129.99,inStock:!0,category:"Sports",rating:4.8,reviews:892,tags:["running","athletic","comfortable"]},{id:"PROD003",name:"Coffee Maker",price:89.99,discountedPrice:59.99,inStock:!1,category:"Kitchen",rating:4.2,reviews:456,tags:["kitchen","coffee","appliance"]},{id:"PROD004",name:"Smartphone Case",price:24.99,inStock:!0,category:"Accessories",rating:4,reviews:234,tags:["protection","mobile","durable"]}],Nu=[{id:"TXN001",date:new Date("2024-01-15"),amount:2500,type:"credit",category:"Salary",description:"Monthly salary payment",accountId:"ACC001",pending:!1,recurring:!0},{id:"TXN002",date:new Date("2024-01-14"),amount:89.5,type:"debit",category:"Groceries",description:"Supermarket shopping",accountId:"ACC001",pending:!1,recurring:!1},{id:"TXN003",date:new Date("2024-01-16"),amount:1200,type:"debit",category:"Rent",description:"Monthly rent payment",accountId:"ACC001",pending:!0,recurring:!0},{id:"TXN004",date:new Date("2024-01-13"),amount:150,type:"credit",category:"Refund",description:"Product return refund",accountId:"ACC001",pending:!1,recurring:!1}],ju=[{id:"LEAD001",companyName:"Tech Solutions Inc",contactPerson:"John Smith",email:"john@techsolutions.com",status:"qualified",value:5e4,lastContact:new Date("2024-01-15"),source:"Website",isHotLead:!0},{id:"LEAD002",companyName:"Global Industries",contactPerson:"Maria Garcia",email:"maria@globalind.com",status:"contacted",value:25e3,lastContact:new Date("2024-01-14"),source:"Referral",isHotLead:!1},{id:"LEAD003",companyName:"StartupXYZ",contactPerson:"Alex Johnson",email:"alex@startupxyz.com",status:"new",value:15e3,lastContact:new Date("2024-01-16"),source:"Cold Call",isHotLead:!0}],hy={dataComparator:(t,e)=>t.id===e.id,filterFunction:(t,e)=>e?t.filter(n=>!(e.status&&!e.status.includes(n.status)||e.minValue&&n.value<e.minValue||e.hotLeadsOnly&&!n.isHotLead)):t,booleanRenderer:t=>s.jsx("span",{style:{color:t?"#dc2626":"#6b7280",fontWeight:t?"bold":"normal"},children:t?"ðŸ”¥ Hot Lead":"ðŸ“‹ Standard"}),getDataId:t=>`business-${t.id}`},my=()=>[{id:"patients",label:"Patients",data:Cu,columns:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Records",ariaDescription:"Healthcare patient management with EWS monitoring",cardTemplate:(t,e)=>s.jsx(Ms,{data:t,columns:e,onSelect:n=>console.log("Selected patient:",n),onAction:(n,r)=>console.log("Patient action:",n,r),priority:t.ews_score>=7?"high":t.ews_score>=3?"medium":"low"})},{id:"appointments",label:"Appointments",data:uy,columns:[{key:"appointment_time",label:"Time"},{key:"patient_name",label:"Patient"},{key:"appointment_type",label:"Type"},{key:"consultant",label:"Consultant"}],ariaLabel:"Patient Appointments",ariaDescription:"Scheduled appointments and consultations",cardTemplate:(t,e)=>s.jsx($s,{data:t,columns:e,onSelect:n=>console.log("Selected appointment:",n),onAction:(n,r)=>console.log("Appointment action:",n,r),status:t.status})},{id:"medications",label:"Medications",data:dy,columns:[{key:"medication",label:"Medication"},{key:"dose",label:"Dose"},{key:"frequency",label:"Frequency"},{key:"next_due",label:"Next Due"}],ariaLabel:"Patient Medications",ariaDescription:"Medication administration and scheduling",cardTemplate:(t,e)=>s.jsx(Is,{data:t,columns:e,onSelect:n=>console.log("Selected medication:",n),onAction:(n,r)=>console.log("Medication action:",n,r),priority:t.priority})},{id:"vitals",label:"Vital Signs",data:fy,columns:[{key:"patient_name",label:"Patient"},{key:"recorded_time",label:"Time"},{key:"temperature",label:"Temperature"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Vital Signs",ariaDescription:"Patient vital signs monitoring and EWS scores",cardTemplate:(t,e)=>s.jsx(Ps,{data:t,columns:e,onSelect:n=>console.log("Selected vitals:",n),onAction:(n,r)=>console.log("Vitals action:",n,r),priority:t.ews_score>=7?"high":t.ews_score>=3?"medium":"low"})}],py=()=>{const[t,e]=F.useState("healthcare"),n=F.useMemo(()=>({healthcare:{title:"Healthcare Workflow Management",description:"Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals",dataConfig:gu,tabPanels:my(),data:Cu},ecommerce:{title:"E-commerce Product Catalog",description:"Product management with pricing and inventory",...ku("ecommerce",Tu),data:Tu},financial:{title:"Financial Transaction Dashboard",description:"Banking and financial data management",...ku("financial",Nu),data:Nu},business:{title:"Sales Lead Management",description:"Custom CRM configuration with business logic",dataConfig:hy,tabPanels:ri(ju,[{id:"all-leads",label:"All Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"status",label:"Status"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"isHotLead",label:"Priority"}],ariaLabel:"All Sales Leads Grid",ariaDescription:"Complete sales pipeline with lead information"},{id:"hot-leads",label:"Hot Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"lastContact",label:"Last Contact",render:a=>a.lastContact.toLocaleDateString()}],filter:a=>a.filter(i=>i.isHotLead),sortConfig:[{key:"value",direction:"desc"}],ariaLabel:"Hot Leads Grid",ariaDescription:"High-priority leads requiring immediate attention"},{id:"pipeline",label:"Active Pipeline",columns:[{key:"companyName",label:"Company"},{key:"status",label:"Status"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"source",label:"Source"}],filter:a=>a.filter(i=>["contacted","qualified"].includes(i.status)),ariaLabel:"Active Pipeline Grid",ariaDescription:"Leads currently in the sales pipeline"}]),data:ju}}),[]),r=n[t];return s.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[s.jsxs("div",{style:{marginBottom:"2rem"},children:[s.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"AriaTabsDataGrid - Comprehensive Demo"}),s.jsx("p",{style:{fontSize:"1.1rem",color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:"This demo showcases the component's versatility across different domains: healthcare, e-commerce, financial services, and custom business applications. Each configuration demonstrates domain-specific data operations, custom renderers, and specialized filtering logic."}),s.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:Object.keys(n).map(a=>s.jsx(nt,{variant:t===a?"primary":"secondary",onClick:()=>e(a),style:{textTransform:"capitalize"},children:a},a))}),s.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem"},children:[s.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"0.5rem",color:"#1e293b"},children:r.title}),s.jsx("p",{style:{color:"#64748b",marginBottom:"1rem"},children:r.description}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.9rem"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Data Records:"})," ",r.data.length]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Tab Panels:"})," ",r.tabPanels.length]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Features:"})," ",["Row Selection","Custom Filtering","Domain-Specific Renderers","Keyboard Navigation","ARIA Compliance"].join(", ")]})]})]})]}),s.jsx(ti,{dataConfig:r.dataConfig,tabPanels:r.tabPanels,ariaLabel:`${r.title} Data Grid`,ariaDescription:`Interactive data grid for ${r.description.toLowerCase()}`}),s.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f1f5f9",borderRadius:"0.5rem",border:"1px solid #cbd5e1"},children:[s.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#334155"},children:"Implementation Details"}),s.jsxs("div",{style:{display:"grid",gap:"1rem",fontSize:"0.9rem"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Current Mode:"})," ",t," configuration"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Data Operations:"})," Custom comparator, filter function, and boolean renderer"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Architecture:"})," Generic core with domain-specific plugins and factory helpers"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"State Management:"})," Global row selection with data-object persistence"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Accessibility:"})," Full ARIA support with dynamic labels and descriptions"]})]})]})]})},Fs=t=>s.jsx(es,{...t}),gy=({children:t,pageTitle:e,pageHeadingProps:n,columnWidth:r="two-thirds",mainWrapperSize:a,skipLinkProps:i,headerProps:o,footerProps:l,service:u,navigation:c,search:d,account:h,organisation:p,logo:g,className:y,...f})=>{const m={service:u,navigation:c,search:d,account:h,organisation:p,logo:g,...o};return s.jsxs(s.Fragment,{children:[s.jsx(Ts,{...i}),s.jsx(Ba,{...m}),s.jsx(Fs,{className:y,...f,children:s.jsx(ts,{size:a,children:s.jsx(pn,{children:s.jsxs(Zn,{width:r,children:[e&&s.jsx(Ft,{size:"l",...n,children:e}),t]})})})}),s.jsx(rs,{...l})]})},by=({children:t,pageTitle:e,pageHeadingProps:n,columnWidth:r="two-thirds",mainWrapperSize:a="small",skipLinkProps:i,headerProps:o,footerProps:l,backLinkProps:u,serviceName:c,serviceHref:d,logo:h,className:p,...g})=>{const y={service:{text:c,href:d},logo:h,navigation:void 0,search:void 0,account:void 0,...o};return s.jsxs(s.Fragment,{children:[s.jsx(Ts,{...i}),s.jsx(Ba,{...y}),s.jsxs(Fs,{className:p,...g,children:[u&&s.jsx($a,{...u}),s.jsx(ts,{size:a,children:s.jsx(pn,{children:s.jsxs(Zn,{width:r,children:[e&&s.jsx(Ft,{size:"l",...n,children:e}),t]})})})]}),s.jsx(rs,{...l})]})},Du=({text:t="Next",html:e,href:n="#",className:r,element:a="a",onClick:i,...o})=>{const l=ye("nhsuk-back-link",r),u=ye("nhsuk-back-link__link"),c=()=>s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[e?s.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t,s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:s.jsx("path",{d:"M15.5 12c0 .3-.1.5-.3.7l-5 5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4L13.1 12 8.8 7.7c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l5 5c.2.2.3.4.3.7z"})})]});return s.jsx("div",{className:l,children:a==="button"?s.jsx("button",{className:u,type:"button",onClick:i,...o,children:c()}):s.jsx("a",{className:u,href:n,...o,children:c()})})};Du.displayName="ForwardLink";const ir=Object.freeze({small:320,smallMax:767,medium:768,large:1025,xlarge:1200,xxlarge:1440});function Mu(){return typeof window>"u"?ir.small:window.innerWidth||document.documentElement.clientWidth||0}function Bs(){const[t,e]=V.useState(Mu());V.useEffect(()=>{if(typeof window>"u")return;const i=()=>e(Mu());return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const n=V.useCallback(i=>t>=ir[i],[t]),r=V.useCallback(i=>t<ir[i],[t]),a=V.useCallback((i,o)=>t>=ir[i]&&t<ir[o],[t]);return{width:t,up:n,down:r,between:a,values:ir}}function _y(t){const{width:e,values:n}=Bs();let r=t.base;const a=["small","medium","large","xlarge","xxlarge"];for(const i of a){const o=n[i];e>=o&&t[i]!==void 0&&(r=t[i])}return r}function $u(t={}){const{enabled:e=!0,paramSelected:n="nsv",paramDrill:r="nsvDrill"}=t,[a,i]=V.useState(()=>typeof window>"u"||!e?void 0:new URLSearchParams(window.location.search).get(n)),[o,l]=V.useState(()=>typeof window>"u"||!e?!1:new URLSearchParams(window.location.search).get(r)==="1");return V.useEffect(()=>{if(!e||typeof window>"u")return;const u=new URLSearchParams(window.location.search);a?u.set(n,String(a)):u.delete(n),u.set(r,o?"1":"0");const c=`${window.location.pathname}?${u.toString()}${window.location.hash}`;window.history.replaceState(null,"",c)},[a,o,e,n,r]),{selectedId:a,setSelectedId:i,drilledIn:o,setDrilledIn:l}}const yy=({className:t})=>s.jsx("svg",{className:t,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M10.7 3.3a1 1 0 0 1 0 1.4L7.41 8l3.3 3.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 0Z"})}),xy=({className:t})=>s.jsx("svg",{className:t,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M5.3 12.7a1 1 0 0 1 0-1.4L8.59 8l-3.3-3.3a1 1 0 0 1 1.42-1.4l4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.42 0Z"})});function Iu(t){const{items:e,selectedId:n,defaultSelectedId:r,onSelectionChange:a,renderItemContent:i,renderContent:o,renderSecondaryContent:l,forceLayout:u,animated:c=!0,backLabel:d="Back",nextLabel:h="Next",isLoading:p=!1,emptyState:g,a11y:y,className:f,getId:m=ge=>ge.id,orientation:I="vertical",autoEnableThirdColumn:M=!0,onDrillChange:C,navigationInstructions:v="Use arrow keys to navigate, Enter to open.",initialFocus:D="first",skipFocusOnSelect:T=!1,skipAnnouncements:N=!1,onFocusChange:_,syncUrl:w=!1,urlParamSelected:j="nsv",urlParamDrill:x="nsvDrill",urlSyncDebounceMs:S=0,lazySecondary:B=!1,navFooter:P,collapsibleNav:$=!1,navInitiallyCollapsed:k=!1,onNavCollapseChange:H,collapseToggleLabelShow:Q="Show navigation",collapseToggleLabelHide:O="Hide navigation",collapseToggleIconShow:z,collapseToggleIconHide:W,persistNavCollapsed:R,navCollapsedStorageKey:E="nsvCollapsed",navCollapsedUrlParam:L="nsvCollapsed",autoContentHeader:X,contentHeaderLevel:ie=2,renderContentHeader:te,contentSubheader:Y,secondarySubheader:G}=t,{up:q}=Bs(),[ue,U]=V.useState(!1);V.useEffect(()=>{U(!0)},[]);const le=ue&&q("medium"),se=ue&&q("xlarge");let he;u?he=u:le?he="two-column":he="list",!u&&M&&l&&se&&(he="three-column");const ne=$u({enabled:w,paramSelected:j,paramDrill:x}),[fe,pe]=V.useState(()=>ne.selectedId!==void 0?ne.selectedId:r),ve=n!==void 0?n:fe,me=e.find(ge=>m(ge)===ve),[ee,Z]=V.useState(void 0);V.useEffect(()=>{if(ve===void 0)return;Z(ve);const ge=setTimeout(()=>Z(void 0),220);return()=>clearTimeout(ge)},[ve]);const oe=V.useRef(null),ae=V.useRef(null),A=V.useRef(null),K=V.useRef(null),[ce,re]=V.useState(()=>({contentIndex:0,secondaryIndex:0})),[J,de]=V.useState(()=>"nav"),[Se,Ce]=V.useState(0),je=()=>[K.current,ae.current,A.current].filter(Boolean),Ne=ge=>{const we=je(),_e=Math.max(0,Math.min(ge,we.length-1));we[_e]?.focus(),Ce(_e)},xe=V.useCallback(ge=>ge?Array.from(ge.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(_e=>!_e.hasAttribute("disabled")&&_e.tabIndex!==-1):[],[]),Me=V.useCallback(ge=>{const we=xe(ae.current);if(!we.length){ae.current?.focus();return}const _e=Math.max(0,Math.min(ge,we.length-1)),Te=we[_e];Te.focus(),setTimeout(()=>{document.activeElement!==Te&&(Te.focus(),setTimeout(()=>{document.activeElement!==Te&&Te.click()},10))},10),re(Ee=>({...Ee,contentIndex:_e}));const Ge=Ee=>{Ee.key==="Escape"&&(Ee.preventDefault(),Ee.stopPropagation(),ae.current?.focus(),Te.removeEventListener("keydown",Ge))};we.forEach(Ee=>{const Re=Ee._escapeHandler;Re&&Ee.removeEventListener("keydown",Re)}),Te._escapeHandler=Ge,Te.addEventListener("keydown",Ge)},[xe]),Be=V.useCallback(ge=>{const we=xe(A.current);if(!we.length){A.current?.focus();return}const _e=Math.max(0,Math.min(ge,we.length-1)),Te=we[_e];Te.focus(),setTimeout(()=>{document.activeElement!==Te&&(Te.focus(),setTimeout(()=>{document.activeElement!==Te&&Te.click()},10))},10),re(Ee=>({...Ee,secondaryIndex:_e}));const Ge=Ee=>{Ee.key==="Escape"&&(Ee.preventDefault(),Ee.stopPropagation(),A.current?.focus(),Te.removeEventListener("keydown",Ge))};we.forEach(Ee=>{const Re=Ee._escapeHandler;Re&&Ee.removeEventListener("keydown",Re)}),Te._escapeHandler=Ge,Te.addEventListener("keydown",Ge)},[xe]),Qe=ge=>{if(ge.defaultPrevented)return;const we=ge.key,_e=ge.target,Te=!!ct.current&&ct.current.contains(_e),Ge=!!ae.current&&ae.current.contains(_e),Ee=!!A.current&&A.current.contains(_e),Re=!!A.current,wr=_e===K.current||_e===ae.current||_e===A.current,Kn=Ae&&(he==="list"||he==="cards"),Ki=Ge&&!!_e.closest(".nhs-navigation-split-view__header");if(J==="containers"&&wr){if(we==="ArrowRight"){ge.preventDefault();const De=je(),ze=Math.min(De.length-1,Se+1);Ne(ze);return}if(we==="ArrowLeft"){ge.preventDefault();const De=Math.max(0,Se-1);Ne(De);return}if(we==="Home"){ge.preventDefault(),Ne(0);return}if(we==="End"){ge.preventDefault(),Ne(je().length-1);return}if(we==="Enter"||we===" "){if(ge.preventDefault(),_e===K.current){if(de("nav"),ct.current){const De=Array.from(ct.current.querySelectorAll("[data-nav-item]"));(De[Ze>=0?Ze:0]||De[0])?.focus()}}else _e===ae.current?(de("content"),Me(ce.contentIndex)):_e===A.current&&(de("secondary"),Be(ce.secondaryIndex));return}return}if(we==="Escape"){if(J==="content"||J==="secondary"){if(Ge||Ee){if(ge.preventDefault(),de("nav"),ct.current){const ze=Array.from(ct.current.querySelectorAll("[data-nav-item]"))[Ze>=0?Ze:0];setTimeout(()=>ze?.focus(),10)}}else if((_e===ae.current||_e===A.current)&&(ge.preventDefault(),de("nav"),ct.current)){const ze=Array.from(ct.current.querySelectorAll("[data-nav-item]"))[Ze>=0?Ze:0];setTimeout(()=>ze?.focus(),10)}}return}if(we==="Enter"||we===" "){if(_e.matches('button, a, input, select, textarea, [role="button"], [role="link"], [role="tab"]'))return;if(_e===ae.current&&J==="content"){ge.preventDefault(),ge.stopPropagation(),xe(ae.current).length>0&&setTimeout(()=>{Me(ce.contentIndex)},50);return}if(_e===A.current&&J==="secondary"){ge.preventDefault(),ge.stopPropagation(),xe(A.current).length>0&&setTimeout(()=>{Be(ce.secondaryIndex)},50);return}}if(Kn&&Ki&&!wr&&(we==="ArrowRight"||we==="ArrowLeft")){const De=xe(ae.current).filter(ze=>ze.closest(".nhs-navigation-split-view__header"));if(De.length>1){const ze=De.indexOf(_e);if(ze>=0){const xg=(ze+(we==="ArrowRight"?1:-1)+De.length)%De.length;ge.preventDefault(),De[xg].focus();return}}}if(we==="ArrowRight"){if(Te||J==="nav"){ge.preventDefault(),de("content"),setTimeout(()=>ae.current?.focus(),10);return}if(Ge||J==="content"){Re&&(ge.preventDefault(),de("secondary"),setTimeout(()=>A.current?.focus(),10));return}}if(we==="ArrowLeft"){if(Ee||J==="secondary"){ge.preventDefault(),de("content"),setTimeout(()=>ae.current?.focus(),10);return}if(Ge||J==="content"){if(ge.preventDefault(),de("nav"),ct.current){const ze=Array.from(ct.current.querySelectorAll("[data-nav-item]"))[Ze>=0?Ze:0];setTimeout(()=>ze?.focus(),10)}return}}if(we==="Home"&&!Te&&(ge.preventDefault(),de("nav"),ct.current)){const De=Array.from(ct.current.querySelectorAll("[data-nav-item]")),ze=De[Ze>=0?Ze:0]||De[0];setTimeout(()=>ze?.focus(),10)}if(we==="End"){const De=Re?A.current:ae.current;De&&!De.contains(_e)&&(ge.preventDefault(),Re?(de("secondary"),setTimeout(()=>A.current?.focus(),10)):(de("content"),setTimeout(()=>ae.current?.focus(),10)))}if(we==="ArrowDown"||we==="ArrowUp"){if(_e===ae.current&&we==="ArrowDown"){ge.preventDefault(),xe(ae.current).length>0&&Me(0);return}if(_e===A.current&&we==="ArrowDown"){ge.preventDefault(),xe(A.current).length>0&&Be(0);return}if(Ge){const De=xe(ae.current);if(De.length){ge.preventDefault();const ze=we==="ArrowDown"?1:-1,nn=(ce.contentIndex+ze+De.length)%De.length;Me(nn)}}else if(Ee){const De=xe(A.current);if(De.length){ge.preventDefault();const ze=we==="ArrowDown"?1:-1,nn=(ce.secondaryIndex+ze+De.length)%De.length;Be(nn)}}}},Ae=!!me&&(he==="list"||he==="cards"),mt=V.useMemo(()=>X===void 0?{mobile:!0,tablet:!1,desktop:!1}:X===!0?{mobile:!0,tablet:!0,desktop:!0}:X===!1?{mobile:!1,tablet:!1,desktop:!1}:{mobile:X.mobile!==void 0?X.mobile:!0,tablet:X.tablet||!1,desktop:X.desktop||!1},[X]),Dn=ue&&q("medium")&&!q("xlarge"),fn=ue&&q("xlarge"),en=!!l,tt=he==="three-column",[st,ja]=V.useState(!1);V.useEffect(()=>{tt&&st&&ja(!1)},[tt,st]),V.useEffect(()=>{st&&!tt&&(de("secondary"),Ce(2),setTimeout(()=>{A.current?.focus()},50))},[st,tt]),V.useEffect(()=>{!st&&!tt&&J==="secondary"&&(de("content"),Ce(1),setTimeout(()=>{ae.current?.focus()},50))},[st,tt,J]);const Ol=!!me&&(Ae&&mt.mobile||!Ae&&Dn&&mt.tablet||!Ae&&fn&&mt.desktop)||en&&!tt,G1=`h${ie}`,Wl=me?V.createElement(G1,{style:{marginLeft:Ae?32:0,marginRight:Ae?32:0}},me.label):null,_g=Ae?"mobile":Dn?"tablet":"desktop",Y1=en&&!tt&&!st,Ul=Ae&&mt.mobile?s.jsx($a,{element:"button",text:d,style:{marginRight:16},onClick:()=>vr(void 0,void 0)}):void 0,Gl=Y1?s.jsx(Du,{element:"button",text:h,onClick:()=>{ja(!0)}}):void 0,Yl=!tt&&st?s.jsx($a,{element:"button",text:d,style:{marginRight:16},onClick:()=>ja(!1)}):void 0,V1=V.useMemo(()=>{if(!Ol||!me)return null;if(te)return te({item:me,detailActive:Ae,context:_g,backLink:Ul,defaultHeading:Wl});const ge=me&&Y?typeof Y=="function"?Y(me):Y:null;return s.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[Yl||Ul,s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:[Wl,ge&&s.jsx("div",{className:"nhs-navigation-split-view__subheader",children:ge})]})]}),Gl&&s.jsx("div",{style:{marginLeft:"auto"},children:Gl})]})},[Ol,me,te,Ae,_g,Ul,Yl,Wl,Gl,Y]);V.useEffect(()=>{if(!w)return;const ge=he==="three-column";let we=!1;const _e=()=>{we||(ne.selectedId!==ve&&ne.setSelectedId(ve),ne.drilledIn!==ge&&ne.setDrilledIn(ge))};if(S&&S>0){const Te=setTimeout(_e,S);return()=>{we=!0,clearTimeout(Te)}}else _e()},[w,ne,ve,he,S]),V.useEffect(()=>{if(!w)return;const ge=()=>{const we=new URLSearchParams(window.location.search),_e=we.get(j);we.get(x),pe(_e===null?void 0:_e)};return window.addEventListener("popstate",ge),()=>window.removeEventListener("popstate",ge)},[w,j,x,u,l]);const Xi=V.useRef(0),hn=V.useRef(null),vr=V.useCallback((ge,we)=>{ge!==ve&&(n===void 0&&pe(ge),a?.(ge,we))},[n,a,ve]);V.useEffect(()=>{if(!T&&Ae&&ae.current){const ge=setTimeout(()=>ae.current?.focus(),30);return()=>clearTimeout(ge)}},[Ae,ve,T]);const ct=V.useRef(null),[Ze,Da]=V.useState(()=>D==="first"?0:-1);V.useEffect(()=>{if(Ze<0||!ct.current)return;const we=Array.from(ct.current.querySelectorAll("[data-nav-item]"))[Ze];if(we){document.activeElement!==we&&we.focus(),Xi.current=Ze;const _e=e[Ze];_?.(_e?m(_e):void 0,_e,Ze)}},[Ze,e,_,m]);const q1=ge=>{const we=I==="vertical"?"ArrowDown":"ArrowRight",_e=I==="vertical"?"ArrowUp":"ArrowLeft";if(ge.key==="ArrowRight"&&I==="vertical"){ge.preventDefault(),st?(de("secondary"),setTimeout(()=>{A.current?.focus()},10)):(de("content"),setTimeout(()=>{ae.current?.focus()},10));return}if(ge.key===we)ge.preventDefault(),Da(Te=>Math.min(e.length-1,Te+1));else if(ge.key===_e)ge.preventDefault(),Da(Te=>Math.max(0,Te-1));else if(ge.key==="Home")ge.preventDefault(),Da(0);else if(ge.key==="End")ge.preventDefault(),Da(e.length-1);else if(ge.key==="Enter"||ge.key===" "){ge.preventDefault();const Te=e[Ze];Te&&!Te.disabled&&vr(m(Te),Te)}else if(ge.key.length===1&&/[a-z0-9]/i.test(ge.key)){hn.current||(hn.current={buffer:"",last:0});const Te=Date.now(),Ge=700,Ee=ge.key.toLowerCase();Te-hn.current.last>Ge?hn.current.buffer=Ee:hn.current.buffer+=Ee,hn.current.last=Te;let Re=hn.current.buffer;const wr=Re.split("").every(nn=>nn===Re[0]),Kn=e.map(nn=>String(nn.label||"").toLowerCase());let Ki=0;Ze>=0&&(Ki=(Ze+1)%e.length);let De;const ze=(nn,xg)=>{const vg=e.length;for(let Xl=0;Xl<vg;Xl++){const Kl=(Ki+Xl)%vg;if(!e[Kl].disabled&&Kn[Kl].startsWith(nn))return Kl}};wr&&Re.length>1?De=ze(Re[0]):(De=ze(Re),De===void 0&&Re.length>1&&(De=ze(Re[Re.length-1]),De!==void 0&&hn.current&&(hn.current.buffer=Re[Re.length-1]))),De!==void 0&&Da(De)}},X1=V.useMemo(()=>{if(R&&(R==="url"||R==="both")&&typeof window<"u"){const we=new URLSearchParams(window.location.search).get(L);if(we==="1")return!0;if(we==="0")return!1}if(R&&(R==="localStorage"||R==="both")&&typeof window<"u")try{const ge=window.localStorage.getItem(E);if(ge==="1")return!0;if(ge==="0")return!1}catch{}return k},[R,k,E,L]),[tn,K1]=V.useState(X1);V.useEffect(()=>{H?.(tn)},[tn,H]);const Z1=V.useCallback(()=>{le&&$&&K1(ge=>!ge)},[le,$]);V.useEffect(()=>{if(R&&!(typeof window>"u")){if(R==="localStorage"||R==="both")try{window.localStorage.setItem(E,tn?"1":"0")}catch{}if(R==="url"||R==="both"){const ge=new URLSearchParams(window.location.search);ge.set(L,tn?"1":"0");const we=`${window.location.pathname}?${ge.toString()}${window.location.hash}`;window.history.replaceState(null,"",we)}}},[tn,R,E,L]);const J1=["nhs-navigation-split-view",c?"nhs-navigation-split-view--animated":"",Ae?"nhs-navigation-split-view--detail-active":"",he==="three-column"?"nhs-navigation-split-view--three-column":"",$&&le&&tn?"nhs-navigation-split-view--nav-collapsed":"",f].filter(Boolean).join(" "),Vl=V.useRef(null);V.useEffect(()=>{if(!N&&Vl.current){const ge=me?`Selected ${me.label}`:"Selection cleared";Vl.current.textContent=ge}},[me,N]),V.useEffect(()=>{!Ae&&ve==null&&ct.current&&ct.current.querySelectorAll("[data-nav-item]")[Xi.current]?.focus()},[Ae,ve]);const Mn=he==="three-column",[ql,Q1]=V.useState(!1);V.useEffect(()=>{Mn&&!ql&&Q1(!0)},[Mn,ql]);const yg=V.useRef(Mn);V.useEffect(()=>{yg.current!==Mn&&(C?.(Mn),yg.current=Mn)},[Mn,C]);const ew=()=>{if(he==="cards")return s.jsxs("ul",{className:"nhs-navigation-split-view__cards",role:"listbox","aria-activedescendant":ve?String(ve):void 0,children:[e.map(_e=>{const Te=m(_e),Ge=Te===ve;return s.jsx("li",{className:"nhs-navigation-split-view__card-item",role:"option","aria-selected":Ge,children:s.jsxs("button",{id:String(Te),type:"button",className:"nhs-navigation-split-view__card","data-selected":Ge||void 0,"data-disabled":_e.disabled||void 0,disabled:_e.disabled,onClick:()=>!_e.disabled&&vr(Te,_e),children:[_e.icon&&s.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:_e.icon}),s.jsx("span",{className:"nhs-navigation-split-view__item-label",children:_e.label}),_e.description&&s.jsx("span",{className:"nhs-navigation-split-view__item-description",children:_e.description}),i?.(_e),_e.badge!==void 0&&s.jsx("span",{className:"nhs-navigation-split-view__badge",children:_e.badge})]})},Te)}),e.length===0&&!p&&s.jsx("li",{className:"nhs-navigation-split-view__card-item","aria-disabled":"true",children:g||s.jsx("div",{style:{padding:16},children:"No items"})})]});const ge="nsv-nav-instructions",we=V.useMemo(()=>V.memo(({item:_e,idx:Te,selected:Ge,focused:Ee})=>{const Re=m(_e),wr=_e.disabled?{"aria-disabled":!0,tabIndex:-1}:{tabIndex:Ee?0:-1,onClick:()=>{Xi.current=Te,vr(Re,_e)},onKeyDown:Kn=>{(Kn.key==="Enter"||Kn.key===" ")&&(Kn.preventDefault(),Xi.current=Te,vr(Re,_e))}};return s.jsxs("li",{id:String(Re),"data-nav-item":!0,className:"nhs-navigation-split-view__list-item nhs-navigation-split-view__item-button",role:"option","aria-selected":Ge,"aria-current":Ge?"true":void 0,"data-selected":Ge||void 0,"data-disabled":_e.disabled||void 0,...wr,children:[_e.icon&&s.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:_e.icon}),s.jsxs("span",{className:"nhs-navigation-split-view__item-content",children:[s.jsx("span",{className:"nhs-navigation-split-view__item-label",children:_e.label}),_e.description&&s.jsx("span",{className:"nhs-navigation-split-view__item-description",children:_e.description}),i?.(_e)]}),_e.badge!==void 0&&s.jsx("span",{className:"nhs-navigation-split-view__badge",children:_e.badge})]})}),[m,vr,i]);return s.jsxs(s.Fragment,{children:[s.jsxs("ul",{ref:ct,className:"nhs-navigation-split-view__list",onKeyDown:q1,role:"listbox","aria-label":"Navigation items","aria-describedby":ge,"aria-activedescendant":ve?String(ve):void 0,children:[e.map((_e,Te)=>s.jsx(we,{item:_e,idx:Te,selected:m(_e)===ve,focused:Te===Ze||Ze===-1&&Te===0&&D==="first","data-just-selected":m(_e)===ee?"true":void 0},m(_e))),e.length===0&&!p&&s.jsx("li",{className:"nhs-navigation-split-view__list-item","aria-disabled":"true",children:g||s.jsx("div",{style:{padding:16},children:"No items"})})]}),s.jsx("div",{id:ge,style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:v})]})};return s.jsx("div",{ref:oe,className:J1,"aria-label":y?.rootLabel,"data-layout":he,onKeyDown:Qe,children:s.jsxs("div",{className:"nhs-navigation-split-view__body",children:[s.jsxs("div",{className:"nhs-navigation-split-view__panes","data-active-detail":Ae||void 0,style:{transform:Ae?"translateX(-100%)":void 0},children:[s.jsxs("div",{ref:K,className:"nhs-navigation-split-view__nav-pane",role:"navigation","aria-label":y?.navigationLabel||"Items","data-collapsed":tn||void 0,tabIndex:0,children:[$&&le&&s.jsx("div",{className:"nhs-navigation-split-view__nav-collapse",children:s.jsx("button",{type:"button",onClick:Z1,className:"nhs-navigation-split-view__nav-collapse-btn","aria-label":tn?Q:O,title:tn?Q:O,children:tn?z||s.jsx(xy,{}):W||s.jsx(yy,{})})}),s.jsx("div",{className:"nhs-navigation-split-view__nav-scroll",children:ew()}),P&&s.jsx("div",{className:"nhs-navigation-split-view__nav-footer",role:"contentinfo",children:P})]}),s.jsxs("div",{ref:ae,className:"nhs-navigation-split-view__content-pane",role:"region","aria-label":y?.contentLabel||"Content","data-has-selection":!!me||void 0,tabIndex:0,style:{display:st&&!tt?"none":void 0},children:[Ol&&s.jsx("div",{className:"nhs-navigation-split-view__header",children:V1}),s.jsx("div",{className:"nhs-navigation-split-view__content-inner",style:{padding:32,flex:1},children:o(me)})]}),he==="three-column"&&(!B||ql)||st&&!tt?s.jsx("div",{ref:A,className:"nhs-navigation-split-view__secondary-pane",role:"region","aria-label":y?.secondaryContentLabel||"Secondary",tabIndex:0,children:s.jsxs("div",{className:"nhs-navigation-split-view__secondary-inner",style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[st&&!tt&&s.jsx("div",{className:"nhs-navigation-split-view__header",children:s.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[Yl,s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:s.jsx("h2",{style:{marginLeft:0,marginRight:0},children:me&&typeof me=="object"&&"label"in me?me.label:String(me)})})]})})}),me&&G&&s.jsx("div",{className:"nhs-navigation-split-view__secondary-header",style:{padding:"16px 32px",borderBottom:"1px solid var(--nsplit-divider)"},children:typeof G=="function"?G(me):G}),s.jsx("div",{style:{padding:32,flex:1,minWidth:0},children:l?.(me)})]})}):null]}),s.jsx("div",{ref:Vl,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"}}),s.jsx("div",{"aria-live":"polite",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:Mn?"Expanded to three column layout":"In two column layout"})]})})}Iu.displayName="NavigationSplitView";const Pu=(t,e,n,r)=>t==null||Number.isNaN(t)?r:Math.min(n,Math.max(e,t)),vy=({item:t,maxLines:e,enableDrilldown:n,onExpand:r,isActive:a,topLaneIndex:i})=>{const{ariaLabel:o}=t,l=`${t._pxLeft}px`,u=`${t._pxWidth}px`,c=`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${i})`,d=Math.floor(t._startFraction)+2,h=Math.max(1,Math.round(t._spanColumns)),p=n&&t.childItems&&t.childItems.length>0,g=f=>{p&&(f.preventDefault(),r?.(t))},y=p?{role:"button",tabIndex:0,"aria-haspopup":"dialog","aria-expanded":a||!1,onClick:g,onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&g(f),f.key==="Escape"&&a&&g(f)}}:{};return s.jsxs("div",{className:ye("nhsuk-product-roadmap__item",p&&"nhsuk-product-roadmap__item--expandable",a&&"nhsuk-product-roadmap__item--active"),style:{left:l,width:u,top:c,"--item-height":e},role:"gridcell","aria-label":o,"aria-colindex":d,"aria-colspan":h,...y,children:[s.jsx("div",{className:"nhsuk-product-roadmap__item-bg","aria-hidden":"true"}),s.jsxs("div",{className:"nhsuk-product-roadmap__item-content",children:[s.jsx("span",{className:"nhsuk-product-roadmap__item-title",children:t.title}),p&&s.jsx("span",{className:ye("nhsuk-product-roadmap__item-expander",a&&"nhsuk-product-roadmap__item-expander--open"),"aria-hidden":"true"})]})]})},Lu=F.memo(({dateHeadings:t,categories:e,columnWidthPx:n=400,itemMaxLines:r=2,className:a,ariaLabel:i="Product roadmap",enableDrilldown:o=!1,onToggleItem:l,drilldownMode:u="overlay",...c})=>{const[d,h]=F.useState(()=>new Set),[p,g]=F.useState(()=>new Set),y=F.useRef(new Set),f=F.useCallback(S=>d.has(S),[d]),m=F.useCallback(S=>{h(B=>{const P=new Set(B);return P.has(S.id)?(P.delete(S.id),g($=>{const k=new Set($);return k.add(S.id),k}),setTimeout(()=>g($=>{const k=new Set($);return k.delete(S.id),k}),240),l?.(S.id,!1)):(P.add(S.id),l?.(S.id,!0)),P})},[l]);F.useLayoutEffect(()=>{if(u!=="inline"||!o)return;const S=[];if(d.forEach(k=>{y.current.has(k)||S.push(k)}),y.current=new Set(d),!S.length)return;const B=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,P=S.map(k=>`.nhsuk-product-roadmap__inline-children[data-parent="${k}"] .nhsuk-product-roadmap__inline-child`).join(","),$=Array.from(document.querySelectorAll(P));if($.length){if(B){$.forEach(k=>{k.style.opacity="1",k.style.transform="translateY(0)"});return}Promise.resolve().then(()=>U1).then(k=>{(k.gsap||k.default||k).to($,{opacity:1,y:0,duration:.32,ease:"power2.out",stagger:.05})}).catch(()=>{$.forEach(k=>{k.style.opacity="1",k.style.transform="translateY(0)"})})}},[d,u,o]);const I=F.useCallback(()=>{d.size&&h(new Set)},[d]),M=ye("nhsuk-product-roadmap",a),C=Pu(n,120,1200,400),v=Pu(r,1,6,2),D=F.useMemo(()=>t.map(S=>new Date(S+" 01")),[t]),T=F.useMemo(()=>{if(D.length===0){const P=new Date;return[P,P]}const S=new Date(D[0]),B=$r.offset(new Date(D[D.length-1]),1);return[S,B]},[D]),N=F.useMemo(()=>Cs().domain(T).range([0,D.length*C]),[T,D.length,C]),_=F.useCallback(S=>{if(S.startDate){const O=new Date(S.startDate),z=new Date(S.endDate??S.startDate);z<O&&z.setTime(O.getTime());const W=N(O),R=$r.offset(new Date(z),1);let E=N(R);Number.isFinite(E)||(E=W+C);const L=Math.max(C*.25,E-W),X=W/C,ie=L/C;return{...S,_pxLeft:W,_pxWidth:L,_startFraction:X,_spanColumns:ie}}const B=S.date??1,P=S.dateOffset??0,$=S.length??1,k=S.partialLength??1,H=B-1+P,Q=$-1+k;return{...S,_pxLeft:H*C,_pxWidth:Q*C,_startFraction:H,_spanColumns:Q}},[N,C]),w=F.useMemo(()=>e.map(S=>{const P=S.roadmapItems.map(k=>{const H=!k.childItems&&k.children?{...k,childItems:k.children}:{...k};return _(H)}).sort((k,H)=>k._pxLeft!==H._pxLeft?k._pxLeft-H._pxLeft:H._pxWidth-k._pxWidth),$=[];return P.forEach(k=>{const H=k._pxLeft,Q=k._pxLeft+k._pxWidth;let O=$.findIndex(z=>z<=H);O===-1&&(O=$.length,$.push(0)),$[O]=Q,k.verticalPosition=O+1}),{...S,roadmapItems:P,_laneCount:$.length}}),[e,_]),j=F.useMemo(()=>w.map(S=>S._laneCount||1),[w]),x=F.useMemo(()=>`var(--category-width) ${t.map(()=>"var(--column-width)").join(" ")}`,[t]);return s.jsxs("div",{className:M,style:{"--column-width":`${C}px`,gridTemplateColumns:x},role:"grid","aria-label":i,"aria-colcount":t.length+1,"aria-rowcount":w.length+1,...c,children:[s.jsxs("div",{className:"nhsuk-product-roadmap__header-row",role:"row","aria-rowindex":1,children:[s.jsx("div",{className:"nhsuk-product-roadmap__header-cell",role:"columnheader","aria-colindex":1,children:s.jsx("span",{className:"nhsuk-visually-hidden",children:"Category"})}),t.map((S,B)=>s.jsx("div",{className:"nhsuk-product-roadmap__date-heading",role:"columnheader","aria-colindex":B+2,children:S},S+B))]}),w.map((S,B)=>{const P=B+2,$=j[B];let k,H=0,Q=[];o&&u==="inline"&&(Q=S.roadmapItems.filter(R=>f(R.id)&&R.childItems&&R.childItems.length).map(R=>({id:R.id,lane:R.verticalPosition||1,count:R.childItems.length})).sort((R,E)=>R.lane-E.lane),H=Q.reduce((R,E)=>R+E.count,0));const O=$+H;k=`calc((${O} * var(--roadmap-item-block-height)) + (max(0, ${O} - 1) * var(--roadmap-row-gap)))`;const z={};let W=0;return Q.forEach(R=>{W+=R.count,z[R.lane+1]=W}),s.jsxs("div",{className:"nhsuk-product-roadmap__row",role:"row","aria-rowindex":P,children:[s.jsx("div",{className:"nhsuk-product-roadmap__category-cell",role:"rowheader","aria-colindex":1,children:S.heading}),s.jsx("div",{className:"nhsuk-product-roadmap__items-row",style:{gridColumn:`2 / span ${t.length}`,height:k},children:s.jsx("div",{className:"nhsuk-product-roadmap__items-layer",children:S.roadmapItems.map(R=>{const E=(R.verticalPosition||1)-1,L=Q.filter(Y=>Y.lane-1<E).reduce((Y,G)=>Y+G.count,0),X=E+L,ie=f(R.id),te=p.has(R.id);return s.jsxs(F.Fragment,{children:[s.jsx(vy,{item:R,maxLines:v,enableDrilldown:o,onExpand:m,isActive:ie,topLaneIndex:X,laneOffset:L}),o&&u==="inline"&&(ie||te)&&R.childItems&&s.jsx("div",{"data-parent":R.id,className:"nhsuk-product-roadmap__inline-children","aria-label":`${R.title} child tasks`,children:R.childItems.map((Y,G)=>{const q="calc(var(--roadmap-item-block-height) * 0.75)";let ue=R._pxLeft,U=R._pxWidth;if(Y.startDate){const he=new Date(Y.startDate);let ne=Y.endDate?new Date(Y.endDate):new Date(he);ne<he&&(ne=new Date(he));const fe=new Date(ne);fe.setDate(fe.getDate()+1);const pe=N(he);let ve=N(fe);(!Number.isFinite(ve)||ve<=pe)&&(ve=pe+6),ue=pe,U=Math.max(6,ve-pe)}const se=X+1+G;return s.jsxs("div",{className:ye("nhsuk-product-roadmap__inline-child",Y.status&&`nhsuk-product-roadmap__inline-child--status-${Y.status}`,!ie&&te&&"nhsuk-product-roadmap__inline-child--collapsing"),style:{left:`${ue}px`,width:`${U}px`,top:`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${se})`,height:q,opacity:ie?0:void 0,transform:ie?"translateY(-6px)":void 0},children:[s.jsx("div",{className:"nhsuk-product-roadmap__inline-child-bg"}),s.jsx("div",{className:"nhsuk-product-roadmap__inline-child-content",children:Y.title})]},Y.id)})})]},R.id)})})})]},S.heading+B)}),o&&u==="overlay"&&d.size===1&&(()=>{const S=Array.from(d)[0],B=e.flatMap(P=>P.roadmapItems).find(P=>P.id===S);return!B||!B.childItems?null:s.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-overlay",role:"dialog","aria-modal":"true","aria-label":`${B.title} details`,children:[s.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-panel",children:[s.jsxs("header",{className:"nhsuk-product-roadmap__drilldown-header",children:[s.jsx("h3",{className:"nhsuk-product-roadmap__drilldown-title",children:B.title}),s.jsx("button",{type:"button",className:"nhsuk-product-roadmap__drilldown-close",onClick:I,"aria-label":"Close details",children:"Ã—"})]}),s.jsx("div",{className:"nhsuk-product-roadmap__drilldown-content",children:B.content}),s.jsx("ul",{className:"nhsuk-product-roadmap__drilldown-children",children:B.childItems.map(P=>s.jsxs("li",{className:"nhsuk-product-roadmap__drilldown-child",children:[s.jsx("strong",{className:"nhsuk-product-roadmap__drilldown-child-title",children:P.title}),P.content&&s.jsx("div",{className:"nhsuk-product-roadmap__drilldown-child-content",children:P.content})]},P.id))})]}),s.jsx("div",{className:"nhsuk-product-roadmap__drilldown-backdrop",onClick:I,"aria-hidden":"true"})]})})()]})});Lu.displayName="ProductRoadmap";function Fu(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=Fu(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ai(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=Fu(t))&&(r&&(r+=" "),r+=e);return r}function at(t){return function(){return t}}const As=Math.PI,Es=2*As,Bn=1e-6,wy=Es-Bn;function Bu(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Sy(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Bu;const n=10**e;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class ky{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Bu:Sy(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,a){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(e,n,r,a,i,o){this._append`C${+e},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,n,r,a,i){if(e=+e,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,u=r-e,c=a-n,d=o-e,h=l-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Bn)if(!(Math.abs(h*u-c*d)>Bn)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-o,y=a-l,f=u*u+c*c,m=g*g+y*y,I=Math.sqrt(f),M=Math.sqrt(p),C=i*Math.tan((As-Math.acos((f+p-m)/(2*I*M)))/2),v=C/M,D=C/I;Math.abs(v-1)>Bn&&this._append`L${e+v*d},${n+v*h}`,this._append`A${i},${i},0,0,${+(h*g>d*y)},${this._x1=e+D*u},${this._y1=n+D*c}`}}arc(e,n,r,a,i,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),u=r*Math.sin(a),c=e+l,d=n+u,h=1^o,p=o?a-i:i-a;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Bn||Math.abs(this._y1-d)>Bn)&&this._append`L${c},${d}`,r&&(p<0&&(p=p%Es+Es),p>wy?this._append`A${r},${r},0,1,${h},${e-l},${n-u}A${r},${r},0,1,${h},${this._x1=c},${this._y1=d}`:p>Bn&&this._append`A${r},${r},0,${+(p>=As)},${h},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function Au(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new ky(e)}function Eu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Hu(t){this._context=t}Hu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ru(t){return new Hu(t)}function zu(t){return t[0]}function Ou(t){return t[1]}function Wu(t,e){var n=at(!0),r=null,a=Ru,i=null,o=Au(l);t=typeof t=="function"?t:t===void 0?zu:at(t),e=typeof e=="function"?e:e===void 0?Ou:at(e);function l(u){var c,d=(u=Eu(u)).length,h,p=!1,g;for(r==null&&(i=a(g=o())),c=0;c<=d;++c)!(c<d&&n(h=u[c],c,u))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+t(h,c,u),+e(h,c,u));if(g)return i=null,g+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:at(+u),l):t},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:at(+u),l):e},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:at(!!u),l):n},l.curve=function(u){return arguments.length?(a=u,r!=null&&(i=a(r)),l):a},l.context=function(u){return arguments.length?(u==null?r=i=null:i=a(r=u),l):r},l}function Hs(t,e,n){var r=null,a=at(!0),i=null,o=Ru,l=null,u=Au(c);t=typeof t=="function"?t:t===void 0?zu:at(+t),e=typeof e=="function"?e:at(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Ou:at(+n);function c(h){var p,g,y,f=(h=Eu(h)).length,m,I=!1,M,C=new Array(f),v=new Array(f);for(i==null&&(l=o(M=u())),p=0;p<=f;++p){if(!(p<f&&a(m=h[p],p,h))===I)if(I=!I)g=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=p-1;y>=g;--y)l.point(C[y],v[y]);l.lineEnd(),l.areaEnd()}I&&(C[p]=+t(m,p,h),v[p]=+e(m,p,h),l.point(r?+r(m,p,h):C[p],n?+n(m,p,h):v[p]))}if(M)return l=null,M+""||null}function d(){return Wu().defined(a).curve(o).context(i)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:at(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:at(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:at(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:at(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:at(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:at(+h),c):n},c.lineX0=c.lineY0=function(){return d().x(t).y(e)},c.lineY1=function(){return d().x(t).y(n)},c.lineX1=function(){return d().x(r).y(e)},c.defined=function(h){return arguments.length?(a=typeof h=="function"?h:at(!!h),c):a},c.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),c):o},c.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),c):i},c}function Uu(t){return t<0?-1:1}function Gu(t,e,n){var r=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(r||a<0&&-0),o=(n-t._y1)/(a||r<0&&-0),l=(i*a+o*r)/(r+a);return(Uu(i)+Uu(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function Yu(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Rs(t,e,n){var r=t._x0,a=t._y0,i=t._x1,o=t._y1,l=(i-r)/3;t._context.bezierCurveTo(r+l,a+l*e,i-l,o-l*n,i,o)}function ii(t){this._context=t}ii.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rs(this,this._t0,Yu(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Rs(this,Yu(this,n=Gu(this,t,e)),n);break;default:Rs(this,this._t0,n=Gu(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},Object.create(ii.prototype).point=function(t,e){ii.prototype.point.call(this,e,t)};function si(t){return new ii(t)}function Cy(t,e,n){const r=hc(t,e);return Cs().domain(r).range(n)}function Vu(t,e,n){const[r,a]=hc(t,e);if(!(Number.isFinite(r)&&Number.isFinite(a)))return qa().domain([0,0]).range(n);let o;if(r<=0)o=Math.min(0,r);else{const u=a-r,c=(u>0?u:r)*.1;o=Math.max(0,r-c),o===r&&(o=Math.max(0,r*.9))}const l=a??0;return qa().domain([o,l]).nice().range(n)}function zs(t,e,n,r){const a=Wu().x(e).y(n);return r?.smooth!==!1&&a.curve(si),a(t)??""}function Ty(t={}){const e=V.useRef(null),n=V.useMemo(()=>({top:t.top??16,right:t.right??16,bottom:t.bottom??32,left:t.left??48}),[t.bottom,t.left,t.right,t.top]),[r,a]=V.useState({width:0,height:0});V.useLayoutEffect(()=>{if(!e.current)return;const l=new ResizeObserver(u=>{for(const c of u){const{width:d,height:h}=c.contentRect;a({width:d,height:h})}});return l.observe(e.current),()=>l.disconnect()},[]);const i=Math.max(0,r.width-n.left-n.right),o=Math.max(0,r.height-n.top-n.bottom);return{width:r.width,height:r.height,innerWidth:i,innerHeight:o,margin:n,ref:e}}const qu=V.createContext(null);function gn(){return V.useContext(qu)}const Xu=({height:t=240,margin:e,width:n,className:r="fdp-chart",children:a,role:i="group",ariaLabel:o})=>{const l=Ty(e),u={height:t,position:"relative"};return n!==void 0&&(u.width=typeof n=="number"?`${n}px`:n),s.jsx("div",{ref:l.ref,className:r,style:u,role:i,"aria-label":o,children:s.jsx(qu.Provider,{value:l,children:a})})},Os=V.createContext(null),An=()=>V.useContext(Os),Ku=({series:t,innerWidth:e,innerHeight:n,parseX:r,children:a,xTickCount:i=6,yTickCount:o=5,yDomain:l,xPadding:u,yPadding:c})=>{const d=gn(),h=e??d?.innerWidth??0,p=n??d?.innerHeight??0,g=V.useMemo(()=>t.flatMap(v=>v.data),[t]),y=V.useCallback(v=>{if(r)return r(v);const D=v.x;return D instanceof Date?D:new Date(D)},[r]),f=u??6,m=c??6,I=V.useMemo(()=>Cy(g,y,[f,Math.max(0,h-f)]),[g,y,h,f]),M=V.useMemo(()=>{if(l){const v=Vu([],D=>D.y,[Math.max(0,p-m),m]);return v.domain(l),v}return Vu(g,v=>v.y,[Math.max(0,p-m),m])},[g,p,l]),C=V.useMemo(()=>({xScale:I,yScale:M,getXTicks:(v=i)=>I.ticks(v),getYTicks:(v=o)=>M.ticks(v)}),[I,M,i,o]);return s.jsx(Os.Provider,{value:C,children:a})},Ws=({type:t,scale:e,tickCount:n,tickValues:r,formatTick:a,label:i,offset:o,className:l,minLabelSpacing:u,maxTickLabelLength:c,autoMinLabelSpacing:d=t==="x",labelAngle:h=0,allowLabelWrap:p=!0,tickFormatPreset:g})=>{const y=An(),f=gn(),m=e||(t==="x"?y?.xScale:y?.yScale),I=n??(t==="x"?6:5),M=typeof a=="function",C=V.useMemo(()=>{if(M||!g)return;const T=N=>new Intl.DateTimeFormat(void 0,N);switch(g){case"dayShortMonth":return N=>{const _=N instanceof Date?N:new Date(N);return`${_.getDate()}
${T({month:"short"}).format(_)}`};case"dayShortMonthYear":return N=>{const _=N instanceof Date?N:new Date(N);return`${_.getDate()}
${T({month:"short"}).format(_)} ${_.getFullYear()}`};case"shortMonth":return N=>{const _=N instanceof Date?N:new Date(N);return T({month:"short"}).format(_)};case"shortMonthYear":return N=>{const _=N instanceof Date?N:new Date(N);return`${T({month:"short"}).format(_)} ${_.getFullYear()}`};case"hourMinute":return N=>{const _=N instanceof Date?N:new Date(N);return T({hour:"2-digit",minute:"2-digit"}).format(_)};default:return}},[M,g]);let v=M?a:C||(T=>String(T));const D=V.useMemo(()=>r&&Array.isArray(r)?r:m?typeof m.ticks=="function"?m.ticks(I):m.domain?m.domain():[]:[],[m,I,r]);if(t==="x"&&!M&&!g&&D.length&&D.every(T=>T instanceof Date)){const T=D[0],N=D[D.length-1],_=N.getTime()-T.getTime(),w=24*3600*1e3,j=365*w,x=T.getFullYear()===N.getFullYear(),S=new Intl.DateTimeFormat(void 0,{month:"short"});if(_<2*w){const B=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"});v=P=>B.format(P)}else if(_<32*w)v=B=>{const P=B;return`${P.getDate()} ${S.format(P)}`};else if(_<j&&x)v=B=>S.format(B);else if(_<2*j){const B=new Set;v=P=>{const $=P,k=$.getMonth();return B.has(k)||B.add(k),`${S.format($)} ${$.getFullYear()}`}}else v=B=>String(B.getFullYear())}if(!m||!f)return null;if(t==="x"){const T=o??f.innerHeight,N=typeof m.bandwidth=="function",_=N?m.bandwidth():0,w=S=>{const B=m(S);return N?B+_/2:B};let j=u??0;if(d&&u==null){const S=D.map(P=>v(P).replace(/\n.*/g,"")),B=S.length?S.reduce((P,$)=>P+$.length,0)/S.length:0;j=Math.max(12,Math.round(B*6+4))}const x=V.useMemo(()=>{if(r&&Array.isArray(r)||j<=0)return D;const S=[];let B=-1/0;for(const P of D){const $=w(P);$-B>=j&&(S.push(P),B=$)}return S},[D,m,j,r,N,_]);return s.jsxs("g",{className:["fdp-axis","fdp-axis--x",l].filter(Boolean).join(" "),transform:`translate(0,${T})`,fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[s.jsx("line",{x1:0,x2:f.innerWidth,y1:0,y2:0,stroke:"currentColor"}),x.map((S,B)=>{const P=v(S),$=c&&P.length>c?P.slice(0,Math.max(1,c-1))+"â€¦":P,k=p?$.split(/\n/):[$.replace(/\n/g," ")],H=h<0?"end":h>0?"start":"middle";return s.jsxs("g",{transform:`translate(${w(S)},0)`,children:[s.jsx("line",{y2:6,stroke:"currentColor"}),s.jsxs("text",{y:9,textAnchor:H,className:"fdp-axis__tick",dominantBaseline:"hanging",transform:h?`rotate(${h})`:void 0,fontFamily:"inherit",children:[k.map((Q,O)=>s.jsx("tspan",{x:0,dy:O===0?0:"1.1em",children:Q},O)),$!==P&&s.jsx("title",{children:P})]})]},S?.toString?.()||B)})]})}return s.jsxs("g",{className:["fdp-axis","fdp-axis--y",l].filter(Boolean).join(" "),fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[D.map((T,N)=>{const _=v(T),w=c&&_.length>c?_.slice(0,Math.max(1,c-1))+"â€¦":_,j=p?w.split(/\n/):[w.replace(/\n/g," ")];return s.jsxs("g",{transform:`translate(0,${m(T)})`,children:[s.jsx("line",{x2:-6,stroke:"currentColor"}),s.jsxs("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:[j.map((x,S)=>s.jsx("tspan",{x:-9,dy:S===0?0:"1.1em",children:x},S)),w!==_&&s.jsx("title",{children:_})]})]},T?.toString?.()||N)}),i&&s.jsx("text",{transform:"rotate(-90)",x:-f.innerHeight/2,y:-f.margin.left+12,textAnchor:"middle",className:"fdp-axis__label",fontFamily:"inherit",children:i})]})},Zu=({axis:t="y",tickCount:e,stroke:n="var(--fdp-chart-grid,#e5e5e5)",dasharray:r="2 4",className:a})=>{const i=An(),o=gn();if(!i||!o)return null;const l=t==="y"?i.getYTicks(e):i.getXTicks(e);return s.jsxs("g",{className:["fdp-grid",a].filter(Boolean).join(" "),children:[t==="y"&&l.map((u,c)=>s.jsx("line",{x1:0,x2:o.innerWidth,y1:i.yScale(u),y2:i.yScale(u),stroke:n,strokeDasharray:r},c)),t==="x"&&l.map((u,c)=>s.jsx("line",{y1:0,y2:o.innerHeight,x1:i.xScale(u),x2:i.xScale(u),stroke:n,strokeDasharray:r},c))]})},Br={color:{"data-viz":{$type:"color",categorical:{1:{$value:"{color.primary.blue}",$description:"Series 1 â€“ NHS Blue (brand core)"},2:{$value:"#41B6E6",$description:"Series 2 â€“ NHS Light Blue (new)"},3:{$value:"{color.secondary.aqua-green}",$description:"Series 3 â€“ NHS Aqua Green (existing)"},4:{$value:"#78BE20",$description:"Series 4 â€“ NHS Light Green (new)"},5:{$value:"{color.primary.green}",$description:"Series 5 â€“ NHS Green (existing)"},6:{$value:"{color.secondary.warm-yellow}",$description:"Series 6 â€“ NHS Warm Yellow (existing; distinct from focus yellow)"},7:{$value:"#ED4F00",$description:"Series 7 â€“ NHS Tangerine (new; warmer/deeper than existing orange)"},8:{$value:"{color.secondary.pink}",$description:"Series 8 â€“ NHS Pink (existing)"},9:{$value:"#E317AA",$description:"Series 9 â€“ NHS Bright Pink (new vivid accent)"},10:{$value:"#880FB8",$description:"Series 10 â€“ NHS Light Purple (new mid purple)"},11:{$value:"{color.primary.purple}",$description:"Series 11 â€“ NHS Purple (existing dark purple)"},12:{$value:"#9A6324",$description:"Series 12 â€“ NHS Brown (new; earth neutral)"}},neutral:{comparison:{$value:"{color.grey.1}",$description:"Neutral comparison series (optional)"}},region:{$comment:"Fixed colours for NHS geographical regions; prefer stable mapping for maps. London colour updated (#78BE21 â€“ light green).","north-east":{$value:"{color.primary.blue}",$description:"North East â€“ NHS Blue"},"north-west":{$value:"#41B6E6",$description:"North West â€“ NHS Light Blue"},"east-of-england":{$value:"{color.primary.purple}",$description:"East of England â€“ NHS Purple"},midlands:{$value:"{color.secondary.pink}",$description:"Midlands â€“ NHS Pink"},london:{$value:"#78BE21",$description:"London â€“ NHS Light Green (new)"},"south-west":{$value:"#FAE100",$description:"South West â€“ NHS Yellow variant (new)"},"south-east":{$value:"#ed8b00",$description:"South East â€“ NHS Orange (existing base orange)"}},severity:{$comment:"Semantic severity / alert colours (light background ramp â†’ critical).",low:{$value:"{color.secondary.pale-yellow}",$description:"Low severity â€“ pale yellow background"},moderate:{$value:"{color.secondary.warm-yellow}",$description:"Moderate severity â€“ warm yellow"},high:{$value:"{color.secondary.orange}",$description:"High severity â€“ orange"},critical:{$value:"{color.primary.red}",$description:"Critical severity â€“ red"}},"org-level":{$comment:"Organisational level semantic colours (stable NHS brand mappings).",trust:{$value:"{color.primary.blue}",$description:"Trust â€“ NHS Blue"},ambulance:{$value:"{color.primary.green}",$description:"Ambulance â€“ NHS Green"},icb:{$value:"{color.primary.dark-pink}",$description:"ICB â€“ NHS Dark Pink"},region:{$value:"{color.primary.purple}",$description:"Region â€“ NHS Purple"}},stroke:{$comment:"Automatic contrast stroke colours for overlays / borders. Light fills get dark stroke; dark fills get white stroke.",categorical:{1:{$value:"#ffffff",$description:"Stroke for series 1 (blue)"},2:{$value:"#212b32",$description:"Stroke for series 2 (light blue)"},3:{$value:"#212b32",$description:"Stroke for series 3 (aqua green)"},4:{$value:"#212b32",$description:"Stroke for series 4 (light green)"},5:{$value:"#ffffff",$description:"Stroke for series 5 (green)"},6:{$value:"#212b32",$description:"Stroke for series 6 (warm yellow)"},7:{$value:"#ffffff",$description:"Stroke for series 7 (tangerine)"},8:{$value:"#ffffff",$description:"Stroke for series 8 (pink)"},9:{$value:"#ffffff",$description:"Stroke for series 9 (bright pink)"},10:{$value:"#ffffff",$description:"Stroke for series 10 (light purple)"},11:{$value:"#ffffff",$description:"Stroke for series 11 (purple)"},12:{$value:"#ffffff",$description:"Stroke for series 12 (brown)"}},region:{$comment:"Region stroke colours derived from fill colours: dark fills lightened ~35%; light fills darkened ~25% for consistent contrast without defaulting to pure white/black.","north-east":{$value:"#5996D1",$description:"Stroke for North East (blue lightened 35%)"},"north-west":{$value:"#3189AD",$description:"Stroke for North West (light blue darkened 25%)"},"east-of-england":{$value:"#7A59A3",$description:"Stroke for East of England (purple lightened 35%)"},midlands:{$value:"#CA71A4",$description:"Stroke for Midlands (pink lightened 35%)"},london:{$value:"#5A8F19",$description:"Stroke for London (light green darkened 25%)"},"south-west":{$value:"#BCA900",$description:"Stroke for South West (yellow darkened 25%)"},"south-east":{$value:"#B26800",$description:"Stroke for South East (orange darkened 25%)"}},severity:{$comment:"Contrast strokes for severity colours (light backgrounds use dark stroke; dark backgrounds use white).",low:{$value:"#212b32",$description:"Stroke for low severity (pale yellow fill)"},moderate:{$value:"#212b32",$description:"Stroke for moderate severity (warm yellow fill)"},high:{$value:"#212b32",$description:"Stroke for high severity (orange fill)"},critical:{$value:"#ffffff",$description:"Stroke for critical severity (red fill)"}},"org-level":{$comment:"Contrast strokes for organisational level colours (all dark brand fills so white stroke for consistency).",trust:{$value:"#ffffff",$description:"Stroke for trust (blue fill)"},ambulance:{$value:"#ffffff",$description:"Stroke for ambulance (green fill)"},icb:{$value:"#ffffff",$description:"Stroke for ICB (dark pink fill)"},region:{$value:"#ffffff",$description:"Stroke for region (purple fill)"}}},spc:{$comment:"SPC (Statistical Process Control) semantic variation colours aligned to SPCChart.scss and SPCIcons.",improvement:{$value:"#00B0F0",$description:"SPC special cause improvement (favourable)"},concern:{$value:"#E46C0A",$description:"SPC special cause concern (deteriorating)"},"no-judgement":{$value:"#490092",$description:"SPC special cause (no directional judgement)"},"common-cause":{$value:"#A6A6A6",$description:"SPC common cause (baseline variation)"},"assurance-pass":{$value:"#00823B",$description:"SPC assurance pass indicator (process capable)"},"assurance-fail":{$value:"#DA291C",$description:"SPC assurance fail indicator (process not capable)"},gradient:{$comment:"Opacity stops for SPC icon gradient wash (applied top-left -> bottom-right). Consumers build gradients using these opacities + base colour.",stop:{"start-opacity":{$value:"0.18",$description:"Start stop opacity (0%) for classic variant wash"},"mid-opacity":{$value:"0.06",$description:"Mid stop opacity (~65-75%)"},"end-opacity":{$value:"0",$description:"End stop opacity (100%)"},"triangle-start-opacity":{$value:"0.18",$description:"Start opacity for triangle variants (kept aligned)"},"triangle-mid-opacity":{$value:"0.06",$description:"Mid opacity for triangle variants"},"triangle-end-opacity":{$value:"0",$description:"End opacity for triangle variants"}}},stroke:{$comment:"Contrast stroke colours for SPC variation fills.",improvement:{$value:"#000000",$description:"Stroke for improvement points"},concern:{$value:"#000000",$description:"Stroke for concern points"},"no-judgement":{$value:"#000000",$description:"Stroke for no-judgement points"},"common-cause":{$value:"#ffffff",$description:"Stroke for common cause points"},"assurance-pass":{$value:"#000000",$description:"Stroke for assurance pass points"},"assurance-fail":{$value:"#000000",$description:"Stroke for assurance fail points"}}}}}},oi={color:{primary:{$type:"color",blue:{$value:"#005eb8",$description:"NHS Blue - Primary brand color"},"blue-active":{$value:"#002f5c",$description:"NHS Active Blue (50% shade) â€“ alias of button/login active; promoted for general reuse"},white:{$value:"#ffffff",$description:"NHS White"},black:{$value:"#212b32",$description:"NHS Black"},green:{$value:"#007f3b",$description:"NHS Green"},purple:{$value:"#330072",$description:"NHS Purple"},"dark-pink":{$value:"#7c2855",$description:"NHS Dark Pink"},red:{$value:"#d5281b",$description:"NHS Red"},"light-purple":{$value:"#880FB8",$description:"NHS Light Purple (data viz promoted)"},yellow:{$value:"#ffeb3b",$description:"NHS Yellow"}},secondary:{$type:"color","pale-yellow":{$value:"#fff9c4",$description:"NHS Pale Yellow"},"warm-yellow":{$value:"#ffb81c",$description:"NHS Warm Yellow"},"region-yellow":{$value:"#FAE100",$description:"NHS Region Yellow (maps)"},orange:{$value:"#ed8b00",$description:"NHS Orange"},tangerine:{$value:"#ED4F00",$description:"NHS Tangerine (data viz promoted)"},"aqua-green":{$value:"#00a499",$description:"NHS Aqua Green"},"light-blue":{$value:"#41B6E6",$description:"NHS Light Blue (data viz promoted)"},pink:{$value:"#ae2573",$description:"NHS Pink"},"bright-pink":{$value:"#E317AA",$description:"NHS Bright Pink (data viz promoted)"},"light-green":{$value:"#78BE20",$description:"NHS Light Green (data viz promoted)"},brown:{$value:"#9A6324",$description:"NHS Brown (data viz promoted neutral)"}},grey:{1:{$value:"#4c6272",$description:"NHS Grey 1 - Darkest grey"},2:{$value:"#768692",$description:"NHS Grey 2 - Darker grey"},3:{$value:"#aeb7bd",$description:"NHS Grey 3 - Medium grey"},4:{$value:"#d8dde0",$description:"NHS Grey 4 - Light grey"},5:{$value:"#f0f4f5",$description:"NHS Grey 5 - Lightest grey"},$type:"color"},accessibility:{$type:"color",$comment:"Accessibility-oriented color tokens. Includes CVD-safe pairs and Okabeâ€“Ito colors. Use these for positive/negative semantics and colour-blindâ€“friendly defaults.","okabe-ito":{green:{$value:"#009E73",$description:"Okabeâ€“Ito green (CVD-safe) â€“ recommended positive"},vermillion:{$value:"#D55E00",$description:"Okabeâ€“Ito vermillion / redâ€“orange (CVD-safe) â€“ recommended negative"}},"cvd-safe":{blue:{$value:"#1f77b4",$description:"CVD-safe blue (pairs with orange); widely used in Matplotlib/Tableau sets"},orange:{$value:"#ff7f0e",$description:"CVD-safe orange (pairs with blue)"}},positive:{$value:"{color.accessibility.okabe-ito.green}",$description:"Accessibility semantic alias â€“ positive"},negative:{$value:"{color.accessibility.okabe-ito.vermillion}",$description:"Accessibility semantic alias â€“ negative"}}}},Ny=["#005eb8","#0072ce","#41b6e6","#00a499","#7c2855","#330072","#d5281b","#ffb81c","#fae100","#4c6272","#768692","#aeb7bd"];let Us=null,Gs=null,Ys=null,Ju="optimized";function jy(){const t={color:{...oi.color,...Br.color}},e=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,t);if(!i)return;const o=i.$value||i.value;if(typeof o=="string"&&/^\{.+\}$/.test(o))return e(o.slice(1,-1),a);if(typeof o=="string")return o},n=[];try{for(let r=1;r<=12;r++){const a=`color.data-viz.categorical.${r}`,i=e(a);if(!i)throw new Error(`Missing token ${a}`);n.push(i)}return n}catch{return Ny}}function Dy(){return Us||(Us=jy()),Us}function My(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t.trim());return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function Vs(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $y(t,e,n){const r=Vs(t),a=Vs(e),i=Vs(n),o=r*.4124+a*.3576+i*.1805,l=r*.2126+a*.7152+i*.0722,u=r*.0193+a*.1192+i*.9505;return{x:o*100,y:l*100,z:u*100}}function Iy(t,e,n){let o=t/95.047,l=e/100,u=n/108.883;const c=d=>d>.008856?Math.cbrt(d):7.787*d+16/116;return o=c(o),l=c(l),u=c(u),{L:116*l-16,a:500*(o-l),b:200*(l-u)}}function Qu(t){const e=My(t);if(!e)return null;const n=$y(e.r,e.g,e.b);return Iy(n.x,n.y,n.z)}function ed(t,e){const n=t.L-e.L,r=t.a-e.a,a=t.b-e.b;return Math.sqrt(n*n+r*r+a*a)}function Py(){const t=Dy();if(t.length<=2)return t.slice();const e=t.map(o=>Qu(o));let n=0,r=-1;for(let o=0;o<t.length;o++){const l=e[o];if(!l)continue;let u=0,c=0;for(let h=0;h<t.length;h++)o!==h&&e[h]&&(u+=ed(l,e[h]),c++);const d=u/Math.max(1,c);d>r&&(r=d,n=o)}const a=new Set(t.map((o,l)=>l)),i=[];for(i.push(n),a.delete(n);a.size;){let o=Array.from(a)[0],l=-1;for(const u of a){const c=e[u];if(!c)continue;let d=1/0;for(const h of i){const p=e[h];if(p){const g=ed(c,p);g<d&&(d=g)}}d>l&&(l=d,o=u)}i.push(o),a.delete(o)}return i.map(o=>t[o])}function Ly(){return Gs||(Gs=Py()),Gs}function Fy(t,e,n){const r=(t+16)/116,a=e/500+r,i=r-n/200,o=d=>{const h=d*d*d;return h>.008856?h:(d-16/116)/7.787},l=o(a)*95.047,u=o(r)*100,c=o(i)*108.883;return{X:l,Y:u,Z:c}}function By(t,e,n){t/=100,e/=100,n/=100;let r=t*3.2406+e*-1.5372+n*-.4986,a=t*-.9689+e*1.8758+n*.0415,i=t*.0557+e*-.204+n*1.057;const o=l=>l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055;return r=Math.min(1,Math.max(0,o(r))),a=Math.min(1,Math.max(0,o(a))),i=Math.min(1,Math.max(0,o(i))),{r:Math.round(r*255),g:Math.round(a*255),b:Math.round(i*255)}}function Ay(t,e,n){return`#${[t,e,n].map(r=>r.toString(16).padStart(2,"0")).join("")}`}function Ey(t,e){const n=Qu(t);if(!n)return t;const r=Math.min(100,Math.max(0,n.L+e)),{X:a,Y:i,Z:o}=Fy(r,n.a,n.b),l=By(a,i,o);return Ay(l.r,l.g,l.b)}function Hy(){const t=Ly(),n=[12,-12,24,-24].map(a=>t.map(i=>Ey(i,a))),r=[...t];return n.forEach(a=>r.push(...a)),r}function Ry(){return(!Ys||zy())&&(Ys=Hy(),td=Ju),Ys}let td=null;function zy(){return td!==Ju}function At(t){const e=Ry();return e[t%e.length]}let sr=null,Ar=null,Er=null,Hr=null;function Oy(){const t=Br?.color?.["data-viz"]?.stroke;if(t){const e=t.categorical||{};sr=[];for(let i=1;i<=12;i++){const o=e[String(i)]?.$value||e[String(i)]?.value;sr.push(typeof o=="string"?o:"#212b32")}const n=t.region||{};Ar={},Object.keys(n).forEach(i=>{const o=n[i]?.$value||n[i]?.value;typeof o=="string"&&(Ar[i]=o)});const r=t.severity||{},a=t["org-level"]||{};Hr={},Object.keys(a).forEach(i=>{const o=a[i]?.$value||a[i]?.value;typeof o=="string"&&(Hr[i]=o)}),Er={},Object.keys(r).forEach(i=>{const o=r[i]?.$value||r[i]?.value;typeof o=="string"&&(Er[i]=o)})}}function li(){(!sr||!Ar||!Er||!Hr)&&Oy()}function En(t){return li(),sr?sr[t%sr.length]:"#212b32"}function Wy(t){return li(),Ar?Ar[t]:void 0}function ci(t,e){return Wy(t)||En(e)}const qs=["low","moderate","high","critical"];let Xs=null;function Uy(){const t={color:{...oi.color,...Br.color}},e=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,t);if(!i)return;const o=i.$value||i.value;return typeof o=="string"&&/^\{.+\}$/.test(o)?e(o.slice(1,-1),a):typeof o=="string"?o:void 0},n={};return qs.forEach(r=>{const a=e(`color.data-viz.severity.${r}`);a&&(n[r]=a)}),n}function nd(){return Xs||(Xs=Uy()),Xs}function Gy(t){return nd()[t.toLowerCase()]}function Yy(t,e){return Gy(t)||nd()[qs[e%qs.length]]||At(e)}function Vy(t){return li(),Er?Er[t]:void 0}function qy(t,e){return Vy(t)||En(e)}const Ks=["trust","ambulance","icb","region"];let Zs=null;function Xy(){const t={color:{...oi.color,...Br.color}},e=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,t);if(!i)return;const o=i.$value||i.value;return typeof o=="string"&&/^\{.+\}$/.test(o)?e(o.slice(1,-1),a):typeof o=="string"?o:void 0},n={};return Ks.forEach(r=>{const a=e(`color.data-viz.org-level.${r}`);a&&(n[r]=a)}),n}function rd(){return Zs||(Zs=Xy()),Zs}function Ky(t){return rd()[t.toLowerCase()]}function Zy(t,e){return Ky(t)||rd()[Ks[e%Ks.length]]||At(e)}function Jy(t){return li(),Hr?Hr[t]:void 0}function Qy(t,e){return Jy(t)||En(e)}let Js=null;const ex=["north-east","north-west","east-of-england","midlands","london","south-west","south-east"];function tx(t){return t.trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function nx(){const t={color:{...oi.color,...Br.color}},e=(a,i=new Set)=>{if(i.has(a))return;i.add(a);const o=a.split(".").reduce((u,c)=>u?u[c]:void 0,t);if(!o)return;const l=o.$value||o.value;return typeof l=="string"&&/^\{.+\}$/.test(l)?e(l.slice(1,-1),i):typeof l=="string"?l:void 0},n={},r=[];return ex.forEach(a=>{const i=e(`color.data-viz.region.${a}`);i?n[a]=i:r.push(a)}),process.env.NODE_ENV!=="production"&&(Object.keys(n).length===0?console.warn("[DataViz] Region colour tokens unresolved  falling back to categorical colours."):r.length&&console.warn(`[DataViz] Missing region colour tokens: ${r.join(", ")}.`)),n}function rx(){return Js||(Js=nx()),Js}function ax(t){return rx()[tx(t)]}function or(t,e){return ax(t)||At(e)}const ad=V.createContext(null),Rr=()=>V.useContext(ad),ix=({initialHiddenIds:t=[],children:e,hiddenIds:n,onChange:r})=>{const[a,i]=V.useState(()=>new Set(t)),o=n!==void 0,l=V.useMemo(()=>o?new Set(n):a,[o,n,a]),u=V.useCallback(d=>{o||i(new Set(d)),r?.(Array.from(d))},[o,r]),c=V.useMemo(()=>({hiddenIds:l,isHidden:d=>l.has(d),toggle:d=>{const h=new Set(l);h.has(d)?h.delete(d):h.add(d),u(h)},showOnly:d=>{u(new Set)},showAll:()=>u(new Set),setHidden:d=>u(new Set(Array.isArray(d)?d:Array.from(d)))}),[l,u]);return s.jsx(ad.Provider,{value:c,children:e})},id=V.createContext(null),bn=()=>V.useContext(id),sd=({children:t,maxDistance:e=40,wrapAround:n=!1})=>{const r=An(),a=Rr(),[i,o]=V.useState(null),l=V.useRef(new Map),[u,c]=V.useState([]),d=V.useCallback((N,_)=>{l.current.set(N,_)},[]),h=V.useCallback(N=>{l.current.delete(N)},[]),p=V.useCallback((N,_)=>{if(!r)return;const{xScale:w,yScale:j}=r;let x=null,S=1/0;l.current.forEach((B,P)=>{B.forEach(($,k)=>{const H=w($.x),Q=j($.y),O=H-N,z=Q-_,W=Math.sqrt(O*O+z*z);W<S&&(S=W,x={seriesId:P,index:k,x:$.x,y:$.y,clientX:H,clientY:Q})})}),x&&S<=e?o(x):o(null)},[r,e]),g=V.useCallback(()=>o(null),[]);V.useEffect(()=>{if(!i){c([]);return}if(!r)return;const{xScale:N,yScale:_}=r,w=[];l.current.forEach((j,x)=>{j.forEach((S,B)=>{(i.x instanceof Date&&S.x instanceof Date?S.x.getTime()===i.x.getTime():S.x===i.x)&&w.push({seriesId:x,index:B,x:S.x,y:S.y,clientX:N(S.x),clientY:_(S.y)})})}),w.sort((j,x)=>j.seriesId.localeCompare(x.seriesId)),c(w)},[i,r]);const y=V.useCallback(N=>{if(!i)return;const _=l.current.get(i.seriesId);if(!_)return;let w=i.index+N;if(w<0||w>=_.length){if(!n)return;w=(w+_.length)%_.length}const j=_[w];if(!r)return;const{xScale:x,yScale:S}=r;o({seriesId:i.seriesId,index:w,x:j.x,y:j.y,clientX:x(j.x),clientY:S(j.y)})},[i,r,n]),f=V.useCallback(N=>{let _=Array.from(l.current.keys());if(a&&(_=_.filter(H=>!a.isHidden(H))),_.length===0)return;if(!i){const H=_[0],Q=l.current.get(H);if(!Q||!r)return;const{xScale:O,yScale:z}=r,W=Q[0];o({seriesId:H,index:0,x:W.x,y:W.y,clientX:O(W.x),clientY:z(W.y)});return}const w=_.indexOf(i.seriesId);if(w===-1)return;let j=w+N;if(j<0||j>=_.length){if(!n)return;j=(j+_.length)%_.length}const x=_[j],S=l.current.get(x);if(!S||!r)return;const B=Math.min(i.index,S.length-1),P=S[B],{xScale:$,yScale:k}=r;o({seriesId:x,index:B,x:P.x,y:P.y,clientX:$(P.x),clientY:k(P.y)})},[i,r,n,a]),m=V.useCallback(()=>{let N=Array.from(l.current.keys());if(a&&(N=N.filter(B=>!a.isHidden(B))),N.length===0)return;const _=i?i.seriesId:N[0],w=l.current.get(_);if(!w||w.length===0||!r)return;const j=w[0],{xScale:x,yScale:S}=r;o({seriesId:_,index:0,x:j.x,y:j.y,clientX:x(j.x),clientY:S(j.y)})},[i,r,a]),I=V.useCallback(()=>{let N=Array.from(l.current.keys());if(a&&(N=N.filter(P=>!a.isHidden(P))),N.length===0)return;const _=i?i.seriesId:N[0],w=l.current.get(_);if(!w||w.length===0||!r)return;const j=w.length-1,x=w[j],{xScale:S,yScale:B}=r;o({seriesId:_,index:j,x:x.x,y:x.y,clientX:S(x.x),clientY:B(x.y)})},[i,r,a]),M=V.useCallback(()=>y(1),[y]),C=V.useCallback(()=>y(-1),[y]),v=V.useCallback(()=>f(1),[f]),D=V.useCallback(()=>f(-1),[f]),T=V.useMemo(()=>({focused:i,setFocused:o,aggregated:u,focusNearest:p,clear:g,registerSeries:d,unregisterSeries:h,focusNextPoint:M,focusPrevPoint:C,focusNextSeries:v,focusPrevSeries:D,focusFirstPoint:m,focusLastPoint:I}),[i,u,p,g,d,h,M,C,v,D,m,I]);return s.jsx(id.Provider,{value:T,children:t})},od=({series:t,seriesIndex:e,palette:n,showPoints:r,focusablePoints:a,focusIndex:i,parseX:o,visibilityMode:l="remove",strokeWidth:u=1,smooth:c=!0,gradientFillId:d,colors:h})=>{const p=An();if(!p)return null;const{xScale:g,yScale:y}=p,m=Rr()?.isHidden(t.id)??!1,I=m&&l==="fade";if(m&&l==="remove")return null;const M=bn();V.useEffect(()=>{if(!M)return;const _=t.data.map(w=>({x:o(w),y:w.y}));return M.registerSeries(t.id,_),()=>M.unregisterSeries(t.id)},[M,t.id,t.data,o]);const C=V.useMemo(()=>zs(t.data,_=>g(o(_)),_=>y(_.y),{smooth:c}),[t.data,g,y,o,c]),v=V.useMemo(()=>{if(!t.data.length)return"";const[_]=y.domain(),w=Hs().x(j=>g(o(j))).y0(()=>y(_)).y1(j=>y(j.y));return c&&w.curve(si),w(t.data)||""},[t.data,g,y,o,c]),D=h&&h[e],T=t.color||D||(n==="region"?or(t.id,e):At(e)),N=n==="region"?ci(t.id,e):En(e);return s.jsxs("g",{className:"fdp-line-series","data-series":t.id,opacity:I?.25:1,"aria-hidden":I?!0:void 0,children:[d&&s.jsx("path",{d:v,fill:`url(#${d})`,stroke:"none",role:"presentation",className:"fdp-line-series__gradient"}),s.jsx("path",{d:C,fill:"none",stroke:T,strokeWidth:u,role:"presentation"}),r&&t.data.map((_,w)=>{const j=g(o(_)),x=y(_.y),S=a?0:-1,B=!I&&(a&&w===i||M?.focused?.seriesId===t.id&&M.focused.index===w),P=()=>{M&&!I&&M.setFocused({seriesId:t.id,index:w,x:o(_),y:_.y,clientX:j,clientY:x})},$=()=>{M&&M.focused?.seriesId===t.id&&M.focused.index===w&&M.clear()};return s.jsx("circle",{cx:j,cy:x,r:B?5:3.5,stroke:B?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":N,strokeWidth:B?2:1,fill:B?"var(--nhs-fdp-color-grey-3, #aeb7bd)":T,className:"fdp-line-point",tabIndex:I?-1:S,"aria-label":`${t.label||t.id} ${o(_).toDateString()} value ${_.y}`,"data-series":t.id,"data-index":w,onMouseEnter:P,onFocus:P,onMouseLeave:$,onBlur:$},w)})]})},sx=({polite:t=!0,format:e})=>{const n=bn(),[r,a]=V.useState(""),i=V.useRef("");return V.useEffect(()=>{if(!n?.focused)return;const{focused:o,aggregated:l}=n;let u;if(l&&l.length>1){const c=l.map(h=>`${h.seriesId} ${h.y}`).join("; ");u=`${o.x instanceof Date?o.x.toDateString():String(o.x)} â€“ ${c}`}else u=e?e({seriesId:o.seriesId,x:o.x,y:o.y,index:o.index}):ox(o.seriesId,o.x,o.y,o.index);if(u!==i.current){i.current=u,a("");const c=setTimeout(()=>a(u),10);return()=>clearTimeout(c)}},[n?.focused,e]),s.jsx("div",{"aria-live":t?"polite":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,margin:-1,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",border:0},children:r})};function ox(t,e,n,r){const a=e instanceof Date?e.toDateString():String(e);return`Series ${t}, point ${r+1}, ${a}, value ${n}`}const lx=()=>{const t=bn(),e=gn();if(!t||!e||!t.focused)return null;const{focused:n,aggregated:r}=t,{innerWidth:a,innerHeight:i}=e,o=Math.min(Math.max(n.clientX,0),a),l=Math.min(Math.max(n.clientY,0),i),u=o+8,c=l-8,d=r.length>1,h=n.x instanceof Date?n.x.toDateString():String(n.x),p=d?h:`${h} â€¢ ${n.y}`,g=/\d+$/.exec(n.seriesId||""),y=g?parseInt(g[0],10)-1:0,f=At(y>=0?y:0)||"#005eb8",m="var(--nhs-fdp-color-primary-yellow,#ffeb3b)";return s.jsxs("g",{className:"fdp-tooltip-layer",pointerEvents:"none",children:[s.jsx("circle",{cx:o,cy:l,r:7,fill:"none",stroke:m,strokeWidth:3}),s.jsx("circle",{cx:o,cy:l,r:5,fill:"#000",stroke:m,strokeWidth:1.5}),s.jsx("circle",{cx:o,cy:l,r:2.5,fill:f,stroke:"#fff",strokeWidth:.5}),d?(()=>{const M=r.map(N=>`${N.seriesId}: ${N.y}`),C=[p,...M],v=C.reduce((N,_)=>Math.max(N,_.length),0),D=Math.max(90,v*6.2+16),T=16*C.length+8;return s.jsxs("g",{children:[s.jsx("rect",{x:u,y:c-T,rx:4,ry:4,width:D,height:T,fill:"#212b32",opacity:.92}),C.map((N,_)=>s.jsx("text",{x:u+8,y:c-T+6+16*(_+.7),fill:"#fff",fontSize:12,children:N},_))]})})():s.jsxs("g",{children:[s.jsx("rect",{x:u,y:c-24,rx:4,ry:4,width:Math.max(60,p.length*6.2),height:24,fill:"#212b32",opacity:.92}),s.jsx("text",{x:u+8,y:c-8,fill:"#fff",fontSize:12,children:p})]})]})},cx=({items:t,palette:e="categorical",direction:n="row",interactive:r=!1,adjustStrokeForWhiteBackground:a=!0,hiddenIds:i,defaultHiddenIds:o=[],onVisibilityChange:l,formatAnnouncement:u})=>{const c=Rr(),d=!!(c&&!r&&!l&&i===void 0),h=r||d,p=t||[],g=i!==void 0,[y,f]=V.useState(new Set(o)),m=g?new Set(i):y,[I,M]=V.useState(""),C=v=>{if(d&&c){const S=c.isHidden(v);c.toggle(v);const P=p.find(k=>k.id===v)?.label||v,$=u?u(v,S,P):`${P} ${S?"shown":"hidden"}`;M($);return}if(!h)return;const D=new Set(m),T=D.has(v);T?D.delete(v):D.add(v),g||f(D);const N=p.filter(S=>!D.has(S.id)).map(S=>S.id),_=Array.from(D);l?.(N,_);const j=p.find(S=>S.id===v)?.label||v,x=u?u(v,T,j):`${j} ${T?"shown":"hidden"}`;M(x)};return s.jsxs("div",{className:"fdp-legend-wrapper",children:[s.jsx("ul",{className:`fdp-legend fdp-legend--${n}`,children:p.map((v,D)=>{const T=v.palette||e,N=v.color||(T==="region"?or(v.id,D):T==="severity"?Yy(v.id,D):T==="org-level"?Zy(v.id,D):At(D));let _=v.stroke||(T==="region"?ci(v.id,D):T==="severity"?qy(v.id,D):T==="org-level"?Qy(v.id,D):En(D));if(a&&_){const x=_.trim().toLowerCase();(x==="#fff"||x==="#ffffff"||x==="white"||/^rgb\(\s*255\s*,\s*255\s*,\s*255\s*\)$/.test(x))&&(_="#212b32")}const w=d&&c?c.isHidden(v.id):m.has(v.id),j=h?{"aria-pressed":!w,"aria-label":`${v.label} (${w?"show":"hide"})`,onClick:()=>C(v.id)}:{"aria-label":v.label};return s.jsxs("li",{className:`fdp-legend__item${w?" fdp-legend__item--hidden":""}`,children:[s.jsx("button",{type:"button",className:"fdp-legend__swatch",style:{backgroundColor:N,backgroundImage:v.patternDataUrl?`url(${v.patternDataUrl})`:void 0,backgroundSize:v.patternDataUrl?"auto":void 0,borderColor:_},...j}),s.jsx("span",{className:"fdp-legend__label",children:v.label})]},v.id)})}),h&&s.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite","aria-atomic":"true",children:I})]})},ux=({series:t,seriesIndex:e,palette:n,parseX:r,areaOnly:a=!1,visibilityMode:i="remove",baselineY:o=0,smooth:l=!0,stacked:u,gradientFill:c=!0,colors:d})=>{const h=An();if(!h)return null;const{xScale:p,yScale:g}=h,f=Rr()?.isHidden(t.id)??!1,m=f&&i==="fade";if(f&&i==="remove")return null;const I=bn();V.useEffect(()=>{if(!I)return;const N=t.data.map(_=>({x:r(_),y:_.y}));return I.registerSeries(t.id,N),()=>I.unregisterSeries(t.id)},[I,t.id,t.data,r]);const M=d&&d[e],C=t.color||M||(n==="region"?or(t.id,e):At(e)),v=V.useMemo(()=>u&&u.length===t.data.length?zs(t.data,N=>p(r(N)),N=>{const _=t.data.indexOf(N);return g(u[_].y1)},{smooth:l}):zs(t.data,N=>p(r(N)),N=>g(N.y),{smooth:l}),[t.data,u,p,g,r,l]),D=V.useMemo(()=>{if(u&&u.length===t.data.length){const x=Hs().x(S=>p(r(S))).y0((S,B)=>g(u[B].y0)).y1((S,B)=>g(u[B].y1));return l&&x.curve(si),x(t.data)||""}const[N,_]=g.domain();let w=o;w<N?w=N:w>_&&(w=_);const j=Hs().x(x=>p(r(x))).y0(()=>g(w)).y1(x=>g(x.y));return l&&j.curve(si),j(t.data)||""},[t.data,u,p,g,r,o,l]),T=V.useId();return s.jsxs("g",{className:"fdp-area-series","data-series":t.id,opacity:m?.25:1,"aria-hidden":m?!0:void 0,children:[c&&s.jsx("defs",{children:s.jsxs("linearGradient",{id:T,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:C,stopOpacity:.25}),s.jsx("stop",{offset:"100%",stopColor:C,stopOpacity:0})]})}),s.jsx("path",{className:"fdp-area-series__fill",d:D,fill:c?`url(#${T})`:C,...c?{}:{fillOpacity:.25},stroke:"none"}),!a&&s.jsx("path",{d:v,fill:"none",stroke:C,strokeWidth:1})]})},dx=({series:t,seriesIndex:e,seriesCount:n,palette:r,parseX:a,focusable:i=!0,widthFactor:o=.8,groupGap:l=2,barWidth:u,adaptive:c=!1,adaptiveGroupOccupancy:d=.9,visibilityMode:h="remove",colorMode:p="series",allSeries:g,stacked:y,gapRatio:f=.15,minBarWidth:m,gradientFill:I=!0,gradientStrokeMatch:M=!0,opacity:C=1,fadedOpacity:v=.25,flatFillOpacity:D=1,colors:T})=>{const N=Math.max(0,f),_=An(),w=gn();if(!_||!w)return null;const{xScale:j,yScale:x}=_,B=Rr()?.isHidden(t.id)??!1,P=B&&h==="fade";if(B&&h==="remove")return null;const $=bn();V.useEffect(()=>{if(!$)return;const G=t.data.map(q=>({x:a(q),y:q.y}));return $.registerSeries(t.id,G),()=>$.unregisterSeries(t.id)},[$,t.id,t.data,a]);const k=typeof j.bandwidth=="function",H=k?j.bandwidth():void 0,Q=V.useMemo(()=>{if(H!=null)return H;const G=g&&g.length?g:[t],q=[];G.forEach(se=>{se.data.forEach(he=>{const ne=j(a(he));Number.isFinite(ne)&&q.push(ne)})});const ue=q.sort((se,he)=>se-he);if(ue.length<=1)return 40;const U=[];for(let se=1;se<ue.length;se++)U.push(ue[se]-ue[se-1]);return U.sort((se,he)=>se-he),(U[Math.floor(U.length/2)]||40)*o},[t.data,g,j,a,o,H]),{basePerBar:O}=V.useMemo(()=>{if(k){const ue=Q,U=Math.max(1,(ue-l*(n-1))/n),le=t.barWidth??u;let se=le?Math.min(le,ue):U;if(c){const he=ue*Math.min(1,Math.max(.05,d)),ne=Math.max(1,(he-l*(n-1))/n);se=le?Math.min(se,ne):ne}return{basePerBar:se}}const G=t.barWidth??u,q=Math.max(1,(Q-l*(n-1))/n);if(c){const ue=g&&g.length?g:[t],U=[];ue.forEach(pe=>pe.data.forEach(ve=>{const me=j(a(ve));Number.isFinite(me)&&U.push(me)})),U.sort((pe,ve)=>pe-ve);const le=[];for(let pe=1;pe<U.length;pe++)le.push(U[pe]-U[pe-1]);le.sort((pe,ve)=>pe-ve);const he=(le[Math.floor(le.length/2)]||Q)*Math.min(1,Math.max(.05,d)),ne=Math.max(1,(he-l*(n-1))/n);return{basePerBar:G?Math.min(G,ne):ne}}return G?{basePerBar:Math.min(G,q)}:{basePerBar:q}},[k,Q,l,n,u,t.barWidth,c,d,g,j,a]),z=V.useMemo(()=>{if(k)return[];const G=[];return(g&&g.length?g:[t]).forEach(ue=>ue.data.forEach(U=>{const le=j(a(U));Number.isFinite(le)&&G.push(le)})),G.sort((ue,U)=>ue-U),Array.from(new Set(G))},[k,g,t,j,a]),W=V.useMemo(()=>{if(k)return[];if(!z.length)return[];if(z.length===1)return[{center:z[0],left:0,right:w.innerWidth}];const G=[];for(let q=0;q<z.length;q++){const ue=z[q],U=q===0?0:(z[q-1]+ue)/2,le=q===z.length-1?w.innerWidth:(ue+z[q+1])/2;G.push({center:ue,left:Math.max(0,U),right:Math.min(w.innerWidth,le)})}return G},[k,z,w.innerWidth]),R=V.useMemo(()=>{if(k||!W.length)return;const G=Math.min(1,Math.max(.05,o)),q=W.map(he=>Math.max(2,he.right-he.left)),ue=q.map(he=>Math.max(2,Math.min(he-1,he*G)));let U=Math.min(...ue);if(m)if(n<=1){const he=Math.min(...q.map(ne=>ne-1));he>=m&&U<m&&(U=Math.min(he,m))}else{const he=Math.min(...q.map(fe=>fe-1)),ne=m*n+(n-1)*(m*N);ne<=he&&U<ne&&(U=ne)}if(n<=1)return m&&U<m&&q.every(ne=>ne>=m)?{groupWidth:m,barWidth:m}:{groupWidth:U,barWidth:U};let le=U/(n+(n-1)*N);return le<1&&(le=1),m&&le<m&&m*n+(n-1)*(m*N)<=U&&(le=m),{groupWidth:le*n+(n-1)*(le*N),barWidth:le}},[k,W,o,n,N,m]),E=T&&T[e]?T[e]:void 0,L=t.color||E||(r==="region"?or(t.id,e):At(e)),X=r==="region"?ci(t.id,e):En(e),ie=M&&(t.color||E)?L:X,te=Number.isFinite(x(0))?x(0):x.range()[0],Y=V.useId();return y&&y.length===t.data.length?s.jsxs("g",{className:"fdp-bar-series fdp-bar-series--stacked","data-series":t.id,opacity:P?v:C,"aria-hidden":P?!0:void 0,children:[I&&s.jsx("defs",{children:s.jsxs("linearGradient",{id:Y,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:L,stopOpacity:.3}),s.jsx("stop",{offset:"60%",stopColor:L,stopOpacity:.14}),s.jsx("stop",{offset:"100%",stopColor:L,stopOpacity:.06})]})}),t.data.map((G,q)=>{const ue=a(G),U=j(k?G.x:ue);let le,se;if(k)le=Q,se=U;else{const oe=W.find(ae=>Math.abs(ae.center-U)<.5);if(!oe||!R)le=O,se=U-O/2;else{const{groupWidth:ae}=R;le=ae;let A=U-ae/2;A<oe.left&&(A=oe.left),A+ae>oe.right&&(A=Math.max(oe.left,oe.right-ae)),se=A}}const he=y[q],ne=x(he.y0),fe=x(he.y1),pe=Math.min(ne,fe),ve=Math.abs(fe-ne)||1;if(!k&&m&&le<m){const oe=W.find(ae=>Math.abs(ae.center-U)<.5);if(oe){const ae=Math.max(2,oe.right-oe.left-1),A=Math.min(ae,m);A>le&&(le=A,se=Math.max(oe.left,Math.min(oe.right-le,U-le/2)))}}const me=!P&&$?.focused?.seriesId===t.id&&$.focused.index===q,ee=()=>{!$||P||$.setFocused({seriesId:t.id,index:q,x:ue,y:he.y1-he.y0,clientX:se+le/2,clientY:pe})},Z=()=>{$?.focused?.seriesId===t.id&&$.focused.index===q&&$.clear()};return s.jsx("rect",{x:se,y:pe,width:le,height:ve,fill:I?`url(#${Y})`:L,...I?{}:{fillOpacity:D},stroke:me?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":I&&M?L:void 0,strokeWidth:me?2:1,className:"fdp-bar fdp-bar--stacked",tabIndex:P||!i?-1:0,role:"graphics-symbol","aria-label":`${t.label||t.id} ${ue instanceof Date?ue.toDateString():ue} value ${he.y1-he.y0}`,onMouseEnter:ee,onFocus:ee,onMouseLeave:Z,onBlur:Z},q)})]}):s.jsxs("g",{className:"fdp-bar-series","data-series":t.id,opacity:P?v:C,"aria-hidden":P?!0:void 0,children:[I&&s.jsxs("defs",{children:[p==="series"&&s.jsxs("linearGradient",{id:Y,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:L,stopOpacity:.3}),s.jsx("stop",{offset:"60%",stopColor:L,stopOpacity:.14}),s.jsx("stop",{offset:"100%",stopColor:L,stopOpacity:.06})]}),p==="category"&&t.data.map((G,q)=>{const U=T&&T[q]||(r==="region"?or(String(G.x),q):At(q)),le=`${Y}-${q}`;return s.jsxs("linearGradient",{id:le,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:U,stopOpacity:.3}),s.jsx("stop",{offset:"60%",stopColor:U,stopOpacity:.14}),s.jsx("stop",{offset:"100%",stopColor:U,stopOpacity:.06})]},le)})]}),t.data.map((G,q)=>{const ue=a(G),U=j(k?G.x:ue);let le,se;if(k){const ce=Q;if(n<=1)se=ce,le=U;else{se=Math.max(1,ce/(n+(n-1)*N));const re=se*N,J=se*n+re*(n-1);le=U+(ce-J)/2+e*(se+re)}}else{const ce=W.find(re=>re.center===U);if(!ce||!R)se=O,le=U-O/2,m&&se<m&&(se=m,le=U-se/2);else{const{barWidth:re}=R;se=re;const J=n>1?re*N:0,de=se*n+J*(n-1);let Se=U-de/2;Se<ce.left&&(Se=ce.left),Se+de>ce.right&&(Se=Math.max(ce.left,ce.right-de)),le=Se+e*(se+J)}if(m&&se<m){const re=W.find(J=>Math.abs(J.center-U)<.5);if(re){const J=Math.max(2,re.right-re.left-1),de=Math.min(J,m);if(de>se)if(n<=1)se=de,le=Math.max(re.left,Math.min(re.right-se,U-se/2));else{const Se=de*N,Ce=de*n+Se*(n-1);if(Ce<=re.right-re.left-1){se=de;const je=Ce;let Ne=U-je/2;Ne<re.left&&(Ne=re.left),Ne+je>re.right&&(Ne=Math.max(re.left,re.right-je)),le=Ne+e*(se+Se)}}}}}const he=le+se/2,ne=x(G.y),fe=Math.min(te,ne),pe=Math.abs(te-ne),ve=!P&&$?.focused?.seriesId===t.id&&$.focused.index===q,me=()=>{!$||P||$.setFocused({seriesId:t.id,index:q,x:ue,y:G.y,clientX:he,clientY:ne})},ee=()=>{$?.focused?.seriesId===t.id&&$.focused.index===q&&$.clear()},Z=p==="category"&&T?T[q]:void 0,oe=p==="category"?Z||(r==="region"?or(String(G.x),q):At(q)):L,ae=p==="category"?`${Y}-${q}`:Y,A=I&&M?oe:p==="category"?r==="region"?ci(String(G.x),q):En(q):ie,K=ve?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":A||oe;return s.jsx("rect",{x:le,y:fe,width:se,height:pe||1,fill:I?`url(#${ae})`:oe,...I?{}:{fillOpacity:D},stroke:K,strokeWidth:ve?2:1,className:"fdp-bar",tabIndex:P||!i?-1:0,role:"graphics-symbol","aria-label":`${t.label||t.id} ${ue instanceof Date?ue.toDateString():ue} value ${G.y}`,onMouseEnter:me,onFocus:me,onMouseLeave:ee,onBlur:ee},q)})]})},fx=({series:t,innerWidth:e,innerHeight:n,paddingInner:r=.1,paddingOuter:a=.05,children:i,yTickCount:o=5})=>{const l=gn(),u=e??l?.innerWidth??0,c=n??l?.innerHeight??0,d=V.useMemo(()=>t.flatMap(m=>m.data),[t]),h=V.useMemo(()=>{const m=new Set;return d.forEach(I=>m.add(I.x)),Array.from(m)},[d]),p=V.useMemo(()=>Math.max(0,...d.map(m=>m.y)),[d]),g=V.useMemo(()=>_c().domain(h).range([0,u]).paddingInner(r).paddingOuter(a),[h,u,r,a]),y=V.useMemo(()=>qa().domain([0,p]).nice().range([c,0]),[p,c]),f=V.useMemo(()=>({xScale:g,yScale:y,getXTicks:()=>h,getYTicks:(m=o)=>y.ticks(m)}),[g,y,h,o]);return s.jsx(Os.Provider,{value:f,children:i})},hx=({title:t,description:e,source:n,table:r,className:a,id:i,message:o="Interactive chart loadingâ€¦",forceFallback:l=!1})=>{const u=V.useId(),c=i||u,d=e?`${c}-desc`:void 0,h=n?`${c}-src`:void 0,p=typeof window<"u"&&!l;return s.jsxs("figure",{id:c,className:ai("fdp-chart fdp-chart--noscript",a),"aria-labelledby":`${c}-title`,"aria-describedby":ai(d,h),"data-component":"ChartNoScript",children:[s.jsx("header",{className:"fdp-chart__header",children:s.jsx("h3",{id:`${c}-title`,className:"fdp-chart__title",children:t})}),e&&s.jsx("p",{id:d,className:"fdp-chart__description",children:e}),!p&&s.jsx("div",{className:"fdp-chart__loading",role:"status","aria-live":"polite",children:o}),s.jsxs("div",{className:"fdp-chart__fallback",role:"group","aria-label":t,children:[s.jsx("noscript",{children:s.jsx("div",{className:"fdp-chart__noscript-wrapper",children:s.jsx(ei,{...r})})}),s.jsx("div",{className:"fdp-chart__table","data-fallback-table":!0,children:s.jsx(ei,{...r})})]}),n&&s.jsx("figcaption",{className:"fdp-chart__caption",children:n&&s.jsxs("small",{id:h,className:"fdp-chart__source",children:["Source: ",n]})})]})},mx=({selector:t="figure.fdp-chart",onEnhanced:e,delay:n=0,children:r})=>{const a=V.useRef(null);return V.useEffect(()=>{const i=a.current;if(!i)return;const o=()=>{const l=Array.from(i.querySelectorAll(t));if(l.length===0)return;const u=[];l.forEach(c=>{c.classList.contains("fdp-chart--enhanced")||(c.classList.add("fdp-chart--enhanced"),u.push(c))}),u.length&&e&&e(u)};if(n>0){const l=window.setTimeout(o,n);return()=>window.clearTimeout(l)}o()},[t,e,n]),s.jsx("div",{ref:a,children:r})},px=({label:t,value:e,unit:n,delta:r,status:a="neutral",variant:i="default",subtitle:o,metadata:l,trendData:u,loading:c=!1,error:d,valueFormatter:h,className:p,id:g,announceDelta:y=!0})=>{const f=V.useId(),m=g||f,I=`${m}-label`,M=`${m}-value`,C=`${m}-delta`,v=typeof e=="number"&&!Number.isNaN(e),D=c?"â€”":d?"":v?h?h(e):e.toLocaleString():e;let T,N="",_="";if(r&&!c&&!d){T=r.direction||(r.value>0?"up":r.value<0?"down":"neutral");const w=Math.abs(r.value),j=T==="up"?`+${w}`:T==="down"?`-${w}`:"0",x=r.isPercent?"%":"";if(N=`${j}${x}`,r.ariaLabel)_=r.ariaLabel;else{const S=r.invert?T==="down":T==="up";_=`${T==="neutral"?"no change":T==="up"?"up":"down"} ${w}${x}${T==="neutral"?"":S?" (improvement)":" (worse)"}`}}return s.jsx("div",{className:ai("fdp-metric-card",i&&`fdp-metric-card--${i}`,a&&`fdp-metric-card--status-${a}`,c&&"fdp-metric-card--loading",d&&"fdp-metric-card--error",p),role:"group","aria-labelledby":I,"data-component":"MetricCard",children:s.jsxs("div",{className:"fdp-metric-card__inner",children:[s.jsxs("div",{className:"fdp-metric-card__header",children:[s.jsx("h3",{id:I,className:"fdp-metric-card__label",children:t}),l&&s.jsx("div",{className:"fdp-metric-card__metadata",children:l})]}),s.jsxs("div",{className:"fdp-metric-card__content",children:[s.jsxs("div",{className:"fdp-metric-card__value-section",children:[s.jsx("div",{id:M,className:"fdp-metric-card__value",children:c?s.jsx("div",{className:"fdp-metric-card__skeleton","aria-hidden":"true",children:s.jsx("div",{className:"fdp-metric-card__skeleton-line fdp-metric-card__skeleton-line--value"})}):d?s.jsx("div",{className:"fdp-metric-card__error",role:"alert",children:d}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"fdp-metric-card__number",children:D}),n&&s.jsx("span",{className:"fdp-metric-card__unit",children:n})]})}),o&&!c&&!d&&s.jsx("div",{className:"fdp-metric-card__subtitle",children:o})]}),r&&!c&&!d&&s.jsx("div",{className:"fdp-metric-card__delta-section",children:s.jsxs("div",{id:C,"aria-label":_,className:ai("fdp-metric-card__delta",T&&`fdp-metric-card__delta--${T}`),children:[s.jsx("span",{className:"fdp-metric-card__delta-value",children:N}),r.period&&s.jsx("span",{className:"fdp-metric-card__delta-period",children:r.period})]})}),u&&u.length>0&&!c&&!d&&s.jsx("div",{className:"fdp-metric-card__trend","aria-hidden":"true"})]}),y&&r&&!r.ariaLabel&&!c&&!d&&s.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite",children:_})]})})};var Qs=(t=>(t.XmR="XmR",t.T="T",t.G="G",t))(Qs||{}),Et=(t=>(t.Up="Up",t.Down="Down",t.Neither="Neither",t))(Et||{}),Ve=(t=>(t.Improvement="improvement",t.Concern="concern",t.Neither="neither",t.None="none",t))(Ve||{}),_n=(t=>(t.Pass="pass",t.Fail="fail",t.None="none",t))(_n||{}),yn=(t=>(t.Info="info",t.Warning="warning",t.Error="error",t))(yn||{}),ld=(t=>(t.Config="config",t.Data="data",t.Limits="limits",t.SpecialCause="special_cause",t.Baseline="baseline",t.Logic="logic",t.Target="target",t.Ghost="ghost",t.Partition="partition",t))(ld||{}),cd=(t=>(t.UnknownChartType="unknown_chart_type",t.InsufficientPointsGlobal="insufficient_points_global",t.VariationConflictRow="variation_conflict_row",t.NullValuesExcluded="null_values_excluded",t.TargetIgnoredRareEvent="target_ignored_rare_event",t.GhostRowsRareEvent="ghost_rows_rare_event",t.InsufficientPointsPartition="insufficient_points_partition",t.BaselineWithSpecialCause="baseline_with_special_cause",t.PartitionCapApplied="partition_cap_applied",t.GlobalCapApplied="global_cap_applied",t))(cd||{}),ud=(t=>(t.Shift="shift",t.Trend="trend",t.Point="point",t))(ud||{});const be=t=>typeof t=="number"&&Number.isFinite(t),gx=t=>t.reduce((e,n)=>e+n,0),Ht=t=>t.length?gx(t)/t.length:NaN;function bx(t){const e=[];let n=[];for(const r of t)r.baseline&&n.length&&(e.push(n),n=[]),n.push(r);return n.length&&e.push(n),e}function _x(t,e,n){const r=e.autoRecalculateShiftLength||e.specialCauseShiftPoints||6;if(t.length<r*2)return;const a=t.map((d,h)=>({idx:h,value:d.value})).filter(d=>be(d.value));if(a.length<r*2)return;const i=n==="Up"||n==="Neither",o=n==="Down";function l(d,h){const p=a.slice(d,h).map(g=>g.value);return p.length?Ht(p):NaN}let u=null;if(a.length>1){const d=[];for(let p=1;p<a.length;p++)d.push(Math.abs(a[p].value-a[p-1].value));const h=Ht(d);be(h)&&h>0&&(u=h*(2.66/3))}if(!u||u<=0)return;const c=e.autoRecalculateDeltaSigma??.5;for(let d=r;d<=a.length-r;d++){const h=d-r,p=l(h,d),g=l(d,d+r);if(!be(p)||!be(g))continue;const f=(g-p)/u;if(!(i?f>=c:o?-f>=c:Math.abs(f)>=c))continue;const I=a.slice(d,d+r).map(v=>v.value);if(!(i?I.every(v=>v>p):o?I.every(v=>v<p):I.every(v=>i?v>p:v<p)))continue;const C=a[d].idx;t[C].baseline||(t[C].baseline=!0);return}}function dd(t,e){const n=new Array(t.length).fill(null);let r=null;for(let a=0;a<t.length;a++){const i=t[a];if(!e[a]&&be(i)){if(r!==null){const o=t[r];n[a]=be(o)?Math.abs(i-o):null}r=a}}return n}function fd(t,e){const n=t.filter(i=>be(i));if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=Ht(n),a=3.267*r;if(e){const i=n.filter(o=>o<=a);i.length&&i.length!==n.length&&(r=Ht(i),a=3.267*r)}return{mrMean:r,mrUcl:a}}function yx(t,e){if(!be(t)||!be(e))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=2.66,r=2/3*n,a=1/3*n;return{upperProcessLimit:t+n*e,lowerProcessLimit:t-n*e,upperTwoSigma:t+r*e,lowerTwoSigma:t-r*e,upperOneSigma:t+a*e,lowerOneSigma:t-a*e}}const xx=.2777,vx=3.6,wx=t=>be(t)&&t>=0?Math.pow(t,xx):null,Hn=t=>be(t)&&t>=0?Math.pow(t,vx):null,lr={one:{low:.1586552539,high:.8413447461},two:{low:.0227501319,high:.9772498681},three:{low:.001349898,high:.998650102}};function Sx(t,e){return!(t>0&&t<1)||!(e>0&&e<1)?NaN:Math.log(1-t)/Math.log(1-e)}function kx(t){if(!be(t)||t<0)return{cl:null,lcl:null,ucl:null,oneLow:null,oneHigh:null,twoLow:null,twoHigh:null};const e=1/(t+1),n=d=>Sx(d,e)-1,r=n(.5),a=Math.max(0,n(lr.three.low)),i=n(lr.three.high),o=Math.max(0,n(lr.one.low)),l=n(lr.one.high),u=Math.max(0,n(lr.two.low)),c=n(lr.two.high);return{cl:r,lcl:a,ucl:i,oneLow:o,oneHigh:l,twoLow:u,twoHigh:c}}function Cx(t,e,n){const r=t.map(_=>be(_)?wx(_):null),a=dd(r,e),{mrMean:i}=fd(a,!!n),o=r.filter((_,w)=>!e[w]&&be(_)),l=o.length?Ht(o):NaN;if(!be(l)||!be(i))return{center:null,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null,mr:a,mrMean:null,mrUcl:null};const u=2.66,c=2/3*u,d=1/3*u,h=l+u*i,p=l-u*i,g=l+c*i,y=l-c*i,f=l+d*i,m=l-d*i,I=Hn(l),M=Hn(h),C=p<=0?null:Hn(p),v=Hn(f),D=m<=0?null:Hn(m),T=Hn(g),N=y<=0?null:Hn(y);return{center:I??null,upperProcessLimit:M??null,lowerProcessLimit:C??null,upperTwoSigma:T??null,lowerTwoSigma:N??null,upperOneSigma:v??null,lowerOneSigma:D??null,mr:a,mrMean:i,mrUcl:be(i)?3.267*i:null}}function hd(t){const{chartType:e,metricImprovement:n,data:r,settings:a={}}=t,i={excludeMovingRangeOutliers:!1,specialCauseShiftPoints:6,specialCauseTrendPoints:6,enableFourOfFiveRule:!1,minimumPoints:13,minimumPointsWarning:!1,minimumPointsPartition:12,maximumPointsPartition:null,maximumPoints:null,variationIconConflictWarning:!0,nullValueWarning:!0,targetSuppressedWarning:!0,ghostOnRareEventWarning:!0,partitionSizeWarnings:!0,baselineSpecialCauseWarning:!0,maximumPointsWarnings:!0,assuranceCapabilityMode:!0,collapseClusterRules:!0,baselineSuggest:!1,baselineSuggestMinDeltaSigma:.5,baselineSuggestStabilityPoints:5,baselineSuggestMinGap:12,baselineSuggestScoreThreshold:50,precedenceStrategy:"legacy",emergingDirectionGrace:!1,trendSideGatingEnabled:!0,...a};if(!Array.isArray(r))throw new Error("data must be an array of rows");const o=r.map((f,m)=>({rowId:m+1,x:f.x,value:be(f.value)?f.value:null,ghost:!!f.ghost,baseline:!!f.baseline,target:be(f.target)?f.target:null}));if(a?.autoRecalculateAfterShift)try{_x(o,a,n)}catch{}const l=bx(o),u=[],c=[],h=o.filter(f=>!f.ghost&&be(f.value)).length>=(i.minimumPoints??13);let p=0;const g={};for(const f of l){p++;const m=f.map(x=>x.value),I=f.map(x=>x.ghost);let M=new Array(m.length).fill(null),C=NaN,v=NaN,D=NaN,T={upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};if(e==="XmR"){M=dd(m,I);const x=m.filter((B,P)=>!I[P]&&be(B));C=x.length?Ht(x):NaN;const S=fd(M,!!i.excludeMovingRangeOutliers);v=S.mrMean,D=S.mrUcl,T=yx(C,v)}else if(e==="T"){const x=Cx(m,I,!!i.excludeMovingRangeOutliers);M=x.mr,v=x.mrMean??NaN,D=x.mrUcl??NaN,C=x.center??NaN,T={upperProcessLimit:x.upperProcessLimit,lowerProcessLimit:x.lowerProcessLimit,upperTwoSigma:x.upperTwoSigma,lowerTwoSigma:x.lowerTwoSigma,upperOneSigma:x.upperOneSigma,lowerOneSigma:x.lowerOneSigma}}else if(e==="G"){const x=m.filter((P,$)=>!I[$]&&be(P)),S=x.length?Ht(x):NaN,B=kx(S);C=B.cl??NaN,T={upperProcessLimit:B.ucl,lowerProcessLimit:B.lcl,upperTwoSigma:B.twoHigh,lowerTwoSigma:B.twoLow,upperOneSigma:B.oneHigh,lowerOneSigma:B.oneLow},M=new Array(m.length).fill(null),v=NaN,D=NaN}else c.push({code:"unknown_chart_type",category:"config",severity:"error",message:`Unknown ChartType '${e}' â€“ supported: XmR, T, G.`,context:{chartType:e}});const N=f.map((x,S)=>{const B=!x.ghost&&be(x.value)?m.slice(0,S+1).filter((H,Q)=>!I[Q]&&be(H)).length:0,P=h,$=P?T:{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};return{rowId:x.rowId,x:x.x,value:be(x.value)?x.value:null,ghost:x.ghost,partitionId:p,pointRank:B,mean:P&&be(C)?C:null,mr:be(M[S])?M[S]:null,mrMean:P&&be(v)?v:null,mrUcl:P&&be(D)?D:null,upperProcessLimit:be($.upperProcessLimit)?$.upperProcessLimit:null,lowerProcessLimit:be($.lowerProcessLimit)?$.lowerProcessLimit:null,upperTwoSigma:be($.upperTwoSigma)?$.upperTwoSigma:null,lowerTwoSigma:be($.lowerTwoSigma)?$.lowerTwoSigma:null,upperOneSigma:be($.upperOneSigma)?$.upperOneSigma:null,lowerOneSigma:be($.lowerOneSigma)?$.lowerOneSigma:null,target:be(x.target)?x.target:null,specialCauseSinglePointAbove:!1,specialCauseSinglePointBelow:!1,specialCauseTwoOfThreeAbove:!1,specialCauseTwoOfThreeBelow:!1,specialCauseFourOfFiveAbove:!1,specialCauseFourOfFiveBelow:!1,specialCauseShiftHigh:!1,specialCauseShiftLow:!1,specialCauseTrendIncreasing:!1,specialCauseTrendDecreasing:!1,specialCauseFifteenInnerThird:!1,variationIcon:"none",assuranceIcon:"none",upperBaseline:P&&be(C)?C:null,lowerBaseline:P&&be(C)?C:null,movingRangeHighPointValue:P&&be(D)?D:null,ghostValue:x.ghost&&be(x.value)?x.value:null,ghostFlag:!!x.ghost,specialCauseImprovementValue:null,specialCauseConcernValue:null,specialCauseNeitherValue:null,ruleTags:[]}});g[p]=N.filter(x=>!x.ghost&&be(x.value)).length;const _=i.specialCauseShiftPoints??6,w=i.specialCauseTrendPoints??6,j=[];for(let x=0;x<N.length;x++){const S=N[x],B=S.value;if(!S.ghost&&be(B)&&j.push(x),!(be(S.mean)&&be(S.upperProcessLimit)&&be(S.lowerProcessLimit))||S.ghost||!be(B)){u.push(S);continue}S.specialCauseSinglePointAbove=be(S.upperProcessLimit)?B>S.upperProcessLimit:!1,S.specialCauseSinglePointBelow=be(S.lowerProcessLimit)?B<S.lowerProcessLimit:!1,u.push(S)}if(j.length){const x=P=>N[P];let S=[],B=[];for(const P of j){const $=x(P);if(!be($.mean)||!be($.value)){S=[],B=[];continue}if($.value>$.mean?(S.push(P),B=[]):$.value<$.mean?(B.push(P),S=[]):(S=[],B=[]),S.length>=_)for(const k of S)x(k).specialCauseShiftHigh=!0;if(B.length>=_)for(const k of B)x(k).specialCauseShiftLow=!0}for(let P=0;P<=j.length-3;P++){const k=j.slice(P,P+3).map(x);if(!k.every(ie=>be(ie.mean)&&be(ie.value)))continue;const H=k[0].mean,Q=k.every(ie=>ie.value>H),O=k.every(ie=>ie.value<H);if(!Q&&!O)continue;const z=k[0].upperTwoSigma??1/0,W=k[0].lowerTwoSigma??-1/0,R=k[0].upperProcessLimit??1/0,E=k[0].lowerProcessLimit??-1/0,L=k.filter(ie=>ie.value>z&&ie.value<=R),X=k.filter(ie=>ie.value<W&&ie.value>=E);if(Q&&L.length>=2)for(const ie of L)ie.specialCauseTwoOfThreeAbove=!0;if(O&&X.length>=2)for(const ie of X)ie.specialCauseTwoOfThreeBelow=!0}if(i.enableFourOfFiveRule)for(let P=0;P<=j.length-5;P++){const k=j.slice(P,P+5).map(x);if(!k.every(R=>be(R.mean)&&be(R.value)))continue;const H=k[0].mean;if(!k.every(R=>R.value>H)&&!k.every(R=>R.value<H))continue;const Q=k[0].upperOneSigma??1/0,O=k[0].lowerOneSigma??-1/0,z=k.filter(R=>R.value>Q),W=k.filter(R=>R.value<O);if(k.every(R=>R.value>H)&&z.length>=4)for(const R of z)R.specialCauseFourOfFiveAbove=!0;if(k.every(R=>R.value<H)&&W.length>=4)for(const R of W)R.specialCauseFourOfFiveBelow=!0}for(let P=0;P<=j.length-w;P++){const $=j.slice(P,P+w),k=$.map(x);if(!k.every(O=>be(O.value)))continue;let H=!0,Q=!0;for(let O=1;O<k.length&&(k[O].value>k[O-1].value||(H=!1),k[O].value<k[O-1].value||(Q=!1),!(!H&&!Q));O++);if(H)for(const O of $)x(O).specialCauseTrendIncreasing=!0;if(Q)for(const O of $)x(O).specialCauseTrendDecreasing=!0}if(i.enableFifteenInInnerThirdRule){let P=[];for(const $ of j){const k=x($);if(!be(k.value)||!be(k.mean)||!be(k.upperOneSigma)||!be(k.lowerOneSigma)){P=[];continue}if(!(k.value<k.upperOneSigma&&k.value>k.lowerOneSigma)){P=[];continue}if(P.push($),P.length>=15){const Q=P.map(x),O=Q.some(W=>W.value>W.mean),z=Q.some(W=>W.value<W.mean);if(O&&z)for(const W of P)x(W).specialCauseFifteenInnerThird=!0}}}}if(i.maximumPointsPartition&&Number.isFinite(i.maximumPointsPartition)){const x=i.maximumPointsPartition;let S=0;for(const B of u.filter(P=>P.partitionId===p))!B.ghost&&be(B.value)&&S++,S>x&&(B.mean=B.upperProcessLimit=B.lowerProcessLimit=null,B.upperTwoSigma=B.lowerTwoSigma=B.upperOneSigma=B.lowerOneSigma=null)}}for(const f of u){if(f.ruleTags&&f.ruleTags.length)continue;const m=[];f.specialCauseShiftHigh&&m.push("shift_high"),f.specialCauseShiftLow&&m.push("shift_low"),f.specialCauseTrendIncreasing&&m.push("trend_inc"),f.specialCauseTrendDecreasing&&m.push("trend_dec"),f.specialCauseSinglePointAbove&&m.push("single_above"),f.specialCauseSinglePointBelow&&m.push("single_below"),f.specialCauseTwoOfThreeAbove&&m.push("two_of_three_high"),f.specialCauseTwoOfThreeBelow&&m.push("two_of_three_low"),f.specialCauseFourOfFiveAbove&&m.push("four_of_five_high"),f.specialCauseFourOfFiveBelow&&m.push("four_of_five_low"),f.specialCauseFifteenInnerThird&&m.push("fifteen_inner_third"),m.length&&(f.ruleTags=m)}for(let f=0;f<u.length;f++){const m=u[f];if(m.ghost||!be(m.value)||m.mean===null){m.variationIcon="none";continue}const I=be(m.value)&&be(m.mean)&&m.value>m.mean,M=be(m.value)&&be(m.mean)&&m.value<m.mean;i.collapseClusterRules&&(m.specialCauseTwoOfThreeAbove&&m.specialCauseFourOfFiveAbove&&(m.specialCauseTwoOfThreeAbove=!1),m.specialCauseTwoOfThreeBelow&&m.specialCauseFourOfFiveBelow&&(m.specialCauseTwoOfThreeBelow=!1));const C=m.specialCauseTrendIncreasing&&(i.trendSideGatingEnabled?I:!0),v=m.specialCauseTrendDecreasing&&(i.trendSideGatingEnabled?M:!0),D=m.specialCauseSinglePointAbove||m.specialCauseTwoOfThreeAbove||i.enableFourOfFiveRule&&m.specialCauseFourOfFiveAbove||m.specialCauseShiftHigh||C,T=m.specialCauseSinglePointBelow||m.specialCauseTwoOfThreeBelow||i.enableFourOfFiveRule&&m.specialCauseFourOfFiveBelow||m.specialCauseShiftLow||v;let N=!1;if(i.precedenceStrategy==="directional_first"&&i.emergingDirectionGrace){const w=i.specialCauseTrendPoints||6;if(w>1&&!(m.specialCauseTrendIncreasing||m.specialCauseTrendDecreasing)){const j=w-1,x=[];for(let S=f;S>=0&&x.length<j;S--){const B=u[S];!B.ghost&&be(B.value)&&B.mean!==null&&x.unshift(B)}if(x.length===j){let S=!0;for(let B=1;B<x.length&&S;B++)n==="Up"?x[B].value>x[B-1].value||(S=!1):n==="Down"&&x[B].value<x[B-1].value||(S=!1);N=S}}}if(i.precedenceStrategy==="directional_first"){const w=n==="Up"?D:n==="Down"?T:!1,j=n==="Up"?T:n==="Down"?D:!1;w&&!j?m.variationIcon="improvement":j&&!w?m.variationIcon=N?"neither":"concern":w&&j?m.variationIcon=N||m.specialCauseTrendIncreasing||m.specialCauseTrendDecreasing?"improvement":"neither":m.variationIcon="neither"}else n==="Up"?m.variationIcon=D?"improvement":T?"concern":"neither":n==="Down"?m.variationIcon=T?"improvement":D?"concern":"neither":m.variationIcon="neither";const _=D||T;if(m.specialCauseImprovementValue=_&&m.variationIcon==="improvement"?m.value:null,m.specialCauseConcernValue=_&&m.variationIcon==="concern"?m.value:null,m.specialCauseNeitherValue=_&&m.variationIcon==="neither"?m.value:null,be(m.value)&&m.mean!==null){m.assuranceIcon="none";const w=o[m.rowId-1];if(be(w.target)){const j=w.target;i.assuranceCapabilityMode&&be(m.upperProcessLimit)&&be(m.lowerProcessLimit)?n==="Up"?m.lowerProcessLimit!==null&&m.lowerProcessLimit>j?m.assuranceIcon="pass":m.upperProcessLimit!==null&&m.upperProcessLimit<j?m.assuranceIcon="fail":m.assuranceIcon="none":n==="Down"?m.upperProcessLimit!==null&&m.upperProcessLimit<j?m.assuranceIcon="pass":m.lowerProcessLimit!==null&&m.lowerProcessLimit>j?m.assuranceIcon="fail":m.assuranceIcon="none":m.assuranceIcon="none":n==="Down"?m.assuranceIcon=m.value<=j?"pass":"fail":n==="Up"?m.assuranceIcon=m.value>=j?"pass":"fail":m.assuranceIcon="none"}}}if((i.minimumPointsWarning??!1)&&!h){const f=o.filter(m=>!m.ghost&&be(m.value)).length;c.push({code:"insufficient_points_global",category:"data",severity:"warning",message:`Only ${f} non-ghost points available; minimum required is ${i.minimumPoints}. Limits and icons suppressed.`,context:{available:f,minimumRequired:i.minimumPoints}})}if(i.variationIconConflictWarning)for(const f of u)f.variationIcon==="improvement"&&(f.specialCauseSinglePointAbove||f.specialCauseTwoOfThreeAbove||i.enableFourOfFiveRule&&f.specialCauseFourOfFiveAbove||f.specialCauseShiftHigh||f.specialCauseTrendIncreasing)&&(f.specialCauseSinglePointBelow||f.specialCauseTwoOfThreeBelow||i.enableFourOfFiveRule&&f.specialCauseFourOfFiveBelow||f.specialCauseShiftLow||f.specialCauseTrendDecreasing)&&c.push({code:"variation_conflict_row",category:"logic",severity:"warning",message:`Row ${f.rowId}: simultaneous high/low special-cause signals â€“ variation icon may be ambiguous.`,context:{rowId:f.rowId}});if(i.maximumPoints&&Number.isFinite(i.maximumPoints)){const f=i.maximumPoints;let m=0;for(const I of u)!I.ghost&&be(I.value)&&m++,m>f&&(I.mean=I.upperProcessLimit=I.lowerProcessLimit=null,I.upperTwoSigma=I.lowerTwoSigma=I.upperOneSigma=I.lowerOneSigma=null)}if(i.nullValueWarning&&(e==="XmR"||e==="G")){const f=o.filter(m=>!m.ghost&&(m.value===null||m.value===void 0||!be(m.value))).length;f&&c.push({code:"null_values_excluded",category:"data",severity:"info",message:`${f} null/missing value(s) excluded from calculations.`,context:{nullCount:f}})}if(i.targetSuppressedWarning&&(e==="T"||e==="G")&&o.some(m=>be(m.target))&&c.push({code:"target_ignored_rare_event",category:"target",severity:"info",message:`Targets provided are ignored for ${e} charts in this port.`,context:{chartType:e}}),i.ghostOnRareEventWarning&&(e==="T"||e==="G")){const f=o.filter(m=>m.ghost).length;f&&c.push({code:"ghost_rows_rare_event",category:"ghost",severity:"info",message:`${f} ghost row(s) supplied for rare-event chart (${e}); verify intent.`,context:{chartType:e,ghostCount:f}})}if(i.partitionSizeWarnings&&Object.entries(g).forEach(([f,m])=>{m<i.minimumPointsPartition&&c.push({code:"insufficient_points_partition",category:"partition",severity:"warning",message:`Partition ${f} has only ${m} non-ghost point(s); below recommended ${i.minimumPointsPartition}.`,context:{partitionId:Number(f),count:m,minimum:i.minimumPointsPartition}})}),i.baselineSpecialCauseWarning){const f=[];u.forEach(m=>{o[m.rowId-1].baseline&&(m.specialCauseSinglePointAbove||m.specialCauseSinglePointBelow||m.specialCauseTwoOfThreeAbove||m.specialCauseTwoOfThreeBelow||m.specialCauseFourOfFiveAbove||m.specialCauseFourOfFiveBelow||m.specialCauseShiftHigh||m.specialCauseShiftLow||m.specialCauseTrendIncreasing||m.specialCauseTrendDecreasing)&&f.push(m.rowId)}),f.length&&c.push({code:"baseline_with_special_cause",category:"baseline",severity:"warning",message:`Baseline set with special-cause present at row(s): ${f.join(", ")}.`,context:{rows:f}})}i.maximumPointsWarnings&&(i.maximumPointsPartition&&Number.isFinite(i.maximumPointsPartition)&&c.push({code:"partition_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after ${i.maximumPointsPartition} non-ghost points per partition.`,context:{cap:i.maximumPointsPartition}}),i.maximumPoints&&Number.isFinite(i.maximumPoints)&&c.push({code:"global_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after global cap of ${i.maximumPoints} non-ghost points.`,context:{cap:i.maximumPoints}}));let y;if(i.baselineSuggest){const f=u,m=i.baselineSuggestStabilityPoints,I=i.baselineSuggestMinGap,M=i.baselineSuggestMinDeltaSigma,C=i.baselineSuggestScoreThreshold,v=[];let D=0;for(let T=0;T<f.length;T++){let N=function(x){return!!_[x]&&!w?.[x]};const _=f[T];T>0&&f[T-1].partitionId!==_.partitionId&&(D=T);const w=f[T-1],j=[];(N("specialCauseShiftHigh")||N("specialCauseShiftLow"))&&j.push({reason:"shift",index:T}),(N("specialCauseTrendIncreasing")||N("specialCauseTrendDecreasing"))&&j.push({reason:"trend",index:T}),(N("specialCauseSinglePointAbove")||N("specialCauseSinglePointBelow"))&&j.push({reason:"point",index:T});for(const x of j){if(x.index-D<I)continue;const S=Math.max(0,x.index-m),B=x.index-1;if(B-S+1<m)continue;const P=x.index,$=x.index+m-1;if($>=f.length)continue;const k=f.slice(S,B+1).map(q=>q.value).filter(be),H=f.slice(P,$+1).map(q=>q.value).filter(be);if(k.length<m||H.length<m)continue;const Q=f[x.index];let O=null;if(be(Q.upperProcessLimit)&&be(Q.mean)){const q=Q.upperProcessLimit-Q.mean;q>0&&(O=q/3)}if(!O||O<=0)continue;const z=Ht(k),W=Ht(H),R=W-z;if(Math.abs(R)<M*O)continue;const L=f.slice(P,$+1).filter(q=>q.variationIcon==="concern").length;if(L>1)continue;const X=q=>{const ue=Ht(q);return q.length?q.reduce((U,le)=>U+(le-ue)*(le-ue),0)/q.length:0},ie=X(k),te=X(H);let Y=x.reason==="shift"?90:x.reason==="trend"?70:60;if(te<ie&&(Y+=10),Y-=L*15,Y<C)continue;const G=v.find(q=>q.index===x.index);if(G){const q=ue=>ue==="shift"?3:ue==="trend"?2:1;(q(x.reason)>q(G.reason)||Y>G.score)&&(G.reason=x.reason,G.score=Y,G.deltaMean=R,G.oldMean=z,G.newMean=W,G.window=[P,$])}else v.push({index:x.index,reason:x.reason,score:Y,deltaMean:R,oldMean:z,newMean:W,window:[P,$]})}T>0&&f[T-1].partitionId!==f[T].partitionId&&(D=T)}v.sort((T,N)=>T.index-N.index),y=v}return{rows:u,warnings:c,...y?{suggestedBaselines:y}:{}}}const eo={singlePointAbove:{tooltip:"Single point above upper control limit",narration:"Single point beyond a control limit"},singlePointBelow:{tooltip:"Single point below lower control limit",narration:"Single point beyond a control limit"},twoOfThreeAbove:{tooltip:"Two of three points beyond +2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},twoOfThreeBelow:{tooltip:"Two of three points beyond -2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},fourOfFiveAbove:{tooltip:"Four of five points beyond +1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},fourOfFiveBelow:{tooltip:"Four of five points beyond -1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},shiftHigh:{tooltip:"Shift: run of points above centre line",narration:"Shift (run on one side of mean)"},shiftLow:{tooltip:"Shift: run of points below centre line",narration:"Shift (run on one side of mean)"},trendIncreasing:{tooltip:"Trend: consecutive increasing points",narration:"Trend (consecutive increases)"},trendDecreasing:{tooltip:"Trend: consecutive decreasing points",narration:"Trend (consecutive decreases)"}};function to(t){if(!t)return[];const e=[];return t.specialCauseSinglePointAbove&&e.push("singlePointAbove"),t.specialCauseSinglePointBelow&&e.push("singlePointBelow"),t.specialCauseTwoOfThreeAbove&&e.push("twoOfThreeAbove"),t.specialCauseTwoOfThreeBelow&&e.push("twoOfThreeBelow"),t.specialCauseFourOfFiveAbove&&e.push("fourOfFiveAbove"),t.specialCauseFourOfFiveBelow&&e.push("fourOfFiveBelow"),t.specialCauseShiftHigh&&e.push("shiftHigh"),t.specialCauseShiftLow&&e.push("shiftLow"),t.specialCauseTrendIncreasing&&e.push("trendIncreasing"),t.specialCauseTrendDecreasing&&e.push("trendDecreasing"),e}function no(t){switch(t){case Ve.Improvement:return"Improvement signal";case Ve.Concern:return"Concern signal";case Ve.Neither:return"Common cause variation";case Ve.None:return null;default:return null}}function Tx(t){switch(t){case _n.Pass:return"Target met";case _n.Fail:return"Target not met";default:return null}}function Nx(t,e,n){if(t==null||!Number.isFinite(e)||e<=0)return null;const r=Math.abs((n-t)/e);return r<1?"Within 1Ïƒ":r<2?"Between 1â€“2Ïƒ":r<3?"Between 2â€“3Ïƒ":"Beyond 3Ïƒ"}const Lt={improvement:{token:"var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",hex:"#00B0F0"},concern:{token:"var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",hex:"#E46C0A"},none:{token:"var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",hex:"#490092"},neither:{token:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",hex:"#A6A6A6"}};function md(t){return t?Lt[t]?.token??Lt.neither.token:Lt.neither.token}function jx(t){return t?Lt[t]?.hex??Lt.neither.hex:Lt.neither.hex}const pd=({engineRows:t,limits:e,pointDescriber:n,measureName:r,measureUnit:a,dateFormatter:i,enableNeutralNoJudgement:o=!0,showTrendGatingExplanation:l=!0})=>{const u=bn(),c=gn(),[d,h]=V.useState(null),[p,g]=V.useState(!1),y=V.useRef(null);V.useEffect(()=>{if(u){if(u.focused&&(h(u.focused),y.current&&(cancelAnimationFrame(y.current),y.current=null)),!u.focused&&!p){const pe=requestAnimationFrame(()=>{h(null),y.current=null});y.current=pe}return()=>{y.current&&(cancelAnimationFrame(y.current),y.current=null)}}},[u,u?.focused,p]);const f=u&&(u.focused||(p?d:null)||d),[m,I]=V.useState(!1);V.useEffect(()=>{const pe=requestAnimationFrame(()=>I(!0));return()=>cancelAnimationFrame(pe)},[f?.index]);const M=c?.innerWidth??0,C=c?.innerHeight??0,v=f?Math.min(Math.max(f.clientX,0),M):0,D=f?Math.min(Math.max(f.clientY,0),C):0,N=c.ref?.current;if(!f)return null;const _=t?.[f.index],j=to(_).map(pe=>({id:pe,label:eo[pe].tooltip})),x=f.x instanceof Date?f.x:new Date(f.x),S=i?i(x):x.toDateString(),B=a?`${a}`:"",P=r||B?`${f.y}${B?""+B:" "}${r?" "+r:""}`:`${f.y}`,$=no(_?.variationIcon),k=Tx(_?.assuranceIcon),H=Nx(e.mean??null,e.sigma,f.y),Q=n?n(f.index,{x:f.x,y:f.y}):void 0,O=$||k||H,z=_?.specialCauseTrendIncreasing||_?.specialCauseTrendDecreasing,W=_?.variationIcon===Ve.Neither&&z,R=l&&W?"Trend detected (monotonic run) â€“ held neutral until values cross onto the favourable side of the mean.":null,E=j.length>0,L=o&&_?.variationIcon===Ve.Neither&&E,X="var(--nhs-fdp-color-primary-yellow, #ffeb3b)",ie=md(_?.variationIcon),te=6.2,G=[Q||"",`${S} â€¢ ${P}`].filter(Boolean).reduce((pe,ve)=>Math.max(pe,ve.length*te+32),0),q=200,ue=440,U=Math.min(ue,Math.max(q,G));let le=v+12,he=(c.margin?.top??0)+D+16;le+U>M&&(le=v- -60-U),le<0&&(le=Math.max(0,M-U));const ne=f?`spc-tooltip-${f.index}`:"spc-tooltip",fe=N?wg.createPortal(s.jsx("div",{id:ne,className:"fdp-spc-tooltip fdp-spc-tooltip-portal"+(m?" is-visible":""),style:{position:"absolute",left:le,top:he,width:U,maxWidth:ue,zIndex:10,pointerEvents:"auto",userSelect:"none"},role:"tooltip","aria-live":"polite","aria-hidden":m?"false":"true","data-floating":!0,"data-placement":le+U+12>M?"left":"right",onPointerEnter:()=>{g(!0),y.current&&(cancelAnimationFrame(y.current),y.current=null)},onPointerLeave:()=>{if(g(!1),!u?.focused){const pe=requestAnimationFrame(()=>{h(null),y.current=null});y.current=pe}},children:s.jsxs("div",{className:"fdp-spc-tooltip__body",children:[s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--date",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Date"})}),s.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:S})]}),s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--value",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Value"})}),s.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:P})]}),O&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--signals",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Signals"})}),s.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Signals",children:$?.toLowerCase().includes("concern")?s.jsx(Ye,{text:$,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):$?.toLowerCase().includes("improvement")?s.jsx(Ye,{text:$,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):L?s.jsx(Ye,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):$?s.jsx(Ye,{text:$,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null})]}),k&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--assurance",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Assurance"})}),s.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:(()=>{const pe=k.toLowerCase(),me=!(pe.includes("not met")||pe.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(pe);return s.jsx(Ye,{text:k,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${me?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${k}`})})()})]}),H&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--limits",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Control Limits & Sigma"})}),s.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:s.jsx(Ye,{text:(()=>{const pe=H.toLowerCase();return pe.startsWith("within 1")?"â‰¤1Ïƒ":pe.startsWith("1â€“2")?"1â€“2Ïƒ":pe.startsWith("2â€“3")?"2â€“3Ïƒ":pe.startsWith(">3")?">3Ïƒ":H})(),color:H.includes(">3")?"orange":H.includes("2â€“3")?"yellow":"grey","aria-label":`Sigma zone: ${H}`,className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--zone"})})]}),R&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--gating","data-gating":!0,children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Trend gating"})}),s.jsx("div",{className:"fdp-spc-tooltip__explanation","aria-live":"off",children:R})]}),E&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Special cause"})}),s.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",children:j.map(({id:pe,label:ve})=>{const me=String(pe),Z=me==="trend_inc"||me==="trend_dec"?"fdp-spc-tag--trend":L?"fdp-spc-tag--no-judgement":$?$.toLowerCase().includes("concern")?"fdp-spc-tag--concern":$.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common";return s.jsx(Ye,{text:ve,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${Z}`,"data-rule-id":me},me)})})]})]})}),N):null;return s.jsxs("g",{className:"fdp-tooltip-layer fdp-spc-tooltip",pointerEvents:"none","aria-hidden":"true",children:[s.jsx("circle",{cx:v,cy:D,r:7,fill:"none",stroke:X,strokeWidth:3}),s.jsx("circle",{cx:v,cy:D,r:5,fill:"#000",stroke:X,strokeWidth:1.5}),s.jsx("circle",{cx:v,cy:D,r:2.5,fill:ie,stroke:"#fff",strokeWidth:.5}),fe]})};let ro=null;try{ro=require("@fergusbisset/nhs-fdp-design-system/dist/js/tokens.json")?.color?.["data-viz"]?.spc||null}catch{}const jt=(t,e)=>{if(!ro)return e;const n=t.split(".");let r=ro;for(const i of n){if(r==null)break;r=r[i]}const a=r;return a==null?e:typeof a=="string"||typeof a=="number"?String(a):a.$value!=null?String(a.$value):a.value!=null?String(a.value):e},gd=()=>({start:jt("gradient.stop.start-opacity","0.12"),mid:jt("gradient.stop.mid-opacity","0.03"),end:jt("gradient.stop.end-opacity","0"),triStart:jt("gradient.stop.triangle-start-opacity",jt("gradient.stop.start-opacity","0.12")),triMid:jt("gradient.stop.triangle-mid-opacity",jt("gradient.stop.mid-opacity","0.03")),triEnd:jt("gradient.stop.triangle-end-opacity",jt("gradient.stop.end-opacity","0"))});var xn=(t=>(t.Pass="pass",t.Fail="fail",t.Uncertain="uncertain",t))(xn||{});const Dx={pass:"#00B0F0",fail:"#E46C0A",uncertain:"#A6A6A6"},Mx={pass:"P",fail:"F",uncertain:"?"};var qe=(t=>(t.HigherIsBetter="higher_is_better",t.LowerIsBetter="lower_is_better",t.ContextDependent="context_dependent",t))(qe||{}),ke=(t=>(t.Higher="higher",t.Lower="lower",t))(ke||{}),ft=(t=>(t.Improving="improving",t.Deteriorating="deteriorating",t.No_Judgement="no_judgement",t.None="none",t))(ft||{}),$e=(t=>(t.SpecialCauseImproving="special_cause_improving",t.SpecialCauseDeteriorating="special_cause_deteriorating",t.CommonCause="common_cause",t.SpecialCauseNoJudgement="special_cause_no_judgement",t))($e||{});const $x=t=>{const e=t.replace("#",""),n=parseInt(e.slice(0,2),16)/255,r=parseInt(e.slice(2,4),16)/255,a=parseInt(e.slice(4,6),16)/255,i=[n,r,a].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*i[0]+.7152*i[1]+.0722*i[2]<.55?"#ffffff":"#212b32"},ao={special_cause_deteriorating:{hex:Lt.concern.hex,judgement:"deteriorating",label:"Special Cause (Deteriorating)",description:"Deteriorating variation detected (special cause) relative to baseline."},special_cause_improving:{hex:Lt.improvement.hex,judgement:"improving",label:"Special Cause (Improving)",description:"Improving variation detected (special cause) relative to baseline."},common_cause:{hex:Lt.neither.hex,judgement:"none",label:"Common Cause",description:"Common cause variation only â€“ no special cause detected."},special_cause_no_judgement:{hex:Lt.none.hex,judgement:"no_judgement",label:"Special Cause (No Judgement)",description:"Special cause detected without assigning improving/deteriorating judgement."}};Object.values(ao).forEach(t=>{t.text||(t.text=$x(t.hex))});const io=t=>ao[t],ui=t=>ao[t].judgement||"none",bd={special:{higher:[{cx:77.5,cy:158.5},{cx:114,cy:175},{cx:150.5,cy:158.5},{cx:188,cy:125},{cx:225,cy:137}],lower:[{cx:77.5,cy:139.5},{cx:114,cy:124.5},{cx:150.5,cy:139.5},{cx:188,cy:175.5},{cx:224.5,cy:162}]},common:[{cx:76.5,cy:149.5},{cx:113,cy:179.5},{cx:149.5,cy:117},{cx:187,cy:171},{cx:223.5,cy:158}]};function Ix(t,e){let n;return t==="common_cause"?n=bd.common:n=bd.special[e==="lower"?"lower":"higher"],n.map(r=>({...r}))}const _d=t=>{const e=()=>{globalThis.__spcIconDeprecationEmitted||(console.warn("[SPCVariationIcon] Deprecated payload shape detected. Migrate to { variationIcon, improvementDirection, specialCauseNeutral?, trend? }."),globalThis.__spcIconDeprecationEmitted=!0)};if(t.variationIcon!==void 0){const o=t;let l;o.improvementDirection!==void 0?l=o.improvementDirection===Et.Up?qe.HigherIsBetter:o.improvementDirection===Et.Down?qe.LowerIsBetter:qe.ContextDependent:o.polarity&&(l=o.polarity);let u;switch(o.variationIcon){case Ve.Improvement:u=$e.SpecialCauseImproving;break;case Ve.Concern:u=$e.SpecialCauseDeteriorating;break;case Ve.Neither:u=o.specialCauseNeutral?$e.SpecialCauseNoJudgement:$e.CommonCause;break;case Ve.None:default:u=$e.SpecialCauseNoJudgement;break}let c=o.trend;return c||(u===$e.SpecialCauseImproving?c=l===qe.LowerIsBetter?ke.Lower:ke.Higher:u===$e.SpecialCauseDeteriorating?c=l===qe.LowerIsBetter?ke.Higher:ke.Lower:u===$e.SpecialCauseNoJudgement?o.highSideSignal&&!o.lowSideSignal?c=ke.Higher:o.lowSideSignal&&!o.highSideSignal?c=ke.Lower:c=ke.Higher:c=ke.Higher),{state:u,direction:c,polarity:l??qe.ContextDependent}}if(t.state!==void 0){e();const o=t;let l=o.trend;return!l&&(o.state===$e.SpecialCauseImproving||o.state===$e.SpecialCauseDeteriorating)&&o.polarity&&(o.state===$e.SpecialCauseImproving?l=o.polarity===qe.LowerIsBetter?ke.Lower:ke.Higher:l=o.polarity===qe.LowerIsBetter?ke.Higher:ke.Lower),l||(o.state===$e.SpecialCauseImproving?l=ke.Higher:o.state===$e.SpecialCauseDeteriorating?l=ke.Lower:l=ke.Higher),{state:o.state,direction:l,polarity:o.polarity??qe.ContextDependent}}const n=t;e();const a={[ft.Improving]:$e.SpecialCauseImproving,[ft.Deteriorating]:$e.SpecialCauseDeteriorating,[ft.No_Judgement]:$e.SpecialCauseNoJudgement,[ft.None]:$e.CommonCause}[n.judgement];let i;return n.judgement===ft.Improving?i=n.polarity===qe.LowerIsBetter?ke.Lower:ke.Higher:n.judgement===ft.Deteriorating?i=n.polarity===qe.LowerIsBetter?ke.Higher:ke.Lower:i=n.trend??ke.Higher,{state:a,direction:i,polarity:n.polarity}};function Px(t,e){const{state:n,direction:r,polarity:a}=_d(t),i=ui(n),o=r===ke.Higher?"above":"below",l=r===ke.Higher?"upwards":"downwards",u=(()=>{switch(a){case qe.HigherIsBetter:return"For this measure, higher values are better.";case qe.LowerIsBetter:return"For this measure, lower values are better.";default:return"Direction of improvement is context dependent."}})();return[(()=>{switch(i){case ft.Improving:return`Special cause improvement: recent data show a sustained run ${o} the mean (unlikely due to random variation).`;case ft.Deteriorating:return`Special cause deterioration: recent data show a sustained run ${o} the mean (unlikely due to random variation).`;case ft.No_Judgement:return`Special cause detected (no value judgement): recent data show a change in level, trending ${l}.`;case ft.None:default:return"Common cause variation: points vary randomly around the mean; no special cause detected."}})(),u,null,null,null,null,null].filter(Boolean).join(" ")}const so=(t,e,n,r,a,i)=>s.jsxs("defs",{children:[r&&s.jsxs("filter",{id:e,filterUnits:"objectBoundingBox",children:[s.jsx("feGaussianBlur",{stdDeviation:"3"}),s.jsx("feOffset",{dx:"0",dy:"15",result:"blur"}),s.jsx("feFlood",{floodColor:"rgb(150,150,150)",floodOpacity:"1"}),s.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),a&&s.jsx("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:i.map(o=>s.jsx("stop",{offset:o.offset,stopColor:t,stopOpacity:parseFloat(o.opacity)},o.offset))})]}),di=({data:t,size:e=44,ariaLabel:n,showLetter:r=!0,dropShadow:a=!0,gradientWash:i=!1,variant:o="classic",runLength:l=0,letterMode:u="polarity",letterOverride:c,...d})=>{const h=F.useId(),p=F.useId(),{start:g,mid:y,end:f,triStart:m,triMid:I,triEnd:M}=gd(),{state:C,direction:v,polarity:D}=F.useMemo(()=>_d(t),[t]),T=F.useMemo(()=>io(C),[C]),N=F.useMemo(()=>ui(C),[C]),_=N===ft.Improving||N===ft.Deteriorating;let w="";r&&_&&(u==="polarity"?D===qe.HigherIsBetter?w="H":D===qe.LowerIsBetter?w="L":w="":w=v===ke.Higher?"H":"L"),c!==void 0&&(w=c);const j=C!==$e.CommonCause,x=C===$e.SpecialCauseNoJudgement,S=jt("common-cause","#A6A6A6"),B=j?T.hex:S,P=F.useMemo(()=>Ix(C,v),[C,v]),$=n||`${T.label}${w?v===ke.Higher?" â€“ Higher":" â€“ Lower":""}`,k=Px(t);if(o==="triangleWithRun"){const W=[[150,90],[100,190],[200,190]],R=[[150,140+100/2],[150-100/2,140-100/2],[150+100/2,140-100/2]];let E=null;C===$e.SpecialCauseImproving||C===$e.SpecialCauseDeteriorating?E=s.jsx("polygon",{points:(v===ke.Higher?W:R).map(le=>le.join(",")).join(" "),fill:T.hex,stroke:T.hex,strokeWidth:6,transform:v===ke.Higher?"translate(0, -8)":"translate(0, 15)"}):C===$e.SpecialCauseNoJudgement&&(E=s.jsx("polygon",{points:v===ke.Higher?W.map(le=>le.join(",")).join(" "):R.map(le=>le.join(",")).join(" "),fill:T.hex,stroke:T.hex,strokeWidth:6,transform:v===ke.Higher?"translate(0,-7)":"translate(0,14)"}));const L=Math.max(0,Math.min(5,Math.floor(l||0))),X=C===$e.CommonCause?160:v===ke.Higher?220:70,ie=10,te=26,Y=150-2*te,G=C===$e.SpecialCauseImproving?jt("improvement","#00B0F0"):C===$e.SpecialCauseDeteriorating?jt("concern","#E46C0A"):S,q=Array.from({length:5}).map((le,se)=>{const ne=(C===$e.SpecialCauseImproving||C===$e.SpecialCauseDeteriorating)&&se>=5-L?G:S;return s.jsx("circle",{cx:Y+se*te,cy:X,r:ie,fill:ne,stroke:ne,strokeWidth:1},se)}),ue=so(T.hex,h,p,a,i,[{offset:"0%",opacity:m},{offset:"75%",opacity:I},{offset:"100%",opacity:M}]),U=C===$e.CommonCause||v===ke.Higher?"translate(0,-10)":"translate(0,25)";return s.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":$,"aria-description":k,...d,children:[ue,s.jsx("circle",{stroke:"none",fill:i?`url(#${p})`:"#ffffff",...a?{filter:`url(#${h})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("circle",{stroke:T.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),s.jsxs("g",{transform:U,children:[E,w&&s.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:64,x:"150",y:v===ke.Higher?155:145,textAnchor:"middle",dominantBaseline:"middle",children:w}),q]})]})}if(o==="triangle"){const W=[[150,75],[75,225],[225,225]],R=[[150,150+150/2],[150-150/2,150-150/2],[150+150/2,150-150/2]],E=[[150-150/2,150+150/2],[150+150/2,150+150/2]];let L=null;C===$e.SpecialCauseImproving||C===$e.SpecialCauseDeteriorating?L=s.jsx("polygon",{points:(v===ke.Higher?W:R).map(ie=>ie.join(",")).join(" "),fill:T.hex,stroke:T.hex,strokeWidth:8,transform:v===ke.Higher?"translate(0, -10)":"translate(0, 10)"}):C===$e.SpecialCauseNoJudgement?L=s.jsx("polygon",{points:v===ke.Higher?W.map(ie=>ie.join(",")).join(" "):R.map(ie=>ie.join(",")).join(" "),fill:T.hex,stroke:T.hex,strokeWidth:8,transform:v===ke.Higher?"translate(0, -15)":"translate(0, 15)"}):C===$e.CommonCause&&(L=s.jsx("line",{x1:E[0][0],y1:E[0][1],x2:E[1][0],y2:E[1][1],stroke:T.hex,strokeWidth:32,strokeLinecap:"square",transform:"translate(0, -75)"}));const X=so(T.hex,h,p,a,i,[{offset:"0%",opacity:m},{offset:"65%",opacity:I},{offset:"100%",opacity:M}]);return s.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":$,"aria-description":k,...d,children:[X,s.jsx("circle",{stroke:"none",fill:i?`url(#${p})`:"#ffffff",...a?{filter:`url(#${h})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("circle",{stroke:T.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),L,w&&(C===$e.SpecialCauseImproving||C===$e.SpecialCauseDeteriorating)&&s.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:100,x:"150",y:v===ke.Higher?"170":"140",textAnchor:"middle",dominantBaseline:"middle",children:w})]})}const H=so(T.hex,h,p,a,i,[{offset:"0%",opacity:g},{offset:"65%",opacity:y},{offset:"100%",opacity:f}]);return s.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":$,"aria-description":k,...d,children:[H,s.jsx("circle",{stroke:"none",fill:i?`url(#${p})`:"#ffffff",...a?{filter:`url(#${h})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("circle",{stroke:T.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),w&&s.jsx("text",{fill:T.hex,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,transform:"translate(86.67, 54) scale(0.5, 0.5)",textAnchor:"end",children:s.jsx("tspan",{x:"120",y:v===ke.Lower?"340":"155",children:w})}),x?s.jsx("path",{"aria-hidden":"true",fillRule:"evenodd",stroke:"none",fill:T.hex,...v===ke.Lower?{transform:"rotate(90 150 150)"}:{transform:"translate(-5 0) rotate(0 150 150)"},d:"M 90.26,185.42 L 149.31,126.37 127.44,104.51 209.81,90.66 195.96,173.02 174.09,151.16 115.05,210.2 90.26,185.42 Z M 90.26,185.42"}):s.jsxs(s.Fragment,{children:[P.length===5&&s.jsx("path",{"aria-hidden":"true",fill:"none",stroke:S,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9,d:`M ${P.map(Q=>`${Q.cx} ${Q.cy}`).join(" L ")}`}),P.map((Q,O)=>{const W=O>=P.length-2&&j?B:S,R=W;return s.jsx("circle",{stroke:R,strokeWidth:2,strokeMiterlimit:10,fill:W,cx:Q.cx,cy:Q.cy,r:16},O)})]})]})};di.displayName="SPCVariationIcon";const fi=({status:t,size:e=44,ariaLabel:n,dropShadow:r=!0,colourOverride:a,gradientWash:i=!1,letterOverride:o,showTrendLines:l=!0,...u})=>{const c=F.useId(),d=F.useId(),{start:h,mid:p,end:g}=gd(),y=a||Dx[t],f=(o||Mx[t]).slice(0,2),m=n||`Assurance ${t}`;return s.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":m,...u,children:[s.jsxs("defs",{children:[r&&s.jsxs("filter",{id:c,filterUnits:"objectBoundingBox",children:[s.jsx("feGaussianBlur",{stdDeviation:"3"}),s.jsx("feOffset",{dx:"-1",dy:"15",result:"blur"}),s.jsx("feFlood",{floodColor:"rgb(166,166,166)",floodOpacity:"1"}),s.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),i&&s.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:y,stopOpacity:parseFloat(h)}),s.jsx("stop",{offset:"65%",stopColor:y,stopOpacity:parseFloat(p)}),s.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:parseFloat(g)})]})]}),s.jsx("circle",{stroke:"none",fill:i?`url(#${d})`:"#ffffff",...r?{filter:`url(#${c})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("text",{fill:y,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,x:0,y:0,transform:"translate(121.01, 32) scale(0.5, 0.5)",textAnchor:"middle",children:s.jsx("tspan",{x:60,y:184,children:f})}),l&&s.jsxs(s.Fragment,{children:[t===xn.Fail?s.jsx("path",{id:"fail-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 33,143 L 268,143"}):t===xn.Uncertain?s.jsx("path",{id:"uncertain-line",stroke:"rgb(166, 166, 166)",strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"16.5,10",strokeDashoffset:0,fill:"none",d:"M 36,174 L 266,174"}):s.jsx("path",{id:"pass-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 48,204 L 254,204"}),s.jsx("path",{id:"data-sparkline",stroke:"rgb(166, 166, 166)",strokeWidth:12,strokeMiterlimit:12,fill:"none",d:"M 59.9,187.91 C 72.79,171.72 87.33,158.06 104.4,157.83 121.91,158.58 140.94,187.85 153.4,189.91 164.1,192.12 163.78,171.38 169.17,170.53 172.87,169.55 174.88,187.45 184.94,189.24 197,191.86 230.54,184.47 239.01,185.9"}),s.jsx("circle",{stroke:y,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"})]})]})};fi.displayName="SPCAssuranceIcon";let Lx=0;const yd=({data:t,ariaLabel:e="SPC chart",height:n=260,showZones:r=!0,showPoints:a=!0,announceFocus:i=!1,className:o,unit:l,highlightOutOfControl:u=!0,chartType:c=Qs.XmR,metricImprovement:d=Et.Neither,enableRules:h=!0,showIcons:p=!1,showEmbeddedIcon:g=!0,embeddedIconVariant:y="classic",embeddedIconRunLength:f,targets:m,baselines:I,ghosts:M,settings:C,narrationContext:v,gradientSequences:D=!1,processLineWidth:T=2,showWarningsPanel:N=!1,warningsFilter:_,enableNeutralNoJudgement:w=!0,showTrendGatingExplanation:j=!0,disableTrendSideGating:x=!1})=>{const S=V.useCallback(ne=>String(ne).replace(/^spc_warning_code\.?/i,"").replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(pe=>pe.length?pe[0].toUpperCase()+pe.slice(1):pe).join(" "),[]),B=V.useCallback(ne=>String(ne).replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(fe=>fe.length?fe[0].toUpperCase()+fe.slice(1):fe).join(" "),[]),P=V.useMemo(()=>{const ne=t.map((fe,pe)=>({x:fe.x,value:fe.y,target:m?.[pe]??void 0,baseline:I?.[pe]??void 0,ghost:M?.[pe]??void 0}));try{const fe=C?{...C,trendSideGatingEnabled:C.trendSideGatingEnabled??!x}:{trendSideGatingEnabled:!x};return hd({chartType:c,metricImprovement:d,data:ne,settings:fe})}catch{return null}},[t,m,I,M,c,d,C,x]),$=P?.rows.slice().reverse().find(ne=>ne.mean!=null),k=$?.mean??null,H=P?.warnings||[],Q=V.useMemo(()=>H.length?_?H.filter(ne=>!(_.severities&&ne.severity&&!_.severities.includes(ne.severity)||_.categories&&ne.category&&!_.categories.includes(ne.category)||_.codes&&!_.codes.includes(ne.code))):H:[],[H,_]),[O,z]=V.useState(""),W=V.useRef("");V.useEffect(()=>{if(!N){W.current!==""&&(W.current="",z(""));return}const ne=Q.length;if(!ne){const me="Diagnostics: no warnings.";me!==W.current&&(W.current=me,z(me));return}const fe={error:Q.filter(me=>me.severity===yn.Error).length,warning:Q.filter(me=>me.severity===yn.Warning).length,info:Q.filter(me=>me.severity===yn.Info).length},pe=[];fe.error&&pe.push(`${fe.error} error${fe.error===1?"":"s"}`),fe.warning&&pe.push(`${fe.warning} warning${fe.warning===1?"":"s"}`),fe.info&&pe.push(`${fe.info} info`);const ve=`Diagnostics updated: ${ne} warning${ne===1?"":"s"} (${pe.join(", ")}).`;ve!==W.current&&(W.current=ve,z(ve))},[N,Q]);const R=$?.upperProcessLimit??null,E=$?.lowerProcessLimit??null,L=$?.upperOneSigma??null,X=$?.lowerOneSigma??null,ie=$?.upperTwoSigma??null,te=$?.lowerTwoSigma??null,Y=k!=null&&L!=null?Math.abs(L-k):0,G=V.useMemo(()=>[{id:"process",data:t,color:"#A6A6A6"}],[t]),q=V.useMemo(()=>{const fe=[...t.map(pe=>pe.y)];if([k,R,E,L,X,ie,te].forEach(pe=>{pe!=null&&fe.push(pe)}),m&&m.forEach(pe=>{typeof pe=="number"&&!isNaN(pe)&&fe.push(pe)}),!!fe.length)return[Math.min(...fe),Math.max(...fe)]},[t,k,R,E,L,X,ie,te,m]),ue=V.useMemo(()=>{if(!(l||v?.measureUnit)&&t.length)return t.every(ne=>ne.y>=0&&ne.y<=1)?"%":void 0},[l,v?.measureUnit,t]),U=l??v?.measureUnit??ue,le=V.useMemo(()=>U?{...v||{},measureUnit:U}:v,[v,U]),se=V.useMemo(()=>{if(!P?.rows)return[];const ne=[];for(let fe=1;fe<P.rows.length;fe++)P.rows[fe].partitionId!==P.rows[fe-1].partitionId&&ne.push(fe);return ne},[P?.rows]),he=V.useMemo(()=>{if(!g||!P?.rows?.length)return null;const ne=P.rows,fe=C?.minimumPoints??13;if(ne.filter(re=>!re.ghost&&re.value!=null).length<fe)return null;let ve=-1;for(let re=ne.length-1;re>=0;re--){const J=ne[re];if(J&&J.value!=null&&!J.ghost){ve=re;break}}if(ve===-1)return null;const me=ne[ve],ee=me.variationIcon,Z=me.assuranceIcon,oe=ee===Ve.Neither&&!!me.specialCauseNeitherValue,ae=Z===_n.Pass?xn.Pass:Z===_n.Fail?xn.Fail:xn.Uncertain;let A;if(ee===Ve.None){const re=me.specialCauseSinglePointAbove,J=me.specialCauseSinglePointBelow;d===Et.Up?re?A=ke.Higher:J&&(A=ke.Lower):d===Et.Down?J?A=ke.Lower:re&&(A=ke.Higher):A=ke.Higher}else if(ee===Ve.Neither&&oe){const re=me.specialCauseSinglePointAbove||me.specialCauseTwoOfThreeAbove||me.specialCauseFourOfFiveAbove||me.specialCauseShiftHigh||me.specialCauseTrendIncreasing,J=me.specialCauseSinglePointBelow||me.specialCauseTwoOfThreeBelow||me.specialCauseFourOfFiveBelow||me.specialCauseShiftLow||me.specialCauseTrendDecreasing;re&&!J?A=ke.Higher:J&&!re?A=ke.Lower:A=ke.Higher}let K;d===Et.Up?K=qe.HigherIsBetter:d===Et.Down?K=qe.LowerIsBetter:K=qe.ContextDependent;const ce=80;return s.jsxs("div",{style:{display:"flex",gap:12,marginRight:16},children:[s.jsx("div",{className:"fdp-spc-chart__embedded-icon","data-variation":String(ee),"data-trend-raw":A?String(A):"none","data-trend":A?String(A):"none","data-polarity":String(K??"unknown"),style:{width:ce,height:ce},children:s.jsx(di,{dropShadow:!1,data:{variationIcon:ee,improvementDirection:d,polarity:K,specialCauseNeutral:oe,highSideSignal:me.specialCauseSinglePointAbove||me.specialCauseTwoOfThreeAbove||me.specialCauseFourOfFiveAbove||me.specialCauseShiftHigh||me.specialCauseTrendIncreasing,lowSideSignal:me.specialCauseSinglePointBelow||me.specialCauseTwoOfThreeBelow||me.specialCauseFourOfFiveBelow||me.specialCauseShiftLow||me.specialCauseTrendDecreasing,...A?{trend:A}:{}},letterMode:d===Et.Neither?"direction":"polarity",size:ce,variant:y,runLength:y==="triangleWithRun"?f:void 0})}),s.jsx("div",{className:"fdp-spc-chart__embedded-assurance-icon","data-assurance":String(Z),style:{width:ce,height:ce},children:s.jsx(fi,{status:ae,size:ce,dropShadow:!1})})]},`embedded-icon-${ve}`)},[g,P?.rows,d,C?.minimumPoints,m,y,f]);return s.jsxs("div",{className:o?`fdp-spc-chart-wrapper ${o}`:"fdp-spc-chart-wrapper",children:[g&&s.jsx("div",{className:"fdp-spc-chart__top-row",style:{display:"flex",justifyContent:"flex-end",marginBottom:4},children:he}),s.jsx(Xu,{height:n,ariaLabel:e,margin:{bottom:48,left:56,right:16,top:12},className:void 0,children:s.jsx(Ku,{series:G,yDomain:q,children:s.jsx(Fx,{series:G,showPoints:a,announceFocus:i,limits:{mean:k,ucl:R,lcl:E,sigma:Y,onePos:L,oneNeg:X,twoPos:ie,twoNeg:te},showZones:r,highlightOutOfControl:u,engineRows:P?.rows||null,enableRules:h,showIcons:p,narrationContext:le,metricImprovement:d,gradientSequences:D,processLineWidth:T,effectiveUnit:U,partitionMarkers:se,ariaLabel:e,enableNeutralNoJudgement:w,showTrendGatingExplanation:j})})}),N&&O&&s.jsx("div",{"data-testid":"spc-diagnostics-live","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:0,overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",border:0},children:O}),N&&Q.length>0&&s.jsxs("div",{className:"fdp-spc-chart__warnings",role:"region","aria-label":"SPC diagnostics",children:[s.jsx("p",{className:"fdp-spc-chart__warnings-heading",children:"Diagnostics"}),s.jsx(ei,{firstCellIsHeader:!1,panel:!1,responsive:!1,head:[{text:"Severity"},{text:"Category"},{text:"Code"},{text:"Details"}],rows:Q.map(ne=>{let fe="grey";return ne.severity===yn.Error?fe="red":ne.severity===yn.Warning?fe="orange":ne.severity===yn.Info&&(fe="blue"),[{node:s.jsx(Ye,{color:fe,text:(ne.severity?String(ne.severity):"Info").replace(/^[a-z]/,pe=>pe.toUpperCase())}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--severity"},{node:ne.category?s.jsx(Ye,{color:"purple",text:B(ne.category)}):s.jsx("span",{className:"fdp-spc-chart__warning-empty",children:"â€“"}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--category"},{node:s.jsx(Ye,{color:"grey",text:S(ne.code)}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--code"},{node:s.jsxs("div",{className:"fdp-spc-chart__warning-message",children:[s.jsx("span",{children:ne.message}),ne.context&&Object.keys(ne.context).length>0&&s.jsxs("details",{className:"fdp-spc-chart__warning-context",style:{marginTop:4},children:[s.jsx("summary",{children:"context"}),s.jsx("pre",{children:JSON.stringify(ne.context,null,2)})]})]}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--message"}]}),classes:"fdp-spc-chart__warnings-table-wrapper",tableClasses:"fdp-spc-chart__warnings-table"})]})]})},Fx=({series:t,showPoints:e,announceFocus:n,limits:r,showZones:a,highlightOutOfControl:i,engineRows:o,enableRules:l,showIcons:u,narrationContext:c,gradientSequences:d,processLineWidth:h,effectiveUnit:p,partitionMarkers:g,ariaLabel:y,enableNeutralNoJudgement:f=!0,showTrendGatingExplanation:m=!0})=>{const I=An(),M=gn();if(!I)return null;const{xScale:C,yScale:v}=I,D=V.useRef("spc-seq-"+ ++Lx),T=bn(),N=t[0]?.data||[],_=V.useMemo(()=>{if(!r.ucl&&!r.lcl)return new Set;const E=new Set;return N.forEach((L,X)=>{(r.ucl!=null&&L.y>r.ucl||r.lcl!=null&&L.y<r.lcl)&&E.add(X)}),E},[N,r.ucl,r.lcl]),w=V.useMemo(()=>{if(!o)return null;const E={};return o.forEach((L,X)=>{if(L.value==null||L.ghost)return;const ie=L.specialCauseSinglePointAbove||L.specialCauseSinglePointBelow||L.specialCauseTwoOfThreeAbove||L.specialCauseTwoOfThreeBelow||L.specialCauseFourOfFiveAbove||L.specialCauseFourOfFiveBelow||L.specialCauseShiftHigh||L.specialCauseShiftLow||L.specialCauseTrendIncreasing||L.specialCauseTrendDecreasing;E[X]={variation:L.variationIcon,assurance:L.assuranceIcon,special:ie,concern:L.variationIcon===Ve.Concern,improvement:L.variationIcon===Ve.Improvement}}),E},[o]),j=V.useMemo(()=>{if(!o||!o.length)return null;const E=[];for(const X of o)typeof X.target=="number"&&!isNaN(X.target)&&E.push(X.target);if(!E.length)return null;const L=E[0];return E.every(X=>X===L)?L:null},[o]),x=V.useMemo(()=>{if(!w||!N.length)return[];const E=N.map((X,ie)=>{const te=w?.[ie];return te?.concern?"concern":te?.improvement?"improvement":f&&te?.special&&te.variation===Ve.Neither?"noJudgement":"common"});return y?.includes("Rule Clash")&&console.log(`[${y}] Raw categories:`,E.map((X,ie)=>`${ie}:${X}(${N[ie].y})`).join(", ")),E},[w,N,y,f]),S=V.useMemo(()=>{if(!d||!x.length)return[];const E=[...x];let L=0;for(;L<E.length;){const te=E[L];let Y=L+1;for(;Y<E.length&&E[Y]===te;)Y++;Y-L===1&&te!=="common"&&(E[L]="common"),L=Y}const X=[];if(E.length){let te=0;for(let Y=1;Y<=E.length;Y++)if(Y===E.length||E[Y]!==E[te]){const G=E[te],q=Y-1,ue=q-te+1;(G==="common"||ue>=2)&&X.push({start:te,end:q,category:G}),te=Y}}return y?.includes("Rule Clash")&&console.log(`[${y}] Final sequences:`,X.map(te=>`${te.start}-${te.end}:${te.category}`).join(", ")),X},[d,x,y]),B=V.useMemo(()=>N.map(E=>C(E.x instanceof Date?E.x:new Date(E.x))),[N,C]),P=C.range()[1],$=V.useMemo(()=>{if(!o||!o.length)return null;const E=L=>{const X=[];let ie=null,te=null;for(let Y=0;Y<o.length;Y++){const G=o[Y],q=typeof G[L]=="number"?G[L]:null;if(q==null||isNaN(q)){ie!==null&&te!=null&&(X.push({x1:B[ie],x2:B[Y-1],y:v(te)}),ie=null,te=null);continue}if(ie===null){ie=Y,te=q;continue}te!=null&&Math.abs(q-te)<=1e-9||(te!=null&&X.push({x1:B[ie],x2:B[Y-1],y:v(te)}),ie=Y,te=q)}return ie!==null&&te!=null&&X.push({x1:B[ie],x2:B[o.length-1],y:v(te)}),X};return{mean:E("mean"),ucl:E("upperProcessLimit"),lcl:E("lowerProcessLimit"),onePos:E("upperOneSigma"),oneNeg:E("lowerOneSigma"),twoPos:E("upperTwoSigma"),twoNeg:E("lowerTwoSigma")}},[o,B,v]),k=V.useMemo(()=>S.length?s.jsx("defs",{children:S.map((E,L)=>{const X=`${D.current}-grad-${L}`;let ie,te=.28,Y=.12,G=.045;switch(E.category){case"concern":ie="var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",te=.28,Y=.12,G=.045;break;case"improvement":ie="var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",te=.26,Y=.11,G=.045;break;case"noJudgement":ie="var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",te=.26,Y=.11,G=.045;break;default:ie="var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)"}return s.jsxs("linearGradient",{id:X,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:ie,stopOpacity:te}),s.jsx("stop",{offset:"70%",stopColor:ie,stopOpacity:Y}),s.jsx("stop",{offset:"100%",stopColor:ie,stopOpacity:G})]},X)})}):null,[S]),H=V.useMemo(()=>{if(!S.length)return null;const[E]=v.domain(),L=v(E),X=S.map((ie,te)=>{const{start:Y,end:G,category:q}=ie;if(Y<0||G>=B.length||Y>G)return null;const ue=B[Y],U=B[G];let le="";if(q==="common"){const se=te>0?S[te-1]:null,he=te<S.length-1?S[te+1]:null,ne=se?B[se.end]:0,fe=se?v(N[se.end].y):L,pe=he?B[he.start]:P,ve=he?v(N[he.start].y):L;le=`M ${ne} ${L}`,le+=` L ${ne} ${fe}`;for(let me=Y;me<=G;me++)le+=` L ${B[me]} ${v(N[me].y)}`;le+=` L ${pe} ${ve}`,le+=` L ${pe} ${L} Z`}else{const se=te>0?S[te-1]:null,he=te<S.length-1?S[te+1]:null,ne=se&&se.category!=="common",fe=he&&he.category!=="common",pe=v(N[Y].y),ve=v(N[G].y);if(ne){const me=B[se.end],ee=v(N[se.end].y);le=`M ${me} ${ee} L ${ue} ${pe}`}else le=`M ${ue} ${L} L ${ue} ${pe}`;for(let me=Y+1;me<=G;me++)le+=` L ${B[me]} ${v(N[me].y)}`;if(le+=` L ${U} ${ve}`,fe?le+=` L ${U} ${ve} L ${U} ${L}`:le+=` L ${U} ${ve} L ${U} ${L}`,ne){const me=B[se.end];le+=` L ${me} ${L} Z`}else le+=` L ${ue} ${L} Z`}return s.jsx("path",{d:le,fill:`url(#${D.current}-grad-${te})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${te}`)}).filter(Boolean);return s.jsx("g",{className:"fdp-spc__sequence-bgs",children:X})},[S,B,P,v,N]),Q=V.useMemo(()=>{if(!c?.timeframe&&N.length>=2){const E=N.map(G=>G.x instanceof Date?G.x:new Date(G.x)),L=new Date(Math.min(...E.map(G=>G.getTime()))),X=new Date(Math.max(...E.map(G=>G.getTime()))),ie=Math.round((X.getTime()-L.getTime())/864e5)||0;if(ie<14)return`The chart shows a timeframe of ${ie+1} days`;const te=Math.round(ie/7);return te<20?`The chart shows a timeframe of ${te} weeks`:`The chart shows a timeframe of ${(X.getFullYear()-L.getFullYear())*12+(X.getMonth()-L.getMonth())+1} months`}if(c?.timeframe)return`The chart shows a timeframe of ${c.timeframe}`},[c?.timeframe,N]),O=E=>{const L=E%10,X=E%100;return L===1&&X!==11?`${E}st`:L===2&&X!==12?`${E}nd`:L===3&&X!==13?`${E}rd`:`${E}th`},z=E=>`${O(E.getDate())} ${E.toLocaleString("en-GB",{month:"long"})}, ${E.getFullYear()}`,W=V.useCallback(({index:E,x:L,y:X})=>{const ie=o?.[E],te=L instanceof Date?L:new Date(L),Y=z(te),G=c?.measureUnit?` ${c.measureUnit}`:"",q=c?.measureName?` ${c.measureName}`:"";if(!ie)return`General summary is: ${Q?Q+". ":""}Point ${E+1}, ${Y}, ${X}${G}${q}`;const ue=no(ie.variationIcon)||"Variation",U=to(ie),le=U.length?` Rules: ${[...new Set(U.map(he=>eo[he].narration))].join("; ")}.`:" No special cause rules.",se=[];return c?.measureName&&se.push(`Measure: ${c.measureName}.`),c?.datasetContext&&se.push(`${c.datasetContext}.`),c?.organisation&&se.push(`Organisation: ${c.organisation}.`),c?.additionalNote&&se.push(c.additionalNote),["General summary is:",...se,`Point ${E+1} recorded on `,Y+",",`with a value of ${X} ${G}${q}`,ue+".",le].join(" ").replace(/\s+/g," ").trim()},[o,c,Q]),R=V.useCallback((E,L)=>o?.[E]?W({index:E,seriesId:"process",x:L.x instanceof Date?L.x:new Date(L.x),y:L.y}).replace(/^General summary is:\s*/,"").replace(/^Point \d+\s*/,""):void 0,[o,W]);return s.jsx(sd,{children:s.jsxs("div",{className:"fdp-spc-chart",role:"group","aria-label":"Statistical process control chart","aria-roledescription":"chart",children:[s.jsx("svg",{width:I.xScale.range()[1]+56+16,height:I.yScale.range()[0]+12+48,role:"img",children:s.jsxs("g",{transform:"translate(56,12)",children:[s.jsx(Ws,{type:"x"}),s.jsx(Ws,{type:"y"}),s.jsx(Zu,{axis:"y"}),k,H,g.map((E,L)=>{const X=N[E];if(!X)return null;const ie=C(X.x instanceof Date?X.x:new Date(X.x));return s.jsx("line",{x1:ie,x2:ie,y1:0,y2:v.range()[0],stroke:"#555",strokeDasharray:"4 4",strokeWidth:1,"aria-hidden":"true",className:"fdp-spc__partition-marker"},`partition-marker-${L}`)}),$?.mean.map((E,L)=>s.jsx("line",{className:"fdp-spc__cl",x1:E.x1,x2:E.x2,y1:E.y,y2:E.y,"aria-hidden":"true"},`mean-${L}`)),j!=null&&s.jsx(s.Fragment,{}),$?.ucl.map((E,L)=>s.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--ucl",x1:E.x1,x2:E.x2,y1:E.y,y2:E.y,"aria-hidden":"true",strokeWidth:2},`ucl-${L}`)),$?.lcl.map((E,L)=>s.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--lcl",x1:E.x1,x2:E.x2,y1:E.y,y2:E.y,"aria-hidden":"true",strokeWidth:2},`lcl-${L}`)),j!=null&&s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__target-group",children:[s.jsx("line",{className:"fdp-spc__target","data-testid":"spc-target-line",x1:0,x2:C.range()[1],y1:v(j),y2:v(j),strokeWidth:2.5}),s.jsxs("text",{"data-testid":"spc-target-label",x:C.range()[0]-7,y:v(j)-5,textAnchor:"start",className:"fdp-spc__target-label",fontSize:12,children:["Target ",j," ",p||c?.measureUnit||""]})]}),a&&$&&$.mean.length>0&&s.jsxs(s.Fragment,{children:[$.onePos.map((E,L)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos1",x1:E.x1,x2:E.x2,y1:E.y,y2:E.y,"aria-hidden":"true",strokeWidth:2},`onePos-${L}`)),$.oneNeg.map((E,L)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg1",x1:E.x1,x2:E.x2,y1:E.y,y2:E.y,"aria-hidden":"true",strokeWidth:2},`oneNeg-${L}`)),$.twoPos.map((E,L)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos2",x1:E.x1,x2:E.x2,y1:E.y,y2:E.y,"aria-hidden":"true",strokeWidth:2},`twoPos-${L}`)),$.twoNeg.map((E,L)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg2",x1:E.x1,x2:E.x2,y1:E.y,y2:E.y,"aria-hidden":"true",strokeWidth:2},`twoNeg-${L}`))]}),s.jsx(od,{series:t[0],seriesIndex:0,palette:"categorical",showPoints:!1,focusablePoints:!1,focusIndex:-1,parseX:E=>E.x instanceof Date?E.x:new Date(E.x),smooth:!1,strokeWidth:h}),e&&N.map((E,L)=>{const X=C(E.x instanceof Date?E.x:new Date(E.x)),ie=v(E.y),te=_.has(L),Y=w?.[L],G=["fdp-spc__point",te&&i?"fdp-spc__point--ooc":null,l&&Y?.special&&Y.concern?"fdp-spc__point--sc-concern":null,l&&Y?.special&&Y.improvement?"fdp-spc__point--sc-improvement":null,l&&f&&Y?.special&&Y.variation===Ve.Neither?"fdp-spc__point--sc-no-judgement":null,Y?.assurance===_n.Pass?"fdp-spc__point--assurance-pass":null,Y?.assurance===_n.Fail?"fdp-spc__point--assurance-fail":null].filter(Boolean).join(" "),q=`Point ${L+1} value ${E.y}`+(Y?.special?" special cause":"")+(Y?.variation===Ve.Improvement?" improving":Y?.variation===Ve.Concern?" concern":""),ue=T?.focused?.index===L;return s.jsx("circle",{cx:X,cy:ie,r:5,className:G,"data-variation":Y?.variation,"data-assurance":Y?.assurance,"aria-label":q,...ue?{"aria-describedby":`spc-tooltip-${L}`}:{}},L)}),u&&l&&w&&N.map((E,L)=>{const X=w[L];if(!X||!(X.concern||X.improvement))return null;const ie=C(E.x instanceof Date?E.x:new Date(E.x)),te=v(E.y);let Y=te-10;const G=12,q=v.range()[0]-4;Y<G&&(Y=Math.min(te+16,q));const ue=C.range()[1],U=Math.min(Math.max(ie,0),ue-0);return s.jsx("text",{x:U,y:Y,textAnchor:"middle",className:`fdp-spc__icon ${X.concern?"fdp-spc__icon--concern":"fdp-spc__icon--improvement"}`,"aria-hidden":"true",children:X.concern?"!":"â˜…"},`icon-${L}`)}),M&&s.jsx(Bx,{width:C.range()[1],height:v.range()[0]}),s.jsx(pd,{engineRows:o,limits:{mean:r.mean,sigma:r.sigma},pointDescriber:R,measureName:c?.measureName,measureUnit:c?.measureUnit,dateFormatter:E=>z(E),enableNeutralNoJudgement:f,showTrendGatingExplanation:m})]})}),n&&s.jsx(sx,{format:E=>W({...E,x:E.x instanceof Date?E.x:new Date(E.x)})})]})})},Bx=({width:t,height:e})=>{const n=bn();return n?s.jsx("rect",{className:"fdp-spc__interaction-layer",width:t,height:e,fill:"transparent",tabIndex:0,"aria-label":"Interactive chart area. Use arrow keys to move between points.",onMouseMove:r=>{const i=r.currentTarget.getBoundingClientRect(),o=r.clientX-i.left,l=r.clientY-i.top;n.focusNearest(o,l)},onMouseLeave:()=>n.clear(),onKeyDown:r=>{switch(r.key){case"ArrowRight":n.focusNextPoint(),r.preventDefault();break;case"ArrowLeft":n.focusPrevPoint(),r.preventDefault();break;case"ArrowDown":n.focusNextSeries(),r.preventDefault();break;case"ArrowUp":n.focusPrevSeries(),r.preventDefault();break;case"Home":n.focusFirstPoint(),r.preventDefault();break;case"End":n.focusLastPoint(),r.preventDefault();break}},style:{cursor:"crosshair"}}):null},Ax=Object.freeze(Object.defineProperty({__proto__:null,AssuranceIcon:_n,AssuranceResult:xn,BaselineSuggestionReason:ud,ChartType:Qs,Direction:ke,Icons:Object.freeze(Object.defineProperty({__proto__:null,AssuranceResult:xn,Direction:ke,MetricPolarity:qe,SPCAssuranceIcon:fi,SPCVariationIcon:di,VariationJudgement:ft,VariationState:$e,getVariationColour:io,getVariationTrend:ui},Symbol.toStringTag,{value:"Module"})),ImprovementDirection:Et,MetricPolarity:qe,SPCAssuranceIcon:fi,SPCChart:yd,SPCTooltipOverlay:pd,SPCVariationIcon:di,SpcWarningCategory:ld,SpcWarningCode:cd,SpcWarningSeverity:yn,VARIATION_COLOR_TOKENS:Lt,VariationIcon:Ve,VariationJudgement:ft,VariationState:$e,buildSpc:hd,extractRuleIds:to,getVariationColorHex:jx,getVariationColorToken:md,getVariationColour:io,getVariationTrend:ui,ruleGlossary:eo,variationLabel:no},Symbol.toStringTag,{value:"Module"})),xd="150ms",vd="300ms",wd="500ms",Sd="cubic-bezier(0.4, 0, 1, 1)",kd="cubic-bezier(0, 0, 0.2, 1)",Cd="cubic-bezier(0.4, 0, 0.2, 1)",Td="cubic-bezier(0.68, -0.55, 0.265, 1.55)",Nd="background-color 300ms cubic-bezier(0, 0, 0.2, 1)",jd="box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",Dd="border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",Md="border-color 300ms cubic-bezier(0, 0, 0.2, 1)",$d="1px",Id="2px",Pd="4px",Ld="4px",Fd="4px",Bd="2px",Ad="1px",Ed="0px",Hd="4px",Rd="8px",zd="12px",oo="#d8dde0",lo="#4c6272",co="#d8dde0",uo="#aeb7bd",fo="#d5281b",ho="#005eb8",mo="#ffffff",po="#212b32",go="#007f3b",bo="#330072",_o="#7c2855",yo="#d5281b",xo="#ffeb3b",vo="#fff9c4",wo="#ffb81c",So="#ed8b00",ko="#00a499",Co="#ae2573",To="#4c6272",No="#768692",jo="#aeb7bd",Do="#d8dde0",Mo="#f0f4f5",Od="#212b32",Wd="#4c6272",Ud="#ffffff",Gd="#212b32",Yd="#005eb8",Vd="#7c2855",qd="#003087",Xd="#330072",Kd="#ffeb3b",Zd="#212b32",Jd="#d8dde0",Qd="#ffffff33",ef="#d5281b",tf="#4c6272",nf="#ffffff",rf="#007f3b",af="#ffffff",sf="#006530",of="#004021",lf="#004021",cf="#00000000",uf="#ffffff",df="#005eb8",ff="#005eb8",hf="#d9e5f2",mf="#c7daf0",pf="#005eb8",gf="#ffffff",bf="#212b32",_f="#d9dde0",yf="#b3bcc2",xf="#b3bcc2",vf="#d5281b",wf="#aa2016",Sf="#6a140e",kf="#6a140e",Cf="#005eb8",Tf="#004b93",Nf="#002f5c",jf="#002f5c",Df="8px",Mf="16px",$f="12px",If="16px",Pf="4px",Lf="40px",Ff="4px",Bf="40px",Af="12px",Ef="16px",Hf="32px",Rf="16px",zf="20px",Of="28px",Wf="9px",Uf="2px",Gf="16px",Yf="24px",Vf="8px",qf="24px",Xf="16px",Kf="4px",Zf="4px",Jf="4px",Qf="8px",eh="4px",th="16px",nh="#007f3b",rh="#006530",ah="#004021",ih="#d8dde0",sh="#ffffff",oh="#768692",lh="#00000000",ch="#ffeb3b",uh="#00000000",dh="#ffffff",fh="#d9e5f2",hh="#c7daf0",mh="#005eb8",ph="#005eb8",$o="8px",Io="16px",Po="12px",Lo="16px",gh="2px",bh="4px",_h="4px",yh="600",xh="#ffffff",vh="#d8dde0",wh="#aeb7bd",Sh="#f0f4f5",kh="#212b32",Ch="#212b32",Th="#005eb8",Fo="16px",Bo="32px",Ao="16px",Nh="1px",jh="4px",Dh="none",Mh="0 2px 4px rgba(0, 0, 0, 0.1)",$h="#ffffff",Ih="#ffffff",Ph="#d8dde0",Lh="#ffffff",Fh="#4c6272",Bh="#ffeb3b",Ah="#d5281b",Eh="#aeb7bd",Hh="#212b32",Rh="#4c6272",zh="#768692",Oh="#212b32",Wh="#ffffff",Uh="600",Gh="#d5281b",Yh="600",Vh="#4c6272",Eo="4px",Ho="40px",Ro="40px",zo="12px",qh="2px",Xh="4px",Kh="0px",Zh="16px",Jh="18px",Qh="24px",em="32px",tm="34px",nm="32px",rm="40px",am="48px",im="5.4ex",sm="7.2ex",om="9ex",lm="10.8ex",cm="20ex",um="38ex",dm="56ex",fm="44px",hm="40px",mm="1020px",pm="100%",gm="50%",bm="33.333%",_m="25%",ym="20%",xm="320px",vm="641px",wm="1025px",Sm="1280px",km="960px",Cm="32px",Tm="16px",Nm="#d5281b",jm="#d5281b",Dm="#ffffff",Mm="#007f3b",$m="#007f3b",Im="#ffffff",Pm="#ffeb3b",Lm="#ffeb3b",Fm="#212b32",Bm="#005eb8",Am="#005eb8",Em="#ffffff",Hm="#d8dde0",Rm="#aeb7bd",zm="#768692",Om="0 4px 0 #004021",Wm="0 4px 0 #005eb8",Um="0 4px 0 #6a140e",Gm="0 4px 0 #ffeb3b",Ym="none",Vm="0 2px 4px rgba(0, 0, 0, 0.1)",qm="4px",Xm="0px",Km="solid",Zm="0 0 0 3px #ffeb3b",Jm="0 0 0 3px #ffeb3b",Qm="none",ep="0 1px 3px rgba(0, 0, 0, 0.12)",tp="0 2px 6px rgba(0, 0, 0, 0.16)",np="0 4px 12px rgba(0, 0, 0, 0.20)",Oo="0",Wo="4px",Uo="8px",Go="16px",Yo="24px",Vo="32px",qo="40px",Xo="48px",Ko="56px",Zo="64px",hi="0",mi="0",pi="4px",gi="4px",bi="8px",_i="8px",yi="8px",xi="16px",vi="16px",wi="24px",Si="24px",ki="32px",Ci="32px",Ti="40px",Ni="40px",ji="48px",Di="48px",Mi="56px",$i="56px",Ii="64px",zr="Frutiger W01",Or="Arial, Helvetica, sans-serif",Wr="sans-serif",Ur="400",Gr="600",Yr="400",Vr="12px",qr="14px",Xr="12pt",Kr="14px",Zr="16px",Jr="12pt",Qr="16px",ea="19px",ta="13pt",na="19px",ra="22px",aa="15pt",ia="22px",sa="26px",oa="17pt",la="27px",ca="36px",ua="20pt",da="33px",fa="48px",ha="24pt",Pi="16px",Li="24px",Rt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},zt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Ot={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Wt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Ut={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Gt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Yt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},Vt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},qt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},Xt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},Ex=Object.freeze(Object.defineProperty({__proto__:null,AnimationDurationFast:xd,AnimationDurationNormal:vd,AnimationDurationSlow:wd,AnimationEasingBounce:Td,AnimationEasingEaseIn:Sd,AnimationEasingEaseInOut:Cd,AnimationEasingEaseOut:kd,BorderColorCard:co,BorderColorCardHover:uo,BorderColorDefault:oo,BorderColorError:fo,BorderColorForm:lo,BorderRadiusLarge:zd,BorderRadiusMedium:Rd,BorderRadiusNone:Ed,BorderRadiusSmall:Hd,BorderWidthCardBottom:Ld,BorderWidthDefault:$d,BorderWidthFormElement:Id,BorderWidthFormElementError:Pd,BorderWidthPanel:Fd,BorderWidthTableCell:Ad,BorderWidthTableHeader:Bd,BreakpointDesktop:wm,BreakpointLargeDesktop:Sm,BreakpointMobile:xm,BreakpointTablet:vm,ButtonBorderRadius:bh,ButtonBorderWidth:gh,ButtonPrimaryBackgroundActive:ah,ButtonPrimaryBackgroundDefault:nh,ButtonPrimaryBackgroundDisabled:ih,ButtonPrimaryBackgroundHover:rh,ButtonPrimaryBorderDefault:lh,ButtonPrimaryBorderFocus:ch,ButtonPrimaryTextDefault:sh,ButtonPrimaryTextDisabled:oh,ButtonSecondaryBackgroundActive:hh,ButtonSecondaryBackgroundDefault:uh,ButtonSecondaryBackgroundHover:fh,ButtonSecondaryBackgroundSolid:dh,ButtonSecondaryBorderDefault:ph,ButtonSecondaryTextDefault:mh,ButtonShadowSize:_h,ButtonSpacingPaddingHorizontalDesktop:Lo,ButtonSpacingPaddingHorizontalMobile:Io,ButtonSpacingPaddingVerticalDesktop:Po,ButtonSpacingPaddingVerticalMobile:$o,ButtonTypographyWeight:yh,CardBackgroundDefault:xh,CardBorderBottom:Sh,CardBorderDefault:vh,CardBorderHover:wh,CardBorderWidthBottom:jh,CardBorderWidthDefault:Nh,CardShadowDefault:Dh,CardShadowHover:Mh,CardSpacingHeadingMargin:Ao,CardSpacingPaddingDesktop:Bo,CardSpacingPaddingMobile:Fo,CardTextDescription:Ch,CardTextHeading:kh,CardTextLink:Th,ColorBorderDefault:Jd,ColorBorderSecondary:Qd,ColorButtonLoginActive:Nf,ColorButtonLoginBackground:Cf,ColorButtonLoginHover:Tf,ColorButtonLoginShadow:jf,ColorButtonPrimaryActive:of,ColorButtonPrimaryBackground:rf,ColorButtonPrimaryHover:sf,ColorButtonPrimaryShadow:lf,ColorButtonPrimaryText:af,ColorButtonReverseActive:yf,ColorButtonReverseBackground:gf,ColorButtonReverseHover:_f,ColorButtonReverseShadow:xf,ColorButtonReverseText:bf,ColorButtonSecondaryActive:mf,ColorButtonSecondaryBackground:cf,ColorButtonSecondaryBackgroundSolid:uf,ColorButtonSecondaryBorder:df,ColorButtonSecondaryHover:hf,ColorButtonSecondaryShadow:pf,ColorButtonSecondaryText:ff,ColorButtonWarningActive:Sf,ColorButtonWarningBackground:vf,ColorButtonWarningHover:wf,ColorButtonWarningShadow:kf,ColorError:ef,ColorFocusBackground:Kd,ColorFocusText:Zd,ColorFormBackground:nf,ColorFormBorder:tf,ColorGrey1:To,ColorGrey2:No,ColorGrey3:jo,ColorGrey4:Do,ColorGrey5:Mo,ColorLinkActive:qd,ColorLinkDefault:Yd,ColorLinkHover:Vd,ColorLinkVisited:Xd,ColorPrimaryBlack:po,ColorPrimaryBlue:ho,ColorPrimaryDarkPink:_o,ColorPrimaryGreen:go,ColorPrimaryPurple:bo,ColorPrimaryRed:yo,ColorPrimaryWhite:mo,ColorPrimaryYellow:xo,ColorSecondaryAquaGreen:ko,ColorSecondaryOrange:So,ColorSecondaryPaleYellow:vo,ColorSecondaryPink:Co,ColorSecondaryWarmYellow:wo,ColorTextPrimary:Od,ColorTextPrint:Gd,ColorTextReverse:Ud,ColorTextSecondary:Wd,ComponentBlur:Zf,ComponentBreadcrumbChevronMarginLeft:Wf,ComponentBreadcrumbChevronMarginRight:Uf,ComponentBreadcrumbPaddingTopDesktop:Yf,ComponentBreadcrumbPaddingTopMobile:Gf,ComponentButtonPaddingDesktopHorizontal:If,ComponentButtonPaddingDesktopVertical:$f,ComponentButtonPaddingMobileHorizontal:Mf,ComponentButtonPaddingMobileVertical:Df,ComponentButtonShadowSize:Pf,ComponentCardHeadingMargin:Rf,ComponentCardPaddingDesktop:Hf,ComponentCardPaddingMobile:Ef,ComponentDetails:Qf,ComponentExpander:eh,ComponentFormCheckboxLabelPadding:Af,ComponentFormCheckboxSize:Bf,ComponentFormInputMinHeight:Lf,ComponentFormInputPadding:Ff,ComponentLink:Jf,ComponentPagination:th,ComponentPanelPaddingDesktop:Of,ComponentPanelPaddingMobile:zf,ComponentSpread:Kf,ComponentSummaryListCellPaddingHorizontal:qf,ComponentSummaryListCellPaddingVertical:Vf,ComponentSummaryListRowMargin:Xf,ElevationHigh:np,ElevationLow:ep,ElevationMedium:tp,ElevationNone:Qm,FocusOutlineOffset:Xm,FocusOutlineStyle:Km,FocusOutlineWidth:qm,FocusShadowButton:Jm,FocusShadowInput:Zm,FontFamilyBase:zr,FontFamilyFallback:Or,FontFamilyPrint:Wr,FontLineHeightBase:Li,FontSize14Mobile:Vr,FontSize14Print:Xr,FontSize14Tablet:qr,FontSize16Mobile:Kr,FontSize16Print:Jr,FontSize16Tablet:Zr,FontSize19Mobile:Qr,FontSize19Print:ta,FontSize19Tablet:ea,FontSize22Mobile:na,FontSize22Print:aa,FontSize22Tablet:ra,FontSize26Mobile:ia,FontSize26Print:oa,FontSize26Tablet:sa,FontSize36Mobile:la,FontSize36Print:ua,FontSize36Tablet:ca,FontSize48Mobile:da,FontSize48Print:ha,FontSize48Tablet:fa,FontSizeBase:Pi,FontWeightBold:Gr,FontWeightLight:Yr,FontWeightNormal:Ur,FormBorderRadius:Kh,FormBorderWidthDefault:qh,FormBorderWidthError:Xh,FormErrorTextDefault:Gh,FormErrorTypographyWeight:Yh,FormHintTextDefault:Vh,FormInputBackgroundDefault:$h,FormInputBackgroundDisabled:Ph,FormInputBackgroundError:Lh,FormInputBackgroundFocus:Ih,FormInputBorderDefault:Fh,FormInputBorderDisabled:Eh,FormInputBorderError:Ah,FormInputBorderFocus:Bh,FormInputTextDefault:Hh,FormInputTextDisabled:zh,FormInputTextPlaceholder:Rh,FormLabelTextDefault:Oh,FormLabelTextRequired:Wh,FormLabelTypographyWeight:Uh,FormSpacingCheckboxLabelPadding:zo,FormSpacingCheckboxSize:Ro,FormSpacingInputMinHeight:Ho,FormSpacingInputPadding:Eo,GridGutter:Cm,GridGutterHalf:Tm,GridPageWidth:km,HeadingsNhsukHeadingL:zt,HeadingsNhsukHeadingM:Ot,HeadingsNhsukHeadingS:Wt,HeadingsNhsukHeadingXl:Rt,HeadingsNhsukHeadingXs:Ut,LayoutColumnActions:ym,LayoutColumnFull:pm,LayoutColumnHalf:gm,LayoutColumnQuarter:_m,LayoutColumnThird:bm,LayoutContainerMaxWidth:mm,ParagraphsBody:Gt,ParagraphsBodyLarge:Yt,ParagraphsBodySmall:Vt,ParagraphsLedeText:qt,ParagraphsLedeTextSmall:Xt,ShadowButtonDefault:Om,ShadowButtonFocus:Gm,ShadowButtonSecondary:Wm,ShadowButtonWarning:Um,ShadowCardDefault:Ym,ShadowCardHover:Vm,SizeButtonMinHeightDesktop:hm,SizeButtonMinHeightMobile:fm,SizeFormControlLarge:am,SizeFormControlMedium:rm,SizeFormControlSmall:nm,SizeFormInputWidth2xl:um,SizeFormInputWidth3xl:dm,SizeFormInputWidthLg:lm,SizeFormInputWidthMd:om,SizeFormInputWidthSm:sm,SizeFormInputWidthXl:cm,SizeFormInputWidthXs:im,SizeIconExtraLarge:em,SizeIconLarge:Qh,SizeIconMedium:Jh,SizeIconNhsDefault:tm,SizeIconSmall:Zh,Spacing0:Oo,Spacing1:Wo,Spacing2:Uo,Spacing3:Go,Spacing4:Yo,Spacing5:Vo,Spacing6:qo,Spacing7:Xo,Spacing8:Ko,Spacing9:Zo,SpacingResponsive0Mobile:hi,SpacingResponsive0Tablet:mi,SpacingResponsive1Mobile:pi,SpacingResponsive1Tablet:gi,SpacingResponsive2Mobile:bi,SpacingResponsive2Tablet:_i,SpacingResponsive3Mobile:yi,SpacingResponsive3Tablet:xi,SpacingResponsive4Mobile:vi,SpacingResponsive4Tablet:wi,SpacingResponsive5Mobile:Si,SpacingResponsive5Tablet:ki,SpacingResponsive6Mobile:Ci,SpacingResponsive6Tablet:Ti,SpacingResponsive7Mobile:Ni,SpacingResponsive7Tablet:ji,SpacingResponsive8Mobile:Di,SpacingResponsive8Tablet:Mi,SpacingResponsive9Mobile:$i,SpacingResponsive9Tablet:Ii,StateDisabledBackground:Hm,StateDisabledBorder:Rm,StateDisabledText:zm,StateErrorBackground:Nm,StateErrorBorder:jm,StateErrorText:Dm,StateInfoBackground:Bm,StateInfoBorder:Am,StateInfoText:Em,StateSuccessBackground:Mm,StateSuccessBorder:$m,StateSuccessText:Im,StateWarningBackground:Pm,StateWarningBorder:Lm,StateWarningText:Fm,TransitionButtonDefault:Nd,TransitionButtonShadow:jd,TransitionCardHover:Md,TransitionInputFocus:Dd},Symbol.toStringTag,{value:"Module"})),Hx=(t,e)=>({fontSize:t.mobile,marginBottom:e.mobile,"@media (min-width: 768px)":{fontSize:t.tablet,marginBottom:e.tablet},"@media print":{fontSize:t.print||t.tablet}}),Rx=({children:t,className:e="",style:n={}})=>s.jsx("h1",{className:e,style:{fontFamily:Rt.fontFamily,fontWeight:Rt.fontWeight,fontSize:Rt.fontSize.mobile,lineHeight:Rt.lineHeight,marginTop:Rt.marginTop,marginBottom:Rt.marginBottom.mobile,...n},children:t}),zx=({children:t,className:e="",style:n={}})=>s.jsx("h2",{className:e,style:{fontFamily:zt.fontFamily,fontWeight:zt.fontWeight,fontSize:zt.fontSize.mobile,lineHeight:zt.lineHeight,marginTop:zt.marginTop,marginBottom:zt.marginBottom.mobile,...n},children:t}),Ox=({children:t,className:e="",style:n={}})=>s.jsx("h3",{className:e,style:{fontFamily:Ot.fontFamily,fontWeight:Ot.fontWeight,fontSize:Ot.fontSize.mobile,lineHeight:Ot.lineHeight,marginTop:Ot.marginTop,marginBottom:Ot.marginBottom.mobile,...n},children:t}),Wx=({children:t,className:e="",style:n={}})=>s.jsx("h4",{className:e,style:{fontFamily:Wt.fontFamily,fontWeight:Wt.fontWeight,fontSize:Wt.fontSize.mobile,lineHeight:Wt.lineHeight,marginTop:Wt.marginTop,marginBottom:Wt.marginBottom.mobile,...n},children:t}),Ux=({children:t,className:e="",style:n={}})=>s.jsx("h5",{className:e,style:{fontFamily:Ut.fontFamily,fontWeight:Ut.fontWeight,fontSize:Ut.fontSize.mobile,lineHeight:Ut.lineHeight,marginTop:Ut.marginTop,marginBottom:Ut.marginBottom.mobile,...n},children:t}),Gx=({children:t,className:e="",style:n={}})=>s.jsx("p",{className:e,style:{fontFamily:Gt.fontFamily,fontWeight:Gt.fontWeight,fontSize:Gt.fontSize.mobile,lineHeight:Gt.lineHeight,marginTop:Gt.marginTop,marginBottom:Gt.marginBottom.mobile,...n},children:t}),Yx=({children:t,className:e="",style:n={}})=>s.jsx("p",{className:e,style:{fontFamily:Yt.fontFamily,fontWeight:Yt.fontWeight,fontSize:Yt.fontSize.mobile,lineHeight:Yt.lineHeight,marginTop:Yt.marginTop,marginBottom:Yt.marginBottom.mobile,...n},children:t}),Vx=({children:t,className:e="",style:n={}})=>s.jsx("p",{className:e,style:{fontFamily:Vt.fontFamily,fontWeight:Vt.fontWeight,fontSize:Vt.fontSize.mobile,lineHeight:Vt.lineHeight,marginTop:Vt.marginTop,marginBottom:Vt.marginBottom.mobile,...n},children:t}),qx=({children:t,className:e="",style:n={}})=>s.jsx("p",{className:e,style:{fontFamily:qt.fontFamily,fontWeight:qt.fontWeight,fontSize:qt.fontSize.mobile,lineHeight:qt.lineHeight,marginTop:qt.marginTop,marginBottom:qt.marginBottom.mobile,...n},children:t}),Xx=({children:t,className:e="",style:n={}})=>s.jsx("p",{className:e,style:{fontFamily:Xt.fontFamily,fontWeight:Xt.fontWeight,fontSize:Xt.fontSize.mobile,lineHeight:Xt.lineHeight,marginTop:Xt.marginTop,marginBottom:Xt.marginBottom.mobile,...n},children:t}),Kx=()=>F.useMemo(()=>Ex,[]),Zx=()=>F.useMemo(()=>({BorderColorDefault:oo,BorderColorForm:lo,BorderColorCard:co,BorderColorCardHover:uo,BorderColorError:fo,ColorPrimaryBlue:ho,ColorPrimaryWhite:mo,ColorPrimaryBlack:po,ColorPrimaryGreen:go,ColorPrimaryPurple:bo,ColorPrimaryDarkPink:_o,ColorPrimaryRed:yo,ColorPrimaryYellow:xo,ColorSecondaryPaleYellow:vo,ColorSecondaryWarmYellow:wo,ColorSecondaryOrange:So,ColorSecondaryAquaGreen:ko,ColorSecondaryPink:Co,ColorGrey1:To,ColorGrey2:No,ColorGrey3:jo,ColorGrey4:Do,ColorGrey5:Mo}),[]),Jx=()=>F.useMemo(()=>({Spacing0:Oo,Spacing1:Wo,Spacing2:Uo,Spacing3:Go,Spacing4:Yo,Spacing5:Vo,Spacing6:qo,Spacing7:Xo,Spacing8:Ko,Spacing9:Zo}),[]),Qx=()=>F.useMemo(()=>({Mobile:{Size14:Vr,Size16:Kr,Size19:Qr,Size22:na,Size26:ia,Size36:la,Size48:da},Tablet:{Size14:qr,Size16:Zr,Size19:ea,Size22:ra,Size26:sa,Size36:ca,Size48:fa},Print:{Size14:Xr,Size16:Jr,Size19:ta,Size22:aa,Size26:oa,Size36:ua,Size48:ha},Family:{Base:zr,Fallback:Or,Print:Wr},Weight:{Normal:Ur,Bold:Gr,Light:Yr},Base:{Size:Pi,LineHeight:Li},FontFamilyBase:zr,FontFamilyFallback:Or,FontFamilyPrint:Wr,FontWeightNormal:Ur,FontWeightBold:Gr,FontWeightLight:Yr,FontSize14Mobile:Vr,FontSize14Tablet:qr,FontSize14Print:Xr,FontSize16Mobile:Kr,FontSize16Tablet:Zr,FontSize16Print:Jr,FontSize19Mobile:Qr,FontSize19Tablet:ea,FontSize19Print:ta,FontSize22Mobile:na,FontSize22Tablet:ra,FontSize22Print:aa,FontSize26Mobile:ia,FontSize26Tablet:sa,FontSize26Print:oa,FontSize36Mobile:la,FontSize36Tablet:ca,FontSize36Print:ua,FontSize48Mobile:da,FontSize48Tablet:fa,FontSize48Print:ha,FontSizeBase:Pi,FontLineHeightBase:Li}),[]),ev=()=>F.useMemo(()=>({Mobile:{Size0:hi,Size1:pi,Size2:bi,Size3:yi,Size4:vi,Size5:Si,Size6:Ci,Size7:Ni,Size8:Di,Size9:$i},Tablet:{Size0:mi,Size1:gi,Size2:_i,Size3:xi,Size4:wi,Size5:ki,Size6:Ti,Size7:ji,Size8:Mi,Size9:Ii},SpacingResponsive0Mobile:hi,SpacingResponsive0Tablet:mi,SpacingResponsive1Mobile:pi,SpacingResponsive1Tablet:gi,SpacingResponsive2Mobile:bi,SpacingResponsive2Tablet:_i,SpacingResponsive3Mobile:yi,SpacingResponsive3Tablet:xi,SpacingResponsive4Mobile:vi,SpacingResponsive4Tablet:wi,SpacingResponsive5Mobile:Si,SpacingResponsive5Tablet:ki,SpacingResponsive6Mobile:Ci,SpacingResponsive6Tablet:Ti,SpacingResponsive7Mobile:Ni,SpacingResponsive7Tablet:ji,SpacingResponsive8Mobile:Di,SpacingResponsive8Tablet:Mi,SpacingResponsive9Mobile:$i,SpacingResponsive9Tablet:Ii}),[]),tv=()=>F.useMemo(()=>({ButtonSpacingPaddingVerticalMobile:$o,ButtonSpacingPaddingHorizontalMobile:Io,ButtonSpacingPaddingVerticalDesktop:Po,ButtonSpacingPaddingHorizontalDesktop:Lo,CardSpacingPaddingMobile:Fo,CardSpacingPaddingDesktop:Bo,CardSpacingHeadingMargin:Ao,FormSpacingInputPadding:Eo,FormSpacingInputMinHeight:Ho,FormSpacingCheckboxSize:Ro,FormSpacingCheckboxLabelPadding:zo}),[]),nv=()=>F.useMemo(()=>({xl:Rt,l:zt,m:Ot,s:Wt,xs:Ut}),[]),rv=()=>F.useMemo(()=>({body:Gt,bodyLarge:Yt,bodySmall:Vt,ledeText:qt,ledeTextSmall:Xt}),[]),av=()=>F.useMemo(()=>({headings:{xl:Rt,l:zt,m:Ot,s:Wt,xs:Ut},paragraphs:{body:Gt,bodyLarge:Yt,bodySmall:Vt,ledeText:qt,ledeTextSmall:Xt},fonts:{family:{base:zr,fallback:Or,print:Wr},weight:{normal:Ur,bold:Gr,light:Yr},sizes:{mobile:{size14:Vr,size16:Kr,size19:Qr,size22:na,size26:ia,size36:la,size48:da},tablet:{size14:qr,size16:Zr,size19:ea,size22:ra,size26:sa,size36:ca,size48:fa},print:{size14:Xr,size16:Jr,size19:ta,size22:aa,size26:oa,size36:ua,size48:ha}}}}),[]);function iv(t={}){const{initialLayout:e=void 0,fallbackLayout:n="two-column"}=t,[r,a]=V.useState(e),i=V.useCallback(()=>a("three-column"),[]),o=V.useCallback(()=>a(u=>u==="three-column"?n:u),[n]),l=V.useCallback(()=>a(u=>u==="three-column"?n:"three-column"),[n]);return{forceLayout:r,setLayout:a,drillIn:i,drillOut:o,toggle:l,isDrilledIn:r==="three-column"}}const Jo={fontPath:"https://assets.nhs.uk/fonts/",includeFontFace:!0,useFallbacks:!0,fontWeights:[400,600]},ht={normal:{woff2:"FrutigerLTW01-55Roman.woff2",woff:"FrutigerLTW01-55Roman.woff",ttf:"FrutigerLTW01-55Roman.ttf",eot:"FrutigerLTW01-55Roman.eot"},bold:{woff2:"FrutigerLTW01-65Bold.woff2",woff:"FrutigerLTW01-65Bold.woff",ttf:"FrutigerLTW01-65Bold.ttf",eot:"FrutigerLTW01-65Bold.eot"}};function sv(t={}){const{fontPath:e,fontWeights:n}={...Jo,...t},r=[];return n?.includes(400)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 400;
  src: url("${e}${ht.normal.eot}?#iefix") format("eot"),
       url("${e}${ht.normal.woff2}") format("woff2"),
       url("${e}${ht.normal.woff}") format("woff"),
       url("${e}${ht.normal.ttf}") format("truetype");
  src: url("${e}${ht.normal.eot}");
}`),n?.includes(600)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 600;
  src: url("${e}${ht.bold.eot}?#iefix") format("eot"),
       url("${e}${ht.bold.woff2}") format("woff2"),
       url("${e}${ht.bold.woff}") format("woff"),
       url("${e}${ht.bold.ttf}") format("truetype");
  src: url("${e}${ht.bold.eot}");
}`),r.join(`
`)}function ov(t={}){if(typeof document>"u")return;const{fontPath:e,fontWeights:n}={...Jo,...t};[...n?.includes(400)?[{href:`${e}${ht.normal.woff2}`,as:"font",type:"font/woff2"},{href:`${e}${ht.normal.woff}`,as:"font",type:"font/woff"}]:[],...n?.includes(600)?[{href:`${e}${ht.bold.woff2}`,as:"font",type:"font/woff2"},{href:`${e}${ht.bold.woff}`,as:"font",type:"font/woff"}]:[]].forEach(a=>{const i=document.createElement("link");i.rel="preload",i.href=a.href,i.as=a.as,i.type=a.type,i.crossOrigin="anonymous",document.head.appendChild(i)})}const lv='"Frutiger W01", Arial, Helvetica, sans-serif',cv="Arial, Helvetica, sans-serif";async function uv(){if(typeof document>"u"||!document.fonts)return!1;try{return await document.fonts.load('1em "Frutiger W01"'),document.fonts.check('1em "Frutiger W01"')}catch{return!1}}function ln(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rp(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var vt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},cr={duration:.5,overwrite:!1,delay:0},Qo,ot,He,Dt=1e8,Le=1/Dt,el=Math.PI*2,dv=el/4,fv=0,ap=Math.sqrt,hv=Math.cos,mv=Math.sin,it=function(e){return typeof e=="string"},Ue=function(e){return typeof e=="function"},cn=function(e){return typeof e=="number"},tl=function(e){return typeof e>"u"},Kt=function(e){return typeof e=="object"},gt=function(e){return e!==!1},nl=function(){return typeof window<"u"},Fi=function(e){return Ue(e)||it(e)},ip=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ut=Array.isArray,rl=/(?:-?\.?\d|\.)+/gi,sp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ur=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,al=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,op=/[+-]=-?[.\d]+/,lp=/[^,'"\[\]\s]+/gi,pv=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Oe,Zt,il,sl,wt={},Bi={},cp,up=function(e){return(Bi=fr(e,wt))&&yt},ol=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},ma=function(e,n){return!n&&console.warn(e)},dp=function(e,n){return e&&(wt[e]=n)&&Bi&&(Bi[e]=n)||wt},pa=function(){return 0},gv={suppressEvents:!0,isStart:!0,kill:!1},Ai={suppressEvents:!0,kill:!1},bv={suppressEvents:!0},ll={},vn=[],cl={},fp,St={},ul={},hp=30,Ei=[],dl="",fl=function(e){var n=e[0],r,a;if(Kt(n)||Ue(n)||(e=[e]),!(r=(n._gsap||{}).harness)){for(a=Ei.length;a--&&!Ei[a].targetTest(n););r=Ei[a]}for(a=e.length;a--;)e[a]&&(e[a]._gsap||(e[a]._gsap=new Op(e[a],r)))||e.splice(a,1);return e},Rn=function(e){return e._gsap||fl($t(e))[0]._gsap},mp=function(e,n,r){return(r=e[n])&&Ue(r)?e[n]():tl(r)&&e.getAttribute&&e.getAttribute(n)||r},bt=function(e,n){return(e=e.split(",")).forEach(n)||e},Xe=function(e){return Math.round(e*1e5)/1e5||0},Je=function(e){return Math.round(e*1e7)/1e7||0},dr=function(e,n){var r=n.charAt(0),a=parseFloat(n.substr(2));return e=parseFloat(e),r==="+"?e+a:r==="-"?e-a:r==="*"?e*a:e/a},_v=function(e,n){for(var r=n.length,a=0;e.indexOf(n[a])<0&&++a<r;);return a<r},Hi=function(){var e=vn.length,n=vn.slice(0),r,a;for(cl={},vn.length=0,r=0;r<e;r++)a=n[r],a&&a._lazy&&(a.render(a._lazy[0],a._lazy[1],!0)._lazy=0)},hl=function(e){return!!(e._initted||e._startAt||e.add)},pp=function(e,n,r,a){vn.length&&!ot&&Hi(),e.render(n,r,!!(ot&&n<0&&hl(e))),vn.length&&!ot&&Hi()},gp=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(lp).length<2?n:it(e)?e.trim():e},bp=function(e){return e},kt=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},yv=function(e){return function(n,r){for(var a in r)a in n||a==="duration"&&e||a==="ease"||(n[a]=r[a])}},fr=function(e,n){for(var r in n)e[r]=n[r];return e},_p=function t(e,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Kt(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},Ri=function(e,n){var r={},a;for(a in e)a in n||(r[a]=e[a]);return r},ga=function(e){var n=e.parent||Oe,r=e.keyframes?yv(ut(e.keyframes)):kt;if(gt(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},xv=function(e,n){for(var r=e.length,a=r===n.length;a&&r--&&e[r]===n[r];);return r<0},yp=function(e,n,r,a,i){var o=e[a],l;if(i)for(l=n[i];o&&o[i]>l;)o=o._prev;return o?(n._next=o._next,o._next=n):(n._next=e[r],e[r]=n),n._next?n._next._prev=n:e[a]=n,n._prev=o,n.parent=n._dp=e,n},zi=function(e,n,r,a){r===void 0&&(r="_first"),a===void 0&&(a="_last");var i=n._prev,o=n._next;i?i._next=o:e[r]===n&&(e[r]=o),o?o._prev=i:e[a]===n&&(e[a]=i),n._next=n._prev=n.parent=null},wn=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},zn=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},vv=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},ml=function(e,n,r,a){return e._startAt&&(ot?e._startAt.revert(Ai):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,a))},wv=function t(e){return!e||e._ts&&t(e.parent)},xp=function(e){return e._repeat?hr(e._tTime,e=e.duration()+e._rDelay)*e:0},hr=function(e,n){var r=Math.floor(e=Je(e/n));return e&&r===e?r-1:r},Oi=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Wi=function(e){return e._end=Je(e._start+(e._tDur/Math.abs(e._ts||e._rts||Le)||0))},Ui=function(e,n){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Je(r._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),Wi(e),r._dirty||zn(r,e)),e},vp=function(e,n){var r;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(r=Oi(e.rawTime(),n),(!n._dur||_a(0,n.totalDuration(),r)-n._tTime>Le)&&n.render(r,!0)),zn(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Le}},Jt=function(e,n,r,a){return n.parent&&wn(n),n._start=Je((cn(r)?r:r||e!==Oe?Mt(e,r,n):e._time)+n._delay),n._end=Je(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),yp(e,n,"_first","_last",e._sort?"_start":0),pl(n)||(e._recent=n),a||vp(e,n),e._ts<0&&Ui(e,e._tTime),e},wp=function(e,n){return(wt.ScrollTrigger||ol("scrollTrigger",n))&&wt.ScrollTrigger.create(n,e)},Sp=function(e,n,r,a,i){if(kl(e,n,i),!e._initted)return 1;if(!r&&e._pt&&!ot&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&fp!==Tt.frame)return vn.push(e),e._lazy=[i,a],1},Sv=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},pl=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},kv=function(e,n,r,a){var i=e.ratio,o=n<0||!n&&(!e._start&&Sv(e)&&!(!e._initted&&pl(e))||(e._ts<0||e._dp._ts<0)&&!pl(e))?0:1,l=e._rDelay,u=0,c,d,h;if(l&&e._repeat&&(u=_a(0,e._tDur,n),d=hr(u,l),e._yoyo&&d&1&&(o=1-o),d!==hr(e._tTime,l)&&(i=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==i||ot||a||e._zTime===Le||!n&&e._zTime){if(!e._initted&&Sp(e,n,a,r,u))return;for(h=e._zTime,e._zTime=n||(r?Le:0),r||(r=n&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=u,c=e._pt;c;)c.r(o,c.d),c=c._next;n<0&&ml(e,n,r,!0),e._onUpdate&&!r&&Ct(e,"onUpdate"),u&&e._repeat&&!r&&e.parent&&Ct(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===o&&(o&&wn(e,1),!r&&!ot&&(Ct(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},Cv=function(e,n,r){var a;if(r>n)for(a=e._first;a&&a._start<=r;){if(a.data==="isPause"&&a._start>n)return a;a=a._next}else for(a=e._last;a&&a._start>=r;){if(a.data==="isPause"&&a._start<n)return a;a=a._prev}},mr=function(e,n,r,a){var i=e._repeat,o=Je(n)||0,l=e._tTime/e._tDur;return l&&!a&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:Je(o*(i+1)+e._rDelay*i):o,l>0&&!a&&Ui(e,e._tTime=e._tDur*l),e.parent&&Wi(e),r||zn(e.parent,e),e},kp=function(e){return e instanceof lt?zn(e):mr(e,e._dur)},Tv={_start:0,endTime:pa,totalDuration:pa},Mt=function t(e,n,r){var a=e.labels,i=e._recent||Tv,o=e.duration()>=Dt?i.endTime(!1):e._dur,l,u,c;return it(n)&&(isNaN(n)||n in a)?(u=n.charAt(0),c=n.substr(-1)==="%",l=n.indexOf("="),u==="<"||u===">"?(l>=0&&(n=n.replace(/=/,"")),(u==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(n.substr(1))||0)*(c?(l<0?i:r).totalDuration()/100:1)):l<0?(n in a||(a[n]=o),a[n]):(u=parseFloat(n.charAt(l-1)+n.substr(l+1)),c&&r&&(u=u/100*(ut(r)?r[0]:r).totalDuration()),l>1?t(e,n.substr(0,l-1),r)+u:o+u)):n==null?o:+n},ba=function(e,n,r){var a=cn(n[1]),i=(a?2:1)+(e<2?0:1),o=n[i],l,u;if(a&&(o.duration=n[1]),o.parent=r,e){for(l=o,u=r;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=gt(u.vars.inherit)&&u.parent;o.immediateRender=gt(l.immediateRender),e<2?o.runBackwards=1:o.startAt=n[i-1]}return new Ke(n[0],o,n[i+1])},Sn=function(e,n){return e||e===0?n(e):n},_a=function(e,n,r){return r<e?e:r>n?n:r},dt=function(e,n){return!it(e)||!(n=pv.exec(e))?"":n[1]},Nv=function(e,n,r){return Sn(r,function(a){return _a(e,n,a)})},gl=[].slice,Cp=function(e,n){return e&&Kt(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&Kt(e[0]))&&!e.nodeType&&e!==Zt},jv=function(e,n,r){return r===void 0&&(r=[]),e.forEach(function(a){var i;return it(a)&&!n||Cp(a,1)?(i=r).push.apply(i,$t(a)):r.push(a)})||r},$t=function(e,n,r){return He&&!n&&He.selector?He.selector(e):it(e)&&!r&&(il||!gr())?gl.call((n||sl).querySelectorAll(e),0):ut(e)?jv(e,r):Cp(e)?gl.call(e,0):e?[e]:[]},bl=function(e){return e=$t(e)[0]||ma("Invalid scope")||{},function(n){var r=e.current||e.nativeElement||e;return $t(n,r.querySelectorAll?r:r===e?ma("Invalid scope")||sl.createElement("div"):e)}},Tp=function(e){return e.sort(function(){return .5-Math.random()})},Np=function(e){if(Ue(e))return e;var n=Kt(e)?e:{each:e},r=On(n.ease),a=n.from||0,i=parseFloat(n.base)||0,o={},l=a>0&&a<1,u=isNaN(a)||l,c=n.axis,d=a,h=a;return it(a)?d=h={center:.5,edges:.5,end:1}[a]||0:!l&&u&&(d=a[0],h=a[1]),function(p,g,y){var f=(y||n).length,m=o[f],I,M,C,v,D,T,N,_,w;if(!m){if(w=n.grid==="auto"?0:(n.grid||[1,Dt])[1],!w){for(N=-Dt;N<(N=y[w++].getBoundingClientRect().left)&&w<f;);w<f&&w--}for(m=o[f]=[],I=u?Math.min(w,f)*d-.5:a%w,M=w===Dt?0:u?f*h/w-.5:a/w|0,N=0,_=Dt,T=0;T<f;T++)C=T%w-I,v=M-(T/w|0),m[T]=D=c?Math.abs(c==="y"?v:C):ap(C*C+v*v),D>N&&(N=D),D<_&&(_=D);a==="random"&&Tp(m),m.max=N-_,m.min=_,m.v=f=(parseFloat(n.amount)||parseFloat(n.each)*(w>f?f-1:c?c==="y"?f/w:w:Math.max(w,f/w))||0)*(a==="edges"?-1:1),m.b=f<0?i-f:i,m.u=dt(n.amount||n.each)||0,r=r&&f<0?Hp(r):r}return f=(m[p]-m.min)/m.max||0,Je(m.b+(r?r(f):f)*m.v)+m.u}},_l=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var a=Je(Math.round(parseFloat(r)/e)*e*n);return(a-a%1)/n+(cn(r)?0:dt(r))}},jp=function(e,n){var r=ut(e),a,i;return!r&&Kt(e)&&(a=r=e.radius||Dt,e.values?(e=$t(e.values),(i=!cn(e[0]))&&(a*=a)):e=_l(e.increment)),Sn(n,r?Ue(e)?function(o){return i=e(o),Math.abs(i-o)<=a?i:o}:function(o){for(var l=parseFloat(i?o.x:o),u=parseFloat(i?o.y:0),c=Dt,d=0,h=e.length,p,g;h--;)i?(p=e[h].x-l,g=e[h].y-u,p=p*p+g*g):p=Math.abs(e[h]-l),p<c&&(c=p,d=h);return d=!a||c<=a?e[d]:o,i||d===o||cn(o)?d:d+dt(o)}:_l(e))},Dp=function(e,n,r,a){return Sn(ut(e)?!n:r===!0?!!(r=0):!a,function(){return ut(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(a=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(n-e+r*.99))/r)*r*a)/a})},Dv=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(a){return n.reduce(function(i,o){return o(i)},a)}},Mv=function(e,n){return function(r){return e(parseFloat(r))+(n||dt(r))}},$v=function(e,n,r){return $p(e,n,0,1,r)},Mp=function(e,n,r){return Sn(r,function(a){return e[~~n(a)]})},Iv=function t(e,n,r){var a=n-e;return ut(e)?Mp(e,t(0,e.length),n):Sn(r,function(i){return(a+(i-e)%a)%a+e})},Pv=function t(e,n,r){var a=n-e,i=a*2;return ut(e)?Mp(e,t(0,e.length-1),n):Sn(r,function(o){return o=(i+(o-e)%i)%i||0,e+(o>a?i-o:o)})},ya=function(e){for(var n=0,r="",a,i,o,l;~(a=e.indexOf("random(",n));)o=e.indexOf(")",a),l=e.charAt(a+7)==="[",i=e.substr(a+7,o-a-7).match(l?lp:rl),r+=e.substr(n,a-n)+Dp(l?i:+i[0],l?0:+i[1],+i[2]||1e-5),n=o+1;return r+e.substr(n,e.length-n)},$p=function(e,n,r,a,i){var o=n-e,l=a-r;return Sn(i,function(u){return r+((u-e)/o*l||0)})},Lv=function t(e,n,r,a){var i=isNaN(e+n)?0:function(g){return(1-g)*e+g*n};if(!i){var o=it(e),l={},u,c,d,h,p;if(r===!0&&(a=1)&&(r=null),o)e={p:e},n={p:n};else if(ut(e)&&!ut(n)){for(d=[],h=e.length,p=h-2,c=1;c<h;c++)d.push(t(e[c-1],e[c]));h--,i=function(y){y*=h;var f=Math.min(p,~~y);return d[f](y-f)},r=n}else a||(e=fr(ut(e)?[]:{},e));if(!d){for(u in n)wl.call(l,e,u,"get",n[u]);i=function(y){return Nl(y,l)||(o?e.p:e)}}}return Sn(r,i)},Ip=function(e,n,r){var a=e.labels,i=Dt,o,l,u;for(o in a)l=a[o]-n,l<0==!!r&&l&&i>(l=Math.abs(l))&&(u=o,i=l);return u},Ct=function(e,n,r){var a=e.vars,i=a[n],o=He,l=e._ctx,u,c,d;if(i)return u=a[n+"Params"],c=a.callbackScope||e,r&&vn.length&&Hi(),l&&(He=l),d=u?i.apply(c,u):i.call(c),He=o,d},xa=function(e){return wn(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ot),e.progress()<1&&Ct(e,"onInterrupt"),e},pr,Pp=[],Lp=function(e){if(e)if(e=!e.name&&e.default||e,nl()||e.headless){var n=e.name,r=Ue(e),a=n&&!r&&e.init?function(){this._props=[]}:e,i={init:pa,render:Nl,add:wl,kill:Kv,modifier:Xv,rawVars:0},o={targetTest:0,get:0,getSetter:Tl,aliases:{},register:0};if(gr(),e!==a){if(St[n])return;kt(a,kt(Ri(e,i),o)),fr(a.prototype,fr(i,Ri(e,o))),St[a.prop=n]=a,e.targetTest&&(Ei.push(a),ll[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}dp(n,a),e.register&&e.register(yt,a,_t)}else Pp.push(e)},Fe=255,va={aqua:[0,Fe,Fe],lime:[0,Fe,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Fe],navy:[0,0,128],white:[Fe,Fe,Fe],olive:[128,128,0],yellow:[Fe,Fe,0],orange:[Fe,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Fe,0,0],pink:[Fe,192,203],cyan:[0,Fe,Fe],transparent:[Fe,Fe,Fe,0]},yl=function(e,n,r){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(r-n)*e*6:e<.5?r:e*3<2?n+(r-n)*(2/3-e)*6:n)*Fe+.5|0},Fp=function(e,n,r){var a=e?cn(e)?[e>>16,e>>8&Fe,e&Fe]:0:va.black,i,o,l,u,c,d,h,p,g,y;if(!a){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),va[e])a=va[e];else if(e.charAt(0)==="#"){if(e.length<6&&(i=e.charAt(1),o=e.charAt(2),l=e.charAt(3),e="#"+i+i+o+o+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return a=parseInt(e.substr(1,6),16),[a>>16,a>>8&Fe,a&Fe,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),a=[e>>16,e>>8&Fe,e&Fe]}else if(e.substr(0,3)==="hsl"){if(a=y=e.match(rl),!n)u=+a[0]%360/360,c=+a[1]/100,d=+a[2]/100,o=d<=.5?d*(c+1):d+c-d*c,i=d*2-o,a.length>3&&(a[3]*=1),a[0]=yl(u+1/3,i,o),a[1]=yl(u,i,o),a[2]=yl(u-1/3,i,o);else if(~e.indexOf("="))return a=e.match(sp),r&&a.length<4&&(a[3]=1),a}else a=e.match(rl)||va.transparent;a=a.map(Number)}return n&&!y&&(i=a[0]/Fe,o=a[1]/Fe,l=a[2]/Fe,h=Math.max(i,o,l),p=Math.min(i,o,l),d=(h+p)/2,h===p?u=c=0:(g=h-p,c=d>.5?g/(2-h-p):g/(h+p),u=h===i?(o-l)/g+(o<l?6:0):h===o?(l-i)/g+2:(i-o)/g+4,u*=60),a[0]=~~(u+.5),a[1]=~~(c*100+.5),a[2]=~~(d*100+.5)),r&&a.length<4&&(a[3]=1),a},Bp=function(e){var n=[],r=[],a=-1;return e.split(kn).forEach(function(i){var o=i.match(ur)||[];n.push.apply(n,o),r.push(a+=o.length+1)}),n.c=r,n},Ap=function(e,n,r){var a="",i=(e+a).match(kn),o=n?"hsla(":"rgba(",l=0,u,c,d,h;if(!i)return e;if(i=i.map(function(p){return(p=Fp(p,n,1))&&o+(n?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),r&&(d=Bp(e),u=r.c,u.join(a)!==d.c.join(a)))for(c=e.replace(kn,"1").split(ur),h=c.length-1;l<h;l++)a+=c[l]+(~u.indexOf(l)?i.shift()||o+"0,0,0,0)":(d.length?d:i.length?i:r).shift());if(!c)for(c=e.split(kn),h=c.length-1;l<h;l++)a+=c[l]+i[l];return a+c[h]},kn=(function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in va)t+="|"+e+"\\b";return new RegExp(t+")","gi")})(),Fv=/hsl[a]?\(/,Ep=function(e){var n=e.join(" "),r;if(kn.lastIndex=0,kn.test(n))return r=Fv.test(n),e[1]=Ap(e[1],r),e[0]=Ap(e[0],r,Bp(e[1])),!0},wa,Tt=(function(){var t=Date.now,e=500,n=33,r=t(),a=r,i=1e3/240,o=i,l=[],u,c,d,h,p,g,y=function f(m){var I=t()-a,M=m===!0,C,v,D,T;if((I>e||I<0)&&(r+=I-n),a+=I,D=a-r,C=D-o,(C>0||M)&&(T=++h.frame,p=D-h.time*1e3,h.time=D=D/1e3,o+=C+(C>=i?4:i-C),v=1),M||(u=c(f)),v)for(g=0;g<l.length;g++)l[g](D,p,T,m)};return h={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(m){return p/(1e3/(m||60))},wake:function(){cp&&(!il&&nl()&&(Zt=il=window,sl=Zt.document||{},wt.gsap=yt,(Zt.gsapVersions||(Zt.gsapVersions=[])).push(yt.version),up(Bi||Zt.GreenSockGlobals||!Zt.gsap&&Zt||{}),Pp.forEach(Lp)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&h.sleep(),c=d||function(m){return setTimeout(m,o-h.time*1e3+1|0)},wa=1,y(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(u),wa=0,c=pa},lagSmoothing:function(m,I){e=m||1/0,n=Math.min(I||33,e)},fps:function(m){i=1e3/(m||240),o=h.time*1e3+i},add:function(m,I,M){var C=I?function(v,D,T,N){m(v,D,T,N),h.remove(C)}:m;return h.remove(m),l[M?"unshift":"push"](C),gr(),C},remove:function(m,I){~(I=l.indexOf(m))&&l.splice(I,1)&&g>=I&&g--},_listeners:l},h})(),gr=function(){return!wa&&Tt.wake()},Ie={},Bv=/^[\d.\-M][\d.\-,\s]/,Av=/["']/g,Ev=function(e){for(var n={},r=e.substr(1,e.length-3).split(":"),a=r[0],i=1,o=r.length,l,u,c;i<o;i++)u=r[i],l=i!==o-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),n[a]=isNaN(c)?c.replace(Av,"").trim():+c,a=u.substr(l+1).trim();return n},Hv=function(e){var n=e.indexOf("(")+1,r=e.indexOf(")"),a=e.indexOf("(",n);return e.substring(n,~a&&a<r?e.indexOf(")",r+1):r)},Rv=function(e){var n=(e+"").split("("),r=Ie[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[Ev(n[1])]:Hv(e).split(",").map(gp)):Ie._CE&&Bv.test(e)?Ie._CE("",e):r},Hp=function(e){return function(n){return 1-e(1-n)}},Rp=function t(e,n){for(var r=e._first,a;r;)r instanceof lt?t(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?t(r.timeline,n):(a=r._ease,r._ease=r._yEase,r._yEase=a,r._yoyo=n)),r=r._next},On=function(e,n){return e&&(Ue(e)?e:Ie[e]||Rv(e))||n},Wn=function(e,n,r,a){r===void 0&&(r=function(u){return 1-n(1-u)}),a===void 0&&(a=function(u){return u<.5?n(u*2)/2:1-n((1-u)*2)/2});var i={easeIn:n,easeOut:r,easeInOut:a},o;return bt(e,function(l){Ie[l]=wt[l]=i,Ie[o=l.toLowerCase()]=r;for(var u in i)Ie[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=Ie[l+"."+u]=i[u]}),i},zp=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},xl=function t(e,n,r){var a=n>=1?n:1,i=(r||(e?.3:.45))/(n<1?n:1),o=i/el*(Math.asin(1/a)||0),l=function(d){return d===1?1:a*Math.pow(2,-10*d)*mv((d-o)*i)+1},u=e==="out"?l:e==="in"?function(c){return 1-l(1-c)}:zp(l);return i=el/i,u.config=function(c,d){return t(e,c,d)},u},vl=function t(e,n){n===void 0&&(n=1.70158);var r=function(o){return o?--o*o*((n+1)*o+n)+1:0},a=e==="out"?r:e==="in"?function(i){return 1-r(1-i)}:zp(r);return a.config=function(i){return t(e,i)},a};bt("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;Wn(t+",Power"+(n-1),e?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})}),Ie.Linear.easeNone=Ie.none=Ie.Linear.easeIn,Wn("Elastic",xl("in"),xl("out"),xl()),(function(t,e){var n=1/e,r=2*n,a=2.5*n,i=function(l){return l<n?t*l*l:l<r?t*Math.pow(l-1.5/e,2)+.75:l<a?t*(l-=2.25/e)*l+.9375:t*Math.pow(l-2.625/e,2)+.984375};Wn("Bounce",function(o){return 1-i(1-o)},i)})(7.5625,2.75),Wn("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)}),Wn("Circ",function(t){return-(ap(1-t*t)-1)}),Wn("Sine",function(t){return t===1?1:-hv(t*dv)+1}),Wn("Back",vl("in"),vl("out"),vl()),Ie.SteppedEase=Ie.steps=wt.SteppedEase={config:function(e,n){e===void 0&&(e=1);var r=1/e,a=e+(n?0:1),i=n?1:0,o=1-Le;return function(l){return((a*_a(0,o,l)|0)+i)*r}}},cr.ease=Ie["quad.out"],bt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return dl+=t+","+t+"Params,"});var Op=function(e,n){this.id=fv++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:mp,this.set=n?n.getSetter:Tl},Sa=(function(){function t(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,mr(this,+n.duration,1,1),this.data=n.data,He&&(this._ctx=He,He.data.push(this)),wa||Tt.wake()}var e=t.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,mr(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,a){if(gr(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Ui(this,r),!i._dp||i.parent||vp(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Jt(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!a||this._initted&&Math.abs(this._zTime)===Le||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),pp(this,r,a)),this},e.time=function(r,a){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+xp(this))%(this._dur+this._rDelay)||(r?this._dur:0),a):this._time},e.totalProgress=function(r,a){return arguments.length?this.totalTime(this.totalDuration()*r,a):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+xp(this),a):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,a){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*i,a):this._repeat?hr(this._tTime,i)+1:1},e.timeScale=function(r,a){if(!arguments.length)return this._rts===-Le?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?Oi(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Le?0:this._rts,this.totalTime(_a(-Math.abs(this._delay),this.totalDuration(),i),a!==!1),Wi(this),vv(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(gr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Le&&(this._tTime-=Le)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var a=this.parent||this._dp;return a&&(a._sort||!this.parent)&&Jt(a,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(gt(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var a=this.parent||this._dp;return a?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Oi(a.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=bv);var a=ot;return ot=r,hl(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),ot=a,this},e.globalTime=function(r){for(var a=this,i=arguments.length?r:a.rawTime();a;)i=a._start+i/(Math.abs(a._ts)||1),a=a._dp;return!this.parent&&this._sat?this._sat.globalTime(r):i},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,kp(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var a=this._time;return this._rDelay=r,kp(this),a?this.time(a):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,a){return this.totalTime(Mt(this,r),gt(a))},e.restart=function(r,a){return this.play().totalTime(r?-this._delay:0,gt(a)),this._dur||(this._zTime=-Le),this},e.play=function(r,a){return r!=null&&this.seek(r,a),this.reversed(!1).paused(!1)},e.reverse=function(r,a){return r!=null&&this.seek(r||this.totalDuration(),a),this.reversed(!0).paused(!1)},e.pause=function(r,a){return r!=null&&this.seek(r,a),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Le:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Le,this},e.isActive=function(){var r=this.parent||this._dp,a=this._start,i;return!!(!r||this._ts&&this._initted&&r.isActive()&&(i=r.rawTime(!0))>=a&&i<this.endTime(!0)-Le)},e.eventCallback=function(r,a,i){var o=this.vars;return arguments.length>1?(a?(o[r]=a,i&&(o[r+"Params"]=i),r==="onUpdate"&&(this._onUpdate=a)):delete o[r],this):o[r]},e.then=function(r){var a=this;return new Promise(function(i){var o=Ue(r)?r:bp,l=function(){var c=a.then;a.then=null,Ue(o)&&(o=o(a))&&(o.then||o===a)&&(a.then=c),i(o),a.then=c};a._initted&&a.totalProgress()===1&&a._ts>=0||!a._tTime&&a._ts<0?l():a._prom=l})},e.kill=function(){xa(this)},t})();kt(Sa.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Le,_prom:0,_ps:!1,_rts:1});var lt=(function(t){rp(e,t);function e(r,a){var i;return r===void 0&&(r={}),i=t.call(this,r)||this,i.labels={},i.smoothChildTiming=!!r.smoothChildTiming,i.autoRemoveChildren=!!r.autoRemoveChildren,i._sort=gt(r.sortChildren),Oe&&Jt(r.parent||Oe,ln(i),a),r.reversed&&i.reverse(),r.paused&&i.paused(!0),r.scrollTrigger&&wp(ln(i),r.scrollTrigger),i}var n=e.prototype;return n.to=function(a,i,o){return ba(0,arguments,this),this},n.from=function(a,i,o){return ba(1,arguments,this),this},n.fromTo=function(a,i,o,l){return ba(2,arguments,this),this},n.set=function(a,i,o){return i.duration=0,i.parent=this,ga(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new Ke(a,i,Mt(this,o),1),this},n.call=function(a,i,o){return Jt(this,Ke.delayedCall(0,a,i),o)},n.staggerTo=function(a,i,o,l,u,c,d){return o.duration=i,o.stagger=o.stagger||l,o.onComplete=c,o.onCompleteParams=d,o.parent=this,new Ke(a,o,Mt(this,u)),this},n.staggerFrom=function(a,i,o,l,u,c,d){return o.runBackwards=1,ga(o).immediateRender=gt(o.immediateRender),this.staggerTo(a,i,o,l,u,c,d)},n.staggerFromTo=function(a,i,o,l,u,c,d,h){return l.startAt=o,ga(l).immediateRender=gt(l.immediateRender),this.staggerTo(a,i,l,u,c,d,h)},n.render=function(a,i,o){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=a<=0?0:Je(a),h=this._zTime<0!=a<0&&(this._initted||!c),p,g,y,f,m,I,M,C,v,D,T,N;if(this!==Oe&&d>u&&a>=0&&(d=u),d!==this._tTime||o||h){if(l!==this._time&&c&&(d+=this._time-l,a+=this._time-l),p=d,v=this._start,C=this._ts,I=!C,h&&(c||(l=this._zTime),(a||!i)&&(this._zTime=a)),this._repeat){if(T=this._yoyo,m=c+this._rDelay,this._repeat<-1&&a<0)return this.totalTime(m*100+a,i,o);if(p=Je(d%m),d===u?(f=this._repeat,p=c):(D=Je(d/m),f=~~D,f&&f===D&&(p=c,f--),p>c&&(p=c)),D=hr(this._tTime,m),!l&&this._tTime&&D!==f&&this._tTime-D*m-this._dur<=0&&(D=f),T&&f&1&&(p=c-p,N=1),f!==D&&!this._lock){var _=T&&D&1,w=_===(T&&f&1);if(f<D&&(_=!_),l=_?0:d%c?c:d,this._lock=1,this.render(l||(N?0:Je(f*m)),i,!c)._lock=0,this._tTime=d,!i&&this.parent&&Ct(this,"onRepeat"),this.vars.repeatRefresh&&!N&&(this.invalidate()._lock=1),l&&l!==this._time||I!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,w&&(this._lock=2,l=_?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!N&&this.invalidate()),this._lock=0,!this._ts&&!I)return this;Rp(this,N)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(M=Cv(this,Je(l),Je(p)),M&&(d-=p-(p=M._start))),this._tTime=d,this._time=p,this._act=!C,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=a,l=0),!l&&d&&!i&&!D&&(Ct(this,"onStart"),this._tTime!==d))return this;if(p>=l&&a>=0)for(g=this._first;g;){if(y=g._next,(g._act||p>=g._start)&&g._ts&&M!==g){if(g.parent!==this)return this.render(a,i,o);if(g.render(g._ts>0?(p-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(p-g._start)*g._ts,i,o),p!==this._time||!this._ts&&!I){M=0,y&&(d+=this._zTime=-Le);break}}g=y}else{g=this._last;for(var j=a<0?a:p;g;){if(y=g._prev,(g._act||j<=g._end)&&g._ts&&M!==g){if(g.parent!==this)return this.render(a,i,o);if(g.render(g._ts>0?(j-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(j-g._start)*g._ts,i,o||ot&&hl(g)),p!==this._time||!this._ts&&!I){M=0,y&&(d+=this._zTime=j?-Le:Le);break}}g=y}}if(M&&!i&&(this.pause(),M.render(p>=l?0:-Le)._zTime=p>=l?1:-1,this._ts))return this._start=v,Wi(this),this.render(a,i,o);this._onUpdate&&!i&&Ct(this,"onUpdate",!0),(d===u&&this._tTime>=this.totalDuration()||!d&&l)&&(v===this._start||Math.abs(C)!==Math.abs(this._ts))&&(this._lock||((a||!c)&&(d===u&&this._ts>0||!d&&this._ts<0)&&wn(this,1),!i&&!(a<0&&!l)&&(d||l||!u)&&(Ct(this,d===u&&a>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(a,i){var o=this;if(cn(i)||(i=Mt(this,i,a)),!(a instanceof Sa)){if(ut(a))return a.forEach(function(l){return o.add(l,i)}),this;if(it(a))return this.addLabel(a,i);if(Ue(a))a=Ke.delayedCall(0,a);else return this}return this!==a?Jt(this,a,i):this},n.getChildren=function(a,i,o,l){a===void 0&&(a=!0),i===void 0&&(i=!0),o===void 0&&(o=!0),l===void 0&&(l=-Dt);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof Ke?i&&u.push(c):(o&&u.push(c),a&&u.push.apply(u,c.getChildren(!0,i,o)))),c=c._next;return u},n.getById=function(a){for(var i=this.getChildren(1,1,1),o=i.length;o--;)if(i[o].vars.id===a)return i[o]},n.remove=function(a){return it(a)?this.removeLabel(a):Ue(a)?this.killTweensOf(a):(a.parent===this&&zi(this,a),a===this._recent&&(this._recent=this._last),zn(this))},n.totalTime=function(a,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Je(Tt.time-(this._ts>0?a/this._ts:(this.totalDuration()-a)/-this._ts))),t.prototype.totalTime.call(this,a,i),this._forcing=0,this):this._tTime},n.addLabel=function(a,i){return this.labels[a]=Mt(this,i),this},n.removeLabel=function(a){return delete this.labels[a],this},n.addPause=function(a,i,o){var l=Ke.delayedCall(0,i||pa,o);return l.data="isPause",this._hasPause=1,Jt(this,l,Mt(this,a))},n.removePause=function(a){var i=this._first;for(a=Mt(this,a);i;)i._start===a&&i.data==="isPause"&&wn(i),i=i._next},n.killTweensOf=function(a,i,o){for(var l=this.getTweensOf(a,o),u=l.length;u--;)Cn!==l[u]&&l[u].kill(a,i);return this},n.getTweensOf=function(a,i){for(var o=[],l=$t(a),u=this._first,c=cn(i),d;u;)u instanceof Ke?_v(u._targets,l)&&(c?(!Cn||u._initted&&u._ts)&&u.globalTime(0)<=i&&u.globalTime(u.totalDuration())>i:!i||u.isActive())&&o.push(u):(d=u.getTweensOf(l,i)).length&&o.push.apply(o,d),u=u._next;return o},n.tweenTo=function(a,i){i=i||{};var o=this,l=Mt(o,a),u=i,c=u.startAt,d=u.onStart,h=u.onStartParams,p=u.immediateRender,g,y=Ke.to(o,kt({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:i.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale())||Le,onStart:function(){if(o.pause(),!g){var m=i.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale());y._dur!==m&&mr(y,m,0,1).render(y._time,!0,!0),g=1}d&&d.apply(y,h||[])}},i));return p?y.render(0):y},n.tweenFromTo=function(a,i,o){return this.tweenTo(i,kt({startAt:{time:Mt(this,a)}},o))},n.recent=function(){return this._recent},n.nextLabel=function(a){return a===void 0&&(a=this._time),Ip(this,Mt(this,a))},n.previousLabel=function(a){return a===void 0&&(a=this._time),Ip(this,Mt(this,a),1)},n.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.previousLabel(this._time+Le)},n.shiftChildren=function(a,i,o){o===void 0&&(o=0);for(var l=this._first,u=this.labels,c;l;)l._start>=o&&(l._start+=a,l._end+=a),l=l._next;if(i)for(c in u)u[c]>=o&&(u[c]+=a);return zn(this)},n.invalidate=function(a){var i=this._first;for(this._lock=0;i;)i.invalidate(a),i=i._next;return t.prototype.invalidate.call(this,a)},n.clear=function(a){a===void 0&&(a=!0);for(var i=this._first,o;i;)o=i._next,this.remove(i),i=o;return this._dp&&(this._time=this._tTime=this._pTime=0),a&&(this.labels={}),zn(this)},n.totalDuration=function(a){var i=0,o=this,l=o._last,u=Dt,c,d,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-a:a));if(o._dirty){for(h=o.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>u&&o._sort&&l._ts&&!o._lock?(o._lock=1,Jt(o,l,d-l._delay,1)._lock=0):u=d,d<0&&l._ts&&(i-=d,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=d/o._ts,o._time-=d,o._tTime-=d),o.shiftChildren(-d,!1,-1/0),u=0),l._end>i&&l._ts&&(i=l._end),l=c;mr(o,o===Oe&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(a){if(Oe._ts&&(pp(Oe,Oi(a,Oe)),fp=Tt.frame),Tt.frame>=hp){hp+=vt.autoSleep||120;var i=Oe._first;if((!i||!i._ts)&&vt.autoSleep&&Tt._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||Tt.sleep()}}},e})(Sa);kt(lt.prototype,{_lock:0,_hasPause:0,_forcing:0});var zv=function(e,n,r,a,i,o,l){var u=new _t(this._pt,e,n,0,1,qp,null,i),c=0,d=0,h,p,g,y,f,m,I,M;for(u.b=r,u.e=a,r+="",a+="",(I=~a.indexOf("random("))&&(a=ya(a)),o&&(M=[r,a],o(M,e,n),r=M[0],a=M[1]),p=r.match(al)||[];h=al.exec(a);)y=h[0],f=a.substring(c,h.index),g?g=(g+1)%5:f.substr(-5)==="rgba("&&(g=1),y!==p[d++]&&(m=parseFloat(p[d-1])||0,u._pt={_next:u._pt,p:f||d===1?f:",",s:m,c:y.charAt(1)==="="?dr(m,y)-m:parseFloat(y)-m,m:g&&g<4?Math.round:0},c=al.lastIndex);return u.c=c<a.length?a.substring(c,a.length):"",u.fp=l,(op.test(a)||I)&&(u.e=0),this._pt=u,u},wl=function(e,n,r,a,i,o,l,u,c,d){Ue(a)&&(a=a(i||0,e,o));var h=e[n],p=r!=="get"?r:Ue(h)?c?e[n.indexOf("set")||!Ue(e["get"+n.substr(3)])?n:"get"+n.substr(3)](c):e[n]():h,g=Ue(h)?c?Yv:Yp:Cl,y;if(it(a)&&(~a.indexOf("random(")&&(a=ya(a)),a.charAt(1)==="="&&(y=dr(p,a)+(dt(p)||0),(y||y===0)&&(a=y))),!d||p!==a||Sl)return!isNaN(p*a)&&a!==""?(y=new _t(this._pt,e,n,+p||0,a-(p||0),typeof h=="boolean"?qv:Vp,0,g),c&&(y.fp=c),l&&y.modifier(l,this,e),this._pt=y):(!h&&!(n in e)&&ol(n,a),zv.call(this,e,n,p,a,g,u||vt.stringFilter,c))},Ov=function(e,n,r,a,i){if(Ue(e)&&(e=ka(e,i,n,r,a)),!Kt(e)||e.style&&e.nodeType||ut(e)||ip(e))return it(e)?ka(e,i,n,r,a):e;var o={},l;for(l in e)o[l]=ka(e[l],i,n,r,a);return o},Wp=function(e,n,r,a,i,o){var l,u,c,d;if(St[e]&&(l=new St[e]).init(i,l.rawVars?n[e]:Ov(n[e],a,i,o,r),r,a,o)!==!1&&(r._pt=u=new _t(r._pt,i,e,0,1,l.render,l,0,l.priority),r!==pr))for(c=r._ptLookup[r._targets.indexOf(i)],d=l._props.length;d--;)c[l._props[d]]=u;return l},Cn,Sl,kl=function t(e,n,r){var a=e.vars,i=a.ease,o=a.startAt,l=a.immediateRender,u=a.lazy,c=a.onUpdate,d=a.runBackwards,h=a.yoyoEase,p=a.keyframes,g=a.autoRevert,y=e._dur,f=e._startAt,m=e._targets,I=e.parent,M=I&&I.data==="nested"?I.vars.targets:m,C=e._overwrite==="auto"&&!Qo,v=e.timeline,D,T,N,_,w,j,x,S,B,P,$,k,H;if(v&&(!p||!i)&&(i="none"),e._ease=On(i,cr.ease),e._yEase=h?Hp(On(h===!0?i:h,cr.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!v&&!!a.runBackwards,!v||p&&!a.stagger){if(S=m[0]?Rn(m[0]).harness:0,k=S&&a[S.prop],D=Ri(a,ll),f&&(f._zTime<0&&f.progress(1),n<0&&d&&l&&!g?f.render(-1,!0):f.revert(d&&y?Ai:gv),f._lazy=0),o){if(wn(e._startAt=Ke.set(m,kt({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:!f&&gt(u),startAt:null,delay:0,onUpdate:c&&function(){return Ct(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ot||!l&&!g)&&e._startAt.revert(Ai),l&&y&&n<=0&&r<=0){n&&(e._zTime=n);return}}else if(d&&y&&!f){if(n&&(l=!1),N=kt({overwrite:!1,data:"isFromStart",lazy:l&&!f&&gt(u),immediateRender:l,stagger:0,parent:I},D),k&&(N[S.prop]=k),wn(e._startAt=Ke.set(m,N)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ot?e._startAt.revert(Ai):e._startAt.render(-1,!0)),e._zTime=n,!l)t(e._startAt,Le,Le);else if(!n)return}for(e._pt=e._ptCache=0,u=y&&gt(u)||u&&!y,T=0;T<m.length;T++){if(w=m[T],x=w._gsap||fl(m)[T]._gsap,e._ptLookup[T]=P={},cl[x.id]&&vn.length&&Hi(),$=M===m?T:M.indexOf(w),S&&(B=new S).init(w,k||D,e,$,M)!==!1&&(e._pt=_=new _t(e._pt,w,B.name,0,1,B.render,B,0,B.priority),B._props.forEach(function(Q){P[Q]=_}),B.priority&&(j=1)),!S||k)for(N in D)St[N]&&(B=Wp(N,D,e,$,w,M))?B.priority&&(j=1):P[N]=_=wl.call(e,w,N,"get",D[N],$,M,0,a.stringFilter);e._op&&e._op[T]&&e.kill(w,e._op[T]),C&&e._pt&&(Cn=e,Oe.killTweensOf(w,P,e.globalTime(n)),H=!e.parent,Cn=0),e._pt&&u&&(cl[x.id]=1)}j&&Xp(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!H,p&&n<=0&&v.render(Dt,!0,!0)},Wv=function(e,n,r,a,i,o,l,u){var c=(e._pt&&e._ptCache||(e._ptCache={}))[n],d,h,p,g;if(!c)for(c=e._ptCache[n]=[],p=e._ptLookup,g=e._targets.length;g--;){if(d=p[g][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return Sl=1,e.vars[n]="+=0",kl(e,l),Sl=0,u?ma(n+" not eligible for reset"):1;c.push(d)}for(g=c.length;g--;)h=c[g],d=h._pt||h,d.s=(a||a===0)&&!i?a:d.s+(a||0)+o*d.c,d.c=r-d.s,h.e&&(h.e=Xe(r)+dt(h.e)),h.b&&(h.b=d.s+dt(h.b))},Uv=function(e,n){var r=e[0]?Rn(e[0]).harness:0,a=r&&r.aliases,i,o,l,u;if(!a)return n;i=fr({},n);for(o in a)if(o in i)for(u=a[o].split(","),l=u.length;l--;)i[u[l]]=i[o];return i},Gv=function(e,n,r,a){var i=n.ease||a||"power1.inOut",o,l;if(ut(n))l=r[e]||(r[e]=[]),n.forEach(function(u,c){return l.push({t:c/(n.length-1)*100,v:u,e:i})});else for(o in n)l=r[o]||(r[o]=[]),o==="ease"||l.push({t:parseFloat(e),v:n[o],e:i})},ka=function(e,n,r,a,i){return Ue(e)?e.call(n,r,a,i):it(e)&&~e.indexOf("random(")?ya(e):e},Up=dl+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Gp={};bt(Up+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return Gp[t]=1});var Ke=(function(t){rp(e,t);function e(r,a,i,o){var l;typeof a=="number"&&(i.duration=a,a=i,i=null),l=t.call(this,o?a:ga(a))||this;var u=l.vars,c=u.duration,d=u.delay,h=u.immediateRender,p=u.stagger,g=u.overwrite,y=u.keyframes,f=u.defaults,m=u.scrollTrigger,I=u.yoyoEase,M=a.parent||Oe,C=(ut(r)||ip(r)?cn(r[0]):"length"in a)?[r]:$t(r),v,D,T,N,_,w,j,x;if(l._targets=C.length?fl(C):ma("GSAP target "+r+" not found. https://gsap.com",!vt.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,y||p||Fi(c)||Fi(d)){if(a=l.vars,v=l.timeline=new lt({data:"nested",defaults:f||{},targets:M&&M.data==="nested"?M.vars.targets:C}),v.kill(),v.parent=v._dp=ln(l),v._start=0,p||Fi(c)||Fi(d)){if(N=C.length,j=p&&Np(p),Kt(p))for(_ in p)~Up.indexOf(_)&&(x||(x={}),x[_]=p[_]);for(D=0;D<N;D++)T=Ri(a,Gp),T.stagger=0,I&&(T.yoyoEase=I),x&&fr(T,x),w=C[D],T.duration=+ka(c,ln(l),D,w,C),T.delay=(+ka(d,ln(l),D,w,C)||0)-l._delay,!p&&N===1&&T.delay&&(l._delay=d=T.delay,l._start+=d,T.delay=0),v.to(w,T,j?j(D,w,C):0),v._ease=Ie.none;v.duration()?c=d=0:l.timeline=0}else if(y){ga(kt(v.vars.defaults,{ease:"none"})),v._ease=On(y.ease||a.ease||"none");var S=0,B,P,$;if(ut(y))y.forEach(function(k){return v.to(C,k,">")}),v.duration();else{T={};for(_ in y)_==="ease"||_==="easeEach"||Gv(_,y[_],T,y.easeEach);for(_ in T)for(B=T[_].sort(function(k,H){return k.t-H.t}),S=0,D=0;D<B.length;D++)P=B[D],$={ease:P.e,duration:(P.t-(D?B[D-1].t:0))/100*c},$[_]=P.v,v.to(C,$,S),S+=$.duration;v.duration()<c&&v.to({},{duration:c-v.duration()})}}c||l.duration(c=v.duration())}else l.timeline=0;return g===!0&&!Qo&&(Cn=ln(l),Oe.killTweensOf(C),Cn=0),Jt(M,ln(l),i),a.reversed&&l.reverse(),a.paused&&l.paused(!0),(h||!c&&!y&&l._start===Je(M._time)&&gt(h)&&wv(ln(l))&&M.data!=="nested")&&(l._tTime=-Le,l.render(Math.max(0,-d)||0)),m&&wp(ln(l),m),l}var n=e.prototype;return n.render=function(a,i,o){var l=this._time,u=this._tDur,c=this._dur,d=a<0,h=a>u-Le&&!d?u:a<Le?0:a,p,g,y,f,m,I,M,C,v;if(!c)kv(this,a,i,o);else if(h!==this._tTime||!a||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(p=h,C=this.timeline,this._repeat){if(f=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(f*100+a,i,o);if(p=Je(h%f),h===u?(y=this._repeat,p=c):(m=Je(h/f),y=~~m,y&&y===m?(p=c,y--):p>c&&(p=c)),I=this._yoyo&&y&1,I&&(v=this._yEase,p=c-p),m=hr(this._tTime,f),p===l&&!o&&this._initted&&y===m)return this._tTime=h,this;y!==m&&(C&&this._yEase&&Rp(C,I),this.vars.repeatRefresh&&!I&&!this._lock&&p!==f&&this._initted&&(this._lock=o=1,this.render(Je(f*y),!0).invalidate()._lock=0))}if(!this._initted){if(Sp(this,d?a:p,o,i,h))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&y!==m))return this;if(c!==this._dur)return this.render(a,i,o)}if(this._tTime=h,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=M=(v||this._ease)(p/c),this._from&&(this.ratio=M=1-M),!l&&h&&!i&&!m&&(Ct(this,"onStart"),this._tTime!==h))return this;for(g=this._pt;g;)g.r(M,g.d),g=g._next;C&&C.render(a<0?a:C._dur*C._ease(p/this._dur),i,o)||this._startAt&&(this._zTime=a),this._onUpdate&&!i&&(d&&ml(this,a,i,o),Ct(this,"onUpdate")),this._repeat&&y!==m&&this.vars.onRepeat&&!i&&this.parent&&Ct(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(d&&!this._onUpdate&&ml(this,a,!0,!0),(a||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&wn(this,1),!i&&!(d&&!l)&&(h||l||I)&&(Ct(this,h===u?"onComplete":"onReverseComplete",!0),this._prom&&!(h<u&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(a){return(!a||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(a),t.prototype.invalidate.call(this,a)},n.resetTo=function(a,i,o,l,u){wa||Tt.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||kl(this,c),d=this._ease(c/this._dur),Wv(this,a,i,o,l,d,c,u)?this.resetTo(a,i,o,l,1):(Ui(this,0),this.parent||yp(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(a,i){if(i===void 0&&(i="all"),!a&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?xa(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ot),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(a,i,Cn&&Cn.vars.overwrite!==!0)._first||xa(this),this.parent&&o!==this.timeline.totalDuration()&&mr(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,u=a?$t(a):l,c=this._ptLookup,d=this._pt,h,p,g,y,f,m,I;if((!i||i==="all")&&xv(l,u))return i==="all"&&(this._pt=0),xa(this);for(h=this._op=this._op||[],i!=="all"&&(it(i)&&(f={},bt(i,function(M){return f[M]=1}),i=f),i=Uv(l,i)),I=l.length;I--;)if(~u.indexOf(l[I])){p=c[I],i==="all"?(h[I]=i,y=p,g={}):(g=h[I]=h[I]||{},y=i);for(f in y)m=p&&p[f],m&&((!("kill"in m.d)||m.d.kill(f)===!0)&&zi(this,m,"_pt"),delete p[f]),g!=="all"&&(g[f]=1)}return this._initted&&!this._pt&&d&&xa(this),this},e.to=function(a,i){return new e(a,i,arguments[2])},e.from=function(a,i){return ba(1,arguments)},e.delayedCall=function(a,i,o,l){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:a,onComplete:i,onReverseComplete:i,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},e.fromTo=function(a,i,o){return ba(2,arguments)},e.set=function(a,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(a,i)},e.killTweensOf=function(a,i,o){return Oe.killTweensOf(a,i,o)},e})(Sa);kt(Ke.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),bt("staggerTo,staggerFrom,staggerFromTo",function(t){Ke[t]=function(){var e=new lt,n=gl.call(arguments,0);return n.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,n)}});var Cl=function(e,n,r){return e[n]=r},Yp=function(e,n,r){return e[n](r)},Yv=function(e,n,r,a){return e[n](a.fp,r)},Vv=function(e,n,r){return e.setAttribute(n,r)},Tl=function(e,n){return Ue(e[n])?Yp:tl(e[n])&&e.setAttribute?Vv:Cl},Vp=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},qv=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},qp=function(e,n){var r=n._pt,a="";if(!e&&n.b)a=n.b;else if(e===1&&n.e)a=n.e;else{for(;r;)a=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+a,r=r._next;a+=n.c}n.set(n.t,n.p,a,n)},Nl=function(e,n){for(var r=n._pt;r;)r.r(e,r.d),r=r._next},Xv=function(e,n,r,a){for(var i=this._pt,o;i;)o=i._next,i.p===a&&i.modifier(e,n,r),i=o},Kv=function(e){for(var n=this._pt,r,a;n;)a=n._next,n.p===e&&!n.op||n.op===e?zi(this,n,"_pt"):n.dep||(r=1),n=a;return!r},Zv=function(e,n,r,a){a.mSet(e,n,a.m.call(a.tween,r,a.mt),a)},Xp=function(e){for(var n=e._pt,r,a,i,o;n;){for(r=n._next,a=i;a&&a.pr>n.pr;)a=a._next;(n._prev=a?a._prev:o)?n._prev._next=n:i=n,(n._next=a)?a._prev=n:o=n,n=r}e._pt=i},_t=(function(){function t(n,r,a,i,o,l,u,c,d){this.t=r,this.s=i,this.c=o,this.p=a,this.r=l||Vp,this.d=u||this,this.set=c||Cl,this.pr=d||0,this._next=n,n&&(n._prev=this)}var e=t.prototype;return e.modifier=function(r,a,i){this.mSet=this.mSet||this.set,this.set=Zv,this.m=r,this.mt=i,this.tween=a},t})();bt(dl+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return ll[t]=1}),wt.TweenMax=wt.TweenLite=Ke,wt.TimelineLite=wt.TimelineMax=lt,Oe=new lt({sortChildren:!1,defaults:cr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),vt.stringFilter=Ep;var Un=[],Gi={},Jv=[],Kp=0,Qv=0,jl=function(e){return(Gi[e]||Jv).map(function(n){return n()})},Dl=function(){var e=Date.now(),n=[];e-Kp>2&&(jl("matchMediaInit"),Un.forEach(function(r){var a=r.queries,i=r.conditions,o,l,u,c;for(l in a)o=Zt.matchMedia(a[l]).matches,o&&(u=1),o!==i[l]&&(i[l]=o,c=1);c&&(r.revert(),u&&n.push(r))}),jl("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(a){return r.add(null,a)})}),Kp=e,jl("matchMedia"))},Zp=(function(){function t(n,r){this.selector=r&&bl(r),this.data=[],this._r=[],this.isReverted=!1,this.id=Qv++,n&&this.add(n)}var e=t.prototype;return e.add=function(r,a,i){Ue(r)&&(i=a,a=r,r=Ue);var o=this,l=function(){var c=He,d=o.selector,h;return c&&c!==o&&c.data.push(o),i&&(o.selector=bl(i)),He=o,h=a.apply(o,arguments),Ue(h)&&o._r.push(h),He=c,o.selector=d,o.isReverted=!1,h};return o.last=l,r===Ue?l(o,function(u){return o.add(null,u)}):r?o[r]=l:l},e.ignore=function(r){var a=He;He=null,r(this),He=a},e.getTweens=function(){var r=[];return this.data.forEach(function(a){return a instanceof t?r.push.apply(r,a.getTweens()):a instanceof Ke&&!(a.parent&&a.parent.data==="nested")&&r.push(a)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,a){var i=this;if(r?(function(){for(var l=i.getTweens(),u=i.data.length,c;u--;)c=i.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,h){return h.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),u=i.data.length;u--;)c=i.data[u],c instanceof lt?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Ke)&&c.revert&&c.revert(r);i._r.forEach(function(d){return d(r,i)}),i.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),a)for(var o=Un.length;o--;)Un[o].id===this.id&&Un.splice(o,1)},e.revert=function(r){this.kill(r||{})},t})(),e1=(function(){function t(n){this.contexts=[],this.scope=n,He&&He.data.push(this)}var e=t.prototype;return e.add=function(r,a,i){Kt(r)||(r={matches:r});var o=new Zp(0,i||this.scope),l=o.conditions={},u,c,d;He&&!o.selector&&(o.selector=He.selector),this.contexts.push(o),a=o.add("onMatch",a),o.queries=r;for(c in r)c==="all"?d=1:(u=Zt.matchMedia(r[c]),u&&(Un.indexOf(o)<0&&Un.push(o),(l[c]=u.matches)&&(d=1),u.addListener?u.addListener(Dl):u.addEventListener("change",Dl)));return d&&a(o,function(h){return o.add(null,h)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(a){return a.kill(r,!0)})},t})(),Yi={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(a){return Lp(a)})},timeline:function(e){return new lt(e)},getTweensOf:function(e,n){return Oe.getTweensOf(e,n)},getProperty:function(e,n,r,a){it(e)&&(e=$t(e)[0]);var i=Rn(e||{}).get,o=r?bp:gp;return r==="native"&&(r=""),e&&(n?o((St[n]&&St[n].get||i)(e,n,r,a)):function(l,u,c){return o((St[l]&&St[l].get||i)(e,l,u,c))})},quickSetter:function(e,n,r){if(e=$t(e),e.length>1){var a=e.map(function(d){return yt.quickSetter(d,n,r)}),i=a.length;return function(d){for(var h=i;h--;)a[h](d)}}e=e[0]||{};var o=St[n],l=Rn(e),u=l.harness&&(l.harness.aliases||{})[n]||n,c=o?function(d){var h=new o;pr._pt=0,h.init(e,r?d+r:d,pr,0,[e]),h.render(1,h),pr._pt&&Nl(1,pr)}:l.set(e,u);return o?c:function(d){return c(e,u,r?d+r:d,l,1)}},quickTo:function(e,n,r){var a,i=yt.to(e,kt((a={},a[n]="+=0.1",a.paused=!0,a.stagger=0,a),r||{})),o=function(u,c,d){return i.resetTo(n,u,c,d)};return o.tween=i,o},isTweening:function(e){return Oe.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=On(e.ease,cr.ease)),_p(cr,e||{})},config:function(e){return _p(vt,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,a=e.plugins,i=e.defaults,o=e.extendTimeline;(a||"").split(",").forEach(function(l){return l&&!St[l]&&!wt[l]&&ma(n+" effect requires "+l+" plugin.")}),ul[n]=function(l,u,c){return r($t(l),kt(u||{},i),c)},o&&(lt.prototype[n]=function(l,u,c){return this.add(ul[n](l,Kt(u)?u:(c=u)&&{},this),c)})},registerEase:function(e,n){Ie[e]=On(n)},parseEase:function(e,n){return arguments.length?On(e,n):Ie},getById:function(e){return Oe.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var r=new lt(e),a,i;for(r.smoothChildTiming=gt(e.smoothChildTiming),Oe.remove(r),r._dp=0,r._time=r._tTime=Oe._time,a=Oe._first;a;)i=a._next,(n||!(!a._dur&&a instanceof Ke&&a.vars.onComplete===a._targets[0]))&&Jt(r,a,a._start-a._delay),a=i;return Jt(Oe,r,0),r},context:function(e,n){return e?new Zp(e,n):He},matchMedia:function(e){return new e1(e)},matchMediaRefresh:function(){return Un.forEach(function(e){var n=e.conditions,r,a;for(a in n)n[a]&&(n[a]=!1,r=1);r&&e.revert()})||Dl()},addEventListener:function(e,n){var r=Gi[e]||(Gi[e]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(e,n){var r=Gi[e],a=r&&r.indexOf(n);a>=0&&r.splice(a,1)},utils:{wrap:Iv,wrapYoyo:Pv,distribute:Np,random:Dp,snap:jp,normalize:$v,getUnit:dt,clamp:Nv,splitColor:Fp,toArray:$t,selector:bl,mapRange:$p,pipe:Dv,unitize:Mv,interpolate:Lv,shuffle:Tp},install:up,effects:ul,ticker:Tt,updateRoot:lt.updateRoot,plugins:St,globalTimeline:Oe,core:{PropTween:_t,globals:dp,Tween:Ke,Timeline:lt,Animation:Sa,getCache:Rn,_removeLinkedListItem:zi,reverting:function(){return ot},context:function(e){return e&&He&&(He.data.push(e),e._ctx=He),He},suppressOverwrites:function(e){return Qo=e}}};bt("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Yi[t]=Ke[t]}),Tt.add(lt.updateRoot),pr=Yi.to({},{duration:0});var t1=function(e,n){for(var r=e._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},n1=function(e,n){var r=e._targets,a,i,o;for(a in n)for(i=r.length;i--;)o=e._ptLookup[i][a],o&&(o=o.d)&&(o._pt&&(o=t1(o,a)),o&&o.modifier&&o.modifier(n[a],e,r[i],a))},Ml=function(e,n){return{name:e,headless:1,rawVars:1,init:function(a,i,o){o._onInit=function(l){var u,c;if(it(i)&&(u={},bt(i,function(d){return u[d]=1}),i=u),n){u={};for(c in i)u[c]=n(i[c]);i=u}n1(l,i)}}}},yt=Yi.registerPlugin({name:"attr",init:function(e,n,r,a,i){var o,l,u;this.tween=r;for(o in n)u=e.getAttribute(o)||"",l=this.add(e,"setAttribute",(u||0)+"",n[o],a,i,0,0,o),l.op=o,l.b=u,this._props.push(o)},render:function(e,n){for(var r=n._pt;r;)ot?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,n){for(var r=n.length;r--;)this.add(e,r,e[r]||0,n[r],0,0,0,0,0,1)}},Ml("roundProps",_l),Ml("modifiers"),Ml("snap",jp))||Yi;Ke.version=lt.version=yt.version="3.13.0",cp=1,nl()&&gr();var r1=Ie.Power0,a1=Ie.Power1,i1=Ie.Power2,s1=Ie.Power3,o1=Ie.Power4,l1=Ie.Linear,c1=Ie.Quad,u1=Ie.Cubic,d1=Ie.Quart,f1=Ie.Quint,h1=Ie.Strong,m1=Ie.Elastic,p1=Ie.Back,g1=Ie.SteppedEase,b1=Ie.Bounce,_1=Ie.Sine,y1=Ie.Expo,x1=Ie.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Jp,Tn,br,$l,Gn,Qp,Il,v1=function(){return typeof window<"u"},un={},Yn=180/Math.PI,_r=Math.PI/180,yr=Math.atan2,eg=1e8,Pl=/([A-Z])/g,w1=/(left|right|width|margin|padding|x)/i,S1=/[\s,\(]\S/,Qt={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ll=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},k1=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},C1=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},T1=function(e,n){var r=n.s+n.c*e;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},tg=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},ng=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},N1=function(e,n,r){return e.style[n]=r},j1=function(e,n,r){return e.style.setProperty(n,r)},D1=function(e,n,r){return e._gsap[n]=r},M1=function(e,n,r){return e._gsap.scaleX=e._gsap.scaleY=r},$1=function(e,n,r,a,i){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(i,o)},I1=function(e,n,r,a,i){var o=e._gsap;o[n]=r,o.renderTransform(i,o)},We="transform",xt=We+"Origin",P1=function t(e,n){var r=this,a=this.target,i=a.style,o=a._gsap;if(e in un&&i){if(this.tfm=this.tfm||{},e!=="transform")e=Qt[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return r.tfm[l]=dn(a,l)}):this.tfm[e]=o.x?o[e]:dn(a,e),e===xt&&(this.tfm.zOrigin=o.zOrigin);else return Qt.transform.split(",").forEach(function(l){return t.call(r,l,n)});if(this.props.indexOf(We)>=0)return;o.svg&&(this.svgo=a.getAttribute("data-svg-origin"),this.props.push(xt,n,"")),e=We}(i||n)&&this.props.push(e,n,i[e])},rg=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},L1=function(){var e=this.props,n=this.target,r=n.style,a=n._gsap,i,o;for(i=0;i<e.length;i+=3)e[i+1]?e[i+1]===2?n[e[i]](e[i+2]):n[e[i]]=e[i+2]:e[i+2]?r[e[i]]=e[i+2]:r.removeProperty(e[i].substr(0,2)==="--"?e[i]:e[i].replace(Pl,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)a[o]=this.tfm[o];a.svg&&(a.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),i=Il(),(!i||!i.isStart)&&!r[We]&&(rg(r),a.zOrigin&&r[xt]&&(r[xt]+=" "+a.zOrigin+"px",a.zOrigin=0,a.renderTransform()),a.uncache=1)}},ag=function(e,n){var r={target:e,props:[],revert:L1,save:P1};return e._gsap||yt.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(a){return r.save(a)}),r},ig,Fl=function(e,n){var r=Tn.createElementNS?Tn.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Tn.createElement(e);return r&&r.style?r:Tn.createElement(e)},It=function t(e,n,r){var a=getComputedStyle(e);return a[n]||a.getPropertyValue(n.replace(Pl,"-$1").toLowerCase())||a.getPropertyValue(n)||!r&&t(e,xr(n)||n,1)||""},sg="O,Moz,ms,Ms,Webkit".split(","),xr=function(e,n,r){var a=n||Gn,i=a.style,o=5;if(e in i&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(sg[o]+e in i););return o<0?null:(o===3?"ms":o>=0?sg[o]:"")+e},Bl=function(){v1()&&window.document&&(Jp=window,Tn=Jp.document,br=Tn.documentElement,Gn=Fl("div")||{style:{}},Fl("div"),We=xr(We),xt=We+"Origin",Gn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",ig=!!xr("perspective"),Il=yt.core.reverting,$l=1)},og=function(e){var n=e.ownerSVGElement,r=Fl("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),a=e.cloneNode(!0),i;a.style.display="block",r.appendChild(a),br.appendChild(r);try{i=a.getBBox()}catch{}return r.removeChild(a),br.removeChild(r),i},lg=function(e,n){for(var r=n.length;r--;)if(e.hasAttribute(n[r]))return e.getAttribute(n[r])},cg=function(e){var n,r;try{n=e.getBBox()}catch{n=og(e),r=1}return n&&(n.width||n.height)||r||(n=og(e)),n&&!n.width&&!n.x&&!n.y?{x:+lg(e,["x","cx","x1"])||0,y:+lg(e,["y","cy","y1"])||0,width:0,height:0}:n},ug=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&cg(e))},Vn=function(e,n){if(n){var r=e.style,a;n in un&&n!==xt&&(n=We),r.removeProperty?(a=n.substr(0,2),(a==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(a==="--"?n:n.replace(Pl,"-$1").toLowerCase())):r.removeAttribute(n)}},Nn=function(e,n,r,a,i,o){var l=new _t(e._pt,n,r,0,1,o?ng:tg);return e._pt=l,l.b=a,l.e=i,e._props.push(r),l},dg={deg:1,rad:1,turn:1},F1={grid:1,flex:1},jn=function t(e,n,r,a){var i=parseFloat(r)||0,o=(r+"").trim().substr((i+"").length)||"px",l=Gn.style,u=w1.test(n),c=e.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(u?"Width":"Height"),h=100,p=a==="px",g=a==="%",y,f,m,I;if(a===o||!i||dg[a]||dg[o])return i;if(o!=="px"&&!p&&(i=t(e,n,r,"px")),I=e.getCTM&&ug(e),(g||o==="%")&&(un[n]||~n.indexOf("adius")))return y=I?e.getBBox()[u?"width":"height"]:e[d],Xe(g?i/y*h:i/100*y);if(l[u?"width":"height"]=h+(p?o:a),f=a!=="rem"&&~n.indexOf("adius")||a==="em"&&e.appendChild&&!c?e:e.parentNode,I&&(f=(e.ownerSVGElement||{}).parentNode),(!f||f===Tn||!f.appendChild)&&(f=Tn.body),m=f._gsap,m&&g&&m.width&&u&&m.time===Tt.time&&!m.uncache)return Xe(i/m.width*h);if(g&&(n==="height"||n==="width")){var M=e.style[n];e.style[n]=h+a,y=e[d],M?e.style[n]=M:Vn(e,n)}else(g||o==="%")&&!F1[It(f,"display")]&&(l.position=It(e,"position")),f===e&&(l.position="static"),f.appendChild(Gn),y=Gn[d],f.removeChild(Gn),l.position="absolute";return u&&g&&(m=Rn(f),m.time=Tt.time,m.width=f[d]),Xe(p?y*i/h:y&&i?h/y*i:0)},dn=function(e,n,r,a){var i;return $l||Bl(),n in Qt&&n!=="transform"&&(n=Qt[n],~n.indexOf(",")&&(n=n.split(",")[0])),un[n]&&n!=="transform"?(i=Ta(e,a),i=n!=="transformOrigin"?i[n]:i.svg?i.origin:qi(It(e,xt))+" "+i.zOrigin+"px"):(i=e.style[n],(!i||i==="auto"||a||~(i+"").indexOf("calc("))&&(i=Vi[n]&&Vi[n](e,n,r)||It(e,n)||mp(e,n)||(n==="opacity"?1:0))),r&&!~(i+"").trim().indexOf(" ")?jn(e,n,i,r)+r:i},B1=function(e,n,r,a){if(!r||r==="none"){var i=xr(n,e,1),o=i&&It(e,i,1);o&&o!==r?(n=i,r=o):n==="borderColor"&&(r=It(e,"borderTopColor"))}var l=new _t(this._pt,e.style,n,0,1,qp),u=0,c=0,d,h,p,g,y,f,m,I,M,C,v,D;if(l.b=r,l.e=a,r+="",a+="",a.substring(0,6)==="var(--"&&(a=It(e,a.substring(4,a.indexOf(")")))),a==="auto"&&(f=e.style[n],e.style[n]=a,a=It(e,n)||a,f?e.style[n]=f:Vn(e,n)),d=[r,a],Ep(d),r=d[0],a=d[1],p=r.match(ur)||[],D=a.match(ur)||[],D.length){for(;h=ur.exec(a);)m=h[0],M=a.substring(u,h.index),y?y=(y+1)%5:(M.substr(-5)==="rgba("||M.substr(-5)==="hsla(")&&(y=1),m!==(f=p[c++]||"")&&(g=parseFloat(f)||0,v=f.substr((g+"").length),m.charAt(1)==="="&&(m=dr(g,m)+v),I=parseFloat(m),C=m.substr((I+"").length),u=ur.lastIndex-C.length,C||(C=C||vt.units[n]||v,u===a.length&&(a+=C,l.e+=C)),v!==C&&(g=jn(e,n,f,C)||0),l._pt={_next:l._pt,p:M||c===1?M:",",s:g,c:I-g,m:y&&y<4||n==="zIndex"?Math.round:0});l.c=u<a.length?a.substring(u,a.length):""}else l.r=n==="display"&&a==="none"?ng:tg;return op.test(a)&&(l.e=0),this._pt=l,l},fg={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},A1=function(e){var n=e.split(" "),r=n[0],a=n[1]||"50%";return(r==="top"||r==="bottom"||a==="left"||a==="right")&&(e=r,r=a,a=e),n[0]=fg[r]||r,n[1]=fg[a]||a,n.join(" ")},E1=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,a=r.style,i=n.u,o=r._gsap,l,u,c;if(i==="all"||i===!0)a.cssText="",u=1;else for(i=i.split(","),c=i.length;--c>-1;)l=i[c],un[l]&&(u=1,l=l==="transformOrigin"?xt:We),Vn(r,l);u&&(Vn(r,We),o&&(o.svg&&r.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",Ta(r,1),o.uncache=1,rg(a)))}},Vi={clearProps:function(e,n,r,a,i){if(i.data!=="isFromStart"){var o=e._pt=new _t(e._pt,n,r,0,0,E1);return o.u=a,o.pr=-10,o.tween=i,e._props.push(r),1}}},Ca=[1,0,0,1,0,0],hg={},mg=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},pg=function(e){var n=It(e,We);return mg(n)?Ca:n.substr(7).match(sp).map(Xe)},Al=function(e,n){var r=e._gsap||Rn(e),a=e.style,i=pg(e),o,l,u,c;return r.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,i=[u.a,u.b,u.c,u.d,u.e,u.f],i.join(",")==="1,0,0,1,0,0"?Ca:i):(i===Ca&&!e.offsetParent&&e!==br&&!r.svg&&(u=a.display,a.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,l=e.nextElementSibling,br.appendChild(e)),i=pg(e),u?a.display=u:Vn(e,"display"),c&&(l?o.insertBefore(e,l):o?o.appendChild(e):br.removeChild(e))),n&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},El=function(e,n,r,a,i,o){var l=e._gsap,u=i||Al(e,!0),c=l.xOrigin||0,d=l.yOrigin||0,h=l.xOffset||0,p=l.yOffset||0,g=u[0],y=u[1],f=u[2],m=u[3],I=u[4],M=u[5],C=n.split(" "),v=parseFloat(C[0])||0,D=parseFloat(C[1])||0,T,N,_,w;r?u!==Ca&&(N=g*m-y*f)&&(_=v*(m/N)+D*(-f/N)+(f*M-m*I)/N,w=v*(-y/N)+D*(g/N)-(g*M-y*I)/N,v=_,D=w):(T=cg(e),v=T.x+(~C[0].indexOf("%")?v/100*T.width:v),D=T.y+(~(C[1]||C[0]).indexOf("%")?D/100*T.height:D)),a||a!==!1&&l.smooth?(I=v-c,M=D-d,l.xOffset=h+(I*g+M*f)-I,l.yOffset=p+(I*y+M*m)-M):l.xOffset=l.yOffset=0,l.xOrigin=v,l.yOrigin=D,l.smooth=!!a,l.origin=n,l.originIsAbsolute=!!r,e.style[xt]="0px 0px",o&&(Nn(o,l,"xOrigin",c,v),Nn(o,l,"yOrigin",d,D),Nn(o,l,"xOffset",h,l.xOffset),Nn(o,l,"yOffset",p,l.yOffset)),e.setAttribute("data-svg-origin",v+" "+D)},Ta=function(e,n){var r=e._gsap||new Op(e);if("x"in r&&!n&&!r.uncache)return r;var a=e.style,i=r.scaleX<0,o="px",l="deg",u=getComputedStyle(e),c=It(e,xt)||"0",d,h,p,g,y,f,m,I,M,C,v,D,T,N,_,w,j,x,S,B,P,$,k,H,Q,O,z,W,R,E,L,X;return d=h=p=f=m=I=M=C=v=0,g=y=1,r.svg=!!(e.getCTM&&ug(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(a[We]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[We]!=="none"?u[We]:"")),a.scale=a.rotate=a.translate="none"),N=Al(e,r.svg),r.svg&&(r.uncache?(Q=e.getBBox(),c=r.xOrigin-Q.x+"px "+(r.yOrigin-Q.y)+"px",H=""):H=!n&&e.getAttribute("data-svg-origin"),El(e,H||c,!!H||r.originIsAbsolute,r.smooth!==!1,N)),D=r.xOrigin||0,T=r.yOrigin||0,N!==Ca&&(x=N[0],S=N[1],B=N[2],P=N[3],d=$=N[4],h=k=N[5],N.length===6?(g=Math.sqrt(x*x+S*S),y=Math.sqrt(P*P+B*B),f=x||S?yr(S,x)*Yn:0,M=B||P?yr(B,P)*Yn+f:0,M&&(y*=Math.abs(Math.cos(M*_r))),r.svg&&(d-=D-(D*x+T*B),h-=T-(D*S+T*P))):(X=N[6],E=N[7],z=N[8],W=N[9],R=N[10],L=N[11],d=N[12],h=N[13],p=N[14],_=yr(X,R),m=_*Yn,_&&(w=Math.cos(-_),j=Math.sin(-_),H=$*w+z*j,Q=k*w+W*j,O=X*w+R*j,z=$*-j+z*w,W=k*-j+W*w,R=X*-j+R*w,L=E*-j+L*w,$=H,k=Q,X=O),_=yr(-B,R),I=_*Yn,_&&(w=Math.cos(-_),j=Math.sin(-_),H=x*w-z*j,Q=S*w-W*j,O=B*w-R*j,L=P*j+L*w,x=H,S=Q,B=O),_=yr(S,x),f=_*Yn,_&&(w=Math.cos(_),j=Math.sin(_),H=x*w+S*j,Q=$*w+k*j,S=S*w-x*j,k=k*w-$*j,x=H,$=Q),m&&Math.abs(m)+Math.abs(f)>359.9&&(m=f=0,I=180-I),g=Xe(Math.sqrt(x*x+S*S+B*B)),y=Xe(Math.sqrt(k*k+X*X)),_=yr($,k),M=Math.abs(_)>2e-4?_*Yn:0,v=L?1/(L<0?-L:L):0),r.svg&&(H=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!mg(It(e,We)),H&&e.setAttribute("transform",H))),Math.abs(M)>90&&Math.abs(M)<270&&(i?(g*=-1,M+=f<=0?180:-180,f+=f<=0?180:-180):(y*=-1,M+=M<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=h-((r.yPercent=h&&(!n&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=p+o,r.scaleX=Xe(g),r.scaleY=Xe(y),r.rotation=Xe(f)+l,r.rotationX=Xe(m)+l,r.rotationY=Xe(I)+l,r.skewX=M+l,r.skewY=C+l,r.transformPerspective=v+o,(r.zOrigin=parseFloat(c.split(" ")[2])||!n&&r.zOrigin||0)&&(a[xt]=qi(c)),r.xOffset=r.yOffset=0,r.force3D=vt.force3D,r.renderTransform=r.svg?R1:ig?gg:H1,r.uncache=0,r},qi=function(e){return(e=e.split(" "))[0]+" "+e[1]},Hl=function(e,n,r){var a=dt(n);return Xe(parseFloat(n)+parseFloat(jn(e,"x",r+"px",a)))+a},H1=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,gg(e,n)},qn="0deg",Na="0px",Xn=") ",gg=function(e,n){var r=n||this,a=r.xPercent,i=r.yPercent,o=r.x,l=r.y,u=r.z,c=r.rotation,d=r.rotationY,h=r.rotationX,p=r.skewX,g=r.skewY,y=r.scaleX,f=r.scaleY,m=r.transformPerspective,I=r.force3D,M=r.target,C=r.zOrigin,v="",D=I==="auto"&&e&&e!==1||I===!0;if(C&&(h!==qn||d!==qn)){var T=parseFloat(d)*_r,N=Math.sin(T),_=Math.cos(T),w;T=parseFloat(h)*_r,w=Math.cos(T),o=Hl(M,o,N*w*-C),l=Hl(M,l,-Math.sin(T)*-C),u=Hl(M,u,_*w*-C+C)}m!==Na&&(v+="perspective("+m+Xn),(a||i)&&(v+="translate("+a+"%, "+i+"%) "),(D||o!==Na||l!==Na||u!==Na)&&(v+=u!==Na||D?"translate3d("+o+", "+l+", "+u+") ":"translate("+o+", "+l+Xn),c!==qn&&(v+="rotate("+c+Xn),d!==qn&&(v+="rotateY("+d+Xn),h!==qn&&(v+="rotateX("+h+Xn),(p!==qn||g!==qn)&&(v+="skew("+p+", "+g+Xn),(y!==1||f!==1)&&(v+="scale("+y+", "+f+Xn),M.style[We]=v||"translate(0, 0)"},R1=function(e,n){var r=n||this,a=r.xPercent,i=r.yPercent,o=r.x,l=r.y,u=r.rotation,c=r.skewX,d=r.skewY,h=r.scaleX,p=r.scaleY,g=r.target,y=r.xOrigin,f=r.yOrigin,m=r.xOffset,I=r.yOffset,M=r.forceCSS,C=parseFloat(o),v=parseFloat(l),D,T,N,_,w;u=parseFloat(u),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,u+=d),u||c?(u*=_r,c*=_r,D=Math.cos(u)*h,T=Math.sin(u)*h,N=Math.sin(u-c)*-p,_=Math.cos(u-c)*p,c&&(d*=_r,w=Math.tan(c-d),w=Math.sqrt(1+w*w),N*=w,_*=w,d&&(w=Math.tan(d),w=Math.sqrt(1+w*w),D*=w,T*=w)),D=Xe(D),T=Xe(T),N=Xe(N),_=Xe(_)):(D=h,_=p,T=N=0),(C&&!~(o+"").indexOf("px")||v&&!~(l+"").indexOf("px"))&&(C=jn(g,"x",o,"px"),v=jn(g,"y",l,"px")),(y||f||m||I)&&(C=Xe(C+y-(y*D+f*N)+m),v=Xe(v+f-(y*T+f*_)+I)),(a||i)&&(w=g.getBBox(),C=Xe(C+a/100*w.width),v=Xe(v+i/100*w.height)),w="matrix("+D+","+T+","+N+","+_+","+C+","+v+")",g.setAttribute("transform",w),M&&(g.style[We]=w)},z1=function(e,n,r,a,i){var o=360,l=it(i),u=parseFloat(i)*(l&&~i.indexOf("rad")?Yn:1),c=u-a,d=a+c+"deg",h,p;return l&&(h=i.split("_")[1],h==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),h==="cw"&&c<0?c=(c+o*eg)%o-~~(c/o)*o:h==="ccw"&&c>0&&(c=(c-o*eg)%o-~~(c/o)*o)),e._pt=p=new _t(e._pt,n,r,a,c,k1),p.e=d,p.u="deg",e._props.push(r),p},bg=function(e,n){for(var r in n)e[r]=n[r];return e},O1=function(e,n,r){var a=bg({},r._gsap),i="perspective,force3D,transformOrigin,svgOrigin",o=r.style,l,u,c,d,h,p,g,y;a.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),o[We]=n,l=Ta(r,1),Vn(r,We),r.setAttribute("transform",c)):(c=getComputedStyle(r)[We],o[We]=n,l=Ta(r,1),o[We]=c);for(u in un)c=a[u],d=l[u],c!==d&&i.indexOf(u)<0&&(g=dt(c),y=dt(d),h=g!==y?jn(r,u,c,y):parseFloat(c),p=parseFloat(d),e._pt=new _t(e._pt,l,u,h,p-h,Ll),e._pt.u=y||0,e._props.push(u));bg(l,a)};bt("padding,margin,Width,Radius",function(t,e){var n="Top",r="Right",a="Bottom",i="Left",o=(e<3?[n,r,a,i]:[n+i,n+r,a+r,a+i]).map(function(l){return e<2?t+l:"border"+l+t});Vi[e>1?"border"+t:t]=function(l,u,c,d,h){var p,g;if(arguments.length<4)return p=o.map(function(y){return dn(l,y,c)}),g=p.join(" "),g.split(p[0]).length===5?p[0]:g;p=(d+"").split(" "),g={},o.forEach(function(y,f){return g[y]=p[f]=p[f]||p[(f-1)/2|0]}),l.init(u,g,h)}});var Rl={name:"css",register:Bl,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,r,a,i){var o=this._props,l=e.style,u=r.vars.startAt,c,d,h,p,g,y,f,m,I,M,C,v,D,T,N,_;$l||Bl(),this.styles=this.styles||ag(e),_=this.styles.props,this.tween=r;for(f in n)if(f!=="autoRound"&&(d=n[f],!(St[f]&&Wp(f,n,r,a,e,i)))){if(g=typeof d,y=Vi[f],g==="function"&&(d=d.call(r,a,e,i),g=typeof d),g==="string"&&~d.indexOf("random(")&&(d=ya(d)),y)y(this,e,f,d,r)&&(N=1);else if(f.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(f)+"").trim(),d+="",kn.lastIndex=0,kn.test(c)||(m=dt(c),I=dt(d)),I?m!==I&&(c=jn(e,f,c,I)+I):m&&(d+=m),this.add(l,"setProperty",c,d,a,i,0,0,f),o.push(f),_.push(f,0,l[f]);else if(g!=="undefined"){if(u&&f in u?(c=typeof u[f]=="function"?u[f].call(r,a,e,i):u[f],it(c)&&~c.indexOf("random(")&&(c=ya(c)),dt(c+"")||c==="auto"||(c+=vt.units[f]||dt(dn(e,f))||""),(c+"").charAt(1)==="="&&(c=dn(e,f))):c=dn(e,f),p=parseFloat(c),M=g==="string"&&d.charAt(1)==="="&&d.substr(0,2),M&&(d=d.substr(2)),h=parseFloat(d),f in Qt&&(f==="autoAlpha"&&(p===1&&dn(e,"visibility")==="hidden"&&h&&(p=0),_.push("visibility",0,l.visibility),Nn(this,l,"visibility",p?"inherit":"hidden",h?"inherit":"hidden",!h)),f!=="scale"&&f!=="transform"&&(f=Qt[f],~f.indexOf(",")&&(f=f.split(",")[0]))),C=f in un,C){if(this.styles.save(f),g==="string"&&d.substring(0,6)==="var(--"&&(d=It(e,d.substring(4,d.indexOf(")"))),h=parseFloat(d)),v||(D=e._gsap,D.renderTransform&&!n.parseTransform||Ta(e,n.parseTransform),T=n.smoothOrigin!==!1&&D.smooth,v=this._pt=new _t(this._pt,l,We,0,1,D.renderTransform,D,0,-1),v.dep=1),f==="scale")this._pt=new _t(this._pt,D,"scaleY",D.scaleY,(M?dr(D.scaleY,M+h):h)-D.scaleY||0,Ll),this._pt.u=0,o.push("scaleY",f),f+="X";else if(f==="transformOrigin"){_.push(xt,0,l[xt]),d=A1(d),D.svg?El(e,d,0,T,0,this):(I=parseFloat(d.split(" ")[2])||0,I!==D.zOrigin&&Nn(this,D,"zOrigin",D.zOrigin,I),Nn(this,l,f,qi(c),qi(d)));continue}else if(f==="svgOrigin"){El(e,d,1,T,0,this);continue}else if(f in hg){z1(this,D,f,p,M?dr(p,M+d):d);continue}else if(f==="smoothOrigin"){Nn(this,D,"smooth",D.smooth,d);continue}else if(f==="force3D"){D[f]=d;continue}else if(f==="transform"){O1(this,d,e);continue}}else f in l||(f=xr(f)||f);if(C||(h||h===0)&&(p||p===0)&&!S1.test(d)&&f in l)m=(c+"").substr((p+"").length),h||(h=0),I=dt(d)||(f in vt.units?vt.units[f]:m),m!==I&&(p=jn(e,f,c,I)),this._pt=new _t(this._pt,C?D:l,f,p,(M?dr(p,M+h):h)-p,!C&&(I==="px"||f==="zIndex")&&n.autoRound!==!1?T1:Ll),this._pt.u=I||0,m!==I&&I!=="%"&&(this._pt.b=c,this._pt.r=C1);else if(f in l)B1.call(this,e,f,c,M?M+d:d);else if(f in e)this.add(e,f,c||e[f],M?M+d:d,a,i);else if(f!=="parseTransform"){ol(f,d);continue}C||(f in l?_.push(f,0,l[f]):typeof e[f]=="function"?_.push(f,2,e[f]()):_.push(f,1,c||e[f])),o.push(f)}}N&&Xp(this)},render:function(e,n){if(n.tween._time||!Il())for(var r=n._pt;r;)r.r(e,r.d),r=r._next;else n.styles.revert()},get:dn,aliases:Qt,getSetter:function(e,n,r){var a=Qt[n];return a&&a.indexOf(",")<0&&(n=a),n in un&&n!==xt&&(e._gsap.x||dn(e,"x"))?r&&Qp===r?n==="scale"?M1:D1:(Qp=r||{})&&(n==="scale"?$1:I1):e.style&&!tl(e.style[n])?N1:~n.indexOf("-")?j1:Tl(e,n)},core:{_removeProperty:Vn,_getMatrix:Al}};yt.utils.checkPrefix=xr,yt.core.getStyleSaver=ag,(function(t,e,n,r){var a=bt(t+","+e+","+n,function(i){un[i]=1});bt(e,function(i){vt.units[i]="deg",hg[i]=1}),Qt[a[13]]=t+","+e,bt(r,function(i){var o=i.split(":");Qt[o[1]]=a[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),bt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){vt.units[t]="px"}),yt.registerPlugin(Rl);var zl=yt.registerPlugin(Rl)||yt,W1=zl.core.Tween;const U1=Object.freeze(Object.defineProperty({__proto__:null,Back:p1,Bounce:b1,CSSPlugin:Rl,Circ:x1,Cubic:u1,Elastic:m1,Expo:y1,Linear:l1,Power0:r1,Power1:a1,Power2:i1,Power3:s1,Power4:o1,Quad:c1,Quart:d1,Quint:f1,Sine:_1,SteppedEase:g1,Strong:h1,TimelineLite:lt,TimelineMax:lt,TweenLite:Ke,TweenMax:W1,default:zl,gsap:zl},Symbol.toStringTag,{value:"Module"}));b.Account=tc,b.ActionLink=Mg,b.AdaptiveDataGrid=Ls,b.AnimationDurationFast=xd,b.AnimationDurationNormal=vd,b.AnimationDurationSlow=wd,b.AnimationEasingBounce=Td,b.AnimationEasingEaseIn=Sd,b.AnimationEasingEaseInOut=Cd,b.AnimationEasingEaseOut=kd,b.AppointmentCard=$s,b.AreaSeriesPrimitive=ux,b.AriaDataGrid=mu,b.AriaTabsDataGrid=ti,b.AriaTabsDataGridAdaptive=Ls,b.Axis=Ws,b.BackLink=$a,b.BandScalesProvider=fx,b.BarSeriesPrimitive=dx,b.BorderColorCard=co,b.BorderColorCardHover=uo,b.BorderColorDefault=oo,b.BorderColorError=fo,b.BorderColorForm=lo,b.BorderRadiusLarge=zd,b.BorderRadiusMedium=Rd,b.BorderRadiusNone=Ed,b.BorderRadiusSmall=Hd,b.BorderWidthCardBottom=Ld,b.BorderWidthDefault=$d,b.BorderWidthFormElement=Id,b.BorderWidthFormElementError=Pd,b.BorderWidthPanel=Fd,b.BorderWidthTableCell=Ad,b.BorderWidthTableHeader=Bd,b.Breadcrumb=su,b.BreakpointDesktop=wm,b.BreakpointLargeDesktop=Sm,b.BreakpointMobile=xm,b.BreakpointTablet=vm,b.Button=nt,b.ButtonBorderRadius=bh,b.ButtonBorderWidth=gh,b.ButtonPrimaryBackgroundActive=ah,b.ButtonPrimaryBackgroundDefault=nh,b.ButtonPrimaryBackgroundDisabled=ih,b.ButtonPrimaryBackgroundHover=rh,b.ButtonPrimaryBorderDefault=lh,b.ButtonPrimaryBorderFocus=ch,b.ButtonPrimaryTextDefault=sh,b.ButtonPrimaryTextDisabled=oh,b.ButtonSecondaryBackgroundActive=hh,b.ButtonSecondaryBackgroundDefault=uh,b.ButtonSecondaryBackgroundHover=fh,b.ButtonSecondaryBackgroundSolid=dh,b.ButtonSecondaryBorderDefault=ph,b.ButtonSecondaryTextDefault=mh,b.ButtonShadowSize=_h,b.ButtonSpacingPaddingHorizontalDesktop=Lo,b.ButtonSpacingPaddingHorizontalMobile=Io,b.ButtonSpacingPaddingVerticalDesktop=Po,b.ButtonSpacingPaddingVerticalMobile=$o,b.ButtonTypographyWeight=yh,b.Card=Ns,b.CardBackgroundDefault=xh,b.CardBorderBottom=Sh,b.CardBorderDefault=vh,b.CardBorderHover=wh,b.CardBorderWidthBottom=jh,b.CardBorderWidthDefault=Nh,b.CardGroup=N_,b.CardGroupItem=j_,b.CardShadowDefault=Dh,b.CardShadowHover=Mh,b.CardSpacingHeadingMargin=Ao,b.CardSpacingPaddingDesktop=Bo,b.CardSpacingPaddingMobile=Fo,b.CardTextDescription=Ch,b.CardTextHeading=kh,b.CardTextLink=Th,b.CareCard=D_,b.CharacterCount=Eg,b.ChartEnhancer=mx,b.ChartNoScript=hx,b.ChartRoot=Xu,b.Checkbox=nc,b.Checkboxes=rc,b.ColorBorderDefault=Jd,b.ColorBorderSecondary=Qd,b.ColorButtonLoginActive=Nf,b.ColorButtonLoginBackground=Cf,b.ColorButtonLoginHover=Tf,b.ColorButtonLoginShadow=jf,b.ColorButtonPrimaryActive=of,b.ColorButtonPrimaryBackground=rf,b.ColorButtonPrimaryHover=sf,b.ColorButtonPrimaryShadow=lf,b.ColorButtonPrimaryText=af,b.ColorButtonReverseActive=yf,b.ColorButtonReverseBackground=gf,b.ColorButtonReverseHover=_f,b.ColorButtonReverseShadow=xf,b.ColorButtonReverseText=bf,b.ColorButtonSecondaryActive=mf,b.ColorButtonSecondaryBackground=cf,b.ColorButtonSecondaryBackgroundSolid=uf,b.ColorButtonSecondaryBorder=df,b.ColorButtonSecondaryHover=hf,b.ColorButtonSecondaryShadow=pf,b.ColorButtonSecondaryText=ff,b.ColorButtonWarningActive=Sf,b.ColorButtonWarningBackground=vf,b.ColorButtonWarningHover=wf,b.ColorButtonWarningShadow=kf,b.ColorError=ef,b.ColorFocusBackground=Kd,b.ColorFocusText=Zd,b.ColorFormBackground=nf,b.ColorFormBorder=tf,b.ColorGrey1=To,b.ColorGrey2=No,b.ColorGrey3=jo,b.ColorGrey4=Do,b.ColorGrey5=Mo,b.ColorLinkActive=qd,b.ColorLinkDefault=Yd,b.ColorLinkHover=Vd,b.ColorLinkVisited=Xd,b.ColorPrimaryBlack=po,b.ColorPrimaryBlue=ho,b.ColorPrimaryDarkPink=_o,b.ColorPrimaryGreen=go,b.ColorPrimaryPurple=bo,b.ColorPrimaryRed=yo,b.ColorPrimaryWhite=mo,b.ColorPrimaryYellow=xo,b.ColorSecondaryAquaGreen=ko,b.ColorSecondaryOrange=So,b.ColorSecondaryPaleYellow=vo,b.ColorSecondaryPink=Co,b.ColorSecondaryWarmYellow=wo,b.ColorTextPrimary=Od,b.ColorTextPrint=Gd,b.ColorTextReverse=Ud,b.ColorTextSecondary=Wd,b.Column=Zn,b.ComponentBlur=Zf,b.ComponentBreadcrumbChevronMarginLeft=Wf,b.ComponentBreadcrumbChevronMarginRight=Uf,b.ComponentBreadcrumbPaddingTopDesktop=Yf,b.ComponentBreadcrumbPaddingTopMobile=Gf,b.ComponentButtonPaddingDesktopHorizontal=If,b.ComponentButtonPaddingDesktopVertical=$f,b.ComponentButtonPaddingMobileHorizontal=Mf,b.ComponentButtonPaddingMobileVertical=Df,b.ComponentButtonShadowSize=Pf,b.ComponentCardHeadingMargin=Rf,b.ComponentCardPaddingDesktop=Hf,b.ComponentCardPaddingMobile=Ef,b.ComponentDetails=Qf,b.ComponentExpander=eh,b.ComponentFormCheckboxLabelPadding=Af,b.ComponentFormCheckboxSize=Bf,b.ComponentFormInputMinHeight=Lf,b.ComponentFormInputPadding=Ff,b.ComponentLink=Jf,b.ComponentPagination=th,b.ComponentPanelPaddingDesktop=Of,b.ComponentPanelPaddingMobile=zf,b.ComponentSpread=Kf,b.ComponentSummaryListCellPaddingHorizontal=qf,b.ComponentSummaryListCellPaddingVertical=Vf,b.ComponentSummaryListRowMargin=Xf,b.Container=es,b.ContentsList=T_,b.DEFAULT_FONT_CONFIG=Jo,b.DashboardSummaryGrid=R_,b.DateInput=Jg,b.Details=lu,b.DoDontList=cu,b.ElevationHigh=np,b.ElevationLow=ep,b.ElevationMedium=tp,b.ElevationNone=Qm,b.ErrorMessage=ns,b.ErrorSummary=Zg,b.Expander=uu,b.FRUTIGER_FONT_FILES=ht,b.Fieldset=La,b.FocusOutlineOffset=Xm,b.FocusOutlineStyle=Km,b.FocusOutlineWidth=qm,b.FocusShadowButton=Jm,b.FocusShadowInput=Zm,b.FontFamilyBase=zr,b.FontFamilyFallback=Or,b.FontFamilyPrint=Wr,b.FontLineHeightBase=Li,b.FontSize14Mobile=Vr,b.FontSize14Print=Xr,b.FontSize14Tablet=qr,b.FontSize16Mobile=Kr,b.FontSize16Print=Jr,b.FontSize16Tablet=Zr,b.FontSize19Mobile=Qr,b.FontSize19Print=ta,b.FontSize19Tablet=ea,b.FontSize22Mobile=na,b.FontSize22Print=aa,b.FontSize22Tablet=ra,b.FontSize26Mobile=ia,b.FontSize26Print=oa,b.FontSize26Tablet=sa,b.FontSize36Mobile=la,b.FontSize36Print=ua,b.FontSize36Tablet=ca,b.FontSize48Mobile=da,b.FontSize48Print=ha,b.FontSize48Tablet=fa,b.FontSizeBase=Pi,b.FontWeightBold=Gr,b.FontWeightLight=Yr,b.FontWeightNormal=Ur,b.Footer=rs,b.FormBorderRadius=Kh,b.FormBorderWidthDefault=qh,b.FormBorderWidthError=Xh,b.FormErrorTextDefault=Gh,b.FormErrorTypographyWeight=Yh,b.FormHintTextDefault=Vh,b.FormInputBackgroundDefault=$h,b.FormInputBackgroundDisabled=Ph,b.FormInputBackgroundError=Lh,b.FormInputBackgroundFocus=Ih,b.FormInputBorderDefault=Fh,b.FormInputBorderDisabled=Eh,b.FormInputBorderError=Ah,b.FormInputBorderFocus=Bh,b.FormInputTextDefault=Hh,b.FormInputTextDisabled=zh,b.FormInputTextPlaceholder=Rh,b.FormLabelTextDefault=Oh,b.FormLabelTextRequired=Wh,b.FormLabelTypographyWeight=Uh,b.FormSpacingCheckboxLabelPadding=zo,b.FormSpacingCheckboxSize=Ro,b.FormSpacingInputMinHeight=Ho,b.FormSpacingInputPadding=Eo,b.GanttChart=k_,b.Grid=Fa,b.GridGutter=Cm,b.GridGutterHalf=Tm,b.GridLines=Zu,b.GridPageWidth=km,b.Header=Ba,b.HeaderSSR=a0,b.HeaderSearch=uc,b.HeaderStatic=Ba,b.Heading=Ft,b.HeadingsNhsukHeadingL=zt,b.HeadingsNhsukHeadingM=Ot,b.HeadingsNhsukHeadingS=Wt,b.HeadingsNhsukHeadingXl=Rt,b.HeadingsNhsukHeadingXs=Ut,b.Hero=fc,b.Hint=Qi,b.Images=F_,b.Input=Ia,b.InsetText=M_,b.Label=Pa,b.LayoutColumnActions=ym,b.LayoutColumnFull=pm,b.LayoutColumnHalf=gm,b.LayoutColumnQuarter=_m,b.LayoutColumnThird=bm,b.LayoutContainerMaxWidth=mm,b.Legend=cx,b.LineScalesProvider=Ku,b.LineSeriesPrimitive=od,b.List=oc,b.MainWrapper=ts,b.MedicationCard=Is,b.MetricCard=px,b.NHSBodyText=Gx,b.NHSBodyTextLarge=Yx,b.NHSBodyTextSmall=Vx,b.NHSHeading1=Rx,b.NHSHeading2=zx,b.NHSHeading3=Ox,b.NHSHeading4=Wx,b.NHSHeading5=Ux,b.NHSLedeText=qx,b.NHSLedeTextSmall=Xx,b.NHSThemeProvider=r0,b.NHS_FALLBACK_FONT_STACK=cv,b.NHS_FONT_STACK=lv,b.NavigationSplitView=Iu,b.PageTemplate=gy,b.Pagination=C_,b.Panel=ou,b.ParagraphsBody=Gt,b.ParagraphsBodyLarge=Yt,b.ParagraphsBodySmall=Vt,b.ParagraphsLedeText=qt,b.ParagraphsLedeTextSmall=Xt,b.PatientCard=Ms,b.ProductRoadmap=Lu,b.Radios=Hg,b.RadiosServer=Rg,b.ResponsiveDataGrid=Ls,b.ResponsiveDataGridDemo=py,b.Row=pn,b.SPC=Ax,b.SPCChart=yd,b.Select=Cr,b.SelectOption=ic,b.ShadowButtonDefault=Om,b.ShadowButtonFocus=Gm,b.ShadowButtonSecondary=Wm,b.ShadowButtonWarning=Um,b.ShadowCardDefault=Ym,b.ShadowCardHover=Vm,b.SizeButtonMinHeightDesktop=hm,b.SizeButtonMinHeightMobile=fm,b.SizeFormControlLarge=am,b.SizeFormControlMedium=rm,b.SizeFormControlSmall=nm,b.SizeFormInputWidth2xl=um,b.SizeFormInputWidth3xl=dm,b.SizeFormInputWidthLg=lm,b.SizeFormInputWidthMd=om,b.SizeFormInputWidthSm=sm,b.SizeFormInputWidthXl=cm,b.SizeFormInputWidthXs=im,b.SizeIconExtraLarge=em,b.SizeIconLarge=Qh,b.SizeIconMedium=Jh,b.SizeIconNhsDefault=tm,b.SizeIconSmall=Zh,b.SkipLink=Ts,b.SlotMatrix=H_,b.SortStatusControl=Y_,b.Spacing0=Oo,b.Spacing1=Wo,b.Spacing2=Uo,b.Spacing3=Go,b.Spacing4=Yo,b.Spacing5=Vo,b.Spacing6=qo,b.Spacing7=Xo,b.Spacing8=Ko,b.Spacing9=Zo,b.SpacingResponsive0Mobile=hi,b.SpacingResponsive0Tablet=mi,b.SpacingResponsive1Mobile=pi,b.SpacingResponsive1Tablet=gi,b.SpacingResponsive2Mobile=bi,b.SpacingResponsive2Tablet=_i,b.SpacingResponsive3Mobile=yi,b.SpacingResponsive3Tablet=xi,b.SpacingResponsive4Mobile=vi,b.SpacingResponsive4Tablet=wi,b.SpacingResponsive5Mobile=Si,b.SpacingResponsive5Tablet=ki,b.SpacingResponsive6Mobile=Ci,b.SpacingResponsive6Tablet=Ti,b.SpacingResponsive7Mobile=Ni,b.SpacingResponsive7Tablet=ji,b.SpacingResponsive8Mobile=Di,b.SpacingResponsive8Tablet=Mi,b.SpacingResponsive9Mobile=$i,b.SpacingResponsive9Tablet=Ii,b.SpacingUtilities=Wg,b.StateDisabledBackground=Hm,b.StateDisabledBorder=Rm,b.StateDisabledText=zm,b.StateErrorBackground=Nm,b.StateErrorBorder=jm,b.StateErrorText=Dm,b.StateInfoBackground=Bm,b.StateInfoBorder=Am,b.StateInfoText=Em,b.StateSuccessBackground=Mm,b.StateSuccessBorder=$m,b.StateSuccessText=Im,b.StateWarningBackground=Pm,b.StateWarningBorder=Lm,b.StateWarningText=Fm,b.SummaryCard=hu,b.SummaryList=$_,b.Table=ei,b.Tabs=I_,b.Tag=Ye,b.TaskList=du,b.Textarea=ac,b.TooltipOverlay=lx,b.TooltipProvider=sd,b.TransactionalPageTemplate=by,b.TransitionButtonDefault=Nd,b.TransitionButtonShadow=jd,b.TransitionCardHover=Md,b.TransitionInputFocus=Dd,b.VisibilityProvider=ix,b.VitalsCard=Ps,b.WIDTH_FRACTIONS=Vg,b.WarningCallout=L_,b.WidthContainer=Fs,b.WidthUtilities=Gg,b.checkFrutigerLoaded=uv,b.createGenericTabsConfig=ri,b.createTCHTabsConfig=J_,b.generateFrutigerFontFace=sv,b.getResponsiveStyles=Hx,b.getSpacingClass=Ug,b.getWidthClass=Yg,b.preloadFrutigerFonts=ov,b.tchDataConfig=gu,b.useColors=Zx,b.useComponentSpacing=tv,b.useNHSHeadings=nv,b.useNHSParagraphs=rv,b.useNHSTheme=e0,b.useNHSTypographySystem=av,b.useNavigationSplitDrill=iv,b.useNavigationSplitUrlSync=$u,b.useNhsFdpBreakpoints=Bs,b.useResponsiveSpacing=ev,b.useResponsiveValue=_y,b.useSpacing=Jx,b.useTokens=Kx,b.useTypography=Qx,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.js.map
