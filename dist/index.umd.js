(function(_,E){typeof exports=="object"&&typeof module<"u"?E(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],E):(_=typeof globalThis<"u"?globalThis:_||self,E(_.NHSFDPDesignSystem={},_.React,_.ReactDOM))})(this,(function(_,E,Z0){"use strict";function K0(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const Z=K0(E);function J0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ga={exports:{}},ai={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vc;function Q0(){if(Vc)return ai;Vc=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:s,ref:i!==void 0?i:null,props:a}}return ai.Fragment=t,ai.jsx=n,ai.jsxs=n,ai}var si={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gc;function eb(){return Gc||(Gc=1,process.env.NODE_ENV!=="production"&&(function(){function e(O){if(O==null)return null;if(typeof O=="function")return O.$$typeof===I?null:O.displayName||O.name||null;if(typeof O=="string")return O;switch(O){case h:return"Fragment";case b:return"Profiler";case p:return"StrictMode";case v:return"Suspense";case T:return"SuspenseList";case x:return"Activity"}if(typeof O=="object")switch(typeof O.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),O.$$typeof){case y:return"Portal";case D:return(O.displayName||"Context")+".Provider";case w:return(O._context.displayName||"Context")+".Consumer";case S:var H=O.render;return O=O.displayName,O||(O=H.displayName||H.name||"",O=O!==""?"ForwardRef("+O+")":"ForwardRef"),O;case k:return H=O.displayName||null,H!==null?H:e(O.type)||"Memo";case C:H=O._payload,O=O._init;try{return e(O(H))}catch{}}return null}function t(O){return""+O}function n(O){try{t(O);var H=!1}catch{H=!0}if(H){H=console;var z=H.error,re=typeof Symbol=="function"&&Symbol.toStringTag&&O[Symbol.toStringTag]||O.constructor.name||"Object";return z.call(H,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",re),t(O)}}function r(O){if(O===h)return"<>";if(typeof O=="object"&&O!==null&&O.$$typeof===C)return"<...>";try{var H=e(O);return H?"<"+H+">":"<...>"}catch{return"<...>"}}function i(){var O=M.A;return O===null?null:O.getOwner()}function a(){return Error("react-stack-top-frame")}function s(O){if(j.call(O,"key")){var H=Object.getOwnPropertyDescriptor(O,"key").get;if(H&&H.isReactWarning)return!1}return O.key!==void 0}function l(O,H){function z(){F||(F=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",H))}z.isReactWarning=!0,Object.defineProperty(O,"key",{get:z,configurable:!0})}function c(){var O=e(this.type);return P[O]||(P[O]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),O=this.props.ref,O!==void 0?O:null}function u(O,H,z,re,U,de,ye,ue){return z=de.ref,O={$$typeof:g,type:O,key:H,props:de,_owner:U},(z!==void 0?z:null)!==null?Object.defineProperty(O,"ref",{enumerable:!1,get:c}):Object.defineProperty(O,"ref",{enumerable:!1,value:null}),O._store={},Object.defineProperty(O._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(O,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(O,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ye}),Object.defineProperty(O,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:ue}),Object.freeze&&(Object.freeze(O.props),Object.freeze(O)),O}function d(O,H,z,re,U,de,ye,ue){var ce=H.children;if(ce!==void 0)if(re)if(L(ce)){for(re=0;re<ce.length;re++)f(ce[re]);Object.freeze&&Object.freeze(ce)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(ce);if(j.call(H,"key")){ce=e(O);var Q=Object.keys(H).filter(function(fe){return fe!=="key"});re=0<Q.length?"{key: someKey, "+Q.join(": ..., ")+": ...}":"{key: someKey}",X[ce+re]||(Q=0<Q.length?"{"+Q.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,re,ce,Q,ce),X[ce+re]=!0)}if(ce=null,z!==void 0&&(n(z),ce=""+z),s(H)&&(n(H.key),ce=""+H.key),"key"in H){z={};for(var ie in H)ie!=="key"&&(z[ie]=H[ie])}else z=H;return ce&&l(z,typeof O=="function"?O.displayName||O.name||"Unknown":O),u(O,ce,de,U,i(),z,ye,ue)}function f(O){typeof O=="object"&&O!==null&&O.$$typeof===g&&O._store&&(O._store.validated=1)}var m=E,g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),D=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),I=Symbol.for("react.client.reference"),M=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=Object.prototype.hasOwnProperty,L=Array.isArray,N=console.createTask?console.createTask:function(){return null};m={react_stack_bottom_frame:function(O){return O()}};var F,P={},$=m.react_stack_bottom_frame.bind(m,a)(),ne=N(r(a)),X={};si.Fragment=h,si.jsx=function(O,H,z,re,U){var de=1e4>M.recentlyCreatedOwnerStacks++;return d(O,H,z,!1,re,U,de?Error("react-stack-top-frame"):$,de?N(r(O)):ne)},si.jsxs=function(O,H,z,re,U){var de=1e4>M.recentlyCreatedOwnerStacks++;return d(O,H,z,!0,re,U,de?Error("react-stack-top-frame"):$,de?N(r(O)):ne)}})()),si}var Yc;function tb(){return Yc||(Yc=1,process.env.NODE_ENV==="production"?ga.exports=Q0():ga.exports=eb()),ga.exports}var o=tb(),zs={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var qc;function nb(){return qc||(qc=1,(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var a="",s=0;s<arguments.length;s++){var l=arguments[s];l&&(a=i(a,r(l)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var s="";for(var l in a)t.call(a,l)&&a[l]&&(s=i(s,l));return s}function i(a,s){return s?a?a+" "+s:a+s:a}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(zs)),zs.exports}var rb=nb();const we=J0(rb),ib=({text:e,href:t,openInNewWindow:n=!1,className:r,...i})=>{const a=we("nhsuk-action-link__link",r);return o.jsx("div",{className:"nhsuk-action-link",children:o.jsxs("a",{className:a,href:t,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,...i,children:[o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right-circle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"36",height:"36",children:[o.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),o.jsx("path",{d:"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"})]}),o.jsx("span",{className:"nhsuk-action-link__text",children:e})]})})},Us=({ariaLabel:e="Account",items:t=[],className:n,variant:r="default"})=>{if(!t||t.length===0)return null;const i=a=>{const s=a.icon?o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__user",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",role:"img","aria-label":a.icon===!0?"User":void 0,children:o.jsx("path",{d:"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z"})}):null,l=a.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:a.html}}):a.text,c=o.jsxs(o.Fragment,{children:[s,l]});return a.href?o.jsx("a",{className:"nhsuk-account__link nhsuk-header__account-link",href:a.href,children:c}):a.action?o.jsx("form",{className:"nhsuk-account__form",action:a.action,method:a.method||"post",children:o.jsx("button",{className:"nhsuk-account__button",type:"submit",role:"button",children:c})}):o.jsx("span",{children:c})};return o.jsx("nav",{className:we("nhsuk-account",{"nhsuk-account--white":r==="white"},n),"aria-label":e,children:o.jsx("ul",{className:"nhsuk-account__list",children:t.map((a,s)=>a&&o.jsx("li",{className:we("nhsuk-account__item nhsuk-header__account-item",a.className),children:i(a)},s))})})};var Ws=(e=>(e.Primary="primary",e.Secondary="secondary",e.Reverse="reverse",e.Warning="warning",e.Login="login",e.Metric="metric",e))(Ws||{}),Vs=(e=>(e.Small="small",e.Default="default",e.Large="large",e))(Vs||{});function ab(e){const t=e.variant||"primary",n=e.size||"default",r=!!e.fullWidth,i=["nhs-aria-button",`nhs-aria-button--${t}`,n!=="default"?`nhs-aria-button--${n}`:"",r?"nhs-aria-button--full-width":"",e.className||""].filter(Boolean).join(" ");return{tag:e.href?"a":"button",classes:i,data:{module:"nhs-button"},attrs:e.href?{href:e.href,role:"button"}:{type:"button"},preventDoubleClick:!!e.preventDoubleClick}}const{forwardRef:sb,useCallback:Wn,useState:Gs}=Z;function ob(e,t){const{children:n,variant:r=Ws.Primary,size:i=Vs.Default,fullWidth:a=!1,className:s="",preventDoubleClick:l=!1,...c}=e,[u,d]=Gs(!1),[f,m]=Gs(!1),[g,y]=Gs(!1),h=ab({variant:r,size:i,fullWidth:a,className:s,preventDoubleClick:l,href:"href"in c?c.href:void 0}),p="disabled"in c?c.disabled:c["aria-disabled"]==="true",b={...u&&{"data-pressed":"true"},...f&&{"data-hovered":"true"},...g&&{"data-focused":"true"},...p&&{"data-disabled":"true"}},w=Wn(()=>!p&&d(!0),[p]),D=Wn(()=>d(!1),[]),S=Wn(()=>!p&&m(!0),[p]),v=Wn(()=>{m(!1),d(!1)},[]),T=Wn(()=>y(!0),[]),k=Wn(()=>y(!1),[]),C=Wn(ce=>{ce.key===" "&&("href"in c||ce.currentTarget.getAttribute("role")==="button")&&(ce.preventDefault(),ce.currentTarget.click())},[c]),x=Wn(ce=>{if(l){const Q=ce.currentTarget;if(Q.getAttribute("data-processing")==="true"){ce.preventDefault();return}Q.setAttribute("data-processing","true"),setTimeout(()=>{Q.removeAttribute("data-processing")},1e3)}},[l]);if("href"in c&&c.href){const{id:ce,style:Q,title:ie,["aria-label"]:fe,["aria-describedby"]:Y,["aria-labelledby"]:he,tabIndex:oe,...ge}=c,R=c;return o.jsx("a",{ref:t,href:R.href,target:R.target,rel:R.rel,className:h.classes,role:"button",draggable:"false","data-module":"nhs-button",...b,...l&&{"data-prevent-double-click":"true"},...ge,onKeyDown:V=>{R.onKeyDown?.(V),C(V)},onClick:V=>{R.onClick?.(V),x(V)},onMouseDown:V=>{R.onMouseDown?.(V),w()},onMouseUp:V=>{R.onMouseUp?.(V),D()},onMouseEnter:V=>{R.onMouseEnter?.(V),S()},onMouseLeave:V=>{R.onMouseLeave?.(V),v()},onFocus:V=>{R.onFocus?.(V),T()},onBlur:V=>{R.onBlur?.(V),k()},"aria-disabled":R["aria-disabled"],...R["aria-disabled"]==="true"&&{tabIndex:-1},id:ce,style:Q,title:ie,"aria-label":fe,"aria-describedby":Y,"aria-labelledby":he,tabIndex:oe,children:n})}const{id:I,style:M,title:j,["aria-label"]:L,["aria-describedby"]:N,["aria-labelledby"]:F,tabIndex:P,name:$,value:ne,form:X,formAction:O,formEncType:H,formMethod:z,formNoValidate:re,formTarget:U,autoFocus:de,...ye}=c,ue=c;return o.jsx("button",{ref:t,type:ue.type||"button",disabled:ue.disabled,className:h.classes,"data-module":"nhs-button",...b,...l&&{"data-prevent-double-click":"true"},...ue.disabled&&{"aria-disabled":"true"},...ye,onKeyDown:ce=>{ue.onKeyDown?.(ce),C(ce)},onClick:ce=>{ue.onClick?.(ce),x(ce)},onMouseDown:ce=>{ue.onMouseDown?.(ce),w()},onMouseUp:ce=>{ue.onMouseUp?.(ce),D()},onMouseEnter:ce=>{ue.onMouseEnter?.(ce),S()},onMouseLeave:ce=>{ue.onMouseLeave?.(ce),v()},onFocus:ce=>{ue.onFocus?.(ce),T()},onBlur:ce=>{ue.onBlur?.(ce),k()},id:I,style:M,title:j,"aria-label":L,"aria-describedby":N,"aria-labelledby":F,tabIndex:P,name:$,value:ne,form:X,formAction:O,formEncType:H,formMethod:z,formNoValidate:re,formTarget:U,autoFocus:de,children:n})}const bt=sb(ob);bt.displayName="Button";const ba=({text:e="Back",html:t,href:n="#",className:r,element:i="a",onClick:a,...s})=>{const l=we("nhsuk-back-link",r),c=we("nhsuk-back-link__link"),u=()=>o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:o.jsx("path",{d:"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"})}),t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e]});return o.jsx("div",{className:l,children:i==="button"?o.jsx("button",{className:c,onClick:a,type:"button",...s,children:u()}):o.jsx("a",{className:c,href:n,...s,children:u()})})};function lb(e){const{color:t="default",noBorder:n,closable:r,disabled:i,className:a}=e;return{classes:["nhsuk-tag",t!=="default"?`nhsuk-tag--${t}`:"",n?"nhsuk-tag--no-border":"",r?"nhsuk-tag--closable":"",i?"nhsuk-tag--disabled":"",a||""].filter(Boolean).join(" "),showClose:!!r,disabled:!!i}}const We=({text:e,html:t,children:n,color:r="default",noBorder:i=!1,closable:a=!1,onClose:s,disabled:l=!1,className:c,...u})=>{const d=lb({color:r,noBorder:i,closable:a,disabled:l,className:c}),f=m=>{m.preventDefault(),m.stopPropagation(),!l&&s&&s()};return o.jsxs("strong",{className:d.classes,...u,children:[n||(t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e),a&&o.jsx("button",{type:"button",className:"nhsuk-tag__close",onClick:f,disabled:l,"aria-label":"Remove",title:"Remove",children:"Ã—"})]})},Xc=({id:e,name:t,checked:n,defaultChecked:r=!1,disabled:i=!1,value:a="true",hint:s,errorMessage:l,className:c,children:u,onChange:d,onBlur:f,onFocus:m,attributes:g,...y})=>{const[h,p]=E.useState(r),b=n!==void 0,w=b?n:h;E.useEffect(()=>{b||p(r)},[r,b]);const D=C=>{const x=C.target.checked;b||p(x),d?.(x,C)},S=s?`${e}-hint`:void 0,v=l?`${e}-error`:void 0,T=[S,v].filter(Boolean).join(" ")||void 0,k=we("nhsuk-form-group",{"nhsuk-form-group--error":!!l},c);return o.jsx("div",{className:k,...y,children:o.jsx("div",{className:"nhsuk-checkboxes",children:o.jsxs("div",{className:"nhsuk-checkboxes__item",children:[o.jsx("input",{className:"nhsuk-checkboxes__input",id:e,name:t||e,type:"checkbox",value:a,checked:w,disabled:i,onChange:D,onBlur:f,onFocus:m,"aria-describedby":T,...g}),o.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:e,children:u}),s&&o.jsx("div",{id:S,className:"nhsuk-checkboxes__hint",children:s}),l&&o.jsxs("div",{id:v,className:"nhsuk-error-message nhsuk-checkboxes__error",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]})]})})})};Xc.displayName="Checkbox";function Zc(e){const n=(e.type||"text")==="range";return{classes:["nhsuk-input",e.hasError?"nhsuk-input--error":"",n?"nhsuk-input--range":"",!n&&e.width&&e.width!=="full"?`nhsuk-input--width-${e.width}`:"",e.className||""].filter(Boolean).join(" "),isRange:n}}const ya=({id:e,name:t,type:n="text",value:r,defaultValue:i,placeholder:a,disabled:s=!1,readOnly:l=!1,required:c=!1,hasError:u=!1,describedBy:d,className:f,width:m="full",inputMode:g,autoComplete:y,maxLength:h,minLength:p,pattern:b,step:w,min:D,max:S,showValueLabels:v=!1,showCurrentValue:T=!1,valueLabels:k,onChange:C,onBlur:x,onFocus:I,onKeyDown:M,...j})=>{const[L,N]=E.useState(r||i||(n==="range"?D||"0":""));E.useEffect(()=>{r!==void 0&&N(r)},[r]);const F=U=>{const de=U.target;N(de.value),("type"in U&&U.nativeEvent||U.type==="keydown")&&C?.(U)},{classes:P,isRange:$}=Zc({type:n,hasError:u,width:m,className:f}),ne=r!==void 0,X={id:e,name:t,type:n,placeholder:a,disabled:s,readOnly:l,required:c,"aria-describedby":d,inputMode:g,autoComplete:y,maxLength:h,minLength:p,pattern:b,step:w,min:D,max:S,onChange:F,onBlur:x,onFocus:I,onKeyDown:U=>{if($&&/[0-9]/.test(U.key)){const de=(L?.toString()||"")+U.key;U.target.value=de,F(U)}M?.(U)},...j},O=!ne&&i!==void 0?{defaultValue:i}:{},H=ne?{value:r}:{},z=()=>o.jsx("input",{className:P,...H,...O,"data-current-value":L,...X}),re=$?o.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[v&&o.jsxs("div",{className:"nhsuk-input-range-labels",children:[o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:k?.min||D||"0"}),z(),o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:k?.max||S||"100"})]}),!v&&z(),T&&o.jsx("div",{className:"nhsuk-input-range-current-value",children:o.jsxs("span",{className:"nhsuk-input-range-current-label",children:[k?.current||"Current value:"," ",o.jsx("strong",{children:L})]})})]}):null;return $?re:o.jsx("input",{className:P,id:e,name:t,type:n,value:r,...r===void 0&&i!==void 0?{defaultValue:i}:{},placeholder:a,disabled:s,readOnly:l,required:c,"aria-describedby":d,inputMode:g,autoComplete:y,maxLength:h,minLength:p,pattern:b,step:w,min:D,max:S,onChange:C,onBlur:x,onFocus:I,onKeyDown:M,...j})};function cb(e){const t=e.size||"m",n=["nhsuk-label",t!=="m"?`nhsuk-label--${t}`:"",e.className||""].filter(Boolean).join(" ");return{tag:e.isPageHeading?"h1":"label",classes:n,size:t,htmlFor:e.isPageHeading?void 0:e.htmlFor,isPageHeading:!!e.isPageHeading}}const va=({htmlFor:e,className:t,isPageHeading:n=!1,size:r="m",children:i,...a})=>{const s=cb({size:r,isPageHeading:n,className:t,htmlFor:e}),l=s.tag;return o.jsx(l,{className:s.classes,htmlFor:s.htmlFor,...a,children:n?o.jsx("label",{className:"nhsuk-label-wrapper",htmlFor:e,children:i}):i})};function ub(e){const t=["nhsuk-fieldset",e.className||""].filter(Boolean).join(" "),n=e.legend?["nhsuk-fieldset__legend",e.legend.size?`nhsuk-fieldset__legend--${e.legend.size}`:"",e.legend.className||""].filter(Boolean).join(" "):void 0;return{fieldsetClasses:t,legendClasses:n,legendIsPageHeading:!!e.legend?.isPageHeading,describedBy:e.describedBy}}const _a=({children:e,legend:t,className:n,describedBy:r,...i})=>{const a=ub({className:n,describedBy:r,legend:t?{size:t.size,className:t.className,isPageHeading:t.isPageHeading}:void 0}),s=()=>{const l=t?.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:t.html}}):t?.text;return a.legendIsPageHeading?o.jsx("h1",{className:"nhsuk-fieldset__heading",children:l}):l};return o.jsxs("fieldset",{className:a.fieldsetClasses,"aria-describedby":a.describedBy,...i,children:[t&&(t.text||t.html)&&o.jsx("legend",{className:a.legendClasses,children:s()}),e]})};function db(e){const t=["nhsuk-checkboxes",e.small?"nhsuk-checkboxes--small":"",e.className||""].filter(Boolean).join(" "),n=["nhsuk-form-group",e.hasError?"nhsuk-form-group--error":""].filter(Boolean).join(" ");return{classes:t,formGroupClasses:n}}const Kc=({items:e,name:t,idPrefix:n,legend:r,isPageHeading:i=!1,legendSize:a="l",hint:s,errorMessage:l,className:c="",small:u=!1,onChange:d,fieldsetAttributes:f,attributes:m,...g})=>{const[y,h]=E.useState(e.filter(C=>C.checked).map(C=>C.value)),p=n||t,b=s?`${p}-hint`:void 0,w=l?`${p}-error`:void 0,D=[b,w].filter(Boolean).join(" ")||void 0,S=(C,x)=>{let I;x?I=[...y,C]:I=y.filter(M=>M!==C),h(I),d?.(I)},v=()=>e.map((C,x)=>{const I=`${p}-${x+1}`,M=`${I}-conditional`,j=y.includes(C.value),L=C.disabled||!1;return o.jsxs("div",{className:"nhsuk-checkboxes__item",children:[o.jsx("input",{className:"nhsuk-checkboxes__input",id:I,name:t,type:"checkbox",value:C.value,checked:j,disabled:L,onChange:N=>S(C.value,N.target.checked),"aria-describedby":C.hint?`${I}-hint`:D,...C.conditional&&{"aria-controls":M,"aria-expanded":j?"true":"false"},...C.attributes}),o.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:I,children:C.text}),C.hint&&o.jsx("div",{id:`${I}-hint`,className:"nhsuk-checkboxes__hint",children:C.hint}),C.conditional&&o.jsx("div",{className:we("nhsuk-checkboxes__conditional",{"nhsuk-checkboxes__conditional--hidden":!j}),id:M,children:typeof C.conditional=="object"&&C.conditional!==null&&"label"in C.conditional&&"id"in C.conditional&&"name"in C.conditional?o.jsxs("div",{style:{marginTop:"16px"},children:[C.conditional.label&&o.jsx(va,{htmlFor:C.conditional.id,children:C.conditional.label}),o.jsx(ya,{...C.conditional})]}):C.conditional})]},C.value)}),{classes:T,formGroupClasses:k}=db({small:u,className:c,hasError:!!l});return o.jsx("div",{className:k,...m,...g,children:o.jsxs(_a,{legend:r?{text:r,isPageHeading:i,size:a}:void 0,describedBy:D,...f,children:[s&&o.jsx("div",{id:b,className:"nhsuk-hint",children:s}),l&&o.jsxs("div",{id:w,className:"nhsuk-error-message",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]}),o.jsx("div",{className:T,children:v()})]})})};Kc.displayName="Checkboxes";function fb(e){const t=e.resize??"vertical";return{classes:["nhsuk-textarea",e.hasError?"nhsuk-textarea--error":"",t!=="vertical"?`nhsuk-textarea--resize-${t}`:"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}const Jc=({id:e,name:t,value:n,defaultValue:r,placeholder:i,disabled:a=!1,readOnly:s=!1,required:l=!1,hasError:c=!1,describedBy:u,className:d,rows:f=5,cols:m,maxLength:g,minLength:y,wrap:h="soft",resize:p="vertical",autoComplete:b,spellCheck:w,onChange:D,onBlur:S,onFocus:v,onKeyDown:T,...k})=>{const{classes:C,describedBy:x}=fb({hasError:c,resize:p,className:d,describedBy:u});return o.jsx("textarea",{className:C,id:e,name:t,value:n,defaultValue:r,placeholder:i,disabled:a,readOnly:s,required:l,"aria-describedby":x,rows:f,cols:m,maxLength:g,minLength:y,wrap:h,autoComplete:b,spellCheck:w,onChange:D,onBlur:S,onFocus:v,onKeyDown:T,...k})};function hb(e){return{classes:["nhsuk-hint",e.className||""].filter(Boolean).join(" "),id:e.id}}const Ys=({id:e,className:t,children:n,...r})=>{const i=hb({id:e,className:t});return o.jsx("div",{className:i.classes,id:i.id,...r,children:n})},mb=({id:e,maxLength:t,maxWords:n,threshold:r=75,name:i,value:a,defaultValue:s,rows:l,className:c,countMessage:u,onCountChange:d,onChange:f,...m})=>{const g=a??s??"",[y,h]=E.useState(g),[p,b]=E.useState(0),[w,D]=E.useState(!1),[S,v]=E.useState(!1),T=E.useCallback(j=>n?j.trim()===""?0:j.trim().split(/\s+/).length:j.length,[n]);E.useEffect(()=>{const j=T(y),L=t||n||0,N=L-j,F=Math.floor(L*(r/100));b(N),D(j>L),v(j>=F||j>L),d&&d(j,N)},[y,t,n,r,T,d]);const k=j=>{const L=j.target.value;h(L),f&&f(j)},C=()=>{const j=t||n||0,L=n?"word":"character",N=n?"words":"characters";if(!S)return`You can enter up to ${j} ${j===1?L:N}`;if(w){const F=Math.abs(p);return`You have ${F} ${F===1?L:N} too many`}else return`You have ${p} ${p===1?L:N} remaining`},x=we("nhsuk-character-count",c),I=we("nhsuk-character-count__message",{"nhsuk-character-count__message--disabled":!S,"nhsuk-error-message":w},u?.classes),M=we("nhsuk-js-character-count",{"nhsuk-textarea--error":w});return o.jsxs("div",{className:x,"data-module":"nhsuk-character-count","data-maxlength":t,"data-maxwords":n,"data-threshold":r,"data-testid":"character-count",children:[o.jsx(Jc,{id:e,name:i,value:a!==void 0?y:void 0,defaultValue:a===void 0?s??y:void 0,rows:l,className:M,onChange:k,"aria-describedby":`${e}-info`,"aria-invalid":w||void 0,...m}),o.jsx(Ys,{id:`${e}-info`,className:I,role:"status","aria-live":"polite",children:C()})]})};function pb(e){return{classes:["nhsuk-select",e.hasError?"nhsuk-select--error":"",e.className||""].filter(Boolean).join(" ")}}const Qc=({value:e,disabled:t=!1,selected:n=!1,className:r,children:i,...a})=>{const s=we("nhsuk-select__option",r);return o.jsx("option",{className:s,value:e,disabled:t,...a,children:i})},oi=({id:e,name:t,ariaLabel:n,value:r,defaultValue:i,disabled:a=!1,required:s=!1,hasError:l=!1,describedBy:c,className:u,multiple:d=!1,size:f,autoComplete:m,options:g,children:y,onChange:h,onBlur:p,onFocus:b,...w})=>{const{classes:D}=pb({hasError:l,className:u}),S=()=>g?g.map((T,k)=>o.jsx("option",{value:T.value,disabled:T.disabled,"data-initial-selected":T.selected||void 0,children:T.text},`${T.value}-${k}`)):null,v=i===void 0&&r===void 0&&g?g.find(T=>T.selected)?.value:void 0;return o.jsx("select",{className:D,id:e,name:t,"aria-label":n,value:r,defaultValue:i!==void 0?i:v,disabled:a,required:s,"aria-describedby":c,multiple:d,size:f,autoComplete:m,onChange:h,onBlur:p,onFocus:b,...w,children:y||S()})};oi.Option=Qc;function gb(e){return{classes:["nhsuk-radios",e.hasError?"nhsuk-radios--error":"",e.size==="small"?"nhsuk-radios--small":"",e.inline?"nhsuk-radios--inline":"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}function eu(e,{variant:t,selectedValue:n,enableBehaviourAttr:r,handleChange:i,handleBlur:a,handleFocus:s,handleKeyDown:l,itemsRef:c,InputComponent:u}){const{onChange:d,onBlur:f,onFocus:m,...g}=e,{name:y,hasError:h=!1,describedBy:p,className:b,size:w="normal",inline:D=!1,options:S,...v}=g,{classes:T,describedBy:k}=gb({hasError:h,size:w,inline:D,className:b,describedBy:p});return o.jsx(_a,{children:o.jsx("div",{className:T,...v,...r?{"data-nhs-behaviour":"radios"}:{},children:S.map((C,x)=>{const I=`${y}-${x}`,M=C.conditional?`${I}-conditional`:void 0,j=n===C.value;return o.jsxs("div",{className:"nhsuk-radios__item",children:[o.jsx("input",{className:"nhsuk-radios__input",id:I,name:y,type:"radio",value:C.value,disabled:C.disabled,...t==="client"?{checked:j,onChange:i,onBlur:a,onFocus:s,onKeyDown:l,ref:L=>{L&&c&&(c.current[x]=L)}}:{defaultChecked:j,"data-nhs-radios-input":!0},"aria-describedby":k}),o.jsx("label",{className:"nhsuk-radios__label",htmlFor:I,children:C.text}),C.hint&&o.jsx("div",{className:"nhsuk-radios__hint",children:C.hint}),C.conditional&&o.jsx("div",{className:we("nhsuk-radios__conditional",{"nhsuk-radios__conditional--hidden":!j}),id:M,...t==="server"?{"data-nhs-radios-conditional":!0}:{},children:typeof C.conditional=="object"&&C.conditional!==null&&"label"in C.conditional&&"id"in C.conditional&&"name"in C.conditional?o.jsxs("div",{style:{marginTop:"16px"},children:[C.conditional.label&&o.jsx(va,{htmlFor:C.conditional.id,children:C.conditional.label}),o.jsx(u,{...C.conditional})]}):C.conditional})]},C.value)})})})}const bb=({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:i,...a})=>{const[s,l]=E.useState(e||t||""),c=E.useRef([]),u=E.useRef(s),d=g=>{const y=g.target.value;y!==u.current&&(u.current=y,l(y),n?.(g))},f=g=>{i?.(g)},m=E.useCallback(g=>{const{key:y}=g;if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(y))return;g.preventDefault();const h=c.current.filter(D=>D&&!D.disabled),p=h.indexOf(g.currentTarget);if(p===-1)return;let b=p;["ArrowDown","ArrowRight"].includes(y)?b=(p+1)%h.length:["ArrowUp","ArrowLeft"].includes(y)&&(b=(p-1+h.length)%h.length);const w=h[b];w&&(w.focus(),w.checked||w.click())},[]);return eu({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:i,...a},{variant:"client",selectedValue:s,enableBehaviourAttr:!1,handleChange:d,handleBlur:r,handleFocus:f,handleKeyDown:m,itemsRef:c,InputComponent:ya})};function yb(e){const{id:t,name:n,type:r="text",value:i,defaultValue:a,placeholder:s,disabled:l=!1,readOnly:c=!1,required:u=!1,hasError:d=!1,describedBy:f,className:m,width:g="full",inputMode:y,autoComplete:h,maxLength:p,minLength:b,pattern:w,step:D,min:S,max:v,showValueLabels:T=!1,showCurrentValue:k=!1,valueLabels:C,onChange:x,onBlur:I,onFocus:M,onKeyDown:j,...L}=e,{classes:N,isRange:F}=Zc({type:r,hasError:d,width:g,className:m}),P={id:t,name:n,type:r,placeholder:s,disabled:l,readOnly:c,required:u,"aria-describedby":f,inputMode:y,autoComplete:h,maxLength:p,minLength:b,pattern:w,step:D,min:S,max:v,...L};if(F){const $=i??a??(typeof S<"u"?String(S):"0"),ne=o.jsx("input",{className:N,...i!==void 0?{value:i}:{},...i===void 0&&a!==void 0?{defaultValue:a}:{},"data-current-value":$,...P});return o.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[T?o.jsxs("div",{className:"nhsuk-input-range-labels",children:[o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:C?.min||S||"0"}),ne,o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:C?.max||v||"100"})]}):ne,k&&o.jsx("div",{className:"nhsuk-input-range-current-value",children:o.jsxs("span",{className:"nhsuk-input-range-current-label",children:[C?.current||"Current value:"," ",o.jsx("strong",{children:$})]})})]})}return o.jsx("input",{className:N,...i!==void 0?{value:i}:{},...i===void 0&&a!==void 0?{defaultValue:a}:{},...P})}const vb=({value:e,defaultValue:t,...n})=>{const r=e||t||"";return eu({value:e,defaultValue:t,...n},{variant:"server",selectedValue:r,enableBehaviourAttr:!0,InputComponent:yb})};var Vn=(e=>(e.OneQuarter="one-quarter",e.OneThird="one-third",e.OneHalf="one-half",e.TwoThirds="two-thirds",e.ThreeQuarters="three-quarters",e.Full="full",e))(Vn||{}),tu=(e=>(e.Mobile="mobile",e.Tablet="tablet",e.Desktop="desktop",e.LargeDesktop="large-desktop",e))(tu||{}),nu=(e=>(e.Left="left",e.Right="right",e))(nu||{}),ru=(e=>(e.Left="left",e.Center="center",e.Right="right",e))(ru||{});const qs=({children:e,className:t,fluid:n=!1,maxWidth:r,style:i,...a})=>{const s=we({"nhsuk-width-container":!n,"nhsuk-width-container-fluid":n},t),l=r?{maxWidth:r,...i||{}}:i;return o.jsx("div",{className:s,style:l,...a,children:e})},Gn=({children:e,className:t,style:n,align:r,...i})=>{const a=we("nhsuk-grid-row",r?`nhsuk-grid-row-align-${r}`:void 0,t);return o.jsx("div",{className:a,style:n,...i,children:e})},Nr=({children:e,width:t=Vn.Full,mobileWidth:n,tabletWidth:r,desktopWidth:i,start:a,className:s,forceWidth:l=!1,style:c,align:u,...d})=>{const f=we({[`nhsuk-grid-column-${t}`]:!l,[`nhsuk-u-${t}`]:l,[`nhsuk-u-${n}-mobile`]:!!n,[`nhsuk-u-${r}-tablet`]:!!r,[`nhsuk-u-${i}-desktop`]:!!i,[`nhsuk-grid-column-start-${a}`]:a&&a>=1&&a<=7,...u?{[`nhsuk-grid-align-${u}`]:!0}:{}},s);return o.jsx("div",{className:f,style:c,...d,children:e})},xa=({children:e,className:t,style:n,...r})=>{const a=E.Children.toArray(e)[0],s=E.isValidElement(a)&&(a.type===Gn||typeof a.props=="object"&&a.props&&"className"in a.props&&typeof a.props.className=="string"&&a.props.className.includes("nhsuk-grid-row"));return o.jsx(qs,{className:t,style:n,...r,children:s?e:o.jsx(Gn,{children:e})})},_b=({children:e,type:t="bullet",size:n="medium",border:r=!1,className:i,role:a,as:s,...l})=>{const c=s||(t==="number"?"ol":"ul"),u=we("nhsuk-list",{"nhsuk-list--bullet":t==="bullet","nhsuk-list--number":t==="number","nhsuk-list--none":t==="none","nhsuk-list--border":r,[`nhsuk-list--${n}`]:n!=="medium"},i);return o.jsx(c,{className:u,role:a,...l,children:e})},xb=({children:e,className:t,...n})=>{const r=we("nhsuk-list__item",t);return o.jsx("li",{className:r,...n,children:e})},iu=_b;iu.Item=xb;const wb=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const i=["nhsuk-spacing-utilities",e&&"nhsuk-spacing-utilities--debug",t].filter(Boolean).join(" ");return o.jsx("div",{className:i,...r,children:n})},Sb={margin:e=>`nhsuk-u-margin-${e}`,marginTop:e=>`nhsuk-u-margin-top-${e}`,marginRight:e=>`nhsuk-u-margin-right-${e}`,marginBottom:e=>`nhsuk-u-margin-bottom-${e}`,marginLeft:e=>`nhsuk-u-margin-left-${e}`,padding:e=>`nhsuk-u-padding-${e}`,paddingTop:e=>`nhsuk-u-padding-top-${e}`,paddingRight:e=>`nhsuk-u-padding-right-${e}`,paddingBottom:e=>`nhsuk-u-padding-bottom-${e}`,paddingLeft:e=>`nhsuk-u-padding-left-${e}`,marginResponsive:e=>`nhsuk-u-margin-responsive-${e}`,marginTopResponsive:e=>`nhsuk-u-margin-top-responsive-${e}`,marginRightResponsive:e=>`nhsuk-u-margin-right-responsive-${e}`,marginBottomResponsive:e=>`nhsuk-u-margin-bottom-responsive-${e}`,marginLeftResponsive:e=>`nhsuk-u-margin-left-responsive-${e}`,paddingResponsive:e=>`nhsuk-u-padding-responsive-${e}`,paddingTopResponsive:e=>`nhsuk-u-padding-top-responsive-${e}`,paddingRightResponsive:e=>`nhsuk-u-padding-right-responsive-${e}`,paddingBottomResponsive:e=>`nhsuk-u-padding-bottom-responsive-${e}`,paddingLeftResponsive:e=>`nhsuk-u-padding-left-responsive-${e}`},Cb=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const i=["nhsuk-width-utilities",e&&"nhsuk-width-utilities--debug",t].filter(Boolean).join(" ");return o.jsx("div",{className:i,...r,children:n})},kb={width:e=>`nhsuk-u-width-${e}`,widthTablet:e=>`nhsuk-u-width-${e}-tablet`},Tb=["full","three-quarters","two-thirds","one-half","one-third","one-quarter"],Xs=({as:e="main",size:t="default",className:n,children:r,...i})=>{const a=["nhsuk-main-wrapper",t==="large"&&"nhsuk-main-wrapper--l",t==="small"&&"nhsuk-main-wrapper--s",n].filter(Boolean).join(" ");return o.jsx(e,{className:a,...i,children:r})};function Nb(e){switch(e){case"xxl":case"xl":return 1;case"l":return 2;case"m":return 3;case"s":return 4;case"xs":return 5;default:return 2}}function jb(e){const t=e.level??Nb(e.size),n=["nhsuk-heading",e.size?`nhsuk-heading--${e.size}`:"",e.className||""].filter(Boolean).join(" "),r=e.marginBottom?{marginBottom:e.marginBottom}:void 0;return{tag:`h${t}`,classes:n,style:r}}const on=({level:e,className:t,text:n,html:r,children:i,size:a,marginBottom:s,...l})=>{const c=jb({level:e,size:a,className:t,marginBottom:s}),u=i||(r?o.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n);return E.createElement(c.tag,{className:c.classes,style:c.style,...l},u)};function Db(e){return{classes:["nhsuk-error-message",e.className||""].filter(Boolean).join(" "),id:e.id,visuallyHiddenText:e.visuallyHiddenText??"Error:"}}const Zs=({id:e,className:t,visuallyHiddenText:n="Error:",children:r,...i})=>{const a=Db({id:e,className:t,visuallyHiddenText:n});return o.jsxs("span",{className:a.classes,id:a.id,...i,children:[o.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[a.visuallyHiddenText," "]}),r]})},Mb=({titleText:e="There is a problem",titleHtml:t,descriptionText:n,descriptionHtml:r,errorList:i,className:a,children:s,...l})=>{const c=E.useRef(null);E.useEffect(()=>{c.current&&c.current.focus()},[]);const u=we("nhsuk-error-summary",a),d=()=>t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,f=()=>r?o.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n,m=g=>{const y=g.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:g.html}}):g.text;return g.href?o.jsx("a",{href:g.href,...g.attributes,children:y}):y};return o.jsxs("div",{ref:c,className:u,"aria-labelledby":"error-summary-title",role:"alert",tabIndex:-1,"data-module":"nhsuk-error-summary",...l,children:[o.jsx("h2",{className:"nhsuk-error-summary__title",id:"error-summary-title",children:d()}),o.jsxs("div",{className:"nhsuk-error-summary__body",children:[s&&o.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:s}),!s&&(n||r)&&o.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:f()}),o.jsx("ul",{className:"nhsuk-list nhsuk-error-summary__list",role:"list",children:i.map((g,y)=>o.jsx("li",{children:m(g)},y))})]})]})},Pb=({id:e,className:t,items:n,namePrefix:r,values:i={},fieldset:a,hint:s,errorMessage:l,onChange:c,...u})=>{const[d,f]=E.useState(()=>({day:i.day||"",month:i.month||"",year:i.year||""})),[m,g]=E.useState({}),y=F=>F%4===0&&F%100!==0||F%400===0,h=(F,P)=>{const $=[31,28,31,30,31,30,31,31,30,31,30,31];return F===2&&y(P)?29:$[F-1]},p=(F,P,$)=>{if(!F)return;if(!/^\d+$/.test(F))return"Day must be a number";const ne=parseInt(F,10);if(ne<1||ne>31)return"Day must be between 1 and 31";if(P&&$){const X=parseInt(P,10),O=parseInt($,10);if(!isNaN(X)&&!isNaN(O)&&X>=1&&X<=12){const H=h(X,O);if(ne>H)return`${["January","February","March","April","May","June","July","August","September","October","November","December"][X-1]} ${O} only has ${H} days`}}},b=F=>{if(!F)return;if(!/^\d+$/.test(F))return"Month must be a number";const P=parseInt(F,10);if(P<1||P>12)return"Month must be between 1 and 12"},w=F=>{if(!F)return;if(!/^\d+$/.test(F))return"Year must be a number";const P=parseInt(F,10),$=new Date().getFullYear();if(P<1900||P>$+10)return`Year must be between 1900 and ${$+10}`},D=(F,P,$)=>{if(!F||!P||!$)return;const ne=parseInt(F,10),X=parseInt(P,10),O=parseInt($,10);if(isNaN(ne)||isNaN(X)||isNaN(O)||X<1||X>12||O<1900)return;const H=h(X,O);ne<1||ne>H},S=E.useCallback((F,P)=>{const $={...d,[F]:P};f($),c&&c($)},[d,c]),v=E.useCallback(F=>{const P=d[F];let $;if(F==="day")$=p(P,d.month,d.year);else if(F==="month"){if($=b(P),!$&&d.day){const ne=p(d.day,P,d.year);g(X=>({...X,day:ne}))}}else if(F==="year"&&($=w(P),!$&&d.day&&d.month)){const ne=p(d.day,d.month,P);g(X=>({...X,day:ne}))}if(g(ne=>({...ne,[F]:$})),d.day&&d.month&&d.year){const ne=D(F==="day"?P:d.day,F==="month"?P:d.month,F==="year"?P:d.year);ne&&g(X=>({...X,day:ne}))}},[d,p,b,w,D]),T=E.useMemo(()=>[{name:"day",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"month",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"year",classes:"nhsuk-input--width-4",inputmode:"numeric",pattern:"[0-9]*"}],[]),k=n||T;let C=a?.describedBy||"";const x=s?`${e}-hint`:"",I=l?`${e}-error`:"";x&&(C=C?`${C} ${x}`:x),I&&(C=C?`${C} ${I}`:I);const M=Object.values(m).some(F=>F),j=we("nhsuk-form-group",{"nhsuk-form-group--error":l||M}),L=we("nhsuk-date-input",t),N=()=>o.jsxs(o.Fragment,{children:[s&&o.jsx(Ys,{id:x,className:s.classes,children:s.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:s.html}}):s.text}),l&&o.jsx(Zs,{id:I,className:l.classes,children:l.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text}),Object.entries(m).map(([F,P])=>P?o.jsxs(Zs,{id:`${e}-${F}-error`,className:"nhsuk-error-message",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",P]},`${F}-error`):null),o.jsx("div",{className:L,id:e,"data-testid":"date-input",...u,children:k.map(F=>{const P=F.id||`${e}-${F.name}`,$=r?`${r}[${F.name}]`:F.name,ne=F.label||F.name.charAt(0).toUpperCase()+F.name.slice(1),X=m[F.name],O=d[F.name]||"";let H=C;if(X){const z=`${e}-${F.name}-error`;H=H?`${H} ${z}`:z}return o.jsxs("div",{className:"nhsuk-date-input__item",children:[o.jsx(va,{htmlFor:P,className:"nhsuk-date-input__label",children:ne}),o.jsx(ya,{id:P,name:$,value:O,className:we("nhsuk-date-input__input",F.classes,{"nhsuk-input--error":X}),inputMode:F.inputmode,autoComplete:F.autocomplete,pattern:F.pattern,"aria-describedby":H||void 0,hasError:!!X,onChange:z=>S(F.name,z.target.value),onBlur:()=>v(F.name)})]},F.name)})})]});return o.jsx("div",{className:j,children:a?o.jsx(_a,{className:a.classes,legend:a.legend?{text:a.legend}:void 0,describedBy:C||void 0,children:N()}):N()})},au={animation:{AnimationDurationFast:"150ms",AnimationDurationNormal:"300ms",AnimationDurationSlow:"500ms",AnimationEasingEaseIn:"cubic-bezier(0.4, 0, 1, 1)",AnimationEasingEaseOut:"cubic-bezier(0, 0, 0.2, 1)",AnimationEasingEaseInOut:"cubic-bezier(0.4, 0, 0.2, 1)",AnimationEasingBounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},transition:{TransitionButtonDefault:"background-color 300ms cubic-bezier(0, 0, 0.2, 1)",TransitionButtonShadow:"box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionInputFocus:"border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionCardHover:"border-color 300ms cubic-bezier(0, 0, 0.2, 1)"},border:{BorderWidthDefault:"1px",BorderWidthFormElement:"2px",BorderWidthFormElementError:"4px",BorderWidthCardBottom:"4px",BorderWidthPanel:"4px",BorderWidthTableHeader:"2px",BorderWidthTableCell:"1px",BorderRadiusNone:"0px",BorderRadiusSmall:"4px",BorderRadiusMedium:"8px",BorderRadiusLarge:"12px",BorderColorDefault:"#d8dde0",BorderColorForm:"#4c6272",BorderColorCard:"#d8dde0",BorderColorCardHover:"#aeb7bd",BorderColorError:"#d5281b"},color:{ColorPrimaryBlue:"#005eb8",ColorPrimaryWhite:"#ffffff",ColorPrimaryBlack:"#212b32",ColorPrimaryGreen:"#007f3b",ColorPrimaryPurple:"#330072",ColorPrimaryDarkPink:"#7c2855",ColorPrimaryRed:"#d5281b",ColorPrimaryYellow:"#ffeb3b",ColorSecondaryPaleYellow:"#fff9c4",ColorSecondaryWarmYellow:"#ffb81c",ColorSecondaryOrange:"#ed8b00",ColorSecondaryAquaGreen:"#00a499",ColorSecondaryPink:"#ae2573",ColorGrey1:"#4c6272",ColorGrey2:"#768692",ColorGrey3:"#aeb7bd",ColorGrey4:"#d8dde0",ColorGrey5:"#f0f4f5",ColorTextPrimary:"#212b32",ColorTextSecondary:"#4c6272",ColorTextReverse:"#ffffff",ColorTextPrint:"#212b32",ColorLinkDefault:"#005eb8",ColorLinkHover:"#7c2855",ColorLinkActive:"#003087",ColorLinkVisited:"#330072",ColorFocusBackground:"#ffeb3b",ColorFocusText:"#212b32",ColorBorderDefault:"#d8dde0",ColorBorderSecondary:"#ffffff33",ColorError:"#d5281b",ColorFormBorder:"#4c6272",ColorFormBackground:"#ffffff",ColorButtonPrimaryBackground:"#007f3b",ColorButtonPrimaryText:"#ffffff",ColorButtonPrimaryHover:"#006530",ColorButtonPrimaryActive:"#004021",ColorButtonPrimaryShadow:"#004021",ColorButtonSecondaryBackground:"#00000000",ColorButtonSecondaryBackgroundSolid:"#ffffff",ColorButtonSecondaryBorder:"#005eb8",ColorButtonSecondaryText:"#005eb8",ColorButtonSecondaryHover:"#d9e5f2",ColorButtonSecondaryActive:"#c7daf0",ColorButtonSecondaryShadow:"#005eb8",ColorButtonReverseBackground:"#ffffff",ColorButtonReverseText:"#212b32",ColorButtonReverseHover:"#d9dde0",ColorButtonReverseActive:"#b3bcc2",ColorButtonReverseShadow:"#b3bcc2",ColorButtonWarningBackground:"#d5281b",ColorButtonWarningHover:"#aa2016",ColorButtonWarningActive:"#6a140e",ColorButtonWarningShadow:"#6a140e",ColorButtonLoginBackground:"#005eb8",ColorButtonLoginHover:"#004b93",ColorButtonLoginActive:"#002f5c",ColorButtonLoginShadow:"#002f5c"},component:{ComponentButtonPaddingMobileVertical:"8px",ComponentButtonPaddingMobileHorizontal:"16px",ComponentButtonPaddingDesktopVertical:"12px",ComponentButtonPaddingDesktopHorizontal:"16px",ComponentButtonShadowSize:"4px",ComponentFormInputMinHeight:"40px",ComponentFormInputPadding:"4px",ComponentFormCheckboxSize:"40px",ComponentFormCheckboxLabelPadding:"12px",ComponentCardPaddingMobile:"16px",ComponentCardPaddingDesktop:"32px",ComponentCardHeadingMargin:"16px",ComponentPanelPaddingMobile:"20px",ComponentPanelPaddingDesktop:"28px",ComponentBreadcrumbChevronMarginLeft:"9px",ComponentBreadcrumbChevronMarginRight:"2px",ComponentBreadcrumbPaddingTopMobile:"16px",ComponentBreadcrumbPaddingTopDesktop:"24px",ComponentSummaryListCellPaddingVertical:"8px",ComponentSummaryListCellPaddingHorizontal:"24px",ComponentSummaryListRowMargin:"16px",ComponentSpread:"4px",ComponentBlur:"4px",ComponentLink:"4px",ComponentDetails:"8px",ComponentExpander:"4px",ComponentPagination:"16px"},button:{ButtonPrimaryBackgroundDefault:"#007f3b",ButtonPrimaryBackgroundHover:"#006530",ButtonPrimaryBackgroundActive:"#004021",ButtonPrimaryBackgroundDisabled:"#d8dde0",ButtonPrimaryTextDefault:"#ffffff",ButtonPrimaryTextDisabled:"#768692",ButtonPrimaryBorderDefault:"#00000000",ButtonPrimaryBorderFocus:"#ffeb3b",ButtonSecondaryBackgroundDefault:"#00000000",ButtonSecondaryBackgroundSolid:"#ffffff",ButtonSecondaryBackgroundHover:"#d9e5f2",ButtonSecondaryBackgroundActive:"#c7daf0",ButtonSecondaryTextDefault:"#005eb8",ButtonSecondaryBorderDefault:"#005eb8",ButtonSpacingPaddingVerticalMobile:"8px",ButtonSpacingPaddingHorizontalMobile:"16px",ButtonSpacingPaddingVerticalDesktop:"12px",ButtonSpacingPaddingHorizontalDesktop:"16px",ButtonBorderWidth:"2px",ButtonBorderRadius:"4px",ButtonShadowSize:"4px",ButtonTypographyWeight:"600"},card:{CardBackgroundDefault:"#ffffff",CardBorderDefault:"#d8dde0",CardBorderHover:"#aeb7bd",CardBorderBottom:"#f0f4f5",CardTextHeading:"#212b32",CardTextDescription:"#212b32",CardTextLink:"#005eb8",CardSpacingPaddingMobile:"16px",CardSpacingPaddingDesktop:"32px",CardSpacingHeadingMargin:"16px",CardBorderWidthDefault:"1px",CardBorderWidthBottom:"4px",CardShadowDefault:"none",CardShadowHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},form:{FormInputBackgroundDefault:"#ffffff",FormInputBackgroundFocus:"#ffffff",FormInputBackgroundDisabled:"#d8dde0",FormInputBackgroundError:"#ffffff",FormInputBorderDefault:"#4c6272",FormInputBorderFocus:"#ffeb3b",FormInputBorderError:"#d5281b",FormInputBorderDisabled:"#aeb7bd",FormInputTextDefault:"#212b32",FormInputTextPlaceholder:"#4c6272",FormInputTextDisabled:"#768692",FormLabelTextDefault:"#212b32",FormLabelTextRequired:"#ffffff",FormLabelTypographyWeight:"600",FormErrorTextDefault:"#d5281b",FormErrorTypographyWeight:"600",FormHintTextDefault:"#4c6272",FormSpacingInputPadding:"4px",FormSpacingInputMinHeight:"40px",FormSpacingCheckboxSize:"40px",FormSpacingCheckboxLabelPadding:"12px",FormBorderWidthDefault:"2px",FormBorderWidthError:"4px",FormBorderRadius:"0px"},size:{SizeIconSmall:"16px",SizeIconMedium:"18px",SizeIconLarge:"24px",SizeIconExtraLarge:"32px",SizeIconNhsDefault:"34px",SizeFormControlSmall:"32px",SizeFormControlMedium:"40px",SizeFormControlLarge:"48px",SizeFormInputWidthXs:"5.4ex",SizeFormInputWidthSm:"7.2ex",SizeFormInputWidthMd:"9ex",SizeFormInputWidthLg:"10.8ex",SizeFormInputWidthXl:"20ex",SizeFormInputWidth2xl:"38ex",SizeFormInputWidth3xl:"56ex",SizeButtonMinHeightMobile:"44px",SizeButtonMinHeightDesktop:"40px"},layout:{LayoutContainerMaxWidth:"1020px",LayoutColumnFull:"100%",LayoutColumnHalf:"50%",LayoutColumnThird:"33.333%",LayoutColumnQuarter:"25%",LayoutColumnActions:"20%"},breakpoint:{BreakpointMobile:"320px",BreakpointTablet:"641px",BreakpointDesktop:"1025px",BreakpointLargeDesktop:"1280px"},grid:{GridPageWidth:"960px",GridGutter:"32px",GridGutterHalf:"16px"},state:{StateErrorBackground:"#d5281b",StateErrorBorder:"#d5281b",StateErrorText:"#ffffff",StateSuccessBackground:"#007f3b",StateSuccessBorder:"#007f3b",StateSuccessText:"#ffffff",StateWarningBackground:"#ffeb3b",StateWarningBorder:"#ffeb3b",StateWarningText:"#212b32",StateInfoBackground:"#005eb8",StateInfoBorder:"#005eb8",StateInfoText:"#ffffff",StateDisabledBackground:"#d8dde0",StateDisabledBorder:"#aeb7bd",StateDisabledText:"#768692"},shadow:{ShadowButtonDefault:"0 4px 0 #004021",ShadowButtonSecondary:"0 4px 0 #005eb8",ShadowButtonWarning:"0 4px 0 #6a140e",ShadowButtonFocus:"0 4px 0 #ffeb3b",ShadowCardDefault:"none",ShadowCardHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},"focus-outline":{FocusOutlineWidth:"4px",FocusOutlineOffset:"0px",FocusOutlineStyle:"solid"},"focus-shadow":{FocusShadowInput:"0 0 0 3px #ffeb3b",FocusShadowButton:"0 0 0 3px #ffeb3b"},elevation:{ElevationNone:"none",ElevationLow:"0 1px 3px rgba(0, 0, 0, 0.12)",ElevationMedium:"0 2px 6px rgba(0, 0, 0, 0.16)",ElevationHigh:"0 4px 12px rgba(0, 0, 0, 0.20)"},spacing:{Spacing0:"0",Spacing1:"4px",Spacing2:"8px",Spacing3:"16px",Spacing4:"24px",Spacing5:"32px",Spacing6:"40px",Spacing7:"48px",Spacing8:"56px",Spacing9:"64px"},"spacing-responsive":{SpacingResponsive0Mobile:"0",SpacingResponsive0Tablet:"0",SpacingResponsive1Mobile:"4px",SpacingResponsive1Tablet:"4px",SpacingResponsive2Mobile:"8px",SpacingResponsive2Tablet:"8px",SpacingResponsive3Mobile:"8px",SpacingResponsive3Tablet:"16px",SpacingResponsive4Mobile:"16px",SpacingResponsive4Tablet:"24px",SpacingResponsive5Mobile:"24px",SpacingResponsive5Tablet:"32px",SpacingResponsive6Mobile:"32px",SpacingResponsive6Tablet:"40px",SpacingResponsive7Mobile:"40px",SpacingResponsive7Tablet:"48px",SpacingResponsive8Mobile:"48px",SpacingResponsive8Tablet:"56px",SpacingResponsive9Mobile:"56px",SpacingResponsive9Tablet:"64px"},font:{FontFamilyBase:"Frutiger W01",FontFamilyFallback:"Arial, Helvetica, sans-serif",FontFamilyPrint:"sans-serif",FontWeightNormal:"400",FontWeightBold:"600",FontWeightLight:"400",FontSize14Mobile:"12px",FontSize14Tablet:"14px",FontSize14Print:"12pt",FontSize16Mobile:"14px",FontSize16Tablet:"16px",FontSize16Print:"12pt",FontSize19Mobile:"16px",FontSize19Tablet:"19px",FontSize19Print:"13pt",FontSize22Mobile:"19px",FontSize22Tablet:"22px",FontSize22Print:"15pt",FontSize26Mobile:"22px",FontSize26Tablet:"26px",FontSize26Print:"17pt",FontSize36Mobile:"27px",FontSize36Tablet:"36px",FontSize36Print:"20pt",FontSize48Mobile:"33px",FontSize48Tablet:"48px",FontSize48Print:"24pt",FontSizeBase:"16px",FontLineHeightBase:"24px"},headings:{xl:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},l:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},m:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},s:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xs:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}}},paragraphs:{body:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bodyLarge:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},bodySmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ledeText:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},ledeTextSmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}}}},su=E.createContext(au),Ib=({children:e,theme:t={}})=>{const n={...au,...t};return o.jsx(su.Provider,{value:n,children:e})},Fb=()=>{const e=E.useContext(su);if(!e)throw new Error("useNHSTheme must be used within an NHSThemeProvider");return e};function $b(){return`
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 400;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff") format("woff");
	}
	
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 600;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff") format("woff");
	}
  `}function Lb(){if(typeof document>"u"||document.getElementById("nhs-fonts"))return;const e=document.createElement("style");e.id="nhs-fonts",e.textContent=$b(),document.head.appendChild(e)}const Ab=({children:e,theme:t})=>(E.useEffect(()=>{Lb()},[]),o.jsx(Ib,{theme:t,children:e}));function Eb(e,{variant:t,isClient:n,menuOpen:r=!1,showMoreButton:i=!1,visibleItems:a,dropdownVisible:s,toggleMenu:l,navContainerRef:c,navListRef:u,searchNode:d}){const{className:f,logo:m={},service:g={},serviceName:y,organisation:h,search:p,account:b,navigation:w,containerClasses:D,variant:S="default",attributes:v={},maxVisibleItems:T,responsiveNavigation:k=!0,...C}=e,x={...g,text:g?.text??y};"maxVisibleItems"in C&&delete C.maxVisibleItems;const I=x.href&&!m.href||x.href&&x.href===m.href,M=I?x.href:m.href,j=we("nhsuk-header",{"nhsuk-header--organisation":S==="organisation"||h,"nhsuk-header--white":S==="white"},f),L=we("nhsuk-header__container",D),N=we("nhsuk-header__navigation",{"nhsuk-header__navigation--white":w?.white,"nhsuk-header__navigation--justified":w?.justified},w?.className),F=()=>o.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":m.ariaLabel||"NHS",children:[o.jsx("title",{children:m.ariaLabel||"NHS"}),o.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),P=()=>m.src?o.jsx("img",{className:"nhsuk-header__organisation-logo",src:m.src,width:"280",alt:m.ariaLabel||"NHS"}):F(),$=()=>h?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"nhsuk-header__organisation-name",children:[h.name,h.split&&o.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",h.split]})]}),h.descriptor&&o.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:h.descriptor})]}):null,ne=(H,z)=>H?z?o.jsx("a",{className:"nhsuk-header__service-name",href:z,children:H}):o.jsx("span",{className:"nhsuk-header__service-name",children:H}):null,X=H=>H.active||H.current?o.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:H.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:H.html}}):H.text}):H.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:H.html}}):H.text,O=()=>o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})});return w?.items,o.jsxs("header",{className:j,role:"banner","data-module":"nhsuk-header",...v,...C,children:[o.jsxs("div",{className:L,children:[o.jsxs("div",{className:"nhsuk-header__service",children:[M?o.jsxs("a",{className:"nhsuk-header__service-logo",href:M,children:[P(),$(),I&&ne(x.text)]}):o.jsxs(o.Fragment,{children:[P(),$(),I&&ne(x.text)]}),x.text&&!I&&ne(x.text,x.href)]}),d??null,o.jsx(Us,{...b,variant:S==="white"?"white":"default"})]}),w&&w.items&&w.items.length>0&&o.jsx("nav",{className:N,"aria-label":w.ariaLabel||"Menu",children:o.jsx("div",{className:we("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--initializing":n&&t==="client","nhsuk-header__navigation-container--ssr":!n},D),ref:c,children:o.jsxs("ul",{className:"nhsuk-header__navigation-list",ref:u,children:[(w?.items||[]).map((H,z)=>o.jsx("li",{className:we("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":H.active||H.current,"nhsuk-header__navigation-item--hidden":i&&a!==void 0&&z>=(a??0)},H.className),...H.attributes||{},children:o.jsx("a",{className:"nhsuk-header__navigation-link",href:H.href,...H.active||H.current?{"aria-current":H.current?"page":"true"}:{},children:X(H)})},z)),i&&a!==void 0&&o.jsx("li",{className:"nhsuk-header__navigation-item nhsuk-header__navigation-item--more",children:o.jsxs("button",{className:"nhsuk-header__navigation-button",id:"toggle-more-menu",type:"button","aria-haspopup":"true","aria-expanded":r?"true":"false","aria-controls":"nhsuk-header-more-menu",onClick:l,children:[o.jsx("span",{children:"More"}),O()]})})]})})}),n&&w&&w.items&&w.items.length>0&&r&&s&&o.jsx("div",{className:"nhsuk-header__dropdown-menu",hidden:!s,id:"nhsuk-header-more-menu",children:o.jsx("ul",{className:"nhsuk-header__dropdown-list",children:w.items.slice(a??0).map((H,z)=>o.jsx("li",{className:we("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":H.active||H.current}),children:o.jsx("a",{className:"nhsuk-header__dropdown-link",href:H.href,...H.active||H.current?{"aria-current":H.current?"page":"true"}:{},onClick:()=>{l?.()},children:X(H)})},`overflow-${(a??0)+z}`))})}),t==="server"]})}const ou=({mode:e="form",action:t="/search",method:n="get",name:r="q",value:i,placeholder:a="Search",visuallyHiddenLabel:s="Search the NHS website",visuallyHiddenButton:l="Search",className:c,disabled:u=!1,callbacks:d={},isLoading:f=!1,showResults:m=!1,results:g=[],formAttributes:y={},inputAttributes:h={},buttonAttributes:p={},preventDefaultSubmit:b=!1,debounceMs:w=300,minQueryLength:D=1})=>{const[S,v]=E.useState(""),[T,k]=E.useState(!1),C=E.useRef(void 0),x=E.useRef(null),I=E.useRef(null),M=e==="controlled"&&i!==void 0,j=M?i:S,L=E.useCallback(re=>{C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{d.onChange&&re.length>=D&&d.onChange(re)},w)},[d.onChange,w,D]),N=E.useCallback(re=>{const U=re.target.value;M||v(U),e!=="form"&&L(U)},[M,e,L]),F=E.useCallback(re=>{const U=j.trim(),de={query:U,timestamp:Date.now(),formData:new FormData(re.currentTarget)};e==="controlled"||e==="hybrid"&&b?(re.preventDefault(),d.onSearch&&U.length>=D&&d.onSearch(de)):e==="hybrid"&&d.onSearch&&U.length>=D&&d.onSearch(de)},[e,j,d.onSearch,b,D]),P=E.useCallback(()=>{k(!0),d.onFocus?.()},[d.onFocus]),$=E.useCallback(()=>{k(!1),d.onBlur?.()},[d.onBlur]),ne=E.useCallback(()=>{M||v(""),d.onClear?.(),I.current?.focus()},[M,d.onClear]);E.useEffect(()=>()=>{C.current&&clearTimeout(C.current)},[]);const X=()=>o.jsx("svg",{className:we("nhsuk-icon nhsuk-icon__search",{"nhsuk-icon__search--loading":f}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"})}),O=()=>o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsxs("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[o.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416",repeatCount:"indefinite"})]})}),H=()=>!j||e==="form"?null:o.jsx("button",{type:"button",className:"nhsuk-header__search-clear",onClick:ne,"aria-label":"Clear search",children:o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__close",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z"})})}),z=()=>!m||!g.length||!T?null:o.jsx("div",{className:"nhsuk-header__search-results",role:"listbox",children:g.map(re=>o.jsx("div",{className:"nhsuk-header__search-result",role:"option",children:re.href?o.jsxs("a",{href:re.href,className:"nhsuk-header__search-result-link",children:[o.jsx("span",{className:"nhsuk-header__search-result-title",children:re.title}),re.description&&o.jsx("span",{className:"nhsuk-header__search-result-description",children:re.description})]}):o.jsxs("button",{type:"button",className:"nhsuk-header__search-result-button",onClick:()=>d.onSearch?.({query:re.title,timestamp:Date.now()}),children:[o.jsx("span",{className:"nhsuk-header__search-result-title",children:re.title}),re.description&&o.jsx("span",{className:"nhsuk-header__search-result-description",children:re.description})]})},re.id))});return o.jsxs("div",{className:we("nhsuk-header__search",c,{"nhsuk-header__search--controlled":e==="controlled","nhsuk-header__search--hybrid":e==="hybrid","nhsuk-header__search--loading":f,"nhsuk-header__search--focused":T,"nhsuk-header__search--has-results":m&&g.length>0}),children:[o.jsxs("form",{ref:x,className:"nhsuk-header__search-form",id:"search",action:e!=="controlled"?t:void 0,method:e!=="controlled"?n:void 0,role:"search",onSubmit:F,...y,children:[o.jsx("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field",children:s}),o.jsxs("div",{className:"nhsuk-header__search-input-wrapper",children:[o.jsx("input",{ref:I,className:"nhsuk-header__search-input nhsuk-input",id:"search-field",name:e!=="controlled"?r:void 0,type:"search",placeholder:a,autoComplete:"off",value:j,onChange:N,onFocus:P,onBlur:$,disabled:u||f,...m&&g.length>0?{"aria-expanded":!0,"aria-haspopup":"listbox"}:{},...h}),H()]}),o.jsxs("button",{className:"nhsuk-header__search-submit",type:"submit",disabled:u||f||e!=="form"&&j.length<D,...p,children:[f?O():X(),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:f?"Searching...":l})]})]}),z()]})},wa=({className:e,logo:t={},service:n={},organisation:r,search:i,account:a,navigation:s,containerClasses:l,variant:c="default",attributes:u={},...d})=>{const[f,m]=E.useState(!1),[g,y]=E.useState(!1),[h,p]=E.useState(s?.items?.length||0),[b,w]=E.useState(!1),[D,S]=E.useState(!1),v=E.useRef(null),T=E.useRef(null),k=E.useRef(!1);E.useEffect(()=>{typeof window>"u"||S(!0)},[]),E.useEffect(()=>{if(typeof document>"u")return;const M=j=>{j.key==="Escape"&&f&&m(!1)};if(f)return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[f]);const C=E.useRef(null),x=E.useCallback(()=>{if(!D||!s?.items||s.items.length===0||k.current)return;const M=v.current,j=T.current;if(!M||!j)return;k.current=!0,M.classList.add("nhsuk-header__navigation-container--measuring");const L=M.clientWidth,N=Array.from(j.children);if(!N.length){M.classList.remove("nhsuk-header__navigation-container--measuring"),k.current=!1;return}if(C.current==null){const U=document.createElement("button");U.type="button",U.className="nhsuk-header__navigation-button nhsuk-header__navigation-button--prototype",U.style.position="absolute",U.style.visibility="hidden",U.style.pointerEvents="none",U.innerHTML="<span>More</span>",M.appendChild(U),C.current=U.getBoundingClientRect().width||104,M.removeChild(U)}const F=C.current+16;let P=0,$=0;const ne=window.getComputedStyle(M),X=parseFloat(ne.paddingLeft)||0,O=parseFloat(ne.paddingRight)||0;let H=X+O;for(const U of N){const de=U.getBoundingClientRect().width;if(P+de+F+H>L)break;P+=de,$+=1}const z=$<s.items.length,re=z?$:s.items.length;y(U=>U===z?U:z),p(U=>U===re?U:re),M.classList.remove("nhsuk-header__navigation-container--measuring"),k.current=!1},[D,s?.items]);E.useEffect(()=>{if(!D)return;const M=v.current;if(!M)return;let j=null;const L=()=>{j==null&&(j=window.requestAnimationFrame(()=>{j=null,x()}))};x();const N=new ResizeObserver(()=>L());return N.observe(M),T.current&&N.observe(T.current),()=>{j!=null&&window.cancelAnimationFrame(j),N.disconnect()}},[D,x]),E.useEffect(()=>{D&&x()},[s?.items?.length,D,x]);const I=M=>{M&&(M.preventDefault(),M.stopPropagation());const j=!f;m(j),w(j)};return Eb({className:e,logo:t,service:n,organisation:r,search:i,account:a,navigation:s,containerClasses:l,variant:c,attributes:u,...d},{variant:"client",isClient:D,menuOpen:f,showMoreButton:g,visibleItems:h,dropdownVisible:b,toggleMenu:I,navContainerRef:v,navListRef:T,searchNode:i?o.jsx(ou,{...i}):null})};function Bb(e,{variant:t,isClient:n}){const{className:r,logo:i={},service:a={},serviceName:s,organisation:l,account:c,navigation:u,containerClasses:d,variant:f="default",attributes:m={},maxVisibleItems:g,responsiveNavigation:y=!0,...h}=e;"maxVisibleItems"in h&&delete h.maxVisibleItems;const p={...a,text:a?.text??s},b=p.href&&!i.href||p.href&&p.href===i.href,w=b?p.href:i.href,D=we("nhsuk-header",{"nhsuk-header--organisation":f==="organisation"||l,"nhsuk-header--white":f==="white"},r),S=we("nhsuk-header__container",d),v=we("nhsuk-header__navigation",{"nhsuk-header__navigation--white":u?.white,"nhsuk-header__navigation--justified":u?.justified},u?.className),T=()=>o.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":i.ariaLabel||"NHS",children:[o.jsx("title",{children:i.ariaLabel||"NHS"}),o.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),k=()=>i.src?o.jsx("img",{className:"nhsuk-header__organisation-logo",src:i.src,width:"280",alt:i.ariaLabel||"NHS"}):T(),C=()=>l?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"nhsuk-header__organisation-name",children:[l.name,l.split&&o.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",l.split]})]}),l.descriptor&&o.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:l.descriptor})]}):null,x=(N,F)=>N?F?o.jsx("a",{className:"nhsuk-header__service-name",href:F,children:N}):o.jsx("span",{className:"nhsuk-header__service-name",children:N}):null,I=N=>N.active||N.current?o.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:N.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:N.html}}):N.text}):N.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:N.html}}):N.text,M=u?.items&&!y,j=M?[]:u?.items,L=M?u.items:[];return o.jsxs("header",{className:D,role:"banner","data-module":"nhsuk-header",...m,...h,children:[o.jsxs("div",{className:S,children:[o.jsxs("div",{className:"nhsuk-header__service",children:[w?o.jsxs("a",{className:"nhsuk-header__service-logo",href:w,children:[k(),C(),b&&x(p.text)]}):o.jsxs(o.Fragment,{children:[k(),C(),b&&x(p.text)]}),p.text&&!b&&x(p.text,p.href)]}),o.jsx(Us,{...c,variant:f==="white"?"white":"default"})]}),u&&u.items&&u.items.length>0&&o.jsx("nav",{className:v,"aria-label":u.ariaLabel||"Menu",children:o.jsx("div",{className:we("nhsuk-header_navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--ssr":!n},d),children:o.jsx("ul",{className:"nhsuk-header__navigation-list",children:(j||[]).map((N,F)=>o.jsx("li",{className:we("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":N.active||N.current},N.className),...N.attributes||{},children:o.jsx("a",{className:"nhsuk-header__navigation-link",href:N.href,...N.active||N.current?{"aria-current":N.current?"page":"true"}:{},children:I(N)})},F))})})}),M&&L.length>0&&o.jsx("div",{className:"nhsuk-header__dropdown-menu","data-ssr-overflow":"true",children:o.jsx("ul",{className:"nhsuk-header__dropdown-list",children:L.map((N,F)=>o.jsx("li",{className:we("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":N.active||N.current}),children:o.jsx("a",{className:"nhsuk-header__dropdown-link",href:N.href,...N.active||N.current?{"aria-current":N.current?"page":"true"}:{},children:I(N)})},`overflow-server-${F}`))})})]})}const Rb=e=>Bb(e,{variant:"server",isClient:!1}),lu=({heading:e,headingLevel:t=1,headingClasses:n="",text:r,html:i,imageURL:a,containerClasses:s="",classes:l="",children:c,...u})=>{const d=["nhsuk-hero",a&&e?"nhsuk-hero--image nhsuk-hero--image-description":"",a&&!e?"nhsuk-hero--image":"",l].filter(Boolean).join(" "),f=["nhsuk-width-container",s,a?"":"nhsuk-hero--border"].filter(Boolean).join(" "),m=["nhsuk-hero__heading",n,!c&&!r&&!i?"nhsuk-u-margin-bottom-0":""].filter(Boolean).join(" "),g=c||e||r||i,y=()=>{if(!e)return null;const h={className:m};switch(t){case 1:return o.jsx("h1",{...h,children:e});case 2:return o.jsx("h2",{...h,children:e});case 3:return o.jsx("h3",{...h,children:e});case 4:return o.jsx("h4",{...h,children:e});case 5:return o.jsx("h5",{...h,children:e});case 6:return o.jsx("h6",{...h,children:e});default:return o.jsx("h1",{...h,children:e})}};return o.jsxs("section",{className:d,style:a?{backgroundImage:`url('${a}')`}:void 0,role:"banner",...u,children:[a&&o.jsx("div",{className:"nhsuk-hero__overlay",children:g&&o.jsx("div",{className:f,children:o.jsx("div",{className:"nhsuk-grid-row",children:o.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:o.jsxs("div",{className:"nhsuk-hero-content",children:[y(),c||(i?o.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):r?o.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null),o.jsx("span",{className:"nhsuk-hero__arrow","aria-hidden":"true"})]})})})})}),!a&&g&&o.jsx("div",{className:f,children:o.jsx("div",{className:"nhsuk-grid-row",children:o.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:o.jsxs("div",{className:"nhsuk-hero__wrapper",children:[y(),c||(i?o.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):r?o.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null)]})})})})]})};lu.displayName="Hero";const Ks=({className:e,links:t=[],linksColumn2:n,linksColumn3:r,metaLinks:i,copyright:a="Â© NHS England",containerClasses:s,attributes:l={},style:c,footerStyle:u,containerStyle:d})=>{const f=(g,y=!1)=>o.jsx("li",{className:we("nhsuk-footer__list-item",{"nhsuk-footer-default__list-item":y}),children:o.jsx("a",{className:"nhsuk-footer__list-item-link",href:g.URL,target:g.newWindow?"_blank":void 0,rel:g.newWindow?"noopener noreferrer":void 0,children:g.label})},`${g.URL}-${g.label}`),m=!!(n||r);return o.jsx("footer",{role:"contentinfo",...l,style:{...l?.style,...c},children:o.jsxs("div",{className:"nhsuk-footer-container",children:[o.jsxs("div",{className:we("nhsuk-width-container",s),style:d,children:[o.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Support links"}),o.jsx("div",{className:we("nhsuk-footer",e),style:u,children:m?o.jsxs(o.Fragment,{children:[t.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:t.map(g=>f(g))}),n&&n.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:n.map(g=>f(g))}),r&&r.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:r.map(g=>f(g))}),i&&i.length>0&&o.jsx("ul",{className:"nhsuk-footer__list nhsuk-footer__meta",children:i.map(g=>f(g))})]}):o.jsxs("ul",{className:"nhsuk-footer__list",children:[t.map(g=>f(g,!0)),(n||[]).map(g=>f(g,!0)),(r||[]).map(g=>f(g,!0)),(i||[]).map(g=>f(g,!0))]})}),!m&&o.jsx("div",{children:o.jsx("p",{className:"nhsuk-footer__copyright",children:a})})]}),m&&o.jsx("div",{className:"nhsuk-width-container",children:o.jsx("div",{children:o.jsx("p",{className:"nhsuk-footer__copyright",children:a})})})]})})};function Sa(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ob(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Js(e){let t,n,r;e.length!==2?(t=Sa,n=(l,c)=>Sa(e(l),c),r=(l,c)=>e(l)-c):(t=e===Sa||e===Ob?e:Hb,n=e,r=e);function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){const f=i(l,c,u,d-1);return f>u&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:i,center:s,right:a}}function Hb(){return 0}function zb(e){return e===null?NaN:+e}const Ub=Js(Sa).right;Js(zb).center;function cu(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class uu extends Map{constructor(t,n=Gb){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(du(this,t))}has(t){return super.has(du(this,t))}set(t,n){return super.set(Wb(this,t),n)}delete(t){return super.delete(Vb(this,t))}}function du({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Wb({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Vb({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Gb(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Yb=Math.sqrt(50),qb=Math.sqrt(10),Xb=Math.sqrt(2);function Ca(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Yb?10:a>=qb?5:a>=Xb?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/s,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*s,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?Ca(e,t,n*2):[l,c,u]}function Zb(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,s]=r?Ca(t,e,n):Ca(e,t,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(r)if(s<0)for(let u=0;u<l;++u)c[u]=(a-u)/-s;else for(let u=0;u<l;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<l;++u)c[u]=(i+u)/-s;else for(let u=0;u<l;++u)c[u]=(i+u)*s;return c}function Qs(e,t,n){return t=+t,e=+e,n=+n,Ca(e,t,n)[2]}function eo(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Qs(t,e,n):Qs(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Kb(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function ka(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const fu=Symbol("implicit");function hu(){var e=new uu,t=[],n=[],r=fu;function i(a){let s=e.get(a);if(s===void 0){if(r!==fu)return r;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new uu;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return hu(t,n).unknown(r)},ka.apply(i,arguments),i}function mu(){var e=hu().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,s,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,g=i<r,y=g?i:r,h=g?r:i;a=(h-y)/Math.max(1,m-c+u*2),l&&(a=Math.floor(a)),y+=(h-y-a*(m-c))*d,s=a*(1-c),l&&(y=Math.round(y),s=Math.round(s));var p=Kb(m).map(function(b){return y+a*b});return n(g?p.reverse():p)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,l=!0,f()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return mu(t(),[r,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},ka.apply(f(),arguments)}function to(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function li(){}var ci=.7,Ta=1/ci,jr="\\s*([+-]?\\d+)\\s*",ui="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jb=/^#([0-9a-f]{3,8})$/,Qb=new RegExp(`^rgb\\(${jr},${jr},${jr}\\)$`),ey=new RegExp(`^rgb\\(${ln},${ln},${ln}\\)$`),ty=new RegExp(`^rgba\\(${jr},${jr},${jr},${ui}\\)$`),ny=new RegExp(`^rgba\\(${ln},${ln},${ln},${ui}\\)$`),ry=new RegExp(`^hsl\\(${ui},${ln},${ln}\\)$`),iy=new RegExp(`^hsla\\(${ui},${ln},${ln},${ui}\\)$`),gu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};to(li,di,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:bu,formatHex:bu,formatHex8:ay,formatHsl:sy,formatRgb:yu,toString:yu});function bu(){return this.rgb().formatHex()}function ay(){return this.rgb().formatHex8()}function sy(){return Su(this).formatHsl()}function yu(){return this.rgb().formatRgb()}function di(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Jb.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?vu(t):n===3?new Ft(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Na(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Na(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Qb.exec(e))?new Ft(t[1],t[2],t[3],1):(t=ey.exec(e))?new Ft(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ty.exec(e))?Na(t[1],t[2],t[3],t[4]):(t=ny.exec(e))?Na(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ry.exec(e))?wu(t[1],t[2]/100,t[3]/100,1):(t=iy.exec(e))?wu(t[1],t[2]/100,t[3]/100,t[4]):gu.hasOwnProperty(e)?vu(gu[e]):e==="transparent"?new Ft(NaN,NaN,NaN,0):null}function vu(e){return new Ft(e>>16&255,e>>8&255,e&255,1)}function Na(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ft(e,t,n,r)}function oy(e){return e instanceof li||(e=di(e)),e?(e=e.rgb(),new Ft(e.r,e.g,e.b,e.opacity)):new Ft}function no(e,t,n,r){return arguments.length===1?oy(e):new Ft(e,t,n,r??1)}function Ft(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}to(Ft,no,pu(li,{brighter(e){return e=e==null?Ta:Math.pow(Ta,e),new Ft(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ci:Math.pow(ci,e),new Ft(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ft(ir(this.r),ir(this.g),ir(this.b),ja(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_u,formatHex:_u,formatHex8:ly,formatRgb:xu,toString:xu}));function _u(){return`#${ar(this.r)}${ar(this.g)}${ar(this.b)}`}function ly(){return`#${ar(this.r)}${ar(this.g)}${ar(this.b)}${ar((isNaN(this.opacity)?1:this.opacity)*255)}`}function xu(){const e=ja(this.opacity);return`${e===1?"rgb(":"rgba("}${ir(this.r)}, ${ir(this.g)}, ${ir(this.b)}${e===1?")":`, ${e})`}`}function ja(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ir(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ar(e){return e=ir(e),(e<16?"0":"")+e.toString(16)}function wu(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new an(e,t,n,r)}function Su(e){if(e instanceof an)return new an(e.h,e.s,e.l,e.opacity);if(e instanceof li||(e=di(e)),!e)return new an;if(e instanceof an)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,l=a-i,c=(a+i)/2;return l?(t===a?s=(n-r)/l+(n<r)*6:n===a?s=(r-t)/l+2:s=(t-n)/l+4,l/=c<.5?a+i:2-a-i,s*=60):l=c>0&&c<1?0:s,new an(s,l,c,e.opacity)}function cy(e,t,n,r){return arguments.length===1?Su(e):new an(e,t,n,r??1)}function an(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}to(an,cy,pu(li,{brighter(e){return e=e==null?Ta:Math.pow(Ta,e),new an(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ci:Math.pow(ci,e),new an(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ft(ro(e>=240?e-240:e+120,i,r),ro(e,i,r),ro(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new an(Cu(this.h),Da(this.s),Da(this.l),ja(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ja(this.opacity);return`${e===1?"hsl(":"hsla("}${Cu(this.h)}, ${Da(this.s)*100}%, ${Da(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Cu(e){return e=(e||0)%360,e<0?e+360:e}function Da(e){return Math.max(0,Math.min(1,e||0))}function ro(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const io=e=>()=>e;function uy(e,t){return function(n){return e+n*t}}function dy(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function fy(e){return(e=+e)==1?ku:function(t,n){return n-t?dy(t,n,e):io(isNaN(t)?n:t)}}function ku(e,t){var n=t-e;return n?uy(e,n):io(isNaN(e)?t:e)}const Tu=(function e(t){var n=fy(t);function r(i,a){var s=n((i=no(i)).r,(a=no(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),u=ku(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=e,r})(1);function hy(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function my(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function py(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=oo(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(l){for(s=0;s<r;++s)a[s]=i[s](l);return a}}function gy(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ma(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function by(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=oo(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var ao=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,so=new RegExp(ao.source,"g");function yy(e){return function(){return e}}function vy(e){return function(t){return e(t)+""}}function _y(e,t){var n=ao.lastIndex=so.lastIndex=0,r,i,a,s=-1,l=[],c=[];for(e=e+"",t=t+"";(r=ao.exec(e))&&(i=so.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:Ma(r,i)})),n=so.lastIndex;return n<t.length&&(a=t.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?vy(c[0].x):yy(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function oo(e,t){var n=typeof t,r;return t==null||n==="boolean"?io(t):(n==="number"?Ma:n==="string"?(r=di(t))?(t=r,Tu):_y:t instanceof di?Tu:t instanceof Date?gy:my(t)?hy:Array.isArray(t)?py:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?by:Ma)(e,t)}function xy(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function wy(e){return function(){return e}}function Sy(e){return+e}var Nu=[0,1];function Dr(e){return e}function lo(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:wy(isNaN(t)?NaN:.5)}function Cy(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function ky(e,t,n){var r=e[0],i=e[1],a=t[0],s=t[1];return i<r?(r=lo(i,r),a=n(s,a)):(r=lo(r,i),a=n(a,s)),function(l){return a(r(l))}}function Ty(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=lo(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(l){var c=Ub(e,l,1,r)-1;return a[c](i[c](l))}}function ju(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ny(){var e=Nu,t=Nu,n=oo,r,i,a,s=Dr,l,c,u;function d(){var m=Math.min(e.length,t.length);return s!==Dr&&(s=Cy(e[0],e[m-1])),l=m>2?Ty:ky,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?a:(c||(c=l(e.map(r),t,n)))(r(s(m)))}return f.invert=function(m){return s(i((u||(u=l(t,e.map(r),Ma)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,Sy),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),n=xy,d()},f.clamp=function(m){return arguments.length?(s=m?!0:Dr,d()):s!==Dr},f.interpolate=function(m){return arguments.length?(n=m,d()):n},f.unknown=function(m){return arguments.length?(a=m,f):a},function(m,g){return r=m,i=g,d()}}function Du(){return Ny()(Dr,Dr)}function jy(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Pa(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Mr(e){return e=Pa(Math.abs(e)),e?e[1]:NaN}function Dy(e,t){return function(n,r){for(var i=n.length,a=[],s=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=e[s=(s+1)%e.length];return a.reverse().join(t)}}function My(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Py=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ia(e){if(!(t=Py.exec(e)))throw new Error("invalid format: "+e);var t;return new co({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ia.prototype=co.prototype;function co(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}co.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Iy(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Mu;function Fy(e,t){var n=Pa(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Mu=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Pa(e,Math.max(0,t+a-1))[0]}function Pu(e,t){var n=Pa(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Iu={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:jy,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Pu(e*100,t),r:Pu,s:Fy,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Fu(e){return e}var $u=Array.prototype.map,Lu=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function $y(e){var t=e.grouping===void 0||e.thousands===void 0?Fu:Dy($u.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Fu:My($u.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"âˆ’":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Ia(f);var m=f.fill,g=f.align,y=f.sign,h=f.symbol,p=f.zero,b=f.width,w=f.comma,D=f.precision,S=f.trim,v=f.type;v==="n"?(w=!0,v="g"):Iu[v]||(D===void 0&&(D=12),S=!0,v="g"),(p||m==="0"&&g==="=")&&(p=!0,m="0",g="=");var T=h==="$"?n:h==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",k=h==="$"?r:/[%p]/.test(v)?s:"",C=Iu[v],x=/[defgprs%]/.test(v);D=D===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function I(M){var j=T,L=k,N,F,P;if(v==="c")L=C(M)+L,M="";else{M=+M;var $=M<0||1/M<0;if(M=isNaN(M)?c:C(Math.abs(M),D),S&&(M=Iy(M)),$&&+M==0&&y!=="+"&&($=!1),j=($?y==="("?y:l:y==="-"||y==="("?"":y)+j,L=(v==="s"?Lu[8+Mu/3]:"")+L+($&&y==="("?")":""),x){for(N=-1,F=M.length;++N<F;)if(P=M.charCodeAt(N),48>P||P>57){L=(P===46?i+M.slice(N+1):M.slice(N))+L,M=M.slice(0,N);break}}}w&&!p&&(M=t(M,1/0));var ne=j.length+M.length+L.length,X=ne<b?new Array(b-ne+1).join(m):"";switch(w&&p&&(M=t(X+M,X.length?b-L.length:1/0),X=""),g){case"<":M=j+M+L+X;break;case"=":M=j+X+M+L;break;case"^":M=X.slice(0,ne=X.length>>1)+j+M+L+X.slice(ne);break;default:M=X+j+M+L;break}return a(M)}return I.toString=function(){return f+""},I}function d(f,m){var g=u((f=Ia(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Mr(m)/3)))*3,h=Math.pow(10,-y),p=Lu[8+y/3];return function(b){return g(h*b)+p}}return{format:u,formatPrefix:d}}var Fa,Au,Eu;Ly({thousands:",",grouping:[3],currency:["$",""]});function Ly(e){return Fa=$y(e),Au=Fa.format,Eu=Fa.formatPrefix,Fa}function Ay(e){return Math.max(0,-Mr(Math.abs(e)))}function Ey(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mr(t)/3)))*3-Mr(Math.abs(e)))}function By(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Mr(t)-Mr(e))+1}function Ry(e,t,n,r){var i=eo(e,t,n),a;switch(r=Ia(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Ey(i,s))&&(r.precision=a),Eu(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=By(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Ay(i))&&(r.precision=a-(r.type==="%")*2);break}}return Au(r)}function Oy(e){var t=e.domain;return e.ticks=function(n){var r=t();return Zb(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Ry(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,s=r[i],l=r[a],c,u,d=10;for(l<s&&(u=s,s=l,l=u,u=i,i=a,a=u);d-- >0;){if(u=Qs(s,l,n),u===c)return r[i]=s,r[a]=l,t(r);if(u>0)s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u;else if(u<0)s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function $a(){var e=Du();return e.copy=function(){return ju(e,$a())},ka.apply(e,arguments),Oy(e)}function Hy(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),e[n]=t.floor(i),e[r]=t.ceil(a),e}const uo=new Date,fo=new Date;function mt(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),l=i.ceil(a);return a-s<l-a?s:l},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return c;let u;do c.push(u=new Date(+a)),t(a,l),e(a);while(u<a&&a<s);return c},i.filter=a=>mt(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!a(s););else for(;--l>=0;)for(;t(s,1),!a(s););}),n&&(i.count=(a,s)=>(uo.setTime(+a),fo.setTime(+s),e(uo),e(fo),Math.floor(n(uo,fo))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const La=mt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);La.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?mt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):La),La.range;const Pn=1e3,Kt=Pn*60,In=Kt*60,Fn=In*24,ho=Fn*7,Bu=Fn*30,mo=Fn*365,Pr=mt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Pn)},(e,t)=>(t-e)/Pn,e=>e.getUTCSeconds());Pr.range;const po=mt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Pn)},(e,t)=>{e.setTime(+e+t*Kt)},(e,t)=>(t-e)/Kt,e=>e.getMinutes());po.range,mt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Kt)},(e,t)=>(t-e)/Kt,e=>e.getUTCMinutes()).range;const go=mt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Pn-e.getMinutes()*Kt)},(e,t)=>{e.setTime(+e+t*In)},(e,t)=>(t-e)/In,e=>e.getHours());go.range,mt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*In)},(e,t)=>(t-e)/In,e=>e.getUTCHours()).range;const fi=mt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kt)/Fn,e=>e.getDate()-1);fi.range;const bo=mt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fn,e=>e.getUTCDate()-1);bo.range,mt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fn,e=>Math.floor(e/Fn)).range;function sr(e){return mt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Kt)/ho)}const Aa=sr(0),Ea=sr(1),zy=sr(2),Uy=sr(3),Ir=sr(4),Wy=sr(5),Vy=sr(6);Aa.range,Ea.range,zy.range,Uy.range,Ir.range,Wy.range,Vy.range;function or(e){return mt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/ho)}const Ru=or(0),Ba=or(1),Gy=or(2),Yy=or(3),Fr=or(4),qy=or(5),Xy=or(6);Ru.range,Ba.range,Gy.range,Yy.range,Fr.range,qy.range,Xy.range;const hi=mt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());hi.range,mt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()).range;const $n=mt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());$n.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:mt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),$n.range;const lr=mt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());lr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:mt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),lr.range;function Zy(e,t,n,r,i,a){const s=[[Pr,1,Pn],[Pr,5,5*Pn],[Pr,15,15*Pn],[Pr,30,30*Pn],[a,1,Kt],[a,5,5*Kt],[a,15,15*Kt],[a,30,30*Kt],[i,1,In],[i,3,3*In],[i,6,6*In],[i,12,12*In],[r,1,Fn],[r,2,2*Fn],[n,1,ho],[t,1,Bu],[t,3,3*Bu],[e,1,mo]];function l(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const g=f&&typeof f.range=="function"?f:c(u,d,f),y=g?g.range(u,+d+1):[];return m?y.reverse():y}function c(u,d,f){const m=Math.abs(d-u)/f,g=Js(([,,p])=>p).right(s,m);if(g===s.length)return e.every(eo(u/mo,d/mo,f));if(g===0)return La.every(Math.max(eo(u,d,f),1));const[y,h]=s[m/s[g-1][2]<s[g][2]/m?g-1:g];return y.every(h)}return[l,c]}const[Ky,Jy]=Zy($n,hi,Aa,fi,go,po);function yo(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function vo(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function mi(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Qy(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,s=e.shortDays,l=e.months,c=e.shortMonths,u=pi(i),d=gi(i),f=pi(a),m=gi(a),g=pi(s),y=gi(s),h=pi(l),p=gi(l),b=pi(c),w=gi(c),D={a:$,A:ne,b:X,B:O,c:null,d:Vu,e:Vu,f:wv,g:Iv,G:$v,H:vv,I:_v,j:xv,L:Gu,m:Sv,M:Cv,p:H,q:z,Q:Ju,s:Qu,S:kv,u:Tv,U:Nv,V:jv,w:Dv,W:Mv,x:null,X:null,y:Pv,Y:Fv,Z:Lv,"%":Ku},S={a:re,A:U,b:de,B:ye,c:null,d:qu,e:qu,f:Rv,g:Xv,G:Kv,H:Av,I:Ev,j:Bv,L:Xu,m:Ov,M:Hv,p:ue,q:ce,Q:Ju,s:Qu,S:zv,u:Uv,U:Wv,V:Vv,w:Gv,W:Yv,x:null,X:null,y:qv,Y:Zv,Z:Jv,"%":Ku},v={a:I,A:M,b:j,B:L,c:N,d:Uu,e:Uu,f:pv,g:zu,G:Hu,H:Wu,I:Wu,j:dv,L:mv,m:uv,M:fv,p:x,q:cv,Q:bv,s:yv,S:hv,u:iv,U:av,V:sv,w:rv,W:ov,x:F,X:P,y:zu,Y:Hu,Z:lv,"%":gv};D.x=T(n,D),D.X=T(r,D),D.c=T(t,D),S.x=T(n,S),S.X=T(r,S),S.c=T(t,S);function T(Q,ie){return function(fe){var Y=[],he=-1,oe=0,ge=Q.length,R,V,le;for(fe instanceof Date||(fe=new Date(+fe));++he<ge;)Q.charCodeAt(he)===37&&(Y.push(Q.slice(oe,he)),(V=Ou[R=Q.charAt(++he)])!=null?R=Q.charAt(++he):V=R==="e"?" ":"0",(le=ie[R])&&(R=le(fe,V)),Y.push(R),oe=he+1);return Y.push(Q.slice(oe,he)),Y.join("")}}function k(Q,ie){return function(fe){var Y=mi(1900,void 0,1),he=C(Y,Q,fe+="",0),oe,ge;if(he!=fe.length)return null;if("Q"in Y)return new Date(Y.Q);if("s"in Y)return new Date(Y.s*1e3+("L"in Y?Y.L:0));if(ie&&!("Z"in Y)&&(Y.Z=0),"p"in Y&&(Y.H=Y.H%12+Y.p*12),Y.m===void 0&&(Y.m="q"in Y?Y.q:0),"V"in Y){if(Y.V<1||Y.V>53)return null;"w"in Y||(Y.w=1),"Z"in Y?(oe=vo(mi(Y.y,0,1)),ge=oe.getUTCDay(),oe=ge>4||ge===0?Ba.ceil(oe):Ba(oe),oe=bo.offset(oe,(Y.V-1)*7),Y.y=oe.getUTCFullYear(),Y.m=oe.getUTCMonth(),Y.d=oe.getUTCDate()+(Y.w+6)%7):(oe=yo(mi(Y.y,0,1)),ge=oe.getDay(),oe=ge>4||ge===0?Ea.ceil(oe):Ea(oe),oe=fi.offset(oe,(Y.V-1)*7),Y.y=oe.getFullYear(),Y.m=oe.getMonth(),Y.d=oe.getDate()+(Y.w+6)%7)}else("W"in Y||"U"in Y)&&("w"in Y||(Y.w="u"in Y?Y.u%7:"W"in Y?1:0),ge="Z"in Y?vo(mi(Y.y,0,1)).getUTCDay():yo(mi(Y.y,0,1)).getDay(),Y.m=0,Y.d="W"in Y?(Y.w+6)%7+Y.W*7-(ge+5)%7:Y.w+Y.U*7-(ge+6)%7);return"Z"in Y?(Y.H+=Y.Z/100|0,Y.M+=Y.Z%100,vo(Y)):yo(Y)}}function C(Q,ie,fe,Y){for(var he=0,oe=ie.length,ge=fe.length,R,V;he<oe;){if(Y>=ge)return-1;if(R=ie.charCodeAt(he++),R===37){if(R=ie.charAt(he++),V=v[R in Ou?ie.charAt(he++):R],!V||(Y=V(Q,fe,Y))<0)return-1}else if(R!=fe.charCodeAt(Y++))return-1}return Y}function x(Q,ie,fe){var Y=u.exec(ie.slice(fe));return Y?(Q.p=d.get(Y[0].toLowerCase()),fe+Y[0].length):-1}function I(Q,ie,fe){var Y=g.exec(ie.slice(fe));return Y?(Q.w=y.get(Y[0].toLowerCase()),fe+Y[0].length):-1}function M(Q,ie,fe){var Y=f.exec(ie.slice(fe));return Y?(Q.w=m.get(Y[0].toLowerCase()),fe+Y[0].length):-1}function j(Q,ie,fe){var Y=b.exec(ie.slice(fe));return Y?(Q.m=w.get(Y[0].toLowerCase()),fe+Y[0].length):-1}function L(Q,ie,fe){var Y=h.exec(ie.slice(fe));return Y?(Q.m=p.get(Y[0].toLowerCase()),fe+Y[0].length):-1}function N(Q,ie,fe){return C(Q,t,ie,fe)}function F(Q,ie,fe){return C(Q,n,ie,fe)}function P(Q,ie,fe){return C(Q,r,ie,fe)}function $(Q){return s[Q.getDay()]}function ne(Q){return a[Q.getDay()]}function X(Q){return c[Q.getMonth()]}function O(Q){return l[Q.getMonth()]}function H(Q){return i[+(Q.getHours()>=12)]}function z(Q){return 1+~~(Q.getMonth()/3)}function re(Q){return s[Q.getUTCDay()]}function U(Q){return a[Q.getUTCDay()]}function de(Q){return c[Q.getUTCMonth()]}function ye(Q){return l[Q.getUTCMonth()]}function ue(Q){return i[+(Q.getUTCHours()>=12)]}function ce(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var ie=T(Q+="",D);return ie.toString=function(){return Q},ie},parse:function(Q){var ie=k(Q+="",!1);return ie.toString=function(){return Q},ie},utcFormat:function(Q){var ie=T(Q+="",S);return ie.toString=function(){return Q},ie},utcParse:function(Q){var ie=k(Q+="",!0);return ie.toString=function(){return Q},ie}}}var Ou={"-":"",_:" ",0:"0"},yt=/^\s*\d+/,ev=/^%/,tv=/[\\^$*+?|[\]().{}]/g;function He(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function nv(e){return e.replace(tv,"\\$&")}function pi(e){return new RegExp("^(?:"+e.map(nv).join("|")+")","i")}function gi(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function rv(e,t,n){var r=yt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function iv(e,t,n){var r=yt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function av(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function sv(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ov(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Hu(e,t,n){var r=yt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function zu(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function lv(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function cv(e,t,n){var r=yt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function uv(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Uu(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function dv(e,t,n){var r=yt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Wu(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function fv(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function hv(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function mv(e,t,n){var r=yt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function pv(e,t,n){var r=yt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function gv(e,t,n){var r=ev.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function bv(e,t,n){var r=yt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function yv(e,t,n){var r=yt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Vu(e,t){return He(e.getDate(),t,2)}function vv(e,t){return He(e.getHours(),t,2)}function _v(e,t){return He(e.getHours()%12||12,t,2)}function xv(e,t){return He(1+fi.count($n(e),e),t,3)}function Gu(e,t){return He(e.getMilliseconds(),t,3)}function wv(e,t){return Gu(e,t)+"000"}function Sv(e,t){return He(e.getMonth()+1,t,2)}function Cv(e,t){return He(e.getMinutes(),t,2)}function kv(e,t){return He(e.getSeconds(),t,2)}function Tv(e){var t=e.getDay();return t===0?7:t}function Nv(e,t){return He(Aa.count($n(e)-1,e),t,2)}function Yu(e){var t=e.getDay();return t>=4||t===0?Ir(e):Ir.ceil(e)}function jv(e,t){return e=Yu(e),He(Ir.count($n(e),e)+($n(e).getDay()===4),t,2)}function Dv(e){return e.getDay()}function Mv(e,t){return He(Ea.count($n(e)-1,e),t,2)}function Pv(e,t){return He(e.getFullYear()%100,t,2)}function Iv(e,t){return e=Yu(e),He(e.getFullYear()%100,t,2)}function Fv(e,t){return He(e.getFullYear()%1e4,t,4)}function $v(e,t){var n=e.getDay();return e=n>=4||n===0?Ir(e):Ir.ceil(e),He(e.getFullYear()%1e4,t,4)}function Lv(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+He(t/60|0,"0",2)+He(t%60,"0",2)}function qu(e,t){return He(e.getUTCDate(),t,2)}function Av(e,t){return He(e.getUTCHours(),t,2)}function Ev(e,t){return He(e.getUTCHours()%12||12,t,2)}function Bv(e,t){return He(1+bo.count(lr(e),e),t,3)}function Xu(e,t){return He(e.getUTCMilliseconds(),t,3)}function Rv(e,t){return Xu(e,t)+"000"}function Ov(e,t){return He(e.getUTCMonth()+1,t,2)}function Hv(e,t){return He(e.getUTCMinutes(),t,2)}function zv(e,t){return He(e.getUTCSeconds(),t,2)}function Uv(e){var t=e.getUTCDay();return t===0?7:t}function Wv(e,t){return He(Ru.count(lr(e)-1,e),t,2)}function Zu(e){var t=e.getUTCDay();return t>=4||t===0?Fr(e):Fr.ceil(e)}function Vv(e,t){return e=Zu(e),He(Fr.count(lr(e),e)+(lr(e).getUTCDay()===4),t,2)}function Gv(e){return e.getUTCDay()}function Yv(e,t){return He(Ba.count(lr(e)-1,e),t,2)}function qv(e,t){return He(e.getUTCFullYear()%100,t,2)}function Xv(e,t){return e=Zu(e),He(e.getUTCFullYear()%100,t,2)}function Zv(e,t){return He(e.getUTCFullYear()%1e4,t,4)}function Kv(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Fr(e):Fr.ceil(e),He(e.getUTCFullYear()%1e4,t,4)}function Jv(){return"+0000"}function Ku(){return"%"}function Ju(e){return+e}function Qu(e){return Math.floor(+e/1e3)}var $r,ed;Qv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qv(e){return $r=Qy(e),ed=$r.format,$r.parse,$r.utcFormat,$r.utcParse,$r}function e_(e){return new Date(e)}function t_(e){return e instanceof Date?+e:+new Date(+e)}function td(e,t,n,r,i,a,s,l,c,u){var d=Du(),f=d.invert,m=d.domain,g=u(".%L"),y=u(":%S"),h=u("%I:%M"),p=u("%I %p"),b=u("%a %d"),w=u("%b %d"),D=u("%B"),S=u("%Y");function v(T){return(c(T)<T?g:l(T)<T?y:s(T)<T?h:a(T)<T?p:r(T)<T?i(T)<T?b:w:n(T)<T?D:S)(T)}return d.invert=function(T){return new Date(f(T))},d.domain=function(T){return arguments.length?m(Array.from(T,t_)):m().map(e_)},d.ticks=function(T){var k=m();return e(k[0],k[k.length-1],T??10)},d.tickFormat=function(T,k){return k==null?v:u(k)},d.nice=function(T){var k=m();return(!T||typeof T.range!="function")&&(T=t(k[0],k[k.length-1],T??10)),T?m(Hy(k,T)):d},d.copy=function(){return ju(d,td(e,t,n,r,i,a,s,l,c,u))},d}function _o(){return ka.apply(td(Ky,Jy,$n,hi,Aa,fi,go,po,Pr,ed).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function n_({task:e,scale:t,onTaskClick:n,onTaskDoubleClick:r,isSelected:i=!1,taskIndex:a,tabIndex:s=-1,onFocus:l,"aria-label":c}){const u=E.useRef(null),[d,f]=E.useState(!1),[m,g]=E.useState(!1),y=t(e.start),h=t(e.end),p=Math.max(h-y,20),b=()=>{if(e.color)return e.color;switch(e.priority){case"high":return"#d5281b";case"medium":return"#005eb8";case"low":return"#007f3b";default:return"#005eb8"}},w=e.progress?p*e.progress/100:0,D=()=>{n?.(e)},S=()=>{r?.(e)},v=j=>{j.key==="Enter"?(j.preventDefault(),D()):j.key===" "&&(j.preventDefault(),S())},T=()=>{f(!0)},k=()=>{f(!1)},C=()=>{g(!0),l?.()},x=()=>{g(!1)},I=["gantt-task-bar",d&&"gantt-task-bar--pressed",(m||i)&&"gantt-task-bar--focused",e.priority&&`gantt-task-bar--priority-${e.priority}`,i&&"gantt-task-bar--selected",e.type&&`gantt-task-bar--type-${e.type}`].filter(Boolean).join(" "),M={"--task-left":`${y}px`,"--task-width":`${p}px`,"--task-color":b(),left:`${y}px`,width:`${p}px`,backgroundColor:b()};return o.jsxs("div",{role:"button",tabIndex:s,ref:u,"data-task-index":a,className:I,style:M,onClick:D,onDoubleClick:S,onKeyDown:v,onMouseDown:T,onMouseUp:k,onFocus:C,onBlur:x,"aria-label":c||`${i?"Selected: ":""}${e.title}: ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.priority?`, priority ${e.priority}`:""}${e.progress?`, ${e.progress}% complete`:""}`,"aria-describedby":`task-${e.id}-details`,children:[o.jsx("span",{className:"task-title",children:e.title}),e.progress!==void 0&&o.jsx("div",{className:"task-progress",style:{width:`${w}px`}}),o.jsx("span",{id:`task-${e.id}-details`,className:"sr-only",children:`Task: ${e.title}, from ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.progress?`, ${e.progress}% complete`:""}${e.priority?`, priority: ${e.priority}`:""}`})]})}function r_({viewStart:e,viewEnd:t,dateCount:n}){const r=[];for(let g=e.getTime();g<=t.getTime();g+=864e5)r.push(new Date(g));const a=new Date;a.setHours(0,0,0,0);const[s,l]=E.useState(-1),c=E.useRef(null),u=g=>{if(g.key==="ArrowLeft"){g.preventDefault();const y=Math.max(0,s===-1?0:s-1);l(y),m(y)}else if(g.key==="ArrowRight"){g.preventDefault();const y=Math.min(r.length-1,s===-1?0:s+1);l(y),m(y)}else if(g.key==="ArrowDown")g.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .timeline-container"):null)?.focus();else if(g.key==="Home")g.preventDefault(),l(0),m(0);else if(g.key==="End"){g.preventDefault();const y=r.length-1;l(y),m(y)}},d=g=>{if(g.key==="ArrowDown")g.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .resource-label"):null)?.focus();else if(g.key==="ArrowRight"){g.preventDefault();const y=c.current;y&&y.focus()}},f=()=>{s===-1&&(l(0),setTimeout(()=>m(0),0))},m=g=>{const y=c.current?.querySelector(`[data-date-index="${g}"]`);y&&y.focus()};return o.jsxs("div",{className:"gantt-header",role:"row","aria-rowindex":1,children:[o.jsx("div",{className:"header-resource",role:"columnheader","aria-colindex":1,tabIndex:0,"aria-label":"Resource column header",onKeyDown:d,children:"Resources"}),o.jsx("div",{ref:c,className:"header-timeline",role:"columnheader","aria-colindex":2,"aria-colspan":n,"aria-label":`Timeline from ${e.toLocaleDateString()} to ${t.toLocaleDateString()}. Use arrow keys to navigate between dates`,tabIndex:0,onKeyDown:u,onFocus:f,children:r.map((g,y)=>{const h=g.getTime()===a.getTime(),p=s===y;return o.jsx("div",{"data-date-index":y,className:`date-column ${h?"today":""} ${p?"focused":""}`,tabIndex:p?0:-1,role:"button","aria-label":`${g.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}${h?" (Today)":""}`,onFocus:()=>l(y),onKeyDown:u,children:g.toLocaleDateString("en-GB",{day:"numeric",month:"short"})},y)})})]})}function i_({resource:e,tasks:t,scale:n,onTaskClick:r,onTaskDoubleClick:i,rowIndex:a,dateCount:s}){const[l,c]=E.useState(!1),[u,d]=E.useState(-1),f=E.useRef(null);E.useEffect(()=>{l&&u>=0&&t.length>0&&setTimeout(()=>{f.current?.querySelector(`[data-task-index="${u}"]`)?.focus()},0)},[l,u,t.length]);const m=h=>{if(h.key==="ArrowLeft"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(h.key==="ArrowRight"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!l){switch(h.key){case"ArrowUp":h.preventDefault(),a===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-timeline"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+1}"] .timeline-container`):null)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+3}"] .timeline-container`):null)?.focus();break;case"ArrowLeft":h.preventDefault(),f.current?.closest(".gantt-row")?.querySelector(".resource-label")?.focus();break;case"Enter":t.length>0&&(h.preventDefault(),c(!0),d(0));break}return}switch(h.key){case"ArrowLeft":h.preventDefault();const p=Math.max(0,u-1);d(p),f.current?.querySelector(`[data-task-index="${p}"]`)?.focus();break;case"ArrowRight":h.preventDefault();const w=Math.min(t.length-1,u+1);d(w),f.current?.querySelector(`[data-task-index="${w}"]`)?.focus();break;case"Enter":h.preventDefault(),u>=0&&r?.(t[u]);break;case" ":h.preventDefault(),u>=0&&i?.(t[u]);break;case"Escape":h.preventDefault(),c(!1),d(-1),f.current?.focus();break}},g=h=>{switch(h.key){case"ArrowUp":h.preventDefault(),a===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-resource"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+1}"] .resource-label`):null)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+3}"] .resource-label`):null)?.focus();break;case"ArrowRight":h.preventDefault(),f.current?.focus();break}},y=h=>{l&&d(h)};return o.jsxs("div",{className:"gantt-row",role:"row","aria-rowindex":a+2,children:[o.jsx("div",{className:"resource-label",role:"gridcell","aria-colindex":1,tabIndex:0,"aria-label":`Resource: ${e.label}`,onKeyDown:g,children:e.label}),o.jsx("div",{ref:f,className:`timeline-container ${l?"timeline-active":""}`,role:"gridcell","aria-colindex":2,"aria-colspan":s,tabIndex:0,"aria-label":`Timeline for ${e.label} with ${t.length} task${t.length!==1?"s":""}. Press Enter to activate task navigation, then use arrow keys to navigate, Enter to select, Space to activate, Escape to exit`,onKeyDown:m,onFocus:()=>{l||d(-1)},children:t.map((h,p)=>o.jsx(n_,{task:h,scale:n,onTaskClick:r,onTaskDoubleClick:i,isSelected:l&&u===p,taskIndex:p,tabIndex:l&&u===p?0:-1,onFocus:()=>y(p)},h.id))})]})}function a_({resources:e,tasks:t=[],viewStart:n,viewEnd:r,onTaskClick:i,onTaskDoubleClick:a}){const s=E.useRef(null),[l,c]=E.useState(800),u=E.useMemo(()=>{if(n instanceof Date)return isNaN(n.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):n;const h=new Date(n);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):h},[n]),d=E.useMemo(()=>{if(r instanceof Date)return isNaN(r.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):r;const h=new Date(r);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):h},[r]),f=E.useMemo(()=>Math.ceil((d.getTime()-u.getTime())/864e5)+1,[u,d]);E.useEffect(()=>{if(!s.current||typeof window>"u")return;const h=typeof ResizeObserver<"u"?ResizeObserver:void 0;if(!h)return;const p=new h(b=>{const w=b[0];w&&c(Math.max(w.contentRect.width-220,400))});return p.observe(s.current),()=>p.disconnect()},[]);const m=E.useMemo(()=>_o().domain([u,d]).range([0,l]),[u,d,l]),g=E.useMemo(()=>{const h=new Map;return t.forEach(p=>{const b=h.get(p.resourceId)||[];b.push(p),h.set(p.resourceId,b)}),h},[t]),y=h=>{if(h.target===h.currentTarget)switch(h.key){case"ArrowDown":h.preventDefault(),typeof document<"u"&&s.current?.querySelector(".gantt-row .resource-label")?.focus();break;case"Home":h.preventDefault(),typeof document<"u"&&s.current?.querySelector(".header-resource")?.focus();break}};return o.jsxs("div",{className:"gantt-chart",role:"grid","aria-label":"Gantt Chart showing resource scheduling and task timelines","aria-rowcount":e.length+1,"aria-colcount":f+1,"aria-description":"Use arrow keys to navigate cells, Tab to cycle through tasks in timeline rows or dates in header, Enter to select task, Space to activate task, Alt+arrows to scroll the grid, Shift+arrows to scroll timeline rows",tabIndex:0,onKeyDown:y,children:[o.jsx(r_,{viewStart:u,viewEnd:d,dateCount:f}),o.jsx("div",{ref:s,className:"gantt-grid",role:"rowgroup","aria-label":"Gantt chart data rows",tabIndex:0,onKeyDown:h=>{h.key==="ArrowLeft"&&h.altKey?(h.preventDefault(),s.current?.scrollBy({left:-50,behavior:"smooth"})):h.key==="ArrowRight"&&h.altKey?(h.preventDefault(),s.current?.scrollBy({left:50,behavior:"smooth"})):h.key==="ArrowUp"&&h.altKey?(h.preventDefault(),s.current?.scrollBy({top:-50,behavior:"smooth"})):h.key==="ArrowDown"&&h.altKey&&(h.preventDefault(),s.current?.scrollBy({top:50,behavior:"smooth"}))},children:e.map((h,p)=>o.jsx(i_,{resource:h,tasks:g.get(h.id)||[],scale:m,onTaskClick:i,onTaskDoubleClick:a,rowIndex:p,dateCount:f},h.id))})]})}const Ra=({children:e,href:t,active:n=!1,attributes:r={}})=>o.jsx("li",{className:"nhsuk-breadcrumb__item",children:n?o.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",...r,children:e}):o.jsx("a",{className:"nhsuk-breadcrumb__link",href:t,...r,children:e})}),nd=({items:e=[],children:t,classes:n,labelText:r="Breadcrumb",href:i,text:a,reverse:s=!1,attributes:l={}})=>{const c=()=>t?E.Children.toArray(t).filter(p=>E.isValidElement(p)&&(p.type===Ra||p.type?.displayName==="BreadcrumbItem")).map(p=>({text:typeof p.props.children=="string"?p.props.children:String(p.props.children),href:p.props.href,active:p.props.active,attributes:p.props.attributes})):[],u=()=>t?c():i&&a?[{href:i,text:a}]:e,d=()=>{const h=u();if(h&&h.length>0){const p=h.slice().reverse().find(b=>b.href&&!b.active);if(p)return{href:p.href,text:p.text}}return{text:"Home"}},f=u(),m=d(),g=we("nhsuk-breadcrumb",{"nhsuk-breadcrumb--reverse":s},n),y=r;return o.jsxs("nav",{className:g,"aria-label":y,role:"navigation",...l,children:[o.jsx("ol",{className:"nhsuk-breadcrumb__list",role:"list",children:t?E.Children.map(t,(h,p)=>E.isValidElement(h)&&(h.type===Ra||h.type?.displayName==="BreadcrumbItem")?E.cloneElement(h,{key:p}):null):f?.filter(h=>h.active||!!h.href).map((h,p)=>o.jsx("li",{className:"nhsuk-breadcrumb__item",role:"listitem",children:h.active?o.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",role:"text",...h.attributes||{},children:h.text}):o.jsx("a",{className:"nhsuk-breadcrumb__link",href:h.href,role:"link",...h.attributes||{},children:h.text})},p))}),m.href&&o.jsx("p",{className:"nhsuk-breadcrumb__back",children:o.jsxs("a",{className:"nhsuk-breadcrumb__backlink",href:m.href,role:"link","aria-label":`Back to ${m.text}`,...e.length>0?e[e.length-1]?.attributes||{}:{},children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Back to Â "}),m.text]})})]})};nd.Item=Ra,Ra.displayName="BreadcrumbItem";const xo=({text:e="Skip to main content",href:t="#maincontent",classes:n,attributes:r={}})=>{const[i,a]=E.useState(!1);E.useEffect(()=>{a(!0)},[]),E.useEffect(()=>{if(typeof window>"u"||typeof document>"u"||!document.querySelector||!document.querySelectorAll)return;const l=c=>{const u=c.target,d=u.getAttribute("href");if(d&&d.startsWith("#")){const f=typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(d):null;if(f){f.hasAttribute("tabindex")||f.setAttribute("tabindex","-1"),f.focus(),f.classList.add("nhsuk-skip-link-focused-element");const m=window.setTimeout(()=>{f.classList.remove("nhsuk-skip-link-focused-element"),f.getAttribute("tabindex")==="-1"&&f.removeAttribute("tabindex")},3e3);u.__nhsSkipLinkTimeout=m}}};try{const c=document.querySelectorAll(".nhsuk-skip-link");return c.forEach(u=>{u.addEventListener("click",l)}),()=>{try{c.forEach(u=>{u.removeEventListener("click",l);const d=u.__nhsSkipLinkTimeout;d&&window.clearTimeout&&window.clearTimeout(d)})}catch(u){console.warn("SkipLink cleanup error:",u)}}}catch(c){return console.warn("SkipLink initialization error:",c),()=>{}}},[i]);const s=we("nhsuk-skip-link",n);return o.jsx("a",{className:s,href:t,"data-module":"nhsuk-skip-link","data-enhanced":i?"true":"false",...r,children:e})},s_=({previousUrl:e,previousPage:t,nextUrl:n,nextPage:r,classes:i,attributes:a={}})=>{const s=we("nhsuk-pagination",i);return o.jsx("nav",{className:s,role:"navigation","aria-label":"Pagination",...a,children:o.jsxs("ul",{className:"nhsuk-list nhsuk-pagination__list",children:[e&&t&&o.jsx("li",{className:"nhsuk-pagination-item--previous",children:o.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--prev",href:e,children:[o.jsx("span",{className:"nhsuk-pagination__title",children:"Previous"}),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),o.jsx("span",{className:"nhsuk-pagination__page",children:t}),o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{d:"M4.1 12.3l2.7 3c.2.2.5.2.7 0 .1-.1.1-.2.1-.3v-2h11c.6 0 1-.4 1-1s-.4-1-1-1h-11V9c0-.2-.1-.4-.3-.5h-.2c-.1 0-.3.1-.4.2l-2.7 3c0 .2 0 .4.1.6z"})})]})}),n&&r&&o.jsx("li",{className:"nhsuk-pagination-item--next",children:o.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--next",href:n,children:[o.jsx("span",{className:"nhsuk-pagination__title",children:"Next"}),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),o.jsx("span",{className:"nhsuk-pagination__page",children:r}),o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{d:"M19.6 11.66l-2.73-3A.51.51 0 0 0 16 9v2H5a1 1 0 0 0 0 2h11v2a.5.5 0 0 0 .32.46.39.39 0 0 0 .18 0 .52.52 0 0 0 .37-.16l2.73-3a.5.5 0 0 0 0-.64z"})})]})})]})})},o_=({items:e,classes:t,ariaLabel:n="Pages in this guide",attributes:r={}})=>{const i=we("nhsuk-contents-list",t),a=(s,l)=>s.current?o.jsx("li",{className:"nhsuk-contents-list__item","aria-current":"page",...s.attributes||{},children:o.jsx("span",{className:"nhsuk-contents-list__current",children:s.text})},l):o.jsx("li",{className:"nhsuk-contents-list__item",children:o.jsx("a",{className:"nhsuk-contents-list__link",href:s.href,...s.attributes||{},children:s.text})},l);return o.jsxs("nav",{className:i,role:"navigation","aria-label":n,...r,children:[o.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Contents"}),o.jsx("ol",{className:"nhsuk-contents-list__list",children:e.map((s,l)=>a(s,l))})]})},wo=E.forwardRef(({variant:e="default",heading:t,headingHtml:n,headingLevel:r=2,headingClasses:i,description:a,descriptionHtml:s,href:l,imgURL:c,imgAlt:u,...d},f)=>{const m=["nhsuk-card",e==="clickable"&&"nhsuk-card--clickable",e==="secondary"&&"nhsuk-card--secondary",e==="feature"&&"nhsuk-card--feature",d.className].filter(Boolean).join(" "),g=["nhsuk-card__content",e==="feature"&&"nhsuk-card__content--feature",e==="primary"&&"nhsuk-card__content--primary",e==="secondary"&&"nhsuk-card__content--secondary"].filter(Boolean).join(" "),y=["nhsuk-card__heading",e==="feature"&&"nhsuk-card__heading--feature",i].filter(Boolean).join(" "),h=()=>{if(n)return o.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const w=()=>l&&e!=="feature"?o.jsx("a",{className:"nhsuk-card__link",href:l,children:t}):t;return o.jsx(on,{level:r,className:y,children:w()})},p=()=>d.children?d.children:s?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):a?o.jsx("p",{className:"nhsuk-card__description",children:a}):null,b=()=>e!=="primary"?null:o.jsxs("svg",{className:"nhsuk-icon",xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27","aria-hidden":"true",focusable:"false",children:[o.jsx("circle",{cx:"13.333",cy:"13.333",r:"13.333",fill:""}),o.jsxs("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2.667",children:[o.jsx("path",{d:"M15.438 13l-3.771 3.771"}),o.jsx("path",{d:"M11.667 9.229L15.438 13"})]})]});return o.jsxs("div",{...d,className:m,ref:f,children:[c&&o.jsx("img",{className:"nhsuk-card__img",src:c,alt:u||""}),o.jsxs("div",{className:g,children:[h(),p(),b()]})]})});wo.displayName="Card";const l_=({className:e,children:t,"data-testid":n,id:r})=>{const i=["nhsuk-card-group",e].filter(Boolean).join(" ");return o.jsx("ul",{className:i,"data-testid":n,id:r,children:t})},c_=({className:e,children:t,"data-testid":n})=>{const r=["nhsuk-card-group__item",e].filter(Boolean).join(" ");return o.jsx("li",{className:r,"data-testid":n,children:t})},u_=({type:e,heading:t,headingHtml:n,headingLevel:r=3,headingClasses:i,description:a,descriptionHtml:s,className:l,children:c,"data-testid":u,id:d,"aria-label":f,"aria-labelledby":m,"aria-describedby":g})=>{const y=["nhsuk-care-card",`nhsuk-care-card--${e}`,l].filter(Boolean).join(" "),h=["nhsuk-care-card__heading",i].filter(Boolean).join(" "),p=()=>{if(n)return o.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const w={"non-urgent":"Non-urgent advice:",urgent:"Urgent advice:",emergency:"Immediate action required:"}[e],D=o.jsxs("span",{role:"text",children:[o.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[w," "]}),t]});return o.jsx(on,{level:r,className:h,children:D})},b=()=>c||(s?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):a?o.jsx("p",{className:"nhsuk-care-card__text",children:a}):null);return o.jsxs("div",{className:y,"data-testid":u,id:d,"aria-label":f,"aria-labelledby":m,"aria-describedby":g,children:[o.jsxs("div",{className:"nhsuk-care-card__heading-container",children:[p(),o.jsx("span",{className:"nhsuk-care-card__arrow","aria-hidden":"true"})]}),o.jsx("div",{className:"nhsuk-care-card__content",children:b()})]})},rd=({id:e,className:t,headingText:n,headingHtml:r,headingLevel:i=2,bodyText:a,bodyHtml:s,children:l,...c})=>{const u=we("nhsuk-panel",t),d=()=>!n&&!r&&!l?null:r?o.jsx(on,{level:i,className:"nhsuk-panel__heading",html:r,marginBottom:"var(--panel-heading-margin, 24px)"}):n?o.jsx(on,{level:i,className:"nhsuk-panel__heading",text:n,marginBottom:"var(--panel-heading-margin, 24px)"}):null,f=()=>l?o.jsx("div",{className:"nhsuk-panel__body",children:l}):s?o.jsx("div",{className:"nhsuk-panel__body",dangerouslySetInnerHTML:{__html:s}}):a?o.jsx("div",{className:"nhsuk-panel__body",children:o.jsx("p",{children:a})}):null;return o.jsxs("div",{className:u,id:e,...c,children:[d(),f()]})},d_=({text:e,html:t,children:n,className:r,...i})=>{const a=we("nhsuk-inset-text",r),s=()=>n||(t?o.jsx("div",{dangerouslySetInnerHTML:{__html:t}}):e?o.jsx("p",{children:e}):null);return o.jsx("div",{className:a,...i,children:s()})},f_=({items:e,noBorder:t=!1,className:n,...r})=>{const i=we("nhsuk-summary-list",{"nhsuk-summary-list--no-border":t},n),a=l=>l.children?l.children:l.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text?l.text:null,s=l=>!l||!l.items.length?null:o.jsx("dd",{className:"nhsuk-summary-list__actions",children:o.jsx("ul",{className:"nhsuk-summary-list__actions-list",children:l.items.map((c,u)=>o.jsx("li",{className:"nhsuk-summary-list__actions-list-item",children:o.jsxs("a",{href:c.href,className:"nhsuk-link",...c.attributes,children:[a(c),c.visuallyHiddenText&&o.jsx("span",{className:"nhsuk-u-visually-hidden",children:c.visuallyHiddenText})]})},u))})});return o.jsx("div",{className:"nhsuk-summary-list-container",children:o.jsx("dl",{className:i,...r,children:e.map((l,c)=>o.jsxs("div",{className:"nhsuk-summary-list__row",children:[o.jsx("dt",{className:"nhsuk-summary-list__key",children:a(l.key)}),o.jsx("dd",{className:"nhsuk-summary-list__value",children:a(l.value)}),s(l.actions)]},c))})})},bi={current:null},h_=()=>{if(bi.current)return bi.current;try{bi.current=require("prismjs");try{require("prismjs/components/prism-typescript")}catch{}try{require("prismjs/components/prism-tsx")}catch{}try{require("prismjs/components/prism-json")}catch{}}catch{bi.current=null}return bi.current},m_=e=>{const t=[{regex:/\b(import|from|export|const|let|var|return|if|else|for|while|switch|case|break|new|throw|try|catch|finally|class|extends|implements|interface|type|as|async|await|function)\b/g,cls:"kw"},{regex:/(['"`])(?:\\.|(?!\1).)*\1/g,cls:"str"},{regex:/\/\*[^]*?\*\/|\/\/.*$/gm,cls:"com"},{regex:/\b([0-9]+(?:\.[0-9]+)?)\b/g,cls:"num"}];let n=e;return t.forEach(r=>{n=n.replace(r.regex,i=>`<span class="nhsuk-code-${r.cls}">${i}</span>`)}),n},Oa=(e,t,n)=>{if(n||!t)return e;const r=h_();if(r&&r.languages){const i=r.languages[t]?t:r.languages.typescript&&(t==="ts"||t==="tsx"||t==="typescript")?"typescript":r.languages.json&&t==="json"?"json":void 0;if(i)try{return r.highlight(e,r.languages[i],i)}catch{}}return m_(e)},p_=({rows:e,head:t,caption:n,captionSize:r,firstCellIsHeader:i=!1,responsive:a=!1,heading:s,headingLevel:l=3,panel:c=!1,panelClasses:u,tableClasses:d,classes:f,attributes:m,"data-testid":g,columns:y,data:h,visuallyHiddenCaption:p=!1})=>{const b=`nhsuk-table__caption ${r?`nhsuk-table__caption--${r}`:""}`.trim(),w=we("nhsuk-table",{"nhsuk-table-responsive":a},d),D=we(f),S=(x,I)=>{const M=we("nhsuk-table__header",{[`nhsuk-table__header--${x.format}`]:x.format},x.classes),j={scope:"col",...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...a&&{role:"columnheader"},...x.attributes};let L;if(x.node!=null)L=o.jsx(o.Fragment,{children:x.node});else if(x.html)L=o.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const N=Array.isArray(x.code),F=N?x.code.join(`
`):x.code,P=N||F.includes(`
`),$={className:we("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":P,"nhsuk-table__code--inline":!P}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},ne=Oa(F,x.codeLanguage);L=P?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...$,dangerouslySetInnerHTML:{__html:ne}})}):o.jsx("code",{...$,dangerouslySetInnerHTML:{__html:ne}})}else L=x.text;return o.jsx("th",{className:M,...j,children:L},I)},v=(x,I,M)=>{const j=i&&M||x.rowHeader,L=we(j?"nhsuk-table__header":"nhsuk-table__cell",{[`nhsuk-table__${j?"header":"cell"}--${x.format}`]:x.format},x.classes),N={...j&&{scope:"row"},...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...a&&{role:j?"rowheader":"cell",...x.header&&{"data-label":x.header}},...x.attributes};let F;if(x.node!=null)F=o.jsx(o.Fragment,{children:x.node});else if(x.html)F=o.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const ne=Array.isArray(x.code),X=ne?x.code.join(`
`):x.code,O=ne||X.includes(`
`),H={className:we("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":O,"nhsuk-table__code--inline":!O}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},z=Oa(X,x.codeLanguage,x.disableHighlight);F=O?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...H,dangerouslySetInnerHTML:{__html:z}})}):o.jsx("code",{...H,dangerouslySetInnerHTML:{__html:z}})}else F=x.text;const P=o.jsxs(o.Fragment,{children:[a&&x.header&&o.jsxs("span",{className:"nhsuk-table-responsive__heading","aria-hidden":"true",children:[x.header," "]}),F]}),$=j?"th":"td";return o.jsx($,{className:L,...N,children:P},I)};let T=t,k=e;!T&&y&&y.length&&(T=y.map(x=>({text:x.title,format:x.format,classes:x.headerClasses,attributes:x.headerAttributes}))),!k&&y&&h&&h.length&&(k=h.map((x,I)=>y.map(M=>{const j=M.accessor?M.accessor(x,I):x[M.key];let L={format:M.format,classes:M.cellClasses,attributes:M.cellAttributes};if(M.rowHeader&&(L.rowHeader=!0),M.render){const N=M.render(j,x,I,M);return N==null||typeof N=="boolean"?{...L,text:""}:typeof N=="string"||typeof N=="number"?{...L,text:String(N)}:{...L,...N}}return{...L,text:j!=null?String(j):""}})));const C=()=>o.jsxs("table",{className:w,...a&&{role:"table"},...m,...g&&{"data-testid":g},children:[n&&o.jsx("caption",{className:we(b,p&&"nhsuk-u-visually-hidden"),children:n}),T&&T.length>0&&o.jsx("thead",{className:"nhsuk-table__head",...a&&{role:"rowgroup"},children:o.jsx("tr",{...a&&{role:"row"},children:T.map((x,I)=>S(x,I))})}),o.jsx("tbody",{className:"nhsuk-table__body",children:k&&k.map((x,I)=>o.jsx("tr",{className:"nhsuk-table__row",...a&&{role:"row"},children:x.map((M,j)=>v(M,j,j===0))},I))})]});return c?o.jsxs(rd,{className:u,children:[s&&o.jsx(on,{level:l,className:"nhsuk-table__heading-tab",children:s}),C()]}):D?o.jsx("div",{className:D,children:C()}):C()},g_=({children:e,size:t,className:n})=>{const r=we("nhsuk-table__caption",t&&`nhsuk-table__caption--${t}`,n);return o.jsx("caption",{className:r,children:e})},id=({responsive:e,className:t,children:n,...r})=>{const i=e?{role:"row"}:{};return o.jsx("tr",{className:t,...i,...r,children:n})},ad=({text:e,html:t,node:n,code:r,codeLanguage:i,codeClassName:a,disableHighlight:s,format:l,classes:c,colspan:u,rowspan:d,attributes:f,responsive:m,as:g="th"})=>{const y=we("nhsuk-table__header",{[`nhsuk-table__header--${l}`]:l},c),h={scope:"col",...u&&{colSpan:u},...d&&{rowSpan:d},...m&&{role:"columnheader"},...f};let p;if(n!=null)p=o.jsx(o.Fragment,{children:n});else if(t)p=o.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const w=Array.isArray(r),D=w?r.join(`
`):r,S=w||D.includes(`
`),v={className:we("nhsuk-table__code",a,{"nhsuk-table__code--block":S,"nhsuk-table__code--inline":!S}),...i?{"data-language":i}:{}},T=Oa(D,i,s);p=S?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...v,dangerouslySetInnerHTML:{__html:T}})}):o.jsx("code",{...v,dangerouslySetInnerHTML:{__html:T}})}else p=e;const b=g;return o.jsx(b,{className:y,...h,children:p})},b_=({text:e,html:t,node:n,code:r,codeLanguage:i,codeClassName:a,disableHighlight:s,format:l,classes:c,colspan:u,rowspan:d,attributes:f,responsive:m,rowHeader:g})=>{const y=!!g,h=y?"th":"td",p=we(y?"nhsuk-table__header":"nhsuk-table__cell",l&&`nhsuk-table__${y?"header":"cell"}--${l}`,c),b={...u&&{colSpan:u},...d&&{rowSpan:d},...y&&{scope:"row"},...m&&{role:y?"rowheader":"cell"},...f};let w;if(n!=null)w=o.jsx(o.Fragment,{children:n});else if(t)w=o.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const D=Array.isArray(r),S=D?r.join(`
`):r,v=D||S.includes(`
`),T={className:we("nhsuk-table__code",a,{"nhsuk-table__code--block":v,"nhsuk-table__code--inline":!v}),...i?{"data-language":i}:{}},k=Oa(S,i,s);w=v?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...T,dangerouslySetInnerHTML:{__html:k}})}):o.jsx("code",{...T,dangerouslySetInnerHTML:{__html:k}})}else w=e;return o.jsx(h,{className:p,...b,children:w})},cn=p_;cn.Caption=g_,cn.BodyRow=id,cn.HeaderCell=ad,cn.Cell=b_;let sd=!1,od=!1;Object.defineProperty(cn,"Row",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!sd&&(console.warn("Table.Row is deprecated. Use Table.BodyRow instead."),sd=!0),id}}),Object.defineProperty(cn,"TH",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!od&&(console.warn("Table.TH is deprecated. Use Table.HeaderCell instead."),od=!0),ad}});const y_=E.forwardRef(({items:e,defaultActiveTab:t,activeTab:n,onTabChange:r,onTabFocus:i,onTabListBlur:a,onEscape:s,autoActivate:l=!0,className:c,id:u,"data-testid":d,...f},m)=>{const g=n!==void 0,[y,h]=E.useState(()=>t||e[0]?.id||""),p=g?n:y,b=E.useRef(null),w=E.useRef(new Map),D=E.useCallback(I=>{g||h(I),r?.(I)},[g,r]),S=E.useCallback(I=>{i?.(I),l&&D(I)},[i,l,D]),v=E.useCallback((I,M)=>{const j=e.filter(F=>!F.disabled).map(F=>F.id),L=j.indexOf(M);let N=null;switch(I.key){case"ArrowLeft":N=L>0?L-1:j.length-1;break;case"ArrowRight":N=L<j.length-1?L+1:0;break;case"Home":N=0;break;case"End":N=j.length-1;break;case"Escape":I.preventDefault(),s?.();return;default:return}if(N!==null){I.preventDefault();const F=j[N],P=w.current.get(F);P&&(P.focus(),S(F))}},[e,S,s]),T=E.useCallback((I,M)=>{M?w.current.set(I,M):w.current.delete(I)},[]),k=E.useCallback(I=>{const M=w.current.get(I);M&&M.focus()},[]);E.useImperativeHandle(m,()=>({focusTab:k,getActiveTab:()=>p,getTabListElement:()=>b.current}),[k,p]);const C=E.useCallback(I=>{const M=I.relatedTarget;b.current?.contains(M)||a?.()},[a]),x=we("nhsuk-tabs",c);return o.jsxs("div",{className:x,id:u,"data-testid":d,...f,children:[o.jsx("h2",{className:"nhsuk-tabs__title",children:"Contents"}),o.jsx("div",{className:"nhsuk-tabs__list-container",ref:b,children:o.jsx("ul",{className:"nhsuk-tabs__list",role:"tablist",onBlur:C,children:e.map(I=>{const M=I.id===p,j=I.disabled,L=we("nhsuk-tabs__list-item",{"nhsuk-tabs__list-item--selected":M,"nhsuk-tabs__list-item--disabled":j});return o.jsx("li",{className:L,role:"presentation",children:o.jsx("button",{ref:N=>T(I.id,N),className:"nhsuk-tabs__tab",role:"tab","aria-selected":M,"aria-controls":`${I.id}-panel`,id:`${I.id}-tab`,tabIndex:M?0:-1,disabled:j,onClick:()=>!j&&D(I.id),onKeyDown:N=>!j&&v(N,I.id),onFocus:()=>!j&&S(I.id),...I.attributes,children:I.label})},I.id)})})}),e.map(I=>{const M=I.id===p;return o.jsx("div",{className:"nhsuk-tabs__panel",role:"tabpanel","aria-labelledby":`${I.id}-tab`,id:`${I.id}-panel`,hidden:!M,children:I.content},I.id)})]})}),ld=E.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:i=!1,className:a="",id:s,children:l,...c},u)=>{const d=["nhsuk-details",a].filter(Boolean).join(" "),f=t?o.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):o.jsx("span",{className:"nhsuk-details__summary-text",children:e});let m;return l?m=l:r?m=o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(m=n),o.jsxs("details",{ref:u,id:s,className:d,open:i,...c,children:[o.jsx("summary",{className:"nhsuk-details__summary",tabIndex:0,children:f}),o.jsx("div",{className:"nhsuk-details__text",children:m})]})});ld.displayName="Details";const cd=E.forwardRef(({title:e,type:t,items:n,hidePrefix:r=!1,headingLevel:i=3,className:a,...s},l)=>{const c=["nhsuk-do-dont-list"];a&&c.push(a);const u=["nhsuk-list",t==="tick"?"nhsuk-list--tick":"nhsuk-list--cross"],d=()=>t==="cross"?o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:[o.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),o.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]}):o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})}),f=g=>t==="cross"&&!r?`do not ${g}`:g,m=()=>o.jsx(on,{level:i,className:"nhsuk-do-dont-list__label",text:e});return o.jsxs("div",{ref:l,className:c.join(" "),...s,children:[m(),o.jsx("div",{className:"nhsuk-do-dont-list__content--feature",children:o.jsx("ul",{className:u.join(" "),role:"list",children:n.map((g,y)=>o.jsxs("li",{children:[d(),f(g.item)]},y))})})]})});cd.displayName="DoDontList";const ud=E.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:i=!1,className:a="",id:s,children:l,...c},u)=>{const d=["nhsuk-expander",a].filter(Boolean).join(" "),f=t?o.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):o.jsx("span",{className:"nhsuk-details__summary-text",children:e});let m;return l?m=l:r?m=o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(m=n),o.jsxs("details",{ref:u,id:s,className:d,open:i,...c,children:[o.jsx("summary",{className:"nhsuk-details__summary",children:f}),o.jsx("div",{className:"nhsuk-details__text",children:m})]})});ud.displayName="Expander";const dd=E.forwardRef(({items:e,idPrefix:t="task-list",className:n,...r},i)=>{const a=["nhsuk-task-list",n].filter(Boolean).join(" "),s=(l,c)=>{const u=c+1,d=`${t}-${u}-hint`,f=`${t}-${u}-status`,m=!!l.href,g=["nhsuk-task-list__item",m&&"nhsuk-task-list__item--with-link",l.classes].filter(Boolean).join(" "),y=[l.hint&&d,f].filter(Boolean).join(" ");return o.jsx(v_,{item:l,itemClasses:g,hasLink:m,hintId:d,statusId:f,ariaDescribedBy:y},c)};return o.jsx("ul",{ref:i,className:a,...r,children:e.map(s)})}),v_=({item:e,itemClasses:t,hasLink:n,hintId:r,statusId:i,ariaDescribedBy:a})=>{const s=()=>{const u=e.title.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:e.title.html}}):e.title.text,d=[n?"nhsuk-task-list__link":"",e.title.classes].filter(Boolean).join(" ");return n?o.jsx("a",{className:d,href:e.href,"aria-describedby":a,children:u}):o.jsx("div",{className:e.title.classes||"",children:u})},l=()=>e.hint?e.hint.html?o.jsx("div",{id:r,className:"nhsuk-task-list__hint",dangerouslySetInnerHTML:{__html:e.hint.html}}):o.jsx("div",{id:r,className:"nhsuk-task-list__hint",children:e.hint.text}):null,c=()=>{const u=["nhsuk-task-list__status",e.status.classes].filter(Boolean).join(" ");let d;return e.status.tag?d=o.jsx(We,{...e.status.tag}):e.status.html?d=o.jsx("span",{dangerouslySetInnerHTML:{__html:e.status.html}}):d=e.status.text,o.jsx("div",{className:u,id:i,children:d})};return o.jsxs("li",{className:t,children:[o.jsxs("div",{className:"nhsuk-task-list__name-and-hint",children:[s(),l()]}),c()]})};dd.displayName="TaskList";const __=({heading:e,headingLevel:t=3,text:n,html:r,children:i,className:a,...s})=>{const l=/important/i.test(e),c=()=>i||(r?o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n?o.jsx("p",{children:n}):null),u=["nhsuk-warning-callout",a].filter(Boolean).join(" "),d=`h${t}`;return o.jsxs("div",{className:u,...s,children:[E.createElement(d,{className:"nhsuk-warning-callout__label"},l?o.jsxs(o.Fragment,{children:[e,o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"})]}):o.jsxs("span",{role:"text",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Important: "}),e]})),c()]})},x_=({src:e,alt:t,caption:n,sizes:r,srcset:i,className:a,...s})=>{const l=["nhsuk-image",a].filter(Boolean).join(" ");return o.jsxs("figure",{className:l,...s,children:[o.jsx("img",{className:"nhsuk-image__img",src:e,alt:t,...r&&i?{sizes:r,srcSet:i}:{}}),n&&o.jsx("figcaption",{className:"nhsuk-image__caption",dangerouslySetInnerHTML:{__html:n}})]})},w_=({dateRange:e,onPrev:t,onNext:n,onToday:r,density:i,onDensityChange:a,a11yMode:s,onA11yModeChange:l})=>o.jsxs("div",{className:"nhs-slot-matrix__toolbar",role:"group","aria-label":"Slot matrix controls",children:[o.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[o.jsx(bt,{variant:"secondary",size:"small",onClick:t,"aria-label":"Previous date range",children:"Prev"}),o.jsx(bt,{variant:"secondary",size:"small",onClick:r,"aria-label":"Jump to today",children:"Today"}),o.jsx(bt,{variant:"secondary",size:"small",onClick:n,"aria-label":"Next date range",children:"Next"}),o.jsxs("span",{className:"nhs-slot-matrix__toolbar-daterange","aria-live":"polite",children:[e.start.toDateString()," â€“ ",e.end.toDateString()]})]}),o.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[o.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-density-select",children:"Density"}),o.jsx(oi,{id:"slot-matrix-density-select",name:"slot-matrix-density",ariaLabel:"Change density",value:i,onChange:c=>a?.(c.target.value),options:[{value:"comfortable",text:"Comfortable"},{value:"compact",text:"Compact"}]}),o.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-mode-select",children:"Mode"}),o.jsx(oi,{id:"slot-matrix-mode-select",name:"slot-matrix-mode",ariaLabel:"Change accessibility mode",value:s,onChange:c=>l?.(c.target.value),options:[{value:"grid",text:"Grid"},{value:"list",text:"List"}]})]})]}),S_=({items:e,orientation:t="horizontal"})=>o.jsx("div",{className:`nhs-slot-matrix__legend nhs-slot-matrix__legend--${t}`,role:"list","aria-label":"Slot legend",children:e.map(n=>o.jsx("div",{role:"listitem",className:"nhs-slot-matrix__legend-item",children:o.jsx(We,{color:C_(n.status),text:n.label})},n.status))});function C_(e){switch(e){case"available":return"green";case"full":return"grey";case"overbook":return"orange";case"held":return"yellow";case"blocked":return"grey";default:return"default"}}const k_=({slots:e,sessions:t,value:n,defaultValue:r,onChange:i,selectionMode:a="single",a11yMode:s,className:l,style:c,getSlotAriaLabel:u,toolbar:d,enableDefaultToolbar:f=!0,legendItems:m,enableDefaultLegend:g=!0,legendPlacement:y="bottom",onA11yModeChange:h})=>{const[p,b]=E.useState("grid"),w=s||p,[D,S]=E.useState(r||[]),v=n??D,T=E.useMemo(()=>{const N=new Set;return e.forEach(F=>N.add(new Date(F.start).getTime())),Array.from(N).sort((F,P)=>F-P)},[e]),k=E.useMemo(()=>{const N={};return e.forEach(F=>{const P=new Date(F.start).getTime();N[P]||(N[P]={});const $=F.capacity-F.booked-(F.held||0);N[P][F.sessionId]={slot:F,remaining:$}}),N},[e]),C=E.useCallback(N=>{if(a==="single"){const F=[N.id];n||S(F),i?.(F,{lastAction:"select"})}else{const F=v.includes(N.id),P=F?v.filter($=>$!==N.id):[...v,N.id];n||S(P),i?.(P,{lastAction:F?"deselect":"select"})}},[a,v,n,i]),x=E.useMemo(()=>m||(g?Array.from(new Set(e.map(F=>F.status))).map(F=>({status:F,label:F.charAt(0).toUpperCase()+F.slice(1)})):void 0),[m,g,e]),I=x?o.jsx(S_,{items:x,orientation:y==="left"||y==="right"?"vertical":"horizontal"}):null,M=N=>{s||b(N),h?.(N)},j=d||(f?o.jsx(w_,{dateRange:{start:new Date,end:new Date},density:"comfortable",a11yMode:w,onA11yModeChange:M}):null),L=o.jsx("div",{style:c,className:we(l),children:o.jsx(xa,{className:we("nhs-slot-matrix-grid-wrapper"),children:o.jsx(Gn,{children:o.jsx(Nr,{width:Vn.Full,children:o.jsxs("div",{className:"nhs-slot-matrix",children:[j,y==="top"&&I,o.jsx("ul",{"aria-label":"Appointment slots list",children:e.map(N=>o.jsx("li",{children:o.jsxs("button",{type:"button",onClick:()=>C(N),"aria-pressed":v.includes(N.id),children:[yi(new Date(N.start))," â€“ ",yi(new Date(N.end))," (",N.status,")"]})},N.id))}),y==="bottom"&&I]})})})})});return w==="list"?L:o.jsx("div",{style:c,className:we(l),children:o.jsx(xa,{className:we("nhs-slot-matrix-grid-wrapper"),children:o.jsx(Gn,{children:o.jsx(Nr,{width:Vn.Full,children:o.jsxs("div",{className:"nhs-slot-matrix",children:[j,y==="top"&&I,o.jsxs("div",{role:"grid","aria-rowcount":T.length+1,"aria-colcount":t.length+1,children:[o.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[o.jsx("div",{role:"columnheader","aria-label":"Timebands",className:"nhs-slot-matrix__timeband-header"}),t.map(N=>o.jsx("div",{role:"columnheader","aria-label":`Session ${N.specialty}`,className:"nhs-slot-matrix__session-header",children:N.specialty},N.id))]}),T.map(N=>o.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[o.jsx("div",{role:"rowheader",className:"nhs-slot-matrix__timeband-header","aria-label":yi(new Date(N)),children:yi(new Date(N))}),t.map(F=>{const P=k[N]?.[F.id];if(!P)return o.jsx("div",{role:"gridcell",className:"nhs-slot-matrix__cell","aria-disabled":"true"},F.id);const{slot:$,remaining:ne}=P,X=v.includes($.id),O=u?u($):`Slot ${yi(new Date($.start))} ${$.status}${ne===0?" full":""}`;return o.jsx("button",{type:"button",role:"gridcell","data-status":$.status,className:we("nhs-slot-matrix__cell",X&&"nhs-slot-matrix__cell--selected"),"aria-label":O,"aria-selected":X||void 0,onClick:()=>C($),children:ne>0?`${ne} left`:"Full"},$.id)})]},N))]}),y==="bottom"&&I]})})})})})};function fd(e){return e<10?`0${e}`:`${e}`}function yi(e){return`${fd(e.getHours())}:${fd(e.getMinutes())}`}const hd=({title:e,value:t,subtitle:n,variant:r="default",href:i,className:a="",ariaLabel:s,...l})=>{const c=["nhs-fdp-summary-card",`nhs-fdp-summary-card--${r}`,a].filter(Boolean).join(" "),u=o.jsxs(o.Fragment,{children:[o.jsx(on,{level:3,className:"nhs-fdp-summary-card__title",children:e}),o.jsx("p",{className:"nhs-fdp-summary-card__value",children:t}),n&&o.jsx("p",{className:"nhs-fdp-summary-card__subtitle",children:n})]});return i?o.jsx("a",{className:`${c} nhs-fdp-summary-card--clickable`,href:i,"aria-label":s||`${e}: ${t}`,...l,children:u}):o.jsx("div",{className:c,"aria-label":s,...l,children:u})},T_=({cards:e,className:t="",...n})=>{const r=["nhs-fdp-dashboard-summary-grid",t].filter(Boolean).join(" ");return o.jsx("div",{className:r,...n,children:o.jsx(xa,{children:o.jsx(Gn,{children:e.map((i,a)=>o.jsx(Nr,{width:Vn.OneQuarter,className:"nhs-fdp-dashboard-summary-grid__column","data-card-index":a,children:o.jsx(hd,{...i})},a))})})})},md=E.forwardRef(({data:e,columns:t,sortConfig:n,onSort:r,selectedRowIndex:i,onRowSelect:a,id:s,testId:l,ariaLabel:c,ariaLabelledby:u,ariaDescribedby:d,className:f,tableClassName:m,bordered:g=!1,striped:y=!1,responsive:h=!1,tableType:p="default"},b)=>{const w=E.useRef(null),D=E.useRef(null),S=E.useRef(null);E.useImperativeHandle(b,()=>w.current,[]);const[v,T]=E.useState(0),[k,C]=E.useState(0),[x,I]=E.useState("headers"),[M,j]=E.useState("browse"),L=t.length,N=e.length,F=E.useMemo(()=>!n||n.length===0?e:[...e].sort((z,re)=>{for(const{key:U,direction:de}of n){const ye=z[U],ue=re[U];if(ye==null&&ue==null)continue;if(ye==null)return 1;if(ue==null)return-1;let ce=0;if(typeof ye=="number"&&typeof ue=="number"?ce=ye-ue:ce=String(ye).localeCompare(String(ue)),ce!==0)return de==="asc"?ce:-ce}return 0}),[e,n]),P=E.useCallback((z,re)=>{setTimeout(()=>{const U=w.current?.querySelector(`tbody tr:nth-child(${z+1}) td:nth-child(${re+1})`);U&&(U.focus(),typeof U.scrollIntoView=="function"&&U.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),$=E.useCallback(z=>{setTimeout(()=>{const re=w.current?.querySelector(`th:nth-child(${z+1})`);re&&(re.focus(),typeof re.scrollIntoView=="function"&&re.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),ne=E.useCallback(z=>{r?.(z)},[r]),X=E.useCallback(z=>{a?.(z)},[a]),O=E.useCallback(z=>{const{key:re}=z;switch(re){case"Enter":if(z.preventDefault(),x==="headers"&&M==="browse")j("navigate"),$(k);else if(x==="headers"&&M==="navigate"){const U=t[k];U&&ne(U.key)}else x==="cells"&&M==="browse"?(j("navigate"),P(v,k)):x==="cells"&&M==="navigate"&&X(v);break;case"Escape":z.preventDefault(),(x==="headers"&&M==="navigate"||x==="cells"&&M==="navigate")&&j("browse");break;case"ArrowLeft":if(z.preventDefault(),M==="navigate"||M==="browse"&&x==="headers"){if(x==="headers"){const U=Math.max(0,k-1);C(U),$(U)}else if(x==="cells"){const U=Math.max(0,k-1);C(U),P(v,U)}}break;case"ArrowRight":if(z.preventDefault(),M==="navigate"||M==="browse"&&x==="headers"){if(x==="headers"){const U=Math.min(L-1,k+1);C(U),$(U)}else if(x==="cells"){const U=Math.min(L-1,k+1);C(U),P(v,U)}}break;case"ArrowUp":if(z.preventDefault(),x==="cells"){if(M==="browse"){const U=Math.max(0,v-1);T(U),P(U,0),C(0)}else if(M==="navigate")if(v>0){const U=v-1;T(U),P(U,k)}else I("headers"),j("browse"),$(k)}break;case"ArrowDown":if(z.preventDefault(),x==="headers"&&M==="browse")I("cells"),T(0),C(0),P(0,0);else if(x==="cells"){const U=N-1;if(M==="browse"){const de=Math.min(U,v+1);T(de),P(de,0),C(0)}else if(M==="navigate"&&v<U){const de=v+1;T(de),P(de,k)}}break;case"Home":z.preventDefault(),x==="headers"?(C(0),$(0)):x==="cells"&&(z.ctrlKey?(T(0),C(0),P(0,0)):(C(0),P(v,0)));break;case"End":if(z.preventDefault(),x==="headers"){const U=L-1;C(U),$(U)}else if(x==="cells")if(z.ctrlKey){const U=N-1,de=L-1;T(U),C(de),P(U,de)}else{const U=L-1;C(U),P(v,U)}break;case" ":if(z.preventDefault(),x==="headers"&&M==="navigate"){const U=t[k];U&&ne(U.key)}else x==="cells"&&M==="navigate"&&X(v);break}},[x,M,k,v,L,N,t,P,$,ne,X]);E.useEffect(()=>{const z=w.current;if(z)return z.addEventListener("keydown",O),()=>z.removeEventListener("keydown",O)},[O]);const H=we("nhsuk-table",m,{"nhsuk-table--responsive":h,"nhsuk-table--bordered":g,"nhsuk-table--striped":y,"nhsuk-table--compact":p==="compact"},f);return o.jsxs("table",{ref:w,className:H,id:s,"data-testid":l,role:"grid","aria-label":c,"aria-labelledby":u,"aria-describedby":d,tabIndex:0,children:[o.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:o.jsx("tr",{ref:D,role:"row",children:t.map((z,re)=>{const U=n?.find(ue=>ue.key===z.key),de=!!U,ye=x==="headers"&&k===re;return o.jsx("th",{className:we("sortable-header",{"sortable-header--focused":ye}),role:"columnheader",tabIndex:ye?0:-1,onClick:()=>ne(z.key),onKeyDown:ue=>{(ue.key==="Enter"||ue.key===" ")&&(ue.preventDefault(),ne(z.key))},"aria-sort":de?U?.direction==="asc"?"ascending":"descending":"none",children:o.jsxs("div",{className:"header-content",children:[o.jsx("span",{className:"header-label",children:z.label}),de&&o.jsxs("span",{className:"sort-indicator","aria-hidden":"true",children:[n&&n.length>1&&o.jsx("span",{className:"sort-priority",children:n.findIndex(ue=>ue.key===z.key)+1}),o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",className:"sort-arrow",children:U?.direction==="asc"?o.jsx("path",{d:"M6 2L2 8h8L6 2z"}):o.jsx("path",{d:"M6 10L2 4h8L6 10z"})})]})]})},z.key)})})}),o.jsx("tbody",{ref:S,className:"nhsuk-table__body",role:"rowgroup",children:F.map((z,re)=>{const U=i===re,de=x==="cells"&&v===re;return o.jsx("tr",{role:"row",className:we("data-row",{"data-row--selected":U,"data-row--focused":de}),"aria-selected":U,children:t.map((ye,ue)=>{const ce=ye.tableRenderer?ye.tableRenderer(z):ye.render?ye.render(z):z[ye.key],Q=x==="cells"&&v===re&&k===ue,ie=()=>typeof ce=="boolean"?o.jsxs(o.Fragment,{children:[o.jsx("span",{"aria-hidden":"true",children:ce?"âœ“":"âœ—"}),o.jsx("span",{className:"sr-only",children:ce?"Yes":"No"})]}):String(ce??"");return o.jsx("td",{role:"gridcell",className:we("data-cell",{"data-cell--focused":Q}),tabIndex:Q?0:-1,onClick:()=>X(re),children:ie()},ye.key)})},re)})})]})});md.displayName="AriaDataGrid";const pd=({sortConfig:e,columns:t,onSortChange:n,className:r="",emptyDescription:i="No sorting applied",activeDescription:a,showReset:s=!0,showHelp:l=!0,disabled:c=!1,ariaLabel:u="Sort configuration",ariaDescribedBy:d})=>{const f=E.useRef(null),m=E.useRef(null),g=E.useRef(null),y=E.useCallback((x,I)=>{c||(m.current=I,x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",I))},[c]),h=E.useCallback((x,I)=>{c||m.current===I||(x.preventDefault(),x.dataTransfer.dropEffect="move",g.current=I)},[c]),p=E.useCallback((x,I)=>{if(c)return;x.preventDefault();const M=m.current;if(!M||M===I)return;const j=e.findIndex(N=>N.key===M),L=e.findIndex(N=>N.key===I);if(j!==-1&&L!==-1){const N=[...e],[F]=N.splice(j,1);N.splice(L,0,F),n(N)}m.current=null,g.current=null},[c,e,n]),b=E.useCallback(()=>{m.current=null,g.current=null},[]),w=E.useCallback(x=>{const I=t.find(M=>M.key===x);return I?I.label:x},[t]),D=E.useCallback(x=>["red","orange","blue","aqua-green","grey"][x]||"grey",[]),S=E.useCallback(x=>{if(c)return;const I=e.map(M=>M.key===x?{...M,direction:M.direction==="asc"?"desc":"asc"}:M);n(I)},[e,n,c]),v=E.useCallback(x=>{if(c)return;const I=e.filter(M=>M.key!==x);n(I)},[e,n,c]),T=E.useCallback(()=>{c||n([])},[n,c]),k=()=>{if(e.length===0)return i;if(a)return a;const x=e.map((I,M)=>{const j=I.direction==="asc"?"ascending":"descending";return`${M+1}. ${w(I.key)} (${j})`});if(x.length===1)return`Sorted by: ${x[0]}`;if(x.length===2)return`Sorted by: ${x.join(" and ")}`;{const I=x.pop();return`Sorted by: ${x.join(", ")}, and ${I}`}},C=E.useMemo(()=>{const x=["sort-description"];return l&&x.push("sort-help"),d&&x.push(d),x.join(" ")},[l,d]);return e.length===0?o.jsxs("div",{className:`sort-status-control ${r}`,children:[o.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:i}),l&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]}):o.jsxs("div",{className:`sort-status-control ${r}`,children:[o.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:k()}),o.jsxs("div",{className:"sort-status-container",children:[o.jsx("div",{ref:f,className:"sort-status-control__tags",role:"list","aria-label":u,"aria-describedby":C,children:e.map((x,I)=>o.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",draggable:!c,onDragStart:M=>y(M,x.key),onDragOver:M=>h(M,x.key),onDrop:M=>p(M,x.key),onDragEnd:b,onClick:()=>S(x.key),style:{cursor:c?"default":"pointer"},title:c?"":`Click to toggle sort direction. Currently ${x.direction==="asc"?"ascending":"descending"}`,"data-key":x.key,children:o.jsx(We,{color:D(I),className:"sort-status-control__tag",closable:!0,onClose:()=>v(x.key),disabled:c,children:o.jsxs("div",{className:"sort-status-control__tag-content",children:[o.jsx("div",{className:"sort-status-control__drag-handle",title:"Drag to reorder",children:"â‹®â‹®"}),o.jsx("div",{className:`sort-status-control__priority-badge sort-priority sort-priority--priority-${I+1}`,children:I+1}),o.jsx("span",{className:"sort-status-control__tag-label",children:w(x.key)}),o.jsx("button",{type:"button",className:"sort-status-control__direction-button",onClick:M=>{M.stopPropagation(),S(x.key)},disabled:c,"aria-label":`Toggle sort direction for ${w(x.key)}. Currently ${x.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:o.jsx("span",{className:`sort-status-control__direction-icon sort-status-control__direction-icon--${x.direction}`,children:o.jsx("svg",{className:`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${x.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})})})]})})},x.key))}),s&&o.jsx("div",{className:"sort-status-control__actions",children:o.jsx(bt,{variant:"secondary",onClick:T,disabled:c,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})})]}),l&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]})};function N_(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const i=[...e.selectedRows];return i[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:i};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:a}=t.payload,s=new Array(a).fill(!1),l=new Array(a).fill(null),c=new Array(a).fill([]);for(let u=0;u<Math.min(e.tabLoadingStates.length,a);u++)s[u]=e.tabLoadingStates[u],l[u]=e.tabErrors[u],c[u]=e.selectedRows[u];return{...e,tabLoadingStates:s,tabErrors:l,selectedRows:c};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}const Ha=E.forwardRef(function(t,n){const{dataConfig:r={},tabPanels:i,selectedIndex:a,onTabChange:s,onGlobalRowSelectionChange:l,ariaLabel:c,ariaDescription:u,className:d="",disabled:f=!1,orientation:m="horizontal",id:g,isLoading:y=!1,loadingComponent:h,error:p=null,errorComponent:b,"data-testid":w,actions:D,actionsMinGap:S=16,forceActionsAbove:v=!1}=t,k=E.useRef(g||`aria-tabs-datagrid-${Math.random().toString(36).slice(2,9)}`).current,C=typeof u=="string"&&u.trim()!==""&&!/\s/.test(u),x=`${k}-description`,I=`${k}-navigation-help`,{dataComparator:M=(A,q)=>JSON.stringify(A)===JSON.stringify(q),filterFunction:j=A=>A,booleanRenderer:L=A=>A?"âœ“":"âœ—"}=r||{},N=a!==void 0,F=a??0,[P,$]=E.useState({focusArea:"tabs",focusedTabIndex:F,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}),ne=E.useMemo(()=>({selectedIndex:F,tabLoadingStates:new Array(i.length).fill(!1),tabErrors:new Array(i.length).fill(null),sortConfig:[],selectedRows:new Array(i.length).fill([]),globalSelectedRowData:null,filters:void 0}),[F]),[X,O]=E.useReducer(N_,ne);E.useEffect(()=>{const A=X.tabLoadingStates.length,q=i.length;A!==q&&O({type:"ADJUST_ARRAYS",payload:{newLength:q}})},[i.length]),E.useEffect(()=>{N&&O({type:"SET_SELECTED_INDEX",payload:F})},[F,N]),E.useEffect(()=>{$(A=>({...A,focusArea:"tabs",focusedTabIndex:X.selectedIndex,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}))},[X.selectedIndex]),E.useEffect(()=>{l&&l(X.globalSelectedRowData)},[X.globalSelectedRowData,l]);const H=E.useCallback((A,q)=>M(A,q),[M]),z=E.useCallback(A=>{A>=0&&A<i.length&&!i[A].disabled&&(O({type:"SET_SELECTED_INDEX",payload:A}),$(q=>({...q,focusedTabIndex:A,focusArea:"tabs"})),s?.(A))},[i,s]),re=E.useRef(!1),U=E.useCallback((A,q)=>{if(!q?.force&&!re.current&&A===0){re.current=!0;return}re.current=!0,setTimeout(()=>{const J=de.current[A],te=J?.parentElement;if(J&&te){const K=J.offsetLeft,se=J.offsetWidth,be=te.clientWidth,_e=K-be/2+se/2;try{te.scrollTo({left:Math.max(0,_e),behavior:"smooth"})}catch{J.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}}else process.env.SILENCE_SCROLL_DEBUG||console.debug("[AriaTabsDataGrid] Missing elements for scroll",{tabElementExists:!!J,tabListElementExists:!!te})},50)},[]),de=E.useRef([]),ye=E.useRef([]),ue=E.useCallback((A,q)=>{const J=X.sortConfig||[],te=J.find(be=>be.key===q);let K;te?te.direction==="asc"?K=J.map(be=>be.key===q?{...be,direction:"desc"}:be):K=J.filter(be=>be.key!==q):K=[...J,{key:q,direction:"asc"}],O({type:"SET_SORT",payload:K}),i[A].onSort?.(q)},[X.sortConfig,i]),ce=E.useCallback(A=>{setTimeout(()=>{const q=document.querySelector(`[data-tab-panel="${X.selectedIndex}"] th:nth-child(${A+1})`);q&&q.focus()},0)},[X.selectedIndex]),Q=E.useCallback(A=>L(A),[L]),ie=E.useCallback((A,q)=>{setTimeout(()=>{const J=document.querySelector(`[data-tab-panel="${X.selectedIndex}"] tbody tr:nth-child(${A+1}) td:nth-child(${q+1})`);J&&J.focus()},0)},[X.selectedIndex]);E.useEffect(()=>{P.isGridActive&&(P.focusArea==="headers"?setTimeout(()=>{ce(P.focusedHeaderIndex)},0):P.focusArea==="cells"&&setTimeout(()=>{ie(P.focusedRowIndex,P.focusedColumnIndex)},0))},[P.focusArea,P.isGridActive,P.focusedHeaderIndex,P.focusedRowIndex,P.focusedColumnIndex,ce,ie]),E.useEffect(()=>{U(X.selectedIndex)},[X.selectedIndex,U]);const fe=E.useCallback((A,q)=>{const{key:J}=A,te=i[X.selectedIndex],K=te?.columns.length||0;switch(J){case"ArrowLeft":A.preventDefault();const se=Math.max(0,q-1);$(Te=>({...Te,focusedHeaderIndex:se})),ce(se);break;case"ArrowRight":A.preventDefault();const be=Math.min(K-1,q+1);$(Te=>({...Te,focusedHeaderIndex:be})),ce(be);break;case"ArrowUp":A.preventDefault(),$(Te=>({...Te,focusArea:"tabs",focusedTabIndex:X.selectedIndex})),U(X.selectedIndex),de.current[X.selectedIndex]?.focus();break;case"ArrowDown":A.preventDefault(),$(Te=>({...Te,focusArea:"cells",focusedRowIndex:0,focusedColumnIndex:q,isGridActive:!0}));break;case"Home":A.preventDefault(),$(Te=>({...Te,focusedHeaderIndex:0})),ce(0);break;case"End":A.preventDefault();const _e=K-1;$(Te=>({...Te,focusedHeaderIndex:_e})),ce(_e);break;case"Enter":case" ":A.preventDefault();const Se=te?.columns[q]?.key;Se&&ue(X.selectedIndex,Se);break}},[i,X.selectedIndex,ue,$,ce,ie,de]),Y=E.useCallback((A,q,J)=>{const{key:te}=A,K=i[X.selectedIndex],se=K?.data.length||0,be=K?.columns.length||0;switch(te){case"ArrowUp":if(A.preventDefault(),q===0)$(pe=>({...pe,focusArea:"headers",focusedHeaderIndex:J,isGridActive:!1})),ce(J);else{const pe=q-1;$(Pe=>({...Pe,focusedRowIndex:pe})),ie(pe,J)}break;case"ArrowDown":A.preventDefault();const _e=Math.min(se-1,q+1);$(pe=>({...pe,focusedRowIndex:_e})),ie(_e,J);break;case"ArrowLeft":A.preventDefault();const Se=Math.max(0,J-1);$(pe=>({...pe,focusedColumnIndex:Se})),ie(q,Se);break;case"ArrowRight":A.preventDefault();const Te=Math.min(be-1,J+1);$(pe=>({...pe,focusedColumnIndex:Te})),ie(q,Te);break;case"Home":A.preventDefault(),A.ctrlKey?($(pe=>({...pe,focusedRowIndex:0,focusedColumnIndex:0})),ie(0,0)):($(pe=>({...pe,focusedColumnIndex:0})),ie(q,0));break;case"End":if(A.preventDefault(),A.ctrlKey){const pe=se-1,Pe=be-1;$(Be=>({...Be,focusedRowIndex:pe,focusedColumnIndex:Pe})),ie(pe,Pe)}else{const pe=be-1;$(Pe=>({...Pe,focusedColumnIndex:pe})),ie(q,pe)}break;case"Enter":case" ":if(A.preventDefault(),K&&K.data[q]){const pe=K.data.some(Je=>"ews_data"in Je)?j(K.data,X.filters):K.data,Pe=X.sortConfig;let Be=pe;if(Pe&&Pe.length>0&&(Be=[...pe].sort((Je,Ue)=>{for(const{key:gt,direction:rn}of Pe){let Xt=Je[gt],Ht=Ue[gt];const qe=K.columns.find(zn=>zn.key===gt);if(qe?.tableRenderer?(Xt=qe.tableRenderer(Je),Ht=qe.tableRenderer(Ue)):qe?.render&&(Xt=qe.render(Je),Ht=qe.render(Ue)),Xt==null&&Ht==null)continue;if(Xt==null)return rn==="asc"?-1:1;if(Ht==null)return rn==="asc"?1:-1;let st=0;if(typeof Xt=="number"&&typeof Ht=="number"?st=Xt-Ht:st=String(Xt).localeCompare(String(Ht),void 0,{numeric:!0,sensitivity:"base"}),st!==0)return rn==="asc"?st:-st}return 0})),Be[q]){const Je=Be[q],gt=X.globalSelectedRowData&&H(X.globalSelectedRowData,Je)?null:Je;O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:gt})}}break}},[i,X.selectedIndex,X.filters,X.sortConfig,j,H,O,$,ce,ie]),he=E.useCallback((A,q)=>j(A,q),[j]);if(E.useImperativeHandle(n,()=>({selectTab:A=>{A>=0&&A<i.length&&(O({type:"SET_SELECTED_INDEX",payload:A}),s?.(A))},refreshData:A=>{console.log("Refreshing data for tab:",A??"all")},exportData:A=>{const q=A??X.selectedIndex,J=i[q];return J?J.data:[]},getSelectedRows:A=>X.globalSelectedRowData?[]:[],clearSelection:A=>{O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:null})},applyFilters:A=>{O({type:"SET_FILTERS",payload:A})}}),[X.selectedIndex,X.selectedRows,i,s]),y)return o.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--loading ${d}`,"data-testid":w,children:h||o.jsx("div",{className:"aria-tabs-datagrid__loading",children:o.jsx("div",{className:"nhsuk-spinner",role:"status","aria-label":"Loading data",children:o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Loading..."})})})});if(p)return o.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--error ${d}`,"data-testid":w,children:b||o.jsxs("div",{className:"aria-tabs-datagrid__error",role:"alert",children:[o.jsx("h3",{className:"nhsuk-error-summary__title",children:"Error loading data"}),o.jsx("p",{children:p})]})});const oe=E.useRef(null),ge=E.useRef(null),R=E.useRef(null),[V,le]=E.useState(!0);E.useEffect(()=>{if(!D){le(!1);return}if(v){le(!1);return}function A(){if(!oe.current||!ge.current||!R.current)return;const te=oe.current.clientWidth,K=Array.from(ge.current.querySelectorAll(":scope > .aria-tabs-datagrid__tab")),se=K.reduce((Te,pe)=>Te+pe.offsetWidth,0),be=R.current.offsetWidth,_e=Math.max(8*(K.length-1),0),Se=se+_e+be+S<=te;le(Se)}const q=requestAnimationFrame(()=>A()),J=new ResizeObserver(()=>A());return oe.current&&J.observe(oe.current),ge.current&&J.observe(ge.current),()=>{cancelAnimationFrame(q),J.disconnect()}},[D,S,v,i.length]);const me=R,ae=E.useCallback(()=>me.current?Array.from(me.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(A=>!A.hasAttribute("disabled")):[],[]),B=E.useCallback(A=>{const q=ae();if(!q.length)return;const J=Math.max(0,Math.min(A,q.length-1));q[J].focus(),$(te=>({...te,focusArea:"actions",focusedActionIndex:J}))},[ae]),W=E.useCallback(()=>B(0),[B]),ee=E.useCallback((A,q)=>{const{key:J}=A,te=i.length-1;switch(J){case"ArrowUp":{D&&!V&&(A.preventDefault(),W());break}case"ArrowLeft":{A.preventDefault();const K=q>0?q-1:te;z(K),U(K),de.current[K]?.focus();break}case"ArrowRight":{if(A.preventDefault(),q===te&&D&&V){W();return}const K=q<te?q+1:0;z(K),U(K),de.current[K]?.focus();break}case"ArrowDown":{A.preventDefault(),$(K=>({...K,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));break}case"Home":{A.preventDefault(),z(0),U(0),de.current[0]?.focus();break}case"End":{A.preventDefault(),z(te),U(te),de.current[te]?.focus();break}case"Enter":case" ":{A.preventDefault(),z(q);break}case"Tab":{!A.shiftKey&&q===te&&D&&V&&W();break}}},[i.length,z,U,D,V,W]),G=E.useCallback(A=>{const{key:q}=A,J=ae();if(!J.length)return;const te=J.findIndex(K=>K===document.activeElement);switch(q){case"ArrowLeft":{if(V)if(te>0)A.preventDefault(),B(te-1);else{A.preventDefault();const K=i.length-1;z(K),U(K),de.current[K]?.focus(),$(se=>({...se,focusArea:"tabs",focusedTabIndex:K}))}break}case"ArrowRight":{V&&(te<J.length-1?(A.preventDefault(),B(te+1)):(A.preventDefault(),z(0),U(0),de.current[0]?.focus(),$(K=>({...K,focusArea:"tabs",focusedTabIndex:0}))));break}case"ArrowDown":{if(V)A.preventDefault(),$(K=>({...K,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));else{A.preventDefault();const K=X.selectedIndex;de.current[K]?.focus(),$(se=>({...se,focusArea:"tabs",focusedTabIndex:K}))}break}}},[ae,V,B,i.length,z,U,X.selectedIndex]);return o.jsxs("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--${m} ${d}`,id:g,"data-testid":w,ref:oe,children:[u&&!C&&o.jsx("div",{id:x,className:"nhsuk-u-visually-hidden",children:u}),o.jsx("div",{className:"aria-tabs-datagrid__navigation-help sr-only",id:I,children:"Keyboard navigation: Use Tab to move between tabs and grid. Arrow keys navigate within tabs and grid cells. Enter activates tabs and sorts columns. Arrow Down from tabs moves to table headers. Arrow Down from headers moves to table cells. Use Arrow keys to navigate between cells."}),o.jsx(pd,{sortConfig:X.sortConfig||[],columns:i.flatMap(A=>A.columns.map(q=>({key:q.key,label:q.label}))).filter((A,q,J)=>J.findIndex(te=>te.key===A.key)===q),onSortChange:A=>{O({type:"SET_SORT",payload:A})},ariaLabel:"Data grid sort configuration"}),D&&!V&&o.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above",ref:R,role:"toolbar","aria-label":"Additional actions",onKeyDown:G,children:D}),o.jsxs("div",{className:`aria-tabs-datagrid__tabs-wrapper ${V?"aria-tabs-datagrid__tabs-wrapper--inline-actions":""}`,children:[o.jsx("div",{role:"tablist","aria-label":c,"aria-describedby":u?C?u:x:I,"aria-orientation":m,className:"aria-tabs-datagrid__tabs",ref:ge,children:i.map((A,q)=>{const J=q===X.selectedIndex,te=A.disabled||f;return o.jsxs("button",{role:"tab",id:`tab-${A.id}`,"aria-controls":`panel-${A.id}`,"aria-selected":J,"aria-disabled":te,tabIndex:J?0:-1,ref:K=>{de.current[q]=K},onClick:()=>z(q),onKeyDown:K=>ee(K,q),disabled:te,className:["aria-tabs-datagrid__tab",J?"aria-tabs-datagrid__tab--selected":"",te?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[o.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:A.label}),X.tabLoadingStates[q]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),X.tabErrors[q]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},A.id)})}),D&&V&&o.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline",ref:R,role:"toolbar","aria-label":"Additional actions",onKeyDown:G,children:D})]}),i.map((A,q)=>{const J=q===X.selectedIndex;return o.jsx("div",{role:"tabpanel",id:`panel-${A.id}`,"aria-labelledby":`tab-${A.id}`,tabIndex:0,hidden:!J,ref:te=>{ye.current[q]=te},className:`aria-tabs-datagrid__panel ${A.className||""}`,"data-tab-panel":q,children:J&&(()=>{const te=A.data.some(se=>"ews_data"in se)?he(A.data,X.filters):A.data,K=E.useMemo(()=>{const se=X.sortConfig;return!se||se.length===0?te:[...te].sort((be,_e)=>{for(const{key:Se,direction:Te}of se){let pe=be[Se],Pe=_e[Se];const Be=A.columns.find(Ue=>Ue.key===Se);if(Be?.tableRenderer?(pe=Be.tableRenderer(be),Pe=Be.tableRenderer(_e)):Be?.render&&(pe=Be.render(be),Pe=Be.render(_e)),pe==null&&Pe==null)continue;if(pe==null)return 1;if(Pe==null)return-1;let Je=0;if(typeof pe=="number"&&typeof Pe=="number"?Je=pe-Pe:typeof pe=="boolean"&&typeof Pe=="boolean"?Je=pe===Pe?0:pe?1:-1:Je=String(pe).localeCompare(String(Pe),void 0,{numeric:!0,sensitivity:"base"}),Je!==0)return Te==="asc"?Je:-Je}return 0})},[te,X.sortConfig,A.columns]);return o.jsxs("table",{className:"nhsuk-table aria-tabs-datagrid__grid",role:"grid","aria-label":A.ariaLabel,"aria-describedby":A.ariaDescription?`panel-${A.id}-description`:void 0,children:[A.ariaDescription&&o.jsx("caption",{className:"nhsuk-u-visually-hidden",id:`panel-${A.id}-description`,children:A.ariaDescription}),o.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:o.jsx("tr",{role:"row",children:A.columns.map((se,be)=>{const _e=X.sortConfig?.find(pe=>pe.key===se.key),Se=!!_e,Te=P.focusArea==="headers"&&P.focusedHeaderIndex===be;return o.jsx("th",{className:`sortable-header ${Te?"sortable-header--focused":""} ${Se?"sortable-header--sorted":""}`,role:"columnheader",tabIndex:Te?0:-1,onClick:()=>ue(q,se.key),onKeyDown:pe=>fe(pe,be),"aria-sort":Se?_e?.direction==="asc"?"ascending":"descending":"none",children:o.jsxs("div",{className:"header-content",children:[o.jsx("span",{className:"header-label",children:se.label}),o.jsxs("div",{className:`sort-indicator-container ${Se?`sort-indicator--${_e?.direction}`:""}`,children:[X.sortConfig&&X.sortConfig.length>0&&X.sortConfig.findIndex(pe=>pe.key===se.key)!==-1&&o.jsx("span",{className:`sort-priority sort-priority--priority-${X.sortConfig.findIndex(pe=>pe.key===se.key)+1}`,"data-priority":X.sortConfig.findIndex(pe=>pe.key===se.key)+1,title:`Sort priority: ${X.sortConfig.findIndex(pe=>pe.key===se.key)+1}`,children:X.sortConfig.findIndex(pe=>pe.key===se.key)+1}),Se&&o.jsx("svg",{className:`nhsuk-icon sort-arrow sort-arrow--${_e?.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})]})]})},se.key)})})}),o.jsx("tbody",{className:"nhsuk-table__body",role:"rowgroup",children:K.map((se,be)=>{const _e=X.globalSelectedRowData&&H(X.globalSelectedRowData,se),Se=P.focusArea==="cells"&&P.focusedRowIndex===be;return o.jsx("tr",{role:"row",className:`data-row ${_e?"data-row--selected":""} ${Se?"data-row--focused":""}`,"aria-selected":_e,children:A.columns.map((Te,pe)=>{const Pe=se[Te.key];let Be;Te.tableRenderer?Be=Te.tableRenderer(se):Te.render?Be=Te.render(se):Be=Pe;const Je=P.focusArea==="cells"&&P.focusedRowIndex===be&&P.focusedColumnIndex===pe,Ue=()=>{if(Te.customRenderer){const gt=Te.customRenderer(Pe,se);return o.jsx("span",{className:"data-cell__custom","data-custom-rendered":"true",children:gt})}return typeof Pe=="boolean"&&Be===Pe?o.jsxs(o.Fragment,{children:[Q(Pe),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:Pe?"Yes":"No"})]}):E.isValidElement(Be)||typeof Be!="object"?Be??"":Be};return o.jsx("td",{role:"gridcell",className:`data-cell ${Je?"data-cell--focused":""}`,tabIndex:Je?0:-1,onClick:()=>{const rn=X.globalSelectedRowData&&H(X.globalSelectedRowData,se)?null:se;O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:rn})},onKeyDown:gt=>Y(gt,be,pe),children:Ue()},Te.key)})},be)})})]})})()},A.id)})]})}),za={asc:"â†‘",desc:"â†“"},j_=e=>[...e].sort((t,n)=>t.priority-n.priority);function So(e){return e.map((t,n)=>({...t,priority:n}))}function D_(e){return e.length>0?Math.max(...e.map(t=>t.priority)):-1}function M_(e,t){const n=t.find(r=>r.id===e);return n?n.priority>0:!1}function P_(e,t){const n=t.find(i=>i.id===e),r=D_(t);return n?n.priority<r:!1}const I_=({sortConfig:e,onSortChange:t,className:n="",emptyDescription:r="No sorting applied",activeDescription:i,showReset:a=!0,showHelp:s=!0,disabled:l=!1,ariaLabel:c="Sort configuration",ariaDescribedBy:u})=>{const d=E.useMemo(()=>j_(e),[e]),f=E.useCallback(w=>{if(l)return;const D=e.map(S=>S.id===w?{...S,direction:S.direction==="asc"?"desc":"asc"}:S);t(D)},[e,t,l]),m=E.useCallback(w=>{if(l)return;const D=e.findIndex(v=>v.id===w);if(D<=0)return;const S=[...e];[S[D],S[D-1]]=[S[D-1],S[D]],t(So(S))},[e,t,l]),g=E.useCallback(w=>{if(l)return;const D=e.findIndex(v=>v.id===w);if(D>=e.length-1||D===-1)return;const S=[...e];[S[D],S[D+1]]=[S[D+1],S[D]],t(So(S))},[e,t,l]),y=E.useCallback(w=>{if(l)return;const D=e.filter(S=>S.id!==w);t(So(D))},[e,t,l]),h=E.useCallback(()=>{l||t([])},[t,l]),p=()=>{if(e.length===0)return r;if(i)return i;const w=d.map((D,S)=>{const v=D.direction==="asc"?"ascending":"descending";return`${S+1}. ${D.label} (${v})`});if(w.length===1)return`Sorted by: ${w[0]}`;if(w.length===2)return`Sorted by: ${w.join(" and ")}`;{const D=w.pop();return`Sorted by: ${w.join(", ")}, and ${D}`}},b=E.useMemo(()=>{const w=["sort-description"];return s&&w.push("sort-help"),u&&w.push(u),w.join(" ")},[s,u]);return e.length===0?o.jsx("div",{className:`sort-status-control sort-status-control--empty ${n}`,children:o.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:p()})}):o.jsxs("div",{className:`sort-status-control ${n}`,children:[o.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:p()}),o.jsxs("div",{className:"sort-status-control__tags",role:"list","aria-label":c,"aria-describedby":b,children:[o.jsx("div",{className:"sort-status-control__tags-label",children:"Current sorting:"}),d.map(w=>o.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",children:o.jsx(We,{text:"",color:"blue",className:"sort-status-control__tag",closable:!0,onClose:()=>y(w.id),disabled:l,children:o.jsxs("div",{className:"sort-status-control__tag-content",children:[o.jsx("span",{className:"sort-status-control__tag-priority",children:w.priority+1}),o.jsx("span",{className:"sort-status-control__tag-label",children:w.label}),o.jsx("button",{type:"button",className:"sort-status-control__tag-direction",onClick:()=>f(w.id),disabled:l,"aria-label":`Toggle sort direction for ${w.label}. Currently ${w.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:w.direction==="asc"?za.asc:za.desc}),o.jsxs("div",{className:"sort-status-control__tag-actions",children:[o.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>m(w.id),disabled:l||!M_(w.id,e),"aria-label":`Move ${w.label} sort up in priority`,title:"Move up in priority",children:"â–²"}),o.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>g(w.id),disabled:l||!P_(w.id,e),"aria-label":`Move ${w.label} sort down in priority`,title:"Move down in priority",children:"â–¼"})]})]})})},w.id))]}),a&&o.jsx("div",{className:"sort-status-control__actions",children:o.jsx(bt,{variant:"secondary",onClick:h,disabled:l,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})}),s&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsxs("small",{children:["Click ",za.asc,"/",za.desc," to toggle ascending/descending. Use â–²/â–¼ to change sort priority. Click Ã— to remove a sort."]})})]})},Ua=(e,t)=>t.map(n=>({id:n.id,label:n.label,data:n.filter?n.filter(e):e,columns:n.columns.map(r=>({key:r.key,label:r.label,render:r.render,customRenderer:r.customRenderer})),sortConfig:n.sortConfig,ariaLabel:n.ariaLabel||`${n.label} Data Grid`,ariaDescription:n.ariaDescription||`Data grid showing ${n.label.toLowerCase()}`,className:n.className,disabled:n.disabled})),Co=[{value:!0,icon:o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"100%",height:"34",children:o.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})})},{value:!1,icon:o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"100%",height:"34",children:[o.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),o.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]})}],F_=(e,t)=>!e||!t?e===t:e.name&&e.bed_name&&t.name&&t.bed_name?e.name===t.name&&e.bed_name===t.bed_name:JSON.stringify(e)===JSON.stringify(t),$_=(e,t)=>t?e.filter(n=>{if(t.ewsScoreRange){const[r,i]=t.ewsScoreRange;if(n.ews_score<r||n.ews_score>i)return!1}return!(t.wards&&t.wards.length>0&&!t.wards.includes(n.ward_name)||t.specialties&&t.specialties.length>0&&!t.specialties.includes(n.speciality)||t.dischargeStatuses&&t.dischargeStatuses.length>0&&!t.dischargeStatuses.includes(n.early_discharge_notification)||t.avpuLevels&&t.avpuLevels.length>0&&!t.avpuLevels.includes(n.ews_data.avpu)||t.medicallyOptimised!==null&&t.medicallyOptimised!==void 0&&n.medically_optimised!==t.medicallyOptimised||t.fastTrack!==null&&t.fastTrack!==void 0&&n.fast_track!==t.fastTrack)}):e,L_=e=>{if(typeof e=="boolean"){const n=Co.find(r=>r.value===e);return n?n.icon:null}const t=Co.find(n=>n.value===e);return t?t.icon:String(e)},A_=e=>`${e.name}-${e.bed_name}`,E_=()=>({overview:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"bed_name",label:"Bed"},{key:"ews_score",label:"EWS Score"},{key:"speciality",label:"Specialty"},{key:"consultant",label:"Consultant"}],vitals:[{key:"name",label:"Patient Name"},{key:"ews_score",label:"EWS Score"},{key:"respiratory_rate_bpm",label:"Respiratory Rate",render:e=>e.ews_data.respiratory_rate_bpm},{key:"sp02",label:"SpO2 %",render:e=>e.ews_data.sp02},{key:"temperature",label:"Temperature Â°C",render:e=>e.ews_data.temperature},{key:"systolic_bp",label:"Systolic BP",render:e=>e.ews_data.systolic_bp},{key:"heart_rate",label:"Heart Rate",render:e=>e.ews_data.heart_rate},{key:"avpu",label:"AVPU",render:e=>e.ews_data.avpu.toUpperCase()}],discharge:[{key:"name",label:"Patient Name"},{key:"anticipated_discharge_date",label:"Anticipated Discharge",render:e=>new Date(e.anticipated_discharge_date).toLocaleDateString()},{key:"early_discharge_notification",label:"Discharge Status"},{key:"medically_optimised",label:"Medically Optimised"},{key:"criteria_to_reside",label:"Criteria to Reside"},{key:"fast_track",label:"Fast Track"},{key:"transport_status",label:"Transport Status"},{key:"pathway",label:"Pathway"}],logistics:[{key:"name",label:"Patient Name"},{key:"ward_name",label:"Ward"},{key:"room_name",label:"Room"},{key:"bed_name",label:"Bed"},{key:"bed_type",label:"Bed Type"},{key:"transport_booking",label:"Transport Booked"},{key:"transport_mobility",label:"Transport Type"},{key:"district_nurse_referral",label:"District Nurse"},{key:"equipment",label:"Equipment"}]}),B_=e=>{const t=E_();return[{id:"overview",label:"Patient Overview",data:e,columns:t.overview,ariaLabel:"Patient Overview Data Grid",ariaDescription:"Overview of all patients with basic information"},{id:"vitals",label:"Vital Signs & EWS",data:e,columns:t.vitals,sortConfig:[{key:"ews_score",direction:"desc"},{key:"name",direction:"asc"},{key:"ward_name",direction:"asc"}],ariaLabel:"Patient Vital Signs Data Grid",ariaDescription:"Patient vital signs and Early Warning Scores"},{id:"discharge",label:"Discharge Planning",data:e.filter(n=>n.anticipated_discharge_date),columns:t.discharge,sortConfig:[{key:"anticipated_discharge_date",direction:"asc"},{key:"discharge_status",direction:"desc"}],ariaLabel:"Discharge Planning Data Grid",ariaDescription:"Patient discharge planning and status information"},{id:"logistics",label:"Bed Management",data:e,columns:t.logistics,sortConfig:[{key:"ward_name",direction:"asc"}],ariaLabel:"Bed Management Data Grid",ariaDescription:"Patient location and logistics information"}]},gd={dataComparator:F_,filterFunction:$_,booleanRenderer:L_,getDataId:A_};function bd(e,t,n){const{primaryField:r,secondaryFields:i=[],badges:a=[],hiddenFields:s=[],getPriority:l,getVariant:c,fieldRenderers:u={},classPrefix:d="adaptive-card"}=n,f=t.find(D=>D.key===r),m=f?.cardRenderer?f.cardRenderer(e):f?.render?f.render(e):e[r||"name"]||"Untitled",g=()=>i.filter(S=>!s.includes(S)&&e[S]).slice(0,3).map(S=>{const v=t.find(x=>x.key===S),T=e[S],k=u[S]?u[S](T,e):v?.cardRenderer?v.cardRenderer(e):v?.render?v.render(e):T;return`${v?.label||S}: ${k}`}).join(" â€¢ "),y=()=>a.length===0?null:a.filter(D=>e[D.fieldKey]!==void 0).map(D=>{const S=e[D.fieldKey],v=D.render?D.render(S,e):S;return`<span class="nhsuk-tag ${R_(D,S)}">${v}</span>`}).join(""),h=()=>c?c(e):l?.(e)==="high"?"primary":"default",p=y(),b=g(),w=p?`${b}${p?`<div class="adaptive-card__badges">${p}</div>`:""}`:b;return{variant:h(),heading:String(m),descriptionHtml:w,className:`adaptive-card ${d}`,"aria-label":`Record for ${m}`}}function R_(e,t){const n=e.className||"adaptive-card__badge";if(e.fieldKey==="ews_score"||e.fieldKey.includes("score")){const r=Number(t);return r>=7?`${n} nhsuk-tag--red`:r>=3?`${n} nhsuk-tag--yellow`:`${n} nhsuk-tag--green`}if(e.fieldKey==="priority"){const r=String(t).toLowerCase();if(r==="high")return`${n} nhsuk-tag--red`;if(r==="medium")return`${n} nhsuk-tag--yellow`;if(r==="low")return`${n} nhsuk-tag--green`}if(e.fieldKey==="status"){const r=String(t).toLowerCase();if(r==="urgent"||r==="critical")return`${n} nhsuk-tag--red`;if(r==="pending"||r==="warning")return`${n} nhsuk-tag--yellow`;if(r==="completed"||r==="success")return`${n} nhsuk-tag--green`}switch(e.color){case"primary":return`${n} nhsuk-tag--blue`;case"secondary":return`${n} nhsuk-tag--grey`;case"success":return`${n} nhsuk-tag--green`;case"warning":return`${n} nhsuk-tag--yellow`;case"danger":return`${n} nhsuk-tag--red`;default:return n}}const O_={primaryField:"name",secondaryFields:["id","description","status"],badges:[{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],hiddenFields:[],getPriority:e=>e.priority||"medium",getStatus:e=>e.status||"active",getVariant:e=>e.priority==="high"?"primary":"default",fieldRenderers:{},classPrefix:"adaptive-card--generic"},ko=({data:e,columns:t,onSelect:n,onAction:r,priority:i="medium",status:a="active"})=>{const s=e.name,l=e.age,c=e.ward_name,u=e.bed_name,d=e.ews_score,f=e.speciality,m=e.consultant;return o.jsxs("div",{className:`healthcare-card healthcare-card--patient healthcare-card--${i} healthcare-card--${a}`,onClick:()=>n?.(e),role:"button",tabIndex:0,"aria-label":`Patient record for ${s}, Age ${l}, Ward ${c}, Bed ${u}`,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__identity",children:[o.jsx("h3",{className:"healthcare-card__patient-name",children:s}),o.jsxs("p",{className:"healthcare-card__age-info",children:[o.jsx("span",{className:"healthcare-card__label",children:"Age: "}),o.jsx("span",{className:"healthcare-card__value",children:l})]})]}),o.jsx("div",{className:"healthcare-card__badges",children:d!==void 0&&o.jsxs(We,{color:z_(yd(d)),className:"healthcare-card__alert",children:["EWS: ",d]})})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Ward"}),o.jsx("dd",{children:c})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Bed"}),o.jsx("dd",{children:u})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Specialty"}),o.jsx("dd",{children:f})]}),o.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--prominent",children:[o.jsx("dt",{children:"Consultant"}),o.jsx("dd",{children:m})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(bt,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-notes",e)},children:"Notes"}),o.jsx(bt,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-vitals",e)},children:"Vitals"}),o.jsx(bt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:g=>{g.stopPropagation(),r?.("view-full",e)},children:"View Full Record"})]})]})},To=({data:e,onAction:t})=>o.jsxs("div",{className:"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__time-info",children:[o.jsx("h3",{className:"healthcare-card__time",children:new Date(e.appointment_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),o.jsx("p",{className:"healthcare-card__type",children:e.appointment_type})]}),o.jsxs("div",{className:"healthcare-card__badges",children:[o.jsx(We,{color:U_(e.status||"active"),className:"healthcare-card__status",children:(e.status||"active").charAt(0).toUpperCase()+(e.status||"active").slice(1)}),o.jsxs(We,{color:"grey",className:"healthcare-card__duration",children:[e.duration||"30"," min"]})]})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Patient"}),o.jsx("dd",{children:e.patient_name})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Consultant"}),o.jsx("dd",{children:e.consultant})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Location"}),o.jsx("dd",{children:e.location})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(bt,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),o.jsx(bt,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Reschedule"})]})]}),No=({data:e,onAction:t})=>o.jsxs("div",{className:"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__medication-info",children:[o.jsx("h3",{className:"healthcare-card__medication-name",children:e.medication}),o.jsxs("p",{className:"healthcare-card__dose",children:[e.dose," â€¢ ",e.frequency]})]}),o.jsxs("div",{className:"healthcare-card__badges",children:[o.jsx(We,{color:"blue",className:"healthcare-card__route",children:e.route}),e.next_due&&o.jsxs(We,{color:"red",className:"healthcare-card__warning",children:["Due: ",new Date(e.next_due).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Patient"}),o.jsx("dd",{children:e.patient_name})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Prescriber"}),o.jsx("dd",{children:e.prescriber})]}),e.allergies&&o.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--urgent",children:[o.jsx("dt",{children:"Allergies"}),o.jsx("dd",{children:e.allergies})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(bt,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),o.jsx(bt,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Adjust Dose"})]})]}),jo=({data:e,onSelect:t,onAction:n,priority:r="medium"})=>{const i=e.name,a=e.ews_score,s=e.ews_data?.respiratory_rate_bpm,l=e.ews_data?.sp02,c=e.ews_data?.temperature,u=e.ews_data?.systolic_bp,d=e.ews_data?.heart_rate,f=e.ews_data?.avpu;return o.jsxs("div",{className:`healthcare-card healthcare-card--vitals healthcare-card--${r}`,onClick:()=>t?.(e),role:"button",tabIndex:0,"aria-label":`Vital signs for ${i}, EWS Score ${a}`,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__vitals-summary",children:[o.jsx("h3",{className:"healthcare-card__patient-name",children:i}),a!==void 0&&o.jsxs("p",{className:`healthcare-card__ews-score healthcare-card__ews-score--${H_(a)}`,children:["EWS: ",a]})]}),o.jsx("div",{className:"healthcare-card__badges",children:f&&o.jsxs(We,{color:"blue",className:"healthcare-card__avpu",children:["AVPU: ",f.toUpperCase()]})})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("div",{className:"healthcare-card__vitals-grid",children:[s!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Respiratory Rate"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[s," bpm"]})]}),l!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"SpO2"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[l,"%"]})]}),c!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Temperature"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[c,"Â°C"]})]}),u!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Systolic BP"}),o.jsx("span",{className:"healthcare-card__vital-value",children:u})]}),d!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Heart Rate"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[d," bpm"]})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(bt,{variant:"secondary",className:"healthcare-card__action",onClick:m=>{m.stopPropagation(),n?.("view-trend",e)},children:"Trend"}),o.jsx(bt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:m=>{m.stopPropagation(),n?.("record-new",e)},children:"Record New"})]})]})};function yd(e){const t=typeof e=="string"?parseInt(e,10):e;return t>=7?"critical":t>=5?"high":t>=3?"medium":"low"}function H_(e){return yd(e)}function z_(e){switch(e){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"grey";default:return"grey"}}function U_(e){switch(e.toLowerCase()){case"active":return"blue";case"pending":return"orange";case"completed":return"green";case"cancelled":return"grey";default:return"blue"}}const W_=[{fieldKey:"ews_score",render:e=>`EWS: ${e}`,className:"adaptive-card__ews-badge",color:"default"},{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],vd=e=>e.ews_score&&Number(e.ews_score)>=7?"high":e.ews_score&&Number(e.ews_score)>=3?"medium":e.priority==="high"||e.status==="urgent"?"high":e.priority==="low"?"low":"medium",_d={name:"healthcare",defaultCardConfig:{primaryField:"name",secondaryFields:["nhs_number","ward","condition","consultant"],badges:W_,hiddenFields:[],getPriority:vd,getStatus:e=>{if(e.status){const t=e.status.toLowerCase();if(["active","pending","completed","cancelled","urgent"].includes(t))return t}return"active"},getVariant:e=>vd(e)==="high"||e.status==="urgent"?"primary":"default",fieldRenderers:{nhs_number:e=>e?`NHS: ${e}`:"",ews_score:e=>{const t=Number(e),n=t>=7?"HIGH":t>=3?"MEDIUM":"LOW";return`EWS: ${e} (${n})`},age:(e,t)=>t.dob?`${new Date().getFullYear()-new Date(t.dob).getFullYear()}y`:e?`${e}y`:""},classPrefix:"adaptive-card--healthcare"},cssImport:"./HealthcareCardTemplates.scss",cardTemplates:{patient:(e,t,n)=>{const r=n.getPriority?.(e)||"medium",i=n.getStatus?.(e)||"active",a=i==="urgent"?"active":i;return o.jsx(ko,{data:e,columns:t,priority:r,status:a,onSelect:s=>console.log("Patient selected:",s),onAction:(s,l)=>console.log("Patient action:",s,l)})},appointment:(e,t,n)=>{const r=n.getStatus?.(e)||"pending",i=r==="urgent"?"pending":r;return o.jsx(To,{data:e,columns:t,status:i,onSelect:a=>console.log("Appointment selected:",a),onAction:(a,s)=>console.log("Appointment action:",a,s)})},medication:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return o.jsx(No,{data:e,columns:t,priority:r,onSelect:i=>console.log("Medication selected:",i),onAction:(i,a)=>console.log("Medication action:",i,a)})},vitals:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return o.jsx(jo,{data:e,columns:t,priority:r,onSelect:i=>console.log("Vitals selected:",i),onAction:(i,a)=>console.log("Vitals action:",i,a)})}},fieldTypes:{isNHSNumber:e=>typeof e=="string"&&/^\d{3}\s?\d{3}\s?\d{4}$/.test(e.replace(/\s/g,"")),isEWSScore:e=>typeof e=="number"&&e>=0&&e<=20,isMedicalDate:e=>typeof e=="string"&&!isNaN(Date.parse(e))}};function xd(e){return{primaryField:e?.primaryField||"name",secondaryFields:e?.secondaryFields||[],badges:e?.badgeFields?.map(t=>({fieldKey:t,className:"adaptive-card__badge"}))||[],hiddenFields:e?.hiddenFields||[],cardTemplate:e?.cardTemplate?(t,n,r)=>e.cardTemplate(t,n):void 0,classPrefix:"adaptive-card--generic"}}function wd(e){if(!e||e.length===0)return!1;const t=e[0];return t.ews_score!==void 0||t.nhs_number!==void 0||t.patient_name!==void 0||t.ward!==void 0||t.consultant!==void 0}function V_(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const i=[...e.selectedRows];return i[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:i};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:a}=t.payload,s=new Array(a).fill(!1),l=new Array(a).fill(null),c=new Array(a).fill([]);for(let u=0;u<Math.min(e.tabLoadingStates.length,a);u++)s[u]=e.tabLoadingStates[u],l[u]=e.tabErrors[u],c[u]=e.selectedRows[u];return{...e,tabLoadingStates:s,tabErrors:l,selectedRows:c};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}function G_(e,t){const[n,r]=E.useState("cards");return E.useEffect(()=>{if(t){r(t);return}const i=()=>{const a=window.innerWidth;a<e.mobile?r("cards"):a<e.desktop?r("hybrid"):r("table")};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[e,t]),n}function Y_(e){return!e||typeof e!="object"?null:e.appointment_type||e.appointment_time||e.clinic?"appointment":e.medication_name||e.medication||e.dose||e.frequency?"medication":e.ews_score!==void 0||e.respiratory_rate!==void 0||e.spo2!==void 0||e.temperature!==void 0||e.systolic_bp!==void 0||e.heart_rate!==void 0?"vitals":e.name||e.patient_name||e.nhs_number||e.ward||e.bed?"patient":null}function q_(e,t,n,r){const i=r?{...r.defaultCardConfig,...n}:{...O_,...n};if(r&&r.cardTemplates){const a=Y_(e);if(a&&r.cardTemplates[a]){const s=r.cardTemplates[a](e,t,i);if(s)return{variant:"default",children:s}}}return i.cardTemplate&&i.cardTemplate(e,t,i),bd(e,t,i)}const Do=({breakpoints:e={mobile:768,tablet:1024,desktop:1200},forceLayout:t,cardConfig:n={},experimental:r={},enableAdvancedSorting:i=!1,topActions:a,bottomActions:s,gridActions:l,forceGridActionsAbove:c,tabPanels:u,dataConfig:d,selectedIndex:f,onTabChange:m,ariaLabel:g="Data grid",ariaDescription:y,orientation:h="horizontal",id:p,disabled:b=!1,className:w,...D})=>{const S=G_(e,t),v=f!==void 0,T=f??0,k=E.useMemo(()=>{if(u.some(W=>W.data&&W.data.length>0&&wd(W.data))){const W=xd(n);return{..._d.defaultCardConfig,...W}}else return xd(n)},[n,u]),C=E.useMemo(()=>u.some(W=>W.data&&W.data.length>0&&wd(W.data))?_d:void 0,[u]),x=E.useMemo(()=>({selectedIndex:T,tabLoadingStates:new Array(u.length).fill(!1),tabErrors:new Array(u.length).fill(null),sortConfig:[],selectedRows:new Array(u.length).fill([]),globalSelectedRowData:null,filters:void 0}),[T,u.length]),[I,M]=E.useReducer(V_,x),j=E.useRef([]),L=E.useRef([]),N=E.useRef([]),F=E.useRef(null),[P,$]=E.useState({focusArea:"tabs",focusedTabIndex:0,focusedCardIndex:0,selectedCardIndex:-1,isGridActive:!1,focusedCardElementIndex:0,cardElements:[],isCardNavigationActive:!1,gridColumns:1,gridRows:1,cardSortConfig:null,focusedSortControlIndex:0,isSortControlsActive:!1}),ne=E.useCallback(B=>{if(!B.current)return{columns:1,rows:0};const W=B.current,ee=W.querySelectorAll(".aria-tabs-datagrid-adaptive__card-wrapper");if(ee.length===0)return{columns:1,rows:0};const G=W.offsetWidth,q=ee[0].offsetWidth,J=Math.floor(G/q)||1,te=Math.ceil(ee.length/J);return{columns:J,rows:te}},[]),X=E.useCallback((B,W)=>({row:Math.floor(B/W),col:B%W}),[]),O=E.useCallback((B,W,ee)=>B*ee+W,[]),H=E.useCallback((B,W,ee,G)=>{const{row:A,col:q}=X(B,G);let J=A,te=q;switch(W){case"up":J=Math.max(0,A-1);break;case"down":J=Math.min(Math.floor((ee-1)/G),A+1);break;case"left":te=Math.max(0,q-1);break;case"right":te=Math.min(G-1,q+1);break}const K=O(J,te,G);return Math.min(K,ee-1)},[X,O]);E.useEffect(()=>{P.isCardNavigationActive&&P.focusedCardElementIndex>=0&&P.cardElements.length>0&&setTimeout(()=>{const B=P.cardElements[P.focusedCardElementIndex];B&&(B.element.focus(),B.element.scrollIntoView({block:"nearest",behavior:"smooth"}))},0)},[P.isCardNavigationActive,P.focusedCardElementIndex,P.cardElements.length]),E.useEffect(()=>{const B=()=>{if(S==="cards"&&F.current){const{columns:G,rows:A}=ne(F);$(q=>({...q,gridColumns:G,gridRows:A}))}},W=setTimeout(B,200),ee=()=>{setTimeout(B,100)};return window.addEventListener("resize",ee),()=>{clearTimeout(W),window.removeEventListener("resize",ee)}},[S,u,ne]),E.useEffect(()=>{const B=I.tabLoadingStates.length,W=u.length;B!==W&&M({type:"ADJUST_ARRAYS",payload:{newLength:W}})},[u.length,I.tabLoadingStates.length]),E.useEffect(()=>{v&&f!==I.selectedIndex&&M({type:"SET_SELECTED_INDEX",payload:f})},[v,f,I.selectedIndex]);const z=E.useCallback(B=>{B>=0&&B<u.length&&!u[B].disabled&&(M({type:"SET_SELECTED_INDEX",payload:B}),m?.(B))},[u,m]),re=E.useCallback(B=>{console.log("Card selected:",B),M({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:B})},[]),U=E.useCallback(B=>{const W=L.current[B];W&&(W.focus(),W.scrollIntoView({block:"nearest",behavior:"smooth"}))},[]),de=E.useCallback(B=>{const W=L.current[B];if(!W)return[];const ee=['button:not([disabled]):not([aria-hidden="true"])','a[href]:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','select:not([disabled]):not([aria-hidden="true"])','textarea:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])','.healthcare-card__detail[tabindex]:not([tabindex="-1"])',".healthcare-card__action:not([disabled])",".tag:not([disabled])"].join(", "),G=W.querySelectorAll(ee);return Array.from(G).map((A,q)=>({id:A.id||`card-${B}-element-${q}`,element:A,label:A.getAttribute("aria-label")||A.textContent?.trim()||A.getAttribute("title")||`Element ${q+1}`,type:A.tagName.toLowerCase()==="button"?"button":A.tagName.toLowerCase()==="a"?"link":["input","select","textarea"].includes(A.tagName.toLowerCase())?"input":"generic"}))},[]),ye=E.useRef(null),ue=E.useCallback(B=>{const W=ye.current;if(!W)return;const ee=document.createElement("div");ee.setAttribute("aria-live","polite"),ee.setAttribute("aria-atomic","true"),ee.className="sr-only",ee.textContent=B,W.appendChild(ee),setTimeout(()=>{W.contains(ee)&&W.removeChild(ee)},1e3)},[]),ce=E.useCallback(B=>{const W=B.filter(G=>G.sortable!==!1),ee=[{value:"",label:"Sort by..."}];return W.forEach(G=>{const A=G.label||G.key;G.key==="name"?ee.push({value:`${G.key}-asc`,label:`${A} (A-Z)`},{value:`${G.key}-desc`,label:`${A} (Z-A)`}):G.key==="ews_score"||G.key.includes("score")?ee.push({value:`${G.key}-desc`,label:`${A} (High-Low)`},{value:`${G.key}-asc`,label:`${A} (Low-High)`}):G.key==="age"||G.key.includes("date")||G.key.includes("time")?ee.push({value:`${G.key}-desc`,label:`${A} (Oldest-Youngest)`},{value:`${G.key}-asc`,label:`${A} (Youngest-Oldest)`}):ee.push({value:`${G.key}-asc`,label:`${A} (A-Z)`},{value:`${G.key}-desc`,label:`${A} (Z-A)`})}),ee},[]),Q=E.useCallback((B,W)=>W?[...B].sort((ee,G)=>{const A=ee[W.key],q=G[W.key];if(A==null&&q==null)return 0;if(A==null)return 1;if(q==null)return-1;const J=Number(A),te=Number(q);if(!isNaN(J)&&!isNaN(te))return W.direction==="asc"?J-te:te-J;const K=String(A).toLowerCase(),se=String(q).toLowerCase(),be=K.localeCompare(se);return W.direction==="asc"?be:-be}):B,[]),ie=E.useCallback(B=>{if(!B){$(K=>({...K,cardSortConfig:null})),ue("Card sorting cleared");return}const[W,ee]=B.split("-"),G={key:W,direction:ee};$(K=>({...K,cardSortConfig:G}));const J=u[I.selectedIndex]?.columns.find(K=>K.key===W)?.label||W;ue(`Cards sorted by ${J} in ${ee==="asc"?"ascending":"descending"} order`)},[u,I.selectedIndex,ue]),fe=E.useCallback(B=>{const G=u[I.selectedIndex]?.columns.find(q=>q.key===B.key)?.label||B.key,A=B.direction==="asc"?"ascending":"descending";return`${G} (${A})`},[u,I.selectedIndex]),Y=E.useCallback(B=>{const W=u[I.selectedIndex];if(i){const ee=I.sortConfig;return!ee||ee.length===0?B:[...B].sort((G,A)=>{for(const{key:q,direction:J}of ee){let te=G[q],K=A[q];const se=W?.columns.find(Pe=>Pe.key===q);if(se?.cardRenderer?(te=se.cardRenderer(G),K=se.cardRenderer(A)):se?.render&&(te=se.render(G),K=se.render(A)),te==null&&K==null)continue;if(te==null)return J==="asc"?-1:1;if(K==null)return J==="asc"?1:-1;const be=Number(te),_e=Number(K);if(!isNaN(be)&&!isNaN(_e)){const Pe=be-_e;if(Pe!==0)return J==="asc"?Pe:-Pe;continue}const Se=String(te).toLowerCase(),Te=String(K).toLowerCase(),pe=Se.localeCompare(Te);if(pe!==0)return J==="asc"?pe:-pe}return 0})}else return Q(B,P.cardSortConfig)},[i,I.sortConfig,P.cardSortConfig,Q,u,I.selectedIndex]),he=E.useCallback((B,W)=>{const ee=de(B),G=ee[W];if(G){G.element.scrollIntoView({block:"nearest",behavior:"smooth"});const A=`Focused on ${G.label}, ${G.type} ${W+1} of ${ee.length} within card`;ue(A)}},[de,ue]),oe=E.useCallback(B=>{j.current[B]?.focus()},[]),ge=E.useCallback(()=>{const B=N.current[0];if(!B)return[];const W=['select:not([disabled]):not([aria-hidden="true"])','button:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])'].join(", "),ee=B.querySelectorAll(W);return Array.from(ee)},[]),R=E.useCallback(B=>{if(B===0){const W=N.current[0],ee=W?.querySelector(".sort-controls-row");if(ee){ee.setAttribute("tabindex","-1"),ee.focus();const A=`Sort controls group with ${ge().length} interactive elements. Press Enter or Space to begin navigating controls.`;ue(A)}else W&&W.focus()}else{const W=ge(),ee=B-1,G=W[ee];if(G){G.focus();const A=G.tagName.toLowerCase()==="select",q=G.tagName.toLowerCase()==="button",J=A?"dropdown":q?"button":"control",te=A?". Use Space key to open dropdown":"",K=`${J} ${ee+1} of ${W.length}${te}`;ue(K)}}},[ge,ue]),V=E.useCallback((B,W)=>{const{key:ee}=B,G=u[I.selectedIndex],A=G?.data.length||0;if(ee==="ArrowLeft"&&B.shiftKey){B.preventDefault(),B.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(ee==="ArrowRight"&&B.shiftKey){B.preventDefault(),B.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!P.isCardNavigationActive){switch(ee){case"ArrowUp":if(B.preventDefault(),W===0)$(K=>({...K,focusArea:"sort-controls",focusedSortControlIndex:0,isSortControlsActive:!1})),R(0);else{const K=H(W,"up",A,P.gridColumns);K!==W&&($(se=>({...se,focusedCardIndex:K})),U(K),ue(`Moved to card ${K+1} of ${A}`))}break;case"ArrowDown":B.preventDefault();const q=H(W,"down",A,P.gridColumns);q!==W&&($(K=>({...K,focusedCardIndex:q})),U(q),ue(`Moved to card ${q+1} of ${A}`));break;case"ArrowLeft":B.preventDefault();const J=H(W,"left",A,P.gridColumns);J!==W?($(K=>({...K,focusedCardIndex:J})),U(J),ue(`Moved to card ${J+1} of ${A}`)):I.selectedIndex>0&&(M({type:"SET_SELECTED_INDEX",payload:I.selectedIndex-1}),$(K=>({...K,focusArea:"tabs"})),setTimeout(()=>oe(I.selectedIndex-1),0));break;case"ArrowRight":B.preventDefault();const te=H(W,"right",A,P.gridColumns);te!==W?($(K=>({...K,focusedCardIndex:te})),U(te),ue(`Moved to card ${te+1} of ${A}`)):I.selectedIndex<u.length-1&&(M({type:"SET_SELECTED_INDEX",payload:I.selectedIndex+1}),$(K=>({...K,focusArea:"tabs"})),setTimeout(()=>oe(I.selectedIndex+1),0));break;case"Enter":if(G?.data[W]){B.preventDefault(),$(se=>({...se,selectedCardIndex:W}));const K=de(W);K.length>0?($(se=>({...se,focusArea:"card",isCardNavigationActive:!0,focusedCardElementIndex:0,cardElements:K,selectedCardIndex:W})),ue(`Card ${W+1} selected and navigation activated. ${K.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`)):ue(`Card ${W+1} selected.`)}break;case" ":if(G?.data[W]){B.preventDefault(),$(se=>({...se,selectedCardIndex:se.selectedCardIndex===W?-1:W}));const K=P.selectedCardIndex===W;ue(`Card ${W+1} ${K?"deselected":"selected"}.`)}break}return}switch(ee){case"ArrowUp":case"ArrowLeft":B.preventDefault();const q=Math.max(0,P.focusedCardElementIndex-1);$(se=>({...se,focusedCardElementIndex:q})),he(W,q);break;case"ArrowDown":case"ArrowRight":B.preventDefault();const J=Math.min(P.cardElements.length-1,P.focusedCardElementIndex+1);$(se=>({...se,focusedCardElementIndex:J})),he(W,J);break;case"Enter":B.preventDefault();const te=P.cardElements[P.focusedCardElementIndex];te&&(te.element.click(),ue(`Activated ${te.label}`));break;case" ":B.preventDefault();const K=P.cardElements[P.focusedCardElementIndex];if(K){const se=new MouseEvent("dblclick",{bubbles:!0});K.element.dispatchEvent(se),ue(`Double-clicked ${K.label}`)}break;case"Escape":B.preventDefault(),$(se=>({...se,focusArea:"cards",isCardNavigationActive:!1,focusedCardElementIndex:0,cardElements:[]})),setTimeout(()=>U(W),0),ue("Exited card navigation, returned to card level");break;case"Home":B.preventDefault(),P.cardElements.length>0&&($(se=>({...se,focusedCardElementIndex:0})),he(W,0));break;case"End":if(B.preventDefault(),P.cardElements.length>0){const se=P.cardElements.length-1;$(be=>({...be,focusedCardElementIndex:se})),he(W,se)}break}},[P,I.selectedIndex,u,re,U,oe,$,de,he,ue]),le=E.useCallback(B=>{const W=j.current[B],ee=W?.parentElement;if(!W||!ee){console.log("Tab or container not found for mobile scroll");return}const G=W.getBoundingClientRect(),A=ee.getBoundingClientRect();G.left>=A.left&&G.right<=A.right||(console.log("Tab not visible, scrolling into view (mobile)"),W.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[]),me=E.useCallback((B,W)=>{if(S!=="cards")return;const{key:ee}=B;switch(ee){case"ArrowLeft":B.preventDefault();const G=W>0?W-1:u.length-1;z(G),$(te=>({...te,focusedTabIndex:G})),j.current[G]?.focus(),le(G);break;case"ArrowRight":B.preventDefault();const A=W<u.length-1?W+1:0;z(A),$(te=>({...te,focusedTabIndex:A})),j.current[A]?.focus(),le(A);break;case"ArrowDown":B.preventDefault();const q=u[I.selectedIndex];q&&q.columns&&q.columns.length>0?($(te=>({...te,focusArea:"sort-controls",focusedSortControlIndex:0})),R(0)):($(te=>({...te,focusArea:"cards",focusedCardIndex:0})),U(0));break;case"Home":B.preventDefault(),z(0),$(te=>({...te,focusedTabIndex:0})),j.current[0]?.focus(),le(0);break;case"End":B.preventDefault();const J=u.length-1;z(J),$(te=>({...te,focusedTabIndex:J})),j.current[J]?.focus(),le(J);break;case"Enter":case" ":B.preventDefault(),z(W);break}},[u.length,z,S,U,$,le]),ae=E.useCallback((B,W)=>{if(S!=="cards")return;const{key:ee}=B,G=u[I.selectedIndex];if(W===0&&!P.isSortControlsActive){switch(ee){case"ArrowUp":B.preventDefault(),$(q=>({...q,focusArea:"tabs",isSortControlsActive:!1})),oe(I.selectedIndex);break;case"ArrowDown":B.preventDefault(),G?.data&&G.data.length>0&&($(q=>({...q,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),U(0));break;case"Enter":case" ":B.preventDefault();const A=ge();if(A.length>0){$(J=>({...J,isSortControlsActive:!0,focusedSortControlIndex:1})),R(1);const q=`Entered sort controls navigation mode. ${A.length} controls available. Use arrow keys to navigate between controls.`;ue(q)}break;case"Escape":B.preventDefault(),$(q=>({...q,isSortControlsActive:!1,focusArea:"tabs"})),oe(I.selectedIndex);break}return}if(P.isSortControlsActive){const q=ge().length;switch(ee){case"ArrowLeft":B.preventDefault();const J=P.focusedSortControlIndex>1?P.focusedSortControlIndex-1:q;$(K=>({...K,focusedSortControlIndex:J})),R(J);break;case"ArrowRight":B.preventDefault();const te=P.focusedSortControlIndex<q?P.focusedSortControlIndex+1:1;$(K=>({...K,focusedSortControlIndex:te})),R(te);break;case"ArrowDown":if(B.preventDefault(),P.isSortControlsActive){const K=P.focusedSortControlIndex<q?P.focusedSortControlIndex+1:1;$(se=>({...se,focusedSortControlIndex:K})),R(K)}else G?.data&&G.data.length>0&&($(K=>({...K,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),U(0));break;case"ArrowUp":B.preventDefault(),$(K=>({...K,isSortControlsActive:!1,focusArea:"sort-controls"})),R(0);break;case"Escape":B.preventDefault(),$(K=>({...K,isSortControlsActive:!1,focusArea:"sort-controls",focusedSortControlIndex:0})),R(0);break}}},[S,u,I.selectedIndex,P.isSortControlsActive,P.focusedSortControlIndex,R,oe,U,$,ue]);if(S==="cards"){const B=u[I.selectedIndex];return o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${w||""}`,children:[o.jsxs("div",{className:"aria-tabs-datagrid-adaptive__header",children:[o.jsx("div",{role:"tablist","aria-label":g,"aria-describedby":`${y||""} ${p?`${p}-navigation-help`:""}`.trim(),"aria-orientation":h,className:"aria-tabs-datagrid__tabs",children:u.map((W,ee)=>{const G=ee===I.selectedIndex,A=W.disabled||b;return o.jsxs("button",{role:"tab",id:`tab-${W.id}`,"aria-controls":`panel-${W.id}`,"aria-selected":G,"aria-disabled":A,tabIndex:G?0:-1,ref:q=>{j.current[ee]=q},onClick:()=>z(ee),onKeyDown:q=>me(q,ee),disabled:A,className:["aria-tabs-datagrid__tab",G?"aria-tabs-datagrid__tab--selected":"",A?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[o.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:W.label}),I.tabLoadingStates[ee]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),I.tabErrors[ee]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},W.id)})}),a&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions",children:a})]}),B&&B.columns&&o.jsx(o.Fragment,{children:i?o.jsx(pd,{sortConfig:I.sortConfig||[],columns:B.columns.map(W=>({key:W.key,label:W.label})),onSortChange:W=>{M({type:"SET_SORT",payload:W})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls"}):o.jsx("div",{className:"aria-tabs-datagrid-adaptive__sort-controls",role:"region","aria-label":"Sort controls",tabIndex:P.focusArea==="sort-controls"?0:-1,ref:W=>{N.current[0]=W},onKeyDown:W=>ae(W,0),children:o.jsxs("div",{className:"sort-controls-row",children:[o.jsxs("div",{className:"sort-select-container",children:[o.jsx("label",{htmlFor:`card-sort-${B.id}`,className:"sort-label",children:"Sort cards by"}),o.jsx(oi,{id:`card-sort-${B.id}`,name:`card-sort-${B.id}`,value:P.cardSortConfig?`${P.cardSortConfig.key}-${P.cardSortConfig.direction}`:"",onChange:W=>ie(W.target.value),className:"sort-select",children:ce(B.columns).map(W=>o.jsx("option",{value:W.value,children:W.label},W.value))})]}),P.cardSortConfig&&o.jsxs("div",{className:"sort-indicator",role:"status","aria-live":"polite",children:[o.jsxs("span",{className:"sort-indicator-text",children:["Sorted by ",fe(P.cardSortConfig)]}),o.jsx(bt,{variant:"secondary",size:"small",onClick:()=>ie(""),"aria-label":"Clear card sorting",className:"sort-clear-button",children:"Clear"})]})]})})}),o.jsx("div",{ref:F,className:"aria-tabs-datagrid-adaptive__cards",role:"grid","aria-label":`${B?.label||"Data"} cards in ${P.gridRows} rows and ${P.gridColumns} columns`,"aria-rowcount":P.gridRows,"aria-colcount":P.gridColumns,id:`panel-${B?.id}`,"aria-labelledby":`tab-${B?.id}`,children:Y(B?.data||[]).map((W,ee)=>{const G=P.selectedCardIndex===ee,A=P.focusedCardIndex===ee&&P.focusArea==="cards",q=P.focusedCardIndex===ee&&P.focusArea==="card"&&P.isCardNavigationActive,J=ee===0&&P.focusArea!=="cards",te=A||J,K=X(ee,P.gridColumns);if(n.cardTemplate){const _e=n.cardTemplate(W,B.columns);return o.jsx("div",{role:"row","aria-rowindex":K.row+1,className:"aria-tabs-datagrid-adaptive__row",children:o.jsx("div",{ref:Se=>{L.current[ee]=Se},className:["aria-tabs-datagrid-adaptive__card-wrapper",G?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",A?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",q?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":K.col+1,"aria-selected":G,"aria-expanded":q,"aria-description":q?`Card navigation active. ${P.cardElements.length} interactive elements available.`:void 0,tabIndex:te?0:-1,onClick:()=>{$(Se=>({...Se,selectedCardIndex:Se.selectedCardIndex===ee?-1:ee})),re(W)},onKeyDown:Se=>V(Se,ee),onFocus:()=>{$(Se=>Se.isCardNavigationActive?Se:Se.focusedCardIndex!==ee||Se.focusArea!=="cards"?{...Se,focusedCardIndex:ee,focusArea:"cards"}:Se)},children:_e})},`card-${ee}`)}const se=q_(W,B.columns,k,C),be=[se.className||"",G?"aria-tabs-datagrid-adaptive__card--selected":"",A?"aria-tabs-datagrid-adaptive__card--focused":"",q?"aria-tabs-datagrid-adaptive__card--card-navigation":""].filter(Boolean).join(" ");return o.jsx("div",{role:"row","aria-rowindex":K.row+1,className:"aria-tabs-datagrid-adaptive__row",children:o.jsx("div",{className:["aria-tabs-datagrid-adaptive__card-wrapper",G?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",A?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",q?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":K.col+1,"aria-selected":G,"aria-expanded":q,onKeyDown:_e=>{_e.key==="Enter"&&(_e.preventDefault(),$(Se=>({...Se,selectedCardIndex:ee}))),V(_e,ee)},children:o.jsx(wo,{...se,ref:_e=>{L.current[ee]=_e},className:be,"aria-label":`${se["aria-label"]||se.heading}. ${q?`Card navigation active with ${P.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.`:"Press Enter to navigate within card elements."}`,tabIndex:te?0:-1,onClick:()=>{$(_e=>({..._e,selectedCardIndex:_e.selectedCardIndex===ee?-1:ee})),re(W)},onKeyDown:_e=>V(_e,ee),onFocus:()=>{P.isCardNavigationActive||$(_e=>_e.focusedCardIndex!==ee||_e.focusArea!=="cards"?{..._e,focusedCardIndex:ee,focusArea:"cards",focusedCardElementIndex:0,cardElements:[]}:_e)}})})},`card-${ee}`)})}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s}),o.jsx("div",{ref:ye,className:"aria-tabs-datagrid-adaptive__announcements","aria-hidden":"true",style:{position:"fixed",top:"-1px",left:"-1px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0,padding:0,margin:0}})]})}return S==="hybrid"?o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${w||""}`,children:[a&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:a}),o.jsx(Ha,{tabPanels:u,dataConfig:d,ariaLabel:g,ariaDescription:y,orientation:h,id:p,disabled:b,selectedIndex:f,onTabChange:m,className:"aria-tabs-datagrid-adaptive__table--hybrid",actions:l,forceActionsAbove:c,...D}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s})]}):o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${w||""}`,children:[a&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:a}),o.jsx(Ha,{tabPanels:u,dataConfig:d,ariaLabel:g,ariaDescription:y,orientation:h,id:p,disabled:b,selectedIndex:f,onTabChange:m,actions:l,forceActionsAbove:c,...D}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s})]})},Sd=e=>{const t=Co.find(n=>n.value===e);return t?t.icon:null},X_={ecommerce:{name:"E-commerce",description:"Product catalogs with pricing, inventory, and ratings",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.priceRange){const[r,i]=t.priceRange,a=n.discountedPrice||n.price;if(a<r||a>i)return!1}return!(t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.inStock!==void 0&&n.inStock!==t.inStock||t.minRating!==void 0&&n.rating<t.minRating||t.tags&&t.tags.length>0&&!t.tags.some(r=>n.tags.includes(r)))}):e,booleanRenderer:e=>Sd(e),getDataId:e=>`ecommerce-${e.id}`},createTabs:e=>Ua(e,[{id:"all-products",label:"All Products",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Price",render:n=>n.discountedPrice?`$${n.price.toFixed(2)} â†’ $${n.discountedPrice.toFixed(2)}`:`$${n.price.toFixed(2)}`},{key:"inStock",label:"Availability"},{key:"category",label:"Category"},{key:"rating",label:"Rating",render:n=>`${n.rating}/5 (${n.reviews} reviews)`}],ariaLabel:"All Products Grid",ariaDescription:"Complete product catalog with pricing and availability"},{id:"on-sale",label:"On Sale",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Original Price",render:n=>`$${n.price.toFixed(2)}`},{key:"discountedPrice",label:"Sale Price",render:n=>`$${n.discountedPrice?.toFixed(2)||"N/A"}`},{key:"discount",label:"Discount",render:n=>n.discountedPrice?`${((n.price-n.discountedPrice)/n.price*100).toFixed(0)}% OFF`:"N/A"}],filter:n=>n.filter(r=>r.discountedPrice!==void 0),ariaLabel:"Sale Products Grid",ariaDescription:"Products currently on sale with discounted pricing"},{id:"high-rated",label:"Top Rated",columns:[{key:"name",label:"Product Name"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.rating>=4),sortConfig:[{key:"rating",direction:"desc"}],ariaLabel:"Top Rated Products Grid",ariaDescription:"Highest rated products with 4+ star ratings"}])},financial:{name:"Financial",description:"Transaction data with amounts, categories, and statuses",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.dateRange){const[r,i]=t.dateRange;if(n.date<r||n.date>i)return!1}if(t.amountRange){const[r,i]=t.amountRange;if(Math.abs(n.amount)<r||Math.abs(n.amount)>i)return!1}return!(t.types&&t.types.length>0&&!t.types.includes(n.type)||t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.pending!==void 0&&n.pending!==t.pending)}):e,booleanRenderer:e=>Sd(e),getDataId:e=>`financial-${e.id}`},createTabs:e=>Ua(e,[{id:"all-transactions",label:"All Transactions",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"},{key:"pending",label:"Status"}],sortConfig:[{key:"date",direction:"desc"}],ariaLabel:"All Transactions Grid",ariaDescription:"Complete transaction history with amounts and categories"},{id:"credits",label:"Credits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`+$${n.amount.toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="credit"),ariaLabel:"Credit Transactions Grid",ariaDescription:"Incoming payments and credits only"},{id:"debits",label:"Debits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`-$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="debit"),ariaLabel:"Debit Transactions Grid",ariaDescription:"Outgoing payments and charges only"},{id:"pending",label:"Pending",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"type",label:"Type"}],filter:n=>n.filter(r=>r.pending),ariaLabel:"Pending Transactions Grid",ariaDescription:"Transactions awaiting processing"}])}},Cd=(e,t)=>{const n=X_[e];return{dataConfig:n.dataConfig,tabPanels:n.createTabs(t)}},kd=[{name:"Sarah Johnson",age:34,ews_data:{respiratory_rate_bpm:16,sp02:98,temperature:36.8,systolic_bp:140,heart_rate:82,avpu:"alert"},ews_score:3,ward_name:"Cardiology",room_name:"Room A",bed_name:"A-1",bed_type:"bed",admin_note:"Hypertension monitoring",pathway:"Standard",speciality:"Cardiology",consultant:"Dr. Smith",local_authority:"NHS Trust",early_discharge_notification:"not_required",needs_based_assessment:!1,medically_optimised:!0,criteria_to_reside:!0,date_medically_optimised:"2024-01-15",anticipated_discharge_date:"2024-01-18",dru_suitability:!1,optica_planned_discharge_date:"2024-01-18",optica_date_confirmed:"2024-01-16",dsum:null,medications_tta:"None required",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!1,initial_therapy_contact:"",equipment:"None",district_nurse_referral:!1},{name:"Michael Chen",age:67,ews_data:{respiratory_rate_bpm:20,sp02:94,temperature:37.2,systolic_bp:160,heart_rate:95,avpu:"alert"},ews_score:7,ward_name:"Surgery",room_name:"Room B",bed_name:"B-3",bed_type:"bed",admin_note:"Post-operative monitoring",pathway:"Surgical",speciality:"General Surgery",consultant:"Dr. Johnson",local_authority:"NHS Trust",early_discharge_notification:"due",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!0,date_medically_optimised:"2024-01-17",anticipated_discharge_date:"2024-01-20",dru_suitability:!0,optica_planned_discharge_date:"2024-01-20",optica_date_confirmed:"2024-01-16",dsum:"Complex discharge",medications_tta:"Pain management",transport_booking:!0,transport_status:"In Progress",transport_date:"2024-01-20",transport_mobility:"Wheelchair",fast_track:!1,initial_therapy_contact:"2024-01-17",equipment:"Walking frame",district_nurse_referral:!0},{name:"Emma Thompson",age:28,ews_data:{respiratory_rate_bpm:24,sp02:90,temperature:38.5,systolic_bp:110,heart_rate:105,avpu:"alert"},ews_score:5,ward_name:"Respiratory",room_name:"Room C",bed_name:"C-2",bed_type:"bed",admin_note:"Pneumonia treatment",pathway:"Respiratory",speciality:"Respiratory Medicine",consultant:"Dr. Williams",local_authority:"NHS Trust",early_discharge_notification:"overdue",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!1,date_medically_optimised:"",anticipated_discharge_date:"2024-01-22",dru_suitability:!1,optica_planned_discharge_date:"2024-01-22",optica_date_confirmed:"",dsum:null,medications_tta:"Antibiotics",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!0,initial_therapy_contact:"",equipment:"Oxygen",district_nurse_referral:!1}],Z_=[{id:"appt-001",appointment_time:"2024-01-18T09:00:00Z",patient_name:"Sarah Johnson",appointment_type:"Cardiology Consultation",consultant:"Dr. Smith",location:"Clinic Room 3",duration:30,status:"pending"},{id:"appt-002",appointment_time:"2024-01-18T10:30:00Z",patient_name:"Michael Davis",appointment_type:"Post-op Follow-up",consultant:"Dr. Johnson",location:"Surgery Ward",duration:15,status:"active"},{id:"appt-003",appointment_time:"2024-01-18T14:00:00Z",patient_name:"Emma Thompson",appointment_type:"Respiratory Assessment",consultant:"Dr. Wilson",location:"Emergency Department",duration:45,status:"pending"}],K_=[{id:"med-001",medication:"Amlodipine",dose:"5mg",frequency:"Once daily",route:"Oral",next_due:"2024-01-18T08:00:00Z",prescriber:"Dr. Smith",patient_name:"Sarah Johnson",allergies:null,priority:"medium"},{id:"med-002",medication:"Morphine",dose:"10mg",frequency:"Every 4 hours",route:"IV",next_due:"2024-01-18T10:00:00Z",prescriber:"Dr. Johnson",patient_name:"Michael Davis",allergies:"Codeine allergy",priority:"high"},{id:"med-003",medication:"Salbutamol",dose:"2 puffs",frequency:"As needed",route:"Inhaled",next_due:"2024-01-18T12:00:00Z",prescriber:"Dr. Wilson",patient_name:"Emma Thompson",allergies:null,priority:"high"}],J_=[{id:"vitals-001",patient_name:"Sarah Johnson",recorded_time:"2024-01-18T07:30:00Z",temperature:36.8,blood_pressure:"140/90",heart_rate:82,respiratory_rate:16,oxygen_saturation:98,ews_score:3,priority:"medium"},{id:"vitals-002",patient_name:"Michael Davis",recorded_time:"2024-01-18T08:15:00Z",temperature:37.2,blood_pressure:"130/85",heart_rate:98,respiratory_rate:20,oxygen_saturation:95,ews_score:7,priority:"high"},{id:"vitals-003",patient_name:"Emma Thompson",recorded_time:"2024-01-18T09:00:00Z",temperature:38.5,blood_pressure:"110/70",heart_rate:105,respiratory_rate:24,oxygen_saturation:90,ews_score:9,priority:"high"}],Td=[{id:"PROD001",name:"Wireless Headphones",price:199.99,discountedPrice:149.99,inStock:!0,category:"Electronics",rating:4.5,reviews:1247,tags:["wireless","bluetooth","premium"]},{id:"PROD002",name:"Running Shoes",price:129.99,inStock:!0,category:"Sports",rating:4.8,reviews:892,tags:["running","athletic","comfortable"]},{id:"PROD003",name:"Coffee Maker",price:89.99,discountedPrice:59.99,inStock:!1,category:"Kitchen",rating:4.2,reviews:456,tags:["kitchen","coffee","appliance"]},{id:"PROD004",name:"Smartphone Case",price:24.99,inStock:!0,category:"Accessories",rating:4,reviews:234,tags:["protection","mobile","durable"]}],Nd=[{id:"TXN001",date:new Date("2024-01-15"),amount:2500,type:"credit",category:"Salary",description:"Monthly salary payment",accountId:"ACC001",pending:!1,recurring:!0},{id:"TXN002",date:new Date("2024-01-14"),amount:89.5,type:"debit",category:"Groceries",description:"Supermarket shopping",accountId:"ACC001",pending:!1,recurring:!1},{id:"TXN003",date:new Date("2024-01-16"),amount:1200,type:"debit",category:"Rent",description:"Monthly rent payment",accountId:"ACC001",pending:!0,recurring:!0},{id:"TXN004",date:new Date("2024-01-13"),amount:150,type:"credit",category:"Refund",description:"Product return refund",accountId:"ACC001",pending:!1,recurring:!1}],jd=[{id:"LEAD001",companyName:"Tech Solutions Inc",contactPerson:"John Smith",email:"john@techsolutions.com",status:"qualified",value:5e4,lastContact:new Date("2024-01-15"),source:"Website",isHotLead:!0},{id:"LEAD002",companyName:"Global Industries",contactPerson:"Maria Garcia",email:"maria@globalind.com",status:"contacted",value:25e3,lastContact:new Date("2024-01-14"),source:"Referral",isHotLead:!1},{id:"LEAD003",companyName:"StartupXYZ",contactPerson:"Alex Johnson",email:"alex@startupxyz.com",status:"new",value:15e3,lastContact:new Date("2024-01-16"),source:"Cold Call",isHotLead:!0}],Q_={dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>!(t.status&&!t.status.includes(n.status)||t.minValue&&n.value<t.minValue||t.hotLeadsOnly&&!n.isHotLead)):e,booleanRenderer:e=>o.jsx("span",{style:{color:e?"#dc2626":"#6b7280",fontWeight:e?"bold":"normal"},children:e?"ðŸ”¥ Hot Lead":"ðŸ“‹ Standard"}),getDataId:e=>`business-${e.id}`},ex=()=>[{id:"patients",label:"Patients",data:kd,columns:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Records",ariaDescription:"Healthcare patient management with EWS monitoring",cardTemplate:(e,t)=>o.jsx(ko,{data:e,columns:t,onSelect:n=>console.log("Selected patient:",n),onAction:(n,r)=>console.log("Patient action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})},{id:"appointments",label:"Appointments",data:Z_,columns:[{key:"appointment_time",label:"Time"},{key:"patient_name",label:"Patient"},{key:"appointment_type",label:"Type"},{key:"consultant",label:"Consultant"}],ariaLabel:"Patient Appointments",ariaDescription:"Scheduled appointments and consultations",cardTemplate:(e,t)=>o.jsx(To,{data:e,columns:t,onSelect:n=>console.log("Selected appointment:",n),onAction:(n,r)=>console.log("Appointment action:",n,r),status:e.status})},{id:"medications",label:"Medications",data:K_,columns:[{key:"medication",label:"Medication"},{key:"dose",label:"Dose"},{key:"frequency",label:"Frequency"},{key:"next_due",label:"Next Due"}],ariaLabel:"Patient Medications",ariaDescription:"Medication administration and scheduling",cardTemplate:(e,t)=>o.jsx(No,{data:e,columns:t,onSelect:n=>console.log("Selected medication:",n),onAction:(n,r)=>console.log("Medication action:",n,r),priority:e.priority})},{id:"vitals",label:"Vital Signs",data:J_,columns:[{key:"patient_name",label:"Patient"},{key:"recorded_time",label:"Time"},{key:"temperature",label:"Temperature"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Vital Signs",ariaDescription:"Patient vital signs monitoring and EWS scores",cardTemplate:(e,t)=>o.jsx(jo,{data:e,columns:t,onSelect:n=>console.log("Selected vitals:",n),onAction:(n,r)=>console.log("Vitals action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})}],tx=()=>{const[e,t]=E.useState("healthcare"),n=E.useMemo(()=>({healthcare:{title:"Healthcare Workflow Management",description:"Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals",dataConfig:gd,tabPanels:ex(),data:kd},ecommerce:{title:"E-commerce Product Catalog",description:"Product management with pricing and inventory",...Cd("ecommerce",Td),data:Td},financial:{title:"Financial Transaction Dashboard",description:"Banking and financial data management",...Cd("financial",Nd),data:Nd},business:{title:"Sales Lead Management",description:"Custom CRM configuration with business logic",dataConfig:Q_,tabPanels:Ua(jd,[{id:"all-leads",label:"All Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"status",label:"Status"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"isHotLead",label:"Priority"}],ariaLabel:"All Sales Leads Grid",ariaDescription:"Complete sales pipeline with lead information"},{id:"hot-leads",label:"Hot Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"lastContact",label:"Last Contact",render:i=>i.lastContact.toLocaleDateString()}],filter:i=>i.filter(a=>a.isHotLead),sortConfig:[{key:"value",direction:"desc"}],ariaLabel:"Hot Leads Grid",ariaDescription:"High-priority leads requiring immediate attention"},{id:"pipeline",label:"Active Pipeline",columns:[{key:"companyName",label:"Company"},{key:"status",label:"Status"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"source",label:"Source"}],filter:i=>i.filter(a=>["contacted","qualified"].includes(a.status)),ariaLabel:"Active Pipeline Grid",ariaDescription:"Leads currently in the sales pipeline"}]),data:jd}}),[]),r=n[e];return o.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"AriaTabsDataGrid - Comprehensive Demo"}),o.jsx("p",{style:{fontSize:"1.1rem",color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:"This demo showcases the component's versatility across different domains: healthcare, e-commerce, financial services, and custom business applications. Each configuration demonstrates domain-specific data operations, custom renderers, and specialized filtering logic."}),o.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:Object.keys(n).map(i=>o.jsx(bt,{variant:e===i?"primary":"secondary",onClick:()=>t(i),style:{textTransform:"capitalize"},children:i},i))}),o.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem"},children:[o.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"0.5rem",color:"#1e293b"},children:r.title}),o.jsx("p",{style:{color:"#64748b",marginBottom:"1rem"},children:r.description}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.9rem"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Data Records:"})," ",r.data.length]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Tab Panels:"})," ",r.tabPanels.length]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Features:"})," ",["Row Selection","Custom Filtering","Domain-Specific Renderers","Keyboard Navigation","ARIA Compliance"].join(", ")]})]})]})]}),o.jsx(Ha,{dataConfig:r.dataConfig,tabPanels:r.tabPanels,ariaLabel:`${r.title} Data Grid`,ariaDescription:`Interactive data grid for ${r.description.toLowerCase()}`}),o.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f1f5f9",borderRadius:"0.5rem",border:"1px solid #cbd5e1"},children:[o.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#334155"},children:"Implementation Details"}),o.jsxs("div",{style:{display:"grid",gap:"1rem",fontSize:"0.9rem"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Current Mode:"})," ",e," configuration"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Data Operations:"})," Custom comparator, filter function, and boolean renderer"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Architecture:"})," Generic core with domain-specific plugins and factory helpers"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"State Management:"})," Global row selection with data-object persistence"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Accessibility:"})," Full ARIA support with dynamic labels and descriptions"]})]})]})]})},Mo=e=>o.jsx(qs,{...e}),nx=({children:e,pageTitle:t,pageHeadingProps:n,columnWidth:r=Vn.TwoThirds,mainWrapperSize:i,skipLinkProps:a,headerProps:s,footerProps:l,service:c,navigation:u,search:d,account:f,organisation:m,logo:g,className:y,...h})=>{const p={service:c,navigation:u,search:d,account:f,organisation:m,logo:g,...s};return o.jsxs(o.Fragment,{children:[o.jsx(xo,{...a}),o.jsx(wa,{...p}),o.jsx(Mo,{className:y,...h,children:o.jsx(Xs,{size:i,children:o.jsx(Gn,{children:o.jsxs(Nr,{width:r,children:[t&&o.jsx(on,{size:"l",...n,children:t}),e]})})})}),o.jsx(Ks,{...l})]})},rx=({children:e,title:t,pageHeadingProps:n,columnWidth:r=Vn.TwoThirds,mainWrapperSize:i="small",skipLinkProps:a,headerProps:s,footerProps:l,backLinkProps:c,serviceName:u,serviceHref:d,logo:f,className:m,...g})=>{const y={service:{text:u,href:d},logo:f,navigation:void 0,search:void 0,account:void 0,...s};return o.jsxs(o.Fragment,{children:[o.jsx(xo,{...a}),o.jsx(wa,{...y}),o.jsxs(Mo,{className:m,...g,children:[c&&o.jsx(ba,{...c}),o.jsx(Xs,{size:i,children:o.jsx(Gn,{children:o.jsxs(Nr,{width:r,children:[t&&o.jsx(on,{style:{marginTop:"3rem"},size:"l",...n,children:t}),e]})})})]}),o.jsx(Ks,{...l})]})},Dd=({text:e="Next",html:t,href:n="#",className:r,element:i="a",onClick:a,...s})=>{const l=we("nhsuk-back-link",r),c=we("nhsuk-back-link__link"),u=()=>o.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:o.jsx("path",{d:"M15.5 12c0 .3-.1.5-.3.7l-5 5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4L13.1 12 8.8 7.7c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l5 5c.2.2.3.4.3.7z"})})]});return o.jsx("div",{className:l,children:i==="button"?o.jsx("button",{className:c,type:"button",onClick:a,...s,children:u()}):o.jsx("a",{className:c,href:n,...s,children:u()})})};Dd.displayName="ForwardLink";const Lr=Object.freeze({small:320,smallMax:767,medium:768,large:1025,xlarge:1200,xxlarge:1440});function Md(){return typeof window>"u"?Lr.small:window.innerWidth||document.documentElement.clientWidth||0}function Po(){const[e,t]=Z.useState(Md());Z.useEffect(()=>{if(typeof window>"u")return;const a=()=>t(Md());return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const n=Z.useCallback(a=>e>=Lr[a],[e]),r=Z.useCallback(a=>e<Lr[a],[e]),i=Z.useCallback((a,s)=>e>=Lr[a]&&e<Lr[s],[e]);return{width:e,up:n,down:r,between:i,values:Lr}}function ix(e){const{width:t,values:n}=Po();let r=e.base;const i=["small","medium","large","xlarge","xxlarge"];for(const a of i){const s=n[a];t>=s&&e[a]!==void 0&&(r=e[a])}return r}function Pd(e={}){const{enabled:t=!0,paramSelected:n="nsv",paramDrill:r="nsvDrill"}=e,[i,a]=Z.useState(()=>typeof window>"u"||!t?void 0:new URLSearchParams(window.location.search).get(n)),[s,l]=Z.useState(()=>typeof window>"u"||!t?!1:new URLSearchParams(window.location.search).get(r)==="1");return Z.useEffect(()=>{if(!t||typeof window>"u")return;const c=new URLSearchParams(window.location.search);i?c.set(n,String(i)):c.delete(n),c.set(r,s?"1":"0");const u=`${window.location.pathname}?${c.toString()}${window.location.hash}`;window.history.replaceState(null,"",u)},[i,s,t,n,r]),{selectedId:i,setSelectedId:a,drilledIn:s,setDrilledIn:l}}const ax=({className:e})=>o.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{fill:"currentColor",d:"M10.7 3.3a1 1 0 0 1 0 1.4L7.41 8l3.3 3.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 0Z"})}),sx=({className:e})=>o.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{fill:"currentColor",d:"M5.3 12.7a1 1 0 0 1 0-1.4L8.59 8l-3.3-3.3a1 1 0 0 1 1.42-1.4l4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.42 0Z"})});function Id(e){const{items:t,selectedId:n,defaultSelectedId:r,onSelectionChange:i,renderItemContent:a,renderContent:s,renderSecondaryContent:l,forceLayout:c,animated:u=!0,backLabel:d="Back",nextLabel:f="Next",isLoading:m=!1,emptyState:g,a11y:y,className:h,getId:p=ve=>ve.id,orientation:b="vertical",autoEnableThirdColumn:w=!0,onDrillChange:D,navigationInstructions:S="Use arrow keys to navigate, Enter to open.",initialFocus:v="first",skipFocusOnSelect:T=!1,skipAnnouncements:k=!1,onFocusChange:C,syncUrl:x=!1,urlParamSelected:I="nsv",urlParamDrill:M="nsvDrill",urlSyncDebounceMs:j=0,lazySecondary:L=!1,navFooter:N,collapsibleNav:F=!1,navInitiallyCollapsed:P=!1,onNavCollapseChange:$,collapseToggleLabelShow:ne="Show navigation",collapseToggleLabelHide:X="Hide navigation",collapseToggleIconShow:O,collapseToggleIconHide:H,persistNavCollapsed:z,navCollapsedStorageKey:re="nsvCollapsed",navCollapsedUrlParam:U="nsvCollapsed",autoContentHeader:de,contentHeaderLevel:ye=2,renderContentHeader:ue,contentSubheader:ce,secondarySubheader:Q}=e,{up:ie}=Po(),[fe,Y]=Z.useState(!1);Z.useEffect(()=>{Y(!0)},[]);const he=fe&&ie("medium"),oe=fe&&ie("xlarge");let ge;c?ge=c:he?ge="two-column":ge="list",!c&&w&&l&&oe&&(ge="three-column");const R=Pd({enabled:x,paramSelected:I,paramDrill:M}),[V,le]=Z.useState(()=>R.selectedId!==void 0?R.selectedId:r),me=n!==void 0?n:V,ae=t.find(ve=>p(ve)===me),[B,W]=Z.useState(void 0);Z.useEffect(()=>{if(me===void 0)return;W(me);const ve=setTimeout(()=>W(void 0),220);return()=>clearTimeout(ve)},[me]);const ee=Z.useRef(null),G=Z.useRef(null),A=Z.useRef(null),q=Z.useRef(null),[J,te]=Z.useState(()=>({contentIndex:0,secondaryIndex:0})),[K,se]=Z.useState(()=>"nav"),[be,_e]=Z.useState(0),Se=()=>[q.current,G.current,A.current].filter(Boolean),Te=ve=>{const Ne=Se(),xe=Math.max(0,Math.min(ve,Ne.length-1));Ne[xe]?.focus(),_e(xe)},pe=Z.useCallback(ve=>ve?Array.from(ve.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(xe=>!xe.hasAttribute("disabled")&&xe.tabIndex!==-1):[],[]),Pe=Z.useCallback(ve=>{const Ne=pe(G.current);if(!Ne.length){G.current?.focus();return}const xe=Math.max(0,Math.min(ve,Ne.length-1)),Ae=Ne[xe];Ae.focus(),setTimeout(()=>{document.activeElement!==Ae&&(Ae.focus(),setTimeout(()=>{document.activeElement!==Ae&&Ae.click()},10))},10),te(Xe=>({...Xe,contentIndex:xe}));const ot=Xe=>{Xe.key==="Escape"&&(Xe.preventDefault(),Xe.stopPropagation(),G.current?.focus(),Ae.removeEventListener("keydown",ot))};Ne.forEach(Xe=>{const Qe=Xe._escapeHandler;Qe&&Xe.removeEventListener("keydown",Qe)}),Ae._escapeHandler=ot,Ae.addEventListener("keydown",ot)},[pe]),Be=Z.useCallback(ve=>{const Ne=pe(A.current);if(!Ne.length){A.current?.focus();return}const xe=Math.max(0,Math.min(ve,Ne.length-1)),Ae=Ne[xe];Ae.focus(),setTimeout(()=>{document.activeElement!==Ae&&(Ae.focus(),setTimeout(()=>{document.activeElement!==Ae&&Ae.click()},10))},10),te(Xe=>({...Xe,secondaryIndex:xe}));const ot=Xe=>{Xe.key==="Escape"&&(Xe.preventDefault(),Xe.stopPropagation(),A.current?.focus(),Ae.removeEventListener("keydown",ot))};Ne.forEach(Xe=>{const Qe=Xe._escapeHandler;Qe&&Xe.removeEventListener("keydown",Qe)}),Ae._escapeHandler=ot,Ae.addEventListener("keydown",ot)},[pe]),Je=ve=>{if(ve.defaultPrevented)return;const Ne=ve.key,xe=ve.target,Ae=!!kt.current&&kt.current.contains(xe),ot=!!G.current&&G.current.contains(xe),Xe=!!A.current&&A.current.contains(xe),Qe=!!A.current,ii=xe===q.current||xe===G.current||xe===A.current,Tr=Ue&&(ge==="list"||ge==="cards"),Hs=ot&&!!xe.closest(".nhs-navigation-split-view__header");if(K==="containers"&&ii){if(Ne==="ArrowRight"){ve.preventDefault();const Re=Se(),et=Math.min(Re.length-1,be+1);Te(et);return}if(Ne==="ArrowLeft"){ve.preventDefault();const Re=Math.max(0,be-1);Te(Re);return}if(Ne==="Home"){ve.preventDefault(),Te(0);return}if(Ne==="End"){ve.preventDefault(),Te(Se().length-1);return}if(Ne==="Enter"||Ne===" "){if(ve.preventDefault(),xe===q.current){if(se("nav"),kt.current){const Re=Array.from(kt.current.querySelectorAll("[data-nav-item]"));(Re[dt>=0?dt:0]||Re[0])?.focus()}}else xe===G.current?(se("content"),Pe(J.contentIndex)):xe===A.current&&(se("secondary"),Be(J.secondaryIndex));return}return}if(Ne==="Escape"){if(K==="content"||K==="secondary"){if(ot||Xe){if(ve.preventDefault(),se("nav"),kt.current){const et=Array.from(kt.current.querySelectorAll("[data-nav-item]"))[dt>=0?dt:0];setTimeout(()=>et?.focus(),10)}}else if((xe===G.current||xe===A.current)&&(ve.preventDefault(),se("nav"),kt.current)){const et=Array.from(kt.current.querySelectorAll("[data-nav-item]"))[dt>=0?dt:0];setTimeout(()=>et?.focus(),10)}}return}if(Ne==="Enter"||Ne===" "){if(xe.matches('button, a, input, select, textarea, [role="button"], [role="link"], [role="tab"]'))return;if(xe===G.current&&K==="content"){ve.preventDefault(),ve.stopPropagation(),pe(G.current).length>0&&setTimeout(()=>{Pe(J.contentIndex)},50);return}if(xe===A.current&&K==="secondary"){ve.preventDefault(),ve.stopPropagation(),pe(A.current).length>0&&setTimeout(()=>{Be(J.secondaryIndex)},50);return}}if(Tr&&Hs&&!ii&&(Ne==="ArrowRight"||Ne==="ArrowLeft")){const Re=pe(G.current).filter(et=>et.closest(".nhs-navigation-split-view__header"));if(Re.length>1){const et=Re.indexOf(xe);if(et>=0){const q0=(et+(Ne==="ArrowRight"?1:-1)+Re.length)%Re.length;ve.preventDefault(),Re[q0].focus();return}}}if(Ne==="ArrowRight"){if(Ae||K==="nav"){ve.preventDefault(),se("content"),setTimeout(()=>G.current?.focus(),10);return}if(ot||K==="content"){Qe&&(ve.preventDefault(),se("secondary"),setTimeout(()=>A.current?.focus(),10));return}}if(Ne==="ArrowLeft"){if(Xe||K==="secondary"){ve.preventDefault(),se("content"),setTimeout(()=>G.current?.focus(),10);return}if(ot||K==="content"){if(ve.preventDefault(),se("nav"),kt.current){const et=Array.from(kt.current.querySelectorAll("[data-nav-item]"))[dt>=0?dt:0];setTimeout(()=>et?.focus(),10)}return}}if(Ne==="Home"&&!Ae&&(ve.preventDefault(),se("nav"),kt.current)){const Re=Array.from(kt.current.querySelectorAll("[data-nav-item]")),et=Re[dt>=0?dt:0]||Re[0];setTimeout(()=>et?.focus(),10)}if(Ne==="End"){const Re=Qe?A.current:G.current;Re&&!Re.contains(xe)&&(ve.preventDefault(),Qe?(se("secondary"),setTimeout(()=>A.current?.focus(),10)):(se("content"),setTimeout(()=>G.current?.focus(),10)))}if(Ne==="ArrowDown"||Ne==="ArrowUp"){if(xe===G.current&&Ne==="ArrowDown"){ve.preventDefault(),pe(G.current).length>0&&Pe(0);return}if(xe===A.current&&Ne==="ArrowDown"){ve.preventDefault(),pe(A.current).length>0&&Be(0);return}if(ot){const Re=pe(G.current);if(Re.length){ve.preventDefault();const et=Ne==="ArrowDown"?1:-1,Mn=(J.contentIndex+et+Re.length)%Re.length;Pe(Mn)}}else if(Xe){const Re=pe(A.current);if(Re.length){ve.preventDefault();const et=Ne==="ArrowDown"?1:-1,Mn=(J.secondaryIndex+et+Re.length)%Re.length;Be(Mn)}}}},Ue=!!ae&&(ge==="list"||ge==="cards"),gt=Z.useMemo(()=>de===void 0?{mobile:!0,tablet:!1,desktop:!1}:de===!0?{mobile:!0,tablet:!0,desktop:!0}:de===!1?{mobile:!1,tablet:!1,desktop:!1}:{mobile:de.mobile!==void 0?de.mobile:!0,tablet:de.tablet||!1,desktop:de.desktop||!1},[de]),rn=fe&&ie("medium")&&!ie("xlarge"),Xt=fe&&ie("xlarge"),Ht=!!l,qe=ge==="three-column",[st,zn]=Z.useState(!1);Z.useEffect(()=>{qe&&st&&zn(!1)},[qe,st]),Z.useEffect(()=>{st&&!qe&&(se("secondary"),_e(2),setTimeout(()=>{A.current?.focus()},50))},[st,qe]),Z.useEffect(()=>{!st&&!qe&&K==="secondary"&&(se("content"),_e(1),setTimeout(()=>{G.current?.focus()},50))},[st,qe,K]);const Ie=!!ae&&(Ue&&gt.mobile||!Ue&&rn&&gt.tablet||!Ue&&Xt&&gt.desktop)||Ht&&!qe,$e=`h${ye}`,rt=ae?Z.createElement($e,{style:{marginLeft:Ue?32:0,marginRight:Ue?32:0}},ae.label):null,zt=Ue?"mobile":rn?"tablet":"desktop",It=Ht&&!qe&&!st,Zt=Ue&&gt.mobile?o.jsx(ba,{element:"button",text:d,style:{marginRight:16},onClick:()=>ri(void 0,void 0)}):void 0,ut=It?o.jsx(Dd,{element:"button",text:f,onClick:()=>{zn(!0)}}):void 0,Le=!qe&&st?o.jsx(ba,{element:"button",text:d,style:{marginRight:16},onClick:()=>zn(!1)}):void 0,jn=Z.useMemo(()=>{if(!Ie||!ae)return null;if(ue)return ue({item:ae,detailActive:Ue,context:zt,backLink:Zt,defaultHeading:rt});const ve=ae&&ce?typeof ce=="function"?ce(ae):ce:null;return o.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[Le||Zt,o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:[rt,ve&&o.jsx("div",{className:"nhs-navigation-split-view__subheader",children:ve})]})]}),ut&&o.jsx("div",{style:{marginLeft:"auto"},children:ut})]})},[Ie,ae,ue,Ue,zt,Zt,Le,rt,ut,ce]);Z.useEffect(()=>{if(!x)return;const ve=ge==="three-column";let Ne=!1;const xe=()=>{Ne||(R.selectedId!==me&&R.setSelectedId(me),R.drilledIn!==ve&&R.setDrilledIn(ve))};if(j&&j>0){const Ae=setTimeout(xe,j);return()=>{Ne=!0,clearTimeout(Ae)}}else xe()},[x,R,me,ge,j]),Z.useEffect(()=>{if(!x)return;const ve=()=>{const Ne=new URLSearchParams(window.location.search),xe=Ne.get(I);Ne.get(M),le(xe===null?void 0:xe)};return window.addEventListener("popstate",ve),()=>window.removeEventListener("popstate",ve)},[x,I,M,c,l]);const Os=Z.useRef(0),Un=Z.useRef(null),ri=Z.useCallback((ve,Ne)=>{ve!==me&&(n===void 0&&le(ve),i?.(ve,Ne))},[n,i,me]);Z.useEffect(()=>{if(!T&&Ue&&G.current){const ve=setTimeout(()=>G.current?.focus(),30);return()=>clearTimeout(ve)}},[Ue,me,T]);const kt=Z.useRef(null),[dt,pa]=Z.useState(()=>v==="first"?0:-1);Z.useEffect(()=>{if(dt<0||!kt.current)return;const Ne=Array.from(kt.current.querySelectorAll("[data-nav-item]"))[dt];if(Ne){document.activeElement!==Ne&&Ne.focus(),Os.current=dt;const xe=t[dt];C?.(xe?p(xe):void 0,xe,dt)}},[dt,t,C,p]);const mC=ve=>{const Ne=b==="vertical"?"ArrowDown":"ArrowRight",xe=b==="vertical"?"ArrowUp":"ArrowLeft";if(ve.key==="ArrowRight"&&b==="vertical"){ve.preventDefault(),st?(se("secondary"),setTimeout(()=>{A.current?.focus()},10)):(se("content"),setTimeout(()=>{G.current?.focus()},10));return}if(ve.key===Ne)ve.preventDefault(),pa(Ae=>Math.min(t.length-1,Ae+1));else if(ve.key===xe)ve.preventDefault(),pa(Ae=>Math.max(0,Ae-1));else if(ve.key==="Home")ve.preventDefault(),pa(0);else if(ve.key==="End")ve.preventDefault(),pa(t.length-1);else if(ve.key==="Enter"||ve.key===" "){ve.preventDefault();const Ae=t[dt];Ae&&!Ae.disabled&&ri(p(Ae),Ae)}else if(ve.key.length===1&&/[a-z0-9]/i.test(ve.key)){Un.current||(Un.current={buffer:"",last:0});const Ae=Date.now(),ot=700,Xe=ve.key.toLowerCase();Ae-Un.current.last>ot?Un.current.buffer=Xe:Un.current.buffer+=Xe,Un.current.last=Ae;let Qe=Un.current.buffer;const ii=Qe.split("").every(Mn=>Mn===Qe[0]),Tr=t.map(Mn=>String(Mn.label||"").toLowerCase());let Hs=0;dt>=0&&(Hs=(dt+1)%t.length);let Re;const et=(Mn,q0)=>{const X0=t.length;for(let Uc=0;Uc<X0;Uc++){const Wc=(Hs+Uc)%X0;if(!t[Wc].disabled&&Tr[Wc].startsWith(Mn))return Wc}};ii&&Qe.length>1?Re=et(Qe[0]):(Re=et(Qe),Re===void 0&&Qe.length>1&&(Re=et(Qe[Qe.length-1]),Re!==void 0&&Un.current&&(Un.current.buffer=Qe[Qe.length-1]))),Re!==void 0&&pa(Re)}},pC=Z.useMemo(()=>{if(z&&(z==="url"||z==="both")&&typeof window<"u"){const Ne=new URLSearchParams(window.location.search).get(U);if(Ne==="1")return!0;if(Ne==="0")return!1}if(z&&(z==="localStorage"||z==="both")&&typeof window<"u")try{const ve=window.localStorage.getItem(re);if(ve==="1")return!0;if(ve==="0")return!1}catch{}return P},[z,P,re,U]),[Dn,gC]=Z.useState(pC);Z.useEffect(()=>{$?.(Dn)},[Dn,$]);const bC=Z.useCallback(()=>{he&&F&&gC(ve=>!ve)},[he,F]);Z.useEffect(()=>{if(z&&!(typeof window>"u")){if(z==="localStorage"||z==="both")try{window.localStorage.setItem(re,Dn?"1":"0")}catch{}if(z==="url"||z==="both"){const ve=new URLSearchParams(window.location.search);ve.set(U,Dn?"1":"0");const Ne=`${window.location.pathname}?${ve.toString()}${window.location.hash}`;window.history.replaceState(null,"",Ne)}}},[Dn,z,re,U]);const yC=["nhs-navigation-split-view",u?"nhs-navigation-split-view--animated":"",Ue?"nhs-navigation-split-view--detail-active":"",ge==="three-column"?"nhs-navigation-split-view--three-column":"",F&&he&&Dn?"nhs-navigation-split-view--nav-collapsed":"",h].filter(Boolean).join(" "),Hc=Z.useRef(null);Z.useEffect(()=>{if(!k&&Hc.current){const ve=ae?`Selected ${ae.label}`:"Selection cleared";Hc.current.textContent=ve}},[ae,k]),Z.useEffect(()=>{!Ue&&me==null&&kt.current&&kt.current.querySelectorAll("[data-nav-item]")[Os.current]?.focus()},[Ue,me]);const rr=ge==="three-column",[zc,vC]=Z.useState(!1);Z.useEffect(()=>{rr&&!zc&&vC(!0)},[rr,zc]);const Y0=Z.useRef(rr);Z.useEffect(()=>{Y0.current!==rr&&(D?.(rr),Y0.current=rr)},[rr,D]);const _C=()=>{if(ge==="cards")return o.jsxs("ul",{className:"nhs-navigation-split-view__cards",role:"listbox","aria-activedescendant":me?String(me):void 0,children:[t.map(xe=>{const Ae=p(xe),ot=Ae===me;return o.jsx("li",{className:"nhs-navigation-split-view__card-item",role:"option","aria-selected":ot,children:o.jsxs("button",{id:String(Ae),type:"button",className:"nhs-navigation-split-view__card","data-selected":ot||void 0,"data-disabled":xe.disabled||void 0,disabled:xe.disabled,onClick:()=>!xe.disabled&&ri(Ae,xe),children:[xe.icon&&o.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:xe.icon}),o.jsx("span",{className:"nhs-navigation-split-view__item-label",children:xe.label}),xe.description&&o.jsx("span",{className:"nhs-navigation-split-view__item-description",children:xe.description}),a?.(xe),xe.badge!==void 0&&o.jsx("span",{className:"nhs-navigation-split-view__badge",children:xe.badge})]})},Ae)}),t.length===0&&!m&&o.jsx("li",{className:"nhs-navigation-split-view__card-item","aria-disabled":"true",children:g||o.jsx("div",{style:{padding:16},children:"No items"})})]});const ve="nsv-nav-instructions",Ne=Z.useMemo(()=>Z.memo(({item:xe,idx:Ae,selected:ot,focused:Xe})=>{const Qe=p(xe),ii=xe.disabled?{"aria-disabled":!0,tabIndex:-1}:{tabIndex:Xe?0:-1,onClick:()=>{Os.current=Ae,ri(Qe,xe)},onKeyDown:Tr=>{(Tr.key==="Enter"||Tr.key===" ")&&(Tr.preventDefault(),Os.current=Ae,ri(Qe,xe))}};return o.jsxs("li",{id:String(Qe),"data-nav-item":!0,className:"nhs-navigation-split-view__list-item nhs-navigation-split-view__item-button",role:"option","aria-selected":ot,"aria-current":ot?"true":void 0,"data-selected":ot||void 0,"data-disabled":xe.disabled||void 0,...ii,children:[xe.icon&&o.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:xe.icon}),o.jsxs("span",{className:"nhs-navigation-split-view__item-content",children:[o.jsx("span",{className:"nhs-navigation-split-view__item-label",children:xe.label}),xe.description&&o.jsx("span",{className:"nhs-navigation-split-view__item-description",children:xe.description}),a?.(xe)]}),xe.badge!==void 0&&o.jsx("span",{className:"nhs-navigation-split-view__badge",children:xe.badge})]})}),[p,ri,a]);return o.jsxs(o.Fragment,{children:[o.jsxs("ul",{ref:kt,className:"nhs-navigation-split-view__list",onKeyDown:mC,role:"listbox","aria-label":"Navigation items","aria-describedby":ve,"aria-activedescendant":me?String(me):void 0,children:[t.map((xe,Ae)=>o.jsx(Ne,{item:xe,idx:Ae,selected:p(xe)===me,focused:Ae===dt||dt===-1&&Ae===0&&v==="first","data-just-selected":p(xe)===B?"true":void 0},p(xe))),t.length===0&&!m&&o.jsx("li",{className:"nhs-navigation-split-view__list-item","aria-disabled":"true",children:g||o.jsx("div",{style:{padding:16},children:"No items"})})]}),o.jsx("div",{id:ve,style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:S})]})};return o.jsx("div",{ref:ee,className:yC,"aria-label":y?.rootLabel,"data-layout":ge,onKeyDown:Je,children:o.jsxs("div",{className:"nhs-navigation-split-view__body",children:[o.jsxs("div",{className:"nhs-navigation-split-view__panes","data-active-detail":Ue||void 0,style:{transform:Ue?"translateX(-100%)":void 0},children:[o.jsxs("div",{ref:q,className:"nhs-navigation-split-view__nav-pane",role:"navigation","aria-label":y?.navigationLabel||"Items","data-collapsed":Dn||void 0,tabIndex:0,children:[F&&he&&o.jsx("div",{className:"nhs-navigation-split-view__nav-collapse",children:o.jsx("button",{type:"button",onClick:bC,className:"nhs-navigation-split-view__nav-collapse-btn","aria-label":Dn?ne:X,title:Dn?ne:X,children:Dn?O||o.jsx(sx,{}):H||o.jsx(ax,{})})}),o.jsx("div",{className:"nhs-navigation-split-view__nav-scroll",children:_C()}),N&&o.jsx("div",{className:"nhs-navigation-split-view__nav-footer",role:"contentinfo",children:N})]}),o.jsxs("div",{ref:G,className:"nhs-navigation-split-view__content-pane",role:"region","aria-label":y?.contentLabel||"Content","data-has-selection":!!ae||void 0,tabIndex:0,style:{display:st&&!qe?"none":void 0},children:[Ie&&o.jsx("div",{className:"nhs-navigation-split-view__header",children:jn}),o.jsx("div",{className:"nhs-navigation-split-view__content-inner",style:{padding:32,flex:1},children:s(ae)})]}),ge==="three-column"&&(!L||zc)||st&&!qe?o.jsx("div",{ref:A,className:"nhs-navigation-split-view__secondary-pane",role:"region","aria-label":y?.secondaryContentLabel||"Secondary",tabIndex:0,children:o.jsxs("div",{className:"nhs-navigation-split-view__secondary-inner",style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[st&&!qe&&o.jsx("div",{className:"nhs-navigation-split-view__header",children:o.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[Le,o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:o.jsx("h2",{style:{marginLeft:0,marginRight:0},children:ae&&typeof ae=="object"&&"label"in ae?ae.label:String(ae)})})]})})}),ae&&Q&&o.jsx("div",{className:"nhs-navigation-split-view__secondary-header",style:{padding:"16px 32px",borderBottom:"1px solid var(--nsplit-divider)"},children:typeof Q=="function"?Q(ae):Q}),o.jsx("div",{style:{padding:32,flex:1,minWidth:0},children:l?.(ae)})]})}):null]}),o.jsx("div",{ref:Hc,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"}}),o.jsx("div",{"aria-live":"polite",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:rr?"Expanded to three column layout":"In two column layout"})]})})}Id.displayName="NavigationSplitView";const ox=typeof window<"u"&&window.document?Z.useLayoutEffect:Z.useEffect,Fd=(e,t,n,r)=>e==null||Number.isNaN(e)?r:Math.min(n,Math.max(t,e)),lx=({item:e,maxLines:t,enableDrilldown:n,onExpand:r,isActive:i,topLaneIndex:a})=>{const{ariaLabel:s}=e,l=`${e._pxLeft}px`,c=`${e._pxWidth}px`,u=`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${a})`,d=Math.floor(e._startFraction)+2,f=Math.max(1,Math.round(e._spanColumns)),m=n&&e.childItems&&e.childItems.length>0,g=h=>{m&&(h.preventDefault(),r?.(e))},y=m?{role:"button",tabIndex:0,"aria-haspopup":"dialog","aria-expanded":i||!1,onClick:g,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&g(h),h.key==="Escape"&&i&&g(h)}}:{};return o.jsxs("div",{className:we("nhsuk-product-roadmap__item",m&&"nhsuk-product-roadmap__item--expandable",i&&"nhsuk-product-roadmap__item--active"),style:{left:l,width:c,top:u,"--item-height":t},role:"gridcell","aria-label":s,"aria-colindex":d,"aria-colspan":f,...y,children:[o.jsx("div",{className:"nhsuk-product-roadmap__item-bg","aria-hidden":"true"}),o.jsxs("div",{className:"nhsuk-product-roadmap__item-content",children:[o.jsx("span",{className:"nhsuk-product-roadmap__item-title",children:e.title}),m&&o.jsx("span",{className:we("nhsuk-product-roadmap__item-expander",i&&"nhsuk-product-roadmap__item-expander--open"),"aria-hidden":"true"})]})]})},$d=E.memo(({dateHeadings:e,categories:t,columnWidthPx:n=400,itemMaxLines:r=2,className:i,ariaLabel:a="Product roadmap",enableDrilldown:s=!1,onToggleItem:l,drilldownMode:c="overlay",...u})=>{const[d,f]=E.useState(()=>new Set),[m,g]=E.useState(()=>new Set),y=E.useRef(new Set),h=E.useCallback(j=>d.has(j),[d]),p=E.useCallback(j=>{f(L=>{const N=new Set(L);return N.has(j.id)?(N.delete(j.id),g(F=>{const P=new Set(F);return P.add(j.id),P}),setTimeout(()=>g(F=>{const P=new Set(F);return P.delete(j.id),P}),240),l?.(j.id,!1)):(N.add(j.id),l?.(j.id,!0)),N})},[l]);ox(()=>{if(c!=="inline"||!s||typeof document>"u")return;const j=[];if(d.forEach(P=>{y.current.has(P)||j.push(P)}),y.current=new Set(d),!j.length)return;const L=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1,N=j.map(P=>`.nhsuk-product-roadmap__inline-children[data-parent="${P}"] .nhsuk-product-roadmap__inline-child`).join(","),F=Array.from(document.querySelectorAll(N));if(F.length){if(L){F.forEach(P=>{P.style.opacity="1",P.style.transform="translateY(0)"});return}Promise.resolve().then(()=>hC).then(P=>{(P.gsap||P.default||P).to(F,{opacity:1,y:0,duration:.32,ease:"power2.out",stagger:.05})}).catch(()=>{F.forEach(P=>{P.style.opacity="1",P.style.transform="translateY(0)"})})}},[d,c,s]);const b=E.useCallback(()=>{d.size&&f(new Set)},[d]),w=we("nhsuk-product-roadmap",i),D=Fd(n,120,1200,400),S=Fd(r,1,6,2),v=E.useMemo(()=>e.map(j=>new Date(j+" 01")),[e]),T=E.useMemo(()=>{if(v.length===0){const N=new Date;return[N,N]}const j=new Date(v[0]),L=hi.offset(new Date(v[v.length-1]),1);return[j,L]},[v]),k=E.useMemo(()=>_o().domain(T).range([0,v.length*D]),[T,v.length,D]),C=E.useCallback(j=>{if(j.startDate){const X=new Date(j.startDate),O=new Date(j.endDate??j.startDate);O<X&&O.setTime(X.getTime());const H=k(X),z=hi.offset(new Date(O),1);let re=k(z);Number.isFinite(re)||(re=H+D);const U=Math.max(D*.25,re-H),de=H/D,ye=U/D;return{...j,_pxLeft:H,_pxWidth:U,_startFraction:de,_spanColumns:ye}}const L=j.date??1,N=j.dateOffset??0,F=j.length??1,P=j.partialLength??1,$=L-1+N,ne=F-1+P;return{...j,_pxLeft:$*D,_pxWidth:ne*D,_startFraction:$,_spanColumns:ne}},[k,D]),x=E.useMemo(()=>t.map(j=>{const N=j.roadmapItems.map(P=>{const $=!P.childItems&&P.children?{...P,childItems:P.children}:{...P};return C($)}).sort((P,$)=>P._pxLeft!==$._pxLeft?P._pxLeft-$._pxLeft:$._pxWidth-P._pxWidth),F=[];return N.forEach(P=>{const $=P._pxLeft,ne=P._pxLeft+P._pxWidth;let X=F.findIndex(O=>O<=$);X===-1&&(X=F.length,F.push(0)),F[X]=ne,P.verticalPosition=X+1}),{...j,roadmapItems:N,_laneCount:F.length}}),[t,C]),I=E.useMemo(()=>x.map(j=>j._laneCount||1),[x]),M=E.useMemo(()=>`var(--category-width) ${e.map(()=>"var(--column-width)").join(" ")}`,[e]);return o.jsxs("div",{className:w,style:{"--column-width":`${D}px`,gridTemplateColumns:M},role:"grid","aria-label":a,"aria-colcount":e.length+1,"aria-rowcount":x.length+1,...u,children:[o.jsxs("div",{className:"nhsuk-product-roadmap__header-row",role:"row","aria-rowindex":1,children:[o.jsx("div",{className:"nhsuk-product-roadmap__header-cell",role:"columnheader","aria-colindex":1,children:o.jsx("span",{className:"nhsuk-visually-hidden",children:"Category"})}),e.map((j,L)=>o.jsx("div",{className:"nhsuk-product-roadmap__date-heading",role:"columnheader","aria-colindex":L+2,children:j},`${j}-${L}`))]}),x.map((j,L)=>{const N=L+2,F=I[L];let P,$=0,ne=[];s&&c==="inline"&&(ne=j.roadmapItems.filter(z=>h(z.id)&&z.childItems&&z.childItems.length).map(z=>({id:z.id,lane:z.verticalPosition||1,count:z.childItems.length})).sort((z,re)=>z.lane-re.lane),$=ne.reduce((z,re)=>z+re.count,0));const X=F+$;P=`calc((${X} * var(--roadmap-item-block-height)) + (max(0, ${X} - 1) * var(--roadmap-row-gap)))`;const O={};let H=0;return ne.forEach(z=>{H+=z.count,O[z.lane+1]=H}),o.jsxs("div",{className:"nhsuk-product-roadmap__row",role:"row","aria-rowindex":N,children:[o.jsx("div",{className:"nhsuk-product-roadmap__category-cell",role:"rowheader","aria-colindex":1,children:j.heading}),o.jsx("div",{className:"nhsuk-product-roadmap__items-row",style:{gridColumn:`2 / span ${e.length}`,height:P},children:o.jsx("div",{className:"nhsuk-product-roadmap__items-layer",children:j.roadmapItems.map((z,re)=>{const U=(z.verticalPosition||1)-1,de=ne.filter(Q=>Q.lane-1<U).reduce((Q,ie)=>Q+ie.count,0),ye=U+de,ue=h(z.id),ce=m.has(z.id);return o.jsxs(E.Fragment,{children:[o.jsx(lx,{item:z,maxLines:S,enableDrilldown:s,onExpand:p,isActive:ue,topLaneIndex:ye,laneOffset:de}),s&&c==="inline"&&(ue||ce)&&z.childItems&&o.jsx("div",{"data-parent":z.id,className:"nhsuk-product-roadmap__inline-children","aria-label":`${z.title} child tasks`,children:z.childItems.map((Q,ie)=>{const fe="calc(var(--roadmap-item-block-height) * 0.75)";let Y=z._pxLeft,he=z._pxWidth;if(Q.startDate){const R=new Date(Q.startDate);let V=Q.endDate?new Date(Q.endDate):new Date(R);V<R&&(V=new Date(R));const le=new Date(V);le.setDate(le.getDate()+1);const me=k(R);let ae=k(le);(!Number.isFinite(ae)||ae<=me)&&(ae=me+6),Y=me,he=Math.max(6,ae-me)}const ge=ye+1+ie;return o.jsxs("div",{className:we("nhsuk-product-roadmap__inline-child",Q.status&&`nhsuk-product-roadmap__inline-child--status-${Q.status}`,!ue&&ce&&"nhsuk-product-roadmap__inline-child--collapsing"),style:{left:`${Y}px`,width:`${he}px`,top:`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${ge})`,height:fe,opacity:ue?0:void 0,transform:ue?"translateY(-6px)":void 0},children:[o.jsx("div",{className:"nhsuk-product-roadmap__inline-child-bg"}),o.jsx("div",{className:"nhsuk-product-roadmap__inline-child-content",children:Q.title})]},Q.id??ie)})})]},z.id??re)})})})]},`${j.heading}-${L}`)}),s&&c==="overlay"&&d.size===1&&(()=>{const j=Array.from(d)[0],L=t.flatMap(N=>N.roadmapItems).find(N=>N.id===j);return!L||!L.childItems?null:o.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-overlay",role:"dialog","aria-modal":"true","aria-label":`${L.title} details`,children:[o.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-panel",children:[o.jsxs("header",{className:"nhsuk-product-roadmap__drilldown-header",children:[o.jsx("h3",{className:"nhsuk-product-roadmap__drilldown-title",children:L.title}),o.jsx("button",{type:"button",className:"nhsuk-product-roadmap__drilldown-close",onClick:b,"aria-label":"Close details",children:"Ã—"})]}),o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-content",children:L.content}),o.jsx("ul",{className:"nhsuk-product-roadmap__drilldown-children",children:L.childItems.map((N,F)=>o.jsxs("li",{className:"nhsuk-product-roadmap__drilldown-child",children:[o.jsx("strong",{className:"nhsuk-product-roadmap__drilldown-child-title",children:N.title}),N.content&&o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-child-content",children:N.content})]},N.id??F))})]}),o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-backdrop",onClick:b,"aria-hidden":"true"})]})})()]})});$d.displayName="ProductRoadmap";function Ld(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Ld(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Wa(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Ld(e))&&(r&&(r+=" "),r+=t);return r}function vt(e){return function(){return e}}const Io=Math.PI,Fo=2*Io,cr=1e-6,cx=Fo-cr;function Ad(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ux(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ad;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class dx{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ad:ux(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=r-t,u=i-n,d=s-t,f=l-n,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(m>cr)if(!(Math.abs(f*c-u*d)>cr)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-s,y=i-l,h=c*c+u*u,p=g*g+y*y,b=Math.sqrt(h),w=Math.sqrt(m),D=a*Math.tan((Io-Math.acos((h+m-p)/(2*b*w)))/2),S=D/w,v=D/b;Math.abs(S-1)>cr&&this._append`L${t+S*d},${n+S*f}`,this._append`A${a},${a},0,0,${+(f*g>d*y)},${this._x1=t+v*c},${this._y1=n+v*u}`}}arc(t,n,r,i,a,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),u=t+l,d=n+c,f=1^s,m=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>cr||Math.abs(this._y1-d)>cr)&&this._append`L${u},${d}`,r&&(m<0&&(m=m%Fo+Fo),m>cx?this._append`A${r},${r},0,1,${f},${t-l},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:m>cr&&this._append`A${r},${r},0,${+(m>=Io)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Ed(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new dx(t)}function Bd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Rd(e){this._context=e}Rd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Od(e){return new Rd(e)}function Hd(e){return e[0]}function zd(e){return e[1]}function Ud(e,t){var n=vt(!0),r=null,i=Od,a=null,s=Ed(l);e=typeof e=="function"?e:e===void 0?Hd:vt(e),t=typeof t=="function"?t:t===void 0?zd:vt(t);function l(c){var u,d=(c=Bd(c)).length,f,m=!1,g;for(r==null&&(a=i(g=s())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+e(f,u,c),+t(f,u,c));if(g)return a=null,g+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:vt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:vt(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:vt(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),l):r},l}function $o(e,t,n){var r=null,i=vt(!0),a=null,s=Od,l=null,c=Ed(u);e=typeof e=="function"?e:e===void 0?Hd:vt(+e),t=typeof t=="function"?t:vt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?zd:vt(+n);function u(f){var m,g,y,h=(f=Bd(f)).length,p,b=!1,w,D=new Array(h),S=new Array(h);for(a==null&&(l=s(w=c())),m=0;m<=h;++m){if(!(m<h&&i(p=f[m],m,f))===b)if(b=!b)g=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=m-1;y>=g;--y)l.point(D[y],S[y]);l.lineEnd(),l.areaEnd()}b&&(D[m]=+e(p,m,f),S[m]=+t(p,m,f),l.point(r?+r(p,m,f):D[m],n?+n(p,m,f):S[m]))}if(w)return l=null,w+""||null}function d(){return Ud().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:vt(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:vt(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:vt(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:vt(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:vt(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:vt(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:vt(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(l=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=l=null:l=s(a=f),u):a},u}function Wd(e){return e<0?-1:1}function Vd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),l=(a*i+s*r)/(r+i);return(Wd(a)+Wd(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function Gd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Lo(e,t,n){var r=e._x0,i=e._y0,a=e._x1,s=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,i+l*t,a-l,s-l*n,a,s)}function Va(e){this._context=e}Va.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lo(this,this._t0,Gd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Lo(this,Gd(this,n=Vd(this,e,t)),n);break;default:Lo(this,this._t0,n=Vd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},Object.create(Va.prototype).point=function(e,t){Va.prototype.point.call(this,t,e)};function Ga(e){return new Va(e)}function fx(e,t,n){const r=cu(e,t);return _o().domain(r).range(n)}function Yd(e,t,n){const[r,i]=cu(e,t);if(!(Number.isFinite(r)&&Number.isFinite(i)))return $a().domain([0,0]).range(n);let s;if(r<=0)s=Math.min(0,r);else{const c=i-r,u=(c>0?c:r)*.1;s=Math.max(0,r-u),s===r&&(s=Math.max(0,r*.9))}const l=i??0;return $a().domain([s,l]).nice().range(n)}function Ao(e,t,n,r){const i=Ud().x(t).y(n);return r?.smooth!==!1&&i.curve(Ga),i(e)??""}function hx(e={}){const t=Z.useRef(null),n=Z.useMemo(()=>({top:e.top??16,right:e.right??16,bottom:e.bottom??32,left:e.left??48}),[e.bottom,e.left,e.right,e.top]),[r,i]=Z.useState({width:0,height:0});Z.useLayoutEffect(()=>{if(!t.current)return;const l=new ResizeObserver(c=>{for(const u of c){const{width:d,height:f}=u.contentRect;i({width:d,height:f})}});return l.observe(t.current),()=>l.disconnect()},[]);const a=Math.max(0,r.width-n.left-n.right),s=Math.max(0,r.height-n.top-n.bottom);return{width:r.width,height:r.height,innerWidth:a,innerHeight:s,margin:n,ref:t}}const qd=Z.createContext(null);function Yn(){return Z.useContext(qd)}const Xd=({height:e=240,margin:t,width:n,className:r="fdp-chart",children:i,role:a="group",ariaLabel:s})=>{const l=hx(t),c={height:e,position:"relative"};return n!==void 0&&(c.width=typeof n=="number"?`${n}px`:n),o.jsx("div",{ref:l.ref,className:r,style:c,role:a,"aria-label":s,children:o.jsx(qd.Provider,{value:l,children:i})})},Eo=Z.createContext(null),ur=()=>Z.useContext(Eo),Zd=({series:e,innerWidth:t,innerHeight:n,parseX:r,children:i,xTickCount:a=6,yTickCount:s=5,yDomain:l,xPadding:c,yPadding:u,yBottomGapPx:d})=>{const f=Yn(),m=t??f?.innerWidth??0,g=n??f?.innerHeight??0,y=Z.useMemo(()=>e.flatMap(v=>v.data),[e]),h=Z.useCallback(v=>{if(r)return r(v);const T=v.x;return T instanceof Date?T:new Date(T)},[r]),p=c??6,b=u??6,w=Z.useMemo(()=>fx(y,h,[p,Math.max(0,m-p)]),[y,h,m,p]),D=Z.useMemo(()=>{const v=Math.max(0,d??0),T=Math.max(0,g-(b+v));if(l){const k=Yd([],C=>C.y,[T,b]);return k.domain(l),k}return Yd(y,k=>k.y,[T,b])},[y,g,l,b,d]),S=Z.useMemo(()=>({xScale:w,yScale:D,getXTicks:(v=a)=>w.ticks(v),getYTicks:(v=s)=>D.ticks(v)}),[w,D,a,s]);return o.jsx(Eo.Provider,{value:S,children:i})},vi=16,_i=6,Kd=16,Jd=4,Qd=6,ef=3,tf=void 0,Bo=({type:e,scale:t,tickCount:n,tickValues:r,formatTick:i,label:a,offset:s,className:l,minLabelSpacing:c,maxTickLabelLength:u,autoMinLabelSpacing:d=e==="x",labelAngle:f=0,allowLabelWrap:m=!0,tickFormatPreset:g,yZeroBreak:y})=>{const h=ur(),p=Yn(),b=t||(e==="x"?h?.xScale:h?.yScale),w=n??(e==="x"?6:5),D=typeof i=="function",S=Z.useMemo(()=>{if(D||!g)return;const k=C=>new Intl.DateTimeFormat(void 0,C);switch(g){case"dayShortMonth":return C=>{const x=C instanceof Date?C:new Date(C);return`${x.getDate()}
${k({month:"short"}).format(x)}`};case"dayShortMonthYear":return C=>{const x=C instanceof Date?C:new Date(C);return`${x.getDate()}
${k({month:"short"}).format(x)} ${x.getFullYear()}`};case"shortMonth":return C=>{const x=C instanceof Date?C:new Date(C);return k({month:"short"}).format(x)};case"shortMonthYear":return C=>{const x=C instanceof Date?C:new Date(C);return`${k({month:"short"}).format(x)} ${x.getFullYear()}`};case"hourMinute":return C=>{const x=C instanceof Date?C:new Date(C);return k({hour:"2-digit",minute:"2-digit"}).format(x)};default:return}},[D,g]);let v=D?i:S||(k=>String(k));const T=Z.useMemo(()=>r&&Array.isArray(r)?r:b?typeof b.ticks=="function"?b.ticks(w):b.domain?b.domain():[]:[],[b,w,r]);if(e==="x"&&!D&&!g&&T.length&&T.every(k=>k instanceof Date)){const k=T[0],C=T[T.length-1],x=C.getTime()-k.getTime(),I=24*3600*1e3,M=365*I,j=k.getFullYear()===C.getFullYear(),L=new Intl.DateTimeFormat(void 0,{month:"short"});if(x<2*I){const N=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"});v=F=>N.format(F)}else if(x<32*I)v=N=>{const F=N;return`${F.getDate()} ${L.format(F)}`};else if(x<M&&j)v=N=>L.format(N);else if(x<2*M){const N=new Set;v=F=>{const P=F,$=P.getMonth();return N.has($)||N.add($),`${L.format(P)} ${P.getFullYear()}`}}else v=N=>String(N.getFullYear())}if(!b||!p)return null;if(e==="x"){const k=s??p.innerHeight,C=typeof b.bandwidth=="function",x=C?b.bandwidth():0,I=L=>{const N=b(L);return C?N+x/2:N};let M=c??0;if(d&&c==null){const L=T.map(F=>v(F).replace(/\n.*/g,"")),N=L.length?L.reduce((F,P)=>F+P.length,0)/L.length:0;M=Math.max(12,Math.round(N*6+4))}const j=Z.useMemo(()=>{if(r&&Array.isArray(r)||M<=0)return T;const L=[];let N=-1/0;for(const F of T){const P=I(F);P-N>=M&&(L.push(F),N=P)}return L},[T,b,M,r,C,x]);return o.jsxs("g",{className:["fdp-axis","fdp-axis--x",l].filter(Boolean).join(" "),transform:`translate(0,${k})`,fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[o.jsx("line",{x1:0,x2:p.innerWidth,y1:0,y2:0,stroke:"currentColor"}),j.map((L,N)=>{const F=v(L),P=u&&F.length>u?F.slice(0,Math.max(1,u-1))+"â€¦":F,$=m?P.split(/\n/):[P.replace(/\n/g," ")],ne=f<0?"end":f>0?"start":"middle";return o.jsxs("g",{transform:`translate(${I(L)},0)`,children:[o.jsx("line",{y2:6,stroke:"currentColor"}),o.jsxs("text",{y:9,textAnchor:ne,className:"fdp-axis__tick",dominantBaseline:"hanging",transform:f?`rotate(${f})`:void 0,fontFamily:"inherit",children:[$.map((X,O)=>o.jsx("tspan",{x:0,dy:O===0?0:"1.1em",children:X},O)),P!==F&&o.jsx("title",{children:F})]})]},L?.toString?.()||N)})]})}return o.jsxs("g",{className:["fdp-axis","fdp-axis--y",l].filter(Boolean).join(" "),fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[(()=>{const k=!!y?.enabled,C=Math.max(_i,y?.gapPx??vi);if(!k)return o.jsx("line",{x1:0,x2:0,y1:0,y2:p.innerHeight,stroke:"currentColor"});const x=Math.max(0,p.innerHeight-C);return o.jsx("line",{x1:0,x2:0,y1:0,y2:x,stroke:"currentColor"})})(),T.map((k,C)=>{const x=v(k),I=u&&x.length>u?x.slice(0,Math.max(1,u-1))+"â€¦":x,M=m?I.split(/\n/):[I.replace(/\n/g," ")];if(!!y?.enabled){const L=Math.max(_i,y?.gapPx??vi),N=Math.max(0,p.innerHeight-L);if(b(k)>N-1)return null}return o.jsxs("g",{transform:`translate(0,${b(k)})`,children:[o.jsx("line",{x2:-6,stroke:"currentColor"}),o.jsxs("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:[M.map((L,N)=>o.jsx("tspan",{x:-9,dy:N===0?0:"1.1em",children:L},N)),I!==x&&o.jsx("title",{children:x})]})]},k?.toString?.()||C)}),!!y?.enabled&&(()=>{const k=Math.max(_i,y?.gapPx??vi),C=p.innerHeight,I=Math.max(0,C-k),M=I,L=Math.max(4,C-M),N=Jd,F=Qd,P=Math.max(1,Math.round(y?.zigZag?.amplitudePx??N)),$=Math.max(1,Math.round(y?.zigZag?.stepXPx??ef)),ne=y?.zigZag?.heightPx??tf,X=Math.max(4,Math.round(ne??0));let O,H;if(y?.zigZag?.heightPx&&y.zigZag.heightPx>0){const ce=Math.max(4,Math.min(L-2,X));O=Math.max(1,Math.floor(ce/(2*P))),H=Math.max(0,Math.min(ce,O*2*P))}else typeof y?.zigZag?.cycles=="number"&&y?.zigZag?.cycles>0?(O=Math.max(1,Math.round(y.zigZag.cycles)),H=O*2*P,H=Math.min(H,L-2),O=Math.max(1,Math.floor(H/(2*P)))):(O=F,H=Math.min(L-2,O*2*P),O=Math.max(1,Math.floor(H/(2*P))));const z=M+(L-H)/2,re=z+H;let U="M0,0";const de=H>0?Math.max(0,Math.floor((H-P)/(2*P))):0,ye=Math.max(0,(H-de*2*P)/2),ue=P>0?$*(ye/P):0;ye>0&&(U+=` l${ue},${ye}`);for(let ce=0;ce<de;ce++)U+=` l-${$},${P} l${$},${P}`;return ye>0&&(U+=` l-${ue},${ye}`),o.jsxs("g",{children:[o.jsx("line",{x1:0,x2:0,y1:I,y2:z,stroke:"currentColor"}),o.jsx("g",{transform:`translate(0,${z})`,"aria-hidden":"true",children:o.jsx("path",{d:U,stroke:"currentColor",fill:"none"})}),o.jsx("line",{x1:0,x2:0,y1:re,y2:C,stroke:"currentColor"}),o.jsx("g",{transform:`translate(0,${C})`,children:o.jsx("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:"0"})})]})})(),a&&o.jsx("text",{transform:"rotate(-90)",x:-p.innerHeight/2,y:-p.margin.left+12,textAnchor:"middle",className:"fdp-axis__label",fontFamily:"inherit",children:a})]})},nf=({axis:e="y",tickCount:t,stroke:n="var(--fdp-chart-grid,#e5e5e5)",dasharray:r="2 4",className:i})=>{const a=ur(),s=Yn();if(!a||!s)return null;const l=e==="y"?a.getYTicks(t):a.getXTicks(t);return o.jsxs("g",{className:["fdp-grid",i].filter(Boolean).join(" "),children:[e==="y"&&l.map((c,u)=>o.jsx("line",{x1:0,x2:s.innerWidth,y1:a.yScale(c),y2:a.yScale(c),stroke:n,strokeDasharray:r},u)),e==="x"&&l.map((c,u)=>o.jsx("line",{y1:0,y2:s.innerHeight,x1:a.xScale(c),x2:a.xScale(c),stroke:n,strokeDasharray:r},u))]})},xi={color:{"data-viz":{$type:"color",categorical:{1:{$value:"{color.primary.blue}",$description:"Series 1 â€“ NHS Blue (brand core)"},2:{$value:"#41B6E6",$description:"Series 2 â€“ NHS Light Blue (new)"},3:{$value:"{color.secondary.aqua-green}",$description:"Series 3 â€“ NHS Aqua Green (existing)"},4:{$value:"#78BE20",$description:"Series 4 â€“ NHS Light Green (new)"},5:{$value:"{color.primary.green}",$description:"Series 5 â€“ NHS Green (existing)"},6:{$value:"{color.secondary.warm-yellow}",$description:"Series 6 â€“ NHS Warm Yellow (existing; distinct from focus yellow)"},7:{$value:"#ED4F00",$description:"Series 7 â€“ NHS Tangerine (new; warmer/deeper than existing orange)"},8:{$value:"{color.secondary.pink}",$description:"Series 8 â€“ NHS Pink (existing)"},9:{$value:"#E317AA",$description:"Series 9 â€“ NHS Bright Pink (new vivid accent)"},10:{$value:"#880FB8",$description:"Series 10 â€“ NHS Light Purple (new mid purple)"},11:{$value:"{color.primary.purple}",$description:"Series 11 â€“ NHS Purple (existing dark purple)"},12:{$value:"#9A6324",$description:"Series 12 â€“ NHS Brown (new; earth neutral)"}},neutral:{comparison:{$value:"{color.grey.1}",$description:"Neutral comparison series (optional)"}},region:{$comment:"Fixed colours for NHS geographical regions; prefer stable mapping for maps. London colour updated (#78BE21 â€“ light green).","north-east":{$value:"{color.primary.blue}",$description:"North East â€“ NHS Blue"},"north-west":{$value:"#41B6E6",$description:"North West â€“ NHS Light Blue"},"east-of-england":{$value:"{color.primary.purple}",$description:"East of England â€“ NHS Purple"},midlands:{$value:"{color.secondary.pink}",$description:"Midlands â€“ NHS Pink"},london:{$value:"#78BE21",$description:"London â€“ NHS Light Green (new)"},"south-west":{$value:"#FAE100",$description:"South West â€“ NHS Yellow variant (new)"},"south-east":{$value:"#ed8b00",$description:"South East â€“ NHS Orange (existing base orange)"}},severity:{$comment:"Semantic severity / alert colours (light background ramp â†’ critical).",low:{$value:"{color.secondary.pale-yellow}",$description:"Low severity â€“ pale yellow background"},moderate:{$value:"{color.secondary.warm-yellow}",$description:"Moderate severity â€“ warm yellow"},high:{$value:"{color.secondary.orange}",$description:"High severity â€“ orange"},critical:{$value:"{color.primary.red}",$description:"Critical severity â€“ red"}},"org-level":{$comment:"Organisational level semantic colours (stable NHS brand mappings).",trust:{$value:"{color.primary.blue}",$description:"Trust â€“ NHS Blue"},ambulance:{$value:"{color.primary.green}",$description:"Ambulance â€“ NHS Green"},icb:{$value:"{color.primary.dark-pink}",$description:"ICB â€“ NHS Dark Pink"},region:{$value:"{color.primary.purple}",$description:"Region â€“ NHS Purple"}},stroke:{$comment:"Automatic contrast stroke colours for overlays / borders. Light fills get dark stroke; dark fills get white stroke.",categorical:{1:{$value:"#ffffff",$description:"Stroke for series 1 (blue)"},2:{$value:"#212b32",$description:"Stroke for series 2 (light blue)"},3:{$value:"#212b32",$description:"Stroke for series 3 (aqua green)"},4:{$value:"#212b32",$description:"Stroke for series 4 (light green)"},5:{$value:"#ffffff",$description:"Stroke for series 5 (green)"},6:{$value:"#212b32",$description:"Stroke for series 6 (warm yellow)"},7:{$value:"#ffffff",$description:"Stroke for series 7 (tangerine)"},8:{$value:"#ffffff",$description:"Stroke for series 8 (pink)"},9:{$value:"#ffffff",$description:"Stroke for series 9 (bright pink)"},10:{$value:"#ffffff",$description:"Stroke for series 10 (light purple)"},11:{$value:"#ffffff",$description:"Stroke for series 11 (purple)"},12:{$value:"#ffffff",$description:"Stroke for series 12 (brown)"}},region:{$comment:"Region stroke colours derived from fill colours: dark fills lightened ~35%; light fills darkened ~25% for consistent contrast without defaulting to pure white/black.","north-east":{$value:"#5996D1",$description:"Stroke for North East (blue lightened 35%)"},"north-west":{$value:"#3189AD",$description:"Stroke for North West (light blue darkened 25%)"},"east-of-england":{$value:"#7A59A3",$description:"Stroke for East of England (purple lightened 35%)"},midlands:{$value:"#CA71A4",$description:"Stroke for Midlands (pink lightened 35%)"},london:{$value:"#5A8F19",$description:"Stroke for London (light green darkened 25%)"},"south-west":{$value:"#BCA900",$description:"Stroke for South West (yellow darkened 25%)"},"south-east":{$value:"#B26800",$description:"Stroke for South East (orange darkened 25%)"}},severity:{$comment:"Contrast strokes for severity colours (light backgrounds use dark stroke; dark backgrounds use white).",low:{$value:"#212b32",$description:"Stroke for low severity (pale yellow fill)"},moderate:{$value:"#212b32",$description:"Stroke for moderate severity (warm yellow fill)"},high:{$value:"#212b32",$description:"Stroke for high severity (orange fill)"},critical:{$value:"#ffffff",$description:"Stroke for critical severity (red fill)"}},"org-level":{$comment:"Contrast strokes for organisational level colours (all dark brand fills so white stroke for consistency).",trust:{$value:"#ffffff",$description:"Stroke for trust (blue fill)"},ambulance:{$value:"#ffffff",$description:"Stroke for ambulance (green fill)"},icb:{$value:"#ffffff",$description:"Stroke for ICB (dark pink fill)"},region:{$value:"#ffffff",$description:"Stroke for region (purple fill)"}}},spc:{$comment:"SPC (Statistical Process Control) semantic variation colours aligned to SPCChart.scss and SPCIcons.",improvement:{$value:"#00B0F0",$description:"SPC special cause improvement (favourable)"},concern:{$value:"#E46C0A",$description:"SPC special cause concern (deteriorating)"},"no-judgement":{$value:"#490092",$description:"SPC special cause (no directional judgement)"},"common-cause":{$value:"#A6A6A6",$description:"SPC common cause (baseline variation)"},"assurance-pass":{$value:"#00823B",$description:"SPC assurance pass indicator (process capable)"},"assurance-fail":{$value:"#DA291C",$description:"SPC assurance fail indicator (process not capable)"},gradient:{$comment:"Opacity stops for SPC icon gradient wash (applied top-left -> bottom-right). Consumers build gradients using these opacities + base colour.",stop:{"start-opacity":{$value:"0.18",$description:"Start stop opacity (0%) for classic variant wash"},"mid-opacity":{$value:"0.06",$description:"Mid stop opacity (~65-75%)"},"end-opacity":{$value:"0",$description:"End stop opacity (100%)"},"triangle-start-opacity":{$value:"0.18",$description:"Start opacity for triangle variants (kept aligned)"},"triangle-mid-opacity":{$value:"0.06",$description:"Mid opacity for triangle variants"},"triangle-end-opacity":{$value:"0",$description:"End opacity for triangle variants"}}},stroke:{$comment:"Contrast stroke colours for SPC variation fills.",improvement:{$value:"#000000",$description:"Stroke for improvement points"},concern:{$value:"#000000",$description:"Stroke for concern points"},"no-judgement":{$value:"#000000",$description:"Stroke for no-judgement points"},"common-cause":{$value:"#ffffff",$description:"Stroke for common cause points"},"assurance-pass":{$value:"#000000",$description:"Stroke for assurance pass points"},"assurance-fail":{$value:"#000000",$description:"Stroke for assurance fail points"}}}}}},Ya={color:{primary:{$type:"color",blue:{$value:"#005eb8",$description:"NHS Blue - Primary brand color"},"blue-active":{$value:"#002f5c",$description:"NHS Active Blue (50% shade) â€“ alias of button/login active; promoted for general reuse"},white:{$value:"#ffffff",$description:"NHS White"},black:{$value:"#212b32",$description:"NHS Black"},green:{$value:"#007f3b",$description:"NHS Green"},purple:{$value:"#330072",$description:"NHS Purple"},"dark-pink":{$value:"#7c2855",$description:"NHS Dark Pink"},red:{$value:"#d5281b",$description:"NHS Red"},"light-purple":{$value:"#880FB8",$description:"NHS Light Purple (data viz promoted)"},yellow:{$value:"#ffeb3b",$description:"NHS Yellow"}},secondary:{$type:"color","pale-yellow":{$value:"#fff9c4",$description:"NHS Pale Yellow"},"warm-yellow":{$value:"#ffb81c",$description:"NHS Warm Yellow"},"region-yellow":{$value:"#FAE100",$description:"NHS Region Yellow (maps)"},orange:{$value:"#ed8b00",$description:"NHS Orange"},tangerine:{$value:"#ED4F00",$description:"NHS Tangerine (data viz promoted)"},"aqua-green":{$value:"#00a499",$description:"NHS Aqua Green"},"light-blue":{$value:"#41B6E6",$description:"NHS Light Blue (data viz promoted)"},pink:{$value:"#ae2573",$description:"NHS Pink"},"bright-pink":{$value:"#E317AA",$description:"NHS Bright Pink (data viz promoted)"},"light-green":{$value:"#78BE20",$description:"NHS Light Green (data viz promoted)"},brown:{$value:"#9A6324",$description:"NHS Brown (data viz promoted neutral)"}},grey:{1:{$value:"#4c6272",$description:"NHS Grey 1 - Darkest grey"},2:{$value:"#768692",$description:"NHS Grey 2 - Darker grey"},3:{$value:"#aeb7bd",$description:"NHS Grey 3 - Medium grey"},4:{$value:"#d8dde0",$description:"NHS Grey 4 - Light grey"},5:{$value:"#f0f4f5",$description:"NHS Grey 5 - Lightest grey"},$type:"color"},accessibility:{$type:"color",$comment:"Accessibility-oriented color tokens. Includes CVD-safe pairs and Okabeâ€“Ito colors. Use these for positive/negative semantics and colour-blindâ€“friendly defaults.","okabe-ito":{green:{$value:"#009E73",$description:"Okabeâ€“Ito green (CVD-safe) â€“ recommended positive"},vermillion:{$value:"#D55E00",$description:"Okabeâ€“Ito vermillion / redâ€“orange (CVD-safe) â€“ recommended negative"}},"cvd-safe":{blue:{$value:"#1f77b4",$description:"CVD-safe blue (pairs with orange); widely used in Matplotlib/Tableau sets"},orange:{$value:"#ff7f0e",$description:"CVD-safe orange (pairs with blue)"}},positive:{$value:"{color.accessibility.okabe-ito.green}",$description:"Accessibility semantic alias â€“ positive"},negative:{$value:"{color.accessibility.okabe-ito.vermillion}",$description:"Accessibility semantic alias â€“ negative"}}}},mx=["#005eb8","#0072ce","#41b6e6","#00a499","#7c2855","#330072","#d5281b","#ffb81c","#fae100","#4c6272","#768692","#aeb7bd"];let Ro=null,Oo=null,Ho=null,rf="optimized";function px(){const e={color:{...Ya.color,...xi.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,c)=>l?l[c]:void 0,e);if(!a)return;const s=a.$value||a.value;if(typeof s=="string"&&/^\{.+\}$/.test(s))return t(s.slice(1,-1),i);if(typeof s=="string")return s},n=[];try{for(let r=1;r<=12;r++){const i=`color.data-viz.categorical.${r}`,a=t(i);if(!a)throw new Error(`Missing token ${i}`);n.push(a)}return n}catch{return mx}}function gx(){return Ro||(Ro=px()),Ro}function bx(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.trim());return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function zo(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function yx(e,t,n){const r=zo(e),i=zo(t),a=zo(n),s=r*.4124+i*.3576+a*.1805,l=r*.2126+i*.7152+a*.0722,c=r*.0193+i*.1192+a*.9505;return{x:s*100,y:l*100,z:c*100}}function vx(e,t,n){let s=e/95.047,l=t/100,c=n/108.883;const u=d=>d>.008856?Math.cbrt(d):7.787*d+16/116;return s=u(s),l=u(l),c=u(c),{L:116*l-16,a:500*(s-l),b:200*(l-c)}}function af(e){const t=bx(e);if(!t)return null;const n=yx(t.r,t.g,t.b);return vx(n.x,n.y,n.z)}function sf(e,t){const n=e.L-t.L,r=e.a-t.a,i=e.b-t.b;return Math.sqrt(n*n+r*r+i*i)}function _x(){const e=gx();if(e.length<=2)return e.slice();const t=e.map(s=>af(s));let n=0,r=-1;for(let s=0;s<e.length;s++){const l=t[s];if(!l)continue;let c=0,u=0;for(let f=0;f<e.length;f++)s!==f&&t[f]&&(c+=sf(l,t[f]),u++);const d=c/Math.max(1,u);d>r&&(r=d,n=s)}const i=new Set(e.map((s,l)=>l)),a=[];for(a.push(n),i.delete(n);i.size;){let s=Array.from(i)[0],l=-1;for(const c of i){const u=t[c];if(!u)continue;let d=1/0;for(const f of a){const m=t[f];if(m){const g=sf(u,m);g<d&&(d=g)}}d>l&&(l=d,s=c)}a.push(s),i.delete(s)}return a.map(s=>e[s])}function xx(){return Oo||(Oo=_x()),Oo}function wx(e,t,n){const r=(e+16)/116,i=t/500+r,a=r-n/200,s=d=>{const f=d*d*d;return f>.008856?f:(d-16/116)/7.787},l=s(i)*95.047,c=s(r)*100,u=s(a)*108.883;return{X:l,Y:c,Z:u}}function Sx(e,t,n){e/=100,t/=100,n/=100;let r=e*3.2406+t*-1.5372+n*-.4986,i=e*-.9689+t*1.8758+n*.0415,a=e*.0557+t*-.204+n*1.057;const s=l=>l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055;return r=Math.min(1,Math.max(0,s(r))),i=Math.min(1,Math.max(0,s(i))),a=Math.min(1,Math.max(0,s(a))),{r:Math.round(r*255),g:Math.round(i*255),b:Math.round(a*255)}}function Cx(e,t,n){return`#${[e,t,n].map(r=>r.toString(16).padStart(2,"0")).join("")}`}function kx(e,t){const n=af(e);if(!n)return e;const r=Math.min(100,Math.max(0,n.L+t)),{X:i,Y:a,Z:s}=wx(r,n.a,n.b),l=Sx(i,a,s);return Cx(l.r,l.g,l.b)}function Tx(){const e=xx(),n=[12,-12,24,-24].map(i=>e.map(a=>kx(a,i))),r=[...e];return n.forEach(i=>r.push(...i)),r}function Nx(){return(!Ho||jx())&&(Ho=Tx(),of=rf),Ho}let of=null;function jx(){return of!==rf}function un(e){const t=Nx();return t[e%t.length]}let Ar=null,wi=null,Si=null,Ci=null;function Dx(){const e=xi?.color?.["data-viz"]?.stroke;if(e){const t=e.categorical||{};Ar=[];for(let a=1;a<=12;a++){const s=t[String(a)]?.$value||t[String(a)]?.value;Ar.push(typeof s=="string"?s:"#212b32")}const n=e.region||{};wi={},Object.keys(n).forEach(a=>{const s=n[a]?.$value||n[a]?.value;typeof s=="string"&&(wi[a]=s)});const r=e.severity||{},i=e["org-level"]||{};Ci={},Object.keys(i).forEach(a=>{const s=i[a]?.$value||i[a]?.value;typeof s=="string"&&(Ci[a]=s)}),Si={},Object.keys(r).forEach(a=>{const s=r[a]?.$value||r[a]?.value;typeof s=="string"&&(Si[a]=s)})}}function qa(){(!Ar||!wi||!Si||!Ci)&&Dx()}function dr(e){return qa(),Ar?Ar[e%Ar.length]:"#212b32"}function Mx(e){return qa(),wi?wi[e]:void 0}function Xa(e,t){return Mx(e)||dr(t)}const Uo=["low","moderate","high","critical"];let Wo=null;function Px(){const e={color:{...Ya.color,...xi.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,c)=>l?l[c]:void 0,e);if(!a)return;const s=a.$value||a.value;return typeof s=="string"&&/^\{.+\}$/.test(s)?t(s.slice(1,-1),i):typeof s=="string"?s:void 0},n={};return Uo.forEach(r=>{const i=t(`color.data-viz.severity.${r}`);i&&(n[r]=i)}),n}function lf(){return Wo||(Wo=Px()),Wo}function Ix(e){return lf()[e.toLowerCase()]}function Fx(e,t){return Ix(e)||lf()[Uo[t%Uo.length]]||un(t)}function $x(e){return qa(),Si?Si[e]:void 0}function Lx(e,t){return $x(e)||dr(t)}const Vo=["trust","ambulance","icb","region"];let Go=null;function Ax(){const e={color:{...Ya.color,...xi.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,c)=>l?l[c]:void 0,e);if(!a)return;const s=a.$value||a.value;return typeof s=="string"&&/^\{.+\}$/.test(s)?t(s.slice(1,-1),i):typeof s=="string"?s:void 0},n={};return Vo.forEach(r=>{const i=t(`color.data-viz.org-level.${r}`);i&&(n[r]=i)}),n}function cf(){return Go||(Go=Ax()),Go}function Ex(e){return cf()[e.toLowerCase()]}function Bx(e,t){return Ex(e)||cf()[Vo[t%Vo.length]]||un(t)}function Rx(e){return qa(),Ci?Ci[e]:void 0}function Ox(e,t){return Rx(e)||dr(t)}let Yo=null;const Hx=["north-east","north-west","east-of-england","midlands","london","south-west","south-east"];function zx(e){return e.trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Ux(){const e={color:{...Ya.color,...xi.color}},t=(i,a=new Set)=>{if(a.has(i))return;a.add(i);const s=i.split(".").reduce((c,u)=>c?c[u]:void 0,e);if(!s)return;const l=s.$value||s.value;return typeof l=="string"&&/^\{.+\}$/.test(l)?t(l.slice(1,-1),a):typeof l=="string"?l:void 0},n={},r=[];return Hx.forEach(i=>{const a=t(`color.data-viz.region.${i}`);a?n[i]=a:r.push(i)}),process.env.NODE_ENV!=="production"&&(Object.keys(n).length===0?console.warn("[DataViz] Region colour tokens unresolved  falling back to categorical colours."):r.length&&console.warn(`[DataViz] Missing region colour tokens: ${r.join(", ")}.`)),n}function Wx(){return Yo||(Yo=Ux()),Yo}function Vx(e){return Wx()[zx(e)]}function Er(e,t){return Vx(e)||un(t)}const uf=Z.createContext(null),ki=()=>Z.useContext(uf),Gx=({initialHiddenIds:e=[],children:t,hiddenIds:n,onChange:r})=>{const[i,a]=Z.useState(()=>new Set(e)),s=n!==void 0,l=Z.useMemo(()=>s?new Set(n):i,[s,n,i]),c=Z.useCallback(d=>{s||a(new Set(d)),r?.(Array.from(d))},[s,r]),u=Z.useMemo(()=>({hiddenIds:l,isHidden:d=>l.has(d),toggle:d=>{const f=new Set(l);f.has(d)?f.delete(d):f.add(d),c(f)},showOnly:d=>{c(new Set)},showAll:()=>c(new Set),setHidden:d=>c(new Set(Array.isArray(d)?d:Array.from(d)))}),[l,c]);return o.jsx(uf.Provider,{value:u,children:t})},df=Z.createContext(null),Ln=()=>Z.useContext(df),ff=({children:e,maxDistance:t=40,wrapAround:n=!1})=>{const r=ur(),i=ki(),[a,s]=Z.useState(null),l=Z.useRef(new Map),[c,u]=Z.useState([]),d=Z.useCallback((k,C)=>{l.current.set(k,C)},[]),f=Z.useCallback(k=>{l.current.delete(k)},[]),m=Z.useCallback((k,C)=>{if(!r)return;const{xScale:x,yScale:I}=r;let M=null,j=1/0;l.current.forEach((L,N)=>{L.forEach((F,P)=>{const $=x(F.x),ne=I(F.y),X=$-k,O=ne-C,H=Math.sqrt(X*X+O*O);H<j&&(j=H,M={seriesId:N,index:P,x:F.x,y:F.y,clientX:$,clientY:ne})})}),M&&j<=t?s(M):s(null)},[r,t]),g=Z.useCallback(()=>s(null),[]);Z.useEffect(()=>{if(!a){u([]);return}if(!r)return;const{xScale:k,yScale:C}=r,x=[];l.current.forEach((I,M)=>{I.forEach((j,L)=>{(a.x instanceof Date&&j.x instanceof Date?j.x.getTime()===a.x.getTime():j.x===a.x)&&x.push({seriesId:M,index:L,x:j.x,y:j.y,clientX:k(j.x),clientY:C(j.y)})})}),x.sort((I,M)=>I.seriesId.localeCompare(M.seriesId)),u(x)},[a,r]);const y=Z.useCallback(k=>{if(!a)return;const C=l.current.get(a.seriesId);if(!C)return;let x=a.index+k;if(x<0||x>=C.length){if(!n)return;x=(x+C.length)%C.length}const I=C[x];if(!r)return;const{xScale:M,yScale:j}=r;s({seriesId:a.seriesId,index:x,x:I.x,y:I.y,clientX:M(I.x),clientY:j(I.y)})},[a,r,n]),h=Z.useCallback(k=>{let C=Array.from(l.current.keys());if(i&&(C=C.filter($=>!i.isHidden($))),C.length===0)return;if(!a){const $=C[0],ne=l.current.get($);if(!ne||!r)return;const{xScale:X,yScale:O}=r,H=ne[0];s({seriesId:$,index:0,x:H.x,y:H.y,clientX:X(H.x),clientY:O(H.y)});return}const x=C.indexOf(a.seriesId);if(x===-1)return;let I=x+k;if(I<0||I>=C.length){if(!n)return;I=(I+C.length)%C.length}const M=C[I],j=l.current.get(M);if(!j||!r)return;const L=Math.min(a.index,j.length-1),N=j[L],{xScale:F,yScale:P}=r;s({seriesId:M,index:L,x:N.x,y:N.y,clientX:F(N.x),clientY:P(N.y)})},[a,r,n,i]),p=Z.useCallback(()=>{let k=Array.from(l.current.keys());if(i&&(k=k.filter(L=>!i.isHidden(L))),k.length===0)return;const C=a?a.seriesId:k[0],x=l.current.get(C);if(!x||x.length===0||!r)return;const I=x[0],{xScale:M,yScale:j}=r;s({seriesId:C,index:0,x:I.x,y:I.y,clientX:M(I.x),clientY:j(I.y)})},[a,r,i]),b=Z.useCallback(()=>{let k=Array.from(l.current.keys());if(i&&(k=k.filter(N=>!i.isHidden(N))),k.length===0)return;const C=a?a.seriesId:k[0],x=l.current.get(C);if(!x||x.length===0||!r)return;const I=x.length-1,M=x[I],{xScale:j,yScale:L}=r;s({seriesId:C,index:I,x:M.x,y:M.y,clientX:j(M.x),clientY:L(M.y)})},[a,r,i]),w=Z.useCallback(()=>y(1),[y]),D=Z.useCallback(()=>y(-1),[y]),S=Z.useCallback(()=>h(1),[h]),v=Z.useCallback(()=>h(-1),[h]),T=Z.useMemo(()=>({focused:a,setFocused:s,aggregated:c,focusNearest:m,clear:g,registerSeries:d,unregisterSeries:f,focusNextPoint:w,focusPrevPoint:D,focusNextSeries:S,focusPrevSeries:v,focusFirstPoint:p,focusLastPoint:b}),[a,c,m,g,d,f,w,D,S,v,p,b]);return o.jsx(df.Provider,{value:T,children:e})},hf=({series:e,seriesIndex:t,palette:n,showPoints:r,focusablePoints:i,focusIndex:a,parseX:s,visibilityMode:l="remove",strokeWidth:c=1,smooth:u=!0,gradientFillId:d,colors:f})=>{const m=ur();if(!m)return null;const{xScale:g,yScale:y}=m,p=ki()?.isHidden(e.id)??!1,b=p&&l==="fade";if(p&&l==="remove")return null;const w=Ln();Z.useEffect(()=>{if(!w)return;const C=e.data.map(x=>({x:s(x),y:x.y}));return w.registerSeries(e.id,C),()=>w.unregisterSeries(e.id)},[w,e.id,e.data,s]);const D=Z.useMemo(()=>Ao(e.data,C=>g(s(C)),C=>y(C.y),{smooth:u}),[e.data,g,y,s,u]),S=Z.useMemo(()=>{if(!e.data.length)return"";const[C]=y.domain(),x=$o().x(I=>g(s(I))).y0(()=>y(C)).y1(I=>y(I.y));return u&&x.curve(Ga),x(e.data)||""},[e.data,g,y,s,u]),v=f&&f[t],T=e.color||v||(n==="region"?Er(e.id,t):un(t)),k=n==="region"?Xa(e.id,t):dr(t);return o.jsxs("g",{className:"fdp-line-series","data-series":e.id,opacity:b?.25:1,"aria-hidden":b?!0:void 0,children:[d&&o.jsx("path",{d:S,fill:`url(#${d})`,stroke:"none",role:"presentation",className:"fdp-line-series__gradient"}),o.jsx("path",{d:D,fill:"none",stroke:T,strokeWidth:c,role:"presentation"}),r&&e.data.map((C,x)=>{const I=g(s(C)),M=y(C.y),j=i?0:-1,L=!b&&(i&&x===a||w?.focused?.seriesId===e.id&&w.focused.index===x),N=()=>{w&&!b&&w.setFocused({seriesId:e.id,index:x,x:s(C),y:C.y,clientX:I,clientY:M})},F=()=>{w&&w.focused?.seriesId===e.id&&w.focused.index===x&&w.clear()};return o.jsx("circle",{cx:I,cy:M,r:L?5:3.5,stroke:L?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":k,strokeWidth:L?2:1,fill:L?"var(--nhs-fdp-color-grey-3, #aeb7bd)":T,className:"fdp-line-point",tabIndex:b?-1:j,"aria-label":`${e.label||e.id} ${s(C).toDateString()} value ${C.y}`,"data-series":e.id,"data-index":x,onMouseEnter:N,onFocus:N,onMouseLeave:F,onBlur:F},x)})]})},Yx=({polite:e=!0,format:t})=>{const n=Ln(),[r,i]=Z.useState(""),a=Z.useRef("");return Z.useEffect(()=>{if(!n?.focused)return;const{focused:s,aggregated:l}=n;let c;if(l&&l.length>1){const u=l.map(f=>`${f.seriesId} ${f.y}`).join("; ");c=`${s.x instanceof Date?s.x.toDateString():String(s.x)} â€“ ${u}`}else c=t?t({seriesId:s.seriesId,x:s.x,y:s.y,index:s.index}):qx(s.seriesId,s.x,s.y,s.index);if(c!==a.current){a.current=c,i("");const u=setTimeout(()=>i(c),10);return()=>clearTimeout(u)}},[n?.focused,t]),o.jsx("div",{"aria-live":e?"polite":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,margin:-1,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",border:0},children:r})};function qx(e,t,n,r){const i=t instanceof Date?t.toDateString():String(t);return`Series ${e}, point ${r+1}, ${i}, value ${n}`}const Xx=()=>{const e=Ln(),t=Yn();if(!e||!t||!e.focused)return null;const{focused:n,aggregated:r}=e,{innerWidth:i,innerHeight:a}=t,s=Math.min(Math.max(n.clientX,0),i),l=Math.min(Math.max(n.clientY,0),a),c=s+8,u=l-8,d=r.length>1,f=n.x instanceof Date?n.x.toDateString():String(n.x),m=d?f:`${f} â€¢ ${n.y}`,g=/\d+$/.exec(n.seriesId||""),y=g?parseInt(g[0],10)-1:0,h=un(y>=0?y:0)||"#005eb8",p="var(--nhs-fdp-color-primary-yellow,#ffeb3b)";return o.jsxs("g",{className:"fdp-tooltip-layer",pointerEvents:"none",children:[o.jsx("circle",{cx:s,cy:l,r:7,fill:"none",stroke:p,strokeWidth:3}),o.jsx("circle",{cx:s,cy:l,r:5,fill:"#000",stroke:p,strokeWidth:1.5}),o.jsx("circle",{cx:s,cy:l,r:2.5,fill:h,stroke:"#fff",strokeWidth:.5}),d?(()=>{const w=r.map(k=>`${k.seriesId}: ${k.y}`),D=[m,...w],S=D.reduce((k,C)=>Math.max(k,C.length),0),v=Math.max(90,S*6.2+16),T=16*D.length+8;return o.jsxs("g",{children:[o.jsx("rect",{x:c,y:u-T,rx:4,ry:4,width:v,height:T,fill:"#212b32",opacity:.92}),D.map((k,C)=>o.jsx("text",{x:c+8,y:u-T+6+16*(C+.7),fill:"#fff",fontSize:12,children:k},C))]})})():o.jsxs("g",{children:[o.jsx("rect",{x:c,y:u-24,rx:4,ry:4,width:Math.max(60,m.length*6.2),height:24,fill:"#212b32",opacity:.92}),o.jsx("text",{x:c+8,y:u-8,fill:"#fff",fontSize:12,children:m})]})]})},Zx=({items:e,palette:t="categorical",direction:n="row",interactive:r=!1,adjustStrokeForWhiteBackground:i=!0,hiddenIds:a,defaultHiddenIds:s=[],onVisibilityChange:l,formatAnnouncement:c})=>{const u=ki(),d=!!(u&&!r&&!l&&a===void 0),f=r||d,m=e||[],g=a!==void 0,[y,h]=Z.useState(new Set(s)),p=g?new Set(a):y,[b,w]=Z.useState(""),D=S=>{if(d&&u){const j=u.isHidden(S);u.toggle(S);const N=m.find(P=>P.id===S)?.label||S,F=c?c(S,j,N):`${N} ${j?"shown":"hidden"}`;w(F);return}if(!f)return;const v=new Set(p),T=v.has(S);T?v.delete(S):v.add(S),g||h(v);const k=m.filter(j=>!v.has(j.id)).map(j=>j.id),C=Array.from(v);l?.(k,C);const I=m.find(j=>j.id===S)?.label||S,M=c?c(S,T,I):`${I} ${T?"shown":"hidden"}`;w(M)};return o.jsxs("div",{className:"fdp-legend-wrapper",children:[o.jsx("ul",{className:`fdp-legend fdp-legend--${n}`,children:m.map((S,v)=>{const T=S.palette||t,k=S.color||(T==="region"?Er(S.id,v):T==="severity"?Fx(S.id,v):T==="org-level"?Bx(S.id,v):un(v));let C=S.stroke||(T==="region"?Xa(S.id,v):T==="severity"?Lx(S.id,v):T==="org-level"?Ox(S.id,v):dr(v));if(i&&C){const M=C.trim().toLowerCase();(M==="#fff"||M==="#ffffff"||M==="white"||/^rgb\(\s*255\s*,\s*255\s*,\s*255\s*\)$/.test(M))&&(C="#212b32")}const x=d&&u?u.isHidden(S.id):p.has(S.id),I=f?{"aria-pressed":!x,"aria-label":`${S.label} (${x?"show":"hide"})`,onClick:()=>D(S.id)}:{"aria-label":S.label};return o.jsxs("li",{className:`fdp-legend__item${x?" fdp-legend__item--hidden":""}`,children:[o.jsx("button",{type:"button",className:"fdp-legend__swatch",style:{backgroundColor:k,backgroundImage:S.patternDataUrl?`url(${S.patternDataUrl})`:void 0,backgroundSize:S.patternDataUrl?"auto":void 0,borderColor:C},...I}),o.jsx("span",{className:"fdp-legend__label",children:S.label})]},S.id)})}),f&&o.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite","aria-atomic":"true",children:b})]})},Kx=({series:e,seriesIndex:t,palette:n,parseX:r,areaOnly:i=!1,visibilityMode:a="remove",baselineY:s=0,smooth:l=!0,stacked:c,gradientFill:u=!0,colors:d})=>{const f=ur();if(!f)return null;const{xScale:m,yScale:g}=f,h=ki()?.isHidden(e.id)??!1,p=h&&a==="fade";if(h&&a==="remove")return null;const b=Ln();Z.useEffect(()=>{if(!b)return;const k=e.data.map(C=>({x:r(C),y:C.y}));return b.registerSeries(e.id,k),()=>b.unregisterSeries(e.id)},[b,e.id,e.data,r]);const w=d&&d[t],D=e.color||w||(n==="region"?Er(e.id,t):un(t)),S=Z.useMemo(()=>c&&c.length===e.data.length?Ao(e.data,k=>m(r(k)),k=>{const C=e.data.indexOf(k);return g(c[C].y1)},{smooth:l}):Ao(e.data,k=>m(r(k)),k=>g(k.y),{smooth:l}),[e.data,c,m,g,r,l]),v=Z.useMemo(()=>{if(c&&c.length===e.data.length){const M=$o().x(j=>m(r(j))).y0((j,L)=>g(c[L].y0)).y1((j,L)=>g(c[L].y1));return l&&M.curve(Ga),M(e.data)||""}const[k,C]=g.domain();let x=s;x<k?x=k:x>C&&(x=C);const I=$o().x(M=>m(r(M))).y0(()=>g(x)).y1(M=>g(M.y));return l&&I.curve(Ga),I(e.data)||""},[e.data,c,m,g,r,s,l]),T=Z.useId();return o.jsxs("g",{className:"fdp-area-series","data-series":e.id,opacity:p?.25:1,"aria-hidden":p?!0:void 0,children:[u&&o.jsx("defs",{children:o.jsxs("linearGradient",{id:T,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:D,stopOpacity:.25}),o.jsx("stop",{offset:"100%",stopColor:D,stopOpacity:0})]})}),o.jsx("path",{className:"fdp-area-series__fill",d:v,fill:u?`url(#${T})`:D,...u?{}:{fillOpacity:.25},stroke:"none"}),!i&&o.jsx("path",{d:S,fill:"none",stroke:D,strokeWidth:1})]})},Jx=({series:e,seriesIndex:t,seriesCount:n,palette:r,parseX:i,focusable:a=!0,widthFactor:s=.8,groupGap:l=2,barWidth:c,adaptive:u=!1,adaptiveGroupOccupancy:d=.9,visibilityMode:f="remove",colorMode:m="series",allSeries:g,stacked:y,gapRatio:h=.15,minBarWidth:p,gradientFill:b=!0,gradientStrokeMatch:w=!0,opacity:D=1,fadedOpacity:S=.25,flatFillOpacity:v=1,colors:T})=>{const k=Math.max(0,h),C=ur(),x=Yn();if(!C||!x)return null;const{xScale:I,yScale:M}=C,L=ki()?.isHidden(e.id)??!1,N=L&&f==="fade";if(L&&f==="remove")return null;const F=Ln();Z.useEffect(()=>{if(!F)return;const Q=e.data.map(ie=>({x:i(ie),y:ie.y}));return F.registerSeries(e.id,Q),()=>F.unregisterSeries(e.id)},[F,e.id,e.data,i]);const P=typeof I.bandwidth=="function",$=P?I.bandwidth():void 0,ne=Z.useMemo(()=>{if($!=null)return $;const Q=g&&g.length?g:[e],ie=[];Q.forEach(oe=>{oe.data.forEach(ge=>{const R=I(i(ge));Number.isFinite(R)&&ie.push(R)})});const fe=ie.sort((oe,ge)=>oe-ge);if(fe.length<=1)return 40;const Y=[];for(let oe=1;oe<fe.length;oe++)Y.push(fe[oe]-fe[oe-1]);return Y.sort((oe,ge)=>oe-ge),(Y[Math.floor(Y.length/2)]||40)*s},[e.data,g,I,i,s,$]),{basePerBar:X}=Z.useMemo(()=>{if(P){const fe=ne,Y=Math.max(1,(fe-l*(n-1))/n),he=e.barWidth??c;let oe=he?Math.min(he,fe):Y;if(u){const ge=fe*Math.min(1,Math.max(.05,d)),R=Math.max(1,(ge-l*(n-1))/n);oe=he?Math.min(oe,R):R}return{basePerBar:oe}}const Q=e.barWidth??c,ie=Math.max(1,(ne-l*(n-1))/n);if(u){const fe=g&&g.length?g:[e],Y=[];fe.forEach(le=>le.data.forEach(me=>{const ae=I(i(me));Number.isFinite(ae)&&Y.push(ae)})),Y.sort((le,me)=>le-me);const he=[];for(let le=1;le<Y.length;le++)he.push(Y[le]-Y[le-1]);he.sort((le,me)=>le-me);const ge=(he[Math.floor(he.length/2)]||ne)*Math.min(1,Math.max(.05,d)),R=Math.max(1,(ge-l*(n-1))/n);return{basePerBar:Q?Math.min(Q,R):R}}return Q?{basePerBar:Math.min(Q,ie)}:{basePerBar:ie}},[P,ne,l,n,c,e.barWidth,u,d,g,I,i]),O=Z.useMemo(()=>{if(P)return[];const Q=[];return(g&&g.length?g:[e]).forEach(fe=>fe.data.forEach(Y=>{const he=I(i(Y));Number.isFinite(he)&&Q.push(he)})),Q.sort((fe,Y)=>fe-Y),Array.from(new Set(Q))},[P,g,e,I,i]),H=Z.useMemo(()=>{if(P)return[];if(!O.length)return[];if(O.length===1)return[{center:O[0],left:0,right:x.innerWidth}];const Q=[];for(let ie=0;ie<O.length;ie++){const fe=O[ie],Y=ie===0?0:(O[ie-1]+fe)/2,he=ie===O.length-1?x.innerWidth:(fe+O[ie+1])/2;Q.push({center:fe,left:Math.max(0,Y),right:Math.min(x.innerWidth,he)})}return Q},[P,O,x.innerWidth]),z=Z.useMemo(()=>{if(P||!H.length)return;const Q=Math.min(1,Math.max(.05,s)),ie=H.map(ge=>Math.max(2,ge.right-ge.left)),fe=ie.map(ge=>Math.max(2,Math.min(ge-1,ge*Q)));let Y=Math.min(...fe);if(p)if(n<=1){const ge=Math.min(...ie.map(R=>R-1));ge>=p&&Y<p&&(Y=Math.min(ge,p))}else{const ge=Math.min(...ie.map(V=>V-1)),R=p*n+(n-1)*(p*k);R<=ge&&Y<R&&(Y=R)}if(n<=1)return p&&Y<p&&ie.every(R=>R>=p)?{groupWidth:p,barWidth:p}:{groupWidth:Y,barWidth:Y};let he=Y/(n+(n-1)*k);return he<1&&(he=1),p&&he<p&&p*n+(n-1)*(p*k)<=Y&&(he=p),{groupWidth:he*n+(n-1)*(he*k),barWidth:he}},[P,H,s,n,k,p]),re=T&&T[t]?T[t]:void 0,U=e.color||re||(r==="region"?Er(e.id,t):un(t)),de=r==="region"?Xa(e.id,t):dr(t),ye=w&&(e.color||re)?U:de,ue=Number.isFinite(M(0))?M(0):M.range()[0],ce=Z.useId();return y&&y.length===e.data.length?o.jsxs("g",{className:"fdp-bar-series fdp-bar-series--stacked","data-series":e.id,opacity:N?S:D,"aria-hidden":N?!0:void 0,children:[b&&o.jsx("defs",{children:o.jsxs("linearGradient",{id:ce,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:U,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:U,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:U,stopOpacity:.06})]})}),e.data.map((Q,ie)=>{const fe=i(Q),Y=I(P?Q.x:fe);let he,oe;if(P)he=ne,oe=Y;else{const ee=H.find(G=>Math.abs(G.center-Y)<.5);if(!ee||!z)he=X,oe=Y-X/2;else{const{groupWidth:G}=z;he=G;let A=Y-G/2;A<ee.left&&(A=ee.left),A+G>ee.right&&(A=Math.max(ee.left,ee.right-G)),oe=A}}const ge=y[ie],R=M(ge.y0),V=M(ge.y1),le=Math.min(R,V),me=Math.abs(V-R)||1;if(!P&&p&&he<p){const ee=H.find(G=>Math.abs(G.center-Y)<.5);if(ee){const G=Math.max(2,ee.right-ee.left-1),A=Math.min(G,p);A>he&&(he=A,oe=Math.max(ee.left,Math.min(ee.right-he,Y-he/2)))}}const ae=!N&&F?.focused?.seriesId===e.id&&F.focused.index===ie,B=()=>{!F||N||F.setFocused({seriesId:e.id,index:ie,x:fe,y:ge.y1-ge.y0,clientX:oe+he/2,clientY:le})},W=()=>{F?.focused?.seriesId===e.id&&F.focused.index===ie&&F.clear()};return o.jsx("rect",{x:oe,y:le,width:he,height:me,fill:b?`url(#${ce})`:U,...b?{}:{fillOpacity:v},stroke:ae?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":b&&w?U:void 0,strokeWidth:ae?2:1,className:"fdp-bar fdp-bar--stacked",tabIndex:N||!a?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${fe instanceof Date?fe.toDateString():fe} value ${ge.y1-ge.y0}`,onMouseEnter:B,onFocus:B,onMouseLeave:W,onBlur:W},ie)})]}):o.jsxs("g",{className:"fdp-bar-series","data-series":e.id,opacity:N?S:D,"aria-hidden":N?!0:void 0,children:[b&&o.jsxs("defs",{children:[m==="series"&&o.jsxs("linearGradient",{id:ce,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:U,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:U,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:U,stopOpacity:.06})]}),m==="category"&&e.data.map((Q,ie)=>{const Y=T&&T[ie]||(r==="region"?Er(String(Q.x),ie):un(ie)),he=`${ce}-${ie}`;return o.jsxs("linearGradient",{id:he,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:Y,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:Y,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:Y,stopOpacity:.06})]},he)})]}),e.data.map((Q,ie)=>{const fe=i(Q),Y=I(P?Q.x:fe);let he,oe;if(P){const J=ne;if(n<=1)oe=J,he=Y;else{oe=Math.max(1,J/(n+(n-1)*k));const te=oe*k,K=oe*n+te*(n-1);he=Y+(J-K)/2+t*(oe+te)}}else{const J=H.find(te=>te.center===Y);if(!J||!z)oe=X,he=Y-X/2,p&&oe<p&&(oe=p,he=Y-oe/2);else{const{barWidth:te}=z;oe=te;const K=n>1?te*k:0,se=oe*n+K*(n-1);let be=Y-se/2;be<J.left&&(be=J.left),be+se>J.right&&(be=Math.max(J.left,J.right-se)),he=be+t*(oe+K)}if(p&&oe<p){const te=H.find(K=>Math.abs(K.center-Y)<.5);if(te){const K=Math.max(2,te.right-te.left-1),se=Math.min(K,p);if(se>oe)if(n<=1)oe=se,he=Math.max(te.left,Math.min(te.right-oe,Y-oe/2));else{const be=se*k,_e=se*n+be*(n-1);if(_e<=te.right-te.left-1){oe=se;const Se=_e;let Te=Y-Se/2;Te<te.left&&(Te=te.left),Te+Se>te.right&&(Te=Math.max(te.left,te.right-Se)),he=Te+t*(oe+be)}}}}}const ge=he+oe/2,R=M(Q.y),V=Math.min(ue,R),le=Math.abs(ue-R),me=!N&&F?.focused?.seriesId===e.id&&F.focused.index===ie,ae=()=>{!F||N||F.setFocused({seriesId:e.id,index:ie,x:fe,y:Q.y,clientX:ge,clientY:R})},B=()=>{F?.focused?.seriesId===e.id&&F.focused.index===ie&&F.clear()},W=m==="category"&&T?T[ie]:void 0,ee=m==="category"?W||(r==="region"?Er(String(Q.x),ie):un(ie)):U,G=m==="category"?`${ce}-${ie}`:ce,A=b&&w?ee:m==="category"?r==="region"?Xa(String(Q.x),ie):dr(ie):ye,q=me?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":A||ee;return o.jsx("rect",{x:he,y:V,width:oe,height:le||1,fill:b?`url(#${G})`:ee,...b?{}:{fillOpacity:v},stroke:q,strokeWidth:me?2:1,className:"fdp-bar",tabIndex:N||!a?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${fe instanceof Date?fe.toDateString():fe} value ${Q.y}`,onMouseEnter:ae,onFocus:ae,onMouseLeave:B,onBlur:B},ie)})]})},Qx=({series:e,innerWidth:t,innerHeight:n,paddingInner:r=.1,paddingOuter:i=.05,children:a,yTickCount:s=5})=>{const l=Yn(),c=t??l?.innerWidth??0,u=n??l?.innerHeight??0,d=Z.useMemo(()=>e.flatMap(p=>p.data),[e]),f=Z.useMemo(()=>{const p=new Set;return d.forEach(b=>p.add(b.x)),Array.from(p)},[d]),m=Z.useMemo(()=>Math.max(0,...d.map(p=>p.y)),[d]),g=Z.useMemo(()=>mu().domain(f).range([0,c]).paddingInner(r).paddingOuter(i),[f,c,r,i]),y=Z.useMemo(()=>$a().domain([0,m]).nice().range([u,0]),[m,u]),h=Z.useMemo(()=>({xScale:g,yScale:y,getXTicks:()=>f,getYTicks:(p=s)=>y.ticks(p)}),[g,y,f,s]);return o.jsx(Eo.Provider,{value:h,children:a})},e1=({title:e,description:t,source:n,table:r,className:i,id:a,message:s="Interactive chart loadingâ€¦",forceFallback:l=!1})=>{const c=Z.useId(),u=a||c,d=t?`${u}-desc`:void 0,f=n?`${u}-src`:void 0,m=typeof window<"u"&&!l;return o.jsxs("figure",{id:u,className:Wa("fdp-chart fdp-chart--noscript",i),"aria-labelledby":`${u}-title`,"aria-describedby":Wa(d,f),"data-component":"ChartNoScript",children:[o.jsx("header",{className:"fdp-chart__header",children:o.jsx("h3",{id:`${u}-title`,className:"fdp-chart__title",children:e})}),t&&o.jsx("p",{id:d,className:"fdp-chart__description",children:t}),!m&&o.jsx("div",{className:"fdp-chart__loading",role:"status","aria-live":"polite",children:s}),o.jsxs("div",{className:"fdp-chart__fallback",role:"group","aria-label":e,children:[o.jsx("noscript",{children:o.jsx("div",{className:"fdp-chart__noscript-wrapper",children:o.jsx(cn,{...r})})}),o.jsx("div",{className:"fdp-chart__table","data-fallback-table":!0,children:o.jsx(cn,{...r})})]}),n&&o.jsx("figcaption",{className:"fdp-chart__caption",children:n&&o.jsxs("small",{id:f,className:"fdp-chart__source",children:["Source: ",n]})})]})},t1=({selector:e="figure.fdp-chart",onEnhanced:t,delay:n=0,children:r})=>{const i=Z.useRef(null);return Z.useEffect(()=>{const a=i.current;if(!a)return;const s=()=>{const l=Array.from(a.querySelectorAll(e));if(l.length===0)return;const c=[];l.forEach(u=>{u.classList.contains("fdp-chart--enhanced")||(u.classList.add("fdp-chart--enhanced"),c.push(u))}),c.length&&t&&t(c)};if(n>0){if(typeof window>"u")return;const l=window.setTimeout(s,n);return()=>window.clearTimeout(l)}s()},[e,t,n]),o.jsx("div",{ref:i,children:r})},mf=({label:e,value:t,unit:n,delta:r,status:i="neutral",variant:a="default",subtitle:s,metadata:l,trendData:c,loading:u=!1,error:d,valueFormatter:f,className:m,style:g,id:y,announceDelta:h=!0,visual:p})=>{const b=Z.useId(),w=y||b,D=`${w}-label`,S=`${w}-value`,v=`${w}-delta`,T=typeof t=="number"&&!Number.isNaN(t),k=u?"â€”":d?"":T?f?f(t):t.toLocaleString():t;let C,x="",I="";if(r&&!u&&!d){C=r.direction||(r.value>0?"up":r.value<0?"down":"neutral");const M=Math.abs(r.value),j=C==="up"?`+${M}`:C==="down"?`-${M}`:"0",L=r.isPercent?"%":"";if(x=`${j}${L}`,r.ariaLabel)I=r.ariaLabel;else{const N=r.invert?C==="down":C==="up";I=`${C==="neutral"?"no change":C==="up"?"up":"down"} ${M}${L}${C==="neutral"?"":N?" (improvement)":" (worse)"}`}}return o.jsx("div",{className:Wa("fdp-metric-card",a&&`fdp-metric-card--${a}`,i&&`fdp-metric-card--status-${i}`,u&&"fdp-metric-card--loading",d&&"fdp-metric-card--error",m),style:g,role:"group","aria-labelledby":D,"data-component":"MetricCard",children:o.jsxs("div",{className:"fdp-metric-card__inner",children:[o.jsxs("div",{className:"fdp-metric-card__header",children:[o.jsx("h3",{id:D,className:"fdp-metric-card__label",children:e}),l&&o.jsx("div",{className:"fdp-metric-card__metadata",children:l})]}),o.jsxs("div",{className:"fdp-metric-card__content",children:[o.jsxs("div",{className:"fdp-metric-card__value-section",children:[o.jsx("div",{id:S,className:"fdp-metric-card__value",children:u?o.jsx("div",{className:"fdp-metric-card__skeleton","aria-hidden":"true",children:o.jsx("div",{className:"fdp-metric-card__skeleton-line fdp-metric-card__skeleton-line--value"})}):d?o.jsx("div",{className:"fdp-metric-card__error",role:"alert",children:d}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"fdp-metric-card__number",children:k}),n&&o.jsx("span",{className:"fdp-metric-card__unit",children:n})]})}),s&&!u&&!d&&o.jsx("div",{className:"fdp-metric-card__subtitle",children:s})]}),r&&!u&&!d&&o.jsx("div",{className:"fdp-metric-card__delta-section",children:o.jsxs("div",{id:v,"aria-label":I,className:Wa("fdp-metric-card__delta",C&&`fdp-metric-card__delta--${C}`),children:[o.jsx("span",{className:"fdp-metric-card__delta-value",children:x}),r.period&&o.jsx("span",{className:"fdp-metric-card__delta-period",children:r.period})]})}),c&&c.length>0&&!u&&!d&&o.jsx("div",{className:"fdp-metric-card__trend","aria-hidden":"true"})]}),p&&!d&&o.jsx("div",{className:"fdp-metric-card__visual","aria-hidden":"true",children:p}),h&&r&&!r.ariaLabel&&!u&&!d&&o.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite",children:I})]})})};let qo=null;try{qo=require("@fergusbisset/nhs-fdp-design-system/dist/js/tokens.json")?.color?.["data-viz"]?.spc||null}catch{}const Ve=(e,t)=>{if(!qo)return t;const n=e.split(".");let r=qo;for(const a of n){if(r==null)break;r=r[a]}const i=r;return i==null?t:typeof i=="string"||typeof i=="number"?String(i):i.$value!=null?String(i.$value):i.value!=null?String(i.value):t},Za=()=>({start:Ve("gradient.stop.start-opacity","0.12"),mid:Ve("gradient.stop.mid-opacity","0.03"),end:Ve("gradient.stop.end-opacity","0"),triStart:Ve("gradient.stop.triangle-start-opacity",Ve("gradient.stop.start-opacity","0.12")),triMid:Ve("gradient.stop.triangle-mid-opacity",Ve("gradient.stop.mid-opacity","0.03")),triEnd:Ve("gradient.stop.triangle-end-opacity",Ve("gradient.stop.end-opacity","0"))});var $t=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))($t||{}),ze=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(ze||{}),je=(e=>(e.Improvement="improvement",e.Concern="concern",e.Neither="neither",e.Suppressed="suppressed",e))(je||{}),An=(e=>(e.SinglePoint="single_point",e.TwoSigma="two_sigma",e.Shift="shift",e.Trend="trend",e))(An||{});const Xo=["single_point","two_sigma","shift","trend"];Xo.reduce((e,t,n)=>(e[t]=n+1,e),{});const n1={single_point:"Single point beyond process limit",two_sigma:"Two of three beyond 2Ïƒ on one side",shift:"Sustained shift (run)",trend:"Monotonic trend"},r1={single_point:"point",two_sigma:"cluster",shift:"sustained",trend:"sustained"},pf=Xo.reduce((e,t,n)=>(e[t]={id:t,rank:n+1,label:n1[t],category:r1[t],participatesInRanking:!0},e),{});Xo.map(e=>pf[e]);var Dt=(e=>(e.Up="up",e.Down="down",e))(Dt||{}),Tt=(e=>(e.SinglePointAbove="single_above",e.SinglePointBelow="single_below",e.TwoOfThreeAbove="two_of_three_above",e.TwoOfThreeBelow="two_of_three_below",e.FourOfFiveAbove="four_of_five_above",e.FourOfFiveBelow="four_of_five_below",e.ShiftHigh="shift_high",e.ShiftLow="shift_low",e.TrendIncreasing="trend_inc",e.TrendDecreasing="trend_dec",e.FifteenInnerThird="fifteen_inner_third",e))(Tt||{}),it=(e=>(e.Pass="pass",e.Fail="fail",e.None="none",e))(it||{}),Jt=(e=>(e.Shift="shift",e.Trend="trend",e.Point="point",e))(Jt||{}),Ka=(e=>(e.Legacy="legacy",e.DirectionalFirst="directional_first",e))(Ka||{}),gf=(e=>(e.None="none",e.SqlRankingV26a="sql_ranking_v2_6a",e))(gf||{}),Br=(e=>(e.Upwards="Upwards",e.Downwards="Downwards",e.Same="Same",e))(Br||{}),bf=(e=>(e.Sql="sql",e.Conflict="conflict",e))(bf||{}),Ti=(e=>(e.ImprovementValueBeforePruning="improvementValueBeforePruning",e.ConcernValueBeforePruning="concernValueBeforePruning",e))(Ti||{});const Rr={singlePointUp:{tooltip:"Single point above upper control limit",narration:"Single point beyond a control limit"},singlePointDown:{tooltip:"Single point below lower control limit",narration:"Single point beyond a control limit"},twoOfThreeUp:{tooltip:"Two of three points beyond +2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},twoOfThreeDown:{tooltip:"Two of three points beyond -2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},fourOfFiveUp:{tooltip:"Four of five points beyond +1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},fourOfFiveDown:{tooltip:"Four of five points beyond -1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},shiftUp:{tooltip:"Shift: run of points above centre line",narration:"Shift (run on one side of mean)"},shiftDown:{tooltip:"Shift: run of points below centre line",narration:"Shift (run on one side of mean)"},trendUp:{tooltip:"Trend: consecutive increasing points",narration:"Trend (consecutive increases)"},trendDown:{tooltip:"Trend: consecutive decreasing points",narration:"Trend (consecutive decreases)"}};function Ja(e){if(!e)return[];const t=[];return e.specialCauseSinglePointUp&&t.push("singlePointUp"),e.specialCauseSinglePointDown&&t.push("singlePointDown"),e.specialCauseTwoOfThreeUp&&t.push("twoOfThreeUp"),e.specialCauseTwoOfThreeDown&&t.push("twoOfThreeDown"),e.specialCauseFourOfFiveUp&&t.push("fourOfFiveUp"),e.specialCauseFourOfFiveDown&&t.push("fourOfFiveDown"),e.specialCauseShiftUp&&t.push("shiftUp"),e.specialCauseShiftDown&&t.push("shiftDown"),e.specialCauseTrendUp&&t.push("trendUp"),e.specialCauseTrendDown&&t.push("trendDown"),t}function Qa(e){switch(e){case je.Improvement:return"Improvement signal";case je.Concern:return"Concern signal";case je.Neither:return"Common cause variation";case je.Suppressed:return null;default:return null}}function yf(e){switch(e){case it.Pass:return"Target met";case it.Fail:return"Target not met";default:return null}}function i1(e,t,n){if(e==null||!Number.isFinite(t)||t<=0)return null;const r=Math.abs((n-e)/t);return r<1?"Within 1Ïƒ":r<2?"Between 1â€“2Ïƒ":r<3?"Between 2â€“3Ïƒ":"Beyond 3Ïƒ"}const sn={improvement:{token:"var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",hex:"#00B0F0"},concern:{token:"var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",hex:"#E46C0A"},neither:{token:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",hex:"#A6A6A6"},suppressed:{token:"var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",hex:"#490092"}};function vf(e){return e?sn[e]?.token??sn.neither.token:sn.neither.token}function a1(e){return e?sn[e]?.hex??sn.neither.hex:sn.neither.hex}var fr=(e=>(e.Pass="pass",e.Fail="fail",e.Uncertain="uncertain",e))(fr||{});const s1={pass:"#00B0F0",fail:"#E46C0A",uncertain:"#A6A6A6"},o1={pass:"P",fail:"F",uncertain:"?"};var ft=(e=>(e.HigherIsBetter="higher_is_better",e.LowerIsBetter="lower_is_better",e.ContextDependent="context_dependent",e))(ft||{}),Me=(e=>(e.Higher="higher",e.Lower="lower",e))(Me||{}),Lt=(e=>(e.Improving="improving",e.Deteriorating="deteriorating",e.No_Judgement="no_judgement",e.None="none",e))(Lt||{}),Ce=(e=>(e.SpecialCauseImproving="special_cause_improving",e.SpecialCauseDeteriorating="special_cause_deteriorating",e.CommonCause="common_cause",e.SpecialCauseNoJudgement="special_cause_no_judgement",e))(Ce||{});const l1=e=>{const t=e.replace("#",""),n=parseInt(t.slice(0,2),16)/255,r=parseInt(t.slice(2,4),16)/255,i=parseInt(t.slice(4,6),16)/255,a=[n,r,i].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*a[0]+.7152*a[1]+.0722*a[2]<.55?"#ffffff":"#212b32"},es={special_cause_deteriorating:{hex:sn.concern.hex,judgement:"deteriorating",label:"Special Cause (Deteriorating)",description:"Deteriorating variation detected (special cause) relative to baseline."},special_cause_improving:{hex:sn.improvement.hex,judgement:"improving",label:"Special Cause (Improving)",description:"Improving variation detected (special cause) relative to baseline."},common_cause:{hex:sn.neither.hex,judgement:"none",label:"Common Cause",description:"Common cause variation only â€“ no special cause detected."},special_cause_no_judgement:{hex:sn.suppressed.hex,judgement:"no_judgement",label:"Special Cause (No Judgement)",description:"Special cause detected without assigning improving/deteriorating judgement."}};Object.values(es).forEach(e=>{e.text||(e.text=l1(e.hex))});const _f=e=>es[e],Zo=e=>es[e].judgement||"none",xf={special:{higher:[{cx:77.5,cy:158.5},{cx:114,cy:175},{cx:150.5,cy:158.5},{cx:188,cy:125},{cx:225,cy:137}],lower:[{cx:77.5,cy:139.5},{cx:114,cy:124.5},{cx:150.5,cy:139.5},{cx:188,cy:175.5},{cx:224.5,cy:162}]},common:[{cx:76.5,cy:149.5},{cx:113,cy:179.5},{cx:149.5,cy:117},{cx:187,cy:171},{cx:223.5,cy:158}]};function c1(e,t){let n;return e==="common_cause"?n=xf.common:n=xf.special[t==="lower"?"lower":"higher"],n.map(r=>({...r}))}var Mt=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(Mt||{}),Fe=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(Fe||{}),Ee=(e=>(e.ImprovementHigh="ImprovementHigh",e.ImprovementLow="ImprovementLow",e.ConcernHigh="ConcernHigh",e.ConcernLow="ConcernLow",e.NeitherHigh="NeitherHigh",e.NeitherLow="NeitherLow",e.CommonCause="CommonCause",e))(Ee||{}),Ze=(e=>(e.SinglePoint="SinglePoint",e.TwoSigma="TwoSigma",e.Shift="Shift",e.Trend="Trend",e))(Ze||{}),hr=(e=>(e.Upwards="Upwards",e.Downwards="Downwards",e.Same="Same",e))(hr||{}),dn=(e=>(e.Up="Up",e.Down="Down",e))(dn||{}),Or=(e=>(e.Improvement="Improvement",e.Concern="Concern",e))(Or||{}),Hr=(e=>(e.SqlPrimeThenRule="SqlPrimeThenRule",e.PreferImprovement="PreferImprovement",e.RuleHierarchy="RuleHierarchy",e))(Hr||{}),wt=(e=>(e.FavourableSide="FavourableSide",e.CrossingAfterFavourable="CrossingAfterFavourable",e.ExtremeFavourable="ExtremeFavourable",e.FirstFavourable="FirstFavourable",e.LongestFavourable="LongestFavourable",e.LastFavourable="LastFavourable",e.UnfavourableSide="UnfavourableSide",e.CrossingAfterUnfavourable="CrossingAfterUnfavourable",e.ExtremeUnfavourable="ExtremeUnfavourable",e.FirstUnfavourable="FirstUnfavourable",e.LongestUnfavourable="LongestUnfavourable",e.LastUnfavourable="LastUnfavourable",e))(wt||{}),En=(e=>(e.Off="Off",e.AutoWhenConflict="AutoWhenConflict",e.Always="Always",e))(En||{});const qn={[Ze.SinglePoint]:1,[Ze.TwoSigma]:2,[Ze.Shift]:3,[Ze.Trend]:4},wf=3.267,u1=2.66,Sf=.2777;function De(e){return typeof e=="number"&&!Number.isNaN(e)}function zr(e){return e.reduce((t,n)=>t+n,0)/(e.length||1)}function Cf(e,t){const n=new Array(e.length).fill(null);let r=null;for(let i=0;i<e.length;i++){const a=e[i];if(!(t[i]||!De(a))){if(r!==null){const s=e[r];De(s)&&(n[i]=Math.abs(a-s))}r=i}}return n}function kf(e,t){const n=e.filter(De);if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=n.slice();if(t){const a=zr(r),s=wf*a;r=r.filter(l=>l<=s)}const i=zr(r);return{mrMean:i,mrUcl:wf*i}}function Tf(e,t){if(!De(e)||!De(t))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=u1*t,r=2/3*n,i=1/3*n;return{upperProcessLimit:e+n,lowerProcessLimit:e-n,upperTwoSigma:e+r,lowerTwoSigma:e-r,upperOneSigma:e+i,lowerOneSigma:e-i}}function d1(e,t,n,r){if(e===Mt.T){const f=t.map(C=>De(C)&&C>0?Math.pow(C,Sf):null),m=Cf(f,n),g=kf(m,r),y=f.filter((C,x)=>!n[x]&&De(C)),h=y.length?zr(y):NaN,p=Tf(h,g.mrMean),b=C=>De(C)&&C>0?Math.pow(C,1/Sf):null,w=De(p.upperProcessLimit)?b(p.upperProcessLimit):null,D=De(p.lowerProcessLimit)&&p.lowerProcessLimit>0?b(p.lowerProcessLimit):null,S=De(p.upperTwoSigma)?b(p.upperTwoSigma):null,v=De(p.lowerTwoSigma)&&p.lowerTwoSigma>0?b(p.lowerTwoSigma):null,T=De(p.upperOneSigma)?b(p.upperOneSigma):null,k=De(p.lowerOneSigma)&&p.lowerOneSigma>0?b(p.lowerOneSigma):null;return{mean:De(h)&&h>0?b(h):null,mr:m,mrMean:g.mrMean,mrUcl:g.mrUcl,upperProcessLimit:w,lowerProcessLimit:D,upperTwoSigma:S,lowerTwoSigma:v,upperOneSigma:T,lowerOneSigma:k}}if(e===Mt.G){const f=t.filter((M,j)=>!n[j]&&De(M)),m=f.length?zr(f):NaN,g=De(m)?1/(m+1):NaN,y=M=>{if(!De(g)||g<=0||g>=1)return NaN;const j=Math.ceil(Math.log(1-M)/Math.log(1-g))-1;return Math.max(0,j)},h=.00135,p=1-.00135,b=.02275,w=1-.02275,D=.158655,S=1-.158655,v=y(p),T=y(h),k=y(w),C=y(b),x=y(S),I=y(D);return{mean:De(m)?m:null,mr:new Array(t.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:De(v)?v:null,lowerProcessLimit:De(T)?T:null,upperTwoSigma:De(k)?k:null,lowerTwoSigma:De(C)?C:null,upperOneSigma:De(x)?x:null,lowerOneSigma:De(I)?I:null}}if(e!==Mt.XmR)return{mean:NaN,mr:new Array(t.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const i=Cf(t,n),a=i.filter(De),s=a.length?zr(a):NaN,l=De(s)?3.267*s:NaN;let c=NaN;{const f=t.reduce((m,g,y)=>{if(n[y]||!De(g))return m;if(!r)return m.push(g),m;const h=i[y];return(h===null||!De(l)||De(h)&&h<=l)&&m.push(g),m},[]);c=f.length?zr(f):NaN}const u=kf(i,r),d=Tf(c,u.mrMean);return{mean:c,mr:i,mrMean:u.mrMean,mrUcl:u.mrUcl,...d}}function f1(e,t){const n=e.map((c,u)=>u).filter(c=>!e[c].ghost&&De(e[c].value)),r=c=>e[c],i=t.shiftPoints,a=t.trendPoints;let s=[],l=[];for(const c of n){const u=r(c);if(!De(u.mean)||!De(u.value)?(s=[],l=[]):u.value>u.mean?(s.push(c),l=[]):u.value<u.mean?(l.push(c),s=[]):(s=[],l=[]),s.length>=i)for(const d of s)r(d).shiftUp=!0;if(l.length>=i)for(const d of l)r(d).shiftDown=!0}for(let c=0;c<=n.length-3;c++){const d=n.slice(c,c+3).map(r);if(!d.every(S=>De(S.value)&&De(S.mean)))continue;const f=d[0].mean,m=d.every(S=>S.value>f),g=d.every(S=>S.value<f);if(!m&&!g)continue;const y=d[0].upperTwoSigma??1/0,h=d[0].lowerTwoSigma??-1/0,p=d[0].upperProcessLimit??1/0,b=d[0].lowerProcessLimit??-1/0,w=d.filter(S=>t.twoSigmaIncludeAboveThree?S.value>y:S.value>y&&S.value<=p),D=d.filter(S=>t.twoSigmaIncludeAboveThree?S.value<h:S.value<h&&S.value>=b);m&&w.length>=2&&w.forEach(S=>S.twoSigmaUp=!0),g&&D.length>=2&&D.forEach(S=>S.twoSigmaDown=!0)}if(t.enableFourOfFiveRule)for(let c=0;c<=n.length-5;c++){const d=n.slice(c,c+5).map(r);if(!d.every(w=>De(w.value)&&De(w.mean)))continue;const f=d[0].mean,m=d.every(w=>w.value>f),g=d.every(w=>w.value<f);if(!m&&!g)continue;const y=d[0].upperOneSigma??1/0,h=d[0].lowerOneSigma??-1/0,p=d.filter(w=>w.value>y),b=d.filter(w=>w.value<h);m&&p.length>=4&&p.forEach(w=>w.fourOfFiveUp=!0),g&&b.length>=4&&b.forEach(w=>w.fourOfFiveDown=!0)}for(let c=0;c<=n.length-a;c++){const u=n.slice(c,c+a),d=u.map(r);if(!d.every(g=>De(g.value)))continue;let f=!0,m=!0;for(let g=1;g<d.length&&(d[g].value>d[g-1].value||(f=!1),d[g].value<d[g-1].value||(m=!1),!(!f&&!m));g++);f&&u.forEach(g=>r(g).trendUp=!0),m&&u.forEach(g=>r(g).trendDown=!0)}}function Nf(e){const t=[],n=[];e.singlePointUp&&t.push({id:Ze.SinglePoint,rank:qn[Ze.SinglePoint]}),e.singlePointDown&&n.push({id:Ze.SinglePoint,rank:qn[Ze.SinglePoint]}),e.twoSigmaUp&&t.push({id:Ze.TwoSigma,rank:qn[Ze.TwoSigma]}),e.twoSigmaDown&&n.push({id:Ze.TwoSigma,rank:qn[Ze.TwoSigma]}),e.shiftUp&&t.push({id:Ze.Shift,rank:qn[Ze.Shift]}),e.shiftDown&&n.push({id:Ze.Shift,rank:qn[Ze.Shift]}),e.trendUp&&t.push({id:Ze.Trend,rank:qn[Ze.Trend]}),e.trendDown&&n.push({id:Ze.Trend,rank:qn[Ze.Trend]});const r=t.reduce((s,l)=>Math.max(s,l.rank),0),i=n.reduce((s,l)=>Math.max(s,l.rank),0),a=r>i?hr.Upwards:i>r?hr.Downwards:hr.Same;return{up:t,dn:n,upMax:r,dnMax:i,primeDirection:a}}function jf(e,t){const n=t===Fe.Up?e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp:t===Fe.Down?e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown:!1,r=t===Fe.Up?e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown:t===Fe.Down?e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp:!1;return{aligned:n,opposite:r}}function Df(e,t,n,r=!1,i,a,s=!1){const{up:l,dn:c,upMax:u,dnMax:d,primeDirection:f}=Nf(e);e.primeDirection=f;const m=e.specialCauseImprovementValue,g=e.specialCauseConcernValue;e.specialCauseImprovementValue!==null&&e.specialCauseConcernValue!==null&&h1({row:e,metric:t,metricConflictRule:n,preferImprovementWhenConflict:r,preferTrendWhenConflict:s,primeDirection:f,conflictStrategy:i,ruleHierarchy:a}),t===Fe.Up?e.variationIcon=e.specialCauseImprovementValue!==null?Ee.ImprovementHigh:e.specialCauseConcernValue!==null?Ee.ConcernLow:Ee.CommonCause:t===Fe.Down?e.variationIcon=e.specialCauseImprovementValue!==null?Ee.ImprovementLow:e.specialCauseConcernValue!==null?Ee.ConcernHigh:Ee.CommonCause:e.variationIcon=Ee.CommonCause;const y=e.specialCauseImprovementValue!==null?dn.Up:e.specialCauseConcernValue!==null?dn.Down:void 0,h=y===dn.Up?u:y===dn.Down?d:Math.max(u,d);e.primeRank=h||void 0;const p=y===dn.Up?l.find(b=>b.rank===h):y===dn.Down?c.find(b=>b.rank===h):void 0;return e.primeRuleId=p?.id,{originalImprovement:m,originalConcern:g}}function h1(e){const{row:t,metric:n,metricConflictRule:r,preferImprovementWhenConflict:i,preferTrendWhenConflict:a,primeDirection:s=t.primeDirection??hr.Same,conflictStrategy:l,ruleHierarchy:c}=e;if(a&&t.specialCauseImprovementValue!==null&&t.specialCauseConcernValue!==null){const d=!!t.trendUp,f=!!t.trendDown;if(n===Fe.Up){if(d&&!f){t.specialCauseConcernValue=null;return}if(!d&&f){t.specialCauseImprovementValue=null;return}}else if(n===Fe.Down){if(f&&!d){t.specialCauseConcernValue=null;return}if(!f&&d){t.specialCauseImprovementValue=null;return}}}const u=i?Hr.PreferImprovement:l??Hr.SqlPrimeThenRule;if(u===Hr.PreferImprovement){n===Fe.Up?t.specialCauseConcernValue=null:n===Fe.Down&&(t.specialCauseImprovementValue=null);return}if(u===Hr.RuleHierarchy){const d=c??[Ze.Trend,Ze.Shift,Ze.TwoSigma,Ze.SinglePoint],{up:f,dn:m}=Nf(t);for(const g of d){const y=f.some(p=>p.id===g),h=m.some(p=>p.id===g);if(y&&!h){n===Fe.Up?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null;return}if(h&&!y){n===Fe.Up?t.specialCauseImprovementValue=null:t.specialCauseConcernValue=null;return}if(y&&h){(n===Fe.Up||n===Fe.Down)&&(r===Or.Improvement?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null);return}}}s===hr.Upwards?n===Fe.Up?t.specialCauseConcernValue=null:n===Fe.Down&&(t.specialCauseImprovementValue=null):s===hr.Downwards?n===Fe.Up?t.specialCauseImprovementValue=null:n===Fe.Down&&(t.specialCauseConcernValue=null):r===Or.Improvement?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null}var Ko=(e=>(e.Up="Up",e.Down="Down",e))(Ko||{});function m1(e){return e>0?1:e<0?-1:0}function p1(e){const t=m1(e);if(t>0)return"Above";if(t<0)return"Below"}function Mf(e){const t=[],n=(s,l,c)=>({segStart:s,segSide:l,minV:c,maxV:c,maxAbsDelta:0}),r=(s,l,c,u,d)=>({minV:Math.min(c,s),maxV:Math.max(u,s),maxAbsDelta:Math.max(d,l)}),i=(s,l,c,u,d,f,m,g)=>{s.push({trendDirection:g,start:l,end:c,side:u,minValue:d,maxValue:f,maxAbsDeltaFromMean:m})};let a=0;for(;a<e.length;){const s=e[a];if(!s||s.value==null||s.ghost||!s.trendUp&&!s.trendDown){a++;continue}const l=s.trendUp?"Up":s.trendDown?"Down":void 0;let c=a,u=a;for(;u<e.length;u++){const b=e[u];if(!b||b.value==null||b.ghost||!(l==="Up"?b.trendUp:b.trendDown))break}const d=u-1,f=[];let m,g,y=1/0,h=-1/0,p=0;for(let b=c;b<=d;b++){const w=e[b];if(w.value==null)continue;const D=w.value-(w.mean??0),S=p1(D);if(!S){m!==void 0&&(i(f,m,b-1,g,y,h,p,l),m=void 0,g=void 0,y=1/0,h=-1/0,p=0);continue}if(m===void 0)({segStart:m,segSide:g,minV:y,maxV:h,maxAbsDelta:p}=(()=>{const v=n(b,S,w.value);return{segStart:v.segStart,segSide:v.segSide,minV:v.minV,maxV:v.maxV,maxAbsDelta:Math.abs(D)}})());else if(S!==g)i(f,m,b-1,g,y,h,p,l),{segStart:m,segSide:g,minV:y,maxV:h,maxAbsDelta:p}=(()=>{const v=n(b,S,w.value);return{segStart:v.segStart,segSide:v.segSide,minV:v.minV,maxV:v.maxV,maxAbsDelta:Math.abs(D)}})();else{const v=r(w.value,Math.abs(D),y,h,p);y=v.minV,h=v.maxV,p=v.maxAbsDelta}}m!==void 0&&i(f,m,d,g,y,h,p,l),t.push({trendDirection:l,start:c,end:d,segments:f}),a=d+1}return t}function g1(e){if(e===Fe.Up)return"Above";if(e===Fe.Down)return"Below"}function b1(e){if(e)return e==="Above"?"Below":"Above"}function Pf(e,t){const n=t.strategy??wt.CrossingAfterFavourable,r=g1(t.metricImprovement),i=b1(r),a=[];for(const s of e){if(!r){if(n===wt.ExtremeFavourable||n===wt.CrossingAfterFavourable){const l=s.segments;if(l.length===0)continue;let c=l[0];for(const u of l)u.maxAbsDeltaFromMean>c.maxAbsDeltaFromMean&&(c=u);a.push(c)}continue}if(n===wt.FavourableSide){a.push(...s.segments.filter(l=>l.side===r));continue}if(n===wt.UnfavourableSide){a.push(...s.segments.filter(l=>l.side===i));continue}if(n===wt.CrossingAfterFavourable){const l=s.segments;let c;for(let u=0;u<l.length;u++){const d=l[u];if(d.side===r&&u>0&&l[u-1].side!==r){c=d;break}}if(!c){const u=l.filter(d=>d.side===r);u.length>0&&(c=u.reduce((d,f)=>f.end-f.start>d.end-d.start?f:d,u[0]))}c&&a.push(c);continue}if(n===wt.CrossingAfterUnfavourable){const l=s.segments;let c;for(let u=0;u<l.length;u++){const d=l[u];if(d.side===i&&u>0&&l[u-1].side!==i){c=d;break}}if(!c){const u=l.filter(d=>d.side===i);u.length>0&&(c=u.reduce((d,f)=>f.end-f.start>d.end-d.start?f:d,u[0]))}c&&a.push(c);continue}if(n===wt.ExtremeFavourable){const l=s.segments.filter(u=>u.side===r);if(l.length===0)continue;const c=l.reduce((u,d)=>d.maxAbsDeltaFromMean>u.maxAbsDeltaFromMean?d:u);a.push(c);continue}if(n===wt.ExtremeUnfavourable){const l=s.segments.filter(u=>u.side===i);if(l.length===0)continue;const c=l.reduce((u,d)=>d.maxAbsDeltaFromMean>u.maxAbsDeltaFromMean?d:u);a.push(c);continue}if(n===wt.FirstFavourable){const l=s.segments.find(c=>c.side===r);l&&a.push(l);continue}if(n===wt.FirstUnfavourable){const l=s.segments.find(c=>c.side===i);l&&a.push(l);continue}if(n===wt.LongestFavourable){const l=s.segments.filter(u=>u.side===r);if(l.length===0)continue;const c=l.reduce((u,d)=>d.end-d.start>u.end-u.start?d:u);a.push(c);continue}if(n===wt.LongestUnfavourable){const l=s.segments.filter(u=>u.side===i);if(l.length===0)continue;const c=l.reduce((u,d)=>d.end-d.start>u.end-u.start?d:u);a.push(c);continue}if(n===wt.LastFavourable){const l=s.segments.filter(c=>c.side===r);if(l.length===0)continue;a.push(l[l.length-1]);continue}if(n===wt.LastUnfavourable){const l=s.segments.filter(c=>c.side===i);if(l.length===0)continue;a.push(l[l.length-1]);continue}}return a}var _t=(e=>(e.Common="Common",e.Improvement="Improvement",e.Concern="Concern",e.NoJudgement="NoJudgement",e))(_t||{}),Ur=(e=>(e.Ungated="Ungated",e.Gated="Gated",e))(Ur||{});function y1(e){const t=!!(e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp),n=!!(e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown);return{upAny:t,downAny:n}}function Jo(e,t){const n=t.metricImprovement,r=t.trendVisualMode??"Ungated",i=t.enableNeutralNoJudgement??!0;return e.map(a=>{if(!a||a.value==null||a.ghost)return"Common";const{upAny:s,downAny:l}=y1(a);if(s&&l)return"Improvement";switch(a.variationIcon){case Ee.ImprovementHigh:case Ee.ImprovementLow:return"Improvement";case Ee.ConcernHigh:case Ee.ConcernLow:return"Concern";case Ee.NeitherHigh:case Ee.NeitherLow:{if(r==="Ungated"&&n!==Fe.Neither){if(s&&!l)return n===Fe.Up?"Improvement":"Concern";if(l&&!s)return n===Fe.Down?"Improvement":"Concern"}return i?"NoJudgement":"Common"}default:return"Common"}})}function v1(e,t,n){const r=n?.mode??"Disabled";if(!e.length)return[];let i=Jo(e,{metricImprovement:t,trendVisualMode:Ur.Ungated,enableNeutralNoJudgement:!0});if(r!=="RecalcCrossing"||t===Fe.Neither)return i;const a=Math.max(0,n?.preWindow??2),s=Math.max(0,n?.postWindow??3),l=n?.prePolarity??"Opposite",c=(f,m)=>{if(f<0||f>=i.length)return;const g=i[f];(g===_t.Common||g===_t.NoJudgement)&&(i[f]=m)},u=f=>{if(f==null)return null;const m=e.reduce((y,h)=>(h.partitionId===f&&typeof h.value=="number"&&!h.ghost&&y.push(h.value),y),[]);return m.length?m.reduce((y,h)=>y+h,0)/m.length:null},d=Array.isArray(n?.boundaryIndices)&&n.boundaryIndices.length?n.boundaryIndices.slice().filter(f=>Number.isFinite(f)):e.reduce((f,m,g)=>{if(g===0)return f;const y=e[g-1];return y&&m&&m.partitionId!==y.partitionId&&f.push(g),f},[]);for(const f of d){const m=e[f-1],g=e[f];if(!m||!g)continue;let y=f-1;for(;y-1>=0&&e[y-1]&&e[y-1].partitionId===m.partitionId;)y--;let h=f;for(;h+1<e.length&&e[h+1]&&e[h+1].partitionId===g.partitionId;)h++;let p=null;for(let T=f-1;T>=0;T--){const k=e[T];if(k.partitionId!==m.partitionId)break;if(typeof k.mean=="number"){p=k.mean;break}}let b=null;for(let T=f;T<e.length;T++){const k=e[T];if(k.partitionId!==g.partitionId)break;if(typeof k.mean=="number"){b=k.mean;break}}if(p==null&&(p=u(m.partitionId??null)),b==null&&(b=u(g.partitionId??null)),p==null||b==null)continue;const w=b-p,D=t===Fe.Up?w>0:w<0,S=D?_t.Improvement:_t.Concern,v=l==="Same"?S:D?_t.Concern:_t.Improvement;for(let T=1;T<=a;T++){const k=f-T;if(k<y)break;c(k,v)}for(let T=0;T<s;T++){const k=f+T;if(k>h)break;c(k,S)}}return i}function If(e){if(!e)return{};if(typeof e=="object"&&("minimumPoints"in e||"shiftPoints"in e||"trendPoints"in e))return e;const t=e,n={};if(t.thresholds){const r=t.thresholds;r.minimumPoints!=null&&(n.minimumPoints=r.minimumPoints),r.shiftPoints!=null&&(n.shiftPoints=r.shiftPoints),r.trendPoints!=null&&(n.trendPoints=r.trendPoints),r.excludeMovingRangeOutliers!=null&&(n.excludeMovingRangeOutliers=r.excludeMovingRangeOutliers)}if(t.eligibility&&t.eligibility.chartLevel!=null&&(n.chartLevelEligibility=t.eligibility.chartLevel),t.parity&&(t.parity.trendAcrossPartitions!=null&&(n.trendAcrossPartitions=t.parity.trendAcrossPartitions),t.parity.twoSigmaIncludeAboveThree!=null&&(n.twoSigmaIncludeAboveThree=t.parity.twoSigmaIncludeAboveThree),t.parity.enableFourOfFiveRule!=null&&(n.enableFourOfFiveRule=t.parity.enableFourOfFiveRule)),t.conflict&&(t.conflict.preferImprovementWhenConflict!=null&&(n.preferImprovementWhenConflict=t.conflict.preferImprovementWhenConflict),t.conflict.preferTrendWhenConflict!=null&&(n.preferTrendWhenConflict=t.conflict.preferTrendWhenConflict),t.conflict.strategy!=null&&(n.conflictStrategy=t.conflict.strategy),t.conflict.ruleHierarchy!=null&&(n.ruleHierarchy=t.conflict.ruleHierarchy),t.conflict.metricRuleOnTie!=null&&(n.metricConflictRule=t.conflict.metricRuleOnTie)),t.trend?.segmentation){const r=t.trend.segmentation;r.mode!=null&&(n.trendSegmentationMode=r.mode),r.favourableSegmentation!=null&&(n.trendFavourableSegmentation=r.favourableSegmentation),r.strategy!=null&&(n.trendSegmentationStrategy=r.strategy),r.dominatesHighlightedWindow!=null&&(n.trendDominatesHighlightedWindow=r.dominatesHighlightedWindow)}return n}function Qo(e){const{chartType:t,metricImprovement:n,data:r}=e,i=If(e.settings),a={minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:Or.Improvement,trendAcrossPartitions:!1,twoSigmaIncludeAboveThree:!1,enableFourOfFiveRule:!1,preferImprovementWhenConflict:!1,conflictStrategy:Hr.SqlPrimeThenRule,ruleHierarchy:void 0,chartLevelEligibility:!1,trendFavourableSegmentation:!1,trendSegmentationMode:En.Off,trendSegmentationStrategy:wt.CrossingAfterUnfavourable,trendDominatesHighlightedWindow:!1,...i},s=i?.trendSegmentationMode||(i?.trendFavourableSegmentation===!0?En.Always:i?.trendFavourableSegmentation===!1?En.Off:a.trendSegmentationMode),l=r.map((h,p)=>({rowId:p+1,x:h.x,value:De(h.value)?h.value:null,ghost:!!h.ghost,baseline:!!h.baseline,target:De(h.target)?h.target:null})),c=[];let u=[];for(const h of l)h.baseline&&u.length&&(c.push(u),u=[]),u.push(h);u.length&&c.push(u);const d=[],f=(a.trendFavourableSegmentation||s!==En.Off)&&!a.preferImprovementWhenConflict,m=l.filter(h=>!h.ghost&&De(h.value)).length,g=!!a.chartLevelEligibility&&m>=a.minimumPoints;let y=0;for(const h of c){y++;const p=h.map(v=>v.value),b=h.map(v=>v.ghost),w=d1(t,p,b,!!a.excludeMovingRangeOutliers),D=h.map((v,T)=>{const k=!v.ghost&&De(v.value)?p.slice(0,T+1).filter((x,I)=>!b[I]&&De(x)).length:0,C=g?!0:k>=a.minimumPoints;return{rowId:v.rowId,x:v.x,value:De(v.value)?v.value:null,ghost:v.ghost,partitionId:y,pointRank:k,mean:(C||g)&&De(w.mean)?w.mean:null,upperProcessLimit:C||g?w.upperProcessLimit:null,lowerProcessLimit:C||g?w.lowerProcessLimit:null,upperTwoSigma:C||g?w.upperTwoSigma:null,lowerTwoSigma:C||g?w.lowerTwoSigma:null,upperOneSigma:C||g?w.upperOneSigma:null,lowerOneSigma:C||g?w.lowerOneSigma:null,singlePointUp:!1,singlePointDown:!1,twoSigmaUp:!1,twoSigmaDown:!1,fourOfFiveUp:!1,fourOfFiveDown:!1,shiftUp:!1,shiftDown:!1,trendUp:!1,trendDown:!1,specialCauseImprovementValue:null,specialCauseConcernValue:null,variationIcon:Ee.CommonCause}});for(const v of D)v.ghost||!De(v.value)||v.mean===null||(De(v.upperProcessLimit)&&v.value>v.upperProcessLimit&&(v.singlePointUp=!0),De(v.lowerProcessLimit)&&v.value<v.lowerProcessLimit&&(v.singlePointDown=!0));f1(D,{shiftPoints:a.shiftPoints,trendPoints:a.trendPoints,twoSigmaIncludeAboveThree:!!a.twoSigmaIncludeAboveThree,enableFourOfFiveRule:!!a.enableFourOfFiveRule}),f&&(v=>{const T=v.some(M=>(M.singlePointUp||M.twoSigmaUp||M.shiftUp||M.trendUp)&&(M.singlePointDown||M.twoSigmaDown||M.shiftDown||M.trendDown));if(s===En.Off||s===En.AutoWhenConflict&&!T)return;const k=Mf(v),C=Pf(k,{metricImprovement:n,strategy:a.trendSegmentationStrategy}),x=new Set,I=new Set;for(const M of C)for(let j=M.start;j<=M.end;j++)M.trendDirection===Ko.Up?x.add(j):I.add(j);v.forEach((M,j)=>{M.trendUp=x.has(j)?M.trendUp:!1,M.trendDown=I.has(j)?M.trendDown:!1,a.trendDominatesHighlightedWindow&&(x.has(j)?(M.singlePointDown=!1,M.twoSigmaDown=!1,M.shiftDown=!1):I.has(j)&&(M.singlePointUp=!1,M.twoSigmaUp=!1,M.shiftUp=!1))})})(D);for(const v of D){if(v.ghost||!De(v.value)||v.mean===null){d.push(v);continue}const{aligned:T,opposite:k}=jf(v,n);if(v.specialCauseImprovementValue=T?v.value:null,v.specialCauseConcernValue=k?v.value:null,n===Fe.Neither){const C=v.singlePointUp||v.twoSigmaUp||v.shiftUp||v.trendUp,x=v.singlePointDown||v.twoSigmaDown||v.shiftDown||v.trendDown;v.variationIcon=C?Ee.NeitherHigh:x?Ee.NeitherLow:Ee.CommonCause}else Df(v,n,a.metricConflictRule,a.preferImprovementWhenConflict===!0,a.conflictStrategy,a.ruleHierarchy,a.preferTrendWhenConflict===!0);d.push(v)}}if(a.trendAcrossPartitions){const h=d.map((p,b)=>({idx:b,r:p})).filter(({r:p})=>!p.ghost&&De(p.value));if(h.length>=a.trendPoints)for(let p=0;p<=h.length-a.trendPoints;p++){const b=h.slice(p,p+a.trendPoints).map(v=>v.idx),w=b.map(v=>d[v]);if(!w.every(v=>De(v.value)))continue;let D=!0,S=!0;for(let v=1;v<w.length&&(w[v].value>w[v-1].value||(D=!1),w[v].value<w[v-1].value||(S=!1),!(!D&&!S));v++);D&&b.forEach(v=>d[v].trendUp=!0),S&&b.forEach(v=>d[v].trendDown=!0)}}if(a.trendAcrossPartitions){if(f){const h=d.some(p=>(p.singlePointUp||p.twoSigmaUp||p.shiftUp||p.trendUp)&&(p.singlePointDown||p.twoSigmaDown||p.shiftDown||p.trendDown));if(s===En.Always||s===En.AutoWhenConflict&&h){const p=Mf(d),b=Pf(p,{metricImprovement:n,strategy:a.trendSegmentationStrategy}),w=new Set,D=new Set;for(const S of b)for(let v=S.start;v<=S.end;v++)S.trendDirection===Ko.Up?w.add(v):D.add(v);d.forEach((S,v)=>{S.trendUp=w.has(v)?S.trendUp:!1,S.trendDown=D.has(v)?S.trendDown:!1,a.trendDominatesHighlightedWindow&&(w.has(v)?(S.singlePointDown=!1,S.twoSigmaDown=!1,S.shiftDown=!1):D.has(v)&&(S.singlePointUp=!1,S.twoSigmaUp=!1,S.shiftUp=!1))})}}for(const h of d){if(h.ghost||!De(h.value)||h.mean===null||n===Fe.Neither)continue;const{aligned:p,opposite:b}=jf(h,n);h.specialCauseImprovementValue=p?h.value:null,h.specialCauseConcernValue=b?h.value:null,Df(h,n,a.metricConflictRule,a.preferImprovementWhenConflict===!0,a.conflictStrategy,a.ruleHierarchy,a.preferTrendWhenConflict===!0)}}return{rows:d}}function el(e,t){const n=Qo(e),r=Jo(n.rows,{metricImprovement:e.metricImprovement,trendVisualMode:t?.trendVisualMode??Ur.Ungated,enableNeutralNoJudgement:t?.enableNeutralNoJudgement??!0}),i=t?.boundaryWindows;if(!i||i.mode!=="RecalcCrossing")return{rows:n.rows,visuals:r};const a=i.directionOverride??e.metricImprovement,s=v1(n.rows,a,i),l=r.map((c,u)=>{const d=s[u];if(c===_t.Common||c===_t.NoJudgement){if(d===_t.Improvement)return _t.Improvement;if(d===_t.Concern)return _t.Concern}return c});return{rows:n.rows,visuals:l}}var Ff=(e=>(e.None="none",e.RecalcCrossingShift="recalc-crossing-shift",e.RecalcCrossingTrend="recalc-crossing-trend",e.RecalcCrossingTwoSigma="recalc-crossing-two-sigma",e.RecalculationsRecalculated="recalculations-recalculated",e.BaselinesRecalculated="baselines-recalculated",e))(Ff||{});function _1(e,t,n){const r=n?.trendVisualMode??Ur.Ungated,i=n?.enableNeutralNoJudgement??!0,a=Array.isArray(e.data)?e.data.map((f,m)=>f?.baseline?m:-1).filter(f=>f>=0):[];let s;switch(t){case"recalc-crossing-shift":{s={mode:"RecalcCrossing",preWindow:2,postWindow:4,prePolarity:"Same",boundaryIndices:a};break}case"recalc-crossing-trend":{s={mode:"RecalcCrossing",preWindow:1,postWindow:5,prePolarity:"Same",boundaryIndices:a};break}case"recalc-crossing-two-sigma":{s={mode:"RecalcCrossing",preWindow:1,postWindow:1,prePolarity:"Same",boundaryIndices:a};break}case"baselines-recalculated":s={mode:"RecalcCrossing",preWindow:0,postWindow:0,prePolarity:"Same",directionOverride:e.metricImprovement,boundaryIndices:a};break;case"recalculations-recalculated":case"none":default:s=void 0}const{rows:l,visuals:c}=el(e,{trendVisualMode:r,enableNeutralNoJudgement:i,boundaryWindows:s});let u=c.slice(),d=a.length?a[0]:-1;if(d<0){for(let f=1;f<l.length;f++)if(l[f].partitionId!==l[f-1].partitionId){d=f;break}}return(t==="recalculations-recalculated"||t==="baselines-recalculated")&&d>0&&(u[d-1]=_t.Common),{rows:l,visuals:u}}const $f=Object.freeze({minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:Or.Improvement,trendAcrossPartitions:!0,twoSigmaIncludeAboveThree:!0,chartLevelEligibility:!0});function x1(e){return{...$f,...e??{}}}var pt=(e=>(e.Concern="concern",e.Improvement="improvement",e.NoJudgement="noJudgement",e.Common="common",e))(pt||{}),mr=(e=>(e.Classic="classic",e.Triangle="triangle",e.TriangleWithRun="triangleWithRun",e))(mr||{}),tl=(e=>(e.Direction="direction",e.Polarity="polarity",e))(tl||{});const Lf=e=>{const t=()=>{globalThis.__spcIconDeprecationEmitted||(console.warn("[SPCVariationIcon] Deprecated payload shape detected. Migrate to { variationIcon, improvementDirection, specialCauseNeutral?, trend? }."),globalThis.__spcIconDeprecationEmitted=!0)};if(e.variationIcon!==void 0){const s=e;let l;s.improvementDirection!==void 0?l=s.improvementDirection===Fe.Up?ft.HigherIsBetter:s.improvementDirection===Fe.Down?ft.LowerIsBetter:ft.ContextDependent:s.polarity&&(l=s.polarity);let c;const u=s.variationIcon;if(u===je.Improvement||u===je.Concern||u===je.Neither||u===je.Suppressed)u===je.Improvement?c=Ce.SpecialCauseImproving:u===je.Concern?c=Ce.SpecialCauseDeteriorating:u===je.Neither?c=Ce.CommonCause:c=Ce.SpecialCauseNoJudgement;else switch(s.variationIcon){case Ee.ImprovementHigh:case Ee.ImprovementLow:c=Ce.SpecialCauseImproving;break;case Ee.ConcernHigh:case Ee.ConcernLow:c=Ce.SpecialCauseDeteriorating;break;case Ee.NeitherHigh:case Ee.NeitherLow:c=s.specialCauseNeutral?Ce.SpecialCauseNoJudgement:Ce.CommonCause;break;case Ee.CommonCause:c=Ce.CommonCause;break;default:c=Ce.SpecialCauseNoJudgement;break}let d=s.trend;return d||(c===Ce.SpecialCauseImproving?d=l===ft.LowerIsBetter?Me.Lower:Me.Higher:c===Ce.SpecialCauseDeteriorating?d=l===ft.LowerIsBetter?Me.Higher:Me.Lower:c===Ce.SpecialCauseNoJudgement?s.highSideSignal&&!s.lowSideSignal?d=Me.Higher:s.lowSideSignal&&!s.highSideSignal?d=Me.Lower:d=Me.Higher:d=Me.Higher),{state:c,direction:d,polarity:l??ft.ContextDependent}}if(e.state!==void 0){t();const s=e;let l=s.trend;return!l&&(s.state===Ce.SpecialCauseImproving||s.state===Ce.SpecialCauseDeteriorating)&&s.polarity&&(s.state===Ce.SpecialCauseImproving?l=s.polarity===ft.LowerIsBetter?Me.Lower:Me.Higher:l=s.polarity===ft.LowerIsBetter?Me.Higher:Me.Lower),l||(s.state===Ce.SpecialCauseImproving?l=Me.Higher:s.state===Ce.SpecialCauseDeteriorating?l=Me.Lower:l=Me.Higher),{state:s.state,direction:l,polarity:s.polarity??ft.ContextDependent}}const n=e;t();const i={[Lt.Improving]:Ce.SpecialCauseImproving,[Lt.Deteriorating]:Ce.SpecialCauseDeteriorating,[Lt.No_Judgement]:Ce.SpecialCauseNoJudgement,[Lt.None]:Ce.CommonCause}[n.judgement];let a;return n.judgement===Lt.Improving?a=n.polarity===ft.LowerIsBetter?Me.Lower:Me.Higher:n.judgement===Lt.Deteriorating?a=n.polarity===ft.LowerIsBetter?Me.Higher:Me.Lower:a=n.trend??Me.Higher,{state:i,direction:a,polarity:n.polarity}};function Af(e,t){const{state:n,direction:r,polarity:i}=Lf(e),a=Zo(n),s=r===Me.Higher?"above":"below",l=r===Me.Higher?"upwards":"downwards",c=(()=>{switch(i){case ft.HigherIsBetter:return"For this measure, higher values are better.";case ft.LowerIsBetter:return"For this measure, lower values are better.";default:return"Direction of improvement is context dependent."}})();return[(()=>{switch(a){case Lt.Improving:return`Special cause improvement: recent data show a sustained run ${s} the mean (unlikely due to random variation).`;case Lt.Deteriorating:return`Special cause deterioration: recent data show a sustained run ${s} the mean (unlikely due to random variation).`;case Lt.No_Judgement:return`Special cause detected (no value judgement): recent data show a change in level, trending ${l}.`;case Lt.None:default:return"Common cause variation: points vary randomly around the mean; no special cause detected."}})(),c,null,null,null,null,null].filter(Boolean).join(" ")}const nl=(e,t,n,r,i,a)=>o.jsxs("defs",{children:[r&&o.jsxs("filter",{id:t,filterUnits:"objectBoundingBox",children:[o.jsx("feGaussianBlur",{stdDeviation:"3"}),o.jsx("feOffset",{dx:"0",dy:"15",result:"blur"}),o.jsx("feFlood",{floodColor:"rgb(150,150,150)",floodOpacity:"1"}),o.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),i&&o.jsx("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:a.map(s=>o.jsx("stop",{offset:s.offset,stopColor:e,stopOpacity:parseFloat(s.opacity)},s.offset))})]}),rl=({data:e,size:t=44,ariaLabel:n,showLetter:r=!0,dropShadow:i=!0,gradientWash:a=!1,variant:s=mr.Classic,runLength:l=0,letterMode:c=tl.Polarity,letterOverride:u,...d})=>{const f=E.useId(),m=E.useId(),{start:g,mid:y,end:h,triStart:p,triMid:b,triEnd:w}=Za(),{state:D,direction:S,polarity:v}=E.useMemo(()=>Lf(e),[e]),T=E.useMemo(()=>_f(D),[D]),k=E.useMemo(()=>Zo(D),[D]),C=k===Lt.Improving||k===Lt.Deteriorating;let x="";r&&C&&(c===tl.Polarity?v===ft.HigherIsBetter?x="H":v===ft.LowerIsBetter?x="L":x="":x=S===Me.Higher?"H":"L"),u!==void 0&&(x=u);const I=D!==Ce.CommonCause,M=D===Ce.SpecialCauseNoJudgement,j=Ve("common-cause","#A6A6A6"),L=I?T.hex:j,N=E.useMemo(()=>c1(D,S),[D,S]),F=n||`${T.label}${x?S===Me.Higher?" â€“ Higher":" â€“ Lower":""}`,P=Af(e);if(s===mr.TriangleWithRun){const H=[[150,90],[100,190],[200,190]],z=[[150,140+100/2],[150-100/2,140-100/2],[150+100/2,140-100/2]];let re=null;D===Ce.SpecialCauseImproving||D===Ce.SpecialCauseDeteriorating?re=o.jsx("polygon",{points:(S===Me.Higher?H:z).map(he=>he.join(",")).join(" "),fill:T.hex,stroke:T.hex,strokeWidth:6,transform:S===Me.Higher?"translate(0, -8)":"translate(0, 15)"}):D===Ce.SpecialCauseNoJudgement&&(re=o.jsx("polygon",{points:S===Me.Higher?H.map(he=>he.join(",")).join(" "):z.map(he=>he.join(",")).join(" "),fill:T.hex,stroke:T.hex,strokeWidth:6,transform:S===Me.Higher?"translate(0,-7)":"translate(0,14)"}));const U=Math.max(0,Math.min(5,Math.floor(l||0))),de=D===Ce.CommonCause?160:S===Me.Higher?220:70,ye=10,ue=26,ce=150-2*ue,Q=D===Ce.SpecialCauseImproving?Ve("improvement","#00B0F0"):D===Ce.SpecialCauseDeteriorating?Ve("concern","#E46C0A"):j,ie=Array.from({length:5}).map((he,oe)=>{const R=(D===Ce.SpecialCauseImproving||D===Ce.SpecialCauseDeteriorating)&&oe>=5-U?Q:j;return o.jsx("circle",{cx:ce+oe*ue,cy:de,r:ye,fill:R,stroke:R,strokeWidth:1},oe)}),fe=nl(T.hex,f,m,i,a,[{offset:"0%",opacity:p},{offset:"75%",opacity:b},{offset:"100%",opacity:w}]),Y=D===Ce.CommonCause||S===Me.Higher?"translate(0,-10)":"translate(0,25)";return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":F,"aria-description":P,...d,children:[fe,o.jsx("circle",{stroke:"none",fill:a?`url(#${m})`:"#ffffff",...i?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:T.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),o.jsxs("g",{transform:Y,children:[re,x&&o.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:64,x:"150",y:S===Me.Higher?155:145,textAnchor:"middle",dominantBaseline:"middle",children:x}),ie]})]})}if(s===mr.Triangle){const H=[[150,75],[75,225],[225,225]],z=[[150,150+150/2],[150-150/2,150-150/2],[150+150/2,150-150/2]],re=[[150-150/2,150+150/2],[150+150/2,150+150/2]];let U=null;D===Ce.SpecialCauseImproving||D===Ce.SpecialCauseDeteriorating?U=o.jsx("polygon",{points:(S===Me.Higher?H:z).map(ye=>ye.join(",")).join(" "),fill:T.hex,stroke:T.hex,strokeWidth:8,transform:S===Me.Higher?"translate(0, -10)":"translate(0, 10)"}):D===Ce.SpecialCauseNoJudgement?U=o.jsx("polygon",{points:S===Me.Higher?H.map(ye=>ye.join(",")).join(" "):z.map(ye=>ye.join(",")).join(" "),fill:T.hex,stroke:T.hex,strokeWidth:8,transform:S===Me.Higher?"translate(0, -15)":"translate(0, 15)"}):D===Ce.CommonCause&&(U=o.jsx("line",{x1:re[0][0],y1:re[0][1],x2:re[1][0],y2:re[1][1],stroke:T.hex,strokeWidth:32,strokeLinecap:"square",transform:"translate(0, -75)"}));const de=nl(T.hex,f,m,i,a,[{offset:"0%",opacity:p},{offset:"65%",opacity:b},{offset:"100%",opacity:w}]);return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":F,"aria-description":P,...d,children:[de,o.jsx("circle",{stroke:"none",fill:a?`url(#${m})`:"#ffffff",...i?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:T.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),U,x&&(D===Ce.SpecialCauseImproving||D===Ce.SpecialCauseDeteriorating)&&o.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:100,x:"150",y:S===Me.Higher?"170":"140",textAnchor:"middle",dominantBaseline:"middle",children:x})]})}const $=nl(T.hex,f,m,i,a,[{offset:"0%",opacity:g},{offset:"65%",opacity:y},{offset:"100%",opacity:h}]);return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":F,"aria-description":P,...d,children:[$,o.jsx("circle",{stroke:"none",fill:a?`url(#${m})`:"#ffffff",...i?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:T.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),x&&o.jsx("text",{fill:T.hex,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,transform:"translate(86.67, 54) scale(0.5, 0.5)",textAnchor:"end",children:o.jsx("tspan",{x:"120",y:S===Me.Lower?"340":"155",children:x})}),M?o.jsx("path",{"aria-hidden":"true",fillRule:"evenodd",stroke:"none",fill:T.hex,...S===Me.Lower?{transform:"rotate(90 150 150)"}:{transform:"translate(-5 0) rotate(0 150 150)"},d:"M 90.26,185.42 L 149.31,126.37 127.44,104.51 209.81,90.66 195.96,173.02 174.09,151.16 115.05,210.2 90.26,185.42 Z M 90.26,185.42"}):o.jsxs(o.Fragment,{children:[N.length===5&&o.jsx("path",{"aria-hidden":"true",fill:"none",stroke:j,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9,d:`M ${N.map(ne=>`${ne.cx} ${ne.cy}`).join(" L ")}`}),N.map((ne,X)=>{const H=X>=N.length-2&&I?L:j,z=H;return o.jsx("circle",{stroke:z,strokeWidth:2,strokeMiterlimit:10,fill:H,cx:ne.cx,cy:ne.cy,r:16},X)})]})]})};rl.displayName="SPCVariationIcon";const w1={xs:{height:24,pointR:2,stroke:1},sm:{height:32,pointR:3,stroke:1},md:{height:44,pointR:4,stroke:1}};function S1(e,t){return!t||e.length<=t?e:e.slice(e.length-t)}function C1(e){const t=e.filter(s=>typeof s.value=="number");if(!t.length)return{mean:null,latestValue:null,latestIndex:null};const n=t.reduce((s,l)=>s+l.value,0)/t.length,r=[...e].reverse().findIndex(s=>s.value!=null),i=r>=0?e.length-1-r:null,a=i!=null?e[i].value:null;return{mean:n,latestValue:a,latestIndex:i}}function k1(e){switch(e){case Ce.SpecialCauseImproving:return Ve("improvement","#00B0F0");case Ce.SpecialCauseDeteriorating:return Ve("concern","#E46C0A");case Ce.SpecialCauseNoJudgement:return Ve("no-judgement","#490092");case Ce.CommonCause:return Ve("common-cause","#A6A6A6");default:return Ve("common-cause","#A6A6A6")}}const Ef=({data:e,windowSize:t,minPointsForSignals:n=13,showMean:r=!0,showLimits:i=!0,showLimitBand:a=!0,showInnerBands:s=!1,showLatestMarker:l=!0,showStateGlyph:c=!0,variationState:u,autoClassify:d=!1,metricImprovement:f,gradientWash:m=!1,size:g="sm",ariaLabel:y,className:h,onPointClick:p,onClassification:b,maxPoints:w,thinningStrategy:D="stride",colorPointsBySignal:S=!0,centerLine:v,controlLimits:T,sigmaBands:k,pointSignals:C,pointNeutralSpecialCause:x})=>{const I=f,M=E.useMemo(()=>S1(e,t),[e,t]),j=E.useMemo(()=>C1(M),[M]),L=w1[g],N=Math.max(M.length*6,60),F=L.height,P=4,$=2,ne=E.useMemo(()=>(e?.length??0)-(M?.length??0),[e?.length,M?.length]),O=M.filter(B=>B.value!=null).map(B=>B.value),H=v??j.mean,z=E.useMemo(()=>{if(H==null)return null;const B=[];if(k?.upperOne!=null&&B.push(Math.abs(k.upperOne-H)),k?.lowerOne!=null&&B.push(Math.abs(H-k.lowerOne)),B.length)return B.reduce((ee,G)=>ee+G,0)/B.length;const W=[];return T?.upper!=null&&W.push(Math.abs(T.upper-H)/3),T?.lower!=null&&W.push(Math.abs(H-T.lower)/3),W.length?W.reduce((ee,G)=>ee+G,0)/W.length:null},[k?.upperOne,k?.lowerOne,T?.upper,T?.lower,H]),re=E.useMemo(()=>{if(z!=null||!O.length||H==null||O.length<2)return null;const B=[];for(let ee=1;ee<O.length;ee++){const G=O[ee-1],A=O[ee];G!=null&&A!=null&&B.push(Math.abs(A-G))}return B.length?B.reduce((ee,G)=>ee+G,0)/B.length/1.128:null},[z,O.join(","),H]),U=z??re,de=E.useMemo(()=>{if(!i)return null;if(T)return T;if(H==null||U==null)return null;const B=3*U;return{lower:H-B,upper:H+B}},[i,H,U,T?.lower,T?.upper]),ye=E.useMemo(()=>{if(u)return{state:u,firedRules:[],mean:j.mean,stdDev:U};if(!d||!U||U===0||H==null||j.latestValue==null)return{state:Ce.CommonCause,firedRules:[],mean:j.mean,stdDev:U};const B=[],W=j.latestValue,ee=T?.upper??(U!=null&&H!=null?H+3*U:null),G=T?.lower??(U!=null&&H!=null?H-3*U:null);ee!=null&&G!=null&&(W>ee||W<G)&&B.push("point-beyond-3sigma");const A=O.slice(-8);if(A.length===8){const K=A.every(be=>be>H),se=A.every(be=>be<H);(K||se)&&B.push("eight-point-run")}const q=O.slice(-5);if(q.length===5){const K=q.every((Se,Te,pe)=>Te===0||Se>=pe[Te-1]),se=q.every((Se,Te,pe)=>Te===0||Se<=pe[Te-1]),be=k?.upperOne??(U!=null&&H!=null?H+U:null),_e=k?.lowerOne??(U!=null&&H!=null?H-U:null);K&&be!=null&&q[q.length-1]>be&&B.push("five-point-trend"),se&&_e!=null&&q[q.length-1]<_e&&B.push("five-point-trend")}const J=O.slice(-3);if(J.length===3&&(U!=null||k)){const K=k?.upperTwo??(H!=null&&U!=null?H+2*U:null),se=k?.lowerTwo??(H!=null&&U!=null?H-2*U:null);if(K!=null&&se!=null){const be=J.filter(Se=>Se>K).length,_e=J.filter(Se=>Se<se).length;be>=2&&B.push("two-of-three-near-limit"),_e>=2&&B.push("two-of-three-near-limit")}}let te=Ce.CommonCause;if(B.includes("point-beyond-3sigma")?te=W>H?Ce.SpecialCauseImproving:Ce.SpecialCauseDeteriorating:(B.includes("eight-point-run")||B.includes("five-point-trend")||B.includes("two-of-three-near-limit"))&&(te=O[O.length-1]>H?Ce.SpecialCauseImproving:Ce.SpecialCauseDeteriorating),d&&!u&&B.length===1&&B[0]==="point-beyond-3sigma"){const K=O.slice(-9,-1);if(K.length>=5){const se=K.filter(_e=>_e>H).length,be=K.filter(_e=>_e<H).length;se>0&&be>0&&(te=Ce.SpecialCauseNoJudgement)}}return{state:te,firedRules:B,mean:H,stdDev:U,side:j.latestValue!=null&&H!=null?j.latestValue>H?"above":"below":void 0}},[u,d,U,H,j.latestValue,O.join(",")]);E.useEffect(()=>{d&&!u&&b&&b(ye)},[ye,d,u,b]);const ue=ye.state,ce=k1(ue),Q=B=>{const W=M.filter(q=>q.value!=null);if(!W.length)return F/2;const ee=W.map(q=>q.value);de&&(de.lower!=null&&ee.push(de.lower),de.upper!=null&&ee.push(de.upper));const G=Math.min(...ee),A=Math.max(...ee);return G===A?F/2:F-(B-G)/(A-G)*(F-$*2)-$},ie=E.useMemo(()=>{if(!w||M.length<=w)return M.map((J,te)=>te);if(D==="stride"){const J=Math.max(2,w),te=(M.length-1)/(J-1),K=new Set;for(let se=0;se<J;se++)K.add(Math.round(se*te));return K.add(M.length-1),Array.from(K).sort((se,be)=>se-be)}const B=M.map((J,te)=>({i:te,v:J.value}));function W(J,te,K){const se=J.i,be=J.v??0,_e=te.i,Se=te.v??0,Te=K.i,pe=K.v??0,Pe=Math.abs((pe-Se)*se-(Te-_e)*be+Te*Se-pe*_e),Be=Math.hypot(pe-Se,Te-_e);return Be===0?0:Pe/Be}function ee(J,te){if(J.length<=2)return J;let K=-1,se=-1;for(let be=1;be<J.length-1;be++){const _e=W(J[be],J[0],J[J.length-1]);_e>K&&(K=_e,se=be)}if(K>te){const be=ee(J.slice(0,se+1),te),_e=ee(J.slice(se),te);return[...be.slice(0,-1),..._e]}return[J[0],J[J.length-1]]}let G=.1,A=B;for(let J=0;J<8&&(A=ee(B,G),!(A.length<=w));J++)G*=1.6;const q=new Set(A.map(J=>J.i));return q.add(0),q.add(M.length-1),Array.from(q).sort((J,te)=>J-te)},[M,w,D]),fe=E.useMemo(()=>ie.map(B=>M[B]),[ie,M]),Y=E.useMemo(()=>{let B="";return fe.forEach((W,ee)=>{if(W.value==null)return;const G=Q(W.value),A=ee/(fe.length-1||1)*(N-P*2)+P;B+=B?` L ${A} ${G}`:`M ${A} ${G}`}),B},[fe,N]),he=j.latestIndex??-1,oe=de,ge=Za(),R=E.useMemo(()=>`spc-spark-wash-${Math.random().toString(36).slice(2)}`,[M.length,m]),V=M.length>=(n||0),le=y||"SPC sparkline",me=(()=>{if(!ue)return;const B=I===Fe.Up?ft.HigherIsBetter:I===Fe.Down?ft.LowerIsBetter:ft.ContextDependent,W={variationIcon:ue===Ce.SpecialCauseImproving?"improvement":ue===Ce.SpecialCauseDeteriorating?"concern":ue===Ce.SpecialCauseNoJudgement?"none":"neither",trend:I===Fe.Up?Me.Higher:Me.Lower,polarity:B};try{return Af(W)}catch{return}})(),ae=E.useMemo(()=>{if(!V)return 10;const B=[...M].reverse().filter(ee=>ee.value!=null).slice(0,6).map(ee=>Q(ee.value));return B.length&&B.reduce((ee,G)=>ee+G,0)/B.length<F/2?F:10},[M,V,F]);return o.jsxs("svg",{role:"img","aria-label":le,"aria-description":me,width:N,height:F,className:h,viewBox:`0 0 ${N} ${F}`,children:[m&&o.jsxs(o.Fragment,{children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:R,x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:ce,stopOpacity:Number(ge.start)}),o.jsx("stop",{offset:"60%",stopColor:ce,stopOpacity:Number(ge.mid)}),o.jsx("stop",{offset:"100%",stopColor:ce,stopOpacity:Number(ge.end)})]})}),o.jsx("rect",{x:0,y:0,width:N,height:F,fill:`url(#${R})`})]}),oe&&oe.lower!=null&&oe.upper!=null&&o.jsxs(o.Fragment,{children:[a&&o.jsx("rect",{x:0,y:Math.min(Q(oe.upper),Q(oe.lower)),width:N,height:Math.abs(Q(oe.upper)-Q(oe.lower)),fill:ce,fillOpacity:.08}),o.jsx("line",{x1:0,x2:N,y1:Q(oe.lower),y2:Q(oe.lower),stroke:ce,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),o.jsx("line",{x1:0,x2:N,y1:Q(oe.upper),y2:Q(oe.upper),stroke:ce,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),k&&s&&o.jsxs(o.Fragment,{children:[k.lowerTwo!=null&&o.jsx("line",{x1:0,x2:N,y1:Q(k.lowerTwo),y2:Q(k.lowerTwo),stroke:ce,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1}),k.lowerOne!=null&&o.jsx("line",{x1:0,x2:N,y1:Q(k.lowerOne),y2:Q(k.lowerOne),stroke:ce,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),k.upperOne!=null&&o.jsx("line",{x1:0,x2:N,y1:Q(k.upperOne),y2:Q(k.upperOne),stroke:ce,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),k.upperTwo!=null&&o.jsx("line",{x1:0,x2:N,y1:Q(k.upperTwo),y2:Q(k.upperTwo),stroke:ce,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1})]})]}),r&&j.mean!=null&&o.jsx("line",{x1:0,x2:N,y1:Q(j.mean),y2:Q(j.mean),stroke:Ve("common-cause","#A6A6A6"),strokeWidth:1,strokeDasharray:"2,2"}),o.jsx("path",{d:Y,fill:"none",stroke:Ve("common-cause","#A6A6A6"),strokeWidth:L.stroke,strokeLinecap:"round"}),ie.map((B,W)=>{const ee=M[B];if(!ee||ee.value==null)return null;const G=Q(ee.value),A=W/(fe.length-1||1)*(N-P*2)+P,J=(B===he&&l?L.pointR+1:L.pointR)-.5;let te=Ve("common-cause","#A6A6A6");if(S){const K=C?.[ne+B];if(K==="improvement")te=Ve("improvement","#00B0F0");else if(K==="concern")te=Ve("concern","#E46C0A");else if(x?.[ne+B])te=Ve("no-judgement","#490092");else if(H!=null){const be=ee.value,_e=T?.upper??(U!=null?H+3*U:null),Se=T?.lower??(U!=null?H-3*U:null);_e!=null&&be>_e?te=Ve("improvement","#00B0F0"):Se!=null&&be<Se?te=Ve("concern","#E46C0A"):te=Ve("common-cause","#A6A6A6")}else te=Ve("common-cause","#A6A6A6")}return o.jsx("circle",{cx:A,cy:G,r:J,fill:te,stroke:"none",strokeWidth:0,onClick:p?()=>p(B,ee):void 0,style:p?{cursor:"pointer"}:void 0,"data-index":B,"data-signal-colour":S?te:void 0},B)}),c&&V&&ue&&ue!==Ce.CommonCause&&I&&o.jsx("text",{x:N-4,y:ae,textAnchor:"end",fontSize:12,fontWeight:"bold",fill:ce,"data-glyph-pos":ae<F/2?"top":"bottom",children:I===Fe.Up?"H":"L"})]})};Ef.displayName="SPCSpark";const ke=e=>typeof e=="number"&&Number.isFinite(e),T1=e=>e.reduce((t,n)=>t+n,0),fn=e=>e.length?T1(e)/e.length:NaN;function Bf(e,t){const n=new Array(e.length).fill(null);let r=null;for(let i=0;i<e.length;i++){const a=e[i];if(!t[i]&&ke(a)){if(r!==null){const s=e[r];n[i]=ke(s)?Math.abs(a-s):null}r=i}}return n}function Rf(e,t){const n=e.filter(a=>ke(a));if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=fn(n),i=3.267*r;if(t){const a=n.filter(s=>s<=i);a.length&&a.length!==n.length&&(r=fn(a),i=3.267*r)}return{mrMean:r,mrUcl:i}}function N1(e,t){if(!ke(e)||!ke(t))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=2.66,r=2/3*n,i=1/3*n;return{upperProcessLimit:e+n*t,lowerProcessLimit:e-n*t,upperTwoSigma:e+r*t,lowerTwoSigma:e-r*t,upperOneSigma:e+i*t,lowerOneSigma:e-i*t}}const j1=.2777,D1=3.6,M1=e=>ke(e)&&e>=0?Math.pow(e,j1):null,pr=e=>ke(e)&&e>=0?Math.pow(e,D1):null;function P1(e,t){return!(e>0&&e<1)||!(t>0&&t<1)?NaN:Math.log(1-e)/Math.log(1-t)}const Wr={one:{low:.1586552539,high:.8413447461},two:{low:.0227501319,high:.9772498681},three:{low:.001349898,high:.998650102}};function I1(e){if(!ke(e)||e<0)return{cl:null,lcl:null,ucl:null,oneLow:null,oneHigh:null,twoLow:null,twoHigh:null};const t=1/(e+1),n=d=>P1(d,t)-1,r=n(.5),i=Math.max(0,n(Wr.three.low)),a=n(Wr.three.high),s=Math.max(0,n(Wr.one.low)),l=n(Wr.one.high),c=Math.max(0,n(Wr.two.low)),u=n(Wr.two.high);return{cl:r,lcl:i,ucl:a,oneLow:s,oneHigh:l,twoLow:c,twoHigh:u}}function F1(e,t,n){const r=e.map(C=>ke(C)?M1(C):null),i=Bf(r,t),{mrMean:a}=Rf(i,!!n),s=r.filter((C,x)=>!t[x]&&ke(C)),l=s.length?fn(s):NaN;if(!ke(l)||!ke(a))return{center:null,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null,mr:i,mrMean:null,mrUcl:null};const c=2.66,u=2/3*c,d=1/3*c,f=l+c*a,m=l-c*a,g=l+u*a,y=l-u*a,h=l+d*a,p=l-d*a,b=pr(l),w=pr(f),D=m<=0?null:pr(m),S=pr(h),v=p<=0?null:pr(p),T=pr(g),k=y<=0?null:pr(y);return{center:b??null,upperProcessLimit:w??null,lowerProcessLimit:D??null,upperTwoSigma:T??null,lowerTwoSigma:k??null,upperOneSigma:S??null,lowerOneSigma:v??null,mr:i,mrMean:a,mrUcl:ke(a)?3.267*a:null}}function $1(e){const{metricImprovement:t,capabilityMode:n,value:r,mean:i,upperProcessLimit:a,lowerProcessLimit:s,target:l}=e,c=u=>typeof u=="number"&&Number.isFinite(u);return!c(r)||i===null||!c(l)?it.None:n&&c(a)&&c(s)?t===ze.Up?c(s)&&s>l?it.Pass:c(a)&&a<l?it.Fail:it.None:t===ze.Down?c(a)&&a<l?it.Pass:c(s)&&s>l?it.Fail:it.None:it.None:t===ze.Down?r<=l?it.Pass:it.Fail:t===ze.Up?r>=l?it.Pass:it.Fail:it.None}function L1(e,t){const{W:n,minGap:r,minDeltaSigma:i,scoreThreshold:a,isShiftUpAt:s,isShiftDownAt:l,isTrendUpAt:c,isTrendDownAt:u,isSingleUpAt:d,isSingleDownAt:f}=t,m=[];let g=0;for(let y=0;y<e.length;y++){const h=e[y];y>0&&e[y-1].partitionId!==h.partitionId&&(g=y);const p=y>0&&s(y-1),b=y>0&&l(y-1),w=y>0&&c(y-1),D=y>0&&u(y-1),S=y>0&&d(y-1),v=y>0&&f(y-1),T=s(y),k=l(y),C=c(y),x=u(y),I=d(y),M=f(y),j=[];T&&!p&&j.push({reason:Jt.Shift,index:y}),k&&!b&&j.push({reason:Jt.Shift,index:y}),C&&!w&&j.push({reason:Jt.Trend,index:y}),x&&!D&&j.push({reason:Jt.Trend,index:y}),I&&!S&&j.push({reason:Jt.Point,index:y}),M&&!v&&j.push({reason:Jt.Point,index:y});for(const L of j){if(L.index-g<r)continue;const N=Math.max(0,L.index-n),F=L.index-1;if(F-N+1<n)continue;const P=L.index,$=L.index+n-1;if($>=e.length)continue;const ne=e.slice(N,F+1).map(Y=>Y.value).filter(Y=>typeof Y=="number"&&Number.isFinite(Y)),X=e.slice(P,$+1).map(Y=>Y.value).filter(Y=>typeof Y=="number"&&Number.isFinite(Y));if(ne.length<n||X.length<n)continue;const O=e[L.index];let H=null;if(typeof O.upperProcessLimit=="number"&&typeof O.mean=="number"){const Y=O.upperProcessLimit-O.mean;Y>0&&(H=Y/3)}if(!H||H<=0)continue;const z=fn(ne),re=fn(X),U=re-z;if(Math.abs(U)<i*H)continue;const ye=e.slice(P,$+1).filter(Y=>Y.variationIcon===je.Concern).length;if(ye>1)continue;const ue=Y=>{const he=fn(Y);return Y.length?Y.reduce((oe,ge)=>oe+(ge-he)*(ge-he),0)/Y.length:0},ce=ue(ne),Q=ue(X);let ie=L.reason===Jt.Shift?90:L.reason===Jt.Trend?70:60;if(Q<ce&&(ie+=10),ie-=ye*15,ie<a)continue;const fe=m.find(Y=>Y.index===L.index);if(fe){const Y=he=>he===Jt.Shift?3:he===Jt.Trend?2:1;(Y(L.reason)>Y(fe.reason)||ie>fe.score)&&(fe.reason=L.reason,fe.score=ie,fe.deltaMean=U,fe.oldMean=z,fe.newMean=re,fe.window=[P,$])}else m.push({index:L.index,reason:L.reason,score:ie,deltaMean:U,oldMean:z,newMean:re,window:[P,$]})}}return m.sort((y,h)=>y.index-h.index),m}function il(){const e=globalThis;if(typeof e.__SPC_PHASE4_STRICT<"u")return!!e.__SPC_PHASE4_STRICT;if(typeof process<"u"){const t=process?.env?.SPC_PHASE4_STRICT;if(typeof t<"u"){const n=String(t).toLowerCase();if(n==="1"||n==="true")return!0;if(n==="0"||n==="false")return!1}}return!0}var hn=(e=>(e.Info="info",e.Warning="warning",e.Error="error",e))(hn||{}),ts=(e=>(e.Config="config",e.Data="data",e.Limits="limits",e.SpecialCause="special_cause",e.Baseline="baseline",e.Logic="logic",e.Target="target",e.Ghost="ghost",e.Partition="partition",e))(ts||{}),ns=(e=>(e.UnknownChartType="unknown_chart_type",e.InsufficientPointsGlobal="insufficient_points_global",e.VariationConflictRow="variation_conflict_row",e.NullValuesExcluded="null_values_excluded",e.TargetIgnoredRareEvent="target_ignored_rare_event",e.GhostRowsRareEvent="ghost_rows_rare_event",e.InsufficientPointsPartition="insufficient_points_partition",e.BaselineWithSpecialCause="baseline_with_special_cause",e.PartitionCapApplied="partition_cap_applied",e.GlobalCapApplied="global_cap_applied",e))(ns||{});function A1(e){const t=[];let n=[];for(const r of e)r.baseline&&n.length&&(t.push(n),n=[]),n.push(r);return n.length&&t.push(n),t}function E1(e,t,n){const r=t.autoRecalculateShiftLength||t.specialCauseShiftPoints||6;if(e.length<r*2)return;const i=e.map((d,f)=>({idx:f,value:d.value})).filter(d=>ke(d.value));if(i.length<r*2)return;const a=n===ze.Up||n===ze.Neither,s=n===ze.Down;function l(d,f){const m=i.slice(d,f).map(g=>g.value);return m.length?fn(m):NaN}let c=null;if(i.length>1){const d=[];for(let m=1;m<i.length;m++)d.push(Math.abs(i[m].value-i[m-1].value));const f=fn(d);ke(f)&&f>0&&(c=f*(2.66/3))}if(!c||c<=0)return;const u=t.autoRecalculateDeltaSigma??.5;for(let d=r;d<=i.length-r;d++){const f=d-r,m=l(f,d),g=l(d,d+r);if(!ke(m)||!ke(g))continue;const h=(g-m)/c;if(!(a?h>=u:s?-h>=u:Math.abs(h)>=u))continue;const b=i.slice(d,d+r).map(S=>S.value);if(!(a?b.every(S=>S>m):s?b.every(S=>S<m):b.every(S=>a?S>m:S<m)))continue;const D=i[d].idx;e[D].baseline||(e[D].baseline=!0);return}}function Of(e){if(!e)return{};const t=e,n=e,r=n.rules??{},i=n.precedence??{},a=n.thresholds??{},s=n.warnings??{},l=n.rareEvent??{},c=n.capability??{},u=n.grace??{},d=n.baselineSuggest??{},f=n.autoRecalc??{},m=u.emergingEnabled??n.emergingGraceEnabled??t.emergingGraceEnabled??t.emergingDirectionGrace,g=r.collapseWeakerClusterRules??n.collapseWeakerClusterRules??t.collapseWeakerClusterRules??t.collapseClusterRules;if(il()){if(t.emergingDirectionGrace!==void 0)throw new Error("[spc][phase4] emergingDirectionGrace is no longer supported. Use settings.grace.emergingEnabled.");if(t.collapseClusterRules!==void 0)throw new Error("[spc][phase4] collapseClusterRules is no longer supported. Use settings.rules.collapseWeakerClusterRules.")}const y=globalThis;!il()&&t.emergingDirectionGrace!==void 0&&n.emergingGraceEnabled===void 0&&u.emergingEnabled===void 0&&!y.__spc_warn_emergingDirectionGrace&&(y.__spc_warn_emergingDirectionGrace=!0,console.warn("[spc] emergingDirectionGrace is deprecated; use grace.emergingEnabled")),!il()&&t.collapseClusterRules!==void 0&&r.collapseWeakerClusterRules===void 0&&n.collapseWeakerClusterRules===void 0&&!y.__spc_warn_collapseClusterRules&&(y.__spc_warn_collapseClusterRules=!0,console.warn("[spc] collapseClusterRules is deprecated; use rules.collapseWeakerClusterRules"));const h=w=>{const D={};for(const S of Object.keys(w)){const v=w[S];v!==void 0&&(D[S]=v)}return D},p=h({excludeMovingRangeOutliers:l.excludeMovingRangeOutliers??t.excludeMovingRangeOutliers,specialCauseShiftPoints:r.shiftPoints??t.specialCauseShiftPoints,specialCauseTrendPoints:r.trendPoints??t.specialCauseTrendPoints,enableFourOfFiveRule:r.fourOfFiveEnabled??t.enableFourOfFiveRule,enableFifteenInInnerThirdRule:r.fifteenInnerThirdEnabled??t.enableFifteenInInnerThirdRule,collapseWeakerClusterRules:g??t.collapseWeakerClusterRules,precedenceStrategy:i.strategy??t.precedenceStrategy,conflictPrecedenceMode:i.conflictMode??t.conflictPrecedenceMode,minimumPoints:a.minimumPoints??t.minimumPoints,minimumPointsPartition:a.minimumPointsPartition??t.minimumPointsPartition,maximumPointsPartition:a.maximumPointsPartition??t.maximumPointsPartition,maximumPoints:a.maximumPoints??t.maximumPoints,transitionBufferPoints:a.transitionBufferPoints??t.transitionBufferPoints,minimumPointsWarning:s.minimumPointsWarning??t.minimumPointsWarning,pointConflictWarning:s.pointConflictWarning??t.pointConflictWarning,variationIconConflictWarning:s.variationIconConflictWarning??t.variationIconConflictWarning,nullValueWarning:s.nullValueWarning??t.nullValueWarning,targetSuppressedWarning:s.targetSuppressedWarning??t.targetSuppressedWarning,ghostOnRareEventWarning:s.ghostOnRareEventWarning??t.ghostOnRareEventWarning,partitionSizeWarnings:s.partitionSizeWarnings??t.partitionSizeWarnings,baselineSpecialCauseWarning:s.baselineSpecialCauseWarning??t.baselineSpecialCauseWarning,maximumPointsWarnings:s.maximumPointsWarnings??t.maximumPointsWarnings,assuranceCapabilityMode:c.assuranceCapabilityMode??t.assuranceCapabilityMode,emergingGraceEnabled:m,emergingDirectionGrace:m,baselineSuggest:d.enabled??t.baselineSuggest,baselineSuggestMinDeltaSigma:d.minDeltaSigma??t.baselineSuggestMinDeltaSigma,baselineSuggestStabilityPoints:d.stabilityPoints??t.baselineSuggestStabilityPoints,baselineSuggestMinGap:d.minGap??t.baselineSuggestMinGap,baselineSuggestScoreThreshold:d.scoreThreshold??t.baselineSuggestScoreThreshold,autoRecalculateAfterShift:f.enabled??t.autoRecalculateAfterShift,autoRecalculateShiftLength:f.shiftLength??t.autoRecalculateShiftLength,autoRecalculateDeltaSigma:f.deltaSigma??t.autoRecalculateDeltaSigma}),b={...p,...h(t)};if(m!==void 0&&(b.emergingGraceEnabled=m,b.grace={...b.grace,emergingEnabled:m}),p.collapseWeakerClusterRules!==void 0){const w=p.collapseWeakerClusterRules;b.collapseWeakerClusterRules=w,b.rules={...b.rules,collapseWeakerClusterRules:w}}return h(b)}function Hf(e){const{chartType:t,metricImprovement:n,data:r,settings:i={}}=e,a=Of(i),s={excludeMovingRangeOutliers:!1,specialCauseShiftPoints:6,specialCauseTrendPoints:6,enableFourOfFiveRule:!1,minimumPoints:13,minimumPointsWarning:!1,minimumPointsPartition:12,maximumPointsPartition:null,maximumPoints:null,variationIconConflictWarning:!0,nullValueWarning:!0,targetSuppressedWarning:!0,ghostOnRareEventWarning:!0,partitionSizeWarnings:!0,baselineSpecialCauseWarning:!0,maximumPointsWarnings:!0,assuranceCapabilityMode:!0,baselineSuggest:!1,baselineSuggestMinDeltaSigma:.5,baselineSuggestStabilityPoints:5,baselineSuggestMinGap:12,baselineSuggestScoreThreshold:50,precedenceStrategy:Ka.DirectionalFirst,emergingDirectionGrace:!1,rules:{},grace:{},...a};if(!Array.isArray(r))throw new Error("data must be an array of rows");const l=r.map((p,b)=>({rowId:b+1,x:p.x,value:ke(p.value)?p.value:null,ghost:!!p.ghost,baseline:!!p.baseline,target:ke(p.target)?p.target:null}));if(a?.autoRecalculateAfterShift)try{E1(l,a,n)}catch{}const c=A1(l),u=[],d=[],m=l.filter(p=>!p.ghost&&ke(p.value)).length>=(s.minimumPoints??13);let g=0;const y={};for(const p of c){g++;const b=p.map(j=>j.value),w=p.map(j=>j.ghost);let D=new Array(b.length).fill(null),S=NaN,v=NaN,T=NaN,k={upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};if(t==="XmR"){D=Bf(b,w);const j=b.filter((N,F)=>!w[F]&&ke(N));S=j.length?fn(j):NaN;const L=Rf(D,!!s.excludeMovingRangeOutliers);v=L.mrMean,T=L.mrUcl,k=N1(S,v)}else if(t==="T"){const j=F1(b,w,!!s.excludeMovingRangeOutliers);D=j.mr,v=j.mrMean??NaN,T=j.mrUcl??NaN,S=j.center??NaN,k={upperProcessLimit:j.upperProcessLimit,lowerProcessLimit:j.lowerProcessLimit,upperTwoSigma:j.upperTwoSigma,lowerTwoSigma:j.lowerTwoSigma,upperOneSigma:j.upperOneSigma,lowerOneSigma:j.lowerOneSigma}}else if(t==="G"){const j=b.filter((F,P)=>!w[P]&&ke(F)),L=j.length?fn(j):NaN,N=I1(L);S=N.cl??NaN,k={upperProcessLimit:N.ucl,lowerProcessLimit:N.lcl,upperTwoSigma:N.twoHigh,lowerTwoSigma:N.twoLow,upperOneSigma:N.oneHigh,lowerOneSigma:N.oneLow},D=new Array(b.length).fill(null),v=NaN,T=NaN}else d.push({code:"unknown_chart_type",category:"config",severity:"error",message:`Unknown ChartType '${t}' â€“ supported: XmR, T, G.`,context:{chartType:t}});const C=p.map((j,L)=>{const N=!j.ghost&&ke(j.value)?b.slice(0,L+1).filter((ne,X)=>!w[X]&&ke(ne)).length:0,F=m,P=F?k:{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};return{rowId:j.rowId,x:j.x,value:ke(j.value)?j.value:null,ghost:j.ghost,partitionId:g,pointRank:N,mean:F&&ke(S)?S:null,mr:ke(D[L])?D[L]:null,mrMean:F&&ke(v)?v:null,mrUcl:F&&ke(T)?T:null,upperProcessLimit:ke(P.upperProcessLimit)?P.upperProcessLimit:null,lowerProcessLimit:ke(P.lowerProcessLimit)?P.lowerProcessLimit:null,upperTwoSigma:ke(P.upperTwoSigma)?P.upperTwoSigma:null,lowerTwoSigma:ke(P.lowerTwoSigma)?P.lowerTwoSigma:null,upperOneSigma:ke(P.upperOneSigma)?P.upperOneSigma:null,lowerOneSigma:ke(P.lowerOneSigma)?P.lowerOneSigma:null,target:ke(j.target)?j.target:null,specialCauseFifteenInnerThird:!1,specialCauseSinglePointUp:!1,specialCauseSinglePointDown:!1,specialCauseTwoOfThreeUp:!1,specialCauseTwoOfThreeDown:!1,specialCauseFourOfFiveUp:!1,specialCauseFourOfFiveDown:!1,specialCauseShiftUp:!1,specialCauseShiftDown:!1,specialCauseTrendUp:!1,specialCauseTrendDown:!1,variationIcon:je.Suppressed,assuranceIcon:it.None,upperBaseline:F&&ke(S)?S:null,lowerBaseline:F&&ke(S)?S:null,movingRangeHighPointValue:F&&ke(T)?T:null,ghostValue:j.ghost&&ke(j.value)?j.value:null,ghostFlag:!!j.ghost,specialCauseImprovementValue:null,specialCauseConcernValue:null,specialCauseNeitherValue:null,ruleTags:[]}});y[g]=C.filter(j=>!j.ghost&&ke(j.value)).length;const x=s.specialCauseShiftPoints??6,I=s.specialCauseTrendPoints??6,M=[];for(let j=0;j<C.length;j++){const L=C[j],N=L.value;if(!L.ghost&&ke(N)&&M.push(j),!(ke(L.mean)&&ke(L.upperProcessLimit)&&ke(L.lowerProcessLimit))||L.ghost||!ke(N)){u.push(L);continue}L.specialCauseSinglePointUp=ke(L.upperProcessLimit)?N>L.upperProcessLimit:!1,L.specialCauseSinglePointDown=ke(L.lowerProcessLimit)?N<L.lowerProcessLimit:!1,u.push(L)}if(M.length){const j=F=>C[F];let L=[],N=[];for(const F of M){const P=j(F);if(!ke(P.mean)||!ke(P.value)){L=[],N=[];continue}if(P.value>P.mean?(L.push(F),N=[]):P.value<P.mean?(N.push(F),L=[]):(L=[],N=[]),L.length>=x)for(const $ of L){const ne=j($);ne.specialCauseShiftUp=!0}if(N.length>=x)for(const $ of N){const ne=j($);ne.specialCauseShiftDown=!0}}for(let F=0;F<=M.length-3;F++){const $=M.slice(F,F+3).map(j);if(!$.every(ue=>ke(ue.mean)&&ke(ue.value)))continue;const ne=$[0].mean,X=$.every(ue=>ue.value>ne),O=$.every(ue=>ue.value<ne);if(!X&&!O)continue;const H=$[0].upperTwoSigma??1/0,z=$[0].lowerTwoSigma??-1/0,re=$[0].upperProcessLimit??1/0,U=$[0].lowerProcessLimit??-1/0,de=$.filter(ue=>ue.value>H&&ue.value<=re),ye=$.filter(ue=>ue.value<z&&ue.value>=U);if(X&&de.length>=2)for(const ue of de)ue.specialCauseTwoOfThreeUp=!0;if(O&&ye.length>=2)for(const ue of ye)ue.specialCauseTwoOfThreeDown=!0}if(s.enableFourOfFiveRule)for(let F=0;F<=M.length-5;F++){const $=M.slice(F,F+5).map(j);if(!$.every(re=>ke(re.mean)&&ke(re.value)))continue;const ne=$[0].mean;if(!$.every(re=>re.value>ne)&&!$.every(re=>re.value<ne))continue;const X=$[0].upperOneSigma??1/0,O=$[0].lowerOneSigma??-1/0,H=$.filter(re=>re.value>X),z=$.filter(re=>re.value<O);if($.every(re=>re.value>ne)&&H.length>=4)for(const re of H)re.specialCauseFourOfFiveUp=!0;if($.every(re=>re.value<ne)&&z.length>=4)for(const re of z)re.specialCauseFourOfFiveDown=!0}for(let F=0;F<=M.length-I;F++){const P=M.slice(F,F+I),$=P.map(j);if(!$.every(O=>ke(O.value)))continue;let ne=!0,X=!0;for(let O=1;O<$.length&&($[O].value>$[O-1].value||(ne=!1),$[O].value<$[O-1].value||(X=!1),!(!ne&&!X));O++);if(ne)for(const O of P){const H=j(O);H.specialCauseTrendUp=!0}if(X)for(const O of P){const H=j(O);H.specialCauseTrendDown=!0}}if(s.enableFifteenInInnerThirdRule){let F=[];for(const P of M){const $=j(P);if(!ke($.value)||!ke($.mean)||!ke($.upperOneSigma)||!ke($.lowerOneSigma)){F=[];continue}if(!($.value<$.upperOneSigma&&$.value>$.lowerOneSigma)){F=[];continue}if(F.push(P),F.length>=15){const X=F.map(j),O=X.some(z=>z.value>z.mean),H=X.some(z=>z.value<z.mean);if(O&&H)for(const z of F)j(z).specialCauseFifteenInnerThird=!0}}}}if(s.maximumPointsPartition&&Number.isFinite(s.maximumPointsPartition)){const j=s.maximumPointsPartition;let L=0;for(const N of u.filter(F=>F.partitionId===g))!N.ghost&&ke(N.value)&&L++,L>j&&(N.mean=N.upperProcessLimit=N.lowerProcessLimit=null,N.upperTwoSigma=N.lowerTwoSigma=N.upperOneSigma=N.lowerOneSigma=null)}}for(const p of u){if(p.ruleTags&&p.ruleTags.length)continue;const b=[];p.specialCauseShiftUp&&b.push(Tt.ShiftHigh),p.specialCauseShiftDown&&b.push(Tt.ShiftLow),p.specialCauseTrendUp&&b.push(Tt.TrendIncreasing),p.specialCauseTrendDown&&b.push(Tt.TrendDecreasing),p.specialCauseSinglePointUp&&b.push(Tt.SinglePointAbove),p.specialCauseSinglePointDown&&b.push(Tt.SinglePointBelow),p.specialCauseTwoOfThreeUp&&b.push(Tt.TwoOfThreeAbove),p.specialCauseTwoOfThreeDown&&b.push(Tt.TwoOfThreeBelow),p.specialCauseFourOfFiveUp&&b.push(Tt.FourOfFiveAbove),p.specialCauseFourOfFiveDown&&b.push(Tt.FourOfFiveBelow),p.specialCauseFifteenInnerThird&&b.push(Tt.FifteenInnerThird),b.length&&(p.ruleTags=b)}for(let p=0;p<u.length;p++){const b=u[p];if(Object.prototype.hasOwnProperty.call(b,Ti.ImprovementValueBeforePruning)||Object.defineProperty(b,Ti.ImprovementValueBeforePruning,{get(){return b.originalSpecialCauseImprovementValue??null},enumerable:!1,configurable:!0}),Object.prototype.hasOwnProperty.call(b,Ti.ConcernValueBeforePruning)||Object.defineProperty(b,Ti.ConcernValueBeforePruning,{get(){return b.originalSpecialCauseConcernValue??null},enumerable:!1,configurable:!0}),b.ghost||!ke(b.value)||b.mean===null){b.variationIcon=je.Suppressed;continue}const w=b.value>b.mean,D=b.value<b.mean;s.rules?.collapseWeakerClusterRules&&(b.specialCauseTwoOfThreeUp&&b.specialCauseFourOfFiveUp&&(b.specialCauseTwoOfThreeUp=!1),b.specialCauseTwoOfThreeDown&&b.specialCauseFourOfFiveDown&&(b.specialCauseTwoOfThreeDown=!1));const S=b.specialCauseTrendUp&&w,v=b.specialCauseTrendDown&&D,T=b.specialCauseSinglePointUp||b.specialCauseTwoOfThreeUp||s.enableFourOfFiveRule&&b.specialCauseFourOfFiveUp||b.specialCauseShiftUp||S,k=b.specialCauseSinglePointDown||b.specialCauseTwoOfThreeDown||s.enableFourOfFiveRule&&b.specialCauseFourOfFiveDown||b.specialCauseShiftDown||v;let C=!1;if(s.precedenceStrategy===Ka.DirectionalFirst&&(s.grace?.emergingEnabled||s.emergingGraceEnabled||s.emergingDirectionGrace)){const I=s.specialCauseTrendPoints||6;if(I>1&&!(b.specialCauseTrendUp||b.specialCauseTrendDown)){const M=I-1,j=[];for(let L=p;L>=0&&j.length<M;L--){const N=u[L];!N.ghost&&ke(N.value)&&N.mean!==null&&j.unshift(N)}if(j.length===M){let L=!0;for(let N=1;N<j.length&&L;N++)n===ze.Up?j[N].value>j[N-1].value||(L=!1):n===ze.Down&&j[N].value<j[N-1].value||(L=!1);C=L}}}if(s.precedenceStrategy===Ka.DirectionalFirst){const M=n===ze.Up?T:n===ze.Down?k:!1,j=n===ze.Up?k:n===ze.Down?T:!1;M&&!j?b.variationIcon=je.Improvement:j&&!M?b.variationIcon=C?je.Neither:je.Concern:M&&j?b.variationIcon=C||b.specialCauseTrendUp||b.specialCauseTrendDown?je.Improvement:je.Neither:b.variationIcon=je.Neither}else n===ze.Up?b.variationIcon=T?je.Improvement:k?je.Concern:je.Neither:n===ze.Down?b.variationIcon=k?je.Improvement:T?je.Concern:je.Neither:b.variationIcon=je.Neither;const x=T||k;if(b.specialCauseImprovementValue=x&&b.variationIcon===je.Improvement?b.value:null,b.specialCauseConcernValue=x&&b.variationIcon===je.Concern?b.value:null,b.specialCauseNeitherValue=x&&b.variationIcon===je.Neither?b.value:null,s.conflictPrecedenceMode===gf.SqlRankingV26a&&b.specialCauseImprovementValue!==null&&b.specialCauseConcernValue!==null){const I=[];b.specialCauseSinglePointUp&&I.push({id:An.SinglePoint,rank:1,side:Dt.Up}),b.specialCauseSinglePointDown&&I.push({id:An.SinglePoint,rank:1,side:Dt.Down}),b.specialCauseTwoOfThreeUp&&I.push({id:An.TwoSigma,rank:2,side:Dt.Up}),b.specialCauseTwoOfThreeDown&&I.push({id:An.TwoSigma,rank:2,side:Dt.Down}),b.specialCauseShiftUp&&I.push({id:An.Shift,rank:3,side:Dt.Up}),b.specialCauseShiftDown&&I.push({id:An.Shift,rank:3,side:Dt.Down}),b.specialCauseTrendUp&&I.push({id:An.Trend,rank:4,side:Dt.Up}),b.specialCauseTrendDown&&I.push({id:An.Trend,rank:4,side:Dt.Down});const M=I.filter(X=>X.side===Dt.Up).reduce((X,O)=>Math.max(X,O.rank),0),j=I.filter(X=>X.side===Dt.Down).reduce((X,O)=>Math.max(X,O.rank),0);let L;M>j?L=Br.Upwards:j>M?L=Br.Downwards:L=Br.Same;const N=b.specialCauseImprovementValue,F=b.specialCauseConcernValue;L===Br.Upwards?n===ze.Up?b.specialCauseConcernValue=null:n===ze.Down&&(b.specialCauseImprovementValue=null):L===Br.Downwards?n===ze.Up?b.specialCauseImprovementValue=null:n===ze.Down&&(b.specialCauseConcernValue=null):b.variationIcon===je.Improvement?b.specialCauseConcernValue=null:b.variationIcon===je.Concern?b.specialCauseImprovementValue=null:b.specialCauseConcernValue=null,b.specialCauseImprovementValue!==null&&b.specialCauseConcernValue===null?b.variationIcon=je.Improvement:b.specialCauseConcernValue!==null&&b.specialCauseImprovementValue===null?b.variationIcon=je.Concern:b.specialCauseImprovementValue===null&&b.specialCauseConcernValue===null&&(b.variationIcon=je.Neither);const P=b.specialCauseImprovementValue!==null?Dt.Up:b.specialCauseConcernValue!==null?Dt.Down:void 0,$=P===Dt.Up?M:P===Dt.Down?j:Math.max(M,j),ne=I.find(X=>X.rank===$&&(!P||X.side===P));b.conflictPrimeDirection=L,b.conflictResolved=!0,b.conflictResolvedRank=$||void 0,ne&&(b.conflictResolvedByRuleId=ne.id),b.pruningMode=bf.Conflict,b.originalSpecialCauseImprovementValue=N,b.originalSpecialCauseConcernValue=F}{const I=l[b.rowId-1],M=$1({metricImprovement:n,capabilityMode:s.assuranceCapabilityMode,value:b.value,mean:b.mean,upperProcessLimit:b.upperProcessLimit,lowerProcessLimit:b.lowerProcessLimit,target:ke(I?.target)?I.target:null});b.assuranceIcon=M}}if((s.minimumPointsWarning??!1)&&!m){const p=l.filter(b=>!b.ghost&&ke(b.value)).length;d.push({code:"insufficient_points_global",category:"data",severity:"warning",message:`Only ${p} non-ghost points available; minimum required is ${s.minimumPoints}. Limits and icons suppressed.`,context:{available:p,minimumRequired:s.minimumPoints}})}if(s.variationIconConflictWarning)for(const p of u)p.variationIcon===je.Improvement&&(p.specialCauseSinglePointUp||p.specialCauseTwoOfThreeUp||s.enableFourOfFiveRule&&p.specialCauseFourOfFiveUp||p.specialCauseShiftUp||p.specialCauseTrendUp)&&(p.specialCauseSinglePointDown||p.specialCauseTwoOfThreeDown||s.enableFourOfFiveRule&&p.specialCauseFourOfFiveDown||p.specialCauseShiftDown||p.specialCauseTrendDown)&&d.push({code:"variation_conflict_row",category:"logic",severity:"warning",message:`Row ${p.rowId}: simultaneous high/low special-cause signals â€“ variation icon may be ambiguous.`,context:{rowId:p.rowId}});if(s.maximumPoints&&Number.isFinite(s.maximumPoints)){const p=s.maximumPoints;let b=0;for(const w of u)!w.ghost&&ke(w.value)&&b++,b>p&&(w.mean=w.upperProcessLimit=w.lowerProcessLimit=null,w.upperTwoSigma=w.lowerTwoSigma=w.upperOneSigma=w.lowerOneSigma=null)}if(s.nullValueWarning&&(t===$t.XmR||t===$t.G)){const p=l.filter(b=>!b.ghost&&(b.value===null||b.value===void 0||!ke(b.value))).length;p&&d.push({code:"null_values_excluded",category:"data",severity:"info",message:`${p} null/missing value(s) excluded from calculations.`,context:{nullCount:p}})}if(s.targetSuppressedWarning&&(t===$t.T||t===$t.G)&&l.some(b=>ke(b.target))&&d.push({code:"target_ignored_rare_event",category:"target",severity:"info",message:`Targets provided are ignored for ${t} charts in this port.`,context:{chartType:t}}),s.ghostOnRareEventWarning&&(t===$t.T||t===$t.G)){const p=l.filter(b=>b.ghost).length;p&&d.push({code:"ghost_rows_rare_event",category:"ghost",severity:"info",message:`${p} ghost row(s) supplied for rare-event chart (${t}); verify intent.`,context:{chartType:t,ghostCount:p}})}if(s.partitionSizeWarnings&&Object.entries(y).forEach(([p,b])=>{b<s.minimumPointsPartition&&d.push({code:"insufficient_points_partition",category:"partition",severity:"warning",message:`Partition ${p} has only ${b} non-ghost point(s); below recommended ${s.minimumPointsPartition}.`,context:{partitionId:Number(p),count:b,minimum:s.minimumPointsPartition}})}),s.baselineSpecialCauseWarning){const p=[];u.forEach(b=>{l[b.rowId-1].baseline&&(b.specialCauseSinglePointUp||b.specialCauseSinglePointDown||b.specialCauseTwoOfThreeUp||b.specialCauseTwoOfThreeDown||b.specialCauseFourOfFiveUp||b.specialCauseFourOfFiveDown||b.specialCauseShiftUp||b.specialCauseShiftDown||b.specialCauseTrendUp||b.specialCauseTrendDown)&&p.push(b.rowId)}),p.length&&d.push({code:"baseline_with_special_cause",category:"baseline",severity:"warning",message:`Baseline set with special-cause present at row(s): ${p.join(", ")}.`,context:{rows:p}})}s.maximumPointsWarnings&&(s.maximumPointsPartition&&Number.isFinite(s.maximumPointsPartition)&&d.push({code:"partition_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after ${s.maximumPointsPartition} non-ghost points per partition.`,context:{cap:s.maximumPointsPartition}}),s.maximumPoints&&Number.isFinite(s.maximumPoints)&&d.push({code:"global_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after global cap of ${s.maximumPoints} non-ghost points.`,context:{cap:s.maximumPoints}}));let h;if(s.baselineSuggest){const p=s.baselineSuggestStabilityPoints,b=s.baselineSuggestMinGap,w=s.baselineSuggestMinDeltaSigma,D=s.baselineSuggestScoreThreshold;h=L1(u.map(v=>({value:v.value,partitionId:v.partitionId,variationIcon:v.variationIcon,mean:v.mean,upperProcessLimit:v.upperProcessLimit})),{W:p,minGap:b,minDeltaSigma:w,scoreThreshold:D,isShiftUpAt:v=>!!u[v].specialCauseShiftUp,isShiftDownAt:v=>!!u[v].specialCauseShiftDown,isTrendUpAt:v=>!!u[v].specialCauseTrendUp,isTrendDownAt:v=>!!u[v].specialCauseTrendDown,isSingleUpAt:v=>!!u[v].specialCauseSinglePointUp,isSingleDownAt:v=>!!u[v].specialCauseSinglePointDown}).map(v=>({index:v.index,reason:v.reason,score:v.score,deltaMean:v.deltaMean,oldMean:v.oldMean,newMean:v.newMean,window:v.window}))}return{rows:u,warnings:d,...h?{suggestedBaselines:h}:{}}}function zf(e,t){return e==="improvement"?Ce.SpecialCauseImproving:e==="concern"?Ce.SpecialCauseDeteriorating:e==="suppressed"||e==="neither"&&t?Ce.SpecialCauseNoJudgement:e==="neither"?Ce.CommonCause:null}function B1(e,t){return e==="improvement"||e==="concern"||e==="suppressed"||e==="neither"&&!!t}function R1(e){const t=e.replace("#","");return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Uf(e){const{values:t,x:n,chartType:r=Mt.XmR,metricImprovement:i=Fe.Neither,showLimits:a=!0,showLimitBand:s=!1,showInnerBands:l=!1,showMean:c=!1,autoClassify:u=!0}=e,d=Z.useMemo(()=>{const v=[];for(let T=0;T<t.length;T++)v.push({x:n?.[T],value:t[T]});return v},[t,n]),f=Z.useMemo(()=>{try{const v=d.map((T,k)=>({x:T.x??k,value:T.value}));return Hf({chartType:r,metricImprovement:i,data:v,settings:{}})}catch{return null}},[d,r,i]),m=Z.useMemo(()=>{const v=f?.rows;if(!v||v.length===0)return null;for(let T=v.length-1;T>=0;T--){const k=v[T];if(k&&k.value!=null&&!k.ghost)return k}return v[v.length-1]??null},[f]),g=Z.useMemo(()=>{const v=f?.rowsRepresentative??f?.rows;if(!v||!Array.isArray(v)||v.length===0)return null;const T=v[v.length-1];return zf(T?.variationIcon,(T?.specialCauseNeitherValue??null)!=null)},[f]),y=Z.useMemo(()=>m?.mean??null,[m]),h=Z.useMemo(()=>{if(!m)return null;const v=m?.lowerProcessLimit??null,T=m?.upperProcessLimit??null;return v==null&&T==null?null:{lower:v,upper:T}},[m]),p=Z.useMemo(()=>m?{upperOne:m?.upperOneSigma??null,upperTwo:m?.upperTwoSigma??null,lowerOne:m?.lowerOneSigma??null,lowerTwo:m?.lowerTwoSigma??null}:null,[m]),b=Z.useMemo(()=>{const v=f?.rows;if(!(!v||v.length===0))return v.map(T=>{const k=!!T?.specialCauseSinglePointUp||!!T?.specialCauseTwoOfThreeUp||!!T?.specialCauseFourOfFiveUp||!!T?.specialCauseShiftUp||!!T?.specialCauseTrendUp,C=!!T?.specialCauseSinglePointDown||!!T?.specialCauseTwoOfThreeDown||!!T?.specialCauseFourOfFiveDown||!!T?.specialCauseShiftDown||!!T?.specialCauseTrendDown;switch(i){case Fe.Up:return k?"improvement":C?"concern":"neither";case Fe.Down:return C?"improvement":k?"concern":"neither";case Fe.Neither:default:return"neither"}})},[f,i]),w=Z.useMemo(()=>{const v=f?.rows;if(!(!v||v.length===0))return v.map(T=>!!T?.specialCauseNeitherValue)},[f]),D=Z.useMemo(()=>{let v=null;if(m&&m.value!=null&&!m.ghost){const L=m.variationIcon,N=(m?.specialCauseNeitherValue??null)!=null;g===Ce.SpecialCauseNoJudgement?v=B1(L,N)?Ce.SpecialCauseNoJudgement:Ce.CommonCause:v=zf(L,N)??Ce.CommonCause}const T=v??Ce.CommonCause,k=es[T].hex,[C,x,I]=R1(k),M=Za();return{"--fdp-metric-card-bg":`linear-gradient(180deg, rgba(${C}, ${x}, ${I}, ${M.start}) 0%, rgba(${C}, ${x}, ${I}, ${M.mid}) 50%, rgba(${C}, ${x}, ${I}, ${M.end}) 100%)`,"--fdp-metric-card-accent":k}},[m,g]);return{sparkProps:Z.useMemo(()=>({data:d,showMean:c,showLimits:a,showLimitBand:s,showInnerBands:l,metricImprovement:i,centerLine:y,controlLimits:h,sigmaBands:p,pointSignals:b,pointNeutralSpecialCause:w,variationState:g??void 0,autoClassify:!!(u&&!g),onClassification:()=>{}}),[d,c,a,s,l,i,u,g,y,h?.lower,h?.upper,p?.upperOne,p?.upperTwo,p?.lowerOne,p?.lowerTwo,b?.length,w?.length]),metricCardStyle:D,latestState:g}}function Wf(e){if(e==null)return;const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.valueOf())?void 0:t}function O1(e,t,n){const r=new Array(e),i=new Date(t);for(let a=0;a<e;a++)switch(r[a]=new Date(i),n){case"hourly":i.setHours(i.getHours()+1);break;case"daily":i.setDate(i.getDate()+1);break;case"weekly":i.setDate(i.getDate()+7);break;case"monthly":i.setMonth(i.getMonth()+1);break;case"quarterly":i.setMonth(i.getMonth()+3);break;case"annually":i.setFullYear(i.getFullYear()+1);break}return r}function H1(e,t){const n=e.filter(Boolean);if(n.length<2)return t;const r=[];for(let c=1;c<n.length;c++)r.push(n[c].getTime()-n[c-1].getTime());const i=r.sort((c,u)=>c-u),a=i[Math.floor(i.length/2)],s=3600*1e3,l=24*s;return a<=2*s?"hourly":a<=2*l?"daily":a<=10*l?"weekly":a<=45*l?"monthly":a<=120*l?"quarterly":"annually"}function Vf(e,t){if(e)try{switch(t){case"hourly":return new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"}).format(e);case"daily":return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e);case"weekly":return`Week of ${new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}`;case"monthly":return new Intl.DateTimeFormat(void 0,{month:"short",year:"numeric"}).format(e);case"quarterly":return`Q${Math.floor(e.getMonth()/3)+1} ${e.getFullYear()}`;case"annually":return`${e.getFullYear()}`;default:return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}}catch{return}}function z1(e,t,n,r="0-100"){if(t)return t;if(n)return n;const i=e.filter(l=>l!=null);if(!i.length)return;const a=Math.min(...i),s=Math.max(...i);if(r==="0-1"){if(a>=0&&s<=1&&s>0)return"%"}else if(a>=0&&s<=100&&s>0)return"%"}function U1(e,t,n=1){switch(e||t){case"hourly":return n===1?"last hour":`last ${n} hours`;case"daily":return n===1?"last day":`last ${n} days`;case"weekly":return n===1?"last week":`last ${n} weeks`;case"monthly":return n===1?"last month":`last ${n} months`;case"quarterly":return n===1?"last quarter":`last ${n} quarters`;case"annually":return n===1?"last year":`last ${n} years`;default:return"previous"}}function Gf(e){const{values:t,dates:n,intervalHint:r,startDate:i,providedUnit:a,defaultUnit:s,autoValue:l=!0,autoDelta:c=!0,autoMetadata:u=!0,deltaConfig:d}=e,f=t.map(x=>typeof x=="number"?x:x==null?null:Number(x));let m=-1;for(let x=f.length-1;x>=0;x--)if(f[x]!=null){m=x;break}let g=(n||[]).map(Wf);if(!g.some(Boolean)){const x=Wf(i);x&&r?g=O1(f.length,x,r):g=new Array(f.length).fill(void 0)}const h=H1(g,r),p=z1(f,a,s,e.percentHeuristic),b=l&&m>=0&&f[m]!=null?f[m]:void 0,w={strategy:"previous",n:1,absolute:!0,skipNulls:!0,...d||{}};function D(){if(m<0)return-1;if(w.strategy==="previous"||w.strategy==="n-points"){let L=m-(w.strategy==="previous"?1:Math.max(1,w.n||1));if(!w.skipNulls)return L;for(let N=L;N>=0;N--)if(f[N]!=null)return N;return-1}const x=g[m];if(!x)return-1;const I=new Date(x);I.setFullYear(I.getFullYear()-1);let M=-1,j=1/0;for(let L=0;L<g.length;L++){const N=g[L];if(!N||f[L]==null)continue;const F=Math.abs(N.getTime()-I.getTime());F<j&&(j=F,M=L)}return M}const S=D(),v=S>=0?f[S]:null;let T;if(c&&b!=null&&v!=null){const x=b-v,I=w.absolute!==!1,M=I?x:v===0?0:x/Math.abs(v)*100;T={value:Number.isFinite(M)?Number(M.toFixed(2)):0,isPercent:I?p==="%":!0,period:`vs ${U1(h,r,w.strategy==="n-points"?Math.max(1,w.n||1):1)}`}}const k=m>=0?g[m]:void 0,C=u&&Vf(k,h)?`Latest: ${Vf(k,h)}`:void 0;return{value:b,unit:p,delta:T,metadata:C,latestDate:k,frequency:h}}const W1=({sparkData:e,direction:t=Fe.Neither,showMean:n=!1,showLimits:r=!0,showLimitBand:i=!1,showInnerBands:a=!1,autoClassify:s=!0,maxPoints:l,autoValue:c=!0,autoDelta:u=!0,autoMetadata:d=!0,defaultUnit:f,intervalHint:m,startDate:g,deltaConfig:y,...h})=>{const p=Uf({values:e.map(k=>k.value??null),metricImprovement:t,showLimits:r,showLimitBand:i,showInnerBands:a,showMean:n,autoClassify:s}),b=o.jsx(Ef,{...p.sparkProps,maxPoints:l}),w=Z.useMemo(()=>Gf({values:e.map(k=>typeof k.value=="number"?k.value:null),dates:e.map(k=>k.date),intervalHint:m,startDate:g,providedUnit:h.unit,defaultUnit:f,autoValue:c,autoDelta:u,autoMetadata:d,deltaConfig:y}),[e,m,g,h.unit,f,c,u,d,y]),D=c&&w.value!=null?w.value:h.value,S=u&&w.delta?w.delta:h.delta,v=w.unit||h.unit,T=d&&w.metadata?w.metadata:h.metadata;return o.jsx(mf,{...h,value:D,unit:v,delta:S,metadata:T,visual:b,style:p.metricCardStyle})};function V1({warnings:e,show:t,formatWarningCategory:n,formatWarningCode:r}){const[i,a]=Z.useState(""),s=Z.useRef("");return Z.useEffect(()=>{if(!t){s.current!==""&&(s.current="",a(""));return}const l=e.length;if(!l){const f="Diagnostics: no warnings.";f!==s.current&&(s.current=f,a(f));return}const c={error:e.filter(f=>f.severity===hn.Error).length,warning:e.filter(f=>f.severity===hn.Warning).length,info:e.filter(f=>f.severity===hn.Info).length},u=[];c.error&&u.push(`${c.error} error${c.error===1?"":"s"}`),c.warning&&u.push(`${c.warning} warning${c.warning===1?"":"s"}`),c.info&&u.push(`${c.info} info`);const d=`Diagnostics updated: ${l} warning${l===1?"":"s"} (${u.join(", ")}).`;d!==s.current&&(s.current=d,a(d))},[t,e]),t?o.jsxs(o.Fragment,{children:[i&&o.jsx("div",{"data-testid":"spc-diagnostics-live","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:0,overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",border:0},children:i}),e.length>0&&o.jsxs("div",{className:"fdp-spc-chart__warnings",role:"region","aria-label":"SPC diagnostics",children:[o.jsx("p",{className:"fdp-spc-chart__warnings-heading",children:"Diagnostics"}),o.jsx(cn,{firstCellIsHeader:!1,panel:!1,responsive:!1,head:[{text:"Severity"},{text:"Category"},{text:"Code"},{text:"Details"}],rows:e.map(l=>{let c="grey";return l.severity===hn.Error?c="red":l.severity===hn.Warning?c="orange":l.severity===hn.Info&&(c="blue"),[{node:o.jsx(We,{color:c,text:(l.severity?String(l.severity):"Info").replace(/^[a-z]/,u=>u.toUpperCase())}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--severity"},{node:l.category?o.jsx(We,{color:"purple",text:n(l.category)}):o.jsx("span",{className:"fdp-spc-chart__warning-empty",children:"â€“"}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--category"},{node:o.jsx(We,{color:"grey",text:r(l.code)}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--code"},{node:o.jsxs("div",{className:"fdp-spc-chart__warning-message",children:[o.jsx("span",{children:l.message}),l.context&&Object.keys(l.context).length>0&&o.jsxs("details",{className:"fdp-spc-chart__warning-context",style:{marginTop:4},children:[o.jsx("summary",{children:"context"}),o.jsx("pre",{children:JSON.stringify(l.context,null,2)})]})]}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--message"}]}),classes:"fdp-spc-chart__warnings-table-wrapper",tableClasses:"fdp-spc-chart__warnings-table"})]})]}):null}function G1({variationNode:e,assuranceNode:t,show:n}){return n?o.jsxs("div",{className:"fdp-spc-chart__top-row",style:{display:"flex",justifyContent:"flex-end",marginBottom:4},children:[e,t]}):null}const al=({status:e,size:t=44,ariaLabel:n,dropShadow:r=!0,colourOverride:i,gradientWash:a=!1,letterOverride:s,showTrendLines:l=!0,...c})=>{const u=E.useId(),d=E.useId(),{start:f,mid:m,end:g}=Za(),y=i||s1[e],h=(s||o1[e]).slice(0,2),p=n||`Assurance ${e}`;return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":p,...c,children:[o.jsxs("defs",{children:[r&&o.jsxs("filter",{id:u,filterUnits:"objectBoundingBox",children:[o.jsx("feGaussianBlur",{stdDeviation:"3"}),o.jsx("feOffset",{dx:"-1",dy:"15",result:"blur"}),o.jsx("feFlood",{floodColor:"rgb(166,166,166)",floodOpacity:"1"}),o.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),a&&o.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:y,stopOpacity:parseFloat(f)}),o.jsx("stop",{offset:"65%",stopColor:y,stopOpacity:parseFloat(m)}),o.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:parseFloat(g)})]})]}),o.jsx("circle",{stroke:"none",fill:a?`url(#${d})`:"#ffffff",...r?{filter:`url(#${u})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("text",{fill:y,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,x:0,y:0,transform:"translate(121.01, 32) scale(0.5, 0.5)",textAnchor:"middle",children:o.jsx("tspan",{x:60,y:184,children:h})}),l&&o.jsxs(o.Fragment,{children:[e===fr.Fail?o.jsx("path",{id:"fail-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 33,143 L 268,143"}):e===fr.Uncertain?o.jsx("path",{id:"uncertain-line",stroke:"rgb(166, 166, 166)",strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"16.5,10",strokeDashoffset:0,fill:"none",d:"M 36,174 L 266,174"}):o.jsx("path",{id:"pass-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 48,204 L 254,204"}),o.jsx("path",{id:"data-sparkline",stroke:"rgb(166, 166, 166)",strokeWidth:12,strokeMiterlimit:12,fill:"none",d:"M 59.9,187.91 C 72.79,171.72 87.33,158.06 104.4,157.83 121.91,158.58 140.94,187.85 153.4,189.91 164.1,192.12 163.78,171.38 169.17,170.53 172.87,169.55 174.88,187.45 184.94,189.24 197,191.86 230.54,184.47 239.01,185.9"}),o.jsx("circle",{stroke:y,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"})]})]})};al.displayName="SPCAssuranceIcon";const Y1=Object.freeze(Object.defineProperty({__proto__:null,AssuranceResult:fr,Direction:Me,MetricPolarity:ft,SPCAssuranceIcon:al,SPCVariationIcon:rl,VariationJudgement:Lt,VariationState:Ce,getVariationColour:_f,getVariationTrend:Zo},Symbol.toStringTag,{value:"Module"}));function q1(e){const{show:t,rowsForUi:n,minPoints:r,metricImprovement:i,variant:a,runLength:s}=e;if(!t||!n?.length)return null;const l=n,c=typeof r=="number"&&!isNaN(r)?r:13;if(l.filter(v=>!v.data.ghost&&v.data.value!=null).length<c)return null;let d=-1;for(let v=l.length-1;v>=0;v--){const T=l[v];if(T&&T.data.value!=null&&!T.data.ghost){d=v;break}}if(d===-1)return null;const f=l[d],m=f.classification?.variation,g=f.classification?.assurance,y=m===je.Neither&&!!f.classification?.neutralSpecialCauseValue,h=g===it.Pass?fr.Pass:g===it.Fail?fr.Fail:fr.Uncertain;let p;if(m===je.Suppressed){const v=!!f.rules.singlePoint.up,T=!!f.rules.singlePoint.down;i===ze.Up?v?p=Me.Higher:T&&(p=Me.Lower):i===ze.Down?T?p=Me.Lower:v&&(p=Me.Higher):p=Me.Higher}else if(m===je.Neither&&y){const v=f.rules.singlePoint.up||f.rules.twoOfThree.up||f.rules.fourOfFive.up||f.rules.shift.up||f.rules.trend.up,T=f.rules.singlePoint.down||f.rules.twoOfThree.down||f.rules.fourOfFive.down||f.rules.shift.down||f.rules.trend.down;v&&!T?p=Me.Higher:T&&!v?p=Me.Lower:p=Me.Higher}const b=80,w=f.rules.singlePoint.up||f.rules.twoOfThree.up||f.rules.fourOfFive.up||f.rules.shift.up||f.rules.trend.up,D=f.rules.singlePoint.down||f.rules.twoOfThree.down||f.rules.fourOfFive.down||f.rules.shift.down||f.rules.trend.down;let S=Ee.CommonCause;return m===je.Improvement?S=Ee.ImprovementHigh:m===je.Concern?S=Ee.ConcernHigh:m===je.Neither&&(y?p===Me.Lower||D&&!w?S=Ee.NeitherLow:S=Ee.NeitherHigh:S=Ee.CommonCause),o.jsxs("div",{style:{display:"flex",gap:12,marginRight:16},children:[o.jsx("div",{className:"fdp-spc-chart__embedded-icon","data-variation":String(m),"data-trend":p?String(p):"none",style:{width:b,height:b},children:o.jsx(rl,{dropShadow:!1,data:{variationIcon:S,improvementDirection:i,specialCauseNeutral:y,highSideSignal:w,lowSideSignal:D,...p?{trend:p}:{}},letterMode:i===ze.Neither?"Direction":"Polarity",size:b,variant:a,runLength:a===mr.TriangleWithRun?s:void 0})}),o.jsx("div",{className:"fdp-spc-chart__embedded-assurance-icon","data-assurance":String(g),style:{width:b,height:b},children:o.jsx(al,{status:h,size:b,dropShadow:!1})})]},`embedded-icon-${d}`)}const Yf=({engineRows:e,limits:t,pointDescriber:n,measureName:r,measureUnit:i,dateFormatter:a,enableNeutralNoJudgement:s=!0,showTrendGatingExplanation:l=!0})=>{const c=Ln(),u=Yn(),[d,f]=Z.useState(null),[m,g]=Z.useState(!1),y=Z.useRef(null);Z.useEffect(()=>{if(c){if(c.focused&&(f(c.focused),y.current&&(cancelAnimationFrame(y.current),y.current=null)),!c.focused&&!m){const ae=requestAnimationFrame(()=>{f(null),y.current=null});y.current=ae}return()=>{y.current&&(cancelAnimationFrame(y.current),y.current=null)}}},[c,c?.focused,m]);const h=c&&(c.focused||(m?d:null)||d),[p,b]=Z.useState(!1);Z.useEffect(()=>{const ae=requestAnimationFrame(()=>b(!0));return()=>cancelAnimationFrame(ae)},[h?.index]);const w=u?.innerWidth??0,D=u?.innerHeight??0,S=h?Math.min(Math.max(h.clientX,0),w):0,v=h?Math.min(Math.max(h.clientY,0),D):0,T=u?.ref?.current||void 0;if(!h)return null;const k=e?.[h.index],x=Ja(k?{specialCauseSinglePointUp:!!k.rules.singlePoint.up,specialCauseSinglePointDown:!!k.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!k.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!k.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!k.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!k.rules.fourOfFive.down,specialCauseShiftUp:!!k.rules.shift.up,specialCauseShiftDown:!!k.rules.shift.down,specialCauseTrendUp:!!k.rules.trend.up,specialCauseTrendDown:!!k.rules.trend.down}:null).map(ae=>({id:ae,label:Rr[ae].tooltip})),I=h.x instanceof Date?h.x:new Date(h.x),M=a?a(I):I.toDateString(),j=i?`${i}`:"",L=r||j?`${h.y}${j?""+j:" "}${r?" "+r:""}`:`${h.y}`,N=Qa(k?.classification?.variation),F=yf(k?.classification?.assurance),P=i1(t.mean??null,t.sigma,h.y),$=n?n(h.index,{x:h.x,y:h.y}):void 0,ne=N||F||P,X=k?.rules.trend.up||k?.rules.trend.down,O=k?.classification?.variation===je.Neither&&X,H=l&&O?"Trend detected (monotonic run) â€“ held neutral until values cross onto the favourable side of the mean.":null,z=x.length>0,re=k&&"primeDirection"in k?k.primeDirection:void 0,U=k&&"primeRuleId"in k?k.primeRuleId:void 0,de=s&&k?.classification?.variation===je.Neither&&z,ye="var(--nhs-fdp-color-primary-yellow, #ffeb3b)",ue=vf(k?.classification?.variation),ce=6.2,ie=[$||"",`${M} â€¢ ${L}`].filter(Boolean).reduce((ae,B)=>Math.max(ae,B.length*ce+32),0),fe=200,Y=440,he=Math.min(Y,Math.max(fe,ie));let oe=S+12,R=(u.margin?.top??0)+v+16;oe+he>w&&(oe=S- -60-he),oe<0&&(oe=Math.max(0,w-he));const V=h?`spc-tooltip-${h.index}`:"spc-tooltip",le=typeof h.index=="number"?h.index:NaN,me=T?Z0.createPortal(o.jsx("div",{id:V,className:"fdp-spc-tooltip fdp-spc-tooltip-portal"+(p?" is-visible":""),style:{position:"absolute",left:oe,top:R,width:he,maxWidth:Y,zIndex:10,pointerEvents:"auto",userSelect:"none"},role:"tooltip","aria-live":"polite","aria-hidden":p?"false":"true","data-floating":!0,"data-placement":oe+he+12>w?"left":"right",onPointerEnter:()=>{g(!0),y.current&&(cancelAnimationFrame(y.current),y.current=null)},onPointerLeave:()=>{if(g(!1),!c?.focused){const ae=requestAnimationFrame(()=>{f(null),y.current=null});y.current=ae}},children:o.jsxs("div",{className:"fdp-spc-tooltip__body",children:[o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--point",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Point"})}),o.jsxs("div",{className:"fdp-spc-tooltip__primary-line",children:["Index: ",le]})]}),o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--date",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Date"})}),o.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:M})]}),o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--value",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Value"})}),o.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:L})]}),ne&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--signals",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Signals"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Signals",children:N?.toLowerCase().includes("concern")?o.jsx(We,{text:N,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):N?.toLowerCase().includes("improvement")?o.jsx(We,{text:N,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):de?o.jsx(We,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):N?o.jsx(We,{text:N,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null})]}),F&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--assurance",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Assurance"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:(()=>{const ae=F.toLowerCase(),W=!(ae.includes("not met")||ae.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(ae);return o.jsx(We,{text:F,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${W?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${F}`})})()})]}),P&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--limits",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Control Limits & Sigma"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:o.jsx(We,{text:(()=>{const ae=P.toLowerCase();return ae.startsWith("within 1")?"â‰¤1Ïƒ":ae.startsWith("1â€“2")?"1â€“2Ïƒ":ae.startsWith("2â€“3")?"2â€“3Ïƒ":ae.startsWith(">3")?">3Ïƒ":P})(),color:P.includes(">3")?"orange":P.includes("2â€“3")?"yellow":"grey","aria-label":`Sigma zone: ${P}`,className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--zone"})})]}),H&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--gating","data-gating":!0,children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Trend gating"})}),o.jsx("div",{className:"fdp-spc-tooltip__explanation","aria-live":"off",children:H})]}),z&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Special cause"})}),o.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",children:x.map(({id:ae,label:B})=>{const W=String(ae),G=W===Tt.TrendIncreasing||W===Tt.TrendDecreasing?"fdp-spc-tag--trend":de?"fdp-spc-tag--no-judgement":N?N.toLowerCase().includes("concern")?"fdp-spc-tag--concern":N.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common";return o.jsx(We,{text:B,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${G}`,"data-rule-id":W},W)})}),re&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",style:{marginTop:16},children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",style:{marginBottom:6},children:o.jsx("strong",{children:"Prime Direction"})}),(()=>{const ae=de?"fdp-spc-tag--no-judgement":N?N.toLowerCase().includes("concern")?"fdp-spc-tag--concern":N.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",B=`${re}${U?` (${U})`:""}`;return o.jsx(We,{text:B,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${ae}`,"aria-label":`Prime direction ${re}${U?` via ${U}`:""}`})})()]})]})]})}),T):null;return o.jsxs("g",{className:"fdp-tooltip-layer fdp-spc-tooltip",pointerEvents:"none","aria-hidden":"true",children:[o.jsx("circle",{cx:S,cy:v,r:7,fill:"none",stroke:ye,strokeWidth:3}),o.jsx("circle",{cx:S,cy:v,r:5,fill:"#000",stroke:ye,strokeWidth:1.5}),o.jsx("circle",{cx:S,cy:v,r:2.5,fill:ue,stroke:"#fff",strokeWidth:.5}),me]})},X1=({engineRows:e,measureName:t,measureUnit:n,onSignalFocus:r})=>{const i=Ln(),a=i?.focused??null,s=a?.index??null,l=typeof s=="number"&&e?e[s]:null,c=Z.useMemo(()=>l?Ja({specialCauseSinglePointUp:!!l.rules.singlePoint.up,specialCauseSinglePointDown:!!l.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!l.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!l.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!l.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!l.rules.fourOfFive.down,specialCauseShiftUp:!!l.rules.shift.up,specialCauseShiftDown:!!l.rules.shift.down,specialCauseTrendUp:!!l.rules.trend.up,specialCauseTrendDown:!!l.rules.trend.down}):[],[l]),u=Z.useMemo(()=>Array.from(new Set(c.map(h=>Rr[h]?.narration).filter(Boolean))),[c]),d=l?Qa(l.classification?.variation):null,f=l?yf(l.classification?.assurance):null,m=c.length>0,g=l?l.classification?.variation===je.Neither&&m:!1,y=Z.useRef(null);return Z.useEffect(()=>{if(!r||!a||l==null)return;const h=`${a.seriesId}:${a.index}`;if(y.current!==h){y.current=h;try{r({index:a.index,x:a.x,y:a.y,row:l,rules:c})}catch{}}},[a?.seriesId,a?.index,a?.x,a?.y,l,c,r]),o.jsxs("div",{className:"fdp-spc-inspector",role:"region","aria-label":"Signals inspector","data-testid":"spc-signals-inspector",children:[o.jsxs("div",{className:"fdp-spc-inspector__header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsx("strong",{children:"Signals inspector"}),o.jsx("div",{className:"fdp-spc-inspector__nav","aria-hidden":!i,children:i&&o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{i.focused?i.focusPrevPoint():i.focusFirstPoint()},"aria-label":"Previous point",children:"â—€"}),o.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{i.focused?i.focusNextPoint():i.focusFirstPoint()},"aria-label":"Next point",children:"â–¶"})]})})]}),!l||!a?o.jsx("p",{className:"fdp-spc-inspector__empty",children:"No point selected."}):o.jsxs("div",{className:"fdp-spc-inspector__body",children:[o.jsxs("div",{className:"fdp-spc-inspector__summary",style:{display:"flex",gap:16,flexWrap:"wrap"},children:[o.jsxs("span",{children:[o.jsx("strong",{children:"Point:"})," ",a.index+1]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Value:"})," ",a.y,n?` ${n}`:"",t?` ${t}`:""]})]}),(d||g||f)&&o.jsx("div",{className:"fdp-spc-inspector__signals",style:{marginTop:8},children:o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[d?.toLowerCase().includes("concern")?o.jsx(We,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):d?.toLowerCase().includes("improvement")?o.jsx(We,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):g?o.jsx(We,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):d?o.jsx(We,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null,f&&(()=>{const h=f.toLowerCase(),b=!(h.includes("not met")||h.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(h);return o.jsx(We,{text:f,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${b?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${f}`})})()]})}),o.jsxs("div",{className:"fdp-spc-inspector__rules",style:{marginTop:8},children:[o.jsx("strong",{children:"Special cause:"}),o.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:4},children:c.length===0?o.jsx("span",{children:" None"}):c.map(h=>{const p=String(h),w=p===Tt.TrendIncreasing||p===Tt.TrendDecreasing?"fdp-spc-tag--trend":g?"fdp-spc-tag--no-judgement":d?d.toLowerCase().includes("concern")?"fdp-spc-tag--concern":d.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",D=Rr[h]?.tooltip||p;return o.jsx(We,{text:D,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${w}`,"data-rule-id":p,title:Rr[h]?.tooltip},p)})})]}),u.length>0&&o.jsxs("div",{className:"fdp-spc-inspector__narration",style:{marginTop:8},children:[o.jsx("strong",{children:"Summary:"})," ",u.join("; ")]})]})]})};function Z1(e,t=!0){if(!e?.length)return[];const n=[...e];if(t){for(let a=1;a<n.length-1;a++)n[a]===pt.Common&&n[a-1]===n[a+1]&&n[a-1]!==pt.Common&&(n[a]=n[a-1]);let i=0;for(;i<n.length;){const a=n[i];let s=i+1;for(;s<n.length&&n[s]===a;)s++;s-i===1&&a!==pt.Common&&(n[i]=pt.Common),i=s}}const r=[];if(n.length){let i=0;for(let a=1;a<=n.length;a++)if(a===n.length||n[a]!==n[i]){const s=n[i],l=a-1,c=l-i+1;(s===pt.Common||c>=2)&&r.push({start:i,end:l,category:s}),i=a}}return r}var Ni=(e=>(e.Slope="slope",e.Neutral="neutral",e.Extend="extend",e))(Ni||{}),qf=(e=>(e.Ungated="ungated",e.Gated="gated",e))(qf||{});function K1(e){const{ui:t,input:n,engine:r,container:i,a11y:a,visualsEngine:s,meta:l,data:c,ariaLabel:u,height:d,showZones:f,showPoints:m,announceFocus:g,className:y,unit:h,targets:p,baselines:b,ghosts:w,settings:D,chartType:S,metricImprovement:v,gradientSequences:T,sequenceTransition:k,processLineWidth:C,showPartitionMarkers:x,showWarningsPanel:I,warningsFilter:M,enableNeutralNoJudgement:j,showTrendGatingExplanation:L,trendVisualMode:N,alwaysShowZeroY:F,alwaysShowHundredY:P,percentScale:$,showTrendStartMarkers:ne,showFirstFavourableCrossMarkers:X,showTrendBridgeOverlay:O,showSignalsInspector:H,onSignalFocus:z,showIcons:re,showEmbeddedIcon:U,embeddedIconVariant:de,embeddedIconRunLength:ye,showFocusIndicator:ue,visualsScenario:ce,visualsEngineSettings:Q,source:ie,narrationContext:fe,highlightOutOfControl:Y}=e;process.env.NODE_ENV!=="production"&&(!n&&(p!==void 0||b!==void 0||w!==void 0)&&console.warn("SPCChart: Flat input props (targets/baselines/ghosts) are deprecated. Use input={{ data, targets, baselines, ghosts }} instead."),!r&&D!==void 0&&console.warn("SPCChart: Flat engine prop 'settings' is deprecated. Use engine={{ chartType, metricImprovement, settings }}."),!i&&(d!==void 0||y!==void 0)&&console.warn("SPCChart: Consider grouped container props. Use container={{ height, className }}."),!a&&(u!==void 0||g!==void 0||fe!==void 0||h!==void 0)&&console.warn("SPCChart: Consider grouped accessibility props. Use a11y={{ label, announceFocus, narrationContext, unit }}."),!s&&(ce!==void 0||Q!==void 0)&&console.warn("SPCChart: Consider grouped visuals engine props. Use visualsEngine={{ scenario, settings }}."),t?.visuals===void 0&&(f!==void 0||m!==void 0)&&console.warn("SPCChart: Visual toggles should be grouped. Use ui={{ visuals: { showZones, showPoints } }}."),t?.visuals?.rules===void 0&&Y!==void 0&&console.warn("SPCChart: Prefer grouped rules toggle. Use ui={{ visuals: { rules: { highlightOutOfControl } } }}."),!l&&ie!==void 0&&console.warn("SPCChart: Consider grouped meta. Use meta={{ source }}."));const he=n?.data??c??[],oe=n?.targets??p,ge=n?.baselines??b,R=n?.ghosts??w,V=r?.chartType??S??$t.XmR,le=r?.metricImprovement??v??ze.Neither,me=r?.settings??D,ae=r?.autoRecalc,B=t?.axes?.alwaysShowZeroY??F??!0,W=t?.axes?.alwaysShowHundredY??P??!1,ee=t?.axes?.percentScale??$??!1,G=t?.visuals?.gradientSequences??T??!1,A=t?.visuals?.sequenceTransition??k??"slope",q=t?.visuals?.processLineWidth??C??2,J=t?.visuals?.trend?.visualMode??N??"ungated",te=t?.visuals?.trend?.showGatingExplanation??L??!0,K=t?.visuals?.rules?.enableNeutralNoJudgement??j??!0,se=t?.visuals?.rules?.enableRules??e.enableRules??!0,be=t?.visuals?.showZones,_e=t?.visuals?.showPoints,Se=t?.visuals?.rules?.highlightOutOfControl,Te=i?.height,pe=i?.className,Pe=a?.label,Be=a?.unit,Je=a?.narrationContext,Ue=s?.scenario,gt=s?.settings,rn=l?.source,Xt=t?.overlays?.partitionMarkers??x??!1,Ht=t?.overlays?.trendStartMarkers??ne??!1,qe=t?.overlays?.firstFavourableCrossMarkers??X??!1,st=t?.overlays?.trendBridge??O??!1,zn=t?.inspector?.show??H??!1,Rs=t?.inspector?.onFocus??z,Ie=t?.warnings?.show??I??!1,$e=t?.warnings?.filter??M,rt=t?.icons?.show??re??!1,zt=t?.icons?.embedded?.show??U??!0,It=t?.icons?.embedded?.variant??de??mr.Classic,Zt=t?.icons?.embedded?.runLength??ye,ut=t?.overlays?.focusIndicator??ue??!0;return{effData:he,effTargets:oe,effBaselines:ge,effGhosts:R,effChartTypeCore:V,effMetricImprovementCore:le,effEngineSettings:me,effEngineAutoRecalc:ae,effHeight:Te,effClassName:pe,effAriaLabel:Pe,effUnit:Be,effNarrationContext:Je,effShowZones:be,effShowPoints:_e,effHighlightOutOfControl:Se,effVisualsScenario:Ue,effVisualsEngineSettings:gt,effSource:rn,effAlwaysShowZeroY:B,effAlwaysShowHundredY:W,effPercentScale:ee,effGradientSequences:G,effSequenceTransition:A,effProcessLineWidth:q,effTrendVisualMode:J,effShowTrendGatingExplanation:te,effEnableNeutralNoJudgement:K,effEnableRules:se,effShowPartitionMarkers:Xt,effShowTrendStartMarkers:Ht,effShowFirstFavourableCrossMarkers:qe,effShowTrendBridgeOverlay:st,effShowSignalsInspector:zn,effOnSignalFocus:Rs,effShowWarningsPanel:Ie,effWarningsFilter:$e,effShowIcons:rt,effShowEmbeddedIcon:zt,effEmbeddedIconVariant:It,effEmbeddedIconRunLength:Zt,effShowFocusIndicator:ut}}let J1=0;const Q1=({series:e,showPoints:t,announceFocus:n,limits:r,showZones:i,highlightOutOfControl:a,engineRows:s,enableRules:l,narrationContext:c,gradientSequences:u,sequenceTransition:d,processLineWidth:f,effectiveUnit:m,partitionMarkers:g,ariaLabel:y,metricImprovement:h,enableNeutralNoJudgement:p=!0,showTrendGatingExplanation:b=!0,showTrendStartMarkers:w=!1,showFirstFavourableCrossMarkers:D=!1,showTrendBridgeOverlay:S=!1,showSignalsInspector:v=!1,onSignalFocus:T,visualCategories:k,uniformTarget:C,showFocusIndicator:x=!1,zeroBreakSlotGapPx:I})=>{const M=ur(),j=Yn();if(!M)return null;const{xScale:L,yScale:N}=M,F=Z.useRef("spc-seq-"+ ++J1),P=Ln(),$=e[0]?.data||[],ne=Z.useMemo(()=>{if(!r.ucl&&!r.lcl)return new Set;const R=new Set;return $.forEach((V,le)=>{typeof r.ucl=="number"&&V.y>r.ucl&&R.add(le),typeof r.lcl=="number"&&V.y<r.lcl&&R.add(le)}),R},[r.ucl,r.lcl,$]),X=Z.useMemo(()=>{if(!s||!s.length)return null;const R=[];return s.forEach((V,le)=>{const me=V.classification.variation===je.Concern||V.classification.variation===je.Improvement||!!V.classification.neutralSpecialCauseValue,ae=!!V.rules.singlePoint.up||!!V.rules.twoOfThree.up||!!V.rules.fourOfFive.up||!!V.rules.shift.up||!!V.rules.trend.up,B=!!V.rules.singlePoint.down||!!V.rules.twoOfThree.down||!!V.rules.fourOfFive.down||!!V.rules.shift.down||!!V.rules.trend.down;R[le]={variation:V.classification.variation,assurance:V.classification.assurance,special:me,concern:V.classification.variation===je.Concern,improvement:V.classification.variation===je.Improvement,trendUp:!!V.rules.trend.up,trendDown:!!V.rules.trend.down,upAny:ae,downAny:B,neutralSpecial:!!V.classification.neutralSpecialCauseValue,shiftUp:!!V.rules.shift.up,shiftDown:!!V.rules.shift.down,twoOfThreeUp:!!V.rules.twoOfThree.up,twoOfThreeDown:!!V.rules.twoOfThree.down,fourOfFiveUp:!!V.rules.fourOfFive.up,fourOfFiveDown:!!V.rules.fourOfFive.down,partitionId:V.partition.id??null}}),R},[s]),O=Z.useMemo(()=>(k||[]).map(R=>R===_t.Improvement?pt.Improvement:R===_t.Concern?pt.Concern:R===_t.NoJudgement?pt.NoJudgement:pt.Common),[k]),H=Z.useMemo(()=>!u||!O.length?[]:Z1(O,!0),[u,O,y]),z=Z.useMemo(()=>$.map(R=>L(R.x instanceof Date?R.x:new Date(R.x))),[$,L]),re=L.range()[1],U=L.range()[0],de=Z.useMemo(()=>{if(!s||!s.length)return null;let R=Number.POSITIVE_INFINITY,V=Number.POSITIVE_INFINITY;if(s.forEach((G,A)=>{G.rules.trend.up&&(R=Math.min(R,A)),G.rules.trend.down&&(V=Math.min(V,A))}),!Number.isFinite(R)&&!Number.isFinite(V))return null;const le=R<=V,me=le?dn.Up:dn.Down,ae=le?R:V,B=G=>h==null||h===ze.Neither||G==null||typeof G.data.value!="number"||typeof G.limits.mean!="number"?!1:me===dn.Up?h===ze.Up?G.data.value>G.limits.mean:G.data.value<G.limits.mean:h===ze.Down?G.data.value<G.limits.mean:G.data.value>G.limits.mean;let W=null;for(let G=ae;G<s.length;G++){const A=s[G];if(!(le?!!A.rules.trend.up:!!A.rules.trend.down))break;if(B(A)){W=G;break}}let ee=!1;if(W!=null){let G=0;for(let A=W;A<s.length;A++){const q=s[A];if(!(le?!!q.rules.trend.up:!!q.rules.trend.down))break;B(q)&&G++}ee=G>=2}return{direction:me,detectedAt:ae,firstFavourableCrossAt:W,persistedAcrossMean:ee}},[s,h]),ye=Z.useMemo(()=>{if(!s||!s.length)return null;const R=V=>{const le=[];let me=null,ae=null;for(let B=0;B<s.length;B++){const W=s[B],ee=V(W),G=typeof ee=="number"&&!isNaN(ee)?ee:null;if(G==null){me!==null&&ae!=null&&(le.push({x1:z[me],x2:z[B-1],y:N(ae)}),me=null,ae=null);continue}if(me===null){me=B,ae=G;continue}ae!=null&&Math.abs(G-ae)<=1e-9||(ae!=null&&le.push({x1:z[me],x2:z[B-1],y:N(ae)}),me=B,ae=G)}return me!==null&&ae!=null&&le.push({x1:z[me],x2:z[s.length-1],y:N(ae)}),le};return{mean:R(V=>V.limits.mean??null),ucl:R(V=>V.limits.ucl??null),lcl:R(V=>V.limits.lcl??null),onePos:R(V=>V.limits.oneSigma.upper??null),oneNeg:R(V=>V.limits.oneSigma.lower??null),twoPos:R(V=>V.limits.twoSigma.upper??null),twoNeg:R(V=>V.limits.twoSigma.lower??null)}},[s,z,N]),ue=Z.useMemo(()=>H.length?o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:`${F.current}-grad-common`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.28}),o.jsx("stop",{offset:"70%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.12}),o.jsx("stop",{offset:"100%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.045})]}),H.map((R,V)=>{const le=`${F.current}-grad-${V}`;let me,ae=.28,B=.12,W=.045;switch(R.category){case pt.Concern:me="var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",ae=.28,B=.12,W=.045;break;case pt.Improvement:me="var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",ae=.26,B=.11,W=.045;break;case pt.NoJudgement:me="var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",ae=.26,B=.11,W=.045;break;default:me="var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)"}return o.jsxs("linearGradient",{id:le,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:me,stopOpacity:ae}),o.jsx("stop",{offset:"70%",stopColor:me,stopOpacity:B}),o.jsx("stop",{offset:"100%",stopColor:me,stopOpacity:W})]},le)})]}):null,[H]),ce=Z.useMemo(()=>{if(!H.length)return null;const[R]=N.domain(),V=N(R),le=H.map((me,ae)=>{const{start:B,end:W,category:ee}=me;if(B<0||W>=z.length||B>W)return null;const G=z[B],A=z[W];let q="";if(ee===pt.Common){const J=ae>0?H[ae-1]:null,te=ae<H.length-1?H[ae+1]:null,K=J?z[J.end]:U,se=J?N($[J.end].y):V,be=te?z[te.start]:re,_e=te?N($[te.start].y):V;q=`M ${K} ${V}`,q+=` L ${K} ${se}`;for(let Se=B;Se<=W;Se++)q+=` L ${z[Se]} ${N($[Se].y)}`;q+=` L ${be} ${_e}`,q+=` L ${be} ${V} Z`}else{const J=ae>0?H[ae-1]:null,te=ae<H.length-1?H[ae+1]:null,K=J&&J.category!==pt.Common,se=te&&te.category!==pt.Common,be=N($[B].y),_e=N($[W].y);let Se=G,Te=A;if(K){const pe=z[J.end],Pe=N($[J.end].y),Be=$[B].y-$[J.end].y;d===Ni.Slope&&Be>0?(q=`M ${pe} ${Pe} L ${G} ${be}`,Se=pe):(q=`M ${G} ${V} L ${G} ${be}`,Se=G)}else q=`M ${G} ${V} L ${G} ${be}`;for(let pe=B+1;pe<=W;pe++)q+=` L ${z[pe]} ${N($[pe].y)}`;if(q+=` L ${A} ${_e}`,se){const pe=z[te.start],Pe=N($[te.start].y),Be=$[te.start].y-$[W].y;(d===Ni.Slope&&Be<=0||d===Ni.Extend)&&(q+=` L ${pe} ${Pe}`,Te=pe)}if(q+=` L ${Te} ${V}`,q+=` L ${Se} ${V} Z`,d===Ni.Neutral&&K){const pe=z[J.end],Pe=N($[J.end].y),Be=o.jsx("path",{d:`M ${pe} ${V} L ${pe} ${Pe} L ${G} ${be} L ${G} ${V} Z`,fill:`url(#${F.current}-grad-common)`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-wedge-${ae}`);return o.jsxs("g",{children:[Be,o.jsx("path",{d:q,fill:`url(#${F.current}-grad-${ae})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${ae}`)]},`seq-group-${ae}`)}}return o.jsx("path",{d:q,fill:`url(#${F.current}-grad-${ae})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${ae}`)}).filter(Boolean);return o.jsx("g",{className:"fdp-spc__sequence-bgs",children:le})},[H,z,re,N,$,d]),Q=Z.useMemo(()=>{if(!c?.timeframe&&$.length>=2){const R=$.map(W=>W.x instanceof Date?W.x:new Date(W.x)),V=new Date(Math.min(...R.map(W=>W.getTime()))),le=new Date(Math.max(...R.map(W=>W.getTime()))),me=Math.round((le.getTime()-V.getTime())/864e5)||0;if(me<14)return`The chart shows a timeframe of ${me+1} days`;const ae=Math.round(me/7);return ae<20?`The chart shows a timeframe of ${ae} weeks`:`The chart shows a timeframe of ${(le.getFullYear()-V.getFullYear())*12+(le.getMonth()-V.getMonth())+1} months`}if(c?.timeframe)return`The chart shows a timeframe of ${c.timeframe}`},[c?.timeframe,$]),ie=R=>{const V=R%10,le=R%100;return V===1&&le!==11?`${R}st`:V===2&&le!==12?`${R}nd`:V===3&&le!==13?`${R}rd`:`${R}th`},fe=R=>`${ie(R.getDate())} ${R.toLocaleString("en-GB",{month:"long"})}, ${R.getFullYear()}`,Y=R=>({specialCauseSinglePointUp:!!R?.rules.singlePoint.up,specialCauseSinglePointDown:!!R?.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!R?.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!R?.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!R?.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!R?.rules.fourOfFive.down,specialCauseShiftUp:!!R?.rules.shift.up,specialCauseShiftDown:!!R?.rules.shift.down,specialCauseTrendUp:!!R?.rules.trend.up,specialCauseTrendDown:!!R?.rules.trend.down}),he=Z.useCallback(({index:R,x:V,y:le})=>{const me=s?.[R],ae=V instanceof Date?V:new Date(V),B=fe(ae),W=c?.measureUnit?` ${c.measureUnit}`:"",ee=c?.measureName?` ${c.measureName}`:"";if(!me)return`General summary is: ${Q?Q+". ":""}Point ${R+1}, ${B}, ${le}${W}${ee}`;const G=Qa(me.classification?.variation)||"Variation",A=Ja(Y(me)),q=A.length?` Rules: ${[...new Set(A.map(te=>Rr[te].narration))].join("; ")}.`:" No special cause rules.",J=[];return c?.measureName&&J.push(`Measure: ${c.measureName}.`),c?.datasetContext&&J.push(`${c.datasetContext}.`),c?.organisation&&J.push(`Organisation: ${c.organisation}.`),c?.additionalNote&&J.push(c.additionalNote),["General summary is:",...J,`Point ${R+1} recorded on `,B+",",`with a value of ${le} ${W}${ee}`,G+".",q].join(" ").replace(/\s+/g," ").trim()},[s,c,Q]),oe=Z.useCallback((R,V)=>s?.[R]?he({index:R,seriesId:"process",x:V.x instanceof Date?V.x:new Date(V.x),y:V.y}).replace(/^General summary is:\s*/,"").replace(/^Point \d+\s*/,""):void 0,[s,he]),ge=Z.useMemo(()=>{try{const R=typeof N?.domain=="function"?N.domain():void 0;if(!R||!Array.isArray(R)||R.length<2)return!1;const V=Math.min(R[0],R[1]),le=Math.max(R[0],R[1]);return!(0>=V&&0<=le)}catch{return!1}},[N]);return o.jsx(ff,{children:o.jsxs("div",{className:"fdp-spc-chart",role:"group","aria-label":"Statistical process control chart","aria-roledescription":"chart",children:[o.jsx("svg",{width:M.xScale.range()[1]+56+16,height:(j?.innerHeight??M.yScale.range()[0])+12+48,role:"img",children:o.jsxs("g",{transform:"translate(56,12)",children:[o.jsx(Bo,{type:"x"}),o.jsx(Bo,{type:"y",yZeroBreak:{enabled:ge,gapPx:I,zigZag:{heightPx:64,amplitudePx:4,cycles:6,stepXPx:3}}}),o.jsx(nf,{axis:"y"}),ue,ce,g.map((R,V)=>{const le=$[R];if(!le)return null;const me=L(le.x instanceof Date?le.x:new Date(le.x));return o.jsx("line",{x1:me,x2:me,y1:0,y2:N.range()[0],stroke:"#555",strokeDasharray:"4 4",strokeWidth:1,"aria-hidden":"true",className:"fdp-spc__partition-marker"},`partition-marker-${V}`)}),ye?.mean.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__cl-group",children:[ye.mean.map((R,V)=>o.jsx("line",{className:"fdp-spc__cl",x1:R.x1,x2:R.x2,y1:R.y,y2:R.y},`mean-${V}`)),ye.mean.map((R,V)=>{if(V===ye.mean.length-1)return null;const le=ye.mean[V+1];if(!le||R.y===le.y)return null;const ae=Math.max(4,le.x1-R.x2||0)*.5,B=`M ${R.x2},${R.y} C ${R.x2+ae},${R.y} ${le.x1-ae},${le.y} ${le.x1},${le.y}`;return o.jsx("path",{className:"fdp-spc__cl fdp-spc__cl-join",d:B,fill:"none"},`mean-join-${V}`)})]}):null,C!=null&&o.jsx(o.Fragment,{}),ye?.ucl.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--ucl",children:[ye.ucl.map((R,V)=>o.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--ucl",x1:R.x1,x2:R.x2,y1:R.y,y2:R.y,strokeWidth:2},`ucl-${V}`)),ye.ucl.map((R,V)=>{if(V===ye.ucl.length-1)return null;const le=ye.ucl[V+1];if(!le||R.y===le.y)return null;const ae=Math.max(4,le.x1-R.x2||0)*.5,B=`M ${R.x2},${R.y} C ${R.x2+ae},${R.y} ${le.x1-ae},${le.y} ${le.x1},${le.y}`;return o.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--ucl fdp-spc__limit-join",d:B,fill:"none",strokeWidth:2},`ucl-join-${V}`)})]}):null,ye?.lcl.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--lcl",children:[ye.lcl.map((R,V)=>o.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--lcl",x1:R.x1,x2:R.x2,y1:R.y,y2:R.y,strokeWidth:2},`lcl-${V}`)),ye.lcl.map((R,V)=>{if(V===ye.lcl.length-1)return null;const le=ye.lcl[V+1];if(!le||R.y===le.y)return null;const ae=Math.max(4,le.x1-R.x2||0)*.5,B=`M ${R.x2},${R.y} C ${R.x2+ae},${R.y} ${le.x1-ae},${le.y} ${le.x1},${le.y}`;return o.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--lcl fdp-spc__limit-join",d:B,fill:"none",strokeWidth:2},`lcl-join-${V}`)})]}):null,C!=null&&o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__target-group",children:[o.jsx("line",{className:"fdp-spc__target","data-testid":"spc-target-line",x1:0,x2:L.range()[1],y1:N(C),y2:N(C),strokeWidth:2.5}),o.jsxs("text",{"data-testid":"spc-target-label",x:L.range()[0]-7,y:N(C)-5,textAnchor:"start",className:"fdp-spc__target-label",fontSize:12,children:["Target ",C," ",m||c?.measureUnit||""]})]}),i&&ye&&ye.mean.length>0&&o.jsxs(o.Fragment,{children:[ye.onePos.map((R,V)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos1",x1:R.x1,x2:R.x2,y1:R.y,y2:R.y,"aria-hidden":"true",strokeWidth:2},`onePos-${V}`)),ye.oneNeg.map((R,V)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg1",x1:R.x1,x2:R.x2,y1:R.y,y2:R.y,"aria-hidden":"true",strokeWidth:2},`oneNeg-${V}`)),ye.twoPos.map((R,V)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos2",x1:R.x1,x2:R.x2,y1:R.y,y2:R.y,"aria-hidden":"true",strokeWidth:2},`twoPos-${V}`)),ye.twoNeg.map((R,V)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg2",x1:R.x1,x2:R.x2,y1:R.y,y2:R.y,"aria-hidden":"true",strokeWidth:2},`twoNeg-${V}`))]}),de&&(w||D||S)&&(()=>{const R=de.detectedAt,V=de.firstFavourableCrossAt,le=$[R]?L($[R].x instanceof Date?$[R].x:new Date($[R].x)):null,me=$[R]?N($[R].y):null,ae=V!=null&&$[V]?L($[V].x instanceof Date?$[V].x:new Date($[V].x)):null,B=V!=null&&$[V]?N($[V].y):null;return o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__trend-overlays",children:[S&&le!=null&&me!=null&&ae!=null&&B!=null&&o.jsx("line",{x1:le,y1:me,x2:ae,y2:B,stroke:"#888",strokeDasharray:"4 4",strokeWidth:2,children:o.jsx("title",{children:"Trend bridge: start to first favourable-side point"})}),w&&le!=null&&me!=null&&o.jsx("circle",{cx:le,cy:me,r:6,fill:"white",stroke:"#555",strokeWidth:2,children:o.jsx("title",{children:"Trend start (run reached N)"})}),D&&ae!=null&&B!=null&&o.jsx("circle",{cx:ae,cy:B,r:5,fill:"#555",children:o.jsx("title",{children:"First favourable-side inclusion"})})]})})(),o.jsx(hf,{series:e[0],seriesIndex:0,palette:"categorical",showPoints:!1,focusablePoints:!1,focusIndex:-1,parseX:R=>R.x instanceof Date?R.x:new Date(R.x),smooth:!1,strokeWidth:f}),t&&$.map((R,V)=>{const le=L(R.x instanceof Date?R.x:new Date(R.x)),me=N(R.y),ae=ne.has(V),B=X?.[V],W=O[V],ee=W===pt.Improvement,G=W===pt.Concern,A=W===pt.NoJudgement,q=["fdp-spc__point",ae&&a?"fdp-spc__point--ooc":null,l&&G?"fdp-spc__point--sc-concern":null,l&&ee?"fdp-spc__point--sc-improvement":null,l&&p&&A?"fdp-spc__point--sc-no-judgement":null,B?.assurance===it.Pass?"fdp-spc__point--assurance-pass":null,B?.assurance===it.Fail?"fdp-spc__point--assurance-fail":null].filter(Boolean).join(" "),J=P?.focused?.index===V;return o.jsx("circle",{cx:le,cy:me,r:5,className:q,"data-variation":B?.variation,"data-assurance":B?.assurance,"aria-label":y,...J?{"aria-describedby":`spc-tooltip-${V}`}:{}},V)}),x&&v&&P?.focused&&(()=>{const R=P.focused,V=typeof R.index=="number"?R.index:-1;if(V<0||!$[V])return null;const le=L($[V].x instanceof Date?$[V].x:new Date($[V].x)),me=N($[V].y),ae="var(--nhs-fdp-color-primary-yellow, #ffeb3b)";return o.jsxs("g",{className:"fdp-spc__focus-indicator","aria-hidden":"true",children:[o.jsx("circle",{cx:le,cy:me,r:7,fill:"none",stroke:ae,strokeWidth:3}),o.jsx("circle",{cx:le,cy:me,r:5,fill:"#000",stroke:ae,strokeWidth:1.5}),o.jsx("circle",{cx:le,cy:me,r:2.5,fill:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stroke:"#fff",strokeWidth:.5})]})})(),j&&o.jsx(ew,{width:L.range()[1],height:N.range()[0]}),!v&&o.jsx(Yf,{engineRows:s,limits:{mean:r.mean,sigma:r.sigma},pointDescriber:oe,measureName:c?.measureName,measureUnit:c?.measureUnit,dateFormatter:R=>fe(R),enableNeutralNoJudgement:p,showTrendGatingExplanation:b})]})}),v&&o.jsx("div",{style:{marginTop:8},children:o.jsx(X1,{engineRows:s,measureName:c?.measureName,measureUnit:m||c?.measureUnit,onSignalFocus:T})}),n&&o.jsx(Yx,{format:R=>he({...R,x:R.x instanceof Date?R.x:new Date(R.x)})})]})})},ew=({width:e,height:t})=>{const n=Ln();return n?o.jsx("rect",{className:"fdp-spc__interaction-layer",width:e,height:t,fill:"transparent",tabIndex:0,"aria-label":"Interactive chart area. Use arrow keys to move between points.",onMouseMove:r=>{const a=r.currentTarget.getBoundingClientRect(),s=r.clientX-a.left,l=r.clientY-a.top;n.focusNearest(s,l)},onMouseLeave:()=>n.clear(),onKeyDown:r=>{switch(r.key){case"ArrowRight":n.focusNextPoint(),r.preventDefault();break;case"ArrowLeft":n.focusPrevPoint(),r.preventDefault();break;case"ArrowDown":n.focusNextSeries(),r.preventDefault();break;case"ArrowUp":n.focusPrevSeries(),r.preventDefault();break;case"Home":n.focusFirstPoint(),r.preventDefault();break;case"End":n.focusLastPoint(),r.preventDefault();break}},style:{cursor:"crosshair"}}):null};function tw(e){const{rows:t}=Qo(e),n=el(e);return{rows:t,visuals:n.visuals}}function nw(e,t,n){const r=Z.useMemo(()=>{if(!e||e.length<2)return!1;const s=Math.min(e[0],e[1]),l=Math.max(e[0],e[1]);return!(0>=s&&0<=l)},[e]),{slotPx:i,totalReservedPx:a}=Z.useMemo(()=>{if(!r)return{slotPx:0,totalReservedPx:0};const l=(t??260)-60,c=vi,d=c+Kd,f=n?.maxFraction,m=Math.max(_i,Math.floor(l*f)),g=Math.min(d,m);return{slotPx:Math.min(c,g),totalReservedPx:g}},[r,t,n?.maxFraction]);return{show:r,slotPx:i,totalReservedPx:a}}function rw(e,t,n,r){if(n.percentScale){const c=e.map(f=>f.y),u=Math.max(100,...c),d=Math.min(0,...c);return[d<0?d:0,u>100?u:100]}const i=e.map(c=>c.y),a=c=>{c!=null&&i.push(c)};if(a(t.mean),a(t.ucl),a(t.lcl),a(t.onePos),a(t.oneNeg),a(t.twoPos),a(t.twoNeg),r&&r.length)for(const c of r)typeof c=="number"&&!isNaN(c)&&i.push(c);if(!i.length)return;let s=Math.min(...i),l=Math.max(...i);return n.alwaysShowZeroY&&(s=Math.min(0,s)),n.alwaysShowHundredY&&(l=Math.max(100,l)),[s,l]}function sl(e,t){if(!e?.length||t.chartType!==Mt.XmR)return null;const n=Math.max(2,Math.floor(t.shiftLength??6)),r=[];for(let g=0;g<e.length;g++){const y=e[g],h=y.value;y?.ghost||typeof h=="number"&&Number.isFinite(h)&&r.push({idx:g,value:h})}if(r.length<n*2)return null;let i=0,a=0;for(let g=1;g<r.length;g++)i+=Math.abs(r[g].value-r[g-1].value),a++;if(a===0)return null;const l=i/a*(2.66/3);if(!Number.isFinite(l)||l<=0)return null;const c=Math.max(0,t.deltaSigma??.5),u=t.metricImprovement===Fe.Up,d=t.metricImprovement===Fe.Down,f=(()=>{for(let g=e.length-1;g>=0;g--)if(e[g]?.baseline)return g;return-1})();function m(g,y){let h=0,p=0;for(let b=g;b<y;b++)h+=r[b].value,p++;return p?h/p:NaN}for(let g=n;g<=r.length-n;g++){const y=m(g-n,g),h=m(g,g+n);if(!Number.isFinite(y)||!Number.isFinite(h))continue;const p=h-y,b=p/l;let w=!1,D=!1;if(u?(w=b>=c,D=!0):d?(w=-b>=c,D=!1):(w=Math.abs(b)>=c,D=p>0),!w)continue;const S=k=>D?k>y:k<y;let v=!0;for(let k=g;k<g+n;k++)if(!S(r[k].value)){v=!1;break}if(!v)continue;const T=r[g].idx;if(!(t.minGap&&f>=0&&T-f<t.minGap))return T}return null}function iw(e,t){const n=sl(e,t);return n==null?e.slice():e.map((r,i)=>i===n?{...r,baseline:!0}:r)}function aw(e,t){const n=Math.max(1,Math.floor(t.maxInsertions??1));if(n<=1)return iw(e,t);let r=e.slice(),i=0;const a=Math.max(1,t.minGap??0);for(;i<n;){const s=sl(r,{...t,minGap:a});if(s==null)break;if(r[s]?.baseline){const l=sl(r,{...t,minGap:a+1});if(l==null||l===s)break;r=r.map((c,u)=>u===l?{...c,baseline:!0}:c),i++;continue}r=r.map((l,c)=>c===s?{...l,baseline:!0}:l),i++}return r}const Xf=e=>{const t=Z.useCallback(Ie=>String(Ie).replace(/^spc_warning_code\.?/i,"").replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(rt=>rt.length?rt[0].toUpperCase()+rt.slice(1):rt).join(" "),[]),n=Z.useCallback(Ie=>String(Ie).replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map($e=>$e.length?$e[0].toUpperCase()+$e.slice(1):$e).join(" "),[]);process.env.NODE_ENV!=="production"&&e.disableTrendSideGating!==void 0&&console.warn("SPCChart: 'disableTrendSideGating' prop is deprecated and ignored (trend side gating always enabled).");const{effData:r,effTargets:i,effBaselines:a,effGhosts:s,effChartTypeCore:l,effMetricImprovementCore:c,effEngineSettings:u,effAlwaysShowZeroY:d,effAlwaysShowHundredY:f,effPercentScale:m,effGradientSequences:g,effSequenceTransition:y,effProcessLineWidth:h,effTrendVisualMode:p,effShowTrendGatingExplanation:b,effEnableNeutralNoJudgement:w,effEnableRules:D,effShowPartitionMarkers:S,effShowTrendStartMarkers:v,effShowFirstFavourableCrossMarkers:T,effShowTrendBridgeOverlay:k,effShowSignalsInspector:C,effOnSignalFocus:x,effShowWarningsPanel:I,effWarningsFilter:M,effShowEmbeddedIcon:j,effEmbeddedIconVariant:L,effEmbeddedIconRunLength:N,effShowFocusIndicator:F,effHeight:P,effClassName:$,effAriaLabel:ne,effUnit:X,effNarrationContext:O,effShowZones:H,effShowPoints:z,effHighlightOutOfControl:re,effVisualsScenario:U,effVisualsEngineSettings:de,effSource:ye,effEngineAutoRecalc:ue}=K1(e),ce=ne??e.ariaLabel,Q=P??e.height??260,ie=$??e.className,fe=X??e.unit,Y=O??e.narrationContext,he=H??e.showZones,oe=z??e.showPoints,ge=re??e.highlightOutOfControl,R=U??e.visualsScenario??Ff.None,V=de??e.visualsEngineSettings,le=ye??e.source,me=e.a11y?.announceFocus??e.announceFocus??!1,ae=Z.useMemo(()=>r.map((Ie,$e)=>({x:Ie.x,value:Ie.y,target:i?.[$e]??void 0,baseline:a?.[$e]??void 0,ghost:s?.[$e]??void 0})),[r,i,a,s]),B=Z.useMemo(()=>{try{const Ie=ue;return Ie?.enabled?aw(ae,{chartType:l,metricImprovement:c,shiftLength:Ie.shiftLength,deltaSigma:Ie.deltaSigma,minGap:Ie.minGap,maxInsertions:Ie.maxInsertions}):ae}catch{return ae}},[ae,ue,l,c]),W=Z.useMemo(()=>{try{const Ie=u?.minimumPointsPartition??u?.minimumPoints,$e={};typeof Ie=="number"&&!isNaN(Ie)&&($e.minimumPoints=Ie,B.filter(Le=>!Le.ghost&&typeof Le.value=="number").length>=Ie&&($e.chartLevelEligibility=!0)),u?.enableFourOfFiveRule!=null&&($e.enableFourOfFiveRule=!!u.enableFourOfFiveRule),V&&Object.assign($e,V);const rt=ut=>{switch(ut){case $t.XmR:return Mt.XmR;case $t.T:return Mt.T;case $t.G:return Mt.G;default:return Mt.XmR}},zt=ut=>{switch(ut){case ze.Up:return Fe.Up;case ze.Down:return Fe.Down;default:return Fe.Neither}},It={chartType:rt(l),metricImprovement:zt(c),data:B,settings:Object.keys($e).length?$e:void 0},{visuals:Zt}=_1(It,R,{trendVisualMode:p===qf.Ungated?Ur.Ungated:Ur.Gated,enableNeutralNoJudgement:w});return Zt||[]}catch{return[]}},[B,l,c,p,w,u,R,V]),G=Z.useMemo(()=>{try{const Ie=u?.minimumPointsPartition??u?.minimumPoints,$e={};typeof Ie=="number"&&!isNaN(Ie)&&($e.minimumPoints=Ie,B.filter(jn=>!jn.ghost&&typeof jn.value=="number").length>=Ie&&($e.chartLevelEligibility=!0)),u?.enableFourOfFiveRule!=null&&($e.enableFourOfFiveRule=!!u.enableFourOfFiveRule),V&&Object.assign($e,V);const rt=Le=>{switch(Le){case $t.XmR:return Mt.XmR;case $t.T:return Mt.T;case $t.G:return Mt.G;default:return Mt.XmR}},zt=Le=>{switch(Le){case ze.Up:return Fe.Up;case ze.Down:return Fe.Down;default:return Fe.Neither}},It={chartType:rt(l),metricImprovement:zt(c),data:B,settings:Object.keys($e).length?$e:void 0},{rows:Zt}=tw(It),ut=Le=>{switch(Le){case Ee.ImprovementHigh:case Ee.ImprovementLow:return je.Improvement;case Ee.ConcernHigh:case Ee.ConcernLow:return je.Concern;case Ee.NeitherHigh:case Ee.NeitherLow:return je.Neither;case Ee.CommonCause:default:return je.Neither}};return Zt.map((Le,jn)=>({data:{value:Le.value,ghost:!!Le.ghost},partition:{id:Le.partitionId},limits:{mean:Le.mean,ucl:Le.upperProcessLimit,lcl:Le.lowerProcessLimit,oneSigma:{upper:Le.upperOneSigma,lower:Le.lowerOneSigma},twoSigma:{upper:Le.upperTwoSigma,lower:Le.lowerTwoSigma}},rules:{singlePoint:{up:!!Le.singlePointUp,down:!!Le.singlePointDown},twoOfThree:{up:!!Le.twoSigmaUp,down:!!Le.twoSigmaDown},fourOfFive:{up:!!Le.fourOfFiveUp,down:!!Le.fourOfFiveDown},shift:{up:!!Le.shiftUp,down:!!Le.shiftDown},trend:{up:!!Le.trendUp,down:!!Le.trendDown}},classification:{variation:ut(Le.variationIcon),neutralSpecialCauseValue:Le.variationIcon===Ee.NeitherHigh||Le.variationIcon===Ee.NeitherLow?Le.specialCauseImprovementValue??Le.specialCauseConcernValue??1:null,assurance:void 0},target:B[jn]?.target??null}))}catch{return null}},[B,l,c,u,V])||null,A=(G||[]).slice().reverse().find(Ie=>Ie.limits.mean!=null),q=A?.limits.mean??null,J=Z.useMemo(()=>{const Ie=[];try{const $e=G,rt=u?.minimumPoints??13,zt=u?.minimumPointsPartition??12;if($e&&$e.length){const It=$e.filter(ut=>!ut.data.ghost&&ut.data.value!=null).length;It<rt&&Ie.push({code:ns.InsufficientPointsGlobal,severity:hn.Warning,category:ts.Data,message:"Not enough non-ghost points to compute stable limits/icons.",context:{nonGhostCount:It,minimumPoints:rt}});const Zt=new Map;for(const ut of $e){const Le=ut.partition.id??0,jn=Zt.get(Le)||{size:0,nonGhost:0};jn.size+=1,!ut.data.ghost&&ut.data.value!=null&&(jn.nonGhost+=1),Zt.set(Le,jn)}for(const[ut,Le]of Zt)Le.nonGhost>0&&Le.nonGhost<zt&&Ie.push({code:ns.InsufficientPointsPartition,severity:hn.Warning,category:ts.Partition,message:"A partition/baseline segment has too few points for recommended stability.",context:{partitionId:ut,nonGhostCount:Le.nonGhost,minimumPointsPartition:zt}})}}catch{}return Ie},[G,u?.minimumPoints,u?.minimumPointsPartition]),te=Z.useMemo(()=>J.length?M?J.filter(Ie=>!(M.severities&&Ie.severity&&!M.severities.includes(Ie.severity)||M.categories&&Ie.category&&!M.categories.includes(Ie.category)||M.codes&&!M.codes.includes(Ie.code))):J:[],[J,M]),K=A?.limits.ucl??null,se=A?.limits.lcl??null,be=A?.limits.oneSigma.upper??null,_e=A?.limits.oneSigma.lower??null,Se=A?.limits.twoSigma.upper??null,Te=A?.limits.twoSigma.lower??null,pe=q!=null&&be!=null?Math.abs(be-q):0,Pe=Z.useMemo(()=>[{id:"process",data:r,color:"#A6A6A6"}],[r]),Be=Z.useMemo(()=>rw(r,{mean:q,ucl:K,lcl:se,onePos:be,oneNeg:_e,twoPos:Se,twoNeg:Te},{alwaysShowZeroY:!!d,alwaysShowHundredY:!!f,percentScale:!!m},i??null),[r,q,K,se,be,_e,Se,Te,i,d,f,m]),Je=Z.useMemo(()=>{const Ie=$e=>{const rt=$e.filter(It=>typeof It=="number"&&!isNaN(It));if(!rt.length)return null;const zt=rt[0];return rt.every(It=>It===zt)?zt:null};if(G&&G.length){const $e=Ie(G.map(rt=>rt.target));if($e!=null)return $e}return i&&i.length?Ie(i):null},[G,i]),{show:Ue,slotPx:gt,totalReservedPx:rn}=nw(Be,Q,{maxFraction:.35}),Xt=Ue?rn:0,Ht=Z.useMemo(()=>{const Ie=r.map($e=>$e.x);return Gf({values:r.map($e=>$e.y),dates:Ie,providedUnit:fe||Y?.measureUnit,percentHeuristic:"0-1",autoValue:!1,autoDelta:!1,autoMetadata:!1})},[r,fe,Y?.measureUnit]),qe=fe??Y?.measureUnit??Ht.unit,st=Z.useMemo(()=>qe?{...Y||{},measureUnit:qe}:Y,[Y,qe]),zn=Z.useMemo(()=>{if(!G)return[];const Ie=[];for(let $e=1;$e<G.length;$e++)G[$e].partition.id!==G[$e-1].partition.id&&Ie.push($e);return Ie},[G]),Rs=Z.useMemo(()=>q1({show:!!j,rowsForUi:G,minPoints:u?.minimumPoints??13,metricImprovement:c,variant:L,runLength:N}),[j,G,u?.minimumPoints,c,L,N]);return o.jsxs("div",{className:ie?`fdp-spc-chart-wrapper ${ie}`:"fdp-spc-chart-wrapper",children:[o.jsx(G1,{show:!!j,variationNode:Rs,assuranceNode:null}),o.jsx(Xd,{height:Q,ariaLabel:ce,margin:{bottom:48,left:56,right:16,top:12},className:void 0,children:o.jsx(Zd,{series:Pe,yDomain:Be,yBottomGapPx:Xt,children:(()=>{const Ie={series:Pe,showPoints:oe,announceFocus:me,limits:{mean:q,ucl:K,lcl:se,sigma:pe,onePos:be,oneNeg:_e,twoPos:Se,twoNeg:Te},showZones:he,highlightOutOfControl:ge,engineRows:G,uniformTarget:Je,visualCategories:W,enableRules:D,narrationContext:st,gradientSequences:g,sequenceTransition:y,processLineWidth:h,zeroBreakSlotGapPx:gt,effectiveUnit:qe,partitionMarkers:S?zn:[],ariaLabel:ce,enableNeutralNoJudgement:w,showTrendGatingExplanation:b,metricImprovement:c,showTrendStartMarkers:v,showFirstFavourableCrossMarkers:T,showTrendBridgeOverlay:k,showSignalsInspector:C,onSignalFocus:x,showFocusIndicator:F};return o.jsx(Q1,{...Ie})})()})}),le&&o.jsx("div",{className:"fdp-spc-chart__source","aria-label":"Chart data source",children:typeof le=="string"?o.jsxs("small",{children:["Source: ",le]}):le}),o.jsx(V1,{show:!!I,warnings:te,formatWarningCategory:n,formatWarningCode:t})]})},sw=Object.freeze(Object.defineProperty({__proto__:null,AssuranceIcon:it,BaselineSuggestionReason:Jt,ChartType:Mt,Icons:Y1,ImprovementDirection:Fe,PARITY_V26:$f,RULE_METADATA:pf,SPCChart:Xf,SPCTooltipOverlay:Yf,SpcEmbeddedIconVariant:mr,SpcVisualCategory:_t,SpcWarningCategory:ts,SpcWarningCode:ns,SpcWarningSeverity:hn,VARIATION_COLOR_TOKENS:sn,VariationIcon:Ee,buildSpc:Hf,buildSpcV26a:Qo,buildSpcV26aWithVisuals:el,computeSpcVisualCategories:Jo,extractRuleIds:Ja,getVariationColorHex:a1,getVariationColorToken:vf,normaliseSpcSettings:Of,normaliseSpcSettingsV2:If,ruleGlossary:Rr,variationLabel:Qa,withParityV26:x1},Symbol.toStringTag,{value:"Module"})),Zf="150ms",Kf="300ms",Jf="500ms",Qf="cubic-bezier(0.4, 0, 1, 1)",eh="cubic-bezier(0, 0, 0.2, 1)",th="cubic-bezier(0.4, 0, 0.2, 1)",nh="cubic-bezier(0.68, -0.55, 0.265, 1.55)",rh="background-color 300ms cubic-bezier(0, 0, 0.2, 1)",ih="box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",ah="border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",sh="border-color 300ms cubic-bezier(0, 0, 0.2, 1)",oh="1px",lh="2px",ch="4px",uh="4px",dh="4px",fh="2px",hh="1px",mh="0px",ph="4px",gh="8px",bh="12px",ol="#d8dde0",ll="#4c6272",cl="#d8dde0",ul="#aeb7bd",dl="#d5281b",fl="#005eb8",hl="#ffffff",ml="#212b32",pl="#007f3b",gl="#330072",bl="#7c2855",yl="#d5281b",vl="#ffeb3b",_l="#fff9c4",xl="#ffb81c",wl="#ed8b00",Sl="#00a499",Cl="#ae2573",kl="#4c6272",Tl="#768692",Nl="#aeb7bd",jl="#d8dde0",Dl="#f0f4f5",yh="#212b32",vh="#4c6272",_h="#ffffff",xh="#212b32",wh="#005eb8",Sh="#7c2855",Ch="#003087",kh="#330072",Th="#ffeb3b",Nh="#212b32",jh="#d8dde0",Dh="#ffffff33",Mh="#d5281b",Ph="#4c6272",Ih="#ffffff",Fh="#007f3b",$h="#ffffff",Lh="#006530",Ah="#004021",Eh="#004021",Bh="#00000000",Rh="#ffffff",Oh="#005eb8",Hh="#005eb8",zh="#d9e5f2",Uh="#c7daf0",Wh="#005eb8",Vh="#ffffff",Gh="#212b32",Yh="#d9dde0",qh="#b3bcc2",Xh="#b3bcc2",Zh="#d5281b",Kh="#aa2016",Jh="#6a140e",Qh="#6a140e",em="#005eb8",tm="#004b93",nm="#002f5c",rm="#002f5c",im="8px",am="16px",sm="12px",om="16px",lm="4px",cm="40px",um="4px",dm="40px",fm="12px",hm="16px",mm="32px",pm="16px",gm="20px",bm="28px",ym="9px",vm="2px",_m="16px",xm="24px",wm="8px",Sm="24px",Cm="16px",km="4px",Tm="4px",Nm="4px",jm="8px",Dm="4px",Mm="16px",Pm="#007f3b",Im="#006530",Fm="#004021",$m="#d8dde0",Lm="#ffffff",Am="#768692",Em="#00000000",Bm="#ffeb3b",Rm="#00000000",Om="#ffffff",Hm="#d9e5f2",zm="#c7daf0",Um="#005eb8",Wm="#005eb8",Ml="8px",Pl="16px",Il="12px",Fl="16px",Vm="2px",Gm="4px",Ym="4px",qm="600",Xm="#ffffff",Zm="#d8dde0",Km="#aeb7bd",Jm="#f0f4f5",Qm="#212b32",ep="#212b32",tp="#005eb8",$l="16px",Ll="32px",Al="16px",np="1px",rp="4px",ip="none",ap="0 2px 4px rgba(0, 0, 0, 0.1)",sp="#ffffff",op="#ffffff",lp="#d8dde0",cp="#ffffff",up="#4c6272",dp="#ffeb3b",fp="#d5281b",hp="#aeb7bd",mp="#212b32",pp="#4c6272",gp="#768692",bp="#212b32",yp="#ffffff",vp="600",_p="#d5281b",xp="600",wp="#4c6272",El="4px",Bl="40px",Rl="40px",Ol="12px",Sp="2px",Cp="4px",kp="0px",Tp="16px",Np="18px",jp="24px",Dp="32px",Mp="34px",Pp="32px",Ip="40px",Fp="48px",$p="5.4ex",Lp="7.2ex",Ap="9ex",Ep="10.8ex",Bp="20ex",Rp="38ex",Op="56ex",Hp="44px",zp="40px",Up="1020px",Wp="100%",Vp="50%",Gp="33.333%",Yp="25%",qp="20%",Xp="320px",Zp="641px",Kp="1025px",Jp="1280px",Qp="960px",eg="32px",tg="16px",ng="#d5281b",rg="#d5281b",ig="#ffffff",ag="#007f3b",sg="#007f3b",og="#ffffff",lg="#ffeb3b",cg="#ffeb3b",ug="#212b32",dg="#005eb8",fg="#005eb8",hg="#ffffff",mg="#d8dde0",pg="#aeb7bd",gg="#768692",bg="0 4px 0 #004021",yg="0 4px 0 #005eb8",vg="0 4px 0 #6a140e",_g="0 4px 0 #ffeb3b",xg="none",wg="0 2px 4px rgba(0, 0, 0, 0.1)",Sg="4px",Cg="0px",kg="solid",Tg="0 0 0 3px #ffeb3b",Ng="0 0 0 3px #ffeb3b",jg="none",Dg="0 1px 3px rgba(0, 0, 0, 0.12)",Mg="0 2px 6px rgba(0, 0, 0, 0.16)",Pg="0 4px 12px rgba(0, 0, 0, 0.20)",Hl="0",zl="4px",Ul="8px",Wl="16px",Vl="24px",Gl="32px",Yl="40px",ql="48px",Xl="56px",Zl="64px",rs="0",is="0",as="4px",ss="4px",os="8px",ls="8px",cs="8px",us="16px",ds="16px",fs="24px",hs="24px",ms="32px",ps="32px",gs="40px",bs="40px",ys="48px",vs="48px",_s="56px",xs="56px",ws="64px",ji="Frutiger W01",Di="Arial, Helvetica, sans-serif",Mi="sans-serif",Pi="400",Ii="600",Fi="400",$i="12px",Li="14px",Ai="12pt",Ei="14px",Bi="16px",Ri="12pt",Oi="16px",Hi="19px",zi="13pt",Ui="19px",Wi="22px",Vi="15pt",Gi="22px",Yi="26px",qi="17pt",Xi="27px",Zi="36px",Ki="20pt",Ji="33px",Qi="48px",ea="24pt",Ss="16px",Cs="24px",mn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},pn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},gn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},yn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},vn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},_n={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},xn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},wn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},Sn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},ow=Object.freeze(Object.defineProperty({__proto__:null,AnimationDurationFast:Zf,AnimationDurationNormal:Kf,AnimationDurationSlow:Jf,AnimationEasingBounce:nh,AnimationEasingEaseIn:Qf,AnimationEasingEaseInOut:th,AnimationEasingEaseOut:eh,BorderColorCard:cl,BorderColorCardHover:ul,BorderColorDefault:ol,BorderColorError:dl,BorderColorForm:ll,BorderRadiusLarge:bh,BorderRadiusMedium:gh,BorderRadiusNone:mh,BorderRadiusSmall:ph,BorderWidthCardBottom:uh,BorderWidthDefault:oh,BorderWidthFormElement:lh,BorderWidthFormElementError:ch,BorderWidthPanel:dh,BorderWidthTableCell:hh,BorderWidthTableHeader:fh,BreakpointDesktop:Kp,BreakpointLargeDesktop:Jp,BreakpointMobile:Xp,BreakpointTablet:Zp,ButtonBorderRadius:Gm,ButtonBorderWidth:Vm,ButtonPrimaryBackgroundActive:Fm,ButtonPrimaryBackgroundDefault:Pm,ButtonPrimaryBackgroundDisabled:$m,ButtonPrimaryBackgroundHover:Im,ButtonPrimaryBorderDefault:Em,ButtonPrimaryBorderFocus:Bm,ButtonPrimaryTextDefault:Lm,ButtonPrimaryTextDisabled:Am,ButtonSecondaryBackgroundActive:zm,ButtonSecondaryBackgroundDefault:Rm,ButtonSecondaryBackgroundHover:Hm,ButtonSecondaryBackgroundSolid:Om,ButtonSecondaryBorderDefault:Wm,ButtonSecondaryTextDefault:Um,ButtonShadowSize:Ym,ButtonSpacingPaddingHorizontalDesktop:Fl,ButtonSpacingPaddingHorizontalMobile:Pl,ButtonSpacingPaddingVerticalDesktop:Il,ButtonSpacingPaddingVerticalMobile:Ml,ButtonTypographyWeight:qm,CardBackgroundDefault:Xm,CardBorderBottom:Jm,CardBorderDefault:Zm,CardBorderHover:Km,CardBorderWidthBottom:rp,CardBorderWidthDefault:np,CardShadowDefault:ip,CardShadowHover:ap,CardSpacingHeadingMargin:Al,CardSpacingPaddingDesktop:Ll,CardSpacingPaddingMobile:$l,CardTextDescription:ep,CardTextHeading:Qm,CardTextLink:tp,ColorBorderDefault:jh,ColorBorderSecondary:Dh,ColorButtonLoginActive:nm,ColorButtonLoginBackground:em,ColorButtonLoginHover:tm,ColorButtonLoginShadow:rm,ColorButtonPrimaryActive:Ah,ColorButtonPrimaryBackground:Fh,ColorButtonPrimaryHover:Lh,ColorButtonPrimaryShadow:Eh,ColorButtonPrimaryText:$h,ColorButtonReverseActive:qh,ColorButtonReverseBackground:Vh,ColorButtonReverseHover:Yh,ColorButtonReverseShadow:Xh,ColorButtonReverseText:Gh,ColorButtonSecondaryActive:Uh,ColorButtonSecondaryBackground:Bh,ColorButtonSecondaryBackgroundSolid:Rh,ColorButtonSecondaryBorder:Oh,ColorButtonSecondaryHover:zh,ColorButtonSecondaryShadow:Wh,ColorButtonSecondaryText:Hh,ColorButtonWarningActive:Jh,ColorButtonWarningBackground:Zh,ColorButtonWarningHover:Kh,ColorButtonWarningShadow:Qh,ColorError:Mh,ColorFocusBackground:Th,ColorFocusText:Nh,ColorFormBackground:Ih,ColorFormBorder:Ph,ColorGrey1:kl,ColorGrey2:Tl,ColorGrey3:Nl,ColorGrey4:jl,ColorGrey5:Dl,ColorLinkActive:Ch,ColorLinkDefault:wh,ColorLinkHover:Sh,ColorLinkVisited:kh,ColorPrimaryBlack:ml,ColorPrimaryBlue:fl,ColorPrimaryDarkPink:bl,ColorPrimaryGreen:pl,ColorPrimaryPurple:gl,ColorPrimaryRed:yl,ColorPrimaryWhite:hl,ColorPrimaryYellow:vl,ColorSecondaryAquaGreen:Sl,ColorSecondaryOrange:wl,ColorSecondaryPaleYellow:_l,ColorSecondaryPink:Cl,ColorSecondaryWarmYellow:xl,ColorTextPrimary:yh,ColorTextPrint:xh,ColorTextReverse:_h,ColorTextSecondary:vh,ComponentBlur:Tm,ComponentBreadcrumbChevronMarginLeft:ym,ComponentBreadcrumbChevronMarginRight:vm,ComponentBreadcrumbPaddingTopDesktop:xm,ComponentBreadcrumbPaddingTopMobile:_m,ComponentButtonPaddingDesktopHorizontal:om,ComponentButtonPaddingDesktopVertical:sm,ComponentButtonPaddingMobileHorizontal:am,ComponentButtonPaddingMobileVertical:im,ComponentButtonShadowSize:lm,ComponentCardHeadingMargin:pm,ComponentCardPaddingDesktop:mm,ComponentCardPaddingMobile:hm,ComponentDetails:jm,ComponentExpander:Dm,ComponentFormCheckboxLabelPadding:fm,ComponentFormCheckboxSize:dm,ComponentFormInputMinHeight:cm,ComponentFormInputPadding:um,ComponentLink:Nm,ComponentPagination:Mm,ComponentPanelPaddingDesktop:bm,ComponentPanelPaddingMobile:gm,ComponentSpread:km,ComponentSummaryListCellPaddingHorizontal:Sm,ComponentSummaryListCellPaddingVertical:wm,ComponentSummaryListRowMargin:Cm,ElevationHigh:Pg,ElevationLow:Dg,ElevationMedium:Mg,ElevationNone:jg,FocusOutlineOffset:Cg,FocusOutlineStyle:kg,FocusOutlineWidth:Sg,FocusShadowButton:Ng,FocusShadowInput:Tg,FontFamilyBase:ji,FontFamilyFallback:Di,FontFamilyPrint:Mi,FontLineHeightBase:Cs,FontSize14Mobile:$i,FontSize14Print:Ai,FontSize14Tablet:Li,FontSize16Mobile:Ei,FontSize16Print:Ri,FontSize16Tablet:Bi,FontSize19Mobile:Oi,FontSize19Print:zi,FontSize19Tablet:Hi,FontSize22Mobile:Ui,FontSize22Print:Vi,FontSize22Tablet:Wi,FontSize26Mobile:Gi,FontSize26Print:qi,FontSize26Tablet:Yi,FontSize36Mobile:Xi,FontSize36Print:Ki,FontSize36Tablet:Zi,FontSize48Mobile:Ji,FontSize48Print:ea,FontSize48Tablet:Qi,FontSizeBase:Ss,FontWeightBold:Ii,FontWeightLight:Fi,FontWeightNormal:Pi,FormBorderRadius:kp,FormBorderWidthDefault:Sp,FormBorderWidthError:Cp,FormErrorTextDefault:_p,FormErrorTypographyWeight:xp,FormHintTextDefault:wp,FormInputBackgroundDefault:sp,FormInputBackgroundDisabled:lp,FormInputBackgroundError:cp,FormInputBackgroundFocus:op,FormInputBorderDefault:up,FormInputBorderDisabled:hp,FormInputBorderError:fp,FormInputBorderFocus:dp,FormInputTextDefault:mp,FormInputTextDisabled:gp,FormInputTextPlaceholder:pp,FormLabelTextDefault:bp,FormLabelTextRequired:yp,FormLabelTypographyWeight:vp,FormSpacingCheckboxLabelPadding:Ol,FormSpacingCheckboxSize:Rl,FormSpacingInputMinHeight:Bl,FormSpacingInputPadding:El,GridGutter:eg,GridGutterHalf:tg,GridPageWidth:Qp,HeadingsNhsukHeadingL:pn,HeadingsNhsukHeadingM:gn,HeadingsNhsukHeadingS:bn,HeadingsNhsukHeadingXl:mn,HeadingsNhsukHeadingXs:yn,LayoutColumnActions:qp,LayoutColumnFull:Wp,LayoutColumnHalf:Vp,LayoutColumnQuarter:Yp,LayoutColumnThird:Gp,LayoutContainerMaxWidth:Up,ParagraphsBody:vn,ParagraphsBodyLarge:_n,ParagraphsBodySmall:xn,ParagraphsLedeText:wn,ParagraphsLedeTextSmall:Sn,ShadowButtonDefault:bg,ShadowButtonFocus:_g,ShadowButtonSecondary:yg,ShadowButtonWarning:vg,ShadowCardDefault:xg,ShadowCardHover:wg,SizeButtonMinHeightDesktop:zp,SizeButtonMinHeightMobile:Hp,SizeFormControlLarge:Fp,SizeFormControlMedium:Ip,SizeFormControlSmall:Pp,SizeFormInputWidth2xl:Rp,SizeFormInputWidth3xl:Op,SizeFormInputWidthLg:Ep,SizeFormInputWidthMd:Ap,SizeFormInputWidthSm:Lp,SizeFormInputWidthXl:Bp,SizeFormInputWidthXs:$p,SizeIconExtraLarge:Dp,SizeIconLarge:jp,SizeIconMedium:Np,SizeIconNhsDefault:Mp,SizeIconSmall:Tp,Spacing0:Hl,Spacing1:zl,Spacing2:Ul,Spacing3:Wl,Spacing4:Vl,Spacing5:Gl,Spacing6:Yl,Spacing7:ql,Spacing8:Xl,Spacing9:Zl,SpacingResponsive0Mobile:rs,SpacingResponsive0Tablet:is,SpacingResponsive1Mobile:as,SpacingResponsive1Tablet:ss,SpacingResponsive2Mobile:os,SpacingResponsive2Tablet:ls,SpacingResponsive3Mobile:cs,SpacingResponsive3Tablet:us,SpacingResponsive4Mobile:ds,SpacingResponsive4Tablet:fs,SpacingResponsive5Mobile:hs,SpacingResponsive5Tablet:ms,SpacingResponsive6Mobile:ps,SpacingResponsive6Tablet:gs,SpacingResponsive7Mobile:bs,SpacingResponsive7Tablet:ys,SpacingResponsive8Mobile:vs,SpacingResponsive8Tablet:_s,SpacingResponsive9Mobile:xs,SpacingResponsive9Tablet:ws,StateDisabledBackground:mg,StateDisabledBorder:pg,StateDisabledText:gg,StateErrorBackground:ng,StateErrorBorder:rg,StateErrorText:ig,StateInfoBackground:dg,StateInfoBorder:fg,StateInfoText:hg,StateSuccessBackground:ag,StateSuccessBorder:sg,StateSuccessText:og,StateWarningBackground:lg,StateWarningBorder:cg,StateWarningText:ug,TransitionButtonDefault:rh,TransitionButtonShadow:ih,TransitionCardHover:sh,TransitionInputFocus:ah},Symbol.toStringTag,{value:"Module"})),lw=(e,t)=>({fontSize:e.mobile,marginBottom:t.mobile,"@media (min-width: 768px)":{fontSize:e.tablet,marginBottom:t.tablet},"@media print":{fontSize:e.print||e.tablet}}),cw=({children:e,className:t="",style:n={}})=>o.jsx("h1",{className:t,style:{fontFamily:mn.fontFamily,fontWeight:mn.fontWeight,fontSize:mn.fontSize.mobile,lineHeight:mn.lineHeight,marginTop:mn.marginTop,marginBottom:mn.marginBottom.mobile,...n},children:e}),uw=({children:e,className:t="",style:n={}})=>o.jsx("h2",{className:t,style:{fontFamily:pn.fontFamily,fontWeight:pn.fontWeight,fontSize:pn.fontSize.mobile,lineHeight:pn.lineHeight,marginTop:pn.marginTop,marginBottom:pn.marginBottom.mobile,...n},children:e}),dw=({children:e,className:t="",style:n={}})=>o.jsx("h3",{className:t,style:{fontFamily:gn.fontFamily,fontWeight:gn.fontWeight,fontSize:gn.fontSize.mobile,lineHeight:gn.lineHeight,marginTop:gn.marginTop,marginBottom:gn.marginBottom.mobile,...n},children:e}),fw=({children:e,className:t="",style:n={}})=>o.jsx("h4",{className:t,style:{fontFamily:bn.fontFamily,fontWeight:bn.fontWeight,fontSize:bn.fontSize.mobile,lineHeight:bn.lineHeight,marginTop:bn.marginTop,marginBottom:bn.marginBottom.mobile,...n},children:e}),hw=({children:e,className:t="",style:n={}})=>o.jsx("h5",{className:t,style:{fontFamily:yn.fontFamily,fontWeight:yn.fontWeight,fontSize:yn.fontSize.mobile,lineHeight:yn.lineHeight,marginTop:yn.marginTop,marginBottom:yn.marginBottom.mobile,...n},children:e}),mw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:vn.fontFamily,fontWeight:vn.fontWeight,fontSize:vn.fontSize.mobile,lineHeight:vn.lineHeight,marginTop:vn.marginTop,marginBottom:vn.marginBottom.mobile,...n},children:e}),pw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:_n.fontFamily,fontWeight:_n.fontWeight,fontSize:_n.fontSize.mobile,lineHeight:_n.lineHeight,marginTop:_n.marginTop,marginBottom:_n.marginBottom.mobile,...n},children:e}),gw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:xn.fontFamily,fontWeight:xn.fontWeight,fontSize:xn.fontSize.mobile,lineHeight:xn.lineHeight,marginTop:xn.marginTop,marginBottom:xn.marginBottom.mobile,...n},children:e}),bw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:wn.fontFamily,fontWeight:wn.fontWeight,fontSize:wn.fontSize.mobile,lineHeight:wn.lineHeight,marginTop:wn.marginTop,marginBottom:wn.marginBottom.mobile,...n},children:e}),yw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:Sn.fontFamily,fontWeight:Sn.fontWeight,fontSize:Sn.fontSize.mobile,lineHeight:Sn.lineHeight,marginTop:Sn.marginTop,marginBottom:Sn.marginBottom.mobile,...n},children:e}),vw=()=>E.useMemo(()=>ow,[]),_w=()=>E.useMemo(()=>({BorderColorDefault:ol,BorderColorForm:ll,BorderColorCard:cl,BorderColorCardHover:ul,BorderColorError:dl,ColorPrimaryBlue:fl,ColorPrimaryWhite:hl,ColorPrimaryBlack:ml,ColorPrimaryGreen:pl,ColorPrimaryPurple:gl,ColorPrimaryDarkPink:bl,ColorPrimaryRed:yl,ColorPrimaryYellow:vl,ColorSecondaryPaleYellow:_l,ColorSecondaryWarmYellow:xl,ColorSecondaryOrange:wl,ColorSecondaryAquaGreen:Sl,ColorSecondaryPink:Cl,ColorGrey1:kl,ColorGrey2:Tl,ColorGrey3:Nl,ColorGrey4:jl,ColorGrey5:Dl}),[]),xw=()=>E.useMemo(()=>({Spacing0:Hl,Spacing1:zl,Spacing2:Ul,Spacing3:Wl,Spacing4:Vl,Spacing5:Gl,Spacing6:Yl,Spacing7:ql,Spacing8:Xl,Spacing9:Zl}),[]),ww=()=>E.useMemo(()=>({Mobile:{Size14:$i,Size16:Ei,Size19:Oi,Size22:Ui,Size26:Gi,Size36:Xi,Size48:Ji},Tablet:{Size14:Li,Size16:Bi,Size19:Hi,Size22:Wi,Size26:Yi,Size36:Zi,Size48:Qi},Print:{Size14:Ai,Size16:Ri,Size19:zi,Size22:Vi,Size26:qi,Size36:Ki,Size48:ea},Family:{Base:ji,Fallback:Di,Print:Mi},Weight:{Normal:Pi,Bold:Ii,Light:Fi},Base:{Size:Ss,LineHeight:Cs},FontFamilyBase:ji,FontFamilyFallback:Di,FontFamilyPrint:Mi,FontWeightNormal:Pi,FontWeightBold:Ii,FontWeightLight:Fi,FontSize14Mobile:$i,FontSize14Tablet:Li,FontSize14Print:Ai,FontSize16Mobile:Ei,FontSize16Tablet:Bi,FontSize16Print:Ri,FontSize19Mobile:Oi,FontSize19Tablet:Hi,FontSize19Print:zi,FontSize22Mobile:Ui,FontSize22Tablet:Wi,FontSize22Print:Vi,FontSize26Mobile:Gi,FontSize26Tablet:Yi,FontSize26Print:qi,FontSize36Mobile:Xi,FontSize36Tablet:Zi,FontSize36Print:Ki,FontSize48Mobile:Ji,FontSize48Tablet:Qi,FontSize48Print:ea,FontSizeBase:Ss,FontLineHeightBase:Cs}),[]),Sw=()=>E.useMemo(()=>({Mobile:{Size0:rs,Size1:as,Size2:os,Size3:cs,Size4:ds,Size5:hs,Size6:ps,Size7:bs,Size8:vs,Size9:xs},Tablet:{Size0:is,Size1:ss,Size2:ls,Size3:us,Size4:fs,Size5:ms,Size6:gs,Size7:ys,Size8:_s,Size9:ws},SpacingResponsive0Mobile:rs,SpacingResponsive0Tablet:is,SpacingResponsive1Mobile:as,SpacingResponsive1Tablet:ss,SpacingResponsive2Mobile:os,SpacingResponsive2Tablet:ls,SpacingResponsive3Mobile:cs,SpacingResponsive3Tablet:us,SpacingResponsive4Mobile:ds,SpacingResponsive4Tablet:fs,SpacingResponsive5Mobile:hs,SpacingResponsive5Tablet:ms,SpacingResponsive6Mobile:ps,SpacingResponsive6Tablet:gs,SpacingResponsive7Mobile:bs,SpacingResponsive7Tablet:ys,SpacingResponsive8Mobile:vs,SpacingResponsive8Tablet:_s,SpacingResponsive9Mobile:xs,SpacingResponsive9Tablet:ws}),[]),Cw=()=>E.useMemo(()=>({ButtonSpacingPaddingVerticalMobile:Ml,ButtonSpacingPaddingHorizontalMobile:Pl,ButtonSpacingPaddingVerticalDesktop:Il,ButtonSpacingPaddingHorizontalDesktop:Fl,CardSpacingPaddingMobile:$l,CardSpacingPaddingDesktop:Ll,CardSpacingHeadingMargin:Al,FormSpacingInputPadding:El,FormSpacingInputMinHeight:Bl,FormSpacingCheckboxSize:Rl,FormSpacingCheckboxLabelPadding:Ol}),[]),kw=()=>E.useMemo(()=>({xl:mn,l:pn,m:gn,s:bn,xs:yn}),[]),Tw=()=>E.useMemo(()=>({body:vn,bodyLarge:_n,bodySmall:xn,ledeText:wn,ledeTextSmall:Sn}),[]),Nw=()=>E.useMemo(()=>({headings:{xl:mn,l:pn,m:gn,s:bn,xs:yn},paragraphs:{body:vn,bodyLarge:_n,bodySmall:xn,ledeText:wn,ledeTextSmall:Sn},fonts:{family:{base:ji,fallback:Di,print:Mi},weight:{normal:Pi,bold:Ii,light:Fi},sizes:{mobile:{size14:$i,size16:Ei,size19:Oi,size22:Ui,size26:Gi,size36:Xi,size48:Ji},tablet:{size14:Li,size16:Bi,size19:Hi,size22:Wi,size26:Yi,size36:Zi,size48:Qi},print:{size14:Ai,size16:Ri,size19:zi,size22:Vi,size26:qi,size36:Ki,size48:ea}}}}),[]);function jw(e={}){const{initialLayout:t=void 0,fallbackLayout:n="two-column"}=e,[r,i]=Z.useState(t),a=Z.useCallback(()=>i("three-column"),[]),s=Z.useCallback(()=>i(c=>c==="three-column"?n:c),[n]),l=Z.useCallback(()=>i(c=>c==="three-column"?n:"three-column"),[n]);return{forceLayout:r,setLayout:i,drillIn:a,drillOut:s,toggle:l,isDrilledIn:r==="three-column"}}const Kl={fontPath:"https://assets.nhs.uk/fonts/",includeFontFace:!0,useFallbacks:!0,fontWeights:[400,600]},Pt={normal:{woff2:"FrutigerLTW01-55Roman.woff2",woff:"FrutigerLTW01-55Roman.woff",ttf:"FrutigerLTW01-55Roman.ttf",eot:"FrutigerLTW01-55Roman.eot"},bold:{woff2:"FrutigerLTW01-65Bold.woff2",woff:"FrutigerLTW01-65Bold.woff",ttf:"FrutigerLTW01-65Bold.ttf",eot:"FrutigerLTW01-65Bold.eot"}};function Dw(e={}){const{fontPath:t,fontWeights:n}={...Kl,...e},r=[];return n?.includes(400)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 400;
  src: url("${t}${Pt.normal.eot}?#iefix") format("eot"),
       url("${t}${Pt.normal.woff2}") format("woff2"),
       url("${t}${Pt.normal.woff}") format("woff"),
       url("${t}${Pt.normal.ttf}") format("truetype");
  src: url("${t}${Pt.normal.eot}");
}`),n?.includes(600)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 600;
  src: url("${t}${Pt.bold.eot}?#iefix") format("eot"),
       url("${t}${Pt.bold.woff2}") format("woff2"),
       url("${t}${Pt.bold.woff}") format("woff"),
       url("${t}${Pt.bold.ttf}") format("truetype");
  src: url("${t}${Pt.bold.eot}");
}`),r.join(`
`)}function Mw(e={}){if(typeof document>"u")return;const{fontPath:t,fontWeights:n}={...Kl,...e};[...n?.includes(400)?[{href:`${t}${Pt.normal.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${Pt.normal.woff}`,as:"font",type:"font/woff"}]:[],...n?.includes(600)?[{href:`${t}${Pt.bold.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${Pt.bold.woff}`,as:"font",type:"font/woff"}]:[]].forEach(i=>{const a=document.createElement("link");a.rel="preload",a.href=i.href,a.as=i.as,a.type=i.type,a.crossOrigin="anonymous",document.head.appendChild(a)})}const Pw='"Frutiger W01", Arial, Helvetica, sans-serif',Iw="Arial, Helvetica, sans-serif";async function Fw(){if(typeof document>"u"||!document.fonts)return!1;try{return await document.fonts.load('1em "Frutiger W01"'),document.fonts.check('1em "Frutiger W01"')}catch{return!1}}function Bn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ig(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ut={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Vr={duration:.5,overwrite:!1,delay:0},Jl,St,Ke,Qt=1e8,Ge=1/Qt,Ql=Math.PI*2,$w=Ql/4,Lw=0,Fg=Math.sqrt,Aw=Math.cos,Ew=Math.sin,xt=function(t){return typeof t=="string"},at=function(t){return typeof t=="function"},Rn=function(t){return typeof t=="number"},ec=function(t){return typeof t>"u"},Cn=function(t){return typeof t=="object"},At=function(t){return t!==!1},tc=function(){return typeof window<"u"},ks=function(t){return at(t)||xt(t)},$g=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Nt=Array.isArray,nc=/(?:-?\.?\d|\.)+/gi,Lg=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Gr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,rc=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ag=/[+-]=-?[.\d]+/,Eg=/[^,'"\[\]\s]+/gi,Bw=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,tt,kn,ic,ac,Wt={},Ts={},Bg,Rg=function(t){return(Ts=qr(t,Wt))&&Rt},sc=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},ta=function(t,n){return!n&&console.warn(t)},Og=function(t,n){return t&&(Wt[t]=n)&&Ts&&(Ts[t]=n)||Wt},na=function(){return 0},Rw={suppressEvents:!0,isStart:!0,kill:!1},Ns={suppressEvents:!0,kill:!1},Ow={suppressEvents:!0},oc={},Xn=[],lc={},Hg,Vt={},cc={},zg=30,js=[],uc="",dc=function(t){var n=t[0],r,i;if(Cn(n)||at(n)||(t=[t]),!(r=(n._gsap||{}).harness)){for(i=js.length;i--&&!js[i].targetTest(n););r=js[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new b0(t[i],r)))||t.splice(i,1);return t},gr=function(t){return t._gsap||dc(tn(t))[0]._gsap},Ug=function(t,n,r){return(r=t[n])&&at(r)?t[n]():ec(r)&&t.getAttribute&&t.getAttribute(n)||r},Et=function(t,n){return(t=t.split(",")).forEach(n)||t},lt=function(t){return Math.round(t*1e5)/1e5||0},ht=function(t){return Math.round(t*1e7)/1e7||0},Yr=function(t,n){var r=n.charAt(0),i=parseFloat(n.substr(2));return t=parseFloat(t),r==="+"?t+i:r==="-"?t-i:r==="*"?t*i:t/i},Hw=function(t,n){for(var r=n.length,i=0;t.indexOf(n[i])<0&&++i<r;);return i<r},Ds=function(){var t=Xn.length,n=Xn.slice(0),r,i;for(lc={},Xn.length=0,r=0;r<t;r++)i=n[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},fc=function(t){return!!(t._initted||t._startAt||t.add)},Wg=function(t,n,r,i){Xn.length&&!St&&Ds(),t.render(n,r,!!(St&&n<0&&fc(t))),Xn.length&&!St&&Ds()},Vg=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(Eg).length<2?n:xt(t)?t.trim():t},Gg=function(t){return t},Gt=function(t,n){for(var r in n)r in t||(t[r]=n[r]);return t},zw=function(t){return function(n,r){for(var i in r)i in n||i==="duration"&&t||i==="ease"||(n[i]=r[i])}},qr=function(t,n){for(var r in n)t[r]=n[r];return t},Yg=function e(t,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(t[r]=Cn(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},Ms=function(t,n){var r={},i;for(i in t)i in n||(r[i]=t[i]);return r},ra=function(t){var n=t.parent||tt,r=t.keyframes?zw(Nt(t.keyframes)):Gt;if(At(t.inherit))for(;n;)r(t,n.vars.defaults),n=n.parent||n._dp;return t},Uw=function(t,n){for(var r=t.length,i=r===n.length;i&&r--&&t[r]===n[r];);return r<0},qg=function(t,n,r,i,a){var s=t[i],l;if(a)for(l=n[a];s&&s[a]>l;)s=s._prev;return s?(n._next=s._next,s._next=n):(n._next=t[r],t[r]=n),n._next?n._next._prev=n:t[i]=n,n._prev=s,n.parent=n._dp=t,n},Ps=function(t,n,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var a=n._prev,s=n._next;a?a._next=s:t[r]===n&&(t[r]=s),s?s._prev=a:t[i]===n&&(t[i]=a),n._next=n._prev=n.parent=null},Zn=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},br=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},Ww=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},hc=function(t,n,r,i){return t._startAt&&(St?t._startAt.revert(Ns):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,i))},Vw=function e(t){return!t||t._ts&&e(t.parent)},Xg=function(t){return t._repeat?Xr(t._tTime,t=t.duration()+t._rDelay)*t:0},Xr=function(t,n){var r=Math.floor(t=ht(t/n));return t&&r===t?r-1:r},Is=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Fs=function(t){return t._end=ht(t._start+(t._tDur/Math.abs(t._ts||t._rts||Ge)||0))},$s=function(t,n){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=ht(r._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),Fs(t),r._dirty||br(r,t)),t},Zg=function(t,n){var r;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(r=Is(t.rawTime(),n),(!n._dur||aa(0,n.totalDuration(),r)-n._tTime>Ge)&&n.render(r,!0)),br(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-Ge}},Tn=function(t,n,r,i){return n.parent&&Zn(n),n._start=ht((Rn(r)?r:r||t!==tt?en(t,r,n):t._time)+n._delay),n._end=ht(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),qg(t,n,"_first","_last",t._sort?"_start":0),mc(n)||(t._recent=n),i||Zg(t,n),t._ts<0&&$s(t,t._tTime),t},Kg=function(t,n){return(Wt.ScrollTrigger||sc("scrollTrigger",n))&&Wt.ScrollTrigger.create(n,t)},Jg=function(t,n,r,i,a){if(Sc(t,n,a),!t._initted)return 1;if(!r&&t._pt&&!St&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Hg!==qt.frame)return Xn.push(t),t._lazy=[a,i],1},Gw=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},mc=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},Yw=function(t,n,r,i){var a=t.ratio,s=n<0||!n&&(!t._start&&Gw(t)&&!(!t._initted&&mc(t))||(t._ts<0||t._dp._ts<0)&&!mc(t))?0:1,l=t._rDelay,c=0,u,d,f;if(l&&t._repeat&&(c=aa(0,t._tDur,n),d=Xr(c,l),t._yoyo&&d&1&&(s=1-s),d!==Xr(t._tTime,l)&&(a=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==a||St||i||t._zTime===Ge||!n&&t._zTime){if(!t._initted&&Jg(t,n,i,r,c))return;for(f=t._zTime,t._zTime=n||(r?Ge:0),r||(r=n&&!f),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=c,u=t._pt;u;)u.r(s,u.d),u=u._next;n<0&&hc(t,n,r,!0),t._onUpdate&&!r&&Yt(t,"onUpdate"),c&&t._repeat&&!r&&t.parent&&Yt(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===s&&(s&&Zn(t,1),!r&&!St&&(Yt(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},qw=function(t,n,r){var i;if(r>n)for(i=t._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>n)return i;i=i._next}else for(i=t._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<n)return i;i=i._prev}},Zr=function(t,n,r,i){var a=t._repeat,s=ht(n)||0,l=t._tTime/t._tDur;return l&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=a?a<0?1e10:ht(s*(a+1)+t._rDelay*a):s,l>0&&!i&&$s(t,t._tTime=t._tDur*l),t.parent&&Fs(t),r||br(t.parent,t),t},Qg=function(t){return t instanceof Ct?br(t):Zr(t,t._dur)},Xw={_start:0,endTime:na,totalDuration:na},en=function e(t,n,r){var i=t.labels,a=t._recent||Xw,s=t.duration()>=Qt?a.endTime(!1):t._dur,l,c,u;return xt(n)&&(isNaN(n)||n in i)?(c=n.charAt(0),u=n.substr(-1)==="%",l=n.indexOf("="),c==="<"||c===">"?(l>=0&&(n=n.replace(/=/,"")),(c==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0)*(u?(l<0?a:r).totalDuration()/100:1)):l<0?(n in i||(i[n]=s),i[n]):(c=parseFloat(n.charAt(l-1)+n.substr(l+1)),u&&r&&(c=c/100*(Nt(r)?r[0]:r).totalDuration()),l>1?e(t,n.substr(0,l-1),r)+c:s+c)):n==null?s:+n},ia=function(t,n,r){var i=Rn(n[1]),a=(i?2:1)+(t<2?0:1),s=n[a],l,c;if(i&&(s.duration=n[1]),s.parent=r,t){for(l=s,c=r;c&&!("immediateRender"in l);)l=c.vars.defaults||{},c=At(c.vars.inherit)&&c.parent;s.immediateRender=At(l.immediateRender),t<2?s.runBackwards=1:s.startAt=n[a-1]}return new ct(n[0],s,n[a+1])},Kn=function(t,n){return t||t===0?n(t):n},aa=function(t,n,r){return r<t?t:r>n?n:r},jt=function(t,n){return!xt(t)||!(n=Bw.exec(t))?"":n[1]},Zw=function(t,n,r){return Kn(r,function(i){return aa(t,n,i)})},pc=[].slice,e0=function(t,n){return t&&Cn(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&Cn(t[0]))&&!t.nodeType&&t!==kn},Kw=function(t,n,r){return r===void 0&&(r=[]),t.forEach(function(i){var a;return xt(i)&&!n||e0(i,1)?(a=r).push.apply(a,tn(i)):r.push(i)})||r},tn=function(t,n,r){return Ke&&!n&&Ke.selector?Ke.selector(t):xt(t)&&!r&&(ic||!Jr())?pc.call((n||ac).querySelectorAll(t),0):Nt(t)?Kw(t,r):e0(t)?pc.call(t,0):t?[t]:[]},gc=function(t){return t=tn(t)[0]||ta("Invalid scope")||{},function(n){var r=t.current||t.nativeElement||t;return tn(n,r.querySelectorAll?r:r===t?ta("Invalid scope")||ac.createElement("div"):t)}},t0=function(t){return t.sort(function(){return .5-Math.random()})},n0=function(t){if(at(t))return t;var n=Cn(t)?t:{each:t},r=yr(n.ease),i=n.from||0,a=parseFloat(n.base)||0,s={},l=i>0&&i<1,c=isNaN(i)||l,u=n.axis,d=i,f=i;return xt(i)?d=f={center:.5,edges:.5,end:1}[i]||0:!l&&c&&(d=i[0],f=i[1]),function(m,g,y){var h=(y||n).length,p=s[h],b,w,D,S,v,T,k,C,x;if(!p){if(x=n.grid==="auto"?0:(n.grid||[1,Qt])[1],!x){for(k=-Qt;k<(k=y[x++].getBoundingClientRect().left)&&x<h;);x<h&&x--}for(p=s[h]=[],b=c?Math.min(x,h)*d-.5:i%x,w=x===Qt?0:c?h*f/x-.5:i/x|0,k=0,C=Qt,T=0;T<h;T++)D=T%x-b,S=w-(T/x|0),p[T]=v=u?Math.abs(u==="y"?S:D):Fg(D*D+S*S),v>k&&(k=v),v<C&&(C=v);i==="random"&&t0(p),p.max=k-C,p.min=C,p.v=h=(parseFloat(n.amount)||parseFloat(n.each)*(x>h?h-1:u?u==="y"?h/x:x:Math.max(x,h/x))||0)*(i==="edges"?-1:1),p.b=h<0?a-h:a,p.u=jt(n.amount||n.each)||0,r=r&&h<0?m0(r):r}return h=(p[m]-p.min)/p.max||0,ht(p.b+(r?r(h):h)*p.v)+p.u}},bc=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var i=ht(Math.round(parseFloat(r)/t)*t*n);return(i-i%1)/n+(Rn(r)?0:jt(r))}},r0=function(t,n){var r=Nt(t),i,a;return!r&&Cn(t)&&(i=r=t.radius||Qt,t.values?(t=tn(t.values),(a=!Rn(t[0]))&&(i*=i)):t=bc(t.increment)),Kn(n,r?at(t)?function(s){return a=t(s),Math.abs(a-s)<=i?a:s}:function(s){for(var l=parseFloat(a?s.x:s),c=parseFloat(a?s.y:0),u=Qt,d=0,f=t.length,m,g;f--;)a?(m=t[f].x-l,g=t[f].y-c,m=m*m+g*g):m=Math.abs(t[f]-l),m<u&&(u=m,d=f);return d=!i||u<=i?t[d]:s,a||d===s||Rn(s)?d:d+jt(s)}:bc(t))},i0=function(t,n,r,i){return Kn(Nt(t)?!n:r===!0?!!(r=0):!i,function(){return Nt(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(n-t+r*.99))/r)*r*i)/i})},Jw=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduce(function(a,s){return s(a)},i)}},Qw=function(t,n){return function(r){return t(parseFloat(r))+(n||jt(r))}},eS=function(t,n,r){return s0(t,n,0,1,r)},a0=function(t,n,r){return Kn(r,function(i){return t[~~n(i)]})},tS=function e(t,n,r){var i=n-t;return Nt(t)?a0(t,e(0,t.length),n):Kn(r,function(a){return(i+(a-t)%i)%i+t})},nS=function e(t,n,r){var i=n-t,a=i*2;return Nt(t)?a0(t,e(0,t.length-1),n):Kn(r,function(s){return s=(a+(s-t)%a)%a||0,t+(s>i?a-s:s)})},sa=function(t){for(var n=0,r="",i,a,s,l;~(i=t.indexOf("random(",n));)s=t.indexOf(")",i),l=t.charAt(i+7)==="[",a=t.substr(i+7,s-i-7).match(l?Eg:nc),r+=t.substr(n,i-n)+i0(l?a:+a[0],l?0:+a[1],+a[2]||1e-5),n=s+1;return r+t.substr(n,t.length-n)},s0=function(t,n,r,i,a){var s=n-t,l=i-r;return Kn(a,function(c){return r+((c-t)/s*l||0)})},rS=function e(t,n,r,i){var a=isNaN(t+n)?0:function(g){return(1-g)*t+g*n};if(!a){var s=xt(t),l={},c,u,d,f,m;if(r===!0&&(i=1)&&(r=null),s)t={p:t},n={p:n};else if(Nt(t)&&!Nt(n)){for(d=[],f=t.length,m=f-2,u=1;u<f;u++)d.push(e(t[u-1],t[u]));f--,a=function(y){y*=f;var h=Math.min(m,~~y);return d[h](y-h)},r=n}else i||(t=qr(Nt(t)?[]:{},t));if(!d){for(c in n)xc.call(l,t,c,"get",n[c]);a=function(y){return Tc(y,l)||(s?t.p:t)}}}return Kn(r,a)},o0=function(t,n,r){var i=t.labels,a=Qt,s,l,c;for(s in i)l=i[s]-n,l<0==!!r&&l&&a>(l=Math.abs(l))&&(c=s,a=l);return c},Yt=function(t,n,r){var i=t.vars,a=i[n],s=Ke,l=t._ctx,c,u,d;if(a)return c=i[n+"Params"],u=i.callbackScope||t,r&&Xn.length&&Ds(),l&&(Ke=l),d=c?a.apply(u,c):a.call(u),Ke=s,d},oa=function(t){return Zn(t),t.scrollTrigger&&t.scrollTrigger.kill(!!St),t.progress()<1&&Yt(t,"onInterrupt"),t},Kr,l0=[],c0=function(t){if(t)if(t=!t.name&&t.default||t,tc()||t.headless){var n=t.name,r=at(t),i=n&&!r&&t.init?function(){this._props=[]}:t,a={init:na,render:Tc,add:xc,kill:vS,modifier:yS,rawVars:0},s={targetTest:0,get:0,getSetter:kc,aliases:{},register:0};if(Jr(),t!==i){if(Vt[n])return;Gt(i,Gt(Ms(t,a),s)),qr(i.prototype,qr(a,Ms(t,s))),Vt[i.prop=n]=i,t.targetTest&&(js.push(i),oc[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}Og(n,i),t.register&&t.register(Rt,i,Bt)}else l0.push(t)},Ye=255,la={aqua:[0,Ye,Ye],lime:[0,Ye,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ye],navy:[0,0,128],white:[Ye,Ye,Ye],olive:[128,128,0],yellow:[Ye,Ye,0],orange:[Ye,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ye,0,0],pink:[Ye,192,203],cyan:[0,Ye,Ye],transparent:[Ye,Ye,Ye,0]},yc=function(t,n,r){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(r-n)*t*6:t<.5?r:t*3<2?n+(r-n)*(2/3-t)*6:n)*Ye+.5|0},u0=function(t,n,r){var i=t?Rn(t)?[t>>16,t>>8&Ye,t&Ye]:0:la.black,a,s,l,c,u,d,f,m,g,y;if(!i){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),la[t])i=la[t];else if(t.charAt(0)==="#"){if(t.length<6&&(a=t.charAt(1),s=t.charAt(2),l=t.charAt(3),t="#"+a+a+s+s+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return i=parseInt(t.substr(1,6),16),[i>>16,i>>8&Ye,i&Ye,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),i=[t>>16,t>>8&Ye,t&Ye]}else if(t.substr(0,3)==="hsl"){if(i=y=t.match(nc),!n)c=+i[0]%360/360,u=+i[1]/100,d=+i[2]/100,s=d<=.5?d*(u+1):d+u-d*u,a=d*2-s,i.length>3&&(i[3]*=1),i[0]=yc(c+1/3,a,s),i[1]=yc(c,a,s),i[2]=yc(c-1/3,a,s);else if(~t.indexOf("="))return i=t.match(Lg),r&&i.length<4&&(i[3]=1),i}else i=t.match(nc)||la.transparent;i=i.map(Number)}return n&&!y&&(a=i[0]/Ye,s=i[1]/Ye,l=i[2]/Ye,f=Math.max(a,s,l),m=Math.min(a,s,l),d=(f+m)/2,f===m?c=u=0:(g=f-m,u=d>.5?g/(2-f-m):g/(f+m),c=f===a?(s-l)/g+(s<l?6:0):f===s?(l-a)/g+2:(a-s)/g+4,c*=60),i[0]=~~(c+.5),i[1]=~~(u*100+.5),i[2]=~~(d*100+.5)),r&&i.length<4&&(i[3]=1),i},d0=function(t){var n=[],r=[],i=-1;return t.split(Jn).forEach(function(a){var s=a.match(Gr)||[];n.push.apply(n,s),r.push(i+=s.length+1)}),n.c=r,n},f0=function(t,n,r){var i="",a=(t+i).match(Jn),s=n?"hsla(":"rgba(",l=0,c,u,d,f;if(!a)return t;if(a=a.map(function(m){return(m=u0(m,n,1))&&s+(n?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),r&&(d=d0(t),c=r.c,c.join(i)!==d.c.join(i)))for(u=t.replace(Jn,"1").split(Gr),f=u.length-1;l<f;l++)i+=u[l]+(~c.indexOf(l)?a.shift()||s+"0,0,0,0)":(d.length?d:a.length?a:r).shift());if(!u)for(u=t.split(Jn),f=u.length-1;l<f;l++)i+=u[l]+a[l];return i+u[f]},Jn=(function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in la)e+="|"+t+"\\b";return new RegExp(e+")","gi")})(),iS=/hsl[a]?\(/,h0=function(t){var n=t.join(" "),r;if(Jn.lastIndex=0,Jn.test(n))return r=iS.test(n),t[1]=f0(t[1],r),t[0]=f0(t[0],r,d0(t[1])),!0},ca,qt=(function(){var e=Date.now,t=500,n=33,r=e(),i=r,a=1e3/240,s=a,l=[],c,u,d,f,m,g,y=function h(p){var b=e()-i,w=p===!0,D,S,v,T;if((b>t||b<0)&&(r+=b-n),i+=b,v=i-r,D=v-s,(D>0||w)&&(T=++f.frame,m=v-f.time*1e3,f.time=v=v/1e3,s+=D+(D>=a?4:a-D),S=1),w||(c=u(h)),S)for(g=0;g<l.length;g++)l[g](v,m,T,p)};return f={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(p){return m/(1e3/(p||60))},wake:function(){Bg&&(!ic&&tc()&&(kn=ic=window,ac=kn.document||{},Wt.gsap=Rt,(kn.gsapVersions||(kn.gsapVersions=[])).push(Rt.version),Rg(Ts||kn.GreenSockGlobals||!kn.gsap&&kn||{}),l0.forEach(c0)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&f.sleep(),u=d||function(p){return setTimeout(p,s-f.time*1e3+1|0)},ca=1,y(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(c),ca=0,u=na},lagSmoothing:function(p,b){t=p||1/0,n=Math.min(b||33,t)},fps:function(p){a=1e3/(p||240),s=f.time*1e3+a},add:function(p,b,w){var D=b?function(S,v,T,k){p(S,v,T,k),f.remove(D)}:p;return f.remove(p),l[w?"unshift":"push"](D),Jr(),D},remove:function(p,b){~(b=l.indexOf(p))&&l.splice(b,1)&&g>=b&&g--},_listeners:l},f})(),Jr=function(){return!ca&&qt.wake()},Oe={},aS=/^[\d.\-M][\d.\-,\s]/,sS=/["']/g,oS=function(t){for(var n={},r=t.substr(1,t.length-3).split(":"),i=r[0],a=1,s=r.length,l,c,u;a<s;a++)c=r[a],l=a!==s-1?c.lastIndexOf(","):c.length,u=c.substr(0,l),n[i]=isNaN(u)?u.replace(sS,"").trim():+u,i=c.substr(l+1).trim();return n},lS=function(t){var n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n);return t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)},cS=function(t){var n=(t+"").split("("),r=Oe[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[oS(n[1])]:lS(t).split(",").map(Vg)):Oe._CE&&aS.test(t)?Oe._CE("",t):r},m0=function(t){return function(n){return 1-t(1-n)}},p0=function e(t,n){for(var r=t._first,i;r;)r instanceof Ct?e(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?e(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},yr=function(t,n){return t&&(at(t)?t:Oe[t]||cS(t))||n},vr=function(t,n,r,i){r===void 0&&(r=function(c){return 1-n(1-c)}),i===void 0&&(i=function(c){return c<.5?n(c*2)/2:1-n((1-c)*2)/2});var a={easeIn:n,easeOut:r,easeInOut:i},s;return Et(t,function(l){Oe[l]=Wt[l]=a,Oe[s=l.toLowerCase()]=r;for(var c in a)Oe[s+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=Oe[l+"."+c]=a[c]}),a},g0=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},vc=function e(t,n,r){var i=n>=1?n:1,a=(r||(t?.3:.45))/(n<1?n:1),s=a/Ql*(Math.asin(1/i)||0),l=function(d){return d===1?1:i*Math.pow(2,-10*d)*Ew((d-s)*a)+1},c=t==="out"?l:t==="in"?function(u){return 1-l(1-u)}:g0(l);return a=Ql/a,c.config=function(u,d){return e(t,u,d)},c},_c=function e(t,n){n===void 0&&(n=1.70158);var r=function(s){return s?--s*s*((n+1)*s+n)+1:0},i=t==="out"?r:t==="in"?function(a){return 1-r(1-a)}:g0(r);return i.config=function(a){return e(t,a)},i};Et("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;vr(e+",Power"+(n-1),t?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})}),Oe.Linear.easeNone=Oe.none=Oe.Linear.easeIn,vr("Elastic",vc("in"),vc("out"),vc()),(function(e,t){var n=1/t,r=2*n,i=2.5*n,a=function(l){return l<n?e*l*l:l<r?e*Math.pow(l-1.5/t,2)+.75:l<i?e*(l-=2.25/t)*l+.9375:e*Math.pow(l-2.625/t,2)+.984375};vr("Bounce",function(s){return 1-a(1-s)},a)})(7.5625,2.75),vr("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),vr("Circ",function(e){return-(Fg(1-e*e)-1)}),vr("Sine",function(e){return e===1?1:-Aw(e*$w)+1}),vr("Back",_c("in"),_c("out"),_c()),Oe.SteppedEase=Oe.steps=Wt.SteppedEase={config:function(t,n){t===void 0&&(t=1);var r=1/t,i=t+(n?0:1),a=n?1:0,s=1-Ge;return function(l){return((i*aa(0,s,l)|0)+a)*r}}},Vr.ease=Oe["quad.out"],Et("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return uc+=e+","+e+"Params,"});var b0=function(t,n){this.id=Lw++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:Ug,this.set=n?n.getSetter:kc},ua=(function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,Zr(this,+n.duration,1,1),this.data=n.data,Ke&&(this._ctx=Ke,Ke.data.push(this)),ca||qt.wake()}var t=e.prototype;return t.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},t.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},t.totalDuration=function(r){return arguments.length?(this._dirty=0,Zr(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(r,i){if(Jr(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for($s(this,r),!a._dp||a.parent||Zg(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Tn(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Ge||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Wg(this,r,i)),this},t.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+Xg(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},t.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+Xg(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(r,i){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*a,i):this._repeat?Xr(this._tTime,a)+1:1},t.timeScale=function(r,i){if(!arguments.length)return this._rts===-Ge?0:this._rts;if(this._rts===r)return this;var a=this.parent&&this._ts?Is(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Ge?0:this._rts,this.totalTime(aa(-Math.abs(this._delay),this.totalDuration(),a),i!==!1),Fs(this),Ww(this)},t.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Jr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ge&&(this._tTime-=Ge)))),this):this._ps},t.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Tn(i,this,r-this._delay),this}return this._start},t.endTime=function(r){return this._start+(At(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Is(i.rawTime(r),this):this._tTime:this._tTime},t.revert=function(r){r===void 0&&(r=Ow);var i=St;return St=r,fc(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),St=i,this},t.globalTime=function(r){for(var i=this,a=arguments.length?r:i.rawTime();i;)a=i._start+a/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):a},t.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Qg(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,Qg(this),i?this.time(i):this}return this._rDelay},t.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},t.seek=function(r,i){return this.totalTime(en(this,r),At(i))},t.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,At(i)),this._dur||(this._zTime=-Ge),this},t.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},t.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},t.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Ge:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ge,this},t.isActive=function(){var r=this.parent||this._dp,i=this._start,a;return!!(!r||this._ts&&this._initted&&r.isActive()&&(a=r.rawTime(!0))>=i&&a<this.endTime(!0)-Ge)},t.eventCallback=function(r,i,a){var s=this.vars;return arguments.length>1?(i?(s[r]=i,a&&(s[r+"Params"]=a),r==="onUpdate"&&(this._onUpdate=i)):delete s[r],this):s[r]},t.then=function(r){var i=this;return new Promise(function(a){var s=at(r)?r:Gg,l=function(){var u=i.then;i.then=null,at(s)&&(s=s(i))&&(s.then||s===i)&&(i.then=u),a(s),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?l():i._prom=l})},t.kill=function(){oa(this)},e})();Gt(ua.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ge,_prom:0,_ps:!1,_rts:1});var Ct=(function(e){Ig(t,e);function t(r,i){var a;return r===void 0&&(r={}),a=e.call(this,r)||this,a.labels={},a.smoothChildTiming=!!r.smoothChildTiming,a.autoRemoveChildren=!!r.autoRemoveChildren,a._sort=At(r.sortChildren),tt&&Tn(r.parent||tt,Bn(a),i),r.reversed&&a.reverse(),r.paused&&a.paused(!0),r.scrollTrigger&&Kg(Bn(a),r.scrollTrigger),a}var n=t.prototype;return n.to=function(i,a,s){return ia(0,arguments,this),this},n.from=function(i,a,s){return ia(1,arguments,this),this},n.fromTo=function(i,a,s,l){return ia(2,arguments,this),this},n.set=function(i,a,s){return a.duration=0,a.parent=this,ra(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new ct(i,a,en(this,s),1),this},n.call=function(i,a,s){return Tn(this,ct.delayedCall(0,i,a),s)},n.staggerTo=function(i,a,s,l,c,u,d){return s.duration=a,s.stagger=s.stagger||l,s.onComplete=u,s.onCompleteParams=d,s.parent=this,new ct(i,s,en(this,c)),this},n.staggerFrom=function(i,a,s,l,c,u,d){return s.runBackwards=1,ra(s).immediateRender=At(s.immediateRender),this.staggerTo(i,a,s,l,c,u,d)},n.staggerFromTo=function(i,a,s,l,c,u,d,f){return l.startAt=s,ra(l).immediateRender=At(l.immediateRender),this.staggerTo(i,a,l,c,u,d,f)},n.render=function(i,a,s){var l=this._time,c=this._dirty?this.totalDuration():this._tDur,u=this._dur,d=i<=0?0:ht(i),f=this._zTime<0!=i<0&&(this._initted||!u),m,g,y,h,p,b,w,D,S,v,T,k;if(this!==tt&&d>c&&i>=0&&(d=c),d!==this._tTime||s||f){if(l!==this._time&&u&&(d+=this._time-l,i+=this._time-l),m=d,S=this._start,D=this._ts,b=!D,f&&(u||(l=this._zTime),(i||!a)&&(this._zTime=i)),this._repeat){if(T=this._yoyo,p=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(p*100+i,a,s);if(m=ht(d%p),d===c?(h=this._repeat,m=u):(v=ht(d/p),h=~~v,h&&h===v&&(m=u,h--),m>u&&(m=u)),v=Xr(this._tTime,p),!l&&this._tTime&&v!==h&&this._tTime-v*p-this._dur<=0&&(v=h),T&&h&1&&(m=u-m,k=1),h!==v&&!this._lock){var C=T&&v&1,x=C===(T&&h&1);if(h<v&&(C=!C),l=C?0:d%u?u:d,this._lock=1,this.render(l||(k?0:ht(h*p)),a,!u)._lock=0,this._tTime=d,!a&&this.parent&&Yt(this,"onRepeat"),this.vars.repeatRefresh&&!k&&(this.invalidate()._lock=1),l&&l!==this._time||b!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,c=this._tDur,x&&(this._lock=2,l=C?u:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!k&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;p0(this,k)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(w=qw(this,ht(l),ht(m)),w&&(d-=m-(m=w._start))),this._tTime=d,this._time=m,this._act=!D,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,l=0),!l&&d&&!a&&!v&&(Yt(this,"onStart"),this._tTime!==d))return this;if(m>=l&&i>=0)for(g=this._first;g;){if(y=g._next,(g._act||m>=g._start)&&g._ts&&w!==g){if(g.parent!==this)return this.render(i,a,s);if(g.render(g._ts>0?(m-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(m-g._start)*g._ts,a,s),m!==this._time||!this._ts&&!b){w=0,y&&(d+=this._zTime=-Ge);break}}g=y}else{g=this._last;for(var I=i<0?i:m;g;){if(y=g._prev,(g._act||I<=g._end)&&g._ts&&w!==g){if(g.parent!==this)return this.render(i,a,s);if(g.render(g._ts>0?(I-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(I-g._start)*g._ts,a,s||St&&fc(g)),m!==this._time||!this._ts&&!b){w=0,y&&(d+=this._zTime=I?-Ge:Ge);break}}g=y}}if(w&&!a&&(this.pause(),w.render(m>=l?0:-Ge)._zTime=m>=l?1:-1,this._ts))return this._start=S,Fs(this),this.render(i,a,s);this._onUpdate&&!a&&Yt(this,"onUpdate",!0),(d===c&&this._tTime>=this.totalDuration()||!d&&l)&&(S===this._start||Math.abs(D)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(d===c&&this._ts>0||!d&&this._ts<0)&&Zn(this,1),!a&&!(i<0&&!l)&&(d||l||!c)&&(Yt(this,d===c&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(i,a){var s=this;if(Rn(a)||(a=en(this,a,i)),!(i instanceof ua)){if(Nt(i))return i.forEach(function(l){return s.add(l,a)}),this;if(xt(i))return this.addLabel(i,a);if(at(i))i=ct.delayedCall(0,i);else return this}return this!==i?Tn(this,i,a):this},n.getChildren=function(i,a,s,l){i===void 0&&(i=!0),a===void 0&&(a=!0),s===void 0&&(s=!0),l===void 0&&(l=-Qt);for(var c=[],u=this._first;u;)u._start>=l&&(u instanceof ct?a&&c.push(u):(s&&c.push(u),i&&c.push.apply(c,u.getChildren(!0,a,s)))),u=u._next;return c},n.getById=function(i){for(var a=this.getChildren(1,1,1),s=a.length;s--;)if(a[s].vars.id===i)return a[s]},n.remove=function(i){return xt(i)?this.removeLabel(i):at(i)?this.killTweensOf(i):(i.parent===this&&Ps(this,i),i===this._recent&&(this._recent=this._last),br(this))},n.totalTime=function(i,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ht(qt.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),e.prototype.totalTime.call(this,i,a),this._forcing=0,this):this._tTime},n.addLabel=function(i,a){return this.labels[i]=en(this,a),this},n.removeLabel=function(i){return delete this.labels[i],this},n.addPause=function(i,a,s){var l=ct.delayedCall(0,a||na,s);return l.data="isPause",this._hasPause=1,Tn(this,l,en(this,i))},n.removePause=function(i){var a=this._first;for(i=en(this,i);a;)a._start===i&&a.data==="isPause"&&Zn(a),a=a._next},n.killTweensOf=function(i,a,s){for(var l=this.getTweensOf(i,s),c=l.length;c--;)Qn!==l[c]&&l[c].kill(i,a);return this},n.getTweensOf=function(i,a){for(var s=[],l=tn(i),c=this._first,u=Rn(a),d;c;)c instanceof ct?Hw(c._targets,l)&&(u?(!Qn||c._initted&&c._ts)&&c.globalTime(0)<=a&&c.globalTime(c.totalDuration())>a:!a||c.isActive())&&s.push(c):(d=c.getTweensOf(l,a)).length&&s.push.apply(s,d),c=c._next;return s},n.tweenTo=function(i,a){a=a||{};var s=this,l=en(s,i),c=a,u=c.startAt,d=c.onStart,f=c.onStartParams,m=c.immediateRender,g,y=ct.to(s,Gt({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:a.duration||Math.abs((l-(u&&"time"in u?u.time:s._time))/s.timeScale())||Ge,onStart:function(){if(s.pause(),!g){var p=a.duration||Math.abs((l-(u&&"time"in u?u.time:s._time))/s.timeScale());y._dur!==p&&Zr(y,p,0,1).render(y._time,!0,!0),g=1}d&&d.apply(y,f||[])}},a));return m?y.render(0):y},n.tweenFromTo=function(i,a,s){return this.tweenTo(a,Gt({startAt:{time:en(this,i)}},s))},n.recent=function(){return this._recent},n.nextLabel=function(i){return i===void 0&&(i=this._time),o0(this,en(this,i))},n.previousLabel=function(i){return i===void 0&&(i=this._time),o0(this,en(this,i),1)},n.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Ge)},n.shiftChildren=function(i,a,s){s===void 0&&(s=0);for(var l=this._first,c=this.labels,u;l;)l._start>=s&&(l._start+=i,l._end+=i),l=l._next;if(a)for(u in c)c[u]>=s&&(c[u]+=i);return br(this)},n.invalidate=function(i){var a=this._first;for(this._lock=0;a;)a.invalidate(i),a=a._next;return e.prototype.invalidate.call(this,i)},n.clear=function(i){i===void 0&&(i=!0);for(var a=this._first,s;a;)s=a._next,this.remove(a),a=s;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),br(this)},n.totalDuration=function(i){var a=0,s=this,l=s._last,c=Qt,u,d,f;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-i:i));if(s._dirty){for(f=s.parent;l;)u=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>c&&s._sort&&l._ts&&!s._lock?(s._lock=1,Tn(s,l,d-l._delay,1)._lock=0):c=d,d<0&&l._ts&&(a-=d,(!f&&!s._dp||f&&f.smoothChildTiming)&&(s._start+=d/s._ts,s._time-=d,s._tTime-=d),s.shiftChildren(-d,!1,-1/0),c=0),l._end>a&&l._ts&&(a=l._end),l=u;Zr(s,s===tt&&s._time>a?s._time:a,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(i){if(tt._ts&&(Wg(tt,Is(i,tt)),Hg=qt.frame),qt.frame>=zg){zg+=Ut.autoSleep||120;var a=tt._first;if((!a||!a._ts)&&Ut.autoSleep&&qt._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||qt.sleep()}}},t})(ua);Gt(Ct.prototype,{_lock:0,_hasPause:0,_forcing:0});var uS=function(t,n,r,i,a,s,l){var c=new Bt(this._pt,t,n,0,1,S0,null,a),u=0,d=0,f,m,g,y,h,p,b,w;for(c.b=r,c.e=i,r+="",i+="",(b=~i.indexOf("random("))&&(i=sa(i)),s&&(w=[r,i],s(w,t,n),r=w[0],i=w[1]),m=r.match(rc)||[];f=rc.exec(i);)y=f[0],h=i.substring(u,f.index),g?g=(g+1)%5:h.substr(-5)==="rgba("&&(g=1),y!==m[d++]&&(p=parseFloat(m[d-1])||0,c._pt={_next:c._pt,p:h||d===1?h:",",s:p,c:y.charAt(1)==="="?Yr(p,y)-p:parseFloat(y)-p,m:g&&g<4?Math.round:0},u=rc.lastIndex);return c.c=u<i.length?i.substring(u,i.length):"",c.fp=l,(Ag.test(i)||b)&&(c.e=0),this._pt=c,c},xc=function(t,n,r,i,a,s,l,c,u,d){at(i)&&(i=i(a||0,t,s));var f=t[n],m=r!=="get"?r:at(f)?u?t[n.indexOf("set")||!at(t["get"+n.substr(3)])?n:"get"+n.substr(3)](u):t[n]():f,g=at(f)?u?pS:x0:Cc,y;if(xt(i)&&(~i.indexOf("random(")&&(i=sa(i)),i.charAt(1)==="="&&(y=Yr(m,i)+(jt(m)||0),(y||y===0)&&(i=y))),!d||m!==i||wc)return!isNaN(m*i)&&i!==""?(y=new Bt(this._pt,t,n,+m||0,i-(m||0),typeof f=="boolean"?bS:w0,0,g),u&&(y.fp=u),l&&y.modifier(l,this,t),this._pt=y):(!f&&!(n in t)&&sc(n,i),uS.call(this,t,n,m,i,g,c||Ut.stringFilter,u))},dS=function(t,n,r,i,a){if(at(t)&&(t=da(t,a,n,r,i)),!Cn(t)||t.style&&t.nodeType||Nt(t)||$g(t))return xt(t)?da(t,a,n,r,i):t;var s={},l;for(l in t)s[l]=da(t[l],a,n,r,i);return s},y0=function(t,n,r,i,a,s){var l,c,u,d;if(Vt[t]&&(l=new Vt[t]).init(a,l.rawVars?n[t]:dS(n[t],i,a,s,r),r,i,s)!==!1&&(r._pt=c=new Bt(r._pt,a,t,0,1,l.render,l,0,l.priority),r!==Kr))for(u=r._ptLookup[r._targets.indexOf(a)],d=l._props.length;d--;)u[l._props[d]]=c;return l},Qn,wc,Sc=function e(t,n,r){var i=t.vars,a=i.ease,s=i.startAt,l=i.immediateRender,c=i.lazy,u=i.onUpdate,d=i.runBackwards,f=i.yoyoEase,m=i.keyframes,g=i.autoRevert,y=t._dur,h=t._startAt,p=t._targets,b=t.parent,w=b&&b.data==="nested"?b.vars.targets:p,D=t._overwrite==="auto"&&!Jl,S=t.timeline,v,T,k,C,x,I,M,j,L,N,F,P,$;if(S&&(!m||!a)&&(a="none"),t._ease=yr(a,Vr.ease),t._yEase=f?m0(yr(f===!0?a:f,Vr.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!S&&!!i.runBackwards,!S||m&&!i.stagger){if(j=p[0]?gr(p[0]).harness:0,P=j&&i[j.prop],v=Ms(i,oc),h&&(h._zTime<0&&h.progress(1),n<0&&d&&l&&!g?h.render(-1,!0):h.revert(d&&y?Ns:Rw),h._lazy=0),s){if(Zn(t._startAt=ct.set(p,Gt({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!h&&At(c),startAt:null,delay:0,onUpdate:u&&function(){return Yt(t,"onUpdate")},stagger:0},s))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(St||!l&&!g)&&t._startAt.revert(Ns),l&&y&&n<=0&&r<=0){n&&(t._zTime=n);return}}else if(d&&y&&!h){if(n&&(l=!1),k=Gt({overwrite:!1,data:"isFromStart",lazy:l&&!h&&At(c),immediateRender:l,stagger:0,parent:b},v),P&&(k[j.prop]=P),Zn(t._startAt=ct.set(p,k)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(St?t._startAt.revert(Ns):t._startAt.render(-1,!0)),t._zTime=n,!l)e(t._startAt,Ge,Ge);else if(!n)return}for(t._pt=t._ptCache=0,c=y&&At(c)||c&&!y,T=0;T<p.length;T++){if(x=p[T],M=x._gsap||dc(p)[T]._gsap,t._ptLookup[T]=N={},lc[M.id]&&Xn.length&&Ds(),F=w===p?T:w.indexOf(x),j&&(L=new j).init(x,P||v,t,F,w)!==!1&&(t._pt=C=new Bt(t._pt,x,L.name,0,1,L.render,L,0,L.priority),L._props.forEach(function(ne){N[ne]=C}),L.priority&&(I=1)),!j||P)for(k in v)Vt[k]&&(L=y0(k,v,t,F,x,w))?L.priority&&(I=1):N[k]=C=xc.call(t,x,k,"get",v[k],F,w,0,i.stringFilter);t._op&&t._op[T]&&t.kill(x,t._op[T]),D&&t._pt&&(Qn=t,tt.killTweensOf(x,N,t.globalTime(n)),$=!t.parent,Qn=0),t._pt&&c&&(lc[M.id]=1)}I&&C0(t),t._onInit&&t._onInit(t)}t._onUpdate=u,t._initted=(!t._op||t._pt)&&!$,m&&n<=0&&S.render(Qt,!0,!0)},fS=function(t,n,r,i,a,s,l,c){var u=(t._pt&&t._ptCache||(t._ptCache={}))[n],d,f,m,g;if(!u)for(u=t._ptCache[n]=[],m=t._ptLookup,g=t._targets.length;g--;){if(d=m[g][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return wc=1,t.vars[n]="+=0",Sc(t,l),wc=0,c?ta(n+" not eligible for reset"):1;u.push(d)}for(g=u.length;g--;)f=u[g],d=f._pt||f,d.s=(i||i===0)&&!a?i:d.s+(i||0)+s*d.c,d.c=r-d.s,f.e&&(f.e=lt(r)+jt(f.e)),f.b&&(f.b=d.s+jt(f.b))},hS=function(t,n){var r=t[0]?gr(t[0]).harness:0,i=r&&r.aliases,a,s,l,c;if(!i)return n;a=qr({},n);for(s in i)if(s in a)for(c=i[s].split(","),l=c.length;l--;)a[c[l]]=a[s];return a},mS=function(t,n,r,i){var a=n.ease||i||"power1.inOut",s,l;if(Nt(n))l=r[t]||(r[t]=[]),n.forEach(function(c,u){return l.push({t:u/(n.length-1)*100,v:c,e:a})});else for(s in n)l=r[s]||(r[s]=[]),s==="ease"||l.push({t:parseFloat(t),v:n[s],e:a})},da=function(t,n,r,i,a){return at(t)?t.call(n,r,i,a):xt(t)&&~t.indexOf("random(")?sa(t):t},v0=uc+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_0={};Et(v0+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return _0[e]=1});var ct=(function(e){Ig(t,e);function t(r,i,a,s){var l;typeof i=="number"&&(a.duration=i,i=a,a=null),l=e.call(this,s?i:ra(i))||this;var c=l.vars,u=c.duration,d=c.delay,f=c.immediateRender,m=c.stagger,g=c.overwrite,y=c.keyframes,h=c.defaults,p=c.scrollTrigger,b=c.yoyoEase,w=i.parent||tt,D=(Nt(r)||$g(r)?Rn(r[0]):"length"in i)?[r]:tn(r),S,v,T,k,C,x,I,M;if(l._targets=D.length?dc(D):ta("GSAP target "+r+" not found. https://gsap.com",!Ut.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,y||m||ks(u)||ks(d)){if(i=l.vars,S=l.timeline=new Ct({data:"nested",defaults:h||{},targets:w&&w.data==="nested"?w.vars.targets:D}),S.kill(),S.parent=S._dp=Bn(l),S._start=0,m||ks(u)||ks(d)){if(k=D.length,I=m&&n0(m),Cn(m))for(C in m)~v0.indexOf(C)&&(M||(M={}),M[C]=m[C]);for(v=0;v<k;v++)T=Ms(i,_0),T.stagger=0,b&&(T.yoyoEase=b),M&&qr(T,M),x=D[v],T.duration=+da(u,Bn(l),v,x,D),T.delay=(+da(d,Bn(l),v,x,D)||0)-l._delay,!m&&k===1&&T.delay&&(l._delay=d=T.delay,l._start+=d,T.delay=0),S.to(x,T,I?I(v,x,D):0),S._ease=Oe.none;S.duration()?u=d=0:l.timeline=0}else if(y){ra(Gt(S.vars.defaults,{ease:"none"})),S._ease=yr(y.ease||i.ease||"none");var j=0,L,N,F;if(Nt(y))y.forEach(function(P){return S.to(D,P,">")}),S.duration();else{T={};for(C in y)C==="ease"||C==="easeEach"||mS(C,y[C],T,y.easeEach);for(C in T)for(L=T[C].sort(function(P,$){return P.t-$.t}),j=0,v=0;v<L.length;v++)N=L[v],F={ease:N.e,duration:(N.t-(v?L[v-1].t:0))/100*u},F[C]=N.v,S.to(D,F,j),j+=F.duration;S.duration()<u&&S.to({},{duration:u-S.duration()})}}u||l.duration(u=S.duration())}else l.timeline=0;return g===!0&&!Jl&&(Qn=Bn(l),tt.killTweensOf(D),Qn=0),Tn(w,Bn(l),a),i.reversed&&l.reverse(),i.paused&&l.paused(!0),(f||!u&&!y&&l._start===ht(w._time)&&At(f)&&Vw(Bn(l))&&w.data!=="nested")&&(l._tTime=-Ge,l.render(Math.max(0,-d)||0)),p&&Kg(Bn(l),p),l}var n=t.prototype;return n.render=function(i,a,s){var l=this._time,c=this._tDur,u=this._dur,d=i<0,f=i>c-Ge&&!d?c:i<Ge?0:i,m,g,y,h,p,b,w,D,S;if(!u)Yw(this,i,a,s);else if(f!==this._tTime||!i||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(m=f,D=this.timeline,this._repeat){if(h=u+this._rDelay,this._repeat<-1&&d)return this.totalTime(h*100+i,a,s);if(m=ht(f%h),f===c?(y=this._repeat,m=u):(p=ht(f/h),y=~~p,y&&y===p?(m=u,y--):m>u&&(m=u)),b=this._yoyo&&y&1,b&&(S=this._yEase,m=u-m),p=Xr(this._tTime,h),m===l&&!s&&this._initted&&y===p)return this._tTime=f,this;y!==p&&(D&&this._yEase&&p0(D,b),this.vars.repeatRefresh&&!b&&!this._lock&&m!==h&&this._initted&&(this._lock=s=1,this.render(ht(h*y),!0).invalidate()._lock=0))}if(!this._initted){if(Jg(this,d?i:m,s,a,f))return this._tTime=0,this;if(l!==this._time&&!(s&&this.vars.repeatRefresh&&y!==p))return this;if(u!==this._dur)return this.render(i,a,s)}if(this._tTime=f,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=w=(S||this._ease)(m/u),this._from&&(this.ratio=w=1-w),!l&&f&&!a&&!p&&(Yt(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(w,g.d),g=g._next;D&&D.render(i<0?i:D._dur*D._ease(m/this._dur),a,s)||this._startAt&&(this._zTime=i),this._onUpdate&&!a&&(d&&hc(this,i,a,s),Yt(this,"onUpdate")),this._repeat&&y!==p&&this.vars.onRepeat&&!a&&this.parent&&Yt(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(d&&!this._onUpdate&&hc(this,i,!0,!0),(i||!u)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Zn(this,1),!a&&!(d&&!l)&&(f||l||b)&&(Yt(this,f===c?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),e.prototype.invalidate.call(this,i)},n.resetTo=function(i,a,s,l,c){ca||qt.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||Sc(this,u),d=this._ease(u/this._dur),fS(this,i,a,s,l,d,u,c)?this.resetTo(i,a,s,l,1):($s(this,0),this.parent||qg(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(i,a){if(a===void 0&&(a="all"),!i&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?oa(this):this.scrollTrigger&&this.scrollTrigger.kill(!!St),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(i,a,Qn&&Qn.vars.overwrite!==!0)._first||oa(this),this.parent&&s!==this.timeline.totalDuration()&&Zr(this,this._dur*this.timeline._tDur/s,0,1),this}var l=this._targets,c=i?tn(i):l,u=this._ptLookup,d=this._pt,f,m,g,y,h,p,b;if((!a||a==="all")&&Uw(l,c))return a==="all"&&(this._pt=0),oa(this);for(f=this._op=this._op||[],a!=="all"&&(xt(a)&&(h={},Et(a,function(w){return h[w]=1}),a=h),a=hS(l,a)),b=l.length;b--;)if(~c.indexOf(l[b])){m=u[b],a==="all"?(f[b]=a,y=m,g={}):(g=f[b]=f[b]||{},y=a);for(h in y)p=m&&m[h],p&&((!("kill"in p.d)||p.d.kill(h)===!0)&&Ps(this,p,"_pt"),delete m[h]),g!=="all"&&(g[h]=1)}return this._initted&&!this._pt&&d&&oa(this),this},t.to=function(i,a){return new t(i,a,arguments[2])},t.from=function(i,a){return ia(1,arguments)},t.delayedCall=function(i,a,s,l){return new t(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:a,onReverseComplete:a,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:l})},t.fromTo=function(i,a,s){return ia(2,arguments)},t.set=function(i,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new t(i,a)},t.killTweensOf=function(i,a,s){return tt.killTweensOf(i,a,s)},t})(ua);Gt(ct.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Et("staggerTo,staggerFrom,staggerFromTo",function(e){ct[e]=function(){var t=new Ct,n=pc.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var Cc=function(t,n,r){return t[n]=r},x0=function(t,n,r){return t[n](r)},pS=function(t,n,r,i){return t[n](i.fp,r)},gS=function(t,n,r){return t.setAttribute(n,r)},kc=function(t,n){return at(t[n])?x0:ec(t[n])&&t.setAttribute?gS:Cc},w0=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},bS=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},S0=function(t,n){var r=n._pt,i="";if(!t&&n.b)i=n.b;else if(t===1&&n.e)i=n.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*t):Math.round((r.s+r.c*t)*1e4)/1e4)+i,r=r._next;i+=n.c}n.set(n.t,n.p,i,n)},Tc=function(t,n){for(var r=n._pt;r;)r.r(t,r.d),r=r._next},yS=function(t,n,r,i){for(var a=this._pt,s;a;)s=a._next,a.p===i&&a.modifier(t,n,r),a=s},vS=function(t){for(var n=this._pt,r,i;n;)i=n._next,n.p===t&&!n.op||n.op===t?Ps(this,n,"_pt"):n.dep||(r=1),n=i;return!r},_S=function(t,n,r,i){i.mSet(t,n,i.m.call(i.tween,r,i.mt),i)},C0=function(t){for(var n=t._pt,r,i,a,s;n;){for(r=n._next,i=a;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:s)?n._prev._next=n:a=n,(n._next=i)?i._prev=n:s=n,n=r}t._pt=a},Bt=(function(){function e(n,r,i,a,s,l,c,u,d){this.t=r,this.s=a,this.c=s,this.p=i,this.r=l||w0,this.d=c||this,this.set=u||Cc,this.pr=d||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(r,i,a){this.mSet=this.mSet||this.set,this.set=_S,this.m=r,this.mt=a,this.tween=i},e})();Et(uc+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return oc[e]=1}),Wt.TweenMax=Wt.TweenLite=ct,Wt.TimelineLite=Wt.TimelineMax=Ct,tt=new Ct({sortChildren:!1,defaults:Vr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Ut.stringFilter=h0;var _r=[],Ls={},xS=[],k0=0,wS=0,Nc=function(t){return(Ls[t]||xS).map(function(n){return n()})},jc=function(){var t=Date.now(),n=[];t-k0>2&&(Nc("matchMediaInit"),_r.forEach(function(r){var i=r.queries,a=r.conditions,s,l,c,u;for(l in i)s=kn.matchMedia(i[l]).matches,s&&(c=1),s!==a[l]&&(a[l]=s,u=1);u&&(r.revert(),c&&n.push(r))}),Nc("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),k0=t,Nc("matchMedia"))},T0=(function(){function e(n,r){this.selector=r&&gc(r),this.data=[],this._r=[],this.isReverted=!1,this.id=wS++,n&&this.add(n)}var t=e.prototype;return t.add=function(r,i,a){at(r)&&(a=i,i=r,r=at);var s=this,l=function(){var u=Ke,d=s.selector,f;return u&&u!==s&&u.data.push(s),a&&(s.selector=gc(a)),Ke=s,f=i.apply(s,arguments),at(f)&&s._r.push(f),Ke=u,s.selector=d,s.isReverted=!1,f};return s.last=l,r===at?l(s,function(c){return s.add(null,c)}):r?s[r]=l:l},t.ignore=function(r){var i=Ke;Ke=null,r(this),Ke=i},t.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof e?r.push.apply(r,i.getTweens()):i instanceof ct&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(r,i){var a=this;if(r?(function(){for(var l=a.getTweens(),c=a.data.length,u;c--;)u=a.data[c],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,f){return f.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),c=a.data.length;c--;)u=a.data[c],u instanceof Ct?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof ct)&&u.revert&&u.revert(r);a._r.forEach(function(d){return d(r,a)}),a.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),i)for(var s=_r.length;s--;)_r[s].id===this.id&&_r.splice(s,1)},t.revert=function(r){this.kill(r||{})},e})(),SS=(function(){function e(n){this.contexts=[],this.scope=n,Ke&&Ke.data.push(this)}var t=e.prototype;return t.add=function(r,i,a){Cn(r)||(r={matches:r});var s=new T0(0,a||this.scope),l=s.conditions={},c,u,d;Ke&&!s.selector&&(s.selector=Ke.selector),this.contexts.push(s),i=s.add("onMatch",i),s.queries=r;for(u in r)u==="all"?d=1:(c=kn.matchMedia(r[u]),c&&(_r.indexOf(s)<0&&_r.push(s),(l[u]=c.matches)&&(d=1),c.addListener?c.addListener(jc):c.addEventListener("change",jc)));return d&&i(s,function(f){return s.add(null,f)}),this},t.revert=function(r){this.kill(r||{})},t.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},e})(),As={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(i){return c0(i)})},timeline:function(t){return new Ct(t)},getTweensOf:function(t,n){return tt.getTweensOf(t,n)},getProperty:function(t,n,r,i){xt(t)&&(t=tn(t)[0]);var a=gr(t||{}).get,s=r?Gg:Vg;return r==="native"&&(r=""),t&&(n?s((Vt[n]&&Vt[n].get||a)(t,n,r,i)):function(l,c,u){return s((Vt[l]&&Vt[l].get||a)(t,l,c,u))})},quickSetter:function(t,n,r){if(t=tn(t),t.length>1){var i=t.map(function(d){return Rt.quickSetter(d,n,r)}),a=i.length;return function(d){for(var f=a;f--;)i[f](d)}}t=t[0]||{};var s=Vt[n],l=gr(t),c=l.harness&&(l.harness.aliases||{})[n]||n,u=s?function(d){var f=new s;Kr._pt=0,f.init(t,r?d+r:d,Kr,0,[t]),f.render(1,f),Kr._pt&&Tc(1,Kr)}:l.set(t,c);return s?u:function(d){return u(t,c,r?d+r:d,l,1)}},quickTo:function(t,n,r){var i,a=Rt.to(t,Gt((i={},i[n]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),s=function(c,u,d){return a.resetTo(n,c,u,d)};return s.tween=a,s},isTweening:function(t){return tt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=yr(t.ease,Vr.ease)),Yg(Vr,t||{})},config:function(t){return Yg(Ut,t||{})},registerEffect:function(t){var n=t.name,r=t.effect,i=t.plugins,a=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach(function(l){return l&&!Vt[l]&&!Wt[l]&&ta(n+" effect requires "+l+" plugin.")}),cc[n]=function(l,c,u){return r(tn(l),Gt(c||{},a),u)},s&&(Ct.prototype[n]=function(l,c,u){return this.add(cc[n](l,Cn(c)?c:(u=c)&&{},this),u)})},registerEase:function(t,n){Oe[t]=yr(n)},parseEase:function(t,n){return arguments.length?yr(t,n):Oe},getById:function(t){return tt.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var r=new Ct(t),i,a;for(r.smoothChildTiming=At(t.smoothChildTiming),tt.remove(r),r._dp=0,r._time=r._tTime=tt._time,i=tt._first;i;)a=i._next,(n||!(!i._dur&&i instanceof ct&&i.vars.onComplete===i._targets[0]))&&Tn(r,i,i._start-i._delay),i=a;return Tn(tt,r,0),r},context:function(t,n){return t?new T0(t,n):Ke},matchMedia:function(t){return new SS(t)},matchMediaRefresh:function(){return _r.forEach(function(t){var n=t.conditions,r,i;for(i in n)n[i]&&(n[i]=!1,r=1);r&&t.revert()})||jc()},addEventListener:function(t,n){var r=Ls[t]||(Ls[t]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(t,n){var r=Ls[t],i=r&&r.indexOf(n);i>=0&&r.splice(i,1)},utils:{wrap:tS,wrapYoyo:nS,distribute:n0,random:i0,snap:r0,normalize:eS,getUnit:jt,clamp:Zw,splitColor:u0,toArray:tn,selector:gc,mapRange:s0,pipe:Jw,unitize:Qw,interpolate:rS,shuffle:t0},install:Rg,effects:cc,ticker:qt,updateRoot:Ct.updateRoot,plugins:Vt,globalTimeline:tt,core:{PropTween:Bt,globals:Og,Tween:ct,Timeline:Ct,Animation:ua,getCache:gr,_removeLinkedListItem:Ps,reverting:function(){return St},context:function(t){return t&&Ke&&(Ke.data.push(t),t._ctx=Ke),Ke},suppressOverwrites:function(t){return Jl=t}}};Et("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return As[e]=ct[e]}),qt.add(Ct.updateRoot),Kr=As.to({},{duration:0});var CS=function(t,n){for(var r=t._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},kS=function(t,n){var r=t._targets,i,a,s;for(i in n)for(a=r.length;a--;)s=t._ptLookup[a][i],s&&(s=s.d)&&(s._pt&&(s=CS(s,i)),s&&s.modifier&&s.modifier(n[i],t,r[a],i))},Dc=function(t,n){return{name:t,headless:1,rawVars:1,init:function(i,a,s){s._onInit=function(l){var c,u;if(xt(a)&&(c={},Et(a,function(d){return c[d]=1}),a=c),n){c={};for(u in a)c[u]=n(a[u]);a=c}kS(l,a)}}}},Rt=As.registerPlugin({name:"attr",init:function(t,n,r,i,a){var s,l,c;this.tween=r;for(s in n)c=t.getAttribute(s)||"",l=this.add(t,"setAttribute",(c||0)+"",n[s],i,a,0,0,s),l.op=s,l.b=c,this._props.push(s)},render:function(t,n){for(var r=n._pt;r;)St?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",headless:1,init:function(t,n){for(var r=n.length;r--;)this.add(t,r,t[r]||0,n[r],0,0,0,0,0,1)}},Dc("roundProps",bc),Dc("modifiers"),Dc("snap",r0))||As;ct.version=Ct.version=Rt.version="3.13.0",Bg=1,tc()&&Jr();var TS=Oe.Power0,NS=Oe.Power1,jS=Oe.Power2,DS=Oe.Power3,MS=Oe.Power4,PS=Oe.Linear,IS=Oe.Quad,FS=Oe.Cubic,$S=Oe.Quart,LS=Oe.Quint,AS=Oe.Strong,ES=Oe.Elastic,BS=Oe.Back,RS=Oe.SteppedEase,OS=Oe.Bounce,HS=Oe.Sine,zS=Oe.Expo,US=Oe.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var N0,er,Qr,Mc,xr,j0,Pc,WS=function(){return typeof window<"u"},On={},wr=180/Math.PI,ei=Math.PI/180,ti=Math.atan2,D0=1e8,Ic=/([A-Z])/g,VS=/(left|right|width|margin|padding|x)/i,GS=/[\s,\(]\S/,Nn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Fc=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},YS=function(t,n){return n.set(n.t,n.p,t===1?n.e:Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},qS=function(t,n){return n.set(n.t,n.p,t?Math.round((n.s+n.c*t)*1e4)/1e4+n.u:n.b,n)},XS=function(t,n){var r=n.s+n.c*t;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},M0=function(t,n){return n.set(n.t,n.p,t?n.e:n.b,n)},P0=function(t,n){return n.set(n.t,n.p,t!==1?n.b:n.e,n)},ZS=function(t,n,r){return t.style[n]=r},KS=function(t,n,r){return t.style.setProperty(n,r)},JS=function(t,n,r){return t._gsap[n]=r},QS=function(t,n,r){return t._gsap.scaleX=t._gsap.scaleY=r},eC=function(t,n,r,i,a){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(a,s)},tC=function(t,n,r,i,a){var s=t._gsap;s[n]=r,s.renderTransform(a,s)},nt="transform",Ot=nt+"Origin",nC=function e(t,n){var r=this,i=this.target,a=i.style,s=i._gsap;if(t in On&&a){if(this.tfm=this.tfm||{},t!=="transform")t=Nn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return r.tfm[l]=Hn(i,l)}):this.tfm[t]=s.x?s[t]:Hn(i,t),t===Ot&&(this.tfm.zOrigin=s.zOrigin);else return Nn.transform.split(",").forEach(function(l){return e.call(r,l,n)});if(this.props.indexOf(nt)>=0)return;s.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Ot,n,"")),t=nt}(a||n)&&this.props.push(t,n,a[t])},I0=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},rC=function(){var t=this.props,n=this.target,r=n.style,i=n._gsap,a,s;for(a=0;a<t.length;a+=3)t[a+1]?t[a+1]===2?n[t[a]](t[a+2]):n[t[a]]=t[a+2]:t[a+2]?r[t[a]]=t[a+2]:r.removeProperty(t[a].substr(0,2)==="--"?t[a]:t[a].replace(Ic,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)i[s]=this.tfm[s];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),a=Pc(),(!a||!a.isStart)&&!r[nt]&&(I0(r),i.zOrigin&&r[Ot]&&(r[Ot]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},F0=function(t,n){var r={target:t,props:[],revert:rC,save:nC};return t._gsap||Rt.core.getCache(t),n&&t.style&&t.nodeType&&n.split(",").forEach(function(i){return r.save(i)}),r},$0,$c=function(t,n){var r=er.createElementNS?er.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):er.createElement(t);return r&&r.style?r:er.createElement(t)},nn=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(Ic,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,ni(n)||n,1)||""},L0="O,Moz,ms,Ms,Webkit".split(","),ni=function(t,n,r){var i=n||xr,a=i.style,s=5;if(t in a&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(L0[s]+t in a););return s<0?null:(s===3?"ms":s>=0?L0[s]:"")+t},Lc=function(){WS()&&window.document&&(N0=window,er=N0.document,Qr=er.documentElement,xr=$c("div")||{style:{}},$c("div"),nt=ni(nt),Ot=nt+"Origin",xr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",$0=!!ni("perspective"),Pc=Rt.core.reverting,Mc=1)},A0=function(t){var n=t.ownerSVGElement,r=$c("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=t.cloneNode(!0),a;i.style.display="block",r.appendChild(i),Qr.appendChild(r);try{a=i.getBBox()}catch{}return r.removeChild(i),Qr.removeChild(r),a},E0=function(t,n){for(var r=n.length;r--;)if(t.hasAttribute(n[r]))return t.getAttribute(n[r])},B0=function(t){var n,r;try{n=t.getBBox()}catch{n=A0(t),r=1}return n&&(n.width||n.height)||r||(n=A0(t)),n&&!n.width&&!n.x&&!n.y?{x:+E0(t,["x","cx","x1"])||0,y:+E0(t,["y","cy","y1"])||0,width:0,height:0}:n},R0=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&B0(t))},Sr=function(t,n){if(n){var r=t.style,i;n in On&&n!==Ot&&(n=nt),r.removeProperty?(i=n.substr(0,2),(i==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(i==="--"?n:n.replace(Ic,"-$1").toLowerCase())):r.removeAttribute(n)}},tr=function(t,n,r,i,a,s){var l=new Bt(t._pt,n,r,0,1,s?P0:M0);return t._pt=l,l.b=i,l.e=a,t._props.push(r),l},O0={deg:1,rad:1,turn:1},iC={grid:1,flex:1},nr=function e(t,n,r,i){var a=parseFloat(r)||0,s=(r+"").trim().substr((a+"").length)||"px",l=xr.style,c=VS.test(n),u=t.tagName.toLowerCase()==="svg",d=(u?"client":"offset")+(c?"Width":"Height"),f=100,m=i==="px",g=i==="%",y,h,p,b;if(i===s||!a||O0[i]||O0[s])return a;if(s!=="px"&&!m&&(a=e(t,n,r,"px")),b=t.getCTM&&R0(t),(g||s==="%")&&(On[n]||~n.indexOf("adius")))return y=b?t.getBBox()[c?"width":"height"]:t[d],lt(g?a/y*f:a/100*y);if(l[c?"width":"height"]=f+(m?s:i),h=i!=="rem"&&~n.indexOf("adius")||i==="em"&&t.appendChild&&!u?t:t.parentNode,b&&(h=(t.ownerSVGElement||{}).parentNode),(!h||h===er||!h.appendChild)&&(h=er.body),p=h._gsap,p&&g&&p.width&&c&&p.time===qt.time&&!p.uncache)return lt(a/p.width*f);if(g&&(n==="height"||n==="width")){var w=t.style[n];t.style[n]=f+i,y=t[d],w?t.style[n]=w:Sr(t,n)}else(g||s==="%")&&!iC[nn(h,"display")]&&(l.position=nn(t,"position")),h===t&&(l.position="static"),h.appendChild(xr),y=xr[d],h.removeChild(xr),l.position="absolute";return c&&g&&(p=gr(h),p.time=qt.time,p.width=h[d]),lt(m?y*a/f:y&&a?f/y*a:0)},Hn=function(t,n,r,i){var a;return Mc||Lc(),n in Nn&&n!=="transform"&&(n=Nn[n],~n.indexOf(",")&&(n=n.split(",")[0])),On[n]&&n!=="transform"?(a=ha(t,i),a=n!=="transformOrigin"?a[n]:a.svg?a.origin:Bs(nn(t,Ot))+" "+a.zOrigin+"px"):(a=t.style[n],(!a||a==="auto"||i||~(a+"").indexOf("calc("))&&(a=Es[n]&&Es[n](t,n,r)||nn(t,n)||Ug(t,n)||(n==="opacity"?1:0))),r&&!~(a+"").trim().indexOf(" ")?nr(t,n,a,r)+r:a},aC=function(t,n,r,i){if(!r||r==="none"){var a=ni(n,t,1),s=a&&nn(t,a,1);s&&s!==r?(n=a,r=s):n==="borderColor"&&(r=nn(t,"borderTopColor"))}var l=new Bt(this._pt,t.style,n,0,1,S0),c=0,u=0,d,f,m,g,y,h,p,b,w,D,S,v;if(l.b=r,l.e=i,r+="",i+="",i.substring(0,6)==="var(--"&&(i=nn(t,i.substring(4,i.indexOf(")")))),i==="auto"&&(h=t.style[n],t.style[n]=i,i=nn(t,n)||i,h?t.style[n]=h:Sr(t,n)),d=[r,i],h0(d),r=d[0],i=d[1],m=r.match(Gr)||[],v=i.match(Gr)||[],v.length){for(;f=Gr.exec(i);)p=f[0],w=i.substring(c,f.index),y?y=(y+1)%5:(w.substr(-5)==="rgba("||w.substr(-5)==="hsla(")&&(y=1),p!==(h=m[u++]||"")&&(g=parseFloat(h)||0,S=h.substr((g+"").length),p.charAt(1)==="="&&(p=Yr(g,p)+S),b=parseFloat(p),D=p.substr((b+"").length),c=Gr.lastIndex-D.length,D||(D=D||Ut.units[n]||S,c===i.length&&(i+=D,l.e+=D)),S!==D&&(g=nr(t,n,h,D)||0),l._pt={_next:l._pt,p:w||u===1?w:",",s:g,c:b-g,m:y&&y<4||n==="zIndex"?Math.round:0});l.c=c<i.length?i.substring(c,i.length):""}else l.r=n==="display"&&i==="none"?P0:M0;return Ag.test(i)&&(l.e=0),this._pt=l,l},H0={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},sC=function(t){var n=t.split(" "),r=n[0],i=n[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(t=r,r=i,i=t),n[0]=H0[r]||r,n[1]=H0[i]||i,n.join(" ")},oC=function(t,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,i=r.style,a=n.u,s=r._gsap,l,c,u;if(a==="all"||a===!0)i.cssText="",c=1;else for(a=a.split(","),u=a.length;--u>-1;)l=a[u],On[l]&&(c=1,l=l==="transformOrigin"?Ot:nt),Sr(r,l);c&&(Sr(r,nt),s&&(s.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",ha(r,1),s.uncache=1,I0(i)))}},Es={clearProps:function(t,n,r,i,a){if(a.data!=="isFromStart"){var s=t._pt=new Bt(t._pt,n,r,0,0,oC);return s.u=i,s.pr=-10,s.tween=a,t._props.push(r),1}}},fa=[1,0,0,1,0,0],z0={},U0=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},W0=function(t){var n=nn(t,nt);return U0(n)?fa:n.substr(7).match(Lg).map(lt)},Ac=function(t,n){var r=t._gsap||gr(t),i=t.style,a=W0(t),s,l,c,u;return r.svg&&t.getAttribute("transform")?(c=t.transform.baseVal.consolidate().matrix,a=[c.a,c.b,c.c,c.d,c.e,c.f],a.join(",")==="1,0,0,1,0,0"?fa:a):(a===fa&&!t.offsetParent&&t!==Qr&&!r.svg&&(c=i.display,i.display="block",s=t.parentNode,(!s||!t.offsetParent&&!t.getBoundingClientRect().width)&&(u=1,l=t.nextElementSibling,Qr.appendChild(t)),a=W0(t),c?i.display=c:Sr(t,"display"),u&&(l?s.insertBefore(t,l):s?s.appendChild(t):Qr.removeChild(t))),n&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},Ec=function(t,n,r,i,a,s){var l=t._gsap,c=a||Ac(t,!0),u=l.xOrigin||0,d=l.yOrigin||0,f=l.xOffset||0,m=l.yOffset||0,g=c[0],y=c[1],h=c[2],p=c[3],b=c[4],w=c[5],D=n.split(" "),S=parseFloat(D[0])||0,v=parseFloat(D[1])||0,T,k,C,x;r?c!==fa&&(k=g*p-y*h)&&(C=S*(p/k)+v*(-h/k)+(h*w-p*b)/k,x=S*(-y/k)+v*(g/k)-(g*w-y*b)/k,S=C,v=x):(T=B0(t),S=T.x+(~D[0].indexOf("%")?S/100*T.width:S),v=T.y+(~(D[1]||D[0]).indexOf("%")?v/100*T.height:v)),i||i!==!1&&l.smooth?(b=S-u,w=v-d,l.xOffset=f+(b*g+w*h)-b,l.yOffset=m+(b*y+w*p)-w):l.xOffset=l.yOffset=0,l.xOrigin=S,l.yOrigin=v,l.smooth=!!i,l.origin=n,l.originIsAbsolute=!!r,t.style[Ot]="0px 0px",s&&(tr(s,l,"xOrigin",u,S),tr(s,l,"yOrigin",d,v),tr(s,l,"xOffset",f,l.xOffset),tr(s,l,"yOffset",m,l.yOffset)),t.setAttribute("data-svg-origin",S+" "+v)},ha=function(t,n){var r=t._gsap||new b0(t);if("x"in r&&!n&&!r.uncache)return r;var i=t.style,a=r.scaleX<0,s="px",l="deg",c=getComputedStyle(t),u=nn(t,Ot)||"0",d,f,m,g,y,h,p,b,w,D,S,v,T,k,C,x,I,M,j,L,N,F,P,$,ne,X,O,H,z,re,U,de;return d=f=m=h=p=b=w=D=S=0,g=y=1,r.svg=!!(t.getCTM&&R0(t)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(i[nt]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[nt]!=="none"?c[nt]:"")),i.scale=i.rotate=i.translate="none"),k=Ac(t,r.svg),r.svg&&(r.uncache?(ne=t.getBBox(),u=r.xOrigin-ne.x+"px "+(r.yOrigin-ne.y)+"px",$=""):$=!n&&t.getAttribute("data-svg-origin"),Ec(t,$||u,!!$||r.originIsAbsolute,r.smooth!==!1,k)),v=r.xOrigin||0,T=r.yOrigin||0,k!==fa&&(M=k[0],j=k[1],L=k[2],N=k[3],d=F=k[4],f=P=k[5],k.length===6?(g=Math.sqrt(M*M+j*j),y=Math.sqrt(N*N+L*L),h=M||j?ti(j,M)*wr:0,w=L||N?ti(L,N)*wr+h:0,w&&(y*=Math.abs(Math.cos(w*ei))),r.svg&&(d-=v-(v*M+T*L),f-=T-(v*j+T*N))):(de=k[6],re=k[7],O=k[8],H=k[9],z=k[10],U=k[11],d=k[12],f=k[13],m=k[14],C=ti(de,z),p=C*wr,C&&(x=Math.cos(-C),I=Math.sin(-C),$=F*x+O*I,ne=P*x+H*I,X=de*x+z*I,O=F*-I+O*x,H=P*-I+H*x,z=de*-I+z*x,U=re*-I+U*x,F=$,P=ne,de=X),C=ti(-L,z),b=C*wr,C&&(x=Math.cos(-C),I=Math.sin(-C),$=M*x-O*I,ne=j*x-H*I,X=L*x-z*I,U=N*I+U*x,M=$,j=ne,L=X),C=ti(j,M),h=C*wr,C&&(x=Math.cos(C),I=Math.sin(C),$=M*x+j*I,ne=F*x+P*I,j=j*x-M*I,P=P*x-F*I,M=$,F=ne),p&&Math.abs(p)+Math.abs(h)>359.9&&(p=h=0,b=180-b),g=lt(Math.sqrt(M*M+j*j+L*L)),y=lt(Math.sqrt(P*P+de*de)),C=ti(F,P),w=Math.abs(C)>2e-4?C*wr:0,S=U?1/(U<0?-U:U):0),r.svg&&($=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!U0(nn(t,nt)),$&&t.setAttribute("transform",$))),Math.abs(w)>90&&Math.abs(w)<270&&(a?(g*=-1,w+=h<=0?180:-180,h+=h<=0?180:-180):(y*=-1,w+=w<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-d)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+s,r.y=f-((r.yPercent=f&&(!n&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-f)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+s,r.z=m+s,r.scaleX=lt(g),r.scaleY=lt(y),r.rotation=lt(h)+l,r.rotationX=lt(p)+l,r.rotationY=lt(b)+l,r.skewX=w+l,r.skewY=D+l,r.transformPerspective=S+s,(r.zOrigin=parseFloat(u.split(" ")[2])||!n&&r.zOrigin||0)&&(i[Ot]=Bs(u)),r.xOffset=r.yOffset=0,r.force3D=Ut.force3D,r.renderTransform=r.svg?cC:$0?V0:lC,r.uncache=0,r},Bs=function(t){return(t=t.split(" "))[0]+" "+t[1]},Bc=function(t,n,r){var i=jt(n);return lt(parseFloat(n)+parseFloat(nr(t,"x",r+"px",i)))+i},lC=function(t,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,V0(t,n)},Cr="0deg",ma="0px",kr=") ",V0=function(t,n){var r=n||this,i=r.xPercent,a=r.yPercent,s=r.x,l=r.y,c=r.z,u=r.rotation,d=r.rotationY,f=r.rotationX,m=r.skewX,g=r.skewY,y=r.scaleX,h=r.scaleY,p=r.transformPerspective,b=r.force3D,w=r.target,D=r.zOrigin,S="",v=b==="auto"&&t&&t!==1||b===!0;if(D&&(f!==Cr||d!==Cr)){var T=parseFloat(d)*ei,k=Math.sin(T),C=Math.cos(T),x;T=parseFloat(f)*ei,x=Math.cos(T),s=Bc(w,s,k*x*-D),l=Bc(w,l,-Math.sin(T)*-D),c=Bc(w,c,C*x*-D+D)}p!==ma&&(S+="perspective("+p+kr),(i||a)&&(S+="translate("+i+"%, "+a+"%) "),(v||s!==ma||l!==ma||c!==ma)&&(S+=c!==ma||v?"translate3d("+s+", "+l+", "+c+") ":"translate("+s+", "+l+kr),u!==Cr&&(S+="rotate("+u+kr),d!==Cr&&(S+="rotateY("+d+kr),f!==Cr&&(S+="rotateX("+f+kr),(m!==Cr||g!==Cr)&&(S+="skew("+m+", "+g+kr),(y!==1||h!==1)&&(S+="scale("+y+", "+h+kr),w.style[nt]=S||"translate(0, 0)"},cC=function(t,n){var r=n||this,i=r.xPercent,a=r.yPercent,s=r.x,l=r.y,c=r.rotation,u=r.skewX,d=r.skewY,f=r.scaleX,m=r.scaleY,g=r.target,y=r.xOrigin,h=r.yOrigin,p=r.xOffset,b=r.yOffset,w=r.forceCSS,D=parseFloat(s),S=parseFloat(l),v,T,k,C,x;c=parseFloat(c),u=parseFloat(u),d=parseFloat(d),d&&(d=parseFloat(d),u+=d,c+=d),c||u?(c*=ei,u*=ei,v=Math.cos(c)*f,T=Math.sin(c)*f,k=Math.sin(c-u)*-m,C=Math.cos(c-u)*m,u&&(d*=ei,x=Math.tan(u-d),x=Math.sqrt(1+x*x),k*=x,C*=x,d&&(x=Math.tan(d),x=Math.sqrt(1+x*x),v*=x,T*=x)),v=lt(v),T=lt(T),k=lt(k),C=lt(C)):(v=f,C=m,T=k=0),(D&&!~(s+"").indexOf("px")||S&&!~(l+"").indexOf("px"))&&(D=nr(g,"x",s,"px"),S=nr(g,"y",l,"px")),(y||h||p||b)&&(D=lt(D+y-(y*v+h*k)+p),S=lt(S+h-(y*T+h*C)+b)),(i||a)&&(x=g.getBBox(),D=lt(D+i/100*x.width),S=lt(S+a/100*x.height)),x="matrix("+v+","+T+","+k+","+C+","+D+","+S+")",g.setAttribute("transform",x),w&&(g.style[nt]=x)},uC=function(t,n,r,i,a){var s=360,l=xt(a),c=parseFloat(a)*(l&&~a.indexOf("rad")?wr:1),u=c-i,d=i+u+"deg",f,m;return l&&(f=a.split("_")[1],f==="short"&&(u%=s,u!==u%(s/2)&&(u+=u<0?s:-s)),f==="cw"&&u<0?u=(u+s*D0)%s-~~(u/s)*s:f==="ccw"&&u>0&&(u=(u-s*D0)%s-~~(u/s)*s)),t._pt=m=new Bt(t._pt,n,r,i,u,YS),m.e=d,m.u="deg",t._props.push(r),m},G0=function(t,n){for(var r in n)t[r]=n[r];return t},dC=function(t,n,r){var i=G0({},r._gsap),a="perspective,force3D,transformOrigin,svgOrigin",s=r.style,l,c,u,d,f,m,g,y;i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),s[nt]=n,l=ha(r,1),Sr(r,nt),r.setAttribute("transform",u)):(u=getComputedStyle(r)[nt],s[nt]=n,l=ha(r,1),s[nt]=u);for(c in On)u=i[c],d=l[c],u!==d&&a.indexOf(c)<0&&(g=jt(u),y=jt(d),f=g!==y?nr(r,c,u,y):parseFloat(u),m=parseFloat(d),t._pt=new Bt(t._pt,l,c,f,m-f,Fc),t._pt.u=y||0,t._props.push(c));G0(l,i)};Et("padding,margin,Width,Radius",function(e,t){var n="Top",r="Right",i="Bottom",a="Left",s=(t<3?[n,r,i,a]:[n+a,n+r,i+r,i+a]).map(function(l){return t<2?e+l:"border"+l+e});Es[t>1?"border"+e:e]=function(l,c,u,d,f){var m,g;if(arguments.length<4)return m=s.map(function(y){return Hn(l,y,u)}),g=m.join(" "),g.split(m[0]).length===5?m[0]:g;m=(d+"").split(" "),g={},s.forEach(function(y,h){return g[y]=m[h]=m[h]||m[(h-1)/2|0]}),l.init(c,g,f)}});var Rc={name:"css",register:Lc,targetTest:function(t){return t.style&&t.nodeType},init:function(t,n,r,i,a){var s=this._props,l=t.style,c=r.vars.startAt,u,d,f,m,g,y,h,p,b,w,D,S,v,T,k,C;Mc||Lc(),this.styles=this.styles||F0(t),C=this.styles.props,this.tween=r;for(h in n)if(h!=="autoRound"&&(d=n[h],!(Vt[h]&&y0(h,n,r,i,t,a)))){if(g=typeof d,y=Es[h],g==="function"&&(d=d.call(r,i,t,a),g=typeof d),g==="string"&&~d.indexOf("random(")&&(d=sa(d)),y)y(this,t,h,d,r)&&(k=1);else if(h.substr(0,2)==="--")u=(getComputedStyle(t).getPropertyValue(h)+"").trim(),d+="",Jn.lastIndex=0,Jn.test(u)||(p=jt(u),b=jt(d)),b?p!==b&&(u=nr(t,h,u,b)+b):p&&(d+=p),this.add(l,"setProperty",u,d,i,a,0,0,h),s.push(h),C.push(h,0,l[h]);else if(g!=="undefined"){if(c&&h in c?(u=typeof c[h]=="function"?c[h].call(r,i,t,a):c[h],xt(u)&&~u.indexOf("random(")&&(u=sa(u)),jt(u+"")||u==="auto"||(u+=Ut.units[h]||jt(Hn(t,h))||""),(u+"").charAt(1)==="="&&(u=Hn(t,h))):u=Hn(t,h),m=parseFloat(u),w=g==="string"&&d.charAt(1)==="="&&d.substr(0,2),w&&(d=d.substr(2)),f=parseFloat(d),h in Nn&&(h==="autoAlpha"&&(m===1&&Hn(t,"visibility")==="hidden"&&f&&(m=0),C.push("visibility",0,l.visibility),tr(this,l,"visibility",m?"inherit":"hidden",f?"inherit":"hidden",!f)),h!=="scale"&&h!=="transform"&&(h=Nn[h],~h.indexOf(",")&&(h=h.split(",")[0]))),D=h in On,D){if(this.styles.save(h),g==="string"&&d.substring(0,6)==="var(--"&&(d=nn(t,d.substring(4,d.indexOf(")"))),f=parseFloat(d)),S||(v=t._gsap,v.renderTransform&&!n.parseTransform||ha(t,n.parseTransform),T=n.smoothOrigin!==!1&&v.smooth,S=this._pt=new Bt(this._pt,l,nt,0,1,v.renderTransform,v,0,-1),S.dep=1),h==="scale")this._pt=new Bt(this._pt,v,"scaleY",v.scaleY,(w?Yr(v.scaleY,w+f):f)-v.scaleY||0,Fc),this._pt.u=0,s.push("scaleY",h),h+="X";else if(h==="transformOrigin"){C.push(Ot,0,l[Ot]),d=sC(d),v.svg?Ec(t,d,0,T,0,this):(b=parseFloat(d.split(" ")[2])||0,b!==v.zOrigin&&tr(this,v,"zOrigin",v.zOrigin,b),tr(this,l,h,Bs(u),Bs(d)));continue}else if(h==="svgOrigin"){Ec(t,d,1,T,0,this);continue}else if(h in z0){uC(this,v,h,m,w?Yr(m,w+d):d);continue}else if(h==="smoothOrigin"){tr(this,v,"smooth",v.smooth,d);continue}else if(h==="force3D"){v[h]=d;continue}else if(h==="transform"){dC(this,d,t);continue}}else h in l||(h=ni(h)||h);if(D||(f||f===0)&&(m||m===0)&&!GS.test(d)&&h in l)p=(u+"").substr((m+"").length),f||(f=0),b=jt(d)||(h in Ut.units?Ut.units[h]:p),p!==b&&(m=nr(t,h,u,b)),this._pt=new Bt(this._pt,D?v:l,h,m,(w?Yr(m,w+f):f)-m,!D&&(b==="px"||h==="zIndex")&&n.autoRound!==!1?XS:Fc),this._pt.u=b||0,p!==b&&b!=="%"&&(this._pt.b=u,this._pt.r=qS);else if(h in l)aC.call(this,t,h,u,w?w+d:d);else if(h in t)this.add(t,h,u||t[h],w?w+d:d,i,a);else if(h!=="parseTransform"){sc(h,d);continue}D||(h in l?C.push(h,0,l[h]):typeof t[h]=="function"?C.push(h,2,t[h]()):C.push(h,1,u||t[h])),s.push(h)}}k&&C0(this)},render:function(t,n){if(n.tween._time||!Pc())for(var r=n._pt;r;)r.r(t,r.d),r=r._next;else n.styles.revert()},get:Hn,aliases:Nn,getSetter:function(t,n,r){var i=Nn[n];return i&&i.indexOf(",")<0&&(n=i),n in On&&n!==Ot&&(t._gsap.x||Hn(t,"x"))?r&&j0===r?n==="scale"?QS:JS:(j0=r||{})&&(n==="scale"?eC:tC):t.style&&!ec(t.style[n])?ZS:~n.indexOf("-")?KS:kc(t,n)},core:{_removeProperty:Sr,_getMatrix:Ac}};Rt.utils.checkPrefix=ni,Rt.core.getStyleSaver=F0,(function(e,t,n,r){var i=Et(e+","+t+","+n,function(a){On[a]=1});Et(t,function(a){Ut.units[a]="deg",z0[a]=1}),Nn[i[13]]=e+","+t,Et(r,function(a){var s=a.split(":");Nn[s[1]]=i[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),Et("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){Ut.units[e]="px"}),Rt.registerPlugin(Rc);var Oc=Rt.registerPlugin(Rc)||Rt,fC=Oc.core.Tween;const hC=Object.freeze(Object.defineProperty({__proto__:null,Back:BS,Bounce:OS,CSSPlugin:Rc,Circ:US,Cubic:FS,Elastic:ES,Expo:zS,Linear:PS,Power0:TS,Power1:NS,Power2:jS,Power3:DS,Power4:MS,Quad:IS,Quart:$S,Quint:LS,Sine:HS,SteppedEase:RS,Strong:AS,TimelineLite:Ct,TimelineMax:Ct,TweenLite:ct,TweenMax:fC,default:Oc,gsap:Oc},Symbol.toStringTag,{value:"Module"}));_.AXIS_Y_ZERO_BREAK_DEFAULT_EXTRA_CLEARANCE_PX=Kd,_.AXIS_Y_ZERO_BREAK_DEFAULT_GAP_PX=vi,_.AXIS_Y_ZERO_BREAK_MIN_GAP_PX=_i,_.AXIS_ZIGZAG_DEFAULT_AMPLITUDE_PX=Jd,_.AXIS_ZIGZAG_DEFAULT_CYCLES=Qd,_.AXIS_ZIGZAG_DEFAULT_HEIGHT_PX=tf,_.AXIS_ZIGZAG_DEFAULT_STEP_X_PX=ef,_.Account=Us,_.ActionLink=ib,_.AdaptiveDataGrid=Do,_.AnimationDurationFast=Zf,_.AnimationDurationNormal=Kf,_.AnimationDurationSlow=Jf,_.AnimationEasingBounce=nh,_.AnimationEasingEaseIn=Qf,_.AnimationEasingEaseInOut=th,_.AnimationEasingEaseOut=eh,_.AppointmentCard=To,_.AreaSeriesPrimitive=Kx,_.AriaDataGrid=md,_.AriaTabsDataGrid=Ha,_.AriaTabsDataGridAdaptive=Do,_.Axis=Bo,_.BackLink=ba,_.BandScalesProvider=Qx,_.BarSeriesPrimitive=Jx,_.BorderColorCard=cl,_.BorderColorCardHover=ul,_.BorderColorDefault=ol,_.BorderColorError=dl,_.BorderColorForm=ll,_.BorderRadiusLarge=bh,_.BorderRadiusMedium=gh,_.BorderRadiusNone=mh,_.BorderRadiusSmall=ph,_.BorderWidthCardBottom=uh,_.BorderWidthDefault=oh,_.BorderWidthFormElement=lh,_.BorderWidthFormElementError=ch,_.BorderWidthPanel=dh,_.BorderWidthTableCell=hh,_.BorderWidthTableHeader=fh,_.Breadcrumb=nd,_.Breakpoint=tu,_.BreakpointDesktop=Kp,_.BreakpointLargeDesktop=Jp,_.BreakpointMobile=Xp,_.BreakpointTablet=Zp,_.Button=bt,_.ButtonBorderRadius=Gm,_.ButtonBorderWidth=Vm,_.ButtonPrimaryBackgroundActive=Fm,_.ButtonPrimaryBackgroundDefault=Pm,_.ButtonPrimaryBackgroundDisabled=$m,_.ButtonPrimaryBackgroundHover=Im,_.ButtonPrimaryBorderDefault=Em,_.ButtonPrimaryBorderFocus=Bm,_.ButtonPrimaryTextDefault=Lm,_.ButtonPrimaryTextDisabled=Am,_.ButtonSecondaryBackgroundActive=zm,_.ButtonSecondaryBackgroundDefault=Rm,_.ButtonSecondaryBackgroundHover=Hm,_.ButtonSecondaryBackgroundSolid=Om,_.ButtonSecondaryBorderDefault=Wm,_.ButtonSecondaryTextDefault=Um,_.ButtonShadowSize=Ym,_.ButtonSize=Vs,_.ButtonSpacingPaddingHorizontalDesktop=Fl,_.ButtonSpacingPaddingHorizontalMobile=Pl,_.ButtonSpacingPaddingVerticalDesktop=Il,_.ButtonSpacingPaddingVerticalMobile=Ml,_.ButtonTypographyWeight=qm,_.ButtonVariant=Ws,_.Card=wo,_.CardBackgroundDefault=Xm,_.CardBorderBottom=Jm,_.CardBorderDefault=Zm,_.CardBorderHover=Km,_.CardBorderWidthBottom=rp,_.CardBorderWidthDefault=np,_.CardGroup=l_,_.CardGroupItem=c_,_.CardShadowDefault=ip,_.CardShadowHover=ap,_.CardSpacingHeadingMargin=Al,_.CardSpacingPaddingDesktop=Ll,_.CardSpacingPaddingMobile=$l,_.CardTextDescription=ep,_.CardTextHeading=Qm,_.CardTextLink=tp,_.CareCard=u_,_.CharacterCount=mb,_.ChartEnhancer=t1,_.ChartNoScript=e1,_.ChartRoot=Xd,_.Checkbox=Xc,_.Checkboxes=Kc,_.ColorBorderDefault=jh,_.ColorBorderSecondary=Dh,_.ColorButtonLoginActive=nm,_.ColorButtonLoginBackground=em,_.ColorButtonLoginHover=tm,_.ColorButtonLoginShadow=rm,_.ColorButtonPrimaryActive=Ah,_.ColorButtonPrimaryBackground=Fh,_.ColorButtonPrimaryHover=Lh,_.ColorButtonPrimaryShadow=Eh,_.ColorButtonPrimaryText=$h,_.ColorButtonReverseActive=qh,_.ColorButtonReverseBackground=Vh,_.ColorButtonReverseHover=Yh,_.ColorButtonReverseShadow=Xh,_.ColorButtonReverseText=Gh,_.ColorButtonSecondaryActive=Uh,_.ColorButtonSecondaryBackground=Bh,_.ColorButtonSecondaryBackgroundSolid=Rh,_.ColorButtonSecondaryBorder=Oh,_.ColorButtonSecondaryHover=zh,_.ColorButtonSecondaryShadow=Wh,_.ColorButtonSecondaryText=Hh,_.ColorButtonWarningActive=Jh,_.ColorButtonWarningBackground=Zh,_.ColorButtonWarningHover=Kh,_.ColorButtonWarningShadow=Qh,_.ColorError=Mh,_.ColorFocusBackground=Th,_.ColorFocusText=Nh,_.ColorFormBackground=Ih,_.ColorFormBorder=Ph,_.ColorGrey1=kl,_.ColorGrey2=Tl,_.ColorGrey3=Nl,_.ColorGrey4=jl,_.ColorGrey5=Dl,_.ColorLinkActive=Ch,_.ColorLinkDefault=wh,_.ColorLinkHover=Sh,_.ColorLinkVisited=kh,_.ColorPrimaryBlack=ml,_.ColorPrimaryBlue=fl,_.ColorPrimaryDarkPink=bl,_.ColorPrimaryGreen=pl,_.ColorPrimaryPurple=gl,_.ColorPrimaryRed=yl,_.ColorPrimaryWhite=hl,_.ColorPrimaryYellow=vl,_.ColorSecondaryAquaGreen=Sl,_.ColorSecondaryOrange=wl,_.ColorSecondaryPaleYellow=_l,_.ColorSecondaryPink=Cl,_.ColorSecondaryWarmYellow=xl,_.ColorTextPrimary=yh,_.ColorTextPrint=xh,_.ColorTextReverse=_h,_.ColorTextSecondary=vh,_.Column=Nr,_.ColumnAlign=ru,_.ComponentBlur=Tm,_.ComponentBreadcrumbChevronMarginLeft=ym,_.ComponentBreadcrumbChevronMarginRight=vm,_.ComponentBreadcrumbPaddingTopDesktop=xm,_.ComponentBreadcrumbPaddingTopMobile=_m,_.ComponentButtonPaddingDesktopHorizontal=om,_.ComponentButtonPaddingDesktopVertical=sm,_.ComponentButtonPaddingMobileHorizontal=am,_.ComponentButtonPaddingMobileVertical=im,_.ComponentButtonShadowSize=lm,_.ComponentCardHeadingMargin=pm,_.ComponentCardPaddingDesktop=mm,_.ComponentCardPaddingMobile=hm,_.ComponentDetails=jm,_.ComponentExpander=Dm,_.ComponentFormCheckboxLabelPadding=fm,_.ComponentFormCheckboxSize=dm,_.ComponentFormInputMinHeight=cm,_.ComponentFormInputPadding=um,_.ComponentLink=Nm,_.ComponentPagination=Mm,_.ComponentPanelPaddingDesktop=bm,_.ComponentPanelPaddingMobile=gm,_.ComponentSpread=km,_.ComponentSummaryListCellPaddingHorizontal=Sm,_.ComponentSummaryListCellPaddingVertical=wm,_.ComponentSummaryListRowMargin=Cm,_.Container=qs,_.ContentsList=o_,_.DEFAULT_FONT_CONFIG=Kl,_.DashboardSummaryGrid=T_,_.DateInput=Pb,_.Details=ld,_.DoDontList=cd,_.ElevationHigh=Pg,_.ElevationLow=Dg,_.ElevationMedium=Mg,_.ElevationNone=jg,_.ErrorMessage=Zs,_.ErrorSummary=Mb,_.Expander=ud,_.FRUTIGER_FONT_FILES=Pt,_.Fieldset=_a,_.Float=nu,_.FocusOutlineOffset=Cg,_.FocusOutlineStyle=kg,_.FocusOutlineWidth=Sg,_.FocusShadowButton=Ng,_.FocusShadowInput=Tg,_.FontFamilyBase=ji,_.FontFamilyFallback=Di,_.FontFamilyPrint=Mi,_.FontLineHeightBase=Cs,_.FontSize14Mobile=$i,_.FontSize14Print=Ai,_.FontSize14Tablet=Li,_.FontSize16Mobile=Ei,_.FontSize16Print=Ri,_.FontSize16Tablet=Bi,_.FontSize19Mobile=Oi,_.FontSize19Print=zi,_.FontSize19Tablet=Hi,_.FontSize22Mobile=Ui,_.FontSize22Print=Vi,_.FontSize22Tablet=Wi,_.FontSize26Mobile=Gi,_.FontSize26Print=qi,_.FontSize26Tablet=Yi,_.FontSize36Mobile=Xi,_.FontSize36Print=Ki,_.FontSize36Tablet=Zi,_.FontSize48Mobile=Ji,_.FontSize48Print=ea,_.FontSize48Tablet=Qi,_.FontSizeBase=Ss,_.FontWeightBold=Ii,_.FontWeightLight=Fi,_.FontWeightNormal=Pi,_.Footer=Ks,_.FormBorderRadius=kp,_.FormBorderWidthDefault=Sp,_.FormBorderWidthError=Cp,_.FormErrorTextDefault=_p,_.FormErrorTypographyWeight=xp,_.FormHintTextDefault=wp,_.FormInputBackgroundDefault=sp,_.FormInputBackgroundDisabled=lp,_.FormInputBackgroundError=cp,_.FormInputBackgroundFocus=op,_.FormInputBorderDefault=up,_.FormInputBorderDisabled=hp,_.FormInputBorderError=fp,_.FormInputBorderFocus=dp,_.FormInputTextDefault=mp,_.FormInputTextDisabled=gp,_.FormInputTextPlaceholder=pp,_.FormLabelTextDefault=bp,_.FormLabelTextRequired=yp,_.FormLabelTypographyWeight=vp,_.FormSpacingCheckboxLabelPadding=Ol,_.FormSpacingCheckboxSize=Rl,_.FormSpacingInputMinHeight=Bl,_.FormSpacingInputPadding=El,_.GanttChart=a_,_.Grid=xa,_.GridGutter=eg,_.GridGutterHalf=tg,_.GridLines=nf,_.GridPageWidth=Qp,_.GridWidth=Vn,_.Header=wa,_.HeaderSSR=Rb,_.HeaderSearch=ou,_.HeaderStatic=wa,_.Heading=on,_.HeadingsNhsukHeadingL=pn,_.HeadingsNhsukHeadingM=gn,_.HeadingsNhsukHeadingS=bn,_.HeadingsNhsukHeadingXl=mn,_.HeadingsNhsukHeadingXs=yn,_.Hero=lu,_.Hint=Ys,_.Images=x_,_.Input=ya,_.InsetText=d_,_.Label=va,_.LayoutColumnActions=qp,_.LayoutColumnFull=Wp,_.LayoutColumnHalf=Vp,_.LayoutColumnQuarter=Yp,_.LayoutColumnThird=Gp,_.LayoutContainerMaxWidth=Up,_.Legend=Zx,_.LineScalesProvider=Zd,_.LineSeriesPrimitive=hf,_.List=iu,_.MainWrapper=Xs,_.MedicationCard=No,_.MetricCard=mf,_.NHSBodyText=mw,_.NHSBodyTextLarge=pw,_.NHSBodyTextSmall=gw,_.NHSHeading1=cw,_.NHSHeading2=uw,_.NHSHeading3=dw,_.NHSHeading4=fw,_.NHSHeading5=hw,_.NHSLedeText=bw,_.NHSLedeTextSmall=yw,_.NHSThemeProvider=Ab,_.NHS_FALLBACK_FONT_STACK=Iw,_.NHS_FONT_STACK=Pw,_.NavigationSplitView=Id,_.PageTemplate=nx,_.Pagination=s_,_.Panel=rd,_.ParagraphsBody=vn,_.ParagraphsBodyLarge=_n,_.ParagraphsBodySmall=xn,_.ParagraphsLedeText=wn,_.ParagraphsLedeTextSmall=Sn,_.PatientCard=ko,_.ProductRoadmap=$d,_.Radios=bb,_.RadiosServer=vb,_.ResponsiveDataGrid=Do,_.ResponsiveDataGridDemo=tx,_.Row=Gn,_.SPC=sw,_.SPCChart=Xf,_.SPCMetricCard=W1,_.Select=oi,_.SelectOption=Qc,_.ShadowButtonDefault=bg,_.ShadowButtonFocus=_g,_.ShadowButtonSecondary=yg,_.ShadowButtonWarning=vg,_.ShadowCardDefault=xg,_.ShadowCardHover=wg,_.SizeButtonMinHeightDesktop=zp,_.SizeButtonMinHeightMobile=Hp,_.SizeFormControlLarge=Fp,_.SizeFormControlMedium=Ip,_.SizeFormControlSmall=Pp,_.SizeFormInputWidth2xl=Rp,_.SizeFormInputWidth3xl=Op,_.SizeFormInputWidthLg=Ep,_.SizeFormInputWidthMd=Ap,_.SizeFormInputWidthSm=Lp,_.SizeFormInputWidthXl=Bp,_.SizeFormInputWidthXs=$p,_.SizeIconExtraLarge=Dp,_.SizeIconLarge=jp,_.SizeIconMedium=Np,_.SizeIconNhsDefault=Mp,_.SizeIconSmall=Tp,_.SkipLink=xo,_.SlotMatrix=k_,_.SortStatusControl=I_,_.Spacing0=Hl,_.Spacing1=zl,_.Spacing2=Ul,_.Spacing3=Wl,_.Spacing4=Vl,_.Spacing5=Gl,_.Spacing6=Yl,_.Spacing7=ql,_.Spacing8=Xl,_.Spacing9=Zl,_.SpacingResponsive0Mobile=rs,_.SpacingResponsive0Tablet=is,_.SpacingResponsive1Mobile=as,_.SpacingResponsive1Tablet=ss,_.SpacingResponsive2Mobile=os,_.SpacingResponsive2Tablet=ls,_.SpacingResponsive3Mobile=cs,_.SpacingResponsive3Tablet=us,_.SpacingResponsive4Mobile=ds,_.SpacingResponsive4Tablet=fs,_.SpacingResponsive5Mobile=hs,_.SpacingResponsive5Tablet=ms,_.SpacingResponsive6Mobile=ps,_.SpacingResponsive6Tablet=gs,_.SpacingResponsive7Mobile=bs,_.SpacingResponsive7Tablet=ys,_.SpacingResponsive8Mobile=vs,_.SpacingResponsive8Tablet=_s,_.SpacingResponsive9Mobile=xs,_.SpacingResponsive9Tablet=ws,_.SpacingUtilities=wb,_.StateDisabledBackground=mg,_.StateDisabledBorder=pg,_.StateDisabledText=gg,_.StateErrorBackground=ng,_.StateErrorBorder=rg,_.StateErrorText=ig,_.StateInfoBackground=dg,_.StateInfoBorder=fg,_.StateInfoText=hg,_.StateSuccessBackground=ag,_.StateSuccessBorder=sg,_.StateSuccessText=og,_.StateWarningBackground=lg,_.StateWarningBorder=cg,_.StateWarningText=ug,_.SummaryCard=hd,_.SummaryList=f_,_.Table=cn,_.Tabs=y_,_.Tag=We,_.TaskList=dd,_.Textarea=Jc,_.TooltipOverlay=Xx,_.TooltipProvider=ff,_.TransactionalPageTemplate=rx,_.TransitionButtonDefault=rh,_.TransitionButtonShadow=ih,_.TransitionCardHover=sh,_.TransitionInputFocus=ah,_.VisibilityProvider=Gx,_.VitalsCard=jo,_.WIDTH_FRACTIONS=Tb,_.WarningCallout=__,_.WidthContainer=Mo,_.WidthUtilities=Cb,_.checkFrutigerLoaded=Fw,_.createGenericTabsConfig=Ua,_.createTCHTabsConfig=B_,_.generateFrutigerFontFace=Dw,_.getResponsiveStyles=lw,_.getSpacingClass=Sb,_.getWidthClass=kb,_.preloadFrutigerFonts=Mw,_.tchDataConfig=gd,_.useColors=_w,_.useComponentSpacing=Cw,_.useNHSHeadings=kw,_.useNHSParagraphs=Tw,_.useNHSTheme=Fb,_.useNHSTypographySystem=Nw,_.useNavigationSplitDrill=jw,_.useNavigationSplitUrlSync=Pd,_.useNhsFdpBreakpoints=Po,_.useResponsiveSpacing=Sw,_.useResponsiveValue=ix,_.useSpacing=xw,_.useSpc=Uf,_.useTokens=vw,_.useTypography=ww,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.js.map
