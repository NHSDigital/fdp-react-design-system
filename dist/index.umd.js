(function(b,B){typeof exports=="object"&&typeof module<"u"?B(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],B):(b=typeof globalThis<"u"?globalThis:b||self,B(b.NHSFDPDesignSystem={},b.React,b.ReactDOM))})(this,(function(b,B,wg){"use strict";function Sg(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}const G=Sg(B);function kg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ma={exports:{}},Sr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kl;function Cg(){if(Kl)return Sr;Kl=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var l in a)l!=="key"&&(i[l]=a[l])}else i=a;return a=i.ref,{$$typeof:t,type:r,key:s,ref:a!==void 0?a:null,props:i}}return Sr.Fragment=e,Sr.jsx=n,Sr.jsxs=n,Sr}var kr={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zl;function Tg(){return Zl||(Zl=1,process.env.NODE_ENV!=="production"&&(function(){function t(z){if(z==null)return null;if(typeof z=="function")return z.$$typeof===D?null:z.displayName||z.name||null;if(typeof z=="string")return z;switch(z){case m:return"Fragment";case P:return"Profiler";case h:return"StrictMode";case j:return"Suspense";case S:return"SuspenseList";case v:return"Activity"}if(typeof z=="object")switch(typeof z.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),z.$$typeof){case x:return"Portal";case C:return(z.displayName||"Context")+".Provider";case T:return(z._context.displayName||"Context")+".Consumer";case w:var $=z.render;return z=z.displayName,z||(z=$.displayName||$.name||"",z=z!==""?"ForwardRef("+z+")":"ForwardRef"),z;case M:return $=z.displayName||null,$!==null?$:t(z.type)||"Memo";case _:$=z._payload,z=z._init;try{return t(z($))}catch{}}return null}function e(z){return""+z}function n(z){try{e(z);var $=!1}catch{$=!0}if($){$=console;var I=$.error,U=typeof Symbol=="function"&&Symbol.toStringTag&&z[Symbol.toStringTag]||z.constructor.name||"Object";return I.call($,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",U),e(z)}}function r(z){if(z===m)return"<>";if(typeof z=="object"&&z!==null&&z.$$typeof===_)return"<...>";try{var $=t(z);return $?"<"+$+">":"<...>"}catch{return"<...>"}}function a(){var z=y.A;return z===null?null:z.getOwner()}function i(){return Error("react-stack-top-frame")}function s(z){if(N.call(z,"key")){var $=Object.getOwnPropertyDescriptor(z,"key").get;if($&&$.isReactWarning)return!1}return z.key!==void 0}function l(z,$){function I(){L||(L=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",$))}I.isReactWarning=!0,Object.defineProperty(z,"key",{get:I,configurable:!0})}function u(){var z=t(this.type);return k[z]||(k[z]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),z=this.props.ref,z!==void 0?z:null}function c(z,$,I,U,R,K,ne,ce){return I=K.ref,z={$$typeof:g,type:z,key:$,props:K,_owner:R},(I!==void 0?I:null)!==null?Object.defineProperty(z,"ref",{enumerable:!1,get:u}):Object.defineProperty(z,"ref",{enumerable:!1,value:null}),z._store={},Object.defineProperty(z._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(z,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(z,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ne}),Object.defineProperty(z,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:ce}),Object.freeze&&(Object.freeze(z.props),Object.freeze(z)),z}function d(z,$,I,U,R,K,ne,ce){var re=$.children;if(re!==void 0)if(U)if(A(re)){for(U=0;U<re.length;U++)f(re[U]);Object.freeze&&Object.freeze(re)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(re);if(N.call($,"key")){re=t(z);var Y=Object.keys($).filter(function(oe){return oe!=="key"});U=0<Y.length?"{key: someKey, "+Y.join(": ..., ")+": ...}":"{key: someKey}",O[re+U]||(Y=0<Y.length?"{"+Y.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,U,re,Y,re),O[re+U]=!0)}if(re=null,I!==void 0&&(n(I),re=""+I),s($)&&(n($.key),re=""+$.key),"key"in $){I={};for(var q in $)q!=="key"&&(I[q]=$[q])}else I=$;return re&&l(I,typeof z=="function"?z.displayName||z.name||"Unknown":z),c(z,re,K,R,a(),I,ne,ce)}function f(z){typeof z=="object"&&z!==null&&z.$$typeof===g&&z._store&&(z._store.validated=1)}var p=B,g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),D=Symbol.for("react.client.reference"),y=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=Object.prototype.hasOwnProperty,A=Array.isArray,F=console.createTask?console.createTask:function(){return null};p={react_stack_bottom_frame:function(z){return z()}};var L,k={},H=p.react_stack_bottom_frame.bind(p,i)(),Q=F(r(i)),O={};kr.Fragment=m,kr.jsx=function(z,$,I,U,R){var K=1e4>y.recentlyCreatedOwnerStacks++;return d(z,$,I,!1,U,R,K?Error("react-stack-top-frame"):H,K?F(r(z)):Q)},kr.jsxs=function(z,$,I,U,R){var K=1e4>y.recentlyCreatedOwnerStacks++;return d(z,$,I,!0,U,R,K?Error("react-stack-top-frame"):H,K?F(r(z)):Q)}})()),kr}var Jl;function Ng(){return Jl||(Jl=1,process.env.NODE_ENV==="production"?Ma.exports=Cg():Ma.exports=Tg()),Ma.exports}var o=Ng(),qi={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Ql;function jg(){return Ql||(Ql=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",s=0;s<arguments.length;s++){var l=arguments[s];l&&(i=a(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var l in i)e.call(i,l)&&i[l]&&(s=a(s,l));return s}function a(i,s){return s?i?i+" "+s:i+s:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(qi)),qi.exports}var Dg=jg();const be=kg(Dg),Mg=({text:t,href:e,openInNewWindow:n=!1,className:r,...a})=>{const i=be("nhsuk-action-link__link",r);return o.jsx("div",{className:"nhsuk-action-link",children:o.jsxs("a",{className:i,href:e,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,...a,children:[o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right-circle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"36",height:"36",children:[o.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),o.jsx("path",{d:"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"})]}),o.jsx("span",{className:"nhsuk-action-link__text",children:t})]})})},ec=({ariaLabel:t="Account",items:e=[],className:n,variant:r="default"})=>{if(!e||e.length===0)return null;const a=i=>{const s=i.icon?o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__user",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",role:"img","aria-label":i.icon===!0?"User":void 0,children:o.jsx("path",{d:"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z"})}):null,l=i.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:i.html}}):i.text,u=o.jsxs(o.Fragment,{children:[s,l]});return i.href?o.jsx("a",{className:"nhsuk-account__link nhsuk-header__account-link",href:i.href,children:u}):i.action?o.jsx("form",{className:"nhsuk-account__form",action:i.action,method:i.method||"post",children:o.jsx("button",{className:"nhsuk-account__button",type:"submit",role:"button",children:u})}):o.jsx("span",{children:u})};return o.jsx("nav",{className:be("nhsuk-account",{"nhsuk-account--white":r==="white"},n),"aria-label":t,children:o.jsx("ul",{className:"nhsuk-account__list",children:e.map((i,s)=>i&&o.jsx("li",{className:be("nhsuk-account__item nhsuk-header__account-item",i.className),children:a(i)},s))})})};function $g(t){const e=t.variant||"primary",n=t.size||"default",r=!!t.fullWidth,a=["nhs-aria-button",`nhs-aria-button--${e}`,n!=="default"?`nhs-aria-button--${n}`:"",r?"nhs-aria-button--full-width":"",t.className||""].filter(Boolean).join(" ");return{tag:t.href?"a":"button",classes:a,data:{module:"nhs-button"},attrs:t.href?{href:t.href,role:"button"}:{type:"button"},preventDoubleClick:!!t.preventDoubleClick}}const{forwardRef:Ig,useCallback:mn,useState:Xi}=G;function Pg(t,e){const{children:n,variant:r="primary",size:a="default",fullWidth:i=!1,className:s="",preventDoubleClick:l=!1,...u}=t,[c,d]=Xi(!1),[f,p]=Xi(!1),[g,x]=Xi(!1),m=$g({variant:r,size:a,fullWidth:i,className:s,preventDoubleClick:l,href:"href"in u?u.href:void 0}),h="disabled"in u?u.disabled:u["aria-disabled"]==="true",P={...c&&{"data-pressed":"true"},...f&&{"data-hovered":"true"},...g&&{"data-focused":"true"},...h&&{"data-disabled":"true"}},T=mn(()=>!h&&d(!0),[h]),C=mn(()=>d(!1),[]),w=mn(()=>!h&&p(!0),[h]),j=mn(()=>{p(!1),d(!1)},[]),S=mn(()=>x(!0),[]),M=mn(()=>x(!1),[]),_=mn(re=>{re.key===" "&&("href"in u||re.currentTarget.getAttribute("role")==="button")&&(re.preventDefault(),re.currentTarget.click())},[u]),v=mn(re=>{if(l){const Y=re.currentTarget;if(Y.getAttribute("data-processing")==="true"){re.preventDefault();return}Y.setAttribute("data-processing","true"),setTimeout(()=>{Y.removeAttribute("data-processing")},1e3)}},[l]);if("href"in u&&u.href){const{id:re,style:Y,title:q,["aria-label"]:oe,["aria-describedby"]:W,["aria-labelledby"]:Z,tabIndex:J,...le}=u,ie=u;return o.jsx("a",{ref:e,href:ie.href,target:ie.target,rel:ie.rel,className:m.classes,role:"button",draggable:"false","data-module":"nhs-button",...P,...l&&{"data-prevent-double-click":"true"},...le,onKeyDown:he=>{ie.onKeyDown?.(he),_(he)},onClick:he=>{ie.onClick?.(he),v(he)},onMouseDown:he=>{ie.onMouseDown?.(he),T()},onMouseUp:he=>{ie.onMouseUp?.(he),C()},onMouseEnter:he=>{ie.onMouseEnter?.(he),w()},onMouseLeave:he=>{ie.onMouseLeave?.(he),j()},onFocus:he=>{ie.onFocus?.(he),S()},onBlur:he=>{ie.onBlur?.(he),M()},"aria-disabled":ie["aria-disabled"],...ie["aria-disabled"]==="true"&&{tabIndex:-1},id:re,style:Y,title:q,"aria-label":oe,"aria-describedby":W,"aria-labelledby":Z,tabIndex:J,children:n})}const{id:D,style:y,title:N,["aria-label"]:A,["aria-describedby"]:F,["aria-labelledby"]:L,tabIndex:k,name:H,value:Q,form:O,formAction:z,formEncType:$,formMethod:I,formNoValidate:U,formTarget:R,autoFocus:K,...ne}=u,ce=u;return o.jsx("button",{ref:e,type:ce.type||"button",disabled:ce.disabled,className:m.classes,"data-module":"nhs-button",...P,...l&&{"data-prevent-double-click":"true"},...ce.disabled&&{"aria-disabled":"true"},...ne,onKeyDown:re=>{ce.onKeyDown?.(re),_(re)},onClick:re=>{ce.onClick?.(re),v(re)},onMouseDown:re=>{ce.onMouseDown?.(re),T()},onMouseUp:re=>{ce.onMouseUp?.(re),C()},onMouseEnter:re=>{ce.onMouseEnter?.(re),w()},onMouseLeave:re=>{ce.onMouseLeave?.(re),j()},onFocus:re=>{ce.onFocus?.(re),S()},onBlur:re=>{ce.onBlur?.(re),M()},id:D,style:y,title:N,"aria-label":A,"aria-describedby":F,"aria-labelledby":L,tabIndex:k,name:H,value:Q,form:O,formAction:z,formEncType:$,formMethod:I,formNoValidate:U,formTarget:R,autoFocus:K,children:n})}const nt=Ig(Pg);nt.displayName="Button";const $a=({text:t="Back",html:e,href:n="#",className:r,element:a="a",onClick:i,...s})=>{const l=be("nhsuk-back-link",r),u=be("nhsuk-back-link__link"),c=()=>o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:o.jsx("path",{d:"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"})}),e?o.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t]});return o.jsx("div",{className:l,children:a==="button"?o.jsx("button",{className:u,onClick:i,type:"button",...s,children:c()}):o.jsx("a",{className:u,href:n,...s,children:c()})})};function Lg(t){const{color:e="default",noBorder:n,closable:r,disabled:a,className:i}=t;return{classes:["nhsuk-tag",e!=="default"?`nhsuk-tag--${e}`:"",n?"nhsuk-tag--no-border":"",r?"nhsuk-tag--closable":"",a?"nhsuk-tag--disabled":"",i||""].filter(Boolean).join(" "),showClose:!!r,disabled:!!a}}const Ye=({text:t,html:e,children:n,color:r="default",noBorder:a=!1,closable:i=!1,onClose:s,disabled:l=!1,className:u,...c})=>{const d=Lg({color:r,noBorder:a,closable:i,disabled:l,className:u}),f=p=>{p.preventDefault(),p.stopPropagation(),!l&&s&&s()};return o.jsxs("strong",{className:d.classes,...c,children:[n||(e?o.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t),i&&o.jsx("button",{type:"button",className:"nhsuk-tag__close",onClick:f,disabled:l,"aria-label":"Remove",title:"Remove",children:"Ã—"})]})},tc=({id:t,name:e,checked:n,defaultChecked:r=!1,disabled:a=!1,value:i="true",hint:s,errorMessage:l,className:u,children:c,onChange:d,onBlur:f,onFocus:p,attributes:g,...x})=>{const[m,h]=B.useState(r),P=n!==void 0,T=P?n:m;B.useEffect(()=>{P||h(r)},[r,P]);const C=_=>{const v=_.target.checked;P||h(v),d?.(v,_)},w=s?`${t}-hint`:void 0,j=l?`${t}-error`:void 0,S=[w,j].filter(Boolean).join(" ")||void 0,M=be("nhsuk-form-group",{"nhsuk-form-group--error":!!l},u);return o.jsx("div",{className:M,...x,children:o.jsx("div",{className:"nhsuk-checkboxes",children:o.jsxs("div",{className:"nhsuk-checkboxes__item",children:[o.jsx("input",{className:"nhsuk-checkboxes__input",id:t,name:e||t,type:"checkbox",value:i,checked:T,disabled:a,onChange:C,onBlur:f,onFocus:p,"aria-describedby":S,...g}),o.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:t,children:c}),s&&o.jsx("div",{id:w,className:"nhsuk-checkboxes__hint",children:s}),l&&o.jsxs("div",{id:j,className:"nhsuk-error-message nhsuk-checkboxes__error",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]})]})})})};tc.displayName="Checkbox";function Fg(t){const n=(t.type||"text")==="range";return{classes:["nhsuk-input",t.hasError?"nhsuk-input--error":"",n?"nhsuk-input--range":"",!n&&t.width&&t.width!=="full"?`nhsuk-input--width-${t.width}`:"",t.className||""].filter(Boolean).join(" "),isRange:n}}const Ia=({id:t,name:e,type:n="text",value:r,defaultValue:a,placeholder:i,disabled:s=!1,readOnly:l=!1,required:u=!1,hasError:c=!1,describedBy:d,className:f,width:p="full",inputMode:g,autoComplete:x,maxLength:m,minLength:h,pattern:P,step:T,min:C,max:w,showValueLabels:j=!1,showCurrentValue:S=!1,valueLabels:M,onChange:_,onBlur:v,onFocus:D,onKeyDown:y,...N})=>{const[A,F]=B.useState(r||a||(n==="range"?C||"0":""));B.useEffect(()=>{r!==void 0&&F(r)},[r]);const L=R=>{const K=R.target;F(K.value),("type"in R&&R.nativeEvent||R.type==="keydown")&&_?.(R)},{classes:k,isRange:H}=Fg({type:n,hasError:c,width:p,className:f}),Q=r!==void 0,O={id:t,name:e,type:n,placeholder:i,disabled:s,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:x,maxLength:m,minLength:h,pattern:P,step:T,min:C,max:w,onChange:L,onBlur:v,onFocus:D,onKeyDown:R=>{if(H&&/[0-9]/.test(R.key)){const K=(A?.toString()||"")+R.key;R.target.value=K,L(R)}y?.(R)},...N},z=!Q&&a!==void 0?{defaultValue:a}:{},$=Q?{value:r}:{},I=()=>o.jsx("input",{className:k,...$,...z,"data-current-value":A,...O}),U=H?o.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[j&&o.jsxs("div",{className:"nhsuk-input-range-labels",children:[o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:M?.min||C||"0"}),I(),o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:M?.max||w||"100"})]}),!j&&I(),S&&o.jsx("div",{className:"nhsuk-input-range-current-value",children:o.jsxs("span",{className:"nhsuk-input-range-current-label",children:[M?.current||"Current value:"," ",o.jsx("strong",{children:A})]})})]}):null;return H?U:o.jsx("input",{className:k,id:t,name:e,type:n,value:r,...r===void 0&&a!==void 0?{defaultValue:a}:{},placeholder:i,disabled:s,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:x,maxLength:m,minLength:h,pattern:P,step:T,min:C,max:w,onChange:_,onBlur:v,onFocus:D,onKeyDown:y,...N})};function Bg(t){const e=t.size||"m",n=["nhsuk-label",e!=="m"?`nhsuk-label--${e}`:"",t.className||""].filter(Boolean).join(" ");return{tag:t.isPageHeading?"h1":"label",classes:n,size:e,htmlFor:t.isPageHeading?void 0:t.htmlFor,isPageHeading:!!t.isPageHeading}}const Pa=({htmlFor:t,className:e,isPageHeading:n=!1,size:r="m",children:a,...i})=>{const s=Bg({size:r,isPageHeading:n,className:e,htmlFor:t}),l=s.tag;return o.jsx(l,{className:s.classes,htmlFor:s.htmlFor,...i,children:n?o.jsx("label",{className:"nhsuk-label-wrapper",htmlFor:t,children:a}):a})},La=({children:t,legend:e,className:n,describedBy:r,...a})=>{const i=be("nhsuk-fieldset",n),s=be("nhsuk-fieldset__legend",{[`nhsuk-fieldset__legend--${e?.size}`]:e?.size},e?.className),l=()=>{const u=e?.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:e.html}}):e?.text;return e?.isPageHeading?o.jsx("h1",{className:"nhsuk-fieldset__heading",children:u}):u};return o.jsxs("fieldset",{className:i,"aria-describedby":r,...a,children:[e&&(e.text||e.html)&&o.jsx("legend",{className:s,children:l()}),t]})},nc=({items:t,name:e,idPrefix:n,legend:r,isPageHeading:a=!1,legendSize:i="l",hint:s,errorMessage:l,className:u="",small:c=!1,onChange:d,fieldsetAttributes:f,attributes:p,...g})=>{const[x,m]=B.useState(t.filter(_=>_.checked).map(_=>_.value)),h=n||e,P=s?`${h}-hint`:void 0,T=l?`${h}-error`:void 0,C=[P,T].filter(Boolean).join(" ")||void 0,w=(_,v)=>{let D;v?D=[...x,_]:D=x.filter(y=>y!==_),m(D),d?.(D)},j=()=>t.map((_,v)=>{const D=`${h}-${v+1}`,y=`${D}-conditional`,N=x.includes(_.value),A=_.disabled||!1;return o.jsxs("div",{className:"nhsuk-checkboxes__item",children:[o.jsx("input",{className:"nhsuk-checkboxes__input",id:D,name:e,type:"checkbox",value:_.value,checked:N,disabled:A,onChange:F=>w(_.value,F.target.checked),"aria-describedby":_.hint?`${D}-hint`:C,..._.conditional&&{"aria-controls":y,"aria-expanded":N?"true":"false"},..._.attributes}),o.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:D,children:_.text}),_.hint&&o.jsx("div",{id:`${D}-hint`,className:"nhsuk-checkboxes__hint",children:_.hint}),_.conditional&&o.jsx("div",{className:be("nhsuk-checkboxes__conditional",{"nhsuk-checkboxes__conditional--hidden":!N}),id:y,children:typeof _.conditional=="object"&&_.conditional!==null&&"label"in _.conditional&&"id"in _.conditional&&"name"in _.conditional?o.jsxs("div",{style:{marginTop:"16px"},children:[_.conditional.label&&o.jsx(Pa,{htmlFor:_.conditional.id,children:_.conditional.label}),o.jsx(Ia,{..._.conditional})]}):_.conditional})]},_.value)}),S=be("nhsuk-checkboxes",{"nhsuk-checkboxes--small":c},u),M=be("nhsuk-form-group",{"nhsuk-form-group--error":!!l});return o.jsx("div",{className:M,...p,...g,children:o.jsxs(La,{legend:r?{text:r,isPageHeading:a,size:i}:void 0,describedBy:C,...f,children:[s&&o.jsx("div",{id:P,className:"nhsuk-hint",children:s}),l&&o.jsxs("div",{id:T,className:"nhsuk-error-message",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]}),o.jsx("div",{className:S,children:j()})]})})};nc.displayName="Checkboxes";const rc=({id:t,name:e,value:n,defaultValue:r,placeholder:a,disabled:i=!1,readOnly:s=!1,required:l=!1,hasError:u=!1,describedBy:c,className:d,rows:f=5,cols:p,maxLength:g,minLength:x,wrap:m="soft",resize:h="vertical",autoComplete:P,spellCheck:T,onChange:C,onBlur:w,onFocus:j,onKeyDown:S,...M})=>{const _=be("nhsuk-textarea",{"nhsuk-textarea--error":u,[`nhsuk-textarea--resize-${h}`]:h!=="vertical"},d);return o.jsx("textarea",{className:_,id:t,name:e,value:n,defaultValue:r,placeholder:a,disabled:i,readOnly:s,required:l,"aria-describedby":c,rows:f,cols:p,maxLength:g,minLength:x,wrap:m,autoComplete:P,spellCheck:T,onChange:C,onBlur:w,onFocus:j,onKeyDown:S,...M})};function Ag(t){return{classes:["nhsuk-hint",t.className||""].filter(Boolean).join(" "),id:t.id}}const Ki=({id:t,className:e,children:n,...r})=>{const a=Ag({id:t,className:e});return o.jsx("div",{className:a.classes,id:a.id,...r,children:n})},Eg=({id:t,maxLength:e,maxWords:n,threshold:r=75,name:a,value:i,defaultValue:s,rows:l,className:u,countMessage:c,onCountChange:d,onChange:f,...p})=>{const g=i??s??"",[x,m]=B.useState(g),[h,P]=B.useState(0),[T,C]=B.useState(!1),[w,j]=B.useState(!1),S=B.useCallback(N=>n?N.trim()===""?0:N.trim().split(/\s+/).length:N.length,[n]);B.useEffect(()=>{const N=S(x),A=e||n||0,F=A-N,L=Math.floor(A*(r/100));P(F),C(N>A),j(N>=L||N>A),d&&d(N,F)},[x,e,n,r,S,d]);const M=N=>{const A=N.target.value;m(A),f&&f(N)},_=()=>{const N=e||n||0,A=n?"word":"character",F=n?"words":"characters";if(!w)return`You can enter up to ${N} ${N===1?A:F}`;if(T){const L=Math.abs(h);return`You have ${L} ${L===1?A:F} too many`}else return`You have ${h} ${h===1?A:F} remaining`},v=be("nhsuk-character-count",u),D=be("nhsuk-character-count__message",{"nhsuk-character-count__message--disabled":!w,"nhsuk-error-message":T},c?.classes),y=be("nhsuk-js-character-count",{"nhsuk-textarea--error":T});return o.jsxs("div",{className:v,"data-module":"nhsuk-character-count","data-maxlength":e,"data-maxwords":n,"data-threshold":r,"data-testid":"character-count",children:[o.jsx(rc,{id:t,name:a,value:i!==void 0?x:void 0,defaultValue:i===void 0?s??x:void 0,rows:l,className:y,onChange:M,"aria-describedby":`${t}-info`,"aria-invalid":T||void 0,...p}),o.jsx(Ki,{id:`${t}-info`,className:D,role:"status","aria-live":"polite",children:_()})]})},ac=({value:t,disabled:e=!1,selected:n=!1,className:r,children:a,...i})=>{const s=be("nhsuk-select__option",r);return o.jsx("option",{className:s,value:t,disabled:e,...i,children:a})},Cr=({id:t,name:e,ariaLabel:n,value:r,defaultValue:a,disabled:i=!1,required:s=!1,hasError:l=!1,describedBy:u,className:c,multiple:d=!1,size:f,autoComplete:p,options:g,children:x,onChange:m,onBlur:h,onFocus:P,...T})=>{const C=be("nhsuk-select",{"nhsuk-select--error":l},c),w=()=>g?g.map((S,M)=>o.jsx("option",{value:S.value,disabled:S.disabled,"data-initial-selected":S.selected||void 0,children:S.text},`${S.value}-${M}`)):null,j=a===void 0&&r===void 0&&g?g.find(S=>S.selected)?.value:void 0;return o.jsx("select",{className:C,id:t,name:e,"aria-label":n,value:r,defaultValue:a!==void 0?a:j,disabled:i,required:s,"aria-describedby":u,multiple:d,size:f,autoComplete:p,onChange:m,onBlur:h,onFocus:P,...T,children:x||w()})};Cr.Option=ac;function ic(t,{variant:e,selectedValue:n,enableBehaviourAttr:r,handleChange:a,handleBlur:i,handleFocus:s,handleKeyDown:l,itemsRef:u}){const{onChange:c,onBlur:d,onFocus:f,...p}=t,{name:g,hasError:x=!1,describedBy:m,className:h,size:P="normal",inline:T=!1,options:C,...w}=p,j=be("nhsuk-radios",{"nhsuk-radios--error":x,"nhsuk-radios--small":P==="small","nhsuk-radios--inline":T},h);return o.jsx(La,{children:o.jsx("div",{className:j,...w,...r?{"data-nhs-behaviour":"radios"}:{},children:C.map((S,M)=>{const _=`${g}-${M}`,v=S.conditional?`${_}-conditional`:void 0,D=n===S.value;return o.jsxs("div",{className:"nhsuk-radios__item",children:[o.jsx("input",{className:"nhsuk-radios__input",id:_,name:g,type:"radio",value:S.value,disabled:S.disabled,...e==="client"?{checked:D,onChange:a,onBlur:i,onFocus:s,onKeyDown:l,ref:y=>{y&&u&&(u.current[M]=y)}}:{defaultChecked:D,"data-nhs-radios-input":!0},"aria-describedby":m}),o.jsx("label",{className:"nhsuk-radios__label",htmlFor:_,children:S.text}),S.hint&&o.jsx("div",{className:"nhsuk-radios__hint",children:S.hint}),S.conditional&&o.jsx("div",{className:be("nhsuk-radios__conditional",{"nhsuk-radios__conditional--hidden":!D}),id:v,...e==="server"?{"data-nhs-radios-conditional":!0}:{},children:typeof S.conditional=="object"&&S.conditional!==null&&"label"in S.conditional&&"id"in S.conditional&&"name"in S.conditional?o.jsxs("div",{style:{marginTop:"16px"},children:[S.conditional.label&&o.jsx(Pa,{htmlFor:S.conditional.id,children:S.conditional.label}),o.jsx(Ia,{...S.conditional})]}):S.conditional})]},S.value)})})})}const Hg=({value:t,defaultValue:e,onChange:n,onBlur:r,onFocus:a,...i})=>{const[s,l]=B.useState(t||e||""),u=B.useRef([]),c=B.useRef(s),d=g=>{const x=g.target.value;x!==c.current&&(c.current=x,l(x),n?.(g))},f=g=>{a?.(g)},p=B.useCallback(g=>{const{key:x}=g;if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(x))return;g.preventDefault();const m=u.current.filter(C=>C&&!C.disabled),h=m.indexOf(g.currentTarget);if(h===-1)return;let P=h;["ArrowDown","ArrowRight"].includes(x)?P=(h+1)%m.length:["ArrowUp","ArrowLeft"].includes(x)&&(P=(h-1+m.length)%m.length);const T=m[P];T&&(T.focus(),T.checked||T.click())},[]);return ic({value:t,defaultValue:e,onChange:n,onBlur:r,onFocus:a,...i},{variant:"client",selectedValue:s,enableBehaviourAttr:!1,handleChange:d,handleBlur:r,handleFocus:f,handleKeyDown:p,itemsRef:u})},Rg=({value:t,defaultValue:e,...n})=>{const r=t||e||"";return ic({value:t,defaultValue:e,...n},{variant:"server",selectedValue:r,enableBehaviourAttr:!0})},Zi=({children:t,className:e,fluid:n=!1,maxWidth:r,style:a,...i})=>{const s=be({"nhsuk-width-container":!n,"nhsuk-width-container-fluid":n},e),l=r?{maxWidth:r,...a||{}}:a;return o.jsx("div",{className:s,style:l,...i,children:t})},pn=({children:t,className:e,style:n,...r})=>{const a=be("nhsuk-grid-row",e);return o.jsx("div",{className:a,style:n,...r,children:t})},Zn=({children:t,width:e="full",mobileWidth:n,tabletWidth:r,desktopWidth:a,start:i,className:s,forceWidth:l=!1,style:u,...c})=>{const d=be({[`nhsuk-grid-column-${e}`]:!l,[`nhsuk-u-${e}`]:l,[`nhsuk-u-${n}-mobile`]:n,[`nhsuk-u-${r}-tablet`]:r,[`nhsuk-u-${a}-desktop`]:a,[`nhsuk-grid-column-start-${i}`]:i&&i>=1&&i<=7},s);return o.jsx("div",{className:d,style:u,...c,children:t})},Fa=({children:t,className:e,style:n,...r})=>{const i=B.Children.toArray(t)[0],s=B.isValidElement(i)&&(i.type===pn||typeof i.props=="object"&&i.props&&"className"in i.props&&typeof i.props.className=="string"&&i.props.className.includes("nhsuk-grid-row"));return o.jsx(Zi,{className:e,style:n,...r,children:s?t:o.jsx(pn,{children:t})})},zg=({children:t,type:e="bullet",size:n="medium",border:r=!1,className:a,role:i,as:s,...l})=>{const u=s||(e==="number"?"ol":"ul"),c=be("nhsuk-list",{"nhsuk-list--bullet":e==="bullet","nhsuk-list--number":e==="number","nhsuk-list--none":e==="none","nhsuk-list--border":r,[`nhsuk-list--${n}`]:n!=="medium"},a);return o.jsx(u,{className:c,role:i,...l,children:t})},Og=({children:t,className:e,...n})=>{const r=be("nhsuk-list__item",e);return o.jsx("li",{className:r,...n,children:t})},sc=zg;sc.Item=Og;const Wg=({debug:t=!1,className:e,children:n,...r})=>{if(!n)return null;const a=["nhsuk-spacing-utilities",t&&"nhsuk-spacing-utilities--debug",e].filter(Boolean).join(" ");return o.jsx("div",{className:a,...r,children:n})},Ug={margin:t=>`nhsuk-u-margin-${t}`,marginTop:t=>`nhsuk-u-margin-top-${t}`,marginRight:t=>`nhsuk-u-margin-right-${t}`,marginBottom:t=>`nhsuk-u-margin-bottom-${t}`,marginLeft:t=>`nhsuk-u-margin-left-${t}`,padding:t=>`nhsuk-u-padding-${t}`,paddingTop:t=>`nhsuk-u-padding-top-${t}`,paddingRight:t=>`nhsuk-u-padding-right-${t}`,paddingBottom:t=>`nhsuk-u-padding-bottom-${t}`,paddingLeft:t=>`nhsuk-u-padding-left-${t}`,marginResponsive:t=>`nhsuk-u-margin-responsive-${t}`,marginTopResponsive:t=>`nhsuk-u-margin-top-responsive-${t}`,marginRightResponsive:t=>`nhsuk-u-margin-right-responsive-${t}`,marginBottomResponsive:t=>`nhsuk-u-margin-bottom-responsive-${t}`,marginLeftResponsive:t=>`nhsuk-u-margin-left-responsive-${t}`,paddingResponsive:t=>`nhsuk-u-padding-responsive-${t}`,paddingTopResponsive:t=>`nhsuk-u-padding-top-responsive-${t}`,paddingRightResponsive:t=>`nhsuk-u-padding-right-responsive-${t}`,paddingBottomResponsive:t=>`nhsuk-u-padding-bottom-responsive-${t}`,paddingLeftResponsive:t=>`nhsuk-u-padding-left-responsive-${t}`},Gg=({debug:t=!1,className:e,children:n,...r})=>{if(!n)return null;const a=["nhsuk-width-utilities",t&&"nhsuk-width-utilities--debug",e].filter(Boolean).join(" ");return o.jsx("div",{className:a,...r,children:n})},Yg={width:t=>`nhsuk-u-width-${t}`,widthTablet:t=>`nhsuk-u-width-${t}-tablet`},Vg=["full","three-quarters","two-thirds","one-half","one-third","one-quarter"],Ji=({as:t="main",size:e="default",className:n,children:r,...a})=>{const i=["nhsuk-main-wrapper",e==="large"&&"nhsuk-main-wrapper--l",e==="small"&&"nhsuk-main-wrapper--s",n].filter(Boolean).join(" ");return o.jsx(t,{className:i,...a,children:r})};function qg(t){switch(t){case"xxl":case"xl":return 1;case"l":return 2;case"m":return 3;case"s":return 4;case"xs":return 5;default:return 2}}function Xg(t){const e=t.level??qg(t.size),n=["nhsuk-heading",t.size?`nhsuk-heading--${t.size}`:"",t.className||""].filter(Boolean).join(" "),r=t.marginBottom?{marginBottom:t.marginBottom}:void 0;return{tag:`h${e}`,classes:n,style:r}}const Ft=({level:t,className:e,text:n,html:r,children:a,size:i,marginBottom:s,...l})=>{const u=Xg({level:t,size:i,className:e,marginBottom:s}),c=a||(r?o.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n);return B.createElement(u.tag,{className:u.classes,style:u.style,...l},c)};function Kg(t){return{classes:["nhsuk-error-message",t.className||""].filter(Boolean).join(" "),id:t.id,visuallyHiddenText:t.visuallyHiddenText??"Error:"}}const Qi=({id:t,className:e,visuallyHiddenText:n="Error:",children:r,...a})=>{const i=Kg({id:t,className:e,visuallyHiddenText:n});return o.jsxs("span",{className:i.classes,id:i.id,...a,children:[o.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[i.visuallyHiddenText," "]}),r]})},Zg=({titleText:t="There is a problem",titleHtml:e,descriptionText:n,descriptionHtml:r,errorList:a,className:i,children:s,...l})=>{const u=B.useRef(null);B.useEffect(()=>{u.current&&u.current.focus()},[]);const c=be("nhsuk-error-summary",i),d=()=>e?o.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t,f=()=>r?o.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n,p=g=>{const x=g.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:g.html}}):g.text;return g.href?o.jsx("a",{href:g.href,...g.attributes,children:x}):x};return o.jsxs("div",{ref:u,className:c,"aria-labelledby":"error-summary-title",role:"alert",tabIndex:-1,"data-module":"nhsuk-error-summary",...l,children:[o.jsx("h2",{className:"nhsuk-error-summary__title",id:"error-summary-title",children:d()}),o.jsxs("div",{className:"nhsuk-error-summary__body",children:[s&&o.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:s}),!s&&(n||r)&&o.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:f()}),o.jsx("ul",{className:"nhsuk-list nhsuk-error-summary__list",role:"list",children:a.map((g,x)=>o.jsx("li",{children:p(g)},x))})]})]})},Jg=({id:t,className:e,items:n,namePrefix:r,values:a={},fieldset:i,hint:s,errorMessage:l,onChange:u,...c})=>{const[d,f]=B.useState(()=>({day:a.day||"",month:a.month||"",year:a.year||""})),[p,g]=B.useState({}),x=L=>L%4===0&&L%100!==0||L%400===0,m=(L,k)=>{const H=[31,28,31,30,31,30,31,31,30,31,30,31];return L===2&&x(k)?29:H[L-1]},h=(L,k,H)=>{if(!L)return;if(!/^\d+$/.test(L))return"Day must be a number";const Q=parseInt(L,10);if(Q<1||Q>31)return"Day must be between 1 and 31";if(k&&H){const O=parseInt(k,10),z=parseInt(H,10);if(!isNaN(O)&&!isNaN(z)&&O>=1&&O<=12){const $=m(O,z);if(Q>$)return`${["January","February","March","April","May","June","July","August","September","October","November","December"][O-1]} ${z} only has ${$} days`}}},P=L=>{if(!L)return;if(!/^\d+$/.test(L))return"Month must be a number";const k=parseInt(L,10);if(k<1||k>12)return"Month must be between 1 and 12"},T=L=>{if(!L)return;if(!/^\d+$/.test(L))return"Year must be a number";const k=parseInt(L,10),H=new Date().getFullYear();if(k<1900||k>H+10)return`Year must be between 1900 and ${H+10}`},C=(L,k,H)=>{if(!L||!k||!H)return;const Q=parseInt(L,10),O=parseInt(k,10),z=parseInt(H,10);if(isNaN(Q)||isNaN(O)||isNaN(z)||O<1||O>12||z<1900)return;const $=m(O,z);Q<1||Q>$},w=B.useCallback((L,k)=>{const H={...d,[L]:k};f(H),u&&u(H)},[d,u]),j=B.useCallback(L=>{const k=d[L];let H;if(L==="day")H=h(k,d.month,d.year);else if(L==="month"){if(H=P(k),!H&&d.day){const Q=h(d.day,k,d.year);g(O=>({...O,day:Q}))}}else if(L==="year"&&(H=T(k),!H&&d.day&&d.month)){const Q=h(d.day,d.month,k);g(O=>({...O,day:Q}))}if(g(Q=>({...Q,[L]:H})),d.day&&d.month&&d.year){const Q=C(L==="day"?k:d.day,L==="month"?k:d.month,L==="year"?k:d.year);Q&&g(O=>({...O,day:Q}))}},[d,h,P,T,C]),S=B.useMemo(()=>[{name:"day",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"month",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"year",classes:"nhsuk-input--width-4",inputmode:"numeric",pattern:"[0-9]*"}],[]),M=n||S;let _=i?.describedBy||"";const v=s?`${t}-hint`:"",D=l?`${t}-error`:"";v&&(_=_?`${_} ${v}`:v),D&&(_=_?`${_} ${D}`:D);const y=Object.values(p).some(L=>L),N=be("nhsuk-form-group",{"nhsuk-form-group--error":l||y}),A=be("nhsuk-date-input",e),F=()=>o.jsxs(o.Fragment,{children:[s&&o.jsx(Ki,{id:v,className:s.classes,children:s.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:s.html}}):s.text}),l&&o.jsx(Qi,{id:D,className:l.classes,children:l.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text}),Object.entries(p).map(([L,k])=>k?o.jsxs(Qi,{id:`${t}-${L}-error`,className:"nhsuk-error-message",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",k]},`${L}-error`):null),o.jsx("div",{className:A,id:t,"data-testid":"date-input",...c,children:M.map(L=>{const k=L.id||`${t}-${L.name}`,H=r?`${r}[${L.name}]`:L.name,Q=L.label||L.name.charAt(0).toUpperCase()+L.name.slice(1),O=p[L.name],z=d[L.name]||"";let $=_;if(O){const I=`${t}-${L.name}-error`;$=$?`${$} ${I}`:I}return o.jsxs("div",{className:"nhsuk-date-input__item",children:[o.jsx(Pa,{htmlFor:k,className:"nhsuk-date-input__label",children:Q}),o.jsx(Ia,{id:k,name:H,value:z,className:be("nhsuk-date-input__input",L.classes,{"nhsuk-input--error":O}),inputMode:L.inputmode,autoComplete:L.autocomplete,pattern:L.pattern,"aria-describedby":$||void 0,hasError:!!O,onChange:I=>w(L.name,I.target.value),onBlur:()=>j(L.name)})]},L.name)})})]});return o.jsx("div",{className:N,children:i?o.jsx(La,{className:i.classes,legend:i.legend?{text:i.legend}:void 0,describedBy:_||void 0,children:F()}):F()})},oc={animation:{AnimationDurationFast:"150ms",AnimationDurationNormal:"300ms",AnimationDurationSlow:"500ms",AnimationEasingEaseIn:"cubic-bezier(0.4, 0, 1, 1)",AnimationEasingEaseOut:"cubic-bezier(0, 0, 0.2, 1)",AnimationEasingEaseInOut:"cubic-bezier(0.4, 0, 0.2, 1)",AnimationEasingBounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},transition:{TransitionButtonDefault:"background-color 300ms cubic-bezier(0, 0, 0.2, 1)",TransitionButtonShadow:"box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionInputFocus:"border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionCardHover:"border-color 300ms cubic-bezier(0, 0, 0.2, 1)"},border:{BorderWidthDefault:"1px",BorderWidthFormElement:"2px",BorderWidthFormElementError:"4px",BorderWidthCardBottom:"4px",BorderWidthPanel:"4px",BorderWidthTableHeader:"2px",BorderWidthTableCell:"1px",BorderRadiusNone:"0px",BorderRadiusSmall:"4px",BorderRadiusMedium:"8px",BorderRadiusLarge:"12px",BorderColorDefault:"#d8dde0",BorderColorForm:"#4c6272",BorderColorCard:"#d8dde0",BorderColorCardHover:"#aeb7bd",BorderColorError:"#d5281b"},color:{ColorPrimaryBlue:"#005eb8",ColorPrimaryWhite:"#ffffff",ColorPrimaryBlack:"#212b32",ColorPrimaryGreen:"#007f3b",ColorPrimaryPurple:"#330072",ColorPrimaryDarkPink:"#7c2855",ColorPrimaryRed:"#d5281b",ColorPrimaryYellow:"#ffeb3b",ColorSecondaryPaleYellow:"#fff9c4",ColorSecondaryWarmYellow:"#ffb81c",ColorSecondaryOrange:"#ed8b00",ColorSecondaryAquaGreen:"#00a499",ColorSecondaryPink:"#ae2573",ColorGrey1:"#4c6272",ColorGrey2:"#768692",ColorGrey3:"#aeb7bd",ColorGrey4:"#d8dde0",ColorGrey5:"#f0f4f5",ColorTextPrimary:"#212b32",ColorTextSecondary:"#4c6272",ColorTextReverse:"#ffffff",ColorTextPrint:"#212b32",ColorLinkDefault:"#005eb8",ColorLinkHover:"#7c2855",ColorLinkActive:"#003087",ColorLinkVisited:"#330072",ColorFocusBackground:"#ffeb3b",ColorFocusText:"#212b32",ColorBorderDefault:"#d8dde0",ColorBorderSecondary:"#ffffff33",ColorError:"#d5281b",ColorFormBorder:"#4c6272",ColorFormBackground:"#ffffff",ColorButtonPrimaryBackground:"#007f3b",ColorButtonPrimaryText:"#ffffff",ColorButtonPrimaryHover:"#006530",ColorButtonPrimaryActive:"#004021",ColorButtonPrimaryShadow:"#004021",ColorButtonSecondaryBackground:"#00000000",ColorButtonSecondaryBackgroundSolid:"#ffffff",ColorButtonSecondaryBorder:"#005eb8",ColorButtonSecondaryText:"#005eb8",ColorButtonSecondaryHover:"#d9e5f2",ColorButtonSecondaryActive:"#c7daf0",ColorButtonSecondaryShadow:"#005eb8",ColorButtonReverseBackground:"#ffffff",ColorButtonReverseText:"#212b32",ColorButtonReverseHover:"#d9dde0",ColorButtonReverseActive:"#b3bcc2",ColorButtonReverseShadow:"#b3bcc2",ColorButtonWarningBackground:"#d5281b",ColorButtonWarningHover:"#aa2016",ColorButtonWarningActive:"#6a140e",ColorButtonWarningShadow:"#6a140e",ColorButtonLoginBackground:"#005eb8",ColorButtonLoginHover:"#004b93",ColorButtonLoginActive:"#002f5c",ColorButtonLoginShadow:"#002f5c"},component:{ComponentButtonPaddingMobileVertical:"8px",ComponentButtonPaddingMobileHorizontal:"16px",ComponentButtonPaddingDesktopVertical:"12px",ComponentButtonPaddingDesktopHorizontal:"16px",ComponentButtonShadowSize:"4px",ComponentFormInputMinHeight:"40px",ComponentFormInputPadding:"4px",ComponentFormCheckboxSize:"40px",ComponentFormCheckboxLabelPadding:"12px",ComponentCardPaddingMobile:"16px",ComponentCardPaddingDesktop:"32px",ComponentCardHeadingMargin:"16px",ComponentPanelPaddingMobile:"20px",ComponentPanelPaddingDesktop:"28px",ComponentBreadcrumbChevronMarginLeft:"9px",ComponentBreadcrumbChevronMarginRight:"2px",ComponentBreadcrumbPaddingTopMobile:"16px",ComponentBreadcrumbPaddingTopDesktop:"24px",ComponentSummaryListCellPaddingVertical:"8px",ComponentSummaryListCellPaddingHorizontal:"24px",ComponentSummaryListRowMargin:"16px",ComponentSpread:"4px",ComponentBlur:"4px",ComponentLink:"4px",ComponentDetails:"8px",ComponentExpander:"4px",ComponentPagination:"16px"},button:{ButtonPrimaryBackgroundDefault:"#007f3b",ButtonPrimaryBackgroundHover:"#006530",ButtonPrimaryBackgroundActive:"#004021",ButtonPrimaryBackgroundDisabled:"#d8dde0",ButtonPrimaryTextDefault:"#ffffff",ButtonPrimaryTextDisabled:"#768692",ButtonPrimaryBorderDefault:"#00000000",ButtonPrimaryBorderFocus:"#ffeb3b",ButtonSecondaryBackgroundDefault:"#00000000",ButtonSecondaryBackgroundSolid:"#ffffff",ButtonSecondaryBackgroundHover:"#d9e5f2",ButtonSecondaryBackgroundActive:"#c7daf0",ButtonSecondaryTextDefault:"#005eb8",ButtonSecondaryBorderDefault:"#005eb8",ButtonSpacingPaddingVerticalMobile:"8px",ButtonSpacingPaddingHorizontalMobile:"16px",ButtonSpacingPaddingVerticalDesktop:"12px",ButtonSpacingPaddingHorizontalDesktop:"16px",ButtonBorderWidth:"2px",ButtonBorderRadius:"4px",ButtonShadowSize:"4px",ButtonTypographyWeight:"600"},card:{CardBackgroundDefault:"#ffffff",CardBorderDefault:"#d8dde0",CardBorderHover:"#aeb7bd",CardBorderBottom:"#f0f4f5",CardTextHeading:"#212b32",CardTextDescription:"#212b32",CardTextLink:"#005eb8",CardSpacingPaddingMobile:"16px",CardSpacingPaddingDesktop:"32px",CardSpacingHeadingMargin:"16px",CardBorderWidthDefault:"1px",CardBorderWidthBottom:"4px",CardShadowDefault:"none",CardShadowHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},form:{FormInputBackgroundDefault:"#ffffff",FormInputBackgroundFocus:"#ffffff",FormInputBackgroundDisabled:"#d8dde0",FormInputBackgroundError:"#ffffff",FormInputBorderDefault:"#4c6272",FormInputBorderFocus:"#ffeb3b",FormInputBorderError:"#d5281b",FormInputBorderDisabled:"#aeb7bd",FormInputTextDefault:"#212b32",FormInputTextPlaceholder:"#4c6272",FormInputTextDisabled:"#768692",FormLabelTextDefault:"#212b32",FormLabelTextRequired:"#ffffff",FormLabelTypographyWeight:"600",FormErrorTextDefault:"#d5281b",FormErrorTypographyWeight:"600",FormHintTextDefault:"#4c6272",FormSpacingInputPadding:"4px",FormSpacingInputMinHeight:"40px",FormSpacingCheckboxSize:"40px",FormSpacingCheckboxLabelPadding:"12px",FormBorderWidthDefault:"2px",FormBorderWidthError:"4px",FormBorderRadius:"0px"},size:{SizeIconSmall:"16px",SizeIconMedium:"18px",SizeIconLarge:"24px",SizeIconExtraLarge:"32px",SizeIconNhsDefault:"34px",SizeFormControlSmall:"32px",SizeFormControlMedium:"40px",SizeFormControlLarge:"48px",SizeFormInputWidthXs:"5.4ex",SizeFormInputWidthSm:"7.2ex",SizeFormInputWidthMd:"9ex",SizeFormInputWidthLg:"10.8ex",SizeFormInputWidthXl:"20ex",SizeFormInputWidth2xl:"38ex",SizeFormInputWidth3xl:"56ex",SizeButtonMinHeightMobile:"44px",SizeButtonMinHeightDesktop:"40px"},layout:{LayoutContainerMaxWidth:"1020px",LayoutColumnFull:"100%",LayoutColumnHalf:"50%",LayoutColumnThird:"33.333%",LayoutColumnQuarter:"25%",LayoutColumnActions:"20%"},breakpoint:{BreakpointMobile:"320px",BreakpointTablet:"641px",BreakpointDesktop:"1025px",BreakpointLargeDesktop:"1280px"},grid:{GridPageWidth:"960px",GridGutter:"32px",GridGutterHalf:"16px"},state:{StateErrorBackground:"#d5281b",StateErrorBorder:"#d5281b",StateErrorText:"#ffffff",StateSuccessBackground:"#007f3b",StateSuccessBorder:"#007f3b",StateSuccessText:"#ffffff",StateWarningBackground:"#ffeb3b",StateWarningBorder:"#ffeb3b",StateWarningText:"#212b32",StateInfoBackground:"#005eb8",StateInfoBorder:"#005eb8",StateInfoText:"#ffffff",StateDisabledBackground:"#d8dde0",StateDisabledBorder:"#aeb7bd",StateDisabledText:"#768692"},shadow:{ShadowButtonDefault:"0 4px 0 #004021",ShadowButtonSecondary:"0 4px 0 #005eb8",ShadowButtonWarning:"0 4px 0 #6a140e",ShadowButtonFocus:"0 4px 0 #ffeb3b",ShadowCardDefault:"none",ShadowCardHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},"focus-outline":{FocusOutlineWidth:"4px",FocusOutlineOffset:"0px",FocusOutlineStyle:"solid"},"focus-shadow":{FocusShadowInput:"0 0 0 3px #ffeb3b",FocusShadowButton:"0 0 0 3px #ffeb3b"},elevation:{ElevationNone:"none",ElevationLow:"0 1px 3px rgba(0, 0, 0, 0.12)",ElevationMedium:"0 2px 6px rgba(0, 0, 0, 0.16)",ElevationHigh:"0 4px 12px rgba(0, 0, 0, 0.20)"},spacing:{Spacing0:"0",Spacing1:"4px",Spacing2:"8px",Spacing3:"16px",Spacing4:"24px",Spacing5:"32px",Spacing6:"40px",Spacing7:"48px",Spacing8:"56px",Spacing9:"64px"},"spacing-responsive":{SpacingResponsive0Mobile:"0",SpacingResponsive0Tablet:"0",SpacingResponsive1Mobile:"4px",SpacingResponsive1Tablet:"4px",SpacingResponsive2Mobile:"8px",SpacingResponsive2Tablet:"8px",SpacingResponsive3Mobile:"8px",SpacingResponsive3Tablet:"16px",SpacingResponsive4Mobile:"16px",SpacingResponsive4Tablet:"24px",SpacingResponsive5Mobile:"24px",SpacingResponsive5Tablet:"32px",SpacingResponsive6Mobile:"32px",SpacingResponsive6Tablet:"40px",SpacingResponsive7Mobile:"40px",SpacingResponsive7Tablet:"48px",SpacingResponsive8Mobile:"48px",SpacingResponsive8Tablet:"56px",SpacingResponsive9Mobile:"56px",SpacingResponsive9Tablet:"64px"},font:{FontFamilyBase:"Frutiger W01",FontFamilyFallback:"Arial, Helvetica, sans-serif",FontFamilyPrint:"sans-serif",FontWeightNormal:"400",FontWeightBold:"600",FontWeightLight:"400",FontSize14Mobile:"12px",FontSize14Tablet:"14px",FontSize14Print:"12pt",FontSize16Mobile:"14px",FontSize16Tablet:"16px",FontSize16Print:"12pt",FontSize19Mobile:"16px",FontSize19Tablet:"19px",FontSize19Print:"13pt",FontSize22Mobile:"19px",FontSize22Tablet:"22px",FontSize22Print:"15pt",FontSize26Mobile:"22px",FontSize26Tablet:"26px",FontSize26Print:"17pt",FontSize36Mobile:"27px",FontSize36Tablet:"36px",FontSize36Print:"20pt",FontSize48Mobile:"33px",FontSize48Tablet:"48px",FontSize48Print:"24pt",FontSizeBase:"16px",FontLineHeightBase:"24px"},headings:{xl:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},l:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},m:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},s:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xs:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}}},paragraphs:{body:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bodyLarge:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},bodySmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ledeText:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},ledeTextSmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}}}},lc=B.createContext(oc),Qg=({children:t,theme:e={}})=>{const n={...oc,...e};return o.jsx(lc.Provider,{value:n,children:t})},e0=()=>{const t=B.useContext(lc);if(!t)throw new Error("useNHSTheme must be used within an NHSThemeProvider");return t};function t0(){return`
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 400;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff") format("woff");
	}
	
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 600;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff") format("woff");
	}
  `}function n0(){if(typeof document>"u"||document.getElementById("nhs-fonts"))return;const t=document.createElement("style");t.id="nhs-fonts",t.textContent=t0(),document.head.appendChild(t)}const r0=({children:t,theme:e})=>(B.useEffect(()=>{n0()},[]),o.jsx(Qg,{theme:e,children:t})),cc=({mode:t="form",action:e="/search",method:n="get",name:r="q",value:a,placeholder:i="Search",visuallyHiddenLabel:s="Search the NHS website",visuallyHiddenButton:l="Search",className:u,disabled:c=!1,callbacks:d={},isLoading:f=!1,showResults:p=!1,results:g=[],formAttributes:x={},inputAttributes:m={},buttonAttributes:h={},preventDefaultSubmit:P=!1,debounceMs:T=300,minQueryLength:C=1})=>{const[w,j]=B.useState(""),[S,M]=B.useState(!1),_=B.useRef(void 0),v=B.useRef(null),D=B.useRef(null),y=t==="controlled"&&a!==void 0,N=y?a:w,A=B.useCallback(U=>{_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{d.onChange&&U.length>=C&&d.onChange(U)},T)},[d.onChange,T,C]),F=B.useCallback(U=>{const R=U.target.value;y||j(R),t!=="form"&&A(R)},[y,t,A]),L=B.useCallback(U=>{const R=N.trim(),K={query:R,timestamp:Date.now(),formData:new FormData(U.currentTarget)};t==="controlled"||t==="hybrid"&&P?(U.preventDefault(),d.onSearch&&R.length>=C&&d.onSearch(K)):t==="hybrid"&&d.onSearch&&R.length>=C&&d.onSearch(K)},[t,N,d.onSearch,P,C]),k=B.useCallback(()=>{M(!0),d.onFocus?.()},[d.onFocus]),H=B.useCallback(()=>{M(!1),d.onBlur?.()},[d.onBlur]),Q=B.useCallback(()=>{y||j(""),d.onClear?.(),D.current?.focus()},[y,d.onClear]);B.useEffect(()=>()=>{_.current&&clearTimeout(_.current)},[]);const O=()=>o.jsx("svg",{className:be("nhsuk-icon nhsuk-icon__search",{"nhsuk-icon__search--loading":f}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"})}),z=()=>o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsxs("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[o.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416",repeatCount:"indefinite"})]})}),$=()=>!N||t==="form"?null:o.jsx("button",{type:"button",className:"nhsuk-header__search-clear",onClick:Q,"aria-label":"Clear search",children:o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__close",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z"})})}),I=()=>!p||!g.length||!S?null:o.jsx("div",{className:"nhsuk-header__search-results",role:"listbox",children:g.map(U=>o.jsx("div",{className:"nhsuk-header__search-result",role:"option",children:U.href?o.jsxs("a",{href:U.href,className:"nhsuk-header__search-result-link",children:[o.jsx("span",{className:"nhsuk-header__search-result-title",children:U.title}),U.description&&o.jsx("span",{className:"nhsuk-header__search-result-description",children:U.description})]}):o.jsxs("button",{type:"button",className:"nhsuk-header__search-result-button",onClick:()=>d.onSearch?.({query:U.title,timestamp:Date.now()}),children:[o.jsx("span",{className:"nhsuk-header__search-result-title",children:U.title}),U.description&&o.jsx("span",{className:"nhsuk-header__search-result-description",children:U.description})]})},U.id))});return o.jsxs("div",{className:be("nhsuk-header__search",u,{"nhsuk-header__search--controlled":t==="controlled","nhsuk-header__search--hybrid":t==="hybrid","nhsuk-header__search--loading":f,"nhsuk-header__search--focused":S,"nhsuk-header__search--has-results":p&&g.length>0}),children:[o.jsxs("form",{ref:v,className:"nhsuk-header__search-form",id:"search",action:t!=="controlled"?e:void 0,method:t!=="controlled"?n:void 0,role:"search",onSubmit:L,...x,children:[o.jsx("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field",children:s}),o.jsxs("div",{className:"nhsuk-header__search-input-wrapper",children:[o.jsx("input",{ref:D,className:"nhsuk-header__search-input nhsuk-input",id:"search-field",name:t!=="controlled"?r:void 0,type:"search",placeholder:i,autoComplete:"off",value:N,onChange:F,onFocus:k,onBlur:H,disabled:c||f,...p&&g.length>0?{"aria-expanded":!0,"aria-haspopup":"listbox"}:{},...m}),$()]}),o.jsxs("button",{className:"nhsuk-header__search-submit",type:"submit",disabled:c||f||t!=="form"&&N.length<C,...h,children:[f?z():O(),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:f?"Searching...":l})]})]}),I()]})};function uc(t,{variant:e,isClient:n,menuOpen:r=!1,showMoreButton:a=!1,visibleItems:i,dropdownVisible:s,toggleMenu:l,navContainerRef:u,navListRef:c}){const{className:d,logo:f={},service:p={},organisation:g,search:x,account:m,navigation:h,containerClasses:P,variant:T="default",attributes:C={},maxVisibleItems:w,responsiveNavigation:j=!0,...S}=t;"maxVisibleItems"in S&&delete S.maxVisibleItems;const M=p.href&&!f.href||p.href&&p.href===f.href,_=M?p.href:f.href,v=be("nhsuk-header",{"nhsuk-header--organisation":T==="organisation"||g,"nhsuk-header--white":T==="white"},d),D=be("nhsuk-header__container",P),y=be("nhsuk-header__navigation",{"nhsuk-header__navigation--white":h?.white,"nhsuk-header__navigation--justified":h?.justified},h?.className),N=()=>o.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":f.ariaLabel||"NHS",children:[o.jsx("title",{children:f.ariaLabel||"NHS"}),o.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),A=()=>f.src?o.jsx("img",{className:"nhsuk-header__organisation-logo",src:f.src,width:"280",alt:f.ariaLabel||"NHS"}):N(),F=()=>g?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"nhsuk-header__organisation-name",children:[g.name,g.split&&o.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",g.split]})]}),g.descriptor&&o.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:g.descriptor})]}):null,L=($,I)=>$?I?o.jsx("a",{className:"nhsuk-header__service-name",href:I,children:$}):o.jsx("span",{className:"nhsuk-header__service-name",children:$}):null,k=$=>$.active||$.current?o.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:$.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:$.html}}):$.text}):$.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:$.html}}):$.text,H=()=>o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})}),Q=e==="server"&&h?.items&&!j,O=Q?[]:h?.items,z=Q?h.items:[];return o.jsxs("header",{className:v,role:"banner","data-module":"nhsuk-header",...C,...S,children:[o.jsxs("div",{className:D,children:[o.jsxs("div",{className:"nhsuk-header__service",children:[_?o.jsxs("a",{className:"nhsuk-header__service-logo",href:_,children:[A(),F(),M&&L(p.text)]}):o.jsxs(o.Fragment,{children:[A(),F(),M&&L(p.text)]}),p.text&&!M&&L(p.text,p.href)]}),x&&o.jsx(cc,{...x}),o.jsx(ec,{...m,variant:T==="white"?"white":"default"})]}),h&&h.items&&h.items.length>0&&o.jsx("nav",{className:y,"aria-label":h.ariaLabel||"Menu",children:o.jsx("div",{className:be("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--initializing":n&&e==="client","nhsuk-header__navigation-container--ssr":!n},P),ref:e==="client"?u:void 0,children:o.jsxs("ul",{className:"nhsuk-header__navigation-list",ref:e==="client"?c:void 0,children:[(e==="server"?O||[]:h?.items||[]).map(($,I)=>o.jsx("li",{className:be("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":$.active||$.current,"nhsuk-header__navigation-item--hidden":e==="client"&&a&&i!==void 0&&I>=(i??0)},$.className),...$.attributes||{},children:o.jsx("a",{className:"nhsuk-header__navigation-link",href:$.href,...$.active||$.current?{"aria-current":$.current?"page":"true"}:{},children:k($)})},I)),e==="client"&&a&&i!==void 0&&o.jsx("li",{className:"nhsuk-header__navigation-item nhsuk-header__navigation-item--more",children:o.jsxs("button",{className:"nhsuk-header__navigation-button",id:"toggle-more-menu",type:"button","aria-haspopup":"true","aria-expanded":r?"true":"false","aria-controls":"nhsuk-header-more-menu",onClick:l,children:[o.jsx("span",{children:"More"}),H()]})})]})})}),e==="client"&&n&&h&&h.items&&h.items.length>0&&r&&s&&o.jsx("div",{className:"nhsuk-header__dropdown-menu",hidden:!s,id:"nhsuk-header-more-menu",children:o.jsx("ul",{className:"nhsuk-header__dropdown-list",children:h.items.slice(i??0).map(($,I)=>o.jsx("li",{className:be("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":$.active||$.current}),children:o.jsx("a",{className:"nhsuk-header__dropdown-link",href:$.href,...$.active||$.current?{"aria-current":$.current?"page":"true"}:{},onClick:()=>{l?.()},children:k($)})},`overflow-${(i??0)+I}`))})}),e==="server"&&Q&&z.length>0&&o.jsx("div",{className:"nhsuk-header__dropdown-menu","data-ssr-overflow":"true",children:o.jsx("ul",{className:"nhsuk-header__dropdown-list",children:z.map(($,I)=>o.jsx("li",{className:be("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":$.active||$.current}),children:o.jsx("a",{className:"nhsuk-header__dropdown-link",href:$.href,...$.active||$.current?{"aria-current":$.current?"page":"true"}:{},children:k($)})},`overflow-server-${I}`))})})]})}const Ba=({className:t,logo:e={},service:n={},organisation:r,search:a,account:i,navigation:s,containerClasses:l,variant:u="default",attributes:c={},...d})=>{const[f,p]=B.useState(!1),[g,x]=B.useState(!1),[m,h]=B.useState(s?.items?.length||0),[P,T]=B.useState(!1),[C,w]=B.useState(!1),j=B.useRef(null),S=B.useRef(null),M=B.useRef(!1);B.useEffect(()=>{typeof window>"u"||w(!0)},[]),B.useEffect(()=>{if(typeof document>"u")return;const y=N=>{N.key==="Escape"&&f&&p(!1)};if(f)return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[f]);const _=B.useRef(null),v=B.useCallback(()=>{if(!C||!s?.items||s.items.length===0||M.current)return;const y=j.current,N=S.current;if(!y||!N)return;M.current=!0,y.classList.add("nhsuk-header__navigation-container--measuring");const A=y.clientWidth,F=Array.from(N.children);if(!F.length){y.classList.remove("nhsuk-header__navigation-container--measuring"),M.current=!1;return}if(_.current==null){const R=document.createElement("button");R.type="button",R.className="nhsuk-header__navigation-button nhsuk-header__navigation-button--prototype",R.style.position="absolute",R.style.visibility="hidden",R.style.pointerEvents="none",R.innerHTML="<span>More</span>",y.appendChild(R),_.current=R.getBoundingClientRect().width||104,y.removeChild(R)}const L=_.current+16;let k=0,H=0;const Q=window.getComputedStyle(y),O=parseFloat(Q.paddingLeft)||0,z=parseFloat(Q.paddingRight)||0;let $=O+z;for(const R of F){const K=R.getBoundingClientRect().width;if(k+K+L+$>A)break;k+=K,H+=1}const I=H<s.items.length,U=I?H:s.items.length;x(R=>R===I?R:I),h(R=>R===U?R:U),y.classList.remove("nhsuk-header__navigation-container--measuring"),M.current=!1},[C,s?.items]);B.useEffect(()=>{if(!C)return;const y=j.current;if(!y)return;let N=null;const A=()=>{N==null&&(N=window.requestAnimationFrame(()=>{N=null,v()}))};v();const F=new ResizeObserver(()=>A());return F.observe(y),S.current&&F.observe(S.current),()=>{N!=null&&window.cancelAnimationFrame(N),F.disconnect()}},[C,v]),B.useEffect(()=>{C&&v()},[s?.items?.length,C,v]);const D=y=>{y&&(y.preventDefault(),y.stopPropagation());const N=!f;p(N),T(N)};return uc({className:t,logo:e,service:n,organisation:r,search:a,account:i,navigation:s,containerClasses:l,variant:u,attributes:c,...d},{variant:"client",isClient:C,menuOpen:f,showMoreButton:g,visibleItems:m,dropdownVisible:P,toggleMenu:D,navContainerRef:j,navListRef:S})},a0=t=>uc(t,{variant:"server",isClient:!1}),dc=({heading:t,headingLevel:e=1,headingClasses:n="",text:r,html:a,imageURL:i,containerClasses:s="",classes:l="",children:u,...c})=>{const d=["nhsuk-hero",i&&t?"nhsuk-hero--image nhsuk-hero--image-description":"",i&&!t?"nhsuk-hero--image":"",l].filter(Boolean).join(" "),f=["nhsuk-width-container",s,i?"":"nhsuk-hero--border"].filter(Boolean).join(" "),p=["nhsuk-hero__heading",n,!u&&!r&&!a?"nhsuk-u-margin-bottom-0":""].filter(Boolean).join(" "),g=u||t||r||a,x=()=>{if(!t)return null;const m={className:p};switch(e){case 1:return o.jsx("h1",{...m,children:t});case 2:return o.jsx("h2",{...m,children:t});case 3:return o.jsx("h3",{...m,children:t});case 4:return o.jsx("h4",{...m,children:t});case 5:return o.jsx("h5",{...m,children:t});case 6:return o.jsx("h6",{...m,children:t});default:return o.jsx("h1",{...m,children:t})}};return o.jsxs("section",{className:d,style:i?{backgroundImage:`url('${i}')`}:void 0,role:"banner",...c,children:[i&&o.jsx("div",{className:"nhsuk-hero__overlay",children:g&&o.jsx("div",{className:f,children:o.jsx("div",{className:"nhsuk-grid-row",children:o.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:o.jsxs("div",{className:"nhsuk-hero-content",children:[x(),u||(a?o.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):r?o.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null),o.jsx("span",{className:"nhsuk-hero__arrow","aria-hidden":"true"})]})})})})}),!i&&g&&o.jsx("div",{className:f,children:o.jsx("div",{className:"nhsuk-grid-row",children:o.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:o.jsxs("div",{className:"nhsuk-hero__wrapper",children:[x(),u||(a?o.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):r?o.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null)]})})})})]})};dc.displayName="Hero";const es=({className:t,links:e=[],linksColumn2:n,linksColumn3:r,metaLinks:a,copyright:i="Â© NHS England",containerClasses:s,attributes:l={},style:u,footerStyle:c,containerStyle:d})=>{const f=(g,x=!1)=>o.jsx("li",{className:be("nhsuk-footer__list-item",{"nhsuk-footer-default__list-item":x}),children:o.jsx("a",{className:"nhsuk-footer__list-item-link",href:g.URL,target:g.newWindow?"_blank":void 0,rel:g.newWindow?"noopener noreferrer":void 0,children:g.label})},`${g.URL}-${g.label}`),p=!!(n||r);return o.jsx("footer",{role:"contentinfo",...l,style:{...l?.style,...u},children:o.jsxs("div",{className:"nhsuk-footer-container",children:[o.jsxs("div",{className:be("nhsuk-width-container",s),style:d,children:[o.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Support links"}),o.jsx("div",{className:be("nhsuk-footer",t),style:c,children:p?o.jsxs(o.Fragment,{children:[e.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:e.map(g=>f(g))}),n&&n.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:n.map(g=>f(g))}),r&&r.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:r.map(g=>f(g))}),a&&a.length>0&&o.jsx("ul",{className:"nhsuk-footer__list nhsuk-footer__meta",children:a.map(g=>f(g))})]}):o.jsxs("ul",{className:"nhsuk-footer__list",children:[e.map(g=>f(g,!0)),(n||[]).map(g=>f(g,!0)),(r||[]).map(g=>f(g,!0)),(a||[]).map(g=>f(g,!0))]})}),!p&&o.jsx("div",{children:o.jsx("p",{className:"nhsuk-footer__copyright",children:i})})]}),p&&o.jsx("div",{className:"nhsuk-width-container",children:o.jsx("div",{children:o.jsx("p",{className:"nhsuk-footer__copyright",children:i})})})]})})};function Aa(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i0(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ts(t){let e,n,r;t.length!==2?(e=Aa,n=(l,u)=>Aa(t(l),u),r=(l,u)=>t(l)-u):(e=t===Aa||t===i0?t:s0,n=t,r=t);function a(l,u,c=0,d=l.length){if(c<d){if(e(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<0?c=f+1:d=f}while(c<d)}return c}function i(l,u,c=0,d=l.length){if(c<d){if(e(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<=0?c=f+1:d=f}while(c<d)}return c}function s(l,u,c=0,d=l.length){const f=a(l,u,c,d-1);return f>c&&r(l[f-1],u)>-r(l[f],u)?f-1:f}return{left:a,center:s,right:i}}function s0(){return 0}function o0(t){return t===null?NaN:+t}const l0=ts(Aa).right;ts(o0).center;function fc(t,e){let n,r;if(e===void 0)for(const a of t)a!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)));else{let a=-1;for(let i of t)(i=e(i,++a,t))!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)))}return[n,r]}class hc extends Map{constructor(e,n=d0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,a]of e)this.set(r,a)}get(e){return super.get(mc(this,e))}has(e){return super.has(mc(this,e))}set(e,n){return super.set(c0(this,e),n)}delete(e){return super.delete(u0(this,e))}}function mc({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function c0({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function u0({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function d0(t){return t!==null&&typeof t=="object"?t.valueOf():t}const f0=Math.sqrt(50),h0=Math.sqrt(10),m0=Math.sqrt(2);function Ea(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),s=i>=f0?10:i>=h0?5:i>=m0?2:1;let l,u,c;return a<0?(c=Math.pow(10,-a)/s,l=Math.round(t*c),u=Math.round(e*c),l/c<t&&++l,u/c>e&&--u,c=-c):(c=Math.pow(10,a)*s,l=Math.round(t/c),u=Math.round(e/c),l*c<t&&++l,u*c>e&&--u),u<l&&.5<=n&&n<2?Ea(t,e,n*2):[l,u,c]}function p0(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,i,s]=r?Ea(e,t,n):Ea(t,e,n);if(!(i>=a))return[];const l=i-a+1,u=new Array(l);if(r)if(s<0)for(let c=0;c<l;++c)u[c]=(i-c)/-s;else for(let c=0;c<l;++c)u[c]=(i-c)*s;else if(s<0)for(let c=0;c<l;++c)u[c]=(a+c)/-s;else for(let c=0;c<l;++c)u[c]=(a+c)*s;return u}function ns(t,e,n){return e=+e,t=+t,n=+n,Ea(t,e,n)[2]}function rs(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?ns(e,t,n):ns(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function g0(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(a);++r<a;)i[r]=t+r*n;return i}function Ha(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const pc=Symbol("implicit");function gc(){var t=new hc,e=[],n=[],r=pc;function a(i){let s=t.get(i);if(s===void 0){if(r!==pc)return r;t.set(i,s=e.push(i)-1)}return n[s%n.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new hc;for(const s of i)t.has(s)||t.set(s,e.push(s)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return gc(e,n).unknown(r)},Ha.apply(a,arguments),a}function bc(){var t=gc().unknown(void 0),e=t.domain,n=t.range,r=0,a=1,i,s,l=!1,u=0,c=0,d=.5;delete t.unknown;function f(){var p=e().length,g=a<r,x=g?a:r,m=g?r:a;i=(m-x)/Math.max(1,p-u+c*2),l&&(i=Math.floor(i)),x+=(m-x-i*(p-u))*d,s=i*(1-u),l&&(x=Math.round(x),s=Math.round(s));var h=g0(p).map(function(P){return x+i*P});return n(g?h.reverse():h)}return t.domain=function(p){return arguments.length?(e(p),f()):e()},t.range=function(p){return arguments.length?([r,a]=p,r=+r,a=+a,f()):[r,a]},t.rangeRound=function(p){return[r,a]=p,r=+r,a=+a,l=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(p){return arguments.length?(l=!!p,f()):l},t.padding=function(p){return arguments.length?(u=Math.min(1,c=+p),f()):u},t.paddingInner=function(p){return arguments.length?(u=Math.min(1,p),f()):u},t.paddingOuter=function(p){return arguments.length?(c=+p,f()):c},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},t.copy=function(){return bc(e(),[r,a]).round(l).paddingInner(u).paddingOuter(c).align(d)},Ha.apply(f(),arguments)}function as(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _c(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Tr(){}var Nr=.7,Ra=1/Nr,Jn="\\s*([+-]?\\d+)\\s*",jr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",b0=/^#([0-9a-f]{3,8})$/,_0=new RegExp(`^rgb\\(${Jn},${Jn},${Jn}\\)$`),y0=new RegExp(`^rgb\\(${Bt},${Bt},${Bt}\\)$`),x0=new RegExp(`^rgba\\(${Jn},${Jn},${Jn},${jr}\\)$`),v0=new RegExp(`^rgba\\(${Bt},${Bt},${Bt},${jr}\\)$`),w0=new RegExp(`^hsl\\(${jr},${Bt},${Bt}\\)$`),S0=new RegExp(`^hsla\\(${jr},${Bt},${Bt},${jr}\\)$`),yc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};as(Tr,Dr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:xc,formatHex:xc,formatHex8:k0,formatHsl:C0,formatRgb:vc,toString:vc});function xc(){return this.rgb().formatHex()}function k0(){return this.rgb().formatHex8()}function C0(){return Tc(this).formatHsl()}function vc(){return this.rgb().formatRgb()}function Dr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=b0.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?wc(e):n===3?new mt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?za(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?za(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_0.exec(t))?new mt(e[1],e[2],e[3],1):(e=y0.exec(t))?new mt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=x0.exec(t))?za(e[1],e[2],e[3],e[4]):(e=v0.exec(t))?za(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=w0.exec(t))?Cc(e[1],e[2]/100,e[3]/100,1):(e=S0.exec(t))?Cc(e[1],e[2]/100,e[3]/100,e[4]):yc.hasOwnProperty(t)?wc(yc[t]):t==="transparent"?new mt(NaN,NaN,NaN,0):null}function wc(t){return new mt(t>>16&255,t>>8&255,t&255,1)}function za(t,e,n,r){return r<=0&&(t=e=n=NaN),new mt(t,e,n,r)}function T0(t){return t instanceof Tr||(t=Dr(t)),t?(t=t.rgb(),new mt(t.r,t.g,t.b,t.opacity)):new mt}function is(t,e,n,r){return arguments.length===1?T0(t):new mt(t,e,n,r??1)}function mt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}as(mt,is,_c(Tr,{brighter(t){return t=t==null?Ra:Math.pow(Ra,t),new mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Nr:Math.pow(Nr,t),new mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new mt(Mn(this.r),Mn(this.g),Mn(this.b),Oa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sc,formatHex:Sc,formatHex8:N0,formatRgb:kc,toString:kc}));function Sc(){return`#${$n(this.r)}${$n(this.g)}${$n(this.b)}`}function N0(){return`#${$n(this.r)}${$n(this.g)}${$n(this.b)}${$n((isNaN(this.opacity)?1:this.opacity)*255)}`}function kc(){const t=Oa(this.opacity);return`${t===1?"rgb(":"rgba("}${Mn(this.r)}, ${Mn(this.g)}, ${Mn(this.b)}${t===1?")":`, ${t})`}`}function Oa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Mn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $n(t){return t=Mn(t),(t<16?"0":"")+t.toString(16)}function Cc(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Pt(t,e,n,r)}function Tc(t){if(t instanceof Pt)return new Pt(t.h,t.s,t.l,t.opacity);if(t instanceof Tr||(t=Dr(t)),!t)return new Pt;if(t instanceof Pt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),s=NaN,l=i-a,u=(i+a)/2;return l?(e===i?s=(n-r)/l+(n<r)*6:n===i?s=(r-e)/l+2:s=(e-n)/l+4,l/=u<.5?i+a:2-i-a,s*=60):l=u>0&&u<1?0:s,new Pt(s,l,u,t.opacity)}function j0(t,e,n,r){return arguments.length===1?Tc(t):new Pt(t,e,n,r??1)}function Pt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}as(Pt,j0,_c(Tr,{brighter(t){return t=t==null?Ra:Math.pow(Ra,t),new Pt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Nr:Math.pow(Nr,t),new Pt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new mt(ss(t>=240?t-240:t+120,a,r),ss(t,a,r),ss(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new Pt(Nc(this.h),Wa(this.s),Wa(this.l),Oa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Oa(this.opacity);return`${t===1?"hsl(":"hsla("}${Nc(this.h)}, ${Wa(this.s)*100}%, ${Wa(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Nc(t){return t=(t||0)%360,t<0?t+360:t}function Wa(t){return Math.max(0,Math.min(1,t||0))}function ss(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const os=t=>()=>t;function D0(t,e){return function(n){return t+n*e}}function M0(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function $0(t){return(t=+t)==1?jc:function(e,n){return n-e?M0(e,n,t):os(isNaN(e)?n:e)}}function jc(t,e){var n=e-t;return n?D0(t,n):os(isNaN(t)?e:t)}const Dc=(function t(e){var n=$0(e);function r(a,i){var s=n((a=is(a)).r,(i=is(i)).r),l=n(a.g,i.g),u=n(a.b,i.b),c=jc(a.opacity,i.opacity);return function(d){return a.r=s(d),a.g=l(d),a.b=u(d),a.opacity=c(d),a+""}}return r.gamma=t,r})(1);function I0(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=t[a]*(1-i)+e[a]*i;return r}}function P0(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function L0(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),i=new Array(n),s;for(s=0;s<r;++s)a[s]=us(t[s],e[s]);for(;s<n;++s)i[s]=e[s];return function(l){for(s=0;s<r;++s)i[s]=a[s](l);return i}}function F0(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ua(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function B0(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=us(t[a],e[a]):r[a]=e[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var ls=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cs=new RegExp(ls.source,"g");function A0(t){return function(){return t}}function E0(t){return function(e){return t(e)+""}}function H0(t,e){var n=ls.lastIndex=cs.lastIndex=0,r,a,i,s=-1,l=[],u=[];for(t=t+"",e=e+"";(r=ls.exec(t))&&(a=cs.exec(e));)(i=a.index)>n&&(i=e.slice(n,i),l[s]?l[s]+=i:l[++s]=i),(r=r[0])===(a=a[0])?l[s]?l[s]+=a:l[++s]=a:(l[++s]=null,u.push({i:s,x:Ua(r,a)})),n=cs.lastIndex;return n<e.length&&(i=e.slice(n),l[s]?l[s]+=i:l[++s]=i),l.length<2?u[0]?E0(u[0].x):A0(e):(e=u.length,function(c){for(var d=0,f;d<e;++d)l[(f=u[d]).i]=f.x(c);return l.join("")})}function us(t,e){var n=typeof e,r;return e==null||n==="boolean"?os(e):(n==="number"?Ua:n==="string"?(r=Dr(e))?(e=r,Dc):H0:e instanceof Dr?Dc:e instanceof Date?F0:P0(e)?I0:Array.isArray(e)?L0:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?B0:Ua)(t,e)}function R0(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function z0(t){return function(){return t}}function O0(t){return+t}var Mc=[0,1];function Qn(t){return t}function ds(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:z0(isNaN(e)?NaN:.5)}function W0(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function U0(t,e,n){var r=t[0],a=t[1],i=e[0],s=e[1];return a<r?(r=ds(a,r),i=n(s,i)):(r=ds(r,a),i=n(i,s)),function(l){return i(r(l))}}function G0(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),i=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)a[s]=ds(t[s],t[s+1]),i[s]=n(e[s],e[s+1]);return function(l){var u=l0(t,l,1,r)-1;return i[u](a[u](l))}}function $c(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Y0(){var t=Mc,e=Mc,n=us,r,a,i,s=Qn,l,u,c;function d(){var p=Math.min(t.length,e.length);return s!==Qn&&(s=W0(t[0],t[p-1])),l=p>2?G0:U0,u=c=null,f}function f(p){return p==null||isNaN(p=+p)?i:(u||(u=l(t.map(r),e,n)))(r(s(p)))}return f.invert=function(p){return s(a((c||(c=l(e,t.map(r),Ua)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,O0),d()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),n=R0,d()},f.clamp=function(p){return arguments.length?(s=p?!0:Qn,d()):s!==Qn},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,g){return r=p,a=g,d()}}function Ic(){return Y0()(Qn,Qn)}function V0(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ga(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function er(t){return t=Ga(Math.abs(t)),t?t[1]:NaN}function q0(t,e){return function(n,r){for(var a=n.length,i=[],s=0,l=t[0],u=0;a>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),i.push(n.substring(a-=l,a+l)),!((u+=l+1)>r));)l=t[s=(s+1)%t.length];return i.reverse().join(e)}}function X0(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var K0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ya(t){if(!(e=K0.exec(t)))throw new Error("invalid format: "+t);var e;return new fs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ya.prototype=fs.prototype;function fs(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}fs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Z0(t){e:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var Pc;function J0(t,e){var n=Ga(t,e);if(!n)return t+"";var r=n[0],a=n[1],i=a-(Pc=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=r.length;return i===s?r:i>s?r+new Array(i-s+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Ga(t,Math.max(0,e+i-1))[0]}function Lc(t,e){var n=Ga(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const Fc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:V0,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Lc(t*100,e),r:Lc,s:J0,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Bc(t){return t}var Ac=Array.prototype.map,Ec=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Q0(t){var e=t.grouping===void 0||t.thousands===void 0?Bc:q0(Ac.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?Bc:X0(Ac.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"âˆ’":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(f){f=Ya(f);var p=f.fill,g=f.align,x=f.sign,m=f.symbol,h=f.zero,P=f.width,T=f.comma,C=f.precision,w=f.trim,j=f.type;j==="n"?(T=!0,j="g"):Fc[j]||(C===void 0&&(C=12),w=!0,j="g"),(h||p==="0"&&g==="=")&&(h=!0,p="0",g="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",M=m==="$"?r:/[%p]/.test(j)?s:"",_=Fc[j],v=/[defgprs%]/.test(j);C=C===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function D(y){var N=S,A=M,F,L,k;if(j==="c")A=_(y)+A,y="";else{y=+y;var H=y<0||1/y<0;if(y=isNaN(y)?u:_(Math.abs(y),C),w&&(y=Z0(y)),H&&+y==0&&x!=="+"&&(H=!1),N=(H?x==="("?x:l:x==="-"||x==="("?"":x)+N,A=(j==="s"?Ec[8+Pc/3]:"")+A+(H&&x==="("?")":""),v){for(F=-1,L=y.length;++F<L;)if(k=y.charCodeAt(F),48>k||k>57){A=(k===46?a+y.slice(F+1):y.slice(F))+A,y=y.slice(0,F);break}}}T&&!h&&(y=e(y,1/0));var Q=N.length+y.length+A.length,O=Q<P?new Array(P-Q+1).join(p):"";switch(T&&h&&(y=e(O+y,O.length?P-A.length:1/0),O=""),g){case"<":y=N+y+A+O;break;case"=":y=N+O+y+A;break;case"^":y=O.slice(0,Q=O.length>>1)+N+y+A+O.slice(Q);break;default:y=O+N+y+A;break}return i(y)}return D.toString=function(){return f+""},D}function d(f,p){var g=c((f=Ya(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(er(p)/3)))*3,m=Math.pow(10,-x),h=Ec[8+x/3];return function(P){return g(m*P)+h}}return{format:c,formatPrefix:d}}var Va,Hc,Rc;eb({thousands:",",grouping:[3],currency:["$",""]});function eb(t){return Va=Q0(t),Hc=Va.format,Rc=Va.formatPrefix,Va}function tb(t){return Math.max(0,-er(Math.abs(t)))}function nb(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(er(e)/3)))*3-er(Math.abs(t)))}function rb(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,er(e)-er(t))+1}function ab(t,e,n,r){var a=rs(t,e,n),i;switch(r=Ya(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=nb(a,s))&&(r.precision=i),Rc(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=rb(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=tb(a))&&(r.precision=i-(r.type==="%")*2);break}}return Hc(r)}function ib(t){var e=t.domain;return t.ticks=function(n){var r=e();return p0(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return ab(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,i=r.length-1,s=r[a],l=r[i],u,c,d=10;for(l<s&&(c=s,s=l,l=c,c=a,a=i,i=c);d-- >0;){if(c=ns(s,l,n),c===u)return r[a]=s,r[i]=l,e(r);if(c>0)s=Math.floor(s/c)*c,l=Math.ceil(l/c)*c;else if(c<0)s=Math.ceil(s*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function qa(){var t=Ic();return t.copy=function(){return $c(t,qa())},Ha.apply(t,arguments),ib(t)}function sb(t,e){t=t.slice();var n=0,r=t.length-1,a=t[n],i=t[r],s;return i<a&&(s=n,n=r,r=s,s=a,a=i,i=s),t[n]=e.floor(a),t[r]=e.ceil(i),t}const hs=new Date,ms=new Date;function et(t,e,n,r){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const s=a(i),l=a.ceil(i);return i-s<l-i?s:l},a.offset=(i,s)=>(e(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,l)=>{const u=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<s)||!(l>0))return u;let c;do u.push(c=new Date(+i)),e(i,l),t(i);while(c<i&&i<s);return u},a.filter=i=>et(s=>{if(s>=s)for(;t(s),!i(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!i(s););else for(;--l>=0;)for(;e(s,1),!i(s););}),n&&(a.count=(i,s)=>(hs.setTime(+i),ms.setTime(+s),t(hs),t(ms),Math.floor(n(hs,ms))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?s=>r(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const Xa=et(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Xa.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?et(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Xa),Xa.range;const rn=1e3,Nt=rn*60,an=Nt*60,sn=an*24,ps=sn*7,zc=sn*30,gs=sn*365,tr=et(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*rn)},(t,e)=>(e-t)/rn,t=>t.getUTCSeconds());tr.range;const bs=et(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rn)},(t,e)=>{t.setTime(+t+e*Nt)},(t,e)=>(e-t)/Nt,t=>t.getMinutes());bs.range,et(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Nt)},(t,e)=>(e-t)/Nt,t=>t.getUTCMinutes()).range;const _s=et(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rn-t.getMinutes()*Nt)},(t,e)=>{t.setTime(+t+e*an)},(t,e)=>(e-t)/an,t=>t.getHours());_s.range,et(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*an)},(t,e)=>(e-t)/an,t=>t.getUTCHours()).range;const Mr=et(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Nt)/sn,t=>t.getDate()-1);Mr.range;const ys=et(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sn,t=>t.getUTCDate()-1);ys.range,et(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sn,t=>Math.floor(t/sn)).range;function In(t){return et(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Nt)/ps)}const Ka=In(0),Za=In(1),ob=In(2),lb=In(3),nr=In(4),cb=In(5),ub=In(6);Ka.range,Za.range,ob.range,lb.range,nr.range,cb.range,ub.range;function Pn(t){return et(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ps)}const Oc=Pn(0),Ja=Pn(1),db=Pn(2),fb=Pn(3),rr=Pn(4),hb=Pn(5),mb=Pn(6);Oc.range,Ja.range,db.range,fb.range,rr.range,hb.range,mb.range;const $r=et(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());$r.range,et(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()).range;const on=et(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());on.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:et(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}),on.range;const Ln=et(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ln.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:et(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}),Ln.range;function pb(t,e,n,r,a,i){const s=[[tr,1,rn],[tr,5,5*rn],[tr,15,15*rn],[tr,30,30*rn],[i,1,Nt],[i,5,5*Nt],[i,15,15*Nt],[i,30,30*Nt],[a,1,an],[a,3,3*an],[a,6,6*an],[a,12,12*an],[r,1,sn],[r,2,2*sn],[n,1,ps],[e,1,zc],[e,3,3*zc],[t,1,gs]];function l(c,d,f){const p=d<c;p&&([c,d]=[d,c]);const g=f&&typeof f.range=="function"?f:u(c,d,f),x=g?g.range(c,+d+1):[];return p?x.reverse():x}function u(c,d,f){const p=Math.abs(d-c)/f,g=ts(([,,h])=>h).right(s,p);if(g===s.length)return t.every(rs(c/gs,d/gs,f));if(g===0)return Xa.every(Math.max(rs(c,d,f),1));const[x,m]=s[p/s[g-1][2]<s[g][2]/p?g-1:g];return x.every(m)}return[l,u]}const[gb,bb]=pb(on,$r,Ka,Mr,_s,bs);function xs(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function vs(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ir(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function _b(t){var e=t.dateTime,n=t.date,r=t.time,a=t.periods,i=t.days,s=t.shortDays,l=t.months,u=t.shortMonths,c=Pr(a),d=Lr(a),f=Pr(i),p=Lr(i),g=Pr(s),x=Lr(s),m=Pr(l),h=Lr(l),P=Pr(u),T=Lr(u),C={a:H,A:Q,b:O,B:z,c:null,d:qc,e:qc,f:zb,g:Zb,G:Qb,H:Eb,I:Hb,j:Rb,L:Xc,m:Ob,M:Wb,p:$,q:I,Q:tu,s:nu,S:Ub,u:Gb,U:Yb,V:Vb,w:qb,W:Xb,x:null,X:null,y:Kb,Y:Jb,Z:e_,"%":eu},w={a:U,A:R,b:K,B:ne,c:null,d:Zc,e:Zc,f:a_,g:m_,G:g_,H:t_,I:n_,j:r_,L:Jc,m:i_,M:s_,p:ce,q:re,Q:tu,s:nu,S:o_,u:l_,U:c_,V:u_,w:d_,W:f_,x:null,X:null,y:h_,Y:p_,Z:b_,"%":eu},j={a:D,A:y,b:N,B:A,c:F,d:Yc,e:Yc,f:Lb,g:Gc,G:Uc,H:Vc,I:Vc,j:Mb,L:Pb,m:Db,M:$b,p:v,q:jb,Q:Bb,s:Ab,S:Ib,u:Sb,U:kb,V:Cb,w:wb,W:Tb,x:L,X:k,y:Gc,Y:Uc,Z:Nb,"%":Fb};C.x=S(n,C),C.X=S(r,C),C.c=S(e,C),w.x=S(n,w),w.X=S(r,w),w.c=S(e,w);function S(Y,q){return function(oe){var W=[],Z=-1,J=0,le=Y.length,ie,he,ye;for(oe instanceof Date||(oe=new Date(+oe));++Z<le;)Y.charCodeAt(Z)===37&&(W.push(Y.slice(J,Z)),(he=Wc[ie=Y.charAt(++Z)])!=null?ie=Y.charAt(++Z):he=ie==="e"?" ":"0",(ye=q[ie])&&(ie=ye(oe,he)),W.push(ie),J=Z+1);return W.push(Y.slice(J,Z)),W.join("")}}function M(Y,q){return function(oe){var W=Ir(1900,void 0,1),Z=_(W,Y,oe+="",0),J,le;if(Z!=oe.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(q&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(J=vs(Ir(W.y,0,1)),le=J.getUTCDay(),J=le>4||le===0?Ja.ceil(J):Ja(J),J=ys.offset(J,(W.V-1)*7),W.y=J.getUTCFullYear(),W.m=J.getUTCMonth(),W.d=J.getUTCDate()+(W.w+6)%7):(J=xs(Ir(W.y,0,1)),le=J.getDay(),J=le>4||le===0?Za.ceil(J):Za(J),J=Mr.offset(J,(W.V-1)*7),W.y=J.getFullYear(),W.m=J.getMonth(),W.d=J.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),le="Z"in W?vs(Ir(W.y,0,1)).getUTCDay():xs(Ir(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(le+5)%7:W.w+W.U*7-(le+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,vs(W)):xs(W)}}function _(Y,q,oe,W){for(var Z=0,J=q.length,le=oe.length,ie,he;Z<J;){if(W>=le)return-1;if(ie=q.charCodeAt(Z++),ie===37){if(ie=q.charAt(Z++),he=j[ie in Wc?q.charAt(Z++):ie],!he||(W=he(Y,oe,W))<0)return-1}else if(ie!=oe.charCodeAt(W++))return-1}return W}function v(Y,q,oe){var W=c.exec(q.slice(oe));return W?(Y.p=d.get(W[0].toLowerCase()),oe+W[0].length):-1}function D(Y,q,oe){var W=g.exec(q.slice(oe));return W?(Y.w=x.get(W[0].toLowerCase()),oe+W[0].length):-1}function y(Y,q,oe){var W=f.exec(q.slice(oe));return W?(Y.w=p.get(W[0].toLowerCase()),oe+W[0].length):-1}function N(Y,q,oe){var W=P.exec(q.slice(oe));return W?(Y.m=T.get(W[0].toLowerCase()),oe+W[0].length):-1}function A(Y,q,oe){var W=m.exec(q.slice(oe));return W?(Y.m=h.get(W[0].toLowerCase()),oe+W[0].length):-1}function F(Y,q,oe){return _(Y,e,q,oe)}function L(Y,q,oe){return _(Y,n,q,oe)}function k(Y,q,oe){return _(Y,r,q,oe)}function H(Y){return s[Y.getDay()]}function Q(Y){return i[Y.getDay()]}function O(Y){return u[Y.getMonth()]}function z(Y){return l[Y.getMonth()]}function $(Y){return a[+(Y.getHours()>=12)]}function I(Y){return 1+~~(Y.getMonth()/3)}function U(Y){return s[Y.getUTCDay()]}function R(Y){return i[Y.getUTCDay()]}function K(Y){return u[Y.getUTCMonth()]}function ne(Y){return l[Y.getUTCMonth()]}function ce(Y){return a[+(Y.getUTCHours()>=12)]}function re(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var q=S(Y+="",C);return q.toString=function(){return Y},q},parse:function(Y){var q=M(Y+="",!1);return q.toString=function(){return Y},q},utcFormat:function(Y){var q=S(Y+="",w);return q.toString=function(){return Y},q},utcParse:function(Y){var q=M(Y+="",!0);return q.toString=function(){return Y},q}}}var Wc={"-":"",_:" ",0:"0"},rt=/^\s*\d+/,yb=/^%/,xb=/[\\^$*+?|[\]().{}]/g;function Pe(t,e,n){var r=t<0?"-":"",a=(r?-t:t)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(e)+a:a)}function vb(t){return t.replace(xb,"\\$&")}function Pr(t){return new RegExp("^(?:"+t.map(vb).join("|")+")","i")}function Lr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function wb(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Sb(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function kb(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Cb(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Tb(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Uc(t,e,n){var r=rt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Gc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Nb(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jb(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Db(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Yc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Mb(t,e,n){var r=rt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Vc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function $b(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ib(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Pb(t,e,n){var r=rt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Lb(t,e,n){var r=rt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Fb(t,e,n){var r=yb.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Bb(t,e,n){var r=rt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ab(t,e,n){var r=rt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function qc(t,e){return Pe(t.getDate(),e,2)}function Eb(t,e){return Pe(t.getHours(),e,2)}function Hb(t,e){return Pe(t.getHours()%12||12,e,2)}function Rb(t,e){return Pe(1+Mr.count(on(t),t),e,3)}function Xc(t,e){return Pe(t.getMilliseconds(),e,3)}function zb(t,e){return Xc(t,e)+"000"}function Ob(t,e){return Pe(t.getMonth()+1,e,2)}function Wb(t,e){return Pe(t.getMinutes(),e,2)}function Ub(t,e){return Pe(t.getSeconds(),e,2)}function Gb(t){var e=t.getDay();return e===0?7:e}function Yb(t,e){return Pe(Ka.count(on(t)-1,t),e,2)}function Kc(t){var e=t.getDay();return e>=4||e===0?nr(t):nr.ceil(t)}function Vb(t,e){return t=Kc(t),Pe(nr.count(on(t),t)+(on(t).getDay()===4),e,2)}function qb(t){return t.getDay()}function Xb(t,e){return Pe(Za.count(on(t)-1,t),e,2)}function Kb(t,e){return Pe(t.getFullYear()%100,e,2)}function Zb(t,e){return t=Kc(t),Pe(t.getFullYear()%100,e,2)}function Jb(t,e){return Pe(t.getFullYear()%1e4,e,4)}function Qb(t,e){var n=t.getDay();return t=n>=4||n===0?nr(t):nr.ceil(t),Pe(t.getFullYear()%1e4,e,4)}function e_(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Pe(e/60|0,"0",2)+Pe(e%60,"0",2)}function Zc(t,e){return Pe(t.getUTCDate(),e,2)}function t_(t,e){return Pe(t.getUTCHours(),e,2)}function n_(t,e){return Pe(t.getUTCHours()%12||12,e,2)}function r_(t,e){return Pe(1+ys.count(Ln(t),t),e,3)}function Jc(t,e){return Pe(t.getUTCMilliseconds(),e,3)}function a_(t,e){return Jc(t,e)+"000"}function i_(t,e){return Pe(t.getUTCMonth()+1,e,2)}function s_(t,e){return Pe(t.getUTCMinutes(),e,2)}function o_(t,e){return Pe(t.getUTCSeconds(),e,2)}function l_(t){var e=t.getUTCDay();return e===0?7:e}function c_(t,e){return Pe(Oc.count(Ln(t)-1,t),e,2)}function Qc(t){var e=t.getUTCDay();return e>=4||e===0?rr(t):rr.ceil(t)}function u_(t,e){return t=Qc(t),Pe(rr.count(Ln(t),t)+(Ln(t).getUTCDay()===4),e,2)}function d_(t){return t.getUTCDay()}function f_(t,e){return Pe(Ja.count(Ln(t)-1,t),e,2)}function h_(t,e){return Pe(t.getUTCFullYear()%100,e,2)}function m_(t,e){return t=Qc(t),Pe(t.getUTCFullYear()%100,e,2)}function p_(t,e){return Pe(t.getUTCFullYear()%1e4,e,4)}function g_(t,e){var n=t.getUTCDay();return t=n>=4||n===0?rr(t):rr.ceil(t),Pe(t.getUTCFullYear()%1e4,e,4)}function b_(){return"+0000"}function eu(){return"%"}function tu(t){return+t}function nu(t){return Math.floor(+t/1e3)}var ar,ru;__({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function __(t){return ar=_b(t),ru=ar.format,ar.parse,ar.utcFormat,ar.utcParse,ar}function y_(t){return new Date(t)}function x_(t){return t instanceof Date?+t:+new Date(+t)}function au(t,e,n,r,a,i,s,l,u,c){var d=Ic(),f=d.invert,p=d.domain,g=c(".%L"),x=c(":%S"),m=c("%I:%M"),h=c("%I %p"),P=c("%a %d"),T=c("%b %d"),C=c("%B"),w=c("%Y");function j(S){return(u(S)<S?g:l(S)<S?x:s(S)<S?m:i(S)<S?h:r(S)<S?a(S)<S?P:T:n(S)<S?C:w)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?p(Array.from(S,x_)):p().map(y_)},d.ticks=function(S){var M=p();return t(M[0],M[M.length-1],S??10)},d.tickFormat=function(S,M){return M==null?j:c(M)},d.nice=function(S){var M=p();return(!S||typeof S.range!="function")&&(S=e(M[0],M[M.length-1],S??10)),S?p(sb(M,S)):d},d.copy=function(){return $c(d,au(t,e,n,r,a,i,s,l,u,c))},d}function ws(){return Ha.apply(au(gb,bb,on,$r,Ka,Mr,_s,bs,tr,ru).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function v_({task:t,scale:e,onTaskClick:n,onTaskDoubleClick:r,isSelected:a=!1,taskIndex:i,tabIndex:s=-1,onFocus:l,"aria-label":u}){const c=B.useRef(null),[d,f]=B.useState(!1),[p,g]=B.useState(!1),x=e(t.start),m=e(t.end),h=Math.max(m-x,20),P=()=>{if(t.color)return t.color;switch(t.priority){case"high":return"#d5281b";case"medium":return"#005eb8";case"low":return"#007f3b";default:return"#005eb8"}},T=t.progress?h*t.progress/100:0,C=()=>{n?.(t)},w=()=>{r?.(t)},j=N=>{N.key==="Enter"?(N.preventDefault(),C()):N.key===" "&&(N.preventDefault(),w())},S=()=>{f(!0)},M=()=>{f(!1)},_=()=>{g(!0),l?.()},v=()=>{g(!1)},D=["gantt-task-bar",d&&"gantt-task-bar--pressed",(p||a)&&"gantt-task-bar--focused",t.priority&&`gantt-task-bar--priority-${t.priority}`,a&&"gantt-task-bar--selected",t.type&&`gantt-task-bar--type-${t.type}`].filter(Boolean).join(" "),y={"--task-left":`${x}px`,"--task-width":`${h}px`,"--task-color":P(),left:`${x}px`,width:`${h}px`,backgroundColor:P()};return o.jsxs("div",{role:"button",tabIndex:s,ref:c,"data-task-index":i,className:D,style:y,onClick:C,onDoubleClick:w,onKeyDown:j,onMouseDown:S,onMouseUp:M,onFocus:_,onBlur:v,"aria-label":u||`${a?"Selected: ":""}${t.title}: ${t.start.toLocaleDateString()} to ${t.end.toLocaleDateString()}${t.priority?`, priority ${t.priority}`:""}${t.progress?`, ${t.progress}% complete`:""}`,"aria-describedby":`task-${t.id}-details`,children:[o.jsx("span",{className:"task-title",children:t.title}),t.progress!==void 0&&o.jsx("div",{className:"task-progress",style:{width:`${T}px`}}),o.jsx("span",{id:`task-${t.id}-details`,className:"sr-only",children:`Task: ${t.title}, from ${t.start.toLocaleDateString()} to ${t.end.toLocaleDateString()}${t.progress?`, ${t.progress}% complete`:""}${t.priority?`, priority: ${t.priority}`:""}`})]})}function w_({viewStart:t,viewEnd:e,dateCount:n}){const r=[];for(let g=t.getTime();g<=e.getTime();g+=864e5)r.push(new Date(g));const i=new Date;i.setHours(0,0,0,0);const[s,l]=B.useState(-1),u=B.useRef(null),c=g=>{if(g.key==="ArrowLeft"){g.preventDefault();const x=Math.max(0,s===-1?0:s-1);l(x),p(x)}else if(g.key==="ArrowRight"){g.preventDefault();const x=Math.min(r.length-1,s===-1?0:s+1);l(x),p(x)}else if(g.key==="ArrowDown"){g.preventDefault();const x=document.querySelector(".gantt-row .timeline-container");x&&x.focus()}else if(g.key==="Home")g.preventDefault(),l(0),p(0);else if(g.key==="End"){g.preventDefault();const x=r.length-1;l(x),p(x)}},d=g=>{if(g.key==="ArrowDown"){g.preventDefault();const x=document.querySelector(".gantt-row .resource-label");x&&x.focus()}else if(g.key==="ArrowRight"){g.preventDefault();const x=u.current;x&&x.focus()}},f=()=>{s===-1&&(l(0),setTimeout(()=>p(0),0))},p=g=>{const x=u.current?.querySelector(`[data-date-index="${g}"]`);x&&x.focus()};return o.jsxs("div",{className:"gantt-header",role:"row","aria-rowindex":1,children:[o.jsx("div",{className:"header-resource",role:"columnheader","aria-colindex":1,tabIndex:0,"aria-label":"Resource column header",onKeyDown:d,children:"Resources"}),o.jsx("div",{ref:u,className:"header-timeline",role:"columnheader","aria-colindex":2,"aria-colspan":n,"aria-label":`Timeline from ${t.toLocaleDateString()} to ${e.toLocaleDateString()}. Use arrow keys to navigate between dates`,tabIndex:0,onKeyDown:c,onFocus:f,children:r.map((g,x)=>{const m=g.getTime()===i.getTime(),h=s===x;return o.jsx("div",{"data-date-index":x,className:`date-column ${m?"today":""} ${h?"focused":""}`,tabIndex:h?0:-1,role:"button","aria-label":`${g.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}${m?" (Today)":""}`,onFocus:()=>l(x),onKeyDown:c,children:g.toLocaleDateString("en-GB",{day:"numeric",month:"short"})},x)})})]})}function S_({resource:t,tasks:e,scale:n,onTaskClick:r,onTaskDoubleClick:a,rowIndex:i,dateCount:s}){const[l,u]=B.useState(!1),[c,d]=B.useState(-1),f=B.useRef(null);B.useEffect(()=>{l&&c>=0&&e.length>0&&setTimeout(()=>{f.current?.querySelector(`[data-task-index="${c}"]`)?.focus()},0)},[l,c,e.length]);const p=m=>{if(m.key==="ArrowLeft"&&m.shiftKey){m.preventDefault(),m.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(m.key==="ArrowRight"&&m.shiftKey){m.preventDefault(),m.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!l){switch(m.key){case"ArrowUp":m.preventDefault(),i===0?document.querySelector(".header-timeline")?.focus():document.querySelector(`[aria-rowindex="${i+1}"] .timeline-container`)?.focus();break;case"ArrowDown":m.preventDefault(),document.querySelector(`[aria-rowindex="${i+3}"] .timeline-container`)?.focus();break;case"ArrowLeft":m.preventDefault(),f.current?.closest(".gantt-row")?.querySelector(".resource-label")?.focus();break;case"Enter":e.length>0&&(m.preventDefault(),u(!0),d(0));break}return}switch(m.key){case"ArrowLeft":m.preventDefault();const h=Math.max(0,c-1);d(h),f.current?.querySelector(`[data-task-index="${h}"]`)?.focus();break;case"ArrowRight":m.preventDefault();const T=Math.min(e.length-1,c+1);d(T),f.current?.querySelector(`[data-task-index="${T}"]`)?.focus();break;case"Enter":m.preventDefault(),c>=0&&r?.(e[c]);break;case" ":m.preventDefault(),c>=0&&a?.(e[c]);break;case"Escape":m.preventDefault(),u(!1),d(-1),f.current?.focus();break}},g=m=>{switch(m.key){case"ArrowUp":m.preventDefault(),i===0?document.querySelector(".header-resource")?.focus():document.querySelector(`[aria-rowindex="${i+1}"] .resource-label`)?.focus();break;case"ArrowDown":m.preventDefault(),document.querySelector(`[aria-rowindex="${i+3}"] .resource-label`)?.focus();break;case"ArrowRight":m.preventDefault(),f.current?.focus();break}},x=m=>{l&&d(m)};return o.jsxs("div",{className:"gantt-row",role:"row","aria-rowindex":i+2,children:[o.jsx("div",{className:"resource-label",role:"gridcell","aria-colindex":1,tabIndex:0,"aria-label":`Resource: ${t.label}`,onKeyDown:g,children:t.label}),o.jsx("div",{ref:f,className:`timeline-container ${l?"timeline-active":""}`,role:"gridcell","aria-colindex":2,"aria-colspan":s,tabIndex:0,"aria-label":`Timeline for ${t.label} with ${e.length} task${e.length!==1?"s":""}. Press Enter to activate task navigation, then use arrow keys to navigate, Enter to select, Space to activate, Escape to exit`,onKeyDown:p,onFocus:()=>{l||d(-1)},children:e.map((m,h)=>o.jsx(v_,{task:m,scale:n,onTaskClick:r,onTaskDoubleClick:a,isSelected:l&&c===h,taskIndex:h,tabIndex:l&&c===h?0:-1,onFocus:()=>x(h)},m.id))})]})}function k_({resources:t,tasks:e=[],viewStart:n,viewEnd:r,onTaskClick:a,onTaskDoubleClick:i}){const s=B.useRef(null),[l,u]=B.useState(800),c=B.useMemo(()=>{if(n instanceof Date)return isNaN(n.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):n;const m=new Date(n);return isNaN(m.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):m},[n]),d=B.useMemo(()=>{if(r instanceof Date)return isNaN(r.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):r;const m=new Date(r);return isNaN(m.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):m},[r]),f=B.useMemo(()=>Math.ceil((d.getTime()-c.getTime())/864e5)+1,[c,d]);B.useEffect(()=>{if(!s.current)return;const m=new ResizeObserver(h=>{const P=h[0];P&&u(Math.max(P.contentRect.width-220,400))});return m.observe(s.current),()=>m.disconnect()},[]);const p=B.useMemo(()=>ws().domain([c,d]).range([0,l]),[c,d,l]),g=B.useMemo(()=>{const m=new Map;return e.forEach(h=>{const P=m.get(h.resourceId)||[];P.push(h),m.set(h.resourceId,P)}),m},[e]),x=m=>{if(m.target===m.currentTarget)switch(m.key){case"ArrowDown":m.preventDefault();const h=s.current?.querySelector(".gantt-row .resource-label");h&&h.focus();break;case"Home":m.preventDefault();const P=s.current?.querySelector(".header-resource");P&&P.focus();break}};return o.jsxs("div",{className:"gantt-chart",role:"grid","aria-label":"Gantt Chart showing resource scheduling and task timelines","aria-rowcount":t.length+1,"aria-colcount":f+1,"aria-description":"Use arrow keys to navigate cells, Tab to cycle through tasks in timeline rows or dates in header, Enter to select task, Space to activate task, Alt+arrows to scroll the grid, Shift+arrows to scroll timeline rows",tabIndex:0,onKeyDown:x,children:[o.jsx(w_,{viewStart:c,viewEnd:d,dateCount:f}),o.jsx("div",{ref:s,className:"gantt-grid",role:"rowgroup","aria-label":"Gantt chart data rows",tabIndex:0,onKeyDown:m=>{m.key==="ArrowLeft"&&m.altKey?(m.preventDefault(),s.current?.scrollBy({left:-50,behavior:"smooth"})):m.key==="ArrowRight"&&m.altKey?(m.preventDefault(),s.current?.scrollBy({left:50,behavior:"smooth"})):m.key==="ArrowUp"&&m.altKey?(m.preventDefault(),s.current?.scrollBy({top:-50,behavior:"smooth"})):m.key==="ArrowDown"&&m.altKey&&(m.preventDefault(),s.current?.scrollBy({top:50,behavior:"smooth"}))},children:t.map((m,h)=>o.jsx(S_,{resource:m,tasks:g.get(m.id)||[],scale:p,onTaskClick:a,onTaskDoubleClick:i,rowIndex:h,dateCount:f},m.id))})]})}const Qa=({children:t,href:e,active:n=!1,attributes:r={}})=>o.jsx("li",{className:"nhsuk-breadcrumb__item",children:n?o.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",...r,children:t}):o.jsx("a",{className:"nhsuk-breadcrumb__link",href:e,...r,children:t})}),iu=({items:t=[],children:e,classes:n,labelText:r="Breadcrumb",href:a,text:i,reverse:s=!1,attributes:l={}})=>{const u=()=>e?B.Children.toArray(e).filter(h=>B.isValidElement(h)&&(h.type===Qa||h.type?.displayName==="BreadcrumbItem")).map(h=>({text:typeof h.props.children=="string"?h.props.children:String(h.props.children),href:h.props.href,active:h.props.active,attributes:h.props.attributes})):[],c=()=>e?u():a&&i?[{href:a,text:i}]:t,d=()=>{const m=c();if(m&&m.length>0){const h=m.slice().reverse().find(P=>P.href&&!P.active);if(h)return{href:h.href,text:h.text}}return{text:"Home"}},f=c(),p=d(),g=be("nhsuk-breadcrumb",{"nhsuk-breadcrumb--reverse":s},n),x=r;return o.jsxs("nav",{className:g,"aria-label":x,role:"navigation",...l,children:[o.jsx("ol",{className:"nhsuk-breadcrumb__list",role:"list",children:e?B.Children.map(e,(m,h)=>B.isValidElement(m)&&(m.type===Qa||m.type?.displayName==="BreadcrumbItem")?B.cloneElement(m,{key:h}):null):f?.filter(m=>m.active||!!m.href).map((m,h)=>o.jsx("li",{className:"nhsuk-breadcrumb__item",role:"listitem",children:m.active?o.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",role:"text",...m.attributes||{},children:m.text}):o.jsx("a",{className:"nhsuk-breadcrumb__link",href:m.href,role:"link",...m.attributes||{},children:m.text})},h))}),p.href&&o.jsx("p",{className:"nhsuk-breadcrumb__back",children:o.jsxs("a",{className:"nhsuk-breadcrumb__backlink",href:p.href,role:"link","aria-label":`Back to ${p.text}`,...t.length>0?t[t.length-1]?.attributes||{}:{},children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Back to Â "}),p.text]})})]})};iu.Item=Qa,Qa.displayName="BreadcrumbItem";const Ss=({text:t="Skip to main content",href:e="#maincontent",classes:n,attributes:r={}})=>{const[a,i]=B.useState(!1);B.useEffect(()=>{i(!0)},[]),B.useEffect(()=>{if(typeof window>"u"||typeof document>"u"||!document.querySelector||!document.querySelectorAll)return;const l=u=>{const c=u.target,d=c.getAttribute("href");if(d&&d.startsWith("#")){const f=document.querySelector(d);if(f){f.hasAttribute("tabindex")||f.setAttribute("tabindex","-1"),f.focus(),f.classList.add("nhsuk-skip-link-focused-element");const p=window.setTimeout(()=>{f.classList.remove("nhsuk-skip-link-focused-element"),f.getAttribute("tabindex")==="-1"&&f.removeAttribute("tabindex")},3e3);c.__nhsSkipLinkTimeout=p}}};try{const u=document.querySelectorAll(".nhsuk-skip-link");return u.forEach(c=>{c.addEventListener("click",l)}),()=>{try{u.forEach(c=>{c.removeEventListener("click",l);const d=c.__nhsSkipLinkTimeout;d&&window.clearTimeout&&window.clearTimeout(d)})}catch(c){console.warn("SkipLink cleanup error:",c)}}}catch(u){return console.warn("SkipLink initialization error:",u),()=>{}}},[a]);const s=be("nhsuk-skip-link",n);return o.jsx("a",{className:s,href:e,"data-module":"nhsuk-skip-link","data-enhanced":a?"true":"false",...r,children:t})},C_=({previousUrl:t,previousPage:e,nextUrl:n,nextPage:r,classes:a,attributes:i={}})=>{const s=be("nhsuk-pagination",a);return o.jsx("nav",{className:s,role:"navigation","aria-label":"Pagination",...i,children:o.jsxs("ul",{className:"nhsuk-list nhsuk-pagination__list",children:[t&&e&&o.jsx("li",{className:"nhsuk-pagination-item--previous",children:o.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--prev",href:t,children:[o.jsx("span",{className:"nhsuk-pagination__title",children:"Previous"}),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),o.jsx("span",{className:"nhsuk-pagination__page",children:e}),o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{d:"M4.1 12.3l2.7 3c.2.2.5.2.7 0 .1-.1.1-.2.1-.3v-2h11c.6 0 1-.4 1-1s-.4-1-1-1h-11V9c0-.2-.1-.4-.3-.5h-.2c-.1 0-.3.1-.4.2l-2.7 3c0 .2 0 .4.1.6z"})})]})}),n&&r&&o.jsx("li",{className:"nhsuk-pagination-item--next",children:o.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--next",href:n,children:[o.jsx("span",{className:"nhsuk-pagination__title",children:"Next"}),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),o.jsx("span",{className:"nhsuk-pagination__page",children:r}),o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{d:"M19.6 11.66l-2.73-3A.51.51 0 0 0 16 9v2H5a1 1 0 0 0 0 2h11v2a.5.5 0 0 0 .32.46.39.39 0 0 0 .18 0 .52.52 0 0 0 .37-.16l2.73-3a.5.5 0 0 0 0-.64z"})})]})})]})})},T_=({items:t,classes:e,ariaLabel:n="Pages in this guide",attributes:r={}})=>{const a=be("nhsuk-contents-list",e),i=(s,l)=>s.current?o.jsx("li",{className:"nhsuk-contents-list__item","aria-current":"page",...s.attributes||{},children:o.jsx("span",{className:"nhsuk-contents-list__current",children:s.text})},l):o.jsx("li",{className:"nhsuk-contents-list__item",children:o.jsx("a",{className:"nhsuk-contents-list__link",href:s.href,...s.attributes||{},children:s.text})},l);return o.jsxs("nav",{className:a,role:"navigation","aria-label":n,...r,children:[o.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Contents"}),o.jsx("ol",{className:"nhsuk-contents-list__list",children:t.map((s,l)=>i(s,l))})]})},ks=B.forwardRef(({variant:t="default",heading:e,headingHtml:n,headingLevel:r=2,headingClasses:a,description:i,descriptionHtml:s,href:l,imgURL:u,imgAlt:c,...d},f)=>{const p=["nhsuk-card",t==="clickable"&&"nhsuk-card--clickable",t==="secondary"&&"nhsuk-card--secondary",t==="feature"&&"nhsuk-card--feature",d.className].filter(Boolean).join(" "),g=["nhsuk-card__content",t==="feature"&&"nhsuk-card__content--feature",t==="primary"&&"nhsuk-card__content--primary",t==="secondary"&&"nhsuk-card__content--secondary"].filter(Boolean).join(" "),x=["nhsuk-card__heading",t==="feature"&&"nhsuk-card__heading--feature",a].filter(Boolean).join(" "),m=()=>{if(n)return o.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!e)return null;const T=()=>l&&t!=="feature"?o.jsx("a",{className:"nhsuk-card__link",href:l,children:e}):e;return o.jsx(Ft,{level:r,className:x,children:T()})},h=()=>d.children?d.children:s?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):i?o.jsx("p",{className:"nhsuk-card__description",children:i}):null,P=()=>t!=="primary"?null:o.jsxs("svg",{className:"nhsuk-icon",xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27","aria-hidden":"true",focusable:"false",children:[o.jsx("circle",{cx:"13.333",cy:"13.333",r:"13.333",fill:""}),o.jsxs("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2.667",children:[o.jsx("path",{d:"M15.438 13l-3.771 3.771"}),o.jsx("path",{d:"M11.667 9.229L15.438 13"})]})]});return o.jsxs("div",{...d,className:p,ref:f,children:[u&&o.jsx("img",{className:"nhsuk-card__img",src:u,alt:c||""}),o.jsxs("div",{className:g,children:[m(),h(),P()]})]})});ks.displayName="Card";const N_=({className:t,children:e,"data-testid":n,id:r})=>{const a=["nhsuk-card-group",t].filter(Boolean).join(" ");return o.jsx("ul",{className:a,"data-testid":n,id:r,children:e})},j_=({className:t,children:e,"data-testid":n})=>{const r=["nhsuk-card-group__item",t].filter(Boolean).join(" ");return o.jsx("li",{className:r,"data-testid":n,children:e})},D_=({type:t,heading:e,headingHtml:n,headingLevel:r=3,headingClasses:a,description:i,descriptionHtml:s,className:l,children:u,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":p,"aria-describedby":g})=>{const x=["nhsuk-care-card",`nhsuk-care-card--${t}`,l].filter(Boolean).join(" "),m=["nhsuk-care-card__heading",a].filter(Boolean).join(" "),h=()=>{if(n)return o.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!e)return null;const T={"non-urgent":"Non-urgent advice:",urgent:"Urgent advice:",emergency:"Immediate action required:"}[t],C=o.jsxs("span",{role:"text",children:[o.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[T," "]}),e]});return o.jsx(Ft,{level:r,className:m,children:C})},P=()=>u||(s?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):i?o.jsx("p",{className:"nhsuk-care-card__text",children:i}):null);return o.jsxs("div",{className:x,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":p,"aria-describedby":g,children:[o.jsxs("div",{className:"nhsuk-care-card__heading-container",children:[h(),o.jsx("span",{className:"nhsuk-care-card__arrow","aria-hidden":"true"})]}),o.jsx("div",{className:"nhsuk-care-card__content",children:P()})]})},su=({id:t,className:e,headingText:n,headingHtml:r,headingLevel:a=2,bodyText:i,bodyHtml:s,children:l,...u})=>{const c=be("nhsuk-panel",e),d=()=>!n&&!r&&!l?null:r?o.jsx(Ft,{level:a,className:"nhsuk-panel__heading",html:r,marginBottom:"var(--panel-heading-margin, 24px)"}):n?o.jsx(Ft,{level:a,className:"nhsuk-panel__heading",text:n,marginBottom:"var(--panel-heading-margin, 24px)"}):null,f=()=>l?o.jsx("div",{className:"nhsuk-panel__body",children:l}):s?o.jsx("div",{className:"nhsuk-panel__body",dangerouslySetInnerHTML:{__html:s}}):i?o.jsx("div",{className:"nhsuk-panel__body",children:o.jsx("p",{children:i})}):null;return o.jsxs("div",{className:c,id:t,...u,children:[d(),f()]})},M_=({text:t,html:e,children:n,className:r,...a})=>{const i=be("nhsuk-inset-text",r),s=()=>n||(e?o.jsx("div",{dangerouslySetInnerHTML:{__html:e}}):t?o.jsx("p",{children:t}):null);return o.jsx("div",{className:i,...a,children:s()})},$_=({items:t,noBorder:e=!1,className:n,...r})=>{const a=be("nhsuk-summary-list",{"nhsuk-summary-list--no-border":e},n),i=l=>l.children?l.children:l.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text?l.text:null,s=l=>!l||!l.items.length?null:o.jsx("dd",{className:"nhsuk-summary-list__actions",children:o.jsx("ul",{className:"nhsuk-summary-list__actions-list",children:l.items.map((u,c)=>o.jsx("li",{className:"nhsuk-summary-list__actions-list-item",children:o.jsxs("a",{href:u.href,className:"nhsuk-link",...u.attributes,children:[i(u),u.visuallyHiddenText&&o.jsx("span",{className:"nhsuk-u-visually-hidden",children:u.visuallyHiddenText})]})},c))})});return o.jsx("div",{className:"nhsuk-summary-list-container",children:o.jsx("dl",{className:a,...r,children:t.map((l,u)=>o.jsxs("div",{className:"nhsuk-summary-list__row",children:[o.jsx("dt",{className:"nhsuk-summary-list__key",children:i(l.key)}),o.jsx("dd",{className:"nhsuk-summary-list__value",children:i(l.value)}),s(l.actions)]},u))})})},ei=({rows:t,head:e,caption:n,captionSize:r,firstCellIsHeader:a=!1,responsive:i=!1,heading:s,headingLevel:l=3,panel:u=!1,panelClasses:c,tableClasses:d,classes:f,attributes:p,"data-testid":g})=>{const x=`nhsuk-table__caption ${r?`nhsuk-table__caption--${r}`:""}`.trim(),m=be("nhsuk-table",{"nhsuk-table-responsive":i},d),h=be(f),P=B.useRef(null),T=()=>{if(P.current)return P.current;try{P.current=require("prismjs");try{require("prismjs/components/prism-typescript")}catch{}try{require("prismjs/components/prism-tsx")}catch{}try{require("prismjs/components/prism-json")}catch{}}catch{P.current=null}return P.current},C=_=>{const v=[{regex:/\b(import|from|export|const|let|var|return|if|else|for|while|switch|case|break|new|throw|try|catch|finally|class|extends|implements|interface|type|as|async|await|function)\b/g,cls:"kw"},{regex:/(['"`])(?:\\.|(?!\1).)*\1/g,cls:"str"},{regex:/\/\*[^]*?\*\/|\/\/.*$/gm,cls:"com"},{regex:/\b([0-9]+(?:\.[0-9]+)?)\b/g,cls:"num"}];let D=_;return v.forEach(y=>{D=D.replace(y.regex,N=>`<span class="nhsuk-code-${y.cls}">${N}</span>`)}),D},w=(_,v,D)=>{if(D||!v)return _;const y=T();if(y&&y.languages){const N=y.languages[v]?v:y.languages.typescript&&(v==="ts"||v==="tsx"||v==="typescript")?"typescript":y.languages.json&&v==="json"?"json":void 0;if(N)try{return y.highlight(_,y.languages[N],N)}catch{}}return C(_)},j=(_,v)=>{const D=be("nhsuk-table__header",{[`nhsuk-table__header--${_.format}`]:_.format},_.classes),y={scope:"col",..._.colspan&&{colSpan:_.colspan},..._.rowspan&&{rowSpan:_.rowspan},...i&&{role:"columnheader"},..._.attributes};let N;if(_.node!=null)N=o.jsx(o.Fragment,{children:_.node});else if(_.html)N=o.jsx("span",{dangerouslySetInnerHTML:{__html:_.html}});else if(_.code!=null){const A=Array.isArray(_.code),F=A?_.code.join(`
`):_.code,L=A||F.includes(`
`),k={className:be("nhsuk-table__code",_.codeClassName,{"nhsuk-table__code--block":L,"nhsuk-table__code--inline":!L}),..._.codeLanguage?{"data-language":_.codeLanguage}:{}},H=w(F,_.codeLanguage);N=L?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...k,dangerouslySetInnerHTML:{__html:H}})}):o.jsx("code",{...k,dangerouslySetInnerHTML:{__html:H}})}else N=_.text;return o.jsx("th",{className:D,...y,children:N},v)},S=(_,v,D)=>{const y=a&&D,N=be(y?"nhsuk-table__header":"nhsuk-table__cell",{[`nhsuk-table__${y?"header":"cell"}--${_.format}`]:_.format},_.classes),A={...y&&{scope:"row"},..._.colspan&&{colSpan:_.colspan},..._.rowspan&&{rowSpan:_.rowspan},...i&&{role:y?"rowheader":"cell",..._.header&&{"data-label":_.header}},..._.attributes};let F;if(_.node!=null)F=o.jsx(o.Fragment,{children:_.node});else if(_.html)F=o.jsx("span",{dangerouslySetInnerHTML:{__html:_.html}});else if(_.code!=null){const H=Array.isArray(_.code),Q=H?_.code.join(`
`):_.code,O=H||Q.includes(`
`),z={className:be("nhsuk-table__code",_.codeClassName,{"nhsuk-table__code--block":O,"nhsuk-table__code--inline":!O}),..._.codeLanguage?{"data-language":_.codeLanguage}:{}},$=w(Q,_.codeLanguage,_.disableHighlight);F=O?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...z,dangerouslySetInnerHTML:{__html:$}})}):o.jsx("code",{...z,dangerouslySetInnerHTML:{__html:$}})}else F=_.text;const L=o.jsxs(o.Fragment,{children:[i&&_.header&&o.jsxs("span",{className:"nhsuk-table-responsive__heading","aria-hidden":"true",children:[_.header," "]}),F]}),k=y?"th":"td";return o.jsx(k,{className:N,...A,children:L},v)},M=()=>o.jsxs("table",{className:m,...i&&{role:"table"},...p,...g&&{"data-testid":g},children:[n&&o.jsx("caption",{className:x,children:n}),e&&e.length>0&&o.jsx("thead",{className:"nhsuk-table__head",...i&&{role:"rowgroup"},children:o.jsx("tr",{...i&&{role:"row"},children:e.map((_,v)=>j(_,v))})}),o.jsx("tbody",{className:"nhsuk-table__body",children:t&&t.map((_,v)=>o.jsx("tr",{className:"nhsuk-table__row",...i&&{role:"row"},children:_.map((D,y)=>S(D,y,y===0))},v))})]});return u?o.jsxs(su,{className:c,children:[s&&o.jsx(Ft,{level:l,className:"nhsuk-table__heading-tab",children:s}),M()]}):h?o.jsx("div",{className:h,children:M()}):M()},I_=B.forwardRef(({items:t,defaultActiveTab:e,activeTab:n,onTabChange:r,onTabFocus:a,onTabListBlur:i,onEscape:s,autoActivate:l=!0,className:u,id:c,"data-testid":d,...f},p)=>{const g=n!==void 0,[x,m]=B.useState(()=>e||t[0]?.id||""),h=g?n:x,P=B.useRef(null),T=B.useRef(new Map),C=B.useCallback(D=>{g||m(D),r?.(D)},[g,r]),w=B.useCallback(D=>{a?.(D),l&&C(D)},[a,l,C]),j=B.useCallback((D,y)=>{const N=t.filter(L=>!L.disabled).map(L=>L.id),A=N.indexOf(y);let F=null;switch(D.key){case"ArrowLeft":F=A>0?A-1:N.length-1;break;case"ArrowRight":F=A<N.length-1?A+1:0;break;case"Home":F=0;break;case"End":F=N.length-1;break;case"Escape":D.preventDefault(),s?.();return;default:return}if(F!==null){D.preventDefault();const L=N[F],k=T.current.get(L);k&&(k.focus(),w(L))}},[t,w,s]),S=B.useCallback((D,y)=>{y?T.current.set(D,y):T.current.delete(D)},[]),M=B.useCallback(D=>{const y=T.current.get(D);y&&y.focus()},[]);B.useImperativeHandle(p,()=>({focusTab:M,getActiveTab:()=>h,getTabListElement:()=>P.current}),[M,h]);const _=B.useCallback(D=>{const y=D.relatedTarget;P.current?.contains(y)||i?.()},[i]),v=be("nhsuk-tabs",u);return o.jsxs("div",{className:v,id:c,"data-testid":d,...f,children:[o.jsx("h2",{className:"nhsuk-tabs__title",children:"Contents"}),o.jsx("div",{className:"nhsuk-tabs__list-container",ref:P,children:o.jsx("ul",{className:"nhsuk-tabs__list",role:"tablist",onBlur:_,children:t.map(D=>{const y=D.id===h,N=D.disabled,A=be("nhsuk-tabs__list-item",{"nhsuk-tabs__list-item--selected":y,"nhsuk-tabs__list-item--disabled":N});return o.jsx("li",{className:A,role:"presentation",children:o.jsx("button",{ref:F=>S(D.id,F),className:"nhsuk-tabs__tab",role:"tab","aria-selected":y,"aria-controls":`${D.id}-panel`,id:`${D.id}-tab`,tabIndex:y?0:-1,disabled:N,onClick:()=>!N&&C(D.id),onKeyDown:F=>!N&&j(F,D.id),onFocus:()=>!N&&w(D.id),...D.attributes,children:D.label})},D.id)})})}),t.map(D=>{const y=D.id===h;return o.jsx("div",{className:"nhsuk-tabs__panel",role:"tabpanel","aria-labelledby":`${D.id}-tab`,id:`${D.id}-panel`,hidden:!y,children:D.content},D.id)})]})}),ou=B.forwardRef(({summaryText:t,summaryHtml:e,text:n,html:r,open:a=!1,className:i="",id:s,children:l,...u},c)=>{const d=["nhsuk-details",i].filter(Boolean).join(" "),f=e?o.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:e}}):o.jsx("span",{className:"nhsuk-details__summary-text",children:t});let p;return l?p=l:r?p=o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),o.jsxs("details",{ref:c,id:s,className:d,open:a,...u,children:[o.jsx("summary",{className:"nhsuk-details__summary",tabIndex:0,children:f}),o.jsx("div",{className:"nhsuk-details__text",children:p})]})});ou.displayName="Details";const lu=B.forwardRef(({title:t,type:e,items:n,hidePrefix:r=!1,headingLevel:a=3,className:i,...s},l)=>{const u=["nhsuk-do-dont-list"];i&&u.push(i);const c=["nhsuk-list",e==="tick"?"nhsuk-list--tick":"nhsuk-list--cross"],d=()=>e==="cross"?o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:[o.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),o.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]}):o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})}),f=g=>e==="cross"&&!r?`do not ${g}`:g,p=()=>o.jsx(Ft,{level:a,className:"nhsuk-do-dont-list__label",text:t});return o.jsxs("div",{ref:l,className:u.join(" "),...s,children:[p(),o.jsx("div",{className:"nhsuk-do-dont-list__content--feature",children:o.jsx("ul",{className:c.join(" "),role:"list",children:n.map((g,x)=>o.jsxs("li",{children:[d(),f(g.item)]},x))})})]})});lu.displayName="DoDontList";const cu=B.forwardRef(({summaryText:t,summaryHtml:e,text:n,html:r,open:a=!1,className:i="",id:s,children:l,...u},c)=>{const d=["nhsuk-expander",i].filter(Boolean).join(" "),f=e?o.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:e}}):o.jsx("span",{className:"nhsuk-details__summary-text",children:t});let p;return l?p=l:r?p=o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),o.jsxs("details",{ref:c,id:s,className:d,open:a,...u,children:[o.jsx("summary",{className:"nhsuk-details__summary",children:f}),o.jsx("div",{className:"nhsuk-details__text",children:p})]})});cu.displayName="Expander";const uu=B.forwardRef(({items:t,idPrefix:e="task-list",className:n,...r},a)=>{const i=["nhsuk-task-list",n].filter(Boolean).join(" "),s=(l,u)=>{const c=u+1,d=`${e}-${c}-hint`,f=`${e}-${c}-status`,p=!!l.href,g=["nhsuk-task-list__item",p&&"nhsuk-task-list__item--with-link",l.classes].filter(Boolean).join(" "),x=[l.hint&&d,f].filter(Boolean).join(" ");return o.jsx(P_,{item:l,itemClasses:g,hasLink:p,hintId:d,statusId:f,ariaDescribedBy:x},u)};return o.jsx("ul",{ref:a,className:i,...r,children:t.map(s)})}),P_=({item:t,itemClasses:e,hasLink:n,hintId:r,statusId:a,ariaDescribedBy:i})=>{const s=()=>{const c=t.title.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:t.title.html}}):t.title.text,d=[n?"nhsuk-task-list__link":"",t.title.classes].filter(Boolean).join(" ");return n?o.jsx("a",{className:d,href:t.href,"aria-describedby":i,children:c}):o.jsx("div",{className:t.title.classes||"",children:c})},l=()=>t.hint?t.hint.html?o.jsx("div",{id:r,className:"nhsuk-task-list__hint",dangerouslySetInnerHTML:{__html:t.hint.html}}):o.jsx("div",{id:r,className:"nhsuk-task-list__hint",children:t.hint.text}):null,u=()=>{const c=["nhsuk-task-list__status",t.status.classes].filter(Boolean).join(" ");let d;return t.status.tag?d=o.jsx(Ye,{...t.status.tag}):t.status.html?d=o.jsx("span",{dangerouslySetInnerHTML:{__html:t.status.html}}):d=t.status.text,o.jsx("div",{className:c,id:a,children:d})};return o.jsxs("li",{className:e,children:[o.jsxs("div",{className:"nhsuk-task-list__name-and-hint",children:[s(),l()]}),u()]})};uu.displayName="TaskList";const L_=({heading:t,headingLevel:e=3,text:n,html:r,children:a,className:i,...s})=>{const l=/important/i.test(t),u=()=>a||(r?o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n?o.jsx("p",{children:n}):null),c=["nhsuk-warning-callout",i].filter(Boolean).join(" "),d=`h${e}`;return o.jsxs("div",{className:c,...s,children:[B.createElement(d,{className:"nhsuk-warning-callout__label"},l?o.jsxs(o.Fragment,{children:[t,o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"})]}):o.jsxs("span",{role:"text",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Important: "}),t]})),u()]})},F_=({src:t,alt:e,caption:n,sizes:r,srcset:a,className:i,...s})=>{const l=["nhsuk-image",i].filter(Boolean).join(" ");return o.jsxs("figure",{className:l,...s,children:[o.jsx("img",{className:"nhsuk-image__img",src:t,alt:e,...r&&a?{sizes:r,srcSet:a}:{}}),n&&o.jsx("figcaption",{className:"nhsuk-image__caption",dangerouslySetInnerHTML:{__html:n}})]})},B_=({dateRange:t,onPrev:e,onNext:n,onToday:r,density:a,onDensityChange:i,a11yMode:s,onA11yModeChange:l})=>o.jsxs("div",{className:"nhs-slot-matrix__toolbar",role:"group","aria-label":"Slot matrix controls",children:[o.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[o.jsx(nt,{variant:"secondary",size:"small",onClick:e,"aria-label":"Previous date range",children:"Prev"}),o.jsx(nt,{variant:"secondary",size:"small",onClick:r,"aria-label":"Jump to today",children:"Today"}),o.jsx(nt,{variant:"secondary",size:"small",onClick:n,"aria-label":"Next date range",children:"Next"}),o.jsxs("span",{className:"nhs-slot-matrix__toolbar-daterange","aria-live":"polite",children:[t.start.toDateString()," â€“ ",t.end.toDateString()]})]}),o.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[o.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-density-select",children:"Density"}),o.jsx(Cr,{id:"slot-matrix-density-select",name:"slot-matrix-density",ariaLabel:"Change density",value:a,onChange:u=>i?.(u.target.value),options:[{value:"comfortable",text:"Comfortable"},{value:"compact",text:"Compact"}]}),o.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-mode-select",children:"Mode"}),o.jsx(Cr,{id:"slot-matrix-mode-select",name:"slot-matrix-mode",ariaLabel:"Change accessibility mode",value:s,onChange:u=>l?.(u.target.value),options:[{value:"grid",text:"Grid"},{value:"list",text:"List"}]})]})]}),A_=({items:t,orientation:e="horizontal"})=>o.jsx("div",{className:`nhs-slot-matrix__legend nhs-slot-matrix__legend--${e}`,role:"list","aria-label":"Slot legend",children:t.map(n=>o.jsx("div",{role:"listitem",className:"nhs-slot-matrix__legend-item",children:o.jsx(Ye,{color:E_(n.status),text:n.label})},n.status))});function E_(t){switch(t){case"available":return"green";case"full":return"grey";case"overbook":return"orange";case"held":return"yellow";case"blocked":return"grey";default:return"default"}}const H_=({slots:t,sessions:e,value:n,defaultValue:r,onChange:a,selectionMode:i="single",a11yMode:s,className:l,style:u,getSlotAriaLabel:c,toolbar:d,enableDefaultToolbar:f=!0,legendItems:p,enableDefaultLegend:g=!0,legendPlacement:x="bottom",onA11yModeChange:m})=>{const[h,P]=B.useState("grid"),T=s||h,[C,w]=B.useState(r||[]),j=n??C,S=B.useMemo(()=>{const F=new Set;return t.forEach(L=>F.add(new Date(L.start).getTime())),Array.from(F).sort((L,k)=>L-k)},[t]),M=B.useMemo(()=>{const F={};return t.forEach(L=>{const k=new Date(L.start).getTime();F[k]||(F[k]={});const H=L.capacity-L.booked-(L.held||0);F[k][L.sessionId]={slot:L,remaining:H}}),F},[t]),_=B.useCallback(F=>{if(i==="single"){const L=[F.id];n||w(L),a?.(L,{lastAction:"select"})}else{const L=j.includes(F.id),k=L?j.filter(H=>H!==F.id):[...j,F.id];n||w(k),a?.(k,{lastAction:L?"deselect":"select"})}},[i,j,n,a]),v=B.useMemo(()=>p||(g?Array.from(new Set(t.map(L=>L.status))).map(L=>({status:L,label:L.charAt(0).toUpperCase()+L.slice(1)})):void 0),[p,g,t]),D=v?o.jsx(A_,{items:v,orientation:x==="left"||x==="right"?"vertical":"horizontal"}):null,y=F=>{s||P(F),m?.(F)},N=d||(f?o.jsx(B_,{dateRange:{start:new Date,end:new Date},density:"comfortable",a11yMode:T,onA11yModeChange:y}):null),A=o.jsx("div",{style:u,className:be(l),children:o.jsx(Fa,{className:be("nhs-slot-matrix-grid-wrapper"),children:o.jsx(pn,{children:o.jsx(Zn,{width:"full",children:o.jsxs("div",{className:"nhs-slot-matrix",children:[N,x==="top"&&D,o.jsx("ul",{"aria-label":"Appointment slots list",children:t.map(F=>o.jsx("li",{children:o.jsxs("button",{type:"button",onClick:()=>_(F),"aria-pressed":j.includes(F.id),children:[Fr(new Date(F.start))," â€“ ",Fr(new Date(F.end))," (",F.status,")"]})},F.id))}),x==="bottom"&&D]})})})})});return T==="list"?A:o.jsx("div",{style:u,className:be(l),children:o.jsx(Fa,{className:be("nhs-slot-matrix-grid-wrapper"),children:o.jsx(pn,{children:o.jsx(Zn,{width:"full",children:o.jsxs("div",{className:"nhs-slot-matrix",children:[N,x==="top"&&D,o.jsxs("div",{role:"grid","aria-rowcount":S.length+1,"aria-colcount":e.length+1,children:[o.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[o.jsx("div",{role:"columnheader","aria-label":"Timebands",className:"nhs-slot-matrix__timeband-header"}),e.map(F=>o.jsx("div",{role:"columnheader","aria-label":`Session ${F.specialty}`,className:"nhs-slot-matrix__session-header",children:F.specialty},F.id))]}),S.map(F=>o.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[o.jsx("div",{role:"rowheader",className:"nhs-slot-matrix__timeband-header","aria-label":Fr(new Date(F)),children:Fr(new Date(F))}),e.map(L=>{const k=M[F]?.[L.id];if(!k)return o.jsx("div",{role:"gridcell",className:"nhs-slot-matrix__cell","aria-disabled":"true"},L.id);const{slot:H,remaining:Q}=k,O=j.includes(H.id),z=c?c(H):`Slot ${Fr(new Date(H.start))} ${H.status}${Q===0?" full":""}`;return o.jsx("button",{type:"button",role:"gridcell","data-status":H.status,className:be("nhs-slot-matrix__cell",O&&"nhs-slot-matrix__cell--selected"),"aria-label":z,"aria-selected":O||void 0,onClick:()=>_(H),children:Q>0?`${Q} left`:"Full"},H.id)})]},F))]}),x==="bottom"&&D]})})})})})};function du(t){return t<10?`0${t}`:`${t}`}function Fr(t){return`${du(t.getHours())}:${du(t.getMinutes())}`}const fu=({title:t,value:e,subtitle:n,variant:r="default",href:a,className:i="",ariaLabel:s,...l})=>{const u=["nhs-fdp-summary-card",`nhs-fdp-summary-card--${r}`,i].filter(Boolean).join(" "),c=o.jsxs(o.Fragment,{children:[o.jsx(Ft,{level:3,className:"nhs-fdp-summary-card__title",children:t}),o.jsx("p",{className:"nhs-fdp-summary-card__value",children:e}),n&&o.jsx("p",{className:"nhs-fdp-summary-card__subtitle",children:n})]});return a?o.jsx("a",{className:`${u} nhs-fdp-summary-card--clickable`,href:a,"aria-label":s||`${t}: ${e}`,...l,children:c}):o.jsx("div",{className:u,"aria-label":s,...l,children:c})},R_=({cards:t,className:e="",...n})=>{const r=["nhs-fdp-dashboard-summary-grid",e].filter(Boolean).join(" ");return o.jsx("div",{className:r,...n,children:o.jsx(Fa,{children:o.jsx(pn,{children:t.map((a,i)=>o.jsx(Zn,{width:"one-quarter",className:"nhs-fdp-dashboard-summary-grid__column","data-card-index":i,children:o.jsx(fu,{...a})},i))})})})},hu=B.forwardRef(({data:t,columns:e,sortConfig:n,onSort:r,selectedRowIndex:a,onRowSelect:i,id:s,testId:l,ariaLabel:u,ariaLabelledby:c,ariaDescribedby:d,className:f,tableClassName:p,bordered:g=!1,striped:x=!1,responsive:m=!1,tableType:h="default"},P)=>{const T=B.useRef(null),C=B.useRef(null),w=B.useRef(null);B.useImperativeHandle(P,()=>T.current,[]);const[j,S]=B.useState(0),[M,_]=B.useState(0),[v,D]=B.useState("headers"),[y,N]=B.useState("browse"),A=e.length,F=t.length,L=B.useMemo(()=>!n||n.length===0?t:[...t].sort((I,U)=>{for(const{key:R,direction:K}of n){const ne=I[R],ce=U[R];if(ne==null&&ce==null)continue;if(ne==null)return 1;if(ce==null)return-1;let re=0;if(typeof ne=="number"&&typeof ce=="number"?re=ne-ce:re=String(ne).localeCompare(String(ce)),re!==0)return K==="asc"?re:-re}return 0}),[t,n]),k=B.useCallback((I,U)=>{setTimeout(()=>{const R=T.current?.querySelector(`tbody tr:nth-child(${I+1}) td:nth-child(${U+1})`);R&&(R.focus(),typeof R.scrollIntoView=="function"&&R.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),H=B.useCallback(I=>{setTimeout(()=>{const U=T.current?.querySelector(`th:nth-child(${I+1})`);U&&(U.focus(),typeof U.scrollIntoView=="function"&&U.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),Q=B.useCallback(I=>{r?.(I)},[r]),O=B.useCallback(I=>{i?.(I)},[i]),z=B.useCallback(I=>{const{key:U}=I;switch(U){case"Enter":if(I.preventDefault(),v==="headers"&&y==="browse")N("navigate"),H(M);else if(v==="headers"&&y==="navigate"){const R=e[M];R&&Q(R.key)}else v==="cells"&&y==="browse"?(N("navigate"),k(j,M)):v==="cells"&&y==="navigate"&&O(j);break;case"Escape":I.preventDefault(),(v==="headers"&&y==="navigate"||v==="cells"&&y==="navigate")&&N("browse");break;case"ArrowLeft":if(I.preventDefault(),y==="navigate"||y==="browse"&&v==="headers"){if(v==="headers"){const R=Math.max(0,M-1);_(R),H(R)}else if(v==="cells"){const R=Math.max(0,M-1);_(R),k(j,R)}}break;case"ArrowRight":if(I.preventDefault(),y==="navigate"||y==="browse"&&v==="headers"){if(v==="headers"){const R=Math.min(A-1,M+1);_(R),H(R)}else if(v==="cells"){const R=Math.min(A-1,M+1);_(R),k(j,R)}}break;case"ArrowUp":if(I.preventDefault(),v==="cells"){if(y==="browse"){const R=Math.max(0,j-1);S(R),k(R,0),_(0)}else if(y==="navigate")if(j>0){const R=j-1;S(R),k(R,M)}else D("headers"),N("browse"),H(M)}break;case"ArrowDown":if(I.preventDefault(),v==="headers"&&y==="browse")D("cells"),S(0),_(0),k(0,0);else if(v==="cells"){const R=F-1;if(y==="browse"){const K=Math.min(R,j+1);S(K),k(K,0),_(0)}else if(y==="navigate"&&j<R){const K=j+1;S(K),k(K,M)}}break;case"Home":I.preventDefault(),v==="headers"?(_(0),H(0)):v==="cells"&&(I.ctrlKey?(S(0),_(0),k(0,0)):(_(0),k(j,0)));break;case"End":if(I.preventDefault(),v==="headers"){const R=A-1;_(R),H(R)}else if(v==="cells")if(I.ctrlKey){const R=F-1,K=A-1;S(R),_(K),k(R,K)}else{const R=A-1;_(R),k(j,R)}break;case" ":if(I.preventDefault(),v==="headers"&&y==="navigate"){const R=e[M];R&&Q(R.key)}else v==="cells"&&y==="navigate"&&O(j);break}},[v,y,M,j,A,F,e,k,H,Q,O]);B.useEffect(()=>{const I=T.current;if(I)return I.addEventListener("keydown",z),()=>I.removeEventListener("keydown",z)},[z]);const $=be("nhsuk-table",p,{"nhsuk-table--responsive":m,"nhsuk-table--bordered":g,"nhsuk-table--striped":x,"nhsuk-table--compact":h==="compact"},f);return o.jsxs("table",{ref:T,className:$,id:s,"data-testid":l,role:"grid","aria-label":u,"aria-labelledby":c,"aria-describedby":d,tabIndex:0,children:[o.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:o.jsx("tr",{ref:C,role:"row",children:e.map((I,U)=>{const R=n?.find(ce=>ce.key===I.key),K=!!R,ne=v==="headers"&&M===U;return o.jsx("th",{className:be("sortable-header",{"sortable-header--focused":ne}),role:"columnheader",tabIndex:ne?0:-1,onClick:()=>Q(I.key),onKeyDown:ce=>{(ce.key==="Enter"||ce.key===" ")&&(ce.preventDefault(),Q(I.key))},"aria-sort":K?R?.direction==="asc"?"ascending":"descending":"none",children:o.jsxs("div",{className:"header-content",children:[o.jsx("span",{className:"header-label",children:I.label}),K&&o.jsxs("span",{className:"sort-indicator","aria-hidden":"true",children:[n&&n.length>1&&o.jsx("span",{className:"sort-priority",children:n.findIndex(ce=>ce.key===I.key)+1}),o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",className:"sort-arrow",children:R?.direction==="asc"?o.jsx("path",{d:"M6 2L2 8h8L6 2z"}):o.jsx("path",{d:"M6 10L2 4h8L6 10z"})})]})]})},I.key)})})}),o.jsx("tbody",{ref:w,className:"nhsuk-table__body",role:"rowgroup",children:L.map((I,U)=>{const R=a===U,K=v==="cells"&&j===U;return o.jsx("tr",{role:"row",className:be("data-row",{"data-row--selected":R,"data-row--focused":K}),"aria-selected":R,children:e.map((ne,ce)=>{const re=ne.tableRenderer?ne.tableRenderer(I):ne.render?ne.render(I):I[ne.key],Y=v==="cells"&&j===U&&M===ce,q=()=>typeof re=="boolean"?o.jsxs(o.Fragment,{children:[o.jsx("span",{"aria-hidden":"true",children:re?"âœ“":"âœ—"}),o.jsx("span",{className:"sr-only",children:re?"Yes":"No"})]}):String(re??"");return o.jsx("td",{role:"gridcell",className:be("data-cell",{"data-cell--focused":Y}),tabIndex:Y?0:-1,onClick:()=>O(U),children:q()},ne.key)})},U)})})]})});hu.displayName="AriaDataGrid";const mu=({sortConfig:t,columns:e,onSortChange:n,className:r="",emptyDescription:a="No sorting applied",activeDescription:i,showReset:s=!0,showHelp:l=!0,disabled:u=!1,ariaLabel:c="Sort configuration",ariaDescribedBy:d})=>{const f=B.useRef(null),p=B.useRef(null),g=B.useRef(null),x=B.useCallback((v,D)=>{u||(p.current=D,v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/plain",D))},[u]),m=B.useCallback((v,D)=>{u||p.current===D||(v.preventDefault(),v.dataTransfer.dropEffect="move",g.current=D)},[u]),h=B.useCallback((v,D)=>{if(u)return;v.preventDefault();const y=p.current;if(!y||y===D)return;const N=t.findIndex(F=>F.key===y),A=t.findIndex(F=>F.key===D);if(N!==-1&&A!==-1){const F=[...t],[L]=F.splice(N,1);F.splice(A,0,L),n(F)}p.current=null,g.current=null},[u,t,n]),P=B.useCallback(()=>{p.current=null,g.current=null},[]),T=B.useCallback(v=>{const D=e.find(y=>y.key===v);return D?D.label:v},[e]),C=B.useCallback(v=>["red","orange","blue","aqua-green","grey"][v]||"grey",[]),w=B.useCallback(v=>{if(u)return;const D=t.map(y=>y.key===v?{...y,direction:y.direction==="asc"?"desc":"asc"}:y);n(D)},[t,n,u]),j=B.useCallback(v=>{if(u)return;const D=t.filter(y=>y.key!==v);n(D)},[t,n,u]),S=B.useCallback(()=>{u||n([])},[n,u]),M=()=>{if(t.length===0)return a;if(i)return i;const v=t.map((D,y)=>{const N=D.direction==="asc"?"ascending":"descending";return`${y+1}. ${T(D.key)} (${N})`});if(v.length===1)return`Sorted by: ${v[0]}`;if(v.length===2)return`Sorted by: ${v.join(" and ")}`;{const D=v.pop();return`Sorted by: ${v.join(", ")}, and ${D}`}},_=B.useMemo(()=>{const v=["sort-description"];return l&&v.push("sort-help"),d&&v.push(d),v.join(" ")},[l,d]);return t.length===0?o.jsxs("div",{className:`sort-status-control ${r}`,children:[o.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:a}),l&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]}):o.jsxs("div",{className:`sort-status-control ${r}`,children:[o.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:M()}),o.jsxs("div",{className:"sort-status-container",children:[o.jsx("div",{ref:f,className:"sort-status-control__tags",role:"list","aria-label":c,"aria-describedby":_,children:t.map((v,D)=>o.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",draggable:!u,onDragStart:y=>x(y,v.key),onDragOver:y=>m(y,v.key),onDrop:y=>h(y,v.key),onDragEnd:P,onClick:()=>w(v.key),style:{cursor:u?"default":"pointer"},title:u?"":`Click to toggle sort direction. Currently ${v.direction==="asc"?"ascending":"descending"}`,"data-key":v.key,children:o.jsx(Ye,{color:C(D),className:"sort-status-control__tag",closable:!0,onClose:()=>j(v.key),disabled:u,children:o.jsxs("div",{className:"sort-status-control__tag-content",children:[o.jsx("div",{className:"sort-status-control__drag-handle",title:"Drag to reorder",children:"â‹®â‹®"}),o.jsx("div",{className:`sort-status-control__priority-badge sort-priority sort-priority--priority-${D+1}`,children:D+1}),o.jsx("span",{className:"sort-status-control__tag-label",children:T(v.key)}),o.jsx("button",{type:"button",className:"sort-status-control__direction-button",onClick:y=>{y.stopPropagation(),w(v.key)},disabled:u,"aria-label":`Toggle sort direction for ${T(v.key)}. Currently ${v.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:o.jsx("span",{className:`sort-status-control__direction-icon sort-status-control__direction-icon--${v.direction}`,children:o.jsx("svg",{className:`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${v.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})})})]})})},v.key))}),s&&o.jsx("div",{className:"sort-status-control__actions",children:o.jsx(nt,{variant:"secondary",onClick:S,disabled:u,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})})]}),l&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]})};function z_(t,e){switch(e.type){case"SET_SELECTED_INDEX":return{...t,selectedIndex:e.payload};case"SET_TAB_LOADING":const n=[...t.tabLoadingStates];return n[e.payload.tabIndex]=e.payload.isLoading,{...t,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...t.tabErrors];return r[e.payload.tabIndex]=e.payload.error,{...t,tabErrors:r};case"SET_SORT":return{...t,sortConfig:e.payload};case"SET_SELECTED_ROWS":const a=[...t.selectedRows];return a[e.payload.tabIndex]=e.payload.rowIndices,{...t,selectedRows:a};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...t,globalSelectedRowData:e.payload};case"SET_FILTERS":return{...t,filters:e.payload};case"ADJUST_ARRAYS":const{newLength:i}=e.payload,s=new Array(i).fill(!1),l=new Array(i).fill(null),u=new Array(i).fill([]);for(let c=0;c<Math.min(t.tabLoadingStates.length,i);c++)s[c]=t.tabLoadingStates[c],l[c]=t.tabErrors[c],u[c]=t.selectedRows[c];return{...t,tabLoadingStates:s,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(t.tabLoadingStates.length).fill(!1),tabErrors:new Array(t.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(t.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return t}}const ti=B.forwardRef(function(e,n){const{dataConfig:r={},tabPanels:a,selectedIndex:i,onTabChange:s,onGlobalRowSelectionChange:l,ariaLabel:u,ariaDescription:c,className:d="",disabled:f=!1,orientation:p="horizontal",id:g,isLoading:x=!1,loadingComponent:m,error:h=null,errorComponent:P,"data-testid":T,actions:C,actionsMinGap:w=16,forceActionsAbove:j=!1}=e,M=B.useRef(g||`aria-tabs-datagrid-${Math.random().toString(36).slice(2,9)}`).current,_=typeof c=="string"&&c.trim()!==""&&!/\s/.test(c),v=`${M}-description`,D=`${M}-navigation-help`,{dataComparator:y=(E,X)=>JSON.stringify(E)===JSON.stringify(X),filterFunction:N=E=>E,booleanRenderer:A=E=>E?"âœ“":"âœ—"}=r||{},F=i!==void 0,L=i??0,[k,H]=B.useState({focusArea:"tabs",focusedTabIndex:L,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}),Q=B.useMemo(()=>({selectedIndex:L,tabLoadingStates:new Array(a.length).fill(!1),tabErrors:new Array(a.length).fill(null),sortConfig:[],selectedRows:new Array(a.length).fill([]),globalSelectedRowData:null,filters:void 0}),[L]),[O,z]=B.useReducer(z_,Q);B.useEffect(()=>{const E=O.tabLoadingStates.length,X=a.length;E!==X&&z({type:"ADJUST_ARRAYS",payload:{newLength:X}})},[a.length]),B.useEffect(()=>{F&&z({type:"SET_SELECTED_INDEX",payload:L})},[L,F]),B.useEffect(()=>{H(E=>({...E,focusArea:"tabs",focusedTabIndex:O.selectedIndex,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}))},[O.selectedIndex]),B.useEffect(()=>{l&&l(O.globalSelectedRowData)},[O.globalSelectedRowData,l]);const $=B.useCallback((E,X)=>y(E,X),[y]),I=B.useCallback(E=>{E>=0&&E<a.length&&!a[E].disabled&&(z({type:"SET_SELECTED_INDEX",payload:E}),H(X=>({...X,focusedTabIndex:E,focusArea:"tabs"})),s?.(E))},[a,s]),U=B.useRef(!1),R=B.useCallback((E,X)=>{if(!X?.force&&!U.current&&E===0){U.current=!0;return}U.current=!0,setTimeout(()=>{const de=K.current[E],ue=de?.parentElement;if(de&&ue){const ee=de.offsetLeft,fe=de.offsetWidth,ve=ue.clientWidth,we=ee-ve/2+fe/2;try{ue.scrollTo({left:Math.max(0,we),behavior:"smooth"})}catch{de.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}}else process.env.SILENCE_SCROLL_DEBUG||console.debug("[AriaTabsDataGrid] Missing elements for scroll",{tabElementExists:!!de,tabListElementExists:!!ue})},50)},[]),K=B.useRef([]),ne=B.useRef([]),ce=B.useCallback((E,X)=>{const de=O.sortConfig||[],ue=de.find(ve=>ve.key===X);let ee;ue?ue.direction==="asc"?ee=de.map(ve=>ve.key===X?{...ve,direction:"desc"}:ve):ee=de.filter(ve=>ve.key!==X):ee=[...de,{key:X,direction:"asc"}],z({type:"SET_SORT",payload:ee}),a[E].onSort?.(X)},[O.sortConfig,a]),re=B.useCallback(E=>{setTimeout(()=>{const X=document.querySelector(`[data-tab-panel="${O.selectedIndex}"] th:nth-child(${E+1})`);X&&X.focus()},0)},[O.selectedIndex]),Y=B.useCallback(E=>A(E),[A]),q=B.useCallback((E,X)=>{setTimeout(()=>{const de=document.querySelector(`[data-tab-panel="${O.selectedIndex}"] tbody tr:nth-child(${E+1}) td:nth-child(${X+1})`);de&&de.focus()},0)},[O.selectedIndex]);B.useEffect(()=>{k.isGridActive&&(k.focusArea==="headers"?setTimeout(()=>{re(k.focusedHeaderIndex)},0):k.focusArea==="cells"&&setTimeout(()=>{q(k.focusedRowIndex,k.focusedColumnIndex)},0))},[k.focusArea,k.isGridActive,k.focusedHeaderIndex,k.focusedRowIndex,k.focusedColumnIndex,re,q]),B.useEffect(()=>{R(O.selectedIndex)},[O.selectedIndex,R]);const oe=B.useCallback((E,X)=>{const{key:de}=E,ue=a[O.selectedIndex],ee=ue?.columns.length||0;switch(de){case"ArrowLeft":E.preventDefault();const fe=Math.max(0,X-1);H(Ne=>({...Ne,focusedHeaderIndex:fe})),re(fe);break;case"ArrowRight":E.preventDefault();const ve=Math.min(ee-1,X+1);H(Ne=>({...Ne,focusedHeaderIndex:ve})),re(ve);break;case"ArrowUp":E.preventDefault(),H(Ne=>({...Ne,focusArea:"tabs",focusedTabIndex:O.selectedIndex})),R(O.selectedIndex),K.current[O.selectedIndex]?.focus();break;case"ArrowDown":E.preventDefault(),H(Ne=>({...Ne,focusArea:"cells",focusedRowIndex:0,focusedColumnIndex:X,isGridActive:!0}));break;case"Home":E.preventDefault(),H(Ne=>({...Ne,focusedHeaderIndex:0})),re(0);break;case"End":E.preventDefault();const we=ee-1;H(Ne=>({...Ne,focusedHeaderIndex:we})),re(we);break;case"Enter":case" ":E.preventDefault();const je=ue?.columns[X]?.key;je&&ce(O.selectedIndex,je);break}},[a,O.selectedIndex,ce,H,re,q,K]),W=B.useCallback((E,X,de)=>{const{key:ue}=E,ee=a[O.selectedIndex],fe=ee?.data.length||0,ve=ee?.columns.length||0;switch(ue){case"ArrowUp":if(E.preventDefault(),X===0)H(_e=>({..._e,focusArea:"headers",focusedHeaderIndex:de,isGridActive:!1})),re(de);else{const _e=X-1;H(Me=>({...Me,focusedRowIndex:_e})),q(_e,de)}break;case"ArrowDown":E.preventDefault();const we=Math.min(fe-1,X+1);H(_e=>({..._e,focusedRowIndex:we})),q(we,de);break;case"ArrowLeft":E.preventDefault();const je=Math.max(0,de-1);H(_e=>({..._e,focusedColumnIndex:je})),q(X,je);break;case"ArrowRight":E.preventDefault();const Ne=Math.min(ve-1,de+1);H(_e=>({..._e,focusedColumnIndex:Ne})),q(X,Ne);break;case"Home":E.preventDefault(),E.ctrlKey?(H(_e=>({..._e,focusedRowIndex:0,focusedColumnIndex:0})),q(0,0)):(H(_e=>({..._e,focusedColumnIndex:0})),q(X,0));break;case"End":if(E.preventDefault(),E.ctrlKey){const _e=fe-1,Me=ve-1;H(Be=>({...Be,focusedRowIndex:_e,focusedColumnIndex:Me})),q(_e,Me)}else{const _e=ve-1;H(Me=>({...Me,focusedColumnIndex:_e})),q(X,_e)}break;case"Enter":case" ":if(E.preventDefault(),ee&&ee.data[X]){const _e=ee.data.some(Qe=>"ews_data"in Qe)?N(ee.data,O.filters):ee.data,Me=O.sortConfig;let Be=_e;if(Me&&Me.length>0&&(Be=[..._e].sort((Qe,Ae)=>{for(const{key:ht,direction:jn}of Me){let fn=Qe[ht],en=Ae[ht];const tt=ee.columns.find(ja=>ja.key===ht);if(tt?.tableRenderer?(fn=tt.tableRenderer(Qe),en=tt.tableRenderer(Ae)):tt?.render&&(fn=tt.render(Qe),en=tt.render(Ae)),fn==null&&en==null)continue;if(fn==null)return jn==="asc"?-1:1;if(en==null)return jn==="asc"?1:-1;let st=0;if(typeof fn=="number"&&typeof en=="number"?st=fn-en:st=String(fn).localeCompare(String(en),void 0,{numeric:!0,sensitivity:"base"}),st!==0)return jn==="asc"?st:-st}return 0})),Be[X]){const Qe=Be[X],ht=O.globalSelectedRowData&&$(O.globalSelectedRowData,Qe)?null:Qe;z({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:ht})}}break}},[a,O.selectedIndex,O.filters,O.sortConfig,N,$,z,H,re,q]),Z=B.useCallback((E,X)=>N(E,X),[N]);if(B.useImperativeHandle(n,()=>({selectTab:E=>{E>=0&&E<a.length&&(z({type:"SET_SELECTED_INDEX",payload:E}),s?.(E))},refreshData:E=>{console.log("Refreshing data for tab:",E??"all")},exportData:E=>{const X=E??O.selectedIndex,de=a[X];return de?de.data:[]},getSelectedRows:E=>O.globalSelectedRowData?[]:[],clearSelection:E=>{z({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:null})},applyFilters:E=>{z({type:"SET_FILTERS",payload:E})}}),[O.selectedIndex,O.selectedRows,a,s]),x)return o.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--loading ${d}`,"data-testid":T,children:m||o.jsx("div",{className:"aria-tabs-datagrid__loading",children:o.jsx("div",{className:"nhsuk-spinner",role:"status","aria-label":"Loading data",children:o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Loading..."})})})});if(h)return o.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--error ${d}`,"data-testid":T,children:P||o.jsxs("div",{className:"aria-tabs-datagrid__error",role:"alert",children:[o.jsx("h3",{className:"nhsuk-error-summary__title",children:"Error loading data"}),o.jsx("p",{children:h})]})});const J=B.useRef(null),le=B.useRef(null),ie=B.useRef(null),[he,ye]=B.useState(!0);B.useEffect(()=>{if(!C){ye(!1);return}if(j){ye(!1);return}function E(){if(!J.current||!le.current||!ie.current)return;const ue=J.current.clientWidth,ee=Array.from(le.current.querySelectorAll(":scope > .aria-tabs-datagrid__tab")),fe=ee.reduce((Ne,_e)=>Ne+_e.offsetWidth,0),ve=ie.current.offsetWidth,we=Math.max(8*(ee.length-1),0),je=fe+we+ve+w<=ue;ye(je)}const X=requestAnimationFrame(()=>E()),de=new ResizeObserver(()=>E());return J.current&&de.observe(J.current),le.current&&de.observe(le.current),()=>{cancelAnimationFrame(X),de.disconnect()}},[C,w,j,a.length]);const ke=ie,Te=B.useCallback(()=>ke.current?Array.from(ke.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(E=>!E.hasAttribute("disabled")):[],[]),te=B.useCallback(E=>{const X=Te();if(!X.length)return;const de=Math.max(0,Math.min(E,X.length-1));X[de].focus(),H(ue=>({...ue,focusArea:"actions",focusedActionIndex:de}))},[Te]),V=B.useCallback(()=>te(0),[te]),se=B.useCallback((E,X)=>{const{key:de}=E,ue=a.length-1;switch(de){case"ArrowUp":{C&&!he&&(E.preventDefault(),V());break}case"ArrowLeft":{E.preventDefault();const ee=X>0?X-1:ue;I(ee),R(ee),K.current[ee]?.focus();break}case"ArrowRight":{if(E.preventDefault(),X===ue&&C&&he){V();return}const ee=X<ue?X+1:0;I(ee),R(ee),K.current[ee]?.focus();break}case"ArrowDown":{E.preventDefault(),H(ee=>({...ee,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));break}case"Home":{E.preventDefault(),I(0),R(0),K.current[0]?.focus();break}case"End":{E.preventDefault(),I(ue),R(ue),K.current[ue]?.focus();break}case"Enter":case" ":{E.preventDefault(),I(X);break}case"Tab":{!E.shiftKey&&X===ue&&C&&he&&V();break}}},[a.length,I,R,C,he,V]),ae=B.useCallback(E=>{const{key:X}=E,de=Te();if(!de.length)return;const ue=de.findIndex(ee=>ee===document.activeElement);switch(X){case"ArrowLeft":{if(he)if(ue>0)E.preventDefault(),te(ue-1);else{E.preventDefault();const ee=a.length-1;I(ee),R(ee),K.current[ee]?.focus(),H(fe=>({...fe,focusArea:"tabs",focusedTabIndex:ee}))}break}case"ArrowRight":{he&&(ue<de.length-1?(E.preventDefault(),te(ue+1)):(E.preventDefault(),I(0),R(0),K.current[0]?.focus(),H(ee=>({...ee,focusArea:"tabs",focusedTabIndex:0}))));break}case"ArrowDown":{if(he)E.preventDefault(),H(ee=>({...ee,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));else{E.preventDefault();const ee=O.selectedIndex;K.current[ee]?.focus(),H(fe=>({...fe,focusArea:"tabs",focusedTabIndex:ee}))}break}}},[Te,he,te,a.length,I,R,O.selectedIndex]);return o.jsxs("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--${p} ${d}`,id:g,"data-testid":T,ref:J,children:[c&&!_&&o.jsx("div",{id:v,className:"nhsuk-u-visually-hidden",children:c}),o.jsx("div",{className:"aria-tabs-datagrid__navigation-help sr-only",id:D,children:"Keyboard navigation: Use Tab to move between tabs and grid. Arrow keys navigate within tabs and grid cells. Enter activates tabs and sorts columns. Arrow Down from tabs moves to table headers. Arrow Down from headers moves to table cells. Use Arrow keys to navigate between cells."}),o.jsx(mu,{sortConfig:O.sortConfig||[],columns:a.flatMap(E=>E.columns.map(X=>({key:X.key,label:X.label}))).filter((E,X,de)=>de.findIndex(ue=>ue.key===E.key)===X),onSortChange:E=>{z({type:"SET_SORT",payload:E})},ariaLabel:"Data grid sort configuration"}),C&&!he&&o.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above",ref:ie,role:"toolbar","aria-label":"Additional actions",onKeyDown:ae,children:C}),o.jsxs("div",{className:`aria-tabs-datagrid__tabs-wrapper ${he?"aria-tabs-datagrid__tabs-wrapper--inline-actions":""}`,children:[o.jsx("div",{role:"tablist","aria-label":u,"aria-describedby":c?_?c:v:D,"aria-orientation":p,className:"aria-tabs-datagrid__tabs",ref:le,children:a.map((E,X)=>{const de=X===O.selectedIndex,ue=E.disabled||f;return o.jsxs("button",{role:"tab",id:`tab-${E.id}`,"aria-controls":`panel-${E.id}`,"aria-selected":de,"aria-disabled":ue,tabIndex:de?0:-1,ref:ee=>{K.current[X]=ee},onClick:()=>I(X),onKeyDown:ee=>se(ee,X),disabled:ue,className:["aria-tabs-datagrid__tab",de?"aria-tabs-datagrid__tab--selected":"",ue?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[o.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:E.label}),O.tabLoadingStates[X]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),O.tabErrors[X]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},E.id)})}),C&&he&&o.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline",ref:ie,role:"toolbar","aria-label":"Additional actions",onKeyDown:ae,children:C})]}),a.map((E,X)=>{const de=X===O.selectedIndex;return o.jsx("div",{role:"tabpanel",id:`panel-${E.id}`,"aria-labelledby":`tab-${E.id}`,tabIndex:0,hidden:!de,ref:ue=>{ne.current[X]=ue},className:`aria-tabs-datagrid__panel ${E.className||""}`,"data-tab-panel":X,children:de&&(()=>{const ue=E.data.some(fe=>"ews_data"in fe)?Z(E.data,O.filters):E.data,ee=B.useMemo(()=>{const fe=O.sortConfig;return!fe||fe.length===0?ue:[...ue].sort((ve,we)=>{for(const{key:je,direction:Ne}of fe){let _e=ve[je],Me=we[je];const Be=E.columns.find(Ae=>Ae.key===je);if(Be?.tableRenderer?(_e=Be.tableRenderer(ve),Me=Be.tableRenderer(we)):Be?.render&&(_e=Be.render(ve),Me=Be.render(we)),_e==null&&Me==null)continue;if(_e==null)return 1;if(Me==null)return-1;let Qe=0;if(typeof _e=="number"&&typeof Me=="number"?Qe=_e-Me:typeof _e=="boolean"&&typeof Me=="boolean"?Qe=_e===Me?0:_e?1:-1:Qe=String(_e).localeCompare(String(Me),void 0,{numeric:!0,sensitivity:"base"}),Qe!==0)return Ne==="asc"?Qe:-Qe}return 0})},[ue,O.sortConfig,E.columns]);return o.jsxs("table",{className:"nhsuk-table aria-tabs-datagrid__grid",role:"grid","aria-label":E.ariaLabel,"aria-describedby":E.ariaDescription?`panel-${E.id}-description`:void 0,children:[E.ariaDescription&&o.jsx("caption",{className:"nhsuk-u-visually-hidden",id:`panel-${E.id}-description`,children:E.ariaDescription}),o.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:o.jsx("tr",{role:"row",children:E.columns.map((fe,ve)=>{const we=O.sortConfig?.find(_e=>_e.key===fe.key),je=!!we,Ne=k.focusArea==="headers"&&k.focusedHeaderIndex===ve;return o.jsx("th",{className:`sortable-header ${Ne?"sortable-header--focused":""} ${je?"sortable-header--sorted":""}`,role:"columnheader",tabIndex:Ne?0:-1,onClick:()=>ce(X,fe.key),onKeyDown:_e=>oe(_e,ve),"aria-sort":je?we?.direction==="asc"?"ascending":"descending":"none",children:o.jsxs("div",{className:"header-content",children:[o.jsx("span",{className:"header-label",children:fe.label}),o.jsxs("div",{className:`sort-indicator-container ${je?`sort-indicator--${we?.direction}`:""}`,children:[O.sortConfig&&O.sortConfig.length>0&&O.sortConfig.findIndex(_e=>_e.key===fe.key)!==-1&&o.jsx("span",{className:`sort-priority sort-priority--priority-${O.sortConfig.findIndex(_e=>_e.key===fe.key)+1}`,"data-priority":O.sortConfig.findIndex(_e=>_e.key===fe.key)+1,title:`Sort priority: ${O.sortConfig.findIndex(_e=>_e.key===fe.key)+1}`,children:O.sortConfig.findIndex(_e=>_e.key===fe.key)+1}),je&&o.jsx("svg",{className:`nhsuk-icon sort-arrow sort-arrow--${we?.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})]})]})},fe.key)})})}),o.jsx("tbody",{className:"nhsuk-table__body",role:"rowgroup",children:ee.map((fe,ve)=>{const we=O.globalSelectedRowData&&$(O.globalSelectedRowData,fe),je=k.focusArea==="cells"&&k.focusedRowIndex===ve;return o.jsx("tr",{role:"row",className:`data-row ${we?"data-row--selected":""} ${je?"data-row--focused":""}`,"aria-selected":we,children:E.columns.map((Ne,_e)=>{const Me=fe[Ne.key];let Be;Ne.tableRenderer?Be=Ne.tableRenderer(fe):Ne.render?Be=Ne.render(fe):Be=Me;const Qe=k.focusArea==="cells"&&k.focusedRowIndex===ve&&k.focusedColumnIndex===_e,Ae=()=>{if(Ne.customRenderer){const ht=Ne.customRenderer(Me,fe);return o.jsx("span",{className:"data-cell__custom","data-custom-rendered":"true",children:ht})}return typeof Me=="boolean"&&Be===Me?o.jsxs(o.Fragment,{children:[Y(Me),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:Me?"Yes":"No"})]}):B.isValidElement(Be)||typeof Be!="object"?Be??"":Be};return o.jsx("td",{role:"gridcell",className:`data-cell ${Qe?"data-cell--focused":""}`,tabIndex:Qe?0:-1,onClick:()=>{const jn=O.globalSelectedRowData&&$(O.globalSelectedRowData,fe)?null:fe;z({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:jn})},onKeyDown:ht=>W(ht,ve,_e),children:Ae()},Ne.key)})},ve)})})]})})()},E.id)})]})}),ni={asc:"â†‘",desc:"â†“"},O_=t=>[...t].sort((e,n)=>e.priority-n.priority);function Cs(t){return t.map((e,n)=>({...e,priority:n}))}function W_(t){return t.length>0?Math.max(...t.map(e=>e.priority)):-1}function U_(t,e){const n=e.find(r=>r.id===t);return n?n.priority>0:!1}function G_(t,e){const n=e.find(a=>a.id===t),r=W_(e);return n?n.priority<r:!1}const Y_=({sortConfig:t,onSortChange:e,className:n="",emptyDescription:r="No sorting applied",activeDescription:a,showReset:i=!0,showHelp:s=!0,disabled:l=!1,ariaLabel:u="Sort configuration",ariaDescribedBy:c})=>{const d=B.useMemo(()=>O_(t),[t]),f=B.useCallback(T=>{if(l)return;const C=t.map(w=>w.id===T?{...w,direction:w.direction==="asc"?"desc":"asc"}:w);e(C)},[t,e,l]),p=B.useCallback(T=>{if(l)return;const C=t.findIndex(j=>j.id===T);if(C<=0)return;const w=[...t];[w[C],w[C-1]]=[w[C-1],w[C]],e(Cs(w))},[t,e,l]),g=B.useCallback(T=>{if(l)return;const C=t.findIndex(j=>j.id===T);if(C>=t.length-1||C===-1)return;const w=[...t];[w[C],w[C+1]]=[w[C+1],w[C]],e(Cs(w))},[t,e,l]),x=B.useCallback(T=>{if(l)return;const C=t.filter(w=>w.id!==T);e(Cs(C))},[t,e,l]),m=B.useCallback(()=>{l||e([])},[e,l]),h=()=>{if(t.length===0)return r;if(a)return a;const T=d.map((C,w)=>{const j=C.direction==="asc"?"ascending":"descending";return`${w+1}. ${C.label} (${j})`});if(T.length===1)return`Sorted by: ${T[0]}`;if(T.length===2)return`Sorted by: ${T.join(" and ")}`;{const C=T.pop();return`Sorted by: ${T.join(", ")}, and ${C}`}},P=B.useMemo(()=>{const T=["sort-description"];return s&&T.push("sort-help"),c&&T.push(c),T.join(" ")},[s,c]);return t.length===0?o.jsx("div",{className:`sort-status-control sort-status-control--empty ${n}`,children:o.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:h()})}):o.jsxs("div",{className:`sort-status-control ${n}`,children:[o.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:h()}),o.jsxs("div",{className:"sort-status-control__tags",role:"list","aria-label":u,"aria-describedby":P,children:[o.jsx("div",{className:"sort-status-control__tags-label",children:"Current sorting:"}),d.map(T=>o.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",children:o.jsx(Ye,{text:"",color:"blue",className:"sort-status-control__tag",closable:!0,onClose:()=>x(T.id),disabled:l,children:o.jsxs("div",{className:"sort-status-control__tag-content",children:[o.jsx("span",{className:"sort-status-control__tag-priority",children:T.priority+1}),o.jsx("span",{className:"sort-status-control__tag-label",children:T.label}),o.jsx("button",{type:"button",className:"sort-status-control__tag-direction",onClick:()=>f(T.id),disabled:l,"aria-label":`Toggle sort direction for ${T.label}. Currently ${T.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:T.direction==="asc"?ni.asc:ni.desc}),o.jsxs("div",{className:"sort-status-control__tag-actions",children:[o.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>p(T.id),disabled:l||!U_(T.id,t),"aria-label":`Move ${T.label} sort up in priority`,title:"Move up in priority",children:"â–²"}),o.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>g(T.id),disabled:l||!G_(T.id,t),"aria-label":`Move ${T.label} sort down in priority`,title:"Move down in priority",children:"â–¼"})]})]})})},T.id))]}),i&&o.jsx("div",{className:"sort-status-control__actions",children:o.jsx(nt,{variant:"secondary",onClick:m,disabled:l,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})}),s&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsxs("small",{children:["Click ",ni.asc,"/",ni.desc," to toggle ascending/descending. Use â–²/â–¼ to change sort priority. Click Ã— to remove a sort."]})})]})},ri=(t,e)=>e.map(n=>({id:n.id,label:n.label,data:n.filter?n.filter(t):t,columns:n.columns.map(r=>({key:r.key,label:r.label,render:r.render,customRenderer:r.customRenderer})),sortConfig:n.sortConfig,ariaLabel:n.ariaLabel||`${n.label} Data Grid`,ariaDescription:n.ariaDescription||`Data grid showing ${n.label.toLowerCase()}`,className:n.className,disabled:n.disabled})),Ts=[{value:!0,icon:o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"100%",height:"34",children:o.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})})},{value:!1,icon:o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"100%",height:"34",children:[o.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),o.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]})}],V_=(t,e)=>!t||!e?t===e:t.name&&t.bed_name&&e.name&&e.bed_name?t.name===e.name&&t.bed_name===e.bed_name:JSON.stringify(t)===JSON.stringify(e),q_=(t,e)=>e?t.filter(n=>{if(e.ewsScoreRange){const[r,a]=e.ewsScoreRange;if(n.ews_score<r||n.ews_score>a)return!1}return!(e.wards&&e.wards.length>0&&!e.wards.includes(n.ward_name)||e.specialties&&e.specialties.length>0&&!e.specialties.includes(n.speciality)||e.dischargeStatuses&&e.dischargeStatuses.length>0&&!e.dischargeStatuses.includes(n.early_discharge_notification)||e.avpuLevels&&e.avpuLevels.length>0&&!e.avpuLevels.includes(n.ews_data.avpu)||e.medicallyOptimised!==null&&e.medicallyOptimised!==void 0&&n.medically_optimised!==e.medicallyOptimised||e.fastTrack!==null&&e.fastTrack!==void 0&&n.fast_track!==e.fastTrack)}):t,X_=t=>{if(typeof t=="boolean"){const n=Ts.find(r=>r.value===t);return n?n.icon:null}const e=Ts.find(n=>n.value===t);return e?e.icon:String(t)},K_=t=>`${t.name}-${t.bed_name}`,Z_=()=>({overview:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"bed_name",label:"Bed"},{key:"ews_score",label:"EWS Score"},{key:"speciality",label:"Specialty"},{key:"consultant",label:"Consultant"}],vitals:[{key:"name",label:"Patient Name"},{key:"ews_score",label:"EWS Score"},{key:"respiratory_rate_bpm",label:"Respiratory Rate",render:t=>t.ews_data.respiratory_rate_bpm},{key:"sp02",label:"SpO2 %",render:t=>t.ews_data.sp02},{key:"temperature",label:"Temperature Â°C",render:t=>t.ews_data.temperature},{key:"systolic_bp",label:"Systolic BP",render:t=>t.ews_data.systolic_bp},{key:"heart_rate",label:"Heart Rate",render:t=>t.ews_data.heart_rate},{key:"avpu",label:"AVPU",render:t=>t.ews_data.avpu.toUpperCase()}],discharge:[{key:"name",label:"Patient Name"},{key:"anticipated_discharge_date",label:"Anticipated Discharge",render:t=>new Date(t.anticipated_discharge_date).toLocaleDateString()},{key:"early_discharge_notification",label:"Discharge Status"},{key:"medically_optimised",label:"Medically Optimised"},{key:"criteria_to_reside",label:"Criteria to Reside"},{key:"fast_track",label:"Fast Track"},{key:"transport_status",label:"Transport Status"},{key:"pathway",label:"Pathway"}],logistics:[{key:"name",label:"Patient Name"},{key:"ward_name",label:"Ward"},{key:"room_name",label:"Room"},{key:"bed_name",label:"Bed"},{key:"bed_type",label:"Bed Type"},{key:"transport_booking",label:"Transport Booked"},{key:"transport_mobility",label:"Transport Type"},{key:"district_nurse_referral",label:"District Nurse"},{key:"equipment",label:"Equipment"}]}),J_=t=>{const e=Z_();return[{id:"overview",label:"Patient Overview",data:t,columns:e.overview,ariaLabel:"Patient Overview Data Grid",ariaDescription:"Overview of all patients with basic information"},{id:"vitals",label:"Vital Signs & EWS",data:t,columns:e.vitals,sortConfig:[{key:"ews_score",direction:"desc"},{key:"name",direction:"asc"},{key:"ward_name",direction:"asc"}],ariaLabel:"Patient Vital Signs Data Grid",ariaDescription:"Patient vital signs and Early Warning Scores"},{id:"discharge",label:"Discharge Planning",data:t.filter(n=>n.anticipated_discharge_date),columns:e.discharge,sortConfig:[{key:"anticipated_discharge_date",direction:"asc"},{key:"discharge_status",direction:"desc"}],ariaLabel:"Discharge Planning Data Grid",ariaDescription:"Patient discharge planning and status information"},{id:"logistics",label:"Bed Management",data:t,columns:e.logistics,sortConfig:[{key:"ward_name",direction:"asc"}],ariaLabel:"Bed Management Data Grid",ariaDescription:"Patient location and logistics information"}]},pu={dataComparator:V_,filterFunction:q_,booleanRenderer:X_,getDataId:K_};function gu(t,e,n){const{primaryField:r,secondaryFields:a=[],badges:i=[],hiddenFields:s=[],getPriority:l,getVariant:u,fieldRenderers:c={},classPrefix:d="adaptive-card"}=n,f=e.find(C=>C.key===r),p=f?.cardRenderer?f.cardRenderer(t):f?.render?f.render(t):t[r||"name"]||"Untitled",g=()=>a.filter(w=>!s.includes(w)&&t[w]).slice(0,3).map(w=>{const j=e.find(v=>v.key===w),S=t[w],M=c[w]?c[w](S,t):j?.cardRenderer?j.cardRenderer(t):j?.render?j.render(t):S;return`${j?.label||w}: ${M}`}).join(" â€¢ "),x=()=>i.length===0?null:i.filter(C=>t[C.fieldKey]!==void 0).map(C=>{const w=t[C.fieldKey],j=C.render?C.render(w,t):w;return`<span class="nhsuk-tag ${Q_(C,w)}">${j}</span>`}).join(""),m=()=>u?u(t):l?.(t)==="high"?"primary":"default",h=x(),P=g(),T=h?`${P}${h?`<div class="adaptive-card__badges">${h}</div>`:""}`:P;return{variant:m(),heading:String(p),descriptionHtml:T,className:`adaptive-card ${d}`,"aria-label":`Record for ${p}`}}function Q_(t,e){const n=t.className||"adaptive-card__badge";if(t.fieldKey==="ews_score"||t.fieldKey.includes("score")){const r=Number(e);return r>=7?`${n} nhsuk-tag--red`:r>=3?`${n} nhsuk-tag--yellow`:`${n} nhsuk-tag--green`}if(t.fieldKey==="priority"){const r=String(e).toLowerCase();if(r==="high")return`${n} nhsuk-tag--red`;if(r==="medium")return`${n} nhsuk-tag--yellow`;if(r==="low")return`${n} nhsuk-tag--green`}if(t.fieldKey==="status"){const r=String(e).toLowerCase();if(r==="urgent"||r==="critical")return`${n} nhsuk-tag--red`;if(r==="pending"||r==="warning")return`${n} nhsuk-tag--yellow`;if(r==="completed"||r==="success")return`${n} nhsuk-tag--green`}switch(t.color){case"primary":return`${n} nhsuk-tag--blue`;case"secondary":return`${n} nhsuk-tag--grey`;case"success":return`${n} nhsuk-tag--green`;case"warning":return`${n} nhsuk-tag--yellow`;case"danger":return`${n} nhsuk-tag--red`;default:return n}}const ey={primaryField:"name",secondaryFields:["id","description","status"],badges:[{fieldKey:"priority",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__status-badge"}],hiddenFields:[],getPriority:t=>t.priority||"medium",getStatus:t=>t.status||"active",getVariant:t=>t.priority==="high"?"primary":"default",fieldRenderers:{},classPrefix:"adaptive-card--generic"},Ns=({data:t,columns:e,onSelect:n,onAction:r,priority:a="medium",status:i="active"})=>{const s=t.name,l=t.age,u=t.ward_name,c=t.bed_name,d=t.ews_score,f=t.speciality,p=t.consultant;return o.jsxs("div",{className:`healthcare-card healthcare-card--patient healthcare-card--${a} healthcare-card--${i}`,onClick:()=>n?.(t),role:"button",tabIndex:0,"aria-label":`Patient record for ${s}, Age ${l}, Ward ${u}, Bed ${c}`,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__identity",children:[o.jsx("h3",{className:"healthcare-card__patient-name",children:s}),o.jsxs("p",{className:"healthcare-card__age-info",children:[o.jsx("span",{className:"healthcare-card__label",children:"Age: "}),o.jsx("span",{className:"healthcare-card__value",children:l})]})]}),o.jsx("div",{className:"healthcare-card__badges",children:d!==void 0&&o.jsxs(Ye,{color:ny(bu(d)),className:"healthcare-card__alert",children:["EWS: ",d]})})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Ward"}),o.jsx("dd",{children:u})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Bed"}),o.jsx("dd",{children:c})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Specialty"}),o.jsx("dd",{children:f})]}),o.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--prominent",children:[o.jsx("dt",{children:"Consultant"}),o.jsx("dd",{children:p})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(nt,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-notes",t)},children:"Notes"}),o.jsx(nt,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-vitals",t)},children:"Vitals"}),o.jsx(nt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:g=>{g.stopPropagation(),r?.("view-full",t)},children:"View Full Record"})]})]})},js=({data:t,onAction:e})=>o.jsxs("div",{className:"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__time-info",children:[o.jsx("h3",{className:"healthcare-card__time",children:new Date(t.appointment_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),o.jsx("p",{className:"healthcare-card__type",children:t.appointment_type})]}),o.jsxs("div",{className:"healthcare-card__badges",children:[o.jsx(Ye,{color:ry(t.status||"active"),className:"healthcare-card__status",children:(t.status||"active").charAt(0).toUpperCase()+(t.status||"active").slice(1)}),o.jsxs(Ye,{color:"grey",className:"healthcare-card__duration",children:[t.duration||"30"," min"]})]})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Patient"}),o.jsx("dd",{children:t.patient_name})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Consultant"}),o.jsx("dd",{children:t.consultant})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Location"}),o.jsx("dd",{children:t.location})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(nt,{variant:"secondary",size:"small",onClick:()=>e?.("view",t),children:"View Details"}),o.jsx(nt,{variant:"primary",size:"small",onClick:()=>e?.("edit",t),children:"Reschedule"})]})]}),Ds=({data:t,onAction:e})=>o.jsxs("div",{className:"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__medication-info",children:[o.jsx("h3",{className:"healthcare-card__medication-name",children:t.medication}),o.jsxs("p",{className:"healthcare-card__dose",children:[t.dose," â€¢ ",t.frequency]})]}),o.jsxs("div",{className:"healthcare-card__badges",children:[o.jsx(Ye,{color:"blue",className:"healthcare-card__route",children:t.route}),t.next_due&&o.jsxs(Ye,{color:"red",className:"healthcare-card__warning",children:["Due: ",new Date(t.next_due).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Patient"}),o.jsx("dd",{children:t.patient_name})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Prescriber"}),o.jsx("dd",{children:t.prescriber})]}),t.allergies&&o.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--urgent",children:[o.jsx("dt",{children:"Allergies"}),o.jsx("dd",{children:t.allergies})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(nt,{variant:"secondary",size:"small",onClick:()=>e?.("view",t),children:"View Details"}),o.jsx(nt,{variant:"primary",size:"small",onClick:()=>e?.("edit",t),children:"Adjust Dose"})]})]}),Ms=({data:t,onSelect:e,onAction:n,priority:r="medium"})=>{const a=t.name,i=t.ews_score,s=t.ews_data?.respiratory_rate_bpm,l=t.ews_data?.sp02,u=t.ews_data?.temperature,c=t.ews_data?.systolic_bp,d=t.ews_data?.heart_rate,f=t.ews_data?.avpu;return o.jsxs("div",{className:`healthcare-card healthcare-card--vitals healthcare-card--${r}`,onClick:()=>e?.(t),role:"button",tabIndex:0,"aria-label":`Vital signs for ${a}, EWS Score ${i}`,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__vitals-summary",children:[o.jsx("h3",{className:"healthcare-card__patient-name",children:a}),i!==void 0&&o.jsxs("p",{className:`healthcare-card__ews-score healthcare-card__ews-score--${ty(i)}`,children:["EWS: ",i]})]}),o.jsx("div",{className:"healthcare-card__badges",children:f&&o.jsxs(Ye,{color:"blue",className:"healthcare-card__avpu",children:["AVPU: ",f.toUpperCase()]})})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("div",{className:"healthcare-card__vitals-grid",children:[s!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Respiratory Rate"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[s," bpm"]})]}),l!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"SpO2"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[l,"%"]})]}),u!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Temperature"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[u,"Â°C"]})]}),c!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Systolic BP"}),o.jsx("span",{className:"healthcare-card__vital-value",children:c})]}),d!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Heart Rate"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[d," bpm"]})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(nt,{variant:"secondary",className:"healthcare-card__action",onClick:p=>{p.stopPropagation(),n?.("view-trend",t)},children:"Trend"}),o.jsx(nt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:p=>{p.stopPropagation(),n?.("record-new",t)},children:"Record New"})]})]})};function bu(t){const e=typeof t=="string"?parseInt(t,10):t;return e>=7?"critical":e>=5?"high":e>=3?"medium":"low"}function ty(t){return bu(t)}function ny(t){switch(t){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"grey";default:return"grey"}}function ry(t){switch(t.toLowerCase()){case"active":return"blue";case"pending":return"orange";case"completed":return"green";case"cancelled":return"grey";default:return"blue"}}const ay=[{fieldKey:"ews_score",render:t=>`EWS: ${t}`,className:"adaptive-card__ews-badge",color:"default"},{fieldKey:"priority",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__status-badge"}],_u=t=>t.ews_score&&Number(t.ews_score)>=7?"high":t.ews_score&&Number(t.ews_score)>=3?"medium":t.priority==="high"||t.status==="urgent"?"high":t.priority==="low"?"low":"medium",yu={name:"healthcare",defaultCardConfig:{primaryField:"name",secondaryFields:["nhs_number","ward","condition","consultant"],badges:ay,hiddenFields:[],getPriority:_u,getStatus:t=>{if(t.status){const e=t.status.toLowerCase();if(["active","pending","completed","cancelled","urgent"].includes(e))return e}return"active"},getVariant:t=>_u(t)==="high"||t.status==="urgent"?"primary":"default",fieldRenderers:{nhs_number:t=>t?`NHS: ${t}`:"",ews_score:t=>{const e=Number(t),n=e>=7?"HIGH":e>=3?"MEDIUM":"LOW";return`EWS: ${t} (${n})`},age:(t,e)=>e.dob?`${new Date().getFullYear()-new Date(e.dob).getFullYear()}y`:t?`${t}y`:""},classPrefix:"adaptive-card--healthcare"},cssImport:"./HealthcareCardTemplates.scss",cardTemplates:{patient:(t,e,n)=>{const r=n.getPriority?.(t)||"medium",a=n.getStatus?.(t)||"active",i=a==="urgent"?"active":a;return o.jsx(Ns,{data:t,columns:e,priority:r,status:i,onSelect:s=>console.log("Patient selected:",s),onAction:(s,l)=>console.log("Patient action:",s,l)})},appointment:(t,e,n)=>{const r=n.getStatus?.(t)||"pending",a=r==="urgent"?"pending":r;return o.jsx(js,{data:t,columns:e,status:a,onSelect:i=>console.log("Appointment selected:",i),onAction:(i,s)=>console.log("Appointment action:",i,s)})},medication:(t,e,n)=>{const r=n.getPriority?.(t)||"medium";return o.jsx(Ds,{data:t,columns:e,priority:r,onSelect:a=>console.log("Medication selected:",a),onAction:(a,i)=>console.log("Medication action:",a,i)})},vitals:(t,e,n)=>{const r=n.getPriority?.(t)||"medium";return o.jsx(Ms,{data:t,columns:e,priority:r,onSelect:a=>console.log("Vitals selected:",a),onAction:(a,i)=>console.log("Vitals action:",a,i)})}},fieldTypes:{isNHSNumber:t=>typeof t=="string"&&/^\d{3}\s?\d{3}\s?\d{4}$/.test(t.replace(/\s/g,"")),isEWSScore:t=>typeof t=="number"&&t>=0&&t<=20,isMedicalDate:t=>typeof t=="string"&&!isNaN(Date.parse(t))}};function xu(t){return{primaryField:t?.primaryField||"name",secondaryFields:t?.secondaryFields||[],badges:t?.badgeFields?.map(e=>({fieldKey:e,className:"adaptive-card__badge"}))||[],hiddenFields:t?.hiddenFields||[],cardTemplate:t?.cardTemplate?(e,n,r)=>t.cardTemplate(e,n):void 0,classPrefix:"adaptive-card--generic"}}function vu(t){if(!t||t.length===0)return!1;const e=t[0];return e.ews_score!==void 0||e.nhs_number!==void 0||e.patient_name!==void 0||e.ward!==void 0||e.consultant!==void 0}function iy(t,e){switch(e.type){case"SET_SELECTED_INDEX":return{...t,selectedIndex:e.payload};case"SET_TAB_LOADING":const n=[...t.tabLoadingStates];return n[e.payload.tabIndex]=e.payload.isLoading,{...t,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...t.tabErrors];return r[e.payload.tabIndex]=e.payload.error,{...t,tabErrors:r};case"SET_SORT":return{...t,sortConfig:e.payload};case"SET_SELECTED_ROWS":const a=[...t.selectedRows];return a[e.payload.tabIndex]=e.payload.rowIndices,{...t,selectedRows:a};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...t,globalSelectedRowData:e.payload};case"SET_FILTERS":return{...t,filters:e.payload};case"ADJUST_ARRAYS":const{newLength:i}=e.payload,s=new Array(i).fill(!1),l=new Array(i).fill(null),u=new Array(i).fill([]);for(let c=0;c<Math.min(t.tabLoadingStates.length,i);c++)s[c]=t.tabLoadingStates[c],l[c]=t.tabErrors[c],u[c]=t.selectedRows[c];return{...t,tabLoadingStates:s,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(t.tabLoadingStates.length).fill(!1),tabErrors:new Array(t.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(t.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return t}}function sy(t,e){const[n,r]=B.useState("cards");return B.useEffect(()=>{if(e){r(e);return}const a=()=>{const i=window.innerWidth;i<t.mobile?r("cards"):i<t.desktop?r("hybrid"):r("table")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[t,e]),n}function oy(t){return!t||typeof t!="object"?null:t.appointment_type||t.appointment_time||t.clinic?"appointment":t.medication_name||t.medication||t.dose||t.frequency?"medication":t.ews_score!==void 0||t.respiratory_rate!==void 0||t.spo2!==void 0||t.temperature!==void 0||t.systolic_bp!==void 0||t.heart_rate!==void 0?"vitals":t.name||t.patient_name||t.nhs_number||t.ward||t.bed?"patient":null}function ly(t,e,n,r){const a=r?{...r.defaultCardConfig,...n}:{...ey,...n};if(r&&r.cardTemplates){const i=oy(t);if(i&&r.cardTemplates[i]){const s=r.cardTemplates[i](t,e,a);if(s)return{variant:"default",children:s}}}return a.cardTemplate&&a.cardTemplate(t,e,a),gu(t,e,a)}const $s=({breakpoints:t={mobile:768,tablet:1024,desktop:1200},forceLayout:e,cardConfig:n={},experimental:r={},enableAdvancedSorting:a=!1,topActions:i,bottomActions:s,gridActions:l,forceGridActionsAbove:u,tabPanels:c,dataConfig:d,selectedIndex:f,onTabChange:p,ariaLabel:g="Data grid",ariaDescription:x,orientation:m="horizontal",id:h,disabled:P=!1,className:T,...C})=>{const w=sy(t,e),j=f!==void 0,S=f??0,M=B.useMemo(()=>{if(c.some(V=>V.data&&V.data.length>0&&vu(V.data))){const V=xu(n);return{...yu.defaultCardConfig,...V}}else return xu(n)},[n,c]),_=B.useMemo(()=>c.some(V=>V.data&&V.data.length>0&&vu(V.data))?yu:void 0,[c]),v=B.useMemo(()=>({selectedIndex:S,tabLoadingStates:new Array(c.length).fill(!1),tabErrors:new Array(c.length).fill(null),sortConfig:[],selectedRows:new Array(c.length).fill([]),globalSelectedRowData:null,filters:void 0}),[S,c.length]),[D,y]=B.useReducer(iy,v),N=B.useRef([]),A=B.useRef([]),F=B.useRef([]),L=B.useRef(null),[k,H]=B.useState({focusArea:"tabs",focusedTabIndex:0,focusedCardIndex:0,selectedCardIndex:-1,isGridActive:!1,focusedCardElementIndex:0,cardElements:[],isCardNavigationActive:!1,gridColumns:1,gridRows:1,cardSortConfig:null,focusedSortControlIndex:0,isSortControlsActive:!1}),Q=B.useCallback(te=>{if(!te.current)return{columns:1,rows:0};const V=te.current,se=V.querySelectorAll(".aria-tabs-datagrid-adaptive__card-wrapper");if(se.length===0)return{columns:1,rows:0};const ae=V.offsetWidth,X=se[0].offsetWidth,de=Math.floor(ae/X)||1,ue=Math.ceil(se.length/de);return{columns:de,rows:ue}},[]),O=B.useCallback((te,V)=>({row:Math.floor(te/V),col:te%V}),[]),z=B.useCallback((te,V,se)=>te*se+V,[]),$=B.useCallback((te,V,se,ae)=>{const{row:E,col:X}=O(te,ae);let de=E,ue=X;switch(V){case"up":de=Math.max(0,E-1);break;case"down":de=Math.min(Math.floor((se-1)/ae),E+1);break;case"left":ue=Math.max(0,X-1);break;case"right":ue=Math.min(ae-1,X+1);break}const ee=z(de,ue,ae);return Math.min(ee,se-1)},[O,z]);B.useEffect(()=>{k.isCardNavigationActive&&k.focusedCardElementIndex>=0&&k.cardElements.length>0&&setTimeout(()=>{const te=k.cardElements[k.focusedCardElementIndex];te&&(te.element.focus(),te.element.scrollIntoView({block:"nearest",behavior:"smooth"}))},0)},[k.isCardNavigationActive,k.focusedCardElementIndex,k.cardElements.length]),B.useEffect(()=>{const te=()=>{if(w==="cards"&&L.current){const{columns:ae,rows:E}=Q(L);H(X=>({...X,gridColumns:ae,gridRows:E}))}},V=setTimeout(te,200),se=()=>{setTimeout(te,100)};return window.addEventListener("resize",se),()=>{clearTimeout(V),window.removeEventListener("resize",se)}},[w,c,Q]),B.useEffect(()=>{const te=D.tabLoadingStates.length,V=c.length;te!==V&&y({type:"ADJUST_ARRAYS",payload:{newLength:V}})},[c.length,D.tabLoadingStates.length]),B.useEffect(()=>{j&&f!==D.selectedIndex&&y({type:"SET_SELECTED_INDEX",payload:f})},[j,f,D.selectedIndex]);const I=B.useCallback(te=>{te>=0&&te<c.length&&!c[te].disabled&&(y({type:"SET_SELECTED_INDEX",payload:te}),p?.(te))},[c,p]),U=B.useCallback(te=>{console.log("Card selected:",te),y({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:te})},[]),R=B.useCallback(te=>{const V=A.current[te];V&&(V.focus(),V.scrollIntoView({block:"nearest",behavior:"smooth"}))},[]),K=B.useCallback(te=>{const V=A.current[te];if(!V)return[];const se=['button:not([disabled]):not([aria-hidden="true"])','a[href]:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','select:not([disabled]):not([aria-hidden="true"])','textarea:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])','.healthcare-card__detail[tabindex]:not([tabindex="-1"])',".healthcare-card__action:not([disabled])",".tag:not([disabled])"].join(", "),ae=V.querySelectorAll(se);return Array.from(ae).map((E,X)=>({id:E.id||`card-${te}-element-${X}`,element:E,label:E.getAttribute("aria-label")||E.textContent?.trim()||E.getAttribute("title")||`Element ${X+1}`,type:E.tagName.toLowerCase()==="button"?"button":E.tagName.toLowerCase()==="a"?"link":["input","select","textarea"].includes(E.tagName.toLowerCase())?"input":"generic"}))},[]),ne=B.useRef(null),ce=B.useCallback(te=>{const V=ne.current;if(!V)return;const se=document.createElement("div");se.setAttribute("aria-live","polite"),se.setAttribute("aria-atomic","true"),se.className="sr-only",se.textContent=te,V.appendChild(se),setTimeout(()=>{V.contains(se)&&V.removeChild(se)},1e3)},[]),re=B.useCallback(te=>{const V=te.filter(ae=>ae.sortable!==!1),se=[{value:"",label:"Sort by..."}];return V.forEach(ae=>{const E=ae.label||ae.key;ae.key==="name"?se.push({value:`${ae.key}-asc`,label:`${E} (A-Z)`},{value:`${ae.key}-desc`,label:`${E} (Z-A)`}):ae.key==="ews_score"||ae.key.includes("score")?se.push({value:`${ae.key}-desc`,label:`${E} (High-Low)`},{value:`${ae.key}-asc`,label:`${E} (Low-High)`}):ae.key==="age"||ae.key.includes("date")||ae.key.includes("time")?se.push({value:`${ae.key}-desc`,label:`${E} (Oldest-Youngest)`},{value:`${ae.key}-asc`,label:`${E} (Youngest-Oldest)`}):se.push({value:`${ae.key}-asc`,label:`${E} (A-Z)`},{value:`${ae.key}-desc`,label:`${E} (Z-A)`})}),se},[]),Y=B.useCallback((te,V)=>V?[...te].sort((se,ae)=>{const E=se[V.key],X=ae[V.key];if(E==null&&X==null)return 0;if(E==null)return 1;if(X==null)return-1;const de=Number(E),ue=Number(X);if(!isNaN(de)&&!isNaN(ue))return V.direction==="asc"?de-ue:ue-de;const ee=String(E).toLowerCase(),fe=String(X).toLowerCase(),ve=ee.localeCompare(fe);return V.direction==="asc"?ve:-ve}):te,[]),q=B.useCallback(te=>{if(!te){H(ee=>({...ee,cardSortConfig:null})),ce("Card sorting cleared");return}const[V,se]=te.split("-"),ae={key:V,direction:se};H(ee=>({...ee,cardSortConfig:ae}));const de=c[D.selectedIndex]?.columns.find(ee=>ee.key===V)?.label||V;ce(`Cards sorted by ${de} in ${se==="asc"?"ascending":"descending"} order`)},[c,D.selectedIndex,ce]),oe=B.useCallback(te=>{const ae=c[D.selectedIndex]?.columns.find(X=>X.key===te.key)?.label||te.key,E=te.direction==="asc"?"ascending":"descending";return`${ae} (${E})`},[c,D.selectedIndex]),W=B.useCallback(te=>{const V=c[D.selectedIndex];if(a){const se=D.sortConfig;return!se||se.length===0?te:[...te].sort((ae,E)=>{for(const{key:X,direction:de}of se){let ue=ae[X],ee=E[X];const fe=V?.columns.find(Me=>Me.key===X);if(fe?.cardRenderer?(ue=fe.cardRenderer(ae),ee=fe.cardRenderer(E)):fe?.render&&(ue=fe.render(ae),ee=fe.render(E)),ue==null&&ee==null)continue;if(ue==null)return de==="asc"?-1:1;if(ee==null)return de==="asc"?1:-1;const ve=Number(ue),we=Number(ee);if(!isNaN(ve)&&!isNaN(we)){const Me=ve-we;if(Me!==0)return de==="asc"?Me:-Me;continue}const je=String(ue).toLowerCase(),Ne=String(ee).toLowerCase(),_e=je.localeCompare(Ne);if(_e!==0)return de==="asc"?_e:-_e}return 0})}else return Y(te,k.cardSortConfig)},[a,D.sortConfig,k.cardSortConfig,Y,c,D.selectedIndex]),Z=B.useCallback((te,V)=>{const se=K(te),ae=se[V];if(ae){ae.element.scrollIntoView({block:"nearest",behavior:"smooth"});const E=`Focused on ${ae.label}, ${ae.type} ${V+1} of ${se.length} within card`;ce(E)}},[K,ce]),J=B.useCallback(te=>{N.current[te]?.focus()},[]),le=B.useCallback(()=>{const te=F.current[0];if(!te)return[];const V=['select:not([disabled]):not([aria-hidden="true"])','button:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])'].join(", "),se=te.querySelectorAll(V);return Array.from(se)},[]),ie=B.useCallback(te=>{if(te===0){const V=F.current[0],se=V?.querySelector(".sort-controls-row");if(se){se.setAttribute("tabindex","-1"),se.focus();const E=`Sort controls group with ${le().length} interactive elements. Press Enter or Space to begin navigating controls.`;ce(E)}else V&&V.focus()}else{const V=le(),se=te-1,ae=V[se];if(ae){ae.focus();const E=ae.tagName.toLowerCase()==="select",X=ae.tagName.toLowerCase()==="button",de=E?"dropdown":X?"button":"control",ue=E?". Use Space key to open dropdown":"",ee=`${de} ${se+1} of ${V.length}${ue}`;ce(ee)}}},[le,ce]),he=B.useCallback((te,V)=>{const{key:se}=te,ae=c[D.selectedIndex],E=ae?.data.length||0;if(se==="ArrowLeft"&&te.shiftKey){te.preventDefault(),te.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(se==="ArrowRight"&&te.shiftKey){te.preventDefault(),te.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!k.isCardNavigationActive){switch(se){case"ArrowUp":if(te.preventDefault(),V===0)H(ee=>({...ee,focusArea:"sort-controls",focusedSortControlIndex:0,isSortControlsActive:!1})),ie(0);else{const ee=$(V,"up",E,k.gridColumns);ee!==V&&(H(fe=>({...fe,focusedCardIndex:ee})),R(ee),ce(`Moved to card ${ee+1} of ${E}`))}break;case"ArrowDown":te.preventDefault();const X=$(V,"down",E,k.gridColumns);X!==V&&(H(ee=>({...ee,focusedCardIndex:X})),R(X),ce(`Moved to card ${X+1} of ${E}`));break;case"ArrowLeft":te.preventDefault();const de=$(V,"left",E,k.gridColumns);de!==V?(H(ee=>({...ee,focusedCardIndex:de})),R(de),ce(`Moved to card ${de+1} of ${E}`)):D.selectedIndex>0&&(y({type:"SET_SELECTED_INDEX",payload:D.selectedIndex-1}),H(ee=>({...ee,focusArea:"tabs"})),setTimeout(()=>J(D.selectedIndex-1),0));break;case"ArrowRight":te.preventDefault();const ue=$(V,"right",E,k.gridColumns);ue!==V?(H(ee=>({...ee,focusedCardIndex:ue})),R(ue),ce(`Moved to card ${ue+1} of ${E}`)):D.selectedIndex<c.length-1&&(y({type:"SET_SELECTED_INDEX",payload:D.selectedIndex+1}),H(ee=>({...ee,focusArea:"tabs"})),setTimeout(()=>J(D.selectedIndex+1),0));break;case"Enter":if(ae?.data[V]){te.preventDefault(),H(fe=>({...fe,selectedCardIndex:V}));const ee=K(V);ee.length>0?(H(fe=>({...fe,focusArea:"card",isCardNavigationActive:!0,focusedCardElementIndex:0,cardElements:ee,selectedCardIndex:V})),ce(`Card ${V+1} selected and navigation activated. ${ee.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`)):ce(`Card ${V+1} selected.`)}break;case" ":if(ae?.data[V]){te.preventDefault(),H(fe=>({...fe,selectedCardIndex:fe.selectedCardIndex===V?-1:V}));const ee=k.selectedCardIndex===V;ce(`Card ${V+1} ${ee?"deselected":"selected"}.`)}break}return}switch(se){case"ArrowUp":case"ArrowLeft":te.preventDefault();const X=Math.max(0,k.focusedCardElementIndex-1);H(fe=>({...fe,focusedCardElementIndex:X})),Z(V,X);break;case"ArrowDown":case"ArrowRight":te.preventDefault();const de=Math.min(k.cardElements.length-1,k.focusedCardElementIndex+1);H(fe=>({...fe,focusedCardElementIndex:de})),Z(V,de);break;case"Enter":te.preventDefault();const ue=k.cardElements[k.focusedCardElementIndex];ue&&(ue.element.click(),ce(`Activated ${ue.label}`));break;case" ":te.preventDefault();const ee=k.cardElements[k.focusedCardElementIndex];if(ee){const fe=new MouseEvent("dblclick",{bubbles:!0});ee.element.dispatchEvent(fe),ce(`Double-clicked ${ee.label}`)}break;case"Escape":te.preventDefault(),H(fe=>({...fe,focusArea:"cards",isCardNavigationActive:!1,focusedCardElementIndex:0,cardElements:[]})),setTimeout(()=>R(V),0),ce("Exited card navigation, returned to card level");break;case"Home":te.preventDefault(),k.cardElements.length>0&&(H(fe=>({...fe,focusedCardElementIndex:0})),Z(V,0));break;case"End":if(te.preventDefault(),k.cardElements.length>0){const fe=k.cardElements.length-1;H(ve=>({...ve,focusedCardElementIndex:fe})),Z(V,fe)}break}},[k,D.selectedIndex,c,U,R,J,H,K,Z,ce]),ye=B.useCallback(te=>{const V=N.current[te],se=V?.parentElement;if(!V||!se){console.log("Tab or container not found for mobile scroll");return}const ae=V.getBoundingClientRect(),E=se.getBoundingClientRect();ae.left>=E.left&&ae.right<=E.right||(console.log("Tab not visible, scrolling into view (mobile)"),V.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[]),ke=B.useCallback((te,V)=>{if(w!=="cards")return;const{key:se}=te;switch(se){case"ArrowLeft":te.preventDefault();const ae=V>0?V-1:c.length-1;I(ae),H(ue=>({...ue,focusedTabIndex:ae})),N.current[ae]?.focus(),ye(ae);break;case"ArrowRight":te.preventDefault();const E=V<c.length-1?V+1:0;I(E),H(ue=>({...ue,focusedTabIndex:E})),N.current[E]?.focus(),ye(E);break;case"ArrowDown":te.preventDefault();const X=c[D.selectedIndex];X&&X.columns&&X.columns.length>0?(H(ue=>({...ue,focusArea:"sort-controls",focusedSortControlIndex:0})),ie(0)):(H(ue=>({...ue,focusArea:"cards",focusedCardIndex:0})),R(0));break;case"Home":te.preventDefault(),I(0),H(ue=>({...ue,focusedTabIndex:0})),N.current[0]?.focus(),ye(0);break;case"End":te.preventDefault();const de=c.length-1;I(de),H(ue=>({...ue,focusedTabIndex:de})),N.current[de]?.focus(),ye(de);break;case"Enter":case" ":te.preventDefault(),I(V);break}},[c.length,I,w,R,H,ye]),Te=B.useCallback((te,V)=>{if(w!=="cards")return;const{key:se}=te,ae=c[D.selectedIndex];if(V===0&&!k.isSortControlsActive){switch(se){case"ArrowUp":te.preventDefault(),H(X=>({...X,focusArea:"tabs",isSortControlsActive:!1})),J(D.selectedIndex);break;case"ArrowDown":te.preventDefault(),ae?.data&&ae.data.length>0&&(H(X=>({...X,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),R(0));break;case"Enter":case" ":te.preventDefault();const E=le();if(E.length>0){H(de=>({...de,isSortControlsActive:!0,focusedSortControlIndex:1})),ie(1);const X=`Entered sort controls navigation mode. ${E.length} controls available. Use arrow keys to navigate between controls.`;ce(X)}break;case"Escape":te.preventDefault(),H(X=>({...X,isSortControlsActive:!1,focusArea:"tabs"})),J(D.selectedIndex);break}return}if(k.isSortControlsActive){const X=le().length;switch(se){case"ArrowLeft":te.preventDefault();const de=k.focusedSortControlIndex>1?k.focusedSortControlIndex-1:X;H(ee=>({...ee,focusedSortControlIndex:de})),ie(de);break;case"ArrowRight":te.preventDefault();const ue=k.focusedSortControlIndex<X?k.focusedSortControlIndex+1:1;H(ee=>({...ee,focusedSortControlIndex:ue})),ie(ue);break;case"ArrowDown":if(te.preventDefault(),k.isSortControlsActive){const ee=k.focusedSortControlIndex<X?k.focusedSortControlIndex+1:1;H(fe=>({...fe,focusedSortControlIndex:ee})),ie(ee)}else ae?.data&&ae.data.length>0&&(H(ee=>({...ee,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),R(0));break;case"ArrowUp":te.preventDefault(),H(ee=>({...ee,isSortControlsActive:!1,focusArea:"sort-controls"})),ie(0);break;case"Escape":te.preventDefault(),H(ee=>({...ee,isSortControlsActive:!1,focusArea:"sort-controls",focusedSortControlIndex:0})),ie(0);break}}},[w,c,D.selectedIndex,k.isSortControlsActive,k.focusedSortControlIndex,ie,J,R,H,ce]);if(w==="cards"){const te=c[D.selectedIndex];return o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${T||""}`,children:[o.jsxs("div",{className:"aria-tabs-datagrid-adaptive__header",children:[o.jsx("div",{role:"tablist","aria-label":g,"aria-describedby":`${x||""} ${h?`${h}-navigation-help`:""}`.trim(),"aria-orientation":m,className:"aria-tabs-datagrid__tabs",children:c.map((V,se)=>{const ae=se===D.selectedIndex,E=V.disabled||P;return o.jsxs("button",{role:"tab",id:`tab-${V.id}`,"aria-controls":`panel-${V.id}`,"aria-selected":ae,"aria-disabled":E,tabIndex:ae?0:-1,ref:X=>{N.current[se]=X},onClick:()=>I(se),onKeyDown:X=>ke(X,se),disabled:E,className:["aria-tabs-datagrid__tab",ae?"aria-tabs-datagrid__tab--selected":"",E?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[o.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:V.label}),D.tabLoadingStates[se]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),D.tabErrors[se]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},V.id)})}),i&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions",children:i})]}),te&&te.columns&&o.jsx(o.Fragment,{children:a?o.jsx(mu,{sortConfig:D.sortConfig||[],columns:te.columns.map(V=>({key:V.key,label:V.label})),onSortChange:V=>{y({type:"SET_SORT",payload:V})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls"}):o.jsx("div",{className:"aria-tabs-datagrid-adaptive__sort-controls",role:"region","aria-label":"Sort controls",tabIndex:k.focusArea==="sort-controls"?0:-1,ref:V=>{F.current[0]=V},onKeyDown:V=>Te(V,0),children:o.jsxs("div",{className:"sort-controls-row",children:[o.jsxs("div",{className:"sort-select-container",children:[o.jsx("label",{htmlFor:`card-sort-${te.id}`,className:"sort-label",children:"Sort cards by"}),o.jsx(Cr,{id:`card-sort-${te.id}`,name:`card-sort-${te.id}`,value:k.cardSortConfig?`${k.cardSortConfig.key}-${k.cardSortConfig.direction}`:"",onChange:V=>q(V.target.value),className:"sort-select",children:re(te.columns).map(V=>o.jsx("option",{value:V.value,children:V.label},V.value))})]}),k.cardSortConfig&&o.jsxs("div",{className:"sort-indicator",role:"status","aria-live":"polite",children:[o.jsxs("span",{className:"sort-indicator-text",children:["Sorted by ",oe(k.cardSortConfig)]}),o.jsx(nt,{variant:"secondary",size:"small",onClick:()=>q(""),"aria-label":"Clear card sorting",className:"sort-clear-button",children:"Clear"})]})]})})}),o.jsx("div",{ref:L,className:"aria-tabs-datagrid-adaptive__cards",role:"grid","aria-label":`${te?.label||"Data"} cards in ${k.gridRows} rows and ${k.gridColumns} columns`,"aria-rowcount":k.gridRows,"aria-colcount":k.gridColumns,id:`panel-${te?.id}`,"aria-labelledby":`tab-${te?.id}`,children:W(te?.data||[]).map((V,se)=>{const ae=k.selectedCardIndex===se,E=k.focusedCardIndex===se&&k.focusArea==="cards",X=k.focusedCardIndex===se&&k.focusArea==="card"&&k.isCardNavigationActive,de=se===0&&k.focusArea!=="cards",ue=E||de,ee=O(se,k.gridColumns);if(n.cardTemplate){const we=n.cardTemplate(V,te.columns);return o.jsx("div",{role:"row","aria-rowindex":ee.row+1,className:"aria-tabs-datagrid-adaptive__row",children:o.jsx("div",{ref:je=>{A.current[se]=je},className:["aria-tabs-datagrid-adaptive__card-wrapper",ae?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",E?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",X?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":ee.col+1,"aria-selected":ae,"aria-expanded":X,"aria-description":X?`Card navigation active. ${k.cardElements.length} interactive elements available.`:void 0,tabIndex:ue?0:-1,onClick:()=>{H(je=>({...je,selectedCardIndex:je.selectedCardIndex===se?-1:se})),U(V)},onKeyDown:je=>he(je,se),onFocus:()=>{H(je=>je.focusedCardIndex!==se||je.focusArea!=="cards"?{...je,focusedCardIndex:se,focusArea:"cards"}:je)},children:we})},`card-${se}`)}const fe=ly(V,te.columns,M,_),ve=[fe.className||"",ae?"aria-tabs-datagrid-adaptive__card--selected":"",E?"aria-tabs-datagrid-adaptive__card--focused":"",X?"aria-tabs-datagrid-adaptive__card--card-navigation":""].filter(Boolean).join(" ");return o.jsx("div",{role:"row","aria-rowindex":ee.row+1,className:"aria-tabs-datagrid-adaptive__row",children:o.jsx("div",{className:["aria-tabs-datagrid-adaptive__card-wrapper",ae?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",E?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",X?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":ee.col+1,"aria-selected":ae,"aria-expanded":X,onKeyDown:we=>{we.key==="Enter"&&(we.preventDefault(),H(je=>({...je,selectedCardIndex:se}))),he(we,se)},children:o.jsx(ks,{...fe,ref:we=>{A.current[se]=we},className:ve,"aria-label":`${fe["aria-label"]||fe.heading}. ${X?`Card navigation active with ${k.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.`:"Press Enter to navigate within card elements."}`,tabIndex:ue?0:-1,onClick:()=>{H(we=>({...we,selectedCardIndex:we.selectedCardIndex===se?-1:se})),U(V)},onKeyDown:we=>he(we,se),onFocus:()=>{k.isCardNavigationActive||H(we=>we.focusedCardIndex!==se||we.focusArea!=="cards"?{...we,focusedCardIndex:se,focusArea:"cards",focusedCardElementIndex:0,cardElements:[]}:we)}})})},`card-${se}`)})}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s}),o.jsx("div",{ref:ne,className:"aria-tabs-datagrid-adaptive__announcements","aria-hidden":"true",style:{position:"fixed",top:"-1px",left:"-1px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0,padding:0,margin:0}})]})}return w==="hybrid"?o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${T||""}`,children:[i&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:i}),o.jsx(ti,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:x,orientation:m,id:h,disabled:P,selectedIndex:f,onTabChange:p,className:"aria-tabs-datagrid-adaptive__table--hybrid",actions:l,forceActionsAbove:u,...C}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s})]}):o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${T||""}`,children:[i&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:i}),o.jsx(ti,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:x,orientation:m,id:h,disabled:P,selectedIndex:f,onTabChange:p,actions:l,forceActionsAbove:u,...C}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s})]})},wu=t=>{const e=Ts.find(n=>n.value===t);return e?e.icon:null},cy={ecommerce:{name:"E-commerce",description:"Product catalogs with pricing, inventory, and ratings",dataConfig:{dataComparator:(t,e)=>t.id===e.id,filterFunction:(t,e)=>e?t.filter(n=>{if(e.priceRange){const[r,a]=e.priceRange,i=n.discountedPrice||n.price;if(i<r||i>a)return!1}return!(e.categories&&e.categories.length>0&&!e.categories.includes(n.category)||e.inStock!==void 0&&n.inStock!==e.inStock||e.minRating!==void 0&&n.rating<e.minRating||e.tags&&e.tags.length>0&&!e.tags.some(r=>n.tags.includes(r)))}):t,booleanRenderer:t=>wu(t),getDataId:t=>`ecommerce-${t.id}`},createTabs:t=>ri(t,[{id:"all-products",label:"All Products",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Price",render:n=>n.discountedPrice?`$${n.price.toFixed(2)} â†’ $${n.discountedPrice.toFixed(2)}`:`$${n.price.toFixed(2)}`},{key:"inStock",label:"Availability"},{key:"category",label:"Category"},{key:"rating",label:"Rating",render:n=>`${n.rating}/5 (${n.reviews} reviews)`}],ariaLabel:"All Products Grid",ariaDescription:"Complete product catalog with pricing and availability"},{id:"on-sale",label:"On Sale",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Original Price",render:n=>`$${n.price.toFixed(2)}`},{key:"discountedPrice",label:"Sale Price",render:n=>`$${n.discountedPrice?.toFixed(2)||"N/A"}`},{key:"discount",label:"Discount",render:n=>n.discountedPrice?`${((n.price-n.discountedPrice)/n.price*100).toFixed(0)}% OFF`:"N/A"}],filter:n=>n.filter(r=>r.discountedPrice!==void 0),ariaLabel:"Sale Products Grid",ariaDescription:"Products currently on sale with discounted pricing"},{id:"high-rated",label:"Top Rated",columns:[{key:"name",label:"Product Name"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.rating>=4),sortConfig:[{key:"rating",direction:"desc"}],ariaLabel:"Top Rated Products Grid",ariaDescription:"Highest rated products with 4+ star ratings"}])},financial:{name:"Financial",description:"Transaction data with amounts, categories, and statuses",dataConfig:{dataComparator:(t,e)=>t.id===e.id,filterFunction:(t,e)=>e?t.filter(n=>{if(e.dateRange){const[r,a]=e.dateRange;if(n.date<r||n.date>a)return!1}if(e.amountRange){const[r,a]=e.amountRange;if(Math.abs(n.amount)<r||Math.abs(n.amount)>a)return!1}return!(e.types&&e.types.length>0&&!e.types.includes(n.type)||e.categories&&e.categories.length>0&&!e.categories.includes(n.category)||e.pending!==void 0&&n.pending!==e.pending)}):t,booleanRenderer:t=>wu(t),getDataId:t=>`financial-${t.id}`},createTabs:t=>ri(t,[{id:"all-transactions",label:"All Transactions",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"},{key:"pending",label:"Status"}],sortConfig:[{key:"date",direction:"desc"}],ariaLabel:"All Transactions Grid",ariaDescription:"Complete transaction history with amounts and categories"},{id:"credits",label:"Credits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`+$${n.amount.toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="credit"),ariaLabel:"Credit Transactions Grid",ariaDescription:"Incoming payments and credits only"},{id:"debits",label:"Debits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`-$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="debit"),ariaLabel:"Debit Transactions Grid",ariaDescription:"Outgoing payments and charges only"},{id:"pending",label:"Pending",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"type",label:"Type"}],filter:n=>n.filter(r=>r.pending),ariaLabel:"Pending Transactions Grid",ariaDescription:"Transactions awaiting processing"}])}},Su=(t,e)=>{const n=cy[t];return{dataConfig:n.dataConfig,tabPanels:n.createTabs(e)}},ku=[{name:"Sarah Johnson",age:34,ews_data:{respiratory_rate_bpm:16,sp02:98,temperature:36.8,systolic_bp:140,heart_rate:82,avpu:"alert"},ews_score:3,ward_name:"Cardiology",room_name:"Room A",bed_name:"A-1",bed_type:"bed",admin_note:"Hypertension monitoring",pathway:"Standard",speciality:"Cardiology",consultant:"Dr. Smith",local_authority:"NHS Trust",early_discharge_notification:"not_required",needs_based_assessment:!1,medically_optimised:!0,criteria_to_reside:!0,date_medically_optimised:"2024-01-15",anticipated_discharge_date:"2024-01-18",dru_suitability:!1,optica_planned_discharge_date:"2024-01-18",optica_date_confirmed:"2024-01-16",dsum:null,medications_tta:"None required",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!1,initial_therapy_contact:"",equipment:"None",district_nurse_referral:!1},{name:"Michael Chen",age:67,ews_data:{respiratory_rate_bpm:20,sp02:94,temperature:37.2,systolic_bp:160,heart_rate:95,avpu:"alert"},ews_score:7,ward_name:"Surgery",room_name:"Room B",bed_name:"B-3",bed_type:"bed",admin_note:"Post-operative monitoring",pathway:"Surgical",speciality:"General Surgery",consultant:"Dr. Johnson",local_authority:"NHS Trust",early_discharge_notification:"due",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!0,date_medically_optimised:"2024-01-17",anticipated_discharge_date:"2024-01-20",dru_suitability:!0,optica_planned_discharge_date:"2024-01-20",optica_date_confirmed:"2024-01-16",dsum:"Complex discharge",medications_tta:"Pain management",transport_booking:!0,transport_status:"In Progress",transport_date:"2024-01-20",transport_mobility:"Wheelchair",fast_track:!1,initial_therapy_contact:"2024-01-17",equipment:"Walking frame",district_nurse_referral:!0},{name:"Emma Thompson",age:28,ews_data:{respiratory_rate_bpm:24,sp02:90,temperature:38.5,systolic_bp:110,heart_rate:105,avpu:"alert"},ews_score:5,ward_name:"Respiratory",room_name:"Room C",bed_name:"C-2",bed_type:"bed",admin_note:"Pneumonia treatment",pathway:"Respiratory",speciality:"Respiratory Medicine",consultant:"Dr. Williams",local_authority:"NHS Trust",early_discharge_notification:"overdue",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!1,date_medically_optimised:"",anticipated_discharge_date:"2024-01-22",dru_suitability:!1,optica_planned_discharge_date:"2024-01-22",optica_date_confirmed:"",dsum:null,medications_tta:"Antibiotics",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!0,initial_therapy_contact:"",equipment:"Oxygen",district_nurse_referral:!1}],uy=[{id:"appt-001",appointment_time:"2024-01-18T09:00:00Z",patient_name:"Sarah Johnson",appointment_type:"Cardiology Consultation",consultant:"Dr. Smith",location:"Clinic Room 3",duration:30,status:"pending"},{id:"appt-002",appointment_time:"2024-01-18T10:30:00Z",patient_name:"Michael Davis",appointment_type:"Post-op Follow-up",consultant:"Dr. Johnson",location:"Surgery Ward",duration:15,status:"active"},{id:"appt-003",appointment_time:"2024-01-18T14:00:00Z",patient_name:"Emma Thompson",appointment_type:"Respiratory Assessment",consultant:"Dr. Wilson",location:"Emergency Department",duration:45,status:"pending"}],dy=[{id:"med-001",medication:"Amlodipine",dose:"5mg",frequency:"Once daily",route:"Oral",next_due:"2024-01-18T08:00:00Z",prescriber:"Dr. Smith",patient_name:"Sarah Johnson",allergies:null,priority:"medium"},{id:"med-002",medication:"Morphine",dose:"10mg",frequency:"Every 4 hours",route:"IV",next_due:"2024-01-18T10:00:00Z",prescriber:"Dr. Johnson",patient_name:"Michael Davis",allergies:"Codeine allergy",priority:"high"},{id:"med-003",medication:"Salbutamol",dose:"2 puffs",frequency:"As needed",route:"Inhaled",next_due:"2024-01-18T12:00:00Z",prescriber:"Dr. Wilson",patient_name:"Emma Thompson",allergies:null,priority:"high"}],fy=[{id:"vitals-001",patient_name:"Sarah Johnson",recorded_time:"2024-01-18T07:30:00Z",temperature:36.8,blood_pressure:"140/90",heart_rate:82,respiratory_rate:16,oxygen_saturation:98,ews_score:3,priority:"medium"},{id:"vitals-002",patient_name:"Michael Davis",recorded_time:"2024-01-18T08:15:00Z",temperature:37.2,blood_pressure:"130/85",heart_rate:98,respiratory_rate:20,oxygen_saturation:95,ews_score:7,priority:"high"},{id:"vitals-003",patient_name:"Emma Thompson",recorded_time:"2024-01-18T09:00:00Z",temperature:38.5,blood_pressure:"110/70",heart_rate:105,respiratory_rate:24,oxygen_saturation:90,ews_score:9,priority:"high"}],Cu=[{id:"PROD001",name:"Wireless Headphones",price:199.99,discountedPrice:149.99,inStock:!0,category:"Electronics",rating:4.5,reviews:1247,tags:["wireless","bluetooth","premium"]},{id:"PROD002",name:"Running Shoes",price:129.99,inStock:!0,category:"Sports",rating:4.8,reviews:892,tags:["running","athletic","comfortable"]},{id:"PROD003",name:"Coffee Maker",price:89.99,discountedPrice:59.99,inStock:!1,category:"Kitchen",rating:4.2,reviews:456,tags:["kitchen","coffee","appliance"]},{id:"PROD004",name:"Smartphone Case",price:24.99,inStock:!0,category:"Accessories",rating:4,reviews:234,tags:["protection","mobile","durable"]}],Tu=[{id:"TXN001",date:new Date("2024-01-15"),amount:2500,type:"credit",category:"Salary",description:"Monthly salary payment",accountId:"ACC001",pending:!1,recurring:!0},{id:"TXN002",date:new Date("2024-01-14"),amount:89.5,type:"debit",category:"Groceries",description:"Supermarket shopping",accountId:"ACC001",pending:!1,recurring:!1},{id:"TXN003",date:new Date("2024-01-16"),amount:1200,type:"debit",category:"Rent",description:"Monthly rent payment",accountId:"ACC001",pending:!0,recurring:!0},{id:"TXN004",date:new Date("2024-01-13"),amount:150,type:"credit",category:"Refund",description:"Product return refund",accountId:"ACC001",pending:!1,recurring:!1}],Nu=[{id:"LEAD001",companyName:"Tech Solutions Inc",contactPerson:"John Smith",email:"john@techsolutions.com",status:"qualified",value:5e4,lastContact:new Date("2024-01-15"),source:"Website",isHotLead:!0},{id:"LEAD002",companyName:"Global Industries",contactPerson:"Maria Garcia",email:"maria@globalind.com",status:"contacted",value:25e3,lastContact:new Date("2024-01-14"),source:"Referral",isHotLead:!1},{id:"LEAD003",companyName:"StartupXYZ",contactPerson:"Alex Johnson",email:"alex@startupxyz.com",status:"new",value:15e3,lastContact:new Date("2024-01-16"),source:"Cold Call",isHotLead:!0}],hy={dataComparator:(t,e)=>t.id===e.id,filterFunction:(t,e)=>e?t.filter(n=>!(e.status&&!e.status.includes(n.status)||e.minValue&&n.value<e.minValue||e.hotLeadsOnly&&!n.isHotLead)):t,booleanRenderer:t=>o.jsx("span",{style:{color:t?"#dc2626":"#6b7280",fontWeight:t?"bold":"normal"},children:t?"ðŸ”¥ Hot Lead":"ðŸ“‹ Standard"}),getDataId:t=>`business-${t.id}`},my=()=>[{id:"patients",label:"Patients",data:ku,columns:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Records",ariaDescription:"Healthcare patient management with EWS monitoring",cardTemplate:(t,e)=>o.jsx(Ns,{data:t,columns:e,onSelect:n=>console.log("Selected patient:",n),onAction:(n,r)=>console.log("Patient action:",n,r),priority:t.ews_score>=7?"high":t.ews_score>=3?"medium":"low"})},{id:"appointments",label:"Appointments",data:uy,columns:[{key:"appointment_time",label:"Time"},{key:"patient_name",label:"Patient"},{key:"appointment_type",label:"Type"},{key:"consultant",label:"Consultant"}],ariaLabel:"Patient Appointments",ariaDescription:"Scheduled appointments and consultations",cardTemplate:(t,e)=>o.jsx(js,{data:t,columns:e,onSelect:n=>console.log("Selected appointment:",n),onAction:(n,r)=>console.log("Appointment action:",n,r),status:t.status})},{id:"medications",label:"Medications",data:dy,columns:[{key:"medication",label:"Medication"},{key:"dose",label:"Dose"},{key:"frequency",label:"Frequency"},{key:"next_due",label:"Next Due"}],ariaLabel:"Patient Medications",ariaDescription:"Medication administration and scheduling",cardTemplate:(t,e)=>o.jsx(Ds,{data:t,columns:e,onSelect:n=>console.log("Selected medication:",n),onAction:(n,r)=>console.log("Medication action:",n,r),priority:t.priority})},{id:"vitals",label:"Vital Signs",data:fy,columns:[{key:"patient_name",label:"Patient"},{key:"recorded_time",label:"Time"},{key:"temperature",label:"Temperature"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Vital Signs",ariaDescription:"Patient vital signs monitoring and EWS scores",cardTemplate:(t,e)=>o.jsx(Ms,{data:t,columns:e,onSelect:n=>console.log("Selected vitals:",n),onAction:(n,r)=>console.log("Vitals action:",n,r),priority:t.ews_score>=7?"high":t.ews_score>=3?"medium":"low"})}],py=()=>{const[t,e]=B.useState("healthcare"),n=B.useMemo(()=>({healthcare:{title:"Healthcare Workflow Management",description:"Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals",dataConfig:pu,tabPanels:my(),data:ku},ecommerce:{title:"E-commerce Product Catalog",description:"Product management with pricing and inventory",...Su("ecommerce",Cu),data:Cu},financial:{title:"Financial Transaction Dashboard",description:"Banking and financial data management",...Su("financial",Tu),data:Tu},business:{title:"Sales Lead Management",description:"Custom CRM configuration with business logic",dataConfig:hy,tabPanels:ri(Nu,[{id:"all-leads",label:"All Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"status",label:"Status"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"isHotLead",label:"Priority"}],ariaLabel:"All Sales Leads Grid",ariaDescription:"Complete sales pipeline with lead information"},{id:"hot-leads",label:"Hot Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"lastContact",label:"Last Contact",render:a=>a.lastContact.toLocaleDateString()}],filter:a=>a.filter(i=>i.isHotLead),sortConfig:[{key:"value",direction:"desc"}],ariaLabel:"Hot Leads Grid",ariaDescription:"High-priority leads requiring immediate attention"},{id:"pipeline",label:"Active Pipeline",columns:[{key:"companyName",label:"Company"},{key:"status",label:"Status"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"source",label:"Source"}],filter:a=>a.filter(i=>["contacted","qualified"].includes(i.status)),ariaLabel:"Active Pipeline Grid",ariaDescription:"Leads currently in the sales pipeline"}]),data:Nu}}),[]),r=n[t];return o.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"AriaTabsDataGrid - Comprehensive Demo"}),o.jsx("p",{style:{fontSize:"1.1rem",color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:"This demo showcases the component's versatility across different domains: healthcare, e-commerce, financial services, and custom business applications. Each configuration demonstrates domain-specific data operations, custom renderers, and specialized filtering logic."}),o.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:Object.keys(n).map(a=>o.jsx(nt,{variant:t===a?"primary":"secondary",onClick:()=>e(a),style:{textTransform:"capitalize"},children:a},a))}),o.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem"},children:[o.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"0.5rem",color:"#1e293b"},children:r.title}),o.jsx("p",{style:{color:"#64748b",marginBottom:"1rem"},children:r.description}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.9rem"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Data Records:"})," ",r.data.length]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Tab Panels:"})," ",r.tabPanels.length]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Features:"})," ",["Row Selection","Custom Filtering","Domain-Specific Renderers","Keyboard Navigation","ARIA Compliance"].join(", ")]})]})]})]}),o.jsx(ti,{dataConfig:r.dataConfig,tabPanels:r.tabPanels,ariaLabel:`${r.title} Data Grid`,ariaDescription:`Interactive data grid for ${r.description.toLowerCase()}`}),o.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f1f5f9",borderRadius:"0.5rem",border:"1px solid #cbd5e1"},children:[o.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#334155"},children:"Implementation Details"}),o.jsxs("div",{style:{display:"grid",gap:"1rem",fontSize:"0.9rem"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Current Mode:"})," ",t," configuration"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Data Operations:"})," Custom comparator, filter function, and boolean renderer"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Architecture:"})," Generic core with domain-specific plugins and factory helpers"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"State Management:"})," Global row selection with data-object persistence"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Accessibility:"})," Full ARIA support with dynamic labels and descriptions"]})]})]})]})},Is=t=>o.jsx(Zi,{...t}),gy=({children:t,pageTitle:e,pageHeadingProps:n,columnWidth:r="two-thirds",mainWrapperSize:a,skipLinkProps:i,headerProps:s,footerProps:l,service:u,navigation:c,search:d,account:f,organisation:p,logo:g,className:x,...m})=>{const h={service:u,navigation:c,search:d,account:f,organisation:p,logo:g,...s};return o.jsxs(o.Fragment,{children:[o.jsx(Ss,{...i}),o.jsx(Ba,{...h}),o.jsx(Is,{className:x,...m,children:o.jsx(Ji,{size:a,children:o.jsx(pn,{children:o.jsxs(Zn,{width:r,children:[e&&o.jsx(Ft,{size:"l",...n,children:e}),t]})})})}),o.jsx(es,{...l})]})},by=({children:t,pageTitle:e,pageHeadingProps:n,columnWidth:r="two-thirds",mainWrapperSize:a="small",skipLinkProps:i,headerProps:s,footerProps:l,backLinkProps:u,serviceName:c,serviceHref:d,logo:f,className:p,...g})=>{const x={service:{text:c,href:d},logo:f,navigation:void 0,search:void 0,account:void 0,...s};return o.jsxs(o.Fragment,{children:[o.jsx(Ss,{...i}),o.jsx(Ba,{...x}),o.jsxs(Is,{className:p,...g,children:[u&&o.jsx($a,{...u}),o.jsx(Ji,{size:a,children:o.jsx(pn,{children:o.jsxs(Zn,{width:r,children:[e&&o.jsx(Ft,{size:"l",...n,children:e}),t]})})})]}),o.jsx(es,{...l})]})},ju=({text:t="Next",html:e,href:n="#",className:r,element:a="a",onClick:i,...s})=>{const l=be("nhsuk-back-link",r),u=be("nhsuk-back-link__link"),c=()=>o.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[e?o.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t,o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:o.jsx("path",{d:"M15.5 12c0 .3-.1.5-.3.7l-5 5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4L13.1 12 8.8 7.7c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l5 5c.2.2.3.4.3.7z"})})]});return o.jsx("div",{className:l,children:a==="button"?o.jsx("button",{className:u,type:"button",onClick:i,...s,children:c()}):o.jsx("a",{className:u,href:n,...s,children:c()})})};ju.displayName="ForwardLink";const ir=Object.freeze({small:320,smallMax:767,medium:768,large:1025,xlarge:1200,xxlarge:1440});function Du(){return typeof window>"u"?ir.small:window.innerWidth||document.documentElement.clientWidth||0}function Ps(){const[t,e]=G.useState(Du());G.useEffect(()=>{if(typeof window>"u")return;const i=()=>e(Du());return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const n=G.useCallback(i=>t>=ir[i],[t]),r=G.useCallback(i=>t<ir[i],[t]),a=G.useCallback((i,s)=>t>=ir[i]&&t<ir[s],[t]);return{width:t,up:n,down:r,between:a,values:ir}}function _y(t){const{width:e,values:n}=Ps();let r=t.base;const a=["small","medium","large","xlarge","xxlarge"];for(const i of a){const s=n[i];e>=s&&t[i]!==void 0&&(r=t[i])}return r}function Mu(t={}){const{enabled:e=!0,paramSelected:n="nsv",paramDrill:r="nsvDrill"}=t,[a,i]=G.useState(()=>typeof window>"u"||!e?void 0:new URLSearchParams(window.location.search).get(n)),[s,l]=G.useState(()=>typeof window>"u"||!e?!1:new URLSearchParams(window.location.search).get(r)==="1");return G.useEffect(()=>{if(!e||typeof window>"u")return;const u=new URLSearchParams(window.location.search);a?u.set(n,String(a)):u.delete(n),u.set(r,s?"1":"0");const c=`${window.location.pathname}?${u.toString()}${window.location.hash}`;window.history.replaceState(null,"",c)},[a,s,e,n,r]),{selectedId:a,setSelectedId:i,drilledIn:s,setDrilledIn:l}}const yy=({className:t})=>o.jsx("svg",{className:t,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{fill:"currentColor",d:"M10.7 3.3a1 1 0 0 1 0 1.4L7.41 8l3.3 3.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 0Z"})}),xy=({className:t})=>o.jsx("svg",{className:t,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{fill:"currentColor",d:"M5.3 12.7a1 1 0 0 1 0-1.4L8.59 8l-3.3-3.3a1 1 0 0 1 1.42-1.4l4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.42 0Z"})});function $u(t){const{items:e,selectedId:n,defaultSelectedId:r,onSelectionChange:a,renderItemContent:i,renderContent:s,renderSecondaryContent:l,forceLayout:u,animated:c=!0,backLabel:d="Back",nextLabel:f="Next",isLoading:p=!1,emptyState:g,a11y:x,className:m,getId:h=me=>me.id,orientation:P="vertical",autoEnableThirdColumn:T=!0,onDrillChange:C,navigationInstructions:w="Use arrow keys to navigate, Enter to open.",initialFocus:j="first",skipFocusOnSelect:S=!1,skipAnnouncements:M=!1,onFocusChange:_,syncUrl:v=!1,urlParamSelected:D="nsv",urlParamDrill:y="nsvDrill",urlSyncDebounceMs:N=0,lazySecondary:A=!1,navFooter:F,collapsibleNav:L=!1,navInitiallyCollapsed:k=!1,onNavCollapseChange:H,collapseToggleLabelShow:Q="Show navigation",collapseToggleLabelHide:O="Hide navigation",collapseToggleIconShow:z,collapseToggleIconHide:$,persistNavCollapsed:I,navCollapsedStorageKey:U="nsvCollapsed",navCollapsedUrlParam:R="nsvCollapsed",autoContentHeader:K,contentHeaderLevel:ne=2,renderContentHeader:ce,contentSubheader:re,secondarySubheader:Y}=t,{up:q}=Ps(),[oe,W]=G.useState(!1);G.useEffect(()=>{W(!0)},[]);const Z=oe&&q("medium"),J=oe&&q("xlarge");let le;u?le=u:Z?le="two-column":le="list",!u&&T&&l&&J&&(le="three-column");const ie=Mu({enabled:v,paramSelected:D,paramDrill:y}),[he,ye]=G.useState(()=>ie.selectedId!==void 0?ie.selectedId:r),ke=n!==void 0?n:he,Te=e.find(me=>h(me)===ke),[te,V]=G.useState(void 0);G.useEffect(()=>{if(ke===void 0)return;V(ke);const me=setTimeout(()=>V(void 0),220);return()=>clearTimeout(me)},[ke]);const se=G.useRef(null),ae=G.useRef(null),E=G.useRef(null),X=G.useRef(null),[de,ue]=G.useState(()=>({contentIndex:0,secondaryIndex:0})),[ee,fe]=G.useState(()=>"nav"),[ve,we]=G.useState(0),je=()=>[X.current,ae.current,E.current].filter(Boolean),Ne=me=>{const xe=je(),ge=Math.max(0,Math.min(me,xe.length-1));xe[ge]?.focus(),we(ge)},_e=G.useCallback(me=>me?Array.from(me.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(ge=>!ge.hasAttribute("disabled")&&ge.tabIndex!==-1):[],[]),Me=G.useCallback(me=>{const xe=_e(ae.current);if(!xe.length){ae.current?.focus();return}const ge=Math.max(0,Math.min(me,xe.length-1)),Ce=xe[ge];Ce.focus(),setTimeout(()=>{document.activeElement!==Ce&&(Ce.focus(),setTimeout(()=>{document.activeElement!==Ce&&Ce.click()},10))},10),ue(Ee=>({...Ee,contentIndex:ge}));const Ge=Ee=>{Ee.key==="Escape"&&(Ee.preventDefault(),Ee.stopPropagation(),ae.current?.focus(),Ce.removeEventListener("keydown",Ge))};xe.forEach(Ee=>{const Re=Ee._escapeHandler;Re&&Ee.removeEventListener("keydown",Re)}),Ce._escapeHandler=Ge,Ce.addEventListener("keydown",Ge)},[_e]),Be=G.useCallback(me=>{const xe=_e(E.current);if(!xe.length){E.current?.focus();return}const ge=Math.max(0,Math.min(me,xe.length-1)),Ce=xe[ge];Ce.focus(),setTimeout(()=>{document.activeElement!==Ce&&(Ce.focus(),setTimeout(()=>{document.activeElement!==Ce&&Ce.click()},10))},10),ue(Ee=>({...Ee,secondaryIndex:ge}));const Ge=Ee=>{Ee.key==="Escape"&&(Ee.preventDefault(),Ee.stopPropagation(),E.current?.focus(),Ce.removeEventListener("keydown",Ge))};xe.forEach(Ee=>{const Re=Ee._escapeHandler;Re&&Ee.removeEventListener("keydown",Re)}),Ce._escapeHandler=Ge,Ce.addEventListener("keydown",Ge)},[_e]),Qe=me=>{if(me.defaultPrevented)return;const xe=me.key,ge=me.target,Ce=!!ct.current&&ct.current.contains(ge),Ge=!!ae.current&&ae.current.contains(ge),Ee=!!E.current&&E.current.contains(ge),Re=!!E.current,wr=ge===X.current||ge===ae.current||ge===E.current,Kn=Ae&&(le==="list"||le==="cards"),Vi=Ge&&!!ge.closest(".nhs-navigation-split-view__header");if(ee==="containers"&&wr){if(xe==="ArrowRight"){me.preventDefault();const De=je(),ze=Math.min(De.length-1,ve+1);Ne(ze);return}if(xe==="ArrowLeft"){me.preventDefault();const De=Math.max(0,ve-1);Ne(De);return}if(xe==="Home"){me.preventDefault(),Ne(0);return}if(xe==="End"){me.preventDefault(),Ne(je().length-1);return}if(xe==="Enter"||xe===" "){if(me.preventDefault(),ge===X.current){if(fe("nav"),ct.current){const De=Array.from(ct.current.querySelectorAll("[data-nav-item]"));(De[Ke>=0?Ke:0]||De[0])?.focus()}}else ge===ae.current?(fe("content"),Me(de.contentIndex)):ge===E.current&&(fe("secondary"),Be(de.secondaryIndex));return}return}if(xe==="Escape"){if(ee==="content"||ee==="secondary"){if(Ge||Ee){if(me.preventDefault(),fe("nav"),ct.current){const ze=Array.from(ct.current.querySelectorAll("[data-nav-item]"))[Ke>=0?Ke:0];setTimeout(()=>ze?.focus(),10)}}else if((ge===ae.current||ge===E.current)&&(me.preventDefault(),fe("nav"),ct.current)){const ze=Array.from(ct.current.querySelectorAll("[data-nav-item]"))[Ke>=0?Ke:0];setTimeout(()=>ze?.focus(),10)}}return}if(xe==="Enter"||xe===" "){if(ge.matches('button, a, input, select, textarea, [role="button"], [role="link"], [role="tab"]'))return;if(ge===ae.current&&ee==="content"){me.preventDefault(),me.stopPropagation(),_e(ae.current).length>0&&setTimeout(()=>{Me(de.contentIndex)},50);return}if(ge===E.current&&ee==="secondary"){me.preventDefault(),me.stopPropagation(),_e(E.current).length>0&&setTimeout(()=>{Be(de.secondaryIndex)},50);return}}if(Kn&&Vi&&!wr&&(xe==="ArrowRight"||xe==="ArrowLeft")){const De=_e(ae.current).filter(ze=>ze.closest(".nhs-navigation-split-view__header"));if(De.length>1){const ze=De.indexOf(ge);if(ze>=0){const xg=(ze+(xe==="ArrowRight"?1:-1)+De.length)%De.length;me.preventDefault(),De[xg].focus();return}}}if(xe==="ArrowRight"){if(Ce||ee==="nav"){me.preventDefault(),fe("content"),setTimeout(()=>ae.current?.focus(),10);return}if(Ge||ee==="content"){Re&&(me.preventDefault(),fe("secondary"),setTimeout(()=>E.current?.focus(),10));return}}if(xe==="ArrowLeft"){if(Ee||ee==="secondary"){me.preventDefault(),fe("content"),setTimeout(()=>ae.current?.focus(),10);return}if(Ge||ee==="content"){if(me.preventDefault(),fe("nav"),ct.current){const ze=Array.from(ct.current.querySelectorAll("[data-nav-item]"))[Ke>=0?Ke:0];setTimeout(()=>ze?.focus(),10)}return}}if(xe==="Home"&&!Ce&&(me.preventDefault(),fe("nav"),ct.current)){const De=Array.from(ct.current.querySelectorAll("[data-nav-item]")),ze=De[Ke>=0?Ke:0]||De[0];setTimeout(()=>ze?.focus(),10)}if(xe==="End"){const De=Re?E.current:ae.current;De&&!De.contains(ge)&&(me.preventDefault(),Re?(fe("secondary"),setTimeout(()=>E.current?.focus(),10)):(fe("content"),setTimeout(()=>ae.current?.focus(),10)))}if(xe==="ArrowDown"||xe==="ArrowUp"){if(ge===ae.current&&xe==="ArrowDown"){me.preventDefault(),_e(ae.current).length>0&&Me(0);return}if(ge===E.current&&xe==="ArrowDown"){me.preventDefault(),_e(E.current).length>0&&Be(0);return}if(Ge){const De=_e(ae.current);if(De.length){me.preventDefault();const ze=xe==="ArrowDown"?1:-1,nn=(de.contentIndex+ze+De.length)%De.length;Me(nn)}}else if(Ee){const De=_e(E.current);if(De.length){me.preventDefault();const ze=xe==="ArrowDown"?1:-1,nn=(de.secondaryIndex+ze+De.length)%De.length;Be(nn)}}}},Ae=!!Te&&(le==="list"||le==="cards"),ht=G.useMemo(()=>K===void 0?{mobile:!0,tablet:!1,desktop:!1}:K===!0?{mobile:!0,tablet:!0,desktop:!0}:K===!1?{mobile:!1,tablet:!1,desktop:!1}:{mobile:K.mobile!==void 0?K.mobile:!0,tablet:K.tablet||!1,desktop:K.desktop||!1},[K]),jn=oe&&q("medium")&&!q("xlarge"),fn=oe&&q("xlarge"),en=!!l,tt=le==="three-column",[st,ja]=G.useState(!1);G.useEffect(()=>{tt&&st&&ja(!1)},[tt,st]),G.useEffect(()=>{st&&!tt&&(fe("secondary"),we(2),setTimeout(()=>{E.current?.focus()},50))},[st,tt]),G.useEffect(()=>{!st&&!tt&&ee==="secondary"&&(fe("content"),we(1),setTimeout(()=>{ae.current?.focus()},50))},[st,tt,ee]);const zl=!!Te&&(Ae&&ht.mobile||!Ae&&jn&&ht.tablet||!Ae&&fn&&ht.desktop)||en&&!tt,G1=`h${ne}`,Ol=Te?G.createElement(G1,{style:{marginLeft:Ae?32:0,marginRight:Ae?32:0}},Te.label):null,_g=Ae?"mobile":jn?"tablet":"desktop",Y1=en&&!tt&&!st,Wl=Ae&&ht.mobile?o.jsx($a,{element:"button",text:d,style:{marginRight:16},onClick:()=>vr(void 0,void 0)}):void 0,Ul=Y1?o.jsx(ju,{element:"button",text:f,onClick:()=>{ja(!0)}}):void 0,Gl=!tt&&st?o.jsx($a,{element:"button",text:d,style:{marginRight:16},onClick:()=>ja(!1)}):void 0,V1=G.useMemo(()=>{if(!zl||!Te)return null;if(ce)return ce({item:Te,detailActive:Ae,context:_g,backLink:Wl,defaultHeading:Ol});const me=Te&&re?typeof re=="function"?re(Te):re:null;return o.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[Gl||Wl,o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:[Ol,me&&o.jsx("div",{className:"nhs-navigation-split-view__subheader",children:me})]})]}),Ul&&o.jsx("div",{style:{marginLeft:"auto"},children:Ul})]})},[zl,Te,ce,Ae,_g,Wl,Gl,Ol,Ul,re]);G.useEffect(()=>{if(!v)return;const me=le==="three-column";let xe=!1;const ge=()=>{xe||(ie.selectedId!==ke&&ie.setSelectedId(ke),ie.drilledIn!==me&&ie.setDrilledIn(me))};if(N&&N>0){const Ce=setTimeout(ge,N);return()=>{xe=!0,clearTimeout(Ce)}}else ge()},[v,ie,ke,le,N]),G.useEffect(()=>{if(!v)return;const me=()=>{const xe=new URLSearchParams(window.location.search),ge=xe.get(D);xe.get(y),ye(ge===null?void 0:ge)};return window.addEventListener("popstate",me),()=>window.removeEventListener("popstate",me)},[v,D,y,u,l]);const Yi=G.useRef(0),hn=G.useRef(null),vr=G.useCallback((me,xe)=>{me!==ke&&(n===void 0&&ye(me),a?.(me,xe))},[n,a,ke]);G.useEffect(()=>{if(!S&&Ae&&ae.current){const me=setTimeout(()=>ae.current?.focus(),30);return()=>clearTimeout(me)}},[Ae,ke,S]);const ct=G.useRef(null),[Ke,Da]=G.useState(()=>j==="first"?0:-1);G.useEffect(()=>{if(Ke<0||!ct.current)return;const xe=Array.from(ct.current.querySelectorAll("[data-nav-item]"))[Ke];if(xe){document.activeElement!==xe&&xe.focus(),Yi.current=Ke;const ge=e[Ke];_?.(ge?h(ge):void 0,ge,Ke)}},[Ke,e,_,h]);const q1=me=>{const xe=P==="vertical"?"ArrowDown":"ArrowRight",ge=P==="vertical"?"ArrowUp":"ArrowLeft";if(me.key==="ArrowRight"&&P==="vertical"){me.preventDefault(),st?(fe("secondary"),setTimeout(()=>{E.current?.focus()},10)):(fe("content"),setTimeout(()=>{ae.current?.focus()},10));return}if(me.key===xe)me.preventDefault(),Da(Ce=>Math.min(e.length-1,Ce+1));else if(me.key===ge)me.preventDefault(),Da(Ce=>Math.max(0,Ce-1));else if(me.key==="Home")me.preventDefault(),Da(0);else if(me.key==="End")me.preventDefault(),Da(e.length-1);else if(me.key==="Enter"||me.key===" "){me.preventDefault();const Ce=e[Ke];Ce&&!Ce.disabled&&vr(h(Ce),Ce)}else if(me.key.length===1&&/[a-z0-9]/i.test(me.key)){hn.current||(hn.current={buffer:"",last:0});const Ce=Date.now(),Ge=700,Ee=me.key.toLowerCase();Ce-hn.current.last>Ge?hn.current.buffer=Ee:hn.current.buffer+=Ee,hn.current.last=Ce;let Re=hn.current.buffer;const wr=Re.split("").every(nn=>nn===Re[0]),Kn=e.map(nn=>String(nn.label||"").toLowerCase());let Vi=0;Ke>=0&&(Vi=(Ke+1)%e.length);let De;const ze=(nn,xg)=>{const vg=e.length;for(let ql=0;ql<vg;ql++){const Xl=(Vi+ql)%vg;if(!e[Xl].disabled&&Kn[Xl].startsWith(nn))return Xl}};wr&&Re.length>1?De=ze(Re[0]):(De=ze(Re),De===void 0&&Re.length>1&&(De=ze(Re[Re.length-1]),De!==void 0&&hn.current&&(hn.current.buffer=Re[Re.length-1]))),De!==void 0&&Da(De)}},X1=G.useMemo(()=>{if(I&&(I==="url"||I==="both")&&typeof window<"u"){const xe=new URLSearchParams(window.location.search).get(R);if(xe==="1")return!0;if(xe==="0")return!1}if(I&&(I==="localStorage"||I==="both")&&typeof window<"u")try{const me=window.localStorage.getItem(U);if(me==="1")return!0;if(me==="0")return!1}catch{}return k},[I,k,U,R]),[tn,K1]=G.useState(X1);G.useEffect(()=>{H?.(tn)},[tn,H]);const Z1=G.useCallback(()=>{Z&&L&&K1(me=>!me)},[Z,L]);G.useEffect(()=>{if(I&&!(typeof window>"u")){if(I==="localStorage"||I==="both")try{window.localStorage.setItem(U,tn?"1":"0")}catch{}if(I==="url"||I==="both"){const me=new URLSearchParams(window.location.search);me.set(R,tn?"1":"0");const xe=`${window.location.pathname}?${me.toString()}${window.location.hash}`;window.history.replaceState(null,"",xe)}}},[tn,I,U,R]);const J1=["nhs-navigation-split-view",c?"nhs-navigation-split-view--animated":"",Ae?"nhs-navigation-split-view--detail-active":"",le==="three-column"?"nhs-navigation-split-view--three-column":"",L&&Z&&tn?"nhs-navigation-split-view--nav-collapsed":"",m].filter(Boolean).join(" "),Yl=G.useRef(null);G.useEffect(()=>{if(!M&&Yl.current){const me=Te?`Selected ${Te.label}`:"Selection cleared";Yl.current.textContent=me}},[Te,M]),G.useEffect(()=>{!Ae&&ke==null&&ct.current&&ct.current.querySelectorAll("[data-nav-item]")[Yi.current]?.focus()},[Ae,ke]);const Dn=le==="three-column",[Vl,Q1]=G.useState(!1);G.useEffect(()=>{Dn&&!Vl&&Q1(!0)},[Dn,Vl]);const yg=G.useRef(Dn);G.useEffect(()=>{yg.current!==Dn&&(C?.(Dn),yg.current=Dn)},[Dn,C]);const ew=()=>{if(le==="cards")return o.jsxs("ul",{className:"nhs-navigation-split-view__cards",role:"listbox","aria-activedescendant":ke?String(ke):void 0,children:[e.map(ge=>{const Ce=h(ge),Ge=Ce===ke;return o.jsx("li",{className:"nhs-navigation-split-view__card-item",role:"option","aria-selected":Ge,children:o.jsxs("button",{id:String(Ce),type:"button",className:"nhs-navigation-split-view__card","data-selected":Ge||void 0,"data-disabled":ge.disabled||void 0,disabled:ge.disabled,onClick:()=>!ge.disabled&&vr(Ce,ge),children:[ge.icon&&o.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:ge.icon}),o.jsx("span",{className:"nhs-navigation-split-view__item-label",children:ge.label}),ge.description&&o.jsx("span",{className:"nhs-navigation-split-view__item-description",children:ge.description}),i?.(ge),ge.badge!==void 0&&o.jsx("span",{className:"nhs-navigation-split-view__badge",children:ge.badge})]})},Ce)}),e.length===0&&!p&&o.jsx("li",{className:"nhs-navigation-split-view__card-item","aria-disabled":"true",children:g||o.jsx("div",{style:{padding:16},children:"No items"})})]});const me="nsv-nav-instructions",xe=G.useMemo(()=>G.memo(({item:ge,idx:Ce,selected:Ge,focused:Ee})=>{const Re=h(ge),wr=ge.disabled?{"aria-disabled":!0,tabIndex:-1}:{tabIndex:Ee?0:-1,onClick:()=>{Yi.current=Ce,vr(Re,ge)},onKeyDown:Kn=>{(Kn.key==="Enter"||Kn.key===" ")&&(Kn.preventDefault(),Yi.current=Ce,vr(Re,ge))}};return o.jsxs("li",{id:String(Re),"data-nav-item":!0,className:"nhs-navigation-split-view__list-item nhs-navigation-split-view__item-button",role:"option","aria-selected":Ge,"aria-current":Ge?"true":void 0,"data-selected":Ge||void 0,"data-disabled":ge.disabled||void 0,...wr,children:[ge.icon&&o.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:ge.icon}),o.jsxs("span",{className:"nhs-navigation-split-view__item-content",children:[o.jsx("span",{className:"nhs-navigation-split-view__item-label",children:ge.label}),ge.description&&o.jsx("span",{className:"nhs-navigation-split-view__item-description",children:ge.description}),i?.(ge)]}),ge.badge!==void 0&&o.jsx("span",{className:"nhs-navigation-split-view__badge",children:ge.badge})]})}),[h,vr,i]);return o.jsxs(o.Fragment,{children:[o.jsxs("ul",{ref:ct,className:"nhs-navigation-split-view__list",onKeyDown:q1,role:"listbox","aria-label":"Navigation items","aria-describedby":me,"aria-activedescendant":ke?String(ke):void 0,children:[e.map((ge,Ce)=>o.jsx(xe,{item:ge,idx:Ce,selected:h(ge)===ke,focused:Ce===Ke||Ke===-1&&Ce===0&&j==="first","data-just-selected":h(ge)===te?"true":void 0},h(ge))),e.length===0&&!p&&o.jsx("li",{className:"nhs-navigation-split-view__list-item","aria-disabled":"true",children:g||o.jsx("div",{style:{padding:16},children:"No items"})})]}),o.jsx("div",{id:me,style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:w})]})};return o.jsx("div",{ref:se,className:J1,"aria-label":x?.rootLabel,"data-layout":le,onKeyDown:Qe,children:o.jsxs("div",{className:"nhs-navigation-split-view__body",children:[o.jsxs("div",{className:"nhs-navigation-split-view__panes","data-active-detail":Ae||void 0,style:{transform:Ae?"translateX(-100%)":void 0},children:[o.jsxs("div",{ref:X,className:"nhs-navigation-split-view__nav-pane",role:"navigation","aria-label":x?.navigationLabel||"Items","data-collapsed":tn||void 0,tabIndex:0,children:[L&&Z&&o.jsx("div",{className:"nhs-navigation-split-view__nav-collapse",children:o.jsx("button",{type:"button",onClick:Z1,className:"nhs-navigation-split-view__nav-collapse-btn","aria-label":tn?Q:O,title:tn?Q:O,children:tn?z||o.jsx(xy,{}):$||o.jsx(yy,{})})}),o.jsx("div",{className:"nhs-navigation-split-view__nav-scroll",children:ew()}),F&&o.jsx("div",{className:"nhs-navigation-split-view__nav-footer",role:"contentinfo",children:F})]}),o.jsxs("div",{ref:ae,className:"nhs-navigation-split-view__content-pane",role:"region","aria-label":x?.contentLabel||"Content","data-has-selection":!!Te||void 0,tabIndex:0,style:{display:st&&!tt?"none":void 0},children:[zl&&o.jsx("div",{className:"nhs-navigation-split-view__header",children:V1}),o.jsx("div",{className:"nhs-navigation-split-view__content-inner",style:{padding:32,flex:1},children:s(Te)})]}),le==="three-column"&&(!A||Vl)||st&&!tt?o.jsx("div",{ref:E,className:"nhs-navigation-split-view__secondary-pane",role:"region","aria-label":x?.secondaryContentLabel||"Secondary",tabIndex:0,children:o.jsxs("div",{className:"nhs-navigation-split-view__secondary-inner",style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[st&&!tt&&o.jsx("div",{className:"nhs-navigation-split-view__header",children:o.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[Gl,o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:o.jsx("h2",{style:{marginLeft:0,marginRight:0},children:Te&&typeof Te=="object"&&"label"in Te?Te.label:String(Te)})})]})})}),Te&&Y&&o.jsx("div",{className:"nhs-navigation-split-view__secondary-header",style:{padding:"16px 32px",borderBottom:"1px solid var(--nsplit-divider)"},children:typeof Y=="function"?Y(Te):Y}),o.jsx("div",{style:{padding:32,flex:1,minWidth:0},children:l?.(Te)})]})}):null]}),o.jsx("div",{ref:Yl,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"}}),o.jsx("div",{"aria-live":"polite",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:Dn?"Expanded to three column layout":"In two column layout"})]})})}$u.displayName="NavigationSplitView";const Iu=(t,e,n,r)=>t==null||Number.isNaN(t)?r:Math.min(n,Math.max(e,t)),vy=({item:t,maxLines:e,enableDrilldown:n,onExpand:r,isActive:a,topLaneIndex:i})=>{const{ariaLabel:s}=t,l=`${t._pxLeft}px`,u=`${t._pxWidth}px`,c=`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${i})`,d=Math.floor(t._startFraction)+2,f=Math.max(1,Math.round(t._spanColumns)),p=n&&t.childItems&&t.childItems.length>0,g=m=>{p&&(m.preventDefault(),r?.(t))},x=p?{role:"button",tabIndex:0,"aria-haspopup":"dialog","aria-expanded":a||!1,onClick:g,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&g(m),m.key==="Escape"&&a&&g(m)}}:{};return o.jsxs("div",{className:be("nhsuk-product-roadmap__item",p&&"nhsuk-product-roadmap__item--expandable",a&&"nhsuk-product-roadmap__item--active"),style:{left:l,width:u,top:c,"--item-height":e},role:"gridcell","aria-label":s,"aria-colindex":d,"aria-colspan":f,...x,children:[o.jsx("div",{className:"nhsuk-product-roadmap__item-bg","aria-hidden":"true"}),o.jsxs("div",{className:"nhsuk-product-roadmap__item-content",children:[o.jsx("span",{className:"nhsuk-product-roadmap__item-title",children:t.title}),p&&o.jsx("span",{className:be("nhsuk-product-roadmap__item-expander",a&&"nhsuk-product-roadmap__item-expander--open"),"aria-hidden":"true"})]})]})},Pu=B.memo(({dateHeadings:t,categories:e,columnWidthPx:n=400,itemMaxLines:r=2,className:a,ariaLabel:i="Product roadmap",enableDrilldown:s=!1,onToggleItem:l,drilldownMode:u="overlay",...c})=>{const[d,f]=B.useState(()=>new Set),[p,g]=B.useState(()=>new Set),x=B.useRef(new Set),m=B.useCallback(N=>d.has(N),[d]),h=B.useCallback(N=>{f(A=>{const F=new Set(A);return F.has(N.id)?(F.delete(N.id),g(L=>{const k=new Set(L);return k.add(N.id),k}),setTimeout(()=>g(L=>{const k=new Set(L);return k.delete(N.id),k}),240),l?.(N.id,!1)):(F.add(N.id),l?.(N.id,!0)),F})},[l]);B.useLayoutEffect(()=>{if(u!=="inline"||!s)return;const N=[];if(d.forEach(k=>{x.current.has(k)||N.push(k)}),x.current=new Set(d),!N.length)return;const A=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,F=N.map(k=>`.nhsuk-product-roadmap__inline-children[data-parent="${k}"] .nhsuk-product-roadmap__inline-child`).join(","),L=Array.from(document.querySelectorAll(F));if(L.length){if(A){L.forEach(k=>{k.style.opacity="1",k.style.transform="translateY(0)"});return}Promise.resolve().then(()=>U1).then(k=>{(k.gsap||k.default||k).to(L,{opacity:1,y:0,duration:.32,ease:"power2.out",stagger:.05})}).catch(()=>{L.forEach(k=>{k.style.opacity="1",k.style.transform="translateY(0)"})})}},[d,u,s]);const P=B.useCallback(()=>{d.size&&f(new Set)},[d]),T=be("nhsuk-product-roadmap",a),C=Iu(n,120,1200,400),w=Iu(r,1,6,2),j=B.useMemo(()=>t.map(N=>new Date(N+" 01")),[t]),S=B.useMemo(()=>{if(j.length===0){const F=new Date;return[F,F]}const N=new Date(j[0]),A=$r.offset(new Date(j[j.length-1]),1);return[N,A]},[j]),M=B.useMemo(()=>ws().domain(S).range([0,j.length*C]),[S,j.length,C]),_=B.useCallback(N=>{if(N.startDate){const O=new Date(N.startDate),z=new Date(N.endDate??N.startDate);z<O&&z.setTime(O.getTime());const $=M(O),I=$r.offset(new Date(z),1);let U=M(I);Number.isFinite(U)||(U=$+C);const R=Math.max(C*.25,U-$),K=$/C,ne=R/C;return{...N,_pxLeft:$,_pxWidth:R,_startFraction:K,_spanColumns:ne}}const A=N.date??1,F=N.dateOffset??0,L=N.length??1,k=N.partialLength??1,H=A-1+F,Q=L-1+k;return{...N,_pxLeft:H*C,_pxWidth:Q*C,_startFraction:H,_spanColumns:Q}},[M,C]),v=B.useMemo(()=>e.map(N=>{const F=N.roadmapItems.map(k=>{const H=!k.childItems&&k.children?{...k,childItems:k.children}:{...k};return _(H)}).sort((k,H)=>k._pxLeft!==H._pxLeft?k._pxLeft-H._pxLeft:H._pxWidth-k._pxWidth),L=[];return F.forEach(k=>{const H=k._pxLeft,Q=k._pxLeft+k._pxWidth;let O=L.findIndex(z=>z<=H);O===-1&&(O=L.length,L.push(0)),L[O]=Q,k.verticalPosition=O+1}),{...N,roadmapItems:F,_laneCount:L.length}}),[e,_]),D=B.useMemo(()=>v.map(N=>N._laneCount||1),[v]),y=B.useMemo(()=>`var(--category-width) ${t.map(()=>"var(--column-width)").join(" ")}`,[t]);return o.jsxs("div",{className:T,style:{"--column-width":`${C}px`,gridTemplateColumns:y},role:"grid","aria-label":i,"aria-colcount":t.length+1,"aria-rowcount":v.length+1,...c,children:[o.jsxs("div",{className:"nhsuk-product-roadmap__header-row",role:"row","aria-rowindex":1,children:[o.jsx("div",{className:"nhsuk-product-roadmap__header-cell",role:"columnheader","aria-colindex":1,children:o.jsx("span",{className:"nhsuk-visually-hidden",children:"Category"})}),t.map((N,A)=>o.jsx("div",{className:"nhsuk-product-roadmap__date-heading",role:"columnheader","aria-colindex":A+2,children:N},N+A))]}),v.map((N,A)=>{const F=A+2,L=D[A];let k,H=0,Q=[];s&&u==="inline"&&(Q=N.roadmapItems.filter(I=>m(I.id)&&I.childItems&&I.childItems.length).map(I=>({id:I.id,lane:I.verticalPosition||1,count:I.childItems.length})).sort((I,U)=>I.lane-U.lane),H=Q.reduce((I,U)=>I+U.count,0));const O=L+H;k=`calc((${O} * var(--roadmap-item-block-height)) + (max(0, ${O} - 1) * var(--roadmap-row-gap)))`;const z={};let $=0;return Q.forEach(I=>{$+=I.count,z[I.lane+1]=$}),o.jsxs("div",{className:"nhsuk-product-roadmap__row",role:"row","aria-rowindex":F,children:[o.jsx("div",{className:"nhsuk-product-roadmap__category-cell",role:"rowheader","aria-colindex":1,children:N.heading}),o.jsx("div",{className:"nhsuk-product-roadmap__items-row",style:{gridColumn:`2 / span ${t.length}`,height:k},children:o.jsx("div",{className:"nhsuk-product-roadmap__items-layer",children:N.roadmapItems.map(I=>{const U=(I.verticalPosition||1)-1,R=Q.filter(re=>re.lane-1<U).reduce((re,Y)=>re+Y.count,0),K=U+R,ne=m(I.id),ce=p.has(I.id);return o.jsxs(B.Fragment,{children:[o.jsx(vy,{item:I,maxLines:w,enableDrilldown:s,onExpand:h,isActive:ne,topLaneIndex:K,laneOffset:R}),s&&u==="inline"&&(ne||ce)&&I.childItems&&o.jsx("div",{"data-parent":I.id,className:"nhsuk-product-roadmap__inline-children","aria-label":`${I.title} child tasks`,children:I.childItems.map((re,Y)=>{const q="calc(var(--roadmap-item-block-height) * 0.75)";let oe=I._pxLeft,W=I._pxWidth;if(re.startDate){const le=new Date(re.startDate);let ie=re.endDate?new Date(re.endDate):new Date(le);ie<le&&(ie=new Date(le));const he=new Date(ie);he.setDate(he.getDate()+1);const ye=M(le);let ke=M(he);(!Number.isFinite(ke)||ke<=ye)&&(ke=ye+6),oe=ye,W=Math.max(6,ke-ye)}const J=K+1+Y;return o.jsxs("div",{className:be("nhsuk-product-roadmap__inline-child",re.status&&`nhsuk-product-roadmap__inline-child--status-${re.status}`,!ne&&ce&&"nhsuk-product-roadmap__inline-child--collapsing"),style:{left:`${oe}px`,width:`${W}px`,top:`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${J})`,height:q,opacity:ne?0:void 0,transform:ne?"translateY(-6px)":void 0},children:[o.jsx("div",{className:"nhsuk-product-roadmap__inline-child-bg"}),o.jsx("div",{className:"nhsuk-product-roadmap__inline-child-content",children:re.title})]},re.id)})})]},I.id)})})})]},N.heading+A)}),s&&u==="overlay"&&d.size===1&&(()=>{const N=Array.from(d)[0],A=e.flatMap(F=>F.roadmapItems).find(F=>F.id===N);return!A||!A.childItems?null:o.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-overlay",role:"dialog","aria-modal":"true","aria-label":`${A.title} details`,children:[o.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-panel",children:[o.jsxs("header",{className:"nhsuk-product-roadmap__drilldown-header",children:[o.jsx("h3",{className:"nhsuk-product-roadmap__drilldown-title",children:A.title}),o.jsx("button",{type:"button",className:"nhsuk-product-roadmap__drilldown-close",onClick:P,"aria-label":"Close details",children:"Ã—"})]}),o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-content",children:A.content}),o.jsx("ul",{className:"nhsuk-product-roadmap__drilldown-children",children:A.childItems.map(F=>o.jsxs("li",{className:"nhsuk-product-roadmap__drilldown-child",children:[o.jsx("strong",{className:"nhsuk-product-roadmap__drilldown-child-title",children:F.title}),F.content&&o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-child-content",children:F.content})]},F.id))})]}),o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-backdrop",onClick:P,"aria-hidden":"true"})]})})()]})});Pu.displayName="ProductRoadmap";function Lu(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=Lu(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ai(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=Lu(t))&&(r&&(r+=" "),r+=e);return r}function at(t){return function(){return t}}const Ls=Math.PI,Fs=2*Ls,Fn=1e-6,wy=Fs-Fn;function Fu(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Sy(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Fu;const n=10**e;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class ky{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Fu:Sy(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,a){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(e,n,r,a,i,s){this._append`C${+e},${+n},${+r},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(e,n,r,a,i){if(e=+e,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,l=this._y1,u=r-e,c=a-n,d=s-e,f=l-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Fn)if(!(Math.abs(f*u-c*d)>Fn)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-s,x=a-l,m=u*u+c*c,h=g*g+x*x,P=Math.sqrt(m),T=Math.sqrt(p),C=i*Math.tan((Ls-Math.acos((m+p-h)/(2*P*T)))/2),w=C/T,j=C/P;Math.abs(w-1)>Fn&&this._append`L${e+w*d},${n+w*f}`,this._append`A${i},${i},0,0,${+(f*g>d*x)},${this._x1=e+j*u},${this._y1=n+j*c}`}}arc(e,n,r,a,i,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),u=r*Math.sin(a),c=e+l,d=n+u,f=1^s,p=s?a-i:i-a;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Fn||Math.abs(this._y1-d)>Fn)&&this._append`L${c},${d}`,r&&(p<0&&(p=p%Fs+Fs),p>wy?this._append`A${r},${r},0,1,${f},${e-l},${n-u}A${r},${r},0,1,${f},${this._x1=c},${this._y1=d}`:p>Fn&&this._append`A${r},${r},0,${+(p>=Ls)},${f},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function Bu(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new ky(e)}function Au(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Eu(t){this._context=t}Eu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Hu(t){return new Eu(t)}function Ru(t){return t[0]}function zu(t){return t[1]}function Ou(t,e){var n=at(!0),r=null,a=Hu,i=null,s=Bu(l);t=typeof t=="function"?t:t===void 0?Ru:at(t),e=typeof e=="function"?e:e===void 0?zu:at(e);function l(u){var c,d=(u=Au(u)).length,f,p=!1,g;for(r==null&&(i=a(g=s())),c=0;c<=d;++c)!(c<d&&n(f=u[c],c,u))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+t(f,c,u),+e(f,c,u));if(g)return i=null,g+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:at(+u),l):t},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:at(+u),l):e},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:at(!!u),l):n},l.curve=function(u){return arguments.length?(a=u,r!=null&&(i=a(r)),l):a},l.context=function(u){return arguments.length?(u==null?r=i=null:i=a(r=u),l):r},l}function Bs(t,e,n){var r=null,a=at(!0),i=null,s=Hu,l=null,u=Bu(c);t=typeof t=="function"?t:t===void 0?Ru:at(+t),e=typeof e=="function"?e:at(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?zu:at(+n);function c(f){var p,g,x,m=(f=Au(f)).length,h,P=!1,T,C=new Array(m),w=new Array(m);for(i==null&&(l=s(T=u())),p=0;p<=m;++p){if(!(p<m&&a(h=f[p],p,f))===P)if(P=!P)g=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=p-1;x>=g;--x)l.point(C[x],w[x]);l.lineEnd(),l.areaEnd()}P&&(C[p]=+t(h,p,f),w[p]=+e(h,p,f),l.point(r?+r(h,p,f):C[p],n?+n(h,p,f):w[p]))}if(T)return l=null,T+""||null}function d(){return Ou().defined(a).curve(s).context(i)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:at(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:at(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:at(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:at(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:at(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:at(+f),c):n},c.lineX0=c.lineY0=function(){return d().x(t).y(e)},c.lineY1=function(){return d().x(t).y(n)},c.lineX1=function(){return d().x(r).y(e)},c.defined=function(f){return arguments.length?(a=typeof f=="function"?f:at(!!f),c):a},c.curve=function(f){return arguments.length?(s=f,i!=null&&(l=s(i)),c):s},c.context=function(f){return arguments.length?(f==null?i=l=null:l=s(i=f),c):i},c}function Wu(t){return t<0?-1:1}function Uu(t,e,n){var r=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(r||a<0&&-0),s=(n-t._y1)/(a||r<0&&-0),l=(i*a+s*r)/(r+a);return(Wu(i)+Wu(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(l))||0}function Gu(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function As(t,e,n){var r=t._x0,a=t._y0,i=t._x1,s=t._y1,l=(i-r)/3;t._context.bezierCurveTo(r+l,a+l*e,i-l,s-l*n,i,s)}function ii(t){this._context=t}ii.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:As(this,this._t0,Gu(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,As(this,Gu(this,n=Uu(this,t,e)),n);break;default:As(this,this._t0,n=Uu(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},Object.create(ii.prototype).point=function(t,e){ii.prototype.point.call(this,e,t)};function si(t){return new ii(t)}function Cy(t,e,n){const r=fc(t,e);return ws().domain(r).range(n)}function Yu(t,e,n){const[r,a]=fc(t,e);if(!(Number.isFinite(r)&&Number.isFinite(a)))return qa().domain([0,0]).range(n);let s;if(r<=0)s=Math.min(0,r);else{const u=a-r,c=(u>0?u:r)*.1;s=Math.max(0,r-c),s===r&&(s=Math.max(0,r*.9))}const l=a??0;return qa().domain([s,l]).nice().range(n)}function Es(t,e,n,r){const a=Ou().x(e).y(n);return r?.smooth!==!1&&a.curve(si),a(t)??""}function Ty(t={}){const e=G.useRef(null),n=G.useMemo(()=>({top:t.top??16,right:t.right??16,bottom:t.bottom??32,left:t.left??48}),[t.bottom,t.left,t.right,t.top]),[r,a]=G.useState({width:0,height:0});G.useLayoutEffect(()=>{if(!e.current)return;const l=new ResizeObserver(u=>{for(const c of u){const{width:d,height:f}=c.contentRect;a({width:d,height:f})}});return l.observe(e.current),()=>l.disconnect()},[]);const i=Math.max(0,r.width-n.left-n.right),s=Math.max(0,r.height-n.top-n.bottom);return{width:r.width,height:r.height,innerWidth:i,innerHeight:s,margin:n,ref:e}}const Vu=G.createContext(null);function gn(){return G.useContext(Vu)}const qu=({height:t=240,margin:e,width:n,className:r="fdp-chart",children:a,role:i="group",ariaLabel:s})=>{const l=Ty(e),u={height:t,position:"relative"};return n!==void 0&&(u.width=typeof n=="number"?`${n}px`:n),o.jsx("div",{ref:l.ref,className:r,style:u,role:i,"aria-label":s,children:o.jsx(Vu.Provider,{value:l,children:a})})},Hs=G.createContext(null),Bn=()=>G.useContext(Hs),Xu=({series:t,innerWidth:e,innerHeight:n,parseX:r,children:a,xTickCount:i=6,yTickCount:s=5,yDomain:l,xPadding:u,yPadding:c})=>{const d=gn(),f=e??d?.innerWidth??0,p=n??d?.innerHeight??0,g=G.useMemo(()=>t.flatMap(w=>w.data),[t]),x=G.useCallback(w=>{if(r)return r(w);const j=w.x;return j instanceof Date?j:new Date(j)},[r]),m=u??6,h=c??6,P=G.useMemo(()=>Cy(g,x,[m,Math.max(0,f-m)]),[g,x,f,m]),T=G.useMemo(()=>{if(l){const w=Yu([],j=>j.y,[Math.max(0,p-h),h]);return w.domain(l),w}return Yu(g,w=>w.y,[Math.max(0,p-h),h])},[g,p,l]),C=G.useMemo(()=>({xScale:P,yScale:T,getXTicks:(w=i)=>P.ticks(w),getYTicks:(w=s)=>T.ticks(w)}),[P,T,i,s]);return o.jsx(Hs.Provider,{value:C,children:a})},Rs=({type:t,scale:e,tickCount:n,tickValues:r,formatTick:a,label:i,offset:s,className:l,minLabelSpacing:u,maxTickLabelLength:c,autoMinLabelSpacing:d=t==="x",labelAngle:f=0,allowLabelWrap:p=!0,tickFormatPreset:g})=>{const x=Bn(),m=gn(),h=e||(t==="x"?x?.xScale:x?.yScale),P=n??(t==="x"?6:5),T=typeof a=="function",C=G.useMemo(()=>{if(T||!g)return;const S=M=>new Intl.DateTimeFormat(void 0,M);switch(g){case"dayShortMonth":return M=>{const _=M instanceof Date?M:new Date(M);return`${_.getDate()}
${S({month:"short"}).format(_)}`};case"dayShortMonthYear":return M=>{const _=M instanceof Date?M:new Date(M);return`${_.getDate()}
${S({month:"short"}).format(_)} ${_.getFullYear()}`};case"shortMonth":return M=>{const _=M instanceof Date?M:new Date(M);return S({month:"short"}).format(_)};case"shortMonthYear":return M=>{const _=M instanceof Date?M:new Date(M);return`${S({month:"short"}).format(_)} ${_.getFullYear()}`};case"hourMinute":return M=>{const _=M instanceof Date?M:new Date(M);return S({hour:"2-digit",minute:"2-digit"}).format(_)};default:return}},[T,g]);let w=T?a:C||(S=>String(S));const j=G.useMemo(()=>r&&Array.isArray(r)?r:h?typeof h.ticks=="function"?h.ticks(P):h.domain?h.domain():[]:[],[h,P,r]);if(t==="x"&&!T&&!g&&j.length&&j.every(S=>S instanceof Date)){const S=j[0],M=j[j.length-1],_=M.getTime()-S.getTime(),v=24*3600*1e3,D=365*v,y=S.getFullYear()===M.getFullYear(),N=new Intl.DateTimeFormat(void 0,{month:"short"});if(_<2*v){const A=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"});w=F=>A.format(F)}else if(_<32*v)w=A=>{const F=A;return`${F.getDate()} ${N.format(F)}`};else if(_<D&&y)w=A=>N.format(A);else if(_<2*D){const A=new Set;w=F=>{const L=F,k=L.getMonth();return A.has(k)||A.add(k),`${N.format(L)} ${L.getFullYear()}`}}else w=A=>String(A.getFullYear())}if(!h||!m)return null;if(t==="x"){const S=s??m.innerHeight,M=typeof h.bandwidth=="function",_=M?h.bandwidth():0,v=N=>{const A=h(N);return M?A+_/2:A};let D=u??0;if(d&&u==null){const N=j.map(F=>w(F).replace(/\n.*/g,"")),A=N.length?N.reduce((F,L)=>F+L.length,0)/N.length:0;D=Math.max(12,Math.round(A*6+4))}const y=G.useMemo(()=>{if(r&&Array.isArray(r)||D<=0)return j;const N=[];let A=-1/0;for(const F of j){const L=v(F);L-A>=D&&(N.push(F),A=L)}return N},[j,h,D,r,M,_]);return o.jsxs("g",{className:["fdp-axis","fdp-axis--x",l].filter(Boolean).join(" "),transform:`translate(0,${S})`,fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[o.jsx("line",{x1:0,x2:m.innerWidth,y1:0,y2:0,stroke:"currentColor"}),y.map((N,A)=>{const F=w(N),L=c&&F.length>c?F.slice(0,Math.max(1,c-1))+"â€¦":F,k=p?L.split(/\n/):[L.replace(/\n/g," ")],H=f<0?"end":f>0?"start":"middle";return o.jsxs("g",{transform:`translate(${v(N)},0)`,children:[o.jsx("line",{y2:6,stroke:"currentColor"}),o.jsxs("text",{y:9,textAnchor:H,className:"fdp-axis__tick",dominantBaseline:"hanging",transform:f?`rotate(${f})`:void 0,fontFamily:"inherit",children:[k.map((Q,O)=>o.jsx("tspan",{x:0,dy:O===0?0:"1.1em",children:Q},O)),L!==F&&o.jsx("title",{children:F})]})]},N?.toString?.()||A)})]})}return o.jsxs("g",{className:["fdp-axis","fdp-axis--y",l].filter(Boolean).join(" "),fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[j.map((S,M)=>{const _=w(S),v=c&&_.length>c?_.slice(0,Math.max(1,c-1))+"â€¦":_,D=p?v.split(/\n/):[v.replace(/\n/g," ")];return o.jsxs("g",{transform:`translate(0,${h(S)})`,children:[o.jsx("line",{x2:-6,stroke:"currentColor"}),o.jsxs("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:[D.map((y,N)=>o.jsx("tspan",{x:-9,dy:N===0?0:"1.1em",children:y},N)),v!==_&&o.jsx("title",{children:_})]})]},S?.toString?.()||M)}),i&&o.jsx("text",{transform:"rotate(-90)",x:-m.innerHeight/2,y:-m.margin.left+12,textAnchor:"middle",className:"fdp-axis__label",fontFamily:"inherit",children:i})]})},Ku=({axis:t="y",tickCount:e,stroke:n="var(--fdp-chart-grid,#e5e5e5)",dasharray:r="2 4",className:a})=>{const i=Bn(),s=gn();if(!i||!s)return null;const l=t==="y"?i.getYTicks(e):i.getXTicks(e);return o.jsxs("g",{className:["fdp-grid",a].filter(Boolean).join(" "),children:[t==="y"&&l.map((u,c)=>o.jsx("line",{x1:0,x2:s.innerWidth,y1:i.yScale(u),y2:i.yScale(u),stroke:n,strokeDasharray:r},c)),t==="x"&&l.map((u,c)=>o.jsx("line",{y1:0,y2:s.innerHeight,x1:i.xScale(u),x2:i.xScale(u),stroke:n,strokeDasharray:r},c))]})},Br={color:{"data-viz":{$type:"color",categorical:{1:{$value:"{color.primary.blue}",$description:"Series 1 â€“ NHS Blue (brand core)"},2:{$value:"#41B6E6",$description:"Series 2 â€“ NHS Light Blue (new)"},3:{$value:"{color.secondary.aqua-green}",$description:"Series 3 â€“ NHS Aqua Green (existing)"},4:{$value:"#78BE20",$description:"Series 4 â€“ NHS Light Green (new)"},5:{$value:"{color.primary.green}",$description:"Series 5 â€“ NHS Green (existing)"},6:{$value:"{color.secondary.warm-yellow}",$description:"Series 6 â€“ NHS Warm Yellow (existing; distinct from focus yellow)"},7:{$value:"#ED4F00",$description:"Series 7 â€“ NHS Tangerine (new; warmer/deeper than existing orange)"},8:{$value:"{color.secondary.pink}",$description:"Series 8 â€“ NHS Pink (existing)"},9:{$value:"#E317AA",$description:"Series 9 â€“ NHS Bright Pink (new vivid accent)"},10:{$value:"#880FB8",$description:"Series 10 â€“ NHS Light Purple (new mid purple)"},11:{$value:"{color.primary.purple}",$description:"Series 11 â€“ NHS Purple (existing dark purple)"},12:{$value:"#9A6324",$description:"Series 12 â€“ NHS Brown (new; earth neutral)"}},neutral:{comparison:{$value:"{color.grey.1}",$description:"Neutral comparison series (optional)"}},region:{$comment:"Fixed colours for NHS geographical regions; prefer stable mapping for maps. London colour updated (#78BE21 â€“ light green).","north-east":{$value:"{color.primary.blue}",$description:"North East â€“ NHS Blue"},"north-west":{$value:"#41B6E6",$description:"North West â€“ NHS Light Blue"},"east-of-england":{$value:"{color.primary.purple}",$description:"East of England â€“ NHS Purple"},midlands:{$value:"{color.secondary.pink}",$description:"Midlands â€“ NHS Pink"},london:{$value:"#78BE21",$description:"London â€“ NHS Light Green (new)"},"south-west":{$value:"#FAE100",$description:"South West â€“ NHS Yellow variant (new)"},"south-east":{$value:"#ed8b00",$description:"South East â€“ NHS Orange (existing base orange)"}},severity:{$comment:"Semantic severity / alert colours (light background ramp â†’ critical).",low:{$value:"{color.secondary.pale-yellow}",$description:"Low severity â€“ pale yellow background"},moderate:{$value:"{color.secondary.warm-yellow}",$description:"Moderate severity â€“ warm yellow"},high:{$value:"{color.secondary.orange}",$description:"High severity â€“ orange"},critical:{$value:"{color.primary.red}",$description:"Critical severity â€“ red"}},"org-level":{$comment:"Organisational level semantic colours (stable NHS brand mappings).",trust:{$value:"{color.primary.blue}",$description:"Trust â€“ NHS Blue"},ambulance:{$value:"{color.primary.green}",$description:"Ambulance â€“ NHS Green"},icb:{$value:"{color.primary.dark-pink}",$description:"ICB â€“ NHS Dark Pink"},region:{$value:"{color.primary.purple}",$description:"Region â€“ NHS Purple"}},stroke:{$comment:"Automatic contrast stroke colours for overlays / borders. Light fills get dark stroke; dark fills get white stroke.",categorical:{1:{$value:"#ffffff",$description:"Stroke for series 1 (blue)"},2:{$value:"#212b32",$description:"Stroke for series 2 (light blue)"},3:{$value:"#212b32",$description:"Stroke for series 3 (aqua green)"},4:{$value:"#212b32",$description:"Stroke for series 4 (light green)"},5:{$value:"#ffffff",$description:"Stroke for series 5 (green)"},6:{$value:"#212b32",$description:"Stroke for series 6 (warm yellow)"},7:{$value:"#ffffff",$description:"Stroke for series 7 (tangerine)"},8:{$value:"#ffffff",$description:"Stroke for series 8 (pink)"},9:{$value:"#ffffff",$description:"Stroke for series 9 (bright pink)"},10:{$value:"#ffffff",$description:"Stroke for series 10 (light purple)"},11:{$value:"#ffffff",$description:"Stroke for series 11 (purple)"},12:{$value:"#ffffff",$description:"Stroke for series 12 (brown)"}},region:{$comment:"Region stroke colours derived from fill colours: dark fills lightened ~35%; light fills darkened ~25% for consistent contrast without defaulting to pure white/black.","north-east":{$value:"#5996D1",$description:"Stroke for North East (blue lightened 35%)"},"north-west":{$value:"#3189AD",$description:"Stroke for North West (light blue darkened 25%)"},"east-of-england":{$value:"#7A59A3",$description:"Stroke for East of England (purple lightened 35%)"},midlands:{$value:"#CA71A4",$description:"Stroke for Midlands (pink lightened 35%)"},london:{$value:"#5A8F19",$description:"Stroke for London (light green darkened 25%)"},"south-west":{$value:"#BCA900",$description:"Stroke for South West (yellow darkened 25%)"},"south-east":{$value:"#B26800",$description:"Stroke for South East (orange darkened 25%)"}},severity:{$comment:"Contrast strokes for severity colours (light backgrounds use dark stroke; dark backgrounds use white).",low:{$value:"#212b32",$description:"Stroke for low severity (pale yellow fill)"},moderate:{$value:"#212b32",$description:"Stroke for moderate severity (warm yellow fill)"},high:{$value:"#212b32",$description:"Stroke for high severity (orange fill)"},critical:{$value:"#ffffff",$description:"Stroke for critical severity (red fill)"}},"org-level":{$comment:"Contrast strokes for organisational level colours (all dark brand fills so white stroke for consistency).",trust:{$value:"#ffffff",$description:"Stroke for trust (blue fill)"},ambulance:{$value:"#ffffff",$description:"Stroke for ambulance (green fill)"},icb:{$value:"#ffffff",$description:"Stroke for ICB (dark pink fill)"},region:{$value:"#ffffff",$description:"Stroke for region (purple fill)"}}},spc:{$comment:"SPC (Statistical Process Control) semantic variation colours aligned to SPCChart.scss and SPCIcons.",improvement:{$value:"#00B0F0",$description:"SPC special cause improvement (favourable)"},concern:{$value:"#E46C0A",$description:"SPC special cause concern (deteriorating)"},"no-judgement":{$value:"#490092",$description:"SPC special cause (no directional judgement)"},"common-cause":{$value:"#A6A6A6",$description:"SPC common cause (baseline variation)"},"assurance-pass":{$value:"#00823B",$description:"SPC assurance pass indicator (process capable)"},"assurance-fail":{$value:"#DA291C",$description:"SPC assurance fail indicator (process not capable)"},gradient:{$comment:"Opacity stops for SPC icon gradient wash (applied top-left -> bottom-right). Consumers build gradients using these opacities + base colour.",stop:{"start-opacity":{$value:"0.18",$description:"Start stop opacity (0%) for classic variant wash"},"mid-opacity":{$value:"0.06",$description:"Mid stop opacity (~65-75%)"},"end-opacity":{$value:"0",$description:"End stop opacity (100%)"},"triangle-start-opacity":{$value:"0.18",$description:"Start opacity for triangle variants (kept aligned)"},"triangle-mid-opacity":{$value:"0.06",$description:"Mid opacity for triangle variants"},"triangle-end-opacity":{$value:"0",$description:"End opacity for triangle variants"}}},stroke:{$comment:"Contrast stroke colours for SPC variation fills.",improvement:{$value:"#000000",$description:"Stroke for improvement points"},concern:{$value:"#000000",$description:"Stroke for concern points"},"no-judgement":{$value:"#000000",$description:"Stroke for no-judgement points"},"common-cause":{$value:"#ffffff",$description:"Stroke for common cause points"},"assurance-pass":{$value:"#000000",$description:"Stroke for assurance pass points"},"assurance-fail":{$value:"#000000",$description:"Stroke for assurance fail points"}}}}}},oi={color:{primary:{$type:"color",blue:{$value:"#005eb8",$description:"NHS Blue - Primary brand color"},"blue-active":{$value:"#002f5c",$description:"NHS Active Blue (50% shade) â€“ alias of button/login active; promoted for general reuse"},white:{$value:"#ffffff",$description:"NHS White"},black:{$value:"#212b32",$description:"NHS Black"},green:{$value:"#007f3b",$description:"NHS Green"},purple:{$value:"#330072",$description:"NHS Purple"},"dark-pink":{$value:"#7c2855",$description:"NHS Dark Pink"},red:{$value:"#d5281b",$description:"NHS Red"},"light-purple":{$value:"#880FB8",$description:"NHS Light Purple (data viz promoted)"},yellow:{$value:"#ffeb3b",$description:"NHS Yellow"}},secondary:{$type:"color","pale-yellow":{$value:"#fff9c4",$description:"NHS Pale Yellow"},"warm-yellow":{$value:"#ffb81c",$description:"NHS Warm Yellow"},"region-yellow":{$value:"#FAE100",$description:"NHS Region Yellow (maps)"},orange:{$value:"#ed8b00",$description:"NHS Orange"},tangerine:{$value:"#ED4F00",$description:"NHS Tangerine (data viz promoted)"},"aqua-green":{$value:"#00a499",$description:"NHS Aqua Green"},"light-blue":{$value:"#41B6E6",$description:"NHS Light Blue (data viz promoted)"},pink:{$value:"#ae2573",$description:"NHS Pink"},"bright-pink":{$value:"#E317AA",$description:"NHS Bright Pink (data viz promoted)"},"light-green":{$value:"#78BE20",$description:"NHS Light Green (data viz promoted)"},brown:{$value:"#9A6324",$description:"NHS Brown (data viz promoted neutral)"}},grey:{1:{$value:"#4c6272",$description:"NHS Grey 1 - Darkest grey"},2:{$value:"#768692",$description:"NHS Grey 2 - Darker grey"},3:{$value:"#aeb7bd",$description:"NHS Grey 3 - Medium grey"},4:{$value:"#d8dde0",$description:"NHS Grey 4 - Light grey"},5:{$value:"#f0f4f5",$description:"NHS Grey 5 - Lightest grey"},$type:"color"},accessibility:{$type:"color",$comment:"Accessibility-oriented color tokens. Includes CVD-safe pairs and Okabeâ€“Ito colors. Use these for positive/negative semantics and colour-blindâ€“friendly defaults.","okabe-ito":{green:{$value:"#009E73",$description:"Okabeâ€“Ito green (CVD-safe) â€“ recommended positive"},vermillion:{$value:"#D55E00",$description:"Okabeâ€“Ito vermillion / redâ€“orange (CVD-safe) â€“ recommended negative"}},"cvd-safe":{blue:{$value:"#1f77b4",$description:"CVD-safe blue (pairs with orange); widely used in Matplotlib/Tableau sets"},orange:{$value:"#ff7f0e",$description:"CVD-safe orange (pairs with blue)"}},positive:{$value:"{color.accessibility.okabe-ito.green}",$description:"Accessibility semantic alias â€“ positive"},negative:{$value:"{color.accessibility.okabe-ito.vermillion}",$description:"Accessibility semantic alias â€“ negative"}}}},Ny=["#005eb8","#0072ce","#41b6e6","#00a499","#7c2855","#330072","#d5281b","#ffb81c","#fae100","#4c6272","#768692","#aeb7bd"];let zs=null,Os=null,Ws=null,Zu="optimized";function jy(){const t={color:{...oi.color,...Br.color}},e=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,t);if(!i)return;const s=i.$value||i.value;if(typeof s=="string"&&/^\{.+\}$/.test(s))return e(s.slice(1,-1),a);if(typeof s=="string")return s},n=[];try{for(let r=1;r<=12;r++){const a=`color.data-viz.categorical.${r}`,i=e(a);if(!i)throw new Error(`Missing token ${a}`);n.push(i)}return n}catch{return Ny}}function Dy(){return zs||(zs=jy()),zs}function My(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t.trim());return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function Us(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $y(t,e,n){const r=Us(t),a=Us(e),i=Us(n),s=r*.4124+a*.3576+i*.1805,l=r*.2126+a*.7152+i*.0722,u=r*.0193+a*.1192+i*.9505;return{x:s*100,y:l*100,z:u*100}}function Iy(t,e,n){let s=t/95.047,l=e/100,u=n/108.883;const c=d=>d>.008856?Math.cbrt(d):7.787*d+16/116;return s=c(s),l=c(l),u=c(u),{L:116*l-16,a:500*(s-l),b:200*(l-u)}}function Ju(t){const e=My(t);if(!e)return null;const n=$y(e.r,e.g,e.b);return Iy(n.x,n.y,n.z)}function Qu(t,e){const n=t.L-e.L,r=t.a-e.a,a=t.b-e.b;return Math.sqrt(n*n+r*r+a*a)}function Py(){const t=Dy();if(t.length<=2)return t.slice();const e=t.map(s=>Ju(s));let n=0,r=-1;for(let s=0;s<t.length;s++){const l=e[s];if(!l)continue;let u=0,c=0;for(let f=0;f<t.length;f++)s!==f&&e[f]&&(u+=Qu(l,e[f]),c++);const d=u/Math.max(1,c);d>r&&(r=d,n=s)}const a=new Set(t.map((s,l)=>l)),i=[];for(i.push(n),a.delete(n);a.size;){let s=Array.from(a)[0],l=-1;for(const u of a){const c=e[u];if(!c)continue;let d=1/0;for(const f of i){const p=e[f];if(p){const g=Qu(c,p);g<d&&(d=g)}}d>l&&(l=d,s=u)}i.push(s),a.delete(s)}return i.map(s=>t[s])}function Ly(){return Os||(Os=Py()),Os}function Fy(t,e,n){const r=(t+16)/116,a=e/500+r,i=r-n/200,s=d=>{const f=d*d*d;return f>.008856?f:(d-16/116)/7.787},l=s(a)*95.047,u=s(r)*100,c=s(i)*108.883;return{X:l,Y:u,Z:c}}function By(t,e,n){t/=100,e/=100,n/=100;let r=t*3.2406+e*-1.5372+n*-.4986,a=t*-.9689+e*1.8758+n*.0415,i=t*.0557+e*-.204+n*1.057;const s=l=>l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055;return r=Math.min(1,Math.max(0,s(r))),a=Math.min(1,Math.max(0,s(a))),i=Math.min(1,Math.max(0,s(i))),{r:Math.round(r*255),g:Math.round(a*255),b:Math.round(i*255)}}function Ay(t,e,n){return`#${[t,e,n].map(r=>r.toString(16).padStart(2,"0")).join("")}`}function Ey(t,e){const n=Ju(t);if(!n)return t;const r=Math.min(100,Math.max(0,n.L+e)),{X:a,Y:i,Z:s}=Fy(r,n.a,n.b),l=By(a,i,s);return Ay(l.r,l.g,l.b)}function Hy(){const t=Ly(),n=[12,-12,24,-24].map(a=>t.map(i=>Ey(i,a))),r=[...t];return n.forEach(a=>r.push(...a)),r}function Ry(){return(!Ws||zy())&&(Ws=Hy(),ed=Zu),Ws}let ed=null;function zy(){return ed!==Zu}function At(t){const e=Ry();return e[t%e.length]}let sr=null,Ar=null,Er=null,Hr=null;function Oy(){const t=Br?.color?.["data-viz"]?.stroke;if(t){const e=t.categorical||{};sr=[];for(let i=1;i<=12;i++){const s=e[String(i)]?.$value||e[String(i)]?.value;sr.push(typeof s=="string"?s:"#212b32")}const n=t.region||{};Ar={},Object.keys(n).forEach(i=>{const s=n[i]?.$value||n[i]?.value;typeof s=="string"&&(Ar[i]=s)});const r=t.severity||{},a=t["org-level"]||{};Hr={},Object.keys(a).forEach(i=>{const s=a[i]?.$value||a[i]?.value;typeof s=="string"&&(Hr[i]=s)}),Er={},Object.keys(r).forEach(i=>{const s=r[i]?.$value||r[i]?.value;typeof s=="string"&&(Er[i]=s)})}}function li(){(!sr||!Ar||!Er||!Hr)&&Oy()}function An(t){return li(),sr?sr[t%sr.length]:"#212b32"}function Wy(t){return li(),Ar?Ar[t]:void 0}function ci(t,e){return Wy(t)||An(e)}const Gs=["low","moderate","high","critical"];let Ys=null;function Uy(){const t={color:{...oi.color,...Br.color}},e=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,t);if(!i)return;const s=i.$value||i.value;return typeof s=="string"&&/^\{.+\}$/.test(s)?e(s.slice(1,-1),a):typeof s=="string"?s:void 0},n={};return Gs.forEach(r=>{const a=e(`color.data-viz.severity.${r}`);a&&(n[r]=a)}),n}function td(){return Ys||(Ys=Uy()),Ys}function Gy(t){return td()[t.toLowerCase()]}function Yy(t,e){return Gy(t)||td()[Gs[e%Gs.length]]||At(e)}function Vy(t){return li(),Er?Er[t]:void 0}function qy(t,e){return Vy(t)||An(e)}const Vs=["trust","ambulance","icb","region"];let qs=null;function Xy(){const t={color:{...oi.color,...Br.color}},e=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,t);if(!i)return;const s=i.$value||i.value;return typeof s=="string"&&/^\{.+\}$/.test(s)?e(s.slice(1,-1),a):typeof s=="string"?s:void 0},n={};return Vs.forEach(r=>{const a=e(`color.data-viz.org-level.${r}`);a&&(n[r]=a)}),n}function nd(){return qs||(qs=Xy()),qs}function Ky(t){return nd()[t.toLowerCase()]}function Zy(t,e){return Ky(t)||nd()[Vs[e%Vs.length]]||At(e)}function Jy(t){return li(),Hr?Hr[t]:void 0}function Qy(t,e){return Jy(t)||An(e)}let Xs=null;const ex=["north-east","north-west","east-of-england","midlands","london","south-west","south-east"];function tx(t){return t.trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function nx(){const t={color:{...oi.color,...Br.color}},e=(a,i=new Set)=>{if(i.has(a))return;i.add(a);const s=a.split(".").reduce((u,c)=>u?u[c]:void 0,t);if(!s)return;const l=s.$value||s.value;return typeof l=="string"&&/^\{.+\}$/.test(l)?e(l.slice(1,-1),i):typeof l=="string"?l:void 0},n={},r=[];return ex.forEach(a=>{const i=e(`color.data-viz.region.${a}`);i?n[a]=i:r.push(a)}),process.env.NODE_ENV!=="production"&&(Object.keys(n).length===0?console.warn("[DataViz] Region colour tokens unresolved  falling back to categorical colours."):r.length&&console.warn(`[DataViz] Missing region colour tokens: ${r.join(", ")}.`)),n}function rx(){return Xs||(Xs=nx()),Xs}function ax(t){return rx()[tx(t)]}function or(t,e){return ax(t)||At(e)}const rd=G.createContext(null),Rr=()=>G.useContext(rd),ix=({initialHiddenIds:t=[],children:e,hiddenIds:n,onChange:r})=>{const[a,i]=G.useState(()=>new Set(t)),s=n!==void 0,l=G.useMemo(()=>s?new Set(n):a,[s,n,a]),u=G.useCallback(d=>{s||i(new Set(d)),r?.(Array.from(d))},[s,r]),c=G.useMemo(()=>({hiddenIds:l,isHidden:d=>l.has(d),toggle:d=>{const f=new Set(l);f.has(d)?f.delete(d):f.add(d),u(f)},showOnly:d=>{u(new Set)},showAll:()=>u(new Set),setHidden:d=>u(new Set(Array.isArray(d)?d:Array.from(d)))}),[l,u]);return o.jsx(rd.Provider,{value:c,children:e})},ad=G.createContext(null),bn=()=>G.useContext(ad),id=({children:t,maxDistance:e=40,wrapAround:n=!1})=>{const r=Bn(),a=Rr(),[i,s]=G.useState(null),l=G.useRef(new Map),[u,c]=G.useState([]),d=G.useCallback((M,_)=>{l.current.set(M,_)},[]),f=G.useCallback(M=>{l.current.delete(M)},[]),p=G.useCallback((M,_)=>{if(!r)return;const{xScale:v,yScale:D}=r;let y=null,N=1/0;l.current.forEach((A,F)=>{A.forEach((L,k)=>{const H=v(L.x),Q=D(L.y),O=H-M,z=Q-_,$=Math.sqrt(O*O+z*z);$<N&&(N=$,y={seriesId:F,index:k,x:L.x,y:L.y,clientX:H,clientY:Q})})}),y&&N<=e?s(y):s(null)},[r,e]),g=G.useCallback(()=>s(null),[]);G.useEffect(()=>{if(!i){c([]);return}if(!r)return;const{xScale:M,yScale:_}=r,v=[];l.current.forEach((D,y)=>{D.forEach((N,A)=>{(i.x instanceof Date&&N.x instanceof Date?N.x.getTime()===i.x.getTime():N.x===i.x)&&v.push({seriesId:y,index:A,x:N.x,y:N.y,clientX:M(N.x),clientY:_(N.y)})})}),v.sort((D,y)=>D.seriesId.localeCompare(y.seriesId)),c(v)},[i,r]);const x=G.useCallback(M=>{if(!i)return;const _=l.current.get(i.seriesId);if(!_)return;let v=i.index+M;if(v<0||v>=_.length){if(!n)return;v=(v+_.length)%_.length}const D=_[v];if(!r)return;const{xScale:y,yScale:N}=r;s({seriesId:i.seriesId,index:v,x:D.x,y:D.y,clientX:y(D.x),clientY:N(D.y)})},[i,r,n]),m=G.useCallback(M=>{let _=Array.from(l.current.keys());if(a&&(_=_.filter(H=>!a.isHidden(H))),_.length===0)return;if(!i){const H=_[0],Q=l.current.get(H);if(!Q||!r)return;const{xScale:O,yScale:z}=r,$=Q[0];s({seriesId:H,index:0,x:$.x,y:$.y,clientX:O($.x),clientY:z($.y)});return}const v=_.indexOf(i.seriesId);if(v===-1)return;let D=v+M;if(D<0||D>=_.length){if(!n)return;D=(D+_.length)%_.length}const y=_[D],N=l.current.get(y);if(!N||!r)return;const A=Math.min(i.index,N.length-1),F=N[A],{xScale:L,yScale:k}=r;s({seriesId:y,index:A,x:F.x,y:F.y,clientX:L(F.x),clientY:k(F.y)})},[i,r,n,a]),h=G.useCallback(()=>{let M=Array.from(l.current.keys());if(a&&(M=M.filter(A=>!a.isHidden(A))),M.length===0)return;const _=i?i.seriesId:M[0],v=l.current.get(_);if(!v||v.length===0||!r)return;const D=v[0],{xScale:y,yScale:N}=r;s({seriesId:_,index:0,x:D.x,y:D.y,clientX:y(D.x),clientY:N(D.y)})},[i,r,a]),P=G.useCallback(()=>{let M=Array.from(l.current.keys());if(a&&(M=M.filter(F=>!a.isHidden(F))),M.length===0)return;const _=i?i.seriesId:M[0],v=l.current.get(_);if(!v||v.length===0||!r)return;const D=v.length-1,y=v[D],{xScale:N,yScale:A}=r;s({seriesId:_,index:D,x:y.x,y:y.y,clientX:N(y.x),clientY:A(y.y)})},[i,r,a]),T=G.useCallback(()=>x(1),[x]),C=G.useCallback(()=>x(-1),[x]),w=G.useCallback(()=>m(1),[m]),j=G.useCallback(()=>m(-1),[m]),S=G.useMemo(()=>({focused:i,setFocused:s,aggregated:u,focusNearest:p,clear:g,registerSeries:d,unregisterSeries:f,focusNextPoint:T,focusPrevPoint:C,focusNextSeries:w,focusPrevSeries:j,focusFirstPoint:h,focusLastPoint:P}),[i,u,p,g,d,f,T,C,w,j,h,P]);return o.jsx(ad.Provider,{value:S,children:t})},sd=({series:t,seriesIndex:e,palette:n,showPoints:r,focusablePoints:a,focusIndex:i,parseX:s,visibilityMode:l="remove",strokeWidth:u=1,smooth:c=!0,gradientFillId:d,colors:f})=>{const p=Bn();if(!p)return null;const{xScale:g,yScale:x}=p,h=Rr()?.isHidden(t.id)??!1,P=h&&l==="fade";if(h&&l==="remove")return null;const T=bn();G.useEffect(()=>{if(!T)return;const _=t.data.map(v=>({x:s(v),y:v.y}));return T.registerSeries(t.id,_),()=>T.unregisterSeries(t.id)},[T,t.id,t.data,s]);const C=G.useMemo(()=>Es(t.data,_=>g(s(_)),_=>x(_.y),{smooth:c}),[t.data,g,x,s,c]),w=G.useMemo(()=>{if(!t.data.length)return"";const[_]=x.domain(),v=Bs().x(D=>g(s(D))).y0(()=>x(_)).y1(D=>x(D.y));return c&&v.curve(si),v(t.data)||""},[t.data,g,x,s,c]),j=f&&f[e],S=t.color||j||(n==="region"?or(t.id,e):At(e)),M=n==="region"?ci(t.id,e):An(e);return o.jsxs("g",{className:"fdp-line-series","data-series":t.id,opacity:P?.25:1,"aria-hidden":P?!0:void 0,children:[d&&o.jsx("path",{d:w,fill:`url(#${d})`,stroke:"none",role:"presentation",className:"fdp-line-series__gradient"}),o.jsx("path",{d:C,fill:"none",stroke:S,strokeWidth:u,role:"presentation"}),r&&t.data.map((_,v)=>{const D=g(s(_)),y=x(_.y),N=a?0:-1,A=!P&&(a&&v===i||T?.focused?.seriesId===t.id&&T.focused.index===v),F=()=>{T&&!P&&T.setFocused({seriesId:t.id,index:v,x:s(_),y:_.y,clientX:D,clientY:y})},L=()=>{T&&T.focused?.seriesId===t.id&&T.focused.index===v&&T.clear()};return o.jsx("circle",{cx:D,cy:y,r:A?5:3.5,stroke:A?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":M,strokeWidth:A?2:1,fill:A?"var(--nhs-fdp-color-grey-3, #aeb7bd)":S,className:"fdp-line-point",tabIndex:P?-1:N,"aria-label":`${t.label||t.id} ${s(_).toDateString()} value ${_.y}`,"data-series":t.id,"data-index":v,onMouseEnter:F,onFocus:F,onMouseLeave:L,onBlur:L},v)})]})},sx=({polite:t=!0,format:e})=>{const n=bn(),[r,a]=G.useState(""),i=G.useRef("");return G.useEffect(()=>{if(!n?.focused)return;const{focused:s,aggregated:l}=n;let u;if(l&&l.length>1){const c=l.map(f=>`${f.seriesId} ${f.y}`).join("; ");u=`${s.x instanceof Date?s.x.toDateString():String(s.x)} â€“ ${c}`}else u=e?e({seriesId:s.seriesId,x:s.x,y:s.y,index:s.index}):ox(s.seriesId,s.x,s.y,s.index);if(u!==i.current){i.current=u,a("");const c=setTimeout(()=>a(u),10);return()=>clearTimeout(c)}},[n?.focused,e]),o.jsx("div",{"aria-live":t?"polite":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,margin:-1,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",border:0},children:r})};function ox(t,e,n,r){const a=e instanceof Date?e.toDateString():String(e);return`Series ${t}, point ${r+1}, ${a}, value ${n}`}const lx=()=>{const t=bn(),e=gn();if(!t||!e||!t.focused)return null;const{focused:n,aggregated:r}=t,{innerWidth:a,innerHeight:i}=e,s=Math.min(Math.max(n.clientX,0),a),l=Math.min(Math.max(n.clientY,0),i),u=s+8,c=l-8,d=r.length>1,f=n.x instanceof Date?n.x.toDateString():String(n.x),p=d?f:`${f} â€¢ ${n.y}`,g=/\d+$/.exec(n.seriesId||""),x=g?parseInt(g[0],10)-1:0,m=At(x>=0?x:0)||"#005eb8",h="var(--nhs-fdp-color-primary-yellow,#ffeb3b)";return o.jsxs("g",{className:"fdp-tooltip-layer",pointerEvents:"none",children:[o.jsx("circle",{cx:s,cy:l,r:7,fill:"none",stroke:h,strokeWidth:3}),o.jsx("circle",{cx:s,cy:l,r:5,fill:"#000",stroke:h,strokeWidth:1.5}),o.jsx("circle",{cx:s,cy:l,r:2.5,fill:m,stroke:"#fff",strokeWidth:.5}),d?(()=>{const T=r.map(M=>`${M.seriesId}: ${M.y}`),C=[p,...T],w=C.reduce((M,_)=>Math.max(M,_.length),0),j=Math.max(90,w*6.2+16),S=16*C.length+8;return o.jsxs("g",{children:[o.jsx("rect",{x:u,y:c-S,rx:4,ry:4,width:j,height:S,fill:"#212b32",opacity:.92}),C.map((M,_)=>o.jsx("text",{x:u+8,y:c-S+6+16*(_+.7),fill:"#fff",fontSize:12,children:M},_))]})})():o.jsxs("g",{children:[o.jsx("rect",{x:u,y:c-24,rx:4,ry:4,width:Math.max(60,p.length*6.2),height:24,fill:"#212b32",opacity:.92}),o.jsx("text",{x:u+8,y:c-8,fill:"#fff",fontSize:12,children:p})]})]})},cx=({items:t,palette:e="categorical",direction:n="row",interactive:r=!1,adjustStrokeForWhiteBackground:a=!0,hiddenIds:i,defaultHiddenIds:s=[],onVisibilityChange:l,formatAnnouncement:u})=>{const c=Rr(),d=!!(c&&!r&&!l&&i===void 0),f=r||d,p=t||[],g=i!==void 0,[x,m]=G.useState(new Set(s)),h=g?new Set(i):x,[P,T]=G.useState(""),C=w=>{if(d&&c){const N=c.isHidden(w);c.toggle(w);const F=p.find(k=>k.id===w)?.label||w,L=u?u(w,N,F):`${F} ${N?"shown":"hidden"}`;T(L);return}if(!f)return;const j=new Set(h),S=j.has(w);S?j.delete(w):j.add(w),g||m(j);const M=p.filter(N=>!j.has(N.id)).map(N=>N.id),_=Array.from(j);l?.(M,_);const D=p.find(N=>N.id===w)?.label||w,y=u?u(w,S,D):`${D} ${S?"shown":"hidden"}`;T(y)};return o.jsxs("div",{className:"fdp-legend-wrapper",children:[o.jsx("ul",{className:`fdp-legend fdp-legend--${n}`,children:p.map((w,j)=>{const S=w.palette||e,M=w.color||(S==="region"?or(w.id,j):S==="severity"?Yy(w.id,j):S==="org-level"?Zy(w.id,j):At(j));let _=w.stroke||(S==="region"?ci(w.id,j):S==="severity"?qy(w.id,j):S==="org-level"?Qy(w.id,j):An(j));if(a&&_){const y=_.trim().toLowerCase();(y==="#fff"||y==="#ffffff"||y==="white"||/^rgb\(\s*255\s*,\s*255\s*,\s*255\s*\)$/.test(y))&&(_="#212b32")}const v=d&&c?c.isHidden(w.id):h.has(w.id),D=f?{"aria-pressed":!v,"aria-label":`${w.label} (${v?"show":"hide"})`,onClick:()=>C(w.id)}:{"aria-label":w.label};return o.jsxs("li",{className:`fdp-legend__item${v?" fdp-legend__item--hidden":""}`,children:[o.jsx("button",{type:"button",className:"fdp-legend__swatch",style:{backgroundColor:M,backgroundImage:w.patternDataUrl?`url(${w.patternDataUrl})`:void 0,backgroundSize:w.patternDataUrl?"auto":void 0,borderColor:_},...D}),o.jsx("span",{className:"fdp-legend__label",children:w.label})]},w.id)})}),f&&o.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite","aria-atomic":"true",children:P})]})},ux=({series:t,seriesIndex:e,palette:n,parseX:r,areaOnly:a=!1,visibilityMode:i="remove",baselineY:s=0,smooth:l=!0,stacked:u,gradientFill:c=!0,colors:d})=>{const f=Bn();if(!f)return null;const{xScale:p,yScale:g}=f,m=Rr()?.isHidden(t.id)??!1,h=m&&i==="fade";if(m&&i==="remove")return null;const P=bn();G.useEffect(()=>{if(!P)return;const M=t.data.map(_=>({x:r(_),y:_.y}));return P.registerSeries(t.id,M),()=>P.unregisterSeries(t.id)},[P,t.id,t.data,r]);const T=d&&d[e],C=t.color||T||(n==="region"?or(t.id,e):At(e)),w=G.useMemo(()=>u&&u.length===t.data.length?Es(t.data,M=>p(r(M)),M=>{const _=t.data.indexOf(M);return g(u[_].y1)},{smooth:l}):Es(t.data,M=>p(r(M)),M=>g(M.y),{smooth:l}),[t.data,u,p,g,r,l]),j=G.useMemo(()=>{if(u&&u.length===t.data.length){const y=Bs().x(N=>p(r(N))).y0((N,A)=>g(u[A].y0)).y1((N,A)=>g(u[A].y1));return l&&y.curve(si),y(t.data)||""}const[M,_]=g.domain();let v=s;v<M?v=M:v>_&&(v=_);const D=Bs().x(y=>p(r(y))).y0(()=>g(v)).y1(y=>g(y.y));return l&&D.curve(si),D(t.data)||""},[t.data,u,p,g,r,s,l]),S=G.useId();return o.jsxs("g",{className:"fdp-area-series","data-series":t.id,opacity:h?.25:1,"aria-hidden":h?!0:void 0,children:[c&&o.jsx("defs",{children:o.jsxs("linearGradient",{id:S,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:C,stopOpacity:.25}),o.jsx("stop",{offset:"100%",stopColor:C,stopOpacity:0})]})}),o.jsx("path",{className:"fdp-area-series__fill",d:j,fill:c?`url(#${S})`:C,...c?{}:{fillOpacity:.25},stroke:"none"}),!a&&o.jsx("path",{d:w,fill:"none",stroke:C,strokeWidth:1})]})},dx=({series:t,seriesIndex:e,seriesCount:n,palette:r,parseX:a,focusable:i=!0,widthFactor:s=.8,groupGap:l=2,barWidth:u,adaptive:c=!1,adaptiveGroupOccupancy:d=.9,visibilityMode:f="remove",colorMode:p="series",allSeries:g,stacked:x,gapRatio:m=.15,minBarWidth:h,gradientFill:P=!0,gradientStrokeMatch:T=!0,opacity:C=1,fadedOpacity:w=.25,flatFillOpacity:j=1,colors:S})=>{const M=Math.max(0,m),_=Bn(),v=gn();if(!_||!v)return null;const{xScale:D,yScale:y}=_,A=Rr()?.isHidden(t.id)??!1,F=A&&f==="fade";if(A&&f==="remove")return null;const L=bn();G.useEffect(()=>{if(!L)return;const Y=t.data.map(q=>({x:a(q),y:q.y}));return L.registerSeries(t.id,Y),()=>L.unregisterSeries(t.id)},[L,t.id,t.data,a]);const k=typeof D.bandwidth=="function",H=k?D.bandwidth():void 0,Q=G.useMemo(()=>{if(H!=null)return H;const Y=g&&g.length?g:[t],q=[];Y.forEach(J=>{J.data.forEach(le=>{const ie=D(a(le));Number.isFinite(ie)&&q.push(ie)})});const oe=q.sort((J,le)=>J-le);if(oe.length<=1)return 40;const W=[];for(let J=1;J<oe.length;J++)W.push(oe[J]-oe[J-1]);return W.sort((J,le)=>J-le),(W[Math.floor(W.length/2)]||40)*s},[t.data,g,D,a,s,H]),{basePerBar:O}=G.useMemo(()=>{if(k){const oe=Q,W=Math.max(1,(oe-l*(n-1))/n),Z=t.barWidth??u;let J=Z?Math.min(Z,oe):W;if(c){const le=oe*Math.min(1,Math.max(.05,d)),ie=Math.max(1,(le-l*(n-1))/n);J=Z?Math.min(J,ie):ie}return{basePerBar:J}}const Y=t.barWidth??u,q=Math.max(1,(Q-l*(n-1))/n);if(c){const oe=g&&g.length?g:[t],W=[];oe.forEach(ye=>ye.data.forEach(ke=>{const Te=D(a(ke));Number.isFinite(Te)&&W.push(Te)})),W.sort((ye,ke)=>ye-ke);const Z=[];for(let ye=1;ye<W.length;ye++)Z.push(W[ye]-W[ye-1]);Z.sort((ye,ke)=>ye-ke);const le=(Z[Math.floor(Z.length/2)]||Q)*Math.min(1,Math.max(.05,d)),ie=Math.max(1,(le-l*(n-1))/n);return{basePerBar:Y?Math.min(Y,ie):ie}}return Y?{basePerBar:Math.min(Y,q)}:{basePerBar:q}},[k,Q,l,n,u,t.barWidth,c,d,g,D,a]),z=G.useMemo(()=>{if(k)return[];const Y=[];return(g&&g.length?g:[t]).forEach(oe=>oe.data.forEach(W=>{const Z=D(a(W));Number.isFinite(Z)&&Y.push(Z)})),Y.sort((oe,W)=>oe-W),Array.from(new Set(Y))},[k,g,t,D,a]),$=G.useMemo(()=>{if(k)return[];if(!z.length)return[];if(z.length===1)return[{center:z[0],left:0,right:v.innerWidth}];const Y=[];for(let q=0;q<z.length;q++){const oe=z[q],W=q===0?0:(z[q-1]+oe)/2,Z=q===z.length-1?v.innerWidth:(oe+z[q+1])/2;Y.push({center:oe,left:Math.max(0,W),right:Math.min(v.innerWidth,Z)})}return Y},[k,z,v.innerWidth]),I=G.useMemo(()=>{if(k||!$.length)return;const Y=Math.min(1,Math.max(.05,s)),q=$.map(le=>Math.max(2,le.right-le.left)),oe=q.map(le=>Math.max(2,Math.min(le-1,le*Y)));let W=Math.min(...oe);if(h)if(n<=1){const le=Math.min(...q.map(ie=>ie-1));le>=h&&W<h&&(W=Math.min(le,h))}else{const le=Math.min(...q.map(he=>he-1)),ie=h*n+(n-1)*(h*M);ie<=le&&W<ie&&(W=ie)}if(n<=1)return h&&W<h&&q.every(ie=>ie>=h)?{groupWidth:h,barWidth:h}:{groupWidth:W,barWidth:W};let Z=W/(n+(n-1)*M);return Z<1&&(Z=1),h&&Z<h&&h*n+(n-1)*(h*M)<=W&&(Z=h),{groupWidth:Z*n+(n-1)*(Z*M),barWidth:Z}},[k,$,s,n,M,h]),U=S&&S[e]?S[e]:void 0,R=t.color||U||(r==="region"?or(t.id,e):At(e)),K=r==="region"?ci(t.id,e):An(e),ne=T&&(t.color||U)?R:K,ce=Number.isFinite(y(0))?y(0):y.range()[0],re=G.useId();return x&&x.length===t.data.length?o.jsxs("g",{className:"fdp-bar-series fdp-bar-series--stacked","data-series":t.id,opacity:F?w:C,"aria-hidden":F?!0:void 0,children:[P&&o.jsx("defs",{children:o.jsxs("linearGradient",{id:re,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:R,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:R,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:R,stopOpacity:.06})]})}),t.data.map((Y,q)=>{const oe=a(Y),W=D(k?Y.x:oe);let Z,J;if(k)Z=Q,J=W;else{const se=$.find(ae=>Math.abs(ae.center-W)<.5);if(!se||!I)Z=O,J=W-O/2;else{const{groupWidth:ae}=I;Z=ae;let E=W-ae/2;E<se.left&&(E=se.left),E+ae>se.right&&(E=Math.max(se.left,se.right-ae)),J=E}}const le=x[q],ie=y(le.y0),he=y(le.y1),ye=Math.min(ie,he),ke=Math.abs(he-ie)||1;if(!k&&h&&Z<h){const se=$.find(ae=>Math.abs(ae.center-W)<.5);if(se){const ae=Math.max(2,se.right-se.left-1),E=Math.min(ae,h);E>Z&&(Z=E,J=Math.max(se.left,Math.min(se.right-Z,W-Z/2)))}}const Te=!F&&L?.focused?.seriesId===t.id&&L.focused.index===q,te=()=>{!L||F||L.setFocused({seriesId:t.id,index:q,x:oe,y:le.y1-le.y0,clientX:J+Z/2,clientY:ye})},V=()=>{L?.focused?.seriesId===t.id&&L.focused.index===q&&L.clear()};return o.jsx("rect",{x:J,y:ye,width:Z,height:ke,fill:P?`url(#${re})`:R,...P?{}:{fillOpacity:j},stroke:Te?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":P&&T?R:void 0,strokeWidth:Te?2:1,className:"fdp-bar fdp-bar--stacked",tabIndex:F||!i?-1:0,role:"graphics-symbol","aria-label":`${t.label||t.id} ${oe instanceof Date?oe.toDateString():oe} value ${le.y1-le.y0}`,onMouseEnter:te,onFocus:te,onMouseLeave:V,onBlur:V},q)})]}):o.jsxs("g",{className:"fdp-bar-series","data-series":t.id,opacity:F?w:C,"aria-hidden":F?!0:void 0,children:[P&&o.jsxs("defs",{children:[p==="series"&&o.jsxs("linearGradient",{id:re,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:R,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:R,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:R,stopOpacity:.06})]}),p==="category"&&t.data.map((Y,q)=>{const W=S&&S[q]||(r==="region"?or(String(Y.x),q):At(q)),Z=`${re}-${q}`;return o.jsxs("linearGradient",{id:Z,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:W,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:W,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:W,stopOpacity:.06})]},Z)})]}),t.data.map((Y,q)=>{const oe=a(Y),W=D(k?Y.x:oe);let Z,J;if(k){const de=Q;if(n<=1)J=de,Z=W;else{J=Math.max(1,de/(n+(n-1)*M));const ue=J*M,ee=J*n+ue*(n-1);Z=W+(de-ee)/2+e*(J+ue)}}else{const de=$.find(ue=>ue.center===W);if(!de||!I)J=O,Z=W-O/2,h&&J<h&&(J=h,Z=W-J/2);else{const{barWidth:ue}=I;J=ue;const ee=n>1?ue*M:0,fe=J*n+ee*(n-1);let ve=W-fe/2;ve<de.left&&(ve=de.left),ve+fe>de.right&&(ve=Math.max(de.left,de.right-fe)),Z=ve+e*(J+ee)}if(h&&J<h){const ue=$.find(ee=>Math.abs(ee.center-W)<.5);if(ue){const ee=Math.max(2,ue.right-ue.left-1),fe=Math.min(ee,h);if(fe>J)if(n<=1)J=fe,Z=Math.max(ue.left,Math.min(ue.right-J,W-J/2));else{const ve=fe*M,we=fe*n+ve*(n-1);if(we<=ue.right-ue.left-1){J=fe;const je=we;let Ne=W-je/2;Ne<ue.left&&(Ne=ue.left),Ne+je>ue.right&&(Ne=Math.max(ue.left,ue.right-je)),Z=Ne+e*(J+ve)}}}}}const le=Z+J/2,ie=y(Y.y),he=Math.min(ce,ie),ye=Math.abs(ce-ie),ke=!F&&L?.focused?.seriesId===t.id&&L.focused.index===q,Te=()=>{!L||F||L.setFocused({seriesId:t.id,index:q,x:oe,y:Y.y,clientX:le,clientY:ie})},te=()=>{L?.focused?.seriesId===t.id&&L.focused.index===q&&L.clear()},V=p==="category"&&S?S[q]:void 0,se=p==="category"?V||(r==="region"?or(String(Y.x),q):At(q)):R,ae=p==="category"?`${re}-${q}`:re,E=P&&T?se:p==="category"?r==="region"?ci(String(Y.x),q):An(q):ne,X=ke?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":E||se;return o.jsx("rect",{x:Z,y:he,width:J,height:ye||1,fill:P?`url(#${ae})`:se,...P?{}:{fillOpacity:j},stroke:X,strokeWidth:ke?2:1,className:"fdp-bar",tabIndex:F||!i?-1:0,role:"graphics-symbol","aria-label":`${t.label||t.id} ${oe instanceof Date?oe.toDateString():oe} value ${Y.y}`,onMouseEnter:Te,onFocus:Te,onMouseLeave:te,onBlur:te},q)})]})},fx=({series:t,innerWidth:e,innerHeight:n,paddingInner:r=.1,paddingOuter:a=.05,children:i,yTickCount:s=5})=>{const l=gn(),u=e??l?.innerWidth??0,c=n??l?.innerHeight??0,d=G.useMemo(()=>t.flatMap(h=>h.data),[t]),f=G.useMemo(()=>{const h=new Set;return d.forEach(P=>h.add(P.x)),Array.from(h)},[d]),p=G.useMemo(()=>Math.max(0,...d.map(h=>h.y)),[d]),g=G.useMemo(()=>bc().domain(f).range([0,u]).paddingInner(r).paddingOuter(a),[f,u,r,a]),x=G.useMemo(()=>qa().domain([0,p]).nice().range([c,0]),[p,c]),m=G.useMemo(()=>({xScale:g,yScale:x,getXTicks:()=>f,getYTicks:(h=s)=>x.ticks(h)}),[g,x,f,s]);return o.jsx(Hs.Provider,{value:m,children:i})},hx=({title:t,description:e,source:n,table:r,className:a,id:i,message:s="Interactive chart loadingâ€¦",forceFallback:l=!1})=>{const u=G.useId(),c=i||u,d=e?`${c}-desc`:void 0,f=n?`${c}-src`:void 0,p=typeof window<"u"&&!l;return o.jsxs("figure",{id:c,className:ai("fdp-chart fdp-chart--noscript",a),"aria-labelledby":`${c}-title`,"aria-describedby":ai(d,f),"data-component":"ChartNoScript",children:[o.jsx("header",{className:"fdp-chart__header",children:o.jsx("h3",{id:`${c}-title`,className:"fdp-chart__title",children:t})}),e&&o.jsx("p",{id:d,className:"fdp-chart__description",children:e}),!p&&o.jsx("div",{className:"fdp-chart__loading",role:"status","aria-live":"polite",children:s}),o.jsxs("div",{className:"fdp-chart__fallback",role:"group","aria-label":t,children:[o.jsx("noscript",{children:o.jsx("div",{className:"fdp-chart__noscript-wrapper",children:o.jsx(ei,{...r})})}),o.jsx("div",{className:"fdp-chart__table","data-fallback-table":!0,children:o.jsx(ei,{...r})})]}),n&&o.jsx("figcaption",{className:"fdp-chart__caption",children:n&&o.jsxs("small",{id:f,className:"fdp-chart__source",children:["Source: ",n]})})]})},mx=({selector:t="figure.fdp-chart",onEnhanced:e,delay:n=0,children:r})=>{const a=G.useRef(null);return G.useEffect(()=>{const i=a.current;if(!i)return;const s=()=>{const l=Array.from(i.querySelectorAll(t));if(l.length===0)return;const u=[];l.forEach(c=>{c.classList.contains("fdp-chart--enhanced")||(c.classList.add("fdp-chart--enhanced"),u.push(c))}),u.length&&e&&e(u)};if(n>0){const l=window.setTimeout(s,n);return()=>window.clearTimeout(l)}s()},[t,e,n]),o.jsx("div",{ref:a,children:r})},px=({label:t,value:e,unit:n,delta:r,status:a="neutral",variant:i="default",subtitle:s,metadata:l,trendData:u,loading:c=!1,error:d,valueFormatter:f,className:p,id:g,announceDelta:x=!0})=>{const m=G.useId(),h=g||m,P=`${h}-label`,T=`${h}-value`,C=`${h}-delta`,w=typeof e=="number"&&!Number.isNaN(e),j=c?"â€”":d?"":w?f?f(e):e.toLocaleString():e;let S,M="",_="";if(r&&!c&&!d){S=r.direction||(r.value>0?"up":r.value<0?"down":"neutral");const v=Math.abs(r.value),D=S==="up"?`+${v}`:S==="down"?`-${v}`:"0",y=r.isPercent?"%":"";if(M=`${D}${y}`,r.ariaLabel)_=r.ariaLabel;else{const N=r.invert?S==="down":S==="up";_=`${S==="neutral"?"no change":S==="up"?"up":"down"} ${v}${y}${S==="neutral"?"":N?" (improvement)":" (worse)"}`}}return o.jsx("div",{className:ai("fdp-metric-card",i&&`fdp-metric-card--${i}`,a&&`fdp-metric-card--status-${a}`,c&&"fdp-metric-card--loading",d&&"fdp-metric-card--error",p),role:"group","aria-labelledby":P,"data-component":"MetricCard",children:o.jsxs("div",{className:"fdp-metric-card__inner",children:[o.jsxs("div",{className:"fdp-metric-card__header",children:[o.jsx("h3",{id:P,className:"fdp-metric-card__label",children:t}),l&&o.jsx("div",{className:"fdp-metric-card__metadata",children:l})]}),o.jsxs("div",{className:"fdp-metric-card__content",children:[o.jsxs("div",{className:"fdp-metric-card__value-section",children:[o.jsx("div",{id:T,className:"fdp-metric-card__value",children:c?o.jsx("div",{className:"fdp-metric-card__skeleton","aria-hidden":"true",children:o.jsx("div",{className:"fdp-metric-card__skeleton-line fdp-metric-card__skeleton-line--value"})}):d?o.jsx("div",{className:"fdp-metric-card__error",role:"alert",children:d}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"fdp-metric-card__number",children:j}),n&&o.jsx("span",{className:"fdp-metric-card__unit",children:n})]})}),s&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__subtitle",children:s})]}),r&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__delta-section",children:o.jsxs("div",{id:C,"aria-label":_,className:ai("fdp-metric-card__delta",S&&`fdp-metric-card__delta--${S}`),children:[o.jsx("span",{className:"fdp-metric-card__delta-value",children:M}),r.period&&o.jsx("span",{className:"fdp-metric-card__delta-period",children:r.period})]})}),u&&u.length>0&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__trend","aria-hidden":"true"})]}),x&&r&&!r.ariaLabel&&!c&&!d&&o.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite",children:_})]})})};var Ks=(t=>(t.XmR="XmR",t.T="T",t.G="G",t))(Ks||{}),Et=(t=>(t.Up="Up",t.Down="Down",t.Neither="Neither",t))(Et||{}),Ve=(t=>(t.Improvement="improvement",t.Concern="concern",t.Neither="neither",t.None="none",t))(Ve||{}),_n=(t=>(t.Pass="pass",t.Fail="fail",t.None="none",t))(_n||{}),yn=(t=>(t.Info="info",t.Warning="warning",t.Error="error",t))(yn||{}),od=(t=>(t.Config="config",t.Data="data",t.Limits="limits",t.SpecialCause="special_cause",t.Baseline="baseline",t.Logic="logic",t.Target="target",t.Ghost="ghost",t.Partition="partition",t))(od||{}),ld=(t=>(t.UnknownChartType="unknown_chart_type",t.InsufficientPointsGlobal="insufficient_points_global",t.VariationConflictRow="variation_conflict_row",t.NullValuesExcluded="null_values_excluded",t.TargetIgnoredRareEvent="target_ignored_rare_event",t.GhostRowsRareEvent="ghost_rows_rare_event",t.InsufficientPointsPartition="insufficient_points_partition",t.BaselineWithSpecialCause="baseline_with_special_cause",t.PartitionCapApplied="partition_cap_applied",t.GlobalCapApplied="global_cap_applied",t))(ld||{}),cd=(t=>(t.Shift="shift",t.Trend="trend",t.Point="point",t))(cd||{});const pe=t=>typeof t=="number"&&Number.isFinite(t),gx=t=>t.reduce((e,n)=>e+n,0),Ht=t=>t.length?gx(t)/t.length:NaN;function bx(t){const e=[];let n=[];for(const r of t)r.baseline&&n.length&&(e.push(n),n=[]),n.push(r);return n.length&&e.push(n),e}function _x(t,e,n){const r=e.autoRecalculateShiftLength||e.specialCauseShiftPoints||6;if(t.length<r*2)return;const a=t.map((d,f)=>({idx:f,value:d.value})).filter(d=>pe(d.value));if(a.length<r*2)return;const i=n==="Up"||n==="Neither",s=n==="Down";function l(d,f){const p=a.slice(d,f).map(g=>g.value);return p.length?Ht(p):NaN}let u=null;if(a.length>1){const d=[];for(let p=1;p<a.length;p++)d.push(Math.abs(a[p].value-a[p-1].value));const f=Ht(d);pe(f)&&f>0&&(u=f*(2.66/3))}if(!u||u<=0)return;const c=e.autoRecalculateDeltaSigma??.5;for(let d=r;d<=a.length-r;d++){const f=d-r,p=l(f,d),g=l(d,d+r);if(!pe(p)||!pe(g))continue;const m=(g-p)/u;if(!(i?m>=c:s?-m>=c:Math.abs(m)>=c))continue;const P=a.slice(d,d+r).map(w=>w.value);if(!(i?P.every(w=>w>p):s?P.every(w=>w<p):P.every(w=>i?w>p:w<p)))continue;const C=a[d].idx;t[C].baseline||(t[C].baseline=!0);return}}function ud(t,e){const n=new Array(t.length).fill(null);let r=null;for(let a=0;a<t.length;a++){const i=t[a];if(!e[a]&&pe(i)){if(r!==null){const s=t[r];n[a]=pe(s)?Math.abs(i-s):null}r=a}}return n}function dd(t,e){const n=t.filter(i=>pe(i));if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=Ht(n),a=3.267*r;if(e){const i=n.filter(s=>s<=a);i.length&&i.length!==n.length&&(r=Ht(i),a=3.267*r)}return{mrMean:r,mrUcl:a}}function yx(t,e){if(!pe(t)||!pe(e))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=2.66,r=2/3*n,a=1/3*n;return{upperProcessLimit:t+n*e,lowerProcessLimit:t-n*e,upperTwoSigma:t+r*e,lowerTwoSigma:t-r*e,upperOneSigma:t+a*e,lowerOneSigma:t-a*e}}const xx=.2777,vx=3.6,wx=t=>pe(t)&&t>=0?Math.pow(t,xx):null,En=t=>pe(t)&&t>=0?Math.pow(t,vx):null,lr={one:{low:.1586552539,high:.8413447461},two:{low:.0227501319,high:.9772498681},three:{low:.001349898,high:.998650102}};function Sx(t,e){return!(t>0&&t<1)||!(e>0&&e<1)?NaN:Math.log(1-t)/Math.log(1-e)}function kx(t){if(!pe(t)||t<0)return{cl:null,lcl:null,ucl:null,oneLow:null,oneHigh:null,twoLow:null,twoHigh:null};const e=1/(t+1),n=d=>Sx(d,e)-1,r=n(.5),a=Math.max(0,n(lr.three.low)),i=n(lr.three.high),s=Math.max(0,n(lr.one.low)),l=n(lr.one.high),u=Math.max(0,n(lr.two.low)),c=n(lr.two.high);return{cl:r,lcl:a,ucl:i,oneLow:s,oneHigh:l,twoLow:u,twoHigh:c}}function Cx(t,e,n){const r=t.map(_=>pe(_)?wx(_):null),a=ud(r,e),{mrMean:i}=dd(a,!!n),s=r.filter((_,v)=>!e[v]&&pe(_)),l=s.length?Ht(s):NaN;if(!pe(l)||!pe(i))return{center:null,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null,mr:a,mrMean:null,mrUcl:null};const u=2.66,c=2/3*u,d=1/3*u,f=l+u*i,p=l-u*i,g=l+c*i,x=l-c*i,m=l+d*i,h=l-d*i,P=En(l),T=En(f),C=p<=0?null:En(p),w=En(m),j=h<=0?null:En(h),S=En(g),M=x<=0?null:En(x);return{center:P??null,upperProcessLimit:T??null,lowerProcessLimit:C??null,upperTwoSigma:S??null,lowerTwoSigma:M??null,upperOneSigma:w??null,lowerOneSigma:j??null,mr:a,mrMean:i,mrUcl:pe(i)?3.267*i:null}}function fd(t){const{chartType:e,metricImprovement:n,data:r,settings:a={}}=t,i={excludeMovingRangeOutliers:!1,specialCauseShiftPoints:6,specialCauseTrendPoints:6,enableFourOfFiveRule:!1,minimumPoints:13,minimumPointsWarning:!1,minimumPointsPartition:12,maximumPointsPartition:null,maximumPoints:null,variationIconConflictWarning:!0,nullValueWarning:!0,targetSuppressedWarning:!0,ghostOnRareEventWarning:!0,partitionSizeWarnings:!0,baselineSpecialCauseWarning:!0,maximumPointsWarnings:!0,assuranceCapabilityMode:!0,collapseClusterRules:!0,baselineSuggest:!1,baselineSuggestMinDeltaSigma:.5,baselineSuggestStabilityPoints:5,baselineSuggestMinGap:12,baselineSuggestScoreThreshold:50,precedenceStrategy:"legacy",emergingDirectionGrace:!1,...a};if(!Array.isArray(r))throw new Error("data must be an array of rows");const s=r.map((m,h)=>({rowId:h+1,x:m.x,value:pe(m.value)?m.value:null,ghost:!!m.ghost,baseline:!!m.baseline,target:pe(m.target)?m.target:null}));if(a?.autoRecalculateAfterShift)try{_x(s,a,n)}catch{}const l=bx(s),u=[],c=[],f=s.filter(m=>!m.ghost&&pe(m.value)).length>=(i.minimumPoints??13);let p=0;const g={};for(const m of l){p++;const h=m.map(y=>y.value),P=m.map(y=>y.ghost);let T=new Array(h.length).fill(null),C=NaN,w=NaN,j=NaN,S={upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};if(e==="XmR"){T=ud(h,P);const y=h.filter((A,F)=>!P[F]&&pe(A));C=y.length?Ht(y):NaN;const N=dd(T,!!i.excludeMovingRangeOutliers);w=N.mrMean,j=N.mrUcl,S=yx(C,w)}else if(e==="T"){const y=Cx(h,P,!!i.excludeMovingRangeOutliers);T=y.mr,w=y.mrMean??NaN,j=y.mrUcl??NaN,C=y.center??NaN,S={upperProcessLimit:y.upperProcessLimit,lowerProcessLimit:y.lowerProcessLimit,upperTwoSigma:y.upperTwoSigma,lowerTwoSigma:y.lowerTwoSigma,upperOneSigma:y.upperOneSigma,lowerOneSigma:y.lowerOneSigma}}else if(e==="G"){const y=h.filter((F,L)=>!P[L]&&pe(F)),N=y.length?Ht(y):NaN,A=kx(N);C=A.cl??NaN,S={upperProcessLimit:A.ucl,lowerProcessLimit:A.lcl,upperTwoSigma:A.twoHigh,lowerTwoSigma:A.twoLow,upperOneSigma:A.oneHigh,lowerOneSigma:A.oneLow},T=new Array(h.length).fill(null),w=NaN,j=NaN}else c.push({code:"unknown_chart_type",category:"config",severity:"error",message:`Unknown ChartType '${e}' â€“ supported: XmR, T, G.`,context:{chartType:e}});const M=m.map((y,N)=>{const A=!y.ghost&&pe(y.value)?h.slice(0,N+1).filter((H,Q)=>!P[Q]&&pe(H)).length:0,F=f,L=F?S:{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};return{rowId:y.rowId,x:y.x,value:pe(y.value)?y.value:null,ghost:y.ghost,partitionId:p,pointRank:A,mean:F&&pe(C)?C:null,mr:pe(T[N])?T[N]:null,mrMean:F&&pe(w)?w:null,mrUcl:F&&pe(j)?j:null,upperProcessLimit:pe(L.upperProcessLimit)?L.upperProcessLimit:null,lowerProcessLimit:pe(L.lowerProcessLimit)?L.lowerProcessLimit:null,upperTwoSigma:pe(L.upperTwoSigma)?L.upperTwoSigma:null,lowerTwoSigma:pe(L.lowerTwoSigma)?L.lowerTwoSigma:null,upperOneSigma:pe(L.upperOneSigma)?L.upperOneSigma:null,lowerOneSigma:pe(L.lowerOneSigma)?L.lowerOneSigma:null,target:pe(y.target)?y.target:null,specialCauseSinglePointAbove:!1,specialCauseSinglePointBelow:!1,specialCauseTwoOfThreeAbove:!1,specialCauseTwoOfThreeBelow:!1,specialCauseFourOfFiveAbove:!1,specialCauseFourOfFiveBelow:!1,specialCauseShiftHigh:!1,specialCauseShiftLow:!1,specialCauseTrendIncreasing:!1,specialCauseTrendDecreasing:!1,specialCauseFifteenInnerThird:!1,variationIcon:"none",assuranceIcon:"none",upperBaseline:F&&pe(C)?C:null,lowerBaseline:F&&pe(C)?C:null,movingRangeHighPointValue:F&&pe(j)?j:null,ghostValue:y.ghost&&pe(y.value)?y.value:null,ghostFlag:!!y.ghost,specialCauseImprovementValue:null,specialCauseConcernValue:null,specialCauseNeitherValue:null,ruleTags:[]}});g[p]=M.filter(y=>!y.ghost&&pe(y.value)).length;const _=i.specialCauseShiftPoints??6,v=i.specialCauseTrendPoints??6,D=[];for(let y=0;y<M.length;y++){const N=M[y],A=N.value;if(!N.ghost&&pe(A)&&D.push(y),!(pe(N.mean)&&pe(N.upperProcessLimit)&&pe(N.lowerProcessLimit))||N.ghost||!pe(A)){u.push(N);continue}N.specialCauseSinglePointAbove=pe(N.upperProcessLimit)?A>N.upperProcessLimit:!1,N.specialCauseSinglePointBelow=pe(N.lowerProcessLimit)?A<N.lowerProcessLimit:!1,u.push(N)}if(D.length){const y=F=>M[F];let N=[],A=[];for(const F of D){const L=y(F);if(!pe(L.mean)||!pe(L.value)){N=[],A=[];continue}if(L.value>L.mean?(N.push(F),A=[]):L.value<L.mean?(A.push(F),N=[]):(N=[],A=[]),N.length>=_)for(const k of N)y(k).specialCauseShiftHigh=!0;if(A.length>=_)for(const k of A)y(k).specialCauseShiftLow=!0}for(let F=0;F<=D.length-3;F++){const k=D.slice(F,F+3).map(y);if(!k.every(ne=>pe(ne.mean)&&pe(ne.value)))continue;const H=k[0].mean,Q=k.every(ne=>ne.value>H),O=k.every(ne=>ne.value<H);if(!Q&&!O)continue;const z=k[0].upperTwoSigma??1/0,$=k[0].lowerTwoSigma??-1/0,I=k[0].upperProcessLimit??1/0,U=k[0].lowerProcessLimit??-1/0,R=k.filter(ne=>ne.value>z&&ne.value<=I),K=k.filter(ne=>ne.value<$&&ne.value>=U);if(Q&&R.length>=2)for(const ne of R)ne.specialCauseTwoOfThreeAbove=!0;if(O&&K.length>=2)for(const ne of K)ne.specialCauseTwoOfThreeBelow=!0}if(i.enableFourOfFiveRule)for(let F=0;F<=D.length-5;F++){const k=D.slice(F,F+5).map(y);if(!k.every(I=>pe(I.mean)&&pe(I.value)))continue;const H=k[0].mean;if(!k.every(I=>I.value>H)&&!k.every(I=>I.value<H))continue;const Q=k[0].upperOneSigma??1/0,O=k[0].lowerOneSigma??-1/0,z=k.filter(I=>I.value>Q),$=k.filter(I=>I.value<O);if(k.every(I=>I.value>H)&&z.length>=4)for(const I of z)I.specialCauseFourOfFiveAbove=!0;if(k.every(I=>I.value<H)&&$.length>=4)for(const I of $)I.specialCauseFourOfFiveBelow=!0}for(let F=0;F<=D.length-v;F++){const L=D.slice(F,F+v),k=L.map(y);if(!k.every(O=>pe(O.value)))continue;let H=!0,Q=!0;for(let O=1;O<k.length&&(k[O].value>k[O-1].value||(H=!1),k[O].value<k[O-1].value||(Q=!1),!(!H&&!Q));O++);if(H)for(const O of L)y(O).specialCauseTrendIncreasing=!0;if(Q)for(const O of L)y(O).specialCauseTrendDecreasing=!0}if(i.enableFifteenInInnerThirdRule){let F=[];for(const L of D){const k=y(L);if(!pe(k.value)||!pe(k.mean)||!pe(k.upperOneSigma)||!pe(k.lowerOneSigma)){F=[];continue}if(!(k.value<k.upperOneSigma&&k.value>k.lowerOneSigma)){F=[];continue}if(F.push(L),F.length>=15){const Q=F.map(y),O=Q.some($=>$.value>$.mean),z=Q.some($=>$.value<$.mean);if(O&&z)for(const $ of F)y($).specialCauseFifteenInnerThird=!0}}}}if(i.maximumPointsPartition&&Number.isFinite(i.maximumPointsPartition)){const y=i.maximumPointsPartition;let N=0;for(const A of u.filter(F=>F.partitionId===p))!A.ghost&&pe(A.value)&&N++,N>y&&(A.mean=A.upperProcessLimit=A.lowerProcessLimit=null,A.upperTwoSigma=A.lowerTwoSigma=A.upperOneSigma=A.lowerOneSigma=null)}}for(const m of u){if(m.ruleTags&&m.ruleTags.length)continue;const h=[];m.specialCauseShiftHigh&&h.push("shift_high"),m.specialCauseShiftLow&&h.push("shift_low"),m.specialCauseTrendIncreasing&&h.push("trend_inc"),m.specialCauseTrendDecreasing&&h.push("trend_dec"),m.specialCauseSinglePointAbove&&h.push("single_above"),m.specialCauseSinglePointBelow&&h.push("single_below"),m.specialCauseTwoOfThreeAbove&&h.push("two_of_three_high"),m.specialCauseTwoOfThreeBelow&&h.push("two_of_three_low"),m.specialCauseFourOfFiveAbove&&h.push("four_of_five_high"),m.specialCauseFourOfFiveBelow&&h.push("four_of_five_low"),m.specialCauseFifteenInnerThird&&h.push("fifteen_inner_third"),h.length&&(m.ruleTags=h)}for(let m=0;m<u.length;m++){const h=u[m];if(h.ghost||!pe(h.value)||h.mean===null){h.variationIcon="none";continue}const P=pe(h.value)&&pe(h.mean)&&h.value>h.mean,T=pe(h.value)&&pe(h.mean)&&h.value<h.mean;i.collapseClusterRules&&(h.specialCauseTwoOfThreeAbove&&h.specialCauseFourOfFiveAbove&&(h.specialCauseTwoOfThreeAbove=!1),h.specialCauseTwoOfThreeBelow&&h.specialCauseFourOfFiveBelow&&(h.specialCauseTwoOfThreeBelow=!1));const C=h.specialCauseSinglePointAbove||h.specialCauseTwoOfThreeAbove||i.enableFourOfFiveRule&&h.specialCauseFourOfFiveAbove||h.specialCauseShiftHigh||h.specialCauseTrendIncreasing&&P,w=h.specialCauseSinglePointBelow||h.specialCauseTwoOfThreeBelow||i.enableFourOfFiveRule&&h.specialCauseFourOfFiveBelow||h.specialCauseShiftLow||h.specialCauseTrendDecreasing&&T;let j=!1;if(i.precedenceStrategy==="directional_first"&&i.emergingDirectionGrace){const M=i.specialCauseTrendPoints||6;if(M>1&&!(h.specialCauseTrendIncreasing||h.specialCauseTrendDecreasing)){const _=M-1,v=[];for(let D=m;D>=0&&v.length<_;D--){const y=u[D];!y.ghost&&pe(y.value)&&y.mean!==null&&v.unshift(y)}if(v.length===_){let D=!0;for(let y=1;y<v.length&&D;y++)n==="Up"?v[y].value>v[y-1].value||(D=!1):n==="Down"&&v[y].value<v[y-1].value||(D=!1);j=D}}}if(i.precedenceStrategy==="directional_first"){const M=n==="Up"?C:n==="Down"?w:!1,_=n==="Up"?w:n==="Down"?C:!1;M&&!_?h.variationIcon="improvement":_&&!M?h.variationIcon=j?"neither":"concern":M&&_?h.variationIcon=j||h.specialCauseTrendIncreasing||h.specialCauseTrendDecreasing?"improvement":"neither":h.variationIcon="neither"}else n==="Up"?h.variationIcon=C?"improvement":w?"concern":"neither":n==="Down"?h.variationIcon=w?"improvement":C?"concern":"neither":h.variationIcon="neither";const S=C||w;if(h.specialCauseImprovementValue=S&&h.variationIcon==="improvement"?h.value:null,h.specialCauseConcernValue=S&&h.variationIcon==="concern"?h.value:null,h.specialCauseNeitherValue=S&&h.variationIcon==="neither"?h.value:null,pe(h.value)&&h.mean!==null){h.assuranceIcon="none";const M=s[h.rowId-1];if(pe(M.target)){const _=M.target;i.assuranceCapabilityMode&&pe(h.upperProcessLimit)&&pe(h.lowerProcessLimit)?n==="Up"?h.lowerProcessLimit!==null&&h.lowerProcessLimit>_?h.assuranceIcon="pass":h.upperProcessLimit!==null&&h.upperProcessLimit<_?h.assuranceIcon="fail":h.assuranceIcon="none":n==="Down"?h.upperProcessLimit!==null&&h.upperProcessLimit<_?h.assuranceIcon="pass":h.lowerProcessLimit!==null&&h.lowerProcessLimit>_?h.assuranceIcon="fail":h.assuranceIcon="none":h.assuranceIcon="none":n==="Down"?h.assuranceIcon=h.value<=_?"pass":"fail":n==="Up"?h.assuranceIcon=h.value>=_?"pass":"fail":h.assuranceIcon="none"}}}if((i.minimumPointsWarning??!1)&&!f){const m=s.filter(h=>!h.ghost&&pe(h.value)).length;c.push({code:"insufficient_points_global",category:"data",severity:"warning",message:`Only ${m} non-ghost points available; minimum required is ${i.minimumPoints}. Limits and icons suppressed.`,context:{available:m,minimumRequired:i.minimumPoints}})}if(i.variationIconConflictWarning)for(const m of u)m.variationIcon==="improvement"&&(m.specialCauseSinglePointAbove||m.specialCauseTwoOfThreeAbove||i.enableFourOfFiveRule&&m.specialCauseFourOfFiveAbove||m.specialCauseShiftHigh||m.specialCauseTrendIncreasing)&&(m.specialCauseSinglePointBelow||m.specialCauseTwoOfThreeBelow||i.enableFourOfFiveRule&&m.specialCauseFourOfFiveBelow||m.specialCauseShiftLow||m.specialCauseTrendDecreasing)&&c.push({code:"variation_conflict_row",category:"logic",severity:"warning",message:`Row ${m.rowId}: simultaneous high/low special-cause signals â€“ variation icon may be ambiguous.`,context:{rowId:m.rowId}});if(i.maximumPoints&&Number.isFinite(i.maximumPoints)){const m=i.maximumPoints;let h=0;for(const P of u)!P.ghost&&pe(P.value)&&h++,h>m&&(P.mean=P.upperProcessLimit=P.lowerProcessLimit=null,P.upperTwoSigma=P.lowerTwoSigma=P.upperOneSigma=P.lowerOneSigma=null)}if(i.nullValueWarning&&(e==="XmR"||e==="G")){const m=s.filter(h=>!h.ghost&&(h.value===null||h.value===void 0||!pe(h.value))).length;m&&c.push({code:"null_values_excluded",category:"data",severity:"info",message:`${m} null/missing value(s) excluded from calculations.`,context:{nullCount:m}})}if(i.targetSuppressedWarning&&(e==="T"||e==="G")&&s.some(h=>pe(h.target))&&c.push({code:"target_ignored_rare_event",category:"target",severity:"info",message:`Targets provided are ignored for ${e} charts in this port.`,context:{chartType:e}}),i.ghostOnRareEventWarning&&(e==="T"||e==="G")){const m=s.filter(h=>h.ghost).length;m&&c.push({code:"ghost_rows_rare_event",category:"ghost",severity:"info",message:`${m} ghost row(s) supplied for rare-event chart (${e}); verify intent.`,context:{chartType:e,ghostCount:m}})}if(i.partitionSizeWarnings&&Object.entries(g).forEach(([m,h])=>{h<i.minimumPointsPartition&&c.push({code:"insufficient_points_partition",category:"partition",severity:"warning",message:`Partition ${m} has only ${h} non-ghost point(s); below recommended ${i.minimumPointsPartition}.`,context:{partitionId:Number(m),count:h,minimum:i.minimumPointsPartition}})}),i.baselineSpecialCauseWarning){const m=[];u.forEach(h=>{s[h.rowId-1].baseline&&(h.specialCauseSinglePointAbove||h.specialCauseSinglePointBelow||h.specialCauseTwoOfThreeAbove||h.specialCauseTwoOfThreeBelow||h.specialCauseFourOfFiveAbove||h.specialCauseFourOfFiveBelow||h.specialCauseShiftHigh||h.specialCauseShiftLow||h.specialCauseTrendIncreasing||h.specialCauseTrendDecreasing)&&m.push(h.rowId)}),m.length&&c.push({code:"baseline_with_special_cause",category:"baseline",severity:"warning",message:`Baseline set with special-cause present at row(s): ${m.join(", ")}.`,context:{rows:m}})}i.maximumPointsWarnings&&(i.maximumPointsPartition&&Number.isFinite(i.maximumPointsPartition)&&c.push({code:"partition_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after ${i.maximumPointsPartition} non-ghost points per partition.`,context:{cap:i.maximumPointsPartition}}),i.maximumPoints&&Number.isFinite(i.maximumPoints)&&c.push({code:"global_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after global cap of ${i.maximumPoints} non-ghost points.`,context:{cap:i.maximumPoints}}));let x;if(i.baselineSuggest){const m=u,h=i.baselineSuggestStabilityPoints,P=i.baselineSuggestMinGap,T=i.baselineSuggestMinDeltaSigma,C=i.baselineSuggestScoreThreshold,w=[];let j=0;for(let S=0;S<m.length;S++){let M=function(y){return!!_[y]&&!v?.[y]};const _=m[S];S>0&&m[S-1].partitionId!==_.partitionId&&(j=S);const v=m[S-1],D=[];(M("specialCauseShiftHigh")||M("specialCauseShiftLow"))&&D.push({reason:"shift",index:S}),(M("specialCauseTrendIncreasing")||M("specialCauseTrendDecreasing"))&&D.push({reason:"trend",index:S}),(M("specialCauseSinglePointAbove")||M("specialCauseSinglePointBelow"))&&D.push({reason:"point",index:S});for(const y of D){if(y.index-j<P)continue;const N=Math.max(0,y.index-h),A=y.index-1;if(A-N+1<h)continue;const F=y.index,L=y.index+h-1;if(L>=m.length)continue;const k=m.slice(N,A+1).map(q=>q.value).filter(pe),H=m.slice(F,L+1).map(q=>q.value).filter(pe);if(k.length<h||H.length<h)continue;const Q=m[y.index];let O=null;if(pe(Q.upperProcessLimit)&&pe(Q.mean)){const q=Q.upperProcessLimit-Q.mean;q>0&&(O=q/3)}if(!O||O<=0)continue;const z=Ht(k),$=Ht(H),I=$-z;if(Math.abs(I)<T*O)continue;const R=m.slice(F,L+1).filter(q=>q.variationIcon==="concern").length;if(R>1)continue;const K=q=>{const oe=Ht(q);return q.length?q.reduce((W,Z)=>W+(Z-oe)*(Z-oe),0)/q.length:0},ne=K(k),ce=K(H);let re=y.reason==="shift"?90:y.reason==="trend"?70:60;if(ce<ne&&(re+=10),re-=R*15,re<C)continue;const Y=w.find(q=>q.index===y.index);if(Y){const q=oe=>oe==="shift"?3:oe==="trend"?2:1;(q(y.reason)>q(Y.reason)||re>Y.score)&&(Y.reason=y.reason,Y.score=re,Y.deltaMean=I,Y.oldMean=z,Y.newMean=$,Y.window=[F,L])}else w.push({index:y.index,reason:y.reason,score:re,deltaMean:I,oldMean:z,newMean:$,window:[F,L]})}S>0&&m[S-1].partitionId!==m[S].partitionId&&(j=S)}w.sort((S,M)=>S.index-M.index),x=w}return{rows:u,warnings:c,...x?{suggestedBaselines:x}:{}}}const Zs={singlePointAbove:{tooltip:"Single point above upper control limit",narration:"Single point beyond a control limit"},singlePointBelow:{tooltip:"Single point below lower control limit",narration:"Single point beyond a control limit"},twoOfThreeAbove:{tooltip:"Two of three points beyond +2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},twoOfThreeBelow:{tooltip:"Two of three points beyond -2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},fourOfFiveAbove:{tooltip:"Four of five points beyond +1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},fourOfFiveBelow:{tooltip:"Four of five points beyond -1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},shiftHigh:{tooltip:"Shift: run of points above centre line",narration:"Shift (run on one side of mean)"},shiftLow:{tooltip:"Shift: run of points below centre line",narration:"Shift (run on one side of mean)"},trendIncreasing:{tooltip:"Trend: consecutive increasing points",narration:"Trend (consecutive increases)"},trendDecreasing:{tooltip:"Trend: consecutive decreasing points",narration:"Trend (consecutive decreases)"}};function Js(t){if(!t)return[];const e=[];return t.specialCauseSinglePointAbove&&e.push("singlePointAbove"),t.specialCauseSinglePointBelow&&e.push("singlePointBelow"),t.specialCauseTwoOfThreeAbove&&e.push("twoOfThreeAbove"),t.specialCauseTwoOfThreeBelow&&e.push("twoOfThreeBelow"),t.specialCauseFourOfFiveAbove&&e.push("fourOfFiveAbove"),t.specialCauseFourOfFiveBelow&&e.push("fourOfFiveBelow"),t.specialCauseShiftHigh&&e.push("shiftHigh"),t.specialCauseShiftLow&&e.push("shiftLow"),t.specialCauseTrendIncreasing&&e.push("trendIncreasing"),t.specialCauseTrendDecreasing&&e.push("trendDecreasing"),e}function Qs(t){switch(t){case Ve.Improvement:return"Improvement signal";case Ve.Concern:return"Concern signal";case Ve.Neither:return"Common cause variation";case Ve.None:return null;default:return null}}function Tx(t){switch(t){case _n.Pass:return"Target met";case _n.Fail:return"Target not met";default:return null}}function Nx(t,e,n){if(t==null||!Number.isFinite(e)||e<=0)return null;const r=Math.abs((n-t)/e);return r<1?"Within 1Ïƒ":r<2?"Between 1â€“2Ïƒ":r<3?"Between 2â€“3Ïƒ":"Beyond 3Ïƒ"}const Lt={improvement:{token:"var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",hex:"#00B0F0"},concern:{token:"var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",hex:"#E46C0A"},none:{token:"var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",hex:"#490092"},neither:{token:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",hex:"#A6A6A6"}};function hd(t){return t?Lt[t]?.token??Lt.neither.token:Lt.neither.token}function jx(t){return t?Lt[t]?.hex??Lt.neither.hex:Lt.neither.hex}const md=({engineRows:t,limits:e,pointDescriber:n,measureName:r,measureUnit:a,dateFormatter:i})=>{const s=bn(),l=gn(),[u,c]=G.useState(null),[d,f]=G.useState(!1),p=G.useRef(null);G.useEffect(()=>{if(s){if(s.focused&&(c(s.focused),p.current&&(cancelAnimationFrame(p.current),p.current=null)),!s.focused&&!d){const ie=requestAnimationFrame(()=>{c(null),p.current=null});p.current=ie}return()=>{p.current&&(cancelAnimationFrame(p.current),p.current=null)}}},[s,s?.focused,d]);const g=s&&(s.focused||(d?u:null)||u),[x,m]=G.useState(!1);G.useEffect(()=>{const ie=requestAnimationFrame(()=>m(!0));return()=>cancelAnimationFrame(ie)},[g?.index]);const h=l?.innerWidth??0,P=l?.innerHeight??0,T=g?Math.min(Math.max(g.clientX,0),h):0,C=g?Math.min(Math.max(g.clientY,0),P):0,j=l.ref?.current;if(!g)return null;const S=t?.[g.index],_=Js(S).map(ie=>({id:ie,label:Zs[ie].tooltip})),v=g.x instanceof Date?g.x:new Date(g.x),D=i?i(v):v.toDateString(),y=a?`${a}`:"",N=r||y?`${g.y}${y?""+y:" "}${r?" "+r:""}`:`${g.y}`,A=Qs(S?.variationIcon),F=Tx(S?.assuranceIcon),L=Nx(e.mean??null,e.sigma,g.y),k=n?n(g.index,{x:g.x,y:g.y}):void 0,H=A||F||L,Q=S?.specialCauseTrendIncreasing||S?.specialCauseTrendDecreasing,z=S?.variationIcon===Ve.Neither&&Q?"Trend detected (monotonic run) â€“ held neutral until values cross onto the favourable side of the mean.":null,$=_.length>0,I=S?.variationIcon===Ve.Neither&&$,U="var(--nhs-fdp-color-primary-yellow, #ffeb3b)",R=hd(S?.variationIcon),K=6.2,ce=[k||"",`${D} â€¢ ${N}`].filter(Boolean).reduce((ie,he)=>Math.max(ie,he.length*K+32),0),re=200,Y=440,q=Math.min(Y,Math.max(re,ce));let oe=T+12,Z=(l.margin?.top??0)+C+16;oe+q>h&&(oe=T- -60-q),oe<0&&(oe=Math.max(0,h-q));const J=g?`spc-tooltip-${g.index}`:"spc-tooltip",le=j?wg.createPortal(o.jsx("div",{id:J,className:"fdp-spc-tooltip fdp-spc-tooltip-portal"+(x?" is-visible":""),style:{position:"absolute",left:oe,top:Z,width:q,maxWidth:Y,zIndex:10,pointerEvents:"auto",userSelect:"none"},role:"tooltip","aria-live":"polite","aria-hidden":x?"false":"true","data-floating":!0,"data-placement":oe+q+12>h?"left":"right",onPointerEnter:()=>{f(!0),p.current&&(cancelAnimationFrame(p.current),p.current=null)},onPointerLeave:()=>{if(f(!1),!s?.focused){const ie=requestAnimationFrame(()=>{c(null),p.current=null});p.current=ie}},children:o.jsxs("div",{className:"fdp-spc-tooltip__body",children:[o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--date",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Date"})}),o.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:D})]}),o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--value",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Value"})}),o.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:N})]}),H&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--signals",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Signals"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Signals",children:A?.toLowerCase().includes("concern")?o.jsx(Ye,{text:A,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):A?.toLowerCase().includes("improvement")?o.jsx(Ye,{text:A,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):I?o.jsx(Ye,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):A?o.jsx(Ye,{text:A,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null})]}),F&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--assurance",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Assurance"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:(()=>{const ie=F.toLowerCase(),ye=!(ie.includes("not met")||ie.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(ie);return o.jsx(Ye,{text:F,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${ye?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${F}`})})()})]}),L&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--limits",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Control Limits & Sigma"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:o.jsx(Ye,{text:(()=>{const ie=L.toLowerCase();return ie.startsWith("within 1")?"â‰¤1Ïƒ":ie.startsWith("1â€“2")?"1â€“2Ïƒ":ie.startsWith("2â€“3")?"2â€“3Ïƒ":ie.startsWith(">3")?">3Ïƒ":L})(),color:L.includes(">3")?"orange":L.includes("2â€“3")?"yellow":"grey","aria-label":`Sigma zone: ${L}`,className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--zone"})})]}),z&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--gating","data-gating":!0,children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Trend gating"})}),o.jsx("div",{className:"fdp-spc-tooltip__explanation","aria-live":"off",children:z})]}),$&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Special cause"})}),o.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",children:_.map(({id:ie,label:he})=>{const ye=String(ie),Te=ye==="trend_inc"||ye==="trend_dec"?"fdp-spc-tag--trend":I?"fdp-spc-tag--no-judgement":A?A.toLowerCase().includes("concern")?"fdp-spc-tag--concern":A.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common";return o.jsx(Ye,{text:he,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${Te}`,"data-rule-id":ye},ye)})})]})]})}),j):null;return o.jsxs("g",{className:"fdp-tooltip-layer fdp-spc-tooltip",pointerEvents:"none","aria-hidden":"true",children:[o.jsx("circle",{cx:T,cy:C,r:7,fill:"none",stroke:U,strokeWidth:3}),o.jsx("circle",{cx:T,cy:C,r:5,fill:"#000",stroke:U,strokeWidth:1.5}),o.jsx("circle",{cx:T,cy:C,r:2.5,fill:R,stroke:"#fff",strokeWidth:.5}),le]})};let eo=null;try{eo=require("@fergusbisset/nhs-fdp-design-system/dist/js/tokens.json")?.color?.["data-viz"]?.spc||null}catch{}const jt=(t,e)=>{if(!eo)return e;const n=t.split(".");let r=eo;for(const i of n){if(r==null)break;r=r[i]}const a=r;return a==null?e:typeof a=="string"||typeof a=="number"?String(a):a.$value!=null?String(a.$value):a.value!=null?String(a.value):e},pd=()=>({start:jt("gradient.stop.start-opacity","0.12"),mid:jt("gradient.stop.mid-opacity","0.03"),end:jt("gradient.stop.end-opacity","0"),triStart:jt("gradient.stop.triangle-start-opacity",jt("gradient.stop.start-opacity","0.12")),triMid:jt("gradient.stop.triangle-mid-opacity",jt("gradient.stop.mid-opacity","0.03")),triEnd:jt("gradient.stop.triangle-end-opacity",jt("gradient.stop.end-opacity","0"))});var Hn=(t=>(t.Pass="pass",t.Fail="fail",t.Uncertain="uncertain",t))(Hn||{});const Dx={pass:"#00B0F0",fail:"#E46C0A",uncertain:"#A6A6A6"},Mx={pass:"P",fail:"F",uncertain:"?"};var Ze=(t=>(t.HigherIsBetter="higher_is_better",t.LowerIsBetter="lower_is_better",t.ContextDependent="context_dependent",t))(Ze||{}),Se=(t=>(t.Higher="higher",t.Lower="lower",t))(Se||{}),pt=(t=>(t.Improving="improving",t.Deteriorating="deteriorating",t.No_Judgement="no_judgement",t.None="none",t))(pt||{}),$e=(t=>(t.SpecialCauseImproving="special_cause_improving",t.SpecialCauseDeteriorating="special_cause_deteriorating",t.CommonCause="common_cause",t.SpecialCauseNoJudgement="special_cause_no_judgement",t))($e||{});const $x=t=>{const e=t.replace("#",""),n=parseInt(e.slice(0,2),16)/255,r=parseInt(e.slice(2,4),16)/255,a=parseInt(e.slice(4,6),16)/255,i=[n,r,a].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*i[0]+.7152*i[1]+.0722*i[2]<.55?"#ffffff":"#212b32"},to={special_cause_deteriorating:{hex:Lt.concern.hex,judgement:"deteriorating",label:"Special Cause (Deteriorating)",description:"Deteriorating variation detected (special cause) relative to baseline."},special_cause_improving:{hex:Lt.improvement.hex,judgement:"improving",label:"Special Cause (Improving)",description:"Improving variation detected (special cause) relative to baseline."},common_cause:{hex:Lt.neither.hex,judgement:"none",label:"Common Cause",description:"Common cause variation only â€“ no special cause detected."},special_cause_no_judgement:{hex:Lt.none.hex,judgement:"no_judgement",label:"Special Cause (No Judgement)",description:"Special cause detected without assigning improving/deteriorating judgement."}};Object.values(to).forEach(t=>{t.text||(t.text=$x(t.hex))});const gd=t=>to[t],no=t=>to[t].judgement||"none",bd={special:{higher:[{cx:77.5,cy:158.5},{cx:114,cy:175},{cx:150.5,cy:158.5},{cx:188,cy:125},{cx:225,cy:137}],lower:[{cx:77.5,cy:139.5},{cx:114,cy:124.5},{cx:150.5,cy:139.5},{cx:188,cy:175.5},{cx:224.5,cy:162}]},common:[{cx:76.5,cy:149.5},{cx:113,cy:179.5},{cx:149.5,cy:117},{cx:187,cy:171},{cx:223.5,cy:158}]};function Ix(t,e){let n;return t==="common_cause"?n=bd.common:n=bd.special[e==="lower"?"lower":"higher"],n.map(r=>({...r}))}const _d=t=>{const e=()=>{globalThis.__spcIconDeprecationEmitted||(console.warn("[SPCVariationIcon] Deprecated payload shape detected. Migrate to { variationIcon, improvementDirection, specialCauseNeutral?, trend? }."),globalThis.__spcIconDeprecationEmitted=!0)};if(t.variationIcon!==void 0){const s=t;let l;s.improvementDirection!==void 0?l=s.improvementDirection===Et.Up?Ze.HigherIsBetter:s.improvementDirection===Et.Down?Ze.LowerIsBetter:Ze.ContextDependent:s.polarity&&(l=s.polarity);let u;switch(s.variationIcon){case Ve.Improvement:u=$e.SpecialCauseImproving;break;case Ve.Concern:u=$e.SpecialCauseDeteriorating;break;case Ve.Neither:u=s.specialCauseNeutral?$e.SpecialCauseNoJudgement:$e.CommonCause;break;case Ve.None:default:u=$e.SpecialCauseNoJudgement;break}let c=s.trend;return c||(u===$e.SpecialCauseImproving?c=l===Ze.LowerIsBetter?Se.Lower:Se.Higher:u===$e.SpecialCauseDeteriorating?c=l===Ze.LowerIsBetter?Se.Higher:Se.Lower:u===$e.SpecialCauseNoJudgement?s.highSideSignal&&!s.lowSideSignal?c=Se.Higher:s.lowSideSignal&&!s.highSideSignal?c=Se.Lower:c=Se.Higher:c=Se.Higher),{state:u,direction:c,polarity:l??Ze.ContextDependent}}if(t.state!==void 0){e();const s=t;let l=s.trend;return!l&&(s.state===$e.SpecialCauseImproving||s.state===$e.SpecialCauseDeteriorating)&&s.polarity&&(s.state===$e.SpecialCauseImproving?l=s.polarity===Ze.LowerIsBetter?Se.Lower:Se.Higher:l=s.polarity===Ze.LowerIsBetter?Se.Higher:Se.Lower),l||(s.state===$e.SpecialCauseImproving?l=Se.Higher:s.state===$e.SpecialCauseDeteriorating?l=Se.Lower:l=Se.Higher),{state:s.state,direction:l,polarity:s.polarity??Ze.ContextDependent}}const n=t;e();const a={[pt.Improving]:$e.SpecialCauseImproving,[pt.Deteriorating]:$e.SpecialCauseDeteriorating,[pt.No_Judgement]:$e.SpecialCauseNoJudgement,[pt.None]:$e.CommonCause}[n.judgement];let i;return n.judgement===pt.Improving?i=n.polarity===Ze.LowerIsBetter?Se.Lower:Se.Higher:n.judgement===pt.Deteriorating?i=n.polarity===Ze.LowerIsBetter?Se.Higher:Se.Lower:i=n.trend??Se.Higher,{state:a,direction:i,polarity:n.polarity}};function Px(t,e){const{state:n,direction:r,polarity:a}=_d(t),i=no(n),s=r===Se.Higher?"above":"below",l=r===Se.Higher?"upwards":"downwards",u=(()=>{switch(a){case Ze.HigherIsBetter:return"For this measure, higher values are better.";case Ze.LowerIsBetter:return"For this measure, lower values are better.";default:return"Direction of improvement is context dependent."}})();return[(()=>{switch(i){case pt.Improving:return`Special cause improvement: recent data show a sustained run ${s} the mean (unlikely due to random variation).`;case pt.Deteriorating:return`Special cause deterioration: recent data show a sustained run ${s} the mean (unlikely due to random variation).`;case pt.No_Judgement:return`Special cause detected (no value judgement): recent data show a change in level, trending ${l}.`;case pt.None:default:return"Common cause variation: points vary randomly around the mean; no special cause detected."}})(),u,null,null,null,null,null].filter(Boolean).join(" ")}const ro=(t,e,n,r,a,i)=>o.jsxs("defs",{children:[r&&o.jsxs("filter",{id:e,filterUnits:"objectBoundingBox",children:[o.jsx("feGaussianBlur",{stdDeviation:"3"}),o.jsx("feOffset",{dx:"0",dy:"15",result:"blur"}),o.jsx("feFlood",{floodColor:"rgb(150,150,150)",floodOpacity:"1"}),o.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),a&&o.jsx("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:i.map(s=>o.jsx("stop",{offset:s.offset,stopColor:t,stopOpacity:parseFloat(s.opacity)},s.offset))})]}),ao=({data:t,size:e=44,ariaLabel:n,showLetter:r=!0,dropShadow:a=!0,gradientWash:i=!1,variant:s="classic",runLength:l=0,letterMode:u="polarity",letterOverride:c,...d})=>{const f=B.useId(),p=B.useId(),{start:g,mid:x,end:m,triStart:h,triMid:P,triEnd:T}=pd(),{state:C,direction:w,polarity:j}=B.useMemo(()=>_d(t),[t]),S=B.useMemo(()=>gd(C),[C]),M=B.useMemo(()=>no(C),[C]),_=M===pt.Improving||M===pt.Deteriorating;let v="";r&&_&&(u==="polarity"?j===Ze.HigherIsBetter?v="H":j===Ze.LowerIsBetter?v="L":v="":v=w===Se.Higher?"H":"L"),c!==void 0&&(v=c);const D=C!==$e.CommonCause,y=C===$e.SpecialCauseNoJudgement,N=jt("common-cause","#A6A6A6"),A=D?S.hex:N,F=B.useMemo(()=>Ix(C,w),[C,w]),L=n||`${S.label}${v?w===Se.Higher?" â€“ Higher":" â€“ Lower":""}`,k=Px(t);if(s==="triangleWithRun"){const $=[[150,90],[100,190],[200,190]],I=[[150,140+100/2],[150-100/2,140-100/2],[150+100/2,140-100/2]];let U=null;C===$e.SpecialCauseImproving||C===$e.SpecialCauseDeteriorating?U=o.jsx("polygon",{points:(w===Se.Higher?$:I).map(Z=>Z.join(",")).join(" "),fill:S.hex,stroke:S.hex,strokeWidth:6,transform:w===Se.Higher?"translate(0, -15)":"translate(0, 15)"}):C===$e.SpecialCauseNoJudgement&&(U=o.jsx("polygon",{points:w===Se.Higher?$.map(Z=>Z.join(",")).join(" "):I.map(Z=>Z.join(",")).join(" "),fill:S.hex,stroke:S.hex,strokeWidth:6,transform:w===Se.Higher?"translate(0,-6)":"translate(0,6)"}));const R=Math.max(0,Math.min(5,Math.floor(l||0))),K=C===$e.CommonCause?160:w===Se.Higher?210:70,ne=10,ce=26,re=150-2*ce,Y=C===$e.SpecialCauseImproving?jt("improvement","#00B0F0"):C===$e.SpecialCauseDeteriorating?jt("concern","#E46C0A"):N,q=Array.from({length:5}).map((Z,J)=>{const ie=(C===$e.SpecialCauseImproving||C===$e.SpecialCauseDeteriorating)&&J>=5-R?Y:N;return o.jsx("circle",{cx:re+J*ce,cy:K,r:ne,fill:ie,stroke:ie,strokeWidth:1},J)}),oe=ro(S.hex,f,p,a,i,[{offset:"0%",opacity:h},{offset:"75%",opacity:P},{offset:"100%",opacity:T}]),W=C===$e.CommonCause||w===Se.Higher?"translate(0,-10)":"translate(0,20)";return o.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":L,"aria-description":k,...d,children:[oe,o.jsx("circle",{stroke:"none",fill:i?`url(#${p})`:"#ffffff",...a?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:S.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),o.jsxs("g",{transform:W,children:[U,v&&o.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:64,x:"150",y:w===Se.Higher?150:145,textAnchor:"middle",dominantBaseline:"middle",children:v}),q]})]})}if(s==="triangle"){const $=[[150,75],[75,225],[225,225]],I=[[150,150+150/2],[150-150/2,150-150/2],[150+150/2,150-150/2]],U=[[150-150/2,150+150/2],[150+150/2,150+150/2]];let R=null;C===$e.SpecialCauseImproving||C===$e.SpecialCauseDeteriorating?R=o.jsx("polygon",{points:(w===Se.Higher?$:I).map(ne=>ne.join(",")).join(" "),fill:S.hex,stroke:S.hex,strokeWidth:8,transform:w===Se.Higher?"translate(0, -10)":"translate(0, 10)"}):C===$e.SpecialCauseNoJudgement?R=o.jsx("polygon",{points:w===Se.Higher?$.map(ne=>ne.join(",")).join(" "):I.map(ne=>ne.join(",")).join(" "),fill:S.hex,stroke:S.hex,strokeWidth:8,transform:w===Se.Higher?"translate(0, -15)":"translate(0, 15)"}):C===$e.CommonCause&&(R=o.jsx("line",{x1:U[0][0],y1:U[0][1],x2:U[1][0],y2:U[1][1],stroke:S.hex,strokeWidth:32,strokeLinecap:"square",transform:"translate(0, -75)"}));const K=ro(S.hex,f,p,a,i,[{offset:"0%",opacity:h},{offset:"65%",opacity:P},{offset:"100%",opacity:T}]);return o.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":L,"aria-description":k,...d,children:[K,o.jsx("circle",{stroke:"none",fill:i?`url(#${p})`:"#ffffff",...a?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:S.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),R,v&&(C===$e.SpecialCauseImproving||C===$e.SpecialCauseDeteriorating)&&o.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:100,x:"150",y:w===Se.Higher?"170":"140",textAnchor:"middle",dominantBaseline:"middle",children:v})]})}const H=ro(S.hex,f,p,a,i,[{offset:"0%",opacity:g},{offset:"65%",opacity:x},{offset:"100%",opacity:m}]);return o.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":L,"aria-description":k,...d,children:[H,o.jsx("circle",{stroke:"none",fill:i?`url(#${p})`:"#ffffff",...a?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:S.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),v&&o.jsx("text",{fill:S.hex,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,transform:"translate(86.67, 54) scale(0.5, 0.5)",textAnchor:"end",children:o.jsx("tspan",{x:"120",y:w===Se.Lower?"340":"155",children:v})}),y?o.jsx("path",{"aria-hidden":"true",fillRule:"evenodd",stroke:"none",fill:S.hex,...w===Se.Lower?{transform:"rotate(90 150 150)"}:{transform:"translate(-5 0) rotate(0 150 150)"},d:"M 90.26,185.42 L 149.31,126.37 127.44,104.51 209.81,90.66 195.96,173.02 174.09,151.16 115.05,210.2 90.26,185.42 Z M 90.26,185.42"}):o.jsxs(o.Fragment,{children:[F.length===5&&o.jsx("path",{"aria-hidden":"true",fill:"none",stroke:N,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9,d:`M ${F.map(Q=>`${Q.cx} ${Q.cy}`).join(" L ")}`}),F.map((Q,O)=>{const $=O>=F.length-2&&D?A:N,I=$;return o.jsx("circle",{stroke:I,strokeWidth:2,strokeMiterlimit:10,fill:$,cx:Q.cx,cy:Q.cy,r:16},O)})]})]})};ao.displayName="SPCVariationIcon";const io=({status:t,size:e=44,ariaLabel:n,dropShadow:r=!0,colourOverride:a,gradientWash:i=!1,letterOverride:s,showTrendLines:l=!0,...u})=>{const c=B.useId(),d=B.useId(),{start:f,mid:p,end:g}=pd(),x=a||Dx[t],m=(s||Mx[t]).slice(0,2),h=n||`Assurance ${t}`;return o.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":h,...u,children:[o.jsxs("defs",{children:[r&&o.jsxs("filter",{id:c,filterUnits:"objectBoundingBox",children:[o.jsx("feGaussianBlur",{stdDeviation:"3"}),o.jsx("feOffset",{dx:"-1",dy:"15",result:"blur"}),o.jsx("feFlood",{floodColor:"rgb(166,166,166)",floodOpacity:"1"}),o.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),i&&o.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:x,stopOpacity:parseFloat(f)}),o.jsx("stop",{offset:"65%",stopColor:x,stopOpacity:parseFloat(p)}),o.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:parseFloat(g)})]})]}),o.jsx("circle",{stroke:"none",fill:i?`url(#${d})`:"#ffffff",...r?{filter:`url(#${c})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("text",{fill:x,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,x:0,y:0,transform:"translate(121.01, 32) scale(0.5, 0.5)",textAnchor:"middle",children:o.jsx("tspan",{x:60,y:184,children:m})}),l&&o.jsxs(o.Fragment,{children:[t===Hn.Fail?o.jsx("path",{id:"fail-line",stroke:x,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 33,143 L 268,143"}):t===Hn.Uncertain?o.jsx("path",{id:"uncertain-line",stroke:"rgb(166, 166, 166)",strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"16.5,10",strokeDashoffset:0,fill:"none",d:"M 36,174 L 266,174"}):o.jsx("path",{id:"pass-line",stroke:x,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 48,204 L 254,204"}),o.jsx("path",{id:"data-sparkline",stroke:"rgb(166, 166, 166)",strokeWidth:12,strokeMiterlimit:12,fill:"none",d:"M 59.9,187.91 C 72.79,171.72 87.33,158.06 104.4,157.83 121.91,158.58 140.94,187.85 153.4,189.91 164.1,192.12 163.78,171.38 169.17,170.53 172.87,169.55 174.88,187.45 184.94,189.24 197,191.86 230.54,184.47 239.01,185.9"}),o.jsx("circle",{stroke:x,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"})]})]})};io.displayName="SPCAssuranceIcon";let Lx=0;const yd=({data:t,ariaLabel:e="SPC chart",height:n=260,showZones:r=!0,showPoints:a=!0,announceFocus:i=!1,className:s,unit:l,highlightOutOfControl:u=!0,chartType:c=Ks.XmR,metricImprovement:d=Et.Neither,enableRules:f=!0,showIcons:p=!1,showEmbeddedIcon:g=!0,embeddedIconVariant:x="classic",embeddedIconRunLength:m,targets:h,baselines:P,ghosts:T,settings:C,narrationContext:w,gradientSequences:j=!1,processLineWidth:S=2,showWarningsPanel:M=!1,warningsFilter:_})=>{const v=G.useCallback(Z=>String(Z).replace(/^spc_warning_code\.?/i,"").replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(le=>le.length?le[0].toUpperCase()+le.slice(1):le).join(" "),[]),D=G.useCallback(Z=>String(Z).replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(J=>J.length?J[0].toUpperCase()+J.slice(1):J).join(" "),[]),y=G.useMemo(()=>{const Z=t.map((J,le)=>({x:J.x,value:J.y,target:h?.[le]??void 0,baseline:P?.[le]??void 0,ghost:T?.[le]??void 0}));try{return fd({chartType:c,metricImprovement:d,data:Z,settings:C})}catch{return null}},[t,h,P,T,c,d,C]),N=y?.rows.slice().reverse().find(Z=>Z.mean!=null),A=N?.mean??null,F=y?.warnings||[],L=G.useMemo(()=>F.length?_?F.filter(Z=>!(_.severities&&Z.severity&&!_.severities.includes(Z.severity)||_.categories&&Z.category&&!_.categories.includes(Z.category)||_.codes&&!_.codes.includes(Z.code))):F:[],[F,_]),[k,H]=G.useState(""),Q=G.useRef("");G.useEffect(()=>{if(!M){Q.current!==""&&(Q.current="",H(""));return}const Z=L.length;if(!Z){const he="Diagnostics: no warnings.";he!==Q.current&&(Q.current=he,H(he));return}const J={error:L.filter(he=>he.severity===yn.Error).length,warning:L.filter(he=>he.severity===yn.Warning).length,info:L.filter(he=>he.severity===yn.Info).length},le=[];J.error&&le.push(`${J.error} error${J.error===1?"":"s"}`),J.warning&&le.push(`${J.warning} warning${J.warning===1?"":"s"}`),J.info&&le.push(`${J.info} info`);const ie=`Diagnostics updated: ${Z} warning${Z===1?"":"s"} (${le.join(", ")}).`;ie!==Q.current&&(Q.current=ie,H(ie))},[M,L]);const O=N?.upperProcessLimit??null,z=N?.lowerProcessLimit??null,$=N?.upperOneSigma??null,I=N?.lowerOneSigma??null,U=N?.upperTwoSigma??null,R=N?.lowerTwoSigma??null,K=A!=null&&$!=null?Math.abs($-A):0,ne=G.useMemo(()=>[{id:"process",data:t,color:"#A6A6A6"}],[t]),ce=G.useMemo(()=>{const J=[...t.map(le=>le.y)];if([A,O,z,$,I,U,R].forEach(le=>{le!=null&&J.push(le)}),h&&h.forEach(le=>{typeof le=="number"&&!isNaN(le)&&J.push(le)}),!!J.length)return[Math.min(...J),Math.max(...J)]},[t,A,O,z,$,I,U,R,h]),re=G.useMemo(()=>{if(!(l||w?.measureUnit)&&t.length)return t.every(Z=>Z.y>=0&&Z.y<=1)?"%":void 0},[l,w?.measureUnit,t]),Y=l??w?.measureUnit??re,q=G.useMemo(()=>Y?{...w||{},measureUnit:Y}:w,[w,Y]),oe=G.useMemo(()=>{if(!y?.rows)return[];const Z=[];for(let J=1;J<y.rows.length;J++)y.rows[J].partitionId!==y.rows[J-1].partitionId&&Z.push(J);return Z},[y?.rows]),W=G.useMemo(()=>{if(!g||!y?.rows?.length)return null;const Z=y.rows,J=C?.minimumPoints??13;if(Z.filter(E=>!E.ghost&&E.value!=null).length<J)return null;let ie=-1;for(let E=Z.length-1;E>=0;E--){const X=Z[E];if(X&&X.value!=null&&!X.ghost){ie=E;break}}if(ie===-1)return null;const he=Z[ie],ye=he.variationIcon,ke=he.assuranceIcon,Te=ye===Ve.Neither&&!!he.specialCauseNeitherValue,te=ke===_n.Pass?Hn.Pass:ke===_n.Fail?Hn.Fail:Hn.Uncertain;let V;if(ye===Ve.None){const E=he.specialCauseSinglePointAbove,X=he.specialCauseSinglePointBelow;d===Et.Up?E?V=Se.Higher:X&&(V=Se.Lower):d===Et.Down?X?V=Se.Lower:E&&(V=Se.Higher):V=Se.Higher}else if(ye===Ve.Neither&&Te){const E=he.specialCauseSinglePointAbove||he.specialCauseTwoOfThreeAbove||he.specialCauseFourOfFiveAbove||he.specialCauseShiftHigh||he.specialCauseTrendIncreasing,X=he.specialCauseSinglePointBelow||he.specialCauseTwoOfThreeBelow||he.specialCauseFourOfFiveBelow||he.specialCauseShiftLow||he.specialCauseTrendDecreasing;E&&!X?V=Se.Higher:X&&!E?V=Se.Lower:V=Se.Higher}let se;d===Et.Up?se=Ze.HigherIsBetter:d===Et.Down?se=Ze.LowerIsBetter:se=Ze.ContextDependent;const ae=80;return o.jsxs("div",{style:{display:"flex",gap:12,marginRight:16},children:[o.jsx("div",{className:"fdp-spc-chart__embedded-icon","data-variation":String(ye),"data-trend-raw":V?String(V):"none","data-trend":V?String(V):"none","data-polarity":String(se??"unknown"),style:{width:ae,height:ae},children:o.jsx(ao,{dropShadow:!1,data:{variationIcon:ye,improvementDirection:d,polarity:se,specialCauseNeutral:Te,highSideSignal:he.specialCauseSinglePointAbove||he.specialCauseTwoOfThreeAbove||he.specialCauseFourOfFiveAbove||he.specialCauseShiftHigh||he.specialCauseTrendIncreasing,lowSideSignal:he.specialCauseSinglePointBelow||he.specialCauseTwoOfThreeBelow||he.specialCauseFourOfFiveBelow||he.specialCauseShiftLow||he.specialCauseTrendDecreasing,...V?{trend:V}:{}},letterMode:d===Et.Neither?"direction":"polarity",size:ae,variant:x,runLength:x==="triangleWithRun"?m:void 0})}),o.jsx("div",{className:"fdp-spc-chart__embedded-assurance-icon","data-assurance":String(ke),style:{width:ae,height:ae},children:o.jsx(io,{status:te,size:ae,dropShadow:!1})})]},`embedded-icon-${ie}`)},[g,y?.rows,d,C?.minimumPoints,h,x,m]);return o.jsxs("div",{className:s?`fdp-spc-chart-wrapper ${s}`:"fdp-spc-chart-wrapper",children:[g&&o.jsx("div",{className:"fdp-spc-chart__top-row",style:{display:"flex",justifyContent:"flex-end",marginBottom:4},children:W}),o.jsx(qu,{height:n,ariaLabel:e,margin:{bottom:48,left:56,right:16,top:12},className:void 0,children:o.jsx(Xu,{series:ne,yDomain:ce,children:o.jsx(Fx,{series:ne,showPoints:a,announceFocus:i,limits:{mean:A,ucl:O,lcl:z,sigma:K,onePos:$,oneNeg:I,twoPos:U,twoNeg:R},showZones:r,highlightOutOfControl:u,engineRows:y?.rows||null,enableRules:f,showIcons:p,narrationContext:q,metricImprovement:d,gradientSequences:j,processLineWidth:S,effectiveUnit:Y,partitionMarkers:oe,ariaLabel:e})})}),M&&k&&o.jsx("div",{"data-testid":"spc-diagnostics-live","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:0,overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",border:0},children:k}),M&&L.length>0&&o.jsxs("div",{className:"fdp-spc-chart__warnings",role:"region","aria-label":"SPC diagnostics",children:[o.jsx("p",{className:"fdp-spc-chart__warnings-heading",children:"Diagnostics"}),o.jsx(ei,{firstCellIsHeader:!1,panel:!1,responsive:!1,head:[{text:"Severity"},{text:"Category"},{text:"Code"},{text:"Details"}],rows:L.map(Z=>{let J="grey";return Z.severity===yn.Error?J="red":Z.severity===yn.Warning?J="orange":Z.severity===yn.Info&&(J="blue"),[{node:o.jsx(Ye,{color:J,text:(Z.severity?String(Z.severity):"Info").replace(/^[a-z]/,le=>le.toUpperCase())}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--severity"},{node:Z.category?o.jsx(Ye,{color:"purple",text:D(Z.category)}):o.jsx("span",{className:"fdp-spc-chart__warning-empty",children:"â€“"}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--category"},{node:o.jsx(Ye,{color:"grey",text:v(Z.code)}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--code"},{node:o.jsxs("div",{className:"fdp-spc-chart__warning-message",children:[o.jsx("span",{children:Z.message}),Z.context&&Object.keys(Z.context).length>0&&o.jsxs("details",{className:"fdp-spc-chart__warning-context",style:{marginTop:4},children:[o.jsx("summary",{children:"context"}),o.jsx("pre",{children:JSON.stringify(Z.context,null,2)})]})]}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--message"}]}),classes:"fdp-spc-chart__warnings-table-wrapper",tableClasses:"fdp-spc-chart__warnings-table"})]})]})},Fx=({series:t,showPoints:e,announceFocus:n,limits:r,showZones:a,highlightOutOfControl:i,engineRows:s,enableRules:l,showIcons:u,narrationContext:c,gradientSequences:d,processLineWidth:f,effectiveUnit:p,partitionMarkers:g,ariaLabel:x})=>{const m=Bn(),h=gn();if(!m)return null;const{xScale:P,yScale:T}=m,C=G.useRef("spc-seq-"+ ++Lx),w=bn(),j=t[0]?.data||[],S=G.useMemo(()=>{if(!r.ucl&&!r.lcl)return new Set;const $=new Set;return j.forEach((I,U)=>{(r.ucl!=null&&I.y>r.ucl||r.lcl!=null&&I.y<r.lcl)&&$.add(U)}),$},[j,r.ucl,r.lcl]),M=G.useMemo(()=>{if(!s)return null;const $={};return s.forEach((I,U)=>{if(I.value==null||I.ghost)return;const R=I.specialCauseSinglePointAbove||I.specialCauseSinglePointBelow||I.specialCauseTwoOfThreeAbove||I.specialCauseTwoOfThreeBelow||I.specialCauseFourOfFiveAbove||I.specialCauseFourOfFiveBelow||I.specialCauseShiftHigh||I.specialCauseShiftLow||I.specialCauseTrendIncreasing||I.specialCauseTrendDecreasing;$[U]={variation:I.variationIcon,assurance:I.assuranceIcon,special:R,concern:I.variationIcon===Ve.Concern,improvement:I.variationIcon===Ve.Improvement}}),$},[s]),_=G.useMemo(()=>{if(!s||!s.length)return null;const $=[];for(const U of s)typeof U.target=="number"&&!isNaN(U.target)&&$.push(U.target);if(!$.length)return null;const I=$[0];return $.every(U=>U===I)?I:null},[s]),v=G.useMemo(()=>{if(!M||!j.length)return[];const $=j.map((U,R)=>{const K=M?.[R];return K?.concern?"concern":K?.improvement?"improvement":K?.special&&K.variation===Ve.Neither?"noJudgement":"common"});return x?.includes("Rule Clash")&&console.log(`[${x}] Raw categories:`,$.map((U,R)=>`${R}:${U}(${j[R].y})`).join(", ")),$},[M,j,x]),D=G.useMemo(()=>{if(!d||!v.length)return[];const $=[...v];let I=0;for(;I<$.length;){const K=$[I];let ne=I+1;for(;ne<$.length&&$[ne]===K;)ne++;ne-I===1&&K!=="common"&&($[I]="common"),I=ne}const U=[];if($.length){let K=0;for(let ne=1;ne<=$.length;ne++)if(ne===$.length||$[ne]!==$[K]){const ce=$[K],re=ne-1,Y=re-K+1;(ce==="common"||Y>=2)&&U.push({start:K,end:re,category:ce}),K=ne}}return x?.includes("Rule Clash")&&console.log(`[${x}] Final sequences:`,U.map(K=>`${K.start}-${K.end}:${K.category}`).join(", ")),U},[d,v,x]),y=G.useMemo(()=>j.map($=>P($.x instanceof Date?$.x:new Date($.x))),[j,P]),N=P.range()[1],A=G.useMemo(()=>{if(!s||!s.length)return null;const $=I=>{const U=[];let R=null,K=null;for(let ne=0;ne<s.length;ne++){const ce=s[ne],re=typeof ce[I]=="number"?ce[I]:null;if(re==null||isNaN(re)){R!==null&&K!=null&&(U.push({x1:y[R],x2:y[ne-1],y:T(K)}),R=null,K=null);continue}if(R===null){R=ne,K=re;continue}K!=null&&Math.abs(re-K)<=1e-9||(K!=null&&U.push({x1:y[R],x2:y[ne-1],y:T(K)}),R=ne,K=re)}return R!==null&&K!=null&&U.push({x1:y[R],x2:y[s.length-1],y:T(K)}),U};return{mean:$("mean"),ucl:$("upperProcessLimit"),lcl:$("lowerProcessLimit"),onePos:$("upperOneSigma"),oneNeg:$("lowerOneSigma"),twoPos:$("upperTwoSigma"),twoNeg:$("lowerTwoSigma")}},[s,y,T]),F=G.useMemo(()=>D.length?o.jsx("defs",{children:D.map(($,I)=>{const U=`${C.current}-grad-${I}`;let R,K=.28,ne=.12,ce=.045;switch($.category){case"concern":R="var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",K=.28,ne=.12,ce=.045;break;case"improvement":R="var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",K=.26,ne=.11,ce=.045;break;case"noJudgement":R="var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",K=.26,ne=.11,ce=.045;break;default:R="var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)"}return o.jsxs("linearGradient",{id:U,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:R,stopOpacity:K}),o.jsx("stop",{offset:"70%",stopColor:R,stopOpacity:ne}),o.jsx("stop",{offset:"100%",stopColor:R,stopOpacity:ce})]},U)})}):null,[D]),L=G.useMemo(()=>{if(!D.length)return null;const[$]=T.domain(),I=T($),U=D.map((R,K)=>{const{start:ne,end:ce,category:re}=R;if(ne<0||ce>=y.length||ne>ce)return null;const Y=y[ne],q=y[ce];let oe="";if(re==="common"){const W=K>0?D[K-1]:null,Z=K<D.length-1?D[K+1]:null,J=W?y[W.end]:0,le=W?T(j[W.end].y):I,ie=Z?y[Z.start]:N,he=Z?T(j[Z.start].y):I;oe=`M ${J} ${I}`,oe+=` L ${J} ${le}`;for(let ye=ne;ye<=ce;ye++)oe+=` L ${y[ye]} ${T(j[ye].y)}`;oe+=` L ${ie} ${he}`,oe+=` L ${ie} ${I} Z`}else{const W=K>0?D[K-1]:null,Z=K<D.length-1?D[K+1]:null,J=W&&W.category!=="common",le=Z&&Z.category!=="common",ie=T(j[ne].y),he=T(j[ce].y);if(J){const ye=y[W.end],ke=T(j[W.end].y);oe=`M ${ye} ${ke} L ${Y} ${ie}`}else oe=`M ${Y} ${I} L ${Y} ${ie}`;for(let ye=ne+1;ye<=ce;ye++)oe+=` L ${y[ye]} ${T(j[ye].y)}`;if(oe+=` L ${q} ${he}`,le?oe+=` L ${q} ${he} L ${q} ${I}`:oe+=` L ${q} ${he} L ${q} ${I}`,J){const ye=y[W.end];oe+=` L ${ye} ${I} Z`}else oe+=` L ${Y} ${I} Z`}return o.jsx("path",{d:oe,fill:`url(#${C.current}-grad-${K})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${K}`)}).filter(Boolean);return o.jsx("g",{className:"fdp-spc__sequence-bgs",children:U})},[D,y,N,T,j]),k=G.useMemo(()=>{if(!c?.timeframe&&j.length>=2){const $=j.map(ce=>ce.x instanceof Date?ce.x:new Date(ce.x)),I=new Date(Math.min(...$.map(ce=>ce.getTime()))),U=new Date(Math.max(...$.map(ce=>ce.getTime()))),R=Math.round((U.getTime()-I.getTime())/864e5)||0;if(R<14)return`The chart shows a timeframe of ${R+1} days`;const K=Math.round(R/7);return K<20?`The chart shows a timeframe of ${K} weeks`:`The chart shows a timeframe of ${(U.getFullYear()-I.getFullYear())*12+(U.getMonth()-I.getMonth())+1} months`}if(c?.timeframe)return`The chart shows a timeframe of ${c.timeframe}`},[c?.timeframe,j]),H=$=>{const I=$%10,U=$%100;return I===1&&U!==11?`${$}st`:I===2&&U!==12?`${$}nd`:I===3&&U!==13?`${$}rd`:`${$}th`},Q=$=>`${H($.getDate())} ${$.toLocaleString("en-GB",{month:"long"})}, ${$.getFullYear()}`,O=G.useCallback(({index:$,x:I,y:U})=>{const R=s?.[$],K=I instanceof Date?I:new Date(I),ne=Q(K),ce=c?.measureUnit?` ${c.measureUnit}`:"",re=c?.measureName?` ${c.measureName}`:"";if(!R)return`General summary is: ${k?k+". ":""}Point ${$+1}, ${ne}, ${U}${ce}${re}`;const Y=Qs(R.variationIcon)||"Variation",q=Js(R),oe=q.length?` Rules: ${[...new Set(q.map(Z=>Zs[Z].narration))].join("; ")}.`:" No special cause rules.",W=[];return c?.measureName&&W.push(`Measure: ${c.measureName}.`),c?.datasetContext&&W.push(`${c.datasetContext}.`),c?.organisation&&W.push(`Organisation: ${c.organisation}.`),c?.additionalNote&&W.push(c.additionalNote),["General summary is:",...W,`Point ${$+1} recorded on `,ne+",",`with a value of ${U} ${ce}${re}`,Y+".",oe].join(" ").replace(/\s+/g," ").trim()},[s,c,k]),z=G.useCallback(($,I)=>s?.[$]?O({index:$,seriesId:"process",x:I.x instanceof Date?I.x:new Date(I.x),y:I.y}).replace(/^General summary is:\s*/,"").replace(/^Point \d+\s*/,""):void 0,[s,O]);return o.jsx(id,{children:o.jsxs("div",{className:"fdp-spc-chart",role:"group","aria-label":"Statistical process control chart","aria-roledescription":"chart",children:[o.jsx("svg",{width:m.xScale.range()[1]+56+16,height:m.yScale.range()[0]+12+48,role:"img",children:o.jsxs("g",{transform:"translate(56,12)",children:[o.jsx(Rs,{type:"x"}),o.jsx(Rs,{type:"y"}),o.jsx(Ku,{axis:"y"}),F,L,g.map(($,I)=>{const U=j[$];if(!U)return null;const R=P(U.x instanceof Date?U.x:new Date(U.x));return o.jsx("line",{x1:R,x2:R,y1:0,y2:T.range()[0],stroke:"#555",strokeDasharray:"4 4",strokeWidth:1,"aria-hidden":"true",className:"fdp-spc__partition-marker"},`partition-marker-${I}`)}),A?.mean.map(($,I)=>o.jsx("line",{className:"fdp-spc__cl",x1:$.x1,x2:$.x2,y1:$.y,y2:$.y,"aria-hidden":"true"},`mean-${I}`)),_!=null&&o.jsx(o.Fragment,{}),A?.ucl.map(($,I)=>o.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--ucl",x1:$.x1,x2:$.x2,y1:$.y,y2:$.y,"aria-hidden":"true",strokeWidth:2},`ucl-${I}`)),A?.lcl.map(($,I)=>o.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--lcl",x1:$.x1,x2:$.x2,y1:$.y,y2:$.y,"aria-hidden":"true",strokeWidth:2},`lcl-${I}`)),_!=null&&o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__target-group",children:[o.jsx("line",{className:"fdp-spc__target","data-testid":"spc-target-line",x1:0,x2:P.range()[1],y1:T(_),y2:T(_),strokeWidth:2.5}),o.jsxs("text",{"data-testid":"spc-target-label",x:P.range()[0]-7,y:T(_)-5,textAnchor:"start",className:"fdp-spc__target-label",fontSize:12,children:["Target ",_," ",p||c?.measureUnit||""]})]}),a&&A&&A.mean.length>0&&o.jsxs(o.Fragment,{children:[A.onePos.map(($,I)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos1",x1:$.x1,x2:$.x2,y1:$.y,y2:$.y,"aria-hidden":"true",strokeWidth:2},`onePos-${I}`)),A.oneNeg.map(($,I)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg1",x1:$.x1,x2:$.x2,y1:$.y,y2:$.y,"aria-hidden":"true",strokeWidth:2},`oneNeg-${I}`)),A.twoPos.map(($,I)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos2",x1:$.x1,x2:$.x2,y1:$.y,y2:$.y,"aria-hidden":"true",strokeWidth:2},`twoPos-${I}`)),A.twoNeg.map(($,I)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg2",x1:$.x1,x2:$.x2,y1:$.y,y2:$.y,"aria-hidden":"true",strokeWidth:2},`twoNeg-${I}`))]}),o.jsx(sd,{series:t[0],seriesIndex:0,palette:"categorical",showPoints:!1,focusablePoints:!1,focusIndex:-1,parseX:$=>$.x instanceof Date?$.x:new Date($.x),smooth:!1,strokeWidth:f}),e&&j.map(($,I)=>{const U=P($.x instanceof Date?$.x:new Date($.x)),R=T($.y),K=S.has(I),ne=M?.[I],ce=["fdp-spc__point",K&&i?"fdp-spc__point--ooc":null,l&&ne?.special&&ne.concern?"fdp-spc__point--sc-concern":null,l&&ne?.special&&ne.improvement?"fdp-spc__point--sc-improvement":null,l&&ne?.special&&ne.variation===Ve.Neither?"fdp-spc__point--sc-no-judgement":null,ne?.assurance===_n.Pass?"fdp-spc__point--assurance-pass":null,ne?.assurance===_n.Fail?"fdp-spc__point--assurance-fail":null].filter(Boolean).join(" "),re=`Point ${I+1} value ${$.y}`+(ne?.special?" special cause":"")+(ne?.variation===Ve.Improvement?" improving":ne?.variation===Ve.Concern?" concern":""),Y=w?.focused?.index===I;return o.jsx("circle",{cx:U,cy:R,r:5,className:ce,"data-variation":ne?.variation,"data-assurance":ne?.assurance,"aria-label":re,...Y?{"aria-describedby":`spc-tooltip-${I}`}:{}},I)}),u&&l&&M&&j.map(($,I)=>{const U=M[I];if(!U||!(U.concern||U.improvement))return null;const R=P($.x instanceof Date?$.x:new Date($.x)),K=T($.y);let ne=K-10;const ce=12,re=T.range()[0]-4;ne<ce&&(ne=Math.min(K+16,re));const Y=P.range()[1],q=Math.min(Math.max(R,0),Y-0);return o.jsx("text",{x:q,y:ne,textAnchor:"middle",className:`fdp-spc__icon ${U.concern?"fdp-spc__icon--concern":"fdp-spc__icon--improvement"}`,"aria-hidden":"true",children:U.concern?"!":"â˜…"},`icon-${I}`)}),h&&o.jsx(Bx,{width:P.range()[1],height:T.range()[0]}),o.jsx(md,{engineRows:s,limits:{mean:r.mean,sigma:r.sigma},pointDescriber:z,measureName:c?.measureName,measureUnit:c?.measureUnit,dateFormatter:$=>Q($)})]})}),n&&o.jsx(sx,{format:$=>O({...$,x:$.x instanceof Date?$.x:new Date($.x)})})]})})},Bx=({width:t,height:e})=>{const n=bn();return n?o.jsx("rect",{className:"fdp-spc__interaction-layer",width:t,height:e,fill:"transparent",tabIndex:0,"aria-label":"Interactive chart area. Use arrow keys to move between points.",onMouseMove:r=>{const i=r.currentTarget.getBoundingClientRect(),s=r.clientX-i.left,l=r.clientY-i.top;n.focusNearest(s,l)},onMouseLeave:()=>n.clear(),onKeyDown:r=>{switch(r.key){case"ArrowRight":n.focusNextPoint(),r.preventDefault();break;case"ArrowLeft":n.focusPrevPoint(),r.preventDefault();break;case"ArrowDown":n.focusNextSeries(),r.preventDefault();break;case"ArrowUp":n.focusPrevSeries(),r.preventDefault();break;case"Home":n.focusFirstPoint(),r.preventDefault();break;case"End":n.focusLastPoint(),r.preventDefault();break}},style:{cursor:"crosshair"}}):null},Ax=Object.freeze(Object.defineProperty({__proto__:null,AssuranceIcon:_n,AssuranceResult:Hn,BaselineSuggestionReason:cd,ChartType:Ks,Direction:Se,ImprovementDirection:Et,MetricPolarity:Ze,SPCAssuranceIcon:io,SPCChart:yd,SPCTooltipOverlay:md,SPCVariationIcon:ao,SpcWarningCategory:od,SpcWarningCode:ld,SpcWarningSeverity:yn,VARIATION_COLOR_TOKENS:Lt,VariationIcon:Ve,VariationJudgement:pt,VariationState:$e,buildSpc:fd,extractRuleIds:Js,getVariationColorHex:jx,getVariationColorToken:hd,getVariationColour:gd,getVariationTrend:no,ruleGlossary:Zs,variationLabel:Qs},Symbol.toStringTag,{value:"Module"})),xd="150ms",vd="300ms",wd="500ms",Sd="cubic-bezier(0.4, 0, 1, 1)",kd="cubic-bezier(0, 0, 0.2, 1)",Cd="cubic-bezier(0.4, 0, 0.2, 1)",Td="cubic-bezier(0.68, -0.55, 0.265, 1.55)",Nd="background-color 300ms cubic-bezier(0, 0, 0.2, 1)",jd="box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",Dd="border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",Md="border-color 300ms cubic-bezier(0, 0, 0.2, 1)",$d="1px",Id="2px",Pd="4px",Ld="4px",Fd="4px",Bd="2px",Ad="1px",Ed="0px",Hd="4px",Rd="8px",zd="12px",so="#d8dde0",oo="#4c6272",lo="#d8dde0",co="#aeb7bd",uo="#d5281b",fo="#005eb8",ho="#ffffff",mo="#212b32",po="#007f3b",go="#330072",bo="#7c2855",_o="#d5281b",yo="#ffeb3b",xo="#fff9c4",vo="#ffb81c",wo="#ed8b00",So="#00a499",ko="#ae2573",Co="#4c6272",To="#768692",No="#aeb7bd",jo="#d8dde0",Do="#f0f4f5",Od="#212b32",Wd="#4c6272",Ud="#ffffff",Gd="#212b32",Yd="#005eb8",Vd="#7c2855",qd="#003087",Xd="#330072",Kd="#ffeb3b",Zd="#212b32",Jd="#d8dde0",Qd="#ffffff33",ef="#d5281b",tf="#4c6272",nf="#ffffff",rf="#007f3b",af="#ffffff",sf="#006530",of="#004021",lf="#004021",cf="#00000000",uf="#ffffff",df="#005eb8",ff="#005eb8",hf="#d9e5f2",mf="#c7daf0",pf="#005eb8",gf="#ffffff",bf="#212b32",_f="#d9dde0",yf="#b3bcc2",xf="#b3bcc2",vf="#d5281b",wf="#aa2016",Sf="#6a140e",kf="#6a140e",Cf="#005eb8",Tf="#004b93",Nf="#002f5c",jf="#002f5c",Df="8px",Mf="16px",$f="12px",If="16px",Pf="4px",Lf="40px",Ff="4px",Bf="40px",Af="12px",Ef="16px",Hf="32px",Rf="16px",zf="20px",Of="28px",Wf="9px",Uf="2px",Gf="16px",Yf="24px",Vf="8px",qf="24px",Xf="16px",Kf="4px",Zf="4px",Jf="4px",Qf="8px",eh="4px",th="16px",nh="#007f3b",rh="#006530",ah="#004021",ih="#d8dde0",sh="#ffffff",oh="#768692",lh="#00000000",ch="#ffeb3b",uh="#00000000",dh="#ffffff",fh="#d9e5f2",hh="#c7daf0",mh="#005eb8",ph="#005eb8",Mo="8px",$o="16px",Io="12px",Po="16px",gh="2px",bh="4px",_h="4px",yh="600",xh="#ffffff",vh="#d8dde0",wh="#aeb7bd",Sh="#f0f4f5",kh="#212b32",Ch="#212b32",Th="#005eb8",Lo="16px",Fo="32px",Bo="16px",Nh="1px",jh="4px",Dh="none",Mh="0 2px 4px rgba(0, 0, 0, 0.1)",$h="#ffffff",Ih="#ffffff",Ph="#d8dde0",Lh="#ffffff",Fh="#4c6272",Bh="#ffeb3b",Ah="#d5281b",Eh="#aeb7bd",Hh="#212b32",Rh="#4c6272",zh="#768692",Oh="#212b32",Wh="#ffffff",Uh="600",Gh="#d5281b",Yh="600",Vh="#4c6272",Ao="4px",Eo="40px",Ho="40px",Ro="12px",qh="2px",Xh="4px",Kh="0px",Zh="16px",Jh="18px",Qh="24px",em="32px",tm="34px",nm="32px",rm="40px",am="48px",im="5.4ex",sm="7.2ex",om="9ex",lm="10.8ex",cm="20ex",um="38ex",dm="56ex",fm="44px",hm="40px",mm="1020px",pm="100%",gm="50%",bm="33.333%",_m="25%",ym="20%",xm="320px",vm="641px",wm="1025px",Sm="1280px",km="960px",Cm="32px",Tm="16px",Nm="#d5281b",jm="#d5281b",Dm="#ffffff",Mm="#007f3b",$m="#007f3b",Im="#ffffff",Pm="#ffeb3b",Lm="#ffeb3b",Fm="#212b32",Bm="#005eb8",Am="#005eb8",Em="#ffffff",Hm="#d8dde0",Rm="#aeb7bd",zm="#768692",Om="0 4px 0 #004021",Wm="0 4px 0 #005eb8",Um="0 4px 0 #6a140e",Gm="0 4px 0 #ffeb3b",Ym="none",Vm="0 2px 4px rgba(0, 0, 0, 0.1)",qm="4px",Xm="0px",Km="solid",Zm="0 0 0 3px #ffeb3b",Jm="0 0 0 3px #ffeb3b",Qm="none",ep="0 1px 3px rgba(0, 0, 0, 0.12)",tp="0 2px 6px rgba(0, 0, 0, 0.16)",np="0 4px 12px rgba(0, 0, 0, 0.20)",zo="0",Oo="4px",Wo="8px",Uo="16px",Go="24px",Yo="32px",Vo="40px",qo="48px",Xo="56px",Ko="64px",ui="0",di="0",fi="4px",hi="4px",mi="8px",pi="8px",gi="8px",bi="16px",_i="16px",yi="24px",xi="24px",vi="32px",wi="32px",Si="40px",ki="40px",Ci="48px",Ti="48px",Ni="56px",ji="56px",Di="64px",zr="Frutiger W01",Or="Arial, Helvetica, sans-serif",Wr="sans-serif",Ur="400",Gr="600",Yr="400",Vr="12px",qr="14px",Xr="12pt",Kr="14px",Zr="16px",Jr="12pt",Qr="16px",ea="19px",ta="13pt",na="19px",ra="22px",aa="15pt",ia="22px",sa="26px",oa="17pt",la="27px",ca="36px",ua="20pt",da="33px",fa="48px",ha="24pt",Mi="16px",$i="24px",Rt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},zt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Ot={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Wt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Ut={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Gt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Yt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},Vt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},qt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},Xt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},Ex=Object.freeze(Object.defineProperty({__proto__:null,AnimationDurationFast:xd,AnimationDurationNormal:vd,AnimationDurationSlow:wd,AnimationEasingBounce:Td,AnimationEasingEaseIn:Sd,AnimationEasingEaseInOut:Cd,AnimationEasingEaseOut:kd,BorderColorCard:lo,BorderColorCardHover:co,BorderColorDefault:so,BorderColorError:uo,BorderColorForm:oo,BorderRadiusLarge:zd,BorderRadiusMedium:Rd,BorderRadiusNone:Ed,BorderRadiusSmall:Hd,BorderWidthCardBottom:Ld,BorderWidthDefault:$d,BorderWidthFormElement:Id,BorderWidthFormElementError:Pd,BorderWidthPanel:Fd,BorderWidthTableCell:Ad,BorderWidthTableHeader:Bd,BreakpointDesktop:wm,BreakpointLargeDesktop:Sm,BreakpointMobile:xm,BreakpointTablet:vm,ButtonBorderRadius:bh,ButtonBorderWidth:gh,ButtonPrimaryBackgroundActive:ah,ButtonPrimaryBackgroundDefault:nh,ButtonPrimaryBackgroundDisabled:ih,ButtonPrimaryBackgroundHover:rh,ButtonPrimaryBorderDefault:lh,ButtonPrimaryBorderFocus:ch,ButtonPrimaryTextDefault:sh,ButtonPrimaryTextDisabled:oh,ButtonSecondaryBackgroundActive:hh,ButtonSecondaryBackgroundDefault:uh,ButtonSecondaryBackgroundHover:fh,ButtonSecondaryBackgroundSolid:dh,ButtonSecondaryBorderDefault:ph,ButtonSecondaryTextDefault:mh,ButtonShadowSize:_h,ButtonSpacingPaddingHorizontalDesktop:Po,ButtonSpacingPaddingHorizontalMobile:$o,ButtonSpacingPaddingVerticalDesktop:Io,ButtonSpacingPaddingVerticalMobile:Mo,ButtonTypographyWeight:yh,CardBackgroundDefault:xh,CardBorderBottom:Sh,CardBorderDefault:vh,CardBorderHover:wh,CardBorderWidthBottom:jh,CardBorderWidthDefault:Nh,CardShadowDefault:Dh,CardShadowHover:Mh,CardSpacingHeadingMargin:Bo,CardSpacingPaddingDesktop:Fo,CardSpacingPaddingMobile:Lo,CardTextDescription:Ch,CardTextHeading:kh,CardTextLink:Th,ColorBorderDefault:Jd,ColorBorderSecondary:Qd,ColorButtonLoginActive:Nf,ColorButtonLoginBackground:Cf,ColorButtonLoginHover:Tf,ColorButtonLoginShadow:jf,ColorButtonPrimaryActive:of,ColorButtonPrimaryBackground:rf,ColorButtonPrimaryHover:sf,ColorButtonPrimaryShadow:lf,ColorButtonPrimaryText:af,ColorButtonReverseActive:yf,ColorButtonReverseBackground:gf,ColorButtonReverseHover:_f,ColorButtonReverseShadow:xf,ColorButtonReverseText:bf,ColorButtonSecondaryActive:mf,ColorButtonSecondaryBackground:cf,ColorButtonSecondaryBackgroundSolid:uf,ColorButtonSecondaryBorder:df,ColorButtonSecondaryHover:hf,ColorButtonSecondaryShadow:pf,ColorButtonSecondaryText:ff,ColorButtonWarningActive:Sf,ColorButtonWarningBackground:vf,ColorButtonWarningHover:wf,ColorButtonWarningShadow:kf,ColorError:ef,ColorFocusBackground:Kd,ColorFocusText:Zd,ColorFormBackground:nf,ColorFormBorder:tf,ColorGrey1:Co,ColorGrey2:To,ColorGrey3:No,ColorGrey4:jo,ColorGrey5:Do,ColorLinkActive:qd,ColorLinkDefault:Yd,ColorLinkHover:Vd,ColorLinkVisited:Xd,ColorPrimaryBlack:mo,ColorPrimaryBlue:fo,ColorPrimaryDarkPink:bo,ColorPrimaryGreen:po,ColorPrimaryPurple:go,ColorPrimaryRed:_o,ColorPrimaryWhite:ho,ColorPrimaryYellow:yo,ColorSecondaryAquaGreen:So,ColorSecondaryOrange:wo,ColorSecondaryPaleYellow:xo,ColorSecondaryPink:ko,ColorSecondaryWarmYellow:vo,ColorTextPrimary:Od,ColorTextPrint:Gd,ColorTextReverse:Ud,ColorTextSecondary:Wd,ComponentBlur:Zf,ComponentBreadcrumbChevronMarginLeft:Wf,ComponentBreadcrumbChevronMarginRight:Uf,ComponentBreadcrumbPaddingTopDesktop:Yf,ComponentBreadcrumbPaddingTopMobile:Gf,ComponentButtonPaddingDesktopHorizontal:If,ComponentButtonPaddingDesktopVertical:$f,ComponentButtonPaddingMobileHorizontal:Mf,ComponentButtonPaddingMobileVertical:Df,ComponentButtonShadowSize:Pf,ComponentCardHeadingMargin:Rf,ComponentCardPaddingDesktop:Hf,ComponentCardPaddingMobile:Ef,ComponentDetails:Qf,ComponentExpander:eh,ComponentFormCheckboxLabelPadding:Af,ComponentFormCheckboxSize:Bf,ComponentFormInputMinHeight:Lf,ComponentFormInputPadding:Ff,ComponentLink:Jf,ComponentPagination:th,ComponentPanelPaddingDesktop:Of,ComponentPanelPaddingMobile:zf,ComponentSpread:Kf,ComponentSummaryListCellPaddingHorizontal:qf,ComponentSummaryListCellPaddingVertical:Vf,ComponentSummaryListRowMargin:Xf,ElevationHigh:np,ElevationLow:ep,ElevationMedium:tp,ElevationNone:Qm,FocusOutlineOffset:Xm,FocusOutlineStyle:Km,FocusOutlineWidth:qm,FocusShadowButton:Jm,FocusShadowInput:Zm,FontFamilyBase:zr,FontFamilyFallback:Or,FontFamilyPrint:Wr,FontLineHeightBase:$i,FontSize14Mobile:Vr,FontSize14Print:Xr,FontSize14Tablet:qr,FontSize16Mobile:Kr,FontSize16Print:Jr,FontSize16Tablet:Zr,FontSize19Mobile:Qr,FontSize19Print:ta,FontSize19Tablet:ea,FontSize22Mobile:na,FontSize22Print:aa,FontSize22Tablet:ra,FontSize26Mobile:ia,FontSize26Print:oa,FontSize26Tablet:sa,FontSize36Mobile:la,FontSize36Print:ua,FontSize36Tablet:ca,FontSize48Mobile:da,FontSize48Print:ha,FontSize48Tablet:fa,FontSizeBase:Mi,FontWeightBold:Gr,FontWeightLight:Yr,FontWeightNormal:Ur,FormBorderRadius:Kh,FormBorderWidthDefault:qh,FormBorderWidthError:Xh,FormErrorTextDefault:Gh,FormErrorTypographyWeight:Yh,FormHintTextDefault:Vh,FormInputBackgroundDefault:$h,FormInputBackgroundDisabled:Ph,FormInputBackgroundError:Lh,FormInputBackgroundFocus:Ih,FormInputBorderDefault:Fh,FormInputBorderDisabled:Eh,FormInputBorderError:Ah,FormInputBorderFocus:Bh,FormInputTextDefault:Hh,FormInputTextDisabled:zh,FormInputTextPlaceholder:Rh,FormLabelTextDefault:Oh,FormLabelTextRequired:Wh,FormLabelTypographyWeight:Uh,FormSpacingCheckboxLabelPadding:Ro,FormSpacingCheckboxSize:Ho,FormSpacingInputMinHeight:Eo,FormSpacingInputPadding:Ao,GridGutter:Cm,GridGutterHalf:Tm,GridPageWidth:km,HeadingsNhsukHeadingL:zt,HeadingsNhsukHeadingM:Ot,HeadingsNhsukHeadingS:Wt,HeadingsNhsukHeadingXl:Rt,HeadingsNhsukHeadingXs:Ut,LayoutColumnActions:ym,LayoutColumnFull:pm,LayoutColumnHalf:gm,LayoutColumnQuarter:_m,LayoutColumnThird:bm,LayoutContainerMaxWidth:mm,ParagraphsBody:Gt,ParagraphsBodyLarge:Yt,ParagraphsBodySmall:Vt,ParagraphsLedeText:qt,ParagraphsLedeTextSmall:Xt,ShadowButtonDefault:Om,ShadowButtonFocus:Gm,ShadowButtonSecondary:Wm,ShadowButtonWarning:Um,ShadowCardDefault:Ym,ShadowCardHover:Vm,SizeButtonMinHeightDesktop:hm,SizeButtonMinHeightMobile:fm,SizeFormControlLarge:am,SizeFormControlMedium:rm,SizeFormControlSmall:nm,SizeFormInputWidth2xl:um,SizeFormInputWidth3xl:dm,SizeFormInputWidthLg:lm,SizeFormInputWidthMd:om,SizeFormInputWidthSm:sm,SizeFormInputWidthXl:cm,SizeFormInputWidthXs:im,SizeIconExtraLarge:em,SizeIconLarge:Qh,SizeIconMedium:Jh,SizeIconNhsDefault:tm,SizeIconSmall:Zh,Spacing0:zo,Spacing1:Oo,Spacing2:Wo,Spacing3:Uo,Spacing4:Go,Spacing5:Yo,Spacing6:Vo,Spacing7:qo,Spacing8:Xo,Spacing9:Ko,SpacingResponsive0Mobile:ui,SpacingResponsive0Tablet:di,SpacingResponsive1Mobile:fi,SpacingResponsive1Tablet:hi,SpacingResponsive2Mobile:mi,SpacingResponsive2Tablet:pi,SpacingResponsive3Mobile:gi,SpacingResponsive3Tablet:bi,SpacingResponsive4Mobile:_i,SpacingResponsive4Tablet:yi,SpacingResponsive5Mobile:xi,SpacingResponsive5Tablet:vi,SpacingResponsive6Mobile:wi,SpacingResponsive6Tablet:Si,SpacingResponsive7Mobile:ki,SpacingResponsive7Tablet:Ci,SpacingResponsive8Mobile:Ti,SpacingResponsive8Tablet:Ni,SpacingResponsive9Mobile:ji,SpacingResponsive9Tablet:Di,StateDisabledBackground:Hm,StateDisabledBorder:Rm,StateDisabledText:zm,StateErrorBackground:Nm,StateErrorBorder:jm,StateErrorText:Dm,StateInfoBackground:Bm,StateInfoBorder:Am,StateInfoText:Em,StateSuccessBackground:Mm,StateSuccessBorder:$m,StateSuccessText:Im,StateWarningBackground:Pm,StateWarningBorder:Lm,StateWarningText:Fm,TransitionButtonDefault:Nd,TransitionButtonShadow:jd,TransitionCardHover:Md,TransitionInputFocus:Dd},Symbol.toStringTag,{value:"Module"})),Hx=(t,e)=>({fontSize:t.mobile,marginBottom:e.mobile,"@media (min-width: 768px)":{fontSize:t.tablet,marginBottom:e.tablet},"@media print":{fontSize:t.print||t.tablet}}),Rx=({children:t,className:e="",style:n={}})=>o.jsx("h1",{className:e,style:{fontFamily:Rt.fontFamily,fontWeight:Rt.fontWeight,fontSize:Rt.fontSize.mobile,lineHeight:Rt.lineHeight,marginTop:Rt.marginTop,marginBottom:Rt.marginBottom.mobile,...n},children:t}),zx=({children:t,className:e="",style:n={}})=>o.jsx("h2",{className:e,style:{fontFamily:zt.fontFamily,fontWeight:zt.fontWeight,fontSize:zt.fontSize.mobile,lineHeight:zt.lineHeight,marginTop:zt.marginTop,marginBottom:zt.marginBottom.mobile,...n},children:t}),Ox=({children:t,className:e="",style:n={}})=>o.jsx("h3",{className:e,style:{fontFamily:Ot.fontFamily,fontWeight:Ot.fontWeight,fontSize:Ot.fontSize.mobile,lineHeight:Ot.lineHeight,marginTop:Ot.marginTop,marginBottom:Ot.marginBottom.mobile,...n},children:t}),Wx=({children:t,className:e="",style:n={}})=>o.jsx("h4",{className:e,style:{fontFamily:Wt.fontFamily,fontWeight:Wt.fontWeight,fontSize:Wt.fontSize.mobile,lineHeight:Wt.lineHeight,marginTop:Wt.marginTop,marginBottom:Wt.marginBottom.mobile,...n},children:t}),Ux=({children:t,className:e="",style:n={}})=>o.jsx("h5",{className:e,style:{fontFamily:Ut.fontFamily,fontWeight:Ut.fontWeight,fontSize:Ut.fontSize.mobile,lineHeight:Ut.lineHeight,marginTop:Ut.marginTop,marginBottom:Ut.marginBottom.mobile,...n},children:t}),Gx=({children:t,className:e="",style:n={}})=>o.jsx("p",{className:e,style:{fontFamily:Gt.fontFamily,fontWeight:Gt.fontWeight,fontSize:Gt.fontSize.mobile,lineHeight:Gt.lineHeight,marginTop:Gt.marginTop,marginBottom:Gt.marginBottom.mobile,...n},children:t}),Yx=({children:t,className:e="",style:n={}})=>o.jsx("p",{className:e,style:{fontFamily:Yt.fontFamily,fontWeight:Yt.fontWeight,fontSize:Yt.fontSize.mobile,lineHeight:Yt.lineHeight,marginTop:Yt.marginTop,marginBottom:Yt.marginBottom.mobile,...n},children:t}),Vx=({children:t,className:e="",style:n={}})=>o.jsx("p",{className:e,style:{fontFamily:Vt.fontFamily,fontWeight:Vt.fontWeight,fontSize:Vt.fontSize.mobile,lineHeight:Vt.lineHeight,marginTop:Vt.marginTop,marginBottom:Vt.marginBottom.mobile,...n},children:t}),qx=({children:t,className:e="",style:n={}})=>o.jsx("p",{className:e,style:{fontFamily:qt.fontFamily,fontWeight:qt.fontWeight,fontSize:qt.fontSize.mobile,lineHeight:qt.lineHeight,marginTop:qt.marginTop,marginBottom:qt.marginBottom.mobile,...n},children:t}),Xx=({children:t,className:e="",style:n={}})=>o.jsx("p",{className:e,style:{fontFamily:Xt.fontFamily,fontWeight:Xt.fontWeight,fontSize:Xt.fontSize.mobile,lineHeight:Xt.lineHeight,marginTop:Xt.marginTop,marginBottom:Xt.marginBottom.mobile,...n},children:t}),Kx=()=>B.useMemo(()=>Ex,[]),Zx=()=>B.useMemo(()=>({BorderColorDefault:so,BorderColorForm:oo,BorderColorCard:lo,BorderColorCardHover:co,BorderColorError:uo,ColorPrimaryBlue:fo,ColorPrimaryWhite:ho,ColorPrimaryBlack:mo,ColorPrimaryGreen:po,ColorPrimaryPurple:go,ColorPrimaryDarkPink:bo,ColorPrimaryRed:_o,ColorPrimaryYellow:yo,ColorSecondaryPaleYellow:xo,ColorSecondaryWarmYellow:vo,ColorSecondaryOrange:wo,ColorSecondaryAquaGreen:So,ColorSecondaryPink:ko,ColorGrey1:Co,ColorGrey2:To,ColorGrey3:No,ColorGrey4:jo,ColorGrey5:Do}),[]),Jx=()=>B.useMemo(()=>({Spacing0:zo,Spacing1:Oo,Spacing2:Wo,Spacing3:Uo,Spacing4:Go,Spacing5:Yo,Spacing6:Vo,Spacing7:qo,Spacing8:Xo,Spacing9:Ko}),[]),Qx=()=>B.useMemo(()=>({Mobile:{Size14:Vr,Size16:Kr,Size19:Qr,Size22:na,Size26:ia,Size36:la,Size48:da},Tablet:{Size14:qr,Size16:Zr,Size19:ea,Size22:ra,Size26:sa,Size36:ca,Size48:fa},Print:{Size14:Xr,Size16:Jr,Size19:ta,Size22:aa,Size26:oa,Size36:ua,Size48:ha},Family:{Base:zr,Fallback:Or,Print:Wr},Weight:{Normal:Ur,Bold:Gr,Light:Yr},Base:{Size:Mi,LineHeight:$i},FontFamilyBase:zr,FontFamilyFallback:Or,FontFamilyPrint:Wr,FontWeightNormal:Ur,FontWeightBold:Gr,FontWeightLight:Yr,FontSize14Mobile:Vr,FontSize14Tablet:qr,FontSize14Print:Xr,FontSize16Mobile:Kr,FontSize16Tablet:Zr,FontSize16Print:Jr,FontSize19Mobile:Qr,FontSize19Tablet:ea,FontSize19Print:ta,FontSize22Mobile:na,FontSize22Tablet:ra,FontSize22Print:aa,FontSize26Mobile:ia,FontSize26Tablet:sa,FontSize26Print:oa,FontSize36Mobile:la,FontSize36Tablet:ca,FontSize36Print:ua,FontSize48Mobile:da,FontSize48Tablet:fa,FontSize48Print:ha,FontSizeBase:Mi,FontLineHeightBase:$i}),[]),ev=()=>B.useMemo(()=>({Mobile:{Size0:ui,Size1:fi,Size2:mi,Size3:gi,Size4:_i,Size5:xi,Size6:wi,Size7:ki,Size8:Ti,Size9:ji},Tablet:{Size0:di,Size1:hi,Size2:pi,Size3:bi,Size4:yi,Size5:vi,Size6:Si,Size7:Ci,Size8:Ni,Size9:Di},SpacingResponsive0Mobile:ui,SpacingResponsive0Tablet:di,SpacingResponsive1Mobile:fi,SpacingResponsive1Tablet:hi,SpacingResponsive2Mobile:mi,SpacingResponsive2Tablet:pi,SpacingResponsive3Mobile:gi,SpacingResponsive3Tablet:bi,SpacingResponsive4Mobile:_i,SpacingResponsive4Tablet:yi,SpacingResponsive5Mobile:xi,SpacingResponsive5Tablet:vi,SpacingResponsive6Mobile:wi,SpacingResponsive6Tablet:Si,SpacingResponsive7Mobile:ki,SpacingResponsive7Tablet:Ci,SpacingResponsive8Mobile:Ti,SpacingResponsive8Tablet:Ni,SpacingResponsive9Mobile:ji,SpacingResponsive9Tablet:Di}),[]),tv=()=>B.useMemo(()=>({ButtonSpacingPaddingVerticalMobile:Mo,ButtonSpacingPaddingHorizontalMobile:$o,ButtonSpacingPaddingVerticalDesktop:Io,ButtonSpacingPaddingHorizontalDesktop:Po,CardSpacingPaddingMobile:Lo,CardSpacingPaddingDesktop:Fo,CardSpacingHeadingMargin:Bo,FormSpacingInputPadding:Ao,FormSpacingInputMinHeight:Eo,FormSpacingCheckboxSize:Ho,FormSpacingCheckboxLabelPadding:Ro}),[]),nv=()=>B.useMemo(()=>({xl:Rt,l:zt,m:Ot,s:Wt,xs:Ut}),[]),rv=()=>B.useMemo(()=>({body:Gt,bodyLarge:Yt,bodySmall:Vt,ledeText:qt,ledeTextSmall:Xt}),[]),av=()=>B.useMemo(()=>({headings:{xl:Rt,l:zt,m:Ot,s:Wt,xs:Ut},paragraphs:{body:Gt,bodyLarge:Yt,bodySmall:Vt,ledeText:qt,ledeTextSmall:Xt},fonts:{family:{base:zr,fallback:Or,print:Wr},weight:{normal:Ur,bold:Gr,light:Yr},sizes:{mobile:{size14:Vr,size16:Kr,size19:Qr,size22:na,size26:ia,size36:la,size48:da},tablet:{size14:qr,size16:Zr,size19:ea,size22:ra,size26:sa,size36:ca,size48:fa},print:{size14:Xr,size16:Jr,size19:ta,size22:aa,size26:oa,size36:ua,size48:ha}}}}),[]);function iv(t={}){const{initialLayout:e=void 0,fallbackLayout:n="two-column"}=t,[r,a]=G.useState(e),i=G.useCallback(()=>a("three-column"),[]),s=G.useCallback(()=>a(u=>u==="three-column"?n:u),[n]),l=G.useCallback(()=>a(u=>u==="three-column"?n:"three-column"),[n]);return{forceLayout:r,setLayout:a,drillIn:i,drillOut:s,toggle:l,isDrilledIn:r==="three-column"}}const Zo={fontPath:"https://assets.nhs.uk/fonts/",includeFontFace:!0,useFallbacks:!0,fontWeights:[400,600]},ft={normal:{woff2:"FrutigerLTW01-55Roman.woff2",woff:"FrutigerLTW01-55Roman.woff",ttf:"FrutigerLTW01-55Roman.ttf",eot:"FrutigerLTW01-55Roman.eot"},bold:{woff2:"FrutigerLTW01-65Bold.woff2",woff:"FrutigerLTW01-65Bold.woff",ttf:"FrutigerLTW01-65Bold.ttf",eot:"FrutigerLTW01-65Bold.eot"}};function sv(t={}){const{fontPath:e,fontWeights:n}={...Zo,...t},r=[];return n?.includes(400)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 400;
  src: url("${e}${ft.normal.eot}?#iefix") format("eot"),
       url("${e}${ft.normal.woff2}") format("woff2"),
       url("${e}${ft.normal.woff}") format("woff"),
       url("${e}${ft.normal.ttf}") format("truetype");
  src: url("${e}${ft.normal.eot}");
}`),n?.includes(600)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 600;
  src: url("${e}${ft.bold.eot}?#iefix") format("eot"),
       url("${e}${ft.bold.woff2}") format("woff2"),
       url("${e}${ft.bold.woff}") format("woff"),
       url("${e}${ft.bold.ttf}") format("truetype");
  src: url("${e}${ft.bold.eot}");
}`),r.join(`
`)}function ov(t={}){if(typeof document>"u")return;const{fontPath:e,fontWeights:n}={...Zo,...t};[...n?.includes(400)?[{href:`${e}${ft.normal.woff2}`,as:"font",type:"font/woff2"},{href:`${e}${ft.normal.woff}`,as:"font",type:"font/woff"}]:[],...n?.includes(600)?[{href:`${e}${ft.bold.woff2}`,as:"font",type:"font/woff2"},{href:`${e}${ft.bold.woff}`,as:"font",type:"font/woff"}]:[]].forEach(a=>{const i=document.createElement("link");i.rel="preload",i.href=a.href,i.as=a.as,i.type=a.type,i.crossOrigin="anonymous",document.head.appendChild(i)})}const lv='"Frutiger W01", Arial, Helvetica, sans-serif',cv="Arial, Helvetica, sans-serif";async function uv(){if(typeof document>"u"||!document.fonts)return!1;try{return await document.fonts.load('1em "Frutiger W01"'),document.fonts.check('1em "Frutiger W01"')}catch{return!1}}function ln(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rp(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var vt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},cr={duration:.5,overwrite:!1,delay:0},Jo,ot,He,Dt=1e8,Le=1/Dt,Qo=Math.PI*2,dv=Qo/4,fv=0,ap=Math.sqrt,hv=Math.cos,mv=Math.sin,it=function(e){return typeof e=="string"},Ue=function(e){return typeof e=="function"},cn=function(e){return typeof e=="number"},el=function(e){return typeof e>"u"},Kt=function(e){return typeof e=="object"},gt=function(e){return e!==!1},tl=function(){return typeof window<"u"},Ii=function(e){return Ue(e)||it(e)},ip=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ut=Array.isArray,nl=/(?:-?\.?\d|\.)+/gi,sp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ur=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,rl=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,op=/[+-]=-?[.\d]+/,lp=/[^,'"\[\]\s]+/gi,pv=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Oe,Zt,al,il,wt={},Pi={},cp,up=function(e){return(Pi=fr(e,wt))&&yt},sl=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},ma=function(e,n){return!n&&console.warn(e)},dp=function(e,n){return e&&(wt[e]=n)&&Pi&&(Pi[e]=n)||wt},pa=function(){return 0},gv={suppressEvents:!0,isStart:!0,kill:!1},Li={suppressEvents:!0,kill:!1},bv={suppressEvents:!0},ol={},xn=[],ll={},fp,St={},cl={},hp=30,Fi=[],ul="",dl=function(e){var n=e[0],r,a;if(Kt(n)||Ue(n)||(e=[e]),!(r=(n._gsap||{}).harness)){for(a=Fi.length;a--&&!Fi[a].targetTest(n););r=Fi[a]}for(a=e.length;a--;)e[a]&&(e[a]._gsap||(e[a]._gsap=new Op(e[a],r)))||e.splice(a,1);return e},Rn=function(e){return e._gsap||dl($t(e))[0]._gsap},mp=function(e,n,r){return(r=e[n])&&Ue(r)?e[n]():el(r)&&e.getAttribute&&e.getAttribute(n)||r},bt=function(e,n){return(e=e.split(",")).forEach(n)||e},qe=function(e){return Math.round(e*1e5)/1e5||0},Je=function(e){return Math.round(e*1e7)/1e7||0},dr=function(e,n){var r=n.charAt(0),a=parseFloat(n.substr(2));return e=parseFloat(e),r==="+"?e+a:r==="-"?e-a:r==="*"?e*a:e/a},_v=function(e,n){for(var r=n.length,a=0;e.indexOf(n[a])<0&&++a<r;);return a<r},Bi=function(){var e=xn.length,n=xn.slice(0),r,a;for(ll={},xn.length=0,r=0;r<e;r++)a=n[r],a&&a._lazy&&(a.render(a._lazy[0],a._lazy[1],!0)._lazy=0)},fl=function(e){return!!(e._initted||e._startAt||e.add)},pp=function(e,n,r,a){xn.length&&!ot&&Bi(),e.render(n,r,!!(ot&&n<0&&fl(e))),xn.length&&!ot&&Bi()},gp=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(lp).length<2?n:it(e)?e.trim():e},bp=function(e){return e},kt=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},yv=function(e){return function(n,r){for(var a in r)a in n||a==="duration"&&e||a==="ease"||(n[a]=r[a])}},fr=function(e,n){for(var r in n)e[r]=n[r];return e},_p=function t(e,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Kt(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},Ai=function(e,n){var r={},a;for(a in e)a in n||(r[a]=e[a]);return r},ga=function(e){var n=e.parent||Oe,r=e.keyframes?yv(ut(e.keyframes)):kt;if(gt(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},xv=function(e,n){for(var r=e.length,a=r===n.length;a&&r--&&e[r]===n[r];);return r<0},yp=function(e,n,r,a,i){var s=e[a],l;if(i)for(l=n[i];s&&s[i]>l;)s=s._prev;return s?(n._next=s._next,s._next=n):(n._next=e[r],e[r]=n),n._next?n._next._prev=n:e[a]=n,n._prev=s,n.parent=n._dp=e,n},Ei=function(e,n,r,a){r===void 0&&(r="_first"),a===void 0&&(a="_last");var i=n._prev,s=n._next;i?i._next=s:e[r]===n&&(e[r]=s),s?s._prev=i:e[a]===n&&(e[a]=i),n._next=n._prev=n.parent=null},vn=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},zn=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},vv=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},hl=function(e,n,r,a){return e._startAt&&(ot?e._startAt.revert(Li):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,a))},wv=function t(e){return!e||e._ts&&t(e.parent)},xp=function(e){return e._repeat?hr(e._tTime,e=e.duration()+e._rDelay)*e:0},hr=function(e,n){var r=Math.floor(e=Je(e/n));return e&&r===e?r-1:r},Hi=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Ri=function(e){return e._end=Je(e._start+(e._tDur/Math.abs(e._ts||e._rts||Le)||0))},zi=function(e,n){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Je(r._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),Ri(e),r._dirty||zn(r,e)),e},vp=function(e,n){var r;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(r=Hi(e.rawTime(),n),(!n._dur||_a(0,n.totalDuration(),r)-n._tTime>Le)&&n.render(r,!0)),zn(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Le}},Jt=function(e,n,r,a){return n.parent&&vn(n),n._start=Je((cn(r)?r:r||e!==Oe?Mt(e,r,n):e._time)+n._delay),n._end=Je(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),yp(e,n,"_first","_last",e._sort?"_start":0),ml(n)||(e._recent=n),a||vp(e,n),e._ts<0&&zi(e,e._tTime),e},wp=function(e,n){return(wt.ScrollTrigger||sl("scrollTrigger",n))&&wt.ScrollTrigger.create(n,e)},Sp=function(e,n,r,a,i){if(Sl(e,n,i),!e._initted)return 1;if(!r&&e._pt&&!ot&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&fp!==Tt.frame)return xn.push(e),e._lazy=[i,a],1},Sv=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},ml=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},kv=function(e,n,r,a){var i=e.ratio,s=n<0||!n&&(!e._start&&Sv(e)&&!(!e._initted&&ml(e))||(e._ts<0||e._dp._ts<0)&&!ml(e))?0:1,l=e._rDelay,u=0,c,d,f;if(l&&e._repeat&&(u=_a(0,e._tDur,n),d=hr(u,l),e._yoyo&&d&1&&(s=1-s),d!==hr(e._tTime,l)&&(i=1-s,e.vars.repeatRefresh&&e._initted&&e.invalidate())),s!==i||ot||a||e._zTime===Le||!n&&e._zTime){if(!e._initted&&Sp(e,n,a,r,u))return;for(f=e._zTime,e._zTime=n||(r?Le:0),r||(r=n&&!f),e.ratio=s,e._from&&(s=1-s),e._time=0,e._tTime=u,c=e._pt;c;)c.r(s,c.d),c=c._next;n<0&&hl(e,n,r,!0),e._onUpdate&&!r&&Ct(e,"onUpdate"),u&&e._repeat&&!r&&e.parent&&Ct(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===s&&(s&&vn(e,1),!r&&!ot&&(Ct(e,s?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},Cv=function(e,n,r){var a;if(r>n)for(a=e._first;a&&a._start<=r;){if(a.data==="isPause"&&a._start>n)return a;a=a._next}else for(a=e._last;a&&a._start>=r;){if(a.data==="isPause"&&a._start<n)return a;a=a._prev}},mr=function(e,n,r,a){var i=e._repeat,s=Je(n)||0,l=e._tTime/e._tDur;return l&&!a&&(e._time*=s/e._dur),e._dur=s,e._tDur=i?i<0?1e10:Je(s*(i+1)+e._rDelay*i):s,l>0&&!a&&zi(e,e._tTime=e._tDur*l),e.parent&&Ri(e),r||zn(e.parent,e),e},kp=function(e){return e instanceof lt?zn(e):mr(e,e._dur)},Tv={_start:0,endTime:pa,totalDuration:pa},Mt=function t(e,n,r){var a=e.labels,i=e._recent||Tv,s=e.duration()>=Dt?i.endTime(!1):e._dur,l,u,c;return it(n)&&(isNaN(n)||n in a)?(u=n.charAt(0),c=n.substr(-1)==="%",l=n.indexOf("="),u==="<"||u===">"?(l>=0&&(n=n.replace(/=/,"")),(u==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(n.substr(1))||0)*(c?(l<0?i:r).totalDuration()/100:1)):l<0?(n in a||(a[n]=s),a[n]):(u=parseFloat(n.charAt(l-1)+n.substr(l+1)),c&&r&&(u=u/100*(ut(r)?r[0]:r).totalDuration()),l>1?t(e,n.substr(0,l-1),r)+u:s+u)):n==null?s:+n},ba=function(e,n,r){var a=cn(n[1]),i=(a?2:1)+(e<2?0:1),s=n[i],l,u;if(a&&(s.duration=n[1]),s.parent=r,e){for(l=s,u=r;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=gt(u.vars.inherit)&&u.parent;s.immediateRender=gt(l.immediateRender),e<2?s.runBackwards=1:s.startAt=n[i-1]}return new Xe(n[0],s,n[i+1])},wn=function(e,n){return e||e===0?n(e):n},_a=function(e,n,r){return r<e?e:r>n?n:r},dt=function(e,n){return!it(e)||!(n=pv.exec(e))?"":n[1]},Nv=function(e,n,r){return wn(r,function(a){return _a(e,n,a)})},pl=[].slice,Cp=function(e,n){return e&&Kt(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&Kt(e[0]))&&!e.nodeType&&e!==Zt},jv=function(e,n,r){return r===void 0&&(r=[]),e.forEach(function(a){var i;return it(a)&&!n||Cp(a,1)?(i=r).push.apply(i,$t(a)):r.push(a)})||r},$t=function(e,n,r){return He&&!n&&He.selector?He.selector(e):it(e)&&!r&&(al||!gr())?pl.call((n||il).querySelectorAll(e),0):ut(e)?jv(e,r):Cp(e)?pl.call(e,0):e?[e]:[]},gl=function(e){return e=$t(e)[0]||ma("Invalid scope")||{},function(n){var r=e.current||e.nativeElement||e;return $t(n,r.querySelectorAll?r:r===e?ma("Invalid scope")||il.createElement("div"):e)}},Tp=function(e){return e.sort(function(){return .5-Math.random()})},Np=function(e){if(Ue(e))return e;var n=Kt(e)?e:{each:e},r=On(n.ease),a=n.from||0,i=parseFloat(n.base)||0,s={},l=a>0&&a<1,u=isNaN(a)||l,c=n.axis,d=a,f=a;return it(a)?d=f={center:.5,edges:.5,end:1}[a]||0:!l&&u&&(d=a[0],f=a[1]),function(p,g,x){var m=(x||n).length,h=s[m],P,T,C,w,j,S,M,_,v;if(!h){if(v=n.grid==="auto"?0:(n.grid||[1,Dt])[1],!v){for(M=-Dt;M<(M=x[v++].getBoundingClientRect().left)&&v<m;);v<m&&v--}for(h=s[m]=[],P=u?Math.min(v,m)*d-.5:a%v,T=v===Dt?0:u?m*f/v-.5:a/v|0,M=0,_=Dt,S=0;S<m;S++)C=S%v-P,w=T-(S/v|0),h[S]=j=c?Math.abs(c==="y"?w:C):ap(C*C+w*w),j>M&&(M=j),j<_&&(_=j);a==="random"&&Tp(h),h.max=M-_,h.min=_,h.v=m=(parseFloat(n.amount)||parseFloat(n.each)*(v>m?m-1:c?c==="y"?m/v:v:Math.max(v,m/v))||0)*(a==="edges"?-1:1),h.b=m<0?i-m:i,h.u=dt(n.amount||n.each)||0,r=r&&m<0?Hp(r):r}return m=(h[p]-h.min)/h.max||0,Je(h.b+(r?r(m):m)*h.v)+h.u}},bl=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var a=Je(Math.round(parseFloat(r)/e)*e*n);return(a-a%1)/n+(cn(r)?0:dt(r))}},jp=function(e,n){var r=ut(e),a,i;return!r&&Kt(e)&&(a=r=e.radius||Dt,e.values?(e=$t(e.values),(i=!cn(e[0]))&&(a*=a)):e=bl(e.increment)),wn(n,r?Ue(e)?function(s){return i=e(s),Math.abs(i-s)<=a?i:s}:function(s){for(var l=parseFloat(i?s.x:s),u=parseFloat(i?s.y:0),c=Dt,d=0,f=e.length,p,g;f--;)i?(p=e[f].x-l,g=e[f].y-u,p=p*p+g*g):p=Math.abs(e[f]-l),p<c&&(c=p,d=f);return d=!a||c<=a?e[d]:s,i||d===s||cn(s)?d:d+dt(s)}:bl(e))},Dp=function(e,n,r,a){return wn(ut(e)?!n:r===!0?!!(r=0):!a,function(){return ut(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(a=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(n-e+r*.99))/r)*r*a)/a})},Dv=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(a){return n.reduce(function(i,s){return s(i)},a)}},Mv=function(e,n){return function(r){return e(parseFloat(r))+(n||dt(r))}},$v=function(e,n,r){return $p(e,n,0,1,r)},Mp=function(e,n,r){return wn(r,function(a){return e[~~n(a)]})},Iv=function t(e,n,r){var a=n-e;return ut(e)?Mp(e,t(0,e.length),n):wn(r,function(i){return(a+(i-e)%a)%a+e})},Pv=function t(e,n,r){var a=n-e,i=a*2;return ut(e)?Mp(e,t(0,e.length-1),n):wn(r,function(s){return s=(i+(s-e)%i)%i||0,e+(s>a?i-s:s)})},ya=function(e){for(var n=0,r="",a,i,s,l;~(a=e.indexOf("random(",n));)s=e.indexOf(")",a),l=e.charAt(a+7)==="[",i=e.substr(a+7,s-a-7).match(l?lp:nl),r+=e.substr(n,a-n)+Dp(l?i:+i[0],l?0:+i[1],+i[2]||1e-5),n=s+1;return r+e.substr(n,e.length-n)},$p=function(e,n,r,a,i){var s=n-e,l=a-r;return wn(i,function(u){return r+((u-e)/s*l||0)})},Lv=function t(e,n,r,a){var i=isNaN(e+n)?0:function(g){return(1-g)*e+g*n};if(!i){var s=it(e),l={},u,c,d,f,p;if(r===!0&&(a=1)&&(r=null),s)e={p:e},n={p:n};else if(ut(e)&&!ut(n)){for(d=[],f=e.length,p=f-2,c=1;c<f;c++)d.push(t(e[c-1],e[c]));f--,i=function(x){x*=f;var m=Math.min(p,~~x);return d[m](x-m)},r=n}else a||(e=fr(ut(e)?[]:{},e));if(!d){for(u in n)vl.call(l,e,u,"get",n[u]);i=function(x){return Tl(x,l)||(s?e.p:e)}}}return wn(r,i)},Ip=function(e,n,r){var a=e.labels,i=Dt,s,l,u;for(s in a)l=a[s]-n,l<0==!!r&&l&&i>(l=Math.abs(l))&&(u=s,i=l);return u},Ct=function(e,n,r){var a=e.vars,i=a[n],s=He,l=e._ctx,u,c,d;if(i)return u=a[n+"Params"],c=a.callbackScope||e,r&&xn.length&&Bi(),l&&(He=l),d=u?i.apply(c,u):i.call(c),He=s,d},xa=function(e){return vn(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ot),e.progress()<1&&Ct(e,"onInterrupt"),e},pr,Pp=[],Lp=function(e){if(e)if(e=!e.name&&e.default||e,tl()||e.headless){var n=e.name,r=Ue(e),a=n&&!r&&e.init?function(){this._props=[]}:e,i={init:pa,render:Tl,add:vl,kill:Kv,modifier:Xv,rawVars:0},s={targetTest:0,get:0,getSetter:Cl,aliases:{},register:0};if(gr(),e!==a){if(St[n])return;kt(a,kt(Ai(e,i),s)),fr(a.prototype,fr(i,Ai(e,s))),St[a.prop=n]=a,e.targetTest&&(Fi.push(a),ol[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}dp(n,a),e.register&&e.register(yt,a,_t)}else Pp.push(e)},Fe=255,va={aqua:[0,Fe,Fe],lime:[0,Fe,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Fe],navy:[0,0,128],white:[Fe,Fe,Fe],olive:[128,128,0],yellow:[Fe,Fe,0],orange:[Fe,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Fe,0,0],pink:[Fe,192,203],cyan:[0,Fe,Fe],transparent:[Fe,Fe,Fe,0]},_l=function(e,n,r){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(r-n)*e*6:e<.5?r:e*3<2?n+(r-n)*(2/3-e)*6:n)*Fe+.5|0},Fp=function(e,n,r){var a=e?cn(e)?[e>>16,e>>8&Fe,e&Fe]:0:va.black,i,s,l,u,c,d,f,p,g,x;if(!a){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),va[e])a=va[e];else if(e.charAt(0)==="#"){if(e.length<6&&(i=e.charAt(1),s=e.charAt(2),l=e.charAt(3),e="#"+i+i+s+s+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return a=parseInt(e.substr(1,6),16),[a>>16,a>>8&Fe,a&Fe,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),a=[e>>16,e>>8&Fe,e&Fe]}else if(e.substr(0,3)==="hsl"){if(a=x=e.match(nl),!n)u=+a[0]%360/360,c=+a[1]/100,d=+a[2]/100,s=d<=.5?d*(c+1):d+c-d*c,i=d*2-s,a.length>3&&(a[3]*=1),a[0]=_l(u+1/3,i,s),a[1]=_l(u,i,s),a[2]=_l(u-1/3,i,s);else if(~e.indexOf("="))return a=e.match(sp),r&&a.length<4&&(a[3]=1),a}else a=e.match(nl)||va.transparent;a=a.map(Number)}return n&&!x&&(i=a[0]/Fe,s=a[1]/Fe,l=a[2]/Fe,f=Math.max(i,s,l),p=Math.min(i,s,l),d=(f+p)/2,f===p?u=c=0:(g=f-p,c=d>.5?g/(2-f-p):g/(f+p),u=f===i?(s-l)/g+(s<l?6:0):f===s?(l-i)/g+2:(i-s)/g+4,u*=60),a[0]=~~(u+.5),a[1]=~~(c*100+.5),a[2]=~~(d*100+.5)),r&&a.length<4&&(a[3]=1),a},Bp=function(e){var n=[],r=[],a=-1;return e.split(Sn).forEach(function(i){var s=i.match(ur)||[];n.push.apply(n,s),r.push(a+=s.length+1)}),n.c=r,n},Ap=function(e,n,r){var a="",i=(e+a).match(Sn),s=n?"hsla(":"rgba(",l=0,u,c,d,f;if(!i)return e;if(i=i.map(function(p){return(p=Fp(p,n,1))&&s+(n?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),r&&(d=Bp(e),u=r.c,u.join(a)!==d.c.join(a)))for(c=e.replace(Sn,"1").split(ur),f=c.length-1;l<f;l++)a+=c[l]+(~u.indexOf(l)?i.shift()||s+"0,0,0,0)":(d.length?d:i.length?i:r).shift());if(!c)for(c=e.split(Sn),f=c.length-1;l<f;l++)a+=c[l]+i[l];return a+c[f]},Sn=(function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in va)t+="|"+e+"\\b";return new RegExp(t+")","gi")})(),Fv=/hsl[a]?\(/,Ep=function(e){var n=e.join(" "),r;if(Sn.lastIndex=0,Sn.test(n))return r=Fv.test(n),e[1]=Ap(e[1],r),e[0]=Ap(e[0],r,Bp(e[1])),!0},wa,Tt=(function(){var t=Date.now,e=500,n=33,r=t(),a=r,i=1e3/240,s=i,l=[],u,c,d,f,p,g,x=function m(h){var P=t()-a,T=h===!0,C,w,j,S;if((P>e||P<0)&&(r+=P-n),a+=P,j=a-r,C=j-s,(C>0||T)&&(S=++f.frame,p=j-f.time*1e3,f.time=j=j/1e3,s+=C+(C>=i?4:i-C),w=1),T||(u=c(m)),w)for(g=0;g<l.length;g++)l[g](j,p,S,h)};return f={time:0,frame:0,tick:function(){x(!0)},deltaRatio:function(h){return p/(1e3/(h||60))},wake:function(){cp&&(!al&&tl()&&(Zt=al=window,il=Zt.document||{},wt.gsap=yt,(Zt.gsapVersions||(Zt.gsapVersions=[])).push(yt.version),up(Pi||Zt.GreenSockGlobals||!Zt.gsap&&Zt||{}),Pp.forEach(Lp)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&f.sleep(),c=d||function(h){return setTimeout(h,s-f.time*1e3+1|0)},wa=1,x(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(u),wa=0,c=pa},lagSmoothing:function(h,P){e=h||1/0,n=Math.min(P||33,e)},fps:function(h){i=1e3/(h||240),s=f.time*1e3+i},add:function(h,P,T){var C=P?function(w,j,S,M){h(w,j,S,M),f.remove(C)}:h;return f.remove(h),l[T?"unshift":"push"](C),gr(),C},remove:function(h,P){~(P=l.indexOf(h))&&l.splice(P,1)&&g>=P&&g--},_listeners:l},f})(),gr=function(){return!wa&&Tt.wake()},Ie={},Bv=/^[\d.\-M][\d.\-,\s]/,Av=/["']/g,Ev=function(e){for(var n={},r=e.substr(1,e.length-3).split(":"),a=r[0],i=1,s=r.length,l,u,c;i<s;i++)u=r[i],l=i!==s-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),n[a]=isNaN(c)?c.replace(Av,"").trim():+c,a=u.substr(l+1).trim();return n},Hv=function(e){var n=e.indexOf("(")+1,r=e.indexOf(")"),a=e.indexOf("(",n);return e.substring(n,~a&&a<r?e.indexOf(")",r+1):r)},Rv=function(e){var n=(e+"").split("("),r=Ie[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[Ev(n[1])]:Hv(e).split(",").map(gp)):Ie._CE&&Bv.test(e)?Ie._CE("",e):r},Hp=function(e){return function(n){return 1-e(1-n)}},Rp=function t(e,n){for(var r=e._first,a;r;)r instanceof lt?t(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?t(r.timeline,n):(a=r._ease,r._ease=r._yEase,r._yEase=a,r._yoyo=n)),r=r._next},On=function(e,n){return e&&(Ue(e)?e:Ie[e]||Rv(e))||n},Wn=function(e,n,r,a){r===void 0&&(r=function(u){return 1-n(1-u)}),a===void 0&&(a=function(u){return u<.5?n(u*2)/2:1-n((1-u)*2)/2});var i={easeIn:n,easeOut:r,easeInOut:a},s;return bt(e,function(l){Ie[l]=wt[l]=i,Ie[s=l.toLowerCase()]=r;for(var u in i)Ie[s+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=Ie[l+"."+u]=i[u]}),i},zp=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},yl=function t(e,n,r){var a=n>=1?n:1,i=(r||(e?.3:.45))/(n<1?n:1),s=i/Qo*(Math.asin(1/a)||0),l=function(d){return d===1?1:a*Math.pow(2,-10*d)*mv((d-s)*i)+1},u=e==="out"?l:e==="in"?function(c){return 1-l(1-c)}:zp(l);return i=Qo/i,u.config=function(c,d){return t(e,c,d)},u},xl=function t(e,n){n===void 0&&(n=1.70158);var r=function(s){return s?--s*s*((n+1)*s+n)+1:0},a=e==="out"?r:e==="in"?function(i){return 1-r(1-i)}:zp(r);return a.config=function(i){return t(e,i)},a};bt("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;Wn(t+",Power"+(n-1),e?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})}),Ie.Linear.easeNone=Ie.none=Ie.Linear.easeIn,Wn("Elastic",yl("in"),yl("out"),yl()),(function(t,e){var n=1/e,r=2*n,a=2.5*n,i=function(l){return l<n?t*l*l:l<r?t*Math.pow(l-1.5/e,2)+.75:l<a?t*(l-=2.25/e)*l+.9375:t*Math.pow(l-2.625/e,2)+.984375};Wn("Bounce",function(s){return 1-i(1-s)},i)})(7.5625,2.75),Wn("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)}),Wn("Circ",function(t){return-(ap(1-t*t)-1)}),Wn("Sine",function(t){return t===1?1:-hv(t*dv)+1}),Wn("Back",xl("in"),xl("out"),xl()),Ie.SteppedEase=Ie.steps=wt.SteppedEase={config:function(e,n){e===void 0&&(e=1);var r=1/e,a=e+(n?0:1),i=n?1:0,s=1-Le;return function(l){return((a*_a(0,s,l)|0)+i)*r}}},cr.ease=Ie["quad.out"],bt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return ul+=t+","+t+"Params,"});var Op=function(e,n){this.id=fv++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:mp,this.set=n?n.getSetter:Cl},Sa=(function(){function t(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,mr(this,+n.duration,1,1),this.data=n.data,He&&(this._ctx=He,He.data.push(this)),wa||Tt.wake()}var e=t.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,mr(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,a){if(gr(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(zi(this,r),!i._dp||i.parent||vp(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Jt(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!a||this._initted&&Math.abs(this._zTime)===Le||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),pp(this,r,a)),this},e.time=function(r,a){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+xp(this))%(this._dur+this._rDelay)||(r?this._dur:0),a):this._time},e.totalProgress=function(r,a){return arguments.length?this.totalTime(this.totalDuration()*r,a):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+xp(this),a):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,a){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*i,a):this._repeat?hr(this._tTime,i)+1:1},e.timeScale=function(r,a){if(!arguments.length)return this._rts===-Le?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?Hi(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Le?0:this._rts,this.totalTime(_a(-Math.abs(this._delay),this.totalDuration(),i),a!==!1),Ri(this),vv(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(gr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Le&&(this._tTime-=Le)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var a=this.parent||this._dp;return a&&(a._sort||!this.parent)&&Jt(a,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(gt(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var a=this.parent||this._dp;return a?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Hi(a.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=bv);var a=ot;return ot=r,fl(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),ot=a,this},e.globalTime=function(r){for(var a=this,i=arguments.length?r:a.rawTime();a;)i=a._start+i/(Math.abs(a._ts)||1),a=a._dp;return!this.parent&&this._sat?this._sat.globalTime(r):i},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,kp(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var a=this._time;return this._rDelay=r,kp(this),a?this.time(a):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,a){return this.totalTime(Mt(this,r),gt(a))},e.restart=function(r,a){return this.play().totalTime(r?-this._delay:0,gt(a)),this._dur||(this._zTime=-Le),this},e.play=function(r,a){return r!=null&&this.seek(r,a),this.reversed(!1).paused(!1)},e.reverse=function(r,a){return r!=null&&this.seek(r||this.totalDuration(),a),this.reversed(!0).paused(!1)},e.pause=function(r,a){return r!=null&&this.seek(r,a),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Le:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Le,this},e.isActive=function(){var r=this.parent||this._dp,a=this._start,i;return!!(!r||this._ts&&this._initted&&r.isActive()&&(i=r.rawTime(!0))>=a&&i<this.endTime(!0)-Le)},e.eventCallback=function(r,a,i){var s=this.vars;return arguments.length>1?(a?(s[r]=a,i&&(s[r+"Params"]=i),r==="onUpdate"&&(this._onUpdate=a)):delete s[r],this):s[r]},e.then=function(r){var a=this;return new Promise(function(i){var s=Ue(r)?r:bp,l=function(){var c=a.then;a.then=null,Ue(s)&&(s=s(a))&&(s.then||s===a)&&(a.then=c),i(s),a.then=c};a._initted&&a.totalProgress()===1&&a._ts>=0||!a._tTime&&a._ts<0?l():a._prom=l})},e.kill=function(){xa(this)},t})();kt(Sa.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Le,_prom:0,_ps:!1,_rts:1});var lt=(function(t){rp(e,t);function e(r,a){var i;return r===void 0&&(r={}),i=t.call(this,r)||this,i.labels={},i.smoothChildTiming=!!r.smoothChildTiming,i.autoRemoveChildren=!!r.autoRemoveChildren,i._sort=gt(r.sortChildren),Oe&&Jt(r.parent||Oe,ln(i),a),r.reversed&&i.reverse(),r.paused&&i.paused(!0),r.scrollTrigger&&wp(ln(i),r.scrollTrigger),i}var n=e.prototype;return n.to=function(a,i,s){return ba(0,arguments,this),this},n.from=function(a,i,s){return ba(1,arguments,this),this},n.fromTo=function(a,i,s,l){return ba(2,arguments,this),this},n.set=function(a,i,s){return i.duration=0,i.parent=this,ga(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new Xe(a,i,Mt(this,s),1),this},n.call=function(a,i,s){return Jt(this,Xe.delayedCall(0,a,i),s)},n.staggerTo=function(a,i,s,l,u,c,d){return s.duration=i,s.stagger=s.stagger||l,s.onComplete=c,s.onCompleteParams=d,s.parent=this,new Xe(a,s,Mt(this,u)),this},n.staggerFrom=function(a,i,s,l,u,c,d){return s.runBackwards=1,ga(s).immediateRender=gt(s.immediateRender),this.staggerTo(a,i,s,l,u,c,d)},n.staggerFromTo=function(a,i,s,l,u,c,d,f){return l.startAt=s,ga(l).immediateRender=gt(l.immediateRender),this.staggerTo(a,i,l,u,c,d,f)},n.render=function(a,i,s){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=a<=0?0:Je(a),f=this._zTime<0!=a<0&&(this._initted||!c),p,g,x,m,h,P,T,C,w,j,S,M;if(this!==Oe&&d>u&&a>=0&&(d=u),d!==this._tTime||s||f){if(l!==this._time&&c&&(d+=this._time-l,a+=this._time-l),p=d,w=this._start,C=this._ts,P=!C,f&&(c||(l=this._zTime),(a||!i)&&(this._zTime=a)),this._repeat){if(S=this._yoyo,h=c+this._rDelay,this._repeat<-1&&a<0)return this.totalTime(h*100+a,i,s);if(p=Je(d%h),d===u?(m=this._repeat,p=c):(j=Je(d/h),m=~~j,m&&m===j&&(p=c,m--),p>c&&(p=c)),j=hr(this._tTime,h),!l&&this._tTime&&j!==m&&this._tTime-j*h-this._dur<=0&&(j=m),S&&m&1&&(p=c-p,M=1),m!==j&&!this._lock){var _=S&&j&1,v=_===(S&&m&1);if(m<j&&(_=!_),l=_?0:d%c?c:d,this._lock=1,this.render(l||(M?0:Je(m*h)),i,!c)._lock=0,this._tTime=d,!i&&this.parent&&Ct(this,"onRepeat"),this.vars.repeatRefresh&&!M&&(this.invalidate()._lock=1),l&&l!==this._time||P!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,v&&(this._lock=2,l=_?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!M&&this.invalidate()),this._lock=0,!this._ts&&!P)return this;Rp(this,M)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(T=Cv(this,Je(l),Je(p)),T&&(d-=p-(p=T._start))),this._tTime=d,this._time=p,this._act=!C,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=a,l=0),!l&&d&&!i&&!j&&(Ct(this,"onStart"),this._tTime!==d))return this;if(p>=l&&a>=0)for(g=this._first;g;){if(x=g._next,(g._act||p>=g._start)&&g._ts&&T!==g){if(g.parent!==this)return this.render(a,i,s);if(g.render(g._ts>0?(p-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(p-g._start)*g._ts,i,s),p!==this._time||!this._ts&&!P){T=0,x&&(d+=this._zTime=-Le);break}}g=x}else{g=this._last;for(var D=a<0?a:p;g;){if(x=g._prev,(g._act||D<=g._end)&&g._ts&&T!==g){if(g.parent!==this)return this.render(a,i,s);if(g.render(g._ts>0?(D-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(D-g._start)*g._ts,i,s||ot&&fl(g)),p!==this._time||!this._ts&&!P){T=0,x&&(d+=this._zTime=D?-Le:Le);break}}g=x}}if(T&&!i&&(this.pause(),T.render(p>=l?0:-Le)._zTime=p>=l?1:-1,this._ts))return this._start=w,Ri(this),this.render(a,i,s);this._onUpdate&&!i&&Ct(this,"onUpdate",!0),(d===u&&this._tTime>=this.totalDuration()||!d&&l)&&(w===this._start||Math.abs(C)!==Math.abs(this._ts))&&(this._lock||((a||!c)&&(d===u&&this._ts>0||!d&&this._ts<0)&&vn(this,1),!i&&!(a<0&&!l)&&(d||l||!u)&&(Ct(this,d===u&&a>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(a,i){var s=this;if(cn(i)||(i=Mt(this,i,a)),!(a instanceof Sa)){if(ut(a))return a.forEach(function(l){return s.add(l,i)}),this;if(it(a))return this.addLabel(a,i);if(Ue(a))a=Xe.delayedCall(0,a);else return this}return this!==a?Jt(this,a,i):this},n.getChildren=function(a,i,s,l){a===void 0&&(a=!0),i===void 0&&(i=!0),s===void 0&&(s=!0),l===void 0&&(l=-Dt);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof Xe?i&&u.push(c):(s&&u.push(c),a&&u.push.apply(u,c.getChildren(!0,i,s)))),c=c._next;return u},n.getById=function(a){for(var i=this.getChildren(1,1,1),s=i.length;s--;)if(i[s].vars.id===a)return i[s]},n.remove=function(a){return it(a)?this.removeLabel(a):Ue(a)?this.killTweensOf(a):(a.parent===this&&Ei(this,a),a===this._recent&&(this._recent=this._last),zn(this))},n.totalTime=function(a,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Je(Tt.time-(this._ts>0?a/this._ts:(this.totalDuration()-a)/-this._ts))),t.prototype.totalTime.call(this,a,i),this._forcing=0,this):this._tTime},n.addLabel=function(a,i){return this.labels[a]=Mt(this,i),this},n.removeLabel=function(a){return delete this.labels[a],this},n.addPause=function(a,i,s){var l=Xe.delayedCall(0,i||pa,s);return l.data="isPause",this._hasPause=1,Jt(this,l,Mt(this,a))},n.removePause=function(a){var i=this._first;for(a=Mt(this,a);i;)i._start===a&&i.data==="isPause"&&vn(i),i=i._next},n.killTweensOf=function(a,i,s){for(var l=this.getTweensOf(a,s),u=l.length;u--;)kn!==l[u]&&l[u].kill(a,i);return this},n.getTweensOf=function(a,i){for(var s=[],l=$t(a),u=this._first,c=cn(i),d;u;)u instanceof Xe?_v(u._targets,l)&&(c?(!kn||u._initted&&u._ts)&&u.globalTime(0)<=i&&u.globalTime(u.totalDuration())>i:!i||u.isActive())&&s.push(u):(d=u.getTweensOf(l,i)).length&&s.push.apply(s,d),u=u._next;return s},n.tweenTo=function(a,i){i=i||{};var s=this,l=Mt(s,a),u=i,c=u.startAt,d=u.onStart,f=u.onStartParams,p=u.immediateRender,g,x=Xe.to(s,kt({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:i.duration||Math.abs((l-(c&&"time"in c?c.time:s._time))/s.timeScale())||Le,onStart:function(){if(s.pause(),!g){var h=i.duration||Math.abs((l-(c&&"time"in c?c.time:s._time))/s.timeScale());x._dur!==h&&mr(x,h,0,1).render(x._time,!0,!0),g=1}d&&d.apply(x,f||[])}},i));return p?x.render(0):x},n.tweenFromTo=function(a,i,s){return this.tweenTo(i,kt({startAt:{time:Mt(this,a)}},s))},n.recent=function(){return this._recent},n.nextLabel=function(a){return a===void 0&&(a=this._time),Ip(this,Mt(this,a))},n.previousLabel=function(a){return a===void 0&&(a=this._time),Ip(this,Mt(this,a),1)},n.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.previousLabel(this._time+Le)},n.shiftChildren=function(a,i,s){s===void 0&&(s=0);for(var l=this._first,u=this.labels,c;l;)l._start>=s&&(l._start+=a,l._end+=a),l=l._next;if(i)for(c in u)u[c]>=s&&(u[c]+=a);return zn(this)},n.invalidate=function(a){var i=this._first;for(this._lock=0;i;)i.invalidate(a),i=i._next;return t.prototype.invalidate.call(this,a)},n.clear=function(a){a===void 0&&(a=!0);for(var i=this._first,s;i;)s=i._next,this.remove(i),i=s;return this._dp&&(this._time=this._tTime=this._pTime=0),a&&(this.labels={}),zn(this)},n.totalDuration=function(a){var i=0,s=this,l=s._last,u=Dt,c,d,f;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-a:a));if(s._dirty){for(f=s.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>u&&s._sort&&l._ts&&!s._lock?(s._lock=1,Jt(s,l,d-l._delay,1)._lock=0):u=d,d<0&&l._ts&&(i-=d,(!f&&!s._dp||f&&f.smoothChildTiming)&&(s._start+=d/s._ts,s._time-=d,s._tTime-=d),s.shiftChildren(-d,!1,-1/0),u=0),l._end>i&&l._ts&&(i=l._end),l=c;mr(s,s===Oe&&s._time>i?s._time:i,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(a){if(Oe._ts&&(pp(Oe,Hi(a,Oe)),fp=Tt.frame),Tt.frame>=hp){hp+=vt.autoSleep||120;var i=Oe._first;if((!i||!i._ts)&&vt.autoSleep&&Tt._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||Tt.sleep()}}},e})(Sa);kt(lt.prototype,{_lock:0,_hasPause:0,_forcing:0});var zv=function(e,n,r,a,i,s,l){var u=new _t(this._pt,e,n,0,1,qp,null,i),c=0,d=0,f,p,g,x,m,h,P,T;for(u.b=r,u.e=a,r+="",a+="",(P=~a.indexOf("random("))&&(a=ya(a)),s&&(T=[r,a],s(T,e,n),r=T[0],a=T[1]),p=r.match(rl)||[];f=rl.exec(a);)x=f[0],m=a.substring(c,f.index),g?g=(g+1)%5:m.substr(-5)==="rgba("&&(g=1),x!==p[d++]&&(h=parseFloat(p[d-1])||0,u._pt={_next:u._pt,p:m||d===1?m:",",s:h,c:x.charAt(1)==="="?dr(h,x)-h:parseFloat(x)-h,m:g&&g<4?Math.round:0},c=rl.lastIndex);return u.c=c<a.length?a.substring(c,a.length):"",u.fp=l,(op.test(a)||P)&&(u.e=0),this._pt=u,u},vl=function(e,n,r,a,i,s,l,u,c,d){Ue(a)&&(a=a(i||0,e,s));var f=e[n],p=r!=="get"?r:Ue(f)?c?e[n.indexOf("set")||!Ue(e["get"+n.substr(3)])?n:"get"+n.substr(3)](c):e[n]():f,g=Ue(f)?c?Yv:Yp:kl,x;if(it(a)&&(~a.indexOf("random(")&&(a=ya(a)),a.charAt(1)==="="&&(x=dr(p,a)+(dt(p)||0),(x||x===0)&&(a=x))),!d||p!==a||wl)return!isNaN(p*a)&&a!==""?(x=new _t(this._pt,e,n,+p||0,a-(p||0),typeof f=="boolean"?qv:Vp,0,g),c&&(x.fp=c),l&&x.modifier(l,this,e),this._pt=x):(!f&&!(n in e)&&sl(n,a),zv.call(this,e,n,p,a,g,u||vt.stringFilter,c))},Ov=function(e,n,r,a,i){if(Ue(e)&&(e=ka(e,i,n,r,a)),!Kt(e)||e.style&&e.nodeType||ut(e)||ip(e))return it(e)?ka(e,i,n,r,a):e;var s={},l;for(l in e)s[l]=ka(e[l],i,n,r,a);return s},Wp=function(e,n,r,a,i,s){var l,u,c,d;if(St[e]&&(l=new St[e]).init(i,l.rawVars?n[e]:Ov(n[e],a,i,s,r),r,a,s)!==!1&&(r._pt=u=new _t(r._pt,i,e,0,1,l.render,l,0,l.priority),r!==pr))for(c=r._ptLookup[r._targets.indexOf(i)],d=l._props.length;d--;)c[l._props[d]]=u;return l},kn,wl,Sl=function t(e,n,r){var a=e.vars,i=a.ease,s=a.startAt,l=a.immediateRender,u=a.lazy,c=a.onUpdate,d=a.runBackwards,f=a.yoyoEase,p=a.keyframes,g=a.autoRevert,x=e._dur,m=e._startAt,h=e._targets,P=e.parent,T=P&&P.data==="nested"?P.vars.targets:h,C=e._overwrite==="auto"&&!Jo,w=e.timeline,j,S,M,_,v,D,y,N,A,F,L,k,H;if(w&&(!p||!i)&&(i="none"),e._ease=On(i,cr.ease),e._yEase=f?Hp(On(f===!0?i:f,cr.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!w&&!!a.runBackwards,!w||p&&!a.stagger){if(N=h[0]?Rn(h[0]).harness:0,k=N&&a[N.prop],j=Ai(a,ol),m&&(m._zTime<0&&m.progress(1),n<0&&d&&l&&!g?m.render(-1,!0):m.revert(d&&x?Li:gv),m._lazy=0),s){if(vn(e._startAt=Xe.set(h,kt({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:!m&&gt(u),startAt:null,delay:0,onUpdate:c&&function(){return Ct(e,"onUpdate")},stagger:0},s))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ot||!l&&!g)&&e._startAt.revert(Li),l&&x&&n<=0&&r<=0){n&&(e._zTime=n);return}}else if(d&&x&&!m){if(n&&(l=!1),M=kt({overwrite:!1,data:"isFromStart",lazy:l&&!m&&gt(u),immediateRender:l,stagger:0,parent:P},j),k&&(M[N.prop]=k),vn(e._startAt=Xe.set(h,M)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ot?e._startAt.revert(Li):e._startAt.render(-1,!0)),e._zTime=n,!l)t(e._startAt,Le,Le);else if(!n)return}for(e._pt=e._ptCache=0,u=x&&gt(u)||u&&!x,S=0;S<h.length;S++){if(v=h[S],y=v._gsap||dl(h)[S]._gsap,e._ptLookup[S]=F={},ll[y.id]&&xn.length&&Bi(),L=T===h?S:T.indexOf(v),N&&(A=new N).init(v,k||j,e,L,T)!==!1&&(e._pt=_=new _t(e._pt,v,A.name,0,1,A.render,A,0,A.priority),A._props.forEach(function(Q){F[Q]=_}),A.priority&&(D=1)),!N||k)for(M in j)St[M]&&(A=Wp(M,j,e,L,v,T))?A.priority&&(D=1):F[M]=_=vl.call(e,v,M,"get",j[M],L,T,0,a.stringFilter);e._op&&e._op[S]&&e.kill(v,e._op[S]),C&&e._pt&&(kn=e,Oe.killTweensOf(v,F,e.globalTime(n)),H=!e.parent,kn=0),e._pt&&u&&(ll[y.id]=1)}D&&Xp(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!H,p&&n<=0&&w.render(Dt,!0,!0)},Wv=function(e,n,r,a,i,s,l,u){var c=(e._pt&&e._ptCache||(e._ptCache={}))[n],d,f,p,g;if(!c)for(c=e._ptCache[n]=[],p=e._ptLookup,g=e._targets.length;g--;){if(d=p[g][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return wl=1,e.vars[n]="+=0",Sl(e,l),wl=0,u?ma(n+" not eligible for reset"):1;c.push(d)}for(g=c.length;g--;)f=c[g],d=f._pt||f,d.s=(a||a===0)&&!i?a:d.s+(a||0)+s*d.c,d.c=r-d.s,f.e&&(f.e=qe(r)+dt(f.e)),f.b&&(f.b=d.s+dt(f.b))},Uv=function(e,n){var r=e[0]?Rn(e[0]).harness:0,a=r&&r.aliases,i,s,l,u;if(!a)return n;i=fr({},n);for(s in a)if(s in i)for(u=a[s].split(","),l=u.length;l--;)i[u[l]]=i[s];return i},Gv=function(e,n,r,a){var i=n.ease||a||"power1.inOut",s,l;if(ut(n))l=r[e]||(r[e]=[]),n.forEach(function(u,c){return l.push({t:c/(n.length-1)*100,v:u,e:i})});else for(s in n)l=r[s]||(r[s]=[]),s==="ease"||l.push({t:parseFloat(e),v:n[s],e:i})},ka=function(e,n,r,a,i){return Ue(e)?e.call(n,r,a,i):it(e)&&~e.indexOf("random(")?ya(e):e},Up=ul+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Gp={};bt(Up+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return Gp[t]=1});var Xe=(function(t){rp(e,t);function e(r,a,i,s){var l;typeof a=="number"&&(i.duration=a,a=i,i=null),l=t.call(this,s?a:ga(a))||this;var u=l.vars,c=u.duration,d=u.delay,f=u.immediateRender,p=u.stagger,g=u.overwrite,x=u.keyframes,m=u.defaults,h=u.scrollTrigger,P=u.yoyoEase,T=a.parent||Oe,C=(ut(r)||ip(r)?cn(r[0]):"length"in a)?[r]:$t(r),w,j,S,M,_,v,D,y;if(l._targets=C.length?dl(C):ma("GSAP target "+r+" not found. https://gsap.com",!vt.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,x||p||Ii(c)||Ii(d)){if(a=l.vars,w=l.timeline=new lt({data:"nested",defaults:m||{},targets:T&&T.data==="nested"?T.vars.targets:C}),w.kill(),w.parent=w._dp=ln(l),w._start=0,p||Ii(c)||Ii(d)){if(M=C.length,D=p&&Np(p),Kt(p))for(_ in p)~Up.indexOf(_)&&(y||(y={}),y[_]=p[_]);for(j=0;j<M;j++)S=Ai(a,Gp),S.stagger=0,P&&(S.yoyoEase=P),y&&fr(S,y),v=C[j],S.duration=+ka(c,ln(l),j,v,C),S.delay=(+ka(d,ln(l),j,v,C)||0)-l._delay,!p&&M===1&&S.delay&&(l._delay=d=S.delay,l._start+=d,S.delay=0),w.to(v,S,D?D(j,v,C):0),w._ease=Ie.none;w.duration()?c=d=0:l.timeline=0}else if(x){ga(kt(w.vars.defaults,{ease:"none"})),w._ease=On(x.ease||a.ease||"none");var N=0,A,F,L;if(ut(x))x.forEach(function(k){return w.to(C,k,">")}),w.duration();else{S={};for(_ in x)_==="ease"||_==="easeEach"||Gv(_,x[_],S,x.easeEach);for(_ in S)for(A=S[_].sort(function(k,H){return k.t-H.t}),N=0,j=0;j<A.length;j++)F=A[j],L={ease:F.e,duration:(F.t-(j?A[j-1].t:0))/100*c},L[_]=F.v,w.to(C,L,N),N+=L.duration;w.duration()<c&&w.to({},{duration:c-w.duration()})}}c||l.duration(c=w.duration())}else l.timeline=0;return g===!0&&!Jo&&(kn=ln(l),Oe.killTweensOf(C),kn=0),Jt(T,ln(l),i),a.reversed&&l.reverse(),a.paused&&l.paused(!0),(f||!c&&!x&&l._start===Je(T._time)&&gt(f)&&wv(ln(l))&&T.data!=="nested")&&(l._tTime=-Le,l.render(Math.max(0,-d)||0)),h&&wp(ln(l),h),l}var n=e.prototype;return n.render=function(a,i,s){var l=this._time,u=this._tDur,c=this._dur,d=a<0,f=a>u-Le&&!d?u:a<Le?0:a,p,g,x,m,h,P,T,C,w;if(!c)kv(this,a,i,s);else if(f!==this._tTime||!a||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(p=f,C=this.timeline,this._repeat){if(m=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(m*100+a,i,s);if(p=Je(f%m),f===u?(x=this._repeat,p=c):(h=Je(f/m),x=~~h,x&&x===h?(p=c,x--):p>c&&(p=c)),P=this._yoyo&&x&1,P&&(w=this._yEase,p=c-p),h=hr(this._tTime,m),p===l&&!s&&this._initted&&x===h)return this._tTime=f,this;x!==h&&(C&&this._yEase&&Rp(C,P),this.vars.repeatRefresh&&!P&&!this._lock&&p!==m&&this._initted&&(this._lock=s=1,this.render(Je(m*x),!0).invalidate()._lock=0))}if(!this._initted){if(Sp(this,d?a:p,s,i,f))return this._tTime=0,this;if(l!==this._time&&!(s&&this.vars.repeatRefresh&&x!==h))return this;if(c!==this._dur)return this.render(a,i,s)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=T=(w||this._ease)(p/c),this._from&&(this.ratio=T=1-T),!l&&f&&!i&&!h&&(Ct(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(T,g.d),g=g._next;C&&C.render(a<0?a:C._dur*C._ease(p/this._dur),i,s)||this._startAt&&(this._zTime=a),this._onUpdate&&!i&&(d&&hl(this,a,i,s),Ct(this,"onUpdate")),this._repeat&&x!==h&&this.vars.onRepeat&&!i&&this.parent&&Ct(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(d&&!this._onUpdate&&hl(this,a,!0,!0),(a||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&vn(this,1),!i&&!(d&&!l)&&(f||l||P)&&(Ct(this,f===u?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(a){return(!a||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(a),t.prototype.invalidate.call(this,a)},n.resetTo=function(a,i,s,l,u){wa||Tt.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||Sl(this,c),d=this._ease(c/this._dur),Wv(this,a,i,s,l,d,c,u)?this.resetTo(a,i,s,l,1):(zi(this,0),this.parent||yp(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(a,i){if(i===void 0&&(i="all"),!a&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?xa(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ot),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(a,i,kn&&kn.vars.overwrite!==!0)._first||xa(this),this.parent&&s!==this.timeline.totalDuration()&&mr(this,this._dur*this.timeline._tDur/s,0,1),this}var l=this._targets,u=a?$t(a):l,c=this._ptLookup,d=this._pt,f,p,g,x,m,h,P;if((!i||i==="all")&&xv(l,u))return i==="all"&&(this._pt=0),xa(this);for(f=this._op=this._op||[],i!=="all"&&(it(i)&&(m={},bt(i,function(T){return m[T]=1}),i=m),i=Uv(l,i)),P=l.length;P--;)if(~u.indexOf(l[P])){p=c[P],i==="all"?(f[P]=i,x=p,g={}):(g=f[P]=f[P]||{},x=i);for(m in x)h=p&&p[m],h&&((!("kill"in h.d)||h.d.kill(m)===!0)&&Ei(this,h,"_pt"),delete p[m]),g!=="all"&&(g[m]=1)}return this._initted&&!this._pt&&d&&xa(this),this},e.to=function(a,i){return new e(a,i,arguments[2])},e.from=function(a,i){return ba(1,arguments)},e.delayedCall=function(a,i,s,l){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:a,onComplete:i,onReverseComplete:i,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:l})},e.fromTo=function(a,i,s){return ba(2,arguments)},e.set=function(a,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(a,i)},e.killTweensOf=function(a,i,s){return Oe.killTweensOf(a,i,s)},e})(Sa);kt(Xe.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),bt("staggerTo,staggerFrom,staggerFromTo",function(t){Xe[t]=function(){var e=new lt,n=pl.call(arguments,0);return n.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,n)}});var kl=function(e,n,r){return e[n]=r},Yp=function(e,n,r){return e[n](r)},Yv=function(e,n,r,a){return e[n](a.fp,r)},Vv=function(e,n,r){return e.setAttribute(n,r)},Cl=function(e,n){return Ue(e[n])?Yp:el(e[n])&&e.setAttribute?Vv:kl},Vp=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},qv=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},qp=function(e,n){var r=n._pt,a="";if(!e&&n.b)a=n.b;else if(e===1&&n.e)a=n.e;else{for(;r;)a=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+a,r=r._next;a+=n.c}n.set(n.t,n.p,a,n)},Tl=function(e,n){for(var r=n._pt;r;)r.r(e,r.d),r=r._next},Xv=function(e,n,r,a){for(var i=this._pt,s;i;)s=i._next,i.p===a&&i.modifier(e,n,r),i=s},Kv=function(e){for(var n=this._pt,r,a;n;)a=n._next,n.p===e&&!n.op||n.op===e?Ei(this,n,"_pt"):n.dep||(r=1),n=a;return!r},Zv=function(e,n,r,a){a.mSet(e,n,a.m.call(a.tween,r,a.mt),a)},Xp=function(e){for(var n=e._pt,r,a,i,s;n;){for(r=n._next,a=i;a&&a.pr>n.pr;)a=a._next;(n._prev=a?a._prev:s)?n._prev._next=n:i=n,(n._next=a)?a._prev=n:s=n,n=r}e._pt=i},_t=(function(){function t(n,r,a,i,s,l,u,c,d){this.t=r,this.s=i,this.c=s,this.p=a,this.r=l||Vp,this.d=u||this,this.set=c||kl,this.pr=d||0,this._next=n,n&&(n._prev=this)}var e=t.prototype;return e.modifier=function(r,a,i){this.mSet=this.mSet||this.set,this.set=Zv,this.m=r,this.mt=i,this.tween=a},t})();bt(ul+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return ol[t]=1}),wt.TweenMax=wt.TweenLite=Xe,wt.TimelineLite=wt.TimelineMax=lt,Oe=new lt({sortChildren:!1,defaults:cr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),vt.stringFilter=Ep;var Un=[],Oi={},Jv=[],Kp=0,Qv=0,Nl=function(e){return(Oi[e]||Jv).map(function(n){return n()})},jl=function(){var e=Date.now(),n=[];e-Kp>2&&(Nl("matchMediaInit"),Un.forEach(function(r){var a=r.queries,i=r.conditions,s,l,u,c;for(l in a)s=Zt.matchMedia(a[l]).matches,s&&(u=1),s!==i[l]&&(i[l]=s,c=1);c&&(r.revert(),u&&n.push(r))}),Nl("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(a){return r.add(null,a)})}),Kp=e,Nl("matchMedia"))},Zp=(function(){function t(n,r){this.selector=r&&gl(r),this.data=[],this._r=[],this.isReverted=!1,this.id=Qv++,n&&this.add(n)}var e=t.prototype;return e.add=function(r,a,i){Ue(r)&&(i=a,a=r,r=Ue);var s=this,l=function(){var c=He,d=s.selector,f;return c&&c!==s&&c.data.push(s),i&&(s.selector=gl(i)),He=s,f=a.apply(s,arguments),Ue(f)&&s._r.push(f),He=c,s.selector=d,s.isReverted=!1,f};return s.last=l,r===Ue?l(s,function(u){return s.add(null,u)}):r?s[r]=l:l},e.ignore=function(r){var a=He;He=null,r(this),He=a},e.getTweens=function(){var r=[];return this.data.forEach(function(a){return a instanceof t?r.push.apply(r,a.getTweens()):a instanceof Xe&&!(a.parent&&a.parent.data==="nested")&&r.push(a)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,a){var i=this;if(r?(function(){for(var l=i.getTweens(),u=i.data.length,c;u--;)c=i.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,f){return f.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),u=i.data.length;u--;)c=i.data[u],c instanceof lt?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Xe)&&c.revert&&c.revert(r);i._r.forEach(function(d){return d(r,i)}),i.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),a)for(var s=Un.length;s--;)Un[s].id===this.id&&Un.splice(s,1)},e.revert=function(r){this.kill(r||{})},t})(),e1=(function(){function t(n){this.contexts=[],this.scope=n,He&&He.data.push(this)}var e=t.prototype;return e.add=function(r,a,i){Kt(r)||(r={matches:r});var s=new Zp(0,i||this.scope),l=s.conditions={},u,c,d;He&&!s.selector&&(s.selector=He.selector),this.contexts.push(s),a=s.add("onMatch",a),s.queries=r;for(c in r)c==="all"?d=1:(u=Zt.matchMedia(r[c]),u&&(Un.indexOf(s)<0&&Un.push(s),(l[c]=u.matches)&&(d=1),u.addListener?u.addListener(jl):u.addEventListener("change",jl)));return d&&a(s,function(f){return s.add(null,f)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(a){return a.kill(r,!0)})},t})(),Wi={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(a){return Lp(a)})},timeline:function(e){return new lt(e)},getTweensOf:function(e,n){return Oe.getTweensOf(e,n)},getProperty:function(e,n,r,a){it(e)&&(e=$t(e)[0]);var i=Rn(e||{}).get,s=r?bp:gp;return r==="native"&&(r=""),e&&(n?s((St[n]&&St[n].get||i)(e,n,r,a)):function(l,u,c){return s((St[l]&&St[l].get||i)(e,l,u,c))})},quickSetter:function(e,n,r){if(e=$t(e),e.length>1){var a=e.map(function(d){return yt.quickSetter(d,n,r)}),i=a.length;return function(d){for(var f=i;f--;)a[f](d)}}e=e[0]||{};var s=St[n],l=Rn(e),u=l.harness&&(l.harness.aliases||{})[n]||n,c=s?function(d){var f=new s;pr._pt=0,f.init(e,r?d+r:d,pr,0,[e]),f.render(1,f),pr._pt&&Tl(1,pr)}:l.set(e,u);return s?c:function(d){return c(e,u,r?d+r:d,l,1)}},quickTo:function(e,n,r){var a,i=yt.to(e,kt((a={},a[n]="+=0.1",a.paused=!0,a.stagger=0,a),r||{})),s=function(u,c,d){return i.resetTo(n,u,c,d)};return s.tween=i,s},isTweening:function(e){return Oe.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=On(e.ease,cr.ease)),_p(cr,e||{})},config:function(e){return _p(vt,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,a=e.plugins,i=e.defaults,s=e.extendTimeline;(a||"").split(",").forEach(function(l){return l&&!St[l]&&!wt[l]&&ma(n+" effect requires "+l+" plugin.")}),cl[n]=function(l,u,c){return r($t(l),kt(u||{},i),c)},s&&(lt.prototype[n]=function(l,u,c){return this.add(cl[n](l,Kt(u)?u:(c=u)&&{},this),c)})},registerEase:function(e,n){Ie[e]=On(n)},parseEase:function(e,n){return arguments.length?On(e,n):Ie},getById:function(e){return Oe.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var r=new lt(e),a,i;for(r.smoothChildTiming=gt(e.smoothChildTiming),Oe.remove(r),r._dp=0,r._time=r._tTime=Oe._time,a=Oe._first;a;)i=a._next,(n||!(!a._dur&&a instanceof Xe&&a.vars.onComplete===a._targets[0]))&&Jt(r,a,a._start-a._delay),a=i;return Jt(Oe,r,0),r},context:function(e,n){return e?new Zp(e,n):He},matchMedia:function(e){return new e1(e)},matchMediaRefresh:function(){return Un.forEach(function(e){var n=e.conditions,r,a;for(a in n)n[a]&&(n[a]=!1,r=1);r&&e.revert()})||jl()},addEventListener:function(e,n){var r=Oi[e]||(Oi[e]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(e,n){var r=Oi[e],a=r&&r.indexOf(n);a>=0&&r.splice(a,1)},utils:{wrap:Iv,wrapYoyo:Pv,distribute:Np,random:Dp,snap:jp,normalize:$v,getUnit:dt,clamp:Nv,splitColor:Fp,toArray:$t,selector:gl,mapRange:$p,pipe:Dv,unitize:Mv,interpolate:Lv,shuffle:Tp},install:up,effects:cl,ticker:Tt,updateRoot:lt.updateRoot,plugins:St,globalTimeline:Oe,core:{PropTween:_t,globals:dp,Tween:Xe,Timeline:lt,Animation:Sa,getCache:Rn,_removeLinkedListItem:Ei,reverting:function(){return ot},context:function(e){return e&&He&&(He.data.push(e),e._ctx=He),He},suppressOverwrites:function(e){return Jo=e}}};bt("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Wi[t]=Xe[t]}),Tt.add(lt.updateRoot),pr=Wi.to({},{duration:0});var t1=function(e,n){for(var r=e._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},n1=function(e,n){var r=e._targets,a,i,s;for(a in n)for(i=r.length;i--;)s=e._ptLookup[i][a],s&&(s=s.d)&&(s._pt&&(s=t1(s,a)),s&&s.modifier&&s.modifier(n[a],e,r[i],a))},Dl=function(e,n){return{name:e,headless:1,rawVars:1,init:function(a,i,s){s._onInit=function(l){var u,c;if(it(i)&&(u={},bt(i,function(d){return u[d]=1}),i=u),n){u={};for(c in i)u[c]=n(i[c]);i=u}n1(l,i)}}}},yt=Wi.registerPlugin({name:"attr",init:function(e,n,r,a,i){var s,l,u;this.tween=r;for(s in n)u=e.getAttribute(s)||"",l=this.add(e,"setAttribute",(u||0)+"",n[s],a,i,0,0,s),l.op=s,l.b=u,this._props.push(s)},render:function(e,n){for(var r=n._pt;r;)ot?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,n){for(var r=n.length;r--;)this.add(e,r,e[r]||0,n[r],0,0,0,0,0,1)}},Dl("roundProps",bl),Dl("modifiers"),Dl("snap",jp))||Wi;Xe.version=lt.version=yt.version="3.13.0",cp=1,tl()&&gr();var r1=Ie.Power0,a1=Ie.Power1,i1=Ie.Power2,s1=Ie.Power3,o1=Ie.Power4,l1=Ie.Linear,c1=Ie.Quad,u1=Ie.Cubic,d1=Ie.Quart,f1=Ie.Quint,h1=Ie.Strong,m1=Ie.Elastic,p1=Ie.Back,g1=Ie.SteppedEase,b1=Ie.Bounce,_1=Ie.Sine,y1=Ie.Expo,x1=Ie.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Jp,Cn,br,Ml,Gn,Qp,$l,v1=function(){return typeof window<"u"},un={},Yn=180/Math.PI,_r=Math.PI/180,yr=Math.atan2,eg=1e8,Il=/([A-Z])/g,w1=/(left|right|width|margin|padding|x)/i,S1=/[\s,\(]\S/,Qt={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Pl=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},k1=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},C1=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},T1=function(e,n){var r=n.s+n.c*e;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},tg=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},ng=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},N1=function(e,n,r){return e.style[n]=r},j1=function(e,n,r){return e.style.setProperty(n,r)},D1=function(e,n,r){return e._gsap[n]=r},M1=function(e,n,r){return e._gsap.scaleX=e._gsap.scaleY=r},$1=function(e,n,r,a,i){var s=e._gsap;s.scaleX=s.scaleY=r,s.renderTransform(i,s)},I1=function(e,n,r,a,i){var s=e._gsap;s[n]=r,s.renderTransform(i,s)},We="transform",xt=We+"Origin",P1=function t(e,n){var r=this,a=this.target,i=a.style,s=a._gsap;if(e in un&&i){if(this.tfm=this.tfm||{},e!=="transform")e=Qt[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return r.tfm[l]=dn(a,l)}):this.tfm[e]=s.x?s[e]:dn(a,e),e===xt&&(this.tfm.zOrigin=s.zOrigin);else return Qt.transform.split(",").forEach(function(l){return t.call(r,l,n)});if(this.props.indexOf(We)>=0)return;s.svg&&(this.svgo=a.getAttribute("data-svg-origin"),this.props.push(xt,n,"")),e=We}(i||n)&&this.props.push(e,n,i[e])},rg=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},L1=function(){var e=this.props,n=this.target,r=n.style,a=n._gsap,i,s;for(i=0;i<e.length;i+=3)e[i+1]?e[i+1]===2?n[e[i]](e[i+2]):n[e[i]]=e[i+2]:e[i+2]?r[e[i]]=e[i+2]:r.removeProperty(e[i].substr(0,2)==="--"?e[i]:e[i].replace(Il,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)a[s]=this.tfm[s];a.svg&&(a.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),i=$l(),(!i||!i.isStart)&&!r[We]&&(rg(r),a.zOrigin&&r[xt]&&(r[xt]+=" "+a.zOrigin+"px",a.zOrigin=0,a.renderTransform()),a.uncache=1)}},ag=function(e,n){var r={target:e,props:[],revert:L1,save:P1};return e._gsap||yt.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(a){return r.save(a)}),r},ig,Ll=function(e,n){var r=Cn.createElementNS?Cn.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Cn.createElement(e);return r&&r.style?r:Cn.createElement(e)},It=function t(e,n,r){var a=getComputedStyle(e);return a[n]||a.getPropertyValue(n.replace(Il,"-$1").toLowerCase())||a.getPropertyValue(n)||!r&&t(e,xr(n)||n,1)||""},sg="O,Moz,ms,Ms,Webkit".split(","),xr=function(e,n,r){var a=n||Gn,i=a.style,s=5;if(e in i&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);s--&&!(sg[s]+e in i););return s<0?null:(s===3?"ms":s>=0?sg[s]:"")+e},Fl=function(){v1()&&window.document&&(Jp=window,Cn=Jp.document,br=Cn.documentElement,Gn=Ll("div")||{style:{}},Ll("div"),We=xr(We),xt=We+"Origin",Gn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",ig=!!xr("perspective"),$l=yt.core.reverting,Ml=1)},og=function(e){var n=e.ownerSVGElement,r=Ll("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),a=e.cloneNode(!0),i;a.style.display="block",r.appendChild(a),br.appendChild(r);try{i=a.getBBox()}catch{}return r.removeChild(a),br.removeChild(r),i},lg=function(e,n){for(var r=n.length;r--;)if(e.hasAttribute(n[r]))return e.getAttribute(n[r])},cg=function(e){var n,r;try{n=e.getBBox()}catch{n=og(e),r=1}return n&&(n.width||n.height)||r||(n=og(e)),n&&!n.width&&!n.x&&!n.y?{x:+lg(e,["x","cx","x1"])||0,y:+lg(e,["y","cy","y1"])||0,width:0,height:0}:n},ug=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&cg(e))},Vn=function(e,n){if(n){var r=e.style,a;n in un&&n!==xt&&(n=We),r.removeProperty?(a=n.substr(0,2),(a==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(a==="--"?n:n.replace(Il,"-$1").toLowerCase())):r.removeAttribute(n)}},Tn=function(e,n,r,a,i,s){var l=new _t(e._pt,n,r,0,1,s?ng:tg);return e._pt=l,l.b=a,l.e=i,e._props.push(r),l},dg={deg:1,rad:1,turn:1},F1={grid:1,flex:1},Nn=function t(e,n,r,a){var i=parseFloat(r)||0,s=(r+"").trim().substr((i+"").length)||"px",l=Gn.style,u=w1.test(n),c=e.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(u?"Width":"Height"),f=100,p=a==="px",g=a==="%",x,m,h,P;if(a===s||!i||dg[a]||dg[s])return i;if(s!=="px"&&!p&&(i=t(e,n,r,"px")),P=e.getCTM&&ug(e),(g||s==="%")&&(un[n]||~n.indexOf("adius")))return x=P?e.getBBox()[u?"width":"height"]:e[d],qe(g?i/x*f:i/100*x);if(l[u?"width":"height"]=f+(p?s:a),m=a!=="rem"&&~n.indexOf("adius")||a==="em"&&e.appendChild&&!c?e:e.parentNode,P&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===Cn||!m.appendChild)&&(m=Cn.body),h=m._gsap,h&&g&&h.width&&u&&h.time===Tt.time&&!h.uncache)return qe(i/h.width*f);if(g&&(n==="height"||n==="width")){var T=e.style[n];e.style[n]=f+a,x=e[d],T?e.style[n]=T:Vn(e,n)}else(g||s==="%")&&!F1[It(m,"display")]&&(l.position=It(e,"position")),m===e&&(l.position="static"),m.appendChild(Gn),x=Gn[d],m.removeChild(Gn),l.position="absolute";return u&&g&&(h=Rn(m),h.time=Tt.time,h.width=m[d]),qe(p?x*i/f:x&&i?f/x*i:0)},dn=function(e,n,r,a){var i;return Ml||Fl(),n in Qt&&n!=="transform"&&(n=Qt[n],~n.indexOf(",")&&(n=n.split(",")[0])),un[n]&&n!=="transform"?(i=Ta(e,a),i=n!=="transformOrigin"?i[n]:i.svg?i.origin:Gi(It(e,xt))+" "+i.zOrigin+"px"):(i=e.style[n],(!i||i==="auto"||a||~(i+"").indexOf("calc("))&&(i=Ui[n]&&Ui[n](e,n,r)||It(e,n)||mp(e,n)||(n==="opacity"?1:0))),r&&!~(i+"").trim().indexOf(" ")?Nn(e,n,i,r)+r:i},B1=function(e,n,r,a){if(!r||r==="none"){var i=xr(n,e,1),s=i&&It(e,i,1);s&&s!==r?(n=i,r=s):n==="borderColor"&&(r=It(e,"borderTopColor"))}var l=new _t(this._pt,e.style,n,0,1,qp),u=0,c=0,d,f,p,g,x,m,h,P,T,C,w,j;if(l.b=r,l.e=a,r+="",a+="",a.substring(0,6)==="var(--"&&(a=It(e,a.substring(4,a.indexOf(")")))),a==="auto"&&(m=e.style[n],e.style[n]=a,a=It(e,n)||a,m?e.style[n]=m:Vn(e,n)),d=[r,a],Ep(d),r=d[0],a=d[1],p=r.match(ur)||[],j=a.match(ur)||[],j.length){for(;f=ur.exec(a);)h=f[0],T=a.substring(u,f.index),x?x=(x+1)%5:(T.substr(-5)==="rgba("||T.substr(-5)==="hsla(")&&(x=1),h!==(m=p[c++]||"")&&(g=parseFloat(m)||0,w=m.substr((g+"").length),h.charAt(1)==="="&&(h=dr(g,h)+w),P=parseFloat(h),C=h.substr((P+"").length),u=ur.lastIndex-C.length,C||(C=C||vt.units[n]||w,u===a.length&&(a+=C,l.e+=C)),w!==C&&(g=Nn(e,n,m,C)||0),l._pt={_next:l._pt,p:T||c===1?T:",",s:g,c:P-g,m:x&&x<4||n==="zIndex"?Math.round:0});l.c=u<a.length?a.substring(u,a.length):""}else l.r=n==="display"&&a==="none"?ng:tg;return op.test(a)&&(l.e=0),this._pt=l,l},fg={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},A1=function(e){var n=e.split(" "),r=n[0],a=n[1]||"50%";return(r==="top"||r==="bottom"||a==="left"||a==="right")&&(e=r,r=a,a=e),n[0]=fg[r]||r,n[1]=fg[a]||a,n.join(" ")},E1=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,a=r.style,i=n.u,s=r._gsap,l,u,c;if(i==="all"||i===!0)a.cssText="",u=1;else for(i=i.split(","),c=i.length;--c>-1;)l=i[c],un[l]&&(u=1,l=l==="transformOrigin"?xt:We),Vn(r,l);u&&(Vn(r,We),s&&(s.svg&&r.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",Ta(r,1),s.uncache=1,rg(a)))}},Ui={clearProps:function(e,n,r,a,i){if(i.data!=="isFromStart"){var s=e._pt=new _t(e._pt,n,r,0,0,E1);return s.u=a,s.pr=-10,s.tween=i,e._props.push(r),1}}},Ca=[1,0,0,1,0,0],hg={},mg=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},pg=function(e){var n=It(e,We);return mg(n)?Ca:n.substr(7).match(sp).map(qe)},Bl=function(e,n){var r=e._gsap||Rn(e),a=e.style,i=pg(e),s,l,u,c;return r.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,i=[u.a,u.b,u.c,u.d,u.e,u.f],i.join(",")==="1,0,0,1,0,0"?Ca:i):(i===Ca&&!e.offsetParent&&e!==br&&!r.svg&&(u=a.display,a.display="block",s=e.parentNode,(!s||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,l=e.nextElementSibling,br.appendChild(e)),i=pg(e),u?a.display=u:Vn(e,"display"),c&&(l?s.insertBefore(e,l):s?s.appendChild(e):br.removeChild(e))),n&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},Al=function(e,n,r,a,i,s){var l=e._gsap,u=i||Bl(e,!0),c=l.xOrigin||0,d=l.yOrigin||0,f=l.xOffset||0,p=l.yOffset||0,g=u[0],x=u[1],m=u[2],h=u[3],P=u[4],T=u[5],C=n.split(" "),w=parseFloat(C[0])||0,j=parseFloat(C[1])||0,S,M,_,v;r?u!==Ca&&(M=g*h-x*m)&&(_=w*(h/M)+j*(-m/M)+(m*T-h*P)/M,v=w*(-x/M)+j*(g/M)-(g*T-x*P)/M,w=_,j=v):(S=cg(e),w=S.x+(~C[0].indexOf("%")?w/100*S.width:w),j=S.y+(~(C[1]||C[0]).indexOf("%")?j/100*S.height:j)),a||a!==!1&&l.smooth?(P=w-c,T=j-d,l.xOffset=f+(P*g+T*m)-P,l.yOffset=p+(P*x+T*h)-T):l.xOffset=l.yOffset=0,l.xOrigin=w,l.yOrigin=j,l.smooth=!!a,l.origin=n,l.originIsAbsolute=!!r,e.style[xt]="0px 0px",s&&(Tn(s,l,"xOrigin",c,w),Tn(s,l,"yOrigin",d,j),Tn(s,l,"xOffset",f,l.xOffset),Tn(s,l,"yOffset",p,l.yOffset)),e.setAttribute("data-svg-origin",w+" "+j)},Ta=function(e,n){var r=e._gsap||new Op(e);if("x"in r&&!n&&!r.uncache)return r;var a=e.style,i=r.scaleX<0,s="px",l="deg",u=getComputedStyle(e),c=It(e,xt)||"0",d,f,p,g,x,m,h,P,T,C,w,j,S,M,_,v,D,y,N,A,F,L,k,H,Q,O,z,$,I,U,R,K;return d=f=p=m=h=P=T=C=w=0,g=x=1,r.svg=!!(e.getCTM&&ug(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(a[We]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[We]!=="none"?u[We]:"")),a.scale=a.rotate=a.translate="none"),M=Bl(e,r.svg),r.svg&&(r.uncache?(Q=e.getBBox(),c=r.xOrigin-Q.x+"px "+(r.yOrigin-Q.y)+"px",H=""):H=!n&&e.getAttribute("data-svg-origin"),Al(e,H||c,!!H||r.originIsAbsolute,r.smooth!==!1,M)),j=r.xOrigin||0,S=r.yOrigin||0,M!==Ca&&(y=M[0],N=M[1],A=M[2],F=M[3],d=L=M[4],f=k=M[5],M.length===6?(g=Math.sqrt(y*y+N*N),x=Math.sqrt(F*F+A*A),m=y||N?yr(N,y)*Yn:0,T=A||F?yr(A,F)*Yn+m:0,T&&(x*=Math.abs(Math.cos(T*_r))),r.svg&&(d-=j-(j*y+S*A),f-=S-(j*N+S*F))):(K=M[6],U=M[7],z=M[8],$=M[9],I=M[10],R=M[11],d=M[12],f=M[13],p=M[14],_=yr(K,I),h=_*Yn,_&&(v=Math.cos(-_),D=Math.sin(-_),H=L*v+z*D,Q=k*v+$*D,O=K*v+I*D,z=L*-D+z*v,$=k*-D+$*v,I=K*-D+I*v,R=U*-D+R*v,L=H,k=Q,K=O),_=yr(-A,I),P=_*Yn,_&&(v=Math.cos(-_),D=Math.sin(-_),H=y*v-z*D,Q=N*v-$*D,O=A*v-I*D,R=F*D+R*v,y=H,N=Q,A=O),_=yr(N,y),m=_*Yn,_&&(v=Math.cos(_),D=Math.sin(_),H=y*v+N*D,Q=L*v+k*D,N=N*v-y*D,k=k*v-L*D,y=H,L=Q),h&&Math.abs(h)+Math.abs(m)>359.9&&(h=m=0,P=180-P),g=qe(Math.sqrt(y*y+N*N+A*A)),x=qe(Math.sqrt(k*k+K*K)),_=yr(L,k),T=Math.abs(_)>2e-4?_*Yn:0,w=R?1/(R<0?-R:R):0),r.svg&&(H=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!mg(It(e,We)),H&&e.setAttribute("transform",H))),Math.abs(T)>90&&Math.abs(T)<270&&(i?(g*=-1,T+=m<=0?180:-180,m+=m<=0?180:-180):(x*=-1,T+=T<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+s,r.y=f-((r.yPercent=f&&(!n&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+s,r.z=p+s,r.scaleX=qe(g),r.scaleY=qe(x),r.rotation=qe(m)+l,r.rotationX=qe(h)+l,r.rotationY=qe(P)+l,r.skewX=T+l,r.skewY=C+l,r.transformPerspective=w+s,(r.zOrigin=parseFloat(c.split(" ")[2])||!n&&r.zOrigin||0)&&(a[xt]=Gi(c)),r.xOffset=r.yOffset=0,r.force3D=vt.force3D,r.renderTransform=r.svg?R1:ig?gg:H1,r.uncache=0,r},Gi=function(e){return(e=e.split(" "))[0]+" "+e[1]},El=function(e,n,r){var a=dt(n);return qe(parseFloat(n)+parseFloat(Nn(e,"x",r+"px",a)))+a},H1=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,gg(e,n)},qn="0deg",Na="0px",Xn=") ",gg=function(e,n){var r=n||this,a=r.xPercent,i=r.yPercent,s=r.x,l=r.y,u=r.z,c=r.rotation,d=r.rotationY,f=r.rotationX,p=r.skewX,g=r.skewY,x=r.scaleX,m=r.scaleY,h=r.transformPerspective,P=r.force3D,T=r.target,C=r.zOrigin,w="",j=P==="auto"&&e&&e!==1||P===!0;if(C&&(f!==qn||d!==qn)){var S=parseFloat(d)*_r,M=Math.sin(S),_=Math.cos(S),v;S=parseFloat(f)*_r,v=Math.cos(S),s=El(T,s,M*v*-C),l=El(T,l,-Math.sin(S)*-C),u=El(T,u,_*v*-C+C)}h!==Na&&(w+="perspective("+h+Xn),(a||i)&&(w+="translate("+a+"%, "+i+"%) "),(j||s!==Na||l!==Na||u!==Na)&&(w+=u!==Na||j?"translate3d("+s+", "+l+", "+u+") ":"translate("+s+", "+l+Xn),c!==qn&&(w+="rotate("+c+Xn),d!==qn&&(w+="rotateY("+d+Xn),f!==qn&&(w+="rotateX("+f+Xn),(p!==qn||g!==qn)&&(w+="skew("+p+", "+g+Xn),(x!==1||m!==1)&&(w+="scale("+x+", "+m+Xn),T.style[We]=w||"translate(0, 0)"},R1=function(e,n){var r=n||this,a=r.xPercent,i=r.yPercent,s=r.x,l=r.y,u=r.rotation,c=r.skewX,d=r.skewY,f=r.scaleX,p=r.scaleY,g=r.target,x=r.xOrigin,m=r.yOrigin,h=r.xOffset,P=r.yOffset,T=r.forceCSS,C=parseFloat(s),w=parseFloat(l),j,S,M,_,v;u=parseFloat(u),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,u+=d),u||c?(u*=_r,c*=_r,j=Math.cos(u)*f,S=Math.sin(u)*f,M=Math.sin(u-c)*-p,_=Math.cos(u-c)*p,c&&(d*=_r,v=Math.tan(c-d),v=Math.sqrt(1+v*v),M*=v,_*=v,d&&(v=Math.tan(d),v=Math.sqrt(1+v*v),j*=v,S*=v)),j=qe(j),S=qe(S),M=qe(M),_=qe(_)):(j=f,_=p,S=M=0),(C&&!~(s+"").indexOf("px")||w&&!~(l+"").indexOf("px"))&&(C=Nn(g,"x",s,"px"),w=Nn(g,"y",l,"px")),(x||m||h||P)&&(C=qe(C+x-(x*j+m*M)+h),w=qe(w+m-(x*S+m*_)+P)),(a||i)&&(v=g.getBBox(),C=qe(C+a/100*v.width),w=qe(w+i/100*v.height)),v="matrix("+j+","+S+","+M+","+_+","+C+","+w+")",g.setAttribute("transform",v),T&&(g.style[We]=v)},z1=function(e,n,r,a,i){var s=360,l=it(i),u=parseFloat(i)*(l&&~i.indexOf("rad")?Yn:1),c=u-a,d=a+c+"deg",f,p;return l&&(f=i.split("_")[1],f==="short"&&(c%=s,c!==c%(s/2)&&(c+=c<0?s:-s)),f==="cw"&&c<0?c=(c+s*eg)%s-~~(c/s)*s:f==="ccw"&&c>0&&(c=(c-s*eg)%s-~~(c/s)*s)),e._pt=p=new _t(e._pt,n,r,a,c,k1),p.e=d,p.u="deg",e._props.push(r),p},bg=function(e,n){for(var r in n)e[r]=n[r];return e},O1=function(e,n,r){var a=bg({},r._gsap),i="perspective,force3D,transformOrigin,svgOrigin",s=r.style,l,u,c,d,f,p,g,x;a.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),s[We]=n,l=Ta(r,1),Vn(r,We),r.setAttribute("transform",c)):(c=getComputedStyle(r)[We],s[We]=n,l=Ta(r,1),s[We]=c);for(u in un)c=a[u],d=l[u],c!==d&&i.indexOf(u)<0&&(g=dt(c),x=dt(d),f=g!==x?Nn(r,u,c,x):parseFloat(c),p=parseFloat(d),e._pt=new _t(e._pt,l,u,f,p-f,Pl),e._pt.u=x||0,e._props.push(u));bg(l,a)};bt("padding,margin,Width,Radius",function(t,e){var n="Top",r="Right",a="Bottom",i="Left",s=(e<3?[n,r,a,i]:[n+i,n+r,a+r,a+i]).map(function(l){return e<2?t+l:"border"+l+t});Ui[e>1?"border"+t:t]=function(l,u,c,d,f){var p,g;if(arguments.length<4)return p=s.map(function(x){return dn(l,x,c)}),g=p.join(" "),g.split(p[0]).length===5?p[0]:g;p=(d+"").split(" "),g={},s.forEach(function(x,m){return g[x]=p[m]=p[m]||p[(m-1)/2|0]}),l.init(u,g,f)}});var Hl={name:"css",register:Fl,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,r,a,i){var s=this._props,l=e.style,u=r.vars.startAt,c,d,f,p,g,x,m,h,P,T,C,w,j,S,M,_;Ml||Fl(),this.styles=this.styles||ag(e),_=this.styles.props,this.tween=r;for(m in n)if(m!=="autoRound"&&(d=n[m],!(St[m]&&Wp(m,n,r,a,e,i)))){if(g=typeof d,x=Ui[m],g==="function"&&(d=d.call(r,a,e,i),g=typeof d),g==="string"&&~d.indexOf("random(")&&(d=ya(d)),x)x(this,e,m,d,r)&&(M=1);else if(m.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(m)+"").trim(),d+="",Sn.lastIndex=0,Sn.test(c)||(h=dt(c),P=dt(d)),P?h!==P&&(c=Nn(e,m,c,P)+P):h&&(d+=h),this.add(l,"setProperty",c,d,a,i,0,0,m),s.push(m),_.push(m,0,l[m]);else if(g!=="undefined"){if(u&&m in u?(c=typeof u[m]=="function"?u[m].call(r,a,e,i):u[m],it(c)&&~c.indexOf("random(")&&(c=ya(c)),dt(c+"")||c==="auto"||(c+=vt.units[m]||dt(dn(e,m))||""),(c+"").charAt(1)==="="&&(c=dn(e,m))):c=dn(e,m),p=parseFloat(c),T=g==="string"&&d.charAt(1)==="="&&d.substr(0,2),T&&(d=d.substr(2)),f=parseFloat(d),m in Qt&&(m==="autoAlpha"&&(p===1&&dn(e,"visibility")==="hidden"&&f&&(p=0),_.push("visibility",0,l.visibility),Tn(this,l,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),m!=="scale"&&m!=="transform"&&(m=Qt[m],~m.indexOf(",")&&(m=m.split(",")[0]))),C=m in un,C){if(this.styles.save(m),g==="string"&&d.substring(0,6)==="var(--"&&(d=It(e,d.substring(4,d.indexOf(")"))),f=parseFloat(d)),w||(j=e._gsap,j.renderTransform&&!n.parseTransform||Ta(e,n.parseTransform),S=n.smoothOrigin!==!1&&j.smooth,w=this._pt=new _t(this._pt,l,We,0,1,j.renderTransform,j,0,-1),w.dep=1),m==="scale")this._pt=new _t(this._pt,j,"scaleY",j.scaleY,(T?dr(j.scaleY,T+f):f)-j.scaleY||0,Pl),this._pt.u=0,s.push("scaleY",m),m+="X";else if(m==="transformOrigin"){_.push(xt,0,l[xt]),d=A1(d),j.svg?Al(e,d,0,S,0,this):(P=parseFloat(d.split(" ")[2])||0,P!==j.zOrigin&&Tn(this,j,"zOrigin",j.zOrigin,P),Tn(this,l,m,Gi(c),Gi(d)));continue}else if(m==="svgOrigin"){Al(e,d,1,S,0,this);continue}else if(m in hg){z1(this,j,m,p,T?dr(p,T+d):d);continue}else if(m==="smoothOrigin"){Tn(this,j,"smooth",j.smooth,d);continue}else if(m==="force3D"){j[m]=d;continue}else if(m==="transform"){O1(this,d,e);continue}}else m in l||(m=xr(m)||m);if(C||(f||f===0)&&(p||p===0)&&!S1.test(d)&&m in l)h=(c+"").substr((p+"").length),f||(f=0),P=dt(d)||(m in vt.units?vt.units[m]:h),h!==P&&(p=Nn(e,m,c,P)),this._pt=new _t(this._pt,C?j:l,m,p,(T?dr(p,T+f):f)-p,!C&&(P==="px"||m==="zIndex")&&n.autoRound!==!1?T1:Pl),this._pt.u=P||0,h!==P&&P!=="%"&&(this._pt.b=c,this._pt.r=C1);else if(m in l)B1.call(this,e,m,c,T?T+d:d);else if(m in e)this.add(e,m,c||e[m],T?T+d:d,a,i);else if(m!=="parseTransform"){sl(m,d);continue}C||(m in l?_.push(m,0,l[m]):typeof e[m]=="function"?_.push(m,2,e[m]()):_.push(m,1,c||e[m])),s.push(m)}}M&&Xp(this)},render:function(e,n){if(n.tween._time||!$l())for(var r=n._pt;r;)r.r(e,r.d),r=r._next;else n.styles.revert()},get:dn,aliases:Qt,getSetter:function(e,n,r){var a=Qt[n];return a&&a.indexOf(",")<0&&(n=a),n in un&&n!==xt&&(e._gsap.x||dn(e,"x"))?r&&Qp===r?n==="scale"?M1:D1:(Qp=r||{})&&(n==="scale"?$1:I1):e.style&&!el(e.style[n])?N1:~n.indexOf("-")?j1:Cl(e,n)},core:{_removeProperty:Vn,_getMatrix:Bl}};yt.utils.checkPrefix=xr,yt.core.getStyleSaver=ag,(function(t,e,n,r){var a=bt(t+","+e+","+n,function(i){un[i]=1});bt(e,function(i){vt.units[i]="deg",hg[i]=1}),Qt[a[13]]=t+","+e,bt(r,function(i){var s=i.split(":");Qt[s[1]]=a[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),bt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){vt.units[t]="px"}),yt.registerPlugin(Hl);var Rl=yt.registerPlugin(Hl)||yt,W1=Rl.core.Tween;const U1=Object.freeze(Object.defineProperty({__proto__:null,Back:p1,Bounce:b1,CSSPlugin:Hl,Circ:x1,Cubic:u1,Elastic:m1,Expo:y1,Linear:l1,Power0:r1,Power1:a1,Power2:i1,Power3:s1,Power4:o1,Quad:c1,Quart:d1,Quint:f1,Sine:_1,SteppedEase:g1,Strong:h1,TimelineLite:lt,TimelineMax:lt,TweenLite:Xe,TweenMax:W1,default:Rl,gsap:Rl},Symbol.toStringTag,{value:"Module"}));b.Account=ec,b.ActionLink=Mg,b.AdaptiveDataGrid=$s,b.AnimationDurationFast=xd,b.AnimationDurationNormal=vd,b.AnimationDurationSlow=wd,b.AnimationEasingBounce=Td,b.AnimationEasingEaseIn=Sd,b.AnimationEasingEaseInOut=Cd,b.AnimationEasingEaseOut=kd,b.AppointmentCard=js,b.AreaSeriesPrimitive=ux,b.AriaDataGrid=hu,b.AriaTabsDataGrid=ti,b.AriaTabsDataGridAdaptive=$s,b.Axis=Rs,b.BackLink=$a,b.BandScalesProvider=fx,b.BarSeriesPrimitive=dx,b.BorderColorCard=lo,b.BorderColorCardHover=co,b.BorderColorDefault=so,b.BorderColorError=uo,b.BorderColorForm=oo,b.BorderRadiusLarge=zd,b.BorderRadiusMedium=Rd,b.BorderRadiusNone=Ed,b.BorderRadiusSmall=Hd,b.BorderWidthCardBottom=Ld,b.BorderWidthDefault=$d,b.BorderWidthFormElement=Id,b.BorderWidthFormElementError=Pd,b.BorderWidthPanel=Fd,b.BorderWidthTableCell=Ad,b.BorderWidthTableHeader=Bd,b.Breadcrumb=iu,b.BreakpointDesktop=wm,b.BreakpointLargeDesktop=Sm,b.BreakpointMobile=xm,b.BreakpointTablet=vm,b.Button=nt,b.ButtonBorderRadius=bh,b.ButtonBorderWidth=gh,b.ButtonPrimaryBackgroundActive=ah,b.ButtonPrimaryBackgroundDefault=nh,b.ButtonPrimaryBackgroundDisabled=ih,b.ButtonPrimaryBackgroundHover=rh,b.ButtonPrimaryBorderDefault=lh,b.ButtonPrimaryBorderFocus=ch,b.ButtonPrimaryTextDefault=sh,b.ButtonPrimaryTextDisabled=oh,b.ButtonSecondaryBackgroundActive=hh,b.ButtonSecondaryBackgroundDefault=uh,b.ButtonSecondaryBackgroundHover=fh,b.ButtonSecondaryBackgroundSolid=dh,b.ButtonSecondaryBorderDefault=ph,b.ButtonSecondaryTextDefault=mh,b.ButtonShadowSize=_h,b.ButtonSpacingPaddingHorizontalDesktop=Po,b.ButtonSpacingPaddingHorizontalMobile=$o,b.ButtonSpacingPaddingVerticalDesktop=Io,b.ButtonSpacingPaddingVerticalMobile=Mo,b.ButtonTypographyWeight=yh,b.Card=ks,b.CardBackgroundDefault=xh,b.CardBorderBottom=Sh,b.CardBorderDefault=vh,b.CardBorderHover=wh,b.CardBorderWidthBottom=jh,b.CardBorderWidthDefault=Nh,b.CardGroup=N_,b.CardGroupItem=j_,b.CardShadowDefault=Dh,b.CardShadowHover=Mh,b.CardSpacingHeadingMargin=Bo,b.CardSpacingPaddingDesktop=Fo,b.CardSpacingPaddingMobile=Lo,b.CardTextDescription=Ch,b.CardTextHeading=kh,b.CardTextLink=Th,b.CareCard=D_,b.CharacterCount=Eg,b.ChartEnhancer=mx,b.ChartNoScript=hx,b.ChartRoot=qu,b.Checkbox=tc,b.Checkboxes=nc,b.ColorBorderDefault=Jd,b.ColorBorderSecondary=Qd,b.ColorButtonLoginActive=Nf,b.ColorButtonLoginBackground=Cf,b.ColorButtonLoginHover=Tf,b.ColorButtonLoginShadow=jf,b.ColorButtonPrimaryActive=of,b.ColorButtonPrimaryBackground=rf,b.ColorButtonPrimaryHover=sf,b.ColorButtonPrimaryShadow=lf,b.ColorButtonPrimaryText=af,b.ColorButtonReverseActive=yf,b.ColorButtonReverseBackground=gf,b.ColorButtonReverseHover=_f,b.ColorButtonReverseShadow=xf,b.ColorButtonReverseText=bf,b.ColorButtonSecondaryActive=mf,b.ColorButtonSecondaryBackground=cf,b.ColorButtonSecondaryBackgroundSolid=uf,b.ColorButtonSecondaryBorder=df,b.ColorButtonSecondaryHover=hf,b.ColorButtonSecondaryShadow=pf,b.ColorButtonSecondaryText=ff,b.ColorButtonWarningActive=Sf,b.ColorButtonWarningBackground=vf,b.ColorButtonWarningHover=wf,b.ColorButtonWarningShadow=kf,b.ColorError=ef,b.ColorFocusBackground=Kd,b.ColorFocusText=Zd,b.ColorFormBackground=nf,b.ColorFormBorder=tf,b.ColorGrey1=Co,b.ColorGrey2=To,b.ColorGrey3=No,b.ColorGrey4=jo,b.ColorGrey5=Do,b.ColorLinkActive=qd,b.ColorLinkDefault=Yd,b.ColorLinkHover=Vd,b.ColorLinkVisited=Xd,b.ColorPrimaryBlack=mo,b.ColorPrimaryBlue=fo,b.ColorPrimaryDarkPink=bo,b.ColorPrimaryGreen=po,b.ColorPrimaryPurple=go,b.ColorPrimaryRed=_o,b.ColorPrimaryWhite=ho,b.ColorPrimaryYellow=yo,b.ColorSecondaryAquaGreen=So,b.ColorSecondaryOrange=wo,b.ColorSecondaryPaleYellow=xo,b.ColorSecondaryPink=ko,b.ColorSecondaryWarmYellow=vo,b.ColorTextPrimary=Od,b.ColorTextPrint=Gd,b.ColorTextReverse=Ud,b.ColorTextSecondary=Wd,b.Column=Zn,b.ComponentBlur=Zf,b.ComponentBreadcrumbChevronMarginLeft=Wf,b.ComponentBreadcrumbChevronMarginRight=Uf,b.ComponentBreadcrumbPaddingTopDesktop=Yf,b.ComponentBreadcrumbPaddingTopMobile=Gf,b.ComponentButtonPaddingDesktopHorizontal=If,b.ComponentButtonPaddingDesktopVertical=$f,b.ComponentButtonPaddingMobileHorizontal=Mf,b.ComponentButtonPaddingMobileVertical=Df,b.ComponentButtonShadowSize=Pf,b.ComponentCardHeadingMargin=Rf,b.ComponentCardPaddingDesktop=Hf,b.ComponentCardPaddingMobile=Ef,b.ComponentDetails=Qf,b.ComponentExpander=eh,b.ComponentFormCheckboxLabelPadding=Af,b.ComponentFormCheckboxSize=Bf,b.ComponentFormInputMinHeight=Lf,b.ComponentFormInputPadding=Ff,b.ComponentLink=Jf,b.ComponentPagination=th,b.ComponentPanelPaddingDesktop=Of,b.ComponentPanelPaddingMobile=zf,b.ComponentSpread=Kf,b.ComponentSummaryListCellPaddingHorizontal=qf,b.ComponentSummaryListCellPaddingVertical=Vf,b.ComponentSummaryListRowMargin=Xf,b.Container=Zi,b.ContentsList=T_,b.DEFAULT_FONT_CONFIG=Zo,b.DashboardSummaryGrid=R_,b.DateInput=Jg,b.Details=ou,b.DoDontList=lu,b.ElevationHigh=np,b.ElevationLow=ep,b.ElevationMedium=tp,b.ElevationNone=Qm,b.ErrorMessage=Qi,b.ErrorSummary=Zg,b.Expander=cu,b.FRUTIGER_FONT_FILES=ft,b.Fieldset=La,b.FocusOutlineOffset=Xm,b.FocusOutlineStyle=Km,b.FocusOutlineWidth=qm,b.FocusShadowButton=Jm,b.FocusShadowInput=Zm,b.FontFamilyBase=zr,b.FontFamilyFallback=Or,b.FontFamilyPrint=Wr,b.FontLineHeightBase=$i,b.FontSize14Mobile=Vr,b.FontSize14Print=Xr,b.FontSize14Tablet=qr,b.FontSize16Mobile=Kr,b.FontSize16Print=Jr,b.FontSize16Tablet=Zr,b.FontSize19Mobile=Qr,b.FontSize19Print=ta,b.FontSize19Tablet=ea,b.FontSize22Mobile=na,b.FontSize22Print=aa,b.FontSize22Tablet=ra,b.FontSize26Mobile=ia,b.FontSize26Print=oa,b.FontSize26Tablet=sa,b.FontSize36Mobile=la,b.FontSize36Print=ua,b.FontSize36Tablet=ca,b.FontSize48Mobile=da,b.FontSize48Print=ha,b.FontSize48Tablet=fa,b.FontSizeBase=Mi,b.FontWeightBold=Gr,b.FontWeightLight=Yr,b.FontWeightNormal=Ur,b.Footer=es,b.FormBorderRadius=Kh,b.FormBorderWidthDefault=qh,b.FormBorderWidthError=Xh,b.FormErrorTextDefault=Gh,b.FormErrorTypographyWeight=Yh,b.FormHintTextDefault=Vh,b.FormInputBackgroundDefault=$h,b.FormInputBackgroundDisabled=Ph,b.FormInputBackgroundError=Lh,b.FormInputBackgroundFocus=Ih,b.FormInputBorderDefault=Fh,b.FormInputBorderDisabled=Eh,b.FormInputBorderError=Ah,b.FormInputBorderFocus=Bh,b.FormInputTextDefault=Hh,b.FormInputTextDisabled=zh,b.FormInputTextPlaceholder=Rh,b.FormLabelTextDefault=Oh,b.FormLabelTextRequired=Wh,b.FormLabelTypographyWeight=Uh,b.FormSpacingCheckboxLabelPadding=Ro,b.FormSpacingCheckboxSize=Ho,b.FormSpacingInputMinHeight=Eo,b.FormSpacingInputPadding=Ao,b.GanttChart=k_,b.Grid=Fa,b.GridGutter=Cm,b.GridGutterHalf=Tm,b.GridLines=Ku,b.GridPageWidth=km,b.Header=Ba,b.HeaderSSR=a0,b.HeaderSearch=cc,b.HeaderStatic=Ba,b.Heading=Ft,b.HeadingsNhsukHeadingL=zt,b.HeadingsNhsukHeadingM=Ot,b.HeadingsNhsukHeadingS=Wt,b.HeadingsNhsukHeadingXl=Rt,b.HeadingsNhsukHeadingXs=Ut,b.Hero=dc,b.Hint=Ki,b.Images=F_,b.Input=Ia,b.InsetText=M_,b.Label=Pa,b.LayoutColumnActions=ym,b.LayoutColumnFull=pm,b.LayoutColumnHalf=gm,b.LayoutColumnQuarter=_m,b.LayoutColumnThird=bm,b.LayoutContainerMaxWidth=mm,b.Legend=cx,b.LineScalesProvider=Xu,b.LineSeriesPrimitive=sd,b.List=sc,b.MainWrapper=Ji,b.MedicationCard=Ds,b.MetricCard=px,b.NHSBodyText=Gx,b.NHSBodyTextLarge=Yx,b.NHSBodyTextSmall=Vx,b.NHSHeading1=Rx,b.NHSHeading2=zx,b.NHSHeading3=Ox,b.NHSHeading4=Wx,b.NHSHeading5=Ux,b.NHSLedeText=qx,b.NHSLedeTextSmall=Xx,b.NHSThemeProvider=r0,b.NHS_FALLBACK_FONT_STACK=cv,b.NHS_FONT_STACK=lv,b.NavigationSplitView=$u,b.PageTemplate=gy,b.Pagination=C_,b.Panel=su,b.ParagraphsBody=Gt,b.ParagraphsBodyLarge=Yt,b.ParagraphsBodySmall=Vt,b.ParagraphsLedeText=qt,b.ParagraphsLedeTextSmall=Xt,b.PatientCard=Ns,b.ProductRoadmap=Pu,b.Radios=Hg,b.RadiosServer=Rg,b.ResponsiveDataGrid=$s,b.ResponsiveDataGridDemo=py,b.Row=pn,b.SPC=Ax,b.SPCChart=yd,b.Select=Cr,b.SelectOption=ac,b.ShadowButtonDefault=Om,b.ShadowButtonFocus=Gm,b.ShadowButtonSecondary=Wm,b.ShadowButtonWarning=Um,b.ShadowCardDefault=Ym,b.ShadowCardHover=Vm,b.SizeButtonMinHeightDesktop=hm,b.SizeButtonMinHeightMobile=fm,b.SizeFormControlLarge=am,b.SizeFormControlMedium=rm,b.SizeFormControlSmall=nm,b.SizeFormInputWidth2xl=um,b.SizeFormInputWidth3xl=dm,b.SizeFormInputWidthLg=lm,b.SizeFormInputWidthMd=om,b.SizeFormInputWidthSm=sm,b.SizeFormInputWidthXl=cm,b.SizeFormInputWidthXs=im,b.SizeIconExtraLarge=em,b.SizeIconLarge=Qh,b.SizeIconMedium=Jh,b.SizeIconNhsDefault=tm,b.SizeIconSmall=Zh,b.SkipLink=Ss,b.SlotMatrix=H_,b.SortStatusControl=Y_,b.Spacing0=zo,b.Spacing1=Oo,b.Spacing2=Wo,b.Spacing3=Uo,b.Spacing4=Go,b.Spacing5=Yo,b.Spacing6=Vo,b.Spacing7=qo,b.Spacing8=Xo,b.Spacing9=Ko,b.SpacingResponsive0Mobile=ui,b.SpacingResponsive0Tablet=di,b.SpacingResponsive1Mobile=fi,b.SpacingResponsive1Tablet=hi,b.SpacingResponsive2Mobile=mi,b.SpacingResponsive2Tablet=pi,b.SpacingResponsive3Mobile=gi,b.SpacingResponsive3Tablet=bi,b.SpacingResponsive4Mobile=_i,b.SpacingResponsive4Tablet=yi,b.SpacingResponsive5Mobile=xi,b.SpacingResponsive5Tablet=vi,b.SpacingResponsive6Mobile=wi,b.SpacingResponsive6Tablet=Si,b.SpacingResponsive7Mobile=ki,b.SpacingResponsive7Tablet=Ci,b.SpacingResponsive8Mobile=Ti,b.SpacingResponsive8Tablet=Ni,b.SpacingResponsive9Mobile=ji,b.SpacingResponsive9Tablet=Di,b.SpacingUtilities=Wg,b.StateDisabledBackground=Hm,b.StateDisabledBorder=Rm,b.StateDisabledText=zm,b.StateErrorBackground=Nm,b.StateErrorBorder=jm,b.StateErrorText=Dm,b.StateInfoBackground=Bm,b.StateInfoBorder=Am,b.StateInfoText=Em,b.StateSuccessBackground=Mm,b.StateSuccessBorder=$m,b.StateSuccessText=Im,b.StateWarningBackground=Pm,b.StateWarningBorder=Lm,b.StateWarningText=Fm,b.SummaryCard=fu,b.SummaryList=$_,b.Table=ei,b.Tabs=I_,b.Tag=Ye,b.TaskList=uu,b.Textarea=rc,b.TooltipOverlay=lx,b.TooltipProvider=id,b.TransactionalPageTemplate=by,b.TransitionButtonDefault=Nd,b.TransitionButtonShadow=jd,b.TransitionCardHover=Md,b.TransitionInputFocus=Dd,b.VisibilityProvider=ix,b.VitalsCard=Ms,b.WIDTH_FRACTIONS=Vg,b.WarningCallout=L_,b.WidthContainer=Is,b.WidthUtilities=Gg,b.checkFrutigerLoaded=uv,b.createGenericTabsConfig=ri,b.createTCHTabsConfig=J_,b.generateFrutigerFontFace=sv,b.getResponsiveStyles=Hx,b.getSpacingClass=Ug,b.getWidthClass=Yg,b.preloadFrutigerFonts=ov,b.tchDataConfig=pu,b.useColors=Zx,b.useComponentSpacing=tv,b.useNHSHeadings=nv,b.useNHSParagraphs=rv,b.useNHSTheme=e0,b.useNHSTypographySystem=av,b.useNavigationSplitDrill=iv,b.useNavigationSplitUrlSync=Mu,b.useNhsFdpBreakpoints=Ps,b.useResponsiveSpacing=ev,b.useResponsiveValue=_y,b.useSpacing=Jx,b.useTokens=Kx,b.useTypography=Qx,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.js.map
