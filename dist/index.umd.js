(function(b,k){typeof exports=="object"&&typeof module<"u"?k(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],k):(b=typeof globalThis<"u"?globalThis:b||self,k(b.NHSFDPDesignSystem={},b.React,b.ReactDOM))})(this,(function(b,k,Ep){"use strict";function $p(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const X=$p(k);function Fp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wr={exports:{}},On={};var Ei;function Pp(){if(Ei)return On;Ei=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,o,s){var i=null;if(s!==void 0&&(i=""+s),o.key!==void 0&&(i=""+o.key),"key"in o){s={};for(var l in o)l!=="key"&&(s[l]=o[l])}else s=o;return o=s.ref,{$$typeof:e,type:a,key:i,ref:o!==void 0?o:null,props:s}}return On.Fragment=t,On.jsx=n,On.jsxs=n,On}var Un={};var $i;function Bp(){return $i||($i=1,process.env.NODE_ENV!=="production"&&(function(){function e(R){if(R==null)return null;if(typeof R=="function")return R.$$typeof===A?null:R.displayName||R.name||null;if(typeof R=="string")return R;switch(R){case g:return"Fragment";case j:return"Profiler";case C:return"StrictMode";case _:return"Suspense";case I:return"SuspenseList";case S:return"Activity"}if(typeof R=="object")switch(typeof R.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),R.$$typeof){case m:return"Portal";case N:return R.displayName||"Context";case M:return(R._context.displayName||"Context")+".Consumer";case w:var B=R.render;return R=R.displayName,R||(R=B.displayName||B.name||"",R=R!==""?"ForwardRef("+R+")":"ForwardRef"),R;case v:return B=R.displayName||null,B!==null?B:e(R.type)||"Memo";case x:B=R._payload,R=R._init;try{return e(R(B))}catch{}}return null}function t(R){return""+R}function n(R){try{t(R);var B=!1}catch{B=!0}if(B){B=console;var E=B.error,Y=typeof Symbol=="function"&&Symbol.toStringTag&&R[Symbol.toStringTag]||R.constructor.name||"Object";return E.call(B,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",Y),t(R)}}function a(R){if(R===g)return"<>";if(typeof R=="object"&&R!==null&&R.$$typeof===x)return"<...>";try{var B=e(R);return B?"<"+B+">":"<...>"}catch{return"<...>"}}function o(){var R=D.A;return R===null?null:R.getOwner()}function s(){return Error("react-stack-top-frame")}function i(R){if(F.call(R,"key")){var B=Object.getOwnPropertyDescriptor(R,"key").get;if(B&&B.isReactWarning)return!1}return R.key!==void 0}function l(R,B){function E(){$||($=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",B))}E.isReactWarning=!0,Object.defineProperty(R,"key",{get:E,configurable:!0})}function c(){var R=e(this.type);return O[R]||(O[R]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),R=this.props.ref,R!==void 0?R:null}function d(R,B,E,Y,P,W){var H=E.ref;return R={$$typeof:y,type:R,key:B,props:E,_owner:Y},(H!==void 0?H:null)!==null?Object.defineProperty(R,"ref",{enumerable:!1,get:c}):Object.defineProperty(R,"ref",{enumerable:!1,value:null}),R._store={},Object.defineProperty(R._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(R,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(R,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:P}),Object.defineProperty(R,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:W}),Object.freeze&&(Object.freeze(R.props),Object.freeze(R)),R}function u(R,B,E,Y,P,W){var H=B.children;if(H!==void 0)if(Y)if(T(H)){for(Y=0;Y<H.length;Y++)f(H[Y]);Object.freeze&&Object.freeze(H)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(H);if(F.call(B,"key")){H=e(R);var Q=Object.keys(B).filter(function(te){return te!=="key"});Y=0<Q.length?"{key: someKey, "+Q.join(": ..., ")+": ...}":"{key: someKey}",ae[H+Y]||(Q=0<Q.length?"{"+Q.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Y,H,Q,H),ae[H+Y]=!0)}if(H=null,E!==void 0&&(n(E),H=""+E),i(B)&&(n(B.key),H=""+B.key),"key"in B){E={};for(var q in B)q!=="key"&&(E[q]=B[q])}else E=B;return H&&l(E,typeof R=="function"?R.displayName||R.name||"Unknown":R),d(R,H,E,o(),P,W)}function f(R){h(R)?R._store&&(R._store.validated=1):typeof R=="object"&&R!==null&&R.$$typeof===x&&(R._payload.status==="fulfilled"?h(R._payload.value)&&R._payload.value._store&&(R._payload.value._store.validated=1):R._store&&(R._store.validated=1))}function h(R){return typeof R=="object"&&R!==null&&R.$$typeof===y}var p=k,y=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),N=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),A=Symbol.for("react.client.reference"),D=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=Object.prototype.hasOwnProperty,T=Array.isArray,L=console.createTask?console.createTask:function(){return null};p={react_stack_bottom_frame:function(R){return R()}};var $,O={},J=p.react_stack_bottom_frame.bind(p,s)(),ee=L(a(s)),ae={};Un.Fragment=g,Un.jsx=function(R,B,E){var Y=1e4>D.recentlyCreatedOwnerStacks++;return u(R,B,E,!1,Y?Error("react-stack-top-frame"):J,Y?L(a(R)):ee)},Un.jsxs=function(R,B,E){var Y=1e4>D.recentlyCreatedOwnerStacks++;return u(R,B,E,!0,Y?Error("react-stack-top-frame"):J,Y?L(a(R)):ee)}})()),Un}var Fi;function Hp(){return Fi||(Fi=1,process.env.NODE_ENV==="production"?Wr.exports=Pp():Wr.exports=Bp()),Wr.exports}var r=Hp(),fo={exports:{}};var Pi;function zp(){return Pi||(Pi=1,(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var s="",i=0;i<arguments.length;i++){var l=arguments[i];l&&(s=o(s,a(l)))}return s}function a(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var i="";for(var l in s)t.call(s,l)&&s[l]&&(i=o(i,l));return i}function o(s,i){return i?s?s+" "+i:s+i:s}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(fo)),fo.exports}var Rp=zp();const Ce=Fp(Rp),Op=({text:e,href:t,openInNewWindow:n=!1,className:a,...o})=>{const s=Ce("nhsuk-action-link__link",a);return r.jsx("div",{className:"nhsuk-action-link",children:r.jsxs("a",{className:s,href:t,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,...o,children:[r.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right-circle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"36",height:"36",children:[r.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),r.jsx("path",{d:"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"})]}),r.jsx("span",{className:"nhsuk-action-link__text",children:e})]})})},ho=({ariaLabel:e="Account",items:t=[],className:n,variant:a="default"})=>{if(!t||t.length===0)return null;const o=s=>{const i=s.icon?r.jsx("svg",{className:"nhsuk-icon nhsuk-icon__user",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",role:"img","aria-label":s.icon===!0?"User":void 0,children:r.jsx("path",{d:"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z"})}):null,l=s.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:s.html}}):s.text,c=r.jsxs(r.Fragment,{children:[i,l]});return s.href?r.jsx("a",{className:"nhsuk-account__link nhsuk-header__account-link",href:s.href,children:c}):s.action?r.jsx("form",{className:"nhsuk-account__form",action:s.action,method:s.method||"post",children:r.jsx("button",{className:"nhsuk-account__button",type:"submit",role:"button",children:c})}):r.jsx("span",{children:c})};return r.jsx("nav",{className:Ce("nhsuk-account",{"nhsuk-account--white":a==="white"},n),"aria-label":e,children:r.jsx("ul",{className:"nhsuk-account__list",children:t.map((s,i)=>s&&r.jsx("li",{className:Ce("nhsuk-account__item nhsuk-header__account-item",s.className),children:o(s)},i))})})};var po=(e=>(e.Primary="primary",e.Secondary="secondary",e.Reverse="reverse",e.Warning="warning",e.Login="login",e.Metric="metric",e))(po||{}),mo=(e=>(e.Small="small",e.Default="default",e.Large="large",e))(mo||{});function Up(e){const t=e.variant||"primary",n=e.size||"default",a=!!e.fullWidth,o=["nhs-aria-button",`nhs-aria-button--${t}`,n!=="default"?`nhs-aria-button--${n}`:"",a?"nhs-aria-button--full-width":"",e.className||""].filter(Boolean).join(" ");return{tag:e.href?"a":"button",classes:o,data:{module:"nhs-button"},attrs:e.href?{href:e.href,role:"button"}:{type:"button"},preventDoubleClick:!!e.preventDoubleClick}}const{forwardRef:Wp,useCallback:tn,useState:go}=X;function Gp(e,t){const{children:n,variant:a=po.Primary,size:o=mo.Default,fullWidth:s=!1,className:i="",preventDoubleClick:l=!1,...c}=e,[d,u]=go(!1),[f,h]=go(!1),[p,y]=go(!1),m=Up({variant:a,size:o,fullWidth:s,className:i,preventDoubleClick:l,href:"href"in c?c.href:void 0}),g="disabled"in c?c.disabled:c["aria-disabled"]==="true",C={...d&&{"data-pressed":"true"},...f&&{"data-hovered":"true"},...p&&{"data-focused":"true"},...g&&{"data-disabled":"true"}},j=tn(()=>!g&&u(!0),[g]),M=tn(()=>u(!1),[]),N=tn(()=>!g&&h(!0),[g]),w=tn(()=>{h(!1),u(!1)},[]),_=tn(()=>y(!0),[]),I=tn(()=>y(!1),[]),v=tn(Q=>{Q.key===" "&&("href"in c||Q.currentTarget.getAttribute("role")==="button")&&(Q.preventDefault(),Q.currentTarget.click())},[c]),x=tn(Q=>{if(l){const q=Q.currentTarget;if(q.getAttribute("data-processing")==="true"){Q.preventDefault();return}q.setAttribute("data-processing","true"),setTimeout(()=>{q.removeAttribute("data-processing")},1e3)}},[l]);if("href"in c&&c.href){const{id:Q,style:q,title:te,["aria-label"]:fe,["aria-describedby"]:Z,["aria-labelledby"]:se,tabIndex:de,...ve}=c,me=c;return r.jsx("a",{ref:t,href:me.href,target:me.target,rel:me.rel,className:m.classes,role:"button",draggable:"false","data-module":"nhs-button",...C,...l&&{"data-prevent-double-click":"true"},...ve,onKeyDown:De=>{me.onKeyDown?.(De),v(De)},onClick:De=>{me.onClick?.(De),x(De)},onMouseDown:De=>{me.onMouseDown?.(De),j()},onMouseUp:De=>{me.onMouseUp?.(De),M()},onMouseEnter:De=>{me.onMouseEnter?.(De),N()},onMouseLeave:De=>{me.onMouseLeave?.(De),w()},onFocus:De=>{me.onFocus?.(De),_()},onBlur:De=>{me.onBlur?.(De),I()},"aria-disabled":me["aria-disabled"],...me["aria-disabled"]==="true"&&{tabIndex:-1},id:Q,style:q,title:te,"aria-label":fe,"aria-describedby":Z,"aria-labelledby":se,tabIndex:de,children:n})}const{id:S,style:A,title:D,["aria-label"]:F,["aria-describedby"]:T,["aria-labelledby"]:L,tabIndex:$,name:O,value:J,form:ee,formAction:ae,formEncType:R,formMethod:B,formNoValidate:E,formTarget:Y,autoFocus:P,...W}=c,H=c;return r.jsx("button",{ref:t,type:H.type||"button",disabled:H.disabled,className:m.classes,"data-module":"nhs-button",...C,...l&&{"data-prevent-double-click":"true"},...H.disabled&&{"aria-disabled":"true"},...W,onKeyDown:Q=>{H.onKeyDown?.(Q),v(Q)},onClick:Q=>{H.onClick?.(Q),x(Q)},onMouseDown:Q=>{H.onMouseDown?.(Q),j()},onMouseUp:Q=>{H.onMouseUp?.(Q),M()},onMouseEnter:Q=>{H.onMouseEnter?.(Q),N()},onMouseLeave:Q=>{H.onMouseLeave?.(Q),w()},onFocus:Q=>{H.onFocus?.(Q),_()},onBlur:Q=>{H.onBlur?.(Q),I()},id:S,style:A,title:D,"aria-label":F,"aria-describedby":T,"aria-labelledby":L,tabIndex:$,name:O,value:J,form:ee,formAction:ae,formEncType:R,formMethod:B,formNoValidate:E,formTarget:Y,autoFocus:P,children:n})}const dt=Wp(Gp);dt.displayName="Button";const Sn=({text:e="Back",html:t,href:n="#",className:a,element:o="a",onClick:s,...i})=>{const l=Ce("nhsuk-back-link",a),c=Ce("nhsuk-back-link__link"),d=()=>r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:r.jsx("path",{d:"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"})}),t?r.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e]});return r.jsx("div",{className:l,children:o==="button"?r.jsx("button",{className:c,onClick:s,type:"button",...i,children:d()}):r.jsx("a",{className:c,href:n,...i,children:d()})})};function Vp(e){const{color:t="default",noBorder:n,closable:a,disabled:o,className:s}=e;return{classes:["nhsuk-tag",t!=="default"?`nhsuk-tag--${t}`:"",n?"nhsuk-tag--no-border":"",a?"nhsuk-tag--closable":"",o?"nhsuk-tag--disabled":"",s||""].filter(Boolean).join(" "),showClose:!!a,disabled:!!o}}const nt=({text:e,html:t,children:n,color:a="default",noBorder:o=!1,closable:s=!1,onClose:i,disabled:l=!1,className:c,...d})=>{const u=Vp({color:a,noBorder:o,closable:s,disabled:l,className:c}),f=h=>{h.preventDefault(),h.stopPropagation(),!l&&i&&i()};return r.jsxs("strong",{className:u.classes,...d,children:[n||(t?r.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e),s&&r.jsx("button",{type:"button",className:"nhsuk-tag__close",onClick:f,disabled:l,"aria-label":"Remove",title:"Remove",children:"Ã—"})]})},Bi=({id:e,name:t,checked:n,defaultChecked:a=!1,disabled:o=!1,value:s="true",hint:i,errorMessage:l,className:c,children:d,onChange:u,onBlur:f,onFocus:h,attributes:p,...y})=>{const[m,g]=k.useState(a),C=n!==void 0,j=C?n:m;k.useEffect(()=>{C||g(a)},[a,C]);const M=v=>{const x=v.target.checked;C||g(x),u?.(x,v)},N=i?`${e}-hint`:void 0,w=l?`${e}-error`:void 0,_=[N,w].filter(Boolean).join(" ")||void 0,I=Ce("nhsuk-form-group",{"nhsuk-form-group--error":!!l},c);return r.jsx("div",{className:I,...y,children:r.jsx("div",{className:"nhsuk-checkboxes",children:r.jsxs("div",{className:"nhsuk-checkboxes__item",children:[r.jsx("input",{className:"nhsuk-checkboxes__input",id:e,name:t||e,type:"checkbox",value:s,checked:j,disabled:o,onChange:M,onBlur:f,onFocus:h,"aria-describedby":_,...p}),r.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:e,children:d}),i&&r.jsx("div",{id:N,className:"nhsuk-checkboxes__hint",children:i}),l&&r.jsxs("div",{id:w,className:"nhsuk-error-message nhsuk-checkboxes__error",children:[r.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]})]})})})};Bi.displayName="Checkbox";function Hi(e){const n=(e.type||"text")==="range";return{classes:["nhsuk-input",e.hasError?"nhsuk-input--error":"",n?"nhsuk-input--range":"",!n&&e.width&&e.width!=="full"?`nhsuk-input--width-${e.width}`:"",e.className||""].filter(Boolean).join(" "),isRange:n}}const Gr=({id:e,name:t,type:n="text",value:a,defaultValue:o,placeholder:s,disabled:i=!1,readOnly:l=!1,required:c=!1,hasError:d=!1,describedBy:u,className:f,width:h="full",inputMode:p,autoComplete:y,maxLength:m,minLength:g,pattern:C,step:j,min:M,max:N,showValueLabels:w=!1,showCurrentValue:_=!1,valueLabels:I,onChange:v,onBlur:x,onFocus:S,onKeyDown:A,...D})=>{const[F,T]=k.useState(a||o||(n==="range"?M||"0":""));k.useEffect(()=>{a!==void 0&&T(a)},[a]);const L=Y=>{const P=Y.target;T(P.value),("type"in Y&&Y.nativeEvent||Y.type==="keydown")&&v?.(Y)},{classes:$,isRange:O}=Hi({type:n,hasError:d,width:h,className:f}),J=a!==void 0,ee={id:e,name:t,type:n,placeholder:s,disabled:i,readOnly:l,required:c,"aria-describedby":u,inputMode:p,autoComplete:y,maxLength:m,minLength:g,pattern:C,step:j,min:M,max:N,onChange:L,onBlur:x,onFocus:S,onKeyDown:Y=>{if(O&&/[0-9]/.test(Y.key)){const P=(F?.toString()||"")+Y.key;Y.target.value=P,L(Y)}A?.(Y)},...D},ae=!J&&o!==void 0?{defaultValue:o}:{},R=J?{value:a}:{},B=()=>r.jsx("input",{className:$,...R,...ae,"data-current-value":F,...ee}),E=O?r.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[w&&r.jsxs("div",{className:"nhsuk-input-range-labels",children:[r.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:I?.min||M||"0"}),B(),r.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:I?.max||N||"100"})]}),!w&&B(),_&&r.jsx("div",{className:"nhsuk-input-range-current-value",children:r.jsxs("span",{className:"nhsuk-input-range-current-label",children:[I?.current||"Current value:"," ",r.jsx("strong",{children:F})]})})]}):null;return O?E:r.jsx("input",{className:$,id:e,name:t,type:n,value:a,...a===void 0&&o!==void 0?{defaultValue:o}:{},placeholder:s,disabled:i,readOnly:l,required:c,"aria-describedby":u,inputMode:p,autoComplete:y,maxLength:m,minLength:g,pattern:C,step:j,min:M,max:N,onChange:v,onBlur:x,onFocus:S,onKeyDown:A,...D})};function Yp(e){const t=e.size||"m",n=["nhsuk-label",t!=="m"?`nhsuk-label--${t}`:"",e.className||""].filter(Boolean).join(" ");return{tag:e.isPageHeading?"h1":"label",classes:n,size:t,htmlFor:e.isPageHeading?void 0:e.htmlFor,isPageHeading:!!e.isPageHeading}}const Vr=({htmlFor:e,className:t,isPageHeading:n=!1,size:a="m",children:o,...s})=>{const i=Yp({size:a,isPageHeading:n,className:t,htmlFor:e}),l=i.tag;return r.jsx(l,{className:i.classes,htmlFor:i.htmlFor,...s,children:n?r.jsx("label",{className:"nhsuk-label-wrapper",htmlFor:e,children:o}):o})};function Zp(e){const t=["nhsuk-fieldset",e.className||""].filter(Boolean).join(" "),n=e.legend?["nhsuk-fieldset__legend",e.legend.size?`nhsuk-fieldset__legend--${e.legend.size}`:"",e.legend.className||""].filter(Boolean).join(" "):void 0;return{fieldsetClasses:t,legendClasses:n,legendIsPageHeading:!!e.legend?.isPageHeading,describedBy:e.describedBy}}const Yr=({children:e,legend:t,className:n,describedBy:a,...o})=>{const s=Zp({className:n,describedBy:a,legend:t?{size:t.size,className:t.className,isPageHeading:t.isPageHeading}:void 0}),i=()=>{const l=t?.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:t.html}}):t?.text;return s.legendIsPageHeading?r.jsx("h1",{className:"nhsuk-fieldset__heading",children:l}):l};return r.jsxs("fieldset",{className:s.fieldsetClasses,"aria-describedby":s.describedBy,...o,children:[t&&(t.text||t.html)&&r.jsx("legend",{className:s.legendClasses,children:i()}),e]})};function qp(e){const t=["nhsuk-checkboxes",e.small?"nhsuk-checkboxes--small":"",e.className||""].filter(Boolean).join(" "),n=["nhsuk-form-group",e.hasError?"nhsuk-form-group--error":""].filter(Boolean).join(" ");return{classes:t,formGroupClasses:n}}const zi=({items:e,name:t,idPrefix:n,legend:a,isPageHeading:o=!1,legendSize:s="l",hint:i,errorMessage:l,className:c="",small:d=!1,onChange:u,fieldsetAttributes:f,attributes:h,...p})=>{const[y,m]=k.useState(e.filter(v=>v.checked).map(v=>v.value)),g=n||t,C=i?`${g}-hint`:void 0,j=l?`${g}-error`:void 0,M=[C,j].filter(Boolean).join(" ")||void 0,N=(v,x)=>{let S;x?S=[...y,v]:S=y.filter(A=>A!==v),m(S),u?.(S)},w=()=>e.map((v,x)=>{const S=`${g}-${x+1}`,A=`${S}-conditional`,D=y.includes(v.value),F=v.disabled||!1;return r.jsxs("div",{className:"nhsuk-checkboxes__item",children:[r.jsx("input",{className:"nhsuk-checkboxes__input",id:S,name:t,type:"checkbox",value:v.value,checked:D,disabled:F,onChange:T=>N(v.value,T.target.checked),"aria-describedby":v.hint?`${S}-hint`:M,...v.conditional&&{"aria-controls":A,"aria-expanded":D?"true":"false"},...v.attributes}),r.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:S,children:v.text}),v.hint&&r.jsx("div",{id:`${S}-hint`,className:"nhsuk-checkboxes__hint",children:v.hint}),v.conditional&&r.jsx("div",{className:Ce("nhsuk-checkboxes__conditional",{"nhsuk-checkboxes__conditional--hidden":!D}),id:A,children:typeof v.conditional=="object"&&v.conditional!==null&&"label"in v.conditional&&"id"in v.conditional&&"name"in v.conditional?r.jsxs("div",{style:{marginTop:"16px"},children:[v.conditional.label&&r.jsx(Vr,{htmlFor:v.conditional.id,children:v.conditional.label}),r.jsx(Gr,{...v.conditional})]}):v.conditional})]},v.value)}),{classes:_,formGroupClasses:I}=qp({small:d,className:c,hasError:!!l});return r.jsx("div",{className:I,...h,...p,children:r.jsxs(Yr,{legend:a?{text:a,isPageHeading:o,size:s}:void 0,describedBy:M,...f,children:[i&&r.jsx("div",{id:C,className:"nhsuk-hint",children:i}),l&&r.jsxs("div",{id:j,className:"nhsuk-error-message",children:[r.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]}),r.jsx("div",{className:_,children:w()})]})})};zi.displayName="Checkboxes";function Jp(e){const t=e.resize??"vertical";return{classes:["nhsuk-textarea",e.hasError?"nhsuk-textarea--error":"",t!=="vertical"?`nhsuk-textarea--resize-${t}`:"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}const Ri=({id:e,name:t,value:n,defaultValue:a,placeholder:o,disabled:s=!1,readOnly:i=!1,required:l=!1,hasError:c=!1,describedBy:d,className:u,rows:f=5,cols:h,maxLength:p,minLength:y,wrap:m="soft",resize:g="vertical",autoComplete:C,spellCheck:j,onChange:M,onBlur:N,onFocus:w,onKeyDown:_,...I})=>{const{classes:v,describedBy:x}=Jp({hasError:c,resize:g,className:u,describedBy:d});return r.jsx("textarea",{className:v,id:e,name:t,value:n,defaultValue:a,placeholder:o,disabled:s,readOnly:i,required:l,"aria-describedby":x,rows:f,cols:h,maxLength:p,minLength:y,wrap:m,autoComplete:C,spellCheck:j,onChange:M,onBlur:N,onFocus:w,onKeyDown:_,...I})};function Xp(e){return{classes:["nhsuk-hint",e.className||""].filter(Boolean).join(" "),id:e.id}}const bo=({id:e,className:t,children:n,...a})=>{const o=Xp({id:e,className:t});return r.jsx("div",{className:o.classes,id:o.id,...a,children:n})},Kp=({id:e,maxLength:t,maxWords:n,threshold:a=75,name:o,value:s,defaultValue:i,rows:l,className:c,countMessage:d,onCountChange:u,onChange:f,...h})=>{const p=s??i??"",[y,m]=k.useState(p),[g,C]=k.useState(0),[j,M]=k.useState(!1),[N,w]=k.useState(!1),_=k.useCallback(D=>n?D.trim()===""?0:D.trim().split(/\s+/).length:D.length,[n]);k.useEffect(()=>{const D=_(y),F=t||n||0,T=F-D,L=Math.floor(F*(a/100));C(T),M(D>F),w(D>=L||D>F),u&&u(D,T)},[y,t,n,a,_,u]);const I=D=>{const F=D.target.value;m(F),f&&f(D)},v=()=>{const D=t||n||0,F=n?"word":"character",T=n?"words":"characters";if(!N)return`You can enter up to ${D} ${D===1?F:T}`;if(j){const L=Math.abs(g);return`You have ${L} ${L===1?F:T} too many`}else return`You have ${g} ${g===1?F:T} remaining`},x=Ce("nhsuk-character-count",c),S=Ce("nhsuk-character-count__message",{"nhsuk-character-count__message--disabled":!N,"nhsuk-error-message":j},d?.classes),A=Ce("nhsuk-js-character-count",{"nhsuk-textarea--error":j});return r.jsxs("div",{className:x,"data-module":"nhsuk-character-count","data-maxlength":t,"data-maxwords":n,"data-threshold":a,"data-testid":"character-count",children:[r.jsx(Ri,{id:e,name:o,value:s!==void 0?y:void 0,defaultValue:s===void 0?i??y:void 0,rows:l,className:A,onChange:I,"aria-describedby":`${e}-info`,"aria-invalid":j||void 0,...h}),r.jsx(bo,{id:`${e}-info`,className:S,role:"status","aria-live":"polite",children:v()})]})};function Qp(e){return{classes:["nhsuk-select",e.hasError?"nhsuk-select--error":"",e.className||""].filter(Boolean).join(" ")}}const Oi=({value:e,disabled:t=!1,selected:n=!1,className:a,children:o,...s})=>{const i=Ce("nhsuk-select__option",a);return r.jsx("option",{className:i,value:e,disabled:t,...s,children:o})},Wn=({id:e,name:t,ariaLabel:n,value:a,defaultValue:o,disabled:s=!1,required:i=!1,hasError:l=!1,describedBy:c,className:d,multiple:u=!1,size:f,autoComplete:h,options:p,children:y,onChange:m,onBlur:g,onFocus:C,...j})=>{const{classes:M}=Qp({hasError:l,className:d}),N=()=>p?p.map((_,I)=>r.jsx("option",{value:_.value,disabled:_.disabled,"data-initial-selected":_.selected||void 0,children:_.text},`${_.value}-${I}`)):null,w=o===void 0&&a===void 0&&p?p.find(_=>_.selected)?.value:void 0;return r.jsx("select",{className:M,id:e,name:t,"aria-label":n,value:a,defaultValue:o!==void 0?o:w,disabled:s,required:i,"aria-describedby":c,multiple:u,size:f,autoComplete:h,onChange:m,onBlur:g,onFocus:C,...j,children:y||N()})};Wn.Option=Oi;function em(e){return{classes:["nhsuk-radios",e.hasError?"nhsuk-radios--error":"",e.size==="small"?"nhsuk-radios--small":"",e.inline?"nhsuk-radios--inline":"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}function Ui(e,{variant:t,selectedValue:n,enableBehaviourAttr:a,handleChange:o,handleBlur:s,handleFocus:i,handleKeyDown:l,itemsRef:c,InputComponent:d}){const{onChange:u,onBlur:f,onFocus:h,...p}=e,{name:y,hasError:m=!1,describedBy:g,className:C,size:j="normal",inline:M=!1,options:N,...w}=p,{classes:_,describedBy:I}=em({hasError:m,size:j,inline:M,className:C,describedBy:g});return r.jsx(Yr,{children:r.jsx("div",{className:_,...w,...a?{"data-nhs-behaviour":"radios"}:{},children:N.map((v,x)=>{const S=`${y}-${x}`,A=v.conditional?`${S}-conditional`:void 0,D=n===v.value;return r.jsxs("div",{className:"nhsuk-radios__item",children:[r.jsx("input",{className:"nhsuk-radios__input",id:S,name:y,type:"radio",value:v.value,disabled:v.disabled,...t==="client"?{checked:D,onChange:o,onBlur:s,onFocus:i,onKeyDown:l,ref:F=>{F&&c&&(c.current[x]=F)}}:{defaultChecked:D,"data-nhs-radios-input":!0},"aria-describedby":I}),r.jsx("label",{className:"nhsuk-radios__label",htmlFor:S,children:v.text}),v.hint&&r.jsx("div",{className:"nhsuk-radios__hint",children:v.hint}),v.conditional&&r.jsx("div",{className:Ce("nhsuk-radios__conditional",{"nhsuk-radios__conditional--hidden":!D}),id:A,...t==="server"?{"data-nhs-radios-conditional":!0}:{},children:typeof v.conditional=="object"&&v.conditional!==null&&"label"in v.conditional&&"id"in v.conditional&&"name"in v.conditional?r.jsxs("div",{style:{marginTop:"16px"},children:[v.conditional.label&&r.jsx(Vr,{htmlFor:v.conditional.id,children:v.conditional.label}),r.jsx(d,{...v.conditional})]}):v.conditional})]},v.value)})})})}const tm=({value:e,defaultValue:t,onChange:n,onBlur:a,onFocus:o,...s})=>{const[i,l]=k.useState(e||t||""),c=k.useRef([]),d=k.useRef(i),u=p=>{const y=p.target.value;y!==d.current&&(d.current=y,l(y),n?.(p))},f=p=>{o?.(p)},h=k.useCallback(p=>{const{key:y}=p;if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(y))return;p.preventDefault();const m=c.current.filter(M=>M&&!M.disabled),g=m.indexOf(p.currentTarget);if(g===-1)return;let C=g;["ArrowDown","ArrowRight"].includes(y)?C=(g+1)%m.length:["ArrowUp","ArrowLeft"].includes(y)&&(C=(g-1+m.length)%m.length);const j=m[C];j&&(j.focus(),j.checked||j.click())},[]);return Ui({value:e,defaultValue:t,onChange:n,onBlur:a,onFocus:o,...s},{variant:"client",selectedValue:i,enableBehaviourAttr:!1,handleChange:u,handleBlur:a,handleFocus:f,handleKeyDown:h,itemsRef:c,InputComponent:Gr})};function nm(e){const{id:t,name:n,type:a="text",value:o,defaultValue:s,placeholder:i,disabled:l=!1,readOnly:c=!1,required:d=!1,hasError:u=!1,describedBy:f,className:h,width:p="full",inputMode:y,autoComplete:m,maxLength:g,minLength:C,pattern:j,step:M,min:N,max:w,showValueLabels:_=!1,showCurrentValue:I=!1,valueLabels:v,onChange:x,onBlur:S,onFocus:A,onKeyDown:D,...F}=e,{classes:T,isRange:L}=Hi({type:a,hasError:u,width:p,className:h}),$={id:t,name:n,type:a,placeholder:i,disabled:l,readOnly:c,required:d,"aria-describedby":f,inputMode:y,autoComplete:m,maxLength:g,minLength:C,pattern:j,step:M,min:N,max:w,...F};if(L){const O=o??s??(typeof N<"u"?String(N):"0"),J=r.jsx("input",{className:T,...o!==void 0?{value:o}:{},...o===void 0&&s!==void 0?{defaultValue:s}:{},"data-current-value":O,...$});return r.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[_?r.jsxs("div",{className:"nhsuk-input-range-labels",children:[r.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:v?.min||N||"0"}),J,r.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:v?.max||w||"100"})]}):J,I&&r.jsx("div",{className:"nhsuk-input-range-current-value",children:r.jsxs("span",{className:"nhsuk-input-range-current-label",children:[v?.current||"Current value:"," ",r.jsx("strong",{children:O})]})})]})}return r.jsx("input",{className:T,...o!==void 0?{value:o}:{},...o===void 0&&s!==void 0?{defaultValue:s}:{},...$})}const rm=({value:e,defaultValue:t,...n})=>{const a=e||t||"";return Ui({value:e,defaultValue:t,...n},{variant:"server",selectedValue:a,enableBehaviourAttr:!0,InputComponent:nm})};var nn=(e=>(e.OneQuarter="one-quarter",e.OneThird="one-third",e.OneHalf="one-half",e.TwoThirds="two-thirds",e.ThreeQuarters="three-quarters",e.Full="full",e))(nn||{}),Wi=(e=>(e.Mobile="mobile",e.Tablet="tablet",e.Desktop="desktop",e.LargeDesktop="large-desktop",e))(Wi||{}),Gi=(e=>(e.Left="left",e.Right="right",e))(Gi||{}),Vi=(e=>(e.Left="left",e.Center="center",e.Right="right",e))(Vi||{});const yo=({children:e,className:t,fluid:n=!1,maxWidth:a,style:o,...s})=>{const i=Ce({"nhsuk-width-container":!n,"nhsuk-width-container-fluid":n},t),l=a?{maxWidth:a,...o||{}}:o;return r.jsx("div",{className:i,style:l,...s,children:e})},Zt=({children:e,className:t,style:n,align:a,rowGap:o,...s})=>{const i=Ce("nhsuk-grid-row",a?`nhsuk-grid-row-align-${a}`:void 0,t);return r.jsx("div",{className:i,style:n,...s,children:e})},_n=({children:e,width:t=nn.Full,mobileWidth:n,tabletWidth:a,desktopWidth:o,start:s,className:i,forceWidth:l=!1,style:c,align:d,...u})=>{const f=Ce({[`nhsuk-grid-column-${t}`]:!l,[`nhsuk-u-${t}`]:l,[`nhsuk-u-${n}-mobile`]:!!n,[`nhsuk-u-${a}-tablet`]:!!a,[`nhsuk-u-${o}-desktop`]:!!o,[`nhsuk-grid-column-start-${s}`]:s&&s>=1&&s<=7,...d?{[`nhsuk-grid-align-${d}`]:!0}:{}},i);return r.jsx("div",{className:f,style:c,...u,children:e})},Zr=({children:e,className:t,style:n,rowGap:a=8,...o})=>{const s=k.Children.toArray(e),i=s[0],l=k.isValidElement(i)&&(i.type===Zt||typeof i.props=="object"&&i.props&&"className"in i.props&&typeof i.props.className=="string"&&i.props.className.includes("nhsuk-grid-row")),c=typeof a=="number"?`${a}px`:a;let d=e;if(l)d=s.map((u,f)=>{if(!k.isValidElement(u))return u;const h=u,p=h.props||{},y=typeof p.className=="string"?p.className:"";if(!(h.type===Zt||y.includes("nhsuk-grid-row")))return u;const g=p.rowGap,C=g!==void 0?typeof g=="number"?`${g}px`:g:c,j=f===0?void 0:C;if(!j)return u;const M={...p.style||{},marginTop:j};return k.cloneElement(h,{style:M})});else{const u={marginTop:void 0};d=r.jsx(Zt,{style:u,children:e})}return r.jsx(yo,{className:t,style:n,...o,children:d})},am=({children:e,type:t="bullet",size:n="medium",border:a=!1,className:o,role:s,as:i,...l})=>{const c=i||(t==="number"?"ol":"ul"),d=Ce("nhsuk-list",{"nhsuk-list--bullet":t==="bullet","nhsuk-list--number":t==="number","nhsuk-list--none":t==="none","nhsuk-list--border":a,[`nhsuk-list--${n}`]:n!=="medium"},o);return r.jsx(c,{className:d,role:s,...l,children:e})},om=({children:e,className:t,...n})=>{const a=Ce("nhsuk-list__item",t);return r.jsx("li",{className:a,...n,children:e})},Yi=am;Yi.Item=om;const sm=({debug:e=!1,className:t,children:n,...a})=>{if(!n)return null;const o=["nhsuk-spacing-utilities",e&&"nhsuk-spacing-utilities--debug",t].filter(Boolean).join(" ");return r.jsx("div",{className:o,...a,children:n})},im={margin:e=>`nhsuk-u-margin-${e}`,marginTop:e=>`nhsuk-u-margin-top-${e}`,marginRight:e=>`nhsuk-u-margin-right-${e}`,marginBottom:e=>`nhsuk-u-margin-bottom-${e}`,marginLeft:e=>`nhsuk-u-margin-left-${e}`,padding:e=>`nhsuk-u-padding-${e}`,paddingTop:e=>`nhsuk-u-padding-top-${e}`,paddingRight:e=>`nhsuk-u-padding-right-${e}`,paddingBottom:e=>`nhsuk-u-padding-bottom-${e}`,paddingLeft:e=>`nhsuk-u-padding-left-${e}`,marginResponsive:e=>`nhsuk-u-margin-responsive-${e}`,marginTopResponsive:e=>`nhsuk-u-margin-top-responsive-${e}`,marginRightResponsive:e=>`nhsuk-u-margin-right-responsive-${e}`,marginBottomResponsive:e=>`nhsuk-u-margin-bottom-responsive-${e}`,marginLeftResponsive:e=>`nhsuk-u-margin-left-responsive-${e}`,paddingResponsive:e=>`nhsuk-u-padding-responsive-${e}`,paddingTopResponsive:e=>`nhsuk-u-padding-top-responsive-${e}`,paddingRightResponsive:e=>`nhsuk-u-padding-right-responsive-${e}`,paddingBottomResponsive:e=>`nhsuk-u-padding-bottom-responsive-${e}`,paddingLeftResponsive:e=>`nhsuk-u-padding-left-responsive-${e}`},lm=({debug:e=!1,className:t,children:n,...a})=>{if(!n)return null;const o=["nhsuk-width-utilities",e&&"nhsuk-width-utilities--debug",t].filter(Boolean).join(" ");return r.jsx("div",{className:o,...a,children:n})},cm={width:e=>`nhsuk-u-width-${e}`,widthTablet:e=>`nhsuk-u-width-${e}-tablet`},dm=["full","three-quarters","two-thirds","one-half","one-third","one-quarter"],xo=({as:e="main",size:t="default",className:n,children:a,...o})=>{const s=["nhsuk-main-wrapper",t==="large"&&"nhsuk-main-wrapper--l",t==="small"&&"nhsuk-main-wrapper--s",n].filter(Boolean).join(" ");return r.jsx(e,{className:s,...o,children:a})};function um(e){switch(e){case"xxl":case"xl":return 1;case"l":return 2;case"m":return 3;case"s":return 4;case"xs":return 5;default:return 2}}function fm(e){const t=e.level??um(e.size),n=["nhsuk-heading",e.size?`nhsuk-heading--${e.size}`:"",e.className||""].filter(Boolean).join(" "),a=e.marginBottom?{marginBottom:e.marginBottom}:void 0;return{tag:`h${t}`,classes:n,style:a}}const Nt=({level:e,className:t,text:n,html:a,children:o,size:s,marginBottom:i,...l})=>{const c=fm({level:e,size:s,className:t,marginBottom:i}),d=o||(a?r.jsx("span",{dangerouslySetInnerHTML:{__html:a}}):n);return k.createElement(c.tag,{className:c.classes,style:c.style,...l},d)};function hm(e){return{classes:["nhsuk-error-message",e.className||""].filter(Boolean).join(" "),id:e.id,visuallyHiddenText:e.visuallyHiddenText??"Error:"}}const vo=({id:e,className:t,visuallyHiddenText:n="Error:",children:a,...o})=>{const s=hm({id:e,className:t,visuallyHiddenText:n});return r.jsxs("span",{className:s.classes,id:s.id,...o,children:[r.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[s.visuallyHiddenText," "]}),a]})},pm=({titleText:e="There is a problem",titleHtml:t,descriptionText:n,descriptionHtml:a,errorList:o,className:s,children:i,...l})=>{const c=k.useRef(null);k.useEffect(()=>{c.current&&c.current.focus()},[]);const d=Ce("nhsuk-error-summary",s),u=()=>t?r.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,f=()=>a?r.jsx("span",{dangerouslySetInnerHTML:{__html:a}}):n,h=p=>{const y=p.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:p.html}}):p.text;return p.href?r.jsx("a",{href:p.href,...p.attributes,children:y}):y};return r.jsxs("div",{ref:c,className:d,"aria-labelledby":"error-summary-title",role:"alert",tabIndex:-1,"data-module":"nhsuk-error-summary",...l,children:[r.jsx("h2",{className:"nhsuk-error-summary__title",id:"error-summary-title",children:u()}),r.jsxs("div",{className:"nhsuk-error-summary__body",children:[i&&r.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:i}),!i&&(n||a)&&r.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:f()}),r.jsx("ul",{className:"nhsuk-list nhsuk-error-summary__list",role:"list",children:o.map((p,y)=>r.jsx("li",{children:h(p)},y))})]})]})},mm=({id:e,className:t,items:n,namePrefix:a,values:o={},fieldset:s,hint:i,errorMessage:l,onChange:c,...d})=>{const[u,f]=k.useState(()=>({day:o.day||"",month:o.month||"",year:o.year||""})),[h,p]=k.useState({}),y=L=>L%4===0&&L%100!==0||L%400===0,m=(L,$)=>{const O=[31,28,31,30,31,30,31,31,30,31,30,31];return L===2&&y($)?29:O[L-1]},g=(L,$,O)=>{if(!L)return;if(!/^\d+$/.test(L))return"Day must be a number";const J=parseInt(L,10);if(J<1||J>31)return"Day must be between 1 and 31";if($&&O){const ee=parseInt($,10),ae=parseInt(O,10);if(!isNaN(ee)&&!isNaN(ae)&&ee>=1&&ee<=12){const R=m(ee,ae);if(J>R)return`${["January","February","March","April","May","June","July","August","September","October","November","December"][ee-1]} ${ae} only has ${R} days`}}},C=L=>{if(!L)return;if(!/^\d+$/.test(L))return"Month must be a number";const $=parseInt(L,10);if($<1||$>12)return"Month must be between 1 and 12"},j=L=>{if(!L)return;if(!/^\d+$/.test(L))return"Year must be a number";const $=parseInt(L,10),O=new Date().getFullYear();if($<1900||$>O+10)return`Year must be between 1900 and ${O+10}`},M=(L,$,O)=>{if(!L||!$||!O)return;const J=parseInt(L,10),ee=parseInt($,10),ae=parseInt(O,10);if(isNaN(J)||isNaN(ee)||isNaN(ae)||ee<1||ee>12||ae<1900)return;const R=m(ee,ae);J<1||J>R},N=k.useCallback((L,$)=>{const O={...u,[L]:$};f(O),c&&c(O)},[u,c]),w=k.useCallback(L=>{const $=u[L];let O;if(L==="day")O=g($,u.month,u.year);else if(L==="month"){if(O=C($),!O&&u.day){const J=g(u.day,$,u.year);p(ee=>({...ee,day:J}))}}else if(L==="year"&&(O=j($),!O&&u.day&&u.month)){const J=g(u.day,u.month,$);p(ee=>({...ee,day:J}))}if(p(J=>({...J,[L]:O})),u.day&&u.month&&u.year){const J=M(L==="day"?$:u.day,L==="month"?$:u.month,L==="year"?$:u.year);J&&p(ee=>({...ee,day:J}))}},[u,g,C,j,M]),_=k.useMemo(()=>[{name:"day",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"month",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"year",classes:"nhsuk-input--width-4",inputmode:"numeric",pattern:"[0-9]*"}],[]),I=n||_;let v=s?.describedBy||"";const x=i?`${e}-hint`:"",S=l?`${e}-error`:"";x&&(v=v?`${v} ${x}`:x),S&&(v=v?`${v} ${S}`:S);const A=Object.values(h).some(L=>L),D=Ce("nhsuk-form-group",{"nhsuk-form-group--error":l||A}),F=Ce("nhsuk-date-input",t),T=()=>r.jsxs(r.Fragment,{children:[i&&r.jsx(bo,{id:x,className:i.classes,children:i.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:i.html}}):i.text}),l&&r.jsx(vo,{id:S,className:l.classes,children:l.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text}),Object.entries(h).map(([L,$])=>$?r.jsxs(vo,{id:`${e}-${L}-error`,className:"nhsuk-error-message",children:[r.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",$]},`${L}-error`):null),r.jsx("div",{className:F,id:e,"data-testid":"date-input",...d,children:I.map(L=>{const $=L.id||`${e}-${L.name}`,O=a?`${a}[${L.name}]`:L.name,J=L.label||L.name.charAt(0).toUpperCase()+L.name.slice(1),ee=h[L.name],ae=u[L.name]||"";let R=v;if(ee){const B=`${e}-${L.name}-error`;R=R?`${R} ${B}`:B}return r.jsxs("div",{className:"nhsuk-date-input__item",children:[r.jsx(Vr,{htmlFor:$,className:"nhsuk-date-input__label",children:J}),r.jsx(Gr,{id:$,name:O,value:ae,className:Ce("nhsuk-date-input__input",L.classes,{"nhsuk-input--error":ee}),inputMode:L.inputmode,autoComplete:L.autocomplete,pattern:L.pattern,"aria-describedby":R||void 0,hasError:!!ee,onChange:B=>N(L.name,B.target.value),onBlur:()=>w(L.name)})]},L.name)})})]});return r.jsx("div",{className:D,children:s?r.jsx(Yr,{className:s.classes,legend:s.legend?{text:s.legend}:void 0,describedBy:v||void 0,children:T()}):T()})},Zi={animation:{AnimationDurationFast:"150ms",AnimationDurationNormal:"300ms",AnimationDurationSlow:"500ms",AnimationEasingEaseIn:"cubic-bezier(0.4, 0, 1, 1)",AnimationEasingEaseOut:"cubic-bezier(0, 0, 0.2, 1)",AnimationEasingEaseInOut:"cubic-bezier(0.4, 0, 0.2, 1)",AnimationEasingBounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},transition:{TransitionButtonDefault:"background-color 300ms cubic-bezier(0, 0, 0.2, 1)",TransitionButtonShadow:"box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionInputFocus:"border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionCardHover:"border-color 300ms cubic-bezier(0, 0, 0.2, 1)"},border:{BorderWidthDefault:"1px",BorderWidthFormElement:"2px",BorderWidthFormElementError:"4px",BorderWidthCardBottom:"4px",BorderWidthPanel:"4px",BorderWidthTableHeader:"2px",BorderWidthTableCell:"1px",BorderRadiusNone:"0px",BorderRadiusSmall:"4px",BorderRadiusMedium:"8px",BorderRadiusLarge:"12px",BorderColorDefault:"#d8dde0",BorderColorForm:"#4c6272",BorderColorCard:"#d8dde0",BorderColorCardHover:"#aeb7bd",BorderColorError:"#d5281b"},color:{ColorPrimaryBlue:"#005eb8",ColorPrimaryWhite:"#ffffff",ColorPrimaryBlack:"#212b32",ColorPrimaryGreen:"#007f3b",ColorPrimaryPurple:"#330072",ColorPrimaryDarkPink:"#7c2855",ColorPrimaryRed:"#d5281b",ColorPrimaryYellow:"#ffeb3b",ColorSecondaryPaleYellow:"#fff9c4",ColorSecondaryWarmYellow:"#ffb81c",ColorSecondaryOrange:"#ed8b00",ColorSecondaryAquaGreen:"#00a499",ColorSecondaryPink:"#ae2573",ColorGrey1:"#4c6272",ColorGrey2:"#768692",ColorGrey3:"#aeb7bd",ColorGrey4:"#d8dde0",ColorGrey5:"#f0f4f5",ColorTextPrimary:"#212b32",ColorTextSecondary:"#4c6272",ColorTextReverse:"#ffffff",ColorTextPrint:"#212b32",ColorLinkDefault:"#005eb8",ColorLinkHover:"#7c2855",ColorLinkActive:"#003087",ColorLinkVisited:"#330072",ColorFocusBackground:"#ffeb3b",ColorFocusText:"#212b32",ColorBorderDefault:"#d8dde0",ColorBorderSecondary:"#ffffff33",ColorError:"#d5281b",ColorFormBorder:"#4c6272",ColorFormBackground:"#ffffff",ColorButtonPrimaryBackground:"#007f3b",ColorButtonPrimaryText:"#ffffff",ColorButtonPrimaryHover:"#006530",ColorButtonPrimaryActive:"#004021",ColorButtonPrimaryShadow:"#004021",ColorButtonSecondaryBackground:"#00000000",ColorButtonSecondaryBackgroundSolid:"#ffffff",ColorButtonSecondaryBorder:"#005eb8",ColorButtonSecondaryText:"#005eb8",ColorButtonSecondaryHover:"#d9e5f2",ColorButtonSecondaryActive:"#c7daf0",ColorButtonSecondaryShadow:"#005eb8",ColorButtonReverseBackground:"#ffffff",ColorButtonReverseText:"#212b32",ColorButtonReverseHover:"#d9dde0",ColorButtonReverseActive:"#b3bcc2",ColorButtonReverseShadow:"#b3bcc2",ColorButtonWarningBackground:"#d5281b",ColorButtonWarningHover:"#aa2016",ColorButtonWarningActive:"#6a140e",ColorButtonWarningShadow:"#6a140e",ColorButtonLoginBackground:"#005eb8",ColorButtonLoginHover:"#004b93",ColorButtonLoginActive:"#002f5c",ColorButtonLoginShadow:"#002f5c"},component:{ComponentButtonPaddingMobileVertical:"8px",ComponentButtonPaddingMobileHorizontal:"16px",ComponentButtonPaddingDesktopVertical:"12px",ComponentButtonPaddingDesktopHorizontal:"16px",ComponentButtonShadowSize:"4px",ComponentFormInputMinHeight:"40px",ComponentFormInputPadding:"4px",ComponentFormCheckboxSize:"40px",ComponentFormCheckboxLabelPadding:"12px",ComponentCardPaddingMobile:"16px",ComponentCardPaddingDesktop:"32px",ComponentCardHeadingMargin:"16px",ComponentPanelPaddingMobile:"20px",ComponentPanelPaddingDesktop:"28px",ComponentBreadcrumbChevronMarginLeft:"9px",ComponentBreadcrumbChevronMarginRight:"2px",ComponentBreadcrumbPaddingTopMobile:"16px",ComponentBreadcrumbPaddingTopDesktop:"24px",ComponentSummaryListCellPaddingVertical:"8px",ComponentSummaryListCellPaddingHorizontal:"24px",ComponentSummaryListRowMargin:"16px",ComponentSpread:"4px",ComponentBlur:"4px",ComponentLink:"4px",ComponentDetails:"8px",ComponentExpander:"4px",ComponentPagination:"16px"},button:{ButtonPrimaryBackgroundDefault:"#007f3b",ButtonPrimaryBackgroundHover:"#006530",ButtonPrimaryBackgroundActive:"#004021",ButtonPrimaryBackgroundDisabled:"#d8dde0",ButtonPrimaryTextDefault:"#ffffff",ButtonPrimaryTextDisabled:"#768692",ButtonPrimaryBorderDefault:"#00000000",ButtonPrimaryBorderFocus:"#ffeb3b",ButtonSecondaryBackgroundDefault:"#00000000",ButtonSecondaryBackgroundSolid:"#ffffff",ButtonSecondaryBackgroundHover:"#d9e5f2",ButtonSecondaryBackgroundActive:"#c7daf0",ButtonSecondaryTextDefault:"#005eb8",ButtonSecondaryBorderDefault:"#005eb8",ButtonSpacingPaddingVerticalMobile:"8px",ButtonSpacingPaddingHorizontalMobile:"16px",ButtonSpacingPaddingVerticalDesktop:"12px",ButtonSpacingPaddingHorizontalDesktop:"16px",ButtonBorderWidth:"2px",ButtonBorderRadius:"4px",ButtonShadowSize:"4px",ButtonTypographyWeight:"600"},card:{CardBackgroundDefault:"#ffffff",CardBorderDefault:"#d8dde0",CardBorderHover:"#aeb7bd",CardBorderBottom:"#f0f4f5",CardTextHeading:"#212b32",CardTextDescription:"#212b32",CardTextLink:"#005eb8",CardSpacingPaddingMobile:"16px",CardSpacingPaddingDesktop:"32px",CardSpacingHeadingMargin:"16px",CardBorderWidthDefault:"1px",CardBorderWidthBottom:"4px",CardShadowDefault:"none",CardShadowHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},form:{FormInputBackgroundDefault:"#ffffff",FormInputBackgroundFocus:"#ffffff",FormInputBackgroundDisabled:"#d8dde0",FormInputBackgroundError:"#ffffff",FormInputBorderDefault:"#4c6272",FormInputBorderFocus:"#ffeb3b",FormInputBorderError:"#d5281b",FormInputBorderDisabled:"#aeb7bd",FormInputTextDefault:"#212b32",FormInputTextPlaceholder:"#4c6272",FormInputTextDisabled:"#768692",FormLabelTextDefault:"#212b32",FormLabelTextRequired:"#ffffff",FormLabelTypographyWeight:"600",FormErrorTextDefault:"#d5281b",FormErrorTypographyWeight:"600",FormHintTextDefault:"#4c6272",FormSpacingInputPadding:"4px",FormSpacingInputMinHeight:"40px",FormSpacingCheckboxSize:"40px",FormSpacingCheckboxLabelPadding:"12px",FormBorderWidthDefault:"2px",FormBorderWidthError:"4px",FormBorderRadius:"0px"},size:{SizeIconSmall:"16px",SizeIconMedium:"18px",SizeIconLarge:"24px",SizeIconExtraLarge:"32px",SizeIconNhsDefault:"34px",SizeFormControlSmall:"32px",SizeFormControlMedium:"40px",SizeFormControlLarge:"48px",SizeFormInputWidthXs:"5.4ex",SizeFormInputWidthSm:"7.2ex",SizeFormInputWidthMd:"9ex",SizeFormInputWidthLg:"10.8ex",SizeFormInputWidthXl:"20ex",SizeFormInputWidth2xl:"38ex",SizeFormInputWidth3xl:"56ex",SizeButtonMinHeightMobile:"44px",SizeButtonMinHeightDesktop:"40px"},layout:{LayoutContainerMaxWidth:"1020px",LayoutColumnFull:"100%",LayoutColumnHalf:"50%",LayoutColumnThird:"33.333%",LayoutColumnQuarter:"25%",LayoutColumnActions:"20%"},breakpoint:{BreakpointMobile:"320px",BreakpointTablet:"641px",BreakpointDesktop:"1025px",BreakpointLargeDesktop:"1280px"},grid:{GridPageWidth:"960px",GridGutter:"32px",GridGutterHalf:"16px"},state:{StateErrorBackground:"#d5281b",StateErrorBorder:"#d5281b",StateErrorText:"#ffffff",StateSuccessBackground:"#007f3b",StateSuccessBorder:"#007f3b",StateSuccessText:"#ffffff",StateWarningBackground:"#ffeb3b",StateWarningBorder:"#ffeb3b",StateWarningText:"#212b32",StateInfoBackground:"#005eb8",StateInfoBorder:"#005eb8",StateInfoText:"#ffffff",StateDisabledBackground:"#d8dde0",StateDisabledBorder:"#aeb7bd",StateDisabledText:"#768692"},shadow:{ShadowButtonDefault:"0 4px 0 #004021",ShadowButtonSecondary:"0 4px 0 #005eb8",ShadowButtonWarning:"0 4px 0 #6a140e",ShadowButtonFocus:"0 4px 0 #ffeb3b",ShadowCardDefault:"none",ShadowCardHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},"focus-outline":{FocusOutlineWidth:"4px",FocusOutlineOffset:"0px",FocusOutlineStyle:"solid"},"focus-shadow":{FocusShadowInput:"0 0 0 3px #ffeb3b",FocusShadowButton:"0 0 0 3px #ffeb3b"},elevation:{ElevationNone:"none",ElevationLow:"0 1px 3px rgba(0, 0, 0, 0.12)",ElevationMedium:"0 2px 6px rgba(0, 0, 0, 0.16)",ElevationHigh:"0 4px 12px rgba(0, 0, 0, 0.20)"},spacing:{Spacing0:"0",Spacing1:"4px",Spacing2:"8px",Spacing3:"16px",Spacing4:"24px",Spacing5:"32px",Spacing6:"40px",Spacing7:"48px",Spacing8:"56px",Spacing9:"64px"},"spacing-responsive":{SpacingResponsive0Mobile:"0",SpacingResponsive0Tablet:"0",SpacingResponsive1Mobile:"4px",SpacingResponsive1Tablet:"4px",SpacingResponsive2Mobile:"8px",SpacingResponsive2Tablet:"8px",SpacingResponsive3Mobile:"8px",SpacingResponsive3Tablet:"16px",SpacingResponsive4Mobile:"16px",SpacingResponsive4Tablet:"24px",SpacingResponsive5Mobile:"24px",SpacingResponsive5Tablet:"32px",SpacingResponsive6Mobile:"32px",SpacingResponsive6Tablet:"40px",SpacingResponsive7Mobile:"40px",SpacingResponsive7Tablet:"48px",SpacingResponsive8Mobile:"48px",SpacingResponsive8Tablet:"56px",SpacingResponsive9Mobile:"56px",SpacingResponsive9Tablet:"64px"},font:{FontFamilyBase:"Frutiger W01",FontFamilyFallback:"Arial, Helvetica, sans-serif",FontFamilyPrint:"sans-serif",FontWeightNormal:"400",FontWeightBold:"600",FontWeightLight:"400",FontSize14Mobile:"12px",FontSize14Tablet:"14px",FontSize14Print:"12pt",FontSize16Mobile:"14px",FontSize16Tablet:"16px",FontSize16Print:"12pt",FontSize19Mobile:"16px",FontSize19Tablet:"19px",FontSize19Print:"13pt",FontSize22Mobile:"19px",FontSize22Tablet:"22px",FontSize22Print:"15pt",FontSize26Mobile:"22px",FontSize26Tablet:"26px",FontSize26Print:"17pt",FontSize36Mobile:"27px",FontSize36Tablet:"36px",FontSize36Print:"20pt",FontSize48Mobile:"33px",FontSize48Tablet:"48px",FontSize48Print:"24pt",FontSizeBase:"16px",FontLineHeightBase:"24px"},headings:{xl:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},l:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},m:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},s:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xs:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}}},paragraphs:{body:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bodyLarge:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},bodySmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ledeText:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},ledeTextSmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}}}},qi=k.createContext(Zi),gm=({children:e,theme:t={}})=>{const n={...Zi,...t};return r.jsx(qi.Provider,{value:n,children:e})},bm=()=>{const e=k.useContext(qi);if(!e)throw new Error("useNHSTheme must be used within an NHSThemeProvider");return e};function ym(){return`
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 400;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff") format("woff");
	}
	
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 600;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff") format("woff");
	}
  `}function xm(){if(typeof document>"u"||document.getElementById("nhs-fonts"))return;const e=document.createElement("style");e.id="nhs-fonts",e.textContent=ym(),document.head.appendChild(e)}const vm=({children:e,theme:t})=>(k.useEffect(()=>{xm()},[]),r.jsx(gm,{theme:t,children:e})),wm="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1MTIiIGhlaWdodD0iMTEzIiAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgaWQ9ImZkcGxvZ28iPgogICAgPHJlY3QgaWQ9ImZkcGxvZ28tcmVjdGFuZ2xlIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigzMiwgOTUsIDE3MikiIHg9IjIuNyIgeT0iLTAuMDMiIHdpZHRoPSIxNDQuMSIgaGVpZ2h0PSI1OC4wNSIgLz4KICAgIDxwYXRoIGlkPSJmZHBsb2dvLWJlemllciIgc3Ryb2tlPSJub25lIiBmaWxsPSJyZ2IoMjU0LCAyNTQsIDI1NCkiIGQ9Ik0gNjAuNjEsNS42IEwgNTAuNjYsNTIuMzEgMzUuMDYsNTIuMzEgMjUuMjQsMTkuOTkgMjUuMTEsMTkuOTkgMTguNTgsNTIuMzEgNi43NCw1Mi4zMSAxNi43Nyw1LjYgMzIuNDMsNS42IDQyLjA1LDM3Ljk5IDQyLjE4LDM3Ljk5IDQ4Ljc3LDUuNiA2MC42MSw1LjYgWiBNIDYwLjYxLDUuNiIgLz4KICAgIDxwYXRoIGlkPSJmZHBsb2dvLWJlemllcjIiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDEwNS4yNiw1LjYgTCA5NS41MSw1Mi4zMSA4Mi45NCw1Mi4zMSA4Ny4xMSwzMi4zIDcyLjI0LDMyLjMgNjguMDcsNTIuMzEgNTUuNDksNTIuMzEgNjUuMjUsNS42IDc3LjgyLDUuNiA3NC4xMywyMy40NyA4OC45OSwyMy40NyA5Mi42OSw1LjYgMTA1LjI2LDUuNiBaIE0gMTA1LjI2LDUuNiIgLz4KICAgIDxwYXRoIGlkPSJmZHBsb2dvLWJlemllcjMiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDE0MS4zOCw2Ljg3IEwgMTM4LjM1LDE2LjE3IEMgMTM1LjkyLDE1LjA0IDEzMi42MywxNC4wNCAxMjcuOTksMTQuMDQgMTIzLjAyLDE0LjA0IDExOC45OCwxNC43NyAxMTguOTgsMTguNTIgMTE4Ljk4LDI1LjE0IDEzNy4yLDIyLjY3IDEzNy4yLDM2Ljg1IDEzNy4yLDQ5Ljc3IDEyNS4xNyw1My4xMiAxMTQuMjcsNTMuMTIgMTA5LjQzLDUzLjEyIDEwMy44NSw1MS45NyA5OS43NSw1MC43IEwgMTAyLjcxLDQxLjIgQyAxMDUuMTksNDIuOCAxMTAuMTcsNDMuODggMTE0LjI3LDQzLjg4IDExOC4xOCw0My44OCAxMjQuMjksNDMuMTQgMTI0LjI5LDM4LjMyIDEyNC4yOSwzMC44MyAxMDYuMDYsMzMuNjQgMTA2LjA2LDIwLjQ2IDEwNi4wNiw4LjQyIDExNi42OSw0LjggMTI2Ljk4LDQuOCAxMzIuNzcsNC44IDEzOC4yMSw1LjQxIDE0MS4zOCw2Ljg3IFogTSAxNDEuMzgsNi44NyIgLz4KICAgIAogICAgPHRleHQgIGZpbGw9InJnYigzNSwgMzEsIDMyKSIgZm9udC1mYW1pbHk9IkZydXRpZ2VyTFRQcm8tQm9sZCwgJ0ZydXRpZ2VyIExUIFBybycsIHNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSJib2xkIiBmb250LXNpemU9IjQwIiB4PSIwIiB5PSI2NC44OSI+PHRzcGFuIHg9IjAiIHk9IjEwMi44OSI+RmVkZXJhdGVkIERhdGEgUGxhdGZvcm08L3RzcGFuPjwvdGV4dD4KPC9zdmc+Cg==",Sm="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyOTAiIGhlaWdodD0iMTU1IiAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgaWQ9ImZkcHR3b2xpbmUiPgogICAgPHJlY3QgaWQ9ImZkcHR3b2xpbmUtcmVjdGFuZ2xlIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigzMiwgOTUsIDE3MikiIHg9IjIuNyIgeT0iLTAuMDMiIHdpZHRoPSIxNDQuMSIgaGVpZ2h0PSI1OC4wNSIgLz4KICAgIDxwYXRoIGlkPSJmZHB0d29saW5lLWJlemllciIgc3Ryb2tlPSJub25lIiBmaWxsPSJyZ2IoMjU0LCAyNTQsIDI1NCkiIGQ9Ik0gNjAuNjEsNS42IEwgNTAuNjYsNTIuMzEgMzUuMDYsNTIuMzEgMjUuMjQsMTkuOTkgMjUuMTEsMTkuOTkgMTguNTgsNTIuMzEgNi43NCw1Mi4zMSAxNi43Nyw1LjYgMzIuNDMsNS42IDQyLjA1LDM3Ljk5IDQyLjE4LDM3Ljk5IDQ4Ljc3LDUuNiA2MC42MSw1LjYgWiBNIDYwLjYxLDUuNiIgLz4KICAgIDxwYXRoIGlkPSJmZHB0d29saW5lLWJlemllcjIiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDEwNS4yNiw1LjYgTCA5NS41MSw1Mi4zMSA4Mi45NCw1Mi4zMSA4Ny4xMSwzMi4zIDcyLjI0LDMyLjMgNjguMDcsNTIuMzEgNTUuNDksNTIuMzEgNjUuMjUsNS42IDc3LjgyLDUuNiA3NC4xMywyMy40NyA4OC45OSwyMy40NyA5Mi42OSw1LjYgMTA1LjI2LDUuNiBaIE0gMTA1LjI2LDUuNiIgLz4KICAgIDxwYXRoIGlkPSJmZHB0d29saW5lLWJlemllcjMiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDE0MS4zOCw2Ljg3IEwgMTM4LjM1LDE2LjE3IEMgMTM1LjkyLDE1LjA0IDEzMi42MywxNC4wNCAxMjcuOTksMTQuMDQgMTIzLjAyLDE0LjA0IDExOC45OCwxNC43NyAxMTguOTgsMTguNTIgMTE4Ljk4LDI1LjE0IDEzNy4yLDIyLjY3IDEzNy4yLDM2Ljg1IDEzNy4yLDQ5Ljc3IDEyNS4xNyw1My4xMiAxMTQuMjcsNTMuMTIgMTA5LjQzLDUzLjEyIDEwMy44NSw1MS45NyA5OS43NSw1MC43IEwgMTAyLjcxLDQxLjIgQyAxMDUuMTksNDIuOCAxMTAuMTcsNDMuODggMTE0LjI3LDQzLjg4IDExOC4xOCw0My44OCAxMjQuMjksNDMuMTQgMTI0LjI5LDM4LjMyIDEyNC4yOSwzMC44MyAxMDYuMDYsMzMuNjQgMTA2LjA2LDIwLjQ2IDEwNi4wNiw4LjQyIDExNi42OSw0LjggMTI2Ljk4LDQuOCAxMzIuNzcsNC44IDEzOC4yMSw1LjQxIDE0MS4zOCw2Ljg3IFogTSAxNDEuMzgsNi44NyIgLz4KICAgIDx0ZXh0ICBmaWxsPSJyZ2IoMzUsIDMxLCAzMikiIGZvbnQtZmFtaWx5PSJGcnV0aWdlckxUUHJvLUJvbGQsICdGcnV0aWdlciBMVCBQcm8nLCBzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iYm9sZCIgZm9udC1zaXplPSI0MCIgeD0iMCIgeT0iNjQuODkiPjx0c3BhbiB4PSIwIiB5PSIxMDIuODkiPkZlZGVyYXRlZCBEYXRhIAo8L3RzcGFuPjx0c3BhbiB4PSIwIiB5PSIxNTAuODkiPlBsYXRmb3JtPC90c3Bhbj48L3RleHQ+Cjwvc3ZnPgo=",_m="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyOTAiIGhlaWdodD0iMTU1IiB4bWw6c3BhY2U9InByZXNlcnZlIiBpZD0iZmRwdHdvbGluZWludmVyc2UiPgoJPHJlY3QgaWQ9ImZkcHR3b2xpbmVpbnZlcnNlLXJlY3RhbmdsZSIgc3Ryb2tlPSJub25lIiBmaWxsPSJyZ2IoMzIsIDk1LCAxNzIpIiB4PSIyLjciIHk9Ii0wLjAzIiB3aWR0aD0iMTQ0LjEiIGhlaWdodD0iNTguMDUiIC8+Cgk8cGF0aCBpZD0iZmRwdHdvbGluZWludmVyc2UtYmV6aWVyIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigyNTQsIDI1NCwgMjU0KSIgZD0iTSA2MC42MSw1LjYgTCA1MC42Niw1Mi4zMSAzNS4wNiw1Mi4zMSAyNS4yNCwxOS45OSAyNS4xMSwxOS45OSAxOC41OCw1Mi4zMSA2Ljc0LDUyLjMxIDE2Ljc3LDUuNiAzMi40Myw1LjYgNDIuMDUsMzcuOTkgNDIuMTgsMzcuOTkgNDguNzcsNS42IDYwLjYxLDUuNiBaIE0gNjAuNjEsNS42IiAvPgoJPHBhdGggaWQ9ImZkcHR3b2xpbmVpbnZlcnNlLWJlemllcjIiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDEwNS4yNiw1LjYgTCA5NS41MSw1Mi4zMSA4Mi45NCw1Mi4zMSA4Ny4xMSwzMi4zIDcyLjI0LDMyLjMgNjguMDcsNTIuMzEgNTUuNDksNTIuMzEgNjUuMjUsNS42IDc3LjgyLDUuNiA3NC4xMywyMy40NyA4OC45OSwyMy40NyA5Mi42OSw1LjYgMTA1LjI2LDUuNiBaIE0gMTA1LjI2LDUuNiIgLz4KCTxwYXRoIGlkPSJmZHB0d29saW5laW52ZXJzZS1iZXppZXIzIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigyNTQsIDI1NCwgMjU0KSIgZD0iTSAxNDEuMzgsNi44NyBMIDEzOC4zNSwxNi4xNyBDIDEzNS45MiwxNS4wNCAxMzIuNjMsMTQuMDQgMTI3Ljk5LDE0LjA0IDEyMy4wMiwxNC4wNCAxMTguOTgsMTQuNzcgMTE4Ljk4LDE4LjUyIDExOC45OCwyNS4xNCAxMzcuMiwyMi42NyAxMzcuMiwzNi44NSAxMzcuMiw0OS43NyAxMjUuMTcsNTMuMTIgMTE0LjI3LDUzLjEyIDEwOS40Myw1My4xMiAxMDMuODUsNTEuOTcgOTkuNzUsNTAuNyBMIDEwMi43MSw0MS4yIEMgMTA1LjE5LDQyLjggMTEwLjE3LDQzLjg4IDExNC4yNyw0My44OCAxMTguMTgsNDMuODggMTI0LjI5LDQzLjE0IDEyNC4yOSwzOC4zMiAxMjQuMjksMzAuODMgMTA2LjA2LDMzLjY0IDEwNi4wNiwyMC40NiAxMDYuMDYsOC40MiAxMTYuNjksNC44IDEyNi45OCw0LjggMTMyLjc3LDQuOCAxMzguMjEsNS40MSAxNDEuMzgsNi44NyBaIE0gMTQxLjM4LDYuODciIC8+Cgk8dGV4dCBmaWxsPSJyZ2IoMjU0LCAyNTQsIDI1NCkiIGZvbnQtZmFtaWx5PSJGcnV0aWdlckxUUHJvLUJvbGQsICdGcnV0aWdlciBMVCBQcm8nLCBzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iYm9sZCIgZm9udC1zaXplPSI0MCIgeD0iMCIgeT0iNjQuODkiPgoJCTx0c3BhbiB4PSIwIiB5PSIxMDIuODkiPgoJCQlGZWRlcmF0ZWQgRGF0YQoJCTwvdHNwYW4+CgkJPHRzcGFuIHg9IjAiIHk9IjE1MC44OSI+CgkJCVBsYXRmb3JtCgkJPC90c3Bhbj4KCTwvdGV4dD4KPC9zdmc+Cg==",km="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1MTIiIGhlaWdodD0iMTEzIiAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgaWQ9ImZkcGxvZ29pbnZlcnNlIj4KICAgIDxyZWN0IGlkPSJmZHBsb2dvaW52ZXJzZS1yZWN0YW5nbGUiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiB4PSIyLjciIHk9Ii0wLjAzIiB3aWR0aD0iMTQ0LjEiIGhlaWdodD0iNTguMDUiIC8+CiAgICA8ZyBpZD0iZmRwbG9nb2ludmVyc2UtZ3JvdXAiPgogICAgICAgIDxwYXRoIGlkPSJmZHBsb2dvaW52ZXJzZS1iZXppZXIzIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigwLCA5NCwgMTg0KSIgZD0iTSAxNDEuMzgsNi44NyBMIDEzOC4zNSwxNi4xNyBDIDEzNS45MiwxNS4wNCAxMzIuNjMsMTQuMDQgMTI3Ljk5LDE0LjA0IDEyMy4wMiwxNC4wNCAxMTguOTgsMTQuNzcgMTE4Ljk4LDE4LjUyIDExOC45OCwyNS4xNCAxMzcuMiwyMi42NyAxMzcuMiwzNi44NSAxMzcuMiw0OS43NyAxMjUuMTcsNTMuMTIgMTE0LjI3LDUzLjEyIDEwOS40Myw1My4xMiAxMDMuODUsNTEuOTcgOTkuNzUsNTAuNyBMIDEwMi43MSw0MS4yIEMgMTA1LjE5LDQyLjggMTEwLjE3LDQzLjg4IDExNC4yNyw0My44OCAxMTguMTgsNDMuODggMTI0LjI5LDQzLjE0IDEyNC4yOSwzOC4zMiAxMjQuMjksMzAuODMgMTA2LjA2LDMzLjY0IDEwNi4wNiwyMC40NiAxMDYuMDYsOC40MiAxMTYuNjksNC44IDEyNi45OCw0LjggMTMyLjc3LDQuOCAxMzguMjEsNS40MSAxNDEuMzgsNi44NyBaIE0gMTQxLjM4LDYuODciIC8+CiAgICAgICAgPHBhdGggaWQ9ImZkcGxvZ29pbnZlcnNlLWJlemllcjIiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDAsIDk0LCAxODQpIiBkPSJNIDEwNS4yNiw1LjYgTCA5NS41MSw1Mi4zMSA4Mi45NCw1Mi4zMSA4Ny4xMSwzMi4zIDcyLjI0LDMyLjMgNjguMDcsNTIuMzEgNTUuNDksNTIuMzEgNjUuMjUsNS42IDc3LjgyLDUuNiA3NC4xMywyMy40NyA4OC45OSwyMy40NyA5Mi42OSw1LjYgMTA1LjI2LDUuNiBaIE0gMTA1LjI2LDUuNiIgLz4KICAgICAgICA8cGF0aCBpZD0iZmRwbG9nb2ludmVyc2UtYmV6aWVyIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigwLCA5NCwgMTg0KSIgZD0iTSA2MC42MSw1LjYgTCA1MC42Niw1Mi4zMSAzNS4wNiw1Mi4zMSAyNS4yNCwxOS45OSAyNS4xMSwxOS45OSAxOC41OCw1Mi4zMSA2Ljc0LDUyLjMxIDE2Ljc3LDUuNiAzMi40Myw1LjYgNDIuMDUsMzcuOTkgNDIuMTgsMzcuOTkgNDguNzcsNS42IDYwLjYxLDUuNiBaIE0gNjAuNjEsNS42IiAvPgogICAgPC9nPgogICAgCiAgICA8dGV4dCAgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBmb250LWZhbWlseT0iRnJ1dGlnZXJMVFByby1Cb2xkLCAnRnJ1dGlnZXIgTFQgUHJvJywgc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZvbnQtc2l6ZT0iNDAiIHg9IjAiIHk9IjY0Ljg5Ij48dHNwYW4geD0iMCIgeT0iMTAyLjg5Ij5GZWRlcmF0ZWQgRGF0YSBQbGF0Zm9ybTwvdHNwYW4+PC90ZXh0Pgo8L3N2Zz4K",Cm="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='357'%20height='114'%20xml:space='preserve'%20id='fdpgraphic'%3e%3cdefs%3e%3clinearGradient%20id='fdpgraphic-gradient-rectangle2'%20x1='113.66'%20y1='27.99'%20x2='0.02'%20y2='27.99'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0'%20stop-color='rgb(96,%20178,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.51'%20stop-color='rgb(34,%2094,%20172)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdpgraphic-gradient2-clip'%20x1='243.8'%20y1='28.5'%20x2='113.64'%20y2='28.5'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(4,%20150,%2071)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.64'%20stop-color='rgb(51,%20159,%20112)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(98,%20167,%20153)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdpgraphic-gradient4-bezier4'%20x1='357.05'%20y1='85.21'%20x2='243.44'%20y2='85.21'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(214,%20203,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.86'%20stop-color='rgb(234,%20229,%20240)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(255,%20255,%20255)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cg%20id='fdpgraphic-group3'%3e%3cg%20id='fdpgraphic-squareGroup'%3e%3crect%20id='fdpgraphic-rectangle'%20stroke='none'%20fill='rgb(34,%2094,%20172)'%20x='0.02'%20y='0.49'%20width='113.6'%20height='113.6'%20/%3e%3crect%20id='fdpgraphic-rectangle2'%20stroke='none'%20fill='url(%23fdpgraphic-gradient-rectangle2)'%20x='0'%20y='0'%20width='113.65'%20height='56'%20/%3e%3c/g%3e%3cg%20id='fdpgraphic-hexagonGroup'%3e%3cpath%20id='fdpgraphic-polygon'%20stroke='none'%20fill='rgb(73,%20160,%20152)'%20d='M%20146.15,-0%20L%20211.25,0%20243.8,57.03%20211.25,114.06%20146.15,114.06%20113.6,57.03%20146.15,-0%20Z%20M%20146.15,-0'%20/%3e%3cg%20id='fdpgraphic-hexagon'%3e%3cpath%20id='fdpgraphic-clip'%20stroke='none'%20fill='url(%23fdpgraphic-gradient2-clip)'%20d='M%20146.18,-0%20L%20113.64,57%20243.8,57%20211.26,-0%20146.18,-0%20Z%20M%20146.18,-0'%20/%3e%3c/g%3e%3c/g%3e%3cg%20id='fdpgraphic-circleGroup'%3e%3ccircle%20id='fdpgraphic-oval'%20stroke='none'%20fill='rgb(214,%20203,%20226)'%20cx='300.25'%20cy='56.8'%20r='56.8'%20/%3e%3cpath%20id='fdpgraphic-bezier4'%20stroke='none'%20fill='url(%23fdpgraphic-gradient4-bezier4)'%20d='M%20300.25,56.8%20L%20243.45,56.8%20C%20243.45,88.18%20268.88,113.61%20300.25,113.61%20L%20300.25,113.61%20C%20331.62,113.61%20357.05,88.18%20357.05,56.8%20L%20357.05,56.8%20300.25,56.8%20Z%20M%20300.25,56.8'%20/%3e%3c/g%3e%3cpath%20id='fdpgraphic-bezier5'%20stroke='rgb(217,%20216,%20216)'%20stroke-width='2.49'%20stroke-miterlimit='2.49'%20fill='none'%20d='M%2054.9,56.9%20L%20301.64,56.9'%20/%3e%3c/g%3e%3c/svg%3e",Nm="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='393'%20height='47'%20xml:space='preserve'%20id='fdplockuplogo'%3e%3cdefs%3e%3clinearGradient%20id='fdplockuplogo-gradient-rectangle2'%20x1='45.65'%20y1='11.5'%20x2='0.01'%20y2='11.5'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0'%20stop-color='rgb(96,%20178,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.51'%20stop-color='rgb(34,%2094,%20172)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdplockuplogo-gradient2-clip'%20x1='98.8'%20y1='12'%20x2='45.64'%20y2='12'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(4,%20150,%2071)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.64'%20stop-color='rgb(51,%20159,%20112)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(98,%20167,%20153)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdplockuplogo-gradient4-bezier4'%20x1='145.05'%20y1='34.96'%20x2='98.45'%20y2='34.96'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(214,%20203,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.86'%20stop-color='rgb(234,%20229,%20240)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(255,%20255,%20255)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cpath%20id='fdplockuplogo-bezier7'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20157.2,1.11%20L%20168.06,1.11%20184.85,34.06%20184.97,34.06%20184.97,1.11%20193.43,1.11%20193.43,45.17%20182.64,45.17%20165.78,12.22%20165.66,12.22%20165.66,45.17%20157.2,45.17%20157.2,1.11%20Z%20M%20157.2,1.11'%20/%3e%3cpath%20id='fdplockuplogo-bezier8'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20200.37,1.11%20L%20209.21,1.11%20209.21,18.91%20226.88,18.91%20226.88,1.11%20235.72,1.11%20235.72,45.17%20226.88,45.17%20226.88,25.85%20209.21,25.85%20209.21,45.17%20200.37,45.17%20200.37,1.11%20Z%20M%20200.37,1.11'%20/%3e%3cpath%20id='fdplockuplogo-bezier9'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20267.78,9.19%20C%20265,7.99%20261.91,7.29%20258.81,7.29%20255.78,7.29%20251.87,8.62%20251.87,13.42%20251.87,21.05%20271.19,17.84%20271.19,32.61%20271.19,42.27%20263.55,45.93%20254.65,45.93%20249.85,45.93%20247.7,45.3%20243.35,44.22%20L%20244.17,36.27%20C%20247.2,37.91%20250.67,38.98%20254.14,38.98%20257.49,38.98%20261.97,37.28%20261.97,33.3%20261.97,24.91%20242.65,28.38%20242.65,13.79%20242.65,3.95%20250.29,0.35%20258.06,0.35%20261.84,0.35%20265.38,0.85%20268.6,1.93%20L%20267.78,9.19%20Z%20M%20267.78,9.19'%20/%3e%3cpath%20id='fdplockuplogo-bezier10'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20287.4,1.11%20L%20311.89,1.11%20311.89,8.05%20296.23,8.05%20296.23,18.91%20311.13,18.91%20311.13,25.85%20296.23,25.85%20296.23,45.17%20287.4,45.17%20287.4,1.11%20Z%20M%20287.4,1.11'%20/%3e%3cpath%20id='fdplockuplogo-bezier11'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20327.66,38.23%20L%20332.59,38.23%20C%20339.97,38.23%20347.11,32.73%20347.11,23.14%20347.11,13.54%20339.97,8.05%20332.59,8.05%20L%20327.66,8.05%20327.66,38.23%20Z%20M%20318.82,1.1%20L%20330.88,1.1%20C%20344.39,1.1%20356.32,5.65%20356.32,23.14%20356.32,40.63%20344.39,45.17%20330.88,45.17%20L%20318.82,45.17%20318.82,1.1%20Z%20M%20318.82,1.1'%20/%3e%3cpath%20id='fdplockuplogo-bezier12'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20372.09,21.5%20L%20375.19,21.5%20C%20379.61,21.5%20383.58,20.04%20383.58,14.93%20383.58,9.82%20379.73,8.05%20375.19,8.05%20L%20372.09,8.05%20372.09,21.5%20Z%20M%20363.26,1.11%20L%20374.43,1.11%20C%20384.03,1.11%20392.8,3.88%20392.8,14.43%20392.8,24.72%20385.29,28.44%20375.82,28.44%20L%20372.09,28.44%20372.09,45.17%20363.26,45.17%20363.26,1.11%20Z%20M%20363.26,1.11'%20/%3e%3cg%20id='fdplockuplogo-group3'%3e%3cg%20id='fdplockuplogo-squareGroup'%3e%3crect%20id='fdplockuplogo-rectangle'%20stroke='none'%20fill='rgb(34,%2094,%20172)'%20x='0.02'%20y='0.49'%20width='45.6'%20height='46.6'%20/%3e%3crect%20id='fdplockuplogo-rectangle2'%20stroke='none'%20fill='url(%23fdplockuplogo-gradient-rectangle2)'%20x='0'%20y='0'%20width='45.65'%20height='23'%20/%3e%3c/g%3e%3cg%20id='fdplockuplogo-hexagonGroup'%3e%3cpath%20id='fdplockuplogo-polygon'%20stroke='none'%20fill='rgb(73,%20160,%20152)'%20d='M%2058.9,-0%20L%2085.5,-0%2098.8,23.53%2085.5,47.06%2058.9,47.06%2045.6,23.53%2058.9,-0%20Z%20M%2058.9,-0'%20/%3e%3cg%20id='fdplockuplogo-hexagon'%3e%3cpath%20id='fdplockuplogo-clip'%20stroke='none'%20fill='url(%23fdplockuplogo-gradient2-clip)'%20d='M%2058.93,-0%20L%2045.64,24%2098.8,24%2085.51,-0%2058.93,-0%20Z%20M%2058.93,-0'%20/%3e%3c/g%3e%3c/g%3e%3cg%20id='fdplockuplogo-circleGroup'%3e%3cg%20id='fdplockuplogo-group'%3e%3ccircle%20id='fdplockuplogo-oval'%20stroke='none'%20fill='rgb(214,%20203,%20226)'%20cx='121.75'%20cy='23.3'%20r='23.3'%20/%3e%3cpath%20id='fdplockuplogo-bezier4'%20stroke='none'%20fill='url(%23fdplockuplogo-gradient4-bezier4)'%20d='M%20121.75,23.3%20L%2098.45,23.3%20C%2098.45,36.17%20108.88,46.61%20121.75,46.61%20L%20121.75,46.61%20C%20134.62,46.61%20145.05,36.17%20145.05,23.3%20L%20145.05,23.3%20121.75,23.3%20Z%20M%20121.75,23.3'%20/%3e%3c/g%3e%3c/g%3e%3cpath%20id='fdplockuplogo-bezier5'%20stroke='rgb(217,%20216,%20216)'%20stroke-width='1'%20stroke-miterlimit='2.49'%20fill='none'%20d='M%2022.3,23.48%20L%20122.54,23.48'%20/%3e%3c/g%3e%3c/svg%3e",jm="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='393'%20height='47'%20xml:space='preserve'%20id='fdplockuplogoinverted'%3e%3cdefs%3e%3clinearGradient%20id='fdplockuplogoinverted-gradient-rectangle2'%20x1='45.65'%20y1='11.5'%20x2='0.01'%20y2='11.5'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0'%20stop-color='rgb(96,%20178,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.51'%20stop-color='rgb(34,%2094,%20172)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdplockuplogoinverted-gradient2-clip'%20x1='98.8'%20y1='12'%20x2='45.64'%20y2='12'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(4,%20150,%2071)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.64'%20stop-color='rgb(51,%20159,%20112)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(98,%20167,%20153)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdplockuplogoinverted-gradient4-bezier4'%20x1='145.05'%20y1='34.96'%20x2='98.45'%20y2='34.96'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(214,%20203,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.86'%20stop-color='rgb(234,%20229,%20240)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(255,%20255,%20255)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cpath%20id='fdplockuplogoinverted-bezier7'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20157.2,1.11%20L%20168.06,1.11%20184.85,34.06%20184.97,34.06%20184.97,1.11%20193.43,1.11%20193.43,45.17%20182.64,45.17%20165.78,12.22%20165.66,12.22%20165.66,45.17%20157.2,45.17%20157.2,1.11%20Z%20M%20157.2,1.11'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier8'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20200.37,1.11%20L%20209.21,1.11%20209.21,18.91%20226.88,18.91%20226.88,1.11%20235.72,1.11%20235.72,45.17%20226.88,45.17%20226.88,25.85%20209.21,25.85%20209.21,45.17%20200.37,45.17%20200.37,1.11%20Z%20M%20200.37,1.11'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier9'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20267.78,9.19%20C%20265,7.99%20261.91,7.29%20258.81,7.29%20255.78,7.29%20251.87,8.62%20251.87,13.42%20251.87,21.05%20271.19,17.84%20271.19,32.61%20271.19,42.27%20263.55,45.93%20254.65,45.93%20249.85,45.93%20247.7,45.3%20243.35,44.22%20L%20244.17,36.27%20C%20247.2,37.91%20250.67,38.98%20254.14,38.98%20257.49,38.98%20261.97,37.28%20261.97,33.3%20261.97,24.91%20242.65,28.38%20242.65,13.79%20242.65,3.95%20250.29,0.35%20258.06,0.35%20261.84,0.35%20265.38,0.85%20268.6,1.93%20L%20267.78,9.19%20Z%20M%20267.78,9.19'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier10'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20287.4,1.11%20L%20311.89,1.11%20311.89,8.05%20296.23,8.05%20296.23,18.91%20311.13,18.91%20311.13,25.85%20296.23,25.85%20296.23,45.17%20287.4,45.17%20287.4,1.11%20Z%20M%20287.4,1.11'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier11'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20327.66,38.23%20L%20332.59,38.23%20C%20339.97,38.23%20347.11,32.73%20347.11,23.14%20347.11,13.54%20339.97,8.05%20332.59,8.05%20L%20327.66,8.05%20327.66,38.23%20Z%20M%20318.82,1.1%20L%20330.88,1.1%20C%20344.39,1.1%20356.32,5.65%20356.32,23.14%20356.32,40.63%20344.39,45.17%20330.88,45.17%20L%20318.82,45.17%20318.82,1.1%20Z%20M%20318.82,1.1'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier12'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20372.09,21.5%20L%20375.19,21.5%20C%20379.61,21.5%20383.58,20.04%20383.58,14.93%20383.58,9.82%20379.73,8.05%20375.19,8.05%20L%20372.09,8.05%20372.09,21.5%20Z%20M%20363.26,1.11%20L%20374.43,1.11%20C%20384.03,1.11%20392.8,3.88%20392.8,14.43%20392.8,24.72%20385.29,28.44%20375.82,28.44%20L%20372.09,28.44%20372.09,45.17%20363.26,45.17%20363.26,1.11%20Z%20M%20363.26,1.11'%20/%3e%3cg%20id='fdplockuplogoinverted-group3'%3e%3cg%20id='fdplockuplogoinverted-squareGroup'%3e%3crect%20id='fdplockuplogoinverted-rectangle'%20stroke='none'%20fill='rgb(34,%2094,%20172)'%20x='0.02'%20y='0.49'%20width='45.6'%20height='46.6'%20/%3e%3crect%20id='fdplockuplogoinverted-rectangle2'%20stroke='none'%20fill='url(%23fdplockuplogoinverted-gradient-rectangle2)'%20x='0'%20y='0'%20width='45.65'%20height='23'%20/%3e%3c/g%3e%3cg%20id='fdplockuplogoinverted-hexagonGroup'%3e%3cpath%20id='fdplockuplogoinverted-polygon'%20stroke='none'%20fill='rgb(73,%20160,%20152)'%20d='M%2058.9,-0%20L%2085.5,-0%2098.8,23.53%2085.5,47.06%2058.9,47.06%2045.6,23.53%2058.9,-0%20Z%20M%2058.9,-0'%20/%3e%3cg%20id='fdplockuplogoinverted-hexagon'%3e%3cpath%20id='fdplockuplogoinverted-clip'%20stroke='none'%20fill='url(%23fdplockuplogoinverted-gradient2-clip)'%20d='M%2058.93,-0%20L%2045.64,24%2098.8,24%2085.51,-0%2058.93,-0%20Z%20M%2058.93,-0'%20/%3e%3c/g%3e%3c/g%3e%3cg%20id='fdplockuplogoinverted-circleGroup'%3e%3cg%20id='fdplockuplogoinverted-group'%3e%3ccircle%20id='fdplockuplogoinverted-oval'%20stroke='none'%20fill='rgb(214,%20203,%20226)'%20cx='121.75'%20cy='23.3'%20r='23.3'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier4'%20stroke='none'%20fill='url(%23fdplockuplogoinverted-gradient4-bezier4)'%20d='M%20121.75,23.3%20L%2098.45,23.3%20C%2098.45,36.17%20108.88,46.61%20121.75,46.61%20L%20121.75,46.61%20C%20134.62,46.61%20145.05,36.17%20145.05,23.3%20L%20145.05,23.3%20121.75,23.3%20Z%20M%20121.75,23.3'%20/%3e%3c/g%3e%3c/g%3e%3cpath%20id='fdplockuplogoinverted-bezier5'%20stroke='rgb(217,%20216,%20216)'%20stroke-width='1'%20stroke-miterlimit='2.49'%20fill='none'%20d='M%2022.3,23.48%20L%20122.54,23.48'%20/%3e%3c/g%3e%3c/svg%3e";var qr=(e=>(e.NHS="nhs",e.FDP="fdp",e))(qr||{}),Jr=(e=>(e.Full="full",e.Graphic="graphic",e.Inverse="inverse",e.TwoLine="twoLine",e.TwoLineInverse="twoLineInverse",e.Compact="compact",e.CompactInverted="compactInverted",e))(Jr||{});const Ji={nhs:{},fdp:{full:{brand:"fdp",variant:"full",src:wm,ariaLabel:"FDP"},graphic:{brand:"fdp",variant:"graphic",src:Cm,ariaLabel:"FDP"},inverse:{brand:"fdp",variant:"inverse",src:km,ariaLabel:"FDP"},twoLine:{brand:"fdp",variant:"twoLine",src:Sm,ariaLabel:"FDP"},twoLineInverse:{brand:"fdp",variant:"twoLineInverse",src:_m,ariaLabel:"FDP"},compact:{brand:"fdp",variant:"compact",src:Nm,ariaLabel:"FDP"},compactInverted:{brand:"fdp",variant:"compactInverted",src:jm,ariaLabel:"FDP"}}};function wo(e,t="full"){return Ji[e]?.[t]}function Mm(e,{variant:t,isClient:n,menuOpen:a=!1,showMoreButton:o=!1,visibleItems:s,dropdownVisible:i,toggleMenu:l,navContainerRef:c,navListRef:d,searchNode:u,brand:f}){const{className:h,logo:p={},service:y={},serviceName:m,organisation:g,search:C,account:j,navigation:M,containerClasses:N,variant:w="default",attributes:_={},fullWidth:I=!1,maxVisibleItems:v,responsiveNavigation:x=!0,logoVariant:S=Jr.Full,logoVariant:A,...D}=e,F={...y,text:y?.text??m};"maxVisibleItems"in D&&delete D.maxVisibleItems;const T=F.href&&!p.href||F.href&&F.href===p.href,L=T?F.href:p.href,O=f??(typeof document>"u"?"nhs":document.documentElement.getAttribute("data-brand")==="fdp"?"fdp":"nhs"),J=Ce("nhsuk-header",{"nhsuk-header--organisation":w==="organisation"||g,"nhsuk-header--white":w==="white"},h),ee=Ce("nhsuk-header__container",{"nhsuk-header__container--full-width":I&&O==="nhs"},N),ae=Ce("nhsuk-header__navigation",{"nhsuk-header__navigation--white":M?.white,"nhsuk-header__navigation--justified":M?.justified},M?.className),R=()=>r.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":p.ariaLabel||"NHS",children:[r.jsx("title",{children:p.ariaLabel||"NHS"}),r.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),B=()=>{if(p.src)return r.jsx("img",{className:"nhsuk-header__organisation-logo",src:p.src,width:"280",alt:p.ariaLabel||(O==="fdp"?"FDP":"NHS")});if(O==="fdp"){const H=wo(qr.FDP,S);if(H?.src)return r.jsx("img",{className:"nhsuk-header__organisation-logo",src:H.src,"data-logo-variant":S,width:"280",alt:H.ariaLabel||"FDP"})}return R()},E=()=>g?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"nhsuk-header__organisation-name",children:[g.name,g.split&&r.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",g.split]})]}),g.descriptor&&r.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:g.descriptor})]}):null,Y=(H,Q)=>H?Q?r.jsx("a",{className:"nhsuk-header__service-name",href:Q,children:H}):r.jsx("span",{className:"nhsuk-header__service-name",children:H}):null,P=H=>H.active||H.current?r.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:H.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:H.html}}):H.text}):H.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:H.html}}):H.text,W=()=>r.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:r.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})});return M?.items,r.jsxs("header",{className:J,role:"banner","data-module":"nhsuk-header",..._,...D,children:[r.jsxs("div",{className:ee,children:[r.jsxs("div",{className:"nhsuk-header__service",children:[L?r.jsxs("a",{className:"nhsuk-header__service-logo",href:L,children:[B(),E(),T&&Y(F.text)]}):r.jsxs(r.Fragment,{children:[B(),E(),T&&Y(F.text)]}),F.text&&!T&&Y(F.text,F.href)]}),u??null,r.jsx(ho,{...j,variant:w==="white"?"white":"default"})]}),M&&M.items&&M.items.length>0&&r.jsx("nav",{className:ae,"aria-label":M.ariaLabel||"Menu",children:r.jsx("div",{className:Ce("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--initializing":n&&t==="client","nhsuk-header__navigation-container--ssr":!n},N),ref:c,children:r.jsxs("ul",{className:"nhsuk-header__navigation-list",ref:d,children:[(M?.items||[]).map((H,Q)=>r.jsx("li",{className:Ce("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":H.active||H.current,"nhsuk-header__navigation-item--hidden":o&&s!==void 0&&Q>=(s??0)},H.className),...H.attributes||{},children:r.jsx("a",{className:"nhsuk-header__navigation-link",href:H.href,...H.active||H.current?{"aria-current":H.current?"page":"true"}:{},children:P(H)})},Q)),o&&s!==void 0&&r.jsx("li",{className:"nhsuk-header__navigation-item nhsuk-header__navigation-item--more",children:r.jsxs("button",{className:"nhsuk-header__navigation-button",id:"toggle-more-menu",type:"button","aria-haspopup":"true","aria-expanded":a?"true":"false","aria-controls":"nhsuk-header-more-menu",onClick:l,children:[r.jsx("span",{children:"More"}),W()]})})]})})}),n&&M&&M.items&&M.items.length>0&&a&&i&&r.jsx("div",{className:"nhsuk-header__dropdown-menu",hidden:!i,id:"nhsuk-header-more-menu",children:r.jsx("ul",{className:"nhsuk-header__dropdown-list",children:M.items.slice(s??0).map((H,Q)=>r.jsx("li",{className:Ce("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":H.active||H.current}),children:r.jsx("a",{className:"nhsuk-header__dropdown-link",href:H.href,...H.active||H.current?{"aria-current":H.current?"page":"true"}:{},onClick:()=>{l?.()},children:P(H)})},`overflow-${(s??0)+Q}`))})}),t==="server"]})}const So=k.createContext(void 0);function Im({brand:e="nhs",scope:t="document",children:n}){const[a,o]=k.useState(e);k.useEffect(()=>{o(e)},[e]),k.useEffect(()=>{if(t==="document")return document.documentElement.setAttribute("data-brand",a),()=>{}},[a,t]);const s=k.useMemo(()=>({brand:a,setBrand:o}),[a]);return t==="local"?r.jsx(So.Provider,{value:s,children:r.jsx("div",{"data-brand":a,children:n})}):r.jsx(So.Provider,{value:s,children:n})}function Xi(){const e=k.useContext(So);if(!e)throw new Error("useBrand must be used within BrandThemeProvider");return e}const Ki=({mode:e="form",action:t="/search",method:n="get",name:a="q",value:o,placeholder:s="Search",visuallyHiddenLabel:i="Search the NHS website",visuallyHiddenButton:l="Search",className:c,disabled:d=!1,callbacks:u={},isLoading:f=!1,showResults:h=!1,results:p=[],formAttributes:y={},inputAttributes:m={},buttonAttributes:g={},preventDefaultSubmit:C=!1,debounceMs:j=300,minQueryLength:M=1})=>{const[N,w]=k.useState(""),[_,I]=k.useState(!1),v=k.useRef(void 0),x=k.useRef(null),S=k.useRef(null),A=e==="controlled"&&o!==void 0,D=A?o:N,F=k.useCallback(E=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{u.onChange&&E.length>=M&&u.onChange(E)},j)},[u.onChange,j,M]),T=k.useCallback(E=>{const Y=E.target.value;A||w(Y),e!=="form"&&F(Y)},[A,e,F]),L=k.useCallback(E=>{const Y=D.trim(),P={query:Y,timestamp:Date.now(),formData:new FormData(E.currentTarget)};e==="controlled"||e==="hybrid"&&C?(E.preventDefault(),u.onSearch&&Y.length>=M&&u.onSearch(P)):e==="hybrid"&&u.onSearch&&Y.length>=M&&u.onSearch(P)},[e,D,u.onSearch,C,M]),$=k.useCallback(()=>{I(!0),u.onFocus?.()},[u.onFocus]),O=k.useCallback(()=>{I(!1),u.onBlur?.()},[u.onBlur]),J=k.useCallback(()=>{A||w(""),u.onClear?.(),S.current?.focus()},[A,u.onClear]);k.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const ee=()=>r.jsx("svg",{className:Ce("nhsuk-icon nhsuk-icon__search",{"nhsuk-icon__search--loading":f}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:r.jsx("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"})}),ae=()=>r.jsx("svg",{className:"nhsuk-icon nhsuk-icon__spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:r.jsxs("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[r.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"}),r.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416",repeatCount:"indefinite"})]})}),R=()=>!D||e==="form"?null:r.jsx("button",{type:"button",className:"nhsuk-header__search-clear",onClick:J,"aria-label":"Clear search",children:r.jsx("svg",{className:"nhsuk-icon nhsuk-icon__close",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:r.jsx("path",{d:"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z"})})}),B=()=>!h||!p.length||!_?null:r.jsx("div",{className:"nhsuk-header__search-results",role:"listbox",children:p.map(E=>r.jsx("div",{className:"nhsuk-header__search-result",role:"option",children:E.href?r.jsxs("a",{href:E.href,className:"nhsuk-header__search-result-link",children:[r.jsx("span",{className:"nhsuk-header__search-result-title",children:E.title}),E.description&&r.jsx("span",{className:"nhsuk-header__search-result-description",children:E.description})]}):r.jsxs("button",{type:"button",className:"nhsuk-header__search-result-button",onClick:()=>u.onSearch?.({query:E.title,timestamp:Date.now()}),children:[r.jsx("span",{className:"nhsuk-header__search-result-title",children:E.title}),E.description&&r.jsx("span",{className:"nhsuk-header__search-result-description",children:E.description})]})},E.id))});return r.jsxs("div",{className:Ce("nhsuk-header__search",c,{"nhsuk-header__search--controlled":e==="controlled","nhsuk-header__search--hybrid":e==="hybrid","nhsuk-header__search--loading":f,"nhsuk-header__search--focused":_,"nhsuk-header__search--has-results":h&&p.length>0}),children:[r.jsxs("form",{ref:x,className:"nhsuk-header__search-form",id:"search",action:e!=="controlled"?t:void 0,method:e!=="controlled"?n:void 0,role:"search",onSubmit:L,...y,children:[r.jsx("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field",children:i}),r.jsxs("div",{className:"nhsuk-header__search-input-wrapper",children:[r.jsx("input",{ref:S,className:"nhsuk-header__search-input nhsuk-input",id:"search-field",name:e!=="controlled"?a:void 0,type:"search",placeholder:s,autoComplete:"off",value:D,onChange:T,onFocus:$,onBlur:O,disabled:d||f,...h&&p.length>0?{"aria-expanded":!0,"aria-haspopup":"listbox"}:{},...m}),R()]}),r.jsxs("button",{className:"nhsuk-header__search-submit",type:"submit",disabled:d||f||e!=="form"&&D.length<M,...g,children:[f?ae():ee(),r.jsx("span",{className:"nhsuk-u-visually-hidden",children:f?"Searching...":l})]})]}),B()]})},Xr=({className:e,logo:t={},service:n={},organisation:a,search:o,account:s,navigation:i,containerClasses:l,variant:c="default",attributes:d={},...u})=>{const[f,h]=k.useState(!1),[p,y]=k.useState(!1),[m,g]=k.useState(i?.items?.length||0),[C,j]=k.useState(!1),[M,N]=k.useState(!1),w=k.useRef(null),_=k.useRef(null),I=k.useRef(!1);k.useEffect(()=>{typeof window>"u"||N(!0)},[]),k.useEffect(()=>{if(typeof document>"u")return;const D=F=>{F.key==="Escape"&&f&&h(!1)};if(f)return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[f]);const v=k.useRef(null),x=k.useCallback(()=>{if(!M||!i?.items||i.items.length===0||I.current)return;const D=w.current,F=_.current;if(!D||!F)return;I.current=!0,D.classList.add("nhsuk-header__navigation-container--measuring");const T=D.clientWidth,L=Array.from(F.children);if(!L.length){D.classList.remove("nhsuk-header__navigation-container--measuring"),I.current=!1;return}if(v.current==null){const P=document.createElement("button");P.type="button",P.className="nhsuk-header__navigation-button nhsuk-header__navigation-button--prototype",P.style.position="absolute",P.style.visibility="hidden",P.style.pointerEvents="none",P.innerHTML="<span>More</span>",D.appendChild(P),v.current=P.getBoundingClientRect().width||104,D.removeChild(P)}const $=v.current+16;let O=0,J=0;const ee=window.getComputedStyle(D),ae=parseFloat(ee.paddingLeft)||0,R=parseFloat(ee.paddingRight)||0;let B=ae+R;for(const P of L){const W=P.getBoundingClientRect().width;if(O+W+$+B>T)break;O+=W,J+=1}const E=J<i.items.length,Y=E?J:i.items.length;y(P=>P===E?P:E),g(P=>P===Y?P:Y),D.classList.remove("nhsuk-header__navigation-container--measuring"),I.current=!1},[M,i?.items]);k.useEffect(()=>{if(!M)return;const D=w.current;if(!D)return;let F=null;const T=()=>{F==null&&(F=window.requestAnimationFrame(()=>{F=null,x()}))};x();const L=new ResizeObserver(()=>T());return L.observe(D),_.current&&L.observe(_.current),()=>{F!=null&&window.cancelAnimationFrame(F),L.disconnect()}},[M,x]),k.useEffect(()=>{M&&x()},[i?.items?.length,M,x]);const S=D=>{D&&(D.preventDefault(),D.stopPropagation());const F=!f;h(F),j(F)},A=(()=>{try{return Xi()}catch{return}})();return Mm({className:e,logo:t,service:n,organisation:a,search:o,account:s,navigation:i,containerClasses:l,variant:c,attributes:d,...u},{variant:"client",isClient:M,menuOpen:f,showMoreButton:p,visibleItems:m,dropdownVisible:C,toggleMenu:S,navContainerRef:w,navListRef:_,searchNode:o?r.jsx(Ki,{...o}):null,brand:A?.brand})};function Dm(e,{isClient:t,brand:n}){const{className:a,logo:o={},service:s={},serviceName:i,organisation:l,account:c,navigation:d,containerClasses:u,variant:f="default",attributes:h={},maxVisibleItems:p,responsiveNavigation:y=!0,logoVariant:m=Jr.Full,...g}=e;"maxVisibleItems"in g&&delete g.maxVisibleItems;const C={...s,text:s?.text??i},j=C.href&&!o.href||C.href&&C.href===o.href,M=j?C.href:o.href,N=Ce("nhsuk-header",{"nhsuk-header--organisation":f==="organisation"||l,"nhsuk-header--white":f==="white"},a),w=Ce("nhsuk-header__container",u),_=Ce("nhsuk-header__navigation",{"nhsuk-header__navigation--white":d?.white,"nhsuk-header__navigation--justified":d?.justified},d?.className),I=n==="fdp"?"fdp":"nhs",v=()=>r.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":o.ariaLabel||"NHS",children:[r.jsx("title",{children:o.ariaLabel||"NHS"}),r.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),x=()=>{if(o.src)return r.jsx("img",{className:"nhsuk-header__organisation-logo",src:o.src,width:"280",alt:o.ariaLabel||(I==="fdp"?"FDP":"NHS")});if(I==="fdp"){const T=wo(qr.FDP,m);if(T?.src)return r.jsx("img",{className:"nhsuk-header__organisation-logo",src:T.src,"data-logo-variant":m,width:"280",alt:T.ariaLabel||"FDP"})}return v()},S=()=>l?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"nhsuk-header__organisation-name",children:[l.name,l.split&&r.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",l.split]})]}),l.descriptor&&r.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:l.descriptor})]}):null,A=(T,L)=>T?L?r.jsx("a",{className:"nhsuk-header__service-name",href:L,children:T}):r.jsx("span",{className:"nhsuk-header__service-name",children:T}):null,D=T=>T.active||T.current?r.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:T.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:T.html}}):T.text}):T.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:T.html}}):T.text;return r.jsx(r.Fragment,{children:r.jsxs("header",{className:N,role:"banner","data-module":"nhsuk-header",...h,...g,children:[r.jsxs("div",{className:w,children:[r.jsxs("div",{className:"nhsuk-header__service",children:[M?r.jsxs("a",{className:"nhsuk-header__service-logo",href:M,children:[x(),S(),j&&A(C.text)]}):r.jsxs(r.Fragment,{children:[x(),S(),j&&A(C.text)]}),C.text&&!j&&A(C.text,C.href)]}),r.jsx(ho,{...c,variant:f==="white"?"white":"default"})]}),d&&d.items&&d.items.length>0&&r.jsx("nav",{className:_,"aria-label":d.ariaLabel||"Menu","data-ssr-hydrating":"true",children:r.jsx("div",{className:Ce("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--ssr":!t},u),children:r.jsx("ul",{className:"nhsuk-header__navigation-list",children:d.items.map((T,L)=>r.jsx("li",{className:Ce("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":T.active||T.current},T.className),...T.attributes||{},children:r.jsx("a",{className:"nhsuk-header__navigation-link",href:T.href,...T.active||T.current?{"aria-current":T.current?"page":"true"}:{},children:D(T)})},L))})})}),!1]})})}const Tm=e=>{const t=e.attributes?.["data-brand"];return Dm(e,{isClient:!1,brand:t==="fdp"||t==="nhs"?t:void 0})},Qi=({heading:e,headingLevel:t=1,headingClasses:n="",text:a,html:o,imageURL:s,containerClasses:i="",classes:l="",children:c,...d})=>{const u=["nhsuk-hero",s&&e?"nhsuk-hero--image nhsuk-hero--image-description":"",s&&!e?"nhsuk-hero--image":"",l].filter(Boolean).join(" "),f=["nhsuk-width-container",i,s?"":"nhsuk-hero--border"].filter(Boolean).join(" "),h=["nhsuk-hero__heading",n,!c&&!a&&!o?"nhsuk-u-margin-bottom-0":""].filter(Boolean).join(" "),p=c||e||a||o,y=()=>{if(!e)return null;const m={className:h};switch(t){case 1:return r.jsx("h1",{...m,children:e});case 2:return r.jsx("h2",{...m,children:e});case 3:return r.jsx("h3",{...m,children:e});case 4:return r.jsx("h4",{...m,children:e});case 5:return r.jsx("h5",{...m,children:e});case 6:return r.jsx("h6",{...m,children:e});default:return r.jsx("h1",{...m,children:e})}};return r.jsxs("section",{className:u,style:s?{backgroundImage:`url('${s}')`}:void 0,role:"banner",...d,children:[s&&r.jsx("div",{className:"nhsuk-hero__overlay",children:p&&r.jsx("div",{className:f,children:r.jsx("div",{className:"nhsuk-grid-row",children:r.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:r.jsxs("div",{className:"nhsuk-hero-content",children:[y(),c||(o?r.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):a?r.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:a}):null),r.jsx("span",{className:"nhsuk-hero__arrow","aria-hidden":"true"})]})})})})}),!s&&p&&r.jsx("div",{className:f,children:r.jsx("div",{className:"nhsuk-grid-row",children:r.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:r.jsxs("div",{className:"nhsuk-hero__wrapper",children:[y(),c||(o?r.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):a?r.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:a}):null)]})})})})]})};Qi.displayName="Hero";const _o=({className:e,links:t=[],linksColumn2:n,linksColumn3:a,metaLinks:o,copyright:s="Â© NHS England",containerClasses:i,attributes:l={},style:c,footerStyle:d,containerStyle:u})=>{const f=(p,y=!1)=>r.jsx("li",{className:Ce("nhsuk-footer__list-item",{"nhsuk-footer-default__list-item":y}),children:r.jsx("a",{className:"nhsuk-footer__list-item-link",href:p.URL,target:p.newWindow?"_blank":void 0,rel:p.newWindow?"noopener noreferrer":void 0,children:p.label})},`${p.URL}-${p.label}`),h=!!(n||a);return r.jsx("footer",{role:"contentinfo",...l,style:{...l?.style,...c},children:r.jsxs("div",{className:"nhsuk-footer-container",children:[r.jsxs("div",{className:Ce("nhsuk-width-container",i),style:u,children:[r.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Support links"}),r.jsx("div",{className:Ce("nhsuk-footer",e),style:d,children:h?r.jsxs(r.Fragment,{children:[t.length>0&&r.jsx("ul",{className:"nhsuk-footer__list",children:t.map(p=>f(p))}),n&&n.length>0&&r.jsx("ul",{className:"nhsuk-footer__list",children:n.map(p=>f(p))}),a&&a.length>0&&r.jsx("ul",{className:"nhsuk-footer__list",children:a.map(p=>f(p))}),o&&o.length>0&&r.jsx("ul",{className:"nhsuk-footer__list nhsuk-footer__meta",children:o.map(p=>f(p))})]}):r.jsxs("ul",{className:"nhsuk-footer__list",children:[t.map(p=>f(p,!0)),(n||[]).map(p=>f(p,!0)),(a||[]).map(p=>f(p,!0)),(o||[]).map(p=>f(p,!0))]})}),!h&&r.jsx("div",{children:r.jsx("p",{className:"nhsuk-footer__copyright",children:s})})]}),h&&r.jsx("div",{className:"nhsuk-width-container",children:r.jsx("div",{children:r.jsx("p",{className:"nhsuk-footer__copyright",children:s})})})]})})};function Kr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Lm(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ko(e){let t,n,a;e.length!==2?(t=Kr,n=(l,c)=>Kr(e(l),c),a=(l,c)=>e(l)-c):(t=e===Kr||e===Lm?e:Am,n=e,a=e);function o(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;n(l[f],c)<0?d=f+1:u=f}while(d<u)}return d}function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;n(l[f],c)<=0?d=f+1:u=f}while(d<u)}return d}function i(l,c,d=0,u=l.length){const f=o(l,c,d,u-1);return f>d&&a(l[f-1],c)>-a(l[f],c)?f-1:f}return{left:o,center:i,right:s}}function Am(){return 0}function Em(e){return e===null?NaN:+e}const $m=ko(Kr).right;ko(Em).center;function el(e,t){let n,a;if(t===void 0)for(const o of e)o!=null&&(n===void 0?o>=o&&(n=a=o):(n>o&&(n=o),a<o&&(a=o)));else{let o=-1;for(let s of e)(s=t(s,++o,e))!=null&&(n===void 0?s>=s&&(n=a=s):(n>s&&(n=s),a<s&&(a=s)))}return[n,a]}class tl extends Map{constructor(t,n=Bm){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,o]of t)this.set(a,o)}get(t){return super.get(nl(this,t))}has(t){return super.has(nl(this,t))}set(t,n){return super.set(Fm(this,t),n)}delete(t){return super.delete(Pm(this,t))}}function nl({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function Fm({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function Pm({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function Bm(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Hm=Math.sqrt(50),zm=Math.sqrt(10),Rm=Math.sqrt(2);function Qr(e,t,n){const a=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(a)),s=a/Math.pow(10,o),i=s>=Hm?10:s>=zm?5:s>=Rm?2:1;let l,c,d;return o<0?(d=Math.pow(10,-o)/i,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,o)*i,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?Qr(e,t,n*2):[l,c,d]}function Om(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[o,s,i]=a?Qr(t,e,n):Qr(e,t,n);if(!(s>=o))return[];const l=s-o+1,c=new Array(l);if(a)if(i<0)for(let d=0;d<l;++d)c[d]=(s-d)/-i;else for(let d=0;d<l;++d)c[d]=(s-d)*i;else if(i<0)for(let d=0;d<l;++d)c[d]=(o+d)/-i;else for(let d=0;d<l;++d)c[d]=(o+d)*i;return c}function Co(e,t,n){return t=+t,e=+e,n=+n,Qr(e,t,n)[2]}function No(e,t,n){t=+t,e=+e,n=+n;const a=t<e,o=a?Co(t,e,n):Co(e,t,n);return(a?-1:1)*(o<0?1/-o:o)}function Um(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var a=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(o);++a<o;)s[a]=e+a*n;return s}function ea(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const rl=Symbol("implicit");function al(){var e=new tl,t=[],n=[],a=rl;function o(s){let i=e.get(s);if(i===void 0){if(a!==rl)return a;e.set(s,i=t.push(s)-1)}return n[i%n.length]}return o.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new tl;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return o},o.range=function(s){return arguments.length?(n=Array.from(s),o):n.slice()},o.unknown=function(s){return arguments.length?(a=s,o):a},o.copy=function(){return al(t,n).unknown(a)},ea.apply(o,arguments),o}function ol(){var e=al().unknown(void 0),t=e.domain,n=e.range,a=0,o=1,s,i,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var h=t().length,p=o<a,y=p?o:a,m=p?a:o;s=(m-y)/Math.max(1,h-c+d*2),l&&(s=Math.floor(s)),y+=(m-y-s*(h-c))*u,i=s*(1-c),l&&(y=Math.round(y),i=Math.round(i));var g=Um(h).map(function(C){return y+s*C});return n(p?g.reverse():g)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([a,o]=h,a=+a,o=+o,f()):[a,o]},e.rangeRound=function(h){return[a,o]=h,a=+a,o=+o,l=!0,f()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(d=+h,f()):d},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return ol(t(),[a,o]).round(l).paddingInner(c).paddingOuter(d).align(u)},ea.apply(f(),arguments)}function jo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function sl(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Gn(){}var Vn=.7,ta=1/Vn,kn="\\s*([+-]?\\d+)\\s*",Yn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wm=/^#([0-9a-f]{3,8})$/,Gm=new RegExp(`^rgb\\(${kn},${kn},${kn}\\)$`),Vm=new RegExp(`^rgb\\(${Dt},${Dt},${Dt}\\)$`),Ym=new RegExp(`^rgba\\(${kn},${kn},${kn},${Yn}\\)$`),Zm=new RegExp(`^rgba\\(${Dt},${Dt},${Dt},${Yn}\\)$`),qm=new RegExp(`^hsl\\(${Yn},${Dt},${Dt}\\)$`),Jm=new RegExp(`^hsla\\(${Yn},${Dt},${Dt},${Yn}\\)$`),il={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jo(Gn,Zn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ll,formatHex:ll,formatHex8:Xm,formatHsl:Km,formatRgb:cl,toString:cl});function ll(){return this.rgb().formatHex()}function Xm(){return this.rgb().formatHex8()}function Km(){return pl(this).formatHsl()}function cl(){return this.rgb().formatRgb()}function Zn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Wm.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?dl(t):n===3?new wt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?na(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?na(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Gm.exec(e))?new wt(t[1],t[2],t[3],1):(t=Vm.exec(e))?new wt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ym.exec(e))?na(t[1],t[2],t[3],t[4]):(t=Zm.exec(e))?na(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qm.exec(e))?hl(t[1],t[2]/100,t[3]/100,1):(t=Jm.exec(e))?hl(t[1],t[2]/100,t[3]/100,t[4]):il.hasOwnProperty(e)?dl(il[e]):e==="transparent"?new wt(NaN,NaN,NaN,0):null}function dl(e){return new wt(e>>16&255,e>>8&255,e&255,1)}function na(e,t,n,a){return a<=0&&(e=t=n=NaN),new wt(e,t,n,a)}function Qm(e){return e instanceof Gn||(e=Zn(e)),e?(e=e.rgb(),new wt(e.r,e.g,e.b,e.opacity)):new wt}function Mo(e,t,n,a){return arguments.length===1?Qm(e):new wt(e,t,n,a??1)}function wt(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}jo(wt,Mo,sl(Gn,{brighter(e){return e=e==null?ta:Math.pow(ta,e),new wt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vn:Math.pow(Vn,e),new wt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wt(cn(this.r),cn(this.g),cn(this.b),ra(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ul,formatHex:ul,formatHex8:eg,formatRgb:fl,toString:fl}));function ul(){return`#${dn(this.r)}${dn(this.g)}${dn(this.b)}`}function eg(){return`#${dn(this.r)}${dn(this.g)}${dn(this.b)}${dn((isNaN(this.opacity)?1:this.opacity)*255)}`}function fl(){const e=ra(this.opacity);return`${e===1?"rgb(":"rgba("}${cn(this.r)}, ${cn(this.g)}, ${cn(this.b)}${e===1?")":`, ${e})`}`}function ra(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dn(e){return e=cn(e),(e<16?"0":"")+e.toString(16)}function hl(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new jt(e,t,n,a)}function pl(e){if(e instanceof jt)return new jt(e.h,e.s,e.l,e.opacity);if(e instanceof Gn||(e=Zn(e)),!e)return new jt;if(e instanceof jt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,o=Math.min(t,n,a),s=Math.max(t,n,a),i=NaN,l=s-o,c=(s+o)/2;return l?(t===s?i=(n-a)/l+(n<a)*6:n===s?i=(a-t)/l+2:i=(t-n)/l+4,l/=c<.5?s+o:2-s-o,i*=60):l=c>0&&c<1?0:i,new jt(i,l,c,e.opacity)}function tg(e,t,n,a){return arguments.length===1?pl(e):new jt(e,t,n,a??1)}function jt(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}jo(jt,tg,sl(Gn,{brighter(e){return e=e==null?ta:Math.pow(ta,e),new jt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vn:Math.pow(Vn,e),new jt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,o=2*n-a;return new wt(Io(e>=240?e-240:e+120,o,a),Io(e,o,a),Io(e<120?e+240:e-120,o,a),this.opacity)},clamp(){return new jt(ml(this.h),aa(this.s),aa(this.l),ra(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ra(this.opacity);return`${e===1?"hsl(":"hsla("}${ml(this.h)}, ${aa(this.s)*100}%, ${aa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ml(e){return e=(e||0)%360,e<0?e+360:e}function aa(e){return Math.max(0,Math.min(1,e||0))}function Io(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Do=e=>()=>e;function ng(e,t){return function(n){return e+n*t}}function rg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function ag(e){return(e=+e)==1?gl:function(t,n){return n-t?rg(t,n,e):Do(isNaN(t)?n:t)}}function gl(e,t){var n=t-e;return n?ng(e,n):Do(isNaN(e)?t:e)}const bl=(function e(t){var n=ag(t);function a(o,s){var i=n((o=Mo(o)).r,(s=Mo(s)).r),l=n(o.g,s.g),c=n(o.b,s.b),d=gl(o.opacity,s.opacity);return function(u){return o.r=i(u),o.g=l(u),o.b=c(u),o.opacity=d(u),o+""}}return a.gamma=e,a})(1);function og(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),o;return function(s){for(o=0;o<n;++o)a[o]=e[o]*(1-s)+t[o]*s;return a}}function sg(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ig(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,o=new Array(a),s=new Array(n),i;for(i=0;i<a;++i)o[i]=Ao(e[i],t[i]);for(;i<n;++i)s[i]=t[i];return function(l){for(i=0;i<a;++i)s[i]=o[i](l);return s}}function lg(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function oa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function cg(e,t){var n={},a={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Ao(e[o],t[o]):a[o]=t[o];return function(s){for(o in n)a[o]=n[o](s);return a}}var To=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lo=new RegExp(To.source,"g");function dg(e){return function(){return e}}function ug(e){return function(t){return e(t)+""}}function fg(e,t){var n=To.lastIndex=Lo.lastIndex=0,a,o,s,i=-1,l=[],c=[];for(e=e+"",t=t+"";(a=To.exec(e))&&(o=Lo.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),l[i]?l[i]+=s:l[++i]=s),(a=a[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,c.push({i,x:oa(a,o)})),n=Lo.lastIndex;return n<t.length&&(s=t.slice(n),l[i]?l[i]+=s:l[++i]=s),l.length<2?c[0]?ug(c[0].x):dg(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function Ao(e,t){var n=typeof t,a;return t==null||n==="boolean"?Do(t):(n==="number"?oa:n==="string"?(a=Zn(t))?(t=a,bl):fg:t instanceof Zn?bl:t instanceof Date?lg:sg(t)?og:Array.isArray(t)?ig:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?cg:oa)(e,t)}function hg(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function pg(e){return function(){return e}}function mg(e){return+e}var yl=[0,1];function Cn(e){return e}function Eo(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:pg(isNaN(t)?NaN:.5)}function gg(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function bg(e,t,n){var a=e[0],o=e[1],s=t[0],i=t[1];return o<a?(a=Eo(o,a),s=n(i,s)):(a=Eo(a,o),s=n(s,i)),function(l){return s(a(l))}}function yg(e,t,n){var a=Math.min(e.length,t.length)-1,o=new Array(a),s=new Array(a),i=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<a;)o[i]=Eo(e[i],e[i+1]),s[i]=n(t[i],t[i+1]);return function(l){var c=$m(e,l,1,a)-1;return s[c](o[c](l))}}function xl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function xg(){var e=yl,t=yl,n=Ao,a,o,s,i=Cn,l,c,d;function u(){var h=Math.min(e.length,t.length);return i!==Cn&&(i=gg(e[0],e[h-1])),l=h>2?yg:bg,c=d=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(a),t,n)))(a(i(h)))}return f.invert=function(h){return i(o((d||(d=l(t,e.map(a),oa)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,mg),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=hg,u()},f.clamp=function(h){return arguments.length?(i=h?!0:Cn,u()):i!==Cn},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return a=h,o=p,u()}}function vl(){return xg()(Cn,Cn)}function vg(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function sa(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function Nn(e){return e=sa(Math.abs(e)),e?e[1]:NaN}function wg(e,t){return function(n,a){for(var o=n.length,s=[],i=0,l=e[0],c=0;o>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),s.push(n.substring(o-=l,o+l)),!((c+=l+1)>a));)l=e[i=(i+1)%e.length];return s.reverse().join(t)}}function Sg(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var _g=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ia(e){if(!(t=_g.exec(e)))throw new Error("invalid format: "+e);var t;return new $o({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ia.prototype=$o.prototype;function $o(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}$o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kg(e){e:for(var t=e.length,n=1,a=-1,o;n<t;++n)switch(e[n]){case".":a=o=n;break;case"0":a===0&&(a=n),o=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(o+1):e}var wl;function Cg(e,t){var n=sa(e,t);if(!n)return e+"";var a=n[0],o=n[1],s=o-(wl=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=a.length;return s===i?a:s>i?a+new Array(s-i+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+sa(e,Math.max(0,t+s-1))[0]}function Sl(e,t){var n=sa(e,t);if(!n)return e+"";var a=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+a:a.length>o+1?a.slice(0,o+1)+"."+a.slice(o+1):a+new Array(o-a.length+2).join("0")}const _l={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:vg,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Sl(e*100,t),r:Sl,s:Cg,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function kl(e){return e}var Cl=Array.prototype.map,Nl=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Ng(e){var t=e.grouping===void 0||e.thousands===void 0?kl:wg(Cl.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?kl:Sg(Cl.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"âˆ’":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=ia(f);var h=f.fill,p=f.align,y=f.sign,m=f.symbol,g=f.zero,C=f.width,j=f.comma,M=f.precision,N=f.trim,w=f.type;w==="n"?(j=!0,w="g"):_l[w]||(M===void 0&&(M=12),N=!0,w="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var _=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",I=m==="$"?a:/[%p]/.test(w)?i:"",v=_l[w],x=/[defgprs%]/.test(w);M=M===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function S(A){var D=_,F=I,T,L,$;if(w==="c")F=v(A)+F,A="";else{A=+A;var O=A<0||1/A<0;if(A=isNaN(A)?c:v(Math.abs(A),M),N&&(A=kg(A)),O&&+A==0&&y!=="+"&&(O=!1),D=(O?y==="("?y:l:y==="-"||y==="("?"":y)+D,F=(w==="s"?Nl[8+wl/3]:"")+F+(O&&y==="("?")":""),x){for(T=-1,L=A.length;++T<L;)if($=A.charCodeAt(T),48>$||$>57){F=($===46?o+A.slice(T+1):A.slice(T))+F,A=A.slice(0,T);break}}}j&&!g&&(A=t(A,1/0));var J=D.length+A.length+F.length,ee=J<C?new Array(C-J+1).join(h):"";switch(j&&g&&(A=t(ee+A,ee.length?C-F.length:1/0),ee=""),p){case"<":A=D+A+F+ee;break;case"=":A=D+ee+A+F;break;case"^":A=ee.slice(0,J=ee.length>>1)+D+A+F+ee.slice(J);break;default:A=ee+D+A+F;break}return s(A)}return S.toString=function(){return f+""},S}function u(f,h){var p=d((f=ia(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Nn(h)/3)))*3,m=Math.pow(10,-y),g=Nl[8+y/3];return function(C){return p(m*C)+g}}return{format:d,formatPrefix:u}}var la,jl,Ml;jg({thousands:",",grouping:[3],currency:["$",""]});function jg(e){return la=Ng(e),jl=la.format,Ml=la.formatPrefix,la}function Mg(e){return Math.max(0,-Nn(Math.abs(e)))}function Ig(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nn(t)/3)))*3-Nn(Math.abs(e)))}function Dg(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Nn(t)-Nn(e))+1}function Tg(e,t,n,a){var o=No(e,t,n),s;switch(a=ia(a??",f"),a.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(s=Ig(o,i))&&(a.precision=s),Ml(a,i)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(s=Dg(o,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=s-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(s=Mg(o))&&(a.precision=s-(a.type==="%")*2);break}}return jl(a)}function Lg(e){var t=e.domain;return e.ticks=function(n){var a=t();return Om(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var o=t();return Tg(o[0],o[o.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),o=0,s=a.length-1,i=a[o],l=a[s],c,d,u=10;for(l<i&&(d=i,i=l,l=d,d=o,o=s,s=d);u-- >0;){if(d=Co(i,l,n),d===c)return a[o]=i,a[s]=l,t(a);if(d>0)i=Math.floor(i/d)*d,l=Math.ceil(l/d)*d;else if(d<0)i=Math.ceil(i*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function ca(){var e=vl();return e.copy=function(){return xl(e,ca())},ea.apply(e,arguments),Lg(e)}function Ag(e,t){e=e.slice();var n=0,a=e.length-1,o=e[n],s=e[a],i;return s<o&&(i=n,n=a,a=i,i=o,o=s,s=i),e[n]=t.floor(o),e[a]=t.ceil(s),e}const Fo=new Date,Po=new Date;function ht(e,t,n,a){function o(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return o.floor=s=>(e(s=new Date(+s)),s),o.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),o.round=s=>{const i=o(s),l=o.ceil(s);return s-i<l-s?i:l},o.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),o.range=(s,i,l)=>{const c=[];if(s=o.ceil(s),l=l==null?1:Math.floor(l),!(s<i)||!(l>0))return c;let d;do c.push(d=new Date(+s)),t(s,l),e(s);while(d<s&&s<i);return c},o.filter=s=>ht(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;t(i,-1),!s(i););else for(;--l>=0;)for(;t(i,1),!s(i););}),n&&(o.count=(s,i)=>(Fo.setTime(+s),Po.setTime(+i),e(Fo),e(Po),Math.floor(n(Fo,Po))),o.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?o.filter(a?i=>a(i)%s===0:i=>o.count(0,i)%s===0):o)),o}const da=ht(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);da.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ht(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):da),da.range;const qt=1e3,Ct=qt*60,Jt=Ct*60,Xt=Jt*24,Bo=Xt*7,Il=Xt*30,Ho=Xt*365,jn=ht(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*qt)},(e,t)=>(t-e)/qt,e=>e.getUTCSeconds());jn.range;const zo=ht(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qt)},(e,t)=>{e.setTime(+e+t*Ct)},(e,t)=>(t-e)/Ct,e=>e.getMinutes());zo.range,ht(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ct)},(e,t)=>(t-e)/Ct,e=>e.getUTCMinutes()).range;const Ro=ht(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qt-e.getMinutes()*Ct)},(e,t)=>{e.setTime(+e+t*Jt)},(e,t)=>(t-e)/Jt,e=>e.getHours());Ro.range,ht(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Jt)},(e,t)=>(t-e)/Jt,e=>e.getUTCHours()).range;const qn=ht(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ct)/Xt,e=>e.getDate()-1);qn.range;const Oo=ht(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xt,e=>e.getUTCDate()-1);Oo.range,ht(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xt,e=>Math.floor(e/Xt)).range;function un(e){return ht(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ct)/Bo)}const ua=un(0),fa=un(1),Eg=un(2),$g=un(3),Mn=un(4),Fg=un(5),Pg=un(6);ua.range,fa.range,Eg.range,$g.range,Mn.range,Fg.range,Pg.range;function fn(e){return ht(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Bo)}const Dl=fn(0),ha=fn(1),Bg=fn(2),Hg=fn(3),In=fn(4),zg=fn(5),Rg=fn(6);Dl.range,ha.range,Bg.range,Hg.range,In.range,zg.range,Rg.range;const Jn=ht(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Jn.range,ht(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()).range;const Kt=ht(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Kt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ht(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),Kt.range;const hn=ht(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());hn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ht(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),hn.range;function Og(e,t,n,a,o,s){const i=[[jn,1,qt],[jn,5,5*qt],[jn,15,15*qt],[jn,30,30*qt],[s,1,Ct],[s,5,5*Ct],[s,15,15*Ct],[s,30,30*Ct],[o,1,Jt],[o,3,3*Jt],[o,6,6*Jt],[o,12,12*Jt],[a,1,Xt],[a,2,2*Xt],[n,1,Bo],[t,1,Il],[t,3,3*Il],[e,1,Ho]];function l(d,u,f){const h=u<d;h&&([d,u]=[u,d]);const p=f&&typeof f.range=="function"?f:c(d,u,f),y=p?p.range(d,+u+1):[];return h?y.reverse():y}function c(d,u,f){const h=Math.abs(u-d)/f,p=ko(([,,g])=>g).right(i,h);if(p===i.length)return e.every(No(d/Ho,u/Ho,f));if(p===0)return da.every(Math.max(No(d,u,f),1));const[y,m]=i[h/i[p-1][2]<i[p][2]/h?p-1:p];return y.every(m)}return[l,c]}const[Ug,Wg]=Og(Kt,Jn,ua,qn,Ro,zo);function Uo(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Wo(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Xn(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Gg(e){var t=e.dateTime,n=e.date,a=e.time,o=e.periods,s=e.days,i=e.shortDays,l=e.months,c=e.shortMonths,d=Kn(o),u=Qn(o),f=Kn(s),h=Qn(s),p=Kn(i),y=Qn(i),m=Kn(l),g=Qn(l),C=Kn(c),j=Qn(c),M={a:O,A:J,b:ee,B:ae,c:null,d:Fl,e:Fl,f:p0,g:k0,G:N0,H:u0,I:f0,j:h0,L:Pl,m:m0,M:g0,p:R,q:B,Q:Ul,s:Wl,S:b0,u:y0,U:x0,V:v0,w:w0,W:S0,x:null,X:null,y:_0,Y:C0,Z:j0,"%":Ol},N={a:E,A:Y,b:P,B:W,c:null,d:Hl,e:Hl,f:T0,g:R0,G:U0,H:M0,I:I0,j:D0,L:zl,m:L0,M:A0,p:H,q:Q,Q:Ul,s:Wl,S:E0,u:$0,U:F0,V:P0,w:B0,W:H0,x:null,X:null,y:z0,Y:O0,Z:W0,"%":Ol},w={a:S,A,b:D,B:F,c:T,d:El,e:El,f:i0,g:Al,G:Ll,H:$l,I:$l,j:r0,L:s0,m:n0,M:a0,p:x,q:t0,Q:c0,s:d0,S:o0,u:Jg,U:Xg,V:Kg,w:qg,W:Qg,x:L,X:$,y:Al,Y:Ll,Z:e0,"%":l0};M.x=_(n,M),M.X=_(a,M),M.c=_(t,M),N.x=_(n,N),N.X=_(a,N),N.c=_(t,N);function _(q,te){return function(fe){var Z=[],se=-1,de=0,ve=q.length,me,De,Ge;for(fe instanceof Date||(fe=new Date(+fe));++se<ve;)q.charCodeAt(se)===37&&(Z.push(q.slice(de,se)),(De=Tl[me=q.charAt(++se)])!=null?me=q.charAt(++se):De=me==="e"?" ":"0",(Ge=te[me])&&(me=Ge(fe,De)),Z.push(me),de=se+1);return Z.push(q.slice(de,se)),Z.join("")}}function I(q,te){return function(fe){var Z=Xn(1900,void 0,1),se=v(Z,q,fe+="",0),de,ve;if(se!=fe.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(te&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(de=Wo(Xn(Z.y,0,1)),ve=de.getUTCDay(),de=ve>4||ve===0?ha.ceil(de):ha(de),de=Oo.offset(de,(Z.V-1)*7),Z.y=de.getUTCFullYear(),Z.m=de.getUTCMonth(),Z.d=de.getUTCDate()+(Z.w+6)%7):(de=Uo(Xn(Z.y,0,1)),ve=de.getDay(),de=ve>4||ve===0?fa.ceil(de):fa(de),de=qn.offset(de,(Z.V-1)*7),Z.y=de.getFullYear(),Z.m=de.getMonth(),Z.d=de.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),ve="Z"in Z?Wo(Xn(Z.y,0,1)).getUTCDay():Uo(Xn(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(ve+5)%7:Z.w+Z.U*7-(ve+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,Wo(Z)):Uo(Z)}}function v(q,te,fe,Z){for(var se=0,de=te.length,ve=fe.length,me,De;se<de;){if(Z>=ve)return-1;if(me=te.charCodeAt(se++),me===37){if(me=te.charAt(se++),De=w[me in Tl?te.charAt(se++):me],!De||(Z=De(q,fe,Z))<0)return-1}else if(me!=fe.charCodeAt(Z++))return-1}return Z}function x(q,te,fe){var Z=d.exec(te.slice(fe));return Z?(q.p=u.get(Z[0].toLowerCase()),fe+Z[0].length):-1}function S(q,te,fe){var Z=p.exec(te.slice(fe));return Z?(q.w=y.get(Z[0].toLowerCase()),fe+Z[0].length):-1}function A(q,te,fe){var Z=f.exec(te.slice(fe));return Z?(q.w=h.get(Z[0].toLowerCase()),fe+Z[0].length):-1}function D(q,te,fe){var Z=C.exec(te.slice(fe));return Z?(q.m=j.get(Z[0].toLowerCase()),fe+Z[0].length):-1}function F(q,te,fe){var Z=m.exec(te.slice(fe));return Z?(q.m=g.get(Z[0].toLowerCase()),fe+Z[0].length):-1}function T(q,te,fe){return v(q,t,te,fe)}function L(q,te,fe){return v(q,n,te,fe)}function $(q,te,fe){return v(q,a,te,fe)}function O(q){return i[q.getDay()]}function J(q){return s[q.getDay()]}function ee(q){return c[q.getMonth()]}function ae(q){return l[q.getMonth()]}function R(q){return o[+(q.getHours()>=12)]}function B(q){return 1+~~(q.getMonth()/3)}function E(q){return i[q.getUTCDay()]}function Y(q){return s[q.getUTCDay()]}function P(q){return c[q.getUTCMonth()]}function W(q){return l[q.getUTCMonth()]}function H(q){return o[+(q.getUTCHours()>=12)]}function Q(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var te=_(q+="",M);return te.toString=function(){return q},te},parse:function(q){var te=I(q+="",!1);return te.toString=function(){return q},te},utcFormat:function(q){var te=_(q+="",N);return te.toString=function(){return q},te},utcParse:function(q){var te=I(q+="",!0);return te.toString=function(){return q},te}}}var Tl={"-":"",_:" ",0:"0"},mt=/^\s*\d+/,Vg=/^%/,Yg=/[\\^$*+?|[\]().{}]/g;function et(e,t,n){var a=e<0?"-":"",o=(a?-e:e)+"",s=o.length;return a+(s<n?new Array(n-s+1).join(t)+o:o)}function Zg(e){return e.replace(Yg,"\\$&")}function Kn(e){return new RegExp("^(?:"+e.map(Zg).join("|")+")","i")}function Qn(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function qg(e,t,n){var a=mt.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function Jg(e,t,n){var a=mt.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function Xg(e,t,n){var a=mt.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function Kg(e,t,n){var a=mt.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function Qg(e,t,n){var a=mt.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function Ll(e,t,n){var a=mt.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function Al(e,t,n){var a=mt.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function e0(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function t0(e,t,n){var a=mt.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function n0(e,t,n){var a=mt.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function El(e,t,n){var a=mt.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function r0(e,t,n){var a=mt.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function $l(e,t,n){var a=mt.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function a0(e,t,n){var a=mt.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function o0(e,t,n){var a=mt.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function s0(e,t,n){var a=mt.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function i0(e,t,n){var a=mt.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function l0(e,t,n){var a=Vg.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function c0(e,t,n){var a=mt.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function d0(e,t,n){var a=mt.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function Fl(e,t){return et(e.getDate(),t,2)}function u0(e,t){return et(e.getHours(),t,2)}function f0(e,t){return et(e.getHours()%12||12,t,2)}function h0(e,t){return et(1+qn.count(Kt(e),e),t,3)}function Pl(e,t){return et(e.getMilliseconds(),t,3)}function p0(e,t){return Pl(e,t)+"000"}function m0(e,t){return et(e.getMonth()+1,t,2)}function g0(e,t){return et(e.getMinutes(),t,2)}function b0(e,t){return et(e.getSeconds(),t,2)}function y0(e){var t=e.getDay();return t===0?7:t}function x0(e,t){return et(ua.count(Kt(e)-1,e),t,2)}function Bl(e){var t=e.getDay();return t>=4||t===0?Mn(e):Mn.ceil(e)}function v0(e,t){return e=Bl(e),et(Mn.count(Kt(e),e)+(Kt(e).getDay()===4),t,2)}function w0(e){return e.getDay()}function S0(e,t){return et(fa.count(Kt(e)-1,e),t,2)}function _0(e,t){return et(e.getFullYear()%100,t,2)}function k0(e,t){return e=Bl(e),et(e.getFullYear()%100,t,2)}function C0(e,t){return et(e.getFullYear()%1e4,t,4)}function N0(e,t){var n=e.getDay();return e=n>=4||n===0?Mn(e):Mn.ceil(e),et(e.getFullYear()%1e4,t,4)}function j0(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+et(t/60|0,"0",2)+et(t%60,"0",2)}function Hl(e,t){return et(e.getUTCDate(),t,2)}function M0(e,t){return et(e.getUTCHours(),t,2)}function I0(e,t){return et(e.getUTCHours()%12||12,t,2)}function D0(e,t){return et(1+Oo.count(hn(e),e),t,3)}function zl(e,t){return et(e.getUTCMilliseconds(),t,3)}function T0(e,t){return zl(e,t)+"000"}function L0(e,t){return et(e.getUTCMonth()+1,t,2)}function A0(e,t){return et(e.getUTCMinutes(),t,2)}function E0(e,t){return et(e.getUTCSeconds(),t,2)}function $0(e){var t=e.getUTCDay();return t===0?7:t}function F0(e,t){return et(Dl.count(hn(e)-1,e),t,2)}function Rl(e){var t=e.getUTCDay();return t>=4||t===0?In(e):In.ceil(e)}function P0(e,t){return e=Rl(e),et(In.count(hn(e),e)+(hn(e).getUTCDay()===4),t,2)}function B0(e){return e.getUTCDay()}function H0(e,t){return et(ha.count(hn(e)-1,e),t,2)}function z0(e,t){return et(e.getUTCFullYear()%100,t,2)}function R0(e,t){return e=Rl(e),et(e.getUTCFullYear()%100,t,2)}function O0(e,t){return et(e.getUTCFullYear()%1e4,t,4)}function U0(e,t){var n=e.getUTCDay();return e=n>=4||n===0?In(e):In.ceil(e),et(e.getUTCFullYear()%1e4,t,4)}function W0(){return"+0000"}function Ol(){return"%"}function Ul(e){return+e}function Wl(e){return Math.floor(+e/1e3)}var Dn,Gl;G0({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function G0(e){return Dn=Gg(e),Gl=Dn.format,Dn.parse,Dn.utcFormat,Dn.utcParse,Dn}function V0(e){return new Date(e)}function Y0(e){return e instanceof Date?+e:+new Date(+e)}function Vl(e,t,n,a,o,s,i,l,c,d){var u=vl(),f=u.invert,h=u.domain,p=d(".%L"),y=d(":%S"),m=d("%I:%M"),g=d("%I %p"),C=d("%a %d"),j=d("%b %d"),M=d("%B"),N=d("%Y");function w(_){return(c(_)<_?p:l(_)<_?y:i(_)<_?m:s(_)<_?g:a(_)<_?o(_)<_?C:j:n(_)<_?M:N)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?h(Array.from(_,Y0)):h().map(V0)},u.ticks=function(_){var I=h();return e(I[0],I[I.length-1],_??10)},u.tickFormat=function(_,I){return I==null?w:d(I)},u.nice=function(_){var I=h();return(!_||typeof _.range!="function")&&(_=t(I[0],I[I.length-1],_??10)),_?h(Ag(I,_)):u},u.copy=function(){return xl(u,Vl(e,t,n,a,o,s,i,l,c,d))},u}function Go(){return ea.apply(Vl(Ug,Wg,Kt,Jn,ua,qn,Ro,zo,jn,Gl).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Z0({task:e,scale:t,onTaskClick:n,onTaskDoubleClick:a,isSelected:o=!1,taskIndex:s,tabIndex:i=-1,onFocus:l,"aria-label":c}){const d=k.useRef(null),[u,f]=k.useState(!1),[h,p]=k.useState(!1),y=t(e.start),m=t(e.end),g=Math.max(m-y,20),C=()=>{if(e.color)return e.color;switch(e.priority){case"high":return"#d5281b";case"medium":return"#005eb8";case"low":return"#007f3b";default:return"#005eb8"}},j=e.progress?g*e.progress/100:0,M=()=>{n?.(e)},N=()=>{a?.(e)},w=D=>{D.key==="Enter"?(D.preventDefault(),M()):D.key===" "&&(D.preventDefault(),N())},_=()=>{f(!0)},I=()=>{f(!1)},v=()=>{p(!0),l?.()},x=()=>{p(!1)},S=["gantt-task-bar",u&&"gantt-task-bar--pressed",(h||o)&&"gantt-task-bar--focused",e.priority&&`gantt-task-bar--priority-${e.priority}`,o&&"gantt-task-bar--selected",e.type&&`gantt-task-bar--type-${e.type}`].filter(Boolean).join(" "),A={"--task-left":`${y}px`,"--task-width":`${g}px`,"--task-color":C(),left:`${y}px`,width:`${g}px`,backgroundColor:C()};return r.jsxs("div",{role:"button",tabIndex:i,ref:d,"data-task-index":s,className:S,style:A,onClick:M,onDoubleClick:N,onKeyDown:w,onMouseDown:_,onMouseUp:I,onFocus:v,onBlur:x,"aria-label":c||`${o?"Selected: ":""}${e.title}: ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.priority?`, priority ${e.priority}`:""}${e.progress?`, ${e.progress}% complete`:""}`,"aria-describedby":`task-${e.id}-details`,children:[r.jsx("span",{className:"task-title",children:e.title}),e.progress!==void 0&&r.jsx("div",{className:"task-progress",style:{width:`${j}px`}}),r.jsx("span",{id:`task-${e.id}-details`,className:"sr-only",children:`Task: ${e.title}, from ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.progress?`, ${e.progress}% complete`:""}${e.priority?`, priority: ${e.priority}`:""}`})]})}function q0({viewStart:e,viewEnd:t,dateCount:n}){const a=[];for(let p=e.getTime();p<=t.getTime();p+=864e5)a.push(new Date(p));const s=new Date;s.setHours(0,0,0,0);const[i,l]=k.useState(-1),c=k.useRef(null),d=p=>{if(p.key==="ArrowLeft"){p.preventDefault();const y=Math.max(0,i===-1?0:i-1);l(y),h(y)}else if(p.key==="ArrowRight"){p.preventDefault();const y=Math.min(a.length-1,i===-1?0:i+1);l(y),h(y)}else if(p.key==="ArrowDown")p.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .timeline-container"):null)?.focus();else if(p.key==="Home")p.preventDefault(),l(0),h(0);else if(p.key==="End"){p.preventDefault();const y=a.length-1;l(y),h(y)}},u=p=>{if(p.key==="ArrowDown")p.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .resource-label"):null)?.focus();else if(p.key==="ArrowRight"){p.preventDefault();const y=c.current;y&&y.focus()}},f=()=>{i===-1&&(l(0),setTimeout(()=>h(0),0))},h=p=>{const y=c.current?.querySelector(`[data-date-index="${p}"]`);y&&y.focus()};return r.jsxs("div",{className:"gantt-header",role:"row","aria-rowindex":1,children:[r.jsx("div",{className:"header-resource",role:"columnheader","aria-colindex":1,tabIndex:0,"aria-label":"Resource column header",onKeyDown:u,children:"Resources"}),r.jsx("div",{ref:c,className:"header-timeline",role:"columnheader","aria-colindex":2,"aria-colspan":n,"aria-label":`Timeline from ${e.toLocaleDateString()} to ${t.toLocaleDateString()}. Use arrow keys to navigate between dates`,tabIndex:0,onKeyDown:d,onFocus:f,children:a.map((p,y)=>{const m=p.getTime()===s.getTime(),g=i===y;return r.jsx("div",{"data-date-index":y,className:`date-column ${m?"today":""} ${g?"focused":""}`,tabIndex:g?0:-1,role:"button","aria-label":`${p.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}${m?" (Today)":""}`,onFocus:()=>l(y),onKeyDown:d,children:p.toLocaleDateString("en-GB",{day:"numeric",month:"short"})},y)})})]})}function J0({resource:e,tasks:t,scale:n,onTaskClick:a,onTaskDoubleClick:o,rowIndex:s,dateCount:i}){const[l,c]=k.useState(!1),[d,u]=k.useState(-1),f=k.useRef(null);k.useEffect(()=>{l&&d>=0&&t.length>0&&setTimeout(()=>{f.current?.querySelector(`[data-task-index="${d}"]`)?.focus()},0)},[l,d,t.length]);const h=m=>{if(m.key==="ArrowLeft"&&m.shiftKey){m.preventDefault(),m.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(m.key==="ArrowRight"&&m.shiftKey){m.preventDefault(),m.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!l){switch(m.key){case"ArrowUp":m.preventDefault(),s===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-timeline"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${s+1}"] .timeline-container`):null)?.focus();break;case"ArrowDown":m.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${s+3}"] .timeline-container`):null)?.focus();break;case"ArrowLeft":m.preventDefault(),f.current?.closest(".gantt-row")?.querySelector(".resource-label")?.focus();break;case"Enter":t.length>0&&(m.preventDefault(),c(!0),u(0));break}return}switch(m.key){case"ArrowLeft":m.preventDefault();const g=Math.max(0,d-1);u(g),f.current?.querySelector(`[data-task-index="${g}"]`)?.focus();break;case"ArrowRight":m.preventDefault();const j=Math.min(t.length-1,d+1);u(j),f.current?.querySelector(`[data-task-index="${j}"]`)?.focus();break;case"Enter":m.preventDefault(),d>=0&&a?.(t[d]);break;case" ":m.preventDefault(),d>=0&&o?.(t[d]);break;case"Escape":m.preventDefault(),c(!1),u(-1),f.current?.focus();break}},p=m=>{switch(m.key){case"ArrowUp":m.preventDefault(),s===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-resource"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${s+1}"] .resource-label`):null)?.focus();break;case"ArrowDown":m.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${s+3}"] .resource-label`):null)?.focus();break;case"ArrowRight":m.preventDefault(),f.current?.focus();break}},y=m=>{l&&u(m)};return r.jsxs("div",{className:"gantt-row",role:"row","aria-rowindex":s+2,children:[r.jsx("div",{className:"resource-label",role:"gridcell","aria-colindex":1,tabIndex:0,"aria-label":`Resource: ${e.label}`,onKeyDown:p,children:e.label}),r.jsx("div",{ref:f,className:`timeline-container ${l?"timeline-active":""}`,role:"gridcell","aria-colindex":2,"aria-colspan":i,tabIndex:0,"aria-label":`Timeline for ${e.label} with ${t.length} task${t.length!==1?"s":""}. Press Enter to activate task navigation, then use arrow keys to navigate, Enter to select, Space to activate, Escape to exit`,onKeyDown:h,onFocus:()=>{l||u(-1)},children:t.map((m,g)=>r.jsx(Z0,{task:m,scale:n,onTaskClick:a,onTaskDoubleClick:o,isSelected:l&&d===g,taskIndex:g,tabIndex:l&&d===g?0:-1,onFocus:()=>y(g)},m.id))})]})}function X0({resources:e,tasks:t=[],viewStart:n,viewEnd:a,onTaskClick:o,onTaskDoubleClick:s}){const i=k.useRef(null),[l,c]=k.useState(800),d=k.useMemo(()=>{if(n instanceof Date)return isNaN(n.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):n;const m=new Date(n);return isNaN(m.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):m},[n]),u=k.useMemo(()=>{if(a instanceof Date)return isNaN(a.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):a;const m=new Date(a);return isNaN(m.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):m},[a]),f=k.useMemo(()=>Math.ceil((u.getTime()-d.getTime())/864e5)+1,[d,u]);k.useEffect(()=>{if(!i.current||typeof window>"u")return;const m=typeof ResizeObserver<"u"?ResizeObserver:void 0;if(!m)return;const g=new m(C=>{const j=C[0];j&&c(Math.max(j.contentRect.width-220,400))});return g.observe(i.current),()=>g.disconnect()},[]);const h=k.useMemo(()=>Go().domain([d,u]).range([0,l]),[d,u,l]),p=k.useMemo(()=>{const m=new Map;return t.forEach(g=>{const C=m.get(g.resourceId)||[];C.push(g),m.set(g.resourceId,C)}),m},[t]),y=m=>{if(m.target===m.currentTarget)switch(m.key){case"ArrowDown":m.preventDefault(),typeof document<"u"&&i.current?.querySelector(".gantt-row .resource-label")?.focus();break;case"Home":m.preventDefault(),typeof document<"u"&&i.current?.querySelector(".header-resource")?.focus();break}};return r.jsxs("div",{className:"gantt-chart",role:"grid","aria-label":"Gantt Chart showing resource scheduling and task timelines","aria-rowcount":e.length+1,"aria-colcount":f+1,"aria-description":"Use arrow keys to navigate cells, Tab to cycle through tasks in timeline rows or dates in header, Enter to select task, Space to activate task, Alt+arrows to scroll the grid, Shift+arrows to scroll timeline rows",tabIndex:0,onKeyDown:y,children:[r.jsx(q0,{viewStart:d,viewEnd:u,dateCount:f}),r.jsx("div",{ref:i,className:"gantt-grid",role:"rowgroup","aria-label":"Gantt chart data rows",tabIndex:0,onKeyDown:m=>{m.key==="ArrowLeft"&&m.altKey?(m.preventDefault(),i.current?.scrollBy({left:-50,behavior:"smooth"})):m.key==="ArrowRight"&&m.altKey?(m.preventDefault(),i.current?.scrollBy({left:50,behavior:"smooth"})):m.key==="ArrowUp"&&m.altKey?(m.preventDefault(),i.current?.scrollBy({top:-50,behavior:"smooth"})):m.key==="ArrowDown"&&m.altKey&&(m.preventDefault(),i.current?.scrollBy({top:50,behavior:"smooth"}))},children:e.map((m,g)=>r.jsx(J0,{resource:m,tasks:p.get(m.id)||[],scale:h,onTaskClick:o,onTaskDoubleClick:s,rowIndex:g,dateCount:f},m.id))})]})}const pa=({children:e,href:t,active:n=!1,attributes:a={}})=>r.jsx("li",{className:"nhsuk-breadcrumb__item",children:n?r.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",...a,children:e}):r.jsx("a",{className:"nhsuk-breadcrumb__link",href:t,...a,children:e})}),Vo=({items:e=[],children:t,classes:n,labelText:a="Breadcrumb",href:o,text:s,reverse:i=!1,attributes:l={}})=>{const c=()=>t?k.Children.toArray(t).filter(g=>k.isValidElement(g)&&(g.type===pa||g.type?.displayName==="BreadcrumbItem")).map(g=>({text:typeof g.props.children=="string"?g.props.children:String(g.props.children),href:g.props.href,active:g.props.active,attributes:g.props.attributes})):[],d=()=>t?c():o&&s?[{href:o,text:s}]:e,u=()=>{const m=d();if(m&&m.length>0){const g=m.slice().reverse().find(C=>C.href&&!C.active);if(g)return{href:g.href,text:g.text}}return{text:"Home"}},f=d(),h=u(),p=Ce("nhsuk-breadcrumb",{"nhsuk-breadcrumb--reverse":i},n),y=a;return r.jsxs("nav",{className:p,"aria-label":y,role:"navigation",...l,children:[r.jsx("ol",{className:"nhsuk-breadcrumb__list",role:"list",children:t?k.Children.map(t,(m,g)=>k.isValidElement(m)&&(m.type===pa||m.type?.displayName==="BreadcrumbItem")?k.cloneElement(m,{key:g}):null):f?.filter(m=>m.active||!!m.href).map((m,g)=>r.jsx("li",{className:"nhsuk-breadcrumb__item",role:"listitem",children:m.active?r.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",role:"text",...m.attributes||{},children:m.text}):r.jsx("a",{className:"nhsuk-breadcrumb__link",href:m.href,role:"link",...m.attributes||{},children:m.text})},g))}),h.href&&r.jsx("p",{className:"nhsuk-breadcrumb__back",children:r.jsxs("a",{className:"nhsuk-breadcrumb__backlink",href:h.href,role:"link","aria-label":`Back to ${h.text}`,...e.length>0?e[e.length-1]?.attributes||{}:{},children:[r.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Back to Â "}),h.text]})})]})};Vo.Item=pa,pa.displayName="BreadcrumbItem";const Yo=({text:e="Skip to main content",href:t="#maincontent",classes:n,attributes:a={}})=>{const o=Ce("nhsuk-skip-link",n);return r.jsx("a",{className:o,href:t,"data-module":"nhsuk-skip-link",...a,children:e})},K0=({previousUrl:e,previousPage:t,nextUrl:n,nextPage:a,classes:o,attributes:s={}})=>{const i=Ce("nhsuk-pagination",o);return r.jsx("nav",{className:i,role:"navigation","aria-label":"Pagination",...s,children:r.jsxs("ul",{className:"nhsuk-list nhsuk-pagination__list",children:[e&&t&&r.jsx("li",{className:"nhsuk-pagination-item--previous",children:r.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--prev",href:e,children:[r.jsx("span",{className:"nhsuk-pagination__title",children:"Previous"}),r.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),r.jsx("span",{className:"nhsuk-pagination__page",children:t}),r.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:r.jsx("path",{d:"M4.1 12.3l2.7 3c.2.2.5.2.7 0 .1-.1.1-.2.1-.3v-2h11c.6 0 1-.4 1-1s-.4-1-1-1h-11V9c0-.2-.1-.4-.3-.5h-.2c-.1 0-.3.1-.4.2l-2.7 3c0 .2 0 .4.1.6z"})})]})}),n&&a&&r.jsx("li",{className:"nhsuk-pagination-item--next",children:r.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--next",href:n,children:[r.jsx("span",{className:"nhsuk-pagination__title",children:"Next"}),r.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),r.jsx("span",{className:"nhsuk-pagination__page",children:a}),r.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:r.jsx("path",{d:"M19.6 11.66l-2.73-3A.51.51 0 0 0 16 9v2H5a1 1 0 0 0 0 2h11v2a.5.5 0 0 0 .32.46.39.39 0 0 0 .18 0 .52.52 0 0 0 .37-.16l2.73-3a.5.5 0 0 0 0-.64z"})})]})})]})})},Q0=({items:e,classes:t,ariaLabel:n="Pages in this guide",attributes:a={}})=>{const o=Ce("nhsuk-contents-list",t),s=(i,l)=>i.current?r.jsx("li",{className:"nhsuk-contents-list__item","aria-current":"page",...i.attributes||{},children:r.jsx("span",{className:"nhsuk-contents-list__current",children:i.text})},l):r.jsx("li",{className:"nhsuk-contents-list__item",children:r.jsx("a",{className:"nhsuk-contents-list__link",href:i.href,...i.attributes||{},children:i.text})},l);return r.jsxs("nav",{className:o,role:"navigation","aria-label":n,...a,children:[r.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Contents"}),r.jsx("ol",{className:"nhsuk-contents-list__list",children:e.map((i,l)=>s(i,l))})]})},Zo=k.forwardRef(({variant:e="default",heading:t,headingHtml:n,headingLevel:a=2,headingClasses:o,description:s,descriptionHtml:i,href:l,imgURL:c,imgAlt:d,...u},f)=>{const h=["nhsuk-card",e==="clickable"&&"nhsuk-card--clickable",e==="secondary"&&"nhsuk-card--secondary",e==="feature"&&"nhsuk-card--feature",u.className].filter(Boolean).join(" "),p=["nhsuk-card__content",e==="feature"&&"nhsuk-card__content--feature",e==="primary"&&"nhsuk-card__content--primary",e==="secondary"&&"nhsuk-card__content--secondary"].filter(Boolean).join(" "),y=["nhsuk-card__heading",e==="feature"&&"nhsuk-card__heading--feature",o].filter(Boolean).join(" "),m=()=>{if(n)return r.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const j=()=>l&&e!=="feature"?r.jsx("a",{className:"nhsuk-card__link",href:l,children:t}):t;return r.jsx(Nt,{level:a,className:y,children:j()})},g=()=>u.children?u.children:i?r.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):s?r.jsx("p",{className:"nhsuk-card__description",children:s}):null,C=()=>e!=="primary"?null:r.jsxs("svg",{className:"nhsuk-icon",xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27","aria-hidden":"true",focusable:"false",children:[r.jsx("circle",{cx:"13.333",cy:"13.333",r:"13.333",fill:""}),r.jsxs("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2.667",children:[r.jsx("path",{d:"M15.438 13l-3.771 3.771"}),r.jsx("path",{d:"M11.667 9.229L15.438 13"})]})]});return r.jsxs("div",{...u,className:h,ref:f,children:[c&&r.jsx("img",{className:"nhsuk-card__img",src:c,alt:d||""}),r.jsxs("div",{className:p,children:[m(),g(),C()]})]})});Zo.displayName="Card";const eb=({className:e,children:t,"data-testid":n,id:a})=>{const o=["nhsuk-card-group",e].filter(Boolean).join(" ");return r.jsx("ul",{className:o,"data-testid":n,id:a,children:t})},tb=({className:e,children:t,"data-testid":n})=>{const a=["nhsuk-card-group__item",e].filter(Boolean).join(" ");return r.jsx("li",{className:a,"data-testid":n,children:t})},nb=({type:e,heading:t,headingHtml:n,headingLevel:a=3,headingClasses:o,description:s,descriptionHtml:i,className:l,children:c,"data-testid":d,id:u,"aria-label":f,"aria-labelledby":h,"aria-describedby":p})=>{const y=["nhsuk-care-card",`nhsuk-care-card--${e}`,l].filter(Boolean).join(" "),m=["nhsuk-care-card__heading",o].filter(Boolean).join(" "),g=()=>{if(n)return r.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const j={"non-urgent":"Non-urgent advice:",urgent:"Urgent advice:",emergency:"Immediate action required:"}[e],M=r.jsxs("span",{role:"text",children:[r.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[j," "]}),t]});return r.jsx(Nt,{level:a,className:m,children:M})},C=()=>c||(i?r.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):s?r.jsx("p",{className:"nhsuk-care-card__text",children:s}):null);return r.jsxs("div",{className:y,"data-testid":d,id:u,"aria-label":f,"aria-labelledby":h,"aria-describedby":p,children:[r.jsxs("div",{className:"nhsuk-care-card__heading-container",children:[g(),r.jsx("span",{className:"nhsuk-care-card__arrow","aria-hidden":"true"})]}),r.jsx("div",{className:"nhsuk-care-card__content",children:C()})]})},Yl=({id:e,className:t,headingText:n,headingHtml:a,headingLevel:o=2,bodyText:s,bodyHtml:i,children:l,...c})=>{const d=Ce("nhsuk-panel",t),u=()=>!n&&!a&&!l?null:a?r.jsx(Nt,{level:o,className:"nhsuk-panel__heading",html:a,marginBottom:"var(--panel-heading-margin, 24px)"}):n?r.jsx(Nt,{level:o,className:"nhsuk-panel__heading",text:n,marginBottom:"var(--panel-heading-margin, 24px)"}):null,f=()=>l?r.jsx("div",{className:"nhsuk-panel__body",children:l}):i?r.jsx("div",{className:"nhsuk-panel__body",dangerouslySetInnerHTML:{__html:i}}):s?r.jsx("div",{className:"nhsuk-panel__body",children:r.jsx("p",{children:s})}):null;return r.jsxs("div",{className:d,id:e,...c,children:[u(),f()]})},rb=({text:e,html:t,children:n,className:a,...o})=>{const s=Ce("nhsuk-inset-text",a),i=()=>n||(t?r.jsx("div",{dangerouslySetInnerHTML:{__html:t}}):e?r.jsx("p",{children:e}):null);return r.jsx("div",{className:s,...o,children:i()})},ab=({items:e,noBorder:t=!1,className:n,...a})=>{const o=Ce("nhsuk-summary-list",{"nhsuk-summary-list--no-border":t},n),s=l=>l.children?l.children:l.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text?l.text:null,i=l=>!l||!l.items.length?null:r.jsx("dd",{className:"nhsuk-summary-list__actions",children:r.jsx("ul",{className:"nhsuk-summary-list__actions-list",children:l.items.map((c,d)=>r.jsx("li",{className:"nhsuk-summary-list__actions-list-item",children:r.jsxs("a",{href:c.href,className:"nhsuk-link",...c.attributes,children:[s(c),c.visuallyHiddenText&&r.jsx("span",{className:"nhsuk-u-visually-hidden",children:c.visuallyHiddenText})]})},d))})});return r.jsx("div",{className:"nhsuk-summary-list-container",children:r.jsx("dl",{className:o,...a,children:e.map((l,c)=>r.jsxs("div",{className:"nhsuk-summary-list__row",children:[r.jsx("dt",{className:"nhsuk-summary-list__key",children:s(l.key)}),r.jsx("dd",{className:"nhsuk-summary-list__value",children:s(l.value)}),i(l.actions)]},c))})})},er={current:null},ob=()=>{if(er.current)return er.current;try{er.current=require("prismjs");try{require("prismjs/components/prism-typescript")}catch{}try{require("prismjs/components/prism-tsx")}catch{}try{require("prismjs/components/prism-json")}catch{}}catch{er.current=null}return er.current},sb=e=>{const t=[{regex:/\b(import|from|export|const|let|var|return|if|else|for|while|switch|case|break|new|throw|try|catch|finally|class|extends|implements|interface|type|as|async|await|function)\b/g,cls:"kw"},{regex:/(['"`])(?:\\.|(?!\1).)*\1/g,cls:"str"},{regex:/\/\*[^]*?\*\/|\/\/.*$/gm,cls:"com"},{regex:/\b([0-9]+(?:\.[0-9]+)?)\b/g,cls:"num"}];let n=e;return t.forEach(a=>{n=n.replace(a.regex,o=>`<span class="nhsuk-code-${a.cls}">${o}</span>`)}),n},ma=(e,t,n)=>{if(n||!t)return e;const a=ob();if(a&&a.languages){const o=a.languages[t]?t:a.languages.typescript&&(t==="ts"||t==="tsx"||t==="typescript")?"typescript":a.languages.json&&t==="json"?"json":void 0;if(o)try{return a.highlight(e,a.languages[o],o)}catch{}}return sb(e)},ib=({rows:e,head:t,caption:n,captionSize:a,firstCellIsHeader:o=!1,responsive:s=!1,heading:i,headingLevel:l=3,panel:c=!1,panelClasses:d,tableClasses:u,classes:f,attributes:h,"data-testid":p,columns:y,data:m,visuallyHiddenCaption:g=!1})=>{const C=`nhsuk-table__caption ${a?`nhsuk-table__caption--${a}`:""}`.trim(),j=Ce("nhsuk-table",{"nhsuk-table-responsive":s},u),M=Ce(f),N=(x,S)=>{const A=Ce("nhsuk-table__header",{[`nhsuk-table__header--${x.format}`]:x.format},x.classes),D={scope:"col",...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...s&&{role:"columnheader"},...x.attributes};let F;if(x.node!=null)F=r.jsx(r.Fragment,{children:x.node});else if(x.html)F=r.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const T=Array.isArray(x.code),L=T?x.code.join(`
`):x.code,$=T||L.includes(`
`),O={className:Ce("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":$,"nhsuk-table__code--inline":!$}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},J=ma(L,x.codeLanguage);F=$?r.jsx("pre",{className:"nhsuk-table__pre",children:r.jsx("code",{...O,dangerouslySetInnerHTML:{__html:J}})}):r.jsx("code",{...O,dangerouslySetInnerHTML:{__html:J}})}else F=x.text;return r.jsx("th",{className:A,...D,children:F},S)},w=(x,S,A)=>{const D=o&&A||x.rowHeader,F=Ce(D?"nhsuk-table__header":"nhsuk-table__cell",{[`nhsuk-table__${D?"header":"cell"}--${x.format}`]:x.format},x.classes),T={...D&&{scope:"row"},...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...s&&{role:D?"rowheader":"cell",...x.header&&{"data-label":x.header}},...x.attributes};let L;if(x.node!=null)L=r.jsx(r.Fragment,{children:x.node});else if(x.html)L=r.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const J=Array.isArray(x.code),ee=J?x.code.join(`
`):x.code,ae=J||ee.includes(`
`),R={className:Ce("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":ae,"nhsuk-table__code--inline":!ae}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},B=ma(ee,x.codeLanguage,x.disableHighlight);L=ae?r.jsx("pre",{className:"nhsuk-table__pre",children:r.jsx("code",{...R,dangerouslySetInnerHTML:{__html:B}})}):r.jsx("code",{...R,dangerouslySetInnerHTML:{__html:B}})}else L=x.text;const $=r.jsxs(r.Fragment,{children:[s&&x.header&&r.jsxs("span",{className:"nhsuk-table-responsive__heading","aria-hidden":"true",children:[x.header," "]}),L]}),O=D?"th":"td";return r.jsx(O,{className:F,...T,children:$},S)};let _=t,I=e;!_&&y&&y.length&&(_=y.map(x=>({text:x.title,format:x.format,classes:x.headerClasses,attributes:x.headerAttributes}))),!I&&y&&m&&m.length&&(I=m.map((x,S)=>y.map(A=>{const D=A.accessor?A.accessor(x,S):x[A.key];let F={format:A.format,classes:A.cellClasses,attributes:A.cellAttributes};if(A.rowHeader&&(F.rowHeader=!0),A.render){const T=A.render(D,x,S,A);return T==null||typeof T=="boolean"?{...F,text:""}:typeof T=="string"||typeof T=="number"?{...F,text:String(T)}:{...F,...T}}return{...F,text:D!=null?String(D):""}})));const v=()=>r.jsxs("table",{className:j,...s&&{role:"table"},...h,...p&&{"data-testid":p},children:[n&&r.jsx("caption",{className:Ce(C,g&&"nhsuk-u-visually-hidden"),children:n}),_&&_.length>0&&r.jsx("thead",{className:"nhsuk-table__head",...s&&{role:"rowgroup"},children:r.jsx("tr",{...s&&{role:"row"},children:_.map((x,S)=>N(x,S))})}),r.jsx("tbody",{className:"nhsuk-table__body",children:I&&I.map((x,S)=>r.jsx("tr",{className:"nhsuk-table__row",...s&&{role:"row"},children:x.map((A,D)=>w(A,D,D===0))},S))})]});return c?r.jsxs(Yl,{className:d,children:[i&&r.jsx(Nt,{level:l,className:"nhsuk-table__heading-tab",children:i}),v()]}):M?r.jsx("div",{className:M,children:v()}):v()},lb=({children:e,size:t,className:n})=>{const a=Ce("nhsuk-table__caption",t&&`nhsuk-table__caption--${t}`,n);return r.jsx("caption",{className:a,children:e})},Zl=({responsive:e,className:t,children:n,...a})=>{const o=e?{role:"row"}:{};return r.jsx("tr",{className:t,...o,...a,children:n})},ql=({text:e,html:t,node:n,code:a,codeLanguage:o,codeClassName:s,disableHighlight:i,format:l,classes:c,colspan:d,rowspan:u,attributes:f,responsive:h,as:p="th"})=>{const y=Ce("nhsuk-table__header",{[`nhsuk-table__header--${l}`]:l},c),m={scope:"col",...d&&{colSpan:d},...u&&{rowSpan:u},...h&&{role:"columnheader"},...f};let g;if(n!=null)g=r.jsx(r.Fragment,{children:n});else if(t)g=r.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(a!=null){const j=Array.isArray(a),M=j?a.join(`
`):a,N=j||M.includes(`
`),w={className:Ce("nhsuk-table__code",s,{"nhsuk-table__code--block":N,"nhsuk-table__code--inline":!N}),...o?{"data-language":o}:{}},_=ma(M,o,i);g=N?r.jsx("pre",{className:"nhsuk-table__pre",children:r.jsx("code",{...w,dangerouslySetInnerHTML:{__html:_}})}):r.jsx("code",{...w,dangerouslySetInnerHTML:{__html:_}})}else g=e;const C=p;return r.jsx(C,{className:y,...m,children:g})},cb=({text:e,html:t,node:n,code:a,codeLanguage:o,codeClassName:s,disableHighlight:i,format:l,classes:c,colspan:d,rowspan:u,attributes:f,responsive:h,rowHeader:p})=>{const y=!!p,m=y?"th":"td",g=Ce(y?"nhsuk-table__header":"nhsuk-table__cell",l&&`nhsuk-table__${y?"header":"cell"}--${l}`,c),C={...d&&{colSpan:d},...u&&{rowSpan:u},...y&&{scope:"row"},...h&&{role:y?"rowheader":"cell"},...f};let j;if(n!=null)j=r.jsx(r.Fragment,{children:n});else if(t)j=r.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(a!=null){const M=Array.isArray(a),N=M?a.join(`
`):a,w=M||N.includes(`
`),_={className:Ce("nhsuk-table__code",s,{"nhsuk-table__code--block":w,"nhsuk-table__code--inline":!w}),...o?{"data-language":o}:{}},I=ma(N,o,i);j=w?r.jsx("pre",{className:"nhsuk-table__pre",children:r.jsx("code",{..._,dangerouslySetInnerHTML:{__html:I}})}):r.jsx("code",{..._,dangerouslySetInnerHTML:{__html:I}})}else j=e;return r.jsx(m,{className:g,...C,children:j})},Tt=ib;Tt.Caption=lb,Tt.BodyRow=Zl,Tt.HeaderCell=ql,Tt.Cell=cb;let Jl=!1,Xl=!1;Object.defineProperty(Tt,"Row",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!Jl&&(console.warn("Table.Row is deprecated. Use Table.BodyRow instead."),Jl=!0),Zl}}),Object.defineProperty(Tt,"TH",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!Xl&&(console.warn("Table.TH is deprecated. Use Table.HeaderCell instead."),Xl=!0),ql}});const db=k.forwardRef(({items:e,defaultActiveTab:t,activeTab:n,onTabChange:a,onTabFocus:o,onTabListBlur:s,onEscape:i,autoActivate:l=!0,className:c,id:d,"data-testid":u,...f},h)=>{const p=n!==void 0,[y,m]=k.useState(()=>t||e[0]?.id||""),g=p?n:y,C=k.useRef(null),j=k.useRef(new Map),M=k.useCallback(S=>{p||m(S),a?.(S)},[p,a]),N=k.useCallback(S=>{o?.(S),l&&M(S)},[o,l,M]),w=k.useCallback((S,A)=>{const D=e.filter(L=>!L.disabled).map(L=>L.id),F=D.indexOf(A);let T=null;switch(S.key){case"ArrowLeft":T=F>0?F-1:D.length-1;break;case"ArrowRight":T=F<D.length-1?F+1:0;break;case"Home":T=0;break;case"End":T=D.length-1;break;case"Escape":S.preventDefault(),i?.();return;default:return}if(T!==null){S.preventDefault();const L=D[T],$=j.current.get(L);$&&($.focus(),N(L))}},[e,N,i]),_=k.useCallback((S,A)=>{A?j.current.set(S,A):j.current.delete(S)},[]),I=k.useCallback(S=>{const A=j.current.get(S);A&&A.focus()},[]);k.useImperativeHandle(h,()=>({focusTab:I,getActiveTab:()=>g,getTabListElement:()=>C.current}),[I,g]);const v=k.useCallback(S=>{const A=S.relatedTarget;C.current?.contains(A)||s?.()},[s]),x=Ce("nhsuk-tabs",c);return r.jsxs("div",{className:x,id:d,"data-testid":u,...f,children:[r.jsx("h2",{className:"nhsuk-tabs__title",children:"Contents"}),r.jsx("div",{className:"nhsuk-tabs__list-container",ref:C,children:r.jsx("ul",{className:"nhsuk-tabs__list",role:"tablist",onBlur:v,children:e.map(S=>{const A=S.id===g,D=S.disabled,F=Ce("nhsuk-tabs__list-item",{"nhsuk-tabs__list-item--selected":A,"nhsuk-tabs__list-item--disabled":D});return r.jsx("li",{className:F,role:"presentation",children:r.jsx("button",{ref:T=>_(S.id,T),className:"nhsuk-tabs__tab",role:"tab","aria-selected":A,"aria-controls":`${S.id}-panel`,id:`${S.id}-tab`,tabIndex:A?0:-1,disabled:D,onClick:()=>!D&&M(S.id),onKeyDown:T=>!D&&w(T,S.id),onFocus:()=>!D&&N(S.id),...S.attributes,children:S.label})},S.id)})})}),e.map(S=>{const A=S.id===g;return r.jsx("div",{className:"nhsuk-tabs__panel",role:"tabpanel","aria-labelledby":`${S.id}-tab`,id:`${S.id}-panel`,hidden:!A,children:S.content},S.id)})]})}),Kl=k.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:a,open:o=!1,className:s="",id:i,children:l,...c},d)=>{const u=["nhsuk-details",s].filter(Boolean).join(" "),f=t?r.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):r.jsx("span",{className:"nhsuk-details__summary-text",children:e});let h;return l?h=l:a?h=r.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):n&&(h=n),r.jsxs("details",{ref:d,id:i,className:u,open:o,...c,children:[r.jsx("summary",{className:"nhsuk-details__summary",tabIndex:0,children:f}),r.jsx("div",{className:"nhsuk-details__text",children:h})]})});Kl.displayName="Details";const Ql=k.forwardRef(({title:e,type:t,items:n,hidePrefix:a=!1,headingLevel:o=3,className:s,...i},l)=>{const c=["nhsuk-do-dont-list"];s&&c.push(s);const d=["nhsuk-list",t==="tick"?"nhsuk-list--tick":"nhsuk-list--cross"],u=()=>t==="cross"?r.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:[r.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),r.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]}):r.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"34",height:"34",children:r.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})}),f=p=>t==="cross"&&!a?`do not ${p}`:p,h=()=>r.jsx(Nt,{level:o,className:"nhsuk-do-dont-list__label",text:e});return r.jsxs("div",{ref:l,className:c.join(" "),...i,children:[h(),r.jsx("div",{className:"nhsuk-do-dont-list__content--feature",children:r.jsx("ul",{className:d.join(" "),role:"list",children:n.map((p,y)=>r.jsxs("li",{children:[u(),f(p.item)]},y))})})]})});Ql.displayName="DoDontList";const ec=k.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:a,open:o=!1,className:s="",id:i,children:l,...c},d)=>{const u=["nhsuk-expander",s].filter(Boolean).join(" "),f=t?r.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):r.jsx("span",{className:"nhsuk-details__summary-text",children:e});let h;return l?h=l:a?h=r.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):n&&(h=n),r.jsxs("details",{ref:d,id:i,className:u,open:o,...c,children:[r.jsx("summary",{className:"nhsuk-details__summary",children:f}),r.jsx("div",{className:"nhsuk-details__text",children:h})]})});ec.displayName="Expander";const tc=k.forwardRef(({items:e,idPrefix:t="task-list",className:n,...a},o)=>{const s=["nhsuk-task-list",n].filter(Boolean).join(" "),i=(l,c)=>{const d=c+1,u=`${t}-${d}-hint`,f=`${t}-${d}-status`,h=!!l.href,p=["nhsuk-task-list__item",h&&"nhsuk-task-list__item--with-link",l.classes].filter(Boolean).join(" "),y=[l.hint&&u,f].filter(Boolean).join(" ");return r.jsx(ub,{item:l,itemClasses:p,hasLink:h,hintId:u,statusId:f,ariaDescribedBy:y},c)};return r.jsx("ul",{ref:o,className:s,...a,children:e.map(i)})}),ub=({item:e,itemClasses:t,hasLink:n,hintId:a,statusId:o,ariaDescribedBy:s})=>{const i=()=>{const d=e.title.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:e.title.html}}):e.title.text,u=[n?"nhsuk-task-list__link":"",e.title.classes].filter(Boolean).join(" ");return n?r.jsx("a",{className:u,href:e.href,"aria-describedby":s,children:d}):r.jsx("div",{className:e.title.classes||"",children:d})},l=()=>e.hint?e.hint.html?r.jsx("div",{id:a,className:"nhsuk-task-list__hint",dangerouslySetInnerHTML:{__html:e.hint.html}}):r.jsx("div",{id:a,className:"nhsuk-task-list__hint",children:e.hint.text}):null,c=()=>{const d=["nhsuk-task-list__status",e.status.classes].filter(Boolean).join(" ");let u;return e.status.tag?u=r.jsx(nt,{...e.status.tag}):e.status.html?u=r.jsx("span",{dangerouslySetInnerHTML:{__html:e.status.html}}):u=e.status.text,r.jsx("div",{className:d,id:o,children:u})};return r.jsxs("li",{className:t,children:[r.jsxs("div",{className:"nhsuk-task-list__name-and-hint",children:[i(),l()]}),c()]})};tc.displayName="TaskList";const fb=({heading:e,headingLevel:t=3,text:n,html:a,children:o,className:s,...i})=>{const l=/important/i.test(e),c=()=>o||(a?r.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):n?r.jsx("p",{children:n}):null),d=["nhsuk-warning-callout",s].filter(Boolean).join(" "),u=`h${t}`;return r.jsxs("div",{className:d,...i,children:[k.createElement(u,{className:"nhsuk-warning-callout__label"},l?r.jsxs(r.Fragment,{children:[e,r.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"})]}):r.jsxs("span",{role:"text",children:[r.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Important: "}),e]})),c()]})},hb=({src:e,alt:t,caption:n,sizes:a,srcset:o,className:s,...i})=>{const l=["nhsuk-image",s].filter(Boolean).join(" ");return r.jsxs("figure",{className:l,...i,children:[r.jsx("img",{className:"nhsuk-image__img",src:e,alt:t,...a&&o?{sizes:a,srcSet:o}:{}}),n&&r.jsx("figcaption",{className:"nhsuk-image__caption",dangerouslySetInnerHTML:{__html:n}})]})},pb=({dateRange:e,onPrev:t,onNext:n,onToday:a,density:o,onDensityChange:s,a11yMode:i,onA11yModeChange:l})=>r.jsxs("div",{className:"nhs-slot-matrix__toolbar",role:"group","aria-label":"Slot matrix controls",children:[r.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[r.jsx(dt,{variant:"secondary",size:"small",onClick:t,"aria-label":"Previous date range",children:"Prev"}),r.jsx(dt,{variant:"secondary",size:"small",onClick:a,"aria-label":"Jump to today",children:"Today"}),r.jsx(dt,{variant:"secondary",size:"small",onClick:n,"aria-label":"Next date range",children:"Next"}),r.jsxs("span",{className:"nhs-slot-matrix__toolbar-daterange","aria-live":"polite",children:[e.start.toDateString()," â€“ ",e.end.toDateString()]})]}),r.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[r.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-density-select",children:"Density"}),r.jsx(Wn,{id:"slot-matrix-density-select",name:"slot-matrix-density",ariaLabel:"Change density",value:o,onChange:c=>s?.(c.target.value),options:[{value:"comfortable",text:"Comfortable"},{value:"compact",text:"Compact"}]}),r.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-mode-select",children:"Mode"}),r.jsx(Wn,{id:"slot-matrix-mode-select",name:"slot-matrix-mode",ariaLabel:"Change accessibility mode",value:i,onChange:c=>l?.(c.target.value),options:[{value:"grid",text:"Grid"},{value:"list",text:"List"}]})]})]}),mb=({items:e,orientation:t="horizontal"})=>r.jsx("div",{className:`nhs-slot-matrix__legend nhs-slot-matrix__legend--${t}`,role:"list","aria-label":"Slot legend",children:e.map(n=>r.jsx("div",{role:"listitem",className:"nhs-slot-matrix__legend-item",children:r.jsx(nt,{color:gb(n.status),text:n.label})},n.status))});function gb(e){switch(e){case"available":return"green";case"full":return"grey";case"overbook":return"orange";case"held":return"yellow";case"blocked":return"grey";default:return"default"}}const bb=({slots:e,sessions:t,value:n,defaultValue:a,onChange:o,selectionMode:s="single",a11yMode:i,className:l,style:c,getSlotAriaLabel:d,toolbar:u,enableDefaultToolbar:f=!0,legendItems:h,enableDefaultLegend:p=!0,legendPlacement:y="bottom",onA11yModeChange:m})=>{const[g,C]=k.useState("grid"),j=i||g,[M,N]=k.useState(a||[]),w=n??M,_=k.useMemo(()=>{const T=new Set;return e.forEach(L=>T.add(new Date(L.start).getTime())),Array.from(T).sort((L,$)=>L-$)},[e]),I=k.useMemo(()=>{const T={};return e.forEach(L=>{const $=new Date(L.start).getTime();T[$]||(T[$]={});const O=L.capacity-L.booked-(L.held||0);T[$][L.sessionId]={slot:L,remaining:O}}),T},[e]),v=k.useCallback(T=>{if(s==="single"){const L=[T.id];n||N(L),o?.(L,{lastAction:"select"})}else{const L=w.includes(T.id),$=L?w.filter(O=>O!==T.id):[...w,T.id];n||N($),o?.($,{lastAction:L?"deselect":"select"})}},[s,w,n,o]),x=k.useMemo(()=>h||(p?Array.from(new Set(e.map(L=>L.status))).map(L=>({status:L,label:L.charAt(0).toUpperCase()+L.slice(1)})):void 0),[h,p,e]),S=x?r.jsx(mb,{items:x,orientation:y==="left"||y==="right"?"vertical":"horizontal"}):null,A=T=>{i||C(T),m?.(T)},D=u||(f?r.jsx(pb,{dateRange:{start:new Date,end:new Date},density:"comfortable",a11yMode:j,onA11yModeChange:A}):null),F=r.jsx("div",{style:c,className:Ce(l),children:r.jsx(Zr,{className:Ce("nhs-slot-matrix-grid-wrapper"),children:r.jsx(Zt,{children:r.jsx(_n,{width:nn.Full,children:r.jsxs("div",{className:"nhs-slot-matrix",children:[D,y==="top"&&S,r.jsx("ul",{"aria-label":"Appointment slots list",children:e.map(T=>r.jsx("li",{children:r.jsxs("button",{type:"button",onClick:()=>v(T),"aria-pressed":w.includes(T.id),children:[tr(new Date(T.start))," â€“ ",tr(new Date(T.end))," (",T.status,")"]})},T.id))}),y==="bottom"&&S]})})})})});return j==="list"?F:r.jsx("div",{style:c,className:Ce(l),children:r.jsx(Zr,{className:Ce("nhs-slot-matrix-grid-wrapper"),children:r.jsx(Zt,{children:r.jsx(_n,{width:nn.Full,children:r.jsxs("div",{className:"nhs-slot-matrix",children:[D,y==="top"&&S,r.jsxs("div",{role:"grid","aria-rowcount":_.length+1,"aria-colcount":t.length+1,children:[r.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[r.jsx("div",{role:"columnheader","aria-label":"Timebands",className:"nhs-slot-matrix__timeband-header"}),t.map(T=>r.jsx("div",{role:"columnheader","aria-label":`Session ${T.specialty}`,className:"nhs-slot-matrix__session-header",children:T.specialty},T.id))]}),_.map(T=>r.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[r.jsx("div",{role:"rowheader",className:"nhs-slot-matrix__timeband-header","aria-label":tr(new Date(T)),children:tr(new Date(T))}),t.map(L=>{const $=I[T]?.[L.id];if(!$)return r.jsx("div",{role:"gridcell",className:"nhs-slot-matrix__cell","aria-disabled":"true"},L.id);const{slot:O,remaining:J}=$,ee=w.includes(O.id),ae=d?d(O):`Slot ${tr(new Date(O.start))} ${O.status}${J===0?" full":""}`;return r.jsx("button",{type:"button",role:"gridcell","data-status":O.status,className:Ce("nhs-slot-matrix__cell",ee&&"nhs-slot-matrix__cell--selected"),"aria-label":ae,"aria-selected":ee||void 0,onClick:()=>v(O),children:J>0?`${J} left`:"Full"},O.id)})]},T))]}),y==="bottom"&&S]})})})})})};function nc(e){return e<10?`0${e}`:`${e}`}function tr(e){return`${nc(e.getHours())}:${nc(e.getMinutes())}`}function rc(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=rc(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Lt(){for(var e,t,n=0,a="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=rc(e))&&(a&&(a+=" "),a+=t);return a}const yb=({level:e,children:t,className:n})=>{const a=`h${e}`;return k.createElement(a,{className:n},t)},xb=({href:e,children:t,className:n,...a})=>r.jsx("a",{href:e,className:n,...a,children:t});function ga(e,t){return r.jsx("span",{className:Lt("nhs-step-nav__title",{"nhs-step-nav__title--current":t}),children:e.title})}const vb=({id:e,className:t,ariaLabel:n="Step by step",heading:a,summary:o,headingLevel:s=3,variant:i="full-width",items:l,numbered:c=!0,currentStepId:d,renderLink:u,collapsible:f=!0,singleOpen:h=!1,defaultExpandedIds:p,expandedIds:y,onToggle:m,showAllControls:g=!1,autoFocusExpanded:C=!1})=>{const j=u??xb,M=i==="sidebar"?{as:"aside",className:"nhs-step-nav nhs-step-nav--sidebar"}:{as:"nav",className:"nhs-step-nav nhs-step-nav--full"},N=M.as==="aside"?"aside":"nav",w=y===void 0,[_,I]=k.useState(()=>new Set(p??[])),v=k.useMemo(()=>w?_:new Set(y),[w,_,y]),x=k.useMemo(()=>l.some(T=>T.description||T.items&&T.items.length>0),[l]),S=k.useCallback(T=>v.has(T),[v]),A=k.useCallback((T,L)=>{w&&I($=>{if(h)return L?new Set([T]):new Set;const O=new Set($);return L?O.add(T):O.delete(T),O}),m?.(T,L)},[w,m,h]),D=k.useCallback(T=>{const L=l.filter($=>$.description||$.items&&$.items.length>0).map($=>$.id);w&&I(()=>T?h?new Set(L.slice(0,1)):new Set(L):new Set),L.forEach($=>m?.($,T))},[l,w,m,h]),F=k.useCallback((T,L)=>{const $=!S(T.id);if(A(T.id,$),$&&C){const O=document.getElementById(`sbs-${T.id}-panel`);O&&O.querySelector('a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus()}else L?.focus()},[C,S,A]);return k.createElement(N,{id:e,"aria-label":n,className:Lt(M.className,t)},r.jsxs(r.Fragment,{children:[i==="full-width"&&(a||o)&&r.jsxs("div",{className:"nhs-step-nav__intro",children:[a&&r.jsx(yb,{level:s,className:"nhs-step-nav__heading",children:a}),o&&r.jsx("p",{className:"nhs-step-nav__summary",children:o}),f&&!h&&g&&x&&r.jsxs("div",{className:"nhs-step-nav__controls",children:[r.jsx("button",{type:"button",className:"nhs-step-nav__control",onClick:()=>D(!0),children:"Show all"}),r.jsx("button",{type:"button",className:"nhs-step-nav__control",onClick:()=>D(!1),children:"Hide all"})]})]}),r.jsx("ol",{className:Lt("nhs-step-nav__list",{"nhs-step-nav__list--numbered":c}),children:l.map((T,L)=>{const $=d===T.id,O=Lt("nhs-step-nav__item",$&&"nhs-step-nav__item--current",T.status&&`nhs-step-nav__item--${T.status}`),J=T.href?r.jsx(j,{href:T.href,className:"nhs-step-nav__link","aria-current":$?"step":void 0,children:ga(T,$)}):ga(T,$),ee=!!(T.description||T.items&&T.items.length>0),ae=f&&ee?S(T.id):!0,R=`sbs-${T.id}-header`,B=`sbs-${T.id}-panel`;return r.jsxs("li",{className:O,children:[r.jsxs("div",{className:"nhs-step-nav__header",children:[J,(T.optional||T.duration||T.meta)&&r.jsxs("div",{className:"nhs-step-nav__meta",children:[T.optional&&r.jsx("span",{className:"nhs-step-nav__optional","aria-label":"Optional",children:"Optional"}),T.duration&&r.jsx("span",{className:"nhs-step-nav__duration",children:T.duration}),T.meta]}),f&&ee&&r.jsx("button",{id:R,type:"button",className:"nhs-step-nav__toggle","aria-expanded":ae,"aria-controls":B,onClick:E=>F(T,E.currentTarget),"aria-label":(ae?"Hide":"Show")+` details for ${typeof T.title=="string"?T.title:"this step"}`,children:r.jsx("span",{className:"nhs-step-nav__toggle-icon","aria-hidden":"true"})})]}),ee&&(!f||ae)&&r.jsxs("div",{id:B,role:"region","aria-labelledby":f?R:void 0,className:Lt("nhs-step-nav__content"),children:[T.description&&r.jsx("p",{className:"nhs-step-nav__description",children:T.description}),T.items&&T.items.length>0&&r.jsx("ol",{className:"nhs-step-nav__sublist",children:T.items.map(E=>{const Y=d===E.id,P=E.href?r.jsx(j,{href:E.href,className:"nhs-step-nav__sublink","aria-current":Y?"step":void 0,children:ga(E,Y)}):ga(E,Y);return r.jsx("li",{className:Lt("nhs-step-nav__subitem",E.status&&`nhs-step-nav__subitem--${E.status}`),children:P},E.id)})})]})]},T.id||L)})})]}))},ac=({title:e,value:t,subtitle:n,variant:a="default",href:o,className:s="",ariaLabel:i,...l})=>{const c=["nhs-fdp-summary-card",`nhs-fdp-summary-card--${a}`,s].filter(Boolean).join(" "),d=r.jsxs(r.Fragment,{children:[r.jsx(Nt,{level:3,className:"nhs-fdp-summary-card__title",children:e}),r.jsx("p",{className:"nhs-fdp-summary-card__value",children:t}),n&&r.jsx("p",{className:"nhs-fdp-summary-card__subtitle",children:n})]});return o?r.jsx("a",{className:`${c} nhs-fdp-summary-card--clickable`,href:o,"aria-label":i||`${e}: ${t}`,...l,children:d}):r.jsx("div",{className:c,"aria-label":i,...l,children:d})},wb=({cards:e,className:t="",...n})=>{const a=["nhs-fdp-dashboard-summary-grid",t].filter(Boolean).join(" ");return r.jsx("div",{className:a,...n,children:r.jsx(Zr,{children:r.jsx(Zt,{children:e.map((o,s)=>r.jsx(_n,{width:nn.OneQuarter,className:"nhs-fdp-dashboard-summary-grid__column","data-card-index":s,children:r.jsx(ac,{...o})},s))})})})};var ba=(e=>(e.String="string",e.Number="number",e.Boolean="boolean",e.Date="date",e.Custom="custom",e))(ba||{}),Tn=(e=>(e.First="first",e.Last="last",e))(Tn||{}),nr=(e=>(e.TrueFirst="trueFirst",e.FalseFirst="falseFirst",e))(nr||{});function oc(e){if(e==null)return null;const n=(e instanceof Date?e:new Date(e)).getTime();return Number.isNaN(n)?null:n}const Sb=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function _b(e,t){return Sb.compare(String(e),String(t))}function sc(e,t){if(t.sortAccessor)return t.sortAccessor(e);if(t.useRendererForSort){if(t.tableRenderer)return t.tableRenderer(e);if(t.render)return t.render(e)}return e[t.key]}function kb(e,t,n,a){if(n?.sortComparator)return n.sortComparator(e,t);const o=n?.sortType;if(o===ba.Number){const s=Number(e),i=Number(t),l=Number.isNaN(s),c=Number.isNaN(i);return l&&c?0:l?1:c?-1:s-i}if(o===ba.Boolean){const s=!!e,i=!!t,l=n?.booleanOrder??a?.booleanOrder??nr.FalseFirst;return s===i?0:l===nr.TrueFirst?s?-1:1:s?1:-1}if(o===ba.Date){const s=oc(e),i=oc(t);return s==null&&i==null?0:s==null?1:i==null?-1:s-i}if(typeof e=="number"&&typeof t=="number"){const s=Number.isNaN(e),i=Number.isNaN(t);return s&&i?0:s?1:i?-1:e-t}if(typeof e=="boolean"&&typeof t=="boolean"){const s=n?.booleanOrder??a?.booleanOrder??nr.FalseFirst;return e===t?0:s===nr.TrueFirst?e?-1:1:e?1:-1}return _b(e,t)}function qo(e,t,n=Tn.Last,a){const o=new Map(e.map(i=>[i.key,i])),s=t??[];return(i,l)=>{if(!s.length)return 0;for(const{key:c,direction:d}of s){const u=o.get(c),f=u?sc(i,u):i[c],h=u?sc(l,u):l[c],p=f==null,y=h==null;if(p||y){if(p&&y)continue;return(u?.nullsPosition??a?.nullsPosition??n)===Tn.First?p?-1:1:p?1:-1}let m=kb(f,h,u,a);if(m!==0)return d==="asc"?m:-m}if(a?.stable){const c=i.__originalIndex__??i.originalIndex??void 0,d=l.__originalIndex__??l.originalIndex??void 0;if(typeof c=="number"&&typeof d=="number")return c-d}return 0}}const ic=k.forwardRef(({data:e,columns:t,sortConfig:n,onSort:a,sortingOptions:o,selectedRowIndex:s,onRowSelect:i,id:l,testId:c,ariaLabel:d,ariaLabelledby:u,ariaDescribedby:f,className:h,tableClassName:p,bordered:y=!1,striped:m=!1,responsive:g=!1,tableType:C="default"},j)=>{const M=k.useRef(null),N=k.useRef(null),w=k.useRef(null);k.useImperativeHandle(j,()=>M.current,[]);const[_,I]=k.useState(0),[v,x]=k.useState(0),[S,A]=k.useState("headers"),[D,F]=k.useState("browse"),T=t.length,L=e.length,$=k.useMemo(()=>{if(!n||n.length===0)return e;const E=qo(t,n,Tn.Last,o);return[...e].sort(E)},[e,n,t,o]),O=k.useCallback((E,Y)=>{setTimeout(()=>{const P=M.current?.querySelector(`tbody tr:nth-child(${E+1}) td:nth-child(${Y+1})`);P&&(P.focus(),typeof P.scrollIntoView=="function"&&P.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),J=k.useCallback(E=>{setTimeout(()=>{const Y=M.current?.querySelector(`th:nth-child(${E+1})`);Y&&(Y.focus(),typeof Y.scrollIntoView=="function"&&Y.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),ee=k.useCallback(E=>{a?.(E)},[a]),ae=k.useCallback(E=>{i?.(E)},[i]),R=k.useCallback(E=>{const{key:Y}=E;switch(Y){case"Enter":if(E.preventDefault(),S==="headers"&&D==="browse")F("navigate"),J(v);else if(S==="headers"&&D==="navigate"){const P=t[v];P&&ee(P.key)}else S==="cells"&&D==="browse"?(F("navigate"),O(_,v)):S==="cells"&&D==="navigate"&&ae(_);break;case"Escape":E.preventDefault(),(S==="headers"&&D==="navigate"||S==="cells"&&D==="navigate")&&F("browse");break;case"ArrowLeft":if(E.preventDefault(),D==="navigate"||D==="browse"&&S==="headers"){if(S==="headers"){const P=Math.max(0,v-1);x(P),J(P)}else if(S==="cells"){const P=Math.max(0,v-1);x(P),O(_,P)}}break;case"ArrowRight":if(E.preventDefault(),D==="navigate"||D==="browse"&&S==="headers"){if(S==="headers"){const P=Math.min(T-1,v+1);x(P),J(P)}else if(S==="cells"){const P=Math.min(T-1,v+1);x(P),O(_,P)}}break;case"ArrowUp":if(E.preventDefault(),S==="cells"){if(D==="browse"){const P=Math.max(0,_-1);I(P),O(P,0),x(0)}else if(D==="navigate")if(_>0){const P=_-1;I(P),O(P,v)}else A("headers"),F("browse"),J(v)}break;case"ArrowDown":if(E.preventDefault(),S==="headers"&&D==="browse")A("cells"),I(0),x(0),O(0,0);else if(S==="cells"){const P=L-1;if(D==="browse"){const W=Math.min(P,_+1);I(W),O(W,0),x(0)}else if(D==="navigate"&&_<P){const W=_+1;I(W),O(W,v)}}break;case"Home":E.preventDefault(),S==="headers"?(x(0),J(0)):S==="cells"&&(E.ctrlKey?(I(0),x(0),O(0,0)):(x(0),O(_,0)));break;case"End":if(E.preventDefault(),S==="headers"){const P=T-1;x(P),J(P)}else if(S==="cells")if(E.ctrlKey){const P=L-1,W=T-1;I(P),x(W),O(P,W)}else{const P=T-1;x(P),O(_,P)}break;case" ":if(E.preventDefault(),S==="headers"&&D==="navigate"){const P=t[v];P&&ee(P.key)}else S==="cells"&&D==="navigate"&&ae(_);break}},[S,D,v,_,T,L,t,O,J,ee,ae]);k.useEffect(()=>{const E=M.current;if(E)return E.addEventListener("keydown",R),()=>E.removeEventListener("keydown",R)},[R]);const B=Ce("nhsuk-table",p,{"nhsuk-table--responsive":g,"nhsuk-table--bordered":y,"nhsuk-table--striped":m,"nhsuk-table--compact":C==="compact"},h);return r.jsxs("table",{ref:M,className:B,id:l,"data-testid":c,role:"grid","aria-label":d,"aria-labelledby":u,"aria-describedby":f,tabIndex:0,children:[r.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:r.jsx("tr",{ref:N,role:"row",children:t.map((E,Y)=>{const P=n?.find(Q=>Q.key===E.key),W=!!P,H=S==="headers"&&v===Y;return r.jsx("th",{className:Ce("sortable-header",{"sortable-header--focused":H}),role:"columnheader",tabIndex:H?0:-1,onClick:()=>{A("headers"),x(Y),F("navigate"),J(Y),ee(E.key)},onKeyDown:Q=>{(Q.key==="Enter"||Q.key===" ")&&(Q.preventDefault(),ee(E.key))},"aria-sort":W?P?.direction==="asc"?"ascending":"descending":"none",children:r.jsxs("div",{className:"header-content",children:[r.jsx("span",{className:"header-label",children:E.label}),W&&r.jsxs("span",{className:"sort-indicator","aria-hidden":"true",children:[n&&n.length>1&&r.jsx("span",{className:"sort-priority",children:n.findIndex(Q=>Q.key===E.key)+1}),r.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",className:"sort-arrow",children:P?.direction==="asc"?r.jsx("path",{d:"M6 2L2 8h8L6 2z"}):r.jsx("path",{d:"M6 10L2 4h8L6 10z"})})]})]})},E.key)})})}),r.jsx("tbody",{ref:w,className:"nhsuk-table__body",role:"rowgroup",children:$.map((E,Y)=>{const P=s===Y,W=S==="cells"&&_===Y;return r.jsx("tr",{role:"row",className:Ce("data-row",{"data-row--selected":P,"data-row--focused":W}),"aria-selected":P,children:t.map((H,Q)=>{const q=H.tableRenderer?H.tableRenderer(E):H.render?H.render(E):E[H.key],te=S==="cells"&&_===Y&&v===Q,fe=()=>typeof q=="boolean"?r.jsxs(r.Fragment,{children:[r.jsx("span",{"aria-hidden":"true",children:q?"âœ“":"âœ—"}),r.jsx("span",{className:"sr-only",children:q?"Yes":"No"})]}):String(q??"");return r.jsx("td",{role:"gridcell",className:Ce("data-cell",{"data-cell--focused":te}),tabIndex:te?0:-1,onClick:()=>{A("cells"),I(Y),x(Q),F("navigate"),O(Y,Q),ae(Y)},children:fe()},H.key)})},Y)})})]})});ic.displayName="AriaDataGrid";const rr=({sortConfig:e,columns:t,onSortChange:n,className:a="",emptyDescription:o="No sorting applied",activeDescription:s,showReset:i=!0,showHelp:l=!0,disabled:c=!1,ariaLabel:d="Sort configuration",ariaDescribedBy:u})=>{const f=k.useRef(null),h=k.useRef(null),p=k.useRef(null),y=k.useCallback((x,S)=>{c||(h.current=S,x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",S))},[c]),m=k.useCallback((x,S)=>{c||h.current===S||(x.preventDefault(),x.dataTransfer.dropEffect="move",p.current=S)},[c]),g=k.useCallback((x,S)=>{if(c)return;x.preventDefault();const A=h.current;if(!A||A===S)return;const D=e.findIndex(T=>T.key===A),F=e.findIndex(T=>T.key===S);if(D!==-1&&F!==-1){const T=[...e],[L]=T.splice(D,1);T.splice(F,0,L),n(T)}h.current=null,p.current=null},[c,e,n]),C=k.useCallback(()=>{h.current=null,p.current=null},[]),j=k.useCallback(x=>{const S=t.find(A=>A.key===x);return S?S.label:x},[t]),M=k.useCallback(x=>["red","orange","blue","aqua-green","grey"][x]||"grey",[]),N=k.useCallback(x=>{if(c)return;const S=e.map(A=>A.key===x?{...A,direction:A.direction==="asc"?"desc":"asc"}:A);n(S)},[e,n,c]),w=k.useCallback(x=>{if(c)return;const S=e.filter(A=>A.key!==x);n(S)},[e,n,c]),_=k.useCallback(()=>{c||n([])},[n,c]),I=()=>{if(e.length===0)return o;if(s)return s;const x=e.map((S,A)=>{const D=S.direction==="asc"?"ascending":"descending";return`${A+1}. ${j(S.key)} (${D})`});if(x.length===1)return`Sorted by: ${x[0]}`;if(x.length===2)return`Sorted by: ${x.join(" and ")}`;{const S=x.pop();return`Sorted by: ${x.join(", ")}, and ${S}`}},v=k.useMemo(()=>{const x=["sort-description"];return l&&x.push("sort-help"),u&&x.push(u),x.join(" ")},[l,u]);return e.length===0?r.jsxs("div",{className:`sort-status-control ${a}`,children:[r.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:o}),l&&r.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:r.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]}):r.jsxs("div",{className:`sort-status-control ${a}`,children:[r.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:I()}),r.jsxs("div",{className:"sort-status-container",children:[r.jsx("div",{ref:f,className:"sort-status-control__tags",role:"list","aria-label":d,"aria-describedby":v,children:e.map((x,S)=>r.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",draggable:!c,onDragStart:A=>y(A,x.key),onDragOver:A=>m(A,x.key),onDrop:A=>g(A,x.key),onDragEnd:C,onClick:()=>N(x.key),style:{cursor:c?"default":"pointer"},title:c?"":`Click to toggle sort direction. Currently ${x.direction==="asc"?"ascending":"descending"}`,"data-key":x.key,children:r.jsx(nt,{color:M(S),className:"sort-status-control__tag",closable:!0,onClose:()=>w(x.key),disabled:c,children:r.jsxs("div",{className:"sort-status-control__tag-content",children:[r.jsx("div",{className:"sort-status-control__drag-handle",title:"Drag to reorder",children:"â‹®â‹®"}),r.jsx("div",{className:`sort-status-control__priority-badge sort-priority sort-priority--priority-${S+1}`,children:S+1}),r.jsx("span",{className:"sort-status-control__tag-label",children:j(x.key)}),r.jsx("button",{type:"button",className:"sort-status-control__direction-button",onClick:A=>{A.stopPropagation(),N(x.key)},disabled:c,"aria-label":`Toggle sort direction for ${j(x.key)}. Currently ${x.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:r.jsx("span",{className:`sort-status-control__direction-icon sort-status-control__direction-icon--${x.direction}`,children:r.jsx("svg",{className:`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${x.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:r.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})})})]})})},x.key))}),i&&r.jsx("div",{className:"sort-status-control__actions",children:r.jsx(dt,{variant:"secondary",onClick:_,disabled:c,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})})]}),l&&r.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:r.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]})};function Cb(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const a=[...e.tabErrors];return a[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:a};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const o=[...e.selectedRows];return o[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:o};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:s}=t.payload,i=new Array(s).fill(!1),l=new Array(s).fill(null),c=new Array(s).fill([]);for(let d=0;d<Math.min(e.tabLoadingStates.length,s);d++)i[d]=e.tabLoadingStates[d],l[d]=e.tabErrors[d],c[d]=e.selectedRows[d];return{...e,tabLoadingStates:i,tabErrors:l,selectedRows:c};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}const ya=k.forwardRef(function(t,n){const{dataConfig:a={},tabPanels:o,selectedIndex:s,onTabChange:i,onGlobalRowSelectionChange:l,ariaLabel:c,ariaDescription:d,className:u="",disabled:f=!1,orientation:h="horizontal",id:p,isLoading:y=!1,loadingComponent:m,error:g=null,errorComponent:C,"data-testid":j,actions:M,actionsMinGap:N=16,forceActionsAbove:w=!1,hideTabsIfSingle:_=!1,minColumnWidth:I,enableColumnCollapse:v=!1,minVisibleColumns:x=2,showCollapsedColumnsIndicator:S=!0,sortStatusPlacement:A="header"}=t,D=_&&o.length===1,F=k.useId(),T=p??`aria-tabs-datagrid-${F}`,L=typeof d=="string"&&d.trim()!==""&&!/\s/.test(d),$=`${T}-description`,O=`${T}-navigation-help`,{dataComparator:J=(G,re)=>JSON.stringify(G)===JSON.stringify(re),filterFunction:ee=G=>G,booleanRenderer:ae=G=>G?"âœ“":"âœ—"}=a||{},R=s!==void 0,B=s??0,[E,Y]=k.useState({focusArea:D?"headers":"tabs",focusedTabIndex:B,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}),P=k.useMemo(()=>({selectedIndex:B,tabLoadingStates:new Array(o.length).fill(!1),tabErrors:new Array(o.length).fill(null),sortConfig:[],selectedRows:new Array(o.length).fill([]),globalSelectedRowData:null,filters:void 0}),[B]),[W,H]=k.useReducer(Cb,P);k.useEffect(()=>{const G=W.tabLoadingStates.length,re=o.length;G!==re&&H({type:"ADJUST_ARRAYS",payload:{newLength:re}})},[o.length]),k.useEffect(()=>{R&&H({type:"SET_SELECTED_INDEX",payload:B})},[B,R]),k.useEffect(()=>{Y(G=>({...G,focusArea:D?"headers":"tabs",focusedTabIndex:W.selectedIndex,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}))},[W.selectedIndex,D]);const Q=k.useRef(null),q=k.useCallback(G=>{G.shiftKey&&(G.key==="ArrowLeft"?(G.preventDefault(),Q.current?.scrollBy({left:-64,behavior:"smooth"})):G.key==="ArrowRight"&&(G.preventDefault(),Q.current?.scrollBy({left:64,behavior:"smooth"})))},[]),[te,fe]=k.useState({}),[Z,se]=k.useState(!1),de=k.useRef(null),ve=k.useRef(null),me=k.useCallback(G=>{const re=o[G];if(!re)return[];const ye=te[G]||new Set;return re.columns.filter(be=>!ye.has(be.key))},[o,te]),De=k.useCallback(G=>{const re=o[G];if(!re)return new Set;if(!v)return new Set;const ye=Q.current?.parentElement;if(!ye)return new Set;const be=typeof I=="number"?`${I}px`:I||"160px",xe=re.columns.map((Pe,Ue)=>({key:Pe.key,min:Pe.minWidth!==void 0?typeof Pe.minWidth=="number"?`${Pe.minWidth}px`:String(Pe.minWidth):be,priority:Pe.collapsePriority??Ue,lock:!!Pe.alwaysVisible,group:Pe.collapseGroup,groupPriority:Pe.collapseGroupPriority??0})),ke=Pe=>{if(Pe.endsWith("px"))return parseFloat(Pe);const Ue=document.createElement("div");Ue.style.width=Pe,ye.appendChild(Ue);const Vt=Ue.getBoundingClientRect().width;return Ue.remove(),Vt||0},He=xe.reduce((Pe,Ue)=>Pe+ke(Ue.min),0),je=ye.clientWidth;if(He<=je||xe.length<=x)return new Set;const Ie=xe.map((Pe,Ue)=>({...Pe,idx:Ue})),Se=new Map;for(const Pe of Ie)if(Pe.group){const Ue=Se.get(Pe.group)||{keys:[],width:0,groupPriority:Pe.groupPriority,lock:!1,indices:[]};Ue.keys.push(Pe.key),Ue.width+=ke(Pe.min),Ue.groupPriority=Math.max(Ue.groupPriority,Pe.groupPriority),Ue.lock=Ue.lock||Pe.lock,Ue.indices.push(Pe.idx),Se.set(Pe.group,Ue)}const Me=[];for(const[Pe,Ue]of Se)Ue.lock||Me.push({type:"group",keys:Ue.keys,width:Ue.width,priority:Ue.groupPriority,rightmostIndex:Math.max(...Ue.indices)});for(const Pe of Ie)!Pe.group&&!Pe.lock&&Me.push({type:"column",keys:[Pe.key],width:ke(Pe.min),priority:Pe.priority,rightmostIndex:Pe.idx});Me.sort((Pe,Ue)=>Pe.priority!==Ue.priority?Ue.priority-Pe.priority:Ue.rightmostIndex-Pe.rightmostIndex);let Je=new Set,tt=He;const Ee=xe.length;for(const Pe of Me){if(Ee-Je.size<=x)break;if(tt-Pe.width>=je){for(const Ue of Pe.keys)Je.add(Ue);tt-=Pe.width}else continue}return Je},[o,v,I,x]);k.useEffect(()=>{if(!v)return;const G=()=>{const ye=De(W.selectedIndex);if(fe(be=>({...be,[W.selectedIndex]:ye})),S&&ve.current){const be=ye.size;ve.current.textContent=be>0?`${be} column${be===1?"":"s"} collapsed`:"All columns visible"}};G();const re=new ResizeObserver(G);return oe.current&&re.observe(oe.current),()=>{re.disconnect()}},[W.selectedIndex,o,v,De,S]),k.useEffect(()=>{l&&l(W.globalSelectedRowData)},[W.globalSelectedRowData,l]);const Ge=k.useCallback((G,re)=>J(G,re),[J]),Le=k.useCallback(G=>{G>=0&&G<o.length&&!o[G].disabled&&(H({type:"SET_SELECTED_INDEX",payload:G}),Y(re=>({...re,focusedTabIndex:G,focusArea:"tabs"})),i?.(G))},[o,i]),Ae=k.useRef(!1),_e=k.useCallback((G,re)=>{if(!re?.force&&!Ae.current&&G===0){Ae.current=!0;return}Ae.current=!0,setTimeout(()=>{const ye=z.current[G],be=ye?.parentElement;if(ye&&be){const xe=ye.offsetLeft,ke=ye.offsetWidth,He=be.clientWidth,je=xe-He/2+ke/2;try{be.scrollTo({left:Math.max(0,je),behavior:"smooth"})}catch{ye.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}}else process.env.SILENCE_SCROLL_DEBUG||console.debug("[AriaTabsDataGrid] Missing elements for scroll",{tabElementExists:!!ye,tabListElementExists:!!be})},50)},[]),z=k.useRef([]),K=k.useRef([]),le=k.useCallback((G,re)=>{const ye=W.sortConfig||[],be=ye.find(He=>He.key===re);let xe;be?be.direction==="asc"?xe=ye.map(He=>He.key===re?{...He,direction:"desc"}:He):xe=ye.filter(He=>He.key!==re):xe=[...ye,{key:re,direction:"asc"}],H({type:"SET_SORT",payload:xe}),o[G].onSort?.(re)},[W.sortConfig,o]),pe=k.useCallback(G=>{setTimeout(()=>{const re=document.querySelector(`[data-tab-panel="${W.selectedIndex}"] th:nth-child(${G+1})`);re&&re.focus()},0)},[W.selectedIndex]),ge=k.useCallback(G=>ae(G),[ae]),U=k.useCallback((G,re)=>{setTimeout(()=>{const ye=document.querySelector(`[data-tab-panel="${W.selectedIndex}"] tbody tr:nth-child(${G+1}) td:nth-child(${re+1})`);ye&&ye.focus()},0)},[W.selectedIndex]);k.useEffect(()=>{E.isGridActive&&(E.focusArea==="headers"?setTimeout(()=>{pe(E.focusedHeaderIndex)},0):E.focusArea==="cells"&&setTimeout(()=>{U(E.focusedRowIndex,E.focusedColumnIndex)},0))},[E.focusArea,E.isGridActive,E.focusedHeaderIndex,E.focusedRowIndex,E.focusedColumnIndex,pe,U]),k.useEffect(()=>{D||_e(W.selectedIndex)},[W.selectedIndex,_e,D]);const V=k.useCallback((G,re)=>{const{key:ye}=G,be=me(W.selectedIndex).length||0;switch(ye){case"ArrowLeft":G.preventDefault();const xe=Math.max(0,re-1);Y(Ie=>({...Ie,focusedHeaderIndex:xe})),pe(xe);break;case"ArrowRight":G.preventDefault();const ke=Math.min(be-1,re+1);Y(Ie=>({...Ie,focusedHeaderIndex:ke})),pe(ke);break;case"ArrowUp":G.preventDefault(),D?M&&setTimeout(()=>{const Ie=he.current;if(!Ie)return;Ie.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus()},0):(Y(Ie=>({...Ie,focusArea:"tabs",focusedTabIndex:W.selectedIndex})),_e(W.selectedIndex),z.current[W.selectedIndex]?.focus());break;case"ArrowDown":G.preventDefault(),Y(Ie=>({...Ie,focusArea:"cells",focusedRowIndex:0,focusedColumnIndex:re,isGridActive:!0}));break;case"Home":G.preventDefault(),Y(Ie=>({...Ie,focusedHeaderIndex:0})),pe(0);break;case"End":G.preventDefault();const He=be-1;Y(Ie=>({...Ie,focusedHeaderIndex:He})),pe(He);break;case"Enter":case" ":G.preventDefault();const je=me(W.selectedIndex)[re]?.key;je&&le(W.selectedIndex,je);break}},[o,W.selectedIndex,le,Y,pe,U,z,me]),ie=k.useCallback((G,re,ye)=>{const{key:be}=G,xe=o[W.selectedIndex],ke=xe?.data.length||0,He=me(W.selectedIndex).length||0;switch(be){case"ArrowUp":if(G.preventDefault(),re===0)Y(Me=>({...Me,focusArea:"headers",focusedHeaderIndex:ye,isGridActive:!1})),pe(ye);else{const Me=re-1;Y(Je=>({...Je,focusedRowIndex:Me})),U(Me,ye)}break;case"ArrowDown":G.preventDefault();const je=Math.min(ke-1,re+1);Y(Me=>({...Me,focusedRowIndex:je})),U(je,ye);break;case"ArrowLeft":G.preventDefault();const Ie=Math.max(0,ye-1);Y(Me=>({...Me,focusedColumnIndex:Ie})),U(re,Ie);break;case"ArrowRight":G.preventDefault();const Se=Math.min(He-1,ye+1);Y(Me=>({...Me,focusedColumnIndex:Se})),U(re,Se);break;case"Home":G.preventDefault(),G.ctrlKey?(Y(Me=>({...Me,focusedRowIndex:0,focusedColumnIndex:0})),U(0,0)):(Y(Me=>({...Me,focusedColumnIndex:0})),U(re,0));break;case"End":if(G.preventDefault(),G.ctrlKey){const Me=ke-1,Je=He-1;Y(tt=>({...tt,focusedRowIndex:Me,focusedColumnIndex:Je})),U(Me,Je)}else{const Me=He-1;Y(Je=>({...Je,focusedColumnIndex:Me})),U(re,Me)}break;case"Enter":case" ":if(G.preventDefault(),xe&&xe.data[re]){const Me=xe.data.some(Ee=>"ews_data"in Ee)?ee(xe.data,W.filters):xe.data,Je=W.sortConfig;let tt=Me;if(Je&&Je.length>0){const Ee=qo(xe.columns,Je,Tn.Last,a?.sortingOptions);tt=[...Me].sort(Ee)}if(tt[re]){const Ee=tt[re],Ue=W.globalSelectedRowData&&Ge(W.globalSelectedRowData,Ee)?null:Ee;H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:Ue})}}break}},[o,W.selectedIndex,W.filters,W.sortConfig,ee,Ge,H,Y,pe,U,me]),ne=k.useCallback((G,re)=>ee(G,re),[ee]);if(k.useImperativeHandle(n,()=>({selectTab:G=>{G>=0&&G<o.length&&(H({type:"SET_SELECTED_INDEX",payload:G}),i?.(G))},refreshData:G=>{console.log("Refreshing data for tab:",G??"all")},exportData:G=>{const re=G??W.selectedIndex,ye=o[re];return ye?ye.data:[]},getSelectedRows:G=>W.globalSelectedRowData?[]:[],clearSelection:G=>{H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:null})},applyFilters:G=>{H({type:"SET_FILTERS",payload:G})}}),[W.selectedIndex,W.selectedRows,o,i]),y)return r.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--loading ${u}`,"data-testid":j,children:m||r.jsx("div",{className:"aria-tabs-datagrid__loading",children:r.jsx("div",{className:"nhsuk-spinner",role:"status","aria-label":"Loading data",children:r.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Loading..."})})})});if(g)return r.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--error ${u}`,"data-testid":j,children:C||r.jsxs("div",{className:"aria-tabs-datagrid__error",role:"alert",children:[r.jsx("h3",{className:"nhsuk-error-summary__title",children:"Error loading data"}),r.jsx("p",{children:g})]})});const oe=k.useRef(null),ue=k.useRef(null),he=k.useRef(null),[we,Ne]=k.useState(!0);k.useEffect(()=>{if(!M){Ne(!1);return}if(D||w){Ne(!1);return}function G(){if(!oe.current||!ue.current||!he.current)return;const be=oe.current.clientWidth,xe=Array.from(ue.current.querySelectorAll(":scope > .aria-tabs-datagrid__tab")),ke=xe.reduce((Se,Me)=>Se+Me.offsetWidth,0),He=he.current.offsetWidth,je=Math.max(8*(xe.length-1),0),Ie=ke+je+He+N<=be;Ne(Ie)}const re=requestAnimationFrame(()=>G()),ye=new ResizeObserver(()=>G());return oe.current&&ye.observe(oe.current),ue.current&&ye.observe(ue.current),()=>{cancelAnimationFrame(re),ye.disconnect()}},[M,N,w,o.length,D]);const ze=he,Ve=k.useCallback(()=>ze.current?Array.from(ze.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(G=>!G.hasAttribute("disabled")):[],[]),ot=k.useCallback(G=>{const re=Ve();if(!re.length)return;const ye=Math.max(0,Math.min(G,re.length-1));re[ye].focus(),Y(be=>({...be,focusArea:"actions",focusedActionIndex:ye}))},[Ve]),Xe=k.useCallback(()=>ot(0),[ot]),ce=k.useCallback((G,re)=>{const{key:ye}=G,be=o.length-1;switch(ye){case"ArrowUp":{M&&!we&&(G.preventDefault(),Xe());break}case"ArrowLeft":{G.preventDefault();const xe=re>0?re-1:be;Le(xe),_e(xe),z.current[xe]?.focus();break}case"ArrowRight":{if(G.preventDefault(),re===be&&M&&we){Xe();return}const xe=re<be?re+1:0;Le(xe),_e(xe),z.current[xe]?.focus();break}case"ArrowDown":{G.preventDefault(),Y(xe=>({...xe,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));break}case"Home":{G.preventDefault(),Le(0),_e(0),z.current[0]?.focus();break}case"End":{G.preventDefault(),Le(be),_e(be),z.current[be]?.focus();break}case"Enter":case" ":{G.preventDefault(),Le(re);break}case"Tab":{!G.shiftKey&&re===be&&M&&we&&Xe();break}}},[o.length,Le,_e,M,we,Xe]),$e=k.useCallback(G=>{const{key:re}=G,ye=Ve();if(!ye.length)return;const be=ye.findIndex(xe=>xe===document.activeElement);switch(re){case"ArrowLeft":{if(we)if(be>0)G.preventDefault(),ot(be-1);else{G.preventDefault();const xe=o.length-1;Le(xe),_e(xe),z.current[xe]?.focus(),Y(ke=>({...ke,focusArea:"tabs",focusedTabIndex:xe}))}break}case"ArrowRight":{we&&(be<ye.length-1?(G.preventDefault(),ot(be+1)):(G.preventDefault(),Le(0),_e(0),z.current[0]?.focus(),Y(xe=>({...xe,focusArea:"tabs",focusedTabIndex:0}))));break}case"ArrowDown":{if(we)G.preventDefault(),Y(xe=>({...xe,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));else{G.preventDefault();const xe=W.selectedIndex;z.current[xe]?.focus(),Y(ke=>({...ke,focusArea:"tabs",focusedTabIndex:xe}))}break}}},[Ve,we,ot,o.length,Le,_e,W.selectedIndex]);return r.jsxs("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--${h} ${u}`,id:p,"data-testid":j,ref:oe,children:[d&&!L&&r.jsx("div",{id:$,className:"nhsuk-u-visually-hidden",children:d}),r.jsx("div",{className:"aria-tabs-datagrid__navigation-help sr-only",id:O,children:"Keyboard navigation: Use Tab to move between tabs and grid. Arrow keys navigate within tabs and grid cells. Enter activates tabs and sorts columns. Arrow Down from tabs moves to table headers. Arrow Down from headers moves to table cells. Use Arrow keys to navigate between cells."}),A==="header"&&r.jsx(rr,{sortConfig:W.sortConfig||[],columns:o.flatMap(G=>G.columns.map(re=>({key:re.key,label:re.label}))).filter((G,re,ye)=>ye.findIndex(be=>be.key===G.key)===re),onSortChange:G=>{H({type:"SET_SORT",payload:G})},ariaLabel:"Data grid sort configuration"}),M&&(!we||D)&&r.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above",ref:he,role:"toolbar","aria-label":"Additional actions",onKeyDown:$e,children:M}),!D&&r.jsxs("div",{className:`aria-tabs-datagrid__tabs-wrapper ${we?"aria-tabs-datagrid__tabs-wrapper--inline-actions":""}`,children:[r.jsx("div",{role:"tablist","aria-label":c,"aria-describedby":d?L?d:$:O,"aria-orientation":h,className:"aria-tabs-datagrid__tabs",ref:ue,children:o.map((G,re)=>{const ye=re===W.selectedIndex,be=G.disabled||f;return r.jsxs("button",{role:"tab",id:`tab-${G.id}`,"aria-controls":`panel-${G.id}`,"aria-selected":ye,"aria-disabled":be,tabIndex:ye?0:-1,ref:xe=>{z.current[re]=xe},onClick:()=>Le(re),onKeyDown:xe=>ce(xe,re),disabled:be,className:["aria-tabs-datagrid__tab",ye?"aria-tabs-datagrid__tab--selected":"",be?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[r.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:G.label}),W.tabLoadingStates[re]&&r.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),W.tabErrors[re]&&r.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},G.id)})}),M&&we&&r.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline",ref:he,role:"toolbar","aria-label":"Additional actions",onKeyDown:$e,children:M})]}),v&&S&&(()=>{const G=D?0:W.selectedIndex,re=te[G]||new Set;if(re.size===0)return null;const ye=o[G],be=ye?ye.columns.filter(xe=>re.has(xe.key)).map(xe=>xe.label):[];return r.jsxs("div",{className:"aria-tabs-datagrid__collapsed-indicator",children:[r.jsx("div",{className:"nhsuk-u-visually-hidden","aria-live":"polite",ref:ve}),r.jsxs("div",{className:"collapsed-chip-wrapper",children:[r.jsxs("button",{ref:de,type:"button",className:"collapsed-chip",title:`Collapsed columns: ${be.join(", ")}`,onClick:()=>se(xe=>!xe),children:[re.size," hidden column",re.size===1?"":"s"]}),Z&&r.jsx("div",{className:"collapsed-popover",role:"dialog","aria-label":"Collapsed columns",children:r.jsx("ul",{children:be.map((xe,ke)=>r.jsx("li",{children:xe},ke))})})]})]})})(),A==="above"&&r.jsx(rr,{sortConfig:W.sortConfig||[],columns:o.flatMap(G=>G.columns.map(re=>({key:re.key,label:re.label}))).filter((G,re,ye)=>ye.findIndex(be=>be.key===G.key)===re),onSortChange:G=>{H({type:"SET_SORT",payload:G})},ariaLabel:"Data grid sort configuration"}),o.map((G,re)=>{const ye=D?re===0:re===W.selectedIndex;return r.jsx("div",{role:D?void 0:"tabpanel",id:D?void 0:`panel-${G.id}`,"aria-labelledby":D?void 0:`tab-${G.id}`,tabIndex:0,hidden:!ye,ref:be=>{K.current[re]=be},className:`aria-tabs-datagrid__panel ${G.className||""}`,"data-tab-panel":re,children:ye&&(()=>{const be=G.data.some(ke=>"ews_data"in ke)?ne(G.data,W.filters):G.data,xe=k.useMemo(()=>{const ke=W.sortConfig;if(!ke||ke.length===0)return be;const He=qo(G.columns,ke,Tn.Last,a?.sortingOptions);return[...be].sort(He)},[be,W.sortConfig,G.columns,a?.sortingOptions]);return r.jsx("div",{className:"aria-tabs-datagrid__scroll",ref:Q,onKeyDown:q,style:{"--atd-min-col-w":typeof I=="number"?`${I}px`:I||void 0},children:r.jsxs("table",{className:"nhsuk-table aria-tabs-datagrid__grid",role:"grid","aria-label":G.ariaLabel,"aria-describedby":G.ariaDescription?`panel-${G.id}-description`:void 0,children:[G.ariaDescription&&r.jsx("caption",{className:"nhsuk-u-visually-hidden",id:`panel-${G.id}-description`,children:G.ariaDescription}),r.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:r.jsx("tr",{role:"row",children:me(re).map((ke,He)=>{const je=W.sortConfig?.find(Me=>Me.key===ke.key),Ie=!!je,Se=E.focusArea==="headers"&&E.focusedHeaderIndex===He;return r.jsx("th",{className:`sortable-header ${Se?"sortable-header--focused":""} ${Ie?"sortable-header--sorted":""}`,role:"columnheader",tabIndex:Se?0:-1,onClick:()=>le(re,ke.key),onKeyDown:Me=>V(Me,He),"aria-sort":Ie?je?.direction==="asc"?"ascending":"descending":"none",style:{minWidth:ke.minWidth!==void 0?typeof ke.minWidth=="number"?`${ke.minWidth}px`:ke.minWidth:typeof I=="number"?`${I}px`:I||void 0},children:r.jsxs("div",{className:"header-content",children:[r.jsx("span",{className:"header-label",children:ke.label}),r.jsxs("div",{className:`sort-indicator-container ${Ie?`sort-indicator--${je?.direction}`:""}`,children:[W.sortConfig&&W.sortConfig.length>0&&W.sortConfig.findIndex(Me=>Me.key===ke.key)!==-1&&r.jsx("span",{className:`sort-priority sort-priority--priority-${W.sortConfig.findIndex(Me=>Me.key===ke.key)+1}`,"data-priority":W.sortConfig.findIndex(Me=>Me.key===ke.key)+1,title:`Sort priority: ${W.sortConfig.findIndex(Me=>Me.key===ke.key)+1}`,children:W.sortConfig.findIndex(Me=>Me.key===ke.key)+1}),Ie&&r.jsx("svg",{className:`nhsuk-icon sort-arrow sort-arrow--${je?.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:r.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})]})]})},ke.key)})})}),r.jsx("tbody",{className:"nhsuk-table__body",role:"rowgroup",children:xe.map((ke,He)=>{const je=W.globalSelectedRowData&&Ge(W.globalSelectedRowData,ke),Ie=E.focusArea==="cells"&&E.focusedRowIndex===He;return r.jsx("tr",{role:"row",className:`data-row ${je?"data-row--selected":""} ${Ie?"data-row--focused":""}`,"aria-selected":je,children:me(re).map((Se,Me)=>{const Je=ke[Se.key];let tt;Se.tableRenderer?tt=Se.tableRenderer(ke):Se.render?tt=Se.render(ke):tt=Je;const Ee=E.focusArea==="cells"&&E.focusedRowIndex===He&&E.focusedColumnIndex===Me,Pe=()=>{if(Se.customRenderer){const Ue=Se.customRenderer(Je,ke);return r.jsx("span",{className:"data-cell__custom","data-custom-rendered":"true",children:Ue})}return typeof Je=="boolean"&&tt===Je?r.jsxs(r.Fragment,{children:[ge(Je),r.jsx("span",{className:"nhsuk-u-visually-hidden",children:Je?"Yes":"No"})]}):k.isValidElement(tt)||typeof tt!="object"?tt??"":tt};return r.jsx("td",{role:"gridcell",className:`data-cell ${Ee?"data-cell--focused":""}`,tabIndex:Ee?0:-1,style:{minWidth:Se.minWidth!==void 0?typeof Se.minWidth=="number"?`${Se.minWidth}px`:Se.minWidth:typeof I=="number"?`${I}px`:I||void 0},onClick:()=>{const Vt=W.globalSelectedRowData&&Ge(W.globalSelectedRowData,ke)?null:ke;H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:Vt})},onKeyDown:Ue=>ie(Ue,He,Me),children:Pe()},Se.key)})},He)})})]})})})()},G.id)}),A==="below"&&r.jsx(rr,{sortConfig:W.sortConfig||[],columns:o.flatMap(G=>G.columns.map(re=>({key:re.key,label:re.label}))).filter((G,re,ye)=>ye.findIndex(be=>be.key===G.key)===re),onSortChange:G=>{H({type:"SET_SORT",payload:G})},ariaLabel:"Data grid sort configuration"})]})}),xa={asc:"â†‘",desc:"â†“"},Nb=e=>[...e].sort((t,n)=>t.priority-n.priority);function Jo(e){return e.map((t,n)=>({...t,priority:n}))}function jb(e){return e.length>0?Math.max(...e.map(t=>t.priority)):-1}function Mb(e,t){const n=t.find(a=>a.id===e);return n?n.priority>0:!1}function Ib(e,t){const n=t.find(o=>o.id===e),a=jb(t);return n?n.priority<a:!1}const Db=({sortConfig:e,onSortChange:t,className:n="",emptyDescription:a="No sorting applied",activeDescription:o,showReset:s=!0,showHelp:i=!0,disabled:l=!1,ariaLabel:c="Sort configuration",ariaDescribedBy:d})=>{const u=k.useMemo(()=>Nb(e),[e]),f=k.useCallback(j=>{if(l)return;const M=e.map(N=>N.id===j?{...N,direction:N.direction==="asc"?"desc":"asc"}:N);t(M)},[e,t,l]),h=k.useCallback(j=>{if(l)return;const M=e.findIndex(w=>w.id===j);if(M<=0)return;const N=[...e];[N[M],N[M-1]]=[N[M-1],N[M]],t(Jo(N))},[e,t,l]),p=k.useCallback(j=>{if(l)return;const M=e.findIndex(w=>w.id===j);if(M>=e.length-1||M===-1)return;const N=[...e];[N[M],N[M+1]]=[N[M+1],N[M]],t(Jo(N))},[e,t,l]),y=k.useCallback(j=>{if(l)return;const M=e.filter(N=>N.id!==j);t(Jo(M))},[e,t,l]),m=k.useCallback(()=>{l||t([])},[t,l]),g=()=>{if(e.length===0)return a;if(o)return o;const j=u.map((M,N)=>{const w=M.direction==="asc"?"ascending":"descending";return`${N+1}. ${M.label} (${w})`});if(j.length===1)return`Sorted by: ${j[0]}`;if(j.length===2)return`Sorted by: ${j.join(" and ")}`;{const M=j.pop();return`Sorted by: ${j.join(", ")}, and ${M}`}},C=k.useMemo(()=>{const j=["sort-description"];return i&&j.push("sort-help"),d&&j.push(d),j.join(" ")},[i,d]);return e.length===0?r.jsx("div",{className:`sort-status-control sort-status-control--empty ${n}`,children:r.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:g()})}):r.jsxs("div",{className:`sort-status-control ${n}`,children:[r.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:g()}),r.jsxs("div",{className:"sort-status-control__tags",role:"list","aria-label":c,"aria-describedby":C,children:[r.jsx("div",{className:"sort-status-control__tags-label",children:"Current sorting:"}),u.map(j=>r.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",children:r.jsx(nt,{text:"",color:"blue",className:"sort-status-control__tag",closable:!0,onClose:()=>y(j.id),disabled:l,children:r.jsxs("div",{className:"sort-status-control__tag-content",children:[r.jsx("span",{className:"sort-status-control__tag-priority",children:j.priority+1}),r.jsx("span",{className:"sort-status-control__tag-label",children:j.label}),r.jsx("button",{type:"button",className:"sort-status-control__tag-direction",onClick:()=>f(j.id),disabled:l,"aria-label":`Toggle sort direction for ${j.label}. Currently ${j.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:j.direction==="asc"?xa.asc:xa.desc}),r.jsxs("div",{className:"sort-status-control__tag-actions",children:[r.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>h(j.id),disabled:l||!Mb(j.id,e),"aria-label":`Move ${j.label} sort up in priority`,title:"Move up in priority",children:"â–²"}),r.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>p(j.id),disabled:l||!Ib(j.id,e),"aria-label":`Move ${j.label} sort down in priority`,title:"Move down in priority",children:"â–¼"})]})]})})},j.id))]}),s&&r.jsx("div",{className:"sort-status-control__actions",children:r.jsx(dt,{variant:"secondary",onClick:m,disabled:l,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})}),i&&r.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:r.jsxs("small",{children:["Click ",xa.asc,"/",xa.desc," ","to toggle ascending/descending. Use â–²/â–¼ to change sort priority. Click Ã— to remove a sort."]})})]})},va=(e,t)=>t.map(n=>({id:n.id,label:n.label,data:n.filter?n.filter(e):e,columns:n.columns.map(a=>({key:a.key,label:a.label,render:a.render,customRenderer:a.customRenderer})),sortConfig:n.sortConfig,ariaLabel:n.ariaLabel||`${n.label} Data Grid`,ariaDescription:n.ariaDescription||`Data grid showing ${n.label.toLowerCase()}`,className:n.className,disabled:n.disabled})),Xo=[{value:!0,icon:r.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"100%",height:"34",children:r.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})})},{value:!1,icon:r.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"100%",height:"34",children:[r.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),r.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]})}],Tb=(e,t)=>!e||!t?e===t:e.name&&e.bed_name&&t.name&&t.bed_name?e.name===t.name&&e.bed_name===t.bed_name:JSON.stringify(e)===JSON.stringify(t),Lb=(e,t)=>t?e.filter(n=>{if(t.ewsScoreRange){const[a,o]=t.ewsScoreRange;if(n.ews_score<a||n.ews_score>o)return!1}return!(t.wards&&t.wards.length>0&&!t.wards.includes(n.ward_name)||t.specialties&&t.specialties.length>0&&!t.specialties.includes(n.speciality)||t.dischargeStatuses&&t.dischargeStatuses.length>0&&!t.dischargeStatuses.includes(n.early_discharge_notification)||t.avpuLevels&&t.avpuLevels.length>0&&!t.avpuLevels.includes(n.ews_data.avpu)||t.medicallyOptimised!==null&&t.medicallyOptimised!==void 0&&n.medically_optimised!==t.medicallyOptimised||t.fastTrack!==null&&t.fastTrack!==void 0&&n.fast_track!==t.fastTrack)}):e,Ab=e=>{if(typeof e=="boolean"){const n=Xo.find(a=>a.value===e);return n?n.icon:null}const t=Xo.find(n=>n.value===e);return t?t.icon:String(e)},Eb=e=>`${e.name}-${e.bed_name}`,$b=()=>({overview:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"bed_name",label:"Bed"},{key:"ews_score",label:"EWS Score"},{key:"speciality",label:"Specialty"},{key:"consultant",label:"Consultant"}],vitals:[{key:"name",label:"Patient Name"},{key:"ews_score",label:"EWS Score"},{key:"respiratory_rate_bpm",label:"Respiratory Rate",render:e=>e.ews_data.respiratory_rate_bpm},{key:"sp02",label:"SpO2 %",render:e=>e.ews_data.sp02},{key:"temperature",label:"Temperature Â°C",render:e=>e.ews_data.temperature},{key:"systolic_bp",label:"Systolic BP",render:e=>e.ews_data.systolic_bp},{key:"heart_rate",label:"Heart Rate",render:e=>e.ews_data.heart_rate},{key:"avpu",label:"AVPU",render:e=>e.ews_data.avpu.toUpperCase()}],discharge:[{key:"name",label:"Patient Name"},{key:"anticipated_discharge_date",label:"Anticipated Discharge",render:e=>new Date(e.anticipated_discharge_date).toLocaleDateString()},{key:"early_discharge_notification",label:"Discharge Status"},{key:"medically_optimised",label:"Medically Optimised"},{key:"criteria_to_reside",label:"Criteria to Reside"},{key:"fast_track",label:"Fast Track"},{key:"transport_status",label:"Transport Status"},{key:"pathway",label:"Pathway"}],logistics:[{key:"name",label:"Patient Name"},{key:"ward_name",label:"Ward"},{key:"room_name",label:"Room"},{key:"bed_name",label:"Bed"},{key:"bed_type",label:"Bed Type"},{key:"transport_booking",label:"Transport Booked"},{key:"transport_mobility",label:"Transport Type"},{key:"district_nurse_referral",label:"District Nurse"},{key:"equipment",label:"Equipment"}]}),Fb=e=>{const t=$b();return[{id:"overview",label:"Patient Overview",data:e,columns:t.overview,ariaLabel:"Patient Overview Data Grid",ariaDescription:"Overview of all patients with basic information"},{id:"vitals",label:"Vital Signs & EWS",data:e,columns:t.vitals,sortConfig:[{key:"ews_score",direction:"desc"},{key:"name",direction:"asc"},{key:"ward_name",direction:"asc"}],ariaLabel:"Patient Vital Signs Data Grid",ariaDescription:"Patient vital signs and Early Warning Scores"},{id:"discharge",label:"Discharge Planning",data:e.filter(n=>n.anticipated_discharge_date),columns:t.discharge,sortConfig:[{key:"anticipated_discharge_date",direction:"asc"},{key:"discharge_status",direction:"desc"}],ariaLabel:"Discharge Planning Data Grid",ariaDescription:"Patient discharge planning and status information"},{id:"logistics",label:"Bed Management",data:e,columns:t.logistics,sortConfig:[{key:"ward_name",direction:"asc"}],ariaLabel:"Bed Management Data Grid",ariaDescription:"Patient location and logistics information"}]},lc={dataComparator:Tb,filterFunction:Lb,booleanRenderer:Ab,getDataId:Eb};function cc(e,t,n){const{primaryField:a,secondaryFields:o=[],badges:s=[],hiddenFields:i=[],getPriority:l,getVariant:c,fieldRenderers:d={},classPrefix:u="adaptive-card"}=n,f=t.find(M=>M.key===a),h=f?.cardRenderer?f.cardRenderer(e):f?.render?f.render(e):e[a||"name"]||"Untitled",p=()=>o.filter(N=>!i.includes(N)&&e[N]).slice(0,3).map(N=>{const w=t.find(x=>x.key===N),_=e[N],I=d[N]?d[N](_,e):w?.cardRenderer?w.cardRenderer(e):w?.render?w.render(e):_;return`${w?.label||N}: ${I}`}).join(" â€¢ "),y=()=>s.length===0?null:s.filter(M=>e[M.fieldKey]!==void 0).map(M=>{const N=e[M.fieldKey],w=M.render?M.render(N,e):N;return`<span class="nhsuk-tag ${Pb(M,N)}">${w}</span>`}).join(""),m=()=>c?c(e):l?.(e)==="high"?"primary":"default",g=y(),C=p(),j=g?`${C}${g?`<div class="adaptive-card__badges">${g}</div>`:""}`:C;return{variant:m(),heading:String(h),descriptionHtml:j,className:`adaptive-card ${u}`,"aria-label":`Record for ${h}`}}function Pb(e,t){const n=e.className||"adaptive-card__badge";if(e.fieldKey==="ews_score"||e.fieldKey.includes("score")){const a=Number(t);return a>=7?`${n} nhsuk-tag--red`:a>=3?`${n} nhsuk-tag--yellow`:`${n} nhsuk-tag--green`}if(e.fieldKey==="priority"){const a=String(t).toLowerCase();if(a==="high")return`${n} nhsuk-tag--red`;if(a==="medium")return`${n} nhsuk-tag--yellow`;if(a==="low")return`${n} nhsuk-tag--green`}if(e.fieldKey==="status"){const a=String(t).toLowerCase();if(a==="urgent"||a==="critical")return`${n} nhsuk-tag--red`;if(a==="pending"||a==="warning")return`${n} nhsuk-tag--yellow`;if(a==="completed"||a==="success")return`${n} nhsuk-tag--green`}switch(e.color){case"primary":return`${n} nhsuk-tag--blue`;case"secondary":return`${n} nhsuk-tag--grey`;case"success":return`${n} nhsuk-tag--green`;case"warning":return`${n} nhsuk-tag--yellow`;case"danger":return`${n} nhsuk-tag--red`;default:return n}}const Bb={primaryField:"name",secondaryFields:["id","description","status"],badges:[{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],hiddenFields:[],getPriority:e=>e.priority||"medium",getStatus:e=>e.status||"active",getVariant:e=>e.priority==="high"?"primary":"default",fieldRenderers:{},classPrefix:"adaptive-card--generic"},Ko=({data:e,columns:t,onSelect:n,onAction:a,priority:o="medium",status:s="active"})=>{const i=e.name,l=e.age,c=e.ward_name,d=e.bed_name,u=e.ews_score,f=e.speciality,h=e.consultant;return r.jsxs("div",{className:`healthcare-card healthcare-card--patient healthcare-card--${o} healthcare-card--${s}`,onClick:()=>n?.(e),role:"button",tabIndex:0,"aria-label":`Patient record for ${i}, Age ${l}, Ward ${c}, Bed ${d}`,children:[r.jsxs("div",{className:"healthcare-card__header",children:[r.jsxs("div",{className:"healthcare-card__identity",children:[r.jsx("h3",{className:"healthcare-card__patient-name",children:i}),r.jsxs("p",{className:"healthcare-card__age-info",children:[r.jsx("span",{className:"healthcare-card__label",children:"Age: "}),r.jsx("span",{className:"healthcare-card__value",children:l})]})]}),r.jsx("div",{className:"healthcare-card__badges",children:u!==void 0&&r.jsxs(nt,{color:zb(dc(u)),className:"healthcare-card__alert",children:["EWS: ",u]})})]}),r.jsx("div",{className:"healthcare-card__body",children:r.jsxs("dl",{className:"healthcare-card__details",children:[r.jsxs("div",{className:"healthcare-card__detail",children:[r.jsx("dt",{children:"Ward"}),r.jsx("dd",{children:c})]}),r.jsxs("div",{className:"healthcare-card__detail",children:[r.jsx("dt",{children:"Bed"}),r.jsx("dd",{children:d})]}),r.jsxs("div",{className:"healthcare-card__detail",children:[r.jsx("dt",{children:"Specialty"}),r.jsx("dd",{children:f})]}),r.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--prominent",children:[r.jsx("dt",{children:"Consultant"}),r.jsx("dd",{children:h})]})]})}),r.jsxs("div",{className:"healthcare-card__actions",children:[r.jsx(dt,{variant:"secondary",className:"healthcare-card__action",onClick:p=>{p.stopPropagation(),a?.("view-notes",e)},children:"Notes"}),r.jsx(dt,{variant:"secondary",className:"healthcare-card__action",onClick:p=>{p.stopPropagation(),a?.("view-vitals",e)},children:"Vitals"}),r.jsx(dt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:p=>{p.stopPropagation(),a?.("view-full",e)},children:"View Full Record"})]})]})},Qo=({data:e,onAction:t})=>r.jsxs("div",{className:"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[r.jsxs("div",{className:"healthcare-card__header",children:[r.jsxs("div",{className:"healthcare-card__time-info",children:[r.jsx("h3",{className:"healthcare-card__time",children:new Date(e.appointment_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),r.jsx("p",{className:"healthcare-card__type",children:e.appointment_type})]}),r.jsxs("div",{className:"healthcare-card__badges",children:[r.jsx(nt,{color:Rb(e.status||"active"),className:"healthcare-card__status",children:(e.status||"active").charAt(0).toUpperCase()+(e.status||"active").slice(1)}),r.jsxs(nt,{color:"grey",className:"healthcare-card__duration",children:[e.duration||"30"," min"]})]})]}),r.jsx("div",{className:"healthcare-card__body",children:r.jsxs("dl",{className:"healthcare-card__details",children:[r.jsxs("div",{className:"healthcare-card__detail",children:[r.jsx("dt",{children:"Patient"}),r.jsx("dd",{children:e.patient_name})]}),r.jsxs("div",{className:"healthcare-card__detail",children:[r.jsx("dt",{children:"Consultant"}),r.jsx("dd",{children:e.consultant})]}),r.jsxs("div",{className:"healthcare-card__detail",children:[r.jsx("dt",{children:"Location"}),r.jsx("dd",{children:e.location})]})]})}),r.jsxs("div",{className:"healthcare-card__actions",children:[r.jsx(dt,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),r.jsx(dt,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Reschedule"})]})]}),es=({data:e,onAction:t})=>r.jsxs("div",{className:"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[r.jsxs("div",{className:"healthcare-card__header",children:[r.jsxs("div",{className:"healthcare-card__medication-info",children:[r.jsx("h3",{className:"healthcare-card__medication-name",children:e.medication}),r.jsxs("p",{className:"healthcare-card__dose",children:[e.dose," â€¢ ",e.frequency]})]}),r.jsxs("div",{className:"healthcare-card__badges",children:[r.jsx(nt,{color:"blue",className:"healthcare-card__route",children:e.route}),e.next_due&&r.jsxs(nt,{color:"red",className:"healthcare-card__warning",children:["Due: ",new Date(e.next_due).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),r.jsx("div",{className:"healthcare-card__body",children:r.jsxs("dl",{className:"healthcare-card__details",children:[r.jsxs("div",{className:"healthcare-card__detail",children:[r.jsx("dt",{children:"Patient"}),r.jsx("dd",{children:e.patient_name})]}),r.jsxs("div",{className:"healthcare-card__detail",children:[r.jsx("dt",{children:"Prescriber"}),r.jsx("dd",{children:e.prescriber})]}),e.allergies&&r.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--urgent",children:[r.jsx("dt",{children:"Allergies"}),r.jsx("dd",{children:e.allergies})]})]})}),r.jsxs("div",{className:"healthcare-card__actions",children:[r.jsx(dt,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),r.jsx(dt,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Adjust Dose"})]})]}),ts=({data:e,onSelect:t,onAction:n,priority:a="medium"})=>{const o=e.name,s=e.ews_score,i=e.ews_data?.respiratory_rate_bpm,l=e.ews_data?.sp02,c=e.ews_data?.temperature,d=e.ews_data?.systolic_bp,u=e.ews_data?.heart_rate,f=e.ews_data?.avpu;return r.jsxs("div",{className:`healthcare-card healthcare-card--vitals healthcare-card--${a}`,onClick:()=>t?.(e),role:"button",tabIndex:0,"aria-label":`Vital signs for ${o}, EWS Score ${s}`,children:[r.jsxs("div",{className:"healthcare-card__header",children:[r.jsxs("div",{className:"healthcare-card__vitals-summary",children:[r.jsx("h3",{className:"healthcare-card__patient-name",children:o}),s!==void 0&&r.jsxs("p",{className:`healthcare-card__ews-score healthcare-card__ews-score--${Hb(s)}`,children:["EWS: ",s]})]}),r.jsx("div",{className:"healthcare-card__badges",children:f&&r.jsxs(nt,{color:"blue",className:"healthcare-card__avpu",children:["AVPU: ",f.toUpperCase()]})})]}),r.jsx("div",{className:"healthcare-card__body",children:r.jsxs("div",{className:"healthcare-card__vitals-grid",children:[i!==void 0&&r.jsxs("div",{className:"healthcare-card__vital",children:[r.jsx("span",{className:"healthcare-card__vital-label",children:"Respiratory Rate"}),r.jsxs("span",{className:"healthcare-card__vital-value",children:[i," bpm"]})]}),l!==void 0&&r.jsxs("div",{className:"healthcare-card__vital",children:[r.jsx("span",{className:"healthcare-card__vital-label",children:"SpO2"}),r.jsxs("span",{className:"healthcare-card__vital-value",children:[l,"%"]})]}),c!==void 0&&r.jsxs("div",{className:"healthcare-card__vital",children:[r.jsx("span",{className:"healthcare-card__vital-label",children:"Temperature"}),r.jsxs("span",{className:"healthcare-card__vital-value",children:[c,"Â°C"]})]}),d!==void 0&&r.jsxs("div",{className:"healthcare-card__vital",children:[r.jsx("span",{className:"healthcare-card__vital-label",children:"Systolic BP"}),r.jsx("span",{className:"healthcare-card__vital-value",children:d})]}),u!==void 0&&r.jsxs("div",{className:"healthcare-card__vital",children:[r.jsx("span",{className:"healthcare-card__vital-label",children:"Heart Rate"}),r.jsxs("span",{className:"healthcare-card__vital-value",children:[u," bpm"]})]})]})}),r.jsxs("div",{className:"healthcare-card__actions",children:[r.jsx(dt,{variant:"secondary",className:"healthcare-card__action",onClick:h=>{h.stopPropagation(),n?.("view-trend",e)},children:"Trend"}),r.jsx(dt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:h=>{h.stopPropagation(),n?.("record-new",e)},children:"Record New"})]})]})};function dc(e){const t=typeof e=="string"?parseInt(e,10):e;return t>=7?"critical":t>=5?"high":t>=3?"medium":"low"}function Hb(e){return dc(e)}function zb(e){switch(e){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"grey";default:return"grey"}}function Rb(e){switch(e.toLowerCase()){case"active":return"blue";case"pending":return"orange";case"completed":return"green";case"cancelled":return"grey";default:return"blue"}}const Ob=[{fieldKey:"ews_score",render:e=>`EWS: ${e}`,className:"adaptive-card__ews-badge",color:"default"},{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],uc=e=>e.ews_score&&Number(e.ews_score)>=7?"high":e.ews_score&&Number(e.ews_score)>=3?"medium":e.priority==="high"||e.status==="urgent"?"high":e.priority==="low"?"low":"medium",fc={name:"healthcare",defaultCardConfig:{primaryField:"name",secondaryFields:["nhs_number","ward","condition","consultant"],badges:Ob,hiddenFields:[],getPriority:uc,getStatus:e=>{if(e.status){const t=e.status.toLowerCase();if(["active","pending","completed","cancelled","urgent"].includes(t))return t}return"active"},getVariant:e=>uc(e)==="high"||e.status==="urgent"?"primary":"default",fieldRenderers:{nhs_number:e=>e?`NHS: ${e}`:"",ews_score:e=>{const t=Number(e),n=t>=7?"HIGH":t>=3?"MEDIUM":"LOW";return`EWS: ${e} (${n})`},age:(e,t)=>t.dob?`${new Date().getFullYear()-new Date(t.dob).getFullYear()}y`:e?`${e}y`:""},classPrefix:"adaptive-card--healthcare"},cssImport:"./HealthcareCardTemplates.scss",cardTemplates:{patient:(e,t,n)=>{const a=n.getPriority?.(e)||"medium",o=n.getStatus?.(e)||"active",s=o==="urgent"?"active":o;return r.jsx(Ko,{data:e,columns:t,priority:a,status:s,onSelect:i=>console.log("Patient selected:",i),onAction:(i,l)=>console.log("Patient action:",i,l)})},appointment:(e,t,n)=>{const a=n.getStatus?.(e)||"pending",o=a==="urgent"?"pending":a;return r.jsx(Qo,{data:e,columns:t,status:o,onSelect:s=>console.log("Appointment selected:",s),onAction:(s,i)=>console.log("Appointment action:",s,i)})},medication:(e,t,n)=>{const a=n.getPriority?.(e)||"medium";return r.jsx(es,{data:e,columns:t,priority:a,onSelect:o=>console.log("Medication selected:",o),onAction:(o,s)=>console.log("Medication action:",o,s)})},vitals:(e,t,n)=>{const a=n.getPriority?.(e)||"medium";return r.jsx(ts,{data:e,columns:t,priority:a,onSelect:o=>console.log("Vitals selected:",o),onAction:(o,s)=>console.log("Vitals action:",o,s)})}},fieldTypes:{isNHSNumber:e=>typeof e=="string"&&/^\d{3}\s?\d{3}\s?\d{4}$/.test(e.replace(/\s/g,"")),isEWSScore:e=>typeof e=="number"&&e>=0&&e<=20,isMedicalDate:e=>typeof e=="string"&&!isNaN(Date.parse(e))}};function hc(e){return{primaryField:e?.primaryField||"name",secondaryFields:e?.secondaryFields||[],badges:e?.badgeFields?.map(t=>({fieldKey:t,className:"adaptive-card__badge"}))||[],hiddenFields:e?.hiddenFields||[],cardTemplate:e?.cardTemplate?(t,n,a)=>e.cardTemplate(t,n):void 0,classPrefix:"adaptive-card--generic"}}function pc(e){if(!e||e.length===0)return!1;const t=e[0];return t.ews_score!==void 0||t.nhs_number!==void 0||t.patient_name!==void 0||t.ward!==void 0||t.consultant!==void 0}function Ub(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const a=[...e.tabErrors];return a[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:a};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const o=[...e.selectedRows];return o[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:o};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:s}=t.payload,i=new Array(s).fill(!1),l=new Array(s).fill(null),c=new Array(s).fill([]);for(let d=0;d<Math.min(e.tabLoadingStates.length,s);d++)i[d]=e.tabLoadingStates[d],l[d]=e.tabErrors[d],c[d]=e.selectedRows[d];return{...e,tabLoadingStates:i,tabErrors:l,selectedRows:c};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}function Wb(e,t){const[n,a]=k.useState("cards");return k.useEffect(()=>{if(t){a(t);return}const o=()=>{const s=window.innerWidth;s<e.mobile?a("cards"):s<e.desktop?a("hybrid"):a("table")};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[e,t]),n}function Gb(e){return!e||typeof e!="object"?null:e.appointment_type||e.appointment_time||e.clinic?"appointment":e.medication_name||e.medication||e.dose||e.frequency?"medication":e.ews_score!==void 0||e.respiratory_rate!==void 0||e.spo2!==void 0||e.temperature!==void 0||e.systolic_bp!==void 0||e.heart_rate!==void 0?"vitals":e.name||e.patient_name||e.nhs_number||e.ward||e.bed?"patient":null}function Vb(e,t,n,a){const o=a?{...a.defaultCardConfig,...n}:{...Bb,...n};if(a&&a.cardTemplates){const s=Gb(e);if(s&&a.cardTemplates[s]){const i=a.cardTemplates[s](e,t,o);if(i)return{variant:"default",children:i}}}return o.cardTemplate&&o.cardTemplate(e,t,o),cc(e,t,o)}const ns=({breakpoints:e={mobile:768,tablet:1024,desktop:1200},forceLayout:t,cardConfig:n={},experimental:a={},enableAdvancedSorting:o=!1,topActions:s,bottomActions:i,gridActions:l,forceGridActionsAbove:c,hideTabsIfSingle:d,minColumnWidth:u,enableColumnCollapse:f,minVisibleColumns:h,showCollapsedColumnsIndicator:p,sortStatusPlacement:y,tabPanels:m,dataConfig:g,selectedIndex:C,onTabChange:j,ariaLabel:M="Data grid",ariaDescription:N,orientation:w="horizontal",id:_,disabled:I=!1,className:v,...x})=>{const S=Wb(e,t),A=C!==void 0,D=C??0,F=k.useMemo(()=>{if(m.some(V=>V.data&&V.data.length>0&&pc(V.data))){const V=hc(n);return{...fc.defaultCardConfig,...V}}else return hc(n)},[n,m]),T=k.useMemo(()=>m.some(V=>V.data&&V.data.length>0&&pc(V.data))?fc:void 0,[m]),L=k.useMemo(()=>({selectedIndex:D,tabLoadingStates:new Array(m.length).fill(!1),tabErrors:new Array(m.length).fill(null),sortConfig:[],selectedRows:new Array(m.length).fill([]),globalSelectedRowData:null,filters:void 0}),[D,m.length]),[$,O]=k.useReducer(Ub,L),J=k.useRef([]),ee=k.useRef([]),ae=k.useRef([]),R=k.useRef(null),[B,E]=k.useState({focusArea:d&&m.length===1?"sort-controls":"tabs",focusedTabIndex:0,focusedCardIndex:0,selectedCardIndex:-1,isGridActive:!1,focusedCardElementIndex:0,cardElements:[],isCardNavigationActive:!1,gridColumns:1,gridRows:1,cardSortConfig:null,focusedSortControlIndex:0,isSortControlsActive:!1}),Y=k.useCallback(U=>{if(!U.current)return{columns:1,rows:0};const V=U.current,ie=V.querySelectorAll(".aria-tabs-datagrid-adaptive__card-wrapper");if(ie.length===0)return{columns:1,rows:0};const ne=V.offsetWidth,ue=ie[0].offsetWidth,he=Math.floor(ne/ue)||1,we=Math.ceil(ie.length/he);return{columns:he,rows:we}},[]),P=k.useCallback((U,V)=>({row:Math.floor(U/V),col:U%V}),[]),W=k.useCallback((U,V,ie)=>U*ie+V,[]),H=k.useCallback((U,V,ie,ne)=>{const{row:oe,col:ue}=P(U,ne);let he=oe,we=ue;switch(V){case"up":he=Math.max(0,oe-1);break;case"down":he=Math.min(Math.floor((ie-1)/ne),oe+1);break;case"left":we=Math.max(0,ue-1);break;case"right":we=Math.min(ne-1,ue+1);break}const Ne=W(he,we,ne);return Math.min(Ne,ie-1)},[P,W]);k.useEffect(()=>{B.isCardNavigationActive&&B.focusedCardElementIndex>=0&&B.cardElements.length>0&&setTimeout(()=>{const U=B.cardElements[B.focusedCardElementIndex];U&&(U.element.focus(),U.element.scrollIntoView({block:"nearest",behavior:"smooth"}))},0)},[B.isCardNavigationActive,B.focusedCardElementIndex,B.cardElements.length]),k.useEffect(()=>{const U=()=>{if(S==="cards"&&R.current){const{columns:ne,rows:oe}=Y(R);E(ue=>({...ue,gridColumns:ne,gridRows:oe}))}},V=setTimeout(U,200),ie=()=>{setTimeout(U,100)};return window.addEventListener("resize",ie),()=>{clearTimeout(V),window.removeEventListener("resize",ie)}},[S,m,Y]),k.useEffect(()=>{const U=$.tabLoadingStates.length,V=m.length;U!==V&&O({type:"ADJUST_ARRAYS",payload:{newLength:V}})},[m.length,$.tabLoadingStates.length]),k.useEffect(()=>{A&&C!==$.selectedIndex&&O({type:"SET_SELECTED_INDEX",payload:C})},[A,C,$.selectedIndex]);const Q=k.useCallback(U=>{U>=0&&U<m.length&&!m[U].disabled&&(O({type:"SET_SELECTED_INDEX",payload:U}),j?.(U))},[m,j]),q=k.useCallback(U=>{console.log("Card selected:",U),O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:U})},[]),te=k.useCallback(U=>{const V=ee.current[U];V&&(V.focus(),V.scrollIntoView({block:"nearest",behavior:"smooth"}))},[]),fe=k.useCallback(U=>{const V=ee.current[U];if(!V)return[];const ie=['button:not([disabled]):not([aria-hidden="true"])','a[href]:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','select:not([disabled]):not([aria-hidden="true"])','textarea:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])','.healthcare-card__detail[tabindex]:not([tabindex="-1"])',".healthcare-card__action:not([disabled])",".tag:not([disabled])"].join(", "),ne=V.querySelectorAll(ie);return Array.from(ne).map((oe,ue)=>({id:oe.id||`card-${U}-element-${ue}`,element:oe,label:oe.getAttribute("aria-label")||oe.textContent?.trim()||oe.getAttribute("title")||`Element ${ue+1}`,type:oe.tagName.toLowerCase()==="button"?"button":oe.tagName.toLowerCase()==="a"?"link":["input","select","textarea"].includes(oe.tagName.toLowerCase())?"input":"generic"}))},[]),Z=k.useRef(null),se=k.useCallback(U=>{const V=Z.current;if(!V)return;const ie=document.createElement("div");ie.setAttribute("aria-live","polite"),ie.setAttribute("aria-atomic","true"),ie.className="sr-only",ie.textContent=U,V.appendChild(ie),setTimeout(()=>{V.contains(ie)&&V.removeChild(ie)},1e3)},[]),de=k.useCallback(U=>{const V=U.filter(ne=>ne.sortable!==!1),ie=[{value:"",label:"Sort by..."}];return V.forEach(ne=>{const oe=ne.label||ne.key;ne.key==="name"?ie.push({value:`${ne.key}-asc`,label:`${oe} (A-Z)`},{value:`${ne.key}-desc`,label:`${oe} (Z-A)`}):ne.key==="ews_score"||ne.key.includes("score")?ie.push({value:`${ne.key}-desc`,label:`${oe} (High-Low)`},{value:`${ne.key}-asc`,label:`${oe} (Low-High)`}):ne.key==="age"||ne.key.includes("date")||ne.key.includes("time")?ie.push({value:`${ne.key}-desc`,label:`${oe} (Oldest-Youngest)`},{value:`${ne.key}-asc`,label:`${oe} (Youngest-Oldest)`}):ie.push({value:`${ne.key}-asc`,label:`${oe} (A-Z)`},{value:`${ne.key}-desc`,label:`${oe} (Z-A)`})}),ie},[]),ve=k.useCallback((U,V)=>V?[...U].sort((ie,ne)=>{const oe=ie[V.key],ue=ne[V.key];if(oe==null&&ue==null)return 0;if(oe==null)return 1;if(ue==null)return-1;const he=Number(oe),we=Number(ue);if(!isNaN(he)&&!isNaN(we))return V.direction==="asc"?he-we:we-he;const Ne=String(oe).toLowerCase(),ze=String(ue).toLowerCase(),Ve=Ne.localeCompare(ze);return V.direction==="asc"?Ve:-Ve}):U,[]),me=k.useCallback(U=>{if(!U){E(Ne=>({...Ne,cardSortConfig:null})),se("Card sorting cleared");return}const[V,ie]=U.split("-"),ne={key:V,direction:ie};E(Ne=>({...Ne,cardSortConfig:ne}));const he=m[$.selectedIndex]?.columns.find(Ne=>Ne.key===V)?.label||V;se(`Cards sorted by ${he} in ${ie==="asc"?"ascending":"descending"} order`)},[m,$.selectedIndex,se]),De=k.useCallback(U=>{const ne=m[$.selectedIndex]?.columns.find(ue=>ue.key===U.key)?.label||U.key,oe=U.direction==="asc"?"ascending":"descending";return`${ne} (${oe})`},[m,$.selectedIndex]),Ge=k.useCallback(U=>{const V=m[$.selectedIndex];if(o){const ie=$.sortConfig;return!ie||ie.length===0?U:[...U].sort((ne,oe)=>{for(const{key:ue,direction:he}of ie){let we=ne[ue],Ne=oe[ue];const ze=V?.columns.find(G=>G.key===ue);if(ze?.cardRenderer?(we=ze.cardRenderer(ne),Ne=ze.cardRenderer(oe)):ze?.render&&(we=ze.render(ne),Ne=ze.render(oe)),we==null&&Ne==null)continue;if(we==null)return he==="asc"?-1:1;if(Ne==null)return he==="asc"?1:-1;const Ve=Number(we),ot=Number(Ne);if(!isNaN(Ve)&&!isNaN(ot)){const G=Ve-ot;if(G!==0)return he==="asc"?G:-G;continue}const Xe=String(we).toLowerCase(),ce=String(Ne).toLowerCase(),$e=Xe.localeCompare(ce);if($e!==0)return he==="asc"?$e:-$e}return 0})}else return ve(U,B.cardSortConfig)},[o,$.sortConfig,B.cardSortConfig,ve,m,$.selectedIndex]),Le=k.useCallback((U,V)=>{const ie=fe(U),ne=ie[V];if(ne){ne.element.scrollIntoView({block:"nearest",behavior:"smooth"});const oe=`Focused on ${ne.label}, ${ne.type} ${V+1} of ${ie.length} within card`;se(oe)}},[fe,se]),Ae=k.useCallback(U=>{J.current[U]?.focus()},[]),_e=k.useCallback(()=>{const U=ae.current[0];if(!U)return[];const V=['select:not([disabled]):not([aria-hidden="true"])','button:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])'].join(", "),ie=U.querySelectorAll(V);return Array.from(ie)},[]),z=k.useCallback(U=>{if(U===0){const V=ae.current[0],ie=V?.querySelector(".sort-controls-row");if(ie){ie.setAttribute("tabindex","-1"),ie.focus();const oe=`Sort controls group with ${_e().length} interactive elements. Press Enter or Space to begin navigating controls.`;se(oe)}else V&&V.focus()}else{const V=_e(),ie=U-1,ne=V[ie];if(ne){ne.focus();const oe=ne.tagName.toLowerCase()==="select",ue=ne.tagName.toLowerCase()==="button",he=oe?"dropdown":ue?"button":"control",we=oe?". Use Space key to open dropdown":"",Ne=`${he} ${ie+1} of ${V.length}${we}`;se(Ne)}}},[_e,se]),K=k.useCallback((U,V)=>{const{key:ie}=U,ne=m[$.selectedIndex],oe=ne?.data.length||0;if(ie==="ArrowLeft"&&U.shiftKey){U.preventDefault(),U.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(ie==="ArrowRight"&&U.shiftKey){U.preventDefault(),U.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!B.isCardNavigationActive){switch(ie){case"ArrowUp":if(U.preventDefault(),V===0)E(Ne=>({...Ne,focusArea:"sort-controls",focusedSortControlIndex:0,isSortControlsActive:!1})),z(0);else{const Ne=H(V,"up",oe,B.gridColumns);Ne!==V&&(E(ze=>({...ze,focusedCardIndex:Ne})),te(Ne),se(`Moved to card ${Ne+1} of ${oe}`))}break;case"ArrowDown":U.preventDefault();const ue=H(V,"down",oe,B.gridColumns);ue!==V&&(E(Ne=>({...Ne,focusedCardIndex:ue})),te(ue),se(`Moved to card ${ue+1} of ${oe}`));break;case"ArrowLeft":U.preventDefault();const he=H(V,"left",oe,B.gridColumns);he!==V?(E(Ne=>({...Ne,focusedCardIndex:he})),te(he),se(`Moved to card ${he+1} of ${oe}`)):$.selectedIndex>0&&(O({type:"SET_SELECTED_INDEX",payload:$.selectedIndex-1}),E(Ne=>({...Ne,focusArea:"tabs"})),setTimeout(()=>Ae($.selectedIndex-1),0));break;case"ArrowRight":U.preventDefault();const we=H(V,"right",oe,B.gridColumns);we!==V?(E(Ne=>({...Ne,focusedCardIndex:we})),te(we),se(`Moved to card ${we+1} of ${oe}`)):$.selectedIndex<m.length-1&&(O({type:"SET_SELECTED_INDEX",payload:$.selectedIndex+1}),E(Ne=>({...Ne,focusArea:"tabs"})),setTimeout(()=>Ae($.selectedIndex+1),0));break;case"Enter":if(ne?.data[V]){U.preventDefault(),E(ze=>({...ze,selectedCardIndex:V}));const Ne=fe(V);Ne.length>0?(E(ze=>({...ze,focusArea:"card",isCardNavigationActive:!0,focusedCardElementIndex:0,cardElements:Ne,selectedCardIndex:V})),se(`Card ${V+1} selected and navigation activated. ${Ne.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`)):se(`Card ${V+1} selected.`)}break;case" ":if(ne?.data[V]){U.preventDefault(),E(ze=>({...ze,selectedCardIndex:ze.selectedCardIndex===V?-1:V}));const Ne=B.selectedCardIndex===V;se(`Card ${V+1} ${Ne?"deselected":"selected"}.`)}break}return}switch(ie){case"ArrowUp":case"ArrowLeft":U.preventDefault();const ue=Math.max(0,B.focusedCardElementIndex-1);E(ze=>({...ze,focusedCardElementIndex:ue})),Le(V,ue);break;case"ArrowDown":case"ArrowRight":U.preventDefault();const he=Math.min(B.cardElements.length-1,B.focusedCardElementIndex+1);E(ze=>({...ze,focusedCardElementIndex:he})),Le(V,he);break;case"Enter":U.preventDefault();const we=B.cardElements[B.focusedCardElementIndex];we&&(we.element.click(),se(`Activated ${we.label}`));break;case" ":U.preventDefault();const Ne=B.cardElements[B.focusedCardElementIndex];if(Ne){const ze=new MouseEvent("dblclick",{bubbles:!0});Ne.element.dispatchEvent(ze),se(`Double-clicked ${Ne.label}`)}break;case"Escape":U.preventDefault(),E(ze=>({...ze,focusArea:"cards",isCardNavigationActive:!1,focusedCardElementIndex:0,cardElements:[]})),setTimeout(()=>te(V),0),se("Exited card navigation, returned to card level");break;case"Home":U.preventDefault(),B.cardElements.length>0&&(E(ze=>({...ze,focusedCardElementIndex:0})),Le(V,0));break;case"End":if(U.preventDefault(),B.cardElements.length>0){const ze=B.cardElements.length-1;E(Ve=>({...Ve,focusedCardElementIndex:ze})),Le(V,ze)}break}},[B,$.selectedIndex,m,q,te,Ae,E,fe,Le,se]),le=k.useCallback(U=>{const V=J.current[U],ie=V?.parentElement;if(!V||!ie){console.log("Tab or container not found for mobile scroll");return}const ne=V.getBoundingClientRect(),oe=ie.getBoundingClientRect();ne.left>=oe.left&&ne.right<=oe.right||(console.log("Tab not visible, scrolling into view (mobile)"),V.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[]),pe=k.useCallback((U,V)=>{if(S!=="cards")return;const{key:ie}=U;switch(ie){case"ArrowLeft":U.preventDefault();const ne=V>0?V-1:m.length-1;Q(ne),E(we=>({...we,focusedTabIndex:ne})),J.current[ne]?.focus(),le(ne);break;case"ArrowRight":U.preventDefault();const oe=V<m.length-1?V+1:0;Q(oe),E(we=>({...we,focusedTabIndex:oe})),J.current[oe]?.focus(),le(oe);break;case"ArrowDown":U.preventDefault();const ue=m[$.selectedIndex];ue&&ue.columns&&ue.columns.length>0?(E(we=>({...we,focusArea:"sort-controls",focusedSortControlIndex:0})),z(0)):(E(we=>({...we,focusArea:"cards",focusedCardIndex:0})),te(0));break;case"Home":U.preventDefault(),Q(0),E(we=>({...we,focusedTabIndex:0})),J.current[0]?.focus(),le(0);break;case"End":U.preventDefault();const he=m.length-1;Q(he),E(we=>({...we,focusedTabIndex:he})),J.current[he]?.focus(),le(he);break;case"Enter":case" ":U.preventDefault(),Q(V);break}},[m.length,Q,S,te,E,le]),ge=k.useCallback((U,V)=>{if(S!=="cards")return;const{key:ie}=U,ne=m[$.selectedIndex];if(V===0&&!B.isSortControlsActive){switch(ie){case"ArrowUp":U.preventDefault(),E(ue=>({...ue,focusArea:"tabs",isSortControlsActive:!1})),Ae($.selectedIndex);break;case"ArrowDown":U.preventDefault(),ne?.data&&ne.data.length>0&&(E(ue=>({...ue,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),te(0));break;case"Enter":case" ":U.preventDefault();const oe=_e();if(oe.length>0){E(he=>({...he,isSortControlsActive:!0,focusedSortControlIndex:1})),z(1);const ue=`Entered sort controls navigation mode. ${oe.length} controls available. Use arrow keys to navigate between controls.`;se(ue)}break;case"Escape":U.preventDefault(),E(ue=>({...ue,isSortControlsActive:!1,focusArea:"tabs"})),Ae($.selectedIndex);break}return}if(B.isSortControlsActive){const ue=_e().length;switch(ie){case"ArrowLeft":U.preventDefault();const he=B.focusedSortControlIndex>1?B.focusedSortControlIndex-1:ue;E(Ne=>({...Ne,focusedSortControlIndex:he})),z(he);break;case"ArrowRight":U.preventDefault();const we=B.focusedSortControlIndex<ue?B.focusedSortControlIndex+1:1;E(Ne=>({...Ne,focusedSortControlIndex:we})),z(we);break;case"ArrowDown":if(U.preventDefault(),B.isSortControlsActive){const Ne=B.focusedSortControlIndex<ue?B.focusedSortControlIndex+1:1;E(ze=>({...ze,focusedSortControlIndex:Ne})),z(Ne)}else ne?.data&&ne.data.length>0&&(E(Ne=>({...Ne,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),te(0));break;case"ArrowUp":U.preventDefault(),E(Ne=>({...Ne,isSortControlsActive:!1,focusArea:"sort-controls"})),z(0);break;case"Escape":U.preventDefault(),E(Ne=>({...Ne,isSortControlsActive:!1,focusArea:"sort-controls",focusedSortControlIndex:0})),z(0);break}}},[S,m,$.selectedIndex,B.isSortControlsActive,B.focusedSortControlIndex,z,Ae,te,E,se]);if(S==="cards"){const U=!!d&&m.length===1,V=U?m[0]:m[$.selectedIndex];return r.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${v||""}`,children:[r.jsxs("div",{className:"aria-tabs-datagrid-adaptive__header",children:[!U&&r.jsx("div",{role:"tablist","aria-label":M,"aria-describedby":`${N||""} ${_?`${_}-navigation-help`:""}`.trim(),"aria-orientation":w,className:"aria-tabs-datagrid__tabs",children:m.map((ie,ne)=>{const oe=ne===$.selectedIndex,ue=ie.disabled||I;return r.jsxs("button",{role:"tab",id:`tab-${ie.id}`,"aria-controls":`panel-${ie.id}`,"aria-selected":oe,"aria-disabled":ue,tabIndex:oe?0:-1,ref:he=>{J.current[ne]=he},onClick:()=>Q(ne),onKeyDown:he=>pe(he,ne),disabled:ue,className:["aria-tabs-datagrid__tab",oe?"aria-tabs-datagrid__tab--selected":"",ue?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[r.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:ie.label}),$.tabLoadingStates[ne]&&r.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),$.tabErrors[ne]&&r.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},ie.id)})}),s&&r.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions",children:s})]}),V&&V.columns&&r.jsx(r.Fragment,{children:o?r.jsx(r.Fragment,{children:(!y||y==="header"||y==="above")&&r.jsx(rr,{sortConfig:$.sortConfig||[],columns:V.columns.map(ie=>({key:ie.key,label:ie.label})),onSortChange:ie=>{O({type:"SET_SORT",payload:ie})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls"})}):r.jsx("div",{className:"aria-tabs-datagrid-adaptive__sort-controls",role:"region","aria-label":"Sort controls",tabIndex:B.focusArea==="sort-controls"?0:-1,ref:ie=>{ae.current[0]=ie},onKeyDown:ie=>ge(ie,0),children:r.jsxs("div",{className:"sort-controls-row",children:[r.jsxs("div",{className:"sort-select-container",children:[r.jsx("label",{htmlFor:`card-sort-${V.id}`,className:"sort-label",children:"Sort cards by"}),r.jsx(Wn,{id:`card-sort-${V.id}`,name:`card-sort-${V.id}`,value:B.cardSortConfig?`${B.cardSortConfig.key}-${B.cardSortConfig.direction}`:"",onChange:ie=>me(ie.target.value),className:"sort-select",children:de(V.columns).map(ie=>r.jsx("option",{value:ie.value,children:ie.label},ie.value))})]}),B.cardSortConfig&&r.jsxs("div",{className:"sort-indicator",role:"status","aria-live":"polite",children:[r.jsxs("span",{className:"sort-indicator-text",children:["Sorted by ",De(B.cardSortConfig)]}),r.jsx(dt,{variant:"secondary",size:"small",onClick:()=>me(""),"aria-label":"Clear card sorting",className:"sort-clear-button",children:"Clear"})]})]})})}),r.jsx("div",{ref:R,className:"aria-tabs-datagrid-adaptive__cards",role:"grid","aria-label":`${V?.label||"Data"} cards in ${B.gridRows} rows and ${B.gridColumns} columns`,"aria-rowcount":B.gridRows,"aria-colcount":B.gridColumns,id:`panel-${V?.id}`,"aria-labelledby":`tab-${V?.id}`,children:Ge(V?.data||[]).map((ie,ne)=>{const oe=B.selectedCardIndex===ne,ue=B.focusedCardIndex===ne&&B.focusArea==="cards",he=B.focusedCardIndex===ne&&B.focusArea==="card"&&B.isCardNavigationActive,we=ne===0&&B.focusArea!=="cards",Ne=ue||we,ze=P(ne,B.gridColumns);if(n.cardTemplate){const Xe=n.cardTemplate(ie,V.columns);return r.jsx("div",{role:"row","aria-rowindex":ze.row+1,className:"aria-tabs-datagrid-adaptive__row",children:r.jsx("div",{ref:ce=>{ee.current[ne]=ce},className:["aria-tabs-datagrid-adaptive__card-wrapper",oe?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",ue?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",he?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":ze.col+1,"aria-selected":oe,"aria-expanded":he,"aria-description":he?`Card navigation active. ${B.cardElements.length} interactive elements available.`:void 0,tabIndex:Ne?0:-1,onClick:()=>{E(ce=>({...ce,selectedCardIndex:ce.selectedCardIndex===ne?-1:ne})),q(ie)},onKeyDown:ce=>K(ce,ne),onFocus:()=>{E(ce=>ce.isCardNavigationActive?ce:ce.focusedCardIndex!==ne||ce.focusArea!=="cards"?{...ce,focusedCardIndex:ne,focusArea:"cards"}:ce)},children:Xe})},`card-${ne}`)}const Ve=Vb(ie,V.columns,F,T),ot=[Ve.className||"",oe?"aria-tabs-datagrid-adaptive__card--selected":"",ue?"aria-tabs-datagrid-adaptive__card--focused":"",he?"aria-tabs-datagrid-adaptive__card--card-navigation":""].filter(Boolean).join(" ");return r.jsx("div",{role:"row","aria-rowindex":ze.row+1,className:"aria-tabs-datagrid-adaptive__row",children:r.jsx("div",{className:["aria-tabs-datagrid-adaptive__card-wrapper",oe?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",ue?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",he?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":ze.col+1,"aria-selected":oe,"aria-expanded":he,onKeyDown:Xe=>{Xe.key==="Enter"&&(Xe.preventDefault(),E(ce=>({...ce,selectedCardIndex:ne}))),K(Xe,ne)},children:r.jsx(Zo,{...Ve,ref:Xe=>{ee.current[ne]=Xe},className:ot,"aria-label":`${Ve["aria-label"]||Ve.heading}. ${he?`Card navigation active with ${B.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.`:"Press Enter to navigate within card elements."}`,tabIndex:Ne?0:-1,onClick:()=>{E(Xe=>({...Xe,selectedCardIndex:Xe.selectedCardIndex===ne?-1:ne})),q(ie)},onKeyDown:Xe=>K(Xe,ne),onFocus:()=>{B.isCardNavigationActive||E(Xe=>Xe.focusedCardIndex!==ne||Xe.focusArea!=="cards"?{...Xe,focusedCardIndex:ne,focusArea:"cards",focusedCardElementIndex:0,cardElements:[]}:Xe)}})})},`card-${ne}`)})}),o&&y==="below"&&V&&V.columns&&r.jsx(rr,{sortConfig:$.sortConfig||[],columns:V.columns.map(ie=>({key:ie.key,label:ie.label})),onSortChange:ie=>{O({type:"SET_SORT",payload:ie})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls aria-tabs-datagrid-adaptive__advanced-sort-controls--below"}),i&&r.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:i}),r.jsx("div",{ref:Z,className:"aria-tabs-datagrid-adaptive__announcements","aria-hidden":"true",style:{position:"fixed",top:"-1px",left:"-1px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0,padding:0,margin:0}})]})}return S==="hybrid"?r.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${v||""}`,children:[s&&r.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:s}),r.jsx(ya,{tabPanels:m,dataConfig:g,ariaLabel:M,ariaDescription:N,orientation:w,id:_,disabled:I,selectedIndex:C,onTabChange:j,className:"aria-tabs-datagrid-adaptive__table--hybrid",actions:l,forceActionsAbove:c,hideTabsIfSingle:d,minColumnWidth:u,enableColumnCollapse:f,minVisibleColumns:h,showCollapsedColumnsIndicator:p,sortStatusPlacement:y,...x}),i&&r.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:i})]}):r.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${v||""}`,children:[s&&r.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:s}),r.jsx(ya,{tabPanels:m,dataConfig:g,ariaLabel:M,ariaDescription:N,orientation:w,id:_,disabled:I,selectedIndex:C,onTabChange:j,actions:l,forceActionsAbove:c,hideTabsIfSingle:d,minColumnWidth:u,enableColumnCollapse:f,minVisibleColumns:h,showCollapsedColumnsIndicator:p,sortStatusPlacement:y,...x}),i&&r.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:i})]})},mc=e=>{const t=Xo.find(n=>n.value===e);return t?t.icon:null},Yb={ecommerce:{name:"E-commerce",description:"Product catalogs with pricing, inventory, and ratings",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.priceRange){const[a,o]=t.priceRange,s=n.discountedPrice||n.price;if(s<a||s>o)return!1}return!(t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.inStock!==void 0&&n.inStock!==t.inStock||t.minRating!==void 0&&n.rating<t.minRating||t.tags&&t.tags.length>0&&!t.tags.some(a=>n.tags.includes(a)))}):e,booleanRenderer:e=>mc(e),getDataId:e=>`ecommerce-${e.id}`},createTabs:e=>va(e,[{id:"all-products",label:"All Products",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Price",render:n=>n.discountedPrice?`$${n.price.toFixed(2)} â†’ $${n.discountedPrice.toFixed(2)}`:`$${n.price.toFixed(2)}`},{key:"inStock",label:"Availability"},{key:"category",label:"Category"},{key:"rating",label:"Rating",render:n=>`${n.rating}/5 (${n.reviews} reviews)`}],ariaLabel:"All Products Grid",ariaDescription:"Complete product catalog with pricing and availability"},{id:"on-sale",label:"On Sale",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Original Price",render:n=>`$${n.price.toFixed(2)}`},{key:"discountedPrice",label:"Sale Price",render:n=>`$${n.discountedPrice?.toFixed(2)||"N/A"}`},{key:"discount",label:"Discount",render:n=>n.discountedPrice?`${((n.price-n.discountedPrice)/n.price*100).toFixed(0)}% OFF`:"N/A"}],filter:n=>n.filter(a=>a.discountedPrice!==void 0),ariaLabel:"Sale Products Grid",ariaDescription:"Products currently on sale with discounted pricing"},{id:"high-rated",label:"Top Rated",columns:[{key:"name",label:"Product Name"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"category",label:"Category"}],filter:n=>n.filter(a=>a.rating>=4),sortConfig:[{key:"rating",direction:"desc"}],ariaLabel:"Top Rated Products Grid",ariaDescription:"Highest rated products with 4+ star ratings"}])},financial:{name:"Financial",description:"Transaction data with amounts, categories, and statuses",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.dateRange){const[a,o]=t.dateRange;if(n.date<a||n.date>o)return!1}if(t.amountRange){const[a,o]=t.amountRange;if(Math.abs(n.amount)<a||Math.abs(n.amount)>o)return!1}return!(t.types&&t.types.length>0&&!t.types.includes(n.type)||t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.pending!==void 0&&n.pending!==t.pending)}):e,booleanRenderer:e=>mc(e),getDataId:e=>`financial-${e.id}`},createTabs:e=>va(e,[{id:"all-transactions",label:"All Transactions",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"},{key:"pending",label:"Status"}],sortConfig:[{key:"date",direction:"desc"}],ariaLabel:"All Transactions Grid",ariaDescription:"Complete transaction history with amounts and categories"},{id:"credits",label:"Credits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`+$${n.amount.toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(a=>a.type==="credit"),ariaLabel:"Credit Transactions Grid",ariaDescription:"Incoming payments and credits only"},{id:"debits",label:"Debits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`-$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(a=>a.type==="debit"),ariaLabel:"Debit Transactions Grid",ariaDescription:"Outgoing payments and charges only"},{id:"pending",label:"Pending",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"type",label:"Type"}],filter:n=>n.filter(a=>a.pending),ariaLabel:"Pending Transactions Grid",ariaDescription:"Transactions awaiting processing"}])}},gc=(e,t)=>{const n=Yb[e];return{dataConfig:n.dataConfig,tabPanels:n.createTabs(t)}},bc=[{name:"Sarah Johnson",age:34,ews_data:{respiratory_rate_bpm:16,sp02:98,temperature:36.8,systolic_bp:140,heart_rate:82,avpu:"alert"},ews_score:3,ward_name:"Cardiology",room_name:"Room A",bed_name:"A-1",bed_type:"bed",admin_note:"Hypertension monitoring",pathway:"Standard",speciality:"Cardiology",consultant:"Dr. Smith",local_authority:"NHS Trust",early_discharge_notification:"not_required",needs_based_assessment:!1,medically_optimised:!0,criteria_to_reside:!0,date_medically_optimised:"2024-01-15",anticipated_discharge_date:"2024-01-18",dru_suitability:!1,optica_planned_discharge_date:"2024-01-18",optica_date_confirmed:"2024-01-16",dsum:null,medications_tta:"None required",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!1,initial_therapy_contact:"",equipment:"None",district_nurse_referral:!1},{name:"Michael Chen",age:67,ews_data:{respiratory_rate_bpm:20,sp02:94,temperature:37.2,systolic_bp:160,heart_rate:95,avpu:"alert"},ews_score:7,ward_name:"Surgery",room_name:"Room B",bed_name:"B-3",bed_type:"bed",admin_note:"Post-operative monitoring",pathway:"Surgical",speciality:"General Surgery",consultant:"Dr. Johnson",local_authority:"NHS Trust",early_discharge_notification:"due",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!0,date_medically_optimised:"2024-01-17",anticipated_discharge_date:"2024-01-20",dru_suitability:!0,optica_planned_discharge_date:"2024-01-20",optica_date_confirmed:"2024-01-16",dsum:"Complex discharge",medications_tta:"Pain management",transport_booking:!0,transport_status:"In Progress",transport_date:"2024-01-20",transport_mobility:"Wheelchair",fast_track:!1,initial_therapy_contact:"2024-01-17",equipment:"Walking frame",district_nurse_referral:!0},{name:"Emma Thompson",age:28,ews_data:{respiratory_rate_bpm:24,sp02:90,temperature:38.5,systolic_bp:110,heart_rate:105,avpu:"alert"},ews_score:5,ward_name:"Respiratory",room_name:"Room C",bed_name:"C-2",bed_type:"bed",admin_note:"Pneumonia treatment",pathway:"Respiratory",speciality:"Respiratory Medicine",consultant:"Dr. Williams",local_authority:"NHS Trust",early_discharge_notification:"overdue",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!1,date_medically_optimised:"",anticipated_discharge_date:"2024-01-22",dru_suitability:!1,optica_planned_discharge_date:"2024-01-22",optica_date_confirmed:"",dsum:null,medications_tta:"Antibiotics",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!0,initial_therapy_contact:"",equipment:"Oxygen",district_nurse_referral:!1}],Zb=[{id:"appt-001",appointment_time:"2024-01-18T09:00:00Z",patient_name:"Sarah Johnson",appointment_type:"Cardiology Consultation",consultant:"Dr. Smith",location:"Clinic Room 3",duration:30,status:"pending"},{id:"appt-002",appointment_time:"2024-01-18T10:30:00Z",patient_name:"Michael Davis",appointment_type:"Post-op Follow-up",consultant:"Dr. Johnson",location:"Surgery Ward",duration:15,status:"active"},{id:"appt-003",appointment_time:"2024-01-18T14:00:00Z",patient_name:"Emma Thompson",appointment_type:"Respiratory Assessment",consultant:"Dr. Wilson",location:"Emergency Department",duration:45,status:"pending"}],qb=[{id:"med-001",medication:"Amlodipine",dose:"5mg",frequency:"Once daily",route:"Oral",next_due:"2024-01-18T08:00:00Z",prescriber:"Dr. Smith",patient_name:"Sarah Johnson",allergies:null,priority:"medium"},{id:"med-002",medication:"Morphine",dose:"10mg",frequency:"Every 4 hours",route:"IV",next_due:"2024-01-18T10:00:00Z",prescriber:"Dr. Johnson",patient_name:"Michael Davis",allergies:"Codeine allergy",priority:"high"},{id:"med-003",medication:"Salbutamol",dose:"2 puffs",frequency:"As needed",route:"Inhaled",next_due:"2024-01-18T12:00:00Z",prescriber:"Dr. Wilson",patient_name:"Emma Thompson",allergies:null,priority:"high"}],Jb=[{id:"vitals-001",patient_name:"Sarah Johnson",recorded_time:"2024-01-18T07:30:00Z",temperature:36.8,blood_pressure:"140/90",heart_rate:82,respiratory_rate:16,oxygen_saturation:98,ews_score:3,priority:"medium"},{id:"vitals-002",patient_name:"Michael Davis",recorded_time:"2024-01-18T08:15:00Z",temperature:37.2,blood_pressure:"130/85",heart_rate:98,respiratory_rate:20,oxygen_saturation:95,ews_score:7,priority:"high"},{id:"vitals-003",patient_name:"Emma Thompson",recorded_time:"2024-01-18T09:00:00Z",temperature:38.5,blood_pressure:"110/70",heart_rate:105,respiratory_rate:24,oxygen_saturation:90,ews_score:9,priority:"high"}],yc=[{id:"PROD001",name:"Wireless Headphones",price:199.99,discountedPrice:149.99,inStock:!0,category:"Electronics",rating:4.5,reviews:1247,tags:["wireless","bluetooth","premium"]},{id:"PROD002",name:"Running Shoes",price:129.99,inStock:!0,category:"Sports",rating:4.8,reviews:892,tags:["running","athletic","comfortable"]},{id:"PROD003",name:"Coffee Maker",price:89.99,discountedPrice:59.99,inStock:!1,category:"Kitchen",rating:4.2,reviews:456,tags:["kitchen","coffee","appliance"]},{id:"PROD004",name:"Smartphone Case",price:24.99,inStock:!0,category:"Accessories",rating:4,reviews:234,tags:["protection","mobile","durable"]}],xc=[{id:"TXN001",date:new Date("2024-01-15"),amount:2500,type:"credit",category:"Salary",description:"Monthly salary payment",accountId:"ACC001",pending:!1,recurring:!0},{id:"TXN002",date:new Date("2024-01-14"),amount:89.5,type:"debit",category:"Groceries",description:"Supermarket shopping",accountId:"ACC001",pending:!1,recurring:!1},{id:"TXN003",date:new Date("2024-01-16"),amount:1200,type:"debit",category:"Rent",description:"Monthly rent payment",accountId:"ACC001",pending:!0,recurring:!0},{id:"TXN004",date:new Date("2024-01-13"),amount:150,type:"credit",category:"Refund",description:"Product return refund",accountId:"ACC001",pending:!1,recurring:!1}],vc=[{id:"LEAD001",companyName:"Tech Solutions Inc",contactPerson:"John Smith",email:"john@techsolutions.com",status:"qualified",value:5e4,lastContact:new Date("2024-01-15"),source:"Website",isHotLead:!0},{id:"LEAD002",companyName:"Global Industries",contactPerson:"Maria Garcia",email:"maria@globalind.com",status:"contacted",value:25e3,lastContact:new Date("2024-01-14"),source:"Referral",isHotLead:!1},{id:"LEAD003",companyName:"StartupXYZ",contactPerson:"Alex Johnson",email:"alex@startupxyz.com",status:"new",value:15e3,lastContact:new Date("2024-01-16"),source:"Cold Call",isHotLead:!0}],Xb={dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>!(t.status&&!t.status.includes(n.status)||t.minValue&&n.value<t.minValue||t.hotLeadsOnly&&!n.isHotLead)):e,booleanRenderer:e=>r.jsx("span",{style:{color:e?"#dc2626":"#6b7280",fontWeight:e?"bold":"normal"},children:e?"ðŸ”¥ Hot Lead":"ðŸ“‹ Standard"}),getDataId:e=>`business-${e.id}`},Kb=()=>[{id:"patients",label:"Patients",data:bc,columns:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Records",ariaDescription:"Healthcare patient management with EWS monitoring",cardTemplate:(e,t)=>r.jsx(Ko,{data:e,columns:t,onSelect:n=>console.log("Selected patient:",n),onAction:(n,a)=>console.log("Patient action:",n,a),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})},{id:"appointments",label:"Appointments",data:Zb,columns:[{key:"appointment_time",label:"Time"},{key:"patient_name",label:"Patient"},{key:"appointment_type",label:"Type"},{key:"consultant",label:"Consultant"}],ariaLabel:"Patient Appointments",ariaDescription:"Scheduled appointments and consultations",cardTemplate:(e,t)=>r.jsx(Qo,{data:e,columns:t,onSelect:n=>console.log("Selected appointment:",n),onAction:(n,a)=>console.log("Appointment action:",n,a),status:e.status})},{id:"medications",label:"Medications",data:qb,columns:[{key:"medication",label:"Medication"},{key:"dose",label:"Dose"},{key:"frequency",label:"Frequency"},{key:"next_due",label:"Next Due"}],ariaLabel:"Patient Medications",ariaDescription:"Medication administration and scheduling",cardTemplate:(e,t)=>r.jsx(es,{data:e,columns:t,onSelect:n=>console.log("Selected medication:",n),onAction:(n,a)=>console.log("Medication action:",n,a),priority:e.priority})},{id:"vitals",label:"Vital Signs",data:Jb,columns:[{key:"patient_name",label:"Patient"},{key:"recorded_time",label:"Time"},{key:"temperature",label:"Temperature"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Vital Signs",ariaDescription:"Patient vital signs monitoring and EWS scores",cardTemplate:(e,t)=>r.jsx(ts,{data:e,columns:t,onSelect:n=>console.log("Selected vitals:",n),onAction:(n,a)=>console.log("Vitals action:",n,a),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})}],Qb=()=>{const[e,t]=k.useState("healthcare"),n=k.useMemo(()=>({healthcare:{title:"Healthcare Workflow Management",description:"Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals",dataConfig:lc,tabPanels:Kb(),data:bc},ecommerce:{title:"E-commerce Product Catalog",description:"Product management with pricing and inventory",...gc("ecommerce",yc),data:yc},financial:{title:"Financial Transaction Dashboard",description:"Banking and financial data management",...gc("financial",xc),data:xc},business:{title:"Sales Lead Management",description:"Custom CRM configuration with business logic",dataConfig:Xb,tabPanels:va(vc,[{id:"all-leads",label:"All Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"status",label:"Status"},{key:"value",label:"Value",render:o=>`$${o.value.toLocaleString()}`},{key:"isHotLead",label:"Priority"}],ariaLabel:"All Sales Leads Grid",ariaDescription:"Complete sales pipeline with lead information"},{id:"hot-leads",label:"Hot Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"value",label:"Value",render:o=>`$${o.value.toLocaleString()}`},{key:"lastContact",label:"Last Contact",render:o=>o.lastContact.toLocaleDateString()}],filter:o=>o.filter(s=>s.isHotLead),sortConfig:[{key:"value",direction:"desc"}],ariaLabel:"Hot Leads Grid",ariaDescription:"High-priority leads requiring immediate attention"},{id:"pipeline",label:"Active Pipeline",columns:[{key:"companyName",label:"Company"},{key:"status",label:"Status"},{key:"value",label:"Value",render:o=>`$${o.value.toLocaleString()}`},{key:"source",label:"Source"}],filter:o=>o.filter(s=>["contacted","qualified"].includes(s.status)),ariaLabel:"Active Pipeline Grid",ariaDescription:"Leads currently in the sales pipeline"}]),data:vc}}),[]),a=n[e];return r.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"AriaTabsDataGrid - Comprehensive Demo"}),r.jsx("p",{style:{fontSize:"1.1rem",color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:"This demo showcases the component's versatility across different domains: healthcare, e-commerce, financial services, and custom business applications. Each configuration demonstrates domain-specific data operations, custom renderers, and specialized filtering logic."}),r.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:Object.keys(n).map(o=>r.jsx(dt,{variant:e===o?"primary":"secondary",onClick:()=>t(o),style:{textTransform:"capitalize"},children:o},o))}),r.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"0.5rem",color:"#1e293b"},children:a.title}),r.jsx("p",{style:{color:"#64748b",marginBottom:"1rem"},children:a.description}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.9rem"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Data Records:"})," ",a.data.length]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Tab Panels:"})," ",a.tabPanels.length]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Features:"})," ",["Row Selection","Custom Filtering","Domain-Specific Renderers","Keyboard Navigation","ARIA Compliance"].join(", ")]})]})]})]}),r.jsx(ya,{dataConfig:a.dataConfig,tabPanels:a.tabPanels,ariaLabel:`${a.title} Data Grid`,ariaDescription:`Interactive data grid for ${a.description.toLowerCase()}`}),r.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f1f5f9",borderRadius:"0.5rem",border:"1px solid #cbd5e1"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#334155"},children:"Implementation Details"}),r.jsxs("div",{style:{display:"grid",gap:"1rem",fontSize:"0.9rem"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Current Mode:"})," ",e," configuration"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Data Operations:"})," Custom comparator, filter function, and boolean renderer"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Architecture:"})," Generic core with domain-specific plugins and factory helpers"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"State Management:"})," Global row selection with data-object persistence"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Accessibility:"})," Full ARIA support with dynamic labels and descriptions"]})]})]})]})};function ey(e){var t=0,n=e.children,a=n&&n.length;if(!a)t=1;else for(;--a>=0;)t+=n[a].value;e.value=t}function ty(){return this.eachAfter(ey)}function ny(e,t){let n=-1;for(const a of this)e.call(t,a,++n,this);return this}function ry(e,t){for(var n=this,a=[n],o,s,i=-1;n=a.pop();)if(e.call(t,n,++i,this),o=n.children)for(s=o.length-1;s>=0;--s)a.push(o[s]);return this}function ay(e,t){for(var n=this,a=[n],o=[],s,i,l,c=-1;n=a.pop();)if(o.push(n),s=n.children)for(i=0,l=s.length;i<l;++i)a.push(s[i]);for(;n=o.pop();)e.call(t,n,++c,this);return this}function oy(e,t){let n=-1;for(const a of this)if(e.call(t,a,++n,this))return a}function sy(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,a=t.children,o=a&&a.length;--o>=0;)n+=a[o].value;t.value=n})}function iy(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function ly(e){for(var t=this,n=cy(t,e),a=[t];t!==n;)t=t.parent,a.push(t);for(var o=a.length;e!==n;)a.splice(o,0,e),e=e.parent;return a}function cy(e,t){if(e===t)return e;var n=e.ancestors(),a=t.ancestors(),o=null;for(e=n.pop(),t=a.pop();e===t;)o=e,e=n.pop(),t=a.pop();return o}function dy(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function uy(){return Array.from(this)}function fy(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function hy(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*py(){var e=this,t,n=[e],a,o,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,a=e.children)for(o=0,s=a.length;o<s;++o)n.push(a[o]);while(n.length)}function rs(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=by)):t===void 0&&(t=gy);for(var n=new wa(e),a,o=[n],s,i,l,c;a=o.pop();)if((i=t(a.data))&&(c=(i=Array.from(i)).length))for(a.children=i,l=c-1;l>=0;--l)o.push(s=i[l]=new wa(i[l])),s.parent=a,s.depth=a.depth+1;return n.eachBefore(xy)}function my(){return rs(this).eachBefore(yy)}function gy(e){return e.children}function by(e){return Array.isArray(e)?e[1]:null}function yy(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function xy(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function wa(e){this.data=e,this.depth=this.height=0,this.parent=null}wa.prototype=rs.prototype={constructor:wa,count:ty,each:ny,eachAfter:ay,eachBefore:ry,find:oy,sum:sy,sort:iy,path:ly,ancestors:dy,descendants:uy,leaves:fy,links:hy,copy:my,[Symbol.iterator]:py};function Sa(e){return typeof e=="number"&&!isNaN(e)}function vy(e,t){return e.map(n=>{const a=t.split(".");let o=n;for(const s of a)if(o=o?.[s],o===void 0)break;return o}).filter(n=>n!=null)}function wc(e){const t=e.filter(Sa);return t.length===0?0:t.reduce((n,a)=>n+a,0)}function wy(e){const t=e.filter(Sa);return t.length===0?0:wc(t)/t.length}function Sy(e){return e.length}function _y(e){return new Set(e).size}function ky(e){const t=e.filter(Sa);return t.length===0?null:Math.min(...t)}function Cy(e){const t=e.filter(Sa);return t.length===0?null:Math.max(...t)}function Ny(e){return e.length>0?e[0]:null}function jy(e){return e.length>0?e[e.length-1]:null}function My(e){return e.filter(n=>n!=null).map(n=>String(n)).join(", ")}const Iy={sum:wc,avg:wy,count:Sy,min:ky,max:Cy,first:Ny,last:jy,concat:My,countUnique:_y};function Sc(e,t){if(t.length===0)return null;const n=vy(t,e.column);let a;if(e.type==="custom"){if(!e.customFn)throw new Error(`Custom aggregation for column "${e.column}" requires a customFn`);a=e.customFn(n,t)}else{const o=Iy[e.type];a=o(n,t)}return a}function _a(e,t){const n={};for(const a of e){const o=a.label||`${a.column}_${a.type}`;n[o]=Sc(a,t)}return n}function Dy(e,t,n){try{return e.calculate(t,n)}catch(a){return console.error(`Error calculating field "${e.key}":`,a),null}}function _c(e,t){return t.length===0?e:e.map(n=>{const a={...n};for(const o of t)a[o.key]=Dy(o,n,e);return a})}function Ty(e,t){const n=new Map;for(const a of e){const o=typeof t=="function"?t(a):a[t];n.has(o)||n.set(o,[]),n.get(o).push(a)}return n}function Ly(e,t){return t.label?`${t.label}: ${e}`:String(e)}function Ay(e,t){const{levels:n}=t;function a(i,l,c){if(l>=n.length)return i.map((p,y)=>({id:`${c}-item-${y}`,type:"item",level:l,data:p,items:[p]}));const d=n[l],u=Ty(i,d.groupBy),f=[];let h=Array.from(u.entries());d.sortDirection&&h.sort((p,y)=>(d.sortDirection==="asc"?1:-1)*String(p[0]).localeCompare(String(y[0])));for(const[p,y]of h){const m=`${c}-${l}-${p}`,g=a(y,l+1,m),C=d.aggregations?_a(d.aggregations,y):{};f.push({id:m,type:"group",level:l,key:p,label:Ly(p,d),items:y,aggregations:C,children:g})}return f}const o=a(e,0,"root"),s=t.globalAggregations?_a(t.globalAggregations,e):{};return{id:"root",type:"root",level:-1,items:e,aggregations:s,children:o}}function Ey(e,t){const{getId:n,getParentId:a,rootIds:o=[]}=t,s=new Map;for(const u of e){const f=n(u);s.set(f,u)}const i=new Map;function l(u,f=0){const h=n(u);if(i.has(h))return i.get(h);const p={id:h,type:"item",level:f,data:u,items:[u],children:[]};i.set(h,p);const y=[];for(const m of e)a?.(m)===h&&y.push(m);if(y.length>0&&(p.children=y.map(m=>l(m,f+1)),t.aggregations&&t.showChildAggregations)){const m=kc(p);p.aggregations=_a(t.aggregations,m)}return p}const c=[];for(const u of e){const f=a?.(u);(!f||o.includes(f))&&c.push(u)}const d=c.map(u=>l(u,0));return{id:"root",type:"root",level:-1,items:e,children:d}}function kc(e){const t=[...e.items||[]];if(e.children)for(const n of e.children)t.push(...kc(n));return t}function $y(e,t,n){const a=[];function o(s){const i=s.data;if(i.type==="root"){if(s.children)for(const d of s.children)o(d);return}const l=t.has(i.id),c=(s.children?.length||0)>0;if(i.type==="group"){if(a.push({id:i.id,type:"group",level:i.level,isExpandable:c,isExpanded:l,groupMetadata:{key:i.key,label:i.label,aggregations:i.aggregations||{},itemCount:i.items?.length||0},parentId:s.parent?.data.id!=="root"?s.parent?.data.id:void 0,path:as(s)}),l&&s.children)for(const d of s.children)o(d)}else if(i.type==="item")if(n==="tree"&&c){if(a.push({id:i.id,type:"tree-node",level:i.level,isExpandable:!0,isExpanded:l,data:i.data,parentId:s.parent?.data.id!=="root"?s.parent?.data.id:void 0,path:as(s)}),l&&s.children)for(const d of s.children)o(d)}else a.push({id:i.id,type:n==="tree"?"tree-node":"item",level:i.level,isExpandable:c,isExpanded:!1,data:i.data,parentId:s.parent?.data.id!=="root"?s.parent?.data.id:void 0,path:as(s)})}return o(e),a}function as(e){const t=[];let n=e;for(;n&&n.data.type!=="root";)t.unshift(n.data.id),n=n.parent;return t}class os{hierarchyRoot;mode;constructor(t,n,a){this.mode=n;const o=n==="grouped"?Ay(t,a):Ey(t,a);this.hierarchyRoot=rs(o)}getRoot(){return this.hierarchyRoot}getFlattenedNodes(t){return $y(this.hierarchyRoot,t,this.mode)}findNode(t){return this.hierarchyRoot.find(n=>n.data.id===t)}getDescendantIds(t){const n=this.findNode(t);if(!n)return[];const a=[];return n.each(o=>{o.data.id!==t&&a.push(o.data.id)}),a}getAncestorIds(t){const n=this.findNode(t);if(!n)return[];const a=[];let o=n.parent;for(;o&&o.data.type!=="root";)a.push(o.data.id),o=o.parent;return a}getSiblingIds(t){const n=this.findNode(t);return!n||!n.parent?[]:(n.parent.children||[]).filter(a=>a.data.id!==t).map(a=>a.data.id)}getTotalCount(){return this.hierarchyRoot.data.items?.length||0}getMaxDepth(){return this.hierarchyRoot.height}getAggregations(t){return this.findNode(t)?.data.aggregations}getGlobalAggregations(){return this.hierarchyRoot.data.aggregations||{}}}function Cc(e,t,n){if(e instanceof Set)return new Set(e);if(Array.isArray(e))return new Set(e);if(!t)return new Set;if(e==="all"){const a=new Set;return t.getRoot().each(o=>{o.data.type!=="root"&&(!n||o.depth<=n)&&a.add(o.data.id)}),a}if(e==="first"){const a=new Set,o=t.getRoot();if(o.children)for(const s of o.children)a.add(s.data.id);return a}return new Set}function Fy(e){if(typeof window>"u")return null;try{const t=localStorage.getItem(e);if(t){const n=JSON.parse(t);return new Set(n)}}catch(t){console.warn("Failed to load persisted expansion state:",t)}return null}function Py(e,t){if(!(typeof window>"u"))try{const n=JSON.stringify(Array.from(t));localStorage.setItem(e,n)}catch(n){console.warn("Failed to persist expansion state:",n)}}function By(e={}){const{initialExpanded:t,expandedIds:n,onExpansionChange:a,hierarchyManager:o,maxAutoExpandDepth:s,persistKey:i}=e,l=n!==void 0,c=k.useMemo(()=>i?Fy(i):null,[i]),[d,u]=k.useState(()=>c||Cc(t,o,s)),f=l?n:d,h=k.useCallback(M=>{l||u(M),i&&Py(i,M),a?.(M)},[l,i,a]),p=k.useCallback(M=>{const N=new Set(f);N.add(M),h(N)},[f,h]),y=k.useCallback(M=>{const N=new Set(f);N.delete(M),h(N)},[f,h]),m=k.useCallback(M=>{f.has(M)?y(M):p(M)},[f,p,y]),g=k.useCallback(()=>{if(!o){console.warn("Cannot expand all: hierarchyManager not provided");return}const M=new Set;o.getRoot().each(N=>{N.data.type!=="root"&&(!s||N.depth<=s)&&M.add(N.data.id)}),h(M)},[o,s,h]),C=k.useCallback(()=>{h(new Set)},[h]),j=k.useCallback(M=>{if(!o){console.warn("Cannot expand to depth: hierarchyManager not provided");return}const N=new Set;o.getRoot().each(w=>{w.data.type!=="root"&&w.depth<=M&&N.add(w.data.id)}),h(N)},[o,h]);return k.useEffect(()=>{if(!l&&t){const M=Cc(t,o,s);u(M)}},[t,o,s,l]),{expandedIds:f,expand:p,collapse:y,toggle:m,expandAll:g,collapseAll:C,expandToDepth:j}}function Hy(e){const{flattenedNodes:t,expansionState:n,hierarchyManager:a,columnCount:o,onFocusChange:s,onRowActivate:i,enableColumnNavigation:l=!1}=e,[c,d]=k.useState(null),[u,f]=k.useState(0),[h,p]=k.useState(!1),y=k.useRef(!1);k.useEffect(()=>{!y.current&&t.length>0&&!c&&(d(t[0].id),y.current=!0)},[t,c]);const m=k.useCallback(F=>F?t.findIndex(T=>T.id===F):-1,[t]),g=k.useCallback(()=>c&&t.find(F=>F.id===c)||null,[c,t]),C=k.useCallback(F=>{d(F),f(0),s?.(F)},[s]),j=k.useCallback(()=>{const F=m(c);F<t.length-1&&C(t[F+1].id)},[c,t,m,C]),M=k.useCallback(()=>{const F=m(c);F>0&&C(t[F-1].id)},[c,t,m,C]),N=k.useCallback(()=>{t.length>0&&C(t[0].id)},[t,C]),w=k.useCallback(()=>{t.length>0&&C(t[t.length-1].id)},[t,C]),_=k.useCallback(()=>{const F=g();!F||!F.parentId||C(F.parentId)},[g,C]),I=k.useCallback(()=>{if(!c)return;const F=g();F&&F.isExpandable&&!F.isExpanded&&n.expand(c)},[c,g,n]),v=k.useCallback(()=>{if(!c)return;const F=g();F&&F.isExpandable&&F.isExpanded?n.collapse(c):F&&F.parentId&&_()},[c,g,n,_]),x=k.useCallback(()=>{if(!c)return;const F=g();F&&F.isExpandable&&n.toggle(c)},[c,g,n]),S=k.useCallback(()=>{p(!0)},[]),A=k.useCallback(()=>{p(!1)},[]),D=k.useCallback(F=>{const{key:T,ctrlKey:L,metaKey:$}=F,O=L||$;switch(T){case"ArrowDown":F.preventDefault(),j();break;case"ArrowUp":F.preventDefault(),M();break;case"ArrowRight":F.preventDefault(),l&&!O?u<o-1&&f(J=>J+1):I();break;case"ArrowLeft":F.preventDefault(),l&&u>0?f(J=>J-1):v();break;case"Home":F.preventDefault(),O?N():f(0);break;case"End":F.preventDefault(),O?w():f(o-1);break;case"Enter":F.preventDefault(),c&&(h?i?.(c):S());break;case" ":F.preventDefault(),x();break;case"Escape":F.preventDefault(),h?A():c&&(d(null),s?.(null));break;case"*":F.preventDefault();{const J=g();J&&J.parentId&&a.getSiblingIds(J.id).forEach(ae=>{const R=t.find(B=>B.id===ae);R&&R.isExpandable&&n.expand(ae)})}break}},[j,M,N,w,I,v,x,S,A,c,u,o,l,h,i,s,g,a,t,n]);return{focusedNodeId:c,focusedColumnIndex:u,isNavigationActive:h,focusNode:C,handleKeyDown:D,focusNext:j,focusPrevious:M,focusFirst:N,focusLast:w,focusParent:_,expandFocused:I,collapseFocused:v,toggleFocused:x,activateNavigation:S,deactivateNavigation:A}}const zy=()=>r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:r.jsx("path",{d:"M7 5L12 10L7 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),ss=({context:e,columnCount:t,customRenderer:n,isFocused:a=!1,onKeyDown:o,onClick:s,tabIndex:i=-1,"data-testid":l})=>{const{node:c,level:d,isExpanded:u,toggleExpansion:f,aggregations:h,totalCount:p}=e;if(n)return r.jsx("tr",{className:Ce("group-header",{"group-header--expanded":u,"group-header--focused":a,[`group-header--level-${d+1}`]:!0}),role:"row","aria-expanded":u,"aria-level":d+1,tabIndex:i,onClick:s||f,onKeyDown:o,"data-testid":l,"data-node-id":c.id,children:r.jsx("td",{colSpan:t,className:"group-header__cell group-header__cell--custom",children:n(e)})});const y=Object.entries(h),m=y.length>0;return r.jsxs("tr",{className:Ce("group-header",{"group-header--expanded":u,"group-header--focused":a,[`group-header--level-${d+1}`]:!0}),role:"row","aria-expanded":u,"aria-level":d+1,tabIndex:i,onClick:s||f,onKeyDown:o,"data-testid":l,"data-node-id":c.id,children:[r.jsxs("td",{className:Ce("group-header__cell","group-header__cell--first",`group-header__cell--indent-${d}`),children:[r.jsx("span",{className:Ce("group-header__icon",{"group-header__icon--expanded":u}),children:r.jsx(zy,{})}),r.jsx("span",{className:"group-header__label",children:c.label}),r.jsxs("span",{className:"group-header__count",children:["(",p," ",p===1?"item":"items",")"]})]}),t>1&&m&&r.jsx("td",{className:"group-header__cell group-header__cell--aggregations",colSpan:t-1,children:r.jsx("div",{className:"group-header__aggregations",children:y.map(([g,C],j)=>{const M=typeof C=="object"&&C!==null?JSON.stringify(C):String(C??"â€”");return r.jsxs("div",{className:"group-header__aggregation",children:[r.jsxs("span",{className:"group-header__aggregation-label",children:[g,":"]}),r.jsx("span",{className:"group-header__aggregation-value",children:M})]},`${g}-${j}`)})})}),t>1&&!m&&r.jsx("td",{colSpan:t-1,className:"group-header__cell"})]})};ss.displayName="GroupHeader";const Ry=()=>r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:r.jsx("path",{d:"M6 4L10 8L6 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});function Oy(e,t){const n=e[t.key];return t.render?t.render(e):n==null?"â€”":String(n)}const is=({context:e,columns:t,customRenderer:n,isFocused:a=!1,onKeyDown:o,onExpanderClick:s,tabIndex:i=-1,"data-testid":l})=>{const{node:c,depth:d,isExpanded:u,toggleExpansion:f,hasChildren:h,aggregations:p}=e;return n?r.jsx("tr",{className:Ce("tree-node",{"tree-node--expanded":u,"tree-node--focused":a,"tree-node--has-children":h}),role:"row","aria-expanded":h?u:void 0,"aria-level":d+1,tabIndex:i,onKeyDown:o,"data-testid":l,"data-node-id":c.id,children:r.jsx("td",{colSpan:t.length,className:"tree-node__cell tree-node__cell--custom",children:n(e)})}):r.jsx("tr",{className:Ce("tree-node",{"tree-node--expanded":u,"tree-node--focused":a,"tree-node--has-children":h}),role:"row","aria-expanded":h?u:void 0,"aria-level":d+1,tabIndex:i,onKeyDown:o,"data-testid":l,"data-node-id":c.id,children:t.map((y,m)=>{const g=m===0;return r.jsxs("td",{className:Ce("tree-node__cell",{"tree-node__cell--first":g,[`tree-node__cell--depth-${d}`]:g}),role:"gridcell",children:[g&&r.jsx(r.Fragment,{children:h?r.jsx("button",{type:"button",className:Ce("tree-node__expander",{"tree-node__expander--expanded":u}),onClick:C=>{C.stopPropagation(),s?s():f()},"aria-label":u?"Collapse node":"Expand node",tabIndex:-1,children:r.jsx(Ry,{})}):r.jsx("span",{className:"tree-node__expander tree-node__expander--placeholder"})}),r.jsx("span",{className:"tree-node__content",children:Oy(c.data,y)}),g&&p&&Object.keys(p).length>0&&r.jsxs("span",{className:"tree-node__aggregation-hint",title:"Has aggregated data from children",children:[" ","(",Object.keys(p).length," agg)"]})]},y.key)})})};is.displayName="TreeNode";const Uy=()=>r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:r.jsx("path",{d:"M12 10L8 6L4 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Wy=()=>r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:r.jsx("path",{d:"M4 6L8 10L12 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Gy=()=>r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[r.jsx("path",{d:"M12 6L8 2L4 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M4 10L8 14L12 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});function Vy(e,t,n,a,o,s,i){return e.data?r.jsx("tr",{className:Ce("groupable-datagrid__data-row",{"groupable-datagrid__data-row--focused":a,"groupable-datagrid__data-row--selected":o}),role:"row","aria-selected":o,tabIndex:a?0:-1,onKeyDown:s,onClick:i,"data-row-index":n,"data-node-id":e.id,style:{cursor:i?"pointer":void 0},children:t.map(l=>{const c=e.data[l.key],d=l.customRenderer?l.customRenderer(c,e.data):l.render?l.render(e.data):c!=null?String(c):"â€”";return r.jsx("td",{className:"groupable-datagrid__data-cell",role:"gridcell",children:d},l.key)})},e.id):null}const Nc=({mode:e,data:t,columns:n,groupConfig:a,treeConfig:o,calculatedFields:s=[],initialExpanded:i,expandedIds:l,onExpansionChange:c,selectedRow:d,onGlobalRowSelectionChange:u,onRowClick:f,sortConfig:h,onSortChange:p,enableMultiSort:y=!1,showControls:m=!0,controlsRenderer:g,isLoading:C=!1,error:j=null,ariaLabel:M,ariaDescription:N,className:w,"data-testid":_,mobileDisplay:I="auto",mobileBreakpoint:v=768})=>{const x=k.useRef(null),[S,A]=k.useState(!1);k.useEffect(()=>{const P=()=>{A(window.innerWidth<v)};return P(),window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[v]);const D=I==="cards"||I==="auto"&&S,F=I==="scroll"||I==="auto"&&!S,T=k.useMemo(()=>{if(!h||h.length===0)return t;const P=[...t];for(let W=h.length-1;W>=0;W--){const H=h[W],Q=n.find(q=>q.key===H.key);P.sort((q,te)=>{let fe=q[H.key],Z=te[H.key];if(Q?.render&&(fe=Q.render(q),Z=Q.render(te)),fe==null&&Z==null)return 0;if(fe==null)return 1;if(Z==null)return-1;if(typeof fe=="number"&&typeof Z=="number")return H.direction==="asc"?fe-Z:Z-fe;const se=String(fe),de=String(Z),ve=se.localeCompare(de);return H.direction==="asc"?ve:-ve})}return P},[t,h,n]),L=k.useCallback(P=>{if(!p)return;const W=h?.find(H=>H.key===P);if(y){let H=[...h||[]];W?W.direction==="asc"?H=H.map(Q=>Q.key===P?{...Q,direction:"desc"}:Q):H=H.filter(Q=>Q.key!==P):H.push({key:P,direction:"asc"}),p(H)}else W?W.direction==="asc"?p([{key:P,direction:"desc"}]):p([]):p([{key:P,direction:"asc"}])},[h,p,y]),$=k.useCallback((P,W)=>{f&&f(P,W),u&&u(d===P?null:P)},[f,u,d]),O=k.useMemo(()=>{const P=T;return s.length===0?P:_c(P,s)},[T,s]),J=k.useMemo(()=>e==="flat"||e==="pivot"?null:e==="grouped"?a?new os(O,"grouped",a):(console.warn("GroupableDataGrid: grouped mode requires groupConfig"),null):e==="tree"?o?new os(O,"tree",o):(console.warn("GroupableDataGrid: tree mode requires treeConfig"),null):null,[e,O,a,o]),ee=By({initialExpanded:i,expandedIds:l,onExpansionChange:c,hierarchyManager:J||void 0,maxAutoExpandDepth:a?.maxAutoExpandDepth||o?.maxAutoExpandDepth}),ae=k.useMemo(()=>J?J.getFlattenedNodes(ee.expandedIds):O.map((P,W)=>({id:`flat-${W}`,type:"item",level:0,isExpandable:!1,isExpanded:!1,data:P,path:[`flat-${W}`]})),[J,ee.expandedIds,O]),R=Hy({flattenedNodes:ae,expansionState:ee,hierarchyManager:J,columnCount:n.length,enableColumnNavigation:e==="tree"});k.useEffect(()=>{if(R.focusedNodeId&&x.current){const P=x.current.querySelector(`[data-node-id="${R.focusedNodeId}"]`);P&&document.activeElement!==P&&(document.activeElement instanceof HTMLElement&&document.activeElement!==document.body&&x.current.contains(document.activeElement)&&document.activeElement.blur(),P.focus())}},[R.focusedNodeId]);const B=k.useCallback((P,W)=>{const H=R.focusedNodeId===P.id;if(P.type==="group"){if(!J||!a)return null;const te=J.findNode(P.id);if(!te)return null;const fe={node:{id:P.id,key:P.groupMetadata.key,label:P.groupMetadata.label,level:P.level,items:te.data.items||[],aggregations:P.groupMetadata.aggregations,totalCount:P.groupMetadata.itemCount},level:P.level,isExpanded:P.isExpanded,toggleExpansion:()=>ee.toggle(P.id),aggregations:P.groupMetadata.aggregations,totalCount:P.groupMetadata.itemCount,childCount:te.children?.length||0},se=a.levels[P.level]?.headerRenderer;return r.jsx(ss,{context:fe,columnCount:n.length,customRenderer:se,isFocused:H,onKeyDown:R.handleKeyDown,tabIndex:H?0:-1},P.id)}if(P.type==="tree-node"){if(!J||!o)return null;const te=J.findNode(P.id);if(!te)return null;const fe={node:{id:P.id,data:P.data,depth:P.level,children:te.children?.map(se=>({id:se.data.id,data:se.data.data,depth:se.depth})),aggregations:te.data.aggregations},depth:P.level,isExpanded:P.isExpanded,toggleExpansion:()=>ee.toggle(P.id),hasChildren:P.isExpandable,aggregations:te.data.aggregations,path:P.path.map(se=>{const de=J.findNode(se);return de?{id:se,data:de.data.data,depth:de.depth}:{id:se,data:{},depth:0}})},Z=o.nodeRenderer;return r.jsx(is,{context:fe,columns:n,customRenderer:Z,isFocused:H,onKeyDown:R.handleKeyDown,tabIndex:H?0:-1},P.id)}const Q=d===P.data,q=u||f?te=>$(P.data,te):void 0;return Vy(P,n,W,H,Q,R.handleKeyDown,q)},[R,J,a,o,n,ee,d,$,u,f]),E=k.useCallback(()=>{if(!m)return null;if(g){const P={mode:e,expansion:ee,totalItems:O.length,visibleItems:ae.length,groupLevels:a?.levels};return r.jsx("div",{className:"groupable-datagrid__controls",children:g(P)})}return e==="flat"?null:r.jsxs("div",{className:"groupable-datagrid__controls",children:[r.jsxs("div",{className:"groupable-datagrid__controls-left",children:[r.jsx(dt,{variant:"secondary",onClick:()=>ee.expandAll(),children:"Expand All"}),r.jsx(dt,{variant:"secondary",onClick:()=>ee.collapseAll(),children:"Collapse All"})]}),r.jsx("div",{className:"groupable-datagrid__controls-right",children:r.jsxs("span",{className:"groupable-datagrid__controls-info",children:["Showing ",ae.filter(P=>P.type==="item").length," of"," ",O.length," items"]})})]})},[m,g,e,ee,O.length,ae.length,a]),Y=k.useCallback(P=>{if(P.type==="group"){const W=P.level||0,H=P.isExpanded;return r.jsx("div",{className:Ce("groupable-datagrid__card","groupable-datagrid__card--group",`groupable-datagrid__card--level-${W}`,{"groupable-datagrid__card--expanded":H}),onClick:()=>ee.toggle(P.id),children:r.jsxs("div",{className:"groupable-datagrid__card-group-header",children:[r.jsx("button",{className:"groupable-datagrid__card-group-toggle","aria-label":H?"Collapse group":"Expand group","aria-expanded":H,children:r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:Ce("groupable-datagrid__card-group-chevron",{"groupable-datagrid__card-group-chevron--expanded":H}),children:r.jsx("path",{d:"M6 8L10 12L14 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),r.jsx("span",{className:"groupable-datagrid__card-group-label",children:P.groupMetadata?.label||"Group"}),P.groupMetadata?.itemCount!==void 0&&r.jsxs("span",{className:"groupable-datagrid__card-group-count",children:["(",P.groupMetadata.itemCount,")"]})]})},P.id)}if(P.type==="item"&&P.data){const W=d===P.data,H=n.find(q=>q.key==="metricName"||q.key==="name"||q.key==="title")||n[0],Q=n.filter(q=>q.key!==H.key);return r.jsxs("div",{className:Ce("groupable-datagrid__card",{"groupable-datagrid__card--selected":W}),onClick:q=>{u&&u(W?null:P.data),f&&f(P.data,q)},children:[(()=>{const q=P.data[H.key],te=H.customRenderer?H.customRenderer(q,P.data):H.render?H.render(P.data):q!=null?String(q):"â€”";return r.jsx("div",{className:"groupable-datagrid__card-title",children:te})})(),Q.map(q=>{const te=P.data[q.key],fe=q.customRenderer?q.customRenderer(te,P.data):q.render?q.render(P.data):te!=null?String(te):"â€”";return r.jsxs("div",{className:"groupable-datagrid__card-field",children:[r.jsx("div",{className:"groupable-datagrid__card-label",children:q.label}),r.jsx("div",{className:"groupable-datagrid__card-value",children:fe})]},q.key)})]},P.id)}return null},[n,ee,a,d,u,f,J]);return C?r.jsx("div",{className:Ce("groupable-datagrid","groupable-datagrid--loading",w),children:r.jsx("p",{children:"Loading data..."})}):j?r.jsx("div",{className:Ce("groupable-datagrid","groupable-datagrid--error",w),children:r.jsxs("p",{children:["Error: ",j]})}):O.length===0?r.jsx("div",{className:Ce("groupable-datagrid",w),children:r.jsx("div",{className:"groupable-datagrid__empty",children:"No data available"})}):r.jsxs("div",{ref:x,className:Ce("groupable-datagrid",w,{"groupable-datagrid--mobile-cards":D,"groupable-datagrid--mobile-scroll":F}),"data-testid":_,"data-mode":e,children:[E(),D&&r.jsx("div",{className:"groupable-datagrid__cards",children:ae.map(P=>Y(P))}),!D&&r.jsx("div",{className:"groupable-datagrid__table-wrapper",children:r.jsxs("table",{className:"groupable-datagrid__treegrid",role:e==="flat"?"table":"treegrid","aria-label":M,"aria-describedby":N,children:[r.jsx("thead",{children:r.jsx("tr",{className:"groupable-datagrid__header-row",role:"row",children:n.map(P=>{const W=h?.find(q=>q.key===P.key),H=P.sortable!==!1&&p,Q=h?.findIndex(q=>q.key===P.key);return r.jsx("th",{role:"columnheader","aria-sort":W?W.direction==="asc"?"ascending":"descending":void 0,className:Ce("groupable-datagrid__header-cell",{"groupable-datagrid__header-cell--sortable":H,"groupable-datagrid__header-cell--sorted":!!W}),onClick:H?()=>L(P.key):void 0,style:{cursor:H?"pointer":void 0},children:r.jsxs("div",{className:"groupable-datagrid__header-content",children:[r.jsx("span",{children:P.label}),H&&r.jsxs("span",{className:"groupable-datagrid__sort-indicator",children:[!W&&r.jsx(Gy,{}),W?.direction==="asc"&&r.jsx(Uy,{}),W?.direction==="desc"&&r.jsx(Wy,{}),y&&W&&Q!==void 0&&Q>=0&&r.jsx("span",{className:"groupable-datagrid__sort-order",children:Q+1})]})]})},P.key)})})}),r.jsx("tbody",{role:"rowgroup",children:ae.map((P,W)=>B(P,W))}),J&&a?.showSummaryFooter&&r.jsx("tfoot",{children:r.jsx("tr",{className:"groupable-datagrid__summary-row",role:"row",children:r.jsxs("td",{colSpan:n.length,children:[r.jsx("strong",{children:"Total:"})," ",J.getTotalCount()," ","items"]})})})]})})]})};Nc.displayName="GroupableDataGrid";const ls=e=>r.jsx(yo,{...e}),Yy=({children:e,pageTitle:t,pageHeadingProps:n,columnWidth:a=nn.TwoThirds,mainWrapperSize:o,skipLinkProps:s,headerProps:i,footerProps:l,service:c,navigation:d,search:u,account:f,organisation:h,logo:p,className:y,...m})=>{const g={service:c,navigation:d,search:u,account:f,organisation:h,logo:p,...i};return r.jsxs(r.Fragment,{children:[r.jsx(Yo,{...s}),r.jsx(Xr,{...g}),r.jsx(ls,{className:y,...m,children:r.jsx(xo,{size:o,children:r.jsx(Zt,{children:r.jsxs(_n,{width:a,children:[t&&r.jsx(Nt,{size:"l",...n,children:t}),e]})})})}),r.jsx(_o,{...l})]})},Zy=({children:e,title:t,pageHeadingProps:n,columnWidth:a=nn.TwoThirds,mainWrapperSize:o="small",skipLinkProps:s,headerProps:i,footerProps:l,backLinkProps:c,serviceName:d,serviceHref:u,logo:f,className:h,...p})=>{const y={service:{text:d,href:u},logo:f,navigation:void 0,search:void 0,account:void 0,...i};return r.jsxs(r.Fragment,{children:[r.jsx(Yo,{...s}),r.jsx(Xr,{...y}),r.jsxs(ls,{className:h,...p,children:[c&&r.jsx(Sn,{...c}),r.jsx(xo,{size:o,children:r.jsx(Zt,{children:r.jsxs(_n,{width:a,children:[t&&r.jsx(Nt,{style:{marginTop:"3rem"},size:"l",...n,children:t}),e]})})})]}),r.jsx(_o,{...l})]})};function jc(e={}){const{enabled:t=!0,paramSelected:n="nsv",paramDrill:a="nsvDrill"}=e,[o,s]=X.useState(()=>typeof window>"u"||!t?void 0:new URLSearchParams(window.location.search).get(n)),[i,l]=X.useState(()=>typeof window>"u"||!t?!1:new URLSearchParams(window.location.search).get(a)==="1");return X.useEffect(()=>{if(!t||typeof window>"u")return;const c=new URLSearchParams(window.location.search);o?c.set(n,String(o)):c.delete(n),c.set(a,i?"1":"0");const d=`${window.location.pathname}?${c.toString()}${window.location.hash}`;window.history.replaceState(null,"",d)},[o,i,t,n,a]),{selectedId:o,setSelectedId:s,drilledIn:i,setDrilledIn:l}}const qy=({className:e})=>r.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:r.jsx("path",{fill:"currentColor",d:"M10.7 3.3a1 1 0 0 1 0 1.4L7.41 8l3.3 3.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 0Z"})}),Jy=({className:e})=>r.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:r.jsx("path",{fill:"currentColor",d:"M5.3 12.7a1 1 0 0 1 0-1.4L8.59 8l-3.3-3.3a1 1 0 0 1 1.42-1.4l4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.42 0Z"})}),ka=({text:e="Next",html:t,href:n="#",className:a,element:o="a",onClick:s,...i})=>{const l=Ce("nhsuk-back-link",a),c=Ce("nhsuk-back-link__link"),d=()=>r.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t?r.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,r.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:r.jsx("path",{d:"M15.5 12c0 .3-.1.5-.3.7l-5 5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4L13.1 12 8.8 7.7c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l5 5c.2.2.3.4.3.7z"})})]});return r.jsx("div",{className:l,children:o==="button"?r.jsx("button",{className:c,type:"button",onClick:s,...i,children:d()}):r.jsx("a",{className:c,href:n,...i,children:d()})})};ka.displayName="ForwardLink";const Xy=({show:e,label:t,contentHeaderLevel:n,detailActive:a,headerContext:o,backLabel:s,nextLabel:i,onBack:l,onForward:c,renderContentHeader:d,item:u,contentSubheader:f,tertiaryInlineActive:h})=>{if(!e||!u)return null;const p=`h${n}`,y=t?X.createElement(p,{style:{marginLeft:a?32:0,marginRight:a?32:0}},t):null,m=a?r.jsx(Sn,{element:"button",text:s,style:{marginRight:16},onClick:l}):void 0,g=h?void 0:r.jsx(ka,{element:"button",text:i,onClick:c});if(d)return r.jsx("div",{className:"nhs-navigation-split-view__header",children:d({item:u,detailActive:a,context:o,backLink:m,defaultHeading:y})});const C=u&&f?typeof f=="function"?f(u):f:null;return r.jsx("div",{className:"nhs-navigation-split-view__header",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[m,r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:[y,C&&r.jsx("div",{className:"nhs-navigation-split-view__subheader",children:C})]})]}),g&&r.jsx("div",{style:{marginLeft:"auto"},children:g})]})})};function Ky({layout:e,items:t,getId:n,selectedId:a,isLoading:o,emptyState:s,renderItemContent:i,onSelect:l,orientation:c,initialFocus:d,onFocusChange:u,justSelectedId:f,listRef:h,onKeyDownList:p,navigationInstructions:y,controlledFocusedIndex:m}){const[g,C]=X.useState(()=>d==="first"?0:-1),j=X.useRef(0);X.useEffect(()=>{if(typeof m=="number"||g<0||!h?.current)return;const I=Array.from(h.current.querySelectorAll("[data-nav-item]"))[g];if(I){document.activeElement!==I&&I.focus(),j.current=g;const v=t[g];u?.(v?n(v):void 0,v,g)}},[m,g,t,u,n,h]);const M=_=>{if(p)return p(_);const I=c==="vertical"?"ArrowDown":"ArrowRight",v=c==="vertical"?"ArrowUp":"ArrowLeft";if(_.key===I)_.preventDefault(),C(x=>Math.min(t.length-1,x+1));else if(_.key===v)_.preventDefault(),C(x=>Math.max(0,x-1));else if(_.key==="Home")_.preventDefault(),C(0);else if(_.key==="End")_.preventDefault(),C(t.length-1);else if(_.key==="Enter"||_.key===" "){_.preventDefault();const x=t[g];x&&!x.disabled&&l(n(x),x,g)}};if(e==="cards")return r.jsxs("ul",{className:"nhs-navigation-split-view__cards",role:"listbox","aria-activedescendant":a?String(a):void 0,children:[t.map((_,I)=>{const v=n(_),x=v===a;return r.jsx("li",{className:"nhs-navigation-split-view__card-item",role:"option","aria-selected":x,children:r.jsxs("button",{id:String(v),type:"button",className:"nhs-navigation-split-view__card","data-selected":x||void 0,"data-disabled":_.disabled||void 0,disabled:_.disabled,onClick:()=>!_.disabled&&l(v,_,I),children:[_.icon&&r.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:_.icon}),r.jsx("span",{className:"nhs-navigation-split-view__item-label",children:_.label}),_.description&&r.jsx("span",{className:"nhs-navigation-split-view__item-description",children:_.description}),i?.(_),_.badge!==void 0&&r.jsx("span",{className:"nhs-navigation-split-view__badge",children:_.badge})]})},String(v))}),t.length===0&&!o&&r.jsx("li",{className:"nhs-navigation-split-view__card-item","aria-disabled":"true",children:s||r.jsx("div",{style:{padding:16},children:"No items"})})]});const N="nsv-nav-instructions",w=X.useMemo(()=>X.memo(({item:_,idx:I,selected:v,focused:x})=>{const S=n(_),A=_.disabled?{"aria-disabled":!0,tabIndex:-1}:{tabIndex:x?0:-1,onClick:()=>{j.current=I,l(S,_,I)},onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&(D.preventDefault(),j.current=I,l(S,_,I))}};return r.jsxs("li",{id:String(S),"data-nav-item":!0,className:"nhs-navigation-split-view__list-item nhs-navigation-split-view__item-button",role:"option","aria-selected":v,"aria-current":v?"true":void 0,"data-selected":v||void 0,"data-disabled":_.disabled||void 0,...A,children:[_.icon&&r.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:_.icon}),r.jsxs("span",{className:"nhs-navigation-split-view__item-content",children:[r.jsx("span",{className:"nhs-navigation-split-view__item-label",children:_.label}),_.description&&r.jsx("span",{className:"nhs-navigation-split-view__item-description",children:_.description}),i?.(_)]}),_.badge!==void 0&&r.jsx("span",{className:"nhs-navigation-split-view__badge",children:_.badge})]})}),[n,l,i]);return r.jsxs(r.Fragment,{children:[r.jsxs("ul",{ref:h,className:"nhs-navigation-split-view__list",onKeyDown:M,role:"listbox","aria-label":"Navigation items","aria-describedby":N,"aria-activedescendant":a?String(a):void 0,children:[t.map((_,I)=>r.jsx(w,{item:_,idx:I,selected:n(_)===a,focused:(()=>{const v=typeof m=="number"?m:g;return I===v||v===-1&&I===0&&d==="first"})(),"data-just-selected":n(_)===f?"true":void 0},String(n(_)))),t.length===0&&!o&&r.jsx("li",{className:"nhs-navigation-split-view__list-item","aria-disabled":"true",children:s||r.jsx("div",{style:{padding:16},children:"No items"})})]}),r.jsx("div",{id:N,style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:y||"Use arrow keys to navigate, Enter to open."})]})}const Ln=Object.freeze({small:320,smallMax:767,medium:768,large:1025,xlarge:1200,xxlarge:1440});function Mc(){return typeof window>"u"?Ln.small:window.innerWidth||document.documentElement.clientWidth||0}function Ca(){const[e,t]=X.useState(Mc());X.useEffect(()=>{if(typeof window>"u")return;const s=()=>t(Mc());return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const n=X.useCallback(s=>e>=Ln[s],[e]),a=X.useCallback(s=>e<Ln[s],[e]),o=X.useCallback((s,i)=>e>=Ln[s]&&e<Ln[i],[e]);return{width:e,up:n,down:a,between:o,values:Ln}}function Qy(e){const{width:t,values:n}=Ca();let a=e.base;const o=["small","medium","large","xlarge","xxlarge"];for(const s of o){const i=n[s];t>=i&&e[s]!==void 0&&(a=e[s])}return a}function ex(e,t,n){const{up:a}=Ca(),[o,s]=X.useState(!1);X.useEffect(()=>s(!0),[]);const i=o&&a("medium"),l=o&&a("xlarge");let c;return e?c=e:i?c="two-column":c="list",!e&&t&&n&&l&&(c="three-column"),{effectiveLayout:c,hydrated:o,isAtLeastMedium:i,isAtLeastXlarge:l}}function tx(e){const{enabled:t,isAtLeastMedium:n,initiallyCollapsed:a,persist:o,storageKey:s,urlParam:i,onChange:l}=e,c=X.useMemo(()=>{if(o&&(o==="url"||o==="both")&&typeof window<"u"){const p=new URLSearchParams(window.location.search).get(i);if(p==="1")return!0;if(p==="0")return!1}if(o&&(o==="localStorage"||o==="both")&&typeof window<"u")try{const h=window.localStorage.getItem(s);if(h==="1")return!0;if(h==="0")return!1}catch{}return a},[o,a,s,i]),[d,u]=X.useState(c);X.useEffect(()=>{l?.(d)},[d,l]);const f=X.useCallback(()=>{t&&n&&u(h=>!h)},[t,n]);return X.useEffect(()=>{if(!(!o||typeof window>"u")){if(o==="localStorage"||o==="both")try{window.localStorage.setItem(s,d?"1":"0")}catch{}if(o==="url"||o==="both"){const h=new URLSearchParams(window.location.search);h.set(i,d?"1":"0");const p=`${window.location.pathname}?${h.toString()}${window.location.hash}`;window.history.replaceState(null,"",p)}}},[d,o,s,i]),{collapsed:d,toggle:f}}function Ic(e){const{items:t,selectedId:n,defaultSelectedId:a,onSelectionChange:o,renderItemContent:s,renderContent:i,renderSecondaryContent:l,forceLayout:c,animated:d=!0,backLabel:u="Back",nextLabel:f="Next",isLoading:h=!1,emptyState:p,a11y:y,className:m,getId:g=Te=>Te.id,orientation:C="vertical",autoEnableThirdColumn:j=!0,onDrillChange:M,navigationInstructions:N="Use arrow keys to navigate, Enter to open.",initialFocus:w="first",skipFocusOnSelect:_=!1,skipAnnouncements:I=!1,onFocusChange:v,syncUrl:x=!1,urlParamSelected:S="nsv",urlParamDrill:A="nsvDrill",urlSyncDebounceMs:D=0,lazySecondary:F=!1,navFooter:T,collapsibleNav:L=!1,navInitiallyCollapsed:$=!1,onNavCollapseChange:O,collapseToggleLabelShow:J="Show navigation",collapseToggleLabelHide:ee="Hide navigation",collapseToggleIconShow:ae,collapseToggleIconHide:R,persistNavCollapsed:B,navCollapsedStorageKey:E="nsvCollapsed",navCollapsedUrlParam:Y="nsvCollapsed",autoContentHeader:P,contentHeaderLevel:W=2,renderContentHeader:H,contentSubheader:Q,secondarySubheader:q}=e,{effectiveLayout:te,hydrated:fe,isAtLeastMedium:Z}=ex(c,j,!!l),se=jc({enabled:x,paramSelected:S,paramDrill:A}),[de,ve]=X.useState(()=>se.selectedId!==void 0?se.selectedId:a),me=n!==void 0?n:de,De=t.find(Te=>g(Te)===me),[Ge,Le]=X.useState(void 0);X.useEffect(()=>{if(me===void 0)return;Le(me);const Te=setTimeout(()=>Le(void 0),220);return()=>clearTimeout(Te)},[me]);const Ae=X.useRef(null),_e=X.useRef(null),z=X.useRef(null),K=X.useRef(null),[le,pe]=X.useState(()=>({contentIndex:0,secondaryIndex:0})),[ge,U]=X.useState(()=>"nav"),[V,ie]=X.useState(0),ne=()=>[K.current,_e.current,z.current].filter(Boolean),oe=Te=>{const Re=ne(),qe=Math.max(0,Math.min(Te,Re.length-1));he(Re[qe]),ie(qe)},ue=X.useCallback(Te=>Te?Array.from(Te.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(qe=>!qe.hasAttribute("disabled")&&qe.tabIndex!==-1):[],[]),he=X.useCallback(Te=>{if(Te)try{Te.focus({preventScroll:!0})}catch{Te.focus()}},[]),we=X.useCallback(Te=>{const Re=ue(_e.current);if(!Re.length){he(_e.current);return}const qe=Math.max(0,Math.min(Te,Re.length-1)),Qe=Re[qe];Qe.focus(),setTimeout(()=>{document.activeElement!==Qe&&(Qe.focus(),setTimeout(()=>{document.activeElement!==Qe&&Qe.click()},10))},10),pe(st=>({...st,contentIndex:qe}));const vt=st=>{st.key==="Escape"&&(st.preventDefault(),st.stopPropagation(),he(_e.current),Qe.removeEventListener("keydown",vt))};Re.forEach(st=>{const ft=st._escapeHandler;ft&&st.removeEventListener("keydown",ft)}),Qe._escapeHandler=vt,Qe.addEventListener("keydown",vt)},[ue]),Ne=X.useCallback(Te=>{const Re=ue(z.current);if(!Re.length){he(z.current);return}const qe=Math.max(0,Math.min(Te,Re.length-1)),Qe=Re[qe];Qe.focus(),setTimeout(()=>{document.activeElement!==Qe&&(Qe.focus(),setTimeout(()=>{document.activeElement!==Qe&&Qe.click()},10))},10),pe(st=>({...st,secondaryIndex:qe}));const vt=st=>{st.key==="Escape"&&(st.preventDefault(),st.stopPropagation(),he(z.current),Qe.removeEventListener("keydown",vt))};Re.forEach(st=>{const ft=st._escapeHandler;ft&&st.removeEventListener("keydown",ft)}),Qe._escapeHandler=vt,Qe.addEventListener("keydown",vt)},[ue]),ze=Te=>{if(Te.defaultPrevented)return;const Re=Te.key,qe=Te.target,Qe=!!Se.current&&Se.current.contains(qe),vt=!!_e.current&&_e.current.contains(qe),st=!!z.current&&z.current.contains(qe),ft=!!z.current,co=qe===K.current||qe===_e.current||qe===z.current,Ti=Ve&&(te==="list"||te==="cards"),uo=vt&&!!qe.closest(".nhs-navigation-split-view__header");if(ge==="containers"&&co){if(Re==="ArrowRight"){Te.preventDefault();const Ke=ne(),it=Math.min(Ke.length-1,V+1);oe(it);return}if(Re==="ArrowLeft"){Te.preventDefault();const Ke=Math.max(0,V-1);oe(Ke);return}if(Re==="Home"){Te.preventDefault(),oe(0);return}if(Re==="End"){Te.preventDefault(),oe(ne().length-1);return}if(Re==="Enter"||Re===" "){if(Te.preventDefault(),qe===K.current){if(U("nav"),Se.current){const Ke=Array.from(Se.current.querySelectorAll("[data-nav-item]"));(Ke[Me>=0?Me:0]||Ke[0])?.focus()}}else qe===_e.current?(U("content"),we(le.contentIndex)):qe===z.current&&(U("secondary"),Ne(le.secondaryIndex));return}return}if(Re==="Escape"){if(ge==="content"||ge==="secondary"){if(vt||st){if(Te.preventDefault(),U("nav"),Se.current){const it=Array.from(Se.current.querySelectorAll("[data-nav-item]"))[Me>=0?Me:0];setTimeout(()=>it?.focus(),10)}}else if((qe===_e.current||qe===z.current)&&(Te.preventDefault(),U("nav"),Se.current)){const it=Array.from(Se.current.querySelectorAll("[data-nav-item]"))[Me>=0?Me:0];setTimeout(()=>it?.focus(),10)}}return}if(Re==="Enter"||Re===" "){if(qe.matches('button, a, input, select, textarea, [role="button"], [role="link"], [role="tab"]'))return;if(qe===_e.current&&ge==="content"){Te.preventDefault(),Te.stopPropagation(),ue(_e.current).length>0&&setTimeout(()=>{we(le.contentIndex)},50);return}if(qe===z.current&&ge==="secondary"){Te.preventDefault(),Te.stopPropagation(),ue(z.current).length>0&&setTimeout(()=>{Ne(le.secondaryIndex)},50);return}}if(Ti&&uo&&!co&&(Re==="ArrowRight"||Re==="ArrowLeft")){const Ke=ue(_e.current).filter(it=>it.closest(".nhs-navigation-split-view__header"));if(Ke.length>1){const it=Ke.indexOf(qe);if(it>=0){const Lp=(it+(Re==="ArrowRight"?1:-1)+Ke.length)%Ke.length;Te.preventDefault(),Ke[Lp].focus();return}}}if(Re==="ArrowRight"){if(Qe||ge==="nav"){Te.preventDefault(),U("content"),setTimeout(()=>he(_e.current),10);return}if(vt||ge==="content"){ft&&(Te.preventDefault(),U("secondary"),setTimeout(()=>he(z.current),10));return}}if(Re==="ArrowLeft"){if(st||ge==="secondary"){Te.preventDefault(),U("content"),setTimeout(()=>he(_e.current),10);return}if(vt||ge==="content"){if(Te.preventDefault(),U("nav"),Se.current){const it=Array.from(Se.current.querySelectorAll("[data-nav-item]"))[Me>=0?Me:0];setTimeout(()=>he(it),10)}return}}if(Re==="Home"&&!Qe&&(Te.preventDefault(),U("nav"),Se.current)){const Ke=Array.from(Se.current.querySelectorAll("[data-nav-item]")),it=Ke[Me>=0?Me:0]||Ke[0];setTimeout(()=>he(it),10)}if(Re==="End"){const Ke=ft?z.current:_e.current;Ke&&!Ke.contains(qe)&&(Te.preventDefault(),ft?(U("secondary"),setTimeout(()=>he(z.current),10)):(U("content"),setTimeout(()=>he(_e.current),10)))}if(Re==="ArrowDown"||Re==="ArrowUp"){if(qe===_e.current&&Re==="ArrowDown"){Te.preventDefault(),ue(_e.current).length>0&&we(0);return}if(qe===z.current&&Re==="ArrowDown"){Te.preventDefault(),ue(z.current).length>0&&Ne(0);return}if(vt){const Ke=ue(_e.current);if(Ke.length){Te.preventDefault();const it=Re==="ArrowDown"?1:-1,Yt=(le.contentIndex+it+Ke.length)%Ke.length;we(Yt)}}else if(st){const Ke=ue(z.current);if(Ke.length){Te.preventDefault();const it=Re==="ArrowDown"?1:-1,Yt=(le.secondaryIndex+it+Ke.length)%Ke.length;Ne(Yt)}}}},Ve=!!De&&(te==="list"||te==="cards"),ot=X.useMemo(()=>P===void 0?{mobile:!0,tablet:!1,desktop:!1}:P===!0?{mobile:!0,tablet:!0,desktop:!0}:P===!1?{mobile:!1,tablet:!1,desktop:!1}:{mobile:P.mobile!==void 0?P.mobile:!0,tablet:P.tablet||!1,desktop:P.desktop||!1},[P]),Xe=fe&&Z&&te!=="three-column",ce=fe&&te==="three-column",$e=!!l,G=te==="three-column",[re,ye]=X.useState(!1);X.useEffect(()=>{G&&re&&ye(!1)},[G,re]),X.useEffect(()=>{re&&!G&&(U("secondary"),ie(2),setTimeout(()=>{he(z.current)},50))},[re,G]),X.useEffect(()=>{!re&&!G&&ge==="secondary"&&(U("content"),ie(1),setTimeout(()=>{he(_e.current)},50))},[re,G,ge]);const xe=!!De&&(Ve&&ot.mobile||!Ve&&Xe&&ot.tablet||!Ve&&ce&&ot.desktop)||$e&&!G,ke=Ve?"mobile":Xe?"tablet":"desktop";X.useEffect(()=>{if(!x)return;const Te=te==="three-column";let Re=!1;const qe=()=>{Re||(se.selectedId!==me&&se.setSelectedId(me),se.drilledIn!==Te&&se.setDrilledIn(Te))};if(D&&D>0){const Qe=setTimeout(qe,D);return()=>{Re=!0,clearTimeout(Qe)}}else qe()},[x,se,me,te,D]),X.useEffect(()=>{if(!x)return;const Te=()=>{const Re=new URLSearchParams(window.location.search),qe=Re.get(S);Re.get(A),ve(qe===null?void 0:qe)};return window.addEventListener("popstate",Te),()=>window.removeEventListener("popstate",Te)},[x,S,A,c,l]);const He=X.useRef(0),je=X.useRef(null),Ie=X.useCallback((Te,Re)=>{Te!==me&&(n===void 0&&ve(Te),o?.(Te,Re))},[n,o,me]);X.useEffect(()=>{if(!_&&Ve&&_e.current){const Te=setTimeout(()=>he(_e.current),30);return()=>clearTimeout(Te)}},[Ve,me,_]);const Se=X.useRef(null),[Me,Je]=X.useState(()=>w==="first"?0:-1);X.useEffect(()=>{if(Me<0||!Se.current)return;const Re=Array.from(Se.current.querySelectorAll("[data-nav-item]"))[Me];if(Re){document.activeElement!==Re&&he(Re),He.current=Me;const qe=t[Me];v?.(qe?g(qe):void 0,qe,Me)}},[Me,t,v,g]);const tt=Te=>{const Re=C==="vertical"?"ArrowDown":"ArrowRight",qe=C==="vertical"?"ArrowUp":"ArrowLeft";if(Te.key==="ArrowRight"&&C==="vertical"){Te.preventDefault(),re?(U("secondary"),setTimeout(()=>{he(z.current)},10)):(U("content"),setTimeout(()=>{he(_e.current)},10));return}if(Te.key===Re)Te.preventDefault(),Je(Qe=>Math.min(t.length-1,Qe+1));else if(Te.key===qe)Te.preventDefault(),Je(Qe=>Math.max(0,Qe-1));else if(Te.key==="Home")Te.preventDefault(),Je(0);else if(Te.key==="End")Te.preventDefault(),Je(t.length-1);else if(Te.key==="Enter"||Te.key===" "){Te.preventDefault();const Qe=t[Me];Qe&&!Qe.disabled&&Ie(g(Qe),Qe)}else if(Te.key.length===1&&/[a-z0-9]/i.test(Te.key)){je.current||(je.current={buffer:"",last:0});const Qe=Date.now(),vt=700,st=Te.key.toLowerCase();Qe-je.current.last>vt?je.current.buffer=st:je.current.buffer+=st,je.current.last=Qe;let ft=je.current.buffer;const co=ft.split("").every(Yt=>Yt===ft[0]),Ti=t.map(Yt=>String(Yt.label||"").toLowerCase());let uo=0;Me>=0&&(uo=(Me+1)%t.length);let Ke;const it=(Yt,Lp)=>{const Ap=t.length;for(let Li=0;Li<Ap;Li++){const Ai=(uo+Li)%Ap;if(!t[Ai].disabled&&Ti[Ai].startsWith(Yt))return Ai}};co&&ft.length>1?Ke=it(ft[0]):(Ke=it(ft),Ke===void 0&&ft.length>1&&(Ke=it(ft[ft.length-1]),Ke!==void 0&&je.current&&(je.current.buffer=ft[ft.length-1]))),Ke!==void 0&&Je(Ke)}},{collapsed:Ee,toggle:Pe}=tx({enabled:L,isAtLeastMedium:Z,initiallyCollapsed:$,persist:B,storageKey:E,urlParam:Y,onChange:O}),Ue=["nhs-navigation-split-view",d?"nhs-navigation-split-view--animated":"",Ve?"nhs-navigation-split-view--detail-active":"",te==="three-column"?"nhs-navigation-split-view--three-column":"",L&&Z&&Ee?"nhs-navigation-split-view--nav-collapsed":"",m].filter(Boolean).join(" "),Vt=X.useRef(null);X.useEffect(()=>{if(!I&&Vt.current){const Te=De?`Selected ${De.label}`:"Selection cleared";Vt.current.textContent=Te}},[De,I]),X.useEffect(()=>{if(!Ve&&me==null&&Se.current){const Re=Se.current.querySelectorAll("[data-nav-item]")[He.current];he(Re)}},[Ve,me]);const It=te==="three-column",[Di,A1]=X.useState(!1);X.useEffect(()=>{It&&!Di&&A1(!0)},[It,Di]);const Tp=X.useRef(It);return X.useEffect(()=>{Tp.current!==It&&(M?.(It),Tp.current=It)},[It,M]),r.jsx("div",{ref:Ae,className:Ue,"aria-label":y?.rootLabel,"data-layout":te,onKeyDown:ze,children:r.jsxs("div",{className:"nhs-navigation-split-view__body",children:[r.jsxs("div",{className:"nhs-navigation-split-view__panes","data-active-detail":Ve||void 0,style:{transform:Ve?"translateX(-100%)":void 0},children:[r.jsxs("div",{ref:K,className:"nhs-navigation-split-view__nav-pane",role:"navigation","aria-label":y?.navigationLabel||"Items","data-collapsed":Ee||void 0,tabIndex:0,children:[L&&Z&&r.jsx("div",{className:"nhs-navigation-split-view__nav-collapse",children:r.jsx("button",{type:"button",onClick:Pe,className:"nhs-navigation-split-view__nav-collapse-btn","aria-label":Ee?J:ee,title:Ee?J:ee,children:Ee?ae||r.jsx(Jy,{}):R||r.jsx(qy,{})})}),r.jsx("div",{className:"nhs-navigation-split-view__nav-scroll",children:r.jsx(Ky,{layout:te==="cards"?"cards":"list",items:t,getId:g,selectedId:me,isLoading:h,emptyState:p,renderItemContent:s,onSelect:(Te,Re,qe)=>{He.current=qe,Ie(Te,Re)},orientation:C,initialFocus:w,onFocusChange:v,justSelectedId:Ge,listRef:Se,onKeyDownList:tt,navigationInstructions:N,controlledFocusedIndex:Me})}),T&&r.jsx("div",{className:"nhs-navigation-split-view__nav-footer",role:"contentinfo",children:T})]}),r.jsxs("div",{ref:_e,className:"nhs-navigation-split-view__content-pane",role:"region","aria-label":y?.contentLabel||"Content","data-has-selection":!!De||void 0,tabIndex:0,style:{display:re&&!G?"none":void 0},children:[xe&&r.jsx(Xy,{show:xe,label:De?De.label:void 0,contentHeaderLevel:W,detailActive:Ve,headerContext:ke,backLabel:u,nextLabel:f,onBack:()=>Ie(void 0,void 0),onForward:()=>ye(!0),renderContentHeader:H,item:De,contentSubheader:Q,tertiaryInlineActive:re}),r.jsx("div",{className:"nhs-navigation-split-view__content-inner",style:{padding:32,flex:1},children:i(De)})]}),te==="three-column"&&(!F||Di)||re&&!G?r.jsx("div",{ref:z,className:"nhs-navigation-split-view__secondary-pane",role:"region","aria-label":y?.secondaryContentLabel||"Secondary",tabIndex:0,children:r.jsxs("div",{className:"nhs-navigation-split-view__secondary-inner",style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[re&&!G&&r.jsx("div",{className:"nhs-navigation-split-view__header",children:r.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[r.jsx(Sn,{element:"button",text:u,style:{marginRight:16},onClick:()=>ye(!1)}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:r.jsx("h2",{style:{marginLeft:0,marginRight:0},children:De&&typeof De=="object"&&"label"in De?De.label:String(De)})})]})})}),De&&q&&r.jsx("div",{className:"nhs-navigation-split-view__secondary-header",style:{padding:"16px 32px",borderBottom:"1px solid var(--nsplit-divider)"},children:typeof q=="function"?q(De):q}),r.jsx("div",{style:{padding:32,flex:1,minWidth:0},children:l?.(De)})]})}):null]}),r.jsx("div",{ref:Vt,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"}}),r.jsx("div",{"aria-live":"polite",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:It?"Expanded to three column layout":"In two column layout"})]})})}Ic.displayName="NavigationSplitView";function nx({steps:e,currentIndex:t,onNavigate:n,renderCard:a,className:o,ariaLabel:s="Steps"}){const i=X.useRef(null),l=c=>{if(e?.length)if(c.key==="ArrowLeft"||c.key==="ArrowUp"){c.preventDefault();const d=Math.max(0,t-1);d!==t&&n?.(d)}else if(c.key==="ArrowRight"||c.key==="ArrowDown"){c.preventDefault();const d=Math.min(e.length-1,t+1);d!==t&&n?.(d)}else c.key==="Home"?(c.preventDefault(),n?.(0)):c.key==="End"&&(c.preventDefault(),n?.(e.length-1))};return r.jsx("div",{className:o,"aria-label":s,role:"region",children:r.jsx("div",{className:"nhsfdp-cards-viewport",role:"group","aria-roledescription":"steps",tabIndex:0,onKeyDown:l,children:r.jsx("div",{ref:i,className:"nhsfdp-cards-track",style:{transform:`translate3d(-${Math.max(0,t)*100}%, 0, 0)`},children:e.map((c,d)=>{const u=d===t;return r.jsx("div",{className:"nhsfdp-pane mobile-pane"+(u?" is-current":""),role:"group","aria-roledescription":"step","aria-label":(c.label??`Step ${d+1}`).toString(),"aria-hidden":!u,onClick:f=>{if(f.defaultPrevented)return;const h=f.target;h&&h.closest('button, a, input, select, textarea, [role="button"], [role="link"], [contenteditable="true"], [data-prevent-card-click]')||n?.(d)},children:a(c,d,u)},d)})})})})}function rx({steps:e,currentIndex:t,onNavigate:n,renderLabel:a,ariaLabel:o="Breadcrumbs",className:s,style:i}){const l=e.map((d,u)=>{const f=u===t,h=u<t,p=a?a(d,u):d.label??`Step ${u+1}`;return{text:String(p),href:h?"#":void 0,active:f,attributes:h?{"data-index":String(u)}:void 0}}),c=d=>{const f=d.target.closest("a.nhsuk-breadcrumb__link, a.nhsuk-breadcrumb__backlink");if(!f)return;if(f.classList.contains("nhsuk-breadcrumb__backlink")){d.preventDefault();const p=Math.max(0,t-1);p!==t&&n?.(p);return}const h=f.getAttribute("data-index");if(h!=null){d.preventDefault();const p=parseInt(h,10);Number.isNaN(p)||n?.(p)}};return r.jsx("div",{style:i,onClick:c,children:r.jsx(Vo,{labelText:o,classes:s,items:l})})}function ax(e){const{up:t}=Ca(),[n,a]=X.useState(!1);X.useEffect(()=>a(!0),[]);const o=n&&t("medium")&&!t("xlarge"),s=n&&t("xlarge"),i=s?"desktop":o?"tablet":"mobile",l=X.useMemo(()=>{if(!e.step||!e.layoutForStep)return i==="mobile"?{panes:1,showPrimaryNav:!1,showSecondaryNav:!1}:i==="tablet"?{panes:2,showPrimaryNav:!0,showSecondaryNav:!1}:{panes:3,showPrimaryNav:!0,showSecondaryNav:!0};try{return e.layoutForStep({step:e.step,index:e.index,breakpoint:i})||{}}catch{return{}}},[e.step,e.index,e.layoutForStep,i]);return{hydrated:n,breakpoint:i,isTablet:o,isDesktop:s,paneConfig:l}}function ox(e){const{steps:t,currentStepId:n,defaultStepId:a,onStepChange:o,layoutForStep:s,renderStepCard:i,renderStepContent:l,renderSecondaryContent:c,renderSecondaryNav:d,renderBreadcrumbs:u,className:f,getId:h=ce=>ce.id,enableTabletGrid:p=!1,isStepComplete:y,showMobileControls:m,currentSectionId:g,defaultSectionIdForStep:C,onSectionChange:j}=e,M=typeof window<"u"&&!!window.__WSV_DEBUG_FOCUS||!1,N=(...ce)=>{M&&console.log("[WorkflowSplitView]",...ce)},w=()=>{if(typeof document>"u")return{};const ce=document.activeElement,$e=ce?.getAttribute?.("role");return{activeTag:ce?.tagName,activeId:ce?.id,activeRole:$e,activeClasses:ce?.className}},[_,I]=k.useState(a??(t[0]?h(t[0]):void 0)),v=n??_,x=t.findIndex(ce=>h(ce)===v),S=x>=0?t[x]:t[0],[A,D]=k.useState({}),F=ce=>ce?String(h(ce)):"",T=k.useCallback(ce=>{if(!ce)return;try{const G=C?.(ce);if(G!==void 0)return G}catch{}const $e=ce.sections&&ce.sections[0];return $e?$e.id:void 0},[C]),L=g??A[F(S)]??T(S),$=S&&S.sections?S.sections:void 0,O=$?.find(ce=>ce.id===L),J=ce=>{if(S){const $e=F(S);g===void 0&&D(G=>({...G,[$e]:ce})),j?.(ce,$?.find(G=>G.id===ce),S)}},ee=ce=>{N("navigateTo",String(ce)),n===void 0&&I(ce);const $e=t.find(G=>h(G)===ce);$e&&o&&o(ce,$e)},ae=u?u({steps:t,current:S,onNavigate:ee}):r.jsx(rx,{steps:t,currentIndex:Math.max(0,x),onNavigate:ce=>{const $e=t[ce];$e&&ee(h($e))}}),{hydrated:R,breakpoint:B,paneConfig:E}=ax({step:S,index:x,layoutForStep:s}),Y=n!==void 0||a!==void 0&&t.length>0&&t[0]&&a!==h(t[0]),P=k.useRef(null),W=k.useRef(null),H=k.useRef(null),Q=k.useRef(null),q=k.useRef(null),te=k.useRef(0),fe=k.useRef(!1),Z=k.useRef(!1),se=k.useRef(null),[de,ve]=k.useState("nav"),me=k.useRef("nav");k.useEffect(()=>{me.current=de,de!=="nav"&&z(!1),de!=="content"&&le(!1),de!=="secondary"&&ge(!1)},[de]);const[De,Ge]=k.useState(0),[Le,Ae]=k.useState(()=>Math.max(0,x)),[_e,z]=k.useState(!1),[K,le]=k.useState(!1),[pe,ge]=k.useState(!1),U=k.useCallback(ce=>{if(ce){try{ce.focus({preventScroll:!0})}catch{ce.focus()}N("focusEl",{to:ce.tagName,id:ce.id,class:ce.className})}},[]),V=k.useCallback(()=>{const ce=()=>H.current;let $e=0;const G=()=>{const re=ce();re&&document.activeElement!==re&&U(re),$e+=1,$e<6&&document.activeElement!==ce()&&setTimeout(G,0)};N("focusContentSoon:start",{attempts:$e}),G(),typeof queueMicrotask=="function"&&queueMicrotask(G),requestAnimationFrame(G)},[U]),ie=k.useCallback(ce=>ce?Array.from(ce.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(G=>!G.hasAttribute("disabled")&&G.tabIndex!==-1):[],[]),ne=()=>[W.current,H.current,Q.current].filter(Boolean),oe=(ce,$e)=>{if(!ce)return;const G=typeof document<"u"?document.activeElement:null;if(G&&ce.contains(G))try{G.blur(),N("blurActiveIfInside",{label:$e,root:ce.getAttribute("aria-label")||ce.tagName})}catch{}},ue=()=>{const ce=typeof document<"u"?document.activeElement:null;if(ce&&W.current&&W.current.contains(ce))try{ce.blur(),N("blurActiveIfInNav: blurred active element inside nav")}catch{}},he=ce=>{const $e=ne(),G=Math.max(0,Math.min(ce,$e.length-1));N("focusContainerByIndex",{idx:ce,clamped:G}),U($e[G]),Ge(G)},we=k.useCallback(ce=>{let $e=0;const G=ce??Le,re=()=>{const be=q.current;if(!be)return null;const xe=Array.from(be.querySelectorAll("[data-nav-item]"));return xe[G]||xe[0]||null},ye=()=>{if(me.current!=="nav"){N("focusNavItemSoon: abort (mode changed)",{mode:me.current});return}const be=re();be&&document.activeElement!==be&&U(be),$e+=1,$e<6&&document.activeElement!==be&&setTimeout(ye,0)};N("focusNavItemSoon:start",{index:G,...w()}),ye(),typeof queueMicrotask=="function"&&queueMicrotask(ye),requestAnimationFrame(ye)},[U,Le]);k.useEffect(()=>{if(!R)return;B==="desktop"||p&&B==="tablet"?Y?(ve("nav"),Ge(0),N("init: grid preselected â†’ mode=nav",{containerIndex:0})):(ve("containers"),Ge(0),N("init: grid default â†’ mode=containers",{containerIndex:0})):(ve("nav"),N("init: non-grid â†’ mode=nav"))},[R,B,Y,p]),k.useEffect(()=>()=>{se.current!=null&&(clearTimeout(se.current),se.current=null,N("cleanup: cleared nav bootstrap timeout"))},[]),k.useEffect(()=>{const ce=Math.max(0,x);Ae(ce),N("sync navFocusedIndex with currentIndex",{currentIndex:x,navFocusedIndex:ce})},[x]),k.useEffect(()=>{N("paneFocusMode â†’",de,w())},[de]);const Ne=ce=>{if(!(R&&(B==="desktop"||p&&B==="tablet")))return;const G=ce.key,re=ce.target,ye=re.tagName.toLowerCase(),be=ye==="input"||ye==="textarea"||ye==="select",xe=re.getAttribute("role"),ke=xe==="textbox"||xe==="searchbox"||xe==="combobox",He=re.getAttribute("contenteditable"),je=be||ke||He&&He!=="false";if(N("onRootKeyDown",{key:G,tag:ye,role:xe,isEditable:je,paneFocusMode:de,containerIndex:De,...w()}),je&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(G))return;const Ie=!!q.current&&q.current.contains(re),Se=!!H.current&&H.current.contains(re),Me=!!Q.current&&Q.current.contains(re),Je=re===W.current||re===H.current||re===Q.current,tt=!!Q.current;if(Je){if(G==="ArrowLeft"&&re===H.current){ce.preventDefault(),N("container: ArrowLeft on content container â†’ nav item"),ve("nav"),oe(H.current,"from-content"),te.current=Le,we(Le);return}if(G==="ArrowRight"&&re===H.current&&tt){ce.preventDefault(),N("container: ArrowRight on content container â†’ secondary"),ve("secondary"),oe(H.current,"from-content"),le(!1),setTimeout(()=>U(Q.current),10);return}if(G==="ArrowRight"&&re===W.current){ce.preventDefault(),N("container: ArrowRight on nav container â†’ content"),ve("content"),oe(W.current,"from-nav"),z(!1),V();return}if(G==="ArrowLeft"&&re===Q.current){ce.preventDefault(),N("container: ArrowLeft on secondary container â†’ content"),ve("content"),oe(Q.current,"from-secondary"),ge(!1),V();return}if(G==="ArrowRight"){ce.preventDefault(),N("container: ArrowRight â†’ next container"),oe(re,"container-roving"),re===W.current&&z(!1),re===H.current&&le(!1),re===Q.current&&ge(!1),he(De+1);return}if(G==="ArrowLeft"){ce.preventDefault(),N("container: ArrowLeft â†’ prev container"),oe(re,"container-roving"),re===W.current&&z(!1),re===H.current&&le(!1),re===Q.current&&ge(!1),he(De-1);return}if(G==="Home"){ce.preventDefault(),N("container: Home â†’ first container"),oe(re,"container-roving"),re===W.current&&z(!1),re===H.current&&le(!1),re===Q.current&&ge(!1),he(0);return}if(G==="End"){ce.preventDefault(),N("container: End â†’ last container"),oe(re,"container-roving"),re===W.current&&z(!1),re===H.current&&le(!1),re===Q.current&&ge(!1),he(ne().length-1);return}if(G==="Enter"||G===" "){if(ce.preventDefault(),re===W.current)ve("nav"),N("container: Enter/Space on nav â†’ focus nav item",{navFocusedIndex:Le}),te.current=Le,Z.current=!0,we(Le);else if(re===H.current){ve("content"),oe(H.current,"descend-content"),le(!1);const Ee=ie(H.current);N("container: Enter/Space on content â†’ focus first focusable",{count:Ee.length}),(Ee[0]||H.current)?.focus()}else if(re===Q.current){ve("secondary"),oe(Q.current,"descend-secondary"),ge(!1);const Ee=ie(Q.current);N("container: Enter/Space on secondary â†’ focus first focusable",{count:Ee.length}),(Ee[0]||Q.current)?.focus()}return}}if(G==="Escape"){if(Se||Me){ce.preventDefault(),ve("containers"),N("Escape: from",Se?"content":"secondary","â†’ containers (focus container)"),Se&&oe(H.current,"escape-ascend"),Me&&oe(Q.current,"escape-ascend"),Se&&setTimeout(()=>U(H.current),10),Me&&setTimeout(()=>U(Q.current),10);return}if(Ie){ce.preventDefault(),ve("containers"),N("Escape: from nav â†’ containers (focus nav container)"),ue(),U(W.current);return}if(Je){ce.preventDefault(),ve("containers"),N("Escape: on container (stay in containers)");return}}if(G==="Enter"||G===" "){if(re===H.current&&de==="content"){ce.preventDefault(),oe(H.current,"descend-content");const Ee=ie(H.current);N("Enter/Space on content container in content mode"),(Ee[0]||H.current)?.focus();return}if(re===Q.current&&de==="secondary"){ce.preventDefault(),oe(Q.current,"descend-secondary");const Ee=ie(Q.current);N("Enter/Space on secondary container in secondary mode"),(Ee[0]||Q.current)?.focus();return}}if(G==="ArrowRight"){if(Ie||de==="nav"){ce.preventDefault(),ve("content"),N("ArrowRight: from nav â†’ content (focus content)"),oe(W.current,"from-nav"),z(!1),V();return}if(Se||de==="content"){tt&&(ce.preventDefault(),ve("secondary"),N("ArrowRight: from content â†’ secondary (focus secondary)"),oe(H.current,"from-content"),le(!1),setTimeout(()=>U(Q.current),10));return}}if(G==="ArrowLeft"){if(Me||de==="secondary"){ce.preventDefault(),N("ArrowLeft: from secondary â†’ content (focus content)"),oe(Q.current,"from-secondary"),ge(!1),V();return}if(Se||de==="content"){ce.preventDefault(),ve("nav"),N("ArrowLeft: from content â†’ nav (focus nav item)",{navFocusedIndex:Le}),te.current=Le,oe(H.current,"from-content"),le(!1),we(Le);return}}if((G==="Enter"||G===" ")&&(Ie||de==="nav")){ce.preventDefault();const Ee=q.current,Pe=Ee?Array.from(Ee.querySelectorAll("[data-nav-item]")):[];let Ue=te.current??Le;if(Pe.length){const Vt=document.activeElement,It=Vt?Pe.indexOf(Vt):-1;It>=0&&(Ue=It)}Ue=Math.max(0,Math.min(Ue,Pe.length-1)),Ae(Ue),te.current=Ue,N("Root: Enter/Space activate from nav context",{idx:Ue}),ee(h(t[Ue])),ve("content"),me.current="content",fe.current=!0,ue(),V();return}},ze=()=>{const ce=()=>{fe.current=!1,Z.current=!1},$e=be=>{if(!q.current)return;const xe=Array.from(q.current.querySelectorAll("[data-nav-item]"));if(xe.length){if(be.key==="ArrowDown"){be.preventDefault(),be.stopPropagation(),Z.current=!1,ve("nav");const ke=te.current??Le,He=Math.min(xe.length-1,ke+1);Ae(He),te.current=He,we(He),N("PrimaryNav: ArrowDown",{from:ke,to:He})}else if(be.key==="ArrowUp"){be.preventDefault(),be.stopPropagation(),Z.current=!1,ve("nav");const ke=te.current??Le,He=Math.max(0,ke-1);Ae(He),te.current=He,we(He),N("PrimaryNav: ArrowUp",{from:ke,to:He})}else if(be.key==="Home"){be.preventDefault(),be.stopPropagation(),Z.current=!1;const ke=0;Ae(ke),te.current=ke,we(ke),N("PrimaryNav: Home",{to:ke})}else if(be.key==="End"){be.preventDefault(),be.stopPropagation(),Z.current=!1;const ke=xe.length-1;Ae(ke),te.current=ke,we(ke),N("PrimaryNav: End",{to:ke})}}},G=be=>{},re=be=>{if(be.key!=="Enter"&&be.key!==" "||!q.current)return;const xe=Array.from(q.current.querySelectorAll("[data-nav-item]"));if(!xe.length)return;be.preventDefault();let ke=-1;const je=be.target?.closest?.("[data-nav-item]");je&&(ke=xe.indexOf(je)),ke<0&&(ke=te.current??Le),ke=Math.max(0,Math.min(ke,xe.length-1)),Ae(ke),te.current=ke,N("PrimaryNav: Enter/Space activate (capture)",{idx:ke}),ee(h(t[ke])),ve("content"),me.current="content",fe.current=!0,se.current!=null&&(clearTimeout(se.current),se.current=null),ue(),V()},ye=be=>{if(be.defaultPrevented)return;fe.current=!1;const xe=be.target;if(!xe)return;const ke=xe.closest("[data-nav-item]");if(!ke||!q.current||!q.current.contains(ke))return;const je=Array.from(q.current.querySelectorAll("[data-nav-item]")).indexOf(ke);je<0||(Ae(je),te.current=je,N("PrimaryNav: click delegate activate",{idx:je}),ee(h(t[je])),ve("content"),ue(),se.current!=null&&(clearTimeout(se.current),se.current=null),V())};return r.jsx("ul",{ref:q,className:"nhsfdp-primary-nav",role:"listbox","aria-activedescendant":String(h(t[Math.max(0,Le)])),onKeyDownCapture:re,onKeyDown:$e,onKeyUp:G,onPointerDown:ce,onMouseDown:ce,onClick:ye,children:t.map((be,xe)=>{const ke=h(be),He=xe===x,je=de==="nav"&&xe===Le;return r.jsx("li",{id:String(ke),role:"option","aria-selected":He,children:r.jsx("button",{"data-nav-item":!0,tabIndex:je?0:-1,type:"button",className:"nhsfdp-primary-nav__item"+(He?" is-current":"")+(je?" is-focused":""),"aria-current":He?"step":void 0,onPointerDown:ce,onMouseDown:ce,onKeyDown:Ie=>{if(Ie.key==="Enter"||Ie.key===" "){if(Ie.preventDefault(),Z.current){Z.current=!1;return}te.current=xe,fe.current=!0,N("NavItem: onKeyDown activate",{i:xe,id:String(h(t[xe]))}),ee(h(t[xe])),ve("content"),me.current="content",se.current!=null&&(clearTimeout(se.current),se.current=null),ue(),V()}},onKeyUp:Ie=>{if(Ie.key==="Enter"||Ie.key===" "){if(Z.current){Z.current=!1;return}te.current=xe,N("NavItem: onKeyUp activate (fallback)",{i:xe,id:String(h(t[xe]))}),ee(h(t[xe])),ve("content"),me.current="content",se.current!=null&&(clearTimeout(se.current),se.current=null),ue(),V()}},onClick:Ie=>{if(fe.current){fe.current=!1,Ie.preventDefault(),Ie.stopPropagation(),N("NavItem: ignored synthetic click after keyboard activation",{i:xe});return}Ae(xe),te.current=xe,N("NavItem: onClick select",{i:xe,id:String(ke)}),ee(ke),ve("content"),me.current="content",se.current!=null&&(clearTimeout(se.current),se.current=null),ue(),V()},children:be.label})},String(ke))})})},Ve=()=>{const ce=Math.max(0,x),$e=ce>0,G=ce<t.length-1,re=m?m(S):y?y(S):!0;return r.jsxs("div",{className:"nhsfdp-workflow-mobile",children:[B==="tablet"?ae:null,re&&r.jsxs("div",{className:"nhsfdp-mobile-controls","aria-label":"Step navigation",children:[$e?r.jsx(Sn,{element:"button",text:"Back",onClick:()=>{const ye=t[ce-1];ye&&ee(h(ye))}}):r.jsx(Sn,{element:"button",text:"Back","aria-hidden":"true",style:{visibility:"hidden"}}),G?r.jsx(ka,{element:"button",text:"Next",onClick:()=>{const ye=t[ce+1];ye&&ee(h(ye))}}):r.jsx(ka,{element:"button",text:"Next","aria-hidden":"true",style:{visibility:"hidden"}})]}),r.jsx(nx,{steps:t,currentIndex:ce,onNavigate:ye=>{const be=t[ye];be&&ee(h(be))},renderCard:(ye,be,xe)=>i?i(ye):l(ye)})]})},ot=ce=>r.jsx("div",{className:"nhsfdp-workflow-grid panes-"+(ce.panes??2),onKeyDown:Ne,ref:P,role:"grid","aria-rowcount":1,"aria-colcount":(ce.showPrimaryNav?1:0)+1+(ce.showSecondaryNav?1:0),"aria-label":"Workflow layout",children:r.jsxs("div",{className:"nhsfdp-workflow-body",role:"row",children:[ce.showPrimaryNav&&r.jsx("aside",{ref:W,className:"nhsfdp-pane primary-nav"+(_e?" is-active-pane":""),"aria-label":"Primary navigation",role:"gridcell",tabIndex:0,onFocus:$e=>{$e.target===W.current&&z(!0)},onBlur:$e=>{$e.target===W.current&&z(!1)},children:r.jsx("section",{role:"complementary","aria-label":"Primary navigation",children:r.jsx(ze,{})})}),r.jsxs("main",{ref:H,className:"nhsfdp-pane content"+(K?" is-active-pane":""),"aria-live":"polite",role:"gridcell",tabIndex:0,onFocus:$e=>{$e.target===H.current&&le(!0)},onBlur:$e=>{$e.target===H.current&&le(!1)},children:[ae,r.jsx("div",{role:"main",children:l(S,O)})]}),(()=>{const $e=d?d(S,$,O,ye=>J(ye)):$&&$.length>0?r.jsx("ul",{className:"nhsfdp-secondary-nav",role:"listbox","aria-label":"Sections",children:$.map(ye=>{const be=L===ye.id;return r.jsx("li",{role:"option","aria-selected":be,children:r.jsx("button",{type:"button",className:"nhsfdp-secondary-nav__item"+(be?" is-current":""),"data-sec-item":!0,onClick:()=>J(ye.id),children:ye.label})},String(ye.id))})}):void 0,G=c?.(S,O);return ce.showSecondaryNav&&($e||G)?r.jsx("aside",{ref:Q,className:"nhsfdp-pane secondary-nav"+(pe?" is-active-pane":""),"aria-label":"Secondary navigation",role:"gridcell",tabIndex:0,onFocus:ye=>{ye.target===Q.current&&ge(!0)},onBlur:ye=>{ye.target===Q.current&&ge(!1)},children:r.jsxs("section",{role:"complementary","aria-label":"Secondary navigation",children:[$e,G]})}):null})()]})});return R?B==="mobile"||!p&&B==="tablet"||(E.panes??1)===1?r.jsx("div",{className:"nhsfdp-workflow "+(f??""),children:Ve()}):r.jsx("div",{className:"nhsfdp-workflow "+(f??""),children:ot(E)}):r.jsx("div",{className:"nhsfdp-workflow "+(f??""),children:r.jsx("div",{className:"nhsfdp-workflow-body",children:r.jsxs("main",{className:"nhsfdp-pane content",children:[u?u({steps:t,current:S,onNavigate:ee}):null,S?l(S,S?.sections?.find(ce=>ce.id===(C?.(S)??S?.sections?.[0]?.id))):null]})})})}const sx=typeof window<"u"&&window.document?X.useLayoutEffect:X.useEffect,Dc=(e,t,n,a)=>e==null||Number.isNaN(e)?a:Math.min(n,Math.max(t,e)),ix=({item:e,maxLines:t,enableDrilldown:n,onExpand:a,isActive:o,topLaneIndex:s})=>{const{ariaLabel:i}=e,l=`${e._pxLeft}px`,c=`${e._pxWidth}px`,d=`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${s})`,u=Math.floor(e._startFraction)+2,f=Math.max(1,Math.round(e._spanColumns)),h=n&&e.childItems&&e.childItems.length>0,p=m=>{h&&(m.preventDefault(),a?.(e))},y=h?{role:"button",tabIndex:0,"aria-haspopup":"dialog","aria-expanded":o||!1,onClick:p,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&p(m),m.key==="Escape"&&o&&p(m)}}:{};return r.jsxs("div",{className:Ce("nhsuk-product-roadmap__item",h&&"nhsuk-product-roadmap__item--expandable",o&&"nhsuk-product-roadmap__item--active"),style:{left:l,width:c,top:d,"--item-height":t},role:"gridcell","aria-label":i,"aria-colindex":u,"aria-colspan":f,...y,children:[r.jsx("div",{className:"nhsuk-product-roadmap__item-bg","aria-hidden":"true"}),r.jsxs("div",{className:"nhsuk-product-roadmap__item-content",children:[r.jsx("span",{className:"nhsuk-product-roadmap__item-title",children:e.title}),h&&r.jsx("span",{className:Ce("nhsuk-product-roadmap__item-expander",o&&"nhsuk-product-roadmap__item-expander--open"),"aria-hidden":"true"})]})]})},Tc=k.memo(({dateHeadings:e,categories:t,columnWidthPx:n=400,itemMaxLines:a=2,className:o,ariaLabel:s="Product roadmap",enableDrilldown:i=!1,onToggleItem:l,drilldownMode:c="overlay",...d})=>{const[u,f]=k.useState(()=>new Set),[h,p]=k.useState(()=>new Set),y=k.useRef(new Set),m=k.useCallback(D=>u.has(D),[u]),g=k.useCallback(D=>{f(F=>{const T=new Set(F);return T.has(D.id)?(T.delete(D.id),p(L=>{const $=new Set(L);return $.add(D.id),$}),setTimeout(()=>p(L=>{const $=new Set(L);return $.delete(D.id),$}),240),l?.(D.id,!1)):(T.add(D.id),l?.(D.id,!0)),T})},[l]);sx(()=>{if(c!=="inline"||!i||typeof document>"u")return;const D=[];if(u.forEach($=>{y.current.has($)||D.push($)}),y.current=new Set(u),!D.length)return;const F=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1,T=D.map($=>`.nhsuk-product-roadmap__inline-children[data-parent="${$}"] .nhsuk-product-roadmap__inline-child`).join(","),L=Array.from(document.querySelectorAll(T));L.length&&L.forEach(($,O)=>{const J=F?0:O*50;setTimeout(()=>{$.style.transition=F?"none":"opacity 0.32s ease-out, transform 0.32s ease-out",$.style.opacity="1",$.style.transform="translateY(0)"},J)})},[u,c,i]);const C=k.useCallback(()=>{u.size&&f(new Set)},[u]),j=Ce("nhsuk-product-roadmap",o),M=Dc(n,120,1200,400),N=Dc(a,1,6,2),w=k.useMemo(()=>e.map(D=>new Date(D+" 01")),[e]),_=k.useMemo(()=>{if(w.length===0){const T=new Date;return[T,T]}const D=new Date(w[0]),F=Jn.offset(new Date(w[w.length-1]),1);return[D,F]},[w]),I=k.useMemo(()=>Go().domain(_).range([0,w.length*M]),[_,w.length,M]),v=k.useCallback(D=>{if(D.startDate){const ee=new Date(D.startDate),ae=new Date(D.endDate??D.startDate);ae<ee&&ae.setTime(ee.getTime());const R=I(ee),B=Jn.offset(new Date(ae),1);let E=I(B);Number.isFinite(E)||(E=R+M);const Y=Math.max(M*.25,E-R),P=R/M,W=Y/M;return{...D,_pxLeft:R,_pxWidth:Y,_startFraction:P,_spanColumns:W}}const F=D.date??1,T=D.dateOffset??0,L=D.length??1,$=D.partialLength??1,O=F-1+T,J=L-1+$;return{...D,_pxLeft:O*M,_pxWidth:J*M,_startFraction:O,_spanColumns:J}},[I,M]),x=k.useMemo(()=>t.map(D=>{const T=D.roadmapItems.map($=>{const O=!$.childItems&&$.children?{...$,childItems:$.children}:{...$};return v(O)}).sort(($,O)=>$._pxLeft!==O._pxLeft?$._pxLeft-O._pxLeft:O._pxWidth-$._pxWidth),L=[];return T.forEach($=>{const O=$._pxLeft,J=$._pxLeft+$._pxWidth;let ee=L.findIndex(ae=>ae<=O);ee===-1&&(ee=L.length,L.push(0)),L[ee]=J,$.verticalPosition=ee+1}),{...D,roadmapItems:T,_laneCount:L.length}}),[t,v]),S=k.useMemo(()=>x.map(D=>D._laneCount||1),[x]),A=k.useMemo(()=>`var(--category-width) ${e.map(()=>"var(--column-width)").join(" ")}`,[e]);return r.jsxs("div",{className:j,style:{"--column-width":`${M}px`,gridTemplateColumns:A},role:"grid","aria-label":s,"aria-colcount":e.length+1,"aria-rowcount":x.length+1,...d,children:[r.jsxs("div",{className:"nhsuk-product-roadmap__header-row",role:"row","aria-rowindex":1,children:[r.jsx("div",{className:"nhsuk-product-roadmap__header-cell",role:"columnheader","aria-colindex":1,children:r.jsx("span",{className:"nhsuk-visually-hidden",children:"Category"})}),e.map((D,F)=>r.jsx("div",{className:"nhsuk-product-roadmap__date-heading",role:"columnheader","aria-colindex":F+2,children:D},`${D}-${F}`))]}),x.map((D,F)=>{const T=F+2,L=S[F];let $,O=0,J=[];i&&c==="inline"&&(J=D.roadmapItems.filter(B=>m(B.id)&&B.childItems&&B.childItems.length).map(B=>({id:B.id,lane:B.verticalPosition||1,count:B.childItems.length})).sort((B,E)=>B.lane-E.lane),O=J.reduce((B,E)=>B+E.count,0));const ee=L+O;$=`calc((${ee} * var(--roadmap-item-block-height)) + (max(0, ${ee} - 1) * var(--roadmap-row-gap)))`;const ae={};let R=0;return J.forEach(B=>{R+=B.count,ae[B.lane+1]=R}),r.jsxs("div",{className:"nhsuk-product-roadmap__row",role:"row","aria-rowindex":T,children:[r.jsx("div",{className:"nhsuk-product-roadmap__category-cell",role:"rowheader","aria-colindex":1,children:D.heading}),r.jsx("div",{className:"nhsuk-product-roadmap__items-row",style:{gridColumn:`2 / span ${e.length}`,height:$},children:r.jsx("div",{className:"nhsuk-product-roadmap__items-layer",children:D.roadmapItems.map((B,E)=>{const Y=(B.verticalPosition||1)-1,P=J.filter(q=>q.lane-1<Y).reduce((q,te)=>q+te.count,0),W=Y+P,H=m(B.id),Q=h.has(B.id);return r.jsxs(k.Fragment,{children:[r.jsx(ix,{item:B,maxLines:N,enableDrilldown:i,onExpand:g,isActive:H,topLaneIndex:W,laneOffset:P}),i&&c==="inline"&&(H||Q)&&B.childItems&&r.jsx("div",{"data-parent":B.id,className:"nhsuk-product-roadmap__inline-children","aria-label":`${B.title} child tasks`,children:B.childItems.map((q,te)=>{const fe="calc(var(--roadmap-item-block-height) * 0.75)";let Z=B._pxLeft,se=B._pxWidth;if(q.startDate){const me=new Date(q.startDate);let De=q.endDate?new Date(q.endDate):new Date(me);De<me&&(De=new Date(me));const Ge=new Date(De);Ge.setDate(Ge.getDate()+1);const Le=I(me);let Ae=I(Ge);(!Number.isFinite(Ae)||Ae<=Le)&&(Ae=Le+6),Z=Le,se=Math.max(6,Ae-Le)}const ve=W+1+te;return r.jsxs("div",{className:Ce("nhsuk-product-roadmap__inline-child",q.status&&`nhsuk-product-roadmap__inline-child--status-${q.status}`,!H&&Q&&"nhsuk-product-roadmap__inline-child--collapsing"),style:{left:`${Z}px`,width:`${se}px`,top:`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${ve})`,height:fe,opacity:H?0:void 0,transform:H?"translateY(-6px)":void 0},children:[r.jsx("div",{className:"nhsuk-product-roadmap__inline-child-bg"}),r.jsx("div",{className:"nhsuk-product-roadmap__inline-child-content",children:q.title})]},q.id??te)})})]},B.id??E)})})})]},`${D.heading}-${F}`)}),i&&c==="overlay"&&u.size===1&&(()=>{const D=Array.from(u)[0],F=t.flatMap(T=>T.roadmapItems).find(T=>T.id===D);return!F||!F.childItems?null:r.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-overlay",role:"dialog","aria-modal":"true","aria-label":`${F.title} details`,children:[r.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-panel",children:[r.jsxs("header",{className:"nhsuk-product-roadmap__drilldown-header",children:[r.jsx("h3",{className:"nhsuk-product-roadmap__drilldown-title",children:F.title}),r.jsx("button",{type:"button",className:"nhsuk-product-roadmap__drilldown-close",onClick:C,"aria-label":"Close details",children:"Ã—"})]}),r.jsx("div",{className:"nhsuk-product-roadmap__drilldown-content",children:F.content}),r.jsx("ul",{className:"nhsuk-product-roadmap__drilldown-children",children:F.childItems.map((T,L)=>r.jsxs("li",{className:"nhsuk-product-roadmap__drilldown-child",children:[r.jsx("strong",{className:"nhsuk-product-roadmap__drilldown-child-title",children:T.title}),T.content&&r.jsx("div",{className:"nhsuk-product-roadmap__drilldown-child-content",children:T.content})]},T.id??L))})]}),r.jsx("div",{className:"nhsuk-product-roadmap__drilldown-backdrop",onClick:C,"aria-hidden":"true"})]})})()]})});Tc.displayName="ProductRoadmap";function gt(e){return function(){return e}}const cs=Math.PI,ds=2*cs,pn=1e-6,lx=ds-pn;function Lc(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function cx(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Lc;const n=10**t;return function(a){this._+=a[0];for(let o=1,s=a.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+a[o]}}class dx{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Lc:cx(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,o){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+o}`}bezierCurveTo(t,n,a,o,s,i){this._append`C${+t},${+n},${+a},${+o},${this._x1=+s},${this._y1=+i}`}arcTo(t,n,a,o,s){if(t=+t,n=+n,a=+a,o=+o,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,l=this._y1,c=a-t,d=o-n,u=i-t,f=l-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>pn)if(!(Math.abs(f*c-d*u)>pn)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let p=a-i,y=o-l,m=c*c+d*d,g=p*p+y*y,C=Math.sqrt(m),j=Math.sqrt(h),M=s*Math.tan((cs-Math.acos((m+h-g)/(2*C*j)))/2),N=M/j,w=M/C;Math.abs(N-1)>pn&&this._append`L${t+N*u},${n+N*f}`,this._append`A${s},${s},0,0,${+(f*p>u*y)},${this._x1=t+w*c},${this._y1=n+w*d}`}}arc(t,n,a,o,s,i){if(t=+t,n=+n,a=+a,i=!!i,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(o),c=a*Math.sin(o),d=t+l,u=n+c,f=1^i,h=i?o-s:s-o;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>pn||Math.abs(this._y1-u)>pn)&&this._append`L${d},${u}`,a&&(h<0&&(h=h%ds+ds),h>lx?this._append`A${a},${a},0,1,${f},${t-l},${n-c}A${a},${a},0,1,${f},${this._x1=d},${this._y1=u}`:h>pn&&this._append`A${a},${a},0,${+(h>=cs)},${f},${this._x1=t+a*Math.cos(s)},${this._y1=n+a*Math.sin(s)}`)}rect(t,n,a,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+o}h${-a}Z`}toString(){return this._}}function Ac(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new dx(t)}function Ec(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $c(e){this._context=e}$c.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Fc(e){return new $c(e)}function Pc(e){return e[0]}function Bc(e){return e[1]}function Hc(e,t){var n=gt(!0),a=null,o=Fc,s=null,i=Ac(l);e=typeof e=="function"?e:e===void 0?Pc:gt(e),t=typeof t=="function"?t:t===void 0?Bc:gt(t);function l(c){var d,u=(c=Ec(c)).length,f,h=!1,p;for(a==null&&(s=o(p=i())),d=0;d<=u;++d)!(d<u&&n(f=c[d],d,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,d,c),+t(f,d,c));if(p)return s=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:gt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:gt(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:gt(!!c),l):n},l.curve=function(c){return arguments.length?(o=c,a!=null&&(s=o(a)),l):o},l.context=function(c){return arguments.length?(c==null?a=s=null:s=o(a=c),l):a},l}function us(e,t,n){var a=null,o=gt(!0),s=null,i=Fc,l=null,c=Ac(d);e=typeof e=="function"?e:e===void 0?Pc:gt(+e),t=typeof t=="function"?t:gt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Bc:gt(+n);function d(f){var h,p,y,m=(f=Ec(f)).length,g,C=!1,j,M=new Array(m),N=new Array(m);for(s==null&&(l=i(j=c())),h=0;h<=m;++h){if(!(h<m&&o(g=f[h],h,f))===C)if(C=!C)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=h-1;y>=p;--y)l.point(M[y],N[y]);l.lineEnd(),l.areaEnd()}C&&(M[h]=+e(g,h,f),N[h]=+t(g,h,f),l.point(a?+a(g,h,f):M[h],n?+n(g,h,f):N[h]))}if(j)return l=null,j+""||null}function u(){return Hc().defined(o).curve(i).context(s)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:gt(+f),a=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:gt(+f),d):e},d.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:gt(+f),d):a},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:gt(+f),n=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:gt(+f),d):t},d.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:gt(+f),d):n},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(n)},d.lineX1=function(){return u().x(a).y(t)},d.defined=function(f){return arguments.length?(o=typeof f=="function"?f:gt(!!f),d):o},d.curve=function(f){return arguments.length?(i=f,s!=null&&(l=i(s)),d):i},d.context=function(f){return arguments.length?(f==null?s=l=null:l=i(s=f),d):s},d}function zc(e){return e<0?-1:1}function Rc(e,t,n){var a=e._x1-e._x0,o=t-e._x1,s=(e._y1-e._y0)/(a||o<0&&-0),i=(n-e._y1)/(o||a<0&&-0),l=(s*o+i*a)/(a+o);return(zc(s)+zc(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(l))||0}function Oc(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function fs(e,t,n){var a=e._x0,o=e._y0,s=e._x1,i=e._y1,l=(s-a)/3;e._context.bezierCurveTo(a+l,o+l*t,s-l,i-l*n,s,i)}function Na(e){this._context=e}Na.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fs(this,this._t0,Oc(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,fs(this,Oc(this,n=Rc(this,e,t)),n);break;default:fs(this,this._t0,n=Rc(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},Object.create(Na.prototype).point=function(e,t){Na.prototype.point.call(this,t,e)};function ja(e){return new Na(e)}function ux(e,t,n){const a=el(e,t);return Go().domain(a).range(n)}function Uc(e,t,n){const[a,o]=el(e,t);if(!(Number.isFinite(a)&&Number.isFinite(o)))return ca().domain([0,0]).range(n);let i;if(a<=0)i=Math.min(0,a);else{const c=o-a,d=(c>0?c:a)*.1;i=Math.max(0,a-d),i===a&&(i=Math.max(0,a*.9))}const l=o??0;return ca().domain([i,l]).nice().range(n)}function hs(e,t,n,a){const o=Hc().x(t).y(n);return a?.smooth!==!1&&o.curve(ja),o(e)??""}function fx(e={}){const t=X.useRef(null),n=X.useMemo(()=>({top:e.top??16,right:e.right??16,bottom:e.bottom??32,left:e.left??48}),[e.bottom,e.left,e.right,e.top]),[a,o]=X.useState({width:0,height:0});X.useLayoutEffect(()=>{if(!t.current)return;const l=new ResizeObserver(c=>{for(const d of c){const{width:u,height:f}=d.contentRect;o({width:u,height:f})}});return l.observe(t.current),()=>l.disconnect()},[]);const s=Math.max(0,a.width-n.left-n.right),i=Math.max(0,a.height-n.top-n.bottom);return{width:a.width,height:a.height,innerWidth:s,innerHeight:i,margin:n,ref:t}}const Wc=X.createContext(null);function rn(){return X.useContext(Wc)}const Gc=({height:e=240,margin:t,width:n,className:a="fdp-chart",children:o,role:s="group",ariaLabel:i})=>{const l=fx(t),c={height:e,position:"relative"};return n!==void 0&&(c.width=typeof n=="number"?`${n}px`:n),r.jsx("div",{ref:l.ref,className:a,style:c,role:s,"aria-label":i,children:r.jsx(Wc.Provider,{value:l,children:o})})},ps=X.createContext(null),mn=()=>X.useContext(ps),Vc=({series:e,innerWidth:t,innerHeight:n,parseX:a,children:o,xTickCount:s=6,yTickCount:i=5,yDomain:l,xPadding:c,yPadding:d,yBottomGapPx:u})=>{const f=rn(),h=t??f?.innerWidth??0,p=n??f?.innerHeight??0,y=X.useMemo(()=>e.flatMap(w=>w.data),[e]),m=X.useCallback(w=>{if(a)return a(w);const _=w.x;return _ instanceof Date?_:new Date(_)},[a]),g=c??6,C=d??6,j=X.useMemo(()=>ux(y,m,[g,Math.max(0,h-g)]),[y,m,h,g]),M=X.useMemo(()=>{const w=Math.max(0,u??0),_=Math.max(0,p-(C+w));if(l){const I=Uc([],v=>v.y,[_,C]);return I.domain(l),I}return Uc(y,I=>I.y,[_,C])},[y,p,l,C,u]),N=X.useMemo(()=>({xScale:j,yScale:M,getXTicks:(w=s)=>j.ticks(w),getYTicks:(w=i)=>M.ticks(w)}),[j,M,s,i]);return r.jsx(ps.Provider,{value:N,children:o})},ar=16,or=6,Yc=16,Zc=4,qc=6,Jc=3,Xc=void 0,ms=({type:e,scale:t,tickCount:n,tickValues:a,formatTick:o,label:s,offset:i,className:l,minLabelSpacing:c,maxTickLabelLength:d,autoMinLabelSpacing:u=e==="x",labelAngle:f=0,allowLabelWrap:h=!0,tickFormatPreset:p,yZeroBreak:y})=>{const m=mn(),g=rn(),C=t||(e==="x"?m?.xScale:m?.yScale),j=n??(e==="x"?6:5),M=typeof o=="function",N=X.useMemo(()=>{if(M||!p)return;const I=v=>new Intl.DateTimeFormat(void 0,v);switch(p){case"dayShortMonth":return v=>{const x=v instanceof Date?v:new Date(v);return`${x.getDate()}
${I({month:"short"}).format(x)}`};case"dayShortMonthYear":return v=>{const x=v instanceof Date?v:new Date(v);return`${x.getDate()}
${I({month:"short"}).format(x)} ${x.getFullYear()}`};case"shortMonth":return v=>{const x=v instanceof Date?v:new Date(v);return I({month:"short"}).format(x)};case"shortMonthYear":return v=>{const x=v instanceof Date?v:new Date(v);return`${I({month:"short"}).format(x)} ${x.getFullYear()}`};case"hourMinute":return v=>{const x=v instanceof Date?v:new Date(v);return I({hour:"2-digit",minute:"2-digit"}).format(x)};default:return}},[M,p]);let w=M?o:N||(I=>String(I));const _=X.useMemo(()=>a&&Array.isArray(a)?a:C?typeof C.ticks=="function"?C.ticks(j):C.domain?C.domain():[]:[],[C,j,a]);if(e==="x"&&!M&&!p&&_.length&&_.every(I=>I instanceof Date)){const I=_[0],v=_[_.length-1],x=v.getTime()-I.getTime(),S=24*3600*1e3,A=365*S,D=I.getFullYear()===v.getFullYear(),F=new Intl.DateTimeFormat(void 0,{month:"short"});if(x<2*S){const T=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"});w=L=>T.format(L)}else if(x<32*S)w=T=>{const L=T;return`${L.getDate()} ${F.format(L)}`};else if(x<A&&D)w=T=>F.format(T);else if(x<2*A){const T=new Set;w=L=>{const $=L,O=$.getMonth();return T.has(O)||T.add(O),`${F.format($)} ${$.getFullYear()}`}}else w=T=>String(T.getFullYear())}if(!C||!g)return null;if(e==="x"){const I=i??g.innerHeight,v=typeof C.bandwidth=="function",x=v?C.bandwidth():0,S=F=>{const T=C(F);return v?T+x/2:T};let A=c??0;if(u&&c==null){const F=_.map(L=>w(L).replace(/\n.*/g,"")),T=F.length?F.reduce((L,$)=>L+$.length,0)/F.length:0;A=Math.max(12,Math.round(T*6+4))}const D=X.useMemo(()=>{if(a&&Array.isArray(a)||A<=0)return _;const F=[];let T=-1/0;for(const L of _){const $=S(L);$-T>=A&&(F.push(L),T=$)}return F},[_,C,A,a,v,x]);return r.jsxs("g",{className:["fdp-axis","fdp-axis--x",l].filter(Boolean).join(" "),transform:`translate(0,${I})`,fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[r.jsx("line",{x1:0,x2:g.innerWidth,y1:0,y2:0,stroke:"currentColor"}),D.map((F,T)=>{const L=w(F),$=d&&L.length>d?L.slice(0,Math.max(1,d-1))+"â€¦":L,O=h?$.split(/\n/):[$.replace(/\n/g," ")],J=f<0?"end":f>0?"start":"middle";return r.jsxs("g",{transform:`translate(${S(F)},0)`,children:[r.jsx("line",{y2:6,stroke:"currentColor"}),r.jsxs("text",{y:9,textAnchor:J,className:"fdp-axis__tick",dominantBaseline:"hanging",transform:f?`rotate(${f})`:void 0,fontFamily:"inherit",children:[O.map((ee,ae)=>r.jsx("tspan",{x:0,dy:ae===0?0:"1.1em",children:ee},ae)),$!==L&&r.jsx("title",{children:L})]})]},F?.toString?.()||T)})]})}return r.jsxs("g",{className:["fdp-axis","fdp-axis--y",l].filter(Boolean).join(" "),fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[(()=>{const I=!!y?.enabled,v=Math.max(or,y?.gapPx??ar);if(!I)return r.jsx("line",{x1:0,x2:0,y1:0,y2:g.innerHeight,stroke:"currentColor"});const x=Math.max(0,g.innerHeight-v);return r.jsx("line",{x1:0,x2:0,y1:0,y2:x,stroke:"currentColor"})})(),_.map((I,v)=>{const x=w(I),S=d&&x.length>d?x.slice(0,Math.max(1,d-1))+"â€¦":x,A=h?S.split(/\n/):[S.replace(/\n/g," ")];if(!!y?.enabled){const F=Math.max(or,y?.gapPx??ar),T=Math.max(0,g.innerHeight-F);if(C(I)>T-1)return null}return r.jsxs("g",{transform:`translate(0,${C(I)})`,children:[r.jsx("line",{x2:-6,stroke:"currentColor"}),r.jsxs("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:[A.map((F,T)=>r.jsx("tspan",{x:-9,dy:T===0?0:"1.1em",children:F},T)),S!==x&&r.jsx("title",{children:x})]})]},I?.toString?.()||v)}),!!y?.enabled&&(()=>{const I=Math.max(or,y?.gapPx??ar),v=g.innerHeight,S=Math.max(0,v-I),A=S,F=Math.max(4,v-A),T=Zc,L=qc,$=Math.max(1,Math.round(y?.zigZag?.amplitudePx??T)),O=Math.max(1,Math.round(y?.zigZag?.stepXPx??Jc)),J=y?.zigZag?.heightPx??Xc,ee=Math.max(4,Math.round(J??0));let ae,R;if(y?.zigZag?.heightPx&&y.zigZag.heightPx>0){const Q=Math.max(4,Math.min(F-2,ee));ae=Math.max(1,Math.floor(Q/(2*$))),R=Math.max(0,Math.min(Q,ae*2*$))}else typeof y?.zigZag?.cycles=="number"&&y?.zigZag?.cycles>0?(ae=Math.max(1,Math.round(y.zigZag.cycles)),R=ae*2*$,R=Math.min(R,F-2),ae=Math.max(1,Math.floor(R/(2*$)))):(ae=L,R=Math.min(F-2,ae*2*$),ae=Math.max(1,Math.floor(R/(2*$))));const B=A+(F-R)/2,E=B+R;let Y="M0,0";const P=R>0?Math.max(0,Math.floor((R-$)/(2*$))):0,W=Math.max(0,(R-P*2*$)/2),H=$>0?O*(W/$):0;W>0&&(Y+=` l${H},${W}`);for(let Q=0;Q<P;Q++)Y+=` l-${O},${$} l${O},${$}`;return W>0&&(Y+=` l-${H},${W}`),r.jsxs("g",{children:[r.jsx("line",{x1:0,x2:0,y1:S,y2:B,stroke:"currentColor"}),r.jsx("g",{transform:`translate(0,${B})`,"aria-hidden":"true",children:r.jsx("path",{d:Y,stroke:"currentColor",fill:"none"})}),r.jsx("line",{x1:0,x2:0,y1:E,y2:v,stroke:"currentColor"}),r.jsx("g",{transform:`translate(0,${v})`,children:r.jsx("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:"0"})})]})})(),s&&r.jsx("text",{transform:"rotate(-90)",x:-g.innerHeight/2,y:-g.margin.left+12,textAnchor:"middle",className:"fdp-axis__label",fontFamily:"inherit",children:s})]})},Kc=({axis:e="y",tickCount:t,stroke:n="var(--fdp-chart-grid,#e5e5e5)",dasharray:a="2 4",className:o})=>{const s=mn(),i=rn();if(!s||!i)return null;const l=e==="y"?s.getYTicks(t):s.getXTicks(t);return r.jsxs("g",{className:["fdp-grid",o].filter(Boolean).join(" "),children:[e==="y"&&l.map((c,d)=>r.jsx("line",{x1:0,x2:i.innerWidth,y1:s.yScale(c),y2:s.yScale(c),stroke:n,strokeDasharray:a},d)),e==="x"&&l.map((c,d)=>r.jsx("line",{y1:0,y2:i.innerHeight,x1:s.xScale(c),x2:s.xScale(c),stroke:n,strokeDasharray:a},d))]})},sr={color:{"data-viz":{$type:"color",categorical:{1:{$value:"{color.primary.blue}",$description:"Series 1 â€“ NHS Blue (brand core)"},2:{$value:"#41B6E6",$description:"Series 2 â€“ NHS Light Blue (new)"},3:{$value:"{color.secondary.aqua-green}",$description:"Series 3 â€“ NHS Aqua Green (existing)"},4:{$value:"#78BE20",$description:"Series 4 â€“ NHS Light Green (new)"},5:{$value:"{color.primary.green}",$description:"Series 5 â€“ NHS Green (existing)"},6:{$value:"{color.secondary.warm-yellow}",$description:"Series 6 â€“ NHS Warm Yellow (existing; distinct from focus yellow)"},7:{$value:"#ED4F00",$description:"Series 7 â€“ NHS Tangerine (new; warmer/deeper than existing orange)"},8:{$value:"{color.secondary.pink}",$description:"Series 8 â€“ NHS Pink (existing)"},9:{$value:"#E317AA",$description:"Series 9 â€“ NHS Bright Pink (new vivid accent)"},10:{$value:"#880FB8",$description:"Series 10 â€“ NHS Light Purple (new mid purple)"},11:{$value:"{color.primary.purple}",$description:"Series 11 â€“ NHS Purple (existing dark purple)"},12:{$value:"#9A6324",$description:"Series 12 â€“ NHS Brown (new; earth neutral)"}},neutral:{comparison:{$value:"{color.grey.1}",$description:"Neutral comparison series (optional)"}},region:{$comment:"Fixed colours for NHS geographical regions; prefer stable mapping for maps. London colour updated (#78BE21 â€“ light green).","north-east":{$value:"{color.primary.blue}",$description:"North East â€“ NHS Blue"},"north-west":{$value:"#41B6E6",$description:"North West â€“ NHS Light Blue"},"east-of-england":{$value:"{color.primary.purple}",$description:"East of England â€“ NHS Purple"},midlands:{$value:"{color.secondary.pink}",$description:"Midlands â€“ NHS Pink"},london:{$value:"#78BE21",$description:"London â€“ NHS Light Green (new)"},"south-west":{$value:"#FAE100",$description:"South West â€“ NHS Yellow variant (new)"},"south-east":{$value:"#ed8b00",$description:"South East â€“ NHS Orange (existing base orange)"}},severity:{$comment:"Semantic severity / alert colours (light background ramp â†’ critical).",low:{$value:"{color.secondary.pale-yellow}",$description:"Low severity â€“ pale yellow background"},moderate:{$value:"{color.secondary.warm-yellow}",$description:"Moderate severity â€“ warm yellow"},high:{$value:"{color.secondary.orange}",$description:"High severity â€“ orange"},critical:{$value:"{color.primary.red}",$description:"Critical severity â€“ red"}},"org-level":{$comment:"Organisational level semantic colours (stable NHS brand mappings).",trust:{$value:"{color.primary.blue}",$description:"Trust â€“ NHS Blue"},ambulance:{$value:"{color.primary.green}",$description:"Ambulance â€“ NHS Green"},icb:{$value:"{color.primary.dark-pink}",$description:"ICB â€“ NHS Dark Pink"},region:{$value:"{color.primary.purple}",$description:"Region â€“ NHS Purple"}},stroke:{$comment:"Automatic contrast stroke colours for overlays / borders. Light fills get dark stroke; dark fills get white stroke.",categorical:{1:{$value:"#ffffff",$description:"Stroke for series 1 (blue)"},2:{$value:"#212b32",$description:"Stroke for series 2 (light blue)"},3:{$value:"#212b32",$description:"Stroke for series 3 (aqua green)"},4:{$value:"#212b32",$description:"Stroke for series 4 (light green)"},5:{$value:"#ffffff",$description:"Stroke for series 5 (green)"},6:{$value:"#212b32",$description:"Stroke for series 6 (warm yellow)"},7:{$value:"#ffffff",$description:"Stroke for series 7 (tangerine)"},8:{$value:"#ffffff",$description:"Stroke for series 8 (pink)"},9:{$value:"#ffffff",$description:"Stroke for series 9 (bright pink)"},10:{$value:"#ffffff",$description:"Stroke for series 10 (light purple)"},11:{$value:"#ffffff",$description:"Stroke for series 11 (purple)"},12:{$value:"#ffffff",$description:"Stroke for series 12 (brown)"}},region:{$comment:"Region stroke colours derived from fill colours: dark fills lightened ~35%; light fills darkened ~25% for consistent contrast without defaulting to pure white/black.","north-east":{$value:"#5996D1",$description:"Stroke for North East (blue lightened 35%)"},"north-west":{$value:"#3189AD",$description:"Stroke for North West (light blue darkened 25%)"},"east-of-england":{$value:"#7A59A3",$description:"Stroke for East of England (purple lightened 35%)"},midlands:{$value:"#CA71A4",$description:"Stroke for Midlands (pink lightened 35%)"},london:{$value:"#5A8F19",$description:"Stroke for London (light green darkened 25%)"},"south-west":{$value:"#BCA900",$description:"Stroke for South West (yellow darkened 25%)"},"south-east":{$value:"#B26800",$description:"Stroke for South East (orange darkened 25%)"}},severity:{$comment:"Contrast strokes for severity colours (light backgrounds use dark stroke; dark backgrounds use white).",low:{$value:"#212b32",$description:"Stroke for low severity (pale yellow fill)"},moderate:{$value:"#212b32",$description:"Stroke for moderate severity (warm yellow fill)"},high:{$value:"#212b32",$description:"Stroke for high severity (orange fill)"},critical:{$value:"#ffffff",$description:"Stroke for critical severity (red fill)"}},"org-level":{$comment:"Contrast strokes for organisational level colours (all dark brand fills so white stroke for consistency).",trust:{$value:"#ffffff",$description:"Stroke for trust (blue fill)"},ambulance:{$value:"#ffffff",$description:"Stroke for ambulance (green fill)"},icb:{$value:"#ffffff",$description:"Stroke for ICB (dark pink fill)"},region:{$value:"#ffffff",$description:"Stroke for region (purple fill)"}}},spc:{$comment:"SPC (Statistical Process Control) semantic variation colours aligned to SPCChart.scss and SPCIcons.",improvement:{$value:"#00B0F0",$description:"SPC special cause improvement (favourable)"},concern:{$value:"#E46C0A",$description:"SPC special cause concern (deteriorating)"},"no-judgement":{$value:"#490092",$description:"SPC special cause (no directional judgement)"},"common-cause":{$value:"#A6A6A6",$description:"SPC common cause (baseline variation)"},"assurance-pass":{$value:"#00823B",$description:"SPC assurance pass indicator (process capable)"},"assurance-fail":{$value:"#DA291C",$description:"SPC assurance fail indicator (process not capable)"},gradient:{$comment:"Opacity stops for SPC icon gradient wash (applied top-left -> bottom-right). Consumers build gradients using these opacities + base colour.",stop:{"start-opacity":{$value:"0.18",$description:"Start stop opacity (0%) for classic variant wash"},"mid-opacity":{$value:"0.06",$description:"Mid stop opacity (~65-75%)"},"end-opacity":{$value:"0",$description:"End stop opacity (100%)"},"triangle-start-opacity":{$value:"0.18",$description:"Start opacity for triangle variants (kept aligned)"},"triangle-mid-opacity":{$value:"0.06",$description:"Mid opacity for triangle variants"},"triangle-end-opacity":{$value:"0",$description:"End opacity for triangle variants"}}},stroke:{$comment:"Contrast stroke colours for SPC variation fills.",improvement:{$value:"#000000",$description:"Stroke for improvement points"},concern:{$value:"#000000",$description:"Stroke for concern points"},"no-judgement":{$value:"#000000",$description:"Stroke for no-judgement points"},"common-cause":{$value:"#ffffff",$description:"Stroke for common cause points"},"assurance-pass":{$value:"#000000",$description:"Stroke for assurance pass points"},"assurance-fail":{$value:"#000000",$description:"Stroke for assurance fail points"}}}}}},Ma={color:{primary:{$type:"color",blue:{$value:"#005eb8",$description:"NHS Blue - Primary brand color"},"blue-active":{$value:"#002f5c",$description:"NHS Active Blue (50% shade) â€“ alias of button/login active; promoted for general reuse"},white:{$value:"#ffffff",$description:"NHS White"},black:{$value:"#212b32",$description:"NHS Black"},green:{$value:"#007f3b",$description:"NHS Green"},purple:{$value:"#330072",$description:"NHS Purple"},"dark-pink":{$value:"#7c2855",$description:"NHS Dark Pink"},red:{$value:"#d5281b",$description:"NHS Red"},"light-purple":{$value:"#880FB8",$description:"NHS Light Purple (data viz promoted)"},yellow:{$value:"#ffeb3b",$description:"NHS Yellow"}},secondary:{$type:"color","pale-yellow":{$value:"#fff9c4",$description:"NHS Pale Yellow"},"warm-yellow":{$value:"#ffb81c",$description:"NHS Warm Yellow"},"region-yellow":{$value:"#FAE100",$description:"NHS Region Yellow (maps)"},orange:{$value:"#ed8b00",$description:"NHS Orange"},tangerine:{$value:"#ED4F00",$description:"NHS Tangerine (data viz promoted)"},"aqua-green":{$value:"#00a499",$description:"NHS Aqua Green"},"light-blue":{$value:"#41B6E6",$description:"NHS Light Blue (data viz promoted)"},pink:{$value:"#ae2573",$description:"NHS Pink"},"bright-pink":{$value:"#E317AA",$description:"NHS Bright Pink (data viz promoted)"},"light-green":{$value:"#78BE20",$description:"NHS Light Green (data viz promoted)"},brown:{$value:"#9A6324",$description:"NHS Brown (data viz promoted neutral)"}},grey:{1:{$value:"#4c6272",$description:"NHS Grey 1 - Darkest grey"},2:{$value:"#768692",$description:"NHS Grey 2 - Darker grey"},3:{$value:"#aeb7bd",$description:"NHS Grey 3 - Medium grey"},4:{$value:"#d8dde0",$description:"NHS Grey 4 - Light grey"},5:{$value:"#f0f4f5",$description:"NHS Grey 5 - Lightest grey"},$type:"color"},accessibility:{$type:"color",$comment:"Accessibility-oriented color tokens. Includes CVD-safe pairs and Okabeâ€“Ito colors. Use these for positive/negative semantics and colour-blindâ€“friendly defaults.","okabe-ito":{green:{$value:"#009E73",$description:"Okabeâ€“Ito green (CVD-safe) â€“ recommended positive"},vermillion:{$value:"#D55E00",$description:"Okabeâ€“Ito vermillion / redâ€“orange (CVD-safe) â€“ recommended negative"}},"cvd-safe":{blue:{$value:"#1f77b4",$description:"CVD-safe blue (pairs with orange); widely used in Matplotlib/Tableau sets"},orange:{$value:"#ff7f0e",$description:"CVD-safe orange (pairs with blue)"}},positive:{$value:"{color.accessibility.okabe-ito.green}",$description:"Accessibility semantic alias â€“ positive"},negative:{$value:"{color.accessibility.okabe-ito.vermillion}",$description:"Accessibility semantic alias â€“ negative"}}}},hx=["#005eb8","#0072ce","#41b6e6","#00a499","#7c2855","#330072","#d5281b","#ffb81c","#fae100","#4c6272","#768692","#aeb7bd"];let gs=null,bs=null,ys=null,Qc="optimized";function px(){const e={color:{...Ma.color,...sr.color}},t=(a,o=new Set)=>{if(o.has(a))return;o.add(a);const s=a.split(".").reduce((l,c)=>l?l[c]:void 0,e);if(!s)return;const i=s.$value||s.value;if(typeof i=="string"&&/^\{.+\}$/.test(i))return t(i.slice(1,-1),o);if(typeof i=="string")return i},n=[];try{for(let a=1;a<=12;a++){const o=`color.data-viz.categorical.${a}`,s=t(o);if(!s)throw new Error(`Missing token ${o}`);n.push(s)}return n}catch{return hx}}function mx(){return gs||(gs=px()),gs}function gx(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.trim());return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function xs(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bx(e,t,n){const a=xs(e),o=xs(t),s=xs(n),i=a*.4124+o*.3576+s*.1805,l=a*.2126+o*.7152+s*.0722,c=a*.0193+o*.1192+s*.9505;return{x:i*100,y:l*100,z:c*100}}function yx(e,t,n){let i=e/95.047,l=t/100,c=n/108.883;const d=u=>u>.008856?Math.cbrt(u):7.787*u+16/116;return i=d(i),l=d(l),c=d(c),{L:116*l-16,a:500*(i-l),b:200*(l-c)}}function ed(e){const t=gx(e);if(!t)return null;const n=bx(t.r,t.g,t.b);return yx(n.x,n.y,n.z)}function td(e,t){const n=e.L-t.L,a=e.a-t.a,o=e.b-t.b;return Math.sqrt(n*n+a*a+o*o)}function xx(){const e=mx();if(e.length<=2)return e.slice();const t=e.map(i=>ed(i));let n=0,a=-1;for(let i=0;i<e.length;i++){const l=t[i];if(!l)continue;let c=0,d=0;for(let f=0;f<e.length;f++)i!==f&&t[f]&&(c+=td(l,t[f]),d++);const u=c/Math.max(1,d);u>a&&(a=u,n=i)}const o=new Set(e.map((i,l)=>l)),s=[];for(s.push(n),o.delete(n);o.size;){let i=Array.from(o)[0],l=-1;for(const c of o){const d=t[c];if(!d)continue;let u=1/0;for(const f of s){const h=t[f];if(h){const p=td(d,h);p<u&&(u=p)}}u>l&&(l=u,i=c)}s.push(i),o.delete(i)}return s.map(i=>e[i])}function vx(){return bs||(bs=xx()),bs}function wx(e,t,n){const a=(e+16)/116,o=t/500+a,s=a-n/200,i=u=>{const f=u*u*u;return f>.008856?f:(u-16/116)/7.787},l=i(o)*95.047,c=i(a)*100,d=i(s)*108.883;return{X:l,Y:c,Z:d}}function Sx(e,t,n){e/=100,t/=100,n/=100;let a=e*3.2406+t*-1.5372+n*-.4986,o=e*-.9689+t*1.8758+n*.0415,s=e*.0557+t*-.204+n*1.057;const i=l=>l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055;return a=Math.min(1,Math.max(0,i(a))),o=Math.min(1,Math.max(0,i(o))),s=Math.min(1,Math.max(0,i(s))),{r:Math.round(a*255),g:Math.round(o*255),b:Math.round(s*255)}}function _x(e,t,n){return`#${[e,t,n].map(a=>a.toString(16).padStart(2,"0")).join("")}`}function kx(e,t){const n=ed(e);if(!n)return e;const a=Math.min(100,Math.max(0,n.L+t)),{X:o,Y:s,Z:i}=wx(a,n.a,n.b),l=Sx(o,s,i);return _x(l.r,l.g,l.b)}function Cx(){const e=vx(),n=[12,-12,24,-24].map(o=>e.map(s=>kx(s,o))),a=[...e];return n.forEach(o=>a.push(...o)),a}function Nx(){return(!ys||jx())&&(ys=Cx(),nd=Qc),ys}let nd=null;function jx(){return nd!==Qc}function At(e){const t=Nx();return t[e%t.length]}let An=null,ir=null,lr=null,cr=null;function Mx(){const e=sr?.color?.["data-viz"]?.stroke;if(e){const t=e.categorical||{};An=[];for(let s=1;s<=12;s++){const i=t[String(s)]?.$value||t[String(s)]?.value;An.push(typeof i=="string"?i:"#212b32")}const n=e.region||{};ir={},Object.keys(n).forEach(s=>{const i=n[s]?.$value||n[s]?.value;typeof i=="string"&&(ir[s]=i)});const a=e.severity||{},o=e["org-level"]||{};cr={},Object.keys(o).forEach(s=>{const i=o[s]?.$value||o[s]?.value;typeof i=="string"&&(cr[s]=i)}),lr={},Object.keys(a).forEach(s=>{const i=a[s]?.$value||a[s]?.value;typeof i=="string"&&(lr[s]=i)})}}function Ia(){(!An||!ir||!lr||!cr)&&Mx()}function gn(e){return Ia(),An?An[e%An.length]:"#212b32"}function Ix(e){return Ia(),ir?ir[e]:void 0}function Da(e,t){return Ix(e)||gn(t)}const vs=["low","moderate","high","critical"];let ws=null;function Dx(){const e={color:{...Ma.color,...sr.color}},t=(a,o=new Set)=>{if(o.has(a))return;o.add(a);const s=a.split(".").reduce((l,c)=>l?l[c]:void 0,e);if(!s)return;const i=s.$value||s.value;return typeof i=="string"&&/^\{.+\}$/.test(i)?t(i.slice(1,-1),o):typeof i=="string"?i:void 0},n={};return vs.forEach(a=>{const o=t(`color.data-viz.severity.${a}`);o&&(n[a]=o)}),n}function rd(){return ws||(ws=Dx()),ws}function Tx(e){return rd()[e.toLowerCase()]}function Lx(e,t){return Tx(e)||rd()[vs[t%vs.length]]||At(t)}function Ax(e){return Ia(),lr?lr[e]:void 0}function Ex(e,t){return Ax(e)||gn(t)}const Ss=["trust","ambulance","icb","region"];let _s=null;function $x(){const e={color:{...Ma.color,...sr.color}},t=(a,o=new Set)=>{if(o.has(a))return;o.add(a);const s=a.split(".").reduce((l,c)=>l?l[c]:void 0,e);if(!s)return;const i=s.$value||s.value;return typeof i=="string"&&/^\{.+\}$/.test(i)?t(i.slice(1,-1),o):typeof i=="string"?i:void 0},n={};return Ss.forEach(a=>{const o=t(`color.data-viz.org-level.${a}`);o&&(n[a]=o)}),n}function ad(){return _s||(_s=$x()),_s}function Fx(e){return ad()[e.toLowerCase()]}function Px(e,t){return Fx(e)||ad()[Ss[t%Ss.length]]||At(t)}function Bx(e){return Ia(),cr?cr[e]:void 0}function Hx(e,t){return Bx(e)||gn(t)}let ks=null;const zx=["north-east","north-west","east-of-england","midlands","london","south-west","south-east"];function Rx(e){return e.trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Ox(){const e={color:{...Ma.color,...sr.color}},t=(o,s=new Set)=>{if(s.has(o))return;s.add(o);const i=o.split(".").reduce((c,d)=>c?c[d]:void 0,e);if(!i)return;const l=i.$value||i.value;return typeof l=="string"&&/^\{.+\}$/.test(l)?t(l.slice(1,-1),s):typeof l=="string"?l:void 0},n={},a=[];return zx.forEach(o=>{const s=t(`color.data-viz.region.${o}`);s?n[o]=s:a.push(o)}),process.env.NODE_ENV!=="production"&&(Object.keys(n).length===0?console.warn("[DataViz] Region colour tokens unresolved  falling back to categorical colours."):a.length&&console.warn(`[DataViz] Missing region colour tokens: ${a.join(", ")}.`)),n}function Ux(){return ks||(ks=Ox()),ks}function Wx(e){return Ux()[Rx(e)]}function En(e,t){return Wx(e)||At(t)}const od=X.createContext(null),dr=()=>X.useContext(od),Gx=({initialHiddenIds:e=[],children:t,hiddenIds:n,onChange:a})=>{const[o,s]=X.useState(()=>new Set(e)),i=n!==void 0,l=X.useMemo(()=>i?new Set(n):o,[i,n,o]),c=X.useCallback(u=>{i||s(new Set(u)),a?.(Array.from(u))},[i,a]),d=X.useMemo(()=>({hiddenIds:l,isHidden:u=>l.has(u),toggle:u=>{const f=new Set(l);f.has(u)?f.delete(u):f.add(u),c(f)},showOnly:u=>{c(new Set)},showAll:()=>c(new Set),setHidden:u=>c(new Set(Array.isArray(u)?u:Array.from(u)))}),[l,c]);return r.jsx(od.Provider,{value:d,children:t})},sd=X.createContext(null),Qt=()=>X.useContext(sd),id=({children:e,maxDistance:t=40,wrapAround:n=!1})=>{const a=mn(),o=dr(),[s,i]=X.useState(null),l=X.useRef(new Map),[c,d]=X.useState([]),u=X.useCallback((I,v)=>{l.current.set(I,v)},[]),f=X.useCallback(I=>{l.current.delete(I)},[]),h=X.useCallback((I,v)=>{if(!a)return;const{xScale:x,yScale:S}=a;let A=null,D=1/0;l.current.forEach((F,T)=>{F.forEach((L,$)=>{const O=x(L.x),J=S(L.y),ee=O-I,ae=J-v,R=Math.sqrt(ee*ee+ae*ae);R<D&&(D=R,A={seriesId:T,index:$,x:L.x,y:L.y,clientX:O,clientY:J})})}),A&&D<=t?i(A):i(null)},[a,t]),p=X.useCallback(()=>i(null),[]);X.useEffect(()=>{if(!s){d([]);return}if(!a)return;const{xScale:I,yScale:v}=a,x=[];l.current.forEach((S,A)=>{S.forEach((D,F)=>{(s.x instanceof Date&&D.x instanceof Date?D.x.getTime()===s.x.getTime():D.x===s.x)&&x.push({seriesId:A,index:F,x:D.x,y:D.y,clientX:I(D.x),clientY:v(D.y)})})}),x.sort((S,A)=>S.seriesId.localeCompare(A.seriesId)),d(x)},[s,a]);const y=X.useCallback(I=>{if(!s)return;const v=l.current.get(s.seriesId);if(!v)return;let x=s.index+I;if(x<0||x>=v.length){if(!n)return;x=(x+v.length)%v.length}const S=v[x];if(!a)return;const{xScale:A,yScale:D}=a;i({seriesId:s.seriesId,index:x,x:S.x,y:S.y,clientX:A(S.x),clientY:D(S.y)})},[s,a,n]),m=X.useCallback(I=>{let v=Array.from(l.current.keys());if(o&&(v=v.filter(O=>!o.isHidden(O))),v.length===0)return;if(!s){const O=v[0],J=l.current.get(O);if(!J||!a)return;const{xScale:ee,yScale:ae}=a,R=J[0];i({seriesId:O,index:0,x:R.x,y:R.y,clientX:ee(R.x),clientY:ae(R.y)});return}const x=v.indexOf(s.seriesId);if(x===-1)return;let S=x+I;if(S<0||S>=v.length){if(!n)return;S=(S+v.length)%v.length}const A=v[S],D=l.current.get(A);if(!D||!a)return;const F=Math.min(s.index,D.length-1),T=D[F],{xScale:L,yScale:$}=a;i({seriesId:A,index:F,x:T.x,y:T.y,clientX:L(T.x),clientY:$(T.y)})},[s,a,n,o]),g=X.useCallback(()=>{let I=Array.from(l.current.keys());if(o&&(I=I.filter(F=>!o.isHidden(F))),I.length===0)return;const v=s?s.seriesId:I[0],x=l.current.get(v);if(!x||x.length===0||!a)return;const S=x[0],{xScale:A,yScale:D}=a;i({seriesId:v,index:0,x:S.x,y:S.y,clientX:A(S.x),clientY:D(S.y)})},[s,a,o]),C=X.useCallback(()=>{let I=Array.from(l.current.keys());if(o&&(I=I.filter(T=>!o.isHidden(T))),I.length===0)return;const v=s?s.seriesId:I[0],x=l.current.get(v);if(!x||x.length===0||!a)return;const S=x.length-1,A=x[S],{xScale:D,yScale:F}=a;i({seriesId:v,index:S,x:A.x,y:A.y,clientX:D(A.x),clientY:F(A.y)})},[s,a,o]),j=X.useCallback(()=>y(1),[y]),M=X.useCallback(()=>y(-1),[y]),N=X.useCallback(()=>m(1),[m]),w=X.useCallback(()=>m(-1),[m]),_=X.useMemo(()=>({focused:s,setFocused:i,aggregated:c,focusNearest:h,clear:p,registerSeries:u,unregisterSeries:f,focusNextPoint:j,focusPrevPoint:M,focusNextSeries:N,focusPrevSeries:w,focusFirstPoint:g,focusLastPoint:C}),[s,c,h,p,u,f,j,M,N,w,g,C]);return r.jsx(sd.Provider,{value:_,children:e})},ld=({series:e,seriesIndex:t,palette:n,showPoints:a,focusablePoints:o,focusIndex:s,parseX:i,visibilityMode:l="remove",strokeWidth:c=1,smooth:d=!0,gradientFillId:u,colors:f})=>{const h=mn();if(!h)return null;const{xScale:p,yScale:y}=h,g=dr()?.isHidden(e.id)??!1,C=g&&l==="fade";if(g&&l==="remove")return null;const j=Qt();X.useEffect(()=>{if(!j)return;const v=e.data.map(x=>({x:i(x),y:x.y}));return j.registerSeries(e.id,v),()=>j.unregisterSeries(e.id)},[j,e.id,e.data,i]);const M=X.useMemo(()=>hs(e.data,v=>p(i(v)),v=>y(v.y),{smooth:d}),[e.data,p,y,i,d]),N=X.useMemo(()=>{if(!e.data.length)return"";const[v]=y.domain(),x=us().x(S=>p(i(S))).y0(()=>y(v)).y1(S=>y(S.y));return d&&x.curve(ja),x(e.data)||""},[e.data,p,y,i,d]),w=f&&f[t],_=e.color||w||(n==="region"?En(e.id,t):At(t)),I=n==="region"?Da(e.id,t):gn(t);return r.jsxs("g",{className:"fdp-line-series","data-series":e.id,opacity:C?.25:1,"aria-hidden":C?!0:void 0,children:[u&&r.jsx("path",{d:N,fill:`url(#${u})`,stroke:"none",role:"presentation",className:"fdp-line-series__gradient"}),r.jsx("path",{d:M,fill:"none",stroke:_,strokeWidth:c,role:"presentation"}),a&&e.data.map((v,x)=>{const S=p(i(v)),A=y(v.y),D=o?0:-1,F=!C&&(o&&x===s||j?.focused?.seriesId===e.id&&j.focused.index===x),T=()=>{j&&!C&&j.setFocused({seriesId:e.id,index:x,x:i(v),y:v.y,clientX:S,clientY:A})},L=()=>{j&&j.focused?.seriesId===e.id&&j.focused.index===x&&j.clear()};return r.jsx("circle",{cx:S,cy:A,r:F?5:3.5,stroke:F?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":I,strokeWidth:F?2:1,fill:F?"var(--nhs-fdp-color-grey-3, #aeb7bd)":_,className:"fdp-line-point",tabIndex:C?-1:D,"aria-label":`${e.label||e.id} ${i(v).toDateString()} value ${v.y}`,"data-series":e.id,"data-index":x,onMouseEnter:T,onFocus:T,onMouseLeave:L,onBlur:L},x)})]})},Vx=({polite:e=!0,format:t})=>{const n=Qt(),[a,o]=X.useState(""),s=X.useRef("");return X.useEffect(()=>{if(!n?.focused)return;const{focused:i,aggregated:l}=n;let c;if(l&&l.length>1){const d=l.map(f=>`${f.seriesId} ${f.y}`).join("; ");c=`${i.x instanceof Date?i.x.toDateString():String(i.x)} â€“ ${d}`}else c=t?t({seriesId:i.seriesId,x:i.x,y:i.y,index:i.index}):Yx(i.seriesId,i.x,i.y,i.index);if(c!==s.current){s.current=c,o("");const d=setTimeout(()=>o(c),10);return()=>clearTimeout(d)}},[n?.focused,t]),r.jsx("div",{"aria-live":e?"polite":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,margin:-1,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",border:0},children:a})};function Yx(e,t,n,a){const o=t instanceof Date?t.toDateString():String(t);return`Series ${e}, point ${a+1}, ${o}, value ${n}`}const Zx=()=>{const e=Qt(),t=rn();if(!e||!t||!e.focused)return null;const{focused:n,aggregated:a}=e,{innerWidth:o,innerHeight:s}=t,i=Math.min(Math.max(n.clientX,0),o),l=Math.min(Math.max(n.clientY,0),s),c=i+8,d=l-8,u=a.length>1,f=n.x instanceof Date?n.x.toDateString():String(n.x),h=u?f:`${f} â€¢ ${n.y}`,p=/\d+$/.exec(n.seriesId||""),y=p?parseInt(p[0],10)-1:0,m=At(y>=0?y:0)||"#005eb8",g="var(--nhs-fdp-color-primary-yellow,#ffeb3b)";return r.jsxs("g",{className:"fdp-tooltip-layer",pointerEvents:"none",children:[r.jsx("circle",{cx:i,cy:l,r:7,fill:"none",stroke:g,strokeWidth:3}),r.jsx("circle",{cx:i,cy:l,r:5,fill:"#000",stroke:g,strokeWidth:1.5}),r.jsx("circle",{cx:i,cy:l,r:2.5,fill:m,stroke:"#fff",strokeWidth:.5}),u?(()=>{const j=a.map(I=>`${I.seriesId}: ${I.y}`),M=[h,...j],N=M.reduce((I,v)=>Math.max(I,v.length),0),w=Math.max(90,N*6.2+16),_=16*M.length+8;return r.jsxs("g",{children:[r.jsx("rect",{x:c,y:d-_,rx:4,ry:4,width:w,height:_,fill:"#212b32",opacity:.92}),M.map((I,v)=>r.jsx("text",{x:c+8,y:d-_+6+16*(v+.7),fill:"#fff",fontSize:12,children:I},v))]})})():r.jsxs("g",{children:[r.jsx("rect",{x:c,y:d-24,rx:4,ry:4,width:Math.max(60,h.length*6.2),height:24,fill:"#212b32",opacity:.92}),r.jsx("text",{x:c+8,y:d-8,fill:"#fff",fontSize:12,children:h})]})]})},qx=({items:e,palette:t="categorical",direction:n="row",interactive:a=!1,adjustStrokeForWhiteBackground:o=!0,hiddenIds:s,defaultHiddenIds:i=[],onVisibilityChange:l,formatAnnouncement:c})=>{const d=dr(),u=!!(d&&!a&&!l&&s===void 0),f=a||u,h=e||[],p=s!==void 0,[y,m]=X.useState(new Set(i)),g=p?new Set(s):y,[C,j]=X.useState(""),M=N=>{if(u&&d){const D=d.isHidden(N);d.toggle(N);const T=h.find($=>$.id===N)?.label||N,L=c?c(N,D,T):`${T} ${D?"shown":"hidden"}`;j(L);return}if(!f)return;const w=new Set(g),_=w.has(N);_?w.delete(N):w.add(N),p||m(w);const I=h.filter(D=>!w.has(D.id)).map(D=>D.id),v=Array.from(w);l?.(I,v);const S=h.find(D=>D.id===N)?.label||N,A=c?c(N,_,S):`${S} ${_?"shown":"hidden"}`;j(A)};return r.jsxs("div",{className:"fdp-legend-wrapper",children:[r.jsx("ul",{className:`fdp-legend fdp-legend--${n}`,children:h.map((N,w)=>{const _=N.palette||t,I=N.color||(_==="region"?En(N.id,w):_==="severity"?Lx(N.id,w):_==="org-level"?Px(N.id,w):At(w));let v=N.stroke||(_==="region"?Da(N.id,w):_==="severity"?Ex(N.id,w):_==="org-level"?Hx(N.id,w):gn(w));if(o&&v){const A=v.trim().toLowerCase();(A==="#fff"||A==="#ffffff"||A==="white"||/^rgb\(\s*255\s*,\s*255\s*,\s*255\s*\)$/.test(A))&&(v="#212b32")}const x=u&&d?d.isHidden(N.id):g.has(N.id),S=f?{"aria-pressed":!x,"aria-label":`${N.label} (${x?"show":"hide"})`,onClick:()=>M(N.id)}:{"aria-label":N.label};return r.jsxs("li",{className:`fdp-legend__item${x?" fdp-legend__item--hidden":""}`,children:[r.jsx("button",{type:"button",className:"fdp-legend__swatch",style:{backgroundColor:I,backgroundImage:N.patternDataUrl?`url(${N.patternDataUrl})`:void 0,backgroundSize:N.patternDataUrl?"auto":void 0,borderColor:v},...S}),r.jsx("span",{className:"fdp-legend__label",children:N.label})]},N.id)})}),f&&r.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite","aria-atomic":"true",children:C})]})},Jx=({series:e,seriesIndex:t,palette:n,parseX:a,areaOnly:o=!1,visibilityMode:s="remove",baselineY:i=0,smooth:l=!0,stacked:c,gradientFill:d=!0,colors:u})=>{const f=mn();if(!f)return null;const{xScale:h,yScale:p}=f,m=dr()?.isHidden(e.id)??!1,g=m&&s==="fade";if(m&&s==="remove")return null;const C=Qt();X.useEffect(()=>{if(!C)return;const I=e.data.map(v=>({x:a(v),y:v.y}));return C.registerSeries(e.id,I),()=>C.unregisterSeries(e.id)},[C,e.id,e.data,a]);const j=u&&u[t],M=e.color||j||(n==="region"?En(e.id,t):At(t)),N=X.useMemo(()=>c&&c.length===e.data.length?hs(e.data,I=>h(a(I)),I=>{const v=e.data.indexOf(I);return p(c[v].y1)},{smooth:l}):hs(e.data,I=>h(a(I)),I=>p(I.y),{smooth:l}),[e.data,c,h,p,a,l]),w=X.useMemo(()=>{if(c&&c.length===e.data.length){const A=us().x(D=>h(a(D))).y0((D,F)=>p(c[F].y0)).y1((D,F)=>p(c[F].y1));return l&&A.curve(ja),A(e.data)||""}const[I,v]=p.domain();let x=i;x<I?x=I:x>v&&(x=v);const S=us().x(A=>h(a(A))).y0(()=>p(x)).y1(A=>p(A.y));return l&&S.curve(ja),S(e.data)||""},[e.data,c,h,p,a,i,l]),_=X.useId();return r.jsxs("g",{className:"fdp-area-series","data-series":e.id,opacity:g?.25:1,"aria-hidden":g?!0:void 0,children:[d&&r.jsx("defs",{children:r.jsxs("linearGradient",{id:_,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:M,stopOpacity:.25}),r.jsx("stop",{offset:"100%",stopColor:M,stopOpacity:0})]})}),r.jsx("path",{className:"fdp-area-series__fill",d:w,fill:d?`url(#${_})`:M,...d?{}:{fillOpacity:.25},stroke:"none"}),!o&&r.jsx("path",{d:N,fill:"none",stroke:M,strokeWidth:1})]})},Xx=({series:e,seriesIndex:t,seriesCount:n,palette:a,parseX:o,focusable:s=!0,widthFactor:i=.8,groupGap:l=2,barWidth:c,adaptive:d=!1,adaptiveGroupOccupancy:u=.9,visibilityMode:f="remove",colorMode:h="series",allSeries:p,stacked:y,gapRatio:m=.15,minBarWidth:g,gradientFill:C=!1,gradientStrokeMatch:j=!0,opacity:M=1,fadedOpacity:N=.25,flatFillOpacity:w=1,colors:_})=>{const I=Math.max(0,m),v=mn(),x=rn();if(!v||!x)return null;const{xScale:S,yScale:A}=v,F=dr()?.isHidden(e.id)??!1,T=F&&f==="fade";if(F&&f==="remove")return null;const L=Qt();X.useEffect(()=>{if(!L)return;const q=e.data.map(te=>({x:o(te),y:te.y}));return L.registerSeries(e.id,q),()=>L.unregisterSeries(e.id)},[L,e.id,e.data,o]);const $=typeof S.bandwidth=="function",O=$?S.bandwidth():void 0,J=X.useMemo(()=>{if(O!=null)return O;const q=p&&p.length?p:[e],te=[];q.forEach(de=>{de.data.forEach(ve=>{const me=S(o(ve));Number.isFinite(me)&&te.push(me)})});const fe=te.sort((de,ve)=>de-ve);if(fe.length<=1)return 40;const Z=[];for(let de=1;de<fe.length;de++)Z.push(fe[de]-fe[de-1]);return Z.sort((de,ve)=>de-ve),(Z[Math.floor(Z.length/2)]||40)*i},[e.data,p,S,o,i,O]),{basePerBar:ee}=X.useMemo(()=>{if($){const fe=J,Z=Math.max(1,(fe-l*(n-1))/n),se=e.barWidth??c;let de=se?Math.min(se,fe):Z;if(d){const ve=fe*Math.min(1,Math.max(.05,u)),me=Math.max(1,(ve-l*(n-1))/n);de=se?Math.min(de,me):me}return{basePerBar:de}}const q=e.barWidth??c,te=Math.max(1,(J-l*(n-1))/n);if(d){const fe=p&&p.length?p:[e],Z=[];fe.forEach(Ge=>Ge.data.forEach(Le=>{const Ae=S(o(Le));Number.isFinite(Ae)&&Z.push(Ae)})),Z.sort((Ge,Le)=>Ge-Le);const se=[];for(let Ge=1;Ge<Z.length;Ge++)se.push(Z[Ge]-Z[Ge-1]);se.sort((Ge,Le)=>Ge-Le);const ve=(se[Math.floor(se.length/2)]||J)*Math.min(1,Math.max(.05,u)),me=Math.max(1,(ve-l*(n-1))/n);return{basePerBar:q?Math.min(q,me):me}}return q?{basePerBar:Math.min(q,te)}:{basePerBar:te}},[$,J,l,n,c,e.barWidth,d,u,p,S,o]),ae=X.useMemo(()=>{if($)return[];const q=[];return(p&&p.length?p:[e]).forEach(fe=>fe.data.forEach(Z=>{const se=S(o(Z));Number.isFinite(se)&&q.push(se)})),q.sort((fe,Z)=>fe-Z),Array.from(new Set(q))},[$,p,e,S,o]),R=X.useMemo(()=>{if($)return[];if(!ae.length)return[];if(ae.length===1)return[{center:ae[0],left:0,right:x.innerWidth}];const q=[];for(let te=0;te<ae.length;te++){const fe=ae[te],Z=te===0?0:(ae[te-1]+fe)/2,se=te===ae.length-1?x.innerWidth:(fe+ae[te+1])/2;q.push({center:fe,left:Math.max(0,Z),right:Math.min(x.innerWidth,se)})}return q},[$,ae,x.innerWidth]),B=X.useMemo(()=>{if($||!R.length)return;const q=Math.min(1,Math.max(.05,i)),te=R.map(ve=>Math.max(2,ve.right-ve.left)),fe=te.map(ve=>Math.max(2,Math.min(ve-1,ve*q)));let Z=Math.min(...fe);if(g)if(n<=1){const ve=Math.min(...te.map(me=>me-1));ve>=g&&Z<g&&(Z=Math.min(ve,g))}else{const ve=Math.min(...te.map(De=>De-1)),me=g*n+(n-1)*(g*I);me<=ve&&Z<me&&(Z=me)}if(n<=1)return g&&Z<g&&te.every(me=>me>=g)?{groupWidth:g,barWidth:g}:{groupWidth:Z,barWidth:Z};let se=Z/(n+(n-1)*I);return se<1&&(se=1),g&&se<g&&g*n+(n-1)*(g*I)<=Z&&(se=g),{groupWidth:se*n+(n-1)*(se*I),barWidth:se}},[$,R,i,n,I,g]),E=_&&_[t]?_[t]:void 0,Y=e.color||E||(a==="region"?En(e.id,t):At(t)),P=a==="region"?Da(e.id,t):gn(t),W=j&&(e.color||E)?Y:P,H=Number.isFinite(A(0))?A(0):A.range()[0],Q=X.useId();return y&&y.length===e.data.length?r.jsxs("g",{className:"fdp-bar-series fdp-bar-series--stacked","data-series":e.id,opacity:T?N:M,"aria-hidden":T?!0:void 0,children:[C&&r.jsx("defs",{children:r.jsxs("linearGradient",{id:Q,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:Y,stopOpacity:.3}),r.jsx("stop",{offset:"60%",stopColor:Y,stopOpacity:.14}),r.jsx("stop",{offset:"100%",stopColor:Y,stopOpacity:.06})]})}),e.data.map((q,te)=>{const fe=o(q),Z=S($?q.x:fe);let se,de;if($)se=J,de=Z;else{const K=R.find(le=>Math.abs(le.center-Z)<.5);if(!K||!B)se=ee,de=Z-ee/2;else{const{groupWidth:le}=B;se=le;let pe=Z-le/2;pe<K.left&&(pe=K.left),pe+le>K.right&&(pe=Math.max(K.left,K.right-le)),de=pe}}const ve=y[te],me=A(ve.y0),De=A(ve.y1),Ge=Math.min(me,De),Le=Math.abs(De-me)||1;if(!$&&g&&se<g){const K=R.find(le=>Math.abs(le.center-Z)<.5);if(K){const le=Math.max(2,K.right-K.left-1),pe=Math.min(le,g);pe>se&&(se=pe,de=Math.max(K.left,Math.min(K.right-se,Z-se/2)))}}const Ae=!T&&L?.focused?.seriesId===e.id&&L.focused.index===te,_e=()=>{!L||T||L.setFocused({seriesId:e.id,index:te,x:fe,y:ve.y1-ve.y0,clientX:de+se/2,clientY:Ge})},z=()=>{L?.focused?.seriesId===e.id&&L.focused.index===te&&L.clear()};return r.jsx("rect",{x:de,y:Ge,width:se,height:Le,fill:C?`url(#${Q})`:Y,...C?{}:{fillOpacity:w},stroke:Ae?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":C&&j?Y:void 0,strokeWidth:Ae?2:1,className:"fdp-bar fdp-bar--stacked",tabIndex:T||!s?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${fe instanceof Date?fe.toDateString():fe} value ${ve.y1-ve.y0}`,onMouseEnter:_e,onFocus:_e,onMouseLeave:z,onBlur:z},te)})]}):r.jsxs("g",{className:"fdp-bar-series","data-series":e.id,opacity:T?N:M,"aria-hidden":T?!0:void 0,children:[C&&r.jsxs("defs",{children:[h==="series"&&r.jsxs("linearGradient",{id:Q,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:Y,stopOpacity:.3}),r.jsx("stop",{offset:"60%",stopColor:Y,stopOpacity:.14}),r.jsx("stop",{offset:"100%",stopColor:Y,stopOpacity:.06})]}),h==="category"&&e.data.map((q,te)=>{const Z=_&&_[te]||(a==="region"?En(String(q.x),te):At(te)),se=`${Q}-${te}`;return r.jsxs("linearGradient",{id:se,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:Z,stopOpacity:.3}),r.jsx("stop",{offset:"60%",stopColor:Z,stopOpacity:.14}),r.jsx("stop",{offset:"100%",stopColor:Z,stopOpacity:.06})]},se)})]}),e.data.map((q,te)=>{const fe=o(q),Z=S($?q.x:fe);let se,de;if($){const U=J;if(n<=1)de=U,se=Z;else{de=Math.max(1,U/(n+(n-1)*I));const V=de*I,ie=de*n+V*(n-1);se=Z+(U-ie)/2+t*(de+V)}}else{const U=R.find(V=>V.center===Z);if(!U||!B)de=ee,se=Z-ee/2,g&&de<g&&(de=g,se=Z-de/2);else{const{barWidth:V}=B;de=V;const ie=n>1?V*I:0,ne=de*n+ie*(n-1);let oe=Z-ne/2;oe<U.left&&(oe=U.left),oe+ne>U.right&&(oe=Math.max(U.left,U.right-ne)),se=oe+t*(de+ie)}if(g&&de<g){const V=R.find(ie=>Math.abs(ie.center-Z)<.5);if(V){const ie=Math.max(2,V.right-V.left-1),ne=Math.min(ie,g);if(ne>de)if(n<=1)de=ne,se=Math.max(V.left,Math.min(V.right-de,Z-de/2));else{const oe=ne*I,ue=ne*n+oe*(n-1);if(ue<=V.right-V.left-1){de=ne;const he=ue;let we=Z-he/2;we<V.left&&(we=V.left),we+he>V.right&&(we=Math.max(V.left,V.right-he)),se=we+t*(de+oe)}}}}}const ve=se+de/2,me=A(q.y),De=Math.min(H,me),Ge=Math.abs(H-me),Le=!T&&L?.focused?.seriesId===e.id&&L.focused.index===te,Ae=()=>{!L||T||L.setFocused({seriesId:e.id,index:te,x:fe,y:q.y,clientX:ve,clientY:me})},_e=()=>{L?.focused?.seriesId===e.id&&L.focused.index===te&&L.clear()},z=h==="category"&&_?_[te]:void 0,K=h==="category"?z||(a==="region"?En(String(q.x),te):At(te)):Y,le=h==="category"?`${Q}-${te}`:Q,pe=C&&j?K:h==="category"?a==="region"?Da(String(q.x),te):gn(te):W,ge=Le?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":pe||K;return r.jsx("rect",{x:se,y:De,width:de,height:Ge||1,fill:C?`url(#${le})`:K,...C?{}:{fillOpacity:w},stroke:ge,strokeWidth:Le?2:1,className:"fdp-bar",tabIndex:T||!s?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${fe instanceof Date?fe.toDateString():fe} value ${q.y}`,onMouseEnter:Ae,onFocus:Ae,onMouseLeave:_e,onBlur:_e},te)})]})},Kx=({series:e,innerWidth:t,innerHeight:n,paddingInner:a=.1,paddingOuter:o=.05,children:s,yTickCount:i=5})=>{const l=rn(),c=t??l?.innerWidth??0,d=n??l?.innerHeight??0,u=X.useMemo(()=>e.flatMap(g=>g.data),[e]),f=X.useMemo(()=>{const g=new Set;return u.forEach(C=>g.add(C.x)),Array.from(g)},[u]),h=X.useMemo(()=>Math.max(0,...u.map(g=>g.y)),[u]),p=X.useMemo(()=>ol().domain(f).range([0,c]).paddingInner(a).paddingOuter(o),[f,c,a,o]),y=X.useMemo(()=>ca().domain([0,h]).nice().range([d,0]),[h,d]),m=X.useMemo(()=>({xScale:p,yScale:y,getXTicks:()=>f,getYTicks:(g=i)=>y.ticks(g)}),[p,y,f,i]);return r.jsx(ps.Provider,{value:m,children:s})},Qx=({title:e,description:t,source:n,table:a,className:o,id:s,message:i="Interactive chart loadingâ€¦",forceFallback:l=!1})=>{const c=X.useId(),d=s||c,u=t?`${d}-desc`:void 0,f=n?`${d}-src`:void 0,h=typeof window<"u"&&!l;return r.jsxs("figure",{id:d,className:Lt("fdp-chart fdp-chart--noscript",o),"aria-labelledby":`${d}-title`,"aria-describedby":Lt(u,f),"data-component":"ChartNoScript",children:[r.jsx("header",{className:"fdp-chart__header",children:r.jsx("h3",{id:`${d}-title`,className:"fdp-chart__title",children:e})}),t&&r.jsx("p",{id:u,className:"fdp-chart__description",children:t}),!h&&r.jsx("div",{className:"fdp-chart__loading",role:"status","aria-live":"polite",children:i}),r.jsxs("div",{className:"fdp-chart__fallback",role:"group","aria-label":e,children:[r.jsx("noscript",{children:r.jsx("div",{className:"fdp-chart__noscript-wrapper",children:r.jsx(Tt,{...a})})}),r.jsx("div",{className:"fdp-chart__table","data-fallback-table":!0,children:r.jsx(Tt,{...a})})]}),n&&r.jsx("figcaption",{className:"fdp-chart__caption",children:n&&r.jsxs("small",{id:f,className:"fdp-chart__source",children:["Source: ",n]})})]})},ev=({selector:e="figure.fdp-chart",onEnhanced:t,delay:n=0,children:a})=>{const o=X.useRef(null);return X.useEffect(()=>{const s=o.current;if(!s)return;const i=()=>{const l=Array.from(s.querySelectorAll(e));if(l.length===0)return;const c=[];l.forEach(d=>{d.classList.contains("fdp-chart--enhanced")||(d.classList.add("fdp-chart--enhanced"),c.push(d))}),c.length&&t&&t(c)};if(n>0){if(typeof window>"u")return;const l=window.setTimeout(i,n);return()=>window.clearTimeout(l)}i()},[e,t,n]),r.jsx("div",{ref:o,children:a})},cd=({label:e,value:t,unit:n,delta:a,status:o="neutral",variant:s="default",subtitle:i,metadata:l,trendData:c,loading:d=!1,error:u,valueFormatter:f,className:h,style:p,id:y,announceDelta:m=!0,visual:g})=>{const C=X.useId(),j=y||C,M=`${j}-label`,N=`${j}-value`,w=`${j}-delta`,_=typeof t=="number"&&!Number.isNaN(t),I=d?"â€”":u?"":_?f?f(t):t.toLocaleString():t;let v,x="",S="";if(a&&!d&&!u){v=a.direction||(a.value>0?"up":a.value<0?"down":"neutral");const A=Math.abs(a.value),D=v==="up"?`+${A}`:v==="down"?`-${A}`:"0",F=a.isPercent?"%":"";if(x=`${D}${F}`,a.ariaLabel)S=a.ariaLabel;else{const T=a.invert?v==="down":v==="up";S=`${v==="neutral"?"no change":v==="up"?"up":"down"} ${A}${F}${v==="neutral"?"":T?" (improvement)":" (worse)"}`}}return r.jsx("div",{className:Lt("fdp-metric-card",s&&`fdp-metric-card--${s}`,o&&`fdp-metric-card--status-${o}`,d&&"fdp-metric-card--loading",u&&"fdp-metric-card--error",h),style:p,role:"group","aria-labelledby":M,"data-component":"MetricCard",children:r.jsxs("div",{className:"fdp-metric-card__inner",children:[r.jsxs("div",{className:"fdp-metric-card__header",children:[r.jsx("h3",{id:M,className:"fdp-metric-card__label",children:e}),l&&r.jsx("div",{className:"fdp-metric-card__metadata",children:l})]}),r.jsxs("div",{className:"fdp-metric-card__content",children:[r.jsxs("div",{className:"fdp-metric-card__value-section",children:[r.jsx("div",{id:N,className:"fdp-metric-card__value",children:d?r.jsx("div",{className:"fdp-metric-card__skeleton","aria-hidden":"true",children:r.jsx("div",{className:"fdp-metric-card__skeleton-line fdp-metric-card__skeleton-line--value"})}):u?r.jsx("div",{className:"fdp-metric-card__error",role:"alert",children:u}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"fdp-metric-card__number",children:I}),n&&r.jsx("span",{className:"fdp-metric-card__unit",children:n})]})}),i&&!d&&!u&&r.jsx("div",{className:"fdp-metric-card__subtitle",children:i})]}),a&&!d&&!u&&r.jsx("div",{className:"fdp-metric-card__delta-section",children:r.jsxs("div",{id:w,"aria-label":S,className:Lt("fdp-metric-card__delta",v&&`fdp-metric-card__delta--${v}`),children:[r.jsx("span",{className:"fdp-metric-card__delta-value",children:x}),a.period&&r.jsx("span",{className:"fdp-metric-card__delta-period",children:a.period})]})}),c&&c.length>0&&!d&&!u&&r.jsx("div",{className:"fdp-metric-card__trend","aria-hidden":"true"})]}),g&&!u&&r.jsx("div",{className:"fdp-metric-card__visual","aria-hidden":"true",children:g}),m&&a&&!a.ariaLabel&&!d&&!u&&r.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite",children:S})]})})};var lt=(e=>(e.Xs="xs",e.Sm="sm",e.Md="md",e.Lg="lg",e.Xl="xl",e.Full="full",e))(lt||{}),dd=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(dd||{}),an=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(an||{}),Ye=(e=>(e.Improvement="improvement",e.Concern="concern",e.Neither="neither",e.Suppressed="suppressed",e))(Ye||{});const Cs=["single_point","two_sigma","shift","trend"];Cs.reduce((e,t,n)=>(e[t]=n+1,e),{});const tv={single_point:"Single point beyond process limit",two_sigma:"Two of three beyond 2Ïƒ on one side",shift:"Sustained shift (run)",trend:"Monotonic trend"},nv={single_point:"point",two_sigma:"cluster",shift:"sustained",trend:"sustained"},ud=Cs.reduce((e,t,n)=>(e[t]={id:t,rank:n+1,label:tv[t],category:nv[t],participatesInRanking:!0},e),{});Cs.map(e=>ud[e]);var ur=(e=>(e.SinglePointAbove="single_above",e.SinglePointBelow="single_below",e.TwoOfThreeAbove="two_of_three_above",e.TwoOfThreeBelow="two_of_three_below",e.FourOfFiveAbove="four_of_five_above",e.FourOfFiveBelow="four_of_five_below",e.ShiftHigh="shift_high",e.ShiftLow="shift_low",e.TrendIncreasing="trend_inc",e.TrendDecreasing="trend_dec",e.FifteenInnerThird="fifteen_inner_third",e))(ur||{}),on=(e=>(e.Pass="pass",e.Fail="fail",e.None="none",e))(on||{}),fd=(e=>(e.Shift="shift",e.Trend="trend",e.Point="point",e))(fd||{});const $n={singlePointUp:{tooltip:"Single point above upper control limit",narration:"Single point beyond a control limit"},singlePointDown:{tooltip:"Single point below lower control limit",narration:"Single point beyond a control limit"},twoOfThreeUp:{tooltip:"Two of three points beyond +2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},twoOfThreeDown:{tooltip:"Two of three points beyond -2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},fourOfFiveUp:{tooltip:"Four of five points beyond +1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},fourOfFiveDown:{tooltip:"Four of five points beyond -1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},shiftUp:{tooltip:"Shift: run of points above centre line",narration:"Shift (run on one side of mean)"},shiftDown:{tooltip:"Shift: run of points below centre line",narration:"Shift (run on one side of mean)"},trendUp:{tooltip:"Trend: consecutive increasing points",narration:"Trend (consecutive increases)"},trendDown:{tooltip:"Trend: consecutive decreasing points",narration:"Trend (consecutive decreases)"}};function Ta(e){if(!e)return[];const t=[];return e.specialCauseSinglePointUp&&t.push("singlePointUp"),e.specialCauseSinglePointDown&&t.push("singlePointDown"),e.specialCauseTwoOfThreeUp&&t.push("twoOfThreeUp"),e.specialCauseTwoOfThreeDown&&t.push("twoOfThreeDown"),e.specialCauseFourOfFiveUp&&t.push("fourOfFiveUp"),e.specialCauseFourOfFiveDown&&t.push("fourOfFiveDown"),e.specialCauseShiftUp&&t.push("shiftUp"),e.specialCauseShiftDown&&t.push("shiftDown"),e.specialCauseTrendUp&&t.push("trendUp"),e.specialCauseTrendDown&&t.push("trendDown"),t}function La(e){switch(e){case Ye.Improvement:return"Improvement signal";case Ye.Concern:return"Concern signal";case Ye.Neither:return"Common cause variation";case Ye.Suppressed:return null;default:return null}}function hd(e){switch(e){case on.Pass:return"Target met";case on.Fail:return"Target not met";default:return null}}function rv(e,t,n){if(e==null||!Number.isFinite(t)||t<=0)return null;const a=Math.abs((n-e)/t);return a<1?"Within 1Ïƒ":a<2?"Between 1â€“2Ïƒ":a<3?"Between 2â€“3Ïƒ":"Beyond 3Ïƒ"}const Mt={improvement:{token:"var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",hex:"#00B0F0"},concern:{token:"var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",hex:"#E46C0A"},neither:{token:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",hex:"#A6A6A6"},suppressed:{token:"var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",hex:"#490092"}};function pd(e){return e?Mt[e]?.token??Mt.neither.token:Mt.neither.token}function av(e){return e?Mt[e]?.hex??Mt.neither.hex:Mt.neither.hex}var bn=(e=>(e.Pass="pass",e.Fail="fail",e.Uncertain="uncertain",e))(bn||{});const ov={pass:"#00B0F0",fail:"#E46C0A",uncertain:"#A6A6A6"},sv={pass:"P",fail:"F",uncertain:"?"};var ut=(e=>(e.HigherIsBetter="higher_is_better",e.LowerIsBetter="lower_is_better",e.ContextDependent="context_dependent",e))(ut||{}),We=(e=>(e.Higher="higher",e.Lower="lower",e))(We||{}),St=(e=>(e.Improving="improving",e.Deteriorating="deteriorating",e.No_Judgement="no_judgement",e.None="none",e))(St||{}),Be=(e=>(e.SpecialCauseImproving="special_cause_improving",e.SpecialCauseDeteriorating="special_cause_deteriorating",e.CommonCause="common_cause",e.SpecialCauseNoJudgement="special_cause_no_judgement",e))(Be||{});const iv=e=>{const t=e.replace("#",""),n=parseInt(t.slice(0,2),16)/255,a=parseInt(t.slice(2,4),16)/255,o=parseInt(t.slice(4,6),16)/255,s=[n,a,o].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*s[0]+.7152*s[1]+.0722*s[2]<.55?"#ffffff":"#212b32"},Aa={special_cause_deteriorating:{hex:Mt.concern.hex,judgement:"deteriorating",label:"Special Cause (Deteriorating)",description:"Deteriorating variation detected (special cause) relative to baseline."},special_cause_improving:{hex:Mt.improvement.hex,judgement:"improving",label:"Special Cause (Improving)",description:"Improving variation detected (special cause) relative to baseline."},common_cause:{hex:Mt.neither.hex,judgement:"none",label:"Common Cause",description:"Common cause variation only â€“ no special cause detected."},special_cause_no_judgement:{hex:Mt.suppressed.hex,judgement:"no_judgement",label:"Special Cause (No Judgement)",description:"Special cause detected without assigning improving/deteriorating judgement."}};Object.values(Aa).forEach(e=>{e.text||(e.text=iv(e.hex))});const md=e=>Aa[e],Ns=e=>Aa[e].judgement||"none",gd={special:{higher:[{cx:77.5,cy:158.5},{cx:114,cy:175},{cx:150.5,cy:158.5},{cx:188,cy:125},{cx:225,cy:137}],lower:[{cx:77.5,cy:139.5},{cx:114,cy:124.5},{cx:150.5,cy:139.5},{cx:188,cy:175.5},{cx:224.5,cy:162}]},common:[{cx:76.5,cy:149.5},{cx:113,cy:179.5},{cx:149.5,cy:117},{cx:187,cy:171},{cx:223.5,cy:158}]};function lv(e,t){let n;return e==="common_cause"?n=gd.common:n=gd.special[t==="lower"?"lower":"higher"],n.map(a=>({...a}))}let js=null;try{js=require("@nhsdigital/fdp-design-system/dist/js/tokens.json")?.color?.["data-viz"]?.spc||null}catch{}const yt=(e,t)=>{if(!js)return t;const n=e.split(".");let a=js;for(const s of n){if(a==null)break;a=a[s]}const o=a;return o==null?t:typeof o=="string"||typeof o=="number"?String(o):o.$value!=null?String(o.$value):o.value!=null?String(o.value):t},Ea=()=>({start:yt("gradient.stop.start-opacity","0.12"),mid:yt("gradient.stop.mid-opacity","0.03"),end:yt("gradient.stop.end-opacity","0"),triStart:yt("gradient.stop.triangle-start-opacity",yt("gradient.stop.start-opacity","0.12")),triMid:yt("gradient.stop.triangle-mid-opacity",yt("gradient.stop.mid-opacity","0.03")),triEnd:yt("gradient.stop.triangle-end-opacity",yt("gradient.stop.end-opacity","0"))}),$a={improvement:"improvement",concern:"concern",noJudgement:"no-judgement",common:"common-cause"},Fa={improvement:"#00B0F0",concern:"#E46C0A",noJudgement:"#490092",common:"#A6A6A6"},bd=()=>yt($a.improvement,Fa.improvement),yd=()=>yt($a.concern,Fa.concern),cv=()=>yt($a.noJudgement,Fa.noJudgement),yn=()=>yt($a.common,Fa.common);function Pa(e){switch(e){case Ye.Improvement:return bd();case Ye.Concern:return yd();case Ye.Neither:case Ye.Suppressed:default:return yn()}}function xd(e){switch(e){case Be.SpecialCauseImproving:return bd();case Be.SpecialCauseDeteriorating:return yd();case Be.SpecialCauseNoJudgement:return cv();case Be.CommonCause:default:return yn()}}var kt=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(kt||{}),Ze=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(Ze||{}),Fe=(e=>(e.ImprovementHigh="ImprovementHigh",e.ImprovementLow="ImprovementLow",e.ConcernHigh="ConcernHigh",e.ConcernLow="ConcernLow",e.NeitherHigh="NeitherHigh",e.NeitherLow="NeitherLow",e.CommonCause="CommonCause",e))(Fe||{}),at=(e=>(e.SinglePoint="SinglePoint",e.TwoSigma="TwoSigma",e.Shift="Shift",e.Trend="Trend",e))(at||{}),xn=(e=>(e.Upwards="Upwards",e.Downwards="Downwards",e.Same="Same",e))(xn||{}),Et=(e=>(e.Up="Up",e.Down="Down",e))(Et||{}),Fn=(e=>(e.Improvement="Improvement",e.Concern="Concern",e))(Fn||{}),Pn=(e=>(e.SqlPrimeThenRule="SqlPrimeThenRule",e.PreferImprovement="PreferImprovement",e.RuleHierarchy="RuleHierarchy",e))(Pn||{}),bt=(e=>(e.FavourableSide="FavourableSide",e.CrossingAfterFavourable="CrossingAfterFavourable",e.ExtremeFavourable="ExtremeFavourable",e.FirstFavourable="FirstFavourable",e.LongestFavourable="LongestFavourable",e.LastFavourable="LastFavourable",e.UnfavourableSide="UnfavourableSide",e.CrossingAfterUnfavourable="CrossingAfterUnfavourable",e.ExtremeUnfavourable="ExtremeUnfavourable",e.FirstUnfavourable="FirstUnfavourable",e.LongestUnfavourable="LongestUnfavourable",e.LastUnfavourable="LastUnfavourable",e))(bt||{}),en=(e=>(e.Off="Off",e.AutoWhenConflict="AutoWhenConflict",e.Always="Always",e))(en||{}),$t=(e=>(e.Info="info",e.Warning="warning",e.Error="error",e))($t||{}),Ba=(e=>(e.Config="config",e.Data="data",e.Limits="limits",e.SpecialCause="special_cause",e.Baseline="baseline",e.Logic="logic",e.Target="target",e.Ghost="ghost",e.Partition="partition",e))(Ba||{}),Ha=(e=>(e.UnknownChartType="unknown_chart_type",e.InsufficientPointsGlobal="insufficient_points_global",e.VariationConflictRow="variation_conflict_row",e.NullValuesExcluded="null_values_excluded",e.TargetIgnoredRareEvent="target_ignored_rare_event",e.GhostRowsRareEvent="ghost_rows_rare_event",e.InsufficientPointsPartition="insufficient_points_partition",e.BaselineWithSpecialCause="baseline_with_special_cause",e.PartitionCapApplied="partition_cap_applied",e.GlobalCapApplied="global_cap_applied",e))(Ha||{});const sn={[at.SinglePoint]:1,[at.TwoSigma]:2,[at.Shift]:3,[at.Trend]:4},vd=3.267,dv=2.66,wd=.2777;function Oe(e){return typeof e=="number"&&!Number.isNaN(e)}function Bn(e){return e.reduce((t,n)=>t+n,0)/(e.length||1)}function Sd(e,t){const n=new Array(e.length).fill(null);let a=null;for(let o=0;o<e.length;o++){const s=e[o];if(!(t[o]||!Oe(s))){if(a!==null){const i=e[a];Oe(i)&&(n[o]=Math.abs(s-i))}a=o}}return n}function _d(e,t){const n=e.filter(Oe);if(!n.length)return{mrMean:NaN,mrUcl:NaN};let a=n.slice();if(t){const s=Bn(a),i=vd*s;a=a.filter(l=>l<=i)}const o=Bn(a);return{mrMean:o,mrUcl:vd*o}}function kd(e,t){if(!Oe(e)||!Oe(t))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=dv*t,a=2/3*n,o=1/3*n;return{upperProcessLimit:e+n,lowerProcessLimit:e-n,upperTwoSigma:e+a,lowerTwoSigma:e-a,upperOneSigma:e+o,lowerOneSigma:e-o}}function uv(e,t,n,a){if(e===kt.T){const f=t.map(v=>Oe(v)&&v>0?Math.pow(v,wd):null),h=Sd(f,n),p=_d(h,a),y=f.filter((v,x)=>!n[x]&&Oe(v)),m=y.length?Bn(y):NaN,g=kd(m,p.mrMean),C=v=>Oe(v)&&v>0?Math.pow(v,1/wd):null,j=Oe(g.upperProcessLimit)?C(g.upperProcessLimit):null,M=Oe(g.lowerProcessLimit)&&g.lowerProcessLimit>0?C(g.lowerProcessLimit):null,N=Oe(g.upperTwoSigma)?C(g.upperTwoSigma):null,w=Oe(g.lowerTwoSigma)&&g.lowerTwoSigma>0?C(g.lowerTwoSigma):null,_=Oe(g.upperOneSigma)?C(g.upperOneSigma):null,I=Oe(g.lowerOneSigma)&&g.lowerOneSigma>0?C(g.lowerOneSigma):null;return{mean:Oe(m)&&m>0?C(m):null,mr:h,mrMean:p.mrMean,mrUcl:p.mrUcl,upperProcessLimit:j,lowerProcessLimit:M,upperTwoSigma:N,lowerTwoSigma:w,upperOneSigma:_,lowerOneSigma:I}}if(e===kt.G){const f=t.filter((A,D)=>!n[D]&&Oe(A)),h=f.length?Bn(f):NaN,p=Oe(h)?1/(h+1):NaN,y=A=>{if(!Oe(p)||p<=0||p>=1)return NaN;const D=Math.ceil(Math.log(1-A)/Math.log(1-p))-1;return Math.max(0,D)},m=.00135,g=1-.00135,C=.02275,j=1-.02275,M=.158655,N=1-.158655,w=y(g),_=y(m),I=y(j),v=y(C),x=y(N),S=y(M);return{mean:Oe(h)?h:null,mr:new Array(t.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:Oe(w)?w:null,lowerProcessLimit:Oe(_)?_:null,upperTwoSigma:Oe(I)?I:null,lowerTwoSigma:Oe(v)?v:null,upperOneSigma:Oe(x)?x:null,lowerOneSigma:Oe(S)?S:null}}if(e!==kt.XmR)return{mean:NaN,mr:new Array(t.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const o=Sd(t,n),s=o.filter(Oe),i=s.length?Bn(s):NaN,l=Oe(i)?3.267*i:NaN;let c=NaN;{const f=t.reduce((h,p,y)=>{if(n[y]||!Oe(p))return h;if(!a)return h.push(p),h;const m=o[y];return(m===null||!Oe(l)||Oe(m)&&m<=l)&&h.push(p),h},[]);c=f.length?Bn(f):NaN}const d=_d(o,a),u=kd(c,d.mrMean);return{mean:c,mr:o,mrMean:d.mrMean,mrUcl:d.mrUcl,...u}}function fv(e,t){const n=e.map((c,d)=>d).filter(c=>!e[c].ghost&&Oe(e[c].value)),a=c=>e[c],o=t.shiftPoints,s=t.trendPoints;let i=[],l=[];for(const c of n){const d=a(c);if(!Oe(d.mean)||!Oe(d.value)?(i=[],l=[]):d.value>d.mean?(i.push(c),l=[]):d.value<d.mean?(l.push(c),i=[]):(i=[],l=[]),i.length>=o)for(const u of i)a(u).shiftUp=!0;if(l.length>=o)for(const u of l)a(u).shiftDown=!0}for(let c=0;c<=n.length-3;c++){const u=n.slice(c,c+3).map(a);if(!u.every(N=>Oe(N.value)&&Oe(N.mean)))continue;const f=u[0].mean,h=u.every(N=>N.value>f),p=u.every(N=>N.value<f);if(!h&&!p)continue;const y=u[0].upperTwoSigma??1/0,m=u[0].lowerTwoSigma??-1/0,g=u[0].upperProcessLimit??1/0,C=u[0].lowerProcessLimit??-1/0,j=u.filter(N=>t.twoSigmaIncludeAboveThree?N.value>y:N.value>y&&N.value<=g),M=u.filter(N=>t.twoSigmaIncludeAboveThree?N.value<m:N.value<m&&N.value>=C);h&&j.length>=2&&j.forEach(N=>N.twoSigmaUp=!0),p&&M.length>=2&&M.forEach(N=>N.twoSigmaDown=!0)}if(t.enableFourOfFiveRule)for(let c=0;c<=n.length-5;c++){const u=n.slice(c,c+5).map(a);if(!u.every(j=>Oe(j.value)&&Oe(j.mean)))continue;const f=u[0].mean,h=u.every(j=>j.value>f),p=u.every(j=>j.value<f);if(!h&&!p)continue;const y=u[0].upperOneSigma??1/0,m=u[0].lowerOneSigma??-1/0,g=u.filter(j=>j.value>y),C=u.filter(j=>j.value<m);h&&g.length>=4&&g.forEach(j=>j.fourOfFiveUp=!0),p&&C.length>=4&&C.forEach(j=>j.fourOfFiveDown=!0)}for(let c=0;c<=n.length-s;c++){const d=n.slice(c,c+s),u=d.map(a);if(!u.every(p=>Oe(p.value)))continue;let f=!0,h=!0;for(let p=1;p<u.length&&(u[p].value>u[p-1].value||(f=!1),u[p].value<u[p-1].value||(h=!1),!(!f&&!h));p++);f&&d.forEach(p=>a(p).trendUp=!0),h&&d.forEach(p=>a(p).trendDown=!0)}}function Cd(e){const t=[],n=[];e.singlePointUp&&t.push({id:at.SinglePoint,rank:sn[at.SinglePoint]}),e.singlePointDown&&n.push({id:at.SinglePoint,rank:sn[at.SinglePoint]}),e.twoSigmaUp&&t.push({id:at.TwoSigma,rank:sn[at.TwoSigma]}),e.twoSigmaDown&&n.push({id:at.TwoSigma,rank:sn[at.TwoSigma]}),e.shiftUp&&t.push({id:at.Shift,rank:sn[at.Shift]}),e.shiftDown&&n.push({id:at.Shift,rank:sn[at.Shift]}),e.trendUp&&t.push({id:at.Trend,rank:sn[at.Trend]}),e.trendDown&&n.push({id:at.Trend,rank:sn[at.Trend]});const a=t.reduce((i,l)=>Math.max(i,l.rank),0),o=n.reduce((i,l)=>Math.max(i,l.rank),0),s=a>o?xn.Upwards:o>a?xn.Downwards:xn.Same;return{up:t,dn:n,upMax:a,dnMax:o,primeDirection:s}}function Nd(e,t){const n=t===Ze.Up?e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp:t===Ze.Down?e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown:!1,a=t===Ze.Up?e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown:t===Ze.Down?e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp:!1;return{aligned:n,opposite:a}}function jd(e,t,n,a=!1,o,s,i=!1){const{up:l,dn:c,upMax:d,dnMax:u,primeDirection:f}=Cd(e);e.primeDirection=f;const h=e.specialCauseImprovementValue,p=e.specialCauseConcernValue;e.specialCauseImprovementValue!==null&&e.specialCauseConcernValue!==null&&hv({row:e,metric:t,metricConflictRule:n,preferImprovementWhenConflict:a,preferTrendWhenConflict:i,primeDirection:f,conflictStrategy:o,ruleHierarchy:s}),t===Ze.Up?e.variationIcon=e.specialCauseImprovementValue!==null?Fe.ImprovementHigh:e.specialCauseConcernValue!==null?Fe.ConcernLow:Fe.CommonCause:t===Ze.Down?e.variationIcon=e.specialCauseImprovementValue!==null?Fe.ImprovementLow:e.specialCauseConcernValue!==null?Fe.ConcernHigh:Fe.CommonCause:e.variationIcon=Fe.CommonCause;const y=e.specialCauseImprovementValue!==null?Et.Up:e.specialCauseConcernValue!==null?Et.Down:void 0,m=y===Et.Up?d:y===Et.Down?u:Math.max(d,u);e.primeRank=m||void 0;const g=y===Et.Up?l.find(C=>C.rank===m):y===Et.Down?c.find(C=>C.rank===m):void 0;return e.primeRuleId=g?.id,{originalImprovement:h,originalConcern:p}}function hv(e){const{row:t,metric:n,metricConflictRule:a,preferImprovementWhenConflict:o,preferTrendWhenConflict:s,primeDirection:i=t.primeDirection??xn.Same,conflictStrategy:l,ruleHierarchy:c}=e;if(s&&t.specialCauseImprovementValue!==null&&t.specialCauseConcernValue!==null){const u=!!t.trendUp,f=!!t.trendDown;if(n===Ze.Up){if(u&&!f){t.specialCauseConcernValue=null;return}if(!u&&f){t.specialCauseImprovementValue=null;return}}else if(n===Ze.Down){if(f&&!u){t.specialCauseConcernValue=null;return}if(!f&&u){t.specialCauseImprovementValue=null;return}}}const d=o?Pn.PreferImprovement:l??Pn.SqlPrimeThenRule;if(d===Pn.PreferImprovement){n===Ze.Up?t.specialCauseConcernValue=null:n===Ze.Down&&(t.specialCauseImprovementValue=null);return}if(d===Pn.RuleHierarchy){const u=c??[at.Trend,at.Shift,at.TwoSigma,at.SinglePoint],{up:f,dn:h}=Cd(t);for(const p of u){const y=f.some(g=>g.id===p),m=h.some(g=>g.id===p);if(y&&!m){n===Ze.Up?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null;return}if(m&&!y){n===Ze.Up?t.specialCauseImprovementValue=null:t.specialCauseConcernValue=null;return}if(y&&m){(n===Ze.Up||n===Ze.Down)&&(a===Fn.Improvement?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null);return}}}i===xn.Upwards?n===Ze.Up?t.specialCauseConcernValue=null:n===Ze.Down&&(t.specialCauseImprovementValue=null):i===xn.Downwards?n===Ze.Up?t.specialCauseImprovementValue=null:n===Ze.Down&&(t.specialCauseConcernValue=null):a===Fn.Improvement?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null}var Ms=(e=>(e.Up="Up",e.Down="Down",e))(Ms||{});function pv(e){return e>0?1:e<0?-1:0}function mv(e){const t=pv(e);if(t>0)return"Above";if(t<0)return"Below"}function Md(e){const t=[],n=(i,l,c)=>({segStart:i,segSide:l,minV:c,maxV:c,maxAbsDelta:0}),a=(i,l,c,d,u)=>({minV:Math.min(c,i),maxV:Math.max(d,i),maxAbsDelta:Math.max(u,l)}),o=(i,l,c,d,u,f,h,p)=>{i.push({trendDirection:p,start:l,end:c,side:d,minValue:u,maxValue:f,maxAbsDeltaFromMean:h})};let s=0;for(;s<e.length;){const i=e[s];if(!i||i.value==null||i.ghost||!i.trendUp&&!i.trendDown){s++;continue}const l=i.trendUp?"Up":i.trendDown?"Down":void 0;let c=s,d=s;for(;d<e.length;d++){const C=e[d];if(!C||C.value==null||C.ghost||!(l==="Up"?C.trendUp:C.trendDown))break}const u=d-1,f=[];let h,p,y=1/0,m=-1/0,g=0;for(let C=c;C<=u;C++){const j=e[C];if(j.value==null)continue;const M=j.value-(j.mean??0),N=mv(M);if(!N){h!==void 0&&(o(f,h,C-1,p,y,m,g,l),h=void 0,p=void 0,y=1/0,m=-1/0,g=0);continue}if(h===void 0)({segStart:h,segSide:p,minV:y,maxV:m,maxAbsDelta:g}=(()=>{const w=n(C,N,j.value);return{segStart:w.segStart,segSide:w.segSide,minV:w.minV,maxV:w.maxV,maxAbsDelta:Math.abs(M)}})());else if(N!==p)o(f,h,C-1,p,y,m,g,l),{segStart:h,segSide:p,minV:y,maxV:m,maxAbsDelta:g}=(()=>{const w=n(C,N,j.value);return{segStart:w.segStart,segSide:w.segSide,minV:w.minV,maxV:w.maxV,maxAbsDelta:Math.abs(M)}})();else{const w=a(j.value,Math.abs(M),y,m,g);y=w.minV,m=w.maxV,g=w.maxAbsDelta}}h!==void 0&&o(f,h,u,p,y,m,g,l),t.push({trendDirection:l,start:c,end:u,segments:f}),s=u+1}return t}function gv(e){if(e===Ze.Up)return"Above";if(e===Ze.Down)return"Below"}function bv(e){if(e)return e==="Above"?"Below":"Above"}function Id(e,t){const n=t.strategy??bt.CrossingAfterFavourable,a=gv(t.metricImprovement),o=bv(a),s=[];for(const i of e){if(!a){if(n===bt.ExtremeFavourable||n===bt.CrossingAfterFavourable){const l=i.segments;if(l.length===0)continue;let c=l[0];for(const d of l)d.maxAbsDeltaFromMean>c.maxAbsDeltaFromMean&&(c=d);s.push(c)}continue}if(n===bt.FavourableSide){s.push(...i.segments.filter(l=>l.side===a));continue}if(n===bt.UnfavourableSide){s.push(...i.segments.filter(l=>l.side===o));continue}if(n===bt.CrossingAfterFavourable){const l=i.segments;let c;for(let d=0;d<l.length;d++){const u=l[d];if(u.side===a&&d>0&&l[d-1].side!==a){c=u;break}}if(!c){const d=l.filter(u=>u.side===a);d.length>0&&(c=d.reduce((u,f)=>f.end-f.start>u.end-u.start?f:u,d[0]))}c&&s.push(c);continue}if(n===bt.CrossingAfterUnfavourable){const l=i.segments;let c;for(let d=0;d<l.length;d++){const u=l[d];if(u.side===o&&d>0&&l[d-1].side!==o){c=u;break}}if(!c){const d=l.filter(u=>u.side===o);d.length>0&&(c=d.reduce((u,f)=>f.end-f.start>u.end-u.start?f:u,d[0]))}c&&s.push(c);continue}if(n===bt.ExtremeFavourable){const l=i.segments.filter(d=>d.side===a);if(l.length===0)continue;const c=l.reduce((d,u)=>u.maxAbsDeltaFromMean>d.maxAbsDeltaFromMean?u:d);s.push(c);continue}if(n===bt.ExtremeUnfavourable){const l=i.segments.filter(d=>d.side===o);if(l.length===0)continue;const c=l.reduce((d,u)=>u.maxAbsDeltaFromMean>d.maxAbsDeltaFromMean?u:d);s.push(c);continue}if(n===bt.FirstFavourable){const l=i.segments.find(c=>c.side===a);l&&s.push(l);continue}if(n===bt.FirstUnfavourable){const l=i.segments.find(c=>c.side===o);l&&s.push(l);continue}if(n===bt.LongestFavourable){const l=i.segments.filter(d=>d.side===a);if(l.length===0)continue;const c=l.reduce((d,u)=>u.end-u.start>d.end-d.start?u:d);s.push(c);continue}if(n===bt.LongestUnfavourable){const l=i.segments.filter(d=>d.side===o);if(l.length===0)continue;const c=l.reduce((d,u)=>u.end-u.start>d.end-d.start?u:d);s.push(c);continue}if(n===bt.LastFavourable){const l=i.segments.filter(c=>c.side===a);if(l.length===0)continue;s.push(l[l.length-1]);continue}if(n===bt.LastUnfavourable){const l=i.segments.filter(c=>c.side===o);if(l.length===0)continue;s.push(l[l.length-1]);continue}}return s}var rt=(e=>(e.Common="Common",e.Improvement="Improvement",e.Concern="Concern",e.NoJudgement="NoJudgement",e))(rt||{}),Hn=(e=>(e.Ungated="Ungated",e.Gated="Gated",e))(Hn||{});function yv(e){const t=!!(e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp),n=!!(e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown);return{upAny:t,downAny:n}}function fr(e,t){const n=t.metricImprovement,a=t.trendVisualMode??"Ungated",o=t.enableNeutralNoJudgement??!0;return e.map(s=>{if(!s||s.value==null||s.ghost)return"Common";const{upAny:i,downAny:l}=yv(s);if(i&&l)return"Improvement";switch(s.variationIcon){case Fe.ImprovementHigh:case Fe.ImprovementLow:return"Improvement";case Fe.ConcernHigh:case Fe.ConcernLow:return"Concern";case Fe.NeitherHigh:case Fe.NeitherLow:{if(a==="Ungated"&&n!==Ze.Neither){if(i&&!l)return n===Ze.Up?"Improvement":"Concern";if(l&&!i)return n===Ze.Down?"Improvement":"Concern"}return o?"NoJudgement":"Common"}default:return"Common"}})}function xv(e,t,n){const a=n?.mode??"Disabled";if(!e.length)return[];let o=fr(e,{metricImprovement:t,trendVisualMode:Hn.Ungated,enableNeutralNoJudgement:!0});if(a!=="RecalcCrossing"||t===Ze.Neither)return o;const s=Math.max(0,n?.preWindow??2),i=Math.max(0,n?.postWindow??3),l=n?.prePolarity??"Opposite",c=(f,h)=>{if(f<0||f>=o.length)return;const p=o[f];(p===rt.Common||p===rt.NoJudgement)&&(o[f]=h)},d=f=>{if(f==null)return null;const h=e.reduce((y,m)=>(m.partitionId===f&&typeof m.value=="number"&&!m.ghost&&y.push(m.value),y),[]);return h.length?h.reduce((y,m)=>y+m,0)/h.length:null},u=Array.isArray(n?.boundaryIndices)&&n.boundaryIndices.length?n.boundaryIndices.slice().filter(f=>Number.isFinite(f)):e.reduce((f,h,p)=>{if(p===0)return f;const y=e[p-1];return y&&h&&h.partitionId!==y.partitionId&&f.push(p),f},[]);for(const f of u){const h=e[f-1],p=e[f];if(!h||!p)continue;let y=f-1;for(;y-1>=0&&e[y-1]&&e[y-1].partitionId===h.partitionId;)y--;let m=f;for(;m+1<e.length&&e[m+1]&&e[m+1].partitionId===p.partitionId;)m++;let g=null;for(let _=f-1;_>=0;_--){const I=e[_];if(I.partitionId!==h.partitionId)break;if(typeof I.mean=="number"){g=I.mean;break}}let C=null;for(let _=f;_<e.length;_++){const I=e[_];if(I.partitionId!==p.partitionId)break;if(typeof I.mean=="number"){C=I.mean;break}}if(g==null&&(g=d(h.partitionId??null)),C==null&&(C=d(p.partitionId??null)),g==null||C==null)continue;const j=C-g,M=t===Ze.Up?j>0:j<0,N=M?rt.Improvement:rt.Concern,w=l==="Same"?N:M?rt.Concern:rt.Improvement;for(let _=1;_<=s;_++){const I=f-_;if(I<y)break;c(I,w)}for(let _=0;_<i;_++){const I=f+_;if(I>m)break;c(I,N)}}return o}function Dd(e){if(!e)return{};if(typeof e=="object"&&("minimumPoints"in e||"shiftPoints"in e||"trendPoints"in e))return e;const t=e,n={};if(t.thresholds){const a=t.thresholds;a.minimumPoints!=null&&(n.minimumPoints=a.minimumPoints),a.shiftPoints!=null&&(n.shiftPoints=a.shiftPoints),a.trendPoints!=null&&(n.trendPoints=a.trendPoints),a.excludeMovingRangeOutliers!=null&&(n.excludeMovingRangeOutliers=a.excludeMovingRangeOutliers)}if(t.eligibility&&t.eligibility.chartLevel!=null&&(n.chartLevelEligibility=t.eligibility.chartLevel),t.parity&&(t.parity.trendAcrossPartitions!=null&&(n.trendAcrossPartitions=t.parity.trendAcrossPartitions),t.parity.twoSigmaIncludeAboveThree!=null&&(n.twoSigmaIncludeAboveThree=t.parity.twoSigmaIncludeAboveThree),t.parity.enableFourOfFiveRule!=null&&(n.enableFourOfFiveRule=t.parity.enableFourOfFiveRule)),t.conflict&&(t.conflict.preferImprovementWhenConflict!=null&&(n.preferImprovementWhenConflict=t.conflict.preferImprovementWhenConflict),t.conflict.preferTrendWhenConflict!=null&&(n.preferTrendWhenConflict=t.conflict.preferTrendWhenConflict),t.conflict.strategy!=null&&(n.conflictStrategy=t.conflict.strategy),t.conflict.ruleHierarchy!=null&&(n.ruleHierarchy=t.conflict.ruleHierarchy),t.conflict.metricRuleOnTie!=null&&(n.metricConflictRule=t.conflict.metricRuleOnTie)),t.trend?.segmentation){const a=t.trend.segmentation;a.mode!=null&&(n.trendSegmentationMode=a.mode),a.favourableSegmentation!=null&&(n.trendFavourableSegmentation=a.favourableSegmentation),a.strategy!=null&&(n.trendSegmentationStrategy=a.strategy),a.dominatesHighlightedWindow!=null&&(n.trendDominatesHighlightedWindow=a.dominatesHighlightedWindow)}return n}function hr(e){const{chartType:t,metricImprovement:n,data:a}=e,o=Dd(e.settings),s={minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:Fn.Improvement,trendAcrossPartitions:!1,twoSigmaIncludeAboveThree:!1,enableFourOfFiveRule:!1,preferImprovementWhenConflict:!1,conflictStrategy:Pn.SqlPrimeThenRule,ruleHierarchy:void 0,chartLevelEligibility:!1,trendFavourableSegmentation:!1,trendSegmentationMode:en.Off,trendSegmentationStrategy:bt.CrossingAfterUnfavourable,trendDominatesHighlightedWindow:!1,...o},i=o?.trendSegmentationMode||(o?.trendFavourableSegmentation===!0?en.Always:o?.trendFavourableSegmentation===!1?en.Off:s.trendSegmentationMode),l=a.map((m,g)=>({rowId:g+1,x:m.x,value:Oe(m.value)?m.value:null,ghost:!!m.ghost,baseline:!!m.baseline,target:Oe(m.target)?m.target:null})),c=[];let d=[];for(const m of l)m.baseline&&d.length&&(c.push(d),d=[]),d.push(m);d.length&&c.push(d);const u=[],f=(s.trendFavourableSegmentation||i!==en.Off)&&!s.preferImprovementWhenConflict,h=l.filter(m=>!m.ghost&&Oe(m.value)).length,p=!!s.chartLevelEligibility&&h>=s.minimumPoints;let y=0;for(const m of c){y++;const g=m.map(w=>w.value),C=m.map(w=>w.ghost),j=uv(t,g,C,!!s.excludeMovingRangeOutliers),M=m.map((w,_)=>{const I=!w.ghost&&Oe(w.value)?g.slice(0,_+1).filter((x,S)=>!C[S]&&Oe(x)).length:0,v=p?!0:I>=s.minimumPoints;return{rowId:w.rowId,x:w.x,value:Oe(w.value)?w.value:null,ghost:w.ghost,partitionId:y,pointRank:I,mean:(v||p)&&Oe(j.mean)?j.mean:null,upperProcessLimit:v||p?j.upperProcessLimit:null,lowerProcessLimit:v||p?j.lowerProcessLimit:null,upperTwoSigma:v||p?j.upperTwoSigma:null,lowerTwoSigma:v||p?j.lowerTwoSigma:null,upperOneSigma:v||p?j.upperOneSigma:null,lowerOneSigma:v||p?j.lowerOneSigma:null,singlePointUp:!1,singlePointDown:!1,twoSigmaUp:!1,twoSigmaDown:!1,fourOfFiveUp:!1,fourOfFiveDown:!1,shiftUp:!1,shiftDown:!1,trendUp:!1,trendDown:!1,specialCauseImprovementValue:null,specialCauseConcernValue:null,variationIcon:Fe.CommonCause}});for(const w of M)w.ghost||!Oe(w.value)||w.mean===null||(Oe(w.upperProcessLimit)&&w.value>w.upperProcessLimit&&(w.singlePointUp=!0),Oe(w.lowerProcessLimit)&&w.value<w.lowerProcessLimit&&(w.singlePointDown=!0));fv(M,{shiftPoints:s.shiftPoints,trendPoints:s.trendPoints,twoSigmaIncludeAboveThree:!!s.twoSigmaIncludeAboveThree,enableFourOfFiveRule:!!s.enableFourOfFiveRule}),f&&(w=>{const _=w.some(A=>(A.singlePointUp||A.twoSigmaUp||A.shiftUp||A.trendUp)&&(A.singlePointDown||A.twoSigmaDown||A.shiftDown||A.trendDown));if(i===en.Off||i===en.AutoWhenConflict&&!_)return;const I=Md(w),v=Id(I,{metricImprovement:n,strategy:s.trendSegmentationStrategy}),x=new Set,S=new Set;for(const A of v)for(let D=A.start;D<=A.end;D++)A.trendDirection===Ms.Up?x.add(D):S.add(D);w.forEach((A,D)=>{A.trendUp=x.has(D)?A.trendUp:!1,A.trendDown=S.has(D)?A.trendDown:!1,s.trendDominatesHighlightedWindow&&(x.has(D)?(A.singlePointDown=!1,A.twoSigmaDown=!1,A.shiftDown=!1):S.has(D)&&(A.singlePointUp=!1,A.twoSigmaUp=!1,A.shiftUp=!1))})})(M);for(const w of M){if(w.ghost||!Oe(w.value)||w.mean===null){u.push(w);continue}const{aligned:_,opposite:I}=Nd(w,n);if(w.specialCauseImprovementValue=_?w.value:null,w.specialCauseConcernValue=I?w.value:null,n===Ze.Neither){const v=w.singlePointUp||w.twoSigmaUp||w.shiftUp||w.trendUp,x=w.singlePointDown||w.twoSigmaDown||w.shiftDown||w.trendDown;w.variationIcon=v?Fe.NeitherHigh:x?Fe.NeitherLow:Fe.CommonCause}else jd(w,n,s.metricConflictRule,s.preferImprovementWhenConflict===!0,s.conflictStrategy,s.ruleHierarchy,s.preferTrendWhenConflict===!0);u.push(w)}}if(s.trendAcrossPartitions){const m=u.map((g,C)=>({idx:C,r:g})).filter(({r:g})=>!g.ghost&&Oe(g.value));if(m.length>=s.trendPoints)for(let g=0;g<=m.length-s.trendPoints;g++){const C=m.slice(g,g+s.trendPoints).map(w=>w.idx),j=C.map(w=>u[w]);if(!j.every(w=>Oe(w.value)))continue;let M=!0,N=!0;for(let w=1;w<j.length&&(j[w].value>j[w-1].value||(M=!1),j[w].value<j[w-1].value||(N=!1),!(!M&&!N));w++);M&&C.forEach(w=>u[w].trendUp=!0),N&&C.forEach(w=>u[w].trendDown=!0)}}if(s.trendAcrossPartitions){if(f){const m=u.some(g=>(g.singlePointUp||g.twoSigmaUp||g.shiftUp||g.trendUp)&&(g.singlePointDown||g.twoSigmaDown||g.shiftDown||g.trendDown));if(i===en.Always||i===en.AutoWhenConflict&&m){const g=Md(u),C=Id(g,{metricImprovement:n,strategy:s.trendSegmentationStrategy}),j=new Set,M=new Set;for(const N of C)for(let w=N.start;w<=N.end;w++)N.trendDirection===Ms.Up?j.add(w):M.add(w);u.forEach((N,w)=>{N.trendUp=j.has(w)?N.trendUp:!1,N.trendDown=M.has(w)?N.trendDown:!1,s.trendDominatesHighlightedWindow&&(j.has(w)?(N.singlePointDown=!1,N.twoSigmaDown=!1,N.shiftDown=!1):M.has(w)&&(N.singlePointUp=!1,N.twoSigmaUp=!1,N.shiftUp=!1))})}}for(const m of u){if(m.ghost||!Oe(m.value)||m.mean===null||n===Ze.Neither)continue;const{aligned:g,opposite:C}=Nd(m,n);m.specialCauseImprovementValue=g?m.value:null,m.specialCauseConcernValue=C?m.value:null,jd(m,n,s.metricConflictRule,s.preferImprovementWhenConflict===!0,s.conflictStrategy,s.ruleHierarchy,s.preferTrendWhenConflict===!0)}}return{rows:u}}function Is(e,t){const n=hr(e),a=fr(n.rows,{metricImprovement:e.metricImprovement,trendVisualMode:t?.trendVisualMode??Hn.Ungated,enableNeutralNoJudgement:t?.enableNeutralNoJudgement??!0}),o=t?.boundaryWindows;if(!o||o.mode!=="RecalcCrossing")return{rows:n.rows,visuals:a};const s=o.directionOverride??e.metricImprovement,i=xv(n.rows,s,o),l=a.map((c,d)=>{const u=i[d];if(c===rt.Common||c===rt.NoJudgement){if(u===rt.Improvement)return rt.Improvement;if(u===rt.Concern)return rt.Concern}return c});return{rows:n.rows,visuals:l}}var Td=(e=>(e.None="none",e.RecalcCrossingShift="recalc-crossing-shift",e.RecalcCrossingTrend="recalc-crossing-trend",e.RecalcCrossingTwoSigma="recalc-crossing-two-sigma",e.RecalculationsRecalculated="recalculations-recalculated",e.BaselinesRecalculated="baselines-recalculated",e))(Td||{});function vv(e,t,n){const a=n?.trendVisualMode??Hn.Ungated,o=n?.enableNeutralNoJudgement??!0,s=Array.isArray(e.data)?e.data.map((f,h)=>f?.baseline?h:-1).filter(f=>f>=0):[];let i;switch(t){case"recalc-crossing-shift":{i={mode:"RecalcCrossing",preWindow:2,postWindow:4,prePolarity:"Same",boundaryIndices:s};break}case"recalc-crossing-trend":{i={mode:"RecalcCrossing",preWindow:1,postWindow:5,prePolarity:"Same",boundaryIndices:s};break}case"recalc-crossing-two-sigma":{i={mode:"RecalcCrossing",preWindow:1,postWindow:1,prePolarity:"Same",boundaryIndices:s};break}case"baselines-recalculated":i={mode:"RecalcCrossing",preWindow:0,postWindow:0,prePolarity:"Same",directionOverride:e.metricImprovement,boundaryIndices:s};break;case"recalculations-recalculated":case"none":default:i=void 0}const{rows:l,visuals:c}=Is(e,{trendVisualMode:a,enableNeutralNoJudgement:o,boundaryWindows:i});let d=c.slice(),u=s.length?s[0]:-1;if(u<0){for(let f=1;f<l.length;f++)if(l[f].partitionId!==l[f-1].partitionId){u=f;break}}return(t==="recalculations-recalculated"||t==="baselines-recalculated")&&u>0&&(d[u-1]=rt.Common),{rows:l,visuals:d}}const Ld=Object.freeze({minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:Fn.Improvement,trendAcrossPartitions:!0,twoSigmaIncludeAboveThree:!0,chartLevelEligibility:!0});function wv(e){return{...Ld,...e??{}}}var pt=(e=>(e.Concern="concern",e.Improvement="improvement",e.NoJudgement="noJudgement",e.Common="common",e))(pt||{}),vn=(e=>(e.Classic="classic",e.Triangle="triangle",e.TriangleWithRun="triangleWithRun",e))(vn||{}),pr=(e=>(e.Direction="direction",e.Polarity="polarity",e))(pr||{});const Ds=e=>{const t=()=>{globalThis.__spcIconDeprecationEmitted||(console.warn("[SPCVariationIcon] Deprecated payload shape detected. Migrate to { variationIcon, improvementDirection, specialCauseNeutral?, trend? }."),globalThis.__spcIconDeprecationEmitted=!0)};if(e.variationIcon!==void 0){const i=e;let l;i.improvementDirection!==void 0?l=i.improvementDirection===Ze.Up?ut.HigherIsBetter:i.improvementDirection===Ze.Down?ut.LowerIsBetter:ut.ContextDependent:i.polarity&&(l=i.polarity);let c;const d=i.variationIcon;if(d===Ye.Improvement||d===Ye.Concern||d===Ye.Neither||d===Ye.Suppressed)d===Ye.Improvement?c=Be.SpecialCauseImproving:d===Ye.Concern?c=Be.SpecialCauseDeteriorating:d===Ye.Neither?c=Be.CommonCause:c=Be.SpecialCauseNoJudgement;else switch(i.variationIcon){case Fe.ImprovementHigh:case Fe.ImprovementLow:c=Be.SpecialCauseImproving;break;case Fe.ConcernHigh:case Fe.ConcernLow:c=Be.SpecialCauseDeteriorating;break;case Fe.NeitherHigh:case Fe.NeitherLow:c=i.specialCauseNeutral?Be.SpecialCauseNoJudgement:Be.CommonCause;break;case Fe.CommonCause:c=Be.CommonCause;break;default:c=Be.SpecialCauseNoJudgement;break}let u=i.trend;return u||(c===Be.SpecialCauseImproving?u=l===ut.LowerIsBetter?We.Lower:We.Higher:c===Be.SpecialCauseDeteriorating?u=l===ut.LowerIsBetter?We.Higher:We.Lower:c===Be.SpecialCauseNoJudgement?i.highSideSignal&&!i.lowSideSignal?u=We.Higher:i.lowSideSignal&&!i.highSideSignal?u=We.Lower:u=We.Higher:u=We.Higher),{state:c,direction:u,polarity:l??ut.ContextDependent}}if(e.state!==void 0){t();const i=e;let l=i.trend;return!l&&(i.state===Be.SpecialCauseImproving||i.state===Be.SpecialCauseDeteriorating)&&i.polarity&&(i.state===Be.SpecialCauseImproving?l=i.polarity===ut.LowerIsBetter?We.Lower:We.Higher:l=i.polarity===ut.LowerIsBetter?We.Higher:We.Lower),l||(i.state===Be.SpecialCauseImproving?l=We.Higher:i.state===Be.SpecialCauseDeteriorating?l=We.Lower:l=We.Higher),{state:i.state,direction:l,polarity:i.polarity??ut.ContextDependent}}const n=e;t();const o={[St.Improving]:Be.SpecialCauseImproving,[St.Deteriorating]:Be.SpecialCauseDeteriorating,[St.No_Judgement]:Be.SpecialCauseNoJudgement,[St.None]:Be.CommonCause}[n.judgement];let s;return n.judgement===St.Improving?s=n.polarity===ut.LowerIsBetter?We.Lower:We.Higher:n.judgement===St.Deteriorating?s=n.polarity===ut.LowerIsBetter?We.Higher:We.Lower:s=n.trend??We.Higher,{state:o,direction:s,polarity:n.polarity}};function Ad(e,t){const{state:n,direction:a,polarity:o}=Ds(e),s=Ns(n),i=a===We.Higher?"above":"below",l=a===We.Higher?"upwards":"downwards",c=(()=>{switch(o){case ut.HigherIsBetter:return"For this measure, higher values are better.";case ut.LowerIsBetter:return"For this measure, lower values are better.";default:return"Direction of improvement is context dependent."}})();return[(()=>{switch(s){case St.Improving:return`Special cause improvement: recent data show a sustained run ${i} the mean (unlikely due to random variation).`;case St.Deteriorating:return`Special cause deterioration: recent data show a sustained run ${i} the mean (unlikely due to random variation).`;case St.No_Judgement:return`Special cause detected (no value judgement): recent data show a change in level, trending ${l}.`;case St.None:default:return"Common cause variation: points vary randomly around the mean; no special cause detected."}})(),c,null,null,null,null,null].filter(Boolean).join(" ")}const Ts=(e,t,n,a,o,s)=>r.jsxs("defs",{children:[a&&r.jsxs("filter",{id:t,filterUnits:"objectBoundingBox",children:[r.jsx("feGaussianBlur",{stdDeviation:"3"}),r.jsx("feOffset",{dx:"0",dy:"15",result:"blur"}),r.jsx("feFlood",{floodColor:"rgb(150,150,150)",floodOpacity:"1"}),r.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),r.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),o&&r.jsx("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:s.map(i=>r.jsx("stop",{offset:i.offset,stopColor:e,stopOpacity:parseFloat(i.opacity)},i.offset))})]}),Ls=({data:e,precomputed:t,improvementDirection:n,size:a=44,ariaLabel:o,showLetter:s=!0,dropShadow:i=!0,gradientWash:l=!1,variant:c=vn.Classic,runLength:d=0,letterMode:u=pr.Polarity,letterOverride:f,...h})=>{const p=k.useId(),y=k.useId(),{start:m,mid:g,end:C,triStart:j,triMid:M,triEnd:N}=Ea(),{state:w,direction:_,polarity:I,ariaInput:v}=k.useMemo(()=>{if(t&&t.lastVariationIcon!==void 0){const Y={variationIcon:t.lastVariationIcon,improvementDirection:n??Ze.Neither,specialCauseNeutral:t.latestState===Be.SpecialCauseNoJudgement},{state:P,direction:W,polarity:H}=Ds(Y);return{state:P,direction:W,polarity:H,ariaInput:Y}}const{state:R,direction:B,polarity:E}=Ds(e);return{state:R,direction:B,polarity:E,ariaInput:e}},[e,t,n]),x=k.useMemo(()=>md(w),[w]),S=k.useMemo(()=>Ns(w),[w]),A=S===St.Improving||S===St.Deteriorating;let D="";s&&A&&(u===pr.Polarity?I===ut.HigherIsBetter?D="H":I===ut.LowerIsBetter?D="L":D="":D=_===We.Higher?"H":"L"),f!==void 0&&(D=f);const F=w!==Be.CommonCause,T=w===Be.SpecialCauseNoJudgement,L=yt("common-cause","#A6A6A6"),$=F?x.hex:L,O=k.useMemo(()=>lv(w,_),[w,_]),J=o||`${x.label}${D?_===We.Higher?" â€“ Higher":" â€“ Lower":""}`,ee=Ad(v);if(c===vn.TriangleWithRun){const Y=[[150,90],[100,190],[200,190]],P=[[150,140+100/2],[150-100/2,140-100/2],[150+100/2,140-100/2]];let W=null;w===Be.SpecialCauseImproving||w===Be.SpecialCauseDeteriorating?W=r.jsx("polygon",{points:(_===We.Higher?Y:P).map(me=>me.join(",")).join(" "),fill:x.hex,stroke:x.hex,strokeWidth:6,transform:_===We.Higher?"translate(0, -8)":"translate(0, 15)"}):w===Be.SpecialCauseNoJudgement&&(W=r.jsx("polygon",{points:_===We.Higher?Y.map(me=>me.join(",")).join(" "):P.map(me=>me.join(",")).join(" "),fill:x.hex,stroke:x.hex,strokeWidth:6,transform:_===We.Higher?"translate(0,-7)":"translate(0,14)"}));const H=Math.max(0,Math.min(5,Math.floor(d||0))),Q=w===Be.CommonCause?160:_===We.Higher?220:70,q=10,te=26,fe=150-2*te,Z=w===Be.CommonCause?L:xd(w),se=Array.from({length:5}).map((me,De)=>{const Le=(w===Be.SpecialCauseImproving||w===Be.SpecialCauseDeteriorating)&&De>=5-H?Z:L;return r.jsx("circle",{cx:fe+De*te,cy:Q,r:q,fill:Le,stroke:Le,strokeWidth:1},De)}),de=Ts(x.hex,p,y,i,l,[{offset:"0%",opacity:j},{offset:"75%",opacity:M},{offset:"100%",opacity:N}]),ve=w===Be.CommonCause||_===We.Higher?"translate(0,-10)":"translate(0,25)";return r.jsxs("svg",{width:a,height:a,viewBox:"0 0 300 300",role:"img","aria-label":J,"aria-description":ee,...h,children:[de,r.jsx("circle",{stroke:"none",fill:l?`url(#${y})`:"#ffffff",...i?{filter:`url(#${p})`}:{},cx:"150",cy:"150",r:"120"}),r.jsx("circle",{stroke:x.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),r.jsxs("g",{transform:ve,children:[W,D&&r.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:64,x:"150",y:_===We.Higher?155:145,textAnchor:"middle",dominantBaseline:"middle",children:D}),se]})]})}if(c===vn.Triangle){const Y=[[150,75],[75,225],[225,225]],P=[[150,150+150/2],[150-150/2,150-150/2],[150+150/2,150-150/2]],W=[[150-150/2,150+150/2],[150+150/2,150+150/2]];let H=null;w===Be.SpecialCauseImproving||w===Be.SpecialCauseDeteriorating?H=r.jsx("polygon",{points:(_===We.Higher?Y:P).map(q=>q.join(",")).join(" "),fill:x.hex,stroke:x.hex,strokeWidth:8,transform:_===We.Higher?"translate(0, -10)":"translate(0, 10)"}):w===Be.SpecialCauseNoJudgement?H=r.jsx("polygon",{points:_===We.Higher?Y.map(q=>q.join(",")).join(" "):P.map(q=>q.join(",")).join(" "),fill:x.hex,stroke:x.hex,strokeWidth:8,transform:_===We.Higher?"translate(0, -15)":"translate(0, 15)"}):w===Be.CommonCause&&(H=r.jsx("line",{x1:W[0][0],y1:W[0][1],x2:W[1][0],y2:W[1][1],stroke:x.hex,strokeWidth:32,strokeLinecap:"square",transform:"translate(0, -75)"}));const Q=Ts(x.hex,p,y,i,l,[{offset:"0%",opacity:j},{offset:"65%",opacity:M},{offset:"100%",opacity:N}]);return r.jsxs("svg",{width:a,height:a,viewBox:"0 0 300 300",role:"img","aria-label":J,"aria-description":ee,...h,children:[Q,r.jsx("circle",{stroke:"none",fill:l?`url(#${y})`:"#ffffff",...i?{filter:`url(#${p})`}:{},cx:"150",cy:"150",r:"120"}),r.jsx("circle",{stroke:x.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),H,D&&(w===Be.SpecialCauseImproving||w===Be.SpecialCauseDeteriorating)&&r.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:100,x:"150",y:_===We.Higher?"170":"140",textAnchor:"middle",dominantBaseline:"middle",children:D})]})}const ae=Ts(x.hex,p,y,i,l,[{offset:"0%",opacity:m},{offset:"65%",opacity:g},{offset:"100%",opacity:C}]);return r.jsxs("svg",{width:a,height:a,viewBox:"0 0 300 300",role:"img","aria-label":J,"aria-description":ee,...h,children:[ae,r.jsx("circle",{stroke:"none",fill:l?`url(#${y})`:"#ffffff",...i?{filter:`url(#${p})`}:{},cx:"150",cy:"150",r:"120"}),r.jsx("circle",{stroke:x.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),D&&r.jsx("text",{fill:x.hex,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,transform:"translate(86.67, 54) scale(0.5, 0.5)",textAnchor:"end",children:r.jsx("tspan",{x:"120",y:_===We.Lower?"340":"155",children:D})}),T?r.jsx("path",{"aria-hidden":"true",fillRule:"evenodd",stroke:"none",fill:x.hex,..._===We.Lower?{transform:"rotate(90 150 150)"}:{transform:"translate(-5 0) rotate(0 150 150)"},d:"M 90.26,185.42 L 149.31,126.37 127.44,104.51 209.81,90.66 195.96,173.02 174.09,151.16 115.05,210.2 90.26,185.42 Z M 90.26,185.42"}):r.jsxs(r.Fragment,{children:[O.length===5&&r.jsx("path",{"aria-hidden":"true",fill:"none",stroke:L,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9,d:`M ${O.map(R=>`${R.cx} ${R.cy}`).join(" L ")}`}),O.map((R,B)=>{const Y=B>=O.length-2&&F?$:L,P=Y;return r.jsx("circle",{stroke:P,strokeWidth:2,strokeMiterlimit:10,fill:Y,cx:R.cx,cy:R.cy,r:16},B)})]})]})};Ls.displayName="SPCVariationIcon";const Sv={[lt.Xs]:{height:24,pointR:2,stroke:1},[lt.Sm]:{height:32,pointR:3,stroke:1},[lt.Md]:{height:44,pointR:4,stroke:1},[lt.Lg]:{height:56,pointR:5,stroke:1},[lt.Xl]:{height:72,pointR:6,stroke:1},[lt.Full]:{height:44,pointR:2,stroke:1}};function _v(e,t){return!t||e.length<=t?e:e.slice(e.length-t)}function kv(e){const t=e.filter(i=>typeof i.value=="number");if(!t.length)return{mean:null,latestValue:null,latestIndex:null};const n=t.reduce((i,l)=>i+l.value,0)/t.length,a=[...e].reverse().findIndex(i=>i.value!=null),o=a>=0?e.length-1-a:null,s=o!=null?e[o].value:null;return{mean:n,latestValue:s,latestIndex:o}}const Cv=e=>xd(e),As=({data:e,windowSize:t,minPointsForSignals:n=13,showMean:a=!0,showLimits:o=!0,showLimitBand:s=!0,showInnerBands:i=!1,showLatestMarker:l=!0,showStateGlyph:c=!0,variationState:d,metricImprovement:u,gradientWash:f=!1,size:h=lt.Sm,ariaLabel:p,className:y,onPointClick:m,maxPoints:g,thinningStrategy:C="stride",colorPointsBySignal:j=!0,centerLine:M,controlLimits:N,sigmaBands:w,pointSignals:_,pointNeutralSpecialCause:I,visualCategories:v})=>{const x=u,S=k.useMemo(()=>_v(e,t),[e,t]),A=k.useMemo(()=>kv(S),[S]),D=(()=>{if(typeof h=="string")switch(h){case"xs":return lt.Xs;case"sm":return lt.Sm;case"md":return lt.Md;case"lg":return lt.Lg;case"xl":return lt.Xl;case"full":return lt.Full;default:return lt.Sm}return h??lt.Sm})(),F=Sv[D],T=Math.max(S.length*6,60),L=T,$=D===lt.Full?"100%":T,O=F.height,J=k.useMemo(()=>{if(D===lt.Full)return{width:"100%",height:"auto",aspectRatio:`${L} / ${O}`,display:"block"}},[D,L,O]),ee=Math.max(6,F.pointR+3),ae=Math.max(4,F.pointR+3),R=k.useMemo(()=>(e?.length??0)-(S?.length??0),[e?.length,S?.length]),B=M??A.mean??null,E=k.useMemo(()=>{if(!o)return null;if(N)return N;const _e=S.filter(pe=>typeof pe.value=="number");if(!_e.length||B==null)return null;const z=_e.map(pe=>pe.value),K=Math.min(...z),le=Math.max(...z);return{lower:K,upper:le}},[o,N?.lower,N?.upper,S,B]),P=k.useMemo(()=>({state:d??Be.CommonCause,firedRules:[],mean:B??null,stdDev:null,side:A.latestValue!=null&&B!=null?A.latestValue>B?"above":"below":void 0}),[d,B,A.latestValue]).state,W=Cv(P),H=_e=>{const z=S.filter(ge=>ge.value!=null);if(!z.length)return O/2;const K=z.map(ge=>ge.value);E&&(E.lower!=null&&K.push(E.lower),E.upper!=null&&K.push(E.upper));const le=Math.min(...K),pe=Math.max(...K);return le===pe?O/2:O-(_e-le)/(pe-le)*(O-ae*2)-ae},Q=k.useMemo(()=>{if(!g||S.length<=g)return S.map((U,V)=>V);if(C==="stride"){const U=Math.max(2,g),V=(S.length-1)/(U-1),ie=new Set;for(let ne=0;ne<U;ne++)ie.add(Math.round(ne*V));return ie.add(S.length-1),Array.from(ie).sort((ne,oe)=>ne-oe)}const _e=S.map((U,V)=>({i:V,v:U.value}));function z(U,V,ie){const ne=U.i,oe=U.v??0,ue=V.i,he=V.v??0,we=ie.i,Ne=ie.v??0,ze=Math.abs((Ne-he)*ne-(we-ue)*oe+we*he-Ne*ue),Ve=Math.hypot(Ne-he,we-ue);return Ve===0?0:ze/Ve}function K(U,V){if(U.length<=2)return U;let ie=-1,ne=-1;for(let oe=1;oe<U.length-1;oe++){const ue=z(U[oe],U[0],U[U.length-1]);ue>ie&&(ie=ue,ne=oe)}if(ie>V){const oe=K(U.slice(0,ne+1),V),ue=K(U.slice(ne),V);return[...oe.slice(0,-1),...ue]}return[U[0],U[U.length-1]]}let le=.1,pe=_e;for(let U=0;U<8&&(pe=K(_e,le),!(pe.length<=g));U++)le*=1.6;const ge=new Set(pe.map(U=>U.i));return ge.add(0),ge.add(S.length-1),Array.from(ge).sort((U,V)=>U-V)},[S,g,C]),q=k.useMemo(()=>Q.map(_e=>S[_e]),[Q,S]),te=k.useMemo(()=>Math.max(1,L-ee*2),[L,ee]),fe=k.useMemo(()=>{const _e=Math.max(1,q.length-1);return z=>z/_e*te+ee},[q.length,te,ee]),Z=k.useMemo(()=>{let _e="";return q.forEach((z,K)=>{if(z.value==null)return;const le=H(z.value),pe=fe(K);_e+=_e?` L ${pe} ${le}`:`M ${pe} ${le}`}),_e},[q,fe]),se=A.latestIndex??-1,de=E,ve=Ea(),me=k.useMemo(()=>`spc-spark-wash-${Math.random().toString(36).slice(2)}`,[S.length,f]),De=S.length>=(n||0),Ge=p||"SPC sparkline",Le=(()=>{if(!P)return;const _e=x===Ze.Up?ut.HigherIsBetter:x===Ze.Down?ut.LowerIsBetter:ut.ContextDependent,z={variationIcon:P===Be.SpecialCauseImproving?Ye.Improvement:P===Be.SpecialCauseDeteriorating?Ye.Concern:P===Be.SpecialCauseNoJudgement?Ye.Suppressed:Ye.Neither,trend:x===Ze.Up?We.Higher:We.Lower,polarity:_e};try{return Ad(z)}catch{return}})(),Ae=k.useMemo(()=>{if(!De)return 10;const _e=[...S].reverse().filter(K=>K.value!=null).slice(0,6).map(K=>H(K.value));return _e.length&&_e.reduce((K,le)=>K+le,0)/_e.length<O/2?O:10},[S,De,O]);return r.jsxs("svg",{role:"img","aria-label":Ge,"aria-description":Le,width:D===lt.Full?void 0:$,height:D===lt.Full?void 0:O,style:J,className:y,viewBox:`0 0 ${L} ${O}`,children:[f&&r.jsxs(r.Fragment,{children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:me,x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:W,stopOpacity:Number(ve.start)}),r.jsx("stop",{offset:"60%",stopColor:W,stopOpacity:Number(ve.mid)}),r.jsx("stop",{offset:"100%",stopColor:W,stopOpacity:Number(ve.end)})]})}),r.jsx("rect",{x:0,y:0,width:L,height:O,fill:`url(#${me})`})]}),de&&de.lower!=null&&de.upper!=null&&r.jsxs(r.Fragment,{children:[s&&r.jsx("rect",{x:0,y:Math.min(H(de.upper),H(de.lower)),width:L,height:Math.abs(H(de.upper)-H(de.lower)),fill:W,fillOpacity:.08}),r.jsx("line",{x1:0,x2:L,y1:H(de.lower),y2:H(de.lower),stroke:W,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),r.jsx("line",{x1:0,x2:L,y1:H(de.upper),y2:H(de.upper),stroke:W,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),w&&i&&r.jsxs(r.Fragment,{children:[w.lowerTwo!=null&&r.jsx("line",{x1:0,x2:L,y1:H(w.lowerTwo),y2:H(w.lowerTwo),stroke:W,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1}),w.lowerOne!=null&&r.jsx("line",{x1:0,x2:L,y1:H(w.lowerOne),y2:H(w.lowerOne),stroke:W,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),w.upperOne!=null&&r.jsx("line",{x1:0,x2:L,y1:H(w.upperOne),y2:H(w.upperOne),stroke:W,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),w.upperTwo!=null&&r.jsx("line",{x1:0,x2:L,y1:H(w.upperTwo),y2:H(w.upperTwo),stroke:W,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1})]})]}),a&&B!=null&&r.jsx("line",{x1:0,x2:L,y1:H(B),y2:H(B),stroke:yn(),strokeWidth:1,strokeDasharray:"2,2"}),r.jsx("path",{d:Z,fill:"none",stroke:yn(),strokeWidth:F.stroke,strokeLinecap:"round"}),Q.map((_e,z)=>{const K=S[_e];if(!K||K.value==null)return null;const le=H(K.value),pe=fe(z),U=(_e===se&&l?F.pointR+1:F.pointR)-.5;let V=yn();if(j){const ie=v?.[R+_e];if(ie!=null)ie===rt.Improvement?V=Pa(Ye.Improvement):ie===rt.Concern?V=Pa(Ye.Concern):ie===rt.NoJudgement?V=yt("no-judgement","#490092"):V=yn();else{const ne=_?.[R+_e];ne===Ye.Improvement||ne===Ye.Concern?V=Pa(ne):V=I?.[R+_e]?yt("no-judgement","#490092"):yn()}}return r.jsx("circle",{cx:pe,cy:le,r:U,fill:V,stroke:"none",strokeWidth:0,onClick:m?()=>m(_e,K):void 0,style:m?{cursor:"pointer"}:void 0,"data-index":_e,"data-signal-colour":j?V:void 0},_e)}),c&&De&&P&&P!==Be.CommonCause&&x&&r.jsx("text",{x:L-4,y:Ae,textAnchor:"end",fontSize:12,fontWeight:"bold",fill:W,"data-glyph-pos":Ae<O/2?"top":"bottom",children:x===Ze.Up?"H":"L"})]})};As.displayName="SPCSpark";function za(e){switch(e){case Fe.ImprovementHigh:case Fe.ImprovementLow:return Be.SpecialCauseImproving;case Fe.ConcernHigh:case Fe.ConcernLow:return Be.SpecialCauseDeteriorating;case Fe.NeitherHigh:case Fe.NeitherLow:return Be.SpecialCauseNoJudgement;case Fe.CommonCause:return Be.CommonCause;default:return null}}function Ed(e){return e===Fe.ImprovementHigh||e===Fe.ImprovementLow||e===Fe.ConcernHigh||e===Fe.ConcernLow||e===Fe.NeitherHigh||e===Fe.NeitherLow}function Nv({warnings:e,show:t,formatWarningCategory:n,formatWarningCode:a}){const[o,s]=X.useState(""),i=X.useRef("");return X.useEffect(()=>{if(!t){i.current!==""&&(i.current="",s(""));return}const l=e.length;if(!l){const f="Diagnostics: no warnings.";f!==i.current&&(i.current=f,s(f));return}const c={error:e.filter(f=>f.severity===$t.Error).length,warning:e.filter(f=>f.severity===$t.Warning).length,info:e.filter(f=>f.severity===$t.Info).length},d=[];c.error&&d.push(`${c.error} error${c.error===1?"":"s"}`),c.warning&&d.push(`${c.warning} warning${c.warning===1?"":"s"}`),c.info&&d.push(`${c.info} info`);const u=`Diagnostics updated: ${l} warning${l===1?"":"s"} (${d.join(", ")}).`;u!==i.current&&(i.current=u,s(u))},[t,e]),t?r.jsxs(r.Fragment,{children:[o&&r.jsx("div",{"data-testid":"spc-diagnostics-live","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:0,overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",border:0},children:o}),e.length>0&&r.jsxs("div",{className:"fdp-spc-chart__warnings",role:"region","aria-label":"SPC diagnostics",children:[r.jsx("p",{className:"fdp-spc-chart__warnings-heading",children:"Diagnostics"}),r.jsx(Tt,{firstCellIsHeader:!1,panel:!1,responsive:!1,head:[{text:"Severity"},{text:"Category"},{text:"Code"},{text:"Details"}],rows:e.map(l=>{let c="grey";return l.severity===$t.Error?c="red":l.severity===$t.Warning?c="orange":l.severity===$t.Info&&(c="blue"),[{node:r.jsx(nt,{color:c,text:(l.severity?String(l.severity):"Info").replace(/^[a-z]/,d=>d.toUpperCase())}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--severity"},{node:l.category?r.jsx(nt,{color:"purple",text:n(l.category)}):r.jsx("span",{className:"fdp-spc-chart__warning-empty",children:"â€“"}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--category"},{node:r.jsx(nt,{color:"grey",text:a(l.code)}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--code"},{node:r.jsxs("div",{className:"fdp-spc-chart__warning-message",children:[r.jsx("span",{children:l.message}),l.context&&Object.keys(l.context).length>0&&r.jsxs("details",{className:"fdp-spc-chart__warning-context",style:{marginTop:4},children:[r.jsx("summary",{children:"context"}),r.jsx("pre",{children:JSON.stringify(l.context,null,2)})]})]}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--message"}]}),classes:"fdp-spc-chart__warnings-table-wrapper",tableClasses:"fdp-spc-chart__warnings-table"})]})]}):null}function jv({variationNode:e,assuranceNode:t,show:n}){return n?r.jsxs("div",{className:"fdp-spc-chart__top-row",style:{display:"flex",justifyContent:"flex-end",marginBottom:4},children:[e,t]}):null}const Es=({status:e,size:t=44,ariaLabel:n,dropShadow:a=!0,colourOverride:o,gradientWash:s=!1,letterOverride:i,showTrendLines:l=!0,...c})=>{const d=k.useId(),u=k.useId(),{start:f,mid:h,end:p}=Ea(),y=o||ov[e],m=(i||sv[e]).slice(0,2),g=n||`Assurance ${e}`;return r.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":g,...c,children:[r.jsxs("defs",{children:[a&&r.jsxs("filter",{id:d,filterUnits:"objectBoundingBox",children:[r.jsx("feGaussianBlur",{stdDeviation:"3"}),r.jsx("feOffset",{dx:"-1",dy:"15",result:"blur"}),r.jsx("feFlood",{floodColor:"rgb(166,166,166)",floodOpacity:"1"}),r.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),r.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),s&&r.jsxs("linearGradient",{id:u,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:y,stopOpacity:parseFloat(f)}),r.jsx("stop",{offset:"65%",stopColor:y,stopOpacity:parseFloat(h)}),r.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:parseFloat(p)})]})]}),r.jsx("circle",{stroke:"none",fill:s?`url(#${u})`:"#ffffff",...a?{filter:`url(#${d})`}:{},cx:"150",cy:"150",r:"120"}),r.jsx("text",{fill:y,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,x:0,y:0,transform:"translate(121.01, 32) scale(0.5, 0.5)",textAnchor:"middle",children:r.jsx("tspan",{x:60,y:184,children:m})}),l&&r.jsxs(r.Fragment,{children:[e===bn.Fail?r.jsx("path",{id:"fail-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 33,143 L 268,143"}):e===bn.Uncertain?r.jsx("path",{id:"uncertain-line",stroke:"rgb(166, 166, 166)",strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"16.5,10",strokeDashoffset:0,fill:"none",d:"M 36,174 L 266,174"}):r.jsx("path",{id:"pass-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 48,204 L 254,204"}),r.jsx("path",{id:"data-sparkline",stroke:"rgb(166, 166, 166)",strokeWidth:12,strokeMiterlimit:12,fill:"none",d:"M 59.9,187.91 C 72.79,171.72 87.33,158.06 104.4,157.83 121.91,158.58 140.94,187.85 153.4,189.91 164.1,192.12 163.78,171.38 169.17,170.53 172.87,169.55 174.88,187.45 184.94,189.24 197,191.86 230.54,184.47 239.01,185.9"}),r.jsx("circle",{stroke:y,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"})]})]})};Es.displayName="SPCAssuranceIcon";const Mv=Object.freeze(Object.defineProperty({__proto__:null,AssuranceResult:bn,Direction:We,MetricPolarity:ut,SPCAssuranceIcon:Es,SPCVariationIcon:Ls,VariationJudgement:St,VariationState:Be,getVariationColour:md,getVariationTrend:Ns},Symbol.toStringTag,{value:"Module"}));function Iv(e){const{show:t,rowsForUi:n,minPoints:a,metricImprovement:o,variant:s,runLength:i}=e;if(!t||!n?.length)return null;const l=n,c=typeof a=="number"&&!isNaN(a)?a:13;if(l.filter(w=>!w.data.ghost&&w.data.value!=null).length<c)return null;let u=-1;for(let w=l.length-1;w>=0;w--){const _=l[w];if(_&&_.data.value!=null&&!_.data.ghost){u=w;break}}if(u===-1)return null;const f=l[u],h=f.classification?.variation,p=f.classification?.assurance,y=h===Ye.Neither&&!!f.classification?.neutralSpecialCauseValue,m=p===on.Pass?bn.Pass:p===on.Fail?bn.Fail:bn.Uncertain;let g;if(h===Ye.Suppressed){const w=!!f.rules.singlePoint.up,_=!!f.rules.singlePoint.down;o===an.Up?w?g=We.Higher:_&&(g=We.Lower):o===an.Down?_?g=We.Lower:w&&(g=We.Higher):g=We.Higher}else if(h===Ye.Neither&&y){const w=f.rules.singlePoint.up||f.rules.twoOfThree.up||f.rules.fourOfFive.up||f.rules.shift.up||f.rules.trend.up,_=f.rules.singlePoint.down||f.rules.twoOfThree.down||f.rules.fourOfFive.down||f.rules.shift.down||f.rules.trend.down;w&&!_?g=We.Higher:_&&!w?g=We.Lower:g=We.Higher}const C=80,j=f.rules.singlePoint.up||f.rules.twoOfThree.up||f.rules.fourOfFive.up||f.rules.shift.up||f.rules.trend.up,M=f.rules.singlePoint.down||f.rules.twoOfThree.down||f.rules.fourOfFive.down||f.rules.shift.down||f.rules.trend.down;let N=Fe.CommonCause;return h===Ye.Improvement?N=Fe.ImprovementHigh:h===Ye.Concern?N=Fe.ConcernHigh:h===Ye.Neither&&(y?g===We.Lower||M&&!j?N=Fe.NeitherLow:N=Fe.NeitherHigh:N=Fe.CommonCause),r.jsxs("div",{style:{display:"flex",gap:12,marginRight:16},children:[r.jsx("div",{className:"fdp-spc-chart__embedded-icon","data-variation":String(h),"data-trend":g?String(g):"none",style:{width:C,height:C},children:r.jsx(Ls,{dropShadow:!1,data:{variationIcon:N,improvementDirection:o,specialCauseNeutral:y,highSideSignal:j,lowSideSignal:M,...g?{trend:g}:{}},letterMode:o===an.Neither?pr.Direction:pr.Polarity,size:C,variant:s,runLength:s===vn.TriangleWithRun?i:void 0})}),r.jsx("div",{className:"fdp-spc-chart__embedded-assurance-icon","data-assurance":String(p),style:{width:C,height:C},children:r.jsx(Es,{status:m,size:C,dropShadow:!1})})]},`embedded-icon-${u}`)}const $d=({engineRows:e,limits:t,pointDescriber:n,measureName:a,measureUnit:o,dateFormatter:s,enableNeutralNoJudgement:i=!0,showTrendGatingExplanation:l=!0})=>{const c=Qt(),d=rn(),[u,f]=X.useState(null),[h,p]=X.useState(!1),y=X.useRef(null);X.useEffect(()=>{if(c){if(c.focused&&(f(c.focused),y.current&&(cancelAnimationFrame(y.current),y.current=null)),!c.focused&&!h){const Ae=requestAnimationFrame(()=>{f(null),y.current=null});y.current=Ae}return()=>{y.current&&(cancelAnimationFrame(y.current),y.current=null)}}},[c,c?.focused,h]);const m=c&&(c.focused||(h?u:null)||u),[g,C]=X.useState(!1);X.useEffect(()=>{const Ae=requestAnimationFrame(()=>C(!0));return()=>cancelAnimationFrame(Ae)},[m?.index]);const j=d?.innerWidth??0,M=d?.innerHeight??0,N=m?Math.min(Math.max(m.clientX,0),j):0,w=m?Math.min(Math.max(m.clientY,0),M):0,_=d?.ref?.current||void 0;if(!m)return null;const I=e?.[m.index],x=Ta(I?{specialCauseSinglePointUp:!!I.rules.singlePoint.up,specialCauseSinglePointDown:!!I.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!I.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!I.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!I.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!I.rules.fourOfFive.down,specialCauseShiftUp:!!I.rules.shift.up,specialCauseShiftDown:!!I.rules.shift.down,specialCauseTrendUp:!!I.rules.trend.up,specialCauseTrendDown:!!I.rules.trend.down}:null).map(Ae=>({id:Ae,label:$n[Ae].tooltip})),S=m.x instanceof Date?m.x:new Date(m.x),A=s?s(S):S.toDateString(),D=o?`${o}`:"",F=a||D?`${m.y}${D?""+D:" "}${a?" "+a:""}`:`${m.y}`,T=La(I?.classification?.variation),L=hd(I?.classification?.assurance),$=rv(t.mean??null,t.sigma,m.y),O=n?n(m.index,{x:m.x,y:m.y}):void 0,J=T||L||$,ee=I?.rules.trend.up||I?.rules.trend.down,ae=I?.classification?.variation===Ye.Neither&&ee,R=l&&ae?"Trend detected (monotonic run) â€“ held neutral until values cross onto the favourable side of the mean.":null,B=x.length>0,E=I&&"primeDirection"in I?I.primeDirection:void 0,Y=I&&"primeRuleId"in I?I.primeRuleId:void 0,P=i&&I?.classification?.variation===Ye.Neither&&B,W="var(--nhs-fdp-color-primary-yellow, #ffeb3b)",H=pd(I?.classification?.variation),Q=6.2,te=[O||"",`${A} â€¢ ${F}`].filter(Boolean).reduce((Ae,_e)=>Math.max(Ae,_e.length*Q+32),0),fe=200,Z=440,se=Math.min(Z,Math.max(fe,te));let de=N+12,me=(d.margin?.top??0)+w+16;de+se>j&&(de=N- -60-se),de<0&&(de=Math.max(0,j-se));const De=m?`spc-tooltip-${m.index}`:"spc-tooltip",Ge=typeof m.index=="number"?m.index:NaN,Le=_?Ep.createPortal(r.jsx("div",{id:De,className:"fdp-spc-tooltip fdp-spc-tooltip-portal"+(g?" is-visible":""),style:{position:"absolute",left:de,top:me,width:se,maxWidth:Z,zIndex:10,pointerEvents:"auto",userSelect:"none"},role:"tooltip","aria-live":"polite","aria-hidden":g?"false":"true","data-floating":!0,"data-placement":de+se+12>j?"left":"right",onPointerEnter:()=>{p(!0),y.current&&(cancelAnimationFrame(y.current),y.current=null)},onPointerLeave:()=>{if(p(!1),!c?.focused){const Ae=requestAnimationFrame(()=>{f(null),y.current=null});y.current=Ae}},children:r.jsxs("div",{className:"fdp-spc-tooltip__body",children:[r.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--point",children:[r.jsx("div",{className:"fdp-spc-tooltip__section-label",children:r.jsx("strong",{children:"Point"})}),r.jsxs("div",{className:"fdp-spc-tooltip__primary-line",children:["Index: ",Ge]})]}),r.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--date",children:[r.jsx("div",{className:"fdp-spc-tooltip__section-label",children:r.jsx("strong",{children:"Date"})}),r.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:A})]}),r.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--value",children:[r.jsx("div",{className:"fdp-spc-tooltip__section-label",children:r.jsx("strong",{children:"Value"})}),r.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:F})]}),J&&r.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--signals",children:[r.jsx("div",{className:"fdp-spc-tooltip__section-label",children:r.jsx("strong",{children:"Signals"})}),r.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Signals",children:T?.toLowerCase().includes("concern")?r.jsx(nt,{text:T,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):T?.toLowerCase().includes("improvement")?r.jsx(nt,{text:T,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):P?r.jsx(nt,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):T?r.jsx(nt,{text:T,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null})]}),L&&r.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--assurance",children:[r.jsx("div",{className:"fdp-spc-tooltip__section-label",children:r.jsx("strong",{children:"Assurance"})}),r.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:(()=>{const Ae=L.toLowerCase(),z=!(Ae.includes("not met")||Ae.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(Ae);return r.jsx(nt,{text:L,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${z?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${L}`})})()})]}),$&&r.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--limits",children:[r.jsx("div",{className:"fdp-spc-tooltip__section-label",children:r.jsx("strong",{children:"Control Limits & Sigma"})}),r.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:r.jsx(nt,{text:(()=>{const Ae=$.toLowerCase();return Ae.startsWith("within 1")?"â‰¤1Ïƒ":Ae.startsWith("1â€“2")?"1â€“2Ïƒ":Ae.startsWith("2â€“3")?"2â€“3Ïƒ":Ae.startsWith(">3")?">3Ïƒ":$})(),color:$.includes(">3")?"orange":$.includes("2â€“3")?"yellow":"grey","aria-label":`Sigma zone: ${$}`,className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--zone"})})]}),R&&r.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--gating","data-gating":!0,children:[r.jsx("div",{className:"fdp-spc-tooltip__section-label",children:r.jsx("strong",{children:"Trend gating"})}),r.jsx("div",{className:"fdp-spc-tooltip__explanation","aria-live":"off",children:R})]}),B&&r.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",children:[r.jsx("div",{className:"fdp-spc-tooltip__section-label",children:r.jsx("strong",{children:"Special cause"})}),r.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",children:x.map(({id:Ae,label:_e})=>{const z=String(Ae),le=z===ur.TrendIncreasing||z===ur.TrendDecreasing?"fdp-spc-tag--trend":P?"fdp-spc-tag--no-judgement":T?T.toLowerCase().includes("concern")?"fdp-spc-tag--concern":T.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common";return r.jsx(nt,{text:_e,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${le}`,"data-rule-id":z},z)})}),E&&r.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",style:{marginTop:16},children:[r.jsx("div",{className:"fdp-spc-tooltip__section-label",style:{marginBottom:6},children:r.jsx("strong",{children:"Prime Direction"})}),(()=>{const Ae=P?"fdp-spc-tag--no-judgement":T?T.toLowerCase().includes("concern")?"fdp-spc-tag--concern":T.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",_e=`${E}${Y?` (${Y})`:""}`;return r.jsx(nt,{text:_e,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${Ae}`,"aria-label":`Prime direction ${E}${Y?` via ${Y}`:""}`})})()]})]})]})}),_):null;return r.jsxs("g",{className:"fdp-tooltip-layer fdp-spc-tooltip",pointerEvents:"none","aria-hidden":"true",children:[r.jsx("circle",{cx:N,cy:w,r:7,fill:"none",stroke:W,strokeWidth:3}),r.jsx("circle",{cx:N,cy:w,r:5,fill:"#000",stroke:W,strokeWidth:1.5}),r.jsx("circle",{cx:N,cy:w,r:2.5,fill:H,stroke:"#fff",strokeWidth:.5}),Le]})},Dv=({engineRows:e,measureName:t,measureUnit:n,onSignalFocus:a})=>{const o=Qt(),s=o?.focused??null,i=s?.index??null,l=typeof i=="number"&&e?e[i]:null,c=X.useMemo(()=>l?Ta({specialCauseSinglePointUp:!!l.rules.singlePoint.up,specialCauseSinglePointDown:!!l.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!l.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!l.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!l.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!l.rules.fourOfFive.down,specialCauseShiftUp:!!l.rules.shift.up,specialCauseShiftDown:!!l.rules.shift.down,specialCauseTrendUp:!!l.rules.trend.up,specialCauseTrendDown:!!l.rules.trend.down}):[],[l]),d=X.useMemo(()=>Array.from(new Set(c.map(m=>$n[m]?.narration).filter(Boolean))),[c]),u=l?La(l.classification?.variation):null,f=l?hd(l.classification?.assurance):null,h=c.length>0,p=l?l.classification?.variation===Ye.Neither&&h:!1,y=X.useRef(null);return X.useEffect(()=>{if(!a||!s||l==null)return;const m=`${s.seriesId}:${s.index}`;if(y.current!==m){y.current=m;try{a({index:s.index,x:s.x,y:s.y,row:l,rules:c})}catch{}}},[s?.seriesId,s?.index,s?.x,s?.y,l,c,a]),r.jsxs("div",{className:"fdp-spc-inspector",role:"region","aria-label":"Signals inspector","data-testid":"spc-signals-inspector",children:[r.jsxs("div",{className:"fdp-spc-inspector__header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx("strong",{children:"Signals inspector"}),r.jsx("div",{className:"fdp-spc-inspector__nav","aria-hidden":!o,children:o&&r.jsxs("div",{style:{display:"flex",gap:8},children:[r.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{o.focused?o.focusPrevPoint():o.focusFirstPoint()},"aria-label":"Previous point",children:"â—€"}),r.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{o.focused?o.focusNextPoint():o.focusFirstPoint()},"aria-label":"Next point",children:"â–¶"})]})})]}),!l||!s?r.jsx("p",{className:"fdp-spc-inspector__empty",children:"No point selected."}):r.jsxs("div",{className:"fdp-spc-inspector__body",children:[r.jsxs("div",{className:"fdp-spc-inspector__summary",style:{display:"flex",gap:16,flexWrap:"wrap"},children:[r.jsxs("span",{children:[r.jsx("strong",{children:"Point:"})," ",s.index+1]}),r.jsxs("span",{children:[r.jsx("strong",{children:"Value:"})," ",s.y,n?` ${n}`:"",t?` ${t}`:""]})]}),(u||p||f)&&r.jsx("div",{className:"fdp-spc-inspector__signals",style:{marginTop:8},children:r.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[u?.toLowerCase().includes("concern")?r.jsx(nt,{text:u,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):u?.toLowerCase().includes("improvement")?r.jsx(nt,{text:u,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):p?r.jsx(nt,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):u?r.jsx(nt,{text:u,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null,f&&(()=>{const m=f.toLowerCase(),C=!(m.includes("not met")||m.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(m);return r.jsx(nt,{text:f,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${C?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${f}`})})()]})}),r.jsxs("div",{className:"fdp-spc-inspector__rules",style:{marginTop:8},children:[r.jsx("strong",{children:"Special cause:"}),r.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:4},children:c.length===0?r.jsx("span",{children:" None"}):c.map(m=>{const g=String(m),j=g===ur.TrendIncreasing||g===ur.TrendDecreasing?"fdp-spc-tag--trend":p?"fdp-spc-tag--no-judgement":u?u.toLowerCase().includes("concern")?"fdp-spc-tag--concern":u.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",M=$n[m]?.tooltip||g;return r.jsx(nt,{text:M,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${j}`,"data-rule-id":g,title:$n[m]?.tooltip},g)})})]}),d.length>0&&r.jsxs("div",{className:"fdp-spc-inspector__narration",style:{marginTop:8},children:[r.jsx("strong",{children:"Summary:"})," ",d.join("; ")]})]})]})};function Tv(e,t=!0){if(!e?.length)return[];const n=[...e];if(t){for(let s=1;s<n.length-1;s++)n[s]===pt.Common&&n[s-1]===n[s+1]&&n[s-1]!==pt.Common&&(n[s]=n[s-1]);let o=0;for(;o<n.length;){const s=n[o];let i=o+1;for(;i<n.length&&n[i]===s;)i++;i-o===1&&s!==pt.Common&&(n[o]=pt.Common),o=i}}const a=[];if(n.length){let o=0;for(let s=1;s<=n.length;s++)if(s===n.length||n[s]!==n[o]){const i=n[o],l=s-1,c=l-o+1;(i===pt.Common||c>=2)&&a.push({start:o,end:l,category:i}),o=s}}return a}var mr=(e=>(e.Slope="slope",e.Neutral="neutral",e.Extend="extend",e))(mr||{}),Fd=(e=>(e.Ungated="ungated",e.Gated="gated",e))(Fd||{});function Lv(e){const{ui:t,input:n,engine:a,container:o,a11y:s,visualsEngine:i,meta:l,data:c,ariaLabel:d,height:u,showZones:f,showPoints:h,announceFocus:p,className:y,unit:m,targets:g,baselines:C,ghosts:j,settings:M,chartType:N,metricImprovement:w,gradientSequences:_,sequenceTransition:I,processLineWidth:v,showPartitionMarkers:x,showWarningsPanel:S,warningsFilter:A,enableNeutralNoJudgement:D,showTrendGatingExplanation:F,trendVisualMode:T,alwaysShowZeroY:L,alwaysShowHundredY:$,percentScale:O,showTrendStartMarkers:J,showFirstFavourableCrossMarkers:ee,showTrendBridgeOverlay:ae,showSignalsInspector:R,onSignalFocus:B,showIcons:E,showEmbeddedIcon:Y,embeddedIconVariant:P,embeddedIconRunLength:W,showFocusIndicator:H,visualsScenario:Q,visualsEngineSettings:q,source:te,narrationContext:fe,highlightOutOfControl:Z,precomputed:se}=e;process.env.NODE_ENV!=="production"&&(!n&&(g!==void 0||C!==void 0||j!==void 0)&&console.warn("SPCChart: Flat input props (targets/baselines/ghosts) are deprecated. Use input={{ data, targets, baselines, ghosts }} instead."),!a&&M!==void 0&&console.warn("SPCChart: Flat engine prop 'settings' is deprecated. Use engine={{ chartType, metricImprovement, settings }}."),!o&&(u!==void 0||y!==void 0)&&console.warn("SPCChart: Consider grouped container props. Use container={{ height, className }}."),!s&&(d!==void 0||p!==void 0||fe!==void 0||m!==void 0)&&console.warn("SPCChart: Consider grouped accessibility props. Use a11y={{ label, announceFocus, narrationContext, unit }}."),!i&&(Q!==void 0||q!==void 0)&&console.warn("SPCChart: Consider grouped visuals engine props. Use visualsEngine={{ scenario, settings }}."),t?.visuals===void 0&&(f!==void 0||h!==void 0)&&console.warn("SPCChart: Visual toggles should be grouped. Use ui={{ visuals: { showZones, showPoints } }}."),t?.visuals?.rules===void 0&&Z!==void 0&&console.warn("SPCChart: Prefer grouped rules toggle. Use ui={{ visuals: { rules: { highlightOutOfControl } } }}."),!l&&te!==void 0&&console.warn("SPCChart: Consider grouped meta. Use meta={{ source }}."));const de=n?.data??c??[],ve=n?.targets??g,me=n?.baselines??C,De=n?.ghosts??j,Ge=a?.chartType??N??dd.XmR,Le=a?.metricImprovement??w??an.Neither,Ae=a?.settings??M,_e=a?.autoRecalc,z=t?.axes?.alwaysShowZeroY??L??!1,K=t?.axes?.alwaysShowHundredY??$??!1,le=t?.axes?.percentScale??O??!1,pe=t?.visuals?.gradientSequences??_??!0,ge=t?.visuals?.sequenceTransition??I??"slope",U=t?.visuals?.processLineWidth??v??2,V=t?.visuals?.trend?.visualMode??T??"ungated",ie=t?.visuals?.trend?.showGatingExplanation??F??!0,ne=t?.visuals?.rules?.enableNeutralNoJudgement??D??!0,oe=t?.visuals?.rules?.enableRules??e.enableRules??!0,ue=t?.visuals?.showZones,he=t?.visuals?.showPoints,we=t?.visuals?.rules?.highlightOutOfControl,Ne=o?.height,ze=o?.className,Ve=s?.label,ot=s?.unit,Xe=s?.narrationContext,ce=i?.scenario,$e=i?.settings,G=l?.source,re=t?.overlays?.partitionMarkers??x??!1,ye=t?.overlays?.trendStartMarkers??J??!1,be=t?.overlays?.firstFavourableCrossMarkers??ee??!1,xe=t?.overlays?.trendBridge??ae??!1,ke=t?.inspector?.show??R??!1,He=t?.inspector?.onFocus??B,je=t?.warnings?.show??S??!1,Ie=t?.warnings?.filter??A,Se=t?.icons?.show??E??!1,Me=t?.icons?.embedded?.show??Y??!0,Je=t?.icons?.embedded?.variant??P??vn.Classic,tt=t?.icons?.embedded?.runLength??W,Ee=t?.overlays?.focusIndicator??H??!0;return{effData:de,effTargets:ve,effBaselines:me,effGhosts:De,effChartTypeCore:Ge,effMetricImprovementCore:Le,effEngineSettings:Ae,effEngineAutoRecalc:_e,effHeight:Ne,effClassName:ze,effAriaLabel:Ve,effUnit:ot,effNarrationContext:Xe,effShowZones:ue,effShowPoints:he,effHighlightOutOfControl:we,effVisualsScenario:ce,effVisualsEngineSettings:$e,effPrecomputedVisuals:se,effSource:G,effAlwaysShowZeroY:z,effAlwaysShowHundredY:K,effPercentScale:le,effGradientSequences:pe,effSequenceTransition:ge,effProcessLineWidth:U,effTrendVisualMode:V,effShowTrendGatingExplanation:ie,effEnableNeutralNoJudgement:ne,effEnableRules:oe,effShowPartitionMarkers:re,effShowTrendStartMarkers:ye,effShowFirstFavourableCrossMarkers:be,effShowTrendBridgeOverlay:xe,effShowSignalsInspector:ke,effOnSignalFocus:He,effShowWarningsPanel:je,effWarningsFilter:Ie,effShowIcons:Se,effShowEmbeddedIcon:Me,effEmbeddedIconVariant:Je,effEmbeddedIconRunLength:tt,effShowFocusIndicator:Ee}}let Av=0;const Ev=({data:e,targets:t,visuals:n,a11y:a,axis:o,compute:s})=>{const{series:i,engineRows:l,visualCategories:c,partitionMarkers:d}=e,{limits:u,uniformTarget:f}=t,{showPoints:h,showZones:p,highlightOutOfControl:y,gradientSequences:m,sequenceTransition:g,processLineWidth:C,showFocusIndicator:j=!1,enableRules:M,enableNeutralNoJudgement:N=!0,showTrendStartMarkers:w=!1,showFirstFavourableCrossMarkers:_=!1,showTrendBridgeOverlay:I=!1}=n,{announceFocus:v,ariaLabel:x,narrationContext:S,showSignalsInspector:A=!1,onSignalFocus:D,showTrendGatingExplanation:F=!0}=a,{zeroBreakSlotGapPx:T}=o,{metricImprovement:L,effectiveUnit:$}=s,O=mn(),J=rn();if(!O)return null;const{xScale:ee,yScale:ae}=O,R=X.useRef("spc-seq-"+ ++Av),B=Qt(),E=i[0]?.data||[],Y=X.useMemo(()=>{if(!u.ucl&&!u.lcl)return new Set;const z=new Set;return E.forEach((K,le)=>{typeof u.ucl=="number"&&K.y>u.ucl&&z.add(le),typeof u.lcl=="number"&&K.y<u.lcl&&z.add(le)}),z},[u.ucl,u.lcl,E]),P=X.useMemo(()=>{if(!l||!l.length)return null;const z=[];return l.forEach((K,le)=>{const pe=K.classification.variation===Ye.Concern||K.classification.variation===Ye.Improvement||!!K.classification.neutralSpecialCauseValue,ge=!!K.rules.singlePoint.up||!!K.rules.twoOfThree.up||!!K.rules.fourOfFive.up||!!K.rules.shift.up||!!K.rules.trend.up,U=!!K.rules.singlePoint.down||!!K.rules.twoOfThree.down||!!K.rules.fourOfFive.down||!!K.rules.shift.down||!!K.rules.trend.down;z[le]={variation:K.classification.variation,assurance:K.classification.assurance,special:pe,concern:K.classification.variation===Ye.Concern,improvement:K.classification.variation===Ye.Improvement,trendUp:!!K.rules.trend.up,trendDown:!!K.rules.trend.down,upAny:ge,downAny:U,neutralSpecial:!!K.classification.neutralSpecialCauseValue,shiftUp:!!K.rules.shift.up,shiftDown:!!K.rules.shift.down,twoOfThreeUp:!!K.rules.twoOfThree.up,twoOfThreeDown:!!K.rules.twoOfThree.down,fourOfFiveUp:!!K.rules.fourOfFive.up,fourOfFiveDown:!!K.rules.fourOfFive.down,partitionId:K.partition.id??null}}),z},[l]),W=X.useMemo(()=>(c||[]).map(z=>z===rt.Improvement?pt.Improvement:z===rt.Concern?pt.Concern:z===rt.NoJudgement?pt.NoJudgement:pt.Common),[c]),H=X.useMemo(()=>!m||!W.length?[]:Tv(W,!0),[m,W,x]),Q=X.useMemo(()=>E.map(z=>ee(z.x instanceof Date?z.x:new Date(z.x))),[E,ee]),q=ee.range()[1],te=ee.range()[0],fe=X.useMemo(()=>{if(!l||!l.length)return null;let z=Number.POSITIVE_INFINITY,K=Number.POSITIVE_INFINITY;if(l.forEach((ne,oe)=>{ne.rules.trend.up&&(z=Math.min(z,oe)),ne.rules.trend.down&&(K=Math.min(K,oe))}),!Number.isFinite(z)&&!Number.isFinite(K))return null;const le=z<=K,pe=le?Et.Up:Et.Down,ge=le?z:K,U=ne=>L==null||L===an.Neither||ne==null||typeof ne.data.value!="number"||typeof ne.limits.mean!="number"?!1:pe===Et.Up?L===an.Up?ne.data.value>ne.limits.mean:ne.data.value<ne.limits.mean:L===an.Down?ne.data.value<ne.limits.mean:ne.data.value>ne.limits.mean;let V=null;for(let ne=ge;ne<l.length;ne++){const oe=l[ne];if(!(le?!!oe.rules.trend.up:!!oe.rules.trend.down))break;if(U(oe)){V=ne;break}}let ie=!1;if(V!=null){let ne=0;for(let oe=V;oe<l.length;oe++){const ue=l[oe];if(!(le?!!ue.rules.trend.up:!!ue.rules.trend.down))break;U(ue)&&ne++}ie=ne>=2}return{direction:pe,detectedAt:ge,firstFavourableCrossAt:V,persistedAcrossMean:ie}},[l,L]),Z=X.useMemo(()=>{if(!l||!l.length)return null;const z=K=>{const le=[];let pe=null,ge=null;for(let U=0;U<l.length;U++){const V=l[U],ie=K(V),ne=typeof ie=="number"&&!isNaN(ie)?ie:null;if(ne==null){pe!==null&&ge!=null&&(le.push({x1:Q[pe],x2:Q[U-1],y:ae(ge)}),pe=null,ge=null);continue}if(pe===null){pe=U,ge=ne;continue}ge!=null&&Math.abs(ne-ge)<=1e-9||(ge!=null&&le.push({x1:Q[pe],x2:Q[U-1],y:ae(ge)}),pe=U,ge=ne)}return pe!==null&&ge!=null&&le.push({x1:Q[pe],x2:Q[l.length-1],y:ae(ge)}),le};return{mean:z(K=>K.limits.mean??null),ucl:z(K=>K.limits.ucl??null),lcl:z(K=>K.limits.lcl??null),onePos:z(K=>K.limits.oneSigma.upper??null),oneNeg:z(K=>K.limits.oneSigma.lower??null),twoPos:z(K=>K.limits.twoSigma.upper??null),twoNeg:z(K=>K.limits.twoSigma.lower??null)}},[l,Q,ae]),se=X.useMemo(()=>H.length?r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:`${R.current}-grad-common`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.28}),r.jsx("stop",{offset:"70%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.12}),r.jsx("stop",{offset:"100%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.045})]}),H.map((z,K)=>{const le=`${R.current}-grad-${K}`;let pe,ge=.28,U=.12,V=.045;switch(z.category){case pt.Concern:pe="var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",ge=.28,U=.12,V=.045;break;case pt.Improvement:pe="var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",ge=.26,U=.11,V=.045;break;case pt.NoJudgement:pe="var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",ge=.26,U=.11,V=.045;break;default:pe="var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)"}return r.jsxs("linearGradient",{id:le,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:pe,stopOpacity:ge}),r.jsx("stop",{offset:"70%",stopColor:pe,stopOpacity:U}),r.jsx("stop",{offset:"100%",stopColor:pe,stopOpacity:V})]},le)})]}):null,[H]),de=X.useMemo(()=>{if(!H.length)return null;const[z]=ae.domain(),K=ae(z),le=H.map((pe,ge)=>{const{start:U,end:V,category:ie}=pe;if(U<0||V>=Q.length||U>V)return null;const ne=Q[U],oe=Q[V];let ue="";if(ie===pt.Common){const he=ge>0?H[ge-1]:null,we=ge<H.length-1?H[ge+1]:null,Ne=he?Q[he.end]:te,ze=he?ae(E[he.end].y):K,Ve=we?Q[we.start]:q,ot=we?ae(E[we.start].y):K;ue=`M ${Ne} ${K}`,ue+=` L ${Ne} ${ze}`;for(let Xe=U;Xe<=V;Xe++)ue+=` L ${Q[Xe]} ${ae(E[Xe].y)}`;ue+=` L ${Ve} ${ot}`,ue+=` L ${Ve} ${K} Z`}else{const he=ge>0?H[ge-1]:null,we=ge<H.length-1?H[ge+1]:null,Ne=he&&he.category!==pt.Common,ze=we&&we.category!==pt.Common,Ve=ae(E[U].y),ot=ae(E[V].y);let Xe=ne,ce=oe;if(Ne){const $e=Q[he.end],G=ae(E[he.end].y),re=E[U].y-E[he.end].y;g===mr.Slope&&re>0?(ue=`M ${$e} ${G} L ${ne} ${Ve}`,Xe=$e):(ue=`M ${ne} ${K} L ${ne} ${Ve}`,Xe=ne)}else ue=`M ${ne} ${K} L ${ne} ${Ve}`;for(let $e=U+1;$e<=V;$e++)ue+=` L ${Q[$e]} ${ae(E[$e].y)}`;if(ue+=` L ${oe} ${ot}`,ze){const $e=Q[we.start],G=ae(E[we.start].y),re=E[we.start].y-E[V].y;(g===mr.Slope&&re<=0||g===mr.Extend)&&(ue+=` L ${$e} ${G}`,ce=$e)}if(ue+=` L ${ce} ${K}`,ue+=` L ${Xe} ${K} Z`,g===mr.Neutral&&Ne){const $e=Q[he.end],G=ae(E[he.end].y),re=r.jsx("path",{d:`M ${$e} ${K} L ${$e} ${G} L ${ne} ${Ve} L ${ne} ${K} Z`,fill:`url(#${R.current}-grad-common)`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-wedge-${ge}`);return r.jsxs("g",{children:[re,r.jsx("path",{d:ue,fill:`url(#${R.current}-grad-${ge})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${ge}`)]},`seq-group-${ge}`)}}return r.jsx("path",{d:ue,fill:`url(#${R.current}-grad-${ge})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${ge}`)}).filter(Boolean);return r.jsx("g",{className:"fdp-spc__sequence-bgs",children:le})},[H,Q,q,ae,E,g]),ve=X.useMemo(()=>{if(!S?.timeframe&&E.length>=2){const z=E.map(V=>V.x instanceof Date?V.x:new Date(V.x)),K=new Date(Math.min(...z.map(V=>V.getTime()))),le=new Date(Math.max(...z.map(V=>V.getTime()))),pe=Math.round((le.getTime()-K.getTime())/864e5)||0;if(pe<14)return`The chart shows a timeframe of ${pe+1} days`;const ge=Math.round(pe/7);return ge<20?`The chart shows a timeframe of ${ge} weeks`:`The chart shows a timeframe of ${(le.getFullYear()-K.getFullYear())*12+(le.getMonth()-K.getMonth())+1} months`}if(S?.timeframe)return`The chart shows a timeframe of ${S.timeframe}`},[S?.timeframe,E]),me=z=>{const K=z%10,le=z%100;return K===1&&le!==11?`${z}st`:K===2&&le!==12?`${z}nd`:K===3&&le!==13?`${z}rd`:`${z}th`},De=z=>`${me(z.getDate())} ${z.toLocaleString("en-GB",{month:"long"})}, ${z.getFullYear()}`,Ge=z=>({specialCauseSinglePointUp:!!z?.rules.singlePoint.up,specialCauseSinglePointDown:!!z?.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!z?.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!z?.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!z?.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!z?.rules.fourOfFive.down,specialCauseShiftUp:!!z?.rules.shift.up,specialCauseShiftDown:!!z?.rules.shift.down,specialCauseTrendUp:!!z?.rules.trend.up,specialCauseTrendDown:!!z?.rules.trend.down}),Le=X.useCallback(({index:z,x:K,y:le})=>{const pe=l?.[z],ge=K instanceof Date?K:new Date(K),U=De(ge),V=S?.measureUnit?` ${S.measureUnit}`:"",ie=S?.measureName?` ${S.measureName}`:"";if(!pe)return`General summary is: ${ve?ve+". ":""}Point ${z+1}, ${U}, ${le}${V}${ie}`;const ne=La(pe.classification?.variation)||"Variation",oe=Ta(Ge(pe)),ue=oe.length?` Rules: ${[...new Set(oe.map(we=>$n[we].narration))].join("; ")}.`:" No special cause rules.",he=[];return S?.measureName&&he.push(`Measure: ${S.measureName}.`),S?.datasetContext&&he.push(`${S.datasetContext}.`),S?.organisation&&he.push(`Organisation: ${S.organisation}.`),S?.additionalNote&&he.push(S.additionalNote),["General summary is:",...he,`Point ${z+1} recorded on `,U+",",`with a value of ${le} ${V}${ie}`,ne+".",ue].join(" ").replace(/\s+/g," ").trim()},[l,S,ve]),Ae=X.useCallback((z,K)=>l?.[z]?Le({index:z,seriesId:"process",x:K.x instanceof Date?K.x:new Date(K.x),y:K.y}).replace(/^General summary is:\s*/,"").replace(/^Point \d+\s*/,""):void 0,[l,Le]),_e=X.useMemo(()=>{try{const z=typeof ae?.domain=="function"?ae.domain():void 0;if(!z||!Array.isArray(z)||z.length<2)return!1;const K=Math.min(z[0],z[1]),le=Math.max(z[0],z[1]);return!(0>=K&&0<=le)}catch{return!1}},[ae]);return r.jsx(id,{children:r.jsxs("div",{className:"fdp-spc-chart",role:"group","aria-label":"Statistical process control chart","aria-roledescription":"chart",children:[r.jsx("svg",{width:O.xScale.range()[1]+56+16,height:(J?.innerHeight??O.yScale.range()[0])+12+48,role:"img",children:r.jsxs("g",{transform:"translate(56,12)",children:[r.jsx(ms,{type:"x"}),r.jsx(ms,{type:"y",yZeroBreak:{enabled:_e,gapPx:T,zigZag:{heightPx:64,amplitudePx:4,cycles:6,stepXPx:3}}}),r.jsx(Kc,{axis:"y"}),se,de,d.map((z,K)=>{const le=E[z];if(!le)return null;const pe=ee(le.x instanceof Date?le.x:new Date(le.x));return r.jsx("line",{x1:pe,x2:pe,y1:0,y2:ae.range()[0],stroke:"#555",strokeDasharray:"4 4",strokeWidth:1,"aria-hidden":"true",className:"fdp-spc__partition-marker"},`partition-marker-${K}`)}),Z?.mean.length?r.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__cl-group",children:[Z.mean.map((z,K)=>r.jsx("line",{className:"fdp-spc__cl",x1:z.x1,x2:z.x2,y1:z.y,y2:z.y},`mean-${K}`)),Z.mean.map((z,K)=>{if(K===Z.mean.length-1)return null;const le=Z.mean[K+1];if(!le||z.y===le.y)return null;const ge=Math.max(4,le.x1-z.x2||0)*.5,U=`M ${z.x2},${z.y} C ${z.x2+ge},${z.y} ${le.x1-ge},${le.y} ${le.x1},${le.y}`;return r.jsx("path",{className:"fdp-spc__cl fdp-spc__cl-join",d:U,fill:"none"},`mean-join-${K}`)})]}):null,f!=null&&r.jsx(r.Fragment,{}),Z?.ucl.length?r.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--ucl",children:[Z.ucl.map((z,K)=>r.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--ucl",x1:z.x1,x2:z.x2,y1:z.y,y2:z.y,strokeWidth:2},`ucl-${K}`)),Z.ucl.map((z,K)=>{if(K===Z.ucl.length-1)return null;const le=Z.ucl[K+1];if(!le||z.y===le.y)return null;const ge=Math.max(4,le.x1-z.x2||0)*.5,U=`M ${z.x2},${z.y} C ${z.x2+ge},${z.y} ${le.x1-ge},${le.y} ${le.x1},${le.y}`;return r.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--ucl fdp-spc__limit-join",d:U,fill:"none",strokeWidth:2},`ucl-join-${K}`)})]}):null,Z?.lcl.length?r.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--lcl",children:[Z.lcl.map((z,K)=>r.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--lcl",x1:z.x1,x2:z.x2,y1:z.y,y2:z.y,strokeWidth:2},`lcl-${K}`)),Z.lcl.map((z,K)=>{if(K===Z.lcl.length-1)return null;const le=Z.lcl[K+1];if(!le||z.y===le.y)return null;const ge=Math.max(4,le.x1-z.x2||0)*.5,U=`M ${z.x2},${z.y} C ${z.x2+ge},${z.y} ${le.x1-ge},${le.y} ${le.x1},${le.y}`;return r.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--lcl fdp-spc__limit-join",d:U,fill:"none",strokeWidth:2},`lcl-join-${K}`)})]}):null,f!=null&&r.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__target-group",children:[r.jsx("line",{className:"fdp-spc__target","data-testid":"spc-target-line",x1:0,x2:ee.range()[1],y1:ae(f),y2:ae(f),strokeWidth:2.5}),r.jsxs("text",{"data-testid":"spc-target-label",x:ee.range()[0]-7,y:ae(f)-5,textAnchor:"start",className:"fdp-spc__target-label",fontSize:12,children:["Target ",f," ",$||S?.measureUnit||""]})]}),p&&Z&&Z.mean.length>0&&r.jsxs(r.Fragment,{children:[Z.onePos.map((z,K)=>r.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos1",x1:z.x1,x2:z.x2,y1:z.y,y2:z.y,"aria-hidden":"true",strokeWidth:2},`onePos-${K}`)),Z.oneNeg.map((z,K)=>r.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg1",x1:z.x1,x2:z.x2,y1:z.y,y2:z.y,"aria-hidden":"true",strokeWidth:2},`oneNeg-${K}`)),Z.twoPos.map((z,K)=>r.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos2",x1:z.x1,x2:z.x2,y1:z.y,y2:z.y,"aria-hidden":"true",strokeWidth:2},`twoPos-${K}`)),Z.twoNeg.map((z,K)=>r.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg2",x1:z.x1,x2:z.x2,y1:z.y,y2:z.y,"aria-hidden":"true",strokeWidth:2},`twoNeg-${K}`))]}),fe&&(w||_||I)&&(()=>{const z=fe.detectedAt,K=fe.firstFavourableCrossAt,le=E[z]?ee(E[z].x instanceof Date?E[z].x:new Date(E[z].x)):null,pe=E[z]?ae(E[z].y):null,ge=K!=null&&E[K]?ee(E[K].x instanceof Date?E[K].x:new Date(E[K].x)):null,U=K!=null&&E[K]?ae(E[K].y):null;return r.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__trend-overlays",children:[I&&le!=null&&pe!=null&&ge!=null&&U!=null&&r.jsx("line",{x1:le,y1:pe,x2:ge,y2:U,stroke:"#888",strokeDasharray:"4 4",strokeWidth:2,children:r.jsx("title",{children:"Trend bridge: start to first favourable-side point"})}),w&&le!=null&&pe!=null&&r.jsx("circle",{cx:le,cy:pe,r:6,fill:"white",stroke:"#555",strokeWidth:2,children:r.jsx("title",{children:"Trend start (run reached N)"})}),_&&ge!=null&&U!=null&&r.jsx("circle",{cx:ge,cy:U,r:5,fill:"#555",children:r.jsx("title",{children:"First favourable-side inclusion"})})]})})(),r.jsx(ld,{series:i[0],seriesIndex:0,palette:"categorical",showPoints:!1,focusablePoints:!1,focusIndex:-1,parseX:z=>z.x instanceof Date?z.x:new Date(z.x),smooth:!1,strokeWidth:C}),h&&E.map((z,K)=>{const le=ee(z.x instanceof Date?z.x:new Date(z.x)),pe=ae(z.y),ge=Y.has(K),U=P?.[K],V=W[K],ie=V===pt.Improvement,ne=V===pt.Concern,oe=V===pt.NoJudgement,ue=["fdp-spc__point",ge&&y?"fdp-spc__point--ooc":null,M&&ne?"fdp-spc__point--sc-concern":null,M&&ie?"fdp-spc__point--sc-improvement":null,M&&N&&oe?"fdp-spc__point--sc-no-judgement":null,U?.assurance===on.Pass?"fdp-spc__point--assurance-pass":null,U?.assurance===on.Fail?"fdp-spc__point--assurance-fail":null].filter(Boolean).join(" "),he=B?.focused?.index===K;return r.jsx("circle",{cx:le,cy:pe,r:5,className:ue,"data-variation":U?.variation,"data-assurance":U?.assurance,"aria-label":x,...he?{"aria-describedby":`spc-tooltip-${K}`}:{}},K)}),j&&A&&B?.focused&&(()=>{const z=B.focused,K=typeof z.index=="number"?z.index:-1;if(K<0||!E[K])return null;const le=ee(E[K].x instanceof Date?E[K].x:new Date(E[K].x)),pe=ae(E[K].y),ge="var(--nhs-fdp-color-primary-yellow, #ffeb3b)";return r.jsxs("g",{className:"fdp-spc__focus-indicator","aria-hidden":"true",children:[r.jsx("circle",{cx:le,cy:pe,r:7,fill:"none",stroke:ge,strokeWidth:3}),r.jsx("circle",{cx:le,cy:pe,r:5,fill:"#000",stroke:ge,strokeWidth:1.5}),r.jsx("circle",{cx:le,cy:pe,r:2.5,fill:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stroke:"#fff",strokeWidth:.5})]})})(),J&&r.jsx($v,{width:ee.range()[1],height:ae.range()[0]}),!A&&r.jsx($d,{engineRows:l,limits:{mean:u.mean,sigma:u.sigma},pointDescriber:Ae,measureName:S?.measureName,measureUnit:S?.measureUnit,dateFormatter:z=>De(z),enableNeutralNoJudgement:N,showTrendGatingExplanation:F})]})}),A&&r.jsx("div",{style:{marginTop:8},children:r.jsx(Dv,{engineRows:l,measureName:S?.measureName,measureUnit:$||S?.measureUnit,onSignalFocus:D})}),v&&r.jsx(Vx,{format:z=>Le({...z,x:z.x instanceof Date?z.x:new Date(z.x)})})]})})},$v=({width:e,height:t})=>{const n=Qt();return n?r.jsx("rect",{className:"fdp-spc__interaction-layer",width:e,height:t,fill:"transparent",tabIndex:0,"aria-label":"Interactive chart area. Use arrow keys to move between points.",onMouseMove:a=>{const s=a.currentTarget.getBoundingClientRect(),i=a.clientX-s.left,l=a.clientY-s.top;n.focusNearest(i,l)},onMouseLeave:()=>n.clear(),onKeyDown:a=>{switch(a.key){case"ArrowRight":n.focusNextPoint(),a.preventDefault();break;case"ArrowLeft":n.focusPrevPoint(),a.preventDefault();break;case"ArrowDown":n.focusNextSeries(),a.preventDefault();break;case"ArrowUp":n.focusPrevSeries(),a.preventDefault();break;case"Home":n.focusFirstPoint(),a.preventDefault();break;case"End":n.focusLastPoint(),a.preventDefault();break}},style:{cursor:"crosshair"}}):null};function Pd(e){if(e==null)return;const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.valueOf())?void 0:t}function Fv(e,t,n){const a=new Array(e),o=new Date(t);for(let s=0;s<e;s++)switch(a[s]=new Date(o),n){case"hourly":o.setHours(o.getHours()+1);break;case"daily":o.setDate(o.getDate()+1);break;case"weekly":o.setDate(o.getDate()+7);break;case"monthly":o.setMonth(o.getMonth()+1);break;case"quarterly":o.setMonth(o.getMonth()+3);break;case"annually":o.setFullYear(o.getFullYear()+1);break}return a}function Pv(e,t){const n=e.filter(Boolean);if(n.length<2)return t;const a=[];for(let c=1;c<n.length;c++)a.push(n[c].getTime()-n[c-1].getTime());const o=a.sort((c,d)=>c-d),s=o[Math.floor(o.length/2)],i=3600*1e3,l=24*i;return s<=2*i?"hourly":s<=2*l?"daily":s<=10*l?"weekly":s<=45*l?"monthly":s<=120*l?"quarterly":"annually"}function Bd(e,t){if(e)try{switch(t){case"hourly":return new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"}).format(e);case"daily":return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e);case"weekly":return`Week of ${new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}`;case"monthly":return new Intl.DateTimeFormat(void 0,{month:"short",year:"numeric"}).format(e);case"quarterly":return`Q${Math.floor(e.getMonth()/3)+1} ${e.getFullYear()}`;case"annually":return`${e.getFullYear()}`;default:return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}}catch{return}}function Bv(e,t,n,a="0-100"){if(t)return t;if(n)return n;const o=e.filter(l=>l!=null);if(!o.length)return;const s=Math.min(...o),i=Math.max(...o);if(a==="0-1"){if(s>=0&&i<=1&&i>0)return"%"}else if(s>=0&&i<=100&&i>0)return"%"}function Hv(e,t,n=1){switch(e||t){case"hourly":return n===1?"last hour":`last ${n} hours`;case"daily":return n===1?"last day":`last ${n} days`;case"weekly":return n===1?"last week":`last ${n} weeks`;case"monthly":return n===1?"last month":`last ${n} months`;case"quarterly":return n===1?"last quarter":`last ${n} quarters`;case"annually":return n===1?"last year":`last ${n} years`;default:return"previous"}}function Hd(e){const{values:t,dates:n,intervalHint:a,startDate:o,providedUnit:s,defaultUnit:i,autoValue:l=!0,autoDelta:c=!0,autoMetadata:d=!0,deltaConfig:u}=e,f=t.map(x=>typeof x=="number"?x:x==null?null:Number(x));let h=-1;for(let x=f.length-1;x>=0;x--)if(f[x]!=null){h=x;break}let p=(n||[]).map(Pd);if(!p.some(Boolean)){const x=Pd(o);x&&a?p=Fv(f.length,x,a):p=new Array(f.length).fill(void 0)}const m=Pv(p,a),g=Bv(f,s,i,e.percentHeuristic),C=l&&h>=0&&f[h]!=null?f[h]:void 0,j={strategy:"previous",n:1,absolute:!0,skipNulls:!0,...u||{}};function M(){if(h<0)return-1;if(j.strategy==="previous"||j.strategy==="n-points"){let F=h-(j.strategy==="previous"?1:Math.max(1,j.n||1));if(!j.skipNulls)return F;for(let T=F;T>=0;T--)if(f[T]!=null)return T;return-1}const x=p[h];if(!x)return-1;const S=new Date(x);S.setFullYear(S.getFullYear()-1);let A=-1,D=1/0;for(let F=0;F<p.length;F++){const T=p[F];if(!T||f[F]==null)continue;const L=Math.abs(T.getTime()-S.getTime());L<D&&(D=L,A=F)}return A}const N=M(),w=N>=0?f[N]:null;let _;if(c&&C!=null&&w!=null){const x=C-w,S=j.absolute!==!1,A=S?x:w===0?0:x/Math.abs(w)*100;_={value:Number.isFinite(A)?Number(A.toFixed(2)):0,isPercent:S?g==="%":!0,period:`vs ${Hv(m,a,j.strategy==="n-points"?Math.max(1,j.n||1):1)}`}}const I=h>=0?p[h]:void 0,v=d&&Bd(I,m)?`Latest: ${Bd(I,m)}`:void 0;return{value:C,unit:g,delta:_,metadata:v,latestDate:I,frequency:m}}function zv(e){const{rows:t}=hr(e),n=Is(e);return{rows:t,visuals:n.visuals}}const $s=13;function Fs(e){if(!(!e||e.length===0))return e.map(t=>{switch(t){case rt.Improvement:return Ye.Improvement;case rt.Concern:return Ye.Concern;case rt.NoJudgement:return Ye.Neither;default:return null}})}function zd(e){if(!(!e||e.length===0))return e.map(t=>t===rt.NoJudgement)}function Rd(e,t){const n=e===kt.G?kt.G:e===kt.T?kt.T:kt.XmR,a=t===Ze.Up?Ze.Up:t===Ze.Down?Ze.Down:Ze.Neither;return{chartType:n,metricImprovement:a}}function Od(e,t,n){const a=typeof e?.minimumPoints=="number"&&!isNaN(e.minimumPoints)?e.minimumPoints:$s,o={minimumPoints:a};return t.filter(i=>!i.ghost&&typeof i.value=="number").length>=a&&(o.chartLevelEligibility=!0),e?.enableFourOfFiveRule!=null&&(o.enableFourOfFiveRule=!!e.enableFourOfFiveRule),n&&Object.assign(o,n),Object.keys(o).length?o:void 0}function Rv(e,t,n){const a=X.useMemo(()=>{if(!e||e.length<2)return!1;const i=Math.min(e[0],e[1]),l=Math.max(e[0],e[1]);return!(0>=i&&0<=l)},[e]),{slotPx:o,totalReservedPx:s}=X.useMemo(()=>{if(!a)return{slotPx:0,totalReservedPx:0};const l=(t??260)-60,c=ar,u=c+Yc,f=n?.maxFraction,h=Math.max(or,Math.floor(l*f)),p=Math.min(u,h);return{slotPx:Math.min(c,p),totalReservedPx:p}},[a,t,n?.maxFraction]);return{show:a,slotPx:o,totalReservedPx:s}}function Ov(e,t,n,a){if(n.percentScale){const c=e.map(f=>f.y),d=Math.max(100,...c),u=Math.min(0,...c);return[u<0?u:0,d>100?d:100]}const o=e.map(c=>c.y),s=c=>{c!=null&&o.push(c)};if(s(t.mean),s(t.ucl),s(t.lcl),s(t.onePos),s(t.oneNeg),s(t.twoPos),s(t.twoNeg),a&&a.length)for(const c of a)typeof c=="number"&&!isNaN(c)&&o.push(c);if(!o.length)return;let i=Math.min(...o),l=Math.max(...o);return n.alwaysShowZeroY&&(i=Math.min(0,i)),n.alwaysShowHundredY&&(l=Math.max(100,l)),[i,l]}function Ps(e,t){if(!e?.length||t.chartType!==kt.XmR)return null;const n=Math.max(2,Math.floor(t.shiftLength??6)),a=[];for(let p=0;p<e.length;p++){const y=e[p],m=y.value;y?.ghost||typeof m=="number"&&Number.isFinite(m)&&a.push({idx:p,value:m})}if(a.length<n*2)return null;let o=0,s=0;for(let p=1;p<a.length;p++)o+=Math.abs(a[p].value-a[p-1].value),s++;if(s===0)return null;const l=o/s*(2.66/3);if(!Number.isFinite(l)||l<=0)return null;const c=Math.max(0,t.deltaSigma??.5),d=t.metricImprovement===Ze.Up,u=t.metricImprovement===Ze.Down,f=(()=>{for(let p=e.length-1;p>=0;p--)if(e[p]?.baseline)return p;return-1})();function h(p,y){let m=0,g=0;for(let C=p;C<y;C++)m+=a[C].value,g++;return g?m/g:NaN}for(let p=n;p<=a.length-n;p++){const y=h(p-n,p),m=h(p,p+n);if(!Number.isFinite(y)||!Number.isFinite(m))continue;const g=m-y,C=g/l;let j=!1,M=!1;if(d?(j=C>=c,M=!0):u?(j=-C>=c,M=!1):(j=Math.abs(C)>=c,M=g>0),!j)continue;const N=I=>M?I>y:I<y;let w=!0;for(let I=p;I<p+n;I++)if(!N(a[I].value)){w=!1;break}if(!w)continue;const _=a[p].idx;if(!(t.minGap&&f>=0&&_-f<t.minGap))return _}return null}function Uv(e,t){const n=Ps(e,t);return n==null?e.slice():e.map((a,o)=>o===n?{...a,baseline:!0}:a)}function Wv(e,t){const n=Math.max(1,Math.floor(t.maxInsertions??1));if(n<=1)return Uv(e,t);let a=e.slice(),o=0;const s=Math.max(1,t.minGap??0);for(;o<n;){const i=Ps(a,{...t,minGap:s});if(i==null)break;if(a[i]?.baseline){const l=Ps(a,{...t,minGap:s+1});if(l==null||l===i)break;a=a.map((c,d)=>d===l?{...c,baseline:!0}:c),o++;continue}a=a.map((l,c)=>c===i?{...l,baseline:!0}:l),o++}return a}const Ud=e=>{const t=X.useCallback(je=>String(je).replace(/^spc_warning_code\.?/i,"").replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(Se=>Se.length?Se[0].toUpperCase()+Se.slice(1):Se).join(" "),[]),n=X.useCallback(je=>String(je).replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(Ie=>Ie.length?Ie[0].toUpperCase()+Ie.slice(1):Ie).join(" "),[]);process.env.NODE_ENV!=="production"&&e.disableTrendSideGating!==void 0&&console.warn("SPCChart: 'disableTrendSideGating' prop is deprecated and ignored (trend side gating always enabled).");const{effData:a,effTargets:o,effBaselines:s,effGhosts:i,effChartTypeCore:l,effMetricImprovementCore:c,effEngineSettings:d,effAlwaysShowZeroY:u,effAlwaysShowHundredY:f,effPercentScale:h,effGradientSequences:p,effSequenceTransition:y,effProcessLineWidth:m,effTrendVisualMode:g,effShowTrendGatingExplanation:C,effEnableNeutralNoJudgement:j,effEnableRules:M,effShowPartitionMarkers:N,effShowTrendStartMarkers:w,effShowFirstFavourableCrossMarkers:_,effShowTrendBridgeOverlay:I,effShowSignalsInspector:v,effOnSignalFocus:x,effShowWarningsPanel:S,effWarningsFilter:A,effShowEmbeddedIcon:D,effEmbeddedIconVariant:F,effEmbeddedIconRunLength:T,effShowFocusIndicator:L,effHeight:$,effClassName:O,effAriaLabel:J,effUnit:ee,effNarrationContext:ae,effShowZones:R,effShowPoints:B,effHighlightOutOfControl:E,effVisualsScenario:Y,effVisualsEngineSettings:P,effSource:W,effPrecomputedVisuals:H,effEngineAutoRecalc:Q}=Lv(e),q=J??e.ariaLabel,te=$??e.height??260,fe=O??e.className,Z=ee??e.unit,se=ae??e.narrationContext,de=R??e.showZones,ve=B??e.showPoints,me=E??e.highlightOutOfControl,De=Y??e.visualsScenario??Td.None,Ge=P??e.visualsEngineSettings,Le=W??e.source,Ae=e.a11y?.announceFocus??e.announceFocus??!1,_e=X.useMemo(()=>a.map((je,Ie)=>({x:je.x,value:je.y,target:o?.[Ie]??void 0,baseline:s?.[Ie]??void 0,ghost:i?.[Ie]??void 0})),[a,o,s,i]),z=X.useMemo(()=>{try{const je=Q;return je?.enabled?Wv(_e,{chartType:l,metricImprovement:c,shiftLength:je.shiftLength,deltaSigma:je.deltaSigma,minGap:je.minGap,maxInsertions:je.maxInsertions}):_e}catch{return _e}},[_e,Q,l,c]),K=X.useMemo(()=>{if(H?.visuals)return H.visuals;try{const je=Od(d,z,Ge),{chartType:Ie,metricImprovement:Se}=Rd(l,c),Me={chartType:Ie,metricImprovement:Se,data:z,settings:je},{visuals:Je}=vv(Me,De,{trendVisualMode:g===Fd.Ungated?Hn.Ungated:Hn.Gated,enableNeutralNoJudgement:j});return Je||[]}catch{return[]}},[H?.visuals?.length,z,l,c,g,j,d,De,Ge]),pe=X.useMemo(()=>{if(H?.rows)try{const je=H.rows,Ie=Se=>{switch(Se){case Fe.ImprovementHigh:case Fe.ImprovementLow:return Ye.Improvement;case Fe.ConcernHigh:case Fe.ConcernLow:return Ye.Concern;case Fe.NeitherHigh:case Fe.NeitherLow:return Ye.Neither;case Fe.CommonCause:default:return Ye.Neither}};return je.map((Se,Me)=>({data:{value:Se.value,ghost:!!Se.ghost},partition:{id:Se.partitionId},limits:{mean:Se.mean,ucl:Se.upperProcessLimit,lcl:Se.lowerProcessLimit,oneSigma:{upper:Se.upperOneSigma,lower:Se.lowerOneSigma},twoSigma:{upper:Se.upperTwoSigma,lower:Se.lowerTwoSigma}},rules:{singlePoint:{up:!!Se.singlePointUp,down:!!Se.singlePointDown},twoOfThree:{up:!!Se.twoSigmaUp,down:!!Se.twoSigmaDown},fourOfFive:{up:!!Se.fourOfFiveUp,down:!!Se.fourOfFiveDown},shift:{up:!!Se.shiftUp,down:!!Se.shiftDown},trend:{up:!!Se.trendUp,down:!!Se.trendDown}},classification:{variation:Ie(Se.variationIcon),neutralSpecialCauseValue:Se.variationIcon===Fe.NeitherHigh||Se.variationIcon===Fe.NeitherLow?Se.specialCauseImprovementValue??Se.specialCauseConcernValue??1:null,assurance:void 0},target:z[Me]?.target??null}))}catch{return null}try{const je=Od(d,z,Ge),{chartType:Ie,metricImprovement:Se}=Rd(l,c),Me={chartType:Ie,metricImprovement:Se,data:z,settings:je},{rows:Je}=zv(Me),tt=Ee=>{switch(Ee){case Fe.ImprovementHigh:case Fe.ImprovementLow:return Ye.Improvement;case Fe.ConcernHigh:case Fe.ConcernLow:return Ye.Concern;case Fe.NeitherHigh:case Fe.NeitherLow:return Ye.Neither;case Fe.CommonCause:default:return Ye.Neither}};return Je.map((Ee,Pe)=>({data:{value:Ee.value,ghost:!!Ee.ghost},partition:{id:Ee.partitionId},limits:{mean:Ee.mean,ucl:Ee.upperProcessLimit,lcl:Ee.lowerProcessLimit,oneSigma:{upper:Ee.upperOneSigma,lower:Ee.lowerOneSigma},twoSigma:{upper:Ee.upperTwoSigma,lower:Ee.lowerTwoSigma}},rules:{singlePoint:{up:!!Ee.singlePointUp,down:!!Ee.singlePointDown},twoOfThree:{up:!!Ee.twoSigmaUp,down:!!Ee.twoSigmaDown},fourOfFive:{up:!!Ee.fourOfFiveUp,down:!!Ee.fourOfFiveDown},shift:{up:!!Ee.shiftUp,down:!!Ee.shiftDown},trend:{up:!!Ee.trendUp,down:!!Ee.trendDown}},classification:{variation:tt(Ee.variationIcon),neutralSpecialCauseValue:Ee.variationIcon===Fe.NeitherHigh||Ee.variationIcon===Fe.NeitherLow?Ee.specialCauseImprovementValue??Ee.specialCauseConcernValue??1:null,assurance:void 0},target:z[Pe]?.target??null}))}catch{return null}},[H?.rows?.length,z,l,c,d,Ge])||null,ge=(pe||[]).slice().reverse().find(je=>je.limits.mean!=null),U=ge?.limits.mean??null,V=X.useMemo(()=>{const je=[];try{const Ie=pe,Se=d?.minimumPoints??13,Me=d?.minimumPoints??12;if(Ie&&Ie.length){const Je=Ie.filter(Ee=>!Ee.data.ghost&&Ee.data.value!=null).length;Je<Se&&je.push({code:Ha.InsufficientPointsGlobal,severity:$t.Warning,category:Ba.Data,message:"Not enough non-ghost points to compute stable limits/icons.",context:{nonGhostCount:Je,minimumPoints:Se}});const tt=new Map;for(const Ee of Ie){const Pe=Ee.partition.id??0,Ue=tt.get(Pe)||{size:0,nonGhost:0};Ue.size+=1,!Ee.data.ghost&&Ee.data.value!=null&&(Ue.nonGhost+=1),tt.set(Pe,Ue)}for(const[Ee,Pe]of tt)Pe.nonGhost>0&&Pe.nonGhost<Me&&je.push({code:Ha.InsufficientPointsPartition,severity:$t.Warning,category:Ba.Partition,message:"A partition/baseline segment has too few points for recommended stability.",context:{partitionId:Ee,nonGhostCount:Pe.nonGhost,minimumPointsPartition:Me}})}}catch{}return je},[pe,d?.minimumPoints]),ie=X.useMemo(()=>V.length?A?V.filter(je=>!(A.severities&&je.severity&&!A.severities.includes(je.severity)||A.categories&&je.category&&!A.categories.includes(je.category)||A.codes&&!A.codes.includes(je.code))):V:[],[V,A]),ne=ge?.limits.ucl??null,oe=ge?.limits.lcl??null,ue=ge?.limits.oneSigma.upper??null,he=ge?.limits.oneSigma.lower??null,we=ge?.limits.twoSigma.upper??null,Ne=ge?.limits.twoSigma.lower??null,ze=U!=null&&ue!=null?Math.abs(ue-U):0,Ve=X.useMemo(()=>[{id:"process",data:a,color:"#A6A6A6"}],[a]),ot=X.useMemo(()=>Ov(a,{mean:U,ucl:ne,lcl:oe,onePos:ue,oneNeg:he,twoPos:we,twoNeg:Ne},{alwaysShowZeroY:!!u,alwaysShowHundredY:!!f,percentScale:!!h},o??null),[a,U,ne,oe,ue,he,we,Ne,o,u,f,h]),Xe=X.useMemo(()=>{const je=Ie=>{const Se=Ie.filter(Je=>typeof Je=="number"&&!isNaN(Je));if(!Se.length)return null;const Me=Se[0];return Se.every(Je=>Je===Me)?Me:null};if(pe&&pe.length){const Ie=je(pe.map(Se=>Se.target));if(Ie!=null)return Ie}return o&&o.length?je(o):null},[pe,o]),{show:ce,slotPx:$e,totalReservedPx:G}=Rv(ot,te,{maxFraction:.35}),re=ce?G:0,ye=X.useMemo(()=>{const je=a.map(Ie=>Ie.x);return Hd({values:a.map(Ie=>Ie.y),dates:je,providedUnit:Z||se?.measureUnit,percentHeuristic:"0-1",autoValue:!1,autoDelta:!1,autoMetadata:!1})},[a,Z,se?.measureUnit]),be=Z??se?.measureUnit??ye.unit,xe=X.useMemo(()=>be?{...se||{},measureUnit:be}:se,[se,be]),ke=X.useMemo(()=>{if(!pe)return[];const je=[];for(let Ie=1;Ie<pe.length;Ie++)pe[Ie].partition.id!==pe[Ie-1].partition.id&&je.push(Ie);return je},[pe]),He=X.useMemo(()=>Iv({show:!!D,rowsForUi:pe,minPoints:d?.minimumPoints??13,metricImprovement:c,variant:F,runLength:T}),[D,pe,d?.minimumPoints,c,F,T]);return r.jsxs("div",{className:fe?`fdp-spc-chart-wrapper ${fe}`:"fdp-spc-chart-wrapper",children:[r.jsx(jv,{show:!!D,variationNode:He,assuranceNode:null}),r.jsx(Gc,{height:te,ariaLabel:q,margin:{bottom:48,left:56,right:16,top:12},children:r.jsx(Vc,{series:Ve,yDomain:ot,yBottomGapPx:re,children:(()=>{const je={data:{series:Ve,engineRows:pe,visualCategories:K,partitionMarkers:N?ke:[]},targets:{limits:{mean:U,ucl:ne,lcl:oe,sigma:ze,onePos:ue,oneNeg:he,twoPos:we,twoNeg:Ne},uniformTarget:Xe},visuals:{showPoints:ve,showZones:de,highlightOutOfControl:me,gradientSequences:p,sequenceTransition:y,processLineWidth:m,showFocusIndicator:L,enableRules:M,enableNeutralNoJudgement:j,showTrendStartMarkers:w,showFirstFavourableCrossMarkers:_,showTrendBridgeOverlay:I},a11y:{announceFocus:Ae,ariaLabel:q,narrationContext:xe,showSignalsInspector:v,onSignalFocus:x,showTrendGatingExplanation:C},axis:{zeroBreakSlotGapPx:$e},compute:{effectiveUnit:be,metricImprovement:c}};return r.jsx(Ev,{...je})})()})}),Le&&r.jsx("div",{className:"fdp-spc-chart__source","aria-label":"Chart data source",children:typeof Le=="string"?r.jsxs("small",{children:["Source: ",Le]}):Le}),r.jsx(Nv,{show:!!S,warnings:ie,formatWarningCategory:n,formatWarningCode:t})]})};function Gv(e,t){const{chartType:n=kt.XmR,metricImprovement:a,minimumPoints:o=$s,enableNeutralNoJudgement:s=!0,includeSignalFallbacks:i=!0}=t,l=e.map(M=>({x:M.x,value:M.value??M.y??null}));let c=null;try{const M=l.filter(w=>typeof w.value=="number").length,N={minimumPoints:o};M>=o&&(N.chartLevelEligibility=!0),c=hr({chartType:n,metricImprovement:a,data:l,settings:N})}catch{c=null}const d=c?.rows??[];let u=d[d.length-1]??null;for(let M=d.length-1;M>=0;M--){const N=d[M];if(N&&N.value!=null&&!N.ghost){u=N;break}}let f=[];try{f=fr(d,{metricImprovement:a,enableNeutralNoJudgement:s})}catch{f=[]}const h=za(u?.variationIcon),p=u?.variationIcon??null,y=u?.mean??null,m=u?{lower:u?.lowerProcessLimit??null,upper:u?.upperProcessLimit??null}:null,g=u?{upperOne:u?.upperOneSigma??null,upperTwo:u?.upperTwoSigma??null,lowerOne:u?.lowerOneSigma??null,lowerTwo:u?.lowerTwoSigma??null}:null;let C,j;return i&&(C=Fs(f),j=zd(f)),{rows:d,visuals:f,latestState:h,lastVariationIcon:p,centerLine:y,controlLimits:m,sigmaBands:g,pointSignals:C,pointNeutralSpecialCause:j}}const Vv=Object.freeze(Object.defineProperty({__proto__:null,AssuranceIcon:on,BaselineSuggestionReason:fd,ChartType:kt,DEFAULT_MIN_POINTS:$s,Icons:Mv,ImprovementDirection:Ze,PARITY_V26:Ld,RULE_METADATA:ud,SPCChart:Ud,SPCSpark:As,SPCTooltipOverlay:$d,SparkSize:lt,SpcEmbeddedIconVariant:vn,SpcVisualCategory:rt,SpcWarningCategory:Ba,SpcWarningCode:Ha,SpcWarningSeverity:$t,VARIATION_COLOR_TOKENS:Mt,VariationIcon:Fe,buildSpcV26a:hr,buildSpcV26aWithVisuals:Is,computeSpcPrecomputed:Gv,computeSpcVisualCategories:fr,extractRuleIds:Ta,getVariationColorHex:av,getVariationColorToken:pd,isSpecialCauseIcon:Ed,mapIconToVariation:za,normaliseSpcSettingsV2:Dd,ruleGlossary:$n,variationLabel:La,visualsToNeutralFlags:zd,visualsToPointSignals:Fs,withParityV26:wv},Symbol.toStringTag,{value:"Module"}));function Yv(e){const t=e.replace("#","");return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Wd(e){const{values:t,x:n,chartType:a=kt.XmR,metricImprovement:o=Ze.Neither,showLimits:s=!0,showLimitBand:i=!1,showInnerBands:l=!1,showMean:c=!1}=e,d=X.useMemo(()=>{const w=[];for(let _=0;_<t.length;_++)w.push({x:n?.[_],value:t[_]});return w},[t,n]),u=X.useMemo(()=>{try{const w=d.map((x,S)=>({x:x.x??S,value:x.value})),_=13,I=w.filter(x=>typeof x.value=="number").length,v={minimumPoints:_};return I>=_&&(v.chartLevelEligibility=!0),hr({chartType:a,metricImprovement:o,data:w,settings:v})}catch{return null}},[d,a,o]),f=X.useMemo(()=>{const w=u?.rows;if(!w||w.length===0)return null;for(let _=w.length-1;_>=0;_--){const I=w[_];if(I&&I.value!=null&&!I.ghost)return I}return w[w.length-1]??null},[u]),h=X.useMemo(()=>{const w=u?.rows;if(!w||w.length===0)return null;let _=w[w.length-1];for(let I=w.length-1;I>=0;I--){const v=w[I];if(v&&v.value!=null&&!v.ghost){_=v;break}}return za(_?.variationIcon)},[u]),p=X.useMemo(()=>f?.mean??null,[f]),y=X.useMemo(()=>{if(!f)return null;const w=f?.lowerProcessLimit??null,_=f?.upperProcessLimit??null;return w==null&&_==null?null:{lower:w,upper:_}},[f]),m=X.useMemo(()=>f?{upperOne:f?.upperOneSigma??null,upperTwo:f?.upperTwoSigma??null,lowerOne:f?.lowerOneSigma??null,lowerTwo:f?.lowerTwoSigma??null}:null,[f]),g=X.useMemo(()=>{const w=u?.rows;if(!(!w||w.length===0))try{return fr(w,{metricImprovement:o,enableNeutralNoJudgement:!0})}catch{return}},[u,o]),C=X.useMemo(()=>Fs(g),[g?.length]),j=X.useMemo(()=>{if(!(!g||g.length===0))return g.map(w=>w===rt.NoJudgement)},[g?.length]),M=X.useMemo(()=>{let w=null;if(f&&f.value!=null&&!f.ghost){const F=f.variationIcon;h===Be.SpecialCauseNoJudgement?w=Ed(F)?Be.SpecialCauseNoJudgement:Be.CommonCause:w=za(F)??Be.CommonCause}const _=w??Be.CommonCause,I=Aa[_].hex,[v,x,S]=Yv(I),A=Ea();return{"--fdp-metric-card-bg":`linear-gradient(180deg, rgba(${v}, ${x}, ${S}, ${A.start}) 0%, rgba(${v}, ${x}, ${S}, ${A.mid}) 50%, rgba(${v}, ${x}, ${S}, ${A.end}) 100%)`,"--fdp-metric-card-accent":I}},[f,h]);return{sparkProps:X.useMemo(()=>({data:d,showMean:c,showLimits:s,showLimitBand:i,showInnerBands:l,metricImprovement:o,centerLine:p,controlLimits:y,sigmaBands:m,pointSignals:C,pointNeutralSpecialCause:j,visualCategories:g,variationState:h??void 0}),[d,c,s,i,l,o,h,p,y?.lower,y?.upper,m?.upperTwo,m?.lowerOne,m?.lowerTwo,C?.length,j?.length,g?.length]),metricCardStyle:M,latestState:h}}const Zv=({sparkData:e,direction:t=Ze.Neither,showMean:n=!1,showLimits:a=!0,showLimitBand:o=!1,showInnerBands:s=!1,maxPoints:i,autoValue:l=!0,autoDelta:c=!0,autoMetadata:d=!0,defaultUnit:u,intervalHint:f,startDate:h,deltaConfig:p,...y})=>{const m=Wd({values:e.map(_=>_.value??null),metricImprovement:t,showLimits:a,showLimitBand:o,showInnerBands:s,showMean:n}),g=r.jsx(As,{...m.sparkProps,maxPoints:i}),C=X.useMemo(()=>Hd({values:e.map(_=>typeof _.value=="number"?_.value:null),dates:e.map(_=>_.date),intervalHint:f,startDate:h,providedUnit:y.unit,defaultUnit:u,autoValue:l,autoDelta:c,autoMetadata:d,deltaConfig:p}),[e,f,h,y.unit,u,l,c,d,p]),j=l&&C.value!=null?C.value:y.value,M=c&&C.delta?C.delta:y.delta,N=C.unit||y.unit,w=d&&C.metadata?C.metadata:y.metadata;return r.jsx(cd,{...y,value:j,unit:N,delta:M,metadata:w,visual:g,style:m.metricCardStyle})};function qv(e){return function(){let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}function Jv(e="auto"){const[t,n]=k.useState(!1);return k.useEffect(()=>{if(e!=="auto"||typeof window>"u"||!window.matchMedia)return;const a=window.matchMedia("(prefers-reduced-motion: reduce)"),o=()=>n(a.matches);return o(),a.addEventListener?.("change",o),()=>a.removeEventListener?.("change",o)},[e]),e==="off"?!1:t}function Gd(e,t){return t[Math.floor(e()*t.length)]}function ln(e,t,n){return Math.max(t,Math.min(n,e))}function Xv(e,t){const n=e.seed??1,a=qv(n),o=Math.max(6,Math.min(48,Math.round(e.density??18))),s=["circle","hexagon","rect"],i=[],l=e.gradients&&e.gradients.length>0?e.gradients:["nhs-fdp-gradient-blue","nhs-fdp-gradient-aqua","nhs-fdp-gradient-green"],d=(typeof e.callout.width=="number"?e.callout.width:void 0)??Math.min(520,t*.7),u=(t-d)/2,f=u+d,h={left:u/t*100,right:f/t*100,top:20,bottom:80},p=(m,g)=>!(m>h.left-6&&m<h.right+6&&g>h.top-10&&g<h.bottom+10);let y=0;for(;i.length<o&&y<o*50;){y++;const m=Gd(a,s),g=ln(a()*1,.15,.95),C=24+a()*72,j=a()*100,M=a()*100;if(!p(j,M))continue;const N=Gd(a,l);if(m==="rect"){const w=.6+a()*.8;i.push({kind:m,width:C*w,height:C,x:j,y:M,depth:g,fillToken:N,shadow:"soft"})}else i.push({kind:m,size:C,x:j,y:M,depth:g,fillToken:N,shadow:"soft"})}return i}const Kv=e=>{const{seed:t=1,mode:n="scroll",axis:a="xy",height:o=520,strength:s=120,pin:i=!1,reducedMotion:l="auto",callout:c,className:d,style:u}=e,f=k.useRef(null),[h,p]=k.useState({w:1e3,h:520}),y=Jv(l),m=e.direction??"se",g=k.useMemo(()=>{switch(m){case"ne":return{x:1,y:-1};case"nw":return{x:-1,y:-1};case"sw":return{x:-1,y:1};case"se":default:return{x:1,y:1}}},[m]);k.useLayoutEffect(()=>{if(!f.current)return;const v=new ResizeObserver(x=>{for(const S of x){const A=S.contentRect;p({w:A.width,h:A.height})}});return v.observe(f.current),()=>v.disconnect()},[]);const C=k.useMemo(()=>e.shapes&&e.shapes.length?e.shapes:Xv(e,h.w),[t,h.w,h.h]),[j,M]=k.useState(0),[N,w]=k.useState(null);k.useEffect(()=>{if(n!=="scroll"||y||typeof window>"u")return;const v=f.current;if(!v)return;const x=()=>{const S=v.getBoundingClientRect(),A=window.innerHeight||document.documentElement.clientHeight,D=S.height+A,F=A-S.top,T=ln(F/D,0,1);w(L=>L===null?T:L),M(T)};return x(),window.addEventListener("scroll",x,{passive:!0}),window.addEventListener("resize",x),()=>{window.removeEventListener("scroll",x),window.removeEventListener("resize",x)}},[n,y]),k.useEffect(()=>{if(n!=="timed"||y)return;let v=0,x=performance.now();const S=8e3,A=D=>{const T=(D-x)%S/S;M(T),v=requestAnimationFrame(A)};return v=requestAnimationFrame(A),()=>cancelAnimationFrame(v)},[n,y]);const _=v=>.15+(v??.5)*.6,I={position:"absolute",left:"50%",top:"50%",bottom:void 0,right:void 0,transform:"translate(-50%, -50%)",width:typeof c.width=="number"?`${c.width}px`:c.width||"min(520px, 70%)"};return r.jsxs("div",{ref:f,className:["nhs-parallax-scene",d].filter(Boolean).join(" "),style:{position:"relative",height:typeof o=="number"?`${o}px`:o,overflow:"hidden",...u},"aria-hidden":!0,children:[r.jsxs("svg",{className:"nhs-parallax-canvas",width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none","aria-hidden":!0,children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"fdpgradient-blue",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#2E61A5"}),r.jsx("stop",{offset:"100%",stopColor:"#1B3E73"})]}),r.jsxs("linearGradient",{id:"fdpgradient-aqua",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#1DC6D2"}),r.jsx("stop",{offset:"100%",stopColor:"#117E8A"})]}),r.jsxs("linearGradient",{id:"fdpgradient-green",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#2BC06A"}),r.jsx("stop",{offset:"100%",stopColor:"#1A874A"})]}),r.jsxs("linearGradient",{id:"fdpgradient-dark-blue",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#005eb8"}),r.jsx("stop",{offset:"100%",stopColor:"#003087"})]}),r.jsxs("linearGradient",{id:"fdpgradient-light-blue",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#005eb8"}),r.jsx("stop",{offset:"100%",stopColor:"#60b2e2"})]}),r.jsxs("linearGradient",{id:"fdpgradient-purple",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#ac98cb"}),r.jsx("stop",{offset:"100%",stopColor:"#d6cce3"})]}),r.jsxs("linearGradient",{id:"fdpgradient-green-palette",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#007f3b"}),r.jsx("stop",{offset:"100%",stopColor:"#63a691"})]}),r.jsxs("linearGradient",{id:"fdpgradient-grey",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#4c6272"}),r.jsx("stop",{offset:"100%",stopColor:"#768692"})]})]}),r.jsx("g",{className:"nhs-parallax-connectors",children:C.map((v,x)=>{const S=v.x,A=v.y,D=(v.width??v.size??40)/h.w*100*1,F=(v.height??v.size??40)/h.h*100*1,T=v.kind==="circle"?[[S,A-F/2],[S+D/2,A],[S,A+F/2],[S-D/2,A]]:v.kind==="rect"||v.kind==="svg"?[[S-D/2,A-F/2],[S+D/2,A-F/2],[S+D/2,A+F/2],[S-D/2,A+F/2]]:[[S-D/2,A],[S-D/4,A-F/2],[S+D/4,A-F/2],[S+D/2,A],[S+D/4,A+F/2],[S-D/4,A+F/2]],L=_(v.depth),J=(i?j:j-(N??.5))*s*L,ee=a==="x"?J:a==="xy"?J*g.x:0,ae=a==="y"?J:a==="xy"?J*g.y:0;return T.map((R,B)=>r.jsx("line",{x1:ln(R[0]+ee,0,100),y1:ln(R[1]+ae,0,100),x2:ln(50+ee*.2,0,100),y2:ln(50+ae*.2,0,100),className:"nhs-parallax-connector"},`c-${x}-${B}`))})}),r.jsx("g",{className:"nhs-parallax-shapes",children:C.map((v,x)=>{const S=_(v.depth),F=(i?j:j-(N??.5))*s*S,T=a==="x"?F:a==="xy"?F*g.x:0,L=a==="y"?F:a==="xy"?F*g.y:0,$=ln(v.x+T,0,100),O=ln(v.y+L,0,100),J=v.rotate??0,ee=["nhs-parallax-shape",v.fillToken,v.shadow&&`nhs-parallax-shadow--${v.shadow}`].filter(Boolean).join(" ");if(v.kind==="circle"){const E=(v.size??40)/h.w*100*.5;return r.jsx("circle",{cx:$,cy:O,r:E,className:ee},x)}if(v.kind==="rect"){const E=(v.width??48)/h.w*100,Y=(v.height??36)/h.h*100;return r.jsx("rect",{x:$-E/2,y:O-Y/2,width:E,height:Y,transform:`rotate(${J} ${$} ${O})`,className:ee},x)}if(v.kind==="svg"&&v.src){const E=(v.width??48)/h.w*100,Y=(v.height??48)/h.h*100;return r.jsx("image",{href:v.src,x:$-E/2,y:O-Y/2,width:E,height:Y,preserveAspectRatio:"xMidYMid meet",transform:`rotate(${J} ${$} ${O})`,className:ee},x)}const ae=(v.size??40)/h.w*100,R=ae*.866,B=[[$-ae/2,O],[$-ae/4,O-R/2],[$+ae/4,O-R/2],[$+ae/2,O],[$+ae/4,O+R/2],[$-ae/4,O+R/2]].map(E=>E.join(",")).join(" ");return r.jsx("polygon",{points:B,className:ee},x)})})]}),r.jsx("div",{className:"nhs-parallax-callout",style:I,"aria-hidden":!1,children:r.jsxs("div",{className:["nhs-parallax-callout-inner",c.backgroundToken].filter(Boolean).join(" "),children:[" ",c.content," "]})})]})};function Qv(e){return function(){let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}function ct(e,t,n){return Math.max(t,Math.min(n,e))}function e1(e,t,n,a,o,s,i,l,c,d,u,f){const h=Qv(e),p=[],y=[],m=["rect","hex","circle"],g={x:50,y:50},C=a,j=1200,M=400,N=1.2,w={left:g.x-C.w/2,right:g.x+C.w/2,top:g.y-C.h/2,bottom:g.y+C.h/2},_=!c&&!!u&&u.r>0,I=!c&&!!f&&(f.rx>0||f.ry>0),v=($,O)=>{if(!_)return!1;const J=$-g.x,ee=O-g.y;return J*J+ee*ee<=u.r*u.r},x=($,O)=>{if(!I)return!1;const J=Math.max(1e-6,f.rx||0),ee=Math.max(1e-6,f.ry||0),ae=($-g.x)/J,R=(O-g.y)/ee;return ae*ae+R*R<=1},S=($,O)=>!($.right<O.left||$.left>O.right||$.bottom<O.top||$.top>O.bottom),A=$=>$.left>=0&&$.top>=0&&$.right<=100&&$.bottom<=100,D=($,O,J,ee,ae,R)=>{let B=0,E=0;if($==="rect"){const Y=ee??48,P=ae??36;B=Y/j*100,E=P/M*100}else if($==="circle"){const Y=R??40;B=Y/j*100,E=Y/M*100}else{const Y=R??40;B=Y/j*100,E=Y*s/M*100}return{left:O-B/2-N,right:O+B/2+N,top:J-E/2-N,bottom:J+E/2+N}};let F=0;const T=ct(Math.round(t),4,48);let L=null;if(d){const $=Math.ceil(Math.sqrt(T)),O=Math.ceil(T/$);L=[];for(let J=0;J<O;J++)for(let ee=0;ee<$&&!(L.length>=T);ee++){const ae=(ee+.5)/$*100,R=(J+.5)/O*100;L.push({x:ae,y:R})}}for(;p.length<T&&F<T*120;){F++;const $=m[Math.floor(h()*m.length)];let O,J;if(d&&L&&L.length){const B=p.length%L.length;O=L[B].x,J=L[B].y}else{const B=ct(o??0,0,1),E=()=>h()*100,Y=()=>{const W=Math.max(h(),1e-6),H=Math.max(h(),1e-6),Q=Math.sqrt(-2*Math.log(W)),q=2*Math.PI*H;return 50+Q*Math.cos(q)*12.5},P=(W,H,Q)=>W*(1-Q)+H*Q;O=ct(P(E(),Y(),B),0,100),J=ct(P(E(),Y(),B),0,100)}const ee=D($,O,J,32,24,28);if(!A(ee))continue;const ae=ct(h(),.15,.95),R=0;if($==="rect"){const B=40+h()*80,E=28+h()*64,Y=D($,O,J,B,E);if(!c&&(S(Y,w)||v(O,J)||x(O,J)))continue;if(!i){let W=!1;for(let H=0;H<y.length;H++)if(S(Y,y[H])){W=!0;break}if(W)continue}let P;if(i){const W=new Set;for(let Q=0;Q<y.length;Q++)if(S(Y,y[Q])){const q=p[Q].fill;q&&W.add(q)}const H=n.filter(Q=>!W.has(Q));if(H.length===0){if(l==="skip")continue;P=n[Math.floor(h()*n.length)]}else P=H[Math.floor(h()*H.length)]}else P=n[Math.floor(h()*n.length)];y.push(Y),p.push({kind:$,x:O,y:J,width:B,height:E,rotate:R,depth:ae,fill:P,shadow:"soft"})}else if($==="circle"){const B=24+h()*80,E=D($,O,J,void 0,void 0,B);if(!c&&(S(E,w)||v(O,J)||x(O,J)))continue;if(!i){let P=!1;for(let W=0;W<y.length;W++)if(S(E,y[W])){P=!0;break}if(P)continue}let Y;if(i){const P=new Set;for(let H=0;H<y.length;H++)if(S(E,y[H])){const Q=p[H].fill;Q&&P.add(Q)}const W=n.filter(H=>!P.has(H));if(W.length===0){if(l==="skip")continue;Y=n[Math.floor(h()*n.length)]}else Y=W[Math.floor(h()*W.length)]}else Y=n[Math.floor(h()*n.length)];y.push(E),p.push({kind:$,x:O,y:J,size:B,rotate:R,depth:ae,fill:Y,shadow:"soft"})}else{const B=28+h()*72,E=D($,O,J,void 0,void 0,B);if(!c&&(S(E,w)||v(O,J)||x(O,J)))continue;if(!i){let P=!1;for(let W=0;W<y.length;W++)if(S(E,y[W])){P=!0;break}if(P)continue}let Y;if(i){const P=new Set;for(let H=0;H<y.length;H++)if(S(E,y[H])){const Q=p[H].fill;Q&&P.add(Q)}const W=n.filter(H=>!P.has(H));if(W.length===0){if(l==="skip")continue;Y=n[Math.floor(h()*n.length)]}else Y=W[Math.floor(h()*W.length)]}else Y=n[Math.floor(h()*n.length)];y.push(E),p.push({kind:$,x:O,y:J,size:B,rotate:R,depth:ae,fill:Y,shadow:"soft"})}}return p}const t1=({seed:e=1,width:t="100%",height:n=400,density:a=16,centrality:o=0,gradients:s=["pb-grad-aqua-green","pb-grad-purple","pb-grad-blue","pb-grad-grey","pb-grad-azure"],shapes:i,neighbors:l=1,connectorColor:c,connectorWidth:d,connectorDasharray:u,hexAspectRatio:f=Math.sqrt(3)/2,allowOverlaps:h=!1,overlapColorPolicy:p="recolor",feature:y,featureWidth:m="min(640px, 80%)",featureLayer:g="over",excludeBoxPct:C={w:50,h:36},excludeCirclePct:j,excludeEllipsePct:M,uniformDistribution:N=!1,className:w,style:_})=>{const I=k.useRef(null),[v,x]=k.useState({w:1200,h:400});k.useLayoutEffect(()=>{if(!I.current)return;const L=new ResizeObserver($=>{for(const O of $){const J=O.contentRect;x({w:J.width,h:J.height})}});return L.observe(I.current),()=>L.disconnect()},[]);const S=k.useMemo(()=>i?.length?i:e1(e,a,s,C,o,f,h,p,g==="over"||N,N,j,M),[e,a,s.join(","),C.w,C.h,o,f,h,p,g,N,j?.r,M?.rx,M?.ry,i]),A=100,D=100,F=Math.sqrt(3)/2,T=(L,$,O)=>{const J=(O??40)/2,ee=L/100*v.w,ae=$/100*v.h,R=f/F;return[Math.PI,2*Math.PI/3,Math.PI/3,0,-Math.PI/3,-(2*Math.PI)/3].map(E=>{const Y=ee+J*Math.cos(E),P=ae+J*Math.sin(E)*R;return[ct(Y/v.w*100,0,100),ct(P/v.h*100,0,100)]})};return r.jsxs("div",{ref:I,className:["nhs-pattern-banner",g==="under"?"nhs-pattern-banner--feature-under":"nhs-pattern-banner--feature-over",w].filter(Boolean).join(" "),style:{width:typeof t=="number"?`${t}px`:t,height:typeof n=="number"?`${n}px`:n,..._},"aria-hidden":!0,children:[r.jsxs("svg",{className:"nhs-pattern-banner__svg",viewBox:`0 0 ${A} ${D}`,preserveAspectRatio:"none","aria-hidden":!0,children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"pb-grad-aqua-green",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[r.jsx("stop",{offset:"0",stopColor:"rgb(0, 163, 151)"}),r.jsx("stop",{offset:"1",stopColor:"rgb(11, 148, 71)"})]}),r.jsxs("linearGradient",{id:"pb-grad-purple",x1:"0",y1:"0",x2:"1",y2:"0",gradientUnits:"objectBoundingBox",children:[r.jsx("stop",{offset:"0",stopColor:"rgb(214, 203, 226)"}),r.jsx("stop",{offset:"0.72",stopColor:"rgb(192, 177, 213)"}),r.jsx("stop",{offset:"1",stopColor:"rgb(171, 151, 199)"})]}),r.jsxs("linearGradient",{id:"pb-grad-blue",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[r.jsx("stop",{offset:"0",stopColor:"rgb(38, 58, 127)"}),r.jsx("stop",{offset:"1",stopColor:"rgb(34, 94, 171)"})]}),r.jsxs("linearGradient",{id:"pb-grad-grey",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[r.jsx("stop",{offset:"0",stopColor:"rgb(66, 85, 101)"}),r.jsx("stop",{offset:"1",stopColor:"rgb(112, 132, 147)"})]}),r.jsxs("linearGradient",{id:"pb-grad-azure",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[r.jsx("stop",{offset:"0",stopColor:"rgb(96, 178, 226)"}),r.jsx("stop",{offset:"0.51",stopColor:"rgb(34, 94, 172)"})]})]}),r.jsx("g",{children:(()=>{const L=B=>B/v.w*100,$=B=>B/v.h*100,O=S.map(B=>{const E=ct(B.x,0,100),Y=ct(B.y,0,100);if(B.kind==="circle")return[[E,Y]];if(B.kind==="rect"){const P=L(B.width??48),W=$(B.height??36);return[[E-P/2,Y-W/2],[E+P/2,Y-W/2],[E+P/2,Y+W/2],[E-P/2,Y+W/2]]}if(B.kind==="svg"){const P=L(B.width??48),W=$(B.height??48);return[[E-P/2,Y-W/2],[E+P/2,Y-W/2],[E+P/2,Y+W/2],[E-P/2,Y+W/2]]}return T(E,Y,B.size??40)}),J=Math.max(1,Math.floor(l??1)),ee=new Set,ae=[];for(let B=0;B<S.length;B++){const E=[];for(let P=0;P<S.length;P++){if(B===P)continue;const W=S[B].x-S[P].x,H=S[B].y-S[P].y;E.push({j:P,d2:W*W+H*H})}E.sort((P,W)=>P.d2-W.d2);const Y=Math.min(J,E.length);for(let P=0;P<Y;P++){const W=E[P].j,H=Math.min(B,W),Q=Math.max(B,W),q=`${H}-${Q}`;ee.has(q)||(ee.add(q),ae.push([H,Q]))}}const R=[];for(const[B,E]of ae){const Y=O[B],P=O[E];let W=null;for(const H of Y)for(const Q of P){const q=H[0]-Q[0],te=H[1]-Q[1],fe=q*q+te*te;(!W||fe<W.d2)&&(W={p:H,q:Q,d2:fe})}W&&R.push(r.jsx("line",{x1:ct(W.p[0],0,100),y1:ct(W.p[1],0,100),x2:ct(W.q[0],0,100),y2:ct(W.q[1],0,100),className:"nhs-pattern-banner-connector",style:{stroke:c,strokeWidth:d,strokeDasharray:u}},`nn-line-${B}-${E}`))}return R})()}),r.jsx("g",{children:S.map((L,$)=>{const O=["nhs-pattern-banner-shape",L.fill].filter(Boolean).join(" ");if(L.kind==="circle"){const B=(L.size??40)/v.w*100*.5,E=v.w/v.h,Y=B*E;return r.jsx("ellipse",{cx:ct(L.x,0,100),cy:ct(L.y,0,100),rx:B,ry:Y,className:O},$)}if(L.kind==="rect"){const B=(L.width??48)/v.w*100,E=(L.height??36)/v.h*100,Y=ct(L.x-B/2,0,100),P=ct(L.y-E/2,0,100);return r.jsx("rect",{x:Y,y:P,width:B,height:E,className:O},$)}if(L.kind==="svg"&&L.src){const B=(L.width??48)/v.w*100,E=(L.height??48)/v.h*100,Y=ct(L.x-B/2,0,100),P=ct(L.y-E/2,0,100);return r.jsx("image",{href:L.src,x:Y,y:P,width:B,height:E,preserveAspectRatio:"xMidYMid meet",className:O},$)}const J=ct(L.x,0,100),ee=ct(L.y,0,100),R=T(J,ee,L.size??40).map(B=>B.join(",")).join(" ");return r.jsx("polygon",{points:R,className:O},$)})})]}),r.jsx("div",{className:"nhs-pattern-banner__feature",style:{width:typeof m=="number"?`${m}px`:m},children:y})]})};var Vd=(e=>(e.Photo="photo",e.Graphic="graphic",e))(Vd||{}),zn=(e=>(e.Vertical="vertical",e.Horizontal="horizontal",e.Portrait="portrait",e.Landscape="landscape",e))(zn||{}),wn=(e=>(e.AquaGreen="aqua-green",e.Purple="purple",e.Blue="blue",e.Grey="grey",e.Azure="azure",e))(wn||{}),_t=(e=>(e.Rect="rect",e.Hex="hex",e.Circle="circle",e))(_t||{}),Rn=(e=>(e.None="none",e.Soft="soft",e.Strong="strong",e))(Rn||{}),Yd=(e=>(e.Primary="primary",e.Secondary="secondary",e.Tertiary="tertiary",e))(Yd||{});function n1(e){return function(){let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}const gr=[wn.AquaGreen,wn.Purple,wn.Blue,wn.Grey,wn.Azure];function Bs(e,t,n){return Math.max(t,Math.min(n,e))}function r1(e,t,n=4){const a=n1(e),o=[],s=[_t.Rect,_t.Hex,_t.Circle],i=gr.indexOf(t),l=[t,gr[(i+2)%gr.length],gr[(i+3)%gr.length]],c=[],d=1200,u=400,f=1.2,h=(C,j)=>!(C.right<j.left||C.left>j.right||C.bottom<j.top||C.top>j.bottom),p=C=>C.left>=0&&C.top>=0&&C.right<=100&&C.bottom<=100,y=(C,j,M,N,w,_)=>{let I=0,v=0;if(C===_t.Rect){const x=N??48,S=w??36;I=x/d*100,v=S/u*100}else if(C===_t.Circle){const x=_??40;I=x/d*100,v=x/u*100}else{const x=_??40;I=x/d*100,v=x*(Math.sqrt(3)/2)/u*100}return{left:j-I/2-f,right:j+I/2+f,top:M-v/2-f,bottom:M+v/2+f}};let m=0;const g=Bs(Math.round(n),4,12);for(;o.length<g&&m<g*120;){m++;const C=s[Math.floor(a()*s.length)],j=Bs(20+a()*60,10,90),M=Bs(20+a()*60,10,90),N=l[Math.floor(a()*l.length)],w=o.length<2?Rn.Soft:Rn.None;if(C===_t.Rect){const _=40+a()*80,I=28+a()*64,v=y(C,j,M,_,I);if(!p(v))continue;let x=!1;for(let S=0;S<c.length;S++)if(h(v,c[S])){x=!0;break}if(x)continue;c.push(v),o.push({kind:C,x:j,y:M,width:_,height:I,gradient:N,rotate:0,shadow:w})}else if(C===_t.Circle){const _=24+a()*80,I=y(C,j,M,void 0,void 0,_);if(!p(I))continue;let v=!1;for(let x=0;x<c.length;x++)if(h(I,c[x])){v=!0;break}if(v)continue;c.push(I),o.push({kind:C,x:j,y:M,size:_,gradient:N,rotate:0,shadow:w})}else{const _=28+a()*72,I=a()*360,v=y(C,j,M,void 0,void 0,_);if(!p(v))continue;let x=!1;for(let S=0;S<c.length;S++)if(h(v,c[S])){x=!0;break}if(x)continue;c.push(v),o.push({kind:C,x:j,y:M,size:_,gradient:N,rotate:I,shadow:w})}}return o}const a1=({shapes:e,aspectRatio:t})=>{const a=600*t,o=600,s=l=>l.toFixed(2),i=(l,c,d)=>{const u=d/2;return[0,60,120,180,240,300].map(h=>{const p=h*Math.PI/180,y=l+u*Math.cos(p),m=c+u*Math.sin(p);return`${s(y)},${s(m)}`}).join(" ")};return r.jsxs("svg",{className:"nhs-product-card__graphic",viewBox:`0 0 ${a} ${o}`,preserveAspectRatio:"xMidYMid slice","aria-hidden":"true",children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"pc-grad-aqua-green",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[r.jsx("stop",{offset:"0",stopColor:"rgb(0, 163, 151)"}),r.jsx("stop",{offset:"1",stopColor:"rgb(11, 148, 71)"})]}),r.jsxs("linearGradient",{id:"pc-grad-purple",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[r.jsx("stop",{offset:"0",stopColor:"rgb(176, 161, 201)"}),r.jsx("stop",{offset:"1",stopColor:"rgb(198, 189, 216)"})]}),r.jsxs("linearGradient",{id:"pc-grad-blue",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[r.jsx("stop",{offset:"0",stopColor:"rgb(0, 94, 184)"}),r.jsx("stop",{offset:"1",stopColor:"rgb(65, 131, 196)"})]}),r.jsxs("linearGradient",{id:"pc-grad-grey",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[r.jsx("stop",{offset:"0",stopColor:"rgb(76, 98, 114)"}),r.jsx("stop",{offset:"1",stopColor:"rgb(174, 184, 192)"})]}),r.jsxs("linearGradient",{id:"pc-grad-azure",x1:"0",y1:"0",x2:"1",y2:"1",gradientUnits:"objectBoundingBox",children:[r.jsx("stop",{offset:"0",stopColor:"rgb(0, 122, 204)"}),r.jsx("stop",{offset:"1",stopColor:"rgb(103, 192, 229)"})]}),r.jsxs("filter",{id:"pc-shadow-soft",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[r.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2"}),r.jsx("feOffset",{dx:"0",dy:"2",result:"offsetblur"}),r.jsx("feComponentTransfer",{children:r.jsx("feFuncA",{type:"linear",slope:"0.2"})}),r.jsxs("feMerge",{children:[r.jsx("feMergeNode",{}),r.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),r.jsxs("filter",{id:"pc-shadow-strong",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[r.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"4"}),r.jsx("feOffset",{dx:"0",dy:"4",result:"offsetblur"}),r.jsx("feComponentTransfer",{children:r.jsx("feFuncA",{type:"linear",slope:"0.3"})}),r.jsxs("feMerge",{children:[r.jsx("feMergeNode",{}),r.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),r.jsx("g",{style:{mixBlendMode:"multiply"},children:(()=>{if(e.length<2)return null;const l=e.map(f=>{const h=f.x/100*a,p=f.y/100*o;if(f.kind===_t.Circle){const y=(f.size??40)/2;return[0,45,90,135,180,225,270,315].map(g=>{const C=g*Math.PI/180;return[h+y*Math.cos(C),p+y*Math.sin(C)]})}else if(f.kind===_t.Rect){const y=f.width??60,m=f.height??40;return[[h-y/2,p-m/2],[h+y/2,p-m/2],[h+y/2,p+m/2],[h-y/2,p+m/2]]}else{const m=(f.size??40)/2;return[0,60,120,180,240,300].map(C=>{const j=C*Math.PI/180;return[h+m*Math.cos(j),p+m*Math.sin(j)]})}}),c=1,d=new Set,u=[];for(let f=0;f<e.length;f++){const h=[];for(let y=0;y<e.length;y++){if(f===y)continue;const m=e[f].x-e[y].x,g=e[f].y-e[y].y;h.push({j:y,d2:m*m+g*g})}h.sort((y,m)=>y.d2-m.d2);const p=Math.min(c,h.length);for(let y=0;y<p;y++){const m=h[y].j,g=Math.min(f,m),C=Math.max(f,m),j=`${g}-${C}`;d.has(j)||(d.add(j),u.push([g,C]))}}return u.map(([f,h])=>{const p=l[f],y=l[h];let m=null;for(const g of p)for(const C of y){const j=g[0]-C[0],M=g[1]-C[1],N=j*j+M*M;(!m||N<m.d2)&&(m={p:g,q:C,d2:N})}return m?r.jsx("line",{x1:s(m.p[0]),y1:s(m.p[1]),x2:s(m.q[0]),y2:s(m.q[1]),stroke:"rgb(158, 171, 181)",strokeWidth:s(.5),strokeMiterlimit:s(.5)},`connector-${f}-${h}`):null})})()}),e.map((l,c)=>{const d=`pc-grad-${l.gradient}`,u=l.shadow===Rn.Soft?"url(#pc-shadow-soft)":l.shadow===Rn.Strong?"url(#pc-shadow-strong)":void 0,f=l.x/100*a,h=l.y/100*o,p=s(f),y=s(h);if(l.kind===_t.Rect){const m=l.width||60,g=l.height||40;return r.jsx("rect",{className:d,x:s(f-m/2),y:s(h-g/2),width:s(m),height:s(g),transform:`rotate(${l.rotate||0} ${p} ${y})`,filter:u},c)}else if(l.kind===_t.Circle){const m=(l.size||40)/2;return r.jsx("circle",{className:d,cx:p,cy:y,r:s(m),filter:u},c)}else if(l.kind===_t.Hex){const m=l.size||40;return r.jsx("polygon",{className:d,points:i(f,h,m),transform:`rotate(${l.rotate||0} ${p} ${y})`,filter:u},c)}return null})]})},o1=({title:e,description:t,image:n,layout:a=zn.Vertical,buttons:o=[],badge:s,theme:i="blue",className:l,style:c,onClick:d,href:u,headingLevel:f=3,footer:h,elevated:p=!0,imageAspectRatio:y=1.5})=>{const m=k.useMemo(()=>a===zn.Landscape?"horizontal":a===zn.Portrait?"vertical":a===zn.Horizontal?"horizontal":"vertical",[a]),g=k.useMemo(()=>{if(n?.type==="graphic"){if(n.shapes)return n.shapes;const _=n.seed??0,I=n.theme??i;return r1(_,I)}return[]},[n,i]),C=["nhs-product-card",`nhs-product-card--${m}`,`nhs-product-card--theme-${i}`,p&&"nhs-product-card--elevated",(d||u)&&"nhs-product-card--clickable",l].filter(Boolean).join(" "),j=_=>{d?d(_):u&&!_.defaultPrevented&&(window.location.href=u)},M=_=>{(d||u)&&(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),d?d(_):u&&(window.location.href=u))},N=()=>{if(!n)return null;const _=["nhs-product-card__image",n.type==="graphic"&&"nhs-product-card__image--graphic"].filter(Boolean).join(" ");return r.jsx("div",{className:_,style:{aspectRatio:y.toString()},children:n.type==="photo"&&n.src?r.jsx("img",{src:n.src,alt:n.alt||""}):n.type==="graphic"?r.jsx(a1,{shapes:g,aspectRatio:y}):null})},w=()=>o.length?r.jsx("div",{className:"nhs-product-card__actions",children:o.map((_,I)=>{const v=["nhs-product-card__button",`nhs-product-card__button--${_.variant||"primary"}`,_.disabled&&"nhs-product-card__button--disabled"].filter(Boolean).join(" ");return _.href?r.jsx("a",{href:_.href,className:v,"aria-label":_.ariaLabel,onClick:x=>{if(_.disabled){x.preventDefault();return}_.onClick&&(x.stopPropagation(),_.onClick(x))},children:_.label},I):r.jsx("button",{type:"button",className:v,disabled:_.disabled,"aria-label":_.ariaLabel,onClick:x=>{_.onClick&&(x.stopPropagation(),_.onClick(x))},children:_.label},I)})}):null;return r.jsxs("div",{className:C,style:c,onClick:d||u?j:void 0,onKeyDown:d||u?M:void 0,role:d||u?"button":void 0,tabIndex:d||u?0:void 0,children:[s&&r.jsx("div",{className:"nhs-product-card__badge",children:s}),N(),r.jsxs("div",{className:"nhs-product-card__content",children:[r.jsx(Nt,{level:f,className:"nhs-product-card__title",children:e}),r.jsx("p",{className:"nhs-product-card__description",children:t}),w(),h&&r.jsx("div",{className:"nhs-product-card__footer",children:h})]})]})},Zd="150ms",qd="300ms",Jd="500ms",Xd="cubic-bezier(0.4, 0, 1, 1)",Kd="cubic-bezier(0, 0, 0.2, 1)",Qd="cubic-bezier(0.4, 0, 0.2, 1)",eu="cubic-bezier(0.68, -0.55, 0.265, 1.55)",tu="background-color 300ms cubic-bezier(0, 0, 0.2, 1)",nu="box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",ru="border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",au="border-color 300ms cubic-bezier(0, 0, 0.2, 1)",ou="1px",su="2px",iu="4px",lu="4px",cu="4px",du="2px",uu="1px",fu="0px",hu="4px",pu="8px",mu="12px",Hs="#d8dde0",zs="#4c6272",Rs="#d8dde0",Os="#aeb7bd",Us="#d5281b",Ws="#005eb8",Gs="#ffffff",Vs="#212b32",Ys="#007f3b",Zs="#330072",qs="#7c2855",Js="#d5281b",Xs="#ffeb3b",Ks="#fff9c4",Qs="#ffb81c",ei="#ed8b00",ti="#00a499",ni="#ae2573",ri="#4c6272",ai="#768692",oi="#aeb7bd",si="#d8dde0",ii="#f0f4f5",gu="#212b32",bu="#4c6272",yu="#ffffff",xu="#212b32",vu="#005eb8",wu="#7c2855",Su="#003087",_u="#330072",ku="#ffeb3b",Cu="#212b32",Nu="#d8dde0",ju="#ffffff33",Mu="#d5281b",Iu="#4c6272",Du="#ffffff",Tu="#007f3b",Lu="#ffffff",Au="#006530",Eu="#004021",$u="#004021",Fu="#00000000",Pu="#ffffff",Bu="#005eb8",Hu="#005eb8",zu="#d9e5f2",Ru="#c7daf0",Ou="#005eb8",Uu="#ffffff",Wu="#212b32",Gu="#d9dde0",Vu="#b3bcc2",Yu="#b3bcc2",Zu="#d5281b",qu="#aa2016",Ju="#6a140e",Xu="#6a140e",Ku="#005eb8",Qu="#004b93",ef="#002f5c",tf="#002f5c",nf="8px",rf="16px",af="12px",of="16px",sf="4px",lf="40px",cf="4px",df="40px",uf="12px",ff="16px",hf="32px",pf="16px",mf="20px",gf="28px",bf="9px",yf="2px",xf="16px",vf="24px",wf="8px",Sf="24px",_f="16px",kf="4px",Cf="4px",Nf="4px",jf="8px",Mf="4px",If="16px",Df="#007f3b",Tf="#006530",Lf="#004021",Af="#d8dde0",Ef="#ffffff",$f="#768692",Ff="#00000000",Pf="#ffeb3b",Bf="#00000000",Hf="#ffffff",zf="#d9e5f2",Rf="#c7daf0",Of="#005eb8",Uf="#005eb8",li="8px",ci="16px",di="12px",ui="16px",Wf="2px",Gf="4px",Vf="4px",Yf="600",Zf="#ffffff",qf="#d8dde0",Jf="#aeb7bd",Xf="#f0f4f5",Kf="#212b32",Qf="#212b32",eh="#005eb8",fi="16px",hi="32px",pi="16px",th="1px",nh="4px",rh="none",ah="0 2px 4px rgba(0, 0, 0, 0.1)",oh="#ffffff",sh="#ffffff",ih="#d8dde0",lh="#ffffff",ch="#4c6272",dh="#ffeb3b",uh="#d5281b",fh="#aeb7bd",hh="#212b32",ph="#4c6272",mh="#768692",gh="#212b32",bh="#ffffff",yh="600",xh="#d5281b",vh="600",wh="#4c6272",mi="4px",gi="40px",bi="40px",yi="12px",Sh="2px",_h="4px",kh="0px",Ch="16px",Nh="18px",jh="24px",Mh="32px",Ih="34px",Dh="32px",Th="40px",Lh="48px",Ah="5.4ex",Eh="7.2ex",$h="9ex",Fh="10.8ex",Ph="20ex",Bh="38ex",Hh="56ex",zh="44px",Rh="40px",Oh="1020px",Uh="100%",Wh="50%",Gh="33.333%",Vh="25%",Yh="20%",Zh="320px",qh="641px",Jh="1025px",Xh="1280px",Kh="960px",Qh="32px",ep="16px",tp="#d5281b",np="#d5281b",rp="#ffffff",ap="#007f3b",op="#007f3b",sp="#ffffff",ip="#ffeb3b",lp="#ffeb3b",cp="#212b32",dp="#005eb8",up="#005eb8",fp="#ffffff",hp="#d8dde0",pp="#aeb7bd",mp="#768692",gp="0 4px 0 #004021",bp="0 4px 0 #005eb8",yp="0 4px 0 #6a140e",xp="0 4px 0 #ffeb3b",vp="none",wp="0 2px 4px rgba(0, 0, 0, 0.1)",Sp="4px",_p="0px",kp="solid",Cp="0 0 0 3px #ffeb3b",Np="0 0 0 3px #ffeb3b",jp="none",Mp="0 1px 3px rgba(0, 0, 0, 0.12)",Ip="0 2px 6px rgba(0, 0, 0, 0.16)",Dp="0 4px 12px rgba(0, 0, 0, 0.20)",xi="0",vi="4px",wi="8px",Si="16px",_i="24px",ki="32px",Ci="40px",Ni="48px",ji="56px",Mi="64px",Ra="0",Oa="0",Ua="4px",Wa="4px",Ga="8px",Va="8px",Ya="8px",Za="16px",qa="16px",Ja="24px",Xa="24px",Ka="32px",Qa="32px",eo="40px",to="40px",no="48px",ro="48px",ao="56px",oo="56px",so="64px",br="Frutiger W01",yr="Arial, Helvetica, sans-serif",xr="sans-serif",vr="400",wr="600",Sr="400",_r="12px",kr="14px",Cr="12pt",Nr="14px",jr="16px",Mr="12pt",Ir="16px",Dr="19px",Tr="13pt",Lr="19px",Ar="22px",Er="15pt",$r="22px",Fr="26px",Pr="17pt",Br="27px",Hr="36px",zr="20pt",Rr="33px",Or="48px",Ur="24pt",io="16px",lo="24px",Ft={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},Pt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Bt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Ht={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},zt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Rt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Ot={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},Ut={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Wt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},Gt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},s1=Object.freeze(Object.defineProperty({__proto__:null,AnimationDurationFast:Zd,AnimationDurationNormal:qd,AnimationDurationSlow:Jd,AnimationEasingBounce:eu,AnimationEasingEaseIn:Xd,AnimationEasingEaseInOut:Qd,AnimationEasingEaseOut:Kd,BorderColorCard:Rs,BorderColorCardHover:Os,BorderColorDefault:Hs,BorderColorError:Us,BorderColorForm:zs,BorderRadiusLarge:mu,BorderRadiusMedium:pu,BorderRadiusNone:fu,BorderRadiusSmall:hu,BorderWidthCardBottom:lu,BorderWidthDefault:ou,BorderWidthFormElement:su,BorderWidthFormElementError:iu,BorderWidthPanel:cu,BorderWidthTableCell:uu,BorderWidthTableHeader:du,BreakpointDesktop:Jh,BreakpointLargeDesktop:Xh,BreakpointMobile:Zh,BreakpointTablet:qh,ButtonBorderRadius:Gf,ButtonBorderWidth:Wf,ButtonPrimaryBackgroundActive:Lf,ButtonPrimaryBackgroundDefault:Df,ButtonPrimaryBackgroundDisabled:Af,ButtonPrimaryBackgroundHover:Tf,ButtonPrimaryBorderDefault:Ff,ButtonPrimaryBorderFocus:Pf,ButtonPrimaryTextDefault:Ef,ButtonPrimaryTextDisabled:$f,ButtonSecondaryBackgroundActive:Rf,ButtonSecondaryBackgroundDefault:Bf,ButtonSecondaryBackgroundHover:zf,ButtonSecondaryBackgroundSolid:Hf,ButtonSecondaryBorderDefault:Uf,ButtonSecondaryTextDefault:Of,ButtonShadowSize:Vf,ButtonSpacingPaddingHorizontalDesktop:ui,ButtonSpacingPaddingHorizontalMobile:ci,ButtonSpacingPaddingVerticalDesktop:di,ButtonSpacingPaddingVerticalMobile:li,ButtonTypographyWeight:Yf,CardBackgroundDefault:Zf,CardBorderBottom:Xf,CardBorderDefault:qf,CardBorderHover:Jf,CardBorderWidthBottom:nh,CardBorderWidthDefault:th,CardShadowDefault:rh,CardShadowHover:ah,CardSpacingHeadingMargin:pi,CardSpacingPaddingDesktop:hi,CardSpacingPaddingMobile:fi,CardTextDescription:Qf,CardTextHeading:Kf,CardTextLink:eh,ColorBorderDefault:Nu,ColorBorderSecondary:ju,ColorButtonLoginActive:ef,ColorButtonLoginBackground:Ku,ColorButtonLoginHover:Qu,ColorButtonLoginShadow:tf,ColorButtonPrimaryActive:Eu,ColorButtonPrimaryBackground:Tu,ColorButtonPrimaryHover:Au,ColorButtonPrimaryShadow:$u,ColorButtonPrimaryText:Lu,ColorButtonReverseActive:Vu,ColorButtonReverseBackground:Uu,ColorButtonReverseHover:Gu,ColorButtonReverseShadow:Yu,ColorButtonReverseText:Wu,ColorButtonSecondaryActive:Ru,ColorButtonSecondaryBackground:Fu,ColorButtonSecondaryBackgroundSolid:Pu,ColorButtonSecondaryBorder:Bu,ColorButtonSecondaryHover:zu,ColorButtonSecondaryShadow:Ou,ColorButtonSecondaryText:Hu,ColorButtonWarningActive:Ju,ColorButtonWarningBackground:Zu,ColorButtonWarningHover:qu,ColorButtonWarningShadow:Xu,ColorError:Mu,ColorFocusBackground:ku,ColorFocusText:Cu,ColorFormBackground:Du,ColorFormBorder:Iu,ColorGrey1:ri,ColorGrey2:ai,ColorGrey3:oi,ColorGrey4:si,ColorGrey5:ii,ColorLinkActive:Su,ColorLinkDefault:vu,ColorLinkHover:wu,ColorLinkVisited:_u,ColorPrimaryBlack:Vs,ColorPrimaryBlue:Ws,ColorPrimaryDarkPink:qs,ColorPrimaryGreen:Ys,ColorPrimaryPurple:Zs,ColorPrimaryRed:Js,ColorPrimaryWhite:Gs,ColorPrimaryYellow:Xs,ColorSecondaryAquaGreen:ti,ColorSecondaryOrange:ei,ColorSecondaryPaleYellow:Ks,ColorSecondaryPink:ni,ColorSecondaryWarmYellow:Qs,ColorTextPrimary:gu,ColorTextPrint:xu,ColorTextReverse:yu,ColorTextSecondary:bu,ComponentBlur:Cf,ComponentBreadcrumbChevronMarginLeft:bf,ComponentBreadcrumbChevronMarginRight:yf,ComponentBreadcrumbPaddingTopDesktop:vf,ComponentBreadcrumbPaddingTopMobile:xf,ComponentButtonPaddingDesktopHorizontal:of,ComponentButtonPaddingDesktopVertical:af,ComponentButtonPaddingMobileHorizontal:rf,ComponentButtonPaddingMobileVertical:nf,ComponentButtonShadowSize:sf,ComponentCardHeadingMargin:pf,ComponentCardPaddingDesktop:hf,ComponentCardPaddingMobile:ff,ComponentDetails:jf,ComponentExpander:Mf,ComponentFormCheckboxLabelPadding:uf,ComponentFormCheckboxSize:df,ComponentFormInputMinHeight:lf,ComponentFormInputPadding:cf,ComponentLink:Nf,ComponentPagination:If,ComponentPanelPaddingDesktop:gf,ComponentPanelPaddingMobile:mf,ComponentSpread:kf,ComponentSummaryListCellPaddingHorizontal:Sf,ComponentSummaryListCellPaddingVertical:wf,ComponentSummaryListRowMargin:_f,ElevationHigh:Dp,ElevationLow:Mp,ElevationMedium:Ip,ElevationNone:jp,FocusOutlineOffset:_p,FocusOutlineStyle:kp,FocusOutlineWidth:Sp,FocusShadowButton:Np,FocusShadowInput:Cp,FontFamilyBase:br,FontFamilyFallback:yr,FontFamilyPrint:xr,FontLineHeightBase:lo,FontSize14Mobile:_r,FontSize14Print:Cr,FontSize14Tablet:kr,FontSize16Mobile:Nr,FontSize16Print:Mr,FontSize16Tablet:jr,FontSize19Mobile:Ir,FontSize19Print:Tr,FontSize19Tablet:Dr,FontSize22Mobile:Lr,FontSize22Print:Er,FontSize22Tablet:Ar,FontSize26Mobile:$r,FontSize26Print:Pr,FontSize26Tablet:Fr,FontSize36Mobile:Br,FontSize36Print:zr,FontSize36Tablet:Hr,FontSize48Mobile:Rr,FontSize48Print:Ur,FontSize48Tablet:Or,FontSizeBase:io,FontWeightBold:wr,FontWeightLight:Sr,FontWeightNormal:vr,FormBorderRadius:kh,FormBorderWidthDefault:Sh,FormBorderWidthError:_h,FormErrorTextDefault:xh,FormErrorTypographyWeight:vh,FormHintTextDefault:wh,FormInputBackgroundDefault:oh,FormInputBackgroundDisabled:ih,FormInputBackgroundError:lh,FormInputBackgroundFocus:sh,FormInputBorderDefault:ch,FormInputBorderDisabled:fh,FormInputBorderError:uh,FormInputBorderFocus:dh,FormInputTextDefault:hh,FormInputTextDisabled:mh,FormInputTextPlaceholder:ph,FormLabelTextDefault:gh,FormLabelTextRequired:bh,FormLabelTypographyWeight:yh,FormSpacingCheckboxLabelPadding:yi,FormSpacingCheckboxSize:bi,FormSpacingInputMinHeight:gi,FormSpacingInputPadding:mi,GridGutter:Qh,GridGutterHalf:ep,GridPageWidth:Kh,HeadingsNhsukHeadingL:Pt,HeadingsNhsukHeadingM:Bt,HeadingsNhsukHeadingS:Ht,HeadingsNhsukHeadingXl:Ft,HeadingsNhsukHeadingXs:zt,LayoutColumnActions:Yh,LayoutColumnFull:Uh,LayoutColumnHalf:Wh,LayoutColumnQuarter:Vh,LayoutColumnThird:Gh,LayoutContainerMaxWidth:Oh,ParagraphsBody:Rt,ParagraphsBodyLarge:Ot,ParagraphsBodySmall:Ut,ParagraphsLedeText:Wt,ParagraphsLedeTextSmall:Gt,ShadowButtonDefault:gp,ShadowButtonFocus:xp,ShadowButtonSecondary:bp,ShadowButtonWarning:yp,ShadowCardDefault:vp,ShadowCardHover:wp,SizeButtonMinHeightDesktop:Rh,SizeButtonMinHeightMobile:zh,SizeFormControlLarge:Lh,SizeFormControlMedium:Th,SizeFormControlSmall:Dh,SizeFormInputWidth2xl:Bh,SizeFormInputWidth3xl:Hh,SizeFormInputWidthLg:Fh,SizeFormInputWidthMd:$h,SizeFormInputWidthSm:Eh,SizeFormInputWidthXl:Ph,SizeFormInputWidthXs:Ah,SizeIconExtraLarge:Mh,SizeIconLarge:jh,SizeIconMedium:Nh,SizeIconNhsDefault:Ih,SizeIconSmall:Ch,Spacing0:xi,Spacing1:vi,Spacing2:wi,Spacing3:Si,Spacing4:_i,Spacing5:ki,Spacing6:Ci,Spacing7:Ni,Spacing8:ji,Spacing9:Mi,SpacingResponsive0Mobile:Ra,SpacingResponsive0Tablet:Oa,SpacingResponsive1Mobile:Ua,SpacingResponsive1Tablet:Wa,SpacingResponsive2Mobile:Ga,SpacingResponsive2Tablet:Va,SpacingResponsive3Mobile:Ya,SpacingResponsive3Tablet:Za,SpacingResponsive4Mobile:qa,SpacingResponsive4Tablet:Ja,SpacingResponsive5Mobile:Xa,SpacingResponsive5Tablet:Ka,SpacingResponsive6Mobile:Qa,SpacingResponsive6Tablet:eo,SpacingResponsive7Mobile:to,SpacingResponsive7Tablet:no,SpacingResponsive8Mobile:ro,SpacingResponsive8Tablet:ao,SpacingResponsive9Mobile:oo,SpacingResponsive9Tablet:so,StateDisabledBackground:hp,StateDisabledBorder:pp,StateDisabledText:mp,StateErrorBackground:tp,StateErrorBorder:np,StateErrorText:rp,StateInfoBackground:dp,StateInfoBorder:up,StateInfoText:fp,StateSuccessBackground:ap,StateSuccessBorder:op,StateSuccessText:sp,StateWarningBackground:ip,StateWarningBorder:lp,StateWarningText:cp,TransitionButtonDefault:tu,TransitionButtonShadow:nu,TransitionCardHover:au,TransitionInputFocus:ru},Symbol.toStringTag,{value:"Module"})),i1=(e,t)=>({fontSize:e.mobile,marginBottom:t.mobile,"@media (min-width: 768px)":{fontSize:e.tablet,marginBottom:t.tablet},"@media print":{fontSize:e.print||e.tablet}}),l1=({children:e,className:t="",style:n={}})=>r.jsx("h1",{className:t,style:{fontFamily:Ft.fontFamily,fontWeight:Ft.fontWeight,fontSize:Ft.fontSize.mobile,lineHeight:Ft.lineHeight,marginTop:Ft.marginTop,marginBottom:Ft.marginBottom.mobile,...n},children:e}),c1=({children:e,className:t="",style:n={}})=>r.jsx("h2",{className:t,style:{fontFamily:Pt.fontFamily,fontWeight:Pt.fontWeight,fontSize:Pt.fontSize.mobile,lineHeight:Pt.lineHeight,marginTop:Pt.marginTop,marginBottom:Pt.marginBottom.mobile,...n},children:e}),d1=({children:e,className:t="",style:n={}})=>r.jsx("h3",{className:t,style:{fontFamily:Bt.fontFamily,fontWeight:Bt.fontWeight,fontSize:Bt.fontSize.mobile,lineHeight:Bt.lineHeight,marginTop:Bt.marginTop,marginBottom:Bt.marginBottom.mobile,...n},children:e}),u1=({children:e,className:t="",style:n={}})=>r.jsx("h4",{className:t,style:{fontFamily:Ht.fontFamily,fontWeight:Ht.fontWeight,fontSize:Ht.fontSize.mobile,lineHeight:Ht.lineHeight,marginTop:Ht.marginTop,marginBottom:Ht.marginBottom.mobile,...n},children:e}),f1=({children:e,className:t="",style:n={}})=>r.jsx("h5",{className:t,style:{fontFamily:zt.fontFamily,fontWeight:zt.fontWeight,fontSize:zt.fontSize.mobile,lineHeight:zt.lineHeight,marginTop:zt.marginTop,marginBottom:zt.marginBottom.mobile,...n},children:e}),h1=({children:e,className:t="",style:n={}})=>r.jsx("p",{className:t,style:{fontFamily:Rt.fontFamily,fontWeight:Rt.fontWeight,fontSize:Rt.fontSize.mobile,lineHeight:Rt.lineHeight,marginTop:Rt.marginTop,marginBottom:Rt.marginBottom.mobile,...n},children:e}),p1=({children:e,className:t="",style:n={}})=>r.jsx("p",{className:t,style:{fontFamily:Ot.fontFamily,fontWeight:Ot.fontWeight,fontSize:Ot.fontSize.mobile,lineHeight:Ot.lineHeight,marginTop:Ot.marginTop,marginBottom:Ot.marginBottom.mobile,...n},children:e}),m1=({children:e,className:t="",style:n={}})=>r.jsx("p",{className:t,style:{fontFamily:Ut.fontFamily,fontWeight:Ut.fontWeight,fontSize:Ut.fontSize.mobile,lineHeight:Ut.lineHeight,marginTop:Ut.marginTop,marginBottom:Ut.marginBottom.mobile,...n},children:e}),g1=({children:e,className:t="",style:n={}})=>r.jsx("p",{className:t,style:{fontFamily:Wt.fontFamily,fontWeight:Wt.fontWeight,fontSize:Wt.fontSize.mobile,lineHeight:Wt.lineHeight,marginTop:Wt.marginTop,marginBottom:Wt.marginBottom.mobile,...n},children:e}),b1=({children:e,className:t="",style:n={}})=>r.jsx("p",{className:t,style:{fontFamily:Gt.fontFamily,fontWeight:Gt.fontWeight,fontSize:Gt.fontSize.mobile,lineHeight:Gt.lineHeight,marginTop:Gt.marginTop,marginBottom:Gt.marginBottom.mobile,...n},children:e}),y1=()=>k.useMemo(()=>s1,[]),x1=()=>k.useMemo(()=>({BorderColorDefault:Hs,BorderColorForm:zs,BorderColorCard:Rs,BorderColorCardHover:Os,BorderColorError:Us,ColorPrimaryBlue:Ws,ColorPrimaryWhite:Gs,ColorPrimaryBlack:Vs,ColorPrimaryGreen:Ys,ColorPrimaryPurple:Zs,ColorPrimaryDarkPink:qs,ColorPrimaryRed:Js,ColorPrimaryYellow:Xs,ColorSecondaryPaleYellow:Ks,ColorSecondaryWarmYellow:Qs,ColorSecondaryOrange:ei,ColorSecondaryAquaGreen:ti,ColorSecondaryPink:ni,ColorGrey1:ri,ColorGrey2:ai,ColorGrey3:oi,ColorGrey4:si,ColorGrey5:ii}),[]),v1=()=>k.useMemo(()=>({Spacing0:xi,Spacing1:vi,Spacing2:wi,Spacing3:Si,Spacing4:_i,Spacing5:ki,Spacing6:Ci,Spacing7:Ni,Spacing8:ji,Spacing9:Mi}),[]),w1=()=>k.useMemo(()=>({Mobile:{Size14:_r,Size16:Nr,Size19:Ir,Size22:Lr,Size26:$r,Size36:Br,Size48:Rr},Tablet:{Size14:kr,Size16:jr,Size19:Dr,Size22:Ar,Size26:Fr,Size36:Hr,Size48:Or},Print:{Size14:Cr,Size16:Mr,Size19:Tr,Size22:Er,Size26:Pr,Size36:zr,Size48:Ur},Family:{Base:br,Fallback:yr,Print:xr},Weight:{Normal:vr,Bold:wr,Light:Sr},Base:{Size:io,LineHeight:lo},FontFamilyBase:br,FontFamilyFallback:yr,FontFamilyPrint:xr,FontWeightNormal:vr,FontWeightBold:wr,FontWeightLight:Sr,FontSize14Mobile:_r,FontSize14Tablet:kr,FontSize14Print:Cr,FontSize16Mobile:Nr,FontSize16Tablet:jr,FontSize16Print:Mr,FontSize19Mobile:Ir,FontSize19Tablet:Dr,FontSize19Print:Tr,FontSize22Mobile:Lr,FontSize22Tablet:Ar,FontSize22Print:Er,FontSize26Mobile:$r,FontSize26Tablet:Fr,FontSize26Print:Pr,FontSize36Mobile:Br,FontSize36Tablet:Hr,FontSize36Print:zr,FontSize48Mobile:Rr,FontSize48Tablet:Or,FontSize48Print:Ur,FontSizeBase:io,FontLineHeightBase:lo}),[]),S1=()=>k.useMemo(()=>({Mobile:{Size0:Ra,Size1:Ua,Size2:Ga,Size3:Ya,Size4:qa,Size5:Xa,Size6:Qa,Size7:to,Size8:ro,Size9:oo},Tablet:{Size0:Oa,Size1:Wa,Size2:Va,Size3:Za,Size4:Ja,Size5:Ka,Size6:eo,Size7:no,Size8:ao,Size9:so},SpacingResponsive0Mobile:Ra,SpacingResponsive0Tablet:Oa,SpacingResponsive1Mobile:Ua,SpacingResponsive1Tablet:Wa,SpacingResponsive2Mobile:Ga,SpacingResponsive2Tablet:Va,SpacingResponsive3Mobile:Ya,SpacingResponsive3Tablet:Za,SpacingResponsive4Mobile:qa,SpacingResponsive4Tablet:Ja,SpacingResponsive5Mobile:Xa,SpacingResponsive5Tablet:Ka,SpacingResponsive6Mobile:Qa,SpacingResponsive6Tablet:eo,SpacingResponsive7Mobile:to,SpacingResponsive7Tablet:no,SpacingResponsive8Mobile:ro,SpacingResponsive8Tablet:ao,SpacingResponsive9Mobile:oo,SpacingResponsive9Tablet:so}),[]),_1=()=>k.useMemo(()=>({ButtonSpacingPaddingVerticalMobile:li,ButtonSpacingPaddingHorizontalMobile:ci,ButtonSpacingPaddingVerticalDesktop:di,ButtonSpacingPaddingHorizontalDesktop:ui,CardSpacingPaddingMobile:fi,CardSpacingPaddingDesktop:hi,CardSpacingHeadingMargin:pi,FormSpacingInputPadding:mi,FormSpacingInputMinHeight:gi,FormSpacingCheckboxSize:bi,FormSpacingCheckboxLabelPadding:yi}),[]),k1=()=>k.useMemo(()=>({xl:Ft,l:Pt,m:Bt,s:Ht,xs:zt}),[]),C1=()=>k.useMemo(()=>({body:Rt,bodyLarge:Ot,bodySmall:Ut,ledeText:Wt,ledeTextSmall:Gt}),[]),N1=()=>k.useMemo(()=>({headings:{xl:Ft,l:Pt,m:Bt,s:Ht,xs:zt},paragraphs:{body:Rt,bodyLarge:Ot,bodySmall:Ut,ledeText:Wt,ledeTextSmall:Gt},fonts:{family:{base:br,fallback:yr,print:xr},weight:{normal:vr,bold:wr,light:Sr},sizes:{mobile:{size14:_r,size16:Nr,size19:Ir,size22:Lr,size26:$r,size36:Br,size48:Rr},tablet:{size14:kr,size16:jr,size19:Dr,size22:Ar,size26:Fr,size36:Hr,size48:Or},print:{size14:Cr,size16:Mr,size19:Tr,size22:Er,size26:Pr,size36:zr,size48:Ur}}}}),[]);function j1(e={}){const{initialLayout:t=void 0,fallbackLayout:n="two-column"}=e,[a,o]=X.useState(t),s=X.useCallback(()=>o("three-column"),[]),i=X.useCallback(()=>o(c=>c==="three-column"?n:c),[n]),l=X.useCallback(()=>o(c=>c==="three-column"?n:"three-column"),[n]);return{forceLayout:a,setLayout:o,drillIn:s,drillOut:i,toggle:l,isDrilledIn:a==="three-column"}}const Ii={fontPath:"https://assets.nhs.uk/fonts/",includeFontFace:!0,useFallbacks:!0,fontWeights:[400,600]},xt={normal:{woff2:"FrutigerLTW01-55Roman.woff2",woff:"FrutigerLTW01-55Roman.woff",ttf:"FrutigerLTW01-55Roman.ttf",eot:"FrutigerLTW01-55Roman.eot"},bold:{woff2:"FrutigerLTW01-65Bold.woff2",woff:"FrutigerLTW01-65Bold.woff",ttf:"FrutigerLTW01-65Bold.ttf",eot:"FrutigerLTW01-65Bold.eot"}};function M1(e={}){const{fontPath:t,fontWeights:n}={...Ii,...e},a=[];return n?.includes(400)&&a.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 400;
  src: url("${t}${xt.normal.eot}?#iefix") format("eot"),
       url("${t}${xt.normal.woff2}") format("woff2"),
       url("${t}${xt.normal.woff}") format("woff"),
       url("${t}${xt.normal.ttf}") format("truetype");
  src: url("${t}${xt.normal.eot}");
}`),n?.includes(600)&&a.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 600;
  src: url("${t}${xt.bold.eot}?#iefix") format("eot"),
       url("${t}${xt.bold.woff2}") format("woff2"),
       url("${t}${xt.bold.woff}") format("woff"),
       url("${t}${xt.bold.ttf}") format("truetype");
  src: url("${t}${xt.bold.eot}");
}`),a.join(`
`)}function I1(e={}){if(typeof document>"u")return;const{fontPath:t,fontWeights:n}={...Ii,...e};[...n?.includes(400)?[{href:`${t}${xt.normal.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${xt.normal.woff}`,as:"font",type:"font/woff"}]:[],...n?.includes(600)?[{href:`${t}${xt.bold.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${xt.bold.woff}`,as:"font",type:"font/woff"}]:[]].forEach(o=>{const s=document.createElement("link");s.rel="preload",s.href=o.href,s.as=o.as,s.type=o.type,s.crossOrigin="anonymous",document.head.appendChild(s)})}const D1='"Frutiger W01", Arial, Helvetica, sans-serif',T1="Arial, Helvetica, sans-serif";async function L1(){if(typeof document>"u"||!document.fonts)return!1;try{return await document.fonts.load('1em "Frutiger W01"'),document.fonts.check('1em "Frutiger W01"')}catch{return!1}}b.AXIS_Y_ZERO_BREAK_DEFAULT_EXTRA_CLEARANCE_PX=Yc,b.AXIS_Y_ZERO_BREAK_DEFAULT_GAP_PX=ar,b.AXIS_Y_ZERO_BREAK_MIN_GAP_PX=or,b.AXIS_ZIGZAG_DEFAULT_AMPLITUDE_PX=Zc,b.AXIS_ZIGZAG_DEFAULT_CYCLES=qc,b.AXIS_ZIGZAG_DEFAULT_HEIGHT_PX=Xc,b.AXIS_ZIGZAG_DEFAULT_STEP_X_PX=Jc,b.Account=ho,b.ActionLink=Op,b.AdaptiveDataGrid=ns,b.AnimationDurationFast=Zd,b.AnimationDurationNormal=qd,b.AnimationDurationSlow=Jd,b.AnimationEasingBounce=eu,b.AnimationEasingEaseIn=Xd,b.AnimationEasingEaseInOut=Qd,b.AnimationEasingEaseOut=Kd,b.AppointmentCard=Qo,b.AreaSeriesPrimitive=Jx,b.AriaDataGrid=ic,b.AriaTabsDataGrid=ya,b.AriaTabsDataGridAdaptive=ns,b.Axis=ms,b.BackLink=Sn,b.BandScalesProvider=Kx,b.BarSeriesPrimitive=Xx,b.BorderColorCard=Rs,b.BorderColorCardHover=Os,b.BorderColorDefault=Hs,b.BorderColorError=Us,b.BorderColorForm=zs,b.BorderRadiusLarge=mu,b.BorderRadiusMedium=pu,b.BorderRadiusNone=fu,b.BorderRadiusSmall=hu,b.BorderWidthCardBottom=lu,b.BorderWidthDefault=ou,b.BorderWidthFormElement=su,b.BorderWidthFormElementError=iu,b.BorderWidthPanel=cu,b.BorderWidthTableCell=uu,b.BorderWidthTableHeader=du,b.BrandKey=qr,b.BrandThemeProvider=Im,b.Breadcrumb=Vo,b.Breakpoint=Wi,b.BreakpointDesktop=Jh,b.BreakpointLargeDesktop=Xh,b.BreakpointMobile=Zh,b.BreakpointTablet=qh,b.Button=dt,b.ButtonBorderRadius=Gf,b.ButtonBorderWidth=Wf,b.ButtonPrimaryBackgroundActive=Lf,b.ButtonPrimaryBackgroundDefault=Df,b.ButtonPrimaryBackgroundDisabled=Af,b.ButtonPrimaryBackgroundHover=Tf,b.ButtonPrimaryBorderDefault=Ff,b.ButtonPrimaryBorderFocus=Pf,b.ButtonPrimaryTextDefault=Ef,b.ButtonPrimaryTextDisabled=$f,b.ButtonSecondaryBackgroundActive=Rf,b.ButtonSecondaryBackgroundDefault=Bf,b.ButtonSecondaryBackgroundHover=zf,b.ButtonSecondaryBackgroundSolid=Hf,b.ButtonSecondaryBorderDefault=Uf,b.ButtonSecondaryTextDefault=Of,b.ButtonShadowSize=Vf,b.ButtonSize=mo,b.ButtonSpacingPaddingHorizontalDesktop=ui,b.ButtonSpacingPaddingHorizontalMobile=ci,b.ButtonSpacingPaddingVerticalDesktop=di,b.ButtonSpacingPaddingVerticalMobile=li,b.ButtonTypographyWeight=Yf,b.ButtonVariant=po,b.Card=Zo,b.CardBackgroundDefault=Zf,b.CardBorderBottom=Xf,b.CardBorderDefault=qf,b.CardBorderHover=Jf,b.CardBorderWidthBottom=nh,b.CardBorderWidthDefault=th,b.CardGroup=eb,b.CardGroupItem=tb,b.CardShadowDefault=rh,b.CardShadowHover=ah,b.CardSpacingHeadingMargin=pi,b.CardSpacingPaddingDesktop=hi,b.CardSpacingPaddingMobile=fi,b.CardTextDescription=Qf,b.CardTextHeading=Kf,b.CardTextLink=eh,b.CareCard=nb,b.CharacterCount=Kp,b.ChartEnhancer=ev,b.ChartNoScript=Qx,b.ChartRoot=Gc,b.Checkbox=Bi,b.Checkboxes=zi,b.ColorBorderDefault=Nu,b.ColorBorderSecondary=ju,b.ColorButtonLoginActive=ef,b.ColorButtonLoginBackground=Ku,b.ColorButtonLoginHover=Qu,b.ColorButtonLoginShadow=tf,b.ColorButtonPrimaryActive=Eu,b.ColorButtonPrimaryBackground=Tu,b.ColorButtonPrimaryHover=Au,b.ColorButtonPrimaryShadow=$u,b.ColorButtonPrimaryText=Lu,b.ColorButtonReverseActive=Vu,b.ColorButtonReverseBackground=Uu,b.ColorButtonReverseHover=Gu,b.ColorButtonReverseShadow=Yu,b.ColorButtonReverseText=Wu,b.ColorButtonSecondaryActive=Ru,b.ColorButtonSecondaryBackground=Fu,b.ColorButtonSecondaryBackgroundSolid=Pu,b.ColorButtonSecondaryBorder=Bu,b.ColorButtonSecondaryHover=zu,b.ColorButtonSecondaryShadow=Ou,b.ColorButtonSecondaryText=Hu,b.ColorButtonWarningActive=Ju,b.ColorButtonWarningBackground=Zu,b.ColorButtonWarningHover=qu,b.ColorButtonWarningShadow=Xu,b.ColorError=Mu,b.ColorFocusBackground=ku,b.ColorFocusText=Cu,b.ColorFormBackground=Du,b.ColorFormBorder=Iu,b.ColorGrey1=ri,b.ColorGrey2=ai,b.ColorGrey3=oi,b.ColorGrey4=si,b.ColorGrey5=ii,b.ColorLinkActive=Su,b.ColorLinkDefault=vu,b.ColorLinkHover=wu,b.ColorLinkVisited=_u,b.ColorPrimaryBlack=Vs,b.ColorPrimaryBlue=Ws,b.ColorPrimaryDarkPink=qs,b.ColorPrimaryGreen=Ys,b.ColorPrimaryPurple=Zs,b.ColorPrimaryRed=Js,b.ColorPrimaryWhite=Gs,b.ColorPrimaryYellow=Xs,b.ColorSecondaryAquaGreen=ti,b.ColorSecondaryOrange=ei,b.ColorSecondaryPaleYellow=Ks,b.ColorSecondaryPink=ni,b.ColorSecondaryWarmYellow=Qs,b.ColorTextPrimary=gu,b.ColorTextPrint=xu,b.ColorTextReverse=yu,b.ColorTextSecondary=bu,b.Column=_n,b.ColumnAlign=Vi,b.ComponentBlur=Cf,b.ComponentBreadcrumbChevronMarginLeft=bf,b.ComponentBreadcrumbChevronMarginRight=yf,b.ComponentBreadcrumbPaddingTopDesktop=vf,b.ComponentBreadcrumbPaddingTopMobile=xf,b.ComponentButtonPaddingDesktopHorizontal=of,b.ComponentButtonPaddingDesktopVertical=af,b.ComponentButtonPaddingMobileHorizontal=rf,b.ComponentButtonPaddingMobileVertical=nf,b.ComponentButtonShadowSize=sf,b.ComponentCardHeadingMargin=pf,b.ComponentCardPaddingDesktop=hf,b.ComponentCardPaddingMobile=ff,b.ComponentDetails=jf,b.ComponentExpander=Mf,b.ComponentFormCheckboxLabelPadding=uf,b.ComponentFormCheckboxSize=df,b.ComponentFormInputMinHeight=lf,b.ComponentFormInputPadding=cf,b.ComponentLink=Nf,b.ComponentPagination=If,b.ComponentPanelPaddingDesktop=gf,b.ComponentPanelPaddingMobile=mf,b.ComponentSpread=kf,b.ComponentSummaryListCellPaddingHorizontal=Sf,b.ComponentSummaryListCellPaddingVertical=wf,b.ComponentSummaryListRowMargin=_f,b.Container=yo,b.ContentsList=Q0,b.DEFAULT_FONT_CONFIG=Ii,b.DashboardSummaryGrid=wb,b.DateInput=mm,b.Details=Kl,b.DoDontList=Ql,b.ElevationHigh=Dp,b.ElevationLow=Mp,b.ElevationMedium=Ip,b.ElevationNone=jp,b.ErrorMessage=vo,b.ErrorSummary=pm,b.Expander=ec,b.FRUTIGER_FONT_FILES=xt,b.Fieldset=Yr,b.Float=Gi,b.FocusOutlineOffset=_p,b.FocusOutlineStyle=kp,b.FocusOutlineWidth=Sp,b.FocusShadowButton=Np,b.FocusShadowInput=Cp,b.FontFamilyBase=br,b.FontFamilyFallback=yr,b.FontFamilyPrint=xr,b.FontLineHeightBase=lo,b.FontSize14Mobile=_r,b.FontSize14Print=Cr,b.FontSize14Tablet=kr,b.FontSize16Mobile=Nr,b.FontSize16Print=Mr,b.FontSize16Tablet=jr,b.FontSize19Mobile=Ir,b.FontSize19Print=Tr,b.FontSize19Tablet=Dr,b.FontSize22Mobile=Lr,b.FontSize22Print=Er,b.FontSize22Tablet=Ar,b.FontSize26Mobile=$r,b.FontSize26Print=Pr,b.FontSize26Tablet=Fr,b.FontSize36Mobile=Br,b.FontSize36Print=zr,b.FontSize36Tablet=Hr,b.FontSize48Mobile=Rr,b.FontSize48Print=Ur,b.FontSize48Tablet=Or,b.FontSizeBase=io,b.FontWeightBold=wr,b.FontWeightLight=Sr,b.FontWeightNormal=vr,b.Footer=_o,b.FormBorderRadius=kh,b.FormBorderWidthDefault=Sh,b.FormBorderWidthError=_h,b.FormErrorTextDefault=xh,b.FormErrorTypographyWeight=vh,b.FormHintTextDefault=wh,b.FormInputBackgroundDefault=oh,b.FormInputBackgroundDisabled=ih,b.FormInputBackgroundError=lh,b.FormInputBackgroundFocus=sh,b.FormInputBorderDefault=ch,b.FormInputBorderDisabled=fh,b.FormInputBorderError=uh,b.FormInputBorderFocus=dh,b.FormInputTextDefault=hh,b.FormInputTextDisabled=mh,b.FormInputTextPlaceholder=ph,b.FormLabelTextDefault=gh,b.FormLabelTextRequired=bh,b.FormLabelTypographyWeight=yh,b.FormSpacingCheckboxLabelPadding=yi,b.FormSpacingCheckboxSize=bi,b.FormSpacingInputMinHeight=gi,b.FormSpacingInputPadding=mi,b.GanttChart=X0,b.Grid=Zr,b.GridGutter=Qh,b.GridGutterHalf=ep,b.GridLines=Kc,b.GridPageWidth=Kh,b.GridWidth=nn,b.GroupHeader=ss,b.GroupableDataGrid=Nc,b.Header=Xr,b.HeaderSSR=Tm,b.HeaderSearch=Ki,b.HeaderStatic=Xr,b.Heading=Nt,b.HeadingsNhsukHeadingL=Pt,b.HeadingsNhsukHeadingM=Bt,b.HeadingsNhsukHeadingS=Ht,b.HeadingsNhsukHeadingXl=Ft,b.HeadingsNhsukHeadingXs=zt,b.Hero=Qi,b.HierarchyDataManager=os,b.Hint=bo,b.Images=hb,b.Input=Gr,b.InsetText=rb,b.Label=Vr,b.LayoutColumnActions=Yh,b.LayoutColumnFull=Uh,b.LayoutColumnHalf=Wh,b.LayoutColumnQuarter=Vh,b.LayoutColumnThird=Gh,b.LayoutContainerMaxWidth=Oh,b.Legend=qx,b.LineScalesProvider=Vc,b.LineSeriesPrimitive=ld,b.List=Yi,b.LogoVariant=Jr,b.MainWrapper=xo,b.MedicationCard=es,b.MetricCard=cd,b.NHSBodyText=h1,b.NHSBodyTextLarge=p1,b.NHSBodyTextSmall=m1,b.NHSHeading1=l1,b.NHSHeading2=c1,b.NHSHeading3=d1,b.NHSHeading4=u1,b.NHSHeading5=f1,b.NHSLedeText=g1,b.NHSLedeTextSmall=b1,b.NHSThemeProvider=vm,b.NHS_FALLBACK_FONT_STACK=T1,b.NHS_FONT_STACK=D1,b.NavigationSplitView=Ic,b.PageTemplate=Yy,b.Pagination=K0,b.Panel=Yl,b.ParagraphsBody=Rt,b.ParagraphsBodyLarge=Ot,b.ParagraphsBodySmall=Ut,b.ParagraphsLedeText=Wt,b.ParagraphsLedeTextSmall=Gt,b.ParallaxScene=Kv,b.PatientCard=Ko,b.PatternBanner=t1,b.ProductCard=o1,b.ProductCardButtonVariantEnum=Yd,b.ProductCardImageTypeEnum=Vd,b.ProductCardLayoutEnum=zn,b.ProductCardThemeEnum=wn,b.ProductRoadmap=Tc,b.Radios=tm,b.RadiosServer=rm,b.ResponsiveDataGrid=ns,b.ResponsiveDataGridDemo=Qb,b.Row=Zt,b.SPC=Vv,b.SPCChart=Ud,b.SPCMetricCard=Zv,b.Select=Wn,b.SelectOption=Oi,b.ShadowButtonDefault=gp,b.ShadowButtonFocus=xp,b.ShadowButtonSecondary=bp,b.ShadowButtonWarning=yp,b.ShadowCardDefault=vp,b.ShadowCardHover=wp,b.SizeButtonMinHeightDesktop=Rh,b.SizeButtonMinHeightMobile=zh,b.SizeFormControlLarge=Lh,b.SizeFormControlMedium=Th,b.SizeFormControlSmall=Dh,b.SizeFormInputWidth2xl=Bh,b.SizeFormInputWidth3xl=Hh,b.SizeFormInputWidthLg=Fh,b.SizeFormInputWidthMd=$h,b.SizeFormInputWidthSm=Eh,b.SizeFormInputWidthXl=Ph,b.SizeFormInputWidthXs=Ah,b.SizeIconExtraLarge=Mh,b.SizeIconLarge=jh,b.SizeIconMedium=Nh,b.SizeIconNhsDefault=Ih,b.SizeIconSmall=Ch,b.SkipLink=Yo,b.SlotMatrix=bb,b.SortStatusControl=Db,b.Spacing0=xi,b.Spacing1=vi,b.Spacing2=wi,b.Spacing3=Si,b.Spacing4=_i,b.Spacing5=ki,b.Spacing6=Ci,b.Spacing7=Ni,b.Spacing8=ji,b.Spacing9=Mi,b.SpacingResponsive0Mobile=Ra,b.SpacingResponsive0Tablet=Oa,b.SpacingResponsive1Mobile=Ua,b.SpacingResponsive1Tablet=Wa,b.SpacingResponsive2Mobile=Ga,b.SpacingResponsive2Tablet=Va,b.SpacingResponsive3Mobile=Ya,b.SpacingResponsive3Tablet=Za,b.SpacingResponsive4Mobile=qa,b.SpacingResponsive4Tablet=Ja,b.SpacingResponsive5Mobile=Xa,b.SpacingResponsive5Tablet=Ka,b.SpacingResponsive6Mobile=Qa,b.SpacingResponsive6Tablet=eo,b.SpacingResponsive7Mobile=to,b.SpacingResponsive7Tablet=no,b.SpacingResponsive8Mobile=ro,b.SpacingResponsive8Tablet=ao,b.SpacingResponsive9Mobile=oo,b.SpacingResponsive9Tablet=so,b.SpacingUtilities=sm,b.StateDisabledBackground=hp,b.StateDisabledBorder=pp,b.StateDisabledText=mp,b.StateErrorBackground=tp,b.StateErrorBorder=np,b.StateErrorText=rp,b.StateInfoBackground=dp,b.StateInfoBorder=up,b.StateInfoText=fp,b.StateSuccessBackground=ap,b.StateSuccessBorder=op,b.StateSuccessText=sp,b.StateWarningBackground=ip,b.StateWarningBorder=lp,b.StateWarningText=cp,b.StepByStepNavigation=vb,b.SummaryCard=ac,b.SummaryList=ab,b.Table=Tt,b.Tabs=db,b.Tag=nt,b.TaskList=tc,b.Textarea=Ri,b.TooltipOverlay=Zx,b.TooltipProvider=id,b.TransactionalPageTemplate=Zy,b.TransitionButtonDefault=tu,b.TransitionButtonShadow=nu,b.TransitionCardHover=au,b.TransitionInputFocus=ru,b.TreeNodeComponent=is,b.VectorGraphicKindEnum=_t,b.VectorGraphicShadowEnum=Rn,b.VisibilityProvider=Gx,b.VitalsCard=ts,b.WIDTH_FRACTIONS=dm,b.WarningCallout=fb,b.WidthContainer=ls,b.WidthUtilities=lm,b.WorkflowSplitView=ox,b.applyAggregation=Sc,b.applyAggregations=_a,b.brandLogos=Ji,b.checkFrutigerLoaded=L1,b.createGenericTabsConfig=va,b.createTCHTabsConfig=Fb,b.enhanceDataWithCalculatedFields=_c,b.generateFrutigerFontFace=M1,b.getBrandLogo=wo,b.getResponsiveStyles=i1,b.getSpacingClass=im,b.getWidthClass=cm,b.preloadFrutigerFonts=I1,b.tchDataConfig=lc,b.useBrand=Xi,b.useColors=x1,b.useComponentSpacing=_1,b.useNHSHeadings=k1,b.useNHSParagraphs=C1,b.useNHSTheme=bm,b.useNHSTypographySystem=N1,b.useNavigationSplitDrill=j1,b.useNavigationSplitUrlSync=jc,b.useNhsFdpBreakpoints=Ca,b.useResponsiveSpacing=S1,b.useResponsiveValue=Qy,b.useSpacing=v1,b.useSpc=Wd,b.useTokens=y1,b.useTypography=w1,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.js.map
