(function(b,B){typeof exports=="object"&&typeof module<"u"?B(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],B):(b=typeof globalThis<"u"?globalThis:b||self,B(b.NHSFDPDesignSystem={},b.React,b.ReactDOM))})(this,(function(b,B,Fg){"use strict";function Lg(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}const K=Lg(B);function Eg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var La={exports:{}},jr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ic;function Bg(){if(ic)return jr;ic=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var l in a)l!=="key"&&(i[l]=a[l])}else i=a;return a=i.ref,{$$typeof:t,type:r,key:s,ref:a!==void 0?a:null,props:i}}return jr.Fragment=e,jr.jsx=n,jr.jsxs=n,jr}var Nr={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sc;function Ag(){return sc||(sc=1,process.env.NODE_ENV!=="production"&&(function(){function t(H){if(H==null)return null;if(typeof H=="function")return H.$$typeof===$?null:H.displayName||H.name||null;if(typeof H=="string")return H;switch(H){case p:return"Fragment";case _:return"Profiler";case h:return"StrictMode";case P:return"Suspense";case C:return"SuspenseList";case x:return"Activity"}if(typeof H=="object")switch(typeof H.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),H.$$typeof){case y:return"Portal";case j:return(H.displayName||"Context")+".Provider";case N:return(H._context.displayName||"Context")+".Consumer";case w:var U=H.render;return H=H.displayName,H||(H=U.displayName||U.name||"",H=H!==""?"ForwardRef("+H+")":"ForwardRef"),H;case M:return U=H.displayName||null,U!==null?U:t(H.type)||"Memo";case S:U=H._payload,H=H._init;try{return t(H(U))}catch{}}return null}function e(H){return""+H}function n(H){try{e(H);var U=!1}catch{U=!0}if(U){U=console;var O=U.error,re=typeof Symbol=="function"&&Symbol.toStringTag&&H[Symbol.toStringTag]||H.constructor.name||"Object";return O.call(U,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",re),e(H)}}function r(H){if(H===p)return"<>";if(typeof H=="object"&&H!==null&&H.$$typeof===S)return"<...>";try{var U=t(H);return U?"<"+U+">":"<...>"}catch{return"<...>"}}function a(){var H=k.A;return H===null?null:H.getOwner()}function i(){return Error("react-stack-top-frame")}function s(H){if(v.call(H,"key")){var U=Object.getOwnPropertyDescriptor(H,"key").get;if(U&&U.isReactWarning)return!1}return H.key!==void 0}function l(H,U){function O(){I||(I=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",U))}O.isReactWarning=!0,Object.defineProperty(H,"key",{get:O,configurable:!0})}function u(){var H=t(this.type);return T[H]||(T[H]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),H=this.props.ref,H!==void 0?H:null}function c(H,U,O,re,G,ce,ve,de){return O=ce.ref,H={$$typeof:g,type:H,key:U,props:ce,_owner:G},(O!==void 0?O:null)!==null?Object.defineProperty(H,"ref",{enumerable:!1,get:u}):Object.defineProperty(H,"ref",{enumerable:!1,value:null}),H._store={},Object.defineProperty(H._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(H,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(H,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ve}),Object.defineProperty(H,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:de}),Object.freeze&&(Object.freeze(H.props),Object.freeze(H)),H}function d(H,U,O,re,G,ce,ve,de){var he=U.children;if(he!==void 0)if(re)if(A(he)){for(re=0;re<he.length;re++)f(he[re]);Object.freeze&&Object.freeze(he)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(he);if(v.call(U,"key")){he=t(H);var ee=Object.keys(U).filter(function(L){return L!=="key"});re=0<ee.length?"{key: someKey, "+ee.join(": ..., ")+": ...}":"{key: someKey}",z[he+re]||(ee=0<ee.length?"{"+ee.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,re,he,ee,he),z[he+re]=!0)}if(he=null,O!==void 0&&(n(O),he=""+O),s(U)&&(n(U.key),he=""+U.key),"key"in U){O={};for(var ie in U)ie!=="key"&&(O[ie]=U[ie])}else O=U;return he&&l(O,typeof H=="function"?H.displayName||H.name||"Unknown":H),c(H,he,ce,G,a(),O,ve,de)}function f(H){typeof H=="object"&&H!==null&&H.$$typeof===g&&H._store&&(H._store.validated=1)}var m=B,g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),j=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),$=Symbol.for("react.client.reference"),k=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,v=Object.prototype.hasOwnProperty,A=Array.isArray,D=console.createTask?console.createTask:function(){return null};m={react_stack_bottom_frame:function(H){return H()}};var I,T={},E=m.react_stack_bottom_frame.bind(m,i)(),ae=D(r(i)),z={};Nr.Fragment=p,Nr.jsx=function(H,U,O,re,G){var ce=1e4>k.recentlyCreatedOwnerStacks++;return d(H,U,O,!1,re,G,ce?Error("react-stack-top-frame"):E,ce?D(r(H)):ae)},Nr.jsxs=function(H,U,O,re,G){var ce=1e4>k.recentlyCreatedOwnerStacks++;return d(H,U,O,!0,re,G,ce?Error("react-stack-top-frame"):E,ce?D(r(H)):ae)}})()),Nr}var oc;function Rg(){return oc||(oc=1,process.env.NODE_ENV==="production"?La.exports=Bg():La.exports=Ag()),La.exports}var o=Rg(),is={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var lc;function Hg(){return lc||(lc=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",s=0;s<arguments.length;s++){var l=arguments[s];l&&(i=a(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var l in i)e.call(i,l)&&i[l]&&(s=a(s,l));return s}function a(i,s){return s?i?i+" "+s:i+s:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(is)),is.exports}var Og=Hg();const _e=Eg(Og),zg=({text:t,href:e,openInNewWindow:n=!1,className:r,...a})=>{const i=_e("nhsuk-action-link__link",r);return o.jsx("div",{className:"nhsuk-action-link",children:o.jsxs("a",{className:i,href:e,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,...a,children:[o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right-circle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"36",height:"36",children:[o.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),o.jsx("path",{d:"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"})]}),o.jsx("span",{className:"nhsuk-action-link__text",children:t})]})})},cc=({ariaLabel:t="Account",items:e=[],className:n,variant:r="default"})=>{if(!e||e.length===0)return null;const a=i=>{const s=i.icon?o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__user",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",role:"img","aria-label":i.icon===!0?"User":void 0,children:o.jsx("path",{d:"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z"})}):null,l=i.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:i.html}}):i.text,u=o.jsxs(o.Fragment,{children:[s,l]});return i.href?o.jsx("a",{className:"nhsuk-account__link nhsuk-header__account-link",href:i.href,children:u}):i.action?o.jsx("form",{className:"nhsuk-account__form",action:i.action,method:i.method||"post",children:o.jsx("button",{className:"nhsuk-account__button",type:"submit",role:"button",children:u})}):o.jsx("span",{children:u})};return o.jsx("nav",{className:_e("nhsuk-account",{"nhsuk-account--white":r==="white"},n),"aria-label":t,children:o.jsx("ul",{className:"nhsuk-account__list",children:e.map((i,s)=>i&&o.jsx("li",{className:_e("nhsuk-account__item nhsuk-header__account-item",i.className),children:a(i)},s))})})};function Wg(t){const e=t.variant||"primary",n=t.size||"default",r=!!t.fullWidth,a=["nhs-aria-button",`nhs-aria-button--${e}`,n!=="default"?`nhs-aria-button--${n}`:"",r?"nhs-aria-button--full-width":"",t.className||""].filter(Boolean).join(" ");return{tag:t.href?"a":"button",classes:a,data:{module:"nhs-button"},attrs:t.href?{href:t.href,role:"button"}:{type:"button"},preventDoubleClick:!!t.preventDoubleClick}}const{forwardRef:Ug,useCallback:_n,useState:ss}=K;function Gg(t,e){const{children:n,variant:r="primary",size:a="default",fullWidth:i=!1,className:s="",preventDoubleClick:l=!1,...u}=t,[c,d]=ss(!1),[f,m]=ss(!1),[g,y]=ss(!1),p=Wg({variant:r,size:a,fullWidth:i,className:s,preventDoubleClick:l,href:"href"in u?u.href:void 0}),h="disabled"in u?u.disabled:u["aria-disabled"]==="true",_={...c&&{"data-pressed":"true"},...f&&{"data-hovered":"true"},...g&&{"data-focused":"true"},...h&&{"data-disabled":"true"}},N=_n(()=>!h&&d(!0),[h]),j=_n(()=>d(!1),[]),w=_n(()=>!h&&m(!0),[h]),P=_n(()=>{m(!1),d(!1)},[]),C=_n(()=>y(!0),[]),M=_n(()=>y(!1),[]),S=_n(he=>{he.key===" "&&("href"in u||he.currentTarget.getAttribute("role")==="button")&&(he.preventDefault(),he.currentTarget.click())},[u]),x=_n(he=>{if(l){const ee=he.currentTarget;if(ee.getAttribute("data-processing")==="true"){he.preventDefault();return}ee.setAttribute("data-processing","true"),setTimeout(()=>{ee.removeAttribute("data-processing")},1e3)}},[l]);if("href"in u&&u.href){const{id:he,style:ee,title:ie,["aria-label"]:L,["aria-describedby"]:F,["aria-labelledby"]:W,tabIndex:Z,...Y}=u,X=u;return o.jsx("a",{ref:e,href:X.href,target:X.target,rel:X.rel,className:p.classes,role:"button",draggable:"false","data-module":"nhs-button",..._,...l&&{"data-prevent-double-click":"true"},...Y,onKeyDown:fe=>{X.onKeyDown?.(fe),S(fe)},onClick:fe=>{X.onClick?.(fe),x(fe)},onMouseDown:fe=>{X.onMouseDown?.(fe),N()},onMouseUp:fe=>{X.onMouseUp?.(fe),j()},onMouseEnter:fe=>{X.onMouseEnter?.(fe),w()},onMouseLeave:fe=>{X.onMouseLeave?.(fe),P()},onFocus:fe=>{X.onFocus?.(fe),C()},onBlur:fe=>{X.onBlur?.(fe),M()},"aria-disabled":X["aria-disabled"],...X["aria-disabled"]==="true"&&{tabIndex:-1},id:he,style:ee,title:ie,"aria-label":L,"aria-describedby":F,"aria-labelledby":W,tabIndex:Z,children:n})}const{id:$,style:k,title:v,["aria-label"]:A,["aria-describedby"]:D,["aria-labelledby"]:I,tabIndex:T,name:E,value:ae,form:z,formAction:H,formEncType:U,formMethod:O,formNoValidate:re,formTarget:G,autoFocus:ce,...ve}=u,de=u;return o.jsx("button",{ref:e,type:de.type||"button",disabled:de.disabled,className:p.classes,"data-module":"nhs-button",..._,...l&&{"data-prevent-double-click":"true"},...de.disabled&&{"aria-disabled":"true"},...ve,onKeyDown:he=>{de.onKeyDown?.(he),S(he)},onClick:he=>{de.onClick?.(he),x(he)},onMouseDown:he=>{de.onMouseDown?.(he),N()},onMouseUp:he=>{de.onMouseUp?.(he),j()},onMouseEnter:he=>{de.onMouseEnter?.(he),w()},onMouseLeave:he=>{de.onMouseLeave?.(he),P()},onFocus:he=>{de.onFocus?.(he),C()},onBlur:he=>{de.onBlur?.(he),M()},id:$,style:k,title:v,"aria-label":A,"aria-describedby":D,"aria-labelledby":I,tabIndex:T,name:E,value:ae,form:z,formAction:H,formEncType:U,formMethod:O,formNoValidate:re,formTarget:G,autoFocus:ce,children:n})}const at=Ug(Gg);at.displayName="Button";const Ea=({text:t="Back",html:e,href:n="#",className:r,element:a="a",onClick:i,...s})=>{const l=_e("nhsuk-back-link",r),u=_e("nhsuk-back-link__link"),c=()=>o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:o.jsx("path",{d:"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"})}),e?o.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t]});return o.jsx("div",{className:l,children:a==="button"?o.jsx("button",{className:u,onClick:i,type:"button",...s,children:c()}):o.jsx("a",{className:u,href:n,...s,children:c()})})};function Vg(t){const{color:e="default",noBorder:n,closable:r,disabled:a,className:i}=t;return{classes:["nhsuk-tag",e!=="default"?`nhsuk-tag--${e}`:"",n?"nhsuk-tag--no-border":"",r?"nhsuk-tag--closable":"",a?"nhsuk-tag--disabled":"",i||""].filter(Boolean).join(" "),showClose:!!r,disabled:!!a}}const qe=({text:t,html:e,children:n,color:r="default",noBorder:a=!1,closable:i=!1,onClose:s,disabled:l=!1,className:u,...c})=>{const d=Vg({color:r,noBorder:a,closable:i,disabled:l,className:u}),f=m=>{m.preventDefault(),m.stopPropagation(),!l&&s&&s()};return o.jsxs("strong",{className:d.classes,...c,children:[n||(e?o.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t),i&&o.jsx("button",{type:"button",className:"nhsuk-tag__close",onClick:f,disabled:l,"aria-label":"Remove",title:"Remove",children:"Ã—"})]})},uc=({id:t,name:e,checked:n,defaultChecked:r=!1,disabled:a=!1,value:i="true",hint:s,errorMessage:l,className:u,children:c,onChange:d,onBlur:f,onFocus:m,attributes:g,...y})=>{const[p,h]=B.useState(r),_=n!==void 0,N=_?n:p;B.useEffect(()=>{_||h(r)},[r,_]);const j=S=>{const x=S.target.checked;_||h(x),d?.(x,S)},w=s?`${t}-hint`:void 0,P=l?`${t}-error`:void 0,C=[w,P].filter(Boolean).join(" ")||void 0,M=_e("nhsuk-form-group",{"nhsuk-form-group--error":!!l},u);return o.jsx("div",{className:M,...y,children:o.jsx("div",{className:"nhsuk-checkboxes",children:o.jsxs("div",{className:"nhsuk-checkboxes__item",children:[o.jsx("input",{className:"nhsuk-checkboxes__input",id:t,name:e||t,type:"checkbox",value:i,checked:N,disabled:a,onChange:j,onBlur:f,onFocus:m,"aria-describedby":C,...g}),o.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:t,children:c}),s&&o.jsx("div",{id:w,className:"nhsuk-checkboxes__hint",children:s}),l&&o.jsxs("div",{id:P,className:"nhsuk-error-message nhsuk-checkboxes__error",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]})]})})})};uc.displayName="Checkbox";function Yg(t){const n=(t.type||"text")==="range";return{classes:["nhsuk-input",t.hasError?"nhsuk-input--error":"",n?"nhsuk-input--range":"",!n&&t.width&&t.width!=="full"?`nhsuk-input--width-${t.width}`:"",t.className||""].filter(Boolean).join(" "),isRange:n}}const Ba=({id:t,name:e,type:n="text",value:r,defaultValue:a,placeholder:i,disabled:s=!1,readOnly:l=!1,required:u=!1,hasError:c=!1,describedBy:d,className:f,width:m="full",inputMode:g,autoComplete:y,maxLength:p,minLength:h,pattern:_,step:N,min:j,max:w,showValueLabels:P=!1,showCurrentValue:C=!1,valueLabels:M,onChange:S,onBlur:x,onFocus:$,onKeyDown:k,...v})=>{const[A,D]=B.useState(r||a||(n==="range"?j||"0":""));B.useEffect(()=>{r!==void 0&&D(r)},[r]);const I=G=>{const ce=G.target;D(ce.value),("type"in G&&G.nativeEvent||G.type==="keydown")&&S?.(G)},{classes:T,isRange:E}=Yg({type:n,hasError:c,width:m,className:f}),ae=r!==void 0,z={id:t,name:e,type:n,placeholder:i,disabled:s,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:y,maxLength:p,minLength:h,pattern:_,step:N,min:j,max:w,onChange:I,onBlur:x,onFocus:$,onKeyDown:G=>{if(E&&/[0-9]/.test(G.key)){const ce=(A?.toString()||"")+G.key;G.target.value=ce,I(G)}k?.(G)},...v},H=!ae&&a!==void 0?{defaultValue:a}:{},U=ae?{value:r}:{},O=()=>o.jsx("input",{className:T,...U,...H,"data-current-value":A,...z}),re=E?o.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[P&&o.jsxs("div",{className:"nhsuk-input-range-labels",children:[o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:M?.min||j||"0"}),O(),o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:M?.max||w||"100"})]}),!P&&O(),C&&o.jsx("div",{className:"nhsuk-input-range-current-value",children:o.jsxs("span",{className:"nhsuk-input-range-current-label",children:[M?.current||"Current value:"," ",o.jsx("strong",{children:A})]})})]}):null;return E?re:o.jsx("input",{className:T,id:t,name:e,type:n,value:r,...r===void 0&&a!==void 0?{defaultValue:a}:{},placeholder:i,disabled:s,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:y,maxLength:p,minLength:h,pattern:_,step:N,min:j,max:w,onChange:S,onBlur:x,onFocus:$,onKeyDown:k,...v})};function qg(t){const e=t.size||"m",n=["nhsuk-label",e!=="m"?`nhsuk-label--${e}`:"",t.className||""].filter(Boolean).join(" ");return{tag:t.isPageHeading?"h1":"label",classes:n,size:e,htmlFor:t.isPageHeading?void 0:t.htmlFor,isPageHeading:!!t.isPageHeading}}const Aa=({htmlFor:t,className:e,isPageHeading:n=!1,size:r="m",children:a,...i})=>{const s=qg({size:r,isPageHeading:n,className:e,htmlFor:t}),l=s.tag;return o.jsx(l,{className:s.classes,htmlFor:s.htmlFor,...i,children:n?o.jsx("label",{className:"nhsuk-label-wrapper",htmlFor:t,children:a}):a})},Ra=({children:t,legend:e,className:n,describedBy:r,...a})=>{const i=_e("nhsuk-fieldset",n),s=_e("nhsuk-fieldset__legend",{[`nhsuk-fieldset__legend--${e?.size}`]:e?.size},e?.className),l=()=>{const u=e?.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:e.html}}):e?.text;return e?.isPageHeading?o.jsx("h1",{className:"nhsuk-fieldset__heading",children:u}):u};return o.jsxs("fieldset",{className:i,"aria-describedby":r,...a,children:[e&&(e.text||e.html)&&o.jsx("legend",{className:s,children:l()}),t]})},dc=({items:t,name:e,idPrefix:n,legend:r,isPageHeading:a=!1,legendSize:i="l",hint:s,errorMessage:l,className:u="",small:c=!1,onChange:d,fieldsetAttributes:f,attributes:m,...g})=>{const[y,p]=B.useState(t.filter(S=>S.checked).map(S=>S.value)),h=n||e,_=s?`${h}-hint`:void 0,N=l?`${h}-error`:void 0,j=[_,N].filter(Boolean).join(" ")||void 0,w=(S,x)=>{let $;x?$=[...y,S]:$=y.filter(k=>k!==S),p($),d?.($)},P=()=>t.map((S,x)=>{const $=`${h}-${x+1}`,k=`${$}-conditional`,v=y.includes(S.value),A=S.disabled||!1;return o.jsxs("div",{className:"nhsuk-checkboxes__item",children:[o.jsx("input",{className:"nhsuk-checkboxes__input",id:$,name:e,type:"checkbox",value:S.value,checked:v,disabled:A,onChange:D=>w(S.value,D.target.checked),"aria-describedby":S.hint?`${$}-hint`:j,...S.conditional&&{"aria-controls":k,"aria-expanded":v?"true":"false"},...S.attributes}),o.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:$,children:S.text}),S.hint&&o.jsx("div",{id:`${$}-hint`,className:"nhsuk-checkboxes__hint",children:S.hint}),S.conditional&&o.jsx("div",{className:_e("nhsuk-checkboxes__conditional",{"nhsuk-checkboxes__conditional--hidden":!v}),id:k,children:typeof S.conditional=="object"&&S.conditional!==null&&"label"in S.conditional&&"id"in S.conditional&&"name"in S.conditional?o.jsxs("div",{style:{marginTop:"16px"},children:[S.conditional.label&&o.jsx(Aa,{htmlFor:S.conditional.id,children:S.conditional.label}),o.jsx(Ba,{...S.conditional})]}):S.conditional})]},S.value)}),C=_e("nhsuk-checkboxes",{"nhsuk-checkboxes--small":c},u),M=_e("nhsuk-form-group",{"nhsuk-form-group--error":!!l});return o.jsx("div",{className:M,...m,...g,children:o.jsxs(Ra,{legend:r?{text:r,isPageHeading:a,size:i}:void 0,describedBy:j,...f,children:[s&&o.jsx("div",{id:_,className:"nhsuk-hint",children:s}),l&&o.jsxs("div",{id:N,className:"nhsuk-error-message",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]}),o.jsx("div",{className:C,children:P()})]})})};dc.displayName="Checkboxes";const fc=({id:t,name:e,value:n,defaultValue:r,placeholder:a,disabled:i=!1,readOnly:s=!1,required:l=!1,hasError:u=!1,describedBy:c,className:d,rows:f=5,cols:m,maxLength:g,minLength:y,wrap:p="soft",resize:h="vertical",autoComplete:_,spellCheck:N,onChange:j,onBlur:w,onFocus:P,onKeyDown:C,...M})=>{const S=_e("nhsuk-textarea",{"nhsuk-textarea--error":u,[`nhsuk-textarea--resize-${h}`]:h!=="vertical"},d);return o.jsx("textarea",{className:S,id:t,name:e,value:n,defaultValue:r,placeholder:a,disabled:i,readOnly:s,required:l,"aria-describedby":c,rows:f,cols:m,maxLength:g,minLength:y,wrap:p,autoComplete:_,spellCheck:N,onChange:j,onBlur:w,onFocus:P,onKeyDown:C,...M})};function Xg(t){return{classes:["nhsuk-hint",t.className||""].filter(Boolean).join(" "),id:t.id}}const os=({id:t,className:e,children:n,...r})=>{const a=Xg({id:t,className:e});return o.jsx("div",{className:a.classes,id:a.id,...r,children:n})},Kg=({id:t,maxLength:e,maxWords:n,threshold:r=75,name:a,value:i,defaultValue:s,rows:l,className:u,countMessage:c,onCountChange:d,onChange:f,...m})=>{const g=i??s??"",[y,p]=B.useState(g),[h,_]=B.useState(0),[N,j]=B.useState(!1),[w,P]=B.useState(!1),C=B.useCallback(v=>n?v.trim()===""?0:v.trim().split(/\s+/).length:v.length,[n]);B.useEffect(()=>{const v=C(y),A=e||n||0,D=A-v,I=Math.floor(A*(r/100));_(D),j(v>A),P(v>=I||v>A),d&&d(v,D)},[y,e,n,r,C,d]);const M=v=>{const A=v.target.value;p(A),f&&f(v)},S=()=>{const v=e||n||0,A=n?"word":"character",D=n?"words":"characters";if(!w)return`You can enter up to ${v} ${v===1?A:D}`;if(N){const I=Math.abs(h);return`You have ${I} ${I===1?A:D} too many`}else return`You have ${h} ${h===1?A:D} remaining`},x=_e("nhsuk-character-count",u),$=_e("nhsuk-character-count__message",{"nhsuk-character-count__message--disabled":!w,"nhsuk-error-message":N},c?.classes),k=_e("nhsuk-js-character-count",{"nhsuk-textarea--error":N});return o.jsxs("div",{className:x,"data-module":"nhsuk-character-count","data-maxlength":e,"data-maxwords":n,"data-threshold":r,"data-testid":"character-count",children:[o.jsx(fc,{id:t,name:a,value:i!==void 0?y:void 0,defaultValue:i===void 0?s??y:void 0,rows:l,className:k,onChange:M,"aria-describedby":`${t}-info`,"aria-invalid":N||void 0,...m}),o.jsx(os,{id:`${t}-info`,className:$,role:"status","aria-live":"polite",children:S()})]})},hc=({value:t,disabled:e=!1,selected:n=!1,className:r,children:a,...i})=>{const s=_e("nhsuk-select__option",r);return o.jsx("option",{className:s,value:t,disabled:e,...i,children:a})},Dr=({id:t,name:e,ariaLabel:n,value:r,defaultValue:a,disabled:i=!1,required:s=!1,hasError:l=!1,describedBy:u,className:c,multiple:d=!1,size:f,autoComplete:m,options:g,children:y,onChange:p,onBlur:h,onFocus:_,...N})=>{const j=_e("nhsuk-select",{"nhsuk-select--error":l},c),w=()=>g?g.map((C,M)=>o.jsx("option",{value:C.value,disabled:C.disabled,"data-initial-selected":C.selected||void 0,children:C.text},`${C.value}-${M}`)):null,P=a===void 0&&r===void 0&&g?g.find(C=>C.selected)?.value:void 0;return o.jsx("select",{className:j,id:t,name:e,"aria-label":n,value:r,defaultValue:a!==void 0?a:P,disabled:i,required:s,"aria-describedby":u,multiple:d,size:f,autoComplete:m,onChange:p,onBlur:h,onFocus:_,...N,children:y||w()})};Dr.Option=hc;function pc(t,{variant:e,selectedValue:n,enableBehaviourAttr:r,handleChange:a,handleBlur:i,handleFocus:s,handleKeyDown:l,itemsRef:u}){const{onChange:c,onBlur:d,onFocus:f,...m}=t,{name:g,hasError:y=!1,describedBy:p,className:h,size:_="normal",inline:N=!1,options:j,...w}=m,P=_e("nhsuk-radios",{"nhsuk-radios--error":y,"nhsuk-radios--small":_==="small","nhsuk-radios--inline":N},h);return o.jsx(Ra,{children:o.jsx("div",{className:P,...w,...r?{"data-nhs-behaviour":"radios"}:{},children:j.map((C,M)=>{const S=`${g}-${M}`,x=C.conditional?`${S}-conditional`:void 0,$=n===C.value;return o.jsxs("div",{className:"nhsuk-radios__item",children:[o.jsx("input",{className:"nhsuk-radios__input",id:S,name:g,type:"radio",value:C.value,disabled:C.disabled,...e==="client"?{checked:$,onChange:a,onBlur:i,onFocus:s,onKeyDown:l,ref:k=>{k&&u&&(u.current[M]=k)}}:{defaultChecked:$,"data-nhs-radios-input":!0},"aria-describedby":p}),o.jsx("label",{className:"nhsuk-radios__label",htmlFor:S,children:C.text}),C.hint&&o.jsx("div",{className:"nhsuk-radios__hint",children:C.hint}),C.conditional&&o.jsx("div",{className:_e("nhsuk-radios__conditional",{"nhsuk-radios__conditional--hidden":!$}),id:x,...e==="server"?{"data-nhs-radios-conditional":!0}:{},children:typeof C.conditional=="object"&&C.conditional!==null&&"label"in C.conditional&&"id"in C.conditional&&"name"in C.conditional?o.jsxs("div",{style:{marginTop:"16px"},children:[C.conditional.label&&o.jsx(Aa,{htmlFor:C.conditional.id,children:C.conditional.label}),o.jsx(Ba,{...C.conditional})]}):C.conditional})]},C.value)})})})}const Zg=({value:t,defaultValue:e,onChange:n,onBlur:r,onFocus:a,...i})=>{const[s,l]=B.useState(t||e||""),u=B.useRef([]),c=B.useRef(s),d=g=>{const y=g.target.value;y!==c.current&&(c.current=y,l(y),n?.(g))},f=g=>{a?.(g)},m=B.useCallback(g=>{const{key:y}=g;if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(y))return;g.preventDefault();const p=u.current.filter(j=>j&&!j.disabled),h=p.indexOf(g.currentTarget);if(h===-1)return;let _=h;["ArrowDown","ArrowRight"].includes(y)?_=(h+1)%p.length:["ArrowUp","ArrowLeft"].includes(y)&&(_=(h-1+p.length)%p.length);const N=p[_];N&&(N.focus(),N.checked||N.click())},[]);return pc({value:t,defaultValue:e,onChange:n,onBlur:r,onFocus:a,...i},{variant:"client",selectedValue:s,enableBehaviourAttr:!1,handleChange:d,handleBlur:r,handleFocus:f,handleKeyDown:m,itemsRef:u})},Jg=({value:t,defaultValue:e,...n})=>{const r=t||e||"";return pc({value:t,defaultValue:e,...n},{variant:"server",selectedValue:r,enableBehaviourAttr:!0})},ls=({children:t,className:e,fluid:n=!1,maxWidth:r,style:a,...i})=>{const s=_e({"nhsuk-width-container":!n,"nhsuk-width-container-fluid":n},e),l=r?{maxWidth:r,...a||{}}:a;return o.jsx("div",{className:s,style:l,...i,children:t})},bn=({children:t,className:e,style:n,...r})=>{const a=_e("nhsuk-grid-row",e);return o.jsx("div",{className:a,style:n,...r,children:t})},Qn=({children:t,width:e="full",mobileWidth:n,tabletWidth:r,desktopWidth:a,start:i,className:s,forceWidth:l=!1,style:u,...c})=>{const d=_e({[`nhsuk-grid-column-${e}`]:!l,[`nhsuk-u-${e}`]:l,[`nhsuk-u-${n}-mobile`]:n,[`nhsuk-u-${r}-tablet`]:r,[`nhsuk-u-${a}-desktop`]:a,[`nhsuk-grid-column-start-${i}`]:i&&i>=1&&i<=7},s);return o.jsx("div",{className:d,style:u,...c,children:t})},Ha=({children:t,className:e,style:n,...r})=>{const i=B.Children.toArray(t)[0],s=B.isValidElement(i)&&(i.type===bn||typeof i.props=="object"&&i.props&&"className"in i.props&&typeof i.props.className=="string"&&i.props.className.includes("nhsuk-grid-row"));return o.jsx(ls,{className:e,style:n,...r,children:s?t:o.jsx(bn,{children:t})})},Qg=({children:t,type:e="bullet",size:n="medium",border:r=!1,className:a,role:i,as:s,...l})=>{const u=s||(e==="number"?"ol":"ul"),c=_e("nhsuk-list",{"nhsuk-list--bullet":e==="bullet","nhsuk-list--number":e==="number","nhsuk-list--none":e==="none","nhsuk-list--border":r,[`nhsuk-list--${n}`]:n!=="medium"},a);return o.jsx(u,{className:c,role:i,...l,children:t})},e0=({children:t,className:e,...n})=>{const r=_e("nhsuk-list__item",e);return o.jsx("li",{className:r,...n,children:t})},mc=Qg;mc.Item=e0;const t0=({debug:t=!1,className:e,children:n,...r})=>{if(!n)return null;const a=["nhsuk-spacing-utilities",t&&"nhsuk-spacing-utilities--debug",e].filter(Boolean).join(" ");return o.jsx("div",{className:a,...r,children:n})},n0={margin:t=>`nhsuk-u-margin-${t}`,marginTop:t=>`nhsuk-u-margin-top-${t}`,marginRight:t=>`nhsuk-u-margin-right-${t}`,marginBottom:t=>`nhsuk-u-margin-bottom-${t}`,marginLeft:t=>`nhsuk-u-margin-left-${t}`,padding:t=>`nhsuk-u-padding-${t}`,paddingTop:t=>`nhsuk-u-padding-top-${t}`,paddingRight:t=>`nhsuk-u-padding-right-${t}`,paddingBottom:t=>`nhsuk-u-padding-bottom-${t}`,paddingLeft:t=>`nhsuk-u-padding-left-${t}`,marginResponsive:t=>`nhsuk-u-margin-responsive-${t}`,marginTopResponsive:t=>`nhsuk-u-margin-top-responsive-${t}`,marginRightResponsive:t=>`nhsuk-u-margin-right-responsive-${t}`,marginBottomResponsive:t=>`nhsuk-u-margin-bottom-responsive-${t}`,marginLeftResponsive:t=>`nhsuk-u-margin-left-responsive-${t}`,paddingResponsive:t=>`nhsuk-u-padding-responsive-${t}`,paddingTopResponsive:t=>`nhsuk-u-padding-top-responsive-${t}`,paddingRightResponsive:t=>`nhsuk-u-padding-right-responsive-${t}`,paddingBottomResponsive:t=>`nhsuk-u-padding-bottom-responsive-${t}`,paddingLeftResponsive:t=>`nhsuk-u-padding-left-responsive-${t}`},r0=({debug:t=!1,className:e,children:n,...r})=>{if(!n)return null;const a=["nhsuk-width-utilities",t&&"nhsuk-width-utilities--debug",e].filter(Boolean).join(" ");return o.jsx("div",{className:a,...r,children:n})},a0={width:t=>`nhsuk-u-width-${t}`,widthTablet:t=>`nhsuk-u-width-${t}-tablet`},i0=["full","three-quarters","two-thirds","one-half","one-third","one-quarter"],cs=({as:t="main",size:e="default",className:n,children:r,...a})=>{const i=["nhsuk-main-wrapper",e==="large"&&"nhsuk-main-wrapper--l",e==="small"&&"nhsuk-main-wrapper--s",n].filter(Boolean).join(" ");return o.jsx(t,{className:i,...a,children:r})};function s0(t){switch(t){case"xxl":case"xl":return 1;case"l":return 2;case"m":return 3;case"s":return 4;case"xs":return 5;default:return 2}}function o0(t){const e=t.level??s0(t.size),n=["nhsuk-heading",t.size?`nhsuk-heading--${t.size}`:"",t.className||""].filter(Boolean).join(" "),r=t.marginBottom?{marginBottom:t.marginBottom}:void 0;return{tag:`h${e}`,classes:n,style:r}}const Bt=({level:t,className:e,text:n,html:r,children:a,size:i,marginBottom:s,...l})=>{const u=o0({level:t,size:i,className:e,marginBottom:s}),c=a||(r?o.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n);return B.createElement(u.tag,{className:u.classes,style:u.style,...l},c)};function l0(t){return{classes:["nhsuk-error-message",t.className||""].filter(Boolean).join(" "),id:t.id,visuallyHiddenText:t.visuallyHiddenText??"Error:"}}const us=({id:t,className:e,visuallyHiddenText:n="Error:",children:r,...a})=>{const i=l0({id:t,className:e,visuallyHiddenText:n});return o.jsxs("span",{className:i.classes,id:i.id,...a,children:[o.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[i.visuallyHiddenText," "]}),r]})},c0=({titleText:t="There is a problem",titleHtml:e,descriptionText:n,descriptionHtml:r,errorList:a,className:i,children:s,...l})=>{const u=B.useRef(null);B.useEffect(()=>{u.current&&u.current.focus()},[]);const c=_e("nhsuk-error-summary",i),d=()=>e?o.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t,f=()=>r?o.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n,m=g=>{const y=g.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:g.html}}):g.text;return g.href?o.jsx("a",{href:g.href,...g.attributes,children:y}):y};return o.jsxs("div",{ref:u,className:c,"aria-labelledby":"error-summary-title",role:"alert",tabIndex:-1,"data-module":"nhsuk-error-summary",...l,children:[o.jsx("h2",{className:"nhsuk-error-summary__title",id:"error-summary-title",children:d()}),o.jsxs("div",{className:"nhsuk-error-summary__body",children:[s&&o.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:s}),!s&&(n||r)&&o.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:f()}),o.jsx("ul",{className:"nhsuk-list nhsuk-error-summary__list",role:"list",children:a.map((g,y)=>o.jsx("li",{children:m(g)},y))})]})]})},u0=({id:t,className:e,items:n,namePrefix:r,values:a={},fieldset:i,hint:s,errorMessage:l,onChange:u,...c})=>{const[d,f]=B.useState(()=>({day:a.day||"",month:a.month||"",year:a.year||""})),[m,g]=B.useState({}),y=I=>I%4===0&&I%100!==0||I%400===0,p=(I,T)=>{const E=[31,28,31,30,31,30,31,31,30,31,30,31];return I===2&&y(T)?29:E[I-1]},h=(I,T,E)=>{if(!I)return;if(!/^\d+$/.test(I))return"Day must be a number";const ae=parseInt(I,10);if(ae<1||ae>31)return"Day must be between 1 and 31";if(T&&E){const z=parseInt(T,10),H=parseInt(E,10);if(!isNaN(z)&&!isNaN(H)&&z>=1&&z<=12){const U=p(z,H);if(ae>U)return`${["January","February","March","April","May","June","July","August","September","October","November","December"][z-1]} ${H} only has ${U} days`}}},_=I=>{if(!I)return;if(!/^\d+$/.test(I))return"Month must be a number";const T=parseInt(I,10);if(T<1||T>12)return"Month must be between 1 and 12"},N=I=>{if(!I)return;if(!/^\d+$/.test(I))return"Year must be a number";const T=parseInt(I,10),E=new Date().getFullYear();if(T<1900||T>E+10)return`Year must be between 1900 and ${E+10}`},j=(I,T,E)=>{if(!I||!T||!E)return;const ae=parseInt(I,10),z=parseInt(T,10),H=parseInt(E,10);if(isNaN(ae)||isNaN(z)||isNaN(H)||z<1||z>12||H<1900)return;const U=p(z,H);ae<1||ae>U},w=B.useCallback((I,T)=>{const E={...d,[I]:T};f(E),u&&u(E)},[d,u]),P=B.useCallback(I=>{const T=d[I];let E;if(I==="day")E=h(T,d.month,d.year);else if(I==="month"){if(E=_(T),!E&&d.day){const ae=h(d.day,T,d.year);g(z=>({...z,day:ae}))}}else if(I==="year"&&(E=N(T),!E&&d.day&&d.month)){const ae=h(d.day,d.month,T);g(z=>({...z,day:ae}))}if(g(ae=>({...ae,[I]:E})),d.day&&d.month&&d.year){const ae=j(I==="day"?T:d.day,I==="month"?T:d.month,I==="year"?T:d.year);ae&&g(z=>({...z,day:ae}))}},[d,h,_,N,j]),C=B.useMemo(()=>[{name:"day",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"month",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"year",classes:"nhsuk-input--width-4",inputmode:"numeric",pattern:"[0-9]*"}],[]),M=n||C;let S=i?.describedBy||"";const x=s?`${t}-hint`:"",$=l?`${t}-error`:"";x&&(S=S?`${S} ${x}`:x),$&&(S=S?`${S} ${$}`:$);const k=Object.values(m).some(I=>I),v=_e("nhsuk-form-group",{"nhsuk-form-group--error":l||k}),A=_e("nhsuk-date-input",e),D=()=>o.jsxs(o.Fragment,{children:[s&&o.jsx(os,{id:x,className:s.classes,children:s.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:s.html}}):s.text}),l&&o.jsx(us,{id:$,className:l.classes,children:l.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text}),Object.entries(m).map(([I,T])=>T?o.jsxs(us,{id:`${t}-${I}-error`,className:"nhsuk-error-message",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",T]},`${I}-error`):null),o.jsx("div",{className:A,id:t,"data-testid":"date-input",...c,children:M.map(I=>{const T=I.id||`${t}-${I.name}`,E=r?`${r}[${I.name}]`:I.name,ae=I.label||I.name.charAt(0).toUpperCase()+I.name.slice(1),z=m[I.name],H=d[I.name]||"";let U=S;if(z){const O=`${t}-${I.name}-error`;U=U?`${U} ${O}`:O}return o.jsxs("div",{className:"nhsuk-date-input__item",children:[o.jsx(Aa,{htmlFor:T,className:"nhsuk-date-input__label",children:ae}),o.jsx(Ba,{id:T,name:E,value:H,className:_e("nhsuk-date-input__input",I.classes,{"nhsuk-input--error":z}),inputMode:I.inputmode,autoComplete:I.autocomplete,pattern:I.pattern,"aria-describedby":U||void 0,hasError:!!z,onChange:O=>w(I.name,O.target.value),onBlur:()=>P(I.name)})]},I.name)})})]});return o.jsx("div",{className:v,children:i?o.jsx(Ra,{className:i.classes,legend:i.legend?{text:i.legend}:void 0,describedBy:S||void 0,children:D()}):D()})},gc={animation:{AnimationDurationFast:"150ms",AnimationDurationNormal:"300ms",AnimationDurationSlow:"500ms",AnimationEasingEaseIn:"cubic-bezier(0.4, 0, 1, 1)",AnimationEasingEaseOut:"cubic-bezier(0, 0, 0.2, 1)",AnimationEasingEaseInOut:"cubic-bezier(0.4, 0, 0.2, 1)",AnimationEasingBounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},transition:{TransitionButtonDefault:"background-color 300ms cubic-bezier(0, 0, 0.2, 1)",TransitionButtonShadow:"box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionInputFocus:"border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionCardHover:"border-color 300ms cubic-bezier(0, 0, 0.2, 1)"},border:{BorderWidthDefault:"1px",BorderWidthFormElement:"2px",BorderWidthFormElementError:"4px",BorderWidthCardBottom:"4px",BorderWidthPanel:"4px",BorderWidthTableHeader:"2px",BorderWidthTableCell:"1px",BorderRadiusNone:"0px",BorderRadiusSmall:"4px",BorderRadiusMedium:"8px",BorderRadiusLarge:"12px",BorderColorDefault:"#d8dde0",BorderColorForm:"#4c6272",BorderColorCard:"#d8dde0",BorderColorCardHover:"#aeb7bd",BorderColorError:"#d5281b"},color:{ColorPrimaryBlue:"#005eb8",ColorPrimaryWhite:"#ffffff",ColorPrimaryBlack:"#212b32",ColorPrimaryGreen:"#007f3b",ColorPrimaryPurple:"#330072",ColorPrimaryDarkPink:"#7c2855",ColorPrimaryRed:"#d5281b",ColorPrimaryYellow:"#ffeb3b",ColorSecondaryPaleYellow:"#fff9c4",ColorSecondaryWarmYellow:"#ffb81c",ColorSecondaryOrange:"#ed8b00",ColorSecondaryAquaGreen:"#00a499",ColorSecondaryPink:"#ae2573",ColorGrey1:"#4c6272",ColorGrey2:"#768692",ColorGrey3:"#aeb7bd",ColorGrey4:"#d8dde0",ColorGrey5:"#f0f4f5",ColorTextPrimary:"#212b32",ColorTextSecondary:"#4c6272",ColorTextReverse:"#ffffff",ColorTextPrint:"#212b32",ColorLinkDefault:"#005eb8",ColorLinkHover:"#7c2855",ColorLinkActive:"#003087",ColorLinkVisited:"#330072",ColorFocusBackground:"#ffeb3b",ColorFocusText:"#212b32",ColorBorderDefault:"#d8dde0",ColorBorderSecondary:"#ffffff33",ColorError:"#d5281b",ColorFormBorder:"#4c6272",ColorFormBackground:"#ffffff",ColorButtonPrimaryBackground:"#007f3b",ColorButtonPrimaryText:"#ffffff",ColorButtonPrimaryHover:"#006530",ColorButtonPrimaryActive:"#004021",ColorButtonPrimaryShadow:"#004021",ColorButtonSecondaryBackground:"#00000000",ColorButtonSecondaryBackgroundSolid:"#ffffff",ColorButtonSecondaryBorder:"#005eb8",ColorButtonSecondaryText:"#005eb8",ColorButtonSecondaryHover:"#d9e5f2",ColorButtonSecondaryActive:"#c7daf0",ColorButtonSecondaryShadow:"#005eb8",ColorButtonReverseBackground:"#ffffff",ColorButtonReverseText:"#212b32",ColorButtonReverseHover:"#d9dde0",ColorButtonReverseActive:"#b3bcc2",ColorButtonReverseShadow:"#b3bcc2",ColorButtonWarningBackground:"#d5281b",ColorButtonWarningHover:"#aa2016",ColorButtonWarningActive:"#6a140e",ColorButtonWarningShadow:"#6a140e",ColorButtonLoginBackground:"#005eb8",ColorButtonLoginHover:"#004b93",ColorButtonLoginActive:"#002f5c",ColorButtonLoginShadow:"#002f5c"},component:{ComponentButtonPaddingMobileVertical:"8px",ComponentButtonPaddingMobileHorizontal:"16px",ComponentButtonPaddingDesktopVertical:"12px",ComponentButtonPaddingDesktopHorizontal:"16px",ComponentButtonShadowSize:"4px",ComponentFormInputMinHeight:"40px",ComponentFormInputPadding:"4px",ComponentFormCheckboxSize:"40px",ComponentFormCheckboxLabelPadding:"12px",ComponentCardPaddingMobile:"16px",ComponentCardPaddingDesktop:"32px",ComponentCardHeadingMargin:"16px",ComponentPanelPaddingMobile:"20px",ComponentPanelPaddingDesktop:"28px",ComponentBreadcrumbChevronMarginLeft:"9px",ComponentBreadcrumbChevronMarginRight:"2px",ComponentBreadcrumbPaddingTopMobile:"16px",ComponentBreadcrumbPaddingTopDesktop:"24px",ComponentSummaryListCellPaddingVertical:"8px",ComponentSummaryListCellPaddingHorizontal:"24px",ComponentSummaryListRowMargin:"16px",ComponentSpread:"4px",ComponentBlur:"4px",ComponentLink:"4px",ComponentDetails:"8px",ComponentExpander:"4px",ComponentPagination:"16px"},button:{ButtonPrimaryBackgroundDefault:"#007f3b",ButtonPrimaryBackgroundHover:"#006530",ButtonPrimaryBackgroundActive:"#004021",ButtonPrimaryBackgroundDisabled:"#d8dde0",ButtonPrimaryTextDefault:"#ffffff",ButtonPrimaryTextDisabled:"#768692",ButtonPrimaryBorderDefault:"#00000000",ButtonPrimaryBorderFocus:"#ffeb3b",ButtonSecondaryBackgroundDefault:"#00000000",ButtonSecondaryBackgroundSolid:"#ffffff",ButtonSecondaryBackgroundHover:"#d9e5f2",ButtonSecondaryBackgroundActive:"#c7daf0",ButtonSecondaryTextDefault:"#005eb8",ButtonSecondaryBorderDefault:"#005eb8",ButtonSpacingPaddingVerticalMobile:"8px",ButtonSpacingPaddingHorizontalMobile:"16px",ButtonSpacingPaddingVerticalDesktop:"12px",ButtonSpacingPaddingHorizontalDesktop:"16px",ButtonBorderWidth:"2px",ButtonBorderRadius:"4px",ButtonShadowSize:"4px",ButtonTypographyWeight:"600"},card:{CardBackgroundDefault:"#ffffff",CardBorderDefault:"#d8dde0",CardBorderHover:"#aeb7bd",CardBorderBottom:"#f0f4f5",CardTextHeading:"#212b32",CardTextDescription:"#212b32",CardTextLink:"#005eb8",CardSpacingPaddingMobile:"16px",CardSpacingPaddingDesktop:"32px",CardSpacingHeadingMargin:"16px",CardBorderWidthDefault:"1px",CardBorderWidthBottom:"4px",CardShadowDefault:"none",CardShadowHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},form:{FormInputBackgroundDefault:"#ffffff",FormInputBackgroundFocus:"#ffffff",FormInputBackgroundDisabled:"#d8dde0",FormInputBackgroundError:"#ffffff",FormInputBorderDefault:"#4c6272",FormInputBorderFocus:"#ffeb3b",FormInputBorderError:"#d5281b",FormInputBorderDisabled:"#aeb7bd",FormInputTextDefault:"#212b32",FormInputTextPlaceholder:"#4c6272",FormInputTextDisabled:"#768692",FormLabelTextDefault:"#212b32",FormLabelTextRequired:"#ffffff",FormLabelTypographyWeight:"600",FormErrorTextDefault:"#d5281b",FormErrorTypographyWeight:"600",FormHintTextDefault:"#4c6272",FormSpacingInputPadding:"4px",FormSpacingInputMinHeight:"40px",FormSpacingCheckboxSize:"40px",FormSpacingCheckboxLabelPadding:"12px",FormBorderWidthDefault:"2px",FormBorderWidthError:"4px",FormBorderRadius:"0px"},size:{SizeIconSmall:"16px",SizeIconMedium:"18px",SizeIconLarge:"24px",SizeIconExtraLarge:"32px",SizeIconNhsDefault:"34px",SizeFormControlSmall:"32px",SizeFormControlMedium:"40px",SizeFormControlLarge:"48px",SizeFormInputWidthXs:"5.4ex",SizeFormInputWidthSm:"7.2ex",SizeFormInputWidthMd:"9ex",SizeFormInputWidthLg:"10.8ex",SizeFormInputWidthXl:"20ex",SizeFormInputWidth2xl:"38ex",SizeFormInputWidth3xl:"56ex",SizeButtonMinHeightMobile:"44px",SizeButtonMinHeightDesktop:"40px"},layout:{LayoutContainerMaxWidth:"1020px",LayoutColumnFull:"100%",LayoutColumnHalf:"50%",LayoutColumnThird:"33.333%",LayoutColumnQuarter:"25%",LayoutColumnActions:"20%"},breakpoint:{BreakpointMobile:"320px",BreakpointTablet:"641px",BreakpointDesktop:"1025px",BreakpointLargeDesktop:"1280px"},grid:{GridPageWidth:"960px",GridGutter:"32px",GridGutterHalf:"16px"},state:{StateErrorBackground:"#d5281b",StateErrorBorder:"#d5281b",StateErrorText:"#ffffff",StateSuccessBackground:"#007f3b",StateSuccessBorder:"#007f3b",StateSuccessText:"#ffffff",StateWarningBackground:"#ffeb3b",StateWarningBorder:"#ffeb3b",StateWarningText:"#212b32",StateInfoBackground:"#005eb8",StateInfoBorder:"#005eb8",StateInfoText:"#ffffff",StateDisabledBackground:"#d8dde0",StateDisabledBorder:"#aeb7bd",StateDisabledText:"#768692"},shadow:{ShadowButtonDefault:"0 4px 0 #004021",ShadowButtonSecondary:"0 4px 0 #005eb8",ShadowButtonWarning:"0 4px 0 #6a140e",ShadowButtonFocus:"0 4px 0 #ffeb3b",ShadowCardDefault:"none",ShadowCardHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},"focus-outline":{FocusOutlineWidth:"4px",FocusOutlineOffset:"0px",FocusOutlineStyle:"solid"},"focus-shadow":{FocusShadowInput:"0 0 0 3px #ffeb3b",FocusShadowButton:"0 0 0 3px #ffeb3b"},elevation:{ElevationNone:"none",ElevationLow:"0 1px 3px rgba(0, 0, 0, 0.12)",ElevationMedium:"0 2px 6px rgba(0, 0, 0, 0.16)",ElevationHigh:"0 4px 12px rgba(0, 0, 0, 0.20)"},spacing:{Spacing0:"0",Spacing1:"4px",Spacing2:"8px",Spacing3:"16px",Spacing4:"24px",Spacing5:"32px",Spacing6:"40px",Spacing7:"48px",Spacing8:"56px",Spacing9:"64px"},"spacing-responsive":{SpacingResponsive0Mobile:"0",SpacingResponsive0Tablet:"0",SpacingResponsive1Mobile:"4px",SpacingResponsive1Tablet:"4px",SpacingResponsive2Mobile:"8px",SpacingResponsive2Tablet:"8px",SpacingResponsive3Mobile:"8px",SpacingResponsive3Tablet:"16px",SpacingResponsive4Mobile:"16px",SpacingResponsive4Tablet:"24px",SpacingResponsive5Mobile:"24px",SpacingResponsive5Tablet:"32px",SpacingResponsive6Mobile:"32px",SpacingResponsive6Tablet:"40px",SpacingResponsive7Mobile:"40px",SpacingResponsive7Tablet:"48px",SpacingResponsive8Mobile:"48px",SpacingResponsive8Tablet:"56px",SpacingResponsive9Mobile:"56px",SpacingResponsive9Tablet:"64px"},font:{FontFamilyBase:"Frutiger W01",FontFamilyFallback:"Arial, Helvetica, sans-serif",FontFamilyPrint:"sans-serif",FontWeightNormal:"400",FontWeightBold:"600",FontWeightLight:"400",FontSize14Mobile:"12px",FontSize14Tablet:"14px",FontSize14Print:"12pt",FontSize16Mobile:"14px",FontSize16Tablet:"16px",FontSize16Print:"12pt",FontSize19Mobile:"16px",FontSize19Tablet:"19px",FontSize19Print:"13pt",FontSize22Mobile:"19px",FontSize22Tablet:"22px",FontSize22Print:"15pt",FontSize26Mobile:"22px",FontSize26Tablet:"26px",FontSize26Print:"17pt",FontSize36Mobile:"27px",FontSize36Tablet:"36px",FontSize36Print:"20pt",FontSize48Mobile:"33px",FontSize48Tablet:"48px",FontSize48Print:"24pt",FontSizeBase:"16px",FontLineHeightBase:"24px"},headings:{xl:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},l:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},m:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},s:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xs:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}}},paragraphs:{body:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bodyLarge:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},bodySmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ledeText:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},ledeTextSmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}}}},_c=B.createContext(gc),d0=({children:t,theme:e={}})=>{const n={...gc,...e};return o.jsx(_c.Provider,{value:n,children:t})},f0=()=>{const t=B.useContext(_c);if(!t)throw new Error("useNHSTheme must be used within an NHSThemeProvider");return t};function h0(){return`
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 400;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff") format("woff");
	}
	
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 600;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff") format("woff");
	}
  `}function p0(){if(typeof document>"u"||document.getElementById("nhs-fonts"))return;const t=document.createElement("style");t.id="nhs-fonts",t.textContent=h0(),document.head.appendChild(t)}const m0=({children:t,theme:e})=>(B.useEffect(()=>{p0()},[]),o.jsx(d0,{theme:e,children:t})),bc=({mode:t="form",action:e="/search",method:n="get",name:r="q",value:a,placeholder:i="Search",visuallyHiddenLabel:s="Search the NHS website",visuallyHiddenButton:l="Search",className:u,disabled:c=!1,callbacks:d={},isLoading:f=!1,showResults:m=!1,results:g=[],formAttributes:y={},inputAttributes:p={},buttonAttributes:h={},preventDefaultSubmit:_=!1,debounceMs:N=300,minQueryLength:j=1})=>{const[w,P]=B.useState(""),[C,M]=B.useState(!1),S=B.useRef(void 0),x=B.useRef(null),$=B.useRef(null),k=t==="controlled"&&a!==void 0,v=k?a:w,A=B.useCallback(re=>{S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{d.onChange&&re.length>=j&&d.onChange(re)},N)},[d.onChange,N,j]),D=B.useCallback(re=>{const G=re.target.value;k||P(G),t!=="form"&&A(G)},[k,t,A]),I=B.useCallback(re=>{const G=v.trim(),ce={query:G,timestamp:Date.now(),formData:new FormData(re.currentTarget)};t==="controlled"||t==="hybrid"&&_?(re.preventDefault(),d.onSearch&&G.length>=j&&d.onSearch(ce)):t==="hybrid"&&d.onSearch&&G.length>=j&&d.onSearch(ce)},[t,v,d.onSearch,_,j]),T=B.useCallback(()=>{M(!0),d.onFocus?.()},[d.onFocus]),E=B.useCallback(()=>{M(!1),d.onBlur?.()},[d.onBlur]),ae=B.useCallback(()=>{k||P(""),d.onClear?.(),$.current?.focus()},[k,d.onClear]);B.useEffect(()=>()=>{S.current&&clearTimeout(S.current)},[]);const z=()=>o.jsx("svg",{className:_e("nhsuk-icon nhsuk-icon__search",{"nhsuk-icon__search--loading":f}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"})}),H=()=>o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsxs("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[o.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416",repeatCount:"indefinite"})]})}),U=()=>!v||t==="form"?null:o.jsx("button",{type:"button",className:"nhsuk-header__search-clear",onClick:ae,"aria-label":"Clear search",children:o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__close",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z"})})}),O=()=>!m||!g.length||!C?null:o.jsx("div",{className:"nhsuk-header__search-results",role:"listbox",children:g.map(re=>o.jsx("div",{className:"nhsuk-header__search-result",role:"option",children:re.href?o.jsxs("a",{href:re.href,className:"nhsuk-header__search-result-link",children:[o.jsx("span",{className:"nhsuk-header__search-result-title",children:re.title}),re.description&&o.jsx("span",{className:"nhsuk-header__search-result-description",children:re.description})]}):o.jsxs("button",{type:"button",className:"nhsuk-header__search-result-button",onClick:()=>d.onSearch?.({query:re.title,timestamp:Date.now()}),children:[o.jsx("span",{className:"nhsuk-header__search-result-title",children:re.title}),re.description&&o.jsx("span",{className:"nhsuk-header__search-result-description",children:re.description})]})},re.id))});return o.jsxs("div",{className:_e("nhsuk-header__search",u,{"nhsuk-header__search--controlled":t==="controlled","nhsuk-header__search--hybrid":t==="hybrid","nhsuk-header__search--loading":f,"nhsuk-header__search--focused":C,"nhsuk-header__search--has-results":m&&g.length>0}),children:[o.jsxs("form",{ref:x,className:"nhsuk-header__search-form",id:"search",action:t!=="controlled"?e:void 0,method:t!=="controlled"?n:void 0,role:"search",onSubmit:I,...y,children:[o.jsx("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field",children:s}),o.jsxs("div",{className:"nhsuk-header__search-input-wrapper",children:[o.jsx("input",{ref:$,className:"nhsuk-header__search-input nhsuk-input",id:"search-field",name:t!=="controlled"?r:void 0,type:"search",placeholder:i,autoComplete:"off",value:v,onChange:D,onFocus:T,onBlur:E,disabled:c||f,...m&&g.length>0?{"aria-expanded":!0,"aria-haspopup":"listbox"}:{},...p}),U()]}),o.jsxs("button",{className:"nhsuk-header__search-submit",type:"submit",disabled:c||f||t!=="form"&&v.length<j,...h,children:[f?H():z(),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:f?"Searching...":l})]})]}),O()]})};function yc(t,{variant:e,isClient:n,menuOpen:r=!1,showMoreButton:a=!1,visibleItems:i,dropdownVisible:s,toggleMenu:l,navContainerRef:u,navListRef:c}){const{className:d,logo:f={},service:m={},organisation:g,search:y,account:p,navigation:h,containerClasses:_,variant:N="default",attributes:j={},maxVisibleItems:w,responsiveNavigation:P=!0,...C}=t;"maxVisibleItems"in C&&delete C.maxVisibleItems;const M=m.href&&!f.href||m.href&&m.href===f.href,S=M?m.href:f.href,x=_e("nhsuk-header",{"nhsuk-header--organisation":N==="organisation"||g,"nhsuk-header--white":N==="white"},d),$=_e("nhsuk-header__container",_),k=_e("nhsuk-header__navigation",{"nhsuk-header__navigation--white":h?.white,"nhsuk-header__navigation--justified":h?.justified},h?.className),v=()=>o.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":f.ariaLabel||"NHS",children:[o.jsx("title",{children:f.ariaLabel||"NHS"}),o.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),A=()=>f.src?o.jsx("img",{className:"nhsuk-header__organisation-logo",src:f.src,width:"280",alt:f.ariaLabel||"NHS"}):v(),D=()=>g?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"nhsuk-header__organisation-name",children:[g.name,g.split&&o.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",g.split]})]}),g.descriptor&&o.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:g.descriptor})]}):null,I=(U,O)=>U?O?o.jsx("a",{className:"nhsuk-header__service-name",href:O,children:U}):o.jsx("span",{className:"nhsuk-header__service-name",children:U}):null,T=U=>U.active||U.current?o.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:U.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:U.html}}):U.text}):U.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:U.html}}):U.text,E=()=>o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})}),ae=e==="server"&&h?.items&&!P,z=ae?[]:h?.items,H=ae?h.items:[];return o.jsxs("header",{className:x,role:"banner","data-module":"nhsuk-header",...j,...C,children:[o.jsxs("div",{className:$,children:[o.jsxs("div",{className:"nhsuk-header__service",children:[S?o.jsxs("a",{className:"nhsuk-header__service-logo",href:S,children:[A(),D(),M&&I(m.text)]}):o.jsxs(o.Fragment,{children:[A(),D(),M&&I(m.text)]}),m.text&&!M&&I(m.text,m.href)]}),y&&o.jsx(bc,{...y}),o.jsx(cc,{...p,variant:N==="white"?"white":"default"})]}),h&&h.items&&h.items.length>0&&o.jsx("nav",{className:k,"aria-label":h.ariaLabel||"Menu",children:o.jsx("div",{className:_e("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--initializing":n&&e==="client","nhsuk-header__navigation-container--ssr":!n},_),ref:e==="client"?u:void 0,children:o.jsxs("ul",{className:"nhsuk-header__navigation-list",ref:e==="client"?c:void 0,children:[(e==="server"?z||[]:h?.items||[]).map((U,O)=>o.jsx("li",{className:_e("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":U.active||U.current,"nhsuk-header__navigation-item--hidden":e==="client"&&a&&i!==void 0&&O>=(i??0)},U.className),...U.attributes||{},children:o.jsx("a",{className:"nhsuk-header__navigation-link",href:U.href,...U.active||U.current?{"aria-current":U.current?"page":"true"}:{},children:T(U)})},O)),e==="client"&&a&&i!==void 0&&o.jsx("li",{className:"nhsuk-header__navigation-item nhsuk-header__navigation-item--more",children:o.jsxs("button",{className:"nhsuk-header__navigation-button",id:"toggle-more-menu",type:"button","aria-haspopup":"true","aria-expanded":r?"true":"false","aria-controls":"nhsuk-header-more-menu",onClick:l,children:[o.jsx("span",{children:"More"}),E()]})})]})})}),e==="client"&&n&&h&&h.items&&h.items.length>0&&r&&s&&o.jsx("div",{className:"nhsuk-header__dropdown-menu",hidden:!s,id:"nhsuk-header-more-menu",children:o.jsx("ul",{className:"nhsuk-header__dropdown-list",children:h.items.slice(i??0).map((U,O)=>o.jsx("li",{className:_e("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":U.active||U.current}),children:o.jsx("a",{className:"nhsuk-header__dropdown-link",href:U.href,...U.active||U.current?{"aria-current":U.current?"page":"true"}:{},onClick:()=>{l?.()},children:T(U)})},`overflow-${(i??0)+O}`))})}),e==="server"&&ae&&H.length>0&&o.jsx("div",{className:"nhsuk-header__dropdown-menu","data-ssr-overflow":"true",children:o.jsx("ul",{className:"nhsuk-header__dropdown-list",children:H.map((U,O)=>o.jsx("li",{className:_e("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":U.active||U.current}),children:o.jsx("a",{className:"nhsuk-header__dropdown-link",href:U.href,...U.active||U.current?{"aria-current":U.current?"page":"true"}:{},children:T(U)})},`overflow-server-${O}`))})})]})}const Oa=({className:t,logo:e={},service:n={},organisation:r,search:a,account:i,navigation:s,containerClasses:l,variant:u="default",attributes:c={},...d})=>{const[f,m]=B.useState(!1),[g,y]=B.useState(!1),[p,h]=B.useState(s?.items?.length||0),[_,N]=B.useState(!1),[j,w]=B.useState(!1),P=B.useRef(null),C=B.useRef(null),M=B.useRef(!1);B.useEffect(()=>{typeof window>"u"||w(!0)},[]),B.useEffect(()=>{if(typeof document>"u")return;const k=v=>{v.key==="Escape"&&f&&m(!1)};if(f)return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[f]);const S=B.useRef(null),x=B.useCallback(()=>{if(!j||!s?.items||s.items.length===0||M.current)return;const k=P.current,v=C.current;if(!k||!v)return;M.current=!0,k.classList.add("nhsuk-header__navigation-container--measuring");const A=k.clientWidth,D=Array.from(v.children);if(!D.length){k.classList.remove("nhsuk-header__navigation-container--measuring"),M.current=!1;return}if(S.current==null){const G=document.createElement("button");G.type="button",G.className="nhsuk-header__navigation-button nhsuk-header__navigation-button--prototype",G.style.position="absolute",G.style.visibility="hidden",G.style.pointerEvents="none",G.innerHTML="<span>More</span>",k.appendChild(G),S.current=G.getBoundingClientRect().width||104,k.removeChild(G)}const I=S.current+16;let T=0,E=0;const ae=window.getComputedStyle(k),z=parseFloat(ae.paddingLeft)||0,H=parseFloat(ae.paddingRight)||0;let U=z+H;for(const G of D){const ce=G.getBoundingClientRect().width;if(T+ce+I+U>A)break;T+=ce,E+=1}const O=E<s.items.length,re=O?E:s.items.length;y(G=>G===O?G:O),h(G=>G===re?G:re),k.classList.remove("nhsuk-header__navigation-container--measuring"),M.current=!1},[j,s?.items]);B.useEffect(()=>{if(!j)return;const k=P.current;if(!k)return;let v=null;const A=()=>{v==null&&(v=window.requestAnimationFrame(()=>{v=null,x()}))};x();const D=new ResizeObserver(()=>A());return D.observe(k),C.current&&D.observe(C.current),()=>{v!=null&&window.cancelAnimationFrame(v),D.disconnect()}},[j,x]),B.useEffect(()=>{j&&x()},[s?.items?.length,j,x]);const $=k=>{k&&(k.preventDefault(),k.stopPropagation());const v=!f;m(v),N(v)};return yc({className:t,logo:e,service:n,organisation:r,search:a,account:i,navigation:s,containerClasses:l,variant:u,attributes:c,...d},{variant:"client",isClient:j,menuOpen:f,showMoreButton:g,visibleItems:p,dropdownVisible:_,toggleMenu:$,navContainerRef:P,navListRef:C})},g0=t=>yc(t,{variant:"server",isClient:!1}),xc=({heading:t,headingLevel:e=1,headingClasses:n="",text:r,html:a,imageURL:i,containerClasses:s="",classes:l="",children:u,...c})=>{const d=["nhsuk-hero",i&&t?"nhsuk-hero--image nhsuk-hero--image-description":"",i&&!t?"nhsuk-hero--image":"",l].filter(Boolean).join(" "),f=["nhsuk-width-container",s,i?"":"nhsuk-hero--border"].filter(Boolean).join(" "),m=["nhsuk-hero__heading",n,!u&&!r&&!a?"nhsuk-u-margin-bottom-0":""].filter(Boolean).join(" "),g=u||t||r||a,y=()=>{if(!t)return null;const p={className:m};switch(e){case 1:return o.jsx("h1",{...p,children:t});case 2:return o.jsx("h2",{...p,children:t});case 3:return o.jsx("h3",{...p,children:t});case 4:return o.jsx("h4",{...p,children:t});case 5:return o.jsx("h5",{...p,children:t});case 6:return o.jsx("h6",{...p,children:t});default:return o.jsx("h1",{...p,children:t})}};return o.jsxs("section",{className:d,style:i?{backgroundImage:`url('${i}')`}:void 0,role:"banner",...c,children:[i&&o.jsx("div",{className:"nhsuk-hero__overlay",children:g&&o.jsx("div",{className:f,children:o.jsx("div",{className:"nhsuk-grid-row",children:o.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:o.jsxs("div",{className:"nhsuk-hero-content",children:[y(),u||(a?o.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):r?o.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null),o.jsx("span",{className:"nhsuk-hero__arrow","aria-hidden":"true"})]})})})})}),!i&&g&&o.jsx("div",{className:f,children:o.jsx("div",{className:"nhsuk-grid-row",children:o.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:o.jsxs("div",{className:"nhsuk-hero__wrapper",children:[y(),u||(a?o.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):r?o.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null)]})})})})]})};xc.displayName="Hero";const ds=({className:t,links:e=[],linksColumn2:n,linksColumn3:r,metaLinks:a,copyright:i="Â© NHS England",containerClasses:s,attributes:l={},style:u,footerStyle:c,containerStyle:d})=>{const f=(g,y=!1)=>o.jsx("li",{className:_e("nhsuk-footer__list-item",{"nhsuk-footer-default__list-item":y}),children:o.jsx("a",{className:"nhsuk-footer__list-item-link",href:g.URL,target:g.newWindow?"_blank":void 0,rel:g.newWindow?"noopener noreferrer":void 0,children:g.label})},`${g.URL}-${g.label}`),m=!!(n||r);return o.jsx("footer",{role:"contentinfo",...l,style:{...l?.style,...u},children:o.jsxs("div",{className:"nhsuk-footer-container",children:[o.jsxs("div",{className:_e("nhsuk-width-container",s),style:d,children:[o.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Support links"}),o.jsx("div",{className:_e("nhsuk-footer",t),style:c,children:m?o.jsxs(o.Fragment,{children:[e.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:e.map(g=>f(g))}),n&&n.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:n.map(g=>f(g))}),r&&r.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:r.map(g=>f(g))}),a&&a.length>0&&o.jsx("ul",{className:"nhsuk-footer__list nhsuk-footer__meta",children:a.map(g=>f(g))})]}):o.jsxs("ul",{className:"nhsuk-footer__list",children:[e.map(g=>f(g,!0)),(n||[]).map(g=>f(g,!0)),(r||[]).map(g=>f(g,!0)),(a||[]).map(g=>f(g,!0))]})}),!m&&o.jsx("div",{children:o.jsx("p",{className:"nhsuk-footer__copyright",children:i})})]}),m&&o.jsx("div",{className:"nhsuk-width-container",children:o.jsx("div",{children:o.jsx("p",{className:"nhsuk-footer__copyright",children:i})})})]})})};function za(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _0(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fs(t){let e,n,r;t.length!==2?(e=za,n=(l,u)=>za(t(l),u),r=(l,u)=>t(l)-u):(e=t===za||t===_0?t:b0,n=t,r=t);function a(l,u,c=0,d=l.length){if(c<d){if(e(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<0?c=f+1:d=f}while(c<d)}return c}function i(l,u,c=0,d=l.length){if(c<d){if(e(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<=0?c=f+1:d=f}while(c<d)}return c}function s(l,u,c=0,d=l.length){const f=a(l,u,c,d-1);return f>c&&r(l[f-1],u)>-r(l[f],u)?f-1:f}return{left:a,center:s,right:i}}function b0(){return 0}function y0(t){return t===null?NaN:+t}const x0=fs(za).right;fs(y0).center;function vc(t,e){let n,r;if(e===void 0)for(const a of t)a!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)));else{let a=-1;for(let i of t)(i=e(i,++a,t))!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)))}return[n,r]}class wc extends Map{constructor(e,n=S0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,a]of e)this.set(r,a)}get(e){return super.get(Sc(this,e))}has(e){return super.has(Sc(this,e))}set(e,n){return super.set(v0(this,e),n)}delete(e){return super.delete(w0(this,e))}}function Sc({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function v0({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function w0({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function S0(t){return t!==null&&typeof t=="object"?t.valueOf():t}const k0=Math.sqrt(50),C0=Math.sqrt(10),T0=Math.sqrt(2);function Wa(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),s=i>=k0?10:i>=C0?5:i>=T0?2:1;let l,u,c;return a<0?(c=Math.pow(10,-a)/s,l=Math.round(t*c),u=Math.round(e*c),l/c<t&&++l,u/c>e&&--u,c=-c):(c=Math.pow(10,a)*s,l=Math.round(t/c),u=Math.round(e/c),l*c<t&&++l,u*c>e&&--u),u<l&&.5<=n&&n<2?Wa(t,e,n*2):[l,u,c]}function j0(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,i,s]=r?Wa(e,t,n):Wa(t,e,n);if(!(i>=a))return[];const l=i-a+1,u=new Array(l);if(r)if(s<0)for(let c=0;c<l;++c)u[c]=(i-c)/-s;else for(let c=0;c<l;++c)u[c]=(i-c)*s;else if(s<0)for(let c=0;c<l;++c)u[c]=(a+c)/-s;else for(let c=0;c<l;++c)u[c]=(a+c)*s;return u}function hs(t,e,n){return e=+e,t=+t,n=+n,Wa(t,e,n)[2]}function ps(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?hs(e,t,n):hs(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function N0(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(a);++r<a;)i[r]=t+r*n;return i}function Ua(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const kc=Symbol("implicit");function Cc(){var t=new wc,e=[],n=[],r=kc;function a(i){let s=t.get(i);if(s===void 0){if(r!==kc)return r;t.set(i,s=e.push(i)-1)}return n[s%n.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new wc;for(const s of i)t.has(s)||t.set(s,e.push(s)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Cc(e,n).unknown(r)},Ua.apply(a,arguments),a}function Tc(){var t=Cc().unknown(void 0),e=t.domain,n=t.range,r=0,a=1,i,s,l=!1,u=0,c=0,d=.5;delete t.unknown;function f(){var m=e().length,g=a<r,y=g?a:r,p=g?r:a;i=(p-y)/Math.max(1,m-u+c*2),l&&(i=Math.floor(i)),y+=(p-y-i*(m-u))*d,s=i*(1-u),l&&(y=Math.round(y),s=Math.round(s));var h=N0(m).map(function(_){return y+i*_});return n(g?h.reverse():h)}return t.domain=function(m){return arguments.length?(e(m),f()):e()},t.range=function(m){return arguments.length?([r,a]=m,r=+r,a=+a,f()):[r,a]},t.rangeRound=function(m){return[r,a]=m,r=+r,a=+a,l=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(m){return arguments.length?(l=!!m,f()):l},t.padding=function(m){return arguments.length?(u=Math.min(1,c=+m),f()):u},t.paddingInner=function(m){return arguments.length?(u=Math.min(1,m),f()):u},t.paddingOuter=function(m){return arguments.length?(c=+m,f()):c},t.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},t.copy=function(){return Tc(e(),[r,a]).round(l).paddingInner(u).paddingOuter(c).align(d)},Ua.apply(f(),arguments)}function ms(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function jc(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Mr(){}var $r=.7,Ga=1/$r,er="\\s*([+-]?\\d+)\\s*",Ir="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D0=/^#([0-9a-f]{3,8})$/,M0=new RegExp(`^rgb\\(${er},${er},${er}\\)$`),$0=new RegExp(`^rgb\\(${At},${At},${At}\\)$`),I0=new RegExp(`^rgba\\(${er},${er},${er},${Ir}\\)$`),P0=new RegExp(`^rgba\\(${At},${At},${At},${Ir}\\)$`),F0=new RegExp(`^hsl\\(${Ir},${At},${At}\\)$`),L0=new RegExp(`^hsla\\(${Ir},${At},${At},${Ir}\\)$`),Nc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ms(Mr,Pr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Dc,formatHex:Dc,formatHex8:E0,formatHsl:B0,formatRgb:Mc,toString:Mc});function Dc(){return this.rgb().formatHex()}function E0(){return this.rgb().formatHex8()}function B0(){return Lc(this).formatHsl()}function Mc(){return this.rgb().formatRgb()}function Pr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=D0.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?$c(e):n===3?new gt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Va(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Va(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=M0.exec(t))?new gt(e[1],e[2],e[3],1):(e=$0.exec(t))?new gt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=I0.exec(t))?Va(e[1],e[2],e[3],e[4]):(e=P0.exec(t))?Va(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=F0.exec(t))?Fc(e[1],e[2]/100,e[3]/100,1):(e=L0.exec(t))?Fc(e[1],e[2]/100,e[3]/100,e[4]):Nc.hasOwnProperty(t)?$c(Nc[t]):t==="transparent"?new gt(NaN,NaN,NaN,0):null}function $c(t){return new gt(t>>16&255,t>>8&255,t&255,1)}function Va(t,e,n,r){return r<=0&&(t=e=n=NaN),new gt(t,e,n,r)}function A0(t){return t instanceof Mr||(t=Pr(t)),t?(t=t.rgb(),new gt(t.r,t.g,t.b,t.opacity)):new gt}function gs(t,e,n,r){return arguments.length===1?A0(t):new gt(t,e,n,r??1)}function gt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ms(gt,gs,jc(Mr,{brighter(t){return t=t==null?Ga:Math.pow(Ga,t),new gt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?$r:Math.pow($r,t),new gt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new gt(Pn(this.r),Pn(this.g),Pn(this.b),Ya(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ic,formatHex:Ic,formatHex8:R0,formatRgb:Pc,toString:Pc}));function Ic(){return`#${Fn(this.r)}${Fn(this.g)}${Fn(this.b)}`}function R0(){return`#${Fn(this.r)}${Fn(this.g)}${Fn(this.b)}${Fn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pc(){const t=Ya(this.opacity);return`${t===1?"rgb(":"rgba("}${Pn(this.r)}, ${Pn(this.g)}, ${Pn(this.b)}${t===1?")":`, ${t})`}`}function Ya(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Pn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Fn(t){return t=Pn(t),(t<16?"0":"")+t.toString(16)}function Fc(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Lt(t,e,n,r)}function Lc(t){if(t instanceof Lt)return new Lt(t.h,t.s,t.l,t.opacity);if(t instanceof Mr||(t=Pr(t)),!t)return new Lt;if(t instanceof Lt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),s=NaN,l=i-a,u=(i+a)/2;return l?(e===i?s=(n-r)/l+(n<r)*6:n===i?s=(r-e)/l+2:s=(e-n)/l+4,l/=u<.5?i+a:2-i-a,s*=60):l=u>0&&u<1?0:s,new Lt(s,l,u,t.opacity)}function H0(t,e,n,r){return arguments.length===1?Lc(t):new Lt(t,e,n,r??1)}function Lt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ms(Lt,H0,jc(Mr,{brighter(t){return t=t==null?Ga:Math.pow(Ga,t),new Lt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$r:Math.pow($r,t),new Lt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new gt(_s(t>=240?t-240:t+120,a,r),_s(t,a,r),_s(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new Lt(Ec(this.h),qa(this.s),qa(this.l),Ya(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ya(this.opacity);return`${t===1?"hsl(":"hsla("}${Ec(this.h)}, ${qa(this.s)*100}%, ${qa(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ec(t){return t=(t||0)%360,t<0?t+360:t}function qa(t){return Math.max(0,Math.min(1,t||0))}function _s(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const bs=t=>()=>t;function O0(t,e){return function(n){return t+n*e}}function z0(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function W0(t){return(t=+t)==1?Bc:function(e,n){return n-e?z0(e,n,t):bs(isNaN(e)?n:e)}}function Bc(t,e){var n=e-t;return n?O0(t,n):bs(isNaN(t)?e:t)}const Ac=(function t(e){var n=W0(e);function r(a,i){var s=n((a=gs(a)).r,(i=gs(i)).r),l=n(a.g,i.g),u=n(a.b,i.b),c=Bc(a.opacity,i.opacity);return function(d){return a.r=s(d),a.g=l(d),a.b=u(d),a.opacity=c(d),a+""}}return r.gamma=t,r})(1);function U0(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=t[a]*(1-i)+e[a]*i;return r}}function G0(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function V0(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),i=new Array(n),s;for(s=0;s<r;++s)a[s]=vs(t[s],e[s]);for(;s<n;++s)i[s]=e[s];return function(l){for(s=0;s<r;++s)i[s]=a[s](l);return i}}function Y0(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Xa(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function q0(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=vs(t[a],e[a]):r[a]=e[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var ys=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xs=new RegExp(ys.source,"g");function X0(t){return function(){return t}}function K0(t){return function(e){return t(e)+""}}function Z0(t,e){var n=ys.lastIndex=xs.lastIndex=0,r,a,i,s=-1,l=[],u=[];for(t=t+"",e=e+"";(r=ys.exec(t))&&(a=xs.exec(e));)(i=a.index)>n&&(i=e.slice(n,i),l[s]?l[s]+=i:l[++s]=i),(r=r[0])===(a=a[0])?l[s]?l[s]+=a:l[++s]=a:(l[++s]=null,u.push({i:s,x:Xa(r,a)})),n=xs.lastIndex;return n<e.length&&(i=e.slice(n),l[s]?l[s]+=i:l[++s]=i),l.length<2?u[0]?K0(u[0].x):X0(e):(e=u.length,function(c){for(var d=0,f;d<e;++d)l[(f=u[d]).i]=f.x(c);return l.join("")})}function vs(t,e){var n=typeof e,r;return e==null||n==="boolean"?bs(e):(n==="number"?Xa:n==="string"?(r=Pr(e))?(e=r,Ac):Z0:e instanceof Pr?Ac:e instanceof Date?Y0:G0(e)?U0:Array.isArray(e)?V0:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?q0:Xa)(t,e)}function J0(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Q0(t){return function(){return t}}function e_(t){return+t}var Rc=[0,1];function tr(t){return t}function ws(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Q0(isNaN(e)?NaN:.5)}function t_(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function n_(t,e,n){var r=t[0],a=t[1],i=e[0],s=e[1];return a<r?(r=ws(a,r),i=n(s,i)):(r=ws(r,a),i=n(i,s)),function(l){return i(r(l))}}function r_(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),i=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)a[s]=ws(t[s],t[s+1]),i[s]=n(e[s],e[s+1]);return function(l){var u=x0(t,l,1,r)-1;return i[u](a[u](l))}}function Hc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function a_(){var t=Rc,e=Rc,n=vs,r,a,i,s=tr,l,u,c;function d(){var m=Math.min(t.length,e.length);return s!==tr&&(s=t_(t[0],t[m-1])),l=m>2?r_:n_,u=c=null,f}function f(m){return m==null||isNaN(m=+m)?i:(u||(u=l(t.map(r),e,n)))(r(s(m)))}return f.invert=function(m){return s(a((c||(c=l(e,t.map(r),Xa)))(m)))},f.domain=function(m){return arguments.length?(t=Array.from(m,e_),d()):t.slice()},f.range=function(m){return arguments.length?(e=Array.from(m),d()):e.slice()},f.rangeRound=function(m){return e=Array.from(m),n=J0,d()},f.clamp=function(m){return arguments.length?(s=m?!0:tr,d()):s!==tr},f.interpolate=function(m){return arguments.length?(n=m,d()):n},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,g){return r=m,a=g,d()}}function Oc(){return a_()(tr,tr)}function i_(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ka(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function nr(t){return t=Ka(Math.abs(t)),t?t[1]:NaN}function s_(t,e){return function(n,r){for(var a=n.length,i=[],s=0,l=t[0],u=0;a>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),i.push(n.substring(a-=l,a+l)),!((u+=l+1)>r));)l=t[s=(s+1)%t.length];return i.reverse().join(e)}}function o_(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var l_=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Za(t){if(!(e=l_.exec(t)))throw new Error("invalid format: "+t);var e;return new Ss({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Za.prototype=Ss.prototype;function Ss(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ss.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function c_(t){e:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var zc;function u_(t,e){var n=Ka(t,e);if(!n)return t+"";var r=n[0],a=n[1],i=a-(zc=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=r.length;return i===s?r:i>s?r+new Array(i-s+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Ka(t,Math.max(0,e+i-1))[0]}function Wc(t,e){var n=Ka(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const Uc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:i_,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Wc(t*100,e),r:Wc,s:u_,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Gc(t){return t}var Vc=Array.prototype.map,Yc=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function d_(t){var e=t.grouping===void 0||t.thousands===void 0?Gc:s_(Vc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?Gc:o_(Vc.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"âˆ’":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(f){f=Za(f);var m=f.fill,g=f.align,y=f.sign,p=f.symbol,h=f.zero,_=f.width,N=f.comma,j=f.precision,w=f.trim,P=f.type;P==="n"?(N=!0,P="g"):Uc[P]||(j===void 0&&(j=12),w=!0,P="g"),(h||m==="0"&&g==="=")&&(h=!0,m="0",g="=");var C=p==="$"?n:p==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",M=p==="$"?r:/[%p]/.test(P)?s:"",S=Uc[P],x=/[defgprs%]/.test(P);j=j===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function $(k){var v=C,A=M,D,I,T;if(P==="c")A=S(k)+A,k="";else{k=+k;var E=k<0||1/k<0;if(k=isNaN(k)?u:S(Math.abs(k),j),w&&(k=c_(k)),E&&+k==0&&y!=="+"&&(E=!1),v=(E?y==="("?y:l:y==="-"||y==="("?"":y)+v,A=(P==="s"?Yc[8+zc/3]:"")+A+(E&&y==="("?")":""),x){for(D=-1,I=k.length;++D<I;)if(T=k.charCodeAt(D),48>T||T>57){A=(T===46?a+k.slice(D+1):k.slice(D))+A,k=k.slice(0,D);break}}}N&&!h&&(k=e(k,1/0));var ae=v.length+k.length+A.length,z=ae<_?new Array(_-ae+1).join(m):"";switch(N&&h&&(k=e(z+k,z.length?_-A.length:1/0),z=""),g){case"<":k=v+k+A+z;break;case"=":k=v+z+k+A;break;case"^":k=z.slice(0,ae=z.length>>1)+v+k+A+z.slice(ae);break;default:k=z+v+k+A;break}return i(k)}return $.toString=function(){return f+""},$}function d(f,m){var g=c((f=Za(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(nr(m)/3)))*3,p=Math.pow(10,-y),h=Yc[8+y/3];return function(_){return g(p*_)+h}}return{format:c,formatPrefix:d}}var Ja,qc,Xc;f_({thousands:",",grouping:[3],currency:["$",""]});function f_(t){return Ja=d_(t),qc=Ja.format,Xc=Ja.formatPrefix,Ja}function h_(t){return Math.max(0,-nr(Math.abs(t)))}function p_(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nr(e)/3)))*3-nr(Math.abs(t)))}function m_(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,nr(e)-nr(t))+1}function g_(t,e,n,r){var a=ps(t,e,n),i;switch(r=Za(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=p_(a,s))&&(r.precision=i),Xc(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=m_(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=h_(a))&&(r.precision=i-(r.type==="%")*2);break}}return qc(r)}function __(t){var e=t.domain;return t.ticks=function(n){var r=e();return j0(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return g_(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,i=r.length-1,s=r[a],l=r[i],u,c,d=10;for(l<s&&(c=s,s=l,l=c,c=a,a=i,i=c);d-- >0;){if(c=hs(s,l,n),c===u)return r[a]=s,r[i]=l,e(r);if(c>0)s=Math.floor(s/c)*c,l=Math.ceil(l/c)*c;else if(c<0)s=Math.ceil(s*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function Qa(){var t=Oc();return t.copy=function(){return Hc(t,Qa())},Ua.apply(t,arguments),__(t)}function b_(t,e){t=t.slice();var n=0,r=t.length-1,a=t[n],i=t[r],s;return i<a&&(s=n,n=r,r=s,s=a,a=i,i=s),t[n]=e.floor(a),t[r]=e.ceil(i),t}const ks=new Date,Cs=new Date;function nt(t,e,n,r){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const s=a(i),l=a.ceil(i);return i-s<l-i?s:l},a.offset=(i,s)=>(e(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,l)=>{const u=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<s)||!(l>0))return u;let c;do u.push(c=new Date(+i)),e(i,l),t(i);while(c<i&&i<s);return u},a.filter=i=>nt(s=>{if(s>=s)for(;t(s),!i(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!i(s););else for(;--l>=0;)for(;e(s,1),!i(s););}),n&&(a.count=(i,s)=>(ks.setTime(+i),Cs.setTime(+s),t(ks),t(Cs),Math.floor(n(ks,Cs))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?s=>r(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const ei=nt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ei.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?nt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ei),ei.range;const sn=1e3,Nt=sn*60,on=Nt*60,ln=on*24,Ts=ln*7,Kc=ln*30,js=ln*365,rr=nt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*sn)},(t,e)=>(e-t)/sn,t=>t.getUTCSeconds());rr.range;const Ns=nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*sn)},(t,e)=>{t.setTime(+t+e*Nt)},(t,e)=>(e-t)/Nt,t=>t.getMinutes());Ns.range,nt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Nt)},(t,e)=>(e-t)/Nt,t=>t.getUTCMinutes()).range;const Ds=nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*sn-t.getMinutes()*Nt)},(t,e)=>{t.setTime(+t+e*on)},(t,e)=>(e-t)/on,t=>t.getHours());Ds.range,nt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*on)},(t,e)=>(e-t)/on,t=>t.getUTCHours()).range;const Fr=nt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Nt)/ln,t=>t.getDate()-1);Fr.range;const Ms=nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ln,t=>t.getUTCDate()-1);Ms.range,nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ln,t=>Math.floor(t/ln)).range;function Ln(t){return nt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Nt)/Ts)}const ti=Ln(0),ni=Ln(1),y_=Ln(2),x_=Ln(3),ar=Ln(4),v_=Ln(5),w_=Ln(6);ti.range,ni.range,y_.range,x_.range,ar.range,v_.range,w_.range;function En(t){return nt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Ts)}const Zc=En(0),ri=En(1),S_=En(2),k_=En(3),ir=En(4),C_=En(5),T_=En(6);Zc.range,ri.range,S_.range,k_.range,ir.range,C_.range,T_.range;const Lr=nt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Lr.range,nt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()).range;const cn=nt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());cn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:nt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}),cn.range;const Bn=nt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Bn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:nt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}),Bn.range;function j_(t,e,n,r,a,i){const s=[[rr,1,sn],[rr,5,5*sn],[rr,15,15*sn],[rr,30,30*sn],[i,1,Nt],[i,5,5*Nt],[i,15,15*Nt],[i,30,30*Nt],[a,1,on],[a,3,3*on],[a,6,6*on],[a,12,12*on],[r,1,ln],[r,2,2*ln],[n,1,Ts],[e,1,Kc],[e,3,3*Kc],[t,1,js]];function l(c,d,f){const m=d<c;m&&([c,d]=[d,c]);const g=f&&typeof f.range=="function"?f:u(c,d,f),y=g?g.range(c,+d+1):[];return m?y.reverse():y}function u(c,d,f){const m=Math.abs(d-c)/f,g=fs(([,,h])=>h).right(s,m);if(g===s.length)return t.every(ps(c/js,d/js,f));if(g===0)return ei.every(Math.max(ps(c,d,f),1));const[y,p]=s[m/s[g-1][2]<s[g][2]/m?g-1:g];return y.every(p)}return[l,u]}const[N_,D_]=j_(cn,Lr,ti,Fr,Ds,Ns);function $s(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Is(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Er(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function M_(t){var e=t.dateTime,n=t.date,r=t.time,a=t.periods,i=t.days,s=t.shortDays,l=t.months,u=t.shortMonths,c=Br(a),d=Ar(a),f=Br(i),m=Ar(i),g=Br(s),y=Ar(s),p=Br(l),h=Ar(l),_=Br(u),N=Ar(u),j={a:E,A:ae,b:z,B:H,c:null,d:ru,e:ru,f:Q_,g:cb,G:db,H:K_,I:Z_,j:J_,L:au,m:eb,M:tb,p:U,q:O,Q:uu,s:du,S:nb,u:rb,U:ab,V:ib,w:sb,W:ob,x:null,X:null,y:lb,Y:ub,Z:fb,"%":cu},w={a:re,A:G,b:ce,B:ve,c:null,d:su,e:su,f:gb,g:Tb,G:Nb,H:hb,I:pb,j:mb,L:ou,m:_b,M:bb,p:de,q:he,Q:uu,s:du,S:yb,u:xb,U:vb,V:wb,w:Sb,W:kb,x:null,X:null,y:Cb,Y:jb,Z:Db,"%":cu},P={a:$,A:k,b:v,B:A,c:D,d:tu,e:tu,f:V_,g:eu,G:Qc,H:nu,I:nu,j:z_,L:G_,m:O_,M:W_,p:x,q:H_,Q:q_,s:X_,S:U_,u:L_,U:E_,V:B_,w:F_,W:A_,x:I,X:T,y:eu,Y:Qc,Z:R_,"%":Y_};j.x=C(n,j),j.X=C(r,j),j.c=C(e,j),w.x=C(n,w),w.X=C(r,w),w.c=C(e,w);function C(ee,ie){return function(L){var F=[],W=-1,Z=0,Y=ee.length,X,fe,Se;for(L instanceof Date||(L=new Date(+L));++W<Y;)ee.charCodeAt(W)===37&&(F.push(ee.slice(Z,W)),(fe=Jc[X=ee.charAt(++W)])!=null?X=ee.charAt(++W):fe=X==="e"?" ":"0",(Se=ie[X])&&(X=Se(L,fe)),F.push(X),Z=W+1);return F.push(ee.slice(Z,W)),F.join("")}}function M(ee,ie){return function(L){var F=Er(1900,void 0,1),W=S(F,ee,L+="",0),Z,Y;if(W!=L.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(ie&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(Z=Is(Er(F.y,0,1)),Y=Z.getUTCDay(),Z=Y>4||Y===0?ri.ceil(Z):ri(Z),Z=Ms.offset(Z,(F.V-1)*7),F.y=Z.getUTCFullYear(),F.m=Z.getUTCMonth(),F.d=Z.getUTCDate()+(F.w+6)%7):(Z=$s(Er(F.y,0,1)),Y=Z.getDay(),Z=Y>4||Y===0?ni.ceil(Z):ni(Z),Z=Fr.offset(Z,(F.V-1)*7),F.y=Z.getFullYear(),F.m=Z.getMonth(),F.d=Z.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),Y="Z"in F?Is(Er(F.y,0,1)).getUTCDay():$s(Er(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(Y+5)%7:F.w+F.U*7-(Y+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,Is(F)):$s(F)}}function S(ee,ie,L,F){for(var W=0,Z=ie.length,Y=L.length,X,fe;W<Z;){if(F>=Y)return-1;if(X=ie.charCodeAt(W++),X===37){if(X=ie.charAt(W++),fe=P[X in Jc?ie.charAt(W++):X],!fe||(F=fe(ee,L,F))<0)return-1}else if(X!=L.charCodeAt(F++))return-1}return F}function x(ee,ie,L){var F=c.exec(ie.slice(L));return F?(ee.p=d.get(F[0].toLowerCase()),L+F[0].length):-1}function $(ee,ie,L){var F=g.exec(ie.slice(L));return F?(ee.w=y.get(F[0].toLowerCase()),L+F[0].length):-1}function k(ee,ie,L){var F=f.exec(ie.slice(L));return F?(ee.w=m.get(F[0].toLowerCase()),L+F[0].length):-1}function v(ee,ie,L){var F=_.exec(ie.slice(L));return F?(ee.m=N.get(F[0].toLowerCase()),L+F[0].length):-1}function A(ee,ie,L){var F=p.exec(ie.slice(L));return F?(ee.m=h.get(F[0].toLowerCase()),L+F[0].length):-1}function D(ee,ie,L){return S(ee,e,ie,L)}function I(ee,ie,L){return S(ee,n,ie,L)}function T(ee,ie,L){return S(ee,r,ie,L)}function E(ee){return s[ee.getDay()]}function ae(ee){return i[ee.getDay()]}function z(ee){return u[ee.getMonth()]}function H(ee){return l[ee.getMonth()]}function U(ee){return a[+(ee.getHours()>=12)]}function O(ee){return 1+~~(ee.getMonth()/3)}function re(ee){return s[ee.getUTCDay()]}function G(ee){return i[ee.getUTCDay()]}function ce(ee){return u[ee.getUTCMonth()]}function ve(ee){return l[ee.getUTCMonth()]}function de(ee){return a[+(ee.getUTCHours()>=12)]}function he(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var ie=C(ee+="",j);return ie.toString=function(){return ee},ie},parse:function(ee){var ie=M(ee+="",!1);return ie.toString=function(){return ee},ie},utcFormat:function(ee){var ie=C(ee+="",w);return ie.toString=function(){return ee},ie},utcParse:function(ee){var ie=M(ee+="",!0);return ie.toString=function(){return ee},ie}}}var Jc={"-":"",_:" ",0:"0"},it=/^\s*\d+/,$_=/^%/,I_=/[\\^$*+?|[\]().{}]/g;function Fe(t,e,n){var r=t<0?"-":"",a=(r?-t:t)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(e)+a:a)}function P_(t){return t.replace(I_,"\\$&")}function Br(t){return new RegExp("^(?:"+t.map(P_).join("|")+")","i")}function Ar(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function F_(t,e,n){var r=it.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function L_(t,e,n){var r=it.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function E_(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function B_(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function A_(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Qc(t,e,n){var r=it.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function eu(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function R_(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function H_(t,e,n){var r=it.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function O_(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function tu(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function z_(t,e,n){var r=it.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function nu(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function W_(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function U_(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function G_(t,e,n){var r=it.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function V_(t,e,n){var r=it.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Y_(t,e,n){var r=$_.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function q_(t,e,n){var r=it.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function X_(t,e,n){var r=it.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ru(t,e){return Fe(t.getDate(),e,2)}function K_(t,e){return Fe(t.getHours(),e,2)}function Z_(t,e){return Fe(t.getHours()%12||12,e,2)}function J_(t,e){return Fe(1+Fr.count(cn(t),t),e,3)}function au(t,e){return Fe(t.getMilliseconds(),e,3)}function Q_(t,e){return au(t,e)+"000"}function eb(t,e){return Fe(t.getMonth()+1,e,2)}function tb(t,e){return Fe(t.getMinutes(),e,2)}function nb(t,e){return Fe(t.getSeconds(),e,2)}function rb(t){var e=t.getDay();return e===0?7:e}function ab(t,e){return Fe(ti.count(cn(t)-1,t),e,2)}function iu(t){var e=t.getDay();return e>=4||e===0?ar(t):ar.ceil(t)}function ib(t,e){return t=iu(t),Fe(ar.count(cn(t),t)+(cn(t).getDay()===4),e,2)}function sb(t){return t.getDay()}function ob(t,e){return Fe(ni.count(cn(t)-1,t),e,2)}function lb(t,e){return Fe(t.getFullYear()%100,e,2)}function cb(t,e){return t=iu(t),Fe(t.getFullYear()%100,e,2)}function ub(t,e){return Fe(t.getFullYear()%1e4,e,4)}function db(t,e){var n=t.getDay();return t=n>=4||n===0?ar(t):ar.ceil(t),Fe(t.getFullYear()%1e4,e,4)}function fb(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Fe(e/60|0,"0",2)+Fe(e%60,"0",2)}function su(t,e){return Fe(t.getUTCDate(),e,2)}function hb(t,e){return Fe(t.getUTCHours(),e,2)}function pb(t,e){return Fe(t.getUTCHours()%12||12,e,2)}function mb(t,e){return Fe(1+Ms.count(Bn(t),t),e,3)}function ou(t,e){return Fe(t.getUTCMilliseconds(),e,3)}function gb(t,e){return ou(t,e)+"000"}function _b(t,e){return Fe(t.getUTCMonth()+1,e,2)}function bb(t,e){return Fe(t.getUTCMinutes(),e,2)}function yb(t,e){return Fe(t.getUTCSeconds(),e,2)}function xb(t){var e=t.getUTCDay();return e===0?7:e}function vb(t,e){return Fe(Zc.count(Bn(t)-1,t),e,2)}function lu(t){var e=t.getUTCDay();return e>=4||e===0?ir(t):ir.ceil(t)}function wb(t,e){return t=lu(t),Fe(ir.count(Bn(t),t)+(Bn(t).getUTCDay()===4),e,2)}function Sb(t){return t.getUTCDay()}function kb(t,e){return Fe(ri.count(Bn(t)-1,t),e,2)}function Cb(t,e){return Fe(t.getUTCFullYear()%100,e,2)}function Tb(t,e){return t=lu(t),Fe(t.getUTCFullYear()%100,e,2)}function jb(t,e){return Fe(t.getUTCFullYear()%1e4,e,4)}function Nb(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ir(t):ir.ceil(t),Fe(t.getUTCFullYear()%1e4,e,4)}function Db(){return"+0000"}function cu(){return"%"}function uu(t){return+t}function du(t){return Math.floor(+t/1e3)}var sr,fu;Mb({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Mb(t){return sr=M_(t),fu=sr.format,sr.parse,sr.utcFormat,sr.utcParse,sr}function $b(t){return new Date(t)}function Ib(t){return t instanceof Date?+t:+new Date(+t)}function hu(t,e,n,r,a,i,s,l,u,c){var d=Oc(),f=d.invert,m=d.domain,g=c(".%L"),y=c(":%S"),p=c("%I:%M"),h=c("%I %p"),_=c("%a %d"),N=c("%b %d"),j=c("%B"),w=c("%Y");function P(C){return(u(C)<C?g:l(C)<C?y:s(C)<C?p:i(C)<C?h:r(C)<C?a(C)<C?_:N:n(C)<C?j:w)(C)}return d.invert=function(C){return new Date(f(C))},d.domain=function(C){return arguments.length?m(Array.from(C,Ib)):m().map($b)},d.ticks=function(C){var M=m();return t(M[0],M[M.length-1],C??10)},d.tickFormat=function(C,M){return M==null?P:c(M)},d.nice=function(C){var M=m();return(!C||typeof C.range!="function")&&(C=e(M[0],M[M.length-1],C??10)),C?m(b_(M,C)):d},d.copy=function(){return Hc(d,hu(t,e,n,r,a,i,s,l,u,c))},d}function Ps(){return Ua.apply(hu(N_,D_,cn,Lr,ti,Fr,Ds,Ns,rr,fu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Pb({task:t,scale:e,onTaskClick:n,onTaskDoubleClick:r,isSelected:a=!1,taskIndex:i,tabIndex:s=-1,onFocus:l,"aria-label":u}){const c=B.useRef(null),[d,f]=B.useState(!1),[m,g]=B.useState(!1),y=e(t.start),p=e(t.end),h=Math.max(p-y,20),_=()=>{if(t.color)return t.color;switch(t.priority){case"high":return"#d5281b";case"medium":return"#005eb8";case"low":return"#007f3b";default:return"#005eb8"}},N=t.progress?h*t.progress/100:0,j=()=>{n?.(t)},w=()=>{r?.(t)},P=v=>{v.key==="Enter"?(v.preventDefault(),j()):v.key===" "&&(v.preventDefault(),w())},C=()=>{f(!0)},M=()=>{f(!1)},S=()=>{g(!0),l?.()},x=()=>{g(!1)},$=["gantt-task-bar",d&&"gantt-task-bar--pressed",(m||a)&&"gantt-task-bar--focused",t.priority&&`gantt-task-bar--priority-${t.priority}`,a&&"gantt-task-bar--selected",t.type&&`gantt-task-bar--type-${t.type}`].filter(Boolean).join(" "),k={"--task-left":`${y}px`,"--task-width":`${h}px`,"--task-color":_(),left:`${y}px`,width:`${h}px`,backgroundColor:_()};return o.jsxs("div",{role:"button",tabIndex:s,ref:c,"data-task-index":i,className:$,style:k,onClick:j,onDoubleClick:w,onKeyDown:P,onMouseDown:C,onMouseUp:M,onFocus:S,onBlur:x,"aria-label":u||`${a?"Selected: ":""}${t.title}: ${t.start.toLocaleDateString()} to ${t.end.toLocaleDateString()}${t.priority?`, priority ${t.priority}`:""}${t.progress?`, ${t.progress}% complete`:""}`,"aria-describedby":`task-${t.id}-details`,children:[o.jsx("span",{className:"task-title",children:t.title}),t.progress!==void 0&&o.jsx("div",{className:"task-progress",style:{width:`${N}px`}}),o.jsx("span",{id:`task-${t.id}-details`,className:"sr-only",children:`Task: ${t.title}, from ${t.start.toLocaleDateString()} to ${t.end.toLocaleDateString()}${t.progress?`, ${t.progress}% complete`:""}${t.priority?`, priority: ${t.priority}`:""}`})]})}function Fb({viewStart:t,viewEnd:e,dateCount:n}){const r=[];for(let g=t.getTime();g<=e.getTime();g+=864e5)r.push(new Date(g));const i=new Date;i.setHours(0,0,0,0);const[s,l]=B.useState(-1),u=B.useRef(null),c=g=>{if(g.key==="ArrowLeft"){g.preventDefault();const y=Math.max(0,s===-1?0:s-1);l(y),m(y)}else if(g.key==="ArrowRight"){g.preventDefault();const y=Math.min(r.length-1,s===-1?0:s+1);l(y),m(y)}else if(g.key==="ArrowDown"){g.preventDefault();const y=document.querySelector(".gantt-row .timeline-container");y&&y.focus()}else if(g.key==="Home")g.preventDefault(),l(0),m(0);else if(g.key==="End"){g.preventDefault();const y=r.length-1;l(y),m(y)}},d=g=>{if(g.key==="ArrowDown"){g.preventDefault();const y=document.querySelector(".gantt-row .resource-label");y&&y.focus()}else if(g.key==="ArrowRight"){g.preventDefault();const y=u.current;y&&y.focus()}},f=()=>{s===-1&&(l(0),setTimeout(()=>m(0),0))},m=g=>{const y=u.current?.querySelector(`[data-date-index="${g}"]`);y&&y.focus()};return o.jsxs("div",{className:"gantt-header",role:"row","aria-rowindex":1,children:[o.jsx("div",{className:"header-resource",role:"columnheader","aria-colindex":1,tabIndex:0,"aria-label":"Resource column header",onKeyDown:d,children:"Resources"}),o.jsx("div",{ref:u,className:"header-timeline",role:"columnheader","aria-colindex":2,"aria-colspan":n,"aria-label":`Timeline from ${t.toLocaleDateString()} to ${e.toLocaleDateString()}. Use arrow keys to navigate between dates`,tabIndex:0,onKeyDown:c,onFocus:f,children:r.map((g,y)=>{const p=g.getTime()===i.getTime(),h=s===y;return o.jsx("div",{"data-date-index":y,className:`date-column ${p?"today":""} ${h?"focused":""}`,tabIndex:h?0:-1,role:"button","aria-label":`${g.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}${p?" (Today)":""}`,onFocus:()=>l(y),onKeyDown:c,children:g.toLocaleDateString("en-GB",{day:"numeric",month:"short"})},y)})})]})}function Lb({resource:t,tasks:e,scale:n,onTaskClick:r,onTaskDoubleClick:a,rowIndex:i,dateCount:s}){const[l,u]=B.useState(!1),[c,d]=B.useState(-1),f=B.useRef(null);B.useEffect(()=>{l&&c>=0&&e.length>0&&setTimeout(()=>{f.current?.querySelector(`[data-task-index="${c}"]`)?.focus()},0)},[l,c,e.length]);const m=p=>{if(p.key==="ArrowLeft"&&p.shiftKey){p.preventDefault(),p.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(p.key==="ArrowRight"&&p.shiftKey){p.preventDefault(),p.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!l){switch(p.key){case"ArrowUp":p.preventDefault(),i===0?document.querySelector(".header-timeline")?.focus():document.querySelector(`[aria-rowindex="${i+1}"] .timeline-container`)?.focus();break;case"ArrowDown":p.preventDefault(),document.querySelector(`[aria-rowindex="${i+3}"] .timeline-container`)?.focus();break;case"ArrowLeft":p.preventDefault(),f.current?.closest(".gantt-row")?.querySelector(".resource-label")?.focus();break;case"Enter":e.length>0&&(p.preventDefault(),u(!0),d(0));break}return}switch(p.key){case"ArrowLeft":p.preventDefault();const h=Math.max(0,c-1);d(h),f.current?.querySelector(`[data-task-index="${h}"]`)?.focus();break;case"ArrowRight":p.preventDefault();const N=Math.min(e.length-1,c+1);d(N),f.current?.querySelector(`[data-task-index="${N}"]`)?.focus();break;case"Enter":p.preventDefault(),c>=0&&r?.(e[c]);break;case" ":p.preventDefault(),c>=0&&a?.(e[c]);break;case"Escape":p.preventDefault(),u(!1),d(-1),f.current?.focus();break}},g=p=>{switch(p.key){case"ArrowUp":p.preventDefault(),i===0?document.querySelector(".header-resource")?.focus():document.querySelector(`[aria-rowindex="${i+1}"] .resource-label`)?.focus();break;case"ArrowDown":p.preventDefault(),document.querySelector(`[aria-rowindex="${i+3}"] .resource-label`)?.focus();break;case"ArrowRight":p.preventDefault(),f.current?.focus();break}},y=p=>{l&&d(p)};return o.jsxs("div",{className:"gantt-row",role:"row","aria-rowindex":i+2,children:[o.jsx("div",{className:"resource-label",role:"gridcell","aria-colindex":1,tabIndex:0,"aria-label":`Resource: ${t.label}`,onKeyDown:g,children:t.label}),o.jsx("div",{ref:f,className:`timeline-container ${l?"timeline-active":""}`,role:"gridcell","aria-colindex":2,"aria-colspan":s,tabIndex:0,"aria-label":`Timeline for ${t.label} with ${e.length} task${e.length!==1?"s":""}. Press Enter to activate task navigation, then use arrow keys to navigate, Enter to select, Space to activate, Escape to exit`,onKeyDown:m,onFocus:()=>{l||d(-1)},children:e.map((p,h)=>o.jsx(Pb,{task:p,scale:n,onTaskClick:r,onTaskDoubleClick:a,isSelected:l&&c===h,taskIndex:h,tabIndex:l&&c===h?0:-1,onFocus:()=>y(h)},p.id))})]})}function Eb({resources:t,tasks:e=[],viewStart:n,viewEnd:r,onTaskClick:a,onTaskDoubleClick:i}){const s=B.useRef(null),[l,u]=B.useState(800),c=B.useMemo(()=>{if(n instanceof Date)return isNaN(n.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):n;const p=new Date(n);return isNaN(p.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):p},[n]),d=B.useMemo(()=>{if(r instanceof Date)return isNaN(r.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):r;const p=new Date(r);return isNaN(p.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):p},[r]),f=B.useMemo(()=>Math.ceil((d.getTime()-c.getTime())/864e5)+1,[c,d]);B.useEffect(()=>{if(!s.current)return;const p=new ResizeObserver(h=>{const _=h[0];_&&u(Math.max(_.contentRect.width-220,400))});return p.observe(s.current),()=>p.disconnect()},[]);const m=B.useMemo(()=>Ps().domain([c,d]).range([0,l]),[c,d,l]),g=B.useMemo(()=>{const p=new Map;return e.forEach(h=>{const _=p.get(h.resourceId)||[];_.push(h),p.set(h.resourceId,_)}),p},[e]),y=p=>{if(p.target===p.currentTarget)switch(p.key){case"ArrowDown":p.preventDefault();const h=s.current?.querySelector(".gantt-row .resource-label");h&&h.focus();break;case"Home":p.preventDefault();const _=s.current?.querySelector(".header-resource");_&&_.focus();break}};return o.jsxs("div",{className:"gantt-chart",role:"grid","aria-label":"Gantt Chart showing resource scheduling and task timelines","aria-rowcount":t.length+1,"aria-colcount":f+1,"aria-description":"Use arrow keys to navigate cells, Tab to cycle through tasks in timeline rows or dates in header, Enter to select task, Space to activate task, Alt+arrows to scroll the grid, Shift+arrows to scroll timeline rows",tabIndex:0,onKeyDown:y,children:[o.jsx(Fb,{viewStart:c,viewEnd:d,dateCount:f}),o.jsx("div",{ref:s,className:"gantt-grid",role:"rowgroup","aria-label":"Gantt chart data rows",tabIndex:0,onKeyDown:p=>{p.key==="ArrowLeft"&&p.altKey?(p.preventDefault(),s.current?.scrollBy({left:-50,behavior:"smooth"})):p.key==="ArrowRight"&&p.altKey?(p.preventDefault(),s.current?.scrollBy({left:50,behavior:"smooth"})):p.key==="ArrowUp"&&p.altKey?(p.preventDefault(),s.current?.scrollBy({top:-50,behavior:"smooth"})):p.key==="ArrowDown"&&p.altKey&&(p.preventDefault(),s.current?.scrollBy({top:50,behavior:"smooth"}))},children:t.map((p,h)=>o.jsx(Lb,{resource:p,tasks:g.get(p.id)||[],scale:m,onTaskClick:a,onTaskDoubleClick:i,rowIndex:h,dateCount:f},p.id))})]})}const ai=({children:t,href:e,active:n=!1,attributes:r={}})=>o.jsx("li",{className:"nhsuk-breadcrumb__item",children:n?o.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",...r,children:t}):o.jsx("a",{className:"nhsuk-breadcrumb__link",href:e,...r,children:t})}),pu=({items:t=[],children:e,classes:n,labelText:r="Breadcrumb",href:a,text:i,reverse:s=!1,attributes:l={}})=>{const u=()=>e?B.Children.toArray(e).filter(h=>B.isValidElement(h)&&(h.type===ai||h.type?.displayName==="BreadcrumbItem")).map(h=>({text:typeof h.props.children=="string"?h.props.children:String(h.props.children),href:h.props.href,active:h.props.active,attributes:h.props.attributes})):[],c=()=>e?u():a&&i?[{href:a,text:i}]:t,d=()=>{const p=c();if(p&&p.length>0){const h=p.slice().reverse().find(_=>_.href&&!_.active);if(h)return{href:h.href,text:h.text}}return{text:"Home"}},f=c(),m=d(),g=_e("nhsuk-breadcrumb",{"nhsuk-breadcrumb--reverse":s},n),y=r;return o.jsxs("nav",{className:g,"aria-label":y,role:"navigation",...l,children:[o.jsx("ol",{className:"nhsuk-breadcrumb__list",role:"list",children:e?B.Children.map(e,(p,h)=>B.isValidElement(p)&&(p.type===ai||p.type?.displayName==="BreadcrumbItem")?B.cloneElement(p,{key:h}):null):f?.filter(p=>p.active||!!p.href).map((p,h)=>o.jsx("li",{className:"nhsuk-breadcrumb__item",role:"listitem",children:p.active?o.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",role:"text",...p.attributes||{},children:p.text}):o.jsx("a",{className:"nhsuk-breadcrumb__link",href:p.href,role:"link",...p.attributes||{},children:p.text})},h))}),m.href&&o.jsx("p",{className:"nhsuk-breadcrumb__back",children:o.jsxs("a",{className:"nhsuk-breadcrumb__backlink",href:m.href,role:"link","aria-label":`Back to ${m.text}`,...t.length>0?t[t.length-1]?.attributes||{}:{},children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Back to Â "}),m.text]})})]})};pu.Item=ai,ai.displayName="BreadcrumbItem";const Fs=({text:t="Skip to main content",href:e="#maincontent",classes:n,attributes:r={}})=>{const[a,i]=B.useState(!1);B.useEffect(()=>{i(!0)},[]),B.useEffect(()=>{if(typeof window>"u"||typeof document>"u"||!document.querySelector||!document.querySelectorAll)return;const l=u=>{const c=u.target,d=c.getAttribute("href");if(d&&d.startsWith("#")){const f=document.querySelector(d);if(f){f.hasAttribute("tabindex")||f.setAttribute("tabindex","-1"),f.focus(),f.classList.add("nhsuk-skip-link-focused-element");const m=window.setTimeout(()=>{f.classList.remove("nhsuk-skip-link-focused-element"),f.getAttribute("tabindex")==="-1"&&f.removeAttribute("tabindex")},3e3);c.__nhsSkipLinkTimeout=m}}};try{const u=document.querySelectorAll(".nhsuk-skip-link");return u.forEach(c=>{c.addEventListener("click",l)}),()=>{try{u.forEach(c=>{c.removeEventListener("click",l);const d=c.__nhsSkipLinkTimeout;d&&window.clearTimeout&&window.clearTimeout(d)})}catch(c){console.warn("SkipLink cleanup error:",c)}}}catch(u){return console.warn("SkipLink initialization error:",u),()=>{}}},[a]);const s=_e("nhsuk-skip-link",n);return o.jsx("a",{className:s,href:e,"data-module":"nhsuk-skip-link","data-enhanced":a?"true":"false",...r,children:t})},Bb=({previousUrl:t,previousPage:e,nextUrl:n,nextPage:r,classes:a,attributes:i={}})=>{const s=_e("nhsuk-pagination",a);return o.jsx("nav",{className:s,role:"navigation","aria-label":"Pagination",...i,children:o.jsxs("ul",{className:"nhsuk-list nhsuk-pagination__list",children:[t&&e&&o.jsx("li",{className:"nhsuk-pagination-item--previous",children:o.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--prev",href:t,children:[o.jsx("span",{className:"nhsuk-pagination__title",children:"Previous"}),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),o.jsx("span",{className:"nhsuk-pagination__page",children:e}),o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{d:"M4.1 12.3l2.7 3c.2.2.5.2.7 0 .1-.1.1-.2.1-.3v-2h11c.6 0 1-.4 1-1s-.4-1-1-1h-11V9c0-.2-.1-.4-.3-.5h-.2c-.1 0-.3.1-.4.2l-2.7 3c0 .2 0 .4.1.6z"})})]})}),n&&r&&o.jsx("li",{className:"nhsuk-pagination-item--next",children:o.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--next",href:n,children:[o.jsx("span",{className:"nhsuk-pagination__title",children:"Next"}),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),o.jsx("span",{className:"nhsuk-pagination__page",children:r}),o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{d:"M19.6 11.66l-2.73-3A.51.51 0 0 0 16 9v2H5a1 1 0 0 0 0 2h11v2a.5.5 0 0 0 .32.46.39.39 0 0 0 .18 0 .52.52 0 0 0 .37-.16l2.73-3a.5.5 0 0 0 0-.64z"})})]})})]})})},Ab=({items:t,classes:e,ariaLabel:n="Pages in this guide",attributes:r={}})=>{const a=_e("nhsuk-contents-list",e),i=(s,l)=>s.current?o.jsx("li",{className:"nhsuk-contents-list__item","aria-current":"page",...s.attributes||{},children:o.jsx("span",{className:"nhsuk-contents-list__current",children:s.text})},l):o.jsx("li",{className:"nhsuk-contents-list__item",children:o.jsx("a",{className:"nhsuk-contents-list__link",href:s.href,...s.attributes||{},children:s.text})},l);return o.jsxs("nav",{className:a,role:"navigation","aria-label":n,...r,children:[o.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Contents"}),o.jsx("ol",{className:"nhsuk-contents-list__list",children:t.map((s,l)=>i(s,l))})]})},Ls=B.forwardRef(({variant:t="default",heading:e,headingHtml:n,headingLevel:r=2,headingClasses:a,description:i,descriptionHtml:s,href:l,imgURL:u,imgAlt:c,...d},f)=>{const m=["nhsuk-card",t==="clickable"&&"nhsuk-card--clickable",t==="secondary"&&"nhsuk-card--secondary",t==="feature"&&"nhsuk-card--feature",d.className].filter(Boolean).join(" "),g=["nhsuk-card__content",t==="feature"&&"nhsuk-card__content--feature",t==="primary"&&"nhsuk-card__content--primary",t==="secondary"&&"nhsuk-card__content--secondary"].filter(Boolean).join(" "),y=["nhsuk-card__heading",t==="feature"&&"nhsuk-card__heading--feature",a].filter(Boolean).join(" "),p=()=>{if(n)return o.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!e)return null;const N=()=>l&&t!=="feature"?o.jsx("a",{className:"nhsuk-card__link",href:l,children:e}):e;return o.jsx(Bt,{level:r,className:y,children:N()})},h=()=>d.children?d.children:s?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):i?o.jsx("p",{className:"nhsuk-card__description",children:i}):null,_=()=>t!=="primary"?null:o.jsxs("svg",{className:"nhsuk-icon",xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27","aria-hidden":"true",focusable:"false",children:[o.jsx("circle",{cx:"13.333",cy:"13.333",r:"13.333",fill:""}),o.jsxs("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2.667",children:[o.jsx("path",{d:"M15.438 13l-3.771 3.771"}),o.jsx("path",{d:"M11.667 9.229L15.438 13"})]})]});return o.jsxs("div",{...d,className:m,ref:f,children:[u&&o.jsx("img",{className:"nhsuk-card__img",src:u,alt:c||""}),o.jsxs("div",{className:g,children:[p(),h(),_()]})]})});Ls.displayName="Card";const Rb=({className:t,children:e,"data-testid":n,id:r})=>{const a=["nhsuk-card-group",t].filter(Boolean).join(" ");return o.jsx("ul",{className:a,"data-testid":n,id:r,children:e})},Hb=({className:t,children:e,"data-testid":n})=>{const r=["nhsuk-card-group__item",t].filter(Boolean).join(" ");return o.jsx("li",{className:r,"data-testid":n,children:e})},Ob=({type:t,heading:e,headingHtml:n,headingLevel:r=3,headingClasses:a,description:i,descriptionHtml:s,className:l,children:u,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":m,"aria-describedby":g})=>{const y=["nhsuk-care-card",`nhsuk-care-card--${t}`,l].filter(Boolean).join(" "),p=["nhsuk-care-card__heading",a].filter(Boolean).join(" "),h=()=>{if(n)return o.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!e)return null;const N={"non-urgent":"Non-urgent advice:",urgent:"Urgent advice:",emergency:"Immediate action required:"}[t],j=o.jsxs("span",{role:"text",children:[o.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[N," "]}),e]});return o.jsx(Bt,{level:r,className:p,children:j})},_=()=>u||(s?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):i?o.jsx("p",{className:"nhsuk-care-card__text",children:i}):null);return o.jsxs("div",{className:y,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":m,"aria-describedby":g,children:[o.jsxs("div",{className:"nhsuk-care-card__heading-container",children:[h(),o.jsx("span",{className:"nhsuk-care-card__arrow","aria-hidden":"true"})]}),o.jsx("div",{className:"nhsuk-care-card__content",children:_()})]})},mu=({id:t,className:e,headingText:n,headingHtml:r,headingLevel:a=2,bodyText:i,bodyHtml:s,children:l,...u})=>{const c=_e("nhsuk-panel",e),d=()=>!n&&!r&&!l?null:r?o.jsx(Bt,{level:a,className:"nhsuk-panel__heading",html:r,marginBottom:"var(--panel-heading-margin, 24px)"}):n?o.jsx(Bt,{level:a,className:"nhsuk-panel__heading",text:n,marginBottom:"var(--panel-heading-margin, 24px)"}):null,f=()=>l?o.jsx("div",{className:"nhsuk-panel__body",children:l}):s?o.jsx("div",{className:"nhsuk-panel__body",dangerouslySetInnerHTML:{__html:s}}):i?o.jsx("div",{className:"nhsuk-panel__body",children:o.jsx("p",{children:i})}):null;return o.jsxs("div",{className:c,id:t,...u,children:[d(),f()]})},zb=({text:t,html:e,children:n,className:r,...a})=>{const i=_e("nhsuk-inset-text",r),s=()=>n||(e?o.jsx("div",{dangerouslySetInnerHTML:{__html:e}}):t?o.jsx("p",{children:t}):null);return o.jsx("div",{className:i,...a,children:s()})},Wb=({items:t,noBorder:e=!1,className:n,...r})=>{const a=_e("nhsuk-summary-list",{"nhsuk-summary-list--no-border":e},n),i=l=>l.children?l.children:l.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text?l.text:null,s=l=>!l||!l.items.length?null:o.jsx("dd",{className:"nhsuk-summary-list__actions",children:o.jsx("ul",{className:"nhsuk-summary-list__actions-list",children:l.items.map((u,c)=>o.jsx("li",{className:"nhsuk-summary-list__actions-list-item",children:o.jsxs("a",{href:u.href,className:"nhsuk-link",...u.attributes,children:[i(u),u.visuallyHiddenText&&o.jsx("span",{className:"nhsuk-u-visually-hidden",children:u.visuallyHiddenText})]})},c))})});return o.jsx("div",{className:"nhsuk-summary-list-container",children:o.jsx("dl",{className:a,...r,children:t.map((l,u)=>o.jsxs("div",{className:"nhsuk-summary-list__row",children:[o.jsx("dt",{className:"nhsuk-summary-list__key",children:i(l.key)}),o.jsx("dd",{className:"nhsuk-summary-list__value",children:i(l.value)}),s(l.actions)]},u))})})},Rr={current:null},Ub=()=>{if(Rr.current)return Rr.current;try{Rr.current=require("prismjs");try{require("prismjs/components/prism-typescript")}catch{}try{require("prismjs/components/prism-tsx")}catch{}try{require("prismjs/components/prism-json")}catch{}}catch{Rr.current=null}return Rr.current},Gb=t=>{const e=[{regex:/\b(import|from|export|const|let|var|return|if|else|for|while|switch|case|break|new|throw|try|catch|finally|class|extends|implements|interface|type|as|async|await|function)\b/g,cls:"kw"},{regex:/(['"`])(?:\\.|(?!\1).)*\1/g,cls:"str"},{regex:/\/\*[^]*?\*\/|\/\/.*$/gm,cls:"com"},{regex:/\b([0-9]+(?:\.[0-9]+)?)\b/g,cls:"num"}];let n=t;return e.forEach(r=>{n=n.replace(r.regex,a=>`<span class="nhsuk-code-${r.cls}">${a}</span>`)}),n},ii=(t,e,n)=>{if(n||!e)return t;const r=Ub();if(r&&r.languages){const a=r.languages[e]?e:r.languages.typescript&&(e==="ts"||e==="tsx"||e==="typescript")?"typescript":r.languages.json&&e==="json"?"json":void 0;if(a)try{return r.highlight(t,r.languages[a],a)}catch{}}return Gb(t)},Vb=({rows:t,head:e,caption:n,captionSize:r,firstCellIsHeader:a=!1,responsive:i=!1,heading:s,headingLevel:l=3,panel:u=!1,panelClasses:c,tableClasses:d,classes:f,attributes:m,"data-testid":g,columns:y,data:p,visuallyHiddenCaption:h=!1})=>{const _=`nhsuk-table__caption ${r?`nhsuk-table__caption--${r}`:""}`.trim(),N=_e("nhsuk-table",{"nhsuk-table-responsive":i},d),j=_e(f),w=(x,$)=>{const k=_e("nhsuk-table__header",{[`nhsuk-table__header--${x.format}`]:x.format},x.classes),v={scope:"col",...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...i&&{role:"columnheader"},...x.attributes};let A;if(x.node!=null)A=o.jsx(o.Fragment,{children:x.node});else if(x.html)A=o.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const D=Array.isArray(x.code),I=D?x.code.join(`
`):x.code,T=D||I.includes(`
`),E={className:_e("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":T,"nhsuk-table__code--inline":!T}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},ae=ii(I,x.codeLanguage);A=T?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...E,dangerouslySetInnerHTML:{__html:ae}})}):o.jsx("code",{...E,dangerouslySetInnerHTML:{__html:ae}})}else A=x.text;return o.jsx("th",{className:k,...v,children:A},$)},P=(x,$,k)=>{const v=a&&k||x.rowHeader,A=_e(v?"nhsuk-table__header":"nhsuk-table__cell",{[`nhsuk-table__${v?"header":"cell"}--${x.format}`]:x.format},x.classes),D={...v&&{scope:"row"},...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...i&&{role:v?"rowheader":"cell",...x.header&&{"data-label":x.header}},...x.attributes};let I;if(x.node!=null)I=o.jsx(o.Fragment,{children:x.node});else if(x.html)I=o.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const ae=Array.isArray(x.code),z=ae?x.code.join(`
`):x.code,H=ae||z.includes(`
`),U={className:_e("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":H,"nhsuk-table__code--inline":!H}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},O=ii(z,x.codeLanguage,x.disableHighlight);I=H?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...U,dangerouslySetInnerHTML:{__html:O}})}):o.jsx("code",{...U,dangerouslySetInnerHTML:{__html:O}})}else I=x.text;const T=o.jsxs(o.Fragment,{children:[i&&x.header&&o.jsxs("span",{className:"nhsuk-table-responsive__heading","aria-hidden":"true",children:[x.header," "]}),I]}),E=v?"th":"td";return o.jsx(E,{className:A,...D,children:T},$)};let C=e,M=t;!C&&y&&y.length&&(C=y.map(x=>({text:x.title,format:x.format,classes:x.headerClasses,attributes:x.headerAttributes}))),!M&&y&&p&&p.length&&(M=p.map((x,$)=>y.map(k=>{const v=k.accessor?k.accessor(x,$):x[k.key];let A={format:k.format,classes:k.cellClasses,attributes:k.cellAttributes};if(k.rowHeader&&(A.rowHeader=!0),k.render){const D=k.render(v,x,$,k);return D==null||typeof D=="boolean"?{...A,text:""}:typeof D=="string"||typeof D=="number"?{...A,text:String(D)}:{...A,...D}}return{...A,text:v!=null?String(v):""}})));const S=()=>o.jsxs("table",{className:N,...i&&{role:"table"},...m,...g&&{"data-testid":g},children:[n&&o.jsx("caption",{className:_e(_,h&&"nhsuk-u-visually-hidden"),children:n}),C&&C.length>0&&o.jsx("thead",{className:"nhsuk-table__head",...i&&{role:"rowgroup"},children:o.jsx("tr",{...i&&{role:"row"},children:C.map((x,$)=>w(x,$))})}),o.jsx("tbody",{className:"nhsuk-table__body",children:M&&M.map((x,$)=>o.jsx("tr",{className:"nhsuk-table__row",...i&&{role:"row"},children:x.map((k,v)=>P(k,v,v===0))},$))})]});return u?o.jsxs(mu,{className:c,children:[s&&o.jsx(Bt,{level:l,className:"nhsuk-table__heading-tab",children:s}),S()]}):j?o.jsx("div",{className:j,children:S()}):S()},Yb=({children:t,size:e,className:n})=>{const r=_e("nhsuk-table__caption",e&&`nhsuk-table__caption--${e}`,n);return o.jsx("caption",{className:r,children:t})},gu=({responsive:t,className:e,children:n,...r})=>{const a=t?{role:"row"}:{};return o.jsx("tr",{className:e,...a,...r,children:n})},_u=({text:t,html:e,node:n,code:r,codeLanguage:a,codeClassName:i,disableHighlight:s,format:l,classes:u,colspan:c,rowspan:d,attributes:f,responsive:m,as:g="th"})=>{const y=_e("nhsuk-table__header",{[`nhsuk-table__header--${l}`]:l},u),p={scope:"col",...c&&{colSpan:c},...d&&{rowSpan:d},...m&&{role:"columnheader"},...f};let h;if(n!=null)h=o.jsx(o.Fragment,{children:n});else if(e)h=o.jsx("span",{dangerouslySetInnerHTML:{__html:e}});else if(r!=null){const N=Array.isArray(r),j=N?r.join(`
`):r,w=N||j.includes(`
`),P={className:_e("nhsuk-table__code",i,{"nhsuk-table__code--block":w,"nhsuk-table__code--inline":!w}),...a?{"data-language":a}:{}},C=ii(j,a,s);h=w?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...P,dangerouslySetInnerHTML:{__html:C}})}):o.jsx("code",{...P,dangerouslySetInnerHTML:{__html:C}})}else h=t;const _=g;return o.jsx(_,{className:y,...p,children:h})},qb=({text:t,html:e,node:n,code:r,codeLanguage:a,codeClassName:i,disableHighlight:s,format:l,classes:u,colspan:c,rowspan:d,attributes:f,responsive:m,rowHeader:g})=>{const y=!!g,p=y?"th":"td",h=_e(y?"nhsuk-table__header":"nhsuk-table__cell",l&&`nhsuk-table__${y?"header":"cell"}--${l}`,u),_={...c&&{colSpan:c},...d&&{rowSpan:d},...y&&{scope:"row"},...m&&{role:y?"rowheader":"cell"},...f};let N;if(n!=null)N=o.jsx(o.Fragment,{children:n});else if(e)N=o.jsx("span",{dangerouslySetInnerHTML:{__html:e}});else if(r!=null){const j=Array.isArray(r),w=j?r.join(`
`):r,P=j||w.includes(`
`),C={className:_e("nhsuk-table__code",i,{"nhsuk-table__code--block":P,"nhsuk-table__code--inline":!P}),...a?{"data-language":a}:{}},M=ii(w,a,s);N=P?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...C,dangerouslySetInnerHTML:{__html:M}})}):o.jsx("code",{...C,dangerouslySetInnerHTML:{__html:M}})}else N=t;return o.jsx(p,{className:h,..._,children:N})},Dt=Vb;Dt.Caption=Yb,Dt.BodyRow=gu,Dt.HeaderCell=_u,Dt.Cell=qb,Dt.Row=gu,Dt.TH=_u,process.env.NODE_ENV!=="production"&&(Dt.Row&&console.warn("Table.Row is deprecated. Use Table.BodyRow instead."),Dt.TH&&console.warn("Table.TH is deprecated. Use Table.HeaderCell instead."));const Xb=B.forwardRef(({items:t,defaultActiveTab:e,activeTab:n,onTabChange:r,onTabFocus:a,onTabListBlur:i,onEscape:s,autoActivate:l=!0,className:u,id:c,"data-testid":d,...f},m)=>{const g=n!==void 0,[y,p]=B.useState(()=>e||t[0]?.id||""),h=g?n:y,_=B.useRef(null),N=B.useRef(new Map),j=B.useCallback($=>{g||p($),r?.($)},[g,r]),w=B.useCallback($=>{a?.($),l&&j($)},[a,l,j]),P=B.useCallback(($,k)=>{const v=t.filter(I=>!I.disabled).map(I=>I.id),A=v.indexOf(k);let D=null;switch($.key){case"ArrowLeft":D=A>0?A-1:v.length-1;break;case"ArrowRight":D=A<v.length-1?A+1:0;break;case"Home":D=0;break;case"End":D=v.length-1;break;case"Escape":$.preventDefault(),s?.();return;default:return}if(D!==null){$.preventDefault();const I=v[D],T=N.current.get(I);T&&(T.focus(),w(I))}},[t,w,s]),C=B.useCallback(($,k)=>{k?N.current.set($,k):N.current.delete($)},[]),M=B.useCallback($=>{const k=N.current.get($);k&&k.focus()},[]);B.useImperativeHandle(m,()=>({focusTab:M,getActiveTab:()=>h,getTabListElement:()=>_.current}),[M,h]);const S=B.useCallback($=>{const k=$.relatedTarget;_.current?.contains(k)||i?.()},[i]),x=_e("nhsuk-tabs",u);return o.jsxs("div",{className:x,id:c,"data-testid":d,...f,children:[o.jsx("h2",{className:"nhsuk-tabs__title",children:"Contents"}),o.jsx("div",{className:"nhsuk-tabs__list-container",ref:_,children:o.jsx("ul",{className:"nhsuk-tabs__list",role:"tablist",onBlur:S,children:t.map($=>{const k=$.id===h,v=$.disabled,A=_e("nhsuk-tabs__list-item",{"nhsuk-tabs__list-item--selected":k,"nhsuk-tabs__list-item--disabled":v});return o.jsx("li",{className:A,role:"presentation",children:o.jsx("button",{ref:D=>C($.id,D),className:"nhsuk-tabs__tab",role:"tab","aria-selected":k,"aria-controls":`${$.id}-panel`,id:`${$.id}-tab`,tabIndex:k?0:-1,disabled:v,onClick:()=>!v&&j($.id),onKeyDown:D=>!v&&P(D,$.id),onFocus:()=>!v&&w($.id),...$.attributes,children:$.label})},$.id)})})}),t.map($=>{const k=$.id===h;return o.jsx("div",{className:"nhsuk-tabs__panel",role:"tabpanel","aria-labelledby":`${$.id}-tab`,id:`${$.id}-panel`,hidden:!k,children:$.content},$.id)})]})}),bu=B.forwardRef(({summaryText:t,summaryHtml:e,text:n,html:r,open:a=!1,className:i="",id:s,children:l,...u},c)=>{const d=["nhsuk-details",i].filter(Boolean).join(" "),f=e?o.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:e}}):o.jsx("span",{className:"nhsuk-details__summary-text",children:t});let m;return l?m=l:r?m=o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(m=n),o.jsxs("details",{ref:c,id:s,className:d,open:a,...u,children:[o.jsx("summary",{className:"nhsuk-details__summary",tabIndex:0,children:f}),o.jsx("div",{className:"nhsuk-details__text",children:m})]})});bu.displayName="Details";const yu=B.forwardRef(({title:t,type:e,items:n,hidePrefix:r=!1,headingLevel:a=3,className:i,...s},l)=>{const u=["nhsuk-do-dont-list"];i&&u.push(i);const c=["nhsuk-list",e==="tick"?"nhsuk-list--tick":"nhsuk-list--cross"],d=()=>e==="cross"?o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:[o.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),o.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]}):o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})}),f=g=>e==="cross"&&!r?`do not ${g}`:g,m=()=>o.jsx(Bt,{level:a,className:"nhsuk-do-dont-list__label",text:t});return o.jsxs("div",{ref:l,className:u.join(" "),...s,children:[m(),o.jsx("div",{className:"nhsuk-do-dont-list__content--feature",children:o.jsx("ul",{className:c.join(" "),role:"list",children:n.map((g,y)=>o.jsxs("li",{children:[d(),f(g.item)]},y))})})]})});yu.displayName="DoDontList";const xu=B.forwardRef(({summaryText:t,summaryHtml:e,text:n,html:r,open:a=!1,className:i="",id:s,children:l,...u},c)=>{const d=["nhsuk-expander",i].filter(Boolean).join(" "),f=e?o.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:e}}):o.jsx("span",{className:"nhsuk-details__summary-text",children:t});let m;return l?m=l:r?m=o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(m=n),o.jsxs("details",{ref:c,id:s,className:d,open:a,...u,children:[o.jsx("summary",{className:"nhsuk-details__summary",children:f}),o.jsx("div",{className:"nhsuk-details__text",children:m})]})});xu.displayName="Expander";const vu=B.forwardRef(({items:t,idPrefix:e="task-list",className:n,...r},a)=>{const i=["nhsuk-task-list",n].filter(Boolean).join(" "),s=(l,u)=>{const c=u+1,d=`${e}-${c}-hint`,f=`${e}-${c}-status`,m=!!l.href,g=["nhsuk-task-list__item",m&&"nhsuk-task-list__item--with-link",l.classes].filter(Boolean).join(" "),y=[l.hint&&d,f].filter(Boolean).join(" ");return o.jsx(Kb,{item:l,itemClasses:g,hasLink:m,hintId:d,statusId:f,ariaDescribedBy:y},u)};return o.jsx("ul",{ref:a,className:i,...r,children:t.map(s)})}),Kb=({item:t,itemClasses:e,hasLink:n,hintId:r,statusId:a,ariaDescribedBy:i})=>{const s=()=>{const c=t.title.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:t.title.html}}):t.title.text,d=[n?"nhsuk-task-list__link":"",t.title.classes].filter(Boolean).join(" ");return n?o.jsx("a",{className:d,href:t.href,"aria-describedby":i,children:c}):o.jsx("div",{className:t.title.classes||"",children:c})},l=()=>t.hint?t.hint.html?o.jsx("div",{id:r,className:"nhsuk-task-list__hint",dangerouslySetInnerHTML:{__html:t.hint.html}}):o.jsx("div",{id:r,className:"nhsuk-task-list__hint",children:t.hint.text}):null,u=()=>{const c=["nhsuk-task-list__status",t.status.classes].filter(Boolean).join(" ");let d;return t.status.tag?d=o.jsx(qe,{...t.status.tag}):t.status.html?d=o.jsx("span",{dangerouslySetInnerHTML:{__html:t.status.html}}):d=t.status.text,o.jsx("div",{className:c,id:a,children:d})};return o.jsxs("li",{className:e,children:[o.jsxs("div",{className:"nhsuk-task-list__name-and-hint",children:[s(),l()]}),u()]})};vu.displayName="TaskList";const Zb=({heading:t,headingLevel:e=3,text:n,html:r,children:a,className:i,...s})=>{const l=/important/i.test(t),u=()=>a||(r?o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n?o.jsx("p",{children:n}):null),c=["nhsuk-warning-callout",i].filter(Boolean).join(" "),d=`h${e}`;return o.jsxs("div",{className:c,...s,children:[B.createElement(d,{className:"nhsuk-warning-callout__label"},l?o.jsxs(o.Fragment,{children:[t,o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"})]}):o.jsxs("span",{role:"text",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Important: "}),t]})),u()]})},Jb=({src:t,alt:e,caption:n,sizes:r,srcset:a,className:i,...s})=>{const l=["nhsuk-image",i].filter(Boolean).join(" ");return o.jsxs("figure",{className:l,...s,children:[o.jsx("img",{className:"nhsuk-image__img",src:t,alt:e,...r&&a?{sizes:r,srcSet:a}:{}}),n&&o.jsx("figcaption",{className:"nhsuk-image__caption",dangerouslySetInnerHTML:{__html:n}})]})},Qb=({dateRange:t,onPrev:e,onNext:n,onToday:r,density:a,onDensityChange:i,a11yMode:s,onA11yModeChange:l})=>o.jsxs("div",{className:"nhs-slot-matrix__toolbar",role:"group","aria-label":"Slot matrix controls",children:[o.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[o.jsx(at,{variant:"secondary",size:"small",onClick:e,"aria-label":"Previous date range",children:"Prev"}),o.jsx(at,{variant:"secondary",size:"small",onClick:r,"aria-label":"Jump to today",children:"Today"}),o.jsx(at,{variant:"secondary",size:"small",onClick:n,"aria-label":"Next date range",children:"Next"}),o.jsxs("span",{className:"nhs-slot-matrix__toolbar-daterange","aria-live":"polite",children:[t.start.toDateString()," â€“ ",t.end.toDateString()]})]}),o.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[o.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-density-select",children:"Density"}),o.jsx(Dr,{id:"slot-matrix-density-select",name:"slot-matrix-density",ariaLabel:"Change density",value:a,onChange:u=>i?.(u.target.value),options:[{value:"comfortable",text:"Comfortable"},{value:"compact",text:"Compact"}]}),o.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-mode-select",children:"Mode"}),o.jsx(Dr,{id:"slot-matrix-mode-select",name:"slot-matrix-mode",ariaLabel:"Change accessibility mode",value:s,onChange:u=>l?.(u.target.value),options:[{value:"grid",text:"Grid"},{value:"list",text:"List"}]})]})]}),ey=({items:t,orientation:e="horizontal"})=>o.jsx("div",{className:`nhs-slot-matrix__legend nhs-slot-matrix__legend--${e}`,role:"list","aria-label":"Slot legend",children:t.map(n=>o.jsx("div",{role:"listitem",className:"nhs-slot-matrix__legend-item",children:o.jsx(qe,{color:ty(n.status),text:n.label})},n.status))});function ty(t){switch(t){case"available":return"green";case"full":return"grey";case"overbook":return"orange";case"held":return"yellow";case"blocked":return"grey";default:return"default"}}const ny=({slots:t,sessions:e,value:n,defaultValue:r,onChange:a,selectionMode:i="single",a11yMode:s,className:l,style:u,getSlotAriaLabel:c,toolbar:d,enableDefaultToolbar:f=!0,legendItems:m,enableDefaultLegend:g=!0,legendPlacement:y="bottom",onA11yModeChange:p})=>{const[h,_]=B.useState("grid"),N=s||h,[j,w]=B.useState(r||[]),P=n??j,C=B.useMemo(()=>{const D=new Set;return t.forEach(I=>D.add(new Date(I.start).getTime())),Array.from(D).sort((I,T)=>I-T)},[t]),M=B.useMemo(()=>{const D={};return t.forEach(I=>{const T=new Date(I.start).getTime();D[T]||(D[T]={});const E=I.capacity-I.booked-(I.held||0);D[T][I.sessionId]={slot:I,remaining:E}}),D},[t]),S=B.useCallback(D=>{if(i==="single"){const I=[D.id];n||w(I),a?.(I,{lastAction:"select"})}else{const I=P.includes(D.id),T=I?P.filter(E=>E!==D.id):[...P,D.id];n||w(T),a?.(T,{lastAction:I?"deselect":"select"})}},[i,P,n,a]),x=B.useMemo(()=>m||(g?Array.from(new Set(t.map(I=>I.status))).map(I=>({status:I,label:I.charAt(0).toUpperCase()+I.slice(1)})):void 0),[m,g,t]),$=x?o.jsx(ey,{items:x,orientation:y==="left"||y==="right"?"vertical":"horizontal"}):null,k=D=>{s||_(D),p?.(D)},v=d||(f?o.jsx(Qb,{dateRange:{start:new Date,end:new Date},density:"comfortable",a11yMode:N,onA11yModeChange:k}):null),A=o.jsx("div",{style:u,className:_e(l),children:o.jsx(Ha,{className:_e("nhs-slot-matrix-grid-wrapper"),children:o.jsx(bn,{children:o.jsx(Qn,{width:"full",children:o.jsxs("div",{className:"nhs-slot-matrix",children:[v,y==="top"&&$,o.jsx("ul",{"aria-label":"Appointment slots list",children:t.map(D=>o.jsx("li",{children:o.jsxs("button",{type:"button",onClick:()=>S(D),"aria-pressed":P.includes(D.id),children:[Hr(new Date(D.start))," â€“ ",Hr(new Date(D.end))," (",D.status,")"]})},D.id))}),y==="bottom"&&$]})})})})});return N==="list"?A:o.jsx("div",{style:u,className:_e(l),children:o.jsx(Ha,{className:_e("nhs-slot-matrix-grid-wrapper"),children:o.jsx(bn,{children:o.jsx(Qn,{width:"full",children:o.jsxs("div",{className:"nhs-slot-matrix",children:[v,y==="top"&&$,o.jsxs("div",{role:"grid","aria-rowcount":C.length+1,"aria-colcount":e.length+1,children:[o.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[o.jsx("div",{role:"columnheader","aria-label":"Timebands",className:"nhs-slot-matrix__timeband-header"}),e.map(D=>o.jsx("div",{role:"columnheader","aria-label":`Session ${D.specialty}`,className:"nhs-slot-matrix__session-header",children:D.specialty},D.id))]}),C.map(D=>o.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[o.jsx("div",{role:"rowheader",className:"nhs-slot-matrix__timeband-header","aria-label":Hr(new Date(D)),children:Hr(new Date(D))}),e.map(I=>{const T=M[D]?.[I.id];if(!T)return o.jsx("div",{role:"gridcell",className:"nhs-slot-matrix__cell","aria-disabled":"true"},I.id);const{slot:E,remaining:ae}=T,z=P.includes(E.id),H=c?c(E):`Slot ${Hr(new Date(E.start))} ${E.status}${ae===0?" full":""}`;return o.jsx("button",{type:"button",role:"gridcell","data-status":E.status,className:_e("nhs-slot-matrix__cell",z&&"nhs-slot-matrix__cell--selected"),"aria-label":H,"aria-selected":z||void 0,onClick:()=>S(E),children:ae>0?`${ae} left`:"Full"},E.id)})]},D))]}),y==="bottom"&&$]})})})})})};function wu(t){return t<10?`0${t}`:`${t}`}function Hr(t){return`${wu(t.getHours())}:${wu(t.getMinutes())}`}const Su=({title:t,value:e,subtitle:n,variant:r="default",href:a,className:i="",ariaLabel:s,...l})=>{const u=["nhs-fdp-summary-card",`nhs-fdp-summary-card--${r}`,i].filter(Boolean).join(" "),c=o.jsxs(o.Fragment,{children:[o.jsx(Bt,{level:3,className:"nhs-fdp-summary-card__title",children:t}),o.jsx("p",{className:"nhs-fdp-summary-card__value",children:e}),n&&o.jsx("p",{className:"nhs-fdp-summary-card__subtitle",children:n})]});return a?o.jsx("a",{className:`${u} nhs-fdp-summary-card--clickable`,href:a,"aria-label":s||`${t}: ${e}`,...l,children:c}):o.jsx("div",{className:u,"aria-label":s,...l,children:c})},ry=({cards:t,className:e="",...n})=>{const r=["nhs-fdp-dashboard-summary-grid",e].filter(Boolean).join(" ");return o.jsx("div",{className:r,...n,children:o.jsx(Ha,{children:o.jsx(bn,{children:t.map((a,i)=>o.jsx(Qn,{width:"one-quarter",className:"nhs-fdp-dashboard-summary-grid__column","data-card-index":i,children:o.jsx(Su,{...a})},i))})})})},ku=B.forwardRef(({data:t,columns:e,sortConfig:n,onSort:r,selectedRowIndex:a,onRowSelect:i,id:s,testId:l,ariaLabel:u,ariaLabelledby:c,ariaDescribedby:d,className:f,tableClassName:m,bordered:g=!1,striped:y=!1,responsive:p=!1,tableType:h="default"},_)=>{const N=B.useRef(null),j=B.useRef(null),w=B.useRef(null);B.useImperativeHandle(_,()=>N.current,[]);const[P,C]=B.useState(0),[M,S]=B.useState(0),[x,$]=B.useState("headers"),[k,v]=B.useState("browse"),A=e.length,D=t.length,I=B.useMemo(()=>!n||n.length===0?t:[...t].sort((O,re)=>{for(const{key:G,direction:ce}of n){const ve=O[G],de=re[G];if(ve==null&&de==null)continue;if(ve==null)return 1;if(de==null)return-1;let he=0;if(typeof ve=="number"&&typeof de=="number"?he=ve-de:he=String(ve).localeCompare(String(de)),he!==0)return ce==="asc"?he:-he}return 0}),[t,n]),T=B.useCallback((O,re)=>{setTimeout(()=>{const G=N.current?.querySelector(`tbody tr:nth-child(${O+1}) td:nth-child(${re+1})`);G&&(G.focus(),typeof G.scrollIntoView=="function"&&G.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),E=B.useCallback(O=>{setTimeout(()=>{const re=N.current?.querySelector(`th:nth-child(${O+1})`);re&&(re.focus(),typeof re.scrollIntoView=="function"&&re.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),ae=B.useCallback(O=>{r?.(O)},[r]),z=B.useCallback(O=>{i?.(O)},[i]),H=B.useCallback(O=>{const{key:re}=O;switch(re){case"Enter":if(O.preventDefault(),x==="headers"&&k==="browse")v("navigate"),E(M);else if(x==="headers"&&k==="navigate"){const G=e[M];G&&ae(G.key)}else x==="cells"&&k==="browse"?(v("navigate"),T(P,M)):x==="cells"&&k==="navigate"&&z(P);break;case"Escape":O.preventDefault(),(x==="headers"&&k==="navigate"||x==="cells"&&k==="navigate")&&v("browse");break;case"ArrowLeft":if(O.preventDefault(),k==="navigate"||k==="browse"&&x==="headers"){if(x==="headers"){const G=Math.max(0,M-1);S(G),E(G)}else if(x==="cells"){const G=Math.max(0,M-1);S(G),T(P,G)}}break;case"ArrowRight":if(O.preventDefault(),k==="navigate"||k==="browse"&&x==="headers"){if(x==="headers"){const G=Math.min(A-1,M+1);S(G),E(G)}else if(x==="cells"){const G=Math.min(A-1,M+1);S(G),T(P,G)}}break;case"ArrowUp":if(O.preventDefault(),x==="cells"){if(k==="browse"){const G=Math.max(0,P-1);C(G),T(G,0),S(0)}else if(k==="navigate")if(P>0){const G=P-1;C(G),T(G,M)}else $("headers"),v("browse"),E(M)}break;case"ArrowDown":if(O.preventDefault(),x==="headers"&&k==="browse")$("cells"),C(0),S(0),T(0,0);else if(x==="cells"){const G=D-1;if(k==="browse"){const ce=Math.min(G,P+1);C(ce),T(ce,0),S(0)}else if(k==="navigate"&&P<G){const ce=P+1;C(ce),T(ce,M)}}break;case"Home":O.preventDefault(),x==="headers"?(S(0),E(0)):x==="cells"&&(O.ctrlKey?(C(0),S(0),T(0,0)):(S(0),T(P,0)));break;case"End":if(O.preventDefault(),x==="headers"){const G=A-1;S(G),E(G)}else if(x==="cells")if(O.ctrlKey){const G=D-1,ce=A-1;C(G),S(ce),T(G,ce)}else{const G=A-1;S(G),T(P,G)}break;case" ":if(O.preventDefault(),x==="headers"&&k==="navigate"){const G=e[M];G&&ae(G.key)}else x==="cells"&&k==="navigate"&&z(P);break}},[x,k,M,P,A,D,e,T,E,ae,z]);B.useEffect(()=>{const O=N.current;if(O)return O.addEventListener("keydown",H),()=>O.removeEventListener("keydown",H)},[H]);const U=_e("nhsuk-table",m,{"nhsuk-table--responsive":p,"nhsuk-table--bordered":g,"nhsuk-table--striped":y,"nhsuk-table--compact":h==="compact"},f);return o.jsxs("table",{ref:N,className:U,id:s,"data-testid":l,role:"grid","aria-label":u,"aria-labelledby":c,"aria-describedby":d,tabIndex:0,children:[o.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:o.jsx("tr",{ref:j,role:"row",children:e.map((O,re)=>{const G=n?.find(de=>de.key===O.key),ce=!!G,ve=x==="headers"&&M===re;return o.jsx("th",{className:_e("sortable-header",{"sortable-header--focused":ve}),role:"columnheader",tabIndex:ve?0:-1,onClick:()=>ae(O.key),onKeyDown:de=>{(de.key==="Enter"||de.key===" ")&&(de.preventDefault(),ae(O.key))},"aria-sort":ce?G?.direction==="asc"?"ascending":"descending":"none",children:o.jsxs("div",{className:"header-content",children:[o.jsx("span",{className:"header-label",children:O.label}),ce&&o.jsxs("span",{className:"sort-indicator","aria-hidden":"true",children:[n&&n.length>1&&o.jsx("span",{className:"sort-priority",children:n.findIndex(de=>de.key===O.key)+1}),o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",className:"sort-arrow",children:G?.direction==="asc"?o.jsx("path",{d:"M6 2L2 8h8L6 2z"}):o.jsx("path",{d:"M6 10L2 4h8L6 10z"})})]})]})},O.key)})})}),o.jsx("tbody",{ref:w,className:"nhsuk-table__body",role:"rowgroup",children:I.map((O,re)=>{const G=a===re,ce=x==="cells"&&P===re;return o.jsx("tr",{role:"row",className:_e("data-row",{"data-row--selected":G,"data-row--focused":ce}),"aria-selected":G,children:e.map((ve,de)=>{const he=ve.tableRenderer?ve.tableRenderer(O):ve.render?ve.render(O):O[ve.key],ee=x==="cells"&&P===re&&M===de,ie=()=>typeof he=="boolean"?o.jsxs(o.Fragment,{children:[o.jsx("span",{"aria-hidden":"true",children:he?"âœ“":"âœ—"}),o.jsx("span",{className:"sr-only",children:he?"Yes":"No"})]}):String(he??"");return o.jsx("td",{role:"gridcell",className:_e("data-cell",{"data-cell--focused":ee}),tabIndex:ee?0:-1,onClick:()=>z(re),children:ie()},ve.key)})},re)})})]})});ku.displayName="AriaDataGrid";const Cu=({sortConfig:t,columns:e,onSortChange:n,className:r="",emptyDescription:a="No sorting applied",activeDescription:i,showReset:s=!0,showHelp:l=!0,disabled:u=!1,ariaLabel:c="Sort configuration",ariaDescribedBy:d})=>{const f=B.useRef(null),m=B.useRef(null),g=B.useRef(null),y=B.useCallback((x,$)=>{u||(m.current=$,x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",$))},[u]),p=B.useCallback((x,$)=>{u||m.current===$||(x.preventDefault(),x.dataTransfer.dropEffect="move",g.current=$)},[u]),h=B.useCallback((x,$)=>{if(u)return;x.preventDefault();const k=m.current;if(!k||k===$)return;const v=t.findIndex(D=>D.key===k),A=t.findIndex(D=>D.key===$);if(v!==-1&&A!==-1){const D=[...t],[I]=D.splice(v,1);D.splice(A,0,I),n(D)}m.current=null,g.current=null},[u,t,n]),_=B.useCallback(()=>{m.current=null,g.current=null},[]),N=B.useCallback(x=>{const $=e.find(k=>k.key===x);return $?$.label:x},[e]),j=B.useCallback(x=>["red","orange","blue","aqua-green","grey"][x]||"grey",[]),w=B.useCallback(x=>{if(u)return;const $=t.map(k=>k.key===x?{...k,direction:k.direction==="asc"?"desc":"asc"}:k);n($)},[t,n,u]),P=B.useCallback(x=>{if(u)return;const $=t.filter(k=>k.key!==x);n($)},[t,n,u]),C=B.useCallback(()=>{u||n([])},[n,u]),M=()=>{if(t.length===0)return a;if(i)return i;const x=t.map(($,k)=>{const v=$.direction==="asc"?"ascending":"descending";return`${k+1}. ${N($.key)} (${v})`});if(x.length===1)return`Sorted by: ${x[0]}`;if(x.length===2)return`Sorted by: ${x.join(" and ")}`;{const $=x.pop();return`Sorted by: ${x.join(", ")}, and ${$}`}},S=B.useMemo(()=>{const x=["sort-description"];return l&&x.push("sort-help"),d&&x.push(d),x.join(" ")},[l,d]);return t.length===0?o.jsxs("div",{className:`sort-status-control ${r}`,children:[o.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:a}),l&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]}):o.jsxs("div",{className:`sort-status-control ${r}`,children:[o.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:M()}),o.jsxs("div",{className:"sort-status-container",children:[o.jsx("div",{ref:f,className:"sort-status-control__tags",role:"list","aria-label":c,"aria-describedby":S,children:t.map((x,$)=>o.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",draggable:!u,onDragStart:k=>y(k,x.key),onDragOver:k=>p(k,x.key),onDrop:k=>h(k,x.key),onDragEnd:_,onClick:()=>w(x.key),style:{cursor:u?"default":"pointer"},title:u?"":`Click to toggle sort direction. Currently ${x.direction==="asc"?"ascending":"descending"}`,"data-key":x.key,children:o.jsx(qe,{color:j($),className:"sort-status-control__tag",closable:!0,onClose:()=>P(x.key),disabled:u,children:o.jsxs("div",{className:"sort-status-control__tag-content",children:[o.jsx("div",{className:"sort-status-control__drag-handle",title:"Drag to reorder",children:"â‹®â‹®"}),o.jsx("div",{className:`sort-status-control__priority-badge sort-priority sort-priority--priority-${$+1}`,children:$+1}),o.jsx("span",{className:"sort-status-control__tag-label",children:N(x.key)}),o.jsx("button",{type:"button",className:"sort-status-control__direction-button",onClick:k=>{k.stopPropagation(),w(x.key)},disabled:u,"aria-label":`Toggle sort direction for ${N(x.key)}. Currently ${x.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:o.jsx("span",{className:`sort-status-control__direction-icon sort-status-control__direction-icon--${x.direction}`,children:o.jsx("svg",{className:`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${x.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})})})]})})},x.key))}),s&&o.jsx("div",{className:"sort-status-control__actions",children:o.jsx(at,{variant:"secondary",onClick:C,disabled:u,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})})]}),l&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]})};function ay(t,e){switch(e.type){case"SET_SELECTED_INDEX":return{...t,selectedIndex:e.payload};case"SET_TAB_LOADING":const n=[...t.tabLoadingStates];return n[e.payload.tabIndex]=e.payload.isLoading,{...t,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...t.tabErrors];return r[e.payload.tabIndex]=e.payload.error,{...t,tabErrors:r};case"SET_SORT":return{...t,sortConfig:e.payload};case"SET_SELECTED_ROWS":const a=[...t.selectedRows];return a[e.payload.tabIndex]=e.payload.rowIndices,{...t,selectedRows:a};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...t,globalSelectedRowData:e.payload};case"SET_FILTERS":return{...t,filters:e.payload};case"ADJUST_ARRAYS":const{newLength:i}=e.payload,s=new Array(i).fill(!1),l=new Array(i).fill(null),u=new Array(i).fill([]);for(let c=0;c<Math.min(t.tabLoadingStates.length,i);c++)s[c]=t.tabLoadingStates[c],l[c]=t.tabErrors[c],u[c]=t.selectedRows[c];return{...t,tabLoadingStates:s,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(t.tabLoadingStates.length).fill(!1),tabErrors:new Array(t.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(t.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return t}}const si=B.forwardRef(function(e,n){const{dataConfig:r={},tabPanels:a,selectedIndex:i,onTabChange:s,onGlobalRowSelectionChange:l,ariaLabel:u,ariaDescription:c,className:d="",disabled:f=!1,orientation:m="horizontal",id:g,isLoading:y=!1,loadingComponent:p,error:h=null,errorComponent:_,"data-testid":N,actions:j,actionsMinGap:w=16,forceActionsAbove:P=!1}=e,M=B.useRef(g||`aria-tabs-datagrid-${Math.random().toString(36).slice(2,9)}`).current,S=typeof c=="string"&&c.trim()!==""&&!/\s/.test(c),x=`${M}-description`,$=`${M}-navigation-help`,{dataComparator:k=(R,te)=>JSON.stringify(R)===JSON.stringify(te),filterFunction:v=R=>R,booleanRenderer:A=R=>R?"âœ“":"âœ—"}=r||{},D=i!==void 0,I=i??0,[T,E]=B.useState({focusArea:"tabs",focusedTabIndex:I,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}),ae=B.useMemo(()=>({selectedIndex:I,tabLoadingStates:new Array(a.length).fill(!1),tabErrors:new Array(a.length).fill(null),sortConfig:[],selectedRows:new Array(a.length).fill([]),globalSelectedRowData:null,filters:void 0}),[I]),[z,H]=B.useReducer(ay,ae);B.useEffect(()=>{const R=z.tabLoadingStates.length,te=a.length;R!==te&&H({type:"ADJUST_ARRAYS",payload:{newLength:te}})},[a.length]),B.useEffect(()=>{D&&H({type:"SET_SELECTED_INDEX",payload:I})},[I,D]),B.useEffect(()=>{E(R=>({...R,focusArea:"tabs",focusedTabIndex:z.selectedIndex,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}))},[z.selectedIndex]),B.useEffect(()=>{l&&l(z.globalSelectedRowData)},[z.globalSelectedRowData,l]);const U=B.useCallback((R,te)=>k(R,te),[k]),O=B.useCallback(R=>{R>=0&&R<a.length&&!a[R].disabled&&(H({type:"SET_SELECTED_INDEX",payload:R}),E(te=>({...te,focusedTabIndex:R,focusArea:"tabs"})),s?.(R))},[a,s]),re=B.useRef(!1),G=B.useCallback((R,te)=>{if(!te?.force&&!re.current&&R===0){re.current=!0;return}re.current=!0,setTimeout(()=>{const ne=ce.current[R],J=ne?.parentElement;if(ne&&J){const Q=ne.offsetLeft,oe=ne.offsetWidth,ue=J.clientWidth,we=Q-ue/2+oe/2;try{J.scrollTo({left:Math.max(0,we),behavior:"smooth"})}catch{ne.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}}else process.env.SILENCE_SCROLL_DEBUG||console.debug("[AriaTabsDataGrid] Missing elements for scroll",{tabElementExists:!!ne,tabListElementExists:!!J})},50)},[]),ce=B.useRef([]),ve=B.useRef([]),de=B.useCallback((R,te)=>{const ne=z.sortConfig||[],J=ne.find(ue=>ue.key===te);let Q;J?J.direction==="asc"?Q=ne.map(ue=>ue.key===te?{...ue,direction:"desc"}:ue):Q=ne.filter(ue=>ue.key!==te):Q=[...ne,{key:te,direction:"asc"}],H({type:"SET_SORT",payload:Q}),a[R].onSort?.(te)},[z.sortConfig,a]),he=B.useCallback(R=>{setTimeout(()=>{const te=document.querySelector(`[data-tab-panel="${z.selectedIndex}"] th:nth-child(${R+1})`);te&&te.focus()},0)},[z.selectedIndex]),ee=B.useCallback(R=>A(R),[A]),ie=B.useCallback((R,te)=>{setTimeout(()=>{const ne=document.querySelector(`[data-tab-panel="${z.selectedIndex}"] tbody tr:nth-child(${R+1}) td:nth-child(${te+1})`);ne&&ne.focus()},0)},[z.selectedIndex]);B.useEffect(()=>{T.isGridActive&&(T.focusArea==="headers"?setTimeout(()=>{he(T.focusedHeaderIndex)},0):T.focusArea==="cells"&&setTimeout(()=>{ie(T.focusedRowIndex,T.focusedColumnIndex)},0))},[T.focusArea,T.isGridActive,T.focusedHeaderIndex,T.focusedRowIndex,T.focusedColumnIndex,he,ie]),B.useEffect(()=>{G(z.selectedIndex)},[z.selectedIndex,G]);const L=B.useCallback((R,te)=>{const{key:ne}=R,J=a[z.selectedIndex],Q=J?.columns.length||0;switch(ne){case"ArrowLeft":R.preventDefault();const oe=Math.max(0,te-1);E(Ne=>({...Ne,focusedHeaderIndex:oe})),he(oe);break;case"ArrowRight":R.preventDefault();const ue=Math.min(Q-1,te+1);E(Ne=>({...Ne,focusedHeaderIndex:ue})),he(ue);break;case"ArrowUp":R.preventDefault(),E(Ne=>({...Ne,focusArea:"tabs",focusedTabIndex:z.selectedIndex})),G(z.selectedIndex),ce.current[z.selectedIndex]?.focus();break;case"ArrowDown":R.preventDefault(),E(Ne=>({...Ne,focusArea:"cells",focusedRowIndex:0,focusedColumnIndex:te,isGridActive:!0}));break;case"Home":R.preventDefault(),E(Ne=>({...Ne,focusedHeaderIndex:0})),he(0);break;case"End":R.preventDefault();const we=Q-1;E(Ne=>({...Ne,focusedHeaderIndex:we})),he(we);break;case"Enter":case" ":R.preventDefault();const Te=J?.columns[te]?.key;Te&&de(z.selectedIndex,Te);break}},[a,z.selectedIndex,de,E,he,ie,ce]),F=B.useCallback((R,te,ne)=>{const{key:J}=R,Q=a[z.selectedIndex],oe=Q?.data.length||0,ue=Q?.columns.length||0;switch(J){case"ArrowUp":if(R.preventDefault(),te===0)E(xe=>({...xe,focusArea:"headers",focusedHeaderIndex:ne,isGridActive:!1})),he(ne);else{const xe=te-1;E(Ce=>({...Ce,focusedRowIndex:xe})),ie(xe,ne)}break;case"ArrowDown":R.preventDefault();const we=Math.min(oe-1,te+1);E(xe=>({...xe,focusedRowIndex:we})),ie(we,ne);break;case"ArrowLeft":R.preventDefault();const Te=Math.max(0,ne-1);E(xe=>({...xe,focusedColumnIndex:Te})),ie(te,Te);break;case"ArrowRight":R.preventDefault();const Ne=Math.min(ue-1,ne+1);E(xe=>({...xe,focusedColumnIndex:Ne})),ie(te,Ne);break;case"Home":R.preventDefault(),R.ctrlKey?(E(xe=>({...xe,focusedRowIndex:0,focusedColumnIndex:0})),ie(0,0)):(E(xe=>({...xe,focusedColumnIndex:0})),ie(te,0));break;case"End":if(R.preventDefault(),R.ctrlKey){const xe=oe-1,Ce=ue-1;E(Le=>({...Le,focusedRowIndex:xe,focusedColumnIndex:Ce})),ie(xe,Ce)}else{const xe=ue-1;E(Ce=>({...Ce,focusedColumnIndex:xe})),ie(te,xe)}break;case"Enter":case" ":if(R.preventDefault(),Q&&Q.data[te]){const xe=Q.data.some(He=>"ews_data"in He)?v(Q.data,z.filters):Q.data,Ce=z.sortConfig;let Le=xe;if(Ce&&Ce.length>0&&(Le=[...xe].sort((He,Me)=>{for(const{key:ze,direction:$n}of Ce){let mn=He[ze],nn=Me[ze];const rt=Q.columns.find(Pa=>Pa.key===ze);if(rt?.tableRenderer?(mn=rt.tableRenderer(He),nn=rt.tableRenderer(Me)):rt?.render&&(mn=rt.render(He),nn=rt.render(Me)),mn==null&&nn==null)continue;if(mn==null)return $n==="asc"?-1:1;if(nn==null)return $n==="asc"?1:-1;let lt=0;if(typeof mn=="number"&&typeof nn=="number"?lt=mn-nn:lt=String(mn).localeCompare(String(nn),void 0,{numeric:!0,sensitivity:"base"}),lt!==0)return $n==="asc"?lt:-lt}return 0})),Le[te]){const He=Le[te],ze=z.globalSelectedRowData&&U(z.globalSelectedRowData,He)?null:He;H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:ze})}}break}},[a,z.selectedIndex,z.filters,z.sortConfig,v,U,H,E,he,ie]),W=B.useCallback((R,te)=>v(R,te),[v]);if(B.useImperativeHandle(n,()=>({selectTab:R=>{R>=0&&R<a.length&&(H({type:"SET_SELECTED_INDEX",payload:R}),s?.(R))},refreshData:R=>{console.log("Refreshing data for tab:",R??"all")},exportData:R=>{const te=R??z.selectedIndex,ne=a[te];return ne?ne.data:[]},getSelectedRows:R=>z.globalSelectedRowData?[]:[],clearSelection:R=>{H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:null})},applyFilters:R=>{H({type:"SET_FILTERS",payload:R})}}),[z.selectedIndex,z.selectedRows,a,s]),y)return o.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--loading ${d}`,"data-testid":N,children:p||o.jsx("div",{className:"aria-tabs-datagrid__loading",children:o.jsx("div",{className:"nhsuk-spinner",role:"status","aria-label":"Loading data",children:o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Loading..."})})})});if(h)return o.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--error ${d}`,"data-testid":N,children:_||o.jsxs("div",{className:"aria-tabs-datagrid__error",role:"alert",children:[o.jsx("h3",{className:"nhsuk-error-summary__title",children:"Error loading data"}),o.jsx("p",{children:h})]})});const Z=B.useRef(null),Y=B.useRef(null),X=B.useRef(null),[fe,Se]=B.useState(!0);B.useEffect(()=>{if(!j){Se(!1);return}if(P){Se(!1);return}function R(){if(!Z.current||!Y.current||!X.current)return;const J=Z.current.clientWidth,Q=Array.from(Y.current.querySelectorAll(":scope > .aria-tabs-datagrid__tab")),oe=Q.reduce((Ne,xe)=>Ne+xe.offsetWidth,0),ue=X.current.offsetWidth,we=Math.max(8*(Q.length-1),0),Te=oe+we+ue+w<=J;Se(Te)}const te=requestAnimationFrame(()=>R()),ne=new ResizeObserver(()=>R());return Z.current&&ne.observe(Z.current),Y.current&&ne.observe(Y.current),()=>{cancelAnimationFrame(te),ne.disconnect()}},[j,w,P,a.length]);const ge=X,pe=B.useCallback(()=>ge.current?Array.from(ge.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(R=>!R.hasAttribute("disabled")):[],[]),q=B.useCallback(R=>{const te=pe();if(!te.length)return;const ne=Math.max(0,Math.min(R,te.length-1));te[ne].focus(),E(J=>({...J,focusArea:"actions",focusedActionIndex:ne}))},[pe]),V=B.useCallback(()=>q(0),[q]),se=B.useCallback((R,te)=>{const{key:ne}=R,J=a.length-1;switch(ne){case"ArrowUp":{j&&!fe&&(R.preventDefault(),V());break}case"ArrowLeft":{R.preventDefault();const Q=te>0?te-1:J;O(Q),G(Q),ce.current[Q]?.focus();break}case"ArrowRight":{if(R.preventDefault(),te===J&&j&&fe){V();return}const Q=te<J?te+1:0;O(Q),G(Q),ce.current[Q]?.focus();break}case"ArrowDown":{R.preventDefault(),E(Q=>({...Q,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));break}case"Home":{R.preventDefault(),O(0),G(0),ce.current[0]?.focus();break}case"End":{R.preventDefault(),O(J),G(J),ce.current[J]?.focus();break}case"Enter":case" ":{R.preventDefault(),O(te);break}case"Tab":{!R.shiftKey&&te===J&&j&&fe&&V();break}}},[a.length,O,G,j,fe,V]),le=B.useCallback(R=>{const{key:te}=R,ne=pe();if(!ne.length)return;const J=ne.findIndex(Q=>Q===document.activeElement);switch(te){case"ArrowLeft":{if(fe)if(J>0)R.preventDefault(),q(J-1);else{R.preventDefault();const Q=a.length-1;O(Q),G(Q),ce.current[Q]?.focus(),E(oe=>({...oe,focusArea:"tabs",focusedTabIndex:Q}))}break}case"ArrowRight":{fe&&(J<ne.length-1?(R.preventDefault(),q(J+1)):(R.preventDefault(),O(0),G(0),ce.current[0]?.focus(),E(Q=>({...Q,focusArea:"tabs",focusedTabIndex:0}))));break}case"ArrowDown":{if(fe)R.preventDefault(),E(Q=>({...Q,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));else{R.preventDefault();const Q=z.selectedIndex;ce.current[Q]?.focus(),E(oe=>({...oe,focusArea:"tabs",focusedTabIndex:Q}))}break}}},[pe,fe,q,a.length,O,G,z.selectedIndex]);return o.jsxs("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--${m} ${d}`,id:g,"data-testid":N,ref:Z,children:[c&&!S&&o.jsx("div",{id:x,className:"nhsuk-u-visually-hidden",children:c}),o.jsx("div",{className:"aria-tabs-datagrid__navigation-help sr-only",id:$,children:"Keyboard navigation: Use Tab to move between tabs and grid. Arrow keys navigate within tabs and grid cells. Enter activates tabs and sorts columns. Arrow Down from tabs moves to table headers. Arrow Down from headers moves to table cells. Use Arrow keys to navigate between cells."}),o.jsx(Cu,{sortConfig:z.sortConfig||[],columns:a.flatMap(R=>R.columns.map(te=>({key:te.key,label:te.label}))).filter((R,te,ne)=>ne.findIndex(J=>J.key===R.key)===te),onSortChange:R=>{H({type:"SET_SORT",payload:R})},ariaLabel:"Data grid sort configuration"}),j&&!fe&&o.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above",ref:X,role:"toolbar","aria-label":"Additional actions",onKeyDown:le,children:j}),o.jsxs("div",{className:`aria-tabs-datagrid__tabs-wrapper ${fe?"aria-tabs-datagrid__tabs-wrapper--inline-actions":""}`,children:[o.jsx("div",{role:"tablist","aria-label":u,"aria-describedby":c?S?c:x:$,"aria-orientation":m,className:"aria-tabs-datagrid__tabs",ref:Y,children:a.map((R,te)=>{const ne=te===z.selectedIndex,J=R.disabled||f;return o.jsxs("button",{role:"tab",id:`tab-${R.id}`,"aria-controls":`panel-${R.id}`,"aria-selected":ne,"aria-disabled":J,tabIndex:ne?0:-1,ref:Q=>{ce.current[te]=Q},onClick:()=>O(te),onKeyDown:Q=>se(Q,te),disabled:J,className:["aria-tabs-datagrid__tab",ne?"aria-tabs-datagrid__tab--selected":"",J?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[o.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:R.label}),z.tabLoadingStates[te]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),z.tabErrors[te]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},R.id)})}),j&&fe&&o.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline",ref:X,role:"toolbar","aria-label":"Additional actions",onKeyDown:le,children:j})]}),a.map((R,te)=>{const ne=te===z.selectedIndex;return o.jsx("div",{role:"tabpanel",id:`panel-${R.id}`,"aria-labelledby":`tab-${R.id}`,tabIndex:0,hidden:!ne,ref:J=>{ve.current[te]=J},className:`aria-tabs-datagrid__panel ${R.className||""}`,"data-tab-panel":te,children:ne&&(()=>{const J=R.data.some(oe=>"ews_data"in oe)?W(R.data,z.filters):R.data,Q=B.useMemo(()=>{const oe=z.sortConfig;return!oe||oe.length===0?J:[...J].sort((ue,we)=>{for(const{key:Te,direction:Ne}of oe){let xe=ue[Te],Ce=we[Te];const Le=R.columns.find(Me=>Me.key===Te);if(Le?.tableRenderer?(xe=Le.tableRenderer(ue),Ce=Le.tableRenderer(we)):Le?.render&&(xe=Le.render(ue),Ce=Le.render(we)),xe==null&&Ce==null)continue;if(xe==null)return 1;if(Ce==null)return-1;let He=0;if(typeof xe=="number"&&typeof Ce=="number"?He=xe-Ce:typeof xe=="boolean"&&typeof Ce=="boolean"?He=xe===Ce?0:xe?1:-1:He=String(xe).localeCompare(String(Ce),void 0,{numeric:!0,sensitivity:"base"}),He!==0)return Ne==="asc"?He:-He}return 0})},[J,z.sortConfig,R.columns]);return o.jsxs("table",{className:"nhsuk-table aria-tabs-datagrid__grid",role:"grid","aria-label":R.ariaLabel,"aria-describedby":R.ariaDescription?`panel-${R.id}-description`:void 0,children:[R.ariaDescription&&o.jsx("caption",{className:"nhsuk-u-visually-hidden",id:`panel-${R.id}-description`,children:R.ariaDescription}),o.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:o.jsx("tr",{role:"row",children:R.columns.map((oe,ue)=>{const we=z.sortConfig?.find(xe=>xe.key===oe.key),Te=!!we,Ne=T.focusArea==="headers"&&T.focusedHeaderIndex===ue;return o.jsx("th",{className:`sortable-header ${Ne?"sortable-header--focused":""} ${Te?"sortable-header--sorted":""}`,role:"columnheader",tabIndex:Ne?0:-1,onClick:()=>de(te,oe.key),onKeyDown:xe=>L(xe,ue),"aria-sort":Te?we?.direction==="asc"?"ascending":"descending":"none",children:o.jsxs("div",{className:"header-content",children:[o.jsx("span",{className:"header-label",children:oe.label}),o.jsxs("div",{className:`sort-indicator-container ${Te?`sort-indicator--${we?.direction}`:""}`,children:[z.sortConfig&&z.sortConfig.length>0&&z.sortConfig.findIndex(xe=>xe.key===oe.key)!==-1&&o.jsx("span",{className:`sort-priority sort-priority--priority-${z.sortConfig.findIndex(xe=>xe.key===oe.key)+1}`,"data-priority":z.sortConfig.findIndex(xe=>xe.key===oe.key)+1,title:`Sort priority: ${z.sortConfig.findIndex(xe=>xe.key===oe.key)+1}`,children:z.sortConfig.findIndex(xe=>xe.key===oe.key)+1}),Te&&o.jsx("svg",{className:`nhsuk-icon sort-arrow sort-arrow--${we?.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})]})]})},oe.key)})})}),o.jsx("tbody",{className:"nhsuk-table__body",role:"rowgroup",children:Q.map((oe,ue)=>{const we=z.globalSelectedRowData&&U(z.globalSelectedRowData,oe),Te=T.focusArea==="cells"&&T.focusedRowIndex===ue;return o.jsx("tr",{role:"row",className:`data-row ${we?"data-row--selected":""} ${Te?"data-row--focused":""}`,"aria-selected":we,children:R.columns.map((Ne,xe)=>{const Ce=oe[Ne.key];let Le;Ne.tableRenderer?Le=Ne.tableRenderer(oe):Ne.render?Le=Ne.render(oe):Le=Ce;const He=T.focusArea==="cells"&&T.focusedRowIndex===ue&&T.focusedColumnIndex===xe,Me=()=>{if(Ne.customRenderer){const ze=Ne.customRenderer(Ce,oe);return o.jsx("span",{className:"data-cell__custom","data-custom-rendered":"true",children:ze})}return typeof Ce=="boolean"&&Le===Ce?o.jsxs(o.Fragment,{children:[ee(Ce),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:Ce?"Yes":"No"})]}):B.isValidElement(Le)||typeof Le!="object"?Le??"":Le};return o.jsx("td",{role:"gridcell",className:`data-cell ${He?"data-cell--focused":""}`,tabIndex:He?0:-1,onClick:()=>{const $n=z.globalSelectedRowData&&U(z.globalSelectedRowData,oe)?null:oe;H({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:$n})},onKeyDown:ze=>F(ze,ue,xe),children:Me()},Ne.key)})},ue)})})]})})()},R.id)})]})}),oi={asc:"â†‘",desc:"â†“"},iy=t=>[...t].sort((e,n)=>e.priority-n.priority);function Es(t){return t.map((e,n)=>({...e,priority:n}))}function sy(t){return t.length>0?Math.max(...t.map(e=>e.priority)):-1}function oy(t,e){const n=e.find(r=>r.id===t);return n?n.priority>0:!1}function ly(t,e){const n=e.find(a=>a.id===t),r=sy(e);return n?n.priority<r:!1}const cy=({sortConfig:t,onSortChange:e,className:n="",emptyDescription:r="No sorting applied",activeDescription:a,showReset:i=!0,showHelp:s=!0,disabled:l=!1,ariaLabel:u="Sort configuration",ariaDescribedBy:c})=>{const d=B.useMemo(()=>iy(t),[t]),f=B.useCallback(N=>{if(l)return;const j=t.map(w=>w.id===N?{...w,direction:w.direction==="asc"?"desc":"asc"}:w);e(j)},[t,e,l]),m=B.useCallback(N=>{if(l)return;const j=t.findIndex(P=>P.id===N);if(j<=0)return;const w=[...t];[w[j],w[j-1]]=[w[j-1],w[j]],e(Es(w))},[t,e,l]),g=B.useCallback(N=>{if(l)return;const j=t.findIndex(P=>P.id===N);if(j>=t.length-1||j===-1)return;const w=[...t];[w[j],w[j+1]]=[w[j+1],w[j]],e(Es(w))},[t,e,l]),y=B.useCallback(N=>{if(l)return;const j=t.filter(w=>w.id!==N);e(Es(j))},[t,e,l]),p=B.useCallback(()=>{l||e([])},[e,l]),h=()=>{if(t.length===0)return r;if(a)return a;const N=d.map((j,w)=>{const P=j.direction==="asc"?"ascending":"descending";return`${w+1}. ${j.label} (${P})`});if(N.length===1)return`Sorted by: ${N[0]}`;if(N.length===2)return`Sorted by: ${N.join(" and ")}`;{const j=N.pop();return`Sorted by: ${N.join(", ")}, and ${j}`}},_=B.useMemo(()=>{const N=["sort-description"];return s&&N.push("sort-help"),c&&N.push(c),N.join(" ")},[s,c]);return t.length===0?o.jsx("div",{className:`sort-status-control sort-status-control--empty ${n}`,children:o.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:h()})}):o.jsxs("div",{className:`sort-status-control ${n}`,children:[o.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:h()}),o.jsxs("div",{className:"sort-status-control__tags",role:"list","aria-label":u,"aria-describedby":_,children:[o.jsx("div",{className:"sort-status-control__tags-label",children:"Current sorting:"}),d.map(N=>o.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",children:o.jsx(qe,{text:"",color:"blue",className:"sort-status-control__tag",closable:!0,onClose:()=>y(N.id),disabled:l,children:o.jsxs("div",{className:"sort-status-control__tag-content",children:[o.jsx("span",{className:"sort-status-control__tag-priority",children:N.priority+1}),o.jsx("span",{className:"sort-status-control__tag-label",children:N.label}),o.jsx("button",{type:"button",className:"sort-status-control__tag-direction",onClick:()=>f(N.id),disabled:l,"aria-label":`Toggle sort direction for ${N.label}. Currently ${N.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:N.direction==="asc"?oi.asc:oi.desc}),o.jsxs("div",{className:"sort-status-control__tag-actions",children:[o.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>m(N.id),disabled:l||!oy(N.id,t),"aria-label":`Move ${N.label} sort up in priority`,title:"Move up in priority",children:"â–²"}),o.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>g(N.id),disabled:l||!ly(N.id,t),"aria-label":`Move ${N.label} sort down in priority`,title:"Move down in priority",children:"â–¼"})]})]})})},N.id))]}),i&&o.jsx("div",{className:"sort-status-control__actions",children:o.jsx(at,{variant:"secondary",onClick:p,disabled:l,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})}),s&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsxs("small",{children:["Click ",oi.asc,"/",oi.desc," to toggle ascending/descending. Use â–²/â–¼ to change sort priority. Click Ã— to remove a sort."]})})]})},li=(t,e)=>e.map(n=>({id:n.id,label:n.label,data:n.filter?n.filter(t):t,columns:n.columns.map(r=>({key:r.key,label:r.label,render:r.render,customRenderer:r.customRenderer})),sortConfig:n.sortConfig,ariaLabel:n.ariaLabel||`${n.label} Data Grid`,ariaDescription:n.ariaDescription||`Data grid showing ${n.label.toLowerCase()}`,className:n.className,disabled:n.disabled})),Bs=[{value:!0,icon:o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"100%",height:"34",children:o.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})})},{value:!1,icon:o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"100%",height:"34",children:[o.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),o.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]})}],uy=(t,e)=>!t||!e?t===e:t.name&&t.bed_name&&e.name&&e.bed_name?t.name===e.name&&t.bed_name===e.bed_name:JSON.stringify(t)===JSON.stringify(e),dy=(t,e)=>e?t.filter(n=>{if(e.ewsScoreRange){const[r,a]=e.ewsScoreRange;if(n.ews_score<r||n.ews_score>a)return!1}return!(e.wards&&e.wards.length>0&&!e.wards.includes(n.ward_name)||e.specialties&&e.specialties.length>0&&!e.specialties.includes(n.speciality)||e.dischargeStatuses&&e.dischargeStatuses.length>0&&!e.dischargeStatuses.includes(n.early_discharge_notification)||e.avpuLevels&&e.avpuLevels.length>0&&!e.avpuLevels.includes(n.ews_data.avpu)||e.medicallyOptimised!==null&&e.medicallyOptimised!==void 0&&n.medically_optimised!==e.medicallyOptimised||e.fastTrack!==null&&e.fastTrack!==void 0&&n.fast_track!==e.fastTrack)}):t,fy=t=>{if(typeof t=="boolean"){const n=Bs.find(r=>r.value===t);return n?n.icon:null}const e=Bs.find(n=>n.value===t);return e?e.icon:String(t)},hy=t=>`${t.name}-${t.bed_name}`,py=()=>({overview:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"bed_name",label:"Bed"},{key:"ews_score",label:"EWS Score"},{key:"speciality",label:"Specialty"},{key:"consultant",label:"Consultant"}],vitals:[{key:"name",label:"Patient Name"},{key:"ews_score",label:"EWS Score"},{key:"respiratory_rate_bpm",label:"Respiratory Rate",render:t=>t.ews_data.respiratory_rate_bpm},{key:"sp02",label:"SpO2 %",render:t=>t.ews_data.sp02},{key:"temperature",label:"Temperature Â°C",render:t=>t.ews_data.temperature},{key:"systolic_bp",label:"Systolic BP",render:t=>t.ews_data.systolic_bp},{key:"heart_rate",label:"Heart Rate",render:t=>t.ews_data.heart_rate},{key:"avpu",label:"AVPU",render:t=>t.ews_data.avpu.toUpperCase()}],discharge:[{key:"name",label:"Patient Name"},{key:"anticipated_discharge_date",label:"Anticipated Discharge",render:t=>new Date(t.anticipated_discharge_date).toLocaleDateString()},{key:"early_discharge_notification",label:"Discharge Status"},{key:"medically_optimised",label:"Medically Optimised"},{key:"criteria_to_reside",label:"Criteria to Reside"},{key:"fast_track",label:"Fast Track"},{key:"transport_status",label:"Transport Status"},{key:"pathway",label:"Pathway"}],logistics:[{key:"name",label:"Patient Name"},{key:"ward_name",label:"Ward"},{key:"room_name",label:"Room"},{key:"bed_name",label:"Bed"},{key:"bed_type",label:"Bed Type"},{key:"transport_booking",label:"Transport Booked"},{key:"transport_mobility",label:"Transport Type"},{key:"district_nurse_referral",label:"District Nurse"},{key:"equipment",label:"Equipment"}]}),my=t=>{const e=py();return[{id:"overview",label:"Patient Overview",data:t,columns:e.overview,ariaLabel:"Patient Overview Data Grid",ariaDescription:"Overview of all patients with basic information"},{id:"vitals",label:"Vital Signs & EWS",data:t,columns:e.vitals,sortConfig:[{key:"ews_score",direction:"desc"},{key:"name",direction:"asc"},{key:"ward_name",direction:"asc"}],ariaLabel:"Patient Vital Signs Data Grid",ariaDescription:"Patient vital signs and Early Warning Scores"},{id:"discharge",label:"Discharge Planning",data:t.filter(n=>n.anticipated_discharge_date),columns:e.discharge,sortConfig:[{key:"anticipated_discharge_date",direction:"asc"},{key:"discharge_status",direction:"desc"}],ariaLabel:"Discharge Planning Data Grid",ariaDescription:"Patient discharge planning and status information"},{id:"logistics",label:"Bed Management",data:t,columns:e.logistics,sortConfig:[{key:"ward_name",direction:"asc"}],ariaLabel:"Bed Management Data Grid",ariaDescription:"Patient location and logistics information"}]},Tu={dataComparator:uy,filterFunction:dy,booleanRenderer:fy,getDataId:hy};function ju(t,e,n){const{primaryField:r,secondaryFields:a=[],badges:i=[],hiddenFields:s=[],getPriority:l,getVariant:u,fieldRenderers:c={},classPrefix:d="adaptive-card"}=n,f=e.find(j=>j.key===r),m=f?.cardRenderer?f.cardRenderer(t):f?.render?f.render(t):t[r||"name"]||"Untitled",g=()=>a.filter(w=>!s.includes(w)&&t[w]).slice(0,3).map(w=>{const P=e.find(x=>x.key===w),C=t[w],M=c[w]?c[w](C,t):P?.cardRenderer?P.cardRenderer(t):P?.render?P.render(t):C;return`${P?.label||w}: ${M}`}).join(" â€¢ "),y=()=>i.length===0?null:i.filter(j=>t[j.fieldKey]!==void 0).map(j=>{const w=t[j.fieldKey],P=j.render?j.render(w,t):w;return`<span class="nhsuk-tag ${gy(j,w)}">${P}</span>`}).join(""),p=()=>u?u(t):l?.(t)==="high"?"primary":"default",h=y(),_=g(),N=h?`${_}${h?`<div class="adaptive-card__badges">${h}</div>`:""}`:_;return{variant:p(),heading:String(m),descriptionHtml:N,className:`adaptive-card ${d}`,"aria-label":`Record for ${m}`}}function gy(t,e){const n=t.className||"adaptive-card__badge";if(t.fieldKey==="ews_score"||t.fieldKey.includes("score")){const r=Number(e);return r>=7?`${n} nhsuk-tag--red`:r>=3?`${n} nhsuk-tag--yellow`:`${n} nhsuk-tag--green`}if(t.fieldKey==="priority"){const r=String(e).toLowerCase();if(r==="high")return`${n} nhsuk-tag--red`;if(r==="medium")return`${n} nhsuk-tag--yellow`;if(r==="low")return`${n} nhsuk-tag--green`}if(t.fieldKey==="status"){const r=String(e).toLowerCase();if(r==="urgent"||r==="critical")return`${n} nhsuk-tag--red`;if(r==="pending"||r==="warning")return`${n} nhsuk-tag--yellow`;if(r==="completed"||r==="success")return`${n} nhsuk-tag--green`}switch(t.color){case"primary":return`${n} nhsuk-tag--blue`;case"secondary":return`${n} nhsuk-tag--grey`;case"success":return`${n} nhsuk-tag--green`;case"warning":return`${n} nhsuk-tag--yellow`;case"danger":return`${n} nhsuk-tag--red`;default:return n}}const _y={primaryField:"name",secondaryFields:["id","description","status"],badges:[{fieldKey:"priority",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__status-badge"}],hiddenFields:[],getPriority:t=>t.priority||"medium",getStatus:t=>t.status||"active",getVariant:t=>t.priority==="high"?"primary":"default",fieldRenderers:{},classPrefix:"adaptive-card--generic"},As=({data:t,columns:e,onSelect:n,onAction:r,priority:a="medium",status:i="active"})=>{const s=t.name,l=t.age,u=t.ward_name,c=t.bed_name,d=t.ews_score,f=t.speciality,m=t.consultant;return o.jsxs("div",{className:`healthcare-card healthcare-card--patient healthcare-card--${a} healthcare-card--${i}`,onClick:()=>n?.(t),role:"button",tabIndex:0,"aria-label":`Patient record for ${s}, Age ${l}, Ward ${u}, Bed ${c}`,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__identity",children:[o.jsx("h3",{className:"healthcare-card__patient-name",children:s}),o.jsxs("p",{className:"healthcare-card__age-info",children:[o.jsx("span",{className:"healthcare-card__label",children:"Age: "}),o.jsx("span",{className:"healthcare-card__value",children:l})]})]}),o.jsx("div",{className:"healthcare-card__badges",children:d!==void 0&&o.jsxs(qe,{color:yy(Nu(d)),className:"healthcare-card__alert",children:["EWS: ",d]})})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Ward"}),o.jsx("dd",{children:u})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Bed"}),o.jsx("dd",{children:c})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Specialty"}),o.jsx("dd",{children:f})]}),o.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--prominent",children:[o.jsx("dt",{children:"Consultant"}),o.jsx("dd",{children:m})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(at,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-notes",t)},children:"Notes"}),o.jsx(at,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-vitals",t)},children:"Vitals"}),o.jsx(at,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:g=>{g.stopPropagation(),r?.("view-full",t)},children:"View Full Record"})]})]})},Rs=({data:t,onAction:e})=>o.jsxs("div",{className:"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__time-info",children:[o.jsx("h3",{className:"healthcare-card__time",children:new Date(t.appointment_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),o.jsx("p",{className:"healthcare-card__type",children:t.appointment_type})]}),o.jsxs("div",{className:"healthcare-card__badges",children:[o.jsx(qe,{color:xy(t.status||"active"),className:"healthcare-card__status",children:(t.status||"active").charAt(0).toUpperCase()+(t.status||"active").slice(1)}),o.jsxs(qe,{color:"grey",className:"healthcare-card__duration",children:[t.duration||"30"," min"]})]})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Patient"}),o.jsx("dd",{children:t.patient_name})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Consultant"}),o.jsx("dd",{children:t.consultant})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Location"}),o.jsx("dd",{children:t.location})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(at,{variant:"secondary",size:"small",onClick:()=>e?.("view",t),children:"View Details"}),o.jsx(at,{variant:"primary",size:"small",onClick:()=>e?.("edit",t),children:"Reschedule"})]})]}),Hs=({data:t,onAction:e})=>o.jsxs("div",{className:"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__medication-info",children:[o.jsx("h3",{className:"healthcare-card__medication-name",children:t.medication}),o.jsxs("p",{className:"healthcare-card__dose",children:[t.dose," â€¢ ",t.frequency]})]}),o.jsxs("div",{className:"healthcare-card__badges",children:[o.jsx(qe,{color:"blue",className:"healthcare-card__route",children:t.route}),t.next_due&&o.jsxs(qe,{color:"red",className:"healthcare-card__warning",children:["Due: ",new Date(t.next_due).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Patient"}),o.jsx("dd",{children:t.patient_name})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Prescriber"}),o.jsx("dd",{children:t.prescriber})]}),t.allergies&&o.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--urgent",children:[o.jsx("dt",{children:"Allergies"}),o.jsx("dd",{children:t.allergies})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(at,{variant:"secondary",size:"small",onClick:()=>e?.("view",t),children:"View Details"}),o.jsx(at,{variant:"primary",size:"small",onClick:()=>e?.("edit",t),children:"Adjust Dose"})]})]}),Os=({data:t,onSelect:e,onAction:n,priority:r="medium"})=>{const a=t.name,i=t.ews_score,s=t.ews_data?.respiratory_rate_bpm,l=t.ews_data?.sp02,u=t.ews_data?.temperature,c=t.ews_data?.systolic_bp,d=t.ews_data?.heart_rate,f=t.ews_data?.avpu;return o.jsxs("div",{className:`healthcare-card healthcare-card--vitals healthcare-card--${r}`,onClick:()=>e?.(t),role:"button",tabIndex:0,"aria-label":`Vital signs for ${a}, EWS Score ${i}`,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__vitals-summary",children:[o.jsx("h3",{className:"healthcare-card__patient-name",children:a}),i!==void 0&&o.jsxs("p",{className:`healthcare-card__ews-score healthcare-card__ews-score--${by(i)}`,children:["EWS: ",i]})]}),o.jsx("div",{className:"healthcare-card__badges",children:f&&o.jsxs(qe,{color:"blue",className:"healthcare-card__avpu",children:["AVPU: ",f.toUpperCase()]})})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("div",{className:"healthcare-card__vitals-grid",children:[s!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Respiratory Rate"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[s," bpm"]})]}),l!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"SpO2"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[l,"%"]})]}),u!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Temperature"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[u,"Â°C"]})]}),c!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Systolic BP"}),o.jsx("span",{className:"healthcare-card__vital-value",children:c})]}),d!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Heart Rate"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[d," bpm"]})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(at,{variant:"secondary",className:"healthcare-card__action",onClick:m=>{m.stopPropagation(),n?.("view-trend",t)},children:"Trend"}),o.jsx(at,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:m=>{m.stopPropagation(),n?.("record-new",t)},children:"Record New"})]})]})};function Nu(t){const e=typeof t=="string"?parseInt(t,10):t;return e>=7?"critical":e>=5?"high":e>=3?"medium":"low"}function by(t){return Nu(t)}function yy(t){switch(t){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"grey";default:return"grey"}}function xy(t){switch(t.toLowerCase()){case"active":return"blue";case"pending":return"orange";case"completed":return"green";case"cancelled":return"grey";default:return"blue"}}const vy=[{fieldKey:"ews_score",render:t=>`EWS: ${t}`,className:"adaptive-card__ews-badge",color:"default"},{fieldKey:"priority",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:t=>t.charAt(0).toUpperCase()+t.slice(1),className:"adaptive-card__status-badge"}],Du=t=>t.ews_score&&Number(t.ews_score)>=7?"high":t.ews_score&&Number(t.ews_score)>=3?"medium":t.priority==="high"||t.status==="urgent"?"high":t.priority==="low"?"low":"medium",Mu={name:"healthcare",defaultCardConfig:{primaryField:"name",secondaryFields:["nhs_number","ward","condition","consultant"],badges:vy,hiddenFields:[],getPriority:Du,getStatus:t=>{if(t.status){const e=t.status.toLowerCase();if(["active","pending","completed","cancelled","urgent"].includes(e))return e}return"active"},getVariant:t=>Du(t)==="high"||t.status==="urgent"?"primary":"default",fieldRenderers:{nhs_number:t=>t?`NHS: ${t}`:"",ews_score:t=>{const e=Number(t),n=e>=7?"HIGH":e>=3?"MEDIUM":"LOW";return`EWS: ${t} (${n})`},age:(t,e)=>e.dob?`${new Date().getFullYear()-new Date(e.dob).getFullYear()}y`:t?`${t}y`:""},classPrefix:"adaptive-card--healthcare"},cssImport:"./HealthcareCardTemplates.scss",cardTemplates:{patient:(t,e,n)=>{const r=n.getPriority?.(t)||"medium",a=n.getStatus?.(t)||"active",i=a==="urgent"?"active":a;return o.jsx(As,{data:t,columns:e,priority:r,status:i,onSelect:s=>console.log("Patient selected:",s),onAction:(s,l)=>console.log("Patient action:",s,l)})},appointment:(t,e,n)=>{const r=n.getStatus?.(t)||"pending",a=r==="urgent"?"pending":r;return o.jsx(Rs,{data:t,columns:e,status:a,onSelect:i=>console.log("Appointment selected:",i),onAction:(i,s)=>console.log("Appointment action:",i,s)})},medication:(t,e,n)=>{const r=n.getPriority?.(t)||"medium";return o.jsx(Hs,{data:t,columns:e,priority:r,onSelect:a=>console.log("Medication selected:",a),onAction:(a,i)=>console.log("Medication action:",a,i)})},vitals:(t,e,n)=>{const r=n.getPriority?.(t)||"medium";return o.jsx(Os,{data:t,columns:e,priority:r,onSelect:a=>console.log("Vitals selected:",a),onAction:(a,i)=>console.log("Vitals action:",a,i)})}},fieldTypes:{isNHSNumber:t=>typeof t=="string"&&/^\d{3}\s?\d{3}\s?\d{4}$/.test(t.replace(/\s/g,"")),isEWSScore:t=>typeof t=="number"&&t>=0&&t<=20,isMedicalDate:t=>typeof t=="string"&&!isNaN(Date.parse(t))}};function $u(t){return{primaryField:t?.primaryField||"name",secondaryFields:t?.secondaryFields||[],badges:t?.badgeFields?.map(e=>({fieldKey:e,className:"adaptive-card__badge"}))||[],hiddenFields:t?.hiddenFields||[],cardTemplate:t?.cardTemplate?(e,n,r)=>t.cardTemplate(e,n):void 0,classPrefix:"adaptive-card--generic"}}function Iu(t){if(!t||t.length===0)return!1;const e=t[0];return e.ews_score!==void 0||e.nhs_number!==void 0||e.patient_name!==void 0||e.ward!==void 0||e.consultant!==void 0}function wy(t,e){switch(e.type){case"SET_SELECTED_INDEX":return{...t,selectedIndex:e.payload};case"SET_TAB_LOADING":const n=[...t.tabLoadingStates];return n[e.payload.tabIndex]=e.payload.isLoading,{...t,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...t.tabErrors];return r[e.payload.tabIndex]=e.payload.error,{...t,tabErrors:r};case"SET_SORT":return{...t,sortConfig:e.payload};case"SET_SELECTED_ROWS":const a=[...t.selectedRows];return a[e.payload.tabIndex]=e.payload.rowIndices,{...t,selectedRows:a};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...t,globalSelectedRowData:e.payload};case"SET_FILTERS":return{...t,filters:e.payload};case"ADJUST_ARRAYS":const{newLength:i}=e.payload,s=new Array(i).fill(!1),l=new Array(i).fill(null),u=new Array(i).fill([]);for(let c=0;c<Math.min(t.tabLoadingStates.length,i);c++)s[c]=t.tabLoadingStates[c],l[c]=t.tabErrors[c],u[c]=t.selectedRows[c];return{...t,tabLoadingStates:s,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(t.tabLoadingStates.length).fill(!1),tabErrors:new Array(t.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(t.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return t}}function Sy(t,e){const[n,r]=B.useState("cards");return B.useEffect(()=>{if(e){r(e);return}const a=()=>{const i=window.innerWidth;i<t.mobile?r("cards"):i<t.desktop?r("hybrid"):r("table")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[t,e]),n}function ky(t){return!t||typeof t!="object"?null:t.appointment_type||t.appointment_time||t.clinic?"appointment":t.medication_name||t.medication||t.dose||t.frequency?"medication":t.ews_score!==void 0||t.respiratory_rate!==void 0||t.spo2!==void 0||t.temperature!==void 0||t.systolic_bp!==void 0||t.heart_rate!==void 0?"vitals":t.name||t.patient_name||t.nhs_number||t.ward||t.bed?"patient":null}function Cy(t,e,n,r){const a=r?{...r.defaultCardConfig,...n}:{..._y,...n};if(r&&r.cardTemplates){const i=ky(t);if(i&&r.cardTemplates[i]){const s=r.cardTemplates[i](t,e,a);if(s)return{variant:"default",children:s}}}return a.cardTemplate&&a.cardTemplate(t,e,a),ju(t,e,a)}const zs=({breakpoints:t={mobile:768,tablet:1024,desktop:1200},forceLayout:e,cardConfig:n={},experimental:r={},enableAdvancedSorting:a=!1,topActions:i,bottomActions:s,gridActions:l,forceGridActionsAbove:u,tabPanels:c,dataConfig:d,selectedIndex:f,onTabChange:m,ariaLabel:g="Data grid",ariaDescription:y,orientation:p="horizontal",id:h,disabled:_=!1,className:N,...j})=>{const w=Sy(t,e),P=f!==void 0,C=f??0,M=B.useMemo(()=>{if(c.some(V=>V.data&&V.data.length>0&&Iu(V.data))){const V=$u(n);return{...Mu.defaultCardConfig,...V}}else return $u(n)},[n,c]),S=B.useMemo(()=>c.some(V=>V.data&&V.data.length>0&&Iu(V.data))?Mu:void 0,[c]),x=B.useMemo(()=>({selectedIndex:C,tabLoadingStates:new Array(c.length).fill(!1),tabErrors:new Array(c.length).fill(null),sortConfig:[],selectedRows:new Array(c.length).fill([]),globalSelectedRowData:null,filters:void 0}),[C,c.length]),[$,k]=B.useReducer(wy,x),v=B.useRef([]),A=B.useRef([]),D=B.useRef([]),I=B.useRef(null),[T,E]=B.useState({focusArea:"tabs",focusedTabIndex:0,focusedCardIndex:0,selectedCardIndex:-1,isGridActive:!1,focusedCardElementIndex:0,cardElements:[],isCardNavigationActive:!1,gridColumns:1,gridRows:1,cardSortConfig:null,focusedSortControlIndex:0,isSortControlsActive:!1}),ae=B.useCallback(q=>{if(!q.current)return{columns:1,rows:0};const V=q.current,se=V.querySelectorAll(".aria-tabs-datagrid-adaptive__card-wrapper");if(se.length===0)return{columns:1,rows:0};const le=V.offsetWidth,te=se[0].offsetWidth,ne=Math.floor(le/te)||1,J=Math.ceil(se.length/ne);return{columns:ne,rows:J}},[]),z=B.useCallback((q,V)=>({row:Math.floor(q/V),col:q%V}),[]),H=B.useCallback((q,V,se)=>q*se+V,[]),U=B.useCallback((q,V,se,le)=>{const{row:R,col:te}=z(q,le);let ne=R,J=te;switch(V){case"up":ne=Math.max(0,R-1);break;case"down":ne=Math.min(Math.floor((se-1)/le),R+1);break;case"left":J=Math.max(0,te-1);break;case"right":J=Math.min(le-1,te+1);break}const Q=H(ne,J,le);return Math.min(Q,se-1)},[z,H]);B.useEffect(()=>{T.isCardNavigationActive&&T.focusedCardElementIndex>=0&&T.cardElements.length>0&&setTimeout(()=>{const q=T.cardElements[T.focusedCardElementIndex];q&&(q.element.focus(),q.element.scrollIntoView({block:"nearest",behavior:"smooth"}))},0)},[T.isCardNavigationActive,T.focusedCardElementIndex,T.cardElements.length]),B.useEffect(()=>{const q=()=>{if(w==="cards"&&I.current){const{columns:le,rows:R}=ae(I);E(te=>({...te,gridColumns:le,gridRows:R}))}},V=setTimeout(q,200),se=()=>{setTimeout(q,100)};return window.addEventListener("resize",se),()=>{clearTimeout(V),window.removeEventListener("resize",se)}},[w,c,ae]),B.useEffect(()=>{const q=$.tabLoadingStates.length,V=c.length;q!==V&&k({type:"ADJUST_ARRAYS",payload:{newLength:V}})},[c.length,$.tabLoadingStates.length]),B.useEffect(()=>{P&&f!==$.selectedIndex&&k({type:"SET_SELECTED_INDEX",payload:f})},[P,f,$.selectedIndex]);const O=B.useCallback(q=>{q>=0&&q<c.length&&!c[q].disabled&&(k({type:"SET_SELECTED_INDEX",payload:q}),m?.(q))},[c,m]),re=B.useCallback(q=>{console.log("Card selected:",q),k({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:q})},[]),G=B.useCallback(q=>{const V=A.current[q];V&&(V.focus(),V.scrollIntoView({block:"nearest",behavior:"smooth"}))},[]),ce=B.useCallback(q=>{const V=A.current[q];if(!V)return[];const se=['button:not([disabled]):not([aria-hidden="true"])','a[href]:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','select:not([disabled]):not([aria-hidden="true"])','textarea:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])','.healthcare-card__detail[tabindex]:not([tabindex="-1"])',".healthcare-card__action:not([disabled])",".tag:not([disabled])"].join(", "),le=V.querySelectorAll(se);return Array.from(le).map((R,te)=>({id:R.id||`card-${q}-element-${te}`,element:R,label:R.getAttribute("aria-label")||R.textContent?.trim()||R.getAttribute("title")||`Element ${te+1}`,type:R.tagName.toLowerCase()==="button"?"button":R.tagName.toLowerCase()==="a"?"link":["input","select","textarea"].includes(R.tagName.toLowerCase())?"input":"generic"}))},[]),ve=B.useRef(null),de=B.useCallback(q=>{const V=ve.current;if(!V)return;const se=document.createElement("div");se.setAttribute("aria-live","polite"),se.setAttribute("aria-atomic","true"),se.className="sr-only",se.textContent=q,V.appendChild(se),setTimeout(()=>{V.contains(se)&&V.removeChild(se)},1e3)},[]),he=B.useCallback(q=>{const V=q.filter(le=>le.sortable!==!1),se=[{value:"",label:"Sort by..."}];return V.forEach(le=>{const R=le.label||le.key;le.key==="name"?se.push({value:`${le.key}-asc`,label:`${R} (A-Z)`},{value:`${le.key}-desc`,label:`${R} (Z-A)`}):le.key==="ews_score"||le.key.includes("score")?se.push({value:`${le.key}-desc`,label:`${R} (High-Low)`},{value:`${le.key}-asc`,label:`${R} (Low-High)`}):le.key==="age"||le.key.includes("date")||le.key.includes("time")?se.push({value:`${le.key}-desc`,label:`${R} (Oldest-Youngest)`},{value:`${le.key}-asc`,label:`${R} (Youngest-Oldest)`}):se.push({value:`${le.key}-asc`,label:`${R} (A-Z)`},{value:`${le.key}-desc`,label:`${R} (Z-A)`})}),se},[]),ee=B.useCallback((q,V)=>V?[...q].sort((se,le)=>{const R=se[V.key],te=le[V.key];if(R==null&&te==null)return 0;if(R==null)return 1;if(te==null)return-1;const ne=Number(R),J=Number(te);if(!isNaN(ne)&&!isNaN(J))return V.direction==="asc"?ne-J:J-ne;const Q=String(R).toLowerCase(),oe=String(te).toLowerCase(),ue=Q.localeCompare(oe);return V.direction==="asc"?ue:-ue}):q,[]),ie=B.useCallback(q=>{if(!q){E(Q=>({...Q,cardSortConfig:null})),de("Card sorting cleared");return}const[V,se]=q.split("-"),le={key:V,direction:se};E(Q=>({...Q,cardSortConfig:le}));const ne=c[$.selectedIndex]?.columns.find(Q=>Q.key===V)?.label||V;de(`Cards sorted by ${ne} in ${se==="asc"?"ascending":"descending"} order`)},[c,$.selectedIndex,de]),L=B.useCallback(q=>{const le=c[$.selectedIndex]?.columns.find(te=>te.key===q.key)?.label||q.key,R=q.direction==="asc"?"ascending":"descending";return`${le} (${R})`},[c,$.selectedIndex]),F=B.useCallback(q=>{const V=c[$.selectedIndex];if(a){const se=$.sortConfig;return!se||se.length===0?q:[...q].sort((le,R)=>{for(const{key:te,direction:ne}of se){let J=le[te],Q=R[te];const oe=V?.columns.find(Ce=>Ce.key===te);if(oe?.cardRenderer?(J=oe.cardRenderer(le),Q=oe.cardRenderer(R)):oe?.render&&(J=oe.render(le),Q=oe.render(R)),J==null&&Q==null)continue;if(J==null)return ne==="asc"?-1:1;if(Q==null)return ne==="asc"?1:-1;const ue=Number(J),we=Number(Q);if(!isNaN(ue)&&!isNaN(we)){const Ce=ue-we;if(Ce!==0)return ne==="asc"?Ce:-Ce;continue}const Te=String(J).toLowerCase(),Ne=String(Q).toLowerCase(),xe=Te.localeCompare(Ne);if(xe!==0)return ne==="asc"?xe:-xe}return 0})}else return ee(q,T.cardSortConfig)},[a,$.sortConfig,T.cardSortConfig,ee,c,$.selectedIndex]),W=B.useCallback((q,V)=>{const se=ce(q),le=se[V];if(le){le.element.scrollIntoView({block:"nearest",behavior:"smooth"});const R=`Focused on ${le.label}, ${le.type} ${V+1} of ${se.length} within card`;de(R)}},[ce,de]),Z=B.useCallback(q=>{v.current[q]?.focus()},[]),Y=B.useCallback(()=>{const q=D.current[0];if(!q)return[];const V=['select:not([disabled]):not([aria-hidden="true"])','button:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])'].join(", "),se=q.querySelectorAll(V);return Array.from(se)},[]),X=B.useCallback(q=>{if(q===0){const V=D.current[0],se=V?.querySelector(".sort-controls-row");if(se){se.setAttribute("tabindex","-1"),se.focus();const R=`Sort controls group with ${Y().length} interactive elements. Press Enter or Space to begin navigating controls.`;de(R)}else V&&V.focus()}else{const V=Y(),se=q-1,le=V[se];if(le){le.focus();const R=le.tagName.toLowerCase()==="select",te=le.tagName.toLowerCase()==="button",ne=R?"dropdown":te?"button":"control",J=R?". Use Space key to open dropdown":"",Q=`${ne} ${se+1} of ${V.length}${J}`;de(Q)}}},[Y,de]),fe=B.useCallback((q,V)=>{const{key:se}=q,le=c[$.selectedIndex],R=le?.data.length||0;if(se==="ArrowLeft"&&q.shiftKey){q.preventDefault(),q.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(se==="ArrowRight"&&q.shiftKey){q.preventDefault(),q.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!T.isCardNavigationActive){switch(se){case"ArrowUp":if(q.preventDefault(),V===0)E(Q=>({...Q,focusArea:"sort-controls",focusedSortControlIndex:0,isSortControlsActive:!1})),X(0);else{const Q=U(V,"up",R,T.gridColumns);Q!==V&&(E(oe=>({...oe,focusedCardIndex:Q})),G(Q),de(`Moved to card ${Q+1} of ${R}`))}break;case"ArrowDown":q.preventDefault();const te=U(V,"down",R,T.gridColumns);te!==V&&(E(Q=>({...Q,focusedCardIndex:te})),G(te),de(`Moved to card ${te+1} of ${R}`));break;case"ArrowLeft":q.preventDefault();const ne=U(V,"left",R,T.gridColumns);ne!==V?(E(Q=>({...Q,focusedCardIndex:ne})),G(ne),de(`Moved to card ${ne+1} of ${R}`)):$.selectedIndex>0&&(k({type:"SET_SELECTED_INDEX",payload:$.selectedIndex-1}),E(Q=>({...Q,focusArea:"tabs"})),setTimeout(()=>Z($.selectedIndex-1),0));break;case"ArrowRight":q.preventDefault();const J=U(V,"right",R,T.gridColumns);J!==V?(E(Q=>({...Q,focusedCardIndex:J})),G(J),de(`Moved to card ${J+1} of ${R}`)):$.selectedIndex<c.length-1&&(k({type:"SET_SELECTED_INDEX",payload:$.selectedIndex+1}),E(Q=>({...Q,focusArea:"tabs"})),setTimeout(()=>Z($.selectedIndex+1),0));break;case"Enter":if(le?.data[V]){q.preventDefault(),E(oe=>({...oe,selectedCardIndex:V}));const Q=ce(V);Q.length>0?(E(oe=>({...oe,focusArea:"card",isCardNavigationActive:!0,focusedCardElementIndex:0,cardElements:Q,selectedCardIndex:V})),de(`Card ${V+1} selected and navigation activated. ${Q.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`)):de(`Card ${V+1} selected.`)}break;case" ":if(le?.data[V]){q.preventDefault(),E(oe=>({...oe,selectedCardIndex:oe.selectedCardIndex===V?-1:V}));const Q=T.selectedCardIndex===V;de(`Card ${V+1} ${Q?"deselected":"selected"}.`)}break}return}switch(se){case"ArrowUp":case"ArrowLeft":q.preventDefault();const te=Math.max(0,T.focusedCardElementIndex-1);E(oe=>({...oe,focusedCardElementIndex:te})),W(V,te);break;case"ArrowDown":case"ArrowRight":q.preventDefault();const ne=Math.min(T.cardElements.length-1,T.focusedCardElementIndex+1);E(oe=>({...oe,focusedCardElementIndex:ne})),W(V,ne);break;case"Enter":q.preventDefault();const J=T.cardElements[T.focusedCardElementIndex];J&&(J.element.click(),de(`Activated ${J.label}`));break;case" ":q.preventDefault();const Q=T.cardElements[T.focusedCardElementIndex];if(Q){const oe=new MouseEvent("dblclick",{bubbles:!0});Q.element.dispatchEvent(oe),de(`Double-clicked ${Q.label}`)}break;case"Escape":q.preventDefault(),E(oe=>({...oe,focusArea:"cards",isCardNavigationActive:!1,focusedCardElementIndex:0,cardElements:[]})),setTimeout(()=>G(V),0),de("Exited card navigation, returned to card level");break;case"Home":q.preventDefault(),T.cardElements.length>0&&(E(oe=>({...oe,focusedCardElementIndex:0})),W(V,0));break;case"End":if(q.preventDefault(),T.cardElements.length>0){const oe=T.cardElements.length-1;E(ue=>({...ue,focusedCardElementIndex:oe})),W(V,oe)}break}},[T,$.selectedIndex,c,re,G,Z,E,ce,W,de]),Se=B.useCallback(q=>{const V=v.current[q],se=V?.parentElement;if(!V||!se){console.log("Tab or container not found for mobile scroll");return}const le=V.getBoundingClientRect(),R=se.getBoundingClientRect();le.left>=R.left&&le.right<=R.right||(console.log("Tab not visible, scrolling into view (mobile)"),V.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[]),ge=B.useCallback((q,V)=>{if(w!=="cards")return;const{key:se}=q;switch(se){case"ArrowLeft":q.preventDefault();const le=V>0?V-1:c.length-1;O(le),E(J=>({...J,focusedTabIndex:le})),v.current[le]?.focus(),Se(le);break;case"ArrowRight":q.preventDefault();const R=V<c.length-1?V+1:0;O(R),E(J=>({...J,focusedTabIndex:R})),v.current[R]?.focus(),Se(R);break;case"ArrowDown":q.preventDefault();const te=c[$.selectedIndex];te&&te.columns&&te.columns.length>0?(E(J=>({...J,focusArea:"sort-controls",focusedSortControlIndex:0})),X(0)):(E(J=>({...J,focusArea:"cards",focusedCardIndex:0})),G(0));break;case"Home":q.preventDefault(),O(0),E(J=>({...J,focusedTabIndex:0})),v.current[0]?.focus(),Se(0);break;case"End":q.preventDefault();const ne=c.length-1;O(ne),E(J=>({...J,focusedTabIndex:ne})),v.current[ne]?.focus(),Se(ne);break;case"Enter":case" ":q.preventDefault(),O(V);break}},[c.length,O,w,G,E,Se]),pe=B.useCallback((q,V)=>{if(w!=="cards")return;const{key:se}=q,le=c[$.selectedIndex];if(V===0&&!T.isSortControlsActive){switch(se){case"ArrowUp":q.preventDefault(),E(te=>({...te,focusArea:"tabs",isSortControlsActive:!1})),Z($.selectedIndex);break;case"ArrowDown":q.preventDefault(),le?.data&&le.data.length>0&&(E(te=>({...te,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),G(0));break;case"Enter":case" ":q.preventDefault();const R=Y();if(R.length>0){E(ne=>({...ne,isSortControlsActive:!0,focusedSortControlIndex:1})),X(1);const te=`Entered sort controls navigation mode. ${R.length} controls available. Use arrow keys to navigate between controls.`;de(te)}break;case"Escape":q.preventDefault(),E(te=>({...te,isSortControlsActive:!1,focusArea:"tabs"})),Z($.selectedIndex);break}return}if(T.isSortControlsActive){const te=Y().length;switch(se){case"ArrowLeft":q.preventDefault();const ne=T.focusedSortControlIndex>1?T.focusedSortControlIndex-1:te;E(Q=>({...Q,focusedSortControlIndex:ne})),X(ne);break;case"ArrowRight":q.preventDefault();const J=T.focusedSortControlIndex<te?T.focusedSortControlIndex+1:1;E(Q=>({...Q,focusedSortControlIndex:J})),X(J);break;case"ArrowDown":if(q.preventDefault(),T.isSortControlsActive){const Q=T.focusedSortControlIndex<te?T.focusedSortControlIndex+1:1;E(oe=>({...oe,focusedSortControlIndex:Q})),X(Q)}else le?.data&&le.data.length>0&&(E(Q=>({...Q,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),G(0));break;case"ArrowUp":q.preventDefault(),E(Q=>({...Q,isSortControlsActive:!1,focusArea:"sort-controls"})),X(0);break;case"Escape":q.preventDefault(),E(Q=>({...Q,isSortControlsActive:!1,focusArea:"sort-controls",focusedSortControlIndex:0})),X(0);break}}},[w,c,$.selectedIndex,T.isSortControlsActive,T.focusedSortControlIndex,X,Z,G,E,de]);if(w==="cards"){const q=c[$.selectedIndex];return o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${N||""}`,children:[o.jsxs("div",{className:"aria-tabs-datagrid-adaptive__header",children:[o.jsx("div",{role:"tablist","aria-label":g,"aria-describedby":`${y||""} ${h?`${h}-navigation-help`:""}`.trim(),"aria-orientation":p,className:"aria-tabs-datagrid__tabs",children:c.map((V,se)=>{const le=se===$.selectedIndex,R=V.disabled||_;return o.jsxs("button",{role:"tab",id:`tab-${V.id}`,"aria-controls":`panel-${V.id}`,"aria-selected":le,"aria-disabled":R,tabIndex:le?0:-1,ref:te=>{v.current[se]=te},onClick:()=>O(se),onKeyDown:te=>ge(te,se),disabled:R,className:["aria-tabs-datagrid__tab",le?"aria-tabs-datagrid__tab--selected":"",R?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[o.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:V.label}),$.tabLoadingStates[se]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),$.tabErrors[se]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},V.id)})}),i&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions",children:i})]}),q&&q.columns&&o.jsx(o.Fragment,{children:a?o.jsx(Cu,{sortConfig:$.sortConfig||[],columns:q.columns.map(V=>({key:V.key,label:V.label})),onSortChange:V=>{k({type:"SET_SORT",payload:V})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls"}):o.jsx("div",{className:"aria-tabs-datagrid-adaptive__sort-controls",role:"region","aria-label":"Sort controls",tabIndex:T.focusArea==="sort-controls"?0:-1,ref:V=>{D.current[0]=V},onKeyDown:V=>pe(V,0),children:o.jsxs("div",{className:"sort-controls-row",children:[o.jsxs("div",{className:"sort-select-container",children:[o.jsx("label",{htmlFor:`card-sort-${q.id}`,className:"sort-label",children:"Sort cards by"}),o.jsx(Dr,{id:`card-sort-${q.id}`,name:`card-sort-${q.id}`,value:T.cardSortConfig?`${T.cardSortConfig.key}-${T.cardSortConfig.direction}`:"",onChange:V=>ie(V.target.value),className:"sort-select",children:he(q.columns).map(V=>o.jsx("option",{value:V.value,children:V.label},V.value))})]}),T.cardSortConfig&&o.jsxs("div",{className:"sort-indicator",role:"status","aria-live":"polite",children:[o.jsxs("span",{className:"sort-indicator-text",children:["Sorted by ",L(T.cardSortConfig)]}),o.jsx(at,{variant:"secondary",size:"small",onClick:()=>ie(""),"aria-label":"Clear card sorting",className:"sort-clear-button",children:"Clear"})]})]})})}),o.jsx("div",{ref:I,className:"aria-tabs-datagrid-adaptive__cards",role:"grid","aria-label":`${q?.label||"Data"} cards in ${T.gridRows} rows and ${T.gridColumns} columns`,"aria-rowcount":T.gridRows,"aria-colcount":T.gridColumns,id:`panel-${q?.id}`,"aria-labelledby":`tab-${q?.id}`,children:F(q?.data||[]).map((V,se)=>{const le=T.selectedCardIndex===se,R=T.focusedCardIndex===se&&T.focusArea==="cards",te=T.focusedCardIndex===se&&T.focusArea==="card"&&T.isCardNavigationActive,ne=se===0&&T.focusArea!=="cards",J=R||ne,Q=z(se,T.gridColumns);if(n.cardTemplate){const we=n.cardTemplate(V,q.columns);return o.jsx("div",{role:"row","aria-rowindex":Q.row+1,className:"aria-tabs-datagrid-adaptive__row",children:o.jsx("div",{ref:Te=>{A.current[se]=Te},className:["aria-tabs-datagrid-adaptive__card-wrapper",le?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",R?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",te?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":Q.col+1,"aria-selected":le,"aria-expanded":te,"aria-description":te?`Card navigation active. ${T.cardElements.length} interactive elements available.`:void 0,tabIndex:J?0:-1,onClick:()=>{E(Te=>({...Te,selectedCardIndex:Te.selectedCardIndex===se?-1:se})),re(V)},onKeyDown:Te=>fe(Te,se),onFocus:()=>{E(Te=>Te.isCardNavigationActive?Te:Te.focusedCardIndex!==se||Te.focusArea!=="cards"?{...Te,focusedCardIndex:se,focusArea:"cards"}:Te)},children:we})},`card-${se}`)}const oe=Cy(V,q.columns,M,S),ue=[oe.className||"",le?"aria-tabs-datagrid-adaptive__card--selected":"",R?"aria-tabs-datagrid-adaptive__card--focused":"",te?"aria-tabs-datagrid-adaptive__card--card-navigation":""].filter(Boolean).join(" ");return o.jsx("div",{role:"row","aria-rowindex":Q.row+1,className:"aria-tabs-datagrid-adaptive__row",children:o.jsx("div",{className:["aria-tabs-datagrid-adaptive__card-wrapper",le?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",R?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",te?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":Q.col+1,"aria-selected":le,"aria-expanded":te,onKeyDown:we=>{we.key==="Enter"&&(we.preventDefault(),E(Te=>({...Te,selectedCardIndex:se}))),fe(we,se)},children:o.jsx(Ls,{...oe,ref:we=>{A.current[se]=we},className:ue,"aria-label":`${oe["aria-label"]||oe.heading}. ${te?`Card navigation active with ${T.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.`:"Press Enter to navigate within card elements."}`,tabIndex:J?0:-1,onClick:()=>{E(we=>({...we,selectedCardIndex:we.selectedCardIndex===se?-1:se})),re(V)},onKeyDown:we=>fe(we,se),onFocus:()=>{T.isCardNavigationActive||E(we=>we.focusedCardIndex!==se||we.focusArea!=="cards"?{...we,focusedCardIndex:se,focusArea:"cards",focusedCardElementIndex:0,cardElements:[]}:we)}})})},`card-${se}`)})}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s}),o.jsx("div",{ref:ve,className:"aria-tabs-datagrid-adaptive__announcements","aria-hidden":"true",style:{position:"fixed",top:"-1px",left:"-1px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0,padding:0,margin:0}})]})}return w==="hybrid"?o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${N||""}`,children:[i&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:i}),o.jsx(si,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:y,orientation:p,id:h,disabled:_,selectedIndex:f,onTabChange:m,className:"aria-tabs-datagrid-adaptive__table--hybrid",actions:l,forceActionsAbove:u,...j}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s})]}):o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${N||""}`,children:[i&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:i}),o.jsx(si,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:y,orientation:p,id:h,disabled:_,selectedIndex:f,onTabChange:m,actions:l,forceActionsAbove:u,...j}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s})]})},Pu=t=>{const e=Bs.find(n=>n.value===t);return e?e.icon:null},Ty={ecommerce:{name:"E-commerce",description:"Product catalogs with pricing, inventory, and ratings",dataConfig:{dataComparator:(t,e)=>t.id===e.id,filterFunction:(t,e)=>e?t.filter(n=>{if(e.priceRange){const[r,a]=e.priceRange,i=n.discountedPrice||n.price;if(i<r||i>a)return!1}return!(e.categories&&e.categories.length>0&&!e.categories.includes(n.category)||e.inStock!==void 0&&n.inStock!==e.inStock||e.minRating!==void 0&&n.rating<e.minRating||e.tags&&e.tags.length>0&&!e.tags.some(r=>n.tags.includes(r)))}):t,booleanRenderer:t=>Pu(t),getDataId:t=>`ecommerce-${t.id}`},createTabs:t=>li(t,[{id:"all-products",label:"All Products",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Price",render:n=>n.discountedPrice?`$${n.price.toFixed(2)} â†’ $${n.discountedPrice.toFixed(2)}`:`$${n.price.toFixed(2)}`},{key:"inStock",label:"Availability"},{key:"category",label:"Category"},{key:"rating",label:"Rating",render:n=>`${n.rating}/5 (${n.reviews} reviews)`}],ariaLabel:"All Products Grid",ariaDescription:"Complete product catalog with pricing and availability"},{id:"on-sale",label:"On Sale",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Original Price",render:n=>`$${n.price.toFixed(2)}`},{key:"discountedPrice",label:"Sale Price",render:n=>`$${n.discountedPrice?.toFixed(2)||"N/A"}`},{key:"discount",label:"Discount",render:n=>n.discountedPrice?`${((n.price-n.discountedPrice)/n.price*100).toFixed(0)}% OFF`:"N/A"}],filter:n=>n.filter(r=>r.discountedPrice!==void 0),ariaLabel:"Sale Products Grid",ariaDescription:"Products currently on sale with discounted pricing"},{id:"high-rated",label:"Top Rated",columns:[{key:"name",label:"Product Name"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.rating>=4),sortConfig:[{key:"rating",direction:"desc"}],ariaLabel:"Top Rated Products Grid",ariaDescription:"Highest rated products with 4+ star ratings"}])},financial:{name:"Financial",description:"Transaction data with amounts, categories, and statuses",dataConfig:{dataComparator:(t,e)=>t.id===e.id,filterFunction:(t,e)=>e?t.filter(n=>{if(e.dateRange){const[r,a]=e.dateRange;if(n.date<r||n.date>a)return!1}if(e.amountRange){const[r,a]=e.amountRange;if(Math.abs(n.amount)<r||Math.abs(n.amount)>a)return!1}return!(e.types&&e.types.length>0&&!e.types.includes(n.type)||e.categories&&e.categories.length>0&&!e.categories.includes(n.category)||e.pending!==void 0&&n.pending!==e.pending)}):t,booleanRenderer:t=>Pu(t),getDataId:t=>`financial-${t.id}`},createTabs:t=>li(t,[{id:"all-transactions",label:"All Transactions",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"},{key:"pending",label:"Status"}],sortConfig:[{key:"date",direction:"desc"}],ariaLabel:"All Transactions Grid",ariaDescription:"Complete transaction history with amounts and categories"},{id:"credits",label:"Credits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`+$${n.amount.toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="credit"),ariaLabel:"Credit Transactions Grid",ariaDescription:"Incoming payments and credits only"},{id:"debits",label:"Debits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`-$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="debit"),ariaLabel:"Debit Transactions Grid",ariaDescription:"Outgoing payments and charges only"},{id:"pending",label:"Pending",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"type",label:"Type"}],filter:n=>n.filter(r=>r.pending),ariaLabel:"Pending Transactions Grid",ariaDescription:"Transactions awaiting processing"}])}},Fu=(t,e)=>{const n=Ty[t];return{dataConfig:n.dataConfig,tabPanels:n.createTabs(e)}},Lu=[{name:"Sarah Johnson",age:34,ews_data:{respiratory_rate_bpm:16,sp02:98,temperature:36.8,systolic_bp:140,heart_rate:82,avpu:"alert"},ews_score:3,ward_name:"Cardiology",room_name:"Room A",bed_name:"A-1",bed_type:"bed",admin_note:"Hypertension monitoring",pathway:"Standard",speciality:"Cardiology",consultant:"Dr. Smith",local_authority:"NHS Trust",early_discharge_notification:"not_required",needs_based_assessment:!1,medically_optimised:!0,criteria_to_reside:!0,date_medically_optimised:"2024-01-15",anticipated_discharge_date:"2024-01-18",dru_suitability:!1,optica_planned_discharge_date:"2024-01-18",optica_date_confirmed:"2024-01-16",dsum:null,medications_tta:"None required",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!1,initial_therapy_contact:"",equipment:"None",district_nurse_referral:!1},{name:"Michael Chen",age:67,ews_data:{respiratory_rate_bpm:20,sp02:94,temperature:37.2,systolic_bp:160,heart_rate:95,avpu:"alert"},ews_score:7,ward_name:"Surgery",room_name:"Room B",bed_name:"B-3",bed_type:"bed",admin_note:"Post-operative monitoring",pathway:"Surgical",speciality:"General Surgery",consultant:"Dr. Johnson",local_authority:"NHS Trust",early_discharge_notification:"due",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!0,date_medically_optimised:"2024-01-17",anticipated_discharge_date:"2024-01-20",dru_suitability:!0,optica_planned_discharge_date:"2024-01-20",optica_date_confirmed:"2024-01-16",dsum:"Complex discharge",medications_tta:"Pain management",transport_booking:!0,transport_status:"In Progress",transport_date:"2024-01-20",transport_mobility:"Wheelchair",fast_track:!1,initial_therapy_contact:"2024-01-17",equipment:"Walking frame",district_nurse_referral:!0},{name:"Emma Thompson",age:28,ews_data:{respiratory_rate_bpm:24,sp02:90,temperature:38.5,systolic_bp:110,heart_rate:105,avpu:"alert"},ews_score:5,ward_name:"Respiratory",room_name:"Room C",bed_name:"C-2",bed_type:"bed",admin_note:"Pneumonia treatment",pathway:"Respiratory",speciality:"Respiratory Medicine",consultant:"Dr. Williams",local_authority:"NHS Trust",early_discharge_notification:"overdue",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!1,date_medically_optimised:"",anticipated_discharge_date:"2024-01-22",dru_suitability:!1,optica_planned_discharge_date:"2024-01-22",optica_date_confirmed:"",dsum:null,medications_tta:"Antibiotics",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!0,initial_therapy_contact:"",equipment:"Oxygen",district_nurse_referral:!1}],jy=[{id:"appt-001",appointment_time:"2024-01-18T09:00:00Z",patient_name:"Sarah Johnson",appointment_type:"Cardiology Consultation",consultant:"Dr. Smith",location:"Clinic Room 3",duration:30,status:"pending"},{id:"appt-002",appointment_time:"2024-01-18T10:30:00Z",patient_name:"Michael Davis",appointment_type:"Post-op Follow-up",consultant:"Dr. Johnson",location:"Surgery Ward",duration:15,status:"active"},{id:"appt-003",appointment_time:"2024-01-18T14:00:00Z",patient_name:"Emma Thompson",appointment_type:"Respiratory Assessment",consultant:"Dr. Wilson",location:"Emergency Department",duration:45,status:"pending"}],Ny=[{id:"med-001",medication:"Amlodipine",dose:"5mg",frequency:"Once daily",route:"Oral",next_due:"2024-01-18T08:00:00Z",prescriber:"Dr. Smith",patient_name:"Sarah Johnson",allergies:null,priority:"medium"},{id:"med-002",medication:"Morphine",dose:"10mg",frequency:"Every 4 hours",route:"IV",next_due:"2024-01-18T10:00:00Z",prescriber:"Dr. Johnson",patient_name:"Michael Davis",allergies:"Codeine allergy",priority:"high"},{id:"med-003",medication:"Salbutamol",dose:"2 puffs",frequency:"As needed",route:"Inhaled",next_due:"2024-01-18T12:00:00Z",prescriber:"Dr. Wilson",patient_name:"Emma Thompson",allergies:null,priority:"high"}],Dy=[{id:"vitals-001",patient_name:"Sarah Johnson",recorded_time:"2024-01-18T07:30:00Z",temperature:36.8,blood_pressure:"140/90",heart_rate:82,respiratory_rate:16,oxygen_saturation:98,ews_score:3,priority:"medium"},{id:"vitals-002",patient_name:"Michael Davis",recorded_time:"2024-01-18T08:15:00Z",temperature:37.2,blood_pressure:"130/85",heart_rate:98,respiratory_rate:20,oxygen_saturation:95,ews_score:7,priority:"high"},{id:"vitals-003",patient_name:"Emma Thompson",recorded_time:"2024-01-18T09:00:00Z",temperature:38.5,blood_pressure:"110/70",heart_rate:105,respiratory_rate:24,oxygen_saturation:90,ews_score:9,priority:"high"}],Eu=[{id:"PROD001",name:"Wireless Headphones",price:199.99,discountedPrice:149.99,inStock:!0,category:"Electronics",rating:4.5,reviews:1247,tags:["wireless","bluetooth","premium"]},{id:"PROD002",name:"Running Shoes",price:129.99,inStock:!0,category:"Sports",rating:4.8,reviews:892,tags:["running","athletic","comfortable"]},{id:"PROD003",name:"Coffee Maker",price:89.99,discountedPrice:59.99,inStock:!1,category:"Kitchen",rating:4.2,reviews:456,tags:["kitchen","coffee","appliance"]},{id:"PROD004",name:"Smartphone Case",price:24.99,inStock:!0,category:"Accessories",rating:4,reviews:234,tags:["protection","mobile","durable"]}],Bu=[{id:"TXN001",date:new Date("2024-01-15"),amount:2500,type:"credit",category:"Salary",description:"Monthly salary payment",accountId:"ACC001",pending:!1,recurring:!0},{id:"TXN002",date:new Date("2024-01-14"),amount:89.5,type:"debit",category:"Groceries",description:"Supermarket shopping",accountId:"ACC001",pending:!1,recurring:!1},{id:"TXN003",date:new Date("2024-01-16"),amount:1200,type:"debit",category:"Rent",description:"Monthly rent payment",accountId:"ACC001",pending:!0,recurring:!0},{id:"TXN004",date:new Date("2024-01-13"),amount:150,type:"credit",category:"Refund",description:"Product return refund",accountId:"ACC001",pending:!1,recurring:!1}],Au=[{id:"LEAD001",companyName:"Tech Solutions Inc",contactPerson:"John Smith",email:"john@techsolutions.com",status:"qualified",value:5e4,lastContact:new Date("2024-01-15"),source:"Website",isHotLead:!0},{id:"LEAD002",companyName:"Global Industries",contactPerson:"Maria Garcia",email:"maria@globalind.com",status:"contacted",value:25e3,lastContact:new Date("2024-01-14"),source:"Referral",isHotLead:!1},{id:"LEAD003",companyName:"StartupXYZ",contactPerson:"Alex Johnson",email:"alex@startupxyz.com",status:"new",value:15e3,lastContact:new Date("2024-01-16"),source:"Cold Call",isHotLead:!0}],My={dataComparator:(t,e)=>t.id===e.id,filterFunction:(t,e)=>e?t.filter(n=>!(e.status&&!e.status.includes(n.status)||e.minValue&&n.value<e.minValue||e.hotLeadsOnly&&!n.isHotLead)):t,booleanRenderer:t=>o.jsx("span",{style:{color:t?"#dc2626":"#6b7280",fontWeight:t?"bold":"normal"},children:t?"ðŸ”¥ Hot Lead":"ðŸ“‹ Standard"}),getDataId:t=>`business-${t.id}`},$y=()=>[{id:"patients",label:"Patients",data:Lu,columns:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Records",ariaDescription:"Healthcare patient management with EWS monitoring",cardTemplate:(t,e)=>o.jsx(As,{data:t,columns:e,onSelect:n=>console.log("Selected patient:",n),onAction:(n,r)=>console.log("Patient action:",n,r),priority:t.ews_score>=7?"high":t.ews_score>=3?"medium":"low"})},{id:"appointments",label:"Appointments",data:jy,columns:[{key:"appointment_time",label:"Time"},{key:"patient_name",label:"Patient"},{key:"appointment_type",label:"Type"},{key:"consultant",label:"Consultant"}],ariaLabel:"Patient Appointments",ariaDescription:"Scheduled appointments and consultations",cardTemplate:(t,e)=>o.jsx(Rs,{data:t,columns:e,onSelect:n=>console.log("Selected appointment:",n),onAction:(n,r)=>console.log("Appointment action:",n,r),status:t.status})},{id:"medications",label:"Medications",data:Ny,columns:[{key:"medication",label:"Medication"},{key:"dose",label:"Dose"},{key:"frequency",label:"Frequency"},{key:"next_due",label:"Next Due"}],ariaLabel:"Patient Medications",ariaDescription:"Medication administration and scheduling",cardTemplate:(t,e)=>o.jsx(Hs,{data:t,columns:e,onSelect:n=>console.log("Selected medication:",n),onAction:(n,r)=>console.log("Medication action:",n,r),priority:t.priority})},{id:"vitals",label:"Vital Signs",data:Dy,columns:[{key:"patient_name",label:"Patient"},{key:"recorded_time",label:"Time"},{key:"temperature",label:"Temperature"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Vital Signs",ariaDescription:"Patient vital signs monitoring and EWS scores",cardTemplate:(t,e)=>o.jsx(Os,{data:t,columns:e,onSelect:n=>console.log("Selected vitals:",n),onAction:(n,r)=>console.log("Vitals action:",n,r),priority:t.ews_score>=7?"high":t.ews_score>=3?"medium":"low"})}],Iy=()=>{const[t,e]=B.useState("healthcare"),n=B.useMemo(()=>({healthcare:{title:"Healthcare Workflow Management",description:"Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals",dataConfig:Tu,tabPanels:$y(),data:Lu},ecommerce:{title:"E-commerce Product Catalog",description:"Product management with pricing and inventory",...Fu("ecommerce",Eu),data:Eu},financial:{title:"Financial Transaction Dashboard",description:"Banking and financial data management",...Fu("financial",Bu),data:Bu},business:{title:"Sales Lead Management",description:"Custom CRM configuration with business logic",dataConfig:My,tabPanels:li(Au,[{id:"all-leads",label:"All Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"status",label:"Status"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"isHotLead",label:"Priority"}],ariaLabel:"All Sales Leads Grid",ariaDescription:"Complete sales pipeline with lead information"},{id:"hot-leads",label:"Hot Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"lastContact",label:"Last Contact",render:a=>a.lastContact.toLocaleDateString()}],filter:a=>a.filter(i=>i.isHotLead),sortConfig:[{key:"value",direction:"desc"}],ariaLabel:"Hot Leads Grid",ariaDescription:"High-priority leads requiring immediate attention"},{id:"pipeline",label:"Active Pipeline",columns:[{key:"companyName",label:"Company"},{key:"status",label:"Status"},{key:"value",label:"Value",render:a=>`$${a.value.toLocaleString()}`},{key:"source",label:"Source"}],filter:a=>a.filter(i=>["contacted","qualified"].includes(i.status)),ariaLabel:"Active Pipeline Grid",ariaDescription:"Leads currently in the sales pipeline"}]),data:Au}}),[]),r=n[t];return o.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"AriaTabsDataGrid - Comprehensive Demo"}),o.jsx("p",{style:{fontSize:"1.1rem",color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:"This demo showcases the component's versatility across different domains: healthcare, e-commerce, financial services, and custom business applications. Each configuration demonstrates domain-specific data operations, custom renderers, and specialized filtering logic."}),o.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:Object.keys(n).map(a=>o.jsx(at,{variant:t===a?"primary":"secondary",onClick:()=>e(a),style:{textTransform:"capitalize"},children:a},a))}),o.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem"},children:[o.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"0.5rem",color:"#1e293b"},children:r.title}),o.jsx("p",{style:{color:"#64748b",marginBottom:"1rem"},children:r.description}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.9rem"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Data Records:"})," ",r.data.length]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Tab Panels:"})," ",r.tabPanels.length]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Features:"})," ",["Row Selection","Custom Filtering","Domain-Specific Renderers","Keyboard Navigation","ARIA Compliance"].join(", ")]})]})]})]}),o.jsx(si,{dataConfig:r.dataConfig,tabPanels:r.tabPanels,ariaLabel:`${r.title} Data Grid`,ariaDescription:`Interactive data grid for ${r.description.toLowerCase()}`}),o.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f1f5f9",borderRadius:"0.5rem",border:"1px solid #cbd5e1"},children:[o.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#334155"},children:"Implementation Details"}),o.jsxs("div",{style:{display:"grid",gap:"1rem",fontSize:"0.9rem"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Current Mode:"})," ",t," configuration"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Data Operations:"})," Custom comparator, filter function, and boolean renderer"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Architecture:"})," Generic core with domain-specific plugins and factory helpers"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"State Management:"})," Global row selection with data-object persistence"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Accessibility:"})," Full ARIA support with dynamic labels and descriptions"]})]})]})]})},Ws=t=>o.jsx(ls,{...t}),Py=({children:t,pageTitle:e,pageHeadingProps:n,columnWidth:r="two-thirds",mainWrapperSize:a,skipLinkProps:i,headerProps:s,footerProps:l,service:u,navigation:c,search:d,account:f,organisation:m,logo:g,className:y,...p})=>{const h={service:u,navigation:c,search:d,account:f,organisation:m,logo:g,...s};return o.jsxs(o.Fragment,{children:[o.jsx(Fs,{...i}),o.jsx(Oa,{...h}),o.jsx(Ws,{className:y,...p,children:o.jsx(cs,{size:a,children:o.jsx(bn,{children:o.jsxs(Qn,{width:r,children:[e&&o.jsx(Bt,{size:"l",...n,children:e}),t]})})})}),o.jsx(ds,{...l})]})},Fy=({children:t,pageTitle:e,pageHeadingProps:n,columnWidth:r="two-thirds",mainWrapperSize:a="small",skipLinkProps:i,headerProps:s,footerProps:l,backLinkProps:u,serviceName:c,serviceHref:d,logo:f,className:m,...g})=>{const y={service:{text:c,href:d},logo:f,navigation:void 0,search:void 0,account:void 0,...s};return o.jsxs(o.Fragment,{children:[o.jsx(Fs,{...i}),o.jsx(Oa,{...y}),o.jsxs(Ws,{className:m,...g,children:[u&&o.jsx(Ea,{...u}),o.jsx(cs,{size:a,children:o.jsx(bn,{children:o.jsxs(Qn,{width:r,children:[e&&o.jsx(Bt,{size:"l",...n,children:e}),t]})})})]}),o.jsx(ds,{...l})]})},Ru=({text:t="Next",html:e,href:n="#",className:r,element:a="a",onClick:i,...s})=>{const l=_e("nhsuk-back-link",r),u=_e("nhsuk-back-link__link"),c=()=>o.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[e?o.jsx("span",{dangerouslySetInnerHTML:{__html:e}}):t,o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:o.jsx("path",{d:"M15.5 12c0 .3-.1.5-.3.7l-5 5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4L13.1 12 8.8 7.7c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l5 5c.2.2.3.4.3.7z"})})]});return o.jsx("div",{className:l,children:a==="button"?o.jsx("button",{className:u,type:"button",onClick:i,...s,children:c()}):o.jsx("a",{className:u,href:n,...s,children:c()})})};Ru.displayName="ForwardLink";const or=Object.freeze({small:320,smallMax:767,medium:768,large:1025,xlarge:1200,xxlarge:1440});function Hu(){return typeof window>"u"?or.small:window.innerWidth||document.documentElement.clientWidth||0}function Us(){const[t,e]=K.useState(Hu());K.useEffect(()=>{if(typeof window>"u")return;const i=()=>e(Hu());return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const n=K.useCallback(i=>t>=or[i],[t]),r=K.useCallback(i=>t<or[i],[t]),a=K.useCallback((i,s)=>t>=or[i]&&t<or[s],[t]);return{width:t,up:n,down:r,between:a,values:or}}function Ly(t){const{width:e,values:n}=Us();let r=t.base;const a=["small","medium","large","xlarge","xxlarge"];for(const i of a){const s=n[i];e>=s&&t[i]!==void 0&&(r=t[i])}return r}function Ou(t={}){const{enabled:e=!0,paramSelected:n="nsv",paramDrill:r="nsvDrill"}=t,[a,i]=K.useState(()=>typeof window>"u"||!e?void 0:new URLSearchParams(window.location.search).get(n)),[s,l]=K.useState(()=>typeof window>"u"||!e?!1:new URLSearchParams(window.location.search).get(r)==="1");return K.useEffect(()=>{if(!e||typeof window>"u")return;const u=new URLSearchParams(window.location.search);a?u.set(n,String(a)):u.delete(n),u.set(r,s?"1":"0");const c=`${window.location.pathname}?${u.toString()}${window.location.hash}`;window.history.replaceState(null,"",c)},[a,s,e,n,r]),{selectedId:a,setSelectedId:i,drilledIn:s,setDrilledIn:l}}const Ey=({className:t})=>o.jsx("svg",{className:t,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{fill:"currentColor",d:"M10.7 3.3a1 1 0 0 1 0 1.4L7.41 8l3.3 3.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 0Z"})}),By=({className:t})=>o.jsx("svg",{className:t,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{fill:"currentColor",d:"M5.3 12.7a1 1 0 0 1 0-1.4L8.59 8l-3.3-3.3a1 1 0 0 1 1.42-1.4l4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.42 0Z"})});function zu(t){const{items:e,selectedId:n,defaultSelectedId:r,onSelectionChange:a,renderItemContent:i,renderContent:s,renderSecondaryContent:l,forceLayout:u,animated:c=!0,backLabel:d="Back",nextLabel:f="Next",isLoading:m=!1,emptyState:g,a11y:y,className:p,getId:h=me=>me.id,orientation:_="vertical",autoEnableThirdColumn:N=!0,onDrillChange:j,navigationInstructions:w="Use arrow keys to navigate, Enter to open.",initialFocus:P="first",skipFocusOnSelect:C=!1,skipAnnouncements:M=!1,onFocusChange:S,syncUrl:x=!1,urlParamSelected:$="nsv",urlParamDrill:k="nsvDrill",urlSyncDebounceMs:v=0,lazySecondary:A=!1,navFooter:D,collapsibleNav:I=!1,navInitiallyCollapsed:T=!1,onNavCollapseChange:E,collapseToggleLabelShow:ae="Show navigation",collapseToggleLabelHide:z="Hide navigation",collapseToggleIconShow:H,collapseToggleIconHide:U,persistNavCollapsed:O,navCollapsedStorageKey:re="nsvCollapsed",navCollapsedUrlParam:G="nsvCollapsed",autoContentHeader:ce,contentHeaderLevel:ve=2,renderContentHeader:de,contentSubheader:he,secondarySubheader:ee}=t,{up:ie}=Us(),[L,F]=K.useState(!1);K.useEffect(()=>{F(!0)},[]);const W=L&&ie("medium"),Z=L&&ie("xlarge");let Y;u?Y=u:W?Y="two-column":Y="list",!u&&N&&l&&Z&&(Y="three-column");const X=Ou({enabled:x,paramSelected:$,paramDrill:k}),[fe,Se]=K.useState(()=>X.selectedId!==void 0?X.selectedId:r),ge=n!==void 0?n:fe,pe=e.find(me=>h(me)===ge),[q,V]=K.useState(void 0);K.useEffect(()=>{if(ge===void 0)return;V(ge);const me=setTimeout(()=>V(void 0),220);return()=>clearTimeout(me)},[ge]);const se=K.useRef(null),le=K.useRef(null),R=K.useRef(null),te=K.useRef(null),[ne,J]=K.useState(()=>({contentIndex:0,secondaryIndex:0})),[Q,oe]=K.useState(()=>"nav"),[ue,we]=K.useState(0),Te=()=>[te.current,le.current,R.current].filter(Boolean),Ne=me=>{const ke=Te(),be=Math.max(0,Math.min(me,ke.length-1));ke[be]?.focus(),we(be)},xe=K.useCallback(me=>me?Array.from(me.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(be=>!be.hasAttribute("disabled")&&be.tabIndex!==-1):[],[]),Ce=K.useCallback(me=>{const ke=xe(le.current);if(!ke.length){le.current?.focus();return}const be=Math.max(0,Math.min(me,ke.length-1)),De=ke[be];De.focus(),setTimeout(()=>{document.activeElement!==De&&(De.focus(),setTimeout(()=>{document.activeElement!==De&&De.click()},10))},10),J(Oe=>({...Oe,contentIndex:be}));const Ke=Oe=>{Oe.key==="Escape"&&(Oe.preventDefault(),Oe.stopPropagation(),le.current?.focus(),De.removeEventListener("keydown",Ke))};ke.forEach(Oe=>{const Ue=Oe._escapeHandler;Ue&&Oe.removeEventListener("keydown",Ue)}),De._escapeHandler=Ke,De.addEventListener("keydown",Ke)},[xe]),Le=K.useCallback(me=>{const ke=xe(R.current);if(!ke.length){R.current?.focus();return}const be=Math.max(0,Math.min(me,ke.length-1)),De=ke[be];De.focus(),setTimeout(()=>{document.activeElement!==De&&(De.focus(),setTimeout(()=>{document.activeElement!==De&&De.click()},10))},10),J(Oe=>({...Oe,secondaryIndex:be}));const Ke=Oe=>{Oe.key==="Escape"&&(Oe.preventDefault(),Oe.stopPropagation(),R.current?.focus(),De.removeEventListener("keydown",Ke))};ke.forEach(Oe=>{const Ue=Oe._escapeHandler;Ue&&Oe.removeEventListener("keydown",Ue)}),De._escapeHandler=Ke,De.addEventListener("keydown",Ke)},[xe]),He=me=>{if(me.defaultPrevented)return;const ke=me.key,be=me.target,De=!!dt.current&&dt.current.contains(be),Ke=!!le.current&&le.current.contains(be),Oe=!!R.current&&R.current.contains(be),Ue=!!R.current,Tr=be===te.current||be===le.current||be===R.current,Jn=Me&&(Y==="list"||Y==="cards"),as=Ke&&!!be.closest(".nhs-navigation-split-view__header");if(Q==="containers"&&Tr){if(ke==="ArrowRight"){me.preventDefault();const $e=Te(),Ge=Math.min($e.length-1,ue+1);Ne(Ge);return}if(ke==="ArrowLeft"){me.preventDefault();const $e=Math.max(0,ue-1);Ne($e);return}if(ke==="Home"){me.preventDefault(),Ne(0);return}if(ke==="End"){me.preventDefault(),Ne(Te().length-1);return}if(ke==="Enter"||ke===" "){if(me.preventDefault(),be===te.current){if(oe("nav"),dt.current){const $e=Array.from(dt.current.querySelectorAll("[data-nav-item]"));($e[et>=0?et:0]||$e[0])?.focus()}}else be===le.current?(oe("content"),Ce(ne.contentIndex)):be===R.current&&(oe("secondary"),Le(ne.secondaryIndex));return}return}if(ke==="Escape"){if(Q==="content"||Q==="secondary"){if(Ke||Oe){if(me.preventDefault(),oe("nav"),dt.current){const Ge=Array.from(dt.current.querySelectorAll("[data-nav-item]"))[et>=0?et:0];setTimeout(()=>Ge?.focus(),10)}}else if((be===le.current||be===R.current)&&(me.preventDefault(),oe("nav"),dt.current)){const Ge=Array.from(dt.current.querySelectorAll("[data-nav-item]"))[et>=0?et:0];setTimeout(()=>Ge?.focus(),10)}}return}if(ke==="Enter"||ke===" "){if(be.matches('button, a, input, select, textarea, [role="button"], [role="link"], [role="tab"]'))return;if(be===le.current&&Q==="content"){me.preventDefault(),me.stopPropagation(),xe(le.current).length>0&&setTimeout(()=>{Ce(ne.contentIndex)},50);return}if(be===R.current&&Q==="secondary"){me.preventDefault(),me.stopPropagation(),xe(R.current).length>0&&setTimeout(()=>{Le(ne.secondaryIndex)},50);return}}if(Jn&&as&&!Tr&&(ke==="ArrowRight"||ke==="ArrowLeft")){const $e=xe(le.current).filter(Ge=>Ge.closest(".nhs-navigation-split-view__header"));if($e.length>1){const Ge=$e.indexOf(be);if(Ge>=0){const Ig=(Ge+(ke==="ArrowRight"?1:-1)+$e.length)%$e.length;me.preventDefault(),$e[Ig].focus();return}}}if(ke==="ArrowRight"){if(De||Q==="nav"){me.preventDefault(),oe("content"),setTimeout(()=>le.current?.focus(),10);return}if(Ke||Q==="content"){Ue&&(me.preventDefault(),oe("secondary"),setTimeout(()=>R.current?.focus(),10));return}}if(ke==="ArrowLeft"){if(Oe||Q==="secondary"){me.preventDefault(),oe("content"),setTimeout(()=>le.current?.focus(),10);return}if(Ke||Q==="content"){if(me.preventDefault(),oe("nav"),dt.current){const Ge=Array.from(dt.current.querySelectorAll("[data-nav-item]"))[et>=0?et:0];setTimeout(()=>Ge?.focus(),10)}return}}if(ke==="Home"&&!De&&(me.preventDefault(),oe("nav"),dt.current)){const $e=Array.from(dt.current.querySelectorAll("[data-nav-item]")),Ge=$e[et>=0?et:0]||$e[0];setTimeout(()=>Ge?.focus(),10)}if(ke==="End"){const $e=Ue?R.current:le.current;$e&&!$e.contains(be)&&(me.preventDefault(),Ue?(oe("secondary"),setTimeout(()=>R.current?.focus(),10)):(oe("content"),setTimeout(()=>le.current?.focus(),10)))}if(ke==="ArrowDown"||ke==="ArrowUp"){if(be===le.current&&ke==="ArrowDown"){me.preventDefault(),xe(le.current).length>0&&Ce(0);return}if(be===R.current&&ke==="ArrowDown"){me.preventDefault(),xe(R.current).length>0&&Le(0);return}if(Ke){const $e=xe(le.current);if($e.length){me.preventDefault();const Ge=ke==="ArrowDown"?1:-1,an=(ne.contentIndex+Ge+$e.length)%$e.length;Ce(an)}}else if(Oe){const $e=xe(R.current);if($e.length){me.preventDefault();const Ge=ke==="ArrowDown"?1:-1,an=(ne.secondaryIndex+Ge+$e.length)%$e.length;Le(an)}}}},Me=!!pe&&(Y==="list"||Y==="cards"),ze=K.useMemo(()=>ce===void 0?{mobile:!0,tablet:!1,desktop:!1}:ce===!0?{mobile:!0,tablet:!0,desktop:!0}:ce===!1?{mobile:!1,tablet:!1,desktop:!1}:{mobile:ce.mobile!==void 0?ce.mobile:!0,tablet:ce.tablet||!1,desktop:ce.desktop||!1},[ce]),$n=L&&ie("medium")&&!ie("xlarge"),mn=L&&ie("xlarge"),nn=!!l,rt=Y==="three-column",[lt,Pa]=K.useState(!1);K.useEffect(()=>{rt&&lt&&Pa(!1)},[rt,lt]),K.useEffect(()=>{lt&&!rt&&(oe("secondary"),we(2),setTimeout(()=>{R.current?.focus()},50))},[lt,rt]),K.useEffect(()=>{!lt&&!rt&&Q==="secondary"&&(oe("content"),we(1),setTimeout(()=>{le.current?.focus()},50))},[lt,rt,Q]);const Kl=!!pe&&(Me&&ze.mobile||!Me&&$n&&ze.tablet||!Me&&mn&&ze.desktop)||nn&&!rt,pw=`h${ve}`,Zl=pe?K.createElement(pw,{style:{marginLeft:Me?32:0,marginRight:Me?32:0}},pe.label):null,Mg=Me?"mobile":$n?"tablet":"desktop",mw=nn&&!rt&&!lt,Jl=Me&&ze.mobile?o.jsx(Ea,{element:"button",text:d,style:{marginRight:16},onClick:()=>Cr(void 0,void 0)}):void 0,Ql=mw?o.jsx(Ru,{element:"button",text:f,onClick:()=>{Pa(!0)}}):void 0,ec=!rt&&lt?o.jsx(Ea,{element:"button",text:d,style:{marginRight:16},onClick:()=>Pa(!1)}):void 0,gw=K.useMemo(()=>{if(!Kl||!pe)return null;if(de)return de({item:pe,detailActive:Me,context:Mg,backLink:Jl,defaultHeading:Zl});const me=pe&&he?typeof he=="function"?he(pe):he:null;return o.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[ec||Jl,o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:[Zl,me&&o.jsx("div",{className:"nhs-navigation-split-view__subheader",children:me})]})]}),Ql&&o.jsx("div",{style:{marginLeft:"auto"},children:Ql})]})},[Kl,pe,de,Me,Mg,Jl,ec,Zl,Ql,he]);K.useEffect(()=>{if(!x)return;const me=Y==="three-column";let ke=!1;const be=()=>{ke||(X.selectedId!==ge&&X.setSelectedId(ge),X.drilledIn!==me&&X.setDrilledIn(me))};if(v&&v>0){const De=setTimeout(be,v);return()=>{ke=!0,clearTimeout(De)}}else be()},[x,X,ge,Y,v]),K.useEffect(()=>{if(!x)return;const me=()=>{const ke=new URLSearchParams(window.location.search),be=ke.get($);ke.get(k),Se(be===null?void 0:be)};return window.addEventListener("popstate",me),()=>window.removeEventListener("popstate",me)},[x,$,k,u,l]);const rs=K.useRef(0),gn=K.useRef(null),Cr=K.useCallback((me,ke)=>{me!==ge&&(n===void 0&&Se(me),a?.(me,ke))},[n,a,ge]);K.useEffect(()=>{if(!C&&Me&&le.current){const me=setTimeout(()=>le.current?.focus(),30);return()=>clearTimeout(me)}},[Me,ge,C]);const dt=K.useRef(null),[et,Fa]=K.useState(()=>P==="first"?0:-1);K.useEffect(()=>{if(et<0||!dt.current)return;const ke=Array.from(dt.current.querySelectorAll("[data-nav-item]"))[et];if(ke){document.activeElement!==ke&&ke.focus(),rs.current=et;const be=e[et];S?.(be?h(be):void 0,be,et)}},[et,e,S,h]);const _w=me=>{const ke=_==="vertical"?"ArrowDown":"ArrowRight",be=_==="vertical"?"ArrowUp":"ArrowLeft";if(me.key==="ArrowRight"&&_==="vertical"){me.preventDefault(),lt?(oe("secondary"),setTimeout(()=>{R.current?.focus()},10)):(oe("content"),setTimeout(()=>{le.current?.focus()},10));return}if(me.key===ke)me.preventDefault(),Fa(De=>Math.min(e.length-1,De+1));else if(me.key===be)me.preventDefault(),Fa(De=>Math.max(0,De-1));else if(me.key==="Home")me.preventDefault(),Fa(0);else if(me.key==="End")me.preventDefault(),Fa(e.length-1);else if(me.key==="Enter"||me.key===" "){me.preventDefault();const De=e[et];De&&!De.disabled&&Cr(h(De),De)}else if(me.key.length===1&&/[a-z0-9]/i.test(me.key)){gn.current||(gn.current={buffer:"",last:0});const De=Date.now(),Ke=700,Oe=me.key.toLowerCase();De-gn.current.last>Ke?gn.current.buffer=Oe:gn.current.buffer+=Oe,gn.current.last=De;let Ue=gn.current.buffer;const Tr=Ue.split("").every(an=>an===Ue[0]),Jn=e.map(an=>String(an.label||"").toLowerCase());let as=0;et>=0&&(as=(et+1)%e.length);let $e;const Ge=(an,Ig)=>{const Pg=e.length;for(let rc=0;rc<Pg;rc++){const ac=(as+rc)%Pg;if(!e[ac].disabled&&Jn[ac].startsWith(an))return ac}};Tr&&Ue.length>1?$e=Ge(Ue[0]):($e=Ge(Ue),$e===void 0&&Ue.length>1&&($e=Ge(Ue[Ue.length-1]),$e!==void 0&&gn.current&&(gn.current.buffer=Ue[Ue.length-1]))),$e!==void 0&&Fa($e)}},bw=K.useMemo(()=>{if(O&&(O==="url"||O==="both")&&typeof window<"u"){const ke=new URLSearchParams(window.location.search).get(G);if(ke==="1")return!0;if(ke==="0")return!1}if(O&&(O==="localStorage"||O==="both")&&typeof window<"u")try{const me=window.localStorage.getItem(re);if(me==="1")return!0;if(me==="0")return!1}catch{}return T},[O,T,re,G]),[rn,yw]=K.useState(bw);K.useEffect(()=>{E?.(rn)},[rn,E]);const xw=K.useCallback(()=>{W&&I&&yw(me=>!me)},[W,I]);K.useEffect(()=>{if(O&&!(typeof window>"u")){if(O==="localStorage"||O==="both")try{window.localStorage.setItem(re,rn?"1":"0")}catch{}if(O==="url"||O==="both"){const me=new URLSearchParams(window.location.search);me.set(G,rn?"1":"0");const ke=`${window.location.pathname}?${me.toString()}${window.location.hash}`;window.history.replaceState(null,"",ke)}}},[rn,O,re,G]);const vw=["nhs-navigation-split-view",c?"nhs-navigation-split-view--animated":"",Me?"nhs-navigation-split-view--detail-active":"",Y==="three-column"?"nhs-navigation-split-view--three-column":"",I&&W&&rn?"nhs-navigation-split-view--nav-collapsed":"",p].filter(Boolean).join(" "),tc=K.useRef(null);K.useEffect(()=>{if(!M&&tc.current){const me=pe?`Selected ${pe.label}`:"Selection cleared";tc.current.textContent=me}},[pe,M]),K.useEffect(()=>{!Me&&ge==null&&dt.current&&dt.current.querySelectorAll("[data-nav-item]")[rs.current]?.focus()},[Me,ge]);const In=Y==="three-column",[nc,ww]=K.useState(!1);K.useEffect(()=>{In&&!nc&&ww(!0)},[In,nc]);const $g=K.useRef(In);K.useEffect(()=>{$g.current!==In&&(j?.(In),$g.current=In)},[In,j]);const Sw=()=>{if(Y==="cards")return o.jsxs("ul",{className:"nhs-navigation-split-view__cards",role:"listbox","aria-activedescendant":ge?String(ge):void 0,children:[e.map(be=>{const De=h(be),Ke=De===ge;return o.jsx("li",{className:"nhs-navigation-split-view__card-item",role:"option","aria-selected":Ke,children:o.jsxs("button",{id:String(De),type:"button",className:"nhs-navigation-split-view__card","data-selected":Ke||void 0,"data-disabled":be.disabled||void 0,disabled:be.disabled,onClick:()=>!be.disabled&&Cr(De,be),children:[be.icon&&o.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:be.icon}),o.jsx("span",{className:"nhs-navigation-split-view__item-label",children:be.label}),be.description&&o.jsx("span",{className:"nhs-navigation-split-view__item-description",children:be.description}),i?.(be),be.badge!==void 0&&o.jsx("span",{className:"nhs-navigation-split-view__badge",children:be.badge})]})},De)}),e.length===0&&!m&&o.jsx("li",{className:"nhs-navigation-split-view__card-item","aria-disabled":"true",children:g||o.jsx("div",{style:{padding:16},children:"No items"})})]});const me="nsv-nav-instructions",ke=K.useMemo(()=>K.memo(({item:be,idx:De,selected:Ke,focused:Oe})=>{const Ue=h(be),Tr=be.disabled?{"aria-disabled":!0,tabIndex:-1}:{tabIndex:Oe?0:-1,onClick:()=>{rs.current=De,Cr(Ue,be)},onKeyDown:Jn=>{(Jn.key==="Enter"||Jn.key===" ")&&(Jn.preventDefault(),rs.current=De,Cr(Ue,be))}};return o.jsxs("li",{id:String(Ue),"data-nav-item":!0,className:"nhs-navigation-split-view__list-item nhs-navigation-split-view__item-button",role:"option","aria-selected":Ke,"aria-current":Ke?"true":void 0,"data-selected":Ke||void 0,"data-disabled":be.disabled||void 0,...Tr,children:[be.icon&&o.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:be.icon}),o.jsxs("span",{className:"nhs-navigation-split-view__item-content",children:[o.jsx("span",{className:"nhs-navigation-split-view__item-label",children:be.label}),be.description&&o.jsx("span",{className:"nhs-navigation-split-view__item-description",children:be.description}),i?.(be)]}),be.badge!==void 0&&o.jsx("span",{className:"nhs-navigation-split-view__badge",children:be.badge})]})}),[h,Cr,i]);return o.jsxs(o.Fragment,{children:[o.jsxs("ul",{ref:dt,className:"nhs-navigation-split-view__list",onKeyDown:_w,role:"listbox","aria-label":"Navigation items","aria-describedby":me,"aria-activedescendant":ge?String(ge):void 0,children:[e.map((be,De)=>o.jsx(ke,{item:be,idx:De,selected:h(be)===ge,focused:De===et||et===-1&&De===0&&P==="first","data-just-selected":h(be)===q?"true":void 0},h(be))),e.length===0&&!m&&o.jsx("li",{className:"nhs-navigation-split-view__list-item","aria-disabled":"true",children:g||o.jsx("div",{style:{padding:16},children:"No items"})})]}),o.jsx("div",{id:me,style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:w})]})};return o.jsx("div",{ref:se,className:vw,"aria-label":y?.rootLabel,"data-layout":Y,onKeyDown:He,children:o.jsxs("div",{className:"nhs-navigation-split-view__body",children:[o.jsxs("div",{className:"nhs-navigation-split-view__panes","data-active-detail":Me||void 0,style:{transform:Me?"translateX(-100%)":void 0},children:[o.jsxs("div",{ref:te,className:"nhs-navigation-split-view__nav-pane",role:"navigation","aria-label":y?.navigationLabel||"Items","data-collapsed":rn||void 0,tabIndex:0,children:[I&&W&&o.jsx("div",{className:"nhs-navigation-split-view__nav-collapse",children:o.jsx("button",{type:"button",onClick:xw,className:"nhs-navigation-split-view__nav-collapse-btn","aria-label":rn?ae:z,title:rn?ae:z,children:rn?H||o.jsx(By,{}):U||o.jsx(Ey,{})})}),o.jsx("div",{className:"nhs-navigation-split-view__nav-scroll",children:Sw()}),D&&o.jsx("div",{className:"nhs-navigation-split-view__nav-footer",role:"contentinfo",children:D})]}),o.jsxs("div",{ref:le,className:"nhs-navigation-split-view__content-pane",role:"region","aria-label":y?.contentLabel||"Content","data-has-selection":!!pe||void 0,tabIndex:0,style:{display:lt&&!rt?"none":void 0},children:[Kl&&o.jsx("div",{className:"nhs-navigation-split-view__header",children:gw}),o.jsx("div",{className:"nhs-navigation-split-view__content-inner",style:{padding:32,flex:1},children:s(pe)})]}),Y==="three-column"&&(!A||nc)||lt&&!rt?o.jsx("div",{ref:R,className:"nhs-navigation-split-view__secondary-pane",role:"region","aria-label":y?.secondaryContentLabel||"Secondary",tabIndex:0,children:o.jsxs("div",{className:"nhs-navigation-split-view__secondary-inner",style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[lt&&!rt&&o.jsx("div",{className:"nhs-navigation-split-view__header",children:o.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[ec,o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:o.jsx("h2",{style:{marginLeft:0,marginRight:0},children:pe&&typeof pe=="object"&&"label"in pe?pe.label:String(pe)})})]})})}),pe&&ee&&o.jsx("div",{className:"nhs-navigation-split-view__secondary-header",style:{padding:"16px 32px",borderBottom:"1px solid var(--nsplit-divider)"},children:typeof ee=="function"?ee(pe):ee}),o.jsx("div",{style:{padding:32,flex:1,minWidth:0},children:l?.(pe)})]})}):null]}),o.jsx("div",{ref:tc,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"}}),o.jsx("div",{"aria-live":"polite",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:In?"Expanded to three column layout":"In two column layout"})]})})}zu.displayName="NavigationSplitView";const Wu=(t,e,n,r)=>t==null||Number.isNaN(t)?r:Math.min(n,Math.max(e,t)),Ay=({item:t,maxLines:e,enableDrilldown:n,onExpand:r,isActive:a,topLaneIndex:i})=>{const{ariaLabel:s}=t,l=`${t._pxLeft}px`,u=`${t._pxWidth}px`,c=`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${i})`,d=Math.floor(t._startFraction)+2,f=Math.max(1,Math.round(t._spanColumns)),m=n&&t.childItems&&t.childItems.length>0,g=p=>{m&&(p.preventDefault(),r?.(t))},y=m?{role:"button",tabIndex:0,"aria-haspopup":"dialog","aria-expanded":a||!1,onClick:g,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&g(p),p.key==="Escape"&&a&&g(p)}}:{};return o.jsxs("div",{className:_e("nhsuk-product-roadmap__item",m&&"nhsuk-product-roadmap__item--expandable",a&&"nhsuk-product-roadmap__item--active"),style:{left:l,width:u,top:c,"--item-height":e},role:"gridcell","aria-label":s,"aria-colindex":d,"aria-colspan":f,...y,children:[o.jsx("div",{className:"nhsuk-product-roadmap__item-bg","aria-hidden":"true"}),o.jsxs("div",{className:"nhsuk-product-roadmap__item-content",children:[o.jsx("span",{className:"nhsuk-product-roadmap__item-title",children:t.title}),m&&o.jsx("span",{className:_e("nhsuk-product-roadmap__item-expander",a&&"nhsuk-product-roadmap__item-expander--open"),"aria-hidden":"true"})]})]})},Uu=B.memo(({dateHeadings:t,categories:e,columnWidthPx:n=400,itemMaxLines:r=2,className:a,ariaLabel:i="Product roadmap",enableDrilldown:s=!1,onToggleItem:l,drilldownMode:u="overlay",...c})=>{const[d,f]=B.useState(()=>new Set),[m,g]=B.useState(()=>new Set),y=B.useRef(new Set),p=B.useCallback(v=>d.has(v),[d]),h=B.useCallback(v=>{f(A=>{const D=new Set(A);return D.has(v.id)?(D.delete(v.id),g(I=>{const T=new Set(I);return T.add(v.id),T}),setTimeout(()=>g(I=>{const T=new Set(I);return T.delete(v.id),T}),240),l?.(v.id,!1)):(D.add(v.id),l?.(v.id,!0)),D})},[l]);B.useLayoutEffect(()=>{if(u!=="inline"||!s)return;const v=[];if(d.forEach(T=>{y.current.has(T)||v.push(T)}),y.current=new Set(d),!v.length)return;const A=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,D=v.map(T=>`.nhsuk-product-roadmap__inline-children[data-parent="${T}"] .nhsuk-product-roadmap__inline-child`).join(","),I=Array.from(document.querySelectorAll(D));if(I.length){if(A){I.forEach(T=>{T.style.opacity="1",T.style.transform="translateY(0)"});return}Promise.resolve().then(()=>hw).then(T=>{(T.gsap||T.default||T).to(I,{opacity:1,y:0,duration:.32,ease:"power2.out",stagger:.05})}).catch(()=>{I.forEach(T=>{T.style.opacity="1",T.style.transform="translateY(0)"})})}},[d,u,s]);const _=B.useCallback(()=>{d.size&&f(new Set)},[d]),N=_e("nhsuk-product-roadmap",a),j=Wu(n,120,1200,400),w=Wu(r,1,6,2),P=B.useMemo(()=>t.map(v=>new Date(v+" 01")),[t]),C=B.useMemo(()=>{if(P.length===0){const D=new Date;return[D,D]}const v=new Date(P[0]),A=Lr.offset(new Date(P[P.length-1]),1);return[v,A]},[P]),M=B.useMemo(()=>Ps().domain(C).range([0,P.length*j]),[C,P.length,j]),S=B.useCallback(v=>{if(v.startDate){const z=new Date(v.startDate),H=new Date(v.endDate??v.startDate);H<z&&H.setTime(z.getTime());const U=M(z),O=Lr.offset(new Date(H),1);let re=M(O);Number.isFinite(re)||(re=U+j);const G=Math.max(j*.25,re-U),ce=U/j,ve=G/j;return{...v,_pxLeft:U,_pxWidth:G,_startFraction:ce,_spanColumns:ve}}const A=v.date??1,D=v.dateOffset??0,I=v.length??1,T=v.partialLength??1,E=A-1+D,ae=I-1+T;return{...v,_pxLeft:E*j,_pxWidth:ae*j,_startFraction:E,_spanColumns:ae}},[M,j]),x=B.useMemo(()=>e.map(v=>{const D=v.roadmapItems.map(T=>{const E=!T.childItems&&T.children?{...T,childItems:T.children}:{...T};return S(E)}).sort((T,E)=>T._pxLeft!==E._pxLeft?T._pxLeft-E._pxLeft:E._pxWidth-T._pxWidth),I=[];return D.forEach(T=>{const E=T._pxLeft,ae=T._pxLeft+T._pxWidth;let z=I.findIndex(H=>H<=E);z===-1&&(z=I.length,I.push(0)),I[z]=ae,T.verticalPosition=z+1}),{...v,roadmapItems:D,_laneCount:I.length}}),[e,S]),$=B.useMemo(()=>x.map(v=>v._laneCount||1),[x]),k=B.useMemo(()=>`var(--category-width) ${t.map(()=>"var(--column-width)").join(" ")}`,[t]);return o.jsxs("div",{className:N,style:{"--column-width":`${j}px`,gridTemplateColumns:k},role:"grid","aria-label":i,"aria-colcount":t.length+1,"aria-rowcount":x.length+1,...c,children:[o.jsxs("div",{className:"nhsuk-product-roadmap__header-row",role:"row","aria-rowindex":1,children:[o.jsx("div",{className:"nhsuk-product-roadmap__header-cell",role:"columnheader","aria-colindex":1,children:o.jsx("span",{className:"nhsuk-visually-hidden",children:"Category"})}),t.map((v,A)=>o.jsx("div",{className:"nhsuk-product-roadmap__date-heading",role:"columnheader","aria-colindex":A+2,children:v},`${v}-${A}`))]}),x.map((v,A)=>{const D=A+2,I=$[A];let T,E=0,ae=[];s&&u==="inline"&&(ae=v.roadmapItems.filter(O=>p(O.id)&&O.childItems&&O.childItems.length).map(O=>({id:O.id,lane:O.verticalPosition||1,count:O.childItems.length})).sort((O,re)=>O.lane-re.lane),E=ae.reduce((O,re)=>O+re.count,0));const z=I+E;T=`calc((${z} * var(--roadmap-item-block-height)) + (max(0, ${z} - 1) * var(--roadmap-row-gap)))`;const H={};let U=0;return ae.forEach(O=>{U+=O.count,H[O.lane+1]=U}),o.jsxs("div",{className:"nhsuk-product-roadmap__row",role:"row","aria-rowindex":D,children:[o.jsx("div",{className:"nhsuk-product-roadmap__category-cell",role:"rowheader","aria-colindex":1,children:v.heading}),o.jsx("div",{className:"nhsuk-product-roadmap__items-row",style:{gridColumn:`2 / span ${t.length}`,height:T},children:o.jsx("div",{className:"nhsuk-product-roadmap__items-layer",children:v.roadmapItems.map((O,re)=>{const G=(O.verticalPosition||1)-1,ce=ae.filter(ee=>ee.lane-1<G).reduce((ee,ie)=>ee+ie.count,0),ve=G+ce,de=p(O.id),he=m.has(O.id);return o.jsxs(B.Fragment,{children:[o.jsx(Ay,{item:O,maxLines:w,enableDrilldown:s,onExpand:h,isActive:de,topLaneIndex:ve,laneOffset:ce}),s&&u==="inline"&&(de||he)&&O.childItems&&o.jsx("div",{"data-parent":O.id,className:"nhsuk-product-roadmap__inline-children","aria-label":`${O.title} child tasks`,children:O.childItems.map((ee,ie)=>{const L="calc(var(--roadmap-item-block-height) * 0.75)";let F=O._pxLeft,W=O._pxWidth;if(ee.startDate){const X=new Date(ee.startDate);let fe=ee.endDate?new Date(ee.endDate):new Date(X);fe<X&&(fe=new Date(X));const Se=new Date(fe);Se.setDate(Se.getDate()+1);const ge=M(X);let pe=M(Se);(!Number.isFinite(pe)||pe<=ge)&&(pe=ge+6),F=ge,W=Math.max(6,pe-ge)}const Y=ve+1+ie;return o.jsxs("div",{className:_e("nhsuk-product-roadmap__inline-child",ee.status&&`nhsuk-product-roadmap__inline-child--status-${ee.status}`,!de&&he&&"nhsuk-product-roadmap__inline-child--collapsing"),style:{left:`${F}px`,width:`${W}px`,top:`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${Y})`,height:L,opacity:de?0:void 0,transform:de?"translateY(-6px)":void 0},children:[o.jsx("div",{className:"nhsuk-product-roadmap__inline-child-bg"}),o.jsx("div",{className:"nhsuk-product-roadmap__inline-child-content",children:ee.title})]},ee.id??ie)})})]},O.id??re)})})})]},`${v.heading}-${A}`)}),s&&u==="overlay"&&d.size===1&&(()=>{const v=Array.from(d)[0],A=e.flatMap(D=>D.roadmapItems).find(D=>D.id===v);return!A||!A.childItems?null:o.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-overlay",role:"dialog","aria-modal":"true","aria-label":`${A.title} details`,children:[o.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-panel",children:[o.jsxs("header",{className:"nhsuk-product-roadmap__drilldown-header",children:[o.jsx("h3",{className:"nhsuk-product-roadmap__drilldown-title",children:A.title}),o.jsx("button",{type:"button",className:"nhsuk-product-roadmap__drilldown-close",onClick:_,"aria-label":"Close details",children:"Ã—"})]}),o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-content",children:A.content}),o.jsx("ul",{className:"nhsuk-product-roadmap__drilldown-children",children:A.childItems.map((D,I)=>o.jsxs("li",{className:"nhsuk-product-roadmap__drilldown-child",children:[o.jsx("strong",{className:"nhsuk-product-roadmap__drilldown-child-title",children:D.title}),D.content&&o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-child-content",children:D.content})]},D.id??I))})]}),o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-backdrop",onClick:_,"aria-hidden":"true"})]})})()]})});Uu.displayName="ProductRoadmap";function Gu(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=Gu(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ci(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=Gu(t))&&(r&&(r+=" "),r+=e);return r}function st(t){return function(){return t}}const Gs=Math.PI,Vs=2*Gs,An=1e-6,Ry=Vs-An;function Vu(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Hy(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Vu;const n=10**e;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class Oy{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Vu:Hy(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,a){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(e,n,r,a,i,s){this._append`C${+e},${+n},${+r},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(e,n,r,a,i){if(e=+e,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,l=this._y1,u=r-e,c=a-n,d=s-e,f=l-n,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>An)if(!(Math.abs(f*u-c*d)>An)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-s,y=a-l,p=u*u+c*c,h=g*g+y*y,_=Math.sqrt(p),N=Math.sqrt(m),j=i*Math.tan((Gs-Math.acos((p+m-h)/(2*_*N)))/2),w=j/N,P=j/_;Math.abs(w-1)>An&&this._append`L${e+w*d},${n+w*f}`,this._append`A${i},${i},0,0,${+(f*g>d*y)},${this._x1=e+P*u},${this._y1=n+P*c}`}}arc(e,n,r,a,i,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),u=r*Math.sin(a),c=e+l,d=n+u,f=1^s,m=s?a-i:i-a;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>An||Math.abs(this._y1-d)>An)&&this._append`L${c},${d}`,r&&(m<0&&(m=m%Vs+Vs),m>Ry?this._append`A${r},${r},0,1,${f},${e-l},${n-u}A${r},${r},0,1,${f},${this._x1=c},${this._y1=d}`:m>An&&this._append`A${r},${r},0,${+(m>=Gs)},${f},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function Yu(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Oy(e)}function qu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Xu(t){this._context=t}Xu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ku(t){return new Xu(t)}function Zu(t){return t[0]}function Ju(t){return t[1]}function Qu(t,e){var n=st(!0),r=null,a=Ku,i=null,s=Yu(l);t=typeof t=="function"?t:t===void 0?Zu:st(t),e=typeof e=="function"?e:e===void 0?Ju:st(e);function l(u){var c,d=(u=qu(u)).length,f,m=!1,g;for(r==null&&(i=a(g=s())),c=0;c<=d;++c)!(c<d&&n(f=u[c],c,u))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+t(f,c,u),+e(f,c,u));if(g)return i=null,g+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:st(+u),l):t},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:st(+u),l):e},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:st(!!u),l):n},l.curve=function(u){return arguments.length?(a=u,r!=null&&(i=a(r)),l):a},l.context=function(u){return arguments.length?(u==null?r=i=null:i=a(r=u),l):r},l}function Ys(t,e,n){var r=null,a=st(!0),i=null,s=Ku,l=null,u=Yu(c);t=typeof t=="function"?t:t===void 0?Zu:st(+t),e=typeof e=="function"?e:st(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Ju:st(+n);function c(f){var m,g,y,p=(f=qu(f)).length,h,_=!1,N,j=new Array(p),w=new Array(p);for(i==null&&(l=s(N=u())),m=0;m<=p;++m){if(!(m<p&&a(h=f[m],m,f))===_)if(_=!_)g=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=m-1;y>=g;--y)l.point(j[y],w[y]);l.lineEnd(),l.areaEnd()}_&&(j[m]=+t(h,m,f),w[m]=+e(h,m,f),l.point(r?+r(h,m,f):j[m],n?+n(h,m,f):w[m]))}if(N)return l=null,N+""||null}function d(){return Qu().defined(a).curve(s).context(i)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:st(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:st(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:st(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:st(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:st(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:st(+f),c):n},c.lineX0=c.lineY0=function(){return d().x(t).y(e)},c.lineY1=function(){return d().x(t).y(n)},c.lineX1=function(){return d().x(r).y(e)},c.defined=function(f){return arguments.length?(a=typeof f=="function"?f:st(!!f),c):a},c.curve=function(f){return arguments.length?(s=f,i!=null&&(l=s(i)),c):s},c.context=function(f){return arguments.length?(f==null?i=l=null:l=s(i=f),c):i},c}function ed(t){return t<0?-1:1}function td(t,e,n){var r=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(r||a<0&&-0),s=(n-t._y1)/(a||r<0&&-0),l=(i*a+s*r)/(r+a);return(ed(i)+ed(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(l))||0}function nd(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qs(t,e,n){var r=t._x0,a=t._y0,i=t._x1,s=t._y1,l=(i-r)/3;t._context.bezierCurveTo(r+l,a+l*e,i-l,s-l*n,i,s)}function ui(t){this._context=t}ui.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qs(this,this._t0,nd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qs(this,nd(this,n=td(this,t,e)),n);break;default:qs(this,this._t0,n=td(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},Object.create(ui.prototype).point=function(t,e){ui.prototype.point.call(this,e,t)};function di(t){return new ui(t)}function zy(t,e,n){const r=vc(t,e);return Ps().domain(r).range(n)}function rd(t,e,n){const[r,a]=vc(t,e);if(!(Number.isFinite(r)&&Number.isFinite(a)))return Qa().domain([0,0]).range(n);let s;if(r<=0)s=Math.min(0,r);else{const u=a-r,c=(u>0?u:r)*.1;s=Math.max(0,r-c),s===r&&(s=Math.max(0,r*.9))}const l=a??0;return Qa().domain([s,l]).nice().range(n)}function Xs(t,e,n,r){const a=Qu().x(e).y(n);return r?.smooth!==!1&&a.curve(di),a(t)??""}function Wy(t={}){const e=K.useRef(null),n=K.useMemo(()=>({top:t.top??16,right:t.right??16,bottom:t.bottom??32,left:t.left??48}),[t.bottom,t.left,t.right,t.top]),[r,a]=K.useState({width:0,height:0});K.useLayoutEffect(()=>{if(!e.current)return;const l=new ResizeObserver(u=>{for(const c of u){const{width:d,height:f}=c.contentRect;a({width:d,height:f})}});return l.observe(e.current),()=>l.disconnect()},[]);const i=Math.max(0,r.width-n.left-n.right),s=Math.max(0,r.height-n.top-n.bottom);return{width:r.width,height:r.height,innerWidth:i,innerHeight:s,margin:n,ref:e}}const ad=K.createContext(null);function yn(){return K.useContext(ad)}const id=({height:t=240,margin:e,width:n,className:r="fdp-chart",children:a,role:i="group",ariaLabel:s})=>{const l=Wy(e),u={height:t,position:"relative"};return n!==void 0&&(u.width=typeof n=="number"?`${n}px`:n),o.jsx("div",{ref:l.ref,className:r,style:u,role:i,"aria-label":s,children:o.jsx(ad.Provider,{value:l,children:a})})},Ks=K.createContext(null),Rn=()=>K.useContext(Ks),sd=({series:t,innerWidth:e,innerHeight:n,parseX:r,children:a,xTickCount:i=6,yTickCount:s=5,yDomain:l,xPadding:u,yPadding:c})=>{const d=yn(),f=e??d?.innerWidth??0,m=n??d?.innerHeight??0,g=K.useMemo(()=>t.flatMap(w=>w.data),[t]),y=K.useCallback(w=>{if(r)return r(w);const P=w.x;return P instanceof Date?P:new Date(P)},[r]),p=u??6,h=c??6,_=K.useMemo(()=>zy(g,y,[p,Math.max(0,f-p)]),[g,y,f,p]),N=K.useMemo(()=>{if(l){const w=rd([],P=>P.y,[Math.max(0,m-h),h]);return w.domain(l),w}return rd(g,w=>w.y,[Math.max(0,m-h),h])},[g,m,l]),j=K.useMemo(()=>({xScale:_,yScale:N,getXTicks:(w=i)=>_.ticks(w),getYTicks:(w=s)=>N.ticks(w)}),[_,N,i,s]);return o.jsx(Ks.Provider,{value:j,children:a})},Zs=({type:t,scale:e,tickCount:n,tickValues:r,formatTick:a,label:i,offset:s,className:l,minLabelSpacing:u,maxTickLabelLength:c,autoMinLabelSpacing:d=t==="x",labelAngle:f=0,allowLabelWrap:m=!0,tickFormatPreset:g})=>{const y=Rn(),p=yn(),h=e||(t==="x"?y?.xScale:y?.yScale),_=n??(t==="x"?6:5),N=typeof a=="function",j=K.useMemo(()=>{if(N||!g)return;const C=M=>new Intl.DateTimeFormat(void 0,M);switch(g){case"dayShortMonth":return M=>{const S=M instanceof Date?M:new Date(M);return`${S.getDate()}
${C({month:"short"}).format(S)}`};case"dayShortMonthYear":return M=>{const S=M instanceof Date?M:new Date(M);return`${S.getDate()}
${C({month:"short"}).format(S)} ${S.getFullYear()}`};case"shortMonth":return M=>{const S=M instanceof Date?M:new Date(M);return C({month:"short"}).format(S)};case"shortMonthYear":return M=>{const S=M instanceof Date?M:new Date(M);return`${C({month:"short"}).format(S)} ${S.getFullYear()}`};case"hourMinute":return M=>{const S=M instanceof Date?M:new Date(M);return C({hour:"2-digit",minute:"2-digit"}).format(S)};default:return}},[N,g]);let w=N?a:j||(C=>String(C));const P=K.useMemo(()=>r&&Array.isArray(r)?r:h?typeof h.ticks=="function"?h.ticks(_):h.domain?h.domain():[]:[],[h,_,r]);if(t==="x"&&!N&&!g&&P.length&&P.every(C=>C instanceof Date)){const C=P[0],M=P[P.length-1],S=M.getTime()-C.getTime(),x=24*3600*1e3,$=365*x,k=C.getFullYear()===M.getFullYear(),v=new Intl.DateTimeFormat(void 0,{month:"short"});if(S<2*x){const A=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"});w=D=>A.format(D)}else if(S<32*x)w=A=>{const D=A;return`${D.getDate()} ${v.format(D)}`};else if(S<$&&k)w=A=>v.format(A);else if(S<2*$){const A=new Set;w=D=>{const I=D,T=I.getMonth();return A.has(T)||A.add(T),`${v.format(I)} ${I.getFullYear()}`}}else w=A=>String(A.getFullYear())}if(!h||!p)return null;if(t==="x"){const C=s??p.innerHeight,M=typeof h.bandwidth=="function",S=M?h.bandwidth():0,x=v=>{const A=h(v);return M?A+S/2:A};let $=u??0;if(d&&u==null){const v=P.map(D=>w(D).replace(/\n.*/g,"")),A=v.length?v.reduce((D,I)=>D+I.length,0)/v.length:0;$=Math.max(12,Math.round(A*6+4))}const k=K.useMemo(()=>{if(r&&Array.isArray(r)||$<=0)return P;const v=[];let A=-1/0;for(const D of P){const I=x(D);I-A>=$&&(v.push(D),A=I)}return v},[P,h,$,r,M,S]);return o.jsxs("g",{className:["fdp-axis","fdp-axis--x",l].filter(Boolean).join(" "),transform:`translate(0,${C})`,fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[o.jsx("line",{x1:0,x2:p.innerWidth,y1:0,y2:0,stroke:"currentColor"}),k.map((v,A)=>{const D=w(v),I=c&&D.length>c?D.slice(0,Math.max(1,c-1))+"â€¦":D,T=m?I.split(/\n/):[I.replace(/\n/g," ")],E=f<0?"end":f>0?"start":"middle";return o.jsxs("g",{transform:`translate(${x(v)},0)`,children:[o.jsx("line",{y2:6,stroke:"currentColor"}),o.jsxs("text",{y:9,textAnchor:E,className:"fdp-axis__tick",dominantBaseline:"hanging",transform:f?`rotate(${f})`:void 0,fontFamily:"inherit",children:[T.map((ae,z)=>o.jsx("tspan",{x:0,dy:z===0?0:"1.1em",children:ae},z)),I!==D&&o.jsx("title",{children:D})]})]},v?.toString?.()||A)})]})}return o.jsxs("g",{className:["fdp-axis","fdp-axis--y",l].filter(Boolean).join(" "),fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[P.map((C,M)=>{const S=w(C),x=c&&S.length>c?S.slice(0,Math.max(1,c-1))+"â€¦":S,$=m?x.split(/\n/):[x.replace(/\n/g," ")];return o.jsxs("g",{transform:`translate(0,${h(C)})`,children:[o.jsx("line",{x2:-6,stroke:"currentColor"}),o.jsxs("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:[$.map((k,v)=>o.jsx("tspan",{x:-9,dy:v===0?0:"1.1em",children:k},v)),x!==S&&o.jsx("title",{children:S})]})]},C?.toString?.()||M)}),i&&o.jsx("text",{transform:"rotate(-90)",x:-p.innerHeight/2,y:-p.margin.left+12,textAnchor:"middle",className:"fdp-axis__label",fontFamily:"inherit",children:i})]})},od=({axis:t="y",tickCount:e,stroke:n="var(--fdp-chart-grid,#e5e5e5)",dasharray:r="2 4",className:a})=>{const i=Rn(),s=yn();if(!i||!s)return null;const l=t==="y"?i.getYTicks(e):i.getXTicks(e);return o.jsxs("g",{className:["fdp-grid",a].filter(Boolean).join(" "),children:[t==="y"&&l.map((u,c)=>o.jsx("line",{x1:0,x2:s.innerWidth,y1:i.yScale(u),y2:i.yScale(u),stroke:n,strokeDasharray:r},c)),t==="x"&&l.map((u,c)=>o.jsx("line",{y1:0,y2:s.innerHeight,x1:i.xScale(u),x2:i.xScale(u),stroke:n,strokeDasharray:r},c))]})},Or={color:{"data-viz":{$type:"color",categorical:{1:{$value:"{color.primary.blue}",$description:"Series 1 â€“ NHS Blue (brand core)"},2:{$value:"#41B6E6",$description:"Series 2 â€“ NHS Light Blue (new)"},3:{$value:"{color.secondary.aqua-green}",$description:"Series 3 â€“ NHS Aqua Green (existing)"},4:{$value:"#78BE20",$description:"Series 4 â€“ NHS Light Green (new)"},5:{$value:"{color.primary.green}",$description:"Series 5 â€“ NHS Green (existing)"},6:{$value:"{color.secondary.warm-yellow}",$description:"Series 6 â€“ NHS Warm Yellow (existing; distinct from focus yellow)"},7:{$value:"#ED4F00",$description:"Series 7 â€“ NHS Tangerine (new; warmer/deeper than existing orange)"},8:{$value:"{color.secondary.pink}",$description:"Series 8 â€“ NHS Pink (existing)"},9:{$value:"#E317AA",$description:"Series 9 â€“ NHS Bright Pink (new vivid accent)"},10:{$value:"#880FB8",$description:"Series 10 â€“ NHS Light Purple (new mid purple)"},11:{$value:"{color.primary.purple}",$description:"Series 11 â€“ NHS Purple (existing dark purple)"},12:{$value:"#9A6324",$description:"Series 12 â€“ NHS Brown (new; earth neutral)"}},neutral:{comparison:{$value:"{color.grey.1}",$description:"Neutral comparison series (optional)"}},region:{$comment:"Fixed colours for NHS geographical regions; prefer stable mapping for maps. London colour updated (#78BE21 â€“ light green).","north-east":{$value:"{color.primary.blue}",$description:"North East â€“ NHS Blue"},"north-west":{$value:"#41B6E6",$description:"North West â€“ NHS Light Blue"},"east-of-england":{$value:"{color.primary.purple}",$description:"East of England â€“ NHS Purple"},midlands:{$value:"{color.secondary.pink}",$description:"Midlands â€“ NHS Pink"},london:{$value:"#78BE21",$description:"London â€“ NHS Light Green (new)"},"south-west":{$value:"#FAE100",$description:"South West â€“ NHS Yellow variant (new)"},"south-east":{$value:"#ed8b00",$description:"South East â€“ NHS Orange (existing base orange)"}},severity:{$comment:"Semantic severity / alert colours (light background ramp â†’ critical).",low:{$value:"{color.secondary.pale-yellow}",$description:"Low severity â€“ pale yellow background"},moderate:{$value:"{color.secondary.warm-yellow}",$description:"Moderate severity â€“ warm yellow"},high:{$value:"{color.secondary.orange}",$description:"High severity â€“ orange"},critical:{$value:"{color.primary.red}",$description:"Critical severity â€“ red"}},"org-level":{$comment:"Organisational level semantic colours (stable NHS brand mappings).",trust:{$value:"{color.primary.blue}",$description:"Trust â€“ NHS Blue"},ambulance:{$value:"{color.primary.green}",$description:"Ambulance â€“ NHS Green"},icb:{$value:"{color.primary.dark-pink}",$description:"ICB â€“ NHS Dark Pink"},region:{$value:"{color.primary.purple}",$description:"Region â€“ NHS Purple"}},stroke:{$comment:"Automatic contrast stroke colours for overlays / borders. Light fills get dark stroke; dark fills get white stroke.",categorical:{1:{$value:"#ffffff",$description:"Stroke for series 1 (blue)"},2:{$value:"#212b32",$description:"Stroke for series 2 (light blue)"},3:{$value:"#212b32",$description:"Stroke for series 3 (aqua green)"},4:{$value:"#212b32",$description:"Stroke for series 4 (light green)"},5:{$value:"#ffffff",$description:"Stroke for series 5 (green)"},6:{$value:"#212b32",$description:"Stroke for series 6 (warm yellow)"},7:{$value:"#ffffff",$description:"Stroke for series 7 (tangerine)"},8:{$value:"#ffffff",$description:"Stroke for series 8 (pink)"},9:{$value:"#ffffff",$description:"Stroke for series 9 (bright pink)"},10:{$value:"#ffffff",$description:"Stroke for series 10 (light purple)"},11:{$value:"#ffffff",$description:"Stroke for series 11 (purple)"},12:{$value:"#ffffff",$description:"Stroke for series 12 (brown)"}},region:{$comment:"Region stroke colours derived from fill colours: dark fills lightened ~35%; light fills darkened ~25% for consistent contrast without defaulting to pure white/black.","north-east":{$value:"#5996D1",$description:"Stroke for North East (blue lightened 35%)"},"north-west":{$value:"#3189AD",$description:"Stroke for North West (light blue darkened 25%)"},"east-of-england":{$value:"#7A59A3",$description:"Stroke for East of England (purple lightened 35%)"},midlands:{$value:"#CA71A4",$description:"Stroke for Midlands (pink lightened 35%)"},london:{$value:"#5A8F19",$description:"Stroke for London (light green darkened 25%)"},"south-west":{$value:"#BCA900",$description:"Stroke for South West (yellow darkened 25%)"},"south-east":{$value:"#B26800",$description:"Stroke for South East (orange darkened 25%)"}},severity:{$comment:"Contrast strokes for severity colours (light backgrounds use dark stroke; dark backgrounds use white).",low:{$value:"#212b32",$description:"Stroke for low severity (pale yellow fill)"},moderate:{$value:"#212b32",$description:"Stroke for moderate severity (warm yellow fill)"},high:{$value:"#212b32",$description:"Stroke for high severity (orange fill)"},critical:{$value:"#ffffff",$description:"Stroke for critical severity (red fill)"}},"org-level":{$comment:"Contrast strokes for organisational level colours (all dark brand fills so white stroke for consistency).",trust:{$value:"#ffffff",$description:"Stroke for trust (blue fill)"},ambulance:{$value:"#ffffff",$description:"Stroke for ambulance (green fill)"},icb:{$value:"#ffffff",$description:"Stroke for ICB (dark pink fill)"},region:{$value:"#ffffff",$description:"Stroke for region (purple fill)"}}},spc:{$comment:"SPC (Statistical Process Control) semantic variation colours aligned to SPCChart.scss and SPCIcons.",improvement:{$value:"#00B0F0",$description:"SPC special cause improvement (favourable)"},concern:{$value:"#E46C0A",$description:"SPC special cause concern (deteriorating)"},"no-judgement":{$value:"#490092",$description:"SPC special cause (no directional judgement)"},"common-cause":{$value:"#A6A6A6",$description:"SPC common cause (baseline variation)"},"assurance-pass":{$value:"#00823B",$description:"SPC assurance pass indicator (process capable)"},"assurance-fail":{$value:"#DA291C",$description:"SPC assurance fail indicator (process not capable)"},gradient:{$comment:"Opacity stops for SPC icon gradient wash (applied top-left -> bottom-right). Consumers build gradients using these opacities + base colour.",stop:{"start-opacity":{$value:"0.18",$description:"Start stop opacity (0%) for classic variant wash"},"mid-opacity":{$value:"0.06",$description:"Mid stop opacity (~65-75%)"},"end-opacity":{$value:"0",$description:"End stop opacity (100%)"},"triangle-start-opacity":{$value:"0.18",$description:"Start opacity for triangle variants (kept aligned)"},"triangle-mid-opacity":{$value:"0.06",$description:"Mid opacity for triangle variants"},"triangle-end-opacity":{$value:"0",$description:"End opacity for triangle variants"}}},stroke:{$comment:"Contrast stroke colours for SPC variation fills.",improvement:{$value:"#000000",$description:"Stroke for improvement points"},concern:{$value:"#000000",$description:"Stroke for concern points"},"no-judgement":{$value:"#000000",$description:"Stroke for no-judgement points"},"common-cause":{$value:"#ffffff",$description:"Stroke for common cause points"},"assurance-pass":{$value:"#000000",$description:"Stroke for assurance pass points"},"assurance-fail":{$value:"#000000",$description:"Stroke for assurance fail points"}}}}}},fi={color:{primary:{$type:"color",blue:{$value:"#005eb8",$description:"NHS Blue - Primary brand color"},"blue-active":{$value:"#002f5c",$description:"NHS Active Blue (50% shade) â€“ alias of button/login active; promoted for general reuse"},white:{$value:"#ffffff",$description:"NHS White"},black:{$value:"#212b32",$description:"NHS Black"},green:{$value:"#007f3b",$description:"NHS Green"},purple:{$value:"#330072",$description:"NHS Purple"},"dark-pink":{$value:"#7c2855",$description:"NHS Dark Pink"},red:{$value:"#d5281b",$description:"NHS Red"},"light-purple":{$value:"#880FB8",$description:"NHS Light Purple (data viz promoted)"},yellow:{$value:"#ffeb3b",$description:"NHS Yellow"}},secondary:{$type:"color","pale-yellow":{$value:"#fff9c4",$description:"NHS Pale Yellow"},"warm-yellow":{$value:"#ffb81c",$description:"NHS Warm Yellow"},"region-yellow":{$value:"#FAE100",$description:"NHS Region Yellow (maps)"},orange:{$value:"#ed8b00",$description:"NHS Orange"},tangerine:{$value:"#ED4F00",$description:"NHS Tangerine (data viz promoted)"},"aqua-green":{$value:"#00a499",$description:"NHS Aqua Green"},"light-blue":{$value:"#41B6E6",$description:"NHS Light Blue (data viz promoted)"},pink:{$value:"#ae2573",$description:"NHS Pink"},"bright-pink":{$value:"#E317AA",$description:"NHS Bright Pink (data viz promoted)"},"light-green":{$value:"#78BE20",$description:"NHS Light Green (data viz promoted)"},brown:{$value:"#9A6324",$description:"NHS Brown (data viz promoted neutral)"}},grey:{1:{$value:"#4c6272",$description:"NHS Grey 1 - Darkest grey"},2:{$value:"#768692",$description:"NHS Grey 2 - Darker grey"},3:{$value:"#aeb7bd",$description:"NHS Grey 3 - Medium grey"},4:{$value:"#d8dde0",$description:"NHS Grey 4 - Light grey"},5:{$value:"#f0f4f5",$description:"NHS Grey 5 - Lightest grey"},$type:"color"},accessibility:{$type:"color",$comment:"Accessibility-oriented color tokens. Includes CVD-safe pairs and Okabeâ€“Ito colors. Use these for positive/negative semantics and colour-blindâ€“friendly defaults.","okabe-ito":{green:{$value:"#009E73",$description:"Okabeâ€“Ito green (CVD-safe) â€“ recommended positive"},vermillion:{$value:"#D55E00",$description:"Okabeâ€“Ito vermillion / redâ€“orange (CVD-safe) â€“ recommended negative"}},"cvd-safe":{blue:{$value:"#1f77b4",$description:"CVD-safe blue (pairs with orange); widely used in Matplotlib/Tableau sets"},orange:{$value:"#ff7f0e",$description:"CVD-safe orange (pairs with blue)"}},positive:{$value:"{color.accessibility.okabe-ito.green}",$description:"Accessibility semantic alias â€“ positive"},negative:{$value:"{color.accessibility.okabe-ito.vermillion}",$description:"Accessibility semantic alias â€“ negative"}}}},Uy=["#005eb8","#0072ce","#41b6e6","#00a499","#7c2855","#330072","#d5281b","#ffb81c","#fae100","#4c6272","#768692","#aeb7bd"];let Js=null,Qs=null,eo=null,ld="optimized";function Gy(){const t={color:{...fi.color,...Or.color}},e=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,t);if(!i)return;const s=i.$value||i.value;if(typeof s=="string"&&/^\{.+\}$/.test(s))return e(s.slice(1,-1),a);if(typeof s=="string")return s},n=[];try{for(let r=1;r<=12;r++){const a=`color.data-viz.categorical.${r}`,i=e(a);if(!i)throw new Error(`Missing token ${a}`);n.push(i)}return n}catch{return Uy}}function Vy(){return Js||(Js=Gy()),Js}function Yy(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t.trim());return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function to(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function qy(t,e,n){const r=to(t),a=to(e),i=to(n),s=r*.4124+a*.3576+i*.1805,l=r*.2126+a*.7152+i*.0722,u=r*.0193+a*.1192+i*.9505;return{x:s*100,y:l*100,z:u*100}}function Xy(t,e,n){let s=t/95.047,l=e/100,u=n/108.883;const c=d=>d>.008856?Math.cbrt(d):7.787*d+16/116;return s=c(s),l=c(l),u=c(u),{L:116*l-16,a:500*(s-l),b:200*(l-u)}}function cd(t){const e=Yy(t);if(!e)return null;const n=qy(e.r,e.g,e.b);return Xy(n.x,n.y,n.z)}function ud(t,e){const n=t.L-e.L,r=t.a-e.a,a=t.b-e.b;return Math.sqrt(n*n+r*r+a*a)}function Ky(){const t=Vy();if(t.length<=2)return t.slice();const e=t.map(s=>cd(s));let n=0,r=-1;for(let s=0;s<t.length;s++){const l=e[s];if(!l)continue;let u=0,c=0;for(let f=0;f<t.length;f++)s!==f&&e[f]&&(u+=ud(l,e[f]),c++);const d=u/Math.max(1,c);d>r&&(r=d,n=s)}const a=new Set(t.map((s,l)=>l)),i=[];for(i.push(n),a.delete(n);a.size;){let s=Array.from(a)[0],l=-1;for(const u of a){const c=e[u];if(!c)continue;let d=1/0;for(const f of i){const m=e[f];if(m){const g=ud(c,m);g<d&&(d=g)}}d>l&&(l=d,s=u)}i.push(s),a.delete(s)}return i.map(s=>t[s])}function Zy(){return Qs||(Qs=Ky()),Qs}function Jy(t,e,n){const r=(t+16)/116,a=e/500+r,i=r-n/200,s=d=>{const f=d*d*d;return f>.008856?f:(d-16/116)/7.787},l=s(a)*95.047,u=s(r)*100,c=s(i)*108.883;return{X:l,Y:u,Z:c}}function Qy(t,e,n){t/=100,e/=100,n/=100;let r=t*3.2406+e*-1.5372+n*-.4986,a=t*-.9689+e*1.8758+n*.0415,i=t*.0557+e*-.204+n*1.057;const s=l=>l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055;return r=Math.min(1,Math.max(0,s(r))),a=Math.min(1,Math.max(0,s(a))),i=Math.min(1,Math.max(0,s(i))),{r:Math.round(r*255),g:Math.round(a*255),b:Math.round(i*255)}}function ex(t,e,n){return`#${[t,e,n].map(r=>r.toString(16).padStart(2,"0")).join("")}`}function tx(t,e){const n=cd(t);if(!n)return t;const r=Math.min(100,Math.max(0,n.L+e)),{X:a,Y:i,Z:s}=Jy(r,n.a,n.b),l=Qy(a,i,s);return ex(l.r,l.g,l.b)}function nx(){const t=Zy(),n=[12,-12,24,-24].map(a=>t.map(i=>tx(i,a))),r=[...t];return n.forEach(a=>r.push(...a)),r}function rx(){return(!eo||ax())&&(eo=nx(),dd=ld),eo}let dd=null;function ax(){return dd!==ld}function Rt(t){const e=rx();return e[t%e.length]}let lr=null,zr=null,Wr=null,Ur=null;function ix(){const t=Or?.color?.["data-viz"]?.stroke;if(t){const e=t.categorical||{};lr=[];for(let i=1;i<=12;i++){const s=e[String(i)]?.$value||e[String(i)]?.value;lr.push(typeof s=="string"?s:"#212b32")}const n=t.region||{};zr={},Object.keys(n).forEach(i=>{const s=n[i]?.$value||n[i]?.value;typeof s=="string"&&(zr[i]=s)});const r=t.severity||{},a=t["org-level"]||{};Ur={},Object.keys(a).forEach(i=>{const s=a[i]?.$value||a[i]?.value;typeof s=="string"&&(Ur[i]=s)}),Wr={},Object.keys(r).forEach(i=>{const s=r[i]?.$value||r[i]?.value;typeof s=="string"&&(Wr[i]=s)})}}function hi(){(!lr||!zr||!Wr||!Ur)&&ix()}function Hn(t){return hi(),lr?lr[t%lr.length]:"#212b32"}function sx(t){return hi(),zr?zr[t]:void 0}function pi(t,e){return sx(t)||Hn(e)}const no=["low","moderate","high","critical"];let ro=null;function ox(){const t={color:{...fi.color,...Or.color}},e=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,t);if(!i)return;const s=i.$value||i.value;return typeof s=="string"&&/^\{.+\}$/.test(s)?e(s.slice(1,-1),a):typeof s=="string"?s:void 0},n={};return no.forEach(r=>{const a=e(`color.data-viz.severity.${r}`);a&&(n[r]=a)}),n}function fd(){return ro||(ro=ox()),ro}function lx(t){return fd()[t.toLowerCase()]}function cx(t,e){return lx(t)||fd()[no[e%no.length]]||Rt(e)}function ux(t){return hi(),Wr?Wr[t]:void 0}function dx(t,e){return ux(t)||Hn(e)}const ao=["trust","ambulance","icb","region"];let io=null;function fx(){const t={color:{...fi.color,...Or.color}},e=(r,a=new Set)=>{if(a.has(r))return;a.add(r);const i=r.split(".").reduce((l,u)=>l?l[u]:void 0,t);if(!i)return;const s=i.$value||i.value;return typeof s=="string"&&/^\{.+\}$/.test(s)?e(s.slice(1,-1),a):typeof s=="string"?s:void 0},n={};return ao.forEach(r=>{const a=e(`color.data-viz.org-level.${r}`);a&&(n[r]=a)}),n}function hd(){return io||(io=fx()),io}function hx(t){return hd()[t.toLowerCase()]}function px(t,e){return hx(t)||hd()[ao[e%ao.length]]||Rt(e)}function mx(t){return hi(),Ur?Ur[t]:void 0}function gx(t,e){return mx(t)||Hn(e)}let so=null;const _x=["north-east","north-west","east-of-england","midlands","london","south-west","south-east"];function bx(t){return t.trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function yx(){const t={color:{...fi.color,...Or.color}},e=(a,i=new Set)=>{if(i.has(a))return;i.add(a);const s=a.split(".").reduce((u,c)=>u?u[c]:void 0,t);if(!s)return;const l=s.$value||s.value;return typeof l=="string"&&/^\{.+\}$/.test(l)?e(l.slice(1,-1),i):typeof l=="string"?l:void 0},n={},r=[];return _x.forEach(a=>{const i=e(`color.data-viz.region.${a}`);i?n[a]=i:r.push(a)}),process.env.NODE_ENV!=="production"&&(Object.keys(n).length===0?console.warn("[DataViz] Region colour tokens unresolved  falling back to categorical colours."):r.length&&console.warn(`[DataViz] Missing region colour tokens: ${r.join(", ")}.`)),n}function xx(){return so||(so=yx()),so}function vx(t){return xx()[bx(t)]}function cr(t,e){return vx(t)||Rt(e)}const pd=K.createContext(null),Gr=()=>K.useContext(pd),wx=({initialHiddenIds:t=[],children:e,hiddenIds:n,onChange:r})=>{const[a,i]=K.useState(()=>new Set(t)),s=n!==void 0,l=K.useMemo(()=>s?new Set(n):a,[s,n,a]),u=K.useCallback(d=>{s||i(new Set(d)),r?.(Array.from(d))},[s,r]),c=K.useMemo(()=>({hiddenIds:l,isHidden:d=>l.has(d),toggle:d=>{const f=new Set(l);f.has(d)?f.delete(d):f.add(d),u(f)},showOnly:d=>{u(new Set)},showAll:()=>u(new Set),setHidden:d=>u(new Set(Array.isArray(d)?d:Array.from(d)))}),[l,u]);return o.jsx(pd.Provider,{value:c,children:e})},md=K.createContext(null),un=()=>K.useContext(md),gd=({children:t,maxDistance:e=40,wrapAround:n=!1})=>{const r=Rn(),a=Gr(),[i,s]=K.useState(null),l=K.useRef(new Map),[u,c]=K.useState([]),d=K.useCallback((M,S)=>{l.current.set(M,S)},[]),f=K.useCallback(M=>{l.current.delete(M)},[]),m=K.useCallback((M,S)=>{if(!r)return;const{xScale:x,yScale:$}=r;let k=null,v=1/0;l.current.forEach((A,D)=>{A.forEach((I,T)=>{const E=x(I.x),ae=$(I.y),z=E-M,H=ae-S,U=Math.sqrt(z*z+H*H);U<v&&(v=U,k={seriesId:D,index:T,x:I.x,y:I.y,clientX:E,clientY:ae})})}),k&&v<=e?s(k):s(null)},[r,e]),g=K.useCallback(()=>s(null),[]);K.useEffect(()=>{if(!i){c([]);return}if(!r)return;const{xScale:M,yScale:S}=r,x=[];l.current.forEach(($,k)=>{$.forEach((v,A)=>{(i.x instanceof Date&&v.x instanceof Date?v.x.getTime()===i.x.getTime():v.x===i.x)&&x.push({seriesId:k,index:A,x:v.x,y:v.y,clientX:M(v.x),clientY:S(v.y)})})}),x.sort(($,k)=>$.seriesId.localeCompare(k.seriesId)),c(x)},[i,r]);const y=K.useCallback(M=>{if(!i)return;const S=l.current.get(i.seriesId);if(!S)return;let x=i.index+M;if(x<0||x>=S.length){if(!n)return;x=(x+S.length)%S.length}const $=S[x];if(!r)return;const{xScale:k,yScale:v}=r;s({seriesId:i.seriesId,index:x,x:$.x,y:$.y,clientX:k($.x),clientY:v($.y)})},[i,r,n]),p=K.useCallback(M=>{let S=Array.from(l.current.keys());if(a&&(S=S.filter(E=>!a.isHidden(E))),S.length===0)return;if(!i){const E=S[0],ae=l.current.get(E);if(!ae||!r)return;const{xScale:z,yScale:H}=r,U=ae[0];s({seriesId:E,index:0,x:U.x,y:U.y,clientX:z(U.x),clientY:H(U.y)});return}const x=S.indexOf(i.seriesId);if(x===-1)return;let $=x+M;if($<0||$>=S.length){if(!n)return;$=($+S.length)%S.length}const k=S[$],v=l.current.get(k);if(!v||!r)return;const A=Math.min(i.index,v.length-1),D=v[A],{xScale:I,yScale:T}=r;s({seriesId:k,index:A,x:D.x,y:D.y,clientX:I(D.x),clientY:T(D.y)})},[i,r,n,a]),h=K.useCallback(()=>{let M=Array.from(l.current.keys());if(a&&(M=M.filter(A=>!a.isHidden(A))),M.length===0)return;const S=i?i.seriesId:M[0],x=l.current.get(S);if(!x||x.length===0||!r)return;const $=x[0],{xScale:k,yScale:v}=r;s({seriesId:S,index:0,x:$.x,y:$.y,clientX:k($.x),clientY:v($.y)})},[i,r,a]),_=K.useCallback(()=>{let M=Array.from(l.current.keys());if(a&&(M=M.filter(D=>!a.isHidden(D))),M.length===0)return;const S=i?i.seriesId:M[0],x=l.current.get(S);if(!x||x.length===0||!r)return;const $=x.length-1,k=x[$],{xScale:v,yScale:A}=r;s({seriesId:S,index:$,x:k.x,y:k.y,clientX:v(k.x),clientY:A(k.y)})},[i,r,a]),N=K.useCallback(()=>y(1),[y]),j=K.useCallback(()=>y(-1),[y]),w=K.useCallback(()=>p(1),[p]),P=K.useCallback(()=>p(-1),[p]),C=K.useMemo(()=>({focused:i,setFocused:s,aggregated:u,focusNearest:m,clear:g,registerSeries:d,unregisterSeries:f,focusNextPoint:N,focusPrevPoint:j,focusNextSeries:w,focusPrevSeries:P,focusFirstPoint:h,focusLastPoint:_}),[i,u,m,g,d,f,N,j,w,P,h,_]);return o.jsx(md.Provider,{value:C,children:t})},_d=({series:t,seriesIndex:e,palette:n,showPoints:r,focusablePoints:a,focusIndex:i,parseX:s,visibilityMode:l="remove",strokeWidth:u=1,smooth:c=!0,gradientFillId:d,colors:f})=>{const m=Rn();if(!m)return null;const{xScale:g,yScale:y}=m,h=Gr()?.isHidden(t.id)??!1,_=h&&l==="fade";if(h&&l==="remove")return null;const N=un();K.useEffect(()=>{if(!N)return;const S=t.data.map(x=>({x:s(x),y:x.y}));return N.registerSeries(t.id,S),()=>N.unregisterSeries(t.id)},[N,t.id,t.data,s]);const j=K.useMemo(()=>Xs(t.data,S=>g(s(S)),S=>y(S.y),{smooth:c}),[t.data,g,y,s,c]),w=K.useMemo(()=>{if(!t.data.length)return"";const[S]=y.domain(),x=Ys().x($=>g(s($))).y0(()=>y(S)).y1($=>y($.y));return c&&x.curve(di),x(t.data)||""},[t.data,g,y,s,c]),P=f&&f[e],C=t.color||P||(n==="region"?cr(t.id,e):Rt(e)),M=n==="region"?pi(t.id,e):Hn(e);return o.jsxs("g",{className:"fdp-line-series","data-series":t.id,opacity:_?.25:1,"aria-hidden":_?!0:void 0,children:[d&&o.jsx("path",{d:w,fill:`url(#${d})`,stroke:"none",role:"presentation",className:"fdp-line-series__gradient"}),o.jsx("path",{d:j,fill:"none",stroke:C,strokeWidth:u,role:"presentation"}),r&&t.data.map((S,x)=>{const $=g(s(S)),k=y(S.y),v=a?0:-1,A=!_&&(a&&x===i||N?.focused?.seriesId===t.id&&N.focused.index===x),D=()=>{N&&!_&&N.setFocused({seriesId:t.id,index:x,x:s(S),y:S.y,clientX:$,clientY:k})},I=()=>{N&&N.focused?.seriesId===t.id&&N.focused.index===x&&N.clear()};return o.jsx("circle",{cx:$,cy:k,r:A?5:3.5,stroke:A?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":M,strokeWidth:A?2:1,fill:A?"var(--nhs-fdp-color-grey-3, #aeb7bd)":C,className:"fdp-line-point",tabIndex:_?-1:v,"aria-label":`${t.label||t.id} ${s(S).toDateString()} value ${S.y}`,"data-series":t.id,"data-index":x,onMouseEnter:D,onFocus:D,onMouseLeave:I,onBlur:I},x)})]})},Sx=({polite:t=!0,format:e})=>{const n=un(),[r,a]=K.useState(""),i=K.useRef("");return K.useEffect(()=>{if(!n?.focused)return;const{focused:s,aggregated:l}=n;let u;if(l&&l.length>1){const c=l.map(f=>`${f.seriesId} ${f.y}`).join("; ");u=`${s.x instanceof Date?s.x.toDateString():String(s.x)} â€“ ${c}`}else u=e?e({seriesId:s.seriesId,x:s.x,y:s.y,index:s.index}):kx(s.seriesId,s.x,s.y,s.index);if(u!==i.current){i.current=u,a("");const c=setTimeout(()=>a(u),10);return()=>clearTimeout(c)}},[n?.focused,e]),o.jsx("div",{"aria-live":t?"polite":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,margin:-1,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",border:0},children:r})};function kx(t,e,n,r){const a=e instanceof Date?e.toDateString():String(e);return`Series ${t}, point ${r+1}, ${a}, value ${n}`}const Cx=()=>{const t=un(),e=yn();if(!t||!e||!t.focused)return null;const{focused:n,aggregated:r}=t,{innerWidth:a,innerHeight:i}=e,s=Math.min(Math.max(n.clientX,0),a),l=Math.min(Math.max(n.clientY,0),i),u=s+8,c=l-8,d=r.length>1,f=n.x instanceof Date?n.x.toDateString():String(n.x),m=d?f:`${f} â€¢ ${n.y}`,g=/\d+$/.exec(n.seriesId||""),y=g?parseInt(g[0],10)-1:0,p=Rt(y>=0?y:0)||"#005eb8",h="var(--nhs-fdp-color-primary-yellow,#ffeb3b)";return o.jsxs("g",{className:"fdp-tooltip-layer",pointerEvents:"none",children:[o.jsx("circle",{cx:s,cy:l,r:7,fill:"none",stroke:h,strokeWidth:3}),o.jsx("circle",{cx:s,cy:l,r:5,fill:"#000",stroke:h,strokeWidth:1.5}),o.jsx("circle",{cx:s,cy:l,r:2.5,fill:p,stroke:"#fff",strokeWidth:.5}),d?(()=>{const N=r.map(M=>`${M.seriesId}: ${M.y}`),j=[m,...N],w=j.reduce((M,S)=>Math.max(M,S.length),0),P=Math.max(90,w*6.2+16),C=16*j.length+8;return o.jsxs("g",{children:[o.jsx("rect",{x:u,y:c-C,rx:4,ry:4,width:P,height:C,fill:"#212b32",opacity:.92}),j.map((M,S)=>o.jsx("text",{x:u+8,y:c-C+6+16*(S+.7),fill:"#fff",fontSize:12,children:M},S))]})})():o.jsxs("g",{children:[o.jsx("rect",{x:u,y:c-24,rx:4,ry:4,width:Math.max(60,m.length*6.2),height:24,fill:"#212b32",opacity:.92}),o.jsx("text",{x:u+8,y:c-8,fill:"#fff",fontSize:12,children:m})]})]})},Tx=({items:t,palette:e="categorical",direction:n="row",interactive:r=!1,adjustStrokeForWhiteBackground:a=!0,hiddenIds:i,defaultHiddenIds:s=[],onVisibilityChange:l,formatAnnouncement:u})=>{const c=Gr(),d=!!(c&&!r&&!l&&i===void 0),f=r||d,m=t||[],g=i!==void 0,[y,p]=K.useState(new Set(s)),h=g?new Set(i):y,[_,N]=K.useState(""),j=w=>{if(d&&c){const v=c.isHidden(w);c.toggle(w);const D=m.find(T=>T.id===w)?.label||w,I=u?u(w,v,D):`${D} ${v?"shown":"hidden"}`;N(I);return}if(!f)return;const P=new Set(h),C=P.has(w);C?P.delete(w):P.add(w),g||p(P);const M=m.filter(v=>!P.has(v.id)).map(v=>v.id),S=Array.from(P);l?.(M,S);const $=m.find(v=>v.id===w)?.label||w,k=u?u(w,C,$):`${$} ${C?"shown":"hidden"}`;N(k)};return o.jsxs("div",{className:"fdp-legend-wrapper",children:[o.jsx("ul",{className:`fdp-legend fdp-legend--${n}`,children:m.map((w,P)=>{const C=w.palette||e,M=w.color||(C==="region"?cr(w.id,P):C==="severity"?cx(w.id,P):C==="org-level"?px(w.id,P):Rt(P));let S=w.stroke||(C==="region"?pi(w.id,P):C==="severity"?dx(w.id,P):C==="org-level"?gx(w.id,P):Hn(P));if(a&&S){const k=S.trim().toLowerCase();(k==="#fff"||k==="#ffffff"||k==="white"||/^rgb\(\s*255\s*,\s*255\s*,\s*255\s*\)$/.test(k))&&(S="#212b32")}const x=d&&c?c.isHidden(w.id):h.has(w.id),$=f?{"aria-pressed":!x,"aria-label":`${w.label} (${x?"show":"hide"})`,onClick:()=>j(w.id)}:{"aria-label":w.label};return o.jsxs("li",{className:`fdp-legend__item${x?" fdp-legend__item--hidden":""}`,children:[o.jsx("button",{type:"button",className:"fdp-legend__swatch",style:{backgroundColor:M,backgroundImage:w.patternDataUrl?`url(${w.patternDataUrl})`:void 0,backgroundSize:w.patternDataUrl?"auto":void 0,borderColor:S},...$}),o.jsx("span",{className:"fdp-legend__label",children:w.label})]},w.id)})}),f&&o.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite","aria-atomic":"true",children:_})]})},jx=({series:t,seriesIndex:e,palette:n,parseX:r,areaOnly:a=!1,visibilityMode:i="remove",baselineY:s=0,smooth:l=!0,stacked:u,gradientFill:c=!0,colors:d})=>{const f=Rn();if(!f)return null;const{xScale:m,yScale:g}=f,p=Gr()?.isHidden(t.id)??!1,h=p&&i==="fade";if(p&&i==="remove")return null;const _=un();K.useEffect(()=>{if(!_)return;const M=t.data.map(S=>({x:r(S),y:S.y}));return _.registerSeries(t.id,M),()=>_.unregisterSeries(t.id)},[_,t.id,t.data,r]);const N=d&&d[e],j=t.color||N||(n==="region"?cr(t.id,e):Rt(e)),w=K.useMemo(()=>u&&u.length===t.data.length?Xs(t.data,M=>m(r(M)),M=>{const S=t.data.indexOf(M);return g(u[S].y1)},{smooth:l}):Xs(t.data,M=>m(r(M)),M=>g(M.y),{smooth:l}),[t.data,u,m,g,r,l]),P=K.useMemo(()=>{if(u&&u.length===t.data.length){const k=Ys().x(v=>m(r(v))).y0((v,A)=>g(u[A].y0)).y1((v,A)=>g(u[A].y1));return l&&k.curve(di),k(t.data)||""}const[M,S]=g.domain();let x=s;x<M?x=M:x>S&&(x=S);const $=Ys().x(k=>m(r(k))).y0(()=>g(x)).y1(k=>g(k.y));return l&&$.curve(di),$(t.data)||""},[t.data,u,m,g,r,s,l]),C=K.useId();return o.jsxs("g",{className:"fdp-area-series","data-series":t.id,opacity:h?.25:1,"aria-hidden":h?!0:void 0,children:[c&&o.jsx("defs",{children:o.jsxs("linearGradient",{id:C,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:j,stopOpacity:.25}),o.jsx("stop",{offset:"100%",stopColor:j,stopOpacity:0})]})}),o.jsx("path",{className:"fdp-area-series__fill",d:P,fill:c?`url(#${C})`:j,...c?{}:{fillOpacity:.25},stroke:"none"}),!a&&o.jsx("path",{d:w,fill:"none",stroke:j,strokeWidth:1})]})},Nx=({series:t,seriesIndex:e,seriesCount:n,palette:r,parseX:a,focusable:i=!0,widthFactor:s=.8,groupGap:l=2,barWidth:u,adaptive:c=!1,adaptiveGroupOccupancy:d=.9,visibilityMode:f="remove",colorMode:m="series",allSeries:g,stacked:y,gapRatio:p=.15,minBarWidth:h,gradientFill:_=!0,gradientStrokeMatch:N=!0,opacity:j=1,fadedOpacity:w=.25,flatFillOpacity:P=1,colors:C})=>{const M=Math.max(0,p),S=Rn(),x=yn();if(!S||!x)return null;const{xScale:$,yScale:k}=S,A=Gr()?.isHidden(t.id)??!1,D=A&&f==="fade";if(A&&f==="remove")return null;const I=un();K.useEffect(()=>{if(!I)return;const ee=t.data.map(ie=>({x:a(ie),y:ie.y}));return I.registerSeries(t.id,ee),()=>I.unregisterSeries(t.id)},[I,t.id,t.data,a]);const T=typeof $.bandwidth=="function",E=T?$.bandwidth():void 0,ae=K.useMemo(()=>{if(E!=null)return E;const ee=g&&g.length?g:[t],ie=[];ee.forEach(Z=>{Z.data.forEach(Y=>{const X=$(a(Y));Number.isFinite(X)&&ie.push(X)})});const L=ie.sort((Z,Y)=>Z-Y);if(L.length<=1)return 40;const F=[];for(let Z=1;Z<L.length;Z++)F.push(L[Z]-L[Z-1]);return F.sort((Z,Y)=>Z-Y),(F[Math.floor(F.length/2)]||40)*s},[t.data,g,$,a,s,E]),{basePerBar:z}=K.useMemo(()=>{if(T){const L=ae,F=Math.max(1,(L-l*(n-1))/n),W=t.barWidth??u;let Z=W?Math.min(W,L):F;if(c){const Y=L*Math.min(1,Math.max(.05,d)),X=Math.max(1,(Y-l*(n-1))/n);Z=W?Math.min(Z,X):X}return{basePerBar:Z}}const ee=t.barWidth??u,ie=Math.max(1,(ae-l*(n-1))/n);if(c){const L=g&&g.length?g:[t],F=[];L.forEach(Se=>Se.data.forEach(ge=>{const pe=$(a(ge));Number.isFinite(pe)&&F.push(pe)})),F.sort((Se,ge)=>Se-ge);const W=[];for(let Se=1;Se<F.length;Se++)W.push(F[Se]-F[Se-1]);W.sort((Se,ge)=>Se-ge);const Y=(W[Math.floor(W.length/2)]||ae)*Math.min(1,Math.max(.05,d)),X=Math.max(1,(Y-l*(n-1))/n);return{basePerBar:ee?Math.min(ee,X):X}}return ee?{basePerBar:Math.min(ee,ie)}:{basePerBar:ie}},[T,ae,l,n,u,t.barWidth,c,d,g,$,a]),H=K.useMemo(()=>{if(T)return[];const ee=[];return(g&&g.length?g:[t]).forEach(L=>L.data.forEach(F=>{const W=$(a(F));Number.isFinite(W)&&ee.push(W)})),ee.sort((L,F)=>L-F),Array.from(new Set(ee))},[T,g,t,$,a]),U=K.useMemo(()=>{if(T)return[];if(!H.length)return[];if(H.length===1)return[{center:H[0],left:0,right:x.innerWidth}];const ee=[];for(let ie=0;ie<H.length;ie++){const L=H[ie],F=ie===0?0:(H[ie-1]+L)/2,W=ie===H.length-1?x.innerWidth:(L+H[ie+1])/2;ee.push({center:L,left:Math.max(0,F),right:Math.min(x.innerWidth,W)})}return ee},[T,H,x.innerWidth]),O=K.useMemo(()=>{if(T||!U.length)return;const ee=Math.min(1,Math.max(.05,s)),ie=U.map(Y=>Math.max(2,Y.right-Y.left)),L=ie.map(Y=>Math.max(2,Math.min(Y-1,Y*ee)));let F=Math.min(...L);if(h)if(n<=1){const Y=Math.min(...ie.map(X=>X-1));Y>=h&&F<h&&(F=Math.min(Y,h))}else{const Y=Math.min(...ie.map(fe=>fe-1)),X=h*n+(n-1)*(h*M);X<=Y&&F<X&&(F=X)}if(n<=1)return h&&F<h&&ie.every(X=>X>=h)?{groupWidth:h,barWidth:h}:{groupWidth:F,barWidth:F};let W=F/(n+(n-1)*M);return W<1&&(W=1),h&&W<h&&h*n+(n-1)*(h*M)<=F&&(W=h),{groupWidth:W*n+(n-1)*(W*M),barWidth:W}},[T,U,s,n,M,h]),re=C&&C[e]?C[e]:void 0,G=t.color||re||(r==="region"?cr(t.id,e):Rt(e)),ce=r==="region"?pi(t.id,e):Hn(e),ve=N&&(t.color||re)?G:ce,de=Number.isFinite(k(0))?k(0):k.range()[0],he=K.useId();return y&&y.length===t.data.length?o.jsxs("g",{className:"fdp-bar-series fdp-bar-series--stacked","data-series":t.id,opacity:D?w:j,"aria-hidden":D?!0:void 0,children:[_&&o.jsx("defs",{children:o.jsxs("linearGradient",{id:he,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:G,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:G,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:G,stopOpacity:.06})]})}),t.data.map((ee,ie)=>{const L=a(ee),F=$(T?ee.x:L);let W,Z;if(T)W=ae,Z=F;else{const se=U.find(le=>Math.abs(le.center-F)<.5);if(!se||!O)W=z,Z=F-z/2;else{const{groupWidth:le}=O;W=le;let R=F-le/2;R<se.left&&(R=se.left),R+le>se.right&&(R=Math.max(se.left,se.right-le)),Z=R}}const Y=y[ie],X=k(Y.y0),fe=k(Y.y1),Se=Math.min(X,fe),ge=Math.abs(fe-X)||1;if(!T&&h&&W<h){const se=U.find(le=>Math.abs(le.center-F)<.5);if(se){const le=Math.max(2,se.right-se.left-1),R=Math.min(le,h);R>W&&(W=R,Z=Math.max(se.left,Math.min(se.right-W,F-W/2)))}}const pe=!D&&I?.focused?.seriesId===t.id&&I.focused.index===ie,q=()=>{!I||D||I.setFocused({seriesId:t.id,index:ie,x:L,y:Y.y1-Y.y0,clientX:Z+W/2,clientY:Se})},V=()=>{I?.focused?.seriesId===t.id&&I.focused.index===ie&&I.clear()};return o.jsx("rect",{x:Z,y:Se,width:W,height:ge,fill:_?`url(#${he})`:G,..._?{}:{fillOpacity:P},stroke:pe?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":_&&N?G:void 0,strokeWidth:pe?2:1,className:"fdp-bar fdp-bar--stacked",tabIndex:D||!i?-1:0,role:"graphics-symbol","aria-label":`${t.label||t.id} ${L instanceof Date?L.toDateString():L} value ${Y.y1-Y.y0}`,onMouseEnter:q,onFocus:q,onMouseLeave:V,onBlur:V},ie)})]}):o.jsxs("g",{className:"fdp-bar-series","data-series":t.id,opacity:D?w:j,"aria-hidden":D?!0:void 0,children:[_&&o.jsxs("defs",{children:[m==="series"&&o.jsxs("linearGradient",{id:he,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:G,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:G,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:G,stopOpacity:.06})]}),m==="category"&&t.data.map((ee,ie)=>{const F=C&&C[ie]||(r==="region"?cr(String(ee.x),ie):Rt(ie)),W=`${he}-${ie}`;return o.jsxs("linearGradient",{id:W,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:F,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:F,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:F,stopOpacity:.06})]},W)})]}),t.data.map((ee,ie)=>{const L=a(ee),F=$(T?ee.x:L);let W,Z;if(T){const ne=ae;if(n<=1)Z=ne,W=F;else{Z=Math.max(1,ne/(n+(n-1)*M));const J=Z*M,Q=Z*n+J*(n-1);W=F+(ne-Q)/2+e*(Z+J)}}else{const ne=U.find(J=>J.center===F);if(!ne||!O)Z=z,W=F-z/2,h&&Z<h&&(Z=h,W=F-Z/2);else{const{barWidth:J}=O;Z=J;const Q=n>1?J*M:0,oe=Z*n+Q*(n-1);let ue=F-oe/2;ue<ne.left&&(ue=ne.left),ue+oe>ne.right&&(ue=Math.max(ne.left,ne.right-oe)),W=ue+e*(Z+Q)}if(h&&Z<h){const J=U.find(Q=>Math.abs(Q.center-F)<.5);if(J){const Q=Math.max(2,J.right-J.left-1),oe=Math.min(Q,h);if(oe>Z)if(n<=1)Z=oe,W=Math.max(J.left,Math.min(J.right-Z,F-Z/2));else{const ue=oe*M,we=oe*n+ue*(n-1);if(we<=J.right-J.left-1){Z=oe;const Te=we;let Ne=F-Te/2;Ne<J.left&&(Ne=J.left),Ne+Te>J.right&&(Ne=Math.max(J.left,J.right-Te)),W=Ne+e*(Z+ue)}}}}}const Y=W+Z/2,X=k(ee.y),fe=Math.min(de,X),Se=Math.abs(de-X),ge=!D&&I?.focused?.seriesId===t.id&&I.focused.index===ie,pe=()=>{!I||D||I.setFocused({seriesId:t.id,index:ie,x:L,y:ee.y,clientX:Y,clientY:X})},q=()=>{I?.focused?.seriesId===t.id&&I.focused.index===ie&&I.clear()},V=m==="category"&&C?C[ie]:void 0,se=m==="category"?V||(r==="region"?cr(String(ee.x),ie):Rt(ie)):G,le=m==="category"?`${he}-${ie}`:he,R=_&&N?se:m==="category"?r==="region"?pi(String(ee.x),ie):Hn(ie):ve,te=ge?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":R||se;return o.jsx("rect",{x:W,y:fe,width:Z,height:Se||1,fill:_?`url(#${le})`:se,..._?{}:{fillOpacity:P},stroke:te,strokeWidth:ge?2:1,className:"fdp-bar",tabIndex:D||!i?-1:0,role:"graphics-symbol","aria-label":`${t.label||t.id} ${L instanceof Date?L.toDateString():L} value ${ee.y}`,onMouseEnter:pe,onFocus:pe,onMouseLeave:q,onBlur:q},ie)})]})},Dx=({series:t,innerWidth:e,innerHeight:n,paddingInner:r=.1,paddingOuter:a=.05,children:i,yTickCount:s=5})=>{const l=yn(),u=e??l?.innerWidth??0,c=n??l?.innerHeight??0,d=K.useMemo(()=>t.flatMap(h=>h.data),[t]),f=K.useMemo(()=>{const h=new Set;return d.forEach(_=>h.add(_.x)),Array.from(h)},[d]),m=K.useMemo(()=>Math.max(0,...d.map(h=>h.y)),[d]),g=K.useMemo(()=>Tc().domain(f).range([0,u]).paddingInner(r).paddingOuter(a),[f,u,r,a]),y=K.useMemo(()=>Qa().domain([0,m]).nice().range([c,0]),[m,c]),p=K.useMemo(()=>({xScale:g,yScale:y,getXTicks:()=>f,getYTicks:(h=s)=>y.ticks(h)}),[g,y,f,s]);return o.jsx(Ks.Provider,{value:p,children:i})},Mx=({title:t,description:e,source:n,table:r,className:a,id:i,message:s="Interactive chart loadingâ€¦",forceFallback:l=!1})=>{const u=K.useId(),c=i||u,d=e?`${c}-desc`:void 0,f=n?`${c}-src`:void 0,m=typeof window<"u"&&!l;return o.jsxs("figure",{id:c,className:ci("fdp-chart fdp-chart--noscript",a),"aria-labelledby":`${c}-title`,"aria-describedby":ci(d,f),"data-component":"ChartNoScript",children:[o.jsx("header",{className:"fdp-chart__header",children:o.jsx("h3",{id:`${c}-title`,className:"fdp-chart__title",children:t})}),e&&o.jsx("p",{id:d,className:"fdp-chart__description",children:e}),!m&&o.jsx("div",{className:"fdp-chart__loading",role:"status","aria-live":"polite",children:s}),o.jsxs("div",{className:"fdp-chart__fallback",role:"group","aria-label":t,children:[o.jsx("noscript",{children:o.jsx("div",{className:"fdp-chart__noscript-wrapper",children:o.jsx(Dt,{...r})})}),o.jsx("div",{className:"fdp-chart__table","data-fallback-table":!0,children:o.jsx(Dt,{...r})})]}),n&&o.jsx("figcaption",{className:"fdp-chart__caption",children:n&&o.jsxs("small",{id:f,className:"fdp-chart__source",children:["Source: ",n]})})]})},$x=({selector:t="figure.fdp-chart",onEnhanced:e,delay:n=0,children:r})=>{const a=K.useRef(null);return K.useEffect(()=>{const i=a.current;if(!i)return;const s=()=>{const l=Array.from(i.querySelectorAll(t));if(l.length===0)return;const u=[];l.forEach(c=>{c.classList.contains("fdp-chart--enhanced")||(c.classList.add("fdp-chart--enhanced"),u.push(c))}),u.length&&e&&e(u)};if(n>0){const l=window.setTimeout(s,n);return()=>window.clearTimeout(l)}s()},[t,e,n]),o.jsx("div",{ref:a,children:r})},Ix=({label:t,value:e,unit:n,delta:r,status:a="neutral",variant:i="default",subtitle:s,metadata:l,trendData:u,loading:c=!1,error:d,valueFormatter:f,className:m,id:g,announceDelta:y=!0})=>{const p=K.useId(),h=g||p,_=`${h}-label`,N=`${h}-value`,j=`${h}-delta`,w=typeof e=="number"&&!Number.isNaN(e),P=c?"â€”":d?"":w?f?f(e):e.toLocaleString():e;let C,M="",S="";if(r&&!c&&!d){C=r.direction||(r.value>0?"up":r.value<0?"down":"neutral");const x=Math.abs(r.value),$=C==="up"?`+${x}`:C==="down"?`-${x}`:"0",k=r.isPercent?"%":"";if(M=`${$}${k}`,r.ariaLabel)S=r.ariaLabel;else{const v=r.invert?C==="down":C==="up";S=`${C==="neutral"?"no change":C==="up"?"up":"down"} ${x}${k}${C==="neutral"?"":v?" (improvement)":" (worse)"}`}}return o.jsx("div",{className:ci("fdp-metric-card",i&&`fdp-metric-card--${i}`,a&&`fdp-metric-card--status-${a}`,c&&"fdp-metric-card--loading",d&&"fdp-metric-card--error",m),role:"group","aria-labelledby":_,"data-component":"MetricCard",children:o.jsxs("div",{className:"fdp-metric-card__inner",children:[o.jsxs("div",{className:"fdp-metric-card__header",children:[o.jsx("h3",{id:_,className:"fdp-metric-card__label",children:t}),l&&o.jsx("div",{className:"fdp-metric-card__metadata",children:l})]}),o.jsxs("div",{className:"fdp-metric-card__content",children:[o.jsxs("div",{className:"fdp-metric-card__value-section",children:[o.jsx("div",{id:N,className:"fdp-metric-card__value",children:c?o.jsx("div",{className:"fdp-metric-card__skeleton","aria-hidden":"true",children:o.jsx("div",{className:"fdp-metric-card__skeleton-line fdp-metric-card__skeleton-line--value"})}):d?o.jsx("div",{className:"fdp-metric-card__error",role:"alert",children:d}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"fdp-metric-card__number",children:P}),n&&o.jsx("span",{className:"fdp-metric-card__unit",children:n})]})}),s&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__subtitle",children:s})]}),r&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__delta-section",children:o.jsxs("div",{id:j,"aria-label":S,className:ci("fdp-metric-card__delta",C&&`fdp-metric-card__delta--${C}`),children:[o.jsx("span",{className:"fdp-metric-card__delta-value",children:M}),r.period&&o.jsx("span",{className:"fdp-metric-card__delta-period",children:r.period})]})}),u&&u.length>0&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__trend","aria-hidden":"true"})]}),y&&r&&!r.ariaLabel&&!c&&!d&&o.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite",children:S})]})})},ye=t=>typeof t=="number"&&Number.isFinite(t),Px=t=>t.reduce((e,n)=>e+n,0),Ht=t=>t.length?Px(t)/t.length:NaN;function bd(t,e){const n=new Array(t.length).fill(null);let r=null;for(let a=0;a<t.length;a++){const i=t[a];if(!e[a]&&ye(i)){if(r!==null){const s=t[r];n[a]=ye(s)?Math.abs(i-s):null}r=a}}return n}function yd(t,e){const n=t.filter(i=>ye(i));if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=Ht(n),a=3.267*r;if(e){const i=n.filter(s=>s<=a);i.length&&i.length!==n.length&&(r=Ht(i),a=3.267*r)}return{mrMean:r,mrUcl:a}}function Fx(t,e){if(!ye(t)||!ye(e))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=2.66,r=2/3*n,a=1/3*n;return{upperProcessLimit:t+n*e,lowerProcessLimit:t-n*e,upperTwoSigma:t+r*e,lowerTwoSigma:t-r*e,upperOneSigma:t+a*e,lowerOneSigma:t-a*e}}const Lx=.2777,Ex=3.6,Bx=t=>ye(t)&&t>=0?Math.pow(t,Lx):null,On=t=>ye(t)&&t>=0?Math.pow(t,Ex):null;function Ax(t,e){return!(t>0&&t<1)||!(e>0&&e<1)?NaN:Math.log(1-t)/Math.log(1-e)}const ur={one:{low:.1586552539,high:.8413447461},two:{low:.0227501319,high:.9772498681},three:{low:.001349898,high:.998650102}};function Rx(t){if(!ye(t)||t<0)return{cl:null,lcl:null,ucl:null,oneLow:null,oneHigh:null,twoLow:null,twoHigh:null};const e=1/(t+1),n=d=>Ax(d,e)-1,r=n(.5),a=Math.max(0,n(ur.three.low)),i=n(ur.three.high),s=Math.max(0,n(ur.one.low)),l=n(ur.one.high),u=Math.max(0,n(ur.two.low)),c=n(ur.two.high);return{cl:r,lcl:a,ucl:i,oneLow:s,oneHigh:l,twoLow:u,twoHigh:c}}function Hx(t,e,n){const r=t.map(S=>ye(S)?Bx(S):null),a=bd(r,e),{mrMean:i}=yd(a,!!n),s=r.filter((S,x)=>!e[x]&&ye(S)),l=s.length?Ht(s):NaN;if(!ye(l)||!ye(i))return{center:null,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null,mr:a,mrMean:null,mrUcl:null};const u=2.66,c=2/3*u,d=1/3*u,f=l+u*i,m=l-u*i,g=l+c*i,y=l-c*i,p=l+d*i,h=l-d*i,_=On(l),N=On(f),j=m<=0?null:On(m),w=On(p),P=h<=0?null:On(h),C=On(g),M=y<=0?null:On(y);return{center:_??null,upperProcessLimit:N??null,lowerProcessLimit:j??null,upperTwoSigma:C??null,lowerTwoSigma:M??null,upperOneSigma:w??null,lowerOneSigma:P??null,mr:a,mrMean:i,mrUcl:ye(i)?3.267*i:null}}var oo=(t=>(t.XmR="XmR",t.T="T",t.G="G",t))(oo||{}),Ee=(t=>(t.Up="Up",t.Down="Down",t.Neither="Neither",t))(Ee||{}),Be=(t=>(t.Improvement="improvement",t.Concern="concern",t.Neither="neither",t.None="none",t))(Be||{});const lo=["single_point","two_sigma","shift","trend"],xd=lo.reduce((t,e,n)=>(t[e]=n+1,t),{}),Ox={single_point:"Single point beyond process limit",two_sigma:"Two of three beyond 2Ïƒ on one side",shift:"Sustained shift (run)",trend:"Monotonic trend"},zx={single_point:"point",two_sigma:"cluster",shift:"sustained",trend:"sustained"},mi=lo.reduce((t,e,n)=>(t[e]={id:e,rank:n+1,label:Ox[e],category:zx[e],participatesInRanking:!0},t),{});lo.map(t=>mi[t]);var dr=(t=>(t.Up="up",t.Down="down",t))(dr||{}),co=(t=>(t.SinglePointAbove="single_above",t.SinglePointBelow="single_below",t.TwoOfThreeAbove="two_of_three_above",t.TwoOfThreeBelow="two_of_three_below",t.FourOfFiveAbove="four_of_five_above",t.FourOfFiveBelow="four_of_five_below",t.ShiftHigh="shift_high",t.ShiftLow="shift_low",t.TrendIncreasing="trend_inc",t.TrendDecreasing="trend_dec",t.FifteenInnerThird="fifteen_inner_third",t))(co||{}),Ot=(t=>(t.Pass="pass",t.Fail="fail",t.None="none",t))(Ot||{}),fr=(t=>(t.Upwards="Upwards",t.Downwards="Downwards",t.Same="Same",t))(fr||{}),vd=(t=>(t.Sql="sql",t.Conflict="conflict",t))(vd||{}),xn=(t=>(t.Info="info",t.Warning="warning",t.Error="error",t))(xn||{}),wd=(t=>(t.Config="config",t.Data="data",t.Limits="limits",t.SpecialCause="special_cause",t.Baseline="baseline",t.Logic="logic",t.Target="target",t.Ghost="ghost",t.Partition="partition",t))(wd||{}),Sd=(t=>(t.UnknownChartType="unknown_chart_type",t.InsufficientPointsGlobal="insufficient_points_global",t.VariationConflictRow="variation_conflict_row",t.NullValuesExcluded="null_values_excluded",t.TargetIgnoredRareEvent="target_ignored_rare_event",t.GhostRowsRareEvent="ghost_rows_rare_event",t.InsufficientPointsPartition="insufficient_points_partition",t.BaselineWithSpecialCause="baseline_with_special_cause",t.PartitionCapApplied="partition_cap_applied",t.GlobalCapApplied="global_cap_applied",t))(Sd||{});function Wx(t){const e=[],n=[];t.specialCauseSinglePointUp&&e.push("single_point"),t.specialCauseSinglePointDown&&n.push("single_point"),t.specialCauseTwoOfThreeUp&&e.push("two_sigma"),t.specialCauseTwoOfThreeDown&&n.push("two_sigma"),t.specialCauseShiftUp&&e.push("shift"),t.specialCauseShiftDown&&n.push("shift"),t.specialCauseTrendUp&&e.push("trend"),t.specialCauseTrendDown&&n.push("trend");const r=e.reduce((i,s)=>Math.max(i,mi[s].rank),0),a=n.reduce((i,s)=>Math.max(i,mi[s].rank),0);return{upRules:e,downRules:n,upMax:r,downMax:a,hasUp:e.length>0,hasDown:n.length>0}}var kd=(t=>(t.Shift="shift",t.Trend="trend",t.Point="point",t))(kd||{});function Ux(t){const e=[];let n=[];for(const r of t)r.baseline&&n.length&&(e.push(n),n=[]),n.push(r);return n.length&&e.push(n),e}function Gx(t,e,n){const r=e.autoRecalculateShiftLength||e.specialCauseShiftPoints||6;if(t.length<r*2)return;const a=t.map((d,f)=>({idx:f,value:d.value})).filter(d=>ye(d.value));if(a.length<r*2)return;const i=n==="Up"||n==="Neither",s=n==="Down";function l(d,f){const m=a.slice(d,f).map(g=>g.value);return m.length?Ht(m):NaN}let u=null;if(a.length>1){const d=[];for(let m=1;m<a.length;m++)d.push(Math.abs(a[m].value-a[m-1].value));const f=Ht(d);ye(f)&&f>0&&(u=f*(2.66/3))}if(!u||u<=0)return;const c=e.autoRecalculateDeltaSigma??.5;for(let d=r;d<=a.length-r;d++){const f=d-r,m=l(f,d),g=l(d,d+r);if(!ye(m)||!ye(g))continue;const p=(g-m)/u;if(!(i?p>=c:s?-p>=c:Math.abs(p)>=c))continue;const _=a.slice(d,d+r).map(w=>w.value);if(!(i?_.every(w=>w>m):s?_.every(w=>w<m):_.every(w=>i?w>m:w<m)))continue;const j=a[d].idx;t[j].baseline||(t[j].baseline=!0);return}}function Cd(t){if(!t)return{};const e=t,n=t,r=n.rules??{},a=n.precedence??{},i=n.thresholds??{},s=n.warnings??{},l=n.rareEvent??{},u=n.capability??{},c=n.grace??{},d=n.baselineSuggest??{},f=n.autoRecalc??{},m=c.emergingEnabled??n.emergingGraceEnabled??e.emergingGraceEnabled??e.emergingDirectionGrace,g=r.collapseWeakerClusterRules??n.collapseWeakerClusterRules??e.collapseWeakerClusterRules??e.collapseClusterRules,y=globalThis;e.emergingDirectionGrace!==void 0&&n.emergingGraceEnabled===void 0&&c.emergingEnabled===void 0&&!y.__spc_warn_emergingDirectionGrace&&(y.__spc_warn_emergingDirectionGrace=!0,console.warn("[spc] emergingDirectionGrace is deprecated; use grace.emergingEnabled")),e.collapseClusterRules!==void 0&&r.collapseWeakerClusterRules===void 0&&n.collapseWeakerClusterRules===void 0&&!y.__spc_warn_collapseClusterRules&&(y.__spc_warn_collapseClusterRules=!0,console.warn("[spc] collapseClusterRules is deprecated; use rules.collapseWeakerClusterRules"));const p=N=>{const j={};for(const w of Object.keys(N)){const P=N[w];P!==void 0&&(j[w]=P)}return j},h=p({excludeMovingRangeOutliers:l.excludeMovingRangeOutliers??e.excludeMovingRangeOutliers,specialCauseShiftPoints:r.shiftPoints??e.specialCauseShiftPoints,specialCauseTrendPoints:r.trendPoints??e.specialCauseTrendPoints,enableFourOfFiveRule:r.fourOfFiveEnabled??e.enableFourOfFiveRule,enableFifteenInInnerThirdRule:r.fifteenInnerThirdEnabled??e.enableFifteenInInnerThirdRule,collapseWeakerClusterRules:g??e.collapseWeakerClusterRules,precedenceStrategy:a.strategy??e.precedenceStrategy,conflictPrecedenceMode:a.conflictMode??e.conflictPrecedenceMode,minimumPoints:i.minimumPoints??e.minimumPoints,minimumPointsPartition:i.minimumPointsPartition??e.minimumPointsPartition,maximumPointsPartition:i.maximumPointsPartition??e.maximumPointsPartition,maximumPoints:i.maximumPoints??e.maximumPoints,transitionBufferPoints:i.transitionBufferPoints??e.transitionBufferPoints,minimumPointsWarning:s.minimumPointsWarning??e.minimumPointsWarning,pointConflictWarning:s.pointConflictWarning??e.pointConflictWarning,variationIconConflictWarning:s.variationIconConflictWarning??e.variationIconConflictWarning,nullValueWarning:s.nullValueWarning??e.nullValueWarning,targetSuppressedWarning:s.targetSuppressedWarning??e.targetSuppressedWarning,ghostOnRareEventWarning:s.ghostOnRareEventWarning??e.ghostOnRareEventWarning,partitionSizeWarnings:s.partitionSizeWarnings??e.partitionSizeWarnings,baselineSpecialCauseWarning:s.baselineSpecialCauseWarning??e.baselineSpecialCauseWarning,maximumPointsWarnings:s.maximumPointsWarnings??e.maximumPointsWarnings,assuranceCapabilityMode:u.assuranceCapabilityMode??e.assuranceCapabilityMode,emergingGraceEnabled:m,emergingDirectionGrace:m,baselineSuggest:d.enabled??e.baselineSuggest,baselineSuggestMinDeltaSigma:d.minDeltaSigma??e.baselineSuggestMinDeltaSigma,baselineSuggestStabilityPoints:d.stabilityPoints??e.baselineSuggestStabilityPoints,baselineSuggestMinGap:d.minGap??e.baselineSuggestMinGap,baselineSuggestScoreThreshold:d.scoreThreshold??e.baselineSuggestScoreThreshold,autoRecalculateAfterShift:f.enabled??e.autoRecalculateAfterShift,autoRecalculateShiftLength:f.shiftLength??e.autoRecalculateShiftLength,autoRecalculateDeltaSigma:f.deltaSigma??e.autoRecalculateDeltaSigma}),_={...h,...p(e)};if(m!==void 0&&(_.emergingGraceEnabled=m,_.grace={..._.grace,emergingEnabled:m}),h.collapseWeakerClusterRules!==void 0){const N=h.collapseWeakerClusterRules;_.collapseWeakerClusterRules=N,_.rules={..._.rules,collapseWeakerClusterRules:N}}return p(_)}function uo(t){const{chartType:e,metricImprovement:n,data:r,settings:a={}}=t,i=Cd(a),s={excludeMovingRangeOutliers:!1,specialCauseShiftPoints:6,specialCauseTrendPoints:6,enableFourOfFiveRule:!1,minimumPoints:13,minimumPointsWarning:!1,minimumPointsPartition:12,maximumPointsPartition:null,maximumPoints:null,variationIconConflictWarning:!0,nullValueWarning:!0,targetSuppressedWarning:!0,ghostOnRareEventWarning:!0,partitionSizeWarnings:!0,baselineSpecialCauseWarning:!0,maximumPointsWarnings:!0,assuranceCapabilityMode:!0,baselineSuggest:!1,baselineSuggestMinDeltaSigma:.5,baselineSuggestStabilityPoints:5,baselineSuggestMinGap:12,baselineSuggestScoreThreshold:50,precedenceStrategy:"directional_first",emergingDirectionGrace:!1,rules:{},grace:{},...i};if(!Array.isArray(r))throw new Error("data must be an array of rows");const l=r.map((h,_)=>({rowId:_+1,x:h.x,value:ye(h.value)?h.value:null,ghost:!!h.ghost,baseline:!!h.baseline,target:ye(h.target)?h.target:null}));if(i?.autoRecalculateAfterShift)try{Gx(l,i,n)}catch{}const u=Ux(l),c=[],d=[],m=l.filter(h=>!h.ghost&&ye(h.value)).length>=(s.minimumPoints??13);let g=0;const y={};for(const h of u){g++;const _=h.map(v=>v.value),N=h.map(v=>v.ghost);let j=new Array(_.length).fill(null),w=NaN,P=NaN,C=NaN,M={upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};if(e==="XmR"){j=bd(_,N);const v=_.filter((D,I)=>!N[I]&&ye(D));w=v.length?Ht(v):NaN;const A=yd(j,!!s.excludeMovingRangeOutliers);P=A.mrMean,C=A.mrUcl,M=Fx(w,P)}else if(e==="T"){const v=Hx(_,N,!!s.excludeMovingRangeOutliers);j=v.mr,P=v.mrMean??NaN,C=v.mrUcl??NaN,w=v.center??NaN,M={upperProcessLimit:v.upperProcessLimit,lowerProcessLimit:v.lowerProcessLimit,upperTwoSigma:v.upperTwoSigma,lowerTwoSigma:v.lowerTwoSigma,upperOneSigma:v.upperOneSigma,lowerOneSigma:v.lowerOneSigma}}else if(e==="G"){const v=_.filter((I,T)=>!N[T]&&ye(I)),A=v.length?Ht(v):NaN,D=Rx(A);w=D.cl??NaN,M={upperProcessLimit:D.ucl,lowerProcessLimit:D.lcl,upperTwoSigma:D.twoHigh,lowerTwoSigma:D.twoLow,upperOneSigma:D.oneHigh,lowerOneSigma:D.oneLow},j=new Array(_.length).fill(null),P=NaN,C=NaN}else d.push({code:"unknown_chart_type",category:"config",severity:"error",message:`Unknown ChartType '${e}' â€“ supported: XmR, T, G.`,context:{chartType:e}});const S=h.map((v,A)=>{const D=!v.ghost&&ye(v.value)?_.slice(0,A+1).filter((ae,z)=>!N[z]&&ye(ae)).length:0,I=m,T=I?M:{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};return{rowId:v.rowId,x:v.x,value:ye(v.value)?v.value:null,ghost:v.ghost,partitionId:g,pointRank:D,mean:I&&ye(w)?w:null,mr:ye(j[A])?j[A]:null,mrMean:I&&ye(P)?P:null,mrUcl:I&&ye(C)?C:null,upperProcessLimit:ye(T.upperProcessLimit)?T.upperProcessLimit:null,lowerProcessLimit:ye(T.lowerProcessLimit)?T.lowerProcessLimit:null,upperTwoSigma:ye(T.upperTwoSigma)?T.upperTwoSigma:null,lowerTwoSigma:ye(T.lowerTwoSigma)?T.lowerTwoSigma:null,upperOneSigma:ye(T.upperOneSigma)?T.upperOneSigma:null,lowerOneSigma:ye(T.lowerOneSigma)?T.lowerOneSigma:null,target:ye(v.target)?v.target:null,specialCauseFifteenInnerThird:!1,specialCauseSinglePointUp:!1,specialCauseSinglePointDown:!1,specialCauseTwoOfThreeUp:!1,specialCauseTwoOfThreeDown:!1,specialCauseFourOfFiveUp:!1,specialCauseFourOfFiveDown:!1,specialCauseShiftUp:!1,specialCauseShiftDown:!1,specialCauseTrendUp:!1,specialCauseTrendDown:!1,variationIcon:"none",assuranceIcon:"none",upperBaseline:I&&ye(w)?w:null,lowerBaseline:I&&ye(w)?w:null,movingRangeHighPointValue:I&&ye(C)?C:null,ghostValue:v.ghost&&ye(v.value)?v.value:null,ghostFlag:!!v.ghost,specialCauseImprovementValue:null,specialCauseConcernValue:null,specialCauseNeitherValue:null,ruleTags:[]}});y[g]=S.filter(v=>!v.ghost&&ye(v.value)).length;const x=s.specialCauseShiftPoints??6,$=s.specialCauseTrendPoints??6,k=[];for(let v=0;v<S.length;v++){const A=S[v],D=A.value;if(!A.ghost&&ye(D)&&k.push(v),!(ye(A.mean)&&ye(A.upperProcessLimit)&&ye(A.lowerProcessLimit))||A.ghost||!ye(D)){c.push(A);continue}A.specialCauseSinglePointUp=ye(A.upperProcessLimit)?D>A.upperProcessLimit:!1,A.specialCauseSinglePointDown=ye(A.lowerProcessLimit)?D<A.lowerProcessLimit:!1,c.push(A)}if(k.length){const v=I=>S[I];let A=[],D=[];for(const I of k){const T=v(I);if(!ye(T.mean)||!ye(T.value)){A=[],D=[];continue}if(T.value>T.mean?(A.push(I),D=[]):T.value<T.mean?(D.push(I),A=[]):(A=[],D=[]),A.length>=x)for(const E of A){const ae=v(E);ae.specialCauseShiftUp=!0}if(D.length>=x)for(const E of D){const ae=v(E);ae.specialCauseShiftDown=!0}}for(let I=0;I<=k.length-3;I++){const E=k.slice(I,I+3).map(v);if(!E.every(de=>ye(de.mean)&&ye(de.value)))continue;const ae=E[0].mean,z=E.every(de=>de.value>ae),H=E.every(de=>de.value<ae);if(!z&&!H)continue;const U=E[0].upperTwoSigma??1/0,O=E[0].lowerTwoSigma??-1/0,re=E[0].upperProcessLimit??1/0,G=E[0].lowerProcessLimit??-1/0,ce=E.filter(de=>de.value>U&&de.value<=re),ve=E.filter(de=>de.value<O&&de.value>=G);if(z&&ce.length>=2)for(const de of ce)de.specialCauseTwoOfThreeUp=!0;if(H&&ve.length>=2)for(const de of ve)de.specialCauseTwoOfThreeDown=!0}if(s.enableFourOfFiveRule)for(let I=0;I<=k.length-5;I++){const E=k.slice(I,I+5).map(v);if(!E.every(re=>ye(re.mean)&&ye(re.value)))continue;const ae=E[0].mean;if(!E.every(re=>re.value>ae)&&!E.every(re=>re.value<ae))continue;const z=E[0].upperOneSigma??1/0,H=E[0].lowerOneSigma??-1/0,U=E.filter(re=>re.value>z),O=E.filter(re=>re.value<H);if(E.every(re=>re.value>ae)&&U.length>=4)for(const re of U)re.specialCauseFourOfFiveUp=!0;if(E.every(re=>re.value<ae)&&O.length>=4)for(const re of O)re.specialCauseFourOfFiveDown=!0}for(let I=0;I<=k.length-$;I++){const T=k.slice(I,I+$),E=T.map(v);if(!E.every(H=>ye(H.value)))continue;let ae=!0,z=!0;for(let H=1;H<E.length&&(E[H].value>E[H-1].value||(ae=!1),E[H].value<E[H-1].value||(z=!1),!(!ae&&!z));H++);if(ae)for(const H of T){const U=v(H);U.specialCauseTrendUp=!0}if(z)for(const H of T){const U=v(H);U.specialCauseTrendDown=!0}}if(s.enableFifteenInInnerThirdRule){let I=[];for(const T of k){const E=v(T);if(!ye(E.value)||!ye(E.mean)||!ye(E.upperOneSigma)||!ye(E.lowerOneSigma)){I=[];continue}if(!(E.value<E.upperOneSigma&&E.value>E.lowerOneSigma)){I=[];continue}if(I.push(T),I.length>=15){const z=I.map(v),H=z.some(O=>O.value>O.mean),U=z.some(O=>O.value<O.mean);if(H&&U)for(const O of I)v(O).specialCauseFifteenInnerThird=!0}}}}if(s.maximumPointsPartition&&Number.isFinite(s.maximumPointsPartition)){const v=s.maximumPointsPartition;let A=0;for(const D of c.filter(I=>I.partitionId===g))!D.ghost&&ye(D.value)&&A++,A>v&&(D.mean=D.upperProcessLimit=D.lowerProcessLimit=null,D.upperTwoSigma=D.lowerTwoSigma=D.upperOneSigma=D.lowerOneSigma=null)}}for(const h of c){if(h.ruleTags&&h.ruleTags.length)continue;const _=[];h.specialCauseShiftUp&&_.push("shift_high"),h.specialCauseShiftDown&&_.push("shift_low"),h.specialCauseTrendUp&&_.push("trend_inc"),h.specialCauseTrendDown&&_.push("trend_dec"),h.specialCauseSinglePointUp&&_.push("single_above"),h.specialCauseSinglePointDown&&_.push("single_below"),h.specialCauseTwoOfThreeUp&&_.push("two_of_three_above"),h.specialCauseTwoOfThreeDown&&_.push("two_of_three_below"),h.specialCauseFourOfFiveUp&&_.push("four_of_five_above"),h.specialCauseFourOfFiveDown&&_.push("four_of_five_below"),h.specialCauseFifteenInnerThird&&_.push("fifteen_inner_third"),_.length&&(h.ruleTags=_)}for(let h=0;h<c.length;h++){const _=c[h];if(Object.prototype.hasOwnProperty.call(_,"improvementValueBeforePruning")||Object.defineProperty(_,"improvementValueBeforePruning",{get(){return _.originalSpecialCauseImprovementValue??null},enumerable:!1,configurable:!0}),Object.prototype.hasOwnProperty.call(_,"concernValueBeforePruning")||Object.defineProperty(_,"concernValueBeforePruning",{get(){return _.originalSpecialCauseConcernValue??null},enumerable:!1,configurable:!0}),_.ghost||!ye(_.value)||_.mean===null){_.variationIcon="none";continue}const N=_.value>_.mean,j=_.value<_.mean;s.rules?.collapseWeakerClusterRules&&(_.specialCauseTwoOfThreeUp&&_.specialCauseFourOfFiveUp&&(_.specialCauseTwoOfThreeUp=!1),_.specialCauseTwoOfThreeDown&&_.specialCauseFourOfFiveDown&&(_.specialCauseTwoOfThreeDown=!1));const w=_.specialCauseTrendUp&&N,P=_.specialCauseTrendDown&&j,C=_.specialCauseSinglePointUp||_.specialCauseTwoOfThreeUp||s.enableFourOfFiveRule&&_.specialCauseFourOfFiveUp||_.specialCauseShiftUp||w,M=_.specialCauseSinglePointDown||_.specialCauseTwoOfThreeDown||s.enableFourOfFiveRule&&_.specialCauseFourOfFiveDown||_.specialCauseShiftDown||P;let S=!1;if(s.precedenceStrategy==="directional_first"&&(s.grace?.emergingEnabled||s.emergingGraceEnabled||s.emergingDirectionGrace)){const $=s.specialCauseTrendPoints||6;if($>1&&!(_.specialCauseTrendUp||_.specialCauseTrendDown)){const k=$-1,v=[];for(let A=h;A>=0&&v.length<k;A--){const D=c[A];!D.ghost&&ye(D.value)&&D.mean!==null&&v.unshift(D)}if(v.length===k){let A=!0;for(let D=1;D<v.length&&A;D++)n==="Up"?v[D].value>v[D-1].value||(A=!1):n==="Down"&&v[D].value<v[D-1].value||(A=!1);S=A}}}if(s.precedenceStrategy==="directional_first"){const k=n==="Up"?C:n==="Down"?M:!1,v=n==="Up"?M:n==="Down"?C:!1;k&&!v?_.variationIcon="improvement":v&&!k?_.variationIcon=S?"neither":"concern":k&&v?_.variationIcon=S||_.specialCauseTrendUp||_.specialCauseTrendDown?"improvement":"neither":_.variationIcon="neither"}else n==="Up"?_.variationIcon=C?"improvement":M?"concern":"neither":n==="Down"?_.variationIcon=M?"improvement":C?"concern":"neither":_.variationIcon="neither";const x=C||M;if(_.specialCauseImprovementValue=x&&_.variationIcon==="improvement"?_.value:null,_.specialCauseConcernValue=x&&_.variationIcon==="concern"?_.value:null,_.specialCauseNeitherValue=x&&_.variationIcon==="neither"?_.value:null,s.conflictPrecedenceMode==="sql_ranking_v2_6a"&&_.specialCauseImprovementValue!==null&&_.specialCauseConcernValue!==null){const $=[];_.specialCauseSinglePointUp&&$.push({id:"single_point",rank:1,side:"up"}),_.specialCauseSinglePointDown&&$.push({id:"single_point",rank:1,side:"down"}),_.specialCauseTwoOfThreeUp&&$.push({id:"two_sigma",rank:2,side:"up"}),_.specialCauseTwoOfThreeDown&&$.push({id:"two_sigma",rank:2,side:"down"}),_.specialCauseShiftUp&&$.push({id:"shift",rank:3,side:"up"}),_.specialCauseShiftDown&&$.push({id:"shift",rank:3,side:"down"}),_.specialCauseTrendUp&&$.push({id:"trend",rank:4,side:"up"}),_.specialCauseTrendDown&&$.push({id:"trend",rank:4,side:"down"});const k=$.filter(z=>z.side==="up").reduce((z,H)=>Math.max(z,H.rank),0),v=$.filter(z=>z.side==="down").reduce((z,H)=>Math.max(z,H.rank),0);let A;k>v?A="Upwards":v>k?A="Downwards":A="Same";const D=_.specialCauseImprovementValue,I=_.specialCauseConcernValue;A==="Upwards"?n==="Up"?_.specialCauseConcernValue=null:n==="Down"&&(_.specialCauseImprovementValue=null):A==="Downwards"?n==="Up"?_.specialCauseImprovementValue=null:n==="Down"&&(_.specialCauseConcernValue=null):_.variationIcon==="improvement"?_.specialCauseConcernValue=null:_.variationIcon==="concern"?_.specialCauseImprovementValue=null:_.specialCauseConcernValue=null,_.specialCauseImprovementValue!==null&&_.specialCauseConcernValue===null?_.variationIcon="improvement":_.specialCauseConcernValue!==null&&_.specialCauseImprovementValue===null?_.variationIcon="concern":_.specialCauseImprovementValue===null&&_.specialCauseConcernValue===null&&(_.variationIcon="neither");const T=_.specialCauseImprovementValue!==null?"up":_.specialCauseConcernValue!==null?"down":void 0,E=T==="up"?k:T==="down"?v:Math.max(k,v),ae=$.find(z=>z.rank===E&&(!T||z.side===T));_.conflictPrimeDirection=A,_.conflictResolved=!0,_.conflictResolvedRank=E||void 0,ae&&(_.conflictResolvedByRuleId=ae.id),_.pruningMode="conflict",_.originalSpecialCauseImprovementValue=D,_.originalSpecialCauseConcernValue=I}if(ye(_.value)&&_.mean!==null){_.assuranceIcon="none";const $=l[_.rowId-1];if(ye($.target)){const k=$.target;s.assuranceCapabilityMode&&ye(_.upperProcessLimit)&&ye(_.lowerProcessLimit)?n==="Up"?_.lowerProcessLimit!==null&&_.lowerProcessLimit>k?_.assuranceIcon="pass":_.upperProcessLimit!==null&&_.upperProcessLimit<k?_.assuranceIcon="fail":_.assuranceIcon="none":n==="Down"?_.upperProcessLimit!==null&&_.upperProcessLimit<k?_.assuranceIcon="pass":_.lowerProcessLimit!==null&&_.lowerProcessLimit>k?_.assuranceIcon="fail":_.assuranceIcon="none":_.assuranceIcon="none":n==="Down"?_.assuranceIcon=_.value<=k?"pass":"fail":n==="Up"?_.assuranceIcon=_.value>=k?"pass":"fail":_.assuranceIcon="none"}}}if((s.minimumPointsWarning??!1)&&!m){const h=l.filter(_=>!_.ghost&&ye(_.value)).length;d.push({code:"insufficient_points_global",category:"data",severity:"warning",message:`Only ${h} non-ghost points available; minimum required is ${s.minimumPoints}. Limits and icons suppressed.`,context:{available:h,minimumRequired:s.minimumPoints}})}if(s.variationIconConflictWarning)for(const h of c)h.variationIcon==="improvement"&&(h.specialCauseSinglePointUp||h.specialCauseTwoOfThreeUp||s.enableFourOfFiveRule&&h.specialCauseFourOfFiveUp||h.specialCauseShiftUp||h.specialCauseTrendUp)&&(h.specialCauseSinglePointDown||h.specialCauseTwoOfThreeDown||s.enableFourOfFiveRule&&h.specialCauseFourOfFiveDown||h.specialCauseShiftDown||h.specialCauseTrendDown)&&d.push({code:"variation_conflict_row",category:"logic",severity:"warning",message:`Row ${h.rowId}: simultaneous high/low special-cause signals â€“ variation icon may be ambiguous.`,context:{rowId:h.rowId}});if(s.maximumPoints&&Number.isFinite(s.maximumPoints)){const h=s.maximumPoints;let _=0;for(const N of c)!N.ghost&&ye(N.value)&&_++,_>h&&(N.mean=N.upperProcessLimit=N.lowerProcessLimit=null,N.upperTwoSigma=N.lowerTwoSigma=N.upperOneSigma=N.lowerOneSigma=null)}if(s.nullValueWarning&&(e==="XmR"||e==="G")){const h=l.filter(_=>!_.ghost&&(_.value===null||_.value===void 0||!ye(_.value))).length;h&&d.push({code:"null_values_excluded",category:"data",severity:"info",message:`${h} null/missing value(s) excluded from calculations.`,context:{nullCount:h}})}if(s.targetSuppressedWarning&&(e==="T"||e==="G")&&l.some(_=>ye(_.target))&&d.push({code:"target_ignored_rare_event",category:"target",severity:"info",message:`Targets provided are ignored for ${e} charts in this port.`,context:{chartType:e}}),s.ghostOnRareEventWarning&&(e==="T"||e==="G")){const h=l.filter(_=>_.ghost).length;h&&d.push({code:"ghost_rows_rare_event",category:"ghost",severity:"info",message:`${h} ghost row(s) supplied for rare-event chart (${e}); verify intent.`,context:{chartType:e,ghostCount:h}})}if(s.partitionSizeWarnings&&Object.entries(y).forEach(([h,_])=>{_<s.minimumPointsPartition&&d.push({code:"insufficient_points_partition",category:"partition",severity:"warning",message:`Partition ${h} has only ${_} non-ghost point(s); below recommended ${s.minimumPointsPartition}.`,context:{partitionId:Number(h),count:_,minimum:s.minimumPointsPartition}})}),s.baselineSpecialCauseWarning){const h=[];c.forEach(_=>{l[_.rowId-1].baseline&&(_.specialCauseSinglePointUp||_.specialCauseSinglePointDown||_.specialCauseTwoOfThreeUp||_.specialCauseTwoOfThreeDown||_.specialCauseFourOfFiveUp||_.specialCauseFourOfFiveDown||_.specialCauseShiftUp||_.specialCauseShiftDown||_.specialCauseTrendUp||_.specialCauseTrendDown)&&h.push(_.rowId)}),h.length&&d.push({code:"baseline_with_special_cause",category:"baseline",severity:"warning",message:`Baseline set with special-cause present at row(s): ${h.join(", ")}.`,context:{rows:h}})}s.maximumPointsWarnings&&(s.maximumPointsPartition&&Number.isFinite(s.maximumPointsPartition)&&d.push({code:"partition_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after ${s.maximumPointsPartition} non-ghost points per partition.`,context:{cap:s.maximumPointsPartition}}),s.maximumPoints&&Number.isFinite(s.maximumPoints)&&d.push({code:"global_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after global cap of ${s.maximumPoints} non-ghost points.`,context:{cap:s.maximumPoints}}));let p;if(s.baselineSuggest){const h=c,_=s.baselineSuggestStabilityPoints,N=s.baselineSuggestMinGap,j=s.baselineSuggestMinDeltaSigma,w=s.baselineSuggestScoreThreshold,P=[];let C=0;for(let M=0;M<h.length;M++){let S=function(v){return!!x[v]&&!$?.[v]};const x=h[M];M>0&&h[M-1].partitionId!==x.partitionId&&(C=M);const $=h[M-1],k=[];(S("specialCauseShiftUp")||S("specialCauseShiftDown"))&&k.push({reason:"shift",index:M}),(S("specialCauseTrendUp")||S("specialCauseTrendDown"))&&k.push({reason:"trend",index:M}),(S("specialCauseSinglePointUp")||S("specialCauseSinglePointDown"))&&k.push({reason:"point",index:M});for(const v of k){if(v.index-C<N)continue;const A=Math.max(0,v.index-_),D=v.index-1;if(D-A+1<_)continue;const I=v.index,T=v.index+_-1;if(T>=h.length)continue;const E=h.slice(A,D+1).map(L=>L.value).filter(ye),ae=h.slice(I,T+1).map(L=>L.value).filter(ye);if(E.length<_||ae.length<_)continue;const z=h[v.index];let H=null;if(ye(z.upperProcessLimit)&&ye(z.mean)){const L=z.upperProcessLimit-z.mean;L>0&&(H=L/3)}if(!H||H<=0)continue;const U=Ht(E),O=Ht(ae),re=O-U;if(Math.abs(re)<j*H)continue;const ce=h.slice(I,T+1).filter(L=>L.variationIcon==="concern").length;if(ce>1)continue;const ve=L=>{const F=Ht(L);return L.length?L.reduce((W,Z)=>W+(Z-F)*(Z-F),0)/L.length:0},de=ve(E),he=ve(ae);let ee=v.reason==="shift"?90:v.reason==="trend"?70:60;if(he<de&&(ee+=10),ee-=ce*15,ee<w)continue;const ie=P.find(L=>L.index===v.index);if(ie){const L=F=>F==="shift"?3:F==="trend"?2:1;(L(v.reason)>L(ie.reason)||ee>ie.score)&&(ie.reason=v.reason,ie.score=ee,ie.deltaMean=re,ie.oldMean=U,ie.newMean=O,ie.window=[I,T])}else P.push({index:v.index,reason:v.reason,score:ee,deltaMean:re,oldMean:U,newMean:O,window:[I,T]})}M>0&&h[M-1].partitionId!==h[M].partitionId&&(C=M)}P.sort((M,S)=>M.index-S.index),p=P}return{rows:c,warnings:d,...p?{suggestedBaselines:p}:{}}}const vn={singlePointUp:{tooltip:"Single point above upper control limit",narration:"Single point beyond a control limit"},singlePointDown:{tooltip:"Single point below lower control limit",narration:"Single point beyond a control limit"},twoOfThreeUp:{tooltip:"Two of three points beyond +2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},twoOfThreeDown:{tooltip:"Two of three points beyond -2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},fourOfFiveUp:{tooltip:"Four of five points beyond +1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},fourOfFiveDown:{tooltip:"Four of five points beyond -1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},shiftUp:{tooltip:"Shift: run of points above centre line",narration:"Shift (run on one side of mean)"},shiftDown:{tooltip:"Shift: run of points below centre line",narration:"Shift (run on one side of mean)"},trendUp:{tooltip:"Trend: consecutive increasing points",narration:"Trend (consecutive increases)"},trendDown:{tooltip:"Trend: consecutive decreasing points",narration:"Trend (consecutive decreases)"}};function gi(t){if(!t)return[];const e=[];return t.specialCauseSinglePointUp&&e.push("singlePointUp"),t.specialCauseSinglePointDown&&e.push("singlePointDown"),t.specialCauseTwoOfThreeUp&&e.push("twoOfThreeUp"),t.specialCauseTwoOfThreeDown&&e.push("twoOfThreeDown"),t.specialCauseFourOfFiveUp&&e.push("fourOfFiveUp"),t.specialCauseFourOfFiveDown&&e.push("fourOfFiveDown"),t.specialCauseShiftUp&&e.push("shiftUp"),t.specialCauseShiftDown&&e.push("shiftDown"),t.specialCauseTrendUp&&e.push("trendUp"),t.specialCauseTrendDown&&e.push("trendDown"),e}function _i(t){switch(t){case Be.Improvement:return"Improvement signal";case Be.Concern:return"Concern signal";case Be.Neither:return"Common cause variation";case Be.None:return null;default:return null}}function Vx(t){switch(t){case Ot.Pass:return"Target met";case Ot.Fail:return"Target not met";default:return null}}function Yx(t,e,n){if(t==null||!Number.isFinite(e)||e<=0)return null;const r=Math.abs((n-t)/e);return r<1?"Within 1Ïƒ":r<2?"Between 1â€“2Ïƒ":r<3?"Between 2â€“3Ïƒ":"Beyond 3Ïƒ"}const Et={improvement:{token:"var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",hex:"#00B0F0"},concern:{token:"var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",hex:"#E46C0A"},none:{token:"var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",hex:"#490092"},neither:{token:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",hex:"#A6A6A6"}};function Td(t){return t?Et[t]?.token??Et.neither.token:Et.neither.token}function qx(t){return t?Et[t]?.hex??Et.neither.hex:Et.neither.hex}const jd=({engineRows:t,limits:e,pointDescriber:n,measureName:r,measureUnit:a,dateFormatter:i,enableNeutralNoJudgement:s=!0,showTrendGatingExplanation:l=!0})=>{const u=un(),c=yn(),[d,f]=K.useState(null),[m,g]=K.useState(!1),y=K.useRef(null);K.useEffect(()=>{if(u){if(u.focused&&(f(u.focused),y.current&&(cancelAnimationFrame(y.current),y.current=null)),!u.focused&&!m){const pe=requestAnimationFrame(()=>{f(null),y.current=null});y.current=pe}return()=>{y.current&&(cancelAnimationFrame(y.current),y.current=null)}}},[u,u?.focused,m]);const p=u&&(u.focused||(m?d:null)||d),[h,_]=K.useState(!1);K.useEffect(()=>{const pe=requestAnimationFrame(()=>_(!0));return()=>cancelAnimationFrame(pe)},[p?.index]);const N=c?.innerWidth??0,j=c?.innerHeight??0,w=p?Math.min(Math.max(p.clientX,0),N):0,P=p?Math.min(Math.max(p.clientY,0),j):0,M=c.ref?.current;if(!p)return null;const S=t?.[p.index],$=gi(S).map(pe=>({id:pe,label:vn[pe].tooltip})),k=p.x instanceof Date?p.x:new Date(p.x),v=i?i(k):k.toDateString(),A=a?`${a}`:"",D=r||A?`${p.y}${A?""+A:" "}${r?" "+r:""}`:`${p.y}`,I=_i(S?.variationIcon),T=Vx(S?.assuranceIcon),E=Yx(e.mean??null,e.sigma,p.y),ae=n?n(p.index,{x:p.x,y:p.y}):void 0,z=I||T||E,H=S?.specialCauseTrendUp||S?.specialCauseTrendDown,U=S?.variationIcon===Be.Neither&&H,O=l&&U?"Trend detected (monotonic run) â€“ held neutral until values cross onto the favourable side of the mean.":null,re=$.length>0,G=S?.primeDirection,ce=S?.primeRuleId,ve=s&&S?.variationIcon===Be.Neither&&re,de="var(--nhs-fdp-color-primary-yellow, #ffeb3b)",he=Td(S?.variationIcon),ee=6.2,L=[ae||"",`${v} â€¢ ${D}`].filter(Boolean).reduce((pe,q)=>Math.max(pe,q.length*ee+32),0),F=200,W=440,Z=Math.min(W,Math.max(F,L));let Y=w+12,fe=(c.margin?.top??0)+P+16;Y+Z>N&&(Y=w- -60-Z),Y<0&&(Y=Math.max(0,N-Z));const Se=p?`spc-tooltip-${p.index}`:"spc-tooltip",ge=M?Fg.createPortal(o.jsx("div",{id:Se,className:"fdp-spc-tooltip fdp-spc-tooltip-portal"+(h?" is-visible":""),style:{position:"absolute",left:Y,top:fe,width:Z,maxWidth:W,zIndex:10,pointerEvents:"auto",userSelect:"none"},role:"tooltip","aria-live":"polite","aria-hidden":h?"false":"true","data-floating":!0,"data-placement":Y+Z+12>N?"left":"right",onPointerEnter:()=>{g(!0),y.current&&(cancelAnimationFrame(y.current),y.current=null)},onPointerLeave:()=>{if(g(!1),!u?.focused){const pe=requestAnimationFrame(()=>{f(null),y.current=null});y.current=pe}},children:o.jsxs("div",{className:"fdp-spc-tooltip__body",children:[o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--date",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Date"})}),o.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:v})]}),o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--value",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Value"})}),o.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:D})]}),z&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--signals",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Signals"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Signals",children:I?.toLowerCase().includes("concern")?o.jsx(qe,{text:I,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):I?.toLowerCase().includes("improvement")?o.jsx(qe,{text:I,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):ve?o.jsx(qe,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):I?o.jsx(qe,{text:I,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null})]}),T&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--assurance",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Assurance"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:(()=>{const pe=T.toLowerCase(),V=!(pe.includes("not met")||pe.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(pe);return o.jsx(qe,{text:T,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${V?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${T}`})})()})]}),E&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--limits",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Control Limits & Sigma"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:o.jsx(qe,{text:(()=>{const pe=E.toLowerCase();return pe.startsWith("within 1")?"â‰¤1Ïƒ":pe.startsWith("1â€“2")?"1â€“2Ïƒ":pe.startsWith("2â€“3")?"2â€“3Ïƒ":pe.startsWith(">3")?">3Ïƒ":E})(),color:E.includes(">3")?"orange":E.includes("2â€“3")?"yellow":"grey","aria-label":`Sigma zone: ${E}`,className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--zone"})})]}),O&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--gating","data-gating":!0,children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Trend gating"})}),o.jsx("div",{className:"fdp-spc-tooltip__explanation","aria-live":"off",children:O})]}),re&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Special cause"})}),o.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",children:$.map(({id:pe,label:q})=>{const V=String(pe),le=V===co.TrendIncreasing||V===co.TrendDecreasing?"fdp-spc-tag--trend":ve?"fdp-spc-tag--no-judgement":I?I.toLowerCase().includes("concern")?"fdp-spc-tag--concern":I.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common";return o.jsx(qe,{text:q,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${le}`,"data-rule-id":V},V)})}),G&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",style:{marginTop:16},children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",style:{marginBottom:6},children:o.jsx("strong",{children:"Prime Direction"})}),(()=>{const pe=ve?"fdp-spc-tag--no-judgement":I?I.toLowerCase().includes("concern")?"fdp-spc-tag--concern":I.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",q=`${G}${ce?` (${ce})`:""}`;return o.jsx(qe,{text:q,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${pe}`,"aria-label":`Prime direction ${G}${ce?` via ${ce}`:""}`})})()]})]})]})}),M):null;return o.jsxs("g",{className:"fdp-tooltip-layer fdp-spc-tooltip",pointerEvents:"none","aria-hidden":"true",children:[o.jsx("circle",{cx:w,cy:P,r:7,fill:"none",stroke:de,strokeWidth:3}),o.jsx("circle",{cx:w,cy:P,r:5,fill:"#000",stroke:de,strokeWidth:1.5}),o.jsx("circle",{cx:w,cy:P,r:2.5,fill:he,stroke:"#fff",strokeWidth:.5}),ge]})};let fo=null;try{fo=require("@fergusbisset/nhs-fdp-design-system/dist/js/tokens.json")?.color?.["data-viz"]?.spc||null}catch{}const Mt=(t,e)=>{if(!fo)return e;const n=t.split(".");let r=fo;for(const i of n){if(r==null)break;r=r[i]}const a=r;return a==null?e:typeof a=="string"||typeof a=="number"?String(a):a.$value!=null?String(a.$value):a.value!=null?String(a.value):e},Nd=()=>({start:Mt("gradient.stop.start-opacity","0.12"),mid:Mt("gradient.stop.mid-opacity","0.03"),end:Mt("gradient.stop.end-opacity","0"),triStart:Mt("gradient.stop.triangle-start-opacity",Mt("gradient.stop.start-opacity","0.12")),triMid:Mt("gradient.stop.triangle-mid-opacity",Mt("gradient.stop.mid-opacity","0.03")),triEnd:Mt("gradient.stop.triangle-end-opacity",Mt("gradient.stop.end-opacity","0"))});var wn=(t=>(t.Pass="pass",t.Fail="fail",t.Uncertain="uncertain",t))(wn||{});const Xx={pass:"#00B0F0",fail:"#E46C0A",uncertain:"#A6A6A6"},Kx={pass:"P",fail:"F",uncertain:"?"};var Ze=(t=>(t.HigherIsBetter="higher_is_better",t.LowerIsBetter="lower_is_better",t.ContextDependent="context_dependent",t))(Ze||{}),je=(t=>(t.Higher="higher",t.Lower="lower",t))(je||{}),pt=(t=>(t.Improving="improving",t.Deteriorating="deteriorating",t.No_Judgement="no_judgement",t.None="none",t))(pt||{}),Ie=(t=>(t.SpecialCauseImproving="special_cause_improving",t.SpecialCauseDeteriorating="special_cause_deteriorating",t.CommonCause="common_cause",t.SpecialCauseNoJudgement="special_cause_no_judgement",t))(Ie||{});const Zx=t=>{const e=t.replace("#",""),n=parseInt(e.slice(0,2),16)/255,r=parseInt(e.slice(2,4),16)/255,a=parseInt(e.slice(4,6),16)/255,i=[n,r,a].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*i[0]+.7152*i[1]+.0722*i[2]<.55?"#ffffff":"#212b32"},ho={special_cause_deteriorating:{hex:Et.concern.hex,judgement:"deteriorating",label:"Special Cause (Deteriorating)",description:"Deteriorating variation detected (special cause) relative to baseline."},special_cause_improving:{hex:Et.improvement.hex,judgement:"improving",label:"Special Cause (Improving)",description:"Improving variation detected (special cause) relative to baseline."},common_cause:{hex:Et.neither.hex,judgement:"none",label:"Common Cause",description:"Common cause variation only â€“ no special cause detected."},special_cause_no_judgement:{hex:Et.none.hex,judgement:"no_judgement",label:"Special Cause (No Judgement)",description:"Special cause detected without assigning improving/deteriorating judgement."}};Object.values(ho).forEach(t=>{t.text||(t.text=Zx(t.hex))});const po=t=>ho[t],bi=t=>ho[t].judgement||"none",Dd={special:{higher:[{cx:77.5,cy:158.5},{cx:114,cy:175},{cx:150.5,cy:158.5},{cx:188,cy:125},{cx:225,cy:137}],lower:[{cx:77.5,cy:139.5},{cx:114,cy:124.5},{cx:150.5,cy:139.5},{cx:188,cy:175.5},{cx:224.5,cy:162}]},common:[{cx:76.5,cy:149.5},{cx:113,cy:179.5},{cx:149.5,cy:117},{cx:187,cy:171},{cx:223.5,cy:158}]};function Jx(t,e){let n;return t==="common_cause"?n=Dd.common:n=Dd.special[e==="lower"?"lower":"higher"],n.map(r=>({...r}))}const Md=t=>{const e=()=>{globalThis.__spcIconDeprecationEmitted||(console.warn("[SPCVariationIcon] Deprecated payload shape detected. Migrate to { variationIcon, improvementDirection, specialCauseNeutral?, trend? }."),globalThis.__spcIconDeprecationEmitted=!0)};if(t.variationIcon!==void 0){const s=t;let l;s.improvementDirection!==void 0?l=s.improvementDirection===Ee.Up?Ze.HigherIsBetter:s.improvementDirection===Ee.Down?Ze.LowerIsBetter:Ze.ContextDependent:s.polarity&&(l=s.polarity);let u;switch(s.variationIcon){case Be.Improvement:u=Ie.SpecialCauseImproving;break;case Be.Concern:u=Ie.SpecialCauseDeteriorating;break;case Be.Neither:u=s.specialCauseNeutral?Ie.SpecialCauseNoJudgement:Ie.CommonCause;break;case Be.None:default:u=Ie.SpecialCauseNoJudgement;break}let c=s.trend;return c||(u===Ie.SpecialCauseImproving?c=l===Ze.LowerIsBetter?je.Lower:je.Higher:u===Ie.SpecialCauseDeteriorating?c=l===Ze.LowerIsBetter?je.Higher:je.Lower:u===Ie.SpecialCauseNoJudgement?s.highSideSignal&&!s.lowSideSignal?c=je.Higher:s.lowSideSignal&&!s.highSideSignal?c=je.Lower:c=je.Higher:c=je.Higher),{state:u,direction:c,polarity:l??Ze.ContextDependent}}if(t.state!==void 0){e();const s=t;let l=s.trend;return!l&&(s.state===Ie.SpecialCauseImproving||s.state===Ie.SpecialCauseDeteriorating)&&s.polarity&&(s.state===Ie.SpecialCauseImproving?l=s.polarity===Ze.LowerIsBetter?je.Lower:je.Higher:l=s.polarity===Ze.LowerIsBetter?je.Higher:je.Lower),l||(s.state===Ie.SpecialCauseImproving?l=je.Higher:s.state===Ie.SpecialCauseDeteriorating?l=je.Lower:l=je.Higher),{state:s.state,direction:l,polarity:s.polarity??Ze.ContextDependent}}const n=t;e();const a={[pt.Improving]:Ie.SpecialCauseImproving,[pt.Deteriorating]:Ie.SpecialCauseDeteriorating,[pt.No_Judgement]:Ie.SpecialCauseNoJudgement,[pt.None]:Ie.CommonCause}[n.judgement];let i;return n.judgement===pt.Improving?i=n.polarity===Ze.LowerIsBetter?je.Lower:je.Higher:n.judgement===pt.Deteriorating?i=n.polarity===Ze.LowerIsBetter?je.Higher:je.Lower:i=n.trend??je.Higher,{state:a,direction:i,polarity:n.polarity}};function Qx(t,e){const{state:n,direction:r,polarity:a}=Md(t),i=bi(n),s=r===je.Higher?"above":"below",l=r===je.Higher?"upwards":"downwards",u=(()=>{switch(a){case Ze.HigherIsBetter:return"For this measure, higher values are better.";case Ze.LowerIsBetter:return"For this measure, lower values are better.";default:return"Direction of improvement is context dependent."}})();return[(()=>{switch(i){case pt.Improving:return`Special cause improvement: recent data show a sustained run ${s} the mean (unlikely due to random variation).`;case pt.Deteriorating:return`Special cause deterioration: recent data show a sustained run ${s} the mean (unlikely due to random variation).`;case pt.No_Judgement:return`Special cause detected (no value judgement): recent data show a change in level, trending ${l}.`;case pt.None:default:return"Common cause variation: points vary randomly around the mean; no special cause detected."}})(),u,null,null,null,null,null].filter(Boolean).join(" ")}const mo=(t,e,n,r,a,i)=>o.jsxs("defs",{children:[r&&o.jsxs("filter",{id:e,filterUnits:"objectBoundingBox",children:[o.jsx("feGaussianBlur",{stdDeviation:"3"}),o.jsx("feOffset",{dx:"0",dy:"15",result:"blur"}),o.jsx("feFlood",{floodColor:"rgb(150,150,150)",floodOpacity:"1"}),o.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),a&&o.jsx("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:i.map(s=>o.jsx("stop",{offset:s.offset,stopColor:t,stopOpacity:parseFloat(s.opacity)},s.offset))})]}),yi=({data:t,size:e=44,ariaLabel:n,showLetter:r=!0,dropShadow:a=!0,gradientWash:i=!1,variant:s="classic",runLength:l=0,letterMode:u="polarity",letterOverride:c,...d})=>{const f=B.useId(),m=B.useId(),{start:g,mid:y,end:p,triStart:h,triMid:_,triEnd:N}=Nd(),{state:j,direction:w,polarity:P}=B.useMemo(()=>Md(t),[t]),C=B.useMemo(()=>po(j),[j]),M=B.useMemo(()=>bi(j),[j]),S=M===pt.Improving||M===pt.Deteriorating;let x="";r&&S&&(u==="polarity"?P===Ze.HigherIsBetter?x="H":P===Ze.LowerIsBetter?x="L":x="":x=w===je.Higher?"H":"L"),c!==void 0&&(x=c);const $=j!==Ie.CommonCause,k=j===Ie.SpecialCauseNoJudgement,v=Mt("common-cause","#A6A6A6"),A=$?C.hex:v,D=B.useMemo(()=>Jx(j,w),[j,w]),I=n||`${C.label}${x?w===je.Higher?" â€“ Higher":" â€“ Lower":""}`,T=Qx(t);if(s==="triangleWithRun"){const U=[[150,90],[100,190],[200,190]],O=[[150,140+100/2],[150-100/2,140-100/2],[150+100/2,140-100/2]];let re=null;j===Ie.SpecialCauseImproving||j===Ie.SpecialCauseDeteriorating?re=o.jsx("polygon",{points:(w===je.Higher?U:O).map(W=>W.join(",")).join(" "),fill:C.hex,stroke:C.hex,strokeWidth:6,transform:w===je.Higher?"translate(0, -8)":"translate(0, 15)"}):j===Ie.SpecialCauseNoJudgement&&(re=o.jsx("polygon",{points:w===je.Higher?U.map(W=>W.join(",")).join(" "):O.map(W=>W.join(",")).join(" "),fill:C.hex,stroke:C.hex,strokeWidth:6,transform:w===je.Higher?"translate(0,-7)":"translate(0,14)"}));const G=Math.max(0,Math.min(5,Math.floor(l||0))),ce=j===Ie.CommonCause?160:w===je.Higher?220:70,ve=10,de=26,he=150-2*de,ee=j===Ie.SpecialCauseImproving?Mt("improvement","#00B0F0"):j===Ie.SpecialCauseDeteriorating?Mt("concern","#E46C0A"):v,ie=Array.from({length:5}).map((W,Z)=>{const X=(j===Ie.SpecialCauseImproving||j===Ie.SpecialCauseDeteriorating)&&Z>=5-G?ee:v;return o.jsx("circle",{cx:he+Z*de,cy:ce,r:ve,fill:X,stroke:X,strokeWidth:1},Z)}),L=mo(C.hex,f,m,a,i,[{offset:"0%",opacity:h},{offset:"75%",opacity:_},{offset:"100%",opacity:N}]),F=j===Ie.CommonCause||w===je.Higher?"translate(0,-10)":"translate(0,25)";return o.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":I,"aria-description":T,...d,children:[L,o.jsx("circle",{stroke:"none",fill:i?`url(#${m})`:"#ffffff",...a?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:C.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),o.jsxs("g",{transform:F,children:[re,x&&o.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:64,x:"150",y:w===je.Higher?155:145,textAnchor:"middle",dominantBaseline:"middle",children:x}),ie]})]})}if(s==="triangle"){const U=[[150,75],[75,225],[225,225]],O=[[150,150+150/2],[150-150/2,150-150/2],[150+150/2,150-150/2]],re=[[150-150/2,150+150/2],[150+150/2,150+150/2]];let G=null;j===Ie.SpecialCauseImproving||j===Ie.SpecialCauseDeteriorating?G=o.jsx("polygon",{points:(w===je.Higher?U:O).map(ve=>ve.join(",")).join(" "),fill:C.hex,stroke:C.hex,strokeWidth:8,transform:w===je.Higher?"translate(0, -10)":"translate(0, 10)"}):j===Ie.SpecialCauseNoJudgement?G=o.jsx("polygon",{points:w===je.Higher?U.map(ve=>ve.join(",")).join(" "):O.map(ve=>ve.join(",")).join(" "),fill:C.hex,stroke:C.hex,strokeWidth:8,transform:w===je.Higher?"translate(0, -15)":"translate(0, 15)"}):j===Ie.CommonCause&&(G=o.jsx("line",{x1:re[0][0],y1:re[0][1],x2:re[1][0],y2:re[1][1],stroke:C.hex,strokeWidth:32,strokeLinecap:"square",transform:"translate(0, -75)"}));const ce=mo(C.hex,f,m,a,i,[{offset:"0%",opacity:h},{offset:"65%",opacity:_},{offset:"100%",opacity:N}]);return o.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":I,"aria-description":T,...d,children:[ce,o.jsx("circle",{stroke:"none",fill:i?`url(#${m})`:"#ffffff",...a?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:C.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),G,x&&(j===Ie.SpecialCauseImproving||j===Ie.SpecialCauseDeteriorating)&&o.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:100,x:"150",y:w===je.Higher?"170":"140",textAnchor:"middle",dominantBaseline:"middle",children:x})]})}const E=mo(C.hex,f,m,a,i,[{offset:"0%",opacity:g},{offset:"65%",opacity:y},{offset:"100%",opacity:p}]);return o.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":I,"aria-description":T,...d,children:[E,o.jsx("circle",{stroke:"none",fill:i?`url(#${m})`:"#ffffff",...a?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:C.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),x&&o.jsx("text",{fill:C.hex,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,transform:"translate(86.67, 54) scale(0.5, 0.5)",textAnchor:"end",children:o.jsx("tspan",{x:"120",y:w===je.Lower?"340":"155",children:x})}),k?o.jsx("path",{"aria-hidden":"true",fillRule:"evenodd",stroke:"none",fill:C.hex,...w===je.Lower?{transform:"rotate(90 150 150)"}:{transform:"translate(-5 0) rotate(0 150 150)"},d:"M 90.26,185.42 L 149.31,126.37 127.44,104.51 209.81,90.66 195.96,173.02 174.09,151.16 115.05,210.2 90.26,185.42 Z M 90.26,185.42"}):o.jsxs(o.Fragment,{children:[D.length===5&&o.jsx("path",{"aria-hidden":"true",fill:"none",stroke:v,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9,d:`M ${D.map(ae=>`${ae.cx} ${ae.cy}`).join(" L ")}`}),D.map((ae,z)=>{const U=z>=D.length-2&&$?A:v,O=U;return o.jsx("circle",{stroke:O,strokeWidth:2,strokeMiterlimit:10,fill:U,cx:ae.cx,cy:ae.cy,r:16},z)})]})]})};yi.displayName="SPCVariationIcon";const xi=({status:t,size:e=44,ariaLabel:n,dropShadow:r=!0,colourOverride:a,gradientWash:i=!1,letterOverride:s,showTrendLines:l=!0,...u})=>{const c=B.useId(),d=B.useId(),{start:f,mid:m,end:g}=Nd(),y=a||Xx[t],p=(s||Kx[t]).slice(0,2),h=n||`Assurance ${t}`;return o.jsxs("svg",{width:e,height:e,viewBox:"0 0 300 300",role:"img","aria-label":h,...u,children:[o.jsxs("defs",{children:[r&&o.jsxs("filter",{id:c,filterUnits:"objectBoundingBox",children:[o.jsx("feGaussianBlur",{stdDeviation:"3"}),o.jsx("feOffset",{dx:"-1",dy:"15",result:"blur"}),o.jsx("feFlood",{floodColor:"rgb(166,166,166)",floodOpacity:"1"}),o.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),i&&o.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:y,stopOpacity:parseFloat(f)}),o.jsx("stop",{offset:"65%",stopColor:y,stopOpacity:parseFloat(m)}),o.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:parseFloat(g)})]})]}),o.jsx("circle",{stroke:"none",fill:i?`url(#${d})`:"#ffffff",...r?{filter:`url(#${c})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("text",{fill:y,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,x:0,y:0,transform:"translate(121.01, 32) scale(0.5, 0.5)",textAnchor:"middle",children:o.jsx("tspan",{x:60,y:184,children:p})}),l&&o.jsxs(o.Fragment,{children:[t===wn.Fail?o.jsx("path",{id:"fail-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 33,143 L 268,143"}):t===wn.Uncertain?o.jsx("path",{id:"uncertain-line",stroke:"rgb(166, 166, 166)",strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"16.5,10",strokeDashoffset:0,fill:"none",d:"M 36,174 L 266,174"}):o.jsx("path",{id:"pass-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 48,204 L 254,204"}),o.jsx("path",{id:"data-sparkline",stroke:"rgb(166, 166, 166)",strokeWidth:12,strokeMiterlimit:12,fill:"none",d:"M 59.9,187.91 C 72.79,171.72 87.33,158.06 104.4,157.83 121.91,158.58 140.94,187.85 153.4,189.91 164.1,192.12 163.78,171.38 169.17,170.53 172.87,169.55 174.88,187.45 184.94,189.24 197,191.86 230.54,184.47 239.01,185.9"}),o.jsx("circle",{stroke:y,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"})]})]})};xi.displayName="SPCAssuranceIcon";function ev(t,e){const n=Wx(t),r=n.upMax,a=n.downMax,i=n.upRules.map(p=>({id:p,rank:xd[p]})),s=n.downRules.map(p=>({id:p,rank:xd[p]}));let l;r>a?l=fr.Upwards:a>r?l=fr.Downwards:l=fr.Same;const u=r>0,c=a>0,d=e===Ee.Up&&u||e===Ee.Down&&c?t.value:null,f=e===Ee.Up&&c||e===Ee.Down&&u?t.value:null;t.sqlOriginalImprovementValue=d,t.sqlOriginalConcernValue=f,d!==null&&f!==null&&(t.sqlPruned=!0,l===fr.Upwards?e===Ee.Up||e===Ee.Down&&(t.sqlOriginalImprovementValue=null):l===fr.Downwards?e===Ee.Up?t.sqlOriginalImprovementValue=null:Ee.Down:d!==null?t.sqlOriginalConcernValue=null:f!==null&&(t.sqlOriginalImprovementValue=null)),t.sqlOriginalImprovementValue&&!t.sqlOriginalConcernValue?t.variationIcon=Be.Improvement:!t.sqlOriginalImprovementValue&&t.sqlOriginalConcernValue?t.variationIcon=Be.Concern:!t.sqlOriginalImprovementValue&&!t.sqlOriginalConcernValue?t.variationIcon=Be.Neither:t.variationIcon=Be.Improvement,t.primeDirection=l,t.primeRank=Math.max(r,a)||void 0,t.pruningMode=vd.Sql;const y=((t.variationIcon===Be.Concern?e===Ee.Up?dr.Down:dr.Up:e===Ee.Up?dr.Up:dr.Down)===dr.Up?i:s).reduce((p,h)=>!p||h.rank>p.rank?h:p,void 0);y&&(t.primeRuleId=y.id)}function tv(t){const{chartType:e,metricImprovement:n,data:r,settings:a={}}=t,i=uo({chartType:e,metricImprovement:n,data:r,settings:{...a}}),s=i.rows.map(l=>({...l}));for(const l of s)ev(l,n);return{rows:s,warnings:i.warnings}}const nv=({engineRows:t,measureName:e,measureUnit:n})=>{const r=un(),a=r?.focused??null,i=a?.index??null,s=typeof i=="number"&&t?t[i]:null,l=K.useMemo(()=>s?gi(s):[],[s]),u=K.useMemo(()=>Array.from(new Set(l.map(c=>vn[c]?.narration).filter(Boolean))),[l]);return o.jsxs("div",{className:"fdp-spc-inspector",role:"region","aria-label":"Signals inspector","data-testid":"spc-signals-inspector",children:[o.jsxs("div",{className:"fdp-spc-inspector__header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsx("strong",{children:"Signals inspector"}),o.jsx("div",{className:"fdp-spc-inspector__nav","aria-hidden":!r,children:r&&o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{r.focused?r.focusPrevPoint():r.focusFirstPoint()},"aria-label":"Previous point",children:"â—€"}),o.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{r.focused?r.focusNextPoint():r.focusFirstPoint()},"aria-label":"Next point",children:"â–¶"})]})})]}),!s||!a?o.jsx("p",{className:"fdp-spc-inspector__empty",children:"No point selected."}):o.jsxs("div",{className:"fdp-spc-inspector__body",children:[o.jsxs("div",{className:"fdp-spc-inspector__summary",style:{display:"flex",gap:16,flexWrap:"wrap"},children:[o.jsxs("span",{children:[o.jsx("strong",{children:"Point:"})," ",a.index+1]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Value:"})," ",a.y,n?` ${n}`:"",e?` ${e}`:""]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Variation:"})," ",_i(s.variationIcon)||"Unknown"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Assurance:"})," ",s.assuranceIcon===Ot.Pass?"Pass":s.assuranceIcon===Ot.Fail?"Fail":"None"]})]}),o.jsxs("div",{className:"fdp-spc-inspector__rules",style:{marginTop:8},children:[o.jsx("strong",{children:"Rules:"}),l.length===0?o.jsx("span",{children:" None"}):o.jsx("ul",{style:{margin:"4px 0 0 16px"},children:l.map(c=>o.jsxs("li",{"data-rule":c,title:vn[c]?.tooltip,children:[vn[c]?.tooltip||c,vn[c]?.narration?o.jsxs("span",{style:{color:"#555"},children:[" â€” ",vn[c].narration]}):null]},c))})]}),u.length>0&&o.jsxs("div",{className:"fdp-spc-inspector__narration",style:{marginTop:8},children:[o.jsx("strong",{children:"Summary:"})," ",u.join("; ")]})]})]})};let rv=0;const $d=({data:t,ariaLabel:e="SPC chart",height:n=260,showZones:r=!0,showPoints:a=!0,announceFocus:i=!1,className:s,unit:l,highlightOutOfControl:u=!0,chartType:c=oo.XmR,metricImprovement:d=Ee.Neither,enableRules:f=!0,showIcons:m=!1,showEmbeddedIcon:g=!0,embeddedIconVariant:y="classic",embeddedIconRunLength:p,targets:h,baselines:_,ghosts:N,settings:j,narrationContext:w,gradientSequences:P=!1,sequenceTransition:C="slope",processLineWidth:M=2,showWarningsPanel:S=!1,warningsFilter:x,enableNeutralNoJudgement:$=!0,showTrendGatingExplanation:k=!0,trendVisualMode:v="ungated",disableTrendSideGating:A,source:D,alwaysShowZeroY:I=!1,alwaysShowHundredY:T=!1,percentScale:E=!1,useSqlCompatEngine:ae=!1,showTrendStartMarkers:z=!1,showFirstFavourableCrossMarkers:H=!1,showTrendBridgeOverlay:U=!1,showSignalsInspector:O=!1})=>{const re=K.useCallback(ne=>String(ne).replace(/^spc_warning_code\.?/i,"").replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(Q=>Q.length?Q[0].toUpperCase()+Q.slice(1):Q).join(" "),[]),G=K.useCallback(ne=>String(ne).replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(J=>J.length?J[0].toUpperCase()+J.slice(1):J).join(" "),[]);process.env.NODE_ENV!=="production"&&A!==void 0&&console.warn("SPCChart: 'disableTrendSideGating' prop is deprecated and ignored (trend side gating always enabled).");const ce=K.useMemo(()=>{const ne=t.map((J,Q)=>({x:J.x,value:J.y,target:h?.[Q]??void 0,baseline:_?.[Q]??void 0,ghost:N?.[Q]??void 0}));try{const J=j?{...j}:void 0;return ae?tv({chartType:c,metricImprovement:d,data:ne,settings:J}):uo({chartType:c,metricImprovement:d,data:ne,settings:J})}catch{return null}},[t,h,_,N,c,d,j,ae]),ve=ce?.rows.slice().reverse().find(ne=>ne.mean!=null),de=ve?.mean??null,he=ce?.warnings||[],ee=K.useMemo(()=>he.length?x?he.filter(ne=>!(x.severities&&ne.severity&&!x.severities.includes(ne.severity)||x.categories&&ne.category&&!x.categories.includes(ne.category)||x.codes&&!x.codes.includes(ne.code))):he:[],[he,x]),[ie,L]=K.useState(""),F=K.useRef("");K.useEffect(()=>{if(!S){F.current!==""&&(F.current="",L(""));return}const ne=ee.length;if(!ne){const ue="Diagnostics: no warnings.";ue!==F.current&&(F.current=ue,L(ue));return}const J={error:ee.filter(ue=>ue.severity===xn.Error).length,warning:ee.filter(ue=>ue.severity===xn.Warning).length,info:ee.filter(ue=>ue.severity===xn.Info).length},Q=[];J.error&&Q.push(`${J.error} error${J.error===1?"":"s"}`),J.warning&&Q.push(`${J.warning} warning${J.warning===1?"":"s"}`),J.info&&Q.push(`${J.info} info`);const oe=`Diagnostics updated: ${ne} warning${ne===1?"":"s"} (${Q.join(", ")}).`;oe!==F.current&&(F.current=oe,L(oe))},[S,ee]);const W=ve?.upperProcessLimit??null,Z=ve?.lowerProcessLimit??null,Y=ve?.upperOneSigma??null,X=ve?.lowerOneSigma??null,fe=ve?.upperTwoSigma??null,Se=ve?.lowerTwoSigma??null,ge=de!=null&&Y!=null?Math.abs(Y-de):0,pe=K.useMemo(()=>[{id:"process",data:t,color:"#A6A6A6"}],[t]),q=K.useMemo(()=>{if(E){const ue=t.map(Ne=>Ne.y),we=Math.max(100,...ue),Te=Math.min(0,...ue);return[Te<0?Te:0,we>100?we:100]}const J=[...t.map(ue=>ue.y)];if([de,W,Z,Y,X,fe,Se].forEach(ue=>{ue!=null&&J.push(ue)}),h&&h.forEach(ue=>{typeof ue=="number"&&!isNaN(ue)&&J.push(ue)}),!J.length)return;let Q=Math.min(...J),oe=Math.max(...J);return I&&(Q=Math.min(0,Q)),T&&(oe=Math.max(100,oe)),[Q,oe]},[t,de,W,Z,Y,X,fe,Se,h,I,T,E]),V=K.useMemo(()=>{if(!(l||w?.measureUnit)&&t.length)return t.every(ne=>ne.y>=0&&ne.y<=1)?"%":void 0},[l,w?.measureUnit,t]),se=l??w?.measureUnit??V,le=K.useMemo(()=>se?{...w||{},measureUnit:se}:w,[w,se]),R=K.useMemo(()=>{if(!ce?.rows)return[];const ne=[];for(let J=1;J<ce.rows.length;J++)ce.rows[J].partitionId!==ce.rows[J-1].partitionId&&ne.push(J);return ne},[ce?.rows]),te=K.useMemo(()=>{if(!g||!ce?.rows?.length)return null;const ne=ce.rows,J=j?.minimumPoints??13;if(ne.filter(Me=>!Me.ghost&&Me.value!=null).length<J)return null;let oe=-1;for(let Me=ne.length-1;Me>=0;Me--){const ze=ne[Me];if(ze&&ze.value!=null&&!ze.ghost){oe=Me;break}}if(oe===-1)return null;const ue=ne[oe],we=ue.variationIcon,Te=ue.assuranceIcon,Ne=we===Be.Neither&&!!ue.specialCauseNeitherValue,xe=Te===Ot.Pass?wn.Pass:Te===Ot.Fail?wn.Fail:wn.Uncertain;let Ce;if(we===Be.None){const Me=ue.specialCauseSinglePointUp,ze=ue.specialCauseSinglePointDown;d===Ee.Up?Me?Ce=je.Higher:ze&&(Ce=je.Lower):d===Ee.Down?ze?Ce=je.Lower:Me&&(Ce=je.Higher):Ce=je.Higher}else if(we===Be.Neither&&Ne){const Me=ue.specialCauseSinglePointUp||ue.specialCauseTwoOfThreeUp||ue.specialCauseFourOfFiveUp||ue.specialCauseShiftUp||ue.specialCauseTrendUp,ze=ue.specialCauseSinglePointDown||ue.specialCauseTwoOfThreeDown||ue.specialCauseFourOfFiveDown||ue.specialCauseShiftDown||ue.specialCauseTrendDown;Me&&!ze?Ce=je.Higher:ze&&!Me?Ce=je.Lower:Ce=je.Higher}let Le;d===Ee.Up?Le=Ze.HigherIsBetter:d===Ee.Down?Le=Ze.LowerIsBetter:Le=Ze.ContextDependent;const He=80;return o.jsxs("div",{style:{display:"flex",gap:12,marginRight:16},children:[o.jsx("div",{className:"fdp-spc-chart__embedded-icon","data-variation":String(we),"data-trend-raw":Ce?String(Ce):"none","data-trend":Ce?String(Ce):"none","data-polarity":String(Le??"unknown"),style:{width:He,height:He},children:o.jsx(yi,{dropShadow:!1,data:{variationIcon:we,improvementDirection:d,polarity:Le,specialCauseNeutral:Ne,highSideSignal:ue.specialCauseSinglePointUp||ue.specialCauseTwoOfThreeUp||ue.specialCauseFourOfFiveUp||ue.specialCauseShiftUp||ue.specialCauseTrendUp,lowSideSignal:ue.specialCauseSinglePointDown||ue.specialCauseTwoOfThreeDown||ue.specialCauseFourOfFiveDown||ue.specialCauseShiftDown||ue.specialCauseTrendDown,...Ce?{trend:Ce}:{}},letterMode:d===Ee.Neither?"direction":"polarity",size:He,variant:y,runLength:y==="triangleWithRun"?p:void 0})}),o.jsx("div",{className:"fdp-spc-chart__embedded-assurance-icon","data-assurance":String(Te),style:{width:He,height:He},children:o.jsx(xi,{status:xe,size:He,dropShadow:!1})})]},`embedded-icon-${oe}`)},[g,ce?.rows,d,j?.minimumPoints,h,y,p]);return o.jsxs("div",{className:s?`fdp-spc-chart-wrapper ${s}`:"fdp-spc-chart-wrapper",children:[g&&o.jsx("div",{className:"fdp-spc-chart__top-row",style:{display:"flex",justifyContent:"flex-end",marginBottom:4},children:te}),o.jsx(id,{height:n,ariaLabel:e,margin:{bottom:48,left:56,right:16,top:12},className:void 0,children:o.jsx(sd,{series:pe,yDomain:q,children:o.jsx(av,{series:pe,showPoints:a,announceFocus:i,limits:{mean:de,ucl:W,lcl:Z,sigma:ge,onePos:Y,oneNeg:X,twoPos:fe,twoNeg:Se},showZones:r,highlightOutOfControl:u,engineRows:ce?.rows||null,enableRules:f,showIcons:m,narrationContext:le,gradientSequences:P,sequenceTransition:C,processLineWidth:M,effectiveUnit:se,partitionMarkers:R,ariaLabel:e,enableNeutralNoJudgement:$,showTrendGatingExplanation:k,trendVisualMode:v,metricImprovement:d,showTrendStartMarkers:z,showFirstFavourableCrossMarkers:H,showTrendBridgeOverlay:U,showSignalsInspector:O})})}),D&&o.jsx("div",{className:"fdp-spc-chart__source","aria-label":"Chart data source",children:typeof D=="string"?o.jsxs("small",{children:["Source: ",D]}):D}),S&&ie&&o.jsx("div",{"data-testid":"spc-diagnostics-live","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:0,overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",border:0},children:ie}),S&&ee.length>0&&o.jsxs("div",{className:"fdp-spc-chart__warnings",role:"region","aria-label":"SPC diagnostics",children:[o.jsx("p",{className:"fdp-spc-chart__warnings-heading",children:"Diagnostics"}),o.jsx(Dt,{firstCellIsHeader:!1,panel:!1,responsive:!1,head:[{text:"Severity"},{text:"Category"},{text:"Code"},{text:"Details"}],rows:ee.map(ne=>{let J="grey";return ne.severity===xn.Error?J="red":ne.severity===xn.Warning?J="orange":ne.severity===xn.Info&&(J="blue"),[{node:o.jsx(qe,{color:J,text:(ne.severity?String(ne.severity):"Info").replace(/^[a-z]/,Q=>Q.toUpperCase())}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--severity"},{node:ne.category?o.jsx(qe,{color:"purple",text:G(ne.category)}):o.jsx("span",{className:"fdp-spc-chart__warning-empty",children:"â€“"}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--category"},{node:o.jsx(qe,{color:"grey",text:re(ne.code)}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--code"},{node:o.jsxs("div",{className:"fdp-spc-chart__warning-message",children:[o.jsx("span",{children:ne.message}),ne.context&&Object.keys(ne.context).length>0&&o.jsxs("details",{className:"fdp-spc-chart__warning-context",style:{marginTop:4},children:[o.jsx("summary",{children:"context"}),o.jsx("pre",{children:JSON.stringify(ne.context,null,2)})]})]}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--message"}]}),classes:"fdp-spc-chart__warnings-table-wrapper",tableClasses:"fdp-spc-chart__warnings-table"})]})]})},av=({series:t,showPoints:e,announceFocus:n,limits:r,showZones:a,highlightOutOfControl:i,engineRows:s,enableRules:l,showIcons:u,narrationContext:c,gradientSequences:d,sequenceTransition:f,processLineWidth:m,effectiveUnit:g,partitionMarkers:y,ariaLabel:p,metricImprovement:h,enableNeutralNoJudgement:_=!0,showTrendGatingExplanation:N=!0,trendVisualMode:j="ungated",showTrendStartMarkers:w=!1,showFirstFavourableCrossMarkers:P=!1,showTrendBridgeOverlay:C=!1,showSignalsInspector:M=!1})=>{const S=Rn(),x=yn();if(!S)return null;const{xScale:$,yScale:k}=S,v=K.useRef("spc-seq-"+ ++rv),A=un(),D=t[0]?.data||[],I=K.useMemo(()=>{if(!r.ucl&&!r.lcl)return new Set;const L=new Set;return D.forEach((F,W)=>{(r.ucl!=null&&F.y>r.ucl||r.lcl!=null&&F.y<r.lcl)&&L.add(W)}),L},[D,r.ucl,r.lcl]),T=K.useMemo(()=>{if(!s)return null;const L={};return s.forEach((F,W)=>{if(F.value==null||F.ghost)return;const Z=F.specialCauseSinglePointUp||F.specialCauseSinglePointDown||F.specialCauseTwoOfThreeUp||F.specialCauseTwoOfThreeDown||F.specialCauseFourOfFiveUp||F.specialCauseFourOfFiveDown||F.specialCauseShiftUp||F.specialCauseShiftDown||F.specialCauseTrendUp||F.specialCauseTrendDown;L[W]={variation:F.variationIcon,assurance:F.assuranceIcon,special:Z,concern:F.variationIcon===Be.Concern,improvement:F.variationIcon===Be.Improvement,trendUp:!!F.specialCauseTrendUp,trendDown:!!F.specialCauseTrendDown}}),L},[s]),E=K.useMemo(()=>{if(!s||!s.length)return null;const L=[];for(const W of s)typeof W.target=="number"&&!isNaN(W.target)&&L.push(W.target);if(!L.length)return null;const F=L[0];return L.every(W=>W===F)?F:null},[s]),ae=K.useMemo(()=>{if(!T||!D.length)return[];const L=D.map((W,Z)=>{const Y=T?.[Z];if(Y?.concern)return"concern";if(Y?.improvement)return"improvement";if(Y?.special&&Y.variation===Be.Neither){if(j==="ungated"&&h&&h!==Ee.Neither){if(Y.trendUp)return h===Ee.Up?"improvement":"concern";if(Y.trendDown)return h===Ee.Down?"improvement":"concern"}if(_)return"noJudgement"}return"common"});return p?.includes("Rule Clash")&&console.log(`[${p}] Raw categories:`,L.map((W,Z)=>`${Z}:${W}(${D[Z].y})`).join(", ")),L},[T,D,p,_]),z=K.useMemo(()=>{if(!d||!ae.length)return[];const L=[...ae];let F=0;for(;F<L.length;){const Y=L[F];let X=F+1;for(;X<L.length&&L[X]===Y;)X++;X-F===1&&Y!=="common"&&(L[F]="common"),F=X}const W=[];if(L.length){let Y=0;for(let X=1;X<=L.length;X++)if(X===L.length||L[X]!==L[Y]){const fe=L[Y],Se=X-1,ge=Se-Y+1;(fe==="common"||ge>=2)&&W.push({start:Y,end:Se,category:fe}),Y=X}}return p?.includes("Rule Clash")&&console.log(`[${p}] Final sequences:`,W.map(Y=>`${Y.start}-${Y.end}:${Y.category}`).join(", ")),W},[d,ae,p]),H=K.useMemo(()=>D.map(L=>$(L.x instanceof Date?L.x:new Date(L.x))),[D,$]),U=$.range()[1],O=K.useMemo(()=>{if(!s||!s.length)return null;let L=Number.POSITIVE_INFINITY,F=Number.POSITIVE_INFINITY;if(s.forEach((ge,pe)=>{ge.specialCauseTrendUp&&(L=Math.min(L,pe)),ge.specialCauseTrendDown&&(F=Math.min(F,pe))}),!Number.isFinite(L)&&!Number.isFinite(F))return null;const W=L<=F,Z=W?"up":"down",Y=W?L:F,X=ge=>h==null||h===Ee.Neither||ge==null||typeof ge.value!="number"||typeof ge.mean!="number"?!1:Z==="up"?h===Ee.Up?ge.value>ge.mean:ge.value<ge.mean:h===Ee.Down?ge.value<ge.mean:ge.value>ge.mean;let fe=null;for(let ge=Y;ge<s.length;ge++){const pe=s[ge];if(!(W?!!pe.specialCauseTrendUp:!!pe.specialCauseTrendDown))break;if(X(pe)){fe=ge;break}}let Se=!1;if(fe!=null){let ge=0;for(let pe=fe;pe<s.length;pe++){const q=s[pe];if(!(W?!!q.specialCauseTrendUp:!!q.specialCauseTrendDown))break;X(q)&&ge++}Se=ge>=2}return{direction:Z,detectedAt:Y,firstFavourableCrossAt:fe,persistedAcrossMean:Se}},[s,h]),re=K.useMemo(()=>{if(!s||!s.length)return null;const L=F=>{const W=[];let Z=null,Y=null;for(let X=0;X<s.length;X++){const fe=s[X],Se=typeof fe[F]=="number"?fe[F]:null;if(Se==null||isNaN(Se)){Z!==null&&Y!=null&&(W.push({x1:H[Z],x2:H[X-1],y:k(Y)}),Z=null,Y=null);continue}if(Z===null){Z=X,Y=Se;continue}Y!=null&&Math.abs(Se-Y)<=1e-9||(Y!=null&&W.push({x1:H[Z],x2:H[X-1],y:k(Y)}),Z=X,Y=Se)}return Z!==null&&Y!=null&&W.push({x1:H[Z],x2:H[s.length-1],y:k(Y)}),W};return{mean:L("mean"),ucl:L("upperProcessLimit"),lcl:L("lowerProcessLimit"),onePos:L("upperOneSigma"),oneNeg:L("lowerOneSigma"),twoPos:L("upperTwoSigma"),twoNeg:L("lowerTwoSigma")}},[s,H,k]),G=K.useMemo(()=>z.length?o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:`${v.current}-grad-common`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.28}),o.jsx("stop",{offset:"70%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.12}),o.jsx("stop",{offset:"100%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.045})]}),z.map((L,F)=>{const W=`${v.current}-grad-${F}`;let Z,Y=.28,X=.12,fe=.045;switch(L.category){case"concern":Z="var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",Y=.28,X=.12,fe=.045;break;case"improvement":Z="var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",Y=.26,X=.11,fe=.045;break;case"noJudgement":Z="var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",Y=.26,X=.11,fe=.045;break;default:Z="var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)"}return o.jsxs("linearGradient",{id:W,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:Z,stopOpacity:Y}),o.jsx("stop",{offset:"70%",stopColor:Z,stopOpacity:X}),o.jsx("stop",{offset:"100%",stopColor:Z,stopOpacity:fe})]},W)})]}):null,[z]),ce=K.useMemo(()=>{if(!z.length)return null;const[L]=k.domain(),F=k(L),W=z.map((Z,Y)=>{const{start:X,end:fe,category:Se}=Z;if(X<0||fe>=H.length||X>fe)return null;const ge=H[X],pe=H[fe];let q="";if(Se==="common"){const V=Y>0?z[Y-1]:null,se=Y<z.length-1?z[Y+1]:null,le=V?H[V.end]:0,R=V?k(D[V.end].y):F,te=se?H[se.start]:U,ne=se?k(D[se.start].y):F;q=`M ${le} ${F}`,q+=` L ${le} ${R}`;for(let J=X;J<=fe;J++)q+=` L ${H[J]} ${k(D[J].y)}`;q+=` L ${te} ${ne}`,q+=` L ${te} ${F} Z`}else{const V=Y>0?z[Y-1]:null,se=Y<z.length-1?z[Y+1]:null,le=V&&V.category!=="common",R=se&&se.category!=="common",te=k(D[X].y),ne=k(D[fe].y);let J=ge,Q=pe;if(le){const oe=H[V.end],ue=k(D[V.end].y),we=D[X].y-D[V.end].y;f==="slope"&&we>0?(q=`M ${oe} ${ue} L ${ge} ${te}`,J=oe):(q=`M ${ge} ${F} L ${ge} ${te}`,J=ge)}else q=`M ${ge} ${F} L ${ge} ${te}`;for(let oe=X+1;oe<=fe;oe++)q+=` L ${H[oe]} ${k(D[oe].y)}`;if(q+=` L ${pe} ${ne}`,R){const oe=H[se.start],ue=k(D[se.start].y),we=D[se.start].y-D[fe].y;(f==="slope"&&we<=0||f==="extend")&&(q+=` L ${oe} ${ue}`,Q=oe)}if(q+=` L ${Q} ${F}`,q+=` L ${J} ${F} Z`,f==="neutral"&&le){const oe=H[V.end],ue=k(D[V.end].y),we=o.jsx("path",{d:`M ${oe} ${F} L ${oe} ${ue} L ${ge} ${te} L ${ge} ${F} Z`,fill:`url(#${v.current}-grad-common)`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-wedge-${Y}`);return o.jsxs("g",{children:[we,o.jsx("path",{d:q,fill:`url(#${v.current}-grad-${Y})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${Y}`)]},`seq-group-${Y}`)}}return o.jsx("path",{d:q,fill:`url(#${v.current}-grad-${Y})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${Y}`)}).filter(Boolean);return o.jsx("g",{className:"fdp-spc__sequence-bgs",children:W})},[z,H,U,k,D,f]),ve=K.useMemo(()=>{if(!c?.timeframe&&D.length>=2){const L=D.map(fe=>fe.x instanceof Date?fe.x:new Date(fe.x)),F=new Date(Math.min(...L.map(fe=>fe.getTime()))),W=new Date(Math.max(...L.map(fe=>fe.getTime()))),Z=Math.round((W.getTime()-F.getTime())/864e5)||0;if(Z<14)return`The chart shows a timeframe of ${Z+1} days`;const Y=Math.round(Z/7);return Y<20?`The chart shows a timeframe of ${Y} weeks`:`The chart shows a timeframe of ${(W.getFullYear()-F.getFullYear())*12+(W.getMonth()-F.getMonth())+1} months`}if(c?.timeframe)return`The chart shows a timeframe of ${c.timeframe}`},[c?.timeframe,D]),de=L=>{const F=L%10,W=L%100;return F===1&&W!==11?`${L}st`:F===2&&W!==12?`${L}nd`:F===3&&W!==13?`${L}rd`:`${L}th`},he=L=>`${de(L.getDate())} ${L.toLocaleString("en-GB",{month:"long"})}, ${L.getFullYear()}`,ee=K.useCallback(({index:L,x:F,y:W})=>{const Z=s?.[L],Y=F instanceof Date?F:new Date(F),X=he(Y),fe=c?.measureUnit?` ${c.measureUnit}`:"",Se=c?.measureName?` ${c.measureName}`:"";if(!Z)return`General summary is: ${ve?ve+". ":""}Point ${L+1}, ${X}, ${W}${fe}${Se}`;const ge=_i(Z.variationIcon)||"Variation",pe=gi(Z),q=pe.length?` Rules: ${[...new Set(pe.map(se=>vn[se].narration))].join("; ")}.`:" No special cause rules.",V=[];return c?.measureName&&V.push(`Measure: ${c.measureName}.`),c?.datasetContext&&V.push(`${c.datasetContext}.`),c?.organisation&&V.push(`Organisation: ${c.organisation}.`),c?.additionalNote&&V.push(c.additionalNote),["General summary is:",...V,`Point ${L+1} recorded on `,X+",",`with a value of ${W} ${fe}${Se}`,ge+".",q].join(" ").replace(/\s+/g," ").trim()},[s,c,ve]),ie=K.useCallback((L,F)=>s?.[L]?ee({index:L,seriesId:"process",x:F.x instanceof Date?F.x:new Date(F.x),y:F.y}).replace(/^General summary is:\s*/,"").replace(/^Point \d+\s*/,""):void 0,[s,ee]);return o.jsx(gd,{children:o.jsxs("div",{className:"fdp-spc-chart",role:"group","aria-label":"Statistical process control chart","aria-roledescription":"chart",children:[o.jsx("svg",{width:S.xScale.range()[1]+56+16,height:S.yScale.range()[0]+12+48,role:"img",children:o.jsxs("g",{transform:"translate(56,12)",children:[o.jsx(Zs,{type:"x"}),o.jsx(Zs,{type:"y"}),o.jsx(od,{axis:"y"}),G,ce,y.map((L,F)=>{const W=D[L];if(!W)return null;const Z=$(W.x instanceof Date?W.x:new Date(W.x));return o.jsx("line",{x1:Z,x2:Z,y1:0,y2:k.range()[0],stroke:"#555",strokeDasharray:"4 4",strokeWidth:1,"aria-hidden":"true",className:"fdp-spc__partition-marker"},`partition-marker-${F}`)}),re?.mean.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__cl-group",children:[re.mean.map((L,F)=>o.jsx("line",{className:"fdp-spc__cl",x1:L.x1,x2:L.x2,y1:L.y,y2:L.y},`mean-${F}`)),re.mean.map((L,F)=>{if(F===re.mean.length-1)return null;const W=re.mean[F+1];if(!W||L.y===W.y)return null;const Y=Math.max(4,W.x1-L.x2||0)*.5,X=`M ${L.x2},${L.y} C ${L.x2+Y},${L.y} ${W.x1-Y},${W.y} ${W.x1},${W.y}`;return o.jsx("path",{className:"fdp-spc__cl fdp-spc__cl-join",d:X,fill:"none"},`mean-join-${F}`)})]}):null,E!=null&&o.jsx(o.Fragment,{}),re?.ucl.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--ucl",children:[re.ucl.map((L,F)=>o.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--ucl",x1:L.x1,x2:L.x2,y1:L.y,y2:L.y,strokeWidth:2},`ucl-${F}`)),re.ucl.map((L,F)=>{if(F===re.ucl.length-1)return null;const W=re.ucl[F+1];if(!W||L.y===W.y)return null;const Y=Math.max(4,W.x1-L.x2||0)*.5,X=`M ${L.x2},${L.y} C ${L.x2+Y},${L.y} ${W.x1-Y},${W.y} ${W.x1},${W.y}`;return o.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--ucl fdp-spc__limit-join",d:X,fill:"none",strokeWidth:2},`ucl-join-${F}`)})]}):null,re?.lcl.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--lcl",children:[re.lcl.map((L,F)=>o.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--lcl",x1:L.x1,x2:L.x2,y1:L.y,y2:L.y,strokeWidth:2},`lcl-${F}`)),re.lcl.map((L,F)=>{if(F===re.lcl.length-1)return null;const W=re.lcl[F+1];if(!W||L.y===W.y)return null;const Y=Math.max(4,W.x1-L.x2||0)*.5,X=`M ${L.x2},${L.y} C ${L.x2+Y},${L.y} ${W.x1-Y},${W.y} ${W.x1},${W.y}`;return o.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--lcl fdp-spc__limit-join",d:X,fill:"none",strokeWidth:2},`lcl-join-${F}`)})]}):null,E!=null&&o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__target-group",children:[o.jsx("line",{className:"fdp-spc__target","data-testid":"spc-target-line",x1:0,x2:$.range()[1],y1:k(E),y2:k(E),strokeWidth:2.5}),o.jsxs("text",{"data-testid":"spc-target-label",x:$.range()[0]-7,y:k(E)-5,textAnchor:"start",className:"fdp-spc__target-label",fontSize:12,children:["Target ",E," ",g||c?.measureUnit||""]})]}),a&&re&&re.mean.length>0&&o.jsxs(o.Fragment,{children:[re.onePos.map((L,F)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos1",x1:L.x1,x2:L.x2,y1:L.y,y2:L.y,"aria-hidden":"true",strokeWidth:2},`onePos-${F}`)),re.oneNeg.map((L,F)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg1",x1:L.x1,x2:L.x2,y1:L.y,y2:L.y,"aria-hidden":"true",strokeWidth:2},`oneNeg-${F}`)),re.twoPos.map((L,F)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos2",x1:L.x1,x2:L.x2,y1:L.y,y2:L.y,"aria-hidden":"true",strokeWidth:2},`twoPos-${F}`)),re.twoNeg.map((L,F)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg2",x1:L.x1,x2:L.x2,y1:L.y,y2:L.y,"aria-hidden":"true",strokeWidth:2},`twoNeg-${F}`))]}),O&&(w||P||C)&&(()=>{const L=O.detectedAt,F=O.firstFavourableCrossAt,W=D[L]?$(D[L].x instanceof Date?D[L].x:new Date(D[L].x)):null,Z=D[L]?k(D[L].y):null,Y=F!=null&&D[F]?$(D[F].x instanceof Date?D[F].x:new Date(D[F].x)):null,X=F!=null&&D[F]?k(D[F].y):null;return o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__trend-overlays",children:[C&&W!=null&&Z!=null&&Y!=null&&X!=null&&o.jsx("line",{x1:W,y1:Z,x2:Y,y2:X,stroke:"#888",strokeDasharray:"4 4",strokeWidth:2,children:o.jsx("title",{children:"Trend bridge: start to first favourable-side point"})}),w&&W!=null&&Z!=null&&o.jsx("circle",{cx:W,cy:Z,r:6,fill:"white",stroke:"#555",strokeWidth:2,children:o.jsx("title",{children:"Trend start (run reached N)"})}),P&&Y!=null&&X!=null&&o.jsx("circle",{cx:Y,cy:X,r:5,fill:"#555",children:o.jsx("title",{children:"First favourable-side inclusion"})})]})})(),o.jsx(_d,{series:t[0],seriesIndex:0,palette:"categorical",showPoints:!1,focusablePoints:!1,focusIndex:-1,parseX:L=>L.x instanceof Date?L.x:new Date(L.x),smooth:!1,strokeWidth:m}),e&&D.map((L,F)=>{const W=$(L.x instanceof Date?L.x:new Date(L.x)),Z=k(L.y),Y=I.has(F),X=T?.[F],fe=j==="ungated"&&!!X?.special&&X?.variation===Be.Neither&&h!=null&&h!==Ee.Neither,Se=fe&&(X?.trendUp&&h===Ee.Up||X?.trendDown&&h===Ee.Down),ge=fe&&(X?.trendUp&&h===Ee.Down||X?.trendDown&&h===Ee.Up),pe=!!(X?.improvement||Se),q=!!(X?.concern||ge),V=["fdp-spc__point",Y&&i?"fdp-spc__point--ooc":null,l&&X?.special&&q?"fdp-spc__point--sc-concern":null,l&&X?.special&&pe?"fdp-spc__point--sc-improvement":null,l&&_&&X?.special&&X.variation===Be.Neither&&!pe&&!q?"fdp-spc__point--sc-no-judgement":null,X?.assurance===Ot.Pass?"fdp-spc__point--assurance-pass":null,X?.assurance===Ot.Fail?"fdp-spc__point--assurance-fail":null].filter(Boolean).join(" "),se=`Point ${F+1} value ${L.y}`+(X?.special?" special cause":"")+(X?.variation===Be.Improvement?" improving":X?.variation===Be.Concern?" concern":""),le=A?.focused?.index===F;return o.jsx("circle",{cx:W,cy:Z,r:5,className:V,"data-variation":X?.variation,"data-assurance":X?.assurance,"aria-label":se,...le?{"aria-describedby":`spc-tooltip-${F}`}:{}},F)}),u&&l&&T&&D.map((L,F)=>{const W=T[F];if(!W||!(W.concern||W.improvement))return null;const Z=$(L.x instanceof Date?L.x:new Date(L.x)),Y=k(L.y);let X=Y-10;const fe=12,Se=k.range()[0]-4;X<fe&&(X=Math.min(Y+16,Se));const ge=$.range()[1],pe=Math.min(Math.max(Z,0),ge-0);return o.jsx("text",{x:pe,y:X,textAnchor:"middle",className:`fdp-spc__icon ${W.concern?"fdp-spc__icon--concern":"fdp-spc__icon--improvement"}`,"aria-hidden":"true",children:W.concern?"!":"â˜…"},`icon-${F}`)}),x&&o.jsx(iv,{width:$.range()[1],height:k.range()[0]}),o.jsx(jd,{engineRows:s,limits:{mean:r.mean,sigma:r.sigma},pointDescriber:ie,measureName:c?.measureName,measureUnit:c?.measureUnit,dateFormatter:L=>he(L),enableNeutralNoJudgement:_,showTrendGatingExplanation:N})]})}),M&&o.jsx("div",{style:{marginTop:8},children:o.jsx(nv,{engineRows:s,measureName:c?.measureName,measureUnit:g||c?.measureUnit})}),n&&o.jsx(Sx,{format:L=>ee({...L,x:L.x instanceof Date?L.x:new Date(L.x)})})]})})},iv=({width:t,height:e})=>{const n=un();return n?o.jsx("rect",{className:"fdp-spc__interaction-layer",width:t,height:e,fill:"transparent",tabIndex:0,"aria-label":"Interactive chart area. Use arrow keys to move between points.",onMouseMove:r=>{const i=r.currentTarget.getBoundingClientRect(),s=r.clientX-i.left,l=r.clientY-i.top;n.focusNearest(s,l)},onMouseLeave:()=>n.clear(),onKeyDown:r=>{switch(r.key){case"ArrowRight":n.focusNextPoint(),r.preventDefault();break;case"ArrowLeft":n.focusPrevPoint(),r.preventDefault();break;case"ArrowDown":n.focusNextSeries(),r.preventDefault();break;case"ArrowUp":n.focusPrevSeries(),r.preventDefault();break;case"Home":n.focusFirstPoint(),r.preventDefault();break;case"End":n.focusLastPoint(),r.preventDefault();break}},style:{cursor:"crosshair"}}):null},sv=Object.freeze(Object.defineProperty({__proto__:null,AssuranceIcon:Ot,AssuranceResult:wn,BaselineSuggestionReason:kd,ChartType:oo,Direction:je,Icons:Object.freeze(Object.defineProperty({__proto__:null,AssuranceResult:wn,Direction:je,MetricPolarity:Ze,SPCAssuranceIcon:xi,SPCVariationIcon:yi,VariationJudgement:pt,VariationState:Ie,getVariationColour:po,getVariationTrend:bi},Symbol.toStringTag,{value:"Module"})),ImprovementDirection:Ee,MetricPolarity:Ze,RULE_METADATA:mi,SPCAssuranceIcon:xi,SPCChart:$d,SPCTooltipOverlay:jd,SPCVariationIcon:yi,SpcWarningCategory:wd,SpcWarningCode:Sd,SpcWarningSeverity:xn,VARIATION_COLOR_TOKENS:Et,VariationIcon:Be,VariationJudgement:pt,VariationState:Ie,buildSpc:uo,extractRuleIds:gi,getVariationColorHex:qx,getVariationColorToken:Td,getVariationColour:po,getVariationTrend:bi,normaliseSpcSettings:Cd,ruleGlossary:vn,variationLabel:_i},Symbol.toStringTag,{value:"Module"})),Id="150ms",Pd="300ms",Fd="500ms",Ld="cubic-bezier(0.4, 0, 1, 1)",Ed="cubic-bezier(0, 0, 0.2, 1)",Bd="cubic-bezier(0.4, 0, 0.2, 1)",Ad="cubic-bezier(0.68, -0.55, 0.265, 1.55)",Rd="background-color 300ms cubic-bezier(0, 0, 0.2, 1)",Hd="box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",Od="border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",zd="border-color 300ms cubic-bezier(0, 0, 0.2, 1)",Wd="1px",Ud="2px",Gd="4px",Vd="4px",Yd="4px",qd="2px",Xd="1px",Kd="0px",Zd="4px",Jd="8px",Qd="12px",go="#d8dde0",_o="#4c6272",bo="#d8dde0",yo="#aeb7bd",xo="#d5281b",vo="#005eb8",wo="#ffffff",So="#212b32",ko="#007f3b",Co="#330072",To="#7c2855",jo="#d5281b",No="#ffeb3b",Do="#fff9c4",Mo="#ffb81c",$o="#ed8b00",Io="#00a499",Po="#ae2573",Fo="#4c6272",Lo="#768692",Eo="#aeb7bd",Bo="#d8dde0",Ao="#f0f4f5",ef="#212b32",tf="#4c6272",nf="#ffffff",rf="#212b32",af="#005eb8",sf="#7c2855",of="#003087",lf="#330072",cf="#ffeb3b",uf="#212b32",df="#d8dde0",ff="#ffffff33",hf="#d5281b",pf="#4c6272",mf="#ffffff",gf="#007f3b",_f="#ffffff",bf="#006530",yf="#004021",xf="#004021",vf="#00000000",wf="#ffffff",Sf="#005eb8",kf="#005eb8",Cf="#d9e5f2",Tf="#c7daf0",jf="#005eb8",Nf="#ffffff",Df="#212b32",Mf="#d9dde0",$f="#b3bcc2",If="#b3bcc2",Pf="#d5281b",Ff="#aa2016",Lf="#6a140e",Ef="#6a140e",Bf="#005eb8",Af="#004b93",Rf="#002f5c",Hf="#002f5c",Of="8px",zf="16px",Wf="12px",Uf="16px",Gf="4px",Vf="40px",Yf="4px",qf="40px",Xf="12px",Kf="16px",Zf="32px",Jf="16px",Qf="20px",eh="28px",th="9px",nh="2px",rh="16px",ah="24px",ih="8px",sh="24px",oh="16px",lh="4px",ch="4px",uh="4px",dh="8px",fh="4px",hh="16px",ph="#007f3b",mh="#006530",gh="#004021",_h="#d8dde0",bh="#ffffff",yh="#768692",xh="#00000000",vh="#ffeb3b",wh="#00000000",Sh="#ffffff",kh="#d9e5f2",Ch="#c7daf0",Th="#005eb8",jh="#005eb8",Ro="8px",Ho="16px",Oo="12px",zo="16px",Nh="2px",Dh="4px",Mh="4px",$h="600",Ih="#ffffff",Ph="#d8dde0",Fh="#aeb7bd",Lh="#f0f4f5",Eh="#212b32",Bh="#212b32",Ah="#005eb8",Wo="16px",Uo="32px",Go="16px",Rh="1px",Hh="4px",Oh="none",zh="0 2px 4px rgba(0, 0, 0, 0.1)",Wh="#ffffff",Uh="#ffffff",Gh="#d8dde0",Vh="#ffffff",Yh="#4c6272",qh="#ffeb3b",Xh="#d5281b",Kh="#aeb7bd",Zh="#212b32",Jh="#4c6272",Qh="#768692",ep="#212b32",tp="#ffffff",np="600",rp="#d5281b",ap="600",ip="#4c6272",Vo="4px",Yo="40px",qo="40px",Xo="12px",sp="2px",op="4px",lp="0px",cp="16px",up="18px",dp="24px",fp="32px",hp="34px",pp="32px",mp="40px",gp="48px",_p="5.4ex",bp="7.2ex",yp="9ex",xp="10.8ex",vp="20ex",wp="38ex",Sp="56ex",kp="44px",Cp="40px",Tp="1020px",jp="100%",Np="50%",Dp="33.333%",Mp="25%",$p="20%",Ip="320px",Pp="641px",Fp="1025px",Lp="1280px",Ep="960px",Bp="32px",Ap="16px",Rp="#d5281b",Hp="#d5281b",Op="#ffffff",zp="#007f3b",Wp="#007f3b",Up="#ffffff",Gp="#ffeb3b",Vp="#ffeb3b",Yp="#212b32",qp="#005eb8",Xp="#005eb8",Kp="#ffffff",Zp="#d8dde0",Jp="#aeb7bd",Qp="#768692",em="0 4px 0 #004021",tm="0 4px 0 #005eb8",nm="0 4px 0 #6a140e",rm="0 4px 0 #ffeb3b",am="none",im="0 2px 4px rgba(0, 0, 0, 0.1)",sm="4px",om="0px",lm="solid",cm="0 0 0 3px #ffeb3b",um="0 0 0 3px #ffeb3b",dm="none",fm="0 1px 3px rgba(0, 0, 0, 0.12)",hm="0 2px 6px rgba(0, 0, 0, 0.16)",pm="0 4px 12px rgba(0, 0, 0, 0.20)",Ko="0",Zo="4px",Jo="8px",Qo="16px",el="24px",tl="32px",nl="40px",rl="48px",al="56px",il="64px",vi="0",wi="0",Si="4px",ki="4px",Ci="8px",Ti="8px",ji="8px",Ni="16px",Di="16px",Mi="24px",$i="24px",Ii="32px",Pi="32px",Fi="40px",Li="40px",Ei="48px",Bi="48px",Ai="56px",Ri="56px",Hi="64px",Vr="Frutiger W01",Yr="Arial, Helvetica, sans-serif",qr="sans-serif",Xr="400",Kr="600",Zr="400",Jr="12px",Qr="14px",ea="12pt",ta="14px",na="16px",ra="12pt",aa="16px",ia="19px",sa="13pt",oa="19px",la="22px",ca="15pt",ua="22px",da="26px",fa="17pt",ha="27px",pa="36px",ma="20pt",ga="33px",_a="48px",ba="24pt",Oi="16px",zi="24px",zt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},Wt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Ut={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Gt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Vt={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Yt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},qt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},Xt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Kt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},Zt={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},ov=Object.freeze(Object.defineProperty({__proto__:null,AnimationDurationFast:Id,AnimationDurationNormal:Pd,AnimationDurationSlow:Fd,AnimationEasingBounce:Ad,AnimationEasingEaseIn:Ld,AnimationEasingEaseInOut:Bd,AnimationEasingEaseOut:Ed,BorderColorCard:bo,BorderColorCardHover:yo,BorderColorDefault:go,BorderColorError:xo,BorderColorForm:_o,BorderRadiusLarge:Qd,BorderRadiusMedium:Jd,BorderRadiusNone:Kd,BorderRadiusSmall:Zd,BorderWidthCardBottom:Vd,BorderWidthDefault:Wd,BorderWidthFormElement:Ud,BorderWidthFormElementError:Gd,BorderWidthPanel:Yd,BorderWidthTableCell:Xd,BorderWidthTableHeader:qd,BreakpointDesktop:Fp,BreakpointLargeDesktop:Lp,BreakpointMobile:Ip,BreakpointTablet:Pp,ButtonBorderRadius:Dh,ButtonBorderWidth:Nh,ButtonPrimaryBackgroundActive:gh,ButtonPrimaryBackgroundDefault:ph,ButtonPrimaryBackgroundDisabled:_h,ButtonPrimaryBackgroundHover:mh,ButtonPrimaryBorderDefault:xh,ButtonPrimaryBorderFocus:vh,ButtonPrimaryTextDefault:bh,ButtonPrimaryTextDisabled:yh,ButtonSecondaryBackgroundActive:Ch,ButtonSecondaryBackgroundDefault:wh,ButtonSecondaryBackgroundHover:kh,ButtonSecondaryBackgroundSolid:Sh,ButtonSecondaryBorderDefault:jh,ButtonSecondaryTextDefault:Th,ButtonShadowSize:Mh,ButtonSpacingPaddingHorizontalDesktop:zo,ButtonSpacingPaddingHorizontalMobile:Ho,ButtonSpacingPaddingVerticalDesktop:Oo,ButtonSpacingPaddingVerticalMobile:Ro,ButtonTypographyWeight:$h,CardBackgroundDefault:Ih,CardBorderBottom:Lh,CardBorderDefault:Ph,CardBorderHover:Fh,CardBorderWidthBottom:Hh,CardBorderWidthDefault:Rh,CardShadowDefault:Oh,CardShadowHover:zh,CardSpacingHeadingMargin:Go,CardSpacingPaddingDesktop:Uo,CardSpacingPaddingMobile:Wo,CardTextDescription:Bh,CardTextHeading:Eh,CardTextLink:Ah,ColorBorderDefault:df,ColorBorderSecondary:ff,ColorButtonLoginActive:Rf,ColorButtonLoginBackground:Bf,ColorButtonLoginHover:Af,ColorButtonLoginShadow:Hf,ColorButtonPrimaryActive:yf,ColorButtonPrimaryBackground:gf,ColorButtonPrimaryHover:bf,ColorButtonPrimaryShadow:xf,ColorButtonPrimaryText:_f,ColorButtonReverseActive:$f,ColorButtonReverseBackground:Nf,ColorButtonReverseHover:Mf,ColorButtonReverseShadow:If,ColorButtonReverseText:Df,ColorButtonSecondaryActive:Tf,ColorButtonSecondaryBackground:vf,ColorButtonSecondaryBackgroundSolid:wf,ColorButtonSecondaryBorder:Sf,ColorButtonSecondaryHover:Cf,ColorButtonSecondaryShadow:jf,ColorButtonSecondaryText:kf,ColorButtonWarningActive:Lf,ColorButtonWarningBackground:Pf,ColorButtonWarningHover:Ff,ColorButtonWarningShadow:Ef,ColorError:hf,ColorFocusBackground:cf,ColorFocusText:uf,ColorFormBackground:mf,ColorFormBorder:pf,ColorGrey1:Fo,ColorGrey2:Lo,ColorGrey3:Eo,ColorGrey4:Bo,ColorGrey5:Ao,ColorLinkActive:of,ColorLinkDefault:af,ColorLinkHover:sf,ColorLinkVisited:lf,ColorPrimaryBlack:So,ColorPrimaryBlue:vo,ColorPrimaryDarkPink:To,ColorPrimaryGreen:ko,ColorPrimaryPurple:Co,ColorPrimaryRed:jo,ColorPrimaryWhite:wo,ColorPrimaryYellow:No,ColorSecondaryAquaGreen:Io,ColorSecondaryOrange:$o,ColorSecondaryPaleYellow:Do,ColorSecondaryPink:Po,ColorSecondaryWarmYellow:Mo,ColorTextPrimary:ef,ColorTextPrint:rf,ColorTextReverse:nf,ColorTextSecondary:tf,ComponentBlur:ch,ComponentBreadcrumbChevronMarginLeft:th,ComponentBreadcrumbChevronMarginRight:nh,ComponentBreadcrumbPaddingTopDesktop:ah,ComponentBreadcrumbPaddingTopMobile:rh,ComponentButtonPaddingDesktopHorizontal:Uf,ComponentButtonPaddingDesktopVertical:Wf,ComponentButtonPaddingMobileHorizontal:zf,ComponentButtonPaddingMobileVertical:Of,ComponentButtonShadowSize:Gf,ComponentCardHeadingMargin:Jf,ComponentCardPaddingDesktop:Zf,ComponentCardPaddingMobile:Kf,ComponentDetails:dh,ComponentExpander:fh,ComponentFormCheckboxLabelPadding:Xf,ComponentFormCheckboxSize:qf,ComponentFormInputMinHeight:Vf,ComponentFormInputPadding:Yf,ComponentLink:uh,ComponentPagination:hh,ComponentPanelPaddingDesktop:eh,ComponentPanelPaddingMobile:Qf,ComponentSpread:lh,ComponentSummaryListCellPaddingHorizontal:sh,ComponentSummaryListCellPaddingVertical:ih,ComponentSummaryListRowMargin:oh,ElevationHigh:pm,ElevationLow:fm,ElevationMedium:hm,ElevationNone:dm,FocusOutlineOffset:om,FocusOutlineStyle:lm,FocusOutlineWidth:sm,FocusShadowButton:um,FocusShadowInput:cm,FontFamilyBase:Vr,FontFamilyFallback:Yr,FontFamilyPrint:qr,FontLineHeightBase:zi,FontSize14Mobile:Jr,FontSize14Print:ea,FontSize14Tablet:Qr,FontSize16Mobile:ta,FontSize16Print:ra,FontSize16Tablet:na,FontSize19Mobile:aa,FontSize19Print:sa,FontSize19Tablet:ia,FontSize22Mobile:oa,FontSize22Print:ca,FontSize22Tablet:la,FontSize26Mobile:ua,FontSize26Print:fa,FontSize26Tablet:da,FontSize36Mobile:ha,FontSize36Print:ma,FontSize36Tablet:pa,FontSize48Mobile:ga,FontSize48Print:ba,FontSize48Tablet:_a,FontSizeBase:Oi,FontWeightBold:Kr,FontWeightLight:Zr,FontWeightNormal:Xr,FormBorderRadius:lp,FormBorderWidthDefault:sp,FormBorderWidthError:op,FormErrorTextDefault:rp,FormErrorTypographyWeight:ap,FormHintTextDefault:ip,FormInputBackgroundDefault:Wh,FormInputBackgroundDisabled:Gh,FormInputBackgroundError:Vh,FormInputBackgroundFocus:Uh,FormInputBorderDefault:Yh,FormInputBorderDisabled:Kh,FormInputBorderError:Xh,FormInputBorderFocus:qh,FormInputTextDefault:Zh,FormInputTextDisabled:Qh,FormInputTextPlaceholder:Jh,FormLabelTextDefault:ep,FormLabelTextRequired:tp,FormLabelTypographyWeight:np,FormSpacingCheckboxLabelPadding:Xo,FormSpacingCheckboxSize:qo,FormSpacingInputMinHeight:Yo,FormSpacingInputPadding:Vo,GridGutter:Bp,GridGutterHalf:Ap,GridPageWidth:Ep,HeadingsNhsukHeadingL:Wt,HeadingsNhsukHeadingM:Ut,HeadingsNhsukHeadingS:Gt,HeadingsNhsukHeadingXl:zt,HeadingsNhsukHeadingXs:Vt,LayoutColumnActions:$p,LayoutColumnFull:jp,LayoutColumnHalf:Np,LayoutColumnQuarter:Mp,LayoutColumnThird:Dp,LayoutContainerMaxWidth:Tp,ParagraphsBody:Yt,ParagraphsBodyLarge:qt,ParagraphsBodySmall:Xt,ParagraphsLedeText:Kt,ParagraphsLedeTextSmall:Zt,ShadowButtonDefault:em,ShadowButtonFocus:rm,ShadowButtonSecondary:tm,ShadowButtonWarning:nm,ShadowCardDefault:am,ShadowCardHover:im,SizeButtonMinHeightDesktop:Cp,SizeButtonMinHeightMobile:kp,SizeFormControlLarge:gp,SizeFormControlMedium:mp,SizeFormControlSmall:pp,SizeFormInputWidth2xl:wp,SizeFormInputWidth3xl:Sp,SizeFormInputWidthLg:xp,SizeFormInputWidthMd:yp,SizeFormInputWidthSm:bp,SizeFormInputWidthXl:vp,SizeFormInputWidthXs:_p,SizeIconExtraLarge:fp,SizeIconLarge:dp,SizeIconMedium:up,SizeIconNhsDefault:hp,SizeIconSmall:cp,Spacing0:Ko,Spacing1:Zo,Spacing2:Jo,Spacing3:Qo,Spacing4:el,Spacing5:tl,Spacing6:nl,Spacing7:rl,Spacing8:al,Spacing9:il,SpacingResponsive0Mobile:vi,SpacingResponsive0Tablet:wi,SpacingResponsive1Mobile:Si,SpacingResponsive1Tablet:ki,SpacingResponsive2Mobile:Ci,SpacingResponsive2Tablet:Ti,SpacingResponsive3Mobile:ji,SpacingResponsive3Tablet:Ni,SpacingResponsive4Mobile:Di,SpacingResponsive4Tablet:Mi,SpacingResponsive5Mobile:$i,SpacingResponsive5Tablet:Ii,SpacingResponsive6Mobile:Pi,SpacingResponsive6Tablet:Fi,SpacingResponsive7Mobile:Li,SpacingResponsive7Tablet:Ei,SpacingResponsive8Mobile:Bi,SpacingResponsive8Tablet:Ai,SpacingResponsive9Mobile:Ri,SpacingResponsive9Tablet:Hi,StateDisabledBackground:Zp,StateDisabledBorder:Jp,StateDisabledText:Qp,StateErrorBackground:Rp,StateErrorBorder:Hp,StateErrorText:Op,StateInfoBackground:qp,StateInfoBorder:Xp,StateInfoText:Kp,StateSuccessBackground:zp,StateSuccessBorder:Wp,StateSuccessText:Up,StateWarningBackground:Gp,StateWarningBorder:Vp,StateWarningText:Yp,TransitionButtonDefault:Rd,TransitionButtonShadow:Hd,TransitionCardHover:zd,TransitionInputFocus:Od},Symbol.toStringTag,{value:"Module"})),lv=(t,e)=>({fontSize:t.mobile,marginBottom:e.mobile,"@media (min-width: 768px)":{fontSize:t.tablet,marginBottom:e.tablet},"@media print":{fontSize:t.print||t.tablet}}),cv=({children:t,className:e="",style:n={}})=>o.jsx("h1",{className:e,style:{fontFamily:zt.fontFamily,fontWeight:zt.fontWeight,fontSize:zt.fontSize.mobile,lineHeight:zt.lineHeight,marginTop:zt.marginTop,marginBottom:zt.marginBottom.mobile,...n},children:t}),uv=({children:t,className:e="",style:n={}})=>o.jsx("h2",{className:e,style:{fontFamily:Wt.fontFamily,fontWeight:Wt.fontWeight,fontSize:Wt.fontSize.mobile,lineHeight:Wt.lineHeight,marginTop:Wt.marginTop,marginBottom:Wt.marginBottom.mobile,...n},children:t}),dv=({children:t,className:e="",style:n={}})=>o.jsx("h3",{className:e,style:{fontFamily:Ut.fontFamily,fontWeight:Ut.fontWeight,fontSize:Ut.fontSize.mobile,lineHeight:Ut.lineHeight,marginTop:Ut.marginTop,marginBottom:Ut.marginBottom.mobile,...n},children:t}),fv=({children:t,className:e="",style:n={}})=>o.jsx("h4",{className:e,style:{fontFamily:Gt.fontFamily,fontWeight:Gt.fontWeight,fontSize:Gt.fontSize.mobile,lineHeight:Gt.lineHeight,marginTop:Gt.marginTop,marginBottom:Gt.marginBottom.mobile,...n},children:t}),hv=({children:t,className:e="",style:n={}})=>o.jsx("h5",{className:e,style:{fontFamily:Vt.fontFamily,fontWeight:Vt.fontWeight,fontSize:Vt.fontSize.mobile,lineHeight:Vt.lineHeight,marginTop:Vt.marginTop,marginBottom:Vt.marginBottom.mobile,...n},children:t}),pv=({children:t,className:e="",style:n={}})=>o.jsx("p",{className:e,style:{fontFamily:Yt.fontFamily,fontWeight:Yt.fontWeight,fontSize:Yt.fontSize.mobile,lineHeight:Yt.lineHeight,marginTop:Yt.marginTop,marginBottom:Yt.marginBottom.mobile,...n},children:t}),mv=({children:t,className:e="",style:n={}})=>o.jsx("p",{className:e,style:{fontFamily:qt.fontFamily,fontWeight:qt.fontWeight,fontSize:qt.fontSize.mobile,lineHeight:qt.lineHeight,marginTop:qt.marginTop,marginBottom:qt.marginBottom.mobile,...n},children:t}),gv=({children:t,className:e="",style:n={}})=>o.jsx("p",{className:e,style:{fontFamily:Xt.fontFamily,fontWeight:Xt.fontWeight,fontSize:Xt.fontSize.mobile,lineHeight:Xt.lineHeight,marginTop:Xt.marginTop,marginBottom:Xt.marginBottom.mobile,...n},children:t}),_v=({children:t,className:e="",style:n={}})=>o.jsx("p",{className:e,style:{fontFamily:Kt.fontFamily,fontWeight:Kt.fontWeight,fontSize:Kt.fontSize.mobile,lineHeight:Kt.lineHeight,marginTop:Kt.marginTop,marginBottom:Kt.marginBottom.mobile,...n},children:t}),bv=({children:t,className:e="",style:n={}})=>o.jsx("p",{className:e,style:{fontFamily:Zt.fontFamily,fontWeight:Zt.fontWeight,fontSize:Zt.fontSize.mobile,lineHeight:Zt.lineHeight,marginTop:Zt.marginTop,marginBottom:Zt.marginBottom.mobile,...n},children:t}),yv=()=>B.useMemo(()=>ov,[]),xv=()=>B.useMemo(()=>({BorderColorDefault:go,BorderColorForm:_o,BorderColorCard:bo,BorderColorCardHover:yo,BorderColorError:xo,ColorPrimaryBlue:vo,ColorPrimaryWhite:wo,ColorPrimaryBlack:So,ColorPrimaryGreen:ko,ColorPrimaryPurple:Co,ColorPrimaryDarkPink:To,ColorPrimaryRed:jo,ColorPrimaryYellow:No,ColorSecondaryPaleYellow:Do,ColorSecondaryWarmYellow:Mo,ColorSecondaryOrange:$o,ColorSecondaryAquaGreen:Io,ColorSecondaryPink:Po,ColorGrey1:Fo,ColorGrey2:Lo,ColorGrey3:Eo,ColorGrey4:Bo,ColorGrey5:Ao}),[]),vv=()=>B.useMemo(()=>({Spacing0:Ko,Spacing1:Zo,Spacing2:Jo,Spacing3:Qo,Spacing4:el,Spacing5:tl,Spacing6:nl,Spacing7:rl,Spacing8:al,Spacing9:il}),[]),wv=()=>B.useMemo(()=>({Mobile:{Size14:Jr,Size16:ta,Size19:aa,Size22:oa,Size26:ua,Size36:ha,Size48:ga},Tablet:{Size14:Qr,Size16:na,Size19:ia,Size22:la,Size26:da,Size36:pa,Size48:_a},Print:{Size14:ea,Size16:ra,Size19:sa,Size22:ca,Size26:fa,Size36:ma,Size48:ba},Family:{Base:Vr,Fallback:Yr,Print:qr},Weight:{Normal:Xr,Bold:Kr,Light:Zr},Base:{Size:Oi,LineHeight:zi},FontFamilyBase:Vr,FontFamilyFallback:Yr,FontFamilyPrint:qr,FontWeightNormal:Xr,FontWeightBold:Kr,FontWeightLight:Zr,FontSize14Mobile:Jr,FontSize14Tablet:Qr,FontSize14Print:ea,FontSize16Mobile:ta,FontSize16Tablet:na,FontSize16Print:ra,FontSize19Mobile:aa,FontSize19Tablet:ia,FontSize19Print:sa,FontSize22Mobile:oa,FontSize22Tablet:la,FontSize22Print:ca,FontSize26Mobile:ua,FontSize26Tablet:da,FontSize26Print:fa,FontSize36Mobile:ha,FontSize36Tablet:pa,FontSize36Print:ma,FontSize48Mobile:ga,FontSize48Tablet:_a,FontSize48Print:ba,FontSizeBase:Oi,FontLineHeightBase:zi}),[]),Sv=()=>B.useMemo(()=>({Mobile:{Size0:vi,Size1:Si,Size2:Ci,Size3:ji,Size4:Di,Size5:$i,Size6:Pi,Size7:Li,Size8:Bi,Size9:Ri},Tablet:{Size0:wi,Size1:ki,Size2:Ti,Size3:Ni,Size4:Mi,Size5:Ii,Size6:Fi,Size7:Ei,Size8:Ai,Size9:Hi},SpacingResponsive0Mobile:vi,SpacingResponsive0Tablet:wi,SpacingResponsive1Mobile:Si,SpacingResponsive1Tablet:ki,SpacingResponsive2Mobile:Ci,SpacingResponsive2Tablet:Ti,SpacingResponsive3Mobile:ji,SpacingResponsive3Tablet:Ni,SpacingResponsive4Mobile:Di,SpacingResponsive4Tablet:Mi,SpacingResponsive5Mobile:$i,SpacingResponsive5Tablet:Ii,SpacingResponsive6Mobile:Pi,SpacingResponsive6Tablet:Fi,SpacingResponsive7Mobile:Li,SpacingResponsive7Tablet:Ei,SpacingResponsive8Mobile:Bi,SpacingResponsive8Tablet:Ai,SpacingResponsive9Mobile:Ri,SpacingResponsive9Tablet:Hi}),[]),kv=()=>B.useMemo(()=>({ButtonSpacingPaddingVerticalMobile:Ro,ButtonSpacingPaddingHorizontalMobile:Ho,ButtonSpacingPaddingVerticalDesktop:Oo,ButtonSpacingPaddingHorizontalDesktop:zo,CardSpacingPaddingMobile:Wo,CardSpacingPaddingDesktop:Uo,CardSpacingHeadingMargin:Go,FormSpacingInputPadding:Vo,FormSpacingInputMinHeight:Yo,FormSpacingCheckboxSize:qo,FormSpacingCheckboxLabelPadding:Xo}),[]),Cv=()=>B.useMemo(()=>({xl:zt,l:Wt,m:Ut,s:Gt,xs:Vt}),[]),Tv=()=>B.useMemo(()=>({body:Yt,bodyLarge:qt,bodySmall:Xt,ledeText:Kt,ledeTextSmall:Zt}),[]),jv=()=>B.useMemo(()=>({headings:{xl:zt,l:Wt,m:Ut,s:Gt,xs:Vt},paragraphs:{body:Yt,bodyLarge:qt,bodySmall:Xt,ledeText:Kt,ledeTextSmall:Zt},fonts:{family:{base:Vr,fallback:Yr,print:qr},weight:{normal:Xr,bold:Kr,light:Zr},sizes:{mobile:{size14:Jr,size16:ta,size19:aa,size22:oa,size26:ua,size36:ha,size48:ga},tablet:{size14:Qr,size16:na,size19:ia,size22:la,size26:da,size36:pa,size48:_a},print:{size14:ea,size16:ra,size19:sa,size22:ca,size26:fa,size36:ma,size48:ba}}}}),[]);function Nv(t={}){const{initialLayout:e=void 0,fallbackLayout:n="two-column"}=t,[r,a]=K.useState(e),i=K.useCallback(()=>a("three-column"),[]),s=K.useCallback(()=>a(u=>u==="three-column"?n:u),[n]),l=K.useCallback(()=>a(u=>u==="three-column"?n:"three-column"),[n]);return{forceLayout:r,setLayout:a,drillIn:i,drillOut:s,toggle:l,isDrilledIn:r==="three-column"}}const sl={fontPath:"https://assets.nhs.uk/fonts/",includeFontFace:!0,useFallbacks:!0,fontWeights:[400,600]},mt={normal:{woff2:"FrutigerLTW01-55Roman.woff2",woff:"FrutigerLTW01-55Roman.woff",ttf:"FrutigerLTW01-55Roman.ttf",eot:"FrutigerLTW01-55Roman.eot"},bold:{woff2:"FrutigerLTW01-65Bold.woff2",woff:"FrutigerLTW01-65Bold.woff",ttf:"FrutigerLTW01-65Bold.ttf",eot:"FrutigerLTW01-65Bold.eot"}};function Dv(t={}){const{fontPath:e,fontWeights:n}={...sl,...t},r=[];return n?.includes(400)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 400;
  src: url("${e}${mt.normal.eot}?#iefix") format("eot"),
       url("${e}${mt.normal.woff2}") format("woff2"),
       url("${e}${mt.normal.woff}") format("woff"),
       url("${e}${mt.normal.ttf}") format("truetype");
  src: url("${e}${mt.normal.eot}");
}`),n?.includes(600)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 600;
  src: url("${e}${mt.bold.eot}?#iefix") format("eot"),
       url("${e}${mt.bold.woff2}") format("woff2"),
       url("${e}${mt.bold.woff}") format("woff"),
       url("${e}${mt.bold.ttf}") format("truetype");
  src: url("${e}${mt.bold.eot}");
}`),r.join(`
`)}function Mv(t={}){if(typeof document>"u")return;const{fontPath:e,fontWeights:n}={...sl,...t};[...n?.includes(400)?[{href:`${e}${mt.normal.woff2}`,as:"font",type:"font/woff2"},{href:`${e}${mt.normal.woff}`,as:"font",type:"font/woff"}]:[],...n?.includes(600)?[{href:`${e}${mt.bold.woff2}`,as:"font",type:"font/woff2"},{href:`${e}${mt.bold.woff}`,as:"font",type:"font/woff"}]:[]].forEach(a=>{const i=document.createElement("link");i.rel="preload",i.href=a.href,i.as=a.as,i.type=a.type,i.crossOrigin="anonymous",document.head.appendChild(i)})}const $v='"Frutiger W01", Arial, Helvetica, sans-serif',Iv="Arial, Helvetica, sans-serif";async function Pv(){if(typeof document>"u"||!document.fonts)return!1;try{return await document.fonts.load('1em "Frutiger W01"'),document.fonts.check('1em "Frutiger W01"')}catch{return!1}}function dn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mm(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var wt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},hr={duration:.5,overwrite:!1,delay:0},ol,ct,We,$t=1e8,Ae=1/$t,ll=Math.PI*2,Fv=ll/4,Lv=0,gm=Math.sqrt,Ev=Math.cos,Bv=Math.sin,ot=function(e){return typeof e=="string"},Xe=function(e){return typeof e=="function"},fn=function(e){return typeof e=="number"},cl=function(e){return typeof e>"u"},Jt=function(e){return typeof e=="object"},_t=function(e){return e!==!1},ul=function(){return typeof window<"u"},Wi=function(e){return Xe(e)||ot(e)},_m=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ft=Array.isArray,dl=/(?:-?\.?\d|\.)+/gi,bm=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,pr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,fl=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ym=/[+-]=-?[.\d]+/,xm=/[^,'"\[\]\s]+/gi,Av=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ve,Qt,hl,pl,St={},Ui={},vm,wm=function(e){return(Ui=gr(e,St))&&xt},ml=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},ya=function(e,n){return!n&&console.warn(e)},Sm=function(e,n){return e&&(St[e]=n)&&Ui&&(Ui[e]=n)||St},xa=function(){return 0},Rv={suppressEvents:!0,isStart:!0,kill:!1},Gi={suppressEvents:!0,kill:!1},Hv={suppressEvents:!0},gl={},Sn=[],_l={},km,kt={},bl={},Cm=30,Vi=[],yl="",xl=function(e){var n=e[0],r,a;if(Jt(n)||Xe(n)||(e=[e]),!(r=(n._gsap||{}).harness)){for(a=Vi.length;a--&&!Vi[a].targetTest(n););r=Vi[a]}for(a=e.length;a--;)e[a]&&(e[a]._gsap||(e[a]._gsap=new eg(e[a],r)))||e.splice(a,1);return e},zn=function(e){return e._gsap||xl(Pt(e))[0]._gsap},Tm=function(e,n,r){return(r=e[n])&&Xe(r)?e[n]():cl(r)&&e.getAttribute&&e.getAttribute(n)||r},bt=function(e,n){return(e=e.split(",")).forEach(n)||e},Je=function(e){return Math.round(e*1e5)/1e5||0},tt=function(e){return Math.round(e*1e7)/1e7||0},mr=function(e,n){var r=n.charAt(0),a=parseFloat(n.substr(2));return e=parseFloat(e),r==="+"?e+a:r==="-"?e-a:r==="*"?e*a:e/a},Ov=function(e,n){for(var r=n.length,a=0;e.indexOf(n[a])<0&&++a<r;);return a<r},Yi=function(){var e=Sn.length,n=Sn.slice(0),r,a;for(_l={},Sn.length=0,r=0;r<e;r++)a=n[r],a&&a._lazy&&(a.render(a._lazy[0],a._lazy[1],!0)._lazy=0)},vl=function(e){return!!(e._initted||e._startAt||e.add)},jm=function(e,n,r,a){Sn.length&&!ct&&Yi(),e.render(n,r,!!(ct&&n<0&&vl(e))),Sn.length&&!ct&&Yi()},Nm=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(xm).length<2?n:ot(e)?e.trim():e},Dm=function(e){return e},Ct=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},zv=function(e){return function(n,r){for(var a in r)a in n||a==="duration"&&e||a==="ease"||(n[a]=r[a])}},gr=function(e,n){for(var r in n)e[r]=n[r];return e},Mm=function t(e,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Jt(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},qi=function(e,n){var r={},a;for(a in e)a in n||(r[a]=e[a]);return r},va=function(e){var n=e.parent||Ve,r=e.keyframes?zv(ft(e.keyframes)):Ct;if(_t(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},Wv=function(e,n){for(var r=e.length,a=r===n.length;a&&r--&&e[r]===n[r];);return r<0},$m=function(e,n,r,a,i){var s=e[a],l;if(i)for(l=n[i];s&&s[i]>l;)s=s._prev;return s?(n._next=s._next,s._next=n):(n._next=e[r],e[r]=n),n._next?n._next._prev=n:e[a]=n,n._prev=s,n.parent=n._dp=e,n},Xi=function(e,n,r,a){r===void 0&&(r="_first"),a===void 0&&(a="_last");var i=n._prev,s=n._next;i?i._next=s:e[r]===n&&(e[r]=s),s?s._prev=i:e[a]===n&&(e[a]=i),n._next=n._prev=n.parent=null},kn=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Wn=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},Uv=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},wl=function(e,n,r,a){return e._startAt&&(ct?e._startAt.revert(Gi):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,a))},Gv=function t(e){return!e||e._ts&&t(e.parent)},Im=function(e){return e._repeat?_r(e._tTime,e=e.duration()+e._rDelay)*e:0},_r=function(e,n){var r=Math.floor(e=tt(e/n));return e&&r===e?r-1:r},Ki=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Zi=function(e){return e._end=tt(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ae)||0))},Ji=function(e,n){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=tt(r._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),Zi(e),r._dirty||Wn(r,e)),e},Pm=function(e,n){var r;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(r=Ki(e.rawTime(),n),(!n._dur||Sa(0,n.totalDuration(),r)-n._tTime>Ae)&&n.render(r,!0)),Wn(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Ae}},en=function(e,n,r,a){return n.parent&&kn(n),n._start=tt((fn(r)?r:r||e!==Ve?It(e,r,n):e._time)+n._delay),n._end=tt(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),$m(e,n,"_first","_last",e._sort?"_start":0),Sl(n)||(e._recent=n),a||Pm(e,n),e._ts<0&&Ji(e,e._tTime),e},Fm=function(e,n){return(St.ScrollTrigger||ml("scrollTrigger",n))&&St.ScrollTrigger.create(n,e)},Lm=function(e,n,r,a,i){if(Il(e,n,i),!e._initted)return 1;if(!r&&e._pt&&!ct&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&km!==jt.frame)return Sn.push(e),e._lazy=[i,a],1},Vv=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},Sl=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},Yv=function(e,n,r,a){var i=e.ratio,s=n<0||!n&&(!e._start&&Vv(e)&&!(!e._initted&&Sl(e))||(e._ts<0||e._dp._ts<0)&&!Sl(e))?0:1,l=e._rDelay,u=0,c,d,f;if(l&&e._repeat&&(u=Sa(0,e._tDur,n),d=_r(u,l),e._yoyo&&d&1&&(s=1-s),d!==_r(e._tTime,l)&&(i=1-s,e.vars.repeatRefresh&&e._initted&&e.invalidate())),s!==i||ct||a||e._zTime===Ae||!n&&e._zTime){if(!e._initted&&Lm(e,n,a,r,u))return;for(f=e._zTime,e._zTime=n||(r?Ae:0),r||(r=n&&!f),e.ratio=s,e._from&&(s=1-s),e._time=0,e._tTime=u,c=e._pt;c;)c.r(s,c.d),c=c._next;n<0&&wl(e,n,r,!0),e._onUpdate&&!r&&Tt(e,"onUpdate"),u&&e._repeat&&!r&&e.parent&&Tt(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===s&&(s&&kn(e,1),!r&&!ct&&(Tt(e,s?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},qv=function(e,n,r){var a;if(r>n)for(a=e._first;a&&a._start<=r;){if(a.data==="isPause"&&a._start>n)return a;a=a._next}else for(a=e._last;a&&a._start>=r;){if(a.data==="isPause"&&a._start<n)return a;a=a._prev}},br=function(e,n,r,a){var i=e._repeat,s=tt(n)||0,l=e._tTime/e._tDur;return l&&!a&&(e._time*=s/e._dur),e._dur=s,e._tDur=i?i<0?1e10:tt(s*(i+1)+e._rDelay*i):s,l>0&&!a&&Ji(e,e._tTime=e._tDur*l),e.parent&&Zi(e),r||Wn(e.parent,e),e},Em=function(e){return e instanceof ut?Wn(e):br(e,e._dur)},Xv={_start:0,endTime:xa,totalDuration:xa},It=function t(e,n,r){var a=e.labels,i=e._recent||Xv,s=e.duration()>=$t?i.endTime(!1):e._dur,l,u,c;return ot(n)&&(isNaN(n)||n in a)?(u=n.charAt(0),c=n.substr(-1)==="%",l=n.indexOf("="),u==="<"||u===">"?(l>=0&&(n=n.replace(/=/,"")),(u==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(n.substr(1))||0)*(c?(l<0?i:r).totalDuration()/100:1)):l<0?(n in a||(a[n]=s),a[n]):(u=parseFloat(n.charAt(l-1)+n.substr(l+1)),c&&r&&(u=u/100*(ft(r)?r[0]:r).totalDuration()),l>1?t(e,n.substr(0,l-1),r)+u:s+u)):n==null?s:+n},wa=function(e,n,r){var a=fn(n[1]),i=(a?2:1)+(e<2?0:1),s=n[i],l,u;if(a&&(s.duration=n[1]),s.parent=r,e){for(l=s,u=r;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=_t(u.vars.inherit)&&u.parent;s.immediateRender=_t(l.immediateRender),e<2?s.runBackwards=1:s.startAt=n[i-1]}return new Qe(n[0],s,n[i+1])},Cn=function(e,n){return e||e===0?n(e):n},Sa=function(e,n,r){return r<e?e:r>n?n:r},ht=function(e,n){return!ot(e)||!(n=Av.exec(e))?"":n[1]},Kv=function(e,n,r){return Cn(r,function(a){return Sa(e,n,a)})},kl=[].slice,Bm=function(e,n){return e&&Jt(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&Jt(e[0]))&&!e.nodeType&&e!==Qt},Zv=function(e,n,r){return r===void 0&&(r=[]),e.forEach(function(a){var i;return ot(a)&&!n||Bm(a,1)?(i=r).push.apply(i,Pt(a)):r.push(a)})||r},Pt=function(e,n,r){return We&&!n&&We.selector?We.selector(e):ot(e)&&!r&&(hl||!xr())?kl.call((n||pl).querySelectorAll(e),0):ft(e)?Zv(e,r):Bm(e)?kl.call(e,0):e?[e]:[]},Cl=function(e){return e=Pt(e)[0]||ya("Invalid scope")||{},function(n){var r=e.current||e.nativeElement||e;return Pt(n,r.querySelectorAll?r:r===e?ya("Invalid scope")||pl.createElement("div"):e)}},Am=function(e){return e.sort(function(){return .5-Math.random()})},Rm=function(e){if(Xe(e))return e;var n=Jt(e)?e:{each:e},r=Un(n.ease),a=n.from||0,i=parseFloat(n.base)||0,s={},l=a>0&&a<1,u=isNaN(a)||l,c=n.axis,d=a,f=a;return ot(a)?d=f={center:.5,edges:.5,end:1}[a]||0:!l&&u&&(d=a[0],f=a[1]),function(m,g,y){var p=(y||n).length,h=s[p],_,N,j,w,P,C,M,S,x;if(!h){if(x=n.grid==="auto"?0:(n.grid||[1,$t])[1],!x){for(M=-$t;M<(M=y[x++].getBoundingClientRect().left)&&x<p;);x<p&&x--}for(h=s[p]=[],_=u?Math.min(x,p)*d-.5:a%x,N=x===$t?0:u?p*f/x-.5:a/x|0,M=0,S=$t,C=0;C<p;C++)j=C%x-_,w=N-(C/x|0),h[C]=P=c?Math.abs(c==="y"?w:j):gm(j*j+w*w),P>M&&(M=P),P<S&&(S=P);a==="random"&&Am(h),h.max=M-S,h.min=S,h.v=p=(parseFloat(n.amount)||parseFloat(n.each)*(x>p?p-1:c?c==="y"?p/x:x:Math.max(x,p/x))||0)*(a==="edges"?-1:1),h.b=p<0?i-p:i,h.u=ht(n.amount||n.each)||0,r=r&&p<0?Zm(r):r}return p=(h[m]-h.min)/h.max||0,tt(h.b+(r?r(p):p)*h.v)+h.u}},Tl=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var a=tt(Math.round(parseFloat(r)/e)*e*n);return(a-a%1)/n+(fn(r)?0:ht(r))}},Hm=function(e,n){var r=ft(e),a,i;return!r&&Jt(e)&&(a=r=e.radius||$t,e.values?(e=Pt(e.values),(i=!fn(e[0]))&&(a*=a)):e=Tl(e.increment)),Cn(n,r?Xe(e)?function(s){return i=e(s),Math.abs(i-s)<=a?i:s}:function(s){for(var l=parseFloat(i?s.x:s),u=parseFloat(i?s.y:0),c=$t,d=0,f=e.length,m,g;f--;)i?(m=e[f].x-l,g=e[f].y-u,m=m*m+g*g):m=Math.abs(e[f]-l),m<c&&(c=m,d=f);return d=!a||c<=a?e[d]:s,i||d===s||fn(s)?d:d+ht(s)}:Tl(e))},Om=function(e,n,r,a){return Cn(ft(e)?!n:r===!0?!!(r=0):!a,function(){return ft(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(a=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(n-e+r*.99))/r)*r*a)/a})},Jv=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(a){return n.reduce(function(i,s){return s(i)},a)}},Qv=function(e,n){return function(r){return e(parseFloat(r))+(n||ht(r))}},e1=function(e,n,r){return Wm(e,n,0,1,r)},zm=function(e,n,r){return Cn(r,function(a){return e[~~n(a)]})},t1=function t(e,n,r){var a=n-e;return ft(e)?zm(e,t(0,e.length),n):Cn(r,function(i){return(a+(i-e)%a)%a+e})},n1=function t(e,n,r){var a=n-e,i=a*2;return ft(e)?zm(e,t(0,e.length-1),n):Cn(r,function(s){return s=(i+(s-e)%i)%i||0,e+(s>a?i-s:s)})},ka=function(e){for(var n=0,r="",a,i,s,l;~(a=e.indexOf("random(",n));)s=e.indexOf(")",a),l=e.charAt(a+7)==="[",i=e.substr(a+7,s-a-7).match(l?xm:dl),r+=e.substr(n,a-n)+Om(l?i:+i[0],l?0:+i[1],+i[2]||1e-5),n=s+1;return r+e.substr(n,e.length-n)},Wm=function(e,n,r,a,i){var s=n-e,l=a-r;return Cn(i,function(u){return r+((u-e)/s*l||0)})},r1=function t(e,n,r,a){var i=isNaN(e+n)?0:function(g){return(1-g)*e+g*n};if(!i){var s=ot(e),l={},u,c,d,f,m;if(r===!0&&(a=1)&&(r=null),s)e={p:e},n={p:n};else if(ft(e)&&!ft(n)){for(d=[],f=e.length,m=f-2,c=1;c<f;c++)d.push(t(e[c-1],e[c]));f--,i=function(y){y*=f;var p=Math.min(m,~~y);return d[p](y-p)},r=n}else a||(e=gr(ft(e)?[]:{},e));if(!d){for(u in n)Ml.call(l,e,u,"get",n[u]);i=function(y){return Ll(y,l)||(s?e.p:e)}}}return Cn(r,i)},Um=function(e,n,r){var a=e.labels,i=$t,s,l,u;for(s in a)l=a[s]-n,l<0==!!r&&l&&i>(l=Math.abs(l))&&(u=s,i=l);return u},Tt=function(e,n,r){var a=e.vars,i=a[n],s=We,l=e._ctx,u,c,d;if(i)return u=a[n+"Params"],c=a.callbackScope||e,r&&Sn.length&&Yi(),l&&(We=l),d=u?i.apply(c,u):i.call(c),We=s,d},Ca=function(e){return kn(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ct),e.progress()<1&&Tt(e,"onInterrupt"),e},yr,Gm=[],Vm=function(e){if(e)if(e=!e.name&&e.default||e,ul()||e.headless){var n=e.name,r=Xe(e),a=n&&!r&&e.init?function(){this._props=[]}:e,i={init:xa,render:Ll,add:Ml,kill:y1,modifier:b1,rawVars:0},s={targetTest:0,get:0,getSetter:Fl,aliases:{},register:0};if(xr(),e!==a){if(kt[n])return;Ct(a,Ct(qi(e,i),s)),gr(a.prototype,gr(i,qi(e,s))),kt[a.prop=n]=a,e.targetTest&&(Vi.push(a),gl[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}Sm(n,a),e.register&&e.register(xt,a,yt)}else Gm.push(e)},Re=255,Ta={aqua:[0,Re,Re],lime:[0,Re,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Re],navy:[0,0,128],white:[Re,Re,Re],olive:[128,128,0],yellow:[Re,Re,0],orange:[Re,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Re,0,0],pink:[Re,192,203],cyan:[0,Re,Re],transparent:[Re,Re,Re,0]},jl=function(e,n,r){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(r-n)*e*6:e<.5?r:e*3<2?n+(r-n)*(2/3-e)*6:n)*Re+.5|0},Ym=function(e,n,r){var a=e?fn(e)?[e>>16,e>>8&Re,e&Re]:0:Ta.black,i,s,l,u,c,d,f,m,g,y;if(!a){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Ta[e])a=Ta[e];else if(e.charAt(0)==="#"){if(e.length<6&&(i=e.charAt(1),s=e.charAt(2),l=e.charAt(3),e="#"+i+i+s+s+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return a=parseInt(e.substr(1,6),16),[a>>16,a>>8&Re,a&Re,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),a=[e>>16,e>>8&Re,e&Re]}else if(e.substr(0,3)==="hsl"){if(a=y=e.match(dl),!n)u=+a[0]%360/360,c=+a[1]/100,d=+a[2]/100,s=d<=.5?d*(c+1):d+c-d*c,i=d*2-s,a.length>3&&(a[3]*=1),a[0]=jl(u+1/3,i,s),a[1]=jl(u,i,s),a[2]=jl(u-1/3,i,s);else if(~e.indexOf("="))return a=e.match(bm),r&&a.length<4&&(a[3]=1),a}else a=e.match(dl)||Ta.transparent;a=a.map(Number)}return n&&!y&&(i=a[0]/Re,s=a[1]/Re,l=a[2]/Re,f=Math.max(i,s,l),m=Math.min(i,s,l),d=(f+m)/2,f===m?u=c=0:(g=f-m,c=d>.5?g/(2-f-m):g/(f+m),u=f===i?(s-l)/g+(s<l?6:0):f===s?(l-i)/g+2:(i-s)/g+4,u*=60),a[0]=~~(u+.5),a[1]=~~(c*100+.5),a[2]=~~(d*100+.5)),r&&a.length<4&&(a[3]=1),a},qm=function(e){var n=[],r=[],a=-1;return e.split(Tn).forEach(function(i){var s=i.match(pr)||[];n.push.apply(n,s),r.push(a+=s.length+1)}),n.c=r,n},Xm=function(e,n,r){var a="",i=(e+a).match(Tn),s=n?"hsla(":"rgba(",l=0,u,c,d,f;if(!i)return e;if(i=i.map(function(m){return(m=Ym(m,n,1))&&s+(n?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),r&&(d=qm(e),u=r.c,u.join(a)!==d.c.join(a)))for(c=e.replace(Tn,"1").split(pr),f=c.length-1;l<f;l++)a+=c[l]+(~u.indexOf(l)?i.shift()||s+"0,0,0,0)":(d.length?d:i.length?i:r).shift());if(!c)for(c=e.split(Tn),f=c.length-1;l<f;l++)a+=c[l]+i[l];return a+c[f]},Tn=(function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Ta)t+="|"+e+"\\b";return new RegExp(t+")","gi")})(),a1=/hsl[a]?\(/,Km=function(e){var n=e.join(" "),r;if(Tn.lastIndex=0,Tn.test(n))return r=a1.test(n),e[1]=Xm(e[1],r),e[0]=Xm(e[0],r,qm(e[1])),!0},ja,jt=(function(){var t=Date.now,e=500,n=33,r=t(),a=r,i=1e3/240,s=i,l=[],u,c,d,f,m,g,y=function p(h){var _=t()-a,N=h===!0,j,w,P,C;if((_>e||_<0)&&(r+=_-n),a+=_,P=a-r,j=P-s,(j>0||N)&&(C=++f.frame,m=P-f.time*1e3,f.time=P=P/1e3,s+=j+(j>=i?4:i-j),w=1),N||(u=c(p)),w)for(g=0;g<l.length;g++)l[g](P,m,C,h)};return f={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(h){return m/(1e3/(h||60))},wake:function(){vm&&(!hl&&ul()&&(Qt=hl=window,pl=Qt.document||{},St.gsap=xt,(Qt.gsapVersions||(Qt.gsapVersions=[])).push(xt.version),wm(Ui||Qt.GreenSockGlobals||!Qt.gsap&&Qt||{}),Gm.forEach(Vm)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&f.sleep(),c=d||function(h){return setTimeout(h,s-f.time*1e3+1|0)},ja=1,y(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(u),ja=0,c=xa},lagSmoothing:function(h,_){e=h||1/0,n=Math.min(_||33,e)},fps:function(h){i=1e3/(h||240),s=f.time*1e3+i},add:function(h,_,N){var j=_?function(w,P,C,M){h(w,P,C,M),f.remove(j)}:h;return f.remove(h),l[N?"unshift":"push"](j),xr(),j},remove:function(h,_){~(_=l.indexOf(h))&&l.splice(_,1)&&g>=_&&g--},_listeners:l},f})(),xr=function(){return!ja&&jt.wake()},Pe={},i1=/^[\d.\-M][\d.\-,\s]/,s1=/["']/g,o1=function(e){for(var n={},r=e.substr(1,e.length-3).split(":"),a=r[0],i=1,s=r.length,l,u,c;i<s;i++)u=r[i],l=i!==s-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),n[a]=isNaN(c)?c.replace(s1,"").trim():+c,a=u.substr(l+1).trim();return n},l1=function(e){var n=e.indexOf("(")+1,r=e.indexOf(")"),a=e.indexOf("(",n);return e.substring(n,~a&&a<r?e.indexOf(")",r+1):r)},c1=function(e){var n=(e+"").split("("),r=Pe[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[o1(n[1])]:l1(e).split(",").map(Nm)):Pe._CE&&i1.test(e)?Pe._CE("",e):r},Zm=function(e){return function(n){return 1-e(1-n)}},Jm=function t(e,n){for(var r=e._first,a;r;)r instanceof ut?t(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?t(r.timeline,n):(a=r._ease,r._ease=r._yEase,r._yEase=a,r._yoyo=n)),r=r._next},Un=function(e,n){return e&&(Xe(e)?e:Pe[e]||c1(e))||n},Gn=function(e,n,r,a){r===void 0&&(r=function(u){return 1-n(1-u)}),a===void 0&&(a=function(u){return u<.5?n(u*2)/2:1-n((1-u)*2)/2});var i={easeIn:n,easeOut:r,easeInOut:a},s;return bt(e,function(l){Pe[l]=St[l]=i,Pe[s=l.toLowerCase()]=r;for(var u in i)Pe[s+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=Pe[l+"."+u]=i[u]}),i},Qm=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},Nl=function t(e,n,r){var a=n>=1?n:1,i=(r||(e?.3:.45))/(n<1?n:1),s=i/ll*(Math.asin(1/a)||0),l=function(d){return d===1?1:a*Math.pow(2,-10*d)*Bv((d-s)*i)+1},u=e==="out"?l:e==="in"?function(c){return 1-l(1-c)}:Qm(l);return i=ll/i,u.config=function(c,d){return t(e,c,d)},u},Dl=function t(e,n){n===void 0&&(n=1.70158);var r=function(s){return s?--s*s*((n+1)*s+n)+1:0},a=e==="out"?r:e==="in"?function(i){return 1-r(1-i)}:Qm(r);return a.config=function(i){return t(e,i)},a};bt("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;Gn(t+",Power"+(n-1),e?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})}),Pe.Linear.easeNone=Pe.none=Pe.Linear.easeIn,Gn("Elastic",Nl("in"),Nl("out"),Nl()),(function(t,e){var n=1/e,r=2*n,a=2.5*n,i=function(l){return l<n?t*l*l:l<r?t*Math.pow(l-1.5/e,2)+.75:l<a?t*(l-=2.25/e)*l+.9375:t*Math.pow(l-2.625/e,2)+.984375};Gn("Bounce",function(s){return 1-i(1-s)},i)})(7.5625,2.75),Gn("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)}),Gn("Circ",function(t){return-(gm(1-t*t)-1)}),Gn("Sine",function(t){return t===1?1:-Ev(t*Fv)+1}),Gn("Back",Dl("in"),Dl("out"),Dl()),Pe.SteppedEase=Pe.steps=St.SteppedEase={config:function(e,n){e===void 0&&(e=1);var r=1/e,a=e+(n?0:1),i=n?1:0,s=1-Ae;return function(l){return((a*Sa(0,s,l)|0)+i)*r}}},hr.ease=Pe["quad.out"],bt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return yl+=t+","+t+"Params,"});var eg=function(e,n){this.id=Lv++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:Tm,this.set=n?n.getSetter:Fl},Na=(function(){function t(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,br(this,+n.duration,1,1),this.data=n.data,We&&(this._ctx=We,We.data.push(this)),ja||jt.wake()}var e=t.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,br(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,a){if(xr(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Ji(this,r),!i._dp||i.parent||Pm(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&en(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!a||this._initted&&Math.abs(this._zTime)===Ae||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),jm(this,r,a)),this},e.time=function(r,a){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+Im(this))%(this._dur+this._rDelay)||(r?this._dur:0),a):this._time},e.totalProgress=function(r,a){return arguments.length?this.totalTime(this.totalDuration()*r,a):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+Im(this),a):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,a){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*i,a):this._repeat?_r(this._tTime,i)+1:1},e.timeScale=function(r,a){if(!arguments.length)return this._rts===-Ae?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?Ki(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Ae?0:this._rts,this.totalTime(Sa(-Math.abs(this._delay),this.totalDuration(),i),a!==!1),Zi(this),Uv(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(xr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ae&&(this._tTime-=Ae)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var a=this.parent||this._dp;return a&&(a._sort||!this.parent)&&en(a,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(_t(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var a=this.parent||this._dp;return a?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ki(a.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=Hv);var a=ct;return ct=r,vl(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),ct=a,this},e.globalTime=function(r){for(var a=this,i=arguments.length?r:a.rawTime();a;)i=a._start+i/(Math.abs(a._ts)||1),a=a._dp;return!this.parent&&this._sat?this._sat.globalTime(r):i},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Em(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var a=this._time;return this._rDelay=r,Em(this),a?this.time(a):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,a){return this.totalTime(It(this,r),_t(a))},e.restart=function(r,a){return this.play().totalTime(r?-this._delay:0,_t(a)),this._dur||(this._zTime=-Ae),this},e.play=function(r,a){return r!=null&&this.seek(r,a),this.reversed(!1).paused(!1)},e.reverse=function(r,a){return r!=null&&this.seek(r||this.totalDuration(),a),this.reversed(!0).paused(!1)},e.pause=function(r,a){return r!=null&&this.seek(r,a),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Ae:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ae,this},e.isActive=function(){var r=this.parent||this._dp,a=this._start,i;return!!(!r||this._ts&&this._initted&&r.isActive()&&(i=r.rawTime(!0))>=a&&i<this.endTime(!0)-Ae)},e.eventCallback=function(r,a,i){var s=this.vars;return arguments.length>1?(a?(s[r]=a,i&&(s[r+"Params"]=i),r==="onUpdate"&&(this._onUpdate=a)):delete s[r],this):s[r]},e.then=function(r){var a=this;return new Promise(function(i){var s=Xe(r)?r:Dm,l=function(){var c=a.then;a.then=null,Xe(s)&&(s=s(a))&&(s.then||s===a)&&(a.then=c),i(s),a.then=c};a._initted&&a.totalProgress()===1&&a._ts>=0||!a._tTime&&a._ts<0?l():a._prom=l})},e.kill=function(){Ca(this)},t})();Ct(Na.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ae,_prom:0,_ps:!1,_rts:1});var ut=(function(t){mm(e,t);function e(r,a){var i;return r===void 0&&(r={}),i=t.call(this,r)||this,i.labels={},i.smoothChildTiming=!!r.smoothChildTiming,i.autoRemoveChildren=!!r.autoRemoveChildren,i._sort=_t(r.sortChildren),Ve&&en(r.parent||Ve,dn(i),a),r.reversed&&i.reverse(),r.paused&&i.paused(!0),r.scrollTrigger&&Fm(dn(i),r.scrollTrigger),i}var n=e.prototype;return n.to=function(a,i,s){return wa(0,arguments,this),this},n.from=function(a,i,s){return wa(1,arguments,this),this},n.fromTo=function(a,i,s,l){return wa(2,arguments,this),this},n.set=function(a,i,s){return i.duration=0,i.parent=this,va(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new Qe(a,i,It(this,s),1),this},n.call=function(a,i,s){return en(this,Qe.delayedCall(0,a,i),s)},n.staggerTo=function(a,i,s,l,u,c,d){return s.duration=i,s.stagger=s.stagger||l,s.onComplete=c,s.onCompleteParams=d,s.parent=this,new Qe(a,s,It(this,u)),this},n.staggerFrom=function(a,i,s,l,u,c,d){return s.runBackwards=1,va(s).immediateRender=_t(s.immediateRender),this.staggerTo(a,i,s,l,u,c,d)},n.staggerFromTo=function(a,i,s,l,u,c,d,f){return l.startAt=s,va(l).immediateRender=_t(l.immediateRender),this.staggerTo(a,i,l,u,c,d,f)},n.render=function(a,i,s){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=a<=0?0:tt(a),f=this._zTime<0!=a<0&&(this._initted||!c),m,g,y,p,h,_,N,j,w,P,C,M;if(this!==Ve&&d>u&&a>=0&&(d=u),d!==this._tTime||s||f){if(l!==this._time&&c&&(d+=this._time-l,a+=this._time-l),m=d,w=this._start,j=this._ts,_=!j,f&&(c||(l=this._zTime),(a||!i)&&(this._zTime=a)),this._repeat){if(C=this._yoyo,h=c+this._rDelay,this._repeat<-1&&a<0)return this.totalTime(h*100+a,i,s);if(m=tt(d%h),d===u?(p=this._repeat,m=c):(P=tt(d/h),p=~~P,p&&p===P&&(m=c,p--),m>c&&(m=c)),P=_r(this._tTime,h),!l&&this._tTime&&P!==p&&this._tTime-P*h-this._dur<=0&&(P=p),C&&p&1&&(m=c-m,M=1),p!==P&&!this._lock){var S=C&&P&1,x=S===(C&&p&1);if(p<P&&(S=!S),l=S?0:d%c?c:d,this._lock=1,this.render(l||(M?0:tt(p*h)),i,!c)._lock=0,this._tTime=d,!i&&this.parent&&Tt(this,"onRepeat"),this.vars.repeatRefresh&&!M&&(this.invalidate()._lock=1),l&&l!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,x&&(this._lock=2,l=S?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!M&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;Jm(this,M)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(N=qv(this,tt(l),tt(m)),N&&(d-=m-(m=N._start))),this._tTime=d,this._time=m,this._act=!j,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=a,l=0),!l&&d&&!i&&!P&&(Tt(this,"onStart"),this._tTime!==d))return this;if(m>=l&&a>=0)for(g=this._first;g;){if(y=g._next,(g._act||m>=g._start)&&g._ts&&N!==g){if(g.parent!==this)return this.render(a,i,s);if(g.render(g._ts>0?(m-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(m-g._start)*g._ts,i,s),m!==this._time||!this._ts&&!_){N=0,y&&(d+=this._zTime=-Ae);break}}g=y}else{g=this._last;for(var $=a<0?a:m;g;){if(y=g._prev,(g._act||$<=g._end)&&g._ts&&N!==g){if(g.parent!==this)return this.render(a,i,s);if(g.render(g._ts>0?($-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+($-g._start)*g._ts,i,s||ct&&vl(g)),m!==this._time||!this._ts&&!_){N=0,y&&(d+=this._zTime=$?-Ae:Ae);break}}g=y}}if(N&&!i&&(this.pause(),N.render(m>=l?0:-Ae)._zTime=m>=l?1:-1,this._ts))return this._start=w,Zi(this),this.render(a,i,s);this._onUpdate&&!i&&Tt(this,"onUpdate",!0),(d===u&&this._tTime>=this.totalDuration()||!d&&l)&&(w===this._start||Math.abs(j)!==Math.abs(this._ts))&&(this._lock||((a||!c)&&(d===u&&this._ts>0||!d&&this._ts<0)&&kn(this,1),!i&&!(a<0&&!l)&&(d||l||!u)&&(Tt(this,d===u&&a>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(a,i){var s=this;if(fn(i)||(i=It(this,i,a)),!(a instanceof Na)){if(ft(a))return a.forEach(function(l){return s.add(l,i)}),this;if(ot(a))return this.addLabel(a,i);if(Xe(a))a=Qe.delayedCall(0,a);else return this}return this!==a?en(this,a,i):this},n.getChildren=function(a,i,s,l){a===void 0&&(a=!0),i===void 0&&(i=!0),s===void 0&&(s=!0),l===void 0&&(l=-$t);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof Qe?i&&u.push(c):(s&&u.push(c),a&&u.push.apply(u,c.getChildren(!0,i,s)))),c=c._next;return u},n.getById=function(a){for(var i=this.getChildren(1,1,1),s=i.length;s--;)if(i[s].vars.id===a)return i[s]},n.remove=function(a){return ot(a)?this.removeLabel(a):Xe(a)?this.killTweensOf(a):(a.parent===this&&Xi(this,a),a===this._recent&&(this._recent=this._last),Wn(this))},n.totalTime=function(a,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=tt(jt.time-(this._ts>0?a/this._ts:(this.totalDuration()-a)/-this._ts))),t.prototype.totalTime.call(this,a,i),this._forcing=0,this):this._tTime},n.addLabel=function(a,i){return this.labels[a]=It(this,i),this},n.removeLabel=function(a){return delete this.labels[a],this},n.addPause=function(a,i,s){var l=Qe.delayedCall(0,i||xa,s);return l.data="isPause",this._hasPause=1,en(this,l,It(this,a))},n.removePause=function(a){var i=this._first;for(a=It(this,a);i;)i._start===a&&i.data==="isPause"&&kn(i),i=i._next},n.killTweensOf=function(a,i,s){for(var l=this.getTweensOf(a,s),u=l.length;u--;)jn!==l[u]&&l[u].kill(a,i);return this},n.getTweensOf=function(a,i){for(var s=[],l=Pt(a),u=this._first,c=fn(i),d;u;)u instanceof Qe?Ov(u._targets,l)&&(c?(!jn||u._initted&&u._ts)&&u.globalTime(0)<=i&&u.globalTime(u.totalDuration())>i:!i||u.isActive())&&s.push(u):(d=u.getTweensOf(l,i)).length&&s.push.apply(s,d),u=u._next;return s},n.tweenTo=function(a,i){i=i||{};var s=this,l=It(s,a),u=i,c=u.startAt,d=u.onStart,f=u.onStartParams,m=u.immediateRender,g,y=Qe.to(s,Ct({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:i.duration||Math.abs((l-(c&&"time"in c?c.time:s._time))/s.timeScale())||Ae,onStart:function(){if(s.pause(),!g){var h=i.duration||Math.abs((l-(c&&"time"in c?c.time:s._time))/s.timeScale());y._dur!==h&&br(y,h,0,1).render(y._time,!0,!0),g=1}d&&d.apply(y,f||[])}},i));return m?y.render(0):y},n.tweenFromTo=function(a,i,s){return this.tweenTo(i,Ct({startAt:{time:It(this,a)}},s))},n.recent=function(){return this._recent},n.nextLabel=function(a){return a===void 0&&(a=this._time),Um(this,It(this,a))},n.previousLabel=function(a){return a===void 0&&(a=this._time),Um(this,It(this,a),1)},n.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.previousLabel(this._time+Ae)},n.shiftChildren=function(a,i,s){s===void 0&&(s=0);for(var l=this._first,u=this.labels,c;l;)l._start>=s&&(l._start+=a,l._end+=a),l=l._next;if(i)for(c in u)u[c]>=s&&(u[c]+=a);return Wn(this)},n.invalidate=function(a){var i=this._first;for(this._lock=0;i;)i.invalidate(a),i=i._next;return t.prototype.invalidate.call(this,a)},n.clear=function(a){a===void 0&&(a=!0);for(var i=this._first,s;i;)s=i._next,this.remove(i),i=s;return this._dp&&(this._time=this._tTime=this._pTime=0),a&&(this.labels={}),Wn(this)},n.totalDuration=function(a){var i=0,s=this,l=s._last,u=$t,c,d,f;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-a:a));if(s._dirty){for(f=s.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>u&&s._sort&&l._ts&&!s._lock?(s._lock=1,en(s,l,d-l._delay,1)._lock=0):u=d,d<0&&l._ts&&(i-=d,(!f&&!s._dp||f&&f.smoothChildTiming)&&(s._start+=d/s._ts,s._time-=d,s._tTime-=d),s.shiftChildren(-d,!1,-1/0),u=0),l._end>i&&l._ts&&(i=l._end),l=c;br(s,s===Ve&&s._time>i?s._time:i,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(a){if(Ve._ts&&(jm(Ve,Ki(a,Ve)),km=jt.frame),jt.frame>=Cm){Cm+=wt.autoSleep||120;var i=Ve._first;if((!i||!i._ts)&&wt.autoSleep&&jt._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||jt.sleep()}}},e})(Na);Ct(ut.prototype,{_lock:0,_hasPause:0,_forcing:0});var u1=function(e,n,r,a,i,s,l){var u=new yt(this._pt,e,n,0,1,sg,null,i),c=0,d=0,f,m,g,y,p,h,_,N;for(u.b=r,u.e=a,r+="",a+="",(_=~a.indexOf("random("))&&(a=ka(a)),s&&(N=[r,a],s(N,e,n),r=N[0],a=N[1]),m=r.match(fl)||[];f=fl.exec(a);)y=f[0],p=a.substring(c,f.index),g?g=(g+1)%5:p.substr(-5)==="rgba("&&(g=1),y!==m[d++]&&(h=parseFloat(m[d-1])||0,u._pt={_next:u._pt,p:p||d===1?p:",",s:h,c:y.charAt(1)==="="?mr(h,y)-h:parseFloat(y)-h,m:g&&g<4?Math.round:0},c=fl.lastIndex);return u.c=c<a.length?a.substring(c,a.length):"",u.fp=l,(ym.test(a)||_)&&(u.e=0),this._pt=u,u},Ml=function(e,n,r,a,i,s,l,u,c,d){Xe(a)&&(a=a(i||0,e,s));var f=e[n],m=r!=="get"?r:Xe(f)?c?e[n.indexOf("set")||!Xe(e["get"+n.substr(3)])?n:"get"+n.substr(3)](c):e[n]():f,g=Xe(f)?c?m1:ag:Pl,y;if(ot(a)&&(~a.indexOf("random(")&&(a=ka(a)),a.charAt(1)==="="&&(y=mr(m,a)+(ht(m)||0),(y||y===0)&&(a=y))),!d||m!==a||$l)return!isNaN(m*a)&&a!==""?(y=new yt(this._pt,e,n,+m||0,a-(m||0),typeof f=="boolean"?_1:ig,0,g),c&&(y.fp=c),l&&y.modifier(l,this,e),this._pt=y):(!f&&!(n in e)&&ml(n,a),u1.call(this,e,n,m,a,g,u||wt.stringFilter,c))},d1=function(e,n,r,a,i){if(Xe(e)&&(e=Da(e,i,n,r,a)),!Jt(e)||e.style&&e.nodeType||ft(e)||_m(e))return ot(e)?Da(e,i,n,r,a):e;var s={},l;for(l in e)s[l]=Da(e[l],i,n,r,a);return s},tg=function(e,n,r,a,i,s){var l,u,c,d;if(kt[e]&&(l=new kt[e]).init(i,l.rawVars?n[e]:d1(n[e],a,i,s,r),r,a,s)!==!1&&(r._pt=u=new yt(r._pt,i,e,0,1,l.render,l,0,l.priority),r!==yr))for(c=r._ptLookup[r._targets.indexOf(i)],d=l._props.length;d--;)c[l._props[d]]=u;return l},jn,$l,Il=function t(e,n,r){var a=e.vars,i=a.ease,s=a.startAt,l=a.immediateRender,u=a.lazy,c=a.onUpdate,d=a.runBackwards,f=a.yoyoEase,m=a.keyframes,g=a.autoRevert,y=e._dur,p=e._startAt,h=e._targets,_=e.parent,N=_&&_.data==="nested"?_.vars.targets:h,j=e._overwrite==="auto"&&!ol,w=e.timeline,P,C,M,S,x,$,k,v,A,D,I,T,E;if(w&&(!m||!i)&&(i="none"),e._ease=Un(i,hr.ease),e._yEase=f?Zm(Un(f===!0?i:f,hr.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!w&&!!a.runBackwards,!w||m&&!a.stagger){if(v=h[0]?zn(h[0]).harness:0,T=v&&a[v.prop],P=qi(a,gl),p&&(p._zTime<0&&p.progress(1),n<0&&d&&l&&!g?p.render(-1,!0):p.revert(d&&y?Gi:Rv),p._lazy=0),s){if(kn(e._startAt=Qe.set(h,Ct({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!p&&_t(u),startAt:null,delay:0,onUpdate:c&&function(){return Tt(e,"onUpdate")},stagger:0},s))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ct||!l&&!g)&&e._startAt.revert(Gi),l&&y&&n<=0&&r<=0){n&&(e._zTime=n);return}}else if(d&&y&&!p){if(n&&(l=!1),M=Ct({overwrite:!1,data:"isFromStart",lazy:l&&!p&&_t(u),immediateRender:l,stagger:0,parent:_},P),T&&(M[v.prop]=T),kn(e._startAt=Qe.set(h,M)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ct?e._startAt.revert(Gi):e._startAt.render(-1,!0)),e._zTime=n,!l)t(e._startAt,Ae,Ae);else if(!n)return}for(e._pt=e._ptCache=0,u=y&&_t(u)||u&&!y,C=0;C<h.length;C++){if(x=h[C],k=x._gsap||xl(h)[C]._gsap,e._ptLookup[C]=D={},_l[k.id]&&Sn.length&&Yi(),I=N===h?C:N.indexOf(x),v&&(A=new v).init(x,T||P,e,I,N)!==!1&&(e._pt=S=new yt(e._pt,x,A.name,0,1,A.render,A,0,A.priority),A._props.forEach(function(ae){D[ae]=S}),A.priority&&($=1)),!v||T)for(M in P)kt[M]&&(A=tg(M,P,e,I,x,N))?A.priority&&($=1):D[M]=S=Ml.call(e,x,M,"get",P[M],I,N,0,a.stringFilter);e._op&&e._op[C]&&e.kill(x,e._op[C]),j&&e._pt&&(jn=e,Ve.killTweensOf(x,D,e.globalTime(n)),E=!e.parent,jn=0),e._pt&&u&&(_l[k.id]=1)}$&&og(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!E,m&&n<=0&&w.render($t,!0,!0)},f1=function(e,n,r,a,i,s,l,u){var c=(e._pt&&e._ptCache||(e._ptCache={}))[n],d,f,m,g;if(!c)for(c=e._ptCache[n]=[],m=e._ptLookup,g=e._targets.length;g--;){if(d=m[g][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return $l=1,e.vars[n]="+=0",Il(e,l),$l=0,u?ya(n+" not eligible for reset"):1;c.push(d)}for(g=c.length;g--;)f=c[g],d=f._pt||f,d.s=(a||a===0)&&!i?a:d.s+(a||0)+s*d.c,d.c=r-d.s,f.e&&(f.e=Je(r)+ht(f.e)),f.b&&(f.b=d.s+ht(f.b))},h1=function(e,n){var r=e[0]?zn(e[0]).harness:0,a=r&&r.aliases,i,s,l,u;if(!a)return n;i=gr({},n);for(s in a)if(s in i)for(u=a[s].split(","),l=u.length;l--;)i[u[l]]=i[s];return i},p1=function(e,n,r,a){var i=n.ease||a||"power1.inOut",s,l;if(ft(n))l=r[e]||(r[e]=[]),n.forEach(function(u,c){return l.push({t:c/(n.length-1)*100,v:u,e:i})});else for(s in n)l=r[s]||(r[s]=[]),s==="ease"||l.push({t:parseFloat(e),v:n[s],e:i})},Da=function(e,n,r,a,i){return Xe(e)?e.call(n,r,a,i):ot(e)&&~e.indexOf("random(")?ka(e):e},ng=yl+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",rg={};bt(ng+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return rg[t]=1});var Qe=(function(t){mm(e,t);function e(r,a,i,s){var l;typeof a=="number"&&(i.duration=a,a=i,i=null),l=t.call(this,s?a:va(a))||this;var u=l.vars,c=u.duration,d=u.delay,f=u.immediateRender,m=u.stagger,g=u.overwrite,y=u.keyframes,p=u.defaults,h=u.scrollTrigger,_=u.yoyoEase,N=a.parent||Ve,j=(ft(r)||_m(r)?fn(r[0]):"length"in a)?[r]:Pt(r),w,P,C,M,S,x,$,k;if(l._targets=j.length?xl(j):ya("GSAP target "+r+" not found. https://gsap.com",!wt.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,y||m||Wi(c)||Wi(d)){if(a=l.vars,w=l.timeline=new ut({data:"nested",defaults:p||{},targets:N&&N.data==="nested"?N.vars.targets:j}),w.kill(),w.parent=w._dp=dn(l),w._start=0,m||Wi(c)||Wi(d)){if(M=j.length,$=m&&Rm(m),Jt(m))for(S in m)~ng.indexOf(S)&&(k||(k={}),k[S]=m[S]);for(P=0;P<M;P++)C=qi(a,rg),C.stagger=0,_&&(C.yoyoEase=_),k&&gr(C,k),x=j[P],C.duration=+Da(c,dn(l),P,x,j),C.delay=(+Da(d,dn(l),P,x,j)||0)-l._delay,!m&&M===1&&C.delay&&(l._delay=d=C.delay,l._start+=d,C.delay=0),w.to(x,C,$?$(P,x,j):0),w._ease=Pe.none;w.duration()?c=d=0:l.timeline=0}else if(y){va(Ct(w.vars.defaults,{ease:"none"})),w._ease=Un(y.ease||a.ease||"none");var v=0,A,D,I;if(ft(y))y.forEach(function(T){return w.to(j,T,">")}),w.duration();else{C={};for(S in y)S==="ease"||S==="easeEach"||p1(S,y[S],C,y.easeEach);for(S in C)for(A=C[S].sort(function(T,E){return T.t-E.t}),v=0,P=0;P<A.length;P++)D=A[P],I={ease:D.e,duration:(D.t-(P?A[P-1].t:0))/100*c},I[S]=D.v,w.to(j,I,v),v+=I.duration;w.duration()<c&&w.to({},{duration:c-w.duration()})}}c||l.duration(c=w.duration())}else l.timeline=0;return g===!0&&!ol&&(jn=dn(l),Ve.killTweensOf(j),jn=0),en(N,dn(l),i),a.reversed&&l.reverse(),a.paused&&l.paused(!0),(f||!c&&!y&&l._start===tt(N._time)&&_t(f)&&Gv(dn(l))&&N.data!=="nested")&&(l._tTime=-Ae,l.render(Math.max(0,-d)||0)),h&&Fm(dn(l),h),l}var n=e.prototype;return n.render=function(a,i,s){var l=this._time,u=this._tDur,c=this._dur,d=a<0,f=a>u-Ae&&!d?u:a<Ae?0:a,m,g,y,p,h,_,N,j,w;if(!c)Yv(this,a,i,s);else if(f!==this._tTime||!a||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(m=f,j=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(p*100+a,i,s);if(m=tt(f%p),f===u?(y=this._repeat,m=c):(h=tt(f/p),y=~~h,y&&y===h?(m=c,y--):m>c&&(m=c)),_=this._yoyo&&y&1,_&&(w=this._yEase,m=c-m),h=_r(this._tTime,p),m===l&&!s&&this._initted&&y===h)return this._tTime=f,this;y!==h&&(j&&this._yEase&&Jm(j,_),this.vars.repeatRefresh&&!_&&!this._lock&&m!==p&&this._initted&&(this._lock=s=1,this.render(tt(p*y),!0).invalidate()._lock=0))}if(!this._initted){if(Lm(this,d?a:m,s,i,f))return this._tTime=0,this;if(l!==this._time&&!(s&&this.vars.repeatRefresh&&y!==h))return this;if(c!==this._dur)return this.render(a,i,s)}if(this._tTime=f,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=N=(w||this._ease)(m/c),this._from&&(this.ratio=N=1-N),!l&&f&&!i&&!h&&(Tt(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(N,g.d),g=g._next;j&&j.render(a<0?a:j._dur*j._ease(m/this._dur),i,s)||this._startAt&&(this._zTime=a),this._onUpdate&&!i&&(d&&wl(this,a,i,s),Tt(this,"onUpdate")),this._repeat&&y!==h&&this.vars.onRepeat&&!i&&this.parent&&Tt(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(d&&!this._onUpdate&&wl(this,a,!0,!0),(a||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&kn(this,1),!i&&!(d&&!l)&&(f||l||_)&&(Tt(this,f===u?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(a){return(!a||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(a),t.prototype.invalidate.call(this,a)},n.resetTo=function(a,i,s,l,u){ja||jt.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||Il(this,c),d=this._ease(c/this._dur),f1(this,a,i,s,l,d,c,u)?this.resetTo(a,i,s,l,1):(Ji(this,0),this.parent||$m(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(a,i){if(i===void 0&&(i="all"),!a&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?Ca(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ct),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(a,i,jn&&jn.vars.overwrite!==!0)._first||Ca(this),this.parent&&s!==this.timeline.totalDuration()&&br(this,this._dur*this.timeline._tDur/s,0,1),this}var l=this._targets,u=a?Pt(a):l,c=this._ptLookup,d=this._pt,f,m,g,y,p,h,_;if((!i||i==="all")&&Wv(l,u))return i==="all"&&(this._pt=0),Ca(this);for(f=this._op=this._op||[],i!=="all"&&(ot(i)&&(p={},bt(i,function(N){return p[N]=1}),i=p),i=h1(l,i)),_=l.length;_--;)if(~u.indexOf(l[_])){m=c[_],i==="all"?(f[_]=i,y=m,g={}):(g=f[_]=f[_]||{},y=i);for(p in y)h=m&&m[p],h&&((!("kill"in h.d)||h.d.kill(p)===!0)&&Xi(this,h,"_pt"),delete m[p]),g!=="all"&&(g[p]=1)}return this._initted&&!this._pt&&d&&Ca(this),this},e.to=function(a,i){return new e(a,i,arguments[2])},e.from=function(a,i){return wa(1,arguments)},e.delayedCall=function(a,i,s,l){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:a,onComplete:i,onReverseComplete:i,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:l})},e.fromTo=function(a,i,s){return wa(2,arguments)},e.set=function(a,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(a,i)},e.killTweensOf=function(a,i,s){return Ve.killTweensOf(a,i,s)},e})(Na);Ct(Qe.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),bt("staggerTo,staggerFrom,staggerFromTo",function(t){Qe[t]=function(){var e=new ut,n=kl.call(arguments,0);return n.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,n)}});var Pl=function(e,n,r){return e[n]=r},ag=function(e,n,r){return e[n](r)},m1=function(e,n,r,a){return e[n](a.fp,r)},g1=function(e,n,r){return e.setAttribute(n,r)},Fl=function(e,n){return Xe(e[n])?ag:cl(e[n])&&e.setAttribute?g1:Pl},ig=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},_1=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},sg=function(e,n){var r=n._pt,a="";if(!e&&n.b)a=n.b;else if(e===1&&n.e)a=n.e;else{for(;r;)a=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+a,r=r._next;a+=n.c}n.set(n.t,n.p,a,n)},Ll=function(e,n){for(var r=n._pt;r;)r.r(e,r.d),r=r._next},b1=function(e,n,r,a){for(var i=this._pt,s;i;)s=i._next,i.p===a&&i.modifier(e,n,r),i=s},y1=function(e){for(var n=this._pt,r,a;n;)a=n._next,n.p===e&&!n.op||n.op===e?Xi(this,n,"_pt"):n.dep||(r=1),n=a;return!r},x1=function(e,n,r,a){a.mSet(e,n,a.m.call(a.tween,r,a.mt),a)},og=function(e){for(var n=e._pt,r,a,i,s;n;){for(r=n._next,a=i;a&&a.pr>n.pr;)a=a._next;(n._prev=a?a._prev:s)?n._prev._next=n:i=n,(n._next=a)?a._prev=n:s=n,n=r}e._pt=i},yt=(function(){function t(n,r,a,i,s,l,u,c,d){this.t=r,this.s=i,this.c=s,this.p=a,this.r=l||ig,this.d=u||this,this.set=c||Pl,this.pr=d||0,this._next=n,n&&(n._prev=this)}var e=t.prototype;return e.modifier=function(r,a,i){this.mSet=this.mSet||this.set,this.set=x1,this.m=r,this.mt=i,this.tween=a},t})();bt(yl+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return gl[t]=1}),St.TweenMax=St.TweenLite=Qe,St.TimelineLite=St.TimelineMax=ut,Ve=new ut({sortChildren:!1,defaults:hr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),wt.stringFilter=Km;var Vn=[],Qi={},v1=[],lg=0,w1=0,El=function(e){return(Qi[e]||v1).map(function(n){return n()})},Bl=function(){var e=Date.now(),n=[];e-lg>2&&(El("matchMediaInit"),Vn.forEach(function(r){var a=r.queries,i=r.conditions,s,l,u,c;for(l in a)s=Qt.matchMedia(a[l]).matches,s&&(u=1),s!==i[l]&&(i[l]=s,c=1);c&&(r.revert(),u&&n.push(r))}),El("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(a){return r.add(null,a)})}),lg=e,El("matchMedia"))},cg=(function(){function t(n,r){this.selector=r&&Cl(r),this.data=[],this._r=[],this.isReverted=!1,this.id=w1++,n&&this.add(n)}var e=t.prototype;return e.add=function(r,a,i){Xe(r)&&(i=a,a=r,r=Xe);var s=this,l=function(){var c=We,d=s.selector,f;return c&&c!==s&&c.data.push(s),i&&(s.selector=Cl(i)),We=s,f=a.apply(s,arguments),Xe(f)&&s._r.push(f),We=c,s.selector=d,s.isReverted=!1,f};return s.last=l,r===Xe?l(s,function(u){return s.add(null,u)}):r?s[r]=l:l},e.ignore=function(r){var a=We;We=null,r(this),We=a},e.getTweens=function(){var r=[];return this.data.forEach(function(a){return a instanceof t?r.push.apply(r,a.getTweens()):a instanceof Qe&&!(a.parent&&a.parent.data==="nested")&&r.push(a)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,a){var i=this;if(r?(function(){for(var l=i.getTweens(),u=i.data.length,c;u--;)c=i.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,f){return f.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),u=i.data.length;u--;)c=i.data[u],c instanceof ut?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Qe)&&c.revert&&c.revert(r);i._r.forEach(function(d){return d(r,i)}),i.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),a)for(var s=Vn.length;s--;)Vn[s].id===this.id&&Vn.splice(s,1)},e.revert=function(r){this.kill(r||{})},t})(),S1=(function(){function t(n){this.contexts=[],this.scope=n,We&&We.data.push(this)}var e=t.prototype;return e.add=function(r,a,i){Jt(r)||(r={matches:r});var s=new cg(0,i||this.scope),l=s.conditions={},u,c,d;We&&!s.selector&&(s.selector=We.selector),this.contexts.push(s),a=s.add("onMatch",a),s.queries=r;for(c in r)c==="all"?d=1:(u=Qt.matchMedia(r[c]),u&&(Vn.indexOf(s)<0&&Vn.push(s),(l[c]=u.matches)&&(d=1),u.addListener?u.addListener(Bl):u.addEventListener("change",Bl)));return d&&a(s,function(f){return s.add(null,f)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(a){return a.kill(r,!0)})},t})(),es={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(a){return Vm(a)})},timeline:function(e){return new ut(e)},getTweensOf:function(e,n){return Ve.getTweensOf(e,n)},getProperty:function(e,n,r,a){ot(e)&&(e=Pt(e)[0]);var i=zn(e||{}).get,s=r?Dm:Nm;return r==="native"&&(r=""),e&&(n?s((kt[n]&&kt[n].get||i)(e,n,r,a)):function(l,u,c){return s((kt[l]&&kt[l].get||i)(e,l,u,c))})},quickSetter:function(e,n,r){if(e=Pt(e),e.length>1){var a=e.map(function(d){return xt.quickSetter(d,n,r)}),i=a.length;return function(d){for(var f=i;f--;)a[f](d)}}e=e[0]||{};var s=kt[n],l=zn(e),u=l.harness&&(l.harness.aliases||{})[n]||n,c=s?function(d){var f=new s;yr._pt=0,f.init(e,r?d+r:d,yr,0,[e]),f.render(1,f),yr._pt&&Ll(1,yr)}:l.set(e,u);return s?c:function(d){return c(e,u,r?d+r:d,l,1)}},quickTo:function(e,n,r){var a,i=xt.to(e,Ct((a={},a[n]="+=0.1",a.paused=!0,a.stagger=0,a),r||{})),s=function(u,c,d){return i.resetTo(n,u,c,d)};return s.tween=i,s},isTweening:function(e){return Ve.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Un(e.ease,hr.ease)),Mm(hr,e||{})},config:function(e){return Mm(wt,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,a=e.plugins,i=e.defaults,s=e.extendTimeline;(a||"").split(",").forEach(function(l){return l&&!kt[l]&&!St[l]&&ya(n+" effect requires "+l+" plugin.")}),bl[n]=function(l,u,c){return r(Pt(l),Ct(u||{},i),c)},s&&(ut.prototype[n]=function(l,u,c){return this.add(bl[n](l,Jt(u)?u:(c=u)&&{},this),c)})},registerEase:function(e,n){Pe[e]=Un(n)},parseEase:function(e,n){return arguments.length?Un(e,n):Pe},getById:function(e){return Ve.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var r=new ut(e),a,i;for(r.smoothChildTiming=_t(e.smoothChildTiming),Ve.remove(r),r._dp=0,r._time=r._tTime=Ve._time,a=Ve._first;a;)i=a._next,(n||!(!a._dur&&a instanceof Qe&&a.vars.onComplete===a._targets[0]))&&en(r,a,a._start-a._delay),a=i;return en(Ve,r,0),r},context:function(e,n){return e?new cg(e,n):We},matchMedia:function(e){return new S1(e)},matchMediaRefresh:function(){return Vn.forEach(function(e){var n=e.conditions,r,a;for(a in n)n[a]&&(n[a]=!1,r=1);r&&e.revert()})||Bl()},addEventListener:function(e,n){var r=Qi[e]||(Qi[e]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(e,n){var r=Qi[e],a=r&&r.indexOf(n);a>=0&&r.splice(a,1)},utils:{wrap:t1,wrapYoyo:n1,distribute:Rm,random:Om,snap:Hm,normalize:e1,getUnit:ht,clamp:Kv,splitColor:Ym,toArray:Pt,selector:Cl,mapRange:Wm,pipe:Jv,unitize:Qv,interpolate:r1,shuffle:Am},install:wm,effects:bl,ticker:jt,updateRoot:ut.updateRoot,plugins:kt,globalTimeline:Ve,core:{PropTween:yt,globals:Sm,Tween:Qe,Timeline:ut,Animation:Na,getCache:zn,_removeLinkedListItem:Xi,reverting:function(){return ct},context:function(e){return e&&We&&(We.data.push(e),e._ctx=We),We},suppressOverwrites:function(e){return ol=e}}};bt("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return es[t]=Qe[t]}),jt.add(ut.updateRoot),yr=es.to({},{duration:0});var k1=function(e,n){for(var r=e._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},C1=function(e,n){var r=e._targets,a,i,s;for(a in n)for(i=r.length;i--;)s=e._ptLookup[i][a],s&&(s=s.d)&&(s._pt&&(s=k1(s,a)),s&&s.modifier&&s.modifier(n[a],e,r[i],a))},Al=function(e,n){return{name:e,headless:1,rawVars:1,init:function(a,i,s){s._onInit=function(l){var u,c;if(ot(i)&&(u={},bt(i,function(d){return u[d]=1}),i=u),n){u={};for(c in i)u[c]=n(i[c]);i=u}C1(l,i)}}}},xt=es.registerPlugin({name:"attr",init:function(e,n,r,a,i){var s,l,u;this.tween=r;for(s in n)u=e.getAttribute(s)||"",l=this.add(e,"setAttribute",(u||0)+"",n[s],a,i,0,0,s),l.op=s,l.b=u,this._props.push(s)},render:function(e,n){for(var r=n._pt;r;)ct?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,n){for(var r=n.length;r--;)this.add(e,r,e[r]||0,n[r],0,0,0,0,0,1)}},Al("roundProps",Tl),Al("modifiers"),Al("snap",Hm))||es;Qe.version=ut.version=xt.version="3.13.0",vm=1,ul()&&xr();var T1=Pe.Power0,j1=Pe.Power1,N1=Pe.Power2,D1=Pe.Power3,M1=Pe.Power4,$1=Pe.Linear,I1=Pe.Quad,P1=Pe.Cubic,F1=Pe.Quart,L1=Pe.Quint,E1=Pe.Strong,B1=Pe.Elastic,A1=Pe.Back,R1=Pe.SteppedEase,H1=Pe.Bounce,O1=Pe.Sine,z1=Pe.Expo,W1=Pe.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ug,Nn,vr,Rl,Yn,dg,Hl,U1=function(){return typeof window<"u"},hn={},qn=180/Math.PI,wr=Math.PI/180,Sr=Math.atan2,fg=1e8,Ol=/([A-Z])/g,G1=/(left|right|width|margin|padding|x)/i,V1=/[\s,\(]\S/,tn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},zl=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},Y1=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},q1=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},X1=function(e,n){var r=n.s+n.c*e;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},hg=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},pg=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},K1=function(e,n,r){return e.style[n]=r},Z1=function(e,n,r){return e.style.setProperty(n,r)},J1=function(e,n,r){return e._gsap[n]=r},Q1=function(e,n,r){return e._gsap.scaleX=e._gsap.scaleY=r},ew=function(e,n,r,a,i){var s=e._gsap;s.scaleX=s.scaleY=r,s.renderTransform(i,s)},tw=function(e,n,r,a,i){var s=e._gsap;s[n]=r,s.renderTransform(i,s)},Ye="transform",vt=Ye+"Origin",nw=function t(e,n){var r=this,a=this.target,i=a.style,s=a._gsap;if(e in hn&&i){if(this.tfm=this.tfm||{},e!=="transform")e=tn[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return r.tfm[l]=pn(a,l)}):this.tfm[e]=s.x?s[e]:pn(a,e),e===vt&&(this.tfm.zOrigin=s.zOrigin);else return tn.transform.split(",").forEach(function(l){return t.call(r,l,n)});if(this.props.indexOf(Ye)>=0)return;s.svg&&(this.svgo=a.getAttribute("data-svg-origin"),this.props.push(vt,n,"")),e=Ye}(i||n)&&this.props.push(e,n,i[e])},mg=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},rw=function(){var e=this.props,n=this.target,r=n.style,a=n._gsap,i,s;for(i=0;i<e.length;i+=3)e[i+1]?e[i+1]===2?n[e[i]](e[i+2]):n[e[i]]=e[i+2]:e[i+2]?r[e[i]]=e[i+2]:r.removeProperty(e[i].substr(0,2)==="--"?e[i]:e[i].replace(Ol,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)a[s]=this.tfm[s];a.svg&&(a.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),i=Hl(),(!i||!i.isStart)&&!r[Ye]&&(mg(r),a.zOrigin&&r[vt]&&(r[vt]+=" "+a.zOrigin+"px",a.zOrigin=0,a.renderTransform()),a.uncache=1)}},gg=function(e,n){var r={target:e,props:[],revert:rw,save:nw};return e._gsap||xt.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(a){return r.save(a)}),r},_g,Wl=function(e,n){var r=Nn.createElementNS?Nn.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Nn.createElement(e);return r&&r.style?r:Nn.createElement(e)},Ft=function t(e,n,r){var a=getComputedStyle(e);return a[n]||a.getPropertyValue(n.replace(Ol,"-$1").toLowerCase())||a.getPropertyValue(n)||!r&&t(e,kr(n)||n,1)||""},bg="O,Moz,ms,Ms,Webkit".split(","),kr=function(e,n,r){var a=n||Yn,i=a.style,s=5;if(e in i&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);s--&&!(bg[s]+e in i););return s<0?null:(s===3?"ms":s>=0?bg[s]:"")+e},Ul=function(){U1()&&window.document&&(ug=window,Nn=ug.document,vr=Nn.documentElement,Yn=Wl("div")||{style:{}},Wl("div"),Ye=kr(Ye),vt=Ye+"Origin",Yn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_g=!!kr("perspective"),Hl=xt.core.reverting,Rl=1)},yg=function(e){var n=e.ownerSVGElement,r=Wl("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),a=e.cloneNode(!0),i;a.style.display="block",r.appendChild(a),vr.appendChild(r);try{i=a.getBBox()}catch{}return r.removeChild(a),vr.removeChild(r),i},xg=function(e,n){for(var r=n.length;r--;)if(e.hasAttribute(n[r]))return e.getAttribute(n[r])},vg=function(e){var n,r;try{n=e.getBBox()}catch{n=yg(e),r=1}return n&&(n.width||n.height)||r||(n=yg(e)),n&&!n.width&&!n.x&&!n.y?{x:+xg(e,["x","cx","x1"])||0,y:+xg(e,["y","cy","y1"])||0,width:0,height:0}:n},wg=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&vg(e))},Xn=function(e,n){if(n){var r=e.style,a;n in hn&&n!==vt&&(n=Ye),r.removeProperty?(a=n.substr(0,2),(a==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(a==="--"?n:n.replace(Ol,"-$1").toLowerCase())):r.removeAttribute(n)}},Dn=function(e,n,r,a,i,s){var l=new yt(e._pt,n,r,0,1,s?pg:hg);return e._pt=l,l.b=a,l.e=i,e._props.push(r),l},Sg={deg:1,rad:1,turn:1},aw={grid:1,flex:1},Mn=function t(e,n,r,a){var i=parseFloat(r)||0,s=(r+"").trim().substr((i+"").length)||"px",l=Yn.style,u=G1.test(n),c=e.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(u?"Width":"Height"),f=100,m=a==="px",g=a==="%",y,p,h,_;if(a===s||!i||Sg[a]||Sg[s])return i;if(s!=="px"&&!m&&(i=t(e,n,r,"px")),_=e.getCTM&&wg(e),(g||s==="%")&&(hn[n]||~n.indexOf("adius")))return y=_?e.getBBox()[u?"width":"height"]:e[d],Je(g?i/y*f:i/100*y);if(l[u?"width":"height"]=f+(m?s:a),p=a!=="rem"&&~n.indexOf("adius")||a==="em"&&e.appendChild&&!c?e:e.parentNode,_&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===Nn||!p.appendChild)&&(p=Nn.body),h=p._gsap,h&&g&&h.width&&u&&h.time===jt.time&&!h.uncache)return Je(i/h.width*f);if(g&&(n==="height"||n==="width")){var N=e.style[n];e.style[n]=f+a,y=e[d],N?e.style[n]=N:Xn(e,n)}else(g||s==="%")&&!aw[Ft(p,"display")]&&(l.position=Ft(e,"position")),p===e&&(l.position="static"),p.appendChild(Yn),y=Yn[d],p.removeChild(Yn),l.position="absolute";return u&&g&&(h=zn(p),h.time=jt.time,h.width=p[d]),Je(m?y*i/f:y&&i?f/y*i:0)},pn=function(e,n,r,a){var i;return Rl||Ul(),n in tn&&n!=="transform"&&(n=tn[n],~n.indexOf(",")&&(n=n.split(",")[0])),hn[n]&&n!=="transform"?(i=$a(e,a),i=n!=="transformOrigin"?i[n]:i.svg?i.origin:ns(Ft(e,vt))+" "+i.zOrigin+"px"):(i=e.style[n],(!i||i==="auto"||a||~(i+"").indexOf("calc("))&&(i=ts[n]&&ts[n](e,n,r)||Ft(e,n)||Tm(e,n)||(n==="opacity"?1:0))),r&&!~(i+"").trim().indexOf(" ")?Mn(e,n,i,r)+r:i},iw=function(e,n,r,a){if(!r||r==="none"){var i=kr(n,e,1),s=i&&Ft(e,i,1);s&&s!==r?(n=i,r=s):n==="borderColor"&&(r=Ft(e,"borderTopColor"))}var l=new yt(this._pt,e.style,n,0,1,sg),u=0,c=0,d,f,m,g,y,p,h,_,N,j,w,P;if(l.b=r,l.e=a,r+="",a+="",a.substring(0,6)==="var(--"&&(a=Ft(e,a.substring(4,a.indexOf(")")))),a==="auto"&&(p=e.style[n],e.style[n]=a,a=Ft(e,n)||a,p?e.style[n]=p:Xn(e,n)),d=[r,a],Km(d),r=d[0],a=d[1],m=r.match(pr)||[],P=a.match(pr)||[],P.length){for(;f=pr.exec(a);)h=f[0],N=a.substring(u,f.index),y?y=(y+1)%5:(N.substr(-5)==="rgba("||N.substr(-5)==="hsla(")&&(y=1),h!==(p=m[c++]||"")&&(g=parseFloat(p)||0,w=p.substr((g+"").length),h.charAt(1)==="="&&(h=mr(g,h)+w),_=parseFloat(h),j=h.substr((_+"").length),u=pr.lastIndex-j.length,j||(j=j||wt.units[n]||w,u===a.length&&(a+=j,l.e+=j)),w!==j&&(g=Mn(e,n,p,j)||0),l._pt={_next:l._pt,p:N||c===1?N:",",s:g,c:_-g,m:y&&y<4||n==="zIndex"?Math.round:0});l.c=u<a.length?a.substring(u,a.length):""}else l.r=n==="display"&&a==="none"?pg:hg;return ym.test(a)&&(l.e=0),this._pt=l,l},kg={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},sw=function(e){var n=e.split(" "),r=n[0],a=n[1]||"50%";return(r==="top"||r==="bottom"||a==="left"||a==="right")&&(e=r,r=a,a=e),n[0]=kg[r]||r,n[1]=kg[a]||a,n.join(" ")},ow=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,a=r.style,i=n.u,s=r._gsap,l,u,c;if(i==="all"||i===!0)a.cssText="",u=1;else for(i=i.split(","),c=i.length;--c>-1;)l=i[c],hn[l]&&(u=1,l=l==="transformOrigin"?vt:Ye),Xn(r,l);u&&(Xn(r,Ye),s&&(s.svg&&r.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",$a(r,1),s.uncache=1,mg(a)))}},ts={clearProps:function(e,n,r,a,i){if(i.data!=="isFromStart"){var s=e._pt=new yt(e._pt,n,r,0,0,ow);return s.u=a,s.pr=-10,s.tween=i,e._props.push(r),1}}},Ma=[1,0,0,1,0,0],Cg={},Tg=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},jg=function(e){var n=Ft(e,Ye);return Tg(n)?Ma:n.substr(7).match(bm).map(Je)},Gl=function(e,n){var r=e._gsap||zn(e),a=e.style,i=jg(e),s,l,u,c;return r.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,i=[u.a,u.b,u.c,u.d,u.e,u.f],i.join(",")==="1,0,0,1,0,0"?Ma:i):(i===Ma&&!e.offsetParent&&e!==vr&&!r.svg&&(u=a.display,a.display="block",s=e.parentNode,(!s||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,l=e.nextElementSibling,vr.appendChild(e)),i=jg(e),u?a.display=u:Xn(e,"display"),c&&(l?s.insertBefore(e,l):s?s.appendChild(e):vr.removeChild(e))),n&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},Vl=function(e,n,r,a,i,s){var l=e._gsap,u=i||Gl(e,!0),c=l.xOrigin||0,d=l.yOrigin||0,f=l.xOffset||0,m=l.yOffset||0,g=u[0],y=u[1],p=u[2],h=u[3],_=u[4],N=u[5],j=n.split(" "),w=parseFloat(j[0])||0,P=parseFloat(j[1])||0,C,M,S,x;r?u!==Ma&&(M=g*h-y*p)&&(S=w*(h/M)+P*(-p/M)+(p*N-h*_)/M,x=w*(-y/M)+P*(g/M)-(g*N-y*_)/M,w=S,P=x):(C=vg(e),w=C.x+(~j[0].indexOf("%")?w/100*C.width:w),P=C.y+(~(j[1]||j[0]).indexOf("%")?P/100*C.height:P)),a||a!==!1&&l.smooth?(_=w-c,N=P-d,l.xOffset=f+(_*g+N*p)-_,l.yOffset=m+(_*y+N*h)-N):l.xOffset=l.yOffset=0,l.xOrigin=w,l.yOrigin=P,l.smooth=!!a,l.origin=n,l.originIsAbsolute=!!r,e.style[vt]="0px 0px",s&&(Dn(s,l,"xOrigin",c,w),Dn(s,l,"yOrigin",d,P),Dn(s,l,"xOffset",f,l.xOffset),Dn(s,l,"yOffset",m,l.yOffset)),e.setAttribute("data-svg-origin",w+" "+P)},$a=function(e,n){var r=e._gsap||new eg(e);if("x"in r&&!n&&!r.uncache)return r;var a=e.style,i=r.scaleX<0,s="px",l="deg",u=getComputedStyle(e),c=Ft(e,vt)||"0",d,f,m,g,y,p,h,_,N,j,w,P,C,M,S,x,$,k,v,A,D,I,T,E,ae,z,H,U,O,re,G,ce;return d=f=m=p=h=_=N=j=w=0,g=y=1,r.svg=!!(e.getCTM&&wg(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(a[Ye]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[Ye]!=="none"?u[Ye]:"")),a.scale=a.rotate=a.translate="none"),M=Gl(e,r.svg),r.svg&&(r.uncache?(ae=e.getBBox(),c=r.xOrigin-ae.x+"px "+(r.yOrigin-ae.y)+"px",E=""):E=!n&&e.getAttribute("data-svg-origin"),Vl(e,E||c,!!E||r.originIsAbsolute,r.smooth!==!1,M)),P=r.xOrigin||0,C=r.yOrigin||0,M!==Ma&&(k=M[0],v=M[1],A=M[2],D=M[3],d=I=M[4],f=T=M[5],M.length===6?(g=Math.sqrt(k*k+v*v),y=Math.sqrt(D*D+A*A),p=k||v?Sr(v,k)*qn:0,N=A||D?Sr(A,D)*qn+p:0,N&&(y*=Math.abs(Math.cos(N*wr))),r.svg&&(d-=P-(P*k+C*A),f-=C-(P*v+C*D))):(ce=M[6],re=M[7],H=M[8],U=M[9],O=M[10],G=M[11],d=M[12],f=M[13],m=M[14],S=Sr(ce,O),h=S*qn,S&&(x=Math.cos(-S),$=Math.sin(-S),E=I*x+H*$,ae=T*x+U*$,z=ce*x+O*$,H=I*-$+H*x,U=T*-$+U*x,O=ce*-$+O*x,G=re*-$+G*x,I=E,T=ae,ce=z),S=Sr(-A,O),_=S*qn,S&&(x=Math.cos(-S),$=Math.sin(-S),E=k*x-H*$,ae=v*x-U*$,z=A*x-O*$,G=D*$+G*x,k=E,v=ae,A=z),S=Sr(v,k),p=S*qn,S&&(x=Math.cos(S),$=Math.sin(S),E=k*x+v*$,ae=I*x+T*$,v=v*x-k*$,T=T*x-I*$,k=E,I=ae),h&&Math.abs(h)+Math.abs(p)>359.9&&(h=p=0,_=180-_),g=Je(Math.sqrt(k*k+v*v+A*A)),y=Je(Math.sqrt(T*T+ce*ce)),S=Sr(I,T),N=Math.abs(S)>2e-4?S*qn:0,w=G?1/(G<0?-G:G):0),r.svg&&(E=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!Tg(Ft(e,Ye)),E&&e.setAttribute("transform",E))),Math.abs(N)>90&&Math.abs(N)<270&&(i?(g*=-1,N+=p<=0?180:-180,p+=p<=0?180:-180):(y*=-1,N+=N<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+s,r.y=f-((r.yPercent=f&&(!n&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+s,r.z=m+s,r.scaleX=Je(g),r.scaleY=Je(y),r.rotation=Je(p)+l,r.rotationX=Je(h)+l,r.rotationY=Je(_)+l,r.skewX=N+l,r.skewY=j+l,r.transformPerspective=w+s,(r.zOrigin=parseFloat(c.split(" ")[2])||!n&&r.zOrigin||0)&&(a[vt]=ns(c)),r.xOffset=r.yOffset=0,r.force3D=wt.force3D,r.renderTransform=r.svg?cw:_g?Ng:lw,r.uncache=0,r},ns=function(e){return(e=e.split(" "))[0]+" "+e[1]},Yl=function(e,n,r){var a=ht(n);return Je(parseFloat(n)+parseFloat(Mn(e,"x",r+"px",a)))+a},lw=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,Ng(e,n)},Kn="0deg",Ia="0px",Zn=") ",Ng=function(e,n){var r=n||this,a=r.xPercent,i=r.yPercent,s=r.x,l=r.y,u=r.z,c=r.rotation,d=r.rotationY,f=r.rotationX,m=r.skewX,g=r.skewY,y=r.scaleX,p=r.scaleY,h=r.transformPerspective,_=r.force3D,N=r.target,j=r.zOrigin,w="",P=_==="auto"&&e&&e!==1||_===!0;if(j&&(f!==Kn||d!==Kn)){var C=parseFloat(d)*wr,M=Math.sin(C),S=Math.cos(C),x;C=parseFloat(f)*wr,x=Math.cos(C),s=Yl(N,s,M*x*-j),l=Yl(N,l,-Math.sin(C)*-j),u=Yl(N,u,S*x*-j+j)}h!==Ia&&(w+="perspective("+h+Zn),(a||i)&&(w+="translate("+a+"%, "+i+"%) "),(P||s!==Ia||l!==Ia||u!==Ia)&&(w+=u!==Ia||P?"translate3d("+s+", "+l+", "+u+") ":"translate("+s+", "+l+Zn),c!==Kn&&(w+="rotate("+c+Zn),d!==Kn&&(w+="rotateY("+d+Zn),f!==Kn&&(w+="rotateX("+f+Zn),(m!==Kn||g!==Kn)&&(w+="skew("+m+", "+g+Zn),(y!==1||p!==1)&&(w+="scale("+y+", "+p+Zn),N.style[Ye]=w||"translate(0, 0)"},cw=function(e,n){var r=n||this,a=r.xPercent,i=r.yPercent,s=r.x,l=r.y,u=r.rotation,c=r.skewX,d=r.skewY,f=r.scaleX,m=r.scaleY,g=r.target,y=r.xOrigin,p=r.yOrigin,h=r.xOffset,_=r.yOffset,N=r.forceCSS,j=parseFloat(s),w=parseFloat(l),P,C,M,S,x;u=parseFloat(u),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,u+=d),u||c?(u*=wr,c*=wr,P=Math.cos(u)*f,C=Math.sin(u)*f,M=Math.sin(u-c)*-m,S=Math.cos(u-c)*m,c&&(d*=wr,x=Math.tan(c-d),x=Math.sqrt(1+x*x),M*=x,S*=x,d&&(x=Math.tan(d),x=Math.sqrt(1+x*x),P*=x,C*=x)),P=Je(P),C=Je(C),M=Je(M),S=Je(S)):(P=f,S=m,C=M=0),(j&&!~(s+"").indexOf("px")||w&&!~(l+"").indexOf("px"))&&(j=Mn(g,"x",s,"px"),w=Mn(g,"y",l,"px")),(y||p||h||_)&&(j=Je(j+y-(y*P+p*M)+h),w=Je(w+p-(y*C+p*S)+_)),(a||i)&&(x=g.getBBox(),j=Je(j+a/100*x.width),w=Je(w+i/100*x.height)),x="matrix("+P+","+C+","+M+","+S+","+j+","+w+")",g.setAttribute("transform",x),N&&(g.style[Ye]=x)},uw=function(e,n,r,a,i){var s=360,l=ot(i),u=parseFloat(i)*(l&&~i.indexOf("rad")?qn:1),c=u-a,d=a+c+"deg",f,m;return l&&(f=i.split("_")[1],f==="short"&&(c%=s,c!==c%(s/2)&&(c+=c<0?s:-s)),f==="cw"&&c<0?c=(c+s*fg)%s-~~(c/s)*s:f==="ccw"&&c>0&&(c=(c-s*fg)%s-~~(c/s)*s)),e._pt=m=new yt(e._pt,n,r,a,c,Y1),m.e=d,m.u="deg",e._props.push(r),m},Dg=function(e,n){for(var r in n)e[r]=n[r];return e},dw=function(e,n,r){var a=Dg({},r._gsap),i="perspective,force3D,transformOrigin,svgOrigin",s=r.style,l,u,c,d,f,m,g,y;a.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),s[Ye]=n,l=$a(r,1),Xn(r,Ye),r.setAttribute("transform",c)):(c=getComputedStyle(r)[Ye],s[Ye]=n,l=$a(r,1),s[Ye]=c);for(u in hn)c=a[u],d=l[u],c!==d&&i.indexOf(u)<0&&(g=ht(c),y=ht(d),f=g!==y?Mn(r,u,c,y):parseFloat(c),m=parseFloat(d),e._pt=new yt(e._pt,l,u,f,m-f,zl),e._pt.u=y||0,e._props.push(u));Dg(l,a)};bt("padding,margin,Width,Radius",function(t,e){var n="Top",r="Right",a="Bottom",i="Left",s=(e<3?[n,r,a,i]:[n+i,n+r,a+r,a+i]).map(function(l){return e<2?t+l:"border"+l+t});ts[e>1?"border"+t:t]=function(l,u,c,d,f){var m,g;if(arguments.length<4)return m=s.map(function(y){return pn(l,y,c)}),g=m.join(" "),g.split(m[0]).length===5?m[0]:g;m=(d+"").split(" "),g={},s.forEach(function(y,p){return g[y]=m[p]=m[p]||m[(p-1)/2|0]}),l.init(u,g,f)}});var ql={name:"css",register:Ul,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,r,a,i){var s=this._props,l=e.style,u=r.vars.startAt,c,d,f,m,g,y,p,h,_,N,j,w,P,C,M,S;Rl||Ul(),this.styles=this.styles||gg(e),S=this.styles.props,this.tween=r;for(p in n)if(p!=="autoRound"&&(d=n[p],!(kt[p]&&tg(p,n,r,a,e,i)))){if(g=typeof d,y=ts[p],g==="function"&&(d=d.call(r,a,e,i),g=typeof d),g==="string"&&~d.indexOf("random(")&&(d=ka(d)),y)y(this,e,p,d,r)&&(M=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(p)+"").trim(),d+="",Tn.lastIndex=0,Tn.test(c)||(h=ht(c),_=ht(d)),_?h!==_&&(c=Mn(e,p,c,_)+_):h&&(d+=h),this.add(l,"setProperty",c,d,a,i,0,0,p),s.push(p),S.push(p,0,l[p]);else if(g!=="undefined"){if(u&&p in u?(c=typeof u[p]=="function"?u[p].call(r,a,e,i):u[p],ot(c)&&~c.indexOf("random(")&&(c=ka(c)),ht(c+"")||c==="auto"||(c+=wt.units[p]||ht(pn(e,p))||""),(c+"").charAt(1)==="="&&(c=pn(e,p))):c=pn(e,p),m=parseFloat(c),N=g==="string"&&d.charAt(1)==="="&&d.substr(0,2),N&&(d=d.substr(2)),f=parseFloat(d),p in tn&&(p==="autoAlpha"&&(m===1&&pn(e,"visibility")==="hidden"&&f&&(m=0),S.push("visibility",0,l.visibility),Dn(this,l,"visibility",m?"inherit":"hidden",f?"inherit":"hidden",!f)),p!=="scale"&&p!=="transform"&&(p=tn[p],~p.indexOf(",")&&(p=p.split(",")[0]))),j=p in hn,j){if(this.styles.save(p),g==="string"&&d.substring(0,6)==="var(--"&&(d=Ft(e,d.substring(4,d.indexOf(")"))),f=parseFloat(d)),w||(P=e._gsap,P.renderTransform&&!n.parseTransform||$a(e,n.parseTransform),C=n.smoothOrigin!==!1&&P.smooth,w=this._pt=new yt(this._pt,l,Ye,0,1,P.renderTransform,P,0,-1),w.dep=1),p==="scale")this._pt=new yt(this._pt,P,"scaleY",P.scaleY,(N?mr(P.scaleY,N+f):f)-P.scaleY||0,zl),this._pt.u=0,s.push("scaleY",p),p+="X";else if(p==="transformOrigin"){S.push(vt,0,l[vt]),d=sw(d),P.svg?Vl(e,d,0,C,0,this):(_=parseFloat(d.split(" ")[2])||0,_!==P.zOrigin&&Dn(this,P,"zOrigin",P.zOrigin,_),Dn(this,l,p,ns(c),ns(d)));continue}else if(p==="svgOrigin"){Vl(e,d,1,C,0,this);continue}else if(p in Cg){uw(this,P,p,m,N?mr(m,N+d):d);continue}else if(p==="smoothOrigin"){Dn(this,P,"smooth",P.smooth,d);continue}else if(p==="force3D"){P[p]=d;continue}else if(p==="transform"){dw(this,d,e);continue}}else p in l||(p=kr(p)||p);if(j||(f||f===0)&&(m||m===0)&&!V1.test(d)&&p in l)h=(c+"").substr((m+"").length),f||(f=0),_=ht(d)||(p in wt.units?wt.units[p]:h),h!==_&&(m=Mn(e,p,c,_)),this._pt=new yt(this._pt,j?P:l,p,m,(N?mr(m,N+f):f)-m,!j&&(_==="px"||p==="zIndex")&&n.autoRound!==!1?X1:zl),this._pt.u=_||0,h!==_&&_!=="%"&&(this._pt.b=c,this._pt.r=q1);else if(p in l)iw.call(this,e,p,c,N?N+d:d);else if(p in e)this.add(e,p,c||e[p],N?N+d:d,a,i);else if(p!=="parseTransform"){ml(p,d);continue}j||(p in l?S.push(p,0,l[p]):typeof e[p]=="function"?S.push(p,2,e[p]()):S.push(p,1,c||e[p])),s.push(p)}}M&&og(this)},render:function(e,n){if(n.tween._time||!Hl())for(var r=n._pt;r;)r.r(e,r.d),r=r._next;else n.styles.revert()},get:pn,aliases:tn,getSetter:function(e,n,r){var a=tn[n];return a&&a.indexOf(",")<0&&(n=a),n in hn&&n!==vt&&(e._gsap.x||pn(e,"x"))?r&&dg===r?n==="scale"?Q1:J1:(dg=r||{})&&(n==="scale"?ew:tw):e.style&&!cl(e.style[n])?K1:~n.indexOf("-")?Z1:Fl(e,n)},core:{_removeProperty:Xn,_getMatrix:Gl}};xt.utils.checkPrefix=kr,xt.core.getStyleSaver=gg,(function(t,e,n,r){var a=bt(t+","+e+","+n,function(i){hn[i]=1});bt(e,function(i){wt.units[i]="deg",Cg[i]=1}),tn[a[13]]=t+","+e,bt(r,function(i){var s=i.split(":");tn[s[1]]=a[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),bt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){wt.units[t]="px"}),xt.registerPlugin(ql);var Xl=xt.registerPlugin(ql)||xt,fw=Xl.core.Tween;const hw=Object.freeze(Object.defineProperty({__proto__:null,Back:A1,Bounce:H1,CSSPlugin:ql,Circ:W1,Cubic:P1,Elastic:B1,Expo:z1,Linear:$1,Power0:T1,Power1:j1,Power2:N1,Power3:D1,Power4:M1,Quad:I1,Quart:F1,Quint:L1,Sine:O1,SteppedEase:R1,Strong:E1,TimelineLite:ut,TimelineMax:ut,TweenLite:Qe,TweenMax:fw,default:Xl,gsap:Xl},Symbol.toStringTag,{value:"Module"}));b.Account=cc,b.ActionLink=zg,b.AdaptiveDataGrid=zs,b.AnimationDurationFast=Id,b.AnimationDurationNormal=Pd,b.AnimationDurationSlow=Fd,b.AnimationEasingBounce=Ad,b.AnimationEasingEaseIn=Ld,b.AnimationEasingEaseInOut=Bd,b.AnimationEasingEaseOut=Ed,b.AppointmentCard=Rs,b.AreaSeriesPrimitive=jx,b.AriaDataGrid=ku,b.AriaTabsDataGrid=si,b.AriaTabsDataGridAdaptive=zs,b.Axis=Zs,b.BackLink=Ea,b.BandScalesProvider=Dx,b.BarSeriesPrimitive=Nx,b.BorderColorCard=bo,b.BorderColorCardHover=yo,b.BorderColorDefault=go,b.BorderColorError=xo,b.BorderColorForm=_o,b.BorderRadiusLarge=Qd,b.BorderRadiusMedium=Jd,b.BorderRadiusNone=Kd,b.BorderRadiusSmall=Zd,b.BorderWidthCardBottom=Vd,b.BorderWidthDefault=Wd,b.BorderWidthFormElement=Ud,b.BorderWidthFormElementError=Gd,b.BorderWidthPanel=Yd,b.BorderWidthTableCell=Xd,b.BorderWidthTableHeader=qd,b.Breadcrumb=pu,b.BreakpointDesktop=Fp,b.BreakpointLargeDesktop=Lp,b.BreakpointMobile=Ip,b.BreakpointTablet=Pp,b.Button=at,b.ButtonBorderRadius=Dh,b.ButtonBorderWidth=Nh,b.ButtonPrimaryBackgroundActive=gh,b.ButtonPrimaryBackgroundDefault=ph,b.ButtonPrimaryBackgroundDisabled=_h,b.ButtonPrimaryBackgroundHover=mh,b.ButtonPrimaryBorderDefault=xh,b.ButtonPrimaryBorderFocus=vh,b.ButtonPrimaryTextDefault=bh,b.ButtonPrimaryTextDisabled=yh,b.ButtonSecondaryBackgroundActive=Ch,b.ButtonSecondaryBackgroundDefault=wh,b.ButtonSecondaryBackgroundHover=kh,b.ButtonSecondaryBackgroundSolid=Sh,b.ButtonSecondaryBorderDefault=jh,b.ButtonSecondaryTextDefault=Th,b.ButtonShadowSize=Mh,b.ButtonSpacingPaddingHorizontalDesktop=zo,b.ButtonSpacingPaddingHorizontalMobile=Ho,b.ButtonSpacingPaddingVerticalDesktop=Oo,b.ButtonSpacingPaddingVerticalMobile=Ro,b.ButtonTypographyWeight=$h,b.Card=Ls,b.CardBackgroundDefault=Ih,b.CardBorderBottom=Lh,b.CardBorderDefault=Ph,b.CardBorderHover=Fh,b.CardBorderWidthBottom=Hh,b.CardBorderWidthDefault=Rh,b.CardGroup=Rb,b.CardGroupItem=Hb,b.CardShadowDefault=Oh,b.CardShadowHover=zh,b.CardSpacingHeadingMargin=Go,b.CardSpacingPaddingDesktop=Uo,b.CardSpacingPaddingMobile=Wo,b.CardTextDescription=Bh,b.CardTextHeading=Eh,b.CardTextLink=Ah,b.CareCard=Ob,b.CharacterCount=Kg,b.ChartEnhancer=$x,b.ChartNoScript=Mx,b.ChartRoot=id,b.Checkbox=uc,b.Checkboxes=dc,b.ColorBorderDefault=df,b.ColorBorderSecondary=ff,b.ColorButtonLoginActive=Rf,b.ColorButtonLoginBackground=Bf,b.ColorButtonLoginHover=Af,b.ColorButtonLoginShadow=Hf,b.ColorButtonPrimaryActive=yf,b.ColorButtonPrimaryBackground=gf,b.ColorButtonPrimaryHover=bf,b.ColorButtonPrimaryShadow=xf,b.ColorButtonPrimaryText=_f,b.ColorButtonReverseActive=$f,b.ColorButtonReverseBackground=Nf,b.ColorButtonReverseHover=Mf,b.ColorButtonReverseShadow=If,b.ColorButtonReverseText=Df,b.ColorButtonSecondaryActive=Tf,b.ColorButtonSecondaryBackground=vf,b.ColorButtonSecondaryBackgroundSolid=wf,b.ColorButtonSecondaryBorder=Sf,b.ColorButtonSecondaryHover=Cf,b.ColorButtonSecondaryShadow=jf,b.ColorButtonSecondaryText=kf,b.ColorButtonWarningActive=Lf,b.ColorButtonWarningBackground=Pf,b.ColorButtonWarningHover=Ff,b.ColorButtonWarningShadow=Ef,b.ColorError=hf,b.ColorFocusBackground=cf,b.ColorFocusText=uf,b.ColorFormBackground=mf,b.ColorFormBorder=pf,b.ColorGrey1=Fo,b.ColorGrey2=Lo,b.ColorGrey3=Eo,b.ColorGrey4=Bo,b.ColorGrey5=Ao,b.ColorLinkActive=of,b.ColorLinkDefault=af,b.ColorLinkHover=sf,b.ColorLinkVisited=lf,b.ColorPrimaryBlack=So,b.ColorPrimaryBlue=vo,b.ColorPrimaryDarkPink=To,b.ColorPrimaryGreen=ko,b.ColorPrimaryPurple=Co,b.ColorPrimaryRed=jo,b.ColorPrimaryWhite=wo,b.ColorPrimaryYellow=No,b.ColorSecondaryAquaGreen=Io,b.ColorSecondaryOrange=$o,b.ColorSecondaryPaleYellow=Do,b.ColorSecondaryPink=Po,b.ColorSecondaryWarmYellow=Mo,b.ColorTextPrimary=ef,b.ColorTextPrint=rf,b.ColorTextReverse=nf,b.ColorTextSecondary=tf,b.Column=Qn,b.ComponentBlur=ch,b.ComponentBreadcrumbChevronMarginLeft=th,b.ComponentBreadcrumbChevronMarginRight=nh,b.ComponentBreadcrumbPaddingTopDesktop=ah,b.ComponentBreadcrumbPaddingTopMobile=rh,b.ComponentButtonPaddingDesktopHorizontal=Uf,b.ComponentButtonPaddingDesktopVertical=Wf,b.ComponentButtonPaddingMobileHorizontal=zf,b.ComponentButtonPaddingMobileVertical=Of,b.ComponentButtonShadowSize=Gf,b.ComponentCardHeadingMargin=Jf,b.ComponentCardPaddingDesktop=Zf,b.ComponentCardPaddingMobile=Kf,b.ComponentDetails=dh,b.ComponentExpander=fh,b.ComponentFormCheckboxLabelPadding=Xf,b.ComponentFormCheckboxSize=qf,b.ComponentFormInputMinHeight=Vf,b.ComponentFormInputPadding=Yf,b.ComponentLink=uh,b.ComponentPagination=hh,b.ComponentPanelPaddingDesktop=eh,b.ComponentPanelPaddingMobile=Qf,b.ComponentSpread=lh,b.ComponentSummaryListCellPaddingHorizontal=sh,b.ComponentSummaryListCellPaddingVertical=ih,b.ComponentSummaryListRowMargin=oh,b.Container=ls,b.ContentsList=Ab,b.DEFAULT_FONT_CONFIG=sl,b.DashboardSummaryGrid=ry,b.DateInput=u0,b.Details=bu,b.DoDontList=yu,b.ElevationHigh=pm,b.ElevationLow=fm,b.ElevationMedium=hm,b.ElevationNone=dm,b.ErrorMessage=us,b.ErrorSummary=c0,b.Expander=xu,b.FRUTIGER_FONT_FILES=mt,b.Fieldset=Ra,b.FocusOutlineOffset=om,b.FocusOutlineStyle=lm,b.FocusOutlineWidth=sm,b.FocusShadowButton=um,b.FocusShadowInput=cm,b.FontFamilyBase=Vr,b.FontFamilyFallback=Yr,b.FontFamilyPrint=qr,b.FontLineHeightBase=zi,b.FontSize14Mobile=Jr,b.FontSize14Print=ea,b.FontSize14Tablet=Qr,b.FontSize16Mobile=ta,b.FontSize16Print=ra,b.FontSize16Tablet=na,b.FontSize19Mobile=aa,b.FontSize19Print=sa,b.FontSize19Tablet=ia,b.FontSize22Mobile=oa,b.FontSize22Print=ca,b.FontSize22Tablet=la,b.FontSize26Mobile=ua,b.FontSize26Print=fa,b.FontSize26Tablet=da,b.FontSize36Mobile=ha,b.FontSize36Print=ma,b.FontSize36Tablet=pa,b.FontSize48Mobile=ga,b.FontSize48Print=ba,b.FontSize48Tablet=_a,b.FontSizeBase=Oi,b.FontWeightBold=Kr,b.FontWeightLight=Zr,b.FontWeightNormal=Xr,b.Footer=ds,b.FormBorderRadius=lp,b.FormBorderWidthDefault=sp,b.FormBorderWidthError=op,b.FormErrorTextDefault=rp,b.FormErrorTypographyWeight=ap,b.FormHintTextDefault=ip,b.FormInputBackgroundDefault=Wh,b.FormInputBackgroundDisabled=Gh,b.FormInputBackgroundError=Vh,b.FormInputBackgroundFocus=Uh,b.FormInputBorderDefault=Yh,b.FormInputBorderDisabled=Kh,b.FormInputBorderError=Xh,b.FormInputBorderFocus=qh,b.FormInputTextDefault=Zh,b.FormInputTextDisabled=Qh,b.FormInputTextPlaceholder=Jh,b.FormLabelTextDefault=ep,b.FormLabelTextRequired=tp,b.FormLabelTypographyWeight=np,b.FormSpacingCheckboxLabelPadding=Xo,b.FormSpacingCheckboxSize=qo,b.FormSpacingInputMinHeight=Yo,b.FormSpacingInputPadding=Vo,b.GanttChart=Eb,b.Grid=Ha,b.GridGutter=Bp,b.GridGutterHalf=Ap,b.GridLines=od,b.GridPageWidth=Ep,b.Header=Oa,b.HeaderSSR=g0,b.HeaderSearch=bc,b.HeaderStatic=Oa,b.Heading=Bt,b.HeadingsNhsukHeadingL=Wt,b.HeadingsNhsukHeadingM=Ut,b.HeadingsNhsukHeadingS=Gt,b.HeadingsNhsukHeadingXl=zt,b.HeadingsNhsukHeadingXs=Vt,b.Hero=xc,b.Hint=os,b.Images=Jb,b.Input=Ba,b.InsetText=zb,b.Label=Aa,b.LayoutColumnActions=$p,b.LayoutColumnFull=jp,b.LayoutColumnHalf=Np,b.LayoutColumnQuarter=Mp,b.LayoutColumnThird=Dp,b.LayoutContainerMaxWidth=Tp,b.Legend=Tx,b.LineScalesProvider=sd,b.LineSeriesPrimitive=_d,b.List=mc,b.MainWrapper=cs,b.MedicationCard=Hs,b.MetricCard=Ix,b.NHSBodyText=pv,b.NHSBodyTextLarge=mv,b.NHSBodyTextSmall=gv,b.NHSHeading1=cv,b.NHSHeading2=uv,b.NHSHeading3=dv,b.NHSHeading4=fv,b.NHSHeading5=hv,b.NHSLedeText=_v,b.NHSLedeTextSmall=bv,b.NHSThemeProvider=m0,b.NHS_FALLBACK_FONT_STACK=Iv,b.NHS_FONT_STACK=$v,b.NavigationSplitView=zu,b.PageTemplate=Py,b.Pagination=Bb,b.Panel=mu,b.ParagraphsBody=Yt,b.ParagraphsBodyLarge=qt,b.ParagraphsBodySmall=Xt,b.ParagraphsLedeText=Kt,b.ParagraphsLedeTextSmall=Zt,b.PatientCard=As,b.ProductRoadmap=Uu,b.Radios=Zg,b.RadiosServer=Jg,b.ResponsiveDataGrid=zs,b.ResponsiveDataGridDemo=Iy,b.Row=bn,b.SPC=sv,b.SPCChart=$d,b.Select=Dr,b.SelectOption=hc,b.ShadowButtonDefault=em,b.ShadowButtonFocus=rm,b.ShadowButtonSecondary=tm,b.ShadowButtonWarning=nm,b.ShadowCardDefault=am,b.ShadowCardHover=im,b.SizeButtonMinHeightDesktop=Cp,b.SizeButtonMinHeightMobile=kp,b.SizeFormControlLarge=gp,b.SizeFormControlMedium=mp,b.SizeFormControlSmall=pp,b.SizeFormInputWidth2xl=wp,b.SizeFormInputWidth3xl=Sp,b.SizeFormInputWidthLg=xp,b.SizeFormInputWidthMd=yp,b.SizeFormInputWidthSm=bp,b.SizeFormInputWidthXl=vp,b.SizeFormInputWidthXs=_p,b.SizeIconExtraLarge=fp,b.SizeIconLarge=dp,b.SizeIconMedium=up,b.SizeIconNhsDefault=hp,b.SizeIconSmall=cp,b.SkipLink=Fs,b.SlotMatrix=ny,b.SortStatusControl=cy,b.Spacing0=Ko,b.Spacing1=Zo,b.Spacing2=Jo,b.Spacing3=Qo,b.Spacing4=el,b.Spacing5=tl,b.Spacing6=nl,b.Spacing7=rl,b.Spacing8=al,b.Spacing9=il,b.SpacingResponsive0Mobile=vi,b.SpacingResponsive0Tablet=wi,b.SpacingResponsive1Mobile=Si,b.SpacingResponsive1Tablet=ki,b.SpacingResponsive2Mobile=Ci,b.SpacingResponsive2Tablet=Ti,b.SpacingResponsive3Mobile=ji,b.SpacingResponsive3Tablet=Ni,b.SpacingResponsive4Mobile=Di,b.SpacingResponsive4Tablet=Mi,b.SpacingResponsive5Mobile=$i,b.SpacingResponsive5Tablet=Ii,b.SpacingResponsive6Mobile=Pi,b.SpacingResponsive6Tablet=Fi,b.SpacingResponsive7Mobile=Li,b.SpacingResponsive7Tablet=Ei,b.SpacingResponsive8Mobile=Bi,b.SpacingResponsive8Tablet=Ai,b.SpacingResponsive9Mobile=Ri,b.SpacingResponsive9Tablet=Hi,b.SpacingUtilities=t0,b.StateDisabledBackground=Zp,b.StateDisabledBorder=Jp,b.StateDisabledText=Qp,b.StateErrorBackground=Rp,b.StateErrorBorder=Hp,b.StateErrorText=Op,b.StateInfoBackground=qp,b.StateInfoBorder=Xp,b.StateInfoText=Kp,b.StateSuccessBackground=zp,b.StateSuccessBorder=Wp,b.StateSuccessText=Up,b.StateWarningBackground=Gp,b.StateWarningBorder=Vp,b.StateWarningText=Yp,b.SummaryCard=Su,b.SummaryList=Wb,b.Table=Dt,b.Tabs=Xb,b.Tag=qe,b.TaskList=vu,b.Textarea=fc,b.TooltipOverlay=Cx,b.TooltipProvider=gd,b.TransactionalPageTemplate=Fy,b.TransitionButtonDefault=Rd,b.TransitionButtonShadow=Hd,b.TransitionCardHover=zd,b.TransitionInputFocus=Od,b.VisibilityProvider=wx,b.VitalsCard=Os,b.WIDTH_FRACTIONS=i0,b.WarningCallout=Zb,b.WidthContainer=Ws,b.WidthUtilities=r0,b.checkFrutigerLoaded=Pv,b.createGenericTabsConfig=li,b.createTCHTabsConfig=my,b.generateFrutigerFontFace=Dv,b.getResponsiveStyles=lv,b.getSpacingClass=n0,b.getWidthClass=a0,b.preloadFrutigerFonts=Mv,b.tchDataConfig=Tu,b.useColors=xv,b.useComponentSpacing=kv,b.useNHSHeadings=Cv,b.useNHSParagraphs=Tv,b.useNHSTheme=f0,b.useNHSTypographySystem=jv,b.useNavigationSplitDrill=Nv,b.useNavigationSplitUrlSync=Ou,b.useNhsFdpBreakpoints=Us,b.useResponsiveSpacing=Sv,b.useResponsiveValue=Ly,b.useSpacing=vv,b.useTokens=yv,b.useTypography=wv,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.js.map
