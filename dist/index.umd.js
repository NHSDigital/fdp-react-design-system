(function(x,$){typeof exports=="object"&&typeof module<"u"?$(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],$):(x=typeof globalThis<"u"?globalThis:x||self,$(x.NHSFDPDesignSystem={},x.React,x.ReactDOM))})(this,(function(x,$,V0){"use strict";function Y0(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const W=Y0($);function Z0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var aa={exports:{}},Wr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $c;function q0(){if($c)return Wr;$c=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Wr.Fragment=t,Wr.jsx=n,Wr.jsxs=n,Wr}var Gr={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bc;function X0(){return Bc||(Bc=1,process.env.NODE_ENV!=="production"&&(function(){function e(O){if(O==null)return null;if(typeof O=="function")return O.$$typeof===C?null:O.displayName||O.name||null;if(typeof O=="string")return O;switch(O){case h:return"Fragment";case k:return"Profiler";case g:return"StrictMode";case b:return"Suspense";case _:return"SuspenseList";case v:return"Activity"}if(typeof O=="object")switch(typeof O.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),O.$$typeof){case y:return"Portal";case j:return(O.displayName||"Context")+".Provider";case S:return(O._context.displayName||"Context")+".Consumer";case M:var ne=O.render;return O=O.displayName,O||(O=ne.displayName||ne.name||"",O=O!==""?"ForwardRef("+O+")":"ForwardRef"),O;case N:return ne=O.displayName||null,ne!==null?ne:e(O.type)||"Memo";case w:ne=O._payload,O=O._init;try{return e(O(ne))}catch{}}return null}function t(O){return""+O}function n(O){try{t(O);var ne=!1}catch{ne=!0}if(ne){ne=console;var Y=ne.error,K=typeof Symbol=="function"&&Symbol.toStringTag&&O[Symbol.toStringTag]||O.constructor.name||"Object";return Y.call(ne,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",K),t(O)}}function r(O){if(O===h)return"<>";if(typeof O=="object"&&O!==null&&O.$$typeof===w)return"<...>";try{var ne=e(O);return ne?"<"+ne+">":"<...>"}catch{return"<...>"}}function i(){var O=D.A;return O===null?null:O.getOwner()}function a(){return Error("react-stack-top-frame")}function o(O){if(I.call(O,"key")){var ne=Object.getOwnPropertyDescriptor(O,"key").get;if(ne&&ne.isReactWarning)return!1}return O.key!==void 0}function l(O,ne){function Y(){A||(A=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",ne))}Y.isReactWarning=!0,Object.defineProperty(O,"key",{get:Y,configurable:!0})}function c(){var O=e(this.type);return L[O]||(L[O]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),O=this.props.ref,O!==void 0?O:null}function u(O,ne,Y,K,X,J,pe,ie){return Y=J.ref,O={$$typeof:m,type:O,key:ne,props:J,_owner:X},(Y!==void 0?Y:null)!==null?Object.defineProperty(O,"ref",{enumerable:!1,get:c}):Object.defineProperty(O,"ref",{enumerable:!1,value:null}),O._store={},Object.defineProperty(O._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(O,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(O,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:pe}),Object.defineProperty(O,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:ie}),Object.freeze&&(Object.freeze(O.props),Object.freeze(O)),O}function d(O,ne,Y,K,X,J,pe,ie){var se=ne.children;if(se!==void 0)if(K)if(B(se)){for(K=0;K<se.length;K++)f(se[K]);Object.freeze&&Object.freeze(se)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(se);if(I.call(ne,"key")){se=e(O);var te=Object.keys(ne).filter(function(de){return de!=="key"});K=0<te.length?"{key: someKey, "+te.join(": ..., ")+": ...}":"{key: someKey}",q[se+K]||(te=0<te.length?"{"+te.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,K,se,te,se),q[se+K]=!0)}if(se=null,Y!==void 0&&(n(Y),se=""+Y),o(ne)&&(n(ne.key),se=""+ne.key),"key"in ne){Y={};for(var re in ne)re!=="key"&&(Y[re]=ne[re])}else Y=ne;return se&&l(Y,typeof O=="function"?O.displayName||O.name||"Unknown":O),u(O,se,J,X,i(),Y,pe,ie)}function f(O){typeof O=="object"&&O!==null&&O.$$typeof===m&&O._store&&(O._store.validated=1)}var p=$,m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),j=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),C=Symbol.for("react.client.reference"),D=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.prototype.hasOwnProperty,B=Array.isArray,E=console.createTask?console.createTask:function(){return null};p={react_stack_bottom_frame:function(O){return O()}};var A,L={},z=p.react_stack_bottom_frame.bind(p,a)(),ae=E(r(a)),q={};Gr.Fragment=h,Gr.jsx=function(O,ne,Y,K,X){var J=1e4>D.recentlyCreatedOwnerStacks++;return d(O,ne,Y,!1,K,X,J?Error("react-stack-top-frame"):z,J?E(r(O)):ae)},Gr.jsxs=function(O,ne,Y,K,X){var J=1e4>D.recentlyCreatedOwnerStacks++;return d(O,ne,Y,!0,K,X,J?Error("react-stack-top-frame"):z,J?E(r(O)):ae)}})()),Gr}var Hc;function J0(){return Hc||(Hc=1,process.env.NODE_ENV==="production"?aa.exports=q0():aa.exports=X0()),aa.exports}var s=J0(),As={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var zc;function Q0(){return zc||(zc=1,(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=i(a,r(l)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)t.call(a,l)&&a[l]&&(o=i(o,l));return o}function i(a,o){return o?a?a+" "+o:a+o:a}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(As)),As.exports}var K0=Q0();const ve=Z0(K0),ey=({text:e,href:t,openInNewWindow:n=!1,className:r,...i})=>{const a=ve("nhsuk-action-link__link",r);return s.jsx("div",{className:"nhsuk-action-link",children:s.jsxs("a",{className:a,href:t,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,...i,children:[s.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right-circle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"36",height:"36",children:[s.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),s.jsx("path",{d:"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"})]}),s.jsx("span",{className:"nhsuk-action-link__text",children:e})]})})},Es=({ariaLabel:e="Account",items:t=[],className:n,variant:r="default"})=>{if(!t||t.length===0)return null;const i=a=>{const o=a.icon?s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__user",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",role:"img","aria-label":a.icon===!0?"User":void 0,children:s.jsx("path",{d:"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z"})}):null,l=a.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:a.html}}):a.text,c=s.jsxs(s.Fragment,{children:[o,l]});return a.href?s.jsx("a",{className:"nhsuk-account__link nhsuk-header__account-link",href:a.href,children:c}):a.action?s.jsx("form",{className:"nhsuk-account__form",action:a.action,method:a.method||"post",children:s.jsx("button",{className:"nhsuk-account__button",type:"submit",role:"button",children:c})}):s.jsx("span",{children:c})};return s.jsx("nav",{className:ve("nhsuk-account",{"nhsuk-account--white":r==="white"},n),"aria-label":e,children:s.jsx("ul",{className:"nhsuk-account__list",children:t.map((a,o)=>a&&s.jsx("li",{className:ve("nhsuk-account__item nhsuk-header__account-item",a.className),children:i(a)},o))})})};var Fs=(e=>(e.Primary="primary",e.Secondary="secondary",e.Reverse="reverse",e.Warning="warning",e.Login="login",e.Metric="metric",e))(Fs||{}),$s=(e=>(e.Small="small",e.Default="default",e.Large="large",e))($s||{});function ty(e){const t=e.variant||"primary",n=e.size||"default",r=!!e.fullWidth,i=["nhs-aria-button",`nhs-aria-button--${t}`,n!=="default"?`nhs-aria-button--${n}`:"",r?"nhs-aria-button--full-width":"",e.className||""].filter(Boolean).join(" ");return{tag:e.href?"a":"button",classes:i,data:{module:"nhs-button"},attrs:e.href?{href:e.href,role:"button"}:{type:"button"},preventDoubleClick:!!e.preventDoubleClick}}const{forwardRef:ny,useCallback:In,useState:Bs}=W;function ry(e,t){const{children:n,variant:r=Fs.Primary,size:i=$s.Default,fullWidth:a=!1,className:o="",preventDoubleClick:l=!1,...c}=e,[u,d]=Bs(!1),[f,p]=Bs(!1),[m,y]=Bs(!1),h=ty({variant:r,size:i,fullWidth:a,className:o,preventDoubleClick:l,href:"href"in c?c.href:void 0}),g="disabled"in c?c.disabled:c["aria-disabled"]==="true",k={...u&&{"data-pressed":"true"},...f&&{"data-hovered":"true"},...m&&{"data-focused":"true"},...g&&{"data-disabled":"true"}},S=In(()=>!g&&d(!0),[g]),j=In(()=>d(!1),[]),M=In(()=>!g&&p(!0),[g]),b=In(()=>{p(!1),d(!1)},[]),_=In(()=>y(!0),[]),N=In(()=>y(!1),[]),w=In(se=>{se.key===" "&&("href"in c||se.currentTarget.getAttribute("role")==="button")&&(se.preventDefault(),se.currentTarget.click())},[c]),v=In(se=>{if(l){const te=se.currentTarget;if(te.getAttribute("data-processing")==="true"){se.preventDefault();return}te.setAttribute("data-processing","true"),setTimeout(()=>{te.removeAttribute("data-processing")},1e3)}},[l]);if("href"in c&&c.href){const{id:se,style:te,title:re,["aria-label"]:de,["aria-describedby"]:V,["aria-labelledby"]:ce,tabIndex:oe,...ge}=c,le=c;return s.jsx("a",{ref:t,href:le.href,target:le.target,rel:le.rel,className:h.classes,role:"button",draggable:"false","data-module":"nhs-button",...k,...l&&{"data-prevent-double-click":"true"},...ge,onKeyDown:me=>{le.onKeyDown?.(me),w(me)},onClick:me=>{le.onClick?.(me),v(me)},onMouseDown:me=>{le.onMouseDown?.(me),S()},onMouseUp:me=>{le.onMouseUp?.(me),j()},onMouseEnter:me=>{le.onMouseEnter?.(me),M()},onMouseLeave:me=>{le.onMouseLeave?.(me),b()},onFocus:me=>{le.onFocus?.(me),_()},onBlur:me=>{le.onBlur?.(me),N()},"aria-disabled":le["aria-disabled"],...le["aria-disabled"]==="true"&&{tabIndex:-1},id:se,style:te,title:re,"aria-label":de,"aria-describedby":V,"aria-labelledby":ce,tabIndex:oe,children:n})}const{id:C,style:D,title:I,["aria-label"]:B,["aria-describedby"]:E,["aria-labelledby"]:A,tabIndex:L,name:z,value:ae,form:q,formAction:O,formEncType:ne,formMethod:Y,formNoValidate:K,formTarget:X,autoFocus:J,...pe}=c,ie=c;return s.jsx("button",{ref:t,type:ie.type||"button",disabled:ie.disabled,className:h.classes,"data-module":"nhs-button",...k,...l&&{"data-prevent-double-click":"true"},...ie.disabled&&{"aria-disabled":"true"},...pe,onKeyDown:se=>{ie.onKeyDown?.(se),w(se)},onClick:se=>{ie.onClick?.(se),v(se)},onMouseDown:se=>{ie.onMouseDown?.(se),S()},onMouseUp:se=>{ie.onMouseUp?.(se),j()},onMouseEnter:se=>{ie.onMouseEnter?.(se),M()},onMouseLeave:se=>{ie.onMouseLeave?.(se),b()},onFocus:se=>{ie.onFocus?.(se),_()},onBlur:se=>{ie.onBlur?.(se),N()},id:C,style:D,title:I,"aria-label":B,"aria-describedby":E,"aria-labelledby":A,tabIndex:L,name:z,value:ae,form:q,formAction:O,formEncType:ne,formMethod:Y,formNoValidate:K,formTarget:X,autoFocus:J,children:n})}const pt=ny(ry);pt.displayName="Button";const sa=({text:e="Back",html:t,href:n="#",className:r,element:i="a",onClick:a,...o})=>{const l=ve("nhsuk-back-link",r),c=ve("nhsuk-back-link__link"),u=()=>s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:s.jsx("path",{d:"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"})}),t?s.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e]});return s.jsx("div",{className:l,children:i==="button"?s.jsx("button",{className:c,onClick:a,type:"button",...o,children:u()}):s.jsx("a",{className:c,href:n,...o,children:u()})})};function iy(e){const{color:t="default",noBorder:n,closable:r,disabled:i,className:a}=e;return{classes:["nhsuk-tag",t!=="default"?`nhsuk-tag--${t}`:"",n?"nhsuk-tag--no-border":"",r?"nhsuk-tag--closable":"",i?"nhsuk-tag--disabled":"",a||""].filter(Boolean).join(" "),showClose:!!r,disabled:!!i}}const Ge=({text:e,html:t,children:n,color:r="default",noBorder:i=!1,closable:a=!1,onClose:o,disabled:l=!1,className:c,...u})=>{const d=iy({color:r,noBorder:i,closable:a,disabled:l,className:c}),f=p=>{p.preventDefault(),p.stopPropagation(),!l&&o&&o()};return s.jsxs("strong",{className:d.classes,...u,children:[n||(t?s.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e),a&&s.jsx("button",{type:"button",className:"nhsuk-tag__close",onClick:f,disabled:l,"aria-label":"Remove",title:"Remove",children:"Ã—"})]})},Oc=({id:e,name:t,checked:n,defaultChecked:r=!1,disabled:i=!1,value:a="true",hint:o,errorMessage:l,className:c,children:u,onChange:d,onBlur:f,onFocus:p,attributes:m,...y})=>{const[h,g]=$.useState(r),k=n!==void 0,S=k?n:h;$.useEffect(()=>{k||g(r)},[r,k]);const j=w=>{const v=w.target.checked;k||g(v),d?.(v,w)},M=o?`${e}-hint`:void 0,b=l?`${e}-error`:void 0,_=[M,b].filter(Boolean).join(" ")||void 0,N=ve("nhsuk-form-group",{"nhsuk-form-group--error":!!l},c);return s.jsx("div",{className:N,...y,children:s.jsx("div",{className:"nhsuk-checkboxes",children:s.jsxs("div",{className:"nhsuk-checkboxes__item",children:[s.jsx("input",{className:"nhsuk-checkboxes__input",id:e,name:t||e,type:"checkbox",value:a,checked:S,disabled:i,onChange:j,onBlur:f,onFocus:p,"aria-describedby":_,...m}),s.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:e,children:u}),o&&s.jsx("div",{id:M,className:"nhsuk-checkboxes__hint",children:o}),l&&s.jsxs("div",{id:b,className:"nhsuk-error-message nhsuk-checkboxes__error",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]})]})})})};Oc.displayName="Checkbox";function Rc(e){const n=(e.type||"text")==="range";return{classes:["nhsuk-input",e.hasError?"nhsuk-input--error":"",n?"nhsuk-input--range":"",!n&&e.width&&e.width!=="full"?`nhsuk-input--width-${e.width}`:"",e.className||""].filter(Boolean).join(" "),isRange:n}}const oa=({id:e,name:t,type:n="text",value:r,defaultValue:i,placeholder:a,disabled:o=!1,readOnly:l=!1,required:c=!1,hasError:u=!1,describedBy:d,className:f,width:p="full",inputMode:m,autoComplete:y,maxLength:h,minLength:g,pattern:k,step:S,min:j,max:M,showValueLabels:b=!1,showCurrentValue:_=!1,valueLabels:N,onChange:w,onBlur:v,onFocus:C,onKeyDown:D,...I})=>{const[B,E]=$.useState(r||i||(n==="range"?j||"0":""));$.useEffect(()=>{r!==void 0&&E(r)},[r]);const A=X=>{const J=X.target;E(J.value),("type"in X&&X.nativeEvent||X.type==="keydown")&&w?.(X)},{classes:L,isRange:z}=Rc({type:n,hasError:u,width:p,className:f}),ae=r!==void 0,q={id:e,name:t,type:n,placeholder:a,disabled:o,readOnly:l,required:c,"aria-describedby":d,inputMode:m,autoComplete:y,maxLength:h,minLength:g,pattern:k,step:S,min:j,max:M,onChange:A,onBlur:v,onFocus:C,onKeyDown:X=>{if(z&&/[0-9]/.test(X.key)){const J=(B?.toString()||"")+X.key;X.target.value=J,A(X)}D?.(X)},...I},O=!ae&&i!==void 0?{defaultValue:i}:{},ne=ae?{value:r}:{},Y=()=>s.jsx("input",{className:L,...ne,...O,"data-current-value":B,...q}),K=z?s.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[b&&s.jsxs("div",{className:"nhsuk-input-range-labels",children:[s.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:N?.min||j||"0"}),Y(),s.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:N?.max||M||"100"})]}),!b&&Y(),_&&s.jsx("div",{className:"nhsuk-input-range-current-value",children:s.jsxs("span",{className:"nhsuk-input-range-current-label",children:[N?.current||"Current value:"," ",s.jsx("strong",{children:B})]})})]}):null;return z?K:s.jsx("input",{className:L,id:e,name:t,type:n,value:r,...r===void 0&&i!==void 0?{defaultValue:i}:{},placeholder:a,disabled:o,readOnly:l,required:c,"aria-describedby":d,inputMode:m,autoComplete:y,maxLength:h,minLength:g,pattern:k,step:S,min:j,max:M,onChange:w,onBlur:v,onFocus:C,onKeyDown:D,...I})};function ay(e){const t=e.size||"m",n=["nhsuk-label",t!=="m"?`nhsuk-label--${t}`:"",e.className||""].filter(Boolean).join(" ");return{tag:e.isPageHeading?"h1":"label",classes:n,size:t,htmlFor:e.isPageHeading?void 0:e.htmlFor,isPageHeading:!!e.isPageHeading}}const la=({htmlFor:e,className:t,isPageHeading:n=!1,size:r="m",children:i,...a})=>{const o=ay({size:r,isPageHeading:n,className:t,htmlFor:e}),l=o.tag;return s.jsx(l,{className:o.classes,htmlFor:o.htmlFor,...a,children:n?s.jsx("label",{className:"nhsuk-label-wrapper",htmlFor:e,children:i}):i})};function sy(e){const t=["nhsuk-fieldset",e.className||""].filter(Boolean).join(" "),n=e.legend?["nhsuk-fieldset__legend",e.legend.size?`nhsuk-fieldset__legend--${e.legend.size}`:"",e.legend.className||""].filter(Boolean).join(" "):void 0;return{fieldsetClasses:t,legendClasses:n,legendIsPageHeading:!!e.legend?.isPageHeading,describedBy:e.describedBy}}const ca=({children:e,legend:t,className:n,describedBy:r,...i})=>{const a=sy({className:n,describedBy:r,legend:t?{size:t.size,className:t.className,isPageHeading:t.isPageHeading}:void 0}),o=()=>{const l=t?.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:t.html}}):t?.text;return a.legendIsPageHeading?s.jsx("h1",{className:"nhsuk-fieldset__heading",children:l}):l};return s.jsxs("fieldset",{className:a.fieldsetClasses,"aria-describedby":a.describedBy,...i,children:[t&&(t.text||t.html)&&s.jsx("legend",{className:a.legendClasses,children:o()}),e]})};function oy(e){const t=["nhsuk-checkboxes",e.small?"nhsuk-checkboxes--small":"",e.className||""].filter(Boolean).join(" "),n=["nhsuk-form-group",e.hasError?"nhsuk-form-group--error":""].filter(Boolean).join(" ");return{classes:t,formGroupClasses:n}}const Uc=({items:e,name:t,idPrefix:n,legend:r,isPageHeading:i=!1,legendSize:a="l",hint:o,errorMessage:l,className:c="",small:u=!1,onChange:d,fieldsetAttributes:f,attributes:p,...m})=>{const[y,h]=$.useState(e.filter(w=>w.checked).map(w=>w.value)),g=n||t,k=o?`${g}-hint`:void 0,S=l?`${g}-error`:void 0,j=[k,S].filter(Boolean).join(" ")||void 0,M=(w,v)=>{let C;v?C=[...y,w]:C=y.filter(D=>D!==w),h(C),d?.(C)},b=()=>e.map((w,v)=>{const C=`${g}-${v+1}`,D=`${C}-conditional`,I=y.includes(w.value),B=w.disabled||!1;return s.jsxs("div",{className:"nhsuk-checkboxes__item",children:[s.jsx("input",{className:"nhsuk-checkboxes__input",id:C,name:t,type:"checkbox",value:w.value,checked:I,disabled:B,onChange:E=>M(w.value,E.target.checked),"aria-describedby":w.hint?`${C}-hint`:j,...w.conditional&&{"aria-controls":D,"aria-expanded":I?"true":"false"},...w.attributes}),s.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:C,children:w.text}),w.hint&&s.jsx("div",{id:`${C}-hint`,className:"nhsuk-checkboxes__hint",children:w.hint}),w.conditional&&s.jsx("div",{className:ve("nhsuk-checkboxes__conditional",{"nhsuk-checkboxes__conditional--hidden":!I}),id:D,children:typeof w.conditional=="object"&&w.conditional!==null&&"label"in w.conditional&&"id"in w.conditional&&"name"in w.conditional?s.jsxs("div",{style:{marginTop:"16px"},children:[w.conditional.label&&s.jsx(la,{htmlFor:w.conditional.id,children:w.conditional.label}),s.jsx(oa,{...w.conditional})]}):w.conditional})]},w.value)}),{classes:_,formGroupClasses:N}=oy({small:u,className:c,hasError:!!l});return s.jsx("div",{className:N,...p,...m,children:s.jsxs(ca,{legend:r?{text:r,isPageHeading:i,size:a}:void 0,describedBy:j,...f,children:[o&&s.jsx("div",{id:k,className:"nhsuk-hint",children:o}),l&&s.jsxs("div",{id:S,className:"nhsuk-error-message",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]}),s.jsx("div",{className:_,children:b()})]})})};Uc.displayName="Checkboxes";function ly(e){const t=e.resize??"vertical";return{classes:["nhsuk-textarea",e.hasError?"nhsuk-textarea--error":"",t!=="vertical"?`nhsuk-textarea--resize-${t}`:"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}const Wc=({id:e,name:t,value:n,defaultValue:r,placeholder:i,disabled:a=!1,readOnly:o=!1,required:l=!1,hasError:c=!1,describedBy:u,className:d,rows:f=5,cols:p,maxLength:m,minLength:y,wrap:h="soft",resize:g="vertical",autoComplete:k,spellCheck:S,onChange:j,onBlur:M,onFocus:b,onKeyDown:_,...N})=>{const{classes:w,describedBy:v}=ly({hasError:c,resize:g,className:d,describedBy:u});return s.jsx("textarea",{className:w,id:e,name:t,value:n,defaultValue:r,placeholder:i,disabled:a,readOnly:o,required:l,"aria-describedby":v,rows:f,cols:p,maxLength:m,minLength:y,wrap:h,autoComplete:k,spellCheck:S,onChange:j,onBlur:M,onFocus:b,onKeyDown:_,...N})};function cy(e){return{classes:["nhsuk-hint",e.className||""].filter(Boolean).join(" "),id:e.id}}const Hs=({id:e,className:t,children:n,...r})=>{const i=cy({id:e,className:t});return s.jsx("div",{className:i.classes,id:i.id,...r,children:n})},uy=({id:e,maxLength:t,maxWords:n,threshold:r=75,name:i,value:a,defaultValue:o,rows:l,className:c,countMessage:u,onCountChange:d,onChange:f,...p})=>{const m=a??o??"",[y,h]=$.useState(m),[g,k]=$.useState(0),[S,j]=$.useState(!1),[M,b]=$.useState(!1),_=$.useCallback(I=>n?I.trim()===""?0:I.trim().split(/\s+/).length:I.length,[n]);$.useEffect(()=>{const I=_(y),B=t||n||0,E=B-I,A=Math.floor(B*(r/100));k(E),j(I>B),b(I>=A||I>B),d&&d(I,E)},[y,t,n,r,_,d]);const N=I=>{const B=I.target.value;h(B),f&&f(I)},w=()=>{const I=t||n||0,B=n?"word":"character",E=n?"words":"characters";if(!M)return`You can enter up to ${I} ${I===1?B:E}`;if(S){const A=Math.abs(g);return`You have ${A} ${A===1?B:E} too many`}else return`You have ${g} ${g===1?B:E} remaining`},v=ve("nhsuk-character-count",c),C=ve("nhsuk-character-count__message",{"nhsuk-character-count__message--disabled":!M,"nhsuk-error-message":S},u?.classes),D=ve("nhsuk-js-character-count",{"nhsuk-textarea--error":S});return s.jsxs("div",{className:v,"data-module":"nhsuk-character-count","data-maxlength":t,"data-maxwords":n,"data-threshold":r,"data-testid":"character-count",children:[s.jsx(Wc,{id:e,name:i,value:a!==void 0?y:void 0,defaultValue:a===void 0?o??y:void 0,rows:l,className:D,onChange:N,"aria-describedby":`${e}-info`,"aria-invalid":S||void 0,...p}),s.jsx(Hs,{id:`${e}-info`,className:C,role:"status","aria-live":"polite",children:w()})]})};function dy(e){return{classes:["nhsuk-select",e.hasError?"nhsuk-select--error":"",e.className||""].filter(Boolean).join(" ")}}const Gc=({value:e,disabled:t=!1,selected:n=!1,className:r,children:i,...a})=>{const o=ve("nhsuk-select__option",r);return s.jsx("option",{className:o,value:e,disabled:t,...a,children:i})},Vr=({id:e,name:t,ariaLabel:n,value:r,defaultValue:i,disabled:a=!1,required:o=!1,hasError:l=!1,describedBy:c,className:u,multiple:d=!1,size:f,autoComplete:p,options:m,children:y,onChange:h,onBlur:g,onFocus:k,...S})=>{const{classes:j}=dy({hasError:l,className:u}),M=()=>m?m.map((_,N)=>s.jsx("option",{value:_.value,disabled:_.disabled,"data-initial-selected":_.selected||void 0,children:_.text},`${_.value}-${N}`)):null,b=i===void 0&&r===void 0&&m?m.find(_=>_.selected)?.value:void 0;return s.jsx("select",{className:j,id:e,name:t,"aria-label":n,value:r,defaultValue:i!==void 0?i:b,disabled:a,required:o,"aria-describedby":c,multiple:d,size:f,autoComplete:p,onChange:h,onBlur:g,onFocus:k,...S,children:y||M()})};Vr.Option=Gc;function fy(e){return{classes:["nhsuk-radios",e.hasError?"nhsuk-radios--error":"",e.size==="small"?"nhsuk-radios--small":"",e.inline?"nhsuk-radios--inline":"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}function Vc(e,{variant:t,selectedValue:n,enableBehaviourAttr:r,handleChange:i,handleBlur:a,handleFocus:o,handleKeyDown:l,itemsRef:c,InputComponent:u}){const{onChange:d,onBlur:f,onFocus:p,...m}=e,{name:y,hasError:h=!1,describedBy:g,className:k,size:S="normal",inline:j=!1,options:M,...b}=m,{classes:_,describedBy:N}=fy({hasError:h,size:S,inline:j,className:k,describedBy:g});return s.jsx(ca,{children:s.jsx("div",{className:_,...b,...r?{"data-nhs-behaviour":"radios"}:{},children:M.map((w,v)=>{const C=`${y}-${v}`,D=w.conditional?`${C}-conditional`:void 0,I=n===w.value;return s.jsxs("div",{className:"nhsuk-radios__item",children:[s.jsx("input",{className:"nhsuk-radios__input",id:C,name:y,type:"radio",value:w.value,disabled:w.disabled,...t==="client"?{checked:I,onChange:i,onBlur:a,onFocus:o,onKeyDown:l,ref:B=>{B&&c&&(c.current[v]=B)}}:{defaultChecked:I,"data-nhs-radios-input":!0},"aria-describedby":N}),s.jsx("label",{className:"nhsuk-radios__label",htmlFor:C,children:w.text}),w.hint&&s.jsx("div",{className:"nhsuk-radios__hint",children:w.hint}),w.conditional&&s.jsx("div",{className:ve("nhsuk-radios__conditional",{"nhsuk-radios__conditional--hidden":!I}),id:D,...t==="server"?{"data-nhs-radios-conditional":!0}:{},children:typeof w.conditional=="object"&&w.conditional!==null&&"label"in w.conditional&&"id"in w.conditional&&"name"in w.conditional?s.jsxs("div",{style:{marginTop:"16px"},children:[w.conditional.label&&s.jsx(la,{htmlFor:w.conditional.id,children:w.conditional.label}),s.jsx(u,{...w.conditional})]}):w.conditional})]},w.value)})})})}const hy=({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:i,...a})=>{const[o,l]=$.useState(e||t||""),c=$.useRef([]),u=$.useRef(o),d=m=>{const y=m.target.value;y!==u.current&&(u.current=y,l(y),n?.(m))},f=m=>{i?.(m)},p=$.useCallback(m=>{const{key:y}=m;if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(y))return;m.preventDefault();const h=c.current.filter(j=>j&&!j.disabled),g=h.indexOf(m.currentTarget);if(g===-1)return;let k=g;["ArrowDown","ArrowRight"].includes(y)?k=(g+1)%h.length:["ArrowUp","ArrowLeft"].includes(y)&&(k=(g-1+h.length)%h.length);const S=h[k];S&&(S.focus(),S.checked||S.click())},[]);return Vc({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:i,...a},{variant:"client",selectedValue:o,enableBehaviourAttr:!1,handleChange:d,handleBlur:r,handleFocus:f,handleKeyDown:p,itemsRef:c,InputComponent:oa})};function my(e){const{id:t,name:n,type:r="text",value:i,defaultValue:a,placeholder:o,disabled:l=!1,readOnly:c=!1,required:u=!1,hasError:d=!1,describedBy:f,className:p,width:m="full",inputMode:y,autoComplete:h,maxLength:g,minLength:k,pattern:S,step:j,min:M,max:b,showValueLabels:_=!1,showCurrentValue:N=!1,valueLabels:w,onChange:v,onBlur:C,onFocus:D,onKeyDown:I,...B}=e,{classes:E,isRange:A}=Rc({type:r,hasError:d,width:m,className:p}),L={id:t,name:n,type:r,placeholder:o,disabled:l,readOnly:c,required:u,"aria-describedby":f,inputMode:y,autoComplete:h,maxLength:g,minLength:k,pattern:S,step:j,min:M,max:b,...B};if(A){const z=i??a??(typeof M<"u"?String(M):"0"),ae=s.jsx("input",{className:E,...i!==void 0?{value:i}:{},...i===void 0&&a!==void 0?{defaultValue:a}:{},"data-current-value":z,...L});return s.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[_?s.jsxs("div",{className:"nhsuk-input-range-labels",children:[s.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:w?.min||M||"0"}),ae,s.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:w?.max||b||"100"})]}):ae,N&&s.jsx("div",{className:"nhsuk-input-range-current-value",children:s.jsxs("span",{className:"nhsuk-input-range-current-label",children:[w?.current||"Current value:"," ",s.jsx("strong",{children:z})]})})]})}return s.jsx("input",{className:E,...i!==void 0?{value:i}:{},...i===void 0&&a!==void 0?{defaultValue:a}:{},...L})}const py=({value:e,defaultValue:t,...n})=>{const r=e||t||"";return Vc({value:e,defaultValue:t,...n},{variant:"server",selectedValue:r,enableBehaviourAttr:!0,InputComponent:my})};var Ln=(e=>(e.OneQuarter="one-quarter",e.OneThird="one-third",e.OneHalf="one-half",e.TwoThirds="two-thirds",e.ThreeQuarters="three-quarters",e.Full="full",e))(Ln||{}),Yc=(e=>(e.Mobile="mobile",e.Tablet="tablet",e.Desktop="desktop",e.LargeDesktop="large-desktop",e))(Yc||{}),Zc=(e=>(e.Left="left",e.Right="right",e))(Zc||{}),qc=(e=>(e.Left="left",e.Center="center",e.Right="right",e))(qc||{});const zs=({children:e,className:t,fluid:n=!1,maxWidth:r,style:i,...a})=>{const o=ve({"nhsuk-width-container":!n,"nhsuk-width-container-fluid":n},t),l=r?{maxWidth:r,...i||{}}:i;return s.jsx("div",{className:o,style:l,...a,children:e})},vn=({children:e,className:t,style:n,align:r,rowGap:i,...a})=>{const o=ve("nhsuk-grid-row",r?`nhsuk-grid-row-align-${r}`:void 0,t);return s.jsx("div",{className:o,style:n,...a,children:e})},gr=({children:e,width:t=Ln.Full,mobileWidth:n,tabletWidth:r,desktopWidth:i,start:a,className:o,forceWidth:l=!1,style:c,align:u,...d})=>{const f=ve({[`nhsuk-grid-column-${t}`]:!l,[`nhsuk-u-${t}`]:l,[`nhsuk-u-${n}-mobile`]:!!n,[`nhsuk-u-${r}-tablet`]:!!r,[`nhsuk-u-${i}-desktop`]:!!i,[`nhsuk-grid-column-start-${a}`]:a&&a>=1&&a<=7,...u?{[`nhsuk-grid-align-${u}`]:!0}:{}},o);return s.jsx("div",{className:f,style:c,...d,children:e})},ua=({children:e,className:t,style:n,rowGap:r=8,...i})=>{const a=$.Children.toArray(e),o=a[0],l=$.isValidElement(o)&&(o.type===vn||typeof o.props=="object"&&o.props&&"className"in o.props&&typeof o.props.className=="string"&&o.props.className.includes("nhsuk-grid-row")),c=typeof r=="number"?`${r}px`:r;let u=e;if(l)u=a.map((d,f)=>{if(!$.isValidElement(d))return d;const p=d,m=p.props||{},y=typeof m.className=="string"?m.className:"";if(!(p.type===vn||y.includes("nhsuk-grid-row")))return d;const g=m.rowGap,k=g!==void 0?typeof g=="number"?`${g}px`:g:c,S=f===0?void 0:k;if(!S)return d;const j={...m.style||{},marginTop:S};return $.cloneElement(p,{style:j})});else{const d={marginTop:void 0};u=s.jsx(vn,{style:d,children:e})}return s.jsx(zs,{className:t,style:n,...i,children:u})},gy=({children:e,type:t="bullet",size:n="medium",border:r=!1,className:i,role:a,as:o,...l})=>{const c=o||(t==="number"?"ol":"ul"),u=ve("nhsuk-list",{"nhsuk-list--bullet":t==="bullet","nhsuk-list--number":t==="number","nhsuk-list--none":t==="none","nhsuk-list--border":r,[`nhsuk-list--${n}`]:n!=="medium"},i);return s.jsx(c,{className:u,role:a,...l,children:e})},yy=({children:e,className:t,...n})=>{const r=ve("nhsuk-list__item",t);return s.jsx("li",{className:r,...n,children:e})},Xc=gy;Xc.Item=yy;const by=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const i=["nhsuk-spacing-utilities",e&&"nhsuk-spacing-utilities--debug",t].filter(Boolean).join(" ");return s.jsx("div",{className:i,...r,children:n})},vy={margin:e=>`nhsuk-u-margin-${e}`,marginTop:e=>`nhsuk-u-margin-top-${e}`,marginRight:e=>`nhsuk-u-margin-right-${e}`,marginBottom:e=>`nhsuk-u-margin-bottom-${e}`,marginLeft:e=>`nhsuk-u-margin-left-${e}`,padding:e=>`nhsuk-u-padding-${e}`,paddingTop:e=>`nhsuk-u-padding-top-${e}`,paddingRight:e=>`nhsuk-u-padding-right-${e}`,paddingBottom:e=>`nhsuk-u-padding-bottom-${e}`,paddingLeft:e=>`nhsuk-u-padding-left-${e}`,marginResponsive:e=>`nhsuk-u-margin-responsive-${e}`,marginTopResponsive:e=>`nhsuk-u-margin-top-responsive-${e}`,marginRightResponsive:e=>`nhsuk-u-margin-right-responsive-${e}`,marginBottomResponsive:e=>`nhsuk-u-margin-bottom-responsive-${e}`,marginLeftResponsive:e=>`nhsuk-u-margin-left-responsive-${e}`,paddingResponsive:e=>`nhsuk-u-padding-responsive-${e}`,paddingTopResponsive:e=>`nhsuk-u-padding-top-responsive-${e}`,paddingRightResponsive:e=>`nhsuk-u-padding-right-responsive-${e}`,paddingBottomResponsive:e=>`nhsuk-u-padding-bottom-responsive-${e}`,paddingLeftResponsive:e=>`nhsuk-u-padding-left-responsive-${e}`},xy=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const i=["nhsuk-width-utilities",e&&"nhsuk-width-utilities--debug",t].filter(Boolean).join(" ");return s.jsx("div",{className:i,...r,children:n})},_y={width:e=>`nhsuk-u-width-${e}`,widthTablet:e=>`nhsuk-u-width-${e}-tablet`},wy=["full","three-quarters","two-thirds","one-half","one-third","one-quarter"],Os=({as:e="main",size:t="default",className:n,children:r,...i})=>{const a=["nhsuk-main-wrapper",t==="large"&&"nhsuk-main-wrapper--l",t==="small"&&"nhsuk-main-wrapper--s",n].filter(Boolean).join(" ");return s.jsx(e,{className:a,...i,children:r})};function Sy(e){switch(e){case"xxl":case"xl":return 1;case"l":return 2;case"m":return 3;case"s":return 4;case"xs":return 5;default:return 2}}function ky(e){const t=e.level??Sy(e.size),n=["nhsuk-heading",e.size?`nhsuk-heading--${e.size}`:"",e.className||""].filter(Boolean).join(" "),r=e.marginBottom?{marginBottom:e.marginBottom}:void 0;return{tag:`h${t}`,classes:n,style:r}}const Xt=({level:e,className:t,text:n,html:r,children:i,size:a,marginBottom:o,...l})=>{const c=ky({level:e,size:a,className:t,marginBottom:o}),u=i||(r?s.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n);return $.createElement(c.tag,{className:c.classes,style:c.style,...l},u)};function Cy(e){return{classes:["nhsuk-error-message",e.className||""].filter(Boolean).join(" "),id:e.id,visuallyHiddenText:e.visuallyHiddenText??"Error:"}}const Rs=({id:e,className:t,visuallyHiddenText:n="Error:",children:r,...i})=>{const a=Cy({id:e,className:t,visuallyHiddenText:n});return s.jsxs("span",{className:a.classes,id:a.id,...i,children:[s.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[a.visuallyHiddenText," "]}),r]})},Ny=({titleText:e="There is a problem",titleHtml:t,descriptionText:n,descriptionHtml:r,errorList:i,className:a,children:o,...l})=>{const c=$.useRef(null);$.useEffect(()=>{c.current&&c.current.focus()},[]);const u=ve("nhsuk-error-summary",a),d=()=>t?s.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,f=()=>r?s.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n,p=m=>{const y=m.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:m.html}}):m.text;return m.href?s.jsx("a",{href:m.href,...m.attributes,children:y}):y};return s.jsxs("div",{ref:c,className:u,"aria-labelledby":"error-summary-title",role:"alert",tabIndex:-1,"data-module":"nhsuk-error-summary",...l,children:[s.jsx("h2",{className:"nhsuk-error-summary__title",id:"error-summary-title",children:d()}),s.jsxs("div",{className:"nhsuk-error-summary__body",children:[o&&s.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:o}),!o&&(n||r)&&s.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:f()}),s.jsx("ul",{className:"nhsuk-list nhsuk-error-summary__list",role:"list",children:i.map((m,y)=>s.jsx("li",{children:p(m)},y))})]})]})},My=({id:e,className:t,items:n,namePrefix:r,values:i={},fieldset:a,hint:o,errorMessage:l,onChange:c,...u})=>{const[d,f]=$.useState(()=>({day:i.day||"",month:i.month||"",year:i.year||""})),[p,m]=$.useState({}),y=A=>A%4===0&&A%100!==0||A%400===0,h=(A,L)=>{const z=[31,28,31,30,31,30,31,31,30,31,30,31];return A===2&&y(L)?29:z[A-1]},g=(A,L,z)=>{if(!A)return;if(!/^\d+$/.test(A))return"Day must be a number";const ae=parseInt(A,10);if(ae<1||ae>31)return"Day must be between 1 and 31";if(L&&z){const q=parseInt(L,10),O=parseInt(z,10);if(!isNaN(q)&&!isNaN(O)&&q>=1&&q<=12){const ne=h(q,O);if(ae>ne)return`${["January","February","March","April","May","June","July","August","September","October","November","December"][q-1]} ${O} only has ${ne} days`}}},k=A=>{if(!A)return;if(!/^\d+$/.test(A))return"Month must be a number";const L=parseInt(A,10);if(L<1||L>12)return"Month must be between 1 and 12"},S=A=>{if(!A)return;if(!/^\d+$/.test(A))return"Year must be a number";const L=parseInt(A,10),z=new Date().getFullYear();if(L<1900||L>z+10)return`Year must be between 1900 and ${z+10}`},j=(A,L,z)=>{if(!A||!L||!z)return;const ae=parseInt(A,10),q=parseInt(L,10),O=parseInt(z,10);if(isNaN(ae)||isNaN(q)||isNaN(O)||q<1||q>12||O<1900)return;const ne=h(q,O);ae<1||ae>ne},M=$.useCallback((A,L)=>{const z={...d,[A]:L};f(z),c&&c(z)},[d,c]),b=$.useCallback(A=>{const L=d[A];let z;if(A==="day")z=g(L,d.month,d.year);else if(A==="month"){if(z=k(L),!z&&d.day){const ae=g(d.day,L,d.year);m(q=>({...q,day:ae}))}}else if(A==="year"&&(z=S(L),!z&&d.day&&d.month)){const ae=g(d.day,d.month,L);m(q=>({...q,day:ae}))}if(m(ae=>({...ae,[A]:z})),d.day&&d.month&&d.year){const ae=j(A==="day"?L:d.day,A==="month"?L:d.month,A==="year"?L:d.year);ae&&m(q=>({...q,day:ae}))}},[d,g,k,S,j]),_=$.useMemo(()=>[{name:"day",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"month",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"year",classes:"nhsuk-input--width-4",inputmode:"numeric",pattern:"[0-9]*"}],[]),N=n||_;let w=a?.describedBy||"";const v=o?`${e}-hint`:"",C=l?`${e}-error`:"";v&&(w=w?`${w} ${v}`:v),C&&(w=w?`${w} ${C}`:C);const D=Object.values(p).some(A=>A),I=ve("nhsuk-form-group",{"nhsuk-form-group--error":l||D}),B=ve("nhsuk-date-input",t),E=()=>s.jsxs(s.Fragment,{children:[o&&s.jsx(Hs,{id:v,className:o.classes,children:o.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:o.html}}):o.text}),l&&s.jsx(Rs,{id:C,className:l.classes,children:l.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text}),Object.entries(p).map(([A,L])=>L?s.jsxs(Rs,{id:`${e}-${A}-error`,className:"nhsuk-error-message",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",L]},`${A}-error`):null),s.jsx("div",{className:B,id:e,"data-testid":"date-input",...u,children:N.map(A=>{const L=A.id||`${e}-${A.name}`,z=r?`${r}[${A.name}]`:A.name,ae=A.label||A.name.charAt(0).toUpperCase()+A.name.slice(1),q=p[A.name],O=d[A.name]||"";let ne=w;if(q){const Y=`${e}-${A.name}-error`;ne=ne?`${ne} ${Y}`:Y}return s.jsxs("div",{className:"nhsuk-date-input__item",children:[s.jsx(la,{htmlFor:L,className:"nhsuk-date-input__label",children:ae}),s.jsx(oa,{id:L,name:z,value:O,className:ve("nhsuk-date-input__input",A.classes,{"nhsuk-input--error":q}),inputMode:A.inputmode,autoComplete:A.autocomplete,pattern:A.pattern,"aria-describedby":ne||void 0,hasError:!!q,onChange:Y=>M(A.name,Y.target.value),onBlur:()=>b(A.name)})]},A.name)})})]});return s.jsx("div",{className:I,children:a?s.jsx(ca,{className:a.classes,legend:a.legend?{text:a.legend}:void 0,describedBy:w||void 0,children:E()}):E()})},Jc={animation:{AnimationDurationFast:"150ms",AnimationDurationNormal:"300ms",AnimationDurationSlow:"500ms",AnimationEasingEaseIn:"cubic-bezier(0.4, 0, 1, 1)",AnimationEasingEaseOut:"cubic-bezier(0, 0, 0.2, 1)",AnimationEasingEaseInOut:"cubic-bezier(0.4, 0, 0.2, 1)",AnimationEasingBounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},transition:{TransitionButtonDefault:"background-color 300ms cubic-bezier(0, 0, 0.2, 1)",TransitionButtonShadow:"box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionInputFocus:"border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionCardHover:"border-color 300ms cubic-bezier(0, 0, 0.2, 1)"},border:{BorderWidthDefault:"1px",BorderWidthFormElement:"2px",BorderWidthFormElementError:"4px",BorderWidthCardBottom:"4px",BorderWidthPanel:"4px",BorderWidthTableHeader:"2px",BorderWidthTableCell:"1px",BorderRadiusNone:"0px",BorderRadiusSmall:"4px",BorderRadiusMedium:"8px",BorderRadiusLarge:"12px",BorderColorDefault:"#d8dde0",BorderColorForm:"#4c6272",BorderColorCard:"#d8dde0",BorderColorCardHover:"#aeb7bd",BorderColorError:"#d5281b"},color:{ColorPrimaryBlue:"#005eb8",ColorPrimaryWhite:"#ffffff",ColorPrimaryBlack:"#212b32",ColorPrimaryGreen:"#007f3b",ColorPrimaryPurple:"#330072",ColorPrimaryDarkPink:"#7c2855",ColorPrimaryRed:"#d5281b",ColorPrimaryYellow:"#ffeb3b",ColorSecondaryPaleYellow:"#fff9c4",ColorSecondaryWarmYellow:"#ffb81c",ColorSecondaryOrange:"#ed8b00",ColorSecondaryAquaGreen:"#00a499",ColorSecondaryPink:"#ae2573",ColorGrey1:"#4c6272",ColorGrey2:"#768692",ColorGrey3:"#aeb7bd",ColorGrey4:"#d8dde0",ColorGrey5:"#f0f4f5",ColorTextPrimary:"#212b32",ColorTextSecondary:"#4c6272",ColorTextReverse:"#ffffff",ColorTextPrint:"#212b32",ColorLinkDefault:"#005eb8",ColorLinkHover:"#7c2855",ColorLinkActive:"#003087",ColorLinkVisited:"#330072",ColorFocusBackground:"#ffeb3b",ColorFocusText:"#212b32",ColorBorderDefault:"#d8dde0",ColorBorderSecondary:"#ffffff33",ColorError:"#d5281b",ColorFormBorder:"#4c6272",ColorFormBackground:"#ffffff",ColorButtonPrimaryBackground:"#007f3b",ColorButtonPrimaryText:"#ffffff",ColorButtonPrimaryHover:"#006530",ColorButtonPrimaryActive:"#004021",ColorButtonPrimaryShadow:"#004021",ColorButtonSecondaryBackground:"#00000000",ColorButtonSecondaryBackgroundSolid:"#ffffff",ColorButtonSecondaryBorder:"#005eb8",ColorButtonSecondaryText:"#005eb8",ColorButtonSecondaryHover:"#d9e5f2",ColorButtonSecondaryActive:"#c7daf0",ColorButtonSecondaryShadow:"#005eb8",ColorButtonReverseBackground:"#ffffff",ColorButtonReverseText:"#212b32",ColorButtonReverseHover:"#d9dde0",ColorButtonReverseActive:"#b3bcc2",ColorButtonReverseShadow:"#b3bcc2",ColorButtonWarningBackground:"#d5281b",ColorButtonWarningHover:"#aa2016",ColorButtonWarningActive:"#6a140e",ColorButtonWarningShadow:"#6a140e",ColorButtonLoginBackground:"#005eb8",ColorButtonLoginHover:"#004b93",ColorButtonLoginActive:"#002f5c",ColorButtonLoginShadow:"#002f5c"},component:{ComponentButtonPaddingMobileVertical:"8px",ComponentButtonPaddingMobileHorizontal:"16px",ComponentButtonPaddingDesktopVertical:"12px",ComponentButtonPaddingDesktopHorizontal:"16px",ComponentButtonShadowSize:"4px",ComponentFormInputMinHeight:"40px",ComponentFormInputPadding:"4px",ComponentFormCheckboxSize:"40px",ComponentFormCheckboxLabelPadding:"12px",ComponentCardPaddingMobile:"16px",ComponentCardPaddingDesktop:"32px",ComponentCardHeadingMargin:"16px",ComponentPanelPaddingMobile:"20px",ComponentPanelPaddingDesktop:"28px",ComponentBreadcrumbChevronMarginLeft:"9px",ComponentBreadcrumbChevronMarginRight:"2px",ComponentBreadcrumbPaddingTopMobile:"16px",ComponentBreadcrumbPaddingTopDesktop:"24px",ComponentSummaryListCellPaddingVertical:"8px",ComponentSummaryListCellPaddingHorizontal:"24px",ComponentSummaryListRowMargin:"16px",ComponentSpread:"4px",ComponentBlur:"4px",ComponentLink:"4px",ComponentDetails:"8px",ComponentExpander:"4px",ComponentPagination:"16px"},button:{ButtonPrimaryBackgroundDefault:"#007f3b",ButtonPrimaryBackgroundHover:"#006530",ButtonPrimaryBackgroundActive:"#004021",ButtonPrimaryBackgroundDisabled:"#d8dde0",ButtonPrimaryTextDefault:"#ffffff",ButtonPrimaryTextDisabled:"#768692",ButtonPrimaryBorderDefault:"#00000000",ButtonPrimaryBorderFocus:"#ffeb3b",ButtonSecondaryBackgroundDefault:"#00000000",ButtonSecondaryBackgroundSolid:"#ffffff",ButtonSecondaryBackgroundHover:"#d9e5f2",ButtonSecondaryBackgroundActive:"#c7daf0",ButtonSecondaryTextDefault:"#005eb8",ButtonSecondaryBorderDefault:"#005eb8",ButtonSpacingPaddingVerticalMobile:"8px",ButtonSpacingPaddingHorizontalMobile:"16px",ButtonSpacingPaddingVerticalDesktop:"12px",ButtonSpacingPaddingHorizontalDesktop:"16px",ButtonBorderWidth:"2px",ButtonBorderRadius:"4px",ButtonShadowSize:"4px",ButtonTypographyWeight:"600"},card:{CardBackgroundDefault:"#ffffff",CardBorderDefault:"#d8dde0",CardBorderHover:"#aeb7bd",CardBorderBottom:"#f0f4f5",CardTextHeading:"#212b32",CardTextDescription:"#212b32",CardTextLink:"#005eb8",CardSpacingPaddingMobile:"16px",CardSpacingPaddingDesktop:"32px",CardSpacingHeadingMargin:"16px",CardBorderWidthDefault:"1px",CardBorderWidthBottom:"4px",CardShadowDefault:"none",CardShadowHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},form:{FormInputBackgroundDefault:"#ffffff",FormInputBackgroundFocus:"#ffffff",FormInputBackgroundDisabled:"#d8dde0",FormInputBackgroundError:"#ffffff",FormInputBorderDefault:"#4c6272",FormInputBorderFocus:"#ffeb3b",FormInputBorderError:"#d5281b",FormInputBorderDisabled:"#aeb7bd",FormInputTextDefault:"#212b32",FormInputTextPlaceholder:"#4c6272",FormInputTextDisabled:"#768692",FormLabelTextDefault:"#212b32",FormLabelTextRequired:"#ffffff",FormLabelTypographyWeight:"600",FormErrorTextDefault:"#d5281b",FormErrorTypographyWeight:"600",FormHintTextDefault:"#4c6272",FormSpacingInputPadding:"4px",FormSpacingInputMinHeight:"40px",FormSpacingCheckboxSize:"40px",FormSpacingCheckboxLabelPadding:"12px",FormBorderWidthDefault:"2px",FormBorderWidthError:"4px",FormBorderRadius:"0px"},size:{SizeIconSmall:"16px",SizeIconMedium:"18px",SizeIconLarge:"24px",SizeIconExtraLarge:"32px",SizeIconNhsDefault:"34px",SizeFormControlSmall:"32px",SizeFormControlMedium:"40px",SizeFormControlLarge:"48px",SizeFormInputWidthXs:"5.4ex",SizeFormInputWidthSm:"7.2ex",SizeFormInputWidthMd:"9ex",SizeFormInputWidthLg:"10.8ex",SizeFormInputWidthXl:"20ex",SizeFormInputWidth2xl:"38ex",SizeFormInputWidth3xl:"56ex",SizeButtonMinHeightMobile:"44px",SizeButtonMinHeightDesktop:"40px"},layout:{LayoutContainerMaxWidth:"1020px",LayoutColumnFull:"100%",LayoutColumnHalf:"50%",LayoutColumnThird:"33.333%",LayoutColumnQuarter:"25%",LayoutColumnActions:"20%"},breakpoint:{BreakpointMobile:"320px",BreakpointTablet:"641px",BreakpointDesktop:"1025px",BreakpointLargeDesktop:"1280px"},grid:{GridPageWidth:"960px",GridGutter:"32px",GridGutterHalf:"16px"},state:{StateErrorBackground:"#d5281b",StateErrorBorder:"#d5281b",StateErrorText:"#ffffff",StateSuccessBackground:"#007f3b",StateSuccessBorder:"#007f3b",StateSuccessText:"#ffffff",StateWarningBackground:"#ffeb3b",StateWarningBorder:"#ffeb3b",StateWarningText:"#212b32",StateInfoBackground:"#005eb8",StateInfoBorder:"#005eb8",StateInfoText:"#ffffff",StateDisabledBackground:"#d8dde0",StateDisabledBorder:"#aeb7bd",StateDisabledText:"#768692"},shadow:{ShadowButtonDefault:"0 4px 0 #004021",ShadowButtonSecondary:"0 4px 0 #005eb8",ShadowButtonWarning:"0 4px 0 #6a140e",ShadowButtonFocus:"0 4px 0 #ffeb3b",ShadowCardDefault:"none",ShadowCardHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},"focus-outline":{FocusOutlineWidth:"4px",FocusOutlineOffset:"0px",FocusOutlineStyle:"solid"},"focus-shadow":{FocusShadowInput:"0 0 0 3px #ffeb3b",FocusShadowButton:"0 0 0 3px #ffeb3b"},elevation:{ElevationNone:"none",ElevationLow:"0 1px 3px rgba(0, 0, 0, 0.12)",ElevationMedium:"0 2px 6px rgba(0, 0, 0, 0.16)",ElevationHigh:"0 4px 12px rgba(0, 0, 0, 0.20)"},spacing:{Spacing0:"0",Spacing1:"4px",Spacing2:"8px",Spacing3:"16px",Spacing4:"24px",Spacing5:"32px",Spacing6:"40px",Spacing7:"48px",Spacing8:"56px",Spacing9:"64px"},"spacing-responsive":{SpacingResponsive0Mobile:"0",SpacingResponsive0Tablet:"0",SpacingResponsive1Mobile:"4px",SpacingResponsive1Tablet:"4px",SpacingResponsive2Mobile:"8px",SpacingResponsive2Tablet:"8px",SpacingResponsive3Mobile:"8px",SpacingResponsive3Tablet:"16px",SpacingResponsive4Mobile:"16px",SpacingResponsive4Tablet:"24px",SpacingResponsive5Mobile:"24px",SpacingResponsive5Tablet:"32px",SpacingResponsive6Mobile:"32px",SpacingResponsive6Tablet:"40px",SpacingResponsive7Mobile:"40px",SpacingResponsive7Tablet:"48px",SpacingResponsive8Mobile:"48px",SpacingResponsive8Tablet:"56px",SpacingResponsive9Mobile:"56px",SpacingResponsive9Tablet:"64px"},font:{FontFamilyBase:"Frutiger W01",FontFamilyFallback:"Arial, Helvetica, sans-serif",FontFamilyPrint:"sans-serif",FontWeightNormal:"400",FontWeightBold:"600",FontWeightLight:"400",FontSize14Mobile:"12px",FontSize14Tablet:"14px",FontSize14Print:"12pt",FontSize16Mobile:"14px",FontSize16Tablet:"16px",FontSize16Print:"12pt",FontSize19Mobile:"16px",FontSize19Tablet:"19px",FontSize19Print:"13pt",FontSize22Mobile:"19px",FontSize22Tablet:"22px",FontSize22Print:"15pt",FontSize26Mobile:"22px",FontSize26Tablet:"26px",FontSize26Print:"17pt",FontSize36Mobile:"27px",FontSize36Tablet:"36px",FontSize36Print:"20pt",FontSize48Mobile:"33px",FontSize48Tablet:"48px",FontSize48Print:"24pt",FontSizeBase:"16px",FontLineHeightBase:"24px"},headings:{xl:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},l:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},m:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},s:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xs:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}}},paragraphs:{body:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bodyLarge:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},bodySmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ledeText:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},ledeTextSmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}}}},Qc=$.createContext(Jc),jy=({children:e,theme:t={}})=>{const n={...Jc,...t};return s.jsx(Qc.Provider,{value:n,children:e})},Ty=()=>{const e=$.useContext(Qc);if(!e)throw new Error("useNHSTheme must be used within an NHSThemeProvider");return e};function Dy(){return`
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 400;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff") format("woff");
	}
	
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 600;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff") format("woff");
	}
  `}function Iy(){if(typeof document>"u"||document.getElementById("nhs-fonts"))return;const e=document.createElement("style");e.id="nhs-fonts",e.textContent=Dy(),document.head.appendChild(e)}const Ly=({children:e,theme:t})=>($.useEffect(()=>{Iy()},[]),s.jsx(jy,{theme:t,children:e})),Py="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1MTIiIGhlaWdodD0iMTEzIiAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgaWQ9ImZkcGxvZ28iPgogICAgPHJlY3QgaWQ9ImZkcGxvZ28tcmVjdGFuZ2xlIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigzMiwgOTUsIDE3MikiIHg9IjIuNyIgeT0iLTAuMDMiIHdpZHRoPSIxNDQuMSIgaGVpZ2h0PSI1OC4wNSIgLz4KICAgIDxwYXRoIGlkPSJmZHBsb2dvLWJlemllciIgc3Ryb2tlPSJub25lIiBmaWxsPSJyZ2IoMjU0LCAyNTQsIDI1NCkiIGQ9Ik0gNjAuNjEsNS42IEwgNTAuNjYsNTIuMzEgMzUuMDYsNTIuMzEgMjUuMjQsMTkuOTkgMjUuMTEsMTkuOTkgMTguNTgsNTIuMzEgNi43NCw1Mi4zMSAxNi43Nyw1LjYgMzIuNDMsNS42IDQyLjA1LDM3Ljk5IDQyLjE4LDM3Ljk5IDQ4Ljc3LDUuNiA2MC42MSw1LjYgWiBNIDYwLjYxLDUuNiIgLz4KICAgIDxwYXRoIGlkPSJmZHBsb2dvLWJlemllcjIiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDEwNS4yNiw1LjYgTCA5NS41MSw1Mi4zMSA4Mi45NCw1Mi4zMSA4Ny4xMSwzMi4zIDcyLjI0LDMyLjMgNjguMDcsNTIuMzEgNTUuNDksNTIuMzEgNjUuMjUsNS42IDc3LjgyLDUuNiA3NC4xMywyMy40NyA4OC45OSwyMy40NyA5Mi42OSw1LjYgMTA1LjI2LDUuNiBaIE0gMTA1LjI2LDUuNiIgLz4KICAgIDxwYXRoIGlkPSJmZHBsb2dvLWJlemllcjMiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDE0MS4zOCw2Ljg3IEwgMTM4LjM1LDE2LjE3IEMgMTM1LjkyLDE1LjA0IDEzMi42MywxNC4wNCAxMjcuOTksMTQuMDQgMTIzLjAyLDE0LjA0IDExOC45OCwxNC43NyAxMTguOTgsMTguNTIgMTE4Ljk4LDI1LjE0IDEzNy4yLDIyLjY3IDEzNy4yLDM2Ljg1IDEzNy4yLDQ5Ljc3IDEyNS4xNyw1My4xMiAxMTQuMjcsNTMuMTIgMTA5LjQzLDUzLjEyIDEwMy44NSw1MS45NyA5OS43NSw1MC43IEwgMTAyLjcxLDQxLjIgQyAxMDUuMTksNDIuOCAxMTAuMTcsNDMuODggMTE0LjI3LDQzLjg4IDExOC4xOCw0My44OCAxMjQuMjksNDMuMTQgMTI0LjI5LDM4LjMyIDEyNC4yOSwzMC44MyAxMDYuMDYsMzMuNjQgMTA2LjA2LDIwLjQ2IDEwNi4wNiw4LjQyIDExNi42OSw0LjggMTI2Ljk4LDQuOCAxMzIuNzcsNC44IDEzOC4yMSw1LjQxIDE0MS4zOCw2Ljg3IFogTSAxNDEuMzgsNi44NyIgLz4KICAgIAogICAgPHRleHQgIGZpbGw9InJnYigzNSwgMzEsIDMyKSIgZm9udC1mYW1pbHk9IkZydXRpZ2VyTFRQcm8tQm9sZCwgJ0ZydXRpZ2VyIExUIFBybycsIHNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSJib2xkIiBmb250LXNpemU9IjQwIiB4PSIwIiB5PSI2NC44OSI+PHRzcGFuIHg9IjAiIHk9IjEwMi44OSI+RmVkZXJhdGVkIERhdGEgUGxhdGZvcm08L3RzcGFuPjwvdGV4dD4KPC9zdmc+Cg==",Ay="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyOTAiIGhlaWdodD0iMTU1IiAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgaWQ9ImZkcHR3b2xpbmUiPgogICAgPHJlY3QgaWQ9ImZkcHR3b2xpbmUtcmVjdGFuZ2xlIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigzMiwgOTUsIDE3MikiIHg9IjIuNyIgeT0iLTAuMDMiIHdpZHRoPSIxNDQuMSIgaGVpZ2h0PSI1OC4wNSIgLz4KICAgIDxwYXRoIGlkPSJmZHB0d29saW5lLWJlemllciIgc3Ryb2tlPSJub25lIiBmaWxsPSJyZ2IoMjU0LCAyNTQsIDI1NCkiIGQ9Ik0gNjAuNjEsNS42IEwgNTAuNjYsNTIuMzEgMzUuMDYsNTIuMzEgMjUuMjQsMTkuOTkgMjUuMTEsMTkuOTkgMTguNTgsNTIuMzEgNi43NCw1Mi4zMSAxNi43Nyw1LjYgMzIuNDMsNS42IDQyLjA1LDM3Ljk5IDQyLjE4LDM3Ljk5IDQ4Ljc3LDUuNiA2MC42MSw1LjYgWiBNIDYwLjYxLDUuNiIgLz4KICAgIDxwYXRoIGlkPSJmZHB0d29saW5lLWJlemllcjIiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDEwNS4yNiw1LjYgTCA5NS41MSw1Mi4zMSA4Mi45NCw1Mi4zMSA4Ny4xMSwzMi4zIDcyLjI0LDMyLjMgNjguMDcsNTIuMzEgNTUuNDksNTIuMzEgNjUuMjUsNS42IDc3LjgyLDUuNiA3NC4xMywyMy40NyA4OC45OSwyMy40NyA5Mi42OSw1LjYgMTA1LjI2LDUuNiBaIE0gMTA1LjI2LDUuNiIgLz4KICAgIDxwYXRoIGlkPSJmZHB0d29saW5lLWJlemllcjMiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDE0MS4zOCw2Ljg3IEwgMTM4LjM1LDE2LjE3IEMgMTM1LjkyLDE1LjA0IDEzMi42MywxNC4wNCAxMjcuOTksMTQuMDQgMTIzLjAyLDE0LjA0IDExOC45OCwxNC43NyAxMTguOTgsMTguNTIgMTE4Ljk4LDI1LjE0IDEzNy4yLDIyLjY3IDEzNy4yLDM2Ljg1IDEzNy4yLDQ5Ljc3IDEyNS4xNyw1My4xMiAxMTQuMjcsNTMuMTIgMTA5LjQzLDUzLjEyIDEwMy44NSw1MS45NyA5OS43NSw1MC43IEwgMTAyLjcxLDQxLjIgQyAxMDUuMTksNDIuOCAxMTAuMTcsNDMuODggMTE0LjI3LDQzLjg4IDExOC4xOCw0My44OCAxMjQuMjksNDMuMTQgMTI0LjI5LDM4LjMyIDEyNC4yOSwzMC44MyAxMDYuMDYsMzMuNjQgMTA2LjA2LDIwLjQ2IDEwNi4wNiw4LjQyIDExNi42OSw0LjggMTI2Ljk4LDQuOCAxMzIuNzcsNC44IDEzOC4yMSw1LjQxIDE0MS4zOCw2Ljg3IFogTSAxNDEuMzgsNi44NyIgLz4KICAgIDx0ZXh0ICBmaWxsPSJyZ2IoMzUsIDMxLCAzMikiIGZvbnQtZmFtaWx5PSJGcnV0aWdlckxUUHJvLUJvbGQsICdGcnV0aWdlciBMVCBQcm8nLCBzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iYm9sZCIgZm9udC1zaXplPSI0MCIgeD0iMCIgeT0iNjQuODkiPjx0c3BhbiB4PSIwIiB5PSIxMDIuODkiPkZlZGVyYXRlZCBEYXRhIAo8L3RzcGFuPjx0c3BhbiB4PSIwIiB5PSIxNTAuODkiPlBsYXRmb3JtPC90c3Bhbj48L3RleHQ+Cjwvc3ZnPgo=",Ey="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyOTAiIGhlaWdodD0iMTU1IiB4bWw6c3BhY2U9InByZXNlcnZlIiBpZD0iZmRwdHdvbGluZWludmVyc2UiPgoJPHJlY3QgaWQ9ImZkcHR3b2xpbmVpbnZlcnNlLXJlY3RhbmdsZSIgc3Ryb2tlPSJub25lIiBmaWxsPSJyZ2IoMzIsIDk1LCAxNzIpIiB4PSIyLjciIHk9Ii0wLjAzIiB3aWR0aD0iMTQ0LjEiIGhlaWdodD0iNTguMDUiIC8+Cgk8cGF0aCBpZD0iZmRwdHdvbGluZWludmVyc2UtYmV6aWVyIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigyNTQsIDI1NCwgMjU0KSIgZD0iTSA2MC42MSw1LjYgTCA1MC42Niw1Mi4zMSAzNS4wNiw1Mi4zMSAyNS4yNCwxOS45OSAyNS4xMSwxOS45OSAxOC41OCw1Mi4zMSA2Ljc0LDUyLjMxIDE2Ljc3LDUuNiAzMi40Myw1LjYgNDIuMDUsMzcuOTkgNDIuMTgsMzcuOTkgNDguNzcsNS42IDYwLjYxLDUuNiBaIE0gNjAuNjEsNS42IiAvPgoJPHBhdGggaWQ9ImZkcHR3b2xpbmVpbnZlcnNlLWJlemllcjIiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBkPSJNIDEwNS4yNiw1LjYgTCA5NS41MSw1Mi4zMSA4Mi45NCw1Mi4zMSA4Ny4xMSwzMi4zIDcyLjI0LDMyLjMgNjguMDcsNTIuMzEgNTUuNDksNTIuMzEgNjUuMjUsNS42IDc3LjgyLDUuNiA3NC4xMywyMy40NyA4OC45OSwyMy40NyA5Mi42OSw1LjYgMTA1LjI2LDUuNiBaIE0gMTA1LjI2LDUuNiIgLz4KCTxwYXRoIGlkPSJmZHB0d29saW5laW52ZXJzZS1iZXppZXIzIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigyNTQsIDI1NCwgMjU0KSIgZD0iTSAxNDEuMzgsNi44NyBMIDEzOC4zNSwxNi4xNyBDIDEzNS45MiwxNS4wNCAxMzIuNjMsMTQuMDQgMTI3Ljk5LDE0LjA0IDEyMy4wMiwxNC4wNCAxMTguOTgsMTQuNzcgMTE4Ljk4LDE4LjUyIDExOC45OCwyNS4xNCAxMzcuMiwyMi42NyAxMzcuMiwzNi44NSAxMzcuMiw0OS43NyAxMjUuMTcsNTMuMTIgMTE0LjI3LDUzLjEyIDEwOS40Myw1My4xMiAxMDMuODUsNTEuOTcgOTkuNzUsNTAuNyBMIDEwMi43MSw0MS4yIEMgMTA1LjE5LDQyLjggMTEwLjE3LDQzLjg4IDExNC4yNyw0My44OCAxMTguMTgsNDMuODggMTI0LjI5LDQzLjE0IDEyNC4yOSwzOC4zMiAxMjQuMjksMzAuODMgMTA2LjA2LDMzLjY0IDEwNi4wNiwyMC40NiAxMDYuMDYsOC40MiAxMTYuNjksNC44IDEyNi45OCw0LjggMTMyLjc3LDQuOCAxMzguMjEsNS40MSAxNDEuMzgsNi44NyBaIE0gMTQxLjM4LDYuODciIC8+Cgk8dGV4dCBmaWxsPSJyZ2IoMjU0LCAyNTQsIDI1NCkiIGZvbnQtZmFtaWx5PSJGcnV0aWdlckxUUHJvLUJvbGQsICdGcnV0aWdlciBMVCBQcm8nLCBzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iYm9sZCIgZm9udC1zaXplPSI0MCIgeD0iMCIgeT0iNjQuODkiPgoJCTx0c3BhbiB4PSIwIiB5PSIxMDIuODkiPgoJCQlGZWRlcmF0ZWQgRGF0YQoJCTwvdHNwYW4+CgkJPHRzcGFuIHg9IjAiIHk9IjE1MC44OSI+CgkJCVBsYXRmb3JtCgkJPC90c3Bhbj4KCTwvdGV4dD4KPC9zdmc+Cg==",Fy="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1MTIiIGhlaWdodD0iMTEzIiAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgaWQ9ImZkcGxvZ29pbnZlcnNlIj4KICAgIDxyZWN0IGlkPSJmZHBsb2dvaW52ZXJzZS1yZWN0YW5nbGUiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiB4PSIyLjciIHk9Ii0wLjAzIiB3aWR0aD0iMTQ0LjEiIGhlaWdodD0iNTguMDUiIC8+CiAgICA8ZyBpZD0iZmRwbG9nb2ludmVyc2UtZ3JvdXAiPgogICAgICAgIDxwYXRoIGlkPSJmZHBsb2dvaW52ZXJzZS1iZXppZXIzIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigwLCA5NCwgMTg0KSIgZD0iTSAxNDEuMzgsNi44NyBMIDEzOC4zNSwxNi4xNyBDIDEzNS45MiwxNS4wNCAxMzIuNjMsMTQuMDQgMTI3Ljk5LDE0LjA0IDEyMy4wMiwxNC4wNCAxMTguOTgsMTQuNzcgMTE4Ljk4LDE4LjUyIDExOC45OCwyNS4xNCAxMzcuMiwyMi42NyAxMzcuMiwzNi44NSAxMzcuMiw0OS43NyAxMjUuMTcsNTMuMTIgMTE0LjI3LDUzLjEyIDEwOS40Myw1My4xMiAxMDMuODUsNTEuOTcgOTkuNzUsNTAuNyBMIDEwMi43MSw0MS4yIEMgMTA1LjE5LDQyLjggMTEwLjE3LDQzLjg4IDExNC4yNyw0My44OCAxMTguMTgsNDMuODggMTI0LjI5LDQzLjE0IDEyNC4yOSwzOC4zMiAxMjQuMjksMzAuODMgMTA2LjA2LDMzLjY0IDEwNi4wNiwyMC40NiAxMDYuMDYsOC40MiAxMTYuNjksNC44IDEyNi45OCw0LjggMTMyLjc3LDQuOCAxMzguMjEsNS40MSAxNDEuMzgsNi44NyBaIE0gMTQxLjM4LDYuODciIC8+CiAgICAgICAgPHBhdGggaWQ9ImZkcGxvZ29pbnZlcnNlLWJlemllcjIiIHN0cm9rZT0ibm9uZSIgZmlsbD0icmdiKDAsIDk0LCAxODQpIiBkPSJNIDEwNS4yNiw1LjYgTCA5NS41MSw1Mi4zMSA4Mi45NCw1Mi4zMSA4Ny4xMSwzMi4zIDcyLjI0LDMyLjMgNjguMDcsNTIuMzEgNTUuNDksNTIuMzEgNjUuMjUsNS42IDc3LjgyLDUuNiA3NC4xMywyMy40NyA4OC45OSwyMy40NyA5Mi42OSw1LjYgMTA1LjI2LDUuNiBaIE0gMTA1LjI2LDUuNiIgLz4KICAgICAgICA8cGF0aCBpZD0iZmRwbG9nb2ludmVyc2UtYmV6aWVyIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYigwLCA5NCwgMTg0KSIgZD0iTSA2MC42MSw1LjYgTCA1MC42Niw1Mi4zMSAzNS4wNiw1Mi4zMSAyNS4yNCwxOS45OSAyNS4xMSwxOS45OSAxOC41OCw1Mi4zMSA2Ljc0LDUyLjMxIDE2Ljc3LDUuNiAzMi40Myw1LjYgNDIuMDUsMzcuOTkgNDIuMTgsMzcuOTkgNDguNzcsNS42IDYwLjYxLDUuNiBaIE0gNjAuNjEsNS42IiAvPgogICAgPC9nPgogICAgCiAgICA8dGV4dCAgZmlsbD0icmdiKDI1NCwgMjU0LCAyNTQpIiBmb250LWZhbWlseT0iRnJ1dGlnZXJMVFByby1Cb2xkLCAnRnJ1dGlnZXIgTFQgUHJvJywgc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZvbnQtc2l6ZT0iNDAiIHg9IjAiIHk9IjY0Ljg5Ij48dHNwYW4geD0iMCIgeT0iMTAyLjg5Ij5GZWRlcmF0ZWQgRGF0YSBQbGF0Zm9ybTwvdHNwYW4+PC90ZXh0Pgo8L3N2Zz4K",$y="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='357'%20height='114'%20xml:space='preserve'%20id='fdpgraphic'%3e%3cdefs%3e%3clinearGradient%20id='fdpgraphic-gradient-rectangle2'%20x1='113.66'%20y1='27.99'%20x2='0.02'%20y2='27.99'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0'%20stop-color='rgb(96,%20178,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.51'%20stop-color='rgb(34,%2094,%20172)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdpgraphic-gradient2-clip'%20x1='243.8'%20y1='28.5'%20x2='113.64'%20y2='28.5'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(4,%20150,%2071)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.64'%20stop-color='rgb(51,%20159,%20112)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(98,%20167,%20153)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdpgraphic-gradient4-bezier4'%20x1='357.05'%20y1='85.21'%20x2='243.44'%20y2='85.21'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(214,%20203,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.86'%20stop-color='rgb(234,%20229,%20240)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(255,%20255,%20255)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cg%20id='fdpgraphic-group3'%3e%3cg%20id='fdpgraphic-squareGroup'%3e%3crect%20id='fdpgraphic-rectangle'%20stroke='none'%20fill='rgb(34,%2094,%20172)'%20x='0.02'%20y='0.49'%20width='113.6'%20height='113.6'%20/%3e%3crect%20id='fdpgraphic-rectangle2'%20stroke='none'%20fill='url(%23fdpgraphic-gradient-rectangle2)'%20x='0'%20y='0'%20width='113.65'%20height='56'%20/%3e%3c/g%3e%3cg%20id='fdpgraphic-hexagonGroup'%3e%3cpath%20id='fdpgraphic-polygon'%20stroke='none'%20fill='rgb(73,%20160,%20152)'%20d='M%20146.15,-0%20L%20211.25,0%20243.8,57.03%20211.25,114.06%20146.15,114.06%20113.6,57.03%20146.15,-0%20Z%20M%20146.15,-0'%20/%3e%3cg%20id='fdpgraphic-hexagon'%3e%3cpath%20id='fdpgraphic-clip'%20stroke='none'%20fill='url(%23fdpgraphic-gradient2-clip)'%20d='M%20146.18,-0%20L%20113.64,57%20243.8,57%20211.26,-0%20146.18,-0%20Z%20M%20146.18,-0'%20/%3e%3c/g%3e%3c/g%3e%3cg%20id='fdpgraphic-circleGroup'%3e%3ccircle%20id='fdpgraphic-oval'%20stroke='none'%20fill='rgb(214,%20203,%20226)'%20cx='300.25'%20cy='56.8'%20r='56.8'%20/%3e%3cpath%20id='fdpgraphic-bezier4'%20stroke='none'%20fill='url(%23fdpgraphic-gradient4-bezier4)'%20d='M%20300.25,56.8%20L%20243.45,56.8%20C%20243.45,88.18%20268.88,113.61%20300.25,113.61%20L%20300.25,113.61%20C%20331.62,113.61%20357.05,88.18%20357.05,56.8%20L%20357.05,56.8%20300.25,56.8%20Z%20M%20300.25,56.8'%20/%3e%3c/g%3e%3cpath%20id='fdpgraphic-bezier5'%20stroke='rgb(217,%20216,%20216)'%20stroke-width='2.49'%20stroke-miterlimit='2.49'%20fill='none'%20d='M%2054.9,56.9%20L%20301.64,56.9'%20/%3e%3c/g%3e%3c/svg%3e",By="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='393'%20height='47'%20xml:space='preserve'%20id='fdplockuplogo'%3e%3cdefs%3e%3clinearGradient%20id='fdplockuplogo-gradient-rectangle2'%20x1='45.65'%20y1='11.5'%20x2='0.01'%20y2='11.5'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0'%20stop-color='rgb(96,%20178,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.51'%20stop-color='rgb(34,%2094,%20172)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdplockuplogo-gradient2-clip'%20x1='98.8'%20y1='12'%20x2='45.64'%20y2='12'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(4,%20150,%2071)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.64'%20stop-color='rgb(51,%20159,%20112)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(98,%20167,%20153)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdplockuplogo-gradient4-bezier4'%20x1='145.05'%20y1='34.96'%20x2='98.45'%20y2='34.96'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(214,%20203,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.86'%20stop-color='rgb(234,%20229,%20240)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(255,%20255,%20255)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cpath%20id='fdplockuplogo-bezier7'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20157.2,1.11%20L%20168.06,1.11%20184.85,34.06%20184.97,34.06%20184.97,1.11%20193.43,1.11%20193.43,45.17%20182.64,45.17%20165.78,12.22%20165.66,12.22%20165.66,45.17%20157.2,45.17%20157.2,1.11%20Z%20M%20157.2,1.11'%20/%3e%3cpath%20id='fdplockuplogo-bezier8'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20200.37,1.11%20L%20209.21,1.11%20209.21,18.91%20226.88,18.91%20226.88,1.11%20235.72,1.11%20235.72,45.17%20226.88,45.17%20226.88,25.85%20209.21,25.85%20209.21,45.17%20200.37,45.17%20200.37,1.11%20Z%20M%20200.37,1.11'%20/%3e%3cpath%20id='fdplockuplogo-bezier9'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20267.78,9.19%20C%20265,7.99%20261.91,7.29%20258.81,7.29%20255.78,7.29%20251.87,8.62%20251.87,13.42%20251.87,21.05%20271.19,17.84%20271.19,32.61%20271.19,42.27%20263.55,45.93%20254.65,45.93%20249.85,45.93%20247.7,45.3%20243.35,44.22%20L%20244.17,36.27%20C%20247.2,37.91%20250.67,38.98%20254.14,38.98%20257.49,38.98%20261.97,37.28%20261.97,33.3%20261.97,24.91%20242.65,28.38%20242.65,13.79%20242.65,3.95%20250.29,0.35%20258.06,0.35%20261.84,0.35%20265.38,0.85%20268.6,1.93%20L%20267.78,9.19%20Z%20M%20267.78,9.19'%20/%3e%3cpath%20id='fdplockuplogo-bezier10'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20287.4,1.11%20L%20311.89,1.11%20311.89,8.05%20296.23,8.05%20296.23,18.91%20311.13,18.91%20311.13,25.85%20296.23,25.85%20296.23,45.17%20287.4,45.17%20287.4,1.11%20Z%20M%20287.4,1.11'%20/%3e%3cpath%20id='fdplockuplogo-bezier11'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20327.66,38.23%20L%20332.59,38.23%20C%20339.97,38.23%20347.11,32.73%20347.11,23.14%20347.11,13.54%20339.97,8.05%20332.59,8.05%20L%20327.66,8.05%20327.66,38.23%20Z%20M%20318.82,1.1%20L%20330.88,1.1%20C%20344.39,1.1%20356.32,5.65%20356.32,23.14%20356.32,40.63%20344.39,45.17%20330.88,45.17%20L%20318.82,45.17%20318.82,1.1%20Z%20M%20318.82,1.1'%20/%3e%3cpath%20id='fdplockuplogo-bezier12'%20stroke='none'%20fill='rgb(33,%2094,%20171)'%20d='M%20372.09,21.5%20L%20375.19,21.5%20C%20379.61,21.5%20383.58,20.04%20383.58,14.93%20383.58,9.82%20379.73,8.05%20375.19,8.05%20L%20372.09,8.05%20372.09,21.5%20Z%20M%20363.26,1.11%20L%20374.43,1.11%20C%20384.03,1.11%20392.8,3.88%20392.8,14.43%20392.8,24.72%20385.29,28.44%20375.82,28.44%20L%20372.09,28.44%20372.09,45.17%20363.26,45.17%20363.26,1.11%20Z%20M%20363.26,1.11'%20/%3e%3cg%20id='fdplockuplogo-group3'%3e%3cg%20id='fdplockuplogo-squareGroup'%3e%3crect%20id='fdplockuplogo-rectangle'%20stroke='none'%20fill='rgb(34,%2094,%20172)'%20x='0.02'%20y='0.49'%20width='45.6'%20height='46.6'%20/%3e%3crect%20id='fdplockuplogo-rectangle2'%20stroke='none'%20fill='url(%23fdplockuplogo-gradient-rectangle2)'%20x='0'%20y='0'%20width='45.65'%20height='23'%20/%3e%3c/g%3e%3cg%20id='fdplockuplogo-hexagonGroup'%3e%3cpath%20id='fdplockuplogo-polygon'%20stroke='none'%20fill='rgb(73,%20160,%20152)'%20d='M%2058.9,-0%20L%2085.5,-0%2098.8,23.53%2085.5,47.06%2058.9,47.06%2045.6,23.53%2058.9,-0%20Z%20M%2058.9,-0'%20/%3e%3cg%20id='fdplockuplogo-hexagon'%3e%3cpath%20id='fdplockuplogo-clip'%20stroke='none'%20fill='url(%23fdplockuplogo-gradient2-clip)'%20d='M%2058.93,-0%20L%2045.64,24%2098.8,24%2085.51,-0%2058.93,-0%20Z%20M%2058.93,-0'%20/%3e%3c/g%3e%3c/g%3e%3cg%20id='fdplockuplogo-circleGroup'%3e%3cg%20id='fdplockuplogo-group'%3e%3ccircle%20id='fdplockuplogo-oval'%20stroke='none'%20fill='rgb(214,%20203,%20226)'%20cx='121.75'%20cy='23.3'%20r='23.3'%20/%3e%3cpath%20id='fdplockuplogo-bezier4'%20stroke='none'%20fill='url(%23fdplockuplogo-gradient4-bezier4)'%20d='M%20121.75,23.3%20L%2098.45,23.3%20C%2098.45,36.17%20108.88,46.61%20121.75,46.61%20L%20121.75,46.61%20C%20134.62,46.61%20145.05,36.17%20145.05,23.3%20L%20145.05,23.3%20121.75,23.3%20Z%20M%20121.75,23.3'%20/%3e%3c/g%3e%3c/g%3e%3cpath%20id='fdplockuplogo-bezier5'%20stroke='rgb(217,%20216,%20216)'%20stroke-width='1'%20stroke-miterlimit='2.49'%20fill='none'%20d='M%2022.3,23.48%20L%20122.54,23.48'%20/%3e%3c/g%3e%3c/svg%3e",Hy="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='393'%20height='47'%20xml:space='preserve'%20id='fdplockuplogoinverted'%3e%3cdefs%3e%3clinearGradient%20id='fdplockuplogoinverted-gradient-rectangle2'%20x1='45.65'%20y1='11.5'%20x2='0.01'%20y2='11.5'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0'%20stop-color='rgb(96,%20178,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.51'%20stop-color='rgb(34,%2094,%20172)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdplockuplogoinverted-gradient2-clip'%20x1='98.8'%20y1='12'%20x2='45.64'%20y2='12'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(4,%20150,%2071)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.64'%20stop-color='rgb(51,%20159,%20112)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(98,%20167,%20153)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='fdplockuplogoinverted-gradient4-bezier4'%20x1='145.05'%20y1='34.96'%20x2='98.45'%20y2='34.96'%20gradientUnits='userSpaceOnUse'%20%3e%3cstop%20offset='0.5'%20stop-color='rgb(214,%20203,%20226)'%20stop-opacity='1'%20/%3e%3cstop%20offset='0.86'%20stop-color='rgb(234,%20229,%20240)'%20stop-opacity='1'%20/%3e%3cstop%20offset='1'%20stop-color='rgb(255,%20255,%20255)'%20stop-opacity='1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cpath%20id='fdplockuplogoinverted-bezier7'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20157.2,1.11%20L%20168.06,1.11%20184.85,34.06%20184.97,34.06%20184.97,1.11%20193.43,1.11%20193.43,45.17%20182.64,45.17%20165.78,12.22%20165.66,12.22%20165.66,45.17%20157.2,45.17%20157.2,1.11%20Z%20M%20157.2,1.11'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier8'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20200.37,1.11%20L%20209.21,1.11%20209.21,18.91%20226.88,18.91%20226.88,1.11%20235.72,1.11%20235.72,45.17%20226.88,45.17%20226.88,25.85%20209.21,25.85%20209.21,45.17%20200.37,45.17%20200.37,1.11%20Z%20M%20200.37,1.11'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier9'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20267.78,9.19%20C%20265,7.99%20261.91,7.29%20258.81,7.29%20255.78,7.29%20251.87,8.62%20251.87,13.42%20251.87,21.05%20271.19,17.84%20271.19,32.61%20271.19,42.27%20263.55,45.93%20254.65,45.93%20249.85,45.93%20247.7,45.3%20243.35,44.22%20L%20244.17,36.27%20C%20247.2,37.91%20250.67,38.98%20254.14,38.98%20257.49,38.98%20261.97,37.28%20261.97,33.3%20261.97,24.91%20242.65,28.38%20242.65,13.79%20242.65,3.95%20250.29,0.35%20258.06,0.35%20261.84,0.35%20265.38,0.85%20268.6,1.93%20L%20267.78,9.19%20Z%20M%20267.78,9.19'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier10'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20287.4,1.11%20L%20311.89,1.11%20311.89,8.05%20296.23,8.05%20296.23,18.91%20311.13,18.91%20311.13,25.85%20296.23,25.85%20296.23,45.17%20287.4,45.17%20287.4,1.11%20Z%20M%20287.4,1.11'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier11'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20327.66,38.23%20L%20332.59,38.23%20C%20339.97,38.23%20347.11,32.73%20347.11,23.14%20347.11,13.54%20339.97,8.05%20332.59,8.05%20L%20327.66,8.05%20327.66,38.23%20Z%20M%20318.82,1.1%20L%20330.88,1.1%20C%20344.39,1.1%20356.32,5.65%20356.32,23.14%20356.32,40.63%20344.39,45.17%20330.88,45.17%20L%20318.82,45.17%20318.82,1.1%20Z%20M%20318.82,1.1'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier12'%20stroke='none'%20fill='rgb(254,%20254,%20254)'%20d='M%20372.09,21.5%20L%20375.19,21.5%20C%20379.61,21.5%20383.58,20.04%20383.58,14.93%20383.58,9.82%20379.73,8.05%20375.19,8.05%20L%20372.09,8.05%20372.09,21.5%20Z%20M%20363.26,1.11%20L%20374.43,1.11%20C%20384.03,1.11%20392.8,3.88%20392.8,14.43%20392.8,24.72%20385.29,28.44%20375.82,28.44%20L%20372.09,28.44%20372.09,45.17%20363.26,45.17%20363.26,1.11%20Z%20M%20363.26,1.11'%20/%3e%3cg%20id='fdplockuplogoinverted-group3'%3e%3cg%20id='fdplockuplogoinverted-squareGroup'%3e%3crect%20id='fdplockuplogoinverted-rectangle'%20stroke='none'%20fill='rgb(34,%2094,%20172)'%20x='0.02'%20y='0.49'%20width='45.6'%20height='46.6'%20/%3e%3crect%20id='fdplockuplogoinverted-rectangle2'%20stroke='none'%20fill='url(%23fdplockuplogoinverted-gradient-rectangle2)'%20x='0'%20y='0'%20width='45.65'%20height='23'%20/%3e%3c/g%3e%3cg%20id='fdplockuplogoinverted-hexagonGroup'%3e%3cpath%20id='fdplockuplogoinverted-polygon'%20stroke='none'%20fill='rgb(73,%20160,%20152)'%20d='M%2058.9,-0%20L%2085.5,-0%2098.8,23.53%2085.5,47.06%2058.9,47.06%2045.6,23.53%2058.9,-0%20Z%20M%2058.9,-0'%20/%3e%3cg%20id='fdplockuplogoinverted-hexagon'%3e%3cpath%20id='fdplockuplogoinverted-clip'%20stroke='none'%20fill='url(%23fdplockuplogoinverted-gradient2-clip)'%20d='M%2058.93,-0%20L%2045.64,24%2098.8,24%2085.51,-0%2058.93,-0%20Z%20M%2058.93,-0'%20/%3e%3c/g%3e%3c/g%3e%3cg%20id='fdplockuplogoinverted-circleGroup'%3e%3cg%20id='fdplockuplogoinverted-group'%3e%3ccircle%20id='fdplockuplogoinverted-oval'%20stroke='none'%20fill='rgb(214,%20203,%20226)'%20cx='121.75'%20cy='23.3'%20r='23.3'%20/%3e%3cpath%20id='fdplockuplogoinverted-bezier4'%20stroke='none'%20fill='url(%23fdplockuplogoinverted-gradient4-bezier4)'%20d='M%20121.75,23.3%20L%2098.45,23.3%20C%2098.45,36.17%20108.88,46.61%20121.75,46.61%20L%20121.75,46.61%20C%20134.62,46.61%20145.05,36.17%20145.05,23.3%20L%20145.05,23.3%20121.75,23.3%20Z%20M%20121.75,23.3'%20/%3e%3c/g%3e%3c/g%3e%3cpath%20id='fdplockuplogoinverted-bezier5'%20stroke='rgb(217,%20216,%20216)'%20stroke-width='1'%20stroke-miterlimit='2.49'%20fill='none'%20d='M%2022.3,23.48%20L%20122.54,23.48'%20/%3e%3c/g%3e%3c/svg%3e";var Kc=(e=>(e.NHS="nhs",e.FDP="fdp",e))(Kc||{}),eu=(e=>(e.Full="full",e.Graphic="graphic",e.Inverse="inverse",e.TwoLine="twoLine",e.TwoLineInverse="twoLineInverse",e.Compact="compact",e.CompactInverted="compactInverted",e))(eu||{});const zy={nhs:{},fdp:{full:{brand:"fdp",variant:"full",src:Py,ariaLabel:"FDP"},graphic:{brand:"fdp",variant:"graphic",src:$y,ariaLabel:"FDP"},inverse:{brand:"fdp",variant:"inverse",src:Fy,ariaLabel:"FDP"},twoLine:{brand:"fdp",variant:"twoLine",src:Ay,ariaLabel:"FDP"},twoLineInverse:{brand:"fdp",variant:"twoLineInverse",src:Ey,ariaLabel:"FDP"},compact:{brand:"fdp",variant:"compact",src:By,ariaLabel:"FDP"},compactInverted:{brand:"fdp",variant:"compactInverted",src:Hy,ariaLabel:"FDP"}}};function Oy(e,t="full"){return zy[e]?.[t]}function Ry(e,{variant:t,isClient:n,menuOpen:r=!1,showMoreButton:i=!1,visibleItems:a,dropdownVisible:o,toggleMenu:l,navContainerRef:c,navListRef:u,searchNode:d,brand:f}){const{className:p,logo:m={},service:y={},serviceName:h,organisation:g,search:k,account:S,navigation:j,containerClasses:M,variant:b="default",attributes:_={},maxVisibleItems:N,responsiveNavigation:w=!0,logoVariant:v=eu.Full,...C}=e,D={...y,text:y?.text??h};"maxVisibleItems"in C&&delete C.maxVisibleItems;const I=D.href&&!m.href||D.href&&D.href===m.href,B=I?D.href:m.href,E=ve("nhsuk-header",{"nhsuk-header--organisation":b==="organisation"||g,"nhsuk-header--white":b==="white"},p),A=ve("nhsuk-header__container",M),L=ve("nhsuk-header__navigation",{"nhsuk-header__navigation--white":j?.white,"nhsuk-header__navigation--justified":j?.justified},j?.className),ae=f??(typeof document>"u"?"nhs":document.documentElement.getAttribute("data-brand")==="fdp"?"fdp":"nhs"),q=()=>s.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":m.ariaLabel||"NHS",children:[s.jsx("title",{children:m.ariaLabel||"NHS"}),s.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),O=()=>{if(m.src)return s.jsx("img",{className:"nhsuk-header__organisation-logo",src:m.src,width:"280",alt:m.ariaLabel||(ae==="fdp"?"FDP":"NHS")});if(ae==="fdp"){const J=Oy(Kc.FDP,v);if(J?.src)return s.jsx("img",{className:"nhsuk-header__organisation-logo",src:J.src,"data-logo-variant":v,width:"280",alt:J.ariaLabel||"FDP"})}return q()},ne=()=>g?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"nhsuk-header__organisation-name",children:[g.name,g.split&&s.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",g.split]})]}),g.descriptor&&s.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:g.descriptor})]}):null,Y=(J,pe)=>J?pe?s.jsx("a",{className:"nhsuk-header__service-name",href:pe,children:J}):s.jsx("span",{className:"nhsuk-header__service-name",children:J}):null,K=J=>J.active||J.current?s.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:J.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:J.html}}):J.text}):J.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:J.html}}):J.text,X=()=>s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})});return j?.items,s.jsxs("header",{className:E,role:"banner","data-module":"nhsuk-header",..._,...C,children:[s.jsxs("div",{className:A,children:[s.jsxs("div",{className:"nhsuk-header__service",children:[B?s.jsxs("a",{className:"nhsuk-header__service-logo",href:B,children:[O(),ne(),I&&Y(D.text)]}):s.jsxs(s.Fragment,{children:[O(),ne(),I&&Y(D.text)]}),D.text&&!I&&Y(D.text,D.href)]}),d??null,s.jsx(Es,{...S,variant:b==="white"?"white":"default"})]}),j&&j.items&&j.items.length>0&&s.jsx("nav",{className:L,"aria-label":j.ariaLabel||"Menu",children:s.jsx("div",{className:ve("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--initializing":n&&t==="client","nhsuk-header__navigation-container--ssr":!n},M),ref:c,children:s.jsxs("ul",{className:"nhsuk-header__navigation-list",ref:u,children:[(j?.items||[]).map((J,pe)=>s.jsx("li",{className:ve("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":J.active||J.current,"nhsuk-header__navigation-item--hidden":i&&a!==void 0&&pe>=(a??0)},J.className),...J.attributes||{},children:s.jsx("a",{className:"nhsuk-header__navigation-link",href:J.href,...J.active||J.current?{"aria-current":J.current?"page":"true"}:{},children:K(J)})},pe)),i&&a!==void 0&&s.jsx("li",{className:"nhsuk-header__navigation-item nhsuk-header__navigation-item--more",children:s.jsxs("button",{className:"nhsuk-header__navigation-button",id:"toggle-more-menu",type:"button","aria-haspopup":"true","aria-expanded":r?"true":"false","aria-controls":"nhsuk-header-more-menu",onClick:l,children:[s.jsx("span",{children:"More"}),X()]})})]})})}),n&&j&&j.items&&j.items.length>0&&r&&o&&s.jsx("div",{className:"nhsuk-header__dropdown-menu",hidden:!o,id:"nhsuk-header-more-menu",children:s.jsx("ul",{className:"nhsuk-header__dropdown-list",children:j.items.slice(a??0).map((J,pe)=>s.jsx("li",{className:ve("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":J.active||J.current}),children:s.jsx("a",{className:"nhsuk-header__dropdown-link",href:J.href,...J.active||J.current?{"aria-current":J.current?"page":"true"}:{},onClick:()=>{l?.()},children:K(J)})},`overflow-${(a??0)+pe}`))})}),t==="server"]})}const Us=$.createContext(void 0);function Uy({brand:e="nhs",scope:t="document",children:n}){const[r,i]=$.useState(e);$.useEffect(()=>{i(e)},[e]),$.useEffect(()=>{if(t==="document")return document.documentElement.setAttribute("data-brand",r),()=>{}},[r,t]);const a=$.useMemo(()=>({brand:r,setBrand:i}),[r]);return t==="local"?s.jsx(Us.Provider,{value:a,children:s.jsx("div",{"data-brand":r,children:n})}):s.jsx(Us.Provider,{value:a,children:n})}function tu(){const e=$.useContext(Us);if(!e)throw new Error("useBrand must be used within BrandThemeProvider");return e}const nu=({mode:e="form",action:t="/search",method:n="get",name:r="q",value:i,placeholder:a="Search",visuallyHiddenLabel:o="Search the NHS website",visuallyHiddenButton:l="Search",className:c,disabled:u=!1,callbacks:d={},isLoading:f=!1,showResults:p=!1,results:m=[],formAttributes:y={},inputAttributes:h={},buttonAttributes:g={},preventDefaultSubmit:k=!1,debounceMs:S=300,minQueryLength:j=1})=>{const[M,b]=$.useState(""),[_,N]=$.useState(!1),w=$.useRef(void 0),v=$.useRef(null),C=$.useRef(null),D=e==="controlled"&&i!==void 0,I=D?i:M,B=$.useCallback(K=>{w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{d.onChange&&K.length>=j&&d.onChange(K)},S)},[d.onChange,S,j]),E=$.useCallback(K=>{const X=K.target.value;D||b(X),e!=="form"&&B(X)},[D,e,B]),A=$.useCallback(K=>{const X=I.trim(),J={query:X,timestamp:Date.now(),formData:new FormData(K.currentTarget)};e==="controlled"||e==="hybrid"&&k?(K.preventDefault(),d.onSearch&&X.length>=j&&d.onSearch(J)):e==="hybrid"&&d.onSearch&&X.length>=j&&d.onSearch(J)},[e,I,d.onSearch,k,j]),L=$.useCallback(()=>{N(!0),d.onFocus?.()},[d.onFocus]),z=$.useCallback(()=>{N(!1),d.onBlur?.()},[d.onBlur]),ae=$.useCallback(()=>{D||b(""),d.onClear?.(),C.current?.focus()},[D,d.onClear]);$.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]);const q=()=>s.jsx("svg",{className:ve("nhsuk-icon nhsuk-icon__search",{"nhsuk-icon__search--loading":f}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"})}),O=()=>s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsxs("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[s.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416",repeatCount:"indefinite"})]})}),ne=()=>!I||e==="form"?null:s.jsx("button",{type:"button",className:"nhsuk-header__search-clear",onClick:ae,"aria-label":"Clear search",children:s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__close",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z"})})}),Y=()=>!p||!m.length||!_?null:s.jsx("div",{className:"nhsuk-header__search-results",role:"listbox",children:m.map(K=>s.jsx("div",{className:"nhsuk-header__search-result",role:"option",children:K.href?s.jsxs("a",{href:K.href,className:"nhsuk-header__search-result-link",children:[s.jsx("span",{className:"nhsuk-header__search-result-title",children:K.title}),K.description&&s.jsx("span",{className:"nhsuk-header__search-result-description",children:K.description})]}):s.jsxs("button",{type:"button",className:"nhsuk-header__search-result-button",onClick:()=>d.onSearch?.({query:K.title,timestamp:Date.now()}),children:[s.jsx("span",{className:"nhsuk-header__search-result-title",children:K.title}),K.description&&s.jsx("span",{className:"nhsuk-header__search-result-description",children:K.description})]})},K.id))});return s.jsxs("div",{className:ve("nhsuk-header__search",c,{"nhsuk-header__search--controlled":e==="controlled","nhsuk-header__search--hybrid":e==="hybrid","nhsuk-header__search--loading":f,"nhsuk-header__search--focused":_,"nhsuk-header__search--has-results":p&&m.length>0}),children:[s.jsxs("form",{ref:v,className:"nhsuk-header__search-form",id:"search",action:e!=="controlled"?t:void 0,method:e!=="controlled"?n:void 0,role:"search",onSubmit:A,...y,children:[s.jsx("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field",children:o}),s.jsxs("div",{className:"nhsuk-header__search-input-wrapper",children:[s.jsx("input",{ref:C,className:"nhsuk-header__search-input nhsuk-input",id:"search-field",name:e!=="controlled"?r:void 0,type:"search",placeholder:a,autoComplete:"off",value:I,onChange:E,onFocus:L,onBlur:z,disabled:u||f,...p&&m.length>0?{"aria-expanded":!0,"aria-haspopup":"listbox"}:{},...h}),ne()]}),s.jsxs("button",{className:"nhsuk-header__search-submit",type:"submit",disabled:u||f||e!=="form"&&I.length<j,...g,children:[f?O():q(),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:f?"Searching...":l})]})]}),Y()]})},da=({className:e,logo:t={},service:n={},organisation:r,search:i,account:a,navigation:o,containerClasses:l,variant:c="default",attributes:u={},...d})=>{const[f,p]=$.useState(!1),[m,y]=$.useState(!1),[h,g]=$.useState(o?.items?.length||0),[k,S]=$.useState(!1),[j,M]=$.useState(!1),b=$.useRef(null),_=$.useRef(null),N=$.useRef(!1);$.useEffect(()=>{typeof window>"u"||M(!0)},[]),$.useEffect(()=>{if(typeof document>"u")return;const I=B=>{B.key==="Escape"&&f&&p(!1)};if(f)return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[f]);const w=$.useRef(null),v=$.useCallback(()=>{if(!j||!o?.items||o.items.length===0||N.current)return;const I=b.current,B=_.current;if(!I||!B)return;N.current=!0,I.classList.add("nhsuk-header__navigation-container--measuring");const E=I.clientWidth,A=Array.from(B.children);if(!A.length){I.classList.remove("nhsuk-header__navigation-container--measuring"),N.current=!1;return}if(w.current==null){const J=document.createElement("button");J.type="button",J.className="nhsuk-header__navigation-button nhsuk-header__navigation-button--prototype",J.style.position="absolute",J.style.visibility="hidden",J.style.pointerEvents="none",J.innerHTML="<span>More</span>",I.appendChild(J),w.current=J.getBoundingClientRect().width||104,I.removeChild(J)}const L=w.current+16;let z=0,ae=0;const q=window.getComputedStyle(I),O=parseFloat(q.paddingLeft)||0,ne=parseFloat(q.paddingRight)||0;let Y=O+ne;for(const J of A){const pe=J.getBoundingClientRect().width;if(z+pe+L+Y>E)break;z+=pe,ae+=1}const K=ae<o.items.length,X=K?ae:o.items.length;y(J=>J===K?J:K),g(J=>J===X?J:X),I.classList.remove("nhsuk-header__navigation-container--measuring"),N.current=!1},[j,o?.items]);$.useEffect(()=>{if(!j)return;const I=b.current;if(!I)return;let B=null;const E=()=>{B==null&&(B=window.requestAnimationFrame(()=>{B=null,v()}))};v();const A=new ResizeObserver(()=>E());return A.observe(I),_.current&&A.observe(_.current),()=>{B!=null&&window.cancelAnimationFrame(B),A.disconnect()}},[j,v]),$.useEffect(()=>{j&&v()},[o?.items?.length,j,v]);const C=I=>{I&&(I.preventDefault(),I.stopPropagation());const B=!f;p(B),S(B)},D=(()=>{try{return tu()}catch{return}})();return Ry({className:e,logo:t,service:n,organisation:r,search:i,account:a,navigation:o,containerClasses:l,variant:c,attributes:u,...d},{variant:"client",isClient:j,menuOpen:f,showMoreButton:m,visibleItems:h,dropdownVisible:k,toggleMenu:C,navContainerRef:b,navListRef:_,searchNode:i?s.jsx(nu,{...i}):null,brand:D?.brand})};function Wy(e,{variant:t,isClient:n}){const{className:r,logo:i={},service:a={},serviceName:o,organisation:l,account:c,navigation:u,containerClasses:d,variant:f="default",attributes:p={},maxVisibleItems:m,responsiveNavigation:y=!0,...h}=e;"maxVisibleItems"in h&&delete h.maxVisibleItems;const g={...a,text:a?.text??o},k=g.href&&!i.href||g.href&&g.href===i.href,S=k?g.href:i.href,j=ve("nhsuk-header",{"nhsuk-header--organisation":f==="organisation"||l,"nhsuk-header--white":f==="white"},r),M=ve("nhsuk-header__container",d),b=ve("nhsuk-header__navigation",{"nhsuk-header__navigation--white":u?.white,"nhsuk-header__navigation--justified":u?.justified},u?.className),_=()=>s.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":i.ariaLabel||"NHS",children:[s.jsx("title",{children:i.ariaLabel||"NHS"}),s.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),N=()=>i.src?s.jsx("img",{className:"nhsuk-header__organisation-logo",src:i.src,width:"280",alt:i.ariaLabel||"NHS"}):_(),w=()=>l?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"nhsuk-header__organisation-name",children:[l.name,l.split&&s.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",l.split]})]}),l.descriptor&&s.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:l.descriptor})]}):null,v=(E,A)=>E?A?s.jsx("a",{className:"nhsuk-header__service-name",href:A,children:E}):s.jsx("span",{className:"nhsuk-header__service-name",children:E}):null,C=E=>E.active||E.current?s.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:E.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:E.html}}):E.text}):E.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:E.html}}):E.text,D=u?.items&&!y,I=D?[]:u?.items,B=D?u.items:[];return s.jsxs("header",{className:j,role:"banner","data-module":"nhsuk-header",...p,...h,children:[s.jsxs("div",{className:M,children:[s.jsxs("div",{className:"nhsuk-header__service",children:[S?s.jsxs("a",{className:"nhsuk-header__service-logo",href:S,children:[N(),w(),k&&v(g.text)]}):s.jsxs(s.Fragment,{children:[N(),w(),k&&v(g.text)]}),g.text&&!k&&v(g.text,g.href)]}),s.jsx(Es,{...c,variant:f==="white"?"white":"default"})]}),u&&u.items&&u.items.length>0&&s.jsx("nav",{className:b,"aria-label":u.ariaLabel||"Menu",children:s.jsx("div",{className:ve("nhsuk-header_navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--ssr":!n},d),children:s.jsx("ul",{className:"nhsuk-header__navigation-list",children:(I||[]).map((E,A)=>s.jsx("li",{className:ve("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":E.active||E.current},E.className),...E.attributes||{},children:s.jsx("a",{className:"nhsuk-header__navigation-link",href:E.href,...E.active||E.current?{"aria-current":E.current?"page":"true"}:{},children:C(E)})},A))})})}),D&&B.length>0&&s.jsx("div",{className:"nhsuk-header__dropdown-menu","data-ssr-overflow":"true",children:s.jsx("ul",{className:"nhsuk-header__dropdown-list",children:B.map((E,A)=>s.jsx("li",{className:ve("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":E.active||E.current}),children:s.jsx("a",{className:"nhsuk-header__dropdown-link",href:E.href,...E.active||E.current?{"aria-current":E.current?"page":"true"}:{},children:C(E)})},`overflow-server-${A}`))})})]})}const Gy=e=>Wy(e,{variant:"server",isClient:!1}),ru=({heading:e,headingLevel:t=1,headingClasses:n="",text:r,html:i,imageURL:a,containerClasses:o="",classes:l="",children:c,...u})=>{const d=["nhsuk-hero",a&&e?"nhsuk-hero--image nhsuk-hero--image-description":"",a&&!e?"nhsuk-hero--image":"",l].filter(Boolean).join(" "),f=["nhsuk-width-container",o,a?"":"nhsuk-hero--border"].filter(Boolean).join(" "),p=["nhsuk-hero__heading",n,!c&&!r&&!i?"nhsuk-u-margin-bottom-0":""].filter(Boolean).join(" "),m=c||e||r||i,y=()=>{if(!e)return null;const h={className:p};switch(t){case 1:return s.jsx("h1",{...h,children:e});case 2:return s.jsx("h2",{...h,children:e});case 3:return s.jsx("h3",{...h,children:e});case 4:return s.jsx("h4",{...h,children:e});case 5:return s.jsx("h5",{...h,children:e});case 6:return s.jsx("h6",{...h,children:e});default:return s.jsx("h1",{...h,children:e})}};return s.jsxs("section",{className:d,style:a?{backgroundImage:`url('${a}')`}:void 0,role:"banner",...u,children:[a&&s.jsx("div",{className:"nhsuk-hero__overlay",children:m&&s.jsx("div",{className:f,children:s.jsx("div",{className:"nhsuk-grid-row",children:s.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:s.jsxs("div",{className:"nhsuk-hero-content",children:[y(),c||(i?s.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):r?s.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null),s.jsx("span",{className:"nhsuk-hero__arrow","aria-hidden":"true"})]})})})})}),!a&&m&&s.jsx("div",{className:f,children:s.jsx("div",{className:"nhsuk-grid-row",children:s.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:s.jsxs("div",{className:"nhsuk-hero__wrapper",children:[y(),c||(i?s.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):r?s.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null)]})})})})]})};ru.displayName="Hero";const Ws=({className:e,links:t=[],linksColumn2:n,linksColumn3:r,metaLinks:i,copyright:a="Â© NHS England",containerClasses:o,attributes:l={},style:c,footerStyle:u,containerStyle:d})=>{const f=(m,y=!1)=>s.jsx("li",{className:ve("nhsuk-footer__list-item",{"nhsuk-footer-default__list-item":y}),children:s.jsx("a",{className:"nhsuk-footer__list-item-link",href:m.URL,target:m.newWindow?"_blank":void 0,rel:m.newWindow?"noopener noreferrer":void 0,children:m.label})},`${m.URL}-${m.label}`),p=!!(n||r);return s.jsx("footer",{role:"contentinfo",...l,style:{...l?.style,...c},children:s.jsxs("div",{className:"nhsuk-footer-container",children:[s.jsxs("div",{className:ve("nhsuk-width-container",o),style:d,children:[s.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Support links"}),s.jsx("div",{className:ve("nhsuk-footer",e),style:u,children:p?s.jsxs(s.Fragment,{children:[t.length>0&&s.jsx("ul",{className:"nhsuk-footer__list",children:t.map(m=>f(m))}),n&&n.length>0&&s.jsx("ul",{className:"nhsuk-footer__list",children:n.map(m=>f(m))}),r&&r.length>0&&s.jsx("ul",{className:"nhsuk-footer__list",children:r.map(m=>f(m))}),i&&i.length>0&&s.jsx("ul",{className:"nhsuk-footer__list nhsuk-footer__meta",children:i.map(m=>f(m))})]}):s.jsxs("ul",{className:"nhsuk-footer__list",children:[t.map(m=>f(m,!0)),(n||[]).map(m=>f(m,!0)),(r||[]).map(m=>f(m,!0)),(i||[]).map(m=>f(m,!0))]})}),!p&&s.jsx("div",{children:s.jsx("p",{className:"nhsuk-footer__copyright",children:a})})]}),p&&s.jsx("div",{className:"nhsuk-width-container",children:s.jsx("div",{children:s.jsx("p",{className:"nhsuk-footer__copyright",children:a})})})]})})};function fa(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Vy(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Gs(e){let t,n,r;e.length!==2?(t=fa,n=(l,c)=>fa(e(l),c),r=(l,c)=>e(l)-c):(t=e===fa||e===Vy?e:Yy,n=e,r=e);function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=i(l,c,u,d-1);return f>u&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:i,center:o,right:a}}function Yy(){return 0}function Zy(e){return e===null?NaN:+e}const qy=Gs(fa).right;Gs(Zy).center;function iu(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class au extends Map{constructor(t,n=Qy){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(su(this,t))}has(t){return super.has(su(this,t))}set(t,n){return super.set(Xy(this,t),n)}delete(t){return super.delete(Jy(this,t))}}function su({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Xy({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Jy({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Qy(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Ky=Math.sqrt(50),eb=Math.sqrt(10),tb=Math.sqrt(2);function ha(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Ky?10:a>=eb?5:a>=tb?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?ha(e,t,n*2):[l,c,u]}function nb(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?ha(t,e,n):ha(e,t,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(a-u)/-o;else for(let u=0;u<l;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function Vs(e,t,n){return t=+t,e=+e,n=+n,ha(e,t,n)[2]}function Ys(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Vs(t,e,n):Vs(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function rb(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function ma(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const ou=Symbol("implicit");function lu(){var e=new au,t=[],n=[],r=ou;function i(a){let o=e.get(a);if(o===void 0){if(r!==ou)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new au;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return lu(t,n).unknown(r)},ma.apply(i,arguments),i}function cu(){var e=lu().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var p=t().length,m=i<r,y=m?i:r,h=m?r:i;a=(h-y)/Math.max(1,p-c+u*2),l&&(a=Math.floor(a)),y+=(h-y-a*(p-c))*d,o=a*(1-c),l&&(y=Math.round(y),o=Math.round(o));var g=rb(p).map(function(k){return y+a*k});return n(m?g.reverse():g)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return cu(t(),[r,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},ma.apply(f(),arguments)}function Zs(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function uu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Yr(){}var Zr=.7,pa=1/Zr,yr="\\s*([+-]?\\d+)\\s*",qr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ib=/^#([0-9a-f]{3,8})$/,ab=new RegExp(`^rgb\\(${yr},${yr},${yr}\\)$`),sb=new RegExp(`^rgb\\(${Jt},${Jt},${Jt}\\)$`),ob=new RegExp(`^rgba\\(${yr},${yr},${yr},${qr}\\)$`),lb=new RegExp(`^rgba\\(${Jt},${Jt},${Jt},${qr}\\)$`),cb=new RegExp(`^hsl\\(${qr},${Jt},${Jt}\\)$`),ub=new RegExp(`^hsla\\(${qr},${Jt},${Jt},${qr}\\)$`),du={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zs(Yr,Xr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fu,formatHex:fu,formatHex8:db,formatHsl:fb,formatRgb:hu,toString:hu});function fu(){return this.rgb().formatHex()}function db(){return this.rgb().formatHex8()}function fb(){return bu(this).formatHsl()}function hu(){return this.rgb().formatRgb()}function Xr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ib.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?mu(t):n===3?new Mt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ga(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ga(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ab.exec(e))?new Mt(t[1],t[2],t[3],1):(t=sb.exec(e))?new Mt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ob.exec(e))?ga(t[1],t[2],t[3],t[4]):(t=lb.exec(e))?ga(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cb.exec(e))?yu(t[1],t[2]/100,t[3]/100,1):(t=ub.exec(e))?yu(t[1],t[2]/100,t[3]/100,t[4]):du.hasOwnProperty(e)?mu(du[e]):e==="transparent"?new Mt(NaN,NaN,NaN,0):null}function mu(e){return new Mt(e>>16&255,e>>8&255,e&255,1)}function ga(e,t,n,r){return r<=0&&(e=t=n=NaN),new Mt(e,t,n,r)}function hb(e){return e instanceof Yr||(e=Xr(e)),e?(e=e.rgb(),new Mt(e.r,e.g,e.b,e.opacity)):new Mt}function qs(e,t,n,r){return arguments.length===1?hb(e):new Mt(e,t,n,r??1)}function Mt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Zs(Mt,qs,uu(Yr,{brighter(e){return e=e==null?pa:Math.pow(pa,e),new Mt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zr:Math.pow(Zr,e),new Mt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Mt(Yn(this.r),Yn(this.g),Yn(this.b),ya(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pu,formatHex:pu,formatHex8:mb,formatRgb:gu,toString:gu}));function pu(){return`#${Zn(this.r)}${Zn(this.g)}${Zn(this.b)}`}function mb(){return`#${Zn(this.r)}${Zn(this.g)}${Zn(this.b)}${Zn((isNaN(this.opacity)?1:this.opacity)*255)}`}function gu(){const e=ya(this.opacity);return`${e===1?"rgb(":"rgba("}${Yn(this.r)}, ${Yn(this.g)}, ${Yn(this.b)}${e===1?")":`, ${e})`}`}function ya(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Yn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zn(e){return e=Yn(e),(e<16?"0":"")+e.toString(16)}function yu(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Zt(e,t,n,r)}function bu(e){if(e instanceof Zt)return new Zt(e.h,e.s,e.l,e.opacity);if(e instanceof Yr||(e=Xr(e)),!e)return new Zt;if(e instanceof Zt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,c=(a+i)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new Zt(o,l,c,e.opacity)}function pb(e,t,n,r){return arguments.length===1?bu(e):new Zt(e,t,n,r??1)}function Zt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Zs(Zt,pb,uu(Yr,{brighter(e){return e=e==null?pa:Math.pow(pa,e),new Zt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zr:Math.pow(Zr,e),new Zt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Mt(Xs(e>=240?e-240:e+120,i,r),Xs(e,i,r),Xs(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Zt(vu(this.h),ba(this.s),ba(this.l),ya(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ya(this.opacity);return`${e===1?"hsl(":"hsla("}${vu(this.h)}, ${ba(this.s)*100}%, ${ba(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vu(e){return e=(e||0)%360,e<0?e+360:e}function ba(e){return Math.max(0,Math.min(1,e||0))}function Xs(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Js=e=>()=>e;function gb(e,t){return function(n){return e+n*t}}function yb(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function bb(e){return(e=+e)==1?xu:function(t,n){return n-t?yb(t,n,e):Js(isNaN(t)?n:t)}}function xu(e,t){var n=t-e;return n?gb(e,n):Js(isNaN(e)?t:e)}const _u=(function e(t){var n=bb(t);function r(i,a){var o=n((i=qs(i)).r,(a=qs(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),u=xu(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=e,r})(1);function vb(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function xb(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _b(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=eo(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function wb(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function va(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Sb(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=eo(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Qs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ks=new RegExp(Qs.source,"g");function kb(e){return function(){return e}}function Cb(e){return function(t){return e(t)+""}}function Nb(e,t){var n=Qs.lastIndex=Ks.lastIndex=0,r,i,a,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=Qs.exec(e))&&(i=Ks.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:va(r,i)})),n=Ks.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?Cb(c[0].x):kb(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function eo(e,t){var n=typeof t,r;return t==null||n==="boolean"?Js(t):(n==="number"?va:n==="string"?(r=Xr(t))?(t=r,_u):Nb:t instanceof Xr?_u:t instanceof Date?wb:xb(t)?vb:Array.isArray(t)?_b:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Sb:va)(e,t)}function Mb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function jb(e){return function(){return e}}function Tb(e){return+e}var wu=[0,1];function br(e){return e}function to(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:jb(isNaN(t)?NaN:.5)}function Db(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Ib(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=to(i,r),a=n(o,a)):(r=to(r,i),a=n(a,o)),function(l){return a(r(l))}}function Lb(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=to(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var c=qy(e,l,1,r)-1;return a[c](i[c](l))}}function Su(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Pb(){var e=wu,t=wu,n=eo,r,i,a,o=br,l,c,u;function d(){var p=Math.min(e.length,t.length);return o!==br&&(o=Db(e[0],e[p-1])),l=p>2?Lb:Ib,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?a:(c||(c=l(e.map(r),t,n)))(r(o(p)))}return f.invert=function(p){return o(i((u||(u=l(t,e.map(r),va)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,Tb),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),n=Mb,d()},f.clamp=function(p){return arguments.length?(o=p?!0:br,d()):o!==br},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,m){return r=p,i=m,d()}}function ku(){return Pb()(br,br)}function Ab(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xa(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function vr(e){return e=xa(Math.abs(e)),e?e[1]:NaN}function Eb(e,t){return function(n,r){for(var i=n.length,a=[],o=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function Fb(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var $b=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _a(e){if(!(t=$b.exec(e)))throw new Error("invalid format: "+e);var t;return new no({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_a.prototype=no.prototype;function no(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}no.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bb(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Cu;function Hb(e,t){var n=xa(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Cu=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+xa(e,Math.max(0,t+a-1))[0]}function Nu(e,t){var n=xa(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Mu={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ab,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Nu(e*100,t),r:Nu,s:Hb,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ju(e){return e}var Tu=Array.prototype.map,Du=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function zb(e){var t=e.grouping===void 0||e.thousands===void 0?ju:Eb(Tu.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?ju:Fb(Tu.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"âˆ’":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=_a(f);var p=f.fill,m=f.align,y=f.sign,h=f.symbol,g=f.zero,k=f.width,S=f.comma,j=f.precision,M=f.trim,b=f.type;b==="n"?(S=!0,b="g"):Mu[b]||(j===void 0&&(j=12),M=!0,b="g"),(g||p==="0"&&m==="=")&&(g=!0,p="0",m="=");var _=h==="$"?n:h==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",N=h==="$"?r:/[%p]/.test(b)?o:"",w=Mu[b],v=/[defgprs%]/.test(b);j=j===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function C(D){var I=_,B=N,E,A,L;if(b==="c")B=w(D)+B,D="";else{D=+D;var z=D<0||1/D<0;if(D=isNaN(D)?c:w(Math.abs(D),j),M&&(D=Bb(D)),z&&+D==0&&y!=="+"&&(z=!1),I=(z?y==="("?y:l:y==="-"||y==="("?"":y)+I,B=(b==="s"?Du[8+Cu/3]:"")+B+(z&&y==="("?")":""),v){for(E=-1,A=D.length;++E<A;)if(L=D.charCodeAt(E),48>L||L>57){B=(L===46?i+D.slice(E+1):D.slice(E))+B,D=D.slice(0,E);break}}}S&&!g&&(D=t(D,1/0));var ae=I.length+D.length+B.length,q=ae<k?new Array(k-ae+1).join(p):"";switch(S&&g&&(D=t(q+D,q.length?k-B.length:1/0),q=""),m){case"<":D=I+D+B+q;break;case"=":D=I+q+D+B;break;case"^":D=q.slice(0,ae=q.length>>1)+I+D+B+q.slice(ae);break;default:D=q+I+D+B;break}return a(D)}return C.toString=function(){return f+""},C}function d(f,p){var m=u((f=_a(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(vr(p)/3)))*3,h=Math.pow(10,-y),g=Du[8+y/3];return function(k){return m(h*k)+g}}return{format:u,formatPrefix:d}}var wa,Iu,Lu;Ob({thousands:",",grouping:[3],currency:["$",""]});function Ob(e){return wa=zb(e),Iu=wa.format,Lu=wa.formatPrefix,wa}function Rb(e){return Math.max(0,-vr(Math.abs(e)))}function Ub(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vr(t)/3)))*3-vr(Math.abs(e)))}function Wb(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vr(t)-vr(e))+1}function Gb(e,t,n,r){var i=Ys(e,t,n),a;switch(r=_a(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Ub(i,o))&&(r.precision=a),Lu(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Wb(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Rb(i))&&(r.precision=a-(r.type==="%")*2);break}}return Iu(r)}function Vb(e){var t=e.domain;return e.ticks=function(n){var r=t();return nb(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Gb(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],l=r[a],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=i,i=a,a=u);d-- >0;){if(u=Vs(o,l,n),u===c)return r[i]=o,r[a]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Sa(){var e=ku();return e.copy=function(){return Su(e,Sa())},ma.apply(e,arguments),Vb(e)}function Yb(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}const ro=new Date,io=new Date;function dt(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let u;do c.push(u=new Date(+a)),t(a,l),e(a);while(u<a&&a<o);return c},i.filter=a=>dt(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(ro.setTime(+a),io.setTime(+o),e(ro),e(io),Math.floor(n(ro,io))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const ka=dt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ka.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ka),ka.range;const xn=1e3,Ut=xn*60,_n=Ut*60,wn=_n*24,ao=wn*7,Pu=wn*30,so=wn*365,xr=dt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*xn)},(e,t)=>(t-e)/xn,e=>e.getUTCSeconds());xr.range;const oo=dt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xn)},(e,t)=>{e.setTime(+e+t*Ut)},(e,t)=>(t-e)/Ut,e=>e.getMinutes());oo.range,dt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ut)},(e,t)=>(t-e)/Ut,e=>e.getUTCMinutes()).range;const lo=dt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xn-e.getMinutes()*Ut)},(e,t)=>{e.setTime(+e+t*_n)},(e,t)=>(t-e)/_n,e=>e.getHours());lo.range,dt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*_n)},(e,t)=>(t-e)/_n,e=>e.getUTCHours()).range;const Jr=dt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ut)/wn,e=>e.getDate()-1);Jr.range;const co=dt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wn,e=>e.getUTCDate()-1);co.range,dt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wn,e=>Math.floor(e/wn)).range;function qn(e){return dt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ut)/ao)}const Ca=qn(0),Na=qn(1),Zb=qn(2),qb=qn(3),_r=qn(4),Xb=qn(5),Jb=qn(6);Ca.range,Na.range,Zb.range,qb.range,_r.range,Xb.range,Jb.range;function Xn(e){return dt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/ao)}const Au=Xn(0),Ma=Xn(1),Qb=Xn(2),Kb=Xn(3),wr=Xn(4),e1=Xn(5),t1=Xn(6);Au.range,Ma.range,Qb.range,Kb.range,wr.range,e1.range,t1.range;const Qr=dt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Qr.range,dt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()).range;const Sn=dt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Sn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),Sn.range;const Jn=dt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Jn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),Jn.range;function n1(e,t,n,r,i,a){const o=[[xr,1,xn],[xr,5,5*xn],[xr,15,15*xn],[xr,30,30*xn],[a,1,Ut],[a,5,5*Ut],[a,15,15*Ut],[a,30,30*Ut],[i,1,_n],[i,3,3*_n],[i,6,6*_n],[i,12,12*_n],[r,1,wn],[r,2,2*wn],[n,1,ao],[t,1,Pu],[t,3,3*Pu],[e,1,so]];function l(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),y=m?m.range(u,+d+1):[];return p?y.reverse():y}function c(u,d,f){const p=Math.abs(d-u)/f,m=Gs(([,,g])=>g).right(o,p);if(m===o.length)return e.every(Ys(u/so,d/so,f));if(m===0)return ka.every(Math.max(Ys(u,d,f),1));const[y,h]=o[p/o[m-1][2]<o[m][2]/p?m-1:m];return y.every(h)}return[l,c]}const[r1,i1]=n1(Sn,Qr,Ca,Jr,lo,oo);function uo(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function fo(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Kr(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function a1(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=ei(i),d=ti(i),f=ei(a),p=ti(a),m=ei(o),y=ti(o),h=ei(l),g=ti(l),k=ei(c),S=ti(c),j={a:z,A:ae,b:q,B:O,c:null,d:zu,e:zu,f:j1,g:B1,G:z1,H:C1,I:N1,j:M1,L:Ou,m:T1,M:D1,p:ne,q:Y,Q:Yu,s:Zu,S:I1,u:L1,U:P1,V:A1,w:E1,W:F1,x:null,X:null,y:$1,Y:H1,Z:O1,"%":Vu},M={a:K,A:X,b:J,B:pe,c:null,d:Uu,e:Uu,f:G1,g:tv,G:rv,H:R1,I:U1,j:W1,L:Wu,m:V1,M:Y1,p:ie,q:se,Q:Yu,s:Zu,S:Z1,u:q1,U:X1,V:J1,w:Q1,W:K1,x:null,X:null,y:ev,Y:nv,Z:iv,"%":Vu},b={a:C,A:D,b:I,B,c:E,d:Bu,e:Bu,f:_1,g:$u,G:Fu,H:Hu,I:Hu,j:y1,L:x1,m:g1,M:b1,p:v,q:p1,Q:S1,s:k1,S:v1,u:u1,U:d1,V:f1,w:c1,W:h1,x:A,X:L,y:$u,Y:Fu,Z:m1,"%":w1};j.x=_(n,j),j.X=_(r,j),j.c=_(t,j),M.x=_(n,M),M.X=_(r,M),M.c=_(t,M);function _(te,re){return function(de){var V=[],ce=-1,oe=0,ge=te.length,le,me,Ie;for(de instanceof Date||(de=new Date(+de));++ce<ge;)te.charCodeAt(ce)===37&&(V.push(te.slice(oe,ce)),(me=Eu[le=te.charAt(++ce)])!=null?le=te.charAt(++ce):me=le==="e"?" ":"0",(Ie=re[le])&&(le=Ie(de,me)),V.push(le),oe=ce+1);return V.push(te.slice(oe,ce)),V.join("")}}function N(te,re){return function(de){var V=Kr(1900,void 0,1),ce=w(V,te,de+="",0),oe,ge;if(ce!=de.length)return null;if("Q"in V)return new Date(V.Q);if("s"in V)return new Date(V.s*1e3+("L"in V?V.L:0));if(re&&!("Z"in V)&&(V.Z=0),"p"in V&&(V.H=V.H%12+V.p*12),V.m===void 0&&(V.m="q"in V?V.q:0),"V"in V){if(V.V<1||V.V>53)return null;"w"in V||(V.w=1),"Z"in V?(oe=fo(Kr(V.y,0,1)),ge=oe.getUTCDay(),oe=ge>4||ge===0?Ma.ceil(oe):Ma(oe),oe=co.offset(oe,(V.V-1)*7),V.y=oe.getUTCFullYear(),V.m=oe.getUTCMonth(),V.d=oe.getUTCDate()+(V.w+6)%7):(oe=uo(Kr(V.y,0,1)),ge=oe.getDay(),oe=ge>4||ge===0?Na.ceil(oe):Na(oe),oe=Jr.offset(oe,(V.V-1)*7),V.y=oe.getFullYear(),V.m=oe.getMonth(),V.d=oe.getDate()+(V.w+6)%7)}else("W"in V||"U"in V)&&("w"in V||(V.w="u"in V?V.u%7:"W"in V?1:0),ge="Z"in V?fo(Kr(V.y,0,1)).getUTCDay():uo(Kr(V.y,0,1)).getDay(),V.m=0,V.d="W"in V?(V.w+6)%7+V.W*7-(ge+5)%7:V.w+V.U*7-(ge+6)%7);return"Z"in V?(V.H+=V.Z/100|0,V.M+=V.Z%100,fo(V)):uo(V)}}function w(te,re,de,V){for(var ce=0,oe=re.length,ge=de.length,le,me;ce<oe;){if(V>=ge)return-1;if(le=re.charCodeAt(ce++),le===37){if(le=re.charAt(ce++),me=b[le in Eu?re.charAt(ce++):le],!me||(V=me(te,de,V))<0)return-1}else if(le!=de.charCodeAt(V++))return-1}return V}function v(te,re,de){var V=u.exec(re.slice(de));return V?(te.p=d.get(V[0].toLowerCase()),de+V[0].length):-1}function C(te,re,de){var V=m.exec(re.slice(de));return V?(te.w=y.get(V[0].toLowerCase()),de+V[0].length):-1}function D(te,re,de){var V=f.exec(re.slice(de));return V?(te.w=p.get(V[0].toLowerCase()),de+V[0].length):-1}function I(te,re,de){var V=k.exec(re.slice(de));return V?(te.m=S.get(V[0].toLowerCase()),de+V[0].length):-1}function B(te,re,de){var V=h.exec(re.slice(de));return V?(te.m=g.get(V[0].toLowerCase()),de+V[0].length):-1}function E(te,re,de){return w(te,t,re,de)}function A(te,re,de){return w(te,n,re,de)}function L(te,re,de){return w(te,r,re,de)}function z(te){return o[te.getDay()]}function ae(te){return a[te.getDay()]}function q(te){return c[te.getMonth()]}function O(te){return l[te.getMonth()]}function ne(te){return i[+(te.getHours()>=12)]}function Y(te){return 1+~~(te.getMonth()/3)}function K(te){return o[te.getUTCDay()]}function X(te){return a[te.getUTCDay()]}function J(te){return c[te.getUTCMonth()]}function pe(te){return l[te.getUTCMonth()]}function ie(te){return i[+(te.getUTCHours()>=12)]}function se(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var re=_(te+="",j);return re.toString=function(){return te},re},parse:function(te){var re=N(te+="",!1);return re.toString=function(){return te},re},utcFormat:function(te){var re=_(te+="",M);return re.toString=function(){return te},re},utcParse:function(te){var re=N(te+="",!0);return re.toString=function(){return te},re}}}var Eu={"-":"",_:" ",0:"0"},gt=/^\s*\d+/,s1=/^%/,o1=/[\\^$*+?|[\]().{}]/g;function Re(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function l1(e){return e.replace(o1,"\\$&")}function ei(e){return new RegExp("^(?:"+e.map(l1).join("|")+")","i")}function ti(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function c1(e,t,n){var r=gt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function u1(e,t,n){var r=gt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function d1(e,t,n){var r=gt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function f1(e,t,n){var r=gt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function h1(e,t,n){var r=gt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Fu(e,t,n){var r=gt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function $u(e,t,n){var r=gt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function m1(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function p1(e,t,n){var r=gt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function g1(e,t,n){var r=gt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Bu(e,t,n){var r=gt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function y1(e,t,n){var r=gt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Hu(e,t,n){var r=gt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function b1(e,t,n){var r=gt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function v1(e,t,n){var r=gt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function x1(e,t,n){var r=gt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function _1(e,t,n){var r=gt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function w1(e,t,n){var r=s1.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function S1(e,t,n){var r=gt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function k1(e,t,n){var r=gt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function zu(e,t){return Re(e.getDate(),t,2)}function C1(e,t){return Re(e.getHours(),t,2)}function N1(e,t){return Re(e.getHours()%12||12,t,2)}function M1(e,t){return Re(1+Jr.count(Sn(e),e),t,3)}function Ou(e,t){return Re(e.getMilliseconds(),t,3)}function j1(e,t){return Ou(e,t)+"000"}function T1(e,t){return Re(e.getMonth()+1,t,2)}function D1(e,t){return Re(e.getMinutes(),t,2)}function I1(e,t){return Re(e.getSeconds(),t,2)}function L1(e){var t=e.getDay();return t===0?7:t}function P1(e,t){return Re(Ca.count(Sn(e)-1,e),t,2)}function Ru(e){var t=e.getDay();return t>=4||t===0?_r(e):_r.ceil(e)}function A1(e,t){return e=Ru(e),Re(_r.count(Sn(e),e)+(Sn(e).getDay()===4),t,2)}function E1(e){return e.getDay()}function F1(e,t){return Re(Na.count(Sn(e)-1,e),t,2)}function $1(e,t){return Re(e.getFullYear()%100,t,2)}function B1(e,t){return e=Ru(e),Re(e.getFullYear()%100,t,2)}function H1(e,t){return Re(e.getFullYear()%1e4,t,4)}function z1(e,t){var n=e.getDay();return e=n>=4||n===0?_r(e):_r.ceil(e),Re(e.getFullYear()%1e4,t,4)}function O1(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Re(t/60|0,"0",2)+Re(t%60,"0",2)}function Uu(e,t){return Re(e.getUTCDate(),t,2)}function R1(e,t){return Re(e.getUTCHours(),t,2)}function U1(e,t){return Re(e.getUTCHours()%12||12,t,2)}function W1(e,t){return Re(1+co.count(Jn(e),e),t,3)}function Wu(e,t){return Re(e.getUTCMilliseconds(),t,3)}function G1(e,t){return Wu(e,t)+"000"}function V1(e,t){return Re(e.getUTCMonth()+1,t,2)}function Y1(e,t){return Re(e.getUTCMinutes(),t,2)}function Z1(e,t){return Re(e.getUTCSeconds(),t,2)}function q1(e){var t=e.getUTCDay();return t===0?7:t}function X1(e,t){return Re(Au.count(Jn(e)-1,e),t,2)}function Gu(e){var t=e.getUTCDay();return t>=4||t===0?wr(e):wr.ceil(e)}function J1(e,t){return e=Gu(e),Re(wr.count(Jn(e),e)+(Jn(e).getUTCDay()===4),t,2)}function Q1(e){return e.getUTCDay()}function K1(e,t){return Re(Ma.count(Jn(e)-1,e),t,2)}function ev(e,t){return Re(e.getUTCFullYear()%100,t,2)}function tv(e,t){return e=Gu(e),Re(e.getUTCFullYear()%100,t,2)}function nv(e,t){return Re(e.getUTCFullYear()%1e4,t,4)}function rv(e,t){var n=e.getUTCDay();return e=n>=4||n===0?wr(e):wr.ceil(e),Re(e.getUTCFullYear()%1e4,t,4)}function iv(){return"+0000"}function Vu(){return"%"}function Yu(e){return+e}function Zu(e){return Math.floor(+e/1e3)}var Sr,qu;av({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function av(e){return Sr=a1(e),qu=Sr.format,Sr.parse,Sr.utcFormat,Sr.utcParse,Sr}function sv(e){return new Date(e)}function ov(e){return e instanceof Date?+e:+new Date(+e)}function Xu(e,t,n,r,i,a,o,l,c,u){var d=ku(),f=d.invert,p=d.domain,m=u(".%L"),y=u(":%S"),h=u("%I:%M"),g=u("%I %p"),k=u("%a %d"),S=u("%b %d"),j=u("%B"),M=u("%Y");function b(_){return(c(_)<_?m:l(_)<_?y:o(_)<_?h:a(_)<_?g:r(_)<_?i(_)<_?k:S:n(_)<_?j:M)(_)}return d.invert=function(_){return new Date(f(_))},d.domain=function(_){return arguments.length?p(Array.from(_,ov)):p().map(sv)},d.ticks=function(_){var N=p();return e(N[0],N[N.length-1],_??10)},d.tickFormat=function(_,N){return N==null?b:u(N)},d.nice=function(_){var N=p();return(!_||typeof _.range!="function")&&(_=t(N[0],N[N.length-1],_??10)),_?p(Yb(N,_)):d},d.copy=function(){return Su(d,Xu(e,t,n,r,i,a,o,l,c,u))},d}function ho(){return ma.apply(Xu(r1,i1,Sn,Qr,Ca,Jr,lo,oo,xr,qu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function lv({task:e,scale:t,onTaskClick:n,onTaskDoubleClick:r,isSelected:i=!1,taskIndex:a,tabIndex:o=-1,onFocus:l,"aria-label":c}){const u=$.useRef(null),[d,f]=$.useState(!1),[p,m]=$.useState(!1),y=t(e.start),h=t(e.end),g=Math.max(h-y,20),k=()=>{if(e.color)return e.color;switch(e.priority){case"high":return"#d5281b";case"medium":return"#005eb8";case"low":return"#007f3b";default:return"#005eb8"}},S=e.progress?g*e.progress/100:0,j=()=>{n?.(e)},M=()=>{r?.(e)},b=I=>{I.key==="Enter"?(I.preventDefault(),j()):I.key===" "&&(I.preventDefault(),M())},_=()=>{f(!0)},N=()=>{f(!1)},w=()=>{m(!0),l?.()},v=()=>{m(!1)},C=["gantt-task-bar",d&&"gantt-task-bar--pressed",(p||i)&&"gantt-task-bar--focused",e.priority&&`gantt-task-bar--priority-${e.priority}`,i&&"gantt-task-bar--selected",e.type&&`gantt-task-bar--type-${e.type}`].filter(Boolean).join(" "),D={"--task-left":`${y}px`,"--task-width":`${g}px`,"--task-color":k(),left:`${y}px`,width:`${g}px`,backgroundColor:k()};return s.jsxs("div",{role:"button",tabIndex:o,ref:u,"data-task-index":a,className:C,style:D,onClick:j,onDoubleClick:M,onKeyDown:b,onMouseDown:_,onMouseUp:N,onFocus:w,onBlur:v,"aria-label":c||`${i?"Selected: ":""}${e.title}: ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.priority?`, priority ${e.priority}`:""}${e.progress?`, ${e.progress}% complete`:""}`,"aria-describedby":`task-${e.id}-details`,children:[s.jsx("span",{className:"task-title",children:e.title}),e.progress!==void 0&&s.jsx("div",{className:"task-progress",style:{width:`${S}px`}}),s.jsx("span",{id:`task-${e.id}-details`,className:"sr-only",children:`Task: ${e.title}, from ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.progress?`, ${e.progress}% complete`:""}${e.priority?`, priority: ${e.priority}`:""}`})]})}function cv({viewStart:e,viewEnd:t,dateCount:n}){const r=[];for(let m=e.getTime();m<=t.getTime();m+=864e5)r.push(new Date(m));const a=new Date;a.setHours(0,0,0,0);const[o,l]=$.useState(-1),c=$.useRef(null),u=m=>{if(m.key==="ArrowLeft"){m.preventDefault();const y=Math.max(0,o===-1?0:o-1);l(y),p(y)}else if(m.key==="ArrowRight"){m.preventDefault();const y=Math.min(r.length-1,o===-1?0:o+1);l(y),p(y)}else if(m.key==="ArrowDown")m.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .timeline-container"):null)?.focus();else if(m.key==="Home")m.preventDefault(),l(0),p(0);else if(m.key==="End"){m.preventDefault();const y=r.length-1;l(y),p(y)}},d=m=>{if(m.key==="ArrowDown")m.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .resource-label"):null)?.focus();else if(m.key==="ArrowRight"){m.preventDefault();const y=c.current;y&&y.focus()}},f=()=>{o===-1&&(l(0),setTimeout(()=>p(0),0))},p=m=>{const y=c.current?.querySelector(`[data-date-index="${m}"]`);y&&y.focus()};return s.jsxs("div",{className:"gantt-header",role:"row","aria-rowindex":1,children:[s.jsx("div",{className:"header-resource",role:"columnheader","aria-colindex":1,tabIndex:0,"aria-label":"Resource column header",onKeyDown:d,children:"Resources"}),s.jsx("div",{ref:c,className:"header-timeline",role:"columnheader","aria-colindex":2,"aria-colspan":n,"aria-label":`Timeline from ${e.toLocaleDateString()} to ${t.toLocaleDateString()}. Use arrow keys to navigate between dates`,tabIndex:0,onKeyDown:u,onFocus:f,children:r.map((m,y)=>{const h=m.getTime()===a.getTime(),g=o===y;return s.jsx("div",{"data-date-index":y,className:`date-column ${h?"today":""} ${g?"focused":""}`,tabIndex:g?0:-1,role:"button","aria-label":`${m.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}${h?" (Today)":""}`,onFocus:()=>l(y),onKeyDown:u,children:m.toLocaleDateString("en-GB",{day:"numeric",month:"short"})},y)})})]})}function uv({resource:e,tasks:t,scale:n,onTaskClick:r,onTaskDoubleClick:i,rowIndex:a,dateCount:o}){const[l,c]=$.useState(!1),[u,d]=$.useState(-1),f=$.useRef(null);$.useEffect(()=>{l&&u>=0&&t.length>0&&setTimeout(()=>{f.current?.querySelector(`[data-task-index="${u}"]`)?.focus()},0)},[l,u,t.length]);const p=h=>{if(h.key==="ArrowLeft"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(h.key==="ArrowRight"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!l){switch(h.key){case"ArrowUp":h.preventDefault(),a===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-timeline"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+1}"] .timeline-container`):null)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+3}"] .timeline-container`):null)?.focus();break;case"ArrowLeft":h.preventDefault(),f.current?.closest(".gantt-row")?.querySelector(".resource-label")?.focus();break;case"Enter":t.length>0&&(h.preventDefault(),c(!0),d(0));break}return}switch(h.key){case"ArrowLeft":h.preventDefault();const g=Math.max(0,u-1);d(g),f.current?.querySelector(`[data-task-index="${g}"]`)?.focus();break;case"ArrowRight":h.preventDefault();const S=Math.min(t.length-1,u+1);d(S),f.current?.querySelector(`[data-task-index="${S}"]`)?.focus();break;case"Enter":h.preventDefault(),u>=0&&r?.(t[u]);break;case" ":h.preventDefault(),u>=0&&i?.(t[u]);break;case"Escape":h.preventDefault(),c(!1),d(-1),f.current?.focus();break}},m=h=>{switch(h.key){case"ArrowUp":h.preventDefault(),a===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-resource"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+1}"] .resource-label`):null)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+3}"] .resource-label`):null)?.focus();break;case"ArrowRight":h.preventDefault(),f.current?.focus();break}},y=h=>{l&&d(h)};return s.jsxs("div",{className:"gantt-row",role:"row","aria-rowindex":a+2,children:[s.jsx("div",{className:"resource-label",role:"gridcell","aria-colindex":1,tabIndex:0,"aria-label":`Resource: ${e.label}`,onKeyDown:m,children:e.label}),s.jsx("div",{ref:f,className:`timeline-container ${l?"timeline-active":""}`,role:"gridcell","aria-colindex":2,"aria-colspan":o,tabIndex:0,"aria-label":`Timeline for ${e.label} with ${t.length} task${t.length!==1?"s":""}. Press Enter to activate task navigation, then use arrow keys to navigate, Enter to select, Space to activate, Escape to exit`,onKeyDown:p,onFocus:()=>{l||d(-1)},children:t.map((h,g)=>s.jsx(lv,{task:h,scale:n,onTaskClick:r,onTaskDoubleClick:i,isSelected:l&&u===g,taskIndex:g,tabIndex:l&&u===g?0:-1,onFocus:()=>y(g)},h.id))})]})}function dv({resources:e,tasks:t=[],viewStart:n,viewEnd:r,onTaskClick:i,onTaskDoubleClick:a}){const o=$.useRef(null),[l,c]=$.useState(800),u=$.useMemo(()=>{if(n instanceof Date)return isNaN(n.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):n;const h=new Date(n);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):h},[n]),d=$.useMemo(()=>{if(r instanceof Date)return isNaN(r.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):r;const h=new Date(r);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):h},[r]),f=$.useMemo(()=>Math.ceil((d.getTime()-u.getTime())/864e5)+1,[u,d]);$.useEffect(()=>{if(!o.current||typeof window>"u")return;const h=typeof ResizeObserver<"u"?ResizeObserver:void 0;if(!h)return;const g=new h(k=>{const S=k[0];S&&c(Math.max(S.contentRect.width-220,400))});return g.observe(o.current),()=>g.disconnect()},[]);const p=$.useMemo(()=>ho().domain([u,d]).range([0,l]),[u,d,l]),m=$.useMemo(()=>{const h=new Map;return t.forEach(g=>{const k=h.get(g.resourceId)||[];k.push(g),h.set(g.resourceId,k)}),h},[t]),y=h=>{if(h.target===h.currentTarget)switch(h.key){case"ArrowDown":h.preventDefault(),typeof document<"u"&&o.current?.querySelector(".gantt-row .resource-label")?.focus();break;case"Home":h.preventDefault(),typeof document<"u"&&o.current?.querySelector(".header-resource")?.focus();break}};return s.jsxs("div",{className:"gantt-chart",role:"grid","aria-label":"Gantt Chart showing resource scheduling and task timelines","aria-rowcount":e.length+1,"aria-colcount":f+1,"aria-description":"Use arrow keys to navigate cells, Tab to cycle through tasks in timeline rows or dates in header, Enter to select task, Space to activate task, Alt+arrows to scroll the grid, Shift+arrows to scroll timeline rows",tabIndex:0,onKeyDown:y,children:[s.jsx(cv,{viewStart:u,viewEnd:d,dateCount:f}),s.jsx("div",{ref:o,className:"gantt-grid",role:"rowgroup","aria-label":"Gantt chart data rows",tabIndex:0,onKeyDown:h=>{h.key==="ArrowLeft"&&h.altKey?(h.preventDefault(),o.current?.scrollBy({left:-50,behavior:"smooth"})):h.key==="ArrowRight"&&h.altKey?(h.preventDefault(),o.current?.scrollBy({left:50,behavior:"smooth"})):h.key==="ArrowUp"&&h.altKey?(h.preventDefault(),o.current?.scrollBy({top:-50,behavior:"smooth"})):h.key==="ArrowDown"&&h.altKey&&(h.preventDefault(),o.current?.scrollBy({top:50,behavior:"smooth"}))},children:e.map((h,g)=>s.jsx(uv,{resource:h,tasks:m.get(h.id)||[],scale:p,onTaskClick:i,onTaskDoubleClick:a,rowIndex:g,dateCount:f},h.id))})]})}const ja=({children:e,href:t,active:n=!1,attributes:r={}})=>s.jsx("li",{className:"nhsuk-breadcrumb__item",children:n?s.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",...r,children:e}):s.jsx("a",{className:"nhsuk-breadcrumb__link",href:t,...r,children:e})}),Ju=({items:e=[],children:t,classes:n,labelText:r="Breadcrumb",href:i,text:a,reverse:o=!1,attributes:l={}})=>{const c=()=>t?$.Children.toArray(t).filter(g=>$.isValidElement(g)&&(g.type===ja||g.type?.displayName==="BreadcrumbItem")).map(g=>({text:typeof g.props.children=="string"?g.props.children:String(g.props.children),href:g.props.href,active:g.props.active,attributes:g.props.attributes})):[],u=()=>t?c():i&&a?[{href:i,text:a}]:e,d=()=>{const h=u();if(h&&h.length>0){const g=h.slice().reverse().find(k=>k.href&&!k.active);if(g)return{href:g.href,text:g.text}}return{text:"Home"}},f=u(),p=d(),m=ve("nhsuk-breadcrumb",{"nhsuk-breadcrumb--reverse":o},n),y=r;return s.jsxs("nav",{className:m,"aria-label":y,role:"navigation",...l,children:[s.jsx("ol",{className:"nhsuk-breadcrumb__list",role:"list",children:t?$.Children.map(t,(h,g)=>$.isValidElement(h)&&(h.type===ja||h.type?.displayName==="BreadcrumbItem")?$.cloneElement(h,{key:g}):null):f?.filter(h=>h.active||!!h.href).map((h,g)=>s.jsx("li",{className:"nhsuk-breadcrumb__item",role:"listitem",children:h.active?s.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",role:"text",...h.attributes||{},children:h.text}):s.jsx("a",{className:"nhsuk-breadcrumb__link",href:h.href,role:"link",...h.attributes||{},children:h.text})},g))}),p.href&&s.jsx("p",{className:"nhsuk-breadcrumb__back",children:s.jsxs("a",{className:"nhsuk-breadcrumb__backlink",href:p.href,role:"link","aria-label":`Back to ${p.text}`,...e.length>0?e[e.length-1]?.attributes||{}:{},children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Back to Â "}),p.text]})})]})};Ju.Item=ja,ja.displayName="BreadcrumbItem";const mo=({text:e="Skip to main content",href:t="#maincontent",classes:n,attributes:r={}})=>{const[i,a]=$.useState(!1);$.useEffect(()=>{a(!0)},[]),$.useEffect(()=>{if(typeof window>"u"||typeof document>"u"||!document.querySelector||!document.querySelectorAll)return;const l=c=>{const u=c.target,d=u.getAttribute("href");if(d&&d.startsWith("#")){const f=typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(d):null;if(f){f.hasAttribute("tabindex")||f.setAttribute("tabindex","-1"),f.focus(),f.classList.add("nhsuk-skip-link-focused-element");const p=window.setTimeout(()=>{f.classList.remove("nhsuk-skip-link-focused-element"),f.getAttribute("tabindex")==="-1"&&f.removeAttribute("tabindex")},3e3);u.__nhsSkipLinkTimeout=p}}};try{const c=document.querySelectorAll(".nhsuk-skip-link");return c.forEach(u=>{u.addEventListener("click",l)}),()=>{try{c.forEach(u=>{u.removeEventListener("click",l);const d=u.__nhsSkipLinkTimeout;d&&window.clearTimeout&&window.clearTimeout(d)})}catch(u){console.warn("SkipLink cleanup error:",u)}}}catch(c){return console.warn("SkipLink initialization error:",c),()=>{}}},[i]);const o=ve("nhsuk-skip-link",n);return s.jsx("a",{className:o,href:t,"data-module":"nhsuk-skip-link","data-enhanced":i?"true":"false",...r,children:e})},fv=({previousUrl:e,previousPage:t,nextUrl:n,nextPage:r,classes:i,attributes:a={}})=>{const o=ve("nhsuk-pagination",i);return s.jsx("nav",{className:o,role:"navigation","aria-label":"Pagination",...a,children:s.jsxs("ul",{className:"nhsuk-list nhsuk-pagination__list",children:[e&&t&&s.jsx("li",{className:"nhsuk-pagination-item--previous",children:s.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--prev",href:e,children:[s.jsx("span",{className:"nhsuk-pagination__title",children:"Previous"}),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),s.jsx("span",{className:"nhsuk-pagination__page",children:t}),s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:s.jsx("path",{d:"M4.1 12.3l2.7 3c.2.2.5.2.7 0 .1-.1.1-.2.1-.3v-2h11c.6 0 1-.4 1-1s-.4-1-1-1h-11V9c0-.2-.1-.4-.3-.5h-.2c-.1 0-.3.1-.4.2l-2.7 3c0 .2 0 .4.1.6z"})})]})}),n&&r&&s.jsx("li",{className:"nhsuk-pagination-item--next",children:s.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--next",href:n,children:[s.jsx("span",{className:"nhsuk-pagination__title",children:"Next"}),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),s.jsx("span",{className:"nhsuk-pagination__page",children:r}),s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:s.jsx("path",{d:"M19.6 11.66l-2.73-3A.51.51 0 0 0 16 9v2H5a1 1 0 0 0 0 2h11v2a.5.5 0 0 0 .32.46.39.39 0 0 0 .18 0 .52.52 0 0 0 .37-.16l2.73-3a.5.5 0 0 0 0-.64z"})})]})})]})})},hv=({items:e,classes:t,ariaLabel:n="Pages in this guide",attributes:r={}})=>{const i=ve("nhsuk-contents-list",t),a=(o,l)=>o.current?s.jsx("li",{className:"nhsuk-contents-list__item","aria-current":"page",...o.attributes||{},children:s.jsx("span",{className:"nhsuk-contents-list__current",children:o.text})},l):s.jsx("li",{className:"nhsuk-contents-list__item",children:s.jsx("a",{className:"nhsuk-contents-list__link",href:o.href,...o.attributes||{},children:o.text})},l);return s.jsxs("nav",{className:i,role:"navigation","aria-label":n,...r,children:[s.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Contents"}),s.jsx("ol",{className:"nhsuk-contents-list__list",children:e.map((o,l)=>a(o,l))})]})},po=$.forwardRef(({variant:e="default",heading:t,headingHtml:n,headingLevel:r=2,headingClasses:i,description:a,descriptionHtml:o,href:l,imgURL:c,imgAlt:u,...d},f)=>{const p=["nhsuk-card",e==="clickable"&&"nhsuk-card--clickable",e==="secondary"&&"nhsuk-card--secondary",e==="feature"&&"nhsuk-card--feature",d.className].filter(Boolean).join(" "),m=["nhsuk-card__content",e==="feature"&&"nhsuk-card__content--feature",e==="primary"&&"nhsuk-card__content--primary",e==="secondary"&&"nhsuk-card__content--secondary"].filter(Boolean).join(" "),y=["nhsuk-card__heading",e==="feature"&&"nhsuk-card__heading--feature",i].filter(Boolean).join(" "),h=()=>{if(n)return s.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const S=()=>l&&e!=="feature"?s.jsx("a",{className:"nhsuk-card__link",href:l,children:t}):t;return s.jsx(Xt,{level:r,className:y,children:S()})},g=()=>d.children?d.children:o?s.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):a?s.jsx("p",{className:"nhsuk-card__description",children:a}):null,k=()=>e!=="primary"?null:s.jsxs("svg",{className:"nhsuk-icon",xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27","aria-hidden":"true",focusable:"false",children:[s.jsx("circle",{cx:"13.333",cy:"13.333",r:"13.333",fill:""}),s.jsxs("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2.667",children:[s.jsx("path",{d:"M15.438 13l-3.771 3.771"}),s.jsx("path",{d:"M11.667 9.229L15.438 13"})]})]});return s.jsxs("div",{...d,className:p,ref:f,children:[c&&s.jsx("img",{className:"nhsuk-card__img",src:c,alt:u||""}),s.jsxs("div",{className:m,children:[h(),g(),k()]})]})});po.displayName="Card";const mv=({className:e,children:t,"data-testid":n,id:r})=>{const i=["nhsuk-card-group",e].filter(Boolean).join(" ");return s.jsx("ul",{className:i,"data-testid":n,id:r,children:t})},pv=({className:e,children:t,"data-testid":n})=>{const r=["nhsuk-card-group__item",e].filter(Boolean).join(" ");return s.jsx("li",{className:r,"data-testid":n,children:t})},gv=({type:e,heading:t,headingHtml:n,headingLevel:r=3,headingClasses:i,description:a,descriptionHtml:o,className:l,children:c,"data-testid":u,id:d,"aria-label":f,"aria-labelledby":p,"aria-describedby":m})=>{const y=["nhsuk-care-card",`nhsuk-care-card--${e}`,l].filter(Boolean).join(" "),h=["nhsuk-care-card__heading",i].filter(Boolean).join(" "),g=()=>{if(n)return s.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const S={"non-urgent":"Non-urgent advice:",urgent:"Urgent advice:",emergency:"Immediate action required:"}[e],j=s.jsxs("span",{role:"text",children:[s.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[S," "]}),t]});return s.jsx(Xt,{level:r,className:h,children:j})},k=()=>c||(o?s.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):a?s.jsx("p",{className:"nhsuk-care-card__text",children:a}):null);return s.jsxs("div",{className:y,"data-testid":u,id:d,"aria-label":f,"aria-labelledby":p,"aria-describedby":m,children:[s.jsxs("div",{className:"nhsuk-care-card__heading-container",children:[g(),s.jsx("span",{className:"nhsuk-care-card__arrow","aria-hidden":"true"})]}),s.jsx("div",{className:"nhsuk-care-card__content",children:k()})]})},Qu=({id:e,className:t,headingText:n,headingHtml:r,headingLevel:i=2,bodyText:a,bodyHtml:o,children:l,...c})=>{const u=ve("nhsuk-panel",t),d=()=>!n&&!r&&!l?null:r?s.jsx(Xt,{level:i,className:"nhsuk-panel__heading",html:r,marginBottom:"var(--panel-heading-margin, 24px)"}):n?s.jsx(Xt,{level:i,className:"nhsuk-panel__heading",text:n,marginBottom:"var(--panel-heading-margin, 24px)"}):null,f=()=>l?s.jsx("div",{className:"nhsuk-panel__body",children:l}):o?s.jsx("div",{className:"nhsuk-panel__body",dangerouslySetInnerHTML:{__html:o}}):a?s.jsx("div",{className:"nhsuk-panel__body",children:s.jsx("p",{children:a})}):null;return s.jsxs("div",{className:u,id:e,...c,children:[d(),f()]})},yv=({text:e,html:t,children:n,className:r,...i})=>{const a=ve("nhsuk-inset-text",r),o=()=>n||(t?s.jsx("div",{dangerouslySetInnerHTML:{__html:t}}):e?s.jsx("p",{children:e}):null);return s.jsx("div",{className:a,...i,children:o()})},bv=({items:e,noBorder:t=!1,className:n,...r})=>{const i=ve("nhsuk-summary-list",{"nhsuk-summary-list--no-border":t},n),a=l=>l.children?l.children:l.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text?l.text:null,o=l=>!l||!l.items.length?null:s.jsx("dd",{className:"nhsuk-summary-list__actions",children:s.jsx("ul",{className:"nhsuk-summary-list__actions-list",children:l.items.map((c,u)=>s.jsx("li",{className:"nhsuk-summary-list__actions-list-item",children:s.jsxs("a",{href:c.href,className:"nhsuk-link",...c.attributes,children:[a(c),c.visuallyHiddenText&&s.jsx("span",{className:"nhsuk-u-visually-hidden",children:c.visuallyHiddenText})]})},u))})});return s.jsx("div",{className:"nhsuk-summary-list-container",children:s.jsx("dl",{className:i,...r,children:e.map((l,c)=>s.jsxs("div",{className:"nhsuk-summary-list__row",children:[s.jsx("dt",{className:"nhsuk-summary-list__key",children:a(l.key)}),s.jsx("dd",{className:"nhsuk-summary-list__value",children:a(l.value)}),o(l.actions)]},c))})})},ni={current:null},vv=()=>{if(ni.current)return ni.current;try{ni.current=require("prismjs");try{require("prismjs/components/prism-typescript")}catch{}try{require("prismjs/components/prism-tsx")}catch{}try{require("prismjs/components/prism-json")}catch{}}catch{ni.current=null}return ni.current},xv=e=>{const t=[{regex:/\b(import|from|export|const|let|var|return|if|else|for|while|switch|case|break|new|throw|try|catch|finally|class|extends|implements|interface|type|as|async|await|function)\b/g,cls:"kw"},{regex:/(['"`])(?:\\.|(?!\1).)*\1/g,cls:"str"},{regex:/\/\*[^]*?\*\/|\/\/.*$/gm,cls:"com"},{regex:/\b([0-9]+(?:\.[0-9]+)?)\b/g,cls:"num"}];let n=e;return t.forEach(r=>{n=n.replace(r.regex,i=>`<span class="nhsuk-code-${r.cls}">${i}</span>`)}),n},Ta=(e,t,n)=>{if(n||!t)return e;const r=vv();if(r&&r.languages){const i=r.languages[t]?t:r.languages.typescript&&(t==="ts"||t==="tsx"||t==="typescript")?"typescript":r.languages.json&&t==="json"?"json":void 0;if(i)try{return r.highlight(e,r.languages[i],i)}catch{}}return xv(e)},_v=({rows:e,head:t,caption:n,captionSize:r,firstCellIsHeader:i=!1,responsive:a=!1,heading:o,headingLevel:l=3,panel:c=!1,panelClasses:u,tableClasses:d,classes:f,attributes:p,"data-testid":m,columns:y,data:h,visuallyHiddenCaption:g=!1})=>{const k=`nhsuk-table__caption ${r?`nhsuk-table__caption--${r}`:""}`.trim(),S=ve("nhsuk-table",{"nhsuk-table-responsive":a},d),j=ve(f),M=(v,C)=>{const D=ve("nhsuk-table__header",{[`nhsuk-table__header--${v.format}`]:v.format},v.classes),I={scope:"col",...v.colspan&&{colSpan:v.colspan},...v.rowspan&&{rowSpan:v.rowspan},...a&&{role:"columnheader"},...v.attributes};let B;if(v.node!=null)B=s.jsx(s.Fragment,{children:v.node});else if(v.html)B=s.jsx("span",{dangerouslySetInnerHTML:{__html:v.html}});else if(v.code!=null){const E=Array.isArray(v.code),A=E?v.code.join(`
`):v.code,L=E||A.includes(`
`),z={className:ve("nhsuk-table__code",v.codeClassName,{"nhsuk-table__code--block":L,"nhsuk-table__code--inline":!L}),...v.codeLanguage?{"data-language":v.codeLanguage}:{}},ae=Ta(A,v.codeLanguage);B=L?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...z,dangerouslySetInnerHTML:{__html:ae}})}):s.jsx("code",{...z,dangerouslySetInnerHTML:{__html:ae}})}else B=v.text;return s.jsx("th",{className:D,...I,children:B},C)},b=(v,C,D)=>{const I=i&&D||v.rowHeader,B=ve(I?"nhsuk-table__header":"nhsuk-table__cell",{[`nhsuk-table__${I?"header":"cell"}--${v.format}`]:v.format},v.classes),E={...I&&{scope:"row"},...v.colspan&&{colSpan:v.colspan},...v.rowspan&&{rowSpan:v.rowspan},...a&&{role:I?"rowheader":"cell",...v.header&&{"data-label":v.header}},...v.attributes};let A;if(v.node!=null)A=s.jsx(s.Fragment,{children:v.node});else if(v.html)A=s.jsx("span",{dangerouslySetInnerHTML:{__html:v.html}});else if(v.code!=null){const ae=Array.isArray(v.code),q=ae?v.code.join(`
`):v.code,O=ae||q.includes(`
`),ne={className:ve("nhsuk-table__code",v.codeClassName,{"nhsuk-table__code--block":O,"nhsuk-table__code--inline":!O}),...v.codeLanguage?{"data-language":v.codeLanguage}:{}},Y=Ta(q,v.codeLanguage,v.disableHighlight);A=O?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...ne,dangerouslySetInnerHTML:{__html:Y}})}):s.jsx("code",{...ne,dangerouslySetInnerHTML:{__html:Y}})}else A=v.text;const L=s.jsxs(s.Fragment,{children:[a&&v.header&&s.jsxs("span",{className:"nhsuk-table-responsive__heading","aria-hidden":"true",children:[v.header," "]}),A]}),z=I?"th":"td";return s.jsx(z,{className:B,...E,children:L},C)};let _=t,N=e;!_&&y&&y.length&&(_=y.map(v=>({text:v.title,format:v.format,classes:v.headerClasses,attributes:v.headerAttributes}))),!N&&y&&h&&h.length&&(N=h.map((v,C)=>y.map(D=>{const I=D.accessor?D.accessor(v,C):v[D.key];let B={format:D.format,classes:D.cellClasses,attributes:D.cellAttributes};if(D.rowHeader&&(B.rowHeader=!0),D.render){const E=D.render(I,v,C,D);return E==null||typeof E=="boolean"?{...B,text:""}:typeof E=="string"||typeof E=="number"?{...B,text:String(E)}:{...B,...E}}return{...B,text:I!=null?String(I):""}})));const w=()=>s.jsxs("table",{className:S,...a&&{role:"table"},...p,...m&&{"data-testid":m},children:[n&&s.jsx("caption",{className:ve(k,g&&"nhsuk-u-visually-hidden"),children:n}),_&&_.length>0&&s.jsx("thead",{className:"nhsuk-table__head",...a&&{role:"rowgroup"},children:s.jsx("tr",{...a&&{role:"row"},children:_.map((v,C)=>M(v,C))})}),s.jsx("tbody",{className:"nhsuk-table__body",children:N&&N.map((v,C)=>s.jsx("tr",{className:"nhsuk-table__row",...a&&{role:"row"},children:v.map((D,I)=>b(D,I,I===0))},C))})]});return c?s.jsxs(Qu,{className:u,children:[o&&s.jsx(Xt,{level:l,className:"nhsuk-table__heading-tab",children:o}),w()]}):j?s.jsx("div",{className:j,children:w()}):w()},wv=({children:e,size:t,className:n})=>{const r=ve("nhsuk-table__caption",t&&`nhsuk-table__caption--${t}`,n);return s.jsx("caption",{className:r,children:e})},Ku=({responsive:e,className:t,children:n,...r})=>{const i=e?{role:"row"}:{};return s.jsx("tr",{className:t,...i,...r,children:n})},ed=({text:e,html:t,node:n,code:r,codeLanguage:i,codeClassName:a,disableHighlight:o,format:l,classes:c,colspan:u,rowspan:d,attributes:f,responsive:p,as:m="th"})=>{const y=ve("nhsuk-table__header",{[`nhsuk-table__header--${l}`]:l},c),h={scope:"col",...u&&{colSpan:u},...d&&{rowSpan:d},...p&&{role:"columnheader"},...f};let g;if(n!=null)g=s.jsx(s.Fragment,{children:n});else if(t)g=s.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const S=Array.isArray(r),j=S?r.join(`
`):r,M=S||j.includes(`
`),b={className:ve("nhsuk-table__code",a,{"nhsuk-table__code--block":M,"nhsuk-table__code--inline":!M}),...i?{"data-language":i}:{}},_=Ta(j,i,o);g=M?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{...b,dangerouslySetInnerHTML:{__html:_}})}):s.jsx("code",{...b,dangerouslySetInnerHTML:{__html:_}})}else g=e;const k=m;return s.jsx(k,{className:y,...h,children:g})},Sv=({text:e,html:t,node:n,code:r,codeLanguage:i,codeClassName:a,disableHighlight:o,format:l,classes:c,colspan:u,rowspan:d,attributes:f,responsive:p,rowHeader:m})=>{const y=!!m,h=y?"th":"td",g=ve(y?"nhsuk-table__header":"nhsuk-table__cell",l&&`nhsuk-table__${y?"header":"cell"}--${l}`,c),k={...u&&{colSpan:u},...d&&{rowSpan:d},...y&&{scope:"row"},...p&&{role:y?"rowheader":"cell"},...f};let S;if(n!=null)S=s.jsx(s.Fragment,{children:n});else if(t)S=s.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const j=Array.isArray(r),M=j?r.join(`
`):r,b=j||M.includes(`
`),_={className:ve("nhsuk-table__code",a,{"nhsuk-table__code--block":b,"nhsuk-table__code--inline":!b}),...i?{"data-language":i}:{}},N=Ta(M,i,o);S=b?s.jsx("pre",{className:"nhsuk-table__pre",children:s.jsx("code",{..._,dangerouslySetInnerHTML:{__html:N}})}):s.jsx("code",{..._,dangerouslySetInnerHTML:{__html:N}})}else S=e;return s.jsx(h,{className:g,...k,children:S})},Qt=_v;Qt.Caption=wv,Qt.BodyRow=Ku,Qt.HeaderCell=ed,Qt.Cell=Sv;let td=!1,nd=!1;Object.defineProperty(Qt,"Row",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!td&&(console.warn("Table.Row is deprecated. Use Table.BodyRow instead."),td=!0),Ku}}),Object.defineProperty(Qt,"TH",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!nd&&(console.warn("Table.TH is deprecated. Use Table.HeaderCell instead."),nd=!0),ed}});const kv=$.forwardRef(({items:e,defaultActiveTab:t,activeTab:n,onTabChange:r,onTabFocus:i,onTabListBlur:a,onEscape:o,autoActivate:l=!0,className:c,id:u,"data-testid":d,...f},p)=>{const m=n!==void 0,[y,h]=$.useState(()=>t||e[0]?.id||""),g=m?n:y,k=$.useRef(null),S=$.useRef(new Map),j=$.useCallback(C=>{m||h(C),r?.(C)},[m,r]),M=$.useCallback(C=>{i?.(C),l&&j(C)},[i,l,j]),b=$.useCallback((C,D)=>{const I=e.filter(A=>!A.disabled).map(A=>A.id),B=I.indexOf(D);let E=null;switch(C.key){case"ArrowLeft":E=B>0?B-1:I.length-1;break;case"ArrowRight":E=B<I.length-1?B+1:0;break;case"Home":E=0;break;case"End":E=I.length-1;break;case"Escape":C.preventDefault(),o?.();return;default:return}if(E!==null){C.preventDefault();const A=I[E],L=S.current.get(A);L&&(L.focus(),M(A))}},[e,M,o]),_=$.useCallback((C,D)=>{D?S.current.set(C,D):S.current.delete(C)},[]),N=$.useCallback(C=>{const D=S.current.get(C);D&&D.focus()},[]);$.useImperativeHandle(p,()=>({focusTab:N,getActiveTab:()=>g,getTabListElement:()=>k.current}),[N,g]);const w=$.useCallback(C=>{const D=C.relatedTarget;k.current?.contains(D)||a?.()},[a]),v=ve("nhsuk-tabs",c);return s.jsxs("div",{className:v,id:u,"data-testid":d,...f,children:[s.jsx("h2",{className:"nhsuk-tabs__title",children:"Contents"}),s.jsx("div",{className:"nhsuk-tabs__list-container",ref:k,children:s.jsx("ul",{className:"nhsuk-tabs__list",role:"tablist",onBlur:w,children:e.map(C=>{const D=C.id===g,I=C.disabled,B=ve("nhsuk-tabs__list-item",{"nhsuk-tabs__list-item--selected":D,"nhsuk-tabs__list-item--disabled":I});return s.jsx("li",{className:B,role:"presentation",children:s.jsx("button",{ref:E=>_(C.id,E),className:"nhsuk-tabs__tab",role:"tab","aria-selected":D,"aria-controls":`${C.id}-panel`,id:`${C.id}-tab`,tabIndex:D?0:-1,disabled:I,onClick:()=>!I&&j(C.id),onKeyDown:E=>!I&&b(E,C.id),onFocus:()=>!I&&M(C.id),...C.attributes,children:C.label})},C.id)})})}),e.map(C=>{const D=C.id===g;return s.jsx("div",{className:"nhsuk-tabs__panel",role:"tabpanel","aria-labelledby":`${C.id}-tab`,id:`${C.id}-panel`,hidden:!D,children:C.content},C.id)})]})}),rd=$.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:i=!1,className:a="",id:o,children:l,...c},u)=>{const d=["nhsuk-details",a].filter(Boolean).join(" "),f=t?s.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):s.jsx("span",{className:"nhsuk-details__summary-text",children:e});let p;return l?p=l:r?p=s.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),s.jsxs("details",{ref:u,id:o,className:d,open:i,...c,children:[s.jsx("summary",{className:"nhsuk-details__summary",tabIndex:0,children:f}),s.jsx("div",{className:"nhsuk-details__text",children:p})]})});rd.displayName="Details";const id=$.forwardRef(({title:e,type:t,items:n,hidePrefix:r=!1,headingLevel:i=3,className:a,...o},l)=>{const c=["nhsuk-do-dont-list"];a&&c.push(a);const u=["nhsuk-list",t==="tick"?"nhsuk-list--tick":"nhsuk-list--cross"],d=()=>t==="cross"?s.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:[s.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),s.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]}):s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"34",height:"34",children:s.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})}),f=m=>t==="cross"&&!r?`do not ${m}`:m,p=()=>s.jsx(Xt,{level:i,className:"nhsuk-do-dont-list__label",text:e});return s.jsxs("div",{ref:l,className:c.join(" "),...o,children:[p(),s.jsx("div",{className:"nhsuk-do-dont-list__content--feature",children:s.jsx("ul",{className:u.join(" "),role:"list",children:n.map((m,y)=>s.jsxs("li",{children:[d(),f(m.item)]},y))})})]})});id.displayName="DoDontList";const ad=$.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:i=!1,className:a="",id:o,children:l,...c},u)=>{const d=["nhsuk-expander",a].filter(Boolean).join(" "),f=t?s.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):s.jsx("span",{className:"nhsuk-details__summary-text",children:e});let p;return l?p=l:r?p=s.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),s.jsxs("details",{ref:u,id:o,className:d,open:i,...c,children:[s.jsx("summary",{className:"nhsuk-details__summary",children:f}),s.jsx("div",{className:"nhsuk-details__text",children:p})]})});ad.displayName="Expander";const sd=$.forwardRef(({items:e,idPrefix:t="task-list",className:n,...r},i)=>{const a=["nhsuk-task-list",n].filter(Boolean).join(" "),o=(l,c)=>{const u=c+1,d=`${t}-${u}-hint`,f=`${t}-${u}-status`,p=!!l.href,m=["nhsuk-task-list__item",p&&"nhsuk-task-list__item--with-link",l.classes].filter(Boolean).join(" "),y=[l.hint&&d,f].filter(Boolean).join(" ");return s.jsx(Cv,{item:l,itemClasses:m,hasLink:p,hintId:d,statusId:f,ariaDescribedBy:y},c)};return s.jsx("ul",{ref:i,className:a,...r,children:e.map(o)})}),Cv=({item:e,itemClasses:t,hasLink:n,hintId:r,statusId:i,ariaDescribedBy:a})=>{const o=()=>{const u=e.title.html?s.jsx("span",{dangerouslySetInnerHTML:{__html:e.title.html}}):e.title.text,d=[n?"nhsuk-task-list__link":"",e.title.classes].filter(Boolean).join(" ");return n?s.jsx("a",{className:d,href:e.href,"aria-describedby":a,children:u}):s.jsx("div",{className:e.title.classes||"",children:u})},l=()=>e.hint?e.hint.html?s.jsx("div",{id:r,className:"nhsuk-task-list__hint",dangerouslySetInnerHTML:{__html:e.hint.html}}):s.jsx("div",{id:r,className:"nhsuk-task-list__hint",children:e.hint.text}):null,c=()=>{const u=["nhsuk-task-list__status",e.status.classes].filter(Boolean).join(" ");let d;return e.status.tag?d=s.jsx(Ge,{...e.status.tag}):e.status.html?d=s.jsx("span",{dangerouslySetInnerHTML:{__html:e.status.html}}):d=e.status.text,s.jsx("div",{className:u,id:i,children:d})};return s.jsxs("li",{className:t,children:[s.jsxs("div",{className:"nhsuk-task-list__name-and-hint",children:[o(),l()]}),c()]})};sd.displayName="TaskList";const Nv=({heading:e,headingLevel:t=3,text:n,html:r,children:i,className:a,...o})=>{const l=/important/i.test(e),c=()=>i||(r?s.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n?s.jsx("p",{children:n}):null),u=["nhsuk-warning-callout",a].filter(Boolean).join(" "),d=`h${t}`;return s.jsxs("div",{className:u,...o,children:[$.createElement(d,{className:"nhsuk-warning-callout__label"},l?s.jsxs(s.Fragment,{children:[e,s.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"})]}):s.jsxs("span",{role:"text",children:[s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Important: "}),e]})),c()]})},Mv=({src:e,alt:t,caption:n,sizes:r,srcset:i,className:a,...o})=>{const l=["nhsuk-image",a].filter(Boolean).join(" ");return s.jsxs("figure",{className:l,...o,children:[s.jsx("img",{className:"nhsuk-image__img",src:e,alt:t,...r&&i?{sizes:r,srcSet:i}:{}}),n&&s.jsx("figcaption",{className:"nhsuk-image__caption",dangerouslySetInnerHTML:{__html:n}})]})},jv=({dateRange:e,onPrev:t,onNext:n,onToday:r,density:i,onDensityChange:a,a11yMode:o,onA11yModeChange:l})=>s.jsxs("div",{className:"nhs-slot-matrix__toolbar",role:"group","aria-label":"Slot matrix controls",children:[s.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[s.jsx(pt,{variant:"secondary",size:"small",onClick:t,"aria-label":"Previous date range",children:"Prev"}),s.jsx(pt,{variant:"secondary",size:"small",onClick:r,"aria-label":"Jump to today",children:"Today"}),s.jsx(pt,{variant:"secondary",size:"small",onClick:n,"aria-label":"Next date range",children:"Next"}),s.jsxs("span",{className:"nhs-slot-matrix__toolbar-daterange","aria-live":"polite",children:[e.start.toDateString()," â€“ ",e.end.toDateString()]})]}),s.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[s.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-density-select",children:"Density"}),s.jsx(Vr,{id:"slot-matrix-density-select",name:"slot-matrix-density",ariaLabel:"Change density",value:i,onChange:c=>a?.(c.target.value),options:[{value:"comfortable",text:"Comfortable"},{value:"compact",text:"Compact"}]}),s.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-mode-select",children:"Mode"}),s.jsx(Vr,{id:"slot-matrix-mode-select",name:"slot-matrix-mode",ariaLabel:"Change accessibility mode",value:o,onChange:c=>l?.(c.target.value),options:[{value:"grid",text:"Grid"},{value:"list",text:"List"}]})]})]}),Tv=({items:e,orientation:t="horizontal"})=>s.jsx("div",{className:`nhs-slot-matrix__legend nhs-slot-matrix__legend--${t}`,role:"list","aria-label":"Slot legend",children:e.map(n=>s.jsx("div",{role:"listitem",className:"nhs-slot-matrix__legend-item",children:s.jsx(Ge,{color:Dv(n.status),text:n.label})},n.status))});function Dv(e){switch(e){case"available":return"green";case"full":return"grey";case"overbook":return"orange";case"held":return"yellow";case"blocked":return"grey";default:return"default"}}const Iv=({slots:e,sessions:t,value:n,defaultValue:r,onChange:i,selectionMode:a="single",a11yMode:o,className:l,style:c,getSlotAriaLabel:u,toolbar:d,enableDefaultToolbar:f=!0,legendItems:p,enableDefaultLegend:m=!0,legendPlacement:y="bottom",onA11yModeChange:h})=>{const[g,k]=$.useState("grid"),S=o||g,[j,M]=$.useState(r||[]),b=n??j,_=$.useMemo(()=>{const E=new Set;return e.forEach(A=>E.add(new Date(A.start).getTime())),Array.from(E).sort((A,L)=>A-L)},[e]),N=$.useMemo(()=>{const E={};return e.forEach(A=>{const L=new Date(A.start).getTime();E[L]||(E[L]={});const z=A.capacity-A.booked-(A.held||0);E[L][A.sessionId]={slot:A,remaining:z}}),E},[e]),w=$.useCallback(E=>{if(a==="single"){const A=[E.id];n||M(A),i?.(A,{lastAction:"select"})}else{const A=b.includes(E.id),L=A?b.filter(z=>z!==E.id):[...b,E.id];n||M(L),i?.(L,{lastAction:A?"deselect":"select"})}},[a,b,n,i]),v=$.useMemo(()=>p||(m?Array.from(new Set(e.map(A=>A.status))).map(A=>({status:A,label:A.charAt(0).toUpperCase()+A.slice(1)})):void 0),[p,m,e]),C=v?s.jsx(Tv,{items:v,orientation:y==="left"||y==="right"?"vertical":"horizontal"}):null,D=E=>{o||k(E),h?.(E)},I=d||(f?s.jsx(jv,{dateRange:{start:new Date,end:new Date},density:"comfortable",a11yMode:S,onA11yModeChange:D}):null),B=s.jsx("div",{style:c,className:ve(l),children:s.jsx(ua,{className:ve("nhs-slot-matrix-grid-wrapper"),children:s.jsx(vn,{children:s.jsx(gr,{width:Ln.Full,children:s.jsxs("div",{className:"nhs-slot-matrix",children:[I,y==="top"&&C,s.jsx("ul",{"aria-label":"Appointment slots list",children:e.map(E=>s.jsx("li",{children:s.jsxs("button",{type:"button",onClick:()=>w(E),"aria-pressed":b.includes(E.id),children:[ri(new Date(E.start))," â€“ ",ri(new Date(E.end))," (",E.status,")"]})},E.id))}),y==="bottom"&&C]})})})})});return S==="list"?B:s.jsx("div",{style:c,className:ve(l),children:s.jsx(ua,{className:ve("nhs-slot-matrix-grid-wrapper"),children:s.jsx(vn,{children:s.jsx(gr,{width:Ln.Full,children:s.jsxs("div",{className:"nhs-slot-matrix",children:[I,y==="top"&&C,s.jsxs("div",{role:"grid","aria-rowcount":_.length+1,"aria-colcount":t.length+1,children:[s.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[s.jsx("div",{role:"columnheader","aria-label":"Timebands",className:"nhs-slot-matrix__timeband-header"}),t.map(E=>s.jsx("div",{role:"columnheader","aria-label":`Session ${E.specialty}`,className:"nhs-slot-matrix__session-header",children:E.specialty},E.id))]}),_.map(E=>s.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[s.jsx("div",{role:"rowheader",className:"nhs-slot-matrix__timeband-header","aria-label":ri(new Date(E)),children:ri(new Date(E))}),t.map(A=>{const L=N[E]?.[A.id];if(!L)return s.jsx("div",{role:"gridcell",className:"nhs-slot-matrix__cell","aria-disabled":"true"},A.id);const{slot:z,remaining:ae}=L,q=b.includes(z.id),O=u?u(z):`Slot ${ri(new Date(z.start))} ${z.status}${ae===0?" full":""}`;return s.jsx("button",{type:"button",role:"gridcell","data-status":z.status,className:ve("nhs-slot-matrix__cell",q&&"nhs-slot-matrix__cell--selected"),"aria-label":O,"aria-selected":q||void 0,onClick:()=>w(z),children:ae>0?`${ae} left`:"Full"},z.id)})]},E))]}),y==="bottom"&&C]})})})})})};function od(e){return e<10?`0${e}`:`${e}`}function ri(e){return`${od(e.getHours())}:${od(e.getMinutes())}`}const ld=({title:e,value:t,subtitle:n,variant:r="default",href:i,className:a="",ariaLabel:o,...l})=>{const c=["nhs-fdp-summary-card",`nhs-fdp-summary-card--${r}`,a].filter(Boolean).join(" "),u=s.jsxs(s.Fragment,{children:[s.jsx(Xt,{level:3,className:"nhs-fdp-summary-card__title",children:e}),s.jsx("p",{className:"nhs-fdp-summary-card__value",children:t}),n&&s.jsx("p",{className:"nhs-fdp-summary-card__subtitle",children:n})]});return i?s.jsx("a",{className:`${c} nhs-fdp-summary-card--clickable`,href:i,"aria-label":o||`${e}: ${t}`,...l,children:u}):s.jsx("div",{className:c,"aria-label":o,...l,children:u})},Lv=({cards:e,className:t="",...n})=>{const r=["nhs-fdp-dashboard-summary-grid",t].filter(Boolean).join(" ");return s.jsx("div",{className:r,...n,children:s.jsx(ua,{children:s.jsx(vn,{children:e.map((i,a)=>s.jsx(gr,{width:Ln.OneQuarter,className:"nhs-fdp-dashboard-summary-grid__column","data-card-index":a,children:s.jsx(ld,{...i})},a))})})})},cd=$.forwardRef(({data:e,columns:t,sortConfig:n,onSort:r,selectedRowIndex:i,onRowSelect:a,id:o,testId:l,ariaLabel:c,ariaLabelledby:u,ariaDescribedby:d,className:f,tableClassName:p,bordered:m=!1,striped:y=!1,responsive:h=!1,tableType:g="default"},k)=>{const S=$.useRef(null),j=$.useRef(null),M=$.useRef(null);$.useImperativeHandle(k,()=>S.current,[]);const[b,_]=$.useState(0),[N,w]=$.useState(0),[v,C]=$.useState("headers"),[D,I]=$.useState("browse"),B=t.length,E=e.length,A=$.useMemo(()=>!n||n.length===0?e:[...e].sort((Y,K)=>{for(const{key:X,direction:J}of n){const pe=Y[X],ie=K[X];if(pe==null&&ie==null)continue;if(pe==null)return 1;if(ie==null)return-1;let se=0;if(typeof pe=="number"&&typeof ie=="number"?se=pe-ie:se=String(pe).localeCompare(String(ie)),se!==0)return J==="asc"?se:-se}return 0}),[e,n]),L=$.useCallback((Y,K)=>{setTimeout(()=>{const X=S.current?.querySelector(`tbody tr:nth-child(${Y+1}) td:nth-child(${K+1})`);X&&(X.focus(),typeof X.scrollIntoView=="function"&&X.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),z=$.useCallback(Y=>{setTimeout(()=>{const K=S.current?.querySelector(`th:nth-child(${Y+1})`);K&&(K.focus(),typeof K.scrollIntoView=="function"&&K.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),ae=$.useCallback(Y=>{r?.(Y)},[r]),q=$.useCallback(Y=>{a?.(Y)},[a]),O=$.useCallback(Y=>{const{key:K}=Y;switch(K){case"Enter":if(Y.preventDefault(),v==="headers"&&D==="browse")I("navigate"),z(N);else if(v==="headers"&&D==="navigate"){const X=t[N];X&&ae(X.key)}else v==="cells"&&D==="browse"?(I("navigate"),L(b,N)):v==="cells"&&D==="navigate"&&q(b);break;case"Escape":Y.preventDefault(),(v==="headers"&&D==="navigate"||v==="cells"&&D==="navigate")&&I("browse");break;case"ArrowLeft":if(Y.preventDefault(),D==="navigate"||D==="browse"&&v==="headers"){if(v==="headers"){const X=Math.max(0,N-1);w(X),z(X)}else if(v==="cells"){const X=Math.max(0,N-1);w(X),L(b,X)}}break;case"ArrowRight":if(Y.preventDefault(),D==="navigate"||D==="browse"&&v==="headers"){if(v==="headers"){const X=Math.min(B-1,N+1);w(X),z(X)}else if(v==="cells"){const X=Math.min(B-1,N+1);w(X),L(b,X)}}break;case"ArrowUp":if(Y.preventDefault(),v==="cells"){if(D==="browse"){const X=Math.max(0,b-1);_(X),L(X,0),w(0)}else if(D==="navigate")if(b>0){const X=b-1;_(X),L(X,N)}else C("headers"),I("browse"),z(N)}break;case"ArrowDown":if(Y.preventDefault(),v==="headers"&&D==="browse")C("cells"),_(0),w(0),L(0,0);else if(v==="cells"){const X=E-1;if(D==="browse"){const J=Math.min(X,b+1);_(J),L(J,0),w(0)}else if(D==="navigate"&&b<X){const J=b+1;_(J),L(J,N)}}break;case"Home":Y.preventDefault(),v==="headers"?(w(0),z(0)):v==="cells"&&(Y.ctrlKey?(_(0),w(0),L(0,0)):(w(0),L(b,0)));break;case"End":if(Y.preventDefault(),v==="headers"){const X=B-1;w(X),z(X)}else if(v==="cells")if(Y.ctrlKey){const X=E-1,J=B-1;_(X),w(J),L(X,J)}else{const X=B-1;w(X),L(b,X)}break;case" ":if(Y.preventDefault(),v==="headers"&&D==="navigate"){const X=t[N];X&&ae(X.key)}else v==="cells"&&D==="navigate"&&q(b);break}},[v,D,N,b,B,E,t,L,z,ae,q]);$.useEffect(()=>{const Y=S.current;if(Y)return Y.addEventListener("keydown",O),()=>Y.removeEventListener("keydown",O)},[O]);const ne=ve("nhsuk-table",p,{"nhsuk-table--responsive":h,"nhsuk-table--bordered":m,"nhsuk-table--striped":y,"nhsuk-table--compact":g==="compact"},f);return s.jsxs("table",{ref:S,className:ne,id:o,"data-testid":l,role:"grid","aria-label":c,"aria-labelledby":u,"aria-describedby":d,tabIndex:0,children:[s.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:s.jsx("tr",{ref:j,role:"row",children:t.map((Y,K)=>{const X=n?.find(ie=>ie.key===Y.key),J=!!X,pe=v==="headers"&&N===K;return s.jsx("th",{className:ve("sortable-header",{"sortable-header--focused":pe}),role:"columnheader",tabIndex:pe?0:-1,onClick:()=>ae(Y.key),onKeyDown:ie=>{(ie.key==="Enter"||ie.key===" ")&&(ie.preventDefault(),ae(Y.key))},"aria-sort":J?X?.direction==="asc"?"ascending":"descending":"none",children:s.jsxs("div",{className:"header-content",children:[s.jsx("span",{className:"header-label",children:Y.label}),J&&s.jsxs("span",{className:"sort-indicator","aria-hidden":"true",children:[n&&n.length>1&&s.jsx("span",{className:"sort-priority",children:n.findIndex(ie=>ie.key===Y.key)+1}),s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",className:"sort-arrow",children:X?.direction==="asc"?s.jsx("path",{d:"M6 2L2 8h8L6 2z"}):s.jsx("path",{d:"M6 10L2 4h8L6 10z"})})]})]})},Y.key)})})}),s.jsx("tbody",{ref:M,className:"nhsuk-table__body",role:"rowgroup",children:A.map((Y,K)=>{const X=i===K,J=v==="cells"&&b===K;return s.jsx("tr",{role:"row",className:ve("data-row",{"data-row--selected":X,"data-row--focused":J}),"aria-selected":X,children:t.map((pe,ie)=>{const se=pe.tableRenderer?pe.tableRenderer(Y):pe.render?pe.render(Y):Y[pe.key],te=v==="cells"&&b===K&&N===ie,re=()=>typeof se=="boolean"?s.jsxs(s.Fragment,{children:[s.jsx("span",{"aria-hidden":"true",children:se?"âœ“":"âœ—"}),s.jsx("span",{className:"sr-only",children:se?"Yes":"No"})]}):String(se??"");return s.jsx("td",{role:"gridcell",className:ve("data-cell",{"data-cell--focused":te}),tabIndex:te?0:-1,onClick:()=>q(K),children:re()},pe.key)})},K)})})]})});cd.displayName="AriaDataGrid";const ud=({sortConfig:e,columns:t,onSortChange:n,className:r="",emptyDescription:i="No sorting applied",activeDescription:a,showReset:o=!0,showHelp:l=!0,disabled:c=!1,ariaLabel:u="Sort configuration",ariaDescribedBy:d})=>{const f=$.useRef(null),p=$.useRef(null),m=$.useRef(null),y=$.useCallback((v,C)=>{c||(p.current=C,v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/plain",C))},[c]),h=$.useCallback((v,C)=>{c||p.current===C||(v.preventDefault(),v.dataTransfer.dropEffect="move",m.current=C)},[c]),g=$.useCallback((v,C)=>{if(c)return;v.preventDefault();const D=p.current;if(!D||D===C)return;const I=e.findIndex(E=>E.key===D),B=e.findIndex(E=>E.key===C);if(I!==-1&&B!==-1){const E=[...e],[A]=E.splice(I,1);E.splice(B,0,A),n(E)}p.current=null,m.current=null},[c,e,n]),k=$.useCallback(()=>{p.current=null,m.current=null},[]),S=$.useCallback(v=>{const C=t.find(D=>D.key===v);return C?C.label:v},[t]),j=$.useCallback(v=>["red","orange","blue","aqua-green","grey"][v]||"grey",[]),M=$.useCallback(v=>{if(c)return;const C=e.map(D=>D.key===v?{...D,direction:D.direction==="asc"?"desc":"asc"}:D);n(C)},[e,n,c]),b=$.useCallback(v=>{if(c)return;const C=e.filter(D=>D.key!==v);n(C)},[e,n,c]),_=$.useCallback(()=>{c||n([])},[n,c]),N=()=>{if(e.length===0)return i;if(a)return a;const v=e.map((C,D)=>{const I=C.direction==="asc"?"ascending":"descending";return`${D+1}. ${S(C.key)} (${I})`});if(v.length===1)return`Sorted by: ${v[0]}`;if(v.length===2)return`Sorted by: ${v.join(" and ")}`;{const C=v.pop();return`Sorted by: ${v.join(", ")}, and ${C}`}},w=$.useMemo(()=>{const v=["sort-description"];return l&&v.push("sort-help"),d&&v.push(d),v.join(" ")},[l,d]);return e.length===0?s.jsxs("div",{className:`sort-status-control ${r}`,children:[s.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:i}),l&&s.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:s.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]}):s.jsxs("div",{className:`sort-status-control ${r}`,children:[s.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:N()}),s.jsxs("div",{className:"sort-status-container",children:[s.jsx("div",{ref:f,className:"sort-status-control__tags",role:"list","aria-label":u,"aria-describedby":w,children:e.map((v,C)=>s.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",draggable:!c,onDragStart:D=>y(D,v.key),onDragOver:D=>h(D,v.key),onDrop:D=>g(D,v.key),onDragEnd:k,onClick:()=>M(v.key),style:{cursor:c?"default":"pointer"},title:c?"":`Click to toggle sort direction. Currently ${v.direction==="asc"?"ascending":"descending"}`,"data-key":v.key,children:s.jsx(Ge,{color:j(C),className:"sort-status-control__tag",closable:!0,onClose:()=>b(v.key),disabled:c,children:s.jsxs("div",{className:"sort-status-control__tag-content",children:[s.jsx("div",{className:"sort-status-control__drag-handle",title:"Drag to reorder",children:"â‹®â‹®"}),s.jsx("div",{className:`sort-status-control__priority-badge sort-priority sort-priority--priority-${C+1}`,children:C+1}),s.jsx("span",{className:"sort-status-control__tag-label",children:S(v.key)}),s.jsx("button",{type:"button",className:"sort-status-control__direction-button",onClick:D=>{D.stopPropagation(),M(v.key)},disabled:c,"aria-label":`Toggle sort direction for ${S(v.key)}. Currently ${v.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:s.jsx("span",{className:`sort-status-control__direction-icon sort-status-control__direction-icon--${v.direction}`,children:s.jsx("svg",{className:`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${v.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})})})]})})},v.key))}),o&&s.jsx("div",{className:"sort-status-control__actions",children:s.jsx(pt,{variant:"secondary",onClick:_,disabled:c,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})})]}),l&&s.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:s.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]})};function Pv(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const i=[...e.selectedRows];return i[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:i};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:a}=t.payload,o=new Array(a).fill(!1),l=new Array(a).fill(null),c=new Array(a).fill([]);for(let u=0;u<Math.min(e.tabLoadingStates.length,a);u++)o[u]=e.tabLoadingStates[u],l[u]=e.tabErrors[u],c[u]=e.selectedRows[u];return{...e,tabLoadingStates:o,tabErrors:l,selectedRows:c};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}const Da=$.forwardRef(function(t,n){const{dataConfig:r={},tabPanels:i,selectedIndex:a,onTabChange:o,onGlobalRowSelectionChange:l,ariaLabel:c,ariaDescription:u,className:d="",disabled:f=!1,orientation:p="horizontal",id:m,isLoading:y=!1,loadingComponent:h,error:g=null,errorComponent:k,"data-testid":S,actions:j,actionsMinGap:M=16,forceActionsAbove:b=!1}=t,N=$.useRef(m||`aria-tabs-datagrid-${Math.random().toString(36).slice(2,9)}`).current,w=typeof u=="string"&&u.trim()!==""&&!/\s/.test(u),v=`${N}-description`,C=`${N}-navigation-help`,{dataComparator:D=(P,H)=>JSON.stringify(P)===JSON.stringify(H),filterFunction:I=P=>P,booleanRenderer:B=P=>P?"âœ“":"âœ—"}=r||{},E=a!==void 0,A=a??0,[L,z]=$.useState({focusArea:"tabs",focusedTabIndex:A,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}),ae=$.useMemo(()=>({selectedIndex:A,tabLoadingStates:new Array(i.length).fill(!1),tabErrors:new Array(i.length).fill(null),sortConfig:[],selectedRows:new Array(i.length).fill([]),globalSelectedRowData:null,filters:void 0}),[A]),[q,O]=$.useReducer(Pv,ae);$.useEffect(()=>{const P=q.tabLoadingStates.length,H=i.length;P!==H&&O({type:"ADJUST_ARRAYS",payload:{newLength:H}})},[i.length]),$.useEffect(()=>{E&&O({type:"SET_SELECTED_INDEX",payload:A})},[A,E]),$.useEffect(()=>{z(P=>({...P,focusArea:"tabs",focusedTabIndex:q.selectedIndex,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}))},[q.selectedIndex]),$.useEffect(()=>{l&&l(q.globalSelectedRowData)},[q.globalSelectedRowData,l]);const ne=$.useCallback((P,H)=>D(P,H),[D]),Y=$.useCallback(P=>{P>=0&&P<i.length&&!i[P].disabled&&(O({type:"SET_SELECTED_INDEX",payload:P}),z(H=>({...H,focusedTabIndex:P,focusArea:"tabs"})),o?.(P))},[i,o]),K=$.useRef(!1),X=$.useCallback((P,H)=>{if(!H?.force&&!K.current&&P===0){K.current=!0;return}K.current=!0,setTimeout(()=>{const U=J.current[P],Z=U?.parentElement;if(U&&Z){const Q=U.offsetLeft,ee=U.offsetWidth,fe=Z.clientWidth,ue=Q-fe/2+ee/2;try{Z.scrollTo({left:Math.max(0,ue),behavior:"smooth"})}catch{U.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}}else process.env.SILENCE_SCROLL_DEBUG||console.debug("[AriaTabsDataGrid] Missing elements for scroll",{tabElementExists:!!U,tabListElementExists:!!Z})},50)},[]),J=$.useRef([]),pe=$.useRef([]),ie=$.useCallback((P,H)=>{const U=q.sortConfig||[],Z=U.find(fe=>fe.key===H);let Q;Z?Z.direction==="asc"?Q=U.map(fe=>fe.key===H?{...fe,direction:"desc"}:fe):Q=U.filter(fe=>fe.key!==H):Q=[...U,{key:H,direction:"asc"}],O({type:"SET_SORT",payload:Q}),i[P].onSort?.(H)},[q.sortConfig,i]),se=$.useCallback(P=>{setTimeout(()=>{const H=document.querySelector(`[data-tab-panel="${q.selectedIndex}"] th:nth-child(${P+1})`);H&&H.focus()},0)},[q.selectedIndex]),te=$.useCallback(P=>B(P),[B]),re=$.useCallback((P,H)=>{setTimeout(()=>{const U=document.querySelector(`[data-tab-panel="${q.selectedIndex}"] tbody tr:nth-child(${P+1}) td:nth-child(${H+1})`);U&&U.focus()},0)},[q.selectedIndex]);$.useEffect(()=>{L.isGridActive&&(L.focusArea==="headers"?setTimeout(()=>{se(L.focusedHeaderIndex)},0):L.focusArea==="cells"&&setTimeout(()=>{re(L.focusedRowIndex,L.focusedColumnIndex)},0))},[L.focusArea,L.isGridActive,L.focusedHeaderIndex,L.focusedRowIndex,L.focusedColumnIndex,se,re]),$.useEffect(()=>{X(q.selectedIndex)},[q.selectedIndex,X]);const de=$.useCallback((P,H)=>{const{key:U}=P,Z=i[q.selectedIndex],Q=Z?.columns.length||0;switch(U){case"ArrowLeft":P.preventDefault();const ee=Math.max(0,H-1);z(xe=>({...xe,focusedHeaderIndex:ee})),se(ee);break;case"ArrowRight":P.preventDefault();const fe=Math.min(Q-1,H+1);z(xe=>({...xe,focusedHeaderIndex:fe})),se(fe);break;case"ArrowUp":P.preventDefault(),z(xe=>({...xe,focusArea:"tabs",focusedTabIndex:q.selectedIndex})),X(q.selectedIndex),J.current[q.selectedIndex]?.focus();break;case"ArrowDown":P.preventDefault(),z(xe=>({...xe,focusArea:"cells",focusedRowIndex:0,focusedColumnIndex:H,isGridActive:!0}));break;case"Home":P.preventDefault(),z(xe=>({...xe,focusedHeaderIndex:0})),se(0);break;case"End":P.preventDefault();const ue=Q-1;z(xe=>({...xe,focusedHeaderIndex:ue})),se(ue);break;case"Enter":case" ":P.preventDefault();const he=Z?.columns[H]?.key;he&&ie(q.selectedIndex,he);break}},[i,q.selectedIndex,ie,z,se,re,J]),V=$.useCallback((P,H,U)=>{const{key:Z}=P,Q=i[q.selectedIndex],ee=Q?.data.length||0,fe=Q?.columns.length||0;switch(Z){case"ArrowUp":if(P.preventDefault(),H===0)z(be=>({...be,focusArea:"headers",focusedHeaderIndex:U,isGridActive:!1})),se(U);else{const be=H-1;z(Pe=>({...Pe,focusedRowIndex:be})),re(be,U)}break;case"ArrowDown":P.preventDefault();const ue=Math.min(ee-1,H+1);z(be=>({...be,focusedRowIndex:ue})),re(ue,U);break;case"ArrowLeft":P.preventDefault();const he=Math.max(0,U-1);z(be=>({...be,focusedColumnIndex:he})),re(H,he);break;case"ArrowRight":P.preventDefault();const xe=Math.min(fe-1,U+1);z(be=>({...be,focusedColumnIndex:xe})),re(H,xe);break;case"Home":P.preventDefault(),P.ctrlKey?(z(be=>({...be,focusedRowIndex:0,focusedColumnIndex:0})),re(0,0)):(z(be=>({...be,focusedColumnIndex:0})),re(H,0));break;case"End":if(P.preventDefault(),P.ctrlKey){const be=ee-1,Pe=fe-1;z(Te=>({...Te,focusedRowIndex:be,focusedColumnIndex:Pe})),re(be,Pe)}else{const be=fe-1;z(Pe=>({...Pe,focusedColumnIndex:be})),re(H,be)}break;case"Enter":case" ":if(P.preventDefault(),Q&&Q.data[H]){const be=Q.data.some(Ue=>"ews_data"in Ue)?I(Q.data,q.filters):Q.data,Pe=q.sortConfig;let Te=be;if(Pe&&Pe.length>0&&(Te=[...be].sort((Ue,Ke)=>{for(const{key:ht,direction:Je}of Pe){let Ve=Ue[ht],We=Ke[ht];const At=Q.columns.find(Gn=>Gn.key===ht);if(At?.tableRenderer?(Ve=At.tableRenderer(Ue),We=At.tableRenderer(Ke)):At?.render&&(Ve=At.render(Ue),We=At.render(Ke)),Ve==null&&We==null)continue;if(Ve==null)return Je==="asc"?-1:1;if(We==null)return Je==="asc"?1:-1;let Rt=0;if(typeof Ve=="number"&&typeof We=="number"?Rt=Ve-We:Rt=String(Ve).localeCompare(String(We),void 0,{numeric:!0,sensitivity:"base"}),Rt!==0)return Je==="asc"?Rt:-Rt}return 0})),Te[H]){const Ue=Te[H],ht=q.globalSelectedRowData&&ne(q.globalSelectedRowData,Ue)?null:Ue;O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:ht})}}break}},[i,q.selectedIndex,q.filters,q.sortConfig,I,ne,O,z,se,re]),ce=$.useCallback((P,H)=>I(P,H),[I]);if($.useImperativeHandle(n,()=>({selectTab:P=>{P>=0&&P<i.length&&(O({type:"SET_SELECTED_INDEX",payload:P}),o?.(P))},refreshData:P=>{console.log("Refreshing data for tab:",P??"all")},exportData:P=>{const H=P??q.selectedIndex,U=i[H];return U?U.data:[]},getSelectedRows:P=>q.globalSelectedRowData?[]:[],clearSelection:P=>{O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:null})},applyFilters:P=>{O({type:"SET_FILTERS",payload:P})}}),[q.selectedIndex,q.selectedRows,i,o]),y)return s.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--loading ${d}`,"data-testid":S,children:h||s.jsx("div",{className:"aria-tabs-datagrid__loading",children:s.jsx("div",{className:"nhsuk-spinner",role:"status","aria-label":"Loading data",children:s.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Loading..."})})})});if(g)return s.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--error ${d}`,"data-testid":S,children:k||s.jsxs("div",{className:"aria-tabs-datagrid__error",role:"alert",children:[s.jsx("h3",{className:"nhsuk-error-summary__title",children:"Error loading data"}),s.jsx("p",{children:g})]})});const oe=$.useRef(null),ge=$.useRef(null),le=$.useRef(null),[me,Ie]=$.useState(!0);$.useEffect(()=>{if(!j){Ie(!1);return}if(b){Ie(!1);return}function P(){if(!oe.current||!ge.current||!le.current)return;const Z=oe.current.clientWidth,Q=Array.from(ge.current.querySelectorAll(":scope > .aria-tabs-datagrid__tab")),ee=Q.reduce((xe,be)=>xe+be.offsetWidth,0),fe=le.current.offsetWidth,ue=Math.max(8*(Q.length-1),0),he=ee+ue+fe+M<=Z;Ie(he)}const H=requestAnimationFrame(()=>P()),U=new ResizeObserver(()=>P());return oe.current&&U.observe(oe.current),ge.current&&U.observe(ge.current),()=>{cancelAnimationFrame(H),U.disconnect()}},[j,M,b,i.length]);const Fe=le,ke=$.useCallback(()=>Fe.current?Array.from(Fe.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(P=>!P.hasAttribute("disabled")):[],[]),R=$.useCallback(P=>{const H=ke();if(!H.length)return;const U=Math.max(0,Math.min(P,H.length-1));H[U].focus(),z(Z=>({...Z,focusArea:"actions",focusedActionIndex:U}))},[ke]),T=$.useCallback(()=>R(0),[R]),F=$.useCallback((P,H)=>{const{key:U}=P,Z=i.length-1;switch(U){case"ArrowUp":{j&&!me&&(P.preventDefault(),T());break}case"ArrowLeft":{P.preventDefault();const Q=H>0?H-1:Z;Y(Q),X(Q),J.current[Q]?.focus();break}case"ArrowRight":{if(P.preventDefault(),H===Z&&j&&me){T();return}const Q=H<Z?H+1:0;Y(Q),X(Q),J.current[Q]?.focus();break}case"ArrowDown":{P.preventDefault(),z(Q=>({...Q,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));break}case"Home":{P.preventDefault(),Y(0),X(0),J.current[0]?.focus();break}case"End":{P.preventDefault(),Y(Z),X(Z),J.current[Z]?.focus();break}case"Enter":case" ":{P.preventDefault(),Y(H);break}case"Tab":{!P.shiftKey&&H===Z&&j&&me&&T();break}}},[i.length,Y,X,j,me,T]),G=$.useCallback(P=>{const{key:H}=P,U=ke();if(!U.length)return;const Z=U.findIndex(Q=>Q===document.activeElement);switch(H){case"ArrowLeft":{if(me)if(Z>0)P.preventDefault(),R(Z-1);else{P.preventDefault();const Q=i.length-1;Y(Q),X(Q),J.current[Q]?.focus(),z(ee=>({...ee,focusArea:"tabs",focusedTabIndex:Q}))}break}case"ArrowRight":{me&&(Z<U.length-1?(P.preventDefault(),R(Z+1)):(P.preventDefault(),Y(0),X(0),J.current[0]?.focus(),z(Q=>({...Q,focusArea:"tabs",focusedTabIndex:0}))));break}case"ArrowDown":{if(me)P.preventDefault(),z(Q=>({...Q,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));else{P.preventDefault();const Q=q.selectedIndex;J.current[Q]?.focus(),z(ee=>({...ee,focusArea:"tabs",focusedTabIndex:Q}))}break}}},[ke,me,R,i.length,Y,X,q.selectedIndex]);return s.jsxs("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--${p} ${d}`,id:m,"data-testid":S,ref:oe,children:[u&&!w&&s.jsx("div",{id:v,className:"nhsuk-u-visually-hidden",children:u}),s.jsx("div",{className:"aria-tabs-datagrid__navigation-help sr-only",id:C,children:"Keyboard navigation: Use Tab to move between tabs and grid. Arrow keys navigate within tabs and grid cells. Enter activates tabs and sorts columns. Arrow Down from tabs moves to table headers. Arrow Down from headers moves to table cells. Use Arrow keys to navigate between cells."}),s.jsx(ud,{sortConfig:q.sortConfig||[],columns:i.flatMap(P=>P.columns.map(H=>({key:H.key,label:H.label}))).filter((P,H,U)=>U.findIndex(Z=>Z.key===P.key)===H),onSortChange:P=>{O({type:"SET_SORT",payload:P})},ariaLabel:"Data grid sort configuration"}),j&&!me&&s.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above",ref:le,role:"toolbar","aria-label":"Additional actions",onKeyDown:G,children:j}),s.jsxs("div",{className:`aria-tabs-datagrid__tabs-wrapper ${me?"aria-tabs-datagrid__tabs-wrapper--inline-actions":""}`,children:[s.jsx("div",{role:"tablist","aria-label":c,"aria-describedby":u?w?u:v:C,"aria-orientation":p,className:"aria-tabs-datagrid__tabs",ref:ge,children:i.map((P,H)=>{const U=H===q.selectedIndex,Z=P.disabled||f;return s.jsxs("button",{role:"tab",id:`tab-${P.id}`,"aria-controls":`panel-${P.id}`,"aria-selected":U,"aria-disabled":Z,tabIndex:U?0:-1,ref:Q=>{J.current[H]=Q},onClick:()=>Y(H),onKeyDown:Q=>F(Q,H),disabled:Z,className:["aria-tabs-datagrid__tab",U?"aria-tabs-datagrid__tab--selected":"",Z?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[s.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:P.label}),q.tabLoadingStates[H]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),q.tabErrors[H]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},P.id)})}),j&&me&&s.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline",ref:le,role:"toolbar","aria-label":"Additional actions",onKeyDown:G,children:j})]}),i.map((P,H)=>{const U=H===q.selectedIndex;return s.jsx("div",{role:"tabpanel",id:`panel-${P.id}`,"aria-labelledby":`tab-${P.id}`,tabIndex:0,hidden:!U,ref:Z=>{pe.current[H]=Z},className:`aria-tabs-datagrid__panel ${P.className||""}`,"data-tab-panel":H,children:U&&(()=>{const Z=P.data.some(ee=>"ews_data"in ee)?ce(P.data,q.filters):P.data,Q=$.useMemo(()=>{const ee=q.sortConfig;return!ee||ee.length===0?Z:[...Z].sort((fe,ue)=>{for(const{key:he,direction:xe}of ee){let be=fe[he],Pe=ue[he];const Te=P.columns.find(Ke=>Ke.key===he);if(Te?.tableRenderer?(be=Te.tableRenderer(fe),Pe=Te.tableRenderer(ue)):Te?.render&&(be=Te.render(fe),Pe=Te.render(ue)),be==null&&Pe==null)continue;if(be==null)return 1;if(Pe==null)return-1;let Ue=0;if(typeof be=="number"&&typeof Pe=="number"?Ue=be-Pe:typeof be=="boolean"&&typeof Pe=="boolean"?Ue=be===Pe?0:be?1:-1:Ue=String(be).localeCompare(String(Pe),void 0,{numeric:!0,sensitivity:"base"}),Ue!==0)return xe==="asc"?Ue:-Ue}return 0})},[Z,q.sortConfig,P.columns]);return s.jsxs("table",{className:"nhsuk-table aria-tabs-datagrid__grid",role:"grid","aria-label":P.ariaLabel,"aria-describedby":P.ariaDescription?`panel-${P.id}-description`:void 0,children:[P.ariaDescription&&s.jsx("caption",{className:"nhsuk-u-visually-hidden",id:`panel-${P.id}-description`,children:P.ariaDescription}),s.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:s.jsx("tr",{role:"row",children:P.columns.map((ee,fe)=>{const ue=q.sortConfig?.find(be=>be.key===ee.key),he=!!ue,xe=L.focusArea==="headers"&&L.focusedHeaderIndex===fe;return s.jsx("th",{className:`sortable-header ${xe?"sortable-header--focused":""} ${he?"sortable-header--sorted":""}`,role:"columnheader",tabIndex:xe?0:-1,onClick:()=>ie(H,ee.key),onKeyDown:be=>de(be,fe),"aria-sort":he?ue?.direction==="asc"?"ascending":"descending":"none",children:s.jsxs("div",{className:"header-content",children:[s.jsx("span",{className:"header-label",children:ee.label}),s.jsxs("div",{className:`sort-indicator-container ${he?`sort-indicator--${ue?.direction}`:""}`,children:[q.sortConfig&&q.sortConfig.length>0&&q.sortConfig.findIndex(be=>be.key===ee.key)!==-1&&s.jsx("span",{className:`sort-priority sort-priority--priority-${q.sortConfig.findIndex(be=>be.key===ee.key)+1}`,"data-priority":q.sortConfig.findIndex(be=>be.key===ee.key)+1,title:`Sort priority: ${q.sortConfig.findIndex(be=>be.key===ee.key)+1}`,children:q.sortConfig.findIndex(be=>be.key===ee.key)+1}),he&&s.jsx("svg",{className:`nhsuk-icon sort-arrow sort-arrow--${ue?.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})]})]})},ee.key)})})}),s.jsx("tbody",{className:"nhsuk-table__body",role:"rowgroup",children:Q.map((ee,fe)=>{const ue=q.globalSelectedRowData&&ne(q.globalSelectedRowData,ee),he=L.focusArea==="cells"&&L.focusedRowIndex===fe;return s.jsx("tr",{role:"row",className:`data-row ${ue?"data-row--selected":""} ${he?"data-row--focused":""}`,"aria-selected":ue,children:P.columns.map((xe,be)=>{const Pe=ee[xe.key];let Te;xe.tableRenderer?Te=xe.tableRenderer(ee):xe.render?Te=xe.render(ee):Te=Pe;const Ue=L.focusArea==="cells"&&L.focusedRowIndex===fe&&L.focusedColumnIndex===be,Ke=()=>{if(xe.customRenderer){const ht=xe.customRenderer(Pe,ee);return s.jsx("span",{className:"data-cell__custom","data-custom-rendered":"true",children:ht})}return typeof Pe=="boolean"&&Te===Pe?s.jsxs(s.Fragment,{children:[te(Pe),s.jsx("span",{className:"nhsuk-u-visually-hidden",children:Pe?"Yes":"No"})]}):$.isValidElement(Te)||typeof Te!="object"?Te??"":Te};return s.jsx("td",{role:"gridcell",className:`data-cell ${Ue?"data-cell--focused":""}`,tabIndex:Ue?0:-1,onClick:()=>{const Je=q.globalSelectedRowData&&ne(q.globalSelectedRowData,ee)?null:ee;O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:Je})},onKeyDown:ht=>V(ht,fe,be),children:Ke()},xe.key)})},fe)})})]})})()},P.id)})]})}),Ia={asc:"â†‘",desc:"â†“"},Av=e=>[...e].sort((t,n)=>t.priority-n.priority);function go(e){return e.map((t,n)=>({...t,priority:n}))}function Ev(e){return e.length>0?Math.max(...e.map(t=>t.priority)):-1}function Fv(e,t){const n=t.find(r=>r.id===e);return n?n.priority>0:!1}function $v(e,t){const n=t.find(i=>i.id===e),r=Ev(t);return n?n.priority<r:!1}const Bv=({sortConfig:e,onSortChange:t,className:n="",emptyDescription:r="No sorting applied",activeDescription:i,showReset:a=!0,showHelp:o=!0,disabled:l=!1,ariaLabel:c="Sort configuration",ariaDescribedBy:u})=>{const d=$.useMemo(()=>Av(e),[e]),f=$.useCallback(S=>{if(l)return;const j=e.map(M=>M.id===S?{...M,direction:M.direction==="asc"?"desc":"asc"}:M);t(j)},[e,t,l]),p=$.useCallback(S=>{if(l)return;const j=e.findIndex(b=>b.id===S);if(j<=0)return;const M=[...e];[M[j],M[j-1]]=[M[j-1],M[j]],t(go(M))},[e,t,l]),m=$.useCallback(S=>{if(l)return;const j=e.findIndex(b=>b.id===S);if(j>=e.length-1||j===-1)return;const M=[...e];[M[j],M[j+1]]=[M[j+1],M[j]],t(go(M))},[e,t,l]),y=$.useCallback(S=>{if(l)return;const j=e.filter(M=>M.id!==S);t(go(j))},[e,t,l]),h=$.useCallback(()=>{l||t([])},[t,l]),g=()=>{if(e.length===0)return r;if(i)return i;const S=d.map((j,M)=>{const b=j.direction==="asc"?"ascending":"descending";return`${M+1}. ${j.label} (${b})`});if(S.length===1)return`Sorted by: ${S[0]}`;if(S.length===2)return`Sorted by: ${S.join(" and ")}`;{const j=S.pop();return`Sorted by: ${S.join(", ")}, and ${j}`}},k=$.useMemo(()=>{const S=["sort-description"];return o&&S.push("sort-help"),u&&S.push(u),S.join(" ")},[o,u]);return e.length===0?s.jsx("div",{className:`sort-status-control sort-status-control--empty ${n}`,children:s.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:g()})}):s.jsxs("div",{className:`sort-status-control ${n}`,children:[s.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:g()}),s.jsxs("div",{className:"sort-status-control__tags",role:"list","aria-label":c,"aria-describedby":k,children:[s.jsx("div",{className:"sort-status-control__tags-label",children:"Current sorting:"}),d.map(S=>s.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",children:s.jsx(Ge,{text:"",color:"blue",className:"sort-status-control__tag",closable:!0,onClose:()=>y(S.id),disabled:l,children:s.jsxs("div",{className:"sort-status-control__tag-content",children:[s.jsx("span",{className:"sort-status-control__tag-priority",children:S.priority+1}),s.jsx("span",{className:"sort-status-control__tag-label",children:S.label}),s.jsx("button",{type:"button",className:"sort-status-control__tag-direction",onClick:()=>f(S.id),disabled:l,"aria-label":`Toggle sort direction for ${S.label}. Currently ${S.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:S.direction==="asc"?Ia.asc:Ia.desc}),s.jsxs("div",{className:"sort-status-control__tag-actions",children:[s.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>p(S.id),disabled:l||!Fv(S.id,e),"aria-label":`Move ${S.label} sort up in priority`,title:"Move up in priority",children:"â–²"}),s.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>m(S.id),disabled:l||!$v(S.id,e),"aria-label":`Move ${S.label} sort down in priority`,title:"Move down in priority",children:"â–¼"})]})]})})},S.id))]}),a&&s.jsx("div",{className:"sort-status-control__actions",children:s.jsx(pt,{variant:"secondary",onClick:h,disabled:l,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})}),o&&s.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:s.jsxs("small",{children:["Click ",Ia.asc,"/",Ia.desc," to toggle ascending/descending. Use â–²/â–¼ to change sort priority. Click Ã— to remove a sort."]})})]})},La=(e,t)=>t.map(n=>({id:n.id,label:n.label,data:n.filter?n.filter(e):e,columns:n.columns.map(r=>({key:r.key,label:r.label,render:r.render,customRenderer:r.customRenderer})),sortConfig:n.sortConfig,ariaLabel:n.ariaLabel||`${n.label} Data Grid`,ariaDescription:n.ariaDescription||`Data grid showing ${n.label.toLowerCase()}`,className:n.className,disabled:n.disabled})),yo=[{value:!0,icon:s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"100%",height:"34",children:s.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})})},{value:!1,icon:s.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"100%",height:"34",children:[s.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),s.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]})}],Hv=(e,t)=>!e||!t?e===t:e.name&&e.bed_name&&t.name&&t.bed_name?e.name===t.name&&e.bed_name===t.bed_name:JSON.stringify(e)===JSON.stringify(t),zv=(e,t)=>t?e.filter(n=>{if(t.ewsScoreRange){const[r,i]=t.ewsScoreRange;if(n.ews_score<r||n.ews_score>i)return!1}return!(t.wards&&t.wards.length>0&&!t.wards.includes(n.ward_name)||t.specialties&&t.specialties.length>0&&!t.specialties.includes(n.speciality)||t.dischargeStatuses&&t.dischargeStatuses.length>0&&!t.dischargeStatuses.includes(n.early_discharge_notification)||t.avpuLevels&&t.avpuLevels.length>0&&!t.avpuLevels.includes(n.ews_data.avpu)||t.medicallyOptimised!==null&&t.medicallyOptimised!==void 0&&n.medically_optimised!==t.medicallyOptimised||t.fastTrack!==null&&t.fastTrack!==void 0&&n.fast_track!==t.fastTrack)}):e,Ov=e=>{if(typeof e=="boolean"){const n=yo.find(r=>r.value===e);return n?n.icon:null}const t=yo.find(n=>n.value===e);return t?t.icon:String(e)},Rv=e=>`${e.name}-${e.bed_name}`,Uv=()=>({overview:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"bed_name",label:"Bed"},{key:"ews_score",label:"EWS Score"},{key:"speciality",label:"Specialty"},{key:"consultant",label:"Consultant"}],vitals:[{key:"name",label:"Patient Name"},{key:"ews_score",label:"EWS Score"},{key:"respiratory_rate_bpm",label:"Respiratory Rate",render:e=>e.ews_data.respiratory_rate_bpm},{key:"sp02",label:"SpO2 %",render:e=>e.ews_data.sp02},{key:"temperature",label:"Temperature Â°C",render:e=>e.ews_data.temperature},{key:"systolic_bp",label:"Systolic BP",render:e=>e.ews_data.systolic_bp},{key:"heart_rate",label:"Heart Rate",render:e=>e.ews_data.heart_rate},{key:"avpu",label:"AVPU",render:e=>e.ews_data.avpu.toUpperCase()}],discharge:[{key:"name",label:"Patient Name"},{key:"anticipated_discharge_date",label:"Anticipated Discharge",render:e=>new Date(e.anticipated_discharge_date).toLocaleDateString()},{key:"early_discharge_notification",label:"Discharge Status"},{key:"medically_optimised",label:"Medically Optimised"},{key:"criteria_to_reside",label:"Criteria to Reside"},{key:"fast_track",label:"Fast Track"},{key:"transport_status",label:"Transport Status"},{key:"pathway",label:"Pathway"}],logistics:[{key:"name",label:"Patient Name"},{key:"ward_name",label:"Ward"},{key:"room_name",label:"Room"},{key:"bed_name",label:"Bed"},{key:"bed_type",label:"Bed Type"},{key:"transport_booking",label:"Transport Booked"},{key:"transport_mobility",label:"Transport Type"},{key:"district_nurse_referral",label:"District Nurse"},{key:"equipment",label:"Equipment"}]}),Wv=e=>{const t=Uv();return[{id:"overview",label:"Patient Overview",data:e,columns:t.overview,ariaLabel:"Patient Overview Data Grid",ariaDescription:"Overview of all patients with basic information"},{id:"vitals",label:"Vital Signs & EWS",data:e,columns:t.vitals,sortConfig:[{key:"ews_score",direction:"desc"},{key:"name",direction:"asc"},{key:"ward_name",direction:"asc"}],ariaLabel:"Patient Vital Signs Data Grid",ariaDescription:"Patient vital signs and Early Warning Scores"},{id:"discharge",label:"Discharge Planning",data:e.filter(n=>n.anticipated_discharge_date),columns:t.discharge,sortConfig:[{key:"anticipated_discharge_date",direction:"asc"},{key:"discharge_status",direction:"desc"}],ariaLabel:"Discharge Planning Data Grid",ariaDescription:"Patient discharge planning and status information"},{id:"logistics",label:"Bed Management",data:e,columns:t.logistics,sortConfig:[{key:"ward_name",direction:"asc"}],ariaLabel:"Bed Management Data Grid",ariaDescription:"Patient location and logistics information"}]},dd={dataComparator:Hv,filterFunction:zv,booleanRenderer:Ov,getDataId:Rv};function fd(e,t,n){const{primaryField:r,secondaryFields:i=[],badges:a=[],hiddenFields:o=[],getPriority:l,getVariant:c,fieldRenderers:u={},classPrefix:d="adaptive-card"}=n,f=t.find(j=>j.key===r),p=f?.cardRenderer?f.cardRenderer(e):f?.render?f.render(e):e[r||"name"]||"Untitled",m=()=>i.filter(M=>!o.includes(M)&&e[M]).slice(0,3).map(M=>{const b=t.find(v=>v.key===M),_=e[M],N=u[M]?u[M](_,e):b?.cardRenderer?b.cardRenderer(e):b?.render?b.render(e):_;return`${b?.label||M}: ${N}`}).join(" â€¢ "),y=()=>a.length===0?null:a.filter(j=>e[j.fieldKey]!==void 0).map(j=>{const M=e[j.fieldKey],b=j.render?j.render(M,e):M;return`<span class="nhsuk-tag ${Gv(j,M)}">${b}</span>`}).join(""),h=()=>c?c(e):l?.(e)==="high"?"primary":"default",g=y(),k=m(),S=g?`${k}${g?`<div class="adaptive-card__badges">${g}</div>`:""}`:k;return{variant:h(),heading:String(p),descriptionHtml:S,className:`adaptive-card ${d}`,"aria-label":`Record for ${p}`}}function Gv(e,t){const n=e.className||"adaptive-card__badge";if(e.fieldKey==="ews_score"||e.fieldKey.includes("score")){const r=Number(t);return r>=7?`${n} nhsuk-tag--red`:r>=3?`${n} nhsuk-tag--yellow`:`${n} nhsuk-tag--green`}if(e.fieldKey==="priority"){const r=String(t).toLowerCase();if(r==="high")return`${n} nhsuk-tag--red`;if(r==="medium")return`${n} nhsuk-tag--yellow`;if(r==="low")return`${n} nhsuk-tag--green`}if(e.fieldKey==="status"){const r=String(t).toLowerCase();if(r==="urgent"||r==="critical")return`${n} nhsuk-tag--red`;if(r==="pending"||r==="warning")return`${n} nhsuk-tag--yellow`;if(r==="completed"||r==="success")return`${n} nhsuk-tag--green`}switch(e.color){case"primary":return`${n} nhsuk-tag--blue`;case"secondary":return`${n} nhsuk-tag--grey`;case"success":return`${n} nhsuk-tag--green`;case"warning":return`${n} nhsuk-tag--yellow`;case"danger":return`${n} nhsuk-tag--red`;default:return n}}const Vv={primaryField:"name",secondaryFields:["id","description","status"],badges:[{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],hiddenFields:[],getPriority:e=>e.priority||"medium",getStatus:e=>e.status||"active",getVariant:e=>e.priority==="high"?"primary":"default",fieldRenderers:{},classPrefix:"adaptive-card--generic"},bo=({data:e,columns:t,onSelect:n,onAction:r,priority:i="medium",status:a="active"})=>{const o=e.name,l=e.age,c=e.ward_name,u=e.bed_name,d=e.ews_score,f=e.speciality,p=e.consultant;return s.jsxs("div",{className:`healthcare-card healthcare-card--patient healthcare-card--${i} healthcare-card--${a}`,onClick:()=>n?.(e),role:"button",tabIndex:0,"aria-label":`Patient record for ${o}, Age ${l}, Ward ${c}, Bed ${u}`,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__identity",children:[s.jsx("h3",{className:"healthcare-card__patient-name",children:o}),s.jsxs("p",{className:"healthcare-card__age-info",children:[s.jsx("span",{className:"healthcare-card__label",children:"Age: "}),s.jsx("span",{className:"healthcare-card__value",children:l})]})]}),s.jsx("div",{className:"healthcare-card__badges",children:d!==void 0&&s.jsxs(Ge,{color:Zv(hd(d)),className:"healthcare-card__alert",children:["EWS: ",d]})})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("dl",{className:"healthcare-card__details",children:[s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Ward"}),s.jsx("dd",{children:c})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Bed"}),s.jsx("dd",{children:u})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Specialty"}),s.jsx("dd",{children:f})]}),s.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--prominent",children:[s.jsx("dt",{children:"Consultant"}),s.jsx("dd",{children:p})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(pt,{variant:"secondary",className:"healthcare-card__action",onClick:m=>{m.stopPropagation(),r?.("view-notes",e)},children:"Notes"}),s.jsx(pt,{variant:"secondary",className:"healthcare-card__action",onClick:m=>{m.stopPropagation(),r?.("view-vitals",e)},children:"Vitals"}),s.jsx(pt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:m=>{m.stopPropagation(),r?.("view-full",e)},children:"View Full Record"})]})]})},vo=({data:e,onAction:t})=>s.jsxs("div",{className:"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__time-info",children:[s.jsx("h3",{className:"healthcare-card__time",children:new Date(e.appointment_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),s.jsx("p",{className:"healthcare-card__type",children:e.appointment_type})]}),s.jsxs("div",{className:"healthcare-card__badges",children:[s.jsx(Ge,{color:qv(e.status||"active"),className:"healthcare-card__status",children:(e.status||"active").charAt(0).toUpperCase()+(e.status||"active").slice(1)}),s.jsxs(Ge,{color:"grey",className:"healthcare-card__duration",children:[e.duration||"30"," min"]})]})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("dl",{className:"healthcare-card__details",children:[s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Patient"}),s.jsx("dd",{children:e.patient_name})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Consultant"}),s.jsx("dd",{children:e.consultant})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Location"}),s.jsx("dd",{children:e.location})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(pt,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),s.jsx(pt,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Reschedule"})]})]}),xo=({data:e,onAction:t})=>s.jsxs("div",{className:"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__medication-info",children:[s.jsx("h3",{className:"healthcare-card__medication-name",children:e.medication}),s.jsxs("p",{className:"healthcare-card__dose",children:[e.dose," â€¢ ",e.frequency]})]}),s.jsxs("div",{className:"healthcare-card__badges",children:[s.jsx(Ge,{color:"blue",className:"healthcare-card__route",children:e.route}),e.next_due&&s.jsxs(Ge,{color:"red",className:"healthcare-card__warning",children:["Due: ",new Date(e.next_due).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("dl",{className:"healthcare-card__details",children:[s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Patient"}),s.jsx("dd",{children:e.patient_name})]}),s.jsxs("div",{className:"healthcare-card__detail",children:[s.jsx("dt",{children:"Prescriber"}),s.jsx("dd",{children:e.prescriber})]}),e.allergies&&s.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--urgent",children:[s.jsx("dt",{children:"Allergies"}),s.jsx("dd",{children:e.allergies})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(pt,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),s.jsx(pt,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Adjust Dose"})]})]}),_o=({data:e,onSelect:t,onAction:n,priority:r="medium"})=>{const i=e.name,a=e.ews_score,o=e.ews_data?.respiratory_rate_bpm,l=e.ews_data?.sp02,c=e.ews_data?.temperature,u=e.ews_data?.systolic_bp,d=e.ews_data?.heart_rate,f=e.ews_data?.avpu;return s.jsxs("div",{className:`healthcare-card healthcare-card--vitals healthcare-card--${r}`,onClick:()=>t?.(e),role:"button",tabIndex:0,"aria-label":`Vital signs for ${i}, EWS Score ${a}`,children:[s.jsxs("div",{className:"healthcare-card__header",children:[s.jsxs("div",{className:"healthcare-card__vitals-summary",children:[s.jsx("h3",{className:"healthcare-card__patient-name",children:i}),a!==void 0&&s.jsxs("p",{className:`healthcare-card__ews-score healthcare-card__ews-score--${Yv(a)}`,children:["EWS: ",a]})]}),s.jsx("div",{className:"healthcare-card__badges",children:f&&s.jsxs(Ge,{color:"blue",className:"healthcare-card__avpu",children:["AVPU: ",f.toUpperCase()]})})]}),s.jsx("div",{className:"healthcare-card__body",children:s.jsxs("div",{className:"healthcare-card__vitals-grid",children:[o!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Respiratory Rate"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[o," bpm"]})]}),l!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"SpO2"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[l,"%"]})]}),c!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Temperature"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[c,"Â°C"]})]}),u!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Systolic BP"}),s.jsx("span",{className:"healthcare-card__vital-value",children:u})]}),d!==void 0&&s.jsxs("div",{className:"healthcare-card__vital",children:[s.jsx("span",{className:"healthcare-card__vital-label",children:"Heart Rate"}),s.jsxs("span",{className:"healthcare-card__vital-value",children:[d," bpm"]})]})]})}),s.jsxs("div",{className:"healthcare-card__actions",children:[s.jsx(pt,{variant:"secondary",className:"healthcare-card__action",onClick:p=>{p.stopPropagation(),n?.("view-trend",e)},children:"Trend"}),s.jsx(pt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:p=>{p.stopPropagation(),n?.("record-new",e)},children:"Record New"})]})]})};function hd(e){const t=typeof e=="string"?parseInt(e,10):e;return t>=7?"critical":t>=5?"high":t>=3?"medium":"low"}function Yv(e){return hd(e)}function Zv(e){switch(e){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"grey";default:return"grey"}}function qv(e){switch(e.toLowerCase()){case"active":return"blue";case"pending":return"orange";case"completed":return"green";case"cancelled":return"grey";default:return"blue"}}const Xv=[{fieldKey:"ews_score",render:e=>`EWS: ${e}`,className:"adaptive-card__ews-badge",color:"default"},{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],md=e=>e.ews_score&&Number(e.ews_score)>=7?"high":e.ews_score&&Number(e.ews_score)>=3?"medium":e.priority==="high"||e.status==="urgent"?"high":e.priority==="low"?"low":"medium",pd={name:"healthcare",defaultCardConfig:{primaryField:"name",secondaryFields:["nhs_number","ward","condition","consultant"],badges:Xv,hiddenFields:[],getPriority:md,getStatus:e=>{if(e.status){const t=e.status.toLowerCase();if(["active","pending","completed","cancelled","urgent"].includes(t))return t}return"active"},getVariant:e=>md(e)==="high"||e.status==="urgent"?"primary":"default",fieldRenderers:{nhs_number:e=>e?`NHS: ${e}`:"",ews_score:e=>{const t=Number(e),n=t>=7?"HIGH":t>=3?"MEDIUM":"LOW";return`EWS: ${e} (${n})`},age:(e,t)=>t.dob?`${new Date().getFullYear()-new Date(t.dob).getFullYear()}y`:e?`${e}y`:""},classPrefix:"adaptive-card--healthcare"},cssImport:"./HealthcareCardTemplates.scss",cardTemplates:{patient:(e,t,n)=>{const r=n.getPriority?.(e)||"medium",i=n.getStatus?.(e)||"active",a=i==="urgent"?"active":i;return s.jsx(bo,{data:e,columns:t,priority:r,status:a,onSelect:o=>console.log("Patient selected:",o),onAction:(o,l)=>console.log("Patient action:",o,l)})},appointment:(e,t,n)=>{const r=n.getStatus?.(e)||"pending",i=r==="urgent"?"pending":r;return s.jsx(vo,{data:e,columns:t,status:i,onSelect:a=>console.log("Appointment selected:",a),onAction:(a,o)=>console.log("Appointment action:",a,o)})},medication:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return s.jsx(xo,{data:e,columns:t,priority:r,onSelect:i=>console.log("Medication selected:",i),onAction:(i,a)=>console.log("Medication action:",i,a)})},vitals:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return s.jsx(_o,{data:e,columns:t,priority:r,onSelect:i=>console.log("Vitals selected:",i),onAction:(i,a)=>console.log("Vitals action:",i,a)})}},fieldTypes:{isNHSNumber:e=>typeof e=="string"&&/^\d{3}\s?\d{3}\s?\d{4}$/.test(e.replace(/\s/g,"")),isEWSScore:e=>typeof e=="number"&&e>=0&&e<=20,isMedicalDate:e=>typeof e=="string"&&!isNaN(Date.parse(e))}};function gd(e){return{primaryField:e?.primaryField||"name",secondaryFields:e?.secondaryFields||[],badges:e?.badgeFields?.map(t=>({fieldKey:t,className:"adaptive-card__badge"}))||[],hiddenFields:e?.hiddenFields||[],cardTemplate:e?.cardTemplate?(t,n,r)=>e.cardTemplate(t,n):void 0,classPrefix:"adaptive-card--generic"}}function yd(e){if(!e||e.length===0)return!1;const t=e[0];return t.ews_score!==void 0||t.nhs_number!==void 0||t.patient_name!==void 0||t.ward!==void 0||t.consultant!==void 0}function Jv(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const i=[...e.selectedRows];return i[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:i};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:a}=t.payload,o=new Array(a).fill(!1),l=new Array(a).fill(null),c=new Array(a).fill([]);for(let u=0;u<Math.min(e.tabLoadingStates.length,a);u++)o[u]=e.tabLoadingStates[u],l[u]=e.tabErrors[u],c[u]=e.selectedRows[u];return{...e,tabLoadingStates:o,tabErrors:l,selectedRows:c};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}function Qv(e,t){const[n,r]=$.useState("cards");return $.useEffect(()=>{if(t){r(t);return}const i=()=>{const a=window.innerWidth;a<e.mobile?r("cards"):a<e.desktop?r("hybrid"):r("table")};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[e,t]),n}function Kv(e){return!e||typeof e!="object"?null:e.appointment_type||e.appointment_time||e.clinic?"appointment":e.medication_name||e.medication||e.dose||e.frequency?"medication":e.ews_score!==void 0||e.respiratory_rate!==void 0||e.spo2!==void 0||e.temperature!==void 0||e.systolic_bp!==void 0||e.heart_rate!==void 0?"vitals":e.name||e.patient_name||e.nhs_number||e.ward||e.bed?"patient":null}function ex(e,t,n,r){const i=r?{...r.defaultCardConfig,...n}:{...Vv,...n};if(r&&r.cardTemplates){const a=Kv(e);if(a&&r.cardTemplates[a]){const o=r.cardTemplates[a](e,t,i);if(o)return{variant:"default",children:o}}}return i.cardTemplate&&i.cardTemplate(e,t,i),fd(e,t,i)}const wo=({breakpoints:e={mobile:768,tablet:1024,desktop:1200},forceLayout:t,cardConfig:n={},experimental:r={},enableAdvancedSorting:i=!1,topActions:a,bottomActions:o,gridActions:l,forceGridActionsAbove:c,tabPanels:u,dataConfig:d,selectedIndex:f,onTabChange:p,ariaLabel:m="Data grid",ariaDescription:y,orientation:h="horizontal",id:g,disabled:k=!1,className:S,...j})=>{const M=Qv(e,t),b=f!==void 0,_=f??0,N=$.useMemo(()=>{if(u.some(T=>T.data&&T.data.length>0&&yd(T.data))){const T=gd(n);return{...pd.defaultCardConfig,...T}}else return gd(n)},[n,u]),w=$.useMemo(()=>u.some(T=>T.data&&T.data.length>0&&yd(T.data))?pd:void 0,[u]),v=$.useMemo(()=>({selectedIndex:_,tabLoadingStates:new Array(u.length).fill(!1),tabErrors:new Array(u.length).fill(null),sortConfig:[],selectedRows:new Array(u.length).fill([]),globalSelectedRowData:null,filters:void 0}),[_,u.length]),[C,D]=$.useReducer(Jv,v),I=$.useRef([]),B=$.useRef([]),E=$.useRef([]),A=$.useRef(null),[L,z]=$.useState({focusArea:"tabs",focusedTabIndex:0,focusedCardIndex:0,selectedCardIndex:-1,isGridActive:!1,focusedCardElementIndex:0,cardElements:[],isCardNavigationActive:!1,gridColumns:1,gridRows:1,cardSortConfig:null,focusedSortControlIndex:0,isSortControlsActive:!1}),ae=$.useCallback(R=>{if(!R.current)return{columns:1,rows:0};const T=R.current,F=T.querySelectorAll(".aria-tabs-datagrid-adaptive__card-wrapper");if(F.length===0)return{columns:1,rows:0};const G=T.offsetWidth,H=F[0].offsetWidth,U=Math.floor(G/H)||1,Z=Math.ceil(F.length/U);return{columns:U,rows:Z}},[]),q=$.useCallback((R,T)=>({row:Math.floor(R/T),col:R%T}),[]),O=$.useCallback((R,T,F)=>R*F+T,[]),ne=$.useCallback((R,T,F,G)=>{const{row:P,col:H}=q(R,G);let U=P,Z=H;switch(T){case"up":U=Math.max(0,P-1);break;case"down":U=Math.min(Math.floor((F-1)/G),P+1);break;case"left":Z=Math.max(0,H-1);break;case"right":Z=Math.min(G-1,H+1);break}const Q=O(U,Z,G);return Math.min(Q,F-1)},[q,O]);$.useEffect(()=>{L.isCardNavigationActive&&L.focusedCardElementIndex>=0&&L.cardElements.length>0&&setTimeout(()=>{const R=L.cardElements[L.focusedCardElementIndex];R&&(R.element.focus(),R.element.scrollIntoView({block:"nearest",behavior:"smooth"}))},0)},[L.isCardNavigationActive,L.focusedCardElementIndex,L.cardElements.length]),$.useEffect(()=>{const R=()=>{if(M==="cards"&&A.current){const{columns:G,rows:P}=ae(A);z(H=>({...H,gridColumns:G,gridRows:P}))}},T=setTimeout(R,200),F=()=>{setTimeout(R,100)};return window.addEventListener("resize",F),()=>{clearTimeout(T),window.removeEventListener("resize",F)}},[M,u,ae]),$.useEffect(()=>{const R=C.tabLoadingStates.length,T=u.length;R!==T&&D({type:"ADJUST_ARRAYS",payload:{newLength:T}})},[u.length,C.tabLoadingStates.length]),$.useEffect(()=>{b&&f!==C.selectedIndex&&D({type:"SET_SELECTED_INDEX",payload:f})},[b,f,C.selectedIndex]);const Y=$.useCallback(R=>{R>=0&&R<u.length&&!u[R].disabled&&(D({type:"SET_SELECTED_INDEX",payload:R}),p?.(R))},[u,p]),K=$.useCallback(R=>{console.log("Card selected:",R),D({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:R})},[]),X=$.useCallback(R=>{const T=B.current[R];T&&(T.focus(),T.scrollIntoView({block:"nearest",behavior:"smooth"}))},[]),J=$.useCallback(R=>{const T=B.current[R];if(!T)return[];const F=['button:not([disabled]):not([aria-hidden="true"])','a[href]:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','select:not([disabled]):not([aria-hidden="true"])','textarea:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])','.healthcare-card__detail[tabindex]:not([tabindex="-1"])',".healthcare-card__action:not([disabled])",".tag:not([disabled])"].join(", "),G=T.querySelectorAll(F);return Array.from(G).map((P,H)=>({id:P.id||`card-${R}-element-${H}`,element:P,label:P.getAttribute("aria-label")||P.textContent?.trim()||P.getAttribute("title")||`Element ${H+1}`,type:P.tagName.toLowerCase()==="button"?"button":P.tagName.toLowerCase()==="a"?"link":["input","select","textarea"].includes(P.tagName.toLowerCase())?"input":"generic"}))},[]),pe=$.useRef(null),ie=$.useCallback(R=>{const T=pe.current;if(!T)return;const F=document.createElement("div");F.setAttribute("aria-live","polite"),F.setAttribute("aria-atomic","true"),F.className="sr-only",F.textContent=R,T.appendChild(F),setTimeout(()=>{T.contains(F)&&T.removeChild(F)},1e3)},[]),se=$.useCallback(R=>{const T=R.filter(G=>G.sortable!==!1),F=[{value:"",label:"Sort by..."}];return T.forEach(G=>{const P=G.label||G.key;G.key==="name"?F.push({value:`${G.key}-asc`,label:`${P} (A-Z)`},{value:`${G.key}-desc`,label:`${P} (Z-A)`}):G.key==="ews_score"||G.key.includes("score")?F.push({value:`${G.key}-desc`,label:`${P} (High-Low)`},{value:`${G.key}-asc`,label:`${P} (Low-High)`}):G.key==="age"||G.key.includes("date")||G.key.includes("time")?F.push({value:`${G.key}-desc`,label:`${P} (Oldest-Youngest)`},{value:`${G.key}-asc`,label:`${P} (Youngest-Oldest)`}):F.push({value:`${G.key}-asc`,label:`${P} (A-Z)`},{value:`${G.key}-desc`,label:`${P} (Z-A)`})}),F},[]),te=$.useCallback((R,T)=>T?[...R].sort((F,G)=>{const P=F[T.key],H=G[T.key];if(P==null&&H==null)return 0;if(P==null)return 1;if(H==null)return-1;const U=Number(P),Z=Number(H);if(!isNaN(U)&&!isNaN(Z))return T.direction==="asc"?U-Z:Z-U;const Q=String(P).toLowerCase(),ee=String(H).toLowerCase(),fe=Q.localeCompare(ee);return T.direction==="asc"?fe:-fe}):R,[]),re=$.useCallback(R=>{if(!R){z(Q=>({...Q,cardSortConfig:null})),ie("Card sorting cleared");return}const[T,F]=R.split("-"),G={key:T,direction:F};z(Q=>({...Q,cardSortConfig:G}));const U=u[C.selectedIndex]?.columns.find(Q=>Q.key===T)?.label||T;ie(`Cards sorted by ${U} in ${F==="asc"?"ascending":"descending"} order`)},[u,C.selectedIndex,ie]),de=$.useCallback(R=>{const G=u[C.selectedIndex]?.columns.find(H=>H.key===R.key)?.label||R.key,P=R.direction==="asc"?"ascending":"descending";return`${G} (${P})`},[u,C.selectedIndex]),V=$.useCallback(R=>{const T=u[C.selectedIndex];if(i){const F=C.sortConfig;return!F||F.length===0?R:[...R].sort((G,P)=>{for(const{key:H,direction:U}of F){let Z=G[H],Q=P[H];const ee=T?.columns.find(Pe=>Pe.key===H);if(ee?.cardRenderer?(Z=ee.cardRenderer(G),Q=ee.cardRenderer(P)):ee?.render&&(Z=ee.render(G),Q=ee.render(P)),Z==null&&Q==null)continue;if(Z==null)return U==="asc"?-1:1;if(Q==null)return U==="asc"?1:-1;const fe=Number(Z),ue=Number(Q);if(!isNaN(fe)&&!isNaN(ue)){const Pe=fe-ue;if(Pe!==0)return U==="asc"?Pe:-Pe;continue}const he=String(Z).toLowerCase(),xe=String(Q).toLowerCase(),be=he.localeCompare(xe);if(be!==0)return U==="asc"?be:-be}return 0})}else return te(R,L.cardSortConfig)},[i,C.sortConfig,L.cardSortConfig,te,u,C.selectedIndex]),ce=$.useCallback((R,T)=>{const F=J(R),G=F[T];if(G){G.element.scrollIntoView({block:"nearest",behavior:"smooth"});const P=`Focused on ${G.label}, ${G.type} ${T+1} of ${F.length} within card`;ie(P)}},[J,ie]),oe=$.useCallback(R=>{I.current[R]?.focus()},[]),ge=$.useCallback(()=>{const R=E.current[0];if(!R)return[];const T=['select:not([disabled]):not([aria-hidden="true"])','button:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])'].join(", "),F=R.querySelectorAll(T);return Array.from(F)},[]),le=$.useCallback(R=>{if(R===0){const T=E.current[0],F=T?.querySelector(".sort-controls-row");if(F){F.setAttribute("tabindex","-1"),F.focus();const P=`Sort controls group with ${ge().length} interactive elements. Press Enter or Space to begin navigating controls.`;ie(P)}else T&&T.focus()}else{const T=ge(),F=R-1,G=T[F];if(G){G.focus();const P=G.tagName.toLowerCase()==="select",H=G.tagName.toLowerCase()==="button",U=P?"dropdown":H?"button":"control",Z=P?". Use Space key to open dropdown":"",Q=`${U} ${F+1} of ${T.length}${Z}`;ie(Q)}}},[ge,ie]),me=$.useCallback((R,T)=>{const{key:F}=R,G=u[C.selectedIndex],P=G?.data.length||0;if(F==="ArrowLeft"&&R.shiftKey){R.preventDefault(),R.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(F==="ArrowRight"&&R.shiftKey){R.preventDefault(),R.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!L.isCardNavigationActive){switch(F){case"ArrowUp":if(R.preventDefault(),T===0)z(Q=>({...Q,focusArea:"sort-controls",focusedSortControlIndex:0,isSortControlsActive:!1})),le(0);else{const Q=ne(T,"up",P,L.gridColumns);Q!==T&&(z(ee=>({...ee,focusedCardIndex:Q})),X(Q),ie(`Moved to card ${Q+1} of ${P}`))}break;case"ArrowDown":R.preventDefault();const H=ne(T,"down",P,L.gridColumns);H!==T&&(z(Q=>({...Q,focusedCardIndex:H})),X(H),ie(`Moved to card ${H+1} of ${P}`));break;case"ArrowLeft":R.preventDefault();const U=ne(T,"left",P,L.gridColumns);U!==T?(z(Q=>({...Q,focusedCardIndex:U})),X(U),ie(`Moved to card ${U+1} of ${P}`)):C.selectedIndex>0&&(D({type:"SET_SELECTED_INDEX",payload:C.selectedIndex-1}),z(Q=>({...Q,focusArea:"tabs"})),setTimeout(()=>oe(C.selectedIndex-1),0));break;case"ArrowRight":R.preventDefault();const Z=ne(T,"right",P,L.gridColumns);Z!==T?(z(Q=>({...Q,focusedCardIndex:Z})),X(Z),ie(`Moved to card ${Z+1} of ${P}`)):C.selectedIndex<u.length-1&&(D({type:"SET_SELECTED_INDEX",payload:C.selectedIndex+1}),z(Q=>({...Q,focusArea:"tabs"})),setTimeout(()=>oe(C.selectedIndex+1),0));break;case"Enter":if(G?.data[T]){R.preventDefault(),z(ee=>({...ee,selectedCardIndex:T}));const Q=J(T);Q.length>0?(z(ee=>({...ee,focusArea:"card",isCardNavigationActive:!0,focusedCardElementIndex:0,cardElements:Q,selectedCardIndex:T})),ie(`Card ${T+1} selected and navigation activated. ${Q.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`)):ie(`Card ${T+1} selected.`)}break;case" ":if(G?.data[T]){R.preventDefault(),z(ee=>({...ee,selectedCardIndex:ee.selectedCardIndex===T?-1:T}));const Q=L.selectedCardIndex===T;ie(`Card ${T+1} ${Q?"deselected":"selected"}.`)}break}return}switch(F){case"ArrowUp":case"ArrowLeft":R.preventDefault();const H=Math.max(0,L.focusedCardElementIndex-1);z(ee=>({...ee,focusedCardElementIndex:H})),ce(T,H);break;case"ArrowDown":case"ArrowRight":R.preventDefault();const U=Math.min(L.cardElements.length-1,L.focusedCardElementIndex+1);z(ee=>({...ee,focusedCardElementIndex:U})),ce(T,U);break;case"Enter":R.preventDefault();const Z=L.cardElements[L.focusedCardElementIndex];Z&&(Z.element.click(),ie(`Activated ${Z.label}`));break;case" ":R.preventDefault();const Q=L.cardElements[L.focusedCardElementIndex];if(Q){const ee=new MouseEvent("dblclick",{bubbles:!0});Q.element.dispatchEvent(ee),ie(`Double-clicked ${Q.label}`)}break;case"Escape":R.preventDefault(),z(ee=>({...ee,focusArea:"cards",isCardNavigationActive:!1,focusedCardElementIndex:0,cardElements:[]})),setTimeout(()=>X(T),0),ie("Exited card navigation, returned to card level");break;case"Home":R.preventDefault(),L.cardElements.length>0&&(z(ee=>({...ee,focusedCardElementIndex:0})),ce(T,0));break;case"End":if(R.preventDefault(),L.cardElements.length>0){const ee=L.cardElements.length-1;z(fe=>({...fe,focusedCardElementIndex:ee})),ce(T,ee)}break}},[L,C.selectedIndex,u,K,X,oe,z,J,ce,ie]),Ie=$.useCallback(R=>{const T=I.current[R],F=T?.parentElement;if(!T||!F){console.log("Tab or container not found for mobile scroll");return}const G=T.getBoundingClientRect(),P=F.getBoundingClientRect();G.left>=P.left&&G.right<=P.right||(console.log("Tab not visible, scrolling into view (mobile)"),T.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[]),Fe=$.useCallback((R,T)=>{if(M!=="cards")return;const{key:F}=R;switch(F){case"ArrowLeft":R.preventDefault();const G=T>0?T-1:u.length-1;Y(G),z(Z=>({...Z,focusedTabIndex:G})),I.current[G]?.focus(),Ie(G);break;case"ArrowRight":R.preventDefault();const P=T<u.length-1?T+1:0;Y(P),z(Z=>({...Z,focusedTabIndex:P})),I.current[P]?.focus(),Ie(P);break;case"ArrowDown":R.preventDefault();const H=u[C.selectedIndex];H&&H.columns&&H.columns.length>0?(z(Z=>({...Z,focusArea:"sort-controls",focusedSortControlIndex:0})),le(0)):(z(Z=>({...Z,focusArea:"cards",focusedCardIndex:0})),X(0));break;case"Home":R.preventDefault(),Y(0),z(Z=>({...Z,focusedTabIndex:0})),I.current[0]?.focus(),Ie(0);break;case"End":R.preventDefault();const U=u.length-1;Y(U),z(Z=>({...Z,focusedTabIndex:U})),I.current[U]?.focus(),Ie(U);break;case"Enter":case" ":R.preventDefault(),Y(T);break}},[u.length,Y,M,X,z,Ie]),ke=$.useCallback((R,T)=>{if(M!=="cards")return;const{key:F}=R,G=u[C.selectedIndex];if(T===0&&!L.isSortControlsActive){switch(F){case"ArrowUp":R.preventDefault(),z(H=>({...H,focusArea:"tabs",isSortControlsActive:!1})),oe(C.selectedIndex);break;case"ArrowDown":R.preventDefault(),G?.data&&G.data.length>0&&(z(H=>({...H,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),X(0));break;case"Enter":case" ":R.preventDefault();const P=ge();if(P.length>0){z(U=>({...U,isSortControlsActive:!0,focusedSortControlIndex:1})),le(1);const H=`Entered sort controls navigation mode. ${P.length} controls available. Use arrow keys to navigate between controls.`;ie(H)}break;case"Escape":R.preventDefault(),z(H=>({...H,isSortControlsActive:!1,focusArea:"tabs"})),oe(C.selectedIndex);break}return}if(L.isSortControlsActive){const H=ge().length;switch(F){case"ArrowLeft":R.preventDefault();const U=L.focusedSortControlIndex>1?L.focusedSortControlIndex-1:H;z(Q=>({...Q,focusedSortControlIndex:U})),le(U);break;case"ArrowRight":R.preventDefault();const Z=L.focusedSortControlIndex<H?L.focusedSortControlIndex+1:1;z(Q=>({...Q,focusedSortControlIndex:Z})),le(Z);break;case"ArrowDown":if(R.preventDefault(),L.isSortControlsActive){const Q=L.focusedSortControlIndex<H?L.focusedSortControlIndex+1:1;z(ee=>({...ee,focusedSortControlIndex:Q})),le(Q)}else G?.data&&G.data.length>0&&(z(Q=>({...Q,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),X(0));break;case"ArrowUp":R.preventDefault(),z(Q=>({...Q,isSortControlsActive:!1,focusArea:"sort-controls"})),le(0);break;case"Escape":R.preventDefault(),z(Q=>({...Q,isSortControlsActive:!1,focusArea:"sort-controls",focusedSortControlIndex:0})),le(0);break}}},[M,u,C.selectedIndex,L.isSortControlsActive,L.focusedSortControlIndex,le,oe,X,z,ie]);if(M==="cards"){const R=u[C.selectedIndex];return s.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${S||""}`,children:[s.jsxs("div",{className:"aria-tabs-datagrid-adaptive__header",children:[s.jsx("div",{role:"tablist","aria-label":m,"aria-describedby":`${y||""} ${g?`${g}-navigation-help`:""}`.trim(),"aria-orientation":h,className:"aria-tabs-datagrid__tabs",children:u.map((T,F)=>{const G=F===C.selectedIndex,P=T.disabled||k;return s.jsxs("button",{role:"tab",id:`tab-${T.id}`,"aria-controls":`panel-${T.id}`,"aria-selected":G,"aria-disabled":P,tabIndex:G?0:-1,ref:H=>{I.current[F]=H},onClick:()=>Y(F),onKeyDown:H=>Fe(H,F),disabled:P,className:["aria-tabs-datagrid__tab",G?"aria-tabs-datagrid__tab--selected":"",P?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[s.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:T.label}),C.tabLoadingStates[F]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),C.tabErrors[F]&&s.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},T.id)})}),a&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions",children:a})]}),R&&R.columns&&s.jsx(s.Fragment,{children:i?s.jsx(ud,{sortConfig:C.sortConfig||[],columns:R.columns.map(T=>({key:T.key,label:T.label})),onSortChange:T=>{D({type:"SET_SORT",payload:T})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls"}):s.jsx("div",{className:"aria-tabs-datagrid-adaptive__sort-controls",role:"region","aria-label":"Sort controls",tabIndex:L.focusArea==="sort-controls"?0:-1,ref:T=>{E.current[0]=T},onKeyDown:T=>ke(T,0),children:s.jsxs("div",{className:"sort-controls-row",children:[s.jsxs("div",{className:"sort-select-container",children:[s.jsx("label",{htmlFor:`card-sort-${R.id}`,className:"sort-label",children:"Sort cards by"}),s.jsx(Vr,{id:`card-sort-${R.id}`,name:`card-sort-${R.id}`,value:L.cardSortConfig?`${L.cardSortConfig.key}-${L.cardSortConfig.direction}`:"",onChange:T=>re(T.target.value),className:"sort-select",children:se(R.columns).map(T=>s.jsx("option",{value:T.value,children:T.label},T.value))})]}),L.cardSortConfig&&s.jsxs("div",{className:"sort-indicator",role:"status","aria-live":"polite",children:[s.jsxs("span",{className:"sort-indicator-text",children:["Sorted by ",de(L.cardSortConfig)]}),s.jsx(pt,{variant:"secondary",size:"small",onClick:()=>re(""),"aria-label":"Clear card sorting",className:"sort-clear-button",children:"Clear"})]})]})})}),s.jsx("div",{ref:A,className:"aria-tabs-datagrid-adaptive__cards",role:"grid","aria-label":`${R?.label||"Data"} cards in ${L.gridRows} rows and ${L.gridColumns} columns`,"aria-rowcount":L.gridRows,"aria-colcount":L.gridColumns,id:`panel-${R?.id}`,"aria-labelledby":`tab-${R?.id}`,children:V(R?.data||[]).map((T,F)=>{const G=L.selectedCardIndex===F,P=L.focusedCardIndex===F&&L.focusArea==="cards",H=L.focusedCardIndex===F&&L.focusArea==="card"&&L.isCardNavigationActive,U=F===0&&L.focusArea!=="cards",Z=P||U,Q=q(F,L.gridColumns);if(n.cardTemplate){const ue=n.cardTemplate(T,R.columns);return s.jsx("div",{role:"row","aria-rowindex":Q.row+1,className:"aria-tabs-datagrid-adaptive__row",children:s.jsx("div",{ref:he=>{B.current[F]=he},className:["aria-tabs-datagrid-adaptive__card-wrapper",G?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",P?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",H?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":Q.col+1,"aria-selected":G,"aria-expanded":H,"aria-description":H?`Card navigation active. ${L.cardElements.length} interactive elements available.`:void 0,tabIndex:Z?0:-1,onClick:()=>{z(he=>({...he,selectedCardIndex:he.selectedCardIndex===F?-1:F})),K(T)},onKeyDown:he=>me(he,F),onFocus:()=>{z(he=>he.isCardNavigationActive?he:he.focusedCardIndex!==F||he.focusArea!=="cards"?{...he,focusedCardIndex:F,focusArea:"cards"}:he)},children:ue})},`card-${F}`)}const ee=ex(T,R.columns,N,w),fe=[ee.className||"",G?"aria-tabs-datagrid-adaptive__card--selected":"",P?"aria-tabs-datagrid-adaptive__card--focused":"",H?"aria-tabs-datagrid-adaptive__card--card-navigation":""].filter(Boolean).join(" ");return s.jsx("div",{role:"row","aria-rowindex":Q.row+1,className:"aria-tabs-datagrid-adaptive__row",children:s.jsx("div",{className:["aria-tabs-datagrid-adaptive__card-wrapper",G?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",P?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",H?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":Q.col+1,"aria-selected":G,"aria-expanded":H,onKeyDown:ue=>{ue.key==="Enter"&&(ue.preventDefault(),z(he=>({...he,selectedCardIndex:F}))),me(ue,F)},children:s.jsx(po,{...ee,ref:ue=>{B.current[F]=ue},className:fe,"aria-label":`${ee["aria-label"]||ee.heading}. ${H?`Card navigation active with ${L.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.`:"Press Enter to navigate within card elements."}`,tabIndex:Z?0:-1,onClick:()=>{z(ue=>({...ue,selectedCardIndex:ue.selectedCardIndex===F?-1:F})),K(T)},onKeyDown:ue=>me(ue,F),onFocus:()=>{L.isCardNavigationActive||z(ue=>ue.focusedCardIndex!==F||ue.focusArea!=="cards"?{...ue,focusedCardIndex:F,focusArea:"cards",focusedCardElementIndex:0,cardElements:[]}:ue)}})})},`card-${F}`)})}),o&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o}),s.jsx("div",{ref:pe,className:"aria-tabs-datagrid-adaptive__announcements","aria-hidden":"true",style:{position:"fixed",top:"-1px",left:"-1px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0,padding:0,margin:0}})]})}return M==="hybrid"?s.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${S||""}`,children:[a&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:a}),s.jsx(Da,{tabPanels:u,dataConfig:d,ariaLabel:m,ariaDescription:y,orientation:h,id:g,disabled:k,selectedIndex:f,onTabChange:p,className:"aria-tabs-datagrid-adaptive__table--hybrid",actions:l,forceActionsAbove:c,...j}),o&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o})]}):s.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${S||""}`,children:[a&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:a}),s.jsx(Da,{tabPanels:u,dataConfig:d,ariaLabel:m,ariaDescription:y,orientation:h,id:g,disabled:k,selectedIndex:f,onTabChange:p,actions:l,forceActionsAbove:c,...j}),o&&s.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:o})]})},bd=e=>{const t=yo.find(n=>n.value===e);return t?t.icon:null},tx={ecommerce:{name:"E-commerce",description:"Product catalogs with pricing, inventory, and ratings",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.priceRange){const[r,i]=t.priceRange,a=n.discountedPrice||n.price;if(a<r||a>i)return!1}return!(t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.inStock!==void 0&&n.inStock!==t.inStock||t.minRating!==void 0&&n.rating<t.minRating||t.tags&&t.tags.length>0&&!t.tags.some(r=>n.tags.includes(r)))}):e,booleanRenderer:e=>bd(e),getDataId:e=>`ecommerce-${e.id}`},createTabs:e=>La(e,[{id:"all-products",label:"All Products",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Price",render:n=>n.discountedPrice?`$${n.price.toFixed(2)} â†’ $${n.discountedPrice.toFixed(2)}`:`$${n.price.toFixed(2)}`},{key:"inStock",label:"Availability"},{key:"category",label:"Category"},{key:"rating",label:"Rating",render:n=>`${n.rating}/5 (${n.reviews} reviews)`}],ariaLabel:"All Products Grid",ariaDescription:"Complete product catalog with pricing and availability"},{id:"on-sale",label:"On Sale",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Original Price",render:n=>`$${n.price.toFixed(2)}`},{key:"discountedPrice",label:"Sale Price",render:n=>`$${n.discountedPrice?.toFixed(2)||"N/A"}`},{key:"discount",label:"Discount",render:n=>n.discountedPrice?`${((n.price-n.discountedPrice)/n.price*100).toFixed(0)}% OFF`:"N/A"}],filter:n=>n.filter(r=>r.discountedPrice!==void 0),ariaLabel:"Sale Products Grid",ariaDescription:"Products currently on sale with discounted pricing"},{id:"high-rated",label:"Top Rated",columns:[{key:"name",label:"Product Name"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.rating>=4),sortConfig:[{key:"rating",direction:"desc"}],ariaLabel:"Top Rated Products Grid",ariaDescription:"Highest rated products with 4+ star ratings"}])},financial:{name:"Financial",description:"Transaction data with amounts, categories, and statuses",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.dateRange){const[r,i]=t.dateRange;if(n.date<r||n.date>i)return!1}if(t.amountRange){const[r,i]=t.amountRange;if(Math.abs(n.amount)<r||Math.abs(n.amount)>i)return!1}return!(t.types&&t.types.length>0&&!t.types.includes(n.type)||t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.pending!==void 0&&n.pending!==t.pending)}):e,booleanRenderer:e=>bd(e),getDataId:e=>`financial-${e.id}`},createTabs:e=>La(e,[{id:"all-transactions",label:"All Transactions",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"},{key:"pending",label:"Status"}],sortConfig:[{key:"date",direction:"desc"}],ariaLabel:"All Transactions Grid",ariaDescription:"Complete transaction history with amounts and categories"},{id:"credits",label:"Credits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`+$${n.amount.toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="credit"),ariaLabel:"Credit Transactions Grid",ariaDescription:"Incoming payments and credits only"},{id:"debits",label:"Debits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`-$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="debit"),ariaLabel:"Debit Transactions Grid",ariaDescription:"Outgoing payments and charges only"},{id:"pending",label:"Pending",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"type",label:"Type"}],filter:n=>n.filter(r=>r.pending),ariaLabel:"Pending Transactions Grid",ariaDescription:"Transactions awaiting processing"}])}},vd=(e,t)=>{const n=tx[e];return{dataConfig:n.dataConfig,tabPanels:n.createTabs(t)}},xd=[{name:"Sarah Johnson",age:34,ews_data:{respiratory_rate_bpm:16,sp02:98,temperature:36.8,systolic_bp:140,heart_rate:82,avpu:"alert"},ews_score:3,ward_name:"Cardiology",room_name:"Room A",bed_name:"A-1",bed_type:"bed",admin_note:"Hypertension monitoring",pathway:"Standard",speciality:"Cardiology",consultant:"Dr. Smith",local_authority:"NHS Trust",early_discharge_notification:"not_required",needs_based_assessment:!1,medically_optimised:!0,criteria_to_reside:!0,date_medically_optimised:"2024-01-15",anticipated_discharge_date:"2024-01-18",dru_suitability:!1,optica_planned_discharge_date:"2024-01-18",optica_date_confirmed:"2024-01-16",dsum:null,medications_tta:"None required",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!1,initial_therapy_contact:"",equipment:"None",district_nurse_referral:!1},{name:"Michael Chen",age:67,ews_data:{respiratory_rate_bpm:20,sp02:94,temperature:37.2,systolic_bp:160,heart_rate:95,avpu:"alert"},ews_score:7,ward_name:"Surgery",room_name:"Room B",bed_name:"B-3",bed_type:"bed",admin_note:"Post-operative monitoring",pathway:"Surgical",speciality:"General Surgery",consultant:"Dr. Johnson",local_authority:"NHS Trust",early_discharge_notification:"due",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!0,date_medically_optimised:"2024-01-17",anticipated_discharge_date:"2024-01-20",dru_suitability:!0,optica_planned_discharge_date:"2024-01-20",optica_date_confirmed:"2024-01-16",dsum:"Complex discharge",medications_tta:"Pain management",transport_booking:!0,transport_status:"In Progress",transport_date:"2024-01-20",transport_mobility:"Wheelchair",fast_track:!1,initial_therapy_contact:"2024-01-17",equipment:"Walking frame",district_nurse_referral:!0},{name:"Emma Thompson",age:28,ews_data:{respiratory_rate_bpm:24,sp02:90,temperature:38.5,systolic_bp:110,heart_rate:105,avpu:"alert"},ews_score:5,ward_name:"Respiratory",room_name:"Room C",bed_name:"C-2",bed_type:"bed",admin_note:"Pneumonia treatment",pathway:"Respiratory",speciality:"Respiratory Medicine",consultant:"Dr. Williams",local_authority:"NHS Trust",early_discharge_notification:"overdue",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!1,date_medically_optimised:"",anticipated_discharge_date:"2024-01-22",dru_suitability:!1,optica_planned_discharge_date:"2024-01-22",optica_date_confirmed:"",dsum:null,medications_tta:"Antibiotics",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!0,initial_therapy_contact:"",equipment:"Oxygen",district_nurse_referral:!1}],nx=[{id:"appt-001",appointment_time:"2024-01-18T09:00:00Z",patient_name:"Sarah Johnson",appointment_type:"Cardiology Consultation",consultant:"Dr. Smith",location:"Clinic Room 3",duration:30,status:"pending"},{id:"appt-002",appointment_time:"2024-01-18T10:30:00Z",patient_name:"Michael Davis",appointment_type:"Post-op Follow-up",consultant:"Dr. Johnson",location:"Surgery Ward",duration:15,status:"active"},{id:"appt-003",appointment_time:"2024-01-18T14:00:00Z",patient_name:"Emma Thompson",appointment_type:"Respiratory Assessment",consultant:"Dr. Wilson",location:"Emergency Department",duration:45,status:"pending"}],rx=[{id:"med-001",medication:"Amlodipine",dose:"5mg",frequency:"Once daily",route:"Oral",next_due:"2024-01-18T08:00:00Z",prescriber:"Dr. Smith",patient_name:"Sarah Johnson",allergies:null,priority:"medium"},{id:"med-002",medication:"Morphine",dose:"10mg",frequency:"Every 4 hours",route:"IV",next_due:"2024-01-18T10:00:00Z",prescriber:"Dr. Johnson",patient_name:"Michael Davis",allergies:"Codeine allergy",priority:"high"},{id:"med-003",medication:"Salbutamol",dose:"2 puffs",frequency:"As needed",route:"Inhaled",next_due:"2024-01-18T12:00:00Z",prescriber:"Dr. Wilson",patient_name:"Emma Thompson",allergies:null,priority:"high"}],ix=[{id:"vitals-001",patient_name:"Sarah Johnson",recorded_time:"2024-01-18T07:30:00Z",temperature:36.8,blood_pressure:"140/90",heart_rate:82,respiratory_rate:16,oxygen_saturation:98,ews_score:3,priority:"medium"},{id:"vitals-002",patient_name:"Michael Davis",recorded_time:"2024-01-18T08:15:00Z",temperature:37.2,blood_pressure:"130/85",heart_rate:98,respiratory_rate:20,oxygen_saturation:95,ews_score:7,priority:"high"},{id:"vitals-003",patient_name:"Emma Thompson",recorded_time:"2024-01-18T09:00:00Z",temperature:38.5,blood_pressure:"110/70",heart_rate:105,respiratory_rate:24,oxygen_saturation:90,ews_score:9,priority:"high"}],_d=[{id:"PROD001",name:"Wireless Headphones",price:199.99,discountedPrice:149.99,inStock:!0,category:"Electronics",rating:4.5,reviews:1247,tags:["wireless","bluetooth","premium"]},{id:"PROD002",name:"Running Shoes",price:129.99,inStock:!0,category:"Sports",rating:4.8,reviews:892,tags:["running","athletic","comfortable"]},{id:"PROD003",name:"Coffee Maker",price:89.99,discountedPrice:59.99,inStock:!1,category:"Kitchen",rating:4.2,reviews:456,tags:["kitchen","coffee","appliance"]},{id:"PROD004",name:"Smartphone Case",price:24.99,inStock:!0,category:"Accessories",rating:4,reviews:234,tags:["protection","mobile","durable"]}],wd=[{id:"TXN001",date:new Date("2024-01-15"),amount:2500,type:"credit",category:"Salary",description:"Monthly salary payment",accountId:"ACC001",pending:!1,recurring:!0},{id:"TXN002",date:new Date("2024-01-14"),amount:89.5,type:"debit",category:"Groceries",description:"Supermarket shopping",accountId:"ACC001",pending:!1,recurring:!1},{id:"TXN003",date:new Date("2024-01-16"),amount:1200,type:"debit",category:"Rent",description:"Monthly rent payment",accountId:"ACC001",pending:!0,recurring:!0},{id:"TXN004",date:new Date("2024-01-13"),amount:150,type:"credit",category:"Refund",description:"Product return refund",accountId:"ACC001",pending:!1,recurring:!1}],Sd=[{id:"LEAD001",companyName:"Tech Solutions Inc",contactPerson:"John Smith",email:"john@techsolutions.com",status:"qualified",value:5e4,lastContact:new Date("2024-01-15"),source:"Website",isHotLead:!0},{id:"LEAD002",companyName:"Global Industries",contactPerson:"Maria Garcia",email:"maria@globalind.com",status:"contacted",value:25e3,lastContact:new Date("2024-01-14"),source:"Referral",isHotLead:!1},{id:"LEAD003",companyName:"StartupXYZ",contactPerson:"Alex Johnson",email:"alex@startupxyz.com",status:"new",value:15e3,lastContact:new Date("2024-01-16"),source:"Cold Call",isHotLead:!0}],ax={dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>!(t.status&&!t.status.includes(n.status)||t.minValue&&n.value<t.minValue||t.hotLeadsOnly&&!n.isHotLead)):e,booleanRenderer:e=>s.jsx("span",{style:{color:e?"#dc2626":"#6b7280",fontWeight:e?"bold":"normal"},children:e?"ðŸ”¥ Hot Lead":"ðŸ“‹ Standard"}),getDataId:e=>`business-${e.id}`},sx=()=>[{id:"patients",label:"Patients",data:xd,columns:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Records",ariaDescription:"Healthcare patient management with EWS monitoring",cardTemplate:(e,t)=>s.jsx(bo,{data:e,columns:t,onSelect:n=>console.log("Selected patient:",n),onAction:(n,r)=>console.log("Patient action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})},{id:"appointments",label:"Appointments",data:nx,columns:[{key:"appointment_time",label:"Time"},{key:"patient_name",label:"Patient"},{key:"appointment_type",label:"Type"},{key:"consultant",label:"Consultant"}],ariaLabel:"Patient Appointments",ariaDescription:"Scheduled appointments and consultations",cardTemplate:(e,t)=>s.jsx(vo,{data:e,columns:t,onSelect:n=>console.log("Selected appointment:",n),onAction:(n,r)=>console.log("Appointment action:",n,r),status:e.status})},{id:"medications",label:"Medications",data:rx,columns:[{key:"medication",label:"Medication"},{key:"dose",label:"Dose"},{key:"frequency",label:"Frequency"},{key:"next_due",label:"Next Due"}],ariaLabel:"Patient Medications",ariaDescription:"Medication administration and scheduling",cardTemplate:(e,t)=>s.jsx(xo,{data:e,columns:t,onSelect:n=>console.log("Selected medication:",n),onAction:(n,r)=>console.log("Medication action:",n,r),priority:e.priority})},{id:"vitals",label:"Vital Signs",data:ix,columns:[{key:"patient_name",label:"Patient"},{key:"recorded_time",label:"Time"},{key:"temperature",label:"Temperature"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Vital Signs",ariaDescription:"Patient vital signs monitoring and EWS scores",cardTemplate:(e,t)=>s.jsx(_o,{data:e,columns:t,onSelect:n=>console.log("Selected vitals:",n),onAction:(n,r)=>console.log("Vitals action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})}],ox=()=>{const[e,t]=$.useState("healthcare"),n=$.useMemo(()=>({healthcare:{title:"Healthcare Workflow Management",description:"Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals",dataConfig:dd,tabPanels:sx(),data:xd},ecommerce:{title:"E-commerce Product Catalog",description:"Product management with pricing and inventory",...vd("ecommerce",_d),data:_d},financial:{title:"Financial Transaction Dashboard",description:"Banking and financial data management",...vd("financial",wd),data:wd},business:{title:"Sales Lead Management",description:"Custom CRM configuration with business logic",dataConfig:ax,tabPanels:La(Sd,[{id:"all-leads",label:"All Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"status",label:"Status"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"isHotLead",label:"Priority"}],ariaLabel:"All Sales Leads Grid",ariaDescription:"Complete sales pipeline with lead information"},{id:"hot-leads",label:"Hot Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"lastContact",label:"Last Contact",render:i=>i.lastContact.toLocaleDateString()}],filter:i=>i.filter(a=>a.isHotLead),sortConfig:[{key:"value",direction:"desc"}],ariaLabel:"Hot Leads Grid",ariaDescription:"High-priority leads requiring immediate attention"},{id:"pipeline",label:"Active Pipeline",columns:[{key:"companyName",label:"Company"},{key:"status",label:"Status"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"source",label:"Source"}],filter:i=>i.filter(a=>["contacted","qualified"].includes(a.status)),ariaLabel:"Active Pipeline Grid",ariaDescription:"Leads currently in the sales pipeline"}]),data:Sd}}),[]),r=n[e];return s.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[s.jsxs("div",{style:{marginBottom:"2rem"},children:[s.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"AriaTabsDataGrid - Comprehensive Demo"}),s.jsx("p",{style:{fontSize:"1.1rem",color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:"This demo showcases the component's versatility across different domains: healthcare, e-commerce, financial services, and custom business applications. Each configuration demonstrates domain-specific data operations, custom renderers, and specialized filtering logic."}),s.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:Object.keys(n).map(i=>s.jsx(pt,{variant:e===i?"primary":"secondary",onClick:()=>t(i),style:{textTransform:"capitalize"},children:i},i))}),s.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem"},children:[s.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"0.5rem",color:"#1e293b"},children:r.title}),s.jsx("p",{style:{color:"#64748b",marginBottom:"1rem"},children:r.description}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.9rem"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Data Records:"})," ",r.data.length]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Tab Panels:"})," ",r.tabPanels.length]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Features:"})," ",["Row Selection","Custom Filtering","Domain-Specific Renderers","Keyboard Navigation","ARIA Compliance"].join(", ")]})]})]})]}),s.jsx(Da,{dataConfig:r.dataConfig,tabPanels:r.tabPanels,ariaLabel:`${r.title} Data Grid`,ariaDescription:`Interactive data grid for ${r.description.toLowerCase()}`}),s.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f1f5f9",borderRadius:"0.5rem",border:"1px solid #cbd5e1"},children:[s.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#334155"},children:"Implementation Details"}),s.jsxs("div",{style:{display:"grid",gap:"1rem",fontSize:"0.9rem"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Current Mode:"})," ",e," configuration"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Data Operations:"})," Custom comparator, filter function, and boolean renderer"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Architecture:"})," Generic core with domain-specific plugins and factory helpers"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"State Management:"})," Global row selection with data-object persistence"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Accessibility:"})," Full ARIA support with dynamic labels and descriptions"]})]})]})]})},So=e=>s.jsx(zs,{...e}),lx=({children:e,pageTitle:t,pageHeadingProps:n,columnWidth:r=Ln.TwoThirds,mainWrapperSize:i,skipLinkProps:a,headerProps:o,footerProps:l,service:c,navigation:u,search:d,account:f,organisation:p,logo:m,className:y,...h})=>{const g={service:c,navigation:u,search:d,account:f,organisation:p,logo:m,...o};return s.jsxs(s.Fragment,{children:[s.jsx(mo,{...a}),s.jsx(da,{...g}),s.jsx(So,{className:y,...h,children:s.jsx(Os,{size:i,children:s.jsx(vn,{children:s.jsxs(gr,{width:r,children:[t&&s.jsx(Xt,{size:"l",...n,children:t}),e]})})})}),s.jsx(Ws,{...l})]})},cx=({children:e,title:t,pageHeadingProps:n,columnWidth:r=Ln.TwoThirds,mainWrapperSize:i="small",skipLinkProps:a,headerProps:o,footerProps:l,backLinkProps:c,serviceName:u,serviceHref:d,logo:f,className:p,...m})=>{const y={service:{text:u,href:d},logo:f,navigation:void 0,search:void 0,account:void 0,...o};return s.jsxs(s.Fragment,{children:[s.jsx(mo,{...a}),s.jsx(da,{...y}),s.jsxs(So,{className:p,...m,children:[c&&s.jsx(sa,{...c}),s.jsx(Os,{size:i,children:s.jsx(vn,{children:s.jsxs(gr,{width:r,children:[t&&s.jsx(Xt,{style:{marginTop:"3rem"},size:"l",...n,children:t}),e]})})})]}),s.jsx(Ws,{...l})]})};function kd(e={}){const{enabled:t=!0,paramSelected:n="nsv",paramDrill:r="nsvDrill"}=e,[i,a]=W.useState(()=>typeof window>"u"||!t?void 0:new URLSearchParams(window.location.search).get(n)),[o,l]=W.useState(()=>typeof window>"u"||!t?!1:new URLSearchParams(window.location.search).get(r)==="1");return W.useEffect(()=>{if(!t||typeof window>"u")return;const c=new URLSearchParams(window.location.search);i?c.set(n,String(i)):c.delete(n),c.set(r,o?"1":"0");const u=`${window.location.pathname}?${c.toString()}${window.location.hash}`;window.history.replaceState(null,"",u)},[i,o,t,n,r]),{selectedId:i,setSelectedId:a,drilledIn:o,setDrilledIn:l}}const ux=({className:e})=>s.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M10.7 3.3a1 1 0 0 1 0 1.4L7.41 8l3.3 3.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 0Z"})}),dx=({className:e})=>s.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M5.3 12.7a1 1 0 0 1 0-1.4L8.59 8l-3.3-3.3a1 1 0 0 1 1.42-1.4l4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.42 0Z"})}),Cd=({text:e="Next",html:t,href:n="#",className:r,element:i="a",onClick:a,...o})=>{const l=ve("nhsuk-back-link",r),c=ve("nhsuk-back-link__link"),u=()=>s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t?s.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,s.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:s.jsx("path",{d:"M15.5 12c0 .3-.1.5-.3.7l-5 5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4L13.1 12 8.8 7.7c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l5 5c.2.2.3.4.3.7z"})})]});return s.jsx("div",{className:l,children:i==="button"?s.jsx("button",{className:c,type:"button",onClick:a,...o,children:u()}):s.jsx("a",{className:c,href:n,...o,children:u()})})};Cd.displayName="ForwardLink";const fx=({show:e,label:t,contentHeaderLevel:n,detailActive:r,headerContext:i,backLabel:a,nextLabel:o,onBack:l,onForward:c,renderContentHeader:u,item:d,contentSubheader:f,tertiaryInlineActive:p})=>{if(!e||!d)return null;const m=`h${n}`,y=t?W.createElement(m,{style:{marginLeft:r?32:0,marginRight:r?32:0}},t):null,h=r?s.jsx(sa,{element:"button",text:a,style:{marginRight:16},onClick:l}):void 0,g=p?void 0:s.jsx(Cd,{element:"button",text:o,onClick:c});if(u)return s.jsx("div",{className:"nhs-navigation-split-view__header",children:u({item:d,detailActive:r,context:i,backLink:h,defaultHeading:y})});const k=d&&f?typeof f=="function"?f(d):f:null;return s.jsx("div",{className:"nhs-navigation-split-view__header",children:s.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[h,s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:[y,k&&s.jsx("div",{className:"nhs-navigation-split-view__subheader",children:k})]})]}),g&&s.jsx("div",{style:{marginLeft:"auto"},children:g})]})})};function hx({layout:e,items:t,getId:n,selectedId:r,isLoading:i,emptyState:a,renderItemContent:o,onSelect:l,orientation:c,initialFocus:u,onFocusChange:d,justSelectedId:f,listRef:p,onKeyDownList:m,navigationInstructions:y,controlledFocusedIndex:h}){const[g,k]=W.useState(()=>u==="first"?0:-1),S=W.useRef(0);W.useEffect(()=>{if(typeof h=="number"||g<0||!p?.current)return;const N=Array.from(p.current.querySelectorAll("[data-nav-item]"))[g];if(N){document.activeElement!==N&&N.focus(),S.current=g;const w=t[g];d?.(w?n(w):void 0,w,g)}},[h,g,t,d,n,p]);const j=_=>{if(m)return m(_);const N=c==="vertical"?"ArrowDown":"ArrowRight",w=c==="vertical"?"ArrowUp":"ArrowLeft";if(_.key===N)_.preventDefault(),k(v=>Math.min(t.length-1,v+1));else if(_.key===w)_.preventDefault(),k(v=>Math.max(0,v-1));else if(_.key==="Home")_.preventDefault(),k(0);else if(_.key==="End")_.preventDefault(),k(t.length-1);else if(_.key==="Enter"||_.key===" "){_.preventDefault();const v=t[g];v&&!v.disabled&&l(n(v),v,g)}};if(e==="cards")return s.jsxs("ul",{className:"nhs-navigation-split-view__cards",role:"listbox","aria-activedescendant":r?String(r):void 0,children:[t.map((_,N)=>{const w=n(_),v=w===r;return s.jsx("li",{className:"nhs-navigation-split-view__card-item",role:"option","aria-selected":v,children:s.jsxs("button",{id:String(w),type:"button",className:"nhs-navigation-split-view__card","data-selected":v||void 0,"data-disabled":_.disabled||void 0,disabled:_.disabled,onClick:()=>!_.disabled&&l(w,_,N),children:[_.icon&&s.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:_.icon}),s.jsx("span",{className:"nhs-navigation-split-view__item-label",children:_.label}),_.description&&s.jsx("span",{className:"nhs-navigation-split-view__item-description",children:_.description}),o?.(_),_.badge!==void 0&&s.jsx("span",{className:"nhs-navigation-split-view__badge",children:_.badge})]})},String(w))}),t.length===0&&!i&&s.jsx("li",{className:"nhs-navigation-split-view__card-item","aria-disabled":"true",children:a||s.jsx("div",{style:{padding:16},children:"No items"})})]});const M="nsv-nav-instructions",b=W.useMemo(()=>W.memo(({item:_,idx:N,selected:w,focused:v})=>{const C=n(_),D=_.disabled?{"aria-disabled":!0,tabIndex:-1}:{tabIndex:v?0:-1,onClick:()=>{S.current=N,l(C,_,N)},onKeyDown:I=>{(I.key==="Enter"||I.key===" ")&&(I.preventDefault(),S.current=N,l(C,_,N))}};return s.jsxs("li",{id:String(C),"data-nav-item":!0,className:"nhs-navigation-split-view__list-item nhs-navigation-split-view__item-button",role:"option","aria-selected":w,"aria-current":w?"true":void 0,"data-selected":w||void 0,"data-disabled":_.disabled||void 0,...D,children:[_.icon&&s.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:_.icon}),s.jsxs("span",{className:"nhs-navigation-split-view__item-content",children:[s.jsx("span",{className:"nhs-navigation-split-view__item-label",children:_.label}),_.description&&s.jsx("span",{className:"nhs-navigation-split-view__item-description",children:_.description}),o?.(_)]}),_.badge!==void 0&&s.jsx("span",{className:"nhs-navigation-split-view__badge",children:_.badge})]})}),[n,l,o]);return s.jsxs(s.Fragment,{children:[s.jsxs("ul",{ref:p,className:"nhs-navigation-split-view__list",onKeyDown:j,role:"listbox","aria-label":"Navigation items","aria-describedby":M,"aria-activedescendant":r?String(r):void 0,children:[t.map((_,N)=>s.jsx(b,{item:_,idx:N,selected:n(_)===r,focused:(()=>{const w=typeof h=="number"?h:g;return N===w||w===-1&&N===0&&u==="first"})(),"data-just-selected":n(_)===f?"true":void 0},String(n(_)))),t.length===0&&!i&&s.jsx("li",{className:"nhs-navigation-split-view__list-item","aria-disabled":"true",children:a||s.jsx("div",{style:{padding:16},children:"No items"})})]}),s.jsx("div",{id:M,style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:y||"Use arrow keys to navigate, Enter to open."})]})}const kr=Object.freeze({small:320,smallMax:767,medium:768,large:1025,xlarge:1200,xxlarge:1440});function Nd(){return typeof window>"u"?kr.small:window.innerWidth||document.documentElement.clientWidth||0}function Pa(){const[e,t]=W.useState(Nd());W.useEffect(()=>{if(typeof window>"u")return;const a=()=>t(Nd());return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const n=W.useCallback(a=>e>=kr[a],[e]),r=W.useCallback(a=>e<kr[a],[e]),i=W.useCallback((a,o)=>e>=kr[a]&&e<kr[o],[e]);return{width:e,up:n,down:r,between:i,values:kr}}function mx(e){const{width:t,values:n}=Pa();let r=e.base;const i=["small","medium","large","xlarge","xxlarge"];for(const a of i){const o=n[a];t>=o&&e[a]!==void 0&&(r=e[a])}return r}function px(e,t,n){const{up:r}=Pa(),[i,a]=W.useState(!1);W.useEffect(()=>a(!0),[]);const o=i&&r("medium"),l=i&&r("xlarge");let c;return e?c=e:o?c="two-column":c="list",!e&&t&&n&&l&&(c="three-column"),{effectiveLayout:c,hydrated:i,isAtLeastMedium:o,isAtLeastXlarge:l}}function gx(e){const{enabled:t,isAtLeastMedium:n,initiallyCollapsed:r,persist:i,storageKey:a,urlParam:o,onChange:l}=e,c=W.useMemo(()=>{if(i&&(i==="url"||i==="both")&&typeof window<"u"){const m=new URLSearchParams(window.location.search).get(o);if(m==="1")return!0;if(m==="0")return!1}if(i&&(i==="localStorage"||i==="both")&&typeof window<"u")try{const p=window.localStorage.getItem(a);if(p==="1")return!0;if(p==="0")return!1}catch{}return r},[i,r,a,o]),[u,d]=W.useState(c);W.useEffect(()=>{l?.(u)},[u,l]);const f=W.useCallback(()=>{t&&n&&d(p=>!p)},[t,n]);return W.useEffect(()=>{if(!(!i||typeof window>"u")){if(i==="localStorage"||i==="both")try{window.localStorage.setItem(a,u?"1":"0")}catch{}if(i==="url"||i==="both"){const p=new URLSearchParams(window.location.search);p.set(o,u?"1":"0");const m=`${window.location.pathname}?${p.toString()}${window.location.hash}`;window.history.replaceState(null,"",m)}}},[u,i,a,o]),{collapsed:u,toggle:f}}function Md(e){const{items:t,selectedId:n,defaultSelectedId:r,onSelectionChange:i,renderItemContent:a,renderContent:o,renderSecondaryContent:l,forceLayout:c,animated:u=!0,backLabel:d="Back",nextLabel:f="Next",isLoading:p=!1,emptyState:m,a11y:y,className:h,getId:g=ye=>ye.id,orientation:k="vertical",autoEnableThirdColumn:S=!0,onDrillChange:j,navigationInstructions:M="Use arrow keys to navigate, Enter to open.",initialFocus:b="first",skipFocusOnSelect:_=!1,skipAnnouncements:N=!1,onFocusChange:w,syncUrl:v=!1,urlParamSelected:C="nsv",urlParamDrill:D="nsvDrill",urlSyncDebounceMs:I=0,lazySecondary:B=!1,navFooter:E,collapsibleNav:A=!1,navInitiallyCollapsed:L=!1,onNavCollapseChange:z,collapseToggleLabelShow:ae="Show navigation",collapseToggleLabelHide:q="Hide navigation",collapseToggleIconShow:O,collapseToggleIconHide:ne,persistNavCollapsed:Y,navCollapsedStorageKey:K="nsvCollapsed",navCollapsedUrlParam:X="nsvCollapsed",autoContentHeader:J,contentHeaderLevel:pe=2,renderContentHeader:ie,contentSubheader:se,secondarySubheader:te}=e,{effectiveLayout:re,hydrated:de,isAtLeastMedium:V}=px(c,S,!!l),ce=kd({enabled:v,paramSelected:C,paramDrill:D}),[oe,ge]=W.useState(()=>ce.selectedId!==void 0?ce.selectedId:r),le=n!==void 0?n:oe,me=t.find(ye=>g(ye)===le),[Ie,Fe]=W.useState(void 0);W.useEffect(()=>{if(le===void 0)return;Fe(le);const ye=setTimeout(()=>Fe(void 0),220);return()=>clearTimeout(ye)},[le]);const ke=W.useRef(null),R=W.useRef(null),T=W.useRef(null),F=W.useRef(null),[G,P]=W.useState(()=>({contentIndex:0,secondaryIndex:0})),[H,U]=W.useState(()=>"nav"),[Z,Q]=W.useState(0),ee=()=>[F.current,R.current,T.current].filter(Boolean),fe=ye=>{const Ce=ee(),Ae=Math.max(0,Math.min(ye,Ce.length-1));he(Ce[Ae]),Q(Ae)},ue=W.useCallback(ye=>ye?Array.from(ye.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(Ae=>!Ae.hasAttribute("disabled")&&Ae.tabIndex!==-1):[],[]),he=W.useCallback(ye=>{if(ye)try{ye.focus({preventScroll:!0})}catch{ye.focus()}},[]),xe=W.useCallback(ye=>{const Ce=ue(R.current);if(!Ce.length){he(R.current);return}const Ae=Math.max(0,Math.min(ye,Ce.length-1)),Oe=Ce[Ae];Oe.focus(),setTimeout(()=>{document.activeElement!==Oe&&(Oe.focus(),setTimeout(()=>{document.activeElement!==Oe&&Oe.click()},10))},10),P(et=>({...et,contentIndex:Ae}));const Nt=et=>{et.key==="Escape"&&(et.preventDefault(),et.stopPropagation(),he(R.current),Oe.removeEventListener("keydown",Nt))};Ce.forEach(et=>{const ut=et._escapeHandler;ut&&et.removeEventListener("keydown",ut)}),Oe._escapeHandler=Nt,Oe.addEventListener("keydown",Nt)},[ue]),be=W.useCallback(ye=>{const Ce=ue(T.current);if(!Ce.length){he(T.current);return}const Ae=Math.max(0,Math.min(ye,Ce.length-1)),Oe=Ce[Ae];Oe.focus(),setTimeout(()=>{document.activeElement!==Oe&&(Oe.focus(),setTimeout(()=>{document.activeElement!==Oe&&Oe.click()},10))},10),P(et=>({...et,secondaryIndex:Ae}));const Nt=et=>{et.key==="Escape"&&(et.preventDefault(),et.stopPropagation(),he(T.current),Oe.removeEventListener("keydown",Nt))};Ce.forEach(et=>{const ut=et._escapeHandler;ut&&et.removeEventListener("keydown",ut)}),Oe._escapeHandler=Nt,Oe.addEventListener("keydown",Nt)},[ue]),Pe=ye=>{if(ye.defaultPrevented)return;const Ce=ye.key,Ae=ye.target,Oe=!!_e.current&&_e.current.contains(Ae),Nt=!!R.current&&R.current.contains(Ae),et=!!T.current&&T.current.contains(Ae),ut=!!T.current,Ls=Ae===F.current||Ae===R.current||Ae===T.current,Ac=Te&&(re==="list"||re==="cards"),Ps=Nt&&!!Ae.closest(".nhs-navigation-split-view__header");if(H==="containers"&&Ls){if(Ce==="ArrowRight"){ye.preventDefault();const Be=ee(),tt=Math.min(Be.length-1,Z+1);fe(tt);return}if(Ce==="ArrowLeft"){ye.preventDefault();const Be=Math.max(0,Z-1);fe(Be);return}if(Ce==="Home"){ye.preventDefault(),fe(0);return}if(Ce==="End"){ye.preventDefault(),fe(ee().length-1);return}if(Ce==="Enter"||Ce===" "){if(ye.preventDefault(),Ae===F.current){if(U("nav"),_e.current){const Be=Array.from(_e.current.querySelectorAll("[data-nav-item]"));(Be[ze>=0?ze:0]||Be[0])?.focus()}}else Ae===R.current?(U("content"),xe(G.contentIndex)):Ae===T.current&&(U("secondary"),be(G.secondaryIndex));return}return}if(Ce==="Escape"){if(H==="content"||H==="secondary"){if(Nt||et){if(ye.preventDefault(),U("nav"),_e.current){const tt=Array.from(_e.current.querySelectorAll("[data-nav-item]"))[ze>=0?ze:0];setTimeout(()=>tt?.focus(),10)}}else if((Ae===R.current||Ae===T.current)&&(ye.preventDefault(),U("nav"),_e.current)){const tt=Array.from(_e.current.querySelectorAll("[data-nav-item]"))[ze>=0?ze:0];setTimeout(()=>tt?.focus(),10)}}return}if(Ce==="Enter"||Ce===" "){if(Ae.matches('button, a, input, select, textarea, [role="button"], [role="link"], [role="tab"]'))return;if(Ae===R.current&&H==="content"){ye.preventDefault(),ye.stopPropagation(),ue(R.current).length>0&&setTimeout(()=>{xe(G.contentIndex)},50);return}if(Ae===T.current&&H==="secondary"){ye.preventDefault(),ye.stopPropagation(),ue(T.current).length>0&&setTimeout(()=>{be(G.secondaryIndex)},50);return}}if(Ac&&Ps&&!Ls&&(Ce==="ArrowRight"||Ce==="ArrowLeft")){const Be=ue(R.current).filter(tt=>tt.closest(".nhs-navigation-split-view__header"));if(Be.length>1){const tt=Be.indexOf(Ae);if(tt>=0){const W0=(tt+(Ce==="ArrowRight"?1:-1)+Be.length)%Be.length;ye.preventDefault(),Be[W0].focus();return}}}if(Ce==="ArrowRight"){if(Oe||H==="nav"){ye.preventDefault(),U("content"),setTimeout(()=>he(R.current),10);return}if(Nt||H==="content"){ut&&(ye.preventDefault(),U("secondary"),setTimeout(()=>he(T.current),10));return}}if(Ce==="ArrowLeft"){if(et||H==="secondary"){ye.preventDefault(),U("content"),setTimeout(()=>he(R.current),10);return}if(Nt||H==="content"){if(ye.preventDefault(),U("nav"),_e.current){const tt=Array.from(_e.current.querySelectorAll("[data-nav-item]"))[ze>=0?ze:0];setTimeout(()=>he(tt),10)}return}}if(Ce==="Home"&&!Oe&&(ye.preventDefault(),U("nav"),_e.current)){const Be=Array.from(_e.current.querySelectorAll("[data-nav-item]")),tt=Be[ze>=0?ze:0]||Be[0];setTimeout(()=>he(tt),10)}if(Ce==="End"){const Be=ut?T.current:R.current;Be&&!Be.contains(Ae)&&(ye.preventDefault(),ut?(U("secondary"),setTimeout(()=>he(T.current),10)):(U("content"),setTimeout(()=>he(R.current),10)))}if(Ce==="ArrowDown"||Ce==="ArrowUp"){if(Ae===R.current&&Ce==="ArrowDown"){ye.preventDefault(),ue(R.current).length>0&&xe(0);return}if(Ae===T.current&&Ce==="ArrowDown"){ye.preventDefault(),ue(T.current).length>0&&be(0);return}if(Nt){const Be=ue(R.current);if(Be.length){ye.preventDefault();const tt=Ce==="ArrowDown"?1:-1,bn=(G.contentIndex+tt+Be.length)%Be.length;xe(bn)}}else if(et){const Be=ue(T.current);if(Be.length){ye.preventDefault();const tt=Ce==="ArrowDown"?1:-1,bn=(G.secondaryIndex+tt+Be.length)%Be.length;be(bn)}}}},Te=!!me&&(re==="list"||re==="cards"),Ue=W.useMemo(()=>J===void 0?{mobile:!0,tablet:!1,desktop:!1}:J===!0?{mobile:!0,tablet:!0,desktop:!0}:J===!1?{mobile:!1,tablet:!1,desktop:!1}:{mobile:J.mobile!==void 0?J.mobile:!0,tablet:J.tablet||!1,desktop:J.desktop||!1},[J]),Ke=de&&V&&re!=="three-column",ht=de&&re==="three-column",Je=!!l,Ve=re==="three-column",[We,At]=W.useState(!1);W.useEffect(()=>{Ve&&We&&At(!1)},[Ve,We]),W.useEffect(()=>{We&&!Ve&&(U("secondary"),Q(2),setTimeout(()=>{he(T.current)},50))},[We,Ve]),W.useEffect(()=>{!We&&!Ve&&H==="secondary"&&(U("content"),Q(1),setTimeout(()=>{he(R.current)},50))},[We,Ve,H]);const Gn=!!me&&(Te&&Ue.mobile||!Te&&Ke&&Ue.tablet||!Te&&ht&&Ue.desktop)||Je&&!Ve,ra=Te?"mobile":Ke?"tablet":"desktop";W.useEffect(()=>{if(!v)return;const ye=re==="three-column";let Ce=!1;const Ae=()=>{Ce||(ce.selectedId!==le&&ce.setSelectedId(le),ce.drilledIn!==ye&&ce.setDrilledIn(ye))};if(I&&I>0){const Oe=setTimeout(Ae,I);return()=>{Ce=!0,clearTimeout(Oe)}}else Ae()},[v,ce,le,re,I]),W.useEffect(()=>{if(!v)return;const ye=()=>{const Ce=new URLSearchParams(window.location.search),Ae=Ce.get(C);Ce.get(D),ge(Ae===null?void 0:Ae)};return window.addEventListener("popstate",ye),()=>window.removeEventListener("popstate",ye)},[v,C,D,c,l]);const pr=W.useRef(0),Me=W.useRef(null),$e=W.useCallback((ye,Ce)=>{ye!==le&&(n===void 0&&ge(ye),i?.(ye,Ce))},[n,i,le]);W.useEffect(()=>{if(!_&&Te&&R.current){const ye=setTimeout(()=>he(R.current),30);return()=>clearTimeout(ye)}},[Te,le,_]);const _e=W.useRef(null),[ze,mt]=W.useState(()=>b==="first"?0:-1);W.useEffect(()=>{if(ze<0||!_e.current)return;const Ce=Array.from(_e.current.querySelectorAll("[data-nav-item]"))[ze];if(Ce){document.activeElement!==Ce&&he(Ce),pr.current=ze;const Ae=t[ze];w?.(Ae?g(Ae):void 0,Ae,ze)}},[ze,t,w,g]);const Dn=ye=>{const Ce=k==="vertical"?"ArrowDown":"ArrowRight",Ae=k==="vertical"?"ArrowUp":"ArrowLeft";if(ye.key==="ArrowRight"&&k==="vertical"){ye.preventDefault(),We?(U("secondary"),setTimeout(()=>{he(T.current)},10)):(U("content"),setTimeout(()=>{he(R.current)},10));return}if(ye.key===Ce)ye.preventDefault(),mt(Oe=>Math.min(t.length-1,Oe+1));else if(ye.key===Ae)ye.preventDefault(),mt(Oe=>Math.max(0,Oe-1));else if(ye.key==="Home")ye.preventDefault(),mt(0);else if(ye.key==="End")ye.preventDefault(),mt(t.length-1);else if(ye.key==="Enter"||ye.key===" "){ye.preventDefault();const Oe=t[ze];Oe&&!Oe.disabled&&$e(g(Oe),Oe)}else if(ye.key.length===1&&/[a-z0-9]/i.test(ye.key)){Me.current||(Me.current={buffer:"",last:0});const Oe=Date.now(),Nt=700,et=ye.key.toLowerCase();Oe-Me.current.last>Nt?Me.current.buffer=et:Me.current.buffer+=et,Me.current.last=Oe;let ut=Me.current.buffer;const Ls=ut.split("").every(bn=>bn===ut[0]),Ac=t.map(bn=>String(bn.label||"").toLowerCase());let Ps=0;ze>=0&&(Ps=(ze+1)%t.length);let Be;const tt=(bn,W0)=>{const G0=t.length;for(let Ec=0;Ec<G0;Ec++){const Fc=(Ps+Ec)%G0;if(!t[Fc].disabled&&Ac[Fc].startsWith(bn))return Fc}};Ls&&ut.length>1?Be=tt(ut[0]):(Be=tt(ut),Be===void 0&&ut.length>1&&(Be=tt(ut[ut.length-1]),Be!==void 0&&Me.current&&(Me.current.buffer=ut[ut.length-1]))),Be!==void 0&&mt(Be)}},{collapsed:Ee,toggle:yn}=gx({enabled:A,isAtLeastMedium:V,initiallyCollapsed:L,persist:Y,storageKey:K,urlParam:X,onChange:z}),ia=["nhs-navigation-split-view",u?"nhs-navigation-split-view--animated":"",Te?"nhs-navigation-split-view--detail-active":"",re==="three-column"?"nhs-navigation-split-view--three-column":"",A&&V&&Ee?"nhs-navigation-split-view--nav-collapsed":"",h].filter(Boolean).join(" "),Lc=W.useRef(null);W.useEffect(()=>{if(!N&&Lc.current){const ye=me?`Selected ${me.label}`:"Selection cleared";Lc.current.textContent=ye}},[me,N]),W.useEffect(()=>{if(!Te&&le==null&&_e.current){const Ce=_e.current.querySelectorAll("[data-nav-item]")[pr.current];he(Ce)}},[Te,le]);const Vn=re==="three-column",[Pc,yS]=W.useState(!1);W.useEffect(()=>{Vn&&!Pc&&yS(!0)},[Vn,Pc]);const U0=W.useRef(Vn);return W.useEffect(()=>{U0.current!==Vn&&(j?.(Vn),U0.current=Vn)},[Vn,j]),s.jsx("div",{ref:ke,className:ia,"aria-label":y?.rootLabel,"data-layout":re,onKeyDown:Pe,children:s.jsxs("div",{className:"nhs-navigation-split-view__body",children:[s.jsxs("div",{className:"nhs-navigation-split-view__panes","data-active-detail":Te||void 0,style:{transform:Te?"translateX(-100%)":void 0},children:[s.jsxs("div",{ref:F,className:"nhs-navigation-split-view__nav-pane",role:"navigation","aria-label":y?.navigationLabel||"Items","data-collapsed":Ee||void 0,tabIndex:0,children:[A&&V&&s.jsx("div",{className:"nhs-navigation-split-view__nav-collapse",children:s.jsx("button",{type:"button",onClick:yn,className:"nhs-navigation-split-view__nav-collapse-btn","aria-label":Ee?ae:q,title:Ee?ae:q,children:Ee?O||s.jsx(dx,{}):ne||s.jsx(ux,{})})}),s.jsx("div",{className:"nhs-navigation-split-view__nav-scroll",children:s.jsx(hx,{layout:re==="cards"?"cards":"list",items:t,getId:g,selectedId:le,isLoading:p,emptyState:m,renderItemContent:a,onSelect:(ye,Ce,Ae)=>{pr.current=Ae,$e(ye,Ce)},orientation:k,initialFocus:b,onFocusChange:w,justSelectedId:Ie,listRef:_e,onKeyDownList:Dn,navigationInstructions:M,controlledFocusedIndex:ze})}),E&&s.jsx("div",{className:"nhs-navigation-split-view__nav-footer",role:"contentinfo",children:E})]}),s.jsxs("div",{ref:R,className:"nhs-navigation-split-view__content-pane",role:"region","aria-label":y?.contentLabel||"Content","data-has-selection":!!me||void 0,tabIndex:0,style:{display:We&&!Ve?"none":void 0},children:[Gn&&s.jsx(fx,{show:Gn,label:me?me.label:void 0,contentHeaderLevel:pe,detailActive:Te,headerContext:ra,backLabel:d,nextLabel:f,onBack:()=>$e(void 0,void 0),onForward:()=>At(!0),renderContentHeader:ie,item:me,contentSubheader:se,tertiaryInlineActive:We}),s.jsx("div",{className:"nhs-navigation-split-view__content-inner",style:{padding:32,flex:1},children:o(me)})]}),re==="three-column"&&(!B||Pc)||We&&!Ve?s.jsx("div",{ref:T,className:"nhs-navigation-split-view__secondary-pane",role:"region","aria-label":y?.secondaryContentLabel||"Secondary",tabIndex:0,children:s.jsxs("div",{className:"nhs-navigation-split-view__secondary-inner",style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[We&&!Ve&&s.jsx("div",{className:"nhs-navigation-split-view__header",children:s.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[s.jsx(sa,{element:"button",text:d,style:{marginRight:16},onClick:()=>At(!1)}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:s.jsx("h2",{style:{marginLeft:0,marginRight:0},children:me&&typeof me=="object"&&"label"in me?me.label:String(me)})})]})})}),me&&te&&s.jsx("div",{className:"nhs-navigation-split-view__secondary-header",style:{padding:"16px 32px",borderBottom:"1px solid var(--nsplit-divider)"},children:typeof te=="function"?te(me):te}),s.jsx("div",{style:{padding:32,flex:1,minWidth:0},children:l?.(me)})]})}):null]}),s.jsx("div",{ref:Lc,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"}}),s.jsx("div",{"aria-live":"polite",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:Vn?"Expanded to three column layout":"In two column layout"})]})})}Md.displayName="NavigationSplitView";function yx({steps:e,currentIndex:t,onNavigate:n,renderLabel:r,ariaLabel:i="Breadcrumbs",className:a}){return s.jsx("nav",{"aria-label":i,className:a,children:s.jsx("ol",{className:"nhsfdp-breadcrumbs",role:"list",children:e.map((o,l)=>{const c=l===t,u=r?r(o,l):o.label??`Step ${l+1}`;return s.jsx("li",{className:c?"is-current":void 0,children:c?s.jsx("span",{"aria-current":"page",children:u}):s.jsx("button",{type:"button",className:"nhsfdp-breadcrumb",onClick:()=>n?.(l),children:u})},l)})})})}function bx({steps:e,currentIndex:t,onNavigate:n,renderCard:r,className:i,ariaLabel:a="Steps"}){const o=W.useRef(null);return W.useEffect(()=>{const l=o.current;if(!l)return;l.children[t]?.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[t]),s.jsx("div",{className:i,"aria-label":a,role:"region",children:s.jsx("div",{ref:o,className:"nhsfdp-cards-scroller",tabIndex:0,children:e.map((l,c)=>s.jsx("div",{className:"nhsfdp-card"+(c===t?" is-current":""),role:"group","aria-roledescription":"step","aria-label":(l.label??`Step ${c+1}`).toString(),onClick:()=>n?.(c),children:r(l,c,c===t)},c))})})}function vx(e){const{up:t}=Pa(),[n,r]=W.useState(!1);W.useEffect(()=>r(!0),[]);const i=n&&t("medium")&&!t("xlarge"),a=n&&t("xlarge"),o=a?"desktop":i?"tablet":"mobile",l=W.useMemo(()=>{if(!e.step||!e.layoutForStep)return o==="mobile"?{panes:1,showPrimaryNav:!1,showSecondaryNav:!1}:o==="tablet"?{panes:2,showPrimaryNav:!0,showSecondaryNav:!1}:{panes:3,showPrimaryNav:!0,showSecondaryNav:!0};try{return e.layoutForStep({step:e.step,index:e.index,breakpoint:o})||{}}catch{return{}}},[e.step,e.index,e.layoutForStep,o]);return{hydrated:n,breakpoint:o,isTablet:i,isDesktop:a,paneConfig:l}}function xx(e){const{steps:t,currentStepId:n,defaultStepId:r,onStepChange:i,layoutForStep:a,renderStepCard:o,renderStepContent:l,renderSecondaryContent:c,renderSecondaryNav:u,renderBreadcrumbs:d,className:f,getId:p=C=>C.id}=e,[m,y]=$.useState(r??(t[0]?p(t[0]):void 0)),h=n??m,g=t.findIndex(C=>p(C)===h),k=g>=0?t[g]:t[0],S=C=>{n===void 0&&y(C);const D=t.find(I=>p(I)===C);D&&i&&i(C,D)},{hydrated:j,breakpoint:M,paneConfig:b}=vx({step:k,index:g,layoutForStep:a}),_=d?d({steps:t,current:k,onNavigate:S}):s.jsx(yx,{steps:t,currentIndex:Math.max(0,g),onNavigate:C=>S(p(t[C]))}),N=()=>s.jsx("ul",{className:"nhsfdp-primary-nav",role:"list",children:t.map((C,D)=>{const I=p(C),B=D===g;return s.jsx("li",{children:s.jsx("button",{type:"button",className:"nhsfdp-primary-nav__item"+(B?" is-current":""),"aria-current":B?"step":void 0,onClick:()=>S(I),children:C.label})},String(I))})}),w=()=>s.jsxs("div",{className:"nhsfdp-workflow-mobile",children:[_,s.jsx(bx,{steps:t,currentIndex:Math.max(0,g),onNavigate:C=>S(p(t[C])),renderCard:C=>o?o(C):l(C)})]}),v=C=>s.jsxs("div",{className:"nhsfdp-workflow-grid panes-"+(C.panes??2),children:[_,s.jsxs("div",{className:"nhsfdp-workflow-body",children:[C.showPrimaryNav&&s.jsx("aside",{className:"nhsfdp-pane primary-nav","aria-label":"Primary navigation",children:s.jsx(N,{})}),s.jsx("main",{className:"nhsfdp-pane content","aria-live":"polite",children:l(k)}),C.showSecondaryNav&&(u||c)&&s.jsxs("aside",{className:"nhsfdp-pane secondary-nav","aria-label":"Secondary navigation",children:[u?.(k),c?.(k)]})]})]});return j?M==="mobile"||(b.panes??1)===1?s.jsx("div",{className:"nhsfdp-workflow "+(f??""),children:w()}):s.jsx("div",{className:"nhsfdp-workflow "+(f??""),children:v(b)}):s.jsxs("div",{className:"nhsfdp-workflow "+(f??""),children:[_,s.jsx("div",{className:"nhsfdp-workflow-body",children:s.jsx("main",{className:"nhsfdp-pane content",children:k?l(k):null})})]})}const _x=typeof window<"u"&&window.document?W.useLayoutEffect:W.useEffect,jd=(e,t,n,r)=>e==null||Number.isNaN(e)?r:Math.min(n,Math.max(t,e)),wx=({item:e,maxLines:t,enableDrilldown:n,onExpand:r,isActive:i,topLaneIndex:a})=>{const{ariaLabel:o}=e,l=`${e._pxLeft}px`,c=`${e._pxWidth}px`,u=`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${a})`,d=Math.floor(e._startFraction)+2,f=Math.max(1,Math.round(e._spanColumns)),p=n&&e.childItems&&e.childItems.length>0,m=h=>{p&&(h.preventDefault(),r?.(e))},y=p?{role:"button",tabIndex:0,"aria-haspopup":"dialog","aria-expanded":i||!1,onClick:m,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&m(h),h.key==="Escape"&&i&&m(h)}}:{};return s.jsxs("div",{className:ve("nhsuk-product-roadmap__item",p&&"nhsuk-product-roadmap__item--expandable",i&&"nhsuk-product-roadmap__item--active"),style:{left:l,width:c,top:u,"--item-height":t},role:"gridcell","aria-label":o,"aria-colindex":d,"aria-colspan":f,...y,children:[s.jsx("div",{className:"nhsuk-product-roadmap__item-bg","aria-hidden":"true"}),s.jsxs("div",{className:"nhsuk-product-roadmap__item-content",children:[s.jsx("span",{className:"nhsuk-product-roadmap__item-title",children:e.title}),p&&s.jsx("span",{className:ve("nhsuk-product-roadmap__item-expander",i&&"nhsuk-product-roadmap__item-expander--open"),"aria-hidden":"true"})]})]})},Td=$.memo(({dateHeadings:e,categories:t,columnWidthPx:n=400,itemMaxLines:r=2,className:i,ariaLabel:a="Product roadmap",enableDrilldown:o=!1,onToggleItem:l,drilldownMode:c="overlay",...u})=>{const[d,f]=$.useState(()=>new Set),[p,m]=$.useState(()=>new Set),y=$.useRef(new Set),h=$.useCallback(I=>d.has(I),[d]),g=$.useCallback(I=>{f(B=>{const E=new Set(B);return E.has(I.id)?(E.delete(I.id),m(A=>{const L=new Set(A);return L.add(I.id),L}),setTimeout(()=>m(A=>{const L=new Set(A);return L.delete(I.id),L}),240),l?.(I.id,!1)):(E.add(I.id),l?.(I.id,!0)),E})},[l]);_x(()=>{if(c!=="inline"||!o||typeof document>"u")return;const I=[];if(d.forEach(L=>{y.current.has(L)||I.push(L)}),y.current=new Set(d),!I.length)return;const B=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1,E=I.map(L=>`.nhsuk-product-roadmap__inline-children[data-parent="${L}"] .nhsuk-product-roadmap__inline-child`).join(","),A=Array.from(document.querySelectorAll(E));if(A.length){if(B){A.forEach(L=>{L.style.opacity="1",L.style.transform="translateY(0)"});return}Promise.resolve().then(()=>gS).then(L=>{(L.gsap||L.default||L).to(A,{opacity:1,y:0,duration:.32,ease:"power2.out",stagger:.05})}).catch(()=>{A.forEach(L=>{L.style.opacity="1",L.style.transform="translateY(0)"})})}},[d,c,o]);const k=$.useCallback(()=>{d.size&&f(new Set)},[d]),S=ve("nhsuk-product-roadmap",i),j=jd(n,120,1200,400),M=jd(r,1,6,2),b=$.useMemo(()=>e.map(I=>new Date(I+" 01")),[e]),_=$.useMemo(()=>{if(b.length===0){const E=new Date;return[E,E]}const I=new Date(b[0]),B=Qr.offset(new Date(b[b.length-1]),1);return[I,B]},[b]),N=$.useMemo(()=>ho().domain(_).range([0,b.length*j]),[_,b.length,j]),w=$.useCallback(I=>{if(I.startDate){const q=new Date(I.startDate),O=new Date(I.endDate??I.startDate);O<q&&O.setTime(q.getTime());const ne=N(q),Y=Qr.offset(new Date(O),1);let K=N(Y);Number.isFinite(K)||(K=ne+j);const X=Math.max(j*.25,K-ne),J=ne/j,pe=X/j;return{...I,_pxLeft:ne,_pxWidth:X,_startFraction:J,_spanColumns:pe}}const B=I.date??1,E=I.dateOffset??0,A=I.length??1,L=I.partialLength??1,z=B-1+E,ae=A-1+L;return{...I,_pxLeft:z*j,_pxWidth:ae*j,_startFraction:z,_spanColumns:ae}},[N,j]),v=$.useMemo(()=>t.map(I=>{const E=I.roadmapItems.map(L=>{const z=!L.childItems&&L.children?{...L,childItems:L.children}:{...L};return w(z)}).sort((L,z)=>L._pxLeft!==z._pxLeft?L._pxLeft-z._pxLeft:z._pxWidth-L._pxWidth),A=[];return E.forEach(L=>{const z=L._pxLeft,ae=L._pxLeft+L._pxWidth;let q=A.findIndex(O=>O<=z);q===-1&&(q=A.length,A.push(0)),A[q]=ae,L.verticalPosition=q+1}),{...I,roadmapItems:E,_laneCount:A.length}}),[t,w]),C=$.useMemo(()=>v.map(I=>I._laneCount||1),[v]),D=$.useMemo(()=>`var(--category-width) ${e.map(()=>"var(--column-width)").join(" ")}`,[e]);return s.jsxs("div",{className:S,style:{"--column-width":`${j}px`,gridTemplateColumns:D},role:"grid","aria-label":a,"aria-colcount":e.length+1,"aria-rowcount":v.length+1,...u,children:[s.jsxs("div",{className:"nhsuk-product-roadmap__header-row",role:"row","aria-rowindex":1,children:[s.jsx("div",{className:"nhsuk-product-roadmap__header-cell",role:"columnheader","aria-colindex":1,children:s.jsx("span",{className:"nhsuk-visually-hidden",children:"Category"})}),e.map((I,B)=>s.jsx("div",{className:"nhsuk-product-roadmap__date-heading",role:"columnheader","aria-colindex":B+2,children:I},`${I}-${B}`))]}),v.map((I,B)=>{const E=B+2,A=C[B];let L,z=0,ae=[];o&&c==="inline"&&(ae=I.roadmapItems.filter(Y=>h(Y.id)&&Y.childItems&&Y.childItems.length).map(Y=>({id:Y.id,lane:Y.verticalPosition||1,count:Y.childItems.length})).sort((Y,K)=>Y.lane-K.lane),z=ae.reduce((Y,K)=>Y+K.count,0));const q=A+z;L=`calc((${q} * var(--roadmap-item-block-height)) + (max(0, ${q} - 1) * var(--roadmap-row-gap)))`;const O={};let ne=0;return ae.forEach(Y=>{ne+=Y.count,O[Y.lane+1]=ne}),s.jsxs("div",{className:"nhsuk-product-roadmap__row",role:"row","aria-rowindex":E,children:[s.jsx("div",{className:"nhsuk-product-roadmap__category-cell",role:"rowheader","aria-colindex":1,children:I.heading}),s.jsx("div",{className:"nhsuk-product-roadmap__items-row",style:{gridColumn:`2 / span ${e.length}`,height:L},children:s.jsx("div",{className:"nhsuk-product-roadmap__items-layer",children:I.roadmapItems.map((Y,K)=>{const X=(Y.verticalPosition||1)-1,J=ae.filter(te=>te.lane-1<X).reduce((te,re)=>te+re.count,0),pe=X+J,ie=h(Y.id),se=p.has(Y.id);return s.jsxs($.Fragment,{children:[s.jsx(wx,{item:Y,maxLines:M,enableDrilldown:o,onExpand:g,isActive:ie,topLaneIndex:pe,laneOffset:J}),o&&c==="inline"&&(ie||se)&&Y.childItems&&s.jsx("div",{"data-parent":Y.id,className:"nhsuk-product-roadmap__inline-children","aria-label":`${Y.title} child tasks`,children:Y.childItems.map((te,re)=>{const de="calc(var(--roadmap-item-block-height) * 0.75)";let V=Y._pxLeft,ce=Y._pxWidth;if(te.startDate){const le=new Date(te.startDate);let me=te.endDate?new Date(te.endDate):new Date(le);me<le&&(me=new Date(le));const Ie=new Date(me);Ie.setDate(Ie.getDate()+1);const Fe=N(le);let ke=N(Ie);(!Number.isFinite(ke)||ke<=Fe)&&(ke=Fe+6),V=Fe,ce=Math.max(6,ke-Fe)}const ge=pe+1+re;return s.jsxs("div",{className:ve("nhsuk-product-roadmap__inline-child",te.status&&`nhsuk-product-roadmap__inline-child--status-${te.status}`,!ie&&se&&"nhsuk-product-roadmap__inline-child--collapsing"),style:{left:`${V}px`,width:`${ce}px`,top:`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${ge})`,height:de,opacity:ie?0:void 0,transform:ie?"translateY(-6px)":void 0},children:[s.jsx("div",{className:"nhsuk-product-roadmap__inline-child-bg"}),s.jsx("div",{className:"nhsuk-product-roadmap__inline-child-content",children:te.title})]},te.id??re)})})]},Y.id??K)})})})]},`${I.heading}-${B}`)}),o&&c==="overlay"&&d.size===1&&(()=>{const I=Array.from(d)[0],B=t.flatMap(E=>E.roadmapItems).find(E=>E.id===I);return!B||!B.childItems?null:s.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-overlay",role:"dialog","aria-modal":"true","aria-label":`${B.title} details`,children:[s.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-panel",children:[s.jsxs("header",{className:"nhsuk-product-roadmap__drilldown-header",children:[s.jsx("h3",{className:"nhsuk-product-roadmap__drilldown-title",children:B.title}),s.jsx("button",{type:"button",className:"nhsuk-product-roadmap__drilldown-close",onClick:k,"aria-label":"Close details",children:"Ã—"})]}),s.jsx("div",{className:"nhsuk-product-roadmap__drilldown-content",children:B.content}),s.jsx("ul",{className:"nhsuk-product-roadmap__drilldown-children",children:B.childItems.map((E,A)=>s.jsxs("li",{className:"nhsuk-product-roadmap__drilldown-child",children:[s.jsx("strong",{className:"nhsuk-product-roadmap__drilldown-child-title",children:E.title}),E.content&&s.jsx("div",{className:"nhsuk-product-roadmap__drilldown-child-content",children:E.content})]},E.id??A))})]}),s.jsx("div",{className:"nhsuk-product-roadmap__drilldown-backdrop",onClick:k,"aria-hidden":"true"})]})})()]})});Td.displayName="ProductRoadmap";function Dd(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Dd(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Aa(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Dd(e))&&(r&&(r+=" "),r+=t);return r}function yt(e){return function(){return e}}const ko=Math.PI,Co=2*ko,Qn=1e-6,Sx=Co-Qn;function Id(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function kx(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Id;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Cx{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Id:kx(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=r-t,u=i-n,d=o-t,f=l-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Qn)if(!(Math.abs(f*c-u*d)>Qn)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,y=i-l,h=c*c+u*u,g=m*m+y*y,k=Math.sqrt(h),S=Math.sqrt(p),j=a*Math.tan((ko-Math.acos((h+p-g)/(2*k*S)))/2),M=j/S,b=j/k;Math.abs(M-1)>Qn&&this._append`L${t+M*d},${n+M*f}`,this._append`A${a},${a},0,0,${+(f*m>d*y)},${this._x1=t+b*c},${this._y1=n+b*u}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),u=t+l,d=n+c,f=1^o,p=o?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Qn||Math.abs(this._y1-d)>Qn)&&this._append`L${u},${d}`,r&&(p<0&&(p=p%Co+Co),p>Sx?this._append`A${r},${r},0,1,${f},${t-l},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:p>Qn&&this._append`A${r},${r},0,${+(p>=ko)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Ld(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Cx(t)}function Pd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ad(e){this._context=e}Ad.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ed(e){return new Ad(e)}function Fd(e){return e[0]}function $d(e){return e[1]}function Bd(e,t){var n=yt(!0),r=null,i=Ed,a=null,o=Ld(l);e=typeof e=="function"?e:e===void 0?Fd:yt(e),t=typeof t=="function"?t:t===void 0?$d:yt(t);function l(c){var u,d=(c=Pd(c)).length,f,p=!1,m;for(r==null&&(a=i(m=o())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(f,u,c),+t(f,u,c));if(m)return a=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:yt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:yt(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:yt(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),l):r},l}function No(e,t,n){var r=null,i=yt(!0),a=null,o=Ed,l=null,c=Ld(u);e=typeof e=="function"?e:e===void 0?Fd:yt(+e),t=typeof t=="function"?t:yt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?$d:yt(+n);function u(f){var p,m,y,h=(f=Pd(f)).length,g,k=!1,S,j=new Array(h),M=new Array(h);for(a==null&&(l=o(S=c())),p=0;p<=h;++p){if(!(p<h&&i(g=f[p],p,f))===k)if(k=!k)m=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=p-1;y>=m;--y)l.point(j[y],M[y]);l.lineEnd(),l.areaEnd()}k&&(j[p]=+e(g,p,f),M[p]=+t(g,p,f),l.point(r?+r(g,p,f):j[p],n?+n(g,p,f):M[p]))}if(S)return l=null,S+""||null}function d(){return Bd().defined(i).curve(o).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:yt(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:yt(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:yt(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:yt(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:yt(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:yt(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:yt(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,a!=null&&(l=o(a)),u):o},u.context=function(f){return arguments.length?(f==null?a=l=null:l=o(a=f),u):a},u}function Hd(e){return e<0?-1:1}function zd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),l=(a*i+o*r)/(r+i);return(Hd(a)+Hd(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function Od(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Mo(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,i+l*t,a-l,o-l*n,a,o)}function Ea(e){this._context=e}Ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Mo(this,this._t0,Od(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Mo(this,Od(this,n=zd(this,e,t)),n);break;default:Mo(this,this._t0,n=zd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},Object.create(Ea.prototype).point=function(e,t){Ea.prototype.point.call(this,t,e)};function Fa(e){return new Ea(e)}function Nx(e,t,n){const r=iu(e,t);return ho().domain(r).range(n)}function Rd(e,t,n){const[r,i]=iu(e,t);if(!(Number.isFinite(r)&&Number.isFinite(i)))return Sa().domain([0,0]).range(n);let o;if(r<=0)o=Math.min(0,r);else{const c=i-r,u=(c>0?c:r)*.1;o=Math.max(0,r-u),o===r&&(o=Math.max(0,r*.9))}const l=i??0;return Sa().domain([o,l]).nice().range(n)}function jo(e,t,n,r){const i=Bd().x(t).y(n);return r?.smooth!==!1&&i.curve(Fa),i(e)??""}function Mx(e={}){const t=W.useRef(null),n=W.useMemo(()=>({top:e.top??16,right:e.right??16,bottom:e.bottom??32,left:e.left??48}),[e.bottom,e.left,e.right,e.top]),[r,i]=W.useState({width:0,height:0});W.useLayoutEffect(()=>{if(!t.current)return;const l=new ResizeObserver(c=>{for(const u of c){const{width:d,height:f}=u.contentRect;i({width:d,height:f})}});return l.observe(t.current),()=>l.disconnect()},[]);const a=Math.max(0,r.width-n.left-n.right),o=Math.max(0,r.height-n.top-n.bottom);return{width:r.width,height:r.height,innerWidth:a,innerHeight:o,margin:n,ref:t}}const Ud=W.createContext(null);function Pn(){return W.useContext(Ud)}const Wd=({height:e=240,margin:t,width:n,className:r="fdp-chart",children:i,role:a="group",ariaLabel:o})=>{const l=Mx(t),c={height:e,position:"relative"};return n!==void 0&&(c.width=typeof n=="number"?`${n}px`:n),s.jsx("div",{ref:l.ref,className:r,style:c,role:a,"aria-label":o,children:s.jsx(Ud.Provider,{value:l,children:i})})},To=W.createContext(null),Kn=()=>W.useContext(To),Gd=({series:e,innerWidth:t,innerHeight:n,parseX:r,children:i,xTickCount:a=6,yTickCount:o=5,yDomain:l,xPadding:c,yPadding:u,yBottomGapPx:d})=>{const f=Pn(),p=t??f?.innerWidth??0,m=n??f?.innerHeight??0,y=W.useMemo(()=>e.flatMap(b=>b.data),[e]),h=W.useCallback(b=>{if(r)return r(b);const _=b.x;return _ instanceof Date?_:new Date(_)},[r]),g=c??6,k=u??6,S=W.useMemo(()=>Nx(y,h,[g,Math.max(0,p-g)]),[y,h,p,g]),j=W.useMemo(()=>{const b=Math.max(0,d??0),_=Math.max(0,m-(k+b));if(l){const N=Rd([],w=>w.y,[_,k]);return N.domain(l),N}return Rd(y,N=>N.y,[_,k])},[y,m,l,k,d]),M=W.useMemo(()=>({xScale:S,yScale:j,getXTicks:(b=a)=>S.ticks(b),getYTicks:(b=o)=>j.ticks(b)}),[S,j,a,o]);return s.jsx(To.Provider,{value:M,children:i})},ii=16,ai=6,Vd=16,Yd=4,Zd=6,qd=3,Xd=void 0,Do=({type:e,scale:t,tickCount:n,tickValues:r,formatTick:i,label:a,offset:o,className:l,minLabelSpacing:c,maxTickLabelLength:u,autoMinLabelSpacing:d=e==="x",labelAngle:f=0,allowLabelWrap:p=!0,tickFormatPreset:m,yZeroBreak:y})=>{const h=Kn(),g=Pn(),k=t||(e==="x"?h?.xScale:h?.yScale),S=n??(e==="x"?6:5),j=typeof i=="function",M=W.useMemo(()=>{if(j||!m)return;const N=w=>new Intl.DateTimeFormat(void 0,w);switch(m){case"dayShortMonth":return w=>{const v=w instanceof Date?w:new Date(w);return`${v.getDate()}
${N({month:"short"}).format(v)}`};case"dayShortMonthYear":return w=>{const v=w instanceof Date?w:new Date(w);return`${v.getDate()}
${N({month:"short"}).format(v)} ${v.getFullYear()}`};case"shortMonth":return w=>{const v=w instanceof Date?w:new Date(w);return N({month:"short"}).format(v)};case"shortMonthYear":return w=>{const v=w instanceof Date?w:new Date(w);return`${N({month:"short"}).format(v)} ${v.getFullYear()}`};case"hourMinute":return w=>{const v=w instanceof Date?w:new Date(w);return N({hour:"2-digit",minute:"2-digit"}).format(v)};default:return}},[j,m]);let b=j?i:M||(N=>String(N));const _=W.useMemo(()=>r&&Array.isArray(r)?r:k?typeof k.ticks=="function"?k.ticks(S):k.domain?k.domain():[]:[],[k,S,r]);if(e==="x"&&!j&&!m&&_.length&&_.every(N=>N instanceof Date)){const N=_[0],w=_[_.length-1],v=w.getTime()-N.getTime(),C=24*3600*1e3,D=365*C,I=N.getFullYear()===w.getFullYear(),B=new Intl.DateTimeFormat(void 0,{month:"short"});if(v<2*C){const E=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"});b=A=>E.format(A)}else if(v<32*C)b=E=>{const A=E;return`${A.getDate()} ${B.format(A)}`};else if(v<D&&I)b=E=>B.format(E);else if(v<2*D){const E=new Set;b=A=>{const L=A,z=L.getMonth();return E.has(z)||E.add(z),`${B.format(L)} ${L.getFullYear()}`}}else b=E=>String(E.getFullYear())}if(!k||!g)return null;if(e==="x"){const N=o??g.innerHeight,w=typeof k.bandwidth=="function",v=w?k.bandwidth():0,C=B=>{const E=k(B);return w?E+v/2:E};let D=c??0;if(d&&c==null){const B=_.map(A=>b(A).replace(/\n.*/g,"")),E=B.length?B.reduce((A,L)=>A+L.length,0)/B.length:0;D=Math.max(12,Math.round(E*6+4))}const I=W.useMemo(()=>{if(r&&Array.isArray(r)||D<=0)return _;const B=[];let E=-1/0;for(const A of _){const L=C(A);L-E>=D&&(B.push(A),E=L)}return B},[_,k,D,r,w,v]);return s.jsxs("g",{className:["fdp-axis","fdp-axis--x",l].filter(Boolean).join(" "),transform:`translate(0,${N})`,fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[s.jsx("line",{x1:0,x2:g.innerWidth,y1:0,y2:0,stroke:"currentColor"}),I.map((B,E)=>{const A=b(B),L=u&&A.length>u?A.slice(0,Math.max(1,u-1))+"â€¦":A,z=p?L.split(/\n/):[L.replace(/\n/g," ")],ae=f<0?"end":f>0?"start":"middle";return s.jsxs("g",{transform:`translate(${C(B)},0)`,children:[s.jsx("line",{y2:6,stroke:"currentColor"}),s.jsxs("text",{y:9,textAnchor:ae,className:"fdp-axis__tick",dominantBaseline:"hanging",transform:f?`rotate(${f})`:void 0,fontFamily:"inherit",children:[z.map((q,O)=>s.jsx("tspan",{x:0,dy:O===0?0:"1.1em",children:q},O)),L!==A&&s.jsx("title",{children:A})]})]},B?.toString?.()||E)})]})}return s.jsxs("g",{className:["fdp-axis","fdp-axis--y",l].filter(Boolean).join(" "),fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[(()=>{const N=!!y?.enabled,w=Math.max(ai,y?.gapPx??ii);if(!N)return s.jsx("line",{x1:0,x2:0,y1:0,y2:g.innerHeight,stroke:"currentColor"});const v=Math.max(0,g.innerHeight-w);return s.jsx("line",{x1:0,x2:0,y1:0,y2:v,stroke:"currentColor"})})(),_.map((N,w)=>{const v=b(N),C=u&&v.length>u?v.slice(0,Math.max(1,u-1))+"â€¦":v,D=p?C.split(/\n/):[C.replace(/\n/g," ")];if(!!y?.enabled){const B=Math.max(ai,y?.gapPx??ii),E=Math.max(0,g.innerHeight-B);if(k(N)>E-1)return null}return s.jsxs("g",{transform:`translate(0,${k(N)})`,children:[s.jsx("line",{x2:-6,stroke:"currentColor"}),s.jsxs("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:[D.map((B,E)=>s.jsx("tspan",{x:-9,dy:E===0?0:"1.1em",children:B},E)),C!==v&&s.jsx("title",{children:v})]})]},N?.toString?.()||w)}),!!y?.enabled&&(()=>{const N=Math.max(ai,y?.gapPx??ii),w=g.innerHeight,C=Math.max(0,w-N),D=C,B=Math.max(4,w-D),E=Yd,A=Zd,L=Math.max(1,Math.round(y?.zigZag?.amplitudePx??E)),z=Math.max(1,Math.round(y?.zigZag?.stepXPx??qd)),ae=y?.zigZag?.heightPx??Xd,q=Math.max(4,Math.round(ae??0));let O,ne;if(y?.zigZag?.heightPx&&y.zigZag.heightPx>0){const se=Math.max(4,Math.min(B-2,q));O=Math.max(1,Math.floor(se/(2*L))),ne=Math.max(0,Math.min(se,O*2*L))}else typeof y?.zigZag?.cycles=="number"&&y?.zigZag?.cycles>0?(O=Math.max(1,Math.round(y.zigZag.cycles)),ne=O*2*L,ne=Math.min(ne,B-2),O=Math.max(1,Math.floor(ne/(2*L)))):(O=A,ne=Math.min(B-2,O*2*L),O=Math.max(1,Math.floor(ne/(2*L))));const Y=D+(B-ne)/2,K=Y+ne;let X="M0,0";const J=ne>0?Math.max(0,Math.floor((ne-L)/(2*L))):0,pe=Math.max(0,(ne-J*2*L)/2),ie=L>0?z*(pe/L):0;pe>0&&(X+=` l${ie},${pe}`);for(let se=0;se<J;se++)X+=` l-${z},${L} l${z},${L}`;return pe>0&&(X+=` l-${ie},${pe}`),s.jsxs("g",{children:[s.jsx("line",{x1:0,x2:0,y1:C,y2:Y,stroke:"currentColor"}),s.jsx("g",{transform:`translate(0,${Y})`,"aria-hidden":"true",children:s.jsx("path",{d:X,stroke:"currentColor",fill:"none"})}),s.jsx("line",{x1:0,x2:0,y1:K,y2:w,stroke:"currentColor"}),s.jsx("g",{transform:`translate(0,${w})`,children:s.jsx("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:"0"})})]})})(),a&&s.jsx("text",{transform:"rotate(-90)",x:-g.innerHeight/2,y:-g.margin.left+12,textAnchor:"middle",className:"fdp-axis__label",fontFamily:"inherit",children:a})]})},Jd=({axis:e="y",tickCount:t,stroke:n="var(--fdp-chart-grid,#e5e5e5)",dasharray:r="2 4",className:i})=>{const a=Kn(),o=Pn();if(!a||!o)return null;const l=e==="y"?a.getYTicks(t):a.getXTicks(t);return s.jsxs("g",{className:["fdp-grid",i].filter(Boolean).join(" "),children:[e==="y"&&l.map((c,u)=>s.jsx("line",{x1:0,x2:o.innerWidth,y1:a.yScale(c),y2:a.yScale(c),stroke:n,strokeDasharray:r},u)),e==="x"&&l.map((c,u)=>s.jsx("line",{y1:0,y2:o.innerHeight,x1:a.xScale(c),x2:a.xScale(c),stroke:n,strokeDasharray:r},u))]})},si={color:{"data-viz":{$type:"color",categorical:{1:{$value:"{color.primary.blue}",$description:"Series 1 â€“ NHS Blue (brand core)"},2:{$value:"#41B6E6",$description:"Series 2 â€“ NHS Light Blue (new)"},3:{$value:"{color.secondary.aqua-green}",$description:"Series 3 â€“ NHS Aqua Green (existing)"},4:{$value:"#78BE20",$description:"Series 4 â€“ NHS Light Green (new)"},5:{$value:"{color.primary.green}",$description:"Series 5 â€“ NHS Green (existing)"},6:{$value:"{color.secondary.warm-yellow}",$description:"Series 6 â€“ NHS Warm Yellow (existing; distinct from focus yellow)"},7:{$value:"#ED4F00",$description:"Series 7 â€“ NHS Tangerine (new; warmer/deeper than existing orange)"},8:{$value:"{color.secondary.pink}",$description:"Series 8 â€“ NHS Pink (existing)"},9:{$value:"#E317AA",$description:"Series 9 â€“ NHS Bright Pink (new vivid accent)"},10:{$value:"#880FB8",$description:"Series 10 â€“ NHS Light Purple (new mid purple)"},11:{$value:"{color.primary.purple}",$description:"Series 11 â€“ NHS Purple (existing dark purple)"},12:{$value:"#9A6324",$description:"Series 12 â€“ NHS Brown (new; earth neutral)"}},neutral:{comparison:{$value:"{color.grey.1}",$description:"Neutral comparison series (optional)"}},region:{$comment:"Fixed colours for NHS geographical regions; prefer stable mapping for maps. London colour updated (#78BE21 â€“ light green).","north-east":{$value:"{color.primary.blue}",$description:"North East â€“ NHS Blue"},"north-west":{$value:"#41B6E6",$description:"North West â€“ NHS Light Blue"},"east-of-england":{$value:"{color.primary.purple}",$description:"East of England â€“ NHS Purple"},midlands:{$value:"{color.secondary.pink}",$description:"Midlands â€“ NHS Pink"},london:{$value:"#78BE21",$description:"London â€“ NHS Light Green (new)"},"south-west":{$value:"#FAE100",$description:"South West â€“ NHS Yellow variant (new)"},"south-east":{$value:"#ed8b00",$description:"South East â€“ NHS Orange (existing base orange)"}},severity:{$comment:"Semantic severity / alert colours (light background ramp â†’ critical).",low:{$value:"{color.secondary.pale-yellow}",$description:"Low severity â€“ pale yellow background"},moderate:{$value:"{color.secondary.warm-yellow}",$description:"Moderate severity â€“ warm yellow"},high:{$value:"{color.secondary.orange}",$description:"High severity â€“ orange"},critical:{$value:"{color.primary.red}",$description:"Critical severity â€“ red"}},"org-level":{$comment:"Organisational level semantic colours (stable NHS brand mappings).",trust:{$value:"{color.primary.blue}",$description:"Trust â€“ NHS Blue"},ambulance:{$value:"{color.primary.green}",$description:"Ambulance â€“ NHS Green"},icb:{$value:"{color.primary.dark-pink}",$description:"ICB â€“ NHS Dark Pink"},region:{$value:"{color.primary.purple}",$description:"Region â€“ NHS Purple"}},stroke:{$comment:"Automatic contrast stroke colours for overlays / borders. Light fills get dark stroke; dark fills get white stroke.",categorical:{1:{$value:"#ffffff",$description:"Stroke for series 1 (blue)"},2:{$value:"#212b32",$description:"Stroke for series 2 (light blue)"},3:{$value:"#212b32",$description:"Stroke for series 3 (aqua green)"},4:{$value:"#212b32",$description:"Stroke for series 4 (light green)"},5:{$value:"#ffffff",$description:"Stroke for series 5 (green)"},6:{$value:"#212b32",$description:"Stroke for series 6 (warm yellow)"},7:{$value:"#ffffff",$description:"Stroke for series 7 (tangerine)"},8:{$value:"#ffffff",$description:"Stroke for series 8 (pink)"},9:{$value:"#ffffff",$description:"Stroke for series 9 (bright pink)"},10:{$value:"#ffffff",$description:"Stroke for series 10 (light purple)"},11:{$value:"#ffffff",$description:"Stroke for series 11 (purple)"},12:{$value:"#ffffff",$description:"Stroke for series 12 (brown)"}},region:{$comment:"Region stroke colours derived from fill colours: dark fills lightened ~35%; light fills darkened ~25% for consistent contrast without defaulting to pure white/black.","north-east":{$value:"#5996D1",$description:"Stroke for North East (blue lightened 35%)"},"north-west":{$value:"#3189AD",$description:"Stroke for North West (light blue darkened 25%)"},"east-of-england":{$value:"#7A59A3",$description:"Stroke for East of England (purple lightened 35%)"},midlands:{$value:"#CA71A4",$description:"Stroke for Midlands (pink lightened 35%)"},london:{$value:"#5A8F19",$description:"Stroke for London (light green darkened 25%)"},"south-west":{$value:"#BCA900",$description:"Stroke for South West (yellow darkened 25%)"},"south-east":{$value:"#B26800",$description:"Stroke for South East (orange darkened 25%)"}},severity:{$comment:"Contrast strokes for severity colours (light backgrounds use dark stroke; dark backgrounds use white).",low:{$value:"#212b32",$description:"Stroke for low severity (pale yellow fill)"},moderate:{$value:"#212b32",$description:"Stroke for moderate severity (warm yellow fill)"},high:{$value:"#212b32",$description:"Stroke for high severity (orange fill)"},critical:{$value:"#ffffff",$description:"Stroke for critical severity (red fill)"}},"org-level":{$comment:"Contrast strokes for organisational level colours (all dark brand fills so white stroke for consistency).",trust:{$value:"#ffffff",$description:"Stroke for trust (blue fill)"},ambulance:{$value:"#ffffff",$description:"Stroke for ambulance (green fill)"},icb:{$value:"#ffffff",$description:"Stroke for ICB (dark pink fill)"},region:{$value:"#ffffff",$description:"Stroke for region (purple fill)"}}},spc:{$comment:"SPC (Statistical Process Control) semantic variation colours aligned to SPCChart.scss and SPCIcons.",improvement:{$value:"#00B0F0",$description:"SPC special cause improvement (favourable)"},concern:{$value:"#E46C0A",$description:"SPC special cause concern (deteriorating)"},"no-judgement":{$value:"#490092",$description:"SPC special cause (no directional judgement)"},"common-cause":{$value:"#A6A6A6",$description:"SPC common cause (baseline variation)"},"assurance-pass":{$value:"#00823B",$description:"SPC assurance pass indicator (process capable)"},"assurance-fail":{$value:"#DA291C",$description:"SPC assurance fail indicator (process not capable)"},gradient:{$comment:"Opacity stops for SPC icon gradient wash (applied top-left -> bottom-right). Consumers build gradients using these opacities + base colour.",stop:{"start-opacity":{$value:"0.18",$description:"Start stop opacity (0%) for classic variant wash"},"mid-opacity":{$value:"0.06",$description:"Mid stop opacity (~65-75%)"},"end-opacity":{$value:"0",$description:"End stop opacity (100%)"},"triangle-start-opacity":{$value:"0.18",$description:"Start opacity for triangle variants (kept aligned)"},"triangle-mid-opacity":{$value:"0.06",$description:"Mid opacity for triangle variants"},"triangle-end-opacity":{$value:"0",$description:"End opacity for triangle variants"}}},stroke:{$comment:"Contrast stroke colours for SPC variation fills.",improvement:{$value:"#000000",$description:"Stroke for improvement points"},concern:{$value:"#000000",$description:"Stroke for concern points"},"no-judgement":{$value:"#000000",$description:"Stroke for no-judgement points"},"common-cause":{$value:"#ffffff",$description:"Stroke for common cause points"},"assurance-pass":{$value:"#000000",$description:"Stroke for assurance pass points"},"assurance-fail":{$value:"#000000",$description:"Stroke for assurance fail points"}}}}}},$a={color:{primary:{$type:"color",blue:{$value:"#005eb8",$description:"NHS Blue - Primary brand color"},"blue-active":{$value:"#002f5c",$description:"NHS Active Blue (50% shade) â€“ alias of button/login active; promoted for general reuse"},white:{$value:"#ffffff",$description:"NHS White"},black:{$value:"#212b32",$description:"NHS Black"},green:{$value:"#007f3b",$description:"NHS Green"},purple:{$value:"#330072",$description:"NHS Purple"},"dark-pink":{$value:"#7c2855",$description:"NHS Dark Pink"},red:{$value:"#d5281b",$description:"NHS Red"},"light-purple":{$value:"#880FB8",$description:"NHS Light Purple (data viz promoted)"},yellow:{$value:"#ffeb3b",$description:"NHS Yellow"}},secondary:{$type:"color","pale-yellow":{$value:"#fff9c4",$description:"NHS Pale Yellow"},"warm-yellow":{$value:"#ffb81c",$description:"NHS Warm Yellow"},"region-yellow":{$value:"#FAE100",$description:"NHS Region Yellow (maps)"},orange:{$value:"#ed8b00",$description:"NHS Orange"},tangerine:{$value:"#ED4F00",$description:"NHS Tangerine (data viz promoted)"},"aqua-green":{$value:"#00a499",$description:"NHS Aqua Green"},"light-blue":{$value:"#41B6E6",$description:"NHS Light Blue (data viz promoted)"},pink:{$value:"#ae2573",$description:"NHS Pink"},"bright-pink":{$value:"#E317AA",$description:"NHS Bright Pink (data viz promoted)"},"light-green":{$value:"#78BE20",$description:"NHS Light Green (data viz promoted)"},brown:{$value:"#9A6324",$description:"NHS Brown (data viz promoted neutral)"}},grey:{1:{$value:"#4c6272",$description:"NHS Grey 1 - Darkest grey"},2:{$value:"#768692",$description:"NHS Grey 2 - Darker grey"},3:{$value:"#aeb7bd",$description:"NHS Grey 3 - Medium grey"},4:{$value:"#d8dde0",$description:"NHS Grey 4 - Light grey"},5:{$value:"#f0f4f5",$description:"NHS Grey 5 - Lightest grey"},$type:"color"},accessibility:{$type:"color",$comment:"Accessibility-oriented color tokens. Includes CVD-safe pairs and Okabeâ€“Ito colors. Use these for positive/negative semantics and colour-blindâ€“friendly defaults.","okabe-ito":{green:{$value:"#009E73",$description:"Okabeâ€“Ito green (CVD-safe) â€“ recommended positive"},vermillion:{$value:"#D55E00",$description:"Okabeâ€“Ito vermillion / redâ€“orange (CVD-safe) â€“ recommended negative"}},"cvd-safe":{blue:{$value:"#1f77b4",$description:"CVD-safe blue (pairs with orange); widely used in Matplotlib/Tableau sets"},orange:{$value:"#ff7f0e",$description:"CVD-safe orange (pairs with blue)"}},positive:{$value:"{color.accessibility.okabe-ito.green}",$description:"Accessibility semantic alias â€“ positive"},negative:{$value:"{color.accessibility.okabe-ito.vermillion}",$description:"Accessibility semantic alias â€“ negative"}}}},jx=["#005eb8","#0072ce","#41b6e6","#00a499","#7c2855","#330072","#d5281b","#ffb81c","#fae100","#4c6272","#768692","#aeb7bd"];let Io=null,Lo=null,Po=null,Qd="optimized";function Tx(){const e={color:{...$a.color,...si.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,c)=>l?l[c]:void 0,e);if(!a)return;const o=a.$value||a.value;if(typeof o=="string"&&/^\{.+\}$/.test(o))return t(o.slice(1,-1),i);if(typeof o=="string")return o},n=[];try{for(let r=1;r<=12;r++){const i=`color.data-viz.categorical.${r}`,a=t(i);if(!a)throw new Error(`Missing token ${i}`);n.push(a)}return n}catch{return jx}}function Dx(){return Io||(Io=Tx()),Io}function Ix(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.trim());return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Ao(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Lx(e,t,n){const r=Ao(e),i=Ao(t),a=Ao(n),o=r*.4124+i*.3576+a*.1805,l=r*.2126+i*.7152+a*.0722,c=r*.0193+i*.1192+a*.9505;return{x:o*100,y:l*100,z:c*100}}function Px(e,t,n){let o=e/95.047,l=t/100,c=n/108.883;const u=d=>d>.008856?Math.cbrt(d):7.787*d+16/116;return o=u(o),l=u(l),c=u(c),{L:116*l-16,a:500*(o-l),b:200*(l-c)}}function Kd(e){const t=Ix(e);if(!t)return null;const n=Lx(t.r,t.g,t.b);return Px(n.x,n.y,n.z)}function ef(e,t){const n=e.L-t.L,r=e.a-t.a,i=e.b-t.b;return Math.sqrt(n*n+r*r+i*i)}function Ax(){const e=Dx();if(e.length<=2)return e.slice();const t=e.map(o=>Kd(o));let n=0,r=-1;for(let o=0;o<e.length;o++){const l=t[o];if(!l)continue;let c=0,u=0;for(let f=0;f<e.length;f++)o!==f&&t[f]&&(c+=ef(l,t[f]),u++);const d=c/Math.max(1,u);d>r&&(r=d,n=o)}const i=new Set(e.map((o,l)=>l)),a=[];for(a.push(n),i.delete(n);i.size;){let o=Array.from(i)[0],l=-1;for(const c of i){const u=t[c];if(!u)continue;let d=1/0;for(const f of a){const p=t[f];if(p){const m=ef(u,p);m<d&&(d=m)}}d>l&&(l=d,o=c)}a.push(o),i.delete(o)}return a.map(o=>e[o])}function Ex(){return Lo||(Lo=Ax()),Lo}function Fx(e,t,n){const r=(e+16)/116,i=t/500+r,a=r-n/200,o=d=>{const f=d*d*d;return f>.008856?f:(d-16/116)/7.787},l=o(i)*95.047,c=o(r)*100,u=o(a)*108.883;return{X:l,Y:c,Z:u}}function $x(e,t,n){e/=100,t/=100,n/=100;let r=e*3.2406+t*-1.5372+n*-.4986,i=e*-.9689+t*1.8758+n*.0415,a=e*.0557+t*-.204+n*1.057;const o=l=>l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055;return r=Math.min(1,Math.max(0,o(r))),i=Math.min(1,Math.max(0,o(i))),a=Math.min(1,Math.max(0,o(a))),{r:Math.round(r*255),g:Math.round(i*255),b:Math.round(a*255)}}function Bx(e,t,n){return`#${[e,t,n].map(r=>r.toString(16).padStart(2,"0")).join("")}`}function Hx(e,t){const n=Kd(e);if(!n)return e;const r=Math.min(100,Math.max(0,n.L+t)),{X:i,Y:a,Z:o}=Fx(r,n.a,n.b),l=$x(i,a,o);return Bx(l.r,l.g,l.b)}function zx(){const e=Ex(),n=[12,-12,24,-24].map(i=>e.map(a=>Hx(a,i))),r=[...e];return n.forEach(i=>r.push(...i)),r}function Ox(){return(!Po||Rx())&&(Po=zx(),tf=Qd),Po}let tf=null;function Rx(){return tf!==Qd}function Kt(e){const t=Ox();return t[e%t.length]}let Cr=null,oi=null,li=null,ci=null;function Ux(){const e=si?.color?.["data-viz"]?.stroke;if(e){const t=e.categorical||{};Cr=[];for(let a=1;a<=12;a++){const o=t[String(a)]?.$value||t[String(a)]?.value;Cr.push(typeof o=="string"?o:"#212b32")}const n=e.region||{};oi={},Object.keys(n).forEach(a=>{const o=n[a]?.$value||n[a]?.value;typeof o=="string"&&(oi[a]=o)});const r=e.severity||{},i=e["org-level"]||{};ci={},Object.keys(i).forEach(a=>{const o=i[a]?.$value||i[a]?.value;typeof o=="string"&&(ci[a]=o)}),li={},Object.keys(r).forEach(a=>{const o=r[a]?.$value||r[a]?.value;typeof o=="string"&&(li[a]=o)})}}function Ba(){(!Cr||!oi||!li||!ci)&&Ux()}function er(e){return Ba(),Cr?Cr[e%Cr.length]:"#212b32"}function Wx(e){return Ba(),oi?oi[e]:void 0}function Ha(e,t){return Wx(e)||er(t)}const Eo=["low","moderate","high","critical"];let Fo=null;function Gx(){const e={color:{...$a.color,...si.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,c)=>l?l[c]:void 0,e);if(!a)return;const o=a.$value||a.value;return typeof o=="string"&&/^\{.+\}$/.test(o)?t(o.slice(1,-1),i):typeof o=="string"?o:void 0},n={};return Eo.forEach(r=>{const i=t(`color.data-viz.severity.${r}`);i&&(n[r]=i)}),n}function nf(){return Fo||(Fo=Gx()),Fo}function Vx(e){return nf()[e.toLowerCase()]}function Yx(e,t){return Vx(e)||nf()[Eo[t%Eo.length]]||Kt(t)}function Zx(e){return Ba(),li?li[e]:void 0}function qx(e,t){return Zx(e)||er(t)}const $o=["trust","ambulance","icb","region"];let Bo=null;function Xx(){const e={color:{...$a.color,...si.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,c)=>l?l[c]:void 0,e);if(!a)return;const o=a.$value||a.value;return typeof o=="string"&&/^\{.+\}$/.test(o)?t(o.slice(1,-1),i):typeof o=="string"?o:void 0},n={};return $o.forEach(r=>{const i=t(`color.data-viz.org-level.${r}`);i&&(n[r]=i)}),n}function rf(){return Bo||(Bo=Xx()),Bo}function Jx(e){return rf()[e.toLowerCase()]}function Qx(e,t){return Jx(e)||rf()[$o[t%$o.length]]||Kt(t)}function Kx(e){return Ba(),ci?ci[e]:void 0}function e_(e,t){return Kx(e)||er(t)}let Ho=null;const t_=["north-east","north-west","east-of-england","midlands","london","south-west","south-east"];function n_(e){return e.trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function r_(){const e={color:{...$a.color,...si.color}},t=(i,a=new Set)=>{if(a.has(i))return;a.add(i);const o=i.split(".").reduce((c,u)=>c?c[u]:void 0,e);if(!o)return;const l=o.$value||o.value;return typeof l=="string"&&/^\{.+\}$/.test(l)?t(l.slice(1,-1),a):typeof l=="string"?l:void 0},n={},r=[];return t_.forEach(i=>{const a=t(`color.data-viz.region.${i}`);a?n[i]=a:r.push(i)}),process.env.NODE_ENV!=="production"&&(Object.keys(n).length===0?console.warn("[DataViz] Region colour tokens unresolved  falling back to categorical colours."):r.length&&console.warn(`[DataViz] Missing region colour tokens: ${r.join(", ")}.`)),n}function i_(){return Ho||(Ho=r_()),Ho}function a_(e){return i_()[n_(e)]}function Nr(e,t){return a_(e)||Kt(t)}const af=W.createContext(null),ui=()=>W.useContext(af),s_=({initialHiddenIds:e=[],children:t,hiddenIds:n,onChange:r})=>{const[i,a]=W.useState(()=>new Set(e)),o=n!==void 0,l=W.useMemo(()=>o?new Set(n):i,[o,n,i]),c=W.useCallback(d=>{o||a(new Set(d)),r?.(Array.from(d))},[o,r]),u=W.useMemo(()=>({hiddenIds:l,isHidden:d=>l.has(d),toggle:d=>{const f=new Set(l);f.has(d)?f.delete(d):f.add(d),c(f)},showOnly:d=>{c(new Set)},showAll:()=>c(new Set),setHidden:d=>c(new Set(Array.isArray(d)?d:Array.from(d)))}),[l,c]);return s.jsx(af.Provider,{value:u,children:t})},sf=W.createContext(null),kn=()=>W.useContext(sf),of=({children:e,maxDistance:t=40,wrapAround:n=!1})=>{const r=Kn(),i=ui(),[a,o]=W.useState(null),l=W.useRef(new Map),[c,u]=W.useState([]),d=W.useCallback((N,w)=>{l.current.set(N,w)},[]),f=W.useCallback(N=>{l.current.delete(N)},[]),p=W.useCallback((N,w)=>{if(!r)return;const{xScale:v,yScale:C}=r;let D=null,I=1/0;l.current.forEach((B,E)=>{B.forEach((A,L)=>{const z=v(A.x),ae=C(A.y),q=z-N,O=ae-w,ne=Math.sqrt(q*q+O*O);ne<I&&(I=ne,D={seriesId:E,index:L,x:A.x,y:A.y,clientX:z,clientY:ae})})}),D&&I<=t?o(D):o(null)},[r,t]),m=W.useCallback(()=>o(null),[]);W.useEffect(()=>{if(!a){u([]);return}if(!r)return;const{xScale:N,yScale:w}=r,v=[];l.current.forEach((C,D)=>{C.forEach((I,B)=>{(a.x instanceof Date&&I.x instanceof Date?I.x.getTime()===a.x.getTime():I.x===a.x)&&v.push({seriesId:D,index:B,x:I.x,y:I.y,clientX:N(I.x),clientY:w(I.y)})})}),v.sort((C,D)=>C.seriesId.localeCompare(D.seriesId)),u(v)},[a,r]);const y=W.useCallback(N=>{if(!a)return;const w=l.current.get(a.seriesId);if(!w)return;let v=a.index+N;if(v<0||v>=w.length){if(!n)return;v=(v+w.length)%w.length}const C=w[v];if(!r)return;const{xScale:D,yScale:I}=r;o({seriesId:a.seriesId,index:v,x:C.x,y:C.y,clientX:D(C.x),clientY:I(C.y)})},[a,r,n]),h=W.useCallback(N=>{let w=Array.from(l.current.keys());if(i&&(w=w.filter(z=>!i.isHidden(z))),w.length===0)return;if(!a){const z=w[0],ae=l.current.get(z);if(!ae||!r)return;const{xScale:q,yScale:O}=r,ne=ae[0];o({seriesId:z,index:0,x:ne.x,y:ne.y,clientX:q(ne.x),clientY:O(ne.y)});return}const v=w.indexOf(a.seriesId);if(v===-1)return;let C=v+N;if(C<0||C>=w.length){if(!n)return;C=(C+w.length)%w.length}const D=w[C],I=l.current.get(D);if(!I||!r)return;const B=Math.min(a.index,I.length-1),E=I[B],{xScale:A,yScale:L}=r;o({seriesId:D,index:B,x:E.x,y:E.y,clientX:A(E.x),clientY:L(E.y)})},[a,r,n,i]),g=W.useCallback(()=>{let N=Array.from(l.current.keys());if(i&&(N=N.filter(B=>!i.isHidden(B))),N.length===0)return;const w=a?a.seriesId:N[0],v=l.current.get(w);if(!v||v.length===0||!r)return;const C=v[0],{xScale:D,yScale:I}=r;o({seriesId:w,index:0,x:C.x,y:C.y,clientX:D(C.x),clientY:I(C.y)})},[a,r,i]),k=W.useCallback(()=>{let N=Array.from(l.current.keys());if(i&&(N=N.filter(E=>!i.isHidden(E))),N.length===0)return;const w=a?a.seriesId:N[0],v=l.current.get(w);if(!v||v.length===0||!r)return;const C=v.length-1,D=v[C],{xScale:I,yScale:B}=r;o({seriesId:w,index:C,x:D.x,y:D.y,clientX:I(D.x),clientY:B(D.y)})},[a,r,i]),S=W.useCallback(()=>y(1),[y]),j=W.useCallback(()=>y(-1),[y]),M=W.useCallback(()=>h(1),[h]),b=W.useCallback(()=>h(-1),[h]),_=W.useMemo(()=>({focused:a,setFocused:o,aggregated:c,focusNearest:p,clear:m,registerSeries:d,unregisterSeries:f,focusNextPoint:S,focusPrevPoint:j,focusNextSeries:M,focusPrevSeries:b,focusFirstPoint:g,focusLastPoint:k}),[a,c,p,m,d,f,S,j,M,b,g,k]);return s.jsx(sf.Provider,{value:_,children:e})},lf=({series:e,seriesIndex:t,palette:n,showPoints:r,focusablePoints:i,focusIndex:a,parseX:o,visibilityMode:l="remove",strokeWidth:c=1,smooth:u=!0,gradientFillId:d,colors:f})=>{const p=Kn();if(!p)return null;const{xScale:m,yScale:y}=p,g=ui()?.isHidden(e.id)??!1,k=g&&l==="fade";if(g&&l==="remove")return null;const S=kn();W.useEffect(()=>{if(!S)return;const w=e.data.map(v=>({x:o(v),y:v.y}));return S.registerSeries(e.id,w),()=>S.unregisterSeries(e.id)},[S,e.id,e.data,o]);const j=W.useMemo(()=>jo(e.data,w=>m(o(w)),w=>y(w.y),{smooth:u}),[e.data,m,y,o,u]),M=W.useMemo(()=>{if(!e.data.length)return"";const[w]=y.domain(),v=No().x(C=>m(o(C))).y0(()=>y(w)).y1(C=>y(C.y));return u&&v.curve(Fa),v(e.data)||""},[e.data,m,y,o,u]),b=f&&f[t],_=e.color||b||(n==="region"?Nr(e.id,t):Kt(t)),N=n==="region"?Ha(e.id,t):er(t);return s.jsxs("g",{className:"fdp-line-series","data-series":e.id,opacity:k?.25:1,"aria-hidden":k?!0:void 0,children:[d&&s.jsx("path",{d:M,fill:`url(#${d})`,stroke:"none",role:"presentation",className:"fdp-line-series__gradient"}),s.jsx("path",{d:j,fill:"none",stroke:_,strokeWidth:c,role:"presentation"}),r&&e.data.map((w,v)=>{const C=m(o(w)),D=y(w.y),I=i?0:-1,B=!k&&(i&&v===a||S?.focused?.seriesId===e.id&&S.focused.index===v),E=()=>{S&&!k&&S.setFocused({seriesId:e.id,index:v,x:o(w),y:w.y,clientX:C,clientY:D})},A=()=>{S&&S.focused?.seriesId===e.id&&S.focused.index===v&&S.clear()};return s.jsx("circle",{cx:C,cy:D,r:B?5:3.5,stroke:B?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":N,strokeWidth:B?2:1,fill:B?"var(--nhs-fdp-color-grey-3, #aeb7bd)":_,className:"fdp-line-point",tabIndex:k?-1:I,"aria-label":`${e.label||e.id} ${o(w).toDateString()} value ${w.y}`,"data-series":e.id,"data-index":v,onMouseEnter:E,onFocus:E,onMouseLeave:A,onBlur:A},v)})]})},o_=({polite:e=!0,format:t})=>{const n=kn(),[r,i]=W.useState(""),a=W.useRef("");return W.useEffect(()=>{if(!n?.focused)return;const{focused:o,aggregated:l}=n;let c;if(l&&l.length>1){const u=l.map(f=>`${f.seriesId} ${f.y}`).join("; ");c=`${o.x instanceof Date?o.x.toDateString():String(o.x)} â€“ ${u}`}else c=t?t({seriesId:o.seriesId,x:o.x,y:o.y,index:o.index}):l_(o.seriesId,o.x,o.y,o.index);if(c!==a.current){a.current=c,i("");const u=setTimeout(()=>i(c),10);return()=>clearTimeout(u)}},[n?.focused,t]),s.jsx("div",{"aria-live":e?"polite":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,margin:-1,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",border:0},children:r})};function l_(e,t,n,r){const i=t instanceof Date?t.toDateString():String(t);return`Series ${e}, point ${r+1}, ${i}, value ${n}`}const c_=()=>{const e=kn(),t=Pn();if(!e||!t||!e.focused)return null;const{focused:n,aggregated:r}=e,{innerWidth:i,innerHeight:a}=t,o=Math.min(Math.max(n.clientX,0),i),l=Math.min(Math.max(n.clientY,0),a),c=o+8,u=l-8,d=r.length>1,f=n.x instanceof Date?n.x.toDateString():String(n.x),p=d?f:`${f} â€¢ ${n.y}`,m=/\d+$/.exec(n.seriesId||""),y=m?parseInt(m[0],10)-1:0,h=Kt(y>=0?y:0)||"#005eb8",g="var(--nhs-fdp-color-primary-yellow,#ffeb3b)";return s.jsxs("g",{className:"fdp-tooltip-layer",pointerEvents:"none",children:[s.jsx("circle",{cx:o,cy:l,r:7,fill:"none",stroke:g,strokeWidth:3}),s.jsx("circle",{cx:o,cy:l,r:5,fill:"#000",stroke:g,strokeWidth:1.5}),s.jsx("circle",{cx:o,cy:l,r:2.5,fill:h,stroke:"#fff",strokeWidth:.5}),d?(()=>{const S=r.map(N=>`${N.seriesId}: ${N.y}`),j=[p,...S],M=j.reduce((N,w)=>Math.max(N,w.length),0),b=Math.max(90,M*6.2+16),_=16*j.length+8;return s.jsxs("g",{children:[s.jsx("rect",{x:c,y:u-_,rx:4,ry:4,width:b,height:_,fill:"#212b32",opacity:.92}),j.map((N,w)=>s.jsx("text",{x:c+8,y:u-_+6+16*(w+.7),fill:"#fff",fontSize:12,children:N},w))]})})():s.jsxs("g",{children:[s.jsx("rect",{x:c,y:u-24,rx:4,ry:4,width:Math.max(60,p.length*6.2),height:24,fill:"#212b32",opacity:.92}),s.jsx("text",{x:c+8,y:u-8,fill:"#fff",fontSize:12,children:p})]})]})},u_=({items:e,palette:t="categorical",direction:n="row",interactive:r=!1,adjustStrokeForWhiteBackground:i=!0,hiddenIds:a,defaultHiddenIds:o=[],onVisibilityChange:l,formatAnnouncement:c})=>{const u=ui(),d=!!(u&&!r&&!l&&a===void 0),f=r||d,p=e||[],m=a!==void 0,[y,h]=W.useState(new Set(o)),g=m?new Set(a):y,[k,S]=W.useState(""),j=M=>{if(d&&u){const I=u.isHidden(M);u.toggle(M);const E=p.find(L=>L.id===M)?.label||M,A=c?c(M,I,E):`${E} ${I?"shown":"hidden"}`;S(A);return}if(!f)return;const b=new Set(g),_=b.has(M);_?b.delete(M):b.add(M),m||h(b);const N=p.filter(I=>!b.has(I.id)).map(I=>I.id),w=Array.from(b);l?.(N,w);const C=p.find(I=>I.id===M)?.label||M,D=c?c(M,_,C):`${C} ${_?"shown":"hidden"}`;S(D)};return s.jsxs("div",{className:"fdp-legend-wrapper",children:[s.jsx("ul",{className:`fdp-legend fdp-legend--${n}`,children:p.map((M,b)=>{const _=M.palette||t,N=M.color||(_==="region"?Nr(M.id,b):_==="severity"?Yx(M.id,b):_==="org-level"?Qx(M.id,b):Kt(b));let w=M.stroke||(_==="region"?Ha(M.id,b):_==="severity"?qx(M.id,b):_==="org-level"?e_(M.id,b):er(b));if(i&&w){const D=w.trim().toLowerCase();(D==="#fff"||D==="#ffffff"||D==="white"||/^rgb\(\s*255\s*,\s*255\s*,\s*255\s*\)$/.test(D))&&(w="#212b32")}const v=d&&u?u.isHidden(M.id):g.has(M.id),C=f?{"aria-pressed":!v,"aria-label":`${M.label} (${v?"show":"hide"})`,onClick:()=>j(M.id)}:{"aria-label":M.label};return s.jsxs("li",{className:`fdp-legend__item${v?" fdp-legend__item--hidden":""}`,children:[s.jsx("button",{type:"button",className:"fdp-legend__swatch",style:{backgroundColor:N,backgroundImage:M.patternDataUrl?`url(${M.patternDataUrl})`:void 0,backgroundSize:M.patternDataUrl?"auto":void 0,borderColor:w},...C}),s.jsx("span",{className:"fdp-legend__label",children:M.label})]},M.id)})}),f&&s.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite","aria-atomic":"true",children:k})]})},d_=({series:e,seriesIndex:t,palette:n,parseX:r,areaOnly:i=!1,visibilityMode:a="remove",baselineY:o=0,smooth:l=!0,stacked:c,gradientFill:u=!0,colors:d})=>{const f=Kn();if(!f)return null;const{xScale:p,yScale:m}=f,h=ui()?.isHidden(e.id)??!1,g=h&&a==="fade";if(h&&a==="remove")return null;const k=kn();W.useEffect(()=>{if(!k)return;const N=e.data.map(w=>({x:r(w),y:w.y}));return k.registerSeries(e.id,N),()=>k.unregisterSeries(e.id)},[k,e.id,e.data,r]);const S=d&&d[t],j=e.color||S||(n==="region"?Nr(e.id,t):Kt(t)),M=W.useMemo(()=>c&&c.length===e.data.length?jo(e.data,N=>p(r(N)),N=>{const w=e.data.indexOf(N);return m(c[w].y1)},{smooth:l}):jo(e.data,N=>p(r(N)),N=>m(N.y),{smooth:l}),[e.data,c,p,m,r,l]),b=W.useMemo(()=>{if(c&&c.length===e.data.length){const D=No().x(I=>p(r(I))).y0((I,B)=>m(c[B].y0)).y1((I,B)=>m(c[B].y1));return l&&D.curve(Fa),D(e.data)||""}const[N,w]=m.domain();let v=o;v<N?v=N:v>w&&(v=w);const C=No().x(D=>p(r(D))).y0(()=>m(v)).y1(D=>m(D.y));return l&&C.curve(Fa),C(e.data)||""},[e.data,c,p,m,r,o,l]),_=W.useId();return s.jsxs("g",{className:"fdp-area-series","data-series":e.id,opacity:g?.25:1,"aria-hidden":g?!0:void 0,children:[u&&s.jsx("defs",{children:s.jsxs("linearGradient",{id:_,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:j,stopOpacity:.25}),s.jsx("stop",{offset:"100%",stopColor:j,stopOpacity:0})]})}),s.jsx("path",{className:"fdp-area-series__fill",d:b,fill:u?`url(#${_})`:j,...u?{}:{fillOpacity:.25},stroke:"none"}),!i&&s.jsx("path",{d:M,fill:"none",stroke:j,strokeWidth:1})]})},f_=({series:e,seriesIndex:t,seriesCount:n,palette:r,parseX:i,focusable:a=!0,widthFactor:o=.8,groupGap:l=2,barWidth:c,adaptive:u=!1,adaptiveGroupOccupancy:d=.9,visibilityMode:f="remove",colorMode:p="series",allSeries:m,stacked:y,gapRatio:h=.15,minBarWidth:g,gradientFill:k=!0,gradientStrokeMatch:S=!0,opacity:j=1,fadedOpacity:M=.25,flatFillOpacity:b=1,colors:_})=>{const N=Math.max(0,h),w=Kn(),v=Pn();if(!w||!v)return null;const{xScale:C,yScale:D}=w,B=ui()?.isHidden(e.id)??!1,E=B&&f==="fade";if(B&&f==="remove")return null;const A=kn();W.useEffect(()=>{if(!A)return;const te=e.data.map(re=>({x:i(re),y:re.y}));return A.registerSeries(e.id,te),()=>A.unregisterSeries(e.id)},[A,e.id,e.data,i]);const L=typeof C.bandwidth=="function",z=L?C.bandwidth():void 0,ae=W.useMemo(()=>{if(z!=null)return z;const te=m&&m.length?m:[e],re=[];te.forEach(oe=>{oe.data.forEach(ge=>{const le=C(i(ge));Number.isFinite(le)&&re.push(le)})});const de=re.sort((oe,ge)=>oe-ge);if(de.length<=1)return 40;const V=[];for(let oe=1;oe<de.length;oe++)V.push(de[oe]-de[oe-1]);return V.sort((oe,ge)=>oe-ge),(V[Math.floor(V.length/2)]||40)*o},[e.data,m,C,i,o,z]),{basePerBar:q}=W.useMemo(()=>{if(L){const de=ae,V=Math.max(1,(de-l*(n-1))/n),ce=e.barWidth??c;let oe=ce?Math.min(ce,de):V;if(u){const ge=de*Math.min(1,Math.max(.05,d)),le=Math.max(1,(ge-l*(n-1))/n);oe=ce?Math.min(oe,le):le}return{basePerBar:oe}}const te=e.barWidth??c,re=Math.max(1,(ae-l*(n-1))/n);if(u){const de=m&&m.length?m:[e],V=[];de.forEach(Ie=>Ie.data.forEach(Fe=>{const ke=C(i(Fe));Number.isFinite(ke)&&V.push(ke)})),V.sort((Ie,Fe)=>Ie-Fe);const ce=[];for(let Ie=1;Ie<V.length;Ie++)ce.push(V[Ie]-V[Ie-1]);ce.sort((Ie,Fe)=>Ie-Fe);const ge=(ce[Math.floor(ce.length/2)]||ae)*Math.min(1,Math.max(.05,d)),le=Math.max(1,(ge-l*(n-1))/n);return{basePerBar:te?Math.min(te,le):le}}return te?{basePerBar:Math.min(te,re)}:{basePerBar:re}},[L,ae,l,n,c,e.barWidth,u,d,m,C,i]),O=W.useMemo(()=>{if(L)return[];const te=[];return(m&&m.length?m:[e]).forEach(de=>de.data.forEach(V=>{const ce=C(i(V));Number.isFinite(ce)&&te.push(ce)})),te.sort((de,V)=>de-V),Array.from(new Set(te))},[L,m,e,C,i]),ne=W.useMemo(()=>{if(L)return[];if(!O.length)return[];if(O.length===1)return[{center:O[0],left:0,right:v.innerWidth}];const te=[];for(let re=0;re<O.length;re++){const de=O[re],V=re===0?0:(O[re-1]+de)/2,ce=re===O.length-1?v.innerWidth:(de+O[re+1])/2;te.push({center:de,left:Math.max(0,V),right:Math.min(v.innerWidth,ce)})}return te},[L,O,v.innerWidth]),Y=W.useMemo(()=>{if(L||!ne.length)return;const te=Math.min(1,Math.max(.05,o)),re=ne.map(ge=>Math.max(2,ge.right-ge.left)),de=re.map(ge=>Math.max(2,Math.min(ge-1,ge*te)));let V=Math.min(...de);if(g)if(n<=1){const ge=Math.min(...re.map(le=>le-1));ge>=g&&V<g&&(V=Math.min(ge,g))}else{const ge=Math.min(...re.map(me=>me-1)),le=g*n+(n-1)*(g*N);le<=ge&&V<le&&(V=le)}if(n<=1)return g&&V<g&&re.every(le=>le>=g)?{groupWidth:g,barWidth:g}:{groupWidth:V,barWidth:V};let ce=V/(n+(n-1)*N);return ce<1&&(ce=1),g&&ce<g&&g*n+(n-1)*(g*N)<=V&&(ce=g),{groupWidth:ce*n+(n-1)*(ce*N),barWidth:ce}},[L,ne,o,n,N,g]),K=_&&_[t]?_[t]:void 0,X=e.color||K||(r==="region"?Nr(e.id,t):Kt(t)),J=r==="region"?Ha(e.id,t):er(t),pe=S&&(e.color||K)?X:J,ie=Number.isFinite(D(0))?D(0):D.range()[0],se=W.useId();return y&&y.length===e.data.length?s.jsxs("g",{className:"fdp-bar-series fdp-bar-series--stacked","data-series":e.id,opacity:E?M:j,"aria-hidden":E?!0:void 0,children:[k&&s.jsx("defs",{children:s.jsxs("linearGradient",{id:se,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:X,stopOpacity:.3}),s.jsx("stop",{offset:"60%",stopColor:X,stopOpacity:.14}),s.jsx("stop",{offset:"100%",stopColor:X,stopOpacity:.06})]})}),e.data.map((te,re)=>{const de=i(te),V=C(L?te.x:de);let ce,oe;if(L)ce=ae,oe=V;else{const F=ne.find(G=>Math.abs(G.center-V)<.5);if(!F||!Y)ce=q,oe=V-q/2;else{const{groupWidth:G}=Y;ce=G;let P=V-G/2;P<F.left&&(P=F.left),P+G>F.right&&(P=Math.max(F.left,F.right-G)),oe=P}}const ge=y[re],le=D(ge.y0),me=D(ge.y1),Ie=Math.min(le,me),Fe=Math.abs(me-le)||1;if(!L&&g&&ce<g){const F=ne.find(G=>Math.abs(G.center-V)<.5);if(F){const G=Math.max(2,F.right-F.left-1),P=Math.min(G,g);P>ce&&(ce=P,oe=Math.max(F.left,Math.min(F.right-ce,V-ce/2)))}}const ke=!E&&A?.focused?.seriesId===e.id&&A.focused.index===re,R=()=>{!A||E||A.setFocused({seriesId:e.id,index:re,x:de,y:ge.y1-ge.y0,clientX:oe+ce/2,clientY:Ie})},T=()=>{A?.focused?.seriesId===e.id&&A.focused.index===re&&A.clear()};return s.jsx("rect",{x:oe,y:Ie,width:ce,height:Fe,fill:k?`url(#${se})`:X,...k?{}:{fillOpacity:b},stroke:ke?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":k&&S?X:void 0,strokeWidth:ke?2:1,className:"fdp-bar fdp-bar--stacked",tabIndex:E||!a?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${de instanceof Date?de.toDateString():de} value ${ge.y1-ge.y0}`,onMouseEnter:R,onFocus:R,onMouseLeave:T,onBlur:T},re)})]}):s.jsxs("g",{className:"fdp-bar-series","data-series":e.id,opacity:E?M:j,"aria-hidden":E?!0:void 0,children:[k&&s.jsxs("defs",{children:[p==="series"&&s.jsxs("linearGradient",{id:se,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:X,stopOpacity:.3}),s.jsx("stop",{offset:"60%",stopColor:X,stopOpacity:.14}),s.jsx("stop",{offset:"100%",stopColor:X,stopOpacity:.06})]}),p==="category"&&e.data.map((te,re)=>{const V=_&&_[re]||(r==="region"?Nr(String(te.x),re):Kt(re)),ce=`${se}-${re}`;return s.jsxs("linearGradient",{id:ce,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:V,stopOpacity:.3}),s.jsx("stop",{offset:"60%",stopColor:V,stopOpacity:.14}),s.jsx("stop",{offset:"100%",stopColor:V,stopOpacity:.06})]},ce)})]}),e.data.map((te,re)=>{const de=i(te),V=C(L?te.x:de);let ce,oe;if(L){const U=ae;if(n<=1)oe=U,ce=V;else{oe=Math.max(1,U/(n+(n-1)*N));const Z=oe*N,Q=oe*n+Z*(n-1);ce=V+(U-Q)/2+t*(oe+Z)}}else{const U=ne.find(Z=>Z.center===V);if(!U||!Y)oe=q,ce=V-q/2,g&&oe<g&&(oe=g,ce=V-oe/2);else{const{barWidth:Z}=Y;oe=Z;const Q=n>1?Z*N:0,ee=oe*n+Q*(n-1);let fe=V-ee/2;fe<U.left&&(fe=U.left),fe+ee>U.right&&(fe=Math.max(U.left,U.right-ee)),ce=fe+t*(oe+Q)}if(g&&oe<g){const Z=ne.find(Q=>Math.abs(Q.center-V)<.5);if(Z){const Q=Math.max(2,Z.right-Z.left-1),ee=Math.min(Q,g);if(ee>oe)if(n<=1)oe=ee,ce=Math.max(Z.left,Math.min(Z.right-oe,V-oe/2));else{const fe=ee*N,ue=ee*n+fe*(n-1);if(ue<=Z.right-Z.left-1){oe=ee;const he=ue;let xe=V-he/2;xe<Z.left&&(xe=Z.left),xe+he>Z.right&&(xe=Math.max(Z.left,Z.right-he)),ce=xe+t*(oe+fe)}}}}}const ge=ce+oe/2,le=D(te.y),me=Math.min(ie,le),Ie=Math.abs(ie-le),Fe=!E&&A?.focused?.seriesId===e.id&&A.focused.index===re,ke=()=>{!A||E||A.setFocused({seriesId:e.id,index:re,x:de,y:te.y,clientX:ge,clientY:le})},R=()=>{A?.focused?.seriesId===e.id&&A.focused.index===re&&A.clear()},T=p==="category"&&_?_[re]:void 0,F=p==="category"?T||(r==="region"?Nr(String(te.x),re):Kt(re)):X,G=p==="category"?`${se}-${re}`:se,P=k&&S?F:p==="category"?r==="region"?Ha(String(te.x),re):er(re):pe,H=Fe?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":P||F;return s.jsx("rect",{x:ce,y:me,width:oe,height:Ie||1,fill:k?`url(#${G})`:F,...k?{}:{fillOpacity:b},stroke:H,strokeWidth:Fe?2:1,className:"fdp-bar",tabIndex:E||!a?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${de instanceof Date?de.toDateString():de} value ${te.y}`,onMouseEnter:ke,onFocus:ke,onMouseLeave:R,onBlur:R},re)})]})},h_=({series:e,innerWidth:t,innerHeight:n,paddingInner:r=.1,paddingOuter:i=.05,children:a,yTickCount:o=5})=>{const l=Pn(),c=t??l?.innerWidth??0,u=n??l?.innerHeight??0,d=W.useMemo(()=>e.flatMap(g=>g.data),[e]),f=W.useMemo(()=>{const g=new Set;return d.forEach(k=>g.add(k.x)),Array.from(g)},[d]),p=W.useMemo(()=>Math.max(0,...d.map(g=>g.y)),[d]),m=W.useMemo(()=>cu().domain(f).range([0,c]).paddingInner(r).paddingOuter(i),[f,c,r,i]),y=W.useMemo(()=>Sa().domain([0,p]).nice().range([u,0]),[p,u]),h=W.useMemo(()=>({xScale:m,yScale:y,getXTicks:()=>f,getYTicks:(g=o)=>y.ticks(g)}),[m,y,f,o]);return s.jsx(To.Provider,{value:h,children:a})},m_=({title:e,description:t,source:n,table:r,className:i,id:a,message:o="Interactive chart loadingâ€¦",forceFallback:l=!1})=>{const c=W.useId(),u=a||c,d=t?`${u}-desc`:void 0,f=n?`${u}-src`:void 0,p=typeof window<"u"&&!l;return s.jsxs("figure",{id:u,className:Aa("fdp-chart fdp-chart--noscript",i),"aria-labelledby":`${u}-title`,"aria-describedby":Aa(d,f),"data-component":"ChartNoScript",children:[s.jsx("header",{className:"fdp-chart__header",children:s.jsx("h3",{id:`${u}-title`,className:"fdp-chart__title",children:e})}),t&&s.jsx("p",{id:d,className:"fdp-chart__description",children:t}),!p&&s.jsx("div",{className:"fdp-chart__loading",role:"status","aria-live":"polite",children:o}),s.jsxs("div",{className:"fdp-chart__fallback",role:"group","aria-label":e,children:[s.jsx("noscript",{children:s.jsx("div",{className:"fdp-chart__noscript-wrapper",children:s.jsx(Qt,{...r})})}),s.jsx("div",{className:"fdp-chart__table","data-fallback-table":!0,children:s.jsx(Qt,{...r})})]}),n&&s.jsx("figcaption",{className:"fdp-chart__caption",children:n&&s.jsxs("small",{id:f,className:"fdp-chart__source",children:["Source: ",n]})})]})},p_=({selector:e="figure.fdp-chart",onEnhanced:t,delay:n=0,children:r})=>{const i=W.useRef(null);return W.useEffect(()=>{const a=i.current;if(!a)return;const o=()=>{const l=Array.from(a.querySelectorAll(e));if(l.length===0)return;const c=[];l.forEach(u=>{u.classList.contains("fdp-chart--enhanced")||(u.classList.add("fdp-chart--enhanced"),c.push(u))}),c.length&&t&&t(c)};if(n>0){if(typeof window>"u")return;const l=window.setTimeout(o,n);return()=>window.clearTimeout(l)}o()},[e,t,n]),s.jsx("div",{ref:i,children:r})},cf=({label:e,value:t,unit:n,delta:r,status:i="neutral",variant:a="default",subtitle:o,metadata:l,trendData:c,loading:u=!1,error:d,valueFormatter:f,className:p,style:m,id:y,announceDelta:h=!0,visual:g})=>{const k=W.useId(),S=y||k,j=`${S}-label`,M=`${S}-value`,b=`${S}-delta`,_=typeof t=="number"&&!Number.isNaN(t),N=u?"â€”":d?"":_?f?f(t):t.toLocaleString():t;let w,v="",C="";if(r&&!u&&!d){w=r.direction||(r.value>0?"up":r.value<0?"down":"neutral");const D=Math.abs(r.value),I=w==="up"?`+${D}`:w==="down"?`-${D}`:"0",B=r.isPercent?"%":"";if(v=`${I}${B}`,r.ariaLabel)C=r.ariaLabel;else{const E=r.invert?w==="down":w==="up";C=`${w==="neutral"?"no change":w==="up"?"up":"down"} ${D}${B}${w==="neutral"?"":E?" (improvement)":" (worse)"}`}}return s.jsx("div",{className:Aa("fdp-metric-card",a&&`fdp-metric-card--${a}`,i&&`fdp-metric-card--status-${i}`,u&&"fdp-metric-card--loading",d&&"fdp-metric-card--error",p),style:m,role:"group","aria-labelledby":j,"data-component":"MetricCard",children:s.jsxs("div",{className:"fdp-metric-card__inner",children:[s.jsxs("div",{className:"fdp-metric-card__header",children:[s.jsx("h3",{id:j,className:"fdp-metric-card__label",children:e}),l&&s.jsx("div",{className:"fdp-metric-card__metadata",children:l})]}),s.jsxs("div",{className:"fdp-metric-card__content",children:[s.jsxs("div",{className:"fdp-metric-card__value-section",children:[s.jsx("div",{id:M,className:"fdp-metric-card__value",children:u?s.jsx("div",{className:"fdp-metric-card__skeleton","aria-hidden":"true",children:s.jsx("div",{className:"fdp-metric-card__skeleton-line fdp-metric-card__skeleton-line--value"})}):d?s.jsx("div",{className:"fdp-metric-card__error",role:"alert",children:d}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"fdp-metric-card__number",children:N}),n&&s.jsx("span",{className:"fdp-metric-card__unit",children:n})]})}),o&&!u&&!d&&s.jsx("div",{className:"fdp-metric-card__subtitle",children:o})]}),r&&!u&&!d&&s.jsx("div",{className:"fdp-metric-card__delta-section",children:s.jsxs("div",{id:b,"aria-label":C,className:Aa("fdp-metric-card__delta",w&&`fdp-metric-card__delta--${w}`),children:[s.jsx("span",{className:"fdp-metric-card__delta-value",children:v}),r.period&&s.jsx("span",{className:"fdp-metric-card__delta-period",children:r.period})]})}),c&&c.length>0&&!u&&!d&&s.jsx("div",{className:"fdp-metric-card__trend","aria-hidden":"true"})]}),g&&!d&&s.jsx("div",{className:"fdp-metric-card__visual","aria-hidden":"true",children:g}),h&&r&&!r.ariaLabel&&!u&&!d&&s.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite",children:C})]})})};var ot=(e=>(e.Xs="xs",e.Sm="sm",e.Md="md",e.Lg="lg",e.Xl="xl",e.Full="full",e))(ot||{}),uf=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(uf||{}),An=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(An||{}),De=(e=>(e.Improvement="improvement",e.Concern="concern",e.Neither="neither",e.Suppressed="suppressed",e))(De||{});const zo=["single_point","two_sigma","shift","trend"];zo.reduce((e,t,n)=>(e[t]=n+1,e),{});const g_={single_point:"Single point beyond process limit",two_sigma:"Two of three beyond 2Ïƒ on one side",shift:"Sustained shift (run)",trend:"Monotonic trend"},y_={single_point:"point",two_sigma:"cluster",shift:"sustained",trend:"sustained"},df=zo.reduce((e,t,n)=>(e[t]={id:t,rank:n+1,label:g_[t],category:y_[t],participatesInRanking:!0},e),{});zo.map(e=>df[e]);var di=(e=>(e.SinglePointAbove="single_above",e.SinglePointBelow="single_below",e.TwoOfThreeAbove="two_of_three_above",e.TwoOfThreeBelow="two_of_three_below",e.FourOfFiveAbove="four_of_five_above",e.FourOfFiveBelow="four_of_five_below",e.ShiftHigh="shift_high",e.ShiftLow="shift_low",e.TrendIncreasing="trend_inc",e.TrendDecreasing="trend_dec",e.FifteenInnerThird="fifteen_inner_third",e))(di||{}),En=(e=>(e.Pass="pass",e.Fail="fail",e.None="none",e))(En||{}),ff=(e=>(e.Shift="shift",e.Trend="trend",e.Point="point",e))(ff||{});const Mr={singlePointUp:{tooltip:"Single point above upper control limit",narration:"Single point beyond a control limit"},singlePointDown:{tooltip:"Single point below lower control limit",narration:"Single point beyond a control limit"},twoOfThreeUp:{tooltip:"Two of three points beyond +2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},twoOfThreeDown:{tooltip:"Two of three points beyond -2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},fourOfFiveUp:{tooltip:"Four of five points beyond +1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},fourOfFiveDown:{tooltip:"Four of five points beyond -1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},shiftUp:{tooltip:"Shift: run of points above centre line",narration:"Shift (run on one side of mean)"},shiftDown:{tooltip:"Shift: run of points below centre line",narration:"Shift (run on one side of mean)"},trendUp:{tooltip:"Trend: consecutive increasing points",narration:"Trend (consecutive increases)"},trendDown:{tooltip:"Trend: consecutive decreasing points",narration:"Trend (consecutive decreases)"}};function za(e){if(!e)return[];const t=[];return e.specialCauseSinglePointUp&&t.push("singlePointUp"),e.specialCauseSinglePointDown&&t.push("singlePointDown"),e.specialCauseTwoOfThreeUp&&t.push("twoOfThreeUp"),e.specialCauseTwoOfThreeDown&&t.push("twoOfThreeDown"),e.specialCauseFourOfFiveUp&&t.push("fourOfFiveUp"),e.specialCauseFourOfFiveDown&&t.push("fourOfFiveDown"),e.specialCauseShiftUp&&t.push("shiftUp"),e.specialCauseShiftDown&&t.push("shiftDown"),e.specialCauseTrendUp&&t.push("trendUp"),e.specialCauseTrendDown&&t.push("trendDown"),t}function Oa(e){switch(e){case De.Improvement:return"Improvement signal";case De.Concern:return"Concern signal";case De.Neither:return"Common cause variation";case De.Suppressed:return null;default:return null}}function hf(e){switch(e){case En.Pass:return"Target met";case En.Fail:return"Target not met";default:return null}}function b_(e,t,n){if(e==null||!Number.isFinite(t)||t<=0)return null;const r=Math.abs((n-e)/t);return r<1?"Within 1Ïƒ":r<2?"Between 1â€“2Ïƒ":r<3?"Between 2â€“3Ïƒ":"Beyond 3Ïƒ"}const qt={improvement:{token:"var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",hex:"#00B0F0"},concern:{token:"var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",hex:"#E46C0A"},neither:{token:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",hex:"#A6A6A6"},suppressed:{token:"var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",hex:"#490092"}};function mf(e){return e?qt[e]?.token??qt.neither.token:qt.neither.token}function v_(e){return e?qt[e]?.hex??qt.neither.hex:qt.neither.hex}var tr=(e=>(e.Pass="pass",e.Fail="fail",e.Uncertain="uncertain",e))(tr||{});const x_={pass:"#00B0F0",fail:"#E46C0A",uncertain:"#A6A6A6"},__={pass:"P",fail:"F",uncertain:"?"};var lt=(e=>(e.HigherIsBetter="higher_is_better",e.LowerIsBetter="lower_is_better",e.ContextDependent="context_dependent",e))(lt||{}),je=(e=>(e.Higher="higher",e.Lower="lower",e))(je||{}),jt=(e=>(e.Improving="improving",e.Deteriorating="deteriorating",e.No_Judgement="no_judgement",e.None="none",e))(jt||{}),Se=(e=>(e.SpecialCauseImproving="special_cause_improving",e.SpecialCauseDeteriorating="special_cause_deteriorating",e.CommonCause="common_cause",e.SpecialCauseNoJudgement="special_cause_no_judgement",e))(Se||{});const w_=e=>{const t=e.replace("#",""),n=parseInt(t.slice(0,2),16)/255,r=parseInt(t.slice(2,4),16)/255,i=parseInt(t.slice(4,6),16)/255,a=[n,r,i].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*a[0]+.7152*a[1]+.0722*a[2]<.55?"#ffffff":"#212b32"},Ra={special_cause_deteriorating:{hex:qt.concern.hex,judgement:"deteriorating",label:"Special Cause (Deteriorating)",description:"Deteriorating variation detected (special cause) relative to baseline."},special_cause_improving:{hex:qt.improvement.hex,judgement:"improving",label:"Special Cause (Improving)",description:"Improving variation detected (special cause) relative to baseline."},common_cause:{hex:qt.neither.hex,judgement:"none",label:"Common Cause",description:"Common cause variation only â€“ no special cause detected."},special_cause_no_judgement:{hex:qt.suppressed.hex,judgement:"no_judgement",label:"Special Cause (No Judgement)",description:"Special cause detected without assigning improving/deteriorating judgement."}};Object.values(Ra).forEach(e=>{e.text||(e.text=w_(e.hex))});const pf=e=>Ra[e],Oo=e=>Ra[e].judgement||"none",gf={special:{higher:[{cx:77.5,cy:158.5},{cx:114,cy:175},{cx:150.5,cy:158.5},{cx:188,cy:125},{cx:225,cy:137}],lower:[{cx:77.5,cy:139.5},{cx:114,cy:124.5},{cx:150.5,cy:139.5},{cx:188,cy:175.5},{cx:224.5,cy:162}]},common:[{cx:76.5,cy:149.5},{cx:113,cy:179.5},{cx:149.5,cy:117},{cx:187,cy:171},{cx:223.5,cy:158}]};function S_(e,t){let n;return e==="common_cause"?n=gf.common:n=gf.special[t==="lower"?"lower":"higher"],n.map(r=>({...r}))}let Ro=null;try{Ro=require("@fergusbisset/nhs-fdp-design-system/dist/js/tokens.json")?.color?.["data-viz"]?.spc||null}catch{}const wt=(e,t)=>{if(!Ro)return t;const n=e.split(".");let r=Ro;for(const a of n){if(r==null)break;r=r[a]}const i=r;return i==null?t:typeof i=="string"||typeof i=="number"?String(i):i.$value!=null?String(i.$value):i.value!=null?String(i.value):t},Ua=()=>({start:wt("gradient.stop.start-opacity","0.12"),mid:wt("gradient.stop.mid-opacity","0.03"),end:wt("gradient.stop.end-opacity","0"),triStart:wt("gradient.stop.triangle-start-opacity",wt("gradient.stop.start-opacity","0.12")),triMid:wt("gradient.stop.triangle-mid-opacity",wt("gradient.stop.mid-opacity","0.03")),triEnd:wt("gradient.stop.triangle-end-opacity",wt("gradient.stop.end-opacity","0"))}),Wa={improvement:"improvement",concern:"concern",noJudgement:"no-judgement",common:"common-cause"},Ga={improvement:"#00B0F0",concern:"#E46C0A",noJudgement:"#490092",common:"#A6A6A6"},yf=()=>wt(Wa.improvement,Ga.improvement),bf=()=>wt(Wa.concern,Ga.concern),k_=()=>wt(Wa.noJudgement,Ga.noJudgement),nr=()=>wt(Wa.common,Ga.common);function Va(e){switch(e){case De.Improvement:return yf();case De.Concern:return bf();case De.Neither:case De.Suppressed:default:return nr()}}function vf(e){switch(e){case Se.SpecialCauseImproving:return yf();case Se.SpecialCauseDeteriorating:return bf();case Se.SpecialCauseNoJudgement:return k_();case Se.CommonCause:default:return nr()}}var Et=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(Et||{}),Le=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(Le||{}),we=(e=>(e.ImprovementHigh="ImprovementHigh",e.ImprovementLow="ImprovementLow",e.ConcernHigh="ConcernHigh",e.ConcernLow="ConcernLow",e.NeitherHigh="NeitherHigh",e.NeitherLow="NeitherLow",e.CommonCause="CommonCause",e))(we||{}),Xe=(e=>(e.SinglePoint="SinglePoint",e.TwoSigma="TwoSigma",e.Shift="Shift",e.Trend="Trend",e))(Xe||{}),rr=(e=>(e.Upwards="Upwards",e.Downwards="Downwards",e.Same="Same",e))(rr||{}),en=(e=>(e.Up="Up",e.Down="Down",e))(en||{}),jr=(e=>(e.Improvement="Improvement",e.Concern="Concern",e))(jr||{}),Tr=(e=>(e.SqlPrimeThenRule="SqlPrimeThenRule",e.PreferImprovement="PreferImprovement",e.RuleHierarchy="RuleHierarchy",e))(Tr||{}),vt=(e=>(e.FavourableSide="FavourableSide",e.CrossingAfterFavourable="CrossingAfterFavourable",e.ExtremeFavourable="ExtremeFavourable",e.FirstFavourable="FirstFavourable",e.LongestFavourable="LongestFavourable",e.LastFavourable="LastFavourable",e.UnfavourableSide="UnfavourableSide",e.CrossingAfterUnfavourable="CrossingAfterUnfavourable",e.ExtremeUnfavourable="ExtremeUnfavourable",e.FirstUnfavourable="FirstUnfavourable",e.LongestUnfavourable="LongestUnfavourable",e.LastUnfavourable="LastUnfavourable",e))(vt||{}),Cn=(e=>(e.Off="Off",e.AutoWhenConflict="AutoWhenConflict",e.Always="Always",e))(Cn||{}),tn=(e=>(e.Info="info",e.Warning="warning",e.Error="error",e))(tn||{}),Ya=(e=>(e.Config="config",e.Data="data",e.Limits="limits",e.SpecialCause="special_cause",e.Baseline="baseline",e.Logic="logic",e.Target="target",e.Ghost="ghost",e.Partition="partition",e))(Ya||{}),Za=(e=>(e.UnknownChartType="unknown_chart_type",e.InsufficientPointsGlobal="insufficient_points_global",e.VariationConflictRow="variation_conflict_row",e.NullValuesExcluded="null_values_excluded",e.TargetIgnoredRareEvent="target_ignored_rare_event",e.GhostRowsRareEvent="ghost_rows_rare_event",e.InsufficientPointsPartition="insufficient_points_partition",e.BaselineWithSpecialCause="baseline_with_special_cause",e.PartitionCapApplied="partition_cap_applied",e.GlobalCapApplied="global_cap_applied",e))(Za||{});const Fn={[Xe.SinglePoint]:1,[Xe.TwoSigma]:2,[Xe.Shift]:3,[Xe.Trend]:4},xf=3.267,C_=2.66,_f=.2777;function Ne(e){return typeof e=="number"&&!Number.isNaN(e)}function Dr(e){return e.reduce((t,n)=>t+n,0)/(e.length||1)}function wf(e,t){const n=new Array(e.length).fill(null);let r=null;for(let i=0;i<e.length;i++){const a=e[i];if(!(t[i]||!Ne(a))){if(r!==null){const o=e[r];Ne(o)&&(n[i]=Math.abs(a-o))}r=i}}return n}function Sf(e,t){const n=e.filter(Ne);if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=n.slice();if(t){const a=Dr(r),o=xf*a;r=r.filter(l=>l<=o)}const i=Dr(r);return{mrMean:i,mrUcl:xf*i}}function kf(e,t){if(!Ne(e)||!Ne(t))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=C_*t,r=2/3*n,i=1/3*n;return{upperProcessLimit:e+n,lowerProcessLimit:e-n,upperTwoSigma:e+r,lowerTwoSigma:e-r,upperOneSigma:e+i,lowerOneSigma:e-i}}function N_(e,t,n,r){if(e===Et.T){const f=t.map(w=>Ne(w)&&w>0?Math.pow(w,_f):null),p=wf(f,n),m=Sf(p,r),y=f.filter((w,v)=>!n[v]&&Ne(w)),h=y.length?Dr(y):NaN,g=kf(h,m.mrMean),k=w=>Ne(w)&&w>0?Math.pow(w,1/_f):null,S=Ne(g.upperProcessLimit)?k(g.upperProcessLimit):null,j=Ne(g.lowerProcessLimit)&&g.lowerProcessLimit>0?k(g.lowerProcessLimit):null,M=Ne(g.upperTwoSigma)?k(g.upperTwoSigma):null,b=Ne(g.lowerTwoSigma)&&g.lowerTwoSigma>0?k(g.lowerTwoSigma):null,_=Ne(g.upperOneSigma)?k(g.upperOneSigma):null,N=Ne(g.lowerOneSigma)&&g.lowerOneSigma>0?k(g.lowerOneSigma):null;return{mean:Ne(h)&&h>0?k(h):null,mr:p,mrMean:m.mrMean,mrUcl:m.mrUcl,upperProcessLimit:S,lowerProcessLimit:j,upperTwoSigma:M,lowerTwoSigma:b,upperOneSigma:_,lowerOneSigma:N}}if(e===Et.G){const f=t.filter((D,I)=>!n[I]&&Ne(D)),p=f.length?Dr(f):NaN,m=Ne(p)?1/(p+1):NaN,y=D=>{if(!Ne(m)||m<=0||m>=1)return NaN;const I=Math.ceil(Math.log(1-D)/Math.log(1-m))-1;return Math.max(0,I)},h=.00135,g=1-.00135,k=.02275,S=1-.02275,j=.158655,M=1-.158655,b=y(g),_=y(h),N=y(S),w=y(k),v=y(M),C=y(j);return{mean:Ne(p)?p:null,mr:new Array(t.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:Ne(b)?b:null,lowerProcessLimit:Ne(_)?_:null,upperTwoSigma:Ne(N)?N:null,lowerTwoSigma:Ne(w)?w:null,upperOneSigma:Ne(v)?v:null,lowerOneSigma:Ne(C)?C:null}}if(e!==Et.XmR)return{mean:NaN,mr:new Array(t.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const i=wf(t,n),a=i.filter(Ne),o=a.length?Dr(a):NaN,l=Ne(o)?3.267*o:NaN;let c=NaN;{const f=t.reduce((p,m,y)=>{if(n[y]||!Ne(m))return p;if(!r)return p.push(m),p;const h=i[y];return(h===null||!Ne(l)||Ne(h)&&h<=l)&&p.push(m),p},[]);c=f.length?Dr(f):NaN}const u=Sf(i,r),d=kf(c,u.mrMean);return{mean:c,mr:i,mrMean:u.mrMean,mrUcl:u.mrUcl,...d}}function M_(e,t){const n=e.map((c,u)=>u).filter(c=>!e[c].ghost&&Ne(e[c].value)),r=c=>e[c],i=t.shiftPoints,a=t.trendPoints;let o=[],l=[];for(const c of n){const u=r(c);if(!Ne(u.mean)||!Ne(u.value)?(o=[],l=[]):u.value>u.mean?(o.push(c),l=[]):u.value<u.mean?(l.push(c),o=[]):(o=[],l=[]),o.length>=i)for(const d of o)r(d).shiftUp=!0;if(l.length>=i)for(const d of l)r(d).shiftDown=!0}for(let c=0;c<=n.length-3;c++){const d=n.slice(c,c+3).map(r);if(!d.every(M=>Ne(M.value)&&Ne(M.mean)))continue;const f=d[0].mean,p=d.every(M=>M.value>f),m=d.every(M=>M.value<f);if(!p&&!m)continue;const y=d[0].upperTwoSigma??1/0,h=d[0].lowerTwoSigma??-1/0,g=d[0].upperProcessLimit??1/0,k=d[0].lowerProcessLimit??-1/0,S=d.filter(M=>t.twoSigmaIncludeAboveThree?M.value>y:M.value>y&&M.value<=g),j=d.filter(M=>t.twoSigmaIncludeAboveThree?M.value<h:M.value<h&&M.value>=k);p&&S.length>=2&&S.forEach(M=>M.twoSigmaUp=!0),m&&j.length>=2&&j.forEach(M=>M.twoSigmaDown=!0)}if(t.enableFourOfFiveRule)for(let c=0;c<=n.length-5;c++){const d=n.slice(c,c+5).map(r);if(!d.every(S=>Ne(S.value)&&Ne(S.mean)))continue;const f=d[0].mean,p=d.every(S=>S.value>f),m=d.every(S=>S.value<f);if(!p&&!m)continue;const y=d[0].upperOneSigma??1/0,h=d[0].lowerOneSigma??-1/0,g=d.filter(S=>S.value>y),k=d.filter(S=>S.value<h);p&&g.length>=4&&g.forEach(S=>S.fourOfFiveUp=!0),m&&k.length>=4&&k.forEach(S=>S.fourOfFiveDown=!0)}for(let c=0;c<=n.length-a;c++){const u=n.slice(c,c+a),d=u.map(r);if(!d.every(m=>Ne(m.value)))continue;let f=!0,p=!0;for(let m=1;m<d.length&&(d[m].value>d[m-1].value||(f=!1),d[m].value<d[m-1].value||(p=!1),!(!f&&!p));m++);f&&u.forEach(m=>r(m).trendUp=!0),p&&u.forEach(m=>r(m).trendDown=!0)}}function Cf(e){const t=[],n=[];e.singlePointUp&&t.push({id:Xe.SinglePoint,rank:Fn[Xe.SinglePoint]}),e.singlePointDown&&n.push({id:Xe.SinglePoint,rank:Fn[Xe.SinglePoint]}),e.twoSigmaUp&&t.push({id:Xe.TwoSigma,rank:Fn[Xe.TwoSigma]}),e.twoSigmaDown&&n.push({id:Xe.TwoSigma,rank:Fn[Xe.TwoSigma]}),e.shiftUp&&t.push({id:Xe.Shift,rank:Fn[Xe.Shift]}),e.shiftDown&&n.push({id:Xe.Shift,rank:Fn[Xe.Shift]}),e.trendUp&&t.push({id:Xe.Trend,rank:Fn[Xe.Trend]}),e.trendDown&&n.push({id:Xe.Trend,rank:Fn[Xe.Trend]});const r=t.reduce((o,l)=>Math.max(o,l.rank),0),i=n.reduce((o,l)=>Math.max(o,l.rank),0),a=r>i?rr.Upwards:i>r?rr.Downwards:rr.Same;return{up:t,dn:n,upMax:r,dnMax:i,primeDirection:a}}function Nf(e,t){const n=t===Le.Up?e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp:t===Le.Down?e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown:!1,r=t===Le.Up?e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown:t===Le.Down?e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp:!1;return{aligned:n,opposite:r}}function Mf(e,t,n,r=!1,i,a,o=!1){const{up:l,dn:c,upMax:u,dnMax:d,primeDirection:f}=Cf(e);e.primeDirection=f;const p=e.specialCauseImprovementValue,m=e.specialCauseConcernValue;e.specialCauseImprovementValue!==null&&e.specialCauseConcernValue!==null&&j_({row:e,metric:t,metricConflictRule:n,preferImprovementWhenConflict:r,preferTrendWhenConflict:o,primeDirection:f,conflictStrategy:i,ruleHierarchy:a}),t===Le.Up?e.variationIcon=e.specialCauseImprovementValue!==null?we.ImprovementHigh:e.specialCauseConcernValue!==null?we.ConcernLow:we.CommonCause:t===Le.Down?e.variationIcon=e.specialCauseImprovementValue!==null?we.ImprovementLow:e.specialCauseConcernValue!==null?we.ConcernHigh:we.CommonCause:e.variationIcon=we.CommonCause;const y=e.specialCauseImprovementValue!==null?en.Up:e.specialCauseConcernValue!==null?en.Down:void 0,h=y===en.Up?u:y===en.Down?d:Math.max(u,d);e.primeRank=h||void 0;const g=y===en.Up?l.find(k=>k.rank===h):y===en.Down?c.find(k=>k.rank===h):void 0;return e.primeRuleId=g?.id,{originalImprovement:p,originalConcern:m}}function j_(e){const{row:t,metric:n,metricConflictRule:r,preferImprovementWhenConflict:i,preferTrendWhenConflict:a,primeDirection:o=t.primeDirection??rr.Same,conflictStrategy:l,ruleHierarchy:c}=e;if(a&&t.specialCauseImprovementValue!==null&&t.specialCauseConcernValue!==null){const d=!!t.trendUp,f=!!t.trendDown;if(n===Le.Up){if(d&&!f){t.specialCauseConcernValue=null;return}if(!d&&f){t.specialCauseImprovementValue=null;return}}else if(n===Le.Down){if(f&&!d){t.specialCauseConcernValue=null;return}if(!f&&d){t.specialCauseImprovementValue=null;return}}}const u=i?Tr.PreferImprovement:l??Tr.SqlPrimeThenRule;if(u===Tr.PreferImprovement){n===Le.Up?t.specialCauseConcernValue=null:n===Le.Down&&(t.specialCauseImprovementValue=null);return}if(u===Tr.RuleHierarchy){const d=c??[Xe.Trend,Xe.Shift,Xe.TwoSigma,Xe.SinglePoint],{up:f,dn:p}=Cf(t);for(const m of d){const y=f.some(g=>g.id===m),h=p.some(g=>g.id===m);if(y&&!h){n===Le.Up?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null;return}if(h&&!y){n===Le.Up?t.specialCauseImprovementValue=null:t.specialCauseConcernValue=null;return}if(y&&h){(n===Le.Up||n===Le.Down)&&(r===jr.Improvement?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null);return}}}o===rr.Upwards?n===Le.Up?t.specialCauseConcernValue=null:n===Le.Down&&(t.specialCauseImprovementValue=null):o===rr.Downwards?n===Le.Up?t.specialCauseImprovementValue=null:n===Le.Down&&(t.specialCauseConcernValue=null):r===jr.Improvement?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null}var Uo=(e=>(e.Up="Up",e.Down="Down",e))(Uo||{});function T_(e){return e>0?1:e<0?-1:0}function D_(e){const t=T_(e);if(t>0)return"Above";if(t<0)return"Below"}function jf(e){const t=[],n=(o,l,c)=>({segStart:o,segSide:l,minV:c,maxV:c,maxAbsDelta:0}),r=(o,l,c,u,d)=>({minV:Math.min(c,o),maxV:Math.max(u,o),maxAbsDelta:Math.max(d,l)}),i=(o,l,c,u,d,f,p,m)=>{o.push({trendDirection:m,start:l,end:c,side:u,minValue:d,maxValue:f,maxAbsDeltaFromMean:p})};let a=0;for(;a<e.length;){const o=e[a];if(!o||o.value==null||o.ghost||!o.trendUp&&!o.trendDown){a++;continue}const l=o.trendUp?"Up":o.trendDown?"Down":void 0;let c=a,u=a;for(;u<e.length;u++){const k=e[u];if(!k||k.value==null||k.ghost||!(l==="Up"?k.trendUp:k.trendDown))break}const d=u-1,f=[];let p,m,y=1/0,h=-1/0,g=0;for(let k=c;k<=d;k++){const S=e[k];if(S.value==null)continue;const j=S.value-(S.mean??0),M=D_(j);if(!M){p!==void 0&&(i(f,p,k-1,m,y,h,g,l),p=void 0,m=void 0,y=1/0,h=-1/0,g=0);continue}if(p===void 0)({segStart:p,segSide:m,minV:y,maxV:h,maxAbsDelta:g}=(()=>{const b=n(k,M,S.value);return{segStart:b.segStart,segSide:b.segSide,minV:b.minV,maxV:b.maxV,maxAbsDelta:Math.abs(j)}})());else if(M!==m)i(f,p,k-1,m,y,h,g,l),{segStart:p,segSide:m,minV:y,maxV:h,maxAbsDelta:g}=(()=>{const b=n(k,M,S.value);return{segStart:b.segStart,segSide:b.segSide,minV:b.minV,maxV:b.maxV,maxAbsDelta:Math.abs(j)}})();else{const b=r(S.value,Math.abs(j),y,h,g);y=b.minV,h=b.maxV,g=b.maxAbsDelta}}p!==void 0&&i(f,p,d,m,y,h,g,l),t.push({trendDirection:l,start:c,end:d,segments:f}),a=d+1}return t}function I_(e){if(e===Le.Up)return"Above";if(e===Le.Down)return"Below"}function L_(e){if(e)return e==="Above"?"Below":"Above"}function Tf(e,t){const n=t.strategy??vt.CrossingAfterFavourable,r=I_(t.metricImprovement),i=L_(r),a=[];for(const o of e){if(!r){if(n===vt.ExtremeFavourable||n===vt.CrossingAfterFavourable){const l=o.segments;if(l.length===0)continue;let c=l[0];for(const u of l)u.maxAbsDeltaFromMean>c.maxAbsDeltaFromMean&&(c=u);a.push(c)}continue}if(n===vt.FavourableSide){a.push(...o.segments.filter(l=>l.side===r));continue}if(n===vt.UnfavourableSide){a.push(...o.segments.filter(l=>l.side===i));continue}if(n===vt.CrossingAfterFavourable){const l=o.segments;let c;for(let u=0;u<l.length;u++){const d=l[u];if(d.side===r&&u>0&&l[u-1].side!==r){c=d;break}}if(!c){const u=l.filter(d=>d.side===r);u.length>0&&(c=u.reduce((d,f)=>f.end-f.start>d.end-d.start?f:d,u[0]))}c&&a.push(c);continue}if(n===vt.CrossingAfterUnfavourable){const l=o.segments;let c;for(let u=0;u<l.length;u++){const d=l[u];if(d.side===i&&u>0&&l[u-1].side!==i){c=d;break}}if(!c){const u=l.filter(d=>d.side===i);u.length>0&&(c=u.reduce((d,f)=>f.end-f.start>d.end-d.start?f:d,u[0]))}c&&a.push(c);continue}if(n===vt.ExtremeFavourable){const l=o.segments.filter(u=>u.side===r);if(l.length===0)continue;const c=l.reduce((u,d)=>d.maxAbsDeltaFromMean>u.maxAbsDeltaFromMean?d:u);a.push(c);continue}if(n===vt.ExtremeUnfavourable){const l=o.segments.filter(u=>u.side===i);if(l.length===0)continue;const c=l.reduce((u,d)=>d.maxAbsDeltaFromMean>u.maxAbsDeltaFromMean?d:u);a.push(c);continue}if(n===vt.FirstFavourable){const l=o.segments.find(c=>c.side===r);l&&a.push(l);continue}if(n===vt.FirstUnfavourable){const l=o.segments.find(c=>c.side===i);l&&a.push(l);continue}if(n===vt.LongestFavourable){const l=o.segments.filter(u=>u.side===r);if(l.length===0)continue;const c=l.reduce((u,d)=>d.end-d.start>u.end-u.start?d:u);a.push(c);continue}if(n===vt.LongestUnfavourable){const l=o.segments.filter(u=>u.side===i);if(l.length===0)continue;const c=l.reduce((u,d)=>d.end-d.start>u.end-u.start?d:u);a.push(c);continue}if(n===vt.LastFavourable){const l=o.segments.filter(c=>c.side===r);if(l.length===0)continue;a.push(l[l.length-1]);continue}if(n===vt.LastUnfavourable){const l=o.segments.filter(c=>c.side===i);if(l.length===0)continue;a.push(l[l.length-1]);continue}}return a}var qe=(e=>(e.Common="Common",e.Improvement="Improvement",e.Concern="Concern",e.NoJudgement="NoJudgement",e))(qe||{}),Ir=(e=>(e.Ungated="Ungated",e.Gated="Gated",e))(Ir||{});function P_(e){const t=!!(e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp),n=!!(e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown);return{upAny:t,downAny:n}}function fi(e,t){const n=t.metricImprovement,r=t.trendVisualMode??"Ungated",i=t.enableNeutralNoJudgement??!0;return e.map(a=>{if(!a||a.value==null||a.ghost)return"Common";const{upAny:o,downAny:l}=P_(a);if(o&&l)return"Improvement";switch(a.variationIcon){case we.ImprovementHigh:case we.ImprovementLow:return"Improvement";case we.ConcernHigh:case we.ConcernLow:return"Concern";case we.NeitherHigh:case we.NeitherLow:{if(r==="Ungated"&&n!==Le.Neither){if(o&&!l)return n===Le.Up?"Improvement":"Concern";if(l&&!o)return n===Le.Down?"Improvement":"Concern"}return i?"NoJudgement":"Common"}default:return"Common"}})}function A_(e,t,n){const r=n?.mode??"Disabled";if(!e.length)return[];let i=fi(e,{metricImprovement:t,trendVisualMode:Ir.Ungated,enableNeutralNoJudgement:!0});if(r!=="RecalcCrossing"||t===Le.Neither)return i;const a=Math.max(0,n?.preWindow??2),o=Math.max(0,n?.postWindow??3),l=n?.prePolarity??"Opposite",c=(f,p)=>{if(f<0||f>=i.length)return;const m=i[f];(m===qe.Common||m===qe.NoJudgement)&&(i[f]=p)},u=f=>{if(f==null)return null;const p=e.reduce((y,h)=>(h.partitionId===f&&typeof h.value=="number"&&!h.ghost&&y.push(h.value),y),[]);return p.length?p.reduce((y,h)=>y+h,0)/p.length:null},d=Array.isArray(n?.boundaryIndices)&&n.boundaryIndices.length?n.boundaryIndices.slice().filter(f=>Number.isFinite(f)):e.reduce((f,p,m)=>{if(m===0)return f;const y=e[m-1];return y&&p&&p.partitionId!==y.partitionId&&f.push(m),f},[]);for(const f of d){const p=e[f-1],m=e[f];if(!p||!m)continue;let y=f-1;for(;y-1>=0&&e[y-1]&&e[y-1].partitionId===p.partitionId;)y--;let h=f;for(;h+1<e.length&&e[h+1]&&e[h+1].partitionId===m.partitionId;)h++;let g=null;for(let _=f-1;_>=0;_--){const N=e[_];if(N.partitionId!==p.partitionId)break;if(typeof N.mean=="number"){g=N.mean;break}}let k=null;for(let _=f;_<e.length;_++){const N=e[_];if(N.partitionId!==m.partitionId)break;if(typeof N.mean=="number"){k=N.mean;break}}if(g==null&&(g=u(p.partitionId??null)),k==null&&(k=u(m.partitionId??null)),g==null||k==null)continue;const S=k-g,j=t===Le.Up?S>0:S<0,M=j?qe.Improvement:qe.Concern,b=l==="Same"?M:j?qe.Concern:qe.Improvement;for(let _=1;_<=a;_++){const N=f-_;if(N<y)break;c(N,b)}for(let _=0;_<o;_++){const N=f+_;if(N>h)break;c(N,M)}}return i}function Df(e){if(!e)return{};if(typeof e=="object"&&("minimumPoints"in e||"shiftPoints"in e||"trendPoints"in e))return e;const t=e,n={};if(t.thresholds){const r=t.thresholds;r.minimumPoints!=null&&(n.minimumPoints=r.minimumPoints),r.shiftPoints!=null&&(n.shiftPoints=r.shiftPoints),r.trendPoints!=null&&(n.trendPoints=r.trendPoints),r.excludeMovingRangeOutliers!=null&&(n.excludeMovingRangeOutliers=r.excludeMovingRangeOutliers)}if(t.eligibility&&t.eligibility.chartLevel!=null&&(n.chartLevelEligibility=t.eligibility.chartLevel),t.parity&&(t.parity.trendAcrossPartitions!=null&&(n.trendAcrossPartitions=t.parity.trendAcrossPartitions),t.parity.twoSigmaIncludeAboveThree!=null&&(n.twoSigmaIncludeAboveThree=t.parity.twoSigmaIncludeAboveThree),t.parity.enableFourOfFiveRule!=null&&(n.enableFourOfFiveRule=t.parity.enableFourOfFiveRule)),t.conflict&&(t.conflict.preferImprovementWhenConflict!=null&&(n.preferImprovementWhenConflict=t.conflict.preferImprovementWhenConflict),t.conflict.preferTrendWhenConflict!=null&&(n.preferTrendWhenConflict=t.conflict.preferTrendWhenConflict),t.conflict.strategy!=null&&(n.conflictStrategy=t.conflict.strategy),t.conflict.ruleHierarchy!=null&&(n.ruleHierarchy=t.conflict.ruleHierarchy),t.conflict.metricRuleOnTie!=null&&(n.metricConflictRule=t.conflict.metricRuleOnTie)),t.trend?.segmentation){const r=t.trend.segmentation;r.mode!=null&&(n.trendSegmentationMode=r.mode),r.favourableSegmentation!=null&&(n.trendFavourableSegmentation=r.favourableSegmentation),r.strategy!=null&&(n.trendSegmentationStrategy=r.strategy),r.dominatesHighlightedWindow!=null&&(n.trendDominatesHighlightedWindow=r.dominatesHighlightedWindow)}return n}function hi(e){const{chartType:t,metricImprovement:n,data:r}=e,i=Df(e.settings),a={minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:jr.Improvement,trendAcrossPartitions:!1,twoSigmaIncludeAboveThree:!1,enableFourOfFiveRule:!1,preferImprovementWhenConflict:!1,conflictStrategy:Tr.SqlPrimeThenRule,ruleHierarchy:void 0,chartLevelEligibility:!1,trendFavourableSegmentation:!1,trendSegmentationMode:Cn.Off,trendSegmentationStrategy:vt.CrossingAfterUnfavourable,trendDominatesHighlightedWindow:!1,...i},o=i?.trendSegmentationMode||(i?.trendFavourableSegmentation===!0?Cn.Always:i?.trendFavourableSegmentation===!1?Cn.Off:a.trendSegmentationMode),l=r.map((h,g)=>({rowId:g+1,x:h.x,value:Ne(h.value)?h.value:null,ghost:!!h.ghost,baseline:!!h.baseline,target:Ne(h.target)?h.target:null})),c=[];let u=[];for(const h of l)h.baseline&&u.length&&(c.push(u),u=[]),u.push(h);u.length&&c.push(u);const d=[],f=(a.trendFavourableSegmentation||o!==Cn.Off)&&!a.preferImprovementWhenConflict,p=l.filter(h=>!h.ghost&&Ne(h.value)).length,m=!!a.chartLevelEligibility&&p>=a.minimumPoints;let y=0;for(const h of c){y++;const g=h.map(b=>b.value),k=h.map(b=>b.ghost),S=N_(t,g,k,!!a.excludeMovingRangeOutliers),j=h.map((b,_)=>{const N=!b.ghost&&Ne(b.value)?g.slice(0,_+1).filter((v,C)=>!k[C]&&Ne(v)).length:0,w=m?!0:N>=a.minimumPoints;return{rowId:b.rowId,x:b.x,value:Ne(b.value)?b.value:null,ghost:b.ghost,partitionId:y,pointRank:N,mean:(w||m)&&Ne(S.mean)?S.mean:null,upperProcessLimit:w||m?S.upperProcessLimit:null,lowerProcessLimit:w||m?S.lowerProcessLimit:null,upperTwoSigma:w||m?S.upperTwoSigma:null,lowerTwoSigma:w||m?S.lowerTwoSigma:null,upperOneSigma:w||m?S.upperOneSigma:null,lowerOneSigma:w||m?S.lowerOneSigma:null,singlePointUp:!1,singlePointDown:!1,twoSigmaUp:!1,twoSigmaDown:!1,fourOfFiveUp:!1,fourOfFiveDown:!1,shiftUp:!1,shiftDown:!1,trendUp:!1,trendDown:!1,specialCauseImprovementValue:null,specialCauseConcernValue:null,variationIcon:we.CommonCause}});for(const b of j)b.ghost||!Ne(b.value)||b.mean===null||(Ne(b.upperProcessLimit)&&b.value>b.upperProcessLimit&&(b.singlePointUp=!0),Ne(b.lowerProcessLimit)&&b.value<b.lowerProcessLimit&&(b.singlePointDown=!0));M_(j,{shiftPoints:a.shiftPoints,trendPoints:a.trendPoints,twoSigmaIncludeAboveThree:!!a.twoSigmaIncludeAboveThree,enableFourOfFiveRule:!!a.enableFourOfFiveRule}),f&&(b=>{const _=b.some(D=>(D.singlePointUp||D.twoSigmaUp||D.shiftUp||D.trendUp)&&(D.singlePointDown||D.twoSigmaDown||D.shiftDown||D.trendDown));if(o===Cn.Off||o===Cn.AutoWhenConflict&&!_)return;const N=jf(b),w=Tf(N,{metricImprovement:n,strategy:a.trendSegmentationStrategy}),v=new Set,C=new Set;for(const D of w)for(let I=D.start;I<=D.end;I++)D.trendDirection===Uo.Up?v.add(I):C.add(I);b.forEach((D,I)=>{D.trendUp=v.has(I)?D.trendUp:!1,D.trendDown=C.has(I)?D.trendDown:!1,a.trendDominatesHighlightedWindow&&(v.has(I)?(D.singlePointDown=!1,D.twoSigmaDown=!1,D.shiftDown=!1):C.has(I)&&(D.singlePointUp=!1,D.twoSigmaUp=!1,D.shiftUp=!1))})})(j);for(const b of j){if(b.ghost||!Ne(b.value)||b.mean===null){d.push(b);continue}const{aligned:_,opposite:N}=Nf(b,n);if(b.specialCauseImprovementValue=_?b.value:null,b.specialCauseConcernValue=N?b.value:null,n===Le.Neither){const w=b.singlePointUp||b.twoSigmaUp||b.shiftUp||b.trendUp,v=b.singlePointDown||b.twoSigmaDown||b.shiftDown||b.trendDown;b.variationIcon=w?we.NeitherHigh:v?we.NeitherLow:we.CommonCause}else Mf(b,n,a.metricConflictRule,a.preferImprovementWhenConflict===!0,a.conflictStrategy,a.ruleHierarchy,a.preferTrendWhenConflict===!0);d.push(b)}}if(a.trendAcrossPartitions){const h=d.map((g,k)=>({idx:k,r:g})).filter(({r:g})=>!g.ghost&&Ne(g.value));if(h.length>=a.trendPoints)for(let g=0;g<=h.length-a.trendPoints;g++){const k=h.slice(g,g+a.trendPoints).map(b=>b.idx),S=k.map(b=>d[b]);if(!S.every(b=>Ne(b.value)))continue;let j=!0,M=!0;for(let b=1;b<S.length&&(S[b].value>S[b-1].value||(j=!1),S[b].value<S[b-1].value||(M=!1),!(!j&&!M));b++);j&&k.forEach(b=>d[b].trendUp=!0),M&&k.forEach(b=>d[b].trendDown=!0)}}if(a.trendAcrossPartitions){if(f){const h=d.some(g=>(g.singlePointUp||g.twoSigmaUp||g.shiftUp||g.trendUp)&&(g.singlePointDown||g.twoSigmaDown||g.shiftDown||g.trendDown));if(o===Cn.Always||o===Cn.AutoWhenConflict&&h){const g=jf(d),k=Tf(g,{metricImprovement:n,strategy:a.trendSegmentationStrategy}),S=new Set,j=new Set;for(const M of k)for(let b=M.start;b<=M.end;b++)M.trendDirection===Uo.Up?S.add(b):j.add(b);d.forEach((M,b)=>{M.trendUp=S.has(b)?M.trendUp:!1,M.trendDown=j.has(b)?M.trendDown:!1,a.trendDominatesHighlightedWindow&&(S.has(b)?(M.singlePointDown=!1,M.twoSigmaDown=!1,M.shiftDown=!1):j.has(b)&&(M.singlePointUp=!1,M.twoSigmaUp=!1,M.shiftUp=!1))})}}for(const h of d){if(h.ghost||!Ne(h.value)||h.mean===null||n===Le.Neither)continue;const{aligned:g,opposite:k}=Nf(h,n);h.specialCauseImprovementValue=g?h.value:null,h.specialCauseConcernValue=k?h.value:null,Mf(h,n,a.metricConflictRule,a.preferImprovementWhenConflict===!0,a.conflictStrategy,a.ruleHierarchy,a.preferTrendWhenConflict===!0)}}return{rows:d}}function Wo(e,t){const n=hi(e),r=fi(n.rows,{metricImprovement:e.metricImprovement,trendVisualMode:t?.trendVisualMode??Ir.Ungated,enableNeutralNoJudgement:t?.enableNeutralNoJudgement??!0}),i=t?.boundaryWindows;if(!i||i.mode!=="RecalcCrossing")return{rows:n.rows,visuals:r};const a=i.directionOverride??e.metricImprovement,o=A_(n.rows,a,i),l=r.map((c,u)=>{const d=o[u];if(c===qe.Common||c===qe.NoJudgement){if(d===qe.Improvement)return qe.Improvement;if(d===qe.Concern)return qe.Concern}return c});return{rows:n.rows,visuals:l}}var If=(e=>(e.None="none",e.RecalcCrossingShift="recalc-crossing-shift",e.RecalcCrossingTrend="recalc-crossing-trend",e.RecalcCrossingTwoSigma="recalc-crossing-two-sigma",e.RecalculationsRecalculated="recalculations-recalculated",e.BaselinesRecalculated="baselines-recalculated",e))(If||{});function E_(e,t,n){const r=n?.trendVisualMode??Ir.Ungated,i=n?.enableNeutralNoJudgement??!0,a=Array.isArray(e.data)?e.data.map((f,p)=>f?.baseline?p:-1).filter(f=>f>=0):[];let o;switch(t){case"recalc-crossing-shift":{o={mode:"RecalcCrossing",preWindow:2,postWindow:4,prePolarity:"Same",boundaryIndices:a};break}case"recalc-crossing-trend":{o={mode:"RecalcCrossing",preWindow:1,postWindow:5,prePolarity:"Same",boundaryIndices:a};break}case"recalc-crossing-two-sigma":{o={mode:"RecalcCrossing",preWindow:1,postWindow:1,prePolarity:"Same",boundaryIndices:a};break}case"baselines-recalculated":o={mode:"RecalcCrossing",preWindow:0,postWindow:0,prePolarity:"Same",directionOverride:e.metricImprovement,boundaryIndices:a};break;case"recalculations-recalculated":case"none":default:o=void 0}const{rows:l,visuals:c}=Wo(e,{trendVisualMode:r,enableNeutralNoJudgement:i,boundaryWindows:o});let u=c.slice(),d=a.length?a[0]:-1;if(d<0){for(let f=1;f<l.length;f++)if(l[f].partitionId!==l[f-1].partitionId){d=f;break}}return(t==="recalculations-recalculated"||t==="baselines-recalculated")&&d>0&&(u[d-1]=qe.Common),{rows:l,visuals:u}}const Lf=Object.freeze({minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:jr.Improvement,trendAcrossPartitions:!0,twoSigmaIncludeAboveThree:!0,chartLevelEligibility:!0});function F_(e){return{...Lf,...e??{}}}var ft=(e=>(e.Concern="concern",e.Improvement="improvement",e.NoJudgement="noJudgement",e.Common="common",e))(ft||{}),ir=(e=>(e.Classic="classic",e.Triangle="triangle",e.TriangleWithRun="triangleWithRun",e))(ir||{}),mi=(e=>(e.Direction="direction",e.Polarity="polarity",e))(mi||{});const Go=e=>{const t=()=>{globalThis.__spcIconDeprecationEmitted||(console.warn("[SPCVariationIcon] Deprecated payload shape detected. Migrate to { variationIcon, improvementDirection, specialCauseNeutral?, trend? }."),globalThis.__spcIconDeprecationEmitted=!0)};if(e.variationIcon!==void 0){const o=e;let l;o.improvementDirection!==void 0?l=o.improvementDirection===Le.Up?lt.HigherIsBetter:o.improvementDirection===Le.Down?lt.LowerIsBetter:lt.ContextDependent:o.polarity&&(l=o.polarity);let c;const u=o.variationIcon;if(u===De.Improvement||u===De.Concern||u===De.Neither||u===De.Suppressed)u===De.Improvement?c=Se.SpecialCauseImproving:u===De.Concern?c=Se.SpecialCauseDeteriorating:u===De.Neither?c=Se.CommonCause:c=Se.SpecialCauseNoJudgement;else switch(o.variationIcon){case we.ImprovementHigh:case we.ImprovementLow:c=Se.SpecialCauseImproving;break;case we.ConcernHigh:case we.ConcernLow:c=Se.SpecialCauseDeteriorating;break;case we.NeitherHigh:case we.NeitherLow:c=o.specialCauseNeutral?Se.SpecialCauseNoJudgement:Se.CommonCause;break;case we.CommonCause:c=Se.CommonCause;break;default:c=Se.SpecialCauseNoJudgement;break}let d=o.trend;return d||(c===Se.SpecialCauseImproving?d=l===lt.LowerIsBetter?je.Lower:je.Higher:c===Se.SpecialCauseDeteriorating?d=l===lt.LowerIsBetter?je.Higher:je.Lower:c===Se.SpecialCauseNoJudgement?o.highSideSignal&&!o.lowSideSignal?d=je.Higher:o.lowSideSignal&&!o.highSideSignal?d=je.Lower:d=je.Higher:d=je.Higher),{state:c,direction:d,polarity:l??lt.ContextDependent}}if(e.state!==void 0){t();const o=e;let l=o.trend;return!l&&(o.state===Se.SpecialCauseImproving||o.state===Se.SpecialCauseDeteriorating)&&o.polarity&&(o.state===Se.SpecialCauseImproving?l=o.polarity===lt.LowerIsBetter?je.Lower:je.Higher:l=o.polarity===lt.LowerIsBetter?je.Higher:je.Lower),l||(o.state===Se.SpecialCauseImproving?l=je.Higher:o.state===Se.SpecialCauseDeteriorating?l=je.Lower:l=je.Higher),{state:o.state,direction:l,polarity:o.polarity??lt.ContextDependent}}const n=e;t();const i={[jt.Improving]:Se.SpecialCauseImproving,[jt.Deteriorating]:Se.SpecialCauseDeteriorating,[jt.No_Judgement]:Se.SpecialCauseNoJudgement,[jt.None]:Se.CommonCause}[n.judgement];let a;return n.judgement===jt.Improving?a=n.polarity===lt.LowerIsBetter?je.Lower:je.Higher:n.judgement===jt.Deteriorating?a=n.polarity===lt.LowerIsBetter?je.Higher:je.Lower:a=n.trend??je.Higher,{state:i,direction:a,polarity:n.polarity}};function Pf(e,t){const{state:n,direction:r,polarity:i}=Go(e),a=Oo(n),o=r===je.Higher?"above":"below",l=r===je.Higher?"upwards":"downwards",c=(()=>{switch(i){case lt.HigherIsBetter:return"For this measure, higher values are better.";case lt.LowerIsBetter:return"For this measure, lower values are better.";default:return"Direction of improvement is context dependent."}})();return[(()=>{switch(a){case jt.Improving:return`Special cause improvement: recent data show a sustained run ${o} the mean (unlikely due to random variation).`;case jt.Deteriorating:return`Special cause deterioration: recent data show a sustained run ${o} the mean (unlikely due to random variation).`;case jt.No_Judgement:return`Special cause detected (no value judgement): recent data show a change in level, trending ${l}.`;case jt.None:default:return"Common cause variation: points vary randomly around the mean; no special cause detected."}})(),c,null,null,null,null,null].filter(Boolean).join(" ")}const Vo=(e,t,n,r,i,a)=>s.jsxs("defs",{children:[r&&s.jsxs("filter",{id:t,filterUnits:"objectBoundingBox",children:[s.jsx("feGaussianBlur",{stdDeviation:"3"}),s.jsx("feOffset",{dx:"0",dy:"15",result:"blur"}),s.jsx("feFlood",{floodColor:"rgb(150,150,150)",floodOpacity:"1"}),s.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),i&&s.jsx("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:a.map(o=>s.jsx("stop",{offset:o.offset,stopColor:e,stopOpacity:parseFloat(o.opacity)},o.offset))})]}),Yo=({data:e,precomputed:t,improvementDirection:n,size:r=44,ariaLabel:i,showLetter:a=!0,dropShadow:o=!0,gradientWash:l=!1,variant:c=ir.Classic,runLength:u=0,letterMode:d=mi.Polarity,letterOverride:f,...p})=>{const m=$.useId(),y=$.useId(),{start:h,mid:g,end:k,triStart:S,triMid:j,triEnd:M}=Ua(),{state:b,direction:_,polarity:N,ariaInput:w}=$.useMemo(()=>{if(t&&t.lastVariationIcon!==void 0){const X={variationIcon:t.lastVariationIcon,improvementDirection:n??Le.Neither,specialCauseNeutral:t.latestState===Se.SpecialCauseNoJudgement},{state:J,direction:pe,polarity:ie}=Go(X);return{state:J,direction:pe,polarity:ie,ariaInput:X}}const{state:ne,direction:Y,polarity:K}=Go(e);return{state:ne,direction:Y,polarity:K,ariaInput:e}},[e,t,n]),v=$.useMemo(()=>pf(b),[b]),C=$.useMemo(()=>Oo(b),[b]),D=C===jt.Improving||C===jt.Deteriorating;let I="";a&&D&&(d===mi.Polarity?N===lt.HigherIsBetter?I="H":N===lt.LowerIsBetter?I="L":I="":I=_===je.Higher?"H":"L"),f!==void 0&&(I=f);const B=b!==Se.CommonCause,E=b===Se.SpecialCauseNoJudgement,A=wt("common-cause","#A6A6A6"),L=B?v.hex:A,z=$.useMemo(()=>S_(b,_),[b,_]),ae=i||`${v.label}${I?_===je.Higher?" â€“ Higher":" â€“ Lower":""}`,q=Pf(w);if(c===ir.TriangleWithRun){const X=[[150,90],[100,190],[200,190]],J=[[150,140+100/2],[150-100/2,140-100/2],[150+100/2,140-100/2]];let pe=null;b===Se.SpecialCauseImproving||b===Se.SpecialCauseDeteriorating?pe=s.jsx("polygon",{points:(_===je.Higher?X:J).map(le=>le.join(",")).join(" "),fill:v.hex,stroke:v.hex,strokeWidth:6,transform:_===je.Higher?"translate(0, -8)":"translate(0, 15)"}):b===Se.SpecialCauseNoJudgement&&(pe=s.jsx("polygon",{points:_===je.Higher?X.map(le=>le.join(",")).join(" "):J.map(le=>le.join(",")).join(" "),fill:v.hex,stroke:v.hex,strokeWidth:6,transform:_===je.Higher?"translate(0,-7)":"translate(0,14)"}));const ie=Math.max(0,Math.min(5,Math.floor(u||0))),se=b===Se.CommonCause?160:_===je.Higher?220:70,te=10,re=26,de=150-2*re,V=b===Se.CommonCause?A:vf(b),ce=Array.from({length:5}).map((le,me)=>{const Fe=(b===Se.SpecialCauseImproving||b===Se.SpecialCauseDeteriorating)&&me>=5-ie?V:A;return s.jsx("circle",{cx:de+me*re,cy:se,r:te,fill:Fe,stroke:Fe,strokeWidth:1},me)}),oe=Vo(v.hex,m,y,o,l,[{offset:"0%",opacity:S},{offset:"75%",opacity:j},{offset:"100%",opacity:M}]),ge=b===Se.CommonCause||_===je.Higher?"translate(0,-10)":"translate(0,25)";return s.jsxs("svg",{width:r,height:r,viewBox:"0 0 300 300",role:"img","aria-label":ae,"aria-description":q,...p,children:[oe,s.jsx("circle",{stroke:"none",fill:l?`url(#${y})`:"#ffffff",...o?{filter:`url(#${m})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("circle",{stroke:v.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),s.jsxs("g",{transform:ge,children:[pe,I&&s.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:64,x:"150",y:_===je.Higher?155:145,textAnchor:"middle",dominantBaseline:"middle",children:I}),ce]})]})}if(c===ir.Triangle){const X=[[150,75],[75,225],[225,225]],J=[[150,150+150/2],[150-150/2,150-150/2],[150+150/2,150-150/2]],pe=[[150-150/2,150+150/2],[150+150/2,150+150/2]];let ie=null;b===Se.SpecialCauseImproving||b===Se.SpecialCauseDeteriorating?ie=s.jsx("polygon",{points:(_===je.Higher?X:J).map(te=>te.join(",")).join(" "),fill:v.hex,stroke:v.hex,strokeWidth:8,transform:_===je.Higher?"translate(0, -10)":"translate(0, 10)"}):b===Se.SpecialCauseNoJudgement?ie=s.jsx("polygon",{points:_===je.Higher?X.map(te=>te.join(",")).join(" "):J.map(te=>te.join(",")).join(" "),fill:v.hex,stroke:v.hex,strokeWidth:8,transform:_===je.Higher?"translate(0, -15)":"translate(0, 15)"}):b===Se.CommonCause&&(ie=s.jsx("line",{x1:pe[0][0],y1:pe[0][1],x2:pe[1][0],y2:pe[1][1],stroke:v.hex,strokeWidth:32,strokeLinecap:"square",transform:"translate(0, -75)"}));const se=Vo(v.hex,m,y,o,l,[{offset:"0%",opacity:S},{offset:"65%",opacity:j},{offset:"100%",opacity:M}]);return s.jsxs("svg",{width:r,height:r,viewBox:"0 0 300 300",role:"img","aria-label":ae,"aria-description":q,...p,children:[se,s.jsx("circle",{stroke:"none",fill:l?`url(#${y})`:"#ffffff",...o?{filter:`url(#${m})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("circle",{stroke:v.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),ie,I&&(b===Se.SpecialCauseImproving||b===Se.SpecialCauseDeteriorating)&&s.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:100,x:"150",y:_===je.Higher?"170":"140",textAnchor:"middle",dominantBaseline:"middle",children:I})]})}const O=Vo(v.hex,m,y,o,l,[{offset:"0%",opacity:h},{offset:"65%",opacity:g},{offset:"100%",opacity:k}]);return s.jsxs("svg",{width:r,height:r,viewBox:"0 0 300 300",role:"img","aria-label":ae,"aria-description":q,...p,children:[O,s.jsx("circle",{stroke:"none",fill:l?`url(#${y})`:"#ffffff",...o?{filter:`url(#${m})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("circle",{stroke:v.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),I&&s.jsx("text",{fill:v.hex,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,transform:"translate(86.67, 54) scale(0.5, 0.5)",textAnchor:"end",children:s.jsx("tspan",{x:"120",y:_===je.Lower?"340":"155",children:I})}),E?s.jsx("path",{"aria-hidden":"true",fillRule:"evenodd",stroke:"none",fill:v.hex,..._===je.Lower?{transform:"rotate(90 150 150)"}:{transform:"translate(-5 0) rotate(0 150 150)"},d:"M 90.26,185.42 L 149.31,126.37 127.44,104.51 209.81,90.66 195.96,173.02 174.09,151.16 115.05,210.2 90.26,185.42 Z M 90.26,185.42"}):s.jsxs(s.Fragment,{children:[z.length===5&&s.jsx("path",{"aria-hidden":"true",fill:"none",stroke:A,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9,d:`M ${z.map(ne=>`${ne.cx} ${ne.cy}`).join(" L ")}`}),z.map((ne,Y)=>{const X=Y>=z.length-2&&B?L:A,J=X;return s.jsx("circle",{stroke:J,strokeWidth:2,strokeMiterlimit:10,fill:X,cx:ne.cx,cy:ne.cy,r:16},Y)})]})]})};Yo.displayName="SPCVariationIcon";const $_={[ot.Xs]:{height:24,pointR:2,stroke:1},[ot.Sm]:{height:32,pointR:3,stroke:1},[ot.Md]:{height:44,pointR:4,stroke:1},[ot.Lg]:{height:56,pointR:5,stroke:1},[ot.Xl]:{height:72,pointR:6,stroke:1},[ot.Full]:{height:44,pointR:2,stroke:1}};function B_(e,t){return!t||e.length<=t?e:e.slice(e.length-t)}function H_(e){const t=e.filter(o=>typeof o.value=="number");if(!t.length)return{mean:null,latestValue:null,latestIndex:null};const n=t.reduce((o,l)=>o+l.value,0)/t.length,r=[...e].reverse().findIndex(o=>o.value!=null),i=r>=0?e.length-1-r:null,a=i!=null?e[i].value:null;return{mean:n,latestValue:a,latestIndex:i}}const z_=e=>vf(e),Af=({data:e,windowSize:t,minPointsForSignals:n=13,showMean:r=!0,showLimits:i=!0,showLimitBand:a=!0,showInnerBands:o=!1,showLatestMarker:l=!0,showStateGlyph:c=!0,variationState:u,metricImprovement:d,gradientWash:f=!1,size:p=ot.Sm,ariaLabel:m,className:y,onPointClick:h,maxPoints:g,thinningStrategy:k="stride",colorPointsBySignal:S=!0,centerLine:j,controlLimits:M,sigmaBands:b,pointSignals:_,pointNeutralSpecialCause:N,visualCategories:w})=>{const v=d,C=$.useMemo(()=>B_(e,t),[e,t]),D=$.useMemo(()=>H_(C),[C]),I=(()=>{if(typeof p=="string")switch(p){case"xs":return ot.Xs;case"sm":return ot.Sm;case"md":return ot.Md;case"lg":return ot.Lg;case"xl":return ot.Xl;case"full":return ot.Full;default:return ot.Sm}return p??ot.Sm})(),B=$_[I],E=Math.max(C.length*6,60),A=E,L=I===ot.Full?"100%":E,z=B.height,ae=$.useMemo(()=>{if(I===ot.Full)return{width:"100%",height:"auto",aspectRatio:`${A} / ${z}`,display:"block"}},[I,A,z]),q=Math.max(6,B.pointR+3),O=Math.max(4,B.pointR+3),ne=$.useMemo(()=>(e?.length??0)-(C?.length??0),[e?.length,C?.length]),Y=j??D.mean??null,K=$.useMemo(()=>{if(!i)return null;if(M)return M;const R=C.filter(P=>typeof P.value=="number");if(!R.length||Y==null)return null;const T=R.map(P=>P.value),F=Math.min(...T),G=Math.max(...T);return{lower:F,upper:G}},[i,M?.lower,M?.upper,C,Y]),J=$.useMemo(()=>({state:u??Se.CommonCause,firedRules:[],mean:Y??null,stdDev:null,side:D.latestValue!=null&&Y!=null?D.latestValue>Y?"above":"below":void 0}),[u,Y,D.latestValue]).state,pe=z_(J),ie=R=>{const T=C.filter(H=>H.value!=null);if(!T.length)return z/2;const F=T.map(H=>H.value);K&&(K.lower!=null&&F.push(K.lower),K.upper!=null&&F.push(K.upper));const G=Math.min(...F),P=Math.max(...F);return G===P?z/2:z-(R-G)/(P-G)*(z-O*2)-O},se=$.useMemo(()=>{if(!g||C.length<=g)return C.map((U,Z)=>Z);if(k==="stride"){const U=Math.max(2,g),Z=(C.length-1)/(U-1),Q=new Set;for(let ee=0;ee<U;ee++)Q.add(Math.round(ee*Z));return Q.add(C.length-1),Array.from(Q).sort((ee,fe)=>ee-fe)}const R=C.map((U,Z)=>({i:Z,v:U.value}));function T(U,Z,Q){const ee=U.i,fe=U.v??0,ue=Z.i,he=Z.v??0,xe=Q.i,be=Q.v??0,Pe=Math.abs((be-he)*ee-(xe-ue)*fe+xe*he-be*ue),Te=Math.hypot(be-he,xe-ue);return Te===0?0:Pe/Te}function F(U,Z){if(U.length<=2)return U;let Q=-1,ee=-1;for(let fe=1;fe<U.length-1;fe++){const ue=T(U[fe],U[0],U[U.length-1]);ue>Q&&(Q=ue,ee=fe)}if(Q>Z){const fe=F(U.slice(0,ee+1),Z),ue=F(U.slice(ee),Z);return[...fe.slice(0,-1),...ue]}return[U[0],U[U.length-1]]}let G=.1,P=R;for(let U=0;U<8&&(P=F(R,G),!(P.length<=g));U++)G*=1.6;const H=new Set(P.map(U=>U.i));return H.add(0),H.add(C.length-1),Array.from(H).sort((U,Z)=>U-Z)},[C,g,k]),te=$.useMemo(()=>se.map(R=>C[R]),[se,C]),re=$.useMemo(()=>Math.max(1,A-q*2),[A,q]),de=$.useMemo(()=>{const R=Math.max(1,te.length-1);return T=>T/R*re+q},[te.length,re,q]),V=$.useMemo(()=>{let R="";return te.forEach((T,F)=>{if(T.value==null)return;const G=ie(T.value),P=de(F);R+=R?` L ${P} ${G}`:`M ${P} ${G}`}),R},[te,de]),ce=D.latestIndex??-1,oe=K,ge=Ua(),le=$.useMemo(()=>`spc-spark-wash-${Math.random().toString(36).slice(2)}`,[C.length,f]),me=C.length>=(n||0),Ie=m||"SPC sparkline",Fe=(()=>{if(!J)return;const R=v===Le.Up?lt.HigherIsBetter:v===Le.Down?lt.LowerIsBetter:lt.ContextDependent,T={variationIcon:J===Se.SpecialCauseImproving?De.Improvement:J===Se.SpecialCauseDeteriorating?De.Concern:J===Se.SpecialCauseNoJudgement?De.Suppressed:De.Neither,trend:v===Le.Up?je.Higher:je.Lower,polarity:R};try{return Pf(T)}catch{return}})(),ke=$.useMemo(()=>{if(!me)return 10;const R=[...C].reverse().filter(F=>F.value!=null).slice(0,6).map(F=>ie(F.value));return R.length&&R.reduce((F,G)=>F+G,0)/R.length<z/2?z:10},[C,me,z]);return s.jsxs("svg",{role:"img","aria-label":Ie,"aria-description":Fe,width:I===ot.Full?void 0:L,height:I===ot.Full?void 0:z,style:ae,className:y,viewBox:`0 0 ${A} ${z}`,children:[f&&s.jsxs(s.Fragment,{children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:le,x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:pe,stopOpacity:Number(ge.start)}),s.jsx("stop",{offset:"60%",stopColor:pe,stopOpacity:Number(ge.mid)}),s.jsx("stop",{offset:"100%",stopColor:pe,stopOpacity:Number(ge.end)})]})}),s.jsx("rect",{x:0,y:0,width:A,height:z,fill:`url(#${le})`})]}),oe&&oe.lower!=null&&oe.upper!=null&&s.jsxs(s.Fragment,{children:[a&&s.jsx("rect",{x:0,y:Math.min(ie(oe.upper),ie(oe.lower)),width:A,height:Math.abs(ie(oe.upper)-ie(oe.lower)),fill:pe,fillOpacity:.08}),s.jsx("line",{x1:0,x2:A,y1:ie(oe.lower),y2:ie(oe.lower),stroke:pe,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),s.jsx("line",{x1:0,x2:A,y1:ie(oe.upper),y2:ie(oe.upper),stroke:pe,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),b&&o&&s.jsxs(s.Fragment,{children:[b.lowerTwo!=null&&s.jsx("line",{x1:0,x2:A,y1:ie(b.lowerTwo),y2:ie(b.lowerTwo),stroke:pe,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1}),b.lowerOne!=null&&s.jsx("line",{x1:0,x2:A,y1:ie(b.lowerOne),y2:ie(b.lowerOne),stroke:pe,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),b.upperOne!=null&&s.jsx("line",{x1:0,x2:A,y1:ie(b.upperOne),y2:ie(b.upperOne),stroke:pe,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),b.upperTwo!=null&&s.jsx("line",{x1:0,x2:A,y1:ie(b.upperTwo),y2:ie(b.upperTwo),stroke:pe,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1})]})]}),r&&Y!=null&&s.jsx("line",{x1:0,x2:A,y1:ie(Y),y2:ie(Y),stroke:nr(),strokeWidth:1,strokeDasharray:"2,2"}),s.jsx("path",{d:V,fill:"none",stroke:nr(),strokeWidth:B.stroke,strokeLinecap:"round"}),se.map((R,T)=>{const F=C[R];if(!F||F.value==null)return null;const G=ie(F.value),P=de(T),U=(R===ce&&l?B.pointR+1:B.pointR)-.5;let Z=nr();if(S){const Q=w?.[ne+R];if(Q!=null)Q===qe.Improvement?Z=Va(De.Improvement):Q===qe.Concern?Z=Va(De.Concern):Q===qe.NoJudgement?Z=wt("no-judgement","#490092"):Z=nr();else{const ee=_?.[ne+R];ee===De.Improvement||ee===De.Concern?Z=Va(ee):Z=N?.[ne+R]?wt("no-judgement","#490092"):nr()}}return s.jsx("circle",{cx:P,cy:G,r:U,fill:Z,stroke:"none",strokeWidth:0,onClick:h?()=>h(R,F):void 0,style:h?{cursor:"pointer"}:void 0,"data-index":R,"data-signal-colour":S?Z:void 0},R)}),c&&me&&J&&J!==Se.CommonCause&&v&&s.jsx("text",{x:A-4,y:ke,textAnchor:"end",fontSize:12,fontWeight:"bold",fill:pe,"data-glyph-pos":ke<z/2?"top":"bottom",children:v===Le.Up?"H":"L"})]})};Af.displayName="SPCSpark";function qa(e){switch(e){case we.ImprovementHigh:case we.ImprovementLow:return Se.SpecialCauseImproving;case we.ConcernHigh:case we.ConcernLow:return Se.SpecialCauseDeteriorating;case we.NeitherHigh:case we.NeitherLow:return Se.SpecialCauseNoJudgement;case we.CommonCause:return Se.CommonCause;default:return null}}function Ef(e){return e===we.ImprovementHigh||e===we.ImprovementLow||e===we.ConcernHigh||e===we.ConcernLow||e===we.NeitherHigh||e===we.NeitherLow}function O_({warnings:e,show:t,formatWarningCategory:n,formatWarningCode:r}){const[i,a]=W.useState(""),o=W.useRef("");return W.useEffect(()=>{if(!t){o.current!==""&&(o.current="",a(""));return}const l=e.length;if(!l){const f="Diagnostics: no warnings.";f!==o.current&&(o.current=f,a(f));return}const c={error:e.filter(f=>f.severity===tn.Error).length,warning:e.filter(f=>f.severity===tn.Warning).length,info:e.filter(f=>f.severity===tn.Info).length},u=[];c.error&&u.push(`${c.error} error${c.error===1?"":"s"}`),c.warning&&u.push(`${c.warning} warning${c.warning===1?"":"s"}`),c.info&&u.push(`${c.info} info`);const d=`Diagnostics updated: ${l} warning${l===1?"":"s"} (${u.join(", ")}).`;d!==o.current&&(o.current=d,a(d))},[t,e]),t?s.jsxs(s.Fragment,{children:[i&&s.jsx("div",{"data-testid":"spc-diagnostics-live","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:0,overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",border:0},children:i}),e.length>0&&s.jsxs("div",{className:"fdp-spc-chart__warnings",role:"region","aria-label":"SPC diagnostics",children:[s.jsx("p",{className:"fdp-spc-chart__warnings-heading",children:"Diagnostics"}),s.jsx(Qt,{firstCellIsHeader:!1,panel:!1,responsive:!1,head:[{text:"Severity"},{text:"Category"},{text:"Code"},{text:"Details"}],rows:e.map(l=>{let c="grey";return l.severity===tn.Error?c="red":l.severity===tn.Warning?c="orange":l.severity===tn.Info&&(c="blue"),[{node:s.jsx(Ge,{color:c,text:(l.severity?String(l.severity):"Info").replace(/^[a-z]/,u=>u.toUpperCase())}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--severity"},{node:l.category?s.jsx(Ge,{color:"purple",text:n(l.category)}):s.jsx("span",{className:"fdp-spc-chart__warning-empty",children:"â€“"}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--category"},{node:s.jsx(Ge,{color:"grey",text:r(l.code)}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--code"},{node:s.jsxs("div",{className:"fdp-spc-chart__warning-message",children:[s.jsx("span",{children:l.message}),l.context&&Object.keys(l.context).length>0&&s.jsxs("details",{className:"fdp-spc-chart__warning-context",style:{marginTop:4},children:[s.jsx("summary",{children:"context"}),s.jsx("pre",{children:JSON.stringify(l.context,null,2)})]})]}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--message"}]}),classes:"fdp-spc-chart__warnings-table-wrapper",tableClasses:"fdp-spc-chart__warnings-table"})]})]}):null}function R_({variationNode:e,assuranceNode:t,show:n}){return n?s.jsxs("div",{className:"fdp-spc-chart__top-row",style:{display:"flex",justifyContent:"flex-end",marginBottom:4},children:[e,t]}):null}const Zo=({status:e,size:t=44,ariaLabel:n,dropShadow:r=!0,colourOverride:i,gradientWash:a=!1,letterOverride:o,showTrendLines:l=!0,...c})=>{const u=$.useId(),d=$.useId(),{start:f,mid:p,end:m}=Ua(),y=i||x_[e],h=(o||__[e]).slice(0,2),g=n||`Assurance ${e}`;return s.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":g,...c,children:[s.jsxs("defs",{children:[r&&s.jsxs("filter",{id:u,filterUnits:"objectBoundingBox",children:[s.jsx("feGaussianBlur",{stdDeviation:"3"}),s.jsx("feOffset",{dx:"-1",dy:"15",result:"blur"}),s.jsx("feFlood",{floodColor:"rgb(166,166,166)",floodOpacity:"1"}),s.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),a&&s.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:y,stopOpacity:parseFloat(f)}),s.jsx("stop",{offset:"65%",stopColor:y,stopOpacity:parseFloat(p)}),s.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:parseFloat(m)})]})]}),s.jsx("circle",{stroke:"none",fill:a?`url(#${d})`:"#ffffff",...r?{filter:`url(#${u})`}:{},cx:"150",cy:"150",r:"120"}),s.jsx("text",{fill:y,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,x:0,y:0,transform:"translate(121.01, 32) scale(0.5, 0.5)",textAnchor:"middle",children:s.jsx("tspan",{x:60,y:184,children:h})}),l&&s.jsxs(s.Fragment,{children:[e===tr.Fail?s.jsx("path",{id:"fail-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 33,143 L 268,143"}):e===tr.Uncertain?s.jsx("path",{id:"uncertain-line",stroke:"rgb(166, 166, 166)",strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"16.5,10",strokeDashoffset:0,fill:"none",d:"M 36,174 L 266,174"}):s.jsx("path",{id:"pass-line",stroke:y,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 48,204 L 254,204"}),s.jsx("path",{id:"data-sparkline",stroke:"rgb(166, 166, 166)",strokeWidth:12,strokeMiterlimit:12,fill:"none",d:"M 59.9,187.91 C 72.79,171.72 87.33,158.06 104.4,157.83 121.91,158.58 140.94,187.85 153.4,189.91 164.1,192.12 163.78,171.38 169.17,170.53 172.87,169.55 174.88,187.45 184.94,189.24 197,191.86 230.54,184.47 239.01,185.9"}),s.jsx("circle",{stroke:y,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"})]})]})};Zo.displayName="SPCAssuranceIcon";const U_=Object.freeze(Object.defineProperty({__proto__:null,AssuranceResult:tr,Direction:je,MetricPolarity:lt,SPCAssuranceIcon:Zo,SPCVariationIcon:Yo,VariationJudgement:jt,VariationState:Se,getVariationColour:pf,getVariationTrend:Oo},Symbol.toStringTag,{value:"Module"}));function W_(e){const{show:t,rowsForUi:n,minPoints:r,metricImprovement:i,variant:a,runLength:o}=e;if(!t||!n?.length)return null;const l=n,c=typeof r=="number"&&!isNaN(r)?r:13;if(l.filter(b=>!b.data.ghost&&b.data.value!=null).length<c)return null;let d=-1;for(let b=l.length-1;b>=0;b--){const _=l[b];if(_&&_.data.value!=null&&!_.data.ghost){d=b;break}}if(d===-1)return null;const f=l[d],p=f.classification?.variation,m=f.classification?.assurance,y=p===De.Neither&&!!f.classification?.neutralSpecialCauseValue,h=m===En.Pass?tr.Pass:m===En.Fail?tr.Fail:tr.Uncertain;let g;if(p===De.Suppressed){const b=!!f.rules.singlePoint.up,_=!!f.rules.singlePoint.down;i===An.Up?b?g=je.Higher:_&&(g=je.Lower):i===An.Down?_?g=je.Lower:b&&(g=je.Higher):g=je.Higher}else if(p===De.Neither&&y){const b=f.rules.singlePoint.up||f.rules.twoOfThree.up||f.rules.fourOfFive.up||f.rules.shift.up||f.rules.trend.up,_=f.rules.singlePoint.down||f.rules.twoOfThree.down||f.rules.fourOfFive.down||f.rules.shift.down||f.rules.trend.down;b&&!_?g=je.Higher:_&&!b?g=je.Lower:g=je.Higher}const k=80,S=f.rules.singlePoint.up||f.rules.twoOfThree.up||f.rules.fourOfFive.up||f.rules.shift.up||f.rules.trend.up,j=f.rules.singlePoint.down||f.rules.twoOfThree.down||f.rules.fourOfFive.down||f.rules.shift.down||f.rules.trend.down;let M=we.CommonCause;return p===De.Improvement?M=we.ImprovementHigh:p===De.Concern?M=we.ConcernHigh:p===De.Neither&&(y?g===je.Lower||j&&!S?M=we.NeitherLow:M=we.NeitherHigh:M=we.CommonCause),s.jsxs("div",{style:{display:"flex",gap:12,marginRight:16},children:[s.jsx("div",{className:"fdp-spc-chart__embedded-icon","data-variation":String(p),"data-trend":g?String(g):"none",style:{width:k,height:k},children:s.jsx(Yo,{dropShadow:!1,data:{variationIcon:M,improvementDirection:i,specialCauseNeutral:y,highSideSignal:S,lowSideSignal:j,...g?{trend:g}:{}},letterMode:i===An.Neither?mi.Direction:mi.Polarity,size:k,variant:a,runLength:a===ir.TriangleWithRun?o:void 0})}),s.jsx("div",{className:"fdp-spc-chart__embedded-assurance-icon","data-assurance":String(m),style:{width:k,height:k},children:s.jsx(Zo,{status:h,size:k,dropShadow:!1})})]},`embedded-icon-${d}`)}const Ff=({engineRows:e,limits:t,pointDescriber:n,measureName:r,measureUnit:i,dateFormatter:a,enableNeutralNoJudgement:o=!0,showTrendGatingExplanation:l=!0})=>{const c=kn(),u=Pn(),[d,f]=W.useState(null),[p,m]=W.useState(!1),y=W.useRef(null);W.useEffect(()=>{if(c){if(c.focused&&(f(c.focused),y.current&&(cancelAnimationFrame(y.current),y.current=null)),!c.focused&&!p){const ke=requestAnimationFrame(()=>{f(null),y.current=null});y.current=ke}return()=>{y.current&&(cancelAnimationFrame(y.current),y.current=null)}}},[c,c?.focused,p]);const h=c&&(c.focused||(p?d:null)||d),[g,k]=W.useState(!1);W.useEffect(()=>{const ke=requestAnimationFrame(()=>k(!0));return()=>cancelAnimationFrame(ke)},[h?.index]);const S=u?.innerWidth??0,j=u?.innerHeight??0,M=h?Math.min(Math.max(h.clientX,0),S):0,b=h?Math.min(Math.max(h.clientY,0),j):0,_=u?.ref?.current||void 0;if(!h)return null;const N=e?.[h.index],v=za(N?{specialCauseSinglePointUp:!!N.rules.singlePoint.up,specialCauseSinglePointDown:!!N.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!N.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!N.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!N.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!N.rules.fourOfFive.down,specialCauseShiftUp:!!N.rules.shift.up,specialCauseShiftDown:!!N.rules.shift.down,specialCauseTrendUp:!!N.rules.trend.up,specialCauseTrendDown:!!N.rules.trend.down}:null).map(ke=>({id:ke,label:Mr[ke].tooltip})),C=h.x instanceof Date?h.x:new Date(h.x),D=a?a(C):C.toDateString(),I=i?`${i}`:"",B=r||I?`${h.y}${I?""+I:" "}${r?" "+r:""}`:`${h.y}`,E=Oa(N?.classification?.variation),A=hf(N?.classification?.assurance),L=b_(t.mean??null,t.sigma,h.y),z=n?n(h.index,{x:h.x,y:h.y}):void 0,ae=E||A||L,q=N?.rules.trend.up||N?.rules.trend.down,O=N?.classification?.variation===De.Neither&&q,ne=l&&O?"Trend detected (monotonic run) â€“ held neutral until values cross onto the favourable side of the mean.":null,Y=v.length>0,K=N&&"primeDirection"in N?N.primeDirection:void 0,X=N&&"primeRuleId"in N?N.primeRuleId:void 0,J=o&&N?.classification?.variation===De.Neither&&Y,pe="var(--nhs-fdp-color-primary-yellow, #ffeb3b)",ie=mf(N?.classification?.variation),se=6.2,re=[z||"",`${D} â€¢ ${B}`].filter(Boolean).reduce((ke,R)=>Math.max(ke,R.length*se+32),0),de=200,V=440,ce=Math.min(V,Math.max(de,re));let oe=M+12,le=(u.margin?.top??0)+b+16;oe+ce>S&&(oe=M- -60-ce),oe<0&&(oe=Math.max(0,S-ce));const me=h?`spc-tooltip-${h.index}`:"spc-tooltip",Ie=typeof h.index=="number"?h.index:NaN,Fe=_?V0.createPortal(s.jsx("div",{id:me,className:"fdp-spc-tooltip fdp-spc-tooltip-portal"+(g?" is-visible":""),style:{position:"absolute",left:oe,top:le,width:ce,maxWidth:V,zIndex:10,pointerEvents:"auto",userSelect:"none"},role:"tooltip","aria-live":"polite","aria-hidden":g?"false":"true","data-floating":!0,"data-placement":oe+ce+12>S?"left":"right",onPointerEnter:()=>{m(!0),y.current&&(cancelAnimationFrame(y.current),y.current=null)},onPointerLeave:()=>{if(m(!1),!c?.focused){const ke=requestAnimationFrame(()=>{f(null),y.current=null});y.current=ke}},children:s.jsxs("div",{className:"fdp-spc-tooltip__body",children:[s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--point",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Point"})}),s.jsxs("div",{className:"fdp-spc-tooltip__primary-line",children:["Index: ",Ie]})]}),s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--date",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Date"})}),s.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:D})]}),s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--value",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Value"})}),s.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:B})]}),ae&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--signals",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Signals"})}),s.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Signals",children:E?.toLowerCase().includes("concern")?s.jsx(Ge,{text:E,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):E?.toLowerCase().includes("improvement")?s.jsx(Ge,{text:E,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):J?s.jsx(Ge,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):E?s.jsx(Ge,{text:E,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null})]}),A&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--assurance",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Assurance"})}),s.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:(()=>{const ke=A.toLowerCase(),T=!(ke.includes("not met")||ke.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(ke);return s.jsx(Ge,{text:A,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${T?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${A}`})})()})]}),L&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--limits",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Control Limits & Sigma"})}),s.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:s.jsx(Ge,{text:(()=>{const ke=L.toLowerCase();return ke.startsWith("within 1")?"â‰¤1Ïƒ":ke.startsWith("1â€“2")?"1â€“2Ïƒ":ke.startsWith("2â€“3")?"2â€“3Ïƒ":ke.startsWith(">3")?">3Ïƒ":L})(),color:L.includes(">3")?"orange":L.includes("2â€“3")?"yellow":"grey","aria-label":`Sigma zone: ${L}`,className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--zone"})})]}),ne&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--gating","data-gating":!0,children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Trend gating"})}),s.jsx("div",{className:"fdp-spc-tooltip__explanation","aria-live":"off",children:ne})]}),Y&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",children:s.jsx("strong",{children:"Special cause"})}),s.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",children:v.map(({id:ke,label:R})=>{const T=String(ke),G=T===di.TrendIncreasing||T===di.TrendDecreasing?"fdp-spc-tag--trend":J?"fdp-spc-tag--no-judgement":E?E.toLowerCase().includes("concern")?"fdp-spc-tag--concern":E.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common";return s.jsx(Ge,{text:R,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${G}`,"data-rule-id":T},T)})}),K&&s.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",style:{marginTop:16},children:[s.jsx("div",{className:"fdp-spc-tooltip__section-label",style:{marginBottom:6},children:s.jsx("strong",{children:"Prime Direction"})}),(()=>{const ke=J?"fdp-spc-tag--no-judgement":E?E.toLowerCase().includes("concern")?"fdp-spc-tag--concern":E.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",R=`${K}${X?` (${X})`:""}`;return s.jsx(Ge,{text:R,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${ke}`,"aria-label":`Prime direction ${K}${X?` via ${X}`:""}`})})()]})]})]})}),_):null;return s.jsxs("g",{className:"fdp-tooltip-layer fdp-spc-tooltip",pointerEvents:"none","aria-hidden":"true",children:[s.jsx("circle",{cx:M,cy:b,r:7,fill:"none",stroke:pe,strokeWidth:3}),s.jsx("circle",{cx:M,cy:b,r:5,fill:"#000",stroke:pe,strokeWidth:1.5}),s.jsx("circle",{cx:M,cy:b,r:2.5,fill:ie,stroke:"#fff",strokeWidth:.5}),Fe]})},G_=({engineRows:e,measureName:t,measureUnit:n,onSignalFocus:r})=>{const i=kn(),a=i?.focused??null,o=a?.index??null,l=typeof o=="number"&&e?e[o]:null,c=W.useMemo(()=>l?za({specialCauseSinglePointUp:!!l.rules.singlePoint.up,specialCauseSinglePointDown:!!l.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!l.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!l.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!l.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!l.rules.fourOfFive.down,specialCauseShiftUp:!!l.rules.shift.up,specialCauseShiftDown:!!l.rules.shift.down,specialCauseTrendUp:!!l.rules.trend.up,specialCauseTrendDown:!!l.rules.trend.down}):[],[l]),u=W.useMemo(()=>Array.from(new Set(c.map(h=>Mr[h]?.narration).filter(Boolean))),[c]),d=l?Oa(l.classification?.variation):null,f=l?hf(l.classification?.assurance):null,p=c.length>0,m=l?l.classification?.variation===De.Neither&&p:!1,y=W.useRef(null);return W.useEffect(()=>{if(!r||!a||l==null)return;const h=`${a.seriesId}:${a.index}`;if(y.current!==h){y.current=h;try{r({index:a.index,x:a.x,y:a.y,row:l,rules:c})}catch{}}},[a?.seriesId,a?.index,a?.x,a?.y,l,c,r]),s.jsxs("div",{className:"fdp-spc-inspector",role:"region","aria-label":"Signals inspector","data-testid":"spc-signals-inspector",children:[s.jsxs("div",{className:"fdp-spc-inspector__header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx("strong",{children:"Signals inspector"}),s.jsx("div",{className:"fdp-spc-inspector__nav","aria-hidden":!i,children:i&&s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{i.focused?i.focusPrevPoint():i.focusFirstPoint()},"aria-label":"Previous point",children:"â—€"}),s.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{i.focused?i.focusNextPoint():i.focusFirstPoint()},"aria-label":"Next point",children:"â–¶"})]})})]}),!l||!a?s.jsx("p",{className:"fdp-spc-inspector__empty",children:"No point selected."}):s.jsxs("div",{className:"fdp-spc-inspector__body",children:[s.jsxs("div",{className:"fdp-spc-inspector__summary",style:{display:"flex",gap:16,flexWrap:"wrap"},children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Point:"})," ",a.index+1]}),s.jsxs("span",{children:[s.jsx("strong",{children:"Value:"})," ",a.y,n?` ${n}`:"",t?` ${t}`:""]})]}),(d||m||f)&&s.jsx("div",{className:"fdp-spc-inspector__signals",style:{marginTop:8},children:s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[d?.toLowerCase().includes("concern")?s.jsx(Ge,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):d?.toLowerCase().includes("improvement")?s.jsx(Ge,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):m?s.jsx(Ge,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):d?s.jsx(Ge,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null,f&&(()=>{const h=f.toLowerCase(),k=!(h.includes("not met")||h.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(h);return s.jsx(Ge,{text:f,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${k?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${f}`})})()]})}),s.jsxs("div",{className:"fdp-spc-inspector__rules",style:{marginTop:8},children:[s.jsx("strong",{children:"Special cause:"}),s.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:4},children:c.length===0?s.jsx("span",{children:" None"}):c.map(h=>{const g=String(h),S=g===di.TrendIncreasing||g===di.TrendDecreasing?"fdp-spc-tag--trend":m?"fdp-spc-tag--no-judgement":d?d.toLowerCase().includes("concern")?"fdp-spc-tag--concern":d.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",j=Mr[h]?.tooltip||g;return s.jsx(Ge,{text:j,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${S}`,"data-rule-id":g,title:Mr[h]?.tooltip},g)})})]}),u.length>0&&s.jsxs("div",{className:"fdp-spc-inspector__narration",style:{marginTop:8},children:[s.jsx("strong",{children:"Summary:"})," ",u.join("; ")]})]})]})};function V_(e,t=!0){if(!e?.length)return[];const n=[...e];if(t){for(let a=1;a<n.length-1;a++)n[a]===ft.Common&&n[a-1]===n[a+1]&&n[a-1]!==ft.Common&&(n[a]=n[a-1]);let i=0;for(;i<n.length;){const a=n[i];let o=i+1;for(;o<n.length&&n[o]===a;)o++;o-i===1&&a!==ft.Common&&(n[i]=ft.Common),i=o}}const r=[];if(n.length){let i=0;for(let a=1;a<=n.length;a++)if(a===n.length||n[a]!==n[i]){const o=n[i],l=a-1,c=l-i+1;(o===ft.Common||c>=2)&&r.push({start:i,end:l,category:o}),i=a}}return r}var pi=(e=>(e.Slope="slope",e.Neutral="neutral",e.Extend="extend",e))(pi||{}),$f=(e=>(e.Ungated="ungated",e.Gated="gated",e))($f||{});function Y_(e){const{ui:t,input:n,engine:r,container:i,a11y:a,visualsEngine:o,meta:l,data:c,ariaLabel:u,height:d,showZones:f,showPoints:p,announceFocus:m,className:y,unit:h,targets:g,baselines:k,ghosts:S,settings:j,chartType:M,metricImprovement:b,gradientSequences:_,sequenceTransition:N,processLineWidth:w,showPartitionMarkers:v,showWarningsPanel:C,warningsFilter:D,enableNeutralNoJudgement:I,showTrendGatingExplanation:B,trendVisualMode:E,alwaysShowZeroY:A,alwaysShowHundredY:L,percentScale:z,showTrendStartMarkers:ae,showFirstFavourableCrossMarkers:q,showTrendBridgeOverlay:O,showSignalsInspector:ne,onSignalFocus:Y,showIcons:K,showEmbeddedIcon:X,embeddedIconVariant:J,embeddedIconRunLength:pe,showFocusIndicator:ie,visualsScenario:se,visualsEngineSettings:te,source:re,narrationContext:de,highlightOutOfControl:V,precomputed:ce}=e;process.env.NODE_ENV!=="production"&&(!n&&(g!==void 0||k!==void 0||S!==void 0)&&console.warn("SPCChart: Flat input props (targets/baselines/ghosts) are deprecated. Use input={{ data, targets, baselines, ghosts }} instead."),!r&&j!==void 0&&console.warn("SPCChart: Flat engine prop 'settings' is deprecated. Use engine={{ chartType, metricImprovement, settings }}."),!i&&(d!==void 0||y!==void 0)&&console.warn("SPCChart: Consider grouped container props. Use container={{ height, className }}."),!a&&(u!==void 0||m!==void 0||de!==void 0||h!==void 0)&&console.warn("SPCChart: Consider grouped accessibility props. Use a11y={{ label, announceFocus, narrationContext, unit }}."),!o&&(se!==void 0||te!==void 0)&&console.warn("SPCChart: Consider grouped visuals engine props. Use visualsEngine={{ scenario, settings }}."),t?.visuals===void 0&&(f!==void 0||p!==void 0)&&console.warn("SPCChart: Visual toggles should be grouped. Use ui={{ visuals: { showZones, showPoints } }}."),t?.visuals?.rules===void 0&&V!==void 0&&console.warn("SPCChart: Prefer grouped rules toggle. Use ui={{ visuals: { rules: { highlightOutOfControl } } }}."),!l&&re!==void 0&&console.warn("SPCChart: Consider grouped meta. Use meta={{ source }}."));const oe=n?.data??c??[],ge=n?.targets??g,le=n?.baselines??k,me=n?.ghosts??S,Ie=r?.chartType??M??uf.XmR,Fe=r?.metricImprovement??b??An.Neither,ke=r?.settings??j,R=r?.autoRecalc,T=t?.axes?.alwaysShowZeroY??A??!1,F=t?.axes?.alwaysShowHundredY??L??!1,G=t?.axes?.percentScale??z??!1,P=t?.visuals?.gradientSequences??_??!0,H=t?.visuals?.sequenceTransition??N??"slope",U=t?.visuals?.processLineWidth??w??2,Z=t?.visuals?.trend?.visualMode??E??"ungated",Q=t?.visuals?.trend?.showGatingExplanation??B??!0,ee=t?.visuals?.rules?.enableNeutralNoJudgement??I??!0,fe=t?.visuals?.rules?.enableRules??e.enableRules??!0,ue=t?.visuals?.showZones,he=t?.visuals?.showPoints,xe=t?.visuals?.rules?.highlightOutOfControl,be=i?.height,Pe=i?.className,Te=a?.label,Ue=a?.unit,Ke=a?.narrationContext,ht=o?.scenario,Je=o?.settings,Ve=l?.source,We=t?.overlays?.partitionMarkers??v??!1,At=t?.overlays?.trendStartMarkers??ae??!1,Rt=t?.overlays?.firstFavourableCrossMarkers??q??!1,Gn=t?.overlays?.trendBridge??O??!1,ra=t?.inspector?.show??ne??!1,pr=t?.inspector?.onFocus??Y,Me=t?.warnings?.show??C??!1,$e=t?.warnings?.filter??D,_e=t?.icons?.show??K??!1,ze=t?.icons?.embedded?.show??X??!0,mt=t?.icons?.embedded?.variant??J??ir.Classic,Dn=t?.icons?.embedded?.runLength??pe,Ee=t?.overlays?.focusIndicator??ie??!0;return{effData:oe,effTargets:ge,effBaselines:le,effGhosts:me,effChartTypeCore:Ie,effMetricImprovementCore:Fe,effEngineSettings:ke,effEngineAutoRecalc:R,effHeight:be,effClassName:Pe,effAriaLabel:Te,effUnit:Ue,effNarrationContext:Ke,effShowZones:ue,effShowPoints:he,effHighlightOutOfControl:xe,effVisualsScenario:ht,effVisualsEngineSettings:Je,effPrecomputedVisuals:ce,effSource:Ve,effAlwaysShowZeroY:T,effAlwaysShowHundredY:F,effPercentScale:G,effGradientSequences:P,effSequenceTransition:H,effProcessLineWidth:U,effTrendVisualMode:Z,effShowTrendGatingExplanation:Q,effEnableNeutralNoJudgement:ee,effEnableRules:fe,effShowPartitionMarkers:We,effShowTrendStartMarkers:At,effShowFirstFavourableCrossMarkers:Rt,effShowTrendBridgeOverlay:Gn,effShowSignalsInspector:ra,effOnSignalFocus:pr,effShowWarningsPanel:Me,effWarningsFilter:$e,effShowIcons:_e,effShowEmbeddedIcon:ze,effEmbeddedIconVariant:mt,effEmbeddedIconRunLength:Dn,effShowFocusIndicator:Ee}}let Z_=0;const q_=({data:e,targets:t,visuals:n,a11y:r,axis:i,compute:a})=>{const{series:o,engineRows:l,visualCategories:c,partitionMarkers:u}=e,{limits:d,uniformTarget:f}=t,{showPoints:p,showZones:m,highlightOutOfControl:y,gradientSequences:h,sequenceTransition:g,processLineWidth:k,showFocusIndicator:S=!1,enableRules:j,enableNeutralNoJudgement:M=!0,showTrendStartMarkers:b=!1,showFirstFavourableCrossMarkers:_=!1,showTrendBridgeOverlay:N=!1}=n,{announceFocus:w,ariaLabel:v,narrationContext:C,showSignalsInspector:D=!1,onSignalFocus:I,showTrendGatingExplanation:B=!0}=r,{zeroBreakSlotGapPx:E}=i,{metricImprovement:A,effectiveUnit:L}=a,z=Kn(),ae=Pn();if(!z)return null;const{xScale:q,yScale:O}=z,ne=W.useRef("spc-seq-"+ ++Z_),Y=kn(),K=o[0]?.data||[],X=W.useMemo(()=>{if(!d.ucl&&!d.lcl)return new Set;const T=new Set;return K.forEach((F,G)=>{typeof d.ucl=="number"&&F.y>d.ucl&&T.add(G),typeof d.lcl=="number"&&F.y<d.lcl&&T.add(G)}),T},[d.ucl,d.lcl,K]),J=W.useMemo(()=>{if(!l||!l.length)return null;const T=[];return l.forEach((F,G)=>{const P=F.classification.variation===De.Concern||F.classification.variation===De.Improvement||!!F.classification.neutralSpecialCauseValue,H=!!F.rules.singlePoint.up||!!F.rules.twoOfThree.up||!!F.rules.fourOfFive.up||!!F.rules.shift.up||!!F.rules.trend.up,U=!!F.rules.singlePoint.down||!!F.rules.twoOfThree.down||!!F.rules.fourOfFive.down||!!F.rules.shift.down||!!F.rules.trend.down;T[G]={variation:F.classification.variation,assurance:F.classification.assurance,special:P,concern:F.classification.variation===De.Concern,improvement:F.classification.variation===De.Improvement,trendUp:!!F.rules.trend.up,trendDown:!!F.rules.trend.down,upAny:H,downAny:U,neutralSpecial:!!F.classification.neutralSpecialCauseValue,shiftUp:!!F.rules.shift.up,shiftDown:!!F.rules.shift.down,twoOfThreeUp:!!F.rules.twoOfThree.up,twoOfThreeDown:!!F.rules.twoOfThree.down,fourOfFiveUp:!!F.rules.fourOfFive.up,fourOfFiveDown:!!F.rules.fourOfFive.down,partitionId:F.partition.id??null}}),T},[l]),pe=W.useMemo(()=>(c||[]).map(T=>T===qe.Improvement?ft.Improvement:T===qe.Concern?ft.Concern:T===qe.NoJudgement?ft.NoJudgement:ft.Common),[c]),ie=W.useMemo(()=>!h||!pe.length?[]:V_(pe,!0),[h,pe,v]),se=W.useMemo(()=>K.map(T=>q(T.x instanceof Date?T.x:new Date(T.x))),[K,q]),te=q.range()[1],re=q.range()[0],de=W.useMemo(()=>{if(!l||!l.length)return null;let T=Number.POSITIVE_INFINITY,F=Number.POSITIVE_INFINITY;if(l.forEach((ee,fe)=>{ee.rules.trend.up&&(T=Math.min(T,fe)),ee.rules.trend.down&&(F=Math.min(F,fe))}),!Number.isFinite(T)&&!Number.isFinite(F))return null;const G=T<=F,P=G?en.Up:en.Down,H=G?T:F,U=ee=>A==null||A===An.Neither||ee==null||typeof ee.data.value!="number"||typeof ee.limits.mean!="number"?!1:P===en.Up?A===An.Up?ee.data.value>ee.limits.mean:ee.data.value<ee.limits.mean:A===An.Down?ee.data.value<ee.limits.mean:ee.data.value>ee.limits.mean;let Z=null;for(let ee=H;ee<l.length;ee++){const fe=l[ee];if(!(G?!!fe.rules.trend.up:!!fe.rules.trend.down))break;if(U(fe)){Z=ee;break}}let Q=!1;if(Z!=null){let ee=0;for(let fe=Z;fe<l.length;fe++){const ue=l[fe];if(!(G?!!ue.rules.trend.up:!!ue.rules.trend.down))break;U(ue)&&ee++}Q=ee>=2}return{direction:P,detectedAt:H,firstFavourableCrossAt:Z,persistedAcrossMean:Q}},[l,A]),V=W.useMemo(()=>{if(!l||!l.length)return null;const T=F=>{const G=[];let P=null,H=null;for(let U=0;U<l.length;U++){const Z=l[U],Q=F(Z),ee=typeof Q=="number"&&!isNaN(Q)?Q:null;if(ee==null){P!==null&&H!=null&&(G.push({x1:se[P],x2:se[U-1],y:O(H)}),P=null,H=null);continue}if(P===null){P=U,H=ee;continue}H!=null&&Math.abs(ee-H)<=1e-9||(H!=null&&G.push({x1:se[P],x2:se[U-1],y:O(H)}),P=U,H=ee)}return P!==null&&H!=null&&G.push({x1:se[P],x2:se[l.length-1],y:O(H)}),G};return{mean:T(F=>F.limits.mean??null),ucl:T(F=>F.limits.ucl??null),lcl:T(F=>F.limits.lcl??null),onePos:T(F=>F.limits.oneSigma.upper??null),oneNeg:T(F=>F.limits.oneSigma.lower??null),twoPos:T(F=>F.limits.twoSigma.upper??null),twoNeg:T(F=>F.limits.twoSigma.lower??null)}},[l,se,O]),ce=W.useMemo(()=>ie.length?s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:`${ne.current}-grad-common`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.28}),s.jsx("stop",{offset:"70%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.12}),s.jsx("stop",{offset:"100%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.045})]}),ie.map((T,F)=>{const G=`${ne.current}-grad-${F}`;let P,H=.28,U=.12,Z=.045;switch(T.category){case ft.Concern:P="var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",H=.28,U=.12,Z=.045;break;case ft.Improvement:P="var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",H=.26,U=.11,Z=.045;break;case ft.NoJudgement:P="var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",H=.26,U=.11,Z=.045;break;default:P="var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)"}return s.jsxs("linearGradient",{id:G,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:P,stopOpacity:H}),s.jsx("stop",{offset:"70%",stopColor:P,stopOpacity:U}),s.jsx("stop",{offset:"100%",stopColor:P,stopOpacity:Z})]},G)})]}):null,[ie]),oe=W.useMemo(()=>{if(!ie.length)return null;const[T]=O.domain(),F=O(T),G=ie.map((P,H)=>{const{start:U,end:Z,category:Q}=P;if(U<0||Z>=se.length||U>Z)return null;const ee=se[U],fe=se[Z];let ue="";if(Q===ft.Common){const he=H>0?ie[H-1]:null,xe=H<ie.length-1?ie[H+1]:null,be=he?se[he.end]:re,Pe=he?O(K[he.end].y):F,Te=xe?se[xe.start]:te,Ue=xe?O(K[xe.start].y):F;ue=`M ${be} ${F}`,ue+=` L ${be} ${Pe}`;for(let Ke=U;Ke<=Z;Ke++)ue+=` L ${se[Ke]} ${O(K[Ke].y)}`;ue+=` L ${Te} ${Ue}`,ue+=` L ${Te} ${F} Z`}else{const he=H>0?ie[H-1]:null,xe=H<ie.length-1?ie[H+1]:null,be=he&&he.category!==ft.Common,Pe=xe&&xe.category!==ft.Common,Te=O(K[U].y),Ue=O(K[Z].y);let Ke=ee,ht=fe;if(be){const Je=se[he.end],Ve=O(K[he.end].y),We=K[U].y-K[he.end].y;g===pi.Slope&&We>0?(ue=`M ${Je} ${Ve} L ${ee} ${Te}`,Ke=Je):(ue=`M ${ee} ${F} L ${ee} ${Te}`,Ke=ee)}else ue=`M ${ee} ${F} L ${ee} ${Te}`;for(let Je=U+1;Je<=Z;Je++)ue+=` L ${se[Je]} ${O(K[Je].y)}`;if(ue+=` L ${fe} ${Ue}`,Pe){const Je=se[xe.start],Ve=O(K[xe.start].y),We=K[xe.start].y-K[Z].y;(g===pi.Slope&&We<=0||g===pi.Extend)&&(ue+=` L ${Je} ${Ve}`,ht=Je)}if(ue+=` L ${ht} ${F}`,ue+=` L ${Ke} ${F} Z`,g===pi.Neutral&&be){const Je=se[he.end],Ve=O(K[he.end].y),We=s.jsx("path",{d:`M ${Je} ${F} L ${Je} ${Ve} L ${ee} ${Te} L ${ee} ${F} Z`,fill:`url(#${ne.current}-grad-common)`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-wedge-${H}`);return s.jsxs("g",{children:[We,s.jsx("path",{d:ue,fill:`url(#${ne.current}-grad-${H})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${H}`)]},`seq-group-${H}`)}}return s.jsx("path",{d:ue,fill:`url(#${ne.current}-grad-${H})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${H}`)}).filter(Boolean);return s.jsx("g",{className:"fdp-spc__sequence-bgs",children:G})},[ie,se,te,O,K,g]),ge=W.useMemo(()=>{if(!C?.timeframe&&K.length>=2){const T=K.map(Z=>Z.x instanceof Date?Z.x:new Date(Z.x)),F=new Date(Math.min(...T.map(Z=>Z.getTime()))),G=new Date(Math.max(...T.map(Z=>Z.getTime()))),P=Math.round((G.getTime()-F.getTime())/864e5)||0;if(P<14)return`The chart shows a timeframe of ${P+1} days`;const H=Math.round(P/7);return H<20?`The chart shows a timeframe of ${H} weeks`:`The chart shows a timeframe of ${(G.getFullYear()-F.getFullYear())*12+(G.getMonth()-F.getMonth())+1} months`}if(C?.timeframe)return`The chart shows a timeframe of ${C.timeframe}`},[C?.timeframe,K]),le=T=>{const F=T%10,G=T%100;return F===1&&G!==11?`${T}st`:F===2&&G!==12?`${T}nd`:F===3&&G!==13?`${T}rd`:`${T}th`},me=T=>`${le(T.getDate())} ${T.toLocaleString("en-GB",{month:"long"})}, ${T.getFullYear()}`,Ie=T=>({specialCauseSinglePointUp:!!T?.rules.singlePoint.up,specialCauseSinglePointDown:!!T?.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!T?.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!T?.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!T?.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!T?.rules.fourOfFive.down,specialCauseShiftUp:!!T?.rules.shift.up,specialCauseShiftDown:!!T?.rules.shift.down,specialCauseTrendUp:!!T?.rules.trend.up,specialCauseTrendDown:!!T?.rules.trend.down}),Fe=W.useCallback(({index:T,x:F,y:G})=>{const P=l?.[T],H=F instanceof Date?F:new Date(F),U=me(H),Z=C?.measureUnit?` ${C.measureUnit}`:"",Q=C?.measureName?` ${C.measureName}`:"";if(!P)return`General summary is: ${ge?ge+". ":""}Point ${T+1}, ${U}, ${G}${Z}${Q}`;const ee=Oa(P.classification?.variation)||"Variation",fe=za(Ie(P)),ue=fe.length?` Rules: ${[...new Set(fe.map(xe=>Mr[xe].narration))].join("; ")}.`:" No special cause rules.",he=[];return C?.measureName&&he.push(`Measure: ${C.measureName}.`),C?.datasetContext&&he.push(`${C.datasetContext}.`),C?.organisation&&he.push(`Organisation: ${C.organisation}.`),C?.additionalNote&&he.push(C.additionalNote),["General summary is:",...he,`Point ${T+1} recorded on `,U+",",`with a value of ${G} ${Z}${Q}`,ee+".",ue].join(" ").replace(/\s+/g," ").trim()},[l,C,ge]),ke=W.useCallback((T,F)=>l?.[T]?Fe({index:T,seriesId:"process",x:F.x instanceof Date?F.x:new Date(F.x),y:F.y}).replace(/^General summary is:\s*/,"").replace(/^Point \d+\s*/,""):void 0,[l,Fe]),R=W.useMemo(()=>{try{const T=typeof O?.domain=="function"?O.domain():void 0;if(!T||!Array.isArray(T)||T.length<2)return!1;const F=Math.min(T[0],T[1]),G=Math.max(T[0],T[1]);return!(0>=F&&0<=G)}catch{return!1}},[O]);return s.jsx(of,{children:s.jsxs("div",{className:"fdp-spc-chart",role:"group","aria-label":"Statistical process control chart","aria-roledescription":"chart",children:[s.jsx("svg",{width:z.xScale.range()[1]+56+16,height:(ae?.innerHeight??z.yScale.range()[0])+12+48,role:"img",children:s.jsxs("g",{transform:"translate(56,12)",children:[s.jsx(Do,{type:"x"}),s.jsx(Do,{type:"y",yZeroBreak:{enabled:R,gapPx:E,zigZag:{heightPx:64,amplitudePx:4,cycles:6,stepXPx:3}}}),s.jsx(Jd,{axis:"y"}),ce,oe,u.map((T,F)=>{const G=K[T];if(!G)return null;const P=q(G.x instanceof Date?G.x:new Date(G.x));return s.jsx("line",{x1:P,x2:P,y1:0,y2:O.range()[0],stroke:"#555",strokeDasharray:"4 4",strokeWidth:1,"aria-hidden":"true",className:"fdp-spc__partition-marker"},`partition-marker-${F}`)}),V?.mean.length?s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__cl-group",children:[V.mean.map((T,F)=>s.jsx("line",{className:"fdp-spc__cl",x1:T.x1,x2:T.x2,y1:T.y,y2:T.y},`mean-${F}`)),V.mean.map((T,F)=>{if(F===V.mean.length-1)return null;const G=V.mean[F+1];if(!G||T.y===G.y)return null;const H=Math.max(4,G.x1-T.x2||0)*.5,U=`M ${T.x2},${T.y} C ${T.x2+H},${T.y} ${G.x1-H},${G.y} ${G.x1},${G.y}`;return s.jsx("path",{className:"fdp-spc__cl fdp-spc__cl-join",d:U,fill:"none"},`mean-join-${F}`)})]}):null,f!=null&&s.jsx(s.Fragment,{}),V?.ucl.length?s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--ucl",children:[V.ucl.map((T,F)=>s.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--ucl",x1:T.x1,x2:T.x2,y1:T.y,y2:T.y,strokeWidth:2},`ucl-${F}`)),V.ucl.map((T,F)=>{if(F===V.ucl.length-1)return null;const G=V.ucl[F+1];if(!G||T.y===G.y)return null;const H=Math.max(4,G.x1-T.x2||0)*.5,U=`M ${T.x2},${T.y} C ${T.x2+H},${T.y} ${G.x1-H},${G.y} ${G.x1},${G.y}`;return s.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--ucl fdp-spc__limit-join",d:U,fill:"none",strokeWidth:2},`ucl-join-${F}`)})]}):null,V?.lcl.length?s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--lcl",children:[V.lcl.map((T,F)=>s.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--lcl",x1:T.x1,x2:T.x2,y1:T.y,y2:T.y,strokeWidth:2},`lcl-${F}`)),V.lcl.map((T,F)=>{if(F===V.lcl.length-1)return null;const G=V.lcl[F+1];if(!G||T.y===G.y)return null;const H=Math.max(4,G.x1-T.x2||0)*.5,U=`M ${T.x2},${T.y} C ${T.x2+H},${T.y} ${G.x1-H},${G.y} ${G.x1},${G.y}`;return s.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--lcl fdp-spc__limit-join",d:U,fill:"none",strokeWidth:2},`lcl-join-${F}`)})]}):null,f!=null&&s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__target-group",children:[s.jsx("line",{className:"fdp-spc__target","data-testid":"spc-target-line",x1:0,x2:q.range()[1],y1:O(f),y2:O(f),strokeWidth:2.5}),s.jsxs("text",{"data-testid":"spc-target-label",x:q.range()[0]-7,y:O(f)-5,textAnchor:"start",className:"fdp-spc__target-label",fontSize:12,children:["Target ",f," ",L||C?.measureUnit||""]})]}),m&&V&&V.mean.length>0&&s.jsxs(s.Fragment,{children:[V.onePos.map((T,F)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos1",x1:T.x1,x2:T.x2,y1:T.y,y2:T.y,"aria-hidden":"true",strokeWidth:2},`onePos-${F}`)),V.oneNeg.map((T,F)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg1",x1:T.x1,x2:T.x2,y1:T.y,y2:T.y,"aria-hidden":"true",strokeWidth:2},`oneNeg-${F}`)),V.twoPos.map((T,F)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos2",x1:T.x1,x2:T.x2,y1:T.y,y2:T.y,"aria-hidden":"true",strokeWidth:2},`twoPos-${F}`)),V.twoNeg.map((T,F)=>s.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg2",x1:T.x1,x2:T.x2,y1:T.y,y2:T.y,"aria-hidden":"true",strokeWidth:2},`twoNeg-${F}`))]}),de&&(b||_||N)&&(()=>{const T=de.detectedAt,F=de.firstFavourableCrossAt,G=K[T]?q(K[T].x instanceof Date?K[T].x:new Date(K[T].x)):null,P=K[T]?O(K[T].y):null,H=F!=null&&K[F]?q(K[F].x instanceof Date?K[F].x:new Date(K[F].x)):null,U=F!=null&&K[F]?O(K[F].y):null;return s.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__trend-overlays",children:[N&&G!=null&&P!=null&&H!=null&&U!=null&&s.jsx("line",{x1:G,y1:P,x2:H,y2:U,stroke:"#888",strokeDasharray:"4 4",strokeWidth:2,children:s.jsx("title",{children:"Trend bridge: start to first favourable-side point"})}),b&&G!=null&&P!=null&&s.jsx("circle",{cx:G,cy:P,r:6,fill:"white",stroke:"#555",strokeWidth:2,children:s.jsx("title",{children:"Trend start (run reached N)"})}),_&&H!=null&&U!=null&&s.jsx("circle",{cx:H,cy:U,r:5,fill:"#555",children:s.jsx("title",{children:"First favourable-side inclusion"})})]})})(),s.jsx(lf,{series:o[0],seriesIndex:0,palette:"categorical",showPoints:!1,focusablePoints:!1,focusIndex:-1,parseX:T=>T.x instanceof Date?T.x:new Date(T.x),smooth:!1,strokeWidth:k}),p&&K.map((T,F)=>{const G=q(T.x instanceof Date?T.x:new Date(T.x)),P=O(T.y),H=X.has(F),U=J?.[F],Z=pe[F],Q=Z===ft.Improvement,ee=Z===ft.Concern,fe=Z===ft.NoJudgement,ue=["fdp-spc__point",H&&y?"fdp-spc__point--ooc":null,j&&ee?"fdp-spc__point--sc-concern":null,j&&Q?"fdp-spc__point--sc-improvement":null,j&&M&&fe?"fdp-spc__point--sc-no-judgement":null,U?.assurance===En.Pass?"fdp-spc__point--assurance-pass":null,U?.assurance===En.Fail?"fdp-spc__point--assurance-fail":null].filter(Boolean).join(" "),he=Y?.focused?.index===F;return s.jsx("circle",{cx:G,cy:P,r:5,className:ue,"data-variation":U?.variation,"data-assurance":U?.assurance,"aria-label":v,...he?{"aria-describedby":`spc-tooltip-${F}`}:{}},F)}),S&&D&&Y?.focused&&(()=>{const T=Y.focused,F=typeof T.index=="number"?T.index:-1;if(F<0||!K[F])return null;const G=q(K[F].x instanceof Date?K[F].x:new Date(K[F].x)),P=O(K[F].y),H="var(--nhs-fdp-color-primary-yellow, #ffeb3b)";return s.jsxs("g",{className:"fdp-spc__focus-indicator","aria-hidden":"true",children:[s.jsx("circle",{cx:G,cy:P,r:7,fill:"none",stroke:H,strokeWidth:3}),s.jsx("circle",{cx:G,cy:P,r:5,fill:"#000",stroke:H,strokeWidth:1.5}),s.jsx("circle",{cx:G,cy:P,r:2.5,fill:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stroke:"#fff",strokeWidth:.5})]})})(),ae&&s.jsx(X_,{width:q.range()[1],height:O.range()[0]}),!D&&s.jsx(Ff,{engineRows:l,limits:{mean:d.mean,sigma:d.sigma},pointDescriber:ke,measureName:C?.measureName,measureUnit:C?.measureUnit,dateFormatter:T=>me(T),enableNeutralNoJudgement:M,showTrendGatingExplanation:B})]})}),D&&s.jsx("div",{style:{marginTop:8},children:s.jsx(G_,{engineRows:l,measureName:C?.measureName,measureUnit:L||C?.measureUnit,onSignalFocus:I})}),w&&s.jsx(o_,{format:T=>Fe({...T,x:T.x instanceof Date?T.x:new Date(T.x)})})]})})},X_=({width:e,height:t})=>{const n=kn();return n?s.jsx("rect",{className:"fdp-spc__interaction-layer",width:e,height:t,fill:"transparent",tabIndex:0,"aria-label":"Interactive chart area. Use arrow keys to move between points.",onMouseMove:r=>{const a=r.currentTarget.getBoundingClientRect(),o=r.clientX-a.left,l=r.clientY-a.top;n.focusNearest(o,l)},onMouseLeave:()=>n.clear(),onKeyDown:r=>{switch(r.key){case"ArrowRight":n.focusNextPoint(),r.preventDefault();break;case"ArrowLeft":n.focusPrevPoint(),r.preventDefault();break;case"ArrowDown":n.focusNextSeries(),r.preventDefault();break;case"ArrowUp":n.focusPrevSeries(),r.preventDefault();break;case"Home":n.focusFirstPoint(),r.preventDefault();break;case"End":n.focusLastPoint(),r.preventDefault();break}},style:{cursor:"crosshair"}}):null};function Bf(e){if(e==null)return;const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.valueOf())?void 0:t}function J_(e,t,n){const r=new Array(e),i=new Date(t);for(let a=0;a<e;a++)switch(r[a]=new Date(i),n){case"hourly":i.setHours(i.getHours()+1);break;case"daily":i.setDate(i.getDate()+1);break;case"weekly":i.setDate(i.getDate()+7);break;case"monthly":i.setMonth(i.getMonth()+1);break;case"quarterly":i.setMonth(i.getMonth()+3);break;case"annually":i.setFullYear(i.getFullYear()+1);break}return r}function Q_(e,t){const n=e.filter(Boolean);if(n.length<2)return t;const r=[];for(let c=1;c<n.length;c++)r.push(n[c].getTime()-n[c-1].getTime());const i=r.sort((c,u)=>c-u),a=i[Math.floor(i.length/2)],o=3600*1e3,l=24*o;return a<=2*o?"hourly":a<=2*l?"daily":a<=10*l?"weekly":a<=45*l?"monthly":a<=120*l?"quarterly":"annually"}function Hf(e,t){if(e)try{switch(t){case"hourly":return new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"}).format(e);case"daily":return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e);case"weekly":return`Week of ${new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}`;case"monthly":return new Intl.DateTimeFormat(void 0,{month:"short",year:"numeric"}).format(e);case"quarterly":return`Q${Math.floor(e.getMonth()/3)+1} ${e.getFullYear()}`;case"annually":return`${e.getFullYear()}`;default:return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}}catch{return}}function K_(e,t,n,r="0-100"){if(t)return t;if(n)return n;const i=e.filter(l=>l!=null);if(!i.length)return;const a=Math.min(...i),o=Math.max(...i);if(r==="0-1"){if(a>=0&&o<=1&&o>0)return"%"}else if(a>=0&&o<=100&&o>0)return"%"}function e2(e,t,n=1){switch(e||t){case"hourly":return n===1?"last hour":`last ${n} hours`;case"daily":return n===1?"last day":`last ${n} days`;case"weekly":return n===1?"last week":`last ${n} weeks`;case"monthly":return n===1?"last month":`last ${n} months`;case"quarterly":return n===1?"last quarter":`last ${n} quarters`;case"annually":return n===1?"last year":`last ${n} years`;default:return"previous"}}function zf(e){const{values:t,dates:n,intervalHint:r,startDate:i,providedUnit:a,defaultUnit:o,autoValue:l=!0,autoDelta:c=!0,autoMetadata:u=!0,deltaConfig:d}=e,f=t.map(v=>typeof v=="number"?v:v==null?null:Number(v));let p=-1;for(let v=f.length-1;v>=0;v--)if(f[v]!=null){p=v;break}let m=(n||[]).map(Bf);if(!m.some(Boolean)){const v=Bf(i);v&&r?m=J_(f.length,v,r):m=new Array(f.length).fill(void 0)}const h=Q_(m,r),g=K_(f,a,o,e.percentHeuristic),k=l&&p>=0&&f[p]!=null?f[p]:void 0,S={strategy:"previous",n:1,absolute:!0,skipNulls:!0,...d||{}};function j(){if(p<0)return-1;if(S.strategy==="previous"||S.strategy==="n-points"){let B=p-(S.strategy==="previous"?1:Math.max(1,S.n||1));if(!S.skipNulls)return B;for(let E=B;E>=0;E--)if(f[E]!=null)return E;return-1}const v=m[p];if(!v)return-1;const C=new Date(v);C.setFullYear(C.getFullYear()-1);let D=-1,I=1/0;for(let B=0;B<m.length;B++){const E=m[B];if(!E||f[B]==null)continue;const A=Math.abs(E.getTime()-C.getTime());A<I&&(I=A,D=B)}return D}const M=j(),b=M>=0?f[M]:null;let _;if(c&&k!=null&&b!=null){const v=k-b,C=S.absolute!==!1,D=C?v:b===0?0:v/Math.abs(b)*100;_={value:Number.isFinite(D)?Number(D.toFixed(2)):0,isPercent:C?g==="%":!0,period:`vs ${e2(h,r,S.strategy==="n-points"?Math.max(1,S.n||1):1)}`}}const N=p>=0?m[p]:void 0,w=u&&Hf(N,h)?`Latest: ${Hf(N,h)}`:void 0;return{value:k,unit:g,delta:_,metadata:w,latestDate:N,frequency:h}}function t2(e){const{rows:t}=hi(e),n=Wo(e);return{rows:t,visuals:n.visuals}}const qo=13;function Xo(e){if(!(!e||e.length===0))return e.map(t=>{switch(t){case qe.Improvement:return De.Improvement;case qe.Concern:return De.Concern;case qe.NoJudgement:return De.Neither;default:return null}})}function Of(e){if(!(!e||e.length===0))return e.map(t=>t===qe.NoJudgement)}function Rf(e,t){const n=e===Et.G?Et.G:e===Et.T?Et.T:Et.XmR,r=t===Le.Up?Le.Up:t===Le.Down?Le.Down:Le.Neither;return{chartType:n,metricImprovement:r}}function Uf(e,t,n){const r=typeof e?.minimumPoints=="number"&&!isNaN(e.minimumPoints)?e.minimumPoints:qo,i={minimumPoints:r};return t.filter(o=>!o.ghost&&typeof o.value=="number").length>=r&&(i.chartLevelEligibility=!0),e?.enableFourOfFiveRule!=null&&(i.enableFourOfFiveRule=!!e.enableFourOfFiveRule),n&&Object.assign(i,n),Object.keys(i).length?i:void 0}function n2(e,t,n){const r=W.useMemo(()=>{if(!e||e.length<2)return!1;const o=Math.min(e[0],e[1]),l=Math.max(e[0],e[1]);return!(0>=o&&0<=l)},[e]),{slotPx:i,totalReservedPx:a}=W.useMemo(()=>{if(!r)return{slotPx:0,totalReservedPx:0};const l=(t??260)-60,c=ii,d=c+Vd,f=n?.maxFraction,p=Math.max(ai,Math.floor(l*f)),m=Math.min(d,p);return{slotPx:Math.min(c,m),totalReservedPx:m}},[r,t,n?.maxFraction]);return{show:r,slotPx:i,totalReservedPx:a}}function r2(e,t,n,r){if(n.percentScale){const c=e.map(f=>f.y),u=Math.max(100,...c),d=Math.min(0,...c);return[d<0?d:0,u>100?u:100]}const i=e.map(c=>c.y),a=c=>{c!=null&&i.push(c)};if(a(t.mean),a(t.ucl),a(t.lcl),a(t.onePos),a(t.oneNeg),a(t.twoPos),a(t.twoNeg),r&&r.length)for(const c of r)typeof c=="number"&&!isNaN(c)&&i.push(c);if(!i.length)return;let o=Math.min(...i),l=Math.max(...i);return n.alwaysShowZeroY&&(o=Math.min(0,o)),n.alwaysShowHundredY&&(l=Math.max(100,l)),[o,l]}function Jo(e,t){if(!e?.length||t.chartType!==Et.XmR)return null;const n=Math.max(2,Math.floor(t.shiftLength??6)),r=[];for(let m=0;m<e.length;m++){const y=e[m],h=y.value;y?.ghost||typeof h=="number"&&Number.isFinite(h)&&r.push({idx:m,value:h})}if(r.length<n*2)return null;let i=0,a=0;for(let m=1;m<r.length;m++)i+=Math.abs(r[m].value-r[m-1].value),a++;if(a===0)return null;const l=i/a*(2.66/3);if(!Number.isFinite(l)||l<=0)return null;const c=Math.max(0,t.deltaSigma??.5),u=t.metricImprovement===Le.Up,d=t.metricImprovement===Le.Down,f=(()=>{for(let m=e.length-1;m>=0;m--)if(e[m]?.baseline)return m;return-1})();function p(m,y){let h=0,g=0;for(let k=m;k<y;k++)h+=r[k].value,g++;return g?h/g:NaN}for(let m=n;m<=r.length-n;m++){const y=p(m-n,m),h=p(m,m+n);if(!Number.isFinite(y)||!Number.isFinite(h))continue;const g=h-y,k=g/l;let S=!1,j=!1;if(u?(S=k>=c,j=!0):d?(S=-k>=c,j=!1):(S=Math.abs(k)>=c,j=g>0),!S)continue;const M=N=>j?N>y:N<y;let b=!0;for(let N=m;N<m+n;N++)if(!M(r[N].value)){b=!1;break}if(!b)continue;const _=r[m].idx;if(!(t.minGap&&f>=0&&_-f<t.minGap))return _}return null}function i2(e,t){const n=Jo(e,t);return n==null?e.slice():e.map((r,i)=>i===n?{...r,baseline:!0}:r)}function a2(e,t){const n=Math.max(1,Math.floor(t.maxInsertions??1));if(n<=1)return i2(e,t);let r=e.slice(),i=0;const a=Math.max(1,t.minGap??0);for(;i<n;){const o=Jo(r,{...t,minGap:a});if(o==null)break;if(r[o]?.baseline){const l=Jo(r,{...t,minGap:a+1});if(l==null||l===o)break;r=r.map((c,u)=>u===l?{...c,baseline:!0}:c),i++;continue}r=r.map((l,c)=>c===o?{...l,baseline:!0}:l),i++}return r}const Wf=e=>{const t=W.useCallback(Me=>String(Me).replace(/^spc_warning_code\.?/i,"").replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(_e=>_e.length?_e[0].toUpperCase()+_e.slice(1):_e).join(" "),[]),n=W.useCallback(Me=>String(Me).replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map($e=>$e.length?$e[0].toUpperCase()+$e.slice(1):$e).join(" "),[]);process.env.NODE_ENV!=="production"&&e.disableTrendSideGating!==void 0&&console.warn("SPCChart: 'disableTrendSideGating' prop is deprecated and ignored (trend side gating always enabled).");const{effData:r,effTargets:i,effBaselines:a,effGhosts:o,effChartTypeCore:l,effMetricImprovementCore:c,effEngineSettings:u,effAlwaysShowZeroY:d,effAlwaysShowHundredY:f,effPercentScale:p,effGradientSequences:m,effSequenceTransition:y,effProcessLineWidth:h,effTrendVisualMode:g,effShowTrendGatingExplanation:k,effEnableNeutralNoJudgement:S,effEnableRules:j,effShowPartitionMarkers:M,effShowTrendStartMarkers:b,effShowFirstFavourableCrossMarkers:_,effShowTrendBridgeOverlay:N,effShowSignalsInspector:w,effOnSignalFocus:v,effShowWarningsPanel:C,effWarningsFilter:D,effShowEmbeddedIcon:I,effEmbeddedIconVariant:B,effEmbeddedIconRunLength:E,effShowFocusIndicator:A,effHeight:L,effClassName:z,effAriaLabel:ae,effUnit:q,effNarrationContext:O,effShowZones:ne,effShowPoints:Y,effHighlightOutOfControl:K,effVisualsScenario:X,effVisualsEngineSettings:J,effSource:pe,effPrecomputedVisuals:ie,effEngineAutoRecalc:se}=Y_(e),te=ae??e.ariaLabel,re=L??e.height??260,de=z??e.className,V=q??e.unit,ce=O??e.narrationContext,oe=ne??e.showZones,ge=Y??e.showPoints,le=K??e.highlightOutOfControl,me=X??e.visualsScenario??If.None,Ie=J??e.visualsEngineSettings,Fe=pe??e.source,ke=e.a11y?.announceFocus??e.announceFocus??!1,R=W.useMemo(()=>r.map((Me,$e)=>({x:Me.x,value:Me.y,target:i?.[$e]??void 0,baseline:a?.[$e]??void 0,ghost:o?.[$e]??void 0})),[r,i,a,o]),T=W.useMemo(()=>{try{const Me=se;return Me?.enabled?a2(R,{chartType:l,metricImprovement:c,shiftLength:Me.shiftLength,deltaSigma:Me.deltaSigma,minGap:Me.minGap,maxInsertions:Me.maxInsertions}):R}catch{return R}},[R,se,l,c]),F=W.useMemo(()=>{if(ie?.visuals)return ie.visuals;try{const Me=Uf(u,T,Ie),{chartType:$e,metricImprovement:_e}=Rf(l,c),ze={chartType:$e,metricImprovement:_e,data:T,settings:Me},{visuals:mt}=E_(ze,me,{trendVisualMode:g===$f.Ungated?Ir.Ungated:Ir.Gated,enableNeutralNoJudgement:S});return mt||[]}catch{return[]}},[ie?.visuals?.length,T,l,c,g,S,u,me,Ie]),P=W.useMemo(()=>{if(ie?.rows)try{const Me=ie.rows,$e=_e=>{switch(_e){case we.ImprovementHigh:case we.ImprovementLow:return De.Improvement;case we.ConcernHigh:case we.ConcernLow:return De.Concern;case we.NeitherHigh:case we.NeitherLow:return De.Neither;case we.CommonCause:default:return De.Neither}};return Me.map((_e,ze)=>({data:{value:_e.value,ghost:!!_e.ghost},partition:{id:_e.partitionId},limits:{mean:_e.mean,ucl:_e.upperProcessLimit,lcl:_e.lowerProcessLimit,oneSigma:{upper:_e.upperOneSigma,lower:_e.lowerOneSigma},twoSigma:{upper:_e.upperTwoSigma,lower:_e.lowerTwoSigma}},rules:{singlePoint:{up:!!_e.singlePointUp,down:!!_e.singlePointDown},twoOfThree:{up:!!_e.twoSigmaUp,down:!!_e.twoSigmaDown},fourOfFive:{up:!!_e.fourOfFiveUp,down:!!_e.fourOfFiveDown},shift:{up:!!_e.shiftUp,down:!!_e.shiftDown},trend:{up:!!_e.trendUp,down:!!_e.trendDown}},classification:{variation:$e(_e.variationIcon),neutralSpecialCauseValue:_e.variationIcon===we.NeitherHigh||_e.variationIcon===we.NeitherLow?_e.specialCauseImprovementValue??_e.specialCauseConcernValue??1:null,assurance:void 0},target:T[ze]?.target??null}))}catch{return null}try{const Me=Uf(u,T,Ie),{chartType:$e,metricImprovement:_e}=Rf(l,c),ze={chartType:$e,metricImprovement:_e,data:T,settings:Me},{rows:mt}=t2(ze),Dn=Ee=>{switch(Ee){case we.ImprovementHigh:case we.ImprovementLow:return De.Improvement;case we.ConcernHigh:case we.ConcernLow:return De.Concern;case we.NeitherHigh:case we.NeitherLow:return De.Neither;case we.CommonCause:default:return De.Neither}};return mt.map((Ee,yn)=>({data:{value:Ee.value,ghost:!!Ee.ghost},partition:{id:Ee.partitionId},limits:{mean:Ee.mean,ucl:Ee.upperProcessLimit,lcl:Ee.lowerProcessLimit,oneSigma:{upper:Ee.upperOneSigma,lower:Ee.lowerOneSigma},twoSigma:{upper:Ee.upperTwoSigma,lower:Ee.lowerTwoSigma}},rules:{singlePoint:{up:!!Ee.singlePointUp,down:!!Ee.singlePointDown},twoOfThree:{up:!!Ee.twoSigmaUp,down:!!Ee.twoSigmaDown},fourOfFive:{up:!!Ee.fourOfFiveUp,down:!!Ee.fourOfFiveDown},shift:{up:!!Ee.shiftUp,down:!!Ee.shiftDown},trend:{up:!!Ee.trendUp,down:!!Ee.trendDown}},classification:{variation:Dn(Ee.variationIcon),neutralSpecialCauseValue:Ee.variationIcon===we.NeitherHigh||Ee.variationIcon===we.NeitherLow?Ee.specialCauseImprovementValue??Ee.specialCauseConcernValue??1:null,assurance:void 0},target:T[yn]?.target??null}))}catch{return null}},[ie?.rows?.length,T,l,c,u,Ie])||null,H=(P||[]).slice().reverse().find(Me=>Me.limits.mean!=null),U=H?.limits.mean??null,Z=W.useMemo(()=>{const Me=[];try{const $e=P,_e=u?.minimumPoints??13,ze=u?.minimumPoints??12;if($e&&$e.length){const mt=$e.filter(Ee=>!Ee.data.ghost&&Ee.data.value!=null).length;mt<_e&&Me.push({code:Za.InsufficientPointsGlobal,severity:tn.Warning,category:Ya.Data,message:"Not enough non-ghost points to compute stable limits/icons.",context:{nonGhostCount:mt,minimumPoints:_e}});const Dn=new Map;for(const Ee of $e){const yn=Ee.partition.id??0,ia=Dn.get(yn)||{size:0,nonGhost:0};ia.size+=1,!Ee.data.ghost&&Ee.data.value!=null&&(ia.nonGhost+=1),Dn.set(yn,ia)}for(const[Ee,yn]of Dn)yn.nonGhost>0&&yn.nonGhost<ze&&Me.push({code:Za.InsufficientPointsPartition,severity:tn.Warning,category:Ya.Partition,message:"A partition/baseline segment has too few points for recommended stability.",context:{partitionId:Ee,nonGhostCount:yn.nonGhost,minimumPointsPartition:ze}})}}catch{}return Me},[P,u?.minimumPoints]),Q=W.useMemo(()=>Z.length?D?Z.filter(Me=>!(D.severities&&Me.severity&&!D.severities.includes(Me.severity)||D.categories&&Me.category&&!D.categories.includes(Me.category)||D.codes&&!D.codes.includes(Me.code))):Z:[],[Z,D]),ee=H?.limits.ucl??null,fe=H?.limits.lcl??null,ue=H?.limits.oneSigma.upper??null,he=H?.limits.oneSigma.lower??null,xe=H?.limits.twoSigma.upper??null,be=H?.limits.twoSigma.lower??null,Pe=U!=null&&ue!=null?Math.abs(ue-U):0,Te=W.useMemo(()=>[{id:"process",data:r,color:"#A6A6A6"}],[r]),Ue=W.useMemo(()=>r2(r,{mean:U,ucl:ee,lcl:fe,onePos:ue,oneNeg:he,twoPos:xe,twoNeg:be},{alwaysShowZeroY:!!d,alwaysShowHundredY:!!f,percentScale:!!p},i??null),[r,U,ee,fe,ue,he,xe,be,i,d,f,p]),Ke=W.useMemo(()=>{const Me=$e=>{const _e=$e.filter(mt=>typeof mt=="number"&&!isNaN(mt));if(!_e.length)return null;const ze=_e[0];return _e.every(mt=>mt===ze)?ze:null};if(P&&P.length){const $e=Me(P.map(_e=>_e.target));if($e!=null)return $e}return i&&i.length?Me(i):null},[P,i]),{show:ht,slotPx:Je,totalReservedPx:Ve}=n2(Ue,re,{maxFraction:.35}),We=ht?Ve:0,At=W.useMemo(()=>{const Me=r.map($e=>$e.x);return zf({values:r.map($e=>$e.y),dates:Me,providedUnit:V||ce?.measureUnit,percentHeuristic:"0-1",autoValue:!1,autoDelta:!1,autoMetadata:!1})},[r,V,ce?.measureUnit]),Rt=V??ce?.measureUnit??At.unit,Gn=W.useMemo(()=>Rt?{...ce||{},measureUnit:Rt}:ce,[ce,Rt]),ra=W.useMemo(()=>{if(!P)return[];const Me=[];for(let $e=1;$e<P.length;$e++)P[$e].partition.id!==P[$e-1].partition.id&&Me.push($e);return Me},[P]),pr=W.useMemo(()=>W_({show:!!I,rowsForUi:P,minPoints:u?.minimumPoints??13,metricImprovement:c,variant:B,runLength:E}),[I,P,u?.minimumPoints,c,B,E]);return s.jsxs("div",{className:de?`fdp-spc-chart-wrapper ${de}`:"fdp-spc-chart-wrapper",children:[s.jsx(R_,{show:!!I,variationNode:pr,assuranceNode:null}),s.jsx(Wd,{height:re,ariaLabel:te,margin:{bottom:48,left:56,right:16,top:12},children:s.jsx(Gd,{series:Te,yDomain:Ue,yBottomGapPx:We,children:(()=>{const Me={data:{series:Te,engineRows:P,visualCategories:F,partitionMarkers:M?ra:[]},targets:{limits:{mean:U,ucl:ee,lcl:fe,sigma:Pe,onePos:ue,oneNeg:he,twoPos:xe,twoNeg:be},uniformTarget:Ke},visuals:{showPoints:ge,showZones:oe,highlightOutOfControl:le,gradientSequences:m,sequenceTransition:y,processLineWidth:h,showFocusIndicator:A,enableRules:j,enableNeutralNoJudgement:S,showTrendStartMarkers:b,showFirstFavourableCrossMarkers:_,showTrendBridgeOverlay:N},a11y:{announceFocus:ke,ariaLabel:te,narrationContext:Gn,showSignalsInspector:w,onSignalFocus:v,showTrendGatingExplanation:k},axis:{zeroBreakSlotGapPx:Je},compute:{effectiveUnit:Rt,metricImprovement:c}};return s.jsx(q_,{...Me})})()})}),Fe&&s.jsx("div",{className:"fdp-spc-chart__source","aria-label":"Chart data source",children:typeof Fe=="string"?s.jsxs("small",{children:["Source: ",Fe]}):Fe}),s.jsx(O_,{show:!!C,warnings:Q,formatWarningCategory:n,formatWarningCode:t})]})};function s2(e,t){const{chartType:n=Et.XmR,metricImprovement:r,minimumPoints:i=qo,enableNeutralNoJudgement:a=!0,includeSignalFallbacks:o=!0}=t,l=e.map(j=>({x:j.x,value:j.value??j.y??null}));let c=null;try{const j=l.filter(b=>typeof b.value=="number").length,M={minimumPoints:i};j>=i&&(M.chartLevelEligibility=!0),c=hi({chartType:n,metricImprovement:r,data:l,settings:M})}catch{c=null}const u=c?.rows??[];let d=u[u.length-1]??null;for(let j=u.length-1;j>=0;j--){const M=u[j];if(M&&M.value!=null&&!M.ghost){d=M;break}}let f=[];try{f=fi(u,{metricImprovement:r,enableNeutralNoJudgement:a})}catch{f=[]}const p=qa(d?.variationIcon),m=d?.variationIcon??null,y=d?.mean??null,h=d?{lower:d?.lowerProcessLimit??null,upper:d?.upperProcessLimit??null}:null,g=d?{upperOne:d?.upperOneSigma??null,upperTwo:d?.upperTwoSigma??null,lowerOne:d?.lowerOneSigma??null,lowerTwo:d?.lowerTwoSigma??null}:null;let k,S;return o&&(k=Xo(f),S=Of(f)),{rows:u,visuals:f,latestState:p,lastVariationIcon:m,centerLine:y,controlLimits:h,sigmaBands:g,pointSignals:k,pointNeutralSpecialCause:S}}const o2=Object.freeze(Object.defineProperty({__proto__:null,AssuranceIcon:En,BaselineSuggestionReason:ff,ChartType:Et,DEFAULT_MIN_POINTS:qo,Icons:U_,ImprovementDirection:Le,PARITY_V26:Lf,RULE_METADATA:df,SPCChart:Wf,SPCTooltipOverlay:Ff,SpcEmbeddedIconVariant:ir,SpcVisualCategory:qe,SpcWarningCategory:Ya,SpcWarningCode:Za,SpcWarningSeverity:tn,VARIATION_COLOR_TOKENS:qt,VariationIcon:we,buildSpcV26a:hi,buildSpcV26aWithVisuals:Wo,computeSpcPrecomputed:s2,computeSpcVisualCategories:fi,extractRuleIds:za,getVariationColorHex:v_,getVariationColorToken:mf,isSpecialCauseIcon:Ef,mapIconToVariation:qa,normaliseSpcSettingsV2:Df,ruleGlossary:Mr,variationLabel:Oa,visualsToNeutralFlags:Of,visualsToPointSignals:Xo,withParityV26:F_},Symbol.toStringTag,{value:"Module"}));function l2(e){const t=e.replace("#","");return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Gf(e){const{values:t,x:n,chartType:r=Et.XmR,metricImprovement:i=Le.Neither,showLimits:a=!0,showLimitBand:o=!1,showInnerBands:l=!1,showMean:c=!1}=e,u=W.useMemo(()=>{const b=[];for(let _=0;_<t.length;_++)b.push({x:n?.[_],value:t[_]});return b},[t,n]),d=W.useMemo(()=>{try{const b=u.map((v,C)=>({x:v.x??C,value:v.value})),_=13,N=b.filter(v=>typeof v.value=="number").length,w={minimumPoints:_};return N>=_&&(w.chartLevelEligibility=!0),hi({chartType:r,metricImprovement:i,data:b,settings:w})}catch{return null}},[u,r,i]),f=W.useMemo(()=>{const b=d?.rows;if(!b||b.length===0)return null;for(let _=b.length-1;_>=0;_--){const N=b[_];if(N&&N.value!=null&&!N.ghost)return N}return b[b.length-1]??null},[d]),p=W.useMemo(()=>{const b=d?.rows;if(!b||b.length===0)return null;let _=b[b.length-1];for(let N=b.length-1;N>=0;N--){const w=b[N];if(w&&w.value!=null&&!w.ghost){_=w;break}}return qa(_?.variationIcon)},[d]),m=W.useMemo(()=>f?.mean??null,[f]),y=W.useMemo(()=>{if(!f)return null;const b=f?.lowerProcessLimit??null,_=f?.upperProcessLimit??null;return b==null&&_==null?null:{lower:b,upper:_}},[f]),h=W.useMemo(()=>f?{upperOne:f?.upperOneSigma??null,upperTwo:f?.upperTwoSigma??null,lowerOne:f?.lowerOneSigma??null,lowerTwo:f?.lowerTwoSigma??null}:null,[f]),g=W.useMemo(()=>{const b=d?.rows;if(!(!b||b.length===0))try{return fi(b,{metricImprovement:i,enableNeutralNoJudgement:!0})}catch{return}},[d,i]),k=W.useMemo(()=>Xo(g),[g?.length]),S=W.useMemo(()=>{if(!(!g||g.length===0))return g.map(b=>b===qe.NoJudgement)},[g?.length]),j=W.useMemo(()=>{let b=null;if(f&&f.value!=null&&!f.ghost){const B=f.variationIcon;p===Se.SpecialCauseNoJudgement?b=Ef(B)?Se.SpecialCauseNoJudgement:Se.CommonCause:b=qa(B)??Se.CommonCause}const _=b??Se.CommonCause,N=Ra[_].hex,[w,v,C]=l2(N),D=Ua();return{"--fdp-metric-card-bg":`linear-gradient(180deg, rgba(${w}, ${v}, ${C}, ${D.start}) 0%, rgba(${w}, ${v}, ${C}, ${D.mid}) 50%, rgba(${w}, ${v}, ${C}, ${D.end}) 100%)`,"--fdp-metric-card-accent":N}},[f,p]);return{sparkProps:W.useMemo(()=>({data:u,showMean:c,showLimits:a,showLimitBand:o,showInnerBands:l,metricImprovement:i,centerLine:m,controlLimits:y,sigmaBands:h,pointSignals:k,pointNeutralSpecialCause:S,visualCategories:g,variationState:p??void 0}),[u,c,a,o,l,i,p,m,y?.lower,y?.upper,h?.upperTwo,h?.lowerOne,h?.lowerTwo,k?.length,S?.length,g?.length]),metricCardStyle:j,latestState:p}}const c2=({sparkData:e,direction:t=Le.Neither,showMean:n=!1,showLimits:r=!0,showLimitBand:i=!1,showInnerBands:a=!1,maxPoints:o,autoValue:l=!0,autoDelta:c=!0,autoMetadata:u=!0,defaultUnit:d,intervalHint:f,startDate:p,deltaConfig:m,...y})=>{const h=Gf({values:e.map(_=>_.value??null),metricImprovement:t,showLimits:r,showLimitBand:i,showInnerBands:a,showMean:n}),g=s.jsx(Af,{...h.sparkProps,maxPoints:o}),k=W.useMemo(()=>zf({values:e.map(_=>typeof _.value=="number"?_.value:null),dates:e.map(_=>_.date),intervalHint:f,startDate:p,providedUnit:y.unit,defaultUnit:d,autoValue:l,autoDelta:c,autoMetadata:u,deltaConfig:m}),[e,f,p,y.unit,d,l,c,u,m]),S=l&&k.value!=null?k.value:y.value,j=c&&k.delta?k.delta:y.delta,M=k.unit||y.unit,b=u&&k.metadata?k.metadata:y.metadata;return s.jsx(cf,{...y,value:S,unit:M,delta:j,metadata:b,visual:g,style:h.metricCardStyle})},Vf="150ms",Yf="300ms",Zf="500ms",qf="cubic-bezier(0.4, 0, 1, 1)",Xf="cubic-bezier(0, 0, 0.2, 1)",Jf="cubic-bezier(0.4, 0, 0.2, 1)",Qf="cubic-bezier(0.68, -0.55, 0.265, 1.55)",Kf="background-color 300ms cubic-bezier(0, 0, 0.2, 1)",eh="box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",th="border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",nh="border-color 300ms cubic-bezier(0, 0, 0.2, 1)",rh="1px",ih="2px",ah="4px",sh="4px",oh="4px",lh="2px",ch="1px",uh="0px",dh="4px",fh="8px",hh="12px",Qo="#d8dde0",Ko="#4c6272",el="#d8dde0",tl="#aeb7bd",nl="#d5281b",rl="#005eb8",il="#ffffff",al="#212b32",sl="#007f3b",ol="#330072",ll="#7c2855",cl="#d5281b",ul="#ffeb3b",dl="#fff9c4",fl="#ffb81c",hl="#ed8b00",ml="#00a499",pl="#ae2573",gl="#4c6272",yl="#768692",bl="#aeb7bd",vl="#d8dde0",xl="#f0f4f5",mh="#212b32",ph="#4c6272",gh="#ffffff",yh="#212b32",bh="#005eb8",vh="#7c2855",xh="#003087",_h="#330072",wh="#ffeb3b",Sh="#212b32",kh="#d8dde0",Ch="#ffffff33",Nh="#d5281b",Mh="#4c6272",jh="#ffffff",Th="#007f3b",Dh="#ffffff",Ih="#006530",Lh="#004021",Ph="#004021",Ah="#00000000",Eh="#ffffff",Fh="#005eb8",$h="#005eb8",Bh="#d9e5f2",Hh="#c7daf0",zh="#005eb8",Oh="#ffffff",Rh="#212b32",Uh="#d9dde0",Wh="#b3bcc2",Gh="#b3bcc2",Vh="#d5281b",Yh="#aa2016",Zh="#6a140e",qh="#6a140e",Xh="#005eb8",Jh="#004b93",Qh="#002f5c",Kh="#002f5c",em="8px",tm="16px",nm="12px",rm="16px",im="4px",am="40px",sm="4px",om="40px",lm="12px",cm="16px",um="32px",dm="16px",fm="20px",hm="28px",mm="9px",pm="2px",gm="16px",ym="24px",bm="8px",vm="24px",xm="16px",_m="4px",wm="4px",Sm="4px",km="8px",Cm="4px",Nm="16px",Mm="#007f3b",jm="#006530",Tm="#004021",Dm="#d8dde0",Im="#ffffff",Lm="#768692",Pm="#00000000",Am="#ffeb3b",Em="#00000000",Fm="#ffffff",$m="#d9e5f2",Bm="#c7daf0",Hm="#005eb8",zm="#005eb8",_l="8px",wl="16px",Sl="12px",kl="16px",Om="2px",Rm="4px",Um="4px",Wm="600",Gm="#ffffff",Vm="#d8dde0",Ym="#aeb7bd",Zm="#f0f4f5",qm="#212b32",Xm="#212b32",Jm="#005eb8",Cl="16px",Nl="32px",Ml="16px",Qm="1px",Km="4px",ep="none",tp="0 2px 4px rgba(0, 0, 0, 0.1)",np="#ffffff",rp="#ffffff",ip="#d8dde0",ap="#ffffff",sp="#4c6272",op="#ffeb3b",lp="#d5281b",cp="#aeb7bd",up="#212b32",dp="#4c6272",fp="#768692",hp="#212b32",mp="#ffffff",pp="600",gp="#d5281b",yp="600",bp="#4c6272",jl="4px",Tl="40px",Dl="40px",Il="12px",vp="2px",xp="4px",_p="0px",wp="16px",Sp="18px",kp="24px",Cp="32px",Np="34px",Mp="32px",jp="40px",Tp="48px",Dp="5.4ex",Ip="7.2ex",Lp="9ex",Pp="10.8ex",Ap="20ex",Ep="38ex",Fp="56ex",$p="44px",Bp="40px",Hp="1020px",zp="100%",Op="50%",Rp="33.333%",Up="25%",Wp="20%",Gp="320px",Vp="641px",Yp="1025px",Zp="1280px",qp="960px",Xp="32px",Jp="16px",Qp="#d5281b",Kp="#d5281b",eg="#ffffff",tg="#007f3b",ng="#007f3b",rg="#ffffff",ig="#ffeb3b",ag="#ffeb3b",sg="#212b32",og="#005eb8",lg="#005eb8",cg="#ffffff",ug="#d8dde0",dg="#aeb7bd",fg="#768692",hg="0 4px 0 #004021",mg="0 4px 0 #005eb8",pg="0 4px 0 #6a140e",gg="0 4px 0 #ffeb3b",yg="none",bg="0 2px 4px rgba(0, 0, 0, 0.1)",vg="4px",xg="0px",_g="solid",wg="0 0 0 3px #ffeb3b",Sg="0 0 0 3px #ffeb3b",kg="none",Cg="0 1px 3px rgba(0, 0, 0, 0.12)",Ng="0 2px 6px rgba(0, 0, 0, 0.16)",Mg="0 4px 12px rgba(0, 0, 0, 0.20)",Ll="0",Pl="4px",Al="8px",El="16px",Fl="24px",$l="32px",Bl="40px",Hl="48px",zl="56px",Ol="64px",Xa="0",Ja="0",Qa="4px",Ka="4px",es="8px",ts="8px",ns="8px",rs="16px",is="16px",as="24px",ss="24px",os="32px",ls="32px",cs="40px",us="40px",ds="48px",fs="48px",hs="56px",ms="56px",ps="64px",gi="Frutiger W01",yi="Arial, Helvetica, sans-serif",bi="sans-serif",vi="400",xi="600",_i="400",wi="12px",Si="14px",ki="12pt",Ci="14px",Ni="16px",Mi="12pt",ji="16px",Ti="19px",Di="13pt",Ii="19px",Li="22px",Pi="15pt",Ai="22px",Ei="26px",Fi="17pt",$i="27px",Bi="36px",Hi="20pt",zi="33px",Oi="48px",Ri="24pt",gs="16px",ys="24px",nn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},rn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},an={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},sn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},on={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ln={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},cn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},un={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},dn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},fn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},u2=Object.freeze(Object.defineProperty({__proto__:null,AnimationDurationFast:Vf,AnimationDurationNormal:Yf,AnimationDurationSlow:Zf,AnimationEasingBounce:Qf,AnimationEasingEaseIn:qf,AnimationEasingEaseInOut:Jf,AnimationEasingEaseOut:Xf,BorderColorCard:el,BorderColorCardHover:tl,BorderColorDefault:Qo,BorderColorError:nl,BorderColorForm:Ko,BorderRadiusLarge:hh,BorderRadiusMedium:fh,BorderRadiusNone:uh,BorderRadiusSmall:dh,BorderWidthCardBottom:sh,BorderWidthDefault:rh,BorderWidthFormElement:ih,BorderWidthFormElementError:ah,BorderWidthPanel:oh,BorderWidthTableCell:ch,BorderWidthTableHeader:lh,BreakpointDesktop:Yp,BreakpointLargeDesktop:Zp,BreakpointMobile:Gp,BreakpointTablet:Vp,ButtonBorderRadius:Rm,ButtonBorderWidth:Om,ButtonPrimaryBackgroundActive:Tm,ButtonPrimaryBackgroundDefault:Mm,ButtonPrimaryBackgroundDisabled:Dm,ButtonPrimaryBackgroundHover:jm,ButtonPrimaryBorderDefault:Pm,ButtonPrimaryBorderFocus:Am,ButtonPrimaryTextDefault:Im,ButtonPrimaryTextDisabled:Lm,ButtonSecondaryBackgroundActive:Bm,ButtonSecondaryBackgroundDefault:Em,ButtonSecondaryBackgroundHover:$m,ButtonSecondaryBackgroundSolid:Fm,ButtonSecondaryBorderDefault:zm,ButtonSecondaryTextDefault:Hm,ButtonShadowSize:Um,ButtonSpacingPaddingHorizontalDesktop:kl,ButtonSpacingPaddingHorizontalMobile:wl,ButtonSpacingPaddingVerticalDesktop:Sl,ButtonSpacingPaddingVerticalMobile:_l,ButtonTypographyWeight:Wm,CardBackgroundDefault:Gm,CardBorderBottom:Zm,CardBorderDefault:Vm,CardBorderHover:Ym,CardBorderWidthBottom:Km,CardBorderWidthDefault:Qm,CardShadowDefault:ep,CardShadowHover:tp,CardSpacingHeadingMargin:Ml,CardSpacingPaddingDesktop:Nl,CardSpacingPaddingMobile:Cl,CardTextDescription:Xm,CardTextHeading:qm,CardTextLink:Jm,ColorBorderDefault:kh,ColorBorderSecondary:Ch,ColorButtonLoginActive:Qh,ColorButtonLoginBackground:Xh,ColorButtonLoginHover:Jh,ColorButtonLoginShadow:Kh,ColorButtonPrimaryActive:Lh,ColorButtonPrimaryBackground:Th,ColorButtonPrimaryHover:Ih,ColorButtonPrimaryShadow:Ph,ColorButtonPrimaryText:Dh,ColorButtonReverseActive:Wh,ColorButtonReverseBackground:Oh,ColorButtonReverseHover:Uh,ColorButtonReverseShadow:Gh,ColorButtonReverseText:Rh,ColorButtonSecondaryActive:Hh,ColorButtonSecondaryBackground:Ah,ColorButtonSecondaryBackgroundSolid:Eh,ColorButtonSecondaryBorder:Fh,ColorButtonSecondaryHover:Bh,ColorButtonSecondaryShadow:zh,ColorButtonSecondaryText:$h,ColorButtonWarningActive:Zh,ColorButtonWarningBackground:Vh,ColorButtonWarningHover:Yh,ColorButtonWarningShadow:qh,ColorError:Nh,ColorFocusBackground:wh,ColorFocusText:Sh,ColorFormBackground:jh,ColorFormBorder:Mh,ColorGrey1:gl,ColorGrey2:yl,ColorGrey3:bl,ColorGrey4:vl,ColorGrey5:xl,ColorLinkActive:xh,ColorLinkDefault:bh,ColorLinkHover:vh,ColorLinkVisited:_h,ColorPrimaryBlack:al,ColorPrimaryBlue:rl,ColorPrimaryDarkPink:ll,ColorPrimaryGreen:sl,ColorPrimaryPurple:ol,ColorPrimaryRed:cl,ColorPrimaryWhite:il,ColorPrimaryYellow:ul,ColorSecondaryAquaGreen:ml,ColorSecondaryOrange:hl,ColorSecondaryPaleYellow:dl,ColorSecondaryPink:pl,ColorSecondaryWarmYellow:fl,ColorTextPrimary:mh,ColorTextPrint:yh,ColorTextReverse:gh,ColorTextSecondary:ph,ComponentBlur:wm,ComponentBreadcrumbChevronMarginLeft:mm,ComponentBreadcrumbChevronMarginRight:pm,ComponentBreadcrumbPaddingTopDesktop:ym,ComponentBreadcrumbPaddingTopMobile:gm,ComponentButtonPaddingDesktopHorizontal:rm,ComponentButtonPaddingDesktopVertical:nm,ComponentButtonPaddingMobileHorizontal:tm,ComponentButtonPaddingMobileVertical:em,ComponentButtonShadowSize:im,ComponentCardHeadingMargin:dm,ComponentCardPaddingDesktop:um,ComponentCardPaddingMobile:cm,ComponentDetails:km,ComponentExpander:Cm,ComponentFormCheckboxLabelPadding:lm,ComponentFormCheckboxSize:om,ComponentFormInputMinHeight:am,ComponentFormInputPadding:sm,ComponentLink:Sm,ComponentPagination:Nm,ComponentPanelPaddingDesktop:hm,ComponentPanelPaddingMobile:fm,ComponentSpread:_m,ComponentSummaryListCellPaddingHorizontal:vm,ComponentSummaryListCellPaddingVertical:bm,ComponentSummaryListRowMargin:xm,ElevationHigh:Mg,ElevationLow:Cg,ElevationMedium:Ng,ElevationNone:kg,FocusOutlineOffset:xg,FocusOutlineStyle:_g,FocusOutlineWidth:vg,FocusShadowButton:Sg,FocusShadowInput:wg,FontFamilyBase:gi,FontFamilyFallback:yi,FontFamilyPrint:bi,FontLineHeightBase:ys,FontSize14Mobile:wi,FontSize14Print:ki,FontSize14Tablet:Si,FontSize16Mobile:Ci,FontSize16Print:Mi,FontSize16Tablet:Ni,FontSize19Mobile:ji,FontSize19Print:Di,FontSize19Tablet:Ti,FontSize22Mobile:Ii,FontSize22Print:Pi,FontSize22Tablet:Li,FontSize26Mobile:Ai,FontSize26Print:Fi,FontSize26Tablet:Ei,FontSize36Mobile:$i,FontSize36Print:Hi,FontSize36Tablet:Bi,FontSize48Mobile:zi,FontSize48Print:Ri,FontSize48Tablet:Oi,FontSizeBase:gs,FontWeightBold:xi,FontWeightLight:_i,FontWeightNormal:vi,FormBorderRadius:_p,FormBorderWidthDefault:vp,FormBorderWidthError:xp,FormErrorTextDefault:gp,FormErrorTypographyWeight:yp,FormHintTextDefault:bp,FormInputBackgroundDefault:np,FormInputBackgroundDisabled:ip,FormInputBackgroundError:ap,FormInputBackgroundFocus:rp,FormInputBorderDefault:sp,FormInputBorderDisabled:cp,FormInputBorderError:lp,FormInputBorderFocus:op,FormInputTextDefault:up,FormInputTextDisabled:fp,FormInputTextPlaceholder:dp,FormLabelTextDefault:hp,FormLabelTextRequired:mp,FormLabelTypographyWeight:pp,FormSpacingCheckboxLabelPadding:Il,FormSpacingCheckboxSize:Dl,FormSpacingInputMinHeight:Tl,FormSpacingInputPadding:jl,GridGutter:Xp,GridGutterHalf:Jp,GridPageWidth:qp,HeadingsNhsukHeadingL:rn,HeadingsNhsukHeadingM:an,HeadingsNhsukHeadingS:sn,HeadingsNhsukHeadingXl:nn,HeadingsNhsukHeadingXs:on,LayoutColumnActions:Wp,LayoutColumnFull:zp,LayoutColumnHalf:Op,LayoutColumnQuarter:Up,LayoutColumnThird:Rp,LayoutContainerMaxWidth:Hp,ParagraphsBody:ln,ParagraphsBodyLarge:cn,ParagraphsBodySmall:un,ParagraphsLedeText:dn,ParagraphsLedeTextSmall:fn,ShadowButtonDefault:hg,ShadowButtonFocus:gg,ShadowButtonSecondary:mg,ShadowButtonWarning:pg,ShadowCardDefault:yg,ShadowCardHover:bg,SizeButtonMinHeightDesktop:Bp,SizeButtonMinHeightMobile:$p,SizeFormControlLarge:Tp,SizeFormControlMedium:jp,SizeFormControlSmall:Mp,SizeFormInputWidth2xl:Ep,SizeFormInputWidth3xl:Fp,SizeFormInputWidthLg:Pp,SizeFormInputWidthMd:Lp,SizeFormInputWidthSm:Ip,SizeFormInputWidthXl:Ap,SizeFormInputWidthXs:Dp,SizeIconExtraLarge:Cp,SizeIconLarge:kp,SizeIconMedium:Sp,SizeIconNhsDefault:Np,SizeIconSmall:wp,Spacing0:Ll,Spacing1:Pl,Spacing2:Al,Spacing3:El,Spacing4:Fl,Spacing5:$l,Spacing6:Bl,Spacing7:Hl,Spacing8:zl,Spacing9:Ol,SpacingResponsive0Mobile:Xa,SpacingResponsive0Tablet:Ja,SpacingResponsive1Mobile:Qa,SpacingResponsive1Tablet:Ka,SpacingResponsive2Mobile:es,SpacingResponsive2Tablet:ts,SpacingResponsive3Mobile:ns,SpacingResponsive3Tablet:rs,SpacingResponsive4Mobile:is,SpacingResponsive4Tablet:as,SpacingResponsive5Mobile:ss,SpacingResponsive5Tablet:os,SpacingResponsive6Mobile:ls,SpacingResponsive6Tablet:cs,SpacingResponsive7Mobile:us,SpacingResponsive7Tablet:ds,SpacingResponsive8Mobile:fs,SpacingResponsive8Tablet:hs,SpacingResponsive9Mobile:ms,SpacingResponsive9Tablet:ps,StateDisabledBackground:ug,StateDisabledBorder:dg,StateDisabledText:fg,StateErrorBackground:Qp,StateErrorBorder:Kp,StateErrorText:eg,StateInfoBackground:og,StateInfoBorder:lg,StateInfoText:cg,StateSuccessBackground:tg,StateSuccessBorder:ng,StateSuccessText:rg,StateWarningBackground:ig,StateWarningBorder:ag,StateWarningText:sg,TransitionButtonDefault:Kf,TransitionButtonShadow:eh,TransitionCardHover:nh,TransitionInputFocus:th},Symbol.toStringTag,{value:"Module"})),d2=(e,t)=>({fontSize:e.mobile,marginBottom:t.mobile,"@media (min-width: 768px)":{fontSize:e.tablet,marginBottom:t.tablet},"@media print":{fontSize:e.print||e.tablet}}),f2=({children:e,className:t="",style:n={}})=>s.jsx("h1",{className:t,style:{fontFamily:nn.fontFamily,fontWeight:nn.fontWeight,fontSize:nn.fontSize.mobile,lineHeight:nn.lineHeight,marginTop:nn.marginTop,marginBottom:nn.marginBottom.mobile,...n},children:e}),h2=({children:e,className:t="",style:n={}})=>s.jsx("h2",{className:t,style:{fontFamily:rn.fontFamily,fontWeight:rn.fontWeight,fontSize:rn.fontSize.mobile,lineHeight:rn.lineHeight,marginTop:rn.marginTop,marginBottom:rn.marginBottom.mobile,...n},children:e}),m2=({children:e,className:t="",style:n={}})=>s.jsx("h3",{className:t,style:{fontFamily:an.fontFamily,fontWeight:an.fontWeight,fontSize:an.fontSize.mobile,lineHeight:an.lineHeight,marginTop:an.marginTop,marginBottom:an.marginBottom.mobile,...n},children:e}),p2=({children:e,className:t="",style:n={}})=>s.jsx("h4",{className:t,style:{fontFamily:sn.fontFamily,fontWeight:sn.fontWeight,fontSize:sn.fontSize.mobile,lineHeight:sn.lineHeight,marginTop:sn.marginTop,marginBottom:sn.marginBottom.mobile,...n},children:e}),g2=({children:e,className:t="",style:n={}})=>s.jsx("h5",{className:t,style:{fontFamily:on.fontFamily,fontWeight:on.fontWeight,fontSize:on.fontSize.mobile,lineHeight:on.lineHeight,marginTop:on.marginTop,marginBottom:on.marginBottom.mobile,...n},children:e}),y2=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:ln.fontFamily,fontWeight:ln.fontWeight,fontSize:ln.fontSize.mobile,lineHeight:ln.lineHeight,marginTop:ln.marginTop,marginBottom:ln.marginBottom.mobile,...n},children:e}),b2=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:cn.fontFamily,fontWeight:cn.fontWeight,fontSize:cn.fontSize.mobile,lineHeight:cn.lineHeight,marginTop:cn.marginTop,marginBottom:cn.marginBottom.mobile,...n},children:e}),v2=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:un.fontFamily,fontWeight:un.fontWeight,fontSize:un.fontSize.mobile,lineHeight:un.lineHeight,marginTop:un.marginTop,marginBottom:un.marginBottom.mobile,...n},children:e}),x2=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:dn.fontFamily,fontWeight:dn.fontWeight,fontSize:dn.fontSize.mobile,lineHeight:dn.lineHeight,marginTop:dn.marginTop,marginBottom:dn.marginBottom.mobile,...n},children:e}),_2=({children:e,className:t="",style:n={}})=>s.jsx("p",{className:t,style:{fontFamily:fn.fontFamily,fontWeight:fn.fontWeight,fontSize:fn.fontSize.mobile,lineHeight:fn.lineHeight,marginTop:fn.marginTop,marginBottom:fn.marginBottom.mobile,...n},children:e}),w2=()=>$.useMemo(()=>u2,[]),S2=()=>$.useMemo(()=>({BorderColorDefault:Qo,BorderColorForm:Ko,BorderColorCard:el,BorderColorCardHover:tl,BorderColorError:nl,ColorPrimaryBlue:rl,ColorPrimaryWhite:il,ColorPrimaryBlack:al,ColorPrimaryGreen:sl,ColorPrimaryPurple:ol,ColorPrimaryDarkPink:ll,ColorPrimaryRed:cl,ColorPrimaryYellow:ul,ColorSecondaryPaleYellow:dl,ColorSecondaryWarmYellow:fl,ColorSecondaryOrange:hl,ColorSecondaryAquaGreen:ml,ColorSecondaryPink:pl,ColorGrey1:gl,ColorGrey2:yl,ColorGrey3:bl,ColorGrey4:vl,ColorGrey5:xl}),[]),k2=()=>$.useMemo(()=>({Spacing0:Ll,Spacing1:Pl,Spacing2:Al,Spacing3:El,Spacing4:Fl,Spacing5:$l,Spacing6:Bl,Spacing7:Hl,Spacing8:zl,Spacing9:Ol}),[]),C2=()=>$.useMemo(()=>({Mobile:{Size14:wi,Size16:Ci,Size19:ji,Size22:Ii,Size26:Ai,Size36:$i,Size48:zi},Tablet:{Size14:Si,Size16:Ni,Size19:Ti,Size22:Li,Size26:Ei,Size36:Bi,Size48:Oi},Print:{Size14:ki,Size16:Mi,Size19:Di,Size22:Pi,Size26:Fi,Size36:Hi,Size48:Ri},Family:{Base:gi,Fallback:yi,Print:bi},Weight:{Normal:vi,Bold:xi,Light:_i},Base:{Size:gs,LineHeight:ys},FontFamilyBase:gi,FontFamilyFallback:yi,FontFamilyPrint:bi,FontWeightNormal:vi,FontWeightBold:xi,FontWeightLight:_i,FontSize14Mobile:wi,FontSize14Tablet:Si,FontSize14Print:ki,FontSize16Mobile:Ci,FontSize16Tablet:Ni,FontSize16Print:Mi,FontSize19Mobile:ji,FontSize19Tablet:Ti,FontSize19Print:Di,FontSize22Mobile:Ii,FontSize22Tablet:Li,FontSize22Print:Pi,FontSize26Mobile:Ai,FontSize26Tablet:Ei,FontSize26Print:Fi,FontSize36Mobile:$i,FontSize36Tablet:Bi,FontSize36Print:Hi,FontSize48Mobile:zi,FontSize48Tablet:Oi,FontSize48Print:Ri,FontSizeBase:gs,FontLineHeightBase:ys}),[]),N2=()=>$.useMemo(()=>({Mobile:{Size0:Xa,Size1:Qa,Size2:es,Size3:ns,Size4:is,Size5:ss,Size6:ls,Size7:us,Size8:fs,Size9:ms},Tablet:{Size0:Ja,Size1:Ka,Size2:ts,Size3:rs,Size4:as,Size5:os,Size6:cs,Size7:ds,Size8:hs,Size9:ps},SpacingResponsive0Mobile:Xa,SpacingResponsive0Tablet:Ja,SpacingResponsive1Mobile:Qa,SpacingResponsive1Tablet:Ka,SpacingResponsive2Mobile:es,SpacingResponsive2Tablet:ts,SpacingResponsive3Mobile:ns,SpacingResponsive3Tablet:rs,SpacingResponsive4Mobile:is,SpacingResponsive4Tablet:as,SpacingResponsive5Mobile:ss,SpacingResponsive5Tablet:os,SpacingResponsive6Mobile:ls,SpacingResponsive6Tablet:cs,SpacingResponsive7Mobile:us,SpacingResponsive7Tablet:ds,SpacingResponsive8Mobile:fs,SpacingResponsive8Tablet:hs,SpacingResponsive9Mobile:ms,SpacingResponsive9Tablet:ps}),[]),M2=()=>$.useMemo(()=>({ButtonSpacingPaddingVerticalMobile:_l,ButtonSpacingPaddingHorizontalMobile:wl,ButtonSpacingPaddingVerticalDesktop:Sl,ButtonSpacingPaddingHorizontalDesktop:kl,CardSpacingPaddingMobile:Cl,CardSpacingPaddingDesktop:Nl,CardSpacingHeadingMargin:Ml,FormSpacingInputPadding:jl,FormSpacingInputMinHeight:Tl,FormSpacingCheckboxSize:Dl,FormSpacingCheckboxLabelPadding:Il}),[]),j2=()=>$.useMemo(()=>({xl:nn,l:rn,m:an,s:sn,xs:on}),[]),T2=()=>$.useMemo(()=>({body:ln,bodyLarge:cn,bodySmall:un,ledeText:dn,ledeTextSmall:fn}),[]),D2=()=>$.useMemo(()=>({headings:{xl:nn,l:rn,m:an,s:sn,xs:on},paragraphs:{body:ln,bodyLarge:cn,bodySmall:un,ledeText:dn,ledeTextSmall:fn},fonts:{family:{base:gi,fallback:yi,print:bi},weight:{normal:vi,bold:xi,light:_i},sizes:{mobile:{size14:wi,size16:Ci,size19:ji,size22:Ii,size26:Ai,size36:$i,size48:zi},tablet:{size14:Si,size16:Ni,size19:Ti,size22:Li,size26:Ei,size36:Bi,size48:Oi},print:{size14:ki,size16:Mi,size19:Di,size22:Pi,size26:Fi,size36:Hi,size48:Ri}}}}),[]);function I2(e={}){const{initialLayout:t=void 0,fallbackLayout:n="two-column"}=e,[r,i]=W.useState(t),a=W.useCallback(()=>i("three-column"),[]),o=W.useCallback(()=>i(c=>c==="three-column"?n:c),[n]),l=W.useCallback(()=>i(c=>c==="three-column"?n:"three-column"),[n]);return{forceLayout:r,setLayout:i,drillIn:a,drillOut:o,toggle:l,isDrilledIn:r==="three-column"}}const Rl={fontPath:"https://assets.nhs.uk/fonts/",includeFontFace:!0,useFallbacks:!0,fontWeights:[400,600]},Ct={normal:{woff2:"FrutigerLTW01-55Roman.woff2",woff:"FrutigerLTW01-55Roman.woff",ttf:"FrutigerLTW01-55Roman.ttf",eot:"FrutigerLTW01-55Roman.eot"},bold:{woff2:"FrutigerLTW01-65Bold.woff2",woff:"FrutigerLTW01-65Bold.woff",ttf:"FrutigerLTW01-65Bold.ttf",eot:"FrutigerLTW01-65Bold.eot"}};function L2(e={}){const{fontPath:t,fontWeights:n}={...Rl,...e},r=[];return n?.includes(400)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 400;
  src: url("${t}${Ct.normal.eot}?#iefix") format("eot"),
       url("${t}${Ct.normal.woff2}") format("woff2"),
       url("${t}${Ct.normal.woff}") format("woff"),
       url("${t}${Ct.normal.ttf}") format("truetype");
  src: url("${t}${Ct.normal.eot}");
}`),n?.includes(600)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 600;
  src: url("${t}${Ct.bold.eot}?#iefix") format("eot"),
       url("${t}${Ct.bold.woff2}") format("woff2"),
       url("${t}${Ct.bold.woff}") format("woff"),
       url("${t}${Ct.bold.ttf}") format("truetype");
  src: url("${t}${Ct.bold.eot}");
}`),r.join(`
`)}function P2(e={}){if(typeof document>"u")return;const{fontPath:t,fontWeights:n}={...Rl,...e};[...n?.includes(400)?[{href:`${t}${Ct.normal.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${Ct.normal.woff}`,as:"font",type:"font/woff"}]:[],...n?.includes(600)?[{href:`${t}${Ct.bold.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${Ct.bold.woff}`,as:"font",type:"font/woff"}]:[]].forEach(i=>{const a=document.createElement("link");a.rel="preload",a.href=i.href,a.as=i.as,a.type=i.type,a.crossOrigin="anonymous",document.head.appendChild(a)})}const A2='"Frutiger W01", Arial, Helvetica, sans-serif',E2="Arial, Helvetica, sans-serif";async function F2(){if(typeof document>"u"||!document.fonts)return!1;try{return await document.fonts.load('1em "Frutiger W01"'),document.fonts.check('1em "Frutiger W01"')}catch{return!1}}function Nn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jg(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ft={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Lr={duration:.5,overwrite:!1,delay:0},Ul,xt,Qe,Wt=1e8,Ye=1/Wt,Wl=Math.PI*2,$2=Wl/4,B2=0,Tg=Math.sqrt,H2=Math.cos,z2=Math.sin,bt=function(t){return typeof t=="string"},it=function(t){return typeof t=="function"},Mn=function(t){return typeof t=="number"},Gl=function(t){return typeof t>"u"},hn=function(t){return typeof t=="object"},Tt=function(t){return t!==!1},Vl=function(){return typeof window<"u"},bs=function(t){return it(t)||bt(t)},Dg=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},St=Array.isArray,Yl=/(?:-?\.?\d|\.)+/gi,Ig=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Pr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Zl=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Lg=/[+-]=-?[.\d]+/,Pg=/[^,'"\[\]\s]+/gi,O2=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,nt,mn,ql,Xl,$t={},vs={},Ag,Eg=function(t){return(vs=Er(t,$t))&&Lt},Jl=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},Ui=function(t,n){return!n&&console.warn(t)},Fg=function(t,n){return t&&($t[t]=n)&&vs&&(vs[t]=n)||$t},Wi=function(){return 0},R2={suppressEvents:!0,isStart:!0,kill:!1},xs={suppressEvents:!0,kill:!1},U2={suppressEvents:!0},Ql={},$n=[],Kl={},$g,Bt={},ec={},Bg=30,_s=[],tc="",nc=function(t){var n=t[0],r,i;if(hn(n)||it(n)||(t=[t]),!(r=(n._gsap||{}).harness)){for(i=_s.length;i--&&!_s[i].targetTest(n););r=_s[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new h0(t[i],r)))||t.splice(i,1);return t},ar=function(t){return t._gsap||nc(Vt(t))[0]._gsap},Hg=function(t,n,r){return(r=t[n])&&it(r)?t[n]():Gl(r)&&t.getAttribute&&t.getAttribute(n)||r},Dt=function(t,n){return(t=t.split(",")).forEach(n)||t},at=function(t){return Math.round(t*1e5)/1e5||0},ct=function(t){return Math.round(t*1e7)/1e7||0},Ar=function(t,n){var r=n.charAt(0),i=parseFloat(n.substr(2));return t=parseFloat(t),r==="+"?t+i:r==="-"?t-i:r==="*"?t*i:t/i},W2=function(t,n){for(var r=n.length,i=0;t.indexOf(n[i])<0&&++i<r;);return i<r},ws=function(){var t=$n.length,n=$n.slice(0),r,i;for(Kl={},$n.length=0,r=0;r<t;r++)i=n[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},rc=function(t){return!!(t._initted||t._startAt||t.add)},zg=function(t,n,r,i){$n.length&&!xt&&ws(),t.render(n,r,!!(xt&&n<0&&rc(t))),$n.length&&!xt&&ws()},Og=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(Pg).length<2?n:bt(t)?t.trim():t},Rg=function(t){return t},Ht=function(t,n){for(var r in n)r in t||(t[r]=n[r]);return t},G2=function(t){return function(n,r){for(var i in r)i in n||i==="duration"&&t||i==="ease"||(n[i]=r[i])}},Er=function(t,n){for(var r in n)t[r]=n[r];return t},Ug=function e(t,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(t[r]=hn(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},Ss=function(t,n){var r={},i;for(i in t)i in n||(r[i]=t[i]);return r},Gi=function(t){var n=t.parent||nt,r=t.keyframes?G2(St(t.keyframes)):Ht;if(Tt(t.inherit))for(;n;)r(t,n.vars.defaults),n=n.parent||n._dp;return t},V2=function(t,n){for(var r=t.length,i=r===n.length;i&&r--&&t[r]===n[r];);return r<0},Wg=function(t,n,r,i,a){var o=t[i],l;if(a)for(l=n[a];o&&o[a]>l;)o=o._prev;return o?(n._next=o._next,o._next=n):(n._next=t[r],t[r]=n),n._next?n._next._prev=n:t[i]=n,n._prev=o,n.parent=n._dp=t,n},ks=function(t,n,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var a=n._prev,o=n._next;a?a._next=o:t[r]===n&&(t[r]=o),o?o._prev=a:t[i]===n&&(t[i]=a),n._next=n._prev=n.parent=null},Bn=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},sr=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},Y2=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},ic=function(t,n,r,i){return t._startAt&&(xt?t._startAt.revert(xs):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,i))},Z2=function e(t){return!t||t._ts&&e(t.parent)},Gg=function(t){return t._repeat?Fr(t._tTime,t=t.duration()+t._rDelay)*t:0},Fr=function(t,n){var r=Math.floor(t=ct(t/n));return t&&r===t?r-1:r},Cs=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Ns=function(t){return t._end=ct(t._start+(t._tDur/Math.abs(t._ts||t._rts||Ye)||0))},Ms=function(t,n){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=ct(r._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),Ns(t),r._dirty||sr(r,t)),t},Vg=function(t,n){var r;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(r=Cs(t.rawTime(),n),(!n._dur||Yi(0,n.totalDuration(),r)-n._tTime>Ye)&&n.render(r,!0)),sr(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-Ye}},pn=function(t,n,r,i){return n.parent&&Bn(n),n._start=ct((Mn(r)?r:r||t!==nt?Gt(t,r,n):t._time)+n._delay),n._end=ct(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),Wg(t,n,"_first","_last",t._sort?"_start":0),ac(n)||(t._recent=n),i||Vg(t,n),t._ts<0&&Ms(t,t._tTime),t},Yg=function(t,n){return($t.ScrollTrigger||Jl("scrollTrigger",n))&&$t.ScrollTrigger.create(n,t)},Zg=function(t,n,r,i,a){if(mc(t,n,a),!t._initted)return 1;if(!r&&t._pt&&!xt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&$g!==Ot.frame)return $n.push(t),t._lazy=[a,i],1},q2=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},ac=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},X2=function(t,n,r,i){var a=t.ratio,o=n<0||!n&&(!t._start&&q2(t)&&!(!t._initted&&ac(t))||(t._ts<0||t._dp._ts<0)&&!ac(t))?0:1,l=t._rDelay,c=0,u,d,f;if(l&&t._repeat&&(c=Yi(0,t._tDur,n),d=Fr(c,l),t._yoyo&&d&1&&(o=1-o),d!==Fr(t._tTime,l)&&(a=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==a||xt||i||t._zTime===Ye||!n&&t._zTime){if(!t._initted&&Zg(t,n,i,r,c))return;for(f=t._zTime,t._zTime=n||(r?Ye:0),r||(r=n&&!f),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=c,u=t._pt;u;)u.r(o,u.d),u=u._next;n<0&&ic(t,n,r,!0),t._onUpdate&&!r&&zt(t,"onUpdate"),c&&t._repeat&&!r&&t.parent&&zt(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===o&&(o&&Bn(t,1),!r&&!xt&&(zt(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},J2=function(t,n,r){var i;if(r>n)for(i=t._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>n)return i;i=i._next}else for(i=t._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<n)return i;i=i._prev}},$r=function(t,n,r,i){var a=t._repeat,o=ct(n)||0,l=t._tTime/t._tDur;return l&&!i&&(t._time*=o/t._dur),t._dur=o,t._tDur=a?a<0?1e10:ct(o*(a+1)+t._rDelay*a):o,l>0&&!i&&Ms(t,t._tTime=t._tDur*l),t.parent&&Ns(t),r||sr(t.parent,t),t},qg=function(t){return t instanceof _t?sr(t):$r(t,t._dur)},Q2={_start:0,endTime:Wi,totalDuration:Wi},Gt=function e(t,n,r){var i=t.labels,a=t._recent||Q2,o=t.duration()>=Wt?a.endTime(!1):t._dur,l,c,u;return bt(n)&&(isNaN(n)||n in i)?(c=n.charAt(0),u=n.substr(-1)==="%",l=n.indexOf("="),c==="<"||c===">"?(l>=0&&(n=n.replace(/=/,"")),(c==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0)*(u?(l<0?a:r).totalDuration()/100:1)):l<0?(n in i||(i[n]=o),i[n]):(c=parseFloat(n.charAt(l-1)+n.substr(l+1)),u&&r&&(c=c/100*(St(r)?r[0]:r).totalDuration()),l>1?e(t,n.substr(0,l-1),r)+c:o+c)):n==null?o:+n},Vi=function(t,n,r){var i=Mn(n[1]),a=(i?2:1)+(t<2?0:1),o=n[a],l,c;if(i&&(o.duration=n[1]),o.parent=r,t){for(l=o,c=r;c&&!("immediateRender"in l);)l=c.vars.defaults||{},c=Tt(c.vars.inherit)&&c.parent;o.immediateRender=Tt(l.immediateRender),t<2?o.runBackwards=1:o.startAt=n[a-1]}return new st(n[0],o,n[a+1])},Hn=function(t,n){return t||t===0?n(t):n},Yi=function(t,n,r){return r<t?t:r>n?n:r},kt=function(t,n){return!bt(t)||!(n=O2.exec(t))?"":n[1]},K2=function(t,n,r){return Hn(r,function(i){return Yi(t,n,i)})},sc=[].slice,Xg=function(t,n){return t&&hn(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&hn(t[0]))&&!t.nodeType&&t!==mn},ew=function(t,n,r){return r===void 0&&(r=[]),t.forEach(function(i){var a;return bt(i)&&!n||Xg(i,1)?(a=r).push.apply(a,Vt(i)):r.push(i)})||r},Vt=function(t,n,r){return Qe&&!n&&Qe.selector?Qe.selector(t):bt(t)&&!r&&(ql||!Hr())?sc.call((n||Xl).querySelectorAll(t),0):St(t)?ew(t,r):Xg(t)?sc.call(t,0):t?[t]:[]},oc=function(t){return t=Vt(t)[0]||Ui("Invalid scope")||{},function(n){var r=t.current||t.nativeElement||t;return Vt(n,r.querySelectorAll?r:r===t?Ui("Invalid scope")||Xl.createElement("div"):t)}},Jg=function(t){return t.sort(function(){return .5-Math.random()})},Qg=function(t){if(it(t))return t;var n=hn(t)?t:{each:t},r=or(n.ease),i=n.from||0,a=parseFloat(n.base)||0,o={},l=i>0&&i<1,c=isNaN(i)||l,u=n.axis,d=i,f=i;return bt(i)?d=f={center:.5,edges:.5,end:1}[i]||0:!l&&c&&(d=i[0],f=i[1]),function(p,m,y){var h=(y||n).length,g=o[h],k,S,j,M,b,_,N,w,v;if(!g){if(v=n.grid==="auto"?0:(n.grid||[1,Wt])[1],!v){for(N=-Wt;N<(N=y[v++].getBoundingClientRect().left)&&v<h;);v<h&&v--}for(g=o[h]=[],k=c?Math.min(v,h)*d-.5:i%v,S=v===Wt?0:c?h*f/v-.5:i/v|0,N=0,w=Wt,_=0;_<h;_++)j=_%v-k,M=S-(_/v|0),g[_]=b=u?Math.abs(u==="y"?M:j):Tg(j*j+M*M),b>N&&(N=b),b<w&&(w=b);i==="random"&&Jg(g),g.max=N-w,g.min=w,g.v=h=(parseFloat(n.amount)||parseFloat(n.each)*(v>h?h-1:u?u==="y"?h/v:v:Math.max(v,h/v))||0)*(i==="edges"?-1:1),g.b=h<0?a-h:a,g.u=kt(n.amount||n.each)||0,r=r&&h<0?u0(r):r}return h=(g[p]-g.min)/g.max||0,ct(g.b+(r?r(h):h)*g.v)+g.u}},lc=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var i=ct(Math.round(parseFloat(r)/t)*t*n);return(i-i%1)/n+(Mn(r)?0:kt(r))}},Kg=function(t,n){var r=St(t),i,a;return!r&&hn(t)&&(i=r=t.radius||Wt,t.values?(t=Vt(t.values),(a=!Mn(t[0]))&&(i*=i)):t=lc(t.increment)),Hn(n,r?it(t)?function(o){return a=t(o),Math.abs(a-o)<=i?a:o}:function(o){for(var l=parseFloat(a?o.x:o),c=parseFloat(a?o.y:0),u=Wt,d=0,f=t.length,p,m;f--;)a?(p=t[f].x-l,m=t[f].y-c,p=p*p+m*m):p=Math.abs(t[f]-l),p<u&&(u=p,d=f);return d=!i||u<=i?t[d]:o,a||d===o||Mn(o)?d:d+kt(o)}:lc(t))},e0=function(t,n,r,i){return Hn(St(t)?!n:r===!0?!!(r=0):!i,function(){return St(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(n-t+r*.99))/r)*r*i)/i})},tw=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduce(function(a,o){return o(a)},i)}},nw=function(t,n){return function(r){return t(parseFloat(r))+(n||kt(r))}},rw=function(t,n,r){return n0(t,n,0,1,r)},t0=function(t,n,r){return Hn(r,function(i){return t[~~n(i)]})},iw=function e(t,n,r){var i=n-t;return St(t)?t0(t,e(0,t.length),n):Hn(r,function(a){return(i+(a-t)%i)%i+t})},aw=function e(t,n,r){var i=n-t,a=i*2;return St(t)?t0(t,e(0,t.length-1),n):Hn(r,function(o){return o=(a+(o-t)%a)%a||0,t+(o>i?a-o:o)})},Zi=function(t){for(var n=0,r="",i,a,o,l;~(i=t.indexOf("random(",n));)o=t.indexOf(")",i),l=t.charAt(i+7)==="[",a=t.substr(i+7,o-i-7).match(l?Pg:Yl),r+=t.substr(n,i-n)+e0(l?a:+a[0],l?0:+a[1],+a[2]||1e-5),n=o+1;return r+t.substr(n,t.length-n)},n0=function(t,n,r,i,a){var o=n-t,l=i-r;return Hn(a,function(c){return r+((c-t)/o*l||0)})},sw=function e(t,n,r,i){var a=isNaN(t+n)?0:function(m){return(1-m)*t+m*n};if(!a){var o=bt(t),l={},c,u,d,f,p;if(r===!0&&(i=1)&&(r=null),o)t={p:t},n={p:n};else if(St(t)&&!St(n)){for(d=[],f=t.length,p=f-2,u=1;u<f;u++)d.push(e(t[u-1],t[u]));f--,a=function(y){y*=f;var h=Math.min(p,~~y);return d[h](y-h)},r=n}else i||(t=Er(St(t)?[]:{},t));if(!d){for(c in n)fc.call(l,t,c,"get",n[c]);a=function(y){return yc(y,l)||(o?t.p:t)}}}return Hn(r,a)},r0=function(t,n,r){var i=t.labels,a=Wt,o,l,c;for(o in i)l=i[o]-n,l<0==!!r&&l&&a>(l=Math.abs(l))&&(c=o,a=l);return c},zt=function(t,n,r){var i=t.vars,a=i[n],o=Qe,l=t._ctx,c,u,d;if(a)return c=i[n+"Params"],u=i.callbackScope||t,r&&$n.length&&ws(),l&&(Qe=l),d=c?a.apply(u,c):a.call(u),Qe=o,d},qi=function(t){return Bn(t),t.scrollTrigger&&t.scrollTrigger.kill(!!xt),t.progress()<1&&zt(t,"onInterrupt"),t},Br,i0=[],a0=function(t){if(t)if(t=!t.name&&t.default||t,Vl()||t.headless){var n=t.name,r=it(t),i=n&&!r&&t.init?function(){this._props=[]}:t,a={init:Wi,render:yc,add:fc,kill:ww,modifier:_w,rawVars:0},o={targetTest:0,get:0,getSetter:gc,aliases:{},register:0};if(Hr(),t!==i){if(Bt[n])return;Ht(i,Ht(Ss(t,a),o)),Er(i.prototype,Er(a,Ss(t,o))),Bt[i.prop=n]=i,t.targetTest&&(_s.push(i),Ql[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}Fg(n,i),t.register&&t.register(Lt,i,It)}else i0.push(t)},Ze=255,Xi={aqua:[0,Ze,Ze],lime:[0,Ze,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ze],navy:[0,0,128],white:[Ze,Ze,Ze],olive:[128,128,0],yellow:[Ze,Ze,0],orange:[Ze,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ze,0,0],pink:[Ze,192,203],cyan:[0,Ze,Ze],transparent:[Ze,Ze,Ze,0]},cc=function(t,n,r){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(r-n)*t*6:t<.5?r:t*3<2?n+(r-n)*(2/3-t)*6:n)*Ze+.5|0},s0=function(t,n,r){var i=t?Mn(t)?[t>>16,t>>8&Ze,t&Ze]:0:Xi.black,a,o,l,c,u,d,f,p,m,y;if(!i){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Xi[t])i=Xi[t];else if(t.charAt(0)==="#"){if(t.length<6&&(a=t.charAt(1),o=t.charAt(2),l=t.charAt(3),t="#"+a+a+o+o+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return i=parseInt(t.substr(1,6),16),[i>>16,i>>8&Ze,i&Ze,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),i=[t>>16,t>>8&Ze,t&Ze]}else if(t.substr(0,3)==="hsl"){if(i=y=t.match(Yl),!n)c=+i[0]%360/360,u=+i[1]/100,d=+i[2]/100,o=d<=.5?d*(u+1):d+u-d*u,a=d*2-o,i.length>3&&(i[3]*=1),i[0]=cc(c+1/3,a,o),i[1]=cc(c,a,o),i[2]=cc(c-1/3,a,o);else if(~t.indexOf("="))return i=t.match(Ig),r&&i.length<4&&(i[3]=1),i}else i=t.match(Yl)||Xi.transparent;i=i.map(Number)}return n&&!y&&(a=i[0]/Ze,o=i[1]/Ze,l=i[2]/Ze,f=Math.max(a,o,l),p=Math.min(a,o,l),d=(f+p)/2,f===p?c=u=0:(m=f-p,u=d>.5?m/(2-f-p):m/(f+p),c=f===a?(o-l)/m+(o<l?6:0):f===o?(l-a)/m+2:(a-o)/m+4,c*=60),i[0]=~~(c+.5),i[1]=~~(u*100+.5),i[2]=~~(d*100+.5)),r&&i.length<4&&(i[3]=1),i},o0=function(t){var n=[],r=[],i=-1;return t.split(zn).forEach(function(a){var o=a.match(Pr)||[];n.push.apply(n,o),r.push(i+=o.length+1)}),n.c=r,n},l0=function(t,n,r){var i="",a=(t+i).match(zn),o=n?"hsla(":"rgba(",l=0,c,u,d,f;if(!a)return t;if(a=a.map(function(p){return(p=s0(p,n,1))&&o+(n?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),r&&(d=o0(t),c=r.c,c.join(i)!==d.c.join(i)))for(u=t.replace(zn,"1").split(Pr),f=u.length-1;l<f;l++)i+=u[l]+(~c.indexOf(l)?a.shift()||o+"0,0,0,0)":(d.length?d:a.length?a:r).shift());if(!u)for(u=t.split(zn),f=u.length-1;l<f;l++)i+=u[l]+a[l];return i+u[f]},zn=(function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Xi)e+="|"+t+"\\b";return new RegExp(e+")","gi")})(),ow=/hsl[a]?\(/,c0=function(t){var n=t.join(" "),r;if(zn.lastIndex=0,zn.test(n))return r=ow.test(n),t[1]=l0(t[1],r),t[0]=l0(t[0],r,o0(t[1])),!0},Ji,Ot=(function(){var e=Date.now,t=500,n=33,r=e(),i=r,a=1e3/240,o=a,l=[],c,u,d,f,p,m,y=function h(g){var k=e()-i,S=g===!0,j,M,b,_;if((k>t||k<0)&&(r+=k-n),i+=k,b=i-r,j=b-o,(j>0||S)&&(_=++f.frame,p=b-f.time*1e3,f.time=b=b/1e3,o+=j+(j>=a?4:a-j),M=1),S||(c=u(h)),M)for(m=0;m<l.length;m++)l[m](b,p,_,g)};return f={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(g){return p/(1e3/(g||60))},wake:function(){Ag&&(!ql&&Vl()&&(mn=ql=window,Xl=mn.document||{},$t.gsap=Lt,(mn.gsapVersions||(mn.gsapVersions=[])).push(Lt.version),Eg(vs||mn.GreenSockGlobals||!mn.gsap&&mn||{}),i0.forEach(a0)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&f.sleep(),u=d||function(g){return setTimeout(g,o-f.time*1e3+1|0)},Ji=1,y(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(c),Ji=0,u=Wi},lagSmoothing:function(g,k){t=g||1/0,n=Math.min(k||33,t)},fps:function(g){a=1e3/(g||240),o=f.time*1e3+a},add:function(g,k,S){var j=k?function(M,b,_,N){g(M,b,_,N),f.remove(j)}:g;return f.remove(g),l[S?"unshift":"push"](j),Hr(),j},remove:function(g,k){~(k=l.indexOf(g))&&l.splice(k,1)&&m>=k&&m--},_listeners:l},f})(),Hr=function(){return!Ji&&Ot.wake()},He={},lw=/^[\d.\-M][\d.\-,\s]/,cw=/["']/g,uw=function(t){for(var n={},r=t.substr(1,t.length-3).split(":"),i=r[0],a=1,o=r.length,l,c,u;a<o;a++)c=r[a],l=a!==o-1?c.lastIndexOf(","):c.length,u=c.substr(0,l),n[i]=isNaN(u)?u.replace(cw,"").trim():+u,i=c.substr(l+1).trim();return n},dw=function(t){var n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n);return t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)},fw=function(t){var n=(t+"").split("("),r=He[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[uw(n[1])]:dw(t).split(",").map(Og)):He._CE&&lw.test(t)?He._CE("",t):r},u0=function(t){return function(n){return 1-t(1-n)}},d0=function e(t,n){for(var r=t._first,i;r;)r instanceof _t?e(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?e(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},or=function(t,n){return t&&(it(t)?t:He[t]||fw(t))||n},lr=function(t,n,r,i){r===void 0&&(r=function(c){return 1-n(1-c)}),i===void 0&&(i=function(c){return c<.5?n(c*2)/2:1-n((1-c)*2)/2});var a={easeIn:n,easeOut:r,easeInOut:i},o;return Dt(t,function(l){He[l]=$t[l]=a,He[o=l.toLowerCase()]=r;for(var c in a)He[o+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=He[l+"."+c]=a[c]}),a},f0=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},uc=function e(t,n,r){var i=n>=1?n:1,a=(r||(t?.3:.45))/(n<1?n:1),o=a/Wl*(Math.asin(1/i)||0),l=function(d){return d===1?1:i*Math.pow(2,-10*d)*z2((d-o)*a)+1},c=t==="out"?l:t==="in"?function(u){return 1-l(1-u)}:f0(l);return a=Wl/a,c.config=function(u,d){return e(t,u,d)},c},dc=function e(t,n){n===void 0&&(n=1.70158);var r=function(o){return o?--o*o*((n+1)*o+n)+1:0},i=t==="out"?r:t==="in"?function(a){return 1-r(1-a)}:f0(r);return i.config=function(a){return e(t,a)},i};Dt("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;lr(e+",Power"+(n-1),t?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})}),He.Linear.easeNone=He.none=He.Linear.easeIn,lr("Elastic",uc("in"),uc("out"),uc()),(function(e,t){var n=1/t,r=2*n,i=2.5*n,a=function(l){return l<n?e*l*l:l<r?e*Math.pow(l-1.5/t,2)+.75:l<i?e*(l-=2.25/t)*l+.9375:e*Math.pow(l-2.625/t,2)+.984375};lr("Bounce",function(o){return 1-a(1-o)},a)})(7.5625,2.75),lr("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),lr("Circ",function(e){return-(Tg(1-e*e)-1)}),lr("Sine",function(e){return e===1?1:-H2(e*$2)+1}),lr("Back",dc("in"),dc("out"),dc()),He.SteppedEase=He.steps=$t.SteppedEase={config:function(t,n){t===void 0&&(t=1);var r=1/t,i=t+(n?0:1),a=n?1:0,o=1-Ye;return function(l){return((i*Yi(0,o,l)|0)+a)*r}}},Lr.ease=He["quad.out"],Dt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return tc+=e+","+e+"Params,"});var h0=function(t,n){this.id=B2++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:Hg,this.set=n?n.getSetter:gc},Qi=(function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,$r(this,+n.duration,1,1),this.data=n.data,Qe&&(this._ctx=Qe,Qe.data.push(this)),Ji||Ot.wake()}var t=e.prototype;return t.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},t.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},t.totalDuration=function(r){return arguments.length?(this._dirty=0,$r(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(r,i){if(Hr(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(Ms(this,r),!a._dp||a.parent||Vg(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&pn(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Ye||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),zg(this,r,i)),this},t.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+Gg(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},t.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+Gg(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(r,i){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*a,i):this._repeat?Fr(this._tTime,a)+1:1},t.timeScale=function(r,i){if(!arguments.length)return this._rts===-Ye?0:this._rts;if(this._rts===r)return this;var a=this.parent&&this._ts?Cs(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Ye?0:this._rts,this.totalTime(Yi(-Math.abs(this._delay),this.totalDuration(),a),i!==!1),Ns(this),Y2(this)},t.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Hr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ye&&(this._tTime-=Ye)))),this):this._ps},t.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&pn(i,this,r-this._delay),this}return this._start},t.endTime=function(r){return this._start+(Tt(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Cs(i.rawTime(r),this):this._tTime:this._tTime},t.revert=function(r){r===void 0&&(r=U2);var i=xt;return xt=r,rc(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),xt=i,this},t.globalTime=function(r){for(var i=this,a=arguments.length?r:i.rawTime();i;)a=i._start+a/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):a},t.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,qg(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,qg(this),i?this.time(i):this}return this._rDelay},t.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},t.seek=function(r,i){return this.totalTime(Gt(this,r),Tt(i))},t.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,Tt(i)),this._dur||(this._zTime=-Ye),this},t.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},t.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},t.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Ye:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ye,this},t.isActive=function(){var r=this.parent||this._dp,i=this._start,a;return!!(!r||this._ts&&this._initted&&r.isActive()&&(a=r.rawTime(!0))>=i&&a<this.endTime(!0)-Ye)},t.eventCallback=function(r,i,a){var o=this.vars;return arguments.length>1?(i?(o[r]=i,a&&(o[r+"Params"]=a),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},t.then=function(r){var i=this;return new Promise(function(a){var o=it(r)?r:Rg,l=function(){var u=i.then;i.then=null,it(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=u),a(o),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?l():i._prom=l})},t.kill=function(){qi(this)},e})();Ht(Qi.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ye,_prom:0,_ps:!1,_rts:1});var _t=(function(e){jg(t,e);function t(r,i){var a;return r===void 0&&(r={}),a=e.call(this,r)||this,a.labels={},a.smoothChildTiming=!!r.smoothChildTiming,a.autoRemoveChildren=!!r.autoRemoveChildren,a._sort=Tt(r.sortChildren),nt&&pn(r.parent||nt,Nn(a),i),r.reversed&&a.reverse(),r.paused&&a.paused(!0),r.scrollTrigger&&Yg(Nn(a),r.scrollTrigger),a}var n=t.prototype;return n.to=function(i,a,o){return Vi(0,arguments,this),this},n.from=function(i,a,o){return Vi(1,arguments,this),this},n.fromTo=function(i,a,o,l){return Vi(2,arguments,this),this},n.set=function(i,a,o){return a.duration=0,a.parent=this,Gi(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new st(i,a,Gt(this,o),1),this},n.call=function(i,a,o){return pn(this,st.delayedCall(0,i,a),o)},n.staggerTo=function(i,a,o,l,c,u,d){return o.duration=a,o.stagger=o.stagger||l,o.onComplete=u,o.onCompleteParams=d,o.parent=this,new st(i,o,Gt(this,c)),this},n.staggerFrom=function(i,a,o,l,c,u,d){return o.runBackwards=1,Gi(o).immediateRender=Tt(o.immediateRender),this.staggerTo(i,a,o,l,c,u,d)},n.staggerFromTo=function(i,a,o,l,c,u,d,f){return l.startAt=o,Gi(l).immediateRender=Tt(l.immediateRender),this.staggerTo(i,a,l,c,u,d,f)},n.render=function(i,a,o){var l=this._time,c=this._dirty?this.totalDuration():this._tDur,u=this._dur,d=i<=0?0:ct(i),f=this._zTime<0!=i<0&&(this._initted||!u),p,m,y,h,g,k,S,j,M,b,_,N;if(this!==nt&&d>c&&i>=0&&(d=c),d!==this._tTime||o||f){if(l!==this._time&&u&&(d+=this._time-l,i+=this._time-l),p=d,M=this._start,j=this._ts,k=!j,f&&(u||(l=this._zTime),(i||!a)&&(this._zTime=i)),this._repeat){if(_=this._yoyo,g=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(g*100+i,a,o);if(p=ct(d%g),d===c?(h=this._repeat,p=u):(b=ct(d/g),h=~~b,h&&h===b&&(p=u,h--),p>u&&(p=u)),b=Fr(this._tTime,g),!l&&this._tTime&&b!==h&&this._tTime-b*g-this._dur<=0&&(b=h),_&&h&1&&(p=u-p,N=1),h!==b&&!this._lock){var w=_&&b&1,v=w===(_&&h&1);if(h<b&&(w=!w),l=w?0:d%u?u:d,this._lock=1,this.render(l||(N?0:ct(h*g)),a,!u)._lock=0,this._tTime=d,!a&&this.parent&&zt(this,"onRepeat"),this.vars.repeatRefresh&&!N&&(this.invalidate()._lock=1),l&&l!==this._time||k!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,c=this._tDur,v&&(this._lock=2,l=w?u:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!N&&this.invalidate()),this._lock=0,!this._ts&&!k)return this;d0(this,N)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=J2(this,ct(l),ct(p)),S&&(d-=p-(p=S._start))),this._tTime=d,this._time=p,this._act=!j,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,l=0),!l&&d&&!a&&!b&&(zt(this,"onStart"),this._tTime!==d))return this;if(p>=l&&i>=0)for(m=this._first;m;){if(y=m._next,(m._act||p>=m._start)&&m._ts&&S!==m){if(m.parent!==this)return this.render(i,a,o);if(m.render(m._ts>0?(p-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(p-m._start)*m._ts,a,o),p!==this._time||!this._ts&&!k){S=0,y&&(d+=this._zTime=-Ye);break}}m=y}else{m=this._last;for(var C=i<0?i:p;m;){if(y=m._prev,(m._act||C<=m._end)&&m._ts&&S!==m){if(m.parent!==this)return this.render(i,a,o);if(m.render(m._ts>0?(C-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(C-m._start)*m._ts,a,o||xt&&rc(m)),p!==this._time||!this._ts&&!k){S=0,y&&(d+=this._zTime=C?-Ye:Ye);break}}m=y}}if(S&&!a&&(this.pause(),S.render(p>=l?0:-Ye)._zTime=p>=l?1:-1,this._ts))return this._start=M,Ns(this),this.render(i,a,o);this._onUpdate&&!a&&zt(this,"onUpdate",!0),(d===c&&this._tTime>=this.totalDuration()||!d&&l)&&(M===this._start||Math.abs(j)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(d===c&&this._ts>0||!d&&this._ts<0)&&Bn(this,1),!a&&!(i<0&&!l)&&(d||l||!c)&&(zt(this,d===c&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(i,a){var o=this;if(Mn(a)||(a=Gt(this,a,i)),!(i instanceof Qi)){if(St(i))return i.forEach(function(l){return o.add(l,a)}),this;if(bt(i))return this.addLabel(i,a);if(it(i))i=st.delayedCall(0,i);else return this}return this!==i?pn(this,i,a):this},n.getChildren=function(i,a,o,l){i===void 0&&(i=!0),a===void 0&&(a=!0),o===void 0&&(o=!0),l===void 0&&(l=-Wt);for(var c=[],u=this._first;u;)u._start>=l&&(u instanceof st?a&&c.push(u):(o&&c.push(u),i&&c.push.apply(c,u.getChildren(!0,a,o)))),u=u._next;return c},n.getById=function(i){for(var a=this.getChildren(1,1,1),o=a.length;o--;)if(a[o].vars.id===i)return a[o]},n.remove=function(i){return bt(i)?this.removeLabel(i):it(i)?this.killTweensOf(i):(i.parent===this&&ks(this,i),i===this._recent&&(this._recent=this._last),sr(this))},n.totalTime=function(i,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ct(Ot.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),e.prototype.totalTime.call(this,i,a),this._forcing=0,this):this._tTime},n.addLabel=function(i,a){return this.labels[i]=Gt(this,a),this},n.removeLabel=function(i){return delete this.labels[i],this},n.addPause=function(i,a,o){var l=st.delayedCall(0,a||Wi,o);return l.data="isPause",this._hasPause=1,pn(this,l,Gt(this,i))},n.removePause=function(i){var a=this._first;for(i=Gt(this,i);a;)a._start===i&&a.data==="isPause"&&Bn(a),a=a._next},n.killTweensOf=function(i,a,o){for(var l=this.getTweensOf(i,o),c=l.length;c--;)On!==l[c]&&l[c].kill(i,a);return this},n.getTweensOf=function(i,a){for(var o=[],l=Vt(i),c=this._first,u=Mn(a),d;c;)c instanceof st?W2(c._targets,l)&&(u?(!On||c._initted&&c._ts)&&c.globalTime(0)<=a&&c.globalTime(c.totalDuration())>a:!a||c.isActive())&&o.push(c):(d=c.getTweensOf(l,a)).length&&o.push.apply(o,d),c=c._next;return o},n.tweenTo=function(i,a){a=a||{};var o=this,l=Gt(o,i),c=a,u=c.startAt,d=c.onStart,f=c.onStartParams,p=c.immediateRender,m,y=st.to(o,Ht({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:a.duration||Math.abs((l-(u&&"time"in u?u.time:o._time))/o.timeScale())||Ye,onStart:function(){if(o.pause(),!m){var g=a.duration||Math.abs((l-(u&&"time"in u?u.time:o._time))/o.timeScale());y._dur!==g&&$r(y,g,0,1).render(y._time,!0,!0),m=1}d&&d.apply(y,f||[])}},a));return p?y.render(0):y},n.tweenFromTo=function(i,a,o){return this.tweenTo(a,Ht({startAt:{time:Gt(this,i)}},o))},n.recent=function(){return this._recent},n.nextLabel=function(i){return i===void 0&&(i=this._time),r0(this,Gt(this,i))},n.previousLabel=function(i){return i===void 0&&(i=this._time),r0(this,Gt(this,i),1)},n.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Ye)},n.shiftChildren=function(i,a,o){o===void 0&&(o=0);for(var l=this._first,c=this.labels,u;l;)l._start>=o&&(l._start+=i,l._end+=i),l=l._next;if(a)for(u in c)c[u]>=o&&(c[u]+=i);return sr(this)},n.invalidate=function(i){var a=this._first;for(this._lock=0;a;)a.invalidate(i),a=a._next;return e.prototype.invalidate.call(this,i)},n.clear=function(i){i===void 0&&(i=!0);for(var a=this._first,o;a;)o=a._next,this.remove(a),a=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),sr(this)},n.totalDuration=function(i){var a=0,o=this,l=o._last,c=Wt,u,d,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(f=o.parent;l;)u=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>c&&o._sort&&l._ts&&!o._lock?(o._lock=1,pn(o,l,d-l._delay,1)._lock=0):c=d,d<0&&l._ts&&(a-=d,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=d/o._ts,o._time-=d,o._tTime-=d),o.shiftChildren(-d,!1,-1/0),c=0),l._end>a&&l._ts&&(a=l._end),l=u;$r(o,o===nt&&o._time>a?o._time:a,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(i){if(nt._ts&&(zg(nt,Cs(i,nt)),$g=Ot.frame),Ot.frame>=Bg){Bg+=Ft.autoSleep||120;var a=nt._first;if((!a||!a._ts)&&Ft.autoSleep&&Ot._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||Ot.sleep()}}},t})(Qi);Ht(_t.prototype,{_lock:0,_hasPause:0,_forcing:0});var hw=function(t,n,r,i,a,o,l){var c=new It(this._pt,t,n,0,1,v0,null,a),u=0,d=0,f,p,m,y,h,g,k,S;for(c.b=r,c.e=i,r+="",i+="",(k=~i.indexOf("random("))&&(i=Zi(i)),o&&(S=[r,i],o(S,t,n),r=S[0],i=S[1]),p=r.match(Zl)||[];f=Zl.exec(i);)y=f[0],h=i.substring(u,f.index),m?m=(m+1)%5:h.substr(-5)==="rgba("&&(m=1),y!==p[d++]&&(g=parseFloat(p[d-1])||0,c._pt={_next:c._pt,p:h||d===1?h:",",s:g,c:y.charAt(1)==="="?Ar(g,y)-g:parseFloat(y)-g,m:m&&m<4?Math.round:0},u=Zl.lastIndex);return c.c=u<i.length?i.substring(u,i.length):"",c.fp=l,(Lg.test(i)||k)&&(c.e=0),this._pt=c,c},fc=function(t,n,r,i,a,o,l,c,u,d){it(i)&&(i=i(a||0,t,o));var f=t[n],p=r!=="get"?r:it(f)?u?t[n.indexOf("set")||!it(t["get"+n.substr(3)])?n:"get"+n.substr(3)](u):t[n]():f,m=it(f)?u?bw:y0:pc,y;if(bt(i)&&(~i.indexOf("random(")&&(i=Zi(i)),i.charAt(1)==="="&&(y=Ar(p,i)+(kt(p)||0),(y||y===0)&&(i=y))),!d||p!==i||hc)return!isNaN(p*i)&&i!==""?(y=new It(this._pt,t,n,+p||0,i-(p||0),typeof f=="boolean"?xw:b0,0,m),u&&(y.fp=u),l&&y.modifier(l,this,t),this._pt=y):(!f&&!(n in t)&&Jl(n,i),hw.call(this,t,n,p,i,m,c||Ft.stringFilter,u))},mw=function(t,n,r,i,a){if(it(t)&&(t=Ki(t,a,n,r,i)),!hn(t)||t.style&&t.nodeType||St(t)||Dg(t))return bt(t)?Ki(t,a,n,r,i):t;var o={},l;for(l in t)o[l]=Ki(t[l],a,n,r,i);return o},m0=function(t,n,r,i,a,o){var l,c,u,d;if(Bt[t]&&(l=new Bt[t]).init(a,l.rawVars?n[t]:mw(n[t],i,a,o,r),r,i,o)!==!1&&(r._pt=c=new It(r._pt,a,t,0,1,l.render,l,0,l.priority),r!==Br))for(u=r._ptLookup[r._targets.indexOf(a)],d=l._props.length;d--;)u[l._props[d]]=c;return l},On,hc,mc=function e(t,n,r){var i=t.vars,a=i.ease,o=i.startAt,l=i.immediateRender,c=i.lazy,u=i.onUpdate,d=i.runBackwards,f=i.yoyoEase,p=i.keyframes,m=i.autoRevert,y=t._dur,h=t._startAt,g=t._targets,k=t.parent,S=k&&k.data==="nested"?k.vars.targets:g,j=t._overwrite==="auto"&&!Ul,M=t.timeline,b,_,N,w,v,C,D,I,B,E,A,L,z;if(M&&(!p||!a)&&(a="none"),t._ease=or(a,Lr.ease),t._yEase=f?u0(or(f===!0?a:f,Lr.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!M&&!!i.runBackwards,!M||p&&!i.stagger){if(I=g[0]?ar(g[0]).harness:0,L=I&&i[I.prop],b=Ss(i,Ql),h&&(h._zTime<0&&h.progress(1),n<0&&d&&l&&!m?h.render(-1,!0):h.revert(d&&y?xs:R2),h._lazy=0),o){if(Bn(t._startAt=st.set(g,Ht({data:"isStart",overwrite:!1,parent:k,immediateRender:!0,lazy:!h&&Tt(c),startAt:null,delay:0,onUpdate:u&&function(){return zt(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(xt||!l&&!m)&&t._startAt.revert(xs),l&&y&&n<=0&&r<=0){n&&(t._zTime=n);return}}else if(d&&y&&!h){if(n&&(l=!1),N=Ht({overwrite:!1,data:"isFromStart",lazy:l&&!h&&Tt(c),immediateRender:l,stagger:0,parent:k},b),L&&(N[I.prop]=L),Bn(t._startAt=st.set(g,N)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(xt?t._startAt.revert(xs):t._startAt.render(-1,!0)),t._zTime=n,!l)e(t._startAt,Ye,Ye);else if(!n)return}for(t._pt=t._ptCache=0,c=y&&Tt(c)||c&&!y,_=0;_<g.length;_++){if(v=g[_],D=v._gsap||nc(g)[_]._gsap,t._ptLookup[_]=E={},Kl[D.id]&&$n.length&&ws(),A=S===g?_:S.indexOf(v),I&&(B=new I).init(v,L||b,t,A,S)!==!1&&(t._pt=w=new It(t._pt,v,B.name,0,1,B.render,B,0,B.priority),B._props.forEach(function(ae){E[ae]=w}),B.priority&&(C=1)),!I||L)for(N in b)Bt[N]&&(B=m0(N,b,t,A,v,S))?B.priority&&(C=1):E[N]=w=fc.call(t,v,N,"get",b[N],A,S,0,i.stringFilter);t._op&&t._op[_]&&t.kill(v,t._op[_]),j&&t._pt&&(On=t,nt.killTweensOf(v,E,t.globalTime(n)),z=!t.parent,On=0),t._pt&&c&&(Kl[D.id]=1)}C&&x0(t),t._onInit&&t._onInit(t)}t._onUpdate=u,t._initted=(!t._op||t._pt)&&!z,p&&n<=0&&M.render(Wt,!0,!0)},pw=function(t,n,r,i,a,o,l,c){var u=(t._pt&&t._ptCache||(t._ptCache={}))[n],d,f,p,m;if(!u)for(u=t._ptCache[n]=[],p=t._ptLookup,m=t._targets.length;m--;){if(d=p[m][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return hc=1,t.vars[n]="+=0",mc(t,l),hc=0,c?Ui(n+" not eligible for reset"):1;u.push(d)}for(m=u.length;m--;)f=u[m],d=f._pt||f,d.s=(i||i===0)&&!a?i:d.s+(i||0)+o*d.c,d.c=r-d.s,f.e&&(f.e=at(r)+kt(f.e)),f.b&&(f.b=d.s+kt(f.b))},gw=function(t,n){var r=t[0]?ar(t[0]).harness:0,i=r&&r.aliases,a,o,l,c;if(!i)return n;a=Er({},n);for(o in i)if(o in a)for(c=i[o].split(","),l=c.length;l--;)a[c[l]]=a[o];return a},yw=function(t,n,r,i){var a=n.ease||i||"power1.inOut",o,l;if(St(n))l=r[t]||(r[t]=[]),n.forEach(function(c,u){return l.push({t:u/(n.length-1)*100,v:c,e:a})});else for(o in n)l=r[o]||(r[o]=[]),o==="ease"||l.push({t:parseFloat(t),v:n[o],e:a})},Ki=function(t,n,r,i,a){return it(t)?t.call(n,r,i,a):bt(t)&&~t.indexOf("random(")?Zi(t):t},p0=tc+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",g0={};Dt(p0+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return g0[e]=1});var st=(function(e){jg(t,e);function t(r,i,a,o){var l;typeof i=="number"&&(a.duration=i,i=a,a=null),l=e.call(this,o?i:Gi(i))||this;var c=l.vars,u=c.duration,d=c.delay,f=c.immediateRender,p=c.stagger,m=c.overwrite,y=c.keyframes,h=c.defaults,g=c.scrollTrigger,k=c.yoyoEase,S=i.parent||nt,j=(St(r)||Dg(r)?Mn(r[0]):"length"in i)?[r]:Vt(r),M,b,_,N,w,v,C,D;if(l._targets=j.length?nc(j):Ui("GSAP target "+r+" not found. https://gsap.com",!Ft.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=m,y||p||bs(u)||bs(d)){if(i=l.vars,M=l.timeline=new _t({data:"nested",defaults:h||{},targets:S&&S.data==="nested"?S.vars.targets:j}),M.kill(),M.parent=M._dp=Nn(l),M._start=0,p||bs(u)||bs(d)){if(N=j.length,C=p&&Qg(p),hn(p))for(w in p)~p0.indexOf(w)&&(D||(D={}),D[w]=p[w]);for(b=0;b<N;b++)_=Ss(i,g0),_.stagger=0,k&&(_.yoyoEase=k),D&&Er(_,D),v=j[b],_.duration=+Ki(u,Nn(l),b,v,j),_.delay=(+Ki(d,Nn(l),b,v,j)||0)-l._delay,!p&&N===1&&_.delay&&(l._delay=d=_.delay,l._start+=d,_.delay=0),M.to(v,_,C?C(b,v,j):0),M._ease=He.none;M.duration()?u=d=0:l.timeline=0}else if(y){Gi(Ht(M.vars.defaults,{ease:"none"})),M._ease=or(y.ease||i.ease||"none");var I=0,B,E,A;if(St(y))y.forEach(function(L){return M.to(j,L,">")}),M.duration();else{_={};for(w in y)w==="ease"||w==="easeEach"||yw(w,y[w],_,y.easeEach);for(w in _)for(B=_[w].sort(function(L,z){return L.t-z.t}),I=0,b=0;b<B.length;b++)E=B[b],A={ease:E.e,duration:(E.t-(b?B[b-1].t:0))/100*u},A[w]=E.v,M.to(j,A,I),I+=A.duration;M.duration()<u&&M.to({},{duration:u-M.duration()})}}u||l.duration(u=M.duration())}else l.timeline=0;return m===!0&&!Ul&&(On=Nn(l),nt.killTweensOf(j),On=0),pn(S,Nn(l),a),i.reversed&&l.reverse(),i.paused&&l.paused(!0),(f||!u&&!y&&l._start===ct(S._time)&&Tt(f)&&Z2(Nn(l))&&S.data!=="nested")&&(l._tTime=-Ye,l.render(Math.max(0,-d)||0)),g&&Yg(Nn(l),g),l}var n=t.prototype;return n.render=function(i,a,o){var l=this._time,c=this._tDur,u=this._dur,d=i<0,f=i>c-Ye&&!d?c:i<Ye?0:i,p,m,y,h,g,k,S,j,M;if(!u)X2(this,i,a,o);else if(f!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(p=f,j=this.timeline,this._repeat){if(h=u+this._rDelay,this._repeat<-1&&d)return this.totalTime(h*100+i,a,o);if(p=ct(f%h),f===c?(y=this._repeat,p=u):(g=ct(f/h),y=~~g,y&&y===g?(p=u,y--):p>u&&(p=u)),k=this._yoyo&&y&1,k&&(M=this._yEase,p=u-p),g=Fr(this._tTime,h),p===l&&!o&&this._initted&&y===g)return this._tTime=f,this;y!==g&&(j&&this._yEase&&d0(j,k),this.vars.repeatRefresh&&!k&&!this._lock&&p!==h&&this._initted&&(this._lock=o=1,this.render(ct(h*y),!0).invalidate()._lock=0))}if(!this._initted){if(Zg(this,d?i:p,o,a,f))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&y!==g))return this;if(u!==this._dur)return this.render(i,a,o)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(M||this._ease)(p/u),this._from&&(this.ratio=S=1-S),!l&&f&&!a&&!g&&(zt(this,"onStart"),this._tTime!==f))return this;for(m=this._pt;m;)m.r(S,m.d),m=m._next;j&&j.render(i<0?i:j._dur*j._ease(p/this._dur),a,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!a&&(d&&ic(this,i,a,o),zt(this,"onUpdate")),this._repeat&&y!==g&&this.vars.onRepeat&&!a&&this.parent&&zt(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(d&&!this._onUpdate&&ic(this,i,!0,!0),(i||!u)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Bn(this,1),!a&&!(d&&!l)&&(f||l||k)&&(zt(this,f===c?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),e.prototype.invalidate.call(this,i)},n.resetTo=function(i,a,o,l,c){Ji||Ot.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||mc(this,u),d=this._ease(u/this._dur),pw(this,i,a,o,l,d,u,c)?this.resetTo(i,a,o,l,1):(Ms(this,0),this.parent||Wg(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(i,a){if(a===void 0&&(a="all"),!i&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?qi(this):this.scrollTrigger&&this.scrollTrigger.kill(!!xt),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,a,On&&On.vars.overwrite!==!0)._first||qi(this),this.parent&&o!==this.timeline.totalDuration()&&$r(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,c=i?Vt(i):l,u=this._ptLookup,d=this._pt,f,p,m,y,h,g,k;if((!a||a==="all")&&V2(l,c))return a==="all"&&(this._pt=0),qi(this);for(f=this._op=this._op||[],a!=="all"&&(bt(a)&&(h={},Dt(a,function(S){return h[S]=1}),a=h),a=gw(l,a)),k=l.length;k--;)if(~c.indexOf(l[k])){p=u[k],a==="all"?(f[k]=a,y=p,m={}):(m=f[k]=f[k]||{},y=a);for(h in y)g=p&&p[h],g&&((!("kill"in g.d)||g.d.kill(h)===!0)&&ks(this,g,"_pt"),delete p[h]),m!=="all"&&(m[h]=1)}return this._initted&&!this._pt&&d&&qi(this),this},t.to=function(i,a){return new t(i,a,arguments[2])},t.from=function(i,a){return Vi(1,arguments)},t.delayedCall=function(i,a,o,l){return new t(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:a,onReverseComplete:a,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},t.fromTo=function(i,a,o){return Vi(2,arguments)},t.set=function(i,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new t(i,a)},t.killTweensOf=function(i,a,o){return nt.killTweensOf(i,a,o)},t})(Qi);Ht(st.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Dt("staggerTo,staggerFrom,staggerFromTo",function(e){st[e]=function(){var t=new _t,n=sc.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var pc=function(t,n,r){return t[n]=r},y0=function(t,n,r){return t[n](r)},bw=function(t,n,r,i){return t[n](i.fp,r)},vw=function(t,n,r){return t.setAttribute(n,r)},gc=function(t,n){return it(t[n])?y0:Gl(t[n])&&t.setAttribute?vw:pc},b0=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},xw=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},v0=function(t,n){var r=n._pt,i="";if(!t&&n.b)i=n.b;else if(t===1&&n.e)i=n.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*t):Math.round((r.s+r.c*t)*1e4)/1e4)+i,r=r._next;i+=n.c}n.set(n.t,n.p,i,n)},yc=function(t,n){for(var r=n._pt;r;)r.r(t,r.d),r=r._next},_w=function(t,n,r,i){for(var a=this._pt,o;a;)o=a._next,a.p===i&&a.modifier(t,n,r),a=o},ww=function(t){for(var n=this._pt,r,i;n;)i=n._next,n.p===t&&!n.op||n.op===t?ks(this,n,"_pt"):n.dep||(r=1),n=i;return!r},Sw=function(t,n,r,i){i.mSet(t,n,i.m.call(i.tween,r,i.mt),i)},x0=function(t){for(var n=t._pt,r,i,a,o;n;){for(r=n._next,i=a;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:o)?n._prev._next=n:a=n,(n._next=i)?i._prev=n:o=n,n=r}t._pt=a},It=(function(){function e(n,r,i,a,o,l,c,u,d){this.t=r,this.s=a,this.c=o,this.p=i,this.r=l||b0,this.d=c||this,this.set=u||pc,this.pr=d||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(r,i,a){this.mSet=this.mSet||this.set,this.set=Sw,this.m=r,this.mt=a,this.tween=i},e})();Dt(tc+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Ql[e]=1}),$t.TweenMax=$t.TweenLite=st,$t.TimelineLite=$t.TimelineMax=_t,nt=new _t({sortChildren:!1,defaults:Lr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Ft.stringFilter=c0;var cr=[],js={},kw=[],_0=0,Cw=0,bc=function(t){return(js[t]||kw).map(function(n){return n()})},vc=function(){var t=Date.now(),n=[];t-_0>2&&(bc("matchMediaInit"),cr.forEach(function(r){var i=r.queries,a=r.conditions,o,l,c,u;for(l in i)o=mn.matchMedia(i[l]).matches,o&&(c=1),o!==a[l]&&(a[l]=o,u=1);u&&(r.revert(),c&&n.push(r))}),bc("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),_0=t,bc("matchMedia"))},w0=(function(){function e(n,r){this.selector=r&&oc(r),this.data=[],this._r=[],this.isReverted=!1,this.id=Cw++,n&&this.add(n)}var t=e.prototype;return t.add=function(r,i,a){it(r)&&(a=i,i=r,r=it);var o=this,l=function(){var u=Qe,d=o.selector,f;return u&&u!==o&&u.data.push(o),a&&(o.selector=oc(a)),Qe=o,f=i.apply(o,arguments),it(f)&&o._r.push(f),Qe=u,o.selector=d,o.isReverted=!1,f};return o.last=l,r===it?l(o,function(c){return o.add(null,c)}):r?o[r]=l:l},t.ignore=function(r){var i=Qe;Qe=null,r(this),Qe=i},t.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof e?r.push.apply(r,i.getTweens()):i instanceof st&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(r,i){var a=this;if(r?(function(){for(var l=a.getTweens(),c=a.data.length,u;c--;)u=a.data[c],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,f){return f.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),c=a.data.length;c--;)u=a.data[c],u instanceof _t?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof st)&&u.revert&&u.revert(r);a._r.forEach(function(d){return d(r,a)}),a.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),i)for(var o=cr.length;o--;)cr[o].id===this.id&&cr.splice(o,1)},t.revert=function(r){this.kill(r||{})},e})(),Nw=(function(){function e(n){this.contexts=[],this.scope=n,Qe&&Qe.data.push(this)}var t=e.prototype;return t.add=function(r,i,a){hn(r)||(r={matches:r});var o=new w0(0,a||this.scope),l=o.conditions={},c,u,d;Qe&&!o.selector&&(o.selector=Qe.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(u in r)u==="all"?d=1:(c=mn.matchMedia(r[u]),c&&(cr.indexOf(o)<0&&cr.push(o),(l[u]=c.matches)&&(d=1),c.addListener?c.addListener(vc):c.addEventListener("change",vc)));return d&&i(o,function(f){return o.add(null,f)}),this},t.revert=function(r){this.kill(r||{})},t.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},e})(),Ts={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(i){return a0(i)})},timeline:function(t){return new _t(t)},getTweensOf:function(t,n){return nt.getTweensOf(t,n)},getProperty:function(t,n,r,i){bt(t)&&(t=Vt(t)[0]);var a=ar(t||{}).get,o=r?Rg:Og;return r==="native"&&(r=""),t&&(n?o((Bt[n]&&Bt[n].get||a)(t,n,r,i)):function(l,c,u){return o((Bt[l]&&Bt[l].get||a)(t,l,c,u))})},quickSetter:function(t,n,r){if(t=Vt(t),t.length>1){var i=t.map(function(d){return Lt.quickSetter(d,n,r)}),a=i.length;return function(d){for(var f=a;f--;)i[f](d)}}t=t[0]||{};var o=Bt[n],l=ar(t),c=l.harness&&(l.harness.aliases||{})[n]||n,u=o?function(d){var f=new o;Br._pt=0,f.init(t,r?d+r:d,Br,0,[t]),f.render(1,f),Br._pt&&yc(1,Br)}:l.set(t,c);return o?u:function(d){return u(t,c,r?d+r:d,l,1)}},quickTo:function(t,n,r){var i,a=Lt.to(t,Ht((i={},i[n]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),o=function(c,u,d){return a.resetTo(n,c,u,d)};return o.tween=a,o},isTweening:function(t){return nt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=or(t.ease,Lr.ease)),Ug(Lr,t||{})},config:function(t){return Ug(Ft,t||{})},registerEffect:function(t){var n=t.name,r=t.effect,i=t.plugins,a=t.defaults,o=t.extendTimeline;(i||"").split(",").forEach(function(l){return l&&!Bt[l]&&!$t[l]&&Ui(n+" effect requires "+l+" plugin.")}),ec[n]=function(l,c,u){return r(Vt(l),Ht(c||{},a),u)},o&&(_t.prototype[n]=function(l,c,u){return this.add(ec[n](l,hn(c)?c:(u=c)&&{},this),u)})},registerEase:function(t,n){He[t]=or(n)},parseEase:function(t,n){return arguments.length?or(t,n):He},getById:function(t){return nt.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var r=new _t(t),i,a;for(r.smoothChildTiming=Tt(t.smoothChildTiming),nt.remove(r),r._dp=0,r._time=r._tTime=nt._time,i=nt._first;i;)a=i._next,(n||!(!i._dur&&i instanceof st&&i.vars.onComplete===i._targets[0]))&&pn(r,i,i._start-i._delay),i=a;return pn(nt,r,0),r},context:function(t,n){return t?new w0(t,n):Qe},matchMedia:function(t){return new Nw(t)},matchMediaRefresh:function(){return cr.forEach(function(t){var n=t.conditions,r,i;for(i in n)n[i]&&(n[i]=!1,r=1);r&&t.revert()})||vc()},addEventListener:function(t,n){var r=js[t]||(js[t]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(t,n){var r=js[t],i=r&&r.indexOf(n);i>=0&&r.splice(i,1)},utils:{wrap:iw,wrapYoyo:aw,distribute:Qg,random:e0,snap:Kg,normalize:rw,getUnit:kt,clamp:K2,splitColor:s0,toArray:Vt,selector:oc,mapRange:n0,pipe:tw,unitize:nw,interpolate:sw,shuffle:Jg},install:Eg,effects:ec,ticker:Ot,updateRoot:_t.updateRoot,plugins:Bt,globalTimeline:nt,core:{PropTween:It,globals:Fg,Tween:st,Timeline:_t,Animation:Qi,getCache:ar,_removeLinkedListItem:ks,reverting:function(){return xt},context:function(t){return t&&Qe&&(Qe.data.push(t),t._ctx=Qe),Qe},suppressOverwrites:function(t){return Ul=t}}};Dt("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return Ts[e]=st[e]}),Ot.add(_t.updateRoot),Br=Ts.to({},{duration:0});var Mw=function(t,n){for(var r=t._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},jw=function(t,n){var r=t._targets,i,a,o;for(i in n)for(a=r.length;a--;)o=t._ptLookup[a][i],o&&(o=o.d)&&(o._pt&&(o=Mw(o,i)),o&&o.modifier&&o.modifier(n[i],t,r[a],i))},xc=function(t,n){return{name:t,headless:1,rawVars:1,init:function(i,a,o){o._onInit=function(l){var c,u;if(bt(a)&&(c={},Dt(a,function(d){return c[d]=1}),a=c),n){c={};for(u in a)c[u]=n(a[u]);a=c}jw(l,a)}}}},Lt=Ts.registerPlugin({name:"attr",init:function(t,n,r,i,a){var o,l,c;this.tween=r;for(o in n)c=t.getAttribute(o)||"",l=this.add(t,"setAttribute",(c||0)+"",n[o],i,a,0,0,o),l.op=o,l.b=c,this._props.push(o)},render:function(t,n){for(var r=n._pt;r;)xt?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",headless:1,init:function(t,n){for(var r=n.length;r--;)this.add(t,r,t[r]||0,n[r],0,0,0,0,0,1)}},xc("roundProps",lc),xc("modifiers"),xc("snap",Kg))||Ts;st.version=_t.version=Lt.version="3.13.0",Ag=1,Vl()&&Hr();var Tw=He.Power0,Dw=He.Power1,Iw=He.Power2,Lw=He.Power3,Pw=He.Power4,Aw=He.Linear,Ew=He.Quad,Fw=He.Cubic,$w=He.Quart,Bw=He.Quint,Hw=He.Strong,zw=He.Elastic,Ow=He.Back,Rw=He.SteppedEase,Uw=He.Bounce,Ww=He.Sine,Gw=He.Expo,Vw=He.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var S0,Rn,zr,_c,ur,k0,wc,Yw=function(){return typeof window<"u"},jn={},dr=180/Math.PI,Or=Math.PI/180,Rr=Math.atan2,C0=1e8,Sc=/([A-Z])/g,Zw=/(left|right|width|margin|padding|x)/i,qw=/[\s,\(]\S/,gn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},kc=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},Xw=function(t,n){return n.set(n.t,n.p,t===1?n.e:Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},Jw=function(t,n){return n.set(n.t,n.p,t?Math.round((n.s+n.c*t)*1e4)/1e4+n.u:n.b,n)},Qw=function(t,n){var r=n.s+n.c*t;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},N0=function(t,n){return n.set(n.t,n.p,t?n.e:n.b,n)},M0=function(t,n){return n.set(n.t,n.p,t!==1?n.b:n.e,n)},Kw=function(t,n,r){return t.style[n]=r},eS=function(t,n,r){return t.style.setProperty(n,r)},tS=function(t,n,r){return t._gsap[n]=r},nS=function(t,n,r){return t._gsap.scaleX=t._gsap.scaleY=r},rS=function(t,n,r,i,a){var o=t._gsap;o.scaleX=o.scaleY=r,o.renderTransform(a,o)},iS=function(t,n,r,i,a){var o=t._gsap;o[n]=r,o.renderTransform(a,o)},rt="transform",Pt=rt+"Origin",aS=function e(t,n){var r=this,i=this.target,a=i.style,o=i._gsap;if(t in jn&&a){if(this.tfm=this.tfm||{},t!=="transform")t=gn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return r.tfm[l]=Tn(i,l)}):this.tfm[t]=o.x?o[t]:Tn(i,t),t===Pt&&(this.tfm.zOrigin=o.zOrigin);else return gn.transform.split(",").forEach(function(l){return e.call(r,l,n)});if(this.props.indexOf(rt)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Pt,n,"")),t=rt}(a||n)&&this.props.push(t,n,a[t])},j0=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},sS=function(){var t=this.props,n=this.target,r=n.style,i=n._gsap,a,o;for(a=0;a<t.length;a+=3)t[a+1]?t[a+1]===2?n[t[a]](t[a+2]):n[t[a]]=t[a+2]:t[a+2]?r[t[a]]=t[a+2]:r.removeProperty(t[a].substr(0,2)==="--"?t[a]:t[a].replace(Sc,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),a=wc(),(!a||!a.isStart)&&!r[rt]&&(j0(r),i.zOrigin&&r[Pt]&&(r[Pt]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},T0=function(t,n){var r={target:t,props:[],revert:sS,save:aS};return t._gsap||Lt.core.getCache(t),n&&t.style&&t.nodeType&&n.split(",").forEach(function(i){return r.save(i)}),r},D0,Cc=function(t,n){var r=Rn.createElementNS?Rn.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Rn.createElement(t);return r&&r.style?r:Rn.createElement(t)},Yt=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(Sc,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,Ur(n)||n,1)||""},I0="O,Moz,ms,Ms,Webkit".split(","),Ur=function(t,n,r){var i=n||ur,a=i.style,o=5;if(t in a&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(I0[o]+t in a););return o<0?null:(o===3?"ms":o>=0?I0[o]:"")+t},Nc=function(){Yw()&&window.document&&(S0=window,Rn=S0.document,zr=Rn.documentElement,ur=Cc("div")||{style:{}},Cc("div"),rt=Ur(rt),Pt=rt+"Origin",ur.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",D0=!!Ur("perspective"),wc=Lt.core.reverting,_c=1)},L0=function(t){var n=t.ownerSVGElement,r=Cc("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=t.cloneNode(!0),a;i.style.display="block",r.appendChild(i),zr.appendChild(r);try{a=i.getBBox()}catch{}return r.removeChild(i),zr.removeChild(r),a},P0=function(t,n){for(var r=n.length;r--;)if(t.hasAttribute(n[r]))return t.getAttribute(n[r])},A0=function(t){var n,r;try{n=t.getBBox()}catch{n=L0(t),r=1}return n&&(n.width||n.height)||r||(n=L0(t)),n&&!n.width&&!n.x&&!n.y?{x:+P0(t,["x","cx","x1"])||0,y:+P0(t,["y","cy","y1"])||0,width:0,height:0}:n},E0=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&A0(t))},fr=function(t,n){if(n){var r=t.style,i;n in jn&&n!==Pt&&(n=rt),r.removeProperty?(i=n.substr(0,2),(i==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(i==="--"?n:n.replace(Sc,"-$1").toLowerCase())):r.removeAttribute(n)}},Un=function(t,n,r,i,a,o){var l=new It(t._pt,n,r,0,1,o?M0:N0);return t._pt=l,l.b=i,l.e=a,t._props.push(r),l},F0={deg:1,rad:1,turn:1},oS={grid:1,flex:1},Wn=function e(t,n,r,i){var a=parseFloat(r)||0,o=(r+"").trim().substr((a+"").length)||"px",l=ur.style,c=Zw.test(n),u=t.tagName.toLowerCase()==="svg",d=(u?"client":"offset")+(c?"Width":"Height"),f=100,p=i==="px",m=i==="%",y,h,g,k;if(i===o||!a||F0[i]||F0[o])return a;if(o!=="px"&&!p&&(a=e(t,n,r,"px")),k=t.getCTM&&E0(t),(m||o==="%")&&(jn[n]||~n.indexOf("adius")))return y=k?t.getBBox()[c?"width":"height"]:t[d],at(m?a/y*f:a/100*y);if(l[c?"width":"height"]=f+(p?o:i),h=i!=="rem"&&~n.indexOf("adius")||i==="em"&&t.appendChild&&!u?t:t.parentNode,k&&(h=(t.ownerSVGElement||{}).parentNode),(!h||h===Rn||!h.appendChild)&&(h=Rn.body),g=h._gsap,g&&m&&g.width&&c&&g.time===Ot.time&&!g.uncache)return at(a/g.width*f);if(m&&(n==="height"||n==="width")){var S=t.style[n];t.style[n]=f+i,y=t[d],S?t.style[n]=S:fr(t,n)}else(m||o==="%")&&!oS[Yt(h,"display")]&&(l.position=Yt(t,"position")),h===t&&(l.position="static"),h.appendChild(ur),y=ur[d],h.removeChild(ur),l.position="absolute";return c&&m&&(g=ar(h),g.time=Ot.time,g.width=h[d]),at(p?y*a/f:y&&a?f/y*a:0)},Tn=function(t,n,r,i){var a;return _c||Nc(),n in gn&&n!=="transform"&&(n=gn[n],~n.indexOf(",")&&(n=n.split(",")[0])),jn[n]&&n!=="transform"?(a=ta(t,i),a=n!=="transformOrigin"?a[n]:a.svg?a.origin:Is(Yt(t,Pt))+" "+a.zOrigin+"px"):(a=t.style[n],(!a||a==="auto"||i||~(a+"").indexOf("calc("))&&(a=Ds[n]&&Ds[n](t,n,r)||Yt(t,n)||Hg(t,n)||(n==="opacity"?1:0))),r&&!~(a+"").trim().indexOf(" ")?Wn(t,n,a,r)+r:a},lS=function(t,n,r,i){if(!r||r==="none"){var a=Ur(n,t,1),o=a&&Yt(t,a,1);o&&o!==r?(n=a,r=o):n==="borderColor"&&(r=Yt(t,"borderTopColor"))}var l=new It(this._pt,t.style,n,0,1,v0),c=0,u=0,d,f,p,m,y,h,g,k,S,j,M,b;if(l.b=r,l.e=i,r+="",i+="",i.substring(0,6)==="var(--"&&(i=Yt(t,i.substring(4,i.indexOf(")")))),i==="auto"&&(h=t.style[n],t.style[n]=i,i=Yt(t,n)||i,h?t.style[n]=h:fr(t,n)),d=[r,i],c0(d),r=d[0],i=d[1],p=r.match(Pr)||[],b=i.match(Pr)||[],b.length){for(;f=Pr.exec(i);)g=f[0],S=i.substring(c,f.index),y?y=(y+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(y=1),g!==(h=p[u++]||"")&&(m=parseFloat(h)||0,M=h.substr((m+"").length),g.charAt(1)==="="&&(g=Ar(m,g)+M),k=parseFloat(g),j=g.substr((k+"").length),c=Pr.lastIndex-j.length,j||(j=j||Ft.units[n]||M,c===i.length&&(i+=j,l.e+=j)),M!==j&&(m=Wn(t,n,h,j)||0),l._pt={_next:l._pt,p:S||u===1?S:",",s:m,c:k-m,m:y&&y<4||n==="zIndex"?Math.round:0});l.c=c<i.length?i.substring(c,i.length):""}else l.r=n==="display"&&i==="none"?M0:N0;return Lg.test(i)&&(l.e=0),this._pt=l,l},$0={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},cS=function(t){var n=t.split(" "),r=n[0],i=n[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(t=r,r=i,i=t),n[0]=$0[r]||r,n[1]=$0[i]||i,n.join(" ")},uS=function(t,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,i=r.style,a=n.u,o=r._gsap,l,c,u;if(a==="all"||a===!0)i.cssText="",c=1;else for(a=a.split(","),u=a.length;--u>-1;)l=a[u],jn[l]&&(c=1,l=l==="transformOrigin"?Pt:rt),fr(r,l);c&&(fr(r,rt),o&&(o.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",ta(r,1),o.uncache=1,j0(i)))}},Ds={clearProps:function(t,n,r,i,a){if(a.data!=="isFromStart"){var o=t._pt=new It(t._pt,n,r,0,0,uS);return o.u=i,o.pr=-10,o.tween=a,t._props.push(r),1}}},ea=[1,0,0,1,0,0],B0={},H0=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},z0=function(t){var n=Yt(t,rt);return H0(n)?ea:n.substr(7).match(Ig).map(at)},Mc=function(t,n){var r=t._gsap||ar(t),i=t.style,a=z0(t),o,l,c,u;return r.svg&&t.getAttribute("transform")?(c=t.transform.baseVal.consolidate().matrix,a=[c.a,c.b,c.c,c.d,c.e,c.f],a.join(",")==="1,0,0,1,0,0"?ea:a):(a===ea&&!t.offsetParent&&t!==zr&&!r.svg&&(c=i.display,i.display="block",o=t.parentNode,(!o||!t.offsetParent&&!t.getBoundingClientRect().width)&&(u=1,l=t.nextElementSibling,zr.appendChild(t)),a=z0(t),c?i.display=c:fr(t,"display"),u&&(l?o.insertBefore(t,l):o?o.appendChild(t):zr.removeChild(t))),n&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},jc=function(t,n,r,i,a,o){var l=t._gsap,c=a||Mc(t,!0),u=l.xOrigin||0,d=l.yOrigin||0,f=l.xOffset||0,p=l.yOffset||0,m=c[0],y=c[1],h=c[2],g=c[3],k=c[4],S=c[5],j=n.split(" "),M=parseFloat(j[0])||0,b=parseFloat(j[1])||0,_,N,w,v;r?c!==ea&&(N=m*g-y*h)&&(w=M*(g/N)+b*(-h/N)+(h*S-g*k)/N,v=M*(-y/N)+b*(m/N)-(m*S-y*k)/N,M=w,b=v):(_=A0(t),M=_.x+(~j[0].indexOf("%")?M/100*_.width:M),b=_.y+(~(j[1]||j[0]).indexOf("%")?b/100*_.height:b)),i||i!==!1&&l.smooth?(k=M-u,S=b-d,l.xOffset=f+(k*m+S*h)-k,l.yOffset=p+(k*y+S*g)-S):l.xOffset=l.yOffset=0,l.xOrigin=M,l.yOrigin=b,l.smooth=!!i,l.origin=n,l.originIsAbsolute=!!r,t.style[Pt]="0px 0px",o&&(Un(o,l,"xOrigin",u,M),Un(o,l,"yOrigin",d,b),Un(o,l,"xOffset",f,l.xOffset),Un(o,l,"yOffset",p,l.yOffset)),t.setAttribute("data-svg-origin",M+" "+b)},ta=function(t,n){var r=t._gsap||new h0(t);if("x"in r&&!n&&!r.uncache)return r;var i=t.style,a=r.scaleX<0,o="px",l="deg",c=getComputedStyle(t),u=Yt(t,Pt)||"0",d,f,p,m,y,h,g,k,S,j,M,b,_,N,w,v,C,D,I,B,E,A,L,z,ae,q,O,ne,Y,K,X,J;return d=f=p=h=g=k=S=j=M=0,m=y=1,r.svg=!!(t.getCTM&&E0(t)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(i[rt]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[rt]!=="none"?c[rt]:"")),i.scale=i.rotate=i.translate="none"),N=Mc(t,r.svg),r.svg&&(r.uncache?(ae=t.getBBox(),u=r.xOrigin-ae.x+"px "+(r.yOrigin-ae.y)+"px",z=""):z=!n&&t.getAttribute("data-svg-origin"),jc(t,z||u,!!z||r.originIsAbsolute,r.smooth!==!1,N)),b=r.xOrigin||0,_=r.yOrigin||0,N!==ea&&(D=N[0],I=N[1],B=N[2],E=N[3],d=A=N[4],f=L=N[5],N.length===6?(m=Math.sqrt(D*D+I*I),y=Math.sqrt(E*E+B*B),h=D||I?Rr(I,D)*dr:0,S=B||E?Rr(B,E)*dr+h:0,S&&(y*=Math.abs(Math.cos(S*Or))),r.svg&&(d-=b-(b*D+_*B),f-=_-(b*I+_*E))):(J=N[6],K=N[7],O=N[8],ne=N[9],Y=N[10],X=N[11],d=N[12],f=N[13],p=N[14],w=Rr(J,Y),g=w*dr,w&&(v=Math.cos(-w),C=Math.sin(-w),z=A*v+O*C,ae=L*v+ne*C,q=J*v+Y*C,O=A*-C+O*v,ne=L*-C+ne*v,Y=J*-C+Y*v,X=K*-C+X*v,A=z,L=ae,J=q),w=Rr(-B,Y),k=w*dr,w&&(v=Math.cos(-w),C=Math.sin(-w),z=D*v-O*C,ae=I*v-ne*C,q=B*v-Y*C,X=E*C+X*v,D=z,I=ae,B=q),w=Rr(I,D),h=w*dr,w&&(v=Math.cos(w),C=Math.sin(w),z=D*v+I*C,ae=A*v+L*C,I=I*v-D*C,L=L*v-A*C,D=z,A=ae),g&&Math.abs(g)+Math.abs(h)>359.9&&(g=h=0,k=180-k),m=at(Math.sqrt(D*D+I*I+B*B)),y=at(Math.sqrt(L*L+J*J)),w=Rr(A,L),S=Math.abs(w)>2e-4?w*dr:0,M=X?1/(X<0?-X:X):0),r.svg&&(z=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!H0(Yt(t,rt)),z&&t.setAttribute("transform",z))),Math.abs(S)>90&&Math.abs(S)<270&&(a?(m*=-1,S+=h<=0?180:-180,h+=h<=0?180:-180):(y*=-1,S+=S<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-d)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+o,r.y=f-((r.yPercent=f&&(!n&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-f)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+o,r.z=p+o,r.scaleX=at(m),r.scaleY=at(y),r.rotation=at(h)+l,r.rotationX=at(g)+l,r.rotationY=at(k)+l,r.skewX=S+l,r.skewY=j+l,r.transformPerspective=M+o,(r.zOrigin=parseFloat(u.split(" ")[2])||!n&&r.zOrigin||0)&&(i[Pt]=Is(u)),r.xOffset=r.yOffset=0,r.force3D=Ft.force3D,r.renderTransform=r.svg?fS:D0?O0:dS,r.uncache=0,r},Is=function(t){return(t=t.split(" "))[0]+" "+t[1]},Tc=function(t,n,r){var i=kt(n);return at(parseFloat(n)+parseFloat(Wn(t,"x",r+"px",i)))+i},dS=function(t,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,O0(t,n)},hr="0deg",na="0px",mr=") ",O0=function(t,n){var r=n||this,i=r.xPercent,a=r.yPercent,o=r.x,l=r.y,c=r.z,u=r.rotation,d=r.rotationY,f=r.rotationX,p=r.skewX,m=r.skewY,y=r.scaleX,h=r.scaleY,g=r.transformPerspective,k=r.force3D,S=r.target,j=r.zOrigin,M="",b=k==="auto"&&t&&t!==1||k===!0;if(j&&(f!==hr||d!==hr)){var _=parseFloat(d)*Or,N=Math.sin(_),w=Math.cos(_),v;_=parseFloat(f)*Or,v=Math.cos(_),o=Tc(S,o,N*v*-j),l=Tc(S,l,-Math.sin(_)*-j),c=Tc(S,c,w*v*-j+j)}g!==na&&(M+="perspective("+g+mr),(i||a)&&(M+="translate("+i+"%, "+a+"%) "),(b||o!==na||l!==na||c!==na)&&(M+=c!==na||b?"translate3d("+o+", "+l+", "+c+") ":"translate("+o+", "+l+mr),u!==hr&&(M+="rotate("+u+mr),d!==hr&&(M+="rotateY("+d+mr),f!==hr&&(M+="rotateX("+f+mr),(p!==hr||m!==hr)&&(M+="skew("+p+", "+m+mr),(y!==1||h!==1)&&(M+="scale("+y+", "+h+mr),S.style[rt]=M||"translate(0, 0)"},fS=function(t,n){var r=n||this,i=r.xPercent,a=r.yPercent,o=r.x,l=r.y,c=r.rotation,u=r.skewX,d=r.skewY,f=r.scaleX,p=r.scaleY,m=r.target,y=r.xOrigin,h=r.yOrigin,g=r.xOffset,k=r.yOffset,S=r.forceCSS,j=parseFloat(o),M=parseFloat(l),b,_,N,w,v;c=parseFloat(c),u=parseFloat(u),d=parseFloat(d),d&&(d=parseFloat(d),u+=d,c+=d),c||u?(c*=Or,u*=Or,b=Math.cos(c)*f,_=Math.sin(c)*f,N=Math.sin(c-u)*-p,w=Math.cos(c-u)*p,u&&(d*=Or,v=Math.tan(u-d),v=Math.sqrt(1+v*v),N*=v,w*=v,d&&(v=Math.tan(d),v=Math.sqrt(1+v*v),b*=v,_*=v)),b=at(b),_=at(_),N=at(N),w=at(w)):(b=f,w=p,_=N=0),(j&&!~(o+"").indexOf("px")||M&&!~(l+"").indexOf("px"))&&(j=Wn(m,"x",o,"px"),M=Wn(m,"y",l,"px")),(y||h||g||k)&&(j=at(j+y-(y*b+h*N)+g),M=at(M+h-(y*_+h*w)+k)),(i||a)&&(v=m.getBBox(),j=at(j+i/100*v.width),M=at(M+a/100*v.height)),v="matrix("+b+","+_+","+N+","+w+","+j+","+M+")",m.setAttribute("transform",v),S&&(m.style[rt]=v)},hS=function(t,n,r,i,a){var o=360,l=bt(a),c=parseFloat(a)*(l&&~a.indexOf("rad")?dr:1),u=c-i,d=i+u+"deg",f,p;return l&&(f=a.split("_")[1],f==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),f==="cw"&&u<0?u=(u+o*C0)%o-~~(u/o)*o:f==="ccw"&&u>0&&(u=(u-o*C0)%o-~~(u/o)*o)),t._pt=p=new It(t._pt,n,r,i,u,Xw),p.e=d,p.u="deg",t._props.push(r),p},R0=function(t,n){for(var r in n)t[r]=n[r];return t},mS=function(t,n,r){var i=R0({},r._gsap),a="perspective,force3D,transformOrigin,svgOrigin",o=r.style,l,c,u,d,f,p,m,y;i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),o[rt]=n,l=ta(r,1),fr(r,rt),r.setAttribute("transform",u)):(u=getComputedStyle(r)[rt],o[rt]=n,l=ta(r,1),o[rt]=u);for(c in jn)u=i[c],d=l[c],u!==d&&a.indexOf(c)<0&&(m=kt(u),y=kt(d),f=m!==y?Wn(r,c,u,y):parseFloat(u),p=parseFloat(d),t._pt=new It(t._pt,l,c,f,p-f,kc),t._pt.u=y||0,t._props.push(c));R0(l,i)};Dt("padding,margin,Width,Radius",function(e,t){var n="Top",r="Right",i="Bottom",a="Left",o=(t<3?[n,r,i,a]:[n+a,n+r,i+r,i+a]).map(function(l){return t<2?e+l:"border"+l+e});Ds[t>1?"border"+e:e]=function(l,c,u,d,f){var p,m;if(arguments.length<4)return p=o.map(function(y){return Tn(l,y,u)}),m=p.join(" "),m.split(p[0]).length===5?p[0]:m;p=(d+"").split(" "),m={},o.forEach(function(y,h){return m[y]=p[h]=p[h]||p[(h-1)/2|0]}),l.init(c,m,f)}});var Dc={name:"css",register:Nc,targetTest:function(t){return t.style&&t.nodeType},init:function(t,n,r,i,a){var o=this._props,l=t.style,c=r.vars.startAt,u,d,f,p,m,y,h,g,k,S,j,M,b,_,N,w;_c||Nc(),this.styles=this.styles||T0(t),w=this.styles.props,this.tween=r;for(h in n)if(h!=="autoRound"&&(d=n[h],!(Bt[h]&&m0(h,n,r,i,t,a)))){if(m=typeof d,y=Ds[h],m==="function"&&(d=d.call(r,i,t,a),m=typeof d),m==="string"&&~d.indexOf("random(")&&(d=Zi(d)),y)y(this,t,h,d,r)&&(N=1);else if(h.substr(0,2)==="--")u=(getComputedStyle(t).getPropertyValue(h)+"").trim(),d+="",zn.lastIndex=0,zn.test(u)||(g=kt(u),k=kt(d)),k?g!==k&&(u=Wn(t,h,u,k)+k):g&&(d+=g),this.add(l,"setProperty",u,d,i,a,0,0,h),o.push(h),w.push(h,0,l[h]);else if(m!=="undefined"){if(c&&h in c?(u=typeof c[h]=="function"?c[h].call(r,i,t,a):c[h],bt(u)&&~u.indexOf("random(")&&(u=Zi(u)),kt(u+"")||u==="auto"||(u+=Ft.units[h]||kt(Tn(t,h))||""),(u+"").charAt(1)==="="&&(u=Tn(t,h))):u=Tn(t,h),p=parseFloat(u),S=m==="string"&&d.charAt(1)==="="&&d.substr(0,2),S&&(d=d.substr(2)),f=parseFloat(d),h in gn&&(h==="autoAlpha"&&(p===1&&Tn(t,"visibility")==="hidden"&&f&&(p=0),w.push("visibility",0,l.visibility),Un(this,l,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),h!=="scale"&&h!=="transform"&&(h=gn[h],~h.indexOf(",")&&(h=h.split(",")[0]))),j=h in jn,j){if(this.styles.save(h),m==="string"&&d.substring(0,6)==="var(--"&&(d=Yt(t,d.substring(4,d.indexOf(")"))),f=parseFloat(d)),M||(b=t._gsap,b.renderTransform&&!n.parseTransform||ta(t,n.parseTransform),_=n.smoothOrigin!==!1&&b.smooth,M=this._pt=new It(this._pt,l,rt,0,1,b.renderTransform,b,0,-1),M.dep=1),h==="scale")this._pt=new It(this._pt,b,"scaleY",b.scaleY,(S?Ar(b.scaleY,S+f):f)-b.scaleY||0,kc),this._pt.u=0,o.push("scaleY",h),h+="X";else if(h==="transformOrigin"){w.push(Pt,0,l[Pt]),d=cS(d),b.svg?jc(t,d,0,_,0,this):(k=parseFloat(d.split(" ")[2])||0,k!==b.zOrigin&&Un(this,b,"zOrigin",b.zOrigin,k),Un(this,l,h,Is(u),Is(d)));continue}else if(h==="svgOrigin"){jc(t,d,1,_,0,this);continue}else if(h in B0){hS(this,b,h,p,S?Ar(p,S+d):d);continue}else if(h==="smoothOrigin"){Un(this,b,"smooth",b.smooth,d);continue}else if(h==="force3D"){b[h]=d;continue}else if(h==="transform"){mS(this,d,t);continue}}else h in l||(h=Ur(h)||h);if(j||(f||f===0)&&(p||p===0)&&!qw.test(d)&&h in l)g=(u+"").substr((p+"").length),f||(f=0),k=kt(d)||(h in Ft.units?Ft.units[h]:g),g!==k&&(p=Wn(t,h,u,k)),this._pt=new It(this._pt,j?b:l,h,p,(S?Ar(p,S+f):f)-p,!j&&(k==="px"||h==="zIndex")&&n.autoRound!==!1?Qw:kc),this._pt.u=k||0,g!==k&&k!=="%"&&(this._pt.b=u,this._pt.r=Jw);else if(h in l)lS.call(this,t,h,u,S?S+d:d);else if(h in t)this.add(t,h,u||t[h],S?S+d:d,i,a);else if(h!=="parseTransform"){Jl(h,d);continue}j||(h in l?w.push(h,0,l[h]):typeof t[h]=="function"?w.push(h,2,t[h]()):w.push(h,1,u||t[h])),o.push(h)}}N&&x0(this)},render:function(t,n){if(n.tween._time||!wc())for(var r=n._pt;r;)r.r(t,r.d),r=r._next;else n.styles.revert()},get:Tn,aliases:gn,getSetter:function(t,n,r){var i=gn[n];return i&&i.indexOf(",")<0&&(n=i),n in jn&&n!==Pt&&(t._gsap.x||Tn(t,"x"))?r&&k0===r?n==="scale"?nS:tS:(k0=r||{})&&(n==="scale"?rS:iS):t.style&&!Gl(t.style[n])?Kw:~n.indexOf("-")?eS:gc(t,n)},core:{_removeProperty:fr,_getMatrix:Mc}};Lt.utils.checkPrefix=Ur,Lt.core.getStyleSaver=T0,(function(e,t,n,r){var i=Dt(e+","+t+","+n,function(a){jn[a]=1});Dt(t,function(a){Ft.units[a]="deg",B0[a]=1}),gn[i[13]]=e+","+t,Dt(r,function(a){var o=a.split(":");gn[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),Dt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){Ft.units[e]="px"}),Lt.registerPlugin(Dc);var Ic=Lt.registerPlugin(Dc)||Lt,pS=Ic.core.Tween;const gS=Object.freeze(Object.defineProperty({__proto__:null,Back:Ow,Bounce:Uw,CSSPlugin:Dc,Circ:Vw,Cubic:Fw,Elastic:zw,Expo:Gw,Linear:Aw,Power0:Tw,Power1:Dw,Power2:Iw,Power3:Lw,Power4:Pw,Quad:Ew,Quart:$w,Quint:Bw,Sine:Ww,SteppedEase:Rw,Strong:Hw,TimelineLite:_t,TimelineMax:_t,TweenLite:st,TweenMax:pS,default:Ic,gsap:Ic},Symbol.toStringTag,{value:"Module"}));x.AXIS_Y_ZERO_BREAK_DEFAULT_EXTRA_CLEARANCE_PX=Vd,x.AXIS_Y_ZERO_BREAK_DEFAULT_GAP_PX=ii,x.AXIS_Y_ZERO_BREAK_MIN_GAP_PX=ai,x.AXIS_ZIGZAG_DEFAULT_AMPLITUDE_PX=Yd,x.AXIS_ZIGZAG_DEFAULT_CYCLES=Zd,x.AXIS_ZIGZAG_DEFAULT_HEIGHT_PX=Xd,x.AXIS_ZIGZAG_DEFAULT_STEP_X_PX=qd,x.Account=Es,x.ActionLink=ey,x.AdaptiveDataGrid=wo,x.AnimationDurationFast=Vf,x.AnimationDurationNormal=Yf,x.AnimationDurationSlow=Zf,x.AnimationEasingBounce=Qf,x.AnimationEasingEaseIn=qf,x.AnimationEasingEaseInOut=Jf,x.AnimationEasingEaseOut=Xf,x.AppointmentCard=vo,x.AreaSeriesPrimitive=d_,x.AriaDataGrid=cd,x.AriaTabsDataGrid=Da,x.AriaTabsDataGridAdaptive=wo,x.Axis=Do,x.BackLink=sa,x.BandScalesProvider=h_,x.BarSeriesPrimitive=f_,x.BorderColorCard=el,x.BorderColorCardHover=tl,x.BorderColorDefault=Qo,x.BorderColorError=nl,x.BorderColorForm=Ko,x.BorderRadiusLarge=hh,x.BorderRadiusMedium=fh,x.BorderRadiusNone=uh,x.BorderRadiusSmall=dh,x.BorderWidthCardBottom=sh,x.BorderWidthDefault=rh,x.BorderWidthFormElement=ih,x.BorderWidthFormElementError=ah,x.BorderWidthPanel=oh,x.BorderWidthTableCell=ch,x.BorderWidthTableHeader=lh,x.BrandThemeProvider=Uy,x.Breadcrumb=Ju,x.Breakpoint=Yc,x.BreakpointDesktop=Yp,x.BreakpointLargeDesktop=Zp,x.BreakpointMobile=Gp,x.BreakpointTablet=Vp,x.Button=pt,x.ButtonBorderRadius=Rm,x.ButtonBorderWidth=Om,x.ButtonPrimaryBackgroundActive=Tm,x.ButtonPrimaryBackgroundDefault=Mm,x.ButtonPrimaryBackgroundDisabled=Dm,x.ButtonPrimaryBackgroundHover=jm,x.ButtonPrimaryBorderDefault=Pm,x.ButtonPrimaryBorderFocus=Am,x.ButtonPrimaryTextDefault=Im,x.ButtonPrimaryTextDisabled=Lm,x.ButtonSecondaryBackgroundActive=Bm,x.ButtonSecondaryBackgroundDefault=Em,x.ButtonSecondaryBackgroundHover=$m,x.ButtonSecondaryBackgroundSolid=Fm,x.ButtonSecondaryBorderDefault=zm,x.ButtonSecondaryTextDefault=Hm,x.ButtonShadowSize=Um,x.ButtonSize=$s,x.ButtonSpacingPaddingHorizontalDesktop=kl,x.ButtonSpacingPaddingHorizontalMobile=wl,x.ButtonSpacingPaddingVerticalDesktop=Sl,x.ButtonSpacingPaddingVerticalMobile=_l,x.ButtonTypographyWeight=Wm,x.ButtonVariant=Fs,x.Card=po,x.CardBackgroundDefault=Gm,x.CardBorderBottom=Zm,x.CardBorderDefault=Vm,x.CardBorderHover=Ym,x.CardBorderWidthBottom=Km,x.CardBorderWidthDefault=Qm,x.CardGroup=mv,x.CardGroupItem=pv,x.CardShadowDefault=ep,x.CardShadowHover=tp,x.CardSpacingHeadingMargin=Ml,x.CardSpacingPaddingDesktop=Nl,x.CardSpacingPaddingMobile=Cl,x.CardTextDescription=Xm,x.CardTextHeading=qm,x.CardTextLink=Jm,x.CareCard=gv,x.CharacterCount=uy,x.ChartEnhancer=p_,x.ChartNoScript=m_,x.ChartRoot=Wd,x.Checkbox=Oc,x.Checkboxes=Uc,x.ColorBorderDefault=kh,x.ColorBorderSecondary=Ch,x.ColorButtonLoginActive=Qh,x.ColorButtonLoginBackground=Xh,x.ColorButtonLoginHover=Jh,x.ColorButtonLoginShadow=Kh,x.ColorButtonPrimaryActive=Lh,x.ColorButtonPrimaryBackground=Th,x.ColorButtonPrimaryHover=Ih,x.ColorButtonPrimaryShadow=Ph,x.ColorButtonPrimaryText=Dh,x.ColorButtonReverseActive=Wh,x.ColorButtonReverseBackground=Oh,x.ColorButtonReverseHover=Uh,x.ColorButtonReverseShadow=Gh,x.ColorButtonReverseText=Rh,x.ColorButtonSecondaryActive=Hh,x.ColorButtonSecondaryBackground=Ah,x.ColorButtonSecondaryBackgroundSolid=Eh,x.ColorButtonSecondaryBorder=Fh,x.ColorButtonSecondaryHover=Bh,x.ColorButtonSecondaryShadow=zh,x.ColorButtonSecondaryText=$h,x.ColorButtonWarningActive=Zh,x.ColorButtonWarningBackground=Vh,x.ColorButtonWarningHover=Yh,x.ColorButtonWarningShadow=qh,x.ColorError=Nh,x.ColorFocusBackground=wh,x.ColorFocusText=Sh,x.ColorFormBackground=jh,x.ColorFormBorder=Mh,x.ColorGrey1=gl,x.ColorGrey2=yl,x.ColorGrey3=bl,x.ColorGrey4=vl,x.ColorGrey5=xl,x.ColorLinkActive=xh,x.ColorLinkDefault=bh,x.ColorLinkHover=vh,x.ColorLinkVisited=_h,x.ColorPrimaryBlack=al,x.ColorPrimaryBlue=rl,x.ColorPrimaryDarkPink=ll,x.ColorPrimaryGreen=sl,x.ColorPrimaryPurple=ol,x.ColorPrimaryRed=cl,x.ColorPrimaryWhite=il,x.ColorPrimaryYellow=ul,x.ColorSecondaryAquaGreen=ml,x.ColorSecondaryOrange=hl,x.ColorSecondaryPaleYellow=dl,x.ColorSecondaryPink=pl,x.ColorSecondaryWarmYellow=fl,x.ColorTextPrimary=mh,x.ColorTextPrint=yh,x.ColorTextReverse=gh,x.ColorTextSecondary=ph,x.Column=gr,x.ColumnAlign=qc,x.ComponentBlur=wm,x.ComponentBreadcrumbChevronMarginLeft=mm,x.ComponentBreadcrumbChevronMarginRight=pm,x.ComponentBreadcrumbPaddingTopDesktop=ym,x.ComponentBreadcrumbPaddingTopMobile=gm,x.ComponentButtonPaddingDesktopHorizontal=rm,x.ComponentButtonPaddingDesktopVertical=nm,x.ComponentButtonPaddingMobileHorizontal=tm,x.ComponentButtonPaddingMobileVertical=em,x.ComponentButtonShadowSize=im,x.ComponentCardHeadingMargin=dm,x.ComponentCardPaddingDesktop=um,x.ComponentCardPaddingMobile=cm,x.ComponentDetails=km,x.ComponentExpander=Cm,x.ComponentFormCheckboxLabelPadding=lm,x.ComponentFormCheckboxSize=om,x.ComponentFormInputMinHeight=am,x.ComponentFormInputPadding=sm,x.ComponentLink=Sm,x.ComponentPagination=Nm,x.ComponentPanelPaddingDesktop=hm,x.ComponentPanelPaddingMobile=fm,x.ComponentSpread=_m,x.ComponentSummaryListCellPaddingHorizontal=vm,x.ComponentSummaryListCellPaddingVertical=bm,x.ComponentSummaryListRowMargin=xm,x.Container=zs,x.ContentsList=hv,x.DEFAULT_FONT_CONFIG=Rl,x.DashboardSummaryGrid=Lv,x.DateInput=My,x.Details=rd,x.DoDontList=id,x.ElevationHigh=Mg,x.ElevationLow=Cg,x.ElevationMedium=Ng,x.ElevationNone=kg,x.ErrorMessage=Rs,x.ErrorSummary=Ny,x.Expander=ad,x.FRUTIGER_FONT_FILES=Ct,x.Fieldset=ca,x.Float=Zc,x.FocusOutlineOffset=xg,x.FocusOutlineStyle=_g,x.FocusOutlineWidth=vg,x.FocusShadowButton=Sg,x.FocusShadowInput=wg,x.FontFamilyBase=gi,x.FontFamilyFallback=yi,x.FontFamilyPrint=bi,x.FontLineHeightBase=ys,x.FontSize14Mobile=wi,x.FontSize14Print=ki,x.FontSize14Tablet=Si,x.FontSize16Mobile=Ci,x.FontSize16Print=Mi,x.FontSize16Tablet=Ni,x.FontSize19Mobile=ji,x.FontSize19Print=Di,x.FontSize19Tablet=Ti,x.FontSize22Mobile=Ii,x.FontSize22Print=Pi,x.FontSize22Tablet=Li,x.FontSize26Mobile=Ai,x.FontSize26Print=Fi,x.FontSize26Tablet=Ei,x.FontSize36Mobile=$i,x.FontSize36Print=Hi,x.FontSize36Tablet=Bi,x.FontSize48Mobile=zi,x.FontSize48Print=Ri,x.FontSize48Tablet=Oi,x.FontSizeBase=gs,x.FontWeightBold=xi,x.FontWeightLight=_i,x.FontWeightNormal=vi,x.Footer=Ws,x.FormBorderRadius=_p,x.FormBorderWidthDefault=vp,x.FormBorderWidthError=xp,x.FormErrorTextDefault=gp,x.FormErrorTypographyWeight=yp,x.FormHintTextDefault=bp,x.FormInputBackgroundDefault=np,x.FormInputBackgroundDisabled=ip,x.FormInputBackgroundError=ap,x.FormInputBackgroundFocus=rp,x.FormInputBorderDefault=sp,x.FormInputBorderDisabled=cp,x.FormInputBorderError=lp,x.FormInputBorderFocus=op,x.FormInputTextDefault=up,x.FormInputTextDisabled=fp,x.FormInputTextPlaceholder=dp,x.FormLabelTextDefault=hp,x.FormLabelTextRequired=mp,x.FormLabelTypographyWeight=pp,x.FormSpacingCheckboxLabelPadding=Il,x.FormSpacingCheckboxSize=Dl,x.FormSpacingInputMinHeight=Tl,x.FormSpacingInputPadding=jl,x.GanttChart=dv,x.Grid=ua,x.GridGutter=Xp,x.GridGutterHalf=Jp,x.GridLines=Jd,x.GridPageWidth=qp,x.GridWidth=Ln,x.Header=da,x.HeaderSSR=Gy,x.HeaderSearch=nu,x.HeaderStatic=da,x.Heading=Xt,x.HeadingsNhsukHeadingL=rn,x.HeadingsNhsukHeadingM=an,x.HeadingsNhsukHeadingS=sn,x.HeadingsNhsukHeadingXl=nn,x.HeadingsNhsukHeadingXs=on,x.Hero=ru,x.Hint=Hs,x.Images=Mv,x.Input=oa,x.InsetText=yv,x.Label=la,x.LayoutColumnActions=Wp,x.LayoutColumnFull=zp,x.LayoutColumnHalf=Op,x.LayoutColumnQuarter=Up,x.LayoutColumnThird=Rp,x.LayoutContainerMaxWidth=Hp,x.Legend=u_,x.LineScalesProvider=Gd,x.LineSeriesPrimitive=lf,x.List=Xc,x.MainWrapper=Os,x.MedicationCard=xo,x.MetricCard=cf,x.NHSBodyText=y2,x.NHSBodyTextLarge=b2,x.NHSBodyTextSmall=v2,x.NHSHeading1=f2,x.NHSHeading2=h2,x.NHSHeading3=m2,x.NHSHeading4=p2,x.NHSHeading5=g2,x.NHSLedeText=x2,x.NHSLedeTextSmall=_2,x.NHSThemeProvider=Ly,x.NHS_FALLBACK_FONT_STACK=E2,x.NHS_FONT_STACK=A2,x.NavigationSplitView=Md,x.PageTemplate=lx,x.Pagination=fv,x.Panel=Qu,x.ParagraphsBody=ln,x.ParagraphsBodyLarge=cn,x.ParagraphsBodySmall=un,x.ParagraphsLedeText=dn,x.ParagraphsLedeTextSmall=fn,x.PatientCard=bo,x.ProductRoadmap=Td,x.Radios=hy,x.RadiosServer=py,x.ResponsiveDataGrid=wo,x.ResponsiveDataGridDemo=ox,x.Row=vn,x.SPC=o2,x.SPCChart=Wf,x.SPCMetricCard=c2,x.Select=Vr,x.SelectOption=Gc,x.ShadowButtonDefault=hg,x.ShadowButtonFocus=gg,x.ShadowButtonSecondary=mg,x.ShadowButtonWarning=pg,x.ShadowCardDefault=yg,x.ShadowCardHover=bg,x.SizeButtonMinHeightDesktop=Bp,x.SizeButtonMinHeightMobile=$p,x.SizeFormControlLarge=Tp,x.SizeFormControlMedium=jp,x.SizeFormControlSmall=Mp,x.SizeFormInputWidth2xl=Ep,x.SizeFormInputWidth3xl=Fp,x.SizeFormInputWidthLg=Pp,x.SizeFormInputWidthMd=Lp,x.SizeFormInputWidthSm=Ip,x.SizeFormInputWidthXl=Ap,x.SizeFormInputWidthXs=Dp,x.SizeIconExtraLarge=Cp,x.SizeIconLarge=kp,x.SizeIconMedium=Sp,x.SizeIconNhsDefault=Np,x.SizeIconSmall=wp,x.SkipLink=mo,x.SlotMatrix=Iv,x.SortStatusControl=Bv,x.Spacing0=Ll,x.Spacing1=Pl,x.Spacing2=Al,x.Spacing3=El,x.Spacing4=Fl,x.Spacing5=$l,x.Spacing6=Bl,x.Spacing7=Hl,x.Spacing8=zl,x.Spacing9=Ol,x.SpacingResponsive0Mobile=Xa,x.SpacingResponsive0Tablet=Ja,x.SpacingResponsive1Mobile=Qa,x.SpacingResponsive1Tablet=Ka,x.SpacingResponsive2Mobile=es,x.SpacingResponsive2Tablet=ts,x.SpacingResponsive3Mobile=ns,x.SpacingResponsive3Tablet=rs,x.SpacingResponsive4Mobile=is,x.SpacingResponsive4Tablet=as,x.SpacingResponsive5Mobile=ss,x.SpacingResponsive5Tablet=os,x.SpacingResponsive6Mobile=ls,x.SpacingResponsive6Tablet=cs,x.SpacingResponsive7Mobile=us,x.SpacingResponsive7Tablet=ds,x.SpacingResponsive8Mobile=fs,x.SpacingResponsive8Tablet=hs,x.SpacingResponsive9Mobile=ms,x.SpacingResponsive9Tablet=ps,x.SpacingUtilities=by,x.StateDisabledBackground=ug,x.StateDisabledBorder=dg,x.StateDisabledText=fg,x.StateErrorBackground=Qp,x.StateErrorBorder=Kp,x.StateErrorText=eg,x.StateInfoBackground=og,x.StateInfoBorder=lg,x.StateInfoText=cg,x.StateSuccessBackground=tg,x.StateSuccessBorder=ng,x.StateSuccessText=rg,x.StateWarningBackground=ig,x.StateWarningBorder=ag,x.StateWarningText=sg,x.SummaryCard=ld,x.SummaryList=bv,x.Table=Qt,x.Tabs=kv,x.Tag=Ge,x.TaskList=sd,x.Textarea=Wc,x.TooltipOverlay=c_,x.TooltipProvider=of,x.TransactionalPageTemplate=cx,x.TransitionButtonDefault=Kf,x.TransitionButtonShadow=eh,x.TransitionCardHover=nh,x.TransitionInputFocus=th,x.VisibilityProvider=s_,x.VitalsCard=_o,x.WIDTH_FRACTIONS=wy,x.WarningCallout=Nv,x.WidthContainer=So,x.WidthUtilities=xy,x.WorkflowSplitView=xx,x.checkFrutigerLoaded=F2,x.createGenericTabsConfig=La,x.createTCHTabsConfig=Wv,x.generateFrutigerFontFace=L2,x.getResponsiveStyles=d2,x.getSpacingClass=vy,x.getWidthClass=_y,x.preloadFrutigerFonts=P2,x.tchDataConfig=dd,x.useBrand=tu,x.useColors=S2,x.useComponentSpacing=M2,x.useNHSHeadings=j2,x.useNHSParagraphs=T2,x.useNHSTheme=Ty,x.useNHSTypographySystem=D2,x.useNavigationSplitDrill=I2,x.useNavigationSplitUrlSync=kd,x.useNhsFdpBreakpoints=Pa,x.useResponsiveSpacing=N2,x.useResponsiveValue=mx,x.useSpacing=k2,x.useSpc=Gf,x.useTokens=w2,x.useTypography=C2,Object.defineProperty(x,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.js.map
