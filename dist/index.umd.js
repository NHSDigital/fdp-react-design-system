(function(_,B){typeof exports=="object"&&typeof module<"u"?B(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],B):(_=typeof globalThis<"u"?globalThis:_||self,B(_.NHSFDPDesignSystem={},_.React,_.ReactDOM))})(this,(function(_,B,X0){"use strict";function K0(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const q=K0(B);function J0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ca={exports:{}},mi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zc;function Z0(){if(Zc)return mi;Zc=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:s,ref:i!==void 0?i:null,props:a}}return mi.Fragment=t,mi.jsx=n,mi.jsxs=n,mi}var gi={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qc;function Q0(){return Qc||(Qc=1,process.env.NODE_ENV!=="production"&&(function(){function e(O){if(O==null)return null;if(typeof O=="function")return O.$$typeof===I?null:O.displayName||O.name||null;if(typeof O=="string")return O;switch(O){case h:return"Fragment";case y:return"Profiler";case m:return"StrictMode";case v:return"Suspense";case D:return"SuspenseList";case x:return"Activity"}if(typeof O=="object")switch(typeof O.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),O.$$typeof){case b:return"Portal";case M:return(O.displayName||"Context")+".Provider";case S:return(O._context.displayName||"Context")+".Consumer";case w:var H=O.render;return O=O.displayName,O||(O=H.displayName||H.name||"",O=O!==""?"ForwardRef("+O+")":"ForwardRef"),O;case N:return H=O.displayName||null,H!==null?H:e(O.type)||"Memo";case k:H=O._payload,O=O._init;try{return e(O(H))}catch{}}return null}function t(O){return""+O}function n(O){try{t(O);var H=!1}catch{H=!0}if(H){H=console;var z=H.error,ie=typeof Symbol=="function"&&Symbol.toStringTag&&O[Symbol.toStringTag]||O.constructor.name||"Object";return z.call(H,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",ie),t(O)}}function r(O){if(O===h)return"<>";if(typeof O=="object"&&O!==null&&O.$$typeof===k)return"<...>";try{var H=e(O);return H?"<"+H+">":"<...>"}catch{return"<...>"}}function i(){var O=j.A;return O===null?null:O.getOwner()}function a(){return Error("react-stack-top-frame")}function s(O){if(C.call(O,"key")){var H=Object.getOwnPropertyDescriptor(O,"key").get;if(H&&H.isReactWarning)return!1}return O.key!==void 0}function l(O,H){function z(){F||(F=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",H))}z.isReactWarning=!0,Object.defineProperty(O,"key",{get:z,configurable:!0})}function u(){var O=e(this.type);return P[O]||(P[O]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),O=this.props.ref,O!==void 0?O:null}function c(O,H,z,ie,V,ce,Ce,he){return z=ce.ref,O={$$typeof:g,type:O,key:H,props:ce,_owner:V},(z!==void 0?z:null)!==null?Object.defineProperty(O,"ref",{enumerable:!1,get:u}):Object.defineProperty(O,"ref",{enumerable:!1,value:null}),O._store={},Object.defineProperty(O._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(O,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(O,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:Ce}),Object.defineProperty(O,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:he}),Object.freeze&&(Object.freeze(O.props),Object.freeze(O)),O}function d(O,H,z,ie,V,ce,Ce,he){var pe=H.children;if(pe!==void 0)if(ie)if($(pe)){for(ie=0;ie<pe.length;ie++)f(pe[ie]);Object.freeze&&Object.freeze(pe)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(pe);if(C.call(H,"key")){pe=e(O);var ee=Object.keys(H).filter(function(me){return me!=="key"});ie=0<ee.length?"{key: someKey, "+ee.join(": ..., ")+": ...}":"{key: someKey}",Y[pe+ie]||(ee=0<ee.length?"{"+ee.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ie,pe,ee,pe),Y[pe+ie]=!0)}if(pe=null,z!==void 0&&(n(z),pe=""+z),s(H)&&(n(H.key),pe=""+H.key),"key"in H){z={};for(var ae in H)ae!=="key"&&(z[ae]=H[ae])}else z=H;return pe&&l(z,typeof O=="function"?O.displayName||O.name||"Unknown":O),c(O,pe,ce,V,i(),z,Ce,he)}function f(O){typeof O=="object"&&O!==null&&O.$$typeof===g&&O._store&&(O._store.validated=1)}var p=B,g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),M=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),I=Symbol.for("react.client.reference"),j=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,C=Object.prototype.hasOwnProperty,$=Array.isArray,T=console.createTask?console.createTask:function(){return null};p={react_stack_bottom_frame:function(O){return O()}};var F,P={},L=p.react_stack_bottom_frame.bind(p,a)(),te=T(r(a)),Y={};gi.Fragment=h,gi.jsx=function(O,H,z,ie,V){var ce=1e4>j.recentlyCreatedOwnerStacks++;return d(O,H,z,!1,ie,V,ce?Error("react-stack-top-frame"):L,ce?T(r(O)):te)},gi.jsxs=function(O,H,z,ie,V){var ce=1e4>j.recentlyCreatedOwnerStacks++;return d(O,H,z,!0,ie,V,ce?Error("react-stack-top-frame"):L,ce?T(r(O)):te)}})()),gi}var eu;function eb(){return eu||(eu=1,process.env.NODE_ENV==="production"?Ca.exports=Z0():Ca.exports=Q0()),Ca.exports}var o=eb(),Js={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var tu;function tb(){return tu||(tu=1,(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var a="",s=0;s<arguments.length;s++){var l=arguments[s];l&&(a=i(a,r(l)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var s="";for(var l in a)t.call(a,l)&&a[l]&&(s=i(s,l));return s}function i(a,s){return s?a?a+" "+s:a+s:a}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(Js)),Js.exports}var nb=tb();const we=J0(nb),rb=({text:e,href:t,openInNewWindow:n=!1,className:r,...i})=>{const a=we("nhsuk-action-link__link",r);return o.jsx("div",{className:"nhsuk-action-link",children:o.jsxs("a",{className:a,href:t,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,...i,children:[o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right-circle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"36",height:"36",children:[o.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),o.jsx("path",{d:"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"})]}),o.jsx("span",{className:"nhsuk-action-link__text",children:e})]})})},Zs=({ariaLabel:e="Account",items:t=[],className:n,variant:r="default"})=>{if(!t||t.length===0)return null;const i=a=>{const s=a.icon?o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__user",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",role:"img","aria-label":a.icon===!0?"User":void 0,children:o.jsx("path",{d:"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z"})}):null,l=a.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:a.html}}):a.text,u=o.jsxs(o.Fragment,{children:[s,l]});return a.href?o.jsx("a",{className:"nhsuk-account__link nhsuk-header__account-link",href:a.href,children:u}):a.action?o.jsx("form",{className:"nhsuk-account__form",action:a.action,method:a.method||"post",children:o.jsx("button",{className:"nhsuk-account__button",type:"submit",role:"button",children:u})}):o.jsx("span",{children:u})};return o.jsx("nav",{className:we("nhsuk-account",{"nhsuk-account--white":r==="white"},n),"aria-label":e,children:o.jsx("ul",{className:"nhsuk-account__list",children:t.map((a,s)=>a&&o.jsx("li",{className:we("nhsuk-account__item nhsuk-header__account-item",a.className),children:i(a)},s))})})};var Qs=(e=>(e.Primary="primary",e.Secondary="secondary",e.Reverse="reverse",e.Warning="warning",e.Login="login",e.Metric="metric",e))(Qs||{}),eo=(e=>(e.Small="small",e.Default="default",e.Large="large",e))(eo||{});function ib(e){const t=e.variant||"primary",n=e.size||"default",r=!!e.fullWidth,i=["nhs-aria-button",`nhs-aria-button--${t}`,n!=="default"?`nhs-aria-button--${n}`:"",r?"nhs-aria-button--full-width":"",e.className||""].filter(Boolean).join(" ");return{tag:e.href?"a":"button",classes:i,data:{module:"nhs-button"},attrs:e.href?{href:e.href,role:"button"}:{type:"button"},preventDoubleClick:!!e.preventDoubleClick}}const{forwardRef:ab,useCallback:Un,useState:to}=q;function sb(e,t){const{children:n,variant:r=Qs.Primary,size:i=eo.Default,fullWidth:a=!1,className:s="",preventDoubleClick:l=!1,...u}=e,[c,d]=to(!1),[f,p]=to(!1),[g,b]=to(!1),h=ib({variant:r,size:i,fullWidth:a,className:s,preventDoubleClick:l,href:"href"in u?u.href:void 0}),m="disabled"in u?u.disabled:u["aria-disabled"]==="true",y={...c&&{"data-pressed":"true"},...f&&{"data-hovered":"true"},...g&&{"data-focused":"true"},...m&&{"data-disabled":"true"}},S=Un(()=>!m&&d(!0),[m]),M=Un(()=>d(!1),[]),w=Un(()=>!m&&p(!0),[m]),v=Un(()=>{p(!1),d(!1)},[]),D=Un(()=>b(!0),[]),N=Un(()=>b(!1),[]),k=Un(pe=>{pe.key===" "&&("href"in u||pe.currentTarget.getAttribute("role")==="button")&&(pe.preventDefault(),pe.currentTarget.click())},[u]),x=Un(pe=>{if(l){const ee=pe.currentTarget;if(ee.getAttribute("data-processing")==="true"){pe.preventDefault();return}ee.setAttribute("data-processing","true"),setTimeout(()=>{ee.removeAttribute("data-processing")},1e3)}},[l]);if("href"in u&&u.href){const{id:pe,style:ee,title:ae,["aria-label"]:me,["aria-describedby"]:G,["aria-labelledby"]:de,tabIndex:A,...R}=u,Z=u;return o.jsx("a",{ref:t,href:Z.href,target:Z.target,rel:Z.rel,className:h.classes,role:"button",draggable:"false","data-module":"nhs-button",...y,...l&&{"data-prevent-double-click":"true"},...R,onKeyDown:le=>{Z.onKeyDown?.(le),k(le)},onClick:le=>{Z.onClick?.(le),x(le)},onMouseDown:le=>{Z.onMouseDown?.(le),S()},onMouseUp:le=>{Z.onMouseUp?.(le),M()},onMouseEnter:le=>{Z.onMouseEnter?.(le),w()},onMouseLeave:le=>{Z.onMouseLeave?.(le),v()},onFocus:le=>{Z.onFocus?.(le),D()},onBlur:le=>{Z.onBlur?.(le),N()},"aria-disabled":Z["aria-disabled"],...Z["aria-disabled"]==="true"&&{tabIndex:-1},id:pe,style:ee,title:ae,"aria-label":me,"aria-describedby":G,"aria-labelledby":de,tabIndex:A,children:n})}const{id:I,style:j,title:C,["aria-label"]:$,["aria-describedby"]:T,["aria-labelledby"]:F,tabIndex:P,name:L,value:te,form:Y,formAction:O,formEncType:H,formMethod:z,formNoValidate:ie,formTarget:V,autoFocus:ce,...Ce}=u,he=u;return o.jsx("button",{ref:t,type:he.type||"button",disabled:he.disabled,className:h.classes,"data-module":"nhs-button",...y,...l&&{"data-prevent-double-click":"true"},...he.disabled&&{"aria-disabled":"true"},...Ce,onKeyDown:pe=>{he.onKeyDown?.(pe),k(pe)},onClick:pe=>{he.onClick?.(pe),x(pe)},onMouseDown:pe=>{he.onMouseDown?.(pe),S()},onMouseUp:pe=>{he.onMouseUp?.(pe),M()},onMouseEnter:pe=>{he.onMouseEnter?.(pe),w()},onMouseLeave:pe=>{he.onMouseLeave?.(pe),v()},onFocus:pe=>{he.onFocus?.(pe),D()},onBlur:pe=>{he.onBlur?.(pe),N()},id:I,style:j,title:C,"aria-label":$,"aria-describedby":T,"aria-labelledby":F,tabIndex:P,name:L,value:te,form:Y,formAction:O,formEncType:H,formMethod:z,formNoValidate:ie,formTarget:V,autoFocus:ce,children:n})}const yt=ab(sb);yt.displayName="Button";const ka=({text:e="Back",html:t,href:n="#",className:r,element:i="a",onClick:a,...s})=>{const l=we("nhsuk-back-link",r),u=we("nhsuk-back-link__link"),c=()=>o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:o.jsx("path",{d:"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"})}),t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e]});return o.jsx("div",{className:l,children:i==="button"?o.jsx("button",{className:u,onClick:a,type:"button",...s,children:c()}):o.jsx("a",{className:u,href:n,...s,children:c()})})};function ob(e){const{color:t="default",noBorder:n,closable:r,disabled:i,className:a}=e;return{classes:["nhsuk-tag",t!=="default"?`nhsuk-tag--${t}`:"",n?"nhsuk-tag--no-border":"",r?"nhsuk-tag--closable":"",i?"nhsuk-tag--disabled":"",a||""].filter(Boolean).join(" "),showClose:!!r,disabled:!!i}}const Ye=({text:e,html:t,children:n,color:r="default",noBorder:i=!1,closable:a=!1,onClose:s,disabled:l=!1,className:u,...c})=>{const d=ob({color:r,noBorder:i,closable:a,disabled:l,className:u}),f=p=>{p.preventDefault(),p.stopPropagation(),!l&&s&&s()};return o.jsxs("strong",{className:d.classes,...c,children:[n||(t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e),a&&o.jsx("button",{type:"button",className:"nhsuk-tag__close",onClick:f,disabled:l,"aria-label":"Remove",title:"Remove",children:"Ã—"})]})},nu=({id:e,name:t,checked:n,defaultChecked:r=!1,disabled:i=!1,value:a="true",hint:s,errorMessage:l,className:u,children:c,onChange:d,onBlur:f,onFocus:p,attributes:g,...b})=>{const[h,m]=B.useState(r),y=n!==void 0,S=y?n:h;B.useEffect(()=>{y||m(r)},[r,y]);const M=k=>{const x=k.target.checked;y||m(x),d?.(x,k)},w=s?`${e}-hint`:void 0,v=l?`${e}-error`:void 0,D=[w,v].filter(Boolean).join(" ")||void 0,N=we("nhsuk-form-group",{"nhsuk-form-group--error":!!l},u);return o.jsx("div",{className:N,...b,children:o.jsx("div",{className:"nhsuk-checkboxes",children:o.jsxs("div",{className:"nhsuk-checkboxes__item",children:[o.jsx("input",{className:"nhsuk-checkboxes__input",id:e,name:t||e,type:"checkbox",value:a,checked:S,disabled:i,onChange:M,onBlur:f,onFocus:p,"aria-describedby":D,...g}),o.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:e,children:c}),s&&o.jsx("div",{id:w,className:"nhsuk-checkboxes__hint",children:s}),l&&o.jsxs("div",{id:v,className:"nhsuk-error-message nhsuk-checkboxes__error",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]})]})})})};nu.displayName="Checkbox";function ru(e){const n=(e.type||"text")==="range";return{classes:["nhsuk-input",e.hasError?"nhsuk-input--error":"",n?"nhsuk-input--range":"",!n&&e.width&&e.width!=="full"?`nhsuk-input--width-${e.width}`:"",e.className||""].filter(Boolean).join(" "),isRange:n}}const Ta=({id:e,name:t,type:n="text",value:r,defaultValue:i,placeholder:a,disabled:s=!1,readOnly:l=!1,required:u=!1,hasError:c=!1,describedBy:d,className:f,width:p="full",inputMode:g,autoComplete:b,maxLength:h,minLength:m,pattern:y,step:S,min:M,max:w,showValueLabels:v=!1,showCurrentValue:D=!1,valueLabels:N,onChange:k,onBlur:x,onFocus:I,onKeyDown:j,...C})=>{const[$,T]=B.useState(r||i||(n==="range"?M||"0":""));B.useEffect(()=>{r!==void 0&&T(r)},[r]);const F=V=>{const ce=V.target;T(ce.value),("type"in V&&V.nativeEvent||V.type==="keydown")&&k?.(V)},{classes:P,isRange:L}=ru({type:n,hasError:c,width:p,className:f}),te=r!==void 0,Y={id:e,name:t,type:n,placeholder:a,disabled:s,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:b,maxLength:h,minLength:m,pattern:y,step:S,min:M,max:w,onChange:F,onBlur:x,onFocus:I,onKeyDown:V=>{if(L&&/[0-9]/.test(V.key)){const ce=($?.toString()||"")+V.key;V.target.value=ce,F(V)}j?.(V)},...C},O=!te&&i!==void 0?{defaultValue:i}:{},H=te?{value:r}:{},z=()=>o.jsx("input",{className:P,...H,...O,"data-current-value":$,...Y}),ie=L?o.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[v&&o.jsxs("div",{className:"nhsuk-input-range-labels",children:[o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:N?.min||M||"0"}),z(),o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:N?.max||w||"100"})]}),!v&&z(),D&&o.jsx("div",{className:"nhsuk-input-range-current-value",children:o.jsxs("span",{className:"nhsuk-input-range-current-label",children:[N?.current||"Current value:"," ",o.jsx("strong",{children:$})]})})]}):null;return L?ie:o.jsx("input",{className:P,id:e,name:t,type:n,value:r,...r===void 0&&i!==void 0?{defaultValue:i}:{},placeholder:a,disabled:s,readOnly:l,required:u,"aria-describedby":d,inputMode:g,autoComplete:b,maxLength:h,minLength:m,pattern:y,step:S,min:M,max:w,onChange:k,onBlur:x,onFocus:I,onKeyDown:j,...C})};function lb(e){const t=e.size||"m",n=["nhsuk-label",t!=="m"?`nhsuk-label--${t}`:"",e.className||""].filter(Boolean).join(" ");return{tag:e.isPageHeading?"h1":"label",classes:n,size:t,htmlFor:e.isPageHeading?void 0:e.htmlFor,isPageHeading:!!e.isPageHeading}}const Na=({htmlFor:e,className:t,isPageHeading:n=!1,size:r="m",children:i,...a})=>{const s=lb({size:r,isPageHeading:n,className:t,htmlFor:e}),l=s.tag;return o.jsx(l,{className:s.classes,htmlFor:s.htmlFor,...a,children:n?o.jsx("label",{className:"nhsuk-label-wrapper",htmlFor:e,children:i}):i})};function cb(e){const t=["nhsuk-fieldset",e.className||""].filter(Boolean).join(" "),n=e.legend?["nhsuk-fieldset__legend",e.legend.size?`nhsuk-fieldset__legend--${e.legend.size}`:"",e.legend.className||""].filter(Boolean).join(" "):void 0;return{fieldsetClasses:t,legendClasses:n,legendIsPageHeading:!!e.legend?.isPageHeading,describedBy:e.describedBy}}const ja=({children:e,legend:t,className:n,describedBy:r,...i})=>{const a=cb({className:n,describedBy:r,legend:t?{size:t.size,className:t.className,isPageHeading:t.isPageHeading}:void 0}),s=()=>{const l=t?.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:t.html}}):t?.text;return a.legendIsPageHeading?o.jsx("h1",{className:"nhsuk-fieldset__heading",children:l}):l};return o.jsxs("fieldset",{className:a.fieldsetClasses,"aria-describedby":a.describedBy,...i,children:[t&&(t.text||t.html)&&o.jsx("legend",{className:a.legendClasses,children:s()}),e]})};function ub(e){const t=["nhsuk-checkboxes",e.small?"nhsuk-checkboxes--small":"",e.className||""].filter(Boolean).join(" "),n=["nhsuk-form-group",e.hasError?"nhsuk-form-group--error":""].filter(Boolean).join(" ");return{classes:t,formGroupClasses:n}}const iu=({items:e,name:t,idPrefix:n,legend:r,isPageHeading:i=!1,legendSize:a="l",hint:s,errorMessage:l,className:u="",small:c=!1,onChange:d,fieldsetAttributes:f,attributes:p,...g})=>{const[b,h]=B.useState(e.filter(k=>k.checked).map(k=>k.value)),m=n||t,y=s?`${m}-hint`:void 0,S=l?`${m}-error`:void 0,M=[y,S].filter(Boolean).join(" ")||void 0,w=(k,x)=>{let I;x?I=[...b,k]:I=b.filter(j=>j!==k),h(I),d?.(I)},v=()=>e.map((k,x)=>{const I=`${m}-${x+1}`,j=`${I}-conditional`,C=b.includes(k.value),$=k.disabled||!1;return o.jsxs("div",{className:"nhsuk-checkboxes__item",children:[o.jsx("input",{className:"nhsuk-checkboxes__input",id:I,name:t,type:"checkbox",value:k.value,checked:C,disabled:$,onChange:T=>w(k.value,T.target.checked),"aria-describedby":k.hint?`${I}-hint`:M,...k.conditional&&{"aria-controls":j,"aria-expanded":C?"true":"false"},...k.attributes}),o.jsx("label",{className:"nhsuk-checkboxes__label",htmlFor:I,children:k.text}),k.hint&&o.jsx("div",{id:`${I}-hint`,className:"nhsuk-checkboxes__hint",children:k.hint}),k.conditional&&o.jsx("div",{className:we("nhsuk-checkboxes__conditional",{"nhsuk-checkboxes__conditional--hidden":!C}),id:j,children:typeof k.conditional=="object"&&k.conditional!==null&&"label"in k.conditional&&"id"in k.conditional&&"name"in k.conditional?o.jsxs("div",{style:{marginTop:"16px"},children:[k.conditional.label&&o.jsx(Na,{htmlFor:k.conditional.id,children:k.conditional.label}),o.jsx(Ta,{...k.conditional})]}):k.conditional})]},k.value)}),{classes:D,formGroupClasses:N}=ub({small:c,className:u,hasError:!!l});return o.jsx("div",{className:N,...p,...g,children:o.jsxs(ja,{legend:r?{text:r,isPageHeading:i,size:a}:void 0,describedBy:M,...f,children:[s&&o.jsx("div",{id:y,className:"nhsuk-hint",children:s}),l&&o.jsxs("div",{id:S,className:"nhsuk-error-message",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",l]}),o.jsx("div",{className:D,children:v()})]})})};iu.displayName="Checkboxes";function db(e){const t=e.resize??"vertical";return{classes:["nhsuk-textarea",e.hasError?"nhsuk-textarea--error":"",t!=="vertical"?`nhsuk-textarea--resize-${t}`:"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}const au=({id:e,name:t,value:n,defaultValue:r,placeholder:i,disabled:a=!1,readOnly:s=!1,required:l=!1,hasError:u=!1,describedBy:c,className:d,rows:f=5,cols:p,maxLength:g,minLength:b,wrap:h="soft",resize:m="vertical",autoComplete:y,spellCheck:S,onChange:M,onBlur:w,onFocus:v,onKeyDown:D,...N})=>{const{classes:k,describedBy:x}=db({hasError:u,resize:m,className:d,describedBy:c});return o.jsx("textarea",{className:k,id:e,name:t,value:n,defaultValue:r,placeholder:i,disabled:a,readOnly:s,required:l,"aria-describedby":x,rows:f,cols:p,maxLength:g,minLength:b,wrap:h,autoComplete:y,spellCheck:S,onChange:M,onBlur:w,onFocus:v,onKeyDown:D,...N})};function fb(e){return{classes:["nhsuk-hint",e.className||""].filter(Boolean).join(" "),id:e.id}}const no=({id:e,className:t,children:n,...r})=>{const i=fb({id:e,className:t});return o.jsx("div",{className:i.classes,id:i.id,...r,children:n})},hb=({id:e,maxLength:t,maxWords:n,threshold:r=75,name:i,value:a,defaultValue:s,rows:l,className:u,countMessage:c,onCountChange:d,onChange:f,...p})=>{const g=a??s??"",[b,h]=B.useState(g),[m,y]=B.useState(0),[S,M]=B.useState(!1),[w,v]=B.useState(!1),D=B.useCallback(C=>n?C.trim()===""?0:C.trim().split(/\s+/).length:C.length,[n]);B.useEffect(()=>{const C=D(b),$=t||n||0,T=$-C,F=Math.floor($*(r/100));y(T),M(C>$),v(C>=F||C>$),d&&d(C,T)},[b,t,n,r,D,d]);const N=C=>{const $=C.target.value;h($),f&&f(C)},k=()=>{const C=t||n||0,$=n?"word":"character",T=n?"words":"characters";if(!w)return`You can enter up to ${C} ${C===1?$:T}`;if(S){const F=Math.abs(m);return`You have ${F} ${F===1?$:T} too many`}else return`You have ${m} ${m===1?$:T} remaining`},x=we("nhsuk-character-count",u),I=we("nhsuk-character-count__message",{"nhsuk-character-count__message--disabled":!w,"nhsuk-error-message":S},c?.classes),j=we("nhsuk-js-character-count",{"nhsuk-textarea--error":S});return o.jsxs("div",{className:x,"data-module":"nhsuk-character-count","data-maxlength":t,"data-maxwords":n,"data-threshold":r,"data-testid":"character-count",children:[o.jsx(au,{id:e,name:i,value:a!==void 0?b:void 0,defaultValue:a===void 0?s??b:void 0,rows:l,className:j,onChange:N,"aria-describedby":`${e}-info`,"aria-invalid":S||void 0,...p}),o.jsx(no,{id:`${e}-info`,className:I,role:"status","aria-live":"polite",children:k()})]})};function pb(e){return{classes:["nhsuk-select",e.hasError?"nhsuk-select--error":"",e.className||""].filter(Boolean).join(" ")}}const su=({value:e,disabled:t=!1,selected:n=!1,className:r,children:i,...a})=>{const s=we("nhsuk-select__option",r);return o.jsx("option",{className:s,value:e,disabled:t,...a,children:i})},bi=({id:e,name:t,ariaLabel:n,value:r,defaultValue:i,disabled:a=!1,required:s=!1,hasError:l=!1,describedBy:u,className:c,multiple:d=!1,size:f,autoComplete:p,options:g,children:b,onChange:h,onBlur:m,onFocus:y,...S})=>{const{classes:M}=pb({hasError:l,className:c}),w=()=>g?g.map((D,N)=>o.jsx("option",{value:D.value,disabled:D.disabled,"data-initial-selected":D.selected||void 0,children:D.text},`${D.value}-${N}`)):null,v=i===void 0&&r===void 0&&g?g.find(D=>D.selected)?.value:void 0;return o.jsx("select",{className:M,id:e,name:t,"aria-label":n,value:r,defaultValue:i!==void 0?i:v,disabled:a,required:s,"aria-describedby":u,multiple:d,size:f,autoComplete:p,onChange:h,onBlur:m,onFocus:y,...S,children:b||w()})};bi.Option=su;function mb(e){return{classes:["nhsuk-radios",e.hasError?"nhsuk-radios--error":"",e.size==="small"?"nhsuk-radios--small":"",e.inline?"nhsuk-radios--inline":"",e.className||""].filter(Boolean).join(" "),describedBy:e.describedBy}}function ou(e,{variant:t,selectedValue:n,enableBehaviourAttr:r,handleChange:i,handleBlur:a,handleFocus:s,handleKeyDown:l,itemsRef:u,InputComponent:c}){const{onChange:d,onBlur:f,onFocus:p,...g}=e,{name:b,hasError:h=!1,describedBy:m,className:y,size:S="normal",inline:M=!1,options:w,...v}=g,{classes:D,describedBy:N}=mb({hasError:h,size:S,inline:M,className:y,describedBy:m});return o.jsx(ja,{children:o.jsx("div",{className:D,...v,...r?{"data-nhs-behaviour":"radios"}:{},children:w.map((k,x)=>{const I=`${b}-${x}`,j=k.conditional?`${I}-conditional`:void 0,C=n===k.value;return o.jsxs("div",{className:"nhsuk-radios__item",children:[o.jsx("input",{className:"nhsuk-radios__input",id:I,name:b,type:"radio",value:k.value,disabled:k.disabled,...t==="client"?{checked:C,onChange:i,onBlur:a,onFocus:s,onKeyDown:l,ref:$=>{$&&u&&(u.current[x]=$)}}:{defaultChecked:C,"data-nhs-radios-input":!0},"aria-describedby":N}),o.jsx("label",{className:"nhsuk-radios__label",htmlFor:I,children:k.text}),k.hint&&o.jsx("div",{className:"nhsuk-radios__hint",children:k.hint}),k.conditional&&o.jsx("div",{className:we("nhsuk-radios__conditional",{"nhsuk-radios__conditional--hidden":!C}),id:j,...t==="server"?{"data-nhs-radios-conditional":!0}:{},children:typeof k.conditional=="object"&&k.conditional!==null&&"label"in k.conditional&&"id"in k.conditional&&"name"in k.conditional?o.jsxs("div",{style:{marginTop:"16px"},children:[k.conditional.label&&o.jsx(Na,{htmlFor:k.conditional.id,children:k.conditional.label}),o.jsx(c,{...k.conditional})]}):k.conditional})]},k.value)})})})}const gb=({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:i,...a})=>{const[s,l]=B.useState(e||t||""),u=B.useRef([]),c=B.useRef(s),d=g=>{const b=g.target.value;b!==c.current&&(c.current=b,l(b),n?.(g))},f=g=>{i?.(g)},p=B.useCallback(g=>{const{key:b}=g;if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"].includes(b))return;g.preventDefault();const h=u.current.filter(M=>M&&!M.disabled),m=h.indexOf(g.currentTarget);if(m===-1)return;let y=m;["ArrowDown","ArrowRight"].includes(b)?y=(m+1)%h.length:["ArrowUp","ArrowLeft"].includes(b)&&(y=(m-1+h.length)%h.length);const S=h[y];S&&(S.focus(),S.checked||S.click())},[]);return ou({value:e,defaultValue:t,onChange:n,onBlur:r,onFocus:i,...a},{variant:"client",selectedValue:s,enableBehaviourAttr:!1,handleChange:d,handleBlur:r,handleFocus:f,handleKeyDown:p,itemsRef:u,InputComponent:Ta})};function bb(e){const{id:t,name:n,type:r="text",value:i,defaultValue:a,placeholder:s,disabled:l=!1,readOnly:u=!1,required:c=!1,hasError:d=!1,describedBy:f,className:p,width:g="full",inputMode:b,autoComplete:h,maxLength:m,minLength:y,pattern:S,step:M,min:w,max:v,showValueLabels:D=!1,showCurrentValue:N=!1,valueLabels:k,onChange:x,onBlur:I,onFocus:j,onKeyDown:C,...$}=e,{classes:T,isRange:F}=ru({type:r,hasError:d,width:g,className:p}),P={id:t,name:n,type:r,placeholder:s,disabled:l,readOnly:u,required:c,"aria-describedby":f,inputMode:b,autoComplete:h,maxLength:m,minLength:y,pattern:S,step:M,min:w,max:v,...$};if(F){const L=i??a??(typeof w<"u"?String(w):"0"),te=o.jsx("input",{className:T,...i!==void 0?{value:i}:{},...i===void 0&&a!==void 0?{defaultValue:a}:{},"data-current-value":L,...P});return o.jsxs("div",{className:"nhsuk-input-range-wrapper",children:[D?o.jsxs("div",{className:"nhsuk-input-range-labels",children:[o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--min",children:k?.min||w||"0"}),te,o.jsx("span",{className:"nhsuk-input-range-label nhsuk-input-range-label--max",children:k?.max||v||"100"})]}):te,N&&o.jsx("div",{className:"nhsuk-input-range-current-value",children:o.jsxs("span",{className:"nhsuk-input-range-current-label",children:[k?.current||"Current value:"," ",o.jsx("strong",{children:L})]})})]})}return o.jsx("input",{className:T,...i!==void 0?{value:i}:{},...i===void 0&&a!==void 0?{defaultValue:a}:{},...P})}const yb=({value:e,defaultValue:t,...n})=>{const r=e||t||"";return ou({value:e,defaultValue:t,...n},{variant:"server",selectedValue:r,enableBehaviourAttr:!0,InputComponent:bb})};var Vn=(e=>(e.OneQuarter="one-quarter",e.OneThird="one-third",e.OneHalf="one-half",e.TwoThirds="two-thirds",e.ThreeQuarters="three-quarters",e.Full="full",e))(Vn||{}),lu=(e=>(e.Mobile="mobile",e.Tablet="tablet",e.Desktop="desktop",e.LargeDesktop="large-desktop",e))(lu||{}),cu=(e=>(e.Left="left",e.Right="right",e))(cu||{}),uu=(e=>(e.Left="left",e.Center="center",e.Right="right",e))(uu||{});const ro=({children:e,className:t,fluid:n=!1,maxWidth:r,style:i,...a})=>{const s=we({"nhsuk-width-container":!n,"nhsuk-width-container-fluid":n},t),l=r?{maxWidth:r,...i||{}}:i;return o.jsx("div",{className:s,style:l,...a,children:e})},Gn=({children:e,className:t,style:n,...r})=>{const i=we("nhsuk-grid-row",t);return o.jsx("div",{className:i,style:n,...r,children:e})},$r=({children:e,width:t=Vn.Full,mobileWidth:n,tabletWidth:r,desktopWidth:i,start:a,className:s,forceWidth:l=!1,style:u,align:c,...d})=>{const f=we({[`nhsuk-grid-column-${t}`]:!l,[`nhsuk-u-${t}`]:l,[`nhsuk-u-${n}-mobile`]:!!n,[`nhsuk-u-${r}-tablet`]:!!r,[`nhsuk-u-${i}-desktop`]:!!i,[`nhsuk-grid-column-start-${a}`]:a&&a>=1&&a<=7,...c?{[`nhsuk-grid-align-${c}`]:!0}:{}},s);return o.jsx("div",{className:f,style:u,...d,children:e})},Da=({children:e,className:t,style:n,...r})=>{const a=B.Children.toArray(e)[0],s=B.isValidElement(a)&&(a.type===Gn||typeof a.props=="object"&&a.props&&"className"in a.props&&typeof a.props.className=="string"&&a.props.className.includes("nhsuk-grid-row"));return o.jsx(ro,{className:t,style:n,...r,children:s?e:o.jsx(Gn,{children:e})})},vb=({children:e,type:t="bullet",size:n="medium",border:r=!1,className:i,role:a,as:s,...l})=>{const u=s||(t==="number"?"ol":"ul"),c=we("nhsuk-list",{"nhsuk-list--bullet":t==="bullet","nhsuk-list--number":t==="number","nhsuk-list--none":t==="none","nhsuk-list--border":r,[`nhsuk-list--${n}`]:n!=="medium"},i);return o.jsx(u,{className:c,role:a,...l,children:e})},_b=({children:e,className:t,...n})=>{const r=we("nhsuk-list__item",t);return o.jsx("li",{className:r,...n,children:e})},du=vb;du.Item=_b;const xb=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const i=["nhsuk-spacing-utilities",e&&"nhsuk-spacing-utilities--debug",t].filter(Boolean).join(" ");return o.jsx("div",{className:i,...r,children:n})},wb={margin:e=>`nhsuk-u-margin-${e}`,marginTop:e=>`nhsuk-u-margin-top-${e}`,marginRight:e=>`nhsuk-u-margin-right-${e}`,marginBottom:e=>`nhsuk-u-margin-bottom-${e}`,marginLeft:e=>`nhsuk-u-margin-left-${e}`,padding:e=>`nhsuk-u-padding-${e}`,paddingTop:e=>`nhsuk-u-padding-top-${e}`,paddingRight:e=>`nhsuk-u-padding-right-${e}`,paddingBottom:e=>`nhsuk-u-padding-bottom-${e}`,paddingLeft:e=>`nhsuk-u-padding-left-${e}`,marginResponsive:e=>`nhsuk-u-margin-responsive-${e}`,marginTopResponsive:e=>`nhsuk-u-margin-top-responsive-${e}`,marginRightResponsive:e=>`nhsuk-u-margin-right-responsive-${e}`,marginBottomResponsive:e=>`nhsuk-u-margin-bottom-responsive-${e}`,marginLeftResponsive:e=>`nhsuk-u-margin-left-responsive-${e}`,paddingResponsive:e=>`nhsuk-u-padding-responsive-${e}`,paddingTopResponsive:e=>`nhsuk-u-padding-top-responsive-${e}`,paddingRightResponsive:e=>`nhsuk-u-padding-right-responsive-${e}`,paddingBottomResponsive:e=>`nhsuk-u-padding-bottom-responsive-${e}`,paddingLeftResponsive:e=>`nhsuk-u-padding-left-responsive-${e}`},Sb=({debug:e=!1,className:t,children:n,...r})=>{if(!n)return null;const i=["nhsuk-width-utilities",e&&"nhsuk-width-utilities--debug",t].filter(Boolean).join(" ");return o.jsx("div",{className:i,...r,children:n})},Cb={width:e=>`nhsuk-u-width-${e}`,widthTablet:e=>`nhsuk-u-width-${e}-tablet`},kb=["full","three-quarters","two-thirds","one-half","one-third","one-quarter"],io=({as:e="main",size:t="default",className:n,children:r,...i})=>{const a=["nhsuk-main-wrapper",t==="large"&&"nhsuk-main-wrapper--l",t==="small"&&"nhsuk-main-wrapper--s",n].filter(Boolean).join(" ");return o.jsx(e,{className:a,...i,children:r})};function Tb(e){switch(e){case"xxl":case"xl":return 1;case"l":return 2;case"m":return 3;case"s":return 4;case"xs":return 5;default:return 2}}function Nb(e){const t=e.level??Tb(e.size),n=["nhsuk-heading",e.size?`nhsuk-heading--${e.size}`:"",e.className||""].filter(Boolean).join(" "),r=e.marginBottom?{marginBottom:e.marginBottom}:void 0;return{tag:`h${t}`,classes:n,style:r}}const cn=({level:e,className:t,text:n,html:r,children:i,size:a,marginBottom:s,...l})=>{const u=Nb({level:e,size:a,className:t,marginBottom:s}),c=i||(r?o.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n);return B.createElement(u.tag,{className:u.classes,style:u.style,...l},c)};function jb(e){return{classes:["nhsuk-error-message",e.className||""].filter(Boolean).join(" "),id:e.id,visuallyHiddenText:e.visuallyHiddenText??"Error:"}}const ao=({id:e,className:t,visuallyHiddenText:n="Error:",children:r,...i})=>{const a=jb({id:e,className:t,visuallyHiddenText:n});return o.jsxs("span",{className:a.classes,id:a.id,...i,children:[o.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[a.visuallyHiddenText," "]}),r]})},Db=({titleText:e="There is a problem",titleHtml:t,descriptionText:n,descriptionHtml:r,errorList:i,className:a,children:s,...l})=>{const u=B.useRef(null);B.useEffect(()=>{u.current&&u.current.focus()},[]);const c=we("nhsuk-error-summary",a),d=()=>t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,f=()=>r?o.jsx("span",{dangerouslySetInnerHTML:{__html:r}}):n,p=g=>{const b=g.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:g.html}}):g.text;return g.href?o.jsx("a",{href:g.href,...g.attributes,children:b}):b};return o.jsxs("div",{ref:u,className:c,"aria-labelledby":"error-summary-title",role:"alert",tabIndex:-1,"data-module":"nhsuk-error-summary",...l,children:[o.jsx("h2",{className:"nhsuk-error-summary__title",id:"error-summary-title",children:d()}),o.jsxs("div",{className:"nhsuk-error-summary__body",children:[s&&o.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:s}),!s&&(n||r)&&o.jsx("div",{className:"nhsuk-error-summary__description","data-role":"description",children:f()}),o.jsx("ul",{className:"nhsuk-list nhsuk-error-summary__list",role:"list",children:i.map((g,b)=>o.jsx("li",{children:p(g)},b))})]})]})},Mb=({id:e,className:t,items:n,namePrefix:r,values:i={},fieldset:a,hint:s,errorMessage:l,onChange:u,...c})=>{const[d,f]=B.useState(()=>({day:i.day||"",month:i.month||"",year:i.year||""})),[p,g]=B.useState({}),b=F=>F%4===0&&F%100!==0||F%400===0,h=(F,P)=>{const L=[31,28,31,30,31,30,31,31,30,31,30,31];return F===2&&b(P)?29:L[F-1]},m=(F,P,L)=>{if(!F)return;if(!/^\d+$/.test(F))return"Day must be a number";const te=parseInt(F,10);if(te<1||te>31)return"Day must be between 1 and 31";if(P&&L){const Y=parseInt(P,10),O=parseInt(L,10);if(!isNaN(Y)&&!isNaN(O)&&Y>=1&&Y<=12){const H=h(Y,O);if(te>H)return`${["January","February","March","April","May","June","July","August","September","October","November","December"][Y-1]} ${O} only has ${H} days`}}},y=F=>{if(!F)return;if(!/^\d+$/.test(F))return"Month must be a number";const P=parseInt(F,10);if(P<1||P>12)return"Month must be between 1 and 12"},S=F=>{if(!F)return;if(!/^\d+$/.test(F))return"Year must be a number";const P=parseInt(F,10),L=new Date().getFullYear();if(P<1900||P>L+10)return`Year must be between 1900 and ${L+10}`},M=(F,P,L)=>{if(!F||!P||!L)return;const te=parseInt(F,10),Y=parseInt(P,10),O=parseInt(L,10);if(isNaN(te)||isNaN(Y)||isNaN(O)||Y<1||Y>12||O<1900)return;const H=h(Y,O);te<1||te>H},w=B.useCallback((F,P)=>{const L={...d,[F]:P};f(L),u&&u(L)},[d,u]),v=B.useCallback(F=>{const P=d[F];let L;if(F==="day")L=m(P,d.month,d.year);else if(F==="month"){if(L=y(P),!L&&d.day){const te=m(d.day,P,d.year);g(Y=>({...Y,day:te}))}}else if(F==="year"&&(L=S(P),!L&&d.day&&d.month)){const te=m(d.day,d.month,P);g(Y=>({...Y,day:te}))}if(g(te=>({...te,[F]:L})),d.day&&d.month&&d.year){const te=M(F==="day"?P:d.day,F==="month"?P:d.month,F==="year"?P:d.year);te&&g(Y=>({...Y,day:te}))}},[d,m,y,S,M]),D=B.useMemo(()=>[{name:"day",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"month",classes:"nhsuk-input--width-2",inputmode:"numeric",pattern:"[0-9]*"},{name:"year",classes:"nhsuk-input--width-4",inputmode:"numeric",pattern:"[0-9]*"}],[]),N=n||D;let k=a?.describedBy||"";const x=s?`${e}-hint`:"",I=l?`${e}-error`:"";x&&(k=k?`${k} ${x}`:x),I&&(k=k?`${k} ${I}`:I);const j=Object.values(p).some(F=>F),C=we("nhsuk-form-group",{"nhsuk-form-group--error":l||j}),$=we("nhsuk-date-input",t),T=()=>o.jsxs(o.Fragment,{children:[s&&o.jsx(no,{id:x,className:s.classes,children:s.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:s.html}}):s.text}),l&&o.jsx(ao,{id:I,className:l.classes,children:l.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text}),Object.entries(p).map(([F,P])=>P?o.jsxs(ao,{id:`${e}-${F}-error`,className:"nhsuk-error-message",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Error:"})," ",P]},`${F}-error`):null),o.jsx("div",{className:$,id:e,"data-testid":"date-input",...c,children:N.map(F=>{const P=F.id||`${e}-${F.name}`,L=r?`${r}[${F.name}]`:F.name,te=F.label||F.name.charAt(0).toUpperCase()+F.name.slice(1),Y=p[F.name],O=d[F.name]||"";let H=k;if(Y){const z=`${e}-${F.name}-error`;H=H?`${H} ${z}`:z}return o.jsxs("div",{className:"nhsuk-date-input__item",children:[o.jsx(Na,{htmlFor:P,className:"nhsuk-date-input__label",children:te}),o.jsx(Ta,{id:P,name:L,value:O,className:we("nhsuk-date-input__input",F.classes,{"nhsuk-input--error":Y}),inputMode:F.inputmode,autoComplete:F.autocomplete,pattern:F.pattern,"aria-describedby":H||void 0,hasError:!!Y,onChange:z=>w(F.name,z.target.value),onBlur:()=>v(F.name)})]},F.name)})})]});return o.jsx("div",{className:C,children:a?o.jsx(ja,{className:a.classes,legend:a.legend?{text:a.legend}:void 0,describedBy:k||void 0,children:T()}):T()})},fu={animation:{AnimationDurationFast:"150ms",AnimationDurationNormal:"300ms",AnimationDurationSlow:"500ms",AnimationEasingEaseIn:"cubic-bezier(0.4, 0, 1, 1)",AnimationEasingEaseOut:"cubic-bezier(0, 0, 0.2, 1)",AnimationEasingEaseInOut:"cubic-bezier(0.4, 0, 0.2, 1)",AnimationEasingBounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},transition:{TransitionButtonDefault:"background-color 300ms cubic-bezier(0, 0, 0.2, 1)",TransitionButtonShadow:"box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionInputFocus:"border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",TransitionCardHover:"border-color 300ms cubic-bezier(0, 0, 0.2, 1)"},border:{BorderWidthDefault:"1px",BorderWidthFormElement:"2px",BorderWidthFormElementError:"4px",BorderWidthCardBottom:"4px",BorderWidthPanel:"4px",BorderWidthTableHeader:"2px",BorderWidthTableCell:"1px",BorderRadiusNone:"0px",BorderRadiusSmall:"4px",BorderRadiusMedium:"8px",BorderRadiusLarge:"12px",BorderColorDefault:"#d8dde0",BorderColorForm:"#4c6272",BorderColorCard:"#d8dde0",BorderColorCardHover:"#aeb7bd",BorderColorError:"#d5281b"},color:{ColorPrimaryBlue:"#005eb8",ColorPrimaryWhite:"#ffffff",ColorPrimaryBlack:"#212b32",ColorPrimaryGreen:"#007f3b",ColorPrimaryPurple:"#330072",ColorPrimaryDarkPink:"#7c2855",ColorPrimaryRed:"#d5281b",ColorPrimaryYellow:"#ffeb3b",ColorSecondaryPaleYellow:"#fff9c4",ColorSecondaryWarmYellow:"#ffb81c",ColorSecondaryOrange:"#ed8b00",ColorSecondaryAquaGreen:"#00a499",ColorSecondaryPink:"#ae2573",ColorGrey1:"#4c6272",ColorGrey2:"#768692",ColorGrey3:"#aeb7bd",ColorGrey4:"#d8dde0",ColorGrey5:"#f0f4f5",ColorTextPrimary:"#212b32",ColorTextSecondary:"#4c6272",ColorTextReverse:"#ffffff",ColorTextPrint:"#212b32",ColorLinkDefault:"#005eb8",ColorLinkHover:"#7c2855",ColorLinkActive:"#003087",ColorLinkVisited:"#330072",ColorFocusBackground:"#ffeb3b",ColorFocusText:"#212b32",ColorBorderDefault:"#d8dde0",ColorBorderSecondary:"#ffffff33",ColorError:"#d5281b",ColorFormBorder:"#4c6272",ColorFormBackground:"#ffffff",ColorButtonPrimaryBackground:"#007f3b",ColorButtonPrimaryText:"#ffffff",ColorButtonPrimaryHover:"#006530",ColorButtonPrimaryActive:"#004021",ColorButtonPrimaryShadow:"#004021",ColorButtonSecondaryBackground:"#00000000",ColorButtonSecondaryBackgroundSolid:"#ffffff",ColorButtonSecondaryBorder:"#005eb8",ColorButtonSecondaryText:"#005eb8",ColorButtonSecondaryHover:"#d9e5f2",ColorButtonSecondaryActive:"#c7daf0",ColorButtonSecondaryShadow:"#005eb8",ColorButtonReverseBackground:"#ffffff",ColorButtonReverseText:"#212b32",ColorButtonReverseHover:"#d9dde0",ColorButtonReverseActive:"#b3bcc2",ColorButtonReverseShadow:"#b3bcc2",ColorButtonWarningBackground:"#d5281b",ColorButtonWarningHover:"#aa2016",ColorButtonWarningActive:"#6a140e",ColorButtonWarningShadow:"#6a140e",ColorButtonLoginBackground:"#005eb8",ColorButtonLoginHover:"#004b93",ColorButtonLoginActive:"#002f5c",ColorButtonLoginShadow:"#002f5c"},component:{ComponentButtonPaddingMobileVertical:"8px",ComponentButtonPaddingMobileHorizontal:"16px",ComponentButtonPaddingDesktopVertical:"12px",ComponentButtonPaddingDesktopHorizontal:"16px",ComponentButtonShadowSize:"4px",ComponentFormInputMinHeight:"40px",ComponentFormInputPadding:"4px",ComponentFormCheckboxSize:"40px",ComponentFormCheckboxLabelPadding:"12px",ComponentCardPaddingMobile:"16px",ComponentCardPaddingDesktop:"32px",ComponentCardHeadingMargin:"16px",ComponentPanelPaddingMobile:"20px",ComponentPanelPaddingDesktop:"28px",ComponentBreadcrumbChevronMarginLeft:"9px",ComponentBreadcrumbChevronMarginRight:"2px",ComponentBreadcrumbPaddingTopMobile:"16px",ComponentBreadcrumbPaddingTopDesktop:"24px",ComponentSummaryListCellPaddingVertical:"8px",ComponentSummaryListCellPaddingHorizontal:"24px",ComponentSummaryListRowMargin:"16px",ComponentSpread:"4px",ComponentBlur:"4px",ComponentLink:"4px",ComponentDetails:"8px",ComponentExpander:"4px",ComponentPagination:"16px"},button:{ButtonPrimaryBackgroundDefault:"#007f3b",ButtonPrimaryBackgroundHover:"#006530",ButtonPrimaryBackgroundActive:"#004021",ButtonPrimaryBackgroundDisabled:"#d8dde0",ButtonPrimaryTextDefault:"#ffffff",ButtonPrimaryTextDisabled:"#768692",ButtonPrimaryBorderDefault:"#00000000",ButtonPrimaryBorderFocus:"#ffeb3b",ButtonSecondaryBackgroundDefault:"#00000000",ButtonSecondaryBackgroundSolid:"#ffffff",ButtonSecondaryBackgroundHover:"#d9e5f2",ButtonSecondaryBackgroundActive:"#c7daf0",ButtonSecondaryTextDefault:"#005eb8",ButtonSecondaryBorderDefault:"#005eb8",ButtonSpacingPaddingVerticalMobile:"8px",ButtonSpacingPaddingHorizontalMobile:"16px",ButtonSpacingPaddingVerticalDesktop:"12px",ButtonSpacingPaddingHorizontalDesktop:"16px",ButtonBorderWidth:"2px",ButtonBorderRadius:"4px",ButtonShadowSize:"4px",ButtonTypographyWeight:"600"},card:{CardBackgroundDefault:"#ffffff",CardBorderDefault:"#d8dde0",CardBorderHover:"#aeb7bd",CardBorderBottom:"#f0f4f5",CardTextHeading:"#212b32",CardTextDescription:"#212b32",CardTextLink:"#005eb8",CardSpacingPaddingMobile:"16px",CardSpacingPaddingDesktop:"32px",CardSpacingHeadingMargin:"16px",CardBorderWidthDefault:"1px",CardBorderWidthBottom:"4px",CardShadowDefault:"none",CardShadowHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},form:{FormInputBackgroundDefault:"#ffffff",FormInputBackgroundFocus:"#ffffff",FormInputBackgroundDisabled:"#d8dde0",FormInputBackgroundError:"#ffffff",FormInputBorderDefault:"#4c6272",FormInputBorderFocus:"#ffeb3b",FormInputBorderError:"#d5281b",FormInputBorderDisabled:"#aeb7bd",FormInputTextDefault:"#212b32",FormInputTextPlaceholder:"#4c6272",FormInputTextDisabled:"#768692",FormLabelTextDefault:"#212b32",FormLabelTextRequired:"#ffffff",FormLabelTypographyWeight:"600",FormErrorTextDefault:"#d5281b",FormErrorTypographyWeight:"600",FormHintTextDefault:"#4c6272",FormSpacingInputPadding:"4px",FormSpacingInputMinHeight:"40px",FormSpacingCheckboxSize:"40px",FormSpacingCheckboxLabelPadding:"12px",FormBorderWidthDefault:"2px",FormBorderWidthError:"4px",FormBorderRadius:"0px"},size:{SizeIconSmall:"16px",SizeIconMedium:"18px",SizeIconLarge:"24px",SizeIconExtraLarge:"32px",SizeIconNhsDefault:"34px",SizeFormControlSmall:"32px",SizeFormControlMedium:"40px",SizeFormControlLarge:"48px",SizeFormInputWidthXs:"5.4ex",SizeFormInputWidthSm:"7.2ex",SizeFormInputWidthMd:"9ex",SizeFormInputWidthLg:"10.8ex",SizeFormInputWidthXl:"20ex",SizeFormInputWidth2xl:"38ex",SizeFormInputWidth3xl:"56ex",SizeButtonMinHeightMobile:"44px",SizeButtonMinHeightDesktop:"40px"},layout:{LayoutContainerMaxWidth:"1020px",LayoutColumnFull:"100%",LayoutColumnHalf:"50%",LayoutColumnThird:"33.333%",LayoutColumnQuarter:"25%",LayoutColumnActions:"20%"},breakpoint:{BreakpointMobile:"320px",BreakpointTablet:"641px",BreakpointDesktop:"1025px",BreakpointLargeDesktop:"1280px"},grid:{GridPageWidth:"960px",GridGutter:"32px",GridGutterHalf:"16px"},state:{StateErrorBackground:"#d5281b",StateErrorBorder:"#d5281b",StateErrorText:"#ffffff",StateSuccessBackground:"#007f3b",StateSuccessBorder:"#007f3b",StateSuccessText:"#ffffff",StateWarningBackground:"#ffeb3b",StateWarningBorder:"#ffeb3b",StateWarningText:"#212b32",StateInfoBackground:"#005eb8",StateInfoBorder:"#005eb8",StateInfoText:"#ffffff",StateDisabledBackground:"#d8dde0",StateDisabledBorder:"#aeb7bd",StateDisabledText:"#768692"},shadow:{ShadowButtonDefault:"0 4px 0 #004021",ShadowButtonSecondary:"0 4px 0 #005eb8",ShadowButtonWarning:"0 4px 0 #6a140e",ShadowButtonFocus:"0 4px 0 #ffeb3b",ShadowCardDefault:"none",ShadowCardHover:"0 2px 4px rgba(0, 0, 0, 0.1)"},"focus-outline":{FocusOutlineWidth:"4px",FocusOutlineOffset:"0px",FocusOutlineStyle:"solid"},"focus-shadow":{FocusShadowInput:"0 0 0 3px #ffeb3b",FocusShadowButton:"0 0 0 3px #ffeb3b"},elevation:{ElevationNone:"none",ElevationLow:"0 1px 3px rgba(0, 0, 0, 0.12)",ElevationMedium:"0 2px 6px rgba(0, 0, 0, 0.16)",ElevationHigh:"0 4px 12px rgba(0, 0, 0, 0.20)"},spacing:{Spacing0:"0",Spacing1:"4px",Spacing2:"8px",Spacing3:"16px",Spacing4:"24px",Spacing5:"32px",Spacing6:"40px",Spacing7:"48px",Spacing8:"56px",Spacing9:"64px"},"spacing-responsive":{SpacingResponsive0Mobile:"0",SpacingResponsive0Tablet:"0",SpacingResponsive1Mobile:"4px",SpacingResponsive1Tablet:"4px",SpacingResponsive2Mobile:"8px",SpacingResponsive2Tablet:"8px",SpacingResponsive3Mobile:"8px",SpacingResponsive3Tablet:"16px",SpacingResponsive4Mobile:"16px",SpacingResponsive4Tablet:"24px",SpacingResponsive5Mobile:"24px",SpacingResponsive5Tablet:"32px",SpacingResponsive6Mobile:"32px",SpacingResponsive6Tablet:"40px",SpacingResponsive7Mobile:"40px",SpacingResponsive7Tablet:"48px",SpacingResponsive8Mobile:"48px",SpacingResponsive8Tablet:"56px",SpacingResponsive9Mobile:"56px",SpacingResponsive9Tablet:"64px"},font:{FontFamilyBase:"Frutiger W01",FontFamilyFallback:"Arial, Helvetica, sans-serif",FontFamilyPrint:"sans-serif",FontWeightNormal:"400",FontWeightBold:"600",FontWeightLight:"400",FontSize14Mobile:"12px",FontSize14Tablet:"14px",FontSize14Print:"12pt",FontSize16Mobile:"14px",FontSize16Tablet:"16px",FontSize16Print:"12pt",FontSize19Mobile:"16px",FontSize19Tablet:"19px",FontSize19Print:"13pt",FontSize22Mobile:"19px",FontSize22Tablet:"22px",FontSize22Print:"15pt",FontSize26Mobile:"22px",FontSize26Tablet:"26px",FontSize26Print:"17pt",FontSize36Mobile:"27px",FontSize36Tablet:"36px",FontSize36Print:"20pt",FontSize48Mobile:"33px",FontSize48Tablet:"48px",FontSize48Print:"24pt",FontSizeBase:"16px",FontLineHeightBase:"24px"},headings:{xl:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},l:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},m:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},s:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xs:{fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}}},paragraphs:{body:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bodyLarge:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},bodySmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},ledeText:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},ledeTextSmall:{fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}}}},hu=B.createContext(fu),Ib=({children:e,theme:t={}})=>{const n={...fu,...t};return o.jsx(hu.Provider,{value:n,children:e})},Pb=()=>{const e=B.useContext(hu);if(!e)throw new Error("useNHSTheme must be used within an NHSThemeProvider");return e};function Fb(){return`
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 400;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff") format("woff");
	}
	
	@font-face {
	  font-display: swap;
	  font-family: "Frutiger W01";
	  font-style: normal;
	  font-weight: 600;
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot");
	  src: url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.eot?#iefix") format("embedded-opentype"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2") format("woff2"),
		   url("https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff") format("woff");
	}
  `}function $b(){if(typeof document>"u"||document.getElementById("nhs-fonts"))return;const e=document.createElement("style");e.id="nhs-fonts",e.textContent=Fb(),document.head.appendChild(e)}const Lb=({children:e,theme:t})=>(B.useEffect(()=>{$b()},[]),o.jsx(Ib,{theme:t,children:e}));function Ab(e,{variant:t,isClient:n,menuOpen:r=!1,showMoreButton:i=!1,visibleItems:a,dropdownVisible:s,toggleMenu:l,navContainerRef:u,navListRef:c,searchNode:d}){const{className:f,logo:p={},service:g={},serviceName:b,organisation:h,search:m,account:y,navigation:S,containerClasses:M,variant:w="default",attributes:v={},maxVisibleItems:D,responsiveNavigation:N=!0,...k}=e,x={...g,text:g?.text??b};"maxVisibleItems"in k&&delete k.maxVisibleItems;const I=x.href&&!p.href||x.href&&x.href===p.href,j=I?x.href:p.href,C=we("nhsuk-header",{"nhsuk-header--organisation":w==="organisation"||h,"nhsuk-header--white":w==="white"},f),$=we("nhsuk-header__container",M),T=we("nhsuk-header__navigation",{"nhsuk-header__navigation--white":S?.white,"nhsuk-header__navigation--justified":S?.justified},S?.className),F=()=>o.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":p.ariaLabel||"NHS",children:[o.jsx("title",{children:p.ariaLabel||"NHS"}),o.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),P=()=>p.src?o.jsx("img",{className:"nhsuk-header__organisation-logo",src:p.src,width:"280",alt:p.ariaLabel||"NHS"}):F(),L=()=>h?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"nhsuk-header__organisation-name",children:[h.name,h.split&&o.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",h.split]})]}),h.descriptor&&o.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:h.descriptor})]}):null,te=(H,z)=>H?z?o.jsx("a",{className:"nhsuk-header__service-name",href:z,children:H}):o.jsx("span",{className:"nhsuk-header__service-name",children:H}):null,Y=H=>H.active||H.current?o.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:H.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:H.html}}):H.text}):H.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:H.html}}):H.text,O=()=>o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})});return S?.items,o.jsxs("header",{className:C,role:"banner","data-module":"nhsuk-header",...v,...k,children:[o.jsxs("div",{className:$,children:[o.jsxs("div",{className:"nhsuk-header__service",children:[j?o.jsxs("a",{className:"nhsuk-header__service-logo",href:j,children:[P(),L(),I&&te(x.text)]}):o.jsxs(o.Fragment,{children:[P(),L(),I&&te(x.text)]}),x.text&&!I&&te(x.text,x.href)]}),d??null,o.jsx(Zs,{...y,variant:w==="white"?"white":"default"})]}),S&&S.items&&S.items.length>0&&o.jsx("nav",{className:T,"aria-label":S.ariaLabel||"Menu",children:o.jsx("div",{className:we("nhsuk-header__navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--initializing":n&&t==="client","nhsuk-header__navigation-container--ssr":!n},M),ref:u,children:o.jsxs("ul",{className:"nhsuk-header__navigation-list",ref:c,children:[(S?.items||[]).map((H,z)=>o.jsx("li",{className:we("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":H.active||H.current,"nhsuk-header__navigation-item--hidden":i&&a!==void 0&&z>=(a??0)},H.className),...H.attributes||{},children:o.jsx("a",{className:"nhsuk-header__navigation-link",href:H.href,...H.active||H.current?{"aria-current":H.current?"page":"true"}:{},children:Y(H)})},z)),i&&a!==void 0&&o.jsx("li",{className:"nhsuk-header__navigation-item nhsuk-header__navigation-item--more",children:o.jsxs("button",{className:"nhsuk-header__navigation-button",id:"toggle-more-menu",type:"button","aria-haspopup":"true","aria-expanded":r?"true":"false","aria-controls":"nhsuk-header-more-menu",onClick:l,children:[o.jsx("span",{children:"More"}),O()]})})]})})}),n&&S&&S.items&&S.items.length>0&&r&&s&&o.jsx("div",{className:"nhsuk-header__dropdown-menu",hidden:!s,id:"nhsuk-header-more-menu",children:o.jsx("ul",{className:"nhsuk-header__dropdown-list",children:S.items.slice(a??0).map((H,z)=>o.jsx("li",{className:we("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":H.active||H.current}),children:o.jsx("a",{className:"nhsuk-header__dropdown-link",href:H.href,...H.active||H.current?{"aria-current":H.current?"page":"true"}:{},onClick:()=>{l?.()},children:Y(H)})},`overflow-${(a??0)+z}`))})}),t==="server"]})}const pu=({mode:e="form",action:t="/search",method:n="get",name:r="q",value:i,placeholder:a="Search",visuallyHiddenLabel:s="Search the NHS website",visuallyHiddenButton:l="Search",className:u,disabled:c=!1,callbacks:d={},isLoading:f=!1,showResults:p=!1,results:g=[],formAttributes:b={},inputAttributes:h={},buttonAttributes:m={},preventDefaultSubmit:y=!1,debounceMs:S=300,minQueryLength:M=1})=>{const[w,v]=B.useState(""),[D,N]=B.useState(!1),k=B.useRef(void 0),x=B.useRef(null),I=B.useRef(null),j=e==="controlled"&&i!==void 0,C=j?i:w,$=B.useCallback(ie=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{d.onChange&&ie.length>=M&&d.onChange(ie)},S)},[d.onChange,S,M]),T=B.useCallback(ie=>{const V=ie.target.value;j||v(V),e!=="form"&&$(V)},[j,e,$]),F=B.useCallback(ie=>{const V=C.trim(),ce={query:V,timestamp:Date.now(),formData:new FormData(ie.currentTarget)};e==="controlled"||e==="hybrid"&&y?(ie.preventDefault(),d.onSearch&&V.length>=M&&d.onSearch(ce)):e==="hybrid"&&d.onSearch&&V.length>=M&&d.onSearch(ce)},[e,C,d.onSearch,y,M]),P=B.useCallback(()=>{N(!0),d.onFocus?.()},[d.onFocus]),L=B.useCallback(()=>{N(!1),d.onBlur?.()},[d.onBlur]),te=B.useCallback(()=>{j||v(""),d.onClear?.(),I.current?.focus()},[j,d.onClear]);B.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]);const Y=()=>o.jsx("svg",{className:we("nhsuk-icon nhsuk-icon__search",{"nhsuk-icon__search--loading":f}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"})}),O=()=>o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsxs("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:[o.jsx("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416",repeatCount:"indefinite"})]})}),H=()=>!C||e==="form"?null:o.jsx("button",{type:"button",className:"nhsuk-header__search-clear",onClick:te,"aria-label":"Clear search",children:o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__close",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z"})})}),z=()=>!p||!g.length||!D?null:o.jsx("div",{className:"nhsuk-header__search-results",role:"listbox",children:g.map(ie=>o.jsx("div",{className:"nhsuk-header__search-result",role:"option",children:ie.href?o.jsxs("a",{href:ie.href,className:"nhsuk-header__search-result-link",children:[o.jsx("span",{className:"nhsuk-header__search-result-title",children:ie.title}),ie.description&&o.jsx("span",{className:"nhsuk-header__search-result-description",children:ie.description})]}):o.jsxs("button",{type:"button",className:"nhsuk-header__search-result-button",onClick:()=>d.onSearch?.({query:ie.title,timestamp:Date.now()}),children:[o.jsx("span",{className:"nhsuk-header__search-result-title",children:ie.title}),ie.description&&o.jsx("span",{className:"nhsuk-header__search-result-description",children:ie.description})]})},ie.id))});return o.jsxs("div",{className:we("nhsuk-header__search",u,{"nhsuk-header__search--controlled":e==="controlled","nhsuk-header__search--hybrid":e==="hybrid","nhsuk-header__search--loading":f,"nhsuk-header__search--focused":D,"nhsuk-header__search--has-results":p&&g.length>0}),children:[o.jsxs("form",{ref:x,className:"nhsuk-header__search-form",id:"search",action:e!=="controlled"?t:void 0,method:e!=="controlled"?n:void 0,role:"search",onSubmit:F,...b,children:[o.jsx("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field",children:s}),o.jsxs("div",{className:"nhsuk-header__search-input-wrapper",children:[o.jsx("input",{ref:I,className:"nhsuk-header__search-input nhsuk-input",id:"search-field",name:e!=="controlled"?r:void 0,type:"search",placeholder:a,autoComplete:"off",value:C,onChange:T,onFocus:P,onBlur:L,disabled:c||f,...p&&g.length>0?{"aria-expanded":!0,"aria-haspopup":"listbox"}:{},...h}),H()]}),o.jsxs("button",{className:"nhsuk-header__search-submit",type:"submit",disabled:c||f||e!=="form"&&C.length<M,...m,children:[f?O():Y(),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:f?"Searching...":l})]})]}),z()]})},Ma=({className:e,logo:t={},service:n={},organisation:r,search:i,account:a,navigation:s,containerClasses:l,variant:u="default",attributes:c={},...d})=>{const[f,p]=B.useState(!1),[g,b]=B.useState(!1),[h,m]=B.useState(s?.items?.length||0),[y,S]=B.useState(!1),[M,w]=B.useState(!1),v=B.useRef(null),D=B.useRef(null),N=B.useRef(!1);B.useEffect(()=>{typeof window>"u"||w(!0)},[]),B.useEffect(()=>{if(typeof document>"u")return;const j=C=>{C.key==="Escape"&&f&&p(!1)};if(f)return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[f]);const k=B.useRef(null),x=B.useCallback(()=>{if(!M||!s?.items||s.items.length===0||N.current)return;const j=v.current,C=D.current;if(!j||!C)return;N.current=!0,j.classList.add("nhsuk-header__navigation-container--measuring");const $=j.clientWidth,T=Array.from(C.children);if(!T.length){j.classList.remove("nhsuk-header__navigation-container--measuring"),N.current=!1;return}if(k.current==null){const V=document.createElement("button");V.type="button",V.className="nhsuk-header__navigation-button nhsuk-header__navigation-button--prototype",V.style.position="absolute",V.style.visibility="hidden",V.style.pointerEvents="none",V.innerHTML="<span>More</span>",j.appendChild(V),k.current=V.getBoundingClientRect().width||104,j.removeChild(V)}const F=k.current+16;let P=0,L=0;const te=window.getComputedStyle(j),Y=parseFloat(te.paddingLeft)||0,O=parseFloat(te.paddingRight)||0;let H=Y+O;for(const V of T){const ce=V.getBoundingClientRect().width;if(P+ce+F+H>$)break;P+=ce,L+=1}const z=L<s.items.length,ie=z?L:s.items.length;b(V=>V===z?V:z),m(V=>V===ie?V:ie),j.classList.remove("nhsuk-header__navigation-container--measuring"),N.current=!1},[M,s?.items]);B.useEffect(()=>{if(!M)return;const j=v.current;if(!j)return;let C=null;const $=()=>{C==null&&(C=window.requestAnimationFrame(()=>{C=null,x()}))};x();const T=new ResizeObserver(()=>$());return T.observe(j),D.current&&T.observe(D.current),()=>{C!=null&&window.cancelAnimationFrame(C),T.disconnect()}},[M,x]),B.useEffect(()=>{M&&x()},[s?.items?.length,M,x]);const I=j=>{j&&(j.preventDefault(),j.stopPropagation());const C=!f;p(C),S(C)};return Ab({className:e,logo:t,service:n,organisation:r,search:i,account:a,navigation:s,containerClasses:l,variant:u,attributes:c,...d},{variant:"client",isClient:M,menuOpen:f,showMoreButton:g,visibleItems:h,dropdownVisible:y,toggleMenu:I,navContainerRef:v,navListRef:D,searchNode:i?o.jsx(pu,{...i}):null})};function Eb(e,{variant:t,isClient:n}){const{className:r,logo:i={},service:a={},serviceName:s,organisation:l,account:u,navigation:c,containerClasses:d,variant:f="default",attributes:p={},maxVisibleItems:g,responsiveNavigation:b=!0,...h}=e;"maxVisibleItems"in h&&delete h.maxVisibleItems;const m={...a,text:a?.text??s},y=m.href&&!i.href||m.href&&m.href===i.href,S=y?m.href:i.href,M=we("nhsuk-header",{"nhsuk-header--organisation":f==="organisation"||l,"nhsuk-header--white":f==="white"},r),w=we("nhsuk-header__container",d),v=we("nhsuk-header__navigation",{"nhsuk-header__navigation--white":c?.white,"nhsuk-header__navigation--justified":c?.justified},c?.className),D=()=>o.jsxs("svg",{className:"nhsuk-header__logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",height:"40",width:"100",focusable:"false",role:"img","aria-label":i.ariaLabel||"NHS",children:[o.jsx("title",{children:i.ariaLabel||"NHS"}),o.jsx("path",{fill:"#fff",d:"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"})]}),N=()=>i.src?o.jsx("img",{className:"nhsuk-header__organisation-logo",src:i.src,width:"280",alt:i.ariaLabel||"NHS"}):D(),k=()=>l?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"nhsuk-header__organisation-name",children:[l.name,l.split&&o.jsxs("span",{className:"nhsuk-header__organisation-name-split",children:[" ",l.split]})]}),l.descriptor&&o.jsx("span",{className:"nhsuk-header__organisation-name-descriptor",children:l.descriptor})]}):null,x=(T,F)=>T?F?o.jsx("a",{className:"nhsuk-header__service-name",href:F,children:T}):o.jsx("span",{className:"nhsuk-header__service-name",children:T}):null,I=T=>T.active||T.current?o.jsx("strong",{className:"nhsuk-header__navigation-item-current-fallback",children:T.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:T.html}}):T.text}):T.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:T.html}}):T.text,j=c?.items&&!b,C=j?[]:c?.items,$=j?c.items:[];return o.jsxs("header",{className:M,role:"banner","data-module":"nhsuk-header",...p,...h,children:[o.jsxs("div",{className:w,children:[o.jsxs("div",{className:"nhsuk-header__service",children:[S?o.jsxs("a",{className:"nhsuk-header__service-logo",href:S,children:[N(),k(),y&&x(m.text)]}):o.jsxs(o.Fragment,{children:[N(),k(),y&&x(m.text)]}),m.text&&!y&&x(m.text,m.href)]}),o.jsx(Zs,{...u,variant:f==="white"?"white":"default"})]}),c&&c.items&&c.items.length>0&&o.jsx("nav",{className:v,"aria-label":c.ariaLabel||"Menu",children:o.jsx("div",{className:we("nhsuk-header_navigation-container","nhsuk-width-container",{"nhsuk-header__navigation-container--ssr":!n},d),children:o.jsx("ul",{className:"nhsuk-header__navigation-list",children:(C||[]).map((T,F)=>o.jsx("li",{className:we("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--current":T.active||T.current},T.className),...T.attributes||{},children:o.jsx("a",{className:"nhsuk-header__navigation-link",href:T.href,...T.active||T.current?{"aria-current":T.current?"page":"true"}:{},children:I(T)})},F))})})}),j&&$.length>0&&o.jsx("div",{className:"nhsuk-header__dropdown-menu","data-ssr-overflow":"true",children:o.jsx("ul",{className:"nhsuk-header__dropdown-list",children:$.map((T,F)=>o.jsx("li",{className:we("nhsuk-header__dropdown-item",{"nhsuk-header__dropdown-item--current":T.active||T.current}),children:o.jsx("a",{className:"nhsuk-header__dropdown-link",href:T.href,...T.active||T.current?{"aria-current":T.current?"page":"true"}:{},children:I(T)})},`overflow-server-${F}`))})})]})}const Bb=e=>Eb(e,{variant:"server",isClient:!1}),mu=({heading:e,headingLevel:t=1,headingClasses:n="",text:r,html:i,imageURL:a,containerClasses:s="",classes:l="",children:u,...c})=>{const d=["nhsuk-hero",a&&e?"nhsuk-hero--image nhsuk-hero--image-description":"",a&&!e?"nhsuk-hero--image":"",l].filter(Boolean).join(" "),f=["nhsuk-width-container",s,a?"":"nhsuk-hero--border"].filter(Boolean).join(" "),p=["nhsuk-hero__heading",n,!u&&!r&&!i?"nhsuk-u-margin-bottom-0":""].filter(Boolean).join(" "),g=u||e||r||i,b=()=>{if(!e)return null;const h={className:p};switch(t){case 1:return o.jsx("h1",{...h,children:e});case 2:return o.jsx("h2",{...h,children:e});case 3:return o.jsx("h3",{...h,children:e});case 4:return o.jsx("h4",{...h,children:e});case 5:return o.jsx("h5",{...h,children:e});case 6:return o.jsx("h6",{...h,children:e});default:return o.jsx("h1",{...h,children:e})}};return o.jsxs("section",{className:d,style:a?{backgroundImage:`url('${a}')`}:void 0,role:"banner",...c,children:[a&&o.jsx("div",{className:"nhsuk-hero__overlay",children:g&&o.jsx("div",{className:f,children:o.jsx("div",{className:"nhsuk-grid-row",children:o.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:o.jsxs("div",{className:"nhsuk-hero-content",children:[b(),u||(i?o.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):r?o.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null),o.jsx("span",{className:"nhsuk-hero__arrow","aria-hidden":"true"})]})})})})}),!a&&g&&o.jsx("div",{className:f,children:o.jsx("div",{className:"nhsuk-grid-row",children:o.jsx("div",{className:"nhsuk-grid-column-two-thirds",children:o.jsxs("div",{className:"nhsuk-hero__wrapper",children:[b(),u||(i?o.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):r?o.jsx("p",{className:"nhsuk-body-l nhsuk-u-margin-bottom-0",children:r}):null)]})})})})]})};mu.displayName="Hero";const so=({className:e,links:t=[],linksColumn2:n,linksColumn3:r,metaLinks:i,copyright:a="Â© NHS England",containerClasses:s,attributes:l={},style:u,footerStyle:c,containerStyle:d})=>{const f=(g,b=!1)=>o.jsx("li",{className:we("nhsuk-footer__list-item",{"nhsuk-footer-default__list-item":b}),children:o.jsx("a",{className:"nhsuk-footer__list-item-link",href:g.URL,target:g.newWindow?"_blank":void 0,rel:g.newWindow?"noopener noreferrer":void 0,children:g.label})},`${g.URL}-${g.label}`),p=!!(n||r);return o.jsx("footer",{role:"contentinfo",...l,style:{...l?.style,...u},children:o.jsxs("div",{className:"nhsuk-footer-container",children:[o.jsxs("div",{className:we("nhsuk-width-container",s),style:d,children:[o.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Support links"}),o.jsx("div",{className:we("nhsuk-footer",e),style:c,children:p?o.jsxs(o.Fragment,{children:[t.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:t.map(g=>f(g))}),n&&n.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:n.map(g=>f(g))}),r&&r.length>0&&o.jsx("ul",{className:"nhsuk-footer__list",children:r.map(g=>f(g))}),i&&i.length>0&&o.jsx("ul",{className:"nhsuk-footer__list nhsuk-footer__meta",children:i.map(g=>f(g))})]}):o.jsxs("ul",{className:"nhsuk-footer__list",children:[t.map(g=>f(g,!0)),(n||[]).map(g=>f(g,!0)),(r||[]).map(g=>f(g,!0)),(i||[]).map(g=>f(g,!0))]})}),!p&&o.jsx("div",{children:o.jsx("p",{className:"nhsuk-footer__copyright",children:a})})]}),p&&o.jsx("div",{className:"nhsuk-width-container",children:o.jsx("div",{children:o.jsx("p",{className:"nhsuk-footer__copyright",children:a})})})]})})};function Ia(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Rb(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function oo(e){let t,n,r;e.length!==2?(t=Ia,n=(l,u)=>Ia(e(l),u),r=(l,u)=>e(l)-u):(t=e===Ia||e===Rb?e:Ob,n=e,r=e);function i(l,u,c=0,d=l.length){if(c<d){if(t(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<0?c=f+1:d=f}while(c<d)}return c}function a(l,u,c=0,d=l.length){if(c<d){if(t(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<=0?c=f+1:d=f}while(c<d)}return c}function s(l,u,c=0,d=l.length){const f=i(l,u,c,d-1);return f>c&&r(l[f-1],u)>-r(l[f],u)?f-1:f}return{left:i,center:s,right:a}}function Ob(){return 0}function Hb(e){return e===null?NaN:+e}const zb=oo(Ia).right;oo(Hb).center;function gu(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class bu extends Map{constructor(t,n=Vb){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(yu(this,t))}has(t){return super.has(yu(this,t))}set(t,n){return super.set(Wb(this,t),n)}delete(t){return super.delete(Ub(this,t))}}function yu({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Wb({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Ub({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Vb(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Gb=Math.sqrt(50),Yb=Math.sqrt(10),qb=Math.sqrt(2);function Pa(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Gb?10:a>=Yb?5:a>=qb?2:1;let l,u,c;return i<0?(c=Math.pow(10,-i)/s,l=Math.round(e*c),u=Math.round(t*c),l/c<e&&++l,u/c>t&&--u,c=-c):(c=Math.pow(10,i)*s,l=Math.round(e/c),u=Math.round(t/c),l*c<e&&++l,u*c>t&&--u),u<l&&.5<=n&&n<2?Pa(e,t,n*2):[l,u,c]}function Xb(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,s]=r?Pa(t,e,n):Pa(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(s<0)for(let c=0;c<l;++c)u[c]=(a-c)/-s;else for(let c=0;c<l;++c)u[c]=(a-c)*s;else if(s<0)for(let c=0;c<l;++c)u[c]=(i+c)/-s;else for(let c=0;c<l;++c)u[c]=(i+c)*s;return u}function lo(e,t,n){return t=+t,e=+e,n=+n,Pa(e,t,n)[2]}function co(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?lo(t,e,n):lo(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Kb(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Fa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const vu=Symbol("implicit");function _u(){var e=new bu,t=[],n=[],r=vu;function i(a){let s=e.get(a);if(s===void 0){if(r!==vu)return r;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new bu;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return _u(t,n).unknown(r)},Fa.apply(i,arguments),i}function xu(){var e=_u().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,s,l=!1,u=0,c=0,d=.5;delete e.unknown;function f(){var p=t().length,g=i<r,b=g?i:r,h=g?r:i;a=(h-b)/Math.max(1,p-u+c*2),l&&(a=Math.floor(a)),b+=(h-b-a*(p-u))*d,s=a*(1-u),l&&(b=Math.round(b),s=Math.round(s));var m=Kb(p).map(function(y){return b+a*y});return n(g?m.reverse():m)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,l=!0,f()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(u=Math.min(1,c=+p),f()):u},e.paddingInner=function(p){return arguments.length?(u=Math.min(1,p),f()):u},e.paddingOuter=function(p){return arguments.length?(c=+p,f()):c},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return xu(t(),[r,i]).round(l).paddingInner(u).paddingOuter(c).align(d)},Fa.apply(f(),arguments)}function uo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function wu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function yi(){}var vi=.7,$a=1/vi,Lr="\\s*([+-]?\\d+)\\s*",_i="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jb=/^#([0-9a-f]{3,8})$/,Zb=new RegExp(`^rgb\\(${Lr},${Lr},${Lr}\\)$`),Qb=new RegExp(`^rgb\\(${un},${un},${un}\\)$`),ey=new RegExp(`^rgba\\(${Lr},${Lr},${Lr},${_i}\\)$`),ty=new RegExp(`^rgba\\(${un},${un},${un},${_i}\\)$`),ny=new RegExp(`^hsl\\(${_i},${un},${un}\\)$`),ry=new RegExp(`^hsla\\(${_i},${un},${un},${_i}\\)$`),Su={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uo(yi,xi,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Cu,formatHex:Cu,formatHex8:iy,formatHsl:ay,formatRgb:ku,toString:ku});function Cu(){return this.rgb().formatHex()}function iy(){return this.rgb().formatHex8()}function ay(){return Mu(this).formatHsl()}function ku(){return this.rgb().formatRgb()}function xi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Jb.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Tu(t):n===3?new Et(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?La(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?La(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Zb.exec(e))?new Et(t[1],t[2],t[3],1):(t=Qb.exec(e))?new Et(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ey.exec(e))?La(t[1],t[2],t[3],t[4]):(t=ty.exec(e))?La(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ny.exec(e))?Du(t[1],t[2]/100,t[3]/100,1):(t=ry.exec(e))?Du(t[1],t[2]/100,t[3]/100,t[4]):Su.hasOwnProperty(e)?Tu(Su[e]):e==="transparent"?new Et(NaN,NaN,NaN,0):null}function Tu(e){return new Et(e>>16&255,e>>8&255,e&255,1)}function La(e,t,n,r){return r<=0&&(e=t=n=NaN),new Et(e,t,n,r)}function sy(e){return e instanceof yi||(e=xi(e)),e?(e=e.rgb(),new Et(e.r,e.g,e.b,e.opacity)):new Et}function fo(e,t,n,r){return arguments.length===1?sy(e):new Et(e,t,n,r??1)}function Et(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}uo(Et,fo,wu(yi,{brighter(e){return e=e==null?$a:Math.pow($a,e),new Et(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?vi:Math.pow(vi,e),new Et(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Et(cr(this.r),cr(this.g),cr(this.b),Aa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nu,formatHex:Nu,formatHex8:oy,formatRgb:ju,toString:ju}));function Nu(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}`}function oy(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}${ur((isNaN(this.opacity)?1:this.opacity)*255)}`}function ju(){const e=Aa(this.opacity);return`${e===1?"rgb(":"rgba("}${cr(this.r)}, ${cr(this.g)}, ${cr(this.b)}${e===1?")":`, ${e})`}`}function Aa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ur(e){return e=cr(e),(e<16?"0":"")+e.toString(16)}function Du(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new on(e,t,n,r)}function Mu(e){if(e instanceof on)return new on(e.h,e.s,e.l,e.opacity);if(e instanceof yi||(e=xi(e)),!e)return new on;if(e instanceof on)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,l=a-i,u=(a+i)/2;return l?(t===a?s=(n-r)/l+(n<r)*6:n===a?s=(r-t)/l+2:s=(t-n)/l+4,l/=u<.5?a+i:2-a-i,s*=60):l=u>0&&u<1?0:s,new on(s,l,u,e.opacity)}function ly(e,t,n,r){return arguments.length===1?Mu(e):new on(e,t,n,r??1)}function on(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}uo(on,ly,wu(yi,{brighter(e){return e=e==null?$a:Math.pow($a,e),new on(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vi:Math.pow(vi,e),new on(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Et(ho(e>=240?e-240:e+120,i,r),ho(e,i,r),ho(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new on(Iu(this.h),Ea(this.s),Ea(this.l),Aa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Aa(this.opacity);return`${e===1?"hsl(":"hsla("}${Iu(this.h)}, ${Ea(this.s)*100}%, ${Ea(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Iu(e){return e=(e||0)%360,e<0?e+360:e}function Ea(e){return Math.max(0,Math.min(1,e||0))}function ho(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const po=e=>()=>e;function cy(e,t){return function(n){return e+n*t}}function uy(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function dy(e){return(e=+e)==1?Pu:function(t,n){return n-t?uy(t,n,e):po(isNaN(t)?n:t)}}function Pu(e,t){var n=t-e;return n?cy(e,n):po(isNaN(e)?t:e)}const Fu=(function e(t){var n=dy(t);function r(i,a){var s=n((i=fo(i)).r,(a=fo(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),c=Pu(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=l(d),i.b=u(d),i.opacity=c(d),i+""}}return r.gamma=e,r})(1);function fy(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function hy(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function py(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=bo(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(l){for(s=0;s<r;++s)a[s]=i[s](l);return a}}function my(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ba(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function gy(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=bo(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var mo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,go=new RegExp(mo.source,"g");function by(e){return function(){return e}}function yy(e){return function(t){return e(t)+""}}function vy(e,t){var n=mo.lastIndex=go.lastIndex=0,r,i,a,s=-1,l=[],u=[];for(e=e+"",t=t+"";(r=mo.exec(e))&&(i=go.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,u.push({i:s,x:Ba(r,i)})),n=go.lastIndex;return n<t.length&&(a=t.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?u[0]?yy(u[0].x):by(t):(t=u.length,function(c){for(var d=0,f;d<t;++d)l[(f=u[d]).i]=f.x(c);return l.join("")})}function bo(e,t){var n=typeof t,r;return t==null||n==="boolean"?po(t):(n==="number"?Ba:n==="string"?(r=xi(t))?(t=r,Fu):vy:t instanceof xi?Fu:t instanceof Date?my:hy(t)?fy:Array.isArray(t)?py:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?gy:Ba)(e,t)}function _y(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function xy(e){return function(){return e}}function wy(e){return+e}var $u=[0,1];function Ar(e){return e}function yo(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:xy(isNaN(t)?NaN:.5)}function Sy(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Cy(e,t,n){var r=e[0],i=e[1],a=t[0],s=t[1];return i<r?(r=yo(i,r),a=n(s,a)):(r=yo(r,i),a=n(a,s)),function(l){return a(r(l))}}function ky(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=yo(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(l){var u=zb(e,l,1,r)-1;return a[u](i[u](l))}}function Lu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ty(){var e=$u,t=$u,n=bo,r,i,a,s=Ar,l,u,c;function d(){var p=Math.min(e.length,t.length);return s!==Ar&&(s=Sy(e[0],e[p-1])),l=p>2?ky:Cy,u=c=null,f}function f(p){return p==null||isNaN(p=+p)?a:(u||(u=l(e.map(r),t,n)))(r(s(p)))}return f.invert=function(p){return s(i((c||(c=l(t,e.map(r),Ba)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,wy),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),n=_y,d()},f.clamp=function(p){return arguments.length?(s=p?!0:Ar,d()):s!==Ar},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,g){return r=p,i=g,d()}}function Au(){return Ty()(Ar,Ar)}function Ny(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ra(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Er(e){return e=Ra(Math.abs(e)),e?e[1]:NaN}function jy(e,t){return function(n,r){for(var i=n.length,a=[],s=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[s=(s+1)%e.length];return a.reverse().join(t)}}function Dy(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var My=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Oa(e){if(!(t=My.exec(e)))throw new Error("invalid format: "+e);var t;return new vo({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Oa.prototype=vo.prototype;function vo(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}vo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Iy(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Eu;function Py(e,t){var n=Ra(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Eu=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ra(e,Math.max(0,t+a-1))[0]}function Bu(e,t){var n=Ra(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ru={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ny,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Bu(e*100,t),r:Bu,s:Py,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ou(e){return e}var Hu=Array.prototype.map,zu=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Fy(e){var t=e.grouping===void 0||e.thousands===void 0?Ou:jy(Hu.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Ou:Dy(Hu.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"âˆ’":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function c(f){f=Oa(f);var p=f.fill,g=f.align,b=f.sign,h=f.symbol,m=f.zero,y=f.width,S=f.comma,M=f.precision,w=f.trim,v=f.type;v==="n"?(S=!0,v="g"):Ru[v]||(M===void 0&&(M=12),w=!0,v="g"),(m||p==="0"&&g==="=")&&(m=!0,p="0",g="=");var D=h==="$"?n:h==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",N=h==="$"?r:/[%p]/.test(v)?s:"",k=Ru[v],x=/[defgprs%]/.test(v);M=M===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function I(j){var C=D,$=N,T,F,P;if(v==="c")$=k(j)+$,j="";else{j=+j;var L=j<0||1/j<0;if(j=isNaN(j)?u:k(Math.abs(j),M),w&&(j=Iy(j)),L&&+j==0&&b!=="+"&&(L=!1),C=(L?b==="("?b:l:b==="-"||b==="("?"":b)+C,$=(v==="s"?zu[8+Eu/3]:"")+$+(L&&b==="("?")":""),x){for(T=-1,F=j.length;++T<F;)if(P=j.charCodeAt(T),48>P||P>57){$=(P===46?i+j.slice(T+1):j.slice(T))+$,j=j.slice(0,T);break}}}S&&!m&&(j=t(j,1/0));var te=C.length+j.length+$.length,Y=te<y?new Array(y-te+1).join(p):"";switch(S&&m&&(j=t(Y+j,Y.length?y-$.length:1/0),Y=""),g){case"<":j=C+j+$+Y;break;case"=":j=C+Y+j+$;break;case"^":j=Y.slice(0,te=Y.length>>1)+C+j+$+Y.slice(te);break;default:j=Y+C+j+$;break}return a(j)}return I.toString=function(){return f+""},I}function d(f,p){var g=c((f=Oa(f),f.type="f",f)),b=Math.max(-8,Math.min(8,Math.floor(Er(p)/3)))*3,h=Math.pow(10,-b),m=zu[8+b/3];return function(y){return g(h*y)+m}}return{format:c,formatPrefix:d}}var Ha,Wu,Uu;$y({thousands:",",grouping:[3],currency:["$",""]});function $y(e){return Ha=Fy(e),Wu=Ha.format,Uu=Ha.formatPrefix,Ha}function Ly(e){return Math.max(0,-Er(Math.abs(e)))}function Ay(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Er(t)/3)))*3-Er(Math.abs(e)))}function Ey(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Er(t)-Er(e))+1}function By(e,t,n,r){var i=co(e,t,n),a;switch(r=Oa(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Ay(i,s))&&(r.precision=a),Uu(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Ey(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Ly(i))&&(r.precision=a-(r.type==="%")*2);break}}return Wu(r)}function Ry(e){var t=e.domain;return e.ticks=function(n){var r=t();return Xb(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return By(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,s=r[i],l=r[a],u,c,d=10;for(l<s&&(c=s,s=l,l=c,c=i,i=a,a=c);d-- >0;){if(c=lo(s,l,n),c===u)return r[i]=s,r[a]=l,t(r);if(c>0)s=Math.floor(s/c)*c,l=Math.ceil(l/c)*c;else if(c<0)s=Math.ceil(s*c)/c,l=Math.floor(l*c)/c;else break;u=c}return e},e}function za(){var e=Au();return e.copy=function(){return Lu(e,za())},Fa.apply(e,arguments),Ry(e)}function Oy(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),e[n]=t.floor(i),e[r]=t.ceil(a),e}const _o=new Date,xo=new Date;function gt(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),l=i.ceil(a);return a-s<l-a?s:l},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,l)=>{const u=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return u;let c;do u.push(c=new Date(+a)),t(a,l),e(a);while(c<a&&a<s);return u},i.filter=a=>gt(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!a(s););else for(;--l>=0;)for(;t(s,1),!a(s););}),n&&(i.count=(a,s)=>(_o.setTime(+a),xo.setTime(+s),e(_o),e(xo),Math.floor(n(_o,xo))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Wa=gt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Wa.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?gt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Wa),Wa.range;const In=1e3,Jt=In*60,Pn=Jt*60,Fn=Pn*24,wo=Fn*7,Vu=Fn*30,So=Fn*365,Br=gt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*In)},(e,t)=>(t-e)/In,e=>e.getUTCSeconds());Br.range;const Co=gt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*In)},(e,t)=>{e.setTime(+e+t*Jt)},(e,t)=>(t-e)/Jt,e=>e.getMinutes());Co.range,gt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Jt)},(e,t)=>(t-e)/Jt,e=>e.getUTCMinutes()).range;const ko=gt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*In-e.getMinutes()*Jt)},(e,t)=>{e.setTime(+e+t*Pn)},(e,t)=>(t-e)/Pn,e=>e.getHours());ko.range,gt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Pn)},(e,t)=>(t-e)/Pn,e=>e.getUTCHours()).range;const wi=gt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jt)/Fn,e=>e.getDate()-1);wi.range;const To=gt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fn,e=>e.getUTCDate()-1);To.range,gt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fn,e=>Math.floor(e/Fn)).range;function dr(e){return gt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Jt)/wo)}const Ua=dr(0),Va=dr(1),Hy=dr(2),zy=dr(3),Rr=dr(4),Wy=dr(5),Uy=dr(6);Ua.range,Va.range,Hy.range,zy.range,Rr.range,Wy.range,Uy.range;function fr(e){return gt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/wo)}const Gu=fr(0),Ga=fr(1),Vy=fr(2),Gy=fr(3),Or=fr(4),Yy=fr(5),qy=fr(6);Gu.range,Ga.range,Vy.range,Gy.range,Or.range,Yy.range,qy.range;const Si=gt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Si.range,gt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()).range;const $n=gt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());$n.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),$n.range;const hr=gt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());hr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),hr.range;function Xy(e,t,n,r,i,a){const s=[[Br,1,In],[Br,5,5*In],[Br,15,15*In],[Br,30,30*In],[a,1,Jt],[a,5,5*Jt],[a,15,15*Jt],[a,30,30*Jt],[i,1,Pn],[i,3,3*Pn],[i,6,6*Pn],[i,12,12*Pn],[r,1,Fn],[r,2,2*Fn],[n,1,wo],[t,1,Vu],[t,3,3*Vu],[e,1,So]];function l(c,d,f){const p=d<c;p&&([c,d]=[d,c]);const g=f&&typeof f.range=="function"?f:u(c,d,f),b=g?g.range(c,+d+1):[];return p?b.reverse():b}function u(c,d,f){const p=Math.abs(d-c)/f,g=oo(([,,m])=>m).right(s,p);if(g===s.length)return e.every(co(c/So,d/So,f));if(g===0)return Wa.every(Math.max(co(c,d,f),1));const[b,h]=s[p/s[g-1][2]<s[g][2]/p?g-1:g];return b.every(h)}return[l,u]}const[Ky,Jy]=Xy($n,Si,Ua,wi,ko,Co);function No(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jo(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ci(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Zy(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,s=e.shortDays,l=e.months,u=e.shortMonths,c=ki(i),d=Ti(i),f=ki(a),p=Ti(a),g=ki(s),b=Ti(s),h=ki(l),m=Ti(l),y=ki(u),S=Ti(u),M={a:L,A:te,b:Y,B:O,c:null,d:Zu,e:Zu,f:xv,g:Iv,G:Fv,H:yv,I:vv,j:_v,L:Qu,m:wv,M:Sv,p:H,q:z,Q:ad,s:sd,S:Cv,u:kv,U:Tv,V:Nv,w:jv,W:Dv,x:null,X:null,y:Mv,Y:Pv,Z:$v,"%":id},w={a:ie,A:V,b:ce,B:Ce,c:null,d:td,e:td,f:Bv,g:qv,G:Kv,H:Lv,I:Av,j:Ev,L:nd,m:Rv,M:Ov,p:he,q:pe,Q:ad,s:sd,S:Hv,u:zv,U:Wv,V:Uv,w:Vv,W:Gv,x:null,X:null,y:Yv,Y:Xv,Z:Jv,"%":id},v={a:I,A:j,b:C,B:$,c:T,d:Ku,e:Ku,f:pv,g:Xu,G:qu,H:Ju,I:Ju,j:uv,L:hv,m:cv,M:dv,p:x,q:lv,Q:gv,s:bv,S:fv,u:rv,U:iv,V:av,w:nv,W:sv,x:F,X:P,y:Xu,Y:qu,Z:ov,"%":mv};M.x=D(n,M),M.X=D(r,M),M.c=D(t,M),w.x=D(n,w),w.X=D(r,w),w.c=D(t,w);function D(ee,ae){return function(me){var G=[],de=-1,A=0,R=ee.length,Z,le,ue;for(me instanceof Date||(me=new Date(+me));++de<R;)ee.charCodeAt(de)===37&&(G.push(ee.slice(A,de)),(le=Yu[Z=ee.charAt(++de)])!=null?Z=ee.charAt(++de):le=Z==="e"?" ":"0",(ue=ae[Z])&&(Z=ue(me,le)),G.push(Z),A=de+1);return G.push(ee.slice(A,de)),G.join("")}}function N(ee,ae){return function(me){var G=Ci(1900,void 0,1),de=k(G,ee,me+="",0),A,R;if(de!=me.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(ae&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(A=jo(Ci(G.y,0,1)),R=A.getUTCDay(),A=R>4||R===0?Ga.ceil(A):Ga(A),A=To.offset(A,(G.V-1)*7),G.y=A.getUTCFullYear(),G.m=A.getUTCMonth(),G.d=A.getUTCDate()+(G.w+6)%7):(A=No(Ci(G.y,0,1)),R=A.getDay(),A=R>4||R===0?Va.ceil(A):Va(A),A=wi.offset(A,(G.V-1)*7),G.y=A.getFullYear(),G.m=A.getMonth(),G.d=A.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),R="Z"in G?jo(Ci(G.y,0,1)).getUTCDay():No(Ci(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(R+5)%7:G.w+G.U*7-(R+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,jo(G)):No(G)}}function k(ee,ae,me,G){for(var de=0,A=ae.length,R=me.length,Z,le;de<A;){if(G>=R)return-1;if(Z=ae.charCodeAt(de++),Z===37){if(Z=ae.charAt(de++),le=v[Z in Yu?ae.charAt(de++):Z],!le||(G=le(ee,me,G))<0)return-1}else if(Z!=me.charCodeAt(G++))return-1}return G}function x(ee,ae,me){var G=c.exec(ae.slice(me));return G?(ee.p=d.get(G[0].toLowerCase()),me+G[0].length):-1}function I(ee,ae,me){var G=g.exec(ae.slice(me));return G?(ee.w=b.get(G[0].toLowerCase()),me+G[0].length):-1}function j(ee,ae,me){var G=f.exec(ae.slice(me));return G?(ee.w=p.get(G[0].toLowerCase()),me+G[0].length):-1}function C(ee,ae,me){var G=y.exec(ae.slice(me));return G?(ee.m=S.get(G[0].toLowerCase()),me+G[0].length):-1}function $(ee,ae,me){var G=h.exec(ae.slice(me));return G?(ee.m=m.get(G[0].toLowerCase()),me+G[0].length):-1}function T(ee,ae,me){return k(ee,t,ae,me)}function F(ee,ae,me){return k(ee,n,ae,me)}function P(ee,ae,me){return k(ee,r,ae,me)}function L(ee){return s[ee.getDay()]}function te(ee){return a[ee.getDay()]}function Y(ee){return u[ee.getMonth()]}function O(ee){return l[ee.getMonth()]}function H(ee){return i[+(ee.getHours()>=12)]}function z(ee){return 1+~~(ee.getMonth()/3)}function ie(ee){return s[ee.getUTCDay()]}function V(ee){return a[ee.getUTCDay()]}function ce(ee){return u[ee.getUTCMonth()]}function Ce(ee){return l[ee.getUTCMonth()]}function he(ee){return i[+(ee.getUTCHours()>=12)]}function pe(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var ae=D(ee+="",M);return ae.toString=function(){return ee},ae},parse:function(ee){var ae=N(ee+="",!1);return ae.toString=function(){return ee},ae},utcFormat:function(ee){var ae=D(ee+="",w);return ae.toString=function(){return ee},ae},utcParse:function(ee){var ae=N(ee+="",!0);return ae.toString=function(){return ee},ae}}}var Yu={"-":"",_:" ",0:"0"},vt=/^\s*\d+/,Qy=/^%/,ev=/[\\^$*+?|[\]().{}]/g;function Ue(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function tv(e){return e.replace(ev,"\\$&")}function ki(e){return new RegExp("^(?:"+e.map(tv).join("|")+")","i")}function Ti(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function nv(e,t,n){var r=vt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function rv(e,t,n){var r=vt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function iv(e,t,n){var r=vt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function av(e,t,n){var r=vt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function sv(e,t,n){var r=vt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function qu(e,t,n){var r=vt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Xu(e,t,n){var r=vt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ov(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function lv(e,t,n){var r=vt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function cv(e,t,n){var r=vt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ku(e,t,n){var r=vt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function uv(e,t,n){var r=vt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Ju(e,t,n){var r=vt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function dv(e,t,n){var r=vt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function fv(e,t,n){var r=vt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function hv(e,t,n){var r=vt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function pv(e,t,n){var r=vt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function mv(e,t,n){var r=Qy.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function gv(e,t,n){var r=vt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function bv(e,t,n){var r=vt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Zu(e,t){return Ue(e.getDate(),t,2)}function yv(e,t){return Ue(e.getHours(),t,2)}function vv(e,t){return Ue(e.getHours()%12||12,t,2)}function _v(e,t){return Ue(1+wi.count($n(e),e),t,3)}function Qu(e,t){return Ue(e.getMilliseconds(),t,3)}function xv(e,t){return Qu(e,t)+"000"}function wv(e,t){return Ue(e.getMonth()+1,t,2)}function Sv(e,t){return Ue(e.getMinutes(),t,2)}function Cv(e,t){return Ue(e.getSeconds(),t,2)}function kv(e){var t=e.getDay();return t===0?7:t}function Tv(e,t){return Ue(Ua.count($n(e)-1,e),t,2)}function ed(e){var t=e.getDay();return t>=4||t===0?Rr(e):Rr.ceil(e)}function Nv(e,t){return e=ed(e),Ue(Rr.count($n(e),e)+($n(e).getDay()===4),t,2)}function jv(e){return e.getDay()}function Dv(e,t){return Ue(Va.count($n(e)-1,e),t,2)}function Mv(e,t){return Ue(e.getFullYear()%100,t,2)}function Iv(e,t){return e=ed(e),Ue(e.getFullYear()%100,t,2)}function Pv(e,t){return Ue(e.getFullYear()%1e4,t,4)}function Fv(e,t){var n=e.getDay();return e=n>=4||n===0?Rr(e):Rr.ceil(e),Ue(e.getFullYear()%1e4,t,4)}function $v(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ue(t/60|0,"0",2)+Ue(t%60,"0",2)}function td(e,t){return Ue(e.getUTCDate(),t,2)}function Lv(e,t){return Ue(e.getUTCHours(),t,2)}function Av(e,t){return Ue(e.getUTCHours()%12||12,t,2)}function Ev(e,t){return Ue(1+To.count(hr(e),e),t,3)}function nd(e,t){return Ue(e.getUTCMilliseconds(),t,3)}function Bv(e,t){return nd(e,t)+"000"}function Rv(e,t){return Ue(e.getUTCMonth()+1,t,2)}function Ov(e,t){return Ue(e.getUTCMinutes(),t,2)}function Hv(e,t){return Ue(e.getUTCSeconds(),t,2)}function zv(e){var t=e.getUTCDay();return t===0?7:t}function Wv(e,t){return Ue(Gu.count(hr(e)-1,e),t,2)}function rd(e){var t=e.getUTCDay();return t>=4||t===0?Or(e):Or.ceil(e)}function Uv(e,t){return e=rd(e),Ue(Or.count(hr(e),e)+(hr(e).getUTCDay()===4),t,2)}function Vv(e){return e.getUTCDay()}function Gv(e,t){return Ue(Ga.count(hr(e)-1,e),t,2)}function Yv(e,t){return Ue(e.getUTCFullYear()%100,t,2)}function qv(e,t){return e=rd(e),Ue(e.getUTCFullYear()%100,t,2)}function Xv(e,t){return Ue(e.getUTCFullYear()%1e4,t,4)}function Kv(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Or(e):Or.ceil(e),Ue(e.getUTCFullYear()%1e4,t,4)}function Jv(){return"+0000"}function id(){return"%"}function ad(e){return+e}function sd(e){return Math.floor(+e/1e3)}var Hr,od;Zv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Zv(e){return Hr=Zy(e),od=Hr.format,Hr.parse,Hr.utcFormat,Hr.utcParse,Hr}function Qv(e){return new Date(e)}function e_(e){return e instanceof Date?+e:+new Date(+e)}function ld(e,t,n,r,i,a,s,l,u,c){var d=Au(),f=d.invert,p=d.domain,g=c(".%L"),b=c(":%S"),h=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),S=c("%b %d"),M=c("%B"),w=c("%Y");function v(D){return(u(D)<D?g:l(D)<D?b:s(D)<D?h:a(D)<D?m:r(D)<D?i(D)<D?y:S:n(D)<D?M:w)(D)}return d.invert=function(D){return new Date(f(D))},d.domain=function(D){return arguments.length?p(Array.from(D,e_)):p().map(Qv)},d.ticks=function(D){var N=p();return e(N[0],N[N.length-1],D??10)},d.tickFormat=function(D,N){return N==null?v:c(N)},d.nice=function(D){var N=p();return(!D||typeof D.range!="function")&&(D=t(N[0],N[N.length-1],D??10)),D?p(Oy(N,D)):d},d.copy=function(){return Lu(d,ld(e,t,n,r,i,a,s,l,u,c))},d}function Do(){return Fa.apply(ld(Ky,Jy,$n,Si,Ua,wi,ko,Co,Br,od).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function t_({task:e,scale:t,onTaskClick:n,onTaskDoubleClick:r,isSelected:i=!1,taskIndex:a,tabIndex:s=-1,onFocus:l,"aria-label":u}){const c=B.useRef(null),[d,f]=B.useState(!1),[p,g]=B.useState(!1),b=t(e.start),h=t(e.end),m=Math.max(h-b,20),y=()=>{if(e.color)return e.color;switch(e.priority){case"high":return"#d5281b";case"medium":return"#005eb8";case"low":return"#007f3b";default:return"#005eb8"}},S=e.progress?m*e.progress/100:0,M=()=>{n?.(e)},w=()=>{r?.(e)},v=C=>{C.key==="Enter"?(C.preventDefault(),M()):C.key===" "&&(C.preventDefault(),w())},D=()=>{f(!0)},N=()=>{f(!1)},k=()=>{g(!0),l?.()},x=()=>{g(!1)},I=["gantt-task-bar",d&&"gantt-task-bar--pressed",(p||i)&&"gantt-task-bar--focused",e.priority&&`gantt-task-bar--priority-${e.priority}`,i&&"gantt-task-bar--selected",e.type&&`gantt-task-bar--type-${e.type}`].filter(Boolean).join(" "),j={"--task-left":`${b}px`,"--task-width":`${m}px`,"--task-color":y(),left:`${b}px`,width:`${m}px`,backgroundColor:y()};return o.jsxs("div",{role:"button",tabIndex:s,ref:c,"data-task-index":a,className:I,style:j,onClick:M,onDoubleClick:w,onKeyDown:v,onMouseDown:D,onMouseUp:N,onFocus:k,onBlur:x,"aria-label":u||`${i?"Selected: ":""}${e.title}: ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.priority?`, priority ${e.priority}`:""}${e.progress?`, ${e.progress}% complete`:""}`,"aria-describedby":`task-${e.id}-details`,children:[o.jsx("span",{className:"task-title",children:e.title}),e.progress!==void 0&&o.jsx("div",{className:"task-progress",style:{width:`${S}px`}}),o.jsx("span",{id:`task-${e.id}-details`,className:"sr-only",children:`Task: ${e.title}, from ${e.start.toLocaleDateString()} to ${e.end.toLocaleDateString()}${e.progress?`, ${e.progress}% complete`:""}${e.priority?`, priority: ${e.priority}`:""}`})]})}function n_({viewStart:e,viewEnd:t,dateCount:n}){const r=[];for(let g=e.getTime();g<=t.getTime();g+=864e5)r.push(new Date(g));const a=new Date;a.setHours(0,0,0,0);const[s,l]=B.useState(-1),u=B.useRef(null),c=g=>{if(g.key==="ArrowLeft"){g.preventDefault();const b=Math.max(0,s===-1?0:s-1);l(b),p(b)}else if(g.key==="ArrowRight"){g.preventDefault();const b=Math.min(r.length-1,s===-1?0:s+1);l(b),p(b)}else if(g.key==="ArrowDown")g.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .timeline-container"):null)?.focus();else if(g.key==="Home")g.preventDefault(),l(0),p(0);else if(g.key==="End"){g.preventDefault();const b=r.length-1;l(b),p(b)}},d=g=>{if(g.key==="ArrowDown")g.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".gantt-row .resource-label"):null)?.focus();else if(g.key==="ArrowRight"){g.preventDefault();const b=u.current;b&&b.focus()}},f=()=>{s===-1&&(l(0),setTimeout(()=>p(0),0))},p=g=>{const b=u.current?.querySelector(`[data-date-index="${g}"]`);b&&b.focus()};return o.jsxs("div",{className:"gantt-header",role:"row","aria-rowindex":1,children:[o.jsx("div",{className:"header-resource",role:"columnheader","aria-colindex":1,tabIndex:0,"aria-label":"Resource column header",onKeyDown:d,children:"Resources"}),o.jsx("div",{ref:u,className:"header-timeline",role:"columnheader","aria-colindex":2,"aria-colspan":n,"aria-label":`Timeline from ${e.toLocaleDateString()} to ${t.toLocaleDateString()}. Use arrow keys to navigate between dates`,tabIndex:0,onKeyDown:c,onFocus:f,children:r.map((g,b)=>{const h=g.getTime()===a.getTime(),m=s===b;return o.jsx("div",{"data-date-index":b,className:`date-column ${h?"today":""} ${m?"focused":""}`,tabIndex:m?0:-1,role:"button","aria-label":`${g.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}${h?" (Today)":""}`,onFocus:()=>l(b),onKeyDown:c,children:g.toLocaleDateString("en-GB",{day:"numeric",month:"short"})},b)})})]})}function r_({resource:e,tasks:t,scale:n,onTaskClick:r,onTaskDoubleClick:i,rowIndex:a,dateCount:s}){const[l,u]=B.useState(!1),[c,d]=B.useState(-1),f=B.useRef(null);B.useEffect(()=>{l&&c>=0&&t.length>0&&setTimeout(()=>{f.current?.querySelector(`[data-task-index="${c}"]`)?.focus()},0)},[l,c,t.length]);const p=h=>{if(h.key==="ArrowLeft"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(h.key==="ArrowRight"&&h.shiftKey){h.preventDefault(),h.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!l){switch(h.key){case"ArrowUp":h.preventDefault(),a===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-timeline"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+1}"] .timeline-container`):null)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+3}"] .timeline-container`):null)?.focus();break;case"ArrowLeft":h.preventDefault(),f.current?.closest(".gantt-row")?.querySelector(".resource-label")?.focus();break;case"Enter":t.length>0&&(h.preventDefault(),u(!0),d(0));break}return}switch(h.key){case"ArrowLeft":h.preventDefault();const m=Math.max(0,c-1);d(m),f.current?.querySelector(`[data-task-index="${m}"]`)?.focus();break;case"ArrowRight":h.preventDefault();const S=Math.min(t.length-1,c+1);d(S),f.current?.querySelector(`[data-task-index="${S}"]`)?.focus();break;case"Enter":h.preventDefault(),c>=0&&r?.(t[c]);break;case" ":h.preventDefault(),c>=0&&i?.(t[c]);break;case"Escape":h.preventDefault(),u(!1),d(-1),f.current?.focus();break}},g=h=>{switch(h.key){case"ArrowUp":h.preventDefault(),a===0?typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(".header-resource"):null)?.focus():typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+1}"] .resource-label`):null)?.focus();break;case"ArrowDown":h.preventDefault(),typeof document<"u"&&(typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(`[aria-rowindex="${a+3}"] .resource-label`):null)?.focus();break;case"ArrowRight":h.preventDefault(),f.current?.focus();break}},b=h=>{l&&d(h)};return o.jsxs("div",{className:"gantt-row",role:"row","aria-rowindex":a+2,children:[o.jsx("div",{className:"resource-label",role:"gridcell","aria-colindex":1,tabIndex:0,"aria-label":`Resource: ${e.label}`,onKeyDown:g,children:e.label}),o.jsx("div",{ref:f,className:`timeline-container ${l?"timeline-active":""}`,role:"gridcell","aria-colindex":2,"aria-colspan":s,tabIndex:0,"aria-label":`Timeline for ${e.label} with ${t.length} task${t.length!==1?"s":""}. Press Enter to activate task navigation, then use arrow keys to navigate, Enter to select, Space to activate, Escape to exit`,onKeyDown:p,onFocus:()=>{l||d(-1)},children:t.map((h,m)=>o.jsx(t_,{task:h,scale:n,onTaskClick:r,onTaskDoubleClick:i,isSelected:l&&c===m,taskIndex:m,tabIndex:l&&c===m?0:-1,onFocus:()=>b(m)},h.id))})]})}function i_({resources:e,tasks:t=[],viewStart:n,viewEnd:r,onTaskClick:i,onTaskDoubleClick:a}){const s=B.useRef(null),[l,u]=B.useState(800),c=B.useMemo(()=>{if(n instanceof Date)return isNaN(n.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):n;const h=new Date(n);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewStart date provided, using current date"),new Date):h},[n]),d=B.useMemo(()=>{if(r instanceof Date)return isNaN(r.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):r;const h=new Date(r);return isNaN(h.getTime())?(console.warn("GanttChart: Invalid viewEnd date provided, using date 7 days from now"),new Date(Date.now()+10080*60*1e3)):h},[r]),f=B.useMemo(()=>Math.ceil((d.getTime()-c.getTime())/864e5)+1,[c,d]);B.useEffect(()=>{if(!s.current||typeof window>"u")return;const h=typeof ResizeObserver<"u"?ResizeObserver:void 0;if(!h)return;const m=new h(y=>{const S=y[0];S&&u(Math.max(S.contentRect.width-220,400))});return m.observe(s.current),()=>m.disconnect()},[]);const p=B.useMemo(()=>Do().domain([c,d]).range([0,l]),[c,d,l]),g=B.useMemo(()=>{const h=new Map;return t.forEach(m=>{const y=h.get(m.resourceId)||[];y.push(m),h.set(m.resourceId,y)}),h},[t]),b=h=>{if(h.target===h.currentTarget)switch(h.key){case"ArrowDown":h.preventDefault(),typeof document<"u"&&s.current?.querySelector(".gantt-row .resource-label")?.focus();break;case"Home":h.preventDefault(),typeof document<"u"&&s.current?.querySelector(".header-resource")?.focus();break}};return o.jsxs("div",{className:"gantt-chart",role:"grid","aria-label":"Gantt Chart showing resource scheduling and task timelines","aria-rowcount":e.length+1,"aria-colcount":f+1,"aria-description":"Use arrow keys to navigate cells, Tab to cycle through tasks in timeline rows or dates in header, Enter to select task, Space to activate task, Alt+arrows to scroll the grid, Shift+arrows to scroll timeline rows",tabIndex:0,onKeyDown:b,children:[o.jsx(n_,{viewStart:c,viewEnd:d,dateCount:f}),o.jsx("div",{ref:s,className:"gantt-grid",role:"rowgroup","aria-label":"Gantt chart data rows",tabIndex:0,onKeyDown:h=>{h.key==="ArrowLeft"&&h.altKey?(h.preventDefault(),s.current?.scrollBy({left:-50,behavior:"smooth"})):h.key==="ArrowRight"&&h.altKey?(h.preventDefault(),s.current?.scrollBy({left:50,behavior:"smooth"})):h.key==="ArrowUp"&&h.altKey?(h.preventDefault(),s.current?.scrollBy({top:-50,behavior:"smooth"})):h.key==="ArrowDown"&&h.altKey&&(h.preventDefault(),s.current?.scrollBy({top:50,behavior:"smooth"}))},children:e.map((h,m)=>o.jsx(r_,{resource:h,tasks:g.get(h.id)||[],scale:p,onTaskClick:i,onTaskDoubleClick:a,rowIndex:m,dateCount:f},h.id))})]})}const Ya=({children:e,href:t,active:n=!1,attributes:r={}})=>o.jsx("li",{className:"nhsuk-breadcrumb__item",children:n?o.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",...r,children:e}):o.jsx("a",{className:"nhsuk-breadcrumb__link",href:t,...r,children:e})}),cd=({items:e=[],children:t,classes:n,labelText:r="Breadcrumb",href:i,text:a,reverse:s=!1,attributes:l={}})=>{const u=()=>t?B.Children.toArray(t).filter(m=>B.isValidElement(m)&&(m.type===Ya||m.type?.displayName==="BreadcrumbItem")).map(m=>({text:typeof m.props.children=="string"?m.props.children:String(m.props.children),href:m.props.href,active:m.props.active,attributes:m.props.attributes})):[],c=()=>t?u():i&&a?[{href:i,text:a}]:e,d=()=>{const h=c();if(h&&h.length>0){const m=h.slice().reverse().find(y=>y.href&&!y.active);if(m)return{href:m.href,text:m.text}}return{text:"Home"}},f=c(),p=d(),g=we("nhsuk-breadcrumb",{"nhsuk-breadcrumb--reverse":s},n),b=r;return o.jsxs("nav",{className:g,"aria-label":b,role:"navigation",...l,children:[o.jsx("ol",{className:"nhsuk-breadcrumb__list",role:"list",children:t?B.Children.map(t,(h,m)=>B.isValidElement(h)&&(h.type===Ya||h.type?.displayName==="BreadcrumbItem")?B.cloneElement(h,{key:m}):null):f?.filter(h=>h.active||!!h.href).map((h,m)=>o.jsx("li",{className:"nhsuk-breadcrumb__item",role:"listitem",children:h.active?o.jsx("span",{className:"nhsuk-breadcrumb__link nhsuk-breadcrumb__link--current","aria-current":"page",role:"text",...h.attributes||{},children:h.text}):o.jsx("a",{className:"nhsuk-breadcrumb__link",href:h.href,role:"link",...h.attributes||{},children:h.text})},m))}),p.href&&o.jsx("p",{className:"nhsuk-breadcrumb__back",children:o.jsxs("a",{className:"nhsuk-breadcrumb__backlink",href:p.href,role:"link","aria-label":`Back to ${p.text}`,...e.length>0?e[e.length-1]?.attributes||{}:{},children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Back to Â "}),p.text]})})]})};cd.Item=Ya,Ya.displayName="BreadcrumbItem";const Mo=({text:e="Skip to main content",href:t="#maincontent",classes:n,attributes:r={}})=>{const[i,a]=B.useState(!1);B.useEffect(()=>{a(!0)},[]),B.useEffect(()=>{if(typeof window>"u"||typeof document>"u"||!document.querySelector||!document.querySelectorAll)return;const l=u=>{const c=u.target,d=c.getAttribute("href");if(d&&d.startsWith("#")){const f=typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"&&typeof document<"u"?document.querySelector(d):null;if(f){f.hasAttribute("tabindex")||f.setAttribute("tabindex","-1"),f.focus(),f.classList.add("nhsuk-skip-link-focused-element");const p=window.setTimeout(()=>{f.classList.remove("nhsuk-skip-link-focused-element"),f.getAttribute("tabindex")==="-1"&&f.removeAttribute("tabindex")},3e3);c.__nhsSkipLinkTimeout=p}}};try{const u=document.querySelectorAll(".nhsuk-skip-link");return u.forEach(c=>{c.addEventListener("click",l)}),()=>{try{u.forEach(c=>{c.removeEventListener("click",l);const d=c.__nhsSkipLinkTimeout;d&&window.clearTimeout&&window.clearTimeout(d)})}catch(c){console.warn("SkipLink cleanup error:",c)}}}catch(u){return console.warn("SkipLink initialization error:",u),()=>{}}},[i]);const s=we("nhsuk-skip-link",n);return o.jsx("a",{className:s,href:t,"data-module":"nhsuk-skip-link","data-enhanced":i?"true":"false",...r,children:e})},a_=({previousUrl:e,previousPage:t,nextUrl:n,nextPage:r,classes:i,attributes:a={}})=>{const s=we("nhsuk-pagination",i);return o.jsx("nav",{className:s,role:"navigation","aria-label":"Pagination",...a,children:o.jsxs("ul",{className:"nhsuk-list nhsuk-pagination__list",children:[e&&t&&o.jsx("li",{className:"nhsuk-pagination-item--previous",children:o.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--prev",href:e,children:[o.jsx("span",{className:"nhsuk-pagination__title",children:"Previous"}),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),o.jsx("span",{className:"nhsuk-pagination__page",children:t}),o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{d:"M4.1 12.3l2.7 3c.2.2.5.2.7 0 .1-.1.1-.2.1-.3v-2h11c.6 0 1-.4 1-1s-.4-1-1-1h-11V9c0-.2-.1-.4-.3-.5h-.2c-.1 0-.3.1-.4.2l-2.7 3c0 .2 0 .4.1.6z"})})]})}),n&&r&&o.jsx("li",{className:"nhsuk-pagination-item--next",children:o.jsxs("a",{className:"nhsuk-pagination__link nhsuk-pagination__link--next",href:n,children:[o.jsx("span",{className:"nhsuk-pagination__title",children:"Next"}),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"}),o.jsx("span",{className:"nhsuk-pagination__page",children:r}),o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__arrow-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{d:"M19.6 11.66l-2.73-3A.51.51 0 0 0 16 9v2H5a1 1 0 0 0 0 2h11v2a.5.5 0 0 0 .32.46.39.39 0 0 0 .18 0 .52.52 0 0 0 .37-.16l2.73-3a.5.5 0 0 0 0-.64z"})})]})})]})})},s_=({items:e,classes:t,ariaLabel:n="Pages in this guide",attributes:r={}})=>{const i=we("nhsuk-contents-list",t),a=(s,l)=>s.current?o.jsx("li",{className:"nhsuk-contents-list__item","aria-current":"page",...s.attributes||{},children:o.jsx("span",{className:"nhsuk-contents-list__current",children:s.text})},l):o.jsx("li",{className:"nhsuk-contents-list__item",children:o.jsx("a",{className:"nhsuk-contents-list__link",href:s.href,...s.attributes||{},children:s.text})},l);return o.jsxs("nav",{className:i,role:"navigation","aria-label":n,...r,children:[o.jsx("h2",{className:"nhsuk-u-visually-hidden",children:"Contents"}),o.jsx("ol",{className:"nhsuk-contents-list__list",children:e.map((s,l)=>a(s,l))})]})},Io=B.forwardRef(({variant:e="default",heading:t,headingHtml:n,headingLevel:r=2,headingClasses:i,description:a,descriptionHtml:s,href:l,imgURL:u,imgAlt:c,...d},f)=>{const p=["nhsuk-card",e==="clickable"&&"nhsuk-card--clickable",e==="secondary"&&"nhsuk-card--secondary",e==="feature"&&"nhsuk-card--feature",d.className].filter(Boolean).join(" "),g=["nhsuk-card__content",e==="feature"&&"nhsuk-card__content--feature",e==="primary"&&"nhsuk-card__content--primary",e==="secondary"&&"nhsuk-card__content--secondary"].filter(Boolean).join(" "),b=["nhsuk-card__heading",e==="feature"&&"nhsuk-card__heading--feature",i].filter(Boolean).join(" "),h=()=>{if(n)return o.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const S=()=>l&&e!=="feature"?o.jsx("a",{className:"nhsuk-card__link",href:l,children:t}):t;return o.jsx(cn,{level:r,className:b,children:S()})},m=()=>d.children?d.children:s?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):a?o.jsx("p",{className:"nhsuk-card__description",children:a}):null,y=()=>e!=="primary"?null:o.jsxs("svg",{className:"nhsuk-icon",xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27","aria-hidden":"true",focusable:"false",children:[o.jsx("circle",{cx:"13.333",cy:"13.333",r:"13.333",fill:""}),o.jsxs("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2.667",children:[o.jsx("path",{d:"M15.438 13l-3.771 3.771"}),o.jsx("path",{d:"M11.667 9.229L15.438 13"})]})]});return o.jsxs("div",{...d,className:p,ref:f,children:[u&&o.jsx("img",{className:"nhsuk-card__img",src:u,alt:c||""}),o.jsxs("div",{className:g,children:[h(),m(),y()]})]})});Io.displayName="Card";const o_=({className:e,children:t,"data-testid":n,id:r})=>{const i=["nhsuk-card-group",e].filter(Boolean).join(" ");return o.jsx("ul",{className:i,"data-testid":n,id:r,children:t})},l_=({className:e,children:t,"data-testid":n})=>{const r=["nhsuk-card-group__item",e].filter(Boolean).join(" ");return o.jsx("li",{className:r,"data-testid":n,children:t})},c_=({type:e,heading:t,headingHtml:n,headingLevel:r=3,headingClasses:i,description:a,descriptionHtml:s,className:l,children:u,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":p,"aria-describedby":g})=>{const b=["nhsuk-care-card",`nhsuk-care-card--${e}`,l].filter(Boolean).join(" "),h=["nhsuk-care-card__heading",i].filter(Boolean).join(" "),m=()=>{if(n)return o.jsx("div",{dangerouslySetInnerHTML:{__html:n}});if(!t)return null;const S={"non-urgent":"Non-urgent advice:",urgent:"Urgent advice:",emergency:"Immediate action required:"}[e],M=o.jsxs("span",{role:"text",children:[o.jsxs("span",{className:"nhsuk-u-visually-hidden",children:[S," "]}),t]});return o.jsx(cn,{level:r,className:h,children:M})},y=()=>u||(s?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):a?o.jsx("p",{className:"nhsuk-care-card__text",children:a}):null);return o.jsxs("div",{className:b,"data-testid":c,id:d,"aria-label":f,"aria-labelledby":p,"aria-describedby":g,children:[o.jsxs("div",{className:"nhsuk-care-card__heading-container",children:[m(),o.jsx("span",{className:"nhsuk-care-card__arrow","aria-hidden":"true"})]}),o.jsx("div",{className:"nhsuk-care-card__content",children:y()})]})},ud=({id:e,className:t,headingText:n,headingHtml:r,headingLevel:i=2,bodyText:a,bodyHtml:s,children:l,...u})=>{const c=we("nhsuk-panel",t),d=()=>!n&&!r&&!l?null:r?o.jsx(cn,{level:i,className:"nhsuk-panel__heading",html:r,marginBottom:"var(--panel-heading-margin, 24px)"}):n?o.jsx(cn,{level:i,className:"nhsuk-panel__heading",text:n,marginBottom:"var(--panel-heading-margin, 24px)"}):null,f=()=>l?o.jsx("div",{className:"nhsuk-panel__body",children:l}):s?o.jsx("div",{className:"nhsuk-panel__body",dangerouslySetInnerHTML:{__html:s}}):a?o.jsx("div",{className:"nhsuk-panel__body",children:o.jsx("p",{children:a})}):null;return o.jsxs("div",{className:c,id:e,...u,children:[d(),f()]})},u_=({text:e,html:t,children:n,className:r,...i})=>{const a=we("nhsuk-inset-text",r),s=()=>n||(t?o.jsx("div",{dangerouslySetInnerHTML:{__html:t}}):e?o.jsx("p",{children:e}):null);return o.jsx("div",{className:a,...i,children:s()})},d_=({items:e,noBorder:t=!1,className:n,...r})=>{const i=we("nhsuk-summary-list",{"nhsuk-summary-list--no-border":t},n),a=l=>l.children?l.children:l.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:l.html}}):l.text?l.text:null,s=l=>!l||!l.items.length?null:o.jsx("dd",{className:"nhsuk-summary-list__actions",children:o.jsx("ul",{className:"nhsuk-summary-list__actions-list",children:l.items.map((u,c)=>o.jsx("li",{className:"nhsuk-summary-list__actions-list-item",children:o.jsxs("a",{href:u.href,className:"nhsuk-link",...u.attributes,children:[a(u),u.visuallyHiddenText&&o.jsx("span",{className:"nhsuk-u-visually-hidden",children:u.visuallyHiddenText})]})},c))})});return o.jsx("div",{className:"nhsuk-summary-list-container",children:o.jsx("dl",{className:i,...r,children:e.map((l,u)=>o.jsxs("div",{className:"nhsuk-summary-list__row",children:[o.jsx("dt",{className:"nhsuk-summary-list__key",children:a(l.key)}),o.jsx("dd",{className:"nhsuk-summary-list__value",children:a(l.value)}),s(l.actions)]},u))})})},Ni={current:null},f_=()=>{if(Ni.current)return Ni.current;try{Ni.current=require("prismjs");try{require("prismjs/components/prism-typescript")}catch{}try{require("prismjs/components/prism-tsx")}catch{}try{require("prismjs/components/prism-json")}catch{}}catch{Ni.current=null}return Ni.current},h_=e=>{const t=[{regex:/\b(import|from|export|const|let|var|return|if|else|for|while|switch|case|break|new|throw|try|catch|finally|class|extends|implements|interface|type|as|async|await|function)\b/g,cls:"kw"},{regex:/(['"`])(?:\\.|(?!\1).)*\1/g,cls:"str"},{regex:/\/\*[^]*?\*\/|\/\/.*$/gm,cls:"com"},{regex:/\b([0-9]+(?:\.[0-9]+)?)\b/g,cls:"num"}];let n=e;return t.forEach(r=>{n=n.replace(r.regex,i=>`<span class="nhsuk-code-${r.cls}">${i}</span>`)}),n},qa=(e,t,n)=>{if(n||!t)return e;const r=f_();if(r&&r.languages){const i=r.languages[t]?t:r.languages.typescript&&(t==="ts"||t==="tsx"||t==="typescript")?"typescript":r.languages.json&&t==="json"?"json":void 0;if(i)try{return r.highlight(e,r.languages[i],i)}catch{}}return h_(e)},p_=({rows:e,head:t,caption:n,captionSize:r,firstCellIsHeader:i=!1,responsive:a=!1,heading:s,headingLevel:l=3,panel:u=!1,panelClasses:c,tableClasses:d,classes:f,attributes:p,"data-testid":g,columns:b,data:h,visuallyHiddenCaption:m=!1})=>{const y=`nhsuk-table__caption ${r?`nhsuk-table__caption--${r}`:""}`.trim(),S=we("nhsuk-table",{"nhsuk-table-responsive":a},d),M=we(f),w=(x,I)=>{const j=we("nhsuk-table__header",{[`nhsuk-table__header--${x.format}`]:x.format},x.classes),C={scope:"col",...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...a&&{role:"columnheader"},...x.attributes};let $;if(x.node!=null)$=o.jsx(o.Fragment,{children:x.node});else if(x.html)$=o.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const T=Array.isArray(x.code),F=T?x.code.join(`
`):x.code,P=T||F.includes(`
`),L={className:we("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":P,"nhsuk-table__code--inline":!P}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},te=qa(F,x.codeLanguage);$=P?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...L,dangerouslySetInnerHTML:{__html:te}})}):o.jsx("code",{...L,dangerouslySetInnerHTML:{__html:te}})}else $=x.text;return o.jsx("th",{className:j,...C,children:$},I)},v=(x,I,j)=>{const C=i&&j||x.rowHeader,$=we(C?"nhsuk-table__header":"nhsuk-table__cell",{[`nhsuk-table__${C?"header":"cell"}--${x.format}`]:x.format},x.classes),T={...C&&{scope:"row"},...x.colspan&&{colSpan:x.colspan},...x.rowspan&&{rowSpan:x.rowspan},...a&&{role:C?"rowheader":"cell",...x.header&&{"data-label":x.header}},...x.attributes};let F;if(x.node!=null)F=o.jsx(o.Fragment,{children:x.node});else if(x.html)F=o.jsx("span",{dangerouslySetInnerHTML:{__html:x.html}});else if(x.code!=null){const te=Array.isArray(x.code),Y=te?x.code.join(`
`):x.code,O=te||Y.includes(`
`),H={className:we("nhsuk-table__code",x.codeClassName,{"nhsuk-table__code--block":O,"nhsuk-table__code--inline":!O}),...x.codeLanguage?{"data-language":x.codeLanguage}:{}},z=qa(Y,x.codeLanguage,x.disableHighlight);F=O?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...H,dangerouslySetInnerHTML:{__html:z}})}):o.jsx("code",{...H,dangerouslySetInnerHTML:{__html:z}})}else F=x.text;const P=o.jsxs(o.Fragment,{children:[a&&x.header&&o.jsxs("span",{className:"nhsuk-table-responsive__heading","aria-hidden":"true",children:[x.header," "]}),F]}),L=C?"th":"td";return o.jsx(L,{className:$,...T,children:P},I)};let D=t,N=e;!D&&b&&b.length&&(D=b.map(x=>({text:x.title,format:x.format,classes:x.headerClasses,attributes:x.headerAttributes}))),!N&&b&&h&&h.length&&(N=h.map((x,I)=>b.map(j=>{const C=j.accessor?j.accessor(x,I):x[j.key];let $={format:j.format,classes:j.cellClasses,attributes:j.cellAttributes};if(j.rowHeader&&($.rowHeader=!0),j.render){const T=j.render(C,x,I,j);return T==null||typeof T=="boolean"?{...$,text:""}:typeof T=="string"||typeof T=="number"?{...$,text:String(T)}:{...$,...T}}return{...$,text:C!=null?String(C):""}})));const k=()=>o.jsxs("table",{className:S,...a&&{role:"table"},...p,...g&&{"data-testid":g},children:[n&&o.jsx("caption",{className:we(y,m&&"nhsuk-u-visually-hidden"),children:n}),D&&D.length>0&&o.jsx("thead",{className:"nhsuk-table__head",...a&&{role:"rowgroup"},children:o.jsx("tr",{...a&&{role:"row"},children:D.map((x,I)=>w(x,I))})}),o.jsx("tbody",{className:"nhsuk-table__body",children:N&&N.map((x,I)=>o.jsx("tr",{className:"nhsuk-table__row",...a&&{role:"row"},children:x.map((j,C)=>v(j,C,C===0))},I))})]});return u?o.jsxs(ud,{className:c,children:[s&&o.jsx(cn,{level:l,className:"nhsuk-table__heading-tab",children:s}),k()]}):M?o.jsx("div",{className:M,children:k()}):k()},m_=({children:e,size:t,className:n})=>{const r=we("nhsuk-table__caption",t&&`nhsuk-table__caption--${t}`,n);return o.jsx("caption",{className:r,children:e})},dd=({responsive:e,className:t,children:n,...r})=>{const i=e?{role:"row"}:{};return o.jsx("tr",{className:t,...i,...r,children:n})},fd=({text:e,html:t,node:n,code:r,codeLanguage:i,codeClassName:a,disableHighlight:s,format:l,classes:u,colspan:c,rowspan:d,attributes:f,responsive:p,as:g="th"})=>{const b=we("nhsuk-table__header",{[`nhsuk-table__header--${l}`]:l},u),h={scope:"col",...c&&{colSpan:c},...d&&{rowSpan:d},...p&&{role:"columnheader"},...f};let m;if(n!=null)m=o.jsx(o.Fragment,{children:n});else if(t)m=o.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const S=Array.isArray(r),M=S?r.join(`
`):r,w=S||M.includes(`
`),v={className:we("nhsuk-table__code",a,{"nhsuk-table__code--block":w,"nhsuk-table__code--inline":!w}),...i?{"data-language":i}:{}},D=qa(M,i,s);m=w?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...v,dangerouslySetInnerHTML:{__html:D}})}):o.jsx("code",{...v,dangerouslySetInnerHTML:{__html:D}})}else m=e;const y=g;return o.jsx(y,{className:b,...h,children:m})},g_=({text:e,html:t,node:n,code:r,codeLanguage:i,codeClassName:a,disableHighlight:s,format:l,classes:u,colspan:c,rowspan:d,attributes:f,responsive:p,rowHeader:g})=>{const b=!!g,h=b?"th":"td",m=we(b?"nhsuk-table__header":"nhsuk-table__cell",l&&`nhsuk-table__${b?"header":"cell"}--${l}`,u),y={...c&&{colSpan:c},...d&&{rowSpan:d},...b&&{scope:"row"},...p&&{role:b?"rowheader":"cell"},...f};let S;if(n!=null)S=o.jsx(o.Fragment,{children:n});else if(t)S=o.jsx("span",{dangerouslySetInnerHTML:{__html:t}});else if(r!=null){const M=Array.isArray(r),w=M?r.join(`
`):r,v=M||w.includes(`
`),D={className:we("nhsuk-table__code",a,{"nhsuk-table__code--block":v,"nhsuk-table__code--inline":!v}),...i?{"data-language":i}:{}},N=qa(w,i,s);S=v?o.jsx("pre",{className:"nhsuk-table__pre",children:o.jsx("code",{...D,dangerouslySetInnerHTML:{__html:N}})}):o.jsx("code",{...D,dangerouslySetInnerHTML:{__html:N}})}else S=e;return o.jsx(h,{className:m,...y,children:S})},dn=p_;dn.Caption=m_,dn.BodyRow=dd,dn.HeaderCell=fd,dn.Cell=g_;let hd=!1,pd=!1;Object.defineProperty(dn,"Row",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!hd&&(console.warn("Table.Row is deprecated. Use Table.BodyRow instead."),hd=!0),dd}}),Object.defineProperty(dn,"TH",{configurable:!0,enumerable:!1,get(){return process.env.NODE_ENV!=="production"&&!pd&&(console.warn("Table.TH is deprecated. Use Table.HeaderCell instead."),pd=!0),fd}});const b_=B.forwardRef(({items:e,defaultActiveTab:t,activeTab:n,onTabChange:r,onTabFocus:i,onTabListBlur:a,onEscape:s,autoActivate:l=!0,className:u,id:c,"data-testid":d,...f},p)=>{const g=n!==void 0,[b,h]=B.useState(()=>t||e[0]?.id||""),m=g?n:b,y=B.useRef(null),S=B.useRef(new Map),M=B.useCallback(I=>{g||h(I),r?.(I)},[g,r]),w=B.useCallback(I=>{i?.(I),l&&M(I)},[i,l,M]),v=B.useCallback((I,j)=>{const C=e.filter(F=>!F.disabled).map(F=>F.id),$=C.indexOf(j);let T=null;switch(I.key){case"ArrowLeft":T=$>0?$-1:C.length-1;break;case"ArrowRight":T=$<C.length-1?$+1:0;break;case"Home":T=0;break;case"End":T=C.length-1;break;case"Escape":I.preventDefault(),s?.();return;default:return}if(T!==null){I.preventDefault();const F=C[T],P=S.current.get(F);P&&(P.focus(),w(F))}},[e,w,s]),D=B.useCallback((I,j)=>{j?S.current.set(I,j):S.current.delete(I)},[]),N=B.useCallback(I=>{const j=S.current.get(I);j&&j.focus()},[]);B.useImperativeHandle(p,()=>({focusTab:N,getActiveTab:()=>m,getTabListElement:()=>y.current}),[N,m]);const k=B.useCallback(I=>{const j=I.relatedTarget;y.current?.contains(j)||a?.()},[a]),x=we("nhsuk-tabs",u);return o.jsxs("div",{className:x,id:c,"data-testid":d,...f,children:[o.jsx("h2",{className:"nhsuk-tabs__title",children:"Contents"}),o.jsx("div",{className:"nhsuk-tabs__list-container",ref:y,children:o.jsx("ul",{className:"nhsuk-tabs__list",role:"tablist",onBlur:k,children:e.map(I=>{const j=I.id===m,C=I.disabled,$=we("nhsuk-tabs__list-item",{"nhsuk-tabs__list-item--selected":j,"nhsuk-tabs__list-item--disabled":C});return o.jsx("li",{className:$,role:"presentation",children:o.jsx("button",{ref:T=>D(I.id,T),className:"nhsuk-tabs__tab",role:"tab","aria-selected":j,"aria-controls":`${I.id}-panel`,id:`${I.id}-tab`,tabIndex:j?0:-1,disabled:C,onClick:()=>!C&&M(I.id),onKeyDown:T=>!C&&v(T,I.id),onFocus:()=>!C&&w(I.id),...I.attributes,children:I.label})},I.id)})})}),e.map(I=>{const j=I.id===m;return o.jsx("div",{className:"nhsuk-tabs__panel",role:"tabpanel","aria-labelledby":`${I.id}-tab`,id:`${I.id}-panel`,hidden:!j,children:I.content},I.id)})]})}),md=B.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:i=!1,className:a="",id:s,children:l,...u},c)=>{const d=["nhsuk-details",a].filter(Boolean).join(" "),f=t?o.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):o.jsx("span",{className:"nhsuk-details__summary-text",children:e});let p;return l?p=l:r?p=o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),o.jsxs("details",{ref:c,id:s,className:d,open:i,...u,children:[o.jsx("summary",{className:"nhsuk-details__summary",tabIndex:0,children:f}),o.jsx("div",{className:"nhsuk-details__text",children:p})]})});md.displayName="Details";const gd=B.forwardRef(({title:e,type:t,items:n,hidePrefix:r=!1,headingLevel:i=3,className:a,...s},l)=>{const u=["nhsuk-do-dont-list"];a&&u.push(a);const c=["nhsuk-list",t==="tick"?"nhsuk-list--tick":"nhsuk-list--cross"],d=()=>t==="cross"?o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"34",height:"34",children:[o.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),o.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]}):o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"34",height:"34",children:o.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})}),f=g=>t==="cross"&&!r?`do not ${g}`:g,p=()=>o.jsx(cn,{level:i,className:"nhsuk-do-dont-list__label",text:e});return o.jsxs("div",{ref:l,className:u.join(" "),...s,children:[p(),o.jsx("div",{className:"nhsuk-do-dont-list__content--feature",children:o.jsx("ul",{className:c.join(" "),role:"list",children:n.map((g,b)=>o.jsxs("li",{children:[d(),f(g.item)]},b))})})]})});gd.displayName="DoDontList";const bd=B.forwardRef(({summaryText:e,summaryHtml:t,text:n,html:r,open:i=!1,className:a="",id:s,children:l,...u},c)=>{const d=["nhsuk-expander",a].filter(Boolean).join(" "),f=t?o.jsx("span",{className:"nhsuk-details__summary-text",dangerouslySetInnerHTML:{__html:t}}):o.jsx("span",{className:"nhsuk-details__summary-text",children:e});let p;return l?p=l:r?p=o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n&&(p=n),o.jsxs("details",{ref:c,id:s,className:d,open:i,...u,children:[o.jsx("summary",{className:"nhsuk-details__summary",children:f}),o.jsx("div",{className:"nhsuk-details__text",children:p})]})});bd.displayName="Expander";const yd=B.forwardRef(({items:e,idPrefix:t="task-list",className:n,...r},i)=>{const a=["nhsuk-task-list",n].filter(Boolean).join(" "),s=(l,u)=>{const c=u+1,d=`${t}-${c}-hint`,f=`${t}-${c}-status`,p=!!l.href,g=["nhsuk-task-list__item",p&&"nhsuk-task-list__item--with-link",l.classes].filter(Boolean).join(" "),b=[l.hint&&d,f].filter(Boolean).join(" ");return o.jsx(y_,{item:l,itemClasses:g,hasLink:p,hintId:d,statusId:f,ariaDescribedBy:b},u)};return o.jsx("ul",{ref:i,className:a,...r,children:e.map(s)})}),y_=({item:e,itemClasses:t,hasLink:n,hintId:r,statusId:i,ariaDescribedBy:a})=>{const s=()=>{const c=e.title.html?o.jsx("span",{dangerouslySetInnerHTML:{__html:e.title.html}}):e.title.text,d=[n?"nhsuk-task-list__link":"",e.title.classes].filter(Boolean).join(" ");return n?o.jsx("a",{className:d,href:e.href,"aria-describedby":a,children:c}):o.jsx("div",{className:e.title.classes||"",children:c})},l=()=>e.hint?e.hint.html?o.jsx("div",{id:r,className:"nhsuk-task-list__hint",dangerouslySetInnerHTML:{__html:e.hint.html}}):o.jsx("div",{id:r,className:"nhsuk-task-list__hint",children:e.hint.text}):null,u=()=>{const c=["nhsuk-task-list__status",e.status.classes].filter(Boolean).join(" ");let d;return e.status.tag?d=o.jsx(Ye,{...e.status.tag}):e.status.html?d=o.jsx("span",{dangerouslySetInnerHTML:{__html:e.status.html}}):d=e.status.text,o.jsx("div",{className:c,id:i,children:d})};return o.jsxs("li",{className:t,children:[o.jsxs("div",{className:"nhsuk-task-list__name-and-hint",children:[s(),l()]}),u()]})};yd.displayName="TaskList";const v_=({heading:e,headingLevel:t=3,text:n,html:r,children:i,className:a,...s})=>{const l=/important/i.test(e),u=()=>i||(r?o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n?o.jsx("p",{children:n}):null),c=["nhsuk-warning-callout",a].filter(Boolean).join(" "),d=`h${t}`;return o.jsxs("div",{className:c,...s,children:[B.createElement(d,{className:"nhsuk-warning-callout__label"},l?o.jsxs(o.Fragment,{children:[e,o.jsx("span",{className:"nhsuk-u-visually-hidden",children:":"})]}):o.jsxs("span",{role:"text",children:[o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Important: "}),e]})),u()]})},__=({src:e,alt:t,caption:n,sizes:r,srcset:i,className:a,...s})=>{const l=["nhsuk-image",a].filter(Boolean).join(" ");return o.jsxs("figure",{className:l,...s,children:[o.jsx("img",{className:"nhsuk-image__img",src:e,alt:t,...r&&i?{sizes:r,srcSet:i}:{}}),n&&o.jsx("figcaption",{className:"nhsuk-image__caption",dangerouslySetInnerHTML:{__html:n}})]})},x_=({dateRange:e,onPrev:t,onNext:n,onToday:r,density:i,onDensityChange:a,a11yMode:s,onA11yModeChange:l})=>o.jsxs("div",{className:"nhs-slot-matrix__toolbar",role:"group","aria-label":"Slot matrix controls",children:[o.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[o.jsx(yt,{variant:"secondary",size:"small",onClick:t,"aria-label":"Previous date range",children:"Prev"}),o.jsx(yt,{variant:"secondary",size:"small",onClick:r,"aria-label":"Jump to today",children:"Today"}),o.jsx(yt,{variant:"secondary",size:"small",onClick:n,"aria-label":"Next date range",children:"Next"}),o.jsxs("span",{className:"nhs-slot-matrix__toolbar-daterange","aria-live":"polite",children:[e.start.toDateString()," â€“ ",e.end.toDateString()]})]}),o.jsxs("div",{className:"nhs-slot-matrix__toolbar-section",children:[o.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-density-select",children:"Density"}),o.jsx(bi,{id:"slot-matrix-density-select",name:"slot-matrix-density",ariaLabel:"Change density",value:i,onChange:u=>a?.(u.target.value),options:[{value:"comfortable",text:"Comfortable"},{value:"compact",text:"Compact"}]}),o.jsx("label",{className:"nhs-slot-matrix__toolbar-label",htmlFor:"slot-matrix-mode-select",children:"Mode"}),o.jsx(bi,{id:"slot-matrix-mode-select",name:"slot-matrix-mode",ariaLabel:"Change accessibility mode",value:s,onChange:u=>l?.(u.target.value),options:[{value:"grid",text:"Grid"},{value:"list",text:"List"}]})]})]}),w_=({items:e,orientation:t="horizontal"})=>o.jsx("div",{className:`nhs-slot-matrix__legend nhs-slot-matrix__legend--${t}`,role:"list","aria-label":"Slot legend",children:e.map(n=>o.jsx("div",{role:"listitem",className:"nhs-slot-matrix__legend-item",children:o.jsx(Ye,{color:S_(n.status),text:n.label})},n.status))});function S_(e){switch(e){case"available":return"green";case"full":return"grey";case"overbook":return"orange";case"held":return"yellow";case"blocked":return"grey";default:return"default"}}const C_=({slots:e,sessions:t,value:n,defaultValue:r,onChange:i,selectionMode:a="single",a11yMode:s,className:l,style:u,getSlotAriaLabel:c,toolbar:d,enableDefaultToolbar:f=!0,legendItems:p,enableDefaultLegend:g=!0,legendPlacement:b="bottom",onA11yModeChange:h})=>{const[m,y]=B.useState("grid"),S=s||m,[M,w]=B.useState(r||[]),v=n??M,D=B.useMemo(()=>{const T=new Set;return e.forEach(F=>T.add(new Date(F.start).getTime())),Array.from(T).sort((F,P)=>F-P)},[e]),N=B.useMemo(()=>{const T={};return e.forEach(F=>{const P=new Date(F.start).getTime();T[P]||(T[P]={});const L=F.capacity-F.booked-(F.held||0);T[P][F.sessionId]={slot:F,remaining:L}}),T},[e]),k=B.useCallback(T=>{if(a==="single"){const F=[T.id];n||w(F),i?.(F,{lastAction:"select"})}else{const F=v.includes(T.id),P=F?v.filter(L=>L!==T.id):[...v,T.id];n||w(P),i?.(P,{lastAction:F?"deselect":"select"})}},[a,v,n,i]),x=B.useMemo(()=>p||(g?Array.from(new Set(e.map(F=>F.status))).map(F=>({status:F,label:F.charAt(0).toUpperCase()+F.slice(1)})):void 0),[p,g,e]),I=x?o.jsx(w_,{items:x,orientation:b==="left"||b==="right"?"vertical":"horizontal"}):null,j=T=>{s||y(T),h?.(T)},C=d||(f?o.jsx(x_,{dateRange:{start:new Date,end:new Date},density:"comfortable",a11yMode:S,onA11yModeChange:j}):null),$=o.jsx("div",{style:u,className:we(l),children:o.jsx(Da,{className:we("nhs-slot-matrix-grid-wrapper"),children:o.jsx(Gn,{children:o.jsx($r,{width:Vn.Full,children:o.jsxs("div",{className:"nhs-slot-matrix",children:[C,b==="top"&&I,o.jsx("ul",{"aria-label":"Appointment slots list",children:e.map(T=>o.jsx("li",{children:o.jsxs("button",{type:"button",onClick:()=>k(T),"aria-pressed":v.includes(T.id),children:[ji(new Date(T.start))," â€“ ",ji(new Date(T.end))," (",T.status,")"]})},T.id))}),b==="bottom"&&I]})})})})});return S==="list"?$:o.jsx("div",{style:u,className:we(l),children:o.jsx(Da,{className:we("nhs-slot-matrix-grid-wrapper"),children:o.jsx(Gn,{children:o.jsx($r,{width:Vn.Full,children:o.jsxs("div",{className:"nhs-slot-matrix",children:[C,b==="top"&&I,o.jsxs("div",{role:"grid","aria-rowcount":D.length+1,"aria-colcount":t.length+1,children:[o.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[o.jsx("div",{role:"columnheader","aria-label":"Timebands",className:"nhs-slot-matrix__timeband-header"}),t.map(T=>o.jsx("div",{role:"columnheader","aria-label":`Session ${T.specialty}`,className:"nhs-slot-matrix__session-header",children:T.specialty},T.id))]}),D.map(T=>o.jsxs("div",{role:"row",className:"nhs-slot-matrix__row",children:[o.jsx("div",{role:"rowheader",className:"nhs-slot-matrix__timeband-header","aria-label":ji(new Date(T)),children:ji(new Date(T))}),t.map(F=>{const P=N[T]?.[F.id];if(!P)return o.jsx("div",{role:"gridcell",className:"nhs-slot-matrix__cell","aria-disabled":"true"},F.id);const{slot:L,remaining:te}=P,Y=v.includes(L.id),O=c?c(L):`Slot ${ji(new Date(L.start))} ${L.status}${te===0?" full":""}`;return o.jsx("button",{type:"button",role:"gridcell","data-status":L.status,className:we("nhs-slot-matrix__cell",Y&&"nhs-slot-matrix__cell--selected"),"aria-label":O,"aria-selected":Y||void 0,onClick:()=>k(L),children:te>0?`${te} left`:"Full"},L.id)})]},T))]}),b==="bottom"&&I]})})})})})};function vd(e){return e<10?`0${e}`:`${e}`}function ji(e){return`${vd(e.getHours())}:${vd(e.getMinutes())}`}const _d=({title:e,value:t,subtitle:n,variant:r="default",href:i,className:a="",ariaLabel:s,...l})=>{const u=["nhs-fdp-summary-card",`nhs-fdp-summary-card--${r}`,a].filter(Boolean).join(" "),c=o.jsxs(o.Fragment,{children:[o.jsx(cn,{level:3,className:"nhs-fdp-summary-card__title",children:e}),o.jsx("p",{className:"nhs-fdp-summary-card__value",children:t}),n&&o.jsx("p",{className:"nhs-fdp-summary-card__subtitle",children:n})]});return i?o.jsx("a",{className:`${u} nhs-fdp-summary-card--clickable`,href:i,"aria-label":s||`${e}: ${t}`,...l,children:c}):o.jsx("div",{className:u,"aria-label":s,...l,children:c})},k_=({cards:e,className:t="",...n})=>{const r=["nhs-fdp-dashboard-summary-grid",t].filter(Boolean).join(" ");return o.jsx("div",{className:r,...n,children:o.jsx(Da,{children:o.jsx(Gn,{children:e.map((i,a)=>o.jsx($r,{width:Vn.OneQuarter,className:"nhs-fdp-dashboard-summary-grid__column","data-card-index":a,children:o.jsx(_d,{...i})},a))})})})},xd=B.forwardRef(({data:e,columns:t,sortConfig:n,onSort:r,selectedRowIndex:i,onRowSelect:a,id:s,testId:l,ariaLabel:u,ariaLabelledby:c,ariaDescribedby:d,className:f,tableClassName:p,bordered:g=!1,striped:b=!1,responsive:h=!1,tableType:m="default"},y)=>{const S=B.useRef(null),M=B.useRef(null),w=B.useRef(null);B.useImperativeHandle(y,()=>S.current,[]);const[v,D]=B.useState(0),[N,k]=B.useState(0),[x,I]=B.useState("headers"),[j,C]=B.useState("browse"),$=t.length,T=e.length,F=B.useMemo(()=>!n||n.length===0?e:[...e].sort((z,ie)=>{for(const{key:V,direction:ce}of n){const Ce=z[V],he=ie[V];if(Ce==null&&he==null)continue;if(Ce==null)return 1;if(he==null)return-1;let pe=0;if(typeof Ce=="number"&&typeof he=="number"?pe=Ce-he:pe=String(Ce).localeCompare(String(he)),pe!==0)return ce==="asc"?pe:-pe}return 0}),[e,n]),P=B.useCallback((z,ie)=>{setTimeout(()=>{const V=S.current?.querySelector(`tbody tr:nth-child(${z+1}) td:nth-child(${ie+1})`);V&&(V.focus(),typeof V.scrollIntoView=="function"&&V.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),L=B.useCallback(z=>{setTimeout(()=>{const ie=S.current?.querySelector(`th:nth-child(${z+1})`);ie&&(ie.focus(),typeof ie.scrollIntoView=="function"&&ie.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},0)},[]),te=B.useCallback(z=>{r?.(z)},[r]),Y=B.useCallback(z=>{a?.(z)},[a]),O=B.useCallback(z=>{const{key:ie}=z;switch(ie){case"Enter":if(z.preventDefault(),x==="headers"&&j==="browse")C("navigate"),L(N);else if(x==="headers"&&j==="navigate"){const V=t[N];V&&te(V.key)}else x==="cells"&&j==="browse"?(C("navigate"),P(v,N)):x==="cells"&&j==="navigate"&&Y(v);break;case"Escape":z.preventDefault(),(x==="headers"&&j==="navigate"||x==="cells"&&j==="navigate")&&C("browse");break;case"ArrowLeft":if(z.preventDefault(),j==="navigate"||j==="browse"&&x==="headers"){if(x==="headers"){const V=Math.max(0,N-1);k(V),L(V)}else if(x==="cells"){const V=Math.max(0,N-1);k(V),P(v,V)}}break;case"ArrowRight":if(z.preventDefault(),j==="navigate"||j==="browse"&&x==="headers"){if(x==="headers"){const V=Math.min($-1,N+1);k(V),L(V)}else if(x==="cells"){const V=Math.min($-1,N+1);k(V),P(v,V)}}break;case"ArrowUp":if(z.preventDefault(),x==="cells"){if(j==="browse"){const V=Math.max(0,v-1);D(V),P(V,0),k(0)}else if(j==="navigate")if(v>0){const V=v-1;D(V),P(V,N)}else I("headers"),C("browse"),L(N)}break;case"ArrowDown":if(z.preventDefault(),x==="headers"&&j==="browse")I("cells"),D(0),k(0),P(0,0);else if(x==="cells"){const V=T-1;if(j==="browse"){const ce=Math.min(V,v+1);D(ce),P(ce,0),k(0)}else if(j==="navigate"&&v<V){const ce=v+1;D(ce),P(ce,N)}}break;case"Home":z.preventDefault(),x==="headers"?(k(0),L(0)):x==="cells"&&(z.ctrlKey?(D(0),k(0),P(0,0)):(k(0),P(v,0)));break;case"End":if(z.preventDefault(),x==="headers"){const V=$-1;k(V),L(V)}else if(x==="cells")if(z.ctrlKey){const V=T-1,ce=$-1;D(V),k(ce),P(V,ce)}else{const V=$-1;k(V),P(v,V)}break;case" ":if(z.preventDefault(),x==="headers"&&j==="navigate"){const V=t[N];V&&te(V.key)}else x==="cells"&&j==="navigate"&&Y(v);break}},[x,j,N,v,$,T,t,P,L,te,Y]);B.useEffect(()=>{const z=S.current;if(z)return z.addEventListener("keydown",O),()=>z.removeEventListener("keydown",O)},[O]);const H=we("nhsuk-table",p,{"nhsuk-table--responsive":h,"nhsuk-table--bordered":g,"nhsuk-table--striped":b,"nhsuk-table--compact":m==="compact"},f);return o.jsxs("table",{ref:S,className:H,id:s,"data-testid":l,role:"grid","aria-label":u,"aria-labelledby":c,"aria-describedby":d,tabIndex:0,children:[o.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:o.jsx("tr",{ref:M,role:"row",children:t.map((z,ie)=>{const V=n?.find(he=>he.key===z.key),ce=!!V,Ce=x==="headers"&&N===ie;return o.jsx("th",{className:we("sortable-header",{"sortable-header--focused":Ce}),role:"columnheader",tabIndex:Ce?0:-1,onClick:()=>te(z.key),onKeyDown:he=>{(he.key==="Enter"||he.key===" ")&&(he.preventDefault(),te(z.key))},"aria-sort":ce?V?.direction==="asc"?"ascending":"descending":"none",children:o.jsxs("div",{className:"header-content",children:[o.jsx("span",{className:"header-label",children:z.label}),ce&&o.jsxs("span",{className:"sort-indicator","aria-hidden":"true",children:[n&&n.length>1&&o.jsx("span",{className:"sort-priority",children:n.findIndex(he=>he.key===z.key)+1}),o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",className:"sort-arrow",children:V?.direction==="asc"?o.jsx("path",{d:"M6 2L2 8h8L6 2z"}):o.jsx("path",{d:"M6 10L2 4h8L6 10z"})})]})]})},z.key)})})}),o.jsx("tbody",{ref:w,className:"nhsuk-table__body",role:"rowgroup",children:F.map((z,ie)=>{const V=i===ie,ce=x==="cells"&&v===ie;return o.jsx("tr",{role:"row",className:we("data-row",{"data-row--selected":V,"data-row--focused":ce}),"aria-selected":V,children:t.map((Ce,he)=>{const pe=Ce.tableRenderer?Ce.tableRenderer(z):Ce.render?Ce.render(z):z[Ce.key],ee=x==="cells"&&v===ie&&N===he,ae=()=>typeof pe=="boolean"?o.jsxs(o.Fragment,{children:[o.jsx("span",{"aria-hidden":"true",children:pe?"âœ“":"âœ—"}),o.jsx("span",{className:"sr-only",children:pe?"Yes":"No"})]}):String(pe??"");return o.jsx("td",{role:"gridcell",className:we("data-cell",{"data-cell--focused":ee}),tabIndex:ee?0:-1,onClick:()=>Y(ie),children:ae()},Ce.key)})},ie)})})]})});xd.displayName="AriaDataGrid";const wd=({sortConfig:e,columns:t,onSortChange:n,className:r="",emptyDescription:i="No sorting applied",activeDescription:a,showReset:s=!0,showHelp:l=!0,disabled:u=!1,ariaLabel:c="Sort configuration",ariaDescribedBy:d})=>{const f=B.useRef(null),p=B.useRef(null),g=B.useRef(null),b=B.useCallback((x,I)=>{u||(p.current=I,x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",I))},[u]),h=B.useCallback((x,I)=>{u||p.current===I||(x.preventDefault(),x.dataTransfer.dropEffect="move",g.current=I)},[u]),m=B.useCallback((x,I)=>{if(u)return;x.preventDefault();const j=p.current;if(!j||j===I)return;const C=e.findIndex(T=>T.key===j),$=e.findIndex(T=>T.key===I);if(C!==-1&&$!==-1){const T=[...e],[F]=T.splice(C,1);T.splice($,0,F),n(T)}p.current=null,g.current=null},[u,e,n]),y=B.useCallback(()=>{p.current=null,g.current=null},[]),S=B.useCallback(x=>{const I=t.find(j=>j.key===x);return I?I.label:x},[t]),M=B.useCallback(x=>["red","orange","blue","aqua-green","grey"][x]||"grey",[]),w=B.useCallback(x=>{if(u)return;const I=e.map(j=>j.key===x?{...j,direction:j.direction==="asc"?"desc":"asc"}:j);n(I)},[e,n,u]),v=B.useCallback(x=>{if(u)return;const I=e.filter(j=>j.key!==x);n(I)},[e,n,u]),D=B.useCallback(()=>{u||n([])},[n,u]),N=()=>{if(e.length===0)return i;if(a)return a;const x=e.map((I,j)=>{const C=I.direction==="asc"?"ascending":"descending";return`${j+1}. ${S(I.key)} (${C})`});if(x.length===1)return`Sorted by: ${x[0]}`;if(x.length===2)return`Sorted by: ${x.join(" and ")}`;{const I=x.pop();return`Sorted by: ${x.join(", ")}, and ${I}`}},k=B.useMemo(()=>{const x=["sort-description"];return l&&x.push("sort-help"),d&&x.push(d),x.join(" ")},[l,d]);return e.length===0?o.jsxs("div",{className:`sort-status-control ${r}`,children:[o.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:i}),l&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]}):o.jsxs("div",{className:`sort-status-control ${r}`,children:[o.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:N()}),o.jsxs("div",{className:"sort-status-container",children:[o.jsx("div",{ref:f,className:"sort-status-control__tags",role:"list","aria-label":c,"aria-describedby":k,children:e.map((x,I)=>o.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",draggable:!u,onDragStart:j=>b(j,x.key),onDragOver:j=>h(j,x.key),onDrop:j=>m(j,x.key),onDragEnd:y,onClick:()=>w(x.key),style:{cursor:u?"default":"pointer"},title:u?"":`Click to toggle sort direction. Currently ${x.direction==="asc"?"ascending":"descending"}`,"data-key":x.key,children:o.jsx(Ye,{color:M(I),className:"sort-status-control__tag",closable:!0,onClose:()=>v(x.key),disabled:u,children:o.jsxs("div",{className:"sort-status-control__tag-content",children:[o.jsx("div",{className:"sort-status-control__drag-handle",title:"Drag to reorder",children:"â‹®â‹®"}),o.jsx("div",{className:`sort-status-control__priority-badge sort-priority sort-priority--priority-${I+1}`,children:I+1}),o.jsx("span",{className:"sort-status-control__tag-label",children:S(x.key)}),o.jsx("button",{type:"button",className:"sort-status-control__direction-button",onClick:j=>{j.stopPropagation(),w(x.key)},disabled:u,"aria-label":`Toggle sort direction for ${S(x.key)}. Currently ${x.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:o.jsx("span",{className:`sort-status-control__direction-icon sort-status-control__direction-icon--${x.direction}`,children:o.jsx("svg",{className:`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${x.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})})})]})})},x.key))}),s&&o.jsx("div",{className:"sort-status-control__actions",children:o.jsx(yt,{variant:"secondary",onClick:D,disabled:u,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})})]}),l&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsx("small",{children:"Drag tags to reorder priority. Click tags or â†‘/â†“ buttons to toggle ascending/descending. Click Ã— to remove a sort."})})]})};function T_(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const i=[...e.selectedRows];return i[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:i};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:a}=t.payload,s=new Array(a).fill(!1),l=new Array(a).fill(null),u=new Array(a).fill([]);for(let c=0;c<Math.min(e.tabLoadingStates.length,a);c++)s[c]=e.tabLoadingStates[c],l[c]=e.tabErrors[c],u[c]=e.selectedRows[c];return{...e,tabLoadingStates:s,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}const Xa=B.forwardRef(function(t,n){const{dataConfig:r={},tabPanels:i,selectedIndex:a,onTabChange:s,onGlobalRowSelectionChange:l,ariaLabel:u,ariaDescription:c,className:d="",disabled:f=!1,orientation:p="horizontal",id:g,isLoading:b=!1,loadingComponent:h,error:m=null,errorComponent:y,"data-testid":S,actions:M,actionsMinGap:w=16,forceActionsAbove:v=!1}=t,N=B.useRef(g||`aria-tabs-datagrid-${Math.random().toString(36).slice(2,9)}`).current,k=typeof c=="string"&&c.trim()!==""&&!/\s/.test(c),x=`${N}-description`,I=`${N}-navigation-help`,{dataComparator:j=(E,X)=>JSON.stringify(E)===JSON.stringify(X),filterFunction:C=E=>E,booleanRenderer:$=E=>E?"âœ“":"âœ—"}=r||{},T=a!==void 0,F=a??0,[P,L]=B.useState({focusArea:"tabs",focusedTabIndex:F,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}),te=B.useMemo(()=>({selectedIndex:F,tabLoadingStates:new Array(i.length).fill(!1),tabErrors:new Array(i.length).fill(null),sortConfig:[],selectedRows:new Array(i.length).fill([]),globalSelectedRowData:null,filters:void 0}),[F]),[Y,O]=B.useReducer(T_,te);B.useEffect(()=>{const E=Y.tabLoadingStates.length,X=i.length;E!==X&&O({type:"ADJUST_ARRAYS",payload:{newLength:X}})},[i.length]),B.useEffect(()=>{T&&O({type:"SET_SELECTED_INDEX",payload:F})},[F,T]),B.useEffect(()=>{L(E=>({...E,focusArea:"tabs",focusedTabIndex:Y.selectedIndex,focusedHeaderIndex:0,focusedRowIndex:0,focusedColumnIndex:0,focusedActionIndex:0,isGridActive:!1}))},[Y.selectedIndex]),B.useEffect(()=>{l&&l(Y.globalSelectedRowData)},[Y.globalSelectedRowData,l]);const H=B.useCallback((E,X)=>j(E,X),[j]),z=B.useCallback(E=>{E>=0&&E<i.length&&!i[E].disabled&&(O({type:"SET_SELECTED_INDEX",payload:E}),L(X=>({...X,focusedTabIndex:E,focusArea:"tabs"})),s?.(E))},[i,s]),ie=B.useRef(!1),V=B.useCallback((E,X)=>{if(!X?.force&&!ie.current&&E===0){ie.current=!0;return}ie.current=!0,setTimeout(()=>{const ne=ce.current[E],re=ne?.parentElement;if(ne&&re){const Q=ne.offsetLeft,oe=ne.offsetWidth,be=re.clientWidth,_e=Q-be/2+oe/2;try{re.scrollTo({left:Math.max(0,_e),behavior:"smooth"})}catch{ne.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}}else process.env.SILENCE_SCROLL_DEBUG||console.debug("[AriaTabsDataGrid] Missing elements for scroll",{tabElementExists:!!ne,tabListElementExists:!!re})},50)},[]),ce=B.useRef([]),Ce=B.useRef([]),he=B.useCallback((E,X)=>{const ne=Y.sortConfig||[],re=ne.find(be=>be.key===X);let Q;re?re.direction==="asc"?Q=ne.map(be=>be.key===X?{...be,direction:"desc"}:be):Q=ne.filter(be=>be.key!==X):Q=[...ne,{key:X,direction:"asc"}],O({type:"SET_SORT",payload:Q}),i[E].onSort?.(X)},[Y.sortConfig,i]),pe=B.useCallback(E=>{setTimeout(()=>{const X=document.querySelector(`[data-tab-panel="${Y.selectedIndex}"] th:nth-child(${E+1})`);X&&X.focus()},0)},[Y.selectedIndex]),ee=B.useCallback(E=>$(E),[$]),ae=B.useCallback((E,X)=>{setTimeout(()=>{const ne=document.querySelector(`[data-tab-panel="${Y.selectedIndex}"] tbody tr:nth-child(${E+1}) td:nth-child(${X+1})`);ne&&ne.focus()},0)},[Y.selectedIndex]);B.useEffect(()=>{P.isGridActive&&(P.focusArea==="headers"?setTimeout(()=>{pe(P.focusedHeaderIndex)},0):P.focusArea==="cells"&&setTimeout(()=>{ae(P.focusedRowIndex,P.focusedColumnIndex)},0))},[P.focusArea,P.isGridActive,P.focusedHeaderIndex,P.focusedRowIndex,P.focusedColumnIndex,pe,ae]),B.useEffect(()=>{V(Y.selectedIndex)},[Y.selectedIndex,V]);const me=B.useCallback((E,X)=>{const{key:ne}=E,re=i[Y.selectedIndex],Q=re?.columns.length||0;switch(ne){case"ArrowLeft":E.preventDefault();const oe=Math.max(0,X-1);L(je=>({...je,focusedHeaderIndex:oe})),pe(oe);break;case"ArrowRight":E.preventDefault();const be=Math.min(Q-1,X+1);L(je=>({...je,focusedHeaderIndex:be})),pe(be);break;case"ArrowUp":E.preventDefault(),L(je=>({...je,focusArea:"tabs",focusedTabIndex:Y.selectedIndex})),V(Y.selectedIndex),ce.current[Y.selectedIndex]?.focus();break;case"ArrowDown":E.preventDefault(),L(je=>({...je,focusArea:"cells",focusedRowIndex:0,focusedColumnIndex:X,isGridActive:!0}));break;case"Home":E.preventDefault(),L(je=>({...je,focusedHeaderIndex:0})),pe(0);break;case"End":E.preventDefault();const _e=Q-1;L(je=>({...je,focusedHeaderIndex:_e})),pe(_e);break;case"Enter":case" ":E.preventDefault();const xe=re?.columns[X]?.key;xe&&he(Y.selectedIndex,xe);break}},[i,Y.selectedIndex,he,L,pe,ae,ce]),G=B.useCallback((E,X,ne)=>{const{key:re}=E,Q=i[Y.selectedIndex],oe=Q?.data.length||0,be=Q?.columns.length||0;switch(re){case"ArrowUp":if(E.preventDefault(),X===0)L(ye=>({...ye,focusArea:"headers",focusedHeaderIndex:ne,isGridActive:!1})),pe(ne);else{const ye=X-1;L(Le=>({...Le,focusedRowIndex:ye})),ae(ye,ne)}break;case"ArrowDown":E.preventDefault();const _e=Math.min(oe-1,X+1);L(ye=>({...ye,focusedRowIndex:_e})),ae(_e,ne);break;case"ArrowLeft":E.preventDefault();const xe=Math.max(0,ne-1);L(ye=>({...ye,focusedColumnIndex:xe})),ae(X,xe);break;case"ArrowRight":E.preventDefault();const je=Math.min(be-1,ne+1);L(ye=>({...ye,focusedColumnIndex:je})),ae(X,je);break;case"Home":E.preventDefault(),E.ctrlKey?(L(ye=>({...ye,focusedRowIndex:0,focusedColumnIndex:0})),ae(0,0)):(L(ye=>({...ye,focusedColumnIndex:0})),ae(X,0));break;case"End":if(E.preventDefault(),E.ctrlKey){const ye=oe-1,Le=be-1;L(Ve=>({...Ve,focusedRowIndex:ye,focusedColumnIndex:Le})),ae(ye,Le)}else{const ye=be-1;L(Le=>({...Le,focusedColumnIndex:ye})),ae(X,ye)}break;case"Enter":case" ":if(E.preventDefault(),Q&&Q.data[X]){const ye=Q.data.some(it=>"ews_data"in it)?C(Q.data,Y.filters):Q.data,Le=Y.sortConfig;let Ve=ye;if(Le&&Le.length>0&&(Ve=[...ye].sort((it,Ge)=>{for(const{key:St,direction:Dn}of Le){let jt=it[St],an=Ge[St];const pt=Q.columns.find(Xt=>Xt.key===St);if(pt?.tableRenderer?(jt=pt.tableRenderer(it),an=pt.tableRenderer(Ge)):pt?.render&&(jt=pt.render(it),an=pt.render(Ge)),jt==null&&an==null)continue;if(jt==null)return Dn==="asc"?-1:1;if(an==null)return Dn==="asc"?1:-1;let He=0;if(typeof jt=="number"&&typeof an=="number"?He=jt-an:He=String(jt).localeCompare(String(an),void 0,{numeric:!0,sensitivity:"base"}),He!==0)return Dn==="asc"?He:-He}return 0})),Ve[X]){const it=Ve[X],St=Y.globalSelectedRowData&&H(Y.globalSelectedRowData,it)?null:it;O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:St})}}break}},[i,Y.selectedIndex,Y.filters,Y.sortConfig,C,H,O,L,pe,ae]),de=B.useCallback((E,X)=>C(E,X),[C]);if(B.useImperativeHandle(n,()=>({selectTab:E=>{E>=0&&E<i.length&&(O({type:"SET_SELECTED_INDEX",payload:E}),s?.(E))},refreshData:E=>{console.log("Refreshing data for tab:",E??"all")},exportData:E=>{const X=E??Y.selectedIndex,ne=i[X];return ne?ne.data:[]},getSelectedRows:E=>Y.globalSelectedRowData?[]:[],clearSelection:E=>{O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:null})},applyFilters:E=>{O({type:"SET_FILTERS",payload:E})}}),[Y.selectedIndex,Y.selectedRows,i,s]),b)return o.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--loading ${d}`,"data-testid":S,children:h||o.jsx("div",{className:"aria-tabs-datagrid__loading",children:o.jsx("div",{className:"nhsuk-spinner",role:"status","aria-label":"Loading data",children:o.jsx("span",{className:"nhsuk-u-visually-hidden",children:"Loading..."})})})});if(m)return o.jsx("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--error ${d}`,"data-testid":S,children:y||o.jsxs("div",{className:"aria-tabs-datagrid__error",role:"alert",children:[o.jsx("h3",{className:"nhsuk-error-summary__title",children:"Error loading data"}),o.jsx("p",{children:m})]})});const A=B.useRef(null),R=B.useRef(null),Z=B.useRef(null),[le,ue]=B.useState(!0);B.useEffect(()=>{if(!M){ue(!1);return}if(v){ue(!1);return}function E(){if(!A.current||!R.current||!Z.current)return;const re=A.current.clientWidth,Q=Array.from(R.current.querySelectorAll(":scope > .aria-tabs-datagrid__tab")),oe=Q.reduce((je,ye)=>je+ye.offsetWidth,0),be=Z.current.offsetWidth,_e=Math.max(8*(Q.length-1),0),xe=oe+_e+be+w<=re;ue(xe)}const X=requestAnimationFrame(()=>E()),ne=new ResizeObserver(()=>E());return A.current&&ne.observe(A.current),R.current&&ne.observe(R.current),()=>{cancelAnimationFrame(X),ne.disconnect()}},[M,w,v,i.length]);const ge=Z,fe=B.useCallback(()=>ge.current?Array.from(ge.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(E=>!E.hasAttribute("disabled")):[],[]),U=B.useCallback(E=>{const X=fe();if(!X.length)return;const ne=Math.max(0,Math.min(E,X.length-1));X[ne].focus(),L(re=>({...re,focusArea:"actions",focusedActionIndex:ne}))},[fe]),W=B.useCallback(()=>U(0),[U]),K=B.useCallback((E,X)=>{const{key:ne}=E,re=i.length-1;switch(ne){case"ArrowUp":{M&&!le&&(E.preventDefault(),W());break}case"ArrowLeft":{E.preventDefault();const Q=X>0?X-1:re;z(Q),V(Q),ce.current[Q]?.focus();break}case"ArrowRight":{if(E.preventDefault(),X===re&&M&&le){W();return}const Q=X<re?X+1:0;z(Q),V(Q),ce.current[Q]?.focus();break}case"ArrowDown":{E.preventDefault(),L(Q=>({...Q,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));break}case"Home":{E.preventDefault(),z(0),V(0),ce.current[0]?.focus();break}case"End":{E.preventDefault(),z(re),V(re),ce.current[re]?.focus();break}case"Enter":case" ":{E.preventDefault(),z(X);break}case"Tab":{!E.shiftKey&&X===re&&M&&le&&W();break}}},[i.length,z,V,M,le,W]),J=B.useCallback(E=>{const{key:X}=E,ne=fe();if(!ne.length)return;const re=ne.findIndex(Q=>Q===document.activeElement);switch(X){case"ArrowLeft":{if(le)if(re>0)E.preventDefault(),U(re-1);else{E.preventDefault();const Q=i.length-1;z(Q),V(Q),ce.current[Q]?.focus(),L(oe=>({...oe,focusArea:"tabs",focusedTabIndex:Q}))}break}case"ArrowRight":{le&&(re<ne.length-1?(E.preventDefault(),U(re+1)):(E.preventDefault(),z(0),V(0),ce.current[0]?.focus(),L(Q=>({...Q,focusArea:"tabs",focusedTabIndex:0}))));break}case"ArrowDown":{if(le)E.preventDefault(),L(Q=>({...Q,focusArea:"headers",focusedHeaderIndex:0,isGridActive:!0}));else{E.preventDefault();const Q=Y.selectedIndex;ce.current[Q]?.focus(),L(oe=>({...oe,focusArea:"tabs",focusedTabIndex:Q}))}break}}},[fe,le,U,i.length,z,V,Y.selectedIndex]);return o.jsxs("div",{className:`aria-tabs-datagrid aria-tabs-datagrid--${p} ${d}`,id:g,"data-testid":S,ref:A,children:[c&&!k&&o.jsx("div",{id:x,className:"nhsuk-u-visually-hidden",children:c}),o.jsx("div",{className:"aria-tabs-datagrid__navigation-help sr-only",id:I,children:"Keyboard navigation: Use Tab to move between tabs and grid. Arrow keys navigate within tabs and grid cells. Enter activates tabs and sorts columns. Arrow Down from tabs moves to table headers. Arrow Down from headers moves to table cells. Use Arrow keys to navigate between cells."}),o.jsx(wd,{sortConfig:Y.sortConfig||[],columns:i.flatMap(E=>E.columns.map(X=>({key:X.key,label:X.label}))).filter((E,X,ne)=>ne.findIndex(re=>re.key===E.key)===X),onSortChange:E=>{O({type:"SET_SORT",payload:E})},ariaLabel:"Data grid sort configuration"}),M&&!le&&o.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above",ref:Z,role:"toolbar","aria-label":"Additional actions",onKeyDown:J,children:M}),o.jsxs("div",{className:`aria-tabs-datagrid__tabs-wrapper ${le?"aria-tabs-datagrid__tabs-wrapper--inline-actions":""}`,children:[o.jsx("div",{role:"tablist","aria-label":u,"aria-describedby":c?k?c:x:I,"aria-orientation":p,className:"aria-tabs-datagrid__tabs",ref:R,children:i.map((E,X)=>{const ne=X===Y.selectedIndex,re=E.disabled||f;return o.jsxs("button",{role:"tab",id:`tab-${E.id}`,"aria-controls":`panel-${E.id}`,"aria-selected":ne,"aria-disabled":re,tabIndex:ne?0:-1,ref:Q=>{ce.current[X]=Q},onClick:()=>z(X),onKeyDown:Q=>K(Q,X),disabled:re,className:["aria-tabs-datagrid__tab",ne?"aria-tabs-datagrid__tab--selected":"",re?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[o.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:E.label}),Y.tabLoadingStates[X]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),Y.tabErrors[X]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},E.id)})}),M&&le&&o.jsx("div",{className:"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline",ref:Z,role:"toolbar","aria-label":"Additional actions",onKeyDown:J,children:M})]}),i.map((E,X)=>{const ne=X===Y.selectedIndex;return o.jsx("div",{role:"tabpanel",id:`panel-${E.id}`,"aria-labelledby":`tab-${E.id}`,tabIndex:0,hidden:!ne,ref:re=>{Ce.current[X]=re},className:`aria-tabs-datagrid__panel ${E.className||""}`,"data-tab-panel":X,children:ne&&(()=>{const re=E.data.some(oe=>"ews_data"in oe)?de(E.data,Y.filters):E.data,Q=B.useMemo(()=>{const oe=Y.sortConfig;return!oe||oe.length===0?re:[...re].sort((be,_e)=>{for(const{key:xe,direction:je}of oe){let ye=be[xe],Le=_e[xe];const Ve=E.columns.find(Ge=>Ge.key===xe);if(Ve?.tableRenderer?(ye=Ve.tableRenderer(be),Le=Ve.tableRenderer(_e)):Ve?.render&&(ye=Ve.render(be),Le=Ve.render(_e)),ye==null&&Le==null)continue;if(ye==null)return 1;if(Le==null)return-1;let it=0;if(typeof ye=="number"&&typeof Le=="number"?it=ye-Le:typeof ye=="boolean"&&typeof Le=="boolean"?it=ye===Le?0:ye?1:-1:it=String(ye).localeCompare(String(Le),void 0,{numeric:!0,sensitivity:"base"}),it!==0)return je==="asc"?it:-it}return 0})},[re,Y.sortConfig,E.columns]);return o.jsxs("table",{className:"nhsuk-table aria-tabs-datagrid__grid",role:"grid","aria-label":E.ariaLabel,"aria-describedby":E.ariaDescription?`panel-${E.id}-description`:void 0,children:[E.ariaDescription&&o.jsx("caption",{className:"nhsuk-u-visually-hidden",id:`panel-${E.id}-description`,children:E.ariaDescription}),o.jsx("thead",{className:"nhsuk-table__head",role:"rowgroup",children:o.jsx("tr",{role:"row",children:E.columns.map((oe,be)=>{const _e=Y.sortConfig?.find(ye=>ye.key===oe.key),xe=!!_e,je=P.focusArea==="headers"&&P.focusedHeaderIndex===be;return o.jsx("th",{className:`sortable-header ${je?"sortable-header--focused":""} ${xe?"sortable-header--sorted":""}`,role:"columnheader",tabIndex:je?0:-1,onClick:()=>he(X,oe.key),onKeyDown:ye=>me(ye,be),"aria-sort":xe?_e?.direction==="asc"?"ascending":"descending":"none",children:o.jsxs("div",{className:"header-content",children:[o.jsx("span",{className:"header-label",children:oe.label}),o.jsxs("div",{className:`sort-indicator-container ${xe?`sort-indicator--${_e?.direction}`:""}`,children:[Y.sortConfig&&Y.sortConfig.length>0&&Y.sortConfig.findIndex(ye=>ye.key===oe.key)!==-1&&o.jsx("span",{className:`sort-priority sort-priority--priority-${Y.sortConfig.findIndex(ye=>ye.key===oe.key)+1}`,"data-priority":Y.sortConfig.findIndex(ye=>ye.key===oe.key)+1,title:`Sort priority: ${Y.sortConfig.findIndex(ye=>ye.key===oe.key)+1}`,children:Y.sortConfig.findIndex(ye=>ye.key===oe.key)+1}),xe&&o.jsx("svg",{className:`nhsuk-icon sort-arrow sort-arrow--${_e?.direction}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"})})]})]})},oe.key)})})}),o.jsx("tbody",{className:"nhsuk-table__body",role:"rowgroup",children:Q.map((oe,be)=>{const _e=Y.globalSelectedRowData&&H(Y.globalSelectedRowData,oe),xe=P.focusArea==="cells"&&P.focusedRowIndex===be;return o.jsx("tr",{role:"row",className:`data-row ${_e?"data-row--selected":""} ${xe?"data-row--focused":""}`,"aria-selected":_e,children:E.columns.map((je,ye)=>{const Le=oe[je.key];let Ve;je.tableRenderer?Ve=je.tableRenderer(oe):je.render?Ve=je.render(oe):Ve=Le;const it=P.focusArea==="cells"&&P.focusedRowIndex===be&&P.focusedColumnIndex===ye,Ge=()=>{if(je.customRenderer){const St=je.customRenderer(Le,oe);return o.jsx("span",{className:"data-cell__custom","data-custom-rendered":"true",children:St})}return typeof Le=="boolean"&&Ve===Le?o.jsxs(o.Fragment,{children:[ee(Le),o.jsx("span",{className:"nhsuk-u-visually-hidden",children:Le?"Yes":"No"})]}):B.isValidElement(Ve)||typeof Ve!="object"?Ve??"":Ve};return o.jsx("td",{role:"gridcell",className:`data-cell ${it?"data-cell--focused":""}`,tabIndex:it?0:-1,onClick:()=>{const Dn=Y.globalSelectedRowData&&H(Y.globalSelectedRowData,oe)?null:oe;O({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:Dn})},onKeyDown:St=>G(St,be,ye),children:Ge()},je.key)})},be)})})]})})()},E.id)})]})}),Ka={asc:"â†‘",desc:"â†“"},N_=e=>[...e].sort((t,n)=>t.priority-n.priority);function Po(e){return e.map((t,n)=>({...t,priority:n}))}function j_(e){return e.length>0?Math.max(...e.map(t=>t.priority)):-1}function D_(e,t){const n=t.find(r=>r.id===e);return n?n.priority>0:!1}function M_(e,t){const n=t.find(i=>i.id===e),r=j_(t);return n?n.priority<r:!1}const I_=({sortConfig:e,onSortChange:t,className:n="",emptyDescription:r="No sorting applied",activeDescription:i,showReset:a=!0,showHelp:s=!0,disabled:l=!1,ariaLabel:u="Sort configuration",ariaDescribedBy:c})=>{const d=B.useMemo(()=>N_(e),[e]),f=B.useCallback(S=>{if(l)return;const M=e.map(w=>w.id===S?{...w,direction:w.direction==="asc"?"desc":"asc"}:w);t(M)},[e,t,l]),p=B.useCallback(S=>{if(l)return;const M=e.findIndex(v=>v.id===S);if(M<=0)return;const w=[...e];[w[M],w[M-1]]=[w[M-1],w[M]],t(Po(w))},[e,t,l]),g=B.useCallback(S=>{if(l)return;const M=e.findIndex(v=>v.id===S);if(M>=e.length-1||M===-1)return;const w=[...e];[w[M],w[M+1]]=[w[M+1],w[M]],t(Po(w))},[e,t,l]),b=B.useCallback(S=>{if(l)return;const M=e.filter(w=>w.id!==S);t(Po(M))},[e,t,l]),h=B.useCallback(()=>{l||t([])},[t,l]),m=()=>{if(e.length===0)return r;if(i)return i;const S=d.map((M,w)=>{const v=M.direction==="asc"?"ascending":"descending";return`${w+1}. ${M.label} (${v})`});if(S.length===1)return`Sorted by: ${S[0]}`;if(S.length===2)return`Sorted by: ${S.join(" and ")}`;{const M=S.pop();return`Sorted by: ${S.join(", ")}, and ${M}`}},y=B.useMemo(()=>{const S=["sort-description"];return s&&S.push("sort-help"),c&&S.push(c),S.join(" ")},[s,c]);return e.length===0?o.jsx("div",{className:`sort-status-control sort-status-control--empty ${n}`,children:o.jsx("div",{className:"sort-status-control__description",id:"sort-description","aria-live":"polite",children:m()})}):o.jsxs("div",{className:`sort-status-control ${n}`,children:[o.jsx("div",{className:"sort-status-control__description sort-status-control__description--active",id:"sort-description","aria-live":"polite",children:m()}),o.jsxs("div",{className:"sort-status-control__tags",role:"list","aria-label":u,"aria-describedby":y,children:[o.jsx("div",{className:"sort-status-control__tags-label",children:"Current sorting:"}),d.map(S=>o.jsx("div",{className:"sort-status-control__tag-container",role:"listitem",children:o.jsx(Ye,{text:"",color:"blue",className:"sort-status-control__tag",closable:!0,onClose:()=>b(S.id),disabled:l,children:o.jsxs("div",{className:"sort-status-control__tag-content",children:[o.jsx("span",{className:"sort-status-control__tag-priority",children:S.priority+1}),o.jsx("span",{className:"sort-status-control__tag-label",children:S.label}),o.jsx("button",{type:"button",className:"sort-status-control__tag-direction",onClick:()=>f(S.id),disabled:l,"aria-label":`Toggle sort direction for ${S.label}. Currently ${S.direction==="asc"?"ascending":"descending"}`,title:"Click to toggle between ascending and descending",children:S.direction==="asc"?Ka.asc:Ka.desc}),o.jsxs("div",{className:"sort-status-control__tag-actions",children:[o.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>p(S.id),disabled:l||!D_(S.id,e),"aria-label":`Move ${S.label} sort up in priority`,title:"Move up in priority",children:"â–²"}),o.jsx("button",{type:"button",className:"sort-status-control__move-button",onClick:()=>g(S.id),disabled:l||!M_(S.id,e),"aria-label":`Move ${S.label} sort down in priority`,title:"Move down in priority",children:"â–¼"})]})]})})},S.id))]}),a&&o.jsx("div",{className:"sort-status-control__actions",children:o.jsx(yt,{variant:"secondary",onClick:h,disabled:l,"aria-label":"Reset all sorting",className:"sort-status-control__reset-button",children:"Clear All Sorts"})}),s&&o.jsx("div",{className:"sort-status-control__help",id:"sort-help",children:o.jsxs("small",{children:["Click ",Ka.asc,"/",Ka.desc," to toggle ascending/descending. Use â–²/â–¼ to change sort priority. Click Ã— to remove a sort."]})})]})},Ja=(e,t)=>t.map(n=>({id:n.id,label:n.label,data:n.filter?n.filter(e):e,columns:n.columns.map(r=>({key:r.key,label:r.label,render:r.render,customRenderer:r.customRenderer})),sortConfig:n.sortConfig,ariaLabel:n.ariaLabel||`${n.label} Data Grid`,ariaDescription:n.ariaDescription||`Data grid showing ${n.label.toLowerCase()}`,className:n.className,disabled:n.disabled})),Fo=[{value:!0,icon:o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__tick",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",width:"100%",height:"34",children:o.jsx("path",{strokeWidth:"4",strokeLinecap:"round",d:"M18.4 7.8l-8.5 8.4L5.6 12",stroke:"#007f3b"})})},{value:!1,icon:o.jsxs("svg",{className:"nhsuk-icon nhsuk-icon__cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",width:"100%",height:"34",children:[o.jsx("path",{d:"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z",fill:"#d5281b"}),o.jsx("path",{d:"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z",fill:"#d5281b"})]})}],P_=(e,t)=>!e||!t?e===t:e.name&&e.bed_name&&t.name&&t.bed_name?e.name===t.name&&e.bed_name===t.bed_name:JSON.stringify(e)===JSON.stringify(t),F_=(e,t)=>t?e.filter(n=>{if(t.ewsScoreRange){const[r,i]=t.ewsScoreRange;if(n.ews_score<r||n.ews_score>i)return!1}return!(t.wards&&t.wards.length>0&&!t.wards.includes(n.ward_name)||t.specialties&&t.specialties.length>0&&!t.specialties.includes(n.speciality)||t.dischargeStatuses&&t.dischargeStatuses.length>0&&!t.dischargeStatuses.includes(n.early_discharge_notification)||t.avpuLevels&&t.avpuLevels.length>0&&!t.avpuLevels.includes(n.ews_data.avpu)||t.medicallyOptimised!==null&&t.medicallyOptimised!==void 0&&n.medically_optimised!==t.medicallyOptimised||t.fastTrack!==null&&t.fastTrack!==void 0&&n.fast_track!==t.fastTrack)}):e,$_=e=>{if(typeof e=="boolean"){const n=Fo.find(r=>r.value===e);return n?n.icon:null}const t=Fo.find(n=>n.value===e);return t?t.icon:String(e)},L_=e=>`${e.name}-${e.bed_name}`,A_=()=>({overview:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"bed_name",label:"Bed"},{key:"ews_score",label:"EWS Score"},{key:"speciality",label:"Specialty"},{key:"consultant",label:"Consultant"}],vitals:[{key:"name",label:"Patient Name"},{key:"ews_score",label:"EWS Score"},{key:"respiratory_rate_bpm",label:"Respiratory Rate",render:e=>e.ews_data.respiratory_rate_bpm},{key:"sp02",label:"SpO2 %",render:e=>e.ews_data.sp02},{key:"temperature",label:"Temperature Â°C",render:e=>e.ews_data.temperature},{key:"systolic_bp",label:"Systolic BP",render:e=>e.ews_data.systolic_bp},{key:"heart_rate",label:"Heart Rate",render:e=>e.ews_data.heart_rate},{key:"avpu",label:"AVPU",render:e=>e.ews_data.avpu.toUpperCase()}],discharge:[{key:"name",label:"Patient Name"},{key:"anticipated_discharge_date",label:"Anticipated Discharge",render:e=>new Date(e.anticipated_discharge_date).toLocaleDateString()},{key:"early_discharge_notification",label:"Discharge Status"},{key:"medically_optimised",label:"Medically Optimised"},{key:"criteria_to_reside",label:"Criteria to Reside"},{key:"fast_track",label:"Fast Track"},{key:"transport_status",label:"Transport Status"},{key:"pathway",label:"Pathway"}],logistics:[{key:"name",label:"Patient Name"},{key:"ward_name",label:"Ward"},{key:"room_name",label:"Room"},{key:"bed_name",label:"Bed"},{key:"bed_type",label:"Bed Type"},{key:"transport_booking",label:"Transport Booked"},{key:"transport_mobility",label:"Transport Type"},{key:"district_nurse_referral",label:"District Nurse"},{key:"equipment",label:"Equipment"}]}),E_=e=>{const t=A_();return[{id:"overview",label:"Patient Overview",data:e,columns:t.overview,ariaLabel:"Patient Overview Data Grid",ariaDescription:"Overview of all patients with basic information"},{id:"vitals",label:"Vital Signs & EWS",data:e,columns:t.vitals,sortConfig:[{key:"ews_score",direction:"desc"},{key:"name",direction:"asc"},{key:"ward_name",direction:"asc"}],ariaLabel:"Patient Vital Signs Data Grid",ariaDescription:"Patient vital signs and Early Warning Scores"},{id:"discharge",label:"Discharge Planning",data:e.filter(n=>n.anticipated_discharge_date),columns:t.discharge,sortConfig:[{key:"anticipated_discharge_date",direction:"asc"},{key:"discharge_status",direction:"desc"}],ariaLabel:"Discharge Planning Data Grid",ariaDescription:"Patient discharge planning and status information"},{id:"logistics",label:"Bed Management",data:e,columns:t.logistics,sortConfig:[{key:"ward_name",direction:"asc"}],ariaLabel:"Bed Management Data Grid",ariaDescription:"Patient location and logistics information"}]},Sd={dataComparator:P_,filterFunction:F_,booleanRenderer:$_,getDataId:L_};function Cd(e,t,n){const{primaryField:r,secondaryFields:i=[],badges:a=[],hiddenFields:s=[],getPriority:l,getVariant:u,fieldRenderers:c={},classPrefix:d="adaptive-card"}=n,f=t.find(M=>M.key===r),p=f?.cardRenderer?f.cardRenderer(e):f?.render?f.render(e):e[r||"name"]||"Untitled",g=()=>i.filter(w=>!s.includes(w)&&e[w]).slice(0,3).map(w=>{const v=t.find(x=>x.key===w),D=e[w],N=c[w]?c[w](D,e):v?.cardRenderer?v.cardRenderer(e):v?.render?v.render(e):D;return`${v?.label||w}: ${N}`}).join(" â€¢ "),b=()=>a.length===0?null:a.filter(M=>e[M.fieldKey]!==void 0).map(M=>{const w=e[M.fieldKey],v=M.render?M.render(w,e):w;return`<span class="nhsuk-tag ${B_(M,w)}">${v}</span>`}).join(""),h=()=>u?u(e):l?.(e)==="high"?"primary":"default",m=b(),y=g(),S=m?`${y}${m?`<div class="adaptive-card__badges">${m}</div>`:""}`:y;return{variant:h(),heading:String(p),descriptionHtml:S,className:`adaptive-card ${d}`,"aria-label":`Record for ${p}`}}function B_(e,t){const n=e.className||"adaptive-card__badge";if(e.fieldKey==="ews_score"||e.fieldKey.includes("score")){const r=Number(t);return r>=7?`${n} nhsuk-tag--red`:r>=3?`${n} nhsuk-tag--yellow`:`${n} nhsuk-tag--green`}if(e.fieldKey==="priority"){const r=String(t).toLowerCase();if(r==="high")return`${n} nhsuk-tag--red`;if(r==="medium")return`${n} nhsuk-tag--yellow`;if(r==="low")return`${n} nhsuk-tag--green`}if(e.fieldKey==="status"){const r=String(t).toLowerCase();if(r==="urgent"||r==="critical")return`${n} nhsuk-tag--red`;if(r==="pending"||r==="warning")return`${n} nhsuk-tag--yellow`;if(r==="completed"||r==="success")return`${n} nhsuk-tag--green`}switch(e.color){case"primary":return`${n} nhsuk-tag--blue`;case"secondary":return`${n} nhsuk-tag--grey`;case"success":return`${n} nhsuk-tag--green`;case"warning":return`${n} nhsuk-tag--yellow`;case"danger":return`${n} nhsuk-tag--red`;default:return n}}const R_={primaryField:"name",secondaryFields:["id","description","status"],badges:[{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],hiddenFields:[],getPriority:e=>e.priority||"medium",getStatus:e=>e.status||"active",getVariant:e=>e.priority==="high"?"primary":"default",fieldRenderers:{},classPrefix:"adaptive-card--generic"},$o=({data:e,columns:t,onSelect:n,onAction:r,priority:i="medium",status:a="active"})=>{const s=e.name,l=e.age,u=e.ward_name,c=e.bed_name,d=e.ews_score,f=e.speciality,p=e.consultant;return o.jsxs("div",{className:`healthcare-card healthcare-card--patient healthcare-card--${i} healthcare-card--${a}`,onClick:()=>n?.(e),role:"button",tabIndex:0,"aria-label":`Patient record for ${s}, Age ${l}, Ward ${u}, Bed ${c}`,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__identity",children:[o.jsx("h3",{className:"healthcare-card__patient-name",children:s}),o.jsxs("p",{className:"healthcare-card__age-info",children:[o.jsx("span",{className:"healthcare-card__label",children:"Age: "}),o.jsx("span",{className:"healthcare-card__value",children:l})]})]}),o.jsx("div",{className:"healthcare-card__badges",children:d!==void 0&&o.jsxs(Ye,{color:H_(kd(d)),className:"healthcare-card__alert",children:["EWS: ",d]})})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Ward"}),o.jsx("dd",{children:u})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Bed"}),o.jsx("dd",{children:c})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Specialty"}),o.jsx("dd",{children:f})]}),o.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--prominent",children:[o.jsx("dt",{children:"Consultant"}),o.jsx("dd",{children:p})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(yt,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-notes",e)},children:"Notes"}),o.jsx(yt,{variant:"secondary",className:"healthcare-card__action",onClick:g=>{g.stopPropagation(),r?.("view-vitals",e)},children:"Vitals"}),o.jsx(yt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:g=>{g.stopPropagation(),r?.("view-full",e)},children:"View Full Record"})]})]})},Lo=({data:e,onAction:t})=>o.jsxs("div",{className:"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__time-info",children:[o.jsx("h3",{className:"healthcare-card__time",children:new Date(e.appointment_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),o.jsx("p",{className:"healthcare-card__type",children:e.appointment_type})]}),o.jsxs("div",{className:"healthcare-card__badges",children:[o.jsx(Ye,{color:z_(e.status||"active"),className:"healthcare-card__status",children:(e.status||"active").charAt(0).toUpperCase()+(e.status||"active").slice(1)}),o.jsxs(Ye,{color:"grey",className:"healthcare-card__duration",children:[e.duration||"30"," min"]})]})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Patient"}),o.jsx("dd",{children:e.patient_name})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Consultant"}),o.jsx("dd",{children:e.consultant})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Location"}),o.jsx("dd",{children:e.location})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(yt,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),o.jsx(yt,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Reschedule"})]})]}),Ao=({data:e,onAction:t})=>o.jsxs("div",{className:"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active",role:"article",tabIndex:0,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__medication-info",children:[o.jsx("h3",{className:"healthcare-card__medication-name",children:e.medication}),o.jsxs("p",{className:"healthcare-card__dose",children:[e.dose," â€¢ ",e.frequency]})]}),o.jsxs("div",{className:"healthcare-card__badges",children:[o.jsx(Ye,{color:"blue",className:"healthcare-card__route",children:e.route}),e.next_due&&o.jsxs(Ye,{color:"red",className:"healthcare-card__warning",children:["Due: ",new Date(e.next_due).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("dl",{className:"healthcare-card__details",children:[o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Patient"}),o.jsx("dd",{children:e.patient_name})]}),o.jsxs("div",{className:"healthcare-card__detail",children:[o.jsx("dt",{children:"Prescriber"}),o.jsx("dd",{children:e.prescriber})]}),e.allergies&&o.jsxs("div",{className:"healthcare-card__detail healthcare-card__detail--urgent",children:[o.jsx("dt",{children:"Allergies"}),o.jsx("dd",{children:e.allergies})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(yt,{variant:"secondary",size:"small",onClick:()=>t?.("view",e),children:"View Details"}),o.jsx(yt,{variant:"primary",size:"small",onClick:()=>t?.("edit",e),children:"Adjust Dose"})]})]}),Eo=({data:e,onSelect:t,onAction:n,priority:r="medium"})=>{const i=e.name,a=e.ews_score,s=e.ews_data?.respiratory_rate_bpm,l=e.ews_data?.sp02,u=e.ews_data?.temperature,c=e.ews_data?.systolic_bp,d=e.ews_data?.heart_rate,f=e.ews_data?.avpu;return o.jsxs("div",{className:`healthcare-card healthcare-card--vitals healthcare-card--${r}`,onClick:()=>t?.(e),role:"button",tabIndex:0,"aria-label":`Vital signs for ${i}, EWS Score ${a}`,children:[o.jsxs("div",{className:"healthcare-card__header",children:[o.jsxs("div",{className:"healthcare-card__vitals-summary",children:[o.jsx("h3",{className:"healthcare-card__patient-name",children:i}),a!==void 0&&o.jsxs("p",{className:`healthcare-card__ews-score healthcare-card__ews-score--${O_(a)}`,children:["EWS: ",a]})]}),o.jsx("div",{className:"healthcare-card__badges",children:f&&o.jsxs(Ye,{color:"blue",className:"healthcare-card__avpu",children:["AVPU: ",f.toUpperCase()]})})]}),o.jsx("div",{className:"healthcare-card__body",children:o.jsxs("div",{className:"healthcare-card__vitals-grid",children:[s!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Respiratory Rate"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[s," bpm"]})]}),l!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"SpO2"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[l,"%"]})]}),u!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Temperature"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[u,"Â°C"]})]}),c!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Systolic BP"}),o.jsx("span",{className:"healthcare-card__vital-value",children:c})]}),d!==void 0&&o.jsxs("div",{className:"healthcare-card__vital",children:[o.jsx("span",{className:"healthcare-card__vital-label",children:"Heart Rate"}),o.jsxs("span",{className:"healthcare-card__vital-value",children:[d," bpm"]})]})]})}),o.jsxs("div",{className:"healthcare-card__actions",children:[o.jsx(yt,{variant:"secondary",className:"healthcare-card__action",onClick:p=>{p.stopPropagation(),n?.("view-trend",e)},children:"Trend"}),o.jsx(yt,{variant:"primary",className:"healthcare-card__action healthcare-card__action--primary",onClick:p=>{p.stopPropagation(),n?.("record-new",e)},children:"Record New"})]})]})};function kd(e){const t=typeof e=="string"?parseInt(e,10):e;return t>=7?"critical":t>=5?"high":t>=3?"medium":"low"}function O_(e){return kd(e)}function H_(e){switch(e){case"critical":return"red";case"high":return"orange";case"medium":return"yellow";case"low":return"grey";default:return"grey"}}function z_(e){switch(e.toLowerCase()){case"active":return"blue";case"pending":return"orange";case"completed":return"green";case"cancelled":return"grey";default:return"blue"}}const W_=[{fieldKey:"ews_score",render:e=>`EWS: ${e}`,className:"adaptive-card__ews-badge",color:"default"},{fieldKey:"priority",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__priority-badge"},{fieldKey:"status",render:e=>e.charAt(0).toUpperCase()+e.slice(1),className:"adaptive-card__status-badge"}],Td=e=>e.ews_score&&Number(e.ews_score)>=7?"high":e.ews_score&&Number(e.ews_score)>=3?"medium":e.priority==="high"||e.status==="urgent"?"high":e.priority==="low"?"low":"medium",Nd={name:"healthcare",defaultCardConfig:{primaryField:"name",secondaryFields:["nhs_number","ward","condition","consultant"],badges:W_,hiddenFields:[],getPriority:Td,getStatus:e=>{if(e.status){const t=e.status.toLowerCase();if(["active","pending","completed","cancelled","urgent"].includes(t))return t}return"active"},getVariant:e=>Td(e)==="high"||e.status==="urgent"?"primary":"default",fieldRenderers:{nhs_number:e=>e?`NHS: ${e}`:"",ews_score:e=>{const t=Number(e),n=t>=7?"HIGH":t>=3?"MEDIUM":"LOW";return`EWS: ${e} (${n})`},age:(e,t)=>t.dob?`${new Date().getFullYear()-new Date(t.dob).getFullYear()}y`:e?`${e}y`:""},classPrefix:"adaptive-card--healthcare"},cssImport:"./HealthcareCardTemplates.scss",cardTemplates:{patient:(e,t,n)=>{const r=n.getPriority?.(e)||"medium",i=n.getStatus?.(e)||"active",a=i==="urgent"?"active":i;return o.jsx($o,{data:e,columns:t,priority:r,status:a,onSelect:s=>console.log("Patient selected:",s),onAction:(s,l)=>console.log("Patient action:",s,l)})},appointment:(e,t,n)=>{const r=n.getStatus?.(e)||"pending",i=r==="urgent"?"pending":r;return o.jsx(Lo,{data:e,columns:t,status:i,onSelect:a=>console.log("Appointment selected:",a),onAction:(a,s)=>console.log("Appointment action:",a,s)})},medication:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return o.jsx(Ao,{data:e,columns:t,priority:r,onSelect:i=>console.log("Medication selected:",i),onAction:(i,a)=>console.log("Medication action:",i,a)})},vitals:(e,t,n)=>{const r=n.getPriority?.(e)||"medium";return o.jsx(Eo,{data:e,columns:t,priority:r,onSelect:i=>console.log("Vitals selected:",i),onAction:(i,a)=>console.log("Vitals action:",i,a)})}},fieldTypes:{isNHSNumber:e=>typeof e=="string"&&/^\d{3}\s?\d{3}\s?\d{4}$/.test(e.replace(/\s/g,"")),isEWSScore:e=>typeof e=="number"&&e>=0&&e<=20,isMedicalDate:e=>typeof e=="string"&&!isNaN(Date.parse(e))}};function jd(e){return{primaryField:e?.primaryField||"name",secondaryFields:e?.secondaryFields||[],badges:e?.badgeFields?.map(t=>({fieldKey:t,className:"adaptive-card__badge"}))||[],hiddenFields:e?.hiddenFields||[],cardTemplate:e?.cardTemplate?(t,n,r)=>e.cardTemplate(t,n):void 0,classPrefix:"adaptive-card--generic"}}function Dd(e){if(!e||e.length===0)return!1;const t=e[0];return t.ews_score!==void 0||t.nhs_number!==void 0||t.patient_name!==void 0||t.ward!==void 0||t.consultant!==void 0}function U_(e,t){switch(t.type){case"SET_SELECTED_INDEX":return{...e,selectedIndex:t.payload};case"SET_TAB_LOADING":const n=[...e.tabLoadingStates];return n[t.payload.tabIndex]=t.payload.isLoading,{...e,tabLoadingStates:n};case"SET_TAB_ERROR":const r=[...e.tabErrors];return r[t.payload.tabIndex]=t.payload.error,{...e,tabErrors:r};case"SET_SORT":return{...e,sortConfig:t.payload};case"SET_SELECTED_ROWS":const i=[...e.selectedRows];return i[t.payload.tabIndex]=t.payload.rowIndices,{...e,selectedRows:i};case"SET_GLOBAL_SELECTED_ROW_DATA":return{...e,globalSelectedRowData:t.payload};case"SET_FILTERS":return{...e,filters:t.payload};case"ADJUST_ARRAYS":const{newLength:a}=t.payload,s=new Array(a).fill(!1),l=new Array(a).fill(null),u=new Array(a).fill([]);for(let c=0;c<Math.min(e.tabLoadingStates.length,a);c++)s[c]=e.tabLoadingStates[c],l[c]=e.tabErrors[c],u[c]=e.selectedRows[c];return{...e,tabLoadingStates:s,tabErrors:l,selectedRows:u};case"RESET_STATE":return{selectedIndex:0,tabLoadingStates:new Array(e.tabLoadingStates.length).fill(!1),tabErrors:new Array(e.tabErrors.length).fill(null),sortConfig:[],selectedRows:new Array(e.selectedRows.length).fill([]),globalSelectedRowData:null,filters:void 0};default:return e}}function V_(e,t){const[n,r]=B.useState("cards");return B.useEffect(()=>{if(t){r(t);return}const i=()=>{const a=window.innerWidth;a<e.mobile?r("cards"):a<e.desktop?r("hybrid"):r("table")};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[e,t]),n}function G_(e){return!e||typeof e!="object"?null:e.appointment_type||e.appointment_time||e.clinic?"appointment":e.medication_name||e.medication||e.dose||e.frequency?"medication":e.ews_score!==void 0||e.respiratory_rate!==void 0||e.spo2!==void 0||e.temperature!==void 0||e.systolic_bp!==void 0||e.heart_rate!==void 0?"vitals":e.name||e.patient_name||e.nhs_number||e.ward||e.bed?"patient":null}function Y_(e,t,n,r){const i=r?{...r.defaultCardConfig,...n}:{...R_,...n};if(r&&r.cardTemplates){const a=G_(e);if(a&&r.cardTemplates[a]){const s=r.cardTemplates[a](e,t,i);if(s)return{variant:"default",children:s}}}return i.cardTemplate&&i.cardTemplate(e,t,i),Cd(e,t,i)}const Bo=({breakpoints:e={mobile:768,tablet:1024,desktop:1200},forceLayout:t,cardConfig:n={},experimental:r={},enableAdvancedSorting:i=!1,topActions:a,bottomActions:s,gridActions:l,forceGridActionsAbove:u,tabPanels:c,dataConfig:d,selectedIndex:f,onTabChange:p,ariaLabel:g="Data grid",ariaDescription:b,orientation:h="horizontal",id:m,disabled:y=!1,className:S,...M})=>{const w=V_(e,t),v=f!==void 0,D=f??0,N=B.useMemo(()=>{if(c.some(W=>W.data&&W.data.length>0&&Dd(W.data))){const W=jd(n);return{...Nd.defaultCardConfig,...W}}else return jd(n)},[n,c]),k=B.useMemo(()=>c.some(W=>W.data&&W.data.length>0&&Dd(W.data))?Nd:void 0,[c]),x=B.useMemo(()=>({selectedIndex:D,tabLoadingStates:new Array(c.length).fill(!1),tabErrors:new Array(c.length).fill(null),sortConfig:[],selectedRows:new Array(c.length).fill([]),globalSelectedRowData:null,filters:void 0}),[D,c.length]),[I,j]=B.useReducer(U_,x),C=B.useRef([]),$=B.useRef([]),T=B.useRef([]),F=B.useRef(null),[P,L]=B.useState({focusArea:"tabs",focusedTabIndex:0,focusedCardIndex:0,selectedCardIndex:-1,isGridActive:!1,focusedCardElementIndex:0,cardElements:[],isCardNavigationActive:!1,gridColumns:1,gridRows:1,cardSortConfig:null,focusedSortControlIndex:0,isSortControlsActive:!1}),te=B.useCallback(U=>{if(!U.current)return{columns:1,rows:0};const W=U.current,K=W.querySelectorAll(".aria-tabs-datagrid-adaptive__card-wrapper");if(K.length===0)return{columns:1,rows:0};const J=W.offsetWidth,X=K[0].offsetWidth,ne=Math.floor(J/X)||1,re=Math.ceil(K.length/ne);return{columns:ne,rows:re}},[]),Y=B.useCallback((U,W)=>({row:Math.floor(U/W),col:U%W}),[]),O=B.useCallback((U,W,K)=>U*K+W,[]),H=B.useCallback((U,W,K,J)=>{const{row:E,col:X}=Y(U,J);let ne=E,re=X;switch(W){case"up":ne=Math.max(0,E-1);break;case"down":ne=Math.min(Math.floor((K-1)/J),E+1);break;case"left":re=Math.max(0,X-1);break;case"right":re=Math.min(J-1,X+1);break}const Q=O(ne,re,J);return Math.min(Q,K-1)},[Y,O]);B.useEffect(()=>{P.isCardNavigationActive&&P.focusedCardElementIndex>=0&&P.cardElements.length>0&&setTimeout(()=>{const U=P.cardElements[P.focusedCardElementIndex];U&&(U.element.focus(),U.element.scrollIntoView({block:"nearest",behavior:"smooth"}))},0)},[P.isCardNavigationActive,P.focusedCardElementIndex,P.cardElements.length]),B.useEffect(()=>{const U=()=>{if(w==="cards"&&F.current){const{columns:J,rows:E}=te(F);L(X=>({...X,gridColumns:J,gridRows:E}))}},W=setTimeout(U,200),K=()=>{setTimeout(U,100)};return window.addEventListener("resize",K),()=>{clearTimeout(W),window.removeEventListener("resize",K)}},[w,c,te]),B.useEffect(()=>{const U=I.tabLoadingStates.length,W=c.length;U!==W&&j({type:"ADJUST_ARRAYS",payload:{newLength:W}})},[c.length,I.tabLoadingStates.length]),B.useEffect(()=>{v&&f!==I.selectedIndex&&j({type:"SET_SELECTED_INDEX",payload:f})},[v,f,I.selectedIndex]);const z=B.useCallback(U=>{U>=0&&U<c.length&&!c[U].disabled&&(j({type:"SET_SELECTED_INDEX",payload:U}),p?.(U))},[c,p]),ie=B.useCallback(U=>{console.log("Card selected:",U),j({type:"SET_GLOBAL_SELECTED_ROW_DATA",payload:U})},[]),V=B.useCallback(U=>{const W=$.current[U];W&&(W.focus(),W.scrollIntoView({block:"nearest",behavior:"smooth"}))},[]),ce=B.useCallback(U=>{const W=$.current[U];if(!W)return[];const K=['button:not([disabled]):not([aria-hidden="true"])','a[href]:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','select:not([disabled]):not([aria-hidden="true"])','textarea:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])','.healthcare-card__detail[tabindex]:not([tabindex="-1"])',".healthcare-card__action:not([disabled])",".tag:not([disabled])"].join(", "),J=W.querySelectorAll(K);return Array.from(J).map((E,X)=>({id:E.id||`card-${U}-element-${X}`,element:E,label:E.getAttribute("aria-label")||E.textContent?.trim()||E.getAttribute("title")||`Element ${X+1}`,type:E.tagName.toLowerCase()==="button"?"button":E.tagName.toLowerCase()==="a"?"link":["input","select","textarea"].includes(E.tagName.toLowerCase())?"input":"generic"}))},[]),Ce=B.useRef(null),he=B.useCallback(U=>{const W=Ce.current;if(!W)return;const K=document.createElement("div");K.setAttribute("aria-live","polite"),K.setAttribute("aria-atomic","true"),K.className="sr-only",K.textContent=U,W.appendChild(K),setTimeout(()=>{W.contains(K)&&W.removeChild(K)},1e3)},[]),pe=B.useCallback(U=>{const W=U.filter(J=>J.sortable!==!1),K=[{value:"",label:"Sort by..."}];return W.forEach(J=>{const E=J.label||J.key;J.key==="name"?K.push({value:`${J.key}-asc`,label:`${E} (A-Z)`},{value:`${J.key}-desc`,label:`${E} (Z-A)`}):J.key==="ews_score"||J.key.includes("score")?K.push({value:`${J.key}-desc`,label:`${E} (High-Low)`},{value:`${J.key}-asc`,label:`${E} (Low-High)`}):J.key==="age"||J.key.includes("date")||J.key.includes("time")?K.push({value:`${J.key}-desc`,label:`${E} (Oldest-Youngest)`},{value:`${J.key}-asc`,label:`${E} (Youngest-Oldest)`}):K.push({value:`${J.key}-asc`,label:`${E} (A-Z)`},{value:`${J.key}-desc`,label:`${E} (Z-A)`})}),K},[]),ee=B.useCallback((U,W)=>W?[...U].sort((K,J)=>{const E=K[W.key],X=J[W.key];if(E==null&&X==null)return 0;if(E==null)return 1;if(X==null)return-1;const ne=Number(E),re=Number(X);if(!isNaN(ne)&&!isNaN(re))return W.direction==="asc"?ne-re:re-ne;const Q=String(E).toLowerCase(),oe=String(X).toLowerCase(),be=Q.localeCompare(oe);return W.direction==="asc"?be:-be}):U,[]),ae=B.useCallback(U=>{if(!U){L(Q=>({...Q,cardSortConfig:null})),he("Card sorting cleared");return}const[W,K]=U.split("-"),J={key:W,direction:K};L(Q=>({...Q,cardSortConfig:J}));const ne=c[I.selectedIndex]?.columns.find(Q=>Q.key===W)?.label||W;he(`Cards sorted by ${ne} in ${K==="asc"?"ascending":"descending"} order`)},[c,I.selectedIndex,he]),me=B.useCallback(U=>{const J=c[I.selectedIndex]?.columns.find(X=>X.key===U.key)?.label||U.key,E=U.direction==="asc"?"ascending":"descending";return`${J} (${E})`},[c,I.selectedIndex]),G=B.useCallback(U=>{const W=c[I.selectedIndex];if(i){const K=I.sortConfig;return!K||K.length===0?U:[...U].sort((J,E)=>{for(const{key:X,direction:ne}of K){let re=J[X],Q=E[X];const oe=W?.columns.find(Le=>Le.key===X);if(oe?.cardRenderer?(re=oe.cardRenderer(J),Q=oe.cardRenderer(E)):oe?.render&&(re=oe.render(J),Q=oe.render(E)),re==null&&Q==null)continue;if(re==null)return ne==="asc"?-1:1;if(Q==null)return ne==="asc"?1:-1;const be=Number(re),_e=Number(Q);if(!isNaN(be)&&!isNaN(_e)){const Le=be-_e;if(Le!==0)return ne==="asc"?Le:-Le;continue}const xe=String(re).toLowerCase(),je=String(Q).toLowerCase(),ye=xe.localeCompare(je);if(ye!==0)return ne==="asc"?ye:-ye}return 0})}else return ee(U,P.cardSortConfig)},[i,I.sortConfig,P.cardSortConfig,ee,c,I.selectedIndex]),de=B.useCallback((U,W)=>{const K=ce(U),J=K[W];if(J){J.element.scrollIntoView({block:"nearest",behavior:"smooth"});const E=`Focused on ${J.label}, ${J.type} ${W+1} of ${K.length} within card`;he(E)}},[ce,he]),A=B.useCallback(U=>{C.current[U]?.focus()},[]),R=B.useCallback(()=>{const U=T.current[0];if(!U)return[];const W=['select:not([disabled]):not([aria-hidden="true"])','button:not([disabled]):not([aria-hidden="true"])','input:not([disabled]):not([aria-hidden="true"])','[tabindex]:not([tabindex="-1"]):not([disabled]):not([aria-hidden="true"])'].join(", "),K=U.querySelectorAll(W);return Array.from(K)},[]),Z=B.useCallback(U=>{if(U===0){const W=T.current[0],K=W?.querySelector(".sort-controls-row");if(K){K.setAttribute("tabindex","-1"),K.focus();const E=`Sort controls group with ${R().length} interactive elements. Press Enter or Space to begin navigating controls.`;he(E)}else W&&W.focus()}else{const W=R(),K=U-1,J=W[K];if(J){J.focus();const E=J.tagName.toLowerCase()==="select",X=J.tagName.toLowerCase()==="button",ne=E?"dropdown":X?"button":"control",re=E?". Use Space key to open dropdown":"",Q=`${ne} ${K+1} of ${W.length}${re}`;he(Q)}}},[R,he]),le=B.useCallback((U,W)=>{const{key:K}=U,J=c[I.selectedIndex],E=J?.data.length||0;if(K==="ArrowLeft"&&U.shiftKey){U.preventDefault(),U.currentTarget.scrollBy({left:-30,behavior:"smooth"});return}else if(K==="ArrowRight"&&U.shiftKey){U.preventDefault(),U.currentTarget.scrollBy({left:30,behavior:"smooth"});return}if(!P.isCardNavigationActive){switch(K){case"ArrowUp":if(U.preventDefault(),W===0)L(Q=>({...Q,focusArea:"sort-controls",focusedSortControlIndex:0,isSortControlsActive:!1})),Z(0);else{const Q=H(W,"up",E,P.gridColumns);Q!==W&&(L(oe=>({...oe,focusedCardIndex:Q})),V(Q),he(`Moved to card ${Q+1} of ${E}`))}break;case"ArrowDown":U.preventDefault();const X=H(W,"down",E,P.gridColumns);X!==W&&(L(Q=>({...Q,focusedCardIndex:X})),V(X),he(`Moved to card ${X+1} of ${E}`));break;case"ArrowLeft":U.preventDefault();const ne=H(W,"left",E,P.gridColumns);ne!==W?(L(Q=>({...Q,focusedCardIndex:ne})),V(ne),he(`Moved to card ${ne+1} of ${E}`)):I.selectedIndex>0&&(j({type:"SET_SELECTED_INDEX",payload:I.selectedIndex-1}),L(Q=>({...Q,focusArea:"tabs"})),setTimeout(()=>A(I.selectedIndex-1),0));break;case"ArrowRight":U.preventDefault();const re=H(W,"right",E,P.gridColumns);re!==W?(L(Q=>({...Q,focusedCardIndex:re})),V(re),he(`Moved to card ${re+1} of ${E}`)):I.selectedIndex<c.length-1&&(j({type:"SET_SELECTED_INDEX",payload:I.selectedIndex+1}),L(Q=>({...Q,focusArea:"tabs"})),setTimeout(()=>A(I.selectedIndex+1),0));break;case"Enter":if(J?.data[W]){U.preventDefault(),L(oe=>({...oe,selectedCardIndex:W}));const Q=ce(W);Q.length>0?(L(oe=>({...oe,focusArea:"card",isCardNavigationActive:!0,focusedCardElementIndex:0,cardElements:Q,selectedCardIndex:W})),he(`Card ${W+1} selected and navigation activated. ${Q.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`)):he(`Card ${W+1} selected.`)}break;case" ":if(J?.data[W]){U.preventDefault(),L(oe=>({...oe,selectedCardIndex:oe.selectedCardIndex===W?-1:W}));const Q=P.selectedCardIndex===W;he(`Card ${W+1} ${Q?"deselected":"selected"}.`)}break}return}switch(K){case"ArrowUp":case"ArrowLeft":U.preventDefault();const X=Math.max(0,P.focusedCardElementIndex-1);L(oe=>({...oe,focusedCardElementIndex:X})),de(W,X);break;case"ArrowDown":case"ArrowRight":U.preventDefault();const ne=Math.min(P.cardElements.length-1,P.focusedCardElementIndex+1);L(oe=>({...oe,focusedCardElementIndex:ne})),de(W,ne);break;case"Enter":U.preventDefault();const re=P.cardElements[P.focusedCardElementIndex];re&&(re.element.click(),he(`Activated ${re.label}`));break;case" ":U.preventDefault();const Q=P.cardElements[P.focusedCardElementIndex];if(Q){const oe=new MouseEvent("dblclick",{bubbles:!0});Q.element.dispatchEvent(oe),he(`Double-clicked ${Q.label}`)}break;case"Escape":U.preventDefault(),L(oe=>({...oe,focusArea:"cards",isCardNavigationActive:!1,focusedCardElementIndex:0,cardElements:[]})),setTimeout(()=>V(W),0),he("Exited card navigation, returned to card level");break;case"Home":U.preventDefault(),P.cardElements.length>0&&(L(oe=>({...oe,focusedCardElementIndex:0})),de(W,0));break;case"End":if(U.preventDefault(),P.cardElements.length>0){const oe=P.cardElements.length-1;L(be=>({...be,focusedCardElementIndex:oe})),de(W,oe)}break}},[P,I.selectedIndex,c,ie,V,A,L,ce,de,he]),ue=B.useCallback(U=>{const W=C.current[U],K=W?.parentElement;if(!W||!K){console.log("Tab or container not found for mobile scroll");return}const J=W.getBoundingClientRect(),E=K.getBoundingClientRect();J.left>=E.left&&J.right<=E.right||(console.log("Tab not visible, scrolling into view (mobile)"),W.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))},[]),ge=B.useCallback((U,W)=>{if(w!=="cards")return;const{key:K}=U;switch(K){case"ArrowLeft":U.preventDefault();const J=W>0?W-1:c.length-1;z(J),L(re=>({...re,focusedTabIndex:J})),C.current[J]?.focus(),ue(J);break;case"ArrowRight":U.preventDefault();const E=W<c.length-1?W+1:0;z(E),L(re=>({...re,focusedTabIndex:E})),C.current[E]?.focus(),ue(E);break;case"ArrowDown":U.preventDefault();const X=c[I.selectedIndex];X&&X.columns&&X.columns.length>0?(L(re=>({...re,focusArea:"sort-controls",focusedSortControlIndex:0})),Z(0)):(L(re=>({...re,focusArea:"cards",focusedCardIndex:0})),V(0));break;case"Home":U.preventDefault(),z(0),L(re=>({...re,focusedTabIndex:0})),C.current[0]?.focus(),ue(0);break;case"End":U.preventDefault();const ne=c.length-1;z(ne),L(re=>({...re,focusedTabIndex:ne})),C.current[ne]?.focus(),ue(ne);break;case"Enter":case" ":U.preventDefault(),z(W);break}},[c.length,z,w,V,L,ue]),fe=B.useCallback((U,W)=>{if(w!=="cards")return;const{key:K}=U,J=c[I.selectedIndex];if(W===0&&!P.isSortControlsActive){switch(K){case"ArrowUp":U.preventDefault(),L(X=>({...X,focusArea:"tabs",isSortControlsActive:!1})),A(I.selectedIndex);break;case"ArrowDown":U.preventDefault(),J?.data&&J.data.length>0&&(L(X=>({...X,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),V(0));break;case"Enter":case" ":U.preventDefault();const E=R();if(E.length>0){L(ne=>({...ne,isSortControlsActive:!0,focusedSortControlIndex:1})),Z(1);const X=`Entered sort controls navigation mode. ${E.length} controls available. Use arrow keys to navigate between controls.`;he(X)}break;case"Escape":U.preventDefault(),L(X=>({...X,isSortControlsActive:!1,focusArea:"tabs"})),A(I.selectedIndex);break}return}if(P.isSortControlsActive){const X=R().length;switch(K){case"ArrowLeft":U.preventDefault();const ne=P.focusedSortControlIndex>1?P.focusedSortControlIndex-1:X;L(Q=>({...Q,focusedSortControlIndex:ne})),Z(ne);break;case"ArrowRight":U.preventDefault();const re=P.focusedSortControlIndex<X?P.focusedSortControlIndex+1:1;L(Q=>({...Q,focusedSortControlIndex:re})),Z(re);break;case"ArrowDown":if(U.preventDefault(),P.isSortControlsActive){const Q=P.focusedSortControlIndex<X?P.focusedSortControlIndex+1:1;L(oe=>({...oe,focusedSortControlIndex:Q})),Z(Q)}else J?.data&&J.data.length>0&&(L(Q=>({...Q,focusArea:"cards",focusedCardIndex:0,isSortControlsActive:!1})),V(0));break;case"ArrowUp":U.preventDefault(),L(Q=>({...Q,isSortControlsActive:!1,focusArea:"sort-controls"})),Z(0);break;case"Escape":U.preventDefault(),L(Q=>({...Q,isSortControlsActive:!1,focusArea:"sort-controls",focusedSortControlIndex:0})),Z(0);break}}},[w,c,I.selectedIndex,P.isSortControlsActive,P.focusedSortControlIndex,Z,A,V,L,he]);if(w==="cards"){const U=c[I.selectedIndex];return o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${S||""}`,children:[o.jsxs("div",{className:"aria-tabs-datagrid-adaptive__header",children:[o.jsx("div",{role:"tablist","aria-label":g,"aria-describedby":`${b||""} ${m?`${m}-navigation-help`:""}`.trim(),"aria-orientation":h,className:"aria-tabs-datagrid__tabs",children:c.map((W,K)=>{const J=K===I.selectedIndex,E=W.disabled||y;return o.jsxs("button",{role:"tab",id:`tab-${W.id}`,"aria-controls":`panel-${W.id}`,"aria-selected":J,"aria-disabled":E,tabIndex:J?0:-1,ref:X=>{C.current[K]=X},onClick:()=>z(K),onKeyDown:X=>ge(X,K),disabled:E,className:["aria-tabs-datagrid__tab",J?"aria-tabs-datagrid__tab--selected":"",E?"aria-tabs-datagrid__tab--disabled":""].filter(Boolean).join(" "),children:[o.jsx("span",{className:"aria-tabs-datagrid__tab-label",children:W.label}),I.tabLoadingStates[K]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-loading","aria-hidden":"true",children:"â³"}),I.tabErrors[K]&&o.jsx("span",{className:"aria-tabs-datagrid__tab-error","aria-hidden":"true",children:"âš ï¸"})]},W.id)})}),a&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions",children:a})]}),U&&U.columns&&o.jsx(o.Fragment,{children:i?o.jsx(wd,{sortConfig:I.sortConfig||[],columns:U.columns.map(W=>({key:W.key,label:W.label})),onSortChange:W=>{j({type:"SET_SORT",payload:W})},ariaLabel:"Card view sort configuration",className:"aria-tabs-datagrid-adaptive__advanced-sort-controls"}):o.jsx("div",{className:"aria-tabs-datagrid-adaptive__sort-controls",role:"region","aria-label":"Sort controls",tabIndex:P.focusArea==="sort-controls"?0:-1,ref:W=>{T.current[0]=W},onKeyDown:W=>fe(W,0),children:o.jsxs("div",{className:"sort-controls-row",children:[o.jsxs("div",{className:"sort-select-container",children:[o.jsx("label",{htmlFor:`card-sort-${U.id}`,className:"sort-label",children:"Sort cards by"}),o.jsx(bi,{id:`card-sort-${U.id}`,name:`card-sort-${U.id}`,value:P.cardSortConfig?`${P.cardSortConfig.key}-${P.cardSortConfig.direction}`:"",onChange:W=>ae(W.target.value),className:"sort-select",children:pe(U.columns).map(W=>o.jsx("option",{value:W.value,children:W.label},W.value))})]}),P.cardSortConfig&&o.jsxs("div",{className:"sort-indicator",role:"status","aria-live":"polite",children:[o.jsxs("span",{className:"sort-indicator-text",children:["Sorted by ",me(P.cardSortConfig)]}),o.jsx(yt,{variant:"secondary",size:"small",onClick:()=>ae(""),"aria-label":"Clear card sorting",className:"sort-clear-button",children:"Clear"})]})]})})}),o.jsx("div",{ref:F,className:"aria-tabs-datagrid-adaptive__cards",role:"grid","aria-label":`${U?.label||"Data"} cards in ${P.gridRows} rows and ${P.gridColumns} columns`,"aria-rowcount":P.gridRows,"aria-colcount":P.gridColumns,id:`panel-${U?.id}`,"aria-labelledby":`tab-${U?.id}`,children:G(U?.data||[]).map((W,K)=>{const J=P.selectedCardIndex===K,E=P.focusedCardIndex===K&&P.focusArea==="cards",X=P.focusedCardIndex===K&&P.focusArea==="card"&&P.isCardNavigationActive,ne=K===0&&P.focusArea!=="cards",re=E||ne,Q=Y(K,P.gridColumns);if(n.cardTemplate){const _e=n.cardTemplate(W,U.columns);return o.jsx("div",{role:"row","aria-rowindex":Q.row+1,className:"aria-tabs-datagrid-adaptive__row",children:o.jsx("div",{ref:xe=>{$.current[K]=xe},className:["aria-tabs-datagrid-adaptive__card-wrapper",J?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",E?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",X?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":Q.col+1,"aria-selected":J,"aria-expanded":X,"aria-description":X?`Card navigation active. ${P.cardElements.length} interactive elements available.`:void 0,tabIndex:re?0:-1,onClick:()=>{L(xe=>({...xe,selectedCardIndex:xe.selectedCardIndex===K?-1:K})),ie(W)},onKeyDown:xe=>le(xe,K),onFocus:()=>{L(xe=>xe.isCardNavigationActive?xe:xe.focusedCardIndex!==K||xe.focusArea!=="cards"?{...xe,focusedCardIndex:K,focusArea:"cards"}:xe)},children:_e})},`card-${K}`)}const oe=Y_(W,U.columns,N,k),be=[oe.className||"",J?"aria-tabs-datagrid-adaptive__card--selected":"",E?"aria-tabs-datagrid-adaptive__card--focused":"",X?"aria-tabs-datagrid-adaptive__card--card-navigation":""].filter(Boolean).join(" ");return o.jsx("div",{role:"row","aria-rowindex":Q.row+1,className:"aria-tabs-datagrid-adaptive__row",children:o.jsx("div",{className:["aria-tabs-datagrid-adaptive__card-wrapper",J?"aria-tabs-datagrid-adaptive__card-wrapper--selected":"",E?"aria-tabs-datagrid-adaptive__card-wrapper--focused":"",X?"aria-tabs-datagrid-adaptive__card-wrapper--card-navigation":""].filter(Boolean).join(" "),role:"gridcell","aria-colindex":Q.col+1,"aria-selected":J,"aria-expanded":X,onKeyDown:_e=>{_e.key==="Enter"&&(_e.preventDefault(),L(xe=>({...xe,selectedCardIndex:K}))),le(_e,K)},children:o.jsx(Io,{...oe,ref:_e=>{$.current[K]=_e},className:be,"aria-label":`${oe["aria-label"]||oe.heading}. ${X?`Card navigation active with ${P.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.`:"Press Enter to navigate within card elements."}`,tabIndex:re?0:-1,onClick:()=>{L(_e=>({..._e,selectedCardIndex:_e.selectedCardIndex===K?-1:K})),ie(W)},onKeyDown:_e=>le(_e,K),onFocus:()=>{P.isCardNavigationActive||L(_e=>_e.focusedCardIndex!==K||_e.focusArea!=="cards"?{..._e,focusedCardIndex:K,focusArea:"cards",focusedCardElementIndex:0,cardElements:[]}:_e)}})})},`card-${K}`)})}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s}),o.jsx("div",{ref:Ce,className:"aria-tabs-datagrid-adaptive__announcements","aria-hidden":"true",style:{position:"fixed",top:"-1px",left:"-1px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0,padding:0,margin:0}})]})}return w==="hybrid"?o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${S||""}`,children:[a&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:a}),o.jsx(Xa,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:b,orientation:h,id:m,disabled:y,selectedIndex:f,onTabChange:p,className:"aria-tabs-datagrid-adaptive__table--hybrid",actions:l,forceActionsAbove:u,...M}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s})]}):o.jsxs("div",{className:`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${S||""}`,children:[a&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table",children:a}),o.jsx(Xa,{tabPanels:c,dataConfig:d,ariaLabel:g,ariaDescription:b,orientation:h,id:m,disabled:y,selectedIndex:f,onTabChange:p,actions:l,forceActionsAbove:u,...M}),s&&o.jsx("div",{className:"aria-tabs-datagrid-adaptive__bottom-actions",children:s})]})},Md=e=>{const t=Fo.find(n=>n.value===e);return t?t.icon:null},q_={ecommerce:{name:"E-commerce",description:"Product catalogs with pricing, inventory, and ratings",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.priceRange){const[r,i]=t.priceRange,a=n.discountedPrice||n.price;if(a<r||a>i)return!1}return!(t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.inStock!==void 0&&n.inStock!==t.inStock||t.minRating!==void 0&&n.rating<t.minRating||t.tags&&t.tags.length>0&&!t.tags.some(r=>n.tags.includes(r)))}):e,booleanRenderer:e=>Md(e),getDataId:e=>`ecommerce-${e.id}`},createTabs:e=>Ja(e,[{id:"all-products",label:"All Products",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Price",render:n=>n.discountedPrice?`$${n.price.toFixed(2)} â†’ $${n.discountedPrice.toFixed(2)}`:`$${n.price.toFixed(2)}`},{key:"inStock",label:"Availability"},{key:"category",label:"Category"},{key:"rating",label:"Rating",render:n=>`${n.rating}/5 (${n.reviews} reviews)`}],ariaLabel:"All Products Grid",ariaDescription:"Complete product catalog with pricing and availability"},{id:"on-sale",label:"On Sale",columns:[{key:"name",label:"Product Name"},{key:"price",label:"Original Price",render:n=>`$${n.price.toFixed(2)}`},{key:"discountedPrice",label:"Sale Price",render:n=>`$${n.discountedPrice?.toFixed(2)||"N/A"}`},{key:"discount",label:"Discount",render:n=>n.discountedPrice?`${((n.price-n.discountedPrice)/n.price*100).toFixed(0)}% OFF`:"N/A"}],filter:n=>n.filter(r=>r.discountedPrice!==void 0),ariaLabel:"Sale Products Grid",ariaDescription:"Products currently on sale with discounted pricing"},{id:"high-rated",label:"Top Rated",columns:[{key:"name",label:"Product Name"},{key:"rating",label:"Rating"},{key:"reviews",label:"Reviews"},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.rating>=4),sortConfig:[{key:"rating",direction:"desc"}],ariaLabel:"Top Rated Products Grid",ariaDescription:"Highest rated products with 4+ star ratings"}])},financial:{name:"Financial",description:"Transaction data with amounts, categories, and statuses",dataConfig:{dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>{if(t.dateRange){const[r,i]=t.dateRange;if(n.date<r||n.date>i)return!1}if(t.amountRange){const[r,i]=t.amountRange;if(Math.abs(n.amount)<r||Math.abs(n.amount)>i)return!1}return!(t.types&&t.types.length>0&&!t.types.includes(n.type)||t.categories&&t.categories.length>0&&!t.categories.includes(n.category)||t.pending!==void 0&&n.pending!==t.pending)}):e,booleanRenderer:e=>Md(e),getDataId:e=>`financial-${e.id}`},createTabs:e=>Ja(e,[{id:"all-transactions",label:"All Transactions",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"},{key:"pending",label:"Status"}],sortConfig:[{key:"date",direction:"desc"}],ariaLabel:"All Transactions Grid",ariaDescription:"Complete transaction history with amounts and categories"},{id:"credits",label:"Credits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`+$${n.amount.toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="credit"),ariaLabel:"Credit Transactions Grid",ariaDescription:"Incoming payments and credits only"},{id:"debits",label:"Debits",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`-$${Math.abs(n.amount).toFixed(2)}`},{key:"category",label:"Category"}],filter:n=>n.filter(r=>r.type==="debit"),ariaLabel:"Debit Transactions Grid",ariaDescription:"Outgoing payments and charges only"},{id:"pending",label:"Pending",columns:[{key:"date",label:"Date",render:n=>n.date.toLocaleDateString()},{key:"description",label:"Description"},{key:"amount",label:"Amount",render:n=>`${n.type==="credit"?"+":"-"}$${Math.abs(n.amount).toFixed(2)}`},{key:"type",label:"Type"}],filter:n=>n.filter(r=>r.pending),ariaLabel:"Pending Transactions Grid",ariaDescription:"Transactions awaiting processing"}])}},Id=(e,t)=>{const n=q_[e];return{dataConfig:n.dataConfig,tabPanels:n.createTabs(t)}},Pd=[{name:"Sarah Johnson",age:34,ews_data:{respiratory_rate_bpm:16,sp02:98,temperature:36.8,systolic_bp:140,heart_rate:82,avpu:"alert"},ews_score:3,ward_name:"Cardiology",room_name:"Room A",bed_name:"A-1",bed_type:"bed",admin_note:"Hypertension monitoring",pathway:"Standard",speciality:"Cardiology",consultant:"Dr. Smith",local_authority:"NHS Trust",early_discharge_notification:"not_required",needs_based_assessment:!1,medically_optimised:!0,criteria_to_reside:!0,date_medically_optimised:"2024-01-15",anticipated_discharge_date:"2024-01-18",dru_suitability:!1,optica_planned_discharge_date:"2024-01-18",optica_date_confirmed:"2024-01-16",dsum:null,medications_tta:"None required",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!1,initial_therapy_contact:"",equipment:"None",district_nurse_referral:!1},{name:"Michael Chen",age:67,ews_data:{respiratory_rate_bpm:20,sp02:94,temperature:37.2,systolic_bp:160,heart_rate:95,avpu:"alert"},ews_score:7,ward_name:"Surgery",room_name:"Room B",bed_name:"B-3",bed_type:"bed",admin_note:"Post-operative monitoring",pathway:"Surgical",speciality:"General Surgery",consultant:"Dr. Johnson",local_authority:"NHS Trust",early_discharge_notification:"due",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!0,date_medically_optimised:"2024-01-17",anticipated_discharge_date:"2024-01-20",dru_suitability:!0,optica_planned_discharge_date:"2024-01-20",optica_date_confirmed:"2024-01-16",dsum:"Complex discharge",medications_tta:"Pain management",transport_booking:!0,transport_status:"In Progress",transport_date:"2024-01-20",transport_mobility:"Wheelchair",fast_track:!1,initial_therapy_contact:"2024-01-17",equipment:"Walking frame",district_nurse_referral:!0},{name:"Emma Thompson",age:28,ews_data:{respiratory_rate_bpm:24,sp02:90,temperature:38.5,systolic_bp:110,heart_rate:105,avpu:"alert"},ews_score:5,ward_name:"Respiratory",room_name:"Room C",bed_name:"C-2",bed_type:"bed",admin_note:"Pneumonia treatment",pathway:"Respiratory",speciality:"Respiratory Medicine",consultant:"Dr. Williams",local_authority:"NHS Trust",early_discharge_notification:"overdue",needs_based_assessment:!0,medically_optimised:!1,criteria_to_reside:!1,date_medically_optimised:"",anticipated_discharge_date:"2024-01-22",dru_suitability:!1,optica_planned_discharge_date:"2024-01-22",optica_date_confirmed:"",dsum:null,medications_tta:"Antibiotics",transport_booking:!1,transport_status:"Pending",transport_date:"",transport_mobility:"Independent",fast_track:!0,initial_therapy_contact:"",equipment:"Oxygen",district_nurse_referral:!1}],X_=[{id:"appt-001",appointment_time:"2024-01-18T09:00:00Z",patient_name:"Sarah Johnson",appointment_type:"Cardiology Consultation",consultant:"Dr. Smith",location:"Clinic Room 3",duration:30,status:"pending"},{id:"appt-002",appointment_time:"2024-01-18T10:30:00Z",patient_name:"Michael Davis",appointment_type:"Post-op Follow-up",consultant:"Dr. Johnson",location:"Surgery Ward",duration:15,status:"active"},{id:"appt-003",appointment_time:"2024-01-18T14:00:00Z",patient_name:"Emma Thompson",appointment_type:"Respiratory Assessment",consultant:"Dr. Wilson",location:"Emergency Department",duration:45,status:"pending"}],K_=[{id:"med-001",medication:"Amlodipine",dose:"5mg",frequency:"Once daily",route:"Oral",next_due:"2024-01-18T08:00:00Z",prescriber:"Dr. Smith",patient_name:"Sarah Johnson",allergies:null,priority:"medium"},{id:"med-002",medication:"Morphine",dose:"10mg",frequency:"Every 4 hours",route:"IV",next_due:"2024-01-18T10:00:00Z",prescriber:"Dr. Johnson",patient_name:"Michael Davis",allergies:"Codeine allergy",priority:"high"},{id:"med-003",medication:"Salbutamol",dose:"2 puffs",frequency:"As needed",route:"Inhaled",next_due:"2024-01-18T12:00:00Z",prescriber:"Dr. Wilson",patient_name:"Emma Thompson",allergies:null,priority:"high"}],J_=[{id:"vitals-001",patient_name:"Sarah Johnson",recorded_time:"2024-01-18T07:30:00Z",temperature:36.8,blood_pressure:"140/90",heart_rate:82,respiratory_rate:16,oxygen_saturation:98,ews_score:3,priority:"medium"},{id:"vitals-002",patient_name:"Michael Davis",recorded_time:"2024-01-18T08:15:00Z",temperature:37.2,blood_pressure:"130/85",heart_rate:98,respiratory_rate:20,oxygen_saturation:95,ews_score:7,priority:"high"},{id:"vitals-003",patient_name:"Emma Thompson",recorded_time:"2024-01-18T09:00:00Z",temperature:38.5,blood_pressure:"110/70",heart_rate:105,respiratory_rate:24,oxygen_saturation:90,ews_score:9,priority:"high"}],Fd=[{id:"PROD001",name:"Wireless Headphones",price:199.99,discountedPrice:149.99,inStock:!0,category:"Electronics",rating:4.5,reviews:1247,tags:["wireless","bluetooth","premium"]},{id:"PROD002",name:"Running Shoes",price:129.99,inStock:!0,category:"Sports",rating:4.8,reviews:892,tags:["running","athletic","comfortable"]},{id:"PROD003",name:"Coffee Maker",price:89.99,discountedPrice:59.99,inStock:!1,category:"Kitchen",rating:4.2,reviews:456,tags:["kitchen","coffee","appliance"]},{id:"PROD004",name:"Smartphone Case",price:24.99,inStock:!0,category:"Accessories",rating:4,reviews:234,tags:["protection","mobile","durable"]}],$d=[{id:"TXN001",date:new Date("2024-01-15"),amount:2500,type:"credit",category:"Salary",description:"Monthly salary payment",accountId:"ACC001",pending:!1,recurring:!0},{id:"TXN002",date:new Date("2024-01-14"),amount:89.5,type:"debit",category:"Groceries",description:"Supermarket shopping",accountId:"ACC001",pending:!1,recurring:!1},{id:"TXN003",date:new Date("2024-01-16"),amount:1200,type:"debit",category:"Rent",description:"Monthly rent payment",accountId:"ACC001",pending:!0,recurring:!0},{id:"TXN004",date:new Date("2024-01-13"),amount:150,type:"credit",category:"Refund",description:"Product return refund",accountId:"ACC001",pending:!1,recurring:!1}],Ld=[{id:"LEAD001",companyName:"Tech Solutions Inc",contactPerson:"John Smith",email:"john@techsolutions.com",status:"qualified",value:5e4,lastContact:new Date("2024-01-15"),source:"Website",isHotLead:!0},{id:"LEAD002",companyName:"Global Industries",contactPerson:"Maria Garcia",email:"maria@globalind.com",status:"contacted",value:25e3,lastContact:new Date("2024-01-14"),source:"Referral",isHotLead:!1},{id:"LEAD003",companyName:"StartupXYZ",contactPerson:"Alex Johnson",email:"alex@startupxyz.com",status:"new",value:15e3,lastContact:new Date("2024-01-16"),source:"Cold Call",isHotLead:!0}],Z_={dataComparator:(e,t)=>e.id===t.id,filterFunction:(e,t)=>t?e.filter(n=>!(t.status&&!t.status.includes(n.status)||t.minValue&&n.value<t.minValue||t.hotLeadsOnly&&!n.isHotLead)):e,booleanRenderer:e=>o.jsx("span",{style:{color:e?"#dc2626":"#6b7280",fontWeight:e?"bold":"normal"},children:e?"ðŸ”¥ Hot Lead":"ðŸ“‹ Standard"}),getDataId:e=>`business-${e.id}`},Q_=()=>[{id:"patients",label:"Patients",data:Pd,columns:[{key:"name",label:"Patient Name"},{key:"age",label:"Age"},{key:"ward_name",label:"Ward"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Records",ariaDescription:"Healthcare patient management with EWS monitoring",cardTemplate:(e,t)=>o.jsx($o,{data:e,columns:t,onSelect:n=>console.log("Selected patient:",n),onAction:(n,r)=>console.log("Patient action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})},{id:"appointments",label:"Appointments",data:X_,columns:[{key:"appointment_time",label:"Time"},{key:"patient_name",label:"Patient"},{key:"appointment_type",label:"Type"},{key:"consultant",label:"Consultant"}],ariaLabel:"Patient Appointments",ariaDescription:"Scheduled appointments and consultations",cardTemplate:(e,t)=>o.jsx(Lo,{data:e,columns:t,onSelect:n=>console.log("Selected appointment:",n),onAction:(n,r)=>console.log("Appointment action:",n,r),status:e.status})},{id:"medications",label:"Medications",data:K_,columns:[{key:"medication",label:"Medication"},{key:"dose",label:"Dose"},{key:"frequency",label:"Frequency"},{key:"next_due",label:"Next Due"}],ariaLabel:"Patient Medications",ariaDescription:"Medication administration and scheduling",cardTemplate:(e,t)=>o.jsx(Ao,{data:e,columns:t,onSelect:n=>console.log("Selected medication:",n),onAction:(n,r)=>console.log("Medication action:",n,r),priority:e.priority})},{id:"vitals",label:"Vital Signs",data:J_,columns:[{key:"patient_name",label:"Patient"},{key:"recorded_time",label:"Time"},{key:"temperature",label:"Temperature"},{key:"ews_score",label:"EWS Score"}],ariaLabel:"Patient Vital Signs",ariaDescription:"Patient vital signs monitoring and EWS scores",cardTemplate:(e,t)=>o.jsx(Eo,{data:e,columns:t,onSelect:n=>console.log("Selected vitals:",n),onAction:(n,r)=>console.log("Vitals action:",n,r),priority:e.ews_score>=7?"high":e.ews_score>=3?"medium":"low"})}],ex=()=>{const[e,t]=B.useState("healthcare"),n=B.useMemo(()=>({healthcare:{title:"Healthcare Workflow Management",description:"Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals",dataConfig:Sd,tabPanels:Q_(),data:Pd},ecommerce:{title:"E-commerce Product Catalog",description:"Product management with pricing and inventory",...Id("ecommerce",Fd),data:Fd},financial:{title:"Financial Transaction Dashboard",description:"Banking and financial data management",...Id("financial",$d),data:$d},business:{title:"Sales Lead Management",description:"Custom CRM configuration with business logic",dataConfig:Z_,tabPanels:Ja(Ld,[{id:"all-leads",label:"All Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"status",label:"Status"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"isHotLead",label:"Priority"}],ariaLabel:"All Sales Leads Grid",ariaDescription:"Complete sales pipeline with lead information"},{id:"hot-leads",label:"Hot Leads",columns:[{key:"companyName",label:"Company"},{key:"contactPerson",label:"Contact"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"lastContact",label:"Last Contact",render:i=>i.lastContact.toLocaleDateString()}],filter:i=>i.filter(a=>a.isHotLead),sortConfig:[{key:"value",direction:"desc"}],ariaLabel:"Hot Leads Grid",ariaDescription:"High-priority leads requiring immediate attention"},{id:"pipeline",label:"Active Pipeline",columns:[{key:"companyName",label:"Company"},{key:"status",label:"Status"},{key:"value",label:"Value",render:i=>`$${i.value.toLocaleString()}`},{key:"source",label:"Source"}],filter:i=>i.filter(a=>["contacted","qualified"].includes(a.status)),ariaLabel:"Active Pipeline Grid",ariaDescription:"Leads currently in the sales pipeline"}]),data:Ld}}),[]),r=n[e];return o.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem",color:"#1f2937"},children:"AriaTabsDataGrid - Comprehensive Demo"}),o.jsx("p",{style:{fontSize:"1.1rem",color:"#6b7280",marginBottom:"2rem",lineHeight:"1.6"},children:"This demo showcases the component's versatility across different domains: healthcare, e-commerce, financial services, and custom business applications. Each configuration demonstrates domain-specific data operations, custom renderers, and specialized filtering logic."}),o.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:Object.keys(n).map(i=>o.jsx(yt,{variant:e===i?"primary":"secondary",onClick:()=>t(i),style:{textTransform:"capitalize"},children:i},i))}),o.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem"},children:[o.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"0.5rem",color:"#1e293b"},children:r.title}),o.jsx("p",{style:{color:"#64748b",marginBottom:"1rem"},children:r.description}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.9rem"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Data Records:"})," ",r.data.length]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Tab Panels:"})," ",r.tabPanels.length]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Features:"})," ",["Row Selection","Custom Filtering","Domain-Specific Renderers","Keyboard Navigation","ARIA Compliance"].join(", ")]})]})]})]}),o.jsx(Xa,{dataConfig:r.dataConfig,tabPanels:r.tabPanels,ariaLabel:`${r.title} Data Grid`,ariaDescription:`Interactive data grid for ${r.description.toLowerCase()}`}),o.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f1f5f9",borderRadius:"0.5rem",border:"1px solid #cbd5e1"},children:[o.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#334155"},children:"Implementation Details"}),o.jsxs("div",{style:{display:"grid",gap:"1rem",fontSize:"0.9rem"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Current Mode:"})," ",e," configuration"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Data Operations:"})," Custom comparator, filter function, and boolean renderer"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Architecture:"})," Generic core with domain-specific plugins and factory helpers"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"State Management:"})," Global row selection with data-object persistence"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Accessibility:"})," Full ARIA support with dynamic labels and descriptions"]})]})]})]})},Ro=e=>o.jsx(ro,{...e}),tx=({children:e,pageTitle:t,pageHeadingProps:n,columnWidth:r=Vn.TwoThirds,mainWrapperSize:i,skipLinkProps:a,headerProps:s,footerProps:l,service:u,navigation:c,search:d,account:f,organisation:p,logo:g,className:b,...h})=>{const m={service:u,navigation:c,search:d,account:f,organisation:p,logo:g,...s};return o.jsxs(o.Fragment,{children:[o.jsx(Mo,{...a}),o.jsx(Ma,{...m}),o.jsx(Ro,{className:b,...h,children:o.jsx(io,{size:i,children:o.jsx(Gn,{children:o.jsxs($r,{width:r,children:[t&&o.jsx(cn,{size:"l",...n,children:t}),e]})})})}),o.jsx(so,{...l})]})},nx=({children:e,title:t,pageHeadingProps:n,columnWidth:r=Vn.TwoThirds,mainWrapperSize:i="small",skipLinkProps:a,headerProps:s,footerProps:l,backLinkProps:u,serviceName:c,serviceHref:d,logo:f,className:p,...g})=>{const b={service:{text:c,href:d},logo:f,navigation:void 0,search:void 0,account:void 0,...s};return o.jsxs(o.Fragment,{children:[o.jsx(Mo,{...a}),o.jsx(Ma,{...b}),o.jsxs(Ro,{className:p,...g,children:[u&&o.jsx(ka,{...u}),o.jsx(io,{size:i,children:o.jsx(Gn,{children:o.jsxs($r,{width:r,children:[t&&o.jsx(cn,{style:{marginTop:"3rem"},size:"l",...n,children:t}),e]})})})]}),o.jsx(so,{...l})]})},Ad=({text:e="Next",html:t,href:n="#",className:r,element:i="a",onClick:a,...s})=>{const l=we("nhsuk-back-link",r),u=we("nhsuk-back-link__link"),c=()=>o.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t?o.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):e,o.jsx("svg",{className:"nhsuk-icon nhsuk-icon__chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",height:"24",width:"24",children:o.jsx("path",{d:"M15.5 12c0 .3-.1.5-.3.7l-5 5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4L13.1 12 8.8 7.7c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l5 5c.2.2.3.4.3.7z"})})]});return o.jsx("div",{className:l,children:i==="button"?o.jsx("button",{className:u,type:"button",onClick:a,...s,children:c()}):o.jsx("a",{className:u,href:n,...s,children:c()})})};Ad.displayName="ForwardLink";const zr=Object.freeze({small:320,smallMax:767,medium:768,large:1025,xlarge:1200,xxlarge:1440});function Ed(){return typeof window>"u"?zr.small:window.innerWidth||document.documentElement.clientWidth||0}function Oo(){const[e,t]=q.useState(Ed());q.useEffect(()=>{if(typeof window>"u")return;const a=()=>t(Ed());return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const n=q.useCallback(a=>e>=zr[a],[e]),r=q.useCallback(a=>e<zr[a],[e]),i=q.useCallback((a,s)=>e>=zr[a]&&e<zr[s],[e]);return{width:e,up:n,down:r,between:i,values:zr}}function rx(e){const{width:t,values:n}=Oo();let r=e.base;const i=["small","medium","large","xlarge","xxlarge"];for(const a of i){const s=n[a];t>=s&&e[a]!==void 0&&(r=e[a])}return r}function Bd(e={}){const{enabled:t=!0,paramSelected:n="nsv",paramDrill:r="nsvDrill"}=e,[i,a]=q.useState(()=>typeof window>"u"||!t?void 0:new URLSearchParams(window.location.search).get(n)),[s,l]=q.useState(()=>typeof window>"u"||!t?!1:new URLSearchParams(window.location.search).get(r)==="1");return q.useEffect(()=>{if(!t||typeof window>"u")return;const u=new URLSearchParams(window.location.search);i?u.set(n,String(i)):u.delete(n),u.set(r,s?"1":"0");const c=`${window.location.pathname}?${u.toString()}${window.location.hash}`;window.history.replaceState(null,"",c)},[i,s,t,n,r]),{selectedId:i,setSelectedId:a,drilledIn:s,setDrilledIn:l}}const ix=({className:e})=>o.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{fill:"currentColor",d:"M10.7 3.3a1 1 0 0 1 0 1.4L7.41 8l3.3 3.3a1 1 0 1 1-1.42 1.4l-4-4a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.42 0Z"})}),ax=({className:e})=>o.jsx("svg",{className:e,width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{fill:"currentColor",d:"M5.3 12.7a1 1 0 0 1 0-1.4L8.59 8l-3.3-3.3a1 1 0 0 1 1.42-1.4l4 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-1.42 0Z"})});function Rd(e){const{items:t,selectedId:n,defaultSelectedId:r,onSelectionChange:i,renderItemContent:a,renderContent:s,renderSecondaryContent:l,forceLayout:u,animated:c=!0,backLabel:d="Back",nextLabel:f="Next",isLoading:p=!1,emptyState:g,a11y:b,className:h,getId:m=se=>se.id,orientation:y="vertical",autoEnableThirdColumn:S=!0,onDrillChange:M,navigationInstructions:w="Use arrow keys to navigate, Enter to open.",initialFocus:v="first",skipFocusOnSelect:D=!1,skipAnnouncements:N=!1,onFocusChange:k,syncUrl:x=!1,urlParamSelected:I="nsv",urlParamDrill:j="nsvDrill",urlSyncDebounceMs:C=0,lazySecondary:$=!1,navFooter:T,collapsibleNav:F=!1,navInitiallyCollapsed:P=!1,onNavCollapseChange:L,collapseToggleLabelShow:te="Show navigation",collapseToggleLabelHide:Y="Hide navigation",collapseToggleIconShow:O,collapseToggleIconHide:H,persistNavCollapsed:z,navCollapsedStorageKey:ie="nsvCollapsed",navCollapsedUrlParam:V="nsvCollapsed",autoContentHeader:ce,contentHeaderLevel:Ce=2,renderContentHeader:he,contentSubheader:pe,secondarySubheader:ee}=e,{up:ae}=Oo(),[me,G]=q.useState(!1);q.useEffect(()=>{G(!0)},[]);const de=me&&ae("medium"),A=me&&ae("xlarge");let R;u?R=u:de?R="two-column":R="list",!u&&S&&l&&A&&(R="three-column");const Z=Bd({enabled:x,paramSelected:I,paramDrill:j}),[le,ue]=q.useState(()=>Z.selectedId!==void 0?Z.selectedId:r),ge=n!==void 0?n:le,fe=t.find(se=>m(se)===ge),[U,W]=q.useState(void 0);q.useEffect(()=>{if(ge===void 0)return;W(ge);const se=setTimeout(()=>W(void 0),220);return()=>clearTimeout(se)},[ge]);const K=q.useRef(null),J=q.useRef(null),E=q.useRef(null),X=q.useRef(null),[ne,re]=q.useState(()=>({contentIndex:0,secondaryIndex:0})),[Q,oe]=q.useState(()=>"nav"),[be,_e]=q.useState(0),xe=()=>[X.current,J.current,E.current].filter(Boolean),je=se=>{const Se=xe(),ve=Math.max(0,Math.min(se,Se.length-1));Se[ve]?.focus(),_e(ve)},ye=q.useCallback(se=>se?Array.from(se.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(ve=>!ve.hasAttribute("disabled")&&ve.tabIndex!==-1):[],[]),Le=q.useCallback(se=>{const Se=ye(J.current);if(!Se.length){J.current?.focus();return}const ve=Math.max(0,Math.min(se,Se.length-1)),Ie=Se[ve];Ie.focus(),setTimeout(()=>{document.activeElement!==Ie&&(Ie.focus(),setTimeout(()=>{document.activeElement!==Ie&&Ie.click()},10))},10),re(We=>({...We,contentIndex:ve}));const qe=We=>{We.key==="Escape"&&(We.preventDefault(),We.stopPropagation(),J.current?.focus(),Ie.removeEventListener("keydown",qe))};Se.forEach(We=>{const Re=We._escapeHandler;Re&&We.removeEventListener("keydown",Re)}),Ie._escapeHandler=qe,Ie.addEventListener("keydown",qe)},[ye]),Ve=q.useCallback(se=>{const Se=ye(E.current);if(!Se.length){E.current?.focus();return}const ve=Math.max(0,Math.min(se,Se.length-1)),Ie=Se[ve];Ie.focus(),setTimeout(()=>{document.activeElement!==Ie&&(Ie.focus(),setTimeout(()=>{document.activeElement!==Ie&&Ie.click()},10))},10),re(We=>({...We,secondaryIndex:ve}));const qe=We=>{We.key==="Escape"&&(We.preventDefault(),We.stopPropagation(),E.current?.focus(),Ie.removeEventListener("keydown",qe))};Se.forEach(We=>{const Re=We._escapeHandler;Re&&We.removeEventListener("keydown",Re)}),Ie._escapeHandler=qe,Ie.addEventListener("keydown",qe)},[ye]),it=se=>{if(se.defaultPrevented)return;const Se=se.key,ve=se.target,Ie=!!mt.current&&mt.current.contains(ve),qe=!!J.current&&J.current.contains(ve),We=!!E.current&&E.current.contains(ve),Re=!!E.current,Ft=ve===X.current||ve===J.current||ve===E.current,Fr=Ge&&(R==="list"||R==="cards"),Ks=qe&&!!ve.closest(".nhs-navigation-split-view__header");if(Q==="containers"&&Ft){if(Se==="ArrowRight"){se.preventDefault();const Ee=xe(),at=Math.min(Ee.length-1,be+1);je(at);return}if(Se==="ArrowLeft"){se.preventDefault();const Ee=Math.max(0,be-1);je(Ee);return}if(Se==="Home"){se.preventDefault(),je(0);return}if(Se==="End"){se.preventDefault(),je(xe().length-1);return}if(Se==="Enter"||Se===" "){if(se.preventDefault(),ve===X.current){if(oe("nav"),mt.current){const Ee=Array.from(mt.current.querySelectorAll("[data-nav-item]"));(Ee[lt>=0?lt:0]||Ee[0])?.focus()}}else ve===J.current?(oe("content"),Le(ne.contentIndex)):ve===E.current&&(oe("secondary"),Ve(ne.secondaryIndex));return}return}if(Se==="Escape"){if(Q==="content"||Q==="secondary"){if(qe||We){if(se.preventDefault(),oe("nav"),mt.current){const at=Array.from(mt.current.querySelectorAll("[data-nav-item]"))[lt>=0?lt:0];setTimeout(()=>at?.focus(),10)}}else if((ve===J.current||ve===E.current)&&(se.preventDefault(),oe("nav"),mt.current)){const at=Array.from(mt.current.querySelectorAll("[data-nav-item]"))[lt>=0?lt:0];setTimeout(()=>at?.focus(),10)}}return}if(Se==="Enter"||Se===" "){if(ve.matches('button, a, input, select, textarea, [role="button"], [role="link"], [role="tab"]'))return;if(ve===J.current&&Q==="content"){se.preventDefault(),se.stopPropagation(),ye(J.current).length>0&&setTimeout(()=>{Le(ne.contentIndex)},50);return}if(ve===E.current&&Q==="secondary"){se.preventDefault(),se.stopPropagation(),ye(E.current).length>0&&setTimeout(()=>{Ve(ne.secondaryIndex)},50);return}}if(Fr&&Ks&&!Ft&&(Se==="ArrowRight"||Se==="ArrowLeft")){const Ee=ye(J.current).filter(at=>at.closest(".nhs-navigation-split-view__header"));if(Ee.length>1){const at=Ee.indexOf(ve);if(at>=0){const Y0=(at+(Se==="ArrowRight"?1:-1)+Ee.length)%Ee.length;se.preventDefault(),Ee[Y0].focus();return}}}if(Se==="ArrowRight"){if(Ie||Q==="nav"){se.preventDefault(),oe("content"),setTimeout(()=>J.current?.focus(),10);return}if(qe||Q==="content"){Re&&(se.preventDefault(),oe("secondary"),setTimeout(()=>E.current?.focus(),10));return}}if(Se==="ArrowLeft"){if(We||Q==="secondary"){se.preventDefault(),oe("content"),setTimeout(()=>J.current?.focus(),10);return}if(qe||Q==="content"){if(se.preventDefault(),oe("nav"),mt.current){const at=Array.from(mt.current.querySelectorAll("[data-nav-item]"))[lt>=0?lt:0];setTimeout(()=>at?.focus(),10)}return}}if(Se==="Home"&&!Ie&&(se.preventDefault(),oe("nav"),mt.current)){const Ee=Array.from(mt.current.querySelectorAll("[data-nav-item]")),at=Ee[lt>=0?lt:0]||Ee[0];setTimeout(()=>at?.focus(),10)}if(Se==="End"){const Ee=Re?E.current:J.current;Ee&&!Ee.contains(ve)&&(se.preventDefault(),Re?(oe("secondary"),setTimeout(()=>E.current?.focus(),10)):(oe("content"),setTimeout(()=>J.current?.focus(),10)))}if(Se==="ArrowDown"||Se==="ArrowUp"){if(ve===J.current&&Se==="ArrowDown"){se.preventDefault(),ye(J.current).length>0&&Le(0);return}if(ve===E.current&&Se==="ArrowDown"){se.preventDefault(),ye(E.current).length>0&&Ve(0);return}if(qe){const Ee=ye(J.current);if(Ee.length){se.preventDefault();const at=Se==="ArrowDown"?1:-1,Mn=(ne.contentIndex+at+Ee.length)%Ee.length;Le(Mn)}}else if(We){const Ee=ye(E.current);if(Ee.length){se.preventDefault();const at=Se==="ArrowDown"?1:-1,Mn=(ne.secondaryIndex+at+Ee.length)%Ee.length;Ve(Mn)}}}},Ge=!!fe&&(R==="list"||R==="cards"),St=q.useMemo(()=>ce===void 0?{mobile:!0,tablet:!1,desktop:!1}:ce===!0?{mobile:!0,tablet:!0,desktop:!0}:ce===!1?{mobile:!1,tablet:!1,desktop:!1}:{mobile:ce.mobile!==void 0?ce.mobile:!0,tablet:ce.tablet||!1,desktop:ce.desktop||!1},[ce]),Dn=me&&ae("medium")&&!ae("xlarge"),jt=me&&ae("xlarge"),an=!!l,pt=R==="three-column",[He,Xt]=q.useState(!1);q.useEffect(()=>{pt&&He&&Xt(!1)},[pt,He]),q.useEffect(()=>{He&&!pt&&(oe("secondary"),_e(2),setTimeout(()=>{E.current?.focus()},50))},[He,pt]),q.useEffect(()=>{!He&&!pt&&Q==="secondary"&&(oe("content"),_e(1),setTimeout(()=>{J.current?.focus()},50))},[He,pt,Q]);const ar=!!fe&&(Ge&&St.mobile||!Ge&&Dn&&St.tablet||!Ge&&jt&&St.desktop)||an&&!pt,zn=`h${Ce}`,fi=fe?q.createElement(zn,{style:{marginLeft:Ge?32:0,marginRight:Ge?32:0}},fe.label):null,hi=Ge?"mobile":Dn?"tablet":"desktop",sr=an&&!pt&&!He,Mr=Ge&&St.mobile?o.jsx(ka,{element:"button",text:d,style:{marginRight:16},onClick:()=>lr(void 0,void 0)}):void 0,Ir=sr?o.jsx(Ad,{element:"button",text:f,onClick:()=>{Xt(!0)}}):void 0,Wn=!pt&&He?o.jsx(ka,{element:"button",text:d,style:{marginRight:16},onClick:()=>Xt(!1)}):void 0,Sa=q.useMemo(()=>{if(!ar||!fe)return null;if(he)return he({item:fe,detailActive:Ge,context:hi,backLink:Mr,defaultHeading:fi});const se=fe&&pe?typeof pe=="function"?pe(fe):pe:null;return o.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[Wn||Mr,o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:[fi,se&&o.jsx("div",{className:"nhs-navigation-split-view__subheader",children:se})]})]}),Ir&&o.jsx("div",{style:{marginLeft:"auto"},children:Ir})]})},[ar,fe,he,Ge,hi,Mr,Wn,fi,Ir,pe]);q.useEffect(()=>{if(!x)return;const se=R==="three-column";let Se=!1;const ve=()=>{Se||(Z.selectedId!==ge&&Z.setSelectedId(ge),Z.drilledIn!==se&&Z.setDrilledIn(se))};if(C&&C>0){const Ie=setTimeout(ve,C);return()=>{Se=!0,clearTimeout(Ie)}}else ve()},[x,Z,ge,R,C]),q.useEffect(()=>{if(!x)return;const se=()=>{const Se=new URLSearchParams(window.location.search),ve=Se.get(I);Se.get(j),ue(ve===null?void 0:ve)};return window.addEventListener("popstate",se),()=>window.removeEventListener("popstate",se)},[x,I,j,u,l]);const or=q.useRef(0),Kt=q.useRef(null),lr=q.useCallback((se,Se)=>{se!==ge&&(n===void 0&&ue(se),i?.(se,Se))},[n,i,ge]);q.useEffect(()=>{if(!D&&Ge&&J.current){const se=setTimeout(()=>J.current?.focus(),30);return()=>clearTimeout(se)}},[Ge,ge,D]);const mt=q.useRef(null),[lt,Pr]=q.useState(()=>v==="first"?0:-1);q.useEffect(()=>{if(lt<0||!mt.current)return;const Se=Array.from(mt.current.querySelectorAll("[data-nav-item]"))[lt];if(Se){document.activeElement!==Se&&Se.focus(),or.current=lt;const ve=t[lt];k?.(ve?m(ve):void 0,ve,lt)}},[lt,t,k,m]);const Yc=se=>{const Se=y==="vertical"?"ArrowDown":"ArrowRight",ve=y==="vertical"?"ArrowUp":"ArrowLeft";if(se.key==="ArrowRight"&&y==="vertical"){se.preventDefault(),He?(oe("secondary"),setTimeout(()=>{E.current?.focus()},10)):(oe("content"),setTimeout(()=>{J.current?.focus()},10));return}if(se.key===Se)se.preventDefault(),Pr(Ie=>Math.min(t.length-1,Ie+1));else if(se.key===ve)se.preventDefault(),Pr(Ie=>Math.max(0,Ie-1));else if(se.key==="Home")se.preventDefault(),Pr(0);else if(se.key==="End")se.preventDefault(),Pr(t.length-1);else if(se.key==="Enter"||se.key===" "){se.preventDefault();const Ie=t[lt];Ie&&!Ie.disabled&&lr(m(Ie),Ie)}else if(se.key.length===1&&/[a-z0-9]/i.test(se.key)){Kt.current||(Kt.current={buffer:"",last:0});const Ie=Date.now(),qe=700,We=se.key.toLowerCase();Ie-Kt.current.last>qe?Kt.current.buffer=We:Kt.current.buffer+=We,Kt.current.last=Ie;let Re=Kt.current.buffer;const Ft=Re.split("").every(Mn=>Mn===Re[0]),Fr=t.map(Mn=>String(Mn.label||"").toLowerCase());let Ks=0;lt>=0&&(Ks=(lt+1)%t.length);let Ee;const at=(Mn,Y0)=>{const q0=t.length;for(let Kc=0;Kc<q0;Kc++){const Jc=(Ks+Kc)%q0;if(!t[Jc].disabled&&Fr[Jc].startsWith(Mn))return Jc}};Ft&&Re.length>1?Ee=at(Re[0]):(Ee=at(Re),Ee===void 0&&Re.length>1&&(Ee=at(Re[Re.length-1]),Ee!==void 0&&Kt.current&&(Kt.current.buffer=Re[Re.length-1]))),Ee!==void 0&&Pr(Ee)}},pi=q.useMemo(()=>{if(z&&(z==="url"||z==="both")&&typeof window<"u"){const Se=new URLSearchParams(window.location.search).get(V);if(Se==="1")return!0;if(Se==="0")return!1}if(z&&(z==="localStorage"||z==="both")&&typeof window<"u")try{const se=window.localStorage.getItem(ie);if(se==="1")return!0;if(se==="0")return!1}catch{}return P},[z,P,ie,V]),[sn,qc]=q.useState(pi);q.useEffect(()=>{L?.(sn)},[sn,L]);const Xc=q.useCallback(()=>{de&&F&&qc(se=>!se)},[de,F]);q.useEffect(()=>{if(z&&!(typeof window>"u")){if(z==="localStorage"||z==="both")try{window.localStorage.setItem(ie,sn?"1":"0")}catch{}if(z==="url"||z==="both"){const se=new URLSearchParams(window.location.search);se.set(V,sn?"1":"0");const Se=`${window.location.pathname}?${se.toString()}${window.location.hash}`;window.history.replaceState(null,"",Se)}}},[sn,z,ie,V]);const De=["nhs-navigation-split-view",c?"nhs-navigation-split-view--animated":"",Ge?"nhs-navigation-split-view--detail-active":"",R==="three-column"?"nhs-navigation-split-view--three-column":"",F&&de&&sn?"nhs-navigation-split-view--nav-collapsed":"",h].filter(Boolean).join(" "),ke=q.useRef(null);q.useEffect(()=>{if(!N&&ke.current){const se=fe?`Selected ${fe.label}`:"Selection cleared";ke.current.textContent=se}},[fe,N]),q.useEffect(()=>{!Ge&&ge==null&&mt.current&&mt.current.querySelectorAll("[data-nav-item]")[or.current]?.focus()},[Ge,ge]);const Be=R==="three-column",[Qe,Me]=q.useState(!1);q.useEffect(()=>{Be&&!Qe&&Me(!0)},[Be,Qe]);const Pt=q.useRef(Be);q.useEffect(()=>{Pt.current!==Be&&(M?.(Be),Pt.current=Be)},[Be,M]);const tt=()=>{if(R==="cards")return o.jsxs("ul",{className:"nhs-navigation-split-view__cards",role:"listbox","aria-activedescendant":ge?String(ge):void 0,children:[t.map(ve=>{const Ie=m(ve),qe=Ie===ge;return o.jsx("li",{className:"nhs-navigation-split-view__card-item",role:"option","aria-selected":qe,children:o.jsxs("button",{id:String(Ie),type:"button",className:"nhs-navigation-split-view__card","data-selected":qe||void 0,"data-disabled":ve.disabled||void 0,disabled:ve.disabled,onClick:()=>!ve.disabled&&lr(Ie,ve),children:[ve.icon&&o.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:ve.icon}),o.jsx("span",{className:"nhs-navigation-split-view__item-label",children:ve.label}),ve.description&&o.jsx("span",{className:"nhs-navigation-split-view__item-description",children:ve.description}),a?.(ve),ve.badge!==void 0&&o.jsx("span",{className:"nhs-navigation-split-view__badge",children:ve.badge})]})},Ie)}),t.length===0&&!p&&o.jsx("li",{className:"nhs-navigation-split-view__card-item","aria-disabled":"true",children:g||o.jsx("div",{style:{padding:16},children:"No items"})})]});const se="nsv-nav-instructions",Se=q.useMemo(()=>q.memo(({item:ve,idx:Ie,selected:qe,focused:We})=>{const Re=m(ve),Ft=ve.disabled?{"aria-disabled":!0,tabIndex:-1}:{tabIndex:We?0:-1,onClick:()=>{or.current=Ie,lr(Re,ve)},onKeyDown:Fr=>{(Fr.key==="Enter"||Fr.key===" ")&&(Fr.preventDefault(),or.current=Ie,lr(Re,ve))}};return o.jsxs("li",{id:String(Re),"data-nav-item":!0,className:"nhs-navigation-split-view__list-item nhs-navigation-split-view__item-button",role:"option","aria-selected":qe,"aria-current":qe?"true":void 0,"data-selected":qe||void 0,"data-disabled":ve.disabled||void 0,...Ft,children:[ve.icon&&o.jsx("span",{className:"nhs-navigation-split-view__item-icon",children:ve.icon}),o.jsxs("span",{className:"nhs-navigation-split-view__item-content",children:[o.jsx("span",{className:"nhs-navigation-split-view__item-label",children:ve.label}),ve.description&&o.jsx("span",{className:"nhs-navigation-split-view__item-description",children:ve.description}),a?.(ve)]}),ve.badge!==void 0&&o.jsx("span",{className:"nhs-navigation-split-view__badge",children:ve.badge})]})}),[m,lr,a]);return o.jsxs(o.Fragment,{children:[o.jsxs("ul",{ref:mt,className:"nhs-navigation-split-view__list",onKeyDown:Yc,role:"listbox","aria-label":"Navigation items","aria-describedby":se,"aria-activedescendant":ge?String(ge):void 0,children:[t.map((ve,Ie)=>o.jsx(Se,{item:ve,idx:Ie,selected:m(ve)===ge,focused:Ie===lt||lt===-1&&Ie===0&&v==="first","data-just-selected":m(ve)===U?"true":void 0},m(ve))),t.length===0&&!p&&o.jsx("li",{className:"nhs-navigation-split-view__list-item","aria-disabled":"true",children:g||o.jsx("div",{style:{padding:16},children:"No items"})})]}),o.jsx("div",{id:se,style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:w})]})};return o.jsx("div",{ref:K,className:De,"aria-label":b?.rootLabel,"data-layout":R,onKeyDown:it,children:o.jsxs("div",{className:"nhs-navigation-split-view__body",children:[o.jsxs("div",{className:"nhs-navigation-split-view__panes","data-active-detail":Ge||void 0,style:{transform:Ge?"translateX(-100%)":void 0},children:[o.jsxs("div",{ref:X,className:"nhs-navigation-split-view__nav-pane",role:"navigation","aria-label":b?.navigationLabel||"Items","data-collapsed":sn||void 0,tabIndex:0,children:[F&&de&&o.jsx("div",{className:"nhs-navigation-split-view__nav-collapse",children:o.jsx("button",{type:"button",onClick:Xc,className:"nhs-navigation-split-view__nav-collapse-btn","aria-label":sn?te:Y,title:sn?te:Y,children:sn?O||o.jsx(ax,{}):H||o.jsx(ix,{})})}),o.jsx("div",{className:"nhs-navigation-split-view__nav-scroll",children:tt()}),T&&o.jsx("div",{className:"nhs-navigation-split-view__nav-footer",role:"contentinfo",children:T})]}),o.jsxs("div",{ref:J,className:"nhs-navigation-split-view__content-pane",role:"region","aria-label":b?.contentLabel||"Content","data-has-selection":!!fe||void 0,tabIndex:0,style:{display:He&&!pt?"none":void 0},children:[ar&&o.jsx("div",{className:"nhs-navigation-split-view__header",children:Sa}),o.jsx("div",{className:"nhs-navigation-split-view__content-inner",style:{padding:32,flex:1},children:s(fe)})]}),R==="three-column"&&(!$||Qe)||He&&!pt?o.jsx("div",{ref:E,className:"nhs-navigation-split-view__secondary-pane",role:"region","aria-label":b?.secondaryContentLabel||"Secondary",tabIndex:0,children:o.jsxs("div",{className:"nhs-navigation-split-view__secondary-inner",style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[He&&!pt&&o.jsx("div",{className:"nhs-navigation-split-view__header",children:o.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,flex:"1 1 auto",minWidth:0},children:[Wn,o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,minWidth:0},children:o.jsx("h2",{style:{marginLeft:0,marginRight:0},children:fe&&typeof fe=="object"&&"label"in fe?fe.label:String(fe)})})]})})}),fe&&ee&&o.jsx("div",{className:"nhs-navigation-split-view__secondary-header",style:{padding:"16px 32px",borderBottom:"1px solid var(--nsplit-divider)"},children:typeof ee=="function"?ee(fe):ee}),o.jsx("div",{style:{padding:32,flex:1,minWidth:0},children:l?.(fe)})]})}):null]}),o.jsx("div",{ref:ke,"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"}}),o.jsx("div",{"aria-live":"polite",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0 0 0 0)"},children:Be?"Expanded to three column layout":"In two column layout"})]})})}Rd.displayName="NavigationSplitView";const sx=typeof window<"u"&&window.document?q.useLayoutEffect:q.useEffect,Od=(e,t,n,r)=>e==null||Number.isNaN(e)?r:Math.min(n,Math.max(t,e)),ox=({item:e,maxLines:t,enableDrilldown:n,onExpand:r,isActive:i,topLaneIndex:a})=>{const{ariaLabel:s}=e,l=`${e._pxLeft}px`,u=`${e._pxWidth}px`,c=`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${a})`,d=Math.floor(e._startFraction)+2,f=Math.max(1,Math.round(e._spanColumns)),p=n&&e.childItems&&e.childItems.length>0,g=h=>{p&&(h.preventDefault(),r?.(e))},b=p?{role:"button",tabIndex:0,"aria-haspopup":"dialog","aria-expanded":i||!1,onClick:g,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&g(h),h.key==="Escape"&&i&&g(h)}}:{};return o.jsxs("div",{className:we("nhsuk-product-roadmap__item",p&&"nhsuk-product-roadmap__item--expandable",i&&"nhsuk-product-roadmap__item--active"),style:{left:l,width:u,top:c,"--item-height":t},role:"gridcell","aria-label":s,"aria-colindex":d,"aria-colspan":f,...b,children:[o.jsx("div",{className:"nhsuk-product-roadmap__item-bg","aria-hidden":"true"}),o.jsxs("div",{className:"nhsuk-product-roadmap__item-content",children:[o.jsx("span",{className:"nhsuk-product-roadmap__item-title",children:e.title}),p&&o.jsx("span",{className:we("nhsuk-product-roadmap__item-expander",i&&"nhsuk-product-roadmap__item-expander--open"),"aria-hidden":"true"})]})]})},Hd=B.memo(({dateHeadings:e,categories:t,columnWidthPx:n=400,itemMaxLines:r=2,className:i,ariaLabel:a="Product roadmap",enableDrilldown:s=!1,onToggleItem:l,drilldownMode:u="overlay",...c})=>{const[d,f]=B.useState(()=>new Set),[p,g]=B.useState(()=>new Set),b=B.useRef(new Set),h=B.useCallback(C=>d.has(C),[d]),m=B.useCallback(C=>{f($=>{const T=new Set($);return T.has(C.id)?(T.delete(C.id),g(F=>{const P=new Set(F);return P.add(C.id),P}),setTimeout(()=>g(F=>{const P=new Set(F);return P.delete(C.id),P}),240),l?.(C.id,!1)):(T.add(C.id),l?.(C.id,!0)),T})},[l]);sx(()=>{if(u!=="inline"||!s||typeof document>"u")return;const C=[];if(d.forEach(P=>{b.current.has(P)||C.push(P)}),b.current=new Set(d),!C.length)return;const $=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1,T=C.map(P=>`.nhsuk-product-roadmap__inline-children[data-parent="${P}"] .nhsuk-product-roadmap__inline-child`).join(","),F=Array.from(document.querySelectorAll(T));if(F.length){if($){F.forEach(P=>{P.style.opacity="1",P.style.transform="translateY(0)"});return}Promise.resolve().then(()=>iC).then(P=>{(P.gsap||P.default||P).to(F,{opacity:1,y:0,duration:.32,ease:"power2.out",stagger:.05})}).catch(()=>{F.forEach(P=>{P.style.opacity="1",P.style.transform="translateY(0)"})})}},[d,u,s]);const y=B.useCallback(()=>{d.size&&f(new Set)},[d]),S=we("nhsuk-product-roadmap",i),M=Od(n,120,1200,400),w=Od(r,1,6,2),v=B.useMemo(()=>e.map(C=>new Date(C+" 01")),[e]),D=B.useMemo(()=>{if(v.length===0){const T=new Date;return[T,T]}const C=new Date(v[0]),$=Si.offset(new Date(v[v.length-1]),1);return[C,$]},[v]),N=B.useMemo(()=>Do().domain(D).range([0,v.length*M]),[D,v.length,M]),k=B.useCallback(C=>{if(C.startDate){const Y=new Date(C.startDate),O=new Date(C.endDate??C.startDate);O<Y&&O.setTime(Y.getTime());const H=N(Y),z=Si.offset(new Date(O),1);let ie=N(z);Number.isFinite(ie)||(ie=H+M);const V=Math.max(M*.25,ie-H),ce=H/M,Ce=V/M;return{...C,_pxLeft:H,_pxWidth:V,_startFraction:ce,_spanColumns:Ce}}const $=C.date??1,T=C.dateOffset??0,F=C.length??1,P=C.partialLength??1,L=$-1+T,te=F-1+P;return{...C,_pxLeft:L*M,_pxWidth:te*M,_startFraction:L,_spanColumns:te}},[N,M]),x=B.useMemo(()=>t.map(C=>{const T=C.roadmapItems.map(P=>{const L=!P.childItems&&P.children?{...P,childItems:P.children}:{...P};return k(L)}).sort((P,L)=>P._pxLeft!==L._pxLeft?P._pxLeft-L._pxLeft:L._pxWidth-P._pxWidth),F=[];return T.forEach(P=>{const L=P._pxLeft,te=P._pxLeft+P._pxWidth;let Y=F.findIndex(O=>O<=L);Y===-1&&(Y=F.length,F.push(0)),F[Y]=te,P.verticalPosition=Y+1}),{...C,roadmapItems:T,_laneCount:F.length}}),[t,k]),I=B.useMemo(()=>x.map(C=>C._laneCount||1),[x]),j=B.useMemo(()=>`var(--category-width) ${e.map(()=>"var(--column-width)").join(" ")}`,[e]);return o.jsxs("div",{className:S,style:{"--column-width":`${M}px`,gridTemplateColumns:j},role:"grid","aria-label":a,"aria-colcount":e.length+1,"aria-rowcount":x.length+1,...c,children:[o.jsxs("div",{className:"nhsuk-product-roadmap__header-row",role:"row","aria-rowindex":1,children:[o.jsx("div",{className:"nhsuk-product-roadmap__header-cell",role:"columnheader","aria-colindex":1,children:o.jsx("span",{className:"nhsuk-visually-hidden",children:"Category"})}),e.map((C,$)=>o.jsx("div",{className:"nhsuk-product-roadmap__date-heading",role:"columnheader","aria-colindex":$+2,children:C},`${C}-${$}`))]}),x.map((C,$)=>{const T=$+2,F=I[$];let P,L=0,te=[];s&&u==="inline"&&(te=C.roadmapItems.filter(z=>h(z.id)&&z.childItems&&z.childItems.length).map(z=>({id:z.id,lane:z.verticalPosition||1,count:z.childItems.length})).sort((z,ie)=>z.lane-ie.lane),L=te.reduce((z,ie)=>z+ie.count,0));const Y=F+L;P=`calc((${Y} * var(--roadmap-item-block-height)) + (max(0, ${Y} - 1) * var(--roadmap-row-gap)))`;const O={};let H=0;return te.forEach(z=>{H+=z.count,O[z.lane+1]=H}),o.jsxs("div",{className:"nhsuk-product-roadmap__row",role:"row","aria-rowindex":T,children:[o.jsx("div",{className:"nhsuk-product-roadmap__category-cell",role:"rowheader","aria-colindex":1,children:C.heading}),o.jsx("div",{className:"nhsuk-product-roadmap__items-row",style:{gridColumn:`2 / span ${e.length}`,height:P},children:o.jsx("div",{className:"nhsuk-product-roadmap__items-layer",children:C.roadmapItems.map((z,ie)=>{const V=(z.verticalPosition||1)-1,ce=te.filter(ee=>ee.lane-1<V).reduce((ee,ae)=>ee+ae.count,0),Ce=V+ce,he=h(z.id),pe=p.has(z.id);return o.jsxs(B.Fragment,{children:[o.jsx(ox,{item:z,maxLines:w,enableDrilldown:s,onExpand:m,isActive:he,topLaneIndex:Ce,laneOffset:ce}),s&&u==="inline"&&(he||pe)&&z.childItems&&o.jsx("div",{"data-parent":z.id,className:"nhsuk-product-roadmap__inline-children","aria-label":`${z.title} child tasks`,children:z.childItems.map((ee,ae)=>{const me="calc(var(--roadmap-item-block-height) * 0.75)";let G=z._pxLeft,de=z._pxWidth;if(ee.startDate){const Z=new Date(ee.startDate);let le=ee.endDate?new Date(ee.endDate):new Date(Z);le<Z&&(le=new Date(Z));const ue=new Date(le);ue.setDate(ue.getDate()+1);const ge=N(Z);let fe=N(ue);(!Number.isFinite(fe)||fe<=ge)&&(fe=ge+6),G=ge,de=Math.max(6,fe-ge)}const R=Ce+1+ae;return o.jsxs("div",{className:we("nhsuk-product-roadmap__inline-child",ee.status&&`nhsuk-product-roadmap__inline-child--status-${ee.status}`,!he&&pe&&"nhsuk-product-roadmap__inline-child--collapsing"),style:{left:`${G}px`,width:`${de}px`,top:`calc((var(--roadmap-item-block-height) + var(--roadmap-row-gap)) * ${R})`,height:me,opacity:he?0:void 0,transform:he?"translateY(-6px)":void 0},children:[o.jsx("div",{className:"nhsuk-product-roadmap__inline-child-bg"}),o.jsx("div",{className:"nhsuk-product-roadmap__inline-child-content",children:ee.title})]},ee.id??ae)})})]},z.id??ie)})})})]},`${C.heading}-${$}`)}),s&&u==="overlay"&&d.size===1&&(()=>{const C=Array.from(d)[0],$=t.flatMap(T=>T.roadmapItems).find(T=>T.id===C);return!$||!$.childItems?null:o.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-overlay",role:"dialog","aria-modal":"true","aria-label":`${$.title} details`,children:[o.jsxs("div",{className:"nhsuk-product-roadmap__drilldown-panel",children:[o.jsxs("header",{className:"nhsuk-product-roadmap__drilldown-header",children:[o.jsx("h3",{className:"nhsuk-product-roadmap__drilldown-title",children:$.title}),o.jsx("button",{type:"button",className:"nhsuk-product-roadmap__drilldown-close",onClick:y,"aria-label":"Close details",children:"Ã—"})]}),o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-content",children:$.content}),o.jsx("ul",{className:"nhsuk-product-roadmap__drilldown-children",children:$.childItems.map((T,F)=>o.jsxs("li",{className:"nhsuk-product-roadmap__drilldown-child",children:[o.jsx("strong",{className:"nhsuk-product-roadmap__drilldown-child-title",children:T.title}),T.content&&o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-child-content",children:T.content})]},T.id??F))})]}),o.jsx("div",{className:"nhsuk-product-roadmap__drilldown-backdrop",onClick:y,"aria-hidden":"true"})]})})()]})});Hd.displayName="ProductRoadmap";function zd(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=zd(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Za(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=zd(e))&&(r&&(r+=" "),r+=t);return r}function _t(e){return function(){return e}}const Ho=Math.PI,zo=2*Ho,pr=1e-6,lx=zo-pr;function Wd(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function cx(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Wd;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class ux{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Wd:cx(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,u=r-t,c=i-n,d=s-t,f=l-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>pr)if(!(Math.abs(f*u-c*d)>pr)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-s,b=i-l,h=u*u+c*c,m=g*g+b*b,y=Math.sqrt(h),S=Math.sqrt(p),M=a*Math.tan((Ho-Math.acos((h+p-m)/(2*y*S)))/2),w=M/S,v=M/y;Math.abs(w-1)>pr&&this._append`L${t+w*d},${n+w*f}`,this._append`A${a},${a},0,0,${+(f*g>d*b)},${this._x1=t+v*u},${this._y1=n+v*c}`}}arc(t,n,r,i,a,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),c=t+l,d=n+u,f=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>pr||Math.abs(this._y1-d)>pr)&&this._append`L${c},${d}`,r&&(p<0&&(p=p%zo+zo),p>lx?this._append`A${r},${r},0,1,${f},${t-l},${n-u}A${r},${r},0,1,${f},${this._x1=c},${this._y1=d}`:p>pr&&this._append`A${r},${r},0,${+(p>=Ho)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Ud(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new ux(t)}function Vd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Gd(e){this._context=e}Gd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Yd(e){return new Gd(e)}function qd(e){return e[0]}function Xd(e){return e[1]}function Kd(e,t){var n=_t(!0),r=null,i=Yd,a=null,s=Ud(l);e=typeof e=="function"?e:e===void 0?qd:_t(e),t=typeof t=="function"?t:t===void 0?Xd:_t(t);function l(u){var c,d=(u=Vd(u)).length,f,p=!1,g;for(r==null&&(a=i(g=s())),c=0;c<=d;++c)!(c<d&&n(f=u[c],c,u))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(f,c,u),+t(f,c,u));if(g)return a=null,g+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:_t(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:_t(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:_t(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),l):r},l}function Wo(e,t,n){var r=null,i=_t(!0),a=null,s=Yd,l=null,u=Ud(c);e=typeof e=="function"?e:e===void 0?qd:_t(+e),t=typeof t=="function"?t:_t(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Xd:_t(+n);function c(f){var p,g,b,h=(f=Vd(f)).length,m,y=!1,S,M=new Array(h),w=new Array(h);for(a==null&&(l=s(S=u())),p=0;p<=h;++p){if(!(p<h&&i(m=f[p],p,f))===y)if(y=!y)g=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=p-1;b>=g;--b)l.point(M[b],w[b]);l.lineEnd(),l.areaEnd()}y&&(M[p]=+e(m,p,f),w[p]=+t(m,p,f),l.point(r?+r(m,p,f):M[p],n?+n(m,p,f):w[p]))}if(S)return l=null,S+""||null}function d(){return Kd().defined(i).curve(s).context(a)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:_t(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:_t(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:_t(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:_t(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:_t(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:_t(+f),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:_t(!!f),c):i},c.curve=function(f){return arguments.length?(s=f,a!=null&&(l=s(a)),c):s},c.context=function(f){return arguments.length?(f==null?a=l=null:l=s(a=f),c):a},c}function Jd(e){return e<0?-1:1}function Zd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),l=(a*i+s*r)/(r+i);return(Jd(a)+Jd(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function Qd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Uo(e,t,n){var r=e._x0,i=e._y0,a=e._x1,s=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,i+l*t,a-l,s-l*n,a,s)}function Qa(e){this._context=e}Qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Uo(this,this._t0,Qd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Uo(this,Qd(this,n=Zd(this,e,t)),n);break;default:Uo(this,this._t0,n=Zd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},Object.create(Qa.prototype).point=function(e,t){Qa.prototype.point.call(this,t,e)};function es(e){return new Qa(e)}function dx(e,t,n){const r=gu(e,t);return Do().domain(r).range(n)}function ef(e,t,n){const[r,i]=gu(e,t);if(!(Number.isFinite(r)&&Number.isFinite(i)))return za().domain([0,0]).range(n);let s;if(r<=0)s=Math.min(0,r);else{const u=i-r,c=(u>0?u:r)*.1;s=Math.max(0,r-c),s===r&&(s=Math.max(0,r*.9))}const l=i??0;return za().domain([s,l]).nice().range(n)}function Vo(e,t,n,r){const i=Kd().x(t).y(n);return r?.smooth!==!1&&i.curve(es),i(e)??""}function fx(e={}){const t=q.useRef(null),n=q.useMemo(()=>({top:e.top??16,right:e.right??16,bottom:e.bottom??32,left:e.left??48}),[e.bottom,e.left,e.right,e.top]),[r,i]=q.useState({width:0,height:0});q.useLayoutEffect(()=>{if(!t.current)return;const l=new ResizeObserver(u=>{for(const c of u){const{width:d,height:f}=c.contentRect;i({width:d,height:f})}});return l.observe(t.current),()=>l.disconnect()},[]);const a=Math.max(0,r.width-n.left-n.right),s=Math.max(0,r.height-n.top-n.bottom);return{width:r.width,height:r.height,innerWidth:a,innerHeight:s,margin:n,ref:t}}const tf=q.createContext(null);function Yn(){return q.useContext(tf)}const nf=({height:e=240,margin:t,width:n,className:r="fdp-chart",children:i,role:a="group",ariaLabel:s})=>{const l=fx(t),u={height:e,position:"relative"};return n!==void 0&&(u.width=typeof n=="number"?`${n}px`:n),o.jsx("div",{ref:l.ref,className:r,style:u,role:a,"aria-label":s,children:o.jsx(tf.Provider,{value:l,children:i})})},Go=q.createContext(null),mr=()=>q.useContext(Go),rf=({series:e,innerWidth:t,innerHeight:n,parseX:r,children:i,xTickCount:a=6,yTickCount:s=5,yDomain:l,xPadding:u,yPadding:c})=>{const d=Yn(),f=t??d?.innerWidth??0,p=n??d?.innerHeight??0,g=q.useMemo(()=>e.flatMap(w=>w.data),[e]),b=q.useCallback(w=>{if(r)return r(w);const v=w.x;return v instanceof Date?v:new Date(v)},[r]),h=u??6,m=c??6,y=q.useMemo(()=>dx(g,b,[h,Math.max(0,f-h)]),[g,b,f,h]),S=q.useMemo(()=>{if(l){const w=ef([],v=>v.y,[Math.max(0,p-m),m]);return w.domain(l),w}return ef(g,w=>w.y,[Math.max(0,p-m),m])},[g,p,l]),M=q.useMemo(()=>({xScale:y,yScale:S,getXTicks:(w=a)=>y.ticks(w),getYTicks:(w=s)=>S.ticks(w)}),[y,S,a,s]);return o.jsx(Go.Provider,{value:M,children:i})},Yo=({type:e,scale:t,tickCount:n,tickValues:r,formatTick:i,label:a,offset:s,className:l,minLabelSpacing:u,maxTickLabelLength:c,autoMinLabelSpacing:d=e==="x",labelAngle:f=0,allowLabelWrap:p=!0,tickFormatPreset:g})=>{const b=mr(),h=Yn(),m=t||(e==="x"?b?.xScale:b?.yScale),y=n??(e==="x"?6:5),S=typeof i=="function",M=q.useMemo(()=>{if(S||!g)return;const D=N=>new Intl.DateTimeFormat(void 0,N);switch(g){case"dayShortMonth":return N=>{const k=N instanceof Date?N:new Date(N);return`${k.getDate()}
${D({month:"short"}).format(k)}`};case"dayShortMonthYear":return N=>{const k=N instanceof Date?N:new Date(N);return`${k.getDate()}
${D({month:"short"}).format(k)} ${k.getFullYear()}`};case"shortMonth":return N=>{const k=N instanceof Date?N:new Date(N);return D({month:"short"}).format(k)};case"shortMonthYear":return N=>{const k=N instanceof Date?N:new Date(N);return`${D({month:"short"}).format(k)} ${k.getFullYear()}`};case"hourMinute":return N=>{const k=N instanceof Date?N:new Date(N);return D({hour:"2-digit",minute:"2-digit"}).format(k)};default:return}},[S,g]);let w=S?i:M||(D=>String(D));const v=q.useMemo(()=>r&&Array.isArray(r)?r:m?typeof m.ticks=="function"?m.ticks(y):m.domain?m.domain():[]:[],[m,y,r]);if(e==="x"&&!S&&!g&&v.length&&v.every(D=>D instanceof Date)){const D=v[0],N=v[v.length-1],k=N.getTime()-D.getTime(),x=24*3600*1e3,I=365*x,j=D.getFullYear()===N.getFullYear(),C=new Intl.DateTimeFormat(void 0,{month:"short"});if(k<2*x){const $=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"});w=T=>$.format(T)}else if(k<32*x)w=$=>{const T=$;return`${T.getDate()} ${C.format(T)}`};else if(k<I&&j)w=$=>C.format($);else if(k<2*I){const $=new Set;w=T=>{const F=T,P=F.getMonth();return $.has(P)||$.add(P),`${C.format(F)} ${F.getFullYear()}`}}else w=$=>String($.getFullYear())}if(!m||!h)return null;if(e==="x"){const D=s??h.innerHeight,N=typeof m.bandwidth=="function",k=N?m.bandwidth():0,x=C=>{const $=m(C);return N?$+k/2:$};let I=u??0;if(d&&u==null){const C=v.map(T=>w(T).replace(/\n.*/g,"")),$=C.length?C.reduce((T,F)=>T+F.length,0)/C.length:0;I=Math.max(12,Math.round($*6+4))}const j=q.useMemo(()=>{if(r&&Array.isArray(r)||I<=0)return v;const C=[];let $=-1/0;for(const T of v){const F=x(T);F-$>=I&&(C.push(T),$=F)}return C},[v,m,I,r,N,k]);return o.jsxs("g",{className:["fdp-axis","fdp-axis--x",l].filter(Boolean).join(" "),transform:`translate(0,${D})`,fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[o.jsx("line",{x1:0,x2:h.innerWidth,y1:0,y2:0,stroke:"currentColor"}),j.map((C,$)=>{const T=w(C),F=c&&T.length>c?T.slice(0,Math.max(1,c-1))+"â€¦":T,P=p?F.split(/\n/):[F.replace(/\n/g," ")],L=f<0?"end":f>0?"start":"middle";return o.jsxs("g",{transform:`translate(${x(C)},0)`,children:[o.jsx("line",{y2:6,stroke:"currentColor"}),o.jsxs("text",{y:9,textAnchor:L,className:"fdp-axis__tick",dominantBaseline:"hanging",transform:f?`rotate(${f})`:void 0,fontFamily:"inherit",children:[P.map((te,Y)=>o.jsx("tspan",{x:0,dy:Y===0?0:"1.1em",children:te},Y)),F!==T&&o.jsx("title",{children:T})]})]},C?.toString?.()||$)})]})}return o.jsxs("g",{className:["fdp-axis","fdp-axis--y",l].filter(Boolean).join(" "),fontFamily:"var(--nhs-fdp-font-family-base, var(--fdp-chart-font-family))",children:[v.map((D,N)=>{const k=w(D),x=c&&k.length>c?k.slice(0,Math.max(1,c-1))+"â€¦":k,I=p?x.split(/\n/):[x.replace(/\n/g," ")];return o.jsxs("g",{transform:`translate(0,${m(D)})`,children:[o.jsx("line",{x2:-6,stroke:"currentColor"}),o.jsxs("text",{x:-9,dy:"0.32em",textAnchor:"end",className:"fdp-axis__tick",fontFamily:"inherit",children:[I.map((j,C)=>o.jsx("tspan",{x:-9,dy:C===0?0:"1.1em",children:j},C)),x!==k&&o.jsx("title",{children:k})]})]},D?.toString?.()||N)}),a&&o.jsx("text",{transform:"rotate(-90)",x:-h.innerHeight/2,y:-h.margin.left+12,textAnchor:"middle",className:"fdp-axis__label",fontFamily:"inherit",children:a})]})},af=({axis:e="y",tickCount:t,stroke:n="var(--fdp-chart-grid,#e5e5e5)",dasharray:r="2 4",className:i})=>{const a=mr(),s=Yn();if(!a||!s)return null;const l=e==="y"?a.getYTicks(t):a.getXTicks(t);return o.jsxs("g",{className:["fdp-grid",i].filter(Boolean).join(" "),children:[e==="y"&&l.map((u,c)=>o.jsx("line",{x1:0,x2:s.innerWidth,y1:a.yScale(u),y2:a.yScale(u),stroke:n,strokeDasharray:r},c)),e==="x"&&l.map((u,c)=>o.jsx("line",{y1:0,y2:s.innerHeight,x1:a.xScale(u),x2:a.xScale(u),stroke:n,strokeDasharray:r},c))]})},Di={color:{"data-viz":{$type:"color",categorical:{1:{$value:"{color.primary.blue}",$description:"Series 1 â€“ NHS Blue (brand core)"},2:{$value:"#41B6E6",$description:"Series 2 â€“ NHS Light Blue (new)"},3:{$value:"{color.secondary.aqua-green}",$description:"Series 3 â€“ NHS Aqua Green (existing)"},4:{$value:"#78BE20",$description:"Series 4 â€“ NHS Light Green (new)"},5:{$value:"{color.primary.green}",$description:"Series 5 â€“ NHS Green (existing)"},6:{$value:"{color.secondary.warm-yellow}",$description:"Series 6 â€“ NHS Warm Yellow (existing; distinct from focus yellow)"},7:{$value:"#ED4F00",$description:"Series 7 â€“ NHS Tangerine (new; warmer/deeper than existing orange)"},8:{$value:"{color.secondary.pink}",$description:"Series 8 â€“ NHS Pink (existing)"},9:{$value:"#E317AA",$description:"Series 9 â€“ NHS Bright Pink (new vivid accent)"},10:{$value:"#880FB8",$description:"Series 10 â€“ NHS Light Purple (new mid purple)"},11:{$value:"{color.primary.purple}",$description:"Series 11 â€“ NHS Purple (existing dark purple)"},12:{$value:"#9A6324",$description:"Series 12 â€“ NHS Brown (new; earth neutral)"}},neutral:{comparison:{$value:"{color.grey.1}",$description:"Neutral comparison series (optional)"}},region:{$comment:"Fixed colours for NHS geographical regions; prefer stable mapping for maps. London colour updated (#78BE21 â€“ light green).","north-east":{$value:"{color.primary.blue}",$description:"North East â€“ NHS Blue"},"north-west":{$value:"#41B6E6",$description:"North West â€“ NHS Light Blue"},"east-of-england":{$value:"{color.primary.purple}",$description:"East of England â€“ NHS Purple"},midlands:{$value:"{color.secondary.pink}",$description:"Midlands â€“ NHS Pink"},london:{$value:"#78BE21",$description:"London â€“ NHS Light Green (new)"},"south-west":{$value:"#FAE100",$description:"South West â€“ NHS Yellow variant (new)"},"south-east":{$value:"#ed8b00",$description:"South East â€“ NHS Orange (existing base orange)"}},severity:{$comment:"Semantic severity / alert colours (light background ramp â†’ critical).",low:{$value:"{color.secondary.pale-yellow}",$description:"Low severity â€“ pale yellow background"},moderate:{$value:"{color.secondary.warm-yellow}",$description:"Moderate severity â€“ warm yellow"},high:{$value:"{color.secondary.orange}",$description:"High severity â€“ orange"},critical:{$value:"{color.primary.red}",$description:"Critical severity â€“ red"}},"org-level":{$comment:"Organisational level semantic colours (stable NHS brand mappings).",trust:{$value:"{color.primary.blue}",$description:"Trust â€“ NHS Blue"},ambulance:{$value:"{color.primary.green}",$description:"Ambulance â€“ NHS Green"},icb:{$value:"{color.primary.dark-pink}",$description:"ICB â€“ NHS Dark Pink"},region:{$value:"{color.primary.purple}",$description:"Region â€“ NHS Purple"}},stroke:{$comment:"Automatic contrast stroke colours for overlays / borders. Light fills get dark stroke; dark fills get white stroke.",categorical:{1:{$value:"#ffffff",$description:"Stroke for series 1 (blue)"},2:{$value:"#212b32",$description:"Stroke for series 2 (light blue)"},3:{$value:"#212b32",$description:"Stroke for series 3 (aqua green)"},4:{$value:"#212b32",$description:"Stroke for series 4 (light green)"},5:{$value:"#ffffff",$description:"Stroke for series 5 (green)"},6:{$value:"#212b32",$description:"Stroke for series 6 (warm yellow)"},7:{$value:"#ffffff",$description:"Stroke for series 7 (tangerine)"},8:{$value:"#ffffff",$description:"Stroke for series 8 (pink)"},9:{$value:"#ffffff",$description:"Stroke for series 9 (bright pink)"},10:{$value:"#ffffff",$description:"Stroke for series 10 (light purple)"},11:{$value:"#ffffff",$description:"Stroke for series 11 (purple)"},12:{$value:"#ffffff",$description:"Stroke for series 12 (brown)"}},region:{$comment:"Region stroke colours derived from fill colours: dark fills lightened ~35%; light fills darkened ~25% for consistent contrast without defaulting to pure white/black.","north-east":{$value:"#5996D1",$description:"Stroke for North East (blue lightened 35%)"},"north-west":{$value:"#3189AD",$description:"Stroke for North West (light blue darkened 25%)"},"east-of-england":{$value:"#7A59A3",$description:"Stroke for East of England (purple lightened 35%)"},midlands:{$value:"#CA71A4",$description:"Stroke for Midlands (pink lightened 35%)"},london:{$value:"#5A8F19",$description:"Stroke for London (light green darkened 25%)"},"south-west":{$value:"#BCA900",$description:"Stroke for South West (yellow darkened 25%)"},"south-east":{$value:"#B26800",$description:"Stroke for South East (orange darkened 25%)"}},severity:{$comment:"Contrast strokes for severity colours (light backgrounds use dark stroke; dark backgrounds use white).",low:{$value:"#212b32",$description:"Stroke for low severity (pale yellow fill)"},moderate:{$value:"#212b32",$description:"Stroke for moderate severity (warm yellow fill)"},high:{$value:"#212b32",$description:"Stroke for high severity (orange fill)"},critical:{$value:"#ffffff",$description:"Stroke for critical severity (red fill)"}},"org-level":{$comment:"Contrast strokes for organisational level colours (all dark brand fills so white stroke for consistency).",trust:{$value:"#ffffff",$description:"Stroke for trust (blue fill)"},ambulance:{$value:"#ffffff",$description:"Stroke for ambulance (green fill)"},icb:{$value:"#ffffff",$description:"Stroke for ICB (dark pink fill)"},region:{$value:"#ffffff",$description:"Stroke for region (purple fill)"}}},spc:{$comment:"SPC (Statistical Process Control) semantic variation colours aligned to SPCChart.scss and SPCIcons.",improvement:{$value:"#00B0F0",$description:"SPC special cause improvement (favourable)"},concern:{$value:"#E46C0A",$description:"SPC special cause concern (deteriorating)"},"no-judgement":{$value:"#490092",$description:"SPC special cause (no directional judgement)"},"common-cause":{$value:"#A6A6A6",$description:"SPC common cause (baseline variation)"},"assurance-pass":{$value:"#00823B",$description:"SPC assurance pass indicator (process capable)"},"assurance-fail":{$value:"#DA291C",$description:"SPC assurance fail indicator (process not capable)"},gradient:{$comment:"Opacity stops for SPC icon gradient wash (applied top-left -> bottom-right). Consumers build gradients using these opacities + base colour.",stop:{"start-opacity":{$value:"0.18",$description:"Start stop opacity (0%) for classic variant wash"},"mid-opacity":{$value:"0.06",$description:"Mid stop opacity (~65-75%)"},"end-opacity":{$value:"0",$description:"End stop opacity (100%)"},"triangle-start-opacity":{$value:"0.18",$description:"Start opacity for triangle variants (kept aligned)"},"triangle-mid-opacity":{$value:"0.06",$description:"Mid opacity for triangle variants"},"triangle-end-opacity":{$value:"0",$description:"End opacity for triangle variants"}}},stroke:{$comment:"Contrast stroke colours for SPC variation fills.",improvement:{$value:"#000000",$description:"Stroke for improvement points"},concern:{$value:"#000000",$description:"Stroke for concern points"},"no-judgement":{$value:"#000000",$description:"Stroke for no-judgement points"},"common-cause":{$value:"#ffffff",$description:"Stroke for common cause points"},"assurance-pass":{$value:"#000000",$description:"Stroke for assurance pass points"},"assurance-fail":{$value:"#000000",$description:"Stroke for assurance fail points"}}}}}},ts={color:{primary:{$type:"color",blue:{$value:"#005eb8",$description:"NHS Blue - Primary brand color"},"blue-active":{$value:"#002f5c",$description:"NHS Active Blue (50% shade) â€“ alias of button/login active; promoted for general reuse"},white:{$value:"#ffffff",$description:"NHS White"},black:{$value:"#212b32",$description:"NHS Black"},green:{$value:"#007f3b",$description:"NHS Green"},purple:{$value:"#330072",$description:"NHS Purple"},"dark-pink":{$value:"#7c2855",$description:"NHS Dark Pink"},red:{$value:"#d5281b",$description:"NHS Red"},"light-purple":{$value:"#880FB8",$description:"NHS Light Purple (data viz promoted)"},yellow:{$value:"#ffeb3b",$description:"NHS Yellow"}},secondary:{$type:"color","pale-yellow":{$value:"#fff9c4",$description:"NHS Pale Yellow"},"warm-yellow":{$value:"#ffb81c",$description:"NHS Warm Yellow"},"region-yellow":{$value:"#FAE100",$description:"NHS Region Yellow (maps)"},orange:{$value:"#ed8b00",$description:"NHS Orange"},tangerine:{$value:"#ED4F00",$description:"NHS Tangerine (data viz promoted)"},"aqua-green":{$value:"#00a499",$description:"NHS Aqua Green"},"light-blue":{$value:"#41B6E6",$description:"NHS Light Blue (data viz promoted)"},pink:{$value:"#ae2573",$description:"NHS Pink"},"bright-pink":{$value:"#E317AA",$description:"NHS Bright Pink (data viz promoted)"},"light-green":{$value:"#78BE20",$description:"NHS Light Green (data viz promoted)"},brown:{$value:"#9A6324",$description:"NHS Brown (data viz promoted neutral)"}},grey:{1:{$value:"#4c6272",$description:"NHS Grey 1 - Darkest grey"},2:{$value:"#768692",$description:"NHS Grey 2 - Darker grey"},3:{$value:"#aeb7bd",$description:"NHS Grey 3 - Medium grey"},4:{$value:"#d8dde0",$description:"NHS Grey 4 - Light grey"},5:{$value:"#f0f4f5",$description:"NHS Grey 5 - Lightest grey"},$type:"color"},accessibility:{$type:"color",$comment:"Accessibility-oriented color tokens. Includes CVD-safe pairs and Okabeâ€“Ito colors. Use these for positive/negative semantics and colour-blindâ€“friendly defaults.","okabe-ito":{green:{$value:"#009E73",$description:"Okabeâ€“Ito green (CVD-safe) â€“ recommended positive"},vermillion:{$value:"#D55E00",$description:"Okabeâ€“Ito vermillion / redâ€“orange (CVD-safe) â€“ recommended negative"}},"cvd-safe":{blue:{$value:"#1f77b4",$description:"CVD-safe blue (pairs with orange); widely used in Matplotlib/Tableau sets"},orange:{$value:"#ff7f0e",$description:"CVD-safe orange (pairs with blue)"}},positive:{$value:"{color.accessibility.okabe-ito.green}",$description:"Accessibility semantic alias â€“ positive"},negative:{$value:"{color.accessibility.okabe-ito.vermillion}",$description:"Accessibility semantic alias â€“ negative"}}}},hx=["#005eb8","#0072ce","#41b6e6","#00a499","#7c2855","#330072","#d5281b","#ffb81c","#fae100","#4c6272","#768692","#aeb7bd"];let qo=null,Xo=null,Ko=null,sf="optimized";function px(){const e={color:{...ts.color,...Di.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!a)return;const s=a.$value||a.value;if(typeof s=="string"&&/^\{.+\}$/.test(s))return t(s.slice(1,-1),i);if(typeof s=="string")return s},n=[];try{for(let r=1;r<=12;r++){const i=`color.data-viz.categorical.${r}`,a=t(i);if(!a)throw new Error(`Missing token ${i}`);n.push(a)}return n}catch{return hx}}function mx(){return qo||(qo=px()),qo}function gx(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.trim());return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Jo(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bx(e,t,n){const r=Jo(e),i=Jo(t),a=Jo(n),s=r*.4124+i*.3576+a*.1805,l=r*.2126+i*.7152+a*.0722,u=r*.0193+i*.1192+a*.9505;return{x:s*100,y:l*100,z:u*100}}function yx(e,t,n){let s=e/95.047,l=t/100,u=n/108.883;const c=d=>d>.008856?Math.cbrt(d):7.787*d+16/116;return s=c(s),l=c(l),u=c(u),{L:116*l-16,a:500*(s-l),b:200*(l-u)}}function of(e){const t=gx(e);if(!t)return null;const n=bx(t.r,t.g,t.b);return yx(n.x,n.y,n.z)}function lf(e,t){const n=e.L-t.L,r=e.a-t.a,i=e.b-t.b;return Math.sqrt(n*n+r*r+i*i)}function vx(){const e=mx();if(e.length<=2)return e.slice();const t=e.map(s=>of(s));let n=0,r=-1;for(let s=0;s<e.length;s++){const l=t[s];if(!l)continue;let u=0,c=0;for(let f=0;f<e.length;f++)s!==f&&t[f]&&(u+=lf(l,t[f]),c++);const d=u/Math.max(1,c);d>r&&(r=d,n=s)}const i=new Set(e.map((s,l)=>l)),a=[];for(a.push(n),i.delete(n);i.size;){let s=Array.from(i)[0],l=-1;for(const u of i){const c=t[u];if(!c)continue;let d=1/0;for(const f of a){const p=t[f];if(p){const g=lf(c,p);g<d&&(d=g)}}d>l&&(l=d,s=u)}a.push(s),i.delete(s)}return a.map(s=>e[s])}function _x(){return Xo||(Xo=vx()),Xo}function xx(e,t,n){const r=(e+16)/116,i=t/500+r,a=r-n/200,s=d=>{const f=d*d*d;return f>.008856?f:(d-16/116)/7.787},l=s(i)*95.047,u=s(r)*100,c=s(a)*108.883;return{X:l,Y:u,Z:c}}function wx(e,t,n){e/=100,t/=100,n/=100;let r=e*3.2406+t*-1.5372+n*-.4986,i=e*-.9689+t*1.8758+n*.0415,a=e*.0557+t*-.204+n*1.057;const s=l=>l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055;return r=Math.min(1,Math.max(0,s(r))),i=Math.min(1,Math.max(0,s(i))),a=Math.min(1,Math.max(0,s(a))),{r:Math.round(r*255),g:Math.round(i*255),b:Math.round(a*255)}}function Sx(e,t,n){return`#${[e,t,n].map(r=>r.toString(16).padStart(2,"0")).join("")}`}function Cx(e,t){const n=of(e);if(!n)return e;const r=Math.min(100,Math.max(0,n.L+t)),{X:i,Y:a,Z:s}=xx(r,n.a,n.b),l=wx(i,a,s);return Sx(l.r,l.g,l.b)}function kx(){const e=_x(),n=[12,-12,24,-24].map(i=>e.map(a=>Cx(a,i))),r=[...e];return n.forEach(i=>r.push(...i)),r}function Tx(){return(!Ko||Nx())&&(Ko=kx(),cf=sf),Ko}let cf=null;function Nx(){return cf!==sf}function fn(e){const t=Tx();return t[e%t.length]}let Wr=null,Mi=null,Ii=null,Pi=null;function jx(){const e=Di?.color?.["data-viz"]?.stroke;if(e){const t=e.categorical||{};Wr=[];for(let a=1;a<=12;a++){const s=t[String(a)]?.$value||t[String(a)]?.value;Wr.push(typeof s=="string"?s:"#212b32")}const n=e.region||{};Mi={},Object.keys(n).forEach(a=>{const s=n[a]?.$value||n[a]?.value;typeof s=="string"&&(Mi[a]=s)});const r=e.severity||{},i=e["org-level"]||{};Pi={},Object.keys(i).forEach(a=>{const s=i[a]?.$value||i[a]?.value;typeof s=="string"&&(Pi[a]=s)}),Ii={},Object.keys(r).forEach(a=>{const s=r[a]?.$value||r[a]?.value;typeof s=="string"&&(Ii[a]=s)})}}function ns(){(!Wr||!Mi||!Ii||!Pi)&&jx()}function gr(e){return ns(),Wr?Wr[e%Wr.length]:"#212b32"}function Dx(e){return ns(),Mi?Mi[e]:void 0}function rs(e,t){return Dx(e)||gr(t)}const Zo=["low","moderate","high","critical"];let Qo=null;function Mx(){const e={color:{...ts.color,...Di.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!a)return;const s=a.$value||a.value;return typeof s=="string"&&/^\{.+\}$/.test(s)?t(s.slice(1,-1),i):typeof s=="string"?s:void 0},n={};return Zo.forEach(r=>{const i=t(`color.data-viz.severity.${r}`);i&&(n[r]=i)}),n}function uf(){return Qo||(Qo=Mx()),Qo}function Ix(e){return uf()[e.toLowerCase()]}function Px(e,t){return Ix(e)||uf()[Zo[t%Zo.length]]||fn(t)}function Fx(e){return ns(),Ii?Ii[e]:void 0}function $x(e,t){return Fx(e)||gr(t)}const el=["trust","ambulance","icb","region"];let tl=null;function Lx(){const e={color:{...ts.color,...Di.color}},t=(r,i=new Set)=>{if(i.has(r))return;i.add(r);const a=r.split(".").reduce((l,u)=>l?l[u]:void 0,e);if(!a)return;const s=a.$value||a.value;return typeof s=="string"&&/^\{.+\}$/.test(s)?t(s.slice(1,-1),i):typeof s=="string"?s:void 0},n={};return el.forEach(r=>{const i=t(`color.data-viz.org-level.${r}`);i&&(n[r]=i)}),n}function df(){return tl||(tl=Lx()),tl}function Ax(e){return df()[e.toLowerCase()]}function Ex(e,t){return Ax(e)||df()[el[t%el.length]]||fn(t)}function Bx(e){return ns(),Pi?Pi[e]:void 0}function Rx(e,t){return Bx(e)||gr(t)}let nl=null;const Ox=["north-east","north-west","east-of-england","midlands","london","south-west","south-east"];function Hx(e){return e.trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function zx(){const e={color:{...ts.color,...Di.color}},t=(i,a=new Set)=>{if(a.has(i))return;a.add(i);const s=i.split(".").reduce((u,c)=>u?u[c]:void 0,e);if(!s)return;const l=s.$value||s.value;return typeof l=="string"&&/^\{.+\}$/.test(l)?t(l.slice(1,-1),a):typeof l=="string"?l:void 0},n={},r=[];return Ox.forEach(i=>{const a=t(`color.data-viz.region.${i}`);a?n[i]=a:r.push(i)}),process.env.NODE_ENV!=="production"&&(Object.keys(n).length===0?console.warn("[DataViz] Region colour tokens unresolved  falling back to categorical colours."):r.length&&console.warn(`[DataViz] Missing region colour tokens: ${r.join(", ")}.`)),n}function Wx(){return nl||(nl=zx()),nl}function Ux(e){return Wx()[Hx(e)]}function Ur(e,t){return Ux(e)||fn(t)}const ff=q.createContext(null),Fi=()=>q.useContext(ff),Vx=({initialHiddenIds:e=[],children:t,hiddenIds:n,onChange:r})=>{const[i,a]=q.useState(()=>new Set(e)),s=n!==void 0,l=q.useMemo(()=>s?new Set(n):i,[s,n,i]),u=q.useCallback(d=>{s||a(new Set(d)),r?.(Array.from(d))},[s,r]),c=q.useMemo(()=>({hiddenIds:l,isHidden:d=>l.has(d),toggle:d=>{const f=new Set(l);f.has(d)?f.delete(d):f.add(d),u(f)},showOnly:d=>{u(new Set)},showAll:()=>u(new Set),setHidden:d=>u(new Set(Array.isArray(d)?d:Array.from(d)))}),[l,u]);return o.jsx(ff.Provider,{value:c,children:t})},hf=q.createContext(null),Ln=()=>q.useContext(hf),pf=({children:e,maxDistance:t=40,wrapAround:n=!1})=>{const r=mr(),i=Fi(),[a,s]=q.useState(null),l=q.useRef(new Map),[u,c]=q.useState([]),d=q.useCallback((N,k)=>{l.current.set(N,k)},[]),f=q.useCallback(N=>{l.current.delete(N)},[]),p=q.useCallback((N,k)=>{if(!r)return;const{xScale:x,yScale:I}=r;let j=null,C=1/0;l.current.forEach(($,T)=>{$.forEach((F,P)=>{const L=x(F.x),te=I(F.y),Y=L-N,O=te-k,H=Math.sqrt(Y*Y+O*O);H<C&&(C=H,j={seriesId:T,index:P,x:F.x,y:F.y,clientX:L,clientY:te})})}),j&&C<=t?s(j):s(null)},[r,t]),g=q.useCallback(()=>s(null),[]);q.useEffect(()=>{if(!a){c([]);return}if(!r)return;const{xScale:N,yScale:k}=r,x=[];l.current.forEach((I,j)=>{I.forEach((C,$)=>{(a.x instanceof Date&&C.x instanceof Date?C.x.getTime()===a.x.getTime():C.x===a.x)&&x.push({seriesId:j,index:$,x:C.x,y:C.y,clientX:N(C.x),clientY:k(C.y)})})}),x.sort((I,j)=>I.seriesId.localeCompare(j.seriesId)),c(x)},[a,r]);const b=q.useCallback(N=>{if(!a)return;const k=l.current.get(a.seriesId);if(!k)return;let x=a.index+N;if(x<0||x>=k.length){if(!n)return;x=(x+k.length)%k.length}const I=k[x];if(!r)return;const{xScale:j,yScale:C}=r;s({seriesId:a.seriesId,index:x,x:I.x,y:I.y,clientX:j(I.x),clientY:C(I.y)})},[a,r,n]),h=q.useCallback(N=>{let k=Array.from(l.current.keys());if(i&&(k=k.filter(L=>!i.isHidden(L))),k.length===0)return;if(!a){const L=k[0],te=l.current.get(L);if(!te||!r)return;const{xScale:Y,yScale:O}=r,H=te[0];s({seriesId:L,index:0,x:H.x,y:H.y,clientX:Y(H.x),clientY:O(H.y)});return}const x=k.indexOf(a.seriesId);if(x===-1)return;let I=x+N;if(I<0||I>=k.length){if(!n)return;I=(I+k.length)%k.length}const j=k[I],C=l.current.get(j);if(!C||!r)return;const $=Math.min(a.index,C.length-1),T=C[$],{xScale:F,yScale:P}=r;s({seriesId:j,index:$,x:T.x,y:T.y,clientX:F(T.x),clientY:P(T.y)})},[a,r,n,i]),m=q.useCallback(()=>{let N=Array.from(l.current.keys());if(i&&(N=N.filter($=>!i.isHidden($))),N.length===0)return;const k=a?a.seriesId:N[0],x=l.current.get(k);if(!x||x.length===0||!r)return;const I=x[0],{xScale:j,yScale:C}=r;s({seriesId:k,index:0,x:I.x,y:I.y,clientX:j(I.x),clientY:C(I.y)})},[a,r,i]),y=q.useCallback(()=>{let N=Array.from(l.current.keys());if(i&&(N=N.filter(T=>!i.isHidden(T))),N.length===0)return;const k=a?a.seriesId:N[0],x=l.current.get(k);if(!x||x.length===0||!r)return;const I=x.length-1,j=x[I],{xScale:C,yScale:$}=r;s({seriesId:k,index:I,x:j.x,y:j.y,clientX:C(j.x),clientY:$(j.y)})},[a,r,i]),S=q.useCallback(()=>b(1),[b]),M=q.useCallback(()=>b(-1),[b]),w=q.useCallback(()=>h(1),[h]),v=q.useCallback(()=>h(-1),[h]),D=q.useMemo(()=>({focused:a,setFocused:s,aggregated:u,focusNearest:p,clear:g,registerSeries:d,unregisterSeries:f,focusNextPoint:S,focusPrevPoint:M,focusNextSeries:w,focusPrevSeries:v,focusFirstPoint:m,focusLastPoint:y}),[a,u,p,g,d,f,S,M,w,v,m,y]);return o.jsx(hf.Provider,{value:D,children:e})},mf=({series:e,seriesIndex:t,palette:n,showPoints:r,focusablePoints:i,focusIndex:a,parseX:s,visibilityMode:l="remove",strokeWidth:u=1,smooth:c=!0,gradientFillId:d,colors:f})=>{const p=mr();if(!p)return null;const{xScale:g,yScale:b}=p,m=Fi()?.isHidden(e.id)??!1,y=m&&l==="fade";if(m&&l==="remove")return null;const S=Ln();q.useEffect(()=>{if(!S)return;const k=e.data.map(x=>({x:s(x),y:x.y}));return S.registerSeries(e.id,k),()=>S.unregisterSeries(e.id)},[S,e.id,e.data,s]);const M=q.useMemo(()=>Vo(e.data,k=>g(s(k)),k=>b(k.y),{smooth:c}),[e.data,g,b,s,c]),w=q.useMemo(()=>{if(!e.data.length)return"";const[k]=b.domain(),x=Wo().x(I=>g(s(I))).y0(()=>b(k)).y1(I=>b(I.y));return c&&x.curve(es),x(e.data)||""},[e.data,g,b,s,c]),v=f&&f[t],D=e.color||v||(n==="region"?Ur(e.id,t):fn(t)),N=n==="region"?rs(e.id,t):gr(t);return o.jsxs("g",{className:"fdp-line-series","data-series":e.id,opacity:y?.25:1,"aria-hidden":y?!0:void 0,children:[d&&o.jsx("path",{d:w,fill:`url(#${d})`,stroke:"none",role:"presentation",className:"fdp-line-series__gradient"}),o.jsx("path",{d:M,fill:"none",stroke:D,strokeWidth:u,role:"presentation"}),r&&e.data.map((k,x)=>{const I=g(s(k)),j=b(k.y),C=i?0:-1,$=!y&&(i&&x===a||S?.focused?.seriesId===e.id&&S.focused.index===x),T=()=>{S&&!y&&S.setFocused({seriesId:e.id,index:x,x:s(k),y:k.y,clientX:I,clientY:j})},F=()=>{S&&S.focused?.seriesId===e.id&&S.focused.index===x&&S.clear()};return o.jsx("circle",{cx:I,cy:j,r:$?5:3.5,stroke:$?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":N,strokeWidth:$?2:1,fill:$?"var(--nhs-fdp-color-grey-3, #aeb7bd)":D,className:"fdp-line-point",tabIndex:y?-1:C,"aria-label":`${e.label||e.id} ${s(k).toDateString()} value ${k.y}`,"data-series":e.id,"data-index":x,onMouseEnter:T,onFocus:T,onMouseLeave:F,onBlur:F},x)})]})},Gx=({polite:e=!0,format:t})=>{const n=Ln(),[r,i]=q.useState(""),a=q.useRef("");return q.useEffect(()=>{if(!n?.focused)return;const{focused:s,aggregated:l}=n;let u;if(l&&l.length>1){const c=l.map(f=>`${f.seriesId} ${f.y}`).join("; ");u=`${s.x instanceof Date?s.x.toDateString():String(s.x)} â€“ ${c}`}else u=t?t({seriesId:s.seriesId,x:s.x,y:s.y,index:s.index}):Yx(s.seriesId,s.x,s.y,s.index);if(u!==a.current){a.current=u,i("");const c=setTimeout(()=>i(u),10);return()=>clearTimeout(c)}},[n?.focused,t]),o.jsx("div",{"aria-live":e?"polite":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,margin:-1,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",border:0},children:r})};function Yx(e,t,n,r){const i=t instanceof Date?t.toDateString():String(t);return`Series ${e}, point ${r+1}, ${i}, value ${n}`}const qx=()=>{const e=Ln(),t=Yn();if(!e||!t||!e.focused)return null;const{focused:n,aggregated:r}=e,{innerWidth:i,innerHeight:a}=t,s=Math.min(Math.max(n.clientX,0),i),l=Math.min(Math.max(n.clientY,0),a),u=s+8,c=l-8,d=r.length>1,f=n.x instanceof Date?n.x.toDateString():String(n.x),p=d?f:`${f} â€¢ ${n.y}`,g=/\d+$/.exec(n.seriesId||""),b=g?parseInt(g[0],10)-1:0,h=fn(b>=0?b:0)||"#005eb8",m="var(--nhs-fdp-color-primary-yellow,#ffeb3b)";return o.jsxs("g",{className:"fdp-tooltip-layer",pointerEvents:"none",children:[o.jsx("circle",{cx:s,cy:l,r:7,fill:"none",stroke:m,strokeWidth:3}),o.jsx("circle",{cx:s,cy:l,r:5,fill:"#000",stroke:m,strokeWidth:1.5}),o.jsx("circle",{cx:s,cy:l,r:2.5,fill:h,stroke:"#fff",strokeWidth:.5}),d?(()=>{const S=r.map(N=>`${N.seriesId}: ${N.y}`),M=[p,...S],w=M.reduce((N,k)=>Math.max(N,k.length),0),v=Math.max(90,w*6.2+16),D=16*M.length+8;return o.jsxs("g",{children:[o.jsx("rect",{x:u,y:c-D,rx:4,ry:4,width:v,height:D,fill:"#212b32",opacity:.92}),M.map((N,k)=>o.jsx("text",{x:u+8,y:c-D+6+16*(k+.7),fill:"#fff",fontSize:12,children:N},k))]})})():o.jsxs("g",{children:[o.jsx("rect",{x:u,y:c-24,rx:4,ry:4,width:Math.max(60,p.length*6.2),height:24,fill:"#212b32",opacity:.92}),o.jsx("text",{x:u+8,y:c-8,fill:"#fff",fontSize:12,children:p})]})]})},Xx=({items:e,palette:t="categorical",direction:n="row",interactive:r=!1,adjustStrokeForWhiteBackground:i=!0,hiddenIds:a,defaultHiddenIds:s=[],onVisibilityChange:l,formatAnnouncement:u})=>{const c=Fi(),d=!!(c&&!r&&!l&&a===void 0),f=r||d,p=e||[],g=a!==void 0,[b,h]=q.useState(new Set(s)),m=g?new Set(a):b,[y,S]=q.useState(""),M=w=>{if(d&&c){const C=c.isHidden(w);c.toggle(w);const T=p.find(P=>P.id===w)?.label||w,F=u?u(w,C,T):`${T} ${C?"shown":"hidden"}`;S(F);return}if(!f)return;const v=new Set(m),D=v.has(w);D?v.delete(w):v.add(w),g||h(v);const N=p.filter(C=>!v.has(C.id)).map(C=>C.id),k=Array.from(v);l?.(N,k);const I=p.find(C=>C.id===w)?.label||w,j=u?u(w,D,I):`${I} ${D?"shown":"hidden"}`;S(j)};return o.jsxs("div",{className:"fdp-legend-wrapper",children:[o.jsx("ul",{className:`fdp-legend fdp-legend--${n}`,children:p.map((w,v)=>{const D=w.palette||t,N=w.color||(D==="region"?Ur(w.id,v):D==="severity"?Px(w.id,v):D==="org-level"?Ex(w.id,v):fn(v));let k=w.stroke||(D==="region"?rs(w.id,v):D==="severity"?$x(w.id,v):D==="org-level"?Rx(w.id,v):gr(v));if(i&&k){const j=k.trim().toLowerCase();(j==="#fff"||j==="#ffffff"||j==="white"||/^rgb\(\s*255\s*,\s*255\s*,\s*255\s*\)$/.test(j))&&(k="#212b32")}const x=d&&c?c.isHidden(w.id):m.has(w.id),I=f?{"aria-pressed":!x,"aria-label":`${w.label} (${x?"show":"hide"})`,onClick:()=>M(w.id)}:{"aria-label":w.label};return o.jsxs("li",{className:`fdp-legend__item${x?" fdp-legend__item--hidden":""}`,children:[o.jsx("button",{type:"button",className:"fdp-legend__swatch",style:{backgroundColor:N,backgroundImage:w.patternDataUrl?`url(${w.patternDataUrl})`:void 0,backgroundSize:w.patternDataUrl?"auto":void 0,borderColor:k},...I}),o.jsx("span",{className:"fdp-legend__label",children:w.label})]},w.id)})}),f&&o.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite","aria-atomic":"true",children:y})]})},Kx=({series:e,seriesIndex:t,palette:n,parseX:r,areaOnly:i=!1,visibilityMode:a="remove",baselineY:s=0,smooth:l=!0,stacked:u,gradientFill:c=!0,colors:d})=>{const f=mr();if(!f)return null;const{xScale:p,yScale:g}=f,h=Fi()?.isHidden(e.id)??!1,m=h&&a==="fade";if(h&&a==="remove")return null;const y=Ln();q.useEffect(()=>{if(!y)return;const N=e.data.map(k=>({x:r(k),y:k.y}));return y.registerSeries(e.id,N),()=>y.unregisterSeries(e.id)},[y,e.id,e.data,r]);const S=d&&d[t],M=e.color||S||(n==="region"?Ur(e.id,t):fn(t)),w=q.useMemo(()=>u&&u.length===e.data.length?Vo(e.data,N=>p(r(N)),N=>{const k=e.data.indexOf(N);return g(u[k].y1)},{smooth:l}):Vo(e.data,N=>p(r(N)),N=>g(N.y),{smooth:l}),[e.data,u,p,g,r,l]),v=q.useMemo(()=>{if(u&&u.length===e.data.length){const j=Wo().x(C=>p(r(C))).y0((C,$)=>g(u[$].y0)).y1((C,$)=>g(u[$].y1));return l&&j.curve(es),j(e.data)||""}const[N,k]=g.domain();let x=s;x<N?x=N:x>k&&(x=k);const I=Wo().x(j=>p(r(j))).y0(()=>g(x)).y1(j=>g(j.y));return l&&I.curve(es),I(e.data)||""},[e.data,u,p,g,r,s,l]),D=q.useId();return o.jsxs("g",{className:"fdp-area-series","data-series":e.id,opacity:m?.25:1,"aria-hidden":m?!0:void 0,children:[c&&o.jsx("defs",{children:o.jsxs("linearGradient",{id:D,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:M,stopOpacity:.25}),o.jsx("stop",{offset:"100%",stopColor:M,stopOpacity:0})]})}),o.jsx("path",{className:"fdp-area-series__fill",d:v,fill:c?`url(#${D})`:M,...c?{}:{fillOpacity:.25},stroke:"none"}),!i&&o.jsx("path",{d:w,fill:"none",stroke:M,strokeWidth:1})]})},Jx=({series:e,seriesIndex:t,seriesCount:n,palette:r,parseX:i,focusable:a=!0,widthFactor:s=.8,groupGap:l=2,barWidth:u,adaptive:c=!1,adaptiveGroupOccupancy:d=.9,visibilityMode:f="remove",colorMode:p="series",allSeries:g,stacked:b,gapRatio:h=.15,minBarWidth:m,gradientFill:y=!0,gradientStrokeMatch:S=!0,opacity:M=1,fadedOpacity:w=.25,flatFillOpacity:v=1,colors:D})=>{const N=Math.max(0,h),k=mr(),x=Yn();if(!k||!x)return null;const{xScale:I,yScale:j}=k,$=Fi()?.isHidden(e.id)??!1,T=$&&f==="fade";if($&&f==="remove")return null;const F=Ln();q.useEffect(()=>{if(!F)return;const ee=e.data.map(ae=>({x:i(ae),y:ae.y}));return F.registerSeries(e.id,ee),()=>F.unregisterSeries(e.id)},[F,e.id,e.data,i]);const P=typeof I.bandwidth=="function",L=P?I.bandwidth():void 0,te=q.useMemo(()=>{if(L!=null)return L;const ee=g&&g.length?g:[e],ae=[];ee.forEach(A=>{A.data.forEach(R=>{const Z=I(i(R));Number.isFinite(Z)&&ae.push(Z)})});const me=ae.sort((A,R)=>A-R);if(me.length<=1)return 40;const G=[];for(let A=1;A<me.length;A++)G.push(me[A]-me[A-1]);return G.sort((A,R)=>A-R),(G[Math.floor(G.length/2)]||40)*s},[e.data,g,I,i,s,L]),{basePerBar:Y}=q.useMemo(()=>{if(P){const me=te,G=Math.max(1,(me-l*(n-1))/n),de=e.barWidth??u;let A=de?Math.min(de,me):G;if(c){const R=me*Math.min(1,Math.max(.05,d)),Z=Math.max(1,(R-l*(n-1))/n);A=de?Math.min(A,Z):Z}return{basePerBar:A}}const ee=e.barWidth??u,ae=Math.max(1,(te-l*(n-1))/n);if(c){const me=g&&g.length?g:[e],G=[];me.forEach(ue=>ue.data.forEach(ge=>{const fe=I(i(ge));Number.isFinite(fe)&&G.push(fe)})),G.sort((ue,ge)=>ue-ge);const de=[];for(let ue=1;ue<G.length;ue++)de.push(G[ue]-G[ue-1]);de.sort((ue,ge)=>ue-ge);const R=(de[Math.floor(de.length/2)]||te)*Math.min(1,Math.max(.05,d)),Z=Math.max(1,(R-l*(n-1))/n);return{basePerBar:ee?Math.min(ee,Z):Z}}return ee?{basePerBar:Math.min(ee,ae)}:{basePerBar:ae}},[P,te,l,n,u,e.barWidth,c,d,g,I,i]),O=q.useMemo(()=>{if(P)return[];const ee=[];return(g&&g.length?g:[e]).forEach(me=>me.data.forEach(G=>{const de=I(i(G));Number.isFinite(de)&&ee.push(de)})),ee.sort((me,G)=>me-G),Array.from(new Set(ee))},[P,g,e,I,i]),H=q.useMemo(()=>{if(P)return[];if(!O.length)return[];if(O.length===1)return[{center:O[0],left:0,right:x.innerWidth}];const ee=[];for(let ae=0;ae<O.length;ae++){const me=O[ae],G=ae===0?0:(O[ae-1]+me)/2,de=ae===O.length-1?x.innerWidth:(me+O[ae+1])/2;ee.push({center:me,left:Math.max(0,G),right:Math.min(x.innerWidth,de)})}return ee},[P,O,x.innerWidth]),z=q.useMemo(()=>{if(P||!H.length)return;const ee=Math.min(1,Math.max(.05,s)),ae=H.map(R=>Math.max(2,R.right-R.left)),me=ae.map(R=>Math.max(2,Math.min(R-1,R*ee)));let G=Math.min(...me);if(m)if(n<=1){const R=Math.min(...ae.map(Z=>Z-1));R>=m&&G<m&&(G=Math.min(R,m))}else{const R=Math.min(...ae.map(le=>le-1)),Z=m*n+(n-1)*(m*N);Z<=R&&G<Z&&(G=Z)}if(n<=1)return m&&G<m&&ae.every(Z=>Z>=m)?{groupWidth:m,barWidth:m}:{groupWidth:G,barWidth:G};let de=G/(n+(n-1)*N);return de<1&&(de=1),m&&de<m&&m*n+(n-1)*(m*N)<=G&&(de=m),{groupWidth:de*n+(n-1)*(de*N),barWidth:de}},[P,H,s,n,N,m]),ie=D&&D[t]?D[t]:void 0,V=e.color||ie||(r==="region"?Ur(e.id,t):fn(t)),ce=r==="region"?rs(e.id,t):gr(t),Ce=S&&(e.color||ie)?V:ce,he=Number.isFinite(j(0))?j(0):j.range()[0],pe=q.useId();return b&&b.length===e.data.length?o.jsxs("g",{className:"fdp-bar-series fdp-bar-series--stacked","data-series":e.id,opacity:T?w:M,"aria-hidden":T?!0:void 0,children:[y&&o.jsx("defs",{children:o.jsxs("linearGradient",{id:pe,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:V,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:V,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:V,stopOpacity:.06})]})}),e.data.map((ee,ae)=>{const me=i(ee),G=I(P?ee.x:me);let de,A;if(P)de=te,A=G;else{const K=H.find(J=>Math.abs(J.center-G)<.5);if(!K||!z)de=Y,A=G-Y/2;else{const{groupWidth:J}=z;de=J;let E=G-J/2;E<K.left&&(E=K.left),E+J>K.right&&(E=Math.max(K.left,K.right-J)),A=E}}const R=b[ae],Z=j(R.y0),le=j(R.y1),ue=Math.min(Z,le),ge=Math.abs(le-Z)||1;if(!P&&m&&de<m){const K=H.find(J=>Math.abs(J.center-G)<.5);if(K){const J=Math.max(2,K.right-K.left-1),E=Math.min(J,m);E>de&&(de=E,A=Math.max(K.left,Math.min(K.right-de,G-de/2)))}}const fe=!T&&F?.focused?.seriesId===e.id&&F.focused.index===ae,U=()=>{!F||T||F.setFocused({seriesId:e.id,index:ae,x:me,y:R.y1-R.y0,clientX:A+de/2,clientY:ue})},W=()=>{F?.focused?.seriesId===e.id&&F.focused.index===ae&&F.clear()};return o.jsx("rect",{x:A,y:ue,width:de,height:ge,fill:y?`url(#${pe})`:V,...y?{}:{fillOpacity:v},stroke:fe?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":y&&S?V:void 0,strokeWidth:fe?2:1,className:"fdp-bar fdp-bar--stacked",tabIndex:T||!a?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${me instanceof Date?me.toDateString():me} value ${R.y1-R.y0}`,onMouseEnter:U,onFocus:U,onMouseLeave:W,onBlur:W},ae)})]}):o.jsxs("g",{className:"fdp-bar-series","data-series":e.id,opacity:T?w:M,"aria-hidden":T?!0:void 0,children:[y&&o.jsxs("defs",{children:[p==="series"&&o.jsxs("linearGradient",{id:pe,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:V,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:V,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:V,stopOpacity:.06})]}),p==="category"&&e.data.map((ee,ae)=>{const G=D&&D[ae]||(r==="region"?Ur(String(ee.x),ae):fn(ae)),de=`${pe}-${ae}`;return o.jsxs("linearGradient",{id:de,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:G,stopOpacity:.3}),o.jsx("stop",{offset:"60%",stopColor:G,stopOpacity:.14}),o.jsx("stop",{offset:"100%",stopColor:G,stopOpacity:.06})]},de)})]}),e.data.map((ee,ae)=>{const me=i(ee),G=I(P?ee.x:me);let de,A;if(P){const ne=te;if(n<=1)A=ne,de=G;else{A=Math.max(1,ne/(n+(n-1)*N));const re=A*N,Q=A*n+re*(n-1);de=G+(ne-Q)/2+t*(A+re)}}else{const ne=H.find(re=>re.center===G);if(!ne||!z)A=Y,de=G-Y/2,m&&A<m&&(A=m,de=G-A/2);else{const{barWidth:re}=z;A=re;const Q=n>1?re*N:0,oe=A*n+Q*(n-1);let be=G-oe/2;be<ne.left&&(be=ne.left),be+oe>ne.right&&(be=Math.max(ne.left,ne.right-oe)),de=be+t*(A+Q)}if(m&&A<m){const re=H.find(Q=>Math.abs(Q.center-G)<.5);if(re){const Q=Math.max(2,re.right-re.left-1),oe=Math.min(Q,m);if(oe>A)if(n<=1)A=oe,de=Math.max(re.left,Math.min(re.right-A,G-A/2));else{const be=oe*N,_e=oe*n+be*(n-1);if(_e<=re.right-re.left-1){A=oe;const xe=_e;let je=G-xe/2;je<re.left&&(je=re.left),je+xe>re.right&&(je=Math.max(re.left,re.right-xe)),de=je+t*(A+be)}}}}}const R=de+A/2,Z=j(ee.y),le=Math.min(he,Z),ue=Math.abs(he-Z),ge=!T&&F?.focused?.seriesId===e.id&&F.focused.index===ae,fe=()=>{!F||T||F.setFocused({seriesId:e.id,index:ae,x:me,y:ee.y,clientX:R,clientY:Z})},U=()=>{F?.focused?.seriesId===e.id&&F.focused.index===ae&&F.clear()},W=p==="category"&&D?D[ae]:void 0,K=p==="category"?W||(r==="region"?Ur(String(ee.x),ae):fn(ae)):V,J=p==="category"?`${pe}-${ae}`:pe,E=y&&S?K:p==="category"?r==="region"?rs(String(ee.x),ae):gr(ae):Ce,X=ge?"var(--nhs-fdp-color-primary-yellow, #ffeb3b)":E||K;return o.jsx("rect",{x:de,y:le,width:A,height:ue||1,fill:y?`url(#${J})`:K,...y?{}:{fillOpacity:v},stroke:X,strokeWidth:ge?2:1,className:"fdp-bar",tabIndex:T||!a?-1:0,role:"graphics-symbol","aria-label":`${e.label||e.id} ${me instanceof Date?me.toDateString():me} value ${ee.y}`,onMouseEnter:fe,onFocus:fe,onMouseLeave:U,onBlur:U},ae)})]})},Zx=({series:e,innerWidth:t,innerHeight:n,paddingInner:r=.1,paddingOuter:i=.05,children:a,yTickCount:s=5})=>{const l=Yn(),u=t??l?.innerWidth??0,c=n??l?.innerHeight??0,d=q.useMemo(()=>e.flatMap(m=>m.data),[e]),f=q.useMemo(()=>{const m=new Set;return d.forEach(y=>m.add(y.x)),Array.from(m)},[d]),p=q.useMemo(()=>Math.max(0,...d.map(m=>m.y)),[d]),g=q.useMemo(()=>xu().domain(f).range([0,u]).paddingInner(r).paddingOuter(i),[f,u,r,i]),b=q.useMemo(()=>za().domain([0,p]).nice().range([c,0]),[p,c]),h=q.useMemo(()=>({xScale:g,yScale:b,getXTicks:()=>f,getYTicks:(m=s)=>b.ticks(m)}),[g,b,f,s]);return o.jsx(Go.Provider,{value:h,children:a})},Qx=({title:e,description:t,source:n,table:r,className:i,id:a,message:s="Interactive chart loadingâ€¦",forceFallback:l=!1})=>{const u=q.useId(),c=a||u,d=t?`${c}-desc`:void 0,f=n?`${c}-src`:void 0,p=typeof window<"u"&&!l;return o.jsxs("figure",{id:c,className:Za("fdp-chart fdp-chart--noscript",i),"aria-labelledby":`${c}-title`,"aria-describedby":Za(d,f),"data-component":"ChartNoScript",children:[o.jsx("header",{className:"fdp-chart__header",children:o.jsx("h3",{id:`${c}-title`,className:"fdp-chart__title",children:e})}),t&&o.jsx("p",{id:d,className:"fdp-chart__description",children:t}),!p&&o.jsx("div",{className:"fdp-chart__loading",role:"status","aria-live":"polite",children:s}),o.jsxs("div",{className:"fdp-chart__fallback",role:"group","aria-label":e,children:[o.jsx("noscript",{children:o.jsx("div",{className:"fdp-chart__noscript-wrapper",children:o.jsx(dn,{...r})})}),o.jsx("div",{className:"fdp-chart__table","data-fallback-table":!0,children:o.jsx(dn,{...r})})]}),n&&o.jsx("figcaption",{className:"fdp-chart__caption",children:n&&o.jsxs("small",{id:f,className:"fdp-chart__source",children:["Source: ",n]})})]})},e1=({selector:e="figure.fdp-chart",onEnhanced:t,delay:n=0,children:r})=>{const i=q.useRef(null);return q.useEffect(()=>{const a=i.current;if(!a)return;const s=()=>{const l=Array.from(a.querySelectorAll(e));if(l.length===0)return;const u=[];l.forEach(c=>{c.classList.contains("fdp-chart--enhanced")||(c.classList.add("fdp-chart--enhanced"),u.push(c))}),u.length&&t&&t(u)};if(n>0){if(typeof window>"u")return;const l=window.setTimeout(s,n);return()=>window.clearTimeout(l)}s()},[e,t,n]),o.jsx("div",{ref:i,children:r})},gf=({label:e,value:t,unit:n,delta:r,status:i="neutral",variant:a="default",subtitle:s,metadata:l,trendData:u,loading:c=!1,error:d,valueFormatter:f,className:p,style:g,id:b,announceDelta:h=!0,visual:m})=>{const y=q.useId(),S=b||y,M=`${S}-label`,w=`${S}-value`,v=`${S}-delta`,D=typeof t=="number"&&!Number.isNaN(t),N=c?"â€”":d?"":D?f?f(t):t.toLocaleString():t;let k,x="",I="";if(r&&!c&&!d){k=r.direction||(r.value>0?"up":r.value<0?"down":"neutral");const j=Math.abs(r.value),C=k==="up"?`+${j}`:k==="down"?`-${j}`:"0",$=r.isPercent?"%":"";if(x=`${C}${$}`,r.ariaLabel)I=r.ariaLabel;else{const T=r.invert?k==="down":k==="up";I=`${k==="neutral"?"no change":k==="up"?"up":"down"} ${j}${$}${k==="neutral"?"":T?" (improvement)":" (worse)"}`}}return o.jsx("div",{className:Za("fdp-metric-card",a&&`fdp-metric-card--${a}`,i&&`fdp-metric-card--status-${i}`,c&&"fdp-metric-card--loading",d&&"fdp-metric-card--error",p),style:g,role:"group","aria-labelledby":M,"data-component":"MetricCard",children:o.jsxs("div",{className:"fdp-metric-card__inner",children:[o.jsxs("div",{className:"fdp-metric-card__header",children:[o.jsx("h3",{id:M,className:"fdp-metric-card__label",children:e}),l&&o.jsx("div",{className:"fdp-metric-card__metadata",children:l})]}),o.jsxs("div",{className:"fdp-metric-card__content",children:[o.jsxs("div",{className:"fdp-metric-card__value-section",children:[o.jsx("div",{id:w,className:"fdp-metric-card__value",children:c?o.jsx("div",{className:"fdp-metric-card__skeleton","aria-hidden":"true",children:o.jsx("div",{className:"fdp-metric-card__skeleton-line fdp-metric-card__skeleton-line--value"})}):d?o.jsx("div",{className:"fdp-metric-card__error",role:"alert",children:d}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"fdp-metric-card__number",children:N}),n&&o.jsx("span",{className:"fdp-metric-card__unit",children:n})]})}),s&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__subtitle",children:s})]}),r&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__delta-section",children:o.jsxs("div",{id:v,"aria-label":I,className:Za("fdp-metric-card__delta",k&&`fdp-metric-card__delta--${k}`),children:[o.jsx("span",{className:"fdp-metric-card__delta-value",children:x}),r.period&&o.jsx("span",{className:"fdp-metric-card__delta-period",children:r.period})]})}),u&&u.length>0&&!c&&!d&&o.jsx("div",{className:"fdp-metric-card__trend","aria-hidden":"true"})]}),m&&!d&&o.jsx("div",{className:"fdp-metric-card__visual","aria-hidden":"true",children:m}),h&&r&&!r.ariaLabel&&!c&&!d&&o.jsx("div",{className:"fdp-visually-hidden","aria-live":"polite",children:I})]})})};let rl=null;try{rl=require("@fergusbisset/nhs-fdp-design-system/dist/js/tokens.json")?.color?.["data-viz"]?.spc||null}catch{}const Xe=(e,t)=>{if(!rl)return t;const n=e.split(".");let r=rl;for(const a of n){if(r==null)break;r=r[a]}const i=r;return i==null?t:typeof i=="string"||typeof i=="number"?String(i):i.$value!=null?String(i.$value):i.value!=null?String(i.value):t},is=()=>({start:Xe("gradient.stop.start-opacity","0.12"),mid:Xe("gradient.stop.mid-opacity","0.03"),end:Xe("gradient.stop.end-opacity","0"),triStart:Xe("gradient.stop.triangle-start-opacity",Xe("gradient.stop.start-opacity","0.12")),triMid:Xe("gradient.stop.triangle-mid-opacity",Xe("gradient.stop.mid-opacity","0.03")),triEnd:Xe("gradient.stop.triangle-end-opacity",Xe("gradient.stop.end-opacity","0"))});var Ct=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(Ct||{}),Ae=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(Ae||{}),$e=(e=>(e.Improvement="improvement",e.Concern="concern",e.Neither="neither",e.Suppressed="suppressed",e))($e||{}),An=(e=>(e.SinglePoint="single_point",e.TwoSigma="two_sigma",e.Shift="shift",e.Trend="trend",e))(An||{});const il=["single_point","two_sigma","shift","trend"];il.reduce((e,t,n)=>(e[t]=n+1,e),{});const t1={single_point:"Single point beyond process limit",two_sigma:"Two of three beyond 2Ïƒ on one side",shift:"Sustained shift (run)",trend:"Monotonic trend"},n1={single_point:"point",two_sigma:"cluster",shift:"sustained",trend:"sustained"},bf=il.reduce((e,t,n)=>(e[t]={id:t,rank:n+1,label:t1[t],category:n1[t],participatesInRanking:!0},e),{});il.map(e=>bf[e]);var $t=(e=>(e.Up="up",e.Down="down",e))($t||{}),Dt=(e=>(e.SinglePointAbove="single_above",e.SinglePointBelow="single_below",e.TwoOfThreeAbove="two_of_three_above",e.TwoOfThreeBelow="two_of_three_below",e.FourOfFiveAbove="four_of_five_above",e.FourOfFiveBelow="four_of_five_below",e.ShiftHigh="shift_high",e.ShiftLow="shift_low",e.TrendIncreasing="trend_inc",e.TrendDecreasing="trend_dec",e.FifteenInnerThird="fifteen_inner_third",e))(Dt||{}),ct=(e=>(e.Pass="pass",e.Fail="fail",e.None="none",e))(ct||{}),Zt=(e=>(e.Shift="shift",e.Trend="trend",e.Point="point",e))(Zt||{}),as=(e=>(e.Legacy="legacy",e.DirectionalFirst="directional_first",e))(as||{}),yf=(e=>(e.None="none",e.SqlRankingV26a="sql_ranking_v2_6a",e))(yf||{}),Vr=(e=>(e.Upwards="Upwards",e.Downwards="Downwards",e.Same="Same",e))(Vr||{}),vf=(e=>(e.Sql="sql",e.Conflict="conflict",e))(vf||{}),$i=(e=>(e.ImprovementValueBeforePruning="improvementValueBeforePruning",e.ConcernValueBeforePruning="concernValueBeforePruning",e))($i||{});const Gr={singlePointUp:{tooltip:"Single point above upper control limit",narration:"Single point beyond a control limit"},singlePointDown:{tooltip:"Single point below lower control limit",narration:"Single point beyond a control limit"},twoOfThreeUp:{tooltip:"Two of three points beyond +2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},twoOfThreeDown:{tooltip:"Two of three points beyond -2Ïƒ",narration:"Two of three points beyond two sigma (same side)"},fourOfFiveUp:{tooltip:"Four of five points beyond +1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},fourOfFiveDown:{tooltip:"Four of five points beyond -1Ïƒ",narration:"Four of five points beyond one sigma (same side)"},shiftUp:{tooltip:"Shift: run of points above centre line",narration:"Shift (run on one side of mean)"},shiftDown:{tooltip:"Shift: run of points below centre line",narration:"Shift (run on one side of mean)"},trendUp:{tooltip:"Trend: consecutive increasing points",narration:"Trend (consecutive increases)"},trendDown:{tooltip:"Trend: consecutive decreasing points",narration:"Trend (consecutive decreases)"}};function ss(e){if(!e)return[];const t=[];return e.specialCauseSinglePointUp&&t.push("singlePointUp"),e.specialCauseSinglePointDown&&t.push("singlePointDown"),e.specialCauseTwoOfThreeUp&&t.push("twoOfThreeUp"),e.specialCauseTwoOfThreeDown&&t.push("twoOfThreeDown"),e.specialCauseFourOfFiveUp&&t.push("fourOfFiveUp"),e.specialCauseFourOfFiveDown&&t.push("fourOfFiveDown"),e.specialCauseShiftUp&&t.push("shiftUp"),e.specialCauseShiftDown&&t.push("shiftDown"),e.specialCauseTrendUp&&t.push("trendUp"),e.specialCauseTrendDown&&t.push("trendDown"),t}function os(e){switch(e){case $e.Improvement:return"Improvement signal";case $e.Concern:return"Concern signal";case $e.Neither:return"Common cause variation";case $e.Suppressed:return null;default:return null}}function _f(e){switch(e){case ct.Pass:return"Target met";case ct.Fail:return"Target not met";default:return null}}function r1(e,t,n){if(e==null||!Number.isFinite(t)||t<=0)return null;const r=Math.abs((n-e)/t);return r<1?"Within 1Ïƒ":r<2?"Between 1â€“2Ïƒ":r<3?"Between 2â€“3Ïƒ":"Beyond 3Ïƒ"}const ln={improvement:{token:"var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",hex:"#00B0F0"},concern:{token:"var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",hex:"#E46C0A"},neither:{token:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",hex:"#A6A6A6"},suppressed:{token:"var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",hex:"#490092"}};function xf(e){return e?ln[e]?.token??ln.neither.token:ln.neither.token}function i1(e){return e?ln[e]?.hex??ln.neither.hex:ln.neither.hex}var qn=(e=>(e.Pass="pass",e.Fail="fail",e.Uncertain="uncertain",e))(qn||{});const a1={pass:"#00B0F0",fail:"#E46C0A",uncertain:"#A6A6A6"},s1={pass:"P",fail:"F",uncertain:"?"};var nt=(e=>(e.HigherIsBetter="higher_is_better",e.LowerIsBetter="lower_is_better",e.ContextDependent="context_dependent",e))(nt||{}),Fe=(e=>(e.Higher="higher",e.Lower="lower",e))(Fe||{}),Lt=(e=>(e.Improving="improving",e.Deteriorating="deteriorating",e.No_Judgement="no_judgement",e.None="none",e))(Lt||{}),Ne=(e=>(e.SpecialCauseImproving="special_cause_improving",e.SpecialCauseDeteriorating="special_cause_deteriorating",e.CommonCause="common_cause",e.SpecialCauseNoJudgement="special_cause_no_judgement",e))(Ne||{});const o1=e=>{const t=e.replace("#",""),n=parseInt(t.slice(0,2),16)/255,r=parseInt(t.slice(2,4),16)/255,i=parseInt(t.slice(4,6),16)/255,a=[n,r,i].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*a[0]+.7152*a[1]+.0722*a[2]<.55?"#ffffff":"#212b32"},ls={special_cause_deteriorating:{hex:ln.concern.hex,judgement:"deteriorating",label:"Special Cause (Deteriorating)",description:"Deteriorating variation detected (special cause) relative to baseline."},special_cause_improving:{hex:ln.improvement.hex,judgement:"improving",label:"Special Cause (Improving)",description:"Improving variation detected (special cause) relative to baseline."},common_cause:{hex:ln.neither.hex,judgement:"none",label:"Common Cause",description:"Common cause variation only â€“ no special cause detected."},special_cause_no_judgement:{hex:ln.suppressed.hex,judgement:"no_judgement",label:"Special Cause (No Judgement)",description:"Special cause detected without assigning improving/deteriorating judgement."}};Object.values(ls).forEach(e=>{e.text||(e.text=o1(e.hex))});const al=e=>ls[e],cs=e=>ls[e].judgement||"none",wf={special:{higher:[{cx:77.5,cy:158.5},{cx:114,cy:175},{cx:150.5,cy:158.5},{cx:188,cy:125},{cx:225,cy:137}],lower:[{cx:77.5,cy:139.5},{cx:114,cy:124.5},{cx:150.5,cy:139.5},{cx:188,cy:175.5},{cx:224.5,cy:162}]},common:[{cx:76.5,cy:149.5},{cx:113,cy:179.5},{cx:149.5,cy:117},{cx:187,cy:171},{cx:223.5,cy:158}]};function l1(e,t){let n;return e==="common_cause"?n=wf.common:n=wf.special[t==="lower"?"lower":"higher"],n.map(r=>({...r}))}var bt=(e=>(e.Concern="concern",e.Improvement="improvement",e.NoJudgement="noJudgement",e.Common="common",e))(bt||{}),Xn=(e=>(e.Classic="classic",e.Triangle="triangle",e.TriangleWithRun="triangleWithRun",e))(Xn||{}),Li=(e=>(e.Direction="direction",e.Polarity="polarity",e))(Li||{});const Sf=e=>{const t=()=>{globalThis.__spcIconDeprecationEmitted||(console.warn("[SPCVariationIcon] Deprecated payload shape detected. Migrate to { variationIcon, improvementDirection, specialCauseNeutral?, trend? }."),globalThis.__spcIconDeprecationEmitted=!0)};if(e.variationIcon!==void 0){const s=e;let l;s.improvementDirection!==void 0?l=s.improvementDirection===Ae.Up?nt.HigherIsBetter:s.improvementDirection===Ae.Down?nt.LowerIsBetter:nt.ContextDependent:s.polarity&&(l=s.polarity);let u;switch(s.variationIcon){case $e.Improvement:u=Ne.SpecialCauseImproving;break;case $e.Concern:u=Ne.SpecialCauseDeteriorating;break;case $e.Neither:u=s.specialCauseNeutral?Ne.SpecialCauseNoJudgement:Ne.CommonCause;break;case $e.Suppressed:default:u=Ne.SpecialCauseNoJudgement;break}let c=s.trend;return c||(u===Ne.SpecialCauseImproving?c=l===nt.LowerIsBetter?Fe.Lower:Fe.Higher:u===Ne.SpecialCauseDeteriorating?c=l===nt.LowerIsBetter?Fe.Higher:Fe.Lower:u===Ne.SpecialCauseNoJudgement?s.highSideSignal&&!s.lowSideSignal?c=Fe.Higher:s.lowSideSignal&&!s.highSideSignal?c=Fe.Lower:c=Fe.Higher:c=Fe.Higher),{state:u,direction:c,polarity:l??nt.ContextDependent}}if(e.state!==void 0){t();const s=e;let l=s.trend;return!l&&(s.state===Ne.SpecialCauseImproving||s.state===Ne.SpecialCauseDeteriorating)&&s.polarity&&(s.state===Ne.SpecialCauseImproving?l=s.polarity===nt.LowerIsBetter?Fe.Lower:Fe.Higher:l=s.polarity===nt.LowerIsBetter?Fe.Higher:Fe.Lower),l||(s.state===Ne.SpecialCauseImproving?l=Fe.Higher:s.state===Ne.SpecialCauseDeteriorating?l=Fe.Lower:l=Fe.Higher),{state:s.state,direction:l,polarity:s.polarity??nt.ContextDependent}}const n=e;t();const i={[Lt.Improving]:Ne.SpecialCauseImproving,[Lt.Deteriorating]:Ne.SpecialCauseDeteriorating,[Lt.No_Judgement]:Ne.SpecialCauseNoJudgement,[Lt.None]:Ne.CommonCause}[n.judgement];let a;return n.judgement===Lt.Improving?a=n.polarity===nt.LowerIsBetter?Fe.Lower:Fe.Higher:n.judgement===Lt.Deteriorating?a=n.polarity===nt.LowerIsBetter?Fe.Higher:Fe.Lower:a=n.trend??Fe.Higher,{state:i,direction:a,polarity:n.polarity}};function Cf(e,t){const{state:n,direction:r,polarity:i}=Sf(e),a=cs(n),s=r===Fe.Higher?"above":"below",l=r===Fe.Higher?"upwards":"downwards",u=(()=>{switch(i){case nt.HigherIsBetter:return"For this measure, higher values are better.";case nt.LowerIsBetter:return"For this measure, lower values are better.";default:return"Direction of improvement is context dependent."}})();return[(()=>{switch(a){case Lt.Improving:return`Special cause improvement: recent data show a sustained run ${s} the mean (unlikely due to random variation).`;case Lt.Deteriorating:return`Special cause deterioration: recent data show a sustained run ${s} the mean (unlikely due to random variation).`;case Lt.No_Judgement:return`Special cause detected (no value judgement): recent data show a change in level, trending ${l}.`;case Lt.None:default:return"Common cause variation: points vary randomly around the mean; no special cause detected."}})(),u,null,null,null,null,null].filter(Boolean).join(" ")}const sl=(e,t,n,r,i,a)=>o.jsxs("defs",{children:[r&&o.jsxs("filter",{id:t,filterUnits:"objectBoundingBox",children:[o.jsx("feGaussianBlur",{stdDeviation:"3"}),o.jsx("feOffset",{dx:"0",dy:"15",result:"blur"}),o.jsx("feFlood",{floodColor:"rgb(150,150,150)",floodOpacity:"1"}),o.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),i&&o.jsx("linearGradient",{id:n,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:a.map(s=>o.jsx("stop",{offset:s.offset,stopColor:e,stopOpacity:parseFloat(s.opacity)},s.offset))})]}),us=({data:e,size:t=44,ariaLabel:n,showLetter:r=!0,dropShadow:i=!0,gradientWash:a=!1,variant:s=Xn.Classic,runLength:l=0,letterMode:u=Li.Polarity,letterOverride:c,...d})=>{const f=B.useId(),p=B.useId(),{start:g,mid:b,end:h,triStart:m,triMid:y,triEnd:S}=is(),{state:M,direction:w,polarity:v}=B.useMemo(()=>Sf(e),[e]),D=B.useMemo(()=>al(M),[M]),N=B.useMemo(()=>cs(M),[M]),k=N===Lt.Improving||N===Lt.Deteriorating;let x="";r&&k&&(u===Li.Polarity?v===nt.HigherIsBetter?x="H":v===nt.LowerIsBetter?x="L":x="":x=w===Fe.Higher?"H":"L"),c!==void 0&&(x=c);const I=M!==Ne.CommonCause,j=M===Ne.SpecialCauseNoJudgement,C=Xe("common-cause","#A6A6A6"),$=I?D.hex:C,T=B.useMemo(()=>l1(M,w),[M,w]),F=n||`${D.label}${x?w===Fe.Higher?" â€“ Higher":" â€“ Lower":""}`,P=Cf(e);if(s===Xn.TriangleWithRun){const H=[[150,90],[100,190],[200,190]],z=[[150,140+100/2],[150-100/2,140-100/2],[150+100/2,140-100/2]];let ie=null;M===Ne.SpecialCauseImproving||M===Ne.SpecialCauseDeteriorating?ie=o.jsx("polygon",{points:(w===Fe.Higher?H:z).map(de=>de.join(",")).join(" "),fill:D.hex,stroke:D.hex,strokeWidth:6,transform:w===Fe.Higher?"translate(0, -8)":"translate(0, 15)"}):M===Ne.SpecialCauseNoJudgement&&(ie=o.jsx("polygon",{points:w===Fe.Higher?H.map(de=>de.join(",")).join(" "):z.map(de=>de.join(",")).join(" "),fill:D.hex,stroke:D.hex,strokeWidth:6,transform:w===Fe.Higher?"translate(0,-7)":"translate(0,14)"}));const V=Math.max(0,Math.min(5,Math.floor(l||0))),ce=M===Ne.CommonCause?160:w===Fe.Higher?220:70,Ce=10,he=26,pe=150-2*he,ee=M===Ne.SpecialCauseImproving?Xe("improvement","#00B0F0"):M===Ne.SpecialCauseDeteriorating?Xe("concern","#E46C0A"):C,ae=Array.from({length:5}).map((de,A)=>{const Z=(M===Ne.SpecialCauseImproving||M===Ne.SpecialCauseDeteriorating)&&A>=5-V?ee:C;return o.jsx("circle",{cx:pe+A*he,cy:ce,r:Ce,fill:Z,stroke:Z,strokeWidth:1},A)}),me=sl(D.hex,f,p,i,a,[{offset:"0%",opacity:m},{offset:"75%",opacity:y},{offset:"100%",opacity:S}]),G=M===Ne.CommonCause||w===Fe.Higher?"translate(0,-10)":"translate(0,25)";return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":F,"aria-description":P,...d,children:[me,o.jsx("circle",{stroke:"none",fill:a?`url(#${p})`:"#ffffff",...i?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:D.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),o.jsxs("g",{transform:G,children:[ie,x&&o.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:64,x:"150",y:w===Fe.Higher?155:145,textAnchor:"middle",dominantBaseline:"middle",children:x}),ae]})]})}if(s===Xn.Triangle){const H=[[150,75],[75,225],[225,225]],z=[[150,150+150/2],[150-150/2,150-150/2],[150+150/2,150-150/2]],ie=[[150-150/2,150+150/2],[150+150/2,150+150/2]];let V=null;M===Ne.SpecialCauseImproving||M===Ne.SpecialCauseDeteriorating?V=o.jsx("polygon",{points:(w===Fe.Higher?H:z).map(Ce=>Ce.join(",")).join(" "),fill:D.hex,stroke:D.hex,strokeWidth:8,transform:w===Fe.Higher?"translate(0, -10)":"translate(0, 10)"}):M===Ne.SpecialCauseNoJudgement?V=o.jsx("polygon",{points:w===Fe.Higher?H.map(Ce=>Ce.join(",")).join(" "):z.map(Ce=>Ce.join(",")).join(" "),fill:D.hex,stroke:D.hex,strokeWidth:8,transform:w===Fe.Higher?"translate(0, -15)":"translate(0, 15)"}):M===Ne.CommonCause&&(V=o.jsx("line",{x1:ie[0][0],y1:ie[0][1],x2:ie[1][0],y2:ie[1][1],stroke:D.hex,strokeWidth:32,strokeLinecap:"square",transform:"translate(0, -75)"}));const ce=sl(D.hex,f,p,i,a,[{offset:"0%",opacity:m},{offset:"65%",opacity:y},{offset:"100%",opacity:S}]);return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":F,"aria-description":P,...d,children:[ce,o.jsx("circle",{stroke:"none",fill:a?`url(#${p})`:"#ffffff",...i?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:D.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),V,x&&(M===Ne.SpecialCauseImproving||M===Ne.SpecialCauseDeteriorating)&&o.jsx("text",{fill:"#fff",fontFamily:"'Frutiger W01', Frutiger, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:100,x:"150",y:w===Fe.Higher?"170":"140",textAnchor:"middle",dominantBaseline:"middle",children:x})]})}const L=sl(D.hex,f,p,i,a,[{offset:"0%",opacity:g},{offset:"65%",opacity:b},{offset:"100%",opacity:h}]);return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":F,"aria-description":P,...d,children:[L,o.jsx("circle",{stroke:"none",fill:a?`url(#${p})`:"#ffffff",...i?{filter:`url(#${f})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("circle",{stroke:D.hex,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"}),x&&o.jsx("text",{fill:D.hex,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,transform:"translate(86.67, 54) scale(0.5, 0.5)",textAnchor:"end",children:o.jsx("tspan",{x:"120",y:w===Fe.Lower?"340":"155",children:x})}),j?o.jsx("path",{"aria-hidden":"true",fillRule:"evenodd",stroke:"none",fill:D.hex,...w===Fe.Lower?{transform:"rotate(90 150 150)"}:{transform:"translate(-5 0) rotate(0 150 150)"},d:"M 90.26,185.42 L 149.31,126.37 127.44,104.51 209.81,90.66 195.96,173.02 174.09,151.16 115.05,210.2 90.26,185.42 Z M 90.26,185.42"}):o.jsxs(o.Fragment,{children:[T.length===5&&o.jsx("path",{"aria-hidden":"true",fill:"none",stroke:C,strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9,d:`M ${T.map(te=>`${te.cx} ${te.cy}`).join(" L ")}`}),T.map((te,Y)=>{const H=Y>=T.length-2&&I?$:C,z=H;return o.jsx("circle",{stroke:z,strokeWidth:2,strokeMiterlimit:10,fill:H,cx:te.cx,cy:te.cy,r:16},Y)})]})]})};us.displayName="SPCVariationIcon";const c1={xs:{height:24,pointR:2,stroke:1},sm:{height:32,pointR:3,stroke:1},md:{height:44,pointR:4,stroke:1}};function u1(e,t){return!t||e.length<=t?e:e.slice(e.length-t)}function d1(e){const t=e.filter(s=>typeof s.value=="number");if(!t.length)return{mean:null,latestValue:null,latestIndex:null};const n=t.reduce((s,l)=>s+l.value,0)/t.length,r=[...e].reverse().findIndex(s=>s.value!=null),i=r>=0?e.length-1-r:null,a=i!=null?e[i].value:null;return{mean:n,latestValue:a,latestIndex:i}}function f1(e){switch(e){case Ne.SpecialCauseImproving:return Xe("improvement","#00B0F0");case Ne.SpecialCauseDeteriorating:return Xe("concern","#E46C0A");case Ne.SpecialCauseNoJudgement:return Xe("no-judgement","#490092");case Ne.CommonCause:return Xe("common-cause","#A6A6A6");default:return Xe("common-cause","#A6A6A6")}}const kf=({data:e,windowSize:t,minPointsForSignals:n=13,showMean:r=!0,showLimits:i=!0,showLimitBand:a=!0,showInnerBands:s=!1,showLatestMarker:l=!0,showStateGlyph:u=!0,variationState:c,autoClassify:d=!1,metricImprovement:f,gradientWash:p=!1,size:g="sm",ariaLabel:b,className:h,onPointClick:m,onClassification:y,maxPoints:S,thinningStrategy:M="stride",colorPointsBySignal:w=!0,centerLine:v,controlLimits:D,sigmaBands:N,pointSignals:k,pointNeutralSpecialCause:x})=>{const I=f,j=B.useMemo(()=>u1(e,t),[e,t]),C=B.useMemo(()=>d1(j),[j]),$=c1[g],T=Math.max(j.length*6,60),F=$.height,P=4,L=2,te=B.useMemo(()=>(e?.length??0)-(j?.length??0),[e?.length,j?.length]),O=j.filter(U=>U.value!=null).map(U=>U.value),H=v??C.mean,z=B.useMemo(()=>{if(H==null)return null;const U=[];if(N?.upperOne!=null&&U.push(Math.abs(N.upperOne-H)),N?.lowerOne!=null&&U.push(Math.abs(H-N.lowerOne)),U.length)return U.reduce((K,J)=>K+J,0)/U.length;const W=[];return D?.upper!=null&&W.push(Math.abs(D.upper-H)/3),D?.lower!=null&&W.push(Math.abs(H-D.lower)/3),W.length?W.reduce((K,J)=>K+J,0)/W.length:null},[N?.upperOne,N?.lowerOne,D?.upper,D?.lower,H]),ie=B.useMemo(()=>{if(z!=null||!O.length||H==null||O.length<2)return null;const U=[];for(let K=1;K<O.length;K++){const J=O[K-1],E=O[K];J!=null&&E!=null&&U.push(Math.abs(E-J))}return U.length?U.reduce((K,J)=>K+J,0)/U.length/1.128:null},[z,O.join(","),H]),V=z??ie,ce=B.useMemo(()=>{if(!i)return null;if(D)return D;if(H==null||V==null)return null;const U=3*V;return{lower:H-U,upper:H+U}},[i,H,V,D?.lower,D?.upper]),Ce=B.useMemo(()=>{if(c)return{state:c,firedRules:[],mean:C.mean,stdDev:V};if(!d||!V||V===0||H==null||C.latestValue==null)return{state:Ne.CommonCause,firedRules:[],mean:C.mean,stdDev:V};const U=[],W=C.latestValue,K=D?.upper??(V!=null&&H!=null?H+3*V:null),J=D?.lower??(V!=null&&H!=null?H-3*V:null);K!=null&&J!=null&&(W>K||W<J)&&U.push("point-beyond-3sigma");const E=O.slice(-8);if(E.length===8){const Q=E.every(be=>be>H),oe=E.every(be=>be<H);(Q||oe)&&U.push("eight-point-run")}const X=O.slice(-5);if(X.length===5){const Q=X.every((xe,je,ye)=>je===0||xe>=ye[je-1]),oe=X.every((xe,je,ye)=>je===0||xe<=ye[je-1]),be=N?.upperOne??(V!=null&&H!=null?H+V:null),_e=N?.lowerOne??(V!=null&&H!=null?H-V:null);Q&&be!=null&&X[X.length-1]>be&&U.push("five-point-trend"),oe&&_e!=null&&X[X.length-1]<_e&&U.push("five-point-trend")}const ne=O.slice(-3);if(ne.length===3&&(V!=null||N)){const Q=N?.upperTwo??(H!=null&&V!=null?H+2*V:null),oe=N?.lowerTwo??(H!=null&&V!=null?H-2*V:null);if(Q!=null&&oe!=null){const be=ne.filter(xe=>xe>Q).length,_e=ne.filter(xe=>xe<oe).length;be>=2&&U.push("two-of-three-near-limit"),_e>=2&&U.push("two-of-three-near-limit")}}let re=Ne.CommonCause;if(U.includes("point-beyond-3sigma")?re=W>H?Ne.SpecialCauseImproving:Ne.SpecialCauseDeteriorating:(U.includes("eight-point-run")||U.includes("five-point-trend")||U.includes("two-of-three-near-limit"))&&(re=O[O.length-1]>H?Ne.SpecialCauseImproving:Ne.SpecialCauseDeteriorating),d&&!c&&U.length===1&&U[0]==="point-beyond-3sigma"){const Q=O.slice(-9,-1);if(Q.length>=5){const oe=Q.filter(_e=>_e>H).length,be=Q.filter(_e=>_e<H).length;oe>0&&be>0&&(re=Ne.SpecialCauseNoJudgement)}}return{state:re,firedRules:U,mean:H,stdDev:V,side:C.latestValue!=null&&H!=null?C.latestValue>H?"above":"below":void 0}},[c,d,V,H,C.latestValue,O.join(",")]);B.useEffect(()=>{d&&!c&&y&&y(Ce)},[Ce,d,c,y]);const he=Ce.state,pe=f1(he),ee=U=>{const W=j.filter(X=>X.value!=null);if(!W.length)return F/2;const K=W.map(X=>X.value);ce&&(ce.lower!=null&&K.push(ce.lower),ce.upper!=null&&K.push(ce.upper));const J=Math.min(...K),E=Math.max(...K);return J===E?F/2:F-(U-J)/(E-J)*(F-L*2)-L},ae=B.useMemo(()=>{if(!S||j.length<=S)return j.map((ne,re)=>re);if(M==="stride"){const ne=Math.max(2,S),re=(j.length-1)/(ne-1),Q=new Set;for(let oe=0;oe<ne;oe++)Q.add(Math.round(oe*re));return Q.add(j.length-1),Array.from(Q).sort((oe,be)=>oe-be)}const U=j.map((ne,re)=>({i:re,v:ne.value}));function W(ne,re,Q){const oe=ne.i,be=ne.v??0,_e=re.i,xe=re.v??0,je=Q.i,ye=Q.v??0,Le=Math.abs((ye-xe)*oe-(je-_e)*be+je*xe-ye*_e),Ve=Math.hypot(ye-xe,je-_e);return Ve===0?0:Le/Ve}function K(ne,re){if(ne.length<=2)return ne;let Q=-1,oe=-1;for(let be=1;be<ne.length-1;be++){const _e=W(ne[be],ne[0],ne[ne.length-1]);_e>Q&&(Q=_e,oe=be)}if(Q>re){const be=K(ne.slice(0,oe+1),re),_e=K(ne.slice(oe),re);return[...be.slice(0,-1),..._e]}return[ne[0],ne[ne.length-1]]}let J=.1,E=U;for(let ne=0;ne<8&&(E=K(U,J),!(E.length<=S));ne++)J*=1.6;const X=new Set(E.map(ne=>ne.i));return X.add(0),X.add(j.length-1),Array.from(X).sort((ne,re)=>ne-re)},[j,S,M]),me=B.useMemo(()=>ae.map(U=>j[U]),[ae,j]),G=B.useMemo(()=>{let U="";return me.forEach((W,K)=>{if(W.value==null)return;const J=ee(W.value),E=K/(me.length-1||1)*(T-P*2)+P;U+=U?` L ${E} ${J}`:`M ${E} ${J}`}),U},[me,T]),de=C.latestIndex??-1,A=ce,R=is(),Z=B.useMemo(()=>`spc-spark-wash-${Math.random().toString(36).slice(2)}`,[j.length,p]),le=j.length>=(n||0),ue=b||"SPC sparkline",ge=(()=>{if(!he)return;const U=I===Ae.Up?nt.HigherIsBetter:I===Ae.Down?nt.LowerIsBetter:nt.ContextDependent,W={variationIcon:he===Ne.SpecialCauseImproving?"improvement":he===Ne.SpecialCauseDeteriorating?"concern":he===Ne.SpecialCauseNoJudgement?"none":"neither",trend:I===Ae.Up?Fe.Higher:Fe.Lower,polarity:U};try{return Cf(W)}catch{return}})(),fe=B.useMemo(()=>{if(!le)return 10;const U=[...j].reverse().filter(K=>K.value!=null).slice(0,6).map(K=>ee(K.value));return U.length&&U.reduce((K,J)=>K+J,0)/U.length<F/2?F:10},[j,le,F]);return o.jsxs("svg",{role:"img","aria-label":ue,"aria-description":ge,width:T,height:F,className:h,viewBox:`0 0 ${T} ${F}`,children:[p&&o.jsxs(o.Fragment,{children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:Z,x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:pe,stopOpacity:Number(R.start)}),o.jsx("stop",{offset:"60%",stopColor:pe,stopOpacity:Number(R.mid)}),o.jsx("stop",{offset:"100%",stopColor:pe,stopOpacity:Number(R.end)})]})}),o.jsx("rect",{x:0,y:0,width:T,height:F,fill:`url(#${Z})`})]}),A&&A.lower!=null&&A.upper!=null&&o.jsxs(o.Fragment,{children:[a&&o.jsx("rect",{x:0,y:Math.min(ee(A.upper),ee(A.lower)),width:T,height:Math.abs(ee(A.upper)-ee(A.lower)),fill:pe,fillOpacity:.08}),o.jsx("line",{x1:0,x2:T,y1:ee(A.lower),y2:ee(A.lower),stroke:pe,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),o.jsx("line",{x1:0,x2:T,y1:ee(A.upper),y2:ee(A.upper),stroke:pe,strokeDasharray:"4,4",strokeOpacity:.3,strokeWidth:1}),N&&s&&o.jsxs(o.Fragment,{children:[N.lowerTwo!=null&&o.jsx("line",{x1:0,x2:T,y1:ee(N.lowerTwo),y2:ee(N.lowerTwo),stroke:pe,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1}),N.lowerOne!=null&&o.jsx("line",{x1:0,x2:T,y1:ee(N.lowerOne),y2:ee(N.lowerOne),stroke:pe,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),N.upperOne!=null&&o.jsx("line",{x1:0,x2:T,y1:ee(N.upperOne),y2:ee(N.upperOne),stroke:pe,strokeDasharray:"2,6",strokeOpacity:.2,strokeWidth:1}),N.upperTwo!=null&&o.jsx("line",{x1:0,x2:T,y1:ee(N.upperTwo),y2:ee(N.upperTwo),stroke:pe,strokeDasharray:"3,6",strokeOpacity:.2,strokeWidth:1})]})]}),r&&C.mean!=null&&o.jsx("line",{x1:0,x2:T,y1:ee(C.mean),y2:ee(C.mean),stroke:Xe("common-cause","#A6A6A6"),strokeWidth:1,strokeDasharray:"2,2"}),o.jsx("path",{d:G,fill:"none",stroke:Xe("common-cause","#A6A6A6"),strokeWidth:$.stroke,strokeLinecap:"round"}),ae.map((U,W)=>{const K=j[U];if(!K||K.value==null)return null;const J=ee(K.value),E=W/(me.length-1||1)*(T-P*2)+P,ne=(U===de&&l?$.pointR+1:$.pointR)-.5;let re=Xe("common-cause","#A6A6A6");if(w){const Q=k?.[te+U];if(Q==="improvement")re=Xe("improvement","#00B0F0");else if(Q==="concern")re=Xe("concern","#E46C0A");else if(x?.[te+U])re=Xe("no-judgement","#490092");else if(H!=null){const be=K.value,_e=D?.upper??(V!=null?H+3*V:null),xe=D?.lower??(V!=null?H-3*V:null);_e!=null&&be>_e?re=Xe("improvement","#00B0F0"):xe!=null&&be<xe?re=Xe("concern","#E46C0A"):re=Xe("common-cause","#A6A6A6")}else re=Xe("common-cause","#A6A6A6")}return o.jsx("circle",{cx:E,cy:J,r:ne,fill:re,stroke:"none",strokeWidth:0,onClick:m?()=>m(U,K):void 0,style:m?{cursor:"pointer"}:void 0,"data-index":U,"data-signal-colour":w?re:void 0},U)}),u&&le&&he&&he!==Ne.CommonCause&&I&&o.jsx("text",{x:T-4,y:fe,textAnchor:"end",fontSize:12,fontWeight:"bold",fill:pe,"data-glyph-pos":fe<F/2?"top":"bottom",children:I===Ae.Up?"H":"L"})]})};kf.displayName="SPCSpark";const Te=e=>typeof e=="number"&&Number.isFinite(e),h1=e=>e.reduce((t,n)=>t+n,0),hn=e=>e.length?h1(e)/e.length:NaN;function Tf(e,t){const n=new Array(e.length).fill(null);let r=null;for(let i=0;i<e.length;i++){const a=e[i];if(!t[i]&&Te(a)){if(r!==null){const s=e[r];n[i]=Te(s)?Math.abs(a-s):null}r=i}}return n}function Nf(e,t){const n=e.filter(a=>Te(a));if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=hn(n),i=3.267*r;if(t){const a=n.filter(s=>s<=i);a.length&&a.length!==n.length&&(r=hn(a),i=3.267*r)}return{mrMean:r,mrUcl:i}}function p1(e,t){if(!Te(e)||!Te(t))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=2.66,r=2/3*n,i=1/3*n;return{upperProcessLimit:e+n*t,lowerProcessLimit:e-n*t,upperTwoSigma:e+r*t,lowerTwoSigma:e-r*t,upperOneSigma:e+i*t,lowerOneSigma:e-i*t}}const m1=.2777,g1=3.6,b1=e=>Te(e)&&e>=0?Math.pow(e,m1):null,br=e=>Te(e)&&e>=0?Math.pow(e,g1):null;function y1(e,t){return!(e>0&&e<1)||!(t>0&&t<1)?NaN:Math.log(1-e)/Math.log(1-t)}const Yr={one:{low:.1586552539,high:.8413447461},two:{low:.0227501319,high:.9772498681},three:{low:.001349898,high:.998650102}};function v1(e){if(!Te(e)||e<0)return{cl:null,lcl:null,ucl:null,oneLow:null,oneHigh:null,twoLow:null,twoHigh:null};const t=1/(e+1),n=d=>y1(d,t)-1,r=n(.5),i=Math.max(0,n(Yr.three.low)),a=n(Yr.three.high),s=Math.max(0,n(Yr.one.low)),l=n(Yr.one.high),u=Math.max(0,n(Yr.two.low)),c=n(Yr.two.high);return{cl:r,lcl:i,ucl:a,oneLow:s,oneHigh:l,twoLow:u,twoHigh:c}}function _1(e,t,n){const r=e.map(k=>Te(k)?b1(k):null),i=Tf(r,t),{mrMean:a}=Nf(i,!!n),s=r.filter((k,x)=>!t[x]&&Te(k)),l=s.length?hn(s):NaN;if(!Te(l)||!Te(a))return{center:null,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null,mr:i,mrMean:null,mrUcl:null};const u=2.66,c=2/3*u,d=1/3*u,f=l+u*a,p=l-u*a,g=l+c*a,b=l-c*a,h=l+d*a,m=l-d*a,y=br(l),S=br(f),M=p<=0?null:br(p),w=br(h),v=m<=0?null:br(m),D=br(g),N=b<=0?null:br(b);return{center:y??null,upperProcessLimit:S??null,lowerProcessLimit:M??null,upperTwoSigma:D??null,lowerTwoSigma:N??null,upperOneSigma:w??null,lowerOneSigma:v??null,mr:i,mrMean:a,mrUcl:Te(a)?3.267*a:null}}function x1(e){const{metricImprovement:t,capabilityMode:n,value:r,mean:i,upperProcessLimit:a,lowerProcessLimit:s,target:l}=e,u=c=>typeof c=="number"&&Number.isFinite(c);return!u(r)||i===null||!u(l)?ct.None:n&&u(a)&&u(s)?t===Ae.Up?u(s)&&s>l?ct.Pass:u(a)&&a<l?ct.Fail:ct.None:t===Ae.Down?u(a)&&a<l?ct.Pass:u(s)&&s>l?ct.Fail:ct.None:ct.None:t===Ae.Down?r<=l?ct.Pass:ct.Fail:t===Ae.Up?r>=l?ct.Pass:ct.Fail:ct.None}function w1(e,t){const{W:n,minGap:r,minDeltaSigma:i,scoreThreshold:a,isShiftUpAt:s,isShiftDownAt:l,isTrendUpAt:u,isTrendDownAt:c,isSingleUpAt:d,isSingleDownAt:f}=t,p=[];let g=0;for(let b=0;b<e.length;b++){const h=e[b];b>0&&e[b-1].partitionId!==h.partitionId&&(g=b);const m=b>0&&s(b-1),y=b>0&&l(b-1),S=b>0&&u(b-1),M=b>0&&c(b-1),w=b>0&&d(b-1),v=b>0&&f(b-1),D=s(b),N=l(b),k=u(b),x=c(b),I=d(b),j=f(b),C=[];D&&!m&&C.push({reason:Zt.Shift,index:b}),N&&!y&&C.push({reason:Zt.Shift,index:b}),k&&!S&&C.push({reason:Zt.Trend,index:b}),x&&!M&&C.push({reason:Zt.Trend,index:b}),I&&!w&&C.push({reason:Zt.Point,index:b}),j&&!v&&C.push({reason:Zt.Point,index:b});for(const $ of C){if($.index-g<r)continue;const T=Math.max(0,$.index-n),F=$.index-1;if(F-T+1<n)continue;const P=$.index,L=$.index+n-1;if(L>=e.length)continue;const te=e.slice(T,F+1).map(G=>G.value).filter(G=>typeof G=="number"&&Number.isFinite(G)),Y=e.slice(P,L+1).map(G=>G.value).filter(G=>typeof G=="number"&&Number.isFinite(G));if(te.length<n||Y.length<n)continue;const O=e[$.index];let H=null;if(typeof O.upperProcessLimit=="number"&&typeof O.mean=="number"){const G=O.upperProcessLimit-O.mean;G>0&&(H=G/3)}if(!H||H<=0)continue;const z=hn(te),ie=hn(Y),V=ie-z;if(Math.abs(V)<i*H)continue;const Ce=e.slice(P,L+1).filter(G=>G.variationIcon===$e.Concern).length;if(Ce>1)continue;const he=G=>{const de=hn(G);return G.length?G.reduce((A,R)=>A+(R-de)*(R-de),0)/G.length:0},pe=he(te),ee=he(Y);let ae=$.reason===Zt.Shift?90:$.reason===Zt.Trend?70:60;if(ee<pe&&(ae+=10),ae-=Ce*15,ae<a)continue;const me=p.find(G=>G.index===$.index);if(me){const G=de=>de===Zt.Shift?3:de===Zt.Trend?2:1;(G($.reason)>G(me.reason)||ae>me.score)&&(me.reason=$.reason,me.score=ae,me.deltaMean=V,me.oldMean=z,me.newMean=ie,me.window=[P,L])}else p.push({index:$.index,reason:$.reason,score:ae,deltaMean:V,oldMean:z,newMean:ie,window:[P,L]})}}return p.sort((b,h)=>b.index-h.index),p}function ol(){const e=globalThis;if(typeof e.__SPC_PHASE4_STRICT<"u")return!!e.__SPC_PHASE4_STRICT;if(typeof process<"u"){const t=process?.env?.SPC_PHASE4_STRICT;if(typeof t<"u"){const n=String(t).toLowerCase();if(n==="1"||n==="true")return!0;if(n==="0"||n==="false")return!1}}return!0}var pn=(e=>(e.Info="info",e.Warning="warning",e.Error="error",e))(pn||{}),ds=(e=>(e.Config="config",e.Data="data",e.Limits="limits",e.SpecialCause="special_cause",e.Baseline="baseline",e.Logic="logic",e.Target="target",e.Ghost="ghost",e.Partition="partition",e))(ds||{}),fs=(e=>(e.UnknownChartType="unknown_chart_type",e.InsufficientPointsGlobal="insufficient_points_global",e.VariationConflictRow="variation_conflict_row",e.NullValuesExcluded="null_values_excluded",e.TargetIgnoredRareEvent="target_ignored_rare_event",e.GhostRowsRareEvent="ghost_rows_rare_event",e.InsufficientPointsPartition="insufficient_points_partition",e.BaselineWithSpecialCause="baseline_with_special_cause",e.PartitionCapApplied="partition_cap_applied",e.GlobalCapApplied="global_cap_applied",e))(fs||{});function S1(e){const t=[];let n=[];for(const r of e)r.baseline&&n.length&&(t.push(n),n=[]),n.push(r);return n.length&&t.push(n),t}function C1(e,t,n){const r=t.autoRecalculateShiftLength||t.specialCauseShiftPoints||6;if(e.length<r*2)return;const i=e.map((d,f)=>({idx:f,value:d.value})).filter(d=>Te(d.value));if(i.length<r*2)return;const a=n===Ae.Up||n===Ae.Neither,s=n===Ae.Down;function l(d,f){const p=i.slice(d,f).map(g=>g.value);return p.length?hn(p):NaN}let u=null;if(i.length>1){const d=[];for(let p=1;p<i.length;p++)d.push(Math.abs(i[p].value-i[p-1].value));const f=hn(d);Te(f)&&f>0&&(u=f*(2.66/3))}if(!u||u<=0)return;const c=t.autoRecalculateDeltaSigma??.5;for(let d=r;d<=i.length-r;d++){const f=d-r,p=l(f,d),g=l(d,d+r);if(!Te(p)||!Te(g))continue;const h=(g-p)/u;if(!(a?h>=c:s?-h>=c:Math.abs(h)>=c))continue;const y=i.slice(d,d+r).map(w=>w.value);if(!(a?y.every(w=>w>p):s?y.every(w=>w<p):y.every(w=>a?w>p:w<p)))continue;const M=i[d].idx;e[M].baseline||(e[M].baseline=!0);return}}function jf(e){if(!e)return{};const t=e,n=e,r=n.rules??{},i=n.precedence??{},a=n.thresholds??{},s=n.warnings??{},l=n.rareEvent??{},u=n.capability??{},c=n.grace??{},d=n.baselineSuggest??{},f=n.autoRecalc??{},p=c.emergingEnabled??n.emergingGraceEnabled??t.emergingGraceEnabled??t.emergingDirectionGrace,g=r.collapseWeakerClusterRules??n.collapseWeakerClusterRules??t.collapseWeakerClusterRules??t.collapseClusterRules;if(ol()){if(t.emergingDirectionGrace!==void 0)throw new Error("[spc][phase4] emergingDirectionGrace is no longer supported. Use settings.grace.emergingEnabled.");if(t.collapseClusterRules!==void 0)throw new Error("[spc][phase4] collapseClusterRules is no longer supported. Use settings.rules.collapseWeakerClusterRules.")}const b=globalThis;!ol()&&t.emergingDirectionGrace!==void 0&&n.emergingGraceEnabled===void 0&&c.emergingEnabled===void 0&&!b.__spc_warn_emergingDirectionGrace&&(b.__spc_warn_emergingDirectionGrace=!0,console.warn("[spc] emergingDirectionGrace is deprecated; use grace.emergingEnabled")),!ol()&&t.collapseClusterRules!==void 0&&r.collapseWeakerClusterRules===void 0&&n.collapseWeakerClusterRules===void 0&&!b.__spc_warn_collapseClusterRules&&(b.__spc_warn_collapseClusterRules=!0,console.warn("[spc] collapseClusterRules is deprecated; use rules.collapseWeakerClusterRules"));const h=S=>{const M={};for(const w of Object.keys(S)){const v=S[w];v!==void 0&&(M[w]=v)}return M},m=h({excludeMovingRangeOutliers:l.excludeMovingRangeOutliers??t.excludeMovingRangeOutliers,specialCauseShiftPoints:r.shiftPoints??t.specialCauseShiftPoints,specialCauseTrendPoints:r.trendPoints??t.specialCauseTrendPoints,enableFourOfFiveRule:r.fourOfFiveEnabled??t.enableFourOfFiveRule,enableFifteenInInnerThirdRule:r.fifteenInnerThirdEnabled??t.enableFifteenInInnerThirdRule,collapseWeakerClusterRules:g??t.collapseWeakerClusterRules,precedenceStrategy:i.strategy??t.precedenceStrategy,conflictPrecedenceMode:i.conflictMode??t.conflictPrecedenceMode,minimumPoints:a.minimumPoints??t.minimumPoints,minimumPointsPartition:a.minimumPointsPartition??t.minimumPointsPartition,maximumPointsPartition:a.maximumPointsPartition??t.maximumPointsPartition,maximumPoints:a.maximumPoints??t.maximumPoints,transitionBufferPoints:a.transitionBufferPoints??t.transitionBufferPoints,minimumPointsWarning:s.minimumPointsWarning??t.minimumPointsWarning,pointConflictWarning:s.pointConflictWarning??t.pointConflictWarning,variationIconConflictWarning:s.variationIconConflictWarning??t.variationIconConflictWarning,nullValueWarning:s.nullValueWarning??t.nullValueWarning,targetSuppressedWarning:s.targetSuppressedWarning??t.targetSuppressedWarning,ghostOnRareEventWarning:s.ghostOnRareEventWarning??t.ghostOnRareEventWarning,partitionSizeWarnings:s.partitionSizeWarnings??t.partitionSizeWarnings,baselineSpecialCauseWarning:s.baselineSpecialCauseWarning??t.baselineSpecialCauseWarning,maximumPointsWarnings:s.maximumPointsWarnings??t.maximumPointsWarnings,assuranceCapabilityMode:u.assuranceCapabilityMode??t.assuranceCapabilityMode,emergingGraceEnabled:p,emergingDirectionGrace:p,baselineSuggest:d.enabled??t.baselineSuggest,baselineSuggestMinDeltaSigma:d.minDeltaSigma??t.baselineSuggestMinDeltaSigma,baselineSuggestStabilityPoints:d.stabilityPoints??t.baselineSuggestStabilityPoints,baselineSuggestMinGap:d.minGap??t.baselineSuggestMinGap,baselineSuggestScoreThreshold:d.scoreThreshold??t.baselineSuggestScoreThreshold,autoRecalculateAfterShift:f.enabled??t.autoRecalculateAfterShift,autoRecalculateShiftLength:f.shiftLength??t.autoRecalculateShiftLength,autoRecalculateDeltaSigma:f.deltaSigma??t.autoRecalculateDeltaSigma}),y={...m,...h(t)};if(p!==void 0&&(y.emergingGraceEnabled=p,y.grace={...y.grace,emergingEnabled:p}),m.collapseWeakerClusterRules!==void 0){const S=m.collapseWeakerClusterRules;y.collapseWeakerClusterRules=S,y.rules={...y.rules,collapseWeakerClusterRules:S}}return h(y)}function Df(e){const{chartType:t,metricImprovement:n,data:r,settings:i={}}=e,a=jf(i),s={excludeMovingRangeOutliers:!1,specialCauseShiftPoints:6,specialCauseTrendPoints:6,enableFourOfFiveRule:!1,minimumPoints:13,minimumPointsWarning:!1,minimumPointsPartition:12,maximumPointsPartition:null,maximumPoints:null,variationIconConflictWarning:!0,nullValueWarning:!0,targetSuppressedWarning:!0,ghostOnRareEventWarning:!0,partitionSizeWarnings:!0,baselineSpecialCauseWarning:!0,maximumPointsWarnings:!0,assuranceCapabilityMode:!0,baselineSuggest:!1,baselineSuggestMinDeltaSigma:.5,baselineSuggestStabilityPoints:5,baselineSuggestMinGap:12,baselineSuggestScoreThreshold:50,precedenceStrategy:as.DirectionalFirst,emergingDirectionGrace:!1,rules:{},grace:{},...a};if(!Array.isArray(r))throw new Error("data must be an array of rows");const l=r.map((m,y)=>({rowId:y+1,x:m.x,value:Te(m.value)?m.value:null,ghost:!!m.ghost,baseline:!!m.baseline,target:Te(m.target)?m.target:null}));if(a?.autoRecalculateAfterShift)try{C1(l,a,n)}catch{}const u=S1(l),c=[],d=[],p=l.filter(m=>!m.ghost&&Te(m.value)).length>=(s.minimumPoints??13);let g=0;const b={};for(const m of u){g++;const y=m.map(C=>C.value),S=m.map(C=>C.ghost);let M=new Array(y.length).fill(null),w=NaN,v=NaN,D=NaN,N={upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};if(t==="XmR"){M=Tf(y,S);const C=y.filter((T,F)=>!S[F]&&Te(T));w=C.length?hn(C):NaN;const $=Nf(M,!!s.excludeMovingRangeOutliers);v=$.mrMean,D=$.mrUcl,N=p1(w,v)}else if(t==="T"){const C=_1(y,S,!!s.excludeMovingRangeOutliers);M=C.mr,v=C.mrMean??NaN,D=C.mrUcl??NaN,w=C.center??NaN,N={upperProcessLimit:C.upperProcessLimit,lowerProcessLimit:C.lowerProcessLimit,upperTwoSigma:C.upperTwoSigma,lowerTwoSigma:C.lowerTwoSigma,upperOneSigma:C.upperOneSigma,lowerOneSigma:C.lowerOneSigma}}else if(t==="G"){const C=y.filter((F,P)=>!S[P]&&Te(F)),$=C.length?hn(C):NaN,T=v1($);w=T.cl??NaN,N={upperProcessLimit:T.ucl,lowerProcessLimit:T.lcl,upperTwoSigma:T.twoHigh,lowerTwoSigma:T.twoLow,upperOneSigma:T.oneHigh,lowerOneSigma:T.oneLow},M=new Array(y.length).fill(null),v=NaN,D=NaN}else d.push({code:"unknown_chart_type",category:"config",severity:"error",message:`Unknown ChartType '${t}' â€“ supported: XmR, T, G.`,context:{chartType:t}});const k=m.map((C,$)=>{const T=!C.ghost&&Te(C.value)?y.slice(0,$+1).filter((te,Y)=>!S[Y]&&Te(te)).length:0,F=p,P=F?N:{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};return{rowId:C.rowId,x:C.x,value:Te(C.value)?C.value:null,ghost:C.ghost,partitionId:g,pointRank:T,mean:F&&Te(w)?w:null,mr:Te(M[$])?M[$]:null,mrMean:F&&Te(v)?v:null,mrUcl:F&&Te(D)?D:null,upperProcessLimit:Te(P.upperProcessLimit)?P.upperProcessLimit:null,lowerProcessLimit:Te(P.lowerProcessLimit)?P.lowerProcessLimit:null,upperTwoSigma:Te(P.upperTwoSigma)?P.upperTwoSigma:null,lowerTwoSigma:Te(P.lowerTwoSigma)?P.lowerTwoSigma:null,upperOneSigma:Te(P.upperOneSigma)?P.upperOneSigma:null,lowerOneSigma:Te(P.lowerOneSigma)?P.lowerOneSigma:null,target:Te(C.target)?C.target:null,specialCauseFifteenInnerThird:!1,specialCauseSinglePointUp:!1,specialCauseSinglePointDown:!1,specialCauseTwoOfThreeUp:!1,specialCauseTwoOfThreeDown:!1,specialCauseFourOfFiveUp:!1,specialCauseFourOfFiveDown:!1,specialCauseShiftUp:!1,specialCauseShiftDown:!1,specialCauseTrendUp:!1,specialCauseTrendDown:!1,variationIcon:$e.Suppressed,assuranceIcon:ct.None,upperBaseline:F&&Te(w)?w:null,lowerBaseline:F&&Te(w)?w:null,movingRangeHighPointValue:F&&Te(D)?D:null,ghostValue:C.ghost&&Te(C.value)?C.value:null,ghostFlag:!!C.ghost,specialCauseImprovementValue:null,specialCauseConcernValue:null,specialCauseNeitherValue:null,ruleTags:[]}});b[g]=k.filter(C=>!C.ghost&&Te(C.value)).length;const x=s.specialCauseShiftPoints??6,I=s.specialCauseTrendPoints??6,j=[];for(let C=0;C<k.length;C++){const $=k[C],T=$.value;if(!$.ghost&&Te(T)&&j.push(C),!(Te($.mean)&&Te($.upperProcessLimit)&&Te($.lowerProcessLimit))||$.ghost||!Te(T)){c.push($);continue}$.specialCauseSinglePointUp=Te($.upperProcessLimit)?T>$.upperProcessLimit:!1,$.specialCauseSinglePointDown=Te($.lowerProcessLimit)?T<$.lowerProcessLimit:!1,c.push($)}if(j.length){const C=F=>k[F];let $=[],T=[];for(const F of j){const P=C(F);if(!Te(P.mean)||!Te(P.value)){$=[],T=[];continue}if(P.value>P.mean?($.push(F),T=[]):P.value<P.mean?(T.push(F),$=[]):($=[],T=[]),$.length>=x)for(const L of $){const te=C(L);te.specialCauseShiftUp=!0}if(T.length>=x)for(const L of T){const te=C(L);te.specialCauseShiftDown=!0}}for(let F=0;F<=j.length-3;F++){const L=j.slice(F,F+3).map(C);if(!L.every(he=>Te(he.mean)&&Te(he.value)))continue;const te=L[0].mean,Y=L.every(he=>he.value>te),O=L.every(he=>he.value<te);if(!Y&&!O)continue;const H=L[0].upperTwoSigma??1/0,z=L[0].lowerTwoSigma??-1/0,ie=L[0].upperProcessLimit??1/0,V=L[0].lowerProcessLimit??-1/0,ce=L.filter(he=>he.value>H&&he.value<=ie),Ce=L.filter(he=>he.value<z&&he.value>=V);if(Y&&ce.length>=2)for(const he of ce)he.specialCauseTwoOfThreeUp=!0;if(O&&Ce.length>=2)for(const he of Ce)he.specialCauseTwoOfThreeDown=!0}if(s.enableFourOfFiveRule)for(let F=0;F<=j.length-5;F++){const L=j.slice(F,F+5).map(C);if(!L.every(ie=>Te(ie.mean)&&Te(ie.value)))continue;const te=L[0].mean;if(!L.every(ie=>ie.value>te)&&!L.every(ie=>ie.value<te))continue;const Y=L[0].upperOneSigma??1/0,O=L[0].lowerOneSigma??-1/0,H=L.filter(ie=>ie.value>Y),z=L.filter(ie=>ie.value<O);if(L.every(ie=>ie.value>te)&&H.length>=4)for(const ie of H)ie.specialCauseFourOfFiveUp=!0;if(L.every(ie=>ie.value<te)&&z.length>=4)for(const ie of z)ie.specialCauseFourOfFiveDown=!0}for(let F=0;F<=j.length-I;F++){const P=j.slice(F,F+I),L=P.map(C);if(!L.every(O=>Te(O.value)))continue;let te=!0,Y=!0;for(let O=1;O<L.length&&(L[O].value>L[O-1].value||(te=!1),L[O].value<L[O-1].value||(Y=!1),!(!te&&!Y));O++);if(te)for(const O of P){const H=C(O);H.specialCauseTrendUp=!0}if(Y)for(const O of P){const H=C(O);H.specialCauseTrendDown=!0}}if(s.enableFifteenInInnerThirdRule){let F=[];for(const P of j){const L=C(P);if(!Te(L.value)||!Te(L.mean)||!Te(L.upperOneSigma)||!Te(L.lowerOneSigma)){F=[];continue}if(!(L.value<L.upperOneSigma&&L.value>L.lowerOneSigma)){F=[];continue}if(F.push(P),F.length>=15){const Y=F.map(C),O=Y.some(z=>z.value>z.mean),H=Y.some(z=>z.value<z.mean);if(O&&H)for(const z of F)C(z).specialCauseFifteenInnerThird=!0}}}}if(s.maximumPointsPartition&&Number.isFinite(s.maximumPointsPartition)){const C=s.maximumPointsPartition;let $=0;for(const T of c.filter(F=>F.partitionId===g))!T.ghost&&Te(T.value)&&$++,$>C&&(T.mean=T.upperProcessLimit=T.lowerProcessLimit=null,T.upperTwoSigma=T.lowerTwoSigma=T.upperOneSigma=T.lowerOneSigma=null)}}for(const m of c){if(m.ruleTags&&m.ruleTags.length)continue;const y=[];m.specialCauseShiftUp&&y.push(Dt.ShiftHigh),m.specialCauseShiftDown&&y.push(Dt.ShiftLow),m.specialCauseTrendUp&&y.push(Dt.TrendIncreasing),m.specialCauseTrendDown&&y.push(Dt.TrendDecreasing),m.specialCauseSinglePointUp&&y.push(Dt.SinglePointAbove),m.specialCauseSinglePointDown&&y.push(Dt.SinglePointBelow),m.specialCauseTwoOfThreeUp&&y.push(Dt.TwoOfThreeAbove),m.specialCauseTwoOfThreeDown&&y.push(Dt.TwoOfThreeBelow),m.specialCauseFourOfFiveUp&&y.push(Dt.FourOfFiveAbove),m.specialCauseFourOfFiveDown&&y.push(Dt.FourOfFiveBelow),m.specialCauseFifteenInnerThird&&y.push(Dt.FifteenInnerThird),y.length&&(m.ruleTags=y)}for(let m=0;m<c.length;m++){const y=c[m];if(Object.prototype.hasOwnProperty.call(y,$i.ImprovementValueBeforePruning)||Object.defineProperty(y,$i.ImprovementValueBeforePruning,{get(){return y.originalSpecialCauseImprovementValue??null},enumerable:!1,configurable:!0}),Object.prototype.hasOwnProperty.call(y,$i.ConcernValueBeforePruning)||Object.defineProperty(y,$i.ConcernValueBeforePruning,{get(){return y.originalSpecialCauseConcernValue??null},enumerable:!1,configurable:!0}),y.ghost||!Te(y.value)||y.mean===null){y.variationIcon=$e.Suppressed;continue}const S=y.value>y.mean,M=y.value<y.mean;s.rules?.collapseWeakerClusterRules&&(y.specialCauseTwoOfThreeUp&&y.specialCauseFourOfFiveUp&&(y.specialCauseTwoOfThreeUp=!1),y.specialCauseTwoOfThreeDown&&y.specialCauseFourOfFiveDown&&(y.specialCauseTwoOfThreeDown=!1));const w=y.specialCauseTrendUp&&S,v=y.specialCauseTrendDown&&M,D=y.specialCauseSinglePointUp||y.specialCauseTwoOfThreeUp||s.enableFourOfFiveRule&&y.specialCauseFourOfFiveUp||y.specialCauseShiftUp||w,N=y.specialCauseSinglePointDown||y.specialCauseTwoOfThreeDown||s.enableFourOfFiveRule&&y.specialCauseFourOfFiveDown||y.specialCauseShiftDown||v;let k=!1;if(s.precedenceStrategy===as.DirectionalFirst&&(s.grace?.emergingEnabled||s.emergingGraceEnabled||s.emergingDirectionGrace)){const I=s.specialCauseTrendPoints||6;if(I>1&&!(y.specialCauseTrendUp||y.specialCauseTrendDown)){const j=I-1,C=[];for(let $=m;$>=0&&C.length<j;$--){const T=c[$];!T.ghost&&Te(T.value)&&T.mean!==null&&C.unshift(T)}if(C.length===j){let $=!0;for(let T=1;T<C.length&&$;T++)n===Ae.Up?C[T].value>C[T-1].value||($=!1):n===Ae.Down&&C[T].value<C[T-1].value||($=!1);k=$}}}if(s.precedenceStrategy===as.DirectionalFirst){const j=n===Ae.Up?D:n===Ae.Down?N:!1,C=n===Ae.Up?N:n===Ae.Down?D:!1;j&&!C?y.variationIcon=$e.Improvement:C&&!j?y.variationIcon=k?$e.Neither:$e.Concern:j&&C?y.variationIcon=k||y.specialCauseTrendUp||y.specialCauseTrendDown?$e.Improvement:$e.Neither:y.variationIcon=$e.Neither}else n===Ae.Up?y.variationIcon=D?$e.Improvement:N?$e.Concern:$e.Neither:n===Ae.Down?y.variationIcon=N?$e.Improvement:D?$e.Concern:$e.Neither:y.variationIcon=$e.Neither;const x=D||N;if(y.specialCauseImprovementValue=x&&y.variationIcon===$e.Improvement?y.value:null,y.specialCauseConcernValue=x&&y.variationIcon===$e.Concern?y.value:null,y.specialCauseNeitherValue=x&&y.variationIcon===$e.Neither?y.value:null,s.conflictPrecedenceMode===yf.SqlRankingV26a&&y.specialCauseImprovementValue!==null&&y.specialCauseConcernValue!==null){const I=[];y.specialCauseSinglePointUp&&I.push({id:An.SinglePoint,rank:1,side:$t.Up}),y.specialCauseSinglePointDown&&I.push({id:An.SinglePoint,rank:1,side:$t.Down}),y.specialCauseTwoOfThreeUp&&I.push({id:An.TwoSigma,rank:2,side:$t.Up}),y.specialCauseTwoOfThreeDown&&I.push({id:An.TwoSigma,rank:2,side:$t.Down}),y.specialCauseShiftUp&&I.push({id:An.Shift,rank:3,side:$t.Up}),y.specialCauseShiftDown&&I.push({id:An.Shift,rank:3,side:$t.Down}),y.specialCauseTrendUp&&I.push({id:An.Trend,rank:4,side:$t.Up}),y.specialCauseTrendDown&&I.push({id:An.Trend,rank:4,side:$t.Down});const j=I.filter(Y=>Y.side===$t.Up).reduce((Y,O)=>Math.max(Y,O.rank),0),C=I.filter(Y=>Y.side===$t.Down).reduce((Y,O)=>Math.max(Y,O.rank),0);let $;j>C?$=Vr.Upwards:C>j?$=Vr.Downwards:$=Vr.Same;const T=y.specialCauseImprovementValue,F=y.specialCauseConcernValue;$===Vr.Upwards?n===Ae.Up?y.specialCauseConcernValue=null:n===Ae.Down&&(y.specialCauseImprovementValue=null):$===Vr.Downwards?n===Ae.Up?y.specialCauseImprovementValue=null:n===Ae.Down&&(y.specialCauseConcernValue=null):y.variationIcon===$e.Improvement?y.specialCauseConcernValue=null:y.variationIcon===$e.Concern?y.specialCauseImprovementValue=null:y.specialCauseConcernValue=null,y.specialCauseImprovementValue!==null&&y.specialCauseConcernValue===null?y.variationIcon=$e.Improvement:y.specialCauseConcernValue!==null&&y.specialCauseImprovementValue===null?y.variationIcon=$e.Concern:y.specialCauseImprovementValue===null&&y.specialCauseConcernValue===null&&(y.variationIcon=$e.Neither);const P=y.specialCauseImprovementValue!==null?$t.Up:y.specialCauseConcernValue!==null?$t.Down:void 0,L=P===$t.Up?j:P===$t.Down?C:Math.max(j,C),te=I.find(Y=>Y.rank===L&&(!P||Y.side===P));y.conflictPrimeDirection=$,y.conflictResolved=!0,y.conflictResolvedRank=L||void 0,te&&(y.conflictResolvedByRuleId=te.id),y.pruningMode=vf.Conflict,y.originalSpecialCauseImprovementValue=T,y.originalSpecialCauseConcernValue=F}{const I=l[y.rowId-1],j=x1({metricImprovement:n,capabilityMode:s.assuranceCapabilityMode,value:y.value,mean:y.mean,upperProcessLimit:y.upperProcessLimit,lowerProcessLimit:y.lowerProcessLimit,target:Te(I?.target)?I.target:null});y.assuranceIcon=j}}if((s.minimumPointsWarning??!1)&&!p){const m=l.filter(y=>!y.ghost&&Te(y.value)).length;d.push({code:"insufficient_points_global",category:"data",severity:"warning",message:`Only ${m} non-ghost points available; minimum required is ${s.minimumPoints}. Limits and icons suppressed.`,context:{available:m,minimumRequired:s.minimumPoints}})}if(s.variationIconConflictWarning)for(const m of c)m.variationIcon===$e.Improvement&&(m.specialCauseSinglePointUp||m.specialCauseTwoOfThreeUp||s.enableFourOfFiveRule&&m.specialCauseFourOfFiveUp||m.specialCauseShiftUp||m.specialCauseTrendUp)&&(m.specialCauseSinglePointDown||m.specialCauseTwoOfThreeDown||s.enableFourOfFiveRule&&m.specialCauseFourOfFiveDown||m.specialCauseShiftDown||m.specialCauseTrendDown)&&d.push({code:"variation_conflict_row",category:"logic",severity:"warning",message:`Row ${m.rowId}: simultaneous high/low special-cause signals â€“ variation icon may be ambiguous.`,context:{rowId:m.rowId}});if(s.maximumPoints&&Number.isFinite(s.maximumPoints)){const m=s.maximumPoints;let y=0;for(const S of c)!S.ghost&&Te(S.value)&&y++,y>m&&(S.mean=S.upperProcessLimit=S.lowerProcessLimit=null,S.upperTwoSigma=S.lowerTwoSigma=S.upperOneSigma=S.lowerOneSigma=null)}if(s.nullValueWarning&&(t===Ct.XmR||t===Ct.G)){const m=l.filter(y=>!y.ghost&&(y.value===null||y.value===void 0||!Te(y.value))).length;m&&d.push({code:"null_values_excluded",category:"data",severity:"info",message:`${m} null/missing value(s) excluded from calculations.`,context:{nullCount:m}})}if(s.targetSuppressedWarning&&(t===Ct.T||t===Ct.G)&&l.some(y=>Te(y.target))&&d.push({code:"target_ignored_rare_event",category:"target",severity:"info",message:`Targets provided are ignored for ${t} charts in this port.`,context:{chartType:t}}),s.ghostOnRareEventWarning&&(t===Ct.T||t===Ct.G)){const m=l.filter(y=>y.ghost).length;m&&d.push({code:"ghost_rows_rare_event",category:"ghost",severity:"info",message:`${m} ghost row(s) supplied for rare-event chart (${t}); verify intent.`,context:{chartType:t,ghostCount:m}})}if(s.partitionSizeWarnings&&Object.entries(b).forEach(([m,y])=>{y<s.minimumPointsPartition&&d.push({code:"insufficient_points_partition",category:"partition",severity:"warning",message:`Partition ${m} has only ${y} non-ghost point(s); below recommended ${s.minimumPointsPartition}.`,context:{partitionId:Number(m),count:y,minimum:s.minimumPointsPartition}})}),s.baselineSpecialCauseWarning){const m=[];c.forEach(y=>{l[y.rowId-1].baseline&&(y.specialCauseSinglePointUp||y.specialCauseSinglePointDown||y.specialCauseTwoOfThreeUp||y.specialCauseTwoOfThreeDown||y.specialCauseFourOfFiveUp||y.specialCauseFourOfFiveDown||y.specialCauseShiftUp||y.specialCauseShiftDown||y.specialCauseTrendUp||y.specialCauseTrendDown)&&m.push(y.rowId)}),m.length&&d.push({code:"baseline_with_special_cause",category:"baseline",severity:"warning",message:`Baseline set with special-cause present at row(s): ${m.join(", ")}.`,context:{rows:m}})}s.maximumPointsWarnings&&(s.maximumPointsPartition&&Number.isFinite(s.maximumPointsPartition)&&d.push({code:"partition_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after ${s.maximumPointsPartition} non-ghost points per partition.`,context:{cap:s.maximumPointsPartition}}),s.maximumPoints&&Number.isFinite(s.maximumPoints)&&d.push({code:"global_cap_applied",category:"limits",severity:"info",message:`Limits suppressed after global cap of ${s.maximumPoints} non-ghost points.`,context:{cap:s.maximumPoints}}));let h;if(s.baselineSuggest){const m=s.baselineSuggestStabilityPoints,y=s.baselineSuggestMinGap,S=s.baselineSuggestMinDeltaSigma,M=s.baselineSuggestScoreThreshold;h=w1(c.map(v=>({value:v.value,partitionId:v.partitionId,variationIcon:v.variationIcon,mean:v.mean,upperProcessLimit:v.upperProcessLimit})),{W:m,minGap:y,minDeltaSigma:S,scoreThreshold:M,isShiftUpAt:v=>!!c[v].specialCauseShiftUp,isShiftDownAt:v=>!!c[v].specialCauseShiftDown,isTrendUpAt:v=>!!c[v].specialCauseTrendUp,isTrendDownAt:v=>!!c[v].specialCauseTrendDown,isSingleUpAt:v=>!!c[v].specialCauseSinglePointUp,isSingleDownAt:v=>!!c[v].specialCauseSinglePointDown}).map(v=>({index:v.index,reason:v.reason,score:v.score,deltaMean:v.deltaMean,oldMean:v.oldMean,newMean:v.newMean,window:v.window}))}return{rows:c,warnings:d,...h?{suggestedBaselines:h}:{}}}function Mf(e,t){return e==="improvement"?Ne.SpecialCauseImproving:e==="concern"?Ne.SpecialCauseDeteriorating:e==="suppressed"||e==="neither"&&t?Ne.SpecialCauseNoJudgement:e==="neither"?Ne.CommonCause:null}function k1(e,t){return e==="improvement"||e==="concern"||e==="suppressed"||e==="neither"&&!!t}function T1(e){const t=e.replace("#","");return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function If(e){const{values:t,x:n,chartType:r=Ct.XmR,metricImprovement:i=Ae.Neither,showLimits:a=!0,showLimitBand:s=!1,showInnerBands:l=!1,showMean:u=!1,autoClassify:c=!0}=e,d=q.useMemo(()=>{const v=[];for(let D=0;D<t.length;D++)v.push({x:n?.[D],value:t[D]});return v},[t,n]),f=q.useMemo(()=>{try{const v=d.map((D,N)=>({x:D.x??N,value:D.value}));return Df({chartType:r,metricImprovement:i,data:v,settings:{}})}catch{return null}},[d,r,i]),p=q.useMemo(()=>{const v=f?.rows;if(!v||v.length===0)return null;for(let D=v.length-1;D>=0;D--){const N=v[D];if(N&&N.value!=null&&!N.ghost)return N}return v[v.length-1]??null},[f]),g=q.useMemo(()=>{const v=f?.rowsRepresentative??f?.rows;if(!v||!Array.isArray(v)||v.length===0)return null;const D=v[v.length-1];return Mf(D?.variationIcon,(D?.specialCauseNeitherValue??null)!=null)},[f]),b=q.useMemo(()=>p?.mean??null,[p]),h=q.useMemo(()=>{if(!p)return null;const v=p?.lowerProcessLimit??null,D=p?.upperProcessLimit??null;return v==null&&D==null?null:{lower:v,upper:D}},[p]),m=q.useMemo(()=>p?{upperOne:p?.upperOneSigma??null,upperTwo:p?.upperTwoSigma??null,lowerOne:p?.lowerOneSigma??null,lowerTwo:p?.lowerTwoSigma??null}:null,[p]),y=q.useMemo(()=>{const v=f?.rows;if(!(!v||v.length===0))return v.map(D=>{const N=!!D?.specialCauseSinglePointUp||!!D?.specialCauseTwoOfThreeUp||!!D?.specialCauseFourOfFiveUp||!!D?.specialCauseShiftUp||!!D?.specialCauseTrendUp,k=!!D?.specialCauseSinglePointDown||!!D?.specialCauseTwoOfThreeDown||!!D?.specialCauseFourOfFiveDown||!!D?.specialCauseShiftDown||!!D?.specialCauseTrendDown;switch(i){case Ae.Up:return N?"improvement":k?"concern":"neither";case Ae.Down:return k?"improvement":N?"concern":"neither";case Ae.Neither:default:return"neither"}})},[f,i]),S=q.useMemo(()=>{const v=f?.rows;if(!(!v||v.length===0))return v.map(D=>!!D?.specialCauseNeitherValue)},[f]),M=q.useMemo(()=>{let v=null;if(p&&p.value!=null&&!p.ghost){const $=p.variationIcon,T=(p?.specialCauseNeitherValue??null)!=null;g===Ne.SpecialCauseNoJudgement?v=k1($,T)?Ne.SpecialCauseNoJudgement:Ne.CommonCause:v=Mf($,T)??Ne.CommonCause}const D=v??Ne.CommonCause,N=ls[D].hex,[k,x,I]=T1(N),j=is();return{"--fdp-metric-card-bg":`linear-gradient(180deg, rgba(${k}, ${x}, ${I}, ${j.start}) 0%, rgba(${k}, ${x}, ${I}, ${j.mid}) 50%, rgba(${k}, ${x}, ${I}, ${j.end}) 100%)`,"--fdp-metric-card-accent":N}},[p,g]);return{sparkProps:q.useMemo(()=>({data:d,showMean:u,showLimits:a,showLimitBand:s,showInnerBands:l,metricImprovement:i,centerLine:b,controlLimits:h,sigmaBands:m,pointSignals:y,pointNeutralSpecialCause:S,variationState:g??void 0,autoClassify:!!(c&&!g),onClassification:()=>{}}),[d,u,a,s,l,i,c,g,b,h?.lower,h?.upper,m?.upperOne,m?.upperTwo,m?.lowerOne,m?.lowerTwo,y?.length,S?.length]),metricCardStyle:M,latestState:g}}function Pf(e){if(e==null)return;const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.valueOf())?void 0:t}function N1(e,t,n){const r=new Array(e),i=new Date(t);for(let a=0;a<e;a++)switch(r[a]=new Date(i),n){case"hourly":i.setHours(i.getHours()+1);break;case"daily":i.setDate(i.getDate()+1);break;case"weekly":i.setDate(i.getDate()+7);break;case"monthly":i.setMonth(i.getMonth()+1);break;case"quarterly":i.setMonth(i.getMonth()+3);break;case"annually":i.setFullYear(i.getFullYear()+1);break}return r}function j1(e,t){const n=e.filter(Boolean);if(n.length<2)return t;const r=[];for(let u=1;u<n.length;u++)r.push(n[u].getTime()-n[u-1].getTime());const i=r.sort((u,c)=>u-c),a=i[Math.floor(i.length/2)],s=3600*1e3,l=24*s;return a<=2*s?"hourly":a<=2*l?"daily":a<=10*l?"weekly":a<=45*l?"monthly":a<=120*l?"quarterly":"annually"}function Ff(e,t){if(e)try{switch(t){case"hourly":return new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"}).format(e);case"daily":return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e);case"weekly":return`Week of ${new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}`;case"monthly":return new Intl.DateTimeFormat(void 0,{month:"short",year:"numeric"}).format(e);case"quarterly":return`Q${Math.floor(e.getMonth()/3)+1} ${e.getFullYear()}`;case"annually":return`${e.getFullYear()}`;default:return new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(e)}}catch{return}}function D1(e,t,n,r="0-100"){if(t)return t;if(n)return n;const i=e.filter(l=>l!=null);if(!i.length)return;const a=Math.min(...i),s=Math.max(...i);if(r==="0-1"){if(a>=0&&s<=1&&s>0)return"%"}else if(a>=0&&s<=100&&s>0)return"%"}function M1(e,t,n=1){switch(e||t){case"hourly":return n===1?"last hour":`last ${n} hours`;case"daily":return n===1?"last day":`last ${n} days`;case"weekly":return n===1?"last week":`last ${n} weeks`;case"monthly":return n===1?"last month":`last ${n} months`;case"quarterly":return n===1?"last quarter":`last ${n} quarters`;case"annually":return n===1?"last year":`last ${n} years`;default:return"previous"}}function $f(e){const{values:t,dates:n,intervalHint:r,startDate:i,providedUnit:a,defaultUnit:s,autoValue:l=!0,autoDelta:u=!0,autoMetadata:c=!0,deltaConfig:d}=e,f=t.map(x=>typeof x=="number"?x:x==null?null:Number(x));let p=-1;for(let x=f.length-1;x>=0;x--)if(f[x]!=null){p=x;break}let g=(n||[]).map(Pf);if(!g.some(Boolean)){const x=Pf(i);x&&r?g=N1(f.length,x,r):g=new Array(f.length).fill(void 0)}const h=j1(g,r),m=D1(f,a,s,e.percentHeuristic),y=l&&p>=0&&f[p]!=null?f[p]:void 0,S={strategy:"previous",n:1,absolute:!0,skipNulls:!0,...d||{}};function M(){if(p<0)return-1;if(S.strategy==="previous"||S.strategy==="n-points"){let $=p-(S.strategy==="previous"?1:Math.max(1,S.n||1));if(!S.skipNulls)return $;for(let T=$;T>=0;T--)if(f[T]!=null)return T;return-1}const x=g[p];if(!x)return-1;const I=new Date(x);I.setFullYear(I.getFullYear()-1);let j=-1,C=1/0;for(let $=0;$<g.length;$++){const T=g[$];if(!T||f[$]==null)continue;const F=Math.abs(T.getTime()-I.getTime());F<C&&(C=F,j=$)}return j}const w=M(),v=w>=0?f[w]:null;let D;if(u&&y!=null&&v!=null){const x=y-v,I=S.absolute!==!1,j=I?x:v===0?0:x/Math.abs(v)*100;D={value:Number.isFinite(j)?Number(j.toFixed(2)):0,isPercent:I?m==="%":!0,period:`vs ${M1(h,r,S.strategy==="n-points"?Math.max(1,S.n||1):1)}`}}const N=p>=0?g[p]:void 0,k=c&&Ff(N,h)?`Latest: ${Ff(N,h)}`:void 0;return{value:y,unit:m,delta:D,metadata:k,latestDate:N,frequency:h}}const I1=({sparkData:e,direction:t=Ae.Neither,showMean:n=!1,showLimits:r=!0,showLimitBand:i=!1,showInnerBands:a=!1,autoClassify:s=!0,maxPoints:l,autoValue:u=!0,autoDelta:c=!0,autoMetadata:d=!0,defaultUnit:f,intervalHint:p,startDate:g,deltaConfig:b,...h})=>{const m=If({values:e.map(N=>N.value??null),metricImprovement:t,showLimits:r,showLimitBand:i,showInnerBands:a,showMean:n,autoClassify:s}),y=o.jsx(kf,{...m.sparkProps,maxPoints:l}),S=q.useMemo(()=>$f({values:e.map(N=>typeof N.value=="number"?N.value:null),dates:e.map(N=>N.date),intervalHint:p,startDate:g,providedUnit:h.unit,defaultUnit:f,autoValue:u,autoDelta:c,autoMetadata:d,deltaConfig:b}),[e,p,g,h.unit,f,u,c,d,b]),M=u&&S.value!=null?S.value:h.value,w=c&&S.delta?S.delta:h.delta,v=S.unit||h.unit,D=d&&S.metadata?S.metadata:h.metadata;return o.jsx(gf,{...h,value:M,unit:v,delta:w,metadata:D,visual:y,style:m.metricCardStyle})},Lf=({engineRows:e,limits:t,pointDescriber:n,measureName:r,measureUnit:i,dateFormatter:a,enableNeutralNoJudgement:s=!0,showTrendGatingExplanation:l=!0})=>{const u=Ln(),c=Yn(),[d,f]=q.useState(null),[p,g]=q.useState(!1),b=q.useRef(null);q.useEffect(()=>{if(u){if(u.focused&&(f(u.focused),b.current&&(cancelAnimationFrame(b.current),b.current=null)),!u.focused&&!p){const fe=requestAnimationFrame(()=>{f(null),b.current=null});b.current=fe}return()=>{b.current&&(cancelAnimationFrame(b.current),b.current=null)}}},[u,u?.focused,p]);const h=u&&(u.focused||(p?d:null)||d),[m,y]=q.useState(!1);q.useEffect(()=>{const fe=requestAnimationFrame(()=>y(!0));return()=>cancelAnimationFrame(fe)},[h?.index]);const S=c?.innerWidth??0,M=c?.innerHeight??0,w=h?Math.min(Math.max(h.clientX,0),S):0,v=h?Math.min(Math.max(h.clientY,0),M):0,D=c?.ref?.current||void 0;if(!h)return null;const N=e?.[h.index],x=ss(N?{specialCauseSinglePointUp:!!N.rules.singlePoint.up,specialCauseSinglePointDown:!!N.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!N.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!N.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!N.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!N.rules.fourOfFive.down,specialCauseShiftUp:!!N.rules.shift.up,specialCauseShiftDown:!!N.rules.shift.down,specialCauseTrendUp:!!N.rules.trend.up,specialCauseTrendDown:!!N.rules.trend.down}:null).map(fe=>({id:fe,label:Gr[fe].tooltip})),I=h.x instanceof Date?h.x:new Date(h.x),j=a?a(I):I.toDateString(),C=i?`${i}`:"",$=r||C?`${h.y}${C?""+C:" "}${r?" "+r:""}`:`${h.y}`,T=os(N?.classification?.variation),F=_f(N?.classification?.assurance),P=r1(t.mean??null,t.sigma,h.y),L=n?n(h.index,{x:h.x,y:h.y}):void 0,te=T||F||P,Y=N?.rules.trend.up||N?.rules.trend.down,O=N?.classification?.variation===$e.Neither&&Y,H=l&&O?"Trend detected (monotonic run) â€“ held neutral until values cross onto the favourable side of the mean.":null,z=x.length>0,ie=N&&"primeDirection"in N?N.primeDirection:void 0,V=N&&"primeRuleId"in N?N.primeRuleId:void 0,ce=s&&N?.classification?.variation===$e.Neither&&z,Ce="var(--nhs-fdp-color-primary-yellow, #ffeb3b)",he=xf(N?.classification?.variation),pe=6.2,ae=[L||"",`${j} â€¢ ${$}`].filter(Boolean).reduce((fe,U)=>Math.max(fe,U.length*pe+32),0),me=200,G=440,de=Math.min(G,Math.max(me,ae));let A=w+12,Z=(c.margin?.top??0)+v+16;A+de>S&&(A=w- -60-de),A<0&&(A=Math.max(0,S-de));const le=h?`spc-tooltip-${h.index}`:"spc-tooltip",ue=typeof h.index=="number"?h.index:NaN,ge=D?X0.createPortal(o.jsx("div",{id:le,className:"fdp-spc-tooltip fdp-spc-tooltip-portal"+(m?" is-visible":""),style:{position:"absolute",left:A,top:Z,width:de,maxWidth:G,zIndex:10,pointerEvents:"auto",userSelect:"none"},role:"tooltip","aria-live":"polite","aria-hidden":m?"false":"true","data-floating":!0,"data-placement":A+de+12>S?"left":"right",onPointerEnter:()=>{g(!0),b.current&&(cancelAnimationFrame(b.current),b.current=null)},onPointerLeave:()=>{if(g(!1),!u?.focused){const fe=requestAnimationFrame(()=>{f(null),b.current=null});b.current=fe}},children:o.jsxs("div",{className:"fdp-spc-tooltip__body",children:[o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--point",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Point"})}),o.jsxs("div",{className:"fdp-spc-tooltip__primary-line",children:["Index: ",ue]})]}),o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--date",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Date"})}),o.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:j})]}),o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--value",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Value"})}),o.jsx("div",{className:"fdp-spc-tooltip__primary-line",children:$})]}),te&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--signals",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Signals"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Signals",children:T?.toLowerCase().includes("concern")?o.jsx(Ye,{text:T,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):T?.toLowerCase().includes("improvement")?o.jsx(Ye,{text:T,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):ce?o.jsx(Ye,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):T?o.jsx(Ye,{text:T,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null})]}),F&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--assurance",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Assurance"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:(()=>{const fe=F.toLowerCase(),W=!(fe.includes("not met")||fe.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(fe);return o.jsx(Ye,{text:F,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${W?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${F}`})})()})]}),P&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--limits",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Control Limits & Sigma"})}),o.jsx("div",{className:"fdp-spc-tooltip__badges","aria-label":"Limits",children:o.jsx(Ye,{text:(()=>{const fe=P.toLowerCase();return fe.startsWith("within 1")?"â‰¤1Ïƒ":fe.startsWith("1â€“2")?"1â€“2Ïƒ":fe.startsWith("2â€“3")?"2â€“3Ïƒ":fe.startsWith(">3")?">3Ïƒ":P})(),color:P.includes(">3")?"orange":P.includes("2â€“3")?"yellow":"grey","aria-label":`Sigma zone: ${P}`,className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--zone"})})]}),H&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--gating","data-gating":!0,children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Trend gating"})}),o.jsx("div",{className:"fdp-spc-tooltip__explanation","aria-live":"off",children:H})]}),z&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",children:o.jsx("strong",{children:"Special cause"})}),o.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",children:x.map(({id:fe,label:U})=>{const W=String(fe),J=W===Dt.TrendIncreasing||W===Dt.TrendDecreasing?"fdp-spc-tag--trend":ce?"fdp-spc-tag--no-judgement":T?T.toLowerCase().includes("concern")?"fdp-spc-tag--concern":T.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common";return o.jsx(Ye,{text:U,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${J}`,"data-rule-id":W},W)})}),ie&&o.jsxs("div",{className:"fdp-spc-tooltip__section fdp-spc-tooltip__section--rules",style:{marginTop:16},children:[o.jsx("div",{className:"fdp-spc-tooltip__section-label",style:{marginBottom:6},children:o.jsx("strong",{children:"Prime Direction"})}),(()=>{const fe=ce?"fdp-spc-tag--no-judgement":T?T.toLowerCase().includes("concern")?"fdp-spc-tag--concern":T.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",U=`${ie}${V?` (${V})`:""}`;return o.jsx(Ye,{text:U,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${fe}`,"aria-label":`Prime direction ${ie}${V?` via ${V}`:""}`})})()]})]})]})}),D):null;return o.jsxs("g",{className:"fdp-tooltip-layer fdp-spc-tooltip",pointerEvents:"none","aria-hidden":"true",children:[o.jsx("circle",{cx:w,cy:v,r:7,fill:"none",stroke:Ce,strokeWidth:3}),o.jsx("circle",{cx:w,cy:v,r:5,fill:"#000",stroke:Ce,strokeWidth:1.5}),o.jsx("circle",{cx:w,cy:v,r:2.5,fill:he,stroke:"#fff",strokeWidth:.5}),ge]})},hs=({status:e,size:t=44,ariaLabel:n,dropShadow:r=!0,colourOverride:i,gradientWash:a=!1,letterOverride:s,showTrendLines:l=!0,...u})=>{const c=B.useId(),d=B.useId(),{start:f,mid:p,end:g}=is(),b=i||a1[e],h=(s||s1[e]).slice(0,2),m=n||`Assurance ${e}`;return o.jsxs("svg",{width:t,height:t,viewBox:"0 0 300 300",role:"img","aria-label":m,...u,children:[o.jsxs("defs",{children:[r&&o.jsxs("filter",{id:c,filterUnits:"objectBoundingBox",children:[o.jsx("feGaussianBlur",{stdDeviation:"3"}),o.jsx("feOffset",{dx:"-1",dy:"15",result:"blur"}),o.jsx("feFlood",{floodColor:"rgb(166,166,166)",floodOpacity:"1"}),o.jsx("feComposite",{in2:"blur",operator:"in",result:"colorShadow"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"colorShadow",operator:"over"})]}),a&&o.jsxs("linearGradient",{id:d,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:b,stopOpacity:parseFloat(f)}),o.jsx("stop",{offset:"65%",stopColor:b,stopOpacity:parseFloat(p)}),o.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:parseFloat(g)})]})]}),o.jsx("circle",{stroke:"none",fill:a?`url(#${d})`:"#ffffff",...r?{filter:`url(#${c})`}:{},cx:"150",cy:"150",r:"120"}),o.jsx("text",{fill:b,fontFamily:"Arial-BoldMT, Arial, 'Helvetica Neue', Helvetica, sans-serif",fontWeight:"bold",fontSize:176,x:0,y:0,transform:"translate(121.01, 32) scale(0.5, 0.5)",textAnchor:"middle",children:o.jsx("tspan",{x:60,y:184,children:h})}),l&&o.jsxs(o.Fragment,{children:[e===qn.Fail?o.jsx("path",{id:"fail-line",stroke:b,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 33,143 L 268,143"}):e===qn.Uncertain?o.jsx("path",{id:"uncertain-line",stroke:"rgb(166, 166, 166)",strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"16.5,10",strokeDashoffset:0,fill:"none",d:"M 36,174 L 266,174"}):o.jsx("path",{id:"pass-line",stroke:b,strokeWidth:9.5,strokeMiterlimit:9.5,strokeDasharray:"35,10",strokeDashoffset:0,fill:"none",d:"M 48,204 L 254,204"}),o.jsx("path",{id:"data-sparkline",stroke:"rgb(166, 166, 166)",strokeWidth:12,strokeMiterlimit:12,fill:"none",d:"M 59.9,187.91 C 72.79,171.72 87.33,158.06 104.4,157.83 121.91,158.58 140.94,187.85 153.4,189.91 164.1,192.12 163.78,171.38 169.17,170.53 172.87,169.55 174.88,187.45 184.94,189.24 197,191.86 230.54,184.47 239.01,185.9"}),o.jsx("circle",{stroke:b,strokeWidth:15,strokeMiterlimit:10,fill:"none",cx:"150",cy:"150",r:"120"})]})]})};hs.displayName="SPCAssuranceIcon";function P1(e,t=!0){if(!e?.length)return[];const n=[...e];if(t){for(let a=1;a<n.length-1;a++)n[a]===bt.Common&&n[a-1]===n[a+1]&&n[a-1]!==bt.Common&&(n[a]=n[a-1]);let i=0;for(;i<n.length;){const a=n[i];let s=i+1;for(;s<n.length&&n[s]===a;)s++;s-i===1&&a!==bt.Common&&(n[i]=bt.Common),i=s}}const r=[];if(n.length){let i=0;for(let a=1;a<=n.length;a++)if(a===n.length||n[a]!==n[i]){const s=n[i],l=a-1,u=l-i+1;(s===bt.Common||u>=2)&&r.push({start:i,end:l,category:s}),i=a}}return r}const F1=({engineRows:e,measureName:t,measureUnit:n,onSignalFocus:r})=>{const i=Ln(),a=i?.focused??null,s=a?.index??null,l=typeof s=="number"&&e?e[s]:null,u=q.useMemo(()=>l?ss({specialCauseSinglePointUp:!!l.rules.singlePoint.up,specialCauseSinglePointDown:!!l.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!l.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!l.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!l.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!l.rules.fourOfFive.down,specialCauseShiftUp:!!l.rules.shift.up,specialCauseShiftDown:!!l.rules.shift.down,specialCauseTrendUp:!!l.rules.trend.up,specialCauseTrendDown:!!l.rules.trend.down}):[],[l]),c=q.useMemo(()=>Array.from(new Set(u.map(h=>Gr[h]?.narration).filter(Boolean))),[u]),d=l?os(l.classification?.variation):null,f=l?_f(l.classification?.assurance):null,p=u.length>0,g=l?l.classification?.variation===$e.Neither&&p:!1,b=q.useRef(null);return q.useEffect(()=>{if(!r||!a||l==null)return;const h=`${a.seriesId}:${a.index}`;if(b.current!==h){b.current=h;try{r({index:a.index,x:a.x,y:a.y,row:l,rules:u})}catch{}}},[a?.seriesId,a?.index,a?.x,a?.y,l,u,r]),o.jsxs("div",{className:"fdp-spc-inspector",role:"region","aria-label":"Signals inspector","data-testid":"spc-signals-inspector",children:[o.jsxs("div",{className:"fdp-spc-inspector__header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsx("strong",{children:"Signals inspector"}),o.jsx("div",{className:"fdp-spc-inspector__nav","aria-hidden":!i,children:i&&o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{i.focused?i.focusPrevPoint():i.focusFirstPoint()},"aria-label":"Previous point",children:"â—€"}),o.jsx("button",{type:"button",className:"fdp-button fdp-button--secondary",onClick:()=>{i.focused?i.focusNextPoint():i.focusFirstPoint()},"aria-label":"Next point",children:"â–¶"})]})})]}),!l||!a?o.jsx("p",{className:"fdp-spc-inspector__empty",children:"No point selected."}):o.jsxs("div",{className:"fdp-spc-inspector__body",children:[o.jsxs("div",{className:"fdp-spc-inspector__summary",style:{display:"flex",gap:16,flexWrap:"wrap"},children:[o.jsxs("span",{children:[o.jsx("strong",{children:"Point:"})," ",a.index+1]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Value:"})," ",a.y,n?` ${n}`:"",t?` ${t}`:""]})]}),(d||g||f)&&o.jsx("div",{className:"fdp-spc-inspector__signals",style:{marginTop:8},children:o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[d?.toLowerCase().includes("concern")?o.jsx(Ye,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--concern"}):d?.toLowerCase().includes("improvement")?o.jsx(Ye,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--improvement"}):g?o.jsx(Ye,{text:"No judgement",color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--no-judgement","aria-label":"Neutral special cause (no directional judgement)"}):d?o.jsx(Ye,{text:d,color:"default",className:"fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--common"}):null,f&&(()=>{const h=f.toLowerCase(),y=!(h.includes("not met")||h.includes("not achieved"))&&/(^|\b)(met|achieved)(\b|$)/.test(h);return o.jsx(Ye,{text:f,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag fdp-spc-tag--assurance ${y?"fdp-spc-tag--improvement":"fdp-spc-tag--concern"}`,"aria-label":`Assurance: ${f}`})})()]})}),o.jsxs("div",{className:"fdp-spc-inspector__rules",style:{marginTop:8},children:[o.jsx("strong",{children:"Special cause:"}),o.jsx("div",{className:"fdp-spc-tooltip__rule-tags","aria-label":"Special cause rules",style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:4},children:u.length===0?o.jsx("span",{children:" None"}):u.map(h=>{const m=String(h),S=m===Dt.TrendIncreasing||m===Dt.TrendDecreasing?"fdp-spc-tag--trend":g?"fdp-spc-tag--no-judgement":d?d.toLowerCase().includes("concern")?"fdp-spc-tag--concern":d.toLowerCase().includes("improvement")?"fdp-spc-tag--improvement":"fdp-spc-tag--common":"fdp-spc-tag--common",M=Gr[h]?.tooltip||m;return o.jsx(Ye,{text:M,color:"default",className:`fdp-spc-tooltip__tag fdp-spc-tag ${S}`,"data-rule-id":m,title:Gr[h]?.tooltip},m)})})]}),c.length>0&&o.jsxs("div",{className:"fdp-spc-inspector__narration",style:{marginTop:8},children:[o.jsx("strong",{children:"Summary:"})," ",c.join("; ")]})]})]})};var Qt=(e=>(e.XmR="XmR",e.T="T",e.G="G",e))(Qt||{}),ze=(e=>(e.Up="Up",e.Down="Down",e.Neither="Neither",e))(ze||{}),Ke=(e=>(e.ImprovementHigh="ImprovementHigh",e.ImprovementLow="ImprovementLow",e.ConcernHigh="ConcernHigh",e.ConcernLow="ConcernLow",e.NeitherHigh="NeitherHigh",e.NeitherLow="NeitherLow",e.CommonCause="CommonCause",e))(Ke||{}),et=(e=>(e.SinglePoint="SinglePoint",e.TwoSigma="TwoSigma",e.Shift="Shift",e.Trend="Trend",e))(et||{}),yr=(e=>(e.Upwards="Upwards",e.Downwards="Downwards",e.Same="Same",e))(yr||{}),vr=(e=>(e.Up="Up",e.Down="Down",e))(vr||{}),qr=(e=>(e.Improvement="Improvement",e.Concern="Concern",e))(qr||{}),Xr=(e=>(e.SqlPrimeThenRule="SqlPrimeThenRule",e.PreferImprovement="PreferImprovement",e.RuleHierarchy="RuleHierarchy",e))(Xr||{}),kt=(e=>(e.FavourableSide="FavourableSide",e.CrossingAfterFavourable="CrossingAfterFavourable",e.ExtremeFavourable="ExtremeFavourable",e.FirstFavourable="FirstFavourable",e.LongestFavourable="LongestFavourable",e.LastFavourable="LastFavourable",e.UnfavourableSide="UnfavourableSide",e.CrossingAfterUnfavourable="CrossingAfterUnfavourable",e.ExtremeUnfavourable="ExtremeUnfavourable",e.FirstUnfavourable="FirstUnfavourable",e.LongestUnfavourable="LongestUnfavourable",e.LastUnfavourable="LastUnfavourable",e))(kt||{}),En=(e=>(e.Off="Off",e.AutoWhenConflict="AutoWhenConflict",e.Always="Always",e))(En||{});const Kn={[et.SinglePoint]:1,[et.TwoSigma]:2,[et.Shift]:3,[et.Trend]:4},Af=3.267,$1=2.66,Ef=.2777;function Pe(e){return typeof e=="number"&&!Number.isNaN(e)}function Kr(e){return e.reduce((t,n)=>t+n,0)/(e.length||1)}function Bf(e,t){const n=new Array(e.length).fill(null);let r=null;for(let i=0;i<e.length;i++){const a=e[i];if(!(t[i]||!Pe(a))){if(r!==null){const s=e[r];Pe(s)&&(n[i]=Math.abs(a-s))}r=i}}return n}function Rf(e,t){const n=e.filter(Pe);if(!n.length)return{mrMean:NaN,mrUcl:NaN};let r=n.slice();if(t){const a=Kr(r),s=Af*a;r=r.filter(l=>l<=s)}const i=Kr(r);return{mrMean:i,mrUcl:Af*i}}function Of(e,t){if(!Pe(e)||!Pe(t))return{upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const n=$1*t,r=2/3*n,i=1/3*n;return{upperProcessLimit:e+n,lowerProcessLimit:e-n,upperTwoSigma:e+r,lowerTwoSigma:e-r,upperOneSigma:e+i,lowerOneSigma:e-i}}function L1(e,t,n,r){if(e===Qt.T){const f=t.map(k=>Pe(k)&&k>0?Math.pow(k,Ef):null),p=Bf(f,n),g=Rf(p,r),b=f.filter((k,x)=>!n[x]&&Pe(k)),h=b.length?Kr(b):NaN,m=Of(h,g.mrMean),y=k=>Pe(k)&&k>0?Math.pow(k,1/Ef):null,S=Pe(m.upperProcessLimit)?y(m.upperProcessLimit):null,M=Pe(m.lowerProcessLimit)&&m.lowerProcessLimit>0?y(m.lowerProcessLimit):null,w=Pe(m.upperTwoSigma)?y(m.upperTwoSigma):null,v=Pe(m.lowerTwoSigma)&&m.lowerTwoSigma>0?y(m.lowerTwoSigma):null,D=Pe(m.upperOneSigma)?y(m.upperOneSigma):null,N=Pe(m.lowerOneSigma)&&m.lowerOneSigma>0?y(m.lowerOneSigma):null;return{mean:Pe(h)&&h>0?y(h):null,mr:p,mrMean:g.mrMean,mrUcl:g.mrUcl,upperProcessLimit:S,lowerProcessLimit:M,upperTwoSigma:w,lowerTwoSigma:v,upperOneSigma:D,lowerOneSigma:N}}if(e===Qt.G){const f=t.filter((j,C)=>!n[C]&&Pe(j)),p=f.length?Kr(f):NaN,g=Pe(p)?1/(p+1):NaN,b=j=>{if(!Pe(g)||g<=0||g>=1)return NaN;const C=Math.ceil(Math.log(1-j)/Math.log(1-g))-1;return Math.max(0,C)},h=.00135,m=1-.00135,y=.02275,S=1-.02275,M=.158655,w=1-.158655,v=b(m),D=b(h),N=b(S),k=b(y),x=b(w),I=b(M);return{mean:Pe(p)?p:null,mr:new Array(t.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:Pe(v)?v:null,lowerProcessLimit:Pe(D)?D:null,upperTwoSigma:Pe(N)?N:null,lowerTwoSigma:Pe(k)?k:null,upperOneSigma:Pe(x)?x:null,lowerOneSigma:Pe(I)?I:null}}if(e!==Qt.XmR)return{mean:NaN,mr:new Array(t.length).fill(null),mrMean:NaN,mrUcl:NaN,upperProcessLimit:null,lowerProcessLimit:null,upperTwoSigma:null,lowerTwoSigma:null,upperOneSigma:null,lowerOneSigma:null};const i=Bf(t,n),a=i.filter(Pe),s=a.length?Kr(a):NaN,l=Pe(s)?3.267*s:NaN;let u=NaN;{const f=[];for(let p=0;p<t.length;p++){const g=t[p];if(n[p]||!Pe(g))continue;if(!r){f.push(g);continue}const b=i[p];(b===null||!Pe(l)||Pe(b)&&b<=l)&&f.push(g)}u=f.length?Kr(f):NaN}const c=Rf(i,r),d=Of(u,c.mrMean);return{mean:u,mr:i,mrMean:c.mrMean,mrUcl:c.mrUcl,...d}}function A1(e,t){const n=e.map((u,c)=>c).filter(u=>!e[u].ghost&&Pe(e[u].value)),r=u=>e[u],i=t.shiftPoints,a=t.trendPoints;let s=[],l=[];for(const u of n){const c=r(u);if(!Pe(c.mean)||!Pe(c.value)){s=[],l=[];continue}if(c.value>c.mean?(s.push(u),l=[]):c.value<c.mean?(l.push(u),s=[]):(s=[],l=[]),s.length>=i)for(const d of s)r(d).shiftUp=!0;if(l.length>=i)for(const d of l)r(d).shiftDown=!0}for(let u=0;u<=n.length-3;u++){const d=n.slice(u,u+3).map(r);if(!d.every(w=>Pe(w.value)&&Pe(w.mean)))continue;const f=d[0].mean,p=d.every(w=>w.value>f),g=d.every(w=>w.value<f);if(!p&&!g)continue;const b=d[0].upperTwoSigma??1/0,h=d[0].lowerTwoSigma??-1/0,m=d[0].upperProcessLimit??1/0,y=d[0].lowerProcessLimit??-1/0,S=d.filter(w=>t.twoSigmaIncludeAboveThree?w.value>b:w.value>b&&w.value<=m),M=d.filter(w=>t.twoSigmaIncludeAboveThree?w.value<h:w.value<h&&w.value>=y);p&&S.length>=2&&S.forEach(w=>w.twoSigmaUp=!0),g&&M.length>=2&&M.forEach(w=>w.twoSigmaDown=!0)}if(t.enableFourOfFiveRule)for(let u=0;u<=n.length-5;u++){const d=n.slice(u,u+5).map(r);if(!d.every(S=>Pe(S.value)&&Pe(S.mean)))continue;const f=d[0].mean,p=d.every(S=>S.value>f),g=d.every(S=>S.value<f);if(!p&&!g)continue;const b=d[0].upperOneSigma??1/0,h=d[0].lowerOneSigma??-1/0,m=d.filter(S=>S.value>b),y=d.filter(S=>S.value<h);p&&m.length>=4&&m.forEach(S=>S.fourOfFiveUp=!0),g&&y.length>=4&&y.forEach(S=>S.fourOfFiveDown=!0)}for(let u=0;u<=n.length-a;u++){const c=n.slice(u,u+a),d=c.map(r);if(!d.every(g=>Pe(g.value)))continue;let f=!0,p=!0;for(let g=1;g<d.length&&(d[g].value>d[g-1].value||(f=!1),d[g].value<d[g-1].value||(p=!1),!(!f&&!p));g++);f&&c.forEach(g=>r(g).trendUp=!0),p&&c.forEach(g=>r(g).trendDown=!0)}}function Hf(e){const t=[],n=[];e.singlePointUp&&t.push({id:et.SinglePoint,rank:Kn[et.SinglePoint]}),e.singlePointDown&&n.push({id:et.SinglePoint,rank:Kn[et.SinglePoint]}),e.twoSigmaUp&&t.push({id:et.TwoSigma,rank:Kn[et.TwoSigma]}),e.twoSigmaDown&&n.push({id:et.TwoSigma,rank:Kn[et.TwoSigma]}),e.shiftUp&&t.push({id:et.Shift,rank:Kn[et.Shift]}),e.shiftDown&&n.push({id:et.Shift,rank:Kn[et.Shift]}),e.trendUp&&t.push({id:et.Trend,rank:Kn[et.Trend]}),e.trendDown&&n.push({id:et.Trend,rank:Kn[et.Trend]});const r=t.reduce((s,l)=>Math.max(s,l.rank),0),i=n.reduce((s,l)=>Math.max(s,l.rank),0),a=r>i?yr.Upwards:i>r?yr.Downwards:yr.Same;return{up:t,dn:n,upMax:r,dnMax:i,primeDirection:a}}function zf(e,t){const n=t===ze.Up?e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp:t===ze.Down?e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown:!1,r=t===ze.Up?e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown:t===ze.Down?e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp:!1;return{aligned:n,opposite:r}}function Wf(e,t,n,r=!1,i,a,s=!1){const{up:l,dn:u,upMax:c,dnMax:d,primeDirection:f}=Hf(e);e.primeDirection=f;const p=e.specialCauseImprovementValue,g=e.specialCauseConcernValue;e.specialCauseImprovementValue!==null&&e.specialCauseConcernValue!==null&&E1({row:e,metric:t,metricConflictRule:n,preferImprovementWhenConflict:r,preferTrendWhenConflict:s,primeDirection:f,conflictStrategy:i,ruleHierarchy:a}),t===ze.Up?e.variationIcon=e.specialCauseImprovementValue!==null?Ke.ImprovementHigh:e.specialCauseConcernValue!==null?Ke.ConcernLow:Ke.CommonCause:t===ze.Down?e.variationIcon=e.specialCauseImprovementValue!==null?Ke.ImprovementLow:e.specialCauseConcernValue!==null?Ke.ConcernHigh:Ke.CommonCause:e.variationIcon=Ke.CommonCause;const b=e.specialCauseImprovementValue!==null?vr.Up:e.specialCauseConcernValue!==null?vr.Down:void 0,h=b===vr.Up?c:b===vr.Down?d:Math.max(c,d);e.primeRank=h||void 0;const m=b===vr.Up?l.find(y=>y.rank===h):b===vr.Down?u.find(y=>y.rank===h):void 0;return e.primeRuleId=m?.id,{originalImprovement:p,originalConcern:g}}function E1(e){const{row:t,metric:n,metricConflictRule:r,preferImprovementWhenConflict:i,preferTrendWhenConflict:a,primeDirection:s=t.primeDirection??yr.Same,conflictStrategy:l,ruleHierarchy:u}=e;if(a&&t.specialCauseImprovementValue!==null&&t.specialCauseConcernValue!==null){const d=!!t.trendUp,f=!!t.trendDown;if(n===ze.Up){if(d&&!f){t.specialCauseConcernValue=null;return}if(!d&&f){t.specialCauseImprovementValue=null;return}}else if(n===ze.Down){if(f&&!d){t.specialCauseConcernValue=null;return}if(!f&&d){t.specialCauseImprovementValue=null;return}}}const c=i?Xr.PreferImprovement:l??Xr.SqlPrimeThenRule;if(c===Xr.PreferImprovement){n===ze.Up?t.specialCauseConcernValue=null:n===ze.Down&&(t.specialCauseImprovementValue=null);return}if(c===Xr.RuleHierarchy){const d=u??[et.Trend,et.Shift,et.TwoSigma,et.SinglePoint],{up:f,dn:p}=Hf(t);for(const g of d){const b=f.some(m=>m.id===g),h=p.some(m=>m.id===g);if(b&&!h){n===ze.Up?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null;return}if(h&&!b){n===ze.Up?t.specialCauseImprovementValue=null:t.specialCauseConcernValue=null;return}if(b&&h){(n===ze.Up||n===ze.Down)&&(r===qr.Improvement?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null);return}}}s===yr.Upwards?n===ze.Up?t.specialCauseConcernValue=null:n===ze.Down&&(t.specialCauseImprovementValue=null):s===yr.Downwards?n===ze.Up?t.specialCauseImprovementValue=null:n===ze.Down&&(t.specialCauseConcernValue=null):r===qr.Improvement?t.specialCauseConcernValue=null:t.specialCauseImprovementValue=null}var ll=(e=>(e.Up="Up",e.Down="Down",e))(ll||{});function B1(e){return e>0?1:e<0?-1:0}function R1(e){const t=B1(e);if(t>0)return"Above";if(t<0)return"Below"}function Uf(e){const t=[];let n=0;for(;n<e.length;){const r=e[n];if(!r||r.value==null||r.ghost||!r.trendUp&&!r.trendDown){n++;continue}const i=r.trendUp?"Up":r.trendDown?"Down":void 0;let a=n,s=n;for(;s<e.length;s++){const b=e[s];if(!b||b.value==null||b.ghost||!(i==="Up"?b.trendUp:b.trendDown))break}const l=s-1,u=[];let c,d,f=1/0,p=-1/0,g=0;for(let b=a;b<=l;b++){const h=e[b];if(h.value==null)continue;const m=h.value-(h.mean??0),y=R1(m);if(!y){c!==void 0&&(u.push({trendDirection:i,start:c,end:b-1,side:d,minValue:f,maxValue:p,maxAbsDeltaFromMean:g}),c=void 0,d=void 0,f=1/0,p=-1/0,g=0);continue}if(c===void 0)c=b,d=y,f=h.value,p=h.value,g=Math.abs(m);else if(y!==d)u.push({trendDirection:i,start:c,end:b-1,side:d,minValue:f,maxValue:p,maxAbsDeltaFromMean:g}),c=b,d=y,f=h.value,p=h.value,g=Math.abs(m);else{h.value<f&&(f=h.value),h.value>p&&(p=h.value);const S=Math.abs(m);S>g&&(g=S)}}c!==void 0&&u.push({trendDirection:i,start:c,end:l,side:d,minValue:f,maxValue:p,maxAbsDeltaFromMean:g}),t.push({trendDirection:i,start:a,end:l,segments:u}),n=l+1}return t}function O1(e){if(e===ze.Up)return"Above";if(e===ze.Down)return"Below"}function H1(e){if(e)return e==="Above"?"Below":"Above"}function Vf(e,t){const n=t.strategy??kt.CrossingAfterFavourable,r=O1(t.metricImprovement),i=H1(r),a=[];for(const s of e){if(!r){if(n===kt.ExtremeFavourable||n===kt.CrossingAfterFavourable){const l=s.segments;if(l.length===0)continue;let u=l[0];for(const c of l)c.maxAbsDeltaFromMean>u.maxAbsDeltaFromMean&&(u=c);a.push(u)}continue}if(n===kt.FavourableSide){a.push(...s.segments.filter(l=>l.side===r));continue}if(n===kt.UnfavourableSide){a.push(...s.segments.filter(l=>l.side===i));continue}if(n===kt.CrossingAfterFavourable){const l=s.segments;let u;for(let c=0;c<l.length;c++){const d=l[c];if(d.side===r&&c>0&&l[c-1].side!==r){u=d;break}}if(!u){const c=l.filter(d=>d.side===r);c.length>0&&(u=c.reduce((d,f)=>f.end-f.start>d.end-d.start?f:d,c[0]))}u&&a.push(u);continue}if(n===kt.CrossingAfterUnfavourable){const l=s.segments;let u;for(let c=0;c<l.length;c++){const d=l[c];if(d.side===i&&c>0&&l[c-1].side!==i){u=d;break}}if(!u){const c=l.filter(d=>d.side===i);c.length>0&&(u=c.reduce((d,f)=>f.end-f.start>d.end-d.start?f:d,c[0]))}u&&a.push(u);continue}if(n===kt.ExtremeFavourable){const l=s.segments.filter(c=>c.side===r);if(l.length===0)continue;const u=l.reduce((c,d)=>d.maxAbsDeltaFromMean>c.maxAbsDeltaFromMean?d:c);a.push(u);continue}if(n===kt.ExtremeUnfavourable){const l=s.segments.filter(c=>c.side===i);if(l.length===0)continue;const u=l.reduce((c,d)=>d.maxAbsDeltaFromMean>c.maxAbsDeltaFromMean?d:c);a.push(u);continue}if(n===kt.FirstFavourable){const l=s.segments.find(u=>u.side===r);l&&a.push(l);continue}if(n===kt.FirstUnfavourable){const l=s.segments.find(u=>u.side===i);l&&a.push(l);continue}if(n===kt.LongestFavourable){const l=s.segments.filter(c=>c.side===r);if(l.length===0)continue;const u=l.reduce((c,d)=>d.end-d.start>c.end-c.start?d:c);a.push(u);continue}if(n===kt.LongestUnfavourable){const l=s.segments.filter(c=>c.side===i);if(l.length===0)continue;const u=l.reduce((c,d)=>d.end-d.start>c.end-c.start?d:c);a.push(u);continue}if(n===kt.LastFavourable){const l=s.segments.filter(u=>u.side===r);if(l.length===0)continue;a.push(l[l.length-1]);continue}if(n===kt.LastUnfavourable){const l=s.segments.filter(u=>u.side===i);if(l.length===0)continue;a.push(l[l.length-1]);continue}}return a}var xt=(e=>(e.Common="Common",e.Improvement="Improvement",e.Concern="Concern",e.NoJudgement="NoJudgement",e))(xt||{}),Jr=(e=>(e.Ungated="Ungated",e.Gated="Gated",e))(Jr||{});function z1(e){const t=!!(e.singlePointUp||e.twoSigmaUp||e.shiftUp||e.trendUp),n=!!(e.singlePointDown||e.twoSigmaDown||e.shiftDown||e.trendDown);return{upAny:t,downAny:n}}function cl(e,t){const n=t.metricImprovement,r=t.trendVisualMode??"Ungated",i=t.enableNeutralNoJudgement??!0;return e.map(a=>{if(!a||a.value==null||a.ghost)return"Common";const{upAny:s,downAny:l}=z1(a);if(s&&l)return"Improvement";switch(a.variationIcon){case Ke.ImprovementHigh:case Ke.ImprovementLow:return"Improvement";case Ke.ConcernHigh:case Ke.ConcernLow:return"Concern";case Ke.NeitherHigh:case Ke.NeitherLow:{if(r==="Ungated"&&n!==ze.Neither){if(s&&!l)return n===ze.Up?"Improvement":"Concern";if(l&&!s)return n===ze.Down?"Improvement":"Concern"}return i?"NoJudgement":"Common"}default:return"Common"}})}function W1(e,t,n){const r=n?.mode??"Disabled";if(!e.length)return[];let i=cl(e,{metricImprovement:t,trendVisualMode:Jr.Ungated,enableNeutralNoJudgement:!0});if(r!=="RecalcCrossing"||t===ze.Neither)return i;const a=Math.max(0,n?.preWindow??2),s=Math.max(0,n?.postWindow??3),l=n?.prePolarity??"Opposite",u=(f,p)=>{if(f<0||f>=i.length)return;const g=i[f];(g===xt.Common||g===xt.NoJudgement)&&(i[f]=p)},c=f=>{if(f==null)return null;const p=[];for(const b of e)b.partitionId===f&&typeof b.value=="number"&&!b.ghost&&p.push(b.value);return p.length?p.reduce((b,h)=>b+h,0)/p.length:null},d=Array.isArray(n?.boundaryIndices)&&n.boundaryIndices.length?n.boundaryIndices.slice().filter(f=>Number.isFinite(f)):(()=>{const f=[];for(let p=1;p<e.length;p++){const g=e[p-1],b=e[p];!g||!b||b.partitionId!==g.partitionId&&f.push(p)}return f})();for(const f of d){const p=e[f-1],g=e[f];if(!p||!g)continue;let b=null;for(let w=f-1;w>=0;w--){const v=e[w];if(v.partitionId!==p.partitionId)break;if(typeof v.mean=="number"){b=v.mean;break}}let h=null;for(let w=f;w<e.length;w++){const v=e[w];if(v.partitionId!==g.partitionId)break;if(typeof v.mean=="number"){h=v.mean;break}}if(b==null&&(b=c(p.partitionId??null)),h==null&&(h=c(g.partitionId??null)),b==null||h==null)continue;const m=h-b,y=t===ze.Up?m>0:m<0,S=y?xt.Improvement:xt.Concern,M=l==="Same"?S:y?xt.Concern:xt.Improvement;for(let w=1;w<=a;w++)u(f-w,M);for(let w=0;w<s;w++)u(f+w,S)}return i}function Gf(e){if(!e)return{};if(typeof e=="object"&&("minimumPoints"in e||"shiftPoints"in e||"trendPoints"in e))return e;const t=e,n={};if(t.thresholds){const r=t.thresholds;r.minimumPoints!=null&&(n.minimumPoints=r.minimumPoints),r.shiftPoints!=null&&(n.shiftPoints=r.shiftPoints),r.trendPoints!=null&&(n.trendPoints=r.trendPoints),r.excludeMovingRangeOutliers!=null&&(n.excludeMovingRangeOutliers=r.excludeMovingRangeOutliers)}if(t.eligibility&&t.eligibility.chartLevel!=null&&(n.chartLevelEligibility=t.eligibility.chartLevel),t.parity&&(t.parity.trendAcrossPartitions!=null&&(n.trendAcrossPartitions=t.parity.trendAcrossPartitions),t.parity.twoSigmaIncludeAboveThree!=null&&(n.twoSigmaIncludeAboveThree=t.parity.twoSigmaIncludeAboveThree),t.parity.enableFourOfFiveRule!=null&&(n.enableFourOfFiveRule=t.parity.enableFourOfFiveRule)),t.conflict&&(t.conflict.preferImprovementWhenConflict!=null&&(n.preferImprovementWhenConflict=t.conflict.preferImprovementWhenConflict),t.conflict.preferTrendWhenConflict!=null&&(n.preferTrendWhenConflict=t.conflict.preferTrendWhenConflict),t.conflict.strategy!=null&&(n.conflictStrategy=t.conflict.strategy),t.conflict.ruleHierarchy!=null&&(n.ruleHierarchy=t.conflict.ruleHierarchy),t.conflict.metricRuleOnTie!=null&&(n.metricConflictRule=t.conflict.metricRuleOnTie)),t.trend?.segmentation){const r=t.trend.segmentation;r.mode!=null&&(n.trendSegmentationMode=r.mode),r.favourableSegmentation!=null&&(n.trendFavourableSegmentation=r.favourableSegmentation),r.strategy!=null&&(n.trendSegmentationStrategy=r.strategy),r.dominatesHighlightedWindow!=null&&(n.trendDominatesHighlightedWindow=r.dominatesHighlightedWindow)}return n}function ul(e){const{chartType:t,metricImprovement:n,data:r}=e,i=Gf(e.settings),a={minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:qr.Improvement,trendAcrossPartitions:!1,twoSigmaIncludeAboveThree:!1,enableFourOfFiveRule:!1,preferImprovementWhenConflict:!1,conflictStrategy:Xr.SqlPrimeThenRule,ruleHierarchy:void 0,chartLevelEligibility:!1,trendFavourableSegmentation:!1,trendSegmentationMode:En.Off,trendSegmentationStrategy:kt.CrossingAfterUnfavourable,trendDominatesHighlightedWindow:!1,...i},s=i?.trendSegmentationMode||(i?.trendFavourableSegmentation===!0?En.Always:i?.trendFavourableSegmentation===!1?En.Off:a.trendSegmentationMode),l=r.map((h,m)=>({rowId:m+1,x:h.x,value:Pe(h.value)?h.value:null,ghost:!!h.ghost,baseline:!!h.baseline,target:Pe(h.target)?h.target:null})),u=[];let c=[];for(const h of l)h.baseline&&c.length&&(u.push(c),c=[]),c.push(h);c.length&&u.push(c);const d=[],f=(a.trendFavourableSegmentation||s!==En.Off)&&!a.preferImprovementWhenConflict,p=l.filter(h=>!h.ghost&&Pe(h.value)).length,g=!!a.chartLevelEligibility&&p>=a.minimumPoints;let b=0;for(const h of u){b++;const m=h.map(v=>v.value),y=h.map(v=>v.ghost),S=L1(t,m,y,!!a.excludeMovingRangeOutliers),M=h.map((v,D)=>{const N=!v.ghost&&Pe(v.value)?m.slice(0,D+1).filter((x,I)=>!y[I]&&Pe(x)).length:0,k=g?!0:N>=a.minimumPoints;return{rowId:v.rowId,x:v.x,value:Pe(v.value)?v.value:null,ghost:v.ghost,partitionId:b,pointRank:N,mean:(k||g)&&Pe(S.mean)?S.mean:null,upperProcessLimit:k||g?S.upperProcessLimit:null,lowerProcessLimit:k||g?S.lowerProcessLimit:null,upperTwoSigma:k||g?S.upperTwoSigma:null,lowerTwoSigma:k||g?S.lowerTwoSigma:null,upperOneSigma:k||g?S.upperOneSigma:null,lowerOneSigma:k||g?S.lowerOneSigma:null,singlePointUp:!1,singlePointDown:!1,twoSigmaUp:!1,twoSigmaDown:!1,fourOfFiveUp:!1,fourOfFiveDown:!1,shiftUp:!1,shiftDown:!1,trendUp:!1,trendDown:!1,specialCauseImprovementValue:null,specialCauseConcernValue:null,variationIcon:Ke.CommonCause}});for(const v of M)v.ghost||!Pe(v.value)||v.mean===null||(Pe(v.upperProcessLimit)&&v.value>v.upperProcessLimit&&(v.singlePointUp=!0),Pe(v.lowerProcessLimit)&&v.value<v.lowerProcessLimit&&(v.singlePointDown=!0));A1(M,{shiftPoints:a.shiftPoints,trendPoints:a.trendPoints,twoSigmaIncludeAboveThree:!!a.twoSigmaIncludeAboveThree,enableFourOfFiveRule:!!a.enableFourOfFiveRule}),f&&(v=>{const D=v.some(j=>(j.singlePointUp||j.twoSigmaUp||j.shiftUp||j.trendUp)&&(j.singlePointDown||j.twoSigmaDown||j.shiftDown||j.trendDown));if(s===En.Off||s===En.AutoWhenConflict&&!D)return;const N=Uf(v),k=Vf(N,{metricImprovement:n,strategy:a.trendSegmentationStrategy}),x=new Set,I=new Set;for(const j of k)for(let C=j.start;C<=j.end;C++)j.trendDirection===ll.Up?x.add(C):I.add(C);v.forEach((j,C)=>{j.trendUp=x.has(C)?j.trendUp:!1,j.trendDown=I.has(C)?j.trendDown:!1,a.trendDominatesHighlightedWindow&&(x.has(C)?(j.singlePointDown=!1,j.twoSigmaDown=!1,j.shiftDown=!1):I.has(C)&&(j.singlePointUp=!1,j.twoSigmaUp=!1,j.shiftUp=!1))})})(M);for(const v of M){if(v.ghost||!Pe(v.value)||v.mean===null){d.push(v);continue}const{aligned:D,opposite:N}=zf(v,n);if(v.specialCauseImprovementValue=D?v.value:null,v.specialCauseConcernValue=N?v.value:null,n===ze.Neither){const k=v.singlePointUp||v.twoSigmaUp||v.shiftUp||v.trendUp,x=v.singlePointDown||v.twoSigmaDown||v.shiftDown||v.trendDown;v.variationIcon=k?Ke.NeitherHigh:x?Ke.NeitherLow:Ke.CommonCause}else Wf(v,n,a.metricConflictRule,a.preferImprovementWhenConflict===!0,a.conflictStrategy,a.ruleHierarchy,a.preferTrendWhenConflict===!0);d.push(v)}}if(a.trendAcrossPartitions){const h=d.map((m,y)=>({idx:y,r:m})).filter(({r:m})=>!m.ghost&&Pe(m.value));if(h.length>=a.trendPoints)for(let m=0;m<=h.length-a.trendPoints;m++){const y=h.slice(m,m+a.trendPoints).map(v=>v.idx),S=y.map(v=>d[v]);if(!S.every(v=>Pe(v.value)))continue;let M=!0,w=!0;for(let v=1;v<S.length&&(S[v].value>S[v-1].value||(M=!1),S[v].value<S[v-1].value||(w=!1),!(!M&&!w));v++);M&&y.forEach(v=>d[v].trendUp=!0),w&&y.forEach(v=>d[v].trendDown=!0)}}if(a.trendAcrossPartitions){if(f){const h=d.some(m=>(m.singlePointUp||m.twoSigmaUp||m.shiftUp||m.trendUp)&&(m.singlePointDown||m.twoSigmaDown||m.shiftDown||m.trendDown));if(s===En.Always||s===En.AutoWhenConflict&&h){const m=Uf(d),y=Vf(m,{metricImprovement:n,strategy:a.trendSegmentationStrategy}),S=new Set,M=new Set;for(const w of y)for(let v=w.start;v<=w.end;v++)w.trendDirection===ll.Up?S.add(v):M.add(v);d.forEach((w,v)=>{w.trendUp=S.has(v)?w.trendUp:!1,w.trendDown=M.has(v)?w.trendDown:!1,a.trendDominatesHighlightedWindow&&(S.has(v)?(w.singlePointDown=!1,w.twoSigmaDown=!1,w.shiftDown=!1):M.has(v)&&(w.singlePointUp=!1,w.twoSigmaUp=!1,w.shiftUp=!1))})}}for(const h of d){if(h.ghost||!Pe(h.value)||h.mean===null||n===ze.Neither)continue;const{aligned:m,opposite:y}=zf(h,n);h.specialCauseImprovementValue=m?h.value:null,h.specialCauseConcernValue=y?h.value:null,Wf(h,n,a.metricConflictRule,a.preferImprovementWhenConflict===!0,a.conflictStrategy,a.ruleHierarchy,a.preferTrendWhenConflict===!0)}}return{rows:d}}function dl(e,t){const n=ul(e),r=cl(n.rows,{metricImprovement:e.metricImprovement,trendVisualMode:t?.trendVisualMode??Jr.Ungated,enableNeutralNoJudgement:t?.enableNeutralNoJudgement??!0}),i=t?.boundaryWindows;if(!i||i.mode!=="RecalcCrossing")return{rows:n.rows,visuals:r};const a=i.directionOverride??e.metricImprovement,s=W1(n.rows,a,i),l=r.map((u,c)=>{const d=s[c];if(u===xt.Common||u===xt.NoJudgement){if(d===xt.Improvement)return xt.Improvement;if(d===xt.Concern)return xt.Concern}return u});return{rows:n.rows,visuals:l}}var Yf=(e=>(e.None="none",e.RecalcCrossingShift="recalc-crossing-shift",e.RecalcCrossingTrend="recalc-crossing-trend",e.RecalcCrossingTwoSigma="recalc-crossing-two-sigma",e.RecalculationsRecalculated="recalculations-recalculated",e.BaselinesRecalculated="baselines-recalculated",e))(Yf||{});function U1(e,t,n){const r=n?.trendVisualMode??Jr.Ungated,i=n?.enableNeutralNoJudgement??!0,a=Array.isArray(e.data)?e.data.map((f,p)=>f?.baseline?p:-1).filter(f=>f>=0):[];let s;switch(t){case"recalc-crossing-shift":{s={mode:"RecalcCrossing",preWindow:2,postWindow:4,prePolarity:"Same",boundaryIndices:a};break}case"recalc-crossing-trend":{s={mode:"RecalcCrossing",preWindow:1,postWindow:5,prePolarity:"Same",boundaryIndices:a};break}case"recalc-crossing-two-sigma":{s={mode:"RecalcCrossing",preWindow:1,postWindow:1,prePolarity:"Same",boundaryIndices:a};break}case"baselines-recalculated":s={mode:"RecalcCrossing",preWindow:0,postWindow:0,prePolarity:"Same",directionOverride:e.metricImprovement,boundaryIndices:a};break;case"recalculations-recalculated":case"none":default:s=void 0}const{rows:l,visuals:u}=dl(e,{trendVisualMode:r,enableNeutralNoJudgement:i,boundaryWindows:s});let c=u.slice(),d=a.length?a[0]:-1;if(d<0){for(let f=1;f<l.length;f++)if(l[f].partitionId!==l[f-1].partitionId){d=f;break}}return(t==="recalculations-recalculated"||t==="baselines-recalculated")&&d>0&&(c[d-1]=xt.Common),{rows:l,visuals:c}}const qf=Object.freeze({minimumPoints:13,shiftPoints:6,trendPoints:6,excludeMovingRangeOutliers:!1,metricConflictRule:qr.Improvement,trendAcrossPartitions:!0,twoSigmaIncludeAboveThree:!0,chartLevelEligibility:!0});function V1(e){return{...qf,...e??{}}}function G1(e){const{rows:t}=ul(e),n=dl(e);return{rows:t,visuals:n.visuals}}var Zr=(e=>(e.Slope="slope",e.Neutral="neutral",e.Extend="extend",e))(Zr||{}),fl=(e=>(e.Ungated="ungated",e.Gated="gated",e))(fl||{});function Y1(e){const{ui:t,input:n,engine:r,data:i,targets:a,baselines:s,ghosts:l,settings:u,chartType:c,metricImprovement:d,gradientSequences:f,sequenceTransition:p,processLineWidth:g,showPartitionMarkers:b,showWarningsPanel:h,warningsFilter:m,enableNeutralNoJudgement:y,showTrendGatingExplanation:S,trendVisualMode:M,alwaysShowZeroY:w,alwaysShowHundredY:v,percentScale:D,showTrendStartMarkers:N,showFirstFavourableCrossMarkers:k,showTrendBridgeOverlay:x,showSignalsInspector:I,onSignalFocus:j,showIcons:C,showEmbeddedIcon:$,embeddedIconVariant:T,embeddedIconRunLength:F,showFocusIndicator:P}=e;process.env.NODE_ENV!=="production"&&(!n&&(a!==void 0||s!==void 0||l!==void 0)&&console.warn("SPCChart: Flat input props (targets/baselines/ghosts) are deprecated. Use input={ data, targets, baselines, ghosts } instead."),!r&&u!==void 0&&console.warn("SPCChart: Flat engine prop 'settings' is deprecated. Use engine={ chartType, metricImprovement, settings }."));const L=n?.data??i??[],te=n?.targets??a,Y=n?.baselines??s,O=n?.ghosts??l,H=r?.chartType??c??Ct.XmR,z=r?.metricImprovement??d??Ae.Neither,ie=r?.settings??u,V=t?.axes?.alwaysShowZeroY??w??!0,ce=t?.axes?.alwaysShowHundredY??v??!1,Ce=t?.axes?.percentScale??D??!1,he=t?.visuals?.gradientSequences??f??!1,pe=t?.visuals?.sequenceTransition??p??"slope",ee=t?.visuals?.processLineWidth??g??2,ae=t?.visuals?.trend?.visualMode??M??"ungated",me=t?.visuals?.trend?.showGatingExplanation??S??!0,G=t?.visuals?.rules?.enableNeutralNoJudgement??y??!0,de=t?.visuals?.rules?.enableRules??e.enableRules??!0,A=t?.overlays?.partitionMarkers??b??!1,R=t?.overlays?.trendStartMarkers??N??!1,Z=t?.overlays?.firstFavourableCrossMarkers??k??!1,le=t?.overlays?.trendBridge??x??!1,ue=t?.inspector?.show??I??!1,ge=t?.inspector?.onFocus??j,fe=t?.warnings?.show??h??!1,U=t?.warnings?.filter??m,W=t?.icons?.show??C??!1,K=t?.icons?.embedded?.show??$??!0,J=t?.icons?.embedded?.variant??T??Xn.Classic,E=t?.icons?.embedded?.runLength??F,X=t?.overlays?.focusIndicator??P??!0;return{effData:L,effTargets:te,effBaselines:Y,effGhosts:O,effChartTypeCore:H,effMetricImprovementCore:z,effEngineSettings:ie,effAlwaysShowZeroY:V,effAlwaysShowHundredY:ce,effPercentScale:Ce,effGradientSequences:he,effSequenceTransition:pe,effProcessLineWidth:ee,effTrendVisualMode:ae,effShowTrendGatingExplanation:me,effEnableNeutralNoJudgement:G,effEnableRules:de,effShowPartitionMarkers:A,effShowTrendStartMarkers:R,effShowFirstFavourableCrossMarkers:Z,effShowTrendBridgeOverlay:le,effShowSignalsInspector:ue,effOnSignalFocus:ge,effShowWarningsPanel:fe,effWarningsFilter:U,effShowIcons:W,effShowEmbeddedIcon:K,effEmbeddedIconVariant:J,effEmbeddedIconRunLength:E,effShowFocusIndicator:X}}let q1=0;const Xf=({data:e,ariaLabel:t="SPC chart",height:n=260,showZones:r=!0,showPoints:i=!0,announceFocus:a=!1,className:s,unit:l,highlightOutOfControl:u=!0,chartType:c=Ct.XmR,metricImprovement:d=Ae.Neither,enableRules:f=!0,showIcons:p=!1,showEmbeddedIcon:g=!0,embeddedIconVariant:b=Xn.Classic,embeddedIconRunLength:h,targets:m,baselines:y,ghosts:S,settings:M,narrationContext:w,gradientSequences:v=!1,sequenceTransition:D=Zr.Slope,processLineWidth:N=2,showWarningsPanel:k=!1,warningsFilter:x,enableNeutralNoJudgement:I=!0,showTrendGatingExplanation:j=!0,trendVisualMode:C=fl.Ungated,disableTrendSideGating:$,source:T,alwaysShowZeroY:F=!0,alwaysShowHundredY:P=!1,percentScale:L=!1,showPartitionMarkers:te=!1,showTrendStartMarkers:Y=!1,showFirstFavourableCrossMarkers:O=!1,showTrendBridgeOverlay:H=!1,showSignalsInspector:z=!1,onSignalFocus:ie,visualsScenario:V=Yf.None,showFocusIndicator:ce=!0,visualsEngineSettings:Ce,ui:he,input:pe,engine:ee})=>{const ae=q.useCallback(De=>String(De).replace(/^spc_warning_code\.?/i,"").replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(Be=>Be.length?Be[0].toUpperCase()+Be.slice(1):Be).join(" "),[]),me=q.useCallback(De=>String(De).replace(/[_\-]+/g," ").trim().split(" ").filter(Boolean).map(ke=>ke.length?ke[0].toUpperCase()+ke.slice(1):ke).join(" "),[]);process.env.NODE_ENV!=="production"&&$!==void 0&&console.warn("SPCChart: 'disableTrendSideGating' prop is deprecated and ignored (trend side gating always enabled).");const{effData:G,effTargets:de,effBaselines:A,effGhosts:R,effChartTypeCore:Z,effMetricImprovementCore:le,effEngineSettings:ue,effAlwaysShowZeroY:ge,effAlwaysShowHundredY:fe,effPercentScale:U,effGradientSequences:W,effSequenceTransition:K,effProcessLineWidth:J,effTrendVisualMode:E,effShowTrendGatingExplanation:X,effEnableNeutralNoJudgement:ne,effEnableRules:re,effShowPartitionMarkers:Q,effShowTrendStartMarkers:oe,effShowFirstFavourableCrossMarkers:be,effShowTrendBridgeOverlay:_e,effShowSignalsInspector:xe,effOnSignalFocus:je,effShowWarningsPanel:ye,effWarningsFilter:Le,effShowIcons:Ve,effShowEmbeddedIcon:it,effEmbeddedIconVariant:Ge,effEmbeddedIconRunLength:St,effShowFocusIndicator:Dn}=Y1({data:e,targets:m,baselines:y,ghosts:S,settings:M,chartType:c,metricImprovement:d,enableRules:f,gradientSequences:v,sequenceTransition:D,processLineWidth:N,showPartitionMarkers:te,showWarningsPanel:k,warningsFilter:x,enableNeutralNoJudgement:I,showTrendGatingExplanation:j,trendVisualMode:C,alwaysShowZeroY:F,alwaysShowHundredY:P,percentScale:L,showTrendStartMarkers:Y,showFirstFavourableCrossMarkers:O,showTrendBridgeOverlay:H,showSignalsInspector:z,onSignalFocus:ie,showIcons:p,showEmbeddedIcon:g,embeddedIconVariant:b,embeddedIconRunLength:h,showFocusIndicator:ce,ui:he,input:pe,engine:ee}),jt=q.useMemo(()=>G.map((De,ke)=>({x:De.x,value:De.y,target:de?.[ke]??void 0,baseline:A?.[ke]??void 0,ghost:R?.[ke]??void 0})),[G,de,A,R]),an=q.useMemo(()=>{try{const De=ue?.minimumPointsPartition??ue?.minimumPoints,ke={};typeof De=="number"&&!isNaN(De)&&(ke.minimumPoints=De,jt.filter(se=>!se.ghost&&typeof se.value=="number").length>=De&&(ke.chartLevelEligibility=!0)),ue?.enableFourOfFiveRule!=null&&(ke.enableFourOfFiveRule=!!ue.enableFourOfFiveRule),Ce&&Object.assign(ke,Ce);const Be=tt=>{switch(tt){case Ct.XmR:return Qt.XmR;case Ct.T:return Qt.T;case Ct.G:return Qt.G;default:return Qt.XmR}},Qe=tt=>{switch(tt){case Ae.Up:return ze.Up;case Ae.Down:return ze.Down;default:return ze.Neither}},Me={chartType:Be(Z),metricImprovement:Qe(le),data:jt,settings:Object.keys(ke).length?ke:void 0},{visuals:Pt}=U1(Me,V,{trendVisualMode:E===fl.Ungated?Jr.Ungated:Jr.Gated,enableNeutralNoJudgement:ne});return Pt||[]}catch{return[]}},[jt,Z,le,E,ne,ue,V,Ce]),He=q.useMemo(()=>{try{const De=ue?.minimumPointsPartition??ue?.minimumPoints,ke={};typeof De=="number"&&!isNaN(De)&&(ke.minimumPoints=De,jt.filter(Se=>!Se.ghost&&typeof Se.value=="number").length>=De&&(ke.chartLevelEligibility=!0)),ue?.enableFourOfFiveRule!=null&&(ke.enableFourOfFiveRule=!!ue.enableFourOfFiveRule),Ce&&Object.assign(ke,Ce);const Be=se=>{switch(se){case Ct.XmR:return Qt.XmR;case Ct.T:return Qt.T;case Ct.G:return Qt.G;default:return Qt.XmR}},Qe=se=>{switch(se){case Ae.Up:return ze.Up;case Ae.Down:return ze.Down;default:return ze.Neither}},Me={chartType:Be(Z),metricImprovement:Qe(le),data:jt,settings:Object.keys(ke).length?ke:void 0},{rows:Pt}=G1(Me),tt=se=>{switch(se){case Ke.ImprovementHigh:case Ke.ImprovementLow:return $e.Improvement;case Ke.ConcernHigh:case Ke.ConcernLow:return $e.Concern;case Ke.NeitherHigh:case Ke.NeitherLow:return $e.Neither;case Ke.CommonCause:default:return $e.Neither}};return Pt.map((se,Se)=>({data:{value:se.value,ghost:!!se.ghost},partition:{id:se.partitionId},limits:{mean:se.mean,ucl:se.upperProcessLimit,lcl:se.lowerProcessLimit,oneSigma:{upper:se.upperOneSigma,lower:se.lowerOneSigma},twoSigma:{upper:se.upperTwoSigma,lower:se.lowerTwoSigma}},rules:{singlePoint:{up:!!se.singlePointUp,down:!!se.singlePointDown},twoOfThree:{up:!!se.twoSigmaUp,down:!!se.twoSigmaDown},fourOfFive:{up:!!se.fourOfFiveUp,down:!!se.fourOfFiveDown},shift:{up:!!se.shiftUp,down:!!se.shiftDown},trend:{up:!!se.trendUp,down:!!se.trendDown}},classification:{variation:tt(se.variationIcon),neutralSpecialCauseValue:se.variationIcon===Ke.NeitherHigh||se.variationIcon===Ke.NeitherLow?se.specialCauseImprovementValue??se.specialCauseConcernValue??1:null,assurance:void 0},target:jt[Se]?.target??null}))}catch{return null}},[jt,Z,le,ue,Ce])||null,Xt=(He||[]).slice().reverse().find(De=>De.limits.mean!=null),di=Xt?.limits.mean??null,ar=q.useMemo(()=>{const De=[];try{const ke=He,Be=ue?.minimumPoints??13,Qe=ue?.minimumPointsPartition??12;if(ke&&ke.length){const Me=ke.filter(tt=>!tt.data.ghost&&tt.data.value!=null).length;Me<Be&&De.push({code:fs.InsufficientPointsGlobal,severity:pn.Warning,category:ds.Data,message:"Not enough non-ghost points to compute stable limits/icons.",context:{nonGhostCount:Me,minimumPoints:Be}});const Pt=new Map;for(const tt of ke){const se=tt.partition.id??0,Se=Pt.get(se)||{size:0,nonGhost:0};Se.size+=1,!tt.data.ghost&&tt.data.value!=null&&(Se.nonGhost+=1),Pt.set(se,Se)}for(const[tt,se]of Pt)se.nonGhost>0&&se.nonGhost<Qe&&De.push({code:fs.InsufficientPointsPartition,severity:pn.Warning,category:ds.Partition,message:"A partition/baseline segment has too few points for recommended stability.",context:{partitionId:tt,nonGhostCount:se.nonGhost,minimumPointsPartition:Qe}})}}catch{}return De},[He,ue?.minimumPoints,ue?.minimumPointsPartition]),zn=q.useMemo(()=>ar.length?Le?ar.filter(De=>!(Le.severities&&De.severity&&!Le.severities.includes(De.severity)||Le.categories&&De.category&&!Le.categories.includes(De.category)||Le.codes&&!Le.codes.includes(De.code))):ar:[],[ar,Le]),[fi,hi]=q.useState(""),sr=q.useRef("");q.useEffect(()=>{if(!ye){sr.current!==""&&(sr.current="",hi(""));return}const De=zn.length;if(!De){const Me="Diagnostics: no warnings.";Me!==sr.current&&(sr.current=Me,hi(Me));return}const ke={error:zn.filter(Me=>Me.severity===pn.Error).length,warning:zn.filter(Me=>Me.severity===pn.Warning).length,info:zn.filter(Me=>Me.severity===pn.Info).length},Be=[];ke.error&&Be.push(`${ke.error} error${ke.error===1?"":"s"}`),ke.warning&&Be.push(`${ke.warning} warning${ke.warning===1?"":"s"}`),ke.info&&Be.push(`${ke.info} info`);const Qe=`Diagnostics updated: ${De} warning${De===1?"":"s"} (${Be.join(", ")}).`;Qe!==sr.current&&(sr.current=Qe,hi(Qe))},[ye,zn]);const Mr=Xt?.limits.ucl??null,Ir=Xt?.limits.lcl??null,Wn=Xt?.limits.oneSigma.upper??null,Sa=Xt?.limits.oneSigma.lower??null,or=Xt?.limits.twoSigma.upper??null,Kt=Xt?.limits.twoSigma.lower??null,lr=di!=null&&Wn!=null?Math.abs(Wn-di):0,mt=q.useMemo(()=>[{id:"process",data:G,color:"#A6A6A6"}],[G]),lt=q.useMemo(()=>{if(U){const Me=G.map(se=>se.y),Pt=Math.max(100,...Me),tt=Math.min(0,...Me);return[tt<0?tt:0,Pt>100?Pt:100]}const ke=[...G.map(Me=>Me.y)];if([di,Mr,Ir,Wn,Sa,or,Kt].forEach(Me=>{Me!=null&&ke.push(Me)}),de&&de.forEach(Me=>{typeof Me=="number"&&!isNaN(Me)&&ke.push(Me)}),!ke.length)return;let Be=Math.min(...ke),Qe=Math.max(...ke);return ge&&(Be=Math.min(0,Be)),fe&&(Qe=Math.max(100,Qe)),[Be,Qe]},[G,di,Mr,Ir,Wn,Sa,or,Kt,de,ge,fe,U]),Pr=q.useMemo(()=>{const De=ke=>{const Be=ke.filter(Me=>typeof Me=="number"&&!isNaN(Me));if(!Be.length)return null;const Qe=Be[0];return Be.every(Me=>Me===Qe)?Qe:null};if(He&&He.length){const ke=De(He.map(Be=>Be.target));if(ke!=null)return ke}return de&&de.length?De(de):null},[He,de]),Yc=q.useMemo(()=>{const De=G.map(ke=>ke.x);return $f({values:G.map(ke=>ke.y),dates:De,providedUnit:l||w?.measureUnit,percentHeuristic:"0-1",autoValue:!1,autoDelta:!1,autoMetadata:!1})},[G,l,w?.measureUnit]),pi=l??w?.measureUnit??Yc.unit,sn=q.useMemo(()=>pi?{...w||{},measureUnit:pi}:w,[w,pi]),qc=q.useMemo(()=>{if(!He)return[];const De=[];for(let ke=1;ke<He.length;ke++)He[ke].partition.id!==He[ke-1].partition.id&&De.push(ke);return De},[He]),Xc=q.useMemo(()=>{if(!it||!He?.length)return null;const De=He,ke=ue?.minimumPoints??13;if(De.filter(Re=>!Re.data.ghost&&Re.data.value!=null).length<ke)return null;let Qe=-1;for(let Re=De.length-1;Re>=0;Re--){const Ft=De[Re];if(Ft&&Ft.data.value!=null&&!Ft.data.ghost){Qe=Re;break}}if(Qe===-1)return null;const Me=De[Qe],Pt=Me.classification?.variation,tt=Pt,se=Me.classification?.assurance,Se=tt===$e.Neither&&!!Me.classification?.neutralSpecialCauseValue,ve=se===ct.Pass?qn.Pass:se===ct.Fail?qn.Fail:qn.Uncertain;let Ie;if(tt===$e.Suppressed){const Re=!!Me.rules.singlePoint.up,Ft=!!Me.rules.singlePoint.down;le===Ae.Up?Re?Ie=Fe.Higher:Ft&&(Ie=Fe.Lower):le===Ae.Down?Ft?Ie=Fe.Lower:Re&&(Ie=Fe.Higher):Ie=Fe.Higher}else if(tt===$e.Neither&&Se){const Re=Me.rules.singlePoint.up||Me.rules.twoOfThree.up||Me.rules.fourOfFive.up||Me.rules.shift.up||Me.rules.trend.up,Ft=Me.rules.singlePoint.down||Me.rules.twoOfThree.down||Me.rules.fourOfFive.down||Me.rules.shift.down||Me.rules.trend.down;Re&&!Ft?Ie=Fe.Higher:Ft&&!Re?Ie=Fe.Lower:Ie=Fe.Higher}let qe;le===Ae.Up?qe=nt.HigherIsBetter:le===Ae.Down?qe=nt.LowerIsBetter:qe=nt.ContextDependent;const We=80;return o.jsxs("div",{style:{display:"flex",gap:12,marginRight:16},children:[o.jsx("div",{className:"fdp-spc-chart__embedded-icon","data-variation":String(tt),"data-trend-raw":Ie?String(Ie):"none","data-trend":Ie?String(Ie):"none","data-polarity":String(qe??"unknown"),style:{width:We,height:We},children:o.jsx(us,{dropShadow:!1,data:{variationIcon:Pt,improvementDirection:le,polarity:qe,specialCauseNeutral:Se,highSideSignal:Me.rules.singlePoint.up||Me.rules.twoOfThree.up||Me.rules.fourOfFive.up||Me.rules.shift.up||Me.rules.trend.up,lowSideSignal:Me.rules.singlePoint.down||Me.rules.twoOfThree.down||Me.rules.fourOfFive.down||Me.rules.shift.down||Me.rules.trend.down,...Ie?{trend:Ie}:{}},letterMode:le===Ae.Neither?Li.Direction:Li.Polarity,size:We,variant:Ge,runLength:Ge===Xn.TriangleWithRun?St:void 0})}),o.jsx("div",{className:"fdp-spc-chart__embedded-assurance-icon","data-assurance":String(se),style:{width:We,height:We},children:o.jsx(hs,{status:ve,size:We,dropShadow:!1})})]},`embedded-icon-${Qe}`)},[it,He,le,ue?.minimumPoints,Ge,St]);return o.jsxs("div",{className:s?`fdp-spc-chart-wrapper ${s}`:"fdp-spc-chart-wrapper",children:[it&&o.jsx("div",{className:"fdp-spc-chart__top-row",style:{display:"flex",justifyContent:"flex-end",marginBottom:4},children:Xc}),o.jsx(nf,{height:n,ariaLabel:t,margin:{bottom:48,left:56,right:16,top:12},className:void 0,children:o.jsx(rf,{series:mt,yDomain:lt,children:o.jsx(X1,{series:mt,showPoints:i,announceFocus:a,limits:{mean:di,ucl:Mr,lcl:Ir,sigma:lr,onePos:Wn,oneNeg:Sa,twoPos:or,twoNeg:Kt},showZones:r,highlightOutOfControl:u,engineRows:He,uniformTarget:Pr,visualCategories:an,enableRules:re,showIcons:Ve,narrationContext:sn,gradientSequences:W,sequenceTransition:K,processLineWidth:J,effectiveUnit:pi,partitionMarkers:Q?qc:[],ariaLabel:t,enableNeutralNoJudgement:ne,showTrendGatingExplanation:X,metricImprovement:le,showTrendStartMarkers:oe,showFirstFavourableCrossMarkers:be,showTrendBridgeOverlay:_e,showSignalsInspector:xe,onSignalFocus:je,showFocusIndicator:Dn})})}),T&&o.jsx("div",{className:"fdp-spc-chart__source","aria-label":"Chart data source",children:typeof T=="string"?o.jsxs("small",{children:["Source: ",T]}):T}),ye&&fi&&o.jsx("div",{"data-testid":"spc-diagnostics-live","aria-live":"polite",style:{position:"absolute",width:1,height:1,padding:0,margin:0,overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",border:0},children:fi}),ye&&zn.length>0&&o.jsxs("div",{className:"fdp-spc-chart__warnings",role:"region","aria-label":"SPC diagnostics",children:[o.jsx("p",{className:"fdp-spc-chart__warnings-heading",children:"Diagnostics"}),o.jsx(dn,{firstCellIsHeader:!1,panel:!1,responsive:!1,head:[{text:"Severity"},{text:"Category"},{text:"Code"},{text:"Details"}],rows:zn.map(De=>{let ke="grey";return De.severity===pn.Error?ke="red":De.severity===pn.Warning?ke="orange":De.severity===pn.Info&&(ke="blue"),[{node:o.jsx(Ye,{color:ke,text:(De.severity?String(De.severity):"Info").replace(/^[a-z]/,Be=>Be.toUpperCase())}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--severity"},{node:De.category?o.jsx(Ye,{color:"purple",text:me(De.category)}):o.jsx("span",{className:"fdp-spc-chart__warning-empty",children:"â€“"}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--category"},{node:o.jsx(Ye,{color:"grey",text:ae(De.code)}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--code"},{node:o.jsxs("div",{className:"fdp-spc-chart__warning-message",children:[o.jsx("span",{children:De.message}),De.context&&Object.keys(De.context).length>0&&o.jsxs("details",{className:"fdp-spc-chart__warning-context",style:{marginTop:4},children:[o.jsx("summary",{children:"context"}),o.jsx("pre",{children:JSON.stringify(De.context,null,2)})]})]}),classes:"fdp-spc-chart__warning-cell fdp-spc-chart__warning-cell--message"}]}),classes:"fdp-spc-chart__warnings-table-wrapper",tableClasses:"fdp-spc-chart__warnings-table"})]})]})},X1=({series:e,showPoints:t,announceFocus:n,limits:r,showZones:i,highlightOutOfControl:a,engineRows:s,enableRules:l,showIcons:u,narrationContext:c,gradientSequences:d,sequenceTransition:f,processLineWidth:p,effectiveUnit:g,partitionMarkers:b,ariaLabel:h,metricImprovement:m,enableNeutralNoJudgement:y=!0,showTrendGatingExplanation:S=!0,showTrendStartMarkers:M=!1,showFirstFavourableCrossMarkers:w=!1,showTrendBridgeOverlay:v=!1,showSignalsInspector:D=!1,onSignalFocus:N,visualCategories:k,uniformTarget:x,showFocusIndicator:I=!1})=>{const j=mr(),C=Yn();if(!j)return null;const{xScale:$,yScale:T}=j,F=q.useRef("spc-seq-"+ ++q1),P=Ln(),L=e[0]?.data||[],te=q.useMemo(()=>{if(!r.ucl&&!r.lcl)return new Set;const A=new Set;return L.forEach((R,Z)=>{typeof r.ucl=="number"&&R.y>r.ucl&&A.add(Z),typeof r.lcl=="number"&&R.y<r.lcl&&A.add(Z)}),A},[r.ucl,r.lcl,L]),Y=q.useMemo(()=>{if(!s||!s.length)return null;const A=[];return s.forEach((R,Z)=>{const le=R.classification.variation===$e.Concern||R.classification.variation===$e.Improvement||!!R.classification.neutralSpecialCauseValue,ue=!!R.rules.singlePoint.up||!!R.rules.twoOfThree.up||!!R.rules.fourOfFive.up||!!R.rules.shift.up||!!R.rules.trend.up,ge=!!R.rules.singlePoint.down||!!R.rules.twoOfThree.down||!!R.rules.fourOfFive.down||!!R.rules.shift.down||!!R.rules.trend.down;A[Z]={variation:R.classification.variation,assurance:R.classification.assurance,special:le,concern:R.classification.variation===$e.Concern,improvement:R.classification.variation===$e.Improvement,trendUp:!!R.rules.trend.up,trendDown:!!R.rules.trend.down,upAny:ue,downAny:ge,neutralSpecial:!!R.classification.neutralSpecialCauseValue,shiftUp:!!R.rules.shift.up,shiftDown:!!R.rules.shift.down,twoOfThreeUp:!!R.rules.twoOfThree.up,twoOfThreeDown:!!R.rules.twoOfThree.down,fourOfFiveUp:!!R.rules.fourOfFive.up,fourOfFiveDown:!!R.rules.fourOfFive.down,partitionId:R.partition.id??null}}),A},[s]),O=q.useMemo(()=>(k||[]).map(A=>A===xt.Improvement?bt.Improvement:A===xt.Concern?bt.Concern:A===xt.NoJudgement?bt.NoJudgement:bt.Common),[k]),H=q.useMemo(()=>!d||!O.length?[]:P1(O,!0),[d,O,h]),z=q.useMemo(()=>L.map(A=>$(A.x instanceof Date?A.x:new Date(A.x))),[L,$]),ie=$.range()[1],V=q.useMemo(()=>{if(!s||!s.length)return null;let A=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY;if(s.forEach((W,K)=>{W.rules.trend.up&&(A=Math.min(A,K)),W.rules.trend.down&&(R=Math.min(R,K))}),!Number.isFinite(A)&&!Number.isFinite(R))return null;const Z=A<=R,le=Z?"up":"down",ue=Z?A:R,ge=W=>m==null||m===Ae.Neither||W==null||typeof W.data.value!="number"||typeof W.limits.mean!="number"?!1:le==="up"?m===Ae.Up?W.data.value>W.limits.mean:W.data.value<W.limits.mean:m===Ae.Down?W.data.value<W.limits.mean:W.data.value>W.limits.mean;let fe=null;for(let W=ue;W<s.length;W++){const K=s[W];if(!(Z?!!K.rules.trend.up:!!K.rules.trend.down))break;if(ge(K)){fe=W;break}}let U=!1;if(fe!=null){let W=0;for(let K=fe;K<s.length;K++){const J=s[K];if(!(Z?!!J.rules.trend.up:!!J.rules.trend.down))break;ge(J)&&W++}U=W>=2}return{direction:le,detectedAt:ue,firstFavourableCrossAt:fe,persistedAcrossMean:U}},[s,m]),ce=q.useMemo(()=>{if(!s||!s.length)return null;const A=R=>{const Z=[];let le=null,ue=null;for(let ge=0;ge<s.length;ge++){const fe=s[ge],U=R(fe),W=typeof U=="number"&&!isNaN(U)?U:null;if(W==null){le!==null&&ue!=null&&(Z.push({x1:z[le],x2:z[ge-1],y:T(ue)}),le=null,ue=null);continue}if(le===null){le=ge,ue=W;continue}ue!=null&&Math.abs(W-ue)<=1e-9||(ue!=null&&Z.push({x1:z[le],x2:z[ge-1],y:T(ue)}),le=ge,ue=W)}return le!==null&&ue!=null&&Z.push({x1:z[le],x2:z[s.length-1],y:T(ue)}),Z};return{mean:A(R=>R.limits.mean??null),ucl:A(R=>R.limits.ucl??null),lcl:A(R=>R.limits.lcl??null),onePos:A(R=>R.limits.oneSigma.upper??null),oneNeg:A(R=>R.limits.oneSigma.lower??null),twoPos:A(R=>R.limits.twoSigma.upper??null),twoNeg:A(R=>R.limits.twoSigma.lower??null)}},[s,z,T]),Ce=q.useMemo(()=>H.length?o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:`${F.current}-grad-common`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.28}),o.jsx("stop",{offset:"70%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.12}),o.jsx("stop",{offset:"100%",stopColor:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stopOpacity:.045})]}),H.map((A,R)=>{const Z=`${F.current}-grad-${R}`;let le,ue=.28,ge=.12,fe=.045;switch(A.category){case bt.Concern:le="var(--nhs-fdp-color-data-viz-spc-concern, #E46C0A)",ue=.28,ge=.12,fe=.045;break;case bt.Improvement:le="var(--nhs-fdp-color-data-viz-spc-improvement, #00B0F0)",ue=.26,ge=.11,fe=.045;break;case bt.NoJudgement:le="var(--nhs-fdp-color-data-viz-spc-no-judgement, #490092)",ue=.26,ge=.11,fe=.045;break;default:le="var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)"}return o.jsxs("linearGradient",{id:Z,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:le,stopOpacity:ue}),o.jsx("stop",{offset:"70%",stopColor:le,stopOpacity:ge}),o.jsx("stop",{offset:"100%",stopColor:le,stopOpacity:fe})]},Z)})]}):null,[H]),he=q.useMemo(()=>{if(!H.length)return null;const[A]=T.domain(),R=T(A),Z=H.map((le,ue)=>{const{start:ge,end:fe,category:U}=le;if(ge<0||fe>=z.length||ge>fe)return null;const W=z[ge],K=z[fe];let J="";if(U===bt.Common){const E=ue>0?H[ue-1]:null,X=ue<H.length-1?H[ue+1]:null,ne=E?z[E.end]:0,re=E?T(L[E.end].y):R,Q=X?z[X.start]:ie,oe=X?T(L[X.start].y):R;J=`M ${ne} ${R}`,J+=` L ${ne} ${re}`;for(let be=ge;be<=fe;be++)J+=` L ${z[be]} ${T(L[be].y)}`;J+=` L ${Q} ${oe}`,J+=` L ${Q} ${R} Z`}else{const E=ue>0?H[ue-1]:null,X=ue<H.length-1?H[ue+1]:null,ne=E&&E.category!==bt.Common,re=X&&X.category!==bt.Common,Q=T(L[ge].y),oe=T(L[fe].y);let be=W,_e=K;if(ne){const xe=z[E.end],je=T(L[E.end].y),ye=L[ge].y-L[E.end].y;f===Zr.Slope&&ye>0?(J=`M ${xe} ${je} L ${W} ${Q}`,be=xe):(J=`M ${W} ${R} L ${W} ${Q}`,be=W)}else J=`M ${W} ${R} L ${W} ${Q}`;for(let xe=ge+1;xe<=fe;xe++)J+=` L ${z[xe]} ${T(L[xe].y)}`;if(J+=` L ${K} ${oe}`,re){const xe=z[X.start],je=T(L[X.start].y),ye=L[X.start].y-L[fe].y;(f===Zr.Slope&&ye<=0||f===Zr.Extend)&&(J+=` L ${xe} ${je}`,_e=xe)}if(J+=` L ${_e} ${R}`,J+=` L ${be} ${R} Z`,f===Zr.Neutral&&ne){const xe=z[E.end],je=T(L[E.end].y),ye=o.jsx("path",{d:`M ${xe} ${R} L ${xe} ${je} L ${W} ${Q} L ${W} ${R} Z`,fill:`url(#${F.current}-grad-common)`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-wedge-${ue}`);return o.jsxs("g",{children:[ye,o.jsx("path",{d:J,fill:`url(#${F.current}-grad-${ue})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${ue}`)]},`seq-group-${ue}`)}}return o.jsx("path",{d:J,fill:`url(#${F.current}-grad-${ue})`,stroke:"none",className:"fdp-spc__sequence-bg","aria-hidden":"true"},`seq-area-${ue}`)}).filter(Boolean);return o.jsx("g",{className:"fdp-spc__sequence-bgs",children:Z})},[H,z,ie,T,L,f]),pe=q.useMemo(()=>{if(!c?.timeframe&&L.length>=2){const A=L.map(fe=>fe.x instanceof Date?fe.x:new Date(fe.x)),R=new Date(Math.min(...A.map(fe=>fe.getTime()))),Z=new Date(Math.max(...A.map(fe=>fe.getTime()))),le=Math.round((Z.getTime()-R.getTime())/864e5)||0;if(le<14)return`The chart shows a timeframe of ${le+1} days`;const ue=Math.round(le/7);return ue<20?`The chart shows a timeframe of ${ue} weeks`:`The chart shows a timeframe of ${(Z.getFullYear()-R.getFullYear())*12+(Z.getMonth()-R.getMonth())+1} months`}if(c?.timeframe)return`The chart shows a timeframe of ${c.timeframe}`},[c?.timeframe,L]),ee=A=>{const R=A%10,Z=A%100;return R===1&&Z!==11?`${A}st`:R===2&&Z!==12?`${A}nd`:R===3&&Z!==13?`${A}rd`:`${A}th`},ae=A=>`${ee(A.getDate())} ${A.toLocaleString("en-GB",{month:"long"})}, ${A.getFullYear()}`,me=A=>({specialCauseSinglePointUp:!!A?.rules.singlePoint.up,specialCauseSinglePointDown:!!A?.rules.singlePoint.down,specialCauseTwoOfThreeUp:!!A?.rules.twoOfThree.up,specialCauseTwoOfThreeDown:!!A?.rules.twoOfThree.down,specialCauseFourOfFiveUp:!!A?.rules.fourOfFive.up,specialCauseFourOfFiveDown:!!A?.rules.fourOfFive.down,specialCauseShiftUp:!!A?.rules.shift.up,specialCauseShiftDown:!!A?.rules.shift.down,specialCauseTrendUp:!!A?.rules.trend.up,specialCauseTrendDown:!!A?.rules.trend.down}),G=q.useCallback(({index:A,x:R,y:Z})=>{const le=s?.[A],ue=R instanceof Date?R:new Date(R),ge=ae(ue),fe=c?.measureUnit?` ${c.measureUnit}`:"",U=c?.measureName?` ${c.measureName}`:"";if(!le)return`General summary is: ${pe?pe+". ":""}Point ${A+1}, ${ge}, ${Z}${fe}${U}`;const W=os(le.classification?.variation)||"Variation",K=ss(me(le)),J=K.length?` Rules: ${[...new Set(K.map(X=>Gr[X].narration))].join("; ")}.`:" No special cause rules.",E=[];return c?.measureName&&E.push(`Measure: ${c.measureName}.`),c?.datasetContext&&E.push(`${c.datasetContext}.`),c?.organisation&&E.push(`Organisation: ${c.organisation}.`),c?.additionalNote&&E.push(c.additionalNote),["General summary is:",...E,`Point ${A+1} recorded on `,ge+",",`with a value of ${Z} ${fe}${U}`,W+".",J].join(" ").replace(/\s+/g," ").trim()},[s,c,pe]),de=q.useCallback((A,R)=>s?.[A]?G({index:A,seriesId:"process",x:R.x instanceof Date?R.x:new Date(R.x),y:R.y}).replace(/^General summary is:\s*/,"").replace(/^Point \d+\s*/,""):void 0,[s,G]);return o.jsx(pf,{children:o.jsxs("div",{className:"fdp-spc-chart",role:"group","aria-label":"Statistical process control chart","aria-roledescription":"chart",children:[o.jsx("svg",{width:j.xScale.range()[1]+56+16,height:j.yScale.range()[0]+12+48,role:"img",children:o.jsxs("g",{transform:"translate(56,12)",children:[o.jsx(Yo,{type:"x"}),o.jsx(Yo,{type:"y"}),o.jsx(af,{axis:"y"}),Ce,he,b.map((A,R)=>{const Z=L[A];if(!Z)return null;const le=$(Z.x instanceof Date?Z.x:new Date(Z.x));return o.jsx("line",{x1:le,x2:le,y1:0,y2:T.range()[0],stroke:"#555",strokeDasharray:"4 4",strokeWidth:1,"aria-hidden":"true",className:"fdp-spc__partition-marker"},`partition-marker-${R}`)}),ce?.mean.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__cl-group",children:[ce.mean.map((A,R)=>o.jsx("line",{className:"fdp-spc__cl",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y},`mean-${R}`)),ce.mean.map((A,R)=>{if(R===ce.mean.length-1)return null;const Z=ce.mean[R+1];if(!Z||A.y===Z.y)return null;const ue=Math.max(4,Z.x1-A.x2||0)*.5,ge=`M ${A.x2},${A.y} C ${A.x2+ue},${A.y} ${Z.x1-ue},${Z.y} ${Z.x1},${Z.y}`;return o.jsx("path",{className:"fdp-spc__cl fdp-spc__cl-join",d:ge,fill:"none"},`mean-join-${R}`)})]}):null,x!=null&&o.jsx(o.Fragment,{}),ce?.ucl.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--ucl",children:[ce.ucl.map((A,R)=>o.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--ucl",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y,strokeWidth:2},`ucl-${R}`)),ce.ucl.map((A,R)=>{if(R===ce.ucl.length-1)return null;const Z=ce.ucl[R+1];if(!Z||A.y===Z.y)return null;const ue=Math.max(4,Z.x1-A.x2||0)*.5,ge=`M ${A.x2},${A.y} C ${A.x2+ue},${A.y} ${Z.x1-ue},${Z.y} ${Z.x1},${Z.y}`;return o.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--ucl fdp-spc__limit-join",d:ge,fill:"none",strokeWidth:2},`ucl-join-${R}`)})]}):null,ce?.lcl.length?o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__limit-group fdp-spc__limit-group--lcl",children:[ce.lcl.map((A,R)=>o.jsx("line",{className:"fdp-spc__limit fdp-spc__limit--lcl",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y,strokeWidth:2},`lcl-${R}`)),ce.lcl.map((A,R)=>{if(R===ce.lcl.length-1)return null;const Z=ce.lcl[R+1];if(!Z||A.y===Z.y)return null;const ue=Math.max(4,Z.x1-A.x2||0)*.5,ge=`M ${A.x2},${A.y} C ${A.x2+ue},${A.y} ${Z.x1-ue},${Z.y} ${Z.x1},${Z.y}`;return o.jsx("path",{className:"fdp-spc__limit fdp-spc__limit--lcl fdp-spc__limit-join",d:ge,fill:"none",strokeWidth:2},`lcl-join-${R}`)})]}):null,x!=null&&o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__target-group",children:[o.jsx("line",{className:"fdp-spc__target","data-testid":"spc-target-line",x1:0,x2:$.range()[1],y1:T(x),y2:T(x),strokeWidth:2.5}),o.jsxs("text",{"data-testid":"spc-target-label",x:$.range()[0]-7,y:T(x)-5,textAnchor:"start",className:"fdp-spc__target-label",fontSize:12,children:["Target ",x," ",g||c?.measureUnit||""]})]}),i&&ce&&ce.mean.length>0&&o.jsxs(o.Fragment,{children:[ce.onePos.map((A,R)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos1",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y,"aria-hidden":"true",strokeWidth:2},`onePos-${R}`)),ce.oneNeg.map((A,R)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg1",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y,"aria-hidden":"true",strokeWidth:2},`oneNeg-${R}`)),ce.twoPos.map((A,R)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--pos2",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y,"aria-hidden":"true",strokeWidth:2},`twoPos-${R}`)),ce.twoNeg.map((A,R)=>o.jsx("line",{className:"fdp-spc__zone fdp-spc__zone--neg2",x1:A.x1,x2:A.x2,y1:A.y,y2:A.y,"aria-hidden":"true",strokeWidth:2},`twoNeg-${R}`))]}),V&&(M||w||v)&&(()=>{const A=V.detectedAt,R=V.firstFavourableCrossAt,Z=L[A]?$(L[A].x instanceof Date?L[A].x:new Date(L[A].x)):null,le=L[A]?T(L[A].y):null,ue=R!=null&&L[R]?$(L[R].x instanceof Date?L[R].x:new Date(L[R].x)):null,ge=R!=null&&L[R]?T(L[R].y):null;return o.jsxs("g",{"aria-hidden":"true",className:"fdp-spc__trend-overlays",children:[v&&Z!=null&&le!=null&&ue!=null&&ge!=null&&o.jsx("line",{x1:Z,y1:le,x2:ue,y2:ge,stroke:"#888",strokeDasharray:"4 4",strokeWidth:2,children:o.jsx("title",{children:"Trend bridge: start to first favourable-side point"})}),M&&Z!=null&&le!=null&&o.jsx("circle",{cx:Z,cy:le,r:6,fill:"white",stroke:"#555",strokeWidth:2,children:o.jsx("title",{children:"Trend start (run reached N)"})}),w&&ue!=null&&ge!=null&&o.jsx("circle",{cx:ue,cy:ge,r:5,fill:"#555",children:o.jsx("title",{children:"First favourable-side inclusion"})})]})})(),o.jsx(mf,{series:e[0],seriesIndex:0,palette:"categorical",showPoints:!1,focusablePoints:!1,focusIndex:-1,parseX:A=>A.x instanceof Date?A.x:new Date(A.x),smooth:!1,strokeWidth:p}),t&&L.map((A,R)=>{const Z=$(A.x instanceof Date?A.x:new Date(A.x)),le=T(A.y),ue=te.has(R),ge=Y?.[R],fe=O[R],U=fe===bt.Improvement,W=fe===bt.Concern,K=fe===bt.NoJudgement,J=["fdp-spc__point",ue&&a?"fdp-spc__point--ooc":null,l&&W?"fdp-spc__point--sc-concern":null,l&&U?"fdp-spc__point--sc-improvement":null,l&&y&&K?"fdp-spc__point--sc-no-judgement":null,ge?.assurance===ct.Pass?"fdp-spc__point--assurance-pass":null,ge?.assurance===ct.Fail?"fdp-spc__point--assurance-fail":null].filter(Boolean).join(" "),E=P?.focused?.index===R;return o.jsx("circle",{cx:Z,cy:le,r:5,className:J,"data-variation":ge?.variation,"data-assurance":ge?.assurance,"aria-label":h,...E?{"aria-describedby":`spc-tooltip-${R}`}:{}},R)}),I&&D&&P?.focused&&(()=>{const A=P.focused,R=typeof A.index=="number"?A.index:-1;if(R<0||!L[R])return null;const Z=$(L[R].x instanceof Date?L[R].x:new Date(L[R].x)),le=T(L[R].y),ue="var(--nhs-fdp-color-primary-yellow, #ffeb3b)";return o.jsxs("g",{className:"fdp-spc__focus-indicator","aria-hidden":"true",children:[o.jsx("circle",{cx:Z,cy:le,r:7,fill:"none",stroke:ue,strokeWidth:3}),o.jsx("circle",{cx:Z,cy:le,r:5,fill:"#000",stroke:ue,strokeWidth:1.5}),o.jsx("circle",{cx:Z,cy:le,r:2.5,fill:"var(--nhs-fdp-color-data-viz-spc-common-cause, #A6A6A6)",stroke:"#fff",strokeWidth:.5})]})})(),u&&l&&Y&&L.map((A,R)=>{const Z=Y[R];if(!Z||!(Z.concern||Z.improvement))return null;const le=$(A.x instanceof Date?A.x:new Date(A.x)),ue=T(A.y);let ge=ue-10;const fe=12,U=T.range()[0]-4;ge<fe&&(ge=Math.min(ue+16,U));const W=$.range()[1],K=Math.min(Math.max(le,0),W-0);return o.jsx("text",{x:K,y:ge,textAnchor:"middle",className:`fdp-spc__icon ${Z.concern?"fdp-spc__icon--concern":"fdp-spc__icon--improvement"}`,"aria-hidden":"true",children:Z.concern?"!":"â˜…"},`icon-${R}`)}),C&&o.jsx(K1,{width:$.range()[1],height:T.range()[0]}),!D&&o.jsx(Lf,{engineRows:s,limits:{mean:r.mean,sigma:r.sigma},pointDescriber:de,measureName:c?.measureName,measureUnit:c?.measureUnit,dateFormatter:A=>ae(A),enableNeutralNoJudgement:y,showTrendGatingExplanation:S})]})}),D&&o.jsx("div",{style:{marginTop:8},children:o.jsx(F1,{engineRows:s,measureName:c?.measureName,measureUnit:g||c?.measureUnit,onSignalFocus:N})}),n&&o.jsx(Gx,{format:A=>G({...A,x:A.x instanceof Date?A.x:new Date(A.x)})})]})})},K1=({width:e,height:t})=>{const n=Ln();return n?o.jsx("rect",{className:"fdp-spc__interaction-layer",width:e,height:t,fill:"transparent",tabIndex:0,"aria-label":"Interactive chart area. Use arrow keys to move between points.",onMouseMove:r=>{const a=r.currentTarget.getBoundingClientRect(),s=r.clientX-a.left,l=r.clientY-a.top;n.focusNearest(s,l)},onMouseLeave:()=>n.clear(),onKeyDown:r=>{switch(r.key){case"ArrowRight":n.focusNextPoint(),r.preventDefault();break;case"ArrowLeft":n.focusPrevPoint(),r.preventDefault();break;case"ArrowDown":n.focusNextSeries(),r.preventDefault();break;case"ArrowUp":n.focusPrevSeries(),r.preventDefault();break;case"Home":n.focusFirstPoint(),r.preventDefault();break;case"End":n.focusLastPoint(),r.preventDefault();break}},style:{cursor:"crosshair"}}):null},J1=Object.freeze(Object.defineProperty({__proto__:null,AssuranceIcon:ct,AssuranceResult:qn,BaselineSuggestionReason:Zt,ChartType:Ct,Direction:Fe,Icons:Object.freeze(Object.defineProperty({__proto__:null,AssuranceResult:qn,Direction:Fe,MetricPolarity:nt,SPCAssuranceIcon:hs,SPCVariationIcon:us,VariationJudgement:Lt,VariationState:Ne,getVariationColour:al,getVariationTrend:cs},Symbol.toStringTag,{value:"Module"})),ImprovementDirection:Ae,MetricPolarity:nt,PARITY_V26:qf,RULE_METADATA:bf,SPCAssuranceIcon:hs,SPCChart:Xf,SPCTooltipOverlay:Lf,SPCVariationIcon:us,SpcEmbeddedIconVariant:Xn,SpcVisualCategory:xt,SpcWarningCategory:ds,SpcWarningCode:fs,SpcWarningSeverity:pn,VARIATION_COLOR_TOKENS:ln,VariationIcon:$e,VariationJudgement:Lt,VariationState:Ne,buildSpc:Df,buildSpcV26a:ul,buildSpcV26aWithVisuals:dl,computeSpcVisualCategories:cl,extractRuleIds:ss,getVariationColorHex:i1,getVariationColorToken:xf,getVariationColour:al,getVariationTrend:cs,normaliseSpcSettings:jf,normaliseSpcSettingsV2:Gf,ruleGlossary:Gr,variationLabel:os,withParityV26:V1},Symbol.toStringTag,{value:"Module"})),Kf="150ms",Jf="300ms",Zf="500ms",Qf="cubic-bezier(0.4, 0, 1, 1)",eh="cubic-bezier(0, 0, 0.2, 1)",th="cubic-bezier(0.4, 0, 0.2, 1)",nh="cubic-bezier(0.68, -0.55, 0.265, 1.55)",rh="background-color 300ms cubic-bezier(0, 0, 0.2, 1)",ih="box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",ah="border-color 150ms cubic-bezier(0, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0, 0, 0.2, 1)",sh="border-color 300ms cubic-bezier(0, 0, 0.2, 1)",oh="1px",lh="2px",ch="4px",uh="4px",dh="4px",fh="2px",hh="1px",ph="0px",mh="4px",gh="8px",bh="12px",hl="#d8dde0",pl="#4c6272",ml="#d8dde0",gl="#aeb7bd",bl="#d5281b",yl="#005eb8",vl="#ffffff",_l="#212b32",xl="#007f3b",wl="#330072",Sl="#7c2855",Cl="#d5281b",kl="#ffeb3b",Tl="#fff9c4",Nl="#ffb81c",jl="#ed8b00",Dl="#00a499",Ml="#ae2573",Il="#4c6272",Pl="#768692",Fl="#aeb7bd",$l="#d8dde0",Ll="#f0f4f5",yh="#212b32",vh="#4c6272",_h="#ffffff",xh="#212b32",wh="#005eb8",Sh="#7c2855",Ch="#003087",kh="#330072",Th="#ffeb3b",Nh="#212b32",jh="#d8dde0",Dh="#ffffff33",Mh="#d5281b",Ih="#4c6272",Ph="#ffffff",Fh="#007f3b",$h="#ffffff",Lh="#006530",Ah="#004021",Eh="#004021",Bh="#00000000",Rh="#ffffff",Oh="#005eb8",Hh="#005eb8",zh="#d9e5f2",Wh="#c7daf0",Uh="#005eb8",Vh="#ffffff",Gh="#212b32",Yh="#d9dde0",qh="#b3bcc2",Xh="#b3bcc2",Kh="#d5281b",Jh="#aa2016",Zh="#6a140e",Qh="#6a140e",ep="#005eb8",tp="#004b93",np="#002f5c",rp="#002f5c",ip="8px",ap="16px",sp="12px",op="16px",lp="4px",cp="40px",up="4px",dp="40px",fp="12px",hp="16px",pp="32px",mp="16px",gp="20px",bp="28px",yp="9px",vp="2px",_p="16px",xp="24px",wp="8px",Sp="24px",Cp="16px",kp="4px",Tp="4px",Np="4px",jp="8px",Dp="4px",Mp="16px",Ip="#007f3b",Pp="#006530",Fp="#004021",$p="#d8dde0",Lp="#ffffff",Ap="#768692",Ep="#00000000",Bp="#ffeb3b",Rp="#00000000",Op="#ffffff",Hp="#d9e5f2",zp="#c7daf0",Wp="#005eb8",Up="#005eb8",Al="8px",El="16px",Bl="12px",Rl="16px",Vp="2px",Gp="4px",Yp="4px",qp="600",Xp="#ffffff",Kp="#d8dde0",Jp="#aeb7bd",Zp="#f0f4f5",Qp="#212b32",em="#212b32",tm="#005eb8",Ol="16px",Hl="32px",zl="16px",nm="1px",rm="4px",im="none",am="0 2px 4px rgba(0, 0, 0, 0.1)",sm="#ffffff",om="#ffffff",lm="#d8dde0",cm="#ffffff",um="#4c6272",dm="#ffeb3b",fm="#d5281b",hm="#aeb7bd",pm="#212b32",mm="#4c6272",gm="#768692",bm="#212b32",ym="#ffffff",vm="600",_m="#d5281b",xm="600",wm="#4c6272",Wl="4px",Ul="40px",Vl="40px",Gl="12px",Sm="2px",Cm="4px",km="0px",Tm="16px",Nm="18px",jm="24px",Dm="32px",Mm="34px",Im="32px",Pm="40px",Fm="48px",$m="5.4ex",Lm="7.2ex",Am="9ex",Em="10.8ex",Bm="20ex",Rm="38ex",Om="56ex",Hm="44px",zm="40px",Wm="1020px",Um="100%",Vm="50%",Gm="33.333%",Ym="25%",qm="20%",Xm="320px",Km="641px",Jm="1025px",Zm="1280px",Qm="960px",eg="32px",tg="16px",ng="#d5281b",rg="#d5281b",ig="#ffffff",ag="#007f3b",sg="#007f3b",og="#ffffff",lg="#ffeb3b",cg="#ffeb3b",ug="#212b32",dg="#005eb8",fg="#005eb8",hg="#ffffff",pg="#d8dde0",mg="#aeb7bd",gg="#768692",bg="0 4px 0 #004021",yg="0 4px 0 #005eb8",vg="0 4px 0 #6a140e",_g="0 4px 0 #ffeb3b",xg="none",wg="0 2px 4px rgba(0, 0, 0, 0.1)",Sg="4px",Cg="0px",kg="solid",Tg="0 0 0 3px #ffeb3b",Ng="0 0 0 3px #ffeb3b",jg="none",Dg="0 1px 3px rgba(0, 0, 0, 0.12)",Mg="0 2px 6px rgba(0, 0, 0, 0.16)",Ig="0 4px 12px rgba(0, 0, 0, 0.20)",Yl="0",ql="4px",Xl="8px",Kl="16px",Jl="24px",Zl="32px",Ql="40px",ec="48px",tc="56px",nc="64px",ps="0",ms="0",gs="4px",bs="4px",ys="8px",vs="8px",_s="8px",xs="16px",ws="16px",Ss="24px",Cs="24px",ks="32px",Ts="32px",Ns="40px",js="40px",Ds="48px",Ms="48px",Is="56px",Ps="56px",Fs="64px",Ai="Frutiger W01",Ei="Arial, Helvetica, sans-serif",Bi="sans-serif",Ri="400",Oi="600",Hi="400",zi="12px",Wi="14px",Ui="12pt",Vi="14px",Gi="16px",Yi="12pt",qi="16px",Xi="19px",Ki="13pt",Ji="19px",Zi="22px",Qi="15pt",ea="22px",ta="26px",na="17pt",ra="27px",ia="36px",aa="20pt",sa="33px",oa="48px",la="24pt",$s="16px",Ls="24px",mn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"33px",tablet:"48px",print:"24pt"},lineHeight:"1.09",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},gn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"27px",tablet:"36px",print:"20pt"},lineHeight:"1.11",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},bn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.15",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},yn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"19px",tablet:"22px",print:"15pt"},lineHeight:"1.18",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},vn={fontFamily:"Frutiger W01",fontWeight:"600",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.26",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},_n={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},xn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},wn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"14px",tablet:"16px",print:"12pt"},lineHeight:"1.5",marginTop:"0",marginBottom:{mobile:"16px",tablet:"24px"}},Sn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"22px",tablet:"26px",print:"17pt"},lineHeight:"1.38",marginTop:"0",marginBottom:{mobile:"40px",tablet:"48px"}},Cn={fontFamily:"Frutiger W01",fontWeight:"400",fontSize:{mobile:"16px",tablet:"19px",print:"13pt"},lineHeight:"1.47",marginTop:"0",marginBottom:{mobile:"24px",tablet:"32px"}},Z1=Object.freeze(Object.defineProperty({__proto__:null,AnimationDurationFast:Kf,AnimationDurationNormal:Jf,AnimationDurationSlow:Zf,AnimationEasingBounce:nh,AnimationEasingEaseIn:Qf,AnimationEasingEaseInOut:th,AnimationEasingEaseOut:eh,BorderColorCard:ml,BorderColorCardHover:gl,BorderColorDefault:hl,BorderColorError:bl,BorderColorForm:pl,BorderRadiusLarge:bh,BorderRadiusMedium:gh,BorderRadiusNone:ph,BorderRadiusSmall:mh,BorderWidthCardBottom:uh,BorderWidthDefault:oh,BorderWidthFormElement:lh,BorderWidthFormElementError:ch,BorderWidthPanel:dh,BorderWidthTableCell:hh,BorderWidthTableHeader:fh,BreakpointDesktop:Jm,BreakpointLargeDesktop:Zm,BreakpointMobile:Xm,BreakpointTablet:Km,ButtonBorderRadius:Gp,ButtonBorderWidth:Vp,ButtonPrimaryBackgroundActive:Fp,ButtonPrimaryBackgroundDefault:Ip,ButtonPrimaryBackgroundDisabled:$p,ButtonPrimaryBackgroundHover:Pp,ButtonPrimaryBorderDefault:Ep,ButtonPrimaryBorderFocus:Bp,ButtonPrimaryTextDefault:Lp,ButtonPrimaryTextDisabled:Ap,ButtonSecondaryBackgroundActive:zp,ButtonSecondaryBackgroundDefault:Rp,ButtonSecondaryBackgroundHover:Hp,ButtonSecondaryBackgroundSolid:Op,ButtonSecondaryBorderDefault:Up,ButtonSecondaryTextDefault:Wp,ButtonShadowSize:Yp,ButtonSpacingPaddingHorizontalDesktop:Rl,ButtonSpacingPaddingHorizontalMobile:El,ButtonSpacingPaddingVerticalDesktop:Bl,ButtonSpacingPaddingVerticalMobile:Al,ButtonTypographyWeight:qp,CardBackgroundDefault:Xp,CardBorderBottom:Zp,CardBorderDefault:Kp,CardBorderHover:Jp,CardBorderWidthBottom:rm,CardBorderWidthDefault:nm,CardShadowDefault:im,CardShadowHover:am,CardSpacingHeadingMargin:zl,CardSpacingPaddingDesktop:Hl,CardSpacingPaddingMobile:Ol,CardTextDescription:em,CardTextHeading:Qp,CardTextLink:tm,ColorBorderDefault:jh,ColorBorderSecondary:Dh,ColorButtonLoginActive:np,ColorButtonLoginBackground:ep,ColorButtonLoginHover:tp,ColorButtonLoginShadow:rp,ColorButtonPrimaryActive:Ah,ColorButtonPrimaryBackground:Fh,ColorButtonPrimaryHover:Lh,ColorButtonPrimaryShadow:Eh,ColorButtonPrimaryText:$h,ColorButtonReverseActive:qh,ColorButtonReverseBackground:Vh,ColorButtonReverseHover:Yh,ColorButtonReverseShadow:Xh,ColorButtonReverseText:Gh,ColorButtonSecondaryActive:Wh,ColorButtonSecondaryBackground:Bh,ColorButtonSecondaryBackgroundSolid:Rh,ColorButtonSecondaryBorder:Oh,ColorButtonSecondaryHover:zh,ColorButtonSecondaryShadow:Uh,ColorButtonSecondaryText:Hh,ColorButtonWarningActive:Zh,ColorButtonWarningBackground:Kh,ColorButtonWarningHover:Jh,ColorButtonWarningShadow:Qh,ColorError:Mh,ColorFocusBackground:Th,ColorFocusText:Nh,ColorFormBackground:Ph,ColorFormBorder:Ih,ColorGrey1:Il,ColorGrey2:Pl,ColorGrey3:Fl,ColorGrey4:$l,ColorGrey5:Ll,ColorLinkActive:Ch,ColorLinkDefault:wh,ColorLinkHover:Sh,ColorLinkVisited:kh,ColorPrimaryBlack:_l,ColorPrimaryBlue:yl,ColorPrimaryDarkPink:Sl,ColorPrimaryGreen:xl,ColorPrimaryPurple:wl,ColorPrimaryRed:Cl,ColorPrimaryWhite:vl,ColorPrimaryYellow:kl,ColorSecondaryAquaGreen:Dl,ColorSecondaryOrange:jl,ColorSecondaryPaleYellow:Tl,ColorSecondaryPink:Ml,ColorSecondaryWarmYellow:Nl,ColorTextPrimary:yh,ColorTextPrint:xh,ColorTextReverse:_h,ColorTextSecondary:vh,ComponentBlur:Tp,ComponentBreadcrumbChevronMarginLeft:yp,ComponentBreadcrumbChevronMarginRight:vp,ComponentBreadcrumbPaddingTopDesktop:xp,ComponentBreadcrumbPaddingTopMobile:_p,ComponentButtonPaddingDesktopHorizontal:op,ComponentButtonPaddingDesktopVertical:sp,ComponentButtonPaddingMobileHorizontal:ap,ComponentButtonPaddingMobileVertical:ip,ComponentButtonShadowSize:lp,ComponentCardHeadingMargin:mp,ComponentCardPaddingDesktop:pp,ComponentCardPaddingMobile:hp,ComponentDetails:jp,ComponentExpander:Dp,ComponentFormCheckboxLabelPadding:fp,ComponentFormCheckboxSize:dp,ComponentFormInputMinHeight:cp,ComponentFormInputPadding:up,ComponentLink:Np,ComponentPagination:Mp,ComponentPanelPaddingDesktop:bp,ComponentPanelPaddingMobile:gp,ComponentSpread:kp,ComponentSummaryListCellPaddingHorizontal:Sp,ComponentSummaryListCellPaddingVertical:wp,ComponentSummaryListRowMargin:Cp,ElevationHigh:Ig,ElevationLow:Dg,ElevationMedium:Mg,ElevationNone:jg,FocusOutlineOffset:Cg,FocusOutlineStyle:kg,FocusOutlineWidth:Sg,FocusShadowButton:Ng,FocusShadowInput:Tg,FontFamilyBase:Ai,FontFamilyFallback:Ei,FontFamilyPrint:Bi,FontLineHeightBase:Ls,FontSize14Mobile:zi,FontSize14Print:Ui,FontSize14Tablet:Wi,FontSize16Mobile:Vi,FontSize16Print:Yi,FontSize16Tablet:Gi,FontSize19Mobile:qi,FontSize19Print:Ki,FontSize19Tablet:Xi,FontSize22Mobile:Ji,FontSize22Print:Qi,FontSize22Tablet:Zi,FontSize26Mobile:ea,FontSize26Print:na,FontSize26Tablet:ta,FontSize36Mobile:ra,FontSize36Print:aa,FontSize36Tablet:ia,FontSize48Mobile:sa,FontSize48Print:la,FontSize48Tablet:oa,FontSizeBase:$s,FontWeightBold:Oi,FontWeightLight:Hi,FontWeightNormal:Ri,FormBorderRadius:km,FormBorderWidthDefault:Sm,FormBorderWidthError:Cm,FormErrorTextDefault:_m,FormErrorTypographyWeight:xm,FormHintTextDefault:wm,FormInputBackgroundDefault:sm,FormInputBackgroundDisabled:lm,FormInputBackgroundError:cm,FormInputBackgroundFocus:om,FormInputBorderDefault:um,FormInputBorderDisabled:hm,FormInputBorderError:fm,FormInputBorderFocus:dm,FormInputTextDefault:pm,FormInputTextDisabled:gm,FormInputTextPlaceholder:mm,FormLabelTextDefault:bm,FormLabelTextRequired:ym,FormLabelTypographyWeight:vm,FormSpacingCheckboxLabelPadding:Gl,FormSpacingCheckboxSize:Vl,FormSpacingInputMinHeight:Ul,FormSpacingInputPadding:Wl,GridGutter:eg,GridGutterHalf:tg,GridPageWidth:Qm,HeadingsNhsukHeadingL:gn,HeadingsNhsukHeadingM:bn,HeadingsNhsukHeadingS:yn,HeadingsNhsukHeadingXl:mn,HeadingsNhsukHeadingXs:vn,LayoutColumnActions:qm,LayoutColumnFull:Um,LayoutColumnHalf:Vm,LayoutColumnQuarter:Ym,LayoutColumnThird:Gm,LayoutContainerMaxWidth:Wm,ParagraphsBody:_n,ParagraphsBodyLarge:xn,ParagraphsBodySmall:wn,ParagraphsLedeText:Sn,ParagraphsLedeTextSmall:Cn,ShadowButtonDefault:bg,ShadowButtonFocus:_g,ShadowButtonSecondary:yg,ShadowButtonWarning:vg,ShadowCardDefault:xg,ShadowCardHover:wg,SizeButtonMinHeightDesktop:zm,SizeButtonMinHeightMobile:Hm,SizeFormControlLarge:Fm,SizeFormControlMedium:Pm,SizeFormControlSmall:Im,SizeFormInputWidth2xl:Rm,SizeFormInputWidth3xl:Om,SizeFormInputWidthLg:Em,SizeFormInputWidthMd:Am,SizeFormInputWidthSm:Lm,SizeFormInputWidthXl:Bm,SizeFormInputWidthXs:$m,SizeIconExtraLarge:Dm,SizeIconLarge:jm,SizeIconMedium:Nm,SizeIconNhsDefault:Mm,SizeIconSmall:Tm,Spacing0:Yl,Spacing1:ql,Spacing2:Xl,Spacing3:Kl,Spacing4:Jl,Spacing5:Zl,Spacing6:Ql,Spacing7:ec,Spacing8:tc,Spacing9:nc,SpacingResponsive0Mobile:ps,SpacingResponsive0Tablet:ms,SpacingResponsive1Mobile:gs,SpacingResponsive1Tablet:bs,SpacingResponsive2Mobile:ys,SpacingResponsive2Tablet:vs,SpacingResponsive3Mobile:_s,SpacingResponsive3Tablet:xs,SpacingResponsive4Mobile:ws,SpacingResponsive4Tablet:Ss,SpacingResponsive5Mobile:Cs,SpacingResponsive5Tablet:ks,SpacingResponsive6Mobile:Ts,SpacingResponsive6Tablet:Ns,SpacingResponsive7Mobile:js,SpacingResponsive7Tablet:Ds,SpacingResponsive8Mobile:Ms,SpacingResponsive8Tablet:Is,SpacingResponsive9Mobile:Ps,SpacingResponsive9Tablet:Fs,StateDisabledBackground:pg,StateDisabledBorder:mg,StateDisabledText:gg,StateErrorBackground:ng,StateErrorBorder:rg,StateErrorText:ig,StateInfoBackground:dg,StateInfoBorder:fg,StateInfoText:hg,StateSuccessBackground:ag,StateSuccessBorder:sg,StateSuccessText:og,StateWarningBackground:lg,StateWarningBorder:cg,StateWarningText:ug,TransitionButtonDefault:rh,TransitionButtonShadow:ih,TransitionCardHover:sh,TransitionInputFocus:ah},Symbol.toStringTag,{value:"Module"})),Q1=(e,t)=>({fontSize:e.mobile,marginBottom:t.mobile,"@media (min-width: 768px)":{fontSize:e.tablet,marginBottom:t.tablet},"@media print":{fontSize:e.print||e.tablet}}),ew=({children:e,className:t="",style:n={}})=>o.jsx("h1",{className:t,style:{fontFamily:mn.fontFamily,fontWeight:mn.fontWeight,fontSize:mn.fontSize.mobile,lineHeight:mn.lineHeight,marginTop:mn.marginTop,marginBottom:mn.marginBottom.mobile,...n},children:e}),tw=({children:e,className:t="",style:n={}})=>o.jsx("h2",{className:t,style:{fontFamily:gn.fontFamily,fontWeight:gn.fontWeight,fontSize:gn.fontSize.mobile,lineHeight:gn.lineHeight,marginTop:gn.marginTop,marginBottom:gn.marginBottom.mobile,...n},children:e}),nw=({children:e,className:t="",style:n={}})=>o.jsx("h3",{className:t,style:{fontFamily:bn.fontFamily,fontWeight:bn.fontWeight,fontSize:bn.fontSize.mobile,lineHeight:bn.lineHeight,marginTop:bn.marginTop,marginBottom:bn.marginBottom.mobile,...n},children:e}),rw=({children:e,className:t="",style:n={}})=>o.jsx("h4",{className:t,style:{fontFamily:yn.fontFamily,fontWeight:yn.fontWeight,fontSize:yn.fontSize.mobile,lineHeight:yn.lineHeight,marginTop:yn.marginTop,marginBottom:yn.marginBottom.mobile,...n},children:e}),iw=({children:e,className:t="",style:n={}})=>o.jsx("h5",{className:t,style:{fontFamily:vn.fontFamily,fontWeight:vn.fontWeight,fontSize:vn.fontSize.mobile,lineHeight:vn.lineHeight,marginTop:vn.marginTop,marginBottom:vn.marginBottom.mobile,...n},children:e}),aw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:_n.fontFamily,fontWeight:_n.fontWeight,fontSize:_n.fontSize.mobile,lineHeight:_n.lineHeight,marginTop:_n.marginTop,marginBottom:_n.marginBottom.mobile,...n},children:e}),sw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:xn.fontFamily,fontWeight:xn.fontWeight,fontSize:xn.fontSize.mobile,lineHeight:xn.lineHeight,marginTop:xn.marginTop,marginBottom:xn.marginBottom.mobile,...n},children:e}),ow=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:wn.fontFamily,fontWeight:wn.fontWeight,fontSize:wn.fontSize.mobile,lineHeight:wn.lineHeight,marginTop:wn.marginTop,marginBottom:wn.marginBottom.mobile,...n},children:e}),lw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:Sn.fontFamily,fontWeight:Sn.fontWeight,fontSize:Sn.fontSize.mobile,lineHeight:Sn.lineHeight,marginTop:Sn.marginTop,marginBottom:Sn.marginBottom.mobile,...n},children:e}),cw=({children:e,className:t="",style:n={}})=>o.jsx("p",{className:t,style:{fontFamily:Cn.fontFamily,fontWeight:Cn.fontWeight,fontSize:Cn.fontSize.mobile,lineHeight:Cn.lineHeight,marginTop:Cn.marginTop,marginBottom:Cn.marginBottom.mobile,...n},children:e}),uw=()=>B.useMemo(()=>Z1,[]),dw=()=>B.useMemo(()=>({BorderColorDefault:hl,BorderColorForm:pl,BorderColorCard:ml,BorderColorCardHover:gl,BorderColorError:bl,ColorPrimaryBlue:yl,ColorPrimaryWhite:vl,ColorPrimaryBlack:_l,ColorPrimaryGreen:xl,ColorPrimaryPurple:wl,ColorPrimaryDarkPink:Sl,ColorPrimaryRed:Cl,ColorPrimaryYellow:kl,ColorSecondaryPaleYellow:Tl,ColorSecondaryWarmYellow:Nl,ColorSecondaryOrange:jl,ColorSecondaryAquaGreen:Dl,ColorSecondaryPink:Ml,ColorGrey1:Il,ColorGrey2:Pl,ColorGrey3:Fl,ColorGrey4:$l,ColorGrey5:Ll}),[]),fw=()=>B.useMemo(()=>({Spacing0:Yl,Spacing1:ql,Spacing2:Xl,Spacing3:Kl,Spacing4:Jl,Spacing5:Zl,Spacing6:Ql,Spacing7:ec,Spacing8:tc,Spacing9:nc}),[]),hw=()=>B.useMemo(()=>({Mobile:{Size14:zi,Size16:Vi,Size19:qi,Size22:Ji,Size26:ea,Size36:ra,Size48:sa},Tablet:{Size14:Wi,Size16:Gi,Size19:Xi,Size22:Zi,Size26:ta,Size36:ia,Size48:oa},Print:{Size14:Ui,Size16:Yi,Size19:Ki,Size22:Qi,Size26:na,Size36:aa,Size48:la},Family:{Base:Ai,Fallback:Ei,Print:Bi},Weight:{Normal:Ri,Bold:Oi,Light:Hi},Base:{Size:$s,LineHeight:Ls},FontFamilyBase:Ai,FontFamilyFallback:Ei,FontFamilyPrint:Bi,FontWeightNormal:Ri,FontWeightBold:Oi,FontWeightLight:Hi,FontSize14Mobile:zi,FontSize14Tablet:Wi,FontSize14Print:Ui,FontSize16Mobile:Vi,FontSize16Tablet:Gi,FontSize16Print:Yi,FontSize19Mobile:qi,FontSize19Tablet:Xi,FontSize19Print:Ki,FontSize22Mobile:Ji,FontSize22Tablet:Zi,FontSize22Print:Qi,FontSize26Mobile:ea,FontSize26Tablet:ta,FontSize26Print:na,FontSize36Mobile:ra,FontSize36Tablet:ia,FontSize36Print:aa,FontSize48Mobile:sa,FontSize48Tablet:oa,FontSize48Print:la,FontSizeBase:$s,FontLineHeightBase:Ls}),[]),pw=()=>B.useMemo(()=>({Mobile:{Size0:ps,Size1:gs,Size2:ys,Size3:_s,Size4:ws,Size5:Cs,Size6:Ts,Size7:js,Size8:Ms,Size9:Ps},Tablet:{Size0:ms,Size1:bs,Size2:vs,Size3:xs,Size4:Ss,Size5:ks,Size6:Ns,Size7:Ds,Size8:Is,Size9:Fs},SpacingResponsive0Mobile:ps,SpacingResponsive0Tablet:ms,SpacingResponsive1Mobile:gs,SpacingResponsive1Tablet:bs,SpacingResponsive2Mobile:ys,SpacingResponsive2Tablet:vs,SpacingResponsive3Mobile:_s,SpacingResponsive3Tablet:xs,SpacingResponsive4Mobile:ws,SpacingResponsive4Tablet:Ss,SpacingResponsive5Mobile:Cs,SpacingResponsive5Tablet:ks,SpacingResponsive6Mobile:Ts,SpacingResponsive6Tablet:Ns,SpacingResponsive7Mobile:js,SpacingResponsive7Tablet:Ds,SpacingResponsive8Mobile:Ms,SpacingResponsive8Tablet:Is,SpacingResponsive9Mobile:Ps,SpacingResponsive9Tablet:Fs}),[]),mw=()=>B.useMemo(()=>({ButtonSpacingPaddingVerticalMobile:Al,ButtonSpacingPaddingHorizontalMobile:El,ButtonSpacingPaddingVerticalDesktop:Bl,ButtonSpacingPaddingHorizontalDesktop:Rl,CardSpacingPaddingMobile:Ol,CardSpacingPaddingDesktop:Hl,CardSpacingHeadingMargin:zl,FormSpacingInputPadding:Wl,FormSpacingInputMinHeight:Ul,FormSpacingCheckboxSize:Vl,FormSpacingCheckboxLabelPadding:Gl}),[]),gw=()=>B.useMemo(()=>({xl:mn,l:gn,m:bn,s:yn,xs:vn}),[]),bw=()=>B.useMemo(()=>({body:_n,bodyLarge:xn,bodySmall:wn,ledeText:Sn,ledeTextSmall:Cn}),[]),yw=()=>B.useMemo(()=>({headings:{xl:mn,l:gn,m:bn,s:yn,xs:vn},paragraphs:{body:_n,bodyLarge:xn,bodySmall:wn,ledeText:Sn,ledeTextSmall:Cn},fonts:{family:{base:Ai,fallback:Ei,print:Bi},weight:{normal:Ri,bold:Oi,light:Hi},sizes:{mobile:{size14:zi,size16:Vi,size19:qi,size22:Ji,size26:ea,size36:ra,size48:sa},tablet:{size14:Wi,size16:Gi,size19:Xi,size22:Zi,size26:ta,size36:ia,size48:oa},print:{size14:Ui,size16:Yi,size19:Ki,size22:Qi,size26:na,size36:aa,size48:la}}}}),[]);function vw(e={}){const{initialLayout:t=void 0,fallbackLayout:n="two-column"}=e,[r,i]=q.useState(t),a=q.useCallback(()=>i("three-column"),[]),s=q.useCallback(()=>i(u=>u==="three-column"?n:u),[n]),l=q.useCallback(()=>i(u=>u==="three-column"?n:"three-column"),[n]);return{forceLayout:r,setLayout:i,drillIn:a,drillOut:s,toggle:l,isDrilledIn:r==="three-column"}}const rc={fontPath:"https://assets.nhs.uk/fonts/",includeFontFace:!0,useFallbacks:!0,fontWeights:[400,600]},At={normal:{woff2:"FrutigerLTW01-55Roman.woff2",woff:"FrutigerLTW01-55Roman.woff",ttf:"FrutigerLTW01-55Roman.ttf",eot:"FrutigerLTW01-55Roman.eot"},bold:{woff2:"FrutigerLTW01-65Bold.woff2",woff:"FrutigerLTW01-65Bold.woff",ttf:"FrutigerLTW01-65Bold.ttf",eot:"FrutigerLTW01-65Bold.eot"}};function _w(e={}){const{fontPath:t,fontWeights:n}={...rc,...e},r=[];return n?.includes(400)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 400;
  src: url("${t}${At.normal.eot}?#iefix") format("eot"),
       url("${t}${At.normal.woff2}") format("woff2"),
       url("${t}${At.normal.woff}") format("woff"),
       url("${t}${At.normal.ttf}") format("truetype");
  src: url("${t}${At.normal.eot}");
}`),n?.includes(600)&&r.push(`
@font-face {
  font-display: swap;
  font-family: "Frutiger W01";
  font-style: normal;
  font-weight: 600;
  src: url("${t}${At.bold.eot}?#iefix") format("eot"),
       url("${t}${At.bold.woff2}") format("woff2"),
       url("${t}${At.bold.woff}") format("woff"),
       url("${t}${At.bold.ttf}") format("truetype");
  src: url("${t}${At.bold.eot}");
}`),r.join(`
`)}function xw(e={}){if(typeof document>"u")return;const{fontPath:t,fontWeights:n}={...rc,...e};[...n?.includes(400)?[{href:`${t}${At.normal.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${At.normal.woff}`,as:"font",type:"font/woff"}]:[],...n?.includes(600)?[{href:`${t}${At.bold.woff2}`,as:"font",type:"font/woff2"},{href:`${t}${At.bold.woff}`,as:"font",type:"font/woff"}]:[]].forEach(i=>{const a=document.createElement("link");a.rel="preload",a.href=i.href,a.as=i.as,a.type=i.type,a.crossOrigin="anonymous",document.head.appendChild(a)})}const ww='"Frutiger W01", Arial, Helvetica, sans-serif',Sw="Arial, Helvetica, sans-serif";async function Cw(){if(typeof document>"u"||!document.fonts)return!1;try{return await document.fonts.load('1em "Frutiger W01"'),document.fonts.check('1em "Frutiger W01"')}catch{return!1}}function Bn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pg(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Wt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Qr={duration:.5,overwrite:!1,delay:0},ic,Tt,rt,en=1e8,Je=1/en,ac=Math.PI*2,kw=ac/4,Tw=0,Fg=Math.sqrt,Nw=Math.cos,jw=Math.sin,wt=function(t){return typeof t=="string"},ut=function(t){return typeof t=="function"},Rn=function(t){return typeof t=="number"},sc=function(t){return typeof t>"u"},kn=function(t){return typeof t=="object"},Bt=function(t){return t!==!1},oc=function(){return typeof window<"u"},As=function(t){return ut(t)||wt(t)},$g=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Mt=Array.isArray,lc=/(?:-?\.?\d|\.)+/gi,Lg=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ei=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,cc=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ag=/[+-]=-?[.\d]+/,Eg=/[^,'"\[\]\s]+/gi,Dw=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,st,Tn,uc,dc,Ut={},Es={},Bg,Rg=function(t){return(Es=ni(t,Ut))&&Ht},fc=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},ca=function(t,n){return!n&&console.warn(t)},Og=function(t,n){return t&&(Ut[t]=n)&&Es&&(Es[t]=n)||Ut},ua=function(){return 0},Mw={suppressEvents:!0,isStart:!0,kill:!1},Bs={suppressEvents:!0,kill:!1},Iw={suppressEvents:!0},hc={},Jn=[],pc={},Hg,Vt={},mc={},zg=30,Rs=[],gc="",bc=function(t){var n=t[0],r,i;if(kn(n)||ut(n)||(t=[t]),!(r=(n._gsap||{}).harness)){for(i=Rs.length;i--&&!Rs[i].targetTest(n););r=Rs[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new b0(t[i],r)))||t.splice(i,1);return t},_r=function(t){return t._gsap||bc(nn(t))[0]._gsap},Wg=function(t,n,r){return(r=t[n])&&ut(r)?t[n]():sc(r)&&t.getAttribute&&t.getAttribute(n)||r},Rt=function(t,n){return(t=t.split(",")).forEach(n)||t},dt=function(t){return Math.round(t*1e5)/1e5||0},ht=function(t){return Math.round(t*1e7)/1e7||0},ti=function(t,n){var r=n.charAt(0),i=parseFloat(n.substr(2));return t=parseFloat(t),r==="+"?t+i:r==="-"?t-i:r==="*"?t*i:t/i},Pw=function(t,n){for(var r=n.length,i=0;t.indexOf(n[i])<0&&++i<r;);return i<r},Os=function(){var t=Jn.length,n=Jn.slice(0),r,i;for(pc={},Jn.length=0,r=0;r<t;r++)i=n[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},yc=function(t){return!!(t._initted||t._startAt||t.add)},Ug=function(t,n,r,i){Jn.length&&!Tt&&Os(),t.render(n,r,!!(Tt&&n<0&&yc(t))),Jn.length&&!Tt&&Os()},Vg=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(Eg).length<2?n:wt(t)?t.trim():t},Gg=function(t){return t},Gt=function(t,n){for(var r in n)r in t||(t[r]=n[r]);return t},Fw=function(t){return function(n,r){for(var i in r)i in n||i==="duration"&&t||i==="ease"||(n[i]=r[i])}},ni=function(t,n){for(var r in n)t[r]=n[r];return t},Yg=function e(t,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(t[r]=kn(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},Hs=function(t,n){var r={},i;for(i in t)i in n||(r[i]=t[i]);return r},da=function(t){var n=t.parent||st,r=t.keyframes?Fw(Mt(t.keyframes)):Gt;if(Bt(t.inherit))for(;n;)r(t,n.vars.defaults),n=n.parent||n._dp;return t},$w=function(t,n){for(var r=t.length,i=r===n.length;i&&r--&&t[r]===n[r];);return r<0},qg=function(t,n,r,i,a){var s=t[i],l;if(a)for(l=n[a];s&&s[a]>l;)s=s._prev;return s?(n._next=s._next,s._next=n):(n._next=t[r],t[r]=n),n._next?n._next._prev=n:t[i]=n,n._prev=s,n.parent=n._dp=t,n},zs=function(t,n,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var a=n._prev,s=n._next;a?a._next=s:t[r]===n&&(t[r]=s),s?s._prev=a:t[i]===n&&(t[i]=a),n._next=n._prev=n.parent=null},Zn=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},xr=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},Lw=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},vc=function(t,n,r,i){return t._startAt&&(Tt?t._startAt.revert(Bs):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,i))},Aw=function e(t){return!t||t._ts&&e(t.parent)},Xg=function(t){return t._repeat?ri(t._tTime,t=t.duration()+t._rDelay)*t:0},ri=function(t,n){var r=Math.floor(t=ht(t/n));return t&&r===t?r-1:r},Ws=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Us=function(t){return t._end=ht(t._start+(t._tDur/Math.abs(t._ts||t._rts||Je)||0))},Vs=function(t,n){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=ht(r._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),Us(t),r._dirty||xr(r,t)),t},Kg=function(t,n){var r;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(r=Ws(t.rawTime(),n),(!n._dur||ha(0,n.totalDuration(),r)-n._tTime>Je)&&n.render(r,!0)),xr(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-Je}},Nn=function(t,n,r,i){return n.parent&&Zn(n),n._start=ht((Rn(r)?r:r||t!==st?tn(t,r,n):t._time)+n._delay),n._end=ht(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),qg(t,n,"_first","_last",t._sort?"_start":0),_c(n)||(t._recent=n),i||Kg(t,n),t._ts<0&&Vs(t,t._tTime),t},Jg=function(t,n){return(Ut.ScrollTrigger||fc("scrollTrigger",n))&&Ut.ScrollTrigger.create(n,t)},Zg=function(t,n,r,i,a){if(Dc(t,n,a),!t._initted)return 1;if(!r&&t._pt&&!Tt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Hg!==qt.frame)return Jn.push(t),t._lazy=[a,i],1},Ew=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},_c=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},Bw=function(t,n,r,i){var a=t.ratio,s=n<0||!n&&(!t._start&&Ew(t)&&!(!t._initted&&_c(t))||(t._ts<0||t._dp._ts<0)&&!_c(t))?0:1,l=t._rDelay,u=0,c,d,f;if(l&&t._repeat&&(u=ha(0,t._tDur,n),d=ri(u,l),t._yoyo&&d&1&&(s=1-s),d!==ri(t._tTime,l)&&(a=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==a||Tt||i||t._zTime===Je||!n&&t._zTime){if(!t._initted&&Zg(t,n,i,r,u))return;for(f=t._zTime,t._zTime=n||(r?Je:0),r||(r=n&&!f),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=u,c=t._pt;c;)c.r(s,c.d),c=c._next;n<0&&vc(t,n,r,!0),t._onUpdate&&!r&&Yt(t,"onUpdate"),u&&t._repeat&&!r&&t.parent&&Yt(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===s&&(s&&Zn(t,1),!r&&!Tt&&(Yt(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},Rw=function(t,n,r){var i;if(r>n)for(i=t._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>n)return i;i=i._next}else for(i=t._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<n)return i;i=i._prev}},ii=function(t,n,r,i){var a=t._repeat,s=ht(n)||0,l=t._tTime/t._tDur;return l&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=a?a<0?1e10:ht(s*(a+1)+t._rDelay*a):s,l>0&&!i&&Vs(t,t._tTime=t._tDur*l),t.parent&&Us(t),r||xr(t.parent,t),t},Qg=function(t){return t instanceof Nt?xr(t):ii(t,t._dur)},Ow={_start:0,endTime:ua,totalDuration:ua},tn=function e(t,n,r){var i=t.labels,a=t._recent||Ow,s=t.duration()>=en?a.endTime(!1):t._dur,l,u,c;return wt(n)&&(isNaN(n)||n in i)?(u=n.charAt(0),c=n.substr(-1)==="%",l=n.indexOf("="),u==="<"||u===">"?(l>=0&&(n=n.replace(/=/,"")),(u==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0)*(c?(l<0?a:r).totalDuration()/100:1)):l<0?(n in i||(i[n]=s),i[n]):(u=parseFloat(n.charAt(l-1)+n.substr(l+1)),c&&r&&(u=u/100*(Mt(r)?r[0]:r).totalDuration()),l>1?e(t,n.substr(0,l-1),r)+u:s+u)):n==null?s:+n},fa=function(t,n,r){var i=Rn(n[1]),a=(i?2:1)+(t<2?0:1),s=n[a],l,u;if(i&&(s.duration=n[1]),s.parent=r,t){for(l=s,u=r;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=Bt(u.vars.inherit)&&u.parent;s.immediateRender=Bt(l.immediateRender),t<2?s.runBackwards=1:s.startAt=n[a-1]}return new ft(n[0],s,n[a+1])},Qn=function(t,n){return t||t===0?n(t):n},ha=function(t,n,r){return r<t?t:r>n?n:r},It=function(t,n){return!wt(t)||!(n=Dw.exec(t))?"":n[1]},Hw=function(t,n,r){return Qn(r,function(i){return ha(t,n,i)})},xc=[].slice,e0=function(t,n){return t&&kn(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&kn(t[0]))&&!t.nodeType&&t!==Tn},zw=function(t,n,r){return r===void 0&&(r=[]),t.forEach(function(i){var a;return wt(i)&&!n||e0(i,1)?(a=r).push.apply(a,nn(i)):r.push(i)})||r},nn=function(t,n,r){return rt&&!n&&rt.selector?rt.selector(t):wt(t)&&!r&&(uc||!si())?xc.call((n||dc).querySelectorAll(t),0):Mt(t)?zw(t,r):e0(t)?xc.call(t,0):t?[t]:[]},wc=function(t){return t=nn(t)[0]||ca("Invalid scope")||{},function(n){var r=t.current||t.nativeElement||t;return nn(n,r.querySelectorAll?r:r===t?ca("Invalid scope")||dc.createElement("div"):t)}},t0=function(t){return t.sort(function(){return .5-Math.random()})},n0=function(t){if(ut(t))return t;var n=kn(t)?t:{each:t},r=wr(n.ease),i=n.from||0,a=parseFloat(n.base)||0,s={},l=i>0&&i<1,u=isNaN(i)||l,c=n.axis,d=i,f=i;return wt(i)?d=f={center:.5,edges:.5,end:1}[i]||0:!l&&u&&(d=i[0],f=i[1]),function(p,g,b){var h=(b||n).length,m=s[h],y,S,M,w,v,D,N,k,x;if(!m){if(x=n.grid==="auto"?0:(n.grid||[1,en])[1],!x){for(N=-en;N<(N=b[x++].getBoundingClientRect().left)&&x<h;);x<h&&x--}for(m=s[h]=[],y=u?Math.min(x,h)*d-.5:i%x,S=x===en?0:u?h*f/x-.5:i/x|0,N=0,k=en,D=0;D<h;D++)M=D%x-y,w=S-(D/x|0),m[D]=v=c?Math.abs(c==="y"?w:M):Fg(M*M+w*w),v>N&&(N=v),v<k&&(k=v);i==="random"&&t0(m),m.max=N-k,m.min=k,m.v=h=(parseFloat(n.amount)||parseFloat(n.each)*(x>h?h-1:c?c==="y"?h/x:x:Math.max(x,h/x))||0)*(i==="edges"?-1:1),m.b=h<0?a-h:a,m.u=It(n.amount||n.each)||0,r=r&&h<0?p0(r):r}return h=(m[p]-m.min)/m.max||0,ht(m.b+(r?r(h):h)*m.v)+m.u}},Sc=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var i=ht(Math.round(parseFloat(r)/t)*t*n);return(i-i%1)/n+(Rn(r)?0:It(r))}},r0=function(t,n){var r=Mt(t),i,a;return!r&&kn(t)&&(i=r=t.radius||en,t.values?(t=nn(t.values),(a=!Rn(t[0]))&&(i*=i)):t=Sc(t.increment)),Qn(n,r?ut(t)?function(s){return a=t(s),Math.abs(a-s)<=i?a:s}:function(s){for(var l=parseFloat(a?s.x:s),u=parseFloat(a?s.y:0),c=en,d=0,f=t.length,p,g;f--;)a?(p=t[f].x-l,g=t[f].y-u,p=p*p+g*g):p=Math.abs(t[f]-l),p<c&&(c=p,d=f);return d=!i||c<=i?t[d]:s,a||d===s||Rn(s)?d:d+It(s)}:Sc(t))},i0=function(t,n,r,i){return Qn(Mt(t)?!n:r===!0?!!(r=0):!i,function(){return Mt(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(n-t+r*.99))/r)*r*i)/i})},Ww=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduce(function(a,s){return s(a)},i)}},Uw=function(t,n){return function(r){return t(parseFloat(r))+(n||It(r))}},Vw=function(t,n,r){return s0(t,n,0,1,r)},a0=function(t,n,r){return Qn(r,function(i){return t[~~n(i)]})},Gw=function e(t,n,r){var i=n-t;return Mt(t)?a0(t,e(0,t.length),n):Qn(r,function(a){return(i+(a-t)%i)%i+t})},Yw=function e(t,n,r){var i=n-t,a=i*2;return Mt(t)?a0(t,e(0,t.length-1),n):Qn(r,function(s){return s=(a+(s-t)%a)%a||0,t+(s>i?a-s:s)})},pa=function(t){for(var n=0,r="",i,a,s,l;~(i=t.indexOf("random(",n));)s=t.indexOf(")",i),l=t.charAt(i+7)==="[",a=t.substr(i+7,s-i-7).match(l?Eg:lc),r+=t.substr(n,i-n)+i0(l?a:+a[0],l?0:+a[1],+a[2]||1e-5),n=s+1;return r+t.substr(n,t.length-n)},s0=function(t,n,r,i,a){var s=n-t,l=i-r;return Qn(a,function(u){return r+((u-t)/s*l||0)})},qw=function e(t,n,r,i){var a=isNaN(t+n)?0:function(g){return(1-g)*t+g*n};if(!a){var s=wt(t),l={},u,c,d,f,p;if(r===!0&&(i=1)&&(r=null),s)t={p:t},n={p:n};else if(Mt(t)&&!Mt(n)){for(d=[],f=t.length,p=f-2,c=1;c<f;c++)d.push(e(t[c-1],t[c]));f--,a=function(b){b*=f;var h=Math.min(p,~~b);return d[h](b-h)},r=n}else i||(t=ni(Mt(t)?[]:{},t));if(!d){for(u in n)Nc.call(l,t,u,"get",n[u]);a=function(b){return Pc(b,l)||(s?t.p:t)}}}return Qn(r,a)},o0=function(t,n,r){var i=t.labels,a=en,s,l,u;for(s in i)l=i[s]-n,l<0==!!r&&l&&a>(l=Math.abs(l))&&(u=s,a=l);return u},Yt=function(t,n,r){var i=t.vars,a=i[n],s=rt,l=t._ctx,u,c,d;if(a)return u=i[n+"Params"],c=i.callbackScope||t,r&&Jn.length&&Os(),l&&(rt=l),d=u?a.apply(c,u):a.call(c),rt=s,d},ma=function(t){return Zn(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Tt),t.progress()<1&&Yt(t,"onInterrupt"),t},ai,l0=[],c0=function(t){if(t)if(t=!t.name&&t.default||t,oc()||t.headless){var n=t.name,r=ut(t),i=n&&!r&&t.init?function(){this._props=[]}:t,a={init:ua,render:Pc,add:Nc,kill:uS,modifier:cS,rawVars:0},s={targetTest:0,get:0,getSetter:Ic,aliases:{},register:0};if(si(),t!==i){if(Vt[n])return;Gt(i,Gt(Hs(t,a),s)),ni(i.prototype,ni(a,Hs(t,s))),Vt[i.prop=n]=i,t.targetTest&&(Rs.push(i),hc[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}Og(n,i),t.register&&t.register(Ht,i,Ot)}else l0.push(t)},Ze=255,ga={aqua:[0,Ze,Ze],lime:[0,Ze,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ze],navy:[0,0,128],white:[Ze,Ze,Ze],olive:[128,128,0],yellow:[Ze,Ze,0],orange:[Ze,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ze,0,0],pink:[Ze,192,203],cyan:[0,Ze,Ze],transparent:[Ze,Ze,Ze,0]},Cc=function(t,n,r){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(r-n)*t*6:t<.5?r:t*3<2?n+(r-n)*(2/3-t)*6:n)*Ze+.5|0},u0=function(t,n,r){var i=t?Rn(t)?[t>>16,t>>8&Ze,t&Ze]:0:ga.black,a,s,l,u,c,d,f,p,g,b;if(!i){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),ga[t])i=ga[t];else if(t.charAt(0)==="#"){if(t.length<6&&(a=t.charAt(1),s=t.charAt(2),l=t.charAt(3),t="#"+a+a+s+s+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return i=parseInt(t.substr(1,6),16),[i>>16,i>>8&Ze,i&Ze,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),i=[t>>16,t>>8&Ze,t&Ze]}else if(t.substr(0,3)==="hsl"){if(i=b=t.match(lc),!n)u=+i[0]%360/360,c=+i[1]/100,d=+i[2]/100,s=d<=.5?d*(c+1):d+c-d*c,a=d*2-s,i.length>3&&(i[3]*=1),i[0]=Cc(u+1/3,a,s),i[1]=Cc(u,a,s),i[2]=Cc(u-1/3,a,s);else if(~t.indexOf("="))return i=t.match(Lg),r&&i.length<4&&(i[3]=1),i}else i=t.match(lc)||ga.transparent;i=i.map(Number)}return n&&!b&&(a=i[0]/Ze,s=i[1]/Ze,l=i[2]/Ze,f=Math.max(a,s,l),p=Math.min(a,s,l),d=(f+p)/2,f===p?u=c=0:(g=f-p,c=d>.5?g/(2-f-p):g/(f+p),u=f===a?(s-l)/g+(s<l?6:0):f===s?(l-a)/g+2:(a-s)/g+4,u*=60),i[0]=~~(u+.5),i[1]=~~(c*100+.5),i[2]=~~(d*100+.5)),r&&i.length<4&&(i[3]=1),i},d0=function(t){var n=[],r=[],i=-1;return t.split(er).forEach(function(a){var s=a.match(ei)||[];n.push.apply(n,s),r.push(i+=s.length+1)}),n.c=r,n},f0=function(t,n,r){var i="",a=(t+i).match(er),s=n?"hsla(":"rgba(",l=0,u,c,d,f;if(!a)return t;if(a=a.map(function(p){return(p=u0(p,n,1))&&s+(n?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),r&&(d=d0(t),u=r.c,u.join(i)!==d.c.join(i)))for(c=t.replace(er,"1").split(ei),f=c.length-1;l<f;l++)i+=c[l]+(~u.indexOf(l)?a.shift()||s+"0,0,0,0)":(d.length?d:a.length?a:r).shift());if(!c)for(c=t.split(er),f=c.length-1;l<f;l++)i+=c[l]+a[l];return i+c[f]},er=(function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in ga)e+="|"+t+"\\b";return new RegExp(e+")","gi")})(),Xw=/hsl[a]?\(/,h0=function(t){var n=t.join(" "),r;if(er.lastIndex=0,er.test(n))return r=Xw.test(n),t[1]=f0(t[1],r),t[0]=f0(t[0],r,d0(t[1])),!0},ba,qt=(function(){var e=Date.now,t=500,n=33,r=e(),i=r,a=1e3/240,s=a,l=[],u,c,d,f,p,g,b=function h(m){var y=e()-i,S=m===!0,M,w,v,D;if((y>t||y<0)&&(r+=y-n),i+=y,v=i-r,M=v-s,(M>0||S)&&(D=++f.frame,p=v-f.time*1e3,f.time=v=v/1e3,s+=M+(M>=a?4:a-M),w=1),S||(u=c(h)),w)for(g=0;g<l.length;g++)l[g](v,p,D,m)};return f={time:0,frame:0,tick:function(){b(!0)},deltaRatio:function(m){return p/(1e3/(m||60))},wake:function(){Bg&&(!uc&&oc()&&(Tn=uc=window,dc=Tn.document||{},Ut.gsap=Ht,(Tn.gsapVersions||(Tn.gsapVersions=[])).push(Ht.version),Rg(Es||Tn.GreenSockGlobals||!Tn.gsap&&Tn||{}),l0.forEach(c0)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&f.sleep(),c=d||function(m){return setTimeout(m,s-f.time*1e3+1|0)},ba=1,b(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(u),ba=0,c=ua},lagSmoothing:function(m,y){t=m||1/0,n=Math.min(y||33,t)},fps:function(m){a=1e3/(m||240),s=f.time*1e3+a},add:function(m,y,S){var M=y?function(w,v,D,N){m(w,v,D,N),f.remove(M)}:m;return f.remove(m),l[S?"unshift":"push"](M),si(),M},remove:function(m,y){~(y=l.indexOf(m))&&l.splice(y,1)&&g>=y&&g--},_listeners:l},f})(),si=function(){return!ba&&qt.wake()},Oe={},Kw=/^[\d.\-M][\d.\-,\s]/,Jw=/["']/g,Zw=function(t){for(var n={},r=t.substr(1,t.length-3).split(":"),i=r[0],a=1,s=r.length,l,u,c;a<s;a++)u=r[a],l=a!==s-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),n[i]=isNaN(c)?c.replace(Jw,"").trim():+c,i=u.substr(l+1).trim();return n},Qw=function(t){var n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n);return t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)},eS=function(t){var n=(t+"").split("("),r=Oe[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[Zw(n[1])]:Qw(t).split(",").map(Vg)):Oe._CE&&Kw.test(t)?Oe._CE("",t):r},p0=function(t){return function(n){return 1-t(1-n)}},m0=function e(t,n){for(var r=t._first,i;r;)r instanceof Nt?e(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?e(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},wr=function(t,n){return t&&(ut(t)?t:Oe[t]||eS(t))||n},Sr=function(t,n,r,i){r===void 0&&(r=function(u){return 1-n(1-u)}),i===void 0&&(i=function(u){return u<.5?n(u*2)/2:1-n((1-u)*2)/2});var a={easeIn:n,easeOut:r,easeInOut:i},s;return Rt(t,function(l){Oe[l]=Ut[l]=a,Oe[s=l.toLowerCase()]=r;for(var u in a)Oe[s+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=Oe[l+"."+u]=a[u]}),a},g0=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},kc=function e(t,n,r){var i=n>=1?n:1,a=(r||(t?.3:.45))/(n<1?n:1),s=a/ac*(Math.asin(1/i)||0),l=function(d){return d===1?1:i*Math.pow(2,-10*d)*jw((d-s)*a)+1},u=t==="out"?l:t==="in"?function(c){return 1-l(1-c)}:g0(l);return a=ac/a,u.config=function(c,d){return e(t,c,d)},u},Tc=function e(t,n){n===void 0&&(n=1.70158);var r=function(s){return s?--s*s*((n+1)*s+n)+1:0},i=t==="out"?r:t==="in"?function(a){return 1-r(1-a)}:g0(r);return i.config=function(a){return e(t,a)},i};Rt("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;Sr(e+",Power"+(n-1),t?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})}),Oe.Linear.easeNone=Oe.none=Oe.Linear.easeIn,Sr("Elastic",kc("in"),kc("out"),kc()),(function(e,t){var n=1/t,r=2*n,i=2.5*n,a=function(l){return l<n?e*l*l:l<r?e*Math.pow(l-1.5/t,2)+.75:l<i?e*(l-=2.25/t)*l+.9375:e*Math.pow(l-2.625/t,2)+.984375};Sr("Bounce",function(s){return 1-a(1-s)},a)})(7.5625,2.75),Sr("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),Sr("Circ",function(e){return-(Fg(1-e*e)-1)}),Sr("Sine",function(e){return e===1?1:-Nw(e*kw)+1}),Sr("Back",Tc("in"),Tc("out"),Tc()),Oe.SteppedEase=Oe.steps=Ut.SteppedEase={config:function(t,n){t===void 0&&(t=1);var r=1/t,i=t+(n?0:1),a=n?1:0,s=1-Je;return function(l){return((i*ha(0,s,l)|0)+a)*r}}},Qr.ease=Oe["quad.out"],Rt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return gc+=e+","+e+"Params,"});var b0=function(t,n){this.id=Tw++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:Wg,this.set=n?n.getSetter:Ic},ya=(function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,ii(this,+n.duration,1,1),this.data=n.data,rt&&(this._ctx=rt,rt.data.push(this)),ba||qt.wake()}var t=e.prototype;return t.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},t.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},t.totalDuration=function(r){return arguments.length?(this._dirty=0,ii(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(r,i){if(si(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(Vs(this,r),!a._dp||a.parent||Kg(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Nn(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Je||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Ug(this,r,i)),this},t.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+Xg(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},t.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+Xg(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(r,i){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*a,i):this._repeat?ri(this._tTime,a)+1:1},t.timeScale=function(r,i){if(!arguments.length)return this._rts===-Je?0:this._rts;if(this._rts===r)return this;var a=this.parent&&this._ts?Ws(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Je?0:this._rts,this.totalTime(ha(-Math.abs(this._delay),this.totalDuration(),a),i!==!1),Us(this),Lw(this)},t.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(si(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Je&&(this._tTime-=Je)))),this):this._ps},t.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Nn(i,this,r-this._delay),this}return this._start},t.endTime=function(r){return this._start+(Bt(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ws(i.rawTime(r),this):this._tTime:this._tTime},t.revert=function(r){r===void 0&&(r=Iw);var i=Tt;return Tt=r,yc(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Tt=i,this},t.globalTime=function(r){for(var i=this,a=arguments.length?r:i.rawTime();i;)a=i._start+a/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):a},t.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Qg(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,Qg(this),i?this.time(i):this}return this._rDelay},t.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},t.seek=function(r,i){return this.totalTime(tn(this,r),Bt(i))},t.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,Bt(i)),this._dur||(this._zTime=-Je),this},t.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},t.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},t.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Je:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Je,this},t.isActive=function(){var r=this.parent||this._dp,i=this._start,a;return!!(!r||this._ts&&this._initted&&r.isActive()&&(a=r.rawTime(!0))>=i&&a<this.endTime(!0)-Je)},t.eventCallback=function(r,i,a){var s=this.vars;return arguments.length>1?(i?(s[r]=i,a&&(s[r+"Params"]=a),r==="onUpdate"&&(this._onUpdate=i)):delete s[r],this):s[r]},t.then=function(r){var i=this;return new Promise(function(a){var s=ut(r)?r:Gg,l=function(){var c=i.then;i.then=null,ut(s)&&(s=s(i))&&(s.then||s===i)&&(i.then=c),a(s),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?l():i._prom=l})},t.kill=function(){ma(this)},e})();Gt(ya.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Je,_prom:0,_ps:!1,_rts:1});var Nt=(function(e){Pg(t,e);function t(r,i){var a;return r===void 0&&(r={}),a=e.call(this,r)||this,a.labels={},a.smoothChildTiming=!!r.smoothChildTiming,a.autoRemoveChildren=!!r.autoRemoveChildren,a._sort=Bt(r.sortChildren),st&&Nn(r.parent||st,Bn(a),i),r.reversed&&a.reverse(),r.paused&&a.paused(!0),r.scrollTrigger&&Jg(Bn(a),r.scrollTrigger),a}var n=t.prototype;return n.to=function(i,a,s){return fa(0,arguments,this),this},n.from=function(i,a,s){return fa(1,arguments,this),this},n.fromTo=function(i,a,s,l){return fa(2,arguments,this),this},n.set=function(i,a,s){return a.duration=0,a.parent=this,da(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new ft(i,a,tn(this,s),1),this},n.call=function(i,a,s){return Nn(this,ft.delayedCall(0,i,a),s)},n.staggerTo=function(i,a,s,l,u,c,d){return s.duration=a,s.stagger=s.stagger||l,s.onComplete=c,s.onCompleteParams=d,s.parent=this,new ft(i,s,tn(this,u)),this},n.staggerFrom=function(i,a,s,l,u,c,d){return s.runBackwards=1,da(s).immediateRender=Bt(s.immediateRender),this.staggerTo(i,a,s,l,u,c,d)},n.staggerFromTo=function(i,a,s,l,u,c,d,f){return l.startAt=s,da(l).immediateRender=Bt(l.immediateRender),this.staggerTo(i,a,l,u,c,d,f)},n.render=function(i,a,s){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=i<=0?0:ht(i),f=this._zTime<0!=i<0&&(this._initted||!c),p,g,b,h,m,y,S,M,w,v,D,N;if(this!==st&&d>u&&i>=0&&(d=u),d!==this._tTime||s||f){if(l!==this._time&&c&&(d+=this._time-l,i+=this._time-l),p=d,w=this._start,M=this._ts,y=!M,f&&(c||(l=this._zTime),(i||!a)&&(this._zTime=i)),this._repeat){if(D=this._yoyo,m=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(m*100+i,a,s);if(p=ht(d%m),d===u?(h=this._repeat,p=c):(v=ht(d/m),h=~~v,h&&h===v&&(p=c,h--),p>c&&(p=c)),v=ri(this._tTime,m),!l&&this._tTime&&v!==h&&this._tTime-v*m-this._dur<=0&&(v=h),D&&h&1&&(p=c-p,N=1),h!==v&&!this._lock){var k=D&&v&1,x=k===(D&&h&1);if(h<v&&(k=!k),l=k?0:d%c?c:d,this._lock=1,this.render(l||(N?0:ht(h*m)),a,!c)._lock=0,this._tTime=d,!a&&this.parent&&Yt(this,"onRepeat"),this.vars.repeatRefresh&&!N&&(this.invalidate()._lock=1),l&&l!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,x&&(this._lock=2,l=k?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!N&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;m0(this,N)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=Rw(this,ht(l),ht(p)),S&&(d-=p-(p=S._start))),this._tTime=d,this._time=p,this._act=!M,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,l=0),!l&&d&&!a&&!v&&(Yt(this,"onStart"),this._tTime!==d))return this;if(p>=l&&i>=0)for(g=this._first;g;){if(b=g._next,(g._act||p>=g._start)&&g._ts&&S!==g){if(g.parent!==this)return this.render(i,a,s);if(g.render(g._ts>0?(p-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(p-g._start)*g._ts,a,s),p!==this._time||!this._ts&&!y){S=0,b&&(d+=this._zTime=-Je);break}}g=b}else{g=this._last;for(var I=i<0?i:p;g;){if(b=g._prev,(g._act||I<=g._end)&&g._ts&&S!==g){if(g.parent!==this)return this.render(i,a,s);if(g.render(g._ts>0?(I-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(I-g._start)*g._ts,a,s||Tt&&yc(g)),p!==this._time||!this._ts&&!y){S=0,b&&(d+=this._zTime=I?-Je:Je);break}}g=b}}if(S&&!a&&(this.pause(),S.render(p>=l?0:-Je)._zTime=p>=l?1:-1,this._ts))return this._start=w,Us(this),this.render(i,a,s);this._onUpdate&&!a&&Yt(this,"onUpdate",!0),(d===u&&this._tTime>=this.totalDuration()||!d&&l)&&(w===this._start||Math.abs(M)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(d===u&&this._ts>0||!d&&this._ts<0)&&Zn(this,1),!a&&!(i<0&&!l)&&(d||l||!u)&&(Yt(this,d===u&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(i,a){var s=this;if(Rn(a)||(a=tn(this,a,i)),!(i instanceof ya)){if(Mt(i))return i.forEach(function(l){return s.add(l,a)}),this;if(wt(i))return this.addLabel(i,a);if(ut(i))i=ft.delayedCall(0,i);else return this}return this!==i?Nn(this,i,a):this},n.getChildren=function(i,a,s,l){i===void 0&&(i=!0),a===void 0&&(a=!0),s===void 0&&(s=!0),l===void 0&&(l=-en);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof ft?a&&u.push(c):(s&&u.push(c),i&&u.push.apply(u,c.getChildren(!0,a,s)))),c=c._next;return u},n.getById=function(i){for(var a=this.getChildren(1,1,1),s=a.length;s--;)if(a[s].vars.id===i)return a[s]},n.remove=function(i){return wt(i)?this.removeLabel(i):ut(i)?this.killTweensOf(i):(i.parent===this&&zs(this,i),i===this._recent&&(this._recent=this._last),xr(this))},n.totalTime=function(i,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ht(qt.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),e.prototype.totalTime.call(this,i,a),this._forcing=0,this):this._tTime},n.addLabel=function(i,a){return this.labels[i]=tn(this,a),this},n.removeLabel=function(i){return delete this.labels[i],this},n.addPause=function(i,a,s){var l=ft.delayedCall(0,a||ua,s);return l.data="isPause",this._hasPause=1,Nn(this,l,tn(this,i))},n.removePause=function(i){var a=this._first;for(i=tn(this,i);a;)a._start===i&&a.data==="isPause"&&Zn(a),a=a._next},n.killTweensOf=function(i,a,s){for(var l=this.getTweensOf(i,s),u=l.length;u--;)tr!==l[u]&&l[u].kill(i,a);return this},n.getTweensOf=function(i,a){for(var s=[],l=nn(i),u=this._first,c=Rn(a),d;u;)u instanceof ft?Pw(u._targets,l)&&(c?(!tr||u._initted&&u._ts)&&u.globalTime(0)<=a&&u.globalTime(u.totalDuration())>a:!a||u.isActive())&&s.push(u):(d=u.getTweensOf(l,a)).length&&s.push.apply(s,d),u=u._next;return s},n.tweenTo=function(i,a){a=a||{};var s=this,l=tn(s,i),u=a,c=u.startAt,d=u.onStart,f=u.onStartParams,p=u.immediateRender,g,b=ft.to(s,Gt({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:a.duration||Math.abs((l-(c&&"time"in c?c.time:s._time))/s.timeScale())||Je,onStart:function(){if(s.pause(),!g){var m=a.duration||Math.abs((l-(c&&"time"in c?c.time:s._time))/s.timeScale());b._dur!==m&&ii(b,m,0,1).render(b._time,!0,!0),g=1}d&&d.apply(b,f||[])}},a));return p?b.render(0):b},n.tweenFromTo=function(i,a,s){return this.tweenTo(a,Gt({startAt:{time:tn(this,i)}},s))},n.recent=function(){return this._recent},n.nextLabel=function(i){return i===void 0&&(i=this._time),o0(this,tn(this,i))},n.previousLabel=function(i){return i===void 0&&(i=this._time),o0(this,tn(this,i),1)},n.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Je)},n.shiftChildren=function(i,a,s){s===void 0&&(s=0);for(var l=this._first,u=this.labels,c;l;)l._start>=s&&(l._start+=i,l._end+=i),l=l._next;if(a)for(c in u)u[c]>=s&&(u[c]+=i);return xr(this)},n.invalidate=function(i){var a=this._first;for(this._lock=0;a;)a.invalidate(i),a=a._next;return e.prototype.invalidate.call(this,i)},n.clear=function(i){i===void 0&&(i=!0);for(var a=this._first,s;a;)s=a._next,this.remove(a),a=s;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),xr(this)},n.totalDuration=function(i){var a=0,s=this,l=s._last,u=en,c,d,f;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-i:i));if(s._dirty){for(f=s.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>u&&s._sort&&l._ts&&!s._lock?(s._lock=1,Nn(s,l,d-l._delay,1)._lock=0):u=d,d<0&&l._ts&&(a-=d,(!f&&!s._dp||f&&f.smoothChildTiming)&&(s._start+=d/s._ts,s._time-=d,s._tTime-=d),s.shiftChildren(-d,!1,-1/0),u=0),l._end>a&&l._ts&&(a=l._end),l=c;ii(s,s===st&&s._time>a?s._time:a,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(i){if(st._ts&&(Ug(st,Ws(i,st)),Hg=qt.frame),qt.frame>=zg){zg+=Wt.autoSleep||120;var a=st._first;if((!a||!a._ts)&&Wt.autoSleep&&qt._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||qt.sleep()}}},t})(ya);Gt(Nt.prototype,{_lock:0,_hasPause:0,_forcing:0});var tS=function(t,n,r,i,a,s,l){var u=new Ot(this._pt,t,n,0,1,S0,null,a),c=0,d=0,f,p,g,b,h,m,y,S;for(u.b=r,u.e=i,r+="",i+="",(y=~i.indexOf("random("))&&(i=pa(i)),s&&(S=[r,i],s(S,t,n),r=S[0],i=S[1]),p=r.match(cc)||[];f=cc.exec(i);)b=f[0],h=i.substring(c,f.index),g?g=(g+1)%5:h.substr(-5)==="rgba("&&(g=1),b!==p[d++]&&(m=parseFloat(p[d-1])||0,u._pt={_next:u._pt,p:h||d===1?h:",",s:m,c:b.charAt(1)==="="?ti(m,b)-m:parseFloat(b)-m,m:g&&g<4?Math.round:0},c=cc.lastIndex);return u.c=c<i.length?i.substring(c,i.length):"",u.fp=l,(Ag.test(i)||y)&&(u.e=0),this._pt=u,u},Nc=function(t,n,r,i,a,s,l,u,c,d){ut(i)&&(i=i(a||0,t,s));var f=t[n],p=r!=="get"?r:ut(f)?c?t[n.indexOf("set")||!ut(t["get"+n.substr(3)])?n:"get"+n.substr(3)](c):t[n]():f,g=ut(f)?c?sS:x0:Mc,b;if(wt(i)&&(~i.indexOf("random(")&&(i=pa(i)),i.charAt(1)==="="&&(b=ti(p,i)+(It(p)||0),(b||b===0)&&(i=b))),!d||p!==i||jc)return!isNaN(p*i)&&i!==""?(b=new Ot(this._pt,t,n,+p||0,i-(p||0),typeof f=="boolean"?lS:w0,0,g),c&&(b.fp=c),l&&b.modifier(l,this,t),this._pt=b):(!f&&!(n in t)&&fc(n,i),tS.call(this,t,n,p,i,g,u||Wt.stringFilter,c))},nS=function(t,n,r,i,a){if(ut(t)&&(t=va(t,a,n,r,i)),!kn(t)||t.style&&t.nodeType||Mt(t)||$g(t))return wt(t)?va(t,a,n,r,i):t;var s={},l;for(l in t)s[l]=va(t[l],a,n,r,i);return s},y0=function(t,n,r,i,a,s){var l,u,c,d;if(Vt[t]&&(l=new Vt[t]).init(a,l.rawVars?n[t]:nS(n[t],i,a,s,r),r,i,s)!==!1&&(r._pt=u=new Ot(r._pt,a,t,0,1,l.render,l,0,l.priority),r!==ai))for(c=r._ptLookup[r._targets.indexOf(a)],d=l._props.length;d--;)c[l._props[d]]=u;return l},tr,jc,Dc=function e(t,n,r){var i=t.vars,a=i.ease,s=i.startAt,l=i.immediateRender,u=i.lazy,c=i.onUpdate,d=i.runBackwards,f=i.yoyoEase,p=i.keyframes,g=i.autoRevert,b=t._dur,h=t._startAt,m=t._targets,y=t.parent,S=y&&y.data==="nested"?y.vars.targets:m,M=t._overwrite==="auto"&&!ic,w=t.timeline,v,D,N,k,x,I,j,C,$,T,F,P,L;if(w&&(!p||!a)&&(a="none"),t._ease=wr(a,Qr.ease),t._yEase=f?p0(wr(f===!0?a:f,Qr.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!w&&!!i.runBackwards,!w||p&&!i.stagger){if(C=m[0]?_r(m[0]).harness:0,P=C&&i[C.prop],v=Hs(i,hc),h&&(h._zTime<0&&h.progress(1),n<0&&d&&l&&!g?h.render(-1,!0):h.revert(d&&b?Bs:Mw),h._lazy=0),s){if(Zn(t._startAt=ft.set(m,Gt({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!h&&Bt(u),startAt:null,delay:0,onUpdate:c&&function(){return Yt(t,"onUpdate")},stagger:0},s))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(Tt||!l&&!g)&&t._startAt.revert(Bs),l&&b&&n<=0&&r<=0){n&&(t._zTime=n);return}}else if(d&&b&&!h){if(n&&(l=!1),N=Gt({overwrite:!1,data:"isFromStart",lazy:l&&!h&&Bt(u),immediateRender:l,stagger:0,parent:y},v),P&&(N[C.prop]=P),Zn(t._startAt=ft.set(m,N)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(Tt?t._startAt.revert(Bs):t._startAt.render(-1,!0)),t._zTime=n,!l)e(t._startAt,Je,Je);else if(!n)return}for(t._pt=t._ptCache=0,u=b&&Bt(u)||u&&!b,D=0;D<m.length;D++){if(x=m[D],j=x._gsap||bc(m)[D]._gsap,t._ptLookup[D]=T={},pc[j.id]&&Jn.length&&Os(),F=S===m?D:S.indexOf(x),C&&($=new C).init(x,P||v,t,F,S)!==!1&&(t._pt=k=new Ot(t._pt,x,$.name,0,1,$.render,$,0,$.priority),$._props.forEach(function(te){T[te]=k}),$.priority&&(I=1)),!C||P)for(N in v)Vt[N]&&($=y0(N,v,t,F,x,S))?$.priority&&(I=1):T[N]=k=Nc.call(t,x,N,"get",v[N],F,S,0,i.stringFilter);t._op&&t._op[D]&&t.kill(x,t._op[D]),M&&t._pt&&(tr=t,st.killTweensOf(x,T,t.globalTime(n)),L=!t.parent,tr=0),t._pt&&u&&(pc[j.id]=1)}I&&C0(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!L,p&&n<=0&&w.render(en,!0,!0)},rS=function(t,n,r,i,a,s,l,u){var c=(t._pt&&t._ptCache||(t._ptCache={}))[n],d,f,p,g;if(!c)for(c=t._ptCache[n]=[],p=t._ptLookup,g=t._targets.length;g--;){if(d=p[g][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return jc=1,t.vars[n]="+=0",Dc(t,l),jc=0,u?ca(n+" not eligible for reset"):1;c.push(d)}for(g=c.length;g--;)f=c[g],d=f._pt||f,d.s=(i||i===0)&&!a?i:d.s+(i||0)+s*d.c,d.c=r-d.s,f.e&&(f.e=dt(r)+It(f.e)),f.b&&(f.b=d.s+It(f.b))},iS=function(t,n){var r=t[0]?_r(t[0]).harness:0,i=r&&r.aliases,a,s,l,u;if(!i)return n;a=ni({},n);for(s in i)if(s in a)for(u=i[s].split(","),l=u.length;l--;)a[u[l]]=a[s];return a},aS=function(t,n,r,i){var a=n.ease||i||"power1.inOut",s,l;if(Mt(n))l=r[t]||(r[t]=[]),n.forEach(function(u,c){return l.push({t:c/(n.length-1)*100,v:u,e:a})});else for(s in n)l=r[s]||(r[s]=[]),s==="ease"||l.push({t:parseFloat(t),v:n[s],e:a})},va=function(t,n,r,i,a){return ut(t)?t.call(n,r,i,a):wt(t)&&~t.indexOf("random(")?pa(t):t},v0=gc+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_0={};Rt(v0+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return _0[e]=1});var ft=(function(e){Pg(t,e);function t(r,i,a,s){var l;typeof i=="number"&&(a.duration=i,i=a,a=null),l=e.call(this,s?i:da(i))||this;var u=l.vars,c=u.duration,d=u.delay,f=u.immediateRender,p=u.stagger,g=u.overwrite,b=u.keyframes,h=u.defaults,m=u.scrollTrigger,y=u.yoyoEase,S=i.parent||st,M=(Mt(r)||$g(r)?Rn(r[0]):"length"in i)?[r]:nn(r),w,v,D,N,k,x,I,j;if(l._targets=M.length?bc(M):ca("GSAP target "+r+" not found. https://gsap.com",!Wt.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,b||p||As(c)||As(d)){if(i=l.vars,w=l.timeline=new Nt({data:"nested",defaults:h||{},targets:S&&S.data==="nested"?S.vars.targets:M}),w.kill(),w.parent=w._dp=Bn(l),w._start=0,p||As(c)||As(d)){if(N=M.length,I=p&&n0(p),kn(p))for(k in p)~v0.indexOf(k)&&(j||(j={}),j[k]=p[k]);for(v=0;v<N;v++)D=Hs(i,_0),D.stagger=0,y&&(D.yoyoEase=y),j&&ni(D,j),x=M[v],D.duration=+va(c,Bn(l),v,x,M),D.delay=(+va(d,Bn(l),v,x,M)||0)-l._delay,!p&&N===1&&D.delay&&(l._delay=d=D.delay,l._start+=d,D.delay=0),w.to(x,D,I?I(v,x,M):0),w._ease=Oe.none;w.duration()?c=d=0:l.timeline=0}else if(b){da(Gt(w.vars.defaults,{ease:"none"})),w._ease=wr(b.ease||i.ease||"none");var C=0,$,T,F;if(Mt(b))b.forEach(function(P){return w.to(M,P,">")}),w.duration();else{D={};for(k in b)k==="ease"||k==="easeEach"||aS(k,b[k],D,b.easeEach);for(k in D)for($=D[k].sort(function(P,L){return P.t-L.t}),C=0,v=0;v<$.length;v++)T=$[v],F={ease:T.e,duration:(T.t-(v?$[v-1].t:0))/100*c},F[k]=T.v,w.to(M,F,C),C+=F.duration;w.duration()<c&&w.to({},{duration:c-w.duration()})}}c||l.duration(c=w.duration())}else l.timeline=0;return g===!0&&!ic&&(tr=Bn(l),st.killTweensOf(M),tr=0),Nn(S,Bn(l),a),i.reversed&&l.reverse(),i.paused&&l.paused(!0),(f||!c&&!b&&l._start===ht(S._time)&&Bt(f)&&Aw(Bn(l))&&S.data!=="nested")&&(l._tTime=-Je,l.render(Math.max(0,-d)||0)),m&&Jg(Bn(l),m),l}var n=t.prototype;return n.render=function(i,a,s){var l=this._time,u=this._tDur,c=this._dur,d=i<0,f=i>u-Je&&!d?u:i<Je?0:i,p,g,b,h,m,y,S,M,w;if(!c)Bw(this,i,a,s);else if(f!==this._tTime||!i||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(p=f,M=this.timeline,this._repeat){if(h=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(h*100+i,a,s);if(p=ht(f%h),f===u?(b=this._repeat,p=c):(m=ht(f/h),b=~~m,b&&b===m?(p=c,b--):p>c&&(p=c)),y=this._yoyo&&b&1,y&&(w=this._yEase,p=c-p),m=ri(this._tTime,h),p===l&&!s&&this._initted&&b===m)return this._tTime=f,this;b!==m&&(M&&this._yEase&&m0(M,y),this.vars.repeatRefresh&&!y&&!this._lock&&p!==h&&this._initted&&(this._lock=s=1,this.render(ht(h*b),!0).invalidate()._lock=0))}if(!this._initted){if(Zg(this,d?i:p,s,a,f))return this._tTime=0,this;if(l!==this._time&&!(s&&this.vars.repeatRefresh&&b!==m))return this;if(c!==this._dur)return this.render(i,a,s)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(w||this._ease)(p/c),this._from&&(this.ratio=S=1-S),!l&&f&&!a&&!m&&(Yt(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(S,g.d),g=g._next;M&&M.render(i<0?i:M._dur*M._ease(p/this._dur),a,s)||this._startAt&&(this._zTime=i),this._onUpdate&&!a&&(d&&vc(this,i,a,s),Yt(this,"onUpdate")),this._repeat&&b!==m&&this.vars.onRepeat&&!a&&this.parent&&Yt(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(d&&!this._onUpdate&&vc(this,i,!0,!0),(i||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Zn(this,1),!a&&!(d&&!l)&&(f||l||y)&&(Yt(this,f===u?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),e.prototype.invalidate.call(this,i)},n.resetTo=function(i,a,s,l,u){ba||qt.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||Dc(this,c),d=this._ease(c/this._dur),rS(this,i,a,s,l,d,c,u)?this.resetTo(i,a,s,l,1):(Vs(this,0),this.parent||qg(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(i,a){if(a===void 0&&(a="all"),!i&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?ma(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Tt),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(i,a,tr&&tr.vars.overwrite!==!0)._first||ma(this),this.parent&&s!==this.timeline.totalDuration()&&ii(this,this._dur*this.timeline._tDur/s,0,1),this}var l=this._targets,u=i?nn(i):l,c=this._ptLookup,d=this._pt,f,p,g,b,h,m,y;if((!a||a==="all")&&$w(l,u))return a==="all"&&(this._pt=0),ma(this);for(f=this._op=this._op||[],a!=="all"&&(wt(a)&&(h={},Rt(a,function(S){return h[S]=1}),a=h),a=iS(l,a)),y=l.length;y--;)if(~u.indexOf(l[y])){p=c[y],a==="all"?(f[y]=a,b=p,g={}):(g=f[y]=f[y]||{},b=a);for(h in b)m=p&&p[h],m&&((!("kill"in m.d)||m.d.kill(h)===!0)&&zs(this,m,"_pt"),delete p[h]),g!=="all"&&(g[h]=1)}return this._initted&&!this._pt&&d&&ma(this),this},t.to=function(i,a){return new t(i,a,arguments[2])},t.from=function(i,a){return fa(1,arguments)},t.delayedCall=function(i,a,s,l){return new t(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:a,onReverseComplete:a,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:l})},t.fromTo=function(i,a,s){return fa(2,arguments)},t.set=function(i,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new t(i,a)},t.killTweensOf=function(i,a,s){return st.killTweensOf(i,a,s)},t})(ya);Gt(ft.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Rt("staggerTo,staggerFrom,staggerFromTo",function(e){ft[e]=function(){var t=new Nt,n=xc.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var Mc=function(t,n,r){return t[n]=r},x0=function(t,n,r){return t[n](r)},sS=function(t,n,r,i){return t[n](i.fp,r)},oS=function(t,n,r){return t.setAttribute(n,r)},Ic=function(t,n){return ut(t[n])?x0:sc(t[n])&&t.setAttribute?oS:Mc},w0=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},lS=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},S0=function(t,n){var r=n._pt,i="";if(!t&&n.b)i=n.b;else if(t===1&&n.e)i=n.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*t):Math.round((r.s+r.c*t)*1e4)/1e4)+i,r=r._next;i+=n.c}n.set(n.t,n.p,i,n)},Pc=function(t,n){for(var r=n._pt;r;)r.r(t,r.d),r=r._next},cS=function(t,n,r,i){for(var a=this._pt,s;a;)s=a._next,a.p===i&&a.modifier(t,n,r),a=s},uS=function(t){for(var n=this._pt,r,i;n;)i=n._next,n.p===t&&!n.op||n.op===t?zs(this,n,"_pt"):n.dep||(r=1),n=i;return!r},dS=function(t,n,r,i){i.mSet(t,n,i.m.call(i.tween,r,i.mt),i)},C0=function(t){for(var n=t._pt,r,i,a,s;n;){for(r=n._next,i=a;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:s)?n._prev._next=n:a=n,(n._next=i)?i._prev=n:s=n,n=r}t._pt=a},Ot=(function(){function e(n,r,i,a,s,l,u,c,d){this.t=r,this.s=a,this.c=s,this.p=i,this.r=l||w0,this.d=u||this,this.set=c||Mc,this.pr=d||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(r,i,a){this.mSet=this.mSet||this.set,this.set=dS,this.m=r,this.mt=a,this.tween=i},e})();Rt(gc+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return hc[e]=1}),Ut.TweenMax=Ut.TweenLite=ft,Ut.TimelineLite=Ut.TimelineMax=Nt,st=new Nt({sortChildren:!1,defaults:Qr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Wt.stringFilter=h0;var Cr=[],Gs={},fS=[],k0=0,hS=0,Fc=function(t){return(Gs[t]||fS).map(function(n){return n()})},$c=function(){var t=Date.now(),n=[];t-k0>2&&(Fc("matchMediaInit"),Cr.forEach(function(r){var i=r.queries,a=r.conditions,s,l,u,c;for(l in i)s=Tn.matchMedia(i[l]).matches,s&&(u=1),s!==a[l]&&(a[l]=s,c=1);c&&(r.revert(),u&&n.push(r))}),Fc("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),k0=t,Fc("matchMedia"))},T0=(function(){function e(n,r){this.selector=r&&wc(r),this.data=[],this._r=[],this.isReverted=!1,this.id=hS++,n&&this.add(n)}var t=e.prototype;return t.add=function(r,i,a){ut(r)&&(a=i,i=r,r=ut);var s=this,l=function(){var c=rt,d=s.selector,f;return c&&c!==s&&c.data.push(s),a&&(s.selector=wc(a)),rt=s,f=i.apply(s,arguments),ut(f)&&s._r.push(f),rt=c,s.selector=d,s.isReverted=!1,f};return s.last=l,r===ut?l(s,function(u){return s.add(null,u)}):r?s[r]=l:l},t.ignore=function(r){var i=rt;rt=null,r(this),rt=i},t.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof e?r.push.apply(r,i.getTweens()):i instanceof ft&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(r,i){var a=this;if(r?(function(){for(var l=a.getTweens(),u=a.data.length,c;u--;)c=a.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,f){return f.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),u=a.data.length;u--;)c=a.data[u],c instanceof Nt?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof ft)&&c.revert&&c.revert(r);a._r.forEach(function(d){return d(r,a)}),a.isReverted=!0})():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),i)for(var s=Cr.length;s--;)Cr[s].id===this.id&&Cr.splice(s,1)},t.revert=function(r){this.kill(r||{})},e})(),pS=(function(){function e(n){this.contexts=[],this.scope=n,rt&&rt.data.push(this)}var t=e.prototype;return t.add=function(r,i,a){kn(r)||(r={matches:r});var s=new T0(0,a||this.scope),l=s.conditions={},u,c,d;rt&&!s.selector&&(s.selector=rt.selector),this.contexts.push(s),i=s.add("onMatch",i),s.queries=r;for(c in r)c==="all"?d=1:(u=Tn.matchMedia(r[c]),u&&(Cr.indexOf(s)<0&&Cr.push(s),(l[c]=u.matches)&&(d=1),u.addListener?u.addListener($c):u.addEventListener("change",$c)));return d&&i(s,function(f){return s.add(null,f)}),this},t.revert=function(r){this.kill(r||{})},t.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},e})(),Ys={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(i){return c0(i)})},timeline:function(t){return new Nt(t)},getTweensOf:function(t,n){return st.getTweensOf(t,n)},getProperty:function(t,n,r,i){wt(t)&&(t=nn(t)[0]);var a=_r(t||{}).get,s=r?Gg:Vg;return r==="native"&&(r=""),t&&(n?s((Vt[n]&&Vt[n].get||a)(t,n,r,i)):function(l,u,c){return s((Vt[l]&&Vt[l].get||a)(t,l,u,c))})},quickSetter:function(t,n,r){if(t=nn(t),t.length>1){var i=t.map(function(d){return Ht.quickSetter(d,n,r)}),a=i.length;return function(d){for(var f=a;f--;)i[f](d)}}t=t[0]||{};var s=Vt[n],l=_r(t),u=l.harness&&(l.harness.aliases||{})[n]||n,c=s?function(d){var f=new s;ai._pt=0,f.init(t,r?d+r:d,ai,0,[t]),f.render(1,f),ai._pt&&Pc(1,ai)}:l.set(t,u);return s?c:function(d){return c(t,u,r?d+r:d,l,1)}},quickTo:function(t,n,r){var i,a=Ht.to(t,Gt((i={},i[n]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),s=function(u,c,d){return a.resetTo(n,u,c,d)};return s.tween=a,s},isTweening:function(t){return st.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=wr(t.ease,Qr.ease)),Yg(Qr,t||{})},config:function(t){return Yg(Wt,t||{})},registerEffect:function(t){var n=t.name,r=t.effect,i=t.plugins,a=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach(function(l){return l&&!Vt[l]&&!Ut[l]&&ca(n+" effect requires "+l+" plugin.")}),mc[n]=function(l,u,c){return r(nn(l),Gt(u||{},a),c)},s&&(Nt.prototype[n]=function(l,u,c){return this.add(mc[n](l,kn(u)?u:(c=u)&&{},this),c)})},registerEase:function(t,n){Oe[t]=wr(n)},parseEase:function(t,n){return arguments.length?wr(t,n):Oe},getById:function(t){return st.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var r=new Nt(t),i,a;for(r.smoothChildTiming=Bt(t.smoothChildTiming),st.remove(r),r._dp=0,r._time=r._tTime=st._time,i=st._first;i;)a=i._next,(n||!(!i._dur&&i instanceof ft&&i.vars.onComplete===i._targets[0]))&&Nn(r,i,i._start-i._delay),i=a;return Nn(st,r,0),r},context:function(t,n){return t?new T0(t,n):rt},matchMedia:function(t){return new pS(t)},matchMediaRefresh:function(){return Cr.forEach(function(t){var n=t.conditions,r,i;for(i in n)n[i]&&(n[i]=!1,r=1);r&&t.revert()})||$c()},addEventListener:function(t,n){var r=Gs[t]||(Gs[t]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(t,n){var r=Gs[t],i=r&&r.indexOf(n);i>=0&&r.splice(i,1)},utils:{wrap:Gw,wrapYoyo:Yw,distribute:n0,random:i0,snap:r0,normalize:Vw,getUnit:It,clamp:Hw,splitColor:u0,toArray:nn,selector:wc,mapRange:s0,pipe:Ww,unitize:Uw,interpolate:qw,shuffle:t0},install:Rg,effects:mc,ticker:qt,updateRoot:Nt.updateRoot,plugins:Vt,globalTimeline:st,core:{PropTween:Ot,globals:Og,Tween:ft,Timeline:Nt,Animation:ya,getCache:_r,_removeLinkedListItem:zs,reverting:function(){return Tt},context:function(t){return t&&rt&&(rt.data.push(t),t._ctx=rt),rt},suppressOverwrites:function(t){return ic=t}}};Rt("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return Ys[e]=ft[e]}),qt.add(Nt.updateRoot),ai=Ys.to({},{duration:0});var mS=function(t,n){for(var r=t._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},gS=function(t,n){var r=t._targets,i,a,s;for(i in n)for(a=r.length;a--;)s=t._ptLookup[a][i],s&&(s=s.d)&&(s._pt&&(s=mS(s,i)),s&&s.modifier&&s.modifier(n[i],t,r[a],i))},Lc=function(t,n){return{name:t,headless:1,rawVars:1,init:function(i,a,s){s._onInit=function(l){var u,c;if(wt(a)&&(u={},Rt(a,function(d){return u[d]=1}),a=u),n){u={};for(c in a)u[c]=n(a[c]);a=u}gS(l,a)}}}},Ht=Ys.registerPlugin({name:"attr",init:function(t,n,r,i,a){var s,l,u;this.tween=r;for(s in n)u=t.getAttribute(s)||"",l=this.add(t,"setAttribute",(u||0)+"",n[s],i,a,0,0,s),l.op=s,l.b=u,this._props.push(s)},render:function(t,n){for(var r=n._pt;r;)Tt?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",headless:1,init:function(t,n){for(var r=n.length;r--;)this.add(t,r,t[r]||0,n[r],0,0,0,0,0,1)}},Lc("roundProps",Sc),Lc("modifiers"),Lc("snap",r0))||Ys;ft.version=Nt.version=Ht.version="3.13.0",Bg=1,oc()&&si();var bS=Oe.Power0,yS=Oe.Power1,vS=Oe.Power2,_S=Oe.Power3,xS=Oe.Power4,wS=Oe.Linear,SS=Oe.Quad,CS=Oe.Cubic,kS=Oe.Quart,TS=Oe.Quint,NS=Oe.Strong,jS=Oe.Elastic,DS=Oe.Back,MS=Oe.SteppedEase,IS=Oe.Bounce,PS=Oe.Sine,FS=Oe.Expo,$S=Oe.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var N0,nr,oi,Ac,kr,j0,Ec,LS=function(){return typeof window<"u"},On={},Tr=180/Math.PI,li=Math.PI/180,ci=Math.atan2,D0=1e8,Bc=/([A-Z])/g,AS=/(left|right|width|margin|padding|x)/i,ES=/[\s,\(]\S/,jn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Rc=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},BS=function(t,n){return n.set(n.t,n.p,t===1?n.e:Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},RS=function(t,n){return n.set(n.t,n.p,t?Math.round((n.s+n.c*t)*1e4)/1e4+n.u:n.b,n)},OS=function(t,n){var r=n.s+n.c*t;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},M0=function(t,n){return n.set(n.t,n.p,t?n.e:n.b,n)},I0=function(t,n){return n.set(n.t,n.p,t!==1?n.b:n.e,n)},HS=function(t,n,r){return t.style[n]=r},zS=function(t,n,r){return t.style.setProperty(n,r)},WS=function(t,n,r){return t._gsap[n]=r},US=function(t,n,r){return t._gsap.scaleX=t._gsap.scaleY=r},VS=function(t,n,r,i,a){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(a,s)},GS=function(t,n,r,i,a){var s=t._gsap;s[n]=r,s.renderTransform(a,s)},ot="transform",zt=ot+"Origin",YS=function e(t,n){var r=this,i=this.target,a=i.style,s=i._gsap;if(t in On&&a){if(this.tfm=this.tfm||{},t!=="transform")t=jn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return r.tfm[l]=Hn(i,l)}):this.tfm[t]=s.x?s[t]:Hn(i,t),t===zt&&(this.tfm.zOrigin=s.zOrigin);else return jn.transform.split(",").forEach(function(l){return e.call(r,l,n)});if(this.props.indexOf(ot)>=0)return;s.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(zt,n,"")),t=ot}(a||n)&&this.props.push(t,n,a[t])},P0=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},qS=function(){var t=this.props,n=this.target,r=n.style,i=n._gsap,a,s;for(a=0;a<t.length;a+=3)t[a+1]?t[a+1]===2?n[t[a]](t[a+2]):n[t[a]]=t[a+2]:t[a+2]?r[t[a]]=t[a+2]:r.removeProperty(t[a].substr(0,2)==="--"?t[a]:t[a].replace(Bc,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)i[s]=this.tfm[s];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),a=Ec(),(!a||!a.isStart)&&!r[ot]&&(P0(r),i.zOrigin&&r[zt]&&(r[zt]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},F0=function(t,n){var r={target:t,props:[],revert:qS,save:YS};return t._gsap||Ht.core.getCache(t),n&&t.style&&t.nodeType&&n.split(",").forEach(function(i){return r.save(i)}),r},$0,Oc=function(t,n){var r=nr.createElementNS?nr.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):nr.createElement(t);return r&&r.style?r:nr.createElement(t)},rn=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(Bc,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,ui(n)||n,1)||""},L0="O,Moz,ms,Ms,Webkit".split(","),ui=function(t,n,r){var i=n||kr,a=i.style,s=5;if(t in a&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(L0[s]+t in a););return s<0?null:(s===3?"ms":s>=0?L0[s]:"")+t},Hc=function(){LS()&&window.document&&(N0=window,nr=N0.document,oi=nr.documentElement,kr=Oc("div")||{style:{}},Oc("div"),ot=ui(ot),zt=ot+"Origin",kr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",$0=!!ui("perspective"),Ec=Ht.core.reverting,Ac=1)},A0=function(t){var n=t.ownerSVGElement,r=Oc("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=t.cloneNode(!0),a;i.style.display="block",r.appendChild(i),oi.appendChild(r);try{a=i.getBBox()}catch{}return r.removeChild(i),oi.removeChild(r),a},E0=function(t,n){for(var r=n.length;r--;)if(t.hasAttribute(n[r]))return t.getAttribute(n[r])},B0=function(t){var n,r;try{n=t.getBBox()}catch{n=A0(t),r=1}return n&&(n.width||n.height)||r||(n=A0(t)),n&&!n.width&&!n.x&&!n.y?{x:+E0(t,["x","cx","x1"])||0,y:+E0(t,["y","cy","y1"])||0,width:0,height:0}:n},R0=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&B0(t))},Nr=function(t,n){if(n){var r=t.style,i;n in On&&n!==zt&&(n=ot),r.removeProperty?(i=n.substr(0,2),(i==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(i==="--"?n:n.replace(Bc,"-$1").toLowerCase())):r.removeAttribute(n)}},rr=function(t,n,r,i,a,s){var l=new Ot(t._pt,n,r,0,1,s?I0:M0);return t._pt=l,l.b=i,l.e=a,t._props.push(r),l},O0={deg:1,rad:1,turn:1},XS={grid:1,flex:1},ir=function e(t,n,r,i){var a=parseFloat(r)||0,s=(r+"").trim().substr((a+"").length)||"px",l=kr.style,u=AS.test(n),c=t.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(u?"Width":"Height"),f=100,p=i==="px",g=i==="%",b,h,m,y;if(i===s||!a||O0[i]||O0[s])return a;if(s!=="px"&&!p&&(a=e(t,n,r,"px")),y=t.getCTM&&R0(t),(g||s==="%")&&(On[n]||~n.indexOf("adius")))return b=y?t.getBBox()[u?"width":"height"]:t[d],dt(g?a/b*f:a/100*b);if(l[u?"width":"height"]=f+(p?s:i),h=i!=="rem"&&~n.indexOf("adius")||i==="em"&&t.appendChild&&!c?t:t.parentNode,y&&(h=(t.ownerSVGElement||{}).parentNode),(!h||h===nr||!h.appendChild)&&(h=nr.body),m=h._gsap,m&&g&&m.width&&u&&m.time===qt.time&&!m.uncache)return dt(a/m.width*f);if(g&&(n==="height"||n==="width")){var S=t.style[n];t.style[n]=f+i,b=t[d],S?t.style[n]=S:Nr(t,n)}else(g||s==="%")&&!XS[rn(h,"display")]&&(l.position=rn(t,"position")),h===t&&(l.position="static"),h.appendChild(kr),b=kr[d],h.removeChild(kr),l.position="absolute";return u&&g&&(m=_r(h),m.time=qt.time,m.width=h[d]),dt(p?b*a/f:b&&a?f/b*a:0)},Hn=function(t,n,r,i){var a;return Ac||Hc(),n in jn&&n!=="transform"&&(n=jn[n],~n.indexOf(",")&&(n=n.split(",")[0])),On[n]&&n!=="transform"?(a=xa(t,i),a=n!=="transformOrigin"?a[n]:a.svg?a.origin:Xs(rn(t,zt))+" "+a.zOrigin+"px"):(a=t.style[n],(!a||a==="auto"||i||~(a+"").indexOf("calc("))&&(a=qs[n]&&qs[n](t,n,r)||rn(t,n)||Wg(t,n)||(n==="opacity"?1:0))),r&&!~(a+"").trim().indexOf(" ")?ir(t,n,a,r)+r:a},KS=function(t,n,r,i){if(!r||r==="none"){var a=ui(n,t,1),s=a&&rn(t,a,1);s&&s!==r?(n=a,r=s):n==="borderColor"&&(r=rn(t,"borderTopColor"))}var l=new Ot(this._pt,t.style,n,0,1,S0),u=0,c=0,d,f,p,g,b,h,m,y,S,M,w,v;if(l.b=r,l.e=i,r+="",i+="",i.substring(0,6)==="var(--"&&(i=rn(t,i.substring(4,i.indexOf(")")))),i==="auto"&&(h=t.style[n],t.style[n]=i,i=rn(t,n)||i,h?t.style[n]=h:Nr(t,n)),d=[r,i],h0(d),r=d[0],i=d[1],p=r.match(ei)||[],v=i.match(ei)||[],v.length){for(;f=ei.exec(i);)m=f[0],S=i.substring(u,f.index),b?b=(b+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(b=1),m!==(h=p[c++]||"")&&(g=parseFloat(h)||0,w=h.substr((g+"").length),m.charAt(1)==="="&&(m=ti(g,m)+w),y=parseFloat(m),M=m.substr((y+"").length),u=ei.lastIndex-M.length,M||(M=M||Wt.units[n]||w,u===i.length&&(i+=M,l.e+=M)),w!==M&&(g=ir(t,n,h,M)||0),l._pt={_next:l._pt,p:S||c===1?S:",",s:g,c:y-g,m:b&&b<4||n==="zIndex"?Math.round:0});l.c=u<i.length?i.substring(u,i.length):""}else l.r=n==="display"&&i==="none"?I0:M0;return Ag.test(i)&&(l.e=0),this._pt=l,l},H0={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},JS=function(t){var n=t.split(" "),r=n[0],i=n[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(t=r,r=i,i=t),n[0]=H0[r]||r,n[1]=H0[i]||i,n.join(" ")},ZS=function(t,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,i=r.style,a=n.u,s=r._gsap,l,u,c;if(a==="all"||a===!0)i.cssText="",u=1;else for(a=a.split(","),c=a.length;--c>-1;)l=a[c],On[l]&&(u=1,l=l==="transformOrigin"?zt:ot),Nr(r,l);u&&(Nr(r,ot),s&&(s.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",xa(r,1),s.uncache=1,P0(i)))}},qs={clearProps:function(t,n,r,i,a){if(a.data!=="isFromStart"){var s=t._pt=new Ot(t._pt,n,r,0,0,ZS);return s.u=i,s.pr=-10,s.tween=a,t._props.push(r),1}}},_a=[1,0,0,1,0,0],z0={},W0=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},U0=function(t){var n=rn(t,ot);return W0(n)?_a:n.substr(7).match(Lg).map(dt)},zc=function(t,n){var r=t._gsap||_r(t),i=t.style,a=U0(t),s,l,u,c;return r.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,a=[u.a,u.b,u.c,u.d,u.e,u.f],a.join(",")==="1,0,0,1,0,0"?_a:a):(a===_a&&!t.offsetParent&&t!==oi&&!r.svg&&(u=i.display,i.display="block",s=t.parentNode,(!s||!t.offsetParent&&!t.getBoundingClientRect().width)&&(c=1,l=t.nextElementSibling,oi.appendChild(t)),a=U0(t),u?i.display=u:Nr(t,"display"),c&&(l?s.insertBefore(t,l):s?s.appendChild(t):oi.removeChild(t))),n&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},Wc=function(t,n,r,i,a,s){var l=t._gsap,u=a||zc(t,!0),c=l.xOrigin||0,d=l.yOrigin||0,f=l.xOffset||0,p=l.yOffset||0,g=u[0],b=u[1],h=u[2],m=u[3],y=u[4],S=u[5],M=n.split(" "),w=parseFloat(M[0])||0,v=parseFloat(M[1])||0,D,N,k,x;r?u!==_a&&(N=g*m-b*h)&&(k=w*(m/N)+v*(-h/N)+(h*S-m*y)/N,x=w*(-b/N)+v*(g/N)-(g*S-b*y)/N,w=k,v=x):(D=B0(t),w=D.x+(~M[0].indexOf("%")?w/100*D.width:w),v=D.y+(~(M[1]||M[0]).indexOf("%")?v/100*D.height:v)),i||i!==!1&&l.smooth?(y=w-c,S=v-d,l.xOffset=f+(y*g+S*h)-y,l.yOffset=p+(y*b+S*m)-S):l.xOffset=l.yOffset=0,l.xOrigin=w,l.yOrigin=v,l.smooth=!!i,l.origin=n,l.originIsAbsolute=!!r,t.style[zt]="0px 0px",s&&(rr(s,l,"xOrigin",c,w),rr(s,l,"yOrigin",d,v),rr(s,l,"xOffset",f,l.xOffset),rr(s,l,"yOffset",p,l.yOffset)),t.setAttribute("data-svg-origin",w+" "+v)},xa=function(t,n){var r=t._gsap||new b0(t);if("x"in r&&!n&&!r.uncache)return r;var i=t.style,a=r.scaleX<0,s="px",l="deg",u=getComputedStyle(t),c=rn(t,zt)||"0",d,f,p,g,b,h,m,y,S,M,w,v,D,N,k,x,I,j,C,$,T,F,P,L,te,Y,O,H,z,ie,V,ce;return d=f=p=h=m=y=S=M=w=0,g=b=1,r.svg=!!(t.getCTM&&R0(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(i[ot]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[ot]!=="none"?u[ot]:"")),i.scale=i.rotate=i.translate="none"),N=zc(t,r.svg),r.svg&&(r.uncache?(te=t.getBBox(),c=r.xOrigin-te.x+"px "+(r.yOrigin-te.y)+"px",L=""):L=!n&&t.getAttribute("data-svg-origin"),Wc(t,L||c,!!L||r.originIsAbsolute,r.smooth!==!1,N)),v=r.xOrigin||0,D=r.yOrigin||0,N!==_a&&(j=N[0],C=N[1],$=N[2],T=N[3],d=F=N[4],f=P=N[5],N.length===6?(g=Math.sqrt(j*j+C*C),b=Math.sqrt(T*T+$*$),h=j||C?ci(C,j)*Tr:0,S=$||T?ci($,T)*Tr+h:0,S&&(b*=Math.abs(Math.cos(S*li))),r.svg&&(d-=v-(v*j+D*$),f-=D-(v*C+D*T))):(ce=N[6],ie=N[7],O=N[8],H=N[9],z=N[10],V=N[11],d=N[12],f=N[13],p=N[14],k=ci(ce,z),m=k*Tr,k&&(x=Math.cos(-k),I=Math.sin(-k),L=F*x+O*I,te=P*x+H*I,Y=ce*x+z*I,O=F*-I+O*x,H=P*-I+H*x,z=ce*-I+z*x,V=ie*-I+V*x,F=L,P=te,ce=Y),k=ci(-$,z),y=k*Tr,k&&(x=Math.cos(-k),I=Math.sin(-k),L=j*x-O*I,te=C*x-H*I,Y=$*x-z*I,V=T*I+V*x,j=L,C=te,$=Y),k=ci(C,j),h=k*Tr,k&&(x=Math.cos(k),I=Math.sin(k),L=j*x+C*I,te=F*x+P*I,C=C*x-j*I,P=P*x-F*I,j=L,F=te),m&&Math.abs(m)+Math.abs(h)>359.9&&(m=h=0,y=180-y),g=dt(Math.sqrt(j*j+C*C+$*$)),b=dt(Math.sqrt(P*P+ce*ce)),k=ci(F,P),S=Math.abs(k)>2e-4?k*Tr:0,w=V?1/(V<0?-V:V):0),r.svg&&(L=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!W0(rn(t,ot)),L&&t.setAttribute("transform",L))),Math.abs(S)>90&&Math.abs(S)<270&&(a?(g*=-1,S+=h<=0?180:-180,h+=h<=0?180:-180):(b*=-1,S+=S<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-d)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+s,r.y=f-((r.yPercent=f&&(!n&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-f)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+s,r.z=p+s,r.scaleX=dt(g),r.scaleY=dt(b),r.rotation=dt(h)+l,r.rotationX=dt(m)+l,r.rotationY=dt(y)+l,r.skewX=S+l,r.skewY=M+l,r.transformPerspective=w+s,(r.zOrigin=parseFloat(c.split(" ")[2])||!n&&r.zOrigin||0)&&(i[zt]=Xs(c)),r.xOffset=r.yOffset=0,r.force3D=Wt.force3D,r.renderTransform=r.svg?eC:$0?V0:QS,r.uncache=0,r},Xs=function(t){return(t=t.split(" "))[0]+" "+t[1]},Uc=function(t,n,r){var i=It(n);return dt(parseFloat(n)+parseFloat(ir(t,"x",r+"px",i)))+i},QS=function(t,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,V0(t,n)},jr="0deg",wa="0px",Dr=") ",V0=function(t,n){var r=n||this,i=r.xPercent,a=r.yPercent,s=r.x,l=r.y,u=r.z,c=r.rotation,d=r.rotationY,f=r.rotationX,p=r.skewX,g=r.skewY,b=r.scaleX,h=r.scaleY,m=r.transformPerspective,y=r.force3D,S=r.target,M=r.zOrigin,w="",v=y==="auto"&&t&&t!==1||y===!0;if(M&&(f!==jr||d!==jr)){var D=parseFloat(d)*li,N=Math.sin(D),k=Math.cos(D),x;D=parseFloat(f)*li,x=Math.cos(D),s=Uc(S,s,N*x*-M),l=Uc(S,l,-Math.sin(D)*-M),u=Uc(S,u,k*x*-M+M)}m!==wa&&(w+="perspective("+m+Dr),(i||a)&&(w+="translate("+i+"%, "+a+"%) "),(v||s!==wa||l!==wa||u!==wa)&&(w+=u!==wa||v?"translate3d("+s+", "+l+", "+u+") ":"translate("+s+", "+l+Dr),c!==jr&&(w+="rotate("+c+Dr),d!==jr&&(w+="rotateY("+d+Dr),f!==jr&&(w+="rotateX("+f+Dr),(p!==jr||g!==jr)&&(w+="skew("+p+", "+g+Dr),(b!==1||h!==1)&&(w+="scale("+b+", "+h+Dr),S.style[ot]=w||"translate(0, 0)"},eC=function(t,n){var r=n||this,i=r.xPercent,a=r.yPercent,s=r.x,l=r.y,u=r.rotation,c=r.skewX,d=r.skewY,f=r.scaleX,p=r.scaleY,g=r.target,b=r.xOrigin,h=r.yOrigin,m=r.xOffset,y=r.yOffset,S=r.forceCSS,M=parseFloat(s),w=parseFloat(l),v,D,N,k,x;u=parseFloat(u),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,u+=d),u||c?(u*=li,c*=li,v=Math.cos(u)*f,D=Math.sin(u)*f,N=Math.sin(u-c)*-p,k=Math.cos(u-c)*p,c&&(d*=li,x=Math.tan(c-d),x=Math.sqrt(1+x*x),N*=x,k*=x,d&&(x=Math.tan(d),x=Math.sqrt(1+x*x),v*=x,D*=x)),v=dt(v),D=dt(D),N=dt(N),k=dt(k)):(v=f,k=p,D=N=0),(M&&!~(s+"").indexOf("px")||w&&!~(l+"").indexOf("px"))&&(M=ir(g,"x",s,"px"),w=ir(g,"y",l,"px")),(b||h||m||y)&&(M=dt(M+b-(b*v+h*N)+m),w=dt(w+h-(b*D+h*k)+y)),(i||a)&&(x=g.getBBox(),M=dt(M+i/100*x.width),w=dt(w+a/100*x.height)),x="matrix("+v+","+D+","+N+","+k+","+M+","+w+")",g.setAttribute("transform",x),S&&(g.style[ot]=x)},tC=function(t,n,r,i,a){var s=360,l=wt(a),u=parseFloat(a)*(l&&~a.indexOf("rad")?Tr:1),c=u-i,d=i+c+"deg",f,p;return l&&(f=a.split("_")[1],f==="short"&&(c%=s,c!==c%(s/2)&&(c+=c<0?s:-s)),f==="cw"&&c<0?c=(c+s*D0)%s-~~(c/s)*s:f==="ccw"&&c>0&&(c=(c-s*D0)%s-~~(c/s)*s)),t._pt=p=new Ot(t._pt,n,r,i,c,BS),p.e=d,p.u="deg",t._props.push(r),p},G0=function(t,n){for(var r in n)t[r]=n[r];return t},nC=function(t,n,r){var i=G0({},r._gsap),a="perspective,force3D,transformOrigin,svgOrigin",s=r.style,l,u,c,d,f,p,g,b;i.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),s[ot]=n,l=xa(r,1),Nr(r,ot),r.setAttribute("transform",c)):(c=getComputedStyle(r)[ot],s[ot]=n,l=xa(r,1),s[ot]=c);for(u in On)c=i[u],d=l[u],c!==d&&a.indexOf(u)<0&&(g=It(c),b=It(d),f=g!==b?ir(r,u,c,b):parseFloat(c),p=parseFloat(d),t._pt=new Ot(t._pt,l,u,f,p-f,Rc),t._pt.u=b||0,t._props.push(u));G0(l,i)};Rt("padding,margin,Width,Radius",function(e,t){var n="Top",r="Right",i="Bottom",a="Left",s=(t<3?[n,r,i,a]:[n+a,n+r,i+r,i+a]).map(function(l){return t<2?e+l:"border"+l+e});qs[t>1?"border"+e:e]=function(l,u,c,d,f){var p,g;if(arguments.length<4)return p=s.map(function(b){return Hn(l,b,c)}),g=p.join(" "),g.split(p[0]).length===5?p[0]:g;p=(d+"").split(" "),g={},s.forEach(function(b,h){return g[b]=p[h]=p[h]||p[(h-1)/2|0]}),l.init(u,g,f)}});var Vc={name:"css",register:Hc,targetTest:function(t){return t.style&&t.nodeType},init:function(t,n,r,i,a){var s=this._props,l=t.style,u=r.vars.startAt,c,d,f,p,g,b,h,m,y,S,M,w,v,D,N,k;Ac||Hc(),this.styles=this.styles||F0(t),k=this.styles.props,this.tween=r;for(h in n)if(h!=="autoRound"&&(d=n[h],!(Vt[h]&&y0(h,n,r,i,t,a)))){if(g=typeof d,b=qs[h],g==="function"&&(d=d.call(r,i,t,a),g=typeof d),g==="string"&&~d.indexOf("random(")&&(d=pa(d)),b)b(this,t,h,d,r)&&(N=1);else if(h.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(h)+"").trim(),d+="",er.lastIndex=0,er.test(c)||(m=It(c),y=It(d)),y?m!==y&&(c=ir(t,h,c,y)+y):m&&(d+=m),this.add(l,"setProperty",c,d,i,a,0,0,h),s.push(h),k.push(h,0,l[h]);else if(g!=="undefined"){if(u&&h in u?(c=typeof u[h]=="function"?u[h].call(r,i,t,a):u[h],wt(c)&&~c.indexOf("random(")&&(c=pa(c)),It(c+"")||c==="auto"||(c+=Wt.units[h]||It(Hn(t,h))||""),(c+"").charAt(1)==="="&&(c=Hn(t,h))):c=Hn(t,h),p=parseFloat(c),S=g==="string"&&d.charAt(1)==="="&&d.substr(0,2),S&&(d=d.substr(2)),f=parseFloat(d),h in jn&&(h==="autoAlpha"&&(p===1&&Hn(t,"visibility")==="hidden"&&f&&(p=0),k.push("visibility",0,l.visibility),rr(this,l,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),h!=="scale"&&h!=="transform"&&(h=jn[h],~h.indexOf(",")&&(h=h.split(",")[0]))),M=h in On,M){if(this.styles.save(h),g==="string"&&d.substring(0,6)==="var(--"&&(d=rn(t,d.substring(4,d.indexOf(")"))),f=parseFloat(d)),w||(v=t._gsap,v.renderTransform&&!n.parseTransform||xa(t,n.parseTransform),D=n.smoothOrigin!==!1&&v.smooth,w=this._pt=new Ot(this._pt,l,ot,0,1,v.renderTransform,v,0,-1),w.dep=1),h==="scale")this._pt=new Ot(this._pt,v,"scaleY",v.scaleY,(S?ti(v.scaleY,S+f):f)-v.scaleY||0,Rc),this._pt.u=0,s.push("scaleY",h),h+="X";else if(h==="transformOrigin"){k.push(zt,0,l[zt]),d=JS(d),v.svg?Wc(t,d,0,D,0,this):(y=parseFloat(d.split(" ")[2])||0,y!==v.zOrigin&&rr(this,v,"zOrigin",v.zOrigin,y),rr(this,l,h,Xs(c),Xs(d)));continue}else if(h==="svgOrigin"){Wc(t,d,1,D,0,this);continue}else if(h in z0){tC(this,v,h,p,S?ti(p,S+d):d);continue}else if(h==="smoothOrigin"){rr(this,v,"smooth",v.smooth,d);continue}else if(h==="force3D"){v[h]=d;continue}else if(h==="transform"){nC(this,d,t);continue}}else h in l||(h=ui(h)||h);if(M||(f||f===0)&&(p||p===0)&&!ES.test(d)&&h in l)m=(c+"").substr((p+"").length),f||(f=0),y=It(d)||(h in Wt.units?Wt.units[h]:m),m!==y&&(p=ir(t,h,c,y)),this._pt=new Ot(this._pt,M?v:l,h,p,(S?ti(p,S+f):f)-p,!M&&(y==="px"||h==="zIndex")&&n.autoRound!==!1?OS:Rc),this._pt.u=y||0,m!==y&&y!=="%"&&(this._pt.b=c,this._pt.r=RS);else if(h in l)KS.call(this,t,h,c,S?S+d:d);else if(h in t)this.add(t,h,c||t[h],S?S+d:d,i,a);else if(h!=="parseTransform"){fc(h,d);continue}M||(h in l?k.push(h,0,l[h]):typeof t[h]=="function"?k.push(h,2,t[h]()):k.push(h,1,c||t[h])),s.push(h)}}N&&C0(this)},render:function(t,n){if(n.tween._time||!Ec())for(var r=n._pt;r;)r.r(t,r.d),r=r._next;else n.styles.revert()},get:Hn,aliases:jn,getSetter:function(t,n,r){var i=jn[n];return i&&i.indexOf(",")<0&&(n=i),n in On&&n!==zt&&(t._gsap.x||Hn(t,"x"))?r&&j0===r?n==="scale"?US:WS:(j0=r||{})&&(n==="scale"?VS:GS):t.style&&!sc(t.style[n])?HS:~n.indexOf("-")?zS:Ic(t,n)},core:{_removeProperty:Nr,_getMatrix:zc}};Ht.utils.checkPrefix=ui,Ht.core.getStyleSaver=F0,(function(e,t,n,r){var i=Rt(e+","+t+","+n,function(a){On[a]=1});Rt(t,function(a){Wt.units[a]="deg",z0[a]=1}),jn[i[13]]=e+","+t,Rt(r,function(a){var s=a.split(":");jn[s[1]]=i[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),Rt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){Wt.units[e]="px"}),Ht.registerPlugin(Vc);var Gc=Ht.registerPlugin(Vc)||Ht,rC=Gc.core.Tween;const iC=Object.freeze(Object.defineProperty({__proto__:null,Back:DS,Bounce:IS,CSSPlugin:Vc,Circ:$S,Cubic:CS,Elastic:jS,Expo:FS,Linear:wS,Power0:bS,Power1:yS,Power2:vS,Power3:_S,Power4:xS,Quad:SS,Quart:kS,Quint:TS,Sine:PS,SteppedEase:MS,Strong:NS,TimelineLite:Nt,TimelineMax:Nt,TweenLite:ft,TweenMax:rC,default:Gc,gsap:Gc},Symbol.toStringTag,{value:"Module"}));_.Account=Zs,_.ActionLink=rb,_.AdaptiveDataGrid=Bo,_.AnimationDurationFast=Kf,_.AnimationDurationNormal=Jf,_.AnimationDurationSlow=Zf,_.AnimationEasingBounce=nh,_.AnimationEasingEaseIn=Qf,_.AnimationEasingEaseInOut=th,_.AnimationEasingEaseOut=eh,_.AppointmentCard=Lo,_.AreaSeriesPrimitive=Kx,_.AriaDataGrid=xd,_.AriaTabsDataGrid=Xa,_.AriaTabsDataGridAdaptive=Bo,_.Axis=Yo,_.BackLink=ka,_.BandScalesProvider=Zx,_.BarSeriesPrimitive=Jx,_.BorderColorCard=ml,_.BorderColorCardHover=gl,_.BorderColorDefault=hl,_.BorderColorError=bl,_.BorderColorForm=pl,_.BorderRadiusLarge=bh,_.BorderRadiusMedium=gh,_.BorderRadiusNone=ph,_.BorderRadiusSmall=mh,_.BorderWidthCardBottom=uh,_.BorderWidthDefault=oh,_.BorderWidthFormElement=lh,_.BorderWidthFormElementError=ch,_.BorderWidthPanel=dh,_.BorderWidthTableCell=hh,_.BorderWidthTableHeader=fh,_.Breadcrumb=cd,_.Breakpoint=lu,_.BreakpointDesktop=Jm,_.BreakpointLargeDesktop=Zm,_.BreakpointMobile=Xm,_.BreakpointTablet=Km,_.Button=yt,_.ButtonBorderRadius=Gp,_.ButtonBorderWidth=Vp,_.ButtonPrimaryBackgroundActive=Fp,_.ButtonPrimaryBackgroundDefault=Ip,_.ButtonPrimaryBackgroundDisabled=$p,_.ButtonPrimaryBackgroundHover=Pp,_.ButtonPrimaryBorderDefault=Ep,_.ButtonPrimaryBorderFocus=Bp,_.ButtonPrimaryTextDefault=Lp,_.ButtonPrimaryTextDisabled=Ap,_.ButtonSecondaryBackgroundActive=zp,_.ButtonSecondaryBackgroundDefault=Rp,_.ButtonSecondaryBackgroundHover=Hp,_.ButtonSecondaryBackgroundSolid=Op,_.ButtonSecondaryBorderDefault=Up,_.ButtonSecondaryTextDefault=Wp,_.ButtonShadowSize=Yp,_.ButtonSize=eo,_.ButtonSpacingPaddingHorizontalDesktop=Rl,_.ButtonSpacingPaddingHorizontalMobile=El,_.ButtonSpacingPaddingVerticalDesktop=Bl,_.ButtonSpacingPaddingVerticalMobile=Al,_.ButtonTypographyWeight=qp,_.ButtonVariant=Qs,_.Card=Io,_.CardBackgroundDefault=Xp,_.CardBorderBottom=Zp,_.CardBorderDefault=Kp,_.CardBorderHover=Jp,_.CardBorderWidthBottom=rm,_.CardBorderWidthDefault=nm,_.CardGroup=o_,_.CardGroupItem=l_,_.CardShadowDefault=im,_.CardShadowHover=am,_.CardSpacingHeadingMargin=zl,_.CardSpacingPaddingDesktop=Hl,_.CardSpacingPaddingMobile=Ol,_.CardTextDescription=em,_.CardTextHeading=Qp,_.CardTextLink=tm,_.CareCard=c_,_.CharacterCount=hb,_.ChartEnhancer=e1,_.ChartNoScript=Qx,_.ChartRoot=nf,_.Checkbox=nu,_.Checkboxes=iu,_.ColorBorderDefault=jh,_.ColorBorderSecondary=Dh,_.ColorButtonLoginActive=np,_.ColorButtonLoginBackground=ep,_.ColorButtonLoginHover=tp,_.ColorButtonLoginShadow=rp,_.ColorButtonPrimaryActive=Ah,_.ColorButtonPrimaryBackground=Fh,_.ColorButtonPrimaryHover=Lh,_.ColorButtonPrimaryShadow=Eh,_.ColorButtonPrimaryText=$h,_.ColorButtonReverseActive=qh,_.ColorButtonReverseBackground=Vh,_.ColorButtonReverseHover=Yh,_.ColorButtonReverseShadow=Xh,_.ColorButtonReverseText=Gh,_.ColorButtonSecondaryActive=Wh,_.ColorButtonSecondaryBackground=Bh,_.ColorButtonSecondaryBackgroundSolid=Rh,_.ColorButtonSecondaryBorder=Oh,_.ColorButtonSecondaryHover=zh,_.ColorButtonSecondaryShadow=Uh,_.ColorButtonSecondaryText=Hh,_.ColorButtonWarningActive=Zh,_.ColorButtonWarningBackground=Kh,_.ColorButtonWarningHover=Jh,_.ColorButtonWarningShadow=Qh,_.ColorError=Mh,_.ColorFocusBackground=Th,_.ColorFocusText=Nh,_.ColorFormBackground=Ph,_.ColorFormBorder=Ih,_.ColorGrey1=Il,_.ColorGrey2=Pl,_.ColorGrey3=Fl,_.ColorGrey4=$l,_.ColorGrey5=Ll,_.ColorLinkActive=Ch,_.ColorLinkDefault=wh,_.ColorLinkHover=Sh,_.ColorLinkVisited=kh,_.ColorPrimaryBlack=_l,_.ColorPrimaryBlue=yl,_.ColorPrimaryDarkPink=Sl,_.ColorPrimaryGreen=xl,_.ColorPrimaryPurple=wl,_.ColorPrimaryRed=Cl,_.ColorPrimaryWhite=vl,_.ColorPrimaryYellow=kl,_.ColorSecondaryAquaGreen=Dl,_.ColorSecondaryOrange=jl,_.ColorSecondaryPaleYellow=Tl,_.ColorSecondaryPink=Ml,_.ColorSecondaryWarmYellow=Nl,_.ColorTextPrimary=yh,_.ColorTextPrint=xh,_.ColorTextReverse=_h,_.ColorTextSecondary=vh,_.Column=$r,_.ColumnAlign=uu,_.ComponentBlur=Tp,_.ComponentBreadcrumbChevronMarginLeft=yp,_.ComponentBreadcrumbChevronMarginRight=vp,_.ComponentBreadcrumbPaddingTopDesktop=xp,_.ComponentBreadcrumbPaddingTopMobile=_p,_.ComponentButtonPaddingDesktopHorizontal=op,_.ComponentButtonPaddingDesktopVertical=sp,_.ComponentButtonPaddingMobileHorizontal=ap,_.ComponentButtonPaddingMobileVertical=ip,_.ComponentButtonShadowSize=lp,_.ComponentCardHeadingMargin=mp,_.ComponentCardPaddingDesktop=pp,_.ComponentCardPaddingMobile=hp,_.ComponentDetails=jp,_.ComponentExpander=Dp,_.ComponentFormCheckboxLabelPadding=fp,_.ComponentFormCheckboxSize=dp,_.ComponentFormInputMinHeight=cp,_.ComponentFormInputPadding=up,_.ComponentLink=Np,_.ComponentPagination=Mp,_.ComponentPanelPaddingDesktop=bp,_.ComponentPanelPaddingMobile=gp,_.ComponentSpread=kp,_.ComponentSummaryListCellPaddingHorizontal=Sp,_.ComponentSummaryListCellPaddingVertical=wp,_.ComponentSummaryListRowMargin=Cp,_.Container=ro,_.ContentsList=s_,_.DEFAULT_FONT_CONFIG=rc,_.DashboardSummaryGrid=k_,_.DateInput=Mb,_.Details=md,_.DoDontList=gd,_.ElevationHigh=Ig,_.ElevationLow=Dg,_.ElevationMedium=Mg,_.ElevationNone=jg,_.ErrorMessage=ao,_.ErrorSummary=Db,_.Expander=bd,_.FRUTIGER_FONT_FILES=At,_.Fieldset=ja,_.Float=cu,_.FocusOutlineOffset=Cg,_.FocusOutlineStyle=kg,_.FocusOutlineWidth=Sg,_.FocusShadowButton=Ng,_.FocusShadowInput=Tg,_.FontFamilyBase=Ai,_.FontFamilyFallback=Ei,_.FontFamilyPrint=Bi,_.FontLineHeightBase=Ls,_.FontSize14Mobile=zi,_.FontSize14Print=Ui,_.FontSize14Tablet=Wi,_.FontSize16Mobile=Vi,_.FontSize16Print=Yi,_.FontSize16Tablet=Gi,_.FontSize19Mobile=qi,_.FontSize19Print=Ki,_.FontSize19Tablet=Xi,_.FontSize22Mobile=Ji,_.FontSize22Print=Qi,_.FontSize22Tablet=Zi,_.FontSize26Mobile=ea,_.FontSize26Print=na,_.FontSize26Tablet=ta,_.FontSize36Mobile=ra,_.FontSize36Print=aa,_.FontSize36Tablet=ia,_.FontSize48Mobile=sa,_.FontSize48Print=la,_.FontSize48Tablet=oa,_.FontSizeBase=$s,_.FontWeightBold=Oi,_.FontWeightLight=Hi,_.FontWeightNormal=Ri,_.Footer=so,_.FormBorderRadius=km,_.FormBorderWidthDefault=Sm,_.FormBorderWidthError=Cm,_.FormErrorTextDefault=_m,_.FormErrorTypographyWeight=xm,_.FormHintTextDefault=wm,_.FormInputBackgroundDefault=sm,_.FormInputBackgroundDisabled=lm,_.FormInputBackgroundError=cm,_.FormInputBackgroundFocus=om,_.FormInputBorderDefault=um,_.FormInputBorderDisabled=hm,_.FormInputBorderError=fm,_.FormInputBorderFocus=dm,_.FormInputTextDefault=pm,_.FormInputTextDisabled=gm,_.FormInputTextPlaceholder=mm,_.FormLabelTextDefault=bm,_.FormLabelTextRequired=ym,_.FormLabelTypographyWeight=vm,_.FormSpacingCheckboxLabelPadding=Gl,_.FormSpacingCheckboxSize=Vl,_.FormSpacingInputMinHeight=Ul,_.FormSpacingInputPadding=Wl,_.GanttChart=i_,_.Grid=Da,_.GridGutter=eg,_.GridGutterHalf=tg,_.GridLines=af,_.GridPageWidth=Qm,_.GridWidth=Vn,_.Header=Ma,_.HeaderSSR=Bb,_.HeaderSearch=pu,_.HeaderStatic=Ma,_.Heading=cn,_.HeadingsNhsukHeadingL=gn,_.HeadingsNhsukHeadingM=bn,_.HeadingsNhsukHeadingS=yn,_.HeadingsNhsukHeadingXl=mn,_.HeadingsNhsukHeadingXs=vn,_.Hero=mu,_.Hint=no,_.Images=__,_.Input=Ta,_.InsetText=u_,_.Label=Na,_.LayoutColumnActions=qm,_.LayoutColumnFull=Um,_.LayoutColumnHalf=Vm,_.LayoutColumnQuarter=Ym,_.LayoutColumnThird=Gm,_.LayoutContainerMaxWidth=Wm,_.Legend=Xx,_.LineScalesProvider=rf,_.LineSeriesPrimitive=mf,_.List=du,_.MainWrapper=io,_.MedicationCard=Ao,_.MetricCard=gf,_.NHSBodyText=aw,_.NHSBodyTextLarge=sw,_.NHSBodyTextSmall=ow,_.NHSHeading1=ew,_.NHSHeading2=tw,_.NHSHeading3=nw,_.NHSHeading4=rw,_.NHSHeading5=iw,_.NHSLedeText=lw,_.NHSLedeTextSmall=cw,_.NHSThemeProvider=Lb,_.NHS_FALLBACK_FONT_STACK=Sw,_.NHS_FONT_STACK=ww,_.NavigationSplitView=Rd,_.PageTemplate=tx,_.Pagination=a_,_.Panel=ud,_.ParagraphsBody=_n,_.ParagraphsBodyLarge=xn,_.ParagraphsBodySmall=wn,_.ParagraphsLedeText=Sn,_.ParagraphsLedeTextSmall=Cn,_.PatientCard=$o,_.ProductRoadmap=Hd,_.Radios=gb,_.RadiosServer=yb,_.ResponsiveDataGrid=Bo,_.ResponsiveDataGridDemo=ex,_.Row=Gn,_.SPC=J1,_.SPCChart=Xf,_.SPCMetricCard=I1,_.Select=bi,_.SelectOption=su,_.ShadowButtonDefault=bg,_.ShadowButtonFocus=_g,_.ShadowButtonSecondary=yg,_.ShadowButtonWarning=vg,_.ShadowCardDefault=xg,_.ShadowCardHover=wg,_.SizeButtonMinHeightDesktop=zm,_.SizeButtonMinHeightMobile=Hm,_.SizeFormControlLarge=Fm,_.SizeFormControlMedium=Pm,_.SizeFormControlSmall=Im,_.SizeFormInputWidth2xl=Rm,_.SizeFormInputWidth3xl=Om,_.SizeFormInputWidthLg=Em,_.SizeFormInputWidthMd=Am,_.SizeFormInputWidthSm=Lm,_.SizeFormInputWidthXl=Bm,_.SizeFormInputWidthXs=$m,_.SizeIconExtraLarge=Dm,_.SizeIconLarge=jm,_.SizeIconMedium=Nm,_.SizeIconNhsDefault=Mm,_.SizeIconSmall=Tm,_.SkipLink=Mo,_.SlotMatrix=C_,_.SortStatusControl=I_,_.Spacing0=Yl,_.Spacing1=ql,_.Spacing2=Xl,_.Spacing3=Kl,_.Spacing4=Jl,_.Spacing5=Zl,_.Spacing6=Ql,_.Spacing7=ec,_.Spacing8=tc,_.Spacing9=nc,_.SpacingResponsive0Mobile=ps,_.SpacingResponsive0Tablet=ms,_.SpacingResponsive1Mobile=gs,_.SpacingResponsive1Tablet=bs,_.SpacingResponsive2Mobile=ys,_.SpacingResponsive2Tablet=vs,_.SpacingResponsive3Mobile=_s,_.SpacingResponsive3Tablet=xs,_.SpacingResponsive4Mobile=ws,_.SpacingResponsive4Tablet=Ss,_.SpacingResponsive5Mobile=Cs,_.SpacingResponsive5Tablet=ks,_.SpacingResponsive6Mobile=Ts,_.SpacingResponsive6Tablet=Ns,_.SpacingResponsive7Mobile=js,_.SpacingResponsive7Tablet=Ds,_.SpacingResponsive8Mobile=Ms,_.SpacingResponsive8Tablet=Is,_.SpacingResponsive9Mobile=Ps,_.SpacingResponsive9Tablet=Fs,_.SpacingUtilities=xb,_.StateDisabledBackground=pg,_.StateDisabledBorder=mg,_.StateDisabledText=gg,_.StateErrorBackground=ng,_.StateErrorBorder=rg,_.StateErrorText=ig,_.StateInfoBackground=dg,_.StateInfoBorder=fg,_.StateInfoText=hg,_.StateSuccessBackground=ag,_.StateSuccessBorder=sg,_.StateSuccessText=og,_.StateWarningBackground=lg,_.StateWarningBorder=cg,_.StateWarningText=ug,_.SummaryCard=_d,_.SummaryList=d_,_.Table=dn,_.Tabs=b_,_.Tag=Ye,_.TaskList=yd,_.Textarea=au,_.TooltipOverlay=qx,_.TooltipProvider=pf,_.TransactionalPageTemplate=nx,_.TransitionButtonDefault=rh,_.TransitionButtonShadow=ih,_.TransitionCardHover=sh,_.TransitionInputFocus=ah,_.VisibilityProvider=Vx,_.VitalsCard=Eo,_.WIDTH_FRACTIONS=kb,_.WarningCallout=v_,_.WidthContainer=Ro,_.WidthUtilities=Sb,_.checkFrutigerLoaded=Cw,_.createGenericTabsConfig=Ja,_.createTCHTabsConfig=E_,_.generateFrutigerFontFace=_w,_.getResponsiveStyles=Q1,_.getSpacingClass=wb,_.getWidthClass=Cb,_.preloadFrutigerFonts=xw,_.tchDataConfig=Sd,_.useColors=dw,_.useComponentSpacing=mw,_.useNHSHeadings=gw,_.useNHSParagraphs=bw,_.useNHSTheme=Pb,_.useNHSTypographySystem=yw,_.useNavigationSplitDrill=vw,_.useNavigationSplitUrlSync=Bd,_.useNhsFdpBreakpoints=Oo,_.useResponsiveSpacing=pw,_.useResponsiveValue=rx,_.useSpacing=fw,_.useSpc=If,_.useTokens=uw,_.useTypography=hw,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.js.map
