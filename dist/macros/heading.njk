{# Manual Heading macro (schema-generated variant may overwrite in dist) #}
{% macro heading(params) %}
  {# Determine level if not provided based on size mapping #}
  {% set size = params.size %}
  {% if params.level %}
    {% set lvl = params.level %}
  {% else %}
    {% if size == 'xxl' or size == 'xl' %}{% set lvl = 1 %}
    {% elif size == 'l' %}{% set lvl = 2 %}
    {% elif size == 'm' %}{% set lvl = 3 %}
    {% elif size == 's' %}{% set lvl = 4 %}
    {% elif size == 'xs' %}{% set lvl = 5 %}
    {% else %}{% set lvl = 2 %}{% endif %}
  {% endif %}
  {% set classes = 'nhsuk-heading' %}
  {% if size %}{% set classes = classes + ' nhsuk-heading--' + size %}{% endif %}
  {% if params.className %}{% set classes = classes + ' ' + params.className %}{% endif %}
  {% if params.marginBottom %}{% set styleAttr = 'margin-bottom:' + params.marginBottom %}{% else %}{% set styleAttr = '' %}{% endif %}
  {% set tag = 'h' + lvl %}
  <{{ tag }} class="{{ classes }}"{% if styleAttr %} style="{{ styleAttr }}"{% endif %}>{{ params.html | safe if params.html else params.text }}</{{ tag }}>
{% endmacro %}
