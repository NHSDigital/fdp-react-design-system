{
  "version": 3,
  "sources": ["../../../../node_modules/classnames/index.js", "../../../../src/components/GroupableDataGrid/GroupableDataGrid.tsx", "../../../../node_modules/d3-hierarchy/src/hierarchy/count.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/each.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/eachBefore.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/eachAfter.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/find.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/sum.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/sort.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/path.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/ancestors.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/descendants.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/leaves.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/links.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/iterator.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/index.js", "../../../../src/components/GroupableDataGrid/utils/aggregations.ts", "../../../../src/components/GroupableDataGrid/utils/HierarchyDataManager.ts", "../../../../src/components/GroupableDataGrid/hooks/useGroupExpansion.ts", "../../../../src/components/GroupableDataGrid/hooks/useTreeNavigation.ts", "../../../../src/components/GroupableDataGrid/components/GroupHeader.tsx", "../../../../src/components/GroupableDataGrid/components/TreeNode.tsx", "../../../../src/components/Button/Button.tsx", "../../../../src/mapping/button.ts"],
  "sourcesContent": ["/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n", "/**\n * GroupableDataGrid Component\n *\n * Unified table component supporting:\n * - Flat mode: Standard data table\n * - Grouped mode: Multi-level row grouping with aggregations\n * - Tree mode: Hierarchical parent-child relationships\n * - Pivot mode: Cross-tabulation (future)\n *\n * Built on D3 hierarchy for consistent data visualization patterns\n */\n\nimport React, { useMemo, useCallback, useRef, useEffect } from \"react\";\nimport classNames from \"classnames\";\nimport {\n\tGroupableDataGridProps,\n\tFlattenedNode,\n} from \"./GroupableDataGrid.types\";\nimport { HierarchyDataManager } from \"./utils/HierarchyDataManager\";\nimport { useGroupExpansion } from \"./hooks/useGroupExpansion\";\nimport { useTreeNavigation } from \"./hooks/useTreeNavigation\";\nimport { enhanceDataWithCalculatedFields } from \"./utils/aggregations\";\nimport { GroupHeader } from \"./components/GroupHeader\";\nimport { TreeNode } from \"./components/TreeNode\";\nimport { ColumnDefinition } from \"../SortableDataTable/AriaDataGridTypes\";\nimport { Button } from \"../Button\";\nimport \"./GroupableDataGrid.scss\";\n\n/**\n * Chevron icon for sorting indicators (matches expander icon style)\n */\nconst ChevronUpIcon: React.FC = () => (\n\t<svg\n\t\twidth=\"16\"\n\t\theight=\"16\"\n\t\tviewBox=\"0 0 16 16\"\n\t\tfill=\"none\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\taria-hidden=\"true\"\n\t>\n\t\t<path\n\t\t\td=\"M12 10L8 6L4 10\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstrokeWidth=\"2\"\n\t\t\tstrokeLinecap=\"round\"\n\t\t\tstrokeLinejoin=\"round\"\n\t\t/>\n\t</svg>\n);\n\nconst ChevronDownIcon: React.FC = () => (\n\t<svg\n\t\twidth=\"16\"\n\t\theight=\"16\"\n\t\tviewBox=\"0 0 16 16\"\n\t\tfill=\"none\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\taria-hidden=\"true\"\n\t>\n\t\t<path\n\t\t\td=\"M4 6L8 10L12 6\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstrokeWidth=\"2\"\n\t\t\tstrokeLinecap=\"round\"\n\t\t\tstrokeLinejoin=\"round\"\n\t\t/>\n\t</svg>\n);\n\nconst SortableIcon: React.FC = () => (\n\t<svg\n\t\twidth=\"16\"\n\t\theight=\"16\"\n\t\tviewBox=\"0 0 16 16\"\n\t\tfill=\"none\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\taria-hidden=\"true\"\n\t>\n\t\t<path\n\t\t\td=\"M12 6L8 2L4 6\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstrokeWidth=\"2\"\n\t\t\tstrokeLinecap=\"round\"\n\t\t\tstrokeLinejoin=\"round\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M4 10L8 14L12 10\"\n\t\t\tstroke=\"currentColor\"\n\t\t\tstrokeWidth=\"2\"\n\t\t\tstrokeLinecap=\"round\"\n\t\t\tstrokeLinejoin=\"round\"\n\t\t/>\n\t</svg>\n);\n\n/**\n * Render a regular data row (flat mode or grouped/tree leaf nodes)\n */\nfunction renderDataRow<T>(\n\tnode: FlattenedNode<T>,\n\tcolumns: ColumnDefinition[],\n\trowIndex: number,\n\tisFocused: boolean,\n\tisSelected: boolean,\n\tonKeyDown?: (event: React.KeyboardEvent) => void,\n\tonClick?: (event: React.MouseEvent) => void\n): React.ReactNode {\n\tif (!node.data) return null;\n\n\treturn (\n\t\t<tr\n\t\t\tkey={node.id}\n\t\t\tclassName={classNames(\"groupable-datagrid__data-row\", {\n\t\t\t\t\"groupable-datagrid__data-row--focused\": isFocused,\n\t\t\t\t\"groupable-datagrid__data-row--selected\": isSelected,\n\t\t\t})}\n\t\t\trole=\"row\"\n\t\t\taria-selected={isSelected}\n\t\t\ttabIndex={isFocused ? 0 : -1}\n\t\t\tonKeyDown={onKeyDown}\n\t\t\tonClick={onClick}\n\t\t\tdata-row-index={rowIndex}\n\t\t\tdata-node-id={node.id}\n\t\t\tstyle={{ cursor: onClick ? \"pointer\" : undefined }}\n\t\t>\n\t\t\t{columns.map((column) => {\n\t\t\t\tconst value = (node.data as any)[column.key];\n\t\t\t\tconst cellContent = column.customRenderer\n\t\t\t\t\t? column.customRenderer(value, node.data)\n\t\t\t\t\t: column.render\n\t\t\t\t\t\t? column.render(node.data)\n\t\t\t\t\t\t: value !== null && value !== undefined\n\t\t\t\t\t\t\t? String(value)\n\t\t\t\t\t\t\t: \"\u2014\";\n\n\t\t\t\treturn (\n\t\t\t\t\t<td\n\t\t\t\t\t\tkey={column.key}\n\t\t\t\t\t\tclassName=\"groupable-datagrid__data-cell\"\n\t\t\t\t\t\trole=\"gridcell\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{cellContent}\n\t\t\t\t\t</td>\n\t\t\t\t);\n\t\t\t})}\n\t\t</tr>\n\t);\n}\n\n/**\n * GroupableDataGrid Component\n */\nexport const GroupableDataGrid = <T extends any = any>({\n\tmode,\n\tdata,\n\tcolumns,\n\tgroupConfig,\n\ttreeConfig,\n\t// pivotConfig, // Future use\n\tcalculatedFields = [],\n\tinitialExpanded,\n\texpandedIds: controlledExpandedIds,\n\tonExpansionChange,\n\t// enableVirtualization = false, // Future use\n\t// virtualizationConfig, // Future use\n\t// onDataChange, // Future use\n\t// enableInlineEditing = false, // Future use\n\t// onCellEditStart, // Future use\n\t// onCellEditComplete, // Future use\n\tselectedRow,\n\tonGlobalRowSelectionChange,\n\tonRowClick,\n\tsortConfig,\n\tonSortChange,\n\tenableMultiSort = false,\n\tshowControls = true,\n\tcontrolsRenderer,\n\tisLoading = false,\n\terror = null,\n\tariaLabel,\n\tariaDescription,\n\tclassName,\n\t\"data-testid\": testId,\n\tmobileDisplay = \"auto\",\n\tmobileBreakpoint = 768,\n}: GroupableDataGridProps<T>): React.ReactElement => {\n\tconst containerRef = useRef<HTMLDivElement>(null);\n\tconst [isMobile, setIsMobile] = React.useState(false);\n\n\t// Detect mobile viewport\n\tReact.useEffect(() => {\n\t\tconst checkMobile = () => {\n\t\t\tsetIsMobile(window.innerWidth < mobileBreakpoint);\n\t\t};\n\n\t\tcheckMobile();\n\t\twindow.addEventListener(\"resize\", checkMobile);\n\t\treturn () => window.removeEventListener(\"resize\", checkMobile);\n\t}, [mobileBreakpoint]);\n\n\t// Determine if we should show cards\n\tconst showCards =\n\t\tmobileDisplay === \"cards\" || (mobileDisplay === \"auto\" && isMobile);\n\tconst showScroll =\n\t\tmobileDisplay === \"scroll\" || (mobileDisplay === \"auto\" && !isMobile);\n\n\t// Sorting logic\n\tconst sortedData = useMemo(() => {\n\t\tif (!sortConfig || sortConfig.length === 0) return data;\n\n\t\tconst sorted = [...data];\n\n\t\t// Apply sorting (last to first for multi-column sort)\n\t\tfor (let i = sortConfig.length - 1; i >= 0; i--) {\n\t\t\tconst config = sortConfig[i];\n\t\t\tconst column = columns.find((c) => c.key === config.key);\n\n\t\t\tsorted.sort((a, b) => {\n\t\t\t\tlet aVal = (a as any)[config.key];\n\t\t\t\tlet bVal = (b as any)[config.key];\n\n\t\t\t\t// Use column render function if available for comparison\n\t\t\t\tif (column?.render) {\n\t\t\t\t\taVal = column.render(a);\n\t\t\t\t\tbVal = column.render(b);\n\t\t\t\t}\n\n\t\t\t\t// Handle null/undefined\n\t\t\t\tif (aVal == null && bVal == null) return 0;\n\t\t\t\tif (aVal == null) return 1;\n\t\t\t\tif (bVal == null) return -1;\n\n\t\t\t\t// Numeric comparison\n\t\t\t\tif (typeof aVal === \"number\" && typeof bVal === \"number\") {\n\t\t\t\t\treturn config.direction === \"asc\" ? aVal - bVal : bVal - aVal;\n\t\t\t\t}\n\n\t\t\t\t// String comparison\n\t\t\t\tconst aStr = String(aVal);\n\t\t\t\tconst bStr = String(bVal);\n\t\t\t\tconst comparison = aStr.localeCompare(bStr);\n\t\t\t\treturn config.direction === \"asc\" ? comparison : -comparison;\n\t\t\t});\n\t\t}\n\n\t\treturn sorted;\n\t}, [data, sortConfig, columns]);\n\n\t// Handle column header click for sorting\n\tconst handleSort = useCallback(\n\t\t(columnKey: string) => {\n\t\t\tif (!onSortChange) return;\n\n\t\t\tconst currentSort = sortConfig?.find((s) => s.key === columnKey);\n\n\t\t\tif (enableMultiSort) {\n\t\t\t\t// Multi-column sort: cycle through asc -> desc -> remove\n\t\t\t\tlet newSortConfig = [...(sortConfig || [])];\n\n\t\t\t\tif (!currentSort) {\n\t\t\t\t\t// Add new sort\n\t\t\t\t\tnewSortConfig.push({ key: columnKey, direction: \"asc\" });\n\t\t\t\t} else if (currentSort.direction === \"asc\") {\n\t\t\t\t\t// Change to desc\n\t\t\t\t\tnewSortConfig = newSortConfig.map((s) =>\n\t\t\t\t\t\ts.key === columnKey ? { ...s, direction: \"desc\" as const } : s\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Remove this sort\n\t\t\t\t\tnewSortConfig = newSortConfig.filter((s) => s.key !== columnKey);\n\t\t\t\t}\n\n\t\t\t\tonSortChange(newSortConfig);\n\t\t\t} else {\n\t\t\t\t// Single-column sort: cycle through asc -> desc -> none\n\t\t\t\tif (!currentSort) {\n\t\t\t\t\tonSortChange([{ key: columnKey, direction: \"asc\" }]);\n\t\t\t\t} else if (currentSort.direction === \"asc\") {\n\t\t\t\t\tonSortChange([{ key: columnKey, direction: \"desc\" }]);\n\t\t\t\t} else {\n\t\t\t\t\t// Remove sort (back to unsorted)\n\t\t\t\t\tonSortChange([]);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[sortConfig, onSortChange, enableMultiSort]\n\t);\n\n\t// Handle row click for selection\n\tconst handleRowClick = useCallback(\n\t\t(rowData: T, event: React.MouseEvent) => {\n\t\t\tif (onRowClick) {\n\t\t\t\tonRowClick(rowData, event);\n\t\t\t}\n\n\t\t\tif (onGlobalRowSelectionChange) {\n\t\t\t\t// Toggle selection: if already selected, deselect; otherwise select\n\t\t\t\tconst isAlreadySelected = selectedRow === rowData;\n\t\t\t\tonGlobalRowSelectionChange(isAlreadySelected ? null : rowData);\n\t\t\t}\n\t\t},\n\t\t[onRowClick, onGlobalRowSelectionChange, selectedRow]\n\t);\n\n\t// Step 1: Enhance data with calculated fields\n\tconst enhancedData = useMemo(() => {\n\t\tconst sourceData = sortedData; // Use sorted data\n\t\tif (calculatedFields.length === 0) return sourceData;\n\t\treturn enhanceDataWithCalculatedFields(sourceData, calculatedFields);\n\t}, [sortedData, calculatedFields]);\n\n\t// Step 2: Create hierarchy manager based on mode\n\tconst hierarchyManager = useMemo(() => {\n\t\tif (mode === \"flat\" || mode === \"pivot\") {\n\t\t\treturn null; // Flat mode doesn't need hierarchy\n\t\t}\n\n\t\tif (mode === \"grouped\") {\n\t\t\tif (!groupConfig) {\n\t\t\t\tconsole.warn(\"GroupableDataGrid: grouped mode requires groupConfig\");\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn new HierarchyDataManager(enhancedData, \"grouped\", groupConfig);\n\t\t}\n\n\t\tif (mode === \"tree\") {\n\t\t\tif (!treeConfig) {\n\t\t\t\tconsole.warn(\"GroupableDataGrid: tree mode requires treeConfig\");\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn new HierarchyDataManager(enhancedData, \"tree\", treeConfig);\n\t\t}\n\n\t\treturn null;\n\t}, [mode, enhancedData, groupConfig, treeConfig]);\n\n\t// Step 3: Expansion state management\n\tconst expansion = useGroupExpansion({\n\t\tinitialExpanded,\n\t\texpandedIds: controlledExpandedIds,\n\t\tonExpansionChange,\n\t\thierarchyManager: hierarchyManager || undefined,\n\t\tmaxAutoExpandDepth:\n\t\t\tgroupConfig?.maxAutoExpandDepth || treeConfig?.maxAutoExpandDepth,\n\t});\n\n\t// Step 4: Get flattened nodes for rendering\n\tconst flattenedNodes = useMemo(() => {\n\t\tif (!hierarchyManager) {\n\t\t\t// Flat mode - create simple flattened nodes\n\t\t\treturn enhancedData.map((item, index) => ({\n\t\t\t\tid: `flat-${index}`,\n\t\t\t\ttype: \"item\" as const,\n\t\t\t\tlevel: 0,\n\t\t\t\tisExpandable: false,\n\t\t\t\tisExpanded: false,\n\t\t\t\tdata: item,\n\t\t\t\tpath: [`flat-${index}`],\n\t\t\t}));\n\t\t}\n\n\t\treturn hierarchyManager.getFlattenedNodes(expansion.expandedIds);\n\t}, [hierarchyManager, expansion.expandedIds, enhancedData]);\n\n\t// Step 5: Tree navigation (keyboard)\n\tconst navigation = useTreeNavigation({\n\t\tflattenedNodes,\n\t\texpansionState: expansion,\n\t\thierarchyManager: hierarchyManager!,\n\t\tcolumnCount: columns.length,\n\t\tenableColumnNavigation: mode === \"tree\",\n\t});\n\n\t// Step 5.5: Programmatically focus the DOM element when focusedNodeId changes\n\tuseEffect(() => {\n\t\tif (navigation.focusedNodeId && containerRef.current) {\n\t\t\t// Find the row element by data-node-id\n\t\t\tconst focusedRow = containerRef.current.querySelector<HTMLElement>(\n\t\t\t\t`[data-node-id=\"${navigation.focusedNodeId}\"]`\n\t\t\t);\n\n\t\t\tif (focusedRow && document.activeElement !== focusedRow) {\n\t\t\t\t// Blur any currently focused element first\n\t\t\t\tif (\n\t\t\t\t\tdocument.activeElement instanceof HTMLElement &&\n\t\t\t\t\tdocument.activeElement !== document.body &&\n\t\t\t\t\tcontainerRef.current.contains(document.activeElement)\n\t\t\t\t) {\n\t\t\t\t\tdocument.activeElement.blur();\n\t\t\t\t}\n\n\t\t\t\t// Focus the new row\n\t\t\t\tfocusedRow.focus();\n\t\t\t}\n\t\t}\n\t}, [navigation.focusedNodeId]);\n\n\t// Step 6: Render functions\n\tconst renderNode = useCallback(\n\t\t(node: FlattenedNode<T>, index: number): React.ReactNode => {\n\t\t\tconst isFocused = navigation.focusedNodeId === node.id;\n\n\t\t\tif (node.type === \"group\") {\n\t\t\t\t// Group header row\n\t\t\t\tif (!hierarchyManager || !groupConfig) return null;\n\n\t\t\t\tconst hierarchyNode = hierarchyManager.findNode(node.id);\n\t\t\t\tif (!hierarchyNode) return null;\n\n\t\t\t\tconst context = {\n\t\t\t\t\tnode: {\n\t\t\t\t\t\tid: node.id,\n\t\t\t\t\t\tkey: node.groupMetadata!.key,\n\t\t\t\t\t\tlabel: node.groupMetadata!.label,\n\t\t\t\t\t\tlevel: node.level,\n\t\t\t\t\t\titems: hierarchyNode.data.items || [],\n\t\t\t\t\t\taggregations: node.groupMetadata!.aggregations,\n\t\t\t\t\t\ttotalCount: node.groupMetadata!.itemCount,\n\t\t\t\t\t},\n\t\t\t\t\tlevel: node.level,\n\t\t\t\t\tisExpanded: node.isExpanded,\n\t\t\t\t\ttoggleExpansion: () => expansion.toggle(node.id),\n\t\t\t\t\taggregations: node.groupMetadata!.aggregations,\n\t\t\t\t\ttotalCount: node.groupMetadata!.itemCount,\n\t\t\t\t\tchildCount: hierarchyNode.children?.length || 0,\n\t\t\t\t};\n\n\t\t\t\tconst levelConfig = groupConfig.levels[node.level];\n\t\t\t\tconst customRenderer = levelConfig?.headerRenderer;\n\n\t\t\t\treturn (\n\t\t\t\t\t<GroupHeader\n\t\t\t\t\t\tkey={node.id}\n\t\t\t\t\t\tcontext={context}\n\t\t\t\t\t\tcolumnCount={columns.length}\n\t\t\t\t\t\tcustomRenderer={customRenderer}\n\t\t\t\t\t\tisFocused={isFocused}\n\t\t\t\t\t\tonKeyDown={navigation.handleKeyDown}\n\t\t\t\t\t\ttabIndex={isFocused ? 0 : -1}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (node.type === \"tree-node\") {\n\t\t\t\t// Tree node row\n\t\t\t\tif (!hierarchyManager || !treeConfig) return null;\n\n\t\t\t\tconst hierarchyNode = hierarchyManager.findNode(node.id);\n\t\t\t\tif (!hierarchyNode) return null;\n\n\t\t\t\tconst context = {\n\t\t\t\t\tnode: {\n\t\t\t\t\t\tid: node.id,\n\t\t\t\t\t\tdata: node.data!,\n\t\t\t\t\t\tdepth: node.level,\n\t\t\t\t\t\tchildren: hierarchyNode.children?.map((c) => ({\n\t\t\t\t\t\t\tid: c.data.id,\n\t\t\t\t\t\t\tdata: c.data.data!,\n\t\t\t\t\t\t\tdepth: c.depth,\n\t\t\t\t\t\t})),\n\t\t\t\t\t\taggregations: hierarchyNode.data.aggregations,\n\t\t\t\t\t},\n\t\t\t\t\tdepth: node.level,\n\t\t\t\t\tisExpanded: node.isExpanded,\n\t\t\t\t\ttoggleExpansion: () => expansion.toggle(node.id),\n\t\t\t\t\thasChildren: node.isExpandable,\n\t\t\t\t\taggregations: hierarchyNode.data.aggregations,\n\t\t\t\t\tpath: node.path.map((id) => {\n\t\t\t\t\t\tconst n = hierarchyManager.findNode(id);\n\t\t\t\t\t\treturn n\n\t\t\t\t\t\t\t? { id, data: n.data.data!, depth: n.depth }\n\t\t\t\t\t\t\t: { id, data: {} as T, depth: 0 };\n\t\t\t\t\t}),\n\t\t\t\t};\n\n\t\t\t\tconst customRenderer = treeConfig.nodeRenderer;\n\n\t\t\t\treturn (\n\t\t\t\t\t<TreeNode\n\t\t\t\t\t\tkey={node.id}\n\t\t\t\t\t\tcontext={context}\n\t\t\t\t\t\tcolumns={columns}\n\t\t\t\t\t\tcustomRenderer={customRenderer}\n\t\t\t\t\t\tisFocused={isFocused}\n\t\t\t\t\t\tonKeyDown={navigation.handleKeyDown}\n\t\t\t\t\t\ttabIndex={isFocused ? 0 : -1}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Regular item row\n\t\t\tconst isSelected = selectedRow === node.data;\n\t\t\tconst onClick =\n\t\t\t\tonGlobalRowSelectionChange || onRowClick\n\t\t\t\t\t? (event: React.MouseEvent) => handleRowClick(node.data!, event)\n\t\t\t\t\t: undefined;\n\n\t\t\treturn renderDataRow(\n\t\t\t\tnode,\n\t\t\t\tcolumns,\n\t\t\t\tindex,\n\t\t\t\tisFocused,\n\t\t\t\tisSelected,\n\t\t\t\tnavigation.handleKeyDown,\n\t\t\t\tonClick\n\t\t\t);\n\t\t},\n\t\t[\n\t\t\tnavigation,\n\t\t\thierarchyManager,\n\t\t\tgroupConfig,\n\t\t\ttreeConfig,\n\t\t\tcolumns,\n\t\t\texpansion,\n\t\t\tselectedRow,\n\t\t\thandleRowClick,\n\t\t\tonGlobalRowSelectionChange,\n\t\t\tonRowClick,\n\t\t]\n\t);\n\n\t// Step 7: Render controls\n\tconst renderControls = useCallback(() => {\n\t\tif (!showControls) return null;\n\n\t\tif (controlsRenderer) {\n\t\t\tconst context = {\n\t\t\t\tmode,\n\t\t\t\texpansion,\n\t\t\t\ttotalItems: enhancedData.length,\n\t\t\t\tvisibleItems: flattenedNodes.length,\n\t\t\t\tgroupLevels: groupConfig?.levels,\n\t\t\t};\n\t\t\treturn (\n\t\t\t\t<div className=\"groupable-datagrid__controls\">\n\t\t\t\t\t{controlsRenderer(context)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\t// Default controls\n\t\tif (mode === \"flat\") return null;\n\n\t\treturn (\n\t\t\t<div className=\"groupable-datagrid__controls\">\n\t\t\t\t<div className=\"groupable-datagrid__controls-left\">\n\t\t\t\t\t<Button variant=\"secondary\" onClick={() => expansion.expandAll()}>\n\t\t\t\t\t\tExpand All\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button variant=\"secondary\" onClick={() => expansion.collapseAll()}>\n\t\t\t\t\t\tCollapse All\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"groupable-datagrid__controls-right\">\n\t\t\t\t\t<span className=\"groupable-datagrid__controls-info\">\n\t\t\t\t\t\tShowing {flattenedNodes.filter((n) => n.type === \"item\").length} of{\" \"}\n\t\t\t\t\t\t{enhancedData.length} items\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}, [\n\t\tshowControls,\n\t\tcontrolsRenderer,\n\t\tmode,\n\t\texpansion,\n\t\tenhancedData.length,\n\t\tflattenedNodes.length,\n\t\tgroupConfig,\n\t]);\n\n\t// Step 7b: Render mobile card view\n\tconst renderCard = useCallback(\n\t\t(node: FlattenedNode<T>): React.ReactNode => {\n\t\t\tif (node.type === \"group\") {\n\t\t\t\tconst level = node.level || 0;\n\t\t\t\tconst isExpanded = node.isExpanded;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={node.id}\n\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\"groupable-datagrid__card\",\n\t\t\t\t\t\t\t\"groupable-datagrid__card--group\",\n\t\t\t\t\t\t\t`groupable-datagrid__card--level-${level}`,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"groupable-datagrid__card--expanded\": isExpanded,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t//style={{ marginLeft: `${level * 16}px` }}\n\t\t\t\t\t\tonClick={() => expansion.toggle(node.id)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"groupable-datagrid__card-group-header\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"groupable-datagrid__card-group-toggle\"\n\t\t\t\t\t\t\t\taria-label={isExpanded ? \"Collapse group\" : \"Expand group\"}\n\t\t\t\t\t\t\t\taria-expanded={isExpanded}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\twidth=\"20\"\n\t\t\t\t\t\t\t\t\theight=\"20\"\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\t\t\t\"groupable-datagrid__card-group-chevron\",\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\"groupable-datagrid__card-group-chevron--expanded\":\n\t\t\t\t\t\t\t\t\t\t\t\tisExpanded,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\td=\"M6 8L10 12L14 8\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<span className=\"groupable-datagrid__card-group-label\">\n\t\t\t\t\t\t\t\t{node.groupMetadata?.label || \"Group\"}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{node.groupMetadata?.itemCount !== undefined && (\n\t\t\t\t\t\t\t\t<span className=\"groupable-datagrid__card-group-count\">\n\t\t\t\t\t\t\t\t\t({node.groupMetadata.itemCount})\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\tif (node.type === \"item\" && node.data) {\n\t\t\tconst isSelected = selectedRow === node.data;\n\t\t\t\n\t\t\t// Find the primary field (metricName, name, or first column)\n\t\t\tconst primaryField = columns.find(c => \n\t\t\t\tc.key === 'metricName' || c.key === 'name' || c.key === 'title'\n\t\t\t) || columns[0];\t\t\t\tconst otherFields = columns.filter(c => c.key !== primaryField.key);\n\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={node.id}\n\t\t\t\t\t\tclassName={classNames(\"groupable-datagrid__card\", {\n\t\t\t\t\t\t\t\"groupable-datagrid__card--selected\": isSelected,\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t//style={{ marginLeft: `${level * 16}px` }}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif (onGlobalRowSelectionChange) {\n\t\t\t\t\t\t\t\tonGlobalRowSelectionChange(\n\t\t\t\t\t\t\t\t\tisSelected ? null : (node.data as T)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (onRowClick) {\n\t\t\t\t\t\t\t\tonRowClick(node.data as T, e);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* Primary field - prominent at top */}\n\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\tconst value = (node.data as any)[primaryField.key];\n\t\t\t\t\t\t\tconst cellContent = primaryField.customRenderer\n\t\t\t\t\t\t\t\t? primaryField.customRenderer(value, node.data)\n\t\t\t\t\t\t\t\t: primaryField.render\n\t\t\t\t\t\t\t\t\t? primaryField.render(node.data)\n\t\t\t\t\t\t\t\t\t: value !== null && value !== undefined\n\t\t\t\t\t\t\t\t\t\t? String(value)\n\t\t\t\t\t\t\t\t\t\t: \"\u2014\";\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"groupable-datagrid__card-title\">\n\t\t\t\t\t\t\t\t\t{cellContent}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\n\t\t\t\t\t\t{/* Other fields */}\n\t\t\t\t\t\t{otherFields.map((column) => {\n\t\t\t\t\t\t\tconst value = (node.data as any)[column.key];\n\t\t\t\t\t\t\tconst cellContent = column.customRenderer\n\t\t\t\t\t\t\t\t? column.customRenderer(value, node.data)\n\t\t\t\t\t\t\t\t: column.render\n\t\t\t\t\t\t\t\t\t? column.render(node.data)\n\t\t\t\t\t\t\t\t\t: value !== null && value !== undefined\n\t\t\t\t\t\t\t\t\t\t? String(value)\n\t\t\t\t\t\t\t\t\t\t: \"\u2014\";\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tkey={column.key}\n\t\t\t\t\t\t\t\t\tclassName=\"groupable-datagrid__card-field\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"groupable-datagrid__card-label\">\n\t\t\t\t\t\t\t\t\t\t{column.label}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"groupable-datagrid__card-value\">\n\t\t\t\t\t\t\t\t\t\t{cellContent}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\t[\n\t\t\tcolumns,\n\t\t\texpansion,\n\t\t\tgroupConfig,\n\t\t\tselectedRow,\n\t\t\tonGlobalRowSelectionChange,\n\t\t\tonRowClick,\n\t\t\thierarchyManager,\n\t\t]\n\t);\n\n\t// Step 8: Loading and error states\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\t\"groupable-datagrid\",\n\t\t\t\t\t\"groupable-datagrid--loading\",\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<p>Loading data...</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (error) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\t\"groupable-datagrid\",\n\t\t\t\t\t\"groupable-datagrid--error\",\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<p>Error: {error}</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Step 9: Empty state\n\tif (enhancedData.length === 0) {\n\t\treturn (\n\t\t\t<div className={classNames(\"groupable-datagrid\", className)}>\n\t\t\t\t<div className=\"groupable-datagrid__empty\">No data available</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Step 10: Main render\n\treturn (\n\t\t<div\n\t\t\tref={containerRef}\n\t\t\tclassName={classNames(\"groupable-datagrid\", className, {\n\t\t\t\t\"groupable-datagrid--mobile-cards\": showCards,\n\t\t\t\t\"groupable-datagrid--mobile-scroll\": showScroll,\n\t\t\t})}\n\t\t\tdata-testid={testId}\n\t\t\tdata-mode={mode}\n\t\t>\n\t\t\t{renderControls()}\n\n\t\t\t{/* Mobile card view */}\n\t\t\t{showCards && (\n\t\t\t\t<div className=\"groupable-datagrid__cards\">\n\t\t\t\t\t{flattenedNodes.map((node) => renderCard(node))}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Desktop/tablet table view or horizontal scroll */}\n\t\t\t{!showCards && (\n\t\t\t\t<div className=\"groupable-datagrid__table-wrapper\">\n\t\t\t\t\t<table\n\t\t\t\t\t\tclassName=\"groupable-datagrid__treegrid\"\n\t\t\t\t\t\trole={mode === \"flat\" ? \"table\" : \"treegrid\"}\n\t\t\t\t\t\taria-label={ariaLabel}\n\t\t\t\t\t\taria-describedby={ariaDescription}\n\t\t\t\t\t>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr className=\"groupable-datagrid__header-row\" role=\"row\">\n\t\t\t\t\t\t\t\t{columns.map((column) => {\n\t\t\t\t\t\t\t\t\tconst columnSort = sortConfig?.find(\n\t\t\t\t\t\t\t\t\t\t(s) => s.key === column.key\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tconst isSortable = column.sortable !== false && onSortChange;\n\t\t\t\t\t\t\t\t\tconst sortIndex = sortConfig?.findIndex(\n\t\t\t\t\t\t\t\t\t\t(s) => s.key === column.key\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\t\t\tkey={column.key}\n\t\t\t\t\t\t\t\t\t\t\trole=\"columnheader\"\n\t\t\t\t\t\t\t\t\t\t\taria-sort={\n\t\t\t\t\t\t\t\t\t\t\t\tcolumnSort\n\t\t\t\t\t\t\t\t\t\t\t\t\t? columnSort.direction === \"asc\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"ascending\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"descending\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classNames(\"groupable-datagrid__header-cell\", {\n\t\t\t\t\t\t\t\t\t\t\t\t\"groupable-datagrid__header-cell--sortable\": isSortable,\n\t\t\t\t\t\t\t\t\t\t\t\t\"groupable-datagrid__header-cell--sorted\": !!columnSort,\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\t\t\tisSortable ? () => handleSort(column.key) : undefined\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ cursor: isSortable ? \"pointer\" : undefined }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"groupable-datagrid__header-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{column.label}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{isSortable && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"groupable-datagrid__sort-indicator\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!columnSort && <SortableIcon />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{columnSort?.direction === \"asc\" && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ChevronUpIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{columnSort?.direction === \"desc\" && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ChevronDownIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{enableMultiSort &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumnSort &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsortIndex !== undefined &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsortIndex >= 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"groupable-datagrid__sort-order\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{sortIndex + 1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody role=\"rowgroup\">\n\t\t\t\t\t\t\t{flattenedNodes.map((node, index) => renderNode(node, index))}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t{/* Summary footer (if global aggregations exist) */}\n\t\t\t\t\t\t{hierarchyManager && groupConfig?.showSummaryFooter && (\n\t\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t\t<tr className=\"groupable-datagrid__summary-row\" role=\"row\">\n\t\t\t\t\t\t\t\t\t<td colSpan={columns.length}>\n\t\t\t\t\t\t\t\t\t\t<strong>Total:</strong> {hierarchyManager.getTotalCount()}{\" \"}\n\t\t\t\t\t\t\t\t\t\titems\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nGroupableDataGrid.displayName = \"GroupableDataGrid\";\n\nexport default GroupableDataGrid;\n", "function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n", "export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  var node = this, nodes = [node], children, i, index = -1;\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  var node = this, nodes = [node], next = [], children, i, n, index = -1;\n  while (node = nodes.pop()) {\n    next.push(node);\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n", "export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n", "export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n", "export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n", "export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n", "export default function() {\n  return Array.from(this);\n}\n", "export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n", "export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Don\u2019t include the root\u2019s parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n", "export default function*() {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      yield node;\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n", "import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_find from \"./find.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\nimport node_iterator from \"./iterator.js\";\n\nexport default function hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n", "/**\n * Aggregation Engine\n * \n * Provides aggregation functions for GroupableDataGrid\n * Supports sum, avg, count, min, max, and custom aggregations\n */\n\nimport { AggregationType, AggregationConfig, CalculatedField } from '../GroupableDataGrid.types';\n\n/**\n * Type guard to check if a value is numeric\n */\nfunction isNumeric(value: any): value is number {\n  return typeof value === 'number' && !isNaN(value);\n}\n\n/**\n * Type guard to check if a value is a valid date\n */\nfunction isValidDate(value: any): boolean {\n  if (value instanceof Date) return !isNaN(value.getTime());\n  const parsed = new Date(value);\n  return !isNaN(parsed.getTime());\n}\n\n/**\n * Extract values from items for a given column\n */\nfunction extractValues<T>(items: T[], column: string): any[] {\n  return items.map(item => {\n    // Support nested paths like 'patient.ward.name'\n    const keys = column.split('.');\n    let value: any = item;\n    for (const key of keys) {\n      value = value?.[key];\n      if (value === undefined) break;\n    }\n    return value;\n  }).filter(v => v !== undefined && v !== null);\n}\n\n/**\n * Sum aggregation\n */\nfunction sum(values: any[]): number {\n  const numericValues = values.filter(isNumeric);\n  if (numericValues.length === 0) return 0;\n  return numericValues.reduce((acc, val) => acc + val, 0);\n}\n\n/**\n * Average aggregation\n */\nfunction avg(values: any[]): number {\n  const numericValues = values.filter(isNumeric);\n  if (numericValues.length === 0) return 0;\n  return sum(numericValues) / numericValues.length;\n}\n\n/**\n * Count aggregation\n */\nfunction count(values: any[]): number {\n  return values.length;\n}\n\n/**\n * Count unique values\n */\nfunction countUnique(values: any[]): number {\n  return new Set(values).size;\n}\n\n/**\n * Minimum aggregation\n */\nfunction min(values: any[]): number | null {\n  const numericValues = values.filter(isNumeric);\n  if (numericValues.length === 0) return null;\n  return Math.min(...numericValues);\n}\n\n/**\n * Maximum aggregation\n */\nfunction max(values: any[]): number | null {\n  const numericValues = values.filter(isNumeric);\n  if (numericValues.length === 0) return null;\n  return Math.max(...numericValues);\n}\n\n/**\n * First value aggregation\n */\nfunction first(values: any[]): any {\n  return values.length > 0 ? values[0] : null;\n}\n\n/**\n * Last value aggregation\n */\nfunction last(values: any[]): any {\n  return values.length > 0 ? values[values.length - 1] : null;\n}\n\n/**\n * Concatenate string values\n */\nfunction concatFn(values: any[]): string {\n  const separator = ', ';\n  return values\n    .filter(v => v !== null && v !== undefined)\n    .map(v => String(v))\n    .join(separator);\n}\n\n/**\n * Built-in aggregation functions map\n */\nconst AGGREGATION_FUNCTIONS: Record<\n  Exclude<AggregationType, 'custom'>,\n  (values: any[], items?: any[]) => any\n> = {\n  sum,\n  avg,\n  count,\n  min,\n  max,\n  first,\n  last,\n  concat: concatFn,\n  countUnique,\n};\n\n/**\n * Apply a single aggregation configuration to a set of items\n */\nexport function applyAggregation<T = any>(\n  config: AggregationConfig,\n  items: T[]\n): any {\n  if (items.length === 0) {\n    return null;\n  }\n\n  // Extract values for the specified column\n  const values = extractValues(items, config.column);\n\n  // Apply the aggregation function\n  let result: any;\n  \n  if (config.type === 'custom') {\n    if (!config.customFn) {\n      throw new Error(`Custom aggregation for column \"${config.column}\" requires a customFn`);\n    }\n    result = config.customFn(values, items);\n  } else {\n    const aggregationFn = AGGREGATION_FUNCTIONS[config.type];\n    result = aggregationFn(values, items);\n  }\n\n  return result;\n}\n\n/**\n * Apply multiple aggregation configurations to a set of items\n */\nexport function applyAggregations<T = any>(\n  configs: AggregationConfig[],\n  items: T[]\n): Record<string, any> {\n  const results: Record<string, any> = {};\n\n  for (const config of configs) {\n    const key = config.label || `${config.column}_${config.type}`;\n    results[key] = applyAggregation(config, items);\n  }\n\n  return results;\n}\n\n/**\n * Create a calculated field value for a single row\n */\nexport function calculateFieldValue<T = any>(\n  field: CalculatedField,\n  row: T,\n  allData: T[]\n): any {\n  try {\n    return field.calculate(row, allData);\n  } catch (error) {\n    console.error(`Error calculating field \"${field.key}\":`, error);\n    return null;\n  }\n}\n\n/**\n * Enhance data with calculated fields\n */\nexport function enhanceDataWithCalculatedFields<T = any>(\n  data: T[],\n  calculatedFields: CalculatedField[]\n): (T & Record<string, any>)[] {\n  if (calculatedFields.length === 0) {\n    return data as (T & Record<string, any>)[];\n  }\n\n  return data.map(row => {\n    const enhancedRow = { ...row };\n    \n    for (const field of calculatedFields) {\n      (enhancedRow as any)[field.key] = calculateFieldValue(field, row, data);\n    }\n    \n    return enhancedRow as T & Record<string, any>;\n  });\n}\n\n/**\n * Validate aggregation configuration\n */\nexport function validateAggregationConfig(config: AggregationConfig): string[] {\n  const errors: string[] = [];\n\n  if (!config.column) {\n    errors.push('Aggregation config must specify a column');\n  }\n\n  if (!config.type) {\n    errors.push('Aggregation config must specify a type');\n  }\n\n  if (config.type === 'custom' && !config.customFn) {\n    errors.push('Custom aggregation requires a customFn');\n  }\n\n  return errors;\n}\n\n/**\n * Create a default aggregation label\n */\nexport function createDefaultLabel(config: AggregationConfig): string {\n  const typeLabels: Record<AggregationType, string> = {\n    sum: 'Sum',\n    avg: 'Average',\n    count: 'Count',\n    min: 'Min',\n    max: 'Max',\n    first: 'First',\n    last: 'Last',\n    concat: 'Concatenated',\n    countUnique: 'Unique',\n    custom: 'Custom',\n  };\n\n  const typeLabel = typeLabels[config.type] || config.type;\n  return `${typeLabel} of ${config.column}`;\n}\n\n/**\n * Format an aggregated value for display\n */\nexport function formatAggregatedValue(\n  value: any,\n  config: AggregationConfig\n): string {\n  if (value === null || value === undefined) {\n    return '\u2014'; // Em dash for null values\n  }\n\n  // Use custom format if provided\n  if (config.format) {\n    const formatted = config.format(value);\n    return typeof formatted === 'string' ? formatted : String(formatted);\n  }\n\n  // Default formatting based on type\n  switch (config.type) {\n    case 'sum':\n    case 'avg':\n      return isNumeric(value) ? value.toFixed(2) : String(value);\n    \n    case 'count':\n    case 'countUnique':\n      return String(value);\n    \n    case 'min':\n    case 'max':\n      return isNumeric(value) ? value.toFixed(2) : String(value);\n    \n    case 'first':\n    case 'last':\n      return String(value);\n    \n    case 'concat':\n      return String(value);\n    \n    default:\n      return String(value);\n  }\n}\n\n/**\n * Determine appropriate aggregation type for a column based on data\n */\nexport function inferAggregationType<T = any>(\n  data: T[],\n  column: string\n): AggregationType {\n  const values = extractValues(data, column);\n  \n  if (values.length === 0) {\n    return 'count';\n  }\n\n  // Check if all values are numeric\n  const allNumeric = values.every(isNumeric);\n  if (allNumeric) {\n    return 'sum'; // Default to sum for numeric data\n  }\n\n  // Check if values are dates\n  const allDates = values.every(isValidDate);\n  if (allDates) {\n    return 'count'; // Count for dates (min/max could also work)\n  }\n\n  // Default to count for non-numeric data\n  return 'count';\n}\n\n/**\n * Create aggregation configs for all columns in data\n */\nexport function createDefaultAggregations<T = any>(\n  data: T[],\n  columns: string[],\n  excludeColumns: string[] = []\n): AggregationConfig[] {\n  return columns\n    .filter(col => !excludeColumns.includes(col))\n    .map(column => ({\n      column,\n      type: inferAggregationType(data, column),\n      showInHeader: true,\n      showInFooter: true,\n    }));\n}\n\n/**\n * Merge aggregation results from multiple groups\n */\nexport function mergeAggregations(\n  aggregations: Record<string, any>[],\n  configs: AggregationConfig[]\n): Record<string, any> {\n  const merged: Record<string, any> = {};\n\n  for (const config of configs) {\n    const key = config.label || `${config.column}_${config.type}`;\n    const values = aggregations.map(agg => agg[key]).filter(v => v !== null && v !== undefined);\n\n    // Apply the aggregation function to the aggregated values\n    if (config.type === 'count') {\n      merged[key] = sum(values); // Sum up counts\n    } else if (config.type === 'sum') {\n      merged[key] = sum(values); // Sum up sums\n    } else if (config.type === 'avg') {\n      merged[key] = avg(values); // Average of averages (note: this is approximate)\n    } else if (config.type === 'min') {\n      merged[key] = min(values); // Minimum of minimums\n    } else if (config.type === 'max') {\n      merged[key] = max(values); // Maximum of maximums\n    } else {\n      // For other types, take the first value\n      merged[key] = values.length > 0 ? values[0] : null;\n    }\n  }\n\n  return merged;\n}\n\n/**\n * Calculate percentage contribution of a value to total\n */\nexport function calculatePercentage(value: number, total: number): number {\n  if (total === 0) return 0;\n  return (value / total) * 100;\n}\n\n/**\n * Format percentage for display\n */\nexport function formatPercentage(percentage: number, decimals: number = 1): string {\n  return `${percentage.toFixed(decimals)}%`;\n}\n", "/**\n * Hierarchy Data Manager\n * \n * Manages hierarchical data structures using d3-hierarchy\n * Supports both grouping and tree modes\n */\n\nimport { hierarchy, HierarchyNode } from 'd3-hierarchy';\nimport {\n  GroupConfig,\n  TreeConfig,\n  FlattenedNode,\n  GroupLevel,\n  GroupByFunction,\n} from '../GroupableDataGrid.types';\nimport { applyAggregations } from './aggregations';\n\n/**\n * Internal node structure for d3-hierarchy\n */\ninterface HierarchyNodeData<T = any> {\n  id: string;\n  type: 'root' | 'group' | 'item';\n  level: number;\n  key?: string | number;\n  label?: string;\n  data?: T;\n  items?: T[];\n  aggregations?: Record<string, any>;\n  children?: HierarchyNodeData<T>[];\n}\n\n/**\n * Group items by a key function or field\n */\nfunction groupBy<T>(\n  items: T[],\n  groupByFn: keyof T | GroupByFunction<T>\n): Map<string | number, T[]> {\n  const groups = new Map<string | number, T[]>();\n\n  for (const item of items) {\n    const key = typeof groupByFn === 'function' \n      ? groupByFn(item) \n      : item[groupByFn] as string | number;\n\n    if (!groups.has(key)) {\n      groups.set(key, []);\n    }\n    groups.get(key)!.push(item);\n  }\n\n  return groups;\n}\n\n/**\n * Create a label for a group key\n */\nfunction createGroupLabel(key: string | number, level: GroupLevel<any>): string {\n  if (level.label) {\n    return `${level.label}: ${key}`;\n  }\n  return String(key);\n}\n\n/**\n * Build grouped hierarchy from flat data\n */\nfunction buildGroupedHierarchy<T>(\n  data: T[],\n  config: GroupConfig<T>\n): HierarchyNodeData<T> {\n  const { levels } = config;\n\n  // Recursive function to build hierarchy levels\n  function buildLevel(\n    items: T[],\n    levelIndex: number,\n    parentId: string\n  ): HierarchyNodeData<T>[] {\n    if (levelIndex >= levels.length) {\n      // Leaf level - create item nodes\n      return items.map((item, idx) => ({\n        id: `${parentId}-item-${idx}`,\n        type: 'item' as const,\n        level: levelIndex,\n        data: item,\n        items: [item],\n      }));\n    }\n\n    const level = levels[levelIndex];\n    const groups = groupBy(items, level.groupBy);\n    const children: HierarchyNodeData<T>[] = [];\n\n    // Sort groups if needed\n    let sortedGroups = Array.from(groups.entries());\n    if (level.sortDirection) {\n      sortedGroups.sort((a, b) => {\n        const dir = level.sortDirection === 'asc' ? 1 : -1;\n        return dir * (String(a[0]).localeCompare(String(b[0])));\n      });\n    }\n\n    for (const [key, groupItems] of sortedGroups) {\n      const groupId = `${parentId}-${levelIndex}-${key}`;\n      const childNodes = buildLevel(groupItems, levelIndex + 1, groupId);\n\n      // Compute aggregations for this group\n      const aggregations = level.aggregations\n        ? applyAggregations(level.aggregations, groupItems)\n        : {};\n\n      children.push({\n        id: groupId,\n        type: 'group',\n        level: levelIndex,\n        key,\n        label: createGroupLabel(key, level),\n        items: groupItems,\n        aggregations,\n        children: childNodes,\n      });\n    }\n\n    return children;\n  }\n\n  // Build the root node\n  const children = buildLevel(data, 0, 'root');\n\n  // Compute global aggregations\n  const globalAggregations = config.globalAggregations\n    ? applyAggregations(config.globalAggregations, data)\n    : {};\n\n  return {\n    id: 'root',\n    type: 'root',\n    level: -1,\n    items: data,\n    aggregations: globalAggregations,\n    children,\n  };\n}\n\n/**\n * Build tree hierarchy from flat data with parent-child relationships\n */\nfunction buildTreeHierarchy<T>(\n  data: T[],\n  config: TreeConfig<T>\n): HierarchyNodeData<T> {\n  const { getId, getParentId, rootIds = [] } = config;\n\n  // Create a map of id -> item for quick lookup\n  const itemMap = new Map<string, T>();\n  for (const item of data) {\n    const id = getId(item);\n    itemMap.set(id, item);\n  }\n\n  // Build node map\n  const nodeMap = new Map<string, HierarchyNodeData<T>>();\n\n  function buildNode(item: T, depth: number = 0): HierarchyNodeData<T> {\n    const id = getId(item);\n\n    // Check if we already built this node (cycle detection)\n    if (nodeMap.has(id)) {\n      return nodeMap.get(id)!;\n    }\n\n    const node: HierarchyNodeData<T> = {\n      id,\n      type: 'item',\n      level: depth,\n      data: item,\n      items: [item],\n      children: [],\n    };\n\n    nodeMap.set(id, node);\n\n    // Find children\n    const children: T[] = [];\n    for (const candidate of data) {\n      const parentId = getParentId?.(candidate);\n      if (parentId === id) {\n        children.push(candidate);\n      }\n    }\n\n    // Build child nodes\n    if (children.length > 0) {\n      node.children = children.map(child => buildNode(child, depth + 1));\n\n      // Compute aggregations if enabled\n      if (config.aggregations && config.showChildAggregations) {\n        const allDescendantItems = collectDescendantItems(node);\n        node.aggregations = applyAggregations(config.aggregations, allDescendantItems);\n      }\n    }\n\n    return node;\n  }\n\n  // Find root items\n  const rootItems: T[] = [];\n  for (const item of data) {\n    const parentId = getParentId?.(item);\n    const isRoot = !parentId || rootIds.includes(parentId);\n    if (isRoot) {\n      rootItems.push(item);\n    }\n  }\n\n  // Build root children\n  const children = rootItems.map(item => buildNode(item, 0));\n\n  return {\n    id: 'root',\n    type: 'root',\n    level: -1,\n    items: data,\n    children,\n  };\n}\n\n/**\n * Collect all descendant items from a node\n */\nfunction collectDescendantItems<T>(node: HierarchyNodeData<T>): T[] {\n  const items: T[] = [...(node.items || [])];\n\n  if (node.children) {\n    for (const child of node.children) {\n      items.push(...collectDescendantItems(child));\n    }\n  }\n\n  return items;\n}\n\n/**\n * Flatten hierarchy for rendering\n */\nfunction flattenHierarchy<T>(\n  hierarchyRoot: HierarchyNode<HierarchyNodeData<T>>,\n  expandedIds: Set<string>,\n  mode: 'grouped' | 'tree'\n): FlattenedNode<T>[] {\n  const flattened: FlattenedNode<T>[] = [];\n\n  function traverse(node: HierarchyNode<HierarchyNodeData<T>>) {\n    const nodeData = node.data;\n\n    // Skip root node\n    if (nodeData.type === 'root') {\n      if (node.children) {\n        for (const child of node.children) {\n          traverse(child);\n        }\n      }\n      return;\n    }\n\n    const isExpanded = expandedIds.has(nodeData.id);\n    const hasChildren = (node.children?.length || 0) > 0;\n\n    if (nodeData.type === 'group') {\n      // Group node\n      flattened.push({\n        id: nodeData.id,\n        type: 'group',\n        level: nodeData.level,\n        isExpandable: hasChildren,\n        isExpanded,\n        groupMetadata: {\n          key: nodeData.key!,\n          label: nodeData.label!,\n          aggregations: nodeData.aggregations || {},\n          itemCount: nodeData.items?.length || 0,\n        },\n        parentId: node.parent?.data.id !== 'root' ? node.parent?.data.id : undefined,\n        path: getNodePath(node),\n      });\n\n      // Add children if expanded\n      if (isExpanded && node.children) {\n        for (const child of node.children) {\n          traverse(child);\n        }\n      }\n    } else if (nodeData.type === 'item') {\n      // Item/tree node\n      if (mode === 'tree' && hasChildren) {\n        // Tree node with children\n        flattened.push({\n          id: nodeData.id,\n          type: 'tree-node',\n          level: nodeData.level,\n          isExpandable: true,\n          isExpanded,\n          data: nodeData.data,\n          parentId: node.parent?.data.id !== 'root' ? node.parent?.data.id : undefined,\n          path: getNodePath(node),\n        });\n\n        // Add children if expanded\n        if (isExpanded && node.children) {\n          for (const child of node.children) {\n            traverse(child);\n          }\n        }\n      } else {\n        // Leaf item\n        flattened.push({\n          id: nodeData.id,\n          type: mode === 'tree' ? 'tree-node' : 'item',\n          level: nodeData.level,\n          isExpandable: hasChildren,\n          isExpanded: false,\n          data: nodeData.data,\n          parentId: node.parent?.data.id !== 'root' ? node.parent?.data.id : undefined,\n          path: getNodePath(node),\n        });\n      }\n    }\n  }\n\n  traverse(hierarchyRoot);\n  return flattened;\n}\n\n/**\n * Get path from root to node (array of IDs)\n */\nfunction getNodePath(node: HierarchyNode<HierarchyNodeData<any>>): string[] {\n  const path: string[] = [];\n  let current: HierarchyNode<HierarchyNodeData<any>> | null = node;\n\n  while (current && current.data.type !== 'root') {\n    path.unshift(current.data.id);\n    current = current.parent;\n  }\n\n  return path;\n}\n\n/**\n * Hierarchy Data Manager Class\n * \n * Manages hierarchical data transformations and state\n */\nexport class HierarchyDataManager<T = any> {\n  private hierarchyRoot: HierarchyNode<HierarchyNodeData<T>>;\n  private mode: 'grouped' | 'tree';\n\n  constructor(\n    data: T[],\n    mode: 'grouped' | 'tree',\n    config: GroupConfig<T> | TreeConfig<T>\n  ) {\n    this.mode = mode;\n    // config will be stored when implementing dynamic regrouping\n\n    // Build hierarchy based on mode\n    const rootData = mode === 'grouped'\n      ? buildGroupedHierarchy(data, config as GroupConfig<T>)\n      : buildTreeHierarchy(data, config as TreeConfig<T>);\n\n    this.hierarchyRoot = hierarchy(rootData);\n  }\n\n  /**\n   * Get the hierarchy root\n   */\n  getRoot(): HierarchyNode<HierarchyNodeData<T>> {\n    return this.hierarchyRoot;\n  }\n\n  /**\n   * Get flattened nodes for rendering\n   */\n  getFlattenedNodes(expandedIds: Set<string>): FlattenedNode<T>[] {\n    return flattenHierarchy(this.hierarchyRoot, expandedIds, this.mode);\n  }\n\n  /**\n   * Find a node by ID\n   */\n  findNode(id: string): HierarchyNode<HierarchyNodeData<T>> | undefined {\n    return this.hierarchyRoot.find(node => node.data.id === id);\n  }\n\n  /**\n   * Get all descendant node IDs\n   */\n  getDescendantIds(id: string): string[] {\n    const node = this.findNode(id);\n    if (!node) return [];\n\n    const ids: string[] = [];\n    node.each(descendant => {\n      if (descendant.data.id !== id) {\n        ids.push(descendant.data.id);\n      }\n    });\n\n    return ids;\n  }\n\n  /**\n   * Get all ancestor node IDs\n   */\n  getAncestorIds(id: string): string[] {\n    const node = this.findNode(id);\n    if (!node) return [];\n\n    const ids: string[] = [];\n    let current = node.parent;\n\n    while (current && current.data.type !== 'root') {\n      ids.push(current.data.id);\n      current = current.parent;\n    }\n\n    return ids;\n  }\n\n  /**\n   * Get siblings of a node\n   */\n  getSiblingIds(id: string): string[] {\n    const node = this.findNode(id);\n    if (!node || !node.parent) return [];\n\n    return (node.parent.children || [])\n      .filter(sibling => sibling.data.id !== id)\n      .map(sibling => sibling.data.id);\n  }\n\n  /**\n   * Get total item count\n   */\n  getTotalCount(): number {\n    return this.hierarchyRoot.data.items?.length || 0;\n  }\n\n  /**\n   * Get maximum depth\n   */\n  getMaxDepth(): number {\n    return this.hierarchyRoot.height;\n  }\n\n  /**\n   * Get aggregations for a node\n   */\n  getAggregations(id: string): Record<string, any> | undefined {\n    const node = this.findNode(id);\n    return node?.data.aggregations;\n  }\n\n  /**\n   * Get global (root) aggregations\n   */\n  getGlobalAggregations(): Record<string, any> {\n    return this.hierarchyRoot.data.aggregations || {};\n  }\n}\n\n/**\n * Helper function to create expansion state from config\n */\nexport function createInitialExpansionState<T>(\n  manager: HierarchyDataManager<T>,\n  initialExpanded: 'all' | 'none' | 'first' | string[] | undefined,\n  maxDepth?: number\n): Set<string> {\n  const expandedIds = new Set<string>();\n\n  if (initialExpanded === 'all') {\n    // Expand all nodes up to maxDepth\n    manager.getRoot().each(node => {\n      if (node.data.type !== 'root') {\n        if (!maxDepth || node.depth <= maxDepth) {\n          expandedIds.add(node.data.id);\n        }\n      }\n    });\n  } else if (initialExpanded === 'first') {\n    // Expand only first-level nodes\n    const root = manager.getRoot();\n    if (root.children) {\n      for (const child of root.children) {\n        expandedIds.add(child.data.id);\n      }\n    }\n  } else if (Array.isArray(initialExpanded)) {\n    // Use provided IDs\n    for (const id of initialExpanded) {\n      expandedIds.add(id);\n    }\n  }\n  // 'none' or undefined - return empty set\n\n  return expandedIds;\n}\n", "/**\n * useGroupExpansion Hook\n * \n * Manages expansion/collapse state for grouped and tree data grids\n * Supports controlled and uncontrolled modes\n */\n\nimport { useState, useCallback, useMemo, useEffect } from 'react';\nimport { ExpansionState } from '../GroupableDataGrid.types';\nimport { HierarchyDataManager } from '../utils/HierarchyDataManager';\n\nexport interface UseGroupExpansionOptions {\n  /** Initial expansion state */\n  initialExpanded?: Set<string> | 'all' | 'none' | 'first' | string[];\n  \n  /** Controlled expansion state */\n  expandedIds?: Set<string>;\n  \n  /** Callback when expansion changes */\n  onExpansionChange?: (expandedIds: Set<string>) => void;\n  \n  /** Hierarchy data manager */\n  hierarchyManager?: HierarchyDataManager<any>;\n  \n  /** Maximum depth to auto-expand */\n  maxAutoExpandDepth?: number;\n  \n  /** Whether to persist expansion state to localStorage */\n  persistKey?: string;\n}\n\n/**\n * Convert various initial expansion formats to Set<string>\n */\nfunction normalizeInitialExpanded(\n  value: Set<string> | 'all' | 'none' | 'first' | string[] | undefined,\n  hierarchyManager?: HierarchyDataManager<any>,\n  maxAutoExpandDepth?: number\n): Set<string> {\n  if (value instanceof Set) {\n    return new Set(value);\n  }\n\n  if (Array.isArray(value)) {\n    return new Set(value);\n  }\n\n  if (!hierarchyManager) {\n    return new Set();\n  }\n\n  if (value === 'all') {\n    const expandedIds = new Set<string>();\n    hierarchyManager.getRoot().each(node => {\n      if (node.data.type !== 'root') {\n        if (!maxAutoExpandDepth || node.depth <= maxAutoExpandDepth) {\n          expandedIds.add(node.data.id);\n        }\n      }\n    });\n    return expandedIds;\n  }\n\n  if (value === 'first') {\n    const expandedIds = new Set<string>();\n    const root = hierarchyManager.getRoot();\n    if (root.children) {\n      for (const child of root.children) {\n        expandedIds.add(child.data.id);\n      }\n    }\n    return expandedIds;\n  }\n\n  // 'none' or undefined\n  return new Set();\n}\n\n/**\n * Load expansion state from localStorage\n */\nfunction loadPersistedState(key: string): Set<string> | null {\n  if (typeof window === 'undefined') {\n    return null;\n  }\n\n  try {\n    const stored = localStorage.getItem(key);\n    if (stored) {\n      const parsed = JSON.parse(stored);\n      return new Set(parsed);\n    }\n  } catch (error) {\n    console.warn('Failed to load persisted expansion state:', error);\n  }\n\n  return null;\n}\n\n/**\n * Save expansion state to localStorage\n */\nfunction persistState(key: string, expandedIds: Set<string>): void {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    const serialized = JSON.stringify(Array.from(expandedIds));\n    localStorage.setItem(key, serialized);\n  } catch (error) {\n    console.warn('Failed to persist expansion state:', error);\n  }\n}\n\n/**\n * Hook for managing group/tree expansion state\n */\nexport function useGroupExpansion(\n  options: UseGroupExpansionOptions = {}\n): ExpansionState {\n  const {\n    initialExpanded,\n    expandedIds: controlledExpandedIds,\n    onExpansionChange,\n    hierarchyManager,\n    maxAutoExpandDepth,\n    persistKey,\n  } = options;\n\n  // Determine if we're in controlled mode\n  const isControlled = controlledExpandedIds !== undefined;\n\n  // Load persisted state if available\n  const persistedState = useMemo(() => {\n    return persistKey ? loadPersistedState(persistKey) : null;\n  }, [persistKey]);\n\n  // Initialize internal state\n  const [internalExpandedIds, setInternalExpandedIds] = useState<Set<string>>(() => {\n    // Priority: persisted > initial > empty\n    if (persistedState) {\n      return persistedState;\n    }\n    return normalizeInitialExpanded(initialExpanded, hierarchyManager, maxAutoExpandDepth);\n  });\n\n  // Use controlled or internal state\n  const expandedIds = isControlled ? controlledExpandedIds : internalExpandedIds;\n\n  // Update expansion state (handles both controlled and uncontrolled)\n  const updateExpansion = useCallback(\n    (newExpandedIds: Set<string>) => {\n      if (!isControlled) {\n        setInternalExpandedIds(newExpandedIds);\n      }\n\n      // Persist if enabled\n      if (persistKey) {\n        persistState(persistKey, newExpandedIds);\n      }\n\n      // Notify parent\n      onExpansionChange?.(newExpandedIds);\n    },\n    [isControlled, persistKey, onExpansionChange]\n  );\n\n  // Expand a node\n  const expand = useCallback(\n    (id: string) => {\n      const newExpandedIds = new Set(expandedIds);\n      newExpandedIds.add(id);\n      updateExpansion(newExpandedIds);\n    },\n    [expandedIds, updateExpansion]\n  );\n\n  // Collapse a node\n  const collapse = useCallback(\n    (id: string) => {\n      const newExpandedIds = new Set(expandedIds);\n      newExpandedIds.delete(id);\n      updateExpansion(newExpandedIds);\n    },\n    [expandedIds, updateExpansion]\n  );\n\n  // Toggle a node\n  const toggle = useCallback(\n    (id: string) => {\n      if (expandedIds.has(id)) {\n        collapse(id);\n      } else {\n        expand(id);\n      }\n    },\n    [expandedIds, expand, collapse]\n  );\n\n  // Expand all nodes\n  const expandAll = useCallback(() => {\n    if (!hierarchyManager) {\n      console.warn('Cannot expand all: hierarchyManager not provided');\n      return;\n    }\n\n    const newExpandedIds = new Set<string>();\n    hierarchyManager.getRoot().each(node => {\n      if (node.data.type !== 'root') {\n        if (!maxAutoExpandDepth || node.depth <= maxAutoExpandDepth) {\n          newExpandedIds.add(node.data.id);\n        }\n      }\n    });\n\n    updateExpansion(newExpandedIds);\n  }, [hierarchyManager, maxAutoExpandDepth, updateExpansion]);\n\n  // Collapse all nodes\n  const collapseAll = useCallback(() => {\n    updateExpansion(new Set());\n  }, [updateExpansion]);\n\n  // Expand to specific depth\n  const expandToDepth = useCallback(\n    (depth: number) => {\n      if (!hierarchyManager) {\n        console.warn('Cannot expand to depth: hierarchyManager not provided');\n        return;\n      }\n\n      const newExpandedIds = new Set<string>();\n      hierarchyManager.getRoot().each(node => {\n        if (node.data.type !== 'root' && node.depth <= depth) {\n          newExpandedIds.add(node.data.id);\n        }\n      });\n\n      updateExpansion(newExpandedIds);\n    },\n    [hierarchyManager, updateExpansion]\n  );\n\n  // Re-initialize when initialExpanded changes (uncontrolled mode only)\n  useEffect(() => {\n    if (!isControlled && initialExpanded) {\n      const normalized = normalizeInitialExpanded(\n        initialExpanded,\n        hierarchyManager,\n        maxAutoExpandDepth\n      );\n      setInternalExpandedIds(normalized);\n    }\n  }, [initialExpanded, hierarchyManager, maxAutoExpandDepth, isControlled]);\n\n  return {\n    expandedIds,\n    expand,\n    collapse,\n    toggle,\n    expandAll,\n    collapseAll,\n    expandToDepth,\n  };\n}\n\n/**\n * Helper function to check if a node is expanded\n */\nexport function isNodeExpanded(id: string, expansionState: ExpansionState): boolean {\n  return expansionState.expandedIds.has(id);\n}\n\n/**\n * Helper function to get expanded state for multiple nodes\n */\nexport function getExpandedStates(\n  ids: string[],\n  expansionState: ExpansionState\n): Map<string, boolean> {\n  const states = new Map<string, boolean>();\n  for (const id of ids) {\n    states.set(id, expansionState.expandedIds.has(id));\n  }\n  return states;\n}\n\n/**\n * Helper function to expand node and all ancestors\n */\nexport function expandWithAncestors(\n  id: string,\n  hierarchyManager: HierarchyDataManager<any>,\n  expansionState: ExpansionState\n): void {\n  const ancestorIds = hierarchyManager.getAncestorIds(id);\n  const newExpandedIds = new Set(expansionState.expandedIds);\n  \n  // Add the node itself\n  newExpandedIds.add(id);\n  \n  // Add all ancestors\n  for (const ancestorId of ancestorIds) {\n    newExpandedIds.add(ancestorId);\n  }\n\n  // This assumes expansionState has a way to update - in practice,\n  // you'd call this through the expansion state methods\n  // This is a helper that returns the new set\n  return;\n}\n\n/**\n * Helper function to expand all descendants of a node\n */\nexport function expandDescendants(\n  id: string,\n  hierarchyManager: HierarchyDataManager<any>,\n  expansionState: ExpansionState,\n  maxDepth?: number\n): void {\n  const node = hierarchyManager.findNode(id);\n  if (!node) return;\n\n  const newExpandedIds = new Set(expansionState.expandedIds);\n  newExpandedIds.add(id);\n\n  node.each(descendant => {\n    if (descendant.data.id !== id) {\n      if (!maxDepth || descendant.depth - node.depth <= maxDepth) {\n        newExpandedIds.add(descendant.data.id);\n      }\n    }\n  });\n\n  // Similar to above - this is a helper concept\n  return;\n}\n", "/**\n * useTreeNavigation Hook\n * \n * Implements ARIA treegrid keyboard navigation patterns\n * Follows W3C ARIA Authoring Practices Guide for treegrid\n */\n\nimport { useState, useCallback, useEffect, useRef, KeyboardEvent } from 'react';\nimport { FlattenedNode, ExpansionState } from '../GroupableDataGrid.types';\nimport { HierarchyDataManager } from '../utils/HierarchyDataManager';\n\nexport interface TreeNavigationState {\n  /** Currently focused node ID */\n  focusedNodeId: string | null;\n  \n  /** Currently focused column index (for treegrid navigation) */\n  focusedColumnIndex: number;\n  \n  /** Whether we're in navigation mode */\n  isNavigationActive: boolean;\n}\n\nexport interface UseTreeNavigationOptions {\n  /** Flattened nodes for navigation */\n  flattenedNodes: FlattenedNode<any>[];\n  \n  /** Expansion state controller */\n  expansionState: ExpansionState;\n  \n  /** Hierarchy manager */\n  hierarchyManager: HierarchyDataManager<any>;\n  \n  /** Number of columns */\n  columnCount: number;\n  \n  /** Callback when focused node changes */\n  onFocusChange?: (nodeId: string | null) => void;\n  \n  /** Callback when row is activated (Enter key) */\n  onRowActivate?: (nodeId: string) => void;\n  \n  /** Whether to enable column navigation */\n  enableColumnNavigation?: boolean;\n}\n\nexport interface UseTreeNavigationResult extends TreeNavigationState {\n  /** Focus a specific node */\n  focusNode: (nodeId: string) => void;\n  \n  /** Handle keyboard events */\n  handleKeyDown: (event: KeyboardEvent) => void;\n  \n  /** Move focus to next node */\n  focusNext: () => void;\n  \n  /** Move focus to previous node */\n  focusPrevious: () => void;\n  \n  /** Move focus to first node */\n  focusFirst: () => void;\n  \n  /** Move focus to last visible node */\n  focusLast: () => void;\n  \n  /** Move focus to parent node */\n  focusParent: () => void;\n  \n  /** Expand focused node */\n  expandFocused: () => void;\n  \n  /** Collapse focused node */\n  collapseFocused: () => void;\n  \n  /** Toggle expansion of focused node */\n  toggleFocused: () => void;\n  \n  /** Activate navigation mode */\n  activateNavigation: () => void;\n  \n  /** Deactivate navigation mode */\n  deactivateNavigation: () => void;\n}\n\n/**\n * Hook for ARIA treegrid keyboard navigation\n */\nexport function useTreeNavigation(\n  options: UseTreeNavigationOptions\n): UseTreeNavigationResult {\n  const {\n    flattenedNodes,\n    expansionState,\n    hierarchyManager,\n    columnCount,\n    onFocusChange,\n    onRowActivate,\n    enableColumnNavigation = false,\n  } = options;\n\n  const [focusedNodeId, setFocusedNodeId] = useState<string | null>(null);\n  const [focusedColumnIndex, setFocusedColumnIndex] = useState(0);\n  const [isNavigationActive, setIsNavigationActive] = useState(false);\n\n  // Track if we've auto-focused the first node\n  const hasAutoFocused = useRef(false);\n\n  // Auto-focus first node on mount if nodes exist\n  useEffect(() => {\n    if (!hasAutoFocused.current && flattenedNodes.length > 0 && !focusedNodeId) {\n      setFocusedNodeId(flattenedNodes[0].id);\n      hasAutoFocused.current = true;\n    }\n  }, [flattenedNodes, focusedNodeId]);\n\n  // Find node index by ID\n  const findNodeIndex = useCallback(\n    (nodeId: string | null): number => {\n      if (!nodeId) return -1;\n      return flattenedNodes.findIndex(node => node.id === nodeId);\n    },\n    [flattenedNodes]\n  );\n\n  // Get current focused node\n  const getFocusedNode = useCallback((): FlattenedNode<any> | null => {\n    if (!focusedNodeId) return null;\n    return flattenedNodes.find(node => node.id === focusedNodeId) || null;\n  }, [focusedNodeId, flattenedNodes]);\n\n  // Focus a specific node\n  const focusNode = useCallback(\n    (nodeId: string) => {\n      setFocusedNodeId(nodeId);\n      setFocusedColumnIndex(0); // Reset column index\n      onFocusChange?.(nodeId);\n    },\n    [onFocusChange]\n  );\n\n  // Move focus to next node\n  const focusNext = useCallback(() => {\n    const currentIndex = findNodeIndex(focusedNodeId);\n    if (currentIndex < flattenedNodes.length - 1) {\n      focusNode(flattenedNodes[currentIndex + 1].id);\n    }\n  }, [focusedNodeId, flattenedNodes, findNodeIndex, focusNode]);\n\n  // Move focus to previous node\n  const focusPrevious = useCallback(() => {\n    const currentIndex = findNodeIndex(focusedNodeId);\n    if (currentIndex > 0) {\n      focusNode(flattenedNodes[currentIndex - 1].id);\n    }\n  }, [focusedNodeId, flattenedNodes, findNodeIndex, focusNode]);\n\n  // Move focus to first node\n  const focusFirst = useCallback(() => {\n    if (flattenedNodes.length > 0) {\n      focusNode(flattenedNodes[0].id);\n    }\n  }, [flattenedNodes, focusNode]);\n\n  // Move focus to last visible node\n  const focusLast = useCallback(() => {\n    if (flattenedNodes.length > 0) {\n      focusNode(flattenedNodes[flattenedNodes.length - 1].id);\n    }\n  }, [flattenedNodes, focusNode]);\n\n  // Move focus to parent node\n  const focusParent = useCallback(() => {\n    const currentNode = getFocusedNode();\n    if (!currentNode || !currentNode.parentId) return;\n\n    focusNode(currentNode.parentId);\n  }, [getFocusedNode, focusNode]);\n\n  // Expand focused node\n  const expandFocused = useCallback(() => {\n    if (!focusedNodeId) return;\n\n    const node = getFocusedNode();\n    if (node && node.isExpandable && !node.isExpanded) {\n      expansionState.expand(focusedNodeId);\n    }\n  }, [focusedNodeId, getFocusedNode, expansionState]);\n\n  // Collapse focused node\n  const collapseFocused = useCallback(() => {\n    if (!focusedNodeId) return;\n\n    const node = getFocusedNode();\n    if (node && node.isExpandable && node.isExpanded) {\n      expansionState.collapse(focusedNodeId);\n    } else if (node && node.parentId) {\n      // If already collapsed, move to parent (ARIA treegrid pattern)\n      focusParent();\n    }\n  }, [focusedNodeId, getFocusedNode, expansionState, focusParent]);\n\n  // Toggle expansion of focused node\n  const toggleFocused = useCallback(() => {\n    if (!focusedNodeId) return;\n\n    const node = getFocusedNode();\n    if (node && node.isExpandable) {\n      expansionState.toggle(focusedNodeId);\n    }\n  }, [focusedNodeId, getFocusedNode, expansionState]);\n\n  // Activate navigation mode\n  const activateNavigation = useCallback(() => {\n    setIsNavigationActive(true);\n  }, []);\n\n  // Deactivate navigation mode\n  const deactivateNavigation = useCallback(() => {\n    setIsNavigationActive(false);\n  }, []);\n\n  // Handle keyboard events\n  const handleKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      const { key, ctrlKey, metaKey } = event;\n\n      // Modifier key shortcuts\n      const isModified = ctrlKey || metaKey;\n\n      switch (key) {\n        case 'ArrowDown':\n          event.preventDefault();\n          focusNext();\n          break;\n\n        case 'ArrowUp':\n          event.preventDefault();\n          focusPrevious();\n          break;\n\n        case 'ArrowRight':\n          event.preventDefault();\n          if (enableColumnNavigation && !isModified) {\n            // Move to next column\n            if (focusedColumnIndex < columnCount - 1) {\n              setFocusedColumnIndex(prev => prev + 1);\n            }\n          } else {\n            // Expand node\n            expandFocused();\n          }\n          break;\n\n        case 'ArrowLeft':\n          event.preventDefault();\n          if (enableColumnNavigation && focusedColumnIndex > 0) {\n            // Move to previous column\n            setFocusedColumnIndex(prev => prev - 1);\n          } else {\n            // Collapse node or move to parent\n            collapseFocused();\n          }\n          break;\n\n        case 'Home':\n          event.preventDefault();\n          if (isModified) {\n            // Ctrl+Home: focus first node\n            focusFirst();\n          } else {\n            // Home: focus first column in current row\n            setFocusedColumnIndex(0);\n          }\n          break;\n\n        case 'End':\n          event.preventDefault();\n          if (isModified) {\n            // Ctrl+End: focus last visible node\n            focusLast();\n          } else {\n            // End: focus last column in current row\n            setFocusedColumnIndex(columnCount - 1);\n          }\n          break;\n\n        case 'Enter':\n          event.preventDefault();\n          if (focusedNodeId) {\n            if (isNavigationActive) {\n              // Activate the focused node\n              onRowActivate?.(focusedNodeId);\n            } else {\n              // Enter navigation mode\n              activateNavigation();\n            }\n          }\n          break;\n\n        case ' ': // Space\n          event.preventDefault();\n          toggleFocused();\n          break;\n\n        case 'Escape':\n          event.preventDefault();\n          if (isNavigationActive) {\n            deactivateNavigation();\n          } else if (focusedNodeId) {\n            // Clear focus\n            setFocusedNodeId(null);\n            onFocusChange?.(null);\n          }\n          break;\n\n        case '*': // Asterisk - expand all siblings\n          event.preventDefault();\n          {\n            const currentNode = getFocusedNode();\n            if (currentNode && currentNode.parentId) {\n              const siblingIds = hierarchyManager.getSiblingIds(currentNode.id);\n              siblingIds.forEach(id => {\n                const node = flattenedNodes.find(n => n.id === id);\n                if (node && node.isExpandable) {\n                  expansionState.expand(id);\n                }\n              });\n            }\n          }\n          break;\n\n        default:\n          // Type-ahead search could be implemented here\n          break;\n      }\n    },\n    [\n      focusNext,\n      focusPrevious,\n      focusFirst,\n      focusLast,\n      expandFocused,\n      collapseFocused,\n      toggleFocused,\n      activateNavigation,\n      deactivateNavigation,\n      focusedNodeId,\n      focusedColumnIndex,\n      columnCount,\n      enableColumnNavigation,\n      isNavigationActive,\n      onRowActivate,\n      onFocusChange,\n      getFocusedNode,\n      hierarchyManager,\n      flattenedNodes,\n      expansionState,\n    ]\n  );\n\n  return {\n    focusedNodeId,\n    focusedColumnIndex,\n    isNavigationActive,\n    focusNode,\n    handleKeyDown,\n    focusNext,\n    focusPrevious,\n    focusFirst,\n    focusLast,\n    focusParent,\n    expandFocused,\n    collapseFocused,\n    toggleFocused,\n    activateNavigation,\n    deactivateNavigation,\n  };\n}\n\n/**\n * Helper hook for managing focus within a treegrid cell\n */\nexport function useCellFocus(nodeId: string, columnIndex: number, navigationState: TreeNavigationState) {\n  const isFocused = navigationState.focusedNodeId === nodeId && \n                    navigationState.focusedColumnIndex === columnIndex;\n\n  return {\n    isFocused,\n    tabIndex: isFocused ? 0 : -1,\n    'aria-selected': isFocused,\n  };\n}\n", "/**\n * GroupHeader Component\n * \n * Expandable row header for grouped data with aggregations\n * Part of GroupableDataGrid component\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { GroupHeaderContext } from '../GroupableDataGrid.types';\n\nexport interface GroupHeaderProps<T = any> {\n  /** Group header context with metadata and controls */\n  context: GroupHeaderContext<T>;\n  \n  /** Number of columns in the table */\n  columnCount: number;\n  \n  /** Custom renderer for the group header */\n  customRenderer?: (context: GroupHeaderContext<T>) => React.ReactNode;\n  \n  /** Whether this group header should receive keyboard focus */\n  isFocused?: boolean;\n  \n  /** Keyboard event handler */\n  onKeyDown?: (event: React.KeyboardEvent) => void;\n  \n  /** Click handler for expansion toggle */\n  onClick?: () => void;\n  \n  /** Tab index for keyboard navigation */\n  tabIndex?: number;\n  \n  /** Test ID */\n  'data-testid'?: string;\n}\n\n/**\n * Chevron icon for expansion indicator\n */\nconst ChevronIcon: React.FC = () => (\n  <svg\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    aria-hidden=\"true\"\n  >\n    <path\n      d=\"M7 5L12 10L7 15\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n);\n\n/**\n * GroupHeader Component\n */\nexport const GroupHeader = <T extends any = any>({\n  context,\n  columnCount,\n  customRenderer,\n  isFocused = false,\n  onKeyDown,\n  onClick,\n  tabIndex = -1,\n  'data-testid': testId,\n}: GroupHeaderProps<T>): React.ReactElement => {\n  const { node, level, isExpanded, toggleExpansion, aggregations, totalCount } = context;\n\n  // Use custom renderer if provided\n  if (customRenderer) {\n    return (\n      <tr\n        className={classNames('group-header', {\n          'group-header--expanded': isExpanded,\n          'group-header--focused': isFocused,\n          [`group-header--level-${level + 1}`]: true,\n        })}\n        role=\"row\"\n        aria-expanded={isExpanded}\n        aria-level={level + 1}\n        tabIndex={tabIndex}\n        onClick={onClick || toggleExpansion}\n        onKeyDown={onKeyDown}\n        data-testid={testId}\n        data-node-id={node.id}\n      >\n        <td colSpan={columnCount} className=\"group-header__cell group-header__cell--custom\">\n          {customRenderer(context)}\n        </td>\n      </tr>\n    );\n  }\n\n  // Default renderer\n  const aggregationEntries = Object.entries(aggregations);\n  const hasAggregations = aggregationEntries.length > 0;\n\n  return (\n    <tr\n      className={classNames('group-header', {\n        'group-header--expanded': isExpanded,\n        'group-header--focused': isFocused,\n        [`group-header--level-${level + 1}`]: true,\n      })}\n      role=\"row\"\n      aria-expanded={isExpanded}\n      aria-level={level + 1}\n      tabIndex={tabIndex}\n      onClick={onClick || toggleExpansion}\n      onKeyDown={onKeyDown}\n      data-testid={testId}\n      data-node-id={node.id}\n    >\n      {/* First cell: Icon + Label + Count */}\n      <td\n        className={classNames(\n          'group-header__cell',\n          'group-header__cell--first',\n          `group-header__cell--indent-${level}`\n        )}\n      >\n        <span\n          className={classNames('group-header__icon', {\n            'group-header__icon--expanded': isExpanded,\n          })}\n        >\n          <ChevronIcon />\n        </span>\n        <span className=\"group-header__label\">\n          {node.label}\n        </span>\n        <span className=\"group-header__count\">\n          ({totalCount} {totalCount === 1 ? 'item' : 'items'})\n        </span>\n      </td>\n\n      {/* Aggregation cells (if we have multiple columns and aggregations) */}\n      {columnCount > 1 && hasAggregations && (\n        <td\n          className=\"group-header__cell group-header__cell--aggregations\"\n          colSpan={columnCount - 1}\n        >\n          <div className=\"group-header__aggregations\">\n            {aggregationEntries.map(([key, value], index) => {\n              // Find the aggregation config to get formatting\n              const displayValue = typeof value === 'object' && value !== null\n                ? JSON.stringify(value)\n                : String(value ?? '\u2014');\n\n              return (\n                <div key={`${key}-${index}`} className=\"group-header__aggregation\">\n                  <span className=\"group-header__aggregation-label\">{key}:</span>\n                  <span className=\"group-header__aggregation-value\">{displayValue}</span>\n                </div>\n              );\n            })}\n          </div>\n        </td>\n      )}\n\n      {/* Fill remaining columns if no aggregations */}\n      {columnCount > 1 && !hasAggregations && (\n        <td colSpan={columnCount - 1} className=\"group-header__cell\" />\n      )}\n    </tr>\n  );\n};\n\nGroupHeader.displayName = 'GroupHeader';\n\nexport default GroupHeader;\n", "/**\n * TreeNode Component\n * \n * Individual tree node row for hierarchical data display\n * Part of GroupableDataGrid component\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { TreeNodeContext } from '../GroupableDataGrid.types';\nimport { ColumnDefinition } from '../../SortableDataTable/AriaDataGridTypes';\n\nexport interface TreeNodeProps<T = any> {\n  /** Tree node context with metadata and controls */\n  context: TreeNodeContext<T>;\n  \n  /** Column definitions for rendering cells */\n  columns: ColumnDefinition[];\n  \n  /** Custom renderer for the tree node */\n  customRenderer?: (context: TreeNodeContext<T>) => React.ReactNode;\n  \n  /** Whether this node should receive keyboard focus */\n  isFocused?: boolean;\n  \n  /** Keyboard event handler */\n  onKeyDown?: (event: React.KeyboardEvent) => void;\n  \n  /** Click handler for expansion toggle */\n  onExpanderClick?: () => void;\n  \n  /** Tab index for keyboard navigation */\n  tabIndex?: number;\n  \n  /** Test ID */\n  'data-testid'?: string;\n}\n\n/**\n * Chevron icon for tree node expander\n */\nconst ExpanderIcon: React.FC = () => (\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    aria-hidden=\"true\"\n  >\n    <path\n      d=\"M6 4L10 8L6 12\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n);\n\n/**\n * Render cell value based on column definition\n */\nfunction renderCellValue<T>(item: T, column: ColumnDefinition): React.ReactNode {\n  const value = (item as any)[column.key];\n  \n  // Use custom renderer if provided\n  if (column.render) {\n    return column.render(item);\n  }\n  \n  // Default rendering\n  if (value === null || value === undefined) {\n    return '\u2014';\n  }\n  \n  return String(value);\n}\n\n/**\n * TreeNode Component\n */\nexport const TreeNode = <T extends any = any>({\n  context,\n  columns,\n  customRenderer,\n  isFocused = false,\n  onKeyDown,\n  onExpanderClick,\n  tabIndex = -1,\n  'data-testid': testId,\n}: TreeNodeProps<T>): React.ReactElement => {\n  const { node, depth, isExpanded, toggleExpansion, hasChildren, aggregations } = context;\n\n  // Use custom renderer if provided\n  if (customRenderer) {\n    return (\n      <tr\n        className={classNames('tree-node', {\n          'tree-node--expanded': isExpanded,\n          'tree-node--focused': isFocused,\n          'tree-node--has-children': hasChildren,\n        })}\n        role=\"row\"\n        aria-expanded={hasChildren ? isExpanded : undefined}\n        aria-level={depth + 1}\n        tabIndex={tabIndex}\n        onKeyDown={onKeyDown}\n        data-testid={testId}\n        data-node-id={node.id}\n      >\n        <td colSpan={columns.length} className=\"tree-node__cell tree-node__cell--custom\">\n          {customRenderer(context)}\n        </td>\n      </tr>\n    );\n  }\n\n  // Default renderer\n  return (\n    <tr\n      className={classNames('tree-node', {\n        'tree-node--expanded': isExpanded,\n        'tree-node--focused': isFocused,\n        'tree-node--has-children': hasChildren,\n      })}\n      role=\"row\"\n      aria-expanded={hasChildren ? isExpanded : undefined}\n      aria-level={depth + 1}\n      tabIndex={tabIndex}\n      onKeyDown={onKeyDown}\n      data-testid={testId}\n      data-node-id={node.id}\n    >\n      {columns.map((column, columnIndex) => {\n        const isFirstColumn = columnIndex === 0;\n        \n        return (\n          <td\n            key={column.key}\n            className={classNames('tree-node__cell', {\n              'tree-node__cell--first': isFirstColumn,\n              [`tree-node__cell--depth-${depth}`]: isFirstColumn,\n            })}\n            role=\"gridcell\"\n          >\n            {isFirstColumn && (\n              <>\n                {/* Expander button or placeholder */}\n                {hasChildren ? (\n                  <button\n                    type=\"button\"\n                    className={classNames('tree-node__expander', {\n                      'tree-node__expander--expanded': isExpanded,\n                    })}\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      if (onExpanderClick) {\n                        onExpanderClick();\n                      } else {\n                        toggleExpansion();\n                      }\n                    }}\n                    aria-label={isExpanded ? 'Collapse node' : 'Expand node'}\n                    tabIndex={-1}\n                  >\n                    <ExpanderIcon />\n                  </button>\n                ) : (\n                  <span className=\"tree-node__expander tree-node__expander--placeholder\" />\n                )}\n              </>\n            )}\n            \n            {/* Cell content */}\n            <span className=\"tree-node__content\">\n              {renderCellValue(node.data, column)}\n            </span>\n            \n            {/* Show aggregations for first column if available */}\n            {isFirstColumn && aggregations && Object.keys(aggregations).length > 0 && (\n              <span className=\"tree-node__aggregation-hint\" title=\"Has aggregated data from children\">\n                {' '}({Object.keys(aggregations).length} agg)\n              </span>\n            )}\n          </td>\n        );\n      })}\n    </tr>\n  );\n};\n\nTreeNode.displayName = 'TreeNode';\n\nexport default TreeNode;\n", "import * as React from \"react\";\nconst { forwardRef, useCallback, useState } = React;\nimport { ButtonVariant, ButtonSize, ButtonVariantLike, ButtonSizeLike } from \"./Button.types\";\nimport \"./Button.scss\";\nimport { mapButtonProps } from \"../../mapping/button\";\n\n/**\n * Base props for NHS Button component\n */\ninterface BaseButtonProps {\n\t/**\n\t * The variant of the button\n\t * @default 'primary'\n\t */\n\tvariant?: ButtonVariantLike;\n\n\t/**\n\t * The size of the button\n\t * @default 'default'\n\t */\n\tsize?: ButtonSizeLike;\n\n\t/**\n\t * Whether the button should take up the full width of its container\n\t * @default false\n\t */\n\tfullWidth?: boolean;\n\n\t/**\n\t * Additional CSS class names\n\t */\n\tclassName?: string;\n\n\t/**\n\t * Button content\n\t */\n\tchildren: React.ReactNode;\n\n\t/**\n\t * Prevent double click submissions (adds debouncing)\n\t * @default false\n\t */\n\tpreventDoubleClick?: boolean;\n}\n\n/**\n * Props when rendering as button element (no href)\n */\nexport interface ButtonAsButtonProps\n\textends BaseButtonProps,\n\t\tOmit<React.ButtonHTMLAttributes<HTMLButtonElement>, keyof BaseButtonProps> {\n\t/**\n\t * Button type\n\t * @default 'button'\n\t */\n\ttype?: \"button\" | \"submit\" | \"reset\";\n}\n\n/**\n * Props when rendering as anchor element (with href)\n */\nexport interface ButtonAsLinkProps\n\textends BaseButtonProps,\n\t\tOmit<\n\t\t\tReact.AnchorHTMLAttributes<HTMLAnchorElement>,\n\t\t\tkeyof BaseButtonProps | \"role\" | \"type\"\n\t\t> {\n\t/**\n\t * When provided, renders as anchor link instead of button\n\t */\n\thref: string;\n\n\t/**\n\t * Link target\n\t */\n\ttarget?: string;\n\n\t/**\n\t * Link rel attribute\n\t */\n\trel?: string;\n\n\t/**\n\t * Use aria-disabled for anchor elements (no native disabled support)\n\t * Use disabled prop instead for button elements\n\t */\n\t\"aria-disabled\"?: \"true\" | \"false\";\n}\n\n/**\n * NHS Button Component\n *\n * A button component that provides excellent accessibility out of the box\n * while following NHS design guidelines. Based on NHS.UK button patterns.\n *\n * Features:\n * - Full keyboard navigation support (Enter and Space key activation)\n * - Screen reader compatibility\n * - Focus management\n * - Proper ARIA attributes\n * - Double-click prevention\n * - Support for button and link variants\n *\n * @example\n * ```tsx\n * <Button variant=\"primary\" size=\"default\">\n *\t Continue\n * </Button>\n *\n * <Button href=\"/next-page\" variant=\"secondary\">\n *\t Go to next page\n * </Button>\n * ```\n */\n\n// Implementation function\nfunction ButtonComponent(\n\tprops: ButtonAsButtonProps | ButtonAsLinkProps,\n\tref: React.Ref<HTMLButtonElement | HTMLAnchorElement>\n): React.ReactElement {\n\tconst {\n\t\tchildren,\n\t\tvariant = ButtonVariant.Primary,\n\t\tsize = ButtonSize.Default,\n\t\tfullWidth = false,\n\t\tclassName = \"\",\n\t\tpreventDoubleClick = false,\n\t\t...rest\n\t} = props;\n\n\t// State for interactive data attributes (replaces React Aria state management)\n\tconst [isPressed, setIsPressed] = useState(false);\n\tconst [isHovered, setIsHovered] = useState(false);\n\tconst [isFocused, setIsFocused] = useState(false);\n\n\t// Normalised model (future shared with macro generator)\n\tconst model = mapButtonProps({\n\t\tvariant,\n\t\tsize,\n\t\tfullWidth,\n\t\tclassName,\n\t\tpreventDoubleClick,\n\t\thref: \"href\" in rest ? (rest as any).href : undefined,\n\t});\n\n\t// Build data attributes for styling (replaces React Aria data attributes)\n\tconst isDisabled =\n\t\t\"disabled\" in rest ? rest.disabled : rest[\"aria-disabled\"] === \"true\";\n\tconst dataAttributes = {\n\t\t...(isPressed && { \"data-pressed\": \"true\" }),\n\t\t...(isHovered && { \"data-hovered\": \"true\" }),\n\t\t...(isFocused && { \"data-focused\": \"true\" }),\n\t\t...(isDisabled && { \"data-disabled\": \"true\" }),\n\t};\n\n\t// Event handlers for state management\n\tconst handleMouseDown = useCallback(\n\t\t() => !isDisabled && setIsPressed(true),\n\t\t[isDisabled]\n\t);\n\tconst handleMouseUp = useCallback(() => setIsPressed(false), []);\n\tconst handleMouseEnter = useCallback(\n\t\t() => !isDisabled && setIsHovered(true),\n\t\t[isDisabled]\n\t);\n\tconst handleMouseLeave = useCallback(() => {\n\t\tsetIsHovered(false);\n\t\tsetIsPressed(false); // Reset pressed state when leaving\n\t}, []);\n\tconst handleFocus = useCallback(() => setIsFocused(true), []);\n\tconst handleBlur = useCallback(() => setIsFocused(false), []);\n\n\t// Handle keyboard navigation (Space key support for buttons and links with role=\"button\")\n\tconst handleKeyDown = useCallback(\n\t\t(event: React.KeyboardEvent<HTMLElement>) => {\n\t\t\t// Handle space bar activation for button role elements\n\t\t\tif (\n\t\t\t\tevent.key === \" \" &&\n\t\t\t\t(\"href\" in rest ||\n\t\t\t\t\tevent.currentTarget.getAttribute(\"role\") === \"button\")\n\t\t\t) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t(event.currentTarget as HTMLElement).click();\n\t\t\t}\n\t\t},\n\t\t[rest]\n\t);\n\n\t// Handle click with double-click prevention\n\tconst handleClick = useCallback(\n\t\t(event: React.MouseEvent<HTMLElement>) => {\n\t\t\t// Double-click prevention logic (following NHS.UK pattern)\n\t\t\tif (preventDoubleClick) {\n\t\t\t\tconst target = event.currentTarget as HTMLElement;\n\t\t\t\tconst isAlreadyProcessing =\n\t\t\t\t\ttarget.getAttribute(\"data-processing\") === \"true\";\n\n\t\t\t\tif (isAlreadyProcessing) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Mark as processing\n\t\t\t\ttarget.setAttribute(\"data-processing\", \"true\");\n\n\t\t\t\t// Clear processing state after 1 second\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\ttarget.removeAttribute(\"data-processing\");\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t},\n\t\t[preventDoubleClick]\n\t);\n\n\t// Render as anchor link if href is provided\n\tif (\"href\" in rest && rest.href) {\n\t\tconst {\n\t\t\tid,\n\t\t\tstyle,\n\t\t\ttitle,\n\t\t\t[\"aria-label\"]: ariaLabel,\n\t\t\t[\"aria-describedby\"]: ariaDescribedBy,\n\t\t\t[\"aria-labelledby\"]: ariaLabelledBy,\n\t\t\ttabIndex,\n\t\t\t...anchorRest\n\t\t} = rest as ButtonAsLinkProps as any;\n\t\tconst anchorProps = rest as ButtonAsLinkProps;\n\t\treturn (\n\t\t\t<a\n\t\t\t\tref={ref as React.Ref<HTMLAnchorElement>}\n\t\t\t\thref={anchorProps.href}\n\t\t\t\ttarget={anchorProps.target}\n\t\t\t\trel={anchorProps.rel}\n\t\t\t\tclassName={model.classes}\n\t\t\t\trole=\"button\"\n\t\t\t\tdraggable=\"false\"\n\t\t\t\tdata-module=\"nhs-button\"\n\t\t\t\t{...dataAttributes}\n\t\t\t\t{...(preventDoubleClick && { \"data-prevent-double-click\": \"true\" })}\n\t\t\t\t{...anchorRest}\n\t\t\t\tonKeyDown={(event) => {\n\t\t\t\t\tanchorProps.onKeyDown?.(event);\n\t\t\t\t\thandleKeyDown(event);\n\t\t\t\t}}\n\t\t\t\tonClick={(event) => {\n\t\t\t\t\tanchorProps.onClick?.(event);\n\t\t\t\t\thandleClick(event);\n\t\t\t\t}}\n\t\t\t\tonMouseDown={(event) => {\n\t\t\t\t\tanchorProps.onMouseDown?.(event);\n\t\t\t\t\thandleMouseDown();\n\t\t\t\t}}\n\t\t\t\tonMouseUp={(event) => {\n\t\t\t\t\tanchorProps.onMouseUp?.(event);\n\t\t\t\t\thandleMouseUp();\n\t\t\t\t}}\n\t\t\t\tonMouseEnter={(event) => {\n\t\t\t\t\tanchorProps.onMouseEnter?.(event);\n\t\t\t\t\thandleMouseEnter();\n\t\t\t\t}}\n\t\t\t\tonMouseLeave={(event) => {\n\t\t\t\t\tanchorProps.onMouseLeave?.(event);\n\t\t\t\t\thandleMouseLeave();\n\t\t\t\t}}\n\t\t\t\tonFocus={(event) => {\n\t\t\t\t\tanchorProps.onFocus?.(event);\n\t\t\t\t\thandleFocus();\n\t\t\t\t}}\n\t\t\t\tonBlur={(event) => {\n\t\t\t\t\tanchorProps.onBlur?.(event);\n\t\t\t\t\thandleBlur();\n\t\t\t\t}}\n\t\t\t\t// Note: anchor links don't support disabled, but we can simulate it with aria-disabled\n\t\t\t\taria-disabled={anchorProps[\"aria-disabled\"]}\n\t\t\t\t{...(anchorProps[\"aria-disabled\"] === \"true\" && { tabIndex: -1 })}\n\t\t\t\t// Extract relevant props excluding our custom ones\n\t\t\t\tid={id}\n\t\t\t\tstyle={style}\n\t\t\t\ttitle={title}\n\t\t\t\taria-label={ariaLabel}\n\t\t\t\taria-describedby={ariaDescribedBy}\n\t\t\t\taria-labelledby={ariaLabelledBy}\n\t\t\t\ttabIndex={tabIndex}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</a>\n\t\t);\n\t}\n\n\t// Render as button element\n\tconst {\n\t\tid,\n\t\tstyle,\n\t\ttitle,\n\t\t[\"aria-label\"]: ariaLabel,\n\t\t[\"aria-describedby\"]: ariaDescribedBy,\n\t\t[\"aria-labelledby\"]: ariaLabelledBy,\n\t\ttabIndex,\n\t\tname,\n\t\tvalue: valueProp,\n\t\tform,\n\t\tformAction,\n\t\tformEncType,\n\t\tformMethod,\n\t\tformNoValidate,\n\t\tformTarget,\n\t\tautoFocus,\n\t\t...buttonRest\n\t} = rest as any as ButtonAsButtonProps;\n\tconst buttonProps = rest as ButtonAsButtonProps;\n\treturn (\n\t\t<button\n\t\t\tref={ref as React.Ref<HTMLButtonElement>}\n\t\t\ttype={buttonProps.type || \"button\"}\n\t\t\tdisabled={buttonProps.disabled}\n\t\t\tclassName={model.classes}\n\t\t\tdata-module=\"nhs-button\"\n\t\t\t{...dataAttributes}\n\t\t\t{...(preventDoubleClick && { \"data-prevent-double-click\": \"true\" })}\n\t\t\t{...(buttonProps.disabled && { \"aria-disabled\": \"true\" })}\n\t\t\t{...buttonRest}\n\t\t\tonKeyDown={(event) => {\n\t\t\t\tbuttonProps.onKeyDown?.(event);\n\t\t\t\thandleKeyDown(event);\n\t\t\t}}\n\t\t\tonClick={(event) => {\n\t\t\t\tbuttonProps.onClick?.(event);\n\t\t\t\thandleClick(event);\n\t\t\t}}\n\t\t\tonMouseDown={(event) => {\n\t\t\t\tbuttonProps.onMouseDown?.(event);\n\t\t\t\thandleMouseDown();\n\t\t\t}}\n\t\t\tonMouseUp={(event) => {\n\t\t\t\tbuttonProps.onMouseUp?.(event);\n\t\t\t\thandleMouseUp();\n\t\t\t}}\n\t\t\tonMouseEnter={(event) => {\n\t\t\t\tbuttonProps.onMouseEnter?.(event);\n\t\t\t\thandleMouseEnter();\n\t\t\t}}\n\t\t\tonMouseLeave={(event) => {\n\t\t\t\tbuttonProps.onMouseLeave?.(event);\n\t\t\t\thandleMouseLeave();\n\t\t\t}}\n\t\t\tonFocus={(event) => {\n\t\t\t\tbuttonProps.onFocus?.(event);\n\t\t\t\thandleFocus();\n\t\t\t}}\n\t\t\tonBlur={(event) => {\n\t\t\t\tbuttonProps.onBlur?.(event);\n\t\t\t\thandleBlur();\n\t\t\t}}\n\t\t\t// Extract relevant props\n\t\t\tid={id}\n\t\t\tstyle={style}\n\t\t\ttitle={title}\n\t\t\taria-label={ariaLabel}\n\t\t\taria-describedby={ariaDescribedBy}\n\t\t\taria-labelledby={ariaLabelledBy}\n\t\t\ttabIndex={tabIndex}\n\t\t\tname={name}\n\t\t\tvalue={valueProp}\n\t\t\tform={form}\n\t\t\tformAction={formAction}\n\t\t\tformEncType={formEncType}\n\t\t\tformMethod={formMethod}\n\t\t\tformNoValidate={formNoValidate}\n\t\t\tformTarget={formTarget}\n\t\t\tautoFocus={autoFocus}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n}\n\n// Define overloaded function signatures\ninterface ButtonComponent {\n\t(\n\t\tprops: ButtonAsButtonProps & { ref?: React.Ref<HTMLButtonElement> }\n\t): React.ReactElement;\n\t(\n\t\tprops: ButtonAsLinkProps & { ref?: React.Ref<HTMLAnchorElement> }\n\t): React.ReactElement;\n\tdisplayName?: string;\n}\n\nexport const Button = forwardRef(ButtonComponent) as ButtonComponent;\nButton.displayName = \"Button\";\n\n// Export union type for compatibility\nexport type NHSButtonProps = ButtonAsButtonProps | ButtonAsLinkProps;\n\nexport default Button;\n", "// Pure mapping logic for Button. Converts external props to a normalised model\n// used by both React & Nunjucks renderers (future).\n\nexport interface ButtonInputProps {\n  variant?: string; // Accepts ButtonVariant enum values (string)\n  size?: string;    // Accepts ButtonSize enum values (string)\n  fullWidth?: boolean;\n  className?: string;\n  preventDoubleClick?: boolean;\n  href?: string;\n}\n\nexport interface NormalisedButtonModel {\n  tag: 'button' | 'a';\n  classes: string;\n  data: Record<string, string>;\n  attrs: Record<string, any>;\n  preventDoubleClick: boolean;\n}\n\nexport function mapButtonProps(input: ButtonInputProps): NormalisedButtonModel {\n  const variant = input.variant || 'primary';\n  const size = input.size || 'default';\n  const fullWidth = !!input.fullWidth;\n  const classes = [\n    'nhs-aria-button',\n    `nhs-aria-button--${variant}`,\n    size !== 'default' ? `nhs-aria-button--${size}` : '',\n    fullWidth ? 'nhs-aria-button--full-width' : '',\n    input.className || ''\n  ].filter(Boolean).join(' ');\n\n  const tag = input.href ? 'a' : 'button';\n  return {\n    tag,\n    classes,\n    data: { module: 'nhs-button' },\n    attrs: input.href ? { href: input.href, role: 'button' } : { type: 'button' },\n    preventDoubleClick: !!input.preventDoubleClick\n  };\n}\n"],
  "mappings": "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",
  "names": ["classNames", "import_classnames", "React", "useMemo", "useCallback", "useRef", "useEffect", "sum", "sum", "count", "children", "useState", "useCallback", "useEffect", "classNames", "import_classnames", "jsx", "jsxs", "classNames", "jsx", "useCallback", "useState", "id", "style", "title", "ariaLabel", "ariaDescribedBy", "ariaLabelledBy", "tabIndex", "jsx", "jsxs", "classNames", "useRef", "React", "useMemo", "useCallback", "useEffect"]
}
