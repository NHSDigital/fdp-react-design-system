{
  "version": 3,
  "sources": ["../../../../src/components/Input/Input.tsx", "../../../../src/mapping/input.ts"],
  "sourcesContent": ["import React, { useState, useEffect } from 'react';\nimport './Input.scss';\nimport { InputProps } from './Input.types';\nimport { mapInputProps } from '../../mapping/input';\n\nexport const Input: React.FC<InputProps> = ({\n  id,\n  name,\n  type = 'text',\n  value,\n  defaultValue,\n  placeholder,\n  disabled = false,\n  readOnly = false,\n  required = false,\n  hasError = false,\n  describedBy,\n  className,\n  width = 'full',\n  inputMode,\n  autoComplete,\n  maxLength,\n  minLength,\n  pattern,\n  step,\n  min,\n  max,\n  showValueLabels = false,\n  showCurrentValue = false,\n  valueLabels,\n  onChange,\n  onBlur,\n  onFocus,\n  onKeyDown,\n  ...props\n}) => {\n  const [currentValue, setCurrentValue] = useState(value || defaultValue || (type === 'range' ? min || '0' : ''));\n\n  useEffect(() => {\n    if (value !== undefined) {\n      setCurrentValue(value);\n    }\n  }, [value]);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement> | React.KeyboardEvent<HTMLInputElement>) => {\n    const el = event.target as HTMLInputElement;\n    setCurrentValue(el.value);\n    // Only forward real change events (have nativeEvent) or synthesized key events where value changed\n    if ('type' in event && (event as any).nativeEvent) {\n      onChange?.(event as any);\n    } else if (event.type === 'keydown') {\n      onChange?.(event as any);\n    }\n  };\n\n  const { classes: inputClasses, isRange } = mapInputProps({ id, name, type, hasError, width, className });\n\n  const isControlled = value !== undefined;\n  const sharedRangeProps = {\n    id,\n    name,\n    type,\n    placeholder,\n    disabled,\n    readOnly,\n    required,\n    'aria-describedby': describedBy,\n    inputMode,\n    autoComplete,\n    maxLength,\n    minLength,\n    pattern,\n    step,\n    min,\n    max,\n    onChange: handleChange,\n    onBlur,\n    onFocus,\n    onKeyDown: (e: React.KeyboardEvent<HTMLInputElement>) => {\n      // For range sliders, jsdom may not update value when typing numbers; manually adjust\n      if (isRange && /[0-9]/.test(e.key)) {\n        const next = (currentValue?.toString() || '') + e.key;\n        (e.target as HTMLInputElement).value = next;\n        handleChange(e);\n      }\n      onKeyDown?.(e);\n    },\n    ...props,\n  } as const;\n\n  // Range input handling: avoid React warning by not passing both value and defaultValue for uncontrolled inputs\n  const uncontrolledRangeProps = (!isControlled && defaultValue !== undefined)\n    ? { defaultValue }\n    : {};\n  const controlledRangeProps = isControlled ? { value } : {};\n\n  const renderRangeInput = () => (\n    <input\n      className={inputClasses}\n      // Only supply value if controlled; otherwise rely on defaultValue\n      {...controlledRangeProps}\n      {...uncontrolledRangeProps}\n      // For internal current value display we still keep state, but don't force React controlled mode\n      data-current-value={currentValue}\n      {...sharedRangeProps}\n    />\n  );\n\n  const rangeWrapper = isRange ? (\n    <div className=\"nhsuk-input-range-wrapper\">\n      {showValueLabels && (\n        <div className=\"nhsuk-input-range-labels\">\n          <span className=\"nhsuk-input-range-label nhsuk-input-range-label--min\">\n            {valueLabels?.min || min || '0'}\n          </span>\n          {renderRangeInput()}\n          <span className=\"nhsuk-input-range-label nhsuk-input-range-label--max\">\n            {valueLabels?.max || max || '100'}\n          </span>\n        </div>\n      )}\n      {!showValueLabels && renderRangeInput()}\n      {showCurrentValue && (\n        <div className=\"nhsuk-input-range-current-value\">\n          <span className=\"nhsuk-input-range-current-label\">\n            {valueLabels?.current || 'Current value:'} <strong>{currentValue}</strong>\n          </span>\n        </div>\n      )}\n    </div>\n  ) : null;\n\n  if (isRange) {\n    return rangeWrapper;\n  }\n\n  return (\n    <input\n      className={inputClasses}\n      id={id}\n      name={name}\n      type={type}\n      value={value}\n      {...(value === undefined && defaultValue !== undefined ? { defaultValue } : {})}\n      placeholder={placeholder}\n      disabled={disabled}\n      readOnly={readOnly}\n      required={required}\n      aria-describedby={describedBy}\n      inputMode={inputMode}\n      autoComplete={autoComplete}\n      maxLength={maxLength}\n      minLength={minLength}\n      pattern={pattern}\n      step={step}\n      min={min}\n      max={max}\n      onChange={onChange}\n      onBlur={onBlur}\n      onFocus={onFocus}\n      onKeyDown={onKeyDown}\n      {...props}\n    />\n  );\n};\n", "export interface InputMapperProps {\n  id: string;\n  name: string;\n  type?: string;\n  hasError?: boolean;\n  width?: string;\n  className?: string;\n  range?: {\n    isRange: boolean;\n    showValueLabels: boolean;\n    showCurrentValue: boolean;\n  };\n}\n\nexport interface NormalisedInputModel {\n  classes: string;\n  isRange: boolean;\n}\n\nexport function mapInputProps(p: InputMapperProps): NormalisedInputModel {\n  const type = p.type || 'text';\n  const isRange = type === 'range';\n  const classes = [\n    'nhsuk-input',\n    p.hasError ? 'nhsuk-input--error' : '',\n    isRange ? 'nhsuk-input--range' : '',\n    (!isRange && p.width && p.width !== 'full') ? `nhsuk-input--width-${p.width}` : '',\n    p.className || ''\n  ].filter(Boolean).join(' ');\n  return { classes, isRange };\n}\n"],
  "mappings": "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",
  "names": []
}
