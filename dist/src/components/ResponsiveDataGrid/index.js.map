{
  "version": 3,
  "sources": ["../../../../node_modules/classnames/index.js", "../../../../src/components/ResponsiveDataGrid/ResponsiveDataGrid.tsx", "../../../../src/components/SortableDataTable/AriaTabsDataGrid.tsx", "../../../../src/components/SortableDataTable/SortStatusControl/SortStatusControl.tsx", "../../../../src/components/Button/Button.tsx", "../../../../src/mapping/button.ts", "../../../../src/mapping/tag.ts", "../../../../src/components/Tag/Tag.tsx", "../../../../src/components/SortableDataTable/sortUtils.ts", "../../../../src/components/Card/Card.tsx", "../../../../src/components/Heading/Heading.tsx", "../../../../src/mapping/heading.ts", "../../../../src/components/Select/Select.tsx", "../../../../src/mapping/select.ts", "../../../../src/components/ResponsiveDataGrid/GenericCardRenderer.ts", "../../../../src/components/ResponsiveDataGrid/HealthcareCardTemplates.tsx", "../../../../src/components/ResponsiveDataGrid/HealthcarePlugin.tsx", "../../../../src/components/ResponsiveDataGrid/ResponsiveDataGridHelpers.ts", "../../../../src/components/ResponsiveDataGrid/ResponsiveDataGridDemo.tsx", "../../../../src/components/SortableDataTable/icons.tsx", "../../../../src/components/SortableDataTable/AriaTabsDataGridTCH.tsx", "../../../../src/components/SortableDataTable/AriaTabsDataGridFactory.ts", "../../../../src/components/SortableDataTable/AriaTabsDataGridPlugins.ts", "../../../../src/components/ResponsiveDataGrid/GenericCard.tsx"],
  "sourcesContent": ["/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n", "/**\n * ResponsiveDataGrid Component with Hierarchical Keyboard Navigation\n * \n * ENHANCED ACCESSIBILITY FEATURES:\n * \n * Hierarchical Navigation Structure:\n * 1. TAB LEVEL: Navigate between tab buttons using arrow keys\n * 2. SORT-CONTROLS LEVEL: Navigate between sort controls using arrow keys\n * 3. CARD LEVEL: Navigate between cards using arrow keys  \n * 4. CARD-INTERNAL LEVEL: Navigate within card elements using arrow keys\n * \n * Navigation Controls:\n * - Arrow keys: Navigate within current focus area\n * - Enter: When on card, select card and enter card-internal navigation mode\n *           When on sort controls, enter sort controls navigation mode\n * - Space: Toggle card selection (traditional behavior)\n *          Enter sort controls navigation mode\n * - Escape: Exit card-internal navigation, sort controls navigation, or clear selection\n * - Ctrl+Home/End: Jump between navigation levels\n * \n * Sort Controls Navigation:\n * - Automatically manages sort dropdown and clear button navigation\n * - Arrow keys move between sort controls\n * - Enter/Space activates the focused control or enters navigation mode\n * - Up arrow returns to tabs, Down arrow goes to cards\n * - Screen reader announcements for sort control changes\n * \n * Card-Internal Navigation:\n * - Automatically scans for focusable elements (buttons, links, inputs, etc.)\n * - Arrow keys move between internal elements\n * - Enter/Space activates the focused element\n * - Visual indicators show navigation mode and element hints\n * - Screen reader announcements for navigation state changes\n * \n * Visual Feedback:\n * - Selected cards: NHS blue border and shadow\n * - Focused cards: NHS yellow focus outline\n * - Card navigation mode: Dashed border with \"Navigation Mode\" badge\n * - Sort controls navigation mode: Focus outline on sort controls section\n * - Internal elements: Dotted borders with focus highlighting\n * \n * ARIA Compliance:\n * - Maintains full ARIA grid pattern with enhanced navigation\n * - aria-expanded indicates card navigation state\n * - Live regions announce navigation changes\n * - Comprehensive keyboard support following NHS design system\n */\n\nimport React, { useState, useEffect, useCallback, useRef, useReducer, useMemo } from 'react';\nimport { AriaTabsDataGrid } from '../SortableDataTable/AriaTabsDataGrid';\nimport { Card, type CardProps } from '../Card';\nimport { Select } from '../Select';\nimport { Button } from '../Button';\nimport { ResponsiveDataGridProps, LayoutMode, ViewportConfig } from './ResponsiveDataGridTypes';\nimport { GenericCardConfig, DomainPlugin } from './ResponsiveDataGridGeneric.types';\nimport { AriaTabsDataGridState, AriaTabsDataGridAction } from '../SortableDataTable/AriaTabsDataGridTypes';\nimport { SortConfig } from '../SortableDataTable/AriaDataGridTypes';\nimport { createGenericCard, defaultGenericCardConfig } from './GenericCardRenderer';\nimport { healthcarePlugin } from './HealthcarePlugin.tsx';\nimport { convertLegacyCardConfig, isHealthcareData } from './ResponsiveDataGridHelpers';\n\n// Advanced sorting component - only imported when enableAdvancedSorting is true\nimport { SortStatusControl } from '../SortableDataTable/SortStatusControl/SortStatusControl';\nimport './ResponsiveDataGrid.scss';\nimport './HealthcareCardTemplates.scss';\nimport '../Select/Select.scss';\nimport '../Button/Button.scss';\n\n/**\n * Navigation focus areas for hierarchical keyboard navigation in card view\n */\ntype CardFocusArea = 'tabs' | 'sort-controls' | 'cards' | 'card';\n\n/**\n * Card internal focusable elements\n */\ninterface CardElement {\n  id: string;\n  element: HTMLElement;\n  label: string;\n  type: 'button' | 'link' | 'input' | 'generic';\n}\n\n/**\n * Card navigation state for ARIA grid keyboard navigation with internal card navigation\n */\ninterface CardNavigationState {\n  focusArea: CardFocusArea;\n  focusedTabIndex: number;\n  focusedCardIndex: number;\n  selectedCardIndex: number;\n  isGridActive: boolean;\n  // Card-internal navigation state\n  focusedCardElementIndex: number;\n  cardElements: CardElement[];\n  isCardNavigationActive: boolean;\n  // 2D Grid navigation state\n  gridColumns: number;\n  gridRows: number;\n  // Card sorting state\n  cardSortConfig: SortConfig | null;\n  // Sort controls navigation state\n  focusedSortControlIndex: number;\n  isSortControlsActive: boolean;\n}\n\n/**\n * Tab state reducer (reused from AriaTabsDataGrid)\n */\nfunction tabsDataGridReducer(\n  state: AriaTabsDataGridState, \n  action: AriaTabsDataGridAction\n): AriaTabsDataGridState {\n  switch (action.type) {\n\tcase 'SET_SELECTED_INDEX':\n\t  return { ...state, selectedIndex: action.payload };\n\t\n\tcase 'SET_TAB_LOADING':\n\t  const newLoadingStates = [...state.tabLoadingStates];\n\t  newLoadingStates[action.payload.tabIndex] = action.payload.isLoading;\n\t  return { ...state, tabLoadingStates: newLoadingStates };\n\t\n\tcase 'SET_TAB_ERROR':\n\t  const newErrors = [...state.tabErrors];\n\t  newErrors[action.payload.tabIndex] = action.payload.error;\n\t  return { ...state, tabErrors: newErrors };\n\t\n\tcase 'SET_SORT':\n\t  return { ...state, sortConfig: action.payload };\n\t\n\tcase 'SET_SELECTED_ROWS':\n\t  const newSelectedRows = [...state.selectedRows];\n\t  newSelectedRows[action.payload.tabIndex] = action.payload.rowIndices;\n\t  return { ...state, selectedRows: newSelectedRows };\n\t\n\tcase 'SET_GLOBAL_SELECTED_ROW_DATA':\n\t  return { ...state, globalSelectedRowData: action.payload };\n\t\n\tcase 'SET_FILTERS':\n\t  return { ...state, filters: action.payload };\n\t\n\tcase 'ADJUST_ARRAYS':\n\t  const { newLength } = action.payload;\n\t  const adjustedLoadingStates = new Array(newLength).fill(false);\n\t  const adjustedErrors = new Array(newLength).fill(null);\n\t  const adjustedSelectedRows = new Array(newLength).fill([]);\n\t  \n\t  // Copy existing states up to the minimum length\n\t  for (let i = 0; i < Math.min(state.tabLoadingStates.length, newLength); i++) {\n\t\tadjustedLoadingStates[i] = state.tabLoadingStates[i];\n\t\tadjustedErrors[i] = state.tabErrors[i];\n\t\tadjustedSelectedRows[i] = state.selectedRows[i];\n\t  }\n\t  \n\t  return {\n\t\t...state,\n\t\ttabLoadingStates: adjustedLoadingStates,\n\t\ttabErrors: adjustedErrors,\n\t\tselectedRows: adjustedSelectedRows\n\t  };\n\t\n\tcase 'RESET_STATE':\n\t  return {\n\t\tselectedIndex: 0,\n\t\ttabLoadingStates: new Array(state.tabLoadingStates.length).fill(false),\n\t\ttabErrors: new Array(state.tabErrors.length).fill(null),\n\t\tsortConfig: [],\n\t\tselectedRows: new Array(state.selectedRows.length).fill([]),\n\t\tglobalSelectedRowData: null,\n\t\tfilters: undefined\n\t  };\n\t\n\tdefault:\n\t  return state;\n  }\n}\n\n/**\n * Hook for responsive layout detection\n */\nfunction useResponsiveLayout(breakpoints: ViewportConfig, forceLayout?: LayoutMode): LayoutMode {\n  const [layout, setLayout] = useState<LayoutMode>('cards');\n\n  useEffect(() => {\n\tif (forceLayout) {\n\t  setLayout(forceLayout);\n\t  return;\n\t}\n\n\tconst updateLayout = () => {\n\t  const width = window.innerWidth;\n\t  \n\t  if (width < breakpoints.mobile) {\n\t\tsetLayout('cards');\n\t  } else if (width < breakpoints.desktop) {\n\t\tsetLayout('hybrid');\n\t  } else {\n\t\tsetLayout('table');\n\t  }\n\t};\n\n\tupdateLayout();\n\twindow.addEventListener('resize', updateLayout);\n\treturn () => window.removeEventListener('resize', updateLayout);\n  }, [breakpoints, forceLayout]);\n\n  return layout;\n}\n\n/**\n * Detect the specific healthcare data type based on data properties\n */\nfunction detectHealthcareDataType(data: any): string | null {\n  if (!data || typeof data !== 'object') return null;\n  \n  // Check for appointment-specific fields\n  if (data.appointment_type || data.appointment_time || data.clinic) {\n    return 'appointment';\n  }\n  \n  // Check for medication-specific fields\n  if (data.medication_name || data.medication || data.dose || data.frequency) {\n    return 'medication';\n  }\n  \n  // Check for vitals-specific fields\n  if (data.ews_score !== undefined || data.respiratory_rate !== undefined || \n      data.spo2 !== undefined || data.temperature !== undefined || \n      data.systolic_bp !== undefined || data.heart_rate !== undefined) {\n    return 'vitals';\n  }\n  \n  // Check for patient-specific fields (most general, check last)\n  if (data.name || data.patient_name || data.nhs_number || data.ward || data.bed) {\n    return 'patient';\n  }\n  \n  return null;\n}\n\n/**\n * Generic card template selection based on data type and configuration\n * Now using configurable card creation with plugin support\n */\nfunction createCard<T = any>(\n  data: T, \n  columns: any[], \n  cardConfig: GenericCardConfig<T>, \n  domainPlugin?: DomainPlugin<T>\n): CardProps {\n  // Use domain plugin configuration if available\n  const effectiveConfig = domainPlugin ? \n    { ...domainPlugin.defaultCardConfig, ...cardConfig } : \n    { ...defaultGenericCardConfig, ...cardConfig };\n\n  // Check if domain plugin has specialized card templates\n  if (domainPlugin && domainPlugin.cardTemplates) {\n    const dataType = detectHealthcareDataType(data);\n    if (dataType && domainPlugin.cardTemplates[dataType]) {\n      const customCardContent = domainPlugin.cardTemplates[dataType](data, columns, effectiveConfig);\n      if (customCardContent) {\n        // Return a card with the custom content as children\n        return {\n          variant: 'default',\n          children: customCardContent\n        };\n      }\n    }\n  }\n\n  // Check if there's a custom card template\n  if (effectiveConfig.cardTemplate) {\n    const customCard = effectiveConfig.cardTemplate(data, columns, effectiveConfig);\n    if (customCard) {\n      // If custom template returns a React node, we need to handle it differently\n      // For now, fall back to generic card creation\n      return createGenericCard(data, columns, effectiveConfig);\n    }\n  }\n\n  // Use the generic card creation function\n  return createGenericCard(data, columns, effectiveConfig);\n}\n\n/**\n * Responsive Data Grid with mobile-first card layout - Now Generic with Plugin Support\n */\nexport const ResponsiveDataGrid: React.FC<ResponsiveDataGridProps> = ({\n  // Responsive-specific props\n  breakpoints = { mobile: 768, tablet: 1024, desktop: 1200 },\n  forceLayout,\n  cardConfig = {},\n  experimental = {},\n  enableAdvancedSorting = false,\n  topActions,\n  bottomActions,\n\tgridActions,\n\tforceGridActionsAbove,\n\t\thideTabsIfSingle,\n  \n  // Standard AriaTabsDataGrid props\n  tabPanels,\n  dataConfig,\n  selectedIndex: selectedIndexProp,\n  onTabChange,\n  ariaLabel = 'Data grid',\n  ariaDescription,\n  orientation = 'horizontal',\n  id,\n  disabled = false,\n  className,\n  ...props\n}) => {\n  const layout = useResponsiveLayout(breakpoints, forceLayout);\n\n  // Determine if component is controlled\n  const isControlled = selectedIndexProp !== undefined;\n  const selectedIndex = selectedIndexProp ?? 0;\n\n  // Convert legacy cardConfig to generic configuration with automatic healthcare detection\n  const genericCardConfig: GenericCardConfig = useMemo(() => {\n    // Auto-detect healthcare data\n    const hasHealthcareData = tabPanels.some(panel => \n      panel.data && panel.data.length > 0 && isHealthcareData(panel.data)\n    );\n    \n    if (hasHealthcareData) {\n      // Use healthcare plugin configuration as base\n      const legacyConverted = convertLegacyCardConfig(cardConfig);\n      return {\n        ...healthcarePlugin.defaultCardConfig,\n        ...legacyConverted\n      };\n    } else {\n      // Use generic configuration\n      return convertLegacyCardConfig(cardConfig);\n    }\n  }, [cardConfig, tabPanels]);\n\n  // Determine domain plugin based on data\n  const domainPlugin: DomainPlugin | undefined = useMemo(() => {\n    const hasHealthcareData = tabPanels.some(panel => \n      panel.data && panel.data.length > 0 && isHealthcareData(panel.data)\n    );\n    \n    return hasHealthcareData ? healthcarePlugin : undefined;\n  }, [tabPanels]);\n\n  // Initialize state with proper tab management\n  const initialState: AriaTabsDataGridState = useMemo(() => {\n\treturn {\n\t  selectedIndex,\n\t  tabLoadingStates: new Array(tabPanels.length).fill(false),\n\t  tabErrors: new Array(tabPanels.length).fill(null),\n\t  sortConfig: [],\n\t  selectedRows: new Array(tabPanels.length).fill([]),\n\t  globalSelectedRowData: null,\n\t  filters: undefined\n\t};\n  }, [selectedIndex, tabPanels.length]);\n\n  const [state, dispatch] = useReducer(tabsDataGridReducer, initialState);\n\n  // Tab refs for keyboard navigation\n  const tabRefs = useRef<(HTMLButtonElement | null)[]>([]);\n  \n  // Card refs for keyboard navigation in card view\n  const cardRefs = useRef<(HTMLDivElement | null)[]>([]);\n  \n  // Sort control refs for keyboard navigation\n  const sortControlRefs = useRef<(HTMLElement | null)[]>([]);\n  \n  // Container ref for 2D grid calculations\n  const cardsContainerRef = useRef<HTMLDivElement>(null);\n\n  // Card navigation state for ARIA grid keyboard navigation\n\t\tconst [cardNavState, setCardNavState] = useState<CardNavigationState>({\n\t\t\t// If tabs are hidden (single panel), default focus to sort-controls; otherwise start at tabs\n\t\t\tfocusArea: (hideTabsIfSingle && tabPanels.length === 1) ? 'sort-controls' : 'tabs',\n\tfocusedTabIndex: 0,\n\tfocusedCardIndex: 0,\n\tselectedCardIndex: -1,\n\tisGridActive: false,\n\tfocusedCardElementIndex: 0,\n\tcardElements: [],\n\tisCardNavigationActive: false,\n\tgridColumns: 1,\n\tgridRows: 1,\n\tcardSortConfig: null,\n\tfocusedSortControlIndex: 0,\n\tisSortControlsActive: false\n  });\n\n  // 2D Grid Navigation Utilities (moved before useEffects)\n\tconst calculateGridDimensions = useCallback((containerRef: React.RefObject<HTMLElement | null>) => {\n\tif (!containerRef.current) {\n\t  return { columns: 1, rows: 0 };\n\t}\n\n\tconst container = containerRef.current;\n\tconst cards = container.querySelectorAll('.aria-tabs-datagrid-adaptive__card-wrapper');\n\t\n\tif (cards.length === 0) {\n\t  return { columns: 1, rows: 0 };\n\t}\n\n\t// Get container width\n\tconst containerWidth = container.offsetWidth;\n\t\n\t// Get first card dimensions\n\tconst firstCard = cards[0] as HTMLElement;\n\tconst cardWidth = firstCard.offsetWidth;\n\t\n\t// Calculate columns based on card width and container width\n\tconst columns = Math.floor(containerWidth / cardWidth) || 1;\n\tconst rows = Math.ceil(cards.length / columns);\n\n\treturn { columns, rows };\n  }, []);\n\n  // Convert linear index to 2D grid coordinates\n  const indexToGrid = useCallback((index: number, columns: number) => {\n\treturn {\n\t  row: Math.floor(index / columns),\n\t  col: index % columns\n\t};\n  }, []);\n\n  // Convert 2D grid coordinates to linear index\n  const gridToIndex = useCallback((row: number, col: number, columns: number) => {\n\treturn row * columns + col;\n  }, []);\n\n  // Navigate in 2D grid with bounds checking\n  const navigate2D = useCallback((currentIndex: number, direction: 'up' | 'down' | 'left' | 'right', totalCards: number, columns: number) => {\n\tconst { row, col } = indexToGrid(currentIndex, columns);\n\tlet newRow = row;\n\tlet newCol = col;\n\t\n\tswitch (direction) {\n\t  case 'up':\n\t\tnewRow = Math.max(0, row - 1);\n\t\tbreak;\n\t  case 'down':\n\t\tnewRow = Math.min(Math.floor((totalCards - 1) / columns), row + 1);\n\t\tbreak;\n\t  case 'left':\n\t\tnewCol = Math.max(0, col - 1);\n\t\tbreak;\n\t  case 'right':\n\t\tnewCol = Math.min(columns - 1, col + 1);\n\t\tbreak;\n\t}\n\t\n\tconst newIndex = gridToIndex(newRow, newCol, columns);\n\t\n\t// Ensure the new index is within bounds and a valid card exists\n\treturn Math.min(newIndex, totalCards - 1);\n  }, [indexToGrid, gridToIndex]);\n\n  // Effect to handle focus when card navigation becomes active (following GanttChart pattern)\n  useEffect(() => {\n\tif (cardNavState.isCardNavigationActive && cardNavState.focusedCardElementIndex >= 0 && cardNavState.cardElements.length > 0) {\n\t  // Use a small timeout to ensure the DOM has updated\n\t  setTimeout(() => {\n\t\tconst currentElement = cardNavState.cardElements[cardNavState.focusedCardElementIndex];\n\t\tif (currentElement) {\n\t\t  currentElement.element.focus();\n\t\t  currentElement.element.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n\t\t}\n\t  }, 0);\n\t}\n  }, [cardNavState.isCardNavigationActive, cardNavState.focusedCardElementIndex, cardNavState.cardElements.length]);\n\n  // Effect to update grid dimensions when layout changes\n  useEffect(() => {\n\tconst updateGridDimensions = () => {\n\t  if (layout === 'cards' && cardsContainerRef.current) {\n\t\tconst { columns, rows } = calculateGridDimensions(cardsContainerRef);\n\t\tsetCardNavState(prev => ({\n\t\t  ...prev,\n\t\t  gridColumns: columns,\n\t\t  gridRows: rows\n\t\t}));\n\t  }\n\t};\n\n\t// Update dimensions after a delay to ensure DOM is ready\n\tconst timeoutId = setTimeout(updateGridDimensions, 200);\n\n\t// Update dimensions on window resize\n\tconst handleResize = () => {\n\t  setTimeout(updateGridDimensions, 100); // Debounce resize events\n\t};\n\n\twindow.addEventListener('resize', handleResize);\n\treturn () => {\n\t  clearTimeout(timeoutId);\n\t  window.removeEventListener('resize', handleResize);\n\t};\n  }, [layout, tabPanels, calculateGridDimensions]);\n\n  // Handle tabPanels length changes\n  useEffect(() => {\n\tconst currentLength = state.tabLoadingStates.length;\n\tconst newLength = tabPanels.length;\n\t\n\tif (currentLength !== newLength) {\n\t  dispatch({ type: 'ADJUST_ARRAYS', payload: { newLength } });\n\t}\n  }, [tabPanels.length, state.tabLoadingStates.length]);\n\n  // Controlled component support\n  useEffect(() => {\n\tif (isControlled && selectedIndexProp !== state.selectedIndex) {\n\t  dispatch({ type: 'SET_SELECTED_INDEX', payload: selectedIndexProp });\n\t}\n  }, [isControlled, selectedIndexProp, state.selectedIndex]);\n\n  // Handle tab selection with keyboard support\n  const handleTabSelect = useCallback((index: number) => {\n\tif (index >= 0 && index < tabPanels.length && !tabPanels[index].disabled) {\n\t  dispatch({ type: 'SET_SELECTED_INDEX', payload: index });\n\t  onTabChange?.(index);\n\t}\n  }, [tabPanels, onTabChange]);\n\n  // Handle card selection\n  const handleCardSelect = useCallback((data: any) => {\n\tconsole.log('Card selected:', data);\n\t// Update global selected row data to maintain consistency with desktop grid\n\tdispatch({\n\t  type: 'SET_GLOBAL_SELECTED_ROW_DATA',\n\t  payload: data\n\t});\n  }, []);\n\n  // Focus utilities for card navigation\n  const focusCard = useCallback((cardIndex: number) => {\n\tconst cardElement = cardRefs.current[cardIndex];\n\tif (cardElement) {\n\t  cardElement.focus();\n\t  // Ensure the focus is applied and visible\n\t  cardElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n\t}\n  }, []);\n\n  // Scan for focusable elements within a card\n  const scanCardElements = useCallback((cardIndex: number): CardElement[] => {\n\tconst cardElement = cardRefs.current[cardIndex];\n\tif (!cardElement) return [];\n\n\t// Query for focusable elements within the card\n\tconst focusableSelectors = [\n\t  'button:not([disabled]):not([aria-hidden=\"true\"])',\n\t  'a[href]:not([disabled]):not([aria-hidden=\"true\"])',\n\t  'input:not([disabled]):not([aria-hidden=\"true\"])',\n\t  'select:not([disabled]):not([aria-hidden=\"true\"])',\n\t  'textarea:not([disabled]):not([aria-hidden=\"true\"])',\n\t  '[tabindex]:not([tabindex=\"-1\"]):not([disabled]):not([aria-hidden=\"true\"])',\n\t  '.healthcare-card__detail[tabindex]:not([tabindex=\"-1\"])',\n\t  '.healthcare-card__action:not([disabled])',\n\t  '.tag:not([disabled])'\n\t].join(', ');\n\n\tconst elements = cardElement.querySelectorAll(focusableSelectors) as NodeListOf<HTMLElement>;\n\t\n\treturn Array.from(elements).map((element, index) => ({\n\t  id: element.id || `card-${cardIndex}-element-${index}`,\n\t  element,\n\t  label: element.getAttribute('aria-label') || \n\t\t\t element.textContent?.trim() || \n\t\t\t element.getAttribute('title') || \n\t\t\t `Element ${index + 1}`,\n\t  type: element.tagName.toLowerCase() === 'button' ? 'button' :\n\t\t\telement.tagName.toLowerCase() === 'a' ? 'link' :\n\t\t\t['input', 'select', 'textarea'].includes(element.tagName.toLowerCase()) ? 'input' :\n\t\t\t'generic'\n\t}));\n  }, []);\n\n  // Screen reader announcements container ref\n  const announcementsRef = useRef<HTMLDivElement>(null);\n\n  // Screen reader announcements\n  const announceToScreenReader = useCallback((message: string) => {\n\tconst container = announcementsRef.current;\n\tif (!container) return;\n\n\tconst announcement = document.createElement('div');\n\tannouncement.setAttribute('aria-live', 'polite');\n\tannouncement.setAttribute('aria-atomic', 'true');\n\tannouncement.className = 'sr-only';\n\tannouncement.textContent = message;\n\tcontainer.appendChild(announcement);\n\t\n\tsetTimeout(() => {\n\t  if (container.contains(announcement)) {\n\t\tcontainer.removeChild(announcement);\n\t  }\n\t}, 1000);\n  }, []);\n\n  // Card sorting utilities\n  const generateSortOptions = useCallback((columns: any[]) => {\n\tconst sortableColumns = columns.filter(col => col.sortable !== false);\n\tconst options: { value: string; label: string }[] = [\n\t  { value: '', label: 'Sort by...' }\n\t];\n\t\n\tsortableColumns.forEach(column => {\n\t  const baseLabel = column.label || column.key;\n\t  \n\t  // Add contextual sort labels based on data type\n\t  if (column.key === 'name') {\n\t\toptions.push(\n\t\t  { value: `${column.key}-asc`, label: `${baseLabel} (A-Z)` },\n\t\t  { value: `${column.key}-desc`, label: `${baseLabel} (Z-A)` }\n\t\t);\n\t  } else if (column.key === 'ews_score' || column.key.includes('score')) {\n\t\toptions.push(\n\t\t  { value: `${column.key}-desc`, label: `${baseLabel} (High-Low)` },\n\t\t  { value: `${column.key}-asc`, label: `${baseLabel} (Low-High)` }\n\t\t);\n\t  } else if (column.key === 'age' || column.key.includes('date') || column.key.includes('time')) {\n\t\toptions.push(\n\t\t  { value: `${column.key}-desc`, label: `${baseLabel} (Oldest-Youngest)` },\n\t\t  { value: `${column.key}-asc`, label: `${baseLabel} (Youngest-Oldest)` }\n\t\t);\n\t  } else {\n\t\toptions.push(\n\t\t  { value: `${column.key}-asc`, label: `${baseLabel} (A-Z)` },\n\t\t  { value: `${column.key}-desc`, label: `${baseLabel} (Z-A)` }\n\t\t);\n\t  }\n\t});\n\t\n\treturn options;\n  }, []);\n\n  const sortCardData = useCallback((data: any[], sortConfig: SortConfig | null) => {\n\tif (!sortConfig) return data;\n\t\n\treturn [...data].sort((a, b) => {\n\t  const aValue = a[sortConfig.key];\n\t  const bValue = b[sortConfig.key];\n\t  \n\t  // Handle null/undefined values\n\t  if (aValue == null && bValue == null) return 0;\n\t  if (aValue == null) return 1;\n\t  if (bValue == null) return -1;\n\t  \n\t  // Numeric comparison for numbers and strings that look like numbers\n\t  const aNum = Number(aValue);\n\t  const bNum = Number(bValue);\n\t  if (!isNaN(aNum) && !isNaN(bNum)) {\n\t\treturn sortConfig.direction === 'asc' ? aNum - bNum : bNum - aNum;\n\t  }\n\t  \n\t  // String comparison\n\t  const aStr = String(aValue).toLowerCase();\n\t  const bStr = String(bValue).toLowerCase();\n\t  const result = aStr.localeCompare(bStr);\n\t  \n\t  return sortConfig.direction === 'asc' ? result : -result;\n\t});\n  }, []);\n\n  const handleCardSort = useCallback((sortValue: string) => {\n\tif (!sortValue) {\n\t  setCardNavState(prev => ({ ...prev, cardSortConfig: null }));\n\t  announceToScreenReader('Card sorting cleared');\n\t  return;\n\t}\n\t\n\tconst [key, direction] = sortValue.split('-') as [string, 'asc' | 'desc'];\n\tconst newSortConfig: SortConfig = { key, direction };\n\t\n\tsetCardNavState(prev => ({ ...prev, cardSortConfig: newSortConfig }));\n\t\n\t// Announce the sort change\n\tconst currentPanel = tabPanels[state.selectedIndex];\n\tconst column = currentPanel?.columns.find(col => col.key === key);\n\tconst columnLabel = column?.label || key;\n\tconst directionLabel = direction === 'asc' ? 'ascending' : 'descending';\n\tannounceToScreenReader(`Cards sorted by ${columnLabel} in ${directionLabel} order`);\n  }, [tabPanels, state.selectedIndex, announceToScreenReader]);\n\n  const getSortLabel = useCallback((sortConfig: SortConfig) => {\n\tconst currentPanel = tabPanels[state.selectedIndex];\n\tconst column = currentPanel?.columns.find(col => col.key === sortConfig.key);\n\tconst columnLabel = column?.label || sortConfig.key;\n\tconst directionLabel = sortConfig.direction === 'asc' ? 'ascending' : 'descending';\n\treturn `${columnLabel} (${directionLabel})`;\n  }, [tabPanels, state.selectedIndex]);\n\n  // Combined sorting function for card data\n  const sortCardDataCombined = useCallback((data: any[]) => {\n    const currentPanel = tabPanels[state.selectedIndex];\n    \n    if (enableAdvancedSorting) {\n      // Use advanced sorting (multi-column from state.sortConfig)\n      const sortConfig = state.sortConfig;\n      if (!sortConfig || sortConfig.length === 0) return data;\n      \n      return [...data].sort((a: any, b: any) => {\n        // Apply each sort configuration in order\n        for (const { key, direction } of sortConfig) {\n          let aValue = a[key];\n          let bValue = b[key];\n\n          // Handle rendered values using enhanced renderers\n          const column = currentPanel?.columns.find((col: any) => col.key === key);\n          if (column?.cardRenderer) {\n            aValue = column.cardRenderer(a);\n            bValue = column.cardRenderer(b);\n          } else if (column?.render) {\n            aValue = column.render(a);\n            bValue = column.render(b);\n          }\n\n          // Handle null/undefined values\n          if (aValue == null && bValue == null) continue;\n          if (aValue == null) return direction === 'asc' ? -1 : 1;\n          if (bValue == null) return direction === 'asc' ? 1 : -1;\n\n          // Numeric comparison for numbers and strings that look like numbers\n          const aNum = Number(aValue);\n          const bNum = Number(bValue);\n          if (!isNaN(aNum) && !isNaN(bNum)) {\n            const result = aNum - bNum;\n            if (result !== 0) return direction === 'asc' ? result : -result;\n            continue;\n          }\n\n          // String comparison\n          const aStr = String(aValue).toLowerCase();\n          const bStr = String(bValue).toLowerCase();\n          const result = aStr.localeCompare(bStr);\n          if (result !== 0) return direction === 'asc' ? result : -result;\n        }\n        return 0;\n      });\n    } else {\n      // Use simple sorting (single column from cardNavState.cardSortConfig)\n      return sortCardData(data, cardNavState.cardSortConfig);\n    }\n  }, [enableAdvancedSorting, state.sortConfig, cardNavState.cardSortConfig, sortCardData, tabPanels, state.selectedIndex]);\n\n  // Focus specific element within a card (following GanttChart pattern)\n  const focusCardElement = useCallback((cardIndex: number, elementIndex: number) => {\n\tconst cardElements = scanCardElements(cardIndex);\n\tconst element = cardElements[elementIndex];\n\tif (element) {\n\t  // Focus will be handled by the useEffect to avoid conflicts\n\t  element.element.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n\t  \n\t  // Announce to screen readers\n\t  const announcement = `Focused on ${element.label}, ${element.type} ${elementIndex + 1} of ${cardElements.length} within card`;\n\t  announceToScreenReader(announcement);\n\t}\n  }, [scanCardElements, announceToScreenReader]);\n\n  const focusTab = useCallback((tabIndex: number) => {\n\ttabRefs.current[tabIndex]?.focus();\n  }, []);\n\n  // Get all available sort controls dynamically\n  const getAvailableSortControls = useCallback(() => {\n\tconst container = sortControlRefs.current[0];\n\tif (!container) return [];\n\t\n\t// Find all focusable elements within the sort controls container\n\tconst focusableSelectors = [\n\t  'select:not([disabled]):not([aria-hidden=\"true\"])',\n\t  'button:not([disabled]):not([aria-hidden=\"true\"])',\n\t  'input:not([disabled]):not([aria-hidden=\"true\"])',\n\t  '[tabindex]:not([tabindex=\"-1\"]):not([disabled]):not([aria-hidden=\"true\"])'\n\t].join(', ');\n\t\n\tconst focusableElements = container.querySelectorAll(focusableSelectors) as NodeListOf<HTMLElement>;\n\treturn Array.from(focusableElements);\n  }, []);\n\n  // Focus sort control element and handle sort controls navigation\n  const focusSortControl = useCallback((controlIndex: number) => {\n\tif (controlIndex === 0) {\n\t  // Focus the inner row (visual container) instead of the outer region wrapper\n\t  const outer = sortControlRefs.current[0];\n\t  const innerRow = outer?.querySelector('.sort-controls-row') as HTMLElement | null;\n\t  if (innerRow) {\n\t\tinnerRow.setAttribute('tabindex', '-1'); // make programmatically focusable without altering sequential order\n\t\tinnerRow.focus();\n\t\tconst availableControls = getAvailableSortControls();\n\t\tconst announcement = `Sort controls group with ${availableControls.length} interactive elements. Press Enter or Space to begin navigating controls.`;\n\t\tannounceToScreenReader(announcement);\n\t  } else if (outer) {\n\t\touter.focus(); // fallback\n\t  }\n\t} else {\n\t  // For individual controls, focus them directly by querying the DOM\n\t  const availableControls = getAvailableSortControls();\n\t  const adjustedIndex = controlIndex - 1; // Subtract 1 because index 0 is the group\n\t  const formControl = availableControls[adjustedIndex];\n\t  if (formControl) {\n\t\tformControl.focus();\n\t\tconst isSelect = formControl.tagName.toLowerCase() === 'select';\n\t\tconst isButton = formControl.tagName.toLowerCase() === 'button';\n\t\tconst elementType = isSelect ? 'dropdown' : isButton ? 'button' : 'control';\n\t\tconst keyboardHint = isSelect ? '. Use Space key to open dropdown' : '';\n\t\tconst announcement = `${elementType} ${adjustedIndex + 1} of ${availableControls.length}${keyboardHint}`;\n\t\tannounceToScreenReader(announcement);\n\t  }\n\t}\n  }, [getAvailableSortControls, announceToScreenReader]);  // Enhanced card keyboard navigation handlers following GanttChart pattern\n  const handleCardKeyDown = useCallback((event: React.KeyboardEvent, cardIndex: number) => {\n\tconst { key } = event;\n\tconst currentPanel = tabPanels[state.selectedIndex];\n\tconst cardCount = currentPanel?.data.length || 0;\n\n\t// Handle scrolling first (like GanttChart)\n\tif (key === 'ArrowLeft' && event.shiftKey) {\n\t  event.preventDefault();\n\t  event.currentTarget.scrollBy({ left: -30, behavior: 'smooth' });\n\t  return;\n\t} else if (key === 'ArrowRight' && event.shiftKey) {\n\t  event.preventDefault();\n\t  event.currentTarget.scrollBy({ left: 30, behavior: 'smooth' });\n\t  return;\n\t}\n\n\t// If card is not active, handle grid navigation (like GanttChart timeline container)\n\tif (!cardNavState.isCardNavigationActive) {\n\t  switch (key) {\n\t\tcase 'ArrowUp':\n\t\t  event.preventDefault();\n\t\t  if (cardIndex === 0) {\n\t\t\t// Move up into sort-controls (group) instead of jumping to tabs\n\t\t\tsetCardNavState(prev => ({ ...prev, focusArea: 'sort-controls', focusedSortControlIndex: 0, isSortControlsActive: false }));\n\t\t\tfocusSortControl(0);\n\t\t  } else {\n\t\t\tconst newCardIndex = navigate2D(cardIndex, 'up', cardCount, cardNavState.gridColumns);\n\t\t\tif (newCardIndex !== cardIndex) {\n\t\t\t  setCardNavState(prev => ({ ...prev, focusedCardIndex: newCardIndex }));\n\t\t\t  focusCard(newCardIndex);\n\t\t\t  announceToScreenReader(`Moved to card ${newCardIndex + 1} of ${cardCount}`);\n\t\t\t}\n\t\t  }\n\t\t  break;\n\t\tcase 'ArrowDown':\n\t\t  event.preventDefault();\n\t\t  // Use 2D navigation for down movement\n\t\t  const newDownCardIndex = navigate2D(cardIndex, 'down', cardCount, cardNavState.gridColumns);\n\t\t  if (newDownCardIndex !== cardIndex) {\n\t\t\tsetCardNavState(prev => ({ ...prev, focusedCardIndex: newDownCardIndex }));\n\t\t\tfocusCard(newDownCardIndex);\n\t\t\tannounceToScreenReader(`Moved to card ${newDownCardIndex + 1} of ${cardCount}`);\n\t\t  }\n\t\t  break;\n\t\tcase 'ArrowLeft':\n\t\t  event.preventDefault();\n\t\t  // Use 2D navigation for left movement\n\t\t  const newLeftCardIndex = navigate2D(cardIndex, 'left', cardCount, cardNavState.gridColumns);\n\t\t  if (newLeftCardIndex !== cardIndex) {\n\t\t\tsetCardNavState(prev => ({ ...prev, focusedCardIndex: newLeftCardIndex }));\n\t\t\tfocusCard(newLeftCardIndex);\n\t\t\tannounceToScreenReader(`Moved to card ${newLeftCardIndex + 1} of ${cardCount}`);\n\t\t  } else {\n\t\t\t// If at leftmost card, navigate to previous tab\n\t\t\tif (state.selectedIndex > 0) {\n\t\t\t  dispatch({ type: 'SET_SELECTED_INDEX', payload: state.selectedIndex - 1 });\n\t\t\t  setCardNavState(prev => ({ ...prev, focusArea: 'tabs' }));\n\t\t\t  setTimeout(() => focusTab(state.selectedIndex - 1), 0);\n\t\t\t}\n\t\t  }\n\t\t  break;\n\t\tcase 'ArrowRight':\n\t\t  event.preventDefault();\n\t\t  // Use 2D navigation for right movement\n\t\t  const newRightCardIndex = navigate2D(cardIndex, 'right', cardCount, cardNavState.gridColumns);\n\t\t  if (newRightCardIndex !== cardIndex) {\n\t\t\tsetCardNavState(prev => ({ ...prev, focusedCardIndex: newRightCardIndex }));\n\t\t\tfocusCard(newRightCardIndex);\n\t\t\tannounceToScreenReader(`Moved to card ${newRightCardIndex + 1} of ${cardCount}`);\n\t\t  } else {\n\t\t\t// If at rightmost card, navigate to next tab\n\t\t\tif (state.selectedIndex < tabPanels.length - 1) {\n\t\t\t  dispatch({ type: 'SET_SELECTED_INDEX', payload: state.selectedIndex + 1 });\n\t\t\t  setCardNavState(prev => ({ ...prev, focusArea: 'tabs' }));\n\t\t\t  setTimeout(() => focusTab(state.selectedIndex + 1), 0);\n\t\t\t}\n\t\t  }\n\t\t  break;\n\t\t  break;\n\t\tcase 'Enter':\n\t\t  if (currentPanel?.data[cardIndex]) {\n\t\t\tevent.preventDefault();\n\t\t\t\t // Mark card as selected when entering it (always)\n\t\t\t\t setCardNavState(prev => ({\n\t\t\t\t   ...prev,\n\t\t\t\t   selectedCardIndex: cardIndex\n\t\t\t\t }));\n\t\t\t\n\t\t\t// Scan for focusable elements and activate card navigation\n\t\t\tconst cardElements = scanCardElements(cardIndex);\n\t\t\tif (cardElements.length > 0) {\n\t\t\t  setCardNavState(prev => ({\n\t\t\t\t...prev,\n\t\t\t\tfocusArea: 'card',\n\t\t\t\tisCardNavigationActive: true,\n\t\t\t\tfocusedCardElementIndex: 0,\n\t\t\t\tcardElements,\n\t\t\t\tselectedCardIndex: cardIndex // Ensure selection is maintained\n\t\t\t  }));\n\t\t\t  announceToScreenReader(`Card ${cardIndex + 1} selected and navigation activated. ${cardElements.length} interactive elements available. Use arrow keys to navigate, Enter to activate, Escape to exit.`);\n\t\t\t  // Focus will be handled by useEffect\n\t\t\t} else {\n\t\t\t  // If no internal elements, just select the card\n\t\t\t  announceToScreenReader(`Card ${cardIndex + 1} selected.`);\n\t\t\t}\n\t\t  }\n\t\t  break;\n\t\tcase ' ':\n\t\t  if (currentPanel?.data[cardIndex]) {\n\t\t\tevent.preventDefault();\n\t\t\t// Toggle card selection (traditional behavior)\n\t\t\tsetCardNavState(prev => ({\n\t\t\t  ...prev,\n\t\t\t  selectedCardIndex: prev.selectedCardIndex === cardIndex ? -1 : cardIndex\n\t\t\t}));\n\t\t\tconst isSelected = cardNavState.selectedCardIndex === cardIndex;\n\t\t\tannounceToScreenReader(`Card ${cardIndex + 1} ${isSelected ? 'deselected' : 'selected'}.`);\n\t\t  }\n\t\t  break;\n\t  }\n\t  return;\n\t}\n\n\t// Card is active - handle card-internal navigation (like GanttChart task navigation)\n\tswitch (key) {\n\t  case 'ArrowUp':\n\t  case 'ArrowLeft':\n\t\tevent.preventDefault();\n\t\tconst newLeftIndex = Math.max(0, cardNavState.focusedCardElementIndex - 1);\n\t\tsetCardNavState(prev => ({ ...prev, focusedCardElementIndex: newLeftIndex }));\n\t\tfocusCardElement(cardIndex, newLeftIndex);\n\t\tbreak;\n\t  case 'ArrowDown':\n\t  case 'ArrowRight':\n\t\tevent.preventDefault();\n\t\tconst newRightIndex = Math.min(cardNavState.cardElements.length - 1, cardNavState.focusedCardElementIndex + 1);\n\t\tsetCardNavState(prev => ({ ...prev, focusedCardElementIndex: newRightIndex }));\n\t\tfocusCardElement(cardIndex, newRightIndex);\n\t\tbreak;\n\t  case 'Enter':\n\t\tevent.preventDefault();\n\t\tconst currentElement = cardNavState.cardElements[cardNavState.focusedCardElementIndex];\n\t\tif (currentElement) {\n\t\t  currentElement.element.click();\n\t\t  announceToScreenReader(`Activated ${currentElement.label}`);\n\t\t}\n\t\tbreak;\n\t  case ' ':\n\t\tevent.preventDefault();\n\t\tconst currentSpaceElement = cardNavState.cardElements[cardNavState.focusedCardElementIndex];\n\t\tif (currentSpaceElement) {\n\t\t  // Simulate double-click for space (like GanttChart)\n\t\t  const event = new MouseEvent('dblclick', { bubbles: true });\n\t\t  currentSpaceElement.element.dispatchEvent(event);\n\t\t  announceToScreenReader(`Double-clicked ${currentSpaceElement.label}`);\n\t\t}\n\t\tbreak;\n\t  case 'Escape':\n\t\tevent.preventDefault();\n\t\tsetCardNavState(prev => ({\n\t\t  ...prev,\n\t\t  focusArea: 'cards',\n\t\t  isCardNavigationActive: false,\n\t\t  focusedCardElementIndex: 0,\n\t\t  cardElements: []\n\t\t}));\n\t\t// Return focus to the card container\n\t\tsetTimeout(() => focusCard(cardIndex), 0);\n\t\tannounceToScreenReader('Exited card navigation, returned to card level');\n\t\tbreak;\n\t  case 'Home':\n\t\tevent.preventDefault();\n\t\tif (cardNavState.cardElements.length > 0) {\n\t\t  setCardNavState(prev => ({ ...prev, focusedCardElementIndex: 0 }));\n\t\t  focusCardElement(cardIndex, 0);\n\t\t}\n\t\tbreak;\n\t  case 'End':\n\t\tevent.preventDefault();\n\t\tif (cardNavState.cardElements.length > 0) {\n\t\t  const lastIndex = cardNavState.cardElements.length - 1;\n\t\t  setCardNavState(prev => ({ ...prev, focusedCardElementIndex: lastIndex }));\n\t\t  focusCardElement(cardIndex, lastIndex);\n\t\t}\n\t\tbreak;\n\t}\n  }, [cardNavState, state.selectedIndex, tabPanels, handleCardSelect, focusCard, focusTab, setCardNavState, scanCardElements, focusCardElement, announceToScreenReader]);\n\n  // Scroll tab into view for mobile card layout\n  const scrollTabIntoViewMobile = useCallback((index: number) => {\n\tconst tab = tabRefs.current[index];\n\tconst tabsContainer = tab?.parentElement;\n\t\n\tif (!tab || !tabsContainer) {\n\t  console.log('Tab or container not found for mobile scroll');\n\t  return;\n\t}\n\n\t// Check if tab is already visible\n\tconst tabRect = tab.getBoundingClientRect();\n\tconst containerRect = tabsContainer.getBoundingClientRect();\n\t\n\tconst isVisible = tabRect.left >= containerRect.left && tabRect.right <= containerRect.right;\n\t\n\tif (!isVisible) {\n\t  console.log('Tab not visible, scrolling into view (mobile)');\n\t  // Use scroll into view for horizontal scrolling\n\t  tab.scrollIntoView({\n\t\tbehavior: 'smooth',\n\t\tblock: 'nearest',\n\t\tinline: 'center'\n\t  });\n\t}\n  }, []);\n\n  // Enhanced tab keyboard navigation that handles card navigation\n  const handleTabKeyDownWithCards = useCallback((event: React.KeyboardEvent, index: number) => {\n\t// Only handle navigation for card layout - let AriaTabsDataGrid handle table/hybrid layouts\n\tif (layout !== 'cards') {\n\t  return; // Let the event bubble up to AriaTabsDataGrid\n\t}\n\n\tconst { key } = event;\n\t\n\tswitch (key) {\n\t  case 'ArrowLeft':\n\t\tevent.preventDefault();\n\t\tconst prevIndex = index > 0 ? index - 1 : tabPanels.length - 1;\n\t\thandleTabSelect(prevIndex);\n\t\tsetCardNavState(prev => ({ ...prev, focusedTabIndex: prevIndex }));\n\t\ttabRefs.current[prevIndex]?.focus();\n\t\tscrollTabIntoViewMobile(prevIndex);\n\t\tbreak;\n\t  \n\t  case 'ArrowRight':\n\t\tevent.preventDefault();\n\t\tconst nextIndex = index < tabPanels.length - 1 ? index + 1 : 0;\n\t\thandleTabSelect(nextIndex);\n\t\tsetCardNavState(prev => ({ ...prev, focusedTabIndex: nextIndex }));\n\t\ttabRefs.current[nextIndex]?.focus();\n\t\tscrollTabIntoViewMobile(nextIndex);\n\t\tbreak;\n\n\t  case 'ArrowDown':\n\t\tevent.preventDefault();\n\t\t// Navigate to sort controls first if they exist, otherwise go to cards\n\t\tconst currentPanel = tabPanels[state.selectedIndex];\n\t\tif (currentPanel && currentPanel.columns && currentPanel.columns.length > 0) {\n\t\t  // Navigate to sort controls\n\t\t  setCardNavState(prev => ({ \n\t\t\t...prev, \n\t\t\tfocusArea: 'sort-controls',\n\t\t\tfocusedSortControlIndex: 0\n\t\t  }));\n\t\t  focusSortControl(0);\n\t\t} else {\n\t\t  // Navigate directly to cards if no sort controls\n\t\t  setCardNavState(prev => ({ \n\t\t\t...prev, \n\t\t\tfocusArea: 'cards',\n\t\t\tfocusedCardIndex: 0\n\t\t  }));\n\t\t  focusCard(0);\n\t\t}\n\t\tbreak;\n\t  \n\t  case 'Home':\n\t\tevent.preventDefault();\n\t\thandleTabSelect(0);\n\t\tsetCardNavState(prev => ({ ...prev, focusedTabIndex: 0 }));\n\t\ttabRefs.current[0]?.focus();\n\t\tscrollTabIntoViewMobile(0);\n\t\tbreak;\n\t  \n\t  case 'End':\n\t\tevent.preventDefault();\n\t\tconst lastIndex = tabPanels.length - 1;\n\t\thandleTabSelect(lastIndex);\n\t\tsetCardNavState(prev => ({ ...prev, focusedTabIndex: lastIndex }));\n\t\ttabRefs.current[lastIndex]?.focus();\n\t\tscrollTabIntoViewMobile(lastIndex);\n\t\tbreak;\n\t  \n\t  case 'Enter':\n\t  case ' ':\n\t\tevent.preventDefault();\n\t\thandleTabSelect(index);\n\t\tbreak;\n\t}\n  }, [tabPanels.length, handleTabSelect, layout, focusCard, setCardNavState, scrollTabIntoViewMobile]);\n\n  // Sort controls keyboard navigation\n  const handleSortControlKeyDown = useCallback((event: React.KeyboardEvent, controlIndex: number) => {\n\t// Only handle navigation for card layout\n\tif (layout !== 'cards') {\n\t  return;\n\t}\n\n\tconst { key } = event;\n\tconst currentPanel = tabPanels[state.selectedIndex];\n\t\n\t// Handle container (index 0) vs individual controls (indices 1, 2)\n\tif (controlIndex === 0 && !cardNavState.isSortControlsActive) {\n\t  // Container level navigation - only handle Enter/Space to enter navigation mode\n\t  switch (key) {\n\t\tcase 'ArrowUp':\n\t\t  event.preventDefault();\n\t\t  // Navigate back to tabs\n\t\t  setCardNavState(prev => ({ \n\t\t\t...prev, \n\t\t\tfocusArea: 'tabs',\n\t\t\tisSortControlsActive: false\n\t\t  }));\n\t\t  focusTab(state.selectedIndex);\n\t\t  break;\n\n\t\tcase 'ArrowDown':\n\t\t  event.preventDefault();\n\t\t  // Navigate to first card in card view\n\t\t  if (currentPanel?.data && currentPanel.data.length > 0) {\n\t\t\tsetCardNavState(prev => ({ \n\t\t\t  ...prev, \n\t\t\t  focusArea: 'cards',\n\t\t\t  focusedCardIndex: 0,\n\t\t\t  isSortControlsActive: false\n\t\t\t}));\n\t\t\tfocusCard(0);\n\t\t  }\n\t\t  break;\n\n\t\tcase 'Enter':\n\t\tcase ' ':\n\t\t  event.preventDefault();\n\t\t  // Enter sort controls navigation mode\n\t\t  const availableControls = getAvailableSortControls();\n\t\t  if (availableControls.length > 0) {\n\t\t\tsetCardNavState(prev => ({ \n\t\t\t  ...prev, \n\t\t\t  isSortControlsActive: true,\n\t\t\t  focusedSortControlIndex: 1 // Start with the first actual control (skip container)\n\t\t\t}));\n\t\t\tfocusSortControl(1);\n\t\t\tconst announcement = `Entered sort controls navigation mode. ${availableControls.length} controls available. Use arrow keys to navigate between controls.`;\n\t\t\tannounceToScreenReader(announcement);\n\t\t  }\n\t\t  break;\n\n\t\tcase 'Escape':\n\t\t  event.preventDefault();\n\t\t  // Exit to tabs\n\t\t  setCardNavState(prev => ({ \n\t\t\t...prev, \n\t\t\tisSortControlsActive: false,\n\t\t\tfocusArea: 'tabs'\n\t\t  }));\n\t\t  focusTab(state.selectedIndex);\n\t\t  break;\n\t  }\n\t  return;\n\t}\n\t\n\t// Individual control navigation (when isSortControlsActive is true)\n\tif (cardNavState.isSortControlsActive) {\n\t  // Get available sort control elements dynamically\n\t  const availableControls = getAvailableSortControls();\n\t  const controlCount = availableControls.length;\n\t  \n\t  switch (key) {\n\t\tcase 'ArrowLeft':\n\t\t  event.preventDefault();\n\t\t  const prevControlIndex = cardNavState.focusedSortControlIndex > 1 ? \n\t\t\tcardNavState.focusedSortControlIndex - 1 : \n\t\t\tcontrolCount; // Wrap to last control\n\t\t  setCardNavState(prev => ({ ...prev, focusedSortControlIndex: prevControlIndex }));\n\t\t  focusSortControl(prevControlIndex);\n\t\t  break;\n\t\t\n\t\tcase 'ArrowRight':\n\t\t  event.preventDefault();\n\t\t  const nextControlIndex = cardNavState.focusedSortControlIndex < controlCount ? \n\t\t\tcardNavState.focusedSortControlIndex + 1 : \n\t\t\t1; // Wrap to first control (skip container 0)\n\t\t  setCardNavState(prev => ({ ...prev, focusedSortControlIndex: nextControlIndex }));\n\t\t  focusSortControl(nextControlIndex);\n\t\t  break;\n\n\t\tcase 'ArrowDown':\n\t\t  event.preventDefault();\n\t\t  // Check if we're already in sort controls navigation mode\n\t\t  if (cardNavState.isSortControlsActive) {\n\t\t\t// Move to next control within sort controls\n\t\t\tconst nextControlIndexDown = cardNavState.focusedSortControlIndex < controlCount ? \n\t\t\t  cardNavState.focusedSortControlIndex + 1 : \n\t\t\t  1; // Wrap to first control (skip container 0)\n\t\t\tsetCardNavState(prev => ({ ...prev, focusedSortControlIndex: nextControlIndexDown }));\n\t\t\tfocusSortControl(nextControlIndexDown);\n\t\t  } else {\n\t\t\t// Navigate to first card in card view\n\t\t\tif (currentPanel?.data && currentPanel.data.length > 0) {\n\t\t\t  setCardNavState(prev => ({ \n\t\t\t\t...prev, \n\t\t\t\tfocusArea: 'cards',\n\t\t\t\tfocusedCardIndex: 0,\n\t\t\t\tisSortControlsActive: false\n\t\t\t  }));\n\t\t\t  focusCard(0);\n\t\t\t}\n\t\t  }\n\t\t  break;\n\n\t\tcase 'ArrowUp':\n\t\t  event.preventDefault();\n\t\t  // Exit to container level\n\t\t  setCardNavState(prev => ({ \n\t\t\t...prev, \n\t\t\tisSortControlsActive: false,\n\t\t\tfocusArea: 'sort-controls'\n\t\t  }));\n\t\t  focusSortControl(0);\n\t\t  break;\n\n\t\tcase 'Escape':\n\t\t  event.preventDefault();\n\t\t  // Exit navigation mode but keep focus within sort-controls group (container)\n\t\t  setCardNavState(prev => ({ \n\t\t\t...prev, \n\t\t\tisSortControlsActive: false,\n\t\t\tfocusArea: 'sort-controls',\n\t\t\tfocusedSortControlIndex: 0\n\t\t  }));\n\t\t  focusSortControl(0);\n\t\t  break;\n\t  }\n\t}\n  }, [layout, tabPanels, state.selectedIndex, cardNavState.isSortControlsActive, cardNavState.focusedSortControlIndex, focusSortControl, focusTab, focusCard, setCardNavState, announceToScreenReader]);\n\n  // Mobile-first card implementation\n  if (layout === 'cards') {\n\t\tconst tabsHidden = !!hideTabsIfSingle && tabPanels.length === 1;\n\t\tconst currentPanel = tabsHidden ? tabPanels[0] : tabPanels[state.selectedIndex];\n\t\n\treturn (\n\t  <div className={`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--cards ${className || ''}`}>\n\t\t\t\t{/* Header container with tabs and optional top actions */}\n\t\t<div className=\"aria-tabs-datagrid-adaptive__header\">\n\t\t\t\t\t{/* Tab navigation with proper ARIA implementation (hidden when a single panel and hideTabsIfSingle) */}\n\t\t\t\t\t{!tabsHidden && (\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\trole=\"tablist\"\n\t\t\t\t\t\t\taria-label={ariaLabel}\n\t\t\t\t\t\t\taria-describedby={`${ariaDescription || ''} ${id ? `${id}-navigation-help` : ''}`.trim()}\n\t\t\t\t\t\t\taria-orientation={orientation}\n\t\t\t\t\t\t\tclassName=\"aria-tabs-datagrid__tabs\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{tabPanels.map((panel, index) => {\n\t\t\t\t\t\t\t\tconst isSelected = index === state.selectedIndex;\n\t\t\t\t\t\t\t\tconst isDisabled = panel.disabled || disabled;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tkey={panel.id}\n\t\t\t\t\t\t\t\t\t\trole=\"tab\"\n\t\t\t\t\t\t\t\t\t\tid={`tab-${panel.id}`}\n\t\t\t\t\t\t\t\t\t\taria-controls={`panel-${panel.id}`}\n\t\t\t\t\t\t\t\t\t\taria-selected={isSelected}\n\t\t\t\t\t\t\t\t\t\taria-disabled={isDisabled}\n\t\t\t\t\t\t\t\t\t\ttabIndex={isSelected ? 0 : -1}\n\t\t\t\t\t\t\t\t\t\tref={el => { tabRefs.current[index] = el; }}\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabSelect(index)}\n\t\t\t\t\t\t\t\t\t\tonKeyDown={(event) => handleTabKeyDownWithCards(event, index)}\n\t\t\t\t\t\t\t\t\t\tdisabled={isDisabled}\n\t\t\t\t\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t\t\t\t\t'aria-tabs-datagrid__tab',\n\t\t\t\t\t\t\t\t\t\t\tisSelected ? 'aria-tabs-datagrid__tab--selected' : '',\n\t\t\t\t\t\t\t\t\t\t\tisDisabled ? 'aria-tabs-datagrid__tab--disabled' : ''\n\t\t\t\t\t\t\t\t\t\t].filter(Boolean).join(' ')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span className=\"aria-tabs-datagrid__tab-label\">{panel.label}</span>\n\t\t\t\t\t\t\t\t\t\t{state.tabLoadingStates[index] && (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"aria-tabs-datagrid__tab-loading\" aria-hidden=\"true\">\u23F3</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{state.tabErrors[index] && (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"aria-tabs-datagrid__tab-error\" aria-hidden=\"true\">\u26A0\uFE0F</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t  {/* Top actions area */}\n\t\t  {topActions && (\n\t\t\t<div className=\"aria-tabs-datagrid-adaptive__top-actions\">\n\t\t\t  {topActions}\n\t\t\t</div>\n\t\t  )}\n\t\t</div>\n\n\t\t{/* Conditional Sort Controls: Advanced vs Simple */}\n\t\t{currentPanel && currentPanel.columns && (\n\t\t  <>\n\t\t\t{ enableAdvancedSorting ? (\n\t\t\t  /* Advanced sorting with SortStatusControl */\n\t\t\t  <SortStatusControl\n\t\t\t\tsortConfig={state.sortConfig || []}\n\t\t\t\tcolumns={currentPanel.columns.map(col => ({ key: col.key, label: col.label }))}\n\t\t\t\tonSortChange={(newSortConfig) => {\n\t\t\t\t  dispatch({ type: 'SET_SORT', payload: newSortConfig });\n\t\t\t\t}}\n\t\t\t\tariaLabel=\"Card view sort configuration\"\n\t\t\t\tclassName=\"aria-tabs-datagrid-adaptive__advanced-sort-controls\"\n\t\t\t  />\n\t\t\t) : (\n\t\t\t  /* Simple card sorting */\n\t\t\t  <div \n\t\t\t\tclassName=\"aria-tabs-datagrid-adaptive__sort-controls\"\n\t\t\t\trole=\"region\"\n\t\t\t\taria-label=\"Sort controls\"\n\t\t\t\ttabIndex={cardNavState.focusArea === 'sort-controls' ? 0 : -1}\n\t\t\t\tref={el => { sortControlRefs.current[0] = el; }}\n\t\t\t\tonKeyDown={(event) => handleSortControlKeyDown(event, 0)}\n\t\t\t  >\n\t\t\t\t<div className=\"sort-controls-row\">\n\t\t\t\t  <div className=\"sort-select-container\">\n\t\t\t\t\t<label htmlFor={`card-sort-${currentPanel.id}`} className=\"sort-label\">\n\t\t\t\t\t  Sort cards by\n\t\t\t\t\t</label>\n\t\t\t\t\t<Select\n\t\t\t\t\t  id={`card-sort-${currentPanel.id}`}\n\t\t\t\t\t  name={`card-sort-${currentPanel.id}`}\n\t\t\t\t\t  value={cardNavState.cardSortConfig ? `${cardNavState.cardSortConfig.key}-${cardNavState.cardSortConfig.direction}` : ''}\n\t\t\t\t\t  onChange={(e) => handleCardSort(e.target.value)}\n\t\t\t\t\t  className=\"sort-select\"\n\t\t\t\t\t>\n\t\t\t\t\t  {generateSortOptions(currentPanel.columns).map(option => (\n\t\t\t\t\t\t<option key={option.value} value={option.value}>\n\t\t\t\t\t\t  {option.label}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t  ))}\n\t\t\t\t\t</Select>\n\t\t\t\t  </div>\n\t\t\t\t  \n\t\t\t\t  {cardNavState.cardSortConfig && (\n\t\t\t\t\t<div className=\"sort-indicator\" role=\"status\" aria-live=\"polite\">\n\t\t\t\t\t  <span className=\"sort-indicator-text\">\n\t\t\t\t\t\tSorted by {getSortLabel(cardNavState.cardSortConfig)}\n\t\t\t\t\t  </span>\n\t\t\t\t\t  <Button\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tonClick={() => handleCardSort('')}\n\t\t\t\t\t\taria-label=\"Clear card sorting\"\n\t\t\t\t\t\tclassName=\"sort-clear-button\"\n\t\t\t\t\t  >\n\t\t\t\t\t\tClear\n\t\t\t\t\t  </Button>\n\t\t\t\t\t</div>\n\t\t\t\t  )}\n\t\t\t\t</div>\n\t\t\t  </div>\n\t\t\t)}\n\t\t  </>\n\t\t)}\n\n\t\t{/* Card-based data presentation with ARIA grid navigation */}\n\t\t<div \n\t\t  ref={cardsContainerRef}\n\t\t  className=\"aria-tabs-datagrid-adaptive__cards\" \n\t\t  role=\"grid\"\n\t\t  aria-label={`${currentPanel?.label || 'Data'} cards in ${cardNavState.gridRows} rows and ${cardNavState.gridColumns} columns`}\n\t\t  aria-rowcount={cardNavState.gridRows}\n\t\t  aria-colcount={cardNavState.gridColumns}\n\t\t  id={`panel-${currentPanel?.id}`}\n\t\t  aria-labelledby={`tab-${currentPanel?.id}`}\n\t\t>\n\t\t  { sortCardDataCombined(currentPanel?.data || []).map((row, index) => {\n\t\t\tconst isSelected = cardNavState.selectedCardIndex === index;\n\t\t\tconst isFocused = cardNavState.focusedCardIndex === index && cardNavState.focusArea === 'cards';\n\t\t\tconst isInCardNavigation = cardNavState.focusedCardIndex === index && cardNavState.focusArea === 'card' && cardNavState.isCardNavigationActive;\n\t\t\t// Ensure first card is focusable if no card is currently focused\n\t\t\tconst isFirstCardFocusable = index === 0 && cardNavState.focusArea !== 'cards';\n\t\t\tconst shouldBeFocusable = isFocused || isFirstCardFocusable;\n\t\t\t\n\t\t\t// Calculate 2D grid position for ARIA\n\t\t\tconst gridPosition = indexToGrid(index, cardNavState.gridColumns);\n\t\t\t\n\t\t\t// If custom card template is provided, use it\n\t\t\tif (cardConfig.cardTemplate) {\n\t\t\t  const customCard = cardConfig.cardTemplate(row, currentPanel.columns);\n\t\t\t  return (\n\t\t\t\t<div\n\t\t\t\t  key={`card-${index}`}\n\t\t\t\t  role=\"row\"\n\t\t\t\t  aria-rowindex={gridPosition.row + 1}\n\t\t\t\t  className=\"aria-tabs-datagrid-adaptive__row\"\n\t\t\t\t>\n\t\t\t\t  <div\n\t\t\t\t\tref={el => { cardRefs.current[index] = el; }}\n\t\t\t\t\tclassName={[\n\t\t\t\t\t  'aria-tabs-datagrid-adaptive__card-wrapper',\n\t\t\t\t\t  isSelected ? 'aria-tabs-datagrid-adaptive__card-wrapper--selected' : '',\n\t\t\t\t\t  isFocused ? 'aria-tabs-datagrid-adaptive__card-wrapper--focused' : '',\n\t\t\t\t\t  isInCardNavigation ? 'aria-tabs-datagrid-adaptive__card-wrapper--card-navigation' : ''\n\t\t\t\t\t].filter(Boolean).join(' ')}\n\t\t\t\t\trole=\"gridcell\"\n\t\t\t\t\taria-colindex={gridPosition.col + 1}\n\t\t\t\t\taria-selected={isSelected}\n\t\t\t\t\taria-expanded={isInCardNavigation}\n\t\t\t\t\taria-description={isInCardNavigation ? `Card navigation active. ${cardNavState.cardElements.length} interactive elements available.` : undefined}\n\t\t\t\t\ttabIndex={shouldBeFocusable ? 0 : -1}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t  setCardNavState(prev => ({ \n\t\t\t\t\t\t...prev, \n\t\t\t\t\t\tselectedCardIndex: prev.selectedCardIndex === index ? -1 : index\n\t\t\t\t\t  }));\n\t\t\t\t\t  handleCardSelect(row);\n\t\t\t\t\t}}\n\t\t\t\t\tonKeyDown={(event) => handleCardKeyDown(event, index)}\n\t\t\t\t\tonFocus={() => {\n\t\t\t\t\t  // Do not reset focus state when in card-internal navigation; React onFocus bubbles from children\n\t\t\t\t\t  setCardNavState(prev => {\n\t\t\t\t\t\tif (prev.isCardNavigationActive) return prev;\n\t\t\t\t\t\tif (prev.focusedCardIndex !== index || prev.focusArea !== 'cards') {\n\t\t\t\t\t\t  return { \n\t\t\t\t\t\t\t...prev, \n\t\t\t\t\t\t\tfocusedCardIndex: index,\n\t\t\t\t\t\t\tfocusArea: 'cards'\n\t\t\t\t\t\t  };\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn prev;\n\t\t\t\t\t  });\n\t\t\t\t\t}}\n\t\t\t\t  >\n\t\t\t\t\t{customCard}\n\t\t\t\t  </div>\n\t\t\t\t</div>\n\t\t\t  );\n\t\t\t}\n\n\t\t\t// Use the generic card creation function with plugin support\n\t\t\tconst cardProps = createCard(row, currentPanel.columns, genericCardConfig, domainPlugin);\n\t\t\t\n\t\t\t// Calculate the full className including navigation state\n\t\t\tconst cardClassName = [\n\t\t\t  cardProps.className || '',\n\t\t\t  isSelected ? 'aria-tabs-datagrid-adaptive__card--selected' : '',\n\t\t\t  isFocused ? 'aria-tabs-datagrid-adaptive__card--focused' : '',\n\t\t\t  isInCardNavigation ? 'aria-tabs-datagrid-adaptive__card--card-navigation' : ''\n\t\t\t].filter(Boolean).join(' ');\n\t\t\t\n\t\t\treturn (\n\t\t\t  <div\n\t\t\t\tkey={`card-${index}`}\n\t\t\t\trole=\"row\"\n\t\t\t\taria-rowindex={gridPosition.row + 1}\n\t\t\t\tclassName=\"aria-tabs-datagrid-adaptive__row\"\n\t\t\t  >\n\t\t\t\t<div\n\t\t\t\t  className={[\n\t\t\t\t\t'aria-tabs-datagrid-adaptive__card-wrapper',\n\t\t\t\t\tisSelected ? 'aria-tabs-datagrid-adaptive__card-wrapper--selected' : '',\n\t\t\t\t\tisFocused ? 'aria-tabs-datagrid-adaptive__card-wrapper--focused' : '',\n\t\t\t\t\tisInCardNavigation ? 'aria-tabs-datagrid-adaptive__card-wrapper--card-navigation' : ''\n\t\t\t\t  ].filter(Boolean).join(' ')}\n\t\t\t\t  role=\"gridcell\"\n\t\t\t\t  aria-colindex={gridPosition.col + 1}\n\t\t\t\t  aria-selected={isSelected}\n\t\t\t\t  aria-expanded={isInCardNavigation}\n\t\t\t\t  onKeyDown={(event) => {\n\t\t\t\t\tif (event.key === 'Enter') {\n\t\t\t\t\t  event.preventDefault();\n\t\t\t\t\t  setCardNavState(prev => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tselectedCardIndex: index\n\t\t\t\t\t  }));\n\t\t\t\t\t}\n\t\t\t\t\thandleCardKeyDown(event as any, index);\n\t\t\t\t  }}\n\t\t\t\t>\n\t\t\t\t  <Card \n\t\t\t\t\t{...cardProps}\n\t\t\t\t\tref={el => { cardRefs.current[index] = el; }}\n\t\t\t\t\tclassName={cardClassName}\n\t\t\t\t\taria-label={`${cardProps['aria-label'] || cardProps.heading}. ${isInCardNavigation ? `Card navigation active with ${cardNavState.cardElements.length} interactive elements. Use arrow keys to navigate, Enter to activate, Escape to exit.` : 'Press Enter to navigate within card elements.'}`}\n\t\t\t\t\ttabIndex={shouldBeFocusable ? 0 : -1}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t  setCardNavState(prev => ({ \n\t\t\t\t\t\t...prev, \n\t\t\t\t\t\tselectedCardIndex: prev.selectedCardIndex === index ? -1 : index\n\t\t\t\t\t  }));\n\t\t\t\t\t  handleCardSelect(row);\n\t\t\t\t\t}}\n\t\t\t\t\tonKeyDown={(event) => handleCardKeyDown(event, index)}\n\t\t\t\t\tonFocus={() => {\n\t\t\t\t\t  if (!cardNavState.isCardNavigationActive) {\n\t\t\t\t\t\tsetCardNavState(prev => {\n\t\t\t\t\t\t  if (prev.focusedCardIndex !== index || prev.focusArea !== 'cards') {\n\t\t\t\t\t\t\treturn { \n\t\t\t\t\t\t\t  ...prev, \n\t\t\t\t\t\t\t  focusedCardIndex: index,\n\t\t\t\t\t\t\t  focusArea: 'cards',\n\t\t\t\t\t\t\t  focusedCardElementIndex: 0,\n\t\t\t\t\t\t\t  cardElements: []\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t  return prev;\n\t\t\t\t\t\t});\n\t\t\t\t\t  }\n\t\t\t\t\t}}\n\t\t\t\t  />\n\t\t\t\t</div>\n\t\t\t  </div>\n\t\t\t);\n\t\t  })}\n\t\t</div>\n\n\t\t{/* Bottom actions area */}\n\t\t{bottomActions && (\n\t\t  <div className=\"aria-tabs-datagrid-adaptive__bottom-actions\">\n\t\t\t{bottomActions}\n\t\t  </div>\n\t\t)}\n\n\t\t{/* Screen reader announcements container - fixed position to avoid layout impact */}\n\t\t<div \n\t\t  ref={announcementsRef}\n\t\t  className=\"aria-tabs-datagrid-adaptive__announcements\"\n\t\t  aria-hidden=\"true\"\n\t\t  style={{\n\t\t\tposition: 'fixed',\n\t\t\ttop: '-1px',\n\t\t\tleft: '-1px',\n\t\t\twidth: '1px',\n\t\t\theight: '1px',\n\t\t\toverflow: 'hidden',\n\t\t\tclip: 'rect(0, 0, 0, 0)',\n\t\t\twhiteSpace: 'nowrap',\n\t\t\tborder: 0,\n\t\t\tpadding: 0,\n\t\t\tmargin: 0\n\t\t  }}\n\t\t/>\n\t  </div>\n\t);\n  }\n\n  // Hybrid mode for tablets\n  if (layout === 'hybrid') {\n\treturn (\n\t  <div className={`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--hybrid ${className || ''}`}>\n\t\t{/* Top actions area */}\n\t\t{topActions && (\n\t\t  <div className=\"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table\">\n\t\t\t{topActions}\n\t\t  </div>\n\t\t)}\n\n\t\t{/* Enhanced table with card-like spacing - AriaTabsDataGrid handles its own keyboard navigation */}\n\t\t<AriaTabsDataGrid \n\t\t  tabPanels={tabPanels}\n\t\t  dataConfig={dataConfig}\n\t\t  ariaLabel={ariaLabel}\n\t\t  ariaDescription={ariaDescription}\n\t\t  orientation={orientation}\n\t\t  id={id}\n\t\t  disabled={disabled}\n\t\t  selectedIndex={selectedIndexProp} // Use the original prop, not ResponsiveDataGrid's state\n\t\t  onTabChange={onTabChange} // Use the original callback, not ResponsiveDataGrid's wrapper\n\t\t  className=\"aria-tabs-datagrid-adaptive__table--hybrid\"\n\t\t  actions={gridActions}\n\t\t  forceActionsAbove={forceGridActionsAbove}\n\t\t  hideTabsIfSingle={hideTabsIfSingle}\n\t\t  {...props}\n\t\t/>\n\n\t\t{/* Bottom actions area */}\n\t\t{bottomActions && (\n\t\t  <div className=\"aria-tabs-datagrid-adaptive__bottom-actions\">\n\t\t\t{bottomActions}\n\t\t  </div>\n\t\t)}\n\t  </div>\n\t);\n  }\n\n  // Desktop table mode - AriaTabsDataGrid handles its own keyboard navigation  \n  return (\n\t<div className={`aria-tabs-datagrid-adaptive aria-tabs-datagrid-adaptive--table ${className || ''}`}>\n\t  {/* Top actions area */}\n\t  {topActions && (\n\t\t<div className=\"aria-tabs-datagrid-adaptive__top-actions aria-tabs-datagrid-adaptive__top-actions--above-table\">\n\t\t  {topActions}\n\t\t</div>\n\t  )}\n\n\t  <AriaTabsDataGrid \n\t\ttabPanels={tabPanels}\n\t\tdataConfig={dataConfig}\n\t\tariaLabel={ariaLabel}\n\t\tariaDescription={ariaDescription}\n\t\torientation={orientation}\n\t\tid={id}\n\t\tdisabled={disabled}\n\t\tselectedIndex={selectedIndexProp} // Use the original prop, not ResponsiveDataGrid's state\n\t\tonTabChange={onTabChange} // Use the original callback, not ResponsiveDataGrid's wrapper\n\t\tactions={gridActions}\n\t\tforceActionsAbove={forceGridActionsAbove}\n\t\thideTabsIfSingle={hideTabsIfSingle}\n\t\t{...props}\n\t  />\n\n\t  {/* Bottom actions area */}\n\t  {bottomActions && (\n\t\t<div className=\"aria-tabs-datagrid-adaptive__bottom-actions\">\n\t\t  {bottomActions}\n\t\t</div>\n\t  )}\n\t</div>\n  );\n};\n\nexport default ResponsiveDataGrid;", "import React, {\n\tuseReducer,\n\tuseCallback,\n\tuseMemo,\n\tuseRef,\n\tuseImperativeHandle,\n\tforwardRef,\n\tuseEffect,\n\tuseState,\n} from \"react\";\nimport {\n\tAriaTabsDataGridProps,\n\tAriaTabsDataGridState,\n\tAriaTabsDataGridAction,\n} from \"./AriaTabsDataGridTypes\";\nimport { SortConfig } from \"./AriaDataGridTypes\";\nimport \"./AriaTabsDataGrid.scss\";\nimport { SortStatusControl } from \"./SortStatusControl/SortStatusControl\";\nimport { buildMultiComparator } from './sortUtils';\nimport { NullsPosition } from './AriaDataGridTypes';\n\n/**\n * Navigation focus areas for hierarchical keyboard navigation\n */\ntype FocusArea = \"tabs\" | \"headers\" | \"cells\" | \"actions\";\n\n/**\n * Navigation state for hierarchical keyboard navigation\n */\ninterface NavigationState {\n\tfocusArea: FocusArea;\n\tfocusedTabIndex: number;\n\tfocusedHeaderIndex: number;\n\tfocusedRowIndex: number;\n\tfocusedColumnIndex: number;\n\tfocusedActionIndex: number;\n\tisGridActive: boolean;\n}\n\nfunction tabsDataGridReducer(\n\tstate: AriaTabsDataGridState,\n\taction: AriaTabsDataGridAction\n): AriaTabsDataGridState {\n\tswitch (action.type) {\n\t\tcase \"SET_SELECTED_INDEX\":\n\t\t\treturn { ...state, selectedIndex: action.payload };\n\n\t\tcase \"SET_TAB_LOADING\":\n\t\t\tconst newLoadingStates = [...state.tabLoadingStates];\n\t\t\tnewLoadingStates[action.payload.tabIndex] = action.payload.isLoading;\n\t\t\treturn { ...state, tabLoadingStates: newLoadingStates };\n\n\t\tcase \"SET_TAB_ERROR\":\n\t\t\tconst newErrors = [...state.tabErrors];\n\t\t\tnewErrors[action.payload.tabIndex] = action.payload.error;\n\t\t\treturn { ...state, tabErrors: newErrors };\n\n\t\tcase \"SET_SORT\":\n\t\t\treturn { ...state, sortConfig: action.payload };\n\n\t\tcase \"SET_SELECTED_ROWS\":\n\t\t\tconst newSelectedRows = [...state.selectedRows];\n\t\t\tnewSelectedRows[action.payload.tabIndex] = action.payload.rowIndices;\n\t\t\treturn { ...state, selectedRows: newSelectedRows };\n\n\t\tcase \"SET_GLOBAL_SELECTED_ROW_DATA\":\n\t\t\treturn { ...state, globalSelectedRowData: action.payload };\n\n\t\tcase \"SET_FILTERS\":\n\t\t\treturn { ...state, filters: action.payload };\n\n\t\tcase \"ADJUST_ARRAYS\":\n\t\t\tconst { newLength } = action.payload;\n\t\t\tconst adjustedLoadingStates = new Array(newLength).fill(false);\n\t\t\tconst adjustedErrors = new Array(newLength).fill(null);\n\t\t\tconst adjustedSelectedRows = new Array(newLength).fill([]);\n\n\t\t\t// Copy existing states up to the minimum length\n\t\t\tfor (\n\t\t\t\tlet i = 0;\n\t\t\t\ti < Math.min(state.tabLoadingStates.length, newLength);\n\t\t\t\ti++\n\t\t\t) {\n\t\t\t\tadjustedLoadingStates[i] = state.tabLoadingStates[i];\n\t\t\t\tadjustedErrors[i] = state.tabErrors[i];\n\t\t\t\tadjustedSelectedRows[i] = state.selectedRows[i];\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttabLoadingStates: adjustedLoadingStates,\n\t\t\t\ttabErrors: adjustedErrors,\n\t\t\t\tselectedRows: adjustedSelectedRows,\n\t\t\t};\n\n\t\tcase \"RESET_STATE\":\n\t\t\treturn {\n\t\t\t\tselectedIndex: 0,\n\t\t\t\ttabLoadingStates: new Array(state.tabLoadingStates.length).fill(false),\n\t\t\t\ttabErrors: new Array(state.tabErrors.length).fill(null),\n\t\t\t\tsortConfig: [],\n\t\t\t\tselectedRows: new Array(state.selectedRows.length).fill([]),\n\t\t\t\tglobalSelectedRowData: null,\n\t\t\t\tfilters: undefined,\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\n/**\n * Component reference interface for imperative actions\n */\nexport interface AriaTabsDataGridRef {\n\tselectTab: (index: number) => void;\n\trefreshData: (tabIndex?: number) => void;\n\texportData: (tabIndex?: number) => any[];\n\tgetSelectedRows: (tabIndex?: number) => number[];\n\tclearSelection: (tabIndex?: number) => void;\n\tapplyFilters: (filters: any) => void;\n}\n\n/**\n * Integrated Tabs and DataGrid component with full ARIA compliance\n */\nexport const AriaTabsDataGrid = forwardRef<\n\tAriaTabsDataGridRef,\n\tAriaTabsDataGridProps\n>(function AriaTabsDataGrid(props, ref) {\n\tconst {\n\t\tdataConfig = {},\n\t\ttabPanels,\n\t\tselectedIndex: selectedIndexProp,\n\t\tonTabChange,\n\t\tonGlobalRowSelectionChange,\n\t\tariaLabel,\n\t\tariaDescription,\n\t\tclassName = \"\",\n\t\tdisabled = false,\n\t\torientation = \"horizontal\",\n\t\tid,\n\t\tisLoading = false,\n\t\tloadingComponent,\n\t\terror = null,\n\t\terrorComponent,\n\t\t\"data-testid\": dataTestId,\n\t\tactions,\n\t\tactionsMinGap = 16,\n\t\tforceActionsAbove = false,\n\t\thideTabsIfSingle = false,\n\t} = props;\n\n\t// Allow developer to hide the tab list when only a single tab/panel is provided\n\tconst tabsHidden = hideTabsIfSingle && tabPanels.length === 1;\n\n\t// Generate a stable base id for internal helper elements when no `id` prop is provided.\n\tconst baseIdRef = useRef<string>(\n\t\tid || `aria-tabs-datagrid-${Math.random().toString(36).slice(2, 9)}`\n\t);\n\tconst baseId = baseIdRef.current;\n\n\t// ariaDescription can be either a reference id (when consumers pass an existing element id)\n\t// or plain descriptive text. Detect simple ids (no whitespace) and handle accordingly.\n\tconst descriptionLooksLikeId =\n\t\ttypeof ariaDescription === \"string\" &&\n\t\tariaDescription.trim() !== \"\" &&\n\t\t!/\\s/.test(ariaDescription);\n\tconst generatedDescriptionId = `${baseId}-description`;\n\tconst navigationHelpId = `${baseId}-navigation-help`;\n\n\t// Extract data operation functions with defaults\n\tconst {\n\t\tdataComparator = (a: any, b: any) =>\n\t\t\tJSON.stringify(a) === JSON.stringify(b),\n\t\tfilterFunction = (data: any[]) => data,\n\t\tbooleanRenderer = (value: any) => (value ? \"\u2713\" : \"\u2717\"),\n\t} = dataConfig || {}; // Determine if component is controlled\n\tconst isControlled = selectedIndexProp !== undefined;\n\tconst selectedIndex = selectedIndexProp ?? 0;\n\n\t// Navigation state for hierarchical keyboard navigation (like GanttChart)\n\tconst [navigationState, setNavigationState] = useState<NavigationState>({\n\t\tfocusArea: tabsHidden ? \"headers\" : \"tabs\",\n\t\tfocusedTabIndex: selectedIndex,\n\t\tfocusedHeaderIndex: 0,\n\t\tfocusedRowIndex: 0,\n\t\tfocusedColumnIndex: 0,\n\t\tfocusedActionIndex: 0,\n\t\tisGridActive: false,\n\t});\n\n\t// Initialize state with empty sort configuration to avoid contamination\n\tconst initialState: AriaTabsDataGridState = useMemo(() => {\n\t\t// Don't combine initial sort configs - let users build their own sorting\n\t\t// This prevents \"mega-filter\" effects and state reset issues\n\t\treturn {\n\t\t\tselectedIndex,\n\t\t\ttabLoadingStates: new Array(tabPanels.length).fill(false),\n\t\t\ttabErrors: new Array(tabPanels.length).fill(null),\n\t\t\tsortConfig: [], // Start with empty sort config\n\t\t\tselectedRows: new Array(tabPanels.length).fill([]),\n\t\t\tglobalSelectedRowData: null,\n\t\t\tfilters: undefined,\n\t\t};\n\t}, [selectedIndex]); // Remove tabPanels dependency to prevent state resets\n\n\tconst [state, dispatch] = useReducer(tabsDataGridReducer, initialState);\n\n\t// Handle tabPanels length changes without resetting sort configuration\n\tuseEffect(() => {\n\t\tconst currentLength = state.tabLoadingStates.length;\n\t\tconst newLength = tabPanels.length;\n\n\t\tif (currentLength !== newLength) {\n\t\t\t// Adjust array lengths while preserving existing sort configuration\n\t\t\tdispatch({ type: \"ADJUST_ARRAYS\", payload: { newLength } });\n\t\t}\n\t}, [tabPanels.length]);\n\n\t// Controlled component support - sync selectedIndex when it changes externally\n\tuseEffect(() => {\n\t\tif (isControlled) {\n\t\t\tdispatch({ type: \"SET_SELECTED_INDEX\", payload: selectedIndex });\n\t\t}\n\t}, [selectedIndex, isControlled]);\n\n\t// Reset navigation state when selected tab changes to ensure proper keyboard navigation\n\tuseEffect(() => {\n\t\tsetNavigationState((prev) => ({\n\t\t\t...prev,\n\t\t\tfocusArea: tabsHidden ? \"headers\" : \"tabs\",\n\t\t\tfocusedTabIndex: state.selectedIndex,\n\t\t\tfocusedHeaderIndex: 0,\n\t\t\tfocusedRowIndex: 0,\n\t\t\tfocusedColumnIndex: 0,\n\t\t\tfocusedActionIndex: 0,\n\t\t\tisGridActive: false,\n\t\t}));\n\t}, [state.selectedIndex, tabsHidden]);\n\n\t// Handle global row selection callback\n\tuseEffect(() => {\n\t\tif (onGlobalRowSelectionChange) {\n\t\t\tonGlobalRowSelectionChange(state.globalSelectedRowData);\n\t\t}\n\t}, [state.globalSelectedRowData, onGlobalRowSelectionChange]);\n\n\t// Generic data equality check using provided or default comparator\n\tconst isDataEqual = useCallback(\n\t\t(data1: any, data2: any): boolean => {\n\t\t\treturn dataComparator(data1, data2);\n\t\t},\n\t\t[dataComparator]\n\t);\n\n\t// Handle tab selection with keyboard support\n\tconst handleTabSelect = useCallback(\n\t\t(index: number) => {\n\t\t\tif (\n\t\t\t\tindex >= 0 &&\n\t\t\t\tindex < tabPanels.length &&\n\t\t\t\t!tabPanels[index].disabled\n\t\t\t) {\n\t\t\t\tdispatch({ type: \"SET_SELECTED_INDEX\", payload: index });\n\t\t\t\t// Keep navigation state in sync\n\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\tfocusedTabIndex: index,\n\t\t\t\t\tfocusArea: \"tabs\",\n\t\t\t\t}));\n\t\t\t\tonTabChange?.(index);\n\t\t\t}\n\t\t},\n\t\t[tabPanels, onTabChange]\n\t);\n\n\t// Scroll tab into view utility\n\tconst initialScrollDoneRef = useRef(false);\n\tconst scrollTabIntoView = useCallback(\n\t\t(tabIndex: number, opts?: { force?: boolean }) => {\n\t\t\t// Skip centering the very first tab on initial mount so it stays flush-left\n\t\t\tif (!opts?.force && !initialScrollDoneRef.current && tabIndex === 0) {\n\t\t\t\tinitialScrollDoneRef.current = true; // prevent future skips\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tinitialScrollDoneRef.current = true;\n\t\t\t// Small delay to ensure DOM is ready\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst tabElement = tabRefs.current[tabIndex];\n\t\t\t\tconst tabListElement = tabElement?.parentElement as HTMLElement | null;\n\t\t\t\tif (tabElement && tabListElement) {\n\t\t\t\t\tconst tabOffsetLeft = tabElement.offsetLeft;\n\t\t\t\t\tconst tabWidth = tabElement.offsetWidth;\n\t\t\t\t\tconst tabListWidth = tabListElement.clientWidth;\n\t\t\t\t\tconst targetScrollLeft =\n\t\t\t\t\t\ttabOffsetLeft - tabListWidth / 2 + tabWidth / 2;\n\t\t\t\t\ttry {\n\t\t\t\t\t\ttabListElement.scrollTo({\n\t\t\t\t\t\t\tleft: Math.max(0, targetScrollLeft),\n\t\t\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch {\n\t\t\t\t\t\ttabElement.scrollIntoView({\n\t\t\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t\t\t\tblock: \"nearest\",\n\t\t\t\t\t\t\tinline: \"center\",\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else if (!process.env.SILENCE_SCROLL_DEBUG) {\n\t\t\t\t\tconsole.debug(\"[AriaTabsDataGrid] Missing elements for scroll\", {\n\t\t\t\t\t\ttabElementExists: !!tabElement,\n\t\t\t\t\t\ttabListElementExists: !!tabListElement,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, 50);\n\t\t},\n\t\t[]\n\t);\n\n\t// Hierarchical keyboard navigation handlers (inspired by GanttChart)\n\n\t// Tab refs for individual tabs\n\tconst tabRefs = useRef<(HTMLButtonElement | null)[]>([]);\n\tconst panelRefs = useRef<(HTMLDivElement | null)[]>([]);\n\n\t// Sort handlers for global sort configuration - cycles through asc -> desc -> none (remove)\n\tconst handleSort = useCallback(\n\t\t(tabIndex: number, key: string) => {\n\t\t\tconst currentSort = state.sortConfig || [];\n\t\t\tconst existingSort = currentSort.find(\n\t\t\t\t(sort: SortConfig) => sort.key === key\n\t\t\t);\n\n\t\t\tlet newSortConfig: SortConfig[];\n\t\t\tif (existingSort) {\n\t\t\t\tif (existingSort.direction === \"asc\") {\n\t\t\t\t\t// Change to descending\n\t\t\t\t\tnewSortConfig = currentSort.map((sort: SortConfig) =>\n\t\t\t\t\t\tsort.key === key ? { ...sort, direction: \"desc\" as const } : sort\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Remove the sort (desc -> none)\n\t\t\t\t\tnewSortConfig = currentSort.filter(\n\t\t\t\t\t\t(sort: SortConfig) => sort.key !== key\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Add new sort starting with ascending - append to end to maintain priority order\n\t\t\t\tnewSortConfig = [...currentSort, { key, direction: \"asc\" as const }];\n\t\t\t}\n\n\t\t\t// Dispatch the new sort configuration\n\t\t\tdispatch({\n\t\t\t\ttype: \"SET_SORT\",\n\t\t\t\tpayload: newSortConfig,\n\t\t\t});\n\n\t\t\t// Call custom sort handler if provided\n\t\t\tconst panel = tabPanels[tabIndex];\n\t\t\tpanel.onSort?.(key as any);\n\t\t},\n\t\t[state.sortConfig, tabPanels]\n\t);\n\n\t// Focus management utilities\n\tconst focusGridHeader = useCallback(\n\t\t(headerIndex: number) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst headerElement = document.querySelector(\n\t\t\t\t\t`[data-tab-panel=\"${state.selectedIndex}\"] th:nth-child(${headerIndex + 1})`\n\t\t\t\t) as HTMLElement;\n\t\t\t\tif (headerElement) {\n\t\t\t\t\theaderElement.focus();\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t},\n\t\t[state.selectedIndex]\n\t);\n\n\t// Reset all global sorts\n\t// const handleResetSorts = useCallback(() => {\n\t//   dispatch({\n\t//     type: 'SET_SORT',\n\t//     payload: []\n\t//   });\n\t// }, []);\n\n\t// Generate sort description text showing all global sorts\n\t// const getCurrentSortDescription = useCallback(() => {\n\t//   const currentSorts = state.sortConfig || [];\n\t//\n\t//   if (currentSorts.length === 0) {\n\t//     return 'No sorting applied';\n\t//   }\n\n\t//   // Show all global sorts with column labels where available\n\t//   const sortDescriptions = currentSorts.map((sort: SortConfig, index: number) => {\n\t//     // Find the column definition across all tabs\n\t//     let columnLabel = sort.key;\n\t//     for (const panel of tabPanels) {\n\t//       const column = panel.columns.find(col => col.key === sort.key);\n\t//       if (column) {\n\t//         columnLabel = column.label;\n\t//         break;\n\t//       }\n\t//     }\n\t//\n\t//     const direction = sort.direction === 'asc' ? 'ascending' : 'descending';\n\t//     return `${index + 1}. ${columnLabel} (${direction})`;\n\t//   });\n\n\t//   // Join with proper grammar: commas and 'and' before the last item\n\t//   let sortText: string;\n\t//   if (sortDescriptions.length === 1) {\n\t//     sortText = sortDescriptions[0];\n\t//   } else if (sortDescriptions.length === 2) {\n\t//     sortText = sortDescriptions.join(' and ');\n\t//   } else {\n\t//     const lastItem = sortDescriptions.pop();\n\t//     sortText = sortDescriptions.join(', ') + ', and ' + lastItem;\n\t//   }\n\n\t//   return `Sorted by: ${sortText}`;\n\t// }, [state.sortConfig, tabPanels]);\n\n\t// Configurable boolean rendering function\n\tconst renderBooleanIcon = useCallback(\n\t\t(value: boolean) => {\n\t\t\treturn booleanRenderer(value);\n\t\t},\n\t\t[booleanRenderer]\n\t);\n\n\tconst focusGridCell = useCallback(\n\t\t(rowIndex: number, colIndex: number) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst cellElement = document.querySelector(\n\t\t\t\t\t`[data-tab-panel=\"${state.selectedIndex}\"] tbody tr:nth-child(${rowIndex + 1}) td:nth-child(${colIndex + 1})`\n\t\t\t\t) as HTMLElement;\n\t\t\t\tif (cellElement) {\n\t\t\t\t\tcellElement.focus();\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t},\n\t\t[state.selectedIndex]\n\t);\n\n\t// Handle automatic focusing when navigation state changes\n\tuseEffect(() => {\n\t\t// Only auto-focus when isGridActive is true (indicates we're transitioning into the grid)\n\t\tif (navigationState.isGridActive) {\n\t\t\tif (navigationState.focusArea === \"headers\") {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfocusGridHeader(navigationState.focusedHeaderIndex);\n\t\t\t\t}, 0);\n\t\t\t} else if (navigationState.focusArea === \"cells\") {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfocusGridCell(\n\t\t\t\t\t\tnavigationState.focusedRowIndex,\n\t\t\t\t\t\tnavigationState.focusedColumnIndex\n\t\t\t\t\t);\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t}\n\t}, [\n\t\tnavigationState.focusArea,\n\t\tnavigationState.isGridActive,\n\t\tnavigationState.focusedHeaderIndex,\n\t\tnavigationState.focusedRowIndex,\n\t\tnavigationState.focusedColumnIndex,\n\t\tfocusGridHeader,\n\t\tfocusGridCell,\n\t]);\n\n\t// Scroll selected tab into view when tab changes\n\tuseEffect(() => {\n\t\tif (!tabsHidden) {\n\t\t\tscrollTabIntoView(state.selectedIndex);\n\t\t}\n\t}, [state.selectedIndex, scrollTabIntoView, tabsHidden]);\n\n\t// Grid header navigation (similar to GanttChart date navigation)\n\tconst handleHeaderKeyDown = useCallback(\n\t\t(event: React.KeyboardEvent, headerIndex: number) => {\n\t\t\tconst { key } = event;\n\t\t\tconst currentPanel = tabPanels[state.selectedIndex];\n\t\t\tconst columnCount = currentPanel?.columns.length || 0;\n\n\t\t\tswitch (key) {\n\t\t\t\tcase \"ArrowLeft\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst prevHeaderIndex = Math.max(0, headerIndex - 1);\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusedHeaderIndex: prevHeaderIndex,\n\t\t\t\t\t}));\n\t\t\t\t\tfocusGridHeader(prevHeaderIndex);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ArrowRight\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst nextHeaderIndex = Math.min(columnCount - 1, headerIndex + 1);\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusedHeaderIndex: nextHeaderIndex,\n\t\t\t\t\t}));\n\t\t\t\t\tfocusGridHeader(nextHeaderIndex);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ArrowUp\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// When tabs are visible, navigate back to tabs; otherwise, try actions if present\n\t\t\t\t\tif (!tabsHidden) {\n\t\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tfocusArea: \"tabs\",\n\t\t\t\t\t\t\tfocusedTabIndex: state.selectedIndex,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tscrollTabIntoView(state.selectedIndex);\n\t\t\t\t\t\ttabRefs.current[state.selectedIndex]?.focus();\n\t\t\t\t\t} else if (actions) {\n\t\t\t\t\t\t// focus first action if available\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tconst toolbar = actionsRef.current;\n\t\t\t\t\t\t\tif (!toolbar) return;\n\t\t\t\t\t\t\tconst focusable = toolbar.querySelector<HTMLElement>(\n\t\t\t\t\t\t\t\t'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tfocusable?.focus();\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ArrowDown\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// Navigate to grid cells\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusArea: \"cells\",\n\t\t\t\t\t\tfocusedRowIndex: 0,\n\t\t\t\t\t\tfocusedColumnIndex: headerIndex,\n\t\t\t\t\t\tisGridActive: true,\n\t\t\t\t\t}));\n\t\t\t\t\t// Focus will happen in the next effect cycle when navigation state is updated\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Home\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tsetNavigationState((prev) => ({ ...prev, focusedHeaderIndex: 0 }));\n\t\t\t\t\tfocusGridHeader(0);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"End\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst lastHeaderIndex = columnCount - 1;\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusedHeaderIndex: lastHeaderIndex,\n\t\t\t\t\t}));\n\t\t\t\t\tfocusGridHeader(lastHeaderIndex);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Enter\":\n\t\t\t\tcase \" \":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// Sort by this column\n\t\t\t\t\tconst columnKey = currentPanel?.columns[headerIndex]?.key;\n\t\t\t\t\tif (columnKey) {\n\t\t\t\t\t\thandleSort(state.selectedIndex, columnKey);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\ttabPanels,\n\t\t\tstate.selectedIndex,\n\t\t\thandleSort,\n\t\t\tsetNavigationState,\n\t\t\tfocusGridHeader,\n\t\t\tfocusGridCell,\n\t\t\ttabRefs,\n\t\t]\n\t);\n\n\t// Grid cell navigation (similar to GanttChart task navigation)\n\tconst handleCellKeyDown = useCallback(\n\t\t(event: React.KeyboardEvent, rowIndex: number, colIndex: number) => {\n\t\t\tconst { key } = event;\n\t\t\tconst currentPanel = tabPanels[state.selectedIndex];\n\t\t\tconst rowCount = currentPanel?.data.length || 0;\n\t\t\tconst columnCount = currentPanel?.columns.length || 0;\n\n\t\t\t// Grid navigation mode (moving between cells)\n\t\t\tswitch (key) {\n\t\t\t\tcase \"ArrowUp\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tif (rowIndex === 0) {\n\t\t\t\t\t\t// Navigate to headers\n\t\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tfocusArea: \"headers\",\n\t\t\t\t\t\t\tfocusedHeaderIndex: colIndex,\n\t\t\t\t\t\t\tisGridActive: false,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tfocusGridHeader(colIndex);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newRowIndex = rowIndex - 1;\n\t\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tfocusedRowIndex: newRowIndex,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tfocusGridCell(newRowIndex, colIndex);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ArrowDown\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst newRowIndex = Math.min(rowCount - 1, rowIndex + 1);\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusedRowIndex: newRowIndex,\n\t\t\t\t\t}));\n\t\t\t\t\tfocusGridCell(newRowIndex, colIndex);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ArrowLeft\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst newColIndex = Math.max(0, colIndex - 1);\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusedColumnIndex: newColIndex,\n\t\t\t\t\t}));\n\t\t\t\t\tfocusGridCell(rowIndex, newColIndex);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ArrowRight\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst nextColIndex = Math.min(columnCount - 1, colIndex + 1);\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusedColumnIndex: nextColIndex,\n\t\t\t\t\t}));\n\t\t\t\t\tfocusGridCell(rowIndex, nextColIndex);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Home\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tif (event.ctrlKey) {\n\t\t\t\t\t\t// Go to first cell\n\t\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tfocusedRowIndex: 0,\n\t\t\t\t\t\t\tfocusedColumnIndex: 0,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tfocusGridCell(0, 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Go to first column in current row\n\t\t\t\t\t\tsetNavigationState((prev) => ({ ...prev, focusedColumnIndex: 0 }));\n\t\t\t\t\t\tfocusGridCell(rowIndex, 0);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"End\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tif (event.ctrlKey) {\n\t\t\t\t\t\t// Go to last cell\n\t\t\t\t\t\tconst lastRow = rowCount - 1;\n\t\t\t\t\t\tconst lastCol = columnCount - 1;\n\t\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tfocusedRowIndex: lastRow,\n\t\t\t\t\t\t\tfocusedColumnIndex: lastCol,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tfocusGridCell(lastRow, lastCol);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Go to last column in current row\n\t\t\t\t\t\tconst lastCol = columnCount - 1;\n\t\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tfocusedColumnIndex: lastCol,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tfocusGridCell(rowIndex, lastCol);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Enter\":\n\t\t\t\tcase \" \": // Space key\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// Handle row selection - we'll get the row data from currentPanel.data\n\t\t\t\t\tif (currentPanel && currentPanel.data[rowIndex]) {\n\t\t\t\t\t\t// Get filtered data\n\t\t\t\t\t\tconst displayData = currentPanel.data.some(\n\t\t\t\t\t\t\t(item: any) => \"ews_data\" in item\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t? filterFunction(currentPanel.data, state.filters)\n\t\t\t\t\t\t\t: currentPanel.data;\n\n\t\t\t\t\t\t// Sort the data based on the global sort configuration\n\t\t\t\t\t\tconst sortConfig = state.sortConfig;\n\t\t\t\t\t\tlet sortedData = displayData;\n\t\t\t\t\t\tif (sortConfig && sortConfig.length > 0) {\n\t\t\t\t\t\t\tconst comparator = buildMultiComparator(currentPanel.columns as any, sortConfig, NullsPosition.Last, dataConfig?.sortingOptions);\n\t\t\t\t\t\t\tsortedData = [...displayData].sort(comparator);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (sortedData[rowIndex]) {\n\t\t\t\t\t\t\tconst row = sortedData[rowIndex];\n\t\t\t\t\t\t\tconst isCurrentlySelected =\n\t\t\t\t\t\t\t\tstate.globalSelectedRowData &&\n\t\t\t\t\t\t\t\tisDataEqual(state.globalSelectedRowData, row);\n\t\t\t\t\t\t\tconst newSelectedRowData = isCurrentlySelected ? null : row;\n\t\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\t\ttype: \"SET_GLOBAL_SELECTED_ROW_DATA\",\n\t\t\t\t\t\t\t\tpayload: newSelectedRowData,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\ttabPanels,\n\t\t\tstate.selectedIndex,\n\t\t\tstate.filters,\n\t\t\tstate.sortConfig,\n\t\t\tfilterFunction,\n\t\t\tisDataEqual,\n\t\t\tdispatch,\n\t\t\tsetNavigationState,\n\t\t\tfocusGridHeader,\n\t\t\tfocusGridCell,\n\t\t]\n\t);\n\n\t// Configurable filter function\n\tconst getFilteredData = useCallback(\n\t\t(data: any[], filters?: any): any[] => {\n\t\t\treturn filterFunction(data, filters);\n\t\t},\n\t\t[filterFunction]\n\t);\n\n\t// Imperative API\n\tuseImperativeHandle(\n\t\tref,\n\t\t() => ({\n\t\t\tselectTab: (index: number) => {\n\t\t\t\tif (index >= 0 && index < tabPanels.length) {\n\t\t\t\t\tdispatch({ type: \"SET_SELECTED_INDEX\", payload: index });\n\t\t\t\t\tonTabChange?.(index);\n\t\t\t\t}\n\t\t\t},\n\t\t\trefreshData: (tabIndex?: number) => {\n\t\t\t\t// Implementation for data refresh\n\t\t\t\tconsole.log(\"Refreshing data for tab:\", tabIndex ?? \"all\");\n\t\t\t},\n\t\t\texportData: (tabIndex?: number) => {\n\t\t\t\tconst targetIndex = tabIndex ?? state.selectedIndex;\n\t\t\t\tconst panel = tabPanels[targetIndex];\n\t\t\t\treturn panel ? panel.data : [];\n\t\t\t},\n\t\t\tgetSelectedRows: (_tabIndex?: number) => {\n\t\t\t\t// Return global selected row as an array for backwards compatibility\n\t\t\t\t// For global row selection, we need to find the row index of the selected data\n\t\t\t\t// This requires the sortedData to be available in this scope\n\t\t\t\tconst selectedRows = state.globalSelectedRowData ? [] : []; // We'll handle this in the render where sortedData is available\n\t\t\t\treturn selectedRows;\n\t\t\t},\n\t\t\tclearSelection: (_tabIndex?: number) => {\n\t\t\t\t// Clear global selection instead of per-tab selection\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"SET_GLOBAL_SELECTED_ROW_DATA\",\n\t\t\t\t\tpayload: null,\n\t\t\t\t});\n\t\t\t},\n\t\t\tapplyFilters: (filters: any) => {\n\t\t\t\tdispatch({ type: \"SET_FILTERS\", payload: filters });\n\t\t\t},\n\t\t}),\n\t\t[state.selectedIndex, state.selectedRows, tabPanels, onTabChange]\n\t);\n\n\t// Loading state\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={`aria-tabs-datagrid aria-tabs-datagrid--loading ${className}`}\n\t\t\t\tdata-testid={dataTestId}\n\t\t\t>\n\t\t\t\t{loadingComponent || (\n\t\t\t\t\t<div className=\"aria-tabs-datagrid__loading\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"nhsuk-spinner\"\n\t\t\t\t\t\t\trole=\"status\"\n\t\t\t\t\t\t\taria-label=\"Loading data\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"nhsuk-u-visually-hidden\">Loading...</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Error state\n\tif (error) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={`aria-tabs-datagrid aria-tabs-datagrid--error ${className}`}\n\t\t\t\tdata-testid={dataTestId}\n\t\t\t>\n\t\t\t\t{errorComponent || (\n\t\t\t\t\t<div className=\"aria-tabs-datagrid__error\" role=\"alert\">\n\t\t\t\t\t\t<h3 className=\"nhsuk-error-summary__title\">Error loading data</h3>\n\t\t\t\t\t\t<p>{error}</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Responsive actions placement: attempt inline (right side) if tabs + actions fit in container width\n\tconst containerRef = useRef<HTMLDivElement | null>(null);\n\tconst tabListRef = useRef<HTMLDivElement | null>(null);\n\tconst actionsRef = useRef<HTMLDivElement | null>(null);\n\tconst [placeActionsInline, setPlaceActionsInline] = useState(true); // optimistic: try inline first\n\n\tuseEffect(() => {\n\t\tif (!actions) {\n\t\t\tsetPlaceActionsInline(false);\n\t\t\treturn;\n\t\t}\n\t\t// If there are no tabs visible, always place actions above the table\n\t\tif (tabsHidden || forceActionsAbove) {\n\t\t\tsetPlaceActionsInline(false);\n\t\t\treturn;\n\t\t}\n\t\tfunction recompute() {\n\t\t\tif (!containerRef.current || !tabListRef.current || !actionsRef.current) return;\n\t\t\tconst containerWidth = containerRef.current.clientWidth;\n\t\t\t// Measure sum of tab buttons widths\n\t\t\tconst tabButtons = Array.from(\n\t\t\t\ttabListRef.current.querySelectorAll(':scope > .aria-tabs-datagrid__tab')\n\t\t\t) as HTMLElement[];\n\t\t\tconst tabsWidth = tabButtons.reduce((w, el) => w + el.offsetWidth, 0);\n\t\t\tconst actionsWidth = actionsRef.current.offsetWidth;\n\t\t\tconst estimatedGaps = Math.max(8 * (tabButtons.length - 1), 0);\n\t\t\tconst fits = tabsWidth + estimatedGaps + actionsWidth + actionsMinGap <= containerWidth;\n\t\t\tsetPlaceActionsInline(fits);\n\t\t}\n\t\t// Delay measurement to next frame to allow fonts/layout settle\n\t\tconst raf = requestAnimationFrame(() => recompute());\n\t\tconst ro = new ResizeObserver(() => recompute());\n\t\tif (containerRef.current) ro.observe(containerRef.current);\n\t\tif (tabListRef.current) ro.observe(tabListRef.current);\n\t\treturn () => {\n\t\t\tcancelAnimationFrame(raf);\n\t\t\tro.disconnect();\n\t\t};\n\t}, [actions, actionsMinGap, forceActionsAbove, tabPanels.length, tabsHidden]);\n\n\t// Actions toolbar navigation helpers now that placement state exists\n\tconst actionsContainerRef = actionsRef; // reuse DOM ref\n\tconst getActionElements = useCallback((): HTMLElement[] => {\n\t\tif (!actionsContainerRef.current) return [];\n\t\treturn Array.from(\n\t\t\tactionsContainerRef.current.querySelectorAll<HTMLElement>(\n\t\t\t\t'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n\t\t\t)\n\t\t).filter((el) => !el.hasAttribute(\"disabled\"));\n\t}, []);\n\tconst focusAction = useCallback(\n\t\t(idx: number) => {\n\t\t\tconst els = getActionElements();\n\t\t\tif (!els.length) return;\n\t\t\tconst clamped = Math.max(0, Math.min(idx, els.length - 1));\n\t\t\tels[clamped].focus();\n\t\t\tsetNavigationState((prev) => ({ ...prev, focusArea: \"actions\", focusedActionIndex: clamped }));\n\t\t},\n\t\t[getActionElements]\n\t);\n\tconst focusFirstAction = useCallback(() => focusAction(0), [focusAction]);\n\n\tconst handleTabKeyDown = useCallback(\n\t\t(event: React.KeyboardEvent, index: number) => {\n\t\t\tconst { key } = event;\n\t\t\tconst lastTab = tabPanels.length - 1;\n\t\t\tswitch (key) {\n\t\t\t\tcase \"ArrowUp\": {\n\t\t\t\t\tif (actions && !placeActionsInline) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tfocusFirstAction();\n\t\t\t\t\t}\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"ArrowLeft\": {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst prevIdx = index > 0 ? index - 1 : lastTab;\n\t\t\t\t\thandleTabSelect(prevIdx);\n\t\t\t\t\tscrollTabIntoView(prevIdx);\n\t\t\t\t\ttabRefs.current[prevIdx]?.focus();\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"ArrowRight\": {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tif (index === lastTab && actions && placeActionsInline) {\n\t\t\t\t\t\tfocusFirstAction();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst nextIdx = index < lastTab ? index + 1 : 0;\n\t\t\t\t\thandleTabSelect(nextIdx);\n\t\t\t\t\tscrollTabIntoView(nextIdx);\n\t\t\t\t\ttabRefs.current[nextIdx]?.focus();\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"ArrowDown\": {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusArea: \"headers\",\n\t\t\t\t\t\tfocusedHeaderIndex: 0,\n\t\t\t\t\t\tisGridActive: true,\n\t\t\t\t\t}));\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"Home\": {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\thandleTabSelect(0);\n\t\t\t\t\tscrollTabIntoView(0);\n\t\t\t\t\ttabRefs.current[0]?.focus();\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"End\": {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\thandleTabSelect(lastTab);\n\t\t\t\t\tscrollTabIntoView(lastTab);\n\t\t\t\t\ttabRefs.current[lastTab]?.focus();\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"Enter\":\n\t\t\t\tcase \" \": {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\thandleTabSelect(index);\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"Tab\": {\n\t\t\t\t\tif (!event.shiftKey && index === lastTab && actions && placeActionsInline) {\n\t\t\t\t\t\tfocusFirstAction();\n\t\t\t\t\t}\n\t\t\t\t\tbreak; }\n\t\t\t}\n\t\t},\n\t\t[tabPanels.length, handleTabSelect, scrollTabIntoView, actions, placeActionsInline, focusFirstAction]\n\t);\n\n\tconst handleActionsKeyDown = useCallback((event: React.KeyboardEvent) => {\n\t\tconst { key } = event;\n\t\tconst els = getActionElements();\n\t\tif (!els.length) return;\n\t\tconst currentIndex = els.findIndex((el) => el === document.activeElement);\n\t\tswitch (key) {\n\t\t\tcase 'ArrowLeft': {\n\t\t\t\tif (placeActionsInline) {\n\t\t\t\t\tif (currentIndex > 0) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tfocusAction(currentIndex - 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t// move focus to last tab\n\t\t\t\t\t\tconst last = tabPanels.length - 1;\n\t\t\t\t\t\thandleTabSelect(last);\n\t\t\t\t\t\tscrollTabIntoView(last);\n\t\t\t\t\t\ttabRefs.current[last]?.focus();\n\t\t\t\t\t\tsetNavigationState((p) => ({ ...p, focusArea: 'tabs', focusedTabIndex: last }));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak; }\n\t\t\tcase 'ArrowRight': {\n\t\t\t\tif (placeActionsInline) {\n\t\t\t\t\tif (currentIndex < els.length - 1) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tfocusAction(currentIndex + 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// wrap to first tab\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\thandleTabSelect(0);\n\t\t\t\t\t\tscrollTabIntoView(0);\n\t\t\t\t\t\ttabRefs.current[0]?.focus();\n\t\t\t\t\t\tsetNavigationState((p) => ({ ...p, focusArea: 'tabs', focusedTabIndex: 0 }));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak; }\n\t\t\tcase 'ArrowDown': {\n\t\t\t\t// If actions are above (not inline), move to tabs; else move into headers\n\t\t\t\tif (!placeActionsInline) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// focus currently selected tab\n\t\t\t\t\tconst currentTab = state.selectedIndex;\n\t\t\t\t\ttabRefs.current[currentTab]?.focus();\n\t\t\t\t\tsetNavigationState((p) => ({ ...p, focusArea: 'tabs', focusedTabIndex: currentTab }));\n\t\t\t\t} else {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tsetNavigationState((prev) => ({ ...prev, focusArea: 'headers', focusedHeaderIndex: 0, isGridActive: true }));\n\t\t\t\t}\n\t\t\t\tbreak; }\n\t\t}\n\t}, [getActionElements, placeActionsInline, focusAction, tabPanels.length, handleTabSelect, scrollTabIntoView, state.selectedIndex]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`aria-tabs-datagrid aria-tabs-datagrid--${orientation} ${className}`}\n\t\t\tid={id}\n\t\t\tdata-testid={dataTestId}\n\t\t\tref={containerRef}\n\t\t>\n\t\t\t{/* Optional descriptive text (converted from plain string to element for aria-describedby).\n\t\t    If `ariaDescription` looks like an existing id, use it directly; otherwise render a\n\t\t    visually-hidden element with a generated id and put the text there. */}\n\t\t\t{ariaDescription && !descriptionLooksLikeId && (\n\t\t\t\t<div id={generatedDescriptionId} className=\"nhsuk-u-visually-hidden\">\n\t\t\t\t\t{ariaDescription}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{/* Keyboard Navigation Instructions (Screen Reader Only) */}\n\t\t\t<div\n\t\t\t\tclassName=\"aria-tabs-datagrid__navigation-help sr-only\"\n\t\t\t\tid={navigationHelpId}\n\t\t\t>\n\t\t\t\tKeyboard navigation: Use Tab to move between tabs and grid. Arrow keys\n\t\t\t\tnavigate within tabs and grid cells. Enter activates tabs and sorts\n\t\t\t\tcolumns. Arrow Down from tabs moves to table headers. Arrow Down from\n\t\t\t\theaders moves to table cells. Use Arrow keys to navigate between cells.\n\t\t\t</div>\n\n\t\t\t<SortStatusControl\n\t\t\t\tsortConfig={state.sortConfig || []}\n\t\t\t\tcolumns={tabPanels\n\t\t\t\t\t.flatMap((panel) =>\n\t\t\t\t\t\tpanel.columns.map((col) => ({ key: col.key, label: col.label }))\n\t\t\t\t\t)\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t(col, index, arr) =>\n\t\t\t\t\t\t\tarr.findIndex((c) => c.key === col.key) === index // Remove duplicates\n\t\t\t\t\t)}\n\t\t\t\tonSortChange={(newSortConfig) => {\n\t\t\t\t\tdispatch({ type: \"SET_SORT\", payload: newSortConfig });\n\t\t\t\t}}\n\t\t\t\tariaLabel=\"Data grid sort configuration\"\n\t\t\t/>\n\n\t\t\t{/* Tab List with Manual ARIA Implementation */}\n\t\t\t{/* Actions above when not inline, or when tabs are hidden */}\n\t\t\t{actions && (!placeActionsInline || tabsHidden) && (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above\"\n\t\t\t\t\tref={actionsRef}\n\t\t\t\t\trole=\"toolbar\"\n\t\t\t\t\taria-label=\"Additional actions\"\n\t\t\t\t\tonKeyDown={handleActionsKeyDown}\n\t\t\t\t>\n\t\t\t\t\t{actions}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{!tabsHidden && (\n\t\t\t\t<div className={`aria-tabs-datagrid__tabs-wrapper ${placeActionsInline ? 'aria-tabs-datagrid__tabs-wrapper--inline-actions' : ''}`}> \n\t\t\t\t\t<div\n\t\t\t\t\t\trole=\"tablist\"\n\t\t\t\t\t\taria-label={ariaLabel}\n\t\t\t\t\t\taria-describedby={(() => {\n\t\t\t\t\t\t\tif (ariaDescription) {\n\t\t\t\t\t\t\t\treturn descriptionLooksLikeId ? (ariaDescription as string) : generatedDescriptionId;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn navigationHelpId;\n\t\t\t\t\t\t})()}\n\t\t\t\t\t\taria-orientation={orientation}\n\t\t\t\t\t\tclassName=\"aria-tabs-datagrid__tabs\"\n\t\t\t\t\t\tref={tabListRef}\n\t\t\t\t\t>\n\t\t\t\t\t\t{tabPanels.map((panel, index) => {\n\t\t\t\t\t\t\tconst isSelected = index === state.selectedIndex;\n\t\t\t\t\t\t\tconst isDisabled = panel.disabled || disabled;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tkey={panel.id}\n\t\t\t\t\t\t\t\t\trole=\"tab\"\n\t\t\t\t\t\t\t\t\tid={`tab-${panel.id}`}\n\t\t\t\t\t\t\t\t\taria-controls={`panel-${panel.id}`}\n\t\t\t\t\t\t\t\t\taria-selected={isSelected}\n\t\t\t\t\t\t\t\t\taria-disabled={isDisabled}\n\t\t\t\t\t\t\t\t\ttabIndex={isSelected ? 0 : -1}\n\t\t\t\t\t\t\t\t\tref={(el) => { tabRefs.current[index] = el; }}\n\t\t\t\t\t\t\t\t\tonClick={() => handleTabSelect(index)}\n\t\t\t\t\t\t\t\t\tonKeyDown={(event) => handleTabKeyDown(event, index)}\n\t\t\t\t\t\t\t\t\tdisabled={isDisabled}\n\t\t\t\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t\t\t\t'aria-tabs-datagrid__tab',\n\t\t\t\t\t\t\t\t\t\tisSelected ? 'aria-tabs-datagrid__tab--selected' : '',\n\t\t\t\t\t\t\t\t\t\tisDisabled ? 'aria-tabs-datagrid__tab--disabled' : '',\n\t\t\t\t\t\t\t\t\t].filter(Boolean).join(' ')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span className=\"aria-tabs-datagrid__tab-label\">{panel.label}</span>\n\t\t\t\t\t\t\t\t\t{state.tabLoadingStates[index] && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"aria-tabs-datagrid__tab-loading\" aria-hidden=\"true\">\u23F3</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{state.tabErrors[index] && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"aria-tabs-datagrid__tab-error\" aria-hidden=\"true\">\u26A0\uFE0F</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t{ actions && placeActionsInline && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline\"\n\t\t\t\t\t\t\tref={actionsRef}\n\t\t\t\t\t\t\trole=\"toolbar\"\n\t\t\t\t\t\t\taria-label=\"Additional actions\"\n\t\t\t\t\t\t\tonKeyDown={handleActionsKeyDown}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{actions}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Tab Panels */}\n\t\t\t{tabPanels.map((panel, index) => {\n\t\t\t\tconst isSelected = tabsHidden ? index === 0 : index === state.selectedIndex;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={panel.id}\n\t\t\t\t\t\trole={tabsHidden ? undefined : \"tabpanel\"}\n\t\t\t\t\t\tid={tabsHidden ? undefined as any : `panel-${panel.id}`}\n\t\t\t\t\t\taria-labelledby={tabsHidden ? undefined : `tab-${panel.id}`}\n\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\thidden={!isSelected}\n\t\t\t\t\t\tref={(el) => {\n\t\t\t\t\t\t\tpanelRefs.current[index] = el;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName={`aria-tabs-datagrid__panel ${panel.className || \"\"}`}\n\t\t\t\t\t\tdata-tab-panel={index}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isSelected &&\n\t\t\t\t\t\t\t(() => {\n\t\t\t\t\t\t\t\t// Get filtered data - check if it has healthcare structure\n\t\t\t\t\t\t\t\tconst displayData = panel.data.some(\n\t\t\t\t\t\t\t\t\t(item: any) => \"ews_data\" in item\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t? getFilteredData(panel.data, state.filters)\n\t\t\t\t\t\t\t\t\t: panel.data;\n\n\t\t\t\t\t\t\t\t// Sort the data based on the global sort configuration\n\t\t\t\t\t\t\t\tconst sortedData = useMemo(() => {\n\t\t\t\t\t\t\t\t\tconst sortConfig = state.sortConfig;\n\t\t\t\t\t\t\t\t\tif (!sortConfig || sortConfig.length === 0) return displayData;\n\t\t\t\t\t\t\t\t\tconst comparator = buildMultiComparator(panel.columns as any, sortConfig, NullsPosition.Last, dataConfig?.sortingOptions);\n\t\t\t\t\t\t\t\t\treturn [...displayData].sort(comparator);\n\t\t\t\t\t\t\t\t}, [displayData, state.sortConfig, panel.columns, dataConfig?.sortingOptions]);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<table\n\t\t\t\t\t\t\t\t\t\tclassName=\"nhsuk-table aria-tabs-datagrid__grid\"\n\t\t\t\t\t\t\t\t\t\trole=\"grid\"\n\t\t\t\t\t\t\t\t\t\taria-label={panel.ariaLabel}\n\t\t\t\t\t\t\t\t\t\taria-describedby={\n\t\t\t\t\t\t\t\t\t\t\tpanel.ariaDescription\n\t\t\t\t\t\t\t\t\t\t\t\t? `panel-${panel.id}-description`\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{panel.ariaDescription && (\n\t\t\t\t\t\t\t\t\t\t\t<caption\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"nhsuk-u-visually-hidden\"\n\t\t\t\t\t\t\t\t\t\t\t\tid={`panel-${panel.id}-description`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{panel.ariaDescription}\n\t\t\t\t\t\t\t\t\t\t\t</caption>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<thead className=\"nhsuk-table__head\" role=\"rowgroup\">\n\t\t\t\t\t\t\t\t\t\t\t<tr role=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t\t{panel.columns.map((column, colIndex) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst sortInfo = state.sortConfig?.find(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(config: SortConfig) => config.key === column.key\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst isSorted = !!sortInfo;\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst isFocused =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusArea === \"headers\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusedHeaderIndex === colIndex;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={column.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`sortable-header ${isFocused ? \"sortable-header--focused\" : \"\"} ${isSorted ? \"sortable-header--sorted\" : \"\"}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole=\"columnheader\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={isFocused ? 0 : -1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleSort(index, column.key)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleHeaderKeyDown(e, colIndex)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-sort={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSorted\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? sortInfo?.direction === \"asc\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"ascending\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"descending\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"header-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"header-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{column.label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`sort-indicator-container ${isSorted ? `sort-indicator--${sortInfo?.direction}` : \"\"}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Show sort priority when any sort is configured and this column is sorted */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{state.sortConfig &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.sortConfig.length > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.sortConfig.findIndex(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(config: SortConfig) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfig.key === column.key\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) !== -1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`sort-priority sort-priority--priority-${state.sortConfig.findIndex((config: SortConfig) => config.key === column.key) + 1}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-priority={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.sortConfig.findIndex(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(config: SortConfig) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfig.key === column.key\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) + 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={`Sort priority: ${state.sortConfig.findIndex((config: SortConfig) => config.key === column.key) + 1}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{state.sortConfig.findIndex(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(config: SortConfig) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfig.key === column.key\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) + 1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Show sort arrow only when column is actually sorted */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{isSorted && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`nhsuk-icon sort-arrow sort-arrow--${sortInfo?.direction}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfocusable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path d=\"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t\t<tbody className=\"nhsuk-table__body\" role=\"rowgroup\">\n\t\t\t\t\t\t\t\t\t\t\t{sortedData.map((row, rowIndex) => {\n\t\t\t\t\t\t\t\t\t\t\t\t// Use global row selection instead of per-tab selection\n\t\t\t\t\t\t\t\t\t\t\t\tconst isRowSelected =\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate.globalSelectedRowData &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tisDataEqual(state.globalSelectedRowData, row);\n\t\t\t\t\t\t\t\t\t\t\t\tconst isRowFocused =\n\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusArea === \"cells\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusedRowIndex === rowIndex;\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trole=\"row\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`data-row ${isRowSelected ? \"data-row--selected\" : \"\"} ${isRowFocused ? \"data-row--focused\" : \"\"}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-selected={isRowSelected}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{panel.columns.map((column, colIndex) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Determine raw data value first (before any custom rendering)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst rawValue = row[column.key];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Apply custom renderer precedence: tableRenderer > render\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet value: any;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (column.tableRenderer) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = column.tableRenderer(row);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (column.render) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = column.render(row);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = rawValue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst isCellFocused =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusArea === \"cells\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusedRowIndex === rowIndex &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusedColumnIndex === colIndex;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Handle boolean values with per-column or global rendering; otherwise render ReactNodes directly\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst renderValue = () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// If the final value is explicitly a boolean primitive and no custom renderer produced something else\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Column-level custom renderer always takes priority if provided\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (column.customRenderer) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst rendered = column.customRenderer(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trawValue,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trow\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"data-cell__custom\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-custom-rendered=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{rendered}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttypeof rawValue === \"boolean\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue === rawValue\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Boolean primitive fallback (global booleanRenderer handling)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{renderBooleanIcon(rawValue)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"nhsuk-u-visually-hidden\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{rawValue ? \"Yes\" : \"No\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// If renderer returned a React element / node, return as-is\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tReact.isValidElement(value) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttypeof value !== \"object\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn value ?? \"\";\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// For objects (e.g., custom complex results), let developer control stringification\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn value as any;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={column.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole=\"gridcell\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`data-cell ${isCellFocused ? \"data-cell--focused\" : \"\"}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={isCellFocused ? 0 : -1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Toggle global row selection - if same row clicked, deselect it\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst isCurrentlySelected =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.globalSelectedRowData &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDataEqual(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.globalSelectedRowData,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trow\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst newSelectedRowData =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisCurrentlySelected ? null : row;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"SET_GLOBAL_SELECTED_ROW_DATA\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayload: newSelectedRowData,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleCellKeyDown(e, rowIndex, colIndex)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{renderValue()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})()}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n});\n", "/**\n * Sort Status Control Component\n * \n * Displays and manages sort configuration for data tables with interactive tags\n * allowing users to view, reorder, toggle direction, and remove sorts.\n */\n\nimport React, { useCallback, useMemo, useRef } from 'react';\nimport { Button } from '../../Button/Button';\nimport { Tag } from '../../Tag/Tag';\nimport { TagColor } from '../../Tag/Tag.types';\nimport { SortConfig } from '../AriaDataGridTypes';\nimport './SortStatusControl.scss';\n\n/**\n * Column definition for labeling sorts\n */\nexport interface SortColumn {\n  key: string;\n  label: string;\n}\n\n/**\n * Props for the SortStatusControl component\n */\nexport interface SortStatusControlProps {\n  /** Current sort configuration array */\n  sortConfig: SortConfig[];\n  /** Available columns for labeling sorts */\n  columns: SortColumn[];\n  /** Callback when sort configuration changes */\n  onSortChange: (newSortConfig: SortConfig[]) => void;\n  /** Optional CSS class name for styling */\n  className?: string;\n  /** Optional description text when no sorts are active */\n  emptyDescription?: React.ReactNode;\n  /** Optional description text when sorts are active */\n  activeDescription?: React.ReactNode;\n  /** Show/hide the reset button */\n  showReset?: boolean;\n  /** Show/hide the help text */\n  showHelp?: boolean;\n  /** Disable all interactions */\n  disabled?: boolean;\n  /** ARIA label for the sort status region */\n  ariaLabel?: string;\n  /** Additional ARIA describedby IDs */\n  ariaDescribedBy?: string;\n}\n\nexport const SortStatusControl: React.FC<SortStatusControlProps> = ({\n  sortConfig,\n  columns,\n  onSortChange,\n  className = '',\n  emptyDescription = 'No sorting applied',\n  activeDescription,\n  showReset = true,\n  showHelp = true,\n  disabled = false,\n  ariaLabel = 'Sort configuration',\n  ariaDescribedBy\n}) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Drag and drop state\n  const draggedItem = useRef<string | null>(null);\n  const draggedOverItem = useRef<string | null>(null);\n\n  // Handle drag start\n  const handleDragStart = useCallback((e: React.DragEvent, key: string) => {\n    if (disabled) return;\n    draggedItem.current = key;\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/plain', key);\n  }, [disabled]);\n\n  // Handle drag over\n  const handleDragOver = useCallback((e: React.DragEvent, key: string) => {\n    if (disabled || draggedItem.current === key) return;\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n    draggedOverItem.current = key;\n  }, [disabled]);\n\n  // Handle drop\n  const handleDrop = useCallback((e: React.DragEvent, targetKey: string) => {\n    if (disabled) return;\n    e.preventDefault();\n    \n    const sourceKey = draggedItem.current;\n    if (!sourceKey || sourceKey === targetKey) return;\n\n    const sourceIndex = sortConfig.findIndex(config => config.key === sourceKey);\n    const targetIndex = sortConfig.findIndex(config => config.key === targetKey);\n    \n    if (sourceIndex !== -1 && targetIndex !== -1) {\n      const newConfig = [...sortConfig];\n      const [draggedConfig] = newConfig.splice(sourceIndex, 1);\n      newConfig.splice(targetIndex, 0, draggedConfig);\n      onSortChange(newConfig);\n    }\n\n    // Reset drag state\n    draggedItem.current = null;\n    draggedOverItem.current = null;\n  }, [disabled, sortConfig, onSortChange]);\n\n  // Handle drag end\n  const handleDragEnd = useCallback(() => {\n    draggedItem.current = null;\n    draggedOverItem.current = null;\n  }, []);\n\n  // Helper function to get column label by key\n  const getColumnLabel = useCallback((key: string): string => {\n    const column = columns.find(col => col.key === key);\n    return column ? column.label : key;\n  }, [columns]);\n\n  // Get priority color based on index (matching the sort priority colors)\n  const getPriorityColor = useCallback((index: number): TagColor => {\n    const colorMap: TagColor[] = ['red', 'orange', 'blue', 'aqua-green', 'grey'];\n    return colorMap[index] || 'grey';\n  }, []);\n\n  // Handle direction toggle for a specific sort\n  const handleDirectionToggle = useCallback((sortKey: string) => {\n    if (disabled) return;\n    \n    const updatedConfig = sortConfig.map(config =>\n      config.key === sortKey\n        ? { ...config, direction: config.direction === 'asc' ? 'desc' as const : 'asc' as const }\n        : config\n    );\n    onSortChange(updatedConfig);\n  }, [sortConfig, onSortChange, disabled]);\n\n  // Handle removing a sort\n  const handleRemove = useCallback((sortKey: string) => {\n    if (disabled) return;\n    \n    const filteredConfig = sortConfig.filter(config => config.key !== sortKey);\n    onSortChange(filteredConfig);\n  }, [sortConfig, onSortChange, disabled]);\n\n  // Handle resetting all sorts\n  const handleReset = useCallback(() => {\n    if (disabled) return;\n    onSortChange([]);\n  }, [onSortChange, disabled]);\n\n  // Generate description text\n  const getSortDescription = (): React.ReactNode => {\n    if (sortConfig.length === 0) {\n      return emptyDescription;\n    }\n\n    if (activeDescription) {\n      return activeDescription;\n    }\n\n    const sortDescriptions = sortConfig.map((sort, index) => {\n      const direction = sort.direction === 'asc' ? 'ascending' : 'descending';\n      return `${index + 1}. ${getColumnLabel(sort.key)} (${direction})`;\n    });\n\n    if (sortDescriptions.length === 1) {\n      return `Sorted by: ${sortDescriptions[0]}`;\n    } else if (sortDescriptions.length === 2) {\n      return `Sorted by: ${sortDescriptions.join(' and ')}`;\n    } else {\n      const lastItem = sortDescriptions.pop();\n      return `Sorted by: ${sortDescriptions.join(', ')}, and ${lastItem}`;\n    }\n  };\n\n  // Build ARIA describedby\n  const describedBy = useMemo(() => {\n    const ids = ['sort-description'];\n    if (showHelp) ids.push('sort-help');\n    if (ariaDescribedBy) ids.push(ariaDescribedBy);\n    return ids.join(' ');\n  }, [showHelp, ariaDescribedBy]);\n\n  // If no sorts active, show empty state\n  if (sortConfig.length === 0) {\n    return (\n      <div className={`sort-status-control ${className}`}>\n        {/* Screen reader description */}\n        <div \n          className=\"sort-status-control__description\"\n          id=\"sort-description\"\n          aria-live=\"polite\"\n        >\n          {emptyDescription}\n        </div>\n        \n        {/* Help text */}\n        {showHelp && (\n          <div className=\"sort-status-control__help\" id=\"sort-help\">\n            <small>\n              Drag tags to reorder priority. Click tags or \u2191/\u2193 buttons to toggle ascending/descending. Click \u00D7 to remove a sort.\n            </small>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={`sort-status-control ${className}`}>\n      {/* Screen reader description */}\n      <div \n        className=\"sort-status-control__description sort-status-control__description--active\"\n        id=\"sort-description\"\n        aria-live=\"polite\"\n      >\n        { getSortDescription() }\n      </div>\n\t\t  <div className=\"sort-status-container\">\n\t\t\t{/* Sort tags container */}\n\t\t\t<div \n\t\t\t\tref={containerRef}\n\t\t\t\tclassName=\"sort-status-control__tags\"\n\t\t\t\trole=\"list\"\n\t\t\t\taria-label={ariaLabel}\n\t\t\t\taria-describedby={describedBy}\n\t\t\t>\n\t\t\t\t{ sortConfig.map((config, index) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={config.key}\n\t\t\t\t\t\tclassName=\"sort-status-control__tag-container\"\n\t\t\t\t\t\trole=\"listitem\"\n\t\t\t\t\t\tdraggable={!disabled}\n\t\t\t\t\t\tonDragStart={(e) => handleDragStart(e, config.key)}\n\t\t\t\t\t\tonDragOver={(e) => handleDragOver(e, config.key)}\n\t\t\t\t\t\tonDrop={(e) => handleDrop(e, config.key)}\n\t\t\t\t\t\tonDragEnd={handleDragEnd}\n\t\t\t\t\t\tonClick={() => handleDirectionToggle(config.key)}\n\t\t\t\t\t\tstyle={{ cursor: disabled ? 'default' : 'pointer' }}\n\t\t\t\t\t\ttitle={disabled ? '' : `Click to toggle sort direction. Currently ${config.direction === 'asc' ? 'ascending' : 'descending'}`}\n\t\t\t\t\t\tdata-key={config.key}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\tcolor={getPriorityColor(index)}\n\t\t\t\t\t\t\tclassName=\"sort-status-control__tag\"\n\t\t\t\t\t\t\tclosable\n\t\t\t\t\t\t\tonClose={() => handleRemove(config.key)}\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"sort-status-control__tag-content\">\n\t\t\t\t\t\t\t\t{/* Drag handle */}\n\t\t\t\t\t\t\t\t<div className=\"sort-status-control__drag-handle\" title=\"Drag to reorder\">\n\t\t\t\t\t\t\t\t\t\t\u22EE\u22EE\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* Priority number */}\n\t\t\t\t\t\t\t\t<div className={`sort-status-control__priority-badge sort-priority sort-priority--priority-${index + 1}`}>\n\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* Column label */}\n\t\t\t\t\t\t\t\t<span className=\"sort-status-control__tag-label\">\n\t\t\t\t\t\t\t\t\t\t{getColumnLabel(config.key)}\n\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t{/* Direction toggle button */}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"sort-status-control__direction-button\"\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\te.stopPropagation(); // Prevent tag click handler from firing\n\t\t\t\t\t\t\t\t\t\thandleDirectionToggle(config.key);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t\taria-label={`Toggle sort direction for ${getColumnLabel(config.key)}. Currently ${config.direction === 'asc' ? 'ascending' : 'descending'}`}\n\t\t\t\t\t\t\t\t\ttitle=\"Click to toggle between ascending and descending\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span className={`sort-status-control__direction-icon sort-status-control__direction-icon--${config.direction}`}>\n\t\t\t\t\t\t\t\t\t\t<svg \n\t\t\t\t\t\t\t\t\t\t\tclassName={`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${config.direction}`}\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\" \n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\" \n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\" \n\t\t\t\t\t\t\t\t\t\t\tfocusable=\"false\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path d=\"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z\" />\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tag>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t{/* Reset button */}\n\t\t\t{showReset && (\n\t\t\t\t<div className=\"sort-status-control__actions\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tonClick={handleReset}\n\t\t\t\t\t\t      disabled={disabled}\n\t\t\t\t\t\taria-label=\"Reset all sorting\"\n\t\t\t\t\t\tclassName=\"sort-status-control__reset-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\tClear All Sorts\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)}\n\t  </div>\n\n      {/* Instructions for users */}\n      {showHelp && (\n        <div className=\"sort-status-control__help\" id=\"sort-help\">\n          <small>\n            Drag tags to reorder priority. Click tags or \u2191/\u2193 buttons to toggle ascending/descending. Click \u00D7 to remove a sort.\n          </small>\n        </div>\n      )}\n    </div>\n  );\n};\n", "import * as React from \"react\";\nconst { forwardRef, useCallback, useState } = React;\nimport { ButtonVariant, ButtonSize, ButtonVariantLike, ButtonSizeLike } from \"./Button.types\";\nimport \"./Button.scss\";\nimport { mapButtonProps } from \"../../mapping/button\";\n\n/**\n * Base props for NHS Button component\n */\ninterface BaseButtonProps {\n\t/**\n\t * The variant of the button\n\t * @default 'primary'\n\t */\n\tvariant?: ButtonVariantLike;\n\n\t/**\n\t * The size of the button\n\t * @default 'default'\n\t */\n\tsize?: ButtonSizeLike;\n\n\t/**\n\t * Whether the button should take up the full width of its container\n\t * @default false\n\t */\n\tfullWidth?: boolean;\n\n\t/**\n\t * Additional CSS class names\n\t */\n\tclassName?: string;\n\n\t/**\n\t * Button content\n\t */\n\tchildren: React.ReactNode;\n\n\t/**\n\t * Prevent double click submissions (adds debouncing)\n\t * @default false\n\t */\n\tpreventDoubleClick?: boolean;\n}\n\n/**\n * Props when rendering as button element (no href)\n */\nexport interface ButtonAsButtonProps\n\textends BaseButtonProps,\n\t\tOmit<React.ButtonHTMLAttributes<HTMLButtonElement>, keyof BaseButtonProps> {\n\t/**\n\t * Button type\n\t * @default 'button'\n\t */\n\ttype?: \"button\" | \"submit\" | \"reset\";\n}\n\n/**\n * Props when rendering as anchor element (with href)\n */\nexport interface ButtonAsLinkProps\n\textends BaseButtonProps,\n\t\tOmit<\n\t\t\tReact.AnchorHTMLAttributes<HTMLAnchorElement>,\n\t\t\tkeyof BaseButtonProps | \"role\" | \"type\"\n\t\t> {\n\t/**\n\t * When provided, renders as anchor link instead of button\n\t */\n\thref: string;\n\n\t/**\n\t * Link target\n\t */\n\ttarget?: string;\n\n\t/**\n\t * Link rel attribute\n\t */\n\trel?: string;\n\n\t/**\n\t * Use aria-disabled for anchor elements (no native disabled support)\n\t * Use disabled prop instead for button elements\n\t */\n\t\"aria-disabled\"?: \"true\" | \"false\";\n}\n\n/**\n * NHS Button Component\n *\n * A button component that provides excellent accessibility out of the box\n * while following NHS design guidelines. Based on NHS.UK button patterns.\n *\n * Features:\n * - Full keyboard navigation support (Enter and Space key activation)\n * - Screen reader compatibility\n * - Focus management\n * - Proper ARIA attributes\n * - Double-click prevention\n * - Support for button and link variants\n *\n * @example\n * ```tsx\n * <Button variant=\"primary\" size=\"default\">\n *\t Continue\n * </Button>\n *\n * <Button href=\"/next-page\" variant=\"secondary\">\n *\t Go to next page\n * </Button>\n * ```\n */\n\n// Implementation function\nfunction ButtonComponent(\n\tprops: ButtonAsButtonProps | ButtonAsLinkProps,\n\tref: React.Ref<HTMLButtonElement | HTMLAnchorElement>\n): React.ReactElement {\n\tconst {\n\t\tchildren,\n\t\tvariant = ButtonVariant.Primary,\n\t\tsize = ButtonSize.Default,\n\t\tfullWidth = false,\n\t\tclassName = \"\",\n\t\tpreventDoubleClick = false,\n\t\t...rest\n\t} = props;\n\n\t// State for interactive data attributes (replaces React Aria state management)\n\tconst [isPressed, setIsPressed] = useState(false);\n\tconst [isHovered, setIsHovered] = useState(false);\n\tconst [isFocused, setIsFocused] = useState(false);\n\n\t// Normalised model (future shared with macro generator)\n\tconst model = mapButtonProps({\n\t\tvariant,\n\t\tsize,\n\t\tfullWidth,\n\t\tclassName,\n\t\tpreventDoubleClick,\n\t\thref: \"href\" in rest ? (rest as any).href : undefined,\n\t});\n\n\t// Build data attributes for styling (replaces React Aria data attributes)\n\tconst isDisabled =\n\t\t\"disabled\" in rest ? rest.disabled : rest[\"aria-disabled\"] === \"true\";\n\tconst dataAttributes = {\n\t\t...(isPressed && { \"data-pressed\": \"true\" }),\n\t\t...(isHovered && { \"data-hovered\": \"true\" }),\n\t\t...(isFocused && { \"data-focused\": \"true\" }),\n\t\t...(isDisabled && { \"data-disabled\": \"true\" }),\n\t};\n\n\t// Event handlers for state management\n\tconst handleMouseDown = useCallback(\n\t\t() => !isDisabled && setIsPressed(true),\n\t\t[isDisabled]\n\t);\n\tconst handleMouseUp = useCallback(() => setIsPressed(false), []);\n\tconst handleMouseEnter = useCallback(\n\t\t() => !isDisabled && setIsHovered(true),\n\t\t[isDisabled]\n\t);\n\tconst handleMouseLeave = useCallback(() => {\n\t\tsetIsHovered(false);\n\t\tsetIsPressed(false); // Reset pressed state when leaving\n\t}, []);\n\tconst handleFocus = useCallback(() => setIsFocused(true), []);\n\tconst handleBlur = useCallback(() => setIsFocused(false), []);\n\n\t// Handle keyboard navigation (Space key support for buttons and links with role=\"button\")\n\tconst handleKeyDown = useCallback(\n\t\t(event: React.KeyboardEvent<HTMLElement>) => {\n\t\t\t// Handle space bar activation for button role elements\n\t\t\tif (\n\t\t\t\tevent.key === \" \" &&\n\t\t\t\t(\"href\" in rest ||\n\t\t\t\t\tevent.currentTarget.getAttribute(\"role\") === \"button\")\n\t\t\t) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t(event.currentTarget as HTMLElement).click();\n\t\t\t}\n\t\t},\n\t\t[rest]\n\t);\n\n\t// Handle click with double-click prevention\n\tconst handleClick = useCallback(\n\t\t(event: React.MouseEvent<HTMLElement>) => {\n\t\t\t// Double-click prevention logic (following NHS.UK pattern)\n\t\t\tif (preventDoubleClick) {\n\t\t\t\tconst target = event.currentTarget as HTMLElement;\n\t\t\t\tconst isAlreadyProcessing =\n\t\t\t\t\ttarget.getAttribute(\"data-processing\") === \"true\";\n\n\t\t\t\tif (isAlreadyProcessing) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Mark as processing\n\t\t\t\ttarget.setAttribute(\"data-processing\", \"true\");\n\n\t\t\t\t// Clear processing state after 1 second\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\ttarget.removeAttribute(\"data-processing\");\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t},\n\t\t[preventDoubleClick]\n\t);\n\n\t// Render as anchor link if href is provided\n\tif (\"href\" in rest && rest.href) {\n\t\tconst {\n\t\t\tid,\n\t\t\tstyle,\n\t\t\ttitle,\n\t\t\t[\"aria-label\"]: ariaLabel,\n\t\t\t[\"aria-describedby\"]: ariaDescribedBy,\n\t\t\t[\"aria-labelledby\"]: ariaLabelledBy,\n\t\t\ttabIndex,\n\t\t\t...anchorRest\n\t\t} = rest as ButtonAsLinkProps as any;\n\t\tconst anchorProps = rest as ButtonAsLinkProps;\n\t\treturn (\n\t\t\t<a\n\t\t\t\tref={ref as React.Ref<HTMLAnchorElement>}\n\t\t\t\thref={anchorProps.href}\n\t\t\t\ttarget={anchorProps.target}\n\t\t\t\trel={anchorProps.rel}\n\t\t\t\tclassName={model.classes}\n\t\t\t\trole=\"button\"\n\t\t\t\tdraggable=\"false\"\n\t\t\t\tdata-module=\"nhs-button\"\n\t\t\t\t{...dataAttributes}\n\t\t\t\t{...(preventDoubleClick && { \"data-prevent-double-click\": \"true\" })}\n\t\t\t\t{...anchorRest}\n\t\t\t\tonKeyDown={(event) => {\n\t\t\t\t\tanchorProps.onKeyDown?.(event);\n\t\t\t\t\thandleKeyDown(event);\n\t\t\t\t}}\n\t\t\t\tonClick={(event) => {\n\t\t\t\t\tanchorProps.onClick?.(event);\n\t\t\t\t\thandleClick(event);\n\t\t\t\t}}\n\t\t\t\tonMouseDown={(event) => {\n\t\t\t\t\tanchorProps.onMouseDown?.(event);\n\t\t\t\t\thandleMouseDown();\n\t\t\t\t}}\n\t\t\t\tonMouseUp={(event) => {\n\t\t\t\t\tanchorProps.onMouseUp?.(event);\n\t\t\t\t\thandleMouseUp();\n\t\t\t\t}}\n\t\t\t\tonMouseEnter={(event) => {\n\t\t\t\t\tanchorProps.onMouseEnter?.(event);\n\t\t\t\t\thandleMouseEnter();\n\t\t\t\t}}\n\t\t\t\tonMouseLeave={(event) => {\n\t\t\t\t\tanchorProps.onMouseLeave?.(event);\n\t\t\t\t\thandleMouseLeave();\n\t\t\t\t}}\n\t\t\t\tonFocus={(event) => {\n\t\t\t\t\tanchorProps.onFocus?.(event);\n\t\t\t\t\thandleFocus();\n\t\t\t\t}}\n\t\t\t\tonBlur={(event) => {\n\t\t\t\t\tanchorProps.onBlur?.(event);\n\t\t\t\t\thandleBlur();\n\t\t\t\t}}\n\t\t\t\t// Note: anchor links don't support disabled, but we can simulate it with aria-disabled\n\t\t\t\taria-disabled={anchorProps[\"aria-disabled\"]}\n\t\t\t\t{...(anchorProps[\"aria-disabled\"] === \"true\" && { tabIndex: -1 })}\n\t\t\t\t// Extract relevant props excluding our custom ones\n\t\t\t\tid={id}\n\t\t\t\tstyle={style}\n\t\t\t\ttitle={title}\n\t\t\t\taria-label={ariaLabel}\n\t\t\t\taria-describedby={ariaDescribedBy}\n\t\t\t\taria-labelledby={ariaLabelledBy}\n\t\t\t\ttabIndex={tabIndex}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</a>\n\t\t);\n\t}\n\n\t// Render as button element\n\tconst {\n\t\tid,\n\t\tstyle,\n\t\ttitle,\n\t\t[\"aria-label\"]: ariaLabel,\n\t\t[\"aria-describedby\"]: ariaDescribedBy,\n\t\t[\"aria-labelledby\"]: ariaLabelledBy,\n\t\ttabIndex,\n\t\tname,\n\t\tvalue: valueProp,\n\t\tform,\n\t\tformAction,\n\t\tformEncType,\n\t\tformMethod,\n\t\tformNoValidate,\n\t\tformTarget,\n\t\tautoFocus,\n\t\t...buttonRest\n\t} = rest as any as ButtonAsButtonProps;\n\tconst buttonProps = rest as ButtonAsButtonProps;\n\treturn (\n\t\t<button\n\t\t\tref={ref as React.Ref<HTMLButtonElement>}\n\t\t\ttype={buttonProps.type || \"button\"}\n\t\t\tdisabled={buttonProps.disabled}\n\t\t\tclassName={model.classes}\n\t\t\tdata-module=\"nhs-button\"\n\t\t\t{...dataAttributes}\n\t\t\t{...(preventDoubleClick && { \"data-prevent-double-click\": \"true\" })}\n\t\t\t{...(buttonProps.disabled && { \"aria-disabled\": \"true\" })}\n\t\t\t{...buttonRest}\n\t\t\tonKeyDown={(event) => {\n\t\t\t\tbuttonProps.onKeyDown?.(event);\n\t\t\t\thandleKeyDown(event);\n\t\t\t}}\n\t\t\tonClick={(event) => {\n\t\t\t\tbuttonProps.onClick?.(event);\n\t\t\t\thandleClick(event);\n\t\t\t}}\n\t\t\tonMouseDown={(event) => {\n\t\t\t\tbuttonProps.onMouseDown?.(event);\n\t\t\t\thandleMouseDown();\n\t\t\t}}\n\t\t\tonMouseUp={(event) => {\n\t\t\t\tbuttonProps.onMouseUp?.(event);\n\t\t\t\thandleMouseUp();\n\t\t\t}}\n\t\t\tonMouseEnter={(event) => {\n\t\t\t\tbuttonProps.onMouseEnter?.(event);\n\t\t\t\thandleMouseEnter();\n\t\t\t}}\n\t\t\tonMouseLeave={(event) => {\n\t\t\t\tbuttonProps.onMouseLeave?.(event);\n\t\t\t\thandleMouseLeave();\n\t\t\t}}\n\t\t\tonFocus={(event) => {\n\t\t\t\tbuttonProps.onFocus?.(event);\n\t\t\t\thandleFocus();\n\t\t\t}}\n\t\t\tonBlur={(event) => {\n\t\t\t\tbuttonProps.onBlur?.(event);\n\t\t\t\thandleBlur();\n\t\t\t}}\n\t\t\t// Extract relevant props\n\t\t\tid={id}\n\t\t\tstyle={style}\n\t\t\ttitle={title}\n\t\t\taria-label={ariaLabel}\n\t\t\taria-describedby={ariaDescribedBy}\n\t\t\taria-labelledby={ariaLabelledBy}\n\t\t\ttabIndex={tabIndex}\n\t\t\tname={name}\n\t\t\tvalue={valueProp}\n\t\t\tform={form}\n\t\t\tformAction={formAction}\n\t\t\tformEncType={formEncType}\n\t\t\tformMethod={formMethod}\n\t\t\tformNoValidate={formNoValidate}\n\t\t\tformTarget={formTarget}\n\t\t\tautoFocus={autoFocus}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n}\n\n// Define overloaded function signatures\ninterface ButtonComponent {\n\t(\n\t\tprops: ButtonAsButtonProps & { ref?: React.Ref<HTMLButtonElement> }\n\t): React.ReactElement;\n\t(\n\t\tprops: ButtonAsLinkProps & { ref?: React.Ref<HTMLAnchorElement> }\n\t): React.ReactElement;\n\tdisplayName?: string;\n}\n\nexport const Button = forwardRef(ButtonComponent) as ButtonComponent;\nButton.displayName = \"Button\";\n\n// Export union type for compatibility\nexport type NHSButtonProps = ButtonAsButtonProps | ButtonAsLinkProps;\n\nexport default Button;\n", "// Pure mapping logic for Button. Converts external props to a normalised model\n// used by both React & Nunjucks renderers (future).\n\nexport interface ButtonInputProps {\n  variant?: string; // Accepts ButtonVariant enum values (string)\n  size?: string;    // Accepts ButtonSize enum values (string)\n  fullWidth?: boolean;\n  className?: string;\n  preventDoubleClick?: boolean;\n  href?: string;\n}\n\nexport interface NormalisedButtonModel {\n  tag: 'button' | 'a';\n  classes: string;\n  data: Record<string, string>;\n  attrs: Record<string, any>;\n  preventDoubleClick: boolean;\n}\n\nexport function mapButtonProps(input: ButtonInputProps): NormalisedButtonModel {\n  const variant = input.variant || 'primary';\n  const size = input.size || 'default';\n  const fullWidth = !!input.fullWidth;\n  const classes = [\n    'nhs-aria-button',\n    `nhs-aria-button--${variant}`,\n    size !== 'default' ? `nhs-aria-button--${size}` : '',\n    fullWidth ? 'nhs-aria-button--full-width' : '',\n    input.className || ''\n  ].filter(Boolean).join(' ');\n\n  const tag = input.href ? 'a' : 'button';\n  return {\n    tag,\n    classes,\n    data: { module: 'nhs-button' },\n    attrs: input.href ? { href: input.href, role: 'button' } : { type: 'button' },\n    preventDoubleClick: !!input.preventDoubleClick\n  };\n}\n", "export interface TagInputProps {\n  color?: string;\n  noBorder?: boolean;\n  closable?: boolean;\n  disabled?: boolean;\n  className?: string;\n}\n\nexport interface NormalisedTagModel {\n  classes: string;\n  showClose: boolean;\n  disabled: boolean;\n}\n\nexport function mapTagProps(input: TagInputProps): NormalisedTagModel {\n  const { color = 'default', noBorder, closable, disabled, className } = input;\n  const classes = [\n    'nhsuk-tag',\n    color !== 'default' ? `nhsuk-tag--${color}` : '',\n    noBorder ? 'nhsuk-tag--no-border' : '',\n    closable ? 'nhsuk-tag--closable' : '',\n    disabled ? 'nhsuk-tag--disabled' : '',\n    className || ''\n  ].filter(Boolean).join(' ');\n  return { classes, showClose: !!closable, disabled: !!disabled };\n}\n", "import React from \"react\";\nimport \"./Tag.scss\";\nimport { TagProps } from \"./Tag.types\";\nimport { mapTagProps } from \"../../mapping/tag\";\n\nexport const Tag: React.FC<TagProps> = ({\n\ttext,\n\thtml,\n\tchildren,\n\tcolor = \"default\",\n\tnoBorder = false,\n\tclosable = false,\n\tonClose,\n\tdisabled = false,\n\tclassName,\n\t...props\n}) => {\n\tconst model = mapTagProps({ color, noBorder, closable, disabled, className });\n\n\tconst handleClose = (e: React.MouseEvent) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tif (!disabled && onClose) {\n\t\t\tonClose();\n\t\t}\n\t};\n\n\treturn (\n\t\t<strong className={model.classes} {...props}>\n\t\t\t{/* Content - children take precedence, then html, then text */}\n\t\t\t{children ? (\n\t\t\t\tchildren\n\t\t\t) : html ? (\n\t\t\t\t<span dangerouslySetInnerHTML={{ __html: html }} />\n\t\t\t) : (\n\t\t\t\ttext\n\t\t\t)}\n\n\t\t\t{/* Close button */}\n\t\t\t{closable && (\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName=\"nhsuk-tag__close\"\n\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\taria-label=\"Remove\"\n\t\t\t\t\ttitle=\"Remove\"\n\t\t\t\t>\n\t\t\t\t\t\u00D7\n\t\t\t\t</button>\n\t\t\t)}\n\t\t</strong>\n\t);\n};\n", "import { ColumnDefinition, SortConfig, SortingOptions, NullsPosition, BooleanOrder, SortType } from './AriaDataGridTypes';\n\n/**\n * Sorting utilities for AriaDataGrid and AriaTabsDataGrid.\n *\n * Goals:\n * - Provide consistent, type-aware comparisons (number, boolean, date, string)\n * - Support per-column sort accessors and custom comparators\n * - Centralise multi-key (priority-ordered) sort logic with unified null handling\n * - Keep rendering and keyboard-selection paths aligned\n */\n\n/**\n * Controls where null/undefined values are placed relative to non-null values.\n * 'first'  \u2192 all nulls come before any non-null\n * 'last'   \u2192 all nulls come after any non-null\n */\n// use typed NullsPosition enum from types\n\n/**\n * Convert an arbitrary input to a comparable timestamp (ms since epoch) when possible.\n * Returns null when the input is null/undefined or cannot be parsed as a valid date.\n */\nfunction toComparableDate(value: any): number | null {\n  if (value == null) return null;\n  // Support Date instances directly; otherwise attempt to parse string/number\n  const d = value instanceof Date ? value : new Date(value);\n  const t = d.getTime();\n  return Number.isNaN(t) ? null : t;\n}\n\n/**\n * Using a shared Intl.Collator for natural-ish, locale-aware string comparison with numeric awareness.\n * This sorts \"2\" before \"10\" and avoids re-allocating collators during sort operations.\n */\nconst defaultCollator = new Intl.Collator(undefined, { numeric: true, sensitivity: 'base' });\nfunction defaultStringCompare(a: any, b: any): number {\n  return defaultCollator.compare(String(a), String(b));\n}\n\n/**\n * Resolve the value to use for sorting a given row under a specific column.\n * Precedence:\n * 1) column.sortAccessor(row)\n * 2) column.useRendererForSort \u2192 column.tableRenderer(row) else column.render(row)\n * 3) row[column.key]\n */\nexport function getSortValue(row: any, column: ColumnDefinition): any {\n  if (column.sortAccessor) return column.sortAccessor(row);\n  if (column.useRendererForSort) {\n    if (column.tableRenderer) return column.tableRenderer(row);\n    if (column.render) return column.render(row);\n  }\n  return row[column.key];\n}\n\n/**\n * Compare two already-resolved values for a column.\n *\n * Behaviour/precedence:\n * - If column.sortComparator exists \u2192 use it\n * - Else branch by explicit column.sortType\n * - Else attempt lightweight inference (number/boolean), then string compare fallback\n *\n * Note: Null/undefined handling is intentionally performed by buildMultiComparator,\n * not here, so this function assumes non-null inputs.\n */\nexport function compareValues(aVal: any, bVal: any, column?: ColumnDefinition, opts?: SortingOptions): number {\n  // Custom comparator has ultimate precedence when provided\n  if (column?.sortComparator) {\n    return column.sortComparator(aVal, bVal);\n  }\n\n  const type = column?.sortType;\n  if (type === SortType.Number) {\n    // Treat NaN as null-equivalent here so compareValues stays consistent with null policy handled above\n    const an = Number(aVal);\n    const bn = Number(bVal);\n    const aNaN = Number.isNaN(an);\n    const bNaN = Number.isNaN(bn);\n    if (aNaN && bNaN) return 0;\n    if (aNaN) return 1;\n    if (bNaN) return -1;\n    return an - bn;\n  }\n  if (type === SortType.Boolean) {\n    const ab = Boolean(aVal), bb = Boolean(bVal);\n    const order = column?.booleanOrder ?? opts?.booleanOrder ?? BooleanOrder.FalseFirst;\n    if (ab === bb) return 0;\n    return order === BooleanOrder.TrueFirst ? (ab ? -1 : 1) : (ab ? 1 : -1);\n  }\n  if (type === SortType.Date) {\n    const at = toComparableDate(aVal);\n    const bt = toComparableDate(bVal);\n    if (at == null && bt == null) return 0;\n    if (at == null) return 1;\n    if (bt == null) return -1;\n    return at - bt;\n  }\n\n  // Fallback/inference\n  if (typeof aVal === 'number' && typeof bVal === 'number') {\n    // Handle NaN gracefully as null-equivalent\n    const aNaN = Number.isNaN(aVal);\n    const bNaN = Number.isNaN(bVal);\n    if (aNaN && bNaN) return 0;\n    if (aNaN) return 1;\n    if (bNaN) return -1;\n    return aVal - bVal;\n  }\n  if (typeof aVal === 'boolean' && typeof bVal === 'boolean') {\n    const order = column?.booleanOrder ?? opts?.booleanOrder ?? BooleanOrder.FalseFirst;\n    if (aVal === bVal) return 0;\n    return order === BooleanOrder.TrueFirst ? (aVal ? -1 : 1) : (aVal ? 1 : -1);\n  }\n\n  return defaultStringCompare(aVal, bVal);\n}\n\n/**\n * Builds a stable comparator using column metadata. Handles multi-level SortConfig arrays.\n * nullsPosition controls where null/undefined values should be placed consistently.\n */\nexport function buildMultiComparator(\n  columns: ColumnDefinition[],\n  sortConfig: SortConfig[] | undefined,\n  nullsPosition: NullsPosition = NullsPosition.Last,\n  options?: SortingOptions\n) {\n  // Pre-index columns by key for quick lookups during sort\n  const colMap = new Map(columns.map(c => [c.key, c] as const));\n  const configs = sortConfig ?? [];\n  return (a: any, b: any) => {\n    if (!configs.length) return 0;\n    for (const { key, direction } of configs) {\n      // Determine the relevant column metadata for this key\n      const col = colMap.get(key);\n      // Compute comparable values using accessor/renderer hints when available\n      const aVal = col ? getSortValue(a, col) : a[key];\n      const bVal = col ? getSortValue(b, col) : b[key];\n\n      // Unified null handling (kept here to avoid scattering into compareValues)\n      const aNull = aVal == null;\n      const bNull = bVal == null;\n      if (aNull || bNull) {\n        if (aNull && bNull) continue;\n        const effectiveNulls = col?.nullsPosition ?? options?.nullsPosition ?? nullsPosition;\n        if (effectiveNulls === NullsPosition.First) {\n          return aNull ? -1 : 1;\n        } else {\n          return aNull ? 1 : -1;\n        }\n      }\n\n      // Compare non-null values using type-aware logic and optional custom comparator\n      let cmp = compareValues(aVal, bVal, col, options);\n      // Apply direction (ascending vs descending) and early-exit when a difference is found\n      if (cmp !== 0) return direction === 'asc' ? cmp : -cmp;\n    }\n    // All sort keys exhausted \u2192 consider items equal for ordering purposes.\n    // Optional stable tiebreaker using original indices (if present)\n    if (options?.stable) {\n      const ai = (a as any).__originalIndex__ ?? (a as any).originalIndex ?? undefined;\n      const bi = (b as any).__originalIndex__ ?? (b as any).originalIndex ?? undefined;\n      if (typeof ai === 'number' && typeof bi === 'number') {\n        return ai - bi;\n      }\n    }\n    return 0;\n  };\n}\n\n/**\n * Annotate an array of rows with a non-enumerable original index property\n * so that stable sorting can use it as a tiebreaker when options.stable is true.\n *\n * By default, writes `__originalIndex__` as a non-enumerable, configurable property.\n * You can change the property name (e.g. to `originalIndex`) via `propName`.\n *\n * This returns shallow-cloned objects to avoid mutating the original array items.\n */\nexport function annotateWithOriginalIndex<T extends Record<string, any>>(\n  rows: T[],\n  propName: '__originalIndex__' | 'originalIndex' = '__originalIndex__'\n): (T & { [k in typeof propName]?: number })[] {\n  return rows.map((row, index) => {\n    const clone = { ...row } as T & { [k in typeof propName]?: number };\n    // Define as non-enumerable to avoid affecting JSON/stringify or column iteration\n    Object.defineProperty(clone, propName, {\n      value: index,\n      writable: false,\n      enumerable: false,\n      configurable: true,\n    });\n    return clone;\n  });\n}\n", "import React from 'react';\nimport { CardProps, CardGroupProps, CardGroupItemProps } from './Card.types';\nimport { Heading } from '../Heading';\nimport './Card.scss';\n\n/**\n * NHS Card Component\n * \n * A versatile card component that follows NHS design guidelines.\n * Can be used for content cards, feature cards, and clickable cards.\n * \n * Features:\n * - Multiple variants (default, feature, clickable, secondary, primary)\n * - Accessibility compliant with proper headings and ARIA attributes\n * - Responsive design with design tokens\n * - Support for images, custom content, and interactive states\n * - Full HTML div attributes support including keyboard navigation\n * \n * @example\n * ```tsx\n * // Basic card\n * <Card heading=\"Basic Card\" description=\"This is a basic card\" />\n * \n * // Clickable card\n * <Card \n *   variant=\"clickable\" \n *   heading=\"Clickable Card\" \n *   href=\"/example\"\n *   description=\"This card is clickable\"\n * />\n * \n * // Card with keyboard navigation\n * <Card \n *   heading=\"Navigable Card\"\n *   tabIndex={0}\n *   onKeyDown={handleKeyDown}\n *   ref={cardRef}\n * />\n * ```\n */\nexport const Card = React.forwardRef<HTMLDivElement, CardProps>(({\n  variant = 'default',\n  heading,\n  headingHtml,\n  headingLevel = 2,\n  headingClasses,\n  description,\n  descriptionHtml,\n  href,\n  imgURL,\n  imgAlt,\n  ...htmlAttributes\n}, ref) => {\n  // Build CSS classes  \n  const cardClasses = [\n    'nhsuk-card',\n    variant === 'clickable' && 'nhsuk-card--clickable',\n    variant === 'secondary' && 'nhsuk-card--secondary',\n    variant === 'feature' && 'nhsuk-card--feature',\n    htmlAttributes.className\n  ].filter(Boolean).join(' ');\n\n  const contentClasses = [\n    'nhsuk-card__content',\n    variant === 'feature' && 'nhsuk-card__content--feature',\n    variant === 'primary' && 'nhsuk-card__content--primary',\n    variant === 'secondary' && 'nhsuk-card__content--secondary'\n  ].filter(Boolean).join(' ');\n\n  const headingClassList = [\n    'nhsuk-card__heading',\n    variant === 'feature' && 'nhsuk-card__heading--feature',\n    headingClasses\n  ].filter(Boolean).join(' ');\n\n  // Create heading element\n  const renderHeading = () => {\n    if (headingHtml) {\n      return <div dangerouslySetInnerHTML={{ __html: headingHtml }} />;\n    }\n\n    if (!heading) return null;\n\n    const headingContent = () => {\n      if (href && variant !== 'feature') {\n        return <a className=\"nhsuk-card__link\" href={href}>{heading}</a>;\n      }\n\n      return heading;\n    };\n\n    // Use the new Heading component instead of React.createElement\n    return (\n      <Heading\n        level={headingLevel}\n        className={headingClassList}\n      >\n        {headingContent()}\n      </Heading>\n    );\n  };\n\n  const renderContent = () => {\n    if (htmlAttributes.children) return htmlAttributes.children;\n    if (descriptionHtml) return <div dangerouslySetInnerHTML={{ __html: descriptionHtml }} />;\n    if (description) return <p className=\"nhsuk-card__description\">{description}</p>;\n    return null;\n  };\n\n  const renderPrimaryIcon = () => {\n    if (variant !== 'primary') return null;\n    return (\n      <svg \n        className=\"nhsuk-icon\" \n        xmlns=\"http://www.w3.org/2000/svg\" \n        width=\"27\" \n        height=\"27\" \n        aria-hidden=\"true\" \n        focusable=\"false\"\n      >\n        <circle cx=\"13.333\" cy=\"13.333\" r=\"13.333\" fill=\"\" />\n        <g fill=\"none\" stroke=\"#fff\" strokeLinecap=\"round\" strokeMiterlimit=\"10\" strokeWidth=\"2.667\">\n          <path d=\"M15.438 13l-3.771 3.771\" />\n          <path d=\"M11.667 9.229L15.438 13\" />\n        </g>\n      </svg>\n    );\n  };\n\n  return (\n    <div \n      {...htmlAttributes}\n      className={cardClasses}\n      ref={ref}\n    >\n      {imgURL && (\n        <img \n          className=\"nhsuk-card__img\" \n          src={imgURL} \n          alt={imgAlt || ''} \n        />\n      )}\n      \n      <div className={contentClasses}>\n        {renderHeading()}\n        {renderContent()}\n        {renderPrimaryIcon()}\n      </div>\n    </div>\n  );\n});\n\nCard.displayName = 'Card';\n\n/**\n * NHS Card Group Component\n * \n * Container for multiple cards displayed in a flex layout.\n * Cards in a group will have equal height on desktop.\n */\nexport const CardGroup: React.FC<CardGroupProps> = ({\n  className,\n  children,\n  'data-testid': dataTestId,\n  id,\n}) => {\n  const classes = ['nhsuk-card-group', className].filter(Boolean).join(' ');\n\n  return (\n    <ul \n      className={classes}\n      data-testid={dataTestId}\n      id={id}\n    >\n      {children}\n    </ul>\n  );\n};\n\n/**\n * NHS Card Group Item Component\n * \n * Individual item wrapper for cards within a CardGroup.\n */\nexport const CardGroupItem: React.FC<CardGroupItemProps> = ({\n  className,\n  children,\n  'data-testid': dataTestId,\n}) => {\n  const classes = ['nhsuk-card-group__item', className].filter(Boolean).join(' ');\n\n  return (\n    <li \n      className={classes}\n      data-testid={dataTestId}\n    >\n      {children}\n    </li>\n  );\n};\n", "import React, { createElement } from 'react';\nimport './Heading.scss';\nimport { HeadingProps } from './Heading.types';\nimport { mapHeadingProps } from '../../mapping/heading';\n\n/**\n * A reusable Heading component that abstracts heading level logic and provides consistent styling.\n * Separates semantic meaning (level) from visual appearance (size).\n * \n * If level is not provided, it will be automatically determined from the size prop:\n * - xxl/xl \u2192 h1\n * - l \u2192 h2 \n * - m \u2192 h3\n * - s \u2192 h4\n * - xs \u2192 h5\n * \n * @example\n * <Heading level={1} size=\"xl\">Page Title</Heading>\n * <Heading level={2} size=\"l\" text=\"Section Title\" />\n * <Heading size=\"xl\" text=\"Auto h1 from size\" />\n * <Heading size=\"m\" text=\"Auto h3 from size\" />\n * <Heading level={2} text=\"Custom Spacing\" marginBottom=\"32px\" />\n */\nexport const Heading: React.FC<HeadingProps> = ({ level, className, text, html, children, size, marginBottom, ...rest }) => {\n  const model = mapHeadingProps({ level, size, className, marginBottom });\n  const content = children || (html ? <span dangerouslySetInnerHTML={{ __html: html }} /> : text);\n  return createElement(model.tag, { className: model.classes, style: model.style, ...rest }, content);\n};\n", "export interface HeadingInputProps {\n  level?: 1|2|3|4|5|6;\n  size?: 'xs'|'s'|'m'|'l'|'xl'|'xxl';\n  className?: string;\n  marginBottom?: string;\n}\n\nexport interface NormalisedHeadingModel {\n  tag: 'h1'|'h2'|'h3'|'h4'|'h5'|'h6';\n  classes: string;\n  style: Record<string, any> | undefined;\n}\n\nfunction deriveLevel(size?: string): 1|2|3|4|5|6 {\n  switch(size){\n    case 'xxl':\n    case 'xl': return 1;\n    case 'l': return 2;\n    case 'm': return 3;\n    case 's': return 4;\n    case 'xs': return 5;\n    default: return 2;\n  }\n}\n\nexport function mapHeadingProps(input: HeadingInputProps): NormalisedHeadingModel {\n  const level = input.level ?? deriveLevel(input.size);\n  const classes = [\n    'nhsuk-heading',\n    input.size ? `nhsuk-heading--${input.size}` : '',\n    input.className || ''\n  ].filter(Boolean).join(' ');\n  const style = input.marginBottom ? { marginBottom: input.marginBottom } : undefined;\n  return { tag: `h${level}` as any, classes, style };\n}\n", "import React from 'react';\nimport './Select.scss';\nimport { SelectProps, SelectOptionProps, type SelectComponent } from './Select.types';\nimport classNames from 'classnames';\nimport { mapSelectProps } from '../../mapping/select';\n\n/**\n * Select.Option Component\n * \n * Individual option component for use within Select component\n */\nexport const SelectOption: React.FC<SelectOptionProps> = ({\n  value,\n  disabled = false,\n  selected = false, // deprecated in React 19 warnings: we map to parent defaultValue\n  className,\n  children,\n  ...props\n}) => {\n  const optionClasses = classNames(\n    'nhsuk-select__option',\n    className\n  );\n\n  return (\n    <option\n      className={optionClasses}\n      value={value}\n      disabled={disabled}\n      {...props}\n    >\n      {children}\n    </option>\n  );\n};\n\n/**\n * Select Component\n * \n * Supports two usage patterns:\n * 1. Using options prop: <Select options={[...]} />\n * 2. Using children: <Select><Select.Option>...</Select.Option></Select>\n */\nconst SelectBase: React.FC<SelectProps> = ({\n  id,\n  name,\n  ariaLabel,\n  value,\n  defaultValue,\n  disabled = false,\n  required = false,\n  hasError = false,\n  describedBy,\n  className,\n  multiple = false,\n  size,\n  autoComplete,\n  options,\n  children,\n  onChange,\n  onBlur,\n  onFocus,\n  ...props\n}) => {\n  const { classes: selectClasses } = mapSelectProps({ hasError, className });\n\n  // Render options from the options prop\n  const renderOptionsFromProp = () => {\n    if (!options) return null;\n    return options.map((option, index) => (\n      <option\n        key={`${option.value}-${index}`}\n        value={option.value}\n        disabled={option.disabled}\n        // React 19: avoid selected attribute warning; rely on defaultValue / value\n        data-initial-selected={option.selected || undefined}\n      >\n        {option.text}\n      </option>\n    ));\n  };\n\n  // Derive a defaultValue if none provided but options include a selected flag\n  const derivedDefaultValue = (defaultValue === undefined && value === undefined && options)\n    ? options.find(o => o.selected)?.value\n    : undefined;\n\n  return (\n    <select\n      className={selectClasses}\n      id={id}\n      name={name}\n  aria-label={ariaLabel}\n      value={value}\n      defaultValue={defaultValue !== undefined ? defaultValue : derivedDefaultValue}\n      disabled={disabled}\n      required={required}\n      aria-describedby={describedBy}\n      multiple={multiple}\n      size={size}\n      autoComplete={autoComplete}\n      onChange={onChange}\n      onBlur={onBlur}\n      onFocus={onFocus}\n      {...props}\n    >\n      {/* Render children if provided, otherwise use options prop */}\n      {children || renderOptionsFromProp()}\n    </select>\n  );\n};\n\n// Create the compound component with proper typing\nexport const Select = SelectBase as SelectComponent;\n\n// Attach the Option component to Select for compound component pattern\nSelect.Option = SelectOption;\n", "export interface SelectInputProps {\n  hasError?: boolean;\n  className?: string;\n}\n\nexport interface NormalisedSelectModel {\n  classes: string;\n}\n\nexport function mapSelectProps(input: SelectInputProps): NormalisedSelectModel {\n  const classes = [\n    'nhsuk-select',\n    input.hasError ? 'nhsuk-select--error' : '',\n    input.className || '',\n  ].filter(Boolean).join(' ');\n  return { classes };\n}\n", "import { type CardProps } from '../Card';\nimport { GenericCardConfig, BadgeConfig } from './ResponsiveDataGridGeneric.types';\nimport { AriaDataGridColumn } from '../SortableDataTable/AriaDataGridTypes';\n\n/**\n * Generic card creation function that works with any data type and configuration\n */\nexport function createGenericCard<T = any>(\n  data: T, \n  columns: AriaDataGridColumn[], \n  config: GenericCardConfig<T>\n): CardProps {\n  const {\n    primaryField,\n    secondaryFields = [],\n    badges: badgeConfigs = [],\n    hiddenFields = [],\n    getPriority,\n    getVariant,\n    fieldRenderers = {},\n    classPrefix = 'adaptive-card'\n  } = config;\n\n  // Determine primary content\n  const primaryColumn = columns.find(col => col.key === primaryField);\n  const primaryValue = primaryColumn?.cardRenderer ? \n    primaryColumn.cardRenderer(data) : \n    primaryColumn?.render ? \n    primaryColumn.render(data) : \n    (data as any)[primaryField || 'name'] || 'Untitled';\n\n  // Create generic description from secondary fields\n  const createDescription = () => {\n    const relevantFields = secondaryFields\n      .filter((fieldKey: string) => !hiddenFields.includes(fieldKey) && (data as any)[fieldKey])\n      .slice(0, 3); // Limit to 3 fields for card readability\n\n    return relevantFields.map((fieldKey: string) => {\n      const column = columns.find(col => col.key === fieldKey);\n      const rawValue = (data as any)[fieldKey];\n      \n      // Use custom field renderer if available\n      const value = fieldRenderers[fieldKey] ? \n        fieldRenderers[fieldKey](rawValue, data) :\n        (column?.cardRenderer ? column.cardRenderer(data) : \n         column?.render ? column.render(data) : rawValue);\n      \n      const label = column?.label || fieldKey;\n      return `${label}: ${value}`;\n    }).join(' \u2022 ');\n  };\n\n  // Create badges from configuration\n  const createBadges = (): string | null => {\n    if (badgeConfigs.length === 0) return null;\n    \n    return badgeConfigs\n      .filter((badgeConfig: BadgeConfig) => (data as any)[badgeConfig.fieldKey] !== undefined)\n      .map((badgeConfig: BadgeConfig) => {\n        const rawValue = (data as any)[badgeConfig.fieldKey];\n        const value = badgeConfig.render ? \n          badgeConfig.render(rawValue, data) : \n          rawValue;\n        \n        // Determine badge styling based on field and value\n        const badgeClass = getBadgeClass(badgeConfig, rawValue);\n        \n        return `<span class=\"nhsuk-tag ${badgeClass}\">${value}</span>`;\n      }).join('');\n  };\n\n  // Determine card variant using configuration or fallback logic\n  const determineVariant = (): 'default' | 'feature' | 'clickable' | 'secondary' | 'primary' => {\n    if (getVariant) {\n      return getVariant(data);\n    }\n    \n    // Fallback logic based on priority\n    const priority = getPriority?.(data);\n    if (priority === 'high') return 'primary';\n    return 'default';\n  };\n\n  const badgeElements: string | null = createBadges();\n  const description = createDescription();\n  const enhancedDescription = badgeElements ? \n    `${description}${badgeElements ? `<div class=\"adaptive-card__badges\">${badgeElements}</div>` : ''}` : \n    description;\n\n  return {\n    variant: determineVariant(),\n    heading: String(primaryValue),\n    descriptionHtml: enhancedDescription,\n    className: `adaptive-card ${classPrefix}`,\n    'aria-label': `Record for ${primaryValue}`\n  } as CardProps;\n}\n\n/**\n * Determine badge CSS class based on configuration and value\n */\nfunction getBadgeClass(badgeConfig: BadgeConfig, value: any): string {\n  const baseClass = badgeConfig.className || 'adaptive-card__badge';\n  \n  // Handle special cases for common field types\n  if (badgeConfig.fieldKey === 'ews_score' || badgeConfig.fieldKey.includes('score')) {\n    const score = Number(value);\n    if (score >= 7) return `${baseClass} nhsuk-tag--red`;\n    if (score >= 3) return `${baseClass} nhsuk-tag--yellow`;\n    return `${baseClass} nhsuk-tag--green`;\n  }\n  \n  if (badgeConfig.fieldKey === 'priority') {\n    const priority = String(value).toLowerCase();\n    if (priority === 'high') return `${baseClass} nhsuk-tag--red`;\n    if (priority === 'medium') return `${baseClass} nhsuk-tag--yellow`;\n    if (priority === 'low') return `${baseClass} nhsuk-tag--green`;\n  }\n  \n  if (badgeConfig.fieldKey === 'status') {\n    const status = String(value).toLowerCase();\n    if (status === 'urgent' || status === 'critical') return `${baseClass} nhsuk-tag--red`;\n    if (status === 'pending' || status === 'warning') return `${baseClass} nhsuk-tag--yellow`;\n    if (status === 'completed' || status === 'success') return `${baseClass} nhsuk-tag--green`;\n  }\n  \n  // Apply color from configuration\n  switch (badgeConfig.color) {\n    case 'primary': return `${baseClass} nhsuk-tag--blue`;\n    case 'secondary': return `${baseClass} nhsuk-tag--grey`;\n    case 'success': return `${baseClass} nhsuk-tag--green`;\n    case 'warning': return `${baseClass} nhsuk-tag--yellow`;\n    case 'danger': return `${baseClass} nhsuk-tag--red`;\n    default: return baseClass;\n  }\n}\n\n/**\n * Default generic configuration for common use cases\n */\nexport const defaultGenericCardConfig: GenericCardConfig = {\n  primaryField: 'name',\n  secondaryFields: ['id', 'description', 'status'],\n  badges: [\n    {\n      fieldKey: 'priority',\n      render: (value: any) => value.charAt(0).toUpperCase() + value.slice(1),\n      className: 'adaptive-card__priority-badge'\n    },\n    {\n      fieldKey: 'status',\n      render: (value: any) => value.charAt(0).toUpperCase() + value.slice(1),\n      className: 'adaptive-card__status-badge'\n    }\n  ],\n  hiddenFields: [],\n  getPriority: (data: any) => data.priority || 'medium',\n  getStatus: (data: any) => data.status || 'active',\n  getVariant: (data: any) => {\n    if (data.priority === 'high') return 'primary';\n    return 'default';\n  },\n  fieldRenderers: {},\n  classPrefix: 'adaptive-card--generic'\n};\n", "import React from 'react';\nimport { Button } from '../Button/Button';\nimport { Tag } from '../Tag/Tag';\nimport type { TagColor } from '../Tag/Tag.types';\nimport './HealthcareCardTemplates.scss';\n\n/**\n * Props for healthcare-specific card templates\n */\ninterface HealthcareCardProps {\n  data: any;\n  columns: any[];\n  onSelect?: (data: any) => void;\n  onAction?: (action: string, data: any) => void;\n  variant?: 'patient' | 'appointment' | 'medication' | 'vitals' | 'generic';\n  priority?: 'high' | 'medium' | 'low';\n  status?: 'active' | 'pending' | 'completed' | 'cancelled';\n}\n\n/**\n * Patient Record Card Template\n * Displays all fields from the Patient Overview table view: \n * Patient Name, Age, Ward, Bed, EWS Score, Specialty, Consultant\n */\nexport const PatientCard: React.FC<HealthcareCardProps> = ({\n  data,\n  columns: _columns,\n  onSelect,\n  onAction,\n  priority = 'medium',\n  status = 'active'\n}) => {\n  // Extract fields exactly as they appear in the table (from TCH overview config)\n  const name = data.name;\n  const age = data.age;\n  const ward = data.ward_name;\n  const bed = data.bed_name;\n  const ewsScore = data.ews_score;\n  const specialty = data.speciality; // Note: spelled 'speciality' in the data\n  const consultant = data.consultant;\n\n  return (\n    <div \n      className={`healthcare-card healthcare-card--patient healthcare-card--${priority} healthcare-card--${status}`}\n      onClick={() => onSelect?.(data)}\n      role=\"button\"\n      tabIndex={0}\n      aria-label={`Patient record for ${name}, Age ${age}, Ward ${ward}, Bed ${bed}`}\n    >\n      {/* Card Header with Patient Identity */}\n      <div className=\"healthcare-card__header\">\n        <div className=\"healthcare-card__identity\">\n          <h3 className=\"healthcare-card__patient-name\">{name}</h3>\n          <p className=\"healthcare-card__age-info\">\n            <span className=\"healthcare-card__label\">Age: </span>\n            <span className=\"healthcare-card__value\">{age}</span>\n          </p>\n        </div>\n        \n        {/* EWS Score Badge */}\n        <div className=\"healthcare-card__badges\">\n          {ewsScore !== undefined && (\n            <Tag \n              color={getAlertTagColor(getAlertLevel(ewsScore))}\n              className=\"healthcare-card__alert\"\n            >\n              EWS: {ewsScore}\n            </Tag>\n          )}\n        </div>\n      </div>\n\n      {/* Card Body with All Table Fields */}\n      <div className=\"healthcare-card__body\">\n        <dl className=\"healthcare-card__details\">\n          <div className=\"healthcare-card__detail\">\n            <dt>Ward</dt>\n            <dd>{ward}</dd>\n          </div>\n          \n          <div className=\"healthcare-card__detail\">\n            <dt>Bed</dt>\n            <dd>{bed}</dd>\n          </div>\n          \n          <div className=\"healthcare-card__detail\">\n            <dt>Specialty</dt>\n            <dd>{specialty}</dd>\n          </div>\n          \n          <div className=\"healthcare-card__detail healthcare-card__detail--prominent\">\n            <dt>Consultant</dt>\n            <dd>{consultant}</dd>\n          </div>\n        </dl>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"healthcare-card__actions\">\n        <Button \n          variant=\"secondary\"\n          className=\"healthcare-card__action\"\n          onClick={(e) => {\n            e.stopPropagation();\n            onAction?.('view-notes', data);\n          }}\n        >\n          Notes\n        </Button>\n        <Button \n          variant=\"secondary\"\n          className=\"healthcare-card__action\"\n          onClick={(e) => {\n            e.stopPropagation();\n            onAction?.('view-vitals', data);\n          }}\n        >\n          Vitals\n        </Button>\n        <Button \n          variant=\"primary\"\n          className=\"healthcare-card__action healthcare-card__action--primary\"\n          onClick={(e) => {\n            e.stopPropagation();\n            onAction?.('view-full', data);\n          }}\n        >\n          View Full Record\n        </Button>\n      </div>\n    </div>\n  );\n};\n\n/**\n * Appointment Card Template\n * Optimized for appointment scheduling and time-sensitive information\n */\nexport const AppointmentCard = ({ data, onAction }: HealthcareCardProps) => (\n  <div className=\"healthcare-card healthcare-card--appointment healthcare-card--medium healthcare-card--active\" role=\"article\" tabIndex={0}>\n    <div className=\"healthcare-card__header\">\n      <div className=\"healthcare-card__time-info\">\n        <h3 className=\"healthcare-card__time\">{new Date(data.appointment_time).toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' })}</h3>\n        <p className=\"healthcare-card__type\">{data.appointment_type}</p>\n      </div>\n      <div className=\"healthcare-card__badges\">\n        <Tag \n          color={getStatusTagColor(data.status || 'active')}\n          className=\"healthcare-card__status\"\n        >\n          {(data.status || 'active').charAt(0).toUpperCase() + (data.status || 'active').slice(1)}\n        </Tag>\n        <Tag \n          color=\"grey\"\n          className=\"healthcare-card__duration\"\n        >\n          {data.duration || '30'} min\n        </Tag>\n      </div>\n    </div>\n    <div className=\"healthcare-card__body\">\n      <dl className=\"healthcare-card__details\">\n        <div className=\"healthcare-card__detail\">\n          <dt>Patient</dt>\n          <dd>{data.patient_name}</dd>\n        </div>\n        <div className=\"healthcare-card__detail\">\n          <dt>Consultant</dt>\n          <dd>{data.consultant}</dd>\n        </div>\n        <div className=\"healthcare-card__detail\">\n          <dt>Location</dt>\n          <dd>{data.location}</dd>\n        </div>\n      </dl>\n    </div>\n    <div className=\"healthcare-card__actions\">\n      <Button \n        variant=\"secondary\" \n        size=\"small\"\n        onClick={() => onAction?.('view', data)}\n      >\n        View Details\n      </Button>\n      <Button \n        variant=\"primary\" \n        size=\"small\"\n        onClick={() => onAction?.('edit', data)}\n      >\n        Reschedule\n      </Button>\n    </div>\n  </div>\n);\n\n/**\n * Medication Card Template  \n * Displays all fields from the Medication table view:\n * Medication, Dose, Frequency, Route, Next Due, Prescriber, Patient\n */\nexport const MedicationCard: React.FC<HealthcareCardProps> = ({\n  data,\n  onAction\n}) => (\n  <div className=\"healthcare-card healthcare-card--medication healthcare-card--medium healthcare-card--active\" role=\"article\" tabIndex={0}>\n    <div className=\"healthcare-card__header\">\n      <div className=\"healthcare-card__medication-info\">\n        <h3 className=\"healthcare-card__medication-name\">{data.medication}</h3>\n        <p className=\"healthcare-card__dose\">{data.dose} \u2022 {data.frequency}</p>\n      </div>\n      <div className=\"healthcare-card__badges\">\n        <Tag \n          color=\"blue\"\n          className=\"healthcare-card__route\"\n        >\n          {data.route}\n        </Tag>\n        {data.next_due && (\n          <Tag \n            color=\"red\"\n            className=\"healthcare-card__warning\"\n          >\n            Due: {new Date(data.next_due).toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' })}\n          </Tag>\n        )}\n      </div>\n    </div>\n    <div className=\"healthcare-card__body\">\n      <dl className=\"healthcare-card__details\">\n        <div className=\"healthcare-card__detail\">\n          <dt>Patient</dt>\n          <dd>{data.patient_name}</dd>\n        </div>\n        <div className=\"healthcare-card__detail\">\n          <dt>Prescriber</dt>\n          <dd>{data.prescriber}</dd>\n        </div>\n        {data.allergies && (\n          <div className=\"healthcare-card__detail healthcare-card__detail--urgent\">\n            <dt>Allergies</dt>\n            <dd>{data.allergies}</dd>\n          </div>\n        )}\n      </dl>\n    </div>\n    <div className=\"healthcare-card__actions\">\n      <Button \n        variant=\"secondary\" \n        size=\"small\"\n        onClick={() => onAction?.('view', data)}\n      >\n        View Details\n      </Button>\n      <Button \n        variant=\"primary\" \n        size=\"small\"\n        onClick={() => onAction?.('edit', data)}\n      >\n        Adjust Dose\n      </Button>\n    </div>\n  </div>\n);\n\n/**\n * Vital Signs Card Template\n * Displays all fields from the Vitals table view:\n * Patient Name, EWS Score, Respiratory Rate, SpO2, Temperature, Systolic BP, Heart Rate, AVPU\n */\nexport const VitalsCard: React.FC<HealthcareCardProps> = ({\n  data,\n  onSelect,\n  onAction,\n  priority = 'medium'\n}) => {\n  // Extract fields exactly as they appear in the vitals table\n  const name = data.name;\n  const ewsScore = data.ews_score;\n  const respiratoryRate = data.ews_data?.respiratory_rate_bpm;\n  const sp02 = data.ews_data?.sp02;\n  const temperature = data.ews_data?.temperature;\n  const systolicBp = data.ews_data?.systolic_bp;\n  const heartRate = data.ews_data?.heart_rate;\n  const avpu = data.ews_data?.avpu;\n\n  return (\n    <div \n      className={`healthcare-card healthcare-card--vitals healthcare-card--${priority}`}\n      onClick={() => onSelect?.(data)}\n      role=\"button\"\n      tabIndex={0}\n      aria-label={`Vital signs for ${name}, EWS Score ${ewsScore}`}\n    >\n      <div className=\"healthcare-card__header\">\n        <div className=\"healthcare-card__vitals-summary\">\n          <h3 className=\"healthcare-card__patient-name\">{name}</h3>\n          {ewsScore !== undefined && (\n            <p className={`healthcare-card__ews-score healthcare-card__ews-score--${getEWSLevel(ewsScore)}`}>\n              EWS: {ewsScore}\n            </p>\n          )}\n        </div>\n        \n        <div className=\"healthcare-card__badges\">\n          {avpu && (\n            <Tag \n              color=\"blue\"\n              className=\"healthcare-card__avpu\"\n            >\n              AVPU: {avpu.toUpperCase()}\n            </Tag>\n          )}\n        </div>\n      </div>\n\n      <div className=\"healthcare-card__body\">\n        <div className=\"healthcare-card__vitals-grid\">\n          {respiratoryRate !== undefined && (\n            <div className=\"healthcare-card__vital\">\n              <span className=\"healthcare-card__vital-label\">Respiratory Rate</span>\n              <span className=\"healthcare-card__vital-value\">{respiratoryRate} bpm</span>\n            </div>\n          )}\n          \n          {sp02 !== undefined && (\n            <div className=\"healthcare-card__vital\">\n              <span className=\"healthcare-card__vital-label\">SpO2</span>\n              <span className=\"healthcare-card__vital-value\">{sp02}%</span>\n            </div>\n          )}\n          \n          {temperature !== undefined && (\n            <div className=\"healthcare-card__vital\">\n              <span className=\"healthcare-card__vital-label\">Temperature</span>\n              <span className=\"healthcare-card__vital-value\">{temperature}\u00B0C</span>\n            </div>\n          )}\n          \n          {systolicBp !== undefined && (\n            <div className=\"healthcare-card__vital\">\n              <span className=\"healthcare-card__vital-label\">Systolic BP</span>\n              <span className=\"healthcare-card__vital-value\">{systolicBp}</span>\n            </div>\n          )}\n          \n          {heartRate !== undefined && (\n            <div className=\"healthcare-card__vital\">\n              <span className=\"healthcare-card__vital-label\">Heart Rate</span>\n              <span className=\"healthcare-card__vital-value\">{heartRate} bpm</span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"healthcare-card__actions\">\n        <Button \n          variant=\"secondary\"\n          className=\"healthcare-card__action\"\n          onClick={(e) => {\n            e.stopPropagation();\n            onAction?.('view-trend', data);\n          }}\n        >\n          Trend\n        </Button>\n        <Button \n          variant=\"primary\"\n          className=\"healthcare-card__action healthcare-card__action--primary\"\n          onClick={(e) => {\n            e.stopPropagation();\n            onAction?.('record-new', data);\n          }}\n        >\n          Record New\n        </Button>\n      </div>\n    </div>\n  );\n};\n\n// Utility functions\nfunction getAlertLevel(score: number | string): string {\n  const numScore = typeof score === 'string' ? parseInt(score, 10) : score;\n  if (numScore >= 7) return 'critical';\n  if (numScore >= 5) return 'high';\n  if (numScore >= 3) return 'medium';\n  return 'low';\n}\n\nfunction getEWSLevel(score: number | string): string {\n  return getAlertLevel(score);\n}\n\nfunction getAlertTagColor(alertLevel: string): TagColor {\n  switch (alertLevel) {\n    case 'critical': return 'red';\n    case 'high': return 'orange';\n    case 'medium': return 'yellow';\n    case 'low': return 'grey';\n    default: return 'grey';\n  }\n}\n\nfunction getStatusTagColor(status: string): TagColor {\n  switch (status.toLowerCase()) {\n    case 'active': return 'blue';\n    case 'pending': return 'orange';\n    case 'completed': return 'green';\n    case 'cancelled': return 'grey';\n    default: return 'blue';\n  }\n}\n", "import { DomainPlugin, GenericCardConfig, BadgeConfig, PriorityLevel, StatusType } from './ResponsiveDataGridGeneric.types';\nimport { PatientCard, AppointmentCard, MedicationCard, VitalsCard } from './HealthcareCardTemplates';\n\n/**\n * Healthcare-specific data interface (for type safety)\n */\nexport interface HealthcareData {\n  ews_score?: number;\n  priority?: string;\n  status?: string;\n  nhs_number?: string;\n  patient_name?: string;\n  name?: string;\n  condition?: string;\n  ward?: string;\n  consultant?: string;\n  [key: string]: any;\n}\n\n/**\n * Healthcare-specific badge configurations\n */\nconst healthcareBadges: BadgeConfig[] = [\n  {\n    fieldKey: 'ews_score',\n    render: (value: any) => `EWS: ${value}`,\n    className: 'adaptive-card__ews-badge',\n    color: 'default' // Will be overridden by custom logic\n  },\n  {\n    fieldKey: 'priority',\n    render: (value: any) => value.charAt(0).toUpperCase() + value.slice(1),\n    className: 'adaptive-card__priority-badge'\n  },\n  {\n    fieldKey: 'status',\n    render: (value: any) => value.charAt(0).toUpperCase() + value.slice(1),\n    className: 'adaptive-card__status-badge'\n  }\n];\n\n/**\n * Healthcare priority determination logic\n */\nconst getHealthcarePriority = (data: HealthcareData): PriorityLevel => {\n  if (data.ews_score && Number(data.ews_score) >= 7) return 'high';\n  if (data.ews_score && Number(data.ews_score) >= 3) return 'medium';\n  if (data.priority === 'high' || data.status === 'urgent') return 'high';\n  if (data.priority === 'low') return 'low';\n  return 'medium';\n};\n\n/**\n * Healthcare status determination logic\n */\nconst getHealthcareStatus = (data: HealthcareData): StatusType => {\n  if (data.status) {\n    const status = data.status.toLowerCase();\n    if (['active', 'pending', 'completed', 'cancelled', 'urgent'].includes(status)) {\n      return status as StatusType;\n    }\n  }\n  return 'active';\n};\n\n/**\n * Healthcare card variant determination logic\n */\nconst getHealthcareVariant = (data: HealthcareData): 'default' | 'feature' | 'clickable' | 'secondary' | 'primary' => {\n  const priority = getHealthcarePriority(data);\n  if (priority === 'high') return 'primary';\n  if (data.status === 'urgent') return 'primary';\n  return 'default';\n};\n\n/**\n * Healthcare-specific field renderers\n */\nconst healthcareFieldRenderers: Record<string, (value: any, data: HealthcareData) => string> = {\n  nhs_number: (value: any) => value ? `NHS: ${value}` : '',\n  ews_score: (value: any) => {\n    const score = Number(value);\n    const level = score >= 7 ? 'HIGH' : score >= 3 ? 'MEDIUM' : 'LOW';\n    return `EWS: ${value} (${level})`;\n  },\n  age: (value: any, data: HealthcareData) => {\n    if (data.dob) {\n      const age = new Date().getFullYear() - new Date(data.dob).getFullYear();\n      return `${age}y`;\n    }\n    return value ? `${value}y` : '';\n  }\n};\n\n/**\n * Default healthcare card configuration\n */\nconst defaultHealthcareCardConfig: GenericCardConfig<HealthcareData> = {\n  primaryField: 'name',\n  secondaryFields: ['nhs_number', 'ward', 'condition', 'consultant'],\n  badges: healthcareBadges,\n  hiddenFields: [],\n  getPriority: getHealthcarePriority,\n  getStatus: getHealthcareStatus,\n  getVariant: getHealthcareVariant,\n  fieldRenderers: healthcareFieldRenderers,\n  classPrefix: 'adaptive-card--healthcare'\n};\n\n/**\n * Healthcare card templates\n */\nconst healthcareCardTemplates = {\n  patient: (data: HealthcareData, columns: any[], config: GenericCardConfig<HealthcareData>) => {\n    const priority = config.getPriority?.(data) || 'medium';\n    const rawStatus = config.getStatus?.(data) || 'active';\n    // Map status to allowed values for HealthcareCardProps\n    const status = rawStatus === 'urgent' ? 'active' : rawStatus;\n    return (\n      <PatientCard\n        data={data}\n        columns={columns}\n        priority={priority}\n        status={status as 'active' | 'pending' | 'completed' | 'cancelled'}\n        onSelect={(selectedData: any) => console.log('Patient selected:', selectedData)}\n        onAction={(action: string, actionData: any) => console.log('Patient action:', action, actionData)}\n      />\n    );\n  },\n  appointment: (data: HealthcareData, columns: any[], config: GenericCardConfig<HealthcareData>) => {\n    const rawStatus = config.getStatus?.(data) || 'pending';\n    // Map status to allowed values for HealthcareCardProps\n    const status = rawStatus === 'urgent' ? 'pending' : rawStatus;\n    return (\n      <AppointmentCard\n        data={data}\n        columns={columns}\n        status={status as 'active' | 'pending' | 'completed' | 'cancelled'}\n        onSelect={(selectedData: any) => console.log('Appointment selected:', selectedData)}\n        onAction={(action: string, actionData: any) => console.log('Appointment action:', action, actionData)}\n      />\n    );\n  },\n  medication: (data: HealthcareData, columns: any[], config: GenericCardConfig<HealthcareData>) => {\n    const priority = config.getPriority?.(data) || 'medium';\n    return (\n      <MedicationCard\n        data={data}\n        columns={columns}\n        priority={priority}\n        onSelect={(selectedData: any) => console.log('Medication selected:', selectedData)}\n        onAction={(action: string, actionData: any) => console.log('Medication action:', action, actionData)}\n      />\n    );\n  },\n  vitals: (data: HealthcareData, columns: any[], config: GenericCardConfig<HealthcareData>) => {\n    const priority = config.getPriority?.(data) || 'medium';\n    return (\n      <VitalsCard\n        data={data}\n        columns={columns}\n        priority={priority}\n        onSelect={(selectedData: any) => console.log('Vitals selected:', selectedData)}\n        onAction={(action: string, actionData: any) => console.log('Vitals action:', action, actionData)}\n      />\n    );\n  }\n};\n\n/**\n * Healthcare field type detection\n */\nconst healthcareFieldTypes = {\n  isNHSNumber: (value: any): boolean => {\n    return typeof value === 'string' && /^\\d{3}\\s?\\d{3}\\s?\\d{4}$/.test(value.replace(/\\s/g, ''));\n  },\n  isEWSScore: (value: any): boolean => {\n    return typeof value === 'number' && value >= 0 && value <= 20;\n  },\n  isMedicalDate: (value: any): boolean => {\n    return typeof value === 'string' && !isNaN(Date.parse(value));\n  }\n};\n\n/**\n * Healthcare domain plugin\n */\nexport const healthcarePlugin: DomainPlugin<HealthcareData> = {\n  name: 'healthcare',\n  defaultCardConfig: defaultHealthcareCardConfig,\n  cssImport: './HealthcareCardTemplates.scss',\n  cardTemplates: healthcareCardTemplates,\n  fieldTypes: healthcareFieldTypes\n};\n\n/**\n * Utility function to create healthcare-specific responsive data grid props\n */\nexport const createHealthcareDataGridProps = <T extends HealthcareData>(\n  baseProps: any,\n  customConfig?: Partial<GenericCardConfig<T>>\n) => {\n  return {\n    ...baseProps,\n    domainPlugin: healthcarePlugin,\n    cardConfig: {\n      ...defaultHealthcareCardConfig,\n      ...customConfig\n    }\n  };\n};\n", "import { ResponsiveDataGridProps } from './ResponsiveDataGridTypes';\nimport { GenericCardConfig } from './ResponsiveDataGridGeneric.types';\n\n/**\n * Legacy ResponsiveDataGrid props with backward compatibility\n */\nexport interface LegacyResponsiveDataGridProps extends ResponsiveDataGridProps {\n  /** Legacy card configuration (will be converted to generic format) */\n  cardConfig?: {\n    primaryField?: string;\n    secondaryFields?: string[];\n    badgeFields?: string[];\n    hiddenFields?: string[];\n    cardTemplate?: (data: any, columns: any[]) => React.ReactNode;\n  };\n}\n\n/**\n * Convert legacy cardConfig to generic configuration\n */\nexport function convertLegacyCardConfig(legacyConfig: any): GenericCardConfig {\n  return {\n    primaryField: legacyConfig?.primaryField || 'name',\n    secondaryFields: legacyConfig?.secondaryFields || [],\n    badges: legacyConfig?.badgeFields?.map((field: string) => ({\n      fieldKey: field,\n      className: 'adaptive-card__badge'\n    })) || [],\n    hiddenFields: legacyConfig?.hiddenFields || [],\n    cardTemplate: legacyConfig?.cardTemplate ? \n      (data: any, columns: any[], _config: GenericCardConfig) => \n        legacyConfig.cardTemplate(data, columns) : \n      undefined,\n    classPrefix: 'adaptive-card--generic'\n  };\n}\n\n/**\n * Auto-detect if data is healthcare-related\n */\nexport function isHealthcareData(data: any[]): boolean {\n  if (!data || data.length === 0) return false;\n  \n  const firstItem = data[0];\n  return !!(\n    firstItem.ews_score !== undefined ||\n    firstItem.nhs_number !== undefined ||\n    firstItem.patient_name !== undefined ||\n    firstItem.ward !== undefined ||\n    firstItem.consultant !== undefined\n  );\n}\n", "/**\n * Comprehensive demo showcasing all ResponsiveDataGrid plugins and configurations\n */\n\nimport React, { useState, useMemo } from 'react';\nimport { AriaTabsDataGrid } from '../SortableDataTable/AriaTabsDataGrid';\nimport { Button } from '../Button/Button';\nimport { tchDataConfig } from '../SortableDataTable/AriaTabsDataGridTCH';\nimport { \n  PatientCard,\n  AppointmentCard, \n  MedicationCard,\n  VitalsCard\n} from './HealthcareCardTemplates';\nimport { \n  createPluginDataGrid,\n  type EcommerceProduct,\n  type FinancialTransaction \n} from '../SortableDataTable/AriaTabsDataGridPlugins';\nimport { createGenericTabsConfig } from '../SortableDataTable/AriaTabsDataGridFactory';\nimport type { DataOperationConfig, EWSPatientData } from '../SortableDataTable/AriaTabsDataGridTypes';\n\n// Sample healthcare data\nconst samplePatients: EWSPatientData[] = [\n  {\n    name: 'Sarah Johnson',\n    age: 34,\n    ews_data: {\n      respiratory_rate_bpm: 16,\n      sp02: 98,\n      temperature: 36.8,\n      systolic_bp: 140,\n      heart_rate: 82,\n      avpu: 'alert'\n    },\n    ews_score: 3,\n    ward_name: 'Cardiology',\n    room_name: 'Room A',\n    bed_name: 'A-1',\n    bed_type: 'bed',\n    admin_note: 'Hypertension monitoring',\n    pathway: 'Standard',\n    speciality: 'Cardiology',\n    consultant: 'Dr. Smith',\n    local_authority: 'NHS Trust',\n    early_discharge_notification: 'not_required',\n    needs_based_assessment: false,\n    medically_optimised: true,\n    criteria_to_reside: true,\n    date_medically_optimised: '2024-01-15',\n    anticipated_discharge_date: '2024-01-18',\n    dru_suitability: false,\n    optica_planned_discharge_date: '2024-01-18',\n    optica_date_confirmed: '2024-01-16',\n    dsum: null,\n    medications_tta: 'None required',\n    transport_booking: false,\n    transport_status: 'Pending',\n    transport_date: '',\n    transport_mobility: 'Independent',\n    fast_track: false,\n    initial_therapy_contact: '',\n    equipment: 'None',\n    district_nurse_referral: false\n  },\n  {\n    name: 'Michael Chen',\n    age: 67,\n    ews_data: {\n      respiratory_rate_bpm: 20,\n      sp02: 94,\n      temperature: 37.2,\n      systolic_bp: 160,\n      heart_rate: 95,\n      avpu: 'alert'\n    },\n    ews_score: 7,\n    ward_name: 'Surgery',\n    room_name: 'Room B',\n    bed_name: 'B-3',\n    bed_type: 'bed',\n    admin_note: 'Post-operative monitoring',\n    pathway: 'Surgical',\n    speciality: 'General Surgery',\n    consultant: 'Dr. Johnson',\n    local_authority: 'NHS Trust',\n    early_discharge_notification: 'due',\n    needs_based_assessment: true,\n    medically_optimised: false,\n    criteria_to_reside: true,\n    date_medically_optimised: '2024-01-17',\n    anticipated_discharge_date: '2024-01-20',\n    dru_suitability: true,\n    optica_planned_discharge_date: '2024-01-20',\n    optica_date_confirmed: '2024-01-16',\n    dsum: 'Complex discharge',\n    medications_tta: 'Pain management',\n    transport_booking: true,\n    transport_status: 'In Progress',\n    transport_date: '2024-01-20',\n    transport_mobility: 'Wheelchair',\n    fast_track: false,\n    initial_therapy_contact: '2024-01-17',\n    equipment: 'Walking frame',\n    district_nurse_referral: true\n  },\n  {\n    name: 'Emma Thompson',\n    age: 28,\n    ews_data: {\n      respiratory_rate_bpm: 24,\n      sp02: 90,\n      temperature: 38.5,\n      systolic_bp: 110,\n      heart_rate: 105,\n      avpu: 'alert'\n    },\n    ews_score: 5,\n    ward_name: 'Respiratory',\n    room_name: 'Room C',\n    bed_name: 'C-2',\n    bed_type: 'bed',\n    admin_note: 'Pneumonia treatment',\n    pathway: 'Respiratory',\n    speciality: 'Respiratory Medicine',\n    consultant: 'Dr. Williams',\n    local_authority: 'NHS Trust',\n    early_discharge_notification: 'overdue',\n    needs_based_assessment: true,\n    medically_optimised: false,\n    criteria_to_reside: false,\n    date_medically_optimised: '',\n    anticipated_discharge_date: '2024-01-22',\n    dru_suitability: false,\n    optica_planned_discharge_date: '2024-01-22',\n    optica_date_confirmed: '',\n    dsum: null,\n    medications_tta: 'Antibiotics',\n    transport_booking: false,\n    transport_status: 'Pending',\n    transport_date: '',\n    transport_mobility: 'Independent',\n    fast_track: true,\n    initial_therapy_contact: '',\n    equipment: 'Oxygen',\n    district_nurse_referral: false\n  }\n];\n\n// Sample healthcare appointment data\nconst sampleAppointments = [\n  {\n    id: 'appt-001',\n    appointment_time: '2024-01-18T09:00:00Z',\n    patient_name: 'Sarah Johnson',\n    appointment_type: 'Cardiology Consultation',\n    consultant: 'Dr. Smith',\n    location: 'Clinic Room 3',\n    duration: 30,\n    status: 'pending'\n  },\n  {\n    id: 'appt-002', \n    appointment_time: '2024-01-18T10:30:00Z',\n    patient_name: 'Michael Davis',\n    appointment_type: 'Post-op Follow-up',\n    consultant: 'Dr. Johnson',\n    location: 'Surgery Ward',\n    duration: 15,\n    status: 'active'\n  },\n  {\n    id: 'appt-003',\n    appointment_time: '2024-01-18T14:00:00Z',\n    patient_name: 'Emma Thompson',\n    appointment_type: 'Respiratory Assessment',\n    consultant: 'Dr. Wilson',\n    location: 'Emergency Department',\n    duration: 45,\n    status: 'pending'\n  }\n];\n\n// Sample medication data\nconst sampleMedications = [\n  {\n    id: 'med-001',\n    medication: 'Amlodipine',\n    dose: '5mg',\n    frequency: 'Once daily',\n    route: 'Oral',\n    next_due: '2024-01-18T08:00:00Z',\n    prescriber: 'Dr. Smith',\n    patient_name: 'Sarah Johnson',\n    allergies: null,\n    priority: 'medium'\n  },\n  {\n    id: 'med-002',\n    medication: 'Morphine',\n    dose: '10mg',\n    frequency: 'Every 4 hours',\n    route: 'IV',\n    next_due: '2024-01-18T10:00:00Z',\n    prescriber: 'Dr. Johnson',\n    patient_name: 'Michael Davis',\n    allergies: 'Codeine allergy',\n    priority: 'high'\n  },\n  {\n    id: 'med-003',\n    medication: 'Salbutamol',\n    dose: '2 puffs',\n    frequency: 'As needed',\n    route: 'Inhaled',\n    next_due: '2024-01-18T12:00:00Z',\n    prescriber: 'Dr. Wilson',\n    patient_name: 'Emma Thompson',\n    allergies: null,\n    priority: 'high'\n  }\n];\n\n// Sample vitals data\nconst sampleVitals = [\n  {\n    id: 'vitals-001',\n    patient_name: 'Sarah Johnson',\n    recorded_time: '2024-01-18T07:30:00Z',\n    temperature: 36.8,\n    blood_pressure: '140/90',\n    heart_rate: 82,\n    respiratory_rate: 16,\n    oxygen_saturation: 98,\n    ews_score: 3,\n    priority: 'medium'\n  },\n  {\n    id: 'vitals-002',\n    patient_name: 'Michael Davis',\n    recorded_time: '2024-01-18T08:15:00Z',\n    temperature: 37.2,\n    blood_pressure: '130/85',\n    heart_rate: 98,\n    respiratory_rate: 20,\n    oxygen_saturation: 95,\n    ews_score: 7,\n    priority: 'high'\n  },\n  {\n    id: 'vitals-003',\n    patient_name: 'Emma Thompson',\n    recorded_time: '2024-01-18T09:00:00Z',\n    temperature: 38.5,\n    blood_pressure: '110/70',\n    heart_rate: 105,\n    respiratory_rate: 24,\n    oxygen_saturation: 90,\n    ews_score: 9,\n    priority: 'high'\n  }\n];\n\n// Sample e-commerce data\nconst sampleProducts: EcommerceProduct[] = [\n  {\n    id: 'PROD001',\n    name: 'Wireless Headphones',\n    price: 199.99,\n    discountedPrice: 149.99,\n    inStock: true,\n    category: 'Electronics',\n    rating: 4.5,\n    reviews: 1247,\n    tags: ['wireless', 'bluetooth', 'premium']\n  },\n  {\n    id: 'PROD002',\n    name: 'Running Shoes',\n    price: 129.99,\n    inStock: true,\n    category: 'Sports',\n    rating: 4.8,\n    reviews: 892,\n    tags: ['running', 'athletic', 'comfortable']\n  },\n  {\n    id: 'PROD003',\n    name: 'Coffee Maker',\n    price: 89.99,\n    discountedPrice: 59.99,\n    inStock: false,\n    category: 'Kitchen',\n    rating: 4.2,\n    reviews: 456,\n    tags: ['kitchen', 'coffee', 'appliance']\n  },\n  {\n    id: 'PROD004',\n    name: 'Smartphone Case',\n    price: 24.99,\n    inStock: true,\n    category: 'Accessories',\n    rating: 4.0,\n    reviews: 234,\n    tags: ['protection', 'mobile', 'durable']\n  }\n];\n\n// Sample financial data\nconst sampleTransactions: FinancialTransaction[] = [\n  {\n    id: 'TXN001',\n    date: new Date('2024-01-15'),\n    amount: 2500.00,\n    type: 'credit',\n    category: 'Salary',\n    description: 'Monthly salary payment',\n    accountId: 'ACC001',\n    pending: false,\n    recurring: true\n  },\n  {\n    id: 'TXN002',\n    date: new Date('2024-01-14'),\n    amount: 89.50,\n    type: 'debit',\n    category: 'Groceries',\n    description: 'Supermarket shopping',\n    accountId: 'ACC001',\n    pending: false,\n    recurring: false\n  },\n  {\n    id: 'TXN003',\n    date: new Date('2024-01-16'),\n    amount: 1200.00,\n    type: 'debit',\n    category: 'Rent',\n    description: 'Monthly rent payment',\n    accountId: 'ACC001',\n    pending: true,\n    recurring: true\n  },\n  {\n    id: 'TXN004',\n    date: new Date('2024-01-13'),\n    amount: 150.00,\n    type: 'credit',\n    category: 'Refund',\n    description: 'Product return refund',\n    accountId: 'ACC001',\n    pending: false,\n    recurring: false\n  }\n];\n\n// Sample business data for custom configuration\ninterface BusinessLead {\n  id: string;\n  companyName: string;\n  contactPerson: string;\n  email: string;\n  status: 'new' | 'contacted' | 'qualified' | 'closed-won' | 'closed-lost';\n  value: number;\n  lastContact: Date;\n  source: string;\n  isHotLead: boolean;\n}\n\nconst sampleLeads: BusinessLead[] = [\n  {\n    id: 'LEAD001',\n    companyName: 'Tech Solutions Inc',\n    contactPerson: 'John Smith',\n    email: 'john@techsolutions.com',\n    status: 'qualified',\n    value: 50000,\n    lastContact: new Date('2024-01-15'),\n    source: 'Website',\n    isHotLead: true\n  },\n  {\n    id: 'LEAD002',\n    companyName: 'Global Industries',\n    contactPerson: 'Maria Garcia',\n    email: 'maria@globalind.com',\n    status: 'contacted',\n    value: 25000,\n    lastContact: new Date('2024-01-14'),\n    source: 'Referral',\n    isHotLead: false\n  },\n  {\n    id: 'LEAD003',\n    companyName: 'StartupXYZ',\n    contactPerson: 'Alex Johnson',\n    email: 'alex@startupxyz.com',\n    status: 'new',\n    value: 15000,\n    lastContact: new Date('2024-01-16'),\n    source: 'Cold Call',\n    isHotLead: true\n  }\n];\n\n// Custom business leads configuration\nconst businessLeadsConfig: DataOperationConfig<BusinessLead> = {\n  dataComparator: (a, b) => a.id === b.id,\n  filterFunction: (data, filters) => {\n    if (!filters) return data;\n    return data.filter(lead => {\n      if (filters.status && !filters.status.includes(lead.status)) return false;\n      if (filters.minValue && lead.value < filters.minValue) return false;\n      if (filters.hotLeadsOnly && !lead.isHotLead) return false;\n      return true;\n    });\n  },\n  booleanRenderer: (value) => (\n    <span style={{ \n      color: value ? '#dc2626' : '#6b7280',\n      fontWeight: value ? 'bold' : 'normal'\n    }}>\n      {value ? '\uD83D\uDD25 Hot Lead' : '\uD83D\uDCCB Standard'}\n    </span>\n  ),\n  getDataId: (lead) => `business-${lead.id}`\n};\n\ntype DemoMode = 'healthcare' | 'ecommerce' | 'financial' | 'business';\n\n/**\n * Create healthcare workflow tabs with card templates\n */\nconst createHealthcareWorkflowTabs = () => {\n  return [\n    {\n      id: 'patients',\n      label: 'Patients',\n      data: samplePatients,\n      columns: [\n        { key: 'name', label: 'Patient Name' },\n        { key: 'age', label: 'Age' },\n        { key: 'ward_name', label: 'Ward' },\n        { key: 'ews_score', label: 'EWS Score' }\n      ],\n      ariaLabel: 'Patient Records',\n      ariaDescription: 'Healthcare patient management with EWS monitoring',\n      cardTemplate: (data: any, columns: any[]) => (\n        <PatientCard \n          data={data} \n          columns={columns}\n          onSelect={(patient) => console.log('Selected patient:', patient)}\n          onAction={(action, patient) => console.log('Patient action:', action, patient)}\n          priority={data.ews_score >= 7 ? 'high' : data.ews_score >= 3 ? 'medium' : 'low'}\n        />\n      )\n    },\n    {\n      id: 'appointments',\n      label: 'Appointments',\n      data: sampleAppointments,\n      columns: [\n        { key: 'appointment_time', label: 'Time' },\n        { key: 'patient_name', label: 'Patient' },\n        { key: 'appointment_type', label: 'Type' },\n        { key: 'consultant', label: 'Consultant' }\n      ],\n      ariaLabel: 'Patient Appointments',\n      ariaDescription: 'Scheduled appointments and consultations',\n      cardTemplate: (data: any, columns: any[]) => (\n        <AppointmentCard \n          data={data} \n          columns={columns}\n          onSelect={(appointment) => console.log('Selected appointment:', appointment)}\n          onAction={(action, appointment) => console.log('Appointment action:', action, appointment)}\n          status={data.status}\n        />\n      )\n    },\n    {\n      id: 'medications',\n      label: 'Medications',\n      data: sampleMedications,\n      columns: [\n        { key: 'medication', label: 'Medication' },\n        { key: 'dose', label: 'Dose' },\n        { key: 'frequency', label: 'Frequency' },\n        { key: 'next_due', label: 'Next Due' }\n      ],\n      ariaLabel: 'Patient Medications',\n      ariaDescription: 'Medication administration and scheduling',\n      cardTemplate: (data: any, columns: any[]) => (\n        <MedicationCard \n          data={data} \n          columns={columns}\n          onSelect={(medication) => console.log('Selected medication:', medication)}\n          onAction={(action, medication) => console.log('Medication action:', action, medication)}\n          priority={data.priority}\n        />\n      )\n    },\n    {\n      id: 'vitals',\n      label: 'Vital Signs',\n      data: sampleVitals,\n      columns: [\n        { key: 'patient_name', label: 'Patient' },\n        { key: 'recorded_time', label: 'Time' },\n        { key: 'temperature', label: 'Temperature' },\n        { key: 'ews_score', label: 'EWS Score' }\n      ],\n      ariaLabel: 'Patient Vital Signs',\n      ariaDescription: 'Patient vital signs monitoring and EWS scores',\n      cardTemplate: (data: any, columns: any[]) => (\n        <VitalsCard \n          data={data} \n          columns={columns}\n          onSelect={(vitals) => console.log('Selected vitals:', vitals)}\n          onAction={(action, vitals) => console.log('Vitals action:', action, vitals)}\n          priority={data.ews_score >= 7 ? 'high' : data.ews_score >= 3 ? 'medium' : 'low'}\n        />\n      )\n    }\n  ];\n};\n\nexport const AriaTabsDataGridComprehensiveDemo: React.FC = () => {\n  const [demoMode, setDemoMode] = useState<DemoMode>('healthcare');\n\n  // Memoized configurations for each demo mode\n  const demoConfigurations = useMemo(() => ({\n    healthcare: {\n      title: 'Healthcare Workflow Management',\n      description: 'Comprehensive healthcare workflow with patient cards, appointments, medications, and vitals',\n      dataConfig: tchDataConfig,\n      tabPanels: createHealthcareWorkflowTabs(),\n      data: samplePatients\n    },\n    ecommerce: {\n      title: 'E-commerce Product Catalog',\n      description: 'Product management with pricing and inventory',\n      ...createPluginDataGrid('ecommerce', sampleProducts),\n      data: sampleProducts\n    },\n    financial: {\n      title: 'Financial Transaction Dashboard',\n      description: 'Banking and financial data management',\n      ...createPluginDataGrid('financial', sampleTransactions),\n      data: sampleTransactions\n    },\n    business: {\n      title: 'Sales Lead Management',\n      description: 'Custom CRM configuration with business logic',\n      dataConfig: businessLeadsConfig,\n      tabPanels: createGenericTabsConfig(sampleLeads, [\n        {\n          id: 'all-leads',\n          label: 'All Leads',\n          columns: [\n            { key: 'companyName', label: 'Company' },\n            { key: 'contactPerson', label: 'Contact' },\n            { key: 'status', label: 'Status' },\n            { \n              key: 'value', \n              label: 'Value',\n              render: (lead) => `$${lead.value.toLocaleString()}`\n            },\n            { key: 'isHotLead', label: 'Priority' }\n          ],\n          ariaLabel: 'All Sales Leads Grid',\n          ariaDescription: 'Complete sales pipeline with lead information'\n        },\n        {\n          id: 'hot-leads',\n          label: 'Hot Leads',\n          columns: [\n            { key: 'companyName', label: 'Company' },\n            { key: 'contactPerson', label: 'Contact' },\n            { \n              key: 'value', \n              label: 'Value',\n              render: (lead) => `$${lead.value.toLocaleString()}`\n            },\n            { \n              key: 'lastContact', \n              label: 'Last Contact',\n              render: (lead) => lead.lastContact.toLocaleDateString()\n            }\n          ],\n          filter: (leads) => leads.filter(lead => lead.isHotLead),\n          sortConfig: [{ key: 'value', direction: 'desc' }],\n          ariaLabel: 'Hot Leads Grid',\n          ariaDescription: 'High-priority leads requiring immediate attention'\n        },\n        {\n          id: 'pipeline',\n          label: 'Active Pipeline',\n          columns: [\n            { key: 'companyName', label: 'Company' },\n            { key: 'status', label: 'Status' },\n            { \n              key: 'value', \n              label: 'Value',\n              render: (lead) => `$${lead.value.toLocaleString()}`\n            },\n            { key: 'source', label: 'Source' }\n          ],\n          filter: (leads) => leads.filter(lead => \n            ['contacted', 'qualified'].includes(lead.status)\n          ),\n          ariaLabel: 'Active Pipeline Grid',\n          ariaDescription: 'Leads currently in the sales pipeline'\n        }\n      ]),\n      data: sampleLeads\n    }\n  }), []);\n\n  const currentConfig = demoConfigurations[demoMode];\n\n  return (\n    <div style={{ padding: '2rem', maxWidth: '1200px', margin: '0 auto' }}>\n      <div style={{ marginBottom: '2rem' }}>\n        <h1 style={{ \n          fontSize: '2rem', \n          fontWeight: 'bold', \n          marginBottom: '1rem',\n          color: '#1f2937'\n        }}>\n          AriaTabsDataGrid - Comprehensive Demo\n        </h1>\n        \n        <p style={{ \n          fontSize: '1.1rem', \n          color: '#6b7280', \n          marginBottom: '2rem',\n          lineHeight: '1.6'\n        }}>\n          This demo showcases the component's versatility across different domains:\n          healthcare, e-commerce, financial services, and custom business applications.\n          Each configuration demonstrates domain-specific data operations, custom renderers,\n          and specialized filtering logic.\n        </p>\n\n        {/* Mode Selection */}\n        <div style={{ \n          display: 'flex', \n          gap: '1rem', \n          marginBottom: '2rem',\n          flexWrap: 'wrap'\n        }}>\n          {(Object.keys(demoConfigurations) as DemoMode[]).map((mode) => (\n            <Button\n              key={mode}\n              variant={demoMode === mode ? 'primary' : 'secondary'}\n              onClick={() => setDemoMode(mode)}\n              style={{\n                textTransform: 'capitalize'\n              }}\n            >\n              {mode}\n            </Button>\n          ))}\n        </div>\n\n        {/* Current Configuration Info */}\n        <div style={{\n          backgroundColor: '#f8fafc',\n          border: '1px solid #e2e8f0',\n          borderRadius: '0.5rem',\n          padding: '1.5rem',\n          marginBottom: '2rem'\n        }}>\n          <h2 style={{ \n            fontSize: '1.5rem', \n            fontWeight: '600', \n            marginBottom: '0.5rem',\n            color: '#1e293b'\n          }}>\n            {currentConfig.title}\n          </h2>\n          <p style={{ \n            color: '#64748b', \n            marginBottom: '1rem' \n          }}>\n            {currentConfig.description}\n          </p>\n          \n          <div style={{ \n            display: 'grid', \n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', \n            gap: '1rem',\n            fontSize: '0.9rem'\n          }}>\n            <div>\n              <strong>Data Records:</strong> {currentConfig.data.length}\n            </div>\n            <div>\n              <strong>Tab Panels:</strong> {currentConfig.tabPanels.length}\n            </div>\n            <div>\n              <strong>Features:</strong> {\n                [\n                  'Row Selection',\n                  'Custom Filtering',\n                  'Domain-Specific Renderers',\n                  'Keyboard Navigation',\n                  'ARIA Compliance'\n                ].join(', ')\n              }\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Data Grid Component */}\n      <AriaTabsDataGrid\n        dataConfig={currentConfig.dataConfig}\n        tabPanels={currentConfig.tabPanels}\n        ariaLabel={`${currentConfig.title} Data Grid`}\n        ariaDescription={`Interactive data grid for ${currentConfig.description.toLowerCase()}`}\n      />\n      \n      {/* Technical Implementation Notes */}\n      <div style={{\n        marginTop: '3rem',\n        padding: '1.5rem',\n        backgroundColor: '#f1f5f9',\n        borderRadius: '0.5rem',\n        border: '1px solid #cbd5e1'\n      }}>\n        <h3 style={{ \n          fontSize: '1.25rem', \n          fontWeight: '600', \n          marginBottom: '1rem',\n          color: '#334155'\n        }}>\n          Implementation Details\n        </h3>\n        \n        <div style={{ display: 'grid', gap: '1rem', fontSize: '0.9rem' }}>\n          <div>\n            <strong>Current Mode:</strong> {demoMode} configuration\n          </div>\n          <div>\n            <strong>Data Operations:</strong> Custom comparator, filter function, and boolean renderer\n          </div>\n          <div>\n            <strong>Architecture:</strong> Generic core with domain-specific plugins and factory helpers\n          </div>\n          <div>\n            <strong>State Management:</strong> Global row selection with data-object persistence\n          </div>\n          <div>\n            <strong>Accessibility:</strong> Full ARIA support with dynamic labels and descriptions\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Export alias for new naming convention\nexport const ResponsiveDataGridDemo = AriaTabsDataGridComprehensiveDemo;\n", "import React from 'react';\n\nexport interface IconConfig {\n\tvalue: string | boolean;\n\ticon: React.ReactNode;\n}\n\nexport const bedIcon: IconConfig[] = [\n\t{\n\t\tvalue: \"bed\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<rect x=\"5\" y=\"10\" width=\"14\" height=\"5\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<rect x=\"5\" y=\"7\" width=\"5\" height=\"3\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<line x1=\"5\" y1=\"15\" x2=\"5\" y2=\"19\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"19\" y1=\"15\" x2=\"19\" y2=\"19\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"cot\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<rect x=\"5\" y=\"7\" width=\"14\" height=\"10\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"7\" y1=\"7\" x2=\"7\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"17\" y1=\"7\" x2=\"17\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"swap space\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<line x1=\"7\" y1=\"8\" x2=\"17\" y2=\"8\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<polyline points=\"13 4 17 8 13 12\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<line x1=\"17\" y1=\"16\" x2=\"7\" y2=\"16\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<polyline points=\"11 20 7 16 11 12\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"trolley\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<rect x=\"5\" y=\"7\" width=\"14\" height=\"5\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"8\" y1=\"12\" x2=\"8\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"16\" y1=\"12\" x2=\"16\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<circle cx=\"8\" cy=\"19\" r=\"1.5\" fill=\"#000\"/>\n\t\t\t\t<circle cx=\"16\" cy=\"19\" r=\"1.5\" fill=\"#000\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n];\n\nexport const completeIcon: IconConfig[] = [\n\t{\n\t\tvalue: \"due\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<rect x=\"3\" y=\"4\" width=\"18\" height=\"16\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<line x1=\"3\" y1=\"9\" x2=\"21\" y2=\"9\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"7\" y1=\"13\" x2=\"7\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"12\" y1=\"13\" x2=\"12\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"17\" y1=\"13\" x2=\"17\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"overdue\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<path d=\"M12 2L2 20H22L12 2Z\" stroke=\"#ffbf47\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"14\" stroke=\"#ffb81c\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<circle cx=\"12\" cy=\"17\" r=\"1\" fill=\"#ffb81c\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"complete\",\n\t\ticon: (\n\t\t\t<svg className=\"nhsuk-icon__tick\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<path strokeWidth=\"4\" strokeLinecap=\"round\" d=\"M18.4 7.8l-8.5 8.4L5.6 12\" stroke=\"#007f3b\"></path>\n\t\t\t</svg>\n\t\t),\n\t},\n];\n\nexport const transportStatusIcon: IconConfig[] = [\n\t{\n\t\tvalue: \"Confirmed\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<rect x=\"3\" y=\"4\" width=\"18\" height=\"16\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<line x1=\"3\" y1=\"9\" x2=\"21\" y2=\"9\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"7\" y1=\"13\" x2=\"7\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"12\" y1=\"13\" x2=\"12\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"17\" y1=\"13\" x2=\"17\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"Pending\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<g id=\"pending-group\">\n\t\t\t\t\t<circle id=\"pending-oval\" stroke=\"none\" fill=\"rgb(255, 184, 28)\" cx=\"27\" cy=\"50\" r=\"6\" />\n\t\t\t\t\t<circle id=\"pending-oval2\" stroke=\"none\" fill=\"rgb(255, 184, 28)\" cx=\"50.5\" cy=\"50\" r=\"6\" />\n\t\t\t\t\t<circle id=\"pending-oval3\" stroke=\"none\" fill=\"rgb(255, 184, 28)\" cx=\"73.5\" cy=\"50\" r=\"6\" />\n\t\t\t\t</g>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"In Progress\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<rect x=\"3\" y=\"8\" width=\"16\" height=\"8\" stroke=\"#007f3b\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<rect x=\"16\" y=\"10\" width=\"5\" height=\"6\" stroke=\"#007f3b\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<circle cx=\"7\" cy=\"18\" r=\"2\" fill=\"#007f3b\"/>\n\t\t\t\t<circle cx=\"17\" cy=\"18\" r=\"2\" fill=\"#007f3b\"/>\n\t\t\t\t<line x1=\"6\" y1=\"12\" x2=\"10\" y2=\"12\" stroke=\"#007f3b\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"8\" y1=\"10\" x2=\"8\" y2=\"14\" stroke=\"#007f3b\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"10\" y1=\"6\" x2=\"14\" y2=\"6\" stroke=\"#007f3b\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n];\n\nexport const booleanIcon: IconConfig[] = [\n\t{\n\t\tvalue: true,\n\t\ticon: (\n\t\t\t<svg className=\"nhsuk-icon nhsuk-icon__tick\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<path strokeWidth=\"4\" strokeLinecap=\"round\" d=\"M18.4 7.8l-8.5 8.4L5.6 12\" stroke=\"#007f3b\"></path>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: false,\n\t\ticon: (\n\t\t\t<svg className=\"nhsuk-icon nhsuk-icon__cross\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<path d=\"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z\" fill=\"#d5281b\"></path>\n\t\t\t\t<path d=\"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z\" fill=\"#d5281b\"></path>\n\t\t\t</svg>\n\t\t),\n\t},\n];\n", "import { \n  EWSPatientData,\n  HealthcareViewConfig,\n  HealthcareFilter,\n  TabPanelConfig\n} from './AriaTabsDataGridTypes';\nimport React from 'react';\nimport { booleanIcon } from './icons';\n\n/**\n * Healthcare-specific data comparison function\n * Uses name + bed_name as unique identifier for healthcare data\n */\nexport const healthcareDataComparator = (data1: EWSPatientData, data2: EWSPatientData): boolean => {\n  if (!data1 || !data2) return data1 === data2;\n  \n  // For healthcare data with name and bed_name\n  if (data1.name && data1.bed_name && data2.name && data2.bed_name) {\n    return data1.name === data2.name && data1.bed_name === data2.bed_name;\n  }\n  \n  // Fallback to JSON comparison\n  return JSON.stringify(data1) === JSON.stringify(data2);\n};\n\n/**\n * Healthcare-specific data filtering function\n */\nexport const healthcareFilterFunction = (data: EWSPatientData[], filters?: HealthcareFilter): EWSPatientData[] => {\n  if (!filters) return data;\n\n  return data.filter(patient => {\n    // EWS Score range filter\n    if (filters.ewsScoreRange) {\n      const [min, max] = filters.ewsScoreRange;\n      if (patient.ews_score < min || patient.ews_score > max) return false;\n    }\n\n    // Ward filter\n    if (filters.wards && filters.wards.length > 0) {\n      if (!filters.wards.includes(patient.ward_name)) return false;\n    }\n\n    // Specialty filter\n    if (filters.specialties && filters.specialties.length > 0) {\n      if (!filters.specialties.includes(patient.speciality)) return false;\n    }\n\n    // Discharge status filter\n    if (filters.dischargeStatuses && filters.dischargeStatuses.length > 0) {\n      if (!filters.dischargeStatuses.includes(patient.early_discharge_notification)) return false;\n    }\n\n    // AVPU filter\n    if (filters.avpuLevels && filters.avpuLevels.length > 0) {\n      if (!filters.avpuLevels.includes(patient.ews_data.avpu)) return false;\n    }\n\n    // Medical optimization filter\n    if (filters.medicallyOptimised !== null && filters.medicallyOptimised !== undefined) {\n      if (patient.medically_optimised !== filters.medicallyOptimised) return false;\n    }\n\n    // Fast track filter\n    if (filters.fastTrack !== null && filters.fastTrack !== undefined) {\n      if (patient.fast_track !== filters.fastTrack) return false;\n    }\n\n    return true;\n  });\n};\n\n/**\n * NHS-compliant boolean rendering function with SVG icons\n */\nexport const nhsBooleanRenderer = (value: boolean | string): React.ReactNode => {\n  // For boolean values, use the imported NHS SVG icons\n  if (typeof value === 'boolean') {\n    const iconEntry = booleanIcon.find(icon => icon.value === value);\n    return iconEntry ? iconEntry.icon : null;\n  }\n\n  // Handle other value types (alert, voice, pain, unresponsive)\n  const iconEntry = booleanIcon.find(icon => icon.value === value);\n  return iconEntry ? iconEntry.icon : String(value);\n};\n\n/**\n * Healthcare-specific unique ID function\n */\nexport const healthcareGetDataId = (data: EWSPatientData): string => {\n  return `${data.name}-${data.bed_name}`;\n};\n\n/**\n * Healthcare column configurations for EWS patient data\n */\nconst createHealthcareViewConfig = (): HealthcareViewConfig => ({\n  overview: [\n    { key: 'name', label: 'Patient Name' },\n    { key: 'age', label: 'Age' },\n    { key: 'ward_name', label: 'Ward' },\n    { key: 'bed_name', label: 'Bed' },\n    { key: 'ews_score', label: 'EWS Score' },\n    { key: 'speciality', label: 'Specialty' },\n    { key: 'consultant', label: 'Consultant' }\n  ],\n  vitals: [\n    { key: 'name', label: 'Patient Name' },\n    { key: 'ews_score', label: 'EWS Score' },\n    { key: 'respiratory_rate_bpm', label: 'Respiratory Rate', render: (data: EWSPatientData) => data.ews_data.respiratory_rate_bpm },\n    { key: 'sp02', label: 'SpO2 %', render: (data: EWSPatientData) => data.ews_data.sp02 },\n    { key: 'temperature', label: 'Temperature \u00B0C', render: (data: EWSPatientData) => data.ews_data.temperature },\n    { key: 'systolic_bp', label: 'Systolic BP', render: (data: EWSPatientData) => data.ews_data.systolic_bp },\n    { key: 'heart_rate', label: 'Heart Rate', render: (data: EWSPatientData) => data.ews_data.heart_rate },\n    { key: 'avpu', label: 'AVPU', render: (data: EWSPatientData) => data.ews_data.avpu.toUpperCase() }\n  ],\n  discharge: [\n    { key: 'name', label: 'Patient Name' },\n    { key: 'anticipated_discharge_date', label: 'Anticipated Discharge', render: (data: EWSPatientData) => new Date(data.anticipated_discharge_date).toLocaleDateString() },\n    { key: 'early_discharge_notification', label: 'Discharge Status' },\n    { key: 'medically_optimised', label: 'Medically Optimised' },\n    { key: 'criteria_to_reside', label: 'Criteria to Reside' },\n    { key: 'fast_track', label: 'Fast Track' },\n    { key: 'transport_status', label: 'Transport Status' },\n    { key: 'pathway', label: 'Pathway' }\n  ],\n  logistics: [\n    { key: 'name', label: 'Patient Name' },\n    { key: 'ward_name', label: 'Ward' },\n    { key: 'room_name', label: 'Room' },\n    { key: 'bed_name', label: 'Bed' },\n    { key: 'bed_type', label: 'Bed Type' },\n    { key: 'transport_booking', label: 'Transport Booked' },\n    { key: 'transport_mobility', label: 'Transport Type' },\n    { key: 'district_nurse_referral', label: 'District Nurse' },\n    { key: 'equipment', label: 'Equipment' }\n  ]\n});\n\n/**\n * Factory function to create healthcare-specific tabs configuration\n */\nexport const createTCHTabsConfig = (patients: EWSPatientData[]): TabPanelConfig<EWSPatientData>[] => {\n  const viewConfig = createHealthcareViewConfig();\n  \n  return [\n    {\n      id: 'overview',\n      label: 'Patient Overview',\n      data: patients,\n      columns: viewConfig.overview,\n      ariaLabel: 'Patient Overview Data Grid',\n      ariaDescription: 'Overview of all patients with basic information'\n    },\n    {\n      id: 'vitals',\n      label: 'Vital Signs & EWS',\n      data: patients,\n      columns: viewConfig.vitals,\n      sortConfig: [\n        { key: 'ews_score', direction: 'desc' },\n        { key: 'name', direction: 'asc' },\n        { key: 'ward_name', direction: 'asc' }\n      ],\n      ariaLabel: 'Patient Vital Signs Data Grid',\n      ariaDescription: 'Patient vital signs and Early Warning Scores'\n    },\n    {\n      id: 'discharge',\n      label: 'Discharge Planning',\n      data: patients.filter(p => p.anticipated_discharge_date),\n      columns: viewConfig.discharge,\n      sortConfig: [\n        { key: 'anticipated_discharge_date', direction: 'asc' },\n        { key: 'discharge_status', direction: 'desc' }\n      ],\n      ariaLabel: 'Discharge Planning Data Grid',\n      ariaDescription: 'Patient discharge planning and status information'\n    },\n    {\n      id: 'logistics',\n      label: 'Bed Management',\n      data: patients,\n      columns: viewConfig.logistics,\n      sortConfig: [{ key: 'ward_name', direction: 'asc' }],\n      ariaLabel: 'Bed Management Data Grid',\n      ariaDescription: 'Patient location and logistics information'\n    }\n  ];\n};\n\n/**\n * Healthcare-specific data operation configuration\n */\nexport const tchDataConfig = {\n  dataComparator: healthcareDataComparator,\n  filterFunction: healthcareFilterFunction,\n  booleanRenderer: nhsBooleanRenderer,\n  getDataId: healthcareGetDataId\n};\n", "/**\n * Generic factory helpers for creating tabs configurations\n */\n\nimport { TabPanelConfig } from './AriaTabsDataGridTypes';\nimport { AriaDataGridColumn, SortConfig } from './AriaDataGridTypes';\n\n/**\n * Column definition for generic tab creation\n */\nexport interface GenericColumnDefinition<T> {\n  key: string;\n  label: string;\n  render?: (data: T) => any;\n  sortable?: boolean;\n\t/** Optional high-precedence custom renderer (value, row) signature alignment with ColumnDefinition.customRenderer */\n\tcustomRenderer?: (value: any, row: T) => React.ReactNode;\n}\n\n/**\n * Tab definition for generic tab creation\n */\nexport interface GenericTabDefinition<T = any> {\n  id: string;\n  label: string;\n  columns: GenericColumnDefinition<T>[];\n  filter?: (data: T[]) => T[];\n  sortConfig?: SortConfig[];\n  ariaLabel?: string;\n  ariaDescription?: string;\n  className?: string;\n  disabled?: boolean;\n}\n\n/**\n * Generic factory function to create tabs configuration\n */\nexport const createGenericTabsConfig = <T,>(\n  data: T[],\n  tabDefinitions: GenericTabDefinition<T>[]\n): TabPanelConfig<T>[] => {\n  return tabDefinitions.map(def => ({\n\tid: def.id,\n\tlabel: def.label,\n\tdata: def.filter ? def.filter(data) : data,\n\tcolumns: def.columns.map(col => ({\n\t  key: col.key,\n\t  label: col.label,\n\t  render: col.render,\n\t  customRenderer: col.customRenderer\n\t})),\n\tsortConfig: def.sortConfig,\n\tariaLabel: def.ariaLabel || `${def.label} Data Grid`,\n\tariaDescription: def.ariaDescription || `Data grid showing ${def.label.toLowerCase()}`,\n\tclassName: def.className,\n\tdisabled: def.disabled\n  }));\n};\n\n/**\n * Helper function to create simple data views\n */\nexport const createSimpleDataView = <T,>(\n  data: T[],\n  config: {\n\tid: string;\n\tlabel: string;\n\tcolumns: Array<{\n\t  key: keyof T;\n\t  label: string;\n\t  render?: (value: any, data: T) => any;\n\t}>;\n\tdefaultSort?: {\n\t  key: keyof T;\n\t  direction: 'asc' | 'desc';\n\t};\n\tariaLabel?: string;\n\tclassName?: string;\n\tdisabled?: boolean;\n  }\n): TabPanelConfig<T> => {\n  return {\n\tid: config.id,\n\tlabel: config.label,\n\tdata,\n\tcolumns: config.columns.map(col => ({\n\t  key: col.key as string,\n\t  label: col.label,\n\t  render: col.render ? (data: T) => col.render!(data[col.key], data) : undefined\n\t})),\n\tsortConfig: config.defaultSort \n\t  ? [{ key: config.defaultSort.key as string, direction: config.defaultSort.direction }]\n\t  : undefined,\n\tariaLabel: config.ariaLabel || `${config.label} Data Grid`,\n\tariaDescription: `Data grid showing ${config.label.toLowerCase()}`,\n\tclassName: config.className,\n\tdisabled: config.disabled\n  };\n};\n\n/**\n * Helper function for common business data patterns\n */\nexport const createBusinessDataTabs = <T extends Record<string, any>>(\n  data: T[],\n  options: {\n\tnameField: keyof T;\n\tstatusField?: keyof T;\n\tdateField?: keyof T;\n\tamountField?: keyof T;\n\tadditionalFields?: Array<{\n\t  key: keyof T;\n\t  label: string;\n\t  render?: (value: any) => any;\n\t}>;\n  }\n): TabPanelConfig<T>[] => {\n  const baseColumns = [\n\t{ key: options.nameField as string, label: 'Name' }\n  ];\n\n  if (options.statusField) {\n\tbaseColumns.push({ key: options.statusField as string, label: 'Status' });\n  }\n\n  if (options.dateField) {\n\tbaseColumns.push({ \n\t  key: options.dateField as string, \n\t  label: 'Date',\n\t  render: (data: T) => {\n\t\tconst value = (data as any)[options.dateField!];\n\t\treturn (value as any) instanceof Date ? (value as Date).toLocaleDateString() : value;\n\t  }\n\t} as AriaDataGridColumn);\n  }\n\n  if (options.amountField) {\n\tbaseColumns.push({ \n\t  key: options.amountField as string, \n\t  label: 'Amount',\n\t  render: (data: T) => {\n\t\tconst value = (data as any)[options.amountField!];\n\t\treturn typeof value === 'number' ? `$${value.toFixed(2)}` : value;\n\t  }\n\t} as AriaDataGridColumn);\n  }\n\n  if (options.additionalFields) {\n\tbaseColumns.push(...options.additionalFields.map(field => ({\n\t  key: field.key as string,\n\t  label: field.label,\n\t  render: field.render ? (data: T) => field.render!(data[field.key]) : undefined\n\t})));\n  }\n\n  return [\n\t{\n\t  id: 'overview',\n\t  label: 'Overview',\n\t  data,\n\t  columns: baseColumns,\n\t  ariaLabel: 'Data Overview Grid',\n\t  ariaDescription: 'Overview of all data items'\n\t}\n  ];\n};\n\n/**\n * Default data comparison functions for common scenarios\n */\nexport const dataComparators = {\n  /** JSON-based comparison (safe but slower) */\n  json: <T,>(a: T, b: T): boolean => JSON.stringify(a) === JSON.stringify(b),\n  \n  /** ID-based comparison */\n  id: <T extends { id: string | number },>(a: T, b: T): boolean => a.id === b.id,\n  \n  /** Name-based comparison */\n  name: <T extends { name: string },>(a: T, b: T): boolean => a.name === b.name,\n  \n  /** Custom field comparison */\n  field: <T,>(fieldName: keyof T) => (a: T, b: T): boolean => a[fieldName] === b[fieldName],\n  \n  /** Multi-field comparison */\n  multiField: <T,>(fields: Array<keyof T>) => (a: T, b: T): boolean => fields.every(field => a[field] === b[field])\n};\n\n/**\n * Default filter functions for common scenarios\n */\nexport const filterFunctions = {\n  /** No filtering */\n  none: <T,>(data: T[], _filters?: any): T[] => data,\n  \n  /** Simple object property matching */\n  simple: <T,>(data: T[], filters?: Record<string, any>): T[] => {\n\tif (!filters) return data;\n\t\n\treturn data.filter(item => {\n\t  return Object.keys(filters).every(key => {\n\t\tconst filterValue = filters[key];\n\t\tconst itemValue = (item as any)[key];\n\t\t\n\t\tif (filterValue === null || filterValue === undefined) return true;\n\t\tif (Array.isArray(filterValue)) {\n\t\t  return filterValue.includes(itemValue);\n\t\t}\n\t\t\n\t\treturn itemValue === filterValue;\n\t  });\n\t});\n  },\n  \n  /** Text search across multiple fields */\n  textSearch: <T,>(searchFields: Array<keyof T>) => (data: T[], filters?: { search?: string }): T[] => {\n\tif (!filters?.search) return data;\n\t\n\tconst searchTerm = filters.search.toLowerCase();\n\treturn data.filter(item => \n\t  searchFields.some(field => \n\t\tString((item as any)[field]).toLowerCase().includes(searchTerm)\n\t  )\n\t);\n  }\n};\n\n/**\n * Default boolean renderers\n */\nexport const booleanRenderers = {\n  /** Simple checkmark/cross */\n  simple: (value: boolean) => value ? '\u2713' : '\u2717',\n  \n  /** Yes/No text */\n  yesNo: (value: boolean) => value ? 'Yes' : 'No',\n  \n  /** Enabled/Disabled */\n  enabledDisabled: (value: boolean) => value ? 'Enabled' : 'Disabled',\n  \n  /** Active/Inactive */\n  activeInactive: (value: boolean) => value ? 'Active' : 'Inactive'\n};\n", "/**\n * Plugin system for AriaTabsDataGrid - Domain-specific extensions\n */\n\nimport { DataOperationConfig } from './AriaTabsDataGridTypes';\nimport { TabPanelConfig } from './AriaTabsDataGridTypes';\nimport { createGenericTabsConfig, GenericTabDefinition } from './AriaTabsDataGridFactory';\nimport { booleanIcon } from './icons';\nimport React from 'react';\n\n/**\n * Generic boolean renderer using NHS SVG icons\n */\nconst renderBooleanWithIcon = (value: boolean): React.ReactNode => {\n  const iconEntry = booleanIcon.find(icon => icon.value === value);\n  return iconEntry ? iconEntry.icon : null;\n};\n\n/**\n * E-commerce specific data operations\n */\nexport interface EcommerceProduct {\n  id: string;\n  name: string;\n  price: number;\n  discountedPrice?: number;\n  inStock: boolean;\n  category: string;\n  rating: number;\n  reviews: number;\n  imageUrl?: string;\n  tags: string[];\n}\n\nexport const ecommerceDataConfig: DataOperationConfig<EcommerceProduct> = {\n  dataComparator: (a, b) => a.id === b.id,\n  filterFunction: (data, filters) => {\n    if (!filters) return data;\n    \n    return data.filter(product => {\n      // Price range filter\n      if (filters.priceRange) {\n        const [min, max] = filters.priceRange;\n        const price = product.discountedPrice || product.price;\n        if (price < min || price > max) return false;\n      }\n      \n      // Category filter\n      if (filters.categories && filters.categories.length > 0) {\n        if (!filters.categories.includes(product.category)) return false;\n      }\n      \n      // In stock filter\n      if (filters.inStock !== undefined) {\n        if (product.inStock !== filters.inStock) return false;\n      }\n      \n      // Rating filter\n      if (filters.minRating !== undefined) {\n        if (product.rating < filters.minRating) return false;\n      }\n      \n      // Tag filter\n      if (filters.tags && filters.tags.length > 0) {\n        if (!filters.tags.some((tag: string) => product.tags.includes(tag))) return false;\n      }\n      \n      return true;\n    });\n  },\n  booleanRenderer: (value) => renderBooleanWithIcon(value),\n  getDataId: (product) => `ecommerce-${product.id}`\n};\n\nexport const createEcommerceTabs = (products: EcommerceProduct[]): TabPanelConfig<EcommerceProduct>[] => {\n  const tabDefinitions: GenericTabDefinition<EcommerceProduct>[] = [\n    {\n      id: 'all-products',\n      label: 'All Products',\n      columns: [\n        { key: 'name', label: 'Product Name' },\n        { \n          key: 'price', \n          label: 'Price', \n          render: (product) => {\n            if (product.discountedPrice) {\n              return `$${product.price.toFixed(2)} \u2192 $${product.discountedPrice.toFixed(2)}`;\n            }\n            return `$${product.price.toFixed(2)}`;\n          }\n        },\n        { key: 'inStock', label: 'Availability' },\n        { key: 'category', label: 'Category' },\n        { \n          key: 'rating', \n          label: 'Rating',\n          render: (product) => `${product.rating}/5 (${product.reviews} reviews)`\n        }\n      ],\n      ariaLabel: 'All Products Grid',\n      ariaDescription: 'Complete product catalog with pricing and availability'\n    },\n    {\n      id: 'on-sale',\n      label: 'On Sale',\n      columns: [\n        { key: 'name', label: 'Product Name' },\n        { \n          key: 'price', \n          label: 'Original Price',\n          render: (product) => `$${product.price.toFixed(2)}`\n        },\n        { \n          key: 'discountedPrice', \n          label: 'Sale Price',\n          render: (product) => `$${product.discountedPrice?.toFixed(2) || 'N/A'}`\n        },\n        { \n          key: 'discount', \n          label: 'Discount',\n          render: (product) => {\n            if (product.discountedPrice) {\n              const discount = ((product.price - product.discountedPrice) / product.price * 100);\n              return `${discount.toFixed(0)}% OFF`;\n            }\n            return 'N/A';\n          }\n        }\n      ],\n      filter: (products) => products.filter(p => p.discountedPrice !== undefined),\n      ariaLabel: 'Sale Products Grid',\n      ariaDescription: 'Products currently on sale with discounted pricing'\n    },\n    {\n      id: 'high-rated',\n      label: 'Top Rated',\n      columns: [\n        { key: 'name', label: 'Product Name' },\n        { key: 'rating', label: 'Rating' },\n        { key: 'reviews', label: 'Reviews' },\n        { key: 'category', label: 'Category' }\n      ],\n      filter: (products) => products.filter(p => p.rating >= 4.0),\n      sortConfig: [{ key: 'rating', direction: 'desc' }],\n      ariaLabel: 'Top Rated Products Grid',\n      ariaDescription: 'Highest rated products with 4+ star ratings'\n    }\n  ];\n\n  return createGenericTabsConfig(products, tabDefinitions);\n};\n\n/**\n * Financial data operations\n */\nexport interface FinancialTransaction {\n  id: string;\n  date: Date;\n  amount: number;\n  type: 'credit' | 'debit';\n  category: string;\n  description: string;\n  accountId: string;\n  pending: boolean;\n  recurring: boolean;\n}\n\nexport const financialDataConfig: DataOperationConfig<FinancialTransaction> = {\n  dataComparator: (a, b) => a.id === b.id,\n  filterFunction: (data, filters) => {\n    if (!filters) return data;\n    \n    return data.filter(transaction => {\n      // Date range filter\n      if (filters.dateRange) {\n        const [startDate, endDate] = filters.dateRange;\n        if (transaction.date < startDate || transaction.date > endDate) return false;\n      }\n      \n      // Amount range filter\n      if (filters.amountRange) {\n        const [min, max] = filters.amountRange;\n        if (Math.abs(transaction.amount) < min || Math.abs(transaction.amount) > max) return false;\n      }\n      \n      // Transaction type filter\n      if (filters.types && filters.types.length > 0) {\n        if (!filters.types.includes(transaction.type)) return false;\n      }\n      \n      // Category filter\n      if (filters.categories && filters.categories.length > 0) {\n        if (!filters.categories.includes(transaction.category)) return false;\n      }\n      \n      // Pending status filter\n      if (filters.pending !== undefined) {\n        if (transaction.pending !== filters.pending) return false;\n      }\n      \n      return true;\n    });\n  },\n  booleanRenderer: (value) => renderBooleanWithIcon(value),\n  getDataId: (transaction) => `financial-${transaction.id}`\n};\n\nexport const createFinancialTabs = (transactions: FinancialTransaction[]): TabPanelConfig<FinancialTransaction>[] => {\n  const tabDefinitions: GenericTabDefinition<FinancialTransaction>[] = [\n    {\n      id: 'all-transactions',\n      label: 'All Transactions',\n      columns: [\n        { \n          key: 'date', \n          label: 'Date',\n          render: (transaction) => transaction.date.toLocaleDateString()\n        },\n        { key: 'description', label: 'Description' },\n        { \n          key: 'amount', \n          label: 'Amount',\n          render: (transaction) => {\n            const prefix = transaction.type === 'credit' ? '+' : '-';\n            return `${prefix}$${Math.abs(transaction.amount).toFixed(2)}`;\n          }\n        },\n        { key: 'category', label: 'Category' },\n        { key: 'pending', label: 'Status' }\n      ],\n      sortConfig: [{ key: 'date', direction: 'desc' }],\n      ariaLabel: 'All Transactions Grid',\n      ariaDescription: 'Complete transaction history with amounts and categories'\n    },\n    {\n      id: 'credits',\n      label: 'Credits',\n      columns: [\n        { \n          key: 'date', \n          label: 'Date',\n          render: (transaction) => transaction.date.toLocaleDateString()\n        },\n        { key: 'description', label: 'Description' },\n        { \n          key: 'amount', \n          label: 'Amount',\n          render: (transaction) => `+$${transaction.amount.toFixed(2)}`\n        },\n        { key: 'category', label: 'Category' }\n      ],\n      filter: (transactions) => transactions.filter(t => t.type === 'credit'),\n      ariaLabel: 'Credit Transactions Grid',\n      ariaDescription: 'Incoming payments and credits only'\n    },\n    {\n      id: 'debits',\n      label: 'Debits',\n      columns: [\n        { \n          key: 'date', \n          label: 'Date',\n          render: (transaction) => transaction.date.toLocaleDateString()\n        },\n        { key: 'description', label: 'Description' },\n        { \n          key: 'amount', \n          label: 'Amount',\n          render: (transaction) => `-$${Math.abs(transaction.amount).toFixed(2)}`\n        },\n        { key: 'category', label: 'Category' }\n      ],\n      filter: (transactions) => transactions.filter(t => t.type === 'debit'),\n      ariaLabel: 'Debit Transactions Grid',\n      ariaDescription: 'Outgoing payments and charges only'\n    },\n    {\n      id: 'pending',\n      label: 'Pending',\n      columns: [\n        { \n          key: 'date', \n          label: 'Date',\n          render: (transaction) => transaction.date.toLocaleDateString()\n        },\n        { key: 'description', label: 'Description' },\n        { \n          key: 'amount', \n          label: 'Amount',\n          render: (transaction) => {\n            const prefix = transaction.type === 'credit' ? '+' : '-';\n            return `${prefix}$${Math.abs(transaction.amount).toFixed(2)}`;\n          }\n        },\n        { key: 'type', label: 'Type' }\n      ],\n      filter: (transactions) => transactions.filter(t => t.pending),\n      ariaLabel: 'Pending Transactions Grid',\n      ariaDescription: 'Transactions awaiting processing'\n    }\n  ];\n\n  return createGenericTabsConfig(transactions, tabDefinitions);\n};\n\n/**\n * Plugin registry for easy domain-specific configurations\n */\nexport const dataGridPlugins = {\n  ecommerce: {\n    name: 'E-commerce',\n    description: 'Product catalogs with pricing, inventory, and ratings',\n    dataConfig: ecommerceDataConfig,\n    createTabs: createEcommerceTabs\n  },\n  financial: {\n    name: 'Financial',\n    description: 'Transaction data with amounts, categories, and statuses',\n    dataConfig: financialDataConfig,\n    createTabs: createFinancialTabs\n  }\n};\n\n/**\n * Helper function to create a data grid with a specific plugin\n */\nexport const createPluginDataGrid = <T,>(\n  pluginName: keyof typeof dataGridPlugins,\n  data: T[]\n) => {\n  const plugin = dataGridPlugins[pluginName] as any;\n  return {\n    dataConfig: plugin.dataConfig,\n    tabPanels: plugin.createTabs(data)\n  };\n};\n", "import { Card } from '../Card';\nimport { createGenericCard, defaultGenericCardConfig } from './GenericCardRenderer';\nimport { GenericCardConfig } from './ResponsiveDataGridGeneric.types';\nimport { AriaDataGridColumn } from '../SortableDataTable/AriaDataGridTypes';\n\nexport interface GenericCardProps<T = any> {\n  data: T;\n  columns: AriaDataGridColumn[];\n  config?: Partial<GenericCardConfig<T>>;\n  className?: string;\n  /**\n   * Override heading (else computed from primaryField)\n   */\n  headingOverride?: string;\n}\n\n/**\n * Lightweight wrapper component that produces a <Card> using the same generic\n * card creation logic as ResponsiveDataGrid. It preserves focus/selection styles\n * when used inside the grid wrappers, but can also be used standalone.\n */\nexport function GenericCard<T = any>({ data, columns, config, className, headingOverride }: GenericCardProps<T>) {\n  const mergedConfig: GenericCardConfig<T> = { ...defaultGenericCardConfig as GenericCardConfig<T>, ...(config as GenericCardConfig<T>) };\n  const cardProps = createGenericCard<T>(data, columns, mergedConfig);\n  return (\n    <Card\n      {...cardProps}\n      heading={headingOverride ?? cardProps.heading}\n      className={[cardProps.className, className].filter(Boolean).join(' ')}\n    />\n  );\n}\n\nexport default GenericCard;\n"],
  "mappings": "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",
  "names": ["classNames", "useState", "useEffect", "useCallback", "useRef", "useReducer", "useMemo", "React", "useCallback", "useMemo", "useRef", "forwardRef", "useState", "useCallback", "id", "style", "title", "ariaLabel", "ariaDescribedBy", "ariaLabelledBy", "tabIndex", "jsx", "jsx", "jsxs", "useCallback", "jsx", "jsxs", "forwardRef", "AriaTabsDataGrid", "useRef", "useState", "useMemo", "useCallback", "newRowIndex", "React", "React", "jsx", "jsx", "jsxs", "React", "jsx", "classNames", "jsx", "jsxs", "jsx", "Fragment", "jsx", "jsxs", "tabsDataGridReducer", "useState", "useEffect", "useMemo", "useReducer", "useRef", "useCallback", "result", "event", "useState", "useMemo", "jsx", "jsxs", "jsx", "jsxs", "iconEntry", "products", "transactions", "jsx", "jsxs", "useState", "useMemo", "jsx"]
}
