{
  "version": 3,
  "sources": ["../../../../node_modules/classnames/index.js", "../../../../src/components/SortableDataTable/AriaDataGrid.tsx", "../../../../src/components/SortableDataTable/sortUtils.ts", "../../../../src/components/SortableDataTable/AriaTabsDataGrid.tsx", "../../../../src/components/SortableDataTable/SortStatusControl/SortStatusControl.tsx", "../../../../src/components/Button/Button.tsx", "../../../../src/mapping/button.ts", "../../../../src/mapping/tag.ts", "../../../../src/components/Tag/Tag.tsx", "../../../../src/components/SortableDataTable/SortStatusControl.tsx", "../../../../src/components/SortableDataTable/SortStatusControlTypes.ts", "../../../../src/components/SortableDataTable/AriaTabsDataGridFactory.ts", "../../../../src/components/SortableDataTable/icons.tsx", "../../../../src/components/SortableDataTable/AriaTabsDataGridTCH.tsx", "../../../../src/components/SortableDataTable/utils.tsx"],
  "sourcesContent": ["/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n", "import React, { useRef, useState, useCallback, useEffect, useMemo } from 'react';\nimport classNames from 'classnames';\nimport { AriaDataGridProps, NullsPosition } from './AriaDataGridTypes';\nimport { buildMultiComparator } from './sortUtils';\nimport './AriaTabsDataGrid.scss';\n\ntype NavigationMode = 'browse' | 'navigate';\ntype FocusArea = 'headers' | 'cells';\n\n/**\n * ARIA-compliant Data Grid Component\n * Provides comprehensive keyboard navigation and ARIA compliance for data tables\n * Following react-aria patterns with hierarchical navigation\n */\nexport const AriaDataGrid = React.forwardRef<HTMLTableElement, AriaDataGridProps>(\n  ({\n    data,\n    columns,\n    sortConfig,\n    onSort,\n    sortingOptions,\n    selectedRowIndex,\n    onRowSelect,\n    id,\n    testId,\n    ariaLabel,\n    ariaLabelledby,\n    ariaDescribedby,\n    className,\n    tableClassName,\n    bordered = false,\n    striped = false,\n    responsive = false,\n    tableType = 'default',\n  }, forwardedRef) => {\n  const tableRef = useRef<HTMLTableElement>(null);\n  const headerRowRef = useRef<HTMLTableRowElement>(null);\n  const tbodyRef = useRef<HTMLTableSectionElement>(null);\n\n  // Merge forwarded ref with internal ref\n  React.useImperativeHandle(forwardedRef, () => tableRef.current!, []);\n\n  // Navigation state following react-aria patterns\n  const [focusedRowIndex, setFocusedRowIndex] = useState<number>(0);\n  const [focusedColumnIndex, setFocusedColumnIndex] = useState<number>(0);\n  const [focusArea, setFocusArea] = useState<FocusArea>('headers');\n  const [navigationMode, setNavigationMode] = useState<NavigationMode>('browse');\n\n  const columnCount = columns.length;\n  const rowCount = data.length;\n\n    // Sort the data based on the current sort configuration\n  const sortedData = useMemo(() => {\n    if (!sortConfig || sortConfig.length === 0) return data;\n  const comparator = buildMultiComparator(columns as any, sortConfig, NullsPosition.Last, sortingOptions);\n    return [...data].sort(comparator);\n  }, [data, sortConfig, columns, sortingOptions]);\n\n  // Focus a specific cell and scroll it into view\n  const focusCell = useCallback((rowIndex: number, colIndex: number) => {\n    setTimeout(() => {\n      const targetCell = tableRef.current?.querySelector(\n        `tbody tr:nth-child(${rowIndex + 1}) td:nth-child(${colIndex + 1})`\n      );\n      if (targetCell) {\n        (targetCell as HTMLElement).focus();\n        // Check if scrollIntoView is available (may not be in test environments)\n        if (typeof targetCell.scrollIntoView === 'function') {\n          targetCell.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center',\n            inline: 'nearest'\n          });\n        }\n      }\n    }, 0);\n  }, []);\n\n  // Focus a specific header and scroll it into view\n  const focusHeader = useCallback((colIndex: number) => {\n    setTimeout(() => {\n      const headerCell = tableRef.current?.querySelector(`th:nth-child(${colIndex + 1})`);\n      if (headerCell) {\n        (headerCell as HTMLElement).focus();\n        // Check if scrollIntoView is available (may not be in test environments)\n        if (typeof headerCell.scrollIntoView === 'function') {\n          headerCell.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center',\n            inline: 'nearest'\n          });\n        }\n      }\n    }, 0);\n  }, []);\n\n  // Handle sorting when header is activated\n  const handleSort = useCallback((columnKey: string) => {\n    onSort?.(columnKey);\n  }, [onSort]);\n\n  // Handle row selection\n  const handleRowSelect = useCallback((rowIndex: number) => {\n    onRowSelect?.(rowIndex);\n  }, [onRowSelect]);\n\n  // React-aria style hierarchical keyboard navigation\n  const handleKeyDown = useCallback((event: React.KeyboardEvent) => {\n    const { key } = event;\n\n    switch (key) {\n      case 'Enter':\n        event.preventDefault();\n        \n        if (focusArea === 'headers' && navigationMode === 'browse') {\n          // Enter from header browse -> navigate within headers\n          setNavigationMode('navigate');\n          focusHeader(focusedColumnIndex);\n        } else if (focusArea === 'headers' && navigationMode === 'navigate') {\n          // Enter on a header -> sort the column\n          const currentColumn = columns[focusedColumnIndex];\n          if (currentColumn) {\n            handleSort(currentColumn.key);\n          }\n        } else if (focusArea === 'cells' && navigationMode === 'browse') {\n          // Enter from row browse -> navigate within that row\n          setNavigationMode('navigate');\n          focusCell(focusedRowIndex, focusedColumnIndex);\n        } else if (focusArea === 'cells' && navigationMode === 'navigate') {\n          // Enter on a cell -> select the row\n          handleRowSelect(focusedRowIndex);\n        }\n        break;\n        \n      case 'Escape':\n        event.preventDefault();\n        \n        if (focusArea === 'headers' && navigationMode === 'navigate') {\n          // Escape from header navigation -> header browse\n          setNavigationMode('browse');\n        } else if (focusArea === 'cells' && navigationMode === 'navigate') {\n          // Escape from cell navigation -> row browse\n          setNavigationMode('browse');\n        }\n        break;\n        \n      case 'ArrowLeft':\n        event.preventDefault();\n        if (navigationMode === 'navigate' || (navigationMode === 'browse' && focusArea === 'headers')) {\n          if (focusArea === 'headers') {\n            const newIndex = Math.max(0, focusedColumnIndex - 1);\n            setFocusedColumnIndex(newIndex);\n            focusHeader(newIndex);\n          } else if (focusArea === 'cells') {\n            const newIndex = Math.max(0, focusedColumnIndex - 1);\n            setFocusedColumnIndex(newIndex);\n            focusCell(focusedRowIndex, newIndex);\n          }\n        }\n        break;\n        \n      case 'ArrowRight':\n        event.preventDefault();\n        if (navigationMode === 'navigate' || (navigationMode === 'browse' && focusArea === 'headers')) {\n          if (focusArea === 'headers') {\n            const newIndex = Math.min(columnCount - 1, focusedColumnIndex + 1);\n            setFocusedColumnIndex(newIndex);\n            focusHeader(newIndex);\n          } else if (focusArea === 'cells') {\n            const newIndex = Math.min(columnCount - 1, focusedColumnIndex + 1);\n            setFocusedColumnIndex(newIndex);\n            focusCell(focusedRowIndex, newIndex);\n          }\n        }\n        break;\n        \n      case 'ArrowUp':\n        event.preventDefault();\n        if (focusArea === 'cells') {\n          if (navigationMode === 'browse') {\n            // Browse mode: move to previous row\n            const newIndex = Math.max(0, focusedRowIndex - 1);\n            setFocusedRowIndex(newIndex);\n            focusCell(newIndex, 0);\n            setFocusedColumnIndex(0);\n          } else if (navigationMode === 'navigate') {\n            // Navigate mode: move to previous row in same column\n            if (focusedRowIndex > 0) {\n              const newIndex = focusedRowIndex - 1;\n              setFocusedRowIndex(newIndex);\n              focusCell(newIndex, focusedColumnIndex);\n            } else {\n              // Move back to headers\n              setFocusArea('headers');\n              setNavigationMode('browse');\n              focusHeader(focusedColumnIndex);\n            }\n          }\n        }\n        break;\n        \n      case 'ArrowDown':\n        event.preventDefault();\n        if (focusArea === 'headers' && navigationMode === 'browse') {\n          // From headers browse mode, move to first row browse mode\n          setFocusArea('cells');\n          setFocusedRowIndex(0);\n          setFocusedColumnIndex(0);\n          focusCell(0, 0);\n        } else if (focusArea === 'cells') {\n          const maxRowIndex = rowCount - 1;\n          if (navigationMode === 'browse') {\n            // Browse mode: move to next row\n            const newIndex = Math.min(maxRowIndex, focusedRowIndex + 1);\n            setFocusedRowIndex(newIndex);\n            focusCell(newIndex, 0);\n            setFocusedColumnIndex(0);\n          } else if (navigationMode === 'navigate') {\n            // Navigate mode: move to next row in same column\n            if (focusedRowIndex < maxRowIndex) {\n              const newIndex = focusedRowIndex + 1;\n              setFocusedRowIndex(newIndex);\n              focusCell(newIndex, focusedColumnIndex);\n            }\n          }\n        }\n        break;\n\n      case 'Home':\n        event.preventDefault();\n        if (focusArea === 'headers') {\n          setFocusedColumnIndex(0);\n          focusHeader(0);\n        } else if (focusArea === 'cells') {\n          if (event.ctrlKey) {\n            // Ctrl+Home: go to first cell\n            setFocusedRowIndex(0);\n            setFocusedColumnIndex(0);\n            focusCell(0, 0);\n          } else {\n            // Home: go to first column in current row\n            setFocusedColumnIndex(0);\n            focusCell(focusedRowIndex, 0);\n          }\n        }\n        break;\n\n      case 'End':\n        event.preventDefault();\n        if (focusArea === 'headers') {\n          const lastIndex = columnCount - 1;\n          setFocusedColumnIndex(lastIndex);\n          focusHeader(lastIndex);\n        } else if (focusArea === 'cells') {\n          if (event.ctrlKey) {\n            // Ctrl+End: go to last cell\n            const lastRow = rowCount - 1;\n            const lastCol = columnCount - 1;\n            setFocusedRowIndex(lastRow);\n            setFocusedColumnIndex(lastCol);\n            focusCell(lastRow, lastCol);\n          } else {\n            // End: go to last column in current row\n            const lastCol = columnCount - 1;\n            setFocusedColumnIndex(lastCol);\n            focusCell(focusedRowIndex, lastCol);\n          }\n        }\n        break;\n\n      case ' ':\n        event.preventDefault();\n        if (focusArea === 'headers' && navigationMode === 'navigate') {\n          // Space on header -> sort\n          const currentColumn = columns[focusedColumnIndex];\n          if (currentColumn) {\n            handleSort(currentColumn.key);\n          }\n        } else if (focusArea === 'cells' && navigationMode === 'navigate') {\n          // Space on cell -> select row\n          handleRowSelect(focusedRowIndex);\n        }\n        break;\n    }\n  }, [\n    focusArea,\n    navigationMode,\n    focusedColumnIndex,\n    focusedRowIndex,\n    columnCount,\n    rowCount,\n    columns,\n    focusCell,\n    focusHeader,\n    handleSort,\n    handleRowSelect\n  ]);\n\n  // Initialize keyboard navigation\n  useEffect(() => {\n    const table = tableRef.current;\n    if (table) {\n      table.addEventListener('keydown', handleKeyDown as any);\n      return () => table.removeEventListener('keydown', handleKeyDown as any);\n    }\n  }, [handleKeyDown]);\n\n  const tableClasses = classNames(\n    'nhsuk-table',\n    tableClassName,\n    {\n      'nhsuk-table--responsive': responsive,\n      'nhsuk-table--bordered': bordered,\n      'nhsuk-table--striped': striped,\n      'nhsuk-table--compact': tableType === 'compact',\n    },\n    className\n  );\n\n  return (\n    <table\n      ref={tableRef}\n      className={tableClasses}\n      id={id}\n      data-testid={testId}\n      role=\"grid\"\n      aria-label={ariaLabel}\n      aria-labelledby={ariaLabelledby}\n      aria-describedby={ariaDescribedby}\n      tabIndex={0}\n    >\n      <thead className=\"nhsuk-table__head\" role=\"rowgroup\">\n        <tr ref={headerRowRef} role=\"row\">\n          {columns.map((column, colIndex) => {\n            const sortInfo = sortConfig?.find(config => config.key === column.key);\n            const isSorted = !!sortInfo;\n            const isFocused = focusArea === 'headers' && focusedColumnIndex === colIndex;\n\n            return (\n              <th\n                key={column.key}\n                className={classNames('sortable-header', {\n                  'sortable-header--focused': isFocused\n                })}\n                role=\"columnheader\"\n                tabIndex={isFocused ? 0 : -1}\n                onClick={() => handleSort(column.key)}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault();\n                    handleSort(column.key);\n                  }\n                }}\n                aria-sort={isSorted ? (sortInfo?.direction === 'asc' ? 'ascending' : 'descending') : 'none'}\n              >\n                <div className=\"header-content\">\n                  <span className=\"header-label\">\n                    {column.label}\n                  </span>\n                  {isSorted && (\n                    <span className=\"sort-indicator\" aria-hidden=\"true\">\n                      {sortConfig && sortConfig.length > 1 && (\n                        <span className=\"sort-priority\">\n                          {sortConfig.findIndex(config => config.key === column.key) + 1}\n                        </span>\n                      )}\n                      <svg\n                        width=\"12\"\n                        height=\"12\"\n                        viewBox=\"0 0 12 12\"\n                        fill=\"currentColor\"\n                        className=\"sort-arrow\"\n                      >\n                        {sortInfo?.direction === 'asc' ? (\n                          <path d=\"M6 2L2 8h8L6 2z\" />\n                        ) : (\n                          <path d=\"M6 10L2 4h8L6 10z\" />\n                        )}\n                      </svg>\n                    </span>\n                  )}\n                </div>\n              </th>\n            );\n          })}\n        </tr>\n      </thead>\n      <tbody ref={tbodyRef} className=\"nhsuk-table__body\" role=\"rowgroup\">\n        {sortedData.map((row, rowIndex) => {\n          const isSelected = selectedRowIndex === rowIndex;\n          const isRowFocused = focusArea === 'cells' && focusedRowIndex === rowIndex;\n          \n          return (\n            <tr\n              key={rowIndex}\n              role=\"row\"\n              className={classNames('data-row', {\n                'data-row--selected': isSelected,\n                'data-row--focused': isRowFocused\n              })}\n              aria-selected={isSelected}\n            >\n              {columns.map((column, colIndex) => {\n                const value = column.tableRenderer ? column.tableRenderer(row) : \n                             column.render ? column.render(row) : row[column.key];\n                const isCellFocused = focusArea === 'cells' && \n                                    focusedRowIndex === rowIndex && \n                                    focusedColumnIndex === colIndex;\n\n                // Handle boolean values with accessible text\n                const renderValue = () => {\n                  if (typeof value === 'boolean') {\n                    return (\n                      <>\n                        <span aria-hidden=\"true\">{value ? '\u2713' : '\u2717'}</span>\n                        <span className=\"sr-only\">{value ? 'Yes' : 'No'}</span>\n                      </>\n                    );\n                  }\n                  return String(value ?? '');\n                };\n\n                return (\n                  <td\n                    key={column.key}\n                    role=\"gridcell\"\n                    className={classNames('data-cell', {\n                      'data-cell--focused': isCellFocused\n                    })}\n                    tabIndex={isCellFocused ? 0 : -1}\n                    onClick={() => handleRowSelect(rowIndex)}\n                  >\n                    {renderValue()}\n                  </td>\n                );\n              })}\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n});\n\nAriaDataGrid.displayName = 'AriaDataGrid';\n\nexport default AriaDataGrid;\n", "import { ColumnDefinition, SortConfig, SortingOptions, NullsPosition, BooleanOrder, SortType } from './AriaDataGridTypes';\n\n/**\n * Sorting utilities for AriaDataGrid and AriaTabsDataGrid.\n *\n * Goals:\n * - Provide consistent, type-aware comparisons (number, boolean, date, string)\n * - Support per-column sort accessors and custom comparators\n * - Centralise multi-key (priority-ordered) sort logic with unified null handling\n * - Keep rendering and keyboard-selection paths aligned\n */\n\n/**\n * Controls where null/undefined values are placed relative to non-null values.\n * 'first'  \u2192 all nulls come before any non-null\n * 'last'   \u2192 all nulls come after any non-null\n */\n// use typed NullsPosition enum from types\n\n/**\n * Convert an arbitrary input to a comparable timestamp (ms since epoch) when possible.\n * Returns null when the input is null/undefined or cannot be parsed as a valid date.\n */\nfunction toComparableDate(value: any): number | null {\n  if (value == null) return null;\n  // Support Date instances directly; otherwise attempt to parse string/number\n  const d = value instanceof Date ? value : new Date(value);\n  const t = d.getTime();\n  return Number.isNaN(t) ? null : t;\n}\n\n/**\n * Using a shared Intl.Collator for natural-ish, locale-aware string comparison with numeric awareness.\n * This sorts \"2\" before \"10\" and avoids re-allocating collators during sort operations.\n */\nconst defaultCollator = new Intl.Collator(undefined, { numeric: true, sensitivity: 'base' });\nfunction defaultStringCompare(a: any, b: any): number {\n  return defaultCollator.compare(String(a), String(b));\n}\n\n/**\n * Resolve the value to use for sorting a given row under a specific column.\n * Precedence:\n * 1) column.sortAccessor(row)\n * 2) column.useRendererForSort \u2192 column.tableRenderer(row) else column.render(row)\n * 3) row[column.key]\n */\nexport function getSortValue(row: any, column: ColumnDefinition): any {\n  if (column.sortAccessor) return column.sortAccessor(row);\n  if (column.useRendererForSort) {\n    if (column.tableRenderer) return column.tableRenderer(row);\n    if (column.render) return column.render(row);\n  }\n  return row[column.key];\n}\n\n/**\n * Compare two already-resolved values for a column.\n *\n * Behaviour/precedence:\n * - If column.sortComparator exists \u2192 use it\n * - Else branch by explicit column.sortType\n * - Else attempt lightweight inference (number/boolean), then string compare fallback\n *\n * Note: Null/undefined handling is intentionally performed by buildMultiComparator,\n * not here, so this function assumes non-null inputs.\n */\nexport function compareValues(aVal: any, bVal: any, column?: ColumnDefinition, opts?: SortingOptions): number {\n  // Custom comparator has ultimate precedence when provided\n  if (column?.sortComparator) {\n    return column.sortComparator(aVal, bVal);\n  }\n\n  const type = column?.sortType;\n  if (type === SortType.Number) {\n    // Treat NaN as null-equivalent here so compareValues stays consistent with null policy handled above\n    const an = Number(aVal);\n    const bn = Number(bVal);\n    const aNaN = Number.isNaN(an);\n    const bNaN = Number.isNaN(bn);\n    if (aNaN && bNaN) return 0;\n    if (aNaN) return 1;\n    if (bNaN) return -1;\n    return an - bn;\n  }\n  if (type === SortType.Boolean) {\n    const ab = Boolean(aVal), bb = Boolean(bVal);\n    const order = column?.booleanOrder ?? opts?.booleanOrder ?? BooleanOrder.FalseFirst;\n    if (ab === bb) return 0;\n    return order === BooleanOrder.TrueFirst ? (ab ? -1 : 1) : (ab ? 1 : -1);\n  }\n  if (type === SortType.Date) {\n    const at = toComparableDate(aVal);\n    const bt = toComparableDate(bVal);\n    if (at == null && bt == null) return 0;\n    if (at == null) return 1;\n    if (bt == null) return -1;\n    return at - bt;\n  }\n\n  // Fallback/inference\n  if (typeof aVal === 'number' && typeof bVal === 'number') {\n    // Handle NaN gracefully as null-equivalent\n    const aNaN = Number.isNaN(aVal);\n    const bNaN = Number.isNaN(bVal);\n    if (aNaN && bNaN) return 0;\n    if (aNaN) return 1;\n    if (bNaN) return -1;\n    return aVal - bVal;\n  }\n  if (typeof aVal === 'boolean' && typeof bVal === 'boolean') {\n    const order = column?.booleanOrder ?? opts?.booleanOrder ?? BooleanOrder.FalseFirst;\n    if (aVal === bVal) return 0;\n    return order === BooleanOrder.TrueFirst ? (aVal ? -1 : 1) : (aVal ? 1 : -1);\n  }\n\n  return defaultStringCompare(aVal, bVal);\n}\n\n/**\n * Builds a stable comparator using column metadata. Handles multi-level SortConfig arrays.\n * nullsPosition controls where null/undefined values should be placed consistently.\n */\nexport function buildMultiComparator(\n  columns: ColumnDefinition[],\n  sortConfig: SortConfig[] | undefined,\n  nullsPosition: NullsPosition = NullsPosition.Last,\n  options?: SortingOptions\n) {\n  // Pre-index columns by key for quick lookups during sort\n  const colMap = new Map(columns.map(c => [c.key, c] as const));\n  const configs = sortConfig ?? [];\n  return (a: any, b: any) => {\n    if (!configs.length) return 0;\n    for (const { key, direction } of configs) {\n      // Determine the relevant column metadata for this key\n      const col = colMap.get(key);\n      // Compute comparable values using accessor/renderer hints when available\n      const aVal = col ? getSortValue(a, col) : a[key];\n      const bVal = col ? getSortValue(b, col) : b[key];\n\n      // Unified null handling (kept here to avoid scattering into compareValues)\n      const aNull = aVal == null;\n      const bNull = bVal == null;\n      if (aNull || bNull) {\n        if (aNull && bNull) continue;\n        const effectiveNulls = col?.nullsPosition ?? options?.nullsPosition ?? nullsPosition;\n        if (effectiveNulls === NullsPosition.First) {\n          return aNull ? -1 : 1;\n        } else {\n          return aNull ? 1 : -1;\n        }\n      }\n\n      // Compare non-null values using type-aware logic and optional custom comparator\n      let cmp = compareValues(aVal, bVal, col, options);\n      // Apply direction (ascending vs descending) and early-exit when a difference is found\n      if (cmp !== 0) return direction === 'asc' ? cmp : -cmp;\n    }\n    // All sort keys exhausted \u2192 consider items equal for ordering purposes.\n    // Optional stable tiebreaker using original indices (if present)\n    if (options?.stable) {\n      const ai = (a as any).__originalIndex__ ?? (a as any).originalIndex ?? undefined;\n      const bi = (b as any).__originalIndex__ ?? (b as any).originalIndex ?? undefined;\n      if (typeof ai === 'number' && typeof bi === 'number') {\n        return ai - bi;\n      }\n    }\n    return 0;\n  };\n}\n\n/**\n * Annotate an array of rows with a non-enumerable original index property\n * so that stable sorting can use it as a tiebreaker when options.stable is true.\n *\n * By default, writes `__originalIndex__` as a non-enumerable, configurable property.\n * You can change the property name (e.g. to `originalIndex`) via `propName`.\n *\n * This returns shallow-cloned objects to avoid mutating the original array items.\n */\nexport function annotateWithOriginalIndex<T extends Record<string, any>>(\n  rows: T[],\n  propName: '__originalIndex__' | 'originalIndex' = '__originalIndex__'\n): (T & { [k in typeof propName]?: number })[] {\n  return rows.map((row, index) => {\n    const clone = { ...row } as T & { [k in typeof propName]?: number };\n    // Define as non-enumerable to avoid affecting JSON/stringify or column iteration\n    Object.defineProperty(clone, propName, {\n      value: index,\n      writable: false,\n      enumerable: false,\n      configurable: true,\n    });\n    return clone;\n  });\n}\n", "import React, {\n\tuseReducer,\n\tuseCallback,\n\tuseMemo,\n\tuseRef,\n\tuseImperativeHandle,\n\tforwardRef,\n\tuseEffect,\n\tuseState,\n\tuseId,\n} from \"react\";\nimport {\n\tAriaTabsDataGridProps,\n\tAriaTabsDataGridState,\n\tAriaTabsDataGridAction,\n} from \"./AriaTabsDataGridTypes\";\nimport { SortConfig } from \"./AriaDataGridTypes\";\nimport type { ColumnDefinition } from \"./AriaDataGridTypes\";\nimport \"./AriaTabsDataGrid.scss\";\nimport { SortStatusControl } from \"./SortStatusControl/SortStatusControl\";\nimport { buildMultiComparator } from './sortUtils';\nimport { NullsPosition } from './AriaDataGridTypes';\n\n\t/**\n\t * Navigation focus areas for hierarchical keyboard navigation\n\t */\n\ttype FocusArea = \"tabs\" | \"headers\" | \"cells\" | \"actions\";\n\n\t/**\n\t * Navigation state for hierarchical keyboard navigation\n\t */\n\tinterface NavigationState {\n\t\tfocusArea: FocusArea;\n\t\tfocusedTabIndex: number;\n\t\tfocusedHeaderIndex: number;\n\t\tfocusedRowIndex: number;\n\t\tfocusedColumnIndex: number;\n\t\tfocusedActionIndex: number;\n\t\tisGridActive: boolean;\n\t}\n\n\tfunction tabsDataGridReducer(\n\t\tstate: AriaTabsDataGridState,\n\t\taction: AriaTabsDataGridAction\n\t): AriaTabsDataGridState {\n\t\tswitch (action.type) {\n\t\t\tcase \"SET_SELECTED_INDEX\":\n\t\t\t\treturn { ...state, selectedIndex: action.payload };\n\n\t\t\tcase \"SET_TAB_LOADING\":\n\t\t\t\tconst newLoadingStates = [...state.tabLoadingStates];\n\t\t\t\tnewLoadingStates[action.payload.tabIndex] = action.payload.isLoading;\n\t\t\t\treturn { ...state, tabLoadingStates: newLoadingStates };\n\n\t\t\tcase \"SET_TAB_ERROR\":\n\t\t\t\tconst newErrors = [...state.tabErrors];\n\t\t\t\tnewErrors[action.payload.tabIndex] = action.payload.error;\n\t\t\t\treturn { ...state, tabErrors: newErrors };\n\n\t\t\tcase \"SET_SORT\":\n\t\t\t\treturn { ...state, sortConfig: action.payload };\n\n\t\t\tcase \"SET_SELECTED_ROWS\":\n\t\t\t\tconst newSelectedRows = [...state.selectedRows];\n\t\t\t\tnewSelectedRows[action.payload.tabIndex] = action.payload.rowIndices;\n\t\t\t\treturn { ...state, selectedRows: newSelectedRows };\n\n\t\t\tcase \"SET_GLOBAL_SELECTED_ROW_DATA\":\n\t\t\t\treturn { ...state, globalSelectedRowData: action.payload };\n\n\t\t\tcase \"SET_FILTERS\":\n\t\t\t\treturn { ...state, filters: action.payload };\n\n\t\t\tcase \"ADJUST_ARRAYS\":\n\t\t\t\tconst { newLength } = action.payload;\n\t\t\t\tconst adjustedLoadingStates = new Array(newLength).fill(false);\n\t\t\t\tconst adjustedErrors = new Array(newLength).fill(null);\n\t\t\t\tconst adjustedSelectedRows = new Array(newLength).fill([]);\n\n\t\t\t\t// Copy existing states up to the minimum length\n\t\t\t\tfor (let i = 0; i < Math.min(state.tabLoadingStates.length, newLength); i++) {\n\t\t\t\t\tadjustedLoadingStates[i] = state.tabLoadingStates[i];\n\t\t\t\t\tadjustedErrors[i] = state.tabErrors[i];\n\t\t\t\t\tadjustedSelectedRows[i] = state.selectedRows[i];\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\ttabLoadingStates: adjustedLoadingStates,\n\t\t\t\t\ttabErrors: adjustedErrors,\n\t\t\t\t\tselectedRows: adjustedSelectedRows,\n\t\t\t\t};\n\n\t\t\tcase \"RESET_STATE\":\n\t\t\t\treturn {\n\t\t\t\t\tselectedIndex: 0,\n\t\t\t\t\ttabLoadingStates: new Array(state.tabLoadingStates.length).fill(false),\n\t\t\t\t\ttabErrors: new Array(state.tabErrors.length).fill(null),\n\t\t\t\t\tsortConfig: [],\n\t\t\t\t\tselectedRows: new Array(state.selectedRows.length).fill([]),\n\t\t\t\t\tglobalSelectedRowData: null,\n\t\t\t\t\tfilters: undefined,\n\t\t\t\t};\n\n\t\t\tdefault:\n\t\t\t\treturn state;\n\t\t}\n\t}\n\n/**\n * Component reference interface for imperative actions\n */\nexport interface AriaTabsDataGridRef {\n\tselectTab: (index: number) => void;\n\trefreshData: (tabIndex?: number) => void;\n\texportData: (tabIndex?: number) => any[];\n\tgetSelectedRows: (tabIndex?: number) => number[];\n\tclearSelection: (tabIndex?: number) => void;\n\tapplyFilters: (filters: any) => void;\n}\n\n/**\n * Integrated Tabs and DataGrid component with full ARIA compliance\n */\nexport const AriaTabsDataGrid = forwardRef<\n\tAriaTabsDataGridRef,\n\tAriaTabsDataGridProps\n>(function AriaTabsDataGrid(props, ref) {\n\tconst {\n\t\tdataConfig = {},\n\t\ttabPanels,\n\t\tselectedIndex: selectedIndexProp,\n\t\tonTabChange,\n\t\tonGlobalRowSelectionChange,\n\t\tariaLabel,\n\t\tariaDescription,\n\t\tclassName = \"\",\n\t\tdisabled = false,\n\t\torientation = \"horizontal\",\n\t\tid,\n\t\tisLoading = false,\n\t\tloadingComponent,\n\t\terror = null,\n\t\terrorComponent,\n\t\t\"data-testid\": dataTestId,\n\t\tactions,\n\t\tactionsMinGap = 16,\n\t\tforceActionsAbove = false,\n\t\thideTabsIfSingle = false,\n\t\tminColumnWidth,\n\t\tenableColumnCollapse = false,\n\t\tminVisibleColumns = 2,\n\t\tshowCollapsedColumnsIndicator = true,\n\t\tsortStatusPlacement = 'header',\n\t} = props;\n\n\t// Allow developer to hide the tab list when only a single tab/panel is provided\n\tconst tabsHidden = hideTabsIfSingle && tabPanels.length === 1;\n\n\t// Generate a stable base ID for internal helper elements. Prefer explicit `id` prop,\n\t// otherwise use React's SSR-safe useId to avoid hydration mismatches.\n\tconst reactId = useId();\n\tconst baseId = id ?? `aria-tabs-datagrid-${reactId}`;\n\n\t// ariaDescription can be either a reference id (when consumers pass an existing element id)\n\t// or plain descriptive text. Detect simple ids (no whitespace) and handle accordingly.\n\tconst descriptionLooksLikeId =\n\t\ttypeof ariaDescription === \"string\" &&\n\t\tariaDescription.trim() !== \"\" &&\n\t\t!/\\s/.test(ariaDescription);\n\tconst generatedDescriptionId = `${baseId}-description`;\n\tconst navigationHelpId = `${baseId}-navigation-help`;\n\n\t// Extract data operation functions with defaults\n\tconst {\n\t\tdataComparator = (a: any, b: any) =>\n\t\t\tJSON.stringify(a) === JSON.stringify(b),\n\t\tfilterFunction = (data: any[]) => data,\n\t\tbooleanRenderer = (value: any) => (value ? \"\u2713\" : \"\u2717\"),\n\t} = dataConfig || {}; // Determine if component is controlled\n\tconst isControlled = selectedIndexProp !== undefined;\n\tconst selectedIndex = selectedIndexProp ?? 0;\n\n\t// Navigation state for hierarchical keyboard navigation (like GanttChart)\n\tconst [navigationState, setNavigationState] = useState<NavigationState>({\n\t\tfocusArea: tabsHidden ? \"headers\" : \"tabs\",\n\t\tfocusedTabIndex: selectedIndex,\n\t\tfocusedHeaderIndex: 0,\n\t\tfocusedRowIndex: 0,\n\t\tfocusedColumnIndex: 0,\n\t\tfocusedActionIndex: 0,\n\t\tisGridActive: false,\n\t});\n\n\t// Initialize state with empty sort configuration to avoid contamination\n\tconst initialState: AriaTabsDataGridState = useMemo(() => {\n\t\t// Don't combine initial sort configs - let users build their own sorting\n\t\t// This prevents \"mega-filter\" effects and state reset issues\n\t\treturn {\n\t\t\tselectedIndex,\n\t\t\ttabLoadingStates: new Array(tabPanels.length).fill(false),\n\t\t\ttabErrors: new Array(tabPanels.length).fill(null),\n\t\t\tsortConfig: [], // Start with empty sort config\n\t\t\tselectedRows: new Array(tabPanels.length).fill([]),\n\t\t\tglobalSelectedRowData: null,\n\t\t\tfilters: undefined,\n\t\t};\n\t}, [selectedIndex]); // Remove tabPanels dependency to prevent state resets\n\n\tconst [state, dispatch] = useReducer(tabsDataGridReducer, initialState);\n\n\t// Handle tabPanels length changes without resetting sort configuration\n\tuseEffect(() => {\n\t\tconst currentLength = state.tabLoadingStates.length;\n\t\tconst newLength = tabPanels.length;\n\n\t\tif (currentLength !== newLength) {\n\t\t\t// Adjust array lengths while preserving existing sort configuration\n\t\t\tdispatch({ type: \"ADJUST_ARRAYS\", payload: { newLength } });\n\t\t}\n\t}, [tabPanels.length]);\n\n\t// Controlled component support - sync selectedIndex when it changes externally\n\tuseEffect(() => {\n\t\tif (isControlled) {\n\t\t\tdispatch({ type: \"SET_SELECTED_INDEX\", payload: selectedIndex });\n\t\t}\n\t}, [selectedIndex, isControlled]);\n\n\t// Reset navigation state when selected tab changes to ensure proper keyboard navigation\n\tuseEffect(() => {\n\t\tsetNavigationState((prev) => ({\n\t\t\t...prev,\n\t\t\tfocusArea: tabsHidden ? \"headers\" : \"tabs\",\n\t\t\tfocusedTabIndex: state.selectedIndex,\n\t\t\tfocusedHeaderIndex: 0,\n\t\t\tfocusedRowIndex: 0,\n\t\t\tfocusedColumnIndex: 0,\n\t\t\tfocusedActionIndex: 0,\n\t\t\tisGridActive: false,\n\t\t}));\n\t}, [state.selectedIndex, tabsHidden]);\n\n\t// Horizontal scroll support for wide tables when min column width is applied\n\tconst scrollContainerRef = useRef<HTMLDivElement | null>(null);\n\tconst onOverflowScrollKey = useCallback((e: React.KeyboardEvent<HTMLDivElement>) => {\n\t\tif (!e.shiftKey) return;\n\t\tif (e.key === 'ArrowLeft') {\n\t\t\te.preventDefault();\n\t\t\tscrollContainerRef.current?.scrollBy({ left: -64, behavior: 'smooth' });\n\t\t} else if (e.key === 'ArrowRight') {\n\t\t\te.preventDefault();\n\t\t\tscrollContainerRef.current?.scrollBy({ left: 64, behavior: 'smooth' });\n\t\t}\n\t}, []);\n\n\t// Column collapse state: track hidden column keys per active panel index\n\tconst [hiddenColumnsByPanel, setHiddenColumnsByPanel] = useState<Record<number, Set<string>>>({});\n\tconst [collapsedPopoverOpen, setCollapsedPopoverOpen] = useState(false);\n\tconst collapsedButtonRef = useRef<HTMLButtonElement | null>(null);\n\tconst liveRegionRef = useRef<HTMLDivElement | null>(null);\n\n\t// Helper to get visible columns for a given panel index\n\tconst getVisibleColumns = useCallback((panelIndex: number): ColumnDefinition[] => {\n\t\tconst panel = tabPanels[panelIndex];\n\t\tif (!panel) return [] as ColumnDefinition[];\n\t\tconst hidden = hiddenColumnsByPanel[panelIndex] || new Set<string>();\n\t\treturn panel.columns.filter((col: ColumnDefinition) => !hidden.has(col.key));\n\t}, [tabPanels, hiddenColumnsByPanel]);\n\n\t// Compute visible columns for current panel given collapse rules\n\tconst computeHiddenColumns = useCallback((panelIndex: number) => {\n\t\tconst panel = tabPanels[panelIndex];\n\t\tif (!panel) return new Set<string>();\n\t\t// If collapse disabled, nothing hidden\n\t\tif (!enableColumnCollapse) return new Set<string>();\n\t\tconst container = scrollContainerRef.current?.parentElement as HTMLElement | null;\n\t\tif (!container) return new Set<string>();\n\t\t// Start with all columns visible, measure total min widths\n\t\tconst defaultMin = typeof minColumnWidth === 'number' ? `${minColumnWidth}px` : (minColumnWidth || '160px');\n\t\tconst cols = panel.columns.map((c, i) => ({\n\t\t\tkey: c.key,\n\t\t\tmin: c.minWidth !== undefined ? (typeof c.minWidth === 'number' ? `${c.minWidth}px` : String(c.minWidth)) : defaultMin,\n\t\t\tpriority: c.collapsePriority ?? i,\n\t\t\tlock: !!c.alwaysVisible,\n\t\t\tgroup: c.collapseGroup,\n\t\t\tgroupPriority: c.collapseGroupPriority ?? 0,\n\t\t}));\n\t\t// Calculate pixels from CSS lengths by creating a temporary element\n\t\tconst toPx = (len: string): number => {\n\t\t\tif (len.endsWith('px')) return parseFloat(len);\n\t\t\tconst probe = document.createElement('div');\n\t\t\tprobe.style.width = len;\n\t\t\tcontainer.appendChild(probe);\n\t\t\tconst px = probe.getBoundingClientRect().width;\n\t\t\tprobe.remove();\n\t\t\treturn px || 0;\n\t\t};\n\t\tconst totalWidth = cols.reduce((sum, c) => sum + toPx(c.min), 0);\n\t\tconst available = container.clientWidth;\n\t\tif (totalWidth <= available || cols.length <= minVisibleColumns) return new Set<string>();\n\t\t// Build collapse groups: group columns when group id provided, else treat individually\n\t\tconst items = cols.map((c, idx) => ({ ...c, idx }));\n\t\tconst groups = new Map<string, { keys: string[]; width: number; groupPriority: number; lock: boolean; indices: number[] }>();\n\t\tfor (const it of items) {\n\t\t\tif (it.group) {\n\t\t\t\tconst g = groups.get(it.group) || { keys: [], width: 0, groupPriority: it.groupPriority, lock: false, indices: [] };\n\t\t\t\tg.keys.push(it.key);\n\t\t\t\tg.width += toPx(it.min);\n\t\t\t\tg.groupPriority = Math.max(g.groupPriority, it.groupPriority);\n\t\t\t\tg.lock = g.lock || it.lock;\n\t\t\t\tg.indices.push(it.idx);\n\t\t\t\tgroups.set(it.group, g);\n\t\t\t}\n\t\t}\n\t\t// Candidates list: start with groups (that are not locked), then individual non-group columns\n\t\ttype Candidate = { type: 'group' | 'column'; keys: string[]; width: number; priority: number; rightmostIndex: number };\n\t\tconst candidates: Candidate[] = [];\n\t\tfor (const [_, g] of groups) {\n\t\t\tif (!g.lock) {\n\t\t\t\tcandidates.push({ type: 'group', keys: g.keys, width: g.width, priority: g.groupPriority, rightmostIndex: Math.max(...g.indices) });\n\t\t\t}\n\t\t}\n\t\tfor (const it of items) {\n\t\t\tif (!it.group && !it.lock) {\n\t\t\t\tcandidates.push({ type: 'column', keys: [it.key], width: toPx(it.min), priority: it.priority, rightmostIndex: it.idx });\n\t\t\t}\n\t\t}\n\t\t// Sort candidates: higher priority first, then drop rightmost first\n\t\tcandidates.sort((a, b) => {\n\t\t\tif (a.priority !== b.priority) return b.priority - a.priority;\n\t\t\treturn b.rightmostIndex - a.rightmostIndex;\n\t\t});\n\t\tlet hidden = new Set<string>();\n\t\tlet currentTotal = totalWidth;\n\t\tconst totalCols = cols.length;\n\t\tfor (const c of candidates) {\n\t\t\tif (totalCols - hidden.size <= minVisibleColumns) break;\n\t\t\tif (currentTotal - c.width >= available) {\n\t\t\t\tfor (const k of c.keys) hidden.add(k);\n\t\t\t\tcurrentTotal -= c.width;\n\t\t\t} else {\n\t\t\t\t// not enough to fit; try next lower priority\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\treturn hidden;\n\t}, [tabPanels, enableColumnCollapse, minColumnWidth, minVisibleColumns]);\n\n\t// Recompute on resize and when selectedIndex or columns change\n\tuseEffect(() => {\n\t\tif (!enableColumnCollapse) return;\n\t\tconst recompute = () => {\n\t\t\tconst hidden = computeHiddenColumns(state.selectedIndex);\n\t\t\tsetHiddenColumnsByPanel(prev => ({ ...prev, [state.selectedIndex]: hidden }));\n\t\t\t// Announce change to assistive tech\n\t\t\tif (showCollapsedColumnsIndicator && liveRegionRef.current) {\n\t\t\t\tconst count = hidden.size;\n\t\t\t\tliveRegionRef.current.textContent = count > 0 ? `${count} column${count === 1 ? '' : 's'} collapsed` : 'All columns visible';\n\t\t\t}\n\t\t};\n\t\trecompute();\n\t\tconst ro = new ResizeObserver(recompute);\n\t\tif (containerRef.current) ro.observe(containerRef.current);\n\t\treturn () => {\n\t\t\tro.disconnect();\n\t\t};\n\t}, [state.selectedIndex, tabPanels, enableColumnCollapse, computeHiddenColumns, showCollapsedColumnsIndicator]);\n\n\t// Handle global row selection callback\n\tuseEffect(() => {\n\t\tif (onGlobalRowSelectionChange) {\n\t\t\tonGlobalRowSelectionChange(state.globalSelectedRowData);\n\t\t}\n\t}, [state.globalSelectedRowData, onGlobalRowSelectionChange]);\n\n\t// Generic data equality check using provided or default comparator\n\tconst isDataEqual = useCallback(\n\t\t(data1: any, data2: any): boolean => {\n\t\t\treturn dataComparator(data1, data2);\n\t\t},\n\t\t[dataComparator]\n\t);\n\n\t// Handle tab selection with keyboard support\n\tconst handleTabSelect = useCallback(\n\t\t(index: number) => {\n\t\t\tif (\n\t\t\t\tindex >= 0 &&\n\t\t\t\tindex < tabPanels.length &&\n\t\t\t\t!tabPanels[index].disabled\n\t\t\t) {\n\t\t\t\tdispatch({ type: \"SET_SELECTED_INDEX\", payload: index });\n\t\t\t\t// Keep navigation state in sync\n\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\tfocusedTabIndex: index,\n\t\t\t\t\tfocusArea: \"tabs\",\n\t\t\t\t}));\n\t\t\t\tonTabChange?.(index);\n\t\t\t}\n\t\t},\n\t\t[tabPanels, onTabChange]\n\t);\n\n\t// Scroll tab into view utility\n\tconst initialScrollDoneRef = useRef(false);\n\tconst scrollTabIntoView = useCallback(\n\t\t(tabIndex: number, opts?: { force?: boolean }) => {\n\t\t\t// Skip centering the very first tab on initial mount so it stays flush-left\n\t\t\tif (!opts?.force && !initialScrollDoneRef.current && tabIndex === 0) {\n\t\t\t\tinitialScrollDoneRef.current = true; // prevent future skips\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tinitialScrollDoneRef.current = true;\n\t\t\t// Small delay to ensure DOM is ready\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst tabElement = tabRefs.current[tabIndex];\n\t\t\t\tconst tabListElement = tabElement?.parentElement as HTMLElement | null;\n\t\t\t\tif (tabElement && tabListElement) {\n\t\t\t\t\tconst tabOffsetLeft = tabElement.offsetLeft;\n\t\t\t\t\tconst tabWidth = tabElement.offsetWidth;\n\t\t\t\t\tconst tabListWidth = tabListElement.clientWidth;\n\t\t\t\t\tconst targetScrollLeft =\n\t\t\t\t\t\ttabOffsetLeft - tabListWidth / 2 + tabWidth / 2;\n\t\t\t\t\ttry {\n\t\t\t\t\t\ttabListElement.scrollTo({\n\t\t\t\t\t\t\tleft: Math.max(0, targetScrollLeft),\n\t\t\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch {\n\t\t\t\t\t\ttabElement.scrollIntoView({\n\t\t\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t\t\t\tblock: \"nearest\",\n\t\t\t\t\t\t\tinline: \"center\",\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else if (!process.env.SILENCE_SCROLL_DEBUG) {\n\t\t\t\t\tconsole.debug(\"[AriaTabsDataGrid] Missing elements for scroll\", {\n\t\t\t\t\t\ttabElementExists: !!tabElement,\n\t\t\t\t\t\ttabListElementExists: !!tabListElement,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, 50);\n\t\t},\n\t\t[]\n\t);\n\n\t// Hierarchical keyboard navigation handlers (inspired by GanttChart)\n\n\t// Tab refs for individual tabs\n\tconst tabRefs = useRef<(HTMLButtonElement | null)[]>([]);\n\tconst panelRefs = useRef<(HTMLDivElement | null)[]>([]);\n\n\t// Sort handlers for global sort configuration - cycles through asc -> desc -> none (remove)\n\tconst handleSort = useCallback(\n\t\t(tabIndex: number, key: string) => {\n\t\t\tconst currentSort = state.sortConfig || [];\n\t\t\tconst existingSort = currentSort.find(\n\t\t\t\t(sort: SortConfig) => sort.key === key\n\t\t\t);\n\n\t\t\tlet newSortConfig: SortConfig[];\n\t\t\tif (existingSort) {\n\t\t\t\tif (existingSort.direction === \"asc\") {\n\t\t\t\t\t// Change to descending\n\t\t\t\t\tnewSortConfig = currentSort.map((sort: SortConfig) =>\n\t\t\t\t\t\tsort.key === key ? { ...sort, direction: \"desc\" as const } : sort\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Remove the sort (desc -> none)\n\t\t\t\t\tnewSortConfig = currentSort.filter(\n\t\t\t\t\t\t(sort: SortConfig) => sort.key !== key\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Add new sort starting with ascending - append to end to maintain priority order\n\t\t\t\tnewSortConfig = [...currentSort, { key, direction: \"asc\" as const }];\n\t\t\t}\n\n\t\t\t// Dispatch the new sort configuration\n\t\t\tdispatch({\n\t\t\t\ttype: \"SET_SORT\",\n\t\t\t\tpayload: newSortConfig,\n\t\t\t});\n\n\t\t\t// Call custom sort handler if provided\n\t\t\tconst panel = tabPanels[tabIndex];\n\t\t\tpanel.onSort?.(key as any);\n\t\t},\n\t\t[state.sortConfig, tabPanels]\n\t);\n\n\t// Focus management utilities\n\tconst focusGridHeader = useCallback(\n\t\t(headerIndex: number) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst headerElement = document.querySelector(\n\t\t\t\t\t`[data-tab-panel=\"${state.selectedIndex}\"] th:nth-child(${headerIndex + 1})`\n\t\t\t\t) as HTMLElement;\n\t\t\t\tif (headerElement) {\n\t\t\t\t\theaderElement.focus();\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t},\n\t\t[state.selectedIndex]\n\t);\n\n\t// Reset all global sorts\n\t// const handleResetSorts = useCallback(() => {\n\t//   dispatch({\n\t//     type: 'SET_SORT',\n\t//     payload: []\n\t//   });\n\t// }, []);\n\n\t// Generate sort description text showing all global sorts\n\t// const getCurrentSortDescription = useCallback(() => {\n\t//   const currentSorts = state.sortConfig || [];\n\t//\n\t//   if (currentSorts.length === 0) {\n\t//     return 'No sorting applied';\n\t//   }\n\n\t//   // Show all global sorts with column labels where available\n\t//   const sortDescriptions = currentSorts.map((sort: SortConfig, index: number) => {\n\t//     // Find the column definition across all tabs\n\t//     let columnLabel = sort.key;\n\t//     for (const panel of tabPanels) {\n\t//       const column = panel.columns.find(col => col.key === sort.key);\n\t//       if (column) {\n\t//         columnLabel = column.label;\n\t//         break;\n\t//       }\n\t//     }\n\t//\n\t//     const direction = sort.direction === 'asc' ? 'ascending' : 'descending';\n\t//     return `${index + 1}. ${columnLabel} (${direction})`;\n\t//   });\n\n\t//   // Join with proper grammar: commas and 'and' before the last item\n\t//   let sortText: string;\n\t//   if (sortDescriptions.length === 1) {\n\t//     sortText = sortDescriptions[0];\n\t//   } else if (sortDescriptions.length === 2) {\n\t//     sortText = sortDescriptions.join(' and ');\n\t//   } else {\n\t//     const lastItem = sortDescriptions.pop();\n\t//     sortText = sortDescriptions.join(', ') + ', and ' + lastItem;\n\t//   }\n\n\t//   return `Sorted by: ${sortText}`;\n\t// }, [state.sortConfig, tabPanels]);\n\n\t// Configurable boolean rendering function\n\tconst renderBooleanIcon = useCallback(\n\t\t(value: boolean) => {\n\t\t\treturn booleanRenderer(value);\n\t\t},\n\t\t[booleanRenderer]\n\t);\n\n\tconst focusGridCell = useCallback(\n\t\t(rowIndex: number, colIndex: number) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst cellElement = document.querySelector(\n\t\t\t\t\t`[data-tab-panel=\"${state.selectedIndex}\"] tbody tr:nth-child(${rowIndex + 1}) td:nth-child(${colIndex + 1})`\n\t\t\t\t) as HTMLElement;\n\t\t\t\tif (cellElement) {\n\t\t\t\t\tcellElement.focus();\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t},\n\t\t[state.selectedIndex]\n\t);\n\n\t// Handle automatic focusing when navigation state changes\n\tuseEffect(() => {\n\t\t// Only auto-focus when isGridActive is true (indicates we're transitioning into the grid)\n\t\tif (navigationState.isGridActive) {\n\t\t\tif (navigationState.focusArea === \"headers\") {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfocusGridHeader(navigationState.focusedHeaderIndex);\n\t\t\t\t}, 0);\n\t\t\t} else if (navigationState.focusArea === \"cells\") {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfocusGridCell(\n\t\t\t\t\t\tnavigationState.focusedRowIndex,\n\t\t\t\t\t\tnavigationState.focusedColumnIndex\n\t\t\t\t\t);\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t}\n\t}, [\n\t\tnavigationState.focusArea,\n\t\tnavigationState.isGridActive,\n\t\tnavigationState.focusedHeaderIndex,\n\t\tnavigationState.focusedRowIndex,\n\t\tnavigationState.focusedColumnIndex,\n\t\tfocusGridHeader,\n\t\tfocusGridCell,\n\t]);\n\n\t// Scroll selected tab into view when tab changes\n\tuseEffect(() => {\n\t\tif (!tabsHidden) {\n\t\t\tscrollTabIntoView(state.selectedIndex);\n\t\t}\n\t}, [state.selectedIndex, scrollTabIntoView, tabsHidden]);\n\n\t// Grid header navigation (similar to GanttChart date navigation)\n\tconst handleHeaderKeyDown = useCallback(\n\t\t(event: React.KeyboardEvent, headerIndex: number) => {\n\t\t\tconst { key } = event;\n\t\t\tconst columnCount = getVisibleColumns(state.selectedIndex).length || 0;\n\n\t\t\tswitch (key) {\n\t\t\t\tcase \"ArrowLeft\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst prevHeaderIndex = Math.max(0, headerIndex - 1);\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusedHeaderIndex: prevHeaderIndex,\n\t\t\t\t\t}));\n\t\t\t\t\tfocusGridHeader(prevHeaderIndex);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ArrowRight\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst nextHeaderIndex = Math.min(columnCount - 1, headerIndex + 1);\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusedHeaderIndex: nextHeaderIndex,\n\t\t\t\t\t}));\n\t\t\t\t\tfocusGridHeader(nextHeaderIndex);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ArrowUp\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// When tabs are visible, navigate back to tabs; otherwise, try actions if present\n\t\t\t\t\tif (!tabsHidden) {\n\t\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tfocusArea: \"tabs\",\n\t\t\t\t\t\t\tfocusedTabIndex: state.selectedIndex,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tscrollTabIntoView(state.selectedIndex);\n\t\t\t\t\t\ttabRefs.current[state.selectedIndex]?.focus();\n\t\t\t\t\t} else if (actions) {\n\t\t\t\t\t\t// focus first action if available\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tconst toolbar = actionsRef.current;\n\t\t\t\t\t\t\tif (!toolbar) return;\n\t\t\t\t\t\t\tconst focusable = toolbar.querySelector<HTMLElement>(\n\t\t\t\t\t\t\t\t'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tfocusable?.focus();\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ArrowDown\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// Navigate to grid cells\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusArea: \"cells\",\n\t\t\t\t\t\tfocusedRowIndex: 0,\n\t\t\t\t\t\tfocusedColumnIndex: headerIndex,\n\t\t\t\t\t\tisGridActive: true,\n\t\t\t\t\t}));\n\t\t\t\t\t// Focus will happen in the next effect cycle when navigation state is updated\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Home\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tsetNavigationState((prev) => ({ ...prev, focusedHeaderIndex: 0 }));\n\t\t\t\t\tfocusGridHeader(0);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"End\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst lastHeaderIndex = columnCount - 1;\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusedHeaderIndex: lastHeaderIndex,\n\t\t\t\t\t}));\n\t\t\t\t\tfocusGridHeader(lastHeaderIndex);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Enter\":\n\t\t\t\tcase \" \":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// Sort by this visible column\n\t\t\t\t\tconst columnKey = getVisibleColumns(state.selectedIndex)[headerIndex]?.key;\n\t\t\t\t\tif (columnKey) {\n\t\t\t\t\t\thandleSort(state.selectedIndex, columnKey);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\ttabPanels,\n\t\t\tstate.selectedIndex,\n\t\t\thandleSort,\n\t\t\tsetNavigationState,\n\t\t\tfocusGridHeader,\n\t\t\tfocusGridCell,\n\t\t\ttabRefs,\n\t\t\tgetVisibleColumns,\n\t\t]\n\t);\n\n\t// Grid cell navigation (similar to GanttChart task navigation)\n\tconst handleCellKeyDown = useCallback(\n\t\t(event: React.KeyboardEvent, rowIndex: number, colIndex: number) => {\n\t\t\tconst { key } = event;\n\t\t\tconst currentPanel = tabPanels[state.selectedIndex];\n\t\t\tconst rowCount = currentPanel?.data.length || 0;\n\t\t\tconst columnCount = getVisibleColumns(state.selectedIndex).length || 0;\n\n\t\t\t// Grid navigation mode (moving between cells)\n\t\t\tswitch (key) {\n\t\t\t\tcase \"ArrowUp\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tif (rowIndex === 0) {\n\t\t\t\t\t\t// Navigate to headers\n\t\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tfocusArea: \"headers\",\n\t\t\t\t\t\t\tfocusedHeaderIndex: colIndex,\n\t\t\t\t\t\t\tisGridActive: false,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tfocusGridHeader(colIndex);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst newRowIndex = rowIndex - 1;\n\t\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tfocusedRowIndex: newRowIndex,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tfocusGridCell(newRowIndex, colIndex);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ArrowDown\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst newRowIndex = Math.min(rowCount - 1, rowIndex + 1);\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusedRowIndex: newRowIndex,\n\t\t\t\t\t}));\n\t\t\t\t\tfocusGridCell(newRowIndex, colIndex);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ArrowLeft\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst newColIndex = Math.max(0, colIndex - 1);\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusedColumnIndex: newColIndex,\n\t\t\t\t\t}));\n\t\t\t\t\tfocusGridCell(rowIndex, newColIndex);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"ArrowRight\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst nextColIndex = Math.min(columnCount - 1, colIndex + 1);\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusedColumnIndex: nextColIndex,\n\t\t\t\t\t}));\n\t\t\t\t\tfocusGridCell(rowIndex, nextColIndex);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Home\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tif (event.ctrlKey) {\n\t\t\t\t\t\t// Go to first cell\n\t\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tfocusedRowIndex: 0,\n\t\t\t\t\t\t\tfocusedColumnIndex: 0,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tfocusGridCell(0, 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Go to first column in current row\n\t\t\t\t\t\tsetNavigationState((prev) => ({ ...prev, focusedColumnIndex: 0 }));\n\t\t\t\t\t\tfocusGridCell(rowIndex, 0);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"End\":\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tif (event.ctrlKey) {\n\t\t\t\t\t\t// Go to last cell\n\t\t\t\t\t\tconst lastRow = rowCount - 1;\n\t\t\t\t\t\tconst lastCol = columnCount - 1;\n\t\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tfocusedRowIndex: lastRow,\n\t\t\t\t\t\t\tfocusedColumnIndex: lastCol,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tfocusGridCell(lastRow, lastCol);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Go to last column in current row\n\t\t\t\t\t\tconst lastCol = columnCount - 1;\n\t\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tfocusedColumnIndex: lastCol,\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tfocusGridCell(rowIndex, lastCol);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Enter\":\n\t\t\t\tcase \" \": // Space key\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// Handle row selection - we'll get the row data from currentPanel.data\n\t\t\t\t\tif (currentPanel && currentPanel.data[rowIndex]) {\n\t\t\t\t\t\t// Get filtered data\n\t\t\t\t\t\tconst displayData = currentPanel.data.some(\n\t\t\t\t\t\t\t(item: any) => \"ews_data\" in item\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t? filterFunction(currentPanel.data, state.filters)\n\t\t\t\t\t\t\t: currentPanel.data;\n\n\t\t\t\t\t\t// Sort the data based on the global sort configuration\n\t\t\t\t\t\tconst sortConfig = state.sortConfig;\n\t\t\t\t\t\tlet sortedData = displayData;\n\t\t\t\t\t\tif (sortConfig && sortConfig.length > 0) {\n\t\t\t\t\t\t\tconst comparator = buildMultiComparator(currentPanel.columns as any, sortConfig, NullsPosition.Last, dataConfig?.sortingOptions);\n\t\t\t\t\t\t\tsortedData = [...displayData].sort(comparator);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (sortedData[rowIndex]) {\n\t\t\t\t\t\t\tconst row = sortedData[rowIndex];\n\t\t\t\t\t\t\tconst isCurrentlySelected =\n\t\t\t\t\t\t\t\tstate.globalSelectedRowData &&\n\t\t\t\t\t\t\t\tisDataEqual(state.globalSelectedRowData, row);\n\t\t\t\t\t\t\tconst newSelectedRowData = isCurrentlySelected ? null : row;\n\t\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\t\ttype: \"SET_GLOBAL_SELECTED_ROW_DATA\",\n\t\t\t\t\t\t\t\tpayload: newSelectedRowData,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\ttabPanels,\n\t\t\tstate.selectedIndex,\n\t\t\tstate.filters,\n\t\t\tstate.sortConfig,\n\t\t\tfilterFunction,\n\t\t\tisDataEqual,\n\t\t\tdispatch,\n\t\t\tsetNavigationState,\n\t\t\tfocusGridHeader,\n\t\t\tfocusGridCell,\n\t\t\tgetVisibleColumns,\n\t\t]\n\t);\n\n\t// Configurable filter function\n\tconst getFilteredData = useCallback(\n\t\t(data: any[], filters?: any): any[] => {\n\t\t\treturn filterFunction(data, filters);\n\t\t},\n\t\t[filterFunction]\n\t);\n\n\t// Imperative API\n\tuseImperativeHandle(\n\t\tref,\n\t\t() => ({\n\t\t\tselectTab: (index: number) => {\n\t\t\t\tif (index >= 0 && index < tabPanels.length) {\n\t\t\t\t\tdispatch({ type: \"SET_SELECTED_INDEX\", payload: index });\n\t\t\t\t\tonTabChange?.(index);\n\t\t\t\t}\n\t\t\t},\n\t\t\trefreshData: (tabIndex?: number) => {\n\t\t\t\t// Implementation for data refresh\n\t\t\t\tconsole.log(\"Refreshing data for tab:\", tabIndex ?? \"all\");\n\t\t\t},\n\t\t\texportData: (tabIndex?: number) => {\n\t\t\t\tconst targetIndex = tabIndex ?? state.selectedIndex;\n\t\t\t\tconst panel = tabPanels[targetIndex];\n\t\t\t\treturn panel ? panel.data : [];\n\t\t\t},\n\t\t\tgetSelectedRows: (_tabIndex?: number) => {\n\t\t\t\t// Return global selected row as an array for backwards compatibility\n\t\t\t\t// For global row selection, we need to find the row index of the selected data\n\t\t\t\t// This requires the sortedData to be available in this scope\n\t\t\t\tconst selectedRows = state.globalSelectedRowData ? [] : []; // We'll handle this in the render where sortedData is available\n\t\t\t\treturn selectedRows;\n\t\t\t},\n\t\t\tclearSelection: (_tabIndex?: number) => {\n\t\t\t\t// Clear global selection instead of per-tab selection\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"SET_GLOBAL_SELECTED_ROW_DATA\",\n\t\t\t\t\tpayload: null,\n\t\t\t\t});\n\t\t\t},\n\t\t\tapplyFilters: (filters: any) => {\n\t\t\t\tdispatch({ type: \"SET_FILTERS\", payload: filters });\n\t\t\t},\n\t\t}),\n\t\t[state.selectedIndex, state.selectedRows, tabPanels, onTabChange]\n\t);\n\n\t// Loading state\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={`aria-tabs-datagrid aria-tabs-datagrid--loading ${className}`}\n\t\t\t\tdata-testid={dataTestId}\n\t\t\t>\n\t\t\t\t{loadingComponent || (\n\t\t\t\t\t<div className=\"aria-tabs-datagrid__loading\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"nhsuk-spinner\"\n\t\t\t\t\t\t\trole=\"status\"\n\t\t\t\t\t\t\taria-label=\"Loading data\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"nhsuk-u-visually-hidden\">Loading...</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Error state\n\tif (error) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={`aria-tabs-datagrid aria-tabs-datagrid--error ${className}`}\n\t\t\t\tdata-testid={dataTestId}\n\t\t\t>\n\t\t\t\t{errorComponent || (\n\t\t\t\t\t<div className=\"aria-tabs-datagrid__error\" role=\"alert\">\n\t\t\t\t\t\t<h3 className=\"nhsuk-error-summary__title\">Error loading data</h3>\n\t\t\t\t\t\t<p>{error}</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Responsive actions placement: attempt inline (right side) if tabs + actions fit in container width\n\tconst containerRef = useRef<HTMLDivElement | null>(null);\n\tconst tabListRef = useRef<HTMLDivElement | null>(null);\n\tconst actionsRef = useRef<HTMLDivElement | null>(null);\n\tconst [placeActionsInline, setPlaceActionsInline] = useState(true); // optimistic: try inline first\n\n\tuseEffect(() => {\n\t\tif (!actions) {\n\t\t\tsetPlaceActionsInline(false);\n\t\t\treturn;\n\t\t}\n\t\t// If there are no tabs visible, always place actions above the table\n\t\tif (tabsHidden || forceActionsAbove) {\n\t\t\tsetPlaceActionsInline(false);\n\t\t\treturn;\n\t\t}\n\t\tfunction recompute() {\n\t\t\tif (!containerRef.current || !tabListRef.current || !actionsRef.current) return;\n\t\t\tconst containerWidth = containerRef.current.clientWidth;\n\t\t\t// Measure sum of tab buttons widths\n\t\t\tconst tabButtons = Array.from(\n\t\t\t\ttabListRef.current.querySelectorAll(':scope > .aria-tabs-datagrid__tab')\n\t\t\t) as HTMLElement[];\n\t\t\tconst tabsWidth = tabButtons.reduce((w, el) => w + el.offsetWidth, 0);\n\t\t\tconst actionsWidth = actionsRef.current.offsetWidth;\n\t\t\tconst estimatedGaps = Math.max(8 * (tabButtons.length - 1), 0);\n\t\t\tconst fits = tabsWidth + estimatedGaps + actionsWidth + actionsMinGap <= containerWidth;\n\t\t\tsetPlaceActionsInline(fits);\n\t\t}\n\t\t// Delay measurement to next frame to allow fonts/layout settle\n\t\tconst raf = requestAnimationFrame(() => recompute());\n\t\tconst ro = new ResizeObserver(() => recompute());\n\t\tif (containerRef.current) ro.observe(containerRef.current);\n\t\tif (tabListRef.current) ro.observe(tabListRef.current);\n\t\treturn () => {\n\t\t\tcancelAnimationFrame(raf);\n\t\t\tro.disconnect();\n\t\t};\n\t}, [actions, actionsMinGap, forceActionsAbove, tabPanels.length, tabsHidden]);\n\n\t// Actions toolbar navigation helpers now that placement state exists\n\tconst actionsContainerRef = actionsRef; // reuse DOM ref\n\tconst getActionElements = useCallback((): HTMLElement[] => {\n\t\tif (!actionsContainerRef.current) return [];\n\t\treturn Array.from(\n\t\t\tactionsContainerRef.current.querySelectorAll<HTMLElement>(\n\t\t\t\t'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n\t\t\t)\n\t\t).filter((el) => !el.hasAttribute(\"disabled\"));\n\t}, []);\n\tconst focusAction = useCallback(\n\t\t(idx: number) => {\n\t\t\tconst els = getActionElements();\n\t\t\tif (!els.length) return;\n\t\t\tconst clamped = Math.max(0, Math.min(idx, els.length - 1));\n\t\t\tels[clamped].focus();\n\t\t\tsetNavigationState((prev) => ({ ...prev, focusArea: \"actions\", focusedActionIndex: clamped }));\n\t\t},\n\t\t[getActionElements]\n\t);\n\tconst focusFirstAction = useCallback(() => focusAction(0), [focusAction]);\n\n\tconst handleTabKeyDown = useCallback(\n\t\t(event: React.KeyboardEvent, index: number) => {\n\t\t\tconst { key } = event;\n\t\t\tconst lastTab = tabPanels.length - 1;\n\t\t\tswitch (key) {\n\t\t\t\tcase \"ArrowUp\": {\n\t\t\t\t\tif (actions && !placeActionsInline) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tfocusFirstAction();\n\t\t\t\t\t}\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"ArrowLeft\": {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst prevIdx = index > 0 ? index - 1 : lastTab;\n\t\t\t\t\thandleTabSelect(prevIdx);\n\t\t\t\t\tscrollTabIntoView(prevIdx);\n\t\t\t\t\ttabRefs.current[prevIdx]?.focus();\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"ArrowRight\": {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tif (index === lastTab && actions && placeActionsInline) {\n\t\t\t\t\t\tfocusFirstAction();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst nextIdx = index < lastTab ? index + 1 : 0;\n\t\t\t\t\thandleTabSelect(nextIdx);\n\t\t\t\t\tscrollTabIntoView(nextIdx);\n\t\t\t\t\ttabRefs.current[nextIdx]?.focus();\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"ArrowDown\": {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tsetNavigationState((prev) => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tfocusArea: \"headers\",\n\t\t\t\t\t\tfocusedHeaderIndex: 0,\n\t\t\t\t\t\tisGridActive: true,\n\t\t\t\t\t}));\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"Home\": {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\thandleTabSelect(0);\n\t\t\t\t\tscrollTabIntoView(0);\n\t\t\t\t\ttabRefs.current[0]?.focus();\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"End\": {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\thandleTabSelect(lastTab);\n\t\t\t\t\tscrollTabIntoView(lastTab);\n\t\t\t\t\ttabRefs.current[lastTab]?.focus();\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"Enter\":\n\t\t\t\tcase \" \": {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\thandleTabSelect(index);\n\t\t\t\t\tbreak; }\n\t\t\t\tcase \"Tab\": {\n\t\t\t\t\tif (!event.shiftKey && index === lastTab && actions && placeActionsInline) {\n\t\t\t\t\t\tfocusFirstAction();\n\t\t\t\t\t}\n\t\t\t\t\tbreak; }\n\t\t\t}\n\t\t},\n\t\t[tabPanels.length, handleTabSelect, scrollTabIntoView, actions, placeActionsInline, focusFirstAction]\n\t);\n\n\tconst handleActionsKeyDown = useCallback((event: React.KeyboardEvent) => {\n\t\tconst { key } = event;\n\t\tconst els = getActionElements();\n\t\tif (!els.length) return;\n\t\tconst currentIndex = els.findIndex((el) => el === document.activeElement);\n\t\tswitch (key) {\n\t\t\tcase 'ArrowLeft': {\n\t\t\t\tif (placeActionsInline) {\n\t\t\t\t\tif (currentIndex > 0) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tfocusAction(currentIndex - 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t// move focus to last tab\n\t\t\t\t\t\tconst last = tabPanels.length - 1;\n\t\t\t\t\t\thandleTabSelect(last);\n\t\t\t\t\t\tscrollTabIntoView(last);\n\t\t\t\t\t\ttabRefs.current[last]?.focus();\n\t\t\t\t\t\tsetNavigationState((p) => ({ ...p, focusArea: 'tabs', focusedTabIndex: last }));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak; }\n\t\t\tcase 'ArrowRight': {\n\t\t\t\tif (placeActionsInline) {\n\t\t\t\t\tif (currentIndex < els.length - 1) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tfocusAction(currentIndex + 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// wrap to first tab\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\thandleTabSelect(0);\n\t\t\t\t\t\tscrollTabIntoView(0);\n\t\t\t\t\t\ttabRefs.current[0]?.focus();\n\t\t\t\t\t\tsetNavigationState((p) => ({ ...p, focusArea: 'tabs', focusedTabIndex: 0 }));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak; }\n\t\t\tcase 'ArrowDown': {\n\t\t\t\t// If actions are above (not inline), move to tabs; else move into headers\n\t\t\t\tif (!placeActionsInline) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// focus currently selected tab\n\t\t\t\t\tconst currentTab = state.selectedIndex;\n\t\t\t\t\ttabRefs.current[currentTab]?.focus();\n\t\t\t\t\tsetNavigationState((p) => ({ ...p, focusArea: 'tabs', focusedTabIndex: currentTab }));\n\t\t\t\t} else {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tsetNavigationState((prev) => ({ ...prev, focusArea: 'headers', focusedHeaderIndex: 0, isGridActive: true }));\n\t\t\t\t}\n\t\t\t\tbreak; }\n\t\t}\n\t}, [getActionElements, placeActionsInline, focusAction, tabPanels.length, handleTabSelect, scrollTabIntoView, state.selectedIndex]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`aria-tabs-datagrid aria-tabs-datagrid--${orientation} ${className}`}\n\t\t\tid={id}\n\t\t\tdata-testid={dataTestId}\n\t\t\tref={containerRef}\n\t\t>\n\t\t\t{/* Optional descriptive text (converted from plain string to element for aria-describedby).\n\t\t    If `ariaDescription` looks like an existing id, use it directly; otherwise render a\n\t\t    visually-hidden element with a generated id and put the text there. */}\n\t\t\t{ariaDescription && !descriptionLooksLikeId && (\n\t\t\t\t<div id={generatedDescriptionId} className=\"nhsuk-u-visually-hidden\">\n\t\t\t\t\t{ariaDescription}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{/* Keyboard Navigation Instructions (Screen Reader Only) */}\n\t\t\t<div\n\t\t\t\tclassName=\"aria-tabs-datagrid__navigation-help sr-only\"\n\t\t\t\tid={navigationHelpId}\n\t\t\t>\n\t\t\t\tKeyboard navigation: Use Tab to move between tabs and grid. Arrow keys\n\t\t\t\tnavigate within tabs and grid cells. Enter activates tabs and sorts\n\t\t\t\tcolumns. Arrow Down from tabs moves to table headers. Arrow Down from\n\t\t\t\theaders moves to table cells. Use Arrow keys to navigate between cells.\n\t\t\t</div>\n\n\t\t\t{ sortStatusPlacement === 'header' && (\n\t\t\t\t<SortStatusControl\n\t\t\t\t\tsortConfig={state.sortConfig || []}\n\t\t\t\t\tcolumns={tabPanels\n\t\t\t\t\t\t.flatMap((panel) => panel.columns.map((col) => ({ key: col.key, label: col.label })))\n\t\t\t\t\t\t.filter((col, index, arr) => arr.findIndex((c) => c.key === col.key) === index)\n\t\t\t\t\t}\n\t\t\t\t\tonSortChange={(newSortConfig) => {\n\t\t\t\t\t\tdispatch({ type: \"SET_SORT\", payload: newSortConfig });\n\t\t\t\t\t}}\n\t\t\t\t\tariaLabel=\"Data grid sort configuration\"\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{/* Tab List with Manual ARIA Implementation */}\n\t\t\t{/* Actions above when not inline, or when tabs are hidden */}\n\t\t\t{ actions && (!placeActionsInline || tabsHidden) && (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--above\"\n\t\t\t\t\tref={actionsRef}\n\t\t\t\t\trole=\"toolbar\"\n\t\t\t\t\taria-label=\"Additional actions\"\n\t\t\t\t\tonKeyDown={handleActionsKeyDown}\n\t\t\t\t>\n\t\t\t\t\t{actions}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{ !tabsHidden && (\n\t\t\t\t<div className={`aria-tabs-datagrid__tabs-wrapper ${placeActionsInline ? 'aria-tabs-datagrid__tabs-wrapper--inline-actions' : ''}`}> \n\t\t\t\t\t<div\n\t\t\t\t\t\trole=\"tablist\"\n\t\t\t\t\t\taria-label={ariaLabel}\n\t\t\t\t\t\taria-describedby={(() => {\n\t\t\t\t\t\t\tif (ariaDescription) {\n\t\t\t\t\t\t\t\treturn descriptionLooksLikeId ? (ariaDescription as string) : generatedDescriptionId;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn navigationHelpId;\n\t\t\t\t\t\t})()}\n\t\t\t\t\t\taria-orientation={orientation}\n\t\t\t\t\t\tclassName=\"aria-tabs-datagrid__tabs\"\n\t\t\t\t\t\tref={tabListRef}\n\t\t\t\t\t>\n\t\t\t\t\t\t{tabPanels.map((panel, index) => {\n\t\t\t\t\t\t\tconst isSelected = index === state.selectedIndex;\n\t\t\t\t\t\t\tconst isDisabled = panel.disabled || disabled;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tkey={panel.id}\n\t\t\t\t\t\t\t\t\trole=\"tab\"\n\t\t\t\t\t\t\t\t\tid={`tab-${panel.id}`}\n\t\t\t\t\t\t\t\t\taria-controls={`panel-${panel.id}`}\n\t\t\t\t\t\t\t\t\taria-selected={isSelected}\n\t\t\t\t\t\t\t\t\taria-disabled={isDisabled}\n\t\t\t\t\t\t\t\t\ttabIndex={isSelected ? 0 : -1}\n\t\t\t\t\t\t\t\t\tref={(el) => { tabRefs.current[index] = el; }}\n\t\t\t\t\t\t\t\t\tonClick={() => handleTabSelect(index)}\n\t\t\t\t\t\t\t\t\tonKeyDown={(event) => handleTabKeyDown(event, index)}\n\t\t\t\t\t\t\t\t\tdisabled={isDisabled}\n\t\t\t\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t\t\t\t'aria-tabs-datagrid__tab',\n\t\t\t\t\t\t\t\t\t\tisSelected ? 'aria-tabs-datagrid__tab--selected' : '',\n\t\t\t\t\t\t\t\t\t\tisDisabled ? 'aria-tabs-datagrid__tab--disabled' : '',\n\t\t\t\t\t\t\t\t\t].filter(Boolean).join(' ')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span className=\"aria-tabs-datagrid__tab-label\">{panel.label}</span>\n\t\t\t\t\t\t\t\t\t{state.tabLoadingStates[index] && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"aria-tabs-datagrid__tab-loading\" aria-hidden=\"true\">\u23F3</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{state.tabErrors[index] && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"aria-tabs-datagrid__tab-error\" aria-hidden=\"true\">\u26A0\uFE0F</span>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t{ actions && placeActionsInline && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"aria-tabs-datagrid__actions aria-tabs-datagrid__actions--inline\"\n\t\t\t\t\t\t\tref={actionsRef}\n\t\t\t\t\t\t\trole=\"toolbar\"\n\t\t\t\t\t\t\taria-label=\"Additional actions\"\n\t\t\t\t\t\t\tonKeyDown={handleActionsKeyDown}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{actions}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t\t{/* Collapsed columns indicator (outside of panel) */}\n\t\t\t\t{enableColumnCollapse && showCollapsedColumnsIndicator && (() => {\n\t\t\t\t\tconst panelIndex = tabsHidden ? 0 : state.selectedIndex;\n\t\t\t\t\tconst hidden = hiddenColumnsByPanel[panelIndex] || new Set<string>();\n\t\t\t\t\tif (hidden.size === 0) return null;\n\t\t\t\t\tconst panel = tabPanels[panelIndex];\n\t\t\t\t\tconst hiddenLabels = panel ? panel.columns.filter(c => hidden.has(c.key)).map(c => c.label) : [];\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"aria-tabs-datagrid__collapsed-indicator\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"nhsuk-u-visually-hidden\"\n\t\t\t\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\t\t\t\tref={liveRegionRef}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"collapsed-chip-wrapper\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tref={collapsedButtonRef}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"collapsed-chip\"\n\t\t\t\t\t\t\t\t\ttitle={`Collapsed columns: ${hiddenLabels.join(', ')}`}\n\t\t\t\t\t\t\t\t\tonClick={() => setCollapsedPopoverOpen((v) => !v)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{hidden.size} hidden column{hidden.size === 1 ? '' : 's'}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t{collapsedPopoverOpen && (\n\t\t\t\t\t\t\t\t\t<div className=\"collapsed-popover\" role=\"dialog\" aria-label=\"Collapsed columns\">\n\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t{hiddenLabels.map((name, i) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<li key={i}>{name}</li>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})()}\n\n\t\t\t{/* Sort status control placement: above grid (after tabs/actions) */}\n\t\t\t{sortStatusPlacement === 'above' && (\n\t\t\t\t<SortStatusControl\n\t\t\t\t\tsortConfig={state.sortConfig || []}\n\t\t\t\t\tcolumns={tabPanels\n\t\t\t\t\t\t.flatMap((panel) => panel.columns.map((col) => ({ key: col.key, label: col.label })))\n\t\t\t\t\t\t.filter((col, index, arr) => arr.findIndex((c) => c.key === col.key) === index)\n\t\t\t\t\t}\n\t\t\t\t\tonSortChange={(newSortConfig) => {\n\t\t\t\t\t\tdispatch({ type: 'SET_SORT', payload: newSortConfig });\n\t\t\t\t\t}}\n\t\t\t\t\tariaLabel=\"Data grid sort configuration\"\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{/* Tab Panels */}\n\t\t\t{tabPanels.map((panel, index) => {\n\t\t\t\tconst isSelected = tabsHidden ? index === 0 : index === state.selectedIndex;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={panel.id}\n\t\t\t\t\t\trole={tabsHidden ? undefined : \"tabpanel\"}\n\t\t\t\t\t\tid={tabsHidden ? undefined as any : `panel-${panel.id}`}\n\t\t\t\t\t\taria-labelledby={tabsHidden ? undefined : `tab-${panel.id}`}\n\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\thidden={!isSelected}\n\t\t\t\t\t\tref={(el) => {\n\t\t\t\t\t\t\tpanelRefs.current[index] = el;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName={`aria-tabs-datagrid__panel ${panel.className || \"\"}`}\n\t\t\t\t\t\tdata-tab-panel={index}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isSelected &&\n\t\t\t\t\t\t\t(() => {\n\t\t\t\t\t\t\t\t// Get filtered data - check if it has healthcare structure\n\t\t\t\t\t\t\t\tconst displayData = panel.data.some(\n\t\t\t\t\t\t\t\t\t(item: any) => \"ews_data\" in item\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t? getFilteredData(panel.data, state.filters)\n\t\t\t\t\t\t\t\t\t: panel.data;\n\n\t\t\t\t\t\t\t\t// Sort the data based on the global sort configuration\n\t\t\t\t\t\t\t\tconst sortedData = useMemo(() => {\n\t\t\t\t\t\t\t\t\tconst sortConfig = state.sortConfig;\n\t\t\t\t\t\t\t\t\tif (!sortConfig || sortConfig.length === 0) return displayData;\n\t\t\t\t\t\t\t\t\tconst comparator = buildMultiComparator(panel.columns as any, sortConfig, NullsPosition.Last, dataConfig?.sortingOptions);\n\t\t\t\t\t\t\t\t\treturn [...displayData].sort(comparator);\n\t\t\t\t\t\t\t\t}, [displayData, state.sortConfig, panel.columns, dataConfig?.sortingOptions]);\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"aria-tabs-datagrid__scroll\"\n\t\t\t\t\t\t\t\t\t\tref={scrollContainerRef}\n\t\t\t\t\t\t\t\t\t\tonKeyDown={onOverflowScrollKey}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t// Expose CSS var to SCSS; inline for SSR safety\n\t\t\t\t\t\t\t\t\t\t\t['--atd-min-col-w' as any]: typeof minColumnWidth === 'number' ? `${minColumnWidth}px` : (minColumnWidth || undefined),\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{/* Collapsed columns indicator moved outside panel */}\n\t\t\t\t\t\t\t\t\t<table\n\t\t\t\t\t\t\t\t\t\tclassName=\"nhsuk-table aria-tabs-datagrid__grid\"\n\t\t\t\t\t\t\t\t\t\trole=\"grid\"\n\t\t\t\t\t\t\t\t\t\taria-label={panel.ariaLabel}\n\t\t\t\t\t\t\t\t\t\taria-describedby={\n\t\t\t\t\t\t\t\t\t\t\tpanel.ariaDescription\n\t\t\t\t\t\t\t\t\t\t\t\t? `panel-${panel.id}-description`\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{panel.ariaDescription && (\n\t\t\t\t\t\t\t\t\t\t\t<caption\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"nhsuk-u-visually-hidden\"\n\t\t\t\t\t\t\t\t\t\t\t\tid={`panel-${panel.id}-description`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{panel.ariaDescription}\n\t\t\t\t\t\t\t\t\t\t\t</caption>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t<thead className=\"nhsuk-table__head\" role=\"rowgroup\">\n\t\t\t\t\t\t\t\t\t\t\t<tr role=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{getVisibleColumns(index).map((column: ColumnDefinition, colIndex: number) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst sortInfo = state.sortConfig?.find(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(config: SortConfig) => config.key === column.key\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst isSorted = !!sortInfo;\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst isFocused =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusArea === \"headers\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusedHeaderIndex === colIndex;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={column.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`sortable-header ${isFocused ? \"sortable-header--focused\" : \"\"} ${isSorted ? \"sortable-header--sorted\" : \"\"}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole=\"columnheader\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={isFocused ? 0 : -1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleSort(index, column.key)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleHeaderKeyDown(e, colIndex)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-sort={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSorted\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? sortInfo?.direction === \"asc\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"ascending\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"descending\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ minWidth: (column.minWidth !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (typeof column.minWidth === 'number' ? `${column.minWidth}px` : column.minWidth)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: (typeof minColumnWidth === 'number' ? `${minColumnWidth}px` : (minColumnWidth || undefined))) as any }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"header-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"header-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{column.label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`sort-indicator-container ${isSorted ? `sort-indicator--${sortInfo?.direction}` : \"\"}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Show sort priority when any sort is configured and this column is sorted */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{state.sortConfig &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.sortConfig.length > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.sortConfig.findIndex(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(config: SortConfig) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfig.key === column.key\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) !== -1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`sort-priority sort-priority--priority-${state.sortConfig.findIndex((config: SortConfig) => config.key === column.key) + 1}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-priority={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.sortConfig.findIndex(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(config: SortConfig) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfig.key === column.key\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) + 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={`Sort priority: ${state.sortConfig.findIndex((config: SortConfig) => config.key === column.key) + 1}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{state.sortConfig.findIndex(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(config: SortConfig) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfig.key === column.key\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) + 1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Show sort arrow only when column is actually sorted */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{isSorted && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`nhsuk-icon sort-arrow sort-arrow--${sortInfo?.direction}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfocusable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path d=\"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t\t\t<tbody className=\"nhsuk-table__body\" role=\"rowgroup\">\n\t\t\t\t\t\t\t\t\t\t\t\t{sortedData.map((row, rowIndex) => {\n\t\t\t\t\t\t\t\t\t\t\t\t// Use global row selection instead of per-tab selection\n\t\t\t\t\t\t\t\t\t\t\t\tconst isRowSelected =\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate.globalSelectedRowData &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tisDataEqual(state.globalSelectedRowData, row);\n\t\t\t\t\t\t\t\t\t\t\t\tconst isRowFocused =\n\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusArea === \"cells\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusedRowIndex === rowIndex;\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trole=\"row\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`data-row ${isRowSelected ? \"data-row--selected\" : \"\"} ${isRowFocused ? \"data-row--focused\" : \"\"}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-selected={isRowSelected}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{getVisibleColumns(index).map((column: ColumnDefinition, colIndex: number) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Determine raw data value first (before any custom rendering)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst rawValue = row[column.key];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Apply custom renderer precedence: tableRenderer > render\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet value: any;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (column.tableRenderer) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = column.tableRenderer(row);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (column.render) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = column.render(row);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = rawValue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst isCellFocused =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusArea === \"cells\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusedRowIndex === rowIndex &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigationState.focusedColumnIndex === colIndex;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Handle boolean values with per-column or global rendering; otherwise render ReactNodes directly\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst renderValue = () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// If the final value is explicitly a boolean primitive and no custom renderer produced something else\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Column-level custom renderer always takes priority if provided\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (column.customRenderer) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst rendered = column.customRenderer(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trawValue,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trow\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"data-cell__custom\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-custom-rendered=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{rendered}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttypeof rawValue === \"boolean\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue === rawValue\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Boolean primitive fallback (global booleanRenderer handling)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{renderBooleanIcon(rawValue)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"nhsuk-u-visually-hidden\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{rawValue ? \"Yes\" : \"No\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// If renderer returned a React element / node, return as-is\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tReact.isValidElement(value) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttypeof value !== \"object\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn value ?? \"\";\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// For objects (e.g., custom complex results), let developer control stringification\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn value as any;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={column.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole=\"gridcell\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`data-cell ${isCellFocused ? \"data-cell--focused\" : \"\"}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={isCellFocused ? 0 : -1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ minWidth: (column.minWidth !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (typeof column.minWidth === 'number' ? `${column.minWidth}px` : column.minWidth)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: (typeof minColumnWidth === 'number' ? `${minColumnWidth}px` : (minColumnWidth || undefined))) as any }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Toggle global row selection - if same row clicked, deselect it\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst isCurrentlySelected =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.globalSelectedRowData &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisDataEqual(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.globalSelectedRowData,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trow\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst newSelectedRowData =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisCurrentlySelected ? null : row;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"SET_GLOBAL_SELECTED_ROW_DATA\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayload: newSelectedRowData,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleCellKeyDown(e, rowIndex, colIndex)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{renderValue()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t)})}\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})()}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t\t{sortStatusPlacement === 'below' && (\n\t\t\t\t<SortStatusControl\n\t\t\t\t\tsortConfig={state.sortConfig || []}\n\t\t\t\t\tcolumns={tabPanels\n\t\t\t\t\t\t.flatMap((panel) => panel.columns.map((col) => ({ key: col.key, label: col.label })))\n\t\t\t\t\t\t.filter((col, index, arr) => arr.findIndex((c) => c.key === col.key) === index)\n\t\t\t\t\t}\n\t\t\t\t\tonSortChange={(newSortConfig) => {\n\t\t\t\t\t\tdispatch({ type: 'SET_SORT', payload: newSortConfig });\n\t\t\t\t\t}}\n\t\t\t\t\tariaLabel=\"Data grid sort configuration\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n});\n", "/**\n * Sort Status Control Component\n * \n * Displays and manages sort configuration for data tables with interactive tags\n * allowing users to view, reorder, toggle direction, and remove sorts.\n */\n\nimport React, { useCallback, useMemo, useRef } from 'react';\nimport { Button } from '../../Button/Button';\nimport { Tag } from '../../Tag/Tag';\nimport { TagColor } from '../../Tag/Tag.types';\nimport { SortConfig } from '../AriaDataGridTypes';\nimport './SortStatusControl.scss';\n\n/**\n * Column definition for labeling sorts\n */\nexport interface SortColumn {\n  key: string;\n  label: string;\n}\n\n/**\n * Props for the SortStatusControl component\n */\nexport interface SortStatusControlProps {\n  /** Current sort configuration array */\n  sortConfig: SortConfig[];\n  /** Available columns for labeling sorts */\n  columns: SortColumn[];\n  /** Callback when sort configuration changes */\n  onSortChange: (newSortConfig: SortConfig[]) => void;\n  /** Optional CSS class name for styling */\n  className?: string;\n  /** Optional description text when no sorts are active */\n  emptyDescription?: React.ReactNode;\n  /** Optional description text when sorts are active */\n  activeDescription?: React.ReactNode;\n  /** Show/hide the reset button */\n  showReset?: boolean;\n  /** Show/hide the help text */\n  showHelp?: boolean;\n  /** Disable all interactions */\n  disabled?: boolean;\n  /** ARIA label for the sort status region */\n  ariaLabel?: string;\n  /** Additional ARIA describedby IDs */\n  ariaDescribedBy?: string;\n}\n\nexport const SortStatusControl: React.FC<SortStatusControlProps> = ({\n  sortConfig,\n  columns,\n  onSortChange,\n  className = '',\n  emptyDescription = 'No sorting applied',\n  activeDescription,\n  showReset = true,\n  showHelp = true,\n  disabled = false,\n  ariaLabel = 'Sort configuration',\n  ariaDescribedBy\n}) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Drag and drop state\n  const draggedItem = useRef<string | null>(null);\n  const draggedOverItem = useRef<string | null>(null);\n\n  // Handle drag start\n  const handleDragStart = useCallback((e: React.DragEvent, key: string) => {\n    if (disabled) return;\n    draggedItem.current = key;\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/plain', key);\n  }, [disabled]);\n\n  // Handle drag over\n  const handleDragOver = useCallback((e: React.DragEvent, key: string) => {\n    if (disabled || draggedItem.current === key) return;\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n    draggedOverItem.current = key;\n  }, [disabled]);\n\n  // Handle drop\n  const handleDrop = useCallback((e: React.DragEvent, targetKey: string) => {\n    if (disabled) return;\n    e.preventDefault();\n    \n    const sourceKey = draggedItem.current;\n    if (!sourceKey || sourceKey === targetKey) return;\n\n    const sourceIndex = sortConfig.findIndex(config => config.key === sourceKey);\n    const targetIndex = sortConfig.findIndex(config => config.key === targetKey);\n    \n    if (sourceIndex !== -1 && targetIndex !== -1) {\n      const newConfig = [...sortConfig];\n      const [draggedConfig] = newConfig.splice(sourceIndex, 1);\n      newConfig.splice(targetIndex, 0, draggedConfig);\n      onSortChange(newConfig);\n    }\n\n    // Reset drag state\n    draggedItem.current = null;\n    draggedOverItem.current = null;\n  }, [disabled, sortConfig, onSortChange]);\n\n  // Handle drag end\n  const handleDragEnd = useCallback(() => {\n    draggedItem.current = null;\n    draggedOverItem.current = null;\n  }, []);\n\n  // Helper function to get column label by key\n  const getColumnLabel = useCallback((key: string): string => {\n    const column = columns.find(col => col.key === key);\n    return column ? column.label : key;\n  }, [columns]);\n\n  // Get priority color based on index (matching the sort priority colors)\n  const getPriorityColor = useCallback((index: number): TagColor => {\n    const colorMap: TagColor[] = ['red', 'orange', 'blue', 'aqua-green', 'grey'];\n    return colorMap[index] || 'grey';\n  }, []);\n\n  // Handle direction toggle for a specific sort\n  const handleDirectionToggle = useCallback((sortKey: string) => {\n    if (disabled) return;\n    \n    const updatedConfig = sortConfig.map(config =>\n      config.key === sortKey\n        ? { ...config, direction: config.direction === 'asc' ? 'desc' as const : 'asc' as const }\n        : config\n    );\n    onSortChange(updatedConfig);\n  }, [sortConfig, onSortChange, disabled]);\n\n  // Handle removing a sort\n  const handleRemove = useCallback((sortKey: string) => {\n    if (disabled) return;\n    \n    const filteredConfig = sortConfig.filter(config => config.key !== sortKey);\n    onSortChange(filteredConfig);\n  }, [sortConfig, onSortChange, disabled]);\n\n  // Handle resetting all sorts\n  const handleReset = useCallback(() => {\n    if (disabled) return;\n    onSortChange([]);\n  }, [onSortChange, disabled]);\n\n  // Generate description text\n  const getSortDescription = (): React.ReactNode => {\n    if (sortConfig.length === 0) {\n      return emptyDescription;\n    }\n\n    if (activeDescription) {\n      return activeDescription;\n    }\n\n    const sortDescriptions = sortConfig.map((sort, index) => {\n      const direction = sort.direction === 'asc' ? 'ascending' : 'descending';\n      return `${index + 1}. ${getColumnLabel(sort.key)} (${direction})`;\n    });\n\n    if (sortDescriptions.length === 1) {\n      return `Sorted by: ${sortDescriptions[0]}`;\n    } else if (sortDescriptions.length === 2) {\n      return `Sorted by: ${sortDescriptions.join(' and ')}`;\n    } else {\n      const lastItem = sortDescriptions.pop();\n      return `Sorted by: ${sortDescriptions.join(', ')}, and ${lastItem}`;\n    }\n  };\n\n  // Build ARIA describedby\n  const describedBy = useMemo(() => {\n    const ids = ['sort-description'];\n    if (showHelp) ids.push('sort-help');\n    if (ariaDescribedBy) ids.push(ariaDescribedBy);\n    return ids.join(' ');\n  }, [showHelp, ariaDescribedBy]);\n\n  // If no sorts active, show empty state\n  if (sortConfig.length === 0) {\n    return (\n      <div className={`sort-status-control ${className}`}>\n        {/* Screen reader description */}\n        <div \n          className=\"sort-status-control__description\"\n          id=\"sort-description\"\n          aria-live=\"polite\"\n        >\n          {emptyDescription}\n        </div>\n        \n        {/* Help text */}\n        {showHelp && (\n          <div className=\"sort-status-control__help\" id=\"sort-help\">\n            <small>\n              Drag tags to reorder priority. Click tags or \u2191/\u2193 buttons to toggle ascending/descending. Click \u00D7 to remove a sort.\n            </small>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={`sort-status-control ${className}`}>\n      {/* Screen reader description */}\n      <div \n        className=\"sort-status-control__description sort-status-control__description--active\"\n        id=\"sort-description\"\n        aria-live=\"polite\"\n      >\n        { getSortDescription() }\n      </div>\n\t\t  <div className=\"sort-status-container\">\n\t\t\t{/* Sort tags container */}\n\t\t\t<div \n\t\t\t\tref={containerRef}\n\t\t\t\tclassName=\"sort-status-control__tags\"\n\t\t\t\trole=\"list\"\n\t\t\t\taria-label={ariaLabel}\n\t\t\t\taria-describedby={describedBy}\n\t\t\t>\n\t\t\t\t{ sortConfig.map((config, index) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={config.key}\n\t\t\t\t\t\tclassName=\"sort-status-control__tag-container\"\n\t\t\t\t\t\trole=\"listitem\"\n\t\t\t\t\t\tdraggable={!disabled}\n\t\t\t\t\t\tonDragStart={(e) => handleDragStart(e, config.key)}\n\t\t\t\t\t\tonDragOver={(e) => handleDragOver(e, config.key)}\n\t\t\t\t\t\tonDrop={(e) => handleDrop(e, config.key)}\n\t\t\t\t\t\tonDragEnd={handleDragEnd}\n\t\t\t\t\t\tonClick={() => handleDirectionToggle(config.key)}\n\t\t\t\t\t\tstyle={{ cursor: disabled ? 'default' : 'pointer' }}\n\t\t\t\t\t\ttitle={disabled ? '' : `Click to toggle sort direction. Currently ${config.direction === 'asc' ? 'ascending' : 'descending'}`}\n\t\t\t\t\t\tdata-key={config.key}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\tcolor={getPriorityColor(index)}\n\t\t\t\t\t\t\tclassName=\"sort-status-control__tag\"\n\t\t\t\t\t\t\tclosable\n\t\t\t\t\t\t\tonClose={() => handleRemove(config.key)}\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"sort-status-control__tag-content\">\n\t\t\t\t\t\t\t\t{/* Drag handle */}\n\t\t\t\t\t\t\t\t<div className=\"sort-status-control__drag-handle\" title=\"Drag to reorder\">\n\t\t\t\t\t\t\t\t\t\t\u22EE\u22EE\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* Priority number */}\n\t\t\t\t\t\t\t\t<div className={`sort-status-control__priority-badge sort-priority sort-priority--priority-${index + 1}`}>\n\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* Column label */}\n\t\t\t\t\t\t\t\t<span className=\"sort-status-control__tag-label\">\n\t\t\t\t\t\t\t\t\t\t{getColumnLabel(config.key)}\n\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t{/* Direction toggle button */}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"sort-status-control__direction-button\"\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\te.stopPropagation(); // Prevent tag click handler from firing\n\t\t\t\t\t\t\t\t\t\thandleDirectionToggle(config.key);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t\taria-label={`Toggle sort direction for ${getColumnLabel(config.key)}. Currently ${config.direction === 'asc' ? 'ascending' : 'descending'}`}\n\t\t\t\t\t\t\t\t\ttitle=\"Click to toggle between ascending and descending\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span className={`sort-status-control__direction-icon sort-status-control__direction-icon--${config.direction}`}>\n\t\t\t\t\t\t\t\t\t\t<svg \n\t\t\t\t\t\t\t\t\t\t\tclassName={`nhsuk-icon sort-status-control__chevron sort-status-control__chevron--${config.direction}`}\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\" \n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\" \n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\" \n\t\t\t\t\t\t\t\t\t\t\tfocusable=\"false\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path d=\"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z\" />\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tag>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t{/* Reset button */}\n\t\t\t{showReset && (\n\t\t\t\t<div className=\"sort-status-control__actions\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tonClick={handleReset}\n\t\t\t\t\t\t      disabled={disabled}\n\t\t\t\t\t\taria-label=\"Reset all sorting\"\n\t\t\t\t\t\tclassName=\"sort-status-control__reset-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\tClear All Sorts\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)}\n\t  </div>\n\n      {/* Instructions for users */}\n      {showHelp && (\n        <div className=\"sort-status-control__help\" id=\"sort-help\">\n          <small>\n            Drag tags to reorder priority. Click tags or \u2191/\u2193 buttons to toggle ascending/descending. Click \u00D7 to remove a sort.\n          </small>\n        </div>\n      )}\n    </div>\n  );\n};\n", "import * as React from \"react\";\nconst { forwardRef, useCallback, useState } = React;\nimport { ButtonVariant, ButtonSize, ButtonVariantLike, ButtonSizeLike } from \"./Button.types\";\nimport \"./Button.scss\";\nimport { mapButtonProps } from \"../../mapping/button\";\n\n/**\n * Base props for NHS Button component\n */\ninterface BaseButtonProps {\n\t/**\n\t * The variant of the button\n\t * @default 'primary'\n\t */\n\tvariant?: ButtonVariantLike;\n\n\t/**\n\t * The size of the button\n\t * @default 'default'\n\t */\n\tsize?: ButtonSizeLike;\n\n\t/**\n\t * Whether the button should take up the full width of its container\n\t * @default false\n\t */\n\tfullWidth?: boolean;\n\n\t/**\n\t * Additional CSS class names\n\t */\n\tclassName?: string;\n\n\t/**\n\t * Button content\n\t */\n\tchildren: React.ReactNode;\n\n\t/**\n\t * Prevent double click submissions (adds debouncing)\n\t * @default false\n\t */\n\tpreventDoubleClick?: boolean;\n}\n\n/**\n * Props when rendering as button element (no href)\n */\nexport interface ButtonAsButtonProps\n\textends BaseButtonProps,\n\t\tOmit<React.ButtonHTMLAttributes<HTMLButtonElement>, keyof BaseButtonProps> {\n\t/**\n\t * Button type\n\t * @default 'button'\n\t */\n\ttype?: \"button\" | \"submit\" | \"reset\";\n}\n\n/**\n * Props when rendering as anchor element (with href)\n */\nexport interface ButtonAsLinkProps\n\textends BaseButtonProps,\n\t\tOmit<\n\t\t\tReact.AnchorHTMLAttributes<HTMLAnchorElement>,\n\t\t\tkeyof BaseButtonProps | \"role\" | \"type\"\n\t\t> {\n\t/**\n\t * When provided, renders as anchor link instead of button\n\t */\n\thref: string;\n\n\t/**\n\t * Link target\n\t */\n\ttarget?: string;\n\n\t/**\n\t * Link rel attribute\n\t */\n\trel?: string;\n\n\t/**\n\t * Use aria-disabled for anchor elements (no native disabled support)\n\t * Use disabled prop instead for button elements\n\t */\n\t\"aria-disabled\"?: \"true\" | \"false\";\n}\n\n/**\n * NHS Button Component\n *\n * A button component that provides excellent accessibility out of the box\n * while following NHS design guidelines. Based on NHS.UK button patterns.\n *\n * Features:\n * - Full keyboard navigation support (Enter and Space key activation)\n * - Screen reader compatibility\n * - Focus management\n * - Proper ARIA attributes\n * - Double-click prevention\n * - Support for button and link variants\n *\n * @example\n * ```tsx\n * <Button variant=\"primary\" size=\"default\">\n *\t Continue\n * </Button>\n *\n * <Button href=\"/next-page\" variant=\"secondary\">\n *\t Go to next page\n * </Button>\n * ```\n */\n\n// Implementation function\nfunction ButtonComponent(\n\tprops: ButtonAsButtonProps | ButtonAsLinkProps,\n\tref: React.Ref<HTMLButtonElement | HTMLAnchorElement>\n): React.ReactElement {\n\tconst {\n\t\tchildren,\n\t\tvariant = ButtonVariant.Primary,\n\t\tsize = ButtonSize.Default,\n\t\tfullWidth = false,\n\t\tclassName = \"\",\n\t\tpreventDoubleClick = false,\n\t\t...rest\n\t} = props;\n\n\t// State for interactive data attributes (replaces React Aria state management)\n\tconst [isPressed, setIsPressed] = useState(false);\n\tconst [isHovered, setIsHovered] = useState(false);\n\tconst [isFocused, setIsFocused] = useState(false);\n\n\t// Normalised model (future shared with macro generator)\n\tconst model = mapButtonProps({\n\t\tvariant,\n\t\tsize,\n\t\tfullWidth,\n\t\tclassName,\n\t\tpreventDoubleClick,\n\t\thref: \"href\" in rest ? (rest as any).href : undefined,\n\t});\n\n\t// Build data attributes for styling (replaces React Aria data attributes)\n\tconst isDisabled =\n\t\t\"disabled\" in rest ? rest.disabled : rest[\"aria-disabled\"] === \"true\";\n\tconst dataAttributes = {\n\t\t...(isPressed && { \"data-pressed\": \"true\" }),\n\t\t...(isHovered && { \"data-hovered\": \"true\" }),\n\t\t...(isFocused && { \"data-focused\": \"true\" }),\n\t\t...(isDisabled && { \"data-disabled\": \"true\" }),\n\t};\n\n\t// Event handlers for state management\n\tconst handleMouseDown = useCallback(\n\t\t() => !isDisabled && setIsPressed(true),\n\t\t[isDisabled]\n\t);\n\tconst handleMouseUp = useCallback(() => setIsPressed(false), []);\n\tconst handleMouseEnter = useCallback(\n\t\t() => !isDisabled && setIsHovered(true),\n\t\t[isDisabled]\n\t);\n\tconst handleMouseLeave = useCallback(() => {\n\t\tsetIsHovered(false);\n\t\tsetIsPressed(false); // Reset pressed state when leaving\n\t}, []);\n\tconst handleFocus = useCallback(() => setIsFocused(true), []);\n\tconst handleBlur = useCallback(() => setIsFocused(false), []);\n\n\t// Handle keyboard navigation (Space key support for buttons and links with role=\"button\")\n\tconst handleKeyDown = useCallback(\n\t\t(event: React.KeyboardEvent<HTMLElement>) => {\n\t\t\t// Handle space bar activation for button role elements\n\t\t\tif (\n\t\t\t\tevent.key === \" \" &&\n\t\t\t\t(\"href\" in rest ||\n\t\t\t\t\tevent.currentTarget.getAttribute(\"role\") === \"button\")\n\t\t\t) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t(event.currentTarget as HTMLElement).click();\n\t\t\t}\n\t\t},\n\t\t[rest]\n\t);\n\n\t// Handle click with double-click prevention\n\tconst handleClick = useCallback(\n\t\t(event: React.MouseEvent<HTMLElement>) => {\n\t\t\t// Double-click prevention logic (following NHS.UK pattern)\n\t\t\tif (preventDoubleClick) {\n\t\t\t\tconst target = event.currentTarget as HTMLElement;\n\t\t\t\tconst isAlreadyProcessing =\n\t\t\t\t\ttarget.getAttribute(\"data-processing\") === \"true\";\n\n\t\t\t\tif (isAlreadyProcessing) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Mark as processing\n\t\t\t\ttarget.setAttribute(\"data-processing\", \"true\");\n\n\t\t\t\t// Clear processing state after 1 second\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\ttarget.removeAttribute(\"data-processing\");\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t},\n\t\t[preventDoubleClick]\n\t);\n\n\t// Render as anchor link if href is provided\n\tif (\"href\" in rest && rest.href) {\n\t\tconst {\n\t\t\tid,\n\t\t\tstyle,\n\t\t\ttitle,\n\t\t\t[\"aria-label\"]: ariaLabel,\n\t\t\t[\"aria-describedby\"]: ariaDescribedBy,\n\t\t\t[\"aria-labelledby\"]: ariaLabelledBy,\n\t\t\ttabIndex,\n\t\t\t...anchorRest\n\t\t} = rest as ButtonAsLinkProps as any;\n\t\tconst anchorProps = rest as ButtonAsLinkProps;\n\t\treturn (\n\t\t\t<a\n\t\t\t\tref={ref as React.Ref<HTMLAnchorElement>}\n\t\t\t\thref={anchorProps.href}\n\t\t\t\ttarget={anchorProps.target}\n\t\t\t\trel={anchorProps.rel}\n\t\t\t\tclassName={model.classes}\n\t\t\t\trole=\"button\"\n\t\t\t\tdraggable=\"false\"\n\t\t\t\tdata-module=\"nhs-button\"\n\t\t\t\t{...dataAttributes}\n\t\t\t\t{...(preventDoubleClick && { \"data-prevent-double-click\": \"true\" })}\n\t\t\t\t{...anchorRest}\n\t\t\t\tonKeyDown={(event) => {\n\t\t\t\t\tanchorProps.onKeyDown?.(event);\n\t\t\t\t\thandleKeyDown(event);\n\t\t\t\t}}\n\t\t\t\tonClick={(event) => {\n\t\t\t\t\tanchorProps.onClick?.(event);\n\t\t\t\t\thandleClick(event);\n\t\t\t\t}}\n\t\t\t\tonMouseDown={(event) => {\n\t\t\t\t\tanchorProps.onMouseDown?.(event);\n\t\t\t\t\thandleMouseDown();\n\t\t\t\t}}\n\t\t\t\tonMouseUp={(event) => {\n\t\t\t\t\tanchorProps.onMouseUp?.(event);\n\t\t\t\t\thandleMouseUp();\n\t\t\t\t}}\n\t\t\t\tonMouseEnter={(event) => {\n\t\t\t\t\tanchorProps.onMouseEnter?.(event);\n\t\t\t\t\thandleMouseEnter();\n\t\t\t\t}}\n\t\t\t\tonMouseLeave={(event) => {\n\t\t\t\t\tanchorProps.onMouseLeave?.(event);\n\t\t\t\t\thandleMouseLeave();\n\t\t\t\t}}\n\t\t\t\tonFocus={(event) => {\n\t\t\t\t\tanchorProps.onFocus?.(event);\n\t\t\t\t\thandleFocus();\n\t\t\t\t}}\n\t\t\t\tonBlur={(event) => {\n\t\t\t\t\tanchorProps.onBlur?.(event);\n\t\t\t\t\thandleBlur();\n\t\t\t\t}}\n\t\t\t\t// Note: anchor links don't support disabled, but we can simulate it with aria-disabled\n\t\t\t\taria-disabled={anchorProps[\"aria-disabled\"]}\n\t\t\t\t{...(anchorProps[\"aria-disabled\"] === \"true\" && { tabIndex: -1 })}\n\t\t\t\t// Extract relevant props excluding our custom ones\n\t\t\t\tid={id}\n\t\t\t\tstyle={style}\n\t\t\t\ttitle={title}\n\t\t\t\taria-label={ariaLabel}\n\t\t\t\taria-describedby={ariaDescribedBy}\n\t\t\t\taria-labelledby={ariaLabelledBy}\n\t\t\t\ttabIndex={tabIndex}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</a>\n\t\t);\n\t}\n\n\t// Render as button element\n\tconst {\n\t\tid,\n\t\tstyle,\n\t\ttitle,\n\t\t[\"aria-label\"]: ariaLabel,\n\t\t[\"aria-describedby\"]: ariaDescribedBy,\n\t\t[\"aria-labelledby\"]: ariaLabelledBy,\n\t\ttabIndex,\n\t\tname,\n\t\tvalue: valueProp,\n\t\tform,\n\t\tformAction,\n\t\tformEncType,\n\t\tformMethod,\n\t\tformNoValidate,\n\t\tformTarget,\n\t\tautoFocus,\n\t\t...buttonRest\n\t} = rest as any as ButtonAsButtonProps;\n\tconst buttonProps = rest as ButtonAsButtonProps;\n\treturn (\n\t\t<button\n\t\t\tref={ref as React.Ref<HTMLButtonElement>}\n\t\t\ttype={buttonProps.type || \"button\"}\n\t\t\tdisabled={buttonProps.disabled}\n\t\t\tclassName={model.classes}\n\t\t\tdata-module=\"nhs-button\"\n\t\t\t{...dataAttributes}\n\t\t\t{...(preventDoubleClick && { \"data-prevent-double-click\": \"true\" })}\n\t\t\t{...(buttonProps.disabled && { \"aria-disabled\": \"true\" })}\n\t\t\t{...buttonRest}\n\t\t\tonKeyDown={(event) => {\n\t\t\t\tbuttonProps.onKeyDown?.(event);\n\t\t\t\thandleKeyDown(event);\n\t\t\t}}\n\t\t\tonClick={(event) => {\n\t\t\t\tbuttonProps.onClick?.(event);\n\t\t\t\thandleClick(event);\n\t\t\t}}\n\t\t\tonMouseDown={(event) => {\n\t\t\t\tbuttonProps.onMouseDown?.(event);\n\t\t\t\thandleMouseDown();\n\t\t\t}}\n\t\t\tonMouseUp={(event) => {\n\t\t\t\tbuttonProps.onMouseUp?.(event);\n\t\t\t\thandleMouseUp();\n\t\t\t}}\n\t\t\tonMouseEnter={(event) => {\n\t\t\t\tbuttonProps.onMouseEnter?.(event);\n\t\t\t\thandleMouseEnter();\n\t\t\t}}\n\t\t\tonMouseLeave={(event) => {\n\t\t\t\tbuttonProps.onMouseLeave?.(event);\n\t\t\t\thandleMouseLeave();\n\t\t\t}}\n\t\t\tonFocus={(event) => {\n\t\t\t\tbuttonProps.onFocus?.(event);\n\t\t\t\thandleFocus();\n\t\t\t}}\n\t\t\tonBlur={(event) => {\n\t\t\t\tbuttonProps.onBlur?.(event);\n\t\t\t\thandleBlur();\n\t\t\t}}\n\t\t\t// Extract relevant props\n\t\t\tid={id}\n\t\t\tstyle={style}\n\t\t\ttitle={title}\n\t\t\taria-label={ariaLabel}\n\t\t\taria-describedby={ariaDescribedBy}\n\t\t\taria-labelledby={ariaLabelledBy}\n\t\t\ttabIndex={tabIndex}\n\t\t\tname={name}\n\t\t\tvalue={valueProp}\n\t\t\tform={form}\n\t\t\tformAction={formAction}\n\t\t\tformEncType={formEncType}\n\t\t\tformMethod={formMethod}\n\t\t\tformNoValidate={formNoValidate}\n\t\t\tformTarget={formTarget}\n\t\t\tautoFocus={autoFocus}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n}\n\n// Define overloaded function signatures\ninterface ButtonComponent {\n\t(\n\t\tprops: ButtonAsButtonProps & { ref?: React.Ref<HTMLButtonElement> }\n\t): React.ReactElement;\n\t(\n\t\tprops: ButtonAsLinkProps & { ref?: React.Ref<HTMLAnchorElement> }\n\t): React.ReactElement;\n\tdisplayName?: string;\n}\n\nexport const Button = forwardRef(ButtonComponent) as ButtonComponent;\nButton.displayName = \"Button\";\n\n// Export union type for compatibility\nexport type NHSButtonProps = ButtonAsButtonProps | ButtonAsLinkProps;\n\nexport default Button;\n", "// Pure mapping logic for Button. Converts external props to a normalised model\n// used by both React & Nunjucks renderers (future).\n\nexport interface ButtonInputProps {\n  variant?: string; // Accepts ButtonVariant enum values (string)\n  size?: string;    // Accepts ButtonSize enum values (string)\n  fullWidth?: boolean;\n  className?: string;\n  preventDoubleClick?: boolean;\n  href?: string;\n}\n\nexport interface NormalisedButtonModel {\n  tag: 'button' | 'a';\n  classes: string;\n  data: Record<string, string>;\n  attrs: Record<string, any>;\n  preventDoubleClick: boolean;\n}\n\nexport function mapButtonProps(input: ButtonInputProps): NormalisedButtonModel {\n  const variant = input.variant || 'primary';\n  const size = input.size || 'default';\n  const fullWidth = !!input.fullWidth;\n  const classes = [\n    'nhs-aria-button',\n    `nhs-aria-button--${variant}`,\n    size !== 'default' ? `nhs-aria-button--${size}` : '',\n    fullWidth ? 'nhs-aria-button--full-width' : '',\n    input.className || ''\n  ].filter(Boolean).join(' ');\n\n  const tag = input.href ? 'a' : 'button';\n  return {\n    tag,\n    classes,\n    data: { module: 'nhs-button' },\n    attrs: input.href ? { href: input.href, role: 'button' } : { type: 'button' },\n    preventDoubleClick: !!input.preventDoubleClick\n  };\n}\n", "export interface TagInputProps {\n  color?: string;\n  noBorder?: boolean;\n  closable?: boolean;\n  disabled?: boolean;\n  className?: string;\n}\n\nexport interface NormalisedTagModel {\n  classes: string;\n  showClose: boolean;\n  disabled: boolean;\n}\n\nexport function mapTagProps(input: TagInputProps): NormalisedTagModel {\n  const { color = 'default', noBorder, closable, disabled, className } = input;\n  const classes = [\n    'nhsuk-tag',\n    color !== 'default' ? `nhsuk-tag--${color}` : '',\n    noBorder ? 'nhsuk-tag--no-border' : '',\n    closable ? 'nhsuk-tag--closable' : '',\n    disabled ? 'nhsuk-tag--disabled' : '',\n    className || ''\n  ].filter(Boolean).join(' ');\n  return { classes, showClose: !!closable, disabled: !!disabled };\n}\n", "import React from \"react\";\nimport \"./Tag.scss\";\nimport { TagProps } from \"./Tag.types\";\nimport { mapTagProps } from \"../../mapping/tag\";\n\nexport const Tag: React.FC<TagProps> = ({\n\ttext,\n\thtml,\n\tchildren,\n\tcolor = \"default\",\n\tnoBorder = false,\n\tclosable = false,\n\tonClose,\n\tdisabled = false,\n\tclassName,\n\t...props\n}) => {\n\tconst model = mapTagProps({ color, noBorder, closable, disabled, className });\n\n\tconst handleClose = (e: React.MouseEvent) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tif (!disabled && onClose) {\n\t\t\tonClose();\n\t\t}\n\t};\n\n\treturn (\n\t\t<strong className={model.classes} {...props}>\n\t\t\t{/* Content - children take precedence, then html, then text */}\n\t\t\t{children ? (\n\t\t\t\tchildren\n\t\t\t) : html ? (\n\t\t\t\t<span dangerouslySetInnerHTML={{ __html: html }} />\n\t\t\t) : (\n\t\t\t\ttext\n\t\t\t)}\n\n\t\t\t{/* Close button */}\n\t\t\t{closable && (\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName=\"nhsuk-tag__close\"\n\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\taria-label=\"Remove\"\n\t\t\t\t\ttitle=\"Remove\"\n\t\t\t\t>\n\t\t\t\t\t\u00D7\n\t\t\t\t</button>\n\t\t\t)}\n\t\t</strong>\n\t);\n};\n", "/**\n * Sort Status Control Component\n *\n * Displays and manages sort configuration for data tables with interactive tags\n * allowing users to view, reorder, toggle direction, and remove sorts.\n */\n\nimport React, { useCallback, useMemo } from \"react\";\nimport { Button } from \"../Button/Button\";\nimport { Tag } from \"../Tag/Tag\";\nimport {\n\tSortStatusControlProps,\n\tDEFAULT_DIRECTION_LABELS,\n\tsortByPriority,\n\treassignPriorities,\n\tcanMoveUp,\n\tcanMoveDown,\n} from \"./SortStatusControlTypes\";\nimport \"./SortStatusControl.scss\";\n\nexport const SortStatusControl: React.FC<SortStatusControlProps> = ({\n\tsortConfig,\n\tonSortChange,\n\tclassName = \"\",\n\temptyDescription = \"No sorting applied\",\n\tactiveDescription,\n\tshowReset = true,\n\tshowHelp = true,\n\tdisabled = false,\n\tariaLabel = \"Sort configuration\",\n\tariaDescribedBy,\n}) => {\n\t// Sort the configuration by priority for display\n\tconst sortedConfig = useMemo(() => sortByPriority(sortConfig), [sortConfig]);\n\n\t// Handle direction toggle for a specific sort\n\tconst handleDirectionToggle = useCallback(\n\t\t(sortId: string) => {\n\t\t\tif (disabled) return;\n\n\t\t\tconst updatedConfig = sortConfig.map((config) =>\n\t\t\t\tconfig.id === sortId\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...config,\n\t\t\t\t\t\t\tdirection:\n\t\t\t\t\t\t\t\tconfig.direction === \"asc\"\n\t\t\t\t\t\t\t\t\t? (\"desc\" as const)\n\t\t\t\t\t\t\t\t\t: (\"asc\" as const),\n\t\t\t\t\t\t}\n\t\t\t\t\t: config\n\t\t\t);\n\t\t\tonSortChange(updatedConfig);\n\t\t},\n\t\t[sortConfig, onSortChange, disabled]\n\t);\n\n\t// Handle moving a sort up in priority (lower priority number)\n\tconst handleMoveUp = useCallback(\n\t\t(sortId: string) => {\n\t\t\tif (disabled) return;\n\n\t\t\tconst sortIndex = sortConfig.findIndex((c) => c.id === sortId);\n\t\t\tif (sortIndex <= 0) return; // Can't move up if already first or not found\n\n\t\t\tconst newConfig = [...sortConfig];\n\t\t\t[newConfig[sortIndex], newConfig[sortIndex - 1]] = [\n\t\t\t\tnewConfig[sortIndex - 1],\n\t\t\t\tnewConfig[sortIndex],\n\t\t\t];\n\t\t\tonSortChange(reassignPriorities(newConfig));\n\t\t},\n\t\t[sortConfig, onSortChange, disabled]\n\t);\n\n\t// Handle moving a sort down in priority (higher priority number)\n\tconst handleMoveDown = useCallback(\n\t\t(sortId: string) => {\n\t\t\tif (disabled) return;\n\n\t\t\tconst sortIndex = sortConfig.findIndex((c) => c.id === sortId);\n\t\t\tif (sortIndex >= sortConfig.length - 1 || sortIndex === -1) return; // Can't move down if already last or not found\n\n\t\t\tconst newConfig = [...sortConfig];\n\t\t\t[newConfig[sortIndex], newConfig[sortIndex + 1]] = [\n\t\t\t\tnewConfig[sortIndex + 1],\n\t\t\t\tnewConfig[sortIndex],\n\t\t\t];\n\t\t\tonSortChange(reassignPriorities(newConfig));\n\t\t},\n\t\t[sortConfig, onSortChange, disabled]\n\t);\n\n\t// Handle removing a sort\n\tconst handleRemove = useCallback(\n\t\t(sortId: string) => {\n\t\t\tif (disabled) return;\n\n\t\t\tconst filteredConfig = sortConfig.filter(\n\t\t\t\t(config) => config.id !== sortId\n\t\t\t);\n\t\t\tonSortChange(reassignPriorities(filteredConfig));\n\t\t},\n\t\t[sortConfig, onSortChange, disabled]\n\t);\n\n\t// Handle resetting all sorts\n\tconst handleReset = useCallback(() => {\n\t\tif (disabled) return;\n\t\tonSortChange([]);\n\t}, [onSortChange, disabled]);\n\n\t// Generate description text\n\tconst getSortDescription = (): React.ReactNode => {\n\t\tif (sortConfig.length === 0) {\n\t\t\treturn emptyDescription;\n\t\t}\n\n\t\tif (activeDescription) {\n\t\t\treturn activeDescription;\n\t\t}\n\n\t\tconst sortDescriptions = sortedConfig.map((sort, index) => {\n\t\t\tconst direction = sort.direction === \"asc\" ? \"ascending\" : \"descending\";\n\t\t\treturn `${index + 1}. ${sort.label} (${direction})`;\n\t\t});\n\n\t\tif (sortDescriptions.length === 1) {\n\t\t\treturn `Sorted by: ${sortDescriptions[0]}`;\n\t\t} else if (sortDescriptions.length === 2) {\n\t\t\treturn `Sorted by: ${sortDescriptions.join(\" and \")}`;\n\t\t} else {\n\t\t\tconst lastItem = sortDescriptions.pop();\n\t\t\treturn `Sorted by: ${sortDescriptions.join(\", \")}, and ${lastItem}`;\n\t\t}\n\t};\n\n\t// Build ARIA describedby\n\tconst describedBy = useMemo(() => {\n\t\tconst ids = [\"sort-description\"];\n\t\tif (showHelp) ids.push(\"sort-help\");\n\t\tif (ariaDescribedBy) ids.push(ariaDescribedBy);\n\t\treturn ids.join(\" \");\n\t}, [showHelp, ariaDescribedBy]);\n\n\t// If no sorts active, show empty state\n\tif (sortConfig.length === 0) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={`sort-status-control sort-status-control--empty ${className}`}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"sort-status-control__description\"\n\t\t\t\t\tid=\"sort-description\"\n\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t>\n\t\t\t\t\t{getSortDescription()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className={`sort-status-control ${className}`}>\n\t\t\t{/* Screen reader description */}\n\t\t\t<div\n\t\t\t\tclassName=\"sort-status-control__description sort-status-control__description--active\"\n\t\t\t\tid=\"sort-description\"\n\t\t\t\taria-live=\"polite\"\n\t\t\t>\n\t\t\t\t{getSortDescription()}\n\t\t\t</div>\n\n\t\t\t{/* Sort tags container */}\n\t\t\t<div\n\t\t\t\tclassName=\"sort-status-control__tags\"\n\t\t\t\trole=\"list\"\n\t\t\t\taria-label={ariaLabel}\n\t\t\t\taria-describedby={describedBy}\n\t\t\t>\n\t\t\t\t<div className=\"sort-status-control__tags-label\">Current sorting:</div>\n\n\t\t\t\t{sortedConfig.map((config) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={config.id}\n\t\t\t\t\t\tclassName=\"sort-status-control__tag-container\"\n\t\t\t\t\t\trole=\"listitem\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\ttext=\"\"\n\t\t\t\t\t\t\tcolor=\"blue\"\n\t\t\t\t\t\t\tclassName=\"sort-status-control__tag\"\n\t\t\t\t\t\t\tclosable\n\t\t\t\t\t\t\tonClose={() => handleRemove(config.id)}\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"sort-status-control__tag-content\">\n\t\t\t\t\t\t\t\t<span className=\"sort-status-control__tag-priority\">\n\t\t\t\t\t\t\t\t\t{config.priority + 1}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span className=\"sort-status-control__tag-label\">\n\t\t\t\t\t\t\t\t\t{config.label}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"sort-status-control__tag-direction\"\n\t\t\t\t\t\t\t\t\tonClick={() => handleDirectionToggle(config.id)}\n\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t\taria-label={`Toggle sort direction for ${config.label}. Currently ${config.direction === \"asc\" ? \"ascending\" : \"descending\"}`}\n\t\t\t\t\t\t\t\t\ttitle=\"Click to toggle between ascending and descending\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{config.direction === \"asc\"\n\t\t\t\t\t\t\t\t\t\t? DEFAULT_DIRECTION_LABELS.asc\n\t\t\t\t\t\t\t\t\t\t: DEFAULT_DIRECTION_LABELS.desc}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div className=\"sort-status-control__tag-actions\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"sort-status-control__move-button\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleMoveUp(config.id)}\n\t\t\t\t\t\t\t\t\t\tdisabled={disabled || !canMoveUp(config.id, sortConfig)}\n\t\t\t\t\t\t\t\t\t\taria-label={`Move ${config.label} sort up in priority`}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Move up in priority\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\u25B2\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"sort-status-control__move-button\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleMoveDown(config.id)}\n\t\t\t\t\t\t\t\t\t\tdisabled={disabled || !canMoveDown(config.id, sortConfig)}\n\t\t\t\t\t\t\t\t\t\taria-label={`Move ${config.label} sort down in priority`}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Move down in priority\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\u25BC\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tag>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t{/* Reset button */}\n\t\t\t{showReset && (\n\t\t\t\t<div className=\"sort-status-control__actions\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tonClick={handleReset}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\taria-label=\"Reset all sorting\"\n\t\t\t\t\t\tclassName=\"sort-status-control__reset-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\tClear All Sorts\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Instructions for users */}\n\t\t\t{showHelp && (\n\t\t\t\t<div className=\"sort-status-control__help\" id=\"sort-help\">\n\t\t\t\t\t<small>\n\t\t\t\t\t\tClick {DEFAULT_DIRECTION_LABELS.asc}/{DEFAULT_DIRECTION_LABELS.desc}{\" \"}\n\t\t\t\t\t\tto toggle ascending/descending. Use \u25B2/\u25BC to change sort priority.\n\t\t\t\t\t\tClick \u00D7 to remove a sort.\n\t\t\t\t\t</small>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n", "/**\n * Sort Status Control Component Types\n */\n\nimport { ReactNode } from 'react';\n\n/**\n * Individual sort configuration for a column\n */\nexport interface SortConfig {\n  /** Unique identifier for the sort column */\n  id: string;\n  /** Display label for the sort column */\n  label: string;\n  /** Sort direction - ascending or descending */\n  direction: 'asc' | 'desc';\n  /** Priority order for multi-column sorting (0 = highest priority) */\n  priority: number;\n}\n\n/**\n * Props for the SortStatusControl component\n */\nexport interface SortStatusControlProps {\n  /** Current sort configuration array */\n  sortConfig: SortConfig[];\n  /** Callback when sort configuration changes */\n  onSortChange: (newSortConfig: SortConfig[]) => void;\n  /** Optional CSS class name for styling */\n  className?: string;\n  /** Optional description text when no sorts are active */\n  emptyDescription?: ReactNode;\n  /** Optional description text when sorts are active */\n  activeDescription?: ReactNode;\n  /** Show/hide the reset button */\n  showReset?: boolean;\n  /** Show/hide the help text */\n  showHelp?: boolean;\n  /** Maximum number of sorts allowed */\n  maxSorts?: number;\n  /** Disable all interactions */\n  disabled?: boolean;\n  /** ARIA label for the sort status region */\n  ariaLabel?: string;\n  /** Additional ARIA describedby IDs */\n  ariaDescribedBy?: string;\n}\n\n/**\n * Internal event handlers for sort operations\n */\nexport interface SortStatusHandlers {\n  /** Toggle sort direction for a specific sort */\n  handleDirectionToggle: (sortId: string) => void;\n  /** Move a sort up in priority */\n  handleMoveUp: (sortId: string) => void;\n  /** Move a sort down in priority */\n  handleMoveDown: (sortId: string) => void;\n  /** Remove a sort from the configuration */\n  handleRemove: (sortId: string) => void;\n  /** Reset all sorts */\n  handleReset: () => void;\n}\n\n/**\n * Helper type for sort direction labels\n */\nexport type SortDirectionLabel = {\n  asc: string;\n  desc: string;\n};\n\n/**\n * Default sort direction labels\n */\nexport const DEFAULT_DIRECTION_LABELS: SortDirectionLabel = {\n  asc: '\u2191',\n  desc: '\u2193'\n};\n\n/**\n * Utility type for creating new sort configs\n */\nexport type CreateSortConfig = Omit<SortConfig, 'priority'>;\n\n/**\n * Utility function type for sorting the sort configs by priority\n */\nexport type SortConfigSorter = (configs: SortConfig[]) => SortConfig[];\n\n/**\n * Helper function to create a new sort config\n */\nexport function createSortConfig(\n  id: string,\n  label: string,\n  direction: 'asc' | 'desc' = 'asc'\n): CreateSortConfig {\n  return { id, label, direction };\n}\n\n/**\n * Helper function to sort configs by priority\n */\nexport const sortByPriority: SortConfigSorter = (configs) =>\n  [...configs].sort((a, b) => a.priority - b.priority);\n\n/**\n * Helper function to reassign priorities after reordering\n */\nexport function reassignPriorities(configs: SortConfig[]): SortConfig[] {\n  return configs.map((config, index) => ({\n    ...config,\n    priority: index\n  }));\n}\n\n/**\n * Helper function to validate sort configuration\n */\nexport function validateSortConfig(config: SortConfig): boolean {\n  return (\n    typeof config.id === 'string' &&\n    config.id.trim().length > 0 &&\n    typeof config.label === 'string' &&\n    config.label.trim().length > 0 &&\n    (config.direction === 'asc' || config.direction === 'desc') &&\n    typeof config.priority === 'number' &&\n    config.priority >= 0\n  );\n}\n\n/**\n * Helper function to find max priority in config array\n */\nexport function getMaxPriority(configs: SortConfig[]): number {\n  return configs.length > 0 ? Math.max(...configs.map(c => c.priority)) : -1;\n}\n\n/**\n * Helper function to check if a sort can move up\n */\nexport function canMoveUp(sortId: string, configs: SortConfig[]): boolean {\n  const sort = configs.find(c => c.id === sortId);\n  return sort ? sort.priority > 0 : false;\n}\n\n/**\n * Helper function to check if a sort can move down\n */\nexport function canMoveDown(sortId: string, configs: SortConfig[]): boolean {\n  const sort = configs.find(c => c.id === sortId);\n  const maxPriority = getMaxPriority(configs);\n  return sort ? sort.priority < maxPriority : false;\n}\n", "/**\n * Generic factory helpers for creating tabs configurations\n */\n\nimport { TabPanelConfig } from \"./AriaTabsDataGridTypes\";\nimport { AriaDataGridColumn, SortConfig } from \"./AriaDataGridTypes\";\n\n/**\n * Column definition for generic tab creation\n */\nexport interface GenericColumnDefinition<T> {\n\tkey: string;\n\tlabel: string;\n\trender?: (data: T) => any;\n\tsortable?: boolean;\n\t/** Optional high-precedence custom renderer (value, row) signature alignment with ColumnDefinition.customRenderer */\n\tcustomRenderer?: (value: any, row: T) => React.ReactNode;\n}\n\n/**\n * Tab definition for generic tab creation\n */\nexport interface GenericTabDefinition<T = any> {\n\tid: string;\n\tlabel: string;\n\tcolumns: GenericColumnDefinition<T>[];\n\tfilter?: (data: T[]) => T[];\n\tsortConfig?: SortConfig[];\n\tariaLabel?: string;\n\tariaDescription?: string;\n\tclassName?: string;\n\tdisabled?: boolean;\n}\n\n/**\n * Generic factory function to create tabs configuration\n */\nexport const createGenericTabsConfig = <T>(\n\tdata: T[],\n\ttabDefinitions: GenericTabDefinition<T>[]\n): TabPanelConfig<T>[] => {\n\treturn tabDefinitions.map((def) => ({\n\t\tid: def.id,\n\t\tlabel: def.label,\n\t\tdata: def.filter ? def.filter(data) : data,\n\t\tcolumns: def.columns.map((col) => ({\n\t\t\tkey: col.key,\n\t\t\tlabel: col.label,\n\t\t\trender: col.render,\n\t\t\tcustomRenderer: col.customRenderer,\n\t\t})),\n\t\tsortConfig: def.sortConfig,\n\t\tariaLabel: def.ariaLabel || `${def.label} Data Grid`,\n\t\tariaDescription:\n\t\t\tdef.ariaDescription || `Data grid showing ${def.label.toLowerCase()}`,\n\t\tclassName: def.className,\n\t\tdisabled: def.disabled,\n\t}));\n};\n\n/**\n * Helper function to create simple data views\n */\nexport const createSimpleDataView = <T>(\n\tdata: T[],\n\tconfig: {\n\t\tid: string;\n\t\tlabel: string;\n\t\tcolumns: Array<{\n\t\t\tkey: keyof T;\n\t\t\tlabel: string;\n\t\t\trender?: (value: any, data: T) => any;\n\t\t}>;\n\t\tdefaultSort?: {\n\t\t\tkey: keyof T;\n\t\t\tdirection: \"asc\" | \"desc\";\n\t\t};\n\t\tariaLabel?: string;\n\t\tclassName?: string;\n\t\tdisabled?: boolean;\n\t}\n): TabPanelConfig<T> => {\n\treturn {\n\t\tid: config.id,\n\t\tlabel: config.label,\n\t\tdata,\n\t\tcolumns: config.columns.map((col) => ({\n\t\t\tkey: col.key as string,\n\t\t\tlabel: col.label,\n\t\t\trender: col.render\n\t\t\t\t? (data: T) => col.render!(data[col.key], data)\n\t\t\t\t: undefined,\n\t\t})),\n\t\tsortConfig: config.defaultSort\n\t\t\t? [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: config.defaultSort.key as string,\n\t\t\t\t\t\tdirection: config.defaultSort.direction,\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t: undefined,\n\t\tariaLabel: config.ariaLabel || `${config.label} Data Grid`,\n\t\tariaDescription: `Data grid showing ${config.label.toLowerCase()}`,\n\t\tclassName: config.className,\n\t\tdisabled: config.disabled,\n\t};\n};\n\n/**\n * Helper function for common business data patterns\n */\nexport const createBusinessDataTabs = <T extends Record<string, any>>(\n\tdata: T[],\n\toptions: {\n\t\tnameField: keyof T;\n\t\tstatusField?: keyof T;\n\t\tdateField?: keyof T;\n\t\tamountField?: keyof T;\n\t\tadditionalFields?: Array<{\n\t\t\tkey: keyof T;\n\t\t\tlabel: string;\n\t\t\trender?: (value: any) => any;\n\t\t}>;\n\t}\n): TabPanelConfig<T>[] => {\n\tconst baseColumns = [{ key: options.nameField as string, label: \"Name\" }];\n\n\tif (options.statusField) {\n\t\tbaseColumns.push({ key: options.statusField as string, label: \"Status\" });\n\t}\n\n\tif (options.dateField) {\n\t\tbaseColumns.push({\n\t\t\tkey: options.dateField as string,\n\t\t\tlabel: \"Date\",\n\t\t\trender: (data: T) => {\n\t\t\t\tconst value = (data as any)[options.dateField!];\n\t\t\t\treturn (value as any) instanceof Date\n\t\t\t\t\t? (value as Date).toLocaleDateString()\n\t\t\t\t\t: value;\n\t\t\t},\n\t\t} as AriaDataGridColumn);\n\t}\n\n\tif (options.amountField) {\n\t\tbaseColumns.push({\n\t\t\tkey: options.amountField as string,\n\t\t\tlabel: \"Amount\",\n\t\t\trender: (data: T) => {\n\t\t\t\tconst value = (data as any)[options.amountField!];\n\t\t\t\treturn typeof value === \"number\" ? `$${value.toFixed(2)}` : value;\n\t\t\t},\n\t\t} as AriaDataGridColumn);\n\t}\n\n\tif (options.additionalFields) {\n\t\tbaseColumns.push(\n\t\t\t...options.additionalFields.map((field) => ({\n\t\t\t\tkey: field.key as string,\n\t\t\t\tlabel: field.label,\n\t\t\t\trender: field.render\n\t\t\t\t\t? (data: T) => field.render!(data[field.key])\n\t\t\t\t\t: undefined,\n\t\t\t}))\n\t\t);\n\t}\n\n\treturn [\n\t\t{\n\t\t\tid: \"overview\",\n\t\t\tlabel: \"Overview\",\n\t\t\tdata,\n\t\t\tcolumns: baseColumns,\n\t\t\tariaLabel: \"Data Overview Grid\",\n\t\t\tariaDescription: \"Overview of all data items\",\n\t\t},\n\t];\n};\n\n/**\n * Default data comparison functions for common scenarios\n */\nexport const dataComparators = {\n\t/** JSON-based comparison (safe but slower) */\n\tjson: <T>(a: T, b: T): boolean => JSON.stringify(a) === JSON.stringify(b),\n\n\t/** ID-based comparison */\n\tid: <T extends { id: string | number }>(a: T, b: T): boolean => a.id === b.id,\n\n\t/** Name-based comparison */\n\tname: <T extends { name: string }>(a: T, b: T): boolean => a.name === b.name,\n\n\t/** Custom field comparison */\n\tfield:\n\t\t<T>(fieldName: keyof T) =>\n\t\t(a: T, b: T): boolean =>\n\t\t\ta[fieldName] === b[fieldName],\n\n\t/** Multi-field comparison */\n\tmultiField:\n\t\t<T>(fields: Array<keyof T>) =>\n\t\t(a: T, b: T): boolean =>\n\t\t\tfields.every((field) => a[field] === b[field]),\n};\n\n/**\n * Default filter functions for common scenarios\n */\nexport const filterFunctions = {\n\t/** No filtering */\n\tnone: <T>(data: T[], _filters?: any): T[] => data,\n\n\t/** Simple object property matching */\n\tsimple: <T>(data: T[], filters?: Record<string, any>): T[] => {\n\t\tif (!filters) return data;\n\n\t\treturn data.filter((item) => {\n\t\t\treturn Object.keys(filters).every((key) => {\n\t\t\t\tconst filterValue = filters[key];\n\t\t\t\tconst itemValue = (item as any)[key];\n\n\t\t\t\tif (filterValue === null || filterValue === undefined) return true;\n\t\t\t\tif (Array.isArray(filterValue)) {\n\t\t\t\t\treturn filterValue.includes(itemValue);\n\t\t\t\t}\n\n\t\t\t\treturn itemValue === filterValue;\n\t\t\t});\n\t\t});\n\t},\n\n\t/** Text search across multiple fields */\n\ttextSearch:\n\t\t<T>(searchFields: Array<keyof T>) =>\n\t\t(data: T[], filters?: { search?: string }): T[] => {\n\t\t\tif (!filters?.search) return data;\n\n\t\t\tconst searchTerm = filters.search.toLowerCase();\n\t\t\treturn data.filter((item) =>\n\t\t\t\tsearchFields.some((field) =>\n\t\t\t\t\tString((item as any)[field])\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.includes(searchTerm)\n\t\t\t\t)\n\t\t\t);\n\t\t},\n};\n\n/**\n * Default boolean renderers\n */\nexport const booleanRenderers = {\n\t/** Simple checkmark/cross */\n\tsimple: (value: boolean) => (value ? \"\u2713\" : \"\u2717\"),\n\n\t/** Yes/No text */\n\tyesNo: (value: boolean) => (value ? \"Yes\" : \"No\"),\n\n\t/** Enabled/Disabled */\n\tenabledDisabled: (value: boolean) => (value ? \"Enabled\" : \"Disabled\"),\n\n\t/** Active/Inactive */\n\tactiveInactive: (value: boolean) => (value ? \"Active\" : \"Inactive\"),\n};\n", "import React from 'react';\n\nexport interface IconConfig {\n\tvalue: string | boolean;\n\ticon: React.ReactNode;\n}\n\nexport const bedIcon: IconConfig[] = [\n\t{\n\t\tvalue: \"bed\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<rect x=\"5\" y=\"10\" width=\"14\" height=\"5\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<rect x=\"5\" y=\"7\" width=\"5\" height=\"3\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<line x1=\"5\" y1=\"15\" x2=\"5\" y2=\"19\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"19\" y1=\"15\" x2=\"19\" y2=\"19\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"cot\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<rect x=\"5\" y=\"7\" width=\"14\" height=\"10\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"7\" y1=\"7\" x2=\"7\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"17\" y1=\"7\" x2=\"17\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"swap space\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<line x1=\"7\" y1=\"8\" x2=\"17\" y2=\"8\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<polyline points=\"13 4 17 8 13 12\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<line x1=\"17\" y1=\"16\" x2=\"7\" y2=\"16\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<polyline points=\"11 20 7 16 11 12\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"trolley\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<rect x=\"5\" y=\"7\" width=\"14\" height=\"5\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"8\" y1=\"12\" x2=\"8\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"16\" y1=\"12\" x2=\"16\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<circle cx=\"8\" cy=\"19\" r=\"1.5\" fill=\"#000\"/>\n\t\t\t\t<circle cx=\"16\" cy=\"19\" r=\"1.5\" fill=\"#000\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n];\n\nexport const completeIcon: IconConfig[] = [\n\t{\n\t\tvalue: \"due\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<rect x=\"3\" y=\"4\" width=\"18\" height=\"16\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<line x1=\"3\" y1=\"9\" x2=\"21\" y2=\"9\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"7\" y1=\"13\" x2=\"7\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"12\" y1=\"13\" x2=\"12\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"17\" y1=\"13\" x2=\"17\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"overdue\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<path d=\"M12 2L2 20H22L12 2Z\" stroke=\"#ffbf47\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"14\" stroke=\"#ffb81c\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<circle cx=\"12\" cy=\"17\" r=\"1\" fill=\"#ffb81c\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"complete\",\n\t\ticon: (\n\t\t\t<svg className=\"nhsuk-icon__tick\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<path strokeWidth=\"4\" strokeLinecap=\"round\" d=\"M18.4 7.8l-8.5 8.4L5.6 12\" stroke=\"#007f3b\"></path>\n\t\t\t</svg>\n\t\t),\n\t},\n];\n\nexport const transportStatusIcon: IconConfig[] = [\n\t{\n\t\tvalue: \"Confirmed\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<rect x=\"3\" y=\"4\" width=\"18\" height=\"16\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<line x1=\"3\" y1=\"9\" x2=\"21\" y2=\"9\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"7\" y1=\"13\" x2=\"7\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"12\" y1=\"13\" x2=\"12\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"17\" y1=\"13\" x2=\"17\" y2=\"17\" stroke=\"#000\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"Pending\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<g id=\"pending-group\">\n\t\t\t\t\t<circle id=\"pending-oval\" stroke=\"none\" fill=\"rgb(255, 184, 28)\" cx=\"27\" cy=\"50\" r=\"6\" />\n\t\t\t\t\t<circle id=\"pending-oval2\" stroke=\"none\" fill=\"rgb(255, 184, 28)\" cx=\"50.5\" cy=\"50\" r=\"6\" />\n\t\t\t\t\t<circle id=\"pending-oval3\" stroke=\"none\" fill=\"rgb(255, 184, 28)\" cx=\"73.5\" cy=\"50\" r=\"6\" />\n\t\t\t\t</g>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: \"In Progress\",\n\t\ticon: (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<rect x=\"3\" y=\"8\" width=\"16\" height=\"8\" stroke=\"#007f3b\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<rect x=\"16\" y=\"10\" width=\"5\" height=\"6\" stroke=\"#007f3b\" strokeWidth=\"2\" strokeLinecap=\"round\" fill=\"none\"/>\n\t\t\t\t<circle cx=\"7\" cy=\"18\" r=\"2\" fill=\"#007f3b\"/>\n\t\t\t\t<circle cx=\"17\" cy=\"18\" r=\"2\" fill=\"#007f3b\"/>\n\t\t\t\t<line x1=\"6\" y1=\"12\" x2=\"10\" y2=\"12\" stroke=\"#007f3b\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"8\" y1=\"10\" x2=\"8\" y2=\"14\" stroke=\"#007f3b\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t\t<line x1=\"10\" y1=\"6\" x2=\"14\" y2=\"6\" stroke=\"#007f3b\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n\t\t\t</svg>\n\t\t),\n\t},\n];\n\nexport const booleanIcon: IconConfig[] = [\n\t{\n\t\tvalue: true,\n\t\ticon: (\n\t\t\t<svg className=\"nhsuk-icon nhsuk-icon__tick\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<path strokeWidth=\"4\" strokeLinecap=\"round\" d=\"M18.4 7.8l-8.5 8.4L5.6 12\" stroke=\"#007f3b\"></path>\n\t\t\t</svg>\n\t\t),\n\t},\n\t{\n\t\tvalue: false,\n\t\ticon: (\n\t\t\t<svg className=\"nhsuk-icon nhsuk-icon__cross\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" width=\"100%\" height=\"34\">\n\t\t\t\t<path d=\"M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z\" fill=\"#d5281b\"></path>\n\t\t\t\t<path d=\"M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z\" fill=\"#d5281b\"></path>\n\t\t\t</svg>\n\t\t),\n\t},\n];\n", "import { \n  EWSPatientData,\n  HealthcareViewConfig,\n  HealthcareFilter,\n  TabPanelConfig\n} from './AriaTabsDataGridTypes';\nimport React from 'react';\nimport { booleanIcon } from './icons';\n\n/**\n * Healthcare-specific data comparison function\n * Uses name + bed_name as unique identifier for healthcare data\n */\nexport const healthcareDataComparator = (data1: EWSPatientData, data2: EWSPatientData): boolean => {\n  if (!data1 || !data2) return data1 === data2;\n  \n  // For healthcare data with name and bed_name\n  if (data1.name && data1.bed_name && data2.name && data2.bed_name) {\n    return data1.name === data2.name && data1.bed_name === data2.bed_name;\n  }\n  \n  // Fallback to JSON comparison\n  return JSON.stringify(data1) === JSON.stringify(data2);\n};\n\n/**\n * Healthcare-specific data filtering function\n */\nexport const healthcareFilterFunction = (data: EWSPatientData[], filters?: HealthcareFilter): EWSPatientData[] => {\n  if (!filters) return data;\n\n  return data.filter(patient => {\n    // EWS Score range filter\n    if (filters.ewsScoreRange) {\n      const [min, max] = filters.ewsScoreRange;\n      if (patient.ews_score < min || patient.ews_score > max) return false;\n    }\n\n    // Ward filter\n    if (filters.wards && filters.wards.length > 0) {\n      if (!filters.wards.includes(patient.ward_name)) return false;\n    }\n\n    // Specialty filter\n    if (filters.specialties && filters.specialties.length > 0) {\n      if (!filters.specialties.includes(patient.speciality)) return false;\n    }\n\n    // Discharge status filter\n    if (filters.dischargeStatuses && filters.dischargeStatuses.length > 0) {\n      if (!filters.dischargeStatuses.includes(patient.early_discharge_notification)) return false;\n    }\n\n    // AVPU filter\n    if (filters.avpuLevels && filters.avpuLevels.length > 0) {\n      if (!filters.avpuLevels.includes(patient.ews_data.avpu)) return false;\n    }\n\n    // Medical optimization filter\n    if (filters.medicallyOptimised !== null && filters.medicallyOptimised !== undefined) {\n      if (patient.medically_optimised !== filters.medicallyOptimised) return false;\n    }\n\n    // Fast track filter\n    if (filters.fastTrack !== null && filters.fastTrack !== undefined) {\n      if (patient.fast_track !== filters.fastTrack) return false;\n    }\n\n    return true;\n  });\n};\n\n/**\n * NHS-compliant boolean rendering function with SVG icons\n */\nexport const nhsBooleanRenderer = (value: boolean | string): React.ReactNode => {\n  // For boolean values, use the imported NHS SVG icons\n  if (typeof value === 'boolean') {\n    const iconEntry = booleanIcon.find(icon => icon.value === value);\n    return iconEntry ? iconEntry.icon : null;\n  }\n\n  // Handle other value types (alert, voice, pain, unresponsive)\n  const iconEntry = booleanIcon.find(icon => icon.value === value);\n  return iconEntry ? iconEntry.icon : String(value);\n};\n\n/**\n * Healthcare-specific unique ID function\n */\nexport const healthcareGetDataId = (data: EWSPatientData): string => {\n  return `${data.name}-${data.bed_name}`;\n};\n\n/**\n * Healthcare column configurations for EWS patient data\n */\nconst createHealthcareViewConfig = (): HealthcareViewConfig => ({\n  overview: [\n    { key: 'name', label: 'Patient Name' },\n    { key: 'age', label: 'Age' },\n    { key: 'ward_name', label: 'Ward' },\n    { key: 'bed_name', label: 'Bed' },\n    { key: 'ews_score', label: 'EWS Score' },\n    { key: 'speciality', label: 'Specialty' },\n    { key: 'consultant', label: 'Consultant' }\n  ],\n  vitals: [\n    { key: 'name', label: 'Patient Name' },\n    { key: 'ews_score', label: 'EWS Score' },\n    { key: 'respiratory_rate_bpm', label: 'Respiratory Rate', render: (data: EWSPatientData) => data.ews_data.respiratory_rate_bpm },\n    { key: 'sp02', label: 'SpO2 %', render: (data: EWSPatientData) => data.ews_data.sp02 },\n    { key: 'temperature', label: 'Temperature \u00B0C', render: (data: EWSPatientData) => data.ews_data.temperature },\n    { key: 'systolic_bp', label: 'Systolic BP', render: (data: EWSPatientData) => data.ews_data.systolic_bp },\n    { key: 'heart_rate', label: 'Heart Rate', render: (data: EWSPatientData) => data.ews_data.heart_rate },\n    { key: 'avpu', label: 'AVPU', render: (data: EWSPatientData) => data.ews_data.avpu.toUpperCase() }\n  ],\n  discharge: [\n    { key: 'name', label: 'Patient Name' },\n    { key: 'anticipated_discharge_date', label: 'Anticipated Discharge', render: (data: EWSPatientData) => new Date(data.anticipated_discharge_date).toLocaleDateString() },\n    { key: 'early_discharge_notification', label: 'Discharge Status' },\n    { key: 'medically_optimised', label: 'Medically Optimised' },\n    { key: 'criteria_to_reside', label: 'Criteria to Reside' },\n    { key: 'fast_track', label: 'Fast Track' },\n    { key: 'transport_status', label: 'Transport Status' },\n    { key: 'pathway', label: 'Pathway' }\n  ],\n  logistics: [\n    { key: 'name', label: 'Patient Name' },\n    { key: 'ward_name', label: 'Ward' },\n    { key: 'room_name', label: 'Room' },\n    { key: 'bed_name', label: 'Bed' },\n    { key: 'bed_type', label: 'Bed Type' },\n    { key: 'transport_booking', label: 'Transport Booked' },\n    { key: 'transport_mobility', label: 'Transport Type' },\n    { key: 'district_nurse_referral', label: 'District Nurse' },\n    { key: 'equipment', label: 'Equipment' }\n  ]\n});\n\n/**\n * Factory function to create healthcare-specific tabs configuration\n */\nexport const createTCHTabsConfig = (patients: EWSPatientData[]): TabPanelConfig<EWSPatientData>[] => {\n  const viewConfig = createHealthcareViewConfig();\n  \n  return [\n    {\n      id: 'overview',\n      label: 'Patient Overview',\n      data: patients,\n      columns: viewConfig.overview,\n      ariaLabel: 'Patient Overview Data Grid',\n      ariaDescription: 'Overview of all patients with basic information'\n    },\n    {\n      id: 'vitals',\n      label: 'Vital Signs & EWS',\n      data: patients,\n      columns: viewConfig.vitals,\n      sortConfig: [\n        { key: 'ews_score', direction: 'desc' },\n        { key: 'name', direction: 'asc' },\n        { key: 'ward_name', direction: 'asc' }\n      ],\n      ariaLabel: 'Patient Vital Signs Data Grid',\n      ariaDescription: 'Patient vital signs and Early Warning Scores'\n    },\n    {\n      id: 'discharge',\n      label: 'Discharge Planning',\n      data: patients.filter(p => p.anticipated_discharge_date),\n      columns: viewConfig.discharge,\n      sortConfig: [\n        { key: 'anticipated_discharge_date', direction: 'asc' },\n        { key: 'discharge_status', direction: 'desc' }\n      ],\n      ariaLabel: 'Discharge Planning Data Grid',\n      ariaDescription: 'Patient discharge planning and status information'\n    },\n    {\n      id: 'logistics',\n      label: 'Bed Management',\n      data: patients,\n      columns: viewConfig.logistics,\n      sortConfig: [{ key: 'ward_name', direction: 'asc' }],\n      ariaLabel: 'Bed Management Data Grid',\n      ariaDescription: 'Patient location and logistics information'\n    }\n  ];\n};\n\n/**\n * Healthcare-specific data operation configuration\n */\nexport const tchDataConfig = {\n  dataComparator: healthcareDataComparator,\n  filterFunction: healthcareFilterFunction,\n  booleanRenderer: nhsBooleanRenderer,\n  getDataId: healthcareGetDataId\n};\n", "// Helper function to format headers\nexport const formatHeader = (header: string): string =>\n\theader\n\t\t.replace(/([a-z])([A-Z])/g, '$1 $2') // Split camelCase\n\t\t.replace(/_/g, ' ') // Replace underscores with spaces\n\t\t.replace(/\\./g, ' ') // Replace dots with spaces\n\t\t.replace(/\\b\\w/g, char => char.toUpperCase()) // Capitalize the first letter of each word\n\t\t.replace(/\\b[A-Z]{3}\\b/g, match => match.toUpperCase()) // Keep three-letter acronyms capitalised\n\n// Helper function to parse date strings into the format \"13th Month 2024\"\nexport const parseDate = (dateString: string | null): string => {\n\tif (!dateString) return '';\n\tconst date = new Date(dateString);\n\tif (isNaN(date.getTime())) return dateString; // Return the original if parsing fails\n\n\tconst day = date.getDate();\n\tconst month = date.toLocaleString('default', { month: 'long' });\n\tconst year = date.getFullYear();\n\n\tconst suffix =\n\t\tday % 10 === 1 && day !== 11\n\t\t\t? 'st'\n\t\t\t: day % 10 === 2 && day !== 12\n\t\t\t? 'nd'\n\t\t\t: day % 10 === 3 && day !== 13\n\t\t\t? 'rd'\n\t\t\t: 'th';\n\n\treturn `${day}${suffix} ${month} ${year}`;\n};\n"],
  "mappings": "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",
  "names": ["classNames", "classNames", "React", "useCallback", "useMemo", "useRef", "forwardRef", "useEffect", "useState", "useCallback", "useMemo", "useRef", "React", "jsx", "useCallback", "useState", "React", "id", "style", "title", "ariaLabel", "ariaDescribedBy", "ariaLabelledBy", "tabIndex", "jsx", "jsxs", "jsx", "jsxs", "useRef", "useCallback", "useMemo", "Fragment", "jsx", "jsxs", "forwardRef", "AriaTabsDataGrid", "useState", "useMemo", "useEffect", "useRef", "useCallback", "_a", "newRowIndex", "React", "useCallback", "useMemo", "jsx", "jsxs", "SortStatusControl", "useMemo", "useCallback", "jsx", "jsxs", "iconEntry"]
}
