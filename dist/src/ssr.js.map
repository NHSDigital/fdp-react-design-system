{"version":3,"file":"ssr.js","sources":["../../src/components/Account/Account.tsx","../../src/components/HeaderSearch/HeaderSearch.tsx","../../src/components/Header/Header.render.tsx","../../src/components/Header/Header.tsx","../../src/components/ActionLink/ActionLink.tsx","../../src/components/Button/ButtonSSR.tsx","../../src/components/BackLink/BackLink.tsx","../../src/mapping/tag.ts","../../src/components/Tag/Tag.tsx","../../src/mapping/label.ts","../../src/components/Label/Label.tsx","../../src/mapping/heading.ts","../../src/components/Heading/Heading.tsx","../../src/mapping/hint.ts","../../src/components/Hint/Hint.tsx","../../src/mapping/errorMessage.ts","../../src/components/ErrorMessage/ErrorMessage.tsx"],"sourcesContent":["import React from 'react';\nimport classNames from 'classnames';\nimport './Account.scss';\nimport { AccountProps, AccountItem } from './Account.types';\n\n/**\n * Account Component for NHS Design System\n * \n * A standalone component that handles user account navigation,\n * extracted from the Header component for better modularity.\n */\nexport const Account: React.FC<AccountProps> = ({\n  ariaLabel = \"Account\",\n  items = [],\n  className,\n  variant = 'default',\n}) => {\n  // Don't render if no items provided\n  if (!items || items.length === 0) {\n    return null;\n  }\n\n  // Render account item - following NHS.UK structure exactly\n  const renderAccountItem = (item: AccountItem) => {\n    const iconContent = item.icon ? (\n      <svg \n        className=\"nhsuk-icon nhsuk-icon__user\" \n        xmlns=\"http://www.w3.org/2000/svg\" \n        viewBox=\"0 0 24 24\" \n        aria-hidden=\"true\" \n        focusable=\"false\"\n        role=\"img\" \n        aria-label={item.icon === true ? 'User' : undefined}\n      >\n        <path d=\"M12 1a11 11 0 1 1 0 22 11 11 0 0 1 0-22Zm0 2a9 9 0 0 0-5 16.5V18a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1.5A9 9 0 0 0 12 3Zm0 3a3.5 3.5 0 1 1-3.5 3.5A3.4 3.4 0 0 1 12 6Z\" />\n      </svg>\n    ) : null;\n\n    const textContent = item.html ? (\n      <span dangerouslySetInnerHTML={{ __html: item.html }} />\n    ) : (\n      item.text\n    );\n\n    const content = (\n      <>\n        {iconContent}\n        {textContent}\n      </>\n    );\n\n    if (item.href) {\n      return (\n        <a className=\"nhsuk-account__link nhsuk-header__account-link\" href={item.href}>\n          {content}\n        </a>\n      );\n    }\n\n    if (item.action) {\n      return (\n        <form \n          className=\"nhsuk-account__form\" \n          action={item.action} \n          method={item.method || \"post\"}\n        >\n          <button \n            className=\"nhsuk-account__button\"\n            type=\"submit\"\n            role=\"button\"\n          >\n            {content}\n          </button>\n        </form>\n      );\n    }\n\n    // Fallback for items without href or action\n    return <span>{content}</span>;\n  };\n\n  return (\n    <nav \n      className={classNames(\n        'nhsuk-account',\n        {\n          'nhsuk-account--white': variant === 'white',\n        },\n        className\n      )} \n      aria-label={ariaLabel}\n    >\n      <ul className=\"nhsuk-account__list\">\n        {items.map((item, index) => (\n          item && (\n            <li \n              key={index} \n              className={classNames('nhsuk-account__item nhsuk-header__account-item', item.className)}\n            >\n              {renderAccountItem(item)}\n            </li>\n          )\n        ))}\n      </ul>\n    </nav>\n  );\n};\n\nexport default Account;\n","import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { HeaderSearchProps, SearchQuery } from './HeaderSearch.types';\nimport './HeaderSearch.scss';\n\n/**\n * HeaderSearch Component - Flexible Search Implementation\n * \n * Supports three modes:\n * 1. 'form' - Traditional form submission (SSR-friendly, default)\n * 2. 'controlled' - Full React controlled component with callbacks\n * 3. 'hybrid' - Form submission with optional client-side enhancement\n * \n * Examples:\n * \n * // SSR/Traditional form (default)\n * <HeaderSearch action=\"/search\" />\n * \n * // Controlled React component\n * <HeaderSearch \n *   mode=\"controlled\" \n *   value={searchQuery}\n *   callbacks={{ onChange: setSearchQuery, onSearch: handleSearch }}\n * />\n * \n * // Progressive enhancement\n * <HeaderSearch \n *   mode=\"hybrid\"\n *   action=\"/search\"\n *   callbacks={{ onSearch: handleClientSearch }}\n * />\n */\nexport const HeaderSearch: React.FC<HeaderSearchProps> = ({\n  mode = 'form',\n  action = \"/search\",\n  method = 'get',\n  name = \"q\",\n  value,\n  placeholder = \"Search\",\n  visuallyHiddenLabel = \"Search the NHS website\",\n  visuallyHiddenButton = \"Search\",\n  className,\n  disabled = false,\n  callbacks = {},\n  isLoading = false,\n  showResults = false,\n  results = [],\n  formAttributes = {},\n  inputAttributes = {},\n  buttonAttributes = {},\n  preventDefaultSubmit = false,\n  debounceMs = 300,\n  minQueryLength = 1,\n}) => {\n  // Internal state for uncontrolled mode\n  const [internalValue, setInternalValue] = useState('');\n  const [isFocused, setIsFocused] = useState(false);\n  \n  // Refs for debouncing and form handling\n  const debounceRef = useRef<NodeJS.Timeout | undefined>(undefined);\n  const formRef = useRef<HTMLFormElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n  \n  // Determine current value based on mode\n  const isControlled = mode === 'controlled' && value !== undefined;\n  const currentValue = isControlled ? value : internalValue;\n  \n  // Debounced change handler\n  const debouncedOnChange = useCallback((query: string) => {\n    if (debounceRef.current) {\n      clearTimeout(debounceRef.current);\n    }\n    \n    debounceRef.current = setTimeout(() => {\n      if (callbacks.onChange && query.length >= minQueryLength) {\n        callbacks.onChange(query);\n      }\n    }, debounceMs);\n  }, [callbacks.onChange, debounceMs, minQueryLength]);\n  \n  // Input change handler\n  const handleInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value;\n    \n    // Update internal state if not controlled\n    if (!isControlled) {\n      setInternalValue(newValue);\n    }\n    \n    // Call debounced onChange for controlled/hybrid modes\n    if (mode !== 'form') {\n      debouncedOnChange(newValue);\n    }\n  }, [isControlled, mode, debouncedOnChange]);\n  \n  // Form submission handler\n  const handleFormSubmit = useCallback((e: React.FormEvent<HTMLFormElement>) => {\n    const query = currentValue.trim();\n    \n    // Create search data\n    const searchData: SearchQuery = {\n      query,\n      timestamp: Date.now(),\n      formData: new FormData(e.currentTarget)\n    };\n    \n    // Handle different modes\n    if (mode === 'controlled' || (mode === 'hybrid' && preventDefaultSubmit)) {\n      e.preventDefault();\n      \n      if (callbacks.onSearch && query.length >= minQueryLength) {\n        callbacks.onSearch(searchData);\n      }\n    } else if (mode === 'hybrid' && callbacks.onSearch) {\n      // Let form submit normally but also trigger callback\n      if (query.length >= minQueryLength) {\n        callbacks.onSearch(searchData);\n      }\n    }\n    // For 'form' mode, let the browser handle submission naturally\n  }, [mode, currentValue, callbacks.onSearch, preventDefaultSubmit, minQueryLength]);\n  \n  // Focus handlers\n  const handleFocus = useCallback(() => {\n    setIsFocused(true);\n    callbacks.onFocus?.();\n  }, [callbacks.onFocus]);\n  \n  const handleBlur = useCallback(() => {\n    setIsFocused(false);\n    callbacks.onBlur?.();\n  }, [callbacks.onBlur]);\n  \n  // Clear search\n  const handleClear = useCallback(() => {\n    if (!isControlled) {\n      setInternalValue('');\n    }\n    callbacks.onClear?.();\n    inputRef.current?.focus();\n  }, [isControlled, callbacks.onClear]);\n  \n  // Cleanup debounce on unmount\n  useEffect(() => {\n    return () => {\n      if (debounceRef.current) {\n        clearTimeout(debounceRef.current);\n      }\n    };\n  }, []);\n  \n  // Search icon SVG - exact copy from NHS.UK\n  const renderSearchIcon = () => (\n    <svg \n      className={classNames('nhsuk-icon nhsuk-icon__search', {\n        'nhsuk-icon__search--loading': isLoading\n      })} \n      xmlns=\"http://www.w3.org/2000/svg\" \n      viewBox=\"0 0 24 24\" \n      aria-hidden=\"true\" \n      focusable=\"false\"\n    >\n      <path d=\"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z\" />\n    </svg>\n  );\n  \n  // Loading spinner for async operations\n  const renderLoadingSpinner = () => (\n    <svg \n      className=\"nhsuk-icon nhsuk-icon__spinner\" \n      xmlns=\"http://www.w3.org/2000/svg\" \n      viewBox=\"0 0 24 24\" \n      aria-hidden=\"true\" \n      focusable=\"false\"\n    >\n      <circle \n        cx=\"12\" \n        cy=\"12\" \n        r=\"10\" \n        stroke=\"currentColor\" \n        strokeWidth=\"2\" \n        fill=\"none\" \n        strokeLinecap=\"round\" \n        strokeDasharray=\"31.416\" \n        strokeDashoffset=\"31.416\"\n      >\n        <animate \n          attributeName=\"stroke-dasharray\" \n          dur=\"2s\" \n          values=\"0 31.416;15.708 15.708;0 31.416\" \n          repeatCount=\"indefinite\"\n        />\n        <animate \n          attributeName=\"stroke-dashoffset\" \n          dur=\"2s\" \n          values=\"0;-15.708;-31.416\" \n          repeatCount=\"indefinite\"\n        />\n      </circle>\n    </svg>\n  );\n  \n  // Clear button\n  const renderClearButton = () => {\n    if (!currentValue || mode === 'form') return null;\n    \n    return (\n      <button\n        type=\"button\"\n        className=\"nhsuk-header__search-clear\"\n        onClick={handleClear}\n        aria-label=\"Clear search\"\n      >\n        <svg className=\"nhsuk-icon nhsuk-icon__close\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" focusable=\"false\">\n          <path d=\"M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 1.42 1.42l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42-1.42z\"/>\n        </svg>\n      </button>\n    );\n  };\n  \n  // Results dropdown\n  const renderResults = () => {\n    if (!showResults || !results.length || !isFocused) return null;\n    \n    return (\n      <div className=\"nhsuk-header__search-results\" role=\"listbox\">\n        {results.map((result) => (\n          <div key={result.id} className=\"nhsuk-header__search-result\" role=\"option\">\n            {result.href ? (\n              <a href={result.href} className=\"nhsuk-header__search-result-link\">\n                <span className=\"nhsuk-header__search-result-title\">{result.title}</span>\n                {result.description && (\n                  <span className=\"nhsuk-header__search-result-description\">{result.description}</span>\n                )}\n              </a>\n            ) : (\n              <button \n                type=\"button\" \n                className=\"nhsuk-header__search-result-button\"\n                onClick={() => callbacks.onSearch?.({ query: result.title, timestamp: Date.now() })}\n              >\n                <span className=\"nhsuk-header__search-result-title\">{result.title}</span>\n                {result.description && (\n                  <span className=\"nhsuk-header__search-result-description\">{result.description}</span>\n                )}\n              </button>\n            )}\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  return (\n    <div className={classNames('nhsuk-header__search', className, {\n      'nhsuk-header__search--controlled': mode === 'controlled',\n      'nhsuk-header__search--hybrid': mode === 'hybrid',\n      'nhsuk-header__search--loading': isLoading,\n      'nhsuk-header__search--focused': isFocused,\n      'nhsuk-header__search--has-results': showResults && results.length > 0\n    })}>\n      <form \n        ref={formRef}\n        className=\"nhsuk-header__search-form\" \n        id=\"search\" \n        action={mode !== 'controlled' ? action : undefined}\n        method={mode !== 'controlled' ? method : undefined}\n        role=\"search\"\n        onSubmit={handleFormSubmit}\n        {...formAttributes}\n      >\n        <label \n          className=\"nhsuk-u-visually-hidden\" \n          htmlFor=\"search-field\"\n        >\n          {visuallyHiddenLabel}\n        </label>\n        \n        <div className=\"nhsuk-header__search-input-wrapper\">\n          <input \n            ref={inputRef}\n            className=\"nhsuk-header__search-input nhsuk-input\" \n            id=\"search-field\" \n            name={mode !== 'controlled' ? name : undefined}\n            type=\"search\" \n            placeholder={placeholder} \n            autoComplete=\"off\"\n            value={currentValue}\n            onChange={handleInputChange}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            disabled={disabled || isLoading}\n            {...(showResults && results.length > 0 ? { 'aria-expanded': true, 'aria-haspopup': 'listbox' } : {})}\n            {...inputAttributes}\n          />\n          {renderClearButton()}\n        </div>\n        \n        <button \n          className=\"nhsuk-header__search-submit\" \n          type=\"submit\"\n          disabled={disabled || isLoading || (mode !== 'form' && currentValue.length < minQueryLength)}\n          {...buttonAttributes}\n        >\n          {isLoading ? renderLoadingSpinner() : renderSearchIcon()}\n          <span className=\"nhsuk-u-visually-hidden\">\n            {isLoading ? 'Searching...' : visuallyHiddenButton}\n          </span>\n        </button>\n      </form>\n      \n      {renderResults()}\n  </div>\n  );\n};\n","import React from 'react';\nimport classNames from 'classnames';\nimport { HeaderProps, NavigationItem } from './Header.types';\nimport { Account } from '../Account';\nimport { HeaderSearch } from '../HeaderSearch';\nimport './Header.scss';\nimport './Header.ssr.scss';\n\nexport interface RenderHeaderOptions {\n  variant: 'client' | 'server';\n  isClient: boolean;\n  menuOpen?: boolean;\n  showMoreButton?: boolean;\n  visibleItems?: number;\n  dropdownVisible?: boolean;\n  toggleMenu?: (e?: React.MouseEvent) => void;\n}\n\nexport function renderHeaderMarkup(\n  props: HeaderProps,\n  {\n    variant,\n    isClient,\n    menuOpen = false,\n    showMoreButton = false,\n    visibleItems,\n    dropdownVisible,\n    toggleMenu,\n  }: RenderHeaderOptions\n) {\n  const {\n    className,\n    logo = {},\n    service = {},\n    organisation,\n    search,\n    account,\n    navigation,\n    containerClasses,\n    variant: headerVariant = 'default',\n    attributes = {},\n  maxVisibleItems,\n    ...rest\n  } = props;\n\n  // Prevent internal-only props leaking to DOM\n  if ('maxVisibleItems' in (rest as any)) {\n    delete (rest as any).maxVisibleItems;\n  }\n\n  const combineLogoAndServiceNameLinks = (service.href && !logo.href) || (service.href && service.href === logo.href);\n  const logoHref = combineLogoAndServiceNameLinks ? service.href : logo.href;\n\n  const headerClasses = classNames(\n    'nhsuk-header',\n    {\n      'nhsuk-header--organisation': headerVariant === 'organisation' || organisation,\n      'nhsuk-header--white': headerVariant === 'white',\n    },\n    className\n  );\n  const containerClass = classNames('nhsuk-header__container', 'nhsuk-width-container', containerClasses);\n  const navigationClasses = classNames(\n    'nhsuk-header__navigation',\n    {\n      'nhsuk-header__navigation--white': navigation?.white,\n      'nhsuk-header__navigation--justified': navigation?.justified,\n    },\n    navigation?.className\n  );\n\n  const renderNHSLogo = () => (\n    <svg\n      className=\"nhsuk-header__logo\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 200 80\"\n      height=\"40\"\n      width=\"100\"\n      focusable=\"false\"\n      role=\"img\"\n      aria-label={logo.ariaLabel || 'NHS'}\n    >\n      <title>{logo.ariaLabel || 'NHS'}</title>\n      <path\n  fill=\"#fff\"\n        d=\"M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z\"\n      />\n    </svg>\n  );\n\n  const renderServiceLogo = () => (logo.src ? <img className=\"nhsuk-header__organisation-logo\" src={logo.src} width=\"280\" alt={logo.ariaLabel || 'NHS'} /> : renderNHSLogo());\n  const renderOrganisationName = () =>\n    organisation ? (\n      <>\n        <span className=\"nhsuk-header__organisation-name\">\n          {organisation.name}\n          {organisation.split && <span className=\"nhsuk-header__organisation-name-split\"> {' '}{organisation.split}</span>}\n        </span>\n        {organisation.descriptor && <span className=\"nhsuk-header__organisation-name-descriptor\">{organisation.descriptor}</span>}\n      </>\n    ) : null;\n  const renderServiceName = (text?: string, href?: string) => (text ? (href ? <a className=\"nhsuk-header__service-name\" href={href}>{text}</a> : <span className=\"nhsuk-header__service-name\">{text}</span>) : null);\n  const renderNavigationLinkContent = (item: NavigationItem) => (item.active || item.current ? (\n    <strong className=\"nhsuk-header__navigation-item-current-fallback\">{item.html ? <span dangerouslySetInnerHTML={{ __html: item.html }} /> : item.text}</strong>\n  ) : item.html ? <span dangerouslySetInnerHTML={{ __html: item.html }} /> : item.text);\n  const renderChevronIcon = () => (\n    <svg className=\"nhsuk-icon nhsuk-icon__chevron-down\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 12 7\" aria-hidden=\"true\" focusable=\"false\">\n      <path d=\"M1.414 0 6 4.586 10.586 0 12 1.414 6 7 0 1.414 1.414 0Z\" />\n    </svg>\n  );\n\n  // Server variant fallback overflow handling:\n  // If maxVisibleItems is provided (default 4) and navigation contains more items,\n  // we pre-render a split: first N items in the main list, remaining in an always-visible\n  // dropdown menu so that all navigation is accessible without JS. Once enhanced,\n  // the client variant will recompute actual widths and may adjust.\n  const serverTrigger = maxVisibleItems ?? 4; // threshold to decide if we collapse entirely into dropdown\n  const serverHasOverflow = variant === 'server' && navigation?.items && navigation.items.length > serverTrigger;\n  // New behaviour: when overflow triggers on server we show NO primary items; everything appears in dropdown\n  const serverPrimaryItems = serverHasOverflow ? [] : navigation?.items;\n  const serverOverflowItems = serverHasOverflow ? navigation!.items! : [];\n\n  return (\n  <header className={headerClasses} role=\"banner\" data-module=\"nhsuk-header\" {...attributes} {...rest}>\n      <div className={containerClass}>\n        <div className=\"nhsuk-header__service\">\n          {logoHref ? (\n            <a className=\"nhsuk-header__service-logo\" href={logoHref}>\n              {renderServiceLogo()}\n              {renderOrganisationName()}\n              {combineLogoAndServiceNameLinks && renderServiceName(service.text)}\n            </a>\n          ) : (\n            <>\n              {renderServiceLogo()}\n              {renderOrganisationName()}\n              {combineLogoAndServiceNameLinks && renderServiceName(service.text)}\n            </>\n          )}\n          {service.text && !combineLogoAndServiceNameLinks && renderServiceName(service.text, service.href)}\n        </div>\n        {search && <HeaderSearch {...search} />}\n        <Account {...account} variant={headerVariant === 'white' ? 'white' : 'default'} />\n      </div>\n      {navigation && navigation.items && navigation.items.length > 0 && (\n        <nav className={navigationClasses} aria-label={navigation.ariaLabel || 'Menu'}>\n          <div\n            className={classNames(\n              'nhsuk-header__navigation-container',\n              'nhsuk-width-container',\n              {\n                'nhsuk-header__navigation-container--initializing': isClient && variant === 'client',\n                'nhsuk-header__navigation-container--ssr': !isClient,\n              },\n              containerClasses\n            )}\n          >\n            <ul className=\"nhsuk-header__navigation-list\">\n              {(variant === 'server'\n                ? (serverPrimaryItems || [])\n                : (navigation?.items || []).slice(0, visibleItems ?? (navigation?.items?.length || 0))\n              ).map((item, index) => (\n                <li\n                  key={index}\n                  className={classNames(\n                    'nhsuk-header__navigation-item',\n                    {\n                      'nhsuk-header__navigation-item--current': item.active || item.current,\n                    },\n                    item.className\n                  )}\n                  {...(item.attributes || {})}\n                >\n                  <a\n                    className=\"nhsuk-header__navigation-link\"\n                    href={item.href}\n                    {...(item.active || item.current ? { 'aria-current': item.current ? 'page' : 'true' } : {})}\n                  >\n                    {renderNavigationLinkContent(item)}\n                  </a>\n                </li>\n              ))}\n              {variant === 'client' && showMoreButton && visibleItems !== undefined && navigation?.items && visibleItems < navigation.items.length && (\n                <li className=\"nhsuk-header__navigation-item nhsuk-header__navigation-item--more\">\n                  <a className=\"nhsuk-header__navigation-button\" id=\"toggle-more-menu\" onClick={toggleMenu} type=\"button\">\n                    <span>More</span>\n                    {renderChevronIcon()}\n                  </a>\n                </li>\n              )}\n            </ul>\n          </div>\n        </nav>\n      )}\n      {variant === 'client' && isClient && navigation && navigation.items && navigation.items.length > 0 && menuOpen && dropdownVisible && (\n        <div className=\"nhsuk-header__dropdown-menu\" hidden={!dropdownVisible}>\n          <ul className=\"nhsuk-header__dropdown-list\">\n            {navigation.items.slice((visibleItems ?? 0)).map((item, index) => (\n              <li\n                key={`overflow-${(visibleItems ?? 0) + index}`}\n                className={classNames('nhsuk-header__dropdown-item', {\n                  'nhsuk-header__dropdown-item--current': item.active || item.current,\n                })}\n              >\n                <a\n                  className=\"nhsuk-header__dropdown-link\"\n                  href={item.href}\n                  {...(item.active || item.current ? { 'aria-current': item.current ? 'page' : 'true' } : {})}\n                  onClick={() => {\n                    toggleMenu?.();\n                  }}\n                >\n                  {renderNavigationLinkContent(item)}\n                </a>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n      {variant === 'server' && serverHasOverflow && serverOverflowItems.length > 0 && (\n        <div className=\"nhsuk-header__dropdown-menu\" data-ssr-overflow=\"true\">\n          <ul className=\"nhsuk-header__dropdown-list\">\n            {serverOverflowItems.map((item, index) => (\n              <li\n                key={`overflow-server-${index}`}\n                className={classNames('nhsuk-header__dropdown-item', {\n                  'nhsuk-header__dropdown-item--current': item.active || item.current,\n                })}\n              >\n                <a\n                  className=\"nhsuk-header__dropdown-link\"\n                  href={item.href}\n                  {...(item.active || item.current ? { 'aria-current': item.current ? 'page' : 'true' } : {})}\n                >\n                  {renderNavigationLinkContent(item)}\n                </a>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </header>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { HeaderProps } from './Header.types';\nimport { renderHeaderMarkup } from './Header.render';\n\n/**\n * SSR-compatible Header Component with Progressive Enhancement\n * \n * This component is designed to work with Next.js SSR by:\n * 1. Rendering a functional header on the server\n * 2. Progressively enhancing with responsive overflow handling on the client\n * 3. Providing fallback navigation that works without JavaScript\n */\nexport const Header: React.FC<HeaderProps> = ({\n  className,\n  logo = {},\n  service = {},\n  organisation,\n  search,\n  account,\n  navigation,\n  containerClasses,\n  variant = 'default',\n  attributes = {},\n  ...props\n}) => {\n  // SSR-safe state initialization\n  const [menuOpen, setMenuOpen] = useState(false);\n  // These state flags are now purely for transitional compatibility while\n  // the behaviour layer manages overflow & dropdown distribution outside React.\n  // Overflow now handled entirely by behaviour layer (no React-managed More button)\n  const [showMoreButton] = useState(false);\n  const [visibleItems] = useState<number>(navigation?.items?.length || 0);\n  const [dropdownVisible, setDropdownVisible] = useState(false); // retained for a11y closing timing\n  const [isClient, setIsClient] = useState(false); // Track if we're on client side\n\n  // Simple initialization effect - runs once\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    \n    setIsClient(true);\n  // initialization effect retained for potential future logic (was isInitialized)\n  }, []); // Run once on mount\n\n\n  // SSR-safe escape key handler\n  useEffect(() => {\n    // Only run on client side\n    if (typeof document === 'undefined') return;\n    \n    const handleEscapeKey = (event: KeyboardEvent) => {\n      if (event.key === 'Escape' && menuOpen) {\n        setMenuOpen(false);\n      }\n    };\n\n    if (menuOpen) {\n      document.addEventListener('keydown', handleEscapeKey);\n      return () => document.removeEventListener('keydown', handleEscapeKey);\n    }\n  }, [menuOpen]);\n\n  // Overflow measurement & distribution now handled by behaviour layer (headerBehaviour.ts)\n  // Client component keeps only minimal dropdown visibility state.\n\n  const toggleMenu = (event?: React.MouseEvent) => {\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n    \n    const newMenuState = !menuOpen;\n    setMenuOpen(newMenuState);\n    \n  // Behaviour layer now controls DOM injection of dropdown; we track visible state for accessibility if needed.\n  setDropdownVisible(newMenuState);\n  };\n\n  // NHS Logo SVG - exact copy from NHS.UK\n  // Markup helpers removed; now handled in shared renderer\n\n  return renderHeaderMarkup(\n    { className, logo, service, organisation, search, account, navigation, containerClasses, variant, attributes, ...props },\n    {\n      variant: 'client',\n  isClient,\n  menuOpen,\n  showMoreButton,\n  visibleItems,\n  dropdownVisible,\n  toggleMenu,\n    }\n  );\n};","import React from 'react';\nimport classNames from 'classnames';\nimport './ActionLink.scss';\nimport { ActionLinkProps } from './ActionLink.types';\n\nexport const ActionLink: React.FC<ActionLinkProps> = ({\n  text,\n  href,\n  openInNewWindow = false,\n  className,\n  ...props\n}) => {\n  const linkClasses = classNames(\n    'nhsuk-action-link__link',\n    className\n  );\n\n  return (\n    <div className=\"nhsuk-action-link\">\n      <a\n        className={linkClasses}\n        href={href}\n        target={openInNewWindow ? '_blank' : undefined}\n        rel={openInNewWindow ? 'noopener noreferrer' : undefined}\n        {...props}\n      >\n        <svg \n          className=\"nhsuk-icon nhsuk-icon__arrow-right-circle\" \n          xmlns=\"http://www.w3.org/2000/svg\" \n          viewBox=\"0 0 24 24\" \n          aria-hidden=\"true\" \n          width=\"36\" \n          height=\"36\"\n        >\n          <path d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n          <path d=\"M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z\"></path>\n        </svg>\n        <span className=\"nhsuk-action-link__text\">{text}</span>\n      </a>\n    </div>\n  );\n};\n","import * as React from 'react';\nimport classNames from 'classnames';\nimport { ButtonVariant, ButtonSize } from './Button.types';\nimport './Button.scss';\n\n/**\n * SSR-Safe Button Component\n * \n * This is a simplified version of the Button component that works in SSR environments.\n * It doesn't use react-aria-components to avoid createContext dependencies.\n * \n * For full accessibility features and interactions, use the regular Button component\n * in client-side environments.\n */\n\nexport interface ButtonSSRProps extends Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, 'className'> {\n  /**\n   * The visual style variant of the button\n   */\n  variant?: ButtonVariant;\n  \n  /**\n   * The size of the button\n   */\n  size?: ButtonSize;\n  \n  /**\n   * Whether the button should take the full width of its container\n   */\n  fullWidth?: boolean;\n  \n  /**\n   * Additional CSS classes to apply\n   */\n  className?: string;\n  \n  /**\n   * The button content\n   */\n  children: React.ReactNode;\n}\n\n/**\n * SSR-Safe Button Component\n */\nexport const ButtonSSR = React.forwardRef<HTMLButtonElement, ButtonSSRProps>(\n  ({ \n    variant = 'primary', \n    size = 'default', \n    fullWidth = false, \n    className, \n    children, \n    disabled,\n    type = 'button',\n    ...rest \n  }, ref) => {\n    const buttonClasses = classNames(\n      'nhs-aria-button',\n      `nhs-aria-button--${variant}`,\n      {\n        [`nhs-aria-button--${size}`]: size !== 'default',\n        'nhs-aria-button--full-width': fullWidth,\n        'nhs-aria-button--disabled': disabled,\n      },\n      className\n    );\n\n    return (\n      <button\n        ref={ref}\n        type={type}\n        className={buttonClasses}\n        disabled={disabled}\n        {...rest}\n      >\n        {children}\n      </button>\n    );\n  }\n);\n\nButtonSSR.displayName = 'ButtonSSR';\n\nexport default ButtonSSR;\n","import React from 'react';\nimport classNames from 'classnames';\nimport './BackLink.scss';\nimport { BackLinkProps } from './BackLink.types';\n\nexport const BackLink: React.FC<BackLinkProps> = ({\n  text = 'Back',\n  html,\n  href = '#',\n  className,\n  element = 'a',\n  onClick,\n  ...props\n}) => {\n  const containerClasses = classNames(\n    'nhsuk-back-link',\n    className\n  );\n\n  const linkClasses = classNames(\n    'nhsuk-back-link__link'\n  );\n\n  const renderContent = () => {\n    return (\n      <>\n        <svg \n          className=\"nhsuk-icon nhsuk-icon__chevron-left\" \n          xmlns=\"http://www.w3.org/2000/svg\" \n          viewBox=\"0 0 24 24\" \n          aria-hidden=\"true\" \n          height=\"24\" \n          width=\"24\"\n        >\n          <path d=\"M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z\"></path>\n        </svg>\n        { html ? (\n          <span dangerouslySetInnerHTML={{ __html: html }} />\n        ) : (\n          text\n        )}\n      </>\n    );\n  };\n\n  return (\n    <div className={containerClasses}>\n      { element === 'button' ? (\n        <button\n          className={linkClasses}\n          onClick={onClick}\n          type=\"button\"\n          {...props}\n        >\n          {renderContent()}\n        </button>\n      ) : (\n        <a\n          className={linkClasses}\n          href={href}\n          {...props}\n        >\n          {renderContent()}\n        </a>\n      )}\n    </div>\n  );\n};\n","export interface TagInputProps {\n  color?: string;\n  noBorder?: boolean;\n  closable?: boolean;\n  disabled?: boolean;\n  className?: string;\n}\n\nexport interface NormalisedTagModel {\n  classes: string;\n  showClose: boolean;\n  disabled: boolean;\n}\n\nexport function mapTagProps(input: TagInputProps): NormalisedTagModel {\n  const { color = 'default', noBorder, closable, disabled, className } = input;\n  const classes = [\n    'nhsuk-tag',\n    color !== 'default' ? `nhsuk-tag--${color}` : '',\n    noBorder ? 'nhsuk-tag--no-border' : '',\n    closable ? 'nhsuk-tag--closable' : '',\n    disabled ? 'nhsuk-tag--disabled' : '',\n    className || ''\n  ].filter(Boolean).join(' ');\n  return { classes, showClose: !!closable, disabled: !!disabled };\n}\n","import React from \"react\";\nimport \"./Tag.scss\";\nimport { TagProps } from \"./Tag.types\";\nimport { mapTagProps } from \"../../mapping/tag\";\n\nexport const Tag: React.FC<TagProps> = ({\n\ttext,\n\thtml,\n\tchildren,\n\tcolor = \"default\",\n\tnoBorder = false,\n\tclosable = false,\n\tonClose,\n\tdisabled = false,\n\tclassName,\n\t...props\n}) => {\n\tconst model = mapTagProps({ color, noBorder, closable, disabled, className });\n\n\tconst handleClose = (e: React.MouseEvent) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tif (!disabled && onClose) {\n\t\t\tonClose();\n\t\t}\n\t};\n\n\treturn (\n\t\t<strong className={model.classes} {...props}>\n\t\t\t{/* Content - children take precedence, then html, then text */}\n\t\t\t{children ? (\n\t\t\t\tchildren\n\t\t\t) : html ? (\n\t\t\t\t<span dangerouslySetInnerHTML={{ __html: html }} />\n\t\t\t) : (\n\t\t\t\ttext\n\t\t\t)}\n\n\t\t\t{/* Close button */}\n\t\t\t{closable && (\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName=\"nhsuk-tag__close\"\n\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\taria-label=\"Remove\"\n\t\t\t\t\ttitle=\"Remove\"\n\t\t\t\t>\n\t\t\t\t\t×\n\t\t\t\t</button>\n\t\t\t)}\n\t\t</strong>\n\t);\n};\n","export interface LabelInputProps {\n  size?: 'xl'|'l'|'m'|'s';\n  isPageHeading?: boolean;\n  className?: string;\n  htmlFor?: string;\n}\n\nexport interface NormalisedLabelModel {\n  tag: 'label' | 'h1';\n  classes: string;\n  size: string;\n  htmlFor?: string;\n  isPageHeading: boolean;\n}\n\nexport function mapLabelProps(input: LabelInputProps): NormalisedLabelModel {\n  const size = input.size || 'm';\n  const classes = [\n    'nhsuk-label',\n    size !== 'm' ? `nhsuk-label--${size}` : '',\n    input.className || ''\n  ].filter(Boolean).join(' ');\n  return {\n    tag: input.isPageHeading ? 'h1' : 'label',\n    classes,\n    size,\n    htmlFor: input.isPageHeading ? undefined : input.htmlFor,\n    isPageHeading: !!input.isPageHeading\n  };\n}\n","import React from 'react';\nimport './Label.scss';\nimport { LabelProps } from './Label.types';\nimport { mapLabelProps } from '../../mapping/label';\n\nexport const Label: React.FC<LabelProps> = ({\n  htmlFor,\n  className,\n  isPageHeading = false,\n  size = 'm',\n  children,\n  ...props\n}) => {\n  const model = mapLabelProps({ size, isPageHeading, className, htmlFor });\n  const LabelElement = model.tag;\n\n  return (\n  <LabelElement className={model.classes} htmlFor={model.htmlFor} {...props}>\n      {isPageHeading ? (\n        <label className=\"nhsuk-label-wrapper\" htmlFor={htmlFor}>\n          {children}\n        </label>\n      ) : (\n        children\n      )}\n    </LabelElement>\n  );\n};\n","export interface HeadingInputProps {\n  level?: 1|2|3|4|5|6;\n  size?: 'xs'|'s'|'m'|'l'|'xl'|'xxl';\n  className?: string;\n  marginBottom?: string;\n}\n\nexport interface NormalisedHeadingModel {\n  tag: 'h1'|'h2'|'h3'|'h4'|'h5'|'h6';\n  classes: string;\n  style: Record<string, any> | undefined;\n}\n\nfunction deriveLevel(size?: string): 1|2|3|4|5|6 {\n  switch(size){\n    case 'xxl':\n    case 'xl': return 1;\n    case 'l': return 2;\n    case 'm': return 3;\n    case 's': return 4;\n    case 'xs': return 5;\n    default: return 2;\n  }\n}\n\nexport function mapHeadingProps(input: HeadingInputProps): NormalisedHeadingModel {\n  const level = input.level ?? deriveLevel(input.size);\n  const classes = [\n    'nhsuk-heading',\n    input.size ? `nhsuk-heading--${input.size}` : '',\n    input.className || ''\n  ].filter(Boolean).join(' ');\n  const style = input.marginBottom ? { marginBottom: input.marginBottom } : undefined;\n  return { tag: `h${level}` as any, classes, style };\n}\n","import React, { createElement } from 'react';\nimport './Heading.scss';\nimport { HeadingProps } from './Heading.types';\nimport { mapHeadingProps } from '../../mapping/heading';\n\n/**\n * A reusable Heading component that abstracts heading level logic and provides consistent styling.\n * Separates semantic meaning (level) from visual appearance (size).\n * \n * If level is not provided, it will be automatically determined from the size prop:\n * - xxl/xl → h1\n * - l → h2 \n * - m → h3\n * - s → h4\n * - xs → h5\n * \n * @example\n * <Heading level={1} size=\"xl\">Page Title</Heading>\n * <Heading level={2} size=\"l\" text=\"Section Title\" />\n * <Heading size=\"xl\" text=\"Auto h1 from size\" />\n * <Heading size=\"m\" text=\"Auto h3 from size\" />\n * <Heading level={2} text=\"Custom Spacing\" marginBottom=\"32px\" />\n */\nexport const Heading: React.FC<HeadingProps> = ({ level, className, text, html, children, size, marginBottom, ...rest }) => {\n  const model = mapHeadingProps({ level, size, className, marginBottom });\n  const content = children || (html ? <span dangerouslySetInnerHTML={{ __html: html }} /> : text);\n  return createElement(model.tag, { className: model.classes, style: model.style, ...rest }, content);\n};\n","export interface HintInputProps {\n  className?: string;\n  id?: string;\n}\n\nexport interface NormalisedHintModel {\n  classes: string;\n  id?: string;\n}\n\nexport function mapHintProps(input: HintInputProps): NormalisedHintModel {\n  const classes = [\n    'nhsuk-hint',\n    input.className || ''\n  ].filter(Boolean).join(' ');\n  return { classes, id: input.id };\n}\n","import React from 'react';\nimport './Hint.scss';\nimport { HintProps } from './Hint.types';\nimport { mapHintProps } from '../../mapping/hint';\n\nexport const Hint: React.FC<HintProps> = ({ id, className, children, ...rest }) => {\n  const model = mapHintProps({ id, className });\n  return (\n    <div className={model.classes} id={model.id} {...rest}>\n      {children}\n    </div>\n  );\n};\n","export interface ErrorMessageInputProps {\n  id?: string;\n  className?: string;\n  visuallyHiddenText?: string;\n}\n\nexport interface NormalisedErrorMessageModel {\n  classes: string;\n  id?: string;\n  visuallyHiddenText: string;\n}\n\nexport function mapErrorMessageProps(input: ErrorMessageInputProps): NormalisedErrorMessageModel {\n  const classes = ['nhsuk-error-message', input.className || ''].filter(Boolean).join(' ');\n  return {\n    classes,\n    id: input.id,\n    visuallyHiddenText: input.visuallyHiddenText ?? 'Error:'\n  };\n}\n","import React from 'react';\nimport './ErrorMessage.scss';\nimport { ErrorMessageProps } from './ErrorMessage.types';\nimport { mapErrorMessageProps } from '../../mapping/errorMessage';\n\nexport const ErrorMessage: React.FC<ErrorMessageProps> = ({ id, className, visuallyHiddenText = 'Error:', children, ...rest }) => {\n  const model = mapErrorMessageProps({ id, className, visuallyHiddenText });\n  return (\n    <span className={model.classes} id={model.id} {...rest}>\n      <span className=\"nhsuk-u-visually-hidden\">{model.visuallyHiddenText} </span>\n      {children}\n    </span>\n  );\n};\n"],"names":["Account","ariaLabel","items","className","variant","renderAccountItem","item","iconContent","jsx","textContent","content","jsxs","Fragment","classNames","index","HeaderSearch","mode","action","method","name","value","placeholder","visuallyHiddenLabel","visuallyHiddenButton","disabled","callbacks","isLoading","showResults","results","formAttributes","inputAttributes","buttonAttributes","preventDefaultSubmit","debounceMs","minQueryLength","internalValue","setInternalValue","useState","isFocused","setIsFocused","debounceRef","useRef","formRef","inputRef","isControlled","currentValue","debouncedOnChange","useCallback","query","handleInputChange","e","newValue","handleFormSubmit","searchData","handleFocus","handleBlur","handleClear","useEffect","renderSearchIcon","renderLoadingSpinner","renderClearButton","renderResults","result","renderHeaderMarkup","props","isClient","menuOpen","showMoreButton","visibleItems","dropdownVisible","toggleMenu","logo","service","organisation","search","account","navigation","containerClasses","headerVariant","attributes","maxVisibleItems","rest","combineLogoAndServiceNameLinks","logoHref","headerClasses","containerClass","navigationClasses","renderNHSLogo","renderServiceLogo","renderOrganisationName","renderServiceName","text","href","renderNavigationLinkContent","renderChevronIcon","Header","setMenuOpen","setDropdownVisible","setIsClient","handleEscapeKey","event","newMenuState","ActionLink","openInNewWindow","linkClasses","ButtonSSR","React","size","fullWidth","children","type","ref","buttonClasses","BackLink","html","element","onClick","renderContent","mapTagProps","input","color","noBorder","closable","Tag","onClose","model","handleClose","mapLabelProps","classes","Label","htmlFor","isPageHeading","LabelElement","deriveLevel","mapHeadingProps","level","style","Heading","marginBottom","createElement","mapHintProps","Hint","id","mapErrorMessageProps","ErrorMessage","visuallyHiddenText"],"mappings":"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"}