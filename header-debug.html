<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NHS Header Visually Hidden Debug</title>
    <link rel="stylesheet" href="./dist/nhs-fdp-design-system.css">
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }
        
        /* Debug styles to highlight visually hidden elements */
        .debug-mode .nhsuk-u-visually-hidden {
            position: static !important;
            width: auto !important;
            height: auto !important;
            margin: 0 !important;
            padding: 2px 4px !important;
            overflow: visible !important;
            clip: auto !important;
            white-space: normal !important;
            border: 2px solid red !important;
            background: yellow !important;
            color: black !important;
        }
        
        .test-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            background: white;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        
        .status {
            margin-top: 10px;
            padding: 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .status.hidden {
            background: #e8f5e8;
            color: #2e7d32;
        }
        
        .status.visible {
            background: #ffebee;
            color: #c62828;
        }
    </style>
</head>
<body>
    <div class="test-controls">
        <label>
            <input type="checkbox" id="debugMode"> Debug Mode (show hidden elements)
        </label>
        <div id="status" class="status"></div>
    </div>

    <!-- NHS Header Component -->
    <header class="nhsuk-header" role="banner">
        <div class="nhsuk-header__container nhsuk-width-container">
            <div class="nhsuk-header__service">
                <a class="nhsuk-header__service-logo" href="/">
                    <svg class="nhsuk-header__logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 80" height="40" width="100" focusable="false" role="img" aria-label="NHS">
                        <title>NHS</title>
                        <path fill="currentcolor" d="M200 0v80H0V0h200Zm-27.5 5.5c-14.5 0-29 5-29 22 0 10.2 7.7 13.5 14.7 16.3l.7.3c5.4 2 10.1 3.9 10.1 8.4 0 6.5-8.5 7.5-14 7.5s-12.5-1.5-16-3.5L135 70c5.5 2 13.5 3.5 20 3.5 15.5 0 32-4.5 32-22.5 0-19.5-25.5-16.5-25.5-25.5 0-5.5 5.5-6.5 12.5-6.5a35 35 0 0 1 14.5 3l4-13.5c-4.5-2-12-3-20-3Zm-131 2h-22l-14 65H22l9-45h.5l13.5 45h21.5l14-65H64l-9 45h-.5l-13-45Zm63 0h-18l-13 65h17l6-28H117l-5.5 28H129l13.5-65H125L119.5 32h-20l5-24.5Z"/>
                    </svg>
                </a>
                <span class="nhsuk-header__service-name">NHS Digital</span>
            </div>

            <search class="nhsuk-header__search">
                <form class="nhsuk-header__search-form" action="/search" method="get">
                    <label class="nhsuk-u-visually-hidden" for="search-field">
                        Search the NHS website
                    </label>
                    <input class="nhsuk-header__search-input nhsuk-input" id="search-field" name="q" type="search" placeholder="Search" autocomplete="off">
                    <button class="nhsuk-header__search-submit" type="submit">
                        <svg class="nhsuk-icon nhsuk-icon__search" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                            <path d="M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"/>
                        </svg>
                        <span class="nhsuk-u-visually-hidden">Search</span>
                    </button>
                </form>
            </search>
        </div>

        <nav class="nhsuk-header__navigation" aria-label="Menu">
            <div class="nhsuk-header__navigation-container nhsuk-width-container">
                <ul class="nhsuk-header__navigation-list">
                    <li class="nhsuk-header__navigation-item nhsuk-header__navigation-item--current">
                        <a class="nhsuk-header__navigation-link" href="/" aria-current="page">
                            <strong class="nhsuk-header__navigation-item-current-fallback">Home</strong>
                        </a>
                    </li>
                    <li class="nhsuk-header__navigation-item">
                        <a class="nhsuk-header__navigation-link" href="/health">Health A-Z</a>
                    </li>
                    <li class="nhsuk-header__navigation-item">
                        <a class="nhsuk-header__navigation-link" href="/services">NHS services</a>
                    </li>
                    <li class="nhsuk-header__menu" hidden>
                        <button class="nhsuk-header__menu-toggle nhsuk-header__navigation-link" id="toggle-menu" aria-expanded="false">
                            <span class="nhsuk-u-visually-hidden">Browse </span>
                            More
                            <svg class="nhsuk-icon nhsuk-icon__chevron-down" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                <path d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"/>
                            </svg>
                        </button>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <main style="padding: 20px;">
        <h1>NHS Header Test</h1>
        <p>This page tests the NHS Header component with visually hidden elements.</p>
        <p>Use the debug toggle in the top right to reveal/hide the visually hidden elements.</p>
        
        <h2>What should be visually hidden:</h2>
        <ul>
            <li>Search label: "Search the NHS website"</li>
            <li>Search button text: "Search"</li>
            <li>Menu button helper text: "Browse " (before "More")</li>
        </ul>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const debugCheckbox = document.getElementById('debugMode');
            const statusDiv = document.getElementById('status');
            const body = document.body;
            
            function updateStatus() {
                const hiddenElements = document.querySelectorAll('.nhsuk-u-visually-hidden');
                let isHidden = true;
                
                if (hiddenElements.length === 0) {
                    statusDiv.textContent = 'No visually hidden elements found';
                    statusDiv.className = 'status visible';
                    return;
                }
                
                hiddenElements.forEach(element => {
                    const computedStyle = window.getComputedStyle(element);
                    const elementIsHidden = computedStyle.position === 'absolute' && 
                                          computedStyle.width === '1px' && 
                                          computedStyle.height === '1px' &&
                                          computedStyle.overflow === 'hidden';
                    
                    if (!elementIsHidden && !debugCheckbox.checked) {
                        isHidden = false;
                    }
                });
                
                if (debugCheckbox.checked) {
                    statusDiv.textContent = `Debug mode: ${hiddenElements.length} elements revealed`;
                    statusDiv.className = 'status visible';
                } else if (isHidden) {
                    statusDiv.textContent = `✓ ${hiddenElements.length} elements properly hidden`;
                    statusDiv.className = 'status hidden';
                } else {
                    statusDiv.textContent = `✗ Some elements are visible when they shouldn't be`;
                    statusDiv.className = 'status visible';
                }
            }
            
            debugCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    body.classList.add('debug-mode');
                } else {
                    body.classList.remove('debug-mode');
                }
                updateStatus();
            });
            
            // Initial status check
            updateStatus();
            
            // Re-check status periodically in case styles change
            setInterval(updateStatus, 1000);
        });
    </script>
</body>
</html>
