@use '../../../packages/nhs-fdp/scss' as nhs;

// Do and Don't list component
//
// Do and Don't lists help users understand more easily what they should
// and shouldn't do.
//
// Uses panel-with-label and heading-label patterns from NHS UK design system

// NHS font family (since tokens aren't available, define directly)
// NHS font family tokens are available, use them
$nhs-font-family: nhs.$nhs-fdp-font-family-base, nhs.$nhs-fdp-font-family-fallback;

.nhsuk-do-dont-list {
  border: 1px solid nhs.$nhs-fdp-card-border-default;
  margin-bottom: nhs.$nhs-fdp-spacing-6;
  padding: 0;
  background-color: nhs.$nhs-fdp-color-primary-white;
  position: relative;
  font-family: $nhs-font-family;

  @media (min-width: nhs.$nhs-fdp-breakpoint-medium) {
    margin-bottom: nhs.$nhs-fdp-spacing-8;
  }

  @media print {
    border: 2px solid nhs.$nhs-fdp-semantic-color-form-border;
    margin-bottom: nhs.$nhs-fdp-spacing-4;
  }

  // Do/Don't list label
  &__label {
    background-color: nhs.$nhs-fdp-color-primary-blue;
    border: 0;
    color: nhs.$nhs-fdp-color-primary-white;
    display: inline-block;
    font-family: $nhs-font-family;
    font-size: nhs.$nhs-fdp-font-size-19-mobile;
    font-weight: nhs.$nhs-fdp-font-weight-bold;
    line-height: nhs.$nhs-fdp-font-line-height-base;
    margin: 0;
    margin-bottom: nhs.$nhs-fdp-spacing-2;
    padding: nhs.$nhs-fdp-spacing-2 nhs.$nhs-fdp-spacing-4;
    position: relative;
    left: 0; // aligned with component left edge
    top: -(nhs.$nhs-fdp-spacing-2);

    @media (min-width: nhs.$nhs-fdp-breakpoint-medium) {
      font-size: nhs.$nhs-fdp-font-size-22-tablet;
      left: 0; // maintain alignment on larger screens
      padding: nhs.$nhs-fdp-spacing-2 nhs.$nhs-fdp-spacing-5;
      top: -(nhs.$nhs-fdp-spacing-3);
    }

    @media print {
      color: nhs.$nhs-fdp-semantic-color-text-primary;
      background: none;
      font-size: nhs.$nhs-fdp-font-size-19-mobile;
      position: static;
      left: auto;
      top: auto;
      margin: 0;
    }
  }

  // Content wrapper with feature variant
  &__content {
    &--feature {
      padding-top: 0 !important;
    }
  }

  // List styles for do/don't items
  .nhsuk-list {
    margin-bottom: 0;
    margin-top: 0;
    padding: 0 nhs.$nhs-fdp-spacing-4 nhs.$nhs-fdp-spacing-4 nhs.$nhs-fdp-spacing-4;
    font-family: $nhs-font-family;
    list-style: none;

    @media (min-width: nhs.$nhs-fdp-breakpoint-medium) {
      padding: 0 nhs.$nhs-fdp-spacing-5 nhs.$nhs-fdp-spacing-5 nhs.$nhs-fdp-spacing-5;
    }

    @media print {
      padding: nhs.$nhs-fdp-spacing-3;
    }

    > li {
      font-size: nhs.$nhs-fdp-font-size-19-mobile;
      font-family: nhs.$nhs-fdp-font-family-base, nhs.$nhs-fdp-font-family-fallback;
      line-height: nhs.$nhs-fdp-font-line-height-base;
      margin-bottom: nhs.$nhs-fdp-spacing-3;
      position: relative;
      padding-left: nhs.$nhs-fdp-component-guidance-content-padding;

      @media (min-width: nhs.$nhs-fdp-breakpoint-medium) {
        font-size: nhs.$nhs-fdp-font-size-19-tablet;
        margin-bottom: nhs.$nhs-fdp-spacing-4;
      }

      &:last-child {
        margin-bottom: 0;
      }

      // Icon positioning
      .nhsuk-icon {
        position: absolute;
        left: 0;
        top: -#{nhs.$nhs-fdp-component-guidance-icon-position-top};
        // width inherits auto from base utility (utilities.scss)
        height: nhs.$nhs-fdp-component-guidance-icon-size;
        
        @media (min-width: nhs.$nhs-fdp-breakpoint-medium) {
          top: #{-1 * nhs.$nhs-fdp-component-guidance-icon-position-top-print};
        }
      }

      // Icon visibility for print
      @media print {
        .nhsuk-icon {
          display: none;
        }
        
        // Add text indicators for print
        &::before {
          content: "✓ ";
          font-weight: nhs.$nhs-fdp-font-weight-bold;
          color: nhs.$nhs-fdp-semantic-color-text-primary;
          position: absolute;
          left: 0;
        }
      }
    }

    // Focus management for interactive elements within lists
    a {
      &:focus {
        background-color: nhs.$nhs-fdp-semantic-color-focus-background;
        outline: nhs.$nhs-fdp-focus-outline-width solid nhs.$nhs-fdp-semantic-color-focus-background;
        outline-offset: 0;
        box-shadow: inset 0 0 0 2px nhs.$nhs-fdp-semantic-color-text-primary;
      }
    }

    // Don't list specific styles
    &--cross > li {
      @media print {
        &::before {
          content: "✗ ";
        }
      }
    }
  }

  // Spacing between multiple do/don't lists
  + .nhsuk-do-dont-list {
    margin-top: nhs.$nhs-fdp-spacing-5;

    @media (min-width: nhs.$nhs-fdp-breakpoint-medium) {
      margin-top: nhs.$nhs-fdp-spacing-6;
    }
  }

  // Responsive adjustments for smaller screens
  @media (max-width: nhs.$nhs-fdp-breakpoint-small) {
    margin-bottom: nhs.$nhs-fdp-spacing-4;

    &__label {
      font-size: nhs.$nhs-fdp-font-size-16-mobile;
      padding: nhs.$nhs-fdp-spacing-2 nhs.$nhs-fdp-spacing-3;
    }

    .nhsuk-list {
      padding: nhs.$nhs-fdp-spacing-3;

      > li {
        font-size: nhs.$nhs-fdp-font-size-16-mobile;
        margin-bottom: nhs.$nhs-fdp-spacing-2;
        padding-left: nhs.$nhs-fdp-component-guidance-content-padding-small;

        .nhsuk-icon {
          // width inherits auto from base utility (utilities.scss)
          height: nhs.$nhs-fdp-component-guidance-tick-size;
        }
      }
    }
  }

  // Ensure proper contrast for high contrast mode
  @media (prefers-contrast: high) {
    border-width: nhs.$nhs-fdp-border-width-semantic-standard;

    &__label {
      border: 2px solid;
    }
  }
}

// Base list styles for tick and cross lists
.nhsuk-list {
  &--tick,
  &--cross {
    list-style: none;
    margin-top: 0;
    padding-left: 0;
    position: relative;

    // Base styles for SVG icons
    svg {
      fill: none;
      position: absolute;
      left: 0;
      top: nhs.$nhs-fdp-component-guidance-icon-position-top;
      
      @media (min-width: nhs.$nhs-fdp-breakpoint-medium) {
        top: 0;
      }
    }
  }

  // Specific styles for tick icons
  &--tick svg {
    stroke: nhs.$nhs-fdp-color-primary-green;
  }

  // Specific styles for cross icons  
  &--cross svg {
    fill: nhs.$nhs-fdp-color-primary-red;
  }

  // High contrast mode adjustments for icons
  @media (prefers-contrast: high) {
    &--tick svg {
      stroke: currentColor;
    }
    
    &--cross svg {
      fill: currentColor;
    }
  }
}
