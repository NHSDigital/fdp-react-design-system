/**
 * AriaTabsDataGrid Demo Component Styles
 * Refactored to use NHS design tokens and SCSS
 */

@use 'sass:color';
@use '../../../packages/nhs-fdp/scss' as nhs;

// Demo-specific variables using design tokens
$demo-max-width: 1400px;
$demo-border-color: nhs.$nhs-fdp-color-grey-4;
$demo-background-light: nhs.$nhs-fdp-color-grey-5;
$demo-highlight-color: nhs.$nhs-fdp-color-primary-yellow;
$demo-text-secondary: nhs.$nhs-fdp-color-grey-1;

// Main demo container
.aria-tabs-datagrid-demo {
  max-width: 100%; // Remove fixed max-width to utilize full screen
  width: 100%;
  margin: 0 auto;
  padding: clamp(nhs.$nhs-fdp-spacing-3, 3vw, nhs.$nhs-fdp-spacing-5); // Fluid padding
  font-family: nhs.$nhs-fdp-font-family-base, nhs.$nhs-fdp-font-family-fallback;
  
  // On very large screens, maintain reasonable max-width
  @media (min-width: 1600px) {
    max-width: $demo-max-width;
    padding: nhs.$nhs-fdp-spacing-5;
  }
}

// Demo header section
.demo-header {
  margin-bottom: nhs.$nhs-fdp-spacing-5;

  h1 {
    color: nhs.$nhs-fdp-color-primary-blue;
    font-size: 2.5rem; // Using rem for larger demo headings
    margin-bottom: nhs.$nhs-fdp-spacing-2;
    font-weight: nhs.$nhs-fdp-font-weight-bold;

    @media (max-width: nhs.$nhs-fdp-breakpoint-medium) {
      font-size: 2rem;
    }

    @media (max-width: nhs.$nhs-fdp-breakpoint-small) {
      font-size: 1.75rem;
    }
  }

  p {
    font-size: nhs.$nhs-fdp-font-size-19-tablet;
    color: $demo-text-secondary;
    margin-bottom: nhs.$nhs-fdp-spacing-5;

    @media (max-width: nhs.$nhs-fdp-breakpoint-medium) {
      font-size: nhs.$nhs-fdp-font-size-16-tablet;
    }
  }
}

// Control panel section
.demo-controls {
  background: $demo-background-light;
  border-radius: nhs.$nhs-fdp-border-radius-small;
  padding: nhs.$nhs-fdp-spacing-4;
  margin-bottom: nhs.$nhs-fdp-spacing-5;
  border: nhs.$nhs-fdp-border-width-default solid $demo-border-color;

  @media (max-width: nhs.$nhs-fdp-breakpoint-medium) {
    padding: nhs.$nhs-fdp-spacing-3;
  }

  &__section {
    margin-bottom: nhs.$nhs-fdp-spacing-4;

    &:last-child {
      margin-bottom: 0;
    }

    h3 {
      color: nhs.$nhs-fdp-color-primary-black;
      font-size: nhs.$nhs-fdp-font-size-22-tablet;
      margin-bottom: nhs.$nhs-fdp-spacing-3;
      font-weight: nhs.$nhs-fdp-font-weight-bold;

      @media (max-width: nhs.$nhs-fdp-breakpoint-medium) {
        font-size: nhs.$nhs-fdp-font-size-19-tablet;
      }
    }
  }

  &__buttons {
    display: flex;
    flex-wrap: wrap;
    gap: nhs.$nhs-fdp-spacing-3;

    @media (max-width: nhs.$nhs-fdp-breakpoint-medium) {
      flex-direction: column;
    }

    .nhsuk-button {
      margin: 0;
      font-size: nhs.$nhs-fdp-font-size-14-tablet;
      padding: nhs.$nhs-fdp-spacing-2 nhs.$nhs-fdp-spacing-4;
      min-height: auto;

      @media (max-width: nhs.$nhs-fdp-breakpoint-medium) {
        width: 100%;
      }

      // Focus styles using NHS design tokens
      &:focus {
        outline: nhs.$nhs-fdp-border-width-form-element solid $demo-highlight-color;
        outline-offset: nhs.$nhs-fdp-spacing-1;
      }

      &:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
    }
  }
}

// Filter status indicator
.demo-filter-status {
  background: rgba(nhs.$nhs-fdp-color-primary-yellow, 0.1);
  border: nhs.$nhs-fdp-border-width-card-bottom solid $demo-highlight-color;
  border-radius: nhs.$nhs-fdp-border-radius-small;
  padding: nhs.$nhs-fdp-spacing-3;
  margin-bottom: nhs.$nhs-fdp-spacing-4;
  animation: slideIn 0.3s ease-out;

  &::before {
    content: "üîç";
    font-size: nhs.$nhs-fdp-font-size-22-tablet;
    margin-right: nhs.$nhs-fdp-spacing-2;
  }

  h4 {
    color: nhs.$nhs-fdp-color-primary-black;
    margin-bottom: nhs.$nhs-fdp-spacing-2;
    font-weight: nhs.$nhs-fdp-font-weight-bold;
    font-size: nhs.$nhs-fdp-font-size-16-tablet;
  }

  ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  li {
    background: $demo-highlight-color;
    color: nhs.$nhs-fdp-color-primary-black;
    padding: nhs.$nhs-fdp-spacing-1 nhs.$nhs-fdp-spacing-2;
    border-radius: nhs.$nhs-fdp-border-radius-small;
    display: inline-block;
    margin: nhs.$nhs-fdp-spacing-1 nhs.$nhs-fdp-spacing-2 nhs.$nhs-fdp-spacing-1 0;
    font-size: nhs.$nhs-fdp-font-size-14-tablet;
  }
}

// Statistics section
.demo-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: nhs.$nhs-fdp-spacing-3;
  margin-bottom: nhs.$nhs-fdp-spacing-5;

  @media (max-width: nhs.$nhs-fdp-breakpoint-medium) {
    grid-template-columns: repeat(2, 1fr);
  }

  @media (max-width: nhs.$nhs-fdp-breakpoint-small) {
    grid-template-columns: 1fr;
  }
}

.demo-stat {
  background: nhs.$nhs-fdp-color-primary-white;
  border: nhs.$nhs-fdp-border-width-card-bottom solid nhs.$nhs-fdp-color-primary-blue;
  border-radius: nhs.$nhs-fdp-border-radius-small;
  padding: nhs.$nhs-fdp-spacing-4;
  text-align: center;
  box-shadow: nhs.$nhs-fdp-shadow-card-default;

  &__value {
    display: block;
    font-size: nhs.$nhs-fdp-font-size-48-tablet;
    font-weight: nhs.$nhs-fdp-font-weight-bold;
    color: nhs.$nhs-fdp-color-primary-blue;
    line-height: 1;
    margin-bottom: nhs.$nhs-fdp-spacing-2;

    @media (max-width: nhs.$nhs-fdp-breakpoint-small) {
      font-size: nhs.$nhs-fdp-font-size-36-tablet;
    }
  }

  &__label {
    font-size: nhs.$nhs-fdp-font-size-14-tablet;
    color: $demo-text-secondary;
    font-weight: nhs.$nhs-fdp-font-weight-bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
}

// Main tabs container (avoiding duplication with main component)
.demo-tabs {
  background: nhs.$nhs-fdp-color-primary-white;
  box-shadow: none;
  margin-bottom: nhs.$nhs-fdp-spacing-5;
  width: 100%;
  overflow: hidden; // Prevent container overflow
  
  // Enhanced table overflow handling
  .aria-tabs-datagrid__panel {
    overflow-x: auto; // Allow horizontal scrolling for wide tables
    
    // Custom scrollbar styling for webkit browsers
    &::-webkit-scrollbar {
      height: 8px;
    }
    
    &::-webkit-scrollbar-track {
      background: nhs.$nhs-fdp-color-grey-5;
      border-radius: nhs.$nhs-fdp-border-radius-small;
    }
    
    &::-webkit-scrollbar-thumb {
      background: nhs.$nhs-fdp-color-grey-3;
      border-radius: nhs.$nhs-fdp-border-radius-small;
      
      &:hover {
        background: nhs.$nhs-fdp-color-grey-2;
      }
    }
  }
}

// Footer section
.demo-footer {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: nhs.$nhs-fdp-spacing-5;
  padding-top: nhs.$nhs-fdp-spacing-5;
  border-top: nhs.$nhs-fdp-border-width-card-bottom solid $demo-border-color;

  @media (max-width: nhs.$nhs-fdp-breakpoint-medium) {
    grid-template-columns: 1fr;
    gap: nhs.$nhs-fdp-spacing-3;
  }

  &__info {
    h3 {
      color: nhs.$nhs-fdp-color-primary-blue;
      font-size: nhs.$nhs-fdp-font-size-22-tablet;
      margin-bottom: nhs.$nhs-fdp-spacing-2;
      font-weight: nhs.$nhs-fdp-font-weight-bold;
    }

    p {
      color: $demo-text-secondary;
      font-size: nhs.$nhs-fdp-font-size-16-tablet;
    }
  }

  &__help {
    h4 {
      color: nhs.$nhs-fdp-color-primary-black;
      font-size: nhs.$nhs-fdp-font-size-19-tablet;
      margin-bottom: nhs.$nhs-fdp-spacing-3;
      font-weight: nhs.$nhs-fdp-font-weight-bold;
    }

    // Details component specific styling
    .demo-navigation-help {
      width: 100%;
      
      summary {
        color: nhs.$nhs-fdp-color-primary-blue;
        font-size: nhs.$nhs-fdp-font-size-19-tablet;
        font-weight: nhs.$nhs-fdp-font-weight-bold;
        cursor: pointer;
        
        &:hover {
          color: color.scale(nhs.$nhs-fdp-color-primary-blue, $lightness: -20%);
        }
      }
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    li {
      margin-bottom: nhs.$nhs-fdp-spacing-2;
      font-size: nhs.$nhs-fdp-font-size-14-tablet;
      color: $demo-text-secondary;
    }

    kbd {
      background: nhs.$nhs-fdp-color-primary-black;
      color: nhs.$nhs-fdp-color-primary-white;
      padding: nhs.$nhs-fdp-spacing-1 nhs.$nhs-fdp-spacing-2;
      border-radius: nhs.$nhs-fdp-border-radius-small;
      font-family: 'Courier New', Courier, monospace;
      font-size: nhs.$nhs-fdp-font-size-14-tablet;
      margin: 0 nhs.$nhs-fdp-spacing-1;
    }
  }
}

// Selected patient info styling
.selected-patient-info {
  margin-top: nhs.$nhs-fdp-spacing-4;
  padding: nhs.$nhs-fdp-spacing-4;
  background-color: rgba(nhs.$nhs-fdp-color-primary-blue, 0.05);
  border-radius: nhs.$nhs-fdp-border-radius-small;
  border: nhs.$nhs-fdp-border-width-form-element solid nhs.$nhs-fdp-color-primary-blue;
  animation: slideIn 0.3s ease-out;
  
  h4 {
    margin: 0 0 nhs.$nhs-fdp-spacing-2 0;
    color: nhs.$nhs-fdp-color-primary-blue;
    font-size: nhs.$nhs-fdp-font-size-19-tablet;
    font-weight: nhs.$nhs-fdp-font-weight-bold;
  }
  
  p {
    margin: 0;
    font-size: nhs.$nhs-fdp-font-size-14-tablet;
    line-height: 1.4;
    
    &:last-child {
      margin-top: nhs.$nhs-fdp-spacing-1;
      font-size: nhs.$nhs-fdp-font-size-14-mobile;
      font-style: italic;
      color: $demo-text-secondary;
    }
  }
  
  strong {
    font-weight: nhs.$nhs-fdp-font-weight-bold;
    color: nhs.$nhs-fdp-color-primary-black;
  }
  
  // Responsive behavior
  @media (max-width: nhs.$nhs-fdp-breakpoint-small) {
    padding: nhs.$nhs-fdp-spacing-3;
    
    h4 {
      font-size: nhs.$nhs-fdp-font-size-16-tablet;
    }
    
    p {
      font-size: nhs.$nhs-fdp-font-size-14-mobile;
    }
  }
}

// Animations
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-#{nhs.$nhs-fdp-spacing-3});
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// High contrast mode support
@media (forced-colors: active) {
  .demo-stat {
    border: nhs.$nhs-fdp-border-width-card-bottom solid ButtonText;
  }

  .demo-filter-status {
    border: nhs.$nhs-fdp-border-width-card-bottom solid ButtonText;
    background: Canvas;

    li {
      background: Highlight;
      color: HighlightText;
    }
  }

  .demo-footer__help kbd {
    background: ButtonText;
    color: ButtonFace;
    border: nhs.$nhs-fdp-border-width-default solid ButtonText;
  }
}

// Print styles
@media print {
  .demo-controls,
  .demo-footer__help {
    display: none;
  }

  .demo-header {
    margin-bottom: nhs.$nhs-fdp-spacing-3;
  }

  .demo-stats {
    grid-template-columns: repeat(4, 1fr);
    margin-bottom: nhs.$nhs-fdp-spacing-3;
  }

  .demo-tabs {
    box-shadow: none;
    border: nhs.$nhs-fdp-border-width-default solid nhs.$nhs-fdp-color-grey-3;
  }
}
